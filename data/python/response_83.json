[{"tags": ["python", "numpy", "hdf5", "h5py", "hdf"], "comments": [{"owner": {"reputation": 795, "user_id": 3563448, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/de5d2fa5813e44bf3b943607e5347666?s=128&d=identicon&r=PG&f=1", "display_name": "kakk11", "link": "https://stackoverflow.com/users/3563448/kakk11"}, "edited": false, "score": 0, "creation_date": 1471290592, "post_id": 38885302, "comment_id": 65278663, "body": "Did you actually compute the array size in bytes? Or Exabytes?"}, {"owner": {"reputation": 103, "user_id": 439735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/869dea711026060b8430264d774756ea?s=128&d=identicon&r=PG", "display_name": "Bryan", "link": "https://stackoverflow.com/users/439735/bryan"}, "reply_to_user": {"reputation": 795, "user_id": 3563448, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/de5d2fa5813e44bf3b943607e5347666?s=128&d=identicon&r=PG&f=1", "display_name": "kakk11", "link": "https://stackoverflow.com/users/3563448/kakk11"}, "edited": false, "score": 0, "creation_date": 1472701143, "post_id": 38885302, "comment_id": 65860321, "body": "I am not sure that is the issue.  I am never holding the entire np.array in memory, I only touch the array in slices, and load the data block by block.  Memory usage can be tuned by altering the number of blocks to work on at any one time.  I am now using np.int64 with a size of 2^32 (4294967296) and it is working fine.  It must be something internal... It does not apear to be a buffer overflow issue, I can input and then re-extract of all my data just fine."}, {"owner": {"reputation": 795, "user_id": 3563448, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/de5d2fa5813e44bf3b943607e5347666?s=128&d=identicon&r=PG&f=1", "display_name": "kakk11", "link": "https://stackoverflow.com/users/3563448/kakk11"}, "edited": false, "score": 0, "creation_date": 1472724819, "post_id": 38885302, "comment_id": 65871935, "body": "I asked if you did the actual math, you obviously didn&#39;t, well I can do it for you. You create NxN matrix with N=1e10. Which means you have 1e20 numbers in one array, right? If each number is four bytes, it will be 4e20 bytes = 400 exabytes. Current HDF5 does not support more that 4 exabyte file if I understand correctly, <a href=\"https://www.hdfgroup.org/HDF5/faq/limits.html\" rel=\"nofollow noreferrer\">hdfgroup.org/HDF5/faq/limits.html</a> So my bet is that it is buffer overflow and some arrays just get reasonable dimensions by accident."}], "owner": {"reputation": 103, "user_id": 439735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/869dea711026060b8430264d774756ea?s=128&d=identicon&r=PG", "display_name": "Bryan", "link": "https://stackoverflow.com/users/439735/bryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 798, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1470873654, "creation_date": 1470873240, "last_edit_date": 1470873654, "question_id": 38885302, "link": "https://stackoverflow.com/questions/38885302/h5py-hdf5-random-error-with-large-ndarray-ioerror-cant-prepare-for-writi", "title": "h5py (HDF5) - random error with large ndarray - IOError: Can&#39;t prepare for writing data", "body": "<p>Running into a very strange issue when trying to create a rather large numpy ndarray dataset.</p>\n\n<p>e.g.</p>\n\n<pre><code>import h5py\nimport numpy as np\n\ntest_h5=h5py.File('test.hdf5','w')\n\nn=3055693983 # fail\nn=10000000000 # works\nn=40000000000 # fail\nn=100000000000 # works\nn=20000000000 #fail\nn=512 # works\n\ntest_h5.create_dataset('matrix', shape=(n,n), dtype=np.int8, compression='gzip', chunks=(256,256))\nprint(test_h5['matrix'].shape)\na=test_h5['matrix']\na[0:256,0:256]=np.ones((256,256))\n</code></pre>\n\n<p>Chunk size is (256,256).</p>\n\n<p>If the above ndarray is set to (512,512), everything works AOK.</p>\n\n<p>If the above ndarray is set to (100000000000,100000000000), everything works AOK...</p>\n\n<p>Ideally I wanted a ndarray of size (3055693983,3055693983) which fails with the following:</p>\n\n<pre>\n(3055693983, 3055693983) \nTraceback (most recent call last):   \nFile \"h5.py\", line 16, in \n    a[0:256,0:256]=np.ones((256,256))   \nFile \"h5py/_objects.pyx\", line 54, in h5py._objects.with_phil.wrapper (/home/ilan/minonda/conda-bld/work/h5py/_objects.c:2696)   \nFile \"h5py/_objects.pyx\", line 55, in h5py._objects.with_phil.wrapper (/home/ilan/minonda/conda-bld/work/h5py/_objects.c:2654)   \nFile \"/home/user/anaconda2/lib/python2.7/site-packages/h5py/_hl/dataset.py\", line 618, in __setitem__\n    self.id.write(mspace, fspace, val, mtype, dxpl=self._dxpl)   \nFile \"h5py/_objects.pyx\", line 54, in h5py._objects.with_phil.wrapper (/home/ilan/minonda/conda-bld/work/h5py/_objects.c:2696)   \nFile \"h5py/_objects.pyx\", line 55, in h5py._objects.with_phil.wrapper (/home/ilan/minonda/conda-bld/work/h5py/_objects.c:2654)   \nFile \"h5py/h5d.pyx\", line 221, in h5py.h5d.DatasetID.write (/home/ilan/minonda/conda-bld/work/h5py/h5d.c:3527)   \nFile \"h5py/_proxy.pyx\", line 132, in h5py._proxy.dset_rw (/home/ilan/minonda/conda-bld/work/h5py/_proxy.c:1889)   \nFile \"h5py/_proxy.pyx\", line 93, in h5py._proxy.H5PY_H5Dwrite (/home/ilan/minonda/conda-bld/work/h5py/_proxy.c:1599) \nIOError: Can't prepare for writing data (Can't retrieve number of elements in file dataset)\n</pre>\n\n<p>Setting the ndarray to a few random sizes produced mixed results.  Some work, some do not... I thought it may be something simple like the ndarray size not being evenly divisible by the chunk_size, but that does not appear to be the issue.</p>\n\n<p>What am I missing here?  </p>\n"}, {"tags": ["python", "python-3.x", "py2exe", "conda"], "comments": [{"owner": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 0, "creation_date": 1470933303, "post_id": 38885292, "comment_id": 65162322, "body": "Well, that file doesn&#39;t exist in the tarball for the package. From searching on Anaconda.org, it seems like the version of py2exe in that channel (<code>sasview</code>) is somewhat out of date. Maybe try using the <code>silg2</code> channel?"}, {"owner": {"reputation": 7225, "user_id": 1899628, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/PAWN2.png?s=128&g=1", "display_name": "stenci", "link": "https://stackoverflow.com/users/1899628/stenci"}, "reply_to_user": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 0, "creation_date": 1470934236, "post_id": 38885292, "comment_id": 65162804, "body": "I tried them both with the same result"}], "answers": [{"comments": [{"owner": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 0, "creation_date": 1470941493, "post_id": 38903773, "comment_id": 65166644, "body": "I think conda is well aware of which version of Python works properly (hence why it installs 3.4). I would guess the error is probably because the conda packages don&#39;t include the .exe file that&#39;s expected, and the pip package does. Check the actual files that get installed when you install with conda vs pip, and see if there&#39;s a difference. Glad you got it working :-)"}, {"owner": {"reputation": 7225, "user_id": 1899628, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/PAWN2.png?s=128&g=1", "display_name": "stenci", "link": "https://stackoverflow.com/users/1899628/stenci"}, "reply_to_user": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 0, "creation_date": 1470942242, "post_id": 38903773, "comment_id": 65167120, "body": "@darthbith The .py files are identical in both the installations, but pip installed also a bunch of .dll and .exe that are missing in the environment created by conda... I thought that one big difference between pip and conda was that conda is better at managing binary files :)"}, {"owner": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 0, "creation_date": 1470943121, "post_id": 38903773, "comment_id": 65167606, "body": "I think conda is better at that (although pip wheels are pretty good), but the recipe has to be packaged properly. It looks like the maintainers of those packages fell down on the job, so to speak :-)"}, {"owner": {"reputation": 7225, "user_id": 1899628, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/PAWN2.png?s=128&g=1", "display_name": "stenci", "link": "https://stackoverflow.com/users/1899628/stenci"}, "reply_to_user": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 0, "creation_date": 1470954178, "post_id": 38903773, "comment_id": 65172523, "body": "@darthbith I wasn&#39;t able to leave a message to the anaconda.org user silg2. Do you know if it is possible to contact other users, like I would in github?"}, {"owner": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 0, "creation_date": 1470965401, "post_id": 38903773, "comment_id": 65175266, "body": "I don&#39;t know. You can make your own package though, since the source is available on PyPI. Type <code>conda skeleton pypi py2exe</code> and it should generate the recipe for a conda package. Then type <code>conda build --python=3.4 C:\\Path\\to\\recipe</code> and it should build a package."}], "tags": [], "owner": {"reputation": 7225, "user_id": 1899628, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/PAWN2.png?s=128&g=1", "display_name": "stenci", "link": "https://stackoverflow.com/users/1899628/stenci"}, "is_accepted": true, "score": 0, "last_activity_date": 1470940382, "creation_date": 1470940382, "answer_id": 38903773, "question_id": 38885292, "link": "https://stackoverflow.com/questions/38885292/running-py2exe-says-run-py3-4-win32-exe-is-missing/38903773#38903773", "title": "Running py2exe says run-py3.4-win32.exe is missing", "body": "<p>Executing <code>conda create -n test py2exe -c silg2</code> installs pytnon 3.4.5 instead of the most recent 3.5.2, which makes me think that conda knows which version works with py2exe. Apparently this is not true.</p>\n\n<p>This works:</p>\n\n<pre><code>conda create -n test python=3.4\nactivate test\npip install py2exe\npython setup.py py2exe\n</code></pre>\n\n<p>Using <code>conda list</code> shows the same packages with the same versions in both environments, but py2exe only works when installed by pip, not when installed by conda.</p>\n"}], "owner": {"reputation": 7225, "user_id": 1899628, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/PAWN2.png?s=128&g=1", "display_name": "stenci", "link": "https://stackoverflow.com/users/1899628/stenci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 655, "favorite_count": 0, "accepted_answer_id": 38903773, "answer_count": 1, "score": 0, "last_activity_date": 1470940382, "creation_date": 1470873162, "last_edit_date": 1592644375, "question_id": 38885292, "link": "https://stackoverflow.com/questions/38885292/running-py2exe-says-run-py3-4-win32-exe-is-missing", "title": "Running py2exe says run-py3.4-win32.exe is missing", "body": "<p>I tried to follow <a href=\"http://www.py2exe.org/index.cgi/Tutorial\" rel=\"nofollow noreferrer\">this tutorial</a> and I got stuck. These are the steps I followed:</p>\n<ol>\n<li><p>I installed Anaconda 32 bit</p>\n</li>\n<li><p>I executed <code>conda create -n test py2exe -c sasview</code>, which installed Python 3.4.5-0, py2exe 0.9.2.2-py34_1 and other packages</p>\n</li>\n<li><p>I created the <code>hello.py</code> file containing <code>print(&quot;Hello World!&quot;)</code></p>\n</li>\n<li><p>I created the <code>setup.py</code> file containing:</p>\n<p><code>from distutils.core import setup\nimport py2exe\nsetup(console=['hello.py'])</code></p>\n</li>\n<li><p>I executed</p>\n<p><code>activate test\npython setup.py py2exe</code></p>\n</li>\n</ol>\n<p>The result was:</p>\n<pre><code>running py2exe\n\n  1 missing Modules\n  ------------------\n? readline                            imported from cmd, code, pdb\nBuilding 'dist\\hello.exe'.\nerror: [Errno 2] No such file or directory: 'C:\\\\Anaconda3\\\\envs\\\\test\\\\lib\\\\site-packages\\\\py2exe\\\\run-py3.4-win32.exe'\n</code></pre>\n<p>The missing module is just a warning and can be ignored (see <a href=\"https://stackoverflow.com/questions/26875291/py2exe-missing-modules\">here</a>).</p>\n<p>Py2exe is not available for Python 3.5 yet, and it looks like conda knows about it and installs python 3.4.</p>\n<p>What am I missing?</p>\n"}, {"tags": ["python", "excel", "file", "xlsxwriter", "file-writing"], "comments": [{"owner": {"reputation": 12668, "user_id": 95852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e215c7362074d0346612a10d3a89be9e?s=128&d=identicon&r=PG", "display_name": "John Y", "link": "https://stackoverflow.com/users/95852/john-y"}, "edited": false, "score": 1, "creation_date": 1470954548, "post_id": 38885263, "comment_id": 65172629, "body": "That is indeed bizarre. I think you will need to include more information, such as the code you are using to initialize <code>fields</code>. See <a href=\"http://stackoverflow.com/help/mcve\">how to create an MCVE</a>."}], "owner": {"reputation": 1328, "user_id": 2399208, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2656e44dcda681bd7f31969ffbd91432?s=128&d=identicon&r=PG", "display_name": "camden", "link": "https://stackoverflow.com/users/2399208/camden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1470873396, "creation_date": 1470872923, "question_id": 38885263, "link": "https://stackoverflow.com/questions/38885263/file-not-writing-unless-i-set-a-trace-and-wait", "title": "File not writing unless I set a trace and wait", "body": "<p>I'm having a bizarre issue trying to write an <code>xlsx</code> file in Python. \nI'm using Python 2.7.x and <code>xlsxwriter</code> to write <code>xlsx</code> files.\nHere's a code snippet for context:</p>\n\n<pre><code>workbook = xlsxwriter.Workbook('filename.xlsx')\nworksheet = workbook.add_worksheet('worksheet_name')\nworksheet.write_row('A1', make_header_row)  // &lt;---- ROW 1\n... // initialize \"fields\" array\nworksheet.write_row('A2', fields)           // &lt;---- ROW 2\n</code></pre>\n\n<p>So here's the problem: <strong>Row 1</strong> gets written, no problem. <strong>Row 2</strong> never gets written... <em>unless</em> I stick a <code>import pdb; pdb.set_trace()</code> right above the line where I write Row 2. Waiting ~5 seconds in the <code>pdb</code> and then hitting <code>continue</code> will result in a <em>successfully written second row</em>. </p>\n\n<p>I've tried <code>flush</code>ing the workbook right after <code>write_row</code>, making sure the file is <code>close</code>d... nothing works. </p>\n\n<p>Thanks for any help you can provide!</p>\n"}, {"tags": ["python", "django", "validation"], "comments": [{"owner": {"reputation": 46016, "user_id": 2615075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f23ab144c48263fa1c4cf43ae46fb70d?s=128&d=identicon&r=PG", "display_name": "knbk", "link": "https://stackoverflow.com/users/2615075/knbk"}, "edited": false, "score": 0, "creation_date": 1470873063, "post_id": 38885260, "comment_id": 65131145, "body": "Can you show the <code>register.html</code> template?"}, {"owner": {"reputation": 453, "user_id": 1852176, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/b40342734e56f6de7846c5ba97b02da3?s=128&d=identicon&r=PG", "display_name": "user1852176", "link": "https://stackoverflow.com/users/1852176/user1852176"}, "reply_to_user": {"reputation": 46016, "user_id": 2615075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f23ab144c48263fa1c4cf43ae46fb70d?s=128&d=identicon&r=PG", "display_name": "knbk", "link": "https://stackoverflow.com/users/2615075/knbk"}, "edited": false, "score": 0, "creation_date": 1470873465, "post_id": 38885260, "comment_id": 65131244, "body": "@knbk added the form"}], "answers": [{"comments": [{"owner": {"reputation": 453, "user_id": 1852176, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/b40342734e56f6de7846c5ba97b02da3?s=128&d=identicon&r=PG", "display_name": "user1852176", "link": "https://stackoverflow.com/users/1852176/user1852176"}, "edited": false, "score": 0, "creation_date": 1470874894, "post_id": 38885440, "comment_id": 65131603, "body": "Changing the form action from what I currently have to what you have shown results in the following error <code>NoReverseMatch at &#47;register&#47; Reverse for &#39;register&#39; with arguments &#39;()&#39; and keyword arguments &#39;{}&#39; not found. 0 pattern(s) tried: []</code>. However, when I change the action to <code>&#39; &#39;</code> like you suggested above, it redirects correctly, but the errors aren&#39;t showing. I have code to show errors, which I forgot to copy. I&#39;ll update my original post to reflect it."}], "tags": [], "owner": {"reputation": 46016, "user_id": 2615075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f23ab144c48263fa1c4cf43ae46fb70d?s=128&d=identicon&r=PG", "display_name": "knbk", "link": "https://stackoverflow.com/users/2615075/knbk"}, "is_accepted": false, "score": 0, "last_activity_date": 1470874456, "creation_date": 1470874456, "answer_id": 38885440, "question_id": 38885260, "link": "https://stackoverflow.com/questions/38885260/django-form-validation-not-redirecting-to-the-correct-url/38885440#38885440", "title": "Django form validation not redirecting to the correct url", "body": "<p>The <code>action</code> on your form points to a relative path, <code>register</code>. If an url path does not begin with a slash, it will append it after the last slash of the current url. Since the form is being posted to <code>/register/register</code>, and your url pattern matches that, that's the url you'll see when an error occurs.</p>\n\n<p>To fix this, you should make it an absolute url (starting with a slash) or make it empty (i.e. <code>action=''</code>) to post to the current url. </p>\n\n<p>The most robust way to point the action to the <code>RegisterViewSet</code> is to use the <code>{% url %}</code> template tag. To use this, you need to give the url a name. It is probably a good idea to add a <code>$</code> to the pattern as well, so it only matches if <code>/register/</code> is the complete url, and not if it's just the start of the url:</p>\n\n<pre><code># authorization/urls.py\nurlpatterns = [\n    url(r'^$', views.home, name='home'),\n    url(r'^register/$', views.RegisterViewSet.as_view({'get' : 'register', 'post' : 'create'}), name='register'),\n]\n\n# authorization/register.html\n&lt;form method=\"post\" action=\"{% url 'register' %}\" id=\"RegisterForm\"&gt;\n...\n</code></pre>\n"}], "owner": {"reputation": 453, "user_id": 1852176, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/b40342734e56f6de7846c5ba97b02da3?s=128&d=identicon&r=PG", "display_name": "user1852176", "link": "https://stackoverflow.com/users/1852176/user1852176"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1004, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470875005, "creation_date": 1470872906, "last_edit_date": 1470875005, "question_id": 38885260, "link": "https://stackoverflow.com/questions/38885260/django-form-validation-not-redirecting-to-the-correct-url", "title": "Django form validation not redirecting to the correct url", "body": "<p>I'm using Django 1.9.8 and having some trouble validating a form for registering users. If there are validation errors, the redirect back to the form is to the incorrect url. The registration url is <code>localhost:8000/register</code>. When errors are found (I think that's what's happening, anyway), the page is redirected to <code>localhost:8000/register/register</code>. What am I doing incorrectly that is causing the redirect to add an additional <code>register</code> argument to the url?</p>\n\n<pre><code>#authorization/views.py\nclass RegisterViewSet(viewsets.ViewSet):\n\n    #GET requests\n    def register(self,request):\n        return render(request, 'authorization/register.html', {'form': RegisterForm})\n\n    #POST requests\n    def create(self,request):\n        form = RegisterForm(request.POST)\n        if form.is_valid():\n            username = request.POST['username']\n            email = request.POST['email']\n            password = request.POST['password']\n            user = User.objects.create_user(username,email,password)\n            user.save()\n            return HttpResponseRedirect('/users') #show list of users after saving\n        else:\n            #return to the form for the user to fix errors &amp; continue registering\n            return render(request, 'authorization/register.html', {'form': RegisterForm}) \n</code></pre>\n\n<p>Here's the RegisterForm content</p>\n\n<pre><code>#authorization/forms.py\nclass RegisterForm(AuthenticationForm):\n    username = forms.CharField(label=\"Username\", max_length=30,\n                               widget=forms.TextInput(attrs={'class': 'form-control', 'name': 'username'}))\n    email = forms.CharField(label=\"Email\", max_length=30,\n                               widget=forms.TextInput(attrs={'class': 'form-control', 'name': 'email'}))\n    password = forms.CharField(label=\"Password\", max_length=30,\n                               widget=forms.TextInput(attrs={'class': 'form-control', 'name': 'password', 'type' : 'password'}))\n    repassword = forms.CharField(label=\"RePassword\", max_length=30,\n                               widget=forms.TextInput(attrs={'class': 'form-control', 'name': 'repassword', 'type' : 'password'}))\n\n    def clean_password(self):\n        password1 = self.cleaned_data.get('password')\n        password2 = self.cleaned_data.get('repassword')\n        if password1 and password1 != password2:\n            raise forms.ValidationError(\"Passwords don't match\")\n        return self.cleaned_data\n</code></pre>\n\n<p>I'm not sure if this is relevant, but here's my urls.py </p>\n\n<pre><code>#authorization/urls.py\nurlpatterns = [\n    url(r'^$', views.home, name='home'),\n    url(r'^register/', views.RegisterViewSet.as_view({'get' : 'register', 'post' : 'create'})),\n]\n</code></pre>\n\n<p>I tested the create method prior to adding the form validation part and it was successfully saving users, so I know it at least was working up to that point. </p>\n\n<p><strong>Edit - added form contents</strong></p>\n\n<pre><code>{% if form.errors %}\n    {% for field in form %}\n        {% for error in field.errors %}\n            &lt;div class=\"alert alert-error\"&gt;\n                &lt;strong&gt;{{ error|escape }}&lt;/strong&gt;\n            &lt;/div&gt;\n        {% endfor %}\n    {% endfor %}\n{% endif %}\n\n\n&lt;form method=\"post\" action=\"register\" id = \"RegisterForm\"&gt;\n    {% csrf_token %}\n    &lt;p class=\"bs-component\"&gt;\n        &lt;table&gt;\n            &lt;tr&gt;\n                &lt;td&gt;{{ form.username.label_tag }}&lt;/td&gt;\n                &lt;td&gt;{{ form.username }}&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;{{ form.email.label_tag }}&lt;/td&gt;\n                &lt;td&gt;{{ form.email }}&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;{{ form.password.label_tag }}&lt;/td&gt;\n                &lt;td&gt;{{ form.password }}&lt;/td&gt;\n            &lt;/tr&gt;\n             &lt;tr&gt;\n                &lt;td&gt;{{ form.repassword.label_tag }}&lt;/td&gt;\n                &lt;td&gt;{{ form.repassword }}&lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/table&gt;\n    &lt;/p&gt;\n    &lt;p class=\"bs-component\"&gt;\n        &lt;center&gt;\n            &lt;input class=\"btn btn-success btn-sm\" type=\"submit\" value=\"Register\" /&gt;\n        &lt;/center&gt;\n    &lt;/p&gt;\n    &lt;input type=\"hidden\" name=\"next\" value=\"{{ next }}\" /&gt;\n&lt;/form&gt;\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 6581, "user_id": 3765319, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1262dca6cd7334e5eb75649272eea20d?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/3765319/kartik"}, "edited": false, "score": 0, "creation_date": 1470873213, "post_id": 38885214, "comment_id": 65131177, "body": "<code>df.groupby(df.index).value_counts()</code> doesn&#39;t work for you?"}, {"owner": {"reputation": 1301, "user_id": 5112032, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/783e405a36a8ee5012167acffe82f578?s=128&d=identicon&r=PG&f=1", "display_name": "eljusticiero67", "link": "https://stackoverflow.com/users/5112032/eljusticiero67"}, "reply_to_user": {"reputation": 6581, "user_id": 3765319, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1262dca6cd7334e5eb75649272eea20d?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/3765319/kartik"}, "edited": false, "score": 0, "creation_date": 1470873668, "post_id": 38885214, "comment_id": 65131293, "body": "thanks-- i might not be implementing correctly, but im getting this error: &#39;DataFrameGroupBy&#39; object has no attribute &#39;value_counts&#39;"}, {"owner": {"reputation": 6581, "user_id": 3765319, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1262dca6cd7334e5eb75649272eea20d?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/3765319/kartik"}, "edited": false, "score": 0, "creation_date": 1470873794, "post_id": 38885214, "comment_id": 65131321, "body": "How about: <code>df.groupby(df.index).apply(lambda x: x[&#39;val&#39;].value_counts())</code>?"}, {"owner": {"reputation": 1301, "user_id": 5112032, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/783e405a36a8ee5012167acffe82f578?s=128&d=identicon&r=PG&f=1", "display_name": "eljusticiero67", "link": "https://stackoverflow.com/users/5112032/eljusticiero67"}, "reply_to_user": {"reputation": 6581, "user_id": 3765319, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1262dca6cd7334e5eb75649272eea20d?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/3765319/kartik"}, "edited": false, "score": 0, "creation_date": 1470873977, "post_id": 38885214, "comment_id": 65131366, "body": "Unfortunately no. This gives me the full &#39;val&#39; column and a list of 1s in a second column."}], "answers": [{"comments": [{"owner": {"reputation": 1301, "user_id": 5112032, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/783e405a36a8ee5012167acffe82f578?s=128&d=identicon&r=PG&f=1", "display_name": "eljusticiero67", "link": "https://stackoverflow.com/users/5112032/eljusticiero67"}, "edited": false, "score": 0, "creation_date": 1470937773, "post_id": 38885482, "comment_id": 65164578, "body": "Thanks for your help. Ubuntu&#39;s one liner seems to work pretty straightforwardly!"}, {"owner": {"reputation": 6581, "user_id": 3765319, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1262dca6cd7334e5eb75649272eea20d?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/3765319/kartik"}, "reply_to_user": {"reputation": 1301, "user_id": 5112032, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/783e405a36a8ee5012167acffe82f578?s=128&d=identicon&r=PG&f=1", "display_name": "eljusticiero67", "link": "https://stackoverflow.com/users/5112032/eljusticiero67"}, "edited": false, "score": 0, "creation_date": 1470937922, "post_id": 38885482, "comment_id": 65164666, "body": "Unutbu, not Ubuntu. The person is not an OS! :) Glad you found what you were looking for."}], "tags": [], "owner": {"reputation": 6581, "user_id": 3765319, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1262dca6cd7334e5eb75649272eea20d?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/3765319/kartik"}, "is_accepted": false, "score": 1, "last_activity_date": 1470874857, "creation_date": 1470874857, "answer_id": 38885482, "question_id": 38885214, "link": "https://stackoverflow.com/questions/38885214/value-counts-of-column-slice-to-contain-all-possible-unique-values-in-column/38885482#38885482", "title": "Value Counts of Column Slice to Contain All Possible Unique Values in Column", "body": "<p>This works:</p>\n\n<pre><code>from io import StringIO\nimport pandas as pd\nimport numpy as np\n\ndata = StringIO(\"\"\"group,val\nA,1\nA,1\nA,2\nB,1\nB,2\nB,3\"\"\")\ndf = pd.read_csv(data)\n\nprint(df, '\\n')\n\nres_idx = pd.MultiIndex.from_product([df['group'].unique(), df['val'].unique()])\nres = pd.concat([pd.DataFrame(index=res_idx),\n                 df.groupby('group').apply(lambda x: x['val'].value_counts())],\n                axis=1)\n\nprint(res)\n</code></pre>\n\n<p>Produces:</p>\n\n<pre><code>  group  val\n0     A    1\n1     A    1\n2     A    2\n3     B    1\n4     B    2\n5     B    3 \n\n     val\nA 1  2.0\n  2  1.0\n  3  NaN\nB 1  1.0\n  2  1.0\n  3  1.0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "is_accepted": true, "score": 1, "last_activity_date": 1470876361, "creation_date": 1470876361, "answer_id": 38885652, "question_id": 38885214, "link": "https://stackoverflow.com/questions/38885214/value-counts-of-column-slice-to-contain-all-possible-unique-values-in-column/38885652#38885652", "title": "Value Counts of Column Slice to Contain All Possible Unique Values in Column", "body": "<pre><code>In [185]: df.groupby('group')['val'].value_counts().unstack('group')\nOut[185]: \ngroup    A    B\nval            \n1      2.0  1.0\n2      1.0  1.0\n3      NaN  1.0\n\nIn [186]: df.groupby('group')['val'].value_counts().unstack('group')['A']\nOut[186]: \nval\n1    2.0\n2    1.0\n3    NaN\nName: A, dtype: float64\n</code></pre>\n"}], "owner": {"reputation": 1301, "user_id": 5112032, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/783e405a36a8ee5012167acffe82f578?s=128&d=identicon&r=PG&f=1", "display_name": "eljusticiero67", "link": "https://stackoverflow.com/users/5112032/eljusticiero67"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 38885652, "answer_count": 2, "score": 0, "last_activity_date": 1470937716, "creation_date": 1470872522, "last_edit_date": 1470937716, "question_id": 38885214, "link": "https://stackoverflow.com/questions/38885214/value-counts-of-column-slice-to-contain-all-possible-unique-values-in-column", "title": "Value Counts of Column Slice to Contain All Possible Unique Values in Column", "body": "<p>I have a df that looks like this:</p>\n\n<pre><code>group   val\nA       1\nA       1\nA       2\nB       1\nB       2\nB       3\n</code></pre>\n\n<p>I want to get the value_counts for each group separately, but want to show all possible values for each value_count group:</p>\n\n<pre><code>&gt; df[df['group']=='A']['val'].value_counts()\n\n1       2\n2       1\n3       NaN\nName: val, dtype: int64\n</code></pre>\n\n<p>But it currently looks like this:</p>\n\n<pre><code>&gt; df[df['group']=='A']['val'].value_counts()\n\n1       2\n2       1\nName: val, dtype: int64\n</code></pre>\n\n<p>Any one know any way I can show value_counts with all possible values represented?</p>\n"}, {"tags": ["python", "opencv", "computer-vision", "structure-from-motion"], "comments": [{"owner": {"reputation": 2999, "user_id": 1648011, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/62cf1e1d4cec3b8f1a03570bb0e55d05?s=128&d=identicon&r=PG", "display_name": "Photon", "link": "https://stackoverflow.com/users/1648011/photon"}, "edited": false, "score": 0, "creation_date": 1470935629, "post_id": 38885204, "comment_id": 65163498, "body": "You&#39;re assuming that the inliers found are perfect, and then reject a camera configuration if any point <code>z&lt;0</code>.   You need to assume that there still could be an outlier, and find the configuration that maximizes the number of <code>z&gt;0</code> points."}], "owner": {"reputation": 22497, "user_id": 1185242, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/16eb0aedb14ca0a2e5013721cd679485?s=128&d=identicon&r=PG", "display_name": "nickponline", "link": "https://stackoverflow.com/users/1185242/nickponline"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 536, "favorite_count": 3, "answer_count": 0, "score": 3, "last_activity_date": 1470872407, "creation_date": 1470872407, "question_id": 38885204, "link": "https://stackoverflow.com/questions/38885204/how-do-you-estimate-3d-points-from-two-images-point-correspondence", "title": "How do you estimate 3D points from two images point correspondence?", "body": "<p>I'm trying to implement a basic structure-from-motion pipeline in Python using OpenCV to generate a point cloud from two images given the corresponding point in both images. I manage to get 3D points out of it but the locations don't really make sense. </p>\n\n<pre><code>import sys, cv2, numpy as np\nfrom numpy import *\n\ndef valid_cameras(inliers1, inliers2, rot, trans):\n    # check if the point correspondences are in front of both images\n    rot_inv = rot\n    for first, second in zip(inliers1, inliers2):\n        first_z = np.dot(rot[0, :] - second[0]*rot[2, :], trans) / np.dot(rot[0, :] - second[0]*rot[2, :], second)\n        first_3d_point = np.array([first[0] * first_z, second[0] * first_z, first_z])\n        second_3d_point = np.dot(rot.T, first_3d_point) - np.dot(rot.T, trans)\n\n        if first_3d_point[2] &lt; 0 or second_3d_point[2] &lt; 0:\n            return False\n\n    return True\n\n# points1 point2 are corresponding pixel in the two images that match computer with SIFT and RANSAC\ndef point_cloud(points1, points2):\n    F, inliers = cv2.findFundamentalMat(points2, points1, cv2.RANSAC)\n    mask = np.where( inliers.flatten() )\n\n\n    for x1, x2 in zip(np.int32(points1[mask]), np.int32(points2[mask])):\n        x1 = x1.tolist()\n        x2 = x2.tolist()\n\n        x1.append(1)\n        x2.append(1)\n\n        x1 = np.array(x1)\n        x2 = np.array(x2)\n\n        #print x1.T.dot(F.dot(x2)) should be approxiatemly 0.0\n\n    # FROM HERE\n    # Is this correct for iPhone 6?\n    focal  = 4.89 # mm EFL\n    x, y   = 2448, 3264\n    sx, sy = 24, 36\n    fx, fy = focal * x / sx, focal * y / sy\n\n    K  = np.array([\n      [fx, 0.0, 0.0],\n      [0.0, fy, 0.0],\n      [0.0, 0.0, 1.0,],\n    ])\n\n    K_inv = np.linalg.inv(K)\n\n    # Decompose into the essential matrix\n    E = K.T.dot(F).dot(K)\n\n    # Decompose essential matrix into R, t (See Hartley and Zisserman 9.13)\n    U, S, Vt = np.linalg.svd(E)\n    W = np.array([0.0, -1.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0]).reshape(3, 3)\n    # print .flatten()\n    mask = mask[0].tolist()\n\n    inliers1, inliers2 = [], []\n    for i in range( len(mask) ):\n        if mask[i]:\n            # normalize and homogenize the image coordinates\n            inliers1.append(K_inv.dot([points1[i][0], points1[i][1], 1.0]))\n            inliers2.append(K_inv.dot([points2[i][0], points2[i][1], 1.0]))\n\n    # Determine the correct choice of second camera matrix\n    # only in one of the four configurations will all the points be in front of both cameras\n    # First choice: R = U * Wt * Vt, T = +u_3 (See Hartley Zisserman 9.19)\n    R = U.dot(W).dot(Vt)\n    T = U[:, 2]\n\n    if not valid_cameras(inliers1, inliers2, R, T):\n        # Second choice: R = U * W * Vt, T = -u_3\n        T = - U[:, 2]\n        if not valid_cameras(inliers1, inliers2, R, T):\n            # Third choice: R = U * Wt * Vt, T = u_3\n            R = U.dot(W.T).dot(Vt)\n            T = U[:, 2]\n            if not valid_cameras(inliers1, inliers2, R, T):\n                # Fourth choice: R = U * Wt * Vt, T = -u_3\n                T = - U[:, 2]\n\n    T = T.reshape(1, 3)\n\n    P1 = np.mat('1 0 0 0 ; 0 1 0 0 ; 0 0 1 0')\n    P2 = np.bmat([[R, T.T]])\n\n    points1 = np.hstack((points1, np.ones((points1.shape[0], 1))))\n    points2 = np.hstack((points2, np.ones((points2.shape[0], 1))))\n\n    X = cv2.triangulatePoints(P1[:3], P2[:3], points1.T[:2], points2.T[:2])\n\n    # Remember to divide out the 4th row. Make it homogeneous\n    X /= X[3]\n\n    # Recover the origin arrays from PX\n    x1 = dot(P1[:3],X)\n    x2 = dot(P2[:3],X)\n\n    # Again, put in homogeneous form before using them\n    x1 /= x1[2]\n    x2 /= x2[2]\n\n    print X # 3d points\n</code></pre>\n\n<p>I'm concerned if the logic from the comment # FROM HERE is correct? In particular is the camera matrix correct for an iPhone 6 and is the logic for compute the 3d point from the 2d correspondence correct?</p>\n"}, {"tags": ["python", "git", "pyqt5", "python-sphinx", "autodoc"], "answers": [{"tags": [], "owner": {"reputation": 492, "user_id": 5457552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/21ad7986d0024996dba12115b488f588?s=128&d=identicon&r=PG&f=1", "display_name": "MaVCArt", "link": "https://stackoverflow.com/users/5457552/mavcart"}, "is_accepted": true, "score": 9, "last_activity_date": 1471254378, "last_edit_date": 1471254378, "creation_date": 1471215154, "answer_id": 38947318, "question_id": 38885106, "link": "https://stackoverflow.com/questions/38885106/sphinx-apidoc-picks-up-submodules-but-autodoc-doesnt-document-them/38947318#38947318", "title": "sphinx-apidoc picks up submodules, but autodoc doesn&#39;t document them", "body": "<p>I ended up fixing this problem eventually - it seems I was overlooking some errors, and sphinx worked just fine. I added all the paths the package contains in the conf.py and it just worked from there:</p>\n\n<p>conf.py:</p>\n\n<pre><code>sys.path.insert(0, os.path.abspath('../StyledPyQt5'))\nsys.path.insert(0, os.path.abspath('../StyledPyQt5/styledpyqt'))\nsys.path.insert(0, os.path.abspath('../StyledPyQt5/styledpyqt/core'))\nsys.path.insert(0, os.path.abspath('../StyledPyQt5/styledpyqt/core/base'))\n</code></pre>\n\n<p>From there, everything worked.</p>\n\n<p>It's important to note here that I generate my docs in a separate directory from my code. If you're using sphinx-apidoc to generate your .rst files, and you're using a gh-pages branch for documentation like I am, don't forget to generate your HTML pages separately while you're on the master branch. Otherwise, there won't be any code to source from. My workflow looks like this now:</p>\n\n<ol>\n<li>make sure i'm on the master branch by running <code>git checkout master</code></li>\n<li>run <code>sphinx-apidoc -F -P -o ..output_dir ..source_dir</code>, where output_dir is not the same as source_dir.</li>\n<li>run <code>make html</code>, making sure that _build/html is in a directory that isn't in either branch of my repo.</li>\n<li>run <code>git checkout gh-pages</code> to switch to my gh-pages branch, removing code files and replacing them with html documentation pages.</li>\n<li>copy all newly generated HTML files in _build/html to the gh-pages main folder, overwriting any changes.</li>\n<li>run <code>git commit -am \"Docs Update\" gh-pages</code> to commit the changes</li>\n<li>run <code>git push origin gh-pages</code> to push the commit to github</li>\n<li>run <code>git checkout master</code> to put me back on the master branch</li>\n</ol>\n\n<p>I know there's a dime a dozen tutorials out there documenting this, but I hope this small elaboration might help someone at some point.</p>\n"}], "owner": {"reputation": 492, "user_id": 5457552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/21ad7986d0024996dba12115b488f588?s=128&d=identicon&r=PG&f=1", "display_name": "MaVCArt", "link": "https://stackoverflow.com/users/5457552/mavcart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5341, "favorite_count": 1, "accepted_answer_id": 38947318, "answer_count": 1, "score": 6, "last_activity_date": 1591441387, "creation_date": 1470871687, "last_edit_date": 1591441387, "question_id": 38885106, "link": "https://stackoverflow.com/questions/38885106/sphinx-apidoc-picks-up-submodules-but-autodoc-doesnt-document-them", "title": "sphinx-apidoc picks up submodules, but autodoc doesn&#39;t document them", "body": "<p>I've been working on a project for PyQt5 ( found here: <a href=\"https://github.com/MaVCArt/StyledPyQt5\" rel=\"nofollow\">https://github.com/MaVCArt/StyledPyQt5</a> ) which uses a package structure to make imports a bit more logical. I've been relatively successful in documenting the code so far with Sphinx, at least up until I introduced the package structure. ( before, everything was in one folder )</p>\n\n<p>The following is the problem: when I run sphinx-apidoc, everything runs fine, no errors. What's more, autodoc picks up all my submodules just fine. This is the content of one of my .rst files:</p>\n\n<pre><code>styledpyqt package\n==================\n\nSubpackages\n-----------\n\n.. toctree::\n    :maxdepth: 8\n\n    styledpyqt.core\n\nSubmodules\n----------\n\nstyledpyqt.StyleOptions module\n------------------------------\n\n.. automodule:: styledpyqt.StyleOptions\n    :members:\n    :undoc-members:\n    :show-inheritance:\n\nstyledpyqt.StyleSheet module\n----------------------------\n\n.. automodule:: styledpyqt.StyleSheet\n    :members:\n    :undoc-members:\n    :show-inheritance:\n\n\nModule contents\n---------------\n\n.. automodule:: styledpyqt\n    :members:\n    :undoc-members:\n    :show-inheritance:\n</code></pre>\n\n<p>As you can tell, all submodules are being picked up.</p>\n\n<p>However, when I run make html on this, none of these modules are being <em>documented</em> ( meaning the headers are there, but none of the methods, classes or members are displayed ). In the generated HTML, they're just headers with nothing underneath. I know for a fact that they're properly set up in the code comments, as the code has not changed between now and the set up of the package structure, aka when the documentation did work.</p>\n\n<p>Does anyone have any ideas what the cause of this might be?</p>\n\n<p>Note: to help with resolving this, here's a short breakdown of my folder structure:</p>\n\n<pre><code>styledpyqt\n+    core\n+    +    base\n+    +    +    __init__.py ( containing a class definition )\n+    +    +    AnimationGroups.py\n+    +    +    Animations.py\n+    +    __init__.py\n+    +    Color.py\n+    +    Float.py\n+    +    Gradient.py\n+    +    Int.py\n+    +    String.py\n+    __init__.py\n+    StyleOptions.py\n+    StyleSheet.py\n</code></pre>\n"}, {"tags": ["python", "scipy", "least-squares"], "comments": [{"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 4, "creation_date": 1470881664, "post_id": 38885081, "comment_id": 65132998, "body": "<code>least_squares</code> was added in version 0.17.0 of scipy.  What version do you have?  You can check by running <code>import scipy; print(scipy.__version__)</code>"}, {"owner": {"reputation": 3575, "user_id": 5131031, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/66334632734c0f2ba4fd6b39f93727f7?s=128&d=identicon&r=PG", "display_name": "PiccolMan", "link": "https://stackoverflow.com/users/5131031/piccolman"}, "reply_to_user": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1470950334, "post_id": 38885081, "comment_id": 65171060, "body": "Thank you, this fixed the problem!"}], "owner": {"reputation": 3575, "user_id": 5131031, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/66334632734c0f2ba4fd6b39f93727f7?s=128&d=identicon&r=PG", "display_name": "PiccolMan", "link": "https://stackoverflow.com/users/5131031/piccolman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1541, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1470871482, "creation_date": 1470871482, "question_id": 38885081, "link": "https://stackoverflow.com/questions/38885081/scipy-least-squares-function-not-found", "title": "scipy least_squares function not found", "body": "<p>I've been following this guide <a href=\"http://docs.scipy.org/doc/scipy/reference/tutorial/optimize.html#example-of-solving-a-fitting-problem\" rel=\"nofollow\">http://docs.scipy.org/doc/scipy/reference/tutorial/optimize.html#example-of-solving-a-fitting-problem</a> to do a least squares fit on my data, but I am unable to import the function least_squares.  I am using windows, and have anaconda <a href=\"https://www.continuum.io/downloads\" rel=\"nofollow\">https://www.continuum.io/downloads</a>.  I get the error ImportError: cannot import name 'least_squares' when trying to import the function by using the line \"from scipy.optimize import least_squares\". I would appreciate some help with this.  Thank you. </p>\n"}, {"tags": ["python", "sqlalchemy"], "comments": [{"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 2, "creation_date": 1470871898, "post_id": 38884984, "comment_id": 65130866, "body": "Could you add an MCVE? That sounds pretty odd behaviour and I&#39;m somewhat sure, that you have an erroneous comma in your assignment statement (hence the tuple)."}, {"owner": {"reputation": 10346, "user_id": 1376536, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2af309e9aabc7b86adf071ffa8799b42?s=128&d=identicon&r=PG", "display_name": "Foo L", "link": "https://stackoverflow.com/users/1376536/foo-l"}, "reply_to_user": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1470873919, "post_id": 38884984, "comment_id": 65131352, "body": "Whoa! Good call! You&#39;re right. Chalk it up to bad copy &amp; paste. Thanks!"}, {"owner": {"reputation": 10346, "user_id": 1376536, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2af309e9aabc7b86adf071ffa8799b42?s=128&d=identicon&r=PG", "display_name": "Foo L", "link": "https://stackoverflow.com/users/1376536/foo-l"}, "reply_to_user": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 1, "creation_date": 1470874598, "post_id": 38884984, "comment_id": 65131540, "body": "Arrrgh.. why is this a valid tuple? <code>a = 1,</code>"}, {"owner": {"reputation": 4294, "user_id": 2826421, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/digYw.png?s=128&g=1", "display_name": "MrLeeh", "link": "https://stackoverflow.com/users/2826421/mrleeh"}, "edited": false, "score": 2, "creation_date": 1534161766, "post_id": 38884984, "comment_id": 90597620, "body": "Thank you so much for asking this question. I came across the same issue and it was exactly the same reason: <code>injection.length_mm = dlg.length_mm,</code> wracks the whole thing. This should never be a Tuple but raise an exception instead...arghh"}, {"owner": {"reputation": 895, "user_id": 6748899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/384aa43fe825a1aa7d938002bcd22599?s=128&d=identicon&r=PG&f=1", "display_name": "gaw89", "link": "https://stackoverflow.com/users/6748899/gaw89"}, "reply_to_user": {"reputation": 4294, "user_id": 2826421, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/digYw.png?s=128&g=1", "display_name": "MrLeeh", "link": "https://stackoverflow.com/users/2826421/mrleeh"}, "edited": false, "score": 0, "creation_date": 1586195953, "post_id": 38884984, "comment_id": 108034208, "body": "I second @MrLeeh.  Thank you."}], "owner": {"reputation": 10346, "user_id": 1376536, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2af309e9aabc7b86adf071ffa8799b42?s=128&d=identicon&r=PG", "display_name": "Foo L", "link": "https://stackoverflow.com/users/1376536/foo-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 553, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1534316354, "creation_date": 1470870820, "last_edit_date": 1534316354, "question_id": 38884984, "link": "https://stackoverflow.com/questions/38884984/sqlalchemy-attribute-is-tuple-after-assignment", "title": "sqlalchemy attribute is tuple after assignment", "body": "<p>I'm using SQLAlchemy 1.0.12. When I have an instance of my model &amp; assign a new value to an attribute, I get a <code>tuple</code> instead of the value.</p>\n\n<pre><code>type(self.address1)\n&lt;class 'tuple'&gt;\n</code></pre>\n\n<p>This wreaks a bit of havoc when I try to use <code>marshmallow-sqlalchemy</code> 0.8.1 to do a <code>dump</code>:</p>\n\n<pre><code>SomeSchema().dump(self).data\n</code></pre>\n\n<p>The assigned basically doesn't show up in the dumped data because it doesn't know how to marshal a <code>tuple</code>. The only way to \"flatten\" the tuple/attributes is to do a <code>session.commit()</code> before doing a <code>dump()</code>.</p>\n\n<p>Is there a cleaner way? I have other instances to change/create before I want to do a <code>session.commit()</code>.</p>\n"}, {"tags": ["python", "swig"], "comments": [{"owner": {"reputation": 2133, "user_id": 5447208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f8eb976d91e3b7bb21366a68d1a70f?s=128&d=identicon&r=PG&f=1", "display_name": "Cody", "link": "https://stackoverflow.com/users/5447208/cody"}, "edited": false, "score": 0, "creation_date": 1470871266, "post_id": 38884979, "comment_id": 65130703, "body": "Renaming arbitrary header files to c files seems dangerous, given that convention usually leads to matching .c and .h file names.  Are you sure you can do that without deleting a bunch of code?"}, {"owner": {"reputation": 3868, "user_id": 2386026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b480a437c4c0af43ae3866177c79e142?s=128&d=identicon&r=PG&f=1", "display_name": "Jens Munk", "link": "https://stackoverflow.com/users/2386026/jens-munk"}, "edited": false, "score": 0, "creation_date": 1470895472, "post_id": 38884979, "comment_id": 65137077, "body": "Just include your original header. If there is any issues, remember SWIG cannot recurse headers so declarations must be in order. Also, export keywords and other stuff are not understood. This can be fixed by including `%include &quot;windows.s&quot; if on Windows."}], "answers": [{"tags": [], "owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "is_accepted": false, "score": 0, "last_activity_date": 1471805133, "creation_date": 1471805133, "answer_id": 39067693, "question_id": 38884979, "link": "https://stackoverflow.com/questions/38884979/parsing-a-header-file-using-swig/39067693#39067693", "title": "Parsing a header file using swig", "body": "<p>The global variables <code>a_a</code>, <code>a_b and</code>a_c<code>should be accessible from [within your SWIG Python module via</code>cvar`]<a href=\"http://www.swig.org/Doc1.3/Python.html#Python_nn16\" rel=\"nofollow\">1</a>:</p>\n\n<pre><code>import a\nprint a.cvar.a_a\nprint a.cvar.a_b\n# etc.\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user277465"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 364, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471805133, "creation_date": 1470870765, "question_id": 38884979, "link": "https://stackoverflow.com/questions/38884979/parsing-a-header-file-using-swig", "title": "Parsing a header file using swig", "body": "<p>I have a header file with struct definitions that I'd like to be able to parse in python. In order to do this I turned to Swig.</p>\n\n<p>Lets say the header file is named \"a.h\". I first renamed it to \"a.c\" and added an empty \"a.h\" file in the same folder.</p>\n\n<p>Next, I added in an \"a_wrap.i\" file with the following contents.</p>\n\n<pre><code>%module a\n%{\n    /* the resulting C file should be built as a python extension */\n    #define SWIG_FILE_WITH_INIT\n    /*  Includes the header in the wrapper code */\n    #include \"a.h\"\n%}\n/*  Parse the header file to generate wrappers */\n%include \"a.h\"\nextern struct a_a;\nextern struct a_b;\nextern struct a_c;\n</code></pre>\n\n<p>Next, I wrote a setup.py file as follows :</p>\n\n<pre><code>from distutils.core import setup, Extension\n\nsetup(ext_modules=[Extension(\"_a\",\n      sources=[\"a.c\", \"a_wrap.i\"])])\n</code></pre>\n\n<p>Next, I did the build as </p>\n\n<pre><code>python setup.py build_ext --inplace \n</code></pre>\n\n<p>I finally tried to import it in python</p>\n\n<pre><code>&gt;&gt;&gt; import a # it works, yaay\n&gt;&gt;&gt; dir(a)\n...\n...\n</code></pre>\n\n<p>I was hoping for a way to access the structs defined in \"a.c\"(originally a.h). However, I don't seem to be able to find a way to do that. How can I solve this? I'm looking for a way to access the struct's defined in the header file from python.</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 46016, "user_id": 2615075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f23ab144c48263fa1c4cf43ae46fb70d?s=128&d=identicon&r=PG", "display_name": "knbk", "link": "https://stackoverflow.com/users/2615075/knbk"}, "edited": false, "score": 1, "creation_date": 1470870463, "post_id": 38884887, "comment_id": 65130512, "body": "Please update your question with the full traceback."}, {"owner": {"reputation": 63, "user_id": 6591150, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4b3ef9e2703104aad37151433c80da33?s=128&d=identicon&r=PG&f=1", "display_name": "theCed7", "link": "https://stackoverflow.com/users/6591150/theced7"}, "reply_to_user": {"reputation": 46016, "user_id": 2615075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f23ab144c48263fa1c4cf43ae46fb70d?s=128&d=identicon&r=PG", "display_name": "knbk", "link": "https://stackoverflow.com/users/2615075/knbk"}, "edited": false, "score": 0, "creation_date": 1470871957, "post_id": 38884887, "comment_id": 65130877, "body": "@knbk Yes, ofcourse. I hope this helps."}], "answers": [{"tags": [], "owner": {"reputation": 69, "user_id": 6697265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6650e13ea9d187d1363776fcab1e94?s=128&d=identicon&r=PG&f=1", "display_name": "dinhnv", "link": "https://stackoverflow.com/users/6697265/dinhnv"}, "is_accepted": false, "score": 0, "last_activity_date": 1470871273, "creation_date": 1470871273, "answer_id": 38885049, "question_id": 38884887, "link": "https://stackoverflow.com/questions/38884887/django-access-request-user-in-class-based-view/38885049#38885049", "title": "Django access request.user in class based view", "body": "<p>Is the error occurred at template rendering? If so I wonder you've make iter over attributes on single <code>User</code> object. I think you may need <code>user.values()</code>.</p>\n\n<p>BTW, <code>check_user_editor</code> should be simpler:</p>\n\n<pre><code>def check_user_editor(user):\n    return user.groups.filter(name=\"editor\").exists()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 63, "user_id": 6591150, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4b3ef9e2703104aad37151433c80da33?s=128&d=identicon&r=PG&f=1", "display_name": "theCed7", "link": "https://stackoverflow.com/users/6591150/theced7"}, "edited": false, "score": 0, "creation_date": 1470874777, "post_id": 38885193, "comment_id": 65131572, "body": "Ah, bollocks! Turns out, what was added for debug purposes was actually causing a bug itself. I wanted to check whether <code>request.user</code> was even callable and forgot to string it. Good catch, thank you very much!"}], "tags": [], "owner": {"reputation": 46016, "user_id": 2615075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f23ab144c48263fa1c4cf43ae46fb70d?s=128&d=identicon&r=PG", "display_name": "knbk", "link": "https://stackoverflow.com/users/2615075/knbk"}, "is_accepted": true, "score": 0, "last_activity_date": 1470872317, "creation_date": 1470872317, "answer_id": 38885193, "question_id": 38884887, "link": "https://stackoverflow.com/questions/38884887/django-access-request-user-in-class-based-view/38885193#38885193", "title": "Django access request.user in class based view", "body": "<p>Your error is in line 74 in <code>mediwiki.views</code>:</p>\n\n<pre><code>view = HttpResponse(request.user)\n</code></pre>\n\n<p><code>HttpResponse</code> expects a string or an iterable. Since <code>request.user</code> is not a string, it tries to use it as an iterable, which fails.</p>\n\n<p>I can't say much without the actual code. If in fact you <em>want</em> to send just a string representation of the user as the response, you need to cast is to a string:</p>\n\n<pre><code>view = HttpResponse(str(request.user))\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 6591150, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4b3ef9e2703104aad37151433c80da33?s=128&d=identicon&r=PG&f=1", "display_name": "theCed7", "link": "https://stackoverflow.com/users/6591150/theced7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1093, "favorite_count": 0, "accepted_answer_id": 38885193, "answer_count": 2, "score": 0, "last_activity_date": 1470872317, "creation_date": 1470870060, "last_edit_date": 1470871868, "question_id": 38884887, "link": "https://stackoverflow.com/questions/38884887/django-access-request-user-in-class-based-view", "title": "Django access request.user in class based view", "body": "<p>I'm currently working on the following issue: The user can access the page <code>test.com/BlogPostTitle</code>. Where <code>BlogPostTitle</code> is a slug. If a Blog post with the fitting title exists, Django should render the DetailView of said blog post. If it doesn't exist, Django should render a form to create a blog post.</p>\n\n<p>This works so far: </p>\n\n<pre><code>class EntryDetail(DetailView): # Displays blog entry, if it exists\n    model = Blog\n    slug_field = 'title'\n    template_name = 'app/entry.html'    \n\nclass EntryForm(FormView): # Displays form, if entry 404s\n    template_name = 'app/create.html'\n    form_class = EntryForm\n    success_url = '/'\n\n    def form_valid(self, form):\n        form.save()\n        return super(EntryForm, self).form_valid(form)\n\nclass EntryDisplay(View):\n    def get(self, request, *args, **kwargs):\n        try:\n            view = EntryDetail.as_view()\n            return view(request, *args, **kwargs)\n        except Http404:\n            if check_user_editor(self.request.user) == True: # Fails here\n                view = EntryForm.as_view()\n                return view(request, *args, **kwargs)\n            else:\n                pass\n</code></pre>\n\n<p>Now, only users who are in the group \"editor\" should be able to see the form/create a post:</p>\n\n<pre><code>def check_user_editor(user):\n    if user:\n        return user.groups.filter(name=\"editor\").exists() # Returns true, if user in editor group\n    else:\n        return False\u22c5 \n</code></pre>\n\n<p>As you can see, I've implemented the function in the <code>EntryDisplay</code>, however, Django errors <code>'User' object is not iterable</code>.</p>\n\n<p>I'm guessing I've to work with <code>SingleObjectMixin</code>, but I haven't quite understood the docs on that. </p>\n\n<p>Any help would be much appreciated. </p>\n\n<p>Full traceback:</p>\n\n<p>Traceback:</p>\n\n<pre><code>File \"/home/django/local/lib/python3.4/site-packages/django/views/generic/detail.py\" in get_object\n  53.             obj = queryset.get()\n\nFile \"/home/django/local/lib/python3.4/site-packages/django/db/models/query.py\" in get\n  385.                 self.model._meta.object_name\n\nDuring handling of the above exception (Blog matching query does not exist.), another exception occurred:\n\nFile \"/home/django/mediwiki/mediwiki/views.py\" in get\n  68.             return view(request, *args, **kwargs)\n\nFile \"/home/django/local/lib/python3.4/site-packages/django/views/generic/base.py\" in view\n  68.             return self.dispatch(request, *args, **kwargs)\n\nFile \"/home/django/local/lib/python3.4/site-packages/django/views/generic/base.py\" in dispatch\n  88.         return handler(request, *args, **kwargs)\n\nFile \"/home/django/local/lib/python3.4/site-packages/django/views/generic/detail.py\" in get\n  115.         self.object = self.get_object()\n\nFile \"/home/django/local/lib/python3.4/site-packages/django/views/generic/detail.py\" in get_object\n  56.                           {'verbose_name': queryset.model._meta.verbose_name})\n\nDuring handling of the above exception (No blog found matching the query), another exception occurred:\n\nFile \"/home/django/local/lib/python3.4/site-packages/django/core/handlers/exception.py\" in inner\n  39.             response = get_response(request)\n\nFile \"/home/django/local/lib/python3.4/site-packages/django/core/handlers/base.py\" in _legacy_get_response\n  249.             response = self._get_response(request)\n\nFile \"/home/django/local/lib/python3.4/site-packages/django/core/handlers/base.py\" in _get_response\n  187.                 response = self.process_exception_by_middleware(e, request)\n\nFile \"/home/django/local/lib/python3.4/site-packages/django/core/handlers/base.py\" in _get_response\n  185.                 response = wrapped_callback(request, *callback_args, **callback_kwargs)\n\nFile \"/home/django/local/lib/python3.4/site-packages/django/views/generic/base.py\" in view\n  68.             return self.dispatch(request, *args, **kwargs)\n\nFile \"/home/django/local/lib/python3.4/site-packages/django/views/generic/base.py\" in dispatch\n  88.         return handler(request, *args, **kwargs)\n\nFile \"/home/django/mediwiki/mediwiki/views.py\" in get\n  74.                 view = HttpResponse(request.user)\n\nFile \"/home/django/local/lib/python3.4/site-packages/django/http/response.py\" in __init__\n  293.         self.content = content\n\nFile \"/home/django/local/lib/python3.4/site-packages/django/http/response.py\" in content\n  319.             content = b''.join(self.make_bytes(chunk) for chunk in value)\n\nFile \"/home/django/local/lib/python3.4/site-packages/django/utils/functional.py\" in inner\n  235.         return func(self._wrapped, *args)\n\nException Type: TypeError at /test\nException Value: 'User' object is not iterable\n</code></pre>\n"}, {"tags": ["python", "json", "apache-spark", "merge", "pyspark"], "comments": [{"owner": {"reputation": 4028, "user_id": 631199, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8d14e043d3c1f08e23d0a6fbbed1be3e?s=128&d=identicon&r=PG", "display_name": "Brian Bruggeman", "link": "https://stackoverflow.com/users/631199/brian-bruggeman"}, "reply_to_user": {"reputation": 280325, "user_id": 1560062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c5027e3046fed86e8e34b4fa0e6246c?s=128&d=identicon&r=PG", "display_name": "zero323", "link": "https://stackoverflow.com/users/1560062/zero323"}, "edited": false, "score": 0, "creation_date": 1470876151, "post_id": 38884857, "comment_id": 65131864, "body": "Thanks for the response; Is a join the only mechanism?   When does it make sense to use something else?  I&#39;m completely new to spark.  Data frame might not even be the right term to use..."}, {"owner": {"reputation": 280325, "user_id": 1560062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c5027e3046fed86e8e34b4fa0e6246c?s=128&d=identicon&r=PG", "display_name": "zero323", "link": "https://stackoverflow.com/users/1560062/zero323"}, "edited": false, "score": 0, "creation_date": 1470879577, "post_id": 38884857, "comment_id": 65132549, "body": "Maybe not. So you want something like <code>*ByKey</code> operation with name being a key?"}, {"owner": {"reputation": 4028, "user_id": 631199, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8d14e043d3c1f08e23d0a6fbbed1be3e?s=128&d=identicon&r=PG", "display_name": "Brian Bruggeman", "link": "https://stackoverflow.com/users/631199/brian-bruggeman"}, "reply_to_user": {"reputation": 280325, "user_id": 1560062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c5027e3046fed86e8e34b4fa0e6246c?s=128&d=identicon&r=PG", "display_name": "zero323", "link": "https://stackoverflow.com/users/1560062/zero323"}, "edited": false, "score": 0, "creation_date": 1470880009, "post_id": 38884857, "comment_id": 65132634, "body": "That&#39;s what I suspect.  I had been looking at combineByKey and groupByKey, but I wasn&#39;t clear how they fit with the code above."}], "answers": [{"comments": [{"owner": {"reputation": 4028, "user_id": 631199, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8d14e043d3c1f08e23d0a6fbbed1be3e?s=128&d=identicon&r=PG", "display_name": "Brian Bruggeman", "link": "https://stackoverflow.com/users/631199/brian-bruggeman"}, "edited": false, "score": 0, "creation_date": 1470880689, "post_id": 38886011, "comment_id": 65132788, "body": "Is there any way to leverage a python function for reusability?"}, {"owner": {"reputation": 4028, "user_id": 631199, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8d14e043d3c1f08e23d0a6fbbed1be3e?s=128&d=identicon&r=PG", "display_name": "Brian Bruggeman", "link": "https://stackoverflow.com/users/631199/brian-bruggeman"}, "edited": false, "score": 0, "creation_date": 1470884855, "post_id": 38886011, "comment_id": 65133719, "body": "Actually, I can do that part.  I&#39;m giving you the thumbs up on the answer because I think you actually answered it."}], "tags": [], "owner": {"reputation": 29554, "user_id": 839957, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3ac5824c6cc4817a754a186d6a45a08b?s=128&d=identicon&r=PG", "display_name": "maxymoo", "link": "https://stackoverflow.com/users/839957/maxymoo"}, "is_accepted": true, "score": 1, "last_activity_date": 1470879622, "creation_date": 1470879622, "answer_id": 38886011, "question_id": 38884857, "link": "https://stackoverflow.com/questions/38884857/how-to-merge-multiple-json-data-rows-based-on-a-field-in-pyspark-with-a-given-re/38886011#38886011", "title": "How to merge multiple JSON data rows based on a field in pyspark with a given reduce function", "body": "<p>I think it would be something like this:</p>\n\n<pre><code>sc.parallelize(data).groupBy(lambda x: x['name']).map(lambda t: {'name':t[0],'addresses':[(x['timestamp'], x['address']) for x in t[1]]}).collect()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4028, "user_id": 631199, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8d14e043d3c1f08e23d0a6fbbed1be3e?s=128&d=identicon&r=PG", "display_name": "Brian Bruggeman", "link": "https://stackoverflow.com/users/631199/brian-bruggeman"}, "is_accepted": false, "score": 0, "last_activity_date": 1470884910, "creation_date": 1470884910, "answer_id": 38886629, "question_id": 38884857, "link": "https://stackoverflow.com/questions/38884857/how-to-merge-multiple-json-data-rows-based-on-a-field-in-pyspark-with-a-given-re/38886629#38886629", "title": "How to merge multiple JSON data rows based on a field in pyspark with a given reduce function", "body": "<p>All right, using maxymoo's example, I put together my own reusable code.  It's not exactly what I was looking for, but it gets me closer to how I want to solve this particular problem:  without lambdas and with reusable code.</p>\n\n<pre><code>#!/usr/bin/env pyspark\n# -*- coding: utf-8 -*-\ndata = [\n    {'timestamp': '20080411204445', 'address': '100 Sunder Ct', 'name': 'Joe Schmoe'},\n    {'timestamp': '20040218165319', 'address': '100 Lee Ave', 'name': 'Joe Schmoe'},\n    {'timestamp': '20120309173318', 'address': '1818 Westminster', 'name': 'John Doe'},\n]\n\n\ndef combine(field):\n    '''Returns a function which reduces on a specific field\n\n    Args:\n        field(str): data field to use for merging\n\n    Returns:\n        func: returns a function which supplies the data for the field\n    '''\n\n    def _reduce_this(data):\n        '''Returns the field value using data'''\n        return data[field]\n\n    return _reduce_this\n\n\ndef aggregate(*fields):\n    '''Merges data based on a list of fields\n\n    Args:\n        fields(list): a list of fields that should be used as a composite key\n\n    Returns:\n       func: a function which does the aggregation\n    '''\n\n    def _merge_this(iterable):\n        name, iterable = iterable\n        new_map = dict(name=name, window=dict(max=None, min=None))\n        for data in iterable:\n            for field, value in data.iteritems():\n                if field in fields:\n                    new_map[field] = value\n                else:\n                    new_map.setdefault(field, set()).add(value)\n        return new_map\n\n    return _merge_this\n\n# sc provided by pyspark context\ncombined = sc.parallelize(data).groupBy(combine('name'))\nreduced = combined.map(aggregate('name'))\noutput = reduced.collect()\n</code></pre>\n"}], "owner": {"reputation": 4028, "user_id": 631199, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8d14e043d3c1f08e23d0a6fbbed1be3e?s=128&d=identicon&r=PG", "display_name": "Brian Bruggeman", "link": "https://stackoverflow.com/users/631199/brian-bruggeman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 930, "favorite_count": 0, "accepted_answer_id": 38886011, "answer_count": 2, "score": 1, "last_activity_date": 1470884910, "creation_date": 1470869810, "last_edit_date": 1470876701, "question_id": 38884857, "link": "https://stackoverflow.com/questions/38884857/how-to-merge-multiple-json-data-rows-based-on-a-field-in-pyspark-with-a-given-re", "title": "How to merge multiple JSON data rows based on a field in pyspark with a given reduce function", "body": "<p>How do I merge the JSON data rows as shown below using the merge function below with pyspark?  </p>\n\n<p>Note:  Assume this is just a minutia example and I have 1000s of rows of data to merge.  What is the most performant solution?  For better or for worse, I must use pyspark.</p>\n\n<p>Input:</p>\n\n<pre><code>data = [\n    {'timestamp': '20080411204445', 'address': '100 Sunder Ct', 'name': 'Joe Schmoe'},\n    {'timestamp': '20040218165319', 'address': '100 Lee Ave', 'name': 'Joe Schmoe'},\n    {'timestamp': '20120309173318', 'address': '1818 Westminster', 'name': 'John Doe'},\n    ...  More ...\n]\n</code></pre>\n\n<p>Desired Output:</p>\n\n<pre><code>combined_result = [\n    {'name': 'Joe Schmoe': {'addresses': [('20080411204445', '100 Sunder Ct'), ('20040218165319', '100 Lee Ave')]}},\n    {'name': 'John Doe': {'addresses': [('20120309173318', '1818 Westminster')]}},\n    ... More ...\n]\n</code></pre>\n\n<p>Merge function:</p>\n\n<pre><code>def reduce_on_name(a, b):\n    '''Combines two JSON data rows based on name'''\n    merged = {}\n    if a['name'] == b['name']:\n        addresses = (a['timestamp'], a['address']), (b['timestamp'], b['address'])\n        merged['name'] = a['name']\n        merged['addresses'] = addresses\n    return merged\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 1525, "user_id": 6664393, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe985e0b1cf77b72acb4e0058029acda?s=128&d=identicon&r=PG&f=1", "display_name": "user357269", "link": "https://stackoverflow.com/users/6664393/user357269"}, "edited": false, "score": 0, "creation_date": 1470869582, "post_id": 38884807, "comment_id": 65130281, "body": "<a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.shift.html\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/stable/generated/&hellip;</a>"}, {"owner": {"reputation": 1525, "user_id": 6664393, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe985e0b1cf77b72acb4e0058029acda?s=128&d=identicon&r=PG&f=1", "display_name": "user357269", "link": "https://stackoverflow.com/users/6664393/user357269"}, "edited": false, "score": 0, "creation_date": 1470869686, "post_id": 38884807, "comment_id": 65130313, "body": "This would also work <a href=\"http://stackoverflow.com/a/32207339/6664393\">stackoverflow.com/a/32207339/6664393</a>"}, {"owner": {"reputation": 19255, "user_id": 428862, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7041b76f657ac8e8d32a72f1b8b5b4bb?s=128&d=identicon&r=PG", "display_name": "Merlin", "link": "https://stackoverflow.com/users/428862/merlin"}, "edited": false, "score": 0, "creation_date": 1470870552, "post_id": 38884807, "comment_id": 65130526, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/20048200/averaging-every-five-minutes-data-as-one-datapoint-in-pandas-dataframe\">averaging every five minutes data as one datapoint in pandas dataframe</a>"}], "answers": [{"comments": [{"owner": {"reputation": 279, "user_id": 6535843, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/123618b58d141fcb4995ac51e6d08f4e?s=128&d=identicon&r=PG&f=1", "display_name": "Cofeinnie Bonda", "link": "https://stackoverflow.com/users/6535843/cofeinnie-bonda"}, "edited": false, "score": 0, "creation_date": 1470874713, "post_id": 38884926, "comment_id": 65131561, "body": "Thanks. But what&#39;s calculated here is: log(09:34:00 Close/09:31:00 Close), log(09:39:00 Close/09:35:00 Close),..., log(16:00:00 Close/15:56:00 Close). However, what I want is log(09:35:00 Close/09:31:00 Open), log(09:40:00 Close/09:35:00 Close),...,log(15:55:00 Close/15:50:00 Close), log(16:00:00 Close/15:55:00 Close). Is there a way to do this?"}, {"owner": {"reputation": 19255, "user_id": 428862, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7041b76f657ac8e8d32a72f1b8b5b4bb?s=128&d=identicon&r=PG", "display_name": "Merlin", "link": "https://stackoverflow.com/users/428862/merlin"}, "reply_to_user": {"reputation": 279, "user_id": 6535843, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/123618b58d141fcb4995ac51e6d08f4e?s=128&d=identicon&r=PG&f=1", "display_name": "Cofeinnie Bonda", "link": "https://stackoverflow.com/users/6535843/cofeinnie-bonda"}, "edited": false, "score": 0, "creation_date": 1470877826, "post_id": 38884926, "comment_id": 65132171, "body": "@CofeinnieBonda, if you going to use pandas, you need to take a tutorial on pandas. What you are asking in easily done with pandas, but you need to explore how to do it.  Otherwise,  you will most of the answers on SO un-achievable."}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 0, "last_activity_date": 1470870327, "creation_date": 1470870327, "answer_id": 38884926, "question_id": 38884807, "link": "https://stackoverflow.com/questions/38884807/calculate-every-5-minute-returns-using-1-minute-data-in-pandas-dataframe/38884926#38884926", "title": "Calculate every 5 minute returns using 1 minute data in pandas dataframe", "body": "<p>User <code>pd.TimeGrouper('5T')</code></p>\n\n<pre><code>df = df.set_index(df.Date + (df.Time - pd.to_datetime(df.Time.dt.date)))\n\ncols = ['Open', 'High', 'Low', 'Close']\nagg = np.log(df[cols]).groupby(pd.TimeGrouper('5T')).agg(['first', 'last'])\nagg.stack(0).T.diff().dropna().squeeze().unstack()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/BSrfa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BSrfa.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 279, "user_id": 6535843, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/123618b58d141fcb4995ac51e6d08f4e?s=128&d=identicon&r=PG&f=1", "display_name": "Cofeinnie Bonda", "link": "https://stackoverflow.com/users/6535843/cofeinnie-bonda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1572, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1470872827, "creation_date": 1470869480, "last_edit_date": 1470872827, "question_id": 38884807, "link": "https://stackoverflow.com/questions/38884807/calculate-every-5-minute-returns-using-1-minute-data-in-pandas-dataframe", "title": "Calculate every 5 minute returns using 1 minute data in pandas dataframe", "body": "<p>I have 1 minute price data as Python pandas dataframe like this:</p>\n\n<pre><code>          Date                Time      Open      High       Low     Close  \n390 2004-04-13 1900-01-01 09:31:00  1146.210  1147.020  1146.210  1147.020   \n391 2004-04-13 1900-01-01 09:32:00  1147.120  1147.339  1147.120  1147.219   \n392 2004-04-13 1900-01-01 09:33:00  1147.100  1147.630  1147.100  1147.630   \n393 2004-04-13 1900-01-01 09:34:00  1147.700  1147.700  1147.439  1147.469   \n394 2004-04-13 1900-01-01 09:35:00  1147.560  1147.730  1147.560  1147.680   \n395 2004-04-13 1900-01-01 09:36:00  1147.700  1147.700  1147.640  1147.640   \n396 2004-04-13 1900-01-01 09:37:00  1147.810  1147.810  1147.430  1147.430   \n397 2004-04-13 1900-01-01 09:38:00  1147.310  1147.310  1147.110  1147.110   \n398 2004-04-13 1900-01-01 09:39:00  1147.050  1147.050  1146.870  1146.870   \n399 2004-04-13 1900-01-01 09:40:00  1146.860  1147.120  1146.860  1147.110   \n400 2004-04-13 1900-01-01 09:41:00  1147.020  1147.170  1147.000  1147.170   \n401 2004-04-13 1900-01-01 09:42:00  1147.219  1147.250  1147.150  1147.210   \n402 2004-04-13 1900-01-01 09:43:00  1147.210  1147.210  1146.969  1146.969   \n403 2004-04-13 1900-01-01 09:44:00  1146.850  1146.850  1146.510  1146.510   \n404 2004-04-13 1900-01-01 09:45:00  1146.390  1146.510  1146.280  1146.510   \n405 2004-04-13 1900-01-01 09:46:00  1146.110  1146.110  1144.819  1144.819   \n406 2004-04-13 1900-01-01 09:47:00  1144.439  1144.439  1144.060  1144.060   \n407 2004-04-13 1900-01-01 09:48:00  1144.200  1144.350  1144.120  1144.120   \n408 2004-04-13 1900-01-01 09:49:00  1143.890  1143.930  1143.890  1143.930   \n409 2004-04-13 1900-01-01 09:50:00  1143.910  1144.010  1143.770  1144.010   \n410 2004-04-13 1900-01-01 09:51:00  1144.210  1144.360  1144.210  1144.360   \n411 2004-04-13 1900-01-01 09:52:00  1144.490  1144.850  1144.490  1144.850   \n412 2004-04-13 1900-01-01 09:53:00  1145.110  1145.219  1144.910  1144.910   \n413 2004-04-13 1900-01-01 09:54:00  1144.930  1144.969  1144.930  1144.960   \n414 2004-04-13 1900-01-01 09:55:00  1144.920  1144.920  1144.770  1144.770   \n415 2004-04-13 1900-01-01 09:56:00  1144.830  1144.939  1144.800  1144.800 \n</code></pre>\n\n<p>I want to calculate the 5-minute returns, that is, log(09:35:00 Close/<strong>09:31:00 Open</strong>), log(09:40:00 Close/09:35:00 Close),...,log(15:55:00 Close/15:50:00 Close), log(16:00:00 Close/15:55:00 Close). </p>\n\n<p>And then I want to take the sum of quartic returns. How can I do this? Thanks.</p>\n\n<p>If I use datafame.shift(5) and then calculate the returns what I obtain is the rolling 5 minute returns, which is not exactly what I want.</p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"tags": [], "owner": {"reputation": 1525, "user_id": 6664393, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe985e0b1cf77b72acb4e0058029acda?s=128&d=identicon&r=PG&f=1", "display_name": "user357269", "link": "https://stackoverflow.com/users/6664393/user357269"}, "is_accepted": false, "score": 1, "last_activity_date": 1470869051, "last_edit_date": 1495540846, "creation_date": 1470869051, "answer_id": 38884746, "question_id": 38884715, "link": "https://stackoverflow.com/questions/38884715/replace-each-letter-in-a-last-name-by-the-consecutive-letter-in-the-alphabet/38884746#38884746", "title": "Replace each letter in a last name by the consecutive letter in the alphabet", "body": "<p>This is called <a href=\"https://en.wikipedia.org/wiki/Caesar_cipher\" rel=\"nofollow noreferrer\">Caesar's cipher</a>.</p>\n\n<p>Take a look at how it's done here: <a href=\"https://stackoverflow.com/a/8895517/6664393\">https://stackoverflow.com/a/8895517/6664393</a></p>\n\n<p>You'll have change it a little to allow uppercase characters as well:</p>\n\n<pre><code>def caesar(plaintext, shift):\n    alphabet_lower = string.ascii_lowercase\n    alphabet_upper = string.ascii_uppercase\n    alphabet = alphabet_lower + alphabet_upper\n    shifted_alphabet_lower = alphabet_lower[shift:] + alphabet_lower[:shift]\n    shifted_alphabet_upper = alphabet_upper[shift:] + alphabet_upper[:shift]\n    shifted_alphabet = shifted_alphabet_lower + shifted_alphabet_upper\n    table = string.maketrans(alphabet, shifted_alphabet)\nreturn plaintext.translate(table)\n</code></pre>\n\n<p>use <code>shift = 1</code> to shift by one.</p>\n"}, {"comments": [{"owner": {"reputation": 1525, "user_id": 6664393, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe985e0b1cf77b72acb4e0058029acda?s=128&d=identicon&r=PG&f=1", "display_name": "user357269", "link": "https://stackoverflow.com/users/6664393/user357269"}, "edited": false, "score": 0, "creation_date": 1470869311, "post_id": 38884767, "comment_id": 65130204, "body": "Does this do z to a?"}, {"owner": {"reputation": 27634, "user_id": 1576602, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4d5132c0e702c0b50cac6aa7c56d191f?s=128&d=identicon&r=PG", "display_name": "Andrzej Pronobis", "link": "https://stackoverflow.com/users/1576602/andrzej-pronobis"}, "reply_to_user": {"reputation": 1525, "user_id": 6664393, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe985e0b1cf77b72acb4e0058029acda?s=128&d=identicon&r=PG&f=1", "display_name": "user357269", "link": "https://stackoverflow.com/users/6664393/user357269"}, "edited": false, "score": 0, "creation_date": 1470869747, "post_id": 38884767, "comment_id": 65130327, "body": "No, but this should, for lower and upper case."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1470933843, "post_id": 38884767, "comment_id": 65162602, "body": "Although this code may help to solve the problem, it doesn&#39;t explain <i>why</i> and/or <i>how</i> it answers the question. Providing this additional context  would significantly improve its long-term value. Please <a href=\"https://stackoverflow.com/posts/38884767/edit\">edit</a> your answer to add explanation, including what limitations and assumptions apply."}, {"owner": {"reputation": 35, "user_id": 6598858, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f26701cd8ecdb244187d2119eaa27ab8?s=128&d=identicon&r=PG&f=1", "display_name": "scorpionz", "link": "https://stackoverflow.com/users/6598858/scorpionz"}, "edited": false, "score": 0, "creation_date": 1471676652, "post_id": 38884767, "comment_id": 65452117, "body": "@ And - Your explanation is really helpful. Thank You So Much! I really appreciate all your help."}], "tags": [], "owner": {"reputation": 27634, "user_id": 1576602, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4d5132c0e702c0b50cac6aa7c56d191f?s=128&d=identicon&r=PG", "display_name": "Andrzej Pronobis", "link": "https://stackoverflow.com/users/1576602/andrzej-pronobis"}, "is_accepted": true, "score": 0, "last_activity_date": 1470937247, "last_edit_date": 1470937247, "creation_date": 1470869231, "answer_id": 38884767, "question_id": 38884715, "link": "https://stackoverflow.com/questions/38884715/replace-each-letter-in-a-last-name-by-the-consecutive-letter-in-the-alphabet/38884767#38884767", "title": "Replace each letter in a last name by the consecutive letter in the alphabet", "body": "<p>The problem as defined in your question can be solved as follows:</p>\n\n<pre><code>parts = name.split()\nparts[1]=''.join([chr((ord(c) - 65 + 1) % 26 + 65)\n                  if ord(c) &lt; 91 else\n                  chr((ord(c) - 97 + 1) % 26 + 97)\n                  for c in parts[1]])\n' '.join(parts)\n</code></pre>\n\n<p>Here, I define the last name as the second word of the string, this of course is a strong assumption, but improving on this is not the main problem in the question.</p>\n\n<p>Shifting the characters is done inside a list comprehension, where each character is processed separately, and first converted to its ASCII code using <code>ord</code>. The ASCII codes of upper case letters are 65-90 (<code>A</code>-<code>Z</code>), and the ASCII codes of lowercase letters are 97-122 (<code>a</code>-<code>z</code>). Therefore, a condition <code>ord(c) &lt; 91</code> is used to separate the cases. Then, in each case, the ASCII code is converted to a value in the range 0-25, shifted (in the example, incremented by 1), and modulo operation <code>% 26</code> is used to convert shifted <code>z</code> back into <code>a</code>. The resulting value is then converted back to the proper range for the letter ASCII codes.</p>\n"}], "owner": {"reputation": 35, "user_id": 6598858, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f26701cd8ecdb244187d2119eaa27ab8?s=128&d=identicon&r=PG&f=1", "display_name": "scorpionz", "link": "https://stackoverflow.com/users/6598858/scorpionz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 299, "favorite_count": 0, "accepted_answer_id": 38884767, "answer_count": 2, "score": -3, "last_activity_date": 1471905008, "creation_date": 1470868869, "last_edit_date": 1471905008, "question_id": 38884715, "link": "https://stackoverflow.com/questions/38884715/replace-each-letter-in-a-last-name-by-the-consecutive-letter-in-the-alphabet", "title": "Replace each letter in a last name by the consecutive letter in the alphabet", "body": "<p>How to replace each letter in a last name by the consecutive letter in the alphabet? I need this script as a masking tool.</p>\n\n<p>Logic for last name: (a change to b, b change to c, ...., z change to a)</p>\n\n<p>Example: John Doe will become John Epf</p>\n\n<p>Input File: <code>names.txt</code></p>\n\n<pre><code>John yi\nkary Strong\nJoe Piazza\nSo  man\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 3427, "user_id": 1425140, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/abc53330574145dcfc1e9e910ca5a6bf?s=128&d=identicon&r=PG", "display_name": "Xander Luciano", "link": "https://stackoverflow.com/users/1425140/xander-luciano"}, "reply_to_user": {"reputation": 1525, "user_id": 6664393, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe985e0b1cf77b72acb4e0058029acda?s=128&d=identicon&r=PG&f=1", "display_name": "user357269", "link": "https://stackoverflow.com/users/6664393/user357269"}, "edited": false, "score": 0, "creation_date": 1470868957, "post_id": 38884686, "comment_id": 65130093, "body": "@user357269 where do you see the infinite loop?"}, {"owner": {"reputation": 107, "user_id": 6664623, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/95cf885fc3496390a823ba67e2d1018a?s=128&d=identicon&r=PG&f=1", "display_name": "Chase Garfield", "link": "https://stackoverflow.com/users/6664623/chase-garfield"}, "edited": false, "score": 0, "creation_date": 1470869076, "post_id": 38884686, "comment_id": 65130134, "body": "It doesn&#39;t make an infinite loop, the problem is that I need a suggestion on where to move my loops, because after I enter &quot;x&quot; number of file names, the while loop ends, but the program doesn&#39;t have a file_name to grab for the rest of the program."}, {"owner": {"reputation": 3427, "user_id": 1425140, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/abc53330574145dcfc1e9e910ca5a6bf?s=128&d=identicon&r=PG", "display_name": "Xander Luciano", "link": "https://stackoverflow.com/users/1425140/xander-luciano"}, "edited": false, "score": 0, "creation_date": 1470869194, "post_id": 38884686, "comment_id": 65130170, "body": "@ChaseGarfield I&#39;ll try to get you started on the right track. Give me a few to type up some pseduo code."}, {"owner": {"reputation": 2234, "user_id": 2757226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VwnbH.jpg?s=128&g=1", "display_name": "chapelo", "link": "https://stackoverflow.com/users/2757226/chapelo"}, "edited": false, "score": 0, "creation_date": 1470869542, "post_id": 38884686, "comment_id": 65130275, "body": "Use <code>argparse</code> instead of your endless <code>input</code>"}, {"owner": {"reputation": 2234, "user_id": 2757226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VwnbH.jpg?s=128&g=1", "display_name": "chapelo", "link": "https://stackoverflow.com/users/2757226/chapelo"}, "edited": false, "score": 0, "creation_date": 1470869577, "post_id": 38884686, "comment_id": 65130280, "body": "indentation is indeed off"}], "answers": [{"comments": [{"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 2, "creation_date": 1470869472, "post_id": 38884788, "comment_id": 65130252, "body": "<code>for name in iter(lambda:input(prompt).strip(),&#39;&#39;):</code> ... but thats really probably too advanced"}, {"owner": {"reputation": 789, "user_id": 6441345, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f6281029cf43a71fa044b0ee3adbfe43?s=128&d=identicon&r=PG&f=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/6441345/marco"}, "reply_to_user": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 1, "creation_date": 1470869659, "post_id": 38884788, "comment_id": 65130309, "body": "@JoranBeasley I agree, Python is a beautiful language but it takes time to learn all the features"}, {"owner": {"reputation": 107, "user_id": 6664623, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/95cf885fc3496390a823ba67e2d1018a?s=128&d=identicon&r=PG&f=1", "display_name": "Chase Garfield", "link": "https://stackoverflow.com/users/6664623/chase-garfield"}, "edited": false, "score": 1, "creation_date": 1470869780, "post_id": 38884788, "comment_id": 65130337, "body": "Yeah, as a recent python learner, I&#39;m discovering this all too often."}, {"owner": {"reputation": 789, "user_id": 6441345, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f6281029cf43a71fa044b0ee3adbfe43?s=128&d=identicon&r=PG&f=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/6441345/marco"}, "edited": false, "score": 0, "creation_date": 1470869937, "post_id": 38884788, "comment_id": 65130382, "body": "Most of these features come from functional programming, which can change the way we code in the future"}], "tags": [], "owner": {"reputation": 789, "user_id": 6441345, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f6281029cf43a71fa044b0ee3adbfe43?s=128&d=identicon&r=PG&f=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/6441345/marco"}, "is_accepted": false, "score": 1, "last_activity_date": 1470869358, "creation_date": 1470869358, "answer_id": 38884788, "question_id": 38884686, "link": "https://stackoverflow.com/questions/38884686/writing-multiple-files-into-one-file-using-python-while-taking-input-from-the-u/38884788#38884788", "title": "Writing multiple files into one file using Python, while taking input from the user to choose the files to scan", "body": "<p>You can keep the <code>output.txt</code> open from the beginning of the execution and open each file after the user input its name.</p>\n\n<p>Example (not tested):\n</p>\n\n<pre><code>with open(\"output.txt\",\"w\") as output:\n\n    while True:\n        input_name = input('Part Name: ').strip()\n\n        if input_name == '':\n            break\n\n        with open(\"/pathway/%s.txt\" %input_name ,\"r\") as read_data:\n\n            if part_name != \"\":\n                output.write(read_data.read())\n</code></pre>\n\n<p>Remember that you don't need to close the file if you open it in <code>with</code></p>\n"}, {"comments": [{"owner": {"reputation": 107, "user_id": 6664623, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/95cf885fc3496390a823ba67e2d1018a?s=128&d=identicon&r=PG&f=1", "display_name": "Chase Garfield", "link": "https://stackoverflow.com/users/6664623/chase-garfield"}, "edited": false, "score": 0, "creation_date": 1470942058, "post_id": 38884862, "comment_id": 65167005, "body": "This is a great push in the right direction! The program keeps overwriting on the write function so there is only one set of data in the file output. But thank you for a good start!"}], "tags": [], "owner": {"reputation": 3427, "user_id": 1425140, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/abc53330574145dcfc1e9e910ca5a6bf?s=128&d=identicon&r=PG", "display_name": "Xander Luciano", "link": "https://stackoverflow.com/users/1425140/xander-luciano"}, "is_accepted": true, "score": 1, "last_activity_date": 1470869845, "creation_date": 1470869845, "answer_id": 38884862, "question_id": 38884686, "link": "https://stackoverflow.com/questions/38884686/writing-multiple-files-into-one-file-using-python-while-taking-input-from-the-u/38884862#38884862", "title": "Writing multiple files into one file using Python, while taking input from the user to choose the files to scan", "body": "<p>Just going to mockup some code for you to help guide you, no guarantees this will work to any degree, but should get you started.</p>\n\n<p>First off, lets store all the part names in a list so we can loop over them later on:</p>\n\n<pre><code>input_name = []\nuser_input = input('Part Name: ')\nwhile user_input != \"\":\n    input_name.append(user_input)\n    user_input = input('Part Name: ')\n</code></pre>\n\n<p>Now let's loop through all the files that we just got:</p>\n\n<pre><code>for (file_name in input_name):\n    with open(\"/pathway/%s.txt\" %file_name ,\"r\") as read_data, open(\"output.txt\",\"w\") as output:\n        # any thing file related here\n        print(input_data)\n        output.write(part_name)\n        output.write(date)\n        output.write(y)\nprint(\"All done\")\n</code></pre>\n\n<p>That way you get all the user input at once, and process all the data at once.</p>\n"}], "owner": {"reputation": 107, "user_id": 6664623, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/95cf885fc3496390a823ba67e2d1018a?s=128&d=identicon&r=PG&f=1", "display_name": "Chase Garfield", "link": "https://stackoverflow.com/users/6664623/chase-garfield"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 652, "favorite_count": 0, "accepted_answer_id": 38884862, "answer_count": 2, "score": 1, "last_activity_date": 1470869845, "creation_date": 1470868699, "question_id": 38884686, "link": "https://stackoverflow.com/questions/38884686/writing-multiple-files-into-one-file-using-python-while-taking-input-from-the-u", "title": "Writing multiple files into one file using Python, while taking input from the user to choose the files to scan", "body": "<p>Ok, so I have code that looks like this:</p>\n\n<pre><code>input_name=\"PLACEHOLDER\"\n\nwhile input_name != \"\":\n    input_name=input('Part Name: ')\n\n\nwith open(\"/pathway/%s.txt\" %input_name ,\"r\") as read_data, open(\"output.txt\",\"w\") as output:\n\nif part_name != \"\":\n    f=input_data.read() \n    print(input_data)\n\n    output.write(part_name)\n    output.write(date)\n    output.write(y)\nelse:\n    read_data.close()   \n    output.close()\n</code></pre>\n\n<p>I know it looks a little broken, but what I need to do is fix the loop, because I need to be able to take multiple inputs, and write each of those inputs(file names) to the same file at the end of the program. I probably need at least one more loop in here, I'm just looking for ideas or a kick in the right direction. I have other formatting code in there, this is just the bare bones, looking for an idea on what kind of loops I could run. Thanks to anyone who takes the time to look at this for me!</p>\n"}, {"tags": ["python", "datetime", "dictionary"], "comments": [{"owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "edited": false, "score": 0, "creation_date": 1470868883, "post_id": 38884651, "comment_id": 65130067, "body": "Do you not have a date component?  Depending on use, it can be very dangerous to simply difference time, as the two points can be months apart."}], "answers": [{"tags": [], "owner": {"reputation": 1525, "user_id": 6664393, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe985e0b1cf77b72acb4e0058029acda?s=128&d=identicon&r=PG&f=1", "display_name": "user357269", "link": "https://stackoverflow.com/users/6664393/user357269"}, "is_accepted": false, "score": 0, "last_activity_date": 1470868627, "creation_date": 1470868627, "answer_id": 38884668, "question_id": 38884651, "link": "https://stackoverflow.com/questions/38884651/how-to-calculate-timedelta-pairs-from-a-dictionary/38884668#38884668", "title": "How to calculate timedelta pairs from a dictionary", "body": "<p>Use a <a href=\"https://docs.python.org/2/tutorial/datastructures.html#list-comprehensions\" rel=\"nofollow\">list comprehension</a></p>\n\n<pre><code>[datetime.strptime(value, FMT) - datetime.strptime(key, FMT) for key, value in myDict.iteritems()]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 118, "user_id": 3315590, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WbpFB.jpg?s=128&g=1", "display_name": "Or Ohev-Zion", "link": "https://stackoverflow.com/users/3315590/or-ohev-zion"}, "is_accepted": true, "score": 0, "last_activity_date": 1470873684, "creation_date": 1470873684, "answer_id": 38885351, "question_id": 38884651, "link": "https://stackoverflow.com/questions/38884651/how-to-calculate-timedelta-pairs-from-a-dictionary/38885351#38885351", "title": "How to calculate timedelta pairs from a dictionary", "body": "<p>Combining the answers of @wim @user35269 and @RandyTek\nHere is the final code. Note that converting the datetime object to string will give you the desired output, to save or print out later:</p>\n\n<pre><code>from datetime import datetime\n\nmyDict = {'0:00:12': '0:40:10', '0:00:18': '0:04:58', '0:00:50': '0:02:35'}\nFMT = '%H:%M:%S'\nresults = []\nfor key, value in myDict.iteritems():\n    result = datetime.strptime(value, FMT) - datetime.strptime(key, FMT)\n    results.append(str(result))\n\nprint results\n</code></pre>\n\n<p>Here is how it look:</p>\n\n<pre><code>['0:04:40', '0:39:58', '0:01:45']\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6701371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8145d4293d890c052bab835509d8f459?s=128&d=identicon&r=PG&f=1", "display_name": "jordyn", "link": "https://stackoverflow.com/users/6701371/jordyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "accepted_answer_id": 38885351, "answer_count": 2, "score": -1, "last_activity_date": 1470873684, "creation_date": 1470868536, "last_edit_date": 1470871298, "question_id": 38884651, "link": "https://stackoverflow.com/questions/38884651/how-to-calculate-timedelta-pairs-from-a-dictionary", "title": "How to calculate timedelta pairs from a dictionary", "body": "<p>I have a dictionary with key-value pairs of type timedelta in '%H:%M:%S'</p>\n\n<p>i.e.</p>\n\n<pre><code>myDict = {'0:00:12': '0:40:10', '0:00:18': '0:04:58', '0:00:50': '0:02:35'}\n</code></pre>\n\n<p>What I want to be able to do is calculate the difference between the key and the value for each pair and save those those differences to a list</p>\n\n<p>i.e. for first pair <code>'0:40:10' - '0:00:12'</code></p>\n\n<p>Calculate <code>'0:40:10' - '0:00:12'</code></p>\n\n<p>Which is <code>0:39:58</code>, then save that to myList, so that myList looks like:</p>\n\n<pre><code>myList = ['0:39:58', 'difference-for-pair-2', 'difference-for-pair-3' ... ]\n</code></pre>\n\n<p>I got as far as </p>\n\n<pre><code>FMT='%H:%M:%S'\nfor key, value in myDict.iteritems():\n  print datetime.strptime(value, FMT) - datetime.strptime(key, FMT)\n</code></pre>\n\n<p>this prints the differences in times I want like: </p>\n\n<pre><code>0:02:05\n0:02:57\n0:00:31\n...\n</code></pre>\n\n<p>Which is correct, but I can't figure out how to save these values to a list rather than just printing on screen</p>\n\n<p>How do I do this?</p>\n"}, {"tags": ["python", "matplotlib", "plot"], "comments": [{"owner": {"reputation": 73075, "user_id": 380231, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8744048060e5931c500d3c9d1ecb997e?s=128&d=identicon&r=PG", "display_name": "tacaswell", "link": "https://stackoverflow.com/users/380231/tacaswell"}, "edited": false, "score": 0, "creation_date": 1470892422, "post_id": 38884644, "comment_id": 65135914, "body": "See <a href=\"http://matplotlib.org/examples/pylab_examples/ellipse_collection.html\" rel=\"nofollow noreferrer\">matplotlib.org/examples/pylab_examples/ellipse_collection.ht&zwnj;&#8203;ml</a>  Scatter scales the points in screen space (pixels), you want the markers to scale in data space."}, {"owner": {"reputation": 10567, "user_id": 4680533, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tee8v.jpg?s=128&g=1", "display_name": "Ed Smith", "link": "https://stackoverflow.com/users/4680533/ed-smith"}, "edited": false, "score": 0, "creation_date": 1470905309, "post_id": 38884644, "comment_id": 65142736, "body": "Check out this answer <a href=\"http://stackoverflow.com/questions/29107800/python-matplotlib-convert-axis-data-coordinates-systems\" title=\"python matplotlib convert axis data coordinates systems\">stackoverflow.com/questions/29107800/&hellip;</a>"}], "owner": {"reputation": 143, "user_id": 6702429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/667f343a5ed6a9e30b91004fd965b881?s=128&d=identicon&r=PG&f=1", "display_name": "Jbag1212", "link": "https://stackoverflow.com/users/6702429/jbag1212"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 290, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1470872151, "creation_date": 1470868503, "last_edit_date": 1470872151, "question_id": 38884644, "link": "https://stackoverflow.com/questions/38884644/how-to-scale-the-area-in-plt-scatter-to-the-axes", "title": "How to scale the area in plt.scatter() to the axes?", "body": "<p>I am making a scatterplot in python using matplotlib.pyplot (as plt).</p>\n\n<p>The function plt.scatter() takes in two one-dimensional arrays, so for example, the following code outputs a figure like:</p>\n\n<pre><code>a=[1, 2, 3, 4, 5]\nb=[3, 4, 5, 6, 7]\nplt.scatter(a, b)\nplt.show()\n</code></pre>\n\n<p><a href=\"http://i.stack.imgur.com/unybv.png\" rel=\"nofollow\">Scatterplot</a></p>\n\n<p>It also has an optional argument which allows the user to specify the size of the points.</p>\n\n<p>For example:</p>\n\n<pre><code>a=[1, 2, 3, 4, 5]\nb=[3, 4, 5, 6, 7]\narea=[np.pi, np.pi, np.pi, np.pi, np.pi]\nplt.scatter(a, b, s=area)\nplt.show()\n</code></pre>\n\n<p>Creates the following figure:\n<a href=\"http://i.stack.imgur.com/D2hS7.png\" rel=\"nofollow\">Scatterplot</a></p>\n\n<p>I would really like the size of the circles to be a circle with radius one - (which would correspond to an area of 'pi') but it seems like this argument takes in pixel size, not size fitted with respect to the axes of my plot.</p>\n\n<p>Does anybody know if there is a way to achieve this? (I do not want to manually measure the size of the pixel:axes ratio because the project that I am doing this for will make many different types of plots).</p>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["python", "django", "django-class-based-views"], "comments": [{"owner": {"reputation": 46016, "user_id": 2615075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f23ab144c48263fa1c4cf43ae46fb70d?s=128&d=identicon&r=PG", "display_name": "knbk", "link": "https://stackoverflow.com/users/2615075/knbk"}, "edited": false, "score": 0, "creation_date": 1470869487, "post_id": 38884636, "comment_id": 65130258, "body": "What about returning a custom error page from your middleware when the login fails? Sidenote: <code>CsrfViewMiddleware</code> is view middleware, and only runs after your middleware. You should use <code>csrf_protect</code> or call the middleware to make sure your own middleware is protected against CSRF attacks."}, {"owner": {"reputation": 83, "user_id": 6702421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e3143312a7be3326a1f096d81b58444?s=128&d=identicon&r=PG&f=1", "display_name": "Rodrigo Travessini", "link": "https://stackoverflow.com/users/6702421/rodrigo-travessini"}, "reply_to_user": {"reputation": 46016, "user_id": 2615075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f23ab144c48263fa1c4cf43ae46fb70d?s=128&d=identicon&r=PG", "display_name": "knbk", "link": "https://stackoverflow.com/users/2615075/knbk"}, "edited": false, "score": 0, "creation_date": 1470871512, "post_id": 38884636, "comment_id": 65130770, "body": "I would prefer to have the errors shown on the form instead of a custom page, but it is an option. Thanks for you sidenote, I updated the code to use the process_view() instead of the process_request(), and put the LoginFormMiddleware after the CsrfViewMiddleware on the MIDDLEWARE setting."}], "owner": {"reputation": 83, "user_id": 6702421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e3143312a7be3326a1f096d81b58444?s=128&d=identicon&r=PG&f=1", "display_name": "Rodrigo Travessini", "link": "https://stackoverflow.com/users/6702421/rodrigo-travessini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1470871603, "creation_date": 1470868489, "last_edit_date": 1495541687, "question_id": 38884636, "link": "https://stackoverflow.com/questions/38884636/django-loginformmiddleware-breaks-with-cvbs-and-invalid-forms", "title": "Django LoginFormMiddleware breaks with CVBs and invalid forms", "body": "<p>I'm trying to make the login form accessible on every page using a middleware suggested on other SO <a href=\"https://stackoverflow.com/questions/16156899/django-loginformmiddleware-breaks-with-class-based-views\">question</a>. </p>\n\n<p>The problem is that when used with class based views without a POST method (e.g. TemplateView), the page is not displayed after an unsuccessful login attempt (form with errors), because the request method is a POST and the view don't have it implemented. For valid forms there is no problem since I can just redirect (<a href=\"https://stackoverflow.com/a/16157343/6702421\">suggested here</a>). I want to know if there is a better approach to this problem compared to just setting request.method = 'GET' for invalid forms.</p>\n\n<pre><code>from MyProj.forms import MyProjTopLoginForm\nfrom django.http import HttpResponseRedirect\nfrom django.core.urlresolvers import reverse\n\nclass LoginFormMiddleware(object):\n\n    def process_view(self, request, view_func, view_args, view_kwargs):\n\n        # if the top login form has been posted\n        if request.method == 'POST' and 'top_login_form-username' in request.POST:\n\n            # validate the form\n            form = MyProjTopLoginForm(prefix=\"top_login_form\", data=request.POST)\n            if form.is_valid():\n\n                # log the user in\n                from django.contrib.auth import login\n                login(request, form.get_user())\n\n                # if this is the logout page, then redirect to /\n                # so we don't get logged out just after logging in\n                if reverse('logout') in request.get_full_path():\n                    return HttpResponseRedirect('/')\n                # Redirect to the same page after successfully handling the login form data.\n                return HttpResponseRedirect('')\n                # We could also do:\n                # request.method = 'GET'\n                # instead of a redirect, but if a user refreshes the page, they'll get prompted to re-send post data,\n                # which is super annoying.\n\n        else:\n            form = MyProjTopLoginForm(request, prefix=\"top_login_form\")\n\n        # attach the form to the request so it can be accessed within the templates\n        request.top_login_form = form\n</code></pre>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 53055, "user_id": 419116, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RmTuo.jpg?s=128&g=1", "display_name": "Yaroslav Bulatov", "link": "https://stackoverflow.com/users/419116/yaroslav-bulatov"}, "edited": false, "score": 0, "creation_date": 1470869331, "post_id": 38884716, "comment_id": 65130211, "body": "that doesn&#39;t help me set <code>sys.modules</code> to the current module"}, {"owner": {"reputation": 2086, "user_id": 4721937, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/939955c7df10b4632df32f8f5e7600d8?s=128&d=identicon&r=PG", "display_name": "warownia1", "link": "https://stackoverflow.com/users/4721937/warownia1"}, "reply_to_user": {"reputation": 53055, "user_id": 419116, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RmTuo.jpg?s=128&g=1", "display_name": "Yaroslav Bulatov", "link": "https://stackoverflow.com/users/419116/yaroslav-bulatov"}, "edited": false, "score": 0, "creation_date": 1470869447, "post_id": 38884716, "comment_id": 65130247, "body": "I think I misunderstood your question. Edited."}], "tags": [], "owner": {"reputation": 2086, "user_id": 4721937, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/939955c7df10b4632df32f8f5e7600d8?s=128&d=identicon&r=PG", "display_name": "warownia1", "link": "https://stackoverflow.com/users/4721937/warownia1"}, "is_accepted": true, "score": 1, "last_activity_date": 1470869485, "last_edit_date": 1470869485, "creation_date": 1470868869, "answer_id": 38884716, "question_id": 38884630, "link": "https://stackoverflow.com/questions/38884630/how-to-set-sys-modulesm-current-module/38884716#38884716", "title": "How to set sys.modules[&quot;m&quot;]=&lt;current module&gt;", "body": "<pre><code>sys.modules['othermodule'] = sys.modules[__name__]\n</code></pre>\n\n<p>Gets the current module you are in and sets as othermodule.\nNow you can:</p>\n\n<pre><code>import othermodule\nothermodule.f()\n</code></pre>\n\n<p>If you prefer to assign module to variable you can simply:</p>\n\n<pre><code>othermodule = sys.modules[__name__]\nothermodule.f()\n</code></pre>\n"}], "owner": {"reputation": 53055, "user_id": 419116, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RmTuo.jpg?s=128&g=1", "display_name": "Yaroslav Bulatov", "link": "https://stackoverflow.com/users/419116/yaroslav-bulatov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 616, "favorite_count": 0, "accepted_answer_id": 38884716, "answer_count": 1, "score": 3, "last_activity_date": 1470869485, "creation_date": 1470868477, "question_id": 38884630, "link": "https://stackoverflow.com/questions/38884630/how-to-set-sys-modulesm-current-module", "title": "How to set sys.modules[&quot;m&quot;]=&lt;current module&gt;", "body": "<p>I have this structure:</p>\n\n<pre><code>merged.py:\n  everything\n\nmain.py:\n  import merged\n  sys.modules['othermodule'] = merged\n  othermodule.f()\n</code></pre>\n\n<p>If I merged this into single file <code>main.py</code>, is there any way to tell <code>othermodule</code> resolve to <code>main</code> while inside of <code>main.py</code>?</p>\n\n<p>This situation happens when using <a href=\"https://github.com/xonsh/amalgamate\" rel=\"nofollow\">amalgamate</a> package to concat everything into single file, but the result is two files\u00a0with structure like above, and I'm trying to get it down to one file</p>\n"}, {"tags": ["python", "django", "django-views"], "answers": [{"tags": [], "owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "is_accepted": true, "score": 6, "last_activity_date": 1470869428, "creation_date": 1470869428, "answer_id": 38884798, "question_id": 38884616, "link": "https://stackoverflow.com/questions/38884616/how-to-override-clean-method-of-a-form-generated-by-updateview/38884798#38884798", "title": "How to override clean method of a form generated by UpdateView?", "body": "<p>You can make your view use your form by setting <a href=\"https://docs.djangoproject.com/en/1.10/ref/class-based-views/mixins-editing/#django.views.generic.edit.FormMixin.form_class\" rel=\"noreferrer\"><code>form_class</code></a>.</p>\n\n<pre><code>class EditOrderView(UpdateView):\n    model = Job\n    form_class = MyForm\n    ...\n</code></pre>\n"}], "owner": {"reputation": 13493, "user_id": 2607447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccd6c05db10236c0b175d26db1b0ce8e?s=128&d=identicon&r=PG", "display_name": "Milano", "link": "https://stackoverflow.com/users/2607447/milano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1082, "favorite_count": 1, "accepted_answer_id": 38884798, "answer_count": 1, "score": 2, "last_activity_date": 1470869428, "creation_date": 1470868396, "question_id": 38884616, "link": "https://stackoverflow.com/questions/38884616/how-to-override-clean-method-of-a-form-generated-by-updateview", "title": "How to override clean method of a form generated by UpdateView?", "body": "<p>Is it possible to override a <code>clean method</code> of the form which is generated by <strong>Class Based View</strong> - <code>UpdateView</code>?</p>\n\n<p>In <code>form</code>, I would override <code>clean</code> method to check, whether either first or second field is filled. </p>\n\n<p>Form would be like:</p>\n\n<pre><code>class MyForm(forms.ModelForm):\n    ...\n    def clean(self):\n        super(MyForm,self).clean()\n        if bool(self.cleaned_data['first_field'])== bool(self.cleaned_data['first_field']):\n            raise ValidationError(\"Please, fill the first or second field\")\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>class EditOrderView(UpdateView):\n    model = Job\n    fields = ['language_from', 'language_to', 'level', 'short_description', 'notes',\n              'first_field', 'second_field']\n    template_name = 'auth/jobs/update-order.html'\n\n    def get_object(self, queryset=None):\n        return get_object_or_404(self.model, pk=self.kwargs[\"pk\"], customer=self.request.user)\n\n    def get_success_url(self):\n        return '/my-orders/'\n\n    def form_valid(self, form):\n        self.order = form.save()\n        email.AdminNotifications.edited_order(self.order)\n        return HttpResponseRedirect(self.get_success_url())\n</code></pre>\n"}, {"tags": ["python", "windows", "multithreading", "spyder"], "answers": [{"tags": [], "owner": {"reputation": 2955, "user_id": 5642219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71ff21486f749bb8deb88cc94ac12086?s=128&d=identicon&r=PG&f=1", "display_name": "mementum", "link": "https://stackoverflow.com/users/5642219/mementum"}, "is_accepted": false, "score": 0, "last_activity_date": 1476782654, "creation_date": 1476782654, "answer_id": 40104374, "question_id": 38884587, "link": "https://stackoverflow.com/questions/38884587/multithreading-frozen-in-python-spyder-but-not-command-prompt-windows-10/40104374#40104374", "title": "Multithreading frozen in Python Spyder but not command prompt Windows 10", "body": "<p>The problem is in Spyder. The kernel is running in interpreted mode and the addition of \"freeze_support\" doesn't happend before other things even if that's the intention, because the kernel is already running.</p>\n\n<p>See here: <a href=\"https://github.com/mementum/backtrader/issues/118\" rel=\"nofollow\">https://github.com/mementum/backtrader/issues/118</a></p>\n"}], "owner": {"reputation": 1, "user_id": 5652773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5396714549220990d9a984592c4fa779?s=128&d=identicon&r=PG&f=1", "display_name": "chogall", "link": "https://stackoverflow.com/users/5652773/chogall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 619, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1476782654, "creation_date": 1470868253, "question_id": 38884587, "link": "https://stackoverflow.com/questions/38884587/multithreading-frozen-in-python-spyder-but-not-command-prompt-windows-10", "title": "Multithreading frozen in Python Spyder but not command prompt Windows 10", "body": "<p>I am running a script inside Spyder that utilizes the multithreading library and the IPython console freezes with the output below. However, running the script using Windows command prompt via 'python quickstart11.py' works fine and generates the proper output.</p>\n\n<pre><code>    runfile('C:/Python35/User/backtrader-master/docs/quickstart/quickstart11.py', wdir='C:/Python35/User/backtrader-master/docs/quickstart')\nException in thread Thread-8:\nTraceback (most recent call last):\n  File \"C:\\Anaconda3\\lib\\threading.py\", line 914, in _bootstrap_inner\n    self.run()\n  File \"C:\\Anaconda3\\lib\\threading.py\", line 862, in run\n    self._target(*self._args, **self._kwargs)\n  File \"C:\\Anaconda3\\lib\\multiprocessing\\pool.py\", line 429, in _handle_results\n    task = get()\n  File \"C:\\Anaconda3\\lib\\multiprocessing\\connection.py\", line 251, in recv\n    return ForkingPickler.loads(buf.getbuffer())\nAttributeError: Can't get attribute 'TestStrategy' on &lt;module '__main__' (&lt;_frozen_importlib_external.SourceFileLoader object at 0x000002727C461438&gt;)&gt;\n</code></pre>\n\n<p>I've tried adding freeze_support() according to <a href=\"https://docs.python.org/2/library/multiprocessing.html#multiprocessing.freeze_support\" rel=\"nofollow\">Python doc</a>, which should alleviate the problem, but it still freezes. What is going on?</p>\n\n<p>Windows 10 64bit, Anaconda Python 35 64bit installer.</p>\n"}, {"tags": ["python", "python-3.x", "version", "pyinstaller"], "answers": [{"tags": [], "owner": {"reputation": 231, "user_id": 5919800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8e10391cda856998555558371b5fe07?s=128&d=identicon&r=PG&f=1", "display_name": "Bleiz", "link": "https://stackoverflow.com/users/5919800/bleiz"}, "is_accepted": false, "score": 1, "last_activity_date": 1471012624, "creation_date": 1471012624, "answer_id": 38920563, "question_id": 38884579, "link": "https://stackoverflow.com/questions/38884579/how-do-i-write-version-files-for-pyinstaller-3-2/38920563#38920563", "title": "How do I write version files for pyinstaller 3.2", "body": "<p>Your version file should be good enough. The problem is in PyInstaller's versioninfo.py which is probably has no Python3 support at this time.<br>\nAs a simple workaround, you can try to use a resource editor (e.g. <a href=\"http://www.codeproject.com/Articles/37133/Simple-Version-Resource-Tool-for-Windows\" rel=\"nofollow\">http://www.codeproject.com/Articles/37133/Simple-Version-Resource-Tool-for-Windows</a>) to add version info to your application.<br>\nRelated pyinstaller issue for additional information: <a href=\"https://github.com/pyinstaller/pyinstaller/issues/1347\" rel=\"nofollow\">https://github.com/pyinstaller/pyinstaller/issues/1347</a>.</p>\n"}], "owner": {"reputation": 660, "user_id": 6483094, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/wVGLz.jpg?s=128&g=1", "display_name": "HackAfro", "link": "https://stackoverflow.com/users/6483094/hackafro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2884, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471012624, "creation_date": 1470868225, "last_edit_date": 1470913778, "question_id": 38884579, "link": "https://stackoverflow.com/questions/38884579/how-do-i-write-version-files-for-pyinstaller-3-2", "title": "How do I write version files for pyinstaller 3.2", "body": "<p>I'm trying to convert my python script to an exe and everything went well until I added a version file, it threw this error and I don't know what it means. I've seen different posts about version files and I've tried them all and I keep getting this error:</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"C:\\Users\\Afro\\AppData\\Local\\Programs\\Python\\Python35-32\\Scripts\\pyinstaller-script.py\", line 9, in &lt;module&gt;\nload_entry_point('PyInstaller==3.2', 'console_scripts', 'pyinstaller')()\nFile \"c:\\users\\afro\\appdata\\local\\programs\\python\\python35-32\\lib\\site-packages\\PyInstaller\\__main__.py\", line 90, in run\nrun_build(pyi_config, spec_file, **vars(args))\nFile \"c:\\users\\afro\\appdata\\local\\programs\\python\\python35-32\\lib\\site-packages\\PyInstaller\\__main__.py\", line 46, in run_build\nPyInstaller.building.build_main.main(pyi_config, spec_file, **kwargs)\nFile \"c:\\users\\afro\\appdata\\local\\programs\\python\\python35-32\\lib\\site-packages\\PyInstaller\\building\\build_main.py\", line 788, in main\nbuild(specfile, kw.get('distpath'), kw.get('workpath'), kw.get('clean_build'))\nFile \"c:\\users\\afro\\appdata\\local\\programs\\python\\python35-32\\lib\\site-packages\\PyInstaller\\building\\build_main.py\", line 734, in build\nexec(text, spec_namespace)\nFile \"&lt;string&gt;\", line 26, in &lt;module&gt;\nFile \"c:\\users\\afro\\appdata\\local\\programs\\python\\python35-32\\lib\\site-packages\\PyInstaller\\building\\api.py\", line 407, in __init__\nself.__postinit__()\nFile \"c:\\users\\afro\\appdata\\local\\programs\\python\\python35-32\\lib\\site-packages\\PyInstaller\\building\\datastruct.py\", line 178, in __postinit__\nself.assemble()\nFile \"c:\\users\\afro\\appdata\\local\\programs\\python\\python35-32\\lib\\site-packages\\PyInstaller\\building\\api.py\", line 496, in assemble\nversioninfo.SetVersion(tmpnm, self.versrsrc)\nFile \"c:\\users\\afro\\appdata\\local\\programs\\python\\python35-32\\lib\\site-packages\\PyInstaller\\utils\\win32\\versioninfo.py\", line 557, in SetVersion\nwin32api.UpdateResource(hdst, pefile.RESOURCE_TYPE['RT_VERSION'], 1, vs.toRaw())\nFile \"c:\\users\\afro\\appdata\\local\\programs\\python\\python35-32\\lib\\site-packages\\PyInstaller\\utils\\win32\\versioninfo.py\", line 160, in toRaw\nnm = pywintypes.Unicode(u'VS_VERSION_INFO')\nTypeError: argument 1 (impossible&lt;bad format char&gt;)\n</code></pre>\n\n<p>and here's my version file:</p>\n\n<pre><code>VSVersionInfo(\n  ffi=FixedFileInfo(\n    filevers=(1, 0, 0, 0),\n    prodvers=(1, 0, 0, 0),\n    mask=0x3f,\n    flags=0x0,\n    OS=0x40004,\n    fileType=0x1,\n    subtype=0x0,\n    date=(0, 0)\n    ),\n  kids=[\n    StringFileInfo(\n      [\n    StringTable(\n        u'040904B0',\n        [StringStruct(u'CompanyName', u'getSERIES'),\n        StringStruct(u'FileDescription', u'get it'),\n        StringStruct(u'FileVersion', u'6.1.7601.17514    (win7sp1_rtm.101119-1850)'),\n        StringStruct(u'InternalName', u'getSERIES'),\n        StringStruct(u'LegalCopyright', u'HA corporation. All rights reserved.'),\n        StringStruct(u'OriginalFilename', u'getSERIES.Exe'),\n        StringStruct(u'ProductName', u'getSERIES'),\n        StringStruct(u'ProductVersion', u'1, 0, 0, 0')])\n    ]), \n    VarFileInfo([VarStruct(u'Translation', [1033, 1200])])\n  ]\n)\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 303, "user_id": 6320717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0ba1da4f14852adeeeb765ed3d9c39b?s=128&d=identicon&r=PG&f=1", "display_name": "Steven Setteducati Jr.", "link": "https://stackoverflow.com/users/6320717/steven-setteducati-jr"}, "edited": false, "score": 0, "creation_date": 1470922743, "post_id": 38884563, "comment_id": 65154860, "body": "Awesome! Thanks a bunch!"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 24, "last_activity_date": 1470869298, "last_edit_date": 1470869298, "creation_date": 1470868155, "answer_id": 38884563, "question_id": 38884538, "link": "https://stackoverflow.com/questions/38884538/python-pandas-find-all-rows-where-all-values-are-nan/38884563#38884563", "title": "Python Pandas find all rows where all values are NaN", "body": "<p>It should just be:</p>\n\n<pre><code>df.isnull().all(1)\n</code></pre>\n\n<p>The <code>index</code> can be accessed like:</p>\n\n<pre><code>df.index[df.isnull().all(1)]\n</code></pre>\n\n<h3>Demonstration</h3>\n\n<pre><code>np.random.seed([3,1415])\ndf = pd.DataFrame(np.random.choice((1, np.nan), (10, 2)))\ndf\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/0iX5A.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/0iX5A.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>idx = df.index[df.isnull().all(1)]\nnans = df.ix[idx]\nnans\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/0R6tc.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/0R6tc.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<h3>Timing</h3>\n\n<p><strong>code</strong></p>\n\n<pre><code>np.random.seed([3,1415])\ndf = pd.DataFrame(np.random.choice((1, np.nan), (10000, 5)))\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/qD0tb.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/qD0tb.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "is_accepted": false, "score": 6, "last_activity_date": 1470868519, "last_edit_date": 1470868519, "creation_date": 1470868172, "answer_id": 38884567, "question_id": 38884538, "link": "https://stackoverflow.com/questions/38884538/python-pandas-find-all-rows-where-all-values-are-nan/38884567#38884567", "title": "Python Pandas find all rows where all values are NaN", "body": "<p>Assuming your dataframe is named <code>df</code>, you can use boolean indexing to check if all columns (<code>axis=1</code>) are null.  Then take the index of the result.</p>\n\n<pre><code>np.random.seed(0)\ndf = pd.DataFrame(np.random.randn(5, 3))\ndf.iloc[-2:, :] = np.nan\n&gt;&gt;&gt; df\n          0         1         2\n0  1.764052  0.400157  0.978738\n1  2.240893  1.867558 -0.977278\n2  0.950088 -0.151357 -0.103219\n3       NaN       NaN       NaN\n4       NaN       NaN       NaN\n\nnan = df[df.isnull().all(axis=1)].index\n\n&gt;&gt;&gt; nan\nInt64Index([3, 4], dtype='int64')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1525, "user_id": 6664393, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe985e0b1cf77b72acb4e0058029acda?s=128&d=identicon&r=PG&f=1", "display_name": "user357269", "link": "https://stackoverflow.com/users/6664393/user357269"}, "is_accepted": false, "score": -1, "last_activity_date": 1470868201, "last_edit_date": 1495542773, "creation_date": 1470868201, "answer_id": 38884571, "question_id": 38884538, "link": "https://stackoverflow.com/questions/38884538/python-pandas-find-all-rows-where-all-values-are-nan/38884571#38884571", "title": "Python Pandas find all rows where all values are NaN", "body": "<p>From the master himself: <a href=\"https://stackoverflow.com/a/14033137/6664393\">https://stackoverflow.com/a/14033137/6664393</a></p>\n\n<pre><code>nans = pd.isnull(df).all(1).nonzero()[0]\n</code></pre>\n"}], "owner": {"reputation": 303, "user_id": 6320717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0ba1da4f14852adeeeb765ed3d9c39b?s=128&d=identicon&r=PG&f=1", "display_name": "Steven Setteducati Jr.", "link": "https://stackoverflow.com/users/6320717/steven-setteducati-jr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16199, "favorite_count": 5, "accepted_answer_id": 38884563, "answer_count": 3, "score": 19, "last_activity_date": 1470869298, "creation_date": 1470868044, "question_id": 38884538, "link": "https://stackoverflow.com/questions/38884538/python-pandas-find-all-rows-where-all-values-are-nan", "title": "Python Pandas find all rows where all values are NaN", "body": "<p>So I have a dataframe with 5 columns. I would like to pull the indices where all of the columns are NaN. I was using this code:</p>\n\n<pre><code>nan = pd.isnull(df.all)\n</code></pre>\n\n<p>but that is just returning false because it is logically saying no not all values in the dataframe are null. There are thousands of entries so I would prefer to not have to loop through and check each entry. Thanks!</p>\n"}, {"tags": ["python", "ubuntu", "virtualenv"], "answers": [{"comments": [{"owner": {"reputation": 3313, "user_id": 785021, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ba73fbde03f670c69188f59371b2b6a2?s=128&d=identicon&r=PG", "display_name": "Nebelhom", "link": "https://stackoverflow.com/users/785021/nebelhom"}, "edited": false, "score": 0, "creation_date": 1470935796, "post_id": 38885487, "comment_id": 65163591, "body": "Hi, I tried your approach, but unfortunately it does not work :( Still getting the same permission denied Errno13. Thanks a lot though for making the effort."}], "tags": [], "owner": {"reputation": 118, "user_id": 3315590, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WbpFB.jpg?s=128&g=1", "display_name": "Or Ohev-Zion", "link": "https://stackoverflow.com/users/3315590/or-ohev-zion"}, "is_accepted": false, "score": 0, "last_activity_date": 1470874913, "creation_date": 1470874913, "answer_id": 38885487, "question_id": 38884536, "link": "https://stackoverflow.com/questions/38884536/virtualenv-python-in-ubuntu-14-04-lts-on-external-hard-drive/38885487#38885487", "title": "Virtualenv (python) in Ubuntu 14.04 LTS on external hard drive", "body": "<p>Seems like Python is having trouble with permission on that folder.</p>\n\n<p>Try giving root permission on the folder using this command:</p>\n\n<pre><code>sudo chown root:root -R /media/nebelhom/extHDD/virt_folder/MyFolder\n</code></pre>\n\n<p>Then run this command to create the virtualenv:</p>\n\n<pre><code>sudo virtualenv /media/nebelhom/extHDD/virt_folder/MyFolder\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3313, "user_id": 785021, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ba73fbde03f670c69188f59371b2b6a2?s=128&d=identicon&r=PG", "display_name": "Nebelhom", "link": "https://stackoverflow.com/users/785021/nebelhom"}, "edited": false, "score": 0, "creation_date": 1470935897, "post_id": 38901490, "comment_id": 65163642, "body": "Hi abishek_M, in this case I will most buy a small external harddrive for ubuntu like files only. I am not in need of too much space (a couple of gig). I do not feel comfortable using GParted on the external hard drive. Too many bad experiences ;) Thanks a lot for your effort though. I will check if it works with this one once I have it and then accept your answer if it works. Thanks!"}, {"owner": {"reputation": 940, "user_id": 3594927, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0200248d9de6dd7199e6f0c1ed2f63db?s=128&d=identicon&r=PG", "display_name": "abhishek_M", "link": "https://stackoverflow.com/users/3594927/abhishek-m"}, "reply_to_user": {"reputation": 3313, "user_id": 785021, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ba73fbde03f670c69188f59371b2b6a2?s=128&d=identicon&r=PG", "display_name": "Nebelhom", "link": "https://stackoverflow.com/users/785021/nebelhom"}, "edited": false, "score": 0, "creation_date": 1470940074, "post_id": 38901490, "comment_id": 65165819, "body": "All the best! , let me know if you face any issues :)"}, {"owner": {"reputation": 3313, "user_id": 785021, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ba73fbde03f670c69188f59371b2b6a2?s=128&d=identicon&r=PG", "display_name": "Nebelhom", "link": "https://stackoverflow.com/users/785021/nebelhom"}, "edited": false, "score": 0, "creation_date": 1471032249, "post_id": 38901490, "comment_id": 65208275, "body": "@abishek_M Got myself a cheap extHDD and it worked as you said. Thx!"}, {"owner": {"reputation": 940, "user_id": 3594927, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0200248d9de6dd7199e6f0c1ed2f63db?s=128&d=identicon&r=PG", "display_name": "abhishek_M", "link": "https://stackoverflow.com/users/3594927/abhishek-m"}, "reply_to_user": {"reputation": 3313, "user_id": 785021, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ba73fbde03f670c69188f59371b2b6a2?s=128&d=identicon&r=PG", "display_name": "Nebelhom", "link": "https://stackoverflow.com/users/785021/nebelhom"}, "edited": false, "score": 0, "creation_date": 1471032662, "post_id": 38901490, "comment_id": 65208476, "body": "@Nebelhom Cool ! Glad I could help :)"}], "tags": [], "owner": {"reputation": 940, "user_id": 3594927, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0200248d9de6dd7199e6f0c1ed2f63db?s=128&d=identicon&r=PG", "display_name": "abhishek_M", "link": "https://stackoverflow.com/users/3594927/abhishek-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1470932161, "creation_date": 1470932161, "answer_id": 38901490, "question_id": 38884536, "link": "https://stackoverflow.com/questions/38884536/virtualenv-python-in-ubuntu-14-04-lts-on-external-hard-drive/38901490#38901490", "title": "Virtualenv (python) in Ubuntu 14.04 LTS on external hard drive", "body": "<p>I think its happening because of filesystem on your external HDD. From your question I can guess that you use your external hard disk with both windows and linux, and its file system might be NTFS.</p>\n\n<p>File permissions don't exist on NTFS and all the usual linux things like chown and chmod, that can be the reason why you are having these problems. </p>\n\n<p>I would suggest, that you try to create a new partition on your ext HDD using a linux based filesystem like ext4. Then try to create a virtual environment.</p>\n\n<p>I have tried creating python virtual environment on a removable disk, worked like a charm, only the FS was ext4.</p>\n"}], "owner": {"reputation": 3313, "user_id": 785021, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ba73fbde03f670c69188f59371b2b6a2?s=128&d=identicon&r=PG", "display_name": "Nebelhom", "link": "https://stackoverflow.com/users/785021/nebelhom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 965, "favorite_count": 1, "accepted_answer_id": 38901490, "answer_count": 2, "score": 3, "last_activity_date": 1470932161, "creation_date": 1470868023, "question_id": 38884536, "link": "https://stackoverflow.com/questions/38884536/virtualenv-python-in-ubuntu-14-04-lts-on-external-hard-drive", "title": "Virtualenv (python) in Ubuntu 14.04 LTS on external hard drive", "body": "<p>I am trying to create a virtualenv on my external hard drive that I use for both my Ubuntu and my Windows installation (I have a SSD and use 2TB external hard drive for anything but PC games).</p>\n\n<p>When I navigate to the place and try to create it with the commands that work on the standard Ubuntu home drive, I get the following:</p>\n\n<pre><code>nebelhom@nebelhom-desktop:/media/extHDD/virt_folder$ virtualenv MyFolder\nNew python executable in /media/nebelhom/extHDD/virt_folder/MyFolder/bin/python\nERROR: The executable /media/nebelhom/extHDD/virt_folder/MyFolder/bin/python could not be run: [Errno 13] Permission denied\n</code></pre>\n\n<p>Running the same with \"sudo\" did not help either and gave the same error as above.</p>\n\n<p>What I tried next is indicating the python version</p>\n\n<pre><code>nebelhom@nebelhom-desktop:/media/nebelhom/extHDD/virt_folder$ sudo virtualenv -p python2.7 MyFolder\nRunning virtualenv with interpreter /usr/bin/python2.7\nNew python executable in /media/nebelhom/extHDD/virt_folder/MyFolder/bin/python2.7\nNot overwriting existing python script /media/nebelhom/extHDD/virt_folder/MyFolder/bin/python (you must use /media/nebelhom/extHDD/virt_folder/MyFolder/bin/python2.7)\nTraceback (most recent call last):\n  File \"/usr/local/lib/python2.7/dist-packages/virtualenv.py\", line 2332, in &lt;module&gt;\n    main()\n  File \"/usr/local/lib/python2.7/dist-packages/virtualenv.py\", line 711, in main\n    symlink=options.symlink)\n  File \"/usr/local/lib/python2.7/dist-packages/virtualenv.py\", line 924, in create_environment\n    site_packages=site_packages, clear=clear, symlink=symlink))\n  File \"/usr/local/lib/python2.7/dist-packages/virtualenv.py\", line 1369, in install_python\n    os.symlink(py_executable_base, full_pth)\nOSError: [Errno 17] File exists\n</code></pre>\n\n<p>And now I am stuck :/ . Has anyone of you tried something like this before and succeeded? I am really out of ideas here...</p>\n\n<p>I tried to search for a solution previously, but for this particular problem I did not find anything useful. I will carry on looking and post any link that I can find that might be remotely related.</p>\n\n<p>Thanks in advance for any help you can offer. It is much appreciated.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 19255, "user_id": 428862, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7041b76f657ac8e8d32a72f1b8b5b4bb?s=128&d=identicon&r=PG", "display_name": "Merlin", "link": "https://stackoverflow.com/users/428862/merlin"}, "edited": false, "score": 1, "creation_date": 1470868019, "post_id": 38884517, "comment_id": 65129853, "body": "I recall this question setup, what have you tried? What have you learnt since asking/getting help last time. SO is not a coding service."}, {"owner": {"reputation": 63, "user_id": 6394663, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9712502e18429186eb088b049efe6a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Clover", "link": "https://stackoverflow.com/users/6394663/clover"}, "reply_to_user": {"reputation": 19255, "user_id": 428862, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7041b76f657ac8e8d32a72f1b8b5b4bb?s=128&d=identicon&r=PG", "display_name": "Merlin", "link": "https://stackoverflow.com/users/428862/merlin"}, "edited": false, "score": 0, "creation_date": 1470921613, "post_id": 38884517, "comment_id": 65153989, "body": "This question is different than the previous question I asked. In the previous question, I asked how to compute seconds until output decreased below its current level at each timestep; in this question i&#39;m asking how to compute seconds until output decreases below a constant level not its current level. I tried the solutions that were posted, but I wasn&#39;t able to adapt any of them for this new problem."}], "owner": {"reputation": 63, "user_id": 6394663, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9712502e18429186eb088b049efe6a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Clover", "link": "https://stackoverflow.com/users/6394663/clover"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1470867834, "creation_date": 1470867834, "question_id": 38884517, "link": "https://stackoverflow.com/questions/38884517/python-pandas-calculate-time-until-output-goes-below-a-set-value", "title": "python pandas calculate time until output goes below a set value", "body": "<p>I have a pandas dataframe in python with several columns and a datetime stamp. Is it possible to count seconds until output goes below a set value (say 2)?</p>\n\n<p>Ideally it would look something like this if the set value is 2:</p>\n\n<pre><code> datetime               output     secondsuntilbelow\n 2014-05-01 01:00:00    3         2\n 2014-05-01 01:00:01    2         1\n 2014-05-01 01:00:02    1         0\n 2014-05-01 01:00:03    2         1\n 2014-05-01 01:00:04    1         0\n</code></pre>\n"}, {"tags": ["python", "argparse"], "comments": [{"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1470868431, "post_id": 38884513, "comment_id": 65129958, "body": "I don&#39;t think argparse has that feature."}], "answers": [{"comments": [{"owner": {"reputation": 1182, "user_id": 2977601, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2a11daa74a8ea45d4fbdf062d1b4e945?s=128&d=identicon&r=PG&f=1", "display_name": "shikhanshu", "link": "https://stackoverflow.com/users/2977601/shikhanshu"}, "edited": false, "score": 1, "creation_date": 1470933241, "post_id": 38884659, "comment_id": 65162290, "body": "Thanks for the details explanation. I ended up manually grouping the Namespace attributes as I needed them. It would be a good addition to argparse if it could allow user to retrieve options by group name (i.e. use &#39;group&#39; concept for more than just displaying help screen)"}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 5, "last_activity_date": 1470869046, "last_edit_date": 1470869046, "creation_date": 1470868585, "answer_id": 38884659, "question_id": 38884513, "link": "https://stackoverflow.com/questions/38884513/python-argparse-how-can-i-get-namespace-objects-for-argument-groups-separately/38884659#38884659", "title": "Python argparse : How can I get Namespace objects for argument groups separately?", "body": "<p>Nothing in <code>argparse</code> is designed to do that.  </p>\n\n<p>For what it's worth, the <code>parser</code> starts off with two argument groups, one that displays as <code>positionals</code> and the other as <code>optionals</code> (I forget the exact titles).  So in your example there will actually be 4 groups.</p>\n\n<p>The parser only uses argument groups when formatting the help.  For parsing all arguments are put in a master <code>parser._actions</code> list.  And during parsing the parser only passes around one namespace object.</p>\n\n<p>You could define separate parsers, with different sets of arguments, and call each with <code>parse_known_args</code>.  That works better with <code>optionals</code> (flagged) arguments than with <code>positionals</code>.  And it fragments your help.</p>\n\n<p>I have explored in other SO questions a novel <code>Namespace</code> class that could nest values based on some sort of dotted <code>dest</code> (names like <code>group1.optA</code>, <code>group2.optC</code>, etc).  I don't recall whether I had to customize the <code>Action</code> classes or not.  </p>\n\n<p>The basic point is that when saving a value to the namespace, a parser, or actually a <code>Action</code> (argument) object does:</p>\n\n<pre><code>setattr(namespace, dest, value)\n</code></pre>\n\n<p>That (and getattr/hasattr) is all that the parser expects of the <code>namespace</code>.  The default <code>Namespace</code> class is simple, little more than a plain <code>object</code> subclass.  But it could be more elaborate.  </p>\n"}, {"tags": [], "owner": {"reputation": 86, "user_id": 8830712, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/a9392b361265fe797070959536dda1cf?s=128&d=identicon&r=PG", "display_name": "Ignacio", "link": "https://stackoverflow.com/users/8830712/ignacio"}, "is_accepted": true, "score": 7, "last_activity_date": 1575640716, "last_edit_date": 1575640716, "creation_date": 1508925262, "answer_id": 46929320, "question_id": 38884513, "link": "https://stackoverflow.com/questions/38884513/python-argparse-how-can-i-get-namespace-objects-for-argument-groups-separately/46929320#46929320", "title": "Python argparse : How can I get Namespace objects for argument groups separately?", "body": "<p>you can do it in this way:</p>\n\n<pre><code>import argparse\nparser = argparse.ArgumentParser()\n\ngroup1 = parser.add_argument_group('group1')\ngroup1.add_argument('--test1', help=\"test1\")\n\ngroup2 = parser.add_argument_group('group2')\ngroup2.add_argument('--test2', help=\"test2\")\n\nargs = parser.parse_args('--test1 one --test2 two'.split())\n\narg_groups={}\n\nfor group in parser._action_groups:\n    group_dict={a.dest:getattr(args,a.dest,None) for a in group._group_actions}\n    arg_groups[group.title]=argparse.Namespace(**group_dict)\n</code></pre>\n\n<p>This will give you the normal args, plus dictionary arg_groups containing namespaces for each of the added groups.</p>\n\n<p>(Adapted from <a href=\"https://stackoverflow.com/questions/31519997/is-it-possible-to-only-parse-one-argument-groups-parameters-with-argparse\">this answer</a>)</p>\n"}, {"tags": [], "owner": {"reputation": 117, "user_id": 6424190, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-S1zwxvukQcA/AAAAAAAAAAI/AAAAAAAAAD0/EogVwB_07Zk/photo.jpg?sz=128", "display_name": "Rami Hassan", "link": "https://stackoverflow.com/users/6424190/rami-hassan"}, "is_accepted": false, "score": 0, "last_activity_date": 1575832112, "creation_date": 1575832112, "answer_id": 59238941, "question_id": 38884513, "link": "https://stackoverflow.com/questions/38884513/python-argparse-how-can-i-get-namespace-objects-for-argument-groups-separately/59238941#59238941", "title": "Python argparse : How can I get Namespace objects for argument groups separately?", "body": "<p>I was looking for a solution for this for a very long time,<br>\nAnd I think I finally got it.<br>\nSo I will just put it here...</p>\n\n<pre><code>from argparse import ArgumentParser\n\ndef _parse_args():\n    parser = ArgumentParser()\n    parser.add_argument('-1', '--flag-1', action='store_true', default=False)\n    parser.add_argument('-2', '--flag-2', action='store_true', default=False)\n    parser.add_argument('-3', '--flag-3', action='store_true', default=False)\n\n    args, unknown = parser.parse_known_args()\n    print(f\"args        : {args}\")\n    print(f\"unknown     : {unknown}\")\n\n    hidden = ArgumentParser(add_help=False)\n    hidden.add_argument('-d', '--debug', action='store_true', default=False)\n    hidden_args = hidden.parse_args(unknown)\n    print(f\"hidden_args : {hidden_args}\")\n\nif __name__ == \"__main__\":\n    _parse_args()\n</code></pre>\n\n<p>as a result:<br>\nshow help:</p>\n\n<pre><code>ubuntu \u2192 playAround $ ./test.py -h\nusage: test.py [-h] [-1] [-2] [-3]\n\noptional arguments:\n  -h, --help    show this help message and exit\n  -1, --flag-1\n  -2, --flag-2\n  -3, --flag-3\n</code></pre>\n\n<p>With debug flag:</p>\n\n<pre><code>ubuntu \u2192 playAround $ ./test.py -d\nargs        : Namespace(flag_1=False, flag_2=False, flag_3=False)\nunknown     : ['-d']\nhidden_args : Namespace(debug=True)\n</code></pre>\n\n<p>with flags 1 and 2:</p>\n\n<pre><code>ubuntu \u2192 playAround $ ./test.py -12\nargs        : Namespace(flag_1=True, flag_2=True, flag_3=False)\nunknown     : []\nhidden_args : Namespace(debug=False)\n</code></pre>\n\n<p>with flags 1 and 2 and debug:</p>\n\n<pre><code>ubuntu \u2192 playAround $ ./test.py -12 -d\nargs        : Namespace(flag_1=True, flag_2=True, flag_3=False)\nunknown     : ['-d']\nhidden_args : Namespace(debug=True)\n</code></pre>\n\n<p>The only thing you can't do with this approch is to pass the debug short flag along side to the other short flags:</p>\n\n<pre><code>ubuntu \u2192 playAround $ ./test.py -12d\nusage: test.py [-h] [-1] [-2] [-3]\ntest.py: error: argument -2/--flag-2: ignored explicit argument 'd'\n</code></pre>\n"}], "owner": {"reputation": 1182, "user_id": 2977601, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2a11daa74a8ea45d4fbdf062d1b4e945?s=128&d=identicon&r=PG&f=1", "display_name": "shikhanshu", "link": "https://stackoverflow.com/users/2977601/shikhanshu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3408, "favorite_count": 2, "accepted_answer_id": 46929320, "answer_count": 3, "score": 16, "last_activity_date": 1575832112, "creation_date": 1470867784, "question_id": 38884513, "link": "https://stackoverflow.com/questions/38884513/python-argparse-how-can-i-get-namespace-objects-for-argument-groups-separately", "title": "Python argparse : How can I get Namespace objects for argument groups separately?", "body": "<p>I have some command line arguments categorized in groups as follows:</p>\n\n<pre><code>cmdParser = argparse.ArgumentParser()\ncmdParser.add_argument('mainArg')\n\ngroupOne = cmdParser.add_argument_group('group one')\ngroupOne.add_argument('-optA')\ngroupOne.add_argument('-optB')\n\ngroupTwo = cmdParser.add_argument_group('group two')\ngroupTwo.add_argument('-optC')\ngroupTwo.add_argument('-optD')\n</code></pre>\n\n<p>How can I parse the above, such that I end up with three different Namespace objects?</p>\n\n<pre><code>global_args - containing all the arguments not part of any group\ngroupOne_args - containing all the arguments in groupOne\ngroupTwo_args - containing all the arguments in groupTwo\n</code></pre>\n\n<p>Thank you!</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "dataframe", "range"], "comments": [{"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 7, "creation_date": 1470899591, "post_id": 38884466, "comment_id": 65139248, "body": "There is a better alternative: <code>df.query(&#39;-0.5 &lt;= two &lt; 0.5&#39;)</code>"}, {"owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1470900484, "post_id": 38884466, "comment_id": 65139829, "body": "@MaxU Thanks for this! I hadn&#39;t thought of this. This is very clean"}], "answers": [{"comments": [{"owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1470867793, "post_id": 38884502, "comment_id": 65129777, "body": "What do you mean by using <code>inclusive=False</code> for strict inequalities? I&#39;m not sure I understand the difference between <code>inclusive=True</code> and <code>inclusive=False</code>?"}, {"owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1470867890, "post_id": 38884502, "comment_id": 65129808, "body": "Using <code>between(-0.5, 0.5)</code> , what would be the difference between <code>-0.5 &lt; value &lt; 0.5</code> and <code>-0.5 = &lt; value &lt; 0.5</code> ?"}, {"owner": {"reputation": 738, "user_id": 7711045, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HrhBw.png?s=128&g=1", "display_name": "Alejandro C De Baca", "link": "https://stackoverflow.com/users/7711045/alejandro-c-de-baca"}, "edited": false, "score": 0, "creation_date": 1584646621, "post_id": 38884502, "comment_id": 107508095, "body": "NB: The parenthesis in the second expression are important."}], "tags": [], "owner": {"reputation": 26041, "user_id": 3339965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac89d084d3bc5dc083bad3ea5518f11?s=128&d=identicon&r=PG&f=1", "display_name": "root", "link": "https://stackoverflow.com/users/3339965/root"}, "is_accepted": true, "score": 51, "last_activity_date": 1470868693, "last_edit_date": 1470868693, "creation_date": 1470867694, "answer_id": 38884502, "question_id": 38884466, "link": "https://stackoverflow.com/questions/38884466/how-to-select-a-range-of-values-in-a-pandas-dataframe-column/38884502#38884502", "title": "How to select a range of values in a pandas dataframe column?", "body": "<p>Use <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.between.html\" rel=\"noreferrer\"><code>between</code></a> with <code>inclusive=False</code> for strict inequalities:</p>\n\n<pre><code>df['two'].between(-0.5, 0.5, inclusive=False)\n</code></pre>\n\n<p>The <code>inclusive</code> parameter determines if the endpoints are included or not (<code>True</code>: <code>&lt;=</code>, <code>False</code>: <code>&lt;</code>).  This applies to both signs. If you want mixed inequalities, you'll need to code them explicitly:</p>\n\n<pre><code>(df['two'] &gt;= -0.5) &amp; (df['two'] &lt; 0.5)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 1, "creation_date": 1470875155, "post_id": 38885028, "comment_id": 65131666, "body": "Thanks for the explanation as to why the <code>ValueError</code> was raised!"}], "tags": [], "owner": {"reputation": 6581, "user_id": 3765319, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1262dca6cd7334e5eb75649272eea20d?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/3765319/kartik"}, "is_accepted": false, "score": 12, "last_activity_date": 1470871113, "last_edit_date": 1495539863, "creation_date": 1470871113, "answer_id": 38885028, "question_id": 38884466, "link": "https://stackoverflow.com/questions/38884466/how-to-select-a-range-of-values-in-a-pandas-dataframe-column/38885028#38885028", "title": "How to select a range of values in a pandas dataframe column?", "body": "<p><code>.between</code> is a good solution, but if you want finer control use this:</p>\n\n<pre><code>(0.5 &lt;= df['two']) &amp; (df['two'] &lt; 0.5)\n</code></pre>\n\n<p>The operator <code>&amp;</code> is different from <code>and</code>. The other operators are <code>|</code> for <code>or</code>, <code>~</code> for <code>not</code>. See <a href=\"https://stackoverflow.com/questions/21415661/logic-operator-for-boolean-indexing-in-pandas\">this discussion</a> for more info.</p>\n\n<p>Your statement was the same as this:</p>\n\n<pre><code>(0.5 &lt;= df['two']) and (df['two'] &lt; 0.5)\n</code></pre>\n\n<p>Hence it raised the error.</p>\n"}], "owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87187, "favorite_count": 6, "accepted_answer_id": 38884502, "answer_count": 2, "score": 32, "last_activity_date": 1602568131, "creation_date": 1470867465, "last_edit_date": 1470868137, "question_id": 38884466, "link": "https://stackoverflow.com/questions/38884466/how-to-select-a-range-of-values-in-a-pandas-dataframe-column", "title": "How to select a range of values in a pandas dataframe column?", "body": "<pre><code>import pandas as pd\nimport numpy as np\ndata = 'filename.csv'\ndf = pd.DataFrame(data)\ndf \n\n        one       two     three  four   five\na  0.469112 -0.282863 -1.509059  bar   True\nb  0.932424  1.224234  7.823421  bar  False\nc -1.135632  1.212112 -0.173215  bar  False\nd  0.232424  2.342112  0.982342  unbar True\ne  0.119209 -1.044236 -0.861849  bar   True\nf -2.104569 -0.494929  1.071804  bar  False\n</code></pre>\n\n<p>I would like to select a range for a certain column, let's say column <code>two</code>. I would like to select all values between -0.5 and +0.5. How does one do this? </p>\n\n<p>I expected to use </p>\n\n<pre><code>-0.5 &lt; df[\"two\"] &lt; 0.5\n</code></pre>\n\n<p>But this (naturally) gives a ValueError: </p>\n\n<pre><code>ValueError: The truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().\n</code></pre>\n\n<p>I tried </p>\n\n<pre><code>-0.5 (&lt; df[\"two\"] &lt; 0.5)\n</code></pre>\n\n<p>But this outputs all <code>True</code>. </p>\n\n<p>The correct output should be </p>\n\n<pre><code>0    True\n1    False\n2    False\n3    False\n4    False\n5    True\n</code></pre>\n\n<p>What is the correct way to find a range of values in a pandas dataframe column?</p>\n\n<p>EDIT: Question</p>\n\n<p>Using <code>.between()</code> with </p>\n\n<pre><code>df['two'].between(-0.5, 0.5, inclusive=False)\n</code></pre>\n\n<p>would would be the difference between </p>\n\n<pre><code> -0.5 &lt; df['two'] &lt; 0.5\n</code></pre>\n\n<p>and inequalities like </p>\n\n<pre><code> -0.5 =&lt; df['two'] &lt; 0.5\n</code></pre>\n\n<p>?</p>\n"}, {"tags": ["python", "scala", "hl7-fhir", "hapi-fhir"], "answers": [{"comments": [{"owner": {"reputation": 1273, "user_id": 4713504, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2ee302f694cc906a9266531ba866ac5e?s=128&d=identicon&r=PG&f=1", "display_name": "Pylander", "link": "https://stackoverflow.com/users/4713504/pylander"}, "edited": false, "score": 0, "creation_date": 1471114097, "post_id": 38926588, "comment_id": 65227752, "body": "Yes, exactly!  That is what I ended up discovering myself.  That returned a collection bundle of all patient resources by patient."}], "tags": [], "owner": {"reputation": 3095, "user_id": 1229969, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4e4c4f031f85f6655763c7cdec79758c?s=128&d=identicon&r=PG", "display_name": "Grahame Grieve", "link": "https://stackoverflow.com/users/1229969/grahame-grieve"}, "is_accepted": true, "score": 2, "last_activity_date": 1471036650, "creation_date": 1471036650, "answer_id": 38926588, "question_id": 38884465, "link": "https://stackoverflow.com/questions/38884465/hapi-fhir-patient-bundle-request/38926588#38926588", "title": "HAPI FHIR Patient Bundle Request", "body": "<p>it sounds like you want Patient/$everything (see <a href=\"http://hl7.org/fhir/patient-operations.html#everything\" rel=\"nofollow\">http://hl7.org/fhir/patient-operations.html#everything</a>) (though not all servers support that operation)</p>\n"}, {"tags": [], "owner": {"reputation": 95, "user_id": 2888771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b920eaa5a06a5c4df7be9f6a365c8595?s=128&d=identicon&r=PG&f=1", "display_name": "PK.Shrestha", "link": "https://stackoverflow.com/users/2888771/pk-shrestha"}, "is_accepted": false, "score": 1, "last_activity_date": 1479799173, "last_edit_date": 1479799173, "creation_date": 1479797163, "answer_id": 40735419, "question_id": 38884465, "link": "https://stackoverflow.com/questions/38884465/hapi-fhir-patient-bundle-request/40735419#40735419", "title": "HAPI FHIR Patient Bundle Request", "body": "<p>A Bundle resource in FHIR could be used to bundle the Resources like condition, encounters, Observations, patient etc.</p>\n\n<pre><code>//Example scala pseudo code\n//For each of your FHIR resources, add them to a new Entry in your Bundle\n// Create a new Patient\nval patient = new Patient()\n// Add the patient name\npatient.addName()\n .addGiven(\"Bender Bending\")\n .addFamily(\"Rodriguez\")\n//similarly you can create observation and condition object. \n\n//Every Bundle *must* contain a Patient resource\nbundle.addEntry().setResource(patient)\nbundle.addEntry().setResource(observation)\nbundle.addEntry().setResource(condition)\nbundle.setType(BundleTypeEnum.COLLECTION)\nFhirContext ourCtx = FhirContext.forDstu3();\nString output =ourCtx.newJsonParser().setPrettyPrint(true).encodeResourceToString(bundle);\n\n// output will contain the JSON created from the bundle. more details on how \n</code></pre>\n\n<p>the JSON will look like are provided below. \nExample: \nBundle JSON hierarchy: \nBundle \n  Entry: \n       Resource-type = Condition \n       Resource-type = Observation\n       Resource-type = Patient</p>\n\n<p><a href=\"http://fhirtest.uhn.ca/baseDstu2/Bundle/320d7908-d1ae-48aa-b055-94561076b945\" rel=\"nofollow noreferrer\">Json representation of Bundle</a></p>\n\n<p>This is supported both in DSTU2 and DSTU3 however i couldn't find a suitable json in the test server for DSTU3, that's the only reason i pasted DSTU2 test server link. </p>\n\n<p>The Bundle structures the entries as <a href=\"https://i.stack.imgur.com/b3Kpp.png\" rel=\"nofollow noreferrer\">shown in this snap.</a></p>\n\n<p><a href=\"http://hl7.org/fhir/2016Sep/bundle.html\" rel=\"nofollow noreferrer\">More details on Bundle</a></p>\n"}], "owner": {"reputation": 1273, "user_id": 4713504, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2ee302f694cc906a9266531ba866ac5e?s=128&d=identicon&r=PG&f=1", "display_name": "Pylander", "link": "https://stackoverflow.com/users/4713504/pylander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1601, "favorite_count": 1, "accepted_answer_id": 38926588, "answer_count": 2, "score": 1, "last_activity_date": 1479799173, "creation_date": 1470867465, "last_edit_date": 1470868153, "question_id": 38884465, "link": "https://stackoverflow.com/questions/38884465/hapi-fhir-patient-bundle-request", "title": "HAPI FHIR Patient Bundle Request", "body": "<p>I am working with a HAPI FHIR Server and am somewhat new to the java client.  What I am hoping to accomplish is to create FHIR Patient Bundles that include a single identifying patient resource and all of their other resources in one complete bundle and to save it as a json file.  </p>\n\n<pre><code>Patient Resource 1\nObservation Resource 1\nCondition Resource 1\nLab Resource 1\nObservation Resource 2\n...\n</code></pre>\n\n<p>I come from a python background so if it would be more simple to do as request or curl to iterate through the right endpoint for the patients that would be welcome as well.  This is a one-time process.  If their are alternatives that are more transactional that would be great as well.  Any advice is sincerely appreciated!</p>\n"}, {"tags": ["python", "matplotlib", "plot", "seaborn"], "comments": [{"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 1, "creation_date": 1470867197, "post_id": 38884400, "comment_id": 65129580, "body": "markers are simply bitmaps; they don&#39;t get drawn as polygons, usually"}, {"owner": {"reputation": 1169, "user_id": 3407933, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/TACR2.png?s=128&g=1", "display_name": "spacetyper", "link": "https://stackoverflow.com/users/3407933/spacetyper"}, "reply_to_user": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1470867770, "post_id": 38884400, "comment_id": 65129770, "body": "@MarcusM&#252;ller Can you elaborate on that? My understanding was that markers were vector drawn just like any other plot element. Is that not the case? And if they are bitmaps, why does that preclude them from being filled here? If I were just doing <code>mpl.scatter()</code> I could use <code>fillstyle=&#39;none&#39;</code>, yes?"}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1470867844, "post_id": 38884400, "comment_id": 65129791, "body": "no, you can&#39;t. the markers are just copied pixel-wise from a mask."}, {"owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 0, "creation_date": 1470935499, "post_id": 38884400, "comment_id": 65163409, "body": "<i>If I were just doing mpl.scatter() I could use fillstyle=&#39;none&#39;, yes?</i> I don&#39;t think you could. Test it out."}, {"owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 0, "creation_date": 1470935542, "post_id": 38884400, "comment_id": 65163444, "body": "also, what you probably want is <code>{&#39;markerfacecolor&#39;: &#39;none&#39;}</code>"}, {"owner": {"reputation": 1169, "user_id": 3407933, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/TACR2.png?s=128&g=1", "display_name": "spacetyper", "link": "https://stackoverflow.com/users/3407933/spacetyper"}, "reply_to_user": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 0, "creation_date": 1470935945, "post_id": 38884400, "comment_id": 65163670, "body": "@PaulH Thanks! You helped lead me in the right direction. <code>&#39;markerfacecolor&#39;</code> isn&#39;t a valid keyword for <code>plt.scatter</code>, but <code>&#39;facecolors&#39;</code> is! So I can do what I wanted to do with <code>&#39;facecolors&#39;</code>. I wish there was more consistency between keyword names in matplotlib..."}, {"owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 0, "creation_date": 1470936004, "post_id": 38884400, "comment_id": 65163704, "body": "Ahh. That&#39;s why I just always use <code>plot</code> instead of <code>scatter</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1169, "user_id": 3407933, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/TACR2.png?s=128&g=1", "display_name": "spacetyper", "link": "https://stackoverflow.com/users/3407933/spacetyper"}, "is_accepted": false, "score": 2, "last_activity_date": 1470936206, "creation_date": 1470936206, "answer_id": 38902583, "question_id": 38884400, "link": "https://stackoverflow.com/questions/38884400/how-to-change-marker-fillstyle-in-seaborn-lmplot/38902583#38902583", "title": "How to change marker fillstyle in seaborn lmplot?", "body": "<p>You can't use <code>'fillstyle':'none'</code> as a <code>scatter_kw</code> argument, but you can accomplish what you're trying to do with <code>'facecolors'</code>.</p>\n\n<pre><code>sns.lmplot(x=x, \n           y=y, \n           hue=hue, \n           hue_order = hue_order,\n           markers=markers,\n           scatter_kws = {'facecolors':'none'})\n</code></pre>\n\n<p>See the <a href=\"http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.scatter\" rel=\"nofollow\">matplotlib.pyplot.scatter</a> docs for more info.</p>\n"}], "owner": {"reputation": 1169, "user_id": 3407933, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/TACR2.png?s=128&g=1", "display_name": "spacetyper", "link": "https://stackoverflow.com/users/3407933/spacetyper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2786, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1470936206, "creation_date": 1470867090, "question_id": 38884400, "link": "https://stackoverflow.com/questions/38884400/how-to-change-marker-fillstyle-in-seaborn-lmplot", "title": "How to change marker fillstyle in seaborn lmplot?", "body": "<p>Is it possible to change the fillstyle of a scatterplot marker in a seaborn lmplot?</p>\n\n<p>I tried: `</p>\n\n<pre><code>sns.lmplot(x=x, \n           y=y, \n           hue=hue, \n           hue_order = hue_order,\n           markers=markers,\n           scatter_kws = {'fillstyle':'none'})\n</code></pre>\n\n<p>But I get the error:</p>\n\n<pre><code>AttributeError: Unknown property fillstyle\n</code></pre>\n\n<p>Is fillstyle really not supported for an lmplot <code>scatter_kws</code> argument, or am I just doing something wrong?</p>\n"}, {"tags": ["python", "python-2.7", "csv"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1470867258, "post_id": 38884380, "comment_id": 65129605, "body": "That is a really misleading error message."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 6679887, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/424601c5e7070f283e38ee60d930f0b3?s=128&d=identicon&r=PG&f=1", "display_name": "Danny Bolland", "link": "https://stackoverflow.com/users/6679887/danny-bolland"}, "edited": false, "score": 0, "creation_date": 1470868612, "post_id": 38884403, "comment_id": 65130003, "body": "amen your eyes! Thanks!"}], "tags": [], "owner": {"reputation": 1525, "user_id": 6664393, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe985e0b1cf77b72acb4e0058029acda?s=128&d=identicon&r=PG&f=1", "display_name": "user357269", "link": "https://stackoverflow.com/users/6664393/user357269"}, "is_accepted": true, "score": 3, "last_activity_date": 1470867109, "creation_date": 1470867109, "answer_id": 38884403, "question_id": 38884380, "link": "https://stackoverflow.com/questions/38884380/typeerror-argument-of-type-file-is-not-iterable-2-7-python/38884403#38884403", "title": "TypeError: argument of type &#39;file&#39; is not iterable 2.7 python", "body": "<p>Write <code>as csvfile</code> not <code>in csvfile</code> on line 21.</p>\n\n<p>The <code>in</code> keyword in python is followed by an iterable, that's why you're getting that error message.</p>\n"}], "owner": {"reputation": 33, "user_id": 6679887, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/424601c5e7070f283e38ee60d930f0b3?s=128&d=identicon&r=PG&f=1", "display_name": "Danny Bolland", "link": "https://stackoverflow.com/users/6679887/danny-bolland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 865, "favorite_count": 0, "accepted_answer_id": 38884403, "answer_count": 1, "score": 1, "last_activity_date": 1470867109, "creation_date": 1470867002, "question_id": 38884380, "link": "https://stackoverflow.com/questions/38884380/typeerror-argument-of-type-file-is-not-iterable-2-7-python", "title": "TypeError: argument of type &#39;file&#39; is not iterable 2.7 python", "body": "<p>I'm trying to create and write an existing dictionary to a csv file but I keep getting this error which I can't figure out:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/Users/Danny/Desktop/Inventaris.py\", line 52, in &lt;module&gt;\n    Toevoeging_methode_plus(toevoegproduct, aantaltoevoeging)\n  File \"/Users/Danny/Desktop/Inventaris.py\", line 9, in Toevoeging_methode_plus\n    writecolumbs()\n  File \"/Users/Danny/Desktop/Inventaris.py\", line 21, in writecolumbs\n    with open(\"variabelen.csv\", \"wb\") in csvfile:\nTypeError: argument of type 'file' is not iterable\n&gt;&gt;&gt; \n</code></pre>\n\n<p>And this is the code that gives me the error:</p>\n\n<pre><code>import csv\nimport os\n\ndef Toevoeging_methode_plus(key_to_find, definition):\n    if key_to_find in a:\n        current = a[key_to_find]\n        newval = int(current) + aantaltoevoeging\n        a[key_to_find] = int(current) + aantaltoevoeging\n        writecolumbs()\n\n\ndef Toevoeging_methode_minus(key_to_find, definition):\n    if key_to_find in a:\n        current = a[key_to_find]\n        newval = int(current) - aantaltoevoeging\n        a[key_to_find] = int(current) - aantaltoevoeging\n        writecolumbs()\n\ndef writecolumbs():\n    os.remove(\"variabelen.csv\")\n    with open(\"variabelen.csv\", \"wb\") in csvfile:\n        spamwriter = csv.writer(csvfile, delimiter=' ',\n                            quotechar='|', quoting=csv.QUOTE_MINIMAL)\n        spamwriter.writerow(\"Product\", \"Aantal\")\n        spamwriter.writerows(a)  \n\n\na = {}\n\n\nwith open(\"variabelen.csv\") as csvfile:\n    reader = csv.DictReader(csvfile)\n    for row in reader:\n        a[row['Product']] = row['Aantal']\n        print a\n\nprint(\"\"\"\n1. Toevoegen\n2. Aftrek\n3. Check\n\"\"\")\naskmenu = int(raw_input(\"Menu Nummer? \"))\nif askmenu is 1:\n    toevoegproduct = raw_input(\"Productnummer &gt; \")\n    aantaltoevoeging = int(raw_input(\"Hoeveel &gt; \"))\n    Toevoeging_methode_plus(toevoegproduct, aantaltoevoeging)\n    print a\n\nelif askmenu is 2:\n    toevoegproduct = raw_input(\"Productnummer &gt; \")\n    aantaltoevoeging = int(raw_input(\"Hoeveel &gt; \"))\n    Toevoeging_methode_minus(toevoegproduct, aantaltoevoeging)\n    writecolumbs(toevoegproduct, newval)\n    print a\n\nelif askmenu is 3:\n    checknummer = raw_input(\"Productnummer &gt; \")\n    if checknummer in a:\n        print a[checknummer]\n\nelse:\n    print \"oops\"\n</code></pre>\n\n<p>The csv file contains this information currently:\nProduct Aantal\n233     60\n2234    1</p>\n"}, {"tags": ["python", "csv", "row"], "comments": [{"owner": {"reputation": 1525, "user_id": 6664393, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe985e0b1cf77b72acb4e0058029acda?s=128&d=identicon&r=PG&f=1", "display_name": "user357269", "link": "https://stackoverflow.com/users/6664393/user357269"}, "edited": false, "score": 0, "creation_date": 1470867486, "post_id": 38884335, "comment_id": 65129679, "body": "I like that you added the &quot;row&quot; tag. Good to know that this is not a question about columns"}], "owner": {"reputation": 13, "user_id": 6570767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E7ZRm.jpg?s=128&g=1", "display_name": "user6570767", "link": "https://stackoverflow.com/users/6570767/user6570767"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 339, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1470866744, "creation_date": 1470866744, "question_id": 38884335, "link": "https://stackoverflow.com/questions/38884335/python-dictreader-find-if-specific-key-value-in-a-row-is-not-found", "title": "Python DictReader -- find if specific key value in a row is not found", "body": "<p>I am working on a function to pull out of CSV specific rows. Every CSV row has a unique ID that identifies it to the function. Some IDs are missing. I want to somehow find after iterating these invalid IDs. </p>\n\n<p>Example:</p>\n\n<p>(a sample CSV <a href=\"http://pastebin.com/rVu8jVkj\" rel=\"nofollow\" title=\"db_short.csv\">db_short.csv</a> with rows 1-52 and then 99)</p>\n\n<pre><code>import csv\n\ndef get_row(csvfile, row_id):\n    with open(csvfile, 'rb') as csvfile:\n        newfile = csv.DictReader(csvfile, delimiter=',', quotechar='|')\n        somevalue = 'default'\n        for row in newfile:\n            if row['id'] == str(row_id):\n                somevalue = 'id = {}'.format(row['id'])\n            else:\n                pass\n        return somevalue\n\ndb = \"db_short.csv\"\nflatlist = [1, 18, 42, 51, 53, 99]\n\nnew_entries = []\n\nfor i in flatlist:\n    new_entries.append(get_row(db, i))\nprint new_entries\n</code></pre>\n\n<p>Note that flatlist includes a deliberately missing ID 53. This code predictably produces output where search for 'id' : 53' returns 'default'. </p>\n\n<pre><code>['id = 1', 'id = 18', 'id = 42', 'id = 51', 'default', 'id = 99']\n</code></pre>\n\n<p>I would however like to replace somevalue = 'default' with, say, a customized message alerting to a missing ID, that will only appear if DictReader went through the whole CSV and did not find any row that contains 'id' : '53' -- . </p>\n\n<pre><code>somevalue = '{} id missing!'.format(row_id)\n</code></pre>\n\n<p>So how do I have to change my code?</p>\n"}, {"tags": ["python", "json", "git", "file", "python-3.x"], "comments": [{"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1470866977, "post_id": 38884325, "comment_id": 65129517, "body": "Try <code>json.dumps(..., indent=4)</code> perhaps?"}, {"owner": {"reputation": 120, "user_id": 3572680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25b8473bd06bb555ceda08a0f65a4b11?s=128&d=identicon&r=PG&f=1", "display_name": "Anubis", "link": "https://stackoverflow.com/users/3572680/anubis"}, "edited": false, "score": 0, "creation_date": 1470867450, "post_id": 38884325, "comment_id": 65129665, "body": "I think the term generally used is pretify lots of ways of doing it. Try the above first otherwise some js function will do it for sure."}, {"owner": {"reputation": 511, "user_id": 819879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/988d894a63c02fc8848bb1515901ec89?s=128&d=identicon&r=PG", "display_name": "tsvenson", "link": "https://stackoverflow.com/users/819879/tsvenson"}, "reply_to_user": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1470897619, "post_id": 38884325, "comment_id": 65138140, "body": "Thanks, will try @Blckknght&#39;s suggestion first."}], "owner": {"reputation": 511, "user_id": 819879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/988d894a63c02fc8848bb1515901ec89?s=128&d=identicon&r=PG", "display_name": "tsvenson", "link": "https://stackoverflow.com/users/819879/tsvenson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1470866691, "creation_date": 1470866691, "question_id": 38884325, "link": "https://stackoverflow.com/questions/38884325/save-formatted-not-serialize-json-to-disk-to-use-git-for-storage", "title": "Save formatted (not serialize) json to disk to use git for storage", "body": "<p>In working on a project where I will be using <code>OrderDict</code> to store the data the code will be working on.</p>\n\n<p>However, I also want to save many of these <code>OrderDrict</code> as well as .json-files, and to to commit them to a git-enabled content repository.</p>\n\n<p>But, since <code>json.dumps</code> just serializes and in effect place the JSON content on one line, it will make it tricky to track the difference between committed versions in a visually appealing way for users.</p>\n\n<p>Is there a way to make <code>json</code> output better readable formatting, with indents and line feeds so the output-file can be easy to read, as well as taking better use of gits version and diff features?</p>\n\n<p>Or are there any 3rd party libraries, preferable with Python 3.5 support, out there I've missed?</p>\n"}, {"tags": ["python", "http", "post", "curl", "pycurl"], "answers": [{"tags": [], "owner": {"reputation": 43751, "user_id": 93747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf187b5b45c400649ed7f946e8f00d6?s=128&d=identicon&r=PG", "display_name": "Daniel Stenberg", "link": "https://stackoverflow.com/users/93747/daniel-stenberg"}, "is_accepted": true, "score": 0, "last_activity_date": 1470868685, "creation_date": 1470868685, "answer_id": 38884682, "question_id": 38884321, "link": "https://stackoverflow.com/questions/38884321/non-multi-part-post-using-pycurl/38884682#38884682", "title": "Non multi part post using pycurl", "body": "<p>A POST certainly doesn't have to be multipart, see <a href=\"http://pycurl.io/docs/latest/quickstart.html#sending-form-data\" rel=\"nofollow\">this example</a> from the pycurl docs that I also paste here:</p>\n\n<pre><code>c = pycurl.Curl()\nc.setopt(c.URL, 'http://pycurl.io/tests/testpostvars.php')\n\npost_data = {'field': 'value'}\n# Form data must be provided already urlencoded.\npostfields = urlencode(post_data)\n# Sets request method to POST,\n# Content-Type header to application/x-www-form-urlencoded\n# and data to send in request body.\nc.setopt(c.POSTFIELDS, postfields)\n\nc.perform()\nc.close()\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5415371"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 38884682, "answer_count": 1, "score": 0, "last_activity_date": 1470868685, "creation_date": 1470866662, "question_id": 38884321, "link": "https://stackoverflow.com/questions/38884321/non-multi-part-post-using-pycurl", "title": "Non multi part post using pycurl", "body": "<p>I am unable to post data to a rest server because the server doesn't know how to handle a multi part post requests,and it throws an error when it encounters a boundary. \nIs there a way to make a non multi part post in pycurl?\nWhy does a post request need to be multi part?</p>\n"}, {"tags": ["python", "python-xarray"], "answers": [{"tags": [], "owner": {"reputation": 7287, "user_id": 809705, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/93a76a800ef6c5919baa8ba91120ee98?s=128&d=identicon&r=PG", "display_name": "shoyer", "link": "https://stackoverflow.com/users/809705/shoyer"}, "is_accepted": false, "score": 4, "last_activity_date": 1470868216, "creation_date": 1470868216, "answer_id": 38884577, "question_id": 38884283, "link": "https://stackoverflow.com/questions/38884283/concise-way-to-filter-data-in-xarray/38884577#38884577", "title": "Concise way to filter data in xarray", "body": "<p>If you are happy to load your data in-memory as a NumPy array, you can modify the DataArray values in place with NumPy:</p>\n\n<pre><code>date_by_items.values[date_by_items.values &gt; 0] = 2\n</code></pre>\n\n<p>The cleanest way to handle this would be if xarray supported the <code>other</code> argument to <code>where</code>, but we haven't implemented that yet (hopefully soon -- the groundwork has been laid!). When that works, you'll be able to write <code>date_by_items.where(date_by_items &gt; 0, 2)</code>.</p>\n\n<p>Either way, you'll need to do this twice to apply both your criteria.</p>\n"}, {"tags": [], "owner": {"reputation": 4534, "user_id": 3064736, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/wuMUa.jpg?s=128&g=1", "display_name": "Maximilian", "link": "https://stackoverflow.com/users/3064736/maximilian"}, "is_accepted": true, "score": 11, "last_activity_date": 1521845895, "last_edit_date": 1521845895, "creation_date": 1521782322, "answer_id": 49442830, "question_id": 38884283, "link": "https://stackoverflow.com/questions/38884283/concise-way-to-filter-data-in-xarray/49442830#49442830", "title": "Concise way to filter data in xarray", "body": "<p>xarray now supports <code>.where(condition, other)</code>, so this is now valid:</p>\n\n<pre><code>result = date_by_items.where(date_by_items &gt; 0, 2)\n</code></pre>\n"}], "owner": {"reputation": 4534, "user_id": 3064736, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/wuMUa.jpg?s=128&g=1", "display_name": "Maximilian", "link": "https://stackoverflow.com/users/3064736/maximilian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3514, "favorite_count": 3, "accepted_answer_id": 49442830, "answer_count": 2, "score": 12, "last_activity_date": 1521845895, "creation_date": 1470866483, "question_id": 38884283, "link": "https://stackoverflow.com/questions/38884283/concise-way-to-filter-data-in-xarray", "title": "Concise way to filter data in xarray", "body": "<p>I need to apply a very simple 'match statement' to the values in an xarray array:</p>\n\n<ol>\n<li>Where the value > 0, make 2</li>\n<li>Where the value == 0, make 0</li>\n<li>Where the value is <code>NaN</code>, make <code>NaN</code></li>\n</ol>\n\n<p>Here's my current solution. I'm using <code>NaN</code>s, <code>.fillna</code>, &amp; type coercion in lieu of 2d indexing.</p>\n\n<pre><code>valid = date_by_items.notnull()\npositive = date_by_items &gt; 0\npositive = positive * 2\nresult = positive.fillna(0.).where(valid)\nresult\n</code></pre>\n\n<p>This changes this:</p>\n\n<pre><code>In [20]: date_by_items = xr.DataArray(np.asarray((list(range(3)) * 10)).reshape(6,5), dims=('date','item'))\n    ...: date_by_items\n    ...: \nOut[20]: \n&lt;xarray.DataArray (date: 6, item: 5)&gt;\narray([[0, 1, 2, 0, 1],\n       [2, 0, 1, 2, 0],\n       [1, 2, 0, 1, 2],\n       [0, 1, 2, 0, 1],\n       [2, 0, 1, 2, 0],\n       [1, 2, 0, 1, 2]])\nCoordinates:\n  * date     (date) int64 0 1 2 3 4 5\n  * item     (item) int64 0 1 2 3 4\n</code></pre>\n\n<p>... to this:</p>\n\n<pre><code>Out[22]: \n&lt;xarray.DataArray (date: 6, item: 5)&gt;\narray([[ 0.,  2.,  2.,  0.,  2.],\n       [ 2.,  0.,  2.,  2.,  0.],\n       [ 2.,  2.,  0.,  2.,  2.],\n       [ 0.,  2.,  2.,  0.,  2.],\n       [ 2.,  0.,  2.,  2.,  0.],\n       [ 2.,  2.,  0.,  2.,  2.]])\nCoordinates:\n  * date     (date) int64 0 1 2 3 4 5\n  * item     (item) int64 0 1 2 3 4\n</code></pre>\n\n<p>While in pandas <code>df[df&gt;0] = 2</code> would be enough. Surely I'm doing something pedestrian and there's an terser way?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1854, "user_id": 6539544, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0075a1be0f17b9ac03dbb0b9b27d5aab?s=128&d=identicon&r=PG&f=1", "display_name": "Vaibhav Bajaj", "link": "https://stackoverflow.com/users/6539544/vaibhav-bajaj"}, "edited": false, "score": 0, "creation_date": 1470866523, "post_id": 38884230, "comment_id": 65129372, "body": "Plz show <code>open_tag</code> declaration and <code>kv</code> declaration"}, {"owner": {"reputation": 81481, "user_id": 359862, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ad22374c2202ffcc12b2fdc0e801119d?s=128&d=identicon&r=PG", "display_name": "James Raitsev", "link": "https://stackoverflow.com/users/359862/james-raitsev"}, "reply_to_user": {"reputation": 1854, "user_id": 6539544, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0075a1be0f17b9ac03dbb0b9b27d5aab?s=128&d=identicon&r=PG&f=1", "display_name": "Vaibhav Bajaj", "link": "https://stackoverflow.com/users/6539544/vaibhav-bajaj"}, "edited": false, "score": 0, "creation_date": 1470866606, "post_id": 38884230, "comment_id": 65129404, "body": "@VaibhavBajaj - updated"}, {"owner": {"reputation": 1854, "user_id": 6539544, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0075a1be0f17b9ac03dbb0b9b27d5aab?s=128&d=identicon&r=PG&f=1", "display_name": "Vaibhav Bajaj", "link": "https://stackoverflow.com/users/6539544/vaibhav-bajaj"}, "edited": false, "score": 0, "creation_date": 1470866773, "post_id": 38884230, "comment_id": 65129449, "body": "Are you sure open_tag does not get the value <code>None</code> for some reason when called from another file in the declaration?"}, {"owner": {"reputation": 81481, "user_id": 359862, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ad22374c2202ffcc12b2fdc0e801119d?s=128&d=identicon&r=PG", "display_name": "James Raitsev", "link": "https://stackoverflow.com/users/359862/james-raitsev"}, "reply_to_user": {"reputation": 1854, "user_id": 6539544, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0075a1be0f17b9ac03dbb0b9b27d5aab?s=128&d=identicon&r=PG&f=1", "display_name": "Vaibhav Bajaj", "link": "https://stackoverflow.com/users/6539544/vaibhav-bajaj"}, "edited": false, "score": 0, "creation_date": 1470866829, "post_id": 38884230, "comment_id": 65129467, "body": "@VaibhavBajaj. Yes 100% sure. Driven by the test, results are being printed in main code, but not in test. Additionally, same results are being printed for <code>crumb</code> in both places"}], "answers": [{"comments": [{"owner": {"reputation": 4955, "user_id": 5274205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a281a1418dbceeda34cc93d3744554?s=128&d=identicon&r=PG", "display_name": "Chad S.", "link": "https://stackoverflow.com/users/5274205/chad-s"}, "edited": false, "score": 0, "creation_date": 1470867174, "post_id": 38884348, "comment_id": 65129574, "body": "You didn&#39;t <code>import A</code> as the answer suggested you should."}, {"owner": {"reputation": 81481, "user_id": 359862, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ad22374c2202ffcc12b2fdc0e801119d?s=128&d=identicon&r=PG", "display_name": "James Raitsev", "link": "https://stackoverflow.com/users/359862/james-raitsev"}, "edited": false, "score": 0, "creation_date": 1470867257, "post_id": 38884348, "comment_id": 65129604, "body": "Thank you so much. This is great"}], "tags": [], "owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "is_accepted": true, "score": 5, "last_activity_date": 1470868440, "last_edit_date": 1470868440, "creation_date": 1470866779, "answer_id": 38884348, "question_id": 38884230, "link": "https://stackoverflow.com/questions/38884230/accessing-global-variables-from-test-file/38884348#38884348", "title": "Accessing global variables from test file", "body": "<p>In short, it's because <code>+=</code> does different things for lists and strings.</p>\n\n<ul>\n<li><p>Strings are immutable. Therefore, <code>root += ...</code> in your <em>A.py</em> creates a new string and assigns it to <code>root</code>. There were two references to <code>root</code>: one in <em>A.py</em> and one in your test script. The <code>root +=</code> line changes only <code>root</code> in <em>A.py</em> since that's the only one that a function in <em>A.py</em> has access to. The <code>root</code> in your test module is not changed.</p></li>\n<li><p>Lists are mutable. Therefore, <code>crumbs +=</code> modifies the <em>existing</em> list, and doesn't change what <code>crumbs</code> points to. Since <code>crumbs</code> still refers to the same list in both <em>A.py</em> and in your test module, you see the change in your test module.</p></li>\n</ul>\n\n<p>It becomes clearer if you write these statements without <code>+=</code>:</p>\n\n<ul>\n<li><code>root = root + ...</code> obviously makes a new string and changes <code>root</code> to point to it</li>\n<li><code>crumbs.extend(...)</code> obviously <em>does not</em> make a new list and does not change what <code>crumbs</code> points to</li>\n</ul>\n\n<p>This little bit of confusion can arise when you try to access variables between modules without using fully qualified names. You end up with multiple names that initially (following the <code>import</code>) refer to the same object, but later something changes this.</p>\n\n<p>The solution is just to <code>import A</code> and refer to <code>A.root</code> and <code>A.crumbs</code> in your test script. That way there is only one canonical name for those objects, and the names are \"owned\" by the module that changes them.</p>\n"}], "owner": {"reputation": 81481, "user_id": 359862, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ad22374c2202ffcc12b2fdc0e801119d?s=128&d=identicon&r=PG", "display_name": "James Raitsev", "link": "https://stackoverflow.com/users/359862/james-raitsev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 38884348, "answer_count": 1, "score": 0, "last_activity_date": 1470868440, "creation_date": 1470866232, "last_edit_date": 1470866596, "question_id": 38884230, "link": "https://stackoverflow.com/questions/38884230/accessing-global-variables-from-test-file", "title": "Accessing global variables from test file", "body": "<p>I have a file A with 2 global variables</p>\n\n<pre><code>root = \"\"\ncrumbs = []\n\n\ndef read(line):\n    global root, crumbs\n\n    line = line.strip()\n    open_tag = is_valid_open(line)\n    kv = get_kv(line)\n\n    if open_tag is not None:\n        root += open_tag + \".\"\n        print root                      &lt;---------- prints stuff\n\n    elif kv is not None:\n        crumbs.append(kv[0] + \"=\" + kv[1])\n        print crumbs                   &lt;---------- prints stuff\n</code></pre>\n\n<p>I have a test from which I </p>\n\n<pre><code>from A import read, root, crumbs\n</code></pre>\n\n<p>I feed it some data</p>\n\n<pre><code>    read('&lt;a&gt;')\n    read('&lt;b&gt;')\n    read('&lt;d&gt;acceptor&lt;/d&gt;')\n</code></pre>\n\n<p>And print the results</p>\n\n<pre><code>    print \".\" + root + \".\"             &lt;---------- prints NOTHING\n    print \".\" + str(crumbs) + \".\"      &lt;---------- prints stuff\n</code></pre>\n\n<p>Why do I have access to the list but not String from my test file? Seems like if one works other one should work as well.</p>\n"}, {"tags": ["python", "sql", "impala"], "answers": [{"comments": [{"owner": {"reputation": 17078, "user_id": 3993270, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/1bee661ad7451ff3107ca6954560a06c?s=128&d=identicon&r=PG&f=1", "display_name": "Edamame", "link": "https://stackoverflow.com/users/3993270/edamame"}, "edited": false, "score": 0, "creation_date": 1470866647, "post_id": 38884244, "comment_id": 65129417, "body": "Yes, thanks! But just for example purpose, is two separated queries possible? Thanks!"}, {"owner": {"reputation": 60275, "user_id": 1073631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12b7f78513c544111980c6308b25a4ed?s=128&d=identicon&r=PG", "display_name": "sgeddes", "link": "https://stackoverflow.com/users/1073631/sgeddes"}, "reply_to_user": {"reputation": 17078, "user_id": 3993270, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/1bee661ad7451ff3107ca6954560a06c?s=128&d=identicon&r=PG&f=1", "display_name": "Edamame", "link": "https://stackoverflow.com/users/3993270/edamame"}, "edited": false, "score": 0, "creation_date": 1470867007, "post_id": 38884244, "comment_id": 65129527, "body": "@Edamame -- you could technically write a separate query using a  <code>common table expression</code>, but I&#39;m not sure why that would be helpful.  In your above example, those 2 &quot;queries&quot; are just strings so you could keep them separated and concatonate the strings together before executing them."}, {"owner": {"reputation": 17078, "user_id": 3993270, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/1bee661ad7451ff3107ca6954560a06c?s=128&d=identicon&r=PG&f=1", "display_name": "Edamame", "link": "https://stackoverflow.com/users/3993270/edamame"}, "edited": false, "score": 0, "creation_date": 1470868006, "post_id": 38884244, "comment_id": 65129850, "body": "thanks! Is it possible to make the first query to make the table_1, then make the second query on table_2? Is it the common table expression? how does it work exactly? Thanks!"}], "tags": [], "owner": {"reputation": 60275, "user_id": 1073631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12b7f78513c544111980c6308b25a4ed?s=128&d=identicon&r=PG", "display_name": "sgeddes", "link": "https://stackoverflow.com/users/1073631/sgeddes"}, "is_accepted": false, "score": 1, "last_activity_date": 1470866281, "creation_date": 1470866281, "answer_id": 38884244, "question_id": 38884203, "link": "https://stackoverflow.com/questions/38884203/sql-impala-breaking-the-nested-query-into-a-more-readable-format/38884244#38884244", "title": "SQL/Impala Breaking the nested query into a more readable format", "body": "<p>Unless I'm misunderstanding something, there's no need for the subquery at all, just move the <code>where</code> criteria to the main query:</p>\n\n<pre><code>select my_c_instance_id, count(my_c_instance_id) as my_ins_id_count \nfrom my_table \nwhere my_c_id like '%small%'\ngroup by my_c_instance_id\n</code></pre>\n"}], "owner": {"reputation": 17078, "user_id": 3993270, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/1bee661ad7451ff3107ca6954560a06c?s=128&d=identicon&r=PG&f=1", "display_name": "Edamame", "link": "https://stackoverflow.com/users/3993270/edamame"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470866281, "creation_date": 1470866132, "question_id": 38884203, "link": "https://stackoverflow.com/questions/38884203/sql-impala-breaking-the-nested-query-into-a-more-readable-format", "title": "SQL/Impala Breaking the nested query into a more readable format", "body": "<p>I have the following work python code to do impala connection/query:</p>\n\n<hr>\n\n<pre><code>import pandas as pd\n\n\nquery = 'select my_c_instance_id, count(my_c_instance_id) as my_ins_id_count from ' + \\\n         '(select * from my_table where my_c_id like \"%small%\") as small_table' + \\\n         ' group by(my_c_instance_id)'\ncursor = impala_con.cursor()\ncursor.execute('USE my_db')\ncursor.execute(query)\ndf_result = as_pandas(cursor)\ndf_result\n</code></pre>\n\n<hr>\n\n<p>The codes work fine, but I am wondering if it is possible to break it into two more readable pieces, something like:</p>\n\n<pre><code>small_table = 'select * from my_table where my_c_id like \"%small%\"'\n\nquery = 'select my_c_instance_id, count(my_c_instance_id) as my_ins_id_count from small_table group by(my_c_instance_id)'\n\ncursor = impala_con.cursor()\ncursor.execute('USE my_db')\ncursor.execute(query)\ndf_result = as_pandas(cursor)\ndf_result\n</code></pre>\n\n<p>If possible, how do I make the above idea actually work? Thanks.</p>\n"}, {"tags": ["python", "session", "python-requests"], "comments": [{"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1470866242, "post_id": 38884200, "comment_id": 65129274, "body": "Your <code>s</code> is a class attribute, so it is stored once, on the class.  Google to find gazillions of questions about the difference between class and instance attributes in Python."}, {"owner": {"reputation": 11662, "user_id": 615780, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/459b3f1db3e274dd2ffc36710a99bb8b?s=128&d=identicon&r=PG", "display_name": "codereviewanskquestions", "link": "https://stackoverflow.com/users/615780/codereviewanskquestions"}, "reply_to_user": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1470866353, "post_id": 38884200, "comment_id": 65129321, "body": "ugh .. thanks .. new to python :p"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1470866640, "post_id": 38884200, "comment_id": 65129415, "body": "looks like Java syntax, but it isn&#39;t!"}], "answers": [{"tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": true, "score": 2, "last_activity_date": 1470866220, "creation_date": 1470866220, "answer_id": 38884224, "question_id": 38884200, "link": "https://stackoverflow.com/questions/38884200/one-session-across-multiple-instances-of-a-class/38884224#38884224", "title": "One session across multiple instances of a class", "body": "<p><code>s</code> is a class attribute in your case - it would be initialized once and shared across all class instances. Make the session an <em>instance variable</em> instead:</p>\n\n<pre><code>import requests\n\nclass MyClass(object):\n    def __init__(self):\n        self.s = requests.Session()\n\n    def test(self):\n        print self.s\n</code></pre>\n"}], "owner": {"reputation": 11662, "user_id": 615780, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/459b3f1db3e274dd2ffc36710a99bb8b?s=128&d=identicon&r=PG", "display_name": "codereviewanskquestions", "link": "https://stackoverflow.com/users/615780/codereviewanskquestions"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1269, "favorite_count": 0, "accepted_answer_id": 38884224, "answer_count": 1, "score": 1, "last_activity_date": 1470866220, "creation_date": 1470866117, "question_id": 38884200, "link": "https://stackoverflow.com/questions/38884200/one-session-across-multiple-instances-of-a-class", "title": "One session across multiple instances of a class", "body": "<p>I have MyClass class with Session from <code>requests</code></p>\n\n<pre><code>import requests\n\nclass MyClass(object):\n    s = requests.Session()\n\n    def test(self):\n        print self.s\n</code></pre>\n\n<p>Then I tested </p>\n\n<pre><code>In[3]: a = mymodule.MyClass()\nIn[4]: b = mymodule.MyClass()\nIn[5]: print a\n&lt;mymodule.MyClass object at 0x10e074c50&gt;\nIn[6]: print b\n&lt;mymodule.MyClass object at 0x10e074d10&gt;\nIn[7]: a.test()\n&lt;requests.sessions.Session object at 0x10dbe5550&gt;\nIn[8]: b.test()\n&lt;requests.sessions.Session object at 0x10dbe5550&gt;\n</code></pre>\n\n<p>how is the session object from a and b are the same one? I would expect to have two different sessions created one for a and the other one for b.</p>\n\n<p>I don't think <code>Session</code> is a singleton. As it shows, calling <code>requests.Sessions()</code> twice and two different Session instances created. \nSo why the session in <code>a</code> and <code>b</code> are the same?</p>\n\n<pre><code>In[13]: s1 = requests.Session()\nIn[14]: s2 = requests.Session()\nIn[15]: print s1\n&lt;requests.sessions.Session object at 0x10e089210&gt;\nIn[16]: print s2\n&lt;requests.sessions.Session object at 0x10e089650&gt;\n</code></pre>\n"}, {"tags": ["python", "excel", "pandas"], "comments": [{"owner": {"reputation": 1525, "user_id": 6664393, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe985e0b1cf77b72acb4e0058029acda?s=128&d=identicon&r=PG&f=1", "display_name": "user357269", "link": "https://stackoverflow.com/users/6664393/user357269"}, "edited": false, "score": 0, "creation_date": 1470866154, "post_id": 38884164, "comment_id": 65129238, "body": "You should add the error you&#39;re getting. Does the directory C:\\Users\\Bala\\output\\ exist?"}, {"owner": {"reputation": 293, "user_id": 4168007, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh3.googleusercontent.com/-VNeHMNyDWbU/AAAAAAAAAAI/AAAAAAAABPQ/-fWzsqnIq9M/photo.jpg?sz=128", "display_name": "balakishore nadella", "link": "https://stackoverflow.com/users/4168007/balakishore-nadella"}, "reply_to_user": {"reputation": 1525, "user_id": 6664393, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe985e0b1cf77b72acb4e0058029acda?s=128&d=identicon&r=PG&f=1", "display_name": "user357269", "link": "https://stackoverflow.com/users/6664393/user357269"}, "edited": false, "score": 0, "creation_date": 1470866325, "post_id": 38884164, "comment_id": 65129308, "body": "Yes. That is local directory of my box and it works for to_csv."}], "answers": [{"tags": [], "owner": {"reputation": 1525, "user_id": 6664393, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe985e0b1cf77b72acb4e0058029acda?s=128&d=identicon&r=PG&f=1", "display_name": "user357269", "link": "https://stackoverflow.com/users/6664393/user357269"}, "is_accepted": false, "score": 4, "last_activity_date": 1470866501, "creation_date": 1470866501, "answer_id": 38884287, "question_id": 38884164, "link": "https://stackoverflow.com/questions/38884164/write-dataframe-to-excel-file-at-given-path/38884287#38884287", "title": "write dataframe to excel file at given path", "body": "<p>In a string the backslash is an escape character. It means that you're giving a special command, not a regular character. Eg. <code>\"Hello\\nWorld\"</code> means, put a newline between <code>\"Hello\"</code> and <code>\"World\"</code>.</p>\n\n<p>If you actually want to use a backslash as a character, type it as <code>\"\\\\\"</code>.</p>\n\n<p>Or better yet, just use forward slashes!</p>\n"}, {"comments": [{"owner": {"reputation": 12668, "user_id": 95852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e215c7362074d0346612a10d3a89be9e?s=128&d=identicon&r=PG", "display_name": "John Y", "link": "https://stackoverflow.com/users/95852/john-y"}, "edited": false, "score": 0, "creation_date": 1470955360, "post_id": 38884307, "comment_id": 65172886, "body": "<code>os.path.abspath</code> is a nice function, but you have completely misrepresented what it does. It can&#39;t magically interpret literal backslashes in strings, and it is not at all what is needed here. Honestly, the <b>best</b> solution <b>is</b> to use forward slashes instead of backslashes (even in Windows). If you insist on using backslashes, you should be using <i>raw strings</i>."}, {"owner": {"reputation": 6581, "user_id": 3765319, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1262dca6cd7334e5eb75649272eea20d?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/3765319/kartik"}, "reply_to_user": {"reputation": 12668, "user_id": 95852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e215c7362074d0346612a10d3a89be9e?s=128&d=identicon&r=PG", "display_name": "John Y", "link": "https://stackoverflow.com/users/95852/john-y"}, "edited": false, "score": 0, "creation_date": 1470956505, "post_id": 38884307, "comment_id": 65173238, "body": "You are right. Answer edited. I used to use it for situations, when I had both Windows and Ubuntu on my machine, and required the same code to run on files in my CWD. I found it quite handy, but it is not the solution to this question."}, {"owner": {"reputation": 12668, "user_id": 95852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e215c7362074d0346612a10d3a89be9e?s=128&d=identicon&r=PG", "display_name": "John Y", "link": "https://stackoverflow.com/users/95852/john-y"}, "edited": false, "score": 1, "creation_date": 1470956967, "post_id": 38884307, "comment_id": 65173369, "body": "Good edit, now I feel comfortable upvoting this answer."}, {"owner": {"reputation": 1577, "user_id": 5779017, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a7db11d5d5da9c6dbce183a4f433e814?s=128&d=identicon&r=PG&f=1", "display_name": "Rachel", "link": "https://stackoverflow.com/users/5779017/rachel"}, "edited": false, "score": 0, "creation_date": 1511434307, "post_id": 38884307, "comment_id": 81861970, "body": "Still doesn&#39;t work for me somehow. I tried to wrap the entire thing in a function: <code>def excel_to_path(frame, path):     writer = pd.ExcelWriter(path , engine=&#39;xlsxwriter&#39;)     frame.to_excel(writer, sheet_name=&#39;Sheet1&#39;)     writer.save()</code> and to pass <code>df</code>and <code>&quot;..&#47;foo&#47;bar&#47;myfile.xlsx&quot;</code> any ideas?"}, {"owner": {"reputation": 6581, "user_id": 3765319, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1262dca6cd7334e5eb75649272eea20d?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/3765319/kartik"}, "reply_to_user": {"reputation": 1577, "user_id": 5779017, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a7db11d5d5da9c6dbce183a4f433e814?s=128&d=identicon&r=PG&f=1", "display_name": "Rachel", "link": "https://stackoverflow.com/users/5779017/rachel"}, "edited": false, "score": 1, "creation_date": 1511450511, "post_id": 38884307, "comment_id": 81871959, "body": "@Rachel try replacing the relative path with absolute path. Also please use <a href=\"https://jeffknupp.com/blog/2016/03/07/python-with-context-managers/\" rel=\"nofollow noreferrer\">context manager</a>. The doc shows <a href=\"http://pandas-docs.github.io/pandas-docs-travis/io.html#io-excel-writer\" rel=\"nofollow noreferrer\">pandas implementation</a>. It&#39;ll save your butt when something goes wrong."}], "tags": [], "owner": {"reputation": 6581, "user_id": 3765319, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1262dca6cd7334e5eb75649272eea20d?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/3765319/kartik"}, "is_accepted": true, "score": 14, "last_activity_date": 1470956383, "last_edit_date": 1470956383, "creation_date": 1470866591, "answer_id": 38884307, "question_id": 38884164, "link": "https://stackoverflow.com/questions/38884164/write-dataframe-to-excel-file-at-given-path/38884307#38884307", "title": "write dataframe to excel file at given path", "body": "<p><a href=\"https://docs.python.org/3/reference/lexical_analysis.html#literals\" rel=\"noreferrer\">String literals</a></p>\n\n<p>Study the table in that link. You need to escape your '\\' with '\\\\'. Partly, DOS is responsible for this mess in the world.</p>\n\n<pre><code>out_path = \"C:\\\\Users\\\\Bala\\\\output\\\\temp-excel.xlsx\"\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>out_path = r\"C:\\Users\\Bala\\output\\temp-excel.xlsx\" # the `r` prefix means raw string\n</code></pre>\n\n<p>But best alternative is this:</p>\n\n<pre><code>out_path = \"C:/Users/Bala/output/temp-excel.xlsx\"\n</code></pre>\n\n<p>It will work on any platform.</p>\n\n<hr>\n\n<p>Edited to remove the solution with <code>os.path.abspath</code>. After the comment below this answer, I read the documentation myself and realized that it has a different purpose. Although I have used it in the past to make my code dual OS friendly, because it neatly appends CWD to the path, and changes <code>/</code> to <code>\\\\</code> when moving from Debian to Windows and vice versa. </p>\n"}], "owner": {"reputation": 293, "user_id": 4168007, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh3.googleusercontent.com/-VNeHMNyDWbU/AAAAAAAAAAI/AAAAAAAABPQ/-fWzsqnIq9M/photo.jpg?sz=128", "display_name": "balakishore nadella", "link": "https://stackoverflow.com/users/4168007/balakishore-nadella"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37303, "favorite_count": 4, "accepted_answer_id": 38884307, "answer_count": 2, "score": 9, "last_activity_date": 1470956383, "creation_date": 1470865956, "last_edit_date": 1470866274, "question_id": 38884164, "link": "https://stackoverflow.com/questions/38884164/write-dataframe-to-excel-file-at-given-path", "title": "write dataframe to excel file at given path", "body": "<pre><code>I have a dataframe \ndf = pd.DataFrame({'Data': [10, 20, 30, 20, 15, 30, 45]})\n\nThis is working :\nwriter = pd.ExcelWriter('pandas_simple.xlsx', engine='xlsxwriter')\ndf.to_excel(writer, sheet_name='Sheet1')\nwriter.save()\n\nbut when I try \nout_path = \"C:\\Users\\Bala\\output\\temp-excel.xlsx\"\nwriter = pd.ExcelWriter(out_path , engine='xlsxwriter')\ndf.to_excel(writer, sheet_name='Sheet1')\nwriter.save()\n</code></pre>\n\n<p>I'm getting error : IOError: [Errno 22] invalid mode ('wb') or filename: 'C:\\Users\\Bala Nadella\\output\\temp-excel.xlsx'. </p>\n\n<p>How to create file in given path. </p>\n"}, {"tags": ["python", "html", "jupyter", "reveal.js", "nbconvert"], "answers": [{"comments": [{"owner": {"reputation": 653, "user_id": 5023129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pC2yq.jpg?s=128&g=1", "display_name": "Joachim Wagner", "link": "https://stackoverflow.com/users/5023129/joachim-wagner"}, "edited": false, "score": 2, "creation_date": 1526458104, "post_id": 41969161, "comment_id": 87747168, "body": "Doesn&#39;t work. Tried both Chrome and Firefox. Also <a href=\"https://github.com/jupyter/nbconvert/issues/607\" rel=\"nofollow noreferrer\">github.com/jupyter/nbconvert/issues/607</a> reports failure."}], "tags": [], "owner": {"reputation": 51, "user_id": 6854613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dc97bbb09851e3791e5872f97e04252?s=128&d=identicon&r=PG&f=1", "display_name": "Will Holmes", "link": "https://stackoverflow.com/users/6854613/will-holmes"}, "is_accepted": false, "score": 0, "last_activity_date": 1485907449, "last_edit_date": 1485907449, "creation_date": 1485904059, "answer_id": 41969161, "question_id": 38884142, "link": "https://stackoverflow.com/questions/38884142/best-way-to-print-jupyter-notebook-slides-how-to-put-a-page-break/41969161#41969161", "title": "Best way to print Jupyter notebook slides? How to put a page break?", "body": "<p>I found several places which mentioned including HTML code for the page break in a markdown cell.  I got this to work, but only by:</p>\n\n<ol>\n<li>Include HTML for a page break in a markdown cell.  The code used was <code>&lt;p style=\"page-break-after:always;\"&gt;&lt;/p&gt;</code></li>\n<li>Export it to HTML with <a href=\"https://nbconvert.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">nbconvert</a>.  For this, the command line would be <code>jupyter nbconvert --to html YourNotebook.ipynb</code></li>\n<li>I could then open that static HTML file with Chrome.</li>\n<li>Finally, choose print from within Chrome and choose <code>save as PDF</code>.</li>\n</ol>\n\n<p>I tried other methods such as print when viewing the <code>.ipynb</code> file or using <code>nbconvert</code> to go straight to PDF, but none of that worked.  Exporting to HTML and then opening the html and saving as PDF did work.</p>\n"}, {"tags": [], "owner": {"reputation": 966, "user_id": 5084355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28d8ffc5b1cf33e0a56c67ced66bc75a?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Orac", "link": "https://stackoverflow.com/users/5084355/roman-orac"}, "is_accepted": false, "score": 1, "last_activity_date": 1589906344, "last_edit_date": 1589906344, "creation_date": 1589905668, "answer_id": 61896040, "question_id": 38884142, "link": "https://stackoverflow.com/questions/38884142/best-way-to-print-jupyter-notebook-slides-how-to-put-a-page-break/61896040#61896040", "title": "Best way to print Jupyter notebook slides? How to put a page break?", "body": "<p>I wrote an Ebook in Jupyter Notebooks. I put each chapter in a separate Notebook. Then I converted a Notebook to HTML with nbconvert and then use wkhtmltopdf to convert it to PDF. The final step was to merge those PDFs with cpdf. This was the only way I was able to get page breaks in PDF.</p>\n\n<pre><code>jupyter nbconvert --to html Chapter1.ipynb\njupyter nbconvert --to html Chapter2.ipynb\n\nwkhtmltopdf --enable-internal-links -L 10mm -R 9.5mm -T 10mm -B 9.5mm Chapter1.html Chapter1.pdf\n\nwkhtmltopdf --enable-internal-links -L 10mm -R 9.5mm -T 10mm -B 9.5mm Chapter2.html Chapter2.pdf\n\n./cpdf Chapter1.pdf Chapter2.pdf -o Ebook.pdf \n</code></pre>\n\n<p>I wrote a script that automates this process and coverts Ebook to EPUB, AZW3 and PDF. You can read more about it here: <a href=\"https://towardsdatascience.com/transform-jupyter-notebook-to-an-ebook-ef3a9d32ac4f\" rel=\"nofollow noreferrer\">https://towardsdatascience.com/transform-jupyter-notebook-to-an-ebook-ef3a9d32ac4f</a>.</p>\n"}], "owner": {"reputation": 2996, "user_id": 3553228, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b48e7a43f7c3cca4a3826be398b8e32a?s=128&d=identicon&r=PG&f=1", "display_name": "Lisa", "link": "https://stackoverflow.com/users/3553228/lisa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14588, "favorite_count": 3, "answer_count": 2, "score": 5, "last_activity_date": 1602990325, "creation_date": 1470865814, "last_edit_date": 1495541801, "question_id": 38884142, "link": "https://stackoverflow.com/questions/38884142/best-way-to-print-jupyter-notebook-slides-how-to-put-a-page-break", "title": "Best way to print Jupyter notebook slides? How to put a page break?", "body": "<p>I want to print my jupyter notebook and share the hardcopy with non-programmer coworkers. </p>\n\n<p>What I have done so far:</p>\n\n<ul>\n<li>I've figured out the way to hide the code :<a href=\"https://stackoverflow.com/questions/27934885/how-to-hide-code-from-cells-in-ipython-notebook-visualized-with-nbviewer\">How to hide code from cells in ipython notebook visualized with nbviewer?</a></li>\n<li>I've figre out the way to convert the notebook to slides(html) <a href=\"https://stackoverflow.com/questions/34166856/is-there-a-way-to-print-a-jupyter-ipython-notebook-slide-presentation\">Is there a way to print a jupyter/ipython notebook slide presentation?</a> This post also suggests how to convert the html to pdf.</li>\n</ul>\n\n<p>My question:\nHow to put a page break to specify the contents on each pdf page?</p>\n\n<p>Once I convert the slides(html) to pdf, the text and graph is not at the expected location in pdf. I want the graph and the text explaining the graph to be in the same page. Do I need to put some page breaks in markdown cell of my Jupyter notebook? Or how to specify the content on each page of pdf, instead of letting the browser decide</p>\n\n<p>Also, I'm trying to convert Jupyter notebok directly to pdf, but encounters issues: <a href=\"https://stackoverflow.com/questions/38858433/convert-jupyter-notebook-to-pdf-error-encounters-when-install-pandoc\">Convert jupyter notebook to pdf: Error encounters when install pandoc</a> </p>\n"}, {"tags": ["python", "tkinter", "treeview", "ttk"], "comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1470868747, "post_id": 38884133, "comment_id": 65130027, "body": "I suspect the problem is that when you move something up, the index of everything below changes. Try traversing <code>leaves</code> in reverse order to see if that helps."}, {"owner": {"reputation": 11, "user_id": 6702298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac5681b011d1dd1ca4ce8d5d5fbef08?s=128&d=identicon&r=PG&f=1", "display_name": "m beshay", "link": "https://stackoverflow.com/users/6702298/m-beshay"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1470870423, "post_id": 38884133, "comment_id": 65130497, "body": "How would I traverse the leaves in reverse order?"}], "answers": [{"comments": [{"owner": {"reputation": 2236, "user_id": 11384392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j5bfH.jpg?s=128&g=1", "display_name": "Das_Geek", "link": "https://stackoverflow.com/users/11384392/das-geek"}, "edited": false, "score": 0, "creation_date": 1577808195, "post_id": 59546212, "comment_id": 105261393, "body": "No need for this to be a comment. If the user who commented a solution chooses to not write it as an answer, it&#39;s totally fine for someone else to do so instead. Especially if that other person provides a code example, as you do."}], "tags": [], "owner": {"reputation": 31, "user_id": 12633000, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_yTwA_0n0zU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reRQboQIhuX_xenimoqk11UrmwPlQ/photo.jpg?sz=128", "display_name": "Jack Love", "link": "https://stackoverflow.com/users/12633000/jack-love"}, "is_accepted": false, "score": 3, "last_activity_date": 1577807907, "creation_date": 1577807907, "answer_id": 59546212, "question_id": 38884133, "link": "https://stackoverflow.com/questions/38884133/move-up-and-down-a-treeview/59546212#59546212", "title": "move up and down a treeview", "body": "<p>As suggested in the comments going through leaves in the reverse order using reversed() fixes the problem. (Would be a comment but I don't have the reputation) </p>\n\n<pre><code>def moveDown():\n    leaves = Tree.selection()\n    for i in reversed(leaves):\n        Tree.move(i, Tree.parent(i), Tree.index(i)+1)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6702298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac5681b011d1dd1ca4ce8d5d5fbef08?s=128&d=identicon&r=PG&f=1", "display_name": "m beshay", "link": "https://stackoverflow.com/users/6702298/m-beshay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1322, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1577807907, "creation_date": 1470865743, "question_id": 38884133, "link": "https://stackoverflow.com/questions/38884133/move-up-and-down-a-treeview", "title": "move up and down a treeview", "body": "<p>I'm populating a tkinter treeview in python using Os.walk() but after populating it I want to be able to reorder the tree leaves using buttons.</p>\n\n<p>The command for moving up the tree works just fine (I want to be able to move multiple leaves at once)</p>\n\n<pre><code>def moveUp():\n    leaves = Tree.selection()\n    for i in leaves:\n        Tree.move(i, Tree.parent(i), Tree.index(i)-1)\n</code></pre>\n\n<p>But when I reversed it to go down the tree I get a weird bug</p>\n\n<pre><code>def moveDown():\n    leaves = Tree.selection()\n    for i in leaves:\n        Tree.move(i, Tree.parent(i), Tree.index(i)+1)\n</code></pre>\n\n<p>I can only move a single leaf down, if I select an odd number of leaves then the lowest one moves down, and if I pick an even number of leaves none of them move.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 6581, "user_id": 3765319, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1262dca6cd7334e5eb75649272eea20d?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/3765319/kartik"}, "is_accepted": false, "score": 1, "last_activity_date": 1470866388, "creation_date": 1470866388, "answer_id": 38884269, "question_id": 38884131, "link": "https://stackoverflow.com/questions/38884131/sorting-df-rows-horizontally/38884269#38884269", "title": "Sorting df rows horizontally", "body": "<p>Here:</p>\n\n<pre><code>df.apply(sorted, axis=1)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 2, "last_activity_date": 1470866675, "creation_date": 1470866675, "answer_id": 38884322, "question_id": 38884131, "link": "https://stackoverflow.com/questions/38884131/sorting-df-rows-horizontally/38884322#38884322", "title": "Sorting df rows horizontally", "body": "<p>i'd do it using NumPy, as it might be faster:</p>\n\n<pre><code>In [40]: pd.DataFrame(np.sort(df.values, axis=1), columns=df.columns).drop_duplicates()\nOut[40]:\n                source               target\n0  1:19374802:19380807    2:4608900:4614600\n1    2:4608900:4614600  5:14175176:14182011\n3    2:4608900:4614600  5:14171600:14173742\n</code></pre>\n"}], "owner": {"reputation": 4163, "user_id": 3325052, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/29bb31e29505e6026ec782cabd22f4ef?s=128&d=identicon&r=PG&f=1", "display_name": "DataSwede", "link": "https://stackoverflow.com/users/3325052/dataswede"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 597, "favorite_count": 1, "accepted_answer_id": 38884322, "answer_count": 2, "score": 0, "last_activity_date": 1470866675, "creation_date": 1470865739, "question_id": 38884131, "link": "https://stackoverflow.com/questions/38884131/sorting-df-rows-horizontally", "title": "Sorting df rows horizontally", "body": "<p>I have a dataframe like:</p>\n\n<pre><code>import pandas as pd\ndf = pd.DataFrame({'source': {0: u'1:19374802:19380807',\n                              1: u'2:4608900:4614600',\n                              2: u'5:14175176:14182011',\n                              3: u'2:4608900:4614600',\n                              4: u'5:14171600:14173742'},\n                   'target': {0: u'2:4608900:4614600',\n                              1: u'5:14175176:14182011',\n                              2: u'2:4608900:4614600',\n                              3: u'5:14171600:14173742',\n                              4: u'2:4608900:4614600'}})\n\n    source              target\n0   1:19374802:19380807 2:4608900:4614600\n1   2:4608900:4614600   5:14175176:14182011\n2   5:14175176:14182011 2:4608900:4614600\n3   2:4608900:4614600   5:14171600:14173742\n4   5:14171600:14173742 2:4608900:4614600\n</code></pre>\n\n<p>The data is originating from multiple iterations over many to many relationships. In the data, <code>Source:Target == Target:Source</code>. Thus relationships get duplicated (rows 1 and 2 for example).</p>\n\n<p>I'm looking to sort the rows horizontally:</p>\n\n<pre><code>    source              target\n0   1:19374802:19380807 2:4608900:4614600\n1   2:4608900:4614600   5:14175176:14182011\n2   2:4608900:4614600   5:14175176:14182011\n3   2:4608900:4614600   5:14171600:14173742\n4   2:4608900:4614600   5:14171600:14173742\n</code></pre>\n\n<p>So duplicates can be removed.</p>\n"}, {"tags": ["python", "listiterator"], "answers": [{"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1470866511, "post_id": 38884152, "comment_id": 65129367, "body": "Angle brackets are these: <code>&lt;&gt;</code>. The <code>[]</code> ones are called square brackets, or just brackets depending on where you&#39;re from."}], "tags": [], "owner": {"reputation": 1525, "user_id": 6664393, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe985e0b1cf77b72acb4e0058029acda?s=128&d=identicon&r=PG&f=1", "display_name": "user357269", "link": "https://stackoverflow.com/users/6664393/user357269"}, "is_accepted": false, "score": 2, "last_activity_date": 1470866570, "last_edit_date": 1495541288, "creation_date": 1470865870, "answer_id": 38884152, "question_id": 38884102, "link": "https://stackoverflow.com/questions/38884102/how-to-return-the-first-n-items-of-an-iterator-that-pass-a-test-without-running/38884152#38884152", "title": "How to return the first n items of an iterator that pass a test without running the test on the remainder", "body": "<p>Try <a href=\"https://docs.python.org/dev/library/itertools.html#itertools.islice\" rel=\"nofollow noreferrer\">itertools.islice</a>:</p>\n\n<pre><code>from itertools import islice\nfoo = list(islice((p for p in (1,2,3,4,5,0,6) if 100/p), 4))\n</code></pre>\n\n<p>Notice the lack of brackets: this is a <a href=\"https://stackoverflow.com/questions/47789/generator-expressions-vs-list-comprehension\">generator comprehension</a></p>\n"}, {"tags": [], "owner": {"reputation": 584, "user_id": 2570695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b092c35c675a322328ef5ac965792ac?s=128&d=identicon&r=PG", "display_name": "Can Ibanoglu", "link": "https://stackoverflow.com/users/2570695/can-ibanoglu"}, "is_accepted": false, "score": 1, "last_activity_date": 1470867061, "creation_date": 1470867061, "answer_id": 38884394, "question_id": 38884102, "link": "https://stackoverflow.com/questions/38884102/how-to-return-the-first-n-items-of-an-iterator-that-pass-a-test-without-running/38884394#38884394", "title": "How to return the first n items of an iterator that pass a test without running the test on the remainder", "body": "<p>That is impossible to do with list comprehensions but it is possible with generator comprehensions.</p>\n\n<p>What is the difference between the two? List comprehensions will iterate over the iterable all at once and return a list back to you according to your operations on items on the iterable. The key here is <em>all at once</em>.</p>\n\n<p>Your example uses list comprehensions and here's what happens: First the list comprehension is evaluated. In your case it will fail, but even if it didn't fail, it would have iterated over everything in the iterable <code>somelist</code> and would have returned a resulting list back. Then this list is sliced and a new resulting list is returned.</p>\n\n<p>Generator comprehensions and generators in general have different way of working. They are basically code blocks that are suspended until you request more data from them, which is what you really want to do. </p>\n\n<p>In effect, you create a generator as follows:</p>\n\n<pre><code>g = (p for p in (1,2,3,4,5,0,6) if 100/p )\n</code></pre>\n\n<p>You now have a generator that will generate values for you when you <em>request</em> it to do so, according to the \"rule\" you gave it.</p>\n\n<p>As soon as you have a generator at hand, there are several ways you could get <code>n</code> items from it.</p>\n\n<p>You could write a simple for loop as follows:</p>\n\n<pre><code>results = []\nfor x in range(3): # n = 3 in your case\n    results.append(next(g))\n</code></pre>\n\n<p>Of course, that isn't Pythonic. Assuming you want a list back, you can now use a list comprehension:</p>\n\n<pre><code>results = [next(g) for x in range(3)]\n</code></pre>\n\n<p>This is the \"manual\" way of doing it. You could also use the <code>islice</code> function from the <code>itertools</code> module <a href=\"https://docs.python.org/dev/library/itertools.html#itertools.islice\" rel=\"nofollow\">(Documentation here)</a>:</p>\n\n<pre><code>import itertools\nresults = list(itertools.islice(g, 4))\n</code></pre>\n\n<p>And there it is. Generators are pretty useful. A code block that executes when requested to and remember its state is truly invaluable.</p>\n"}, {"tags": [], "owner": {"reputation": 31791, "user_id": 529630, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2c2dd297abe572bd192b1f01322dec83?s=128&d=identicon&r=PG", "display_name": "Dunes", "link": "https://stackoverflow.com/users/529630/dunes"}, "is_accepted": false, "score": 0, "last_activity_date": 1470871323, "creation_date": 1470871323, "answer_id": 38885057, "question_id": 38884102, "link": "https://stackoverflow.com/questions/38884102/how-to-return-the-first-n-items-of-an-iterator-that-pass-a-test-without-running/38885057#38885057", "title": "How to return the first n items of an iterator that pass a test without running the test on the remainder", "body": "<p>By using a combination of the builtin filter and <a href=\"https://docs.python.org/3/library/itertools.html#itertools.islice\" rel=\"nofollow\">islice</a> you can achieve what you want.\neg.</p>\n\n<pre><code>length = 3\nitems_iter = islice(filter(None, [1, 2, 0, 4, 5]), length) # returns a lazy iterator\nitems = list(items_iter)\nassert items == [1, 2, 5]\n</code></pre>\n\n<p>However, you may wish to write your own generator. Generator functions will, rather than returning a single result, will yield successive items. Sometimes it might yield no items, and sometimes they can yield an infinite number of items. Here is an example for your case:</p>\n\n<pre><code>def take_first_n_that_pass(test, length, iterator):\n    i = 0\n    for item in iterator:\n        if i &gt;= length:\n            return # stops generator\n        if test(item):\n            yield item\n            i += 1\n    # end of iterator -- generator stops here as well\n\nitems_iter = take_first_n_that_pass(bool, 3, [0, 1, 2, 0, 4, 5])\nitems = list(items_iter)\nassert items == [1, 2, 4]\n</code></pre>\n"}], "owner": {"reputation": 195, "user_id": 1578096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a94f02232c2eb5444f0dce001e652cc0?s=128&d=identicon&r=PG", "display_name": "Mitra Ardron", "link": "https://stackoverflow.com/users/1578096/mitra-ardron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1470871323, "creation_date": 1470865617, "question_id": 38884102, "link": "https://stackoverflow.com/questions/38884102/how-to-return-the-first-n-items-of-an-iterator-that-pass-a-test-without-running", "title": "How to return the first n items of an iterator that pass a test without running the test on the remainder", "body": "<p>I'm looking for something like:</p>\n\n<pre><code>foo = [ p for p in somelist if xxx(p)][0:10]\n</code></pre>\n\n<p>This works, but executes xxx on all of somelist, and xxx is expensive. </p>\n\n<p>I could write a subfunction such as </p>\n\n<pre><code>def blah (list, len): \n    res=[]; i=0; \n    while i&lt;len: \n        if xxx(list[i]): \n            res.append(i) \n   return res\n</code></pre>\n\n<p>but this seems very unpythonic. </p>\n\n<p>An example that proves the first result does the wrong thing would be:</p>\n\n<pre><code>foo = [ p for p in (1,2,3,4,5,0,6) if 100/p ][0:3]\n</code></pre>\n\n<p>which \"should\" return [1,2,3] but in fact fails on the divide by zero. </p>\n\n<p>I've tried various tools from itertools but can't find a combination that stops execution of the iterator after the size is reached. </p>\n"}, {"tags": ["python", "oauth", "youtube-api", "google-oauth", "youtube-analytics-api"], "answers": [{"tags": [], "owner": {"reputation": 6714, "user_id": 6092067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3848bf7a325fa036b5e85f5f83e76985?s=128&d=identicon&r=PG&f=1", "display_name": "Teyam", "link": "https://stackoverflow.com/users/6092067/teyam"}, "is_accepted": false, "score": 0, "last_activity_date": 1470932360, "last_edit_date": 1495540294, "creation_date": 1470932360, "answer_id": 38901561, "question_id": 38884099, "link": "https://stackoverflow.com/questions/38884099/youtube-analytics-api-authentication-request-for-a-content-owner/38901561#38901561", "title": "YouTube Analytics API: Authentication request for a content owner", "body": "<p>As mentioned in <a href=\"https://developers.google.com/youtube/analytics/v1/content_owner_reports\" rel=\"nofollow noreferrer\">YouTube Analytics API: Content Owner Reports</a>,</p>\n\n<blockquote>\n  <p>To retrieve a content owner report, call the API's <code>reports.query</code> method and set the <code>ids</code> parameter value in the API request to <code>contentOwner==OWNER_NAME</code>, where <code>OWNER_NAME</code> specifies the content owner's ID.</p>\n</blockquote>\n\n<p>In <a href=\"https://developers.google.com/youtube/analytics/v1/reference/reports/query\" rel=\"nofollow noreferrer\">Reports: Query</a>, you may send your HTTP request with the following format:</p>\n\n<pre><code>GET https://www.googleapis.com/youtube/analytics/v1/reports\n</code></pre>\n\n<p>Please note that YouTube Analytics API requests must be authorized. Aside from that, you can also add query parameters, such as dimensions, filters, and sorting instructions.</p>\n\n<p>This related SO post - <a href=\"https://stackoverflow.com/questions/19584489/youtube-analytics-api-content-owner-reports\">YouTube Analytics API - Content owner reports</a> might also help.</p>\n"}], "owner": {"reputation": 979, "user_id": 1198869, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/06a1b47da4b4b20b1c6c475e14c08806?s=128&d=identicon&r=PG", "display_name": "NeonBlueHair", "link": "https://stackoverflow.com/users/1198869/neonbluehair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 399, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470932360, "creation_date": 1470865606, "question_id": 38884099, "link": "https://stackoverflow.com/questions/38884099/youtube-analytics-api-authentication-request-for-a-content-owner", "title": "YouTube Analytics API: Authentication request for a content owner", "body": "<p>I have a content owner account, and I used Google's API Explorer to figure out the query that I need to send. My problem now is that I can't figure out how to send that same query programmatically via Python. I have generated oauth credentials as well as an API key - for an installed application -, so I also have a <code>client_secrets.json</code> file. What I can't figure out is how do I use this information to get through and send my query. There's a lot of talk of \"scope\" in the other questions I've reviewed, but I'm confused about how I need to include that in my request.</p>\n\n<p>I tried passing the contents of the client secrets file as headers in my request, I also tried just appending the simple API key to the end of the request, no dice. Also looked at several questions on here, but they either aren't relevant to content owners, or are about getting the right query itself rather than the authentication portion. Any help would be appreciated. Thanks in advance!</p>\n\n<p>Examples:</p>\n\n<pre><code>yt_headers = {\"client_id\": CLIENT_ID,\n\"client_secret\":CLIENT_SECRET,\n\"redirect_uris\": REDIRECT_URIS,\n\"auth_uri\": \"https://accounts.google.com/o/oauth2/auth\",\n\"token_uri\": \"https://accounts.google.com/o/oauth2/token\"}\n\nquery_string = 'https://www.googleapis.com/youtube/analytics/v1/reports?ids=contentOwner%3D%3DCONTENT_ID&amp;start-date=2015-09-28&amp;end-date=2015-11-05&amp;metrics=views&amp;dimensions=insightTrafficSourceType&amp;filters=video%3D%3DVIDEO_ID&amp;fields=rows'\napi_request = http.request('GET', query_string, headers=yt_headers)\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 1, "creation_date": 1470870055, "post_id": 38884090, "comment_id": 65130409, "body": "If your edit answers the question and the code works, then you should post below instead of updating the question. Now it is not clear what you are asking."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 6702324, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BmX-Os109YA/AAAAAAAAAAI/AAAAAAAAAT8/V-9PvfoA1i4/photo.jpg?sz=128", "display_name": "neonepthys", "link": "https://stackoverflow.com/users/6702324/neonepthys"}, "edited": false, "score": 0, "creation_date": 1470867368, "post_id": 38884137, "comment_id": 65129641, "body": "Thanks Marco. I tried but I have the following Error: UnboundLocalError: local variable &#39;types&#39; referenced before assignment"}, {"owner": {"reputation": 789, "user_id": 6441345, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f6281029cf43a71fa044b0ee3adbfe43?s=128&d=identicon&r=PG&f=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/6441345/marco"}, "reply_to_user": {"reputation": 5, "user_id": 6702324, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BmX-Os109YA/AAAAAAAAAAI/AAAAAAAAAT8/V-9PvfoA1i4/photo.jpg?sz=128", "display_name": "neonepthys", "link": "https://stackoverflow.com/users/6702324/neonepthys"}, "edited": false, "score": 0, "creation_date": 1470867577, "post_id": 38884137, "comment_id": 65129713, "body": "@neonepthys are you importing the google library as in your first example?"}, {"owner": {"reputation": 5, "user_id": 6702324, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BmX-Os109YA/AAAAAAAAAAI/AAAAAAAAAT8/V-9PvfoA1i4/photo.jpg?sz=128", "display_name": "neonepthys", "link": "https://stackoverflow.com/users/6702324/neonepthys"}, "edited": false, "score": 0, "creation_date": 1470867784, "post_id": 38884137, "comment_id": 65129775, "body": "I&#39;m a newbie in coding and I don&#39;t get your point. I modified the code with the one you have posted and it did not work"}, {"owner": {"reputation": 789, "user_id": 6441345, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f6281029cf43a71fa044b0ee3adbfe43?s=128&d=identicon&r=PG&f=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/6441345/marco"}, "reply_to_user": {"reputation": 5, "user_id": 6702324, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BmX-Os109YA/AAAAAAAAAAI/AAAAAAAAAT8/V-9PvfoA1i4/photo.jpg?sz=128", "display_name": "neonepthys", "link": "https://stackoverflow.com/users/6702324/neonepthys"}, "edited": false, "score": 0, "creation_date": 1470867867, "post_id": 38884137, "comment_id": 65129796, "body": "Can I see the full code of your first example (the one you said that works)? (do not include your API Key!!!)"}, {"owner": {"reputation": 5, "user_id": 6702324, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BmX-Os109YA/AAAAAAAAAAI/AAAAAAAAAT8/V-9PvfoA1i4/photo.jpg?sz=128", "display_name": "neonepthys", "link": "https://stackoverflow.com/users/6702324/neonepthys"}, "edited": false, "score": 0, "creation_date": 1470868182, "post_id": 38884137, "comment_id": 65129889, "body": "See below the full code.Your might have to install the Python-Google-script: pip install python-google-places"}, {"owner": {"reputation": 789, "user_id": 6441345, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f6281029cf43a71fa044b0ee3adbfe43?s=128&d=identicon&r=PG&f=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/6441345/marco"}, "reply_to_user": {"reputation": 5, "user_id": 6702324, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BmX-Os109YA/AAAAAAAAAAI/AAAAAAAAAT8/V-9PvfoA1i4/photo.jpg?sz=128", "display_name": "neonepthys", "link": "https://stackoverflow.com/users/6702324/neonepthys"}, "edited": false, "score": 0, "creation_date": 1470868275, "post_id": 38884137, "comment_id": 65129920, "body": "@neonepthys edit your question to include the full code and please remove your api key. I edited my answer, try this new code. Thanks"}, {"owner": {"reputation": 5, "user_id": 6702324, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BmX-Os109YA/AAAAAAAAAAI/AAAAAAAAAT8/V-9PvfoA1i4/photo.jpg?sz=128", "display_name": "neonepthys", "link": "https://stackoverflow.com/users/6702324/neonepthys"}, "edited": false, "score": 0, "creation_date": 1470869617, "post_id": 38884137, "comment_id": 65130293, "body": "I have cleaned my request. How to concatenate Mytype value to make it work?"}, {"owner": {"reputation": 789, "user_id": 6441345, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f6281029cf43a71fa044b0ee3adbfe43?s=128&d=identicon&r=PG&f=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/6441345/marco"}, "reply_to_user": {"reputation": 5, "user_id": 6702324, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BmX-Os109YA/AAAAAAAAAAI/AAAAAAAAAT8/V-9PvfoA1i4/photo.jpg?sz=128", "display_name": "neonepthys", "link": "https://stackoverflow.com/users/6702324/neonepthys"}, "edited": false, "score": 0, "creation_date": 1470869754, "post_id": 38884137, "comment_id": 65130329, "body": "As I said after the code, you can use <code>append</code> to add new types to the <code>MyType</code> array or assign <code>MyType</code> with all the types you want."}, {"owner": {"reputation": 5, "user_id": 6702324, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BmX-Os109YA/AAAAAAAAAAI/AAAAAAAAAT8/V-9PvfoA1i4/photo.jpg?sz=128", "display_name": "neonepthys", "link": "https://stackoverflow.com/users/6702324/neonepthys"}, "edited": false, "score": 0, "creation_date": 1470869918, "post_id": 38884137, "comment_id": 65130377, "body": "Sorry but I don&#39;t see how to concatenate it. Could you please send an exemple?"}, {"owner": {"reputation": 789, "user_id": 6441345, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f6281029cf43a71fa044b0ee3adbfe43?s=128&d=identicon&r=PG&f=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/6441345/marco"}, "reply_to_user": {"reputation": 5, "user_id": 6702324, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BmX-Os109YA/AAAAAAAAAAI/AAAAAAAAAT8/V-9PvfoA1i4/photo.jpg?sz=128", "display_name": "neonepthys", "link": "https://stackoverflow.com/users/6702324/neonepthys"}, "edited": false, "score": 0, "creation_date": 1470870171, "post_id": 38884137, "comment_id": 65130430, "body": "@neonepthys examples added."}, {"owner": {"reputation": 5, "user_id": 6702324, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BmX-Os109YA/AAAAAAAAAAI/AAAAAAAAAT8/V-9PvfoA1i4/photo.jpg?sz=128", "display_name": "neonepthys", "link": "https://stackoverflow.com/users/6702324/neonepthys"}, "edited": false, "score": 0, "creation_date": 1470870227, "post_id": 38884137, "comment_id": 65130446, "body": "Thank you for your patience but it does not answer my needs. I have a value &quot;PHARMACY&quot;, how to concatenate it to obtain MyType. In your exemple you don&#39;t concatenate the value sent in parameter (PHARMACY), you specify an entire parameter from scratch wich cannot work."}, {"owner": {"reputation": 789, "user_id": 6441345, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f6281029cf43a71fa044b0ee3adbfe43?s=128&d=identicon&r=PG&f=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/6441345/marco"}, "reply_to_user": {"reputation": 5, "user_id": 6702324, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BmX-Os109YA/AAAAAAAAAAI/AAAAAAAAAT8/V-9PvfoA1i4/photo.jpg?sz=128", "display_name": "neonepthys", "link": "https://stackoverflow.com/users/6702324/neonepthys"}, "edited": false, "score": 0, "creation_date": 1470870393, "post_id": 38884137, "comment_id": 65130482, "body": "No problem, I just hope it solves your problem. Don&#39;t forget to accept the answer by clicking on the gray check mark below the voting system if it does."}, {"owner": {"reputation": 5, "user_id": 6702324, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BmX-Os109YA/AAAAAAAAAAI/AAAAAAAAAT8/V-9PvfoA1i4/photo.jpg?sz=128", "display_name": "neonepthys", "link": "https://stackoverflow.com/users/6702324/neonepthys"}, "edited": false, "score": 0, "creation_date": 1470870473, "post_id": 38884137, "comment_id": 65130514, "body": "I send &quot;Pharmacy&quot; to the fonction, how to concatenate it to obtain &quot;MyType = [types.TYPE_PHARMACY]&quot;"}, {"owner": {"reputation": 789, "user_id": 6441345, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f6281029cf43a71fa044b0ee3adbfe43?s=128&d=identicon&r=PG&f=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/6441345/marco"}, "reply_to_user": {"reputation": 5, "user_id": 6702324, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BmX-Os109YA/AAAAAAAAAAI/AAAAAAAAAT8/V-9PvfoA1i4/photo.jpg?sz=128", "display_name": "neonepthys", "link": "https://stackoverflow.com/users/6702324/neonepthys"}, "edited": false, "score": 0, "creation_date": 1470870643, "post_id": 38884137, "comment_id": 65130543, "body": "You can just use a simple conditional. <code>if Type == &#39;Pharmacy&#39;: MyType = [types.TYPE_PHARMACY]</code> for example or you can use <code>getattr</code>. <code>MyType = [ getattr(types, &#39;TYPE_&#39; + Type.upper()) ]</code>."}, {"owner": {"reputation": 5, "user_id": 6702324, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BmX-Os109YA/AAAAAAAAAAI/AAAAAAAAAT8/V-9PvfoA1i4/photo.jpg?sz=128", "display_name": "neonepthys", "link": "https://stackoverflow.com/users/6702324/neonepthys"}, "edited": false, "score": 0, "creation_date": 1470871073, "post_id": 38884137, "comment_id": 65130644, "body": "getattr was exactly was I was looking for. Problem resolved. Thanks a lot."}, {"owner": {"reputation": 789, "user_id": 6441345, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f6281029cf43a71fa044b0ee3adbfe43?s=128&d=identicon&r=PG&f=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/6441345/marco"}, "reply_to_user": {"reputation": 5, "user_id": 6702324, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BmX-Os109YA/AAAAAAAAAAI/AAAAAAAAAT8/V-9PvfoA1i4/photo.jpg?sz=128", "display_name": "neonepthys", "link": "https://stackoverflow.com/users/6702324/neonepthys"}, "edited": false, "score": 0, "creation_date": 1470871150, "post_id": 38884137, "comment_id": 65130673, "body": "Ok, I will change my answer to include <code>getattr</code>."}], "tags": [], "owner": {"reputation": 789, "user_id": 6441345, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f6281029cf43a71fa044b0ee3adbfe43?s=128&d=identicon&r=PG&f=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/6441345/marco"}, "is_accepted": true, "score": 1, "last_activity_date": 1470871255, "last_edit_date": 1470871255, "creation_date": 1470865759, "answer_id": 38884137, "question_id": 38884090, "link": "https://stackoverflow.com/questions/38884090/python-concatenate-python-query/38884137#38884137", "title": "Python - Concatenate Python query", "body": "<p>To concatenate the type name with <code>TYPE_</code> in take it from <code>types</code> you can use <code>getattr</code></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>MyTypes = [ getattr(types, 'TYPE_' + Type.upper() ]\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 6702324, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BmX-Os109YA/AAAAAAAAAAI/AAAAAAAAAT8/V-9PvfoA1i4/photo.jpg?sz=128", "display_name": "neonepthys", "link": "https://stackoverflow.com/users/6702324/neonepthys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 38884137, "answer_count": 1, "score": 0, "last_activity_date": 1470871255, "creation_date": 1470865557, "last_edit_date": 1470869832, "question_id": 38884090, "link": "https://stackoverflow.com/questions/38884090/python-concatenate-python-query", "title": "Python - Concatenate Python query", "body": "<p>I'm using the python-google-places script but I'm facing a problem when integrating the code into a function called with two parameters: \"MyLocation\" and \"MyType\".</p>\n\n<p>\"MyLocation\" works well but \"MyType\" doesn't work.</p>\n\n<p>Code that works (without a variable for \"MyType\")</p>\n\n<pre><code># Configuration de l'encodage (a mettre dans tous les scripts)\n# encoding: utf-8\n\n####################################\n### CLASS\n#################################### \ndef ExtractGoogleHotspots(Location,MyType):\n        from googleplaces import GooglePlaces, types, lang\n        YOUR_API_KEY = 'XXXXXXX'\n        google_places = GooglePlaces(YOUR_API_KEY)\n        # You may prefer to use the text_search API, instead.\n        query_result = google_places.nearby_search(\n            location=Location, #Location could be a name or coordinates in english format : 4.04827,9.70428\n            keyword='',\n            radius=1000,#Radius in meters (max = 50 000)\n            types=[types.TYPE_PHARMACY] #Specify the Type\n            ) \n\n        for place in query_result.places:\n        # Returned places from a query are place summaries.\n            Name = place.name\n            Name = Name.encode('utf-8')#Encodage en UTF-8 obligatoire pour \u00e9viter les erreurs : \"UnicodeEncodeError: 'ascii' codec can't encode character...\"\n            Latitude = place.geo_location['lat']\n            Longitude = place.geo_location['lng']\n            # The following method has to make a further API call.\n            place.get_details()\n            Details = place.details\n            Address = place.formatted_address\n            Address = Address.encode('utf-8') \n            Phone_International = place.international_phone_number\n            Website = place.website\n\n        Result = str(MyType) + \";\" + Name + \";\" + Address + \";\" + str(Phone_International) + \";\" + str(Latitude) + \";\" + str(Longitude)\n+ \";\" + str(Website)\n        print Result\n\n####################################\n### Script\n####################################\n\nLocation = \"4.04827,9.70428\"\nMyType = \"DOES_NOT_WORK\"\nExtractGoogleHotspots(Location, MyType)\n</code></pre>\n\n<p>Code that doesn't work:</p>\n\n<pre><code>    # Configuration de l'encodage (a mettre dans tous les scripts)\n    # encoding: utf-8\n\n    ####################################\n    ### CLASS\n    #################################### \n\ndef ExtractGoogleHotspots(Location,Type):\n            from googleplaces import GooglePlaces, types, lang\n            YOUR_API_KEY = 'XXXXXXX'\n            google_places = GooglePlaces(YOUR_API_KEY)\n            MyType = \"[types.TYPE_\"+Type+\"]\"\n            # You may prefer to use the text_search API, instead.\n            query_result = google_places.nearby_search(\n                location=Location, #Location could be a name or coordinates in english format : 4.04827,9.70428\n                keyword='',\n                radius=1000,#Radius in meters (max = 50 000)\n                types=MyType #Specify the Type\n                ) \n\n            for place in query_result.places:\n            # Returned places from a query are place summaries.\n                Name = place.name\n                Name = Name.encode('utf-8')#Encodage en UTF-8 obligatoire pour \u00e9viter les erreurs : \"UnicodeEncodeError: 'ascii' codec can't encode character...\"\n                Latitude = place.geo_location['lat']\n                Longitude = place.geo_location['lng']\n                # The following method has to make a further API call.\n                place.get_details()\n                Details = place.details\n                Address = place.formatted_address\n                Address = Address.encode('utf-8') \n                Phone_International = place.international_phone_number\n                Website = place.website\n\n                Result = str(MyType) + \";\" + Name + \";\" + Address + \";\" + str(Phone_International) + \";\" + str(Latitude) + \";\" + str(Longitude)\n        + \";\" + str(Website)\n                print Result\n\n        ####################################\n        ### Script\n        ####################################\n\n        Location = \"4.04827,9.70428\"\n        MyType = \"PHARMACY\"\n        ExtractGoogleHotspots(Location, MyType)\n</code></pre>\n\n<p>How to resolve the problem to have a variable to define the Types part?</p>\n"}, {"tags": ["python", "c++", "refactoring", "clang", "abstract-syntax-tree"], "comments": [{"owner": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "edited": false, "score": 1, "creation_date": 1470868025, "post_id": 38883991, "comment_id": 65129855, "body": "What you have exhibited is a string of patches; why can&#39;t you just apply them in order? [Maybe you are making several overlapping patches to the AST?] Would it be more useful to just modify the AST for each change as you make them, then spit out the revised AST?  Then you can&#39;t have an out-of-order patching problem."}, {"owner": {"reputation": 45996, "user_id": 164171, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/dec2e1cd575b184c3695fe6d18a24638?s=128&d=identicon&r=PG", "display_name": "static_rtti", "link": "https://stackoverflow.com/users/164171/static-rtti"}, "reply_to_user": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "edited": false, "score": 0, "creation_date": 1470868421, "post_id": 38883991, "comment_id": 65129953, "body": "You have to be careful about order as changes can invalidate line numbers. I agree modifying the AST would be the best option, unfortunately cindex does not support it."}, {"owner": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "edited": false, "score": 1, "creation_date": 1472529628, "post_id": 38883991, "comment_id": 65775224, "body": "If the tool you have won&#39;t do the job well, you can choose another tool.   Check my bio for a tool (DMS) that can parse C++, build and modify C++ ASTs (we did that avoid exactly silly patching problems when composing changes) and then regenerate valid source code.   It isn&#39;t in Python, though.  It isn&#39;t in C++ either; DMS is an array of DSLs that cooperate to let you specify transformations."}], "answers": [{"tags": [], "owner": {"reputation": 45996, "user_id": 164171, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/dec2e1cd575b184c3695fe6d18a24638?s=128&d=identicon&r=PG", "display_name": "static_rtti", "link": "https://stackoverflow.com/users/164171/static-rtti"}, "is_accepted": true, "score": 0, "last_activity_date": 1476103143, "creation_date": 1476103143, "answer_id": 39958507, "question_id": 38883991, "link": "https://stackoverflow.com/questions/38883991/how-can-i-apply-changes-to-source-files-with-python/39958507#39958507", "title": "How can I apply changes to source files with Python?", "body": "<p>So I rolled out my own. The code is almost certainly buggy and not very pretty, but I'm posting it in the hope it might help someone until a better solution is found.</p>\n\n<pre><code>class PatchRecord(object):\n    \"\"\" Record patches, validate them, order them, and apply them \"\"\"\n\n    def __init__(self):\n        # output of readlines for each patched file\n        self.lines = {}\n        # list of patches for each patched file\n        self.patches = {}\n\n    class Patch(object):\n        \"\"\" Abstract base class for editing operations \"\"\"\n\n        def __init__(self, filename, start, end):\n            self.filename = filename\n            self.start = start\n            self.end = end\n\n        def __repr__(self):\n            return \"{op}: {filename} {start}/{end} {what}\".format(\n                op=self.__class__.__name__.upper(),\n                filename=self.filename,\n                start=format_place(self.start),\n                end=format_place(self.end),\n                what=getattr(self, \"what\", \"\"))\n\n        def apply(self, lines):\n            print \"Warning: applying no-op patch\"\n\n    class Delete(Patch):\n\n        def __init__(self, filename, extent):\n            super(PatchRecord.Delete, self).__init__(\n                filename, extent.start, extent.end)\n            print \"DELETE: {file} {extent}\".format(file=self.filename,\n                                                   extent=format_extent(extent))\n\n        def apply(self, lines):\n            lines[self.start.line - 1:self.end.line] = [\n                lines[self.start.line - 1][:self.start.column - 1] +\n                lines[self.end.line - 1][self.end.column:]]\n\n    class Insert(Patch):\n\n        def __init__(self, filename, start, what):\n            super(PatchRecord.Insert, self).__init__(filename, start, start)\n            self.what = what\n            print \"INSERT {where} {what}\".format(what=what, where=format_place(self.start))\n\n        def apply(self, lines):\n            line = lines[self.start.line - 1]\n            lines[self.start.line - 1] = \"%s%s%s\" % (\n                line[:self.start.column],\n                self.what,\n                line[self.start.column:])\n\n    class Replace(Patch):\n\n        def __init__(self, filename, extent, what):\n            super(PatchRecord.Replace, self).__init__(\n                filename, extent.start, extent.end)\n            self.what = what\n            print \"REPLACE: {where} {what}\".format(what=what,\n                                                   where=format_extent(extent))\n\n        def apply(self, lines):\n            lines[self.start.line - 1:self.end.line] = [\n                lines[self.start.line - 1][:self.start.column - 1] +\n                self.what +\n                lines[self.end.line - 1][self.end.column - 1:]]\n\n    # Convenience functions for creating patches\n    def delete(self, filename, extent):\n        self.patches[filename] = self.patches.get(\n            filename, []) + [self.Delete(filename, extent)]\n\n    def insert(self, filename, where, what):\n        self.patches[filename] = self.patches.get(\n            filename, []) + [self.Insert(filename, where, what)]\n\n    def replace(self, filename, extent, what):\n        self.patches[filename] = self.patches.get(\n            filename, []) + [self.Replace(filename, extent, what)]\n\n    def _pos_to_tuple(self, position):\n        \"\"\" Convert a source location to a tuple for use as a sorting key \"\"\"\n        return (position.line, position.column)\n\n    def sort(self, filename):\n        \"\"\" Sort patches by extent start \"\"\"\n        self.patches[filename].sort(key=lambda p: self._pos_to_tuple(p.start))\n\n    def validate(self, filename):\n        \"\"\"Try to insure patches are consistent\"\"\"\n        print \"Checking patches for %s\" % filename\n        self.sort(filename)\n        previous = self.patches[filename][0]\n        for p in self.patches[filename][1:]:\n            assert(self._pos_to_tuple(p.start) &gt;\n                   self._pos_to_tuple(previous.start))\n\n    def _apply(self, filename):\n        self.sort(filename)\n        lines = self._getlines(filename)\n        for p in reversed(self.patches[filename]):\n            print p\n            p.apply(lines)\n\n    def _getlines(self, filename):\n        \"\"\" Get source file lines for editing \"\"\"\n        if not filename in self.lines:\n            with open(filename) as f:\n                self.lines[filename] = f.readlines()\n        return self.lines[filename]\n\n    def apply(self):\n        for filename in self.patches:\n            self.validate(filename)\n            self._apply(filename)\n            # with open(filename+\".patched\",\"w\") as output:\n            with open(filename, \"w\") as output:\n                output.write(\"\".join(self._getlines(filename)))\n</code></pre>\n\n<p>Just create a <code>PatchRecord</code> object, add changes using the <code>create</code>, <code>replace</code> and <code>delete</code> methods, and apply them with <code>apply</code> when you're ready.</p>\n"}], "owner": {"reputation": 45996, "user_id": 164171, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/dec2e1cd575b184c3695fe6d18a24638?s=128&d=identicon&r=PG", "display_name": "static_rtti", "link": "https://stackoverflow.com/users/164171/static-rtti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 39958507, "answer_count": 1, "score": 2, "last_activity_date": 1476103143, "creation_date": 1470865032, "last_edit_date": 1470868680, "question_id": 38883991, "link": "https://stackoverflow.com/questions/38883991/how-can-i-apply-changes-to-source-files-with-python", "title": "How can I apply changes to source files with Python?", "body": "<p>I am refactoring C++ code using the Python bindings of the Clang compiler (<a href=\"https://github.com/llvm-mirror/clang/tree/master/bindings/python\" rel=\"nofollow\">cindex</a>). Using that, I analyze the AST and prepare changes. I end up with a list of operations similar to the following:</p>\n\n<pre><code>DELETE line 10\nINSERT line 5 column 32: &lt;&lt;  \"tofu\"\nREPLACE from line 31 colum 6 to line 33 column 82 with: std::cout &lt;&lt; \"Thanks SO\"\n...\n</code></pre>\n\n<p><strong>My question is how to turn these into actual file changes.</strong></p>\n\n<p>Doing it directly with python seems tedious: patches need to be applied in the right order and checked for consistency. It looks quite hard and error-prone.</p>\n\n<p>I also can\u2019t find a good library to help (clang does have something called a Rewriter, but it isn't wrapped in Python. I'd really like to avoid C++ for refactoring if possible).</p>\n\n<p>Maybe an idea could be to generate patches and apply them with git, maybe? But even that seems a bit tedious.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["python", "sockets"], "comments": [{"owner": {"reputation": 2234, "user_id": 2757226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VwnbH.jpg?s=128&g=1", "display_name": "chapelo", "link": "https://stackoverflow.com/users/2757226/chapelo"}, "edited": false, "score": 0, "creation_date": 1470865454, "post_id": 38883887, "comment_id": 65128940, "body": "try ... except... ???"}, {"owner": {"reputation": 35, "user_id": 6601369, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GFGoA5nhHNQ/AAAAAAAAAAI/AAAAAAAAACU/KkdI30RrULA/photo.jpg?sz=128", "display_name": "Megalegacy", "link": "https://stackoverflow.com/users/6601369/megalegacy"}, "reply_to_user": {"reputation": 2234, "user_id": 2757226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VwnbH.jpg?s=128&g=1", "display_name": "chapelo", "link": "https://stackoverflow.com/users/2757226/chapelo"}, "edited": false, "score": 0, "creation_date": 1470865541, "post_id": 38883887, "comment_id": 65128982, "body": "That was for debugging earlier, I guess I don&#39;t need it anymore."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 6601369, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GFGoA5nhHNQ/AAAAAAAAAAI/AAAAAAAAACU/KkdI30RrULA/photo.jpg?sz=128", "display_name": "Megalegacy", "link": "https://stackoverflow.com/users/6601369/megalegacy"}, "edited": false, "score": 0, "creation_date": 1470867117, "post_id": 38884290, "comment_id": 65129562, "body": "how does <code>remaining = int.from_bytes(clientsocket.recv(4), &#39;big&#39;)</code> work?"}, {"owner": {"reputation": 2086, "user_id": 4721937, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/939955c7df10b4632df32f8f5e7600d8?s=128&d=identicon&r=PG", "display_name": "warownia1", "link": "https://stackoverflow.com/users/4721937/warownia1"}, "reply_to_user": {"reputation": 35, "user_id": 6601369, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GFGoA5nhHNQ/AAAAAAAAAAI/AAAAAAAAACU/KkdI30RrULA/photo.jpg?sz=128", "display_name": "Megalegacy", "link": "https://stackoverflow.com/users/6601369/megalegacy"}, "edited": false, "score": 0, "creation_date": 1470867430, "post_id": 38884290, "comment_id": 65129655, "body": "<code>clientsocket.recv(4)</code> receive first four bytes which encodes data length,   than, bytes are converted to int using big-endian bytes order, the same which we used to encode int to bytes."}], "tags": [], "owner": {"reputation": 2086, "user_id": 4721937, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/939955c7df10b4632df32f8f5e7600d8?s=128&d=identicon&r=PG", "display_name": "warownia1", "link": "https://stackoverflow.com/users/4721937/warownia1"}, "is_accepted": true, "score": 1, "last_activity_date": 1470866513, "creation_date": 1470866513, "answer_id": 38884290, "question_id": 38883887, "link": "https://stackoverflow.com/questions/38883887/sockets-python-3-5-socket-server-hangs-forever-on-file-receive/38884290#38884290", "title": "Sockets Python 3.5: Socket server hangs forever on file receive", "body": "<p>I think I know what's the problem, but I may be wrong. It happened to me several times, that the entire message is not received in one <code>recv</code> call, even if I specify the correct length. However, you don't reach the end of stream, so your program keeps waiting for remaining of 8192 bytes which never arrives.</p>\n\n<p>Try this:<br>\nSending file:</p>\n\n<pre><code>#bit that sends the file\nwith open(msg.split()[1], 'rb') as r:\n   data = r.read()\n   # check data length in bytes and send it to client\n   data_length = len(data)\n   s.send(data_length.to_bytes(4, 'big'))\n   s.send(data)\ns.shutdown(socket.SHUT_RDWR)\ns.close()\n</code></pre>\n\n<p>Receiving the file:</p>\n\n<pre><code># check expected message length\nremaining = int.from_bytes(clientsocket.recv(4), 'big')\nd = open(inp, \"wb\")\nwhile remaining:\n    # until there are bytes left...\n    # fetch remaining bytes or 4094 (whatever smaller)\n    rbuf = clientsocket.recv(min(remaining, 4096))\n    remaining -= len(rbuf)\n    # write to file\n    d.write(rbuf)\nd.close()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "is_accepted": false, "score": 1, "last_activity_date": 1470867372, "creation_date": 1470867372, "answer_id": 38884446, "question_id": 38883887, "link": "https://stackoverflow.com/questions/38883887/sockets-python-3-5-socket-server-hangs-forever-on-file-receive/38884446#38884446", "title": "Sockets Python 3.5: Socket server hangs forever on file receive", "body": "<p>There are several issues with your code.</p>\n\n<p>First:</p>\n\n<pre><code>clientsocket.send(m.encode('utf-8'))\ndata = clientsocket.recv(10000)\n</code></pre>\n\n<p>This causes the file to be partially loaded to <code>data</code> variable when you issue <code>get</code> statement. That's why you don't get full file.</p>\n\n<p>Now this:</p>\n\n<pre><code>while True:\n    rbuf = clientsocket.recv(8192)                \n    if not rbuf:\n        break\n    ...\n</code></pre>\n\n<p>You indeed load full file but the client never closes the connection (it goes to <code>s.recv()</code> after sending the file) so <code>if</code> statement is never satisfied. Thus this loop gets blocked on the <code>clientsocket.recv(8192)</code> part after downloading the file.</p>\n\n<p>So the problem is that you have to somehow notify the downloader that you've sent all the data even though the connection is still open. There are several ways to do that:</p>\n\n<ol>\n<li><p>You calculate the size of the file and send it as a first few bytes. For example, say the content of the file is <code>ala ma kota</code>. These are 11 bytes and thus you send <code>\\x11ala ma kota</code>. Now receiver knows that first byte is size and it will interpret it as such. Of course one byte header isn't much (you would only be able to send max 256 byte files) so normally you go for for example 4 bytes. So now your protocol between client and server is: first 4 bytes is the size of the file. Thus our initial file would be sent as <code>\\x0\\x0\\x0\\x11ala ma kota</code>. The drawback of this solution is that you have to know the size of the content before sending it.</p></li>\n<li><p>You mark the end of the stream. So you pick a particular character, say <code>X</code> and you read the straem until you find <code>X</code>. If you do then you know that the other side sent everything it has. The drawback is that if <code>X</code> is in the content then you have to escape it, i.e. additional content processing (and interpretation on the other side) is needed.</p></li>\n</ol>\n"}], "owner": {"reputation": 35, "user_id": 6601369, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GFGoA5nhHNQ/AAAAAAAAAAI/AAAAAAAAACU/KkdI30RrULA/photo.jpg?sz=128", "display_name": "Megalegacy", "link": "https://stackoverflow.com/users/6601369/megalegacy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2083, "favorite_count": 0, "accepted_answer_id": 38884290, "answer_count": 2, "score": 2, "last_activity_date": 1490600231, "creation_date": 1470864615, "last_edit_date": 1490600231, "question_id": 38883887, "link": "https://stackoverflow.com/questions/38883887/sockets-python-3-5-socket-server-hangs-forever-on-file-receive", "title": "Sockets Python 3.5: Socket server hangs forever on file receive", "body": "<p>I'm trying to write a Python program that can browse directories and grab files w/ sockets if the client connects to the server. The browsing part works fine, it prints out all directories of the client.\nHere's a part of the code:</p>\n\n<pre><code>with clientsocket:\n    print('Connected to: ', addr)\n    while True:\n        m = input(\"Command &gt; \")\n\n        clientsocket.send(m.encode('utf-8'))\n        data = clientsocket.recv(10000)\n\n        if m == \"exit\":\n            clientsocket.close()\n        if m.split()[0] == 'get':\n            inp = input(\"Filename &gt; \")\n            while True:\n                rbuf = clientsocket.recv(8192)                \n                if not rbuf:\n                    break\n\n                d = open(inp, \"ab\")\n                d.write(rbuf)\n                d.close()\n\n\n        elif data.decode('utf-8').split()[0] == \"LIST\":\n            print(data.decode('utf-8'))\n        if not data:\n            break\n</code></pre>\n\n<p>However, the problem lies in here:</p>\n\n<pre><code>if m.split()[0] == 'get':\n    inp = input(\"Filename &gt; \")\n    while True:\n        rbuf = clientsocket.recv(8192)                \n        if not rbuf:\n            break\n</code></pre>\n\n<p>It seems to be stuck in an infinite loop. What's more interesting is that the file I'm trying to receive is 88.3kb, but what the file returns is 87kb while it's in the loop, which is very close...</p>\n\n<p>I tried receiving a python script at one time as well (without the loop) and it works fine.</p>\n\n<p>Here's some of the client code:</p>\n\n<pre><code>while True:\n    msg = s.recv(1024).decode('utf-8')\n\n\n    if msg.split()[0] == \"list\":\n        dirs = os.listdir(msg.split()[1])\n        string = ''\n        for dira in dirs:\n            string += \"LIST \" + dira + \"\\n\"\n        s.send(string.encode('utf-8'))\n    elif msg == \"exit\":\n        break\n    else:\n        #bit that sends the file\n        with open(msg.split()[1], 'rb') as r:\n            s.sendall(r.read())\n</code></pre>\n\n<p>So my question is, why is it getting stuck in an infinite loop if I have it set up to close when there is no data, and how can I fix this?</p>\n\n<p>I'm sort of new to network programming in general, so forgive me if I miss something obvious.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "sqlalchemy"], "comments": [{"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1470867010, "post_id": 38883871, "comment_id": 65129529, "body": "What constraints does it not handle? In other words, what is <code>Calendar</code> like? For indexes try <code>CreateIndex</code> mapped over <code>models.Calendar.__table__.indexes</code>."}], "answers": [{"tags": [], "owner": {"reputation": 327, "user_id": 3720614, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HlY6M.jpg?s=128&g=1", "display_name": "talhasch", "link": "https://stackoverflow.com/users/3720614/talhasch"}, "is_accepted": true, "score": 1, "last_activity_date": 1470870382, "creation_date": 1470870382, "answer_id": 38884932, "question_id": 38883871, "link": "https://stackoverflow.com/questions/38883871/sqlalchemy-show-creation-statement-with-indexes/38884932#38884932", "title": "SQLAlchemy - show creation statement with indexes", "body": "<p>if you set sqlalchemy logging to debug, you can read statements from logs.</p>\n\n<pre><code>import logging\nlogging.basicConfig()\nlogging.getLogger('sqlalchemy.engine').setLevel(logging.DEBUG)\n</code></pre>\n"}], "owner": {"reputation": 25313, "user_id": 238849, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0d6528a615c3cd4657d536fde14136f2?s=128&d=identicon&r=PG", "display_name": "synic", "link": "https://stackoverflow.com/users/238849/synic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 38884932, "answer_count": 1, "score": 0, "last_activity_date": 1470870382, "creation_date": 1470864543, "question_id": 38883871, "link": "https://stackoverflow.com/questions/38883871/sqlalchemy-show-creation-statement-with-indexes", "title": "SQLAlchemy - show creation statement with indexes", "body": "<p>I am working with a database system that will require me to run the <code>CREATE TABLE</code> manually on several nodes.  This means I need to be able to obtain the <code>CREATE</code> statement, complete with indexes.</p>\n\n<p>The following works to get the base schema:</p>\n\n<pre><code>from calendars import models\nfrom app import db\nfrom sqlalchemy import CreateTable\n\nprint(CreateTable(models.Calendar.__table__).compile(db.engine))\n</code></pre>\n\n<p>However, it does NOT print constraints or indexes.</p>\n\n<p>How do I also obtain those?</p>\n"}, {"tags": ["python", "linux", "database", "teradata", "rhel"], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 4840533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d4ca58eb122067d9a8d731078c0a692?s=128&d=identicon&r=PG&f=1", "display_name": "Cslayer20", "link": "https://stackoverflow.com/users/4840533/cslayer20"}, "edited": false, "score": 0, "creation_date": 1471353019, "post_id": 38954036, "comment_id": 65304800, "body": "Thank you for answer, it&#39;s a Linux version 2.6.32-573.12.1.el6.x86_64 (mockbuild@x86-ol6-builder-05) (gcc version 4.4.7 20120313 (Red Hat 4.4.7-16) (GCC) ) and python version installed is 2.7.12"}], "tags": [], "owner": {"reputation": 495, "user_id": 4157382, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-p4R0mflSARc/AAAAAAAAAAI/AAAAAAAAAB4/FCzNkmnlyaQ/photo.jpg?sz=128", "display_name": "Mike Guerette", "link": "https://stackoverflow.com/users/4157382/mike-guerette"}, "is_accepted": false, "score": 0, "last_activity_date": 1471259692, "creation_date": 1471259692, "answer_id": 38954036, "question_id": 38883830, "link": "https://stackoverflow.com/questions/38883830/correct-way-to-configure-connection-between-teradata-and-python-on-linux-rhel/38954036#38954036", "title": "Correct way to configure connection between Teradata and python on Linux RHEL", "body": "<p>Which version of RHEL?  This is only a guess, but if it's RHEL 6, Python 2.7 is not installed by default so install Python 2.7 via Software Collections (part of most subscription).  See <a href=\"http://developers.redhat.com/products/softwarecollections/get-started-rhel6-python/\" rel=\"nofollow\">http://developers.redhat.com/products/softwarecollections/get-started-rhel6-python/</a> and install python27 version.</p>\n"}], "owner": {"reputation": 57, "user_id": 4840533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d4ca58eb122067d9a8d731078c0a692?s=128&d=identicon&r=PG&f=1", "display_name": "Cslayer20", "link": "https://stackoverflow.com/users/4840533/cslayer20"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 581, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471259692, "creation_date": 1470864350, "question_id": 38883830, "link": "https://stackoverflow.com/questions/38883830/correct-way-to-configure-connection-between-teradata-and-python-on-linux-rhel", "title": "Correct way to configure connection between Teradata and python on Linux RHEL", "body": "<p>I installed teradata module for python2.7, the teradata client 15.00, also set the environment variables ODBCINI, ODBCINST and LD_LIBRARY_PATH correctly. But when I create my connection in my py script:</p>\n\n<pre><code>odbclib=\"/opt/teradata/client/15.00/odbc_64/lib/libodbc.so\"\nudaExec = teradata.UdaExec (appName=\"terapp\", version=\"1.0\", logConsole=True, odbcLibPath=odbclib)\nsession = udaExec.connect(method=\"odbc\", system=\"XXX.XX.XX.XX\",username=user, password=pass)\n</code></pre>\n\n<p>I got this: </p>\n\n<pre><code>File \"build/bdist.linux-x86_64/egg/teradata/udaexec.py\", line 183, in connect\n  File \"build/bdist.linux-x86_64/egg/teradata/tdodbc.py\", line 374, in __init__\n  File \"build/bdist.linux-x86_64/egg/teradata/tdodbc.py\", line 206, in checkStatus\n teradata.api.DatabaseError: (0, u'[IM003] [DataDirect][ODBC lib] Specified driver could not be loaded')\n</code></pre>\n\n<p>Please, any help clever people</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 3986, "user_id": 135237, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/39fd944926ba18b00705b66f8e96e188?s=128&d=identicon&r=PG", "display_name": "Mikhail Churbanov", "link": "https://stackoverflow.com/users/135237/mikhail-churbanov"}, "edited": false, "score": 0, "creation_date": 1470864755, "post_id": 38883803, "comment_id": 65128669, "body": "Just use the integer division and it&#39;s remainder - e.g. row = input / rowlength, while col = input % rowlength. as you count rows from top to bottom, row will be reverted, but hope you get the idea."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 3575186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bec69768e122d1ffc21924861c6f11a2?s=128&d=identicon&r=PG&f=1", "display_name": "Weffe", "link": "https://stackoverflow.com/users/3575186/weffe"}, "edited": false, "score": 0, "creation_date": 1470867048, "post_id": 38884045, "comment_id": 65129544, "body": "Wow it works! Yeah, sorry if I wasn&#39;t clear in my original post of how it works. The function prompts the user for input and then takes that input and returns the &quot;real value&quot; aka (2,2) for example. Thanks for the help. Now i just need to figure out how to check if the position the player wants to insert into is valid. So that its not out of bounds."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 0, "last_activity_date": 1470865307, "creation_date": 1470865307, "answer_id": 38884045, "question_id": 38883803, "link": "https://stackoverflow.com/questions/38883803/ways-to-make-a-function-with-dynamic-bound-checking-in-tictactoe-game/38884045#38884045", "title": "Ways to make a function with dynamic bound checking in TicTacToe Game", "body": "<p>a little more complex than divide &amp; modulo since rows are not in the correct order</p>\n\n<p>Here's a generic function which works for all values </p>\n\n<pre><code>def  get_player_loc_input( nb_rows, nb_cols, pinput):\n    pinput -= 1\n    rval = (nb_rows-(pinput//nb_cols)-1,pinput%nb_cols)\n    return rval\n\nprint(get_player_loc_input(3,3,3))\nprint(get_player_loc_input(3,3,4))\nprint(get_player_loc_input(3,3,7))\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>(2, 2)\n(1, 0)\n(0, 0)\n</code></pre>\n\n<p>Note that there must be a problem with your code, as you have a method, a <code>self</code> and still passing <code>nb_rows</code> &amp; <code>nb_cols</code> as a parameter. Should be class members (and <code>translated_input</code> is not defined)</p>\n"}], "owner": {"reputation": 23, "user_id": 3575186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bec69768e122d1ffc21924861c6f11a2?s=128&d=identicon&r=PG&f=1", "display_name": "Weffe", "link": "https://stackoverflow.com/users/3575186/weffe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 38884045, "answer_count": 1, "score": 0, "last_activity_date": 1470865307, "creation_date": 1470864227, "question_id": 38883803, "link": "https://stackoverflow.com/questions/38883803/ways-to-make-a-function-with-dynamic-bound-checking-in-tictactoe-game", "title": "Ways to make a function with dynamic bound checking in TicTacToe Game", "body": "<p>First off thanks for trying to help out.</p>\n\n<p>I have a TicTacToe game completed in python which you can check out here: <a href=\"https://github.com/Weffe/TicTacToe\" rel=\"nofollow\">https://github.com/Weffe/TicTacToe</a></p>\n\n<p>Currently, everything runs perfectly fine for a 3x3 playing field. I wanted to make the game dynamic in the sense that it can easily scale up to 9x9 with no problems. However, I'm a bit brain dead and can't figure out the cleanest way to make this possible. The main issues lies in Player.py's function get_player_loc_input(). </p>\n\n<p>The way it is right now, it's only configured for a 3x3 playing field. However, I want to make it dynamic.</p>\n\n<p>Original code:</p>\n\n<pre><code>def get_player_loc_input(self):\n    player_input = input('Enter in location for your move: ')  # player input is with respect to field index location\n    translated_input = int(player_input)\n\n    if 7 &lt;= translated_input &lt;= 9:\n        translated_input = [0, (translated_input - 7)]  # row, col\n    elif 4 &lt;= translated_input &lt;= 6:\n        translated_input = [1, (translated_input - 4)]  # row, col\n    elif 1 &lt;= translated_input &lt;= 3:\n        translated_input = [2, (translated_input - 1)]  # row, col\n    else:\n        raise ValueError('Input is not an index on the playing field. Try again\\n')\n    return translated_input\n</code></pre>\n\n<p>My current dynamic attempt:</p>\n\n<pre><code>def get_player_loc_input(self, num_rows, num_cols):\n    value = num_rows*num_cols\n    num_rows = num_rows - 1 #adjust from n+1 to n\n    for x in range(value, 0, 3):\n        lower_bound = x-2\n        upper_bound = x\n        if lower_bound &lt;= translated_input &lt;= upper_bound:\n            translated_input = [num_rows, (translated_input - lower_bound)]\n            num_rows = num_rows - 1 #move down to the next row we're on\n    return translated_input\n</code></pre>\n\n<p>A picture of the playing field</p>\n\n<pre><code>-------------\n| 7 | 8 | 9 | #row 0\n-------------\n| 4 | 5 | 6 | #row 1\n-------------\n| 1 | 2 | 3 | #row 2\n-------------\n</code></pre>\n\n<p>The way it works is by inputting the number of the index you want to replace. Then the function converts that number to a [row,col] \"value\". </p>\n\n<p>So for example, 4 => [1,0] \nOR 3 => [2,2]</p>\n\n<p>Any ideas? Gonna go do something else for a bit to clear my head.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1470863937, "post_id": 38883704, "comment_id": 65128311, "body": "Put a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> <b>in the question itself</b>."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6011002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87242e9a95ad76d1f382d7e6a61ec6c0?s=128&d=identicon&r=PG&f=1", "display_name": "Matt S", "link": "https://stackoverflow.com/users/6011002/matt-s"}, "edited": false, "score": 0, "creation_date": 1470864267, "post_id": 38883760, "comment_id": 65128482, "body": "Perfect! Thank you for the help, that makes more sense and is a lot cleaner to read. Are there any maximums to be watchful of for how many elif I could include?"}, {"owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "reply_to_user": {"reputation": 11, "user_id": 6011002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87242e9a95ad76d1f382d7e6a61ec6c0?s=128&d=identicon&r=PG&f=1", "display_name": "Matt S", "link": "https://stackoverflow.com/users/6011002/matt-s"}, "edited": false, "score": 0, "creation_date": 1470864870, "post_id": 38883760, "comment_id": 65128710, "body": "I&#39;m not sure of any maximums, but in the case of a substantial number, you should consider using a dictionary, accessed using the value of <code>door_choice</code>"}], "tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": false, "score": 1, "last_activity_date": 1470863966, "creation_date": 1470863966, "answer_id": 38883760, "question_id": 38883704, "link": "https://stackoverflow.com/questions/38883704/user-input-not-responding-with-if-else-statements-correctly/38883760#38883760", "title": "User Input Not Responding With If/Else Statements Correctly", "body": "<p>You should chain those separate <code>if-else</code> blocks into one <code>if-elif-else</code> block:</p>\n\n<pre><code>if door_choice == '1':\n    room_one()\nelif door_choice == '2':\n    room_two()\nelif door_choice == '3':\n    room_three()\nelse:\n    print \"I don't recognize that choice, try again!\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2086, "user_id": 4721937, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/939955c7df10b4632df32f8f5e7600d8?s=128&d=identicon&r=PG", "display_name": "warownia1", "link": "https://stackoverflow.com/users/4721937/warownia1"}, "is_accepted": false, "score": 1, "last_activity_date": 1470864065, "creation_date": 1470864065, "answer_id": 38883779, "question_id": 38883704, "link": "https://stackoverflow.com/questions/38883704/user-input-not-responding-with-if-else-statements-correctly/38883779#38883779", "title": "User Input Not Responding With If/Else Statements Correctly", "body": "<p>The problem is in your if statements. Your program encounters <code>if door_choice == '1'</code> which is false, so it jumps to the next else statement and prints <code>\"I don't recognize that choice, try again!\"</code></p>\n\n<p>Instead if first is not true, then check second, if not true check third, if not true, invalid choice.</p>\n\n<pre><code>if door_choice == '1':\n    room_one()\nelif door_choice == '2':\n    room_two()\nelif door_choice == '3':\n    room_three()  \nelse:\n    print \"I don't recognize that choice, try again!\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 6011002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87242e9a95ad76d1f382d7e6a61ec6c0?s=128&d=identicon&r=PG&f=1", "display_name": "Matt S", "link": "https://stackoverflow.com/users/6011002/matt-s"}, "edited": false, "score": 0, "creation_date": 1470864443, "post_id": 38883805, "comment_id": 65128549, "body": "This is an interesting approach."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 11, "user_id": 6011002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87242e9a95ad76d1f382d7e6a61ec6c0?s=128&d=identicon&r=PG&f=1", "display_name": "Matt S", "link": "https://stackoverflow.com/users/6011002/matt-s"}, "edited": false, "score": 0, "creation_date": 1470865610, "post_id": 38883805, "comment_id": 65129021, "body": "thanks. As Moses says, and if you want to get rid of numerical input but prefer North, West, East ... you can put the function pointers in a dictionary it&#39;s almost identical."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 1, "last_activity_date": 1470864250, "creation_date": 1470864250, "answer_id": 38883805, "question_id": 38883704, "link": "https://stackoverflow.com/questions/38883704/user-input-not-responding-with-if-else-statements-correctly/38883805#38883805", "title": "User Input Not Responding With If/Else Statements Correctly", "body": "<p>Besides the obvious \"pass in else everytime\" effect, you can use a table and function pointers to save the if/elif constructions if you have a lot of cases.</p>\n\n<pre><code>room_funcs = [room_one,room_two,room_three]\nidx = int(door_choice)-1\nif 0 &lt;= idx &lt; len(room_funcs):\n   room_funcs[idx]()\nelse:\n   print(\"I don't recognize that choice, try again!\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3966, "user_id": 469072, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/13ce453eb105a974aea64b2461cfc200?s=128&d=identicon&r=PG", "display_name": "joel goldstick", "link": "https://stackoverflow.com/users/469072/joel-goldstick"}, "edited": false, "score": 0, "creation_date": 1470866591, "post_id": 38883997, "comment_id": 65129398, "body": "you need lowercase on your elif and else statements"}, {"owner": {"reputation": 45, "user_id": 3127194, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/100003360900449/picture?type=large", "display_name": "ProTheJoker", "link": "https://stackoverflow.com/users/3127194/prothejoker"}, "reply_to_user": {"reputation": 3966, "user_id": 469072, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/13ce453eb105a974aea64b2461cfc200?s=128&d=identicon&r=PG", "display_name": "joel goldstick", "link": "https://stackoverflow.com/users/469072/joel-goldstick"}, "edited": false, "score": 0, "creation_date": 1470904936, "post_id": 38883997, "comment_id": 65142529, "body": "Ikr, but my Android device decided to automatically put them in caps, and I didn&#39;t notice :D"}], "tags": [], "owner": {"reputation": 45, "user_id": 3127194, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/100003360900449/picture?type=large", "display_name": "ProTheJoker", "link": "https://stackoverflow.com/users/3127194/prothejoker"}, "is_accepted": false, "score": 0, "last_activity_date": 1470928242, "last_edit_date": 1470928242, "creation_date": 1470865064, "answer_id": 38883997, "question_id": 38883704, "link": "https://stackoverflow.com/questions/38883704/user-input-not-responding-with-if-else-statements-correctly/38883997#38883997", "title": "User Input Not Responding With If/Else Statements Correctly", "body": "<pre><code>If door_choice == '1'\n  Room_one()\nelif door_choice == '2'\n  Room_two()\nelif door_choice == '3'\n  Room_three()\nelse\n  Print \"please input a value between 1 and 3\n</code></pre>\n\n<p>You had some bad logics.\nIf you input 1, then that's correct otherwise error appears, however you check again for input 2 and get the wished result and then check again for input 3 but error appears again.</p>\n\n<p>Using else if or elif in python is one of the way to get to the result.\nThere are also switches if you need to do more cases</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 6371537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l7LxC.png?s=128&g=1", "display_name": "Olivier Liu", "link": "https://stackoverflow.com/users/6371537/olivier-liu"}, "edited": false, "score": 0, "creation_date": 1470872932, "post_id": 38885115, "comment_id": 65131112, "body": "I know that this code is inefficient, but it is the structure that you have first proposed. This can easily be done with less lines/characters."}], "tags": [], "owner": {"reputation": 21, "user_id": 6371537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l7LxC.png?s=128&g=1", "display_name": "Olivier Liu", "link": "https://stackoverflow.com/users/6371537/olivier-liu"}, "is_accepted": false, "score": 0, "last_activity_date": 1470872566, "last_edit_date": 1470872566, "creation_date": 1470871763, "answer_id": 38885115, "question_id": 38883704, "link": "https://stackoverflow.com/questions/38883704/user-input-not-responding-with-if-else-statements-correctly/38885115#38885115", "title": "User Input Not Responding With If/Else Statements Correctly", "body": "<p>EDIT: As for maximums there is one <code>if</code> statement, chained by any amount of <code>elif</code> statements. However, there can only be 1 <code>else</code> statements per <code>if</code>.</p>\n\n<p>TutorialsPoint has a great page regarding if/elif/else: <a href=\"http://www.tutorialspoint.com/python/python_if_else.htm\" rel=\"nofollow\">http://www.tutorialspoint.com/python/python_if_else.htm</a></p>\n\n<p>\"The else statement is an optional statement and there could be at most only one else statement following if .\"</p>\n\n<p>I don't think your indentation is right. Indent all of the else statements by 4 spaces additionally after the <code>if</code> statements, and change them to <code>if</code>. Also take away the last <code>else</code> statement.</p>\n\n<p>I'll show you what I mean.</p>\n\n<pre><code>if door_choice == '1':\n    room_one()\n    if door_choice != 1 or 2 or 3:\n        print \"I don't recognize that choice, try again!\"\n\nif door_choice == '2':\n    room_two()\n    if door_choice != 1 or 2 or 3:\n        print \"I don't recognize that choice, try again!\"\n\nif door_choice == '3':\n    room_three()\n    if door_choice != 1 or 2 or 3:\n        print \"I don't recognize that choice, try again!\"\n</code></pre>\n\n<p>Also, your not giving the user input after you say \"I don't recognize that choice, try again!\"</p>\n"}], "owner": {"reputation": 11, "user_id": 6011002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87242e9a95ad76d1f382d7e6a61ec6c0?s=128&d=identicon&r=PG&f=1", "display_name": "Matt S", "link": "https://stackoverflow.com/users/6011002/matt-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 5, "score": -1, "last_activity_date": 1470928242, "creation_date": 1470863765, "last_edit_date": 1470863985, "question_id": 38883704, "link": "https://stackoverflow.com/questions/38883704/user-input-not-responding-with-if-else-statements-correctly", "title": "User Input Not Responding With If/Else Statements Correctly", "body": "<p>I'm working through Learning Python the Hard Way and I'm currently creating a game. For some reason my if/else statements are not properly working. Here is the related part in my current script:   </p>\n\n<pre><code>if door_choice == '1':\n    room_one()\nelse:\n    print \"I don't recognize that choice, try again!\"\n\nif door_choice == '2':\n    room_two()\nelse:\n    print \"I don't recognize that choice, try again!\"\n\nif door_choice == '3':\n    room_three()\nelse:\n    print \"I don't recognize that choice, try again!\"\n</code></pre>\n\n<p>Whatever number I use to type in my input, I still receive the other answers' else statement, for example:</p>\n\n<pre><code>You see 3 doors.\nYou must choose either 1, 2 or 3.\n&gt; 2\nI don't recognize that choice, try again!\nThe second room is dark and smelly but you see a gold chest!\nDo you open the chest or just give up?\nI don't recognize that choice, try again!\n</code></pre>\n\n<p>The print statement for \"I don't recognize that choice, try again!\" should not show up if I input the designated number. I tried adding integer to my input and having my door choice variable not as a string and still no luck.</p>\n"}, {"tags": ["python", "c++", "boost-python", "web-site-project"], "comments": [{"owner": {"reputation": 1525, "user_id": 6664393, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe985e0b1cf77b72acb4e0058029acda?s=128&d=identicon&r=PG&f=1", "display_name": "user357269", "link": "https://stackoverflow.com/users/6664393/user357269"}, "edited": false, "score": 0, "creation_date": 1470864692, "post_id": 38883660, "comment_id": 65128645, "body": "You could try using numpy directly if you wanna work with matrices. It&#39;s fast."}, {"owner": {"reputation": 71, "user_id": 4704247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e92a8aec87d6e9139ef11e1c5c8260b3?s=128&d=identicon&r=PG&f=1", "display_name": "doody1986", "link": "https://stackoverflow.com/users/4704247/doody1986"}, "reply_to_user": {"reputation": 1525, "user_id": 6664393, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe985e0b1cf77b72acb4e0058029acda?s=128&d=identicon&r=PG&f=1", "display_name": "user357269", "link": "https://stackoverflow.com/users/6664393/user357269"}, "edited": false, "score": 0, "creation_date": 1470865052, "post_id": 38883660, "comment_id": 65128776, "body": "numpy is good but for big data problem, I think C++ is faster. That&#39;s why I want to use C++ implemented function as the computation engine"}], "answers": [{"tags": [], "owner": {"reputation": 1525, "user_id": 6664393, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe985e0b1cf77b72acb4e0058029acda?s=128&d=identicon&r=PG&f=1", "display_name": "user357269", "link": "https://stackoverflow.com/users/6664393/user357269"}, "is_accepted": false, "score": 0, "last_activity_date": 1470865480, "creation_date": 1470865480, "answer_id": 38884078, "question_id": 38883660, "link": "https://stackoverflow.com/questions/38883660/is-there-a-good-way-to-send-data-from-python-context-to-c-without-too-much-cop/38884078#38884078", "title": "Is there a good way to send data from python context to C++ without too much copy involved", "body": "<p>There's a project called ndarray with this as their exact aim: <a href=\"https://github.com/ndarray/ndarray\" rel=\"nofollow\">https://github.com/ndarray/ndarray</a> see also <a href=\"https://github.com/ndarray/Boost.NumPy\" rel=\"nofollow\">https://github.com/ndarray/Boost.NumPy</a> .</p>\n\n<p>There is some compatibility with other C++ matrix libraries (eg. Eigen) which should help with the computations.</p>\n"}, {"comments": [{"owner": {"reputation": 237, "user_id": 2791928, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f35331d251b247e403d03c8e7fda371a?s=128&d=identicon&r=PG&f=1", "display_name": "shayst", "link": "https://stackoverflow.com/users/2791928/shayst"}, "edited": false, "score": 0, "creation_date": 1574071594, "post_id": 38886567, "comment_id": 104086197, "body": "I know it&#39;s an old question, but could you explain the reason to manually decrease ref count of pobj?"}], "tags": [], "owner": {"reputation": 7948, "user_id": 4899330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/857a19fa016a8fc6c0a3250f03f108a9?s=128&d=identicon&r=PG&f=1", "display_name": "doqtor", "link": "https://stackoverflow.com/users/4899330/doqtor"}, "is_accepted": false, "score": 3, "last_activity_date": 1470884417, "creation_date": 1470884417, "answer_id": 38886567, "question_id": 38883660, "link": "https://stackoverflow.com/questions/38883660/is-there-a-good-way-to-send-data-from-python-context-to-c-without-too-much-cop/38886567#38886567", "title": "Is there a good way to send data from python context to C++ without too much copy involved", "body": "<blockquote>\n  <p>However, every time I send a data from python, say a matrix, to C++, I\n  have to use python list, which means I have to transform the matrix\n  data into list and in C++ context transform the list into an internal\n  matrix object.</p>\n</blockquote>\n\n<p>No, you don't have to use the python list. You can use numpy array which allocates data as a C contiguous segment which can be passed down to C++ without copying and viewed as a matrix using a matrix wrapper class.</p>\n\n<p>In python allocate 2d array using numpy:</p>\n\n<pre><code>&gt;&gt;&gt; y=np.empty((2,5), dtype=np.int16)\n&gt;&gt;&gt; y\narray([[   12, 27750, 26465,  2675,     0],\n       [    0,     0,     0,  2601,     0]], dtype=int16)\n&gt;&gt;&gt; y.flags['C_CONTIGUOUS']\nTrue\n&gt;&gt;&gt; foo(y,2,5)\n</code></pre>\n\n<p>Pass matrix data to C++ using below function exposed to python:</p>\n\n<pre><code>void foo(python::object obj, size_t size1, size_t size2)\n{\n    PyObject* pobj = obj.ptr();\n    Py_buffer pybuf;\n    PyObject_GetBuffer(pobj, &amp;pybuf, PyBUF_SIMPLE);\n    void *buf = pybuf.buf;\n    int16_t *p = (int16_t*)buf;\n    Py_XDECREF(pobj);\n\n    MyMatrixWrapper matrix(p, size1, size2);\n    // ....\n}\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 4704247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e92a8aec87d6e9139ef11e1c5c8260b3?s=128&d=identicon&r=PG&f=1", "display_name": "doody1986", "link": "https://stackoverflow.com/users/4704247/doody1986"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1470884417, "creation_date": 1470863615, "question_id": 38883660, "link": "https://stackoverflow.com/questions/38883660/is-there-a-good-way-to-send-data-from-python-context-to-c-without-too-much-cop", "title": "Is there a good way to send data from python context to C++ without too much copy involved", "body": "<p>The title could be confusing. Here I will state my question more clearly.</p>\n\n<p>I want to create a website based on python (a lot of existing framework like Flask and cherryPy) and along with a C++ computation engine for the sake of processing speed. So I need to create an interface for python to call C++ functions. Fortunately the boost.python can do the job. However, every time I send a data from python, say a matrix, to C++, I have to use python list, which means I have to transform the matrix data into list and in C++ context transform the list into an internal matrix object. As a result, a lot of data copy occur, which could not be an intelligent or efficient approach. So my questions is that if, considering the complexity, we don't map C++ matrix class to a python class through boost.python, is there a better way to do the similar work without or only with small number of copy?</p>\n"}, {"tags": ["python", "python-2.7", "archive", "shutil"], "answers": [{"tags": [], "owner": {"reputation": 1525, "user_id": 6664393, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe985e0b1cf77b72acb4e0058029acda?s=128&d=identicon&r=PG&f=1", "display_name": "user357269", "link": "https://stackoverflow.com/users/6664393/user357269"}, "is_accepted": false, "score": 5, "last_activity_date": 1470864318, "last_edit_date": 1495541357, "creation_date": 1470863828, "answer_id": 38883728, "question_id": 38883595, "link": "https://stackoverflow.com/questions/38883595/creating-archive-with-shutil-make-archive-while-excluding-some-paths/38883728#38883728", "title": "Creating archive with shutil.make_archive() while excluding some path(s)", "body": "<p>I don't think this is possible with directly with shutil. It is possible to do it with tarfile (which is used by shutil internally anyway)</p>\n\n<p><a href=\"https://docs.python.org/2/library/tarfile.html#tarfile.TarFile.add\" rel=\"nofollow noreferrer\">Tarfile.add</a> has a filter argument that you can use precisely for this purpose.</p>\n\n<p>See also this answer: <a href=\"https://stackoverflow.com/questions/16000794/python-tarfile-and-excludes\">Python tarfile and excludes</a></p>\n\n<pre><code>EXCLUDE_FILES = ['dir2/dirA']\ntar = tarfile.open(\"sample.tar.gz\", \"w:gz\")\ntar.add(\"workingDir\", filter=lambda x: None if x.name in EXCLUDE_FILES else x)\ntar.close()\n</code></pre>\n"}], "owner": {"reputation": 12150, "user_id": 1143724, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/47fa5f1bc077c8158fe5ad1287105381?s=128&d=identicon&r=PG", "display_name": "MrDuk", "link": "https://stackoverflow.com/users/1143724/mrduk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2145, "favorite_count": 1, "answer_count": 1, "score": 8, "last_activity_date": 1470864318, "creation_date": 1470863382, "question_id": 38883595, "link": "https://stackoverflow.com/questions/38883595/creating-archive-with-shutil-make-archive-while-excluding-some-paths", "title": "Creating archive with shutil.make_archive() while excluding some path(s)", "body": "<p>Is there a way to have <code>shutil.make_archive</code> exclude some child directories, or alternatively, is there a way to append directories to a single archive through <code>shutil</code>?</p>\n\n<p><strong>Examples are fun</strong>:</p>\n\n<pre><code>/root\n  /workingDir\n      /dir1\n      /dir2\n          /dirA\n          /dirB\n      /dir3   \n</code></pre>\n\n<p>Suppose I wanted to create an archive from within <code>workingDir</code> that included everything <em>except</em> for <code>dirA</code> -- how could I do this? Is it possible without writing a method to loop through the entire tree?</p>\n"}, {"tags": ["python", "string", "byte"], "comments": [{"owner": {"reputation": 2159, "user_id": 92200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/adcd1bf065d7964320f5e69ca1fe9120?s=128&d=identicon&r=PG", "display_name": "Neil", "link": "https://stackoverflow.com/users/92200/neil"}, "edited": false, "score": 4, "creation_date": 1470863575, "post_id": 38883476, "comment_id": 65128127, "body": "Apart from removing the \\x00 from your string, you might want to put some thought into why you have them in the first place. Maybe the code that builds the strings could deal with them?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1470864321, "post_id": 38883476, "comment_id": 65128506, "body": "The code you wrote that produces this string is probably wrong."}, {"owner": {"reputation": 481, "user_id": 2219516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8adb485885d507c723e8705b632af01?s=128&d=identicon&r=PG", "display_name": "Luffy Cyliu", "link": "https://stackoverflow.com/users/2219516/luffy-cyliu"}, "reply_to_user": {"reputation": 2159, "user_id": 92200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/adcd1bf065d7964320f5e69ca1fe9120?s=128&d=identicon&r=PG", "display_name": "Neil", "link": "https://stackoverflow.com/users/92200/neil"}, "edited": false, "score": 0, "creation_date": 1470898162, "post_id": 38883476, "comment_id": 65138433, "body": "@Neil, It is because I am a C-wrapper where I should provided max possible length for the string. For those strings which are short, &quot;\\x00&quot;s are appended at the end."}, {"owner": {"reputation": 2159, "user_id": 92200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/adcd1bf065d7964320f5e69ca1fe9120?s=128&d=identicon&r=PG", "display_name": "Neil", "link": "https://stackoverflow.com/users/92200/neil"}, "edited": false, "score": 1, "creation_date": 1471028279, "post_id": 38883476, "comment_id": 65206367, "body": "@LuffyCyliu, in the C-wrapper, consider including the actual length of the data when you convert the char array to a Python Object. <code>strlen</code> on an array will be faster than a Python str.rstrip or str.replace, and make the Python interface more intuitive. Maybe <a href=\"https://docs.python.org/3.5/c-api/bytes.html\" rel=\"nofollow noreferrer\">docs.python.org/3.5/c-api/bytes.html</a> and <code>PyBytes_FromStringAndSize()</code> would help."}], "answers": [{"tags": [], "owner": {"reputation": 2086, "user_id": 4721937, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/939955c7df10b4632df32f8f5e7600d8?s=128&d=identicon&r=PG", "display_name": "warownia1", "link": "https://stackoverflow.com/users/4721937/warownia1"}, "is_accepted": true, "score": 39, "last_activity_date": 1470863073, "creation_date": 1470863073, "answer_id": 38883513, "question_id": 38883476, "link": "https://stackoverflow.com/questions/38883476/how-to-remove-those-x00-x00/38883513#38883513", "title": "How to remove those &quot;\\x00\\x00&quot;", "body": "<p>Use <code>rstrip</code></p>\n\n<pre><code>&gt;&gt;&gt; text = 'Hello\\x00\\x00\\x00\\x00'\n&gt;&gt;&gt; text.rstrip('\\x00')\n'Hello'\n</code></pre>\n\n<p>It removes all <code>\\x00</code> characters at the end of the string.</p>\n"}, {"comments": [{"owner": {"reputation": 347, "user_id": 3453776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M1uuI.jpg?s=128&g=1", "display_name": "nnov", "link": "https://stackoverflow.com/users/3453776/nnov"}, "edited": false, "score": 1, "creation_date": 1594237426, "post_id": 38883536, "comment_id": 111059806, "body": "this should be the accepted answer, the question is how to remove a pattern from a string, not from the &quot;end of the string&quot;  like the current accepted answer, or &quot;the end and beginning of the string&quot;, etc."}], "tags": [], "owner": {"reputation": 5109, "user_id": 2373748, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/moadr.png?s=128&g=1", "display_name": "galaxyan", "link": "https://stackoverflow.com/users/2373748/galaxyan"}, "is_accepted": false, "score": 30, "last_activity_date": 1507122493, "last_edit_date": 1507122493, "creation_date": 1470863156, "answer_id": 38883536, "question_id": 38883476, "link": "https://stackoverflow.com/questions/38883476/how-to-remove-those-x00-x00/38883536#38883536", "title": "How to remove those &quot;\\x00\\x00&quot;", "body": "<pre><code>&gt;&gt;&gt; a = 'Hello\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00' \n&gt;&gt;&gt; a.replace('\\x00','')\n'Hello'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 199, "user_id": 10427899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eumRo.png?s=128&g=1", "display_name": "Sil", "link": "https://stackoverflow.com/users/10427899/sil"}, "edited": false, "score": 1, "creation_date": 1538419809, "post_id": 49364979, "comment_id": 92128881, "body": "Great answer, helped me a lot. By the way it might be worth mentioning that in some cases you need to split by b&#39;\\x00&#39; instead of &#39;\\x00&#39; (if you actually are working with bytes, which in this case could happen)"}], "tags": [], "owner": {"reputation": 1328, "user_id": 3574271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rABWl.png?s=128&g=1", "display_name": "anregen", "link": "https://stackoverflow.com/users/3574271/anregen"}, "is_accepted": false, "score": 5, "last_activity_date": 1521468514, "creation_date": 1521468514, "answer_id": 49364979, "question_id": 38883476, "link": "https://stackoverflow.com/questions/38883476/how-to-remove-those-x00-x00/49364979#49364979", "title": "How to remove those &quot;\\x00\\x00&quot;", "body": "<p>I think the more general solution is to use:</p>\n\n<pre><code>cleanstring = nullterminatedstring.split('\\x00',1)[0]\n</code></pre>\n\n<p>Which will <code>split</code> the string using <code>\\x00</code> as the delimeter <code>1</code> time.  The <code>split(...)</code> returns a 2 element list: everything before the null in addition to everything after the null (it removes the delimeter).  Appending <code>[0]</code> only returns the portion of the string before the first null (\\x00) character, which I believe is what you're looking for.</p>\n\n<p>The convention in some languages, specifically C-like, is that a single null character marks the end of the string.  For example, you should also expect to see strings that look like:</p>\n\n<pre><code>'Hello\\x00dpiecesofsomeoldstring\\x00\\x00\\x00'\n</code></pre>\n\n<p>The answer supplied here will handle that situation as well as the other examples.</p>\n"}, {"tags": [], "owner": {"reputation": 293, "user_id": 11243073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BS70O.jpg?s=128&g=1", "display_name": "sarlacii", "link": "https://stackoverflow.com/users/11243073/sarlacii"}, "is_accepted": false, "score": 4, "last_activity_date": 1615196699, "last_edit_date": 1615196699, "creation_date": 1562335312, "answer_id": 56904541, "question_id": 38883476, "link": "https://stackoverflow.com/questions/38883476/how-to-remove-those-x00-x00/56904541#56904541", "title": "How to remove those &quot;\\x00\\x00&quot;", "body": "<p>Building on the answers supplied, I suggest that strip() is more generic than rstrip() for cleaning up a data packet, as strip() removes chars from the beginning and the end of the supplied string, whereas rstrip() simply removes chars from the end of the string.</p>\n<p>However, NUL chars are not treated as whitespace by default by strip(), and as such you need to specify explicitly. This can catch you out, as print() will of course not show the NUL chars. My solution that I used was to clean the string using &quot;<code>.strip().strip('\\x00')</code>&quot;:</p>\n<pre><code>&gt;&gt;&gt; arbBytesFromSocket = b'\\x00\\x00\\x00\\x00hello\\x00\\x00\\x00\\x00'\n&gt;&gt;&gt; arbBytesAsString = arbBytesFromSocket.decode('ascii')\n&gt;&gt;&gt; print(arbBytesAsString)\nhello\n&gt;&gt;&gt; str(arbBytesAsString)\n'\\x00\\x00\\x00\\x00hello\\x00\\x00\\x00\\x00'\n&gt;&gt;&gt; arbBytesAsString = arbBytesFromSocket.decode('ascii').strip().strip('\\x00')\n&gt;&gt;&gt; str(arbBytesAsString)\n'hello'\n&gt;&gt;&gt;\n</code></pre>\n<p>This gives you the string/byte array required, without the NUL chars on each end, and also preserves any NUL chars inside the &quot;data packet&quot;, which is useful for received byte data that may contain valid NUL chars (eg. a C-type structure). NB. In this case the packet must be &quot;wrapped&quot;, i.e. surrounded by non-NUL chars (prefix and suffix), to allow correct detection, and thus only strip unwanted NUL chars.</p>\n"}], "owner": {"reputation": 481, "user_id": 2219516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8adb485885d507c723e8705b632af01?s=128&d=identicon&r=PG", "display_name": "Luffy Cyliu", "link": "https://stackoverflow.com/users/2219516/luffy-cyliu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63990, "favorite_count": 3, "accepted_answer_id": 38883513, "answer_count": 4, "score": 31, "last_activity_date": 1615196699, "creation_date": 1470862962, "last_edit_date": 1587499918, "question_id": 38883476, "link": "https://stackoverflow.com/questions/38883476/how-to-remove-those-x00-x00", "title": "How to remove those &quot;\\x00\\x00&quot;", "body": "<p>How to remove those \"\\x00\\x00\" in a string ?\nI have many of those strings (example shown below). I can use <code>re.sub</code> to replace those \"\\x00\". But I am wondering whether there is a better way to do that? Converting between unicode, bytes and string is always confusing.</p>\n\n<pre><code>'Hello\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00'.\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1470864255, "post_id": 38883470, "comment_id": 65128476, "body": "It&#39;s not an if/else <i>statement</i> on a single line; it&#39;s a conditional <i>expression</i>, selecting one of two values, not one of two return statements."}, {"owner": {"reputation": 2234, "user_id": 2757226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VwnbH.jpg?s=128&g=1", "display_name": "chapelo", "link": "https://stackoverflow.com/users/2757226/chapelo"}, "edited": false, "score": 0, "creation_date": 1470867673, "post_id": 38883470, "comment_id": 65129746, "body": "omit the second <code>return</code>"}], "answers": [{"tags": [], "owner": {"reputation": 7576, "user_id": 1603840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VJhqE.jpg?s=128&g=1", "display_name": "Karin", "link": "https://stackoverflow.com/users/1603840/karin"}, "is_accepted": true, "score": 8, "last_activity_date": 1470864045, "last_edit_date": 1470864045, "creation_date": 1470862974, "answer_id": 38883484, "question_id": 38883470, "link": "https://stackoverflow.com/questions/38883470/python-one-liner-if-else-statement/38883484#38883484", "title": "Python one-liner if else statement", "body": "<p>You can't have a return in the else clause. It should be:</p>\n\n<pre><code>def sum_double(a, b):\n  return 2*(a+b) if (a == b) else a+b\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47068, "user_id": 110028, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/089adf42acb1317826e9c08c3f06d904?s=128&d=identicon&r=PG", "display_name": "snakile", "link": "https://stackoverflow.com/users/110028/snakile"}, "is_accepted": false, "score": 4, "last_activity_date": 1470862999, "creation_date": 1470862999, "answer_id": 38883494, "question_id": 38883470, "link": "https://stackoverflow.com/questions/38883470/python-one-liner-if-else-statement/38883494#38883494", "title": "Python one-liner if else statement", "body": "<p>You should delete the second <code>return</code>.</p>\n\n<pre><code>def sum_double(a, b):\n    return 2*(a+b) if a == b else a+b\n</code></pre>\n\n<p>The value of the <code>2*(a+b) if a == b else a+b</code> expression is what you actually want to return.</p>\n"}, {"tags": [], "owner": {"reputation": 6519, "user_id": 2069380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac5cb90925b4059b6b2c0885c9ffaf?s=128&d=identicon&r=PG", "display_name": "Ohad Eytan", "link": "https://stackoverflow.com/users/2069380/ohad-eytan"}, "is_accepted": false, "score": 7, "last_activity_date": 1506487226, "last_edit_date": 1506487226, "creation_date": 1470863313, "answer_id": 38883580, "question_id": 38883470, "link": "https://stackoverflow.com/questions/38883470/python-one-liner-if-else-statement/38883580#38883580", "title": "Python one-liner if else statement", "body": "<p>You have 2 options:</p>\n\n<ol>\n<li><p>Use the <code>if/else</code> statement:</p>\n\n<pre><code>def sum_double(a, b):\n    if (a == b):                                 #if/else statement\n        return 2*(a+b) # &lt;--- return statement   #^\n    else:                                        #^\n        return a+b     # &lt;--- return statement   #^\n</code></pre></li>\n<li><p>Use the <code>if/else</code> conditional expression:</p>\n\n<pre><code>def sum_double(a, b):\n    return 2*(a+b) if (a == b) else a+b\n#         (^                          ^)  &lt;--- conditional expression \n#  (^                                 ^)  &lt;--- return statement\n</code></pre></li>\n</ol>\n\n<p>each has different syntax and meaning</p>\n"}, {"tags": [], "owner": {"reputation": 2234, "user_id": 2757226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VwnbH.jpg?s=128&g=1", "display_name": "chapelo", "link": "https://stackoverflow.com/users/2757226/chapelo"}, "is_accepted": false, "score": 0, "last_activity_date": 1470867459, "last_edit_date": 1470867459, "creation_date": 1470865914, "answer_id": 38884160, "question_id": 38883470, "link": "https://stackoverflow.com/questions/38883470/python-one-liner-if-else-statement/38884160#38884160", "title": "Python one-liner if else statement", "body": "<p>In Python, True, False are the same as 1, 0:</p>\n\n<pre><code>def sum_double(a, b): return ((a==b) + 1) * (a+b)\n</code></pre>\n\n<p>Or using lambda,</p>\n\n<pre><code>sum_double = lambda a, b: ((a==b) + 1) * (a+b)\n</code></pre>\n"}], "owner": {"reputation": 1811, "user_id": 3004041, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/e9c675dd9408721a8e8e1106774a9d11?s=128&d=identicon&r=PG&f=1", "display_name": "covfefe", "link": "https://stackoverflow.com/users/3004041/covfefe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2249, "favorite_count": 0, "accepted_answer_id": 38883484, "answer_count": 4, "score": 1, "last_activity_date": 1506487226, "creation_date": 1470862921, "last_edit_date": 1470863660, "question_id": 38883470, "link": "https://stackoverflow.com/questions/38883470/python-one-liner-if-else-statement", "title": "Python one-liner if else statement", "body": "<p>This problem is taken from codingbat. Given two int values, return their sum. Unless the two values are the same, then return double their sum.</p>\n\n<p>I'm trying to solve it in one line:</p>\n\n<pre><code>def sum_double(a, b):\n    return 2*(a+b) if (a == b) else return a+b\n</code></pre>\n\n<p>But I'm getting an error and I'm not sure why. Would appreciate any help.</p>\n"}, {"tags": ["python", "pandas", "dataframe", "group-by", "time-series"], "comments": [{"owner": {"reputation": 859, "user_id": 5937075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e51c074a03e45165f026cbd8d5042e6e?s=128&d=identicon&r=PG&f=1", "display_name": "SO44", "link": "https://stackoverflow.com/users/5937075/so44"}, "edited": false, "score": 0, "creation_date": 1470864589, "post_id": 38883465, "comment_id": 65128609, "body": "Are there always going to be 4 entries per second?"}, {"owner": {"reputation": 1657, "user_id": 3974476, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/88f06daddc0d94f9e85e71b20c294cf3?s=128&d=identicon&r=PG&f=1", "display_name": "AMisra", "link": "https://stackoverflow.com/users/3974476/amisra"}, "reply_to_user": {"reputation": 859, "user_id": 5937075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e51c074a03e45165f026cbd8d5042e6e?s=128&d=identicon&r=PG&f=1", "display_name": "SO44", "link": "https://stackoverflow.com/users/5937075/so44"}, "edited": false, "score": 0, "creation_date": 1470865243, "post_id": 38883465, "comment_id": 65128849, "body": "No, since there is missing data. These are actually samples collected per second.  The actual data has 100 samples per second but sometimes there is a missing entry."}, {"owner": {"reputation": 6581, "user_id": 3765319, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1262dca6cd7334e5eb75649272eea20d?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/3765319/kartik"}, "edited": false, "score": 0, "creation_date": 1470865625, "post_id": 38883465, "comment_id": 65129027, "body": "Examples in your question are not consistent. Second group takes 2 rows from 22:17:14, but third group does not take any from 22:17:15. First group takes all values from 22:17:15, but second group does not take all values from 22:17:16. Can you please clarify? I am thinking, what you need is all values from a given second + last 2 values from previous second + first 2 values from next second. Correct?"}, {"owner": {"reputation": 1657, "user_id": 3974476, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/88f06daddc0d94f9e85e71b20c294cf3?s=128&d=identicon&r=PG&f=1", "display_name": "AMisra", "link": "https://stackoverflow.com/users/3974476/amisra"}, "edited": false, "score": 0, "creation_date": 1470865926, "post_id": 38883465, "comment_id": 65129165, "body": "Each group consists of a 2 second window, but it moves in an overlapping way, where only half of the entries of a previous second go in next set. Hence take 1/2 entries from previous second + current second + 1/2 entries from next second. Third group takes 1/2 of the entries of previous second i.e entry number 13 and 14 are repeated  giving 13-20"}], "answers": [{"comments": [{"owner": {"reputation": 1657, "user_id": 3974476, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/88f06daddc0d94f9e85e71b20c294cf3?s=128&d=identicon&r=PG&f=1", "display_name": "AMisra", "link": "https://stackoverflow.com/users/3974476/amisra"}, "edited": false, "score": 0, "creation_date": 1470869014, "post_id": 38884195, "comment_id": 65130109, "body": "I get an error at this line                                                                                           prev_sec = df[df[&#39;header_sec&#39;].isin(name - pd.to_timedelta(1, unit=&#39;s&#39;))]    since &quot;header sec&quot; is the index and not  a column. I tried replacing it  to  df[df[df.index].isin(name - pd.to_timedelta(1, unit=&#39;s&#39;))]  but still gives a key error  &quot;TimedeltaIndex([&#39;17004 days 22:17:13&#39;, &#39;17004 days 22:17:13&#39;,\\n                &#39;17004 days 22:17:13&#39;, &#39;17004 days  .....                           not in index&quot;"}, {"owner": {"reputation": 6581, "user_id": 3765319, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1262dca6cd7334e5eb75649272eea20d?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/3765319/kartik"}, "reply_to_user": {"reputation": 1657, "user_id": 3974476, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/88f06daddc0d94f9e85e71b20c294cf3?s=128&d=identicon&r=PG&f=1", "display_name": "AMisra", "link": "https://stackoverflow.com/users/3974476/amisra"}, "edited": false, "score": 0, "creation_date": 1470870381, "post_id": 38884195, "comment_id": 65130479, "body": "Edited my answer. You need <code>df[df.index.isin(...)]</code>."}, {"owner": {"reputation": 1657, "user_id": 3974476, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/88f06daddc0d94f9e85e71b20c294cf3?s=128&d=identicon&r=PG&f=1", "display_name": "AMisra", "link": "https://stackoverflow.com/users/3974476/amisra"}, "edited": false, "score": 0, "creation_date": 1470871170, "post_id": 38884195, "comment_id": 65130679, "body": "I tried that too but it still gives an error                                                                  only list-like objects are allowed to be passed to isin(), you passed a [Timedelta]. This is because my index is already timedelta.                     This is what I do before groupby                                                                   df.loc[:,[&#39;header_stamp_secs_x&#39;]] = pd.to_timedelta(df.header_stamp_secs_x, unit=&#39;s&#39;) df.set_index(&#39;header_stamp_secs_x&#39;, inplace=True)"}, {"owner": {"reputation": 6581, "user_id": 3765319, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1262dca6cd7334e5eb75649272eea20d?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/3765319/kartik"}, "reply_to_user": {"reputation": 1657, "user_id": 3974476, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/88f06daddc0d94f9e85e71b20c294cf3?s=128&d=identicon&r=PG&f=1", "display_name": "AMisra", "link": "https://stackoverflow.com/users/3974476/amisra"}, "edited": false, "score": 0, "creation_date": 1470871348, "post_id": 38884195, "comment_id": 65130722, "body": "Oh yeah... That. Sorry for the oversight. The name is just a single entity, not a list. My mistake, I sincerely apologize for the back and forth. The edit to the answer should work."}, {"owner": {"reputation": 1657, "user_id": 3974476, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/88f06daddc0d94f9e85e71b20c294cf3?s=128&d=identicon&r=PG&f=1", "display_name": "AMisra", "link": "https://stackoverflow.com/users/3974476/amisra"}, "edited": false, "score": 0, "creation_date": 1470871916, "post_id": 38884195, "comment_id": 65130870, "body": "sorry for being novice with dataframes, but it did not work. I think because my index is timedelta and it says  only list-like objects are allowed to to be passed to isin(), you passed a [timedelta64]                                                                                                                                                                                print type(name - np.timedelta64(1, &#39;s&#39;))                                                               &lt;type &#39;numpy.timedelta64&#39;&gt;"}, {"owner": {"reputation": 6581, "user_id": 3765319, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1262dca6cd7334e5eb75649272eea20d?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/3765319/kartik"}, "reply_to_user": {"reputation": 1657, "user_id": 3974476, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/88f06daddc0d94f9e85e71b20c294cf3?s=128&d=identicon&r=PG&f=1", "display_name": "AMisra", "link": "https://stackoverflow.com/users/3974476/amisra"}, "edited": false, "score": 0, "creation_date": 1470872080, "post_id": 38884195, "comment_id": 65130907, "body": "No, you don&#39;t have to apologize for anything. I was too hasty in answering your question, and made mistakes. The edited answer has been tested and should work."}], "tags": [], "owner": {"reputation": 6581, "user_id": 3765319, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1262dca6cd7334e5eb75649272eea20d?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/3765319/kartik"}, "is_accepted": true, "score": 1, "last_activity_date": 1470871986, "last_edit_date": 1470871986, "creation_date": 1470866108, "answer_id": 38884195, "question_id": 38883465, "link": "https://stackoverflow.com/questions/38883465/groupby-with-overlapping-intervals-timeseries/38884195#38884195", "title": "groupby with overlapping intervals timeseries", "body": "<p>Here is a technique:</p>\n\n<pre><code>import numpy as np # if you have not already done this\n\ngrouped = df.groupby(df.index)\n\nfor name, group in grouped:\n    try:\n        prev_sec = df.loc[(name - pd.to_timedelta(1, unit='s')), :]\n    except KeyError:\n        prev_sec = pd.DataFrame(columns=group.columns)\n    try:\n        next_sec = df.loc[(name + pd.to_timedelta(1, unit='s')), :]\n    except KeyError:\n        next_sec = pd.DataFrame(columns=group.columns)\n    Pn = 2 # replace this with int(len(prev_sec)/2) to get half rows from previous second\n    Nn = 2 # replace this with int(len(next_sec)/2) to get half rows from next second\n    group = pd.concat([prev_sec.iloc[-Pn:,:], group, next_sec.iloc[:Nn,:]])\n\n    # Replace the below lines with your operations\n    print(name, group)\n</code></pre>\n"}], "owner": {"reputation": 1657, "user_id": 3974476, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/88f06daddc0d94f9e85e71b20c294cf3?s=128&d=identicon&r=PG&f=1", "display_name": "AMisra", "link": "https://stackoverflow.com/users/3974476/amisra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 618, "favorite_count": 0, "accepted_answer_id": 38884195, "answer_count": 1, "score": 1, "last_activity_date": 1470871986, "creation_date": 1470862909, "question_id": 38883465, "link": "https://stackoverflow.com/questions/38883465/groupby-with-overlapping-intervals-timeseries", "title": "groupby with overlapping intervals timeseries", "body": "<p>I have a time series in python pandas dataframe object and I want to create a group based on index but I want overlapping groups i.e groups are not distinct. The  header_sec is the index column.\nEach groups consists of a 2 second window. \n Input dataFrame</p>\n\n<pre><code>    header_sec\n1  17004 days 22:17:13 \n2  17004 days 22:17:13 \n3  17004 days 22:17:13 \n4  17004 days 22:17:13 \n5  17004 days 22:17:14\n6  17004 days 22:17:14\n7  17004 days 22:17:14\n8  17004 days 22:17:14\n9  17004 days 22:17:15\n10 17004 days 22:17:15\n11 17004 days 22:17:15\n12 17004 days 22:17:15\n13 17004 days 22:17:16\n14 17004 days 22:17:16\n15 17004 days 22:17:16\n16 17004 days 22:17:16\n17 17004 days 22:17:17\n18 17004 days 22:17:17\n19 17004 days 22:17:17\n20 17004 days 22:17:17\n</code></pre>\n\n<p>My first group should have</p>\n\n<pre><code>1  17004 days 22:17:13 \n2  17004 days 22:17:13 \n3  17004 days 22:17:13 \n4  17004 days 22:17:13 \n5  17004 days 22:17:14\n6  17004 days 22:17:14\n7  17004 days 22:17:14\n8  17004 days 22:17:14\n</code></pre>\n\n<p>The second group starts from the previous index and takes 1/2 of the records in previous second.</p>\n\n<pre><code>7  17004 days 22:17:14\n8  17004 days 22:17:14\n9  17004 days 22:17:15\n10 17004 days 22:17:15\n11 17004 days 22:17:15\n12 17004 days 22:17:15\n13 17004 days 22:17:16\n14 17004 days 22:17:16\n</code></pre>\n\n<p>Third group .....</p>\n\n<pre><code>13 17004 days 22:17:16\n14 17004 days 22:17:16\n15 17004 days 22:17:16\n16 17004 days 22:17:16\n17 17004 days 22:17:17\n18 17004 days 22:17:17\n19 17004 days 22:17:17\n20 17004 days 22:17:17\n</code></pre>\n\n<p>If I do groupby on index, </p>\n\n<pre><code>  dfgroup=df.groupby(df.index)\n</code></pre>\n\n<p>this gives one group per second. What would be the best way to merge these groups?</p>\n"}, {"tags": ["python", "pyspark"], "comments": [{"owner": {"reputation": 2364, "user_id": 671072, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/08c18df25af21cbdb106d7ecd5295a01?s=128&d=identicon&r=PG", "display_name": "ShuaiYuan", "link": "https://stackoverflow.com/users/671072/shuaiyuan"}, "edited": false, "score": 0, "creation_date": 1471008120, "post_id": 38883450, "comment_id": 65194888, "body": "It is impossible that you construct a DataFrame from <code>df([(&#39;one&#39;,1),(&#39;two&#39;,2),(&#39;three&#39;,3)],[(&#39;four&#39;,4)])</code>."}], "answers": [{"tags": [], "owner": {"reputation": 2364, "user_id": 671072, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/08c18df25af21cbdb106d7ecd5295a01?s=128&d=identicon&r=PG", "display_name": "ShuaiYuan", "link": "https://stackoverflow.com/users/671072/shuaiyuan"}, "is_accepted": false, "score": 0, "last_activity_date": 1471008050, "creation_date": 1471008050, "answer_id": 38919037, "question_id": 38883450, "link": "https://stackoverflow.com/questions/38883450/extracting-items-from-a-tuple-in-dataframe-in-pyspark/38919037#38919037", "title": "Extracting items from a tuple in dataframe in pyspark", "body": "<pre><code>from pyspark.sql.functions import udf, col\nfrom pyspark.sql.types import StringType\n\ndef append_x(val):\n    return val + 'x'\n\ndf = df.withColumn(\n    'appended',\n    udf(append_x, StringType())(col(colInput))\n)\n</code></pre>\n\n<p>Note that <code>colInput</code> is the name of column you want to append <code>x</code> to.</p>\n"}], "owner": {"reputation": 1, "user_id": 6702129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e94550d4ff8bc0f7246266547c876ebf?s=128&d=identicon&r=PG&f=1", "display_name": "user6702129", "link": "https://stackoverflow.com/users/6702129/user6702129"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 454, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471008050, "creation_date": 1470862861, "last_edit_date": 1470863108, "question_id": 38883450, "link": "https://stackoverflow.com/questions/38883450/extracting-items-from-a-tuple-in-dataframe-in-pyspark", "title": "Extracting items from a tuple in dataframe in pyspark", "body": "<p>I am just a beginner to pyspark  and data frames \nmy dtaframe is <code>df([('one',1),('two',2),('three',3)],[('four',4)])</code>\nso i want to concatenate x to each of the first elements in the tuple .\nex <code>onex, twox,threex,fourx</code>.\nany help is appreciated .\n<code>df.select()</code> is only giving the items in the first list . \nmk</p>\n"}, {"tags": ["python", "postgresql", "python-3.5"], "answers": [{"comments": [{"owner": {"reputation": 4324, "user_id": 3763848, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/47078b76755df9945b9094a82976a8b9?s=128&d=identicon&r=PG", "display_name": "Vassilis Pallas", "link": "https://stackoverflow.com/users/3763848/vassilis-pallas"}, "edited": false, "score": 0, "creation_date": 1470863822, "post_id": 38883698, "comment_id": 65128250, "body": "hehe! awesome! works like a charm! Thank you very much!!"}], "tags": [], "owner": {"reputation": 2934, "user_id": 6217490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/603a0fe24d8bc279817df2e4dcd2a433?s=128&d=identicon&r=PG&f=1", "display_name": "jmelesky", "link": "https://stackoverflow.com/users/6217490/jmelesky"}, "is_accepted": true, "score": 3, "last_activity_date": 1470863746, "creation_date": 1470863746, "answer_id": 38883698, "question_id": 38883437, "link": "https://stackoverflow.com/questions/38883437/can-not-print-updatedat-column-from-postgres/38883698#38883698", "title": "Can not print updatedAT column from Postgres", "body": "<p>Postgres column names default to lower-case. Since that column name has an upper-case letter in it, it must be quoted in order to be referenced. The same would be true if the column had a space or a special character in it. This query should work:</p>\n\n<pre><code>SELECT \"updatedAt\" FROM incidents\n</code></pre>\n"}], "owner": {"reputation": 4324, "user_id": 3763848, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/47078b76755df9945b9094a82976a8b9?s=128&d=identicon&r=PG", "display_name": "Vassilis Pallas", "link": "https://stackoverflow.com/users/3763848/vassilis-pallas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 0, "accepted_answer_id": 38883698, "answer_count": 1, "score": 0, "last_activity_date": 1470863746, "creation_date": 1470862807, "last_edit_date": 1470863700, "question_id": 38883437, "link": "https://stackoverflow.com/questions/38883437/can-not-print-updatedat-column-from-postgres", "title": "Can not print updatedAT column from Postgres", "body": "<p>I have a table in postgres, and I want to get only the <code>updatedAt</code> column. If I print the table columns, the updatedAt exists: </p>\n\n<pre><code>#!/usr/bin/python\n# -*- coding: utf-8 -*-\n\nimport psycopg2\nimport sys\nimport datetime\n\ncon = None\n\ntry:\n\n    con = psycopg2.connect(database='db', user='dbuser', password='1111')\n    cur = con.cursor()\n    cur.execute('SELECT * from incidents')\n\n    column_names = [row[0] for row in cur.description]\n\n    print(\"Column names: %s\\n\" % column_names)\n\n\nexcept psycopg2.DatabaseError as e:\n    print('Error %s' % e)\n    sys.exit(1)\n\n\nfinally:\n\n    if con:\n        con.close()\n</code></pre>\n\n<p>the result is</p>\n\n<pre><code>Column names: ['id', 'deviceId', 'latitude', 'longitude', 'city', 'area', 'address', 'state', 'postalCode', 'country', 'canceled', 'createdAt', 'updatedAt', 'patientId']\n</code></pre>\n\n<p>But when I try to select all the rows from that table and get only the updatedAt info, it says that this column does not exist.</p>\n\n<pre><code>#!/usr/bin/python\n# -*- coding: utf-8 -*-\n\nimport psycopg2\nimport sys\nimport datetime\n\ncon = None\n\ntry:\n\n    con = psycopg2.connect(database='db', user='dbuser', password='1111')\n    cur = con.cursor()\n    cur.execute('SELECT updatedAt from incidents')\n    rows = cur.fetchall()\n\n    for row in rows:\n        print(row)\n\n\nexcept psycopg2.DatabaseError as e:\n    print('Error %s' % e)\n    sys.exit(1)\n\n\nfinally:\n\n    if con:\n        con.close()\n</code></pre>\n\n<p>The error message is:</p>\n\n<pre><code>Error column \"updatedat\" does not exist\nLINE 1: SELECT updatedAt from incidents\n               ^\nHINT:  Perhaps you meant to reference the column \"incidents.updatedAt\".\n</code></pre>\n\n<p>I also tried with <code>incidents.updatedAt</code>, but with no luck.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Forgot to mention that this table has been created from Node.js with Sequelize.</p>\n"}, {"tags": ["python", "beautifulsoup"], "answers": [{"comments": [{"owner": {"reputation": 8856, "user_id": 372526, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1ffade2b226578a12a4b0d949e5199ee?s=128&d=identicon&r=PG&f=1", "display_name": "Parseltongue", "link": "https://stackoverflow.com/users/372526/parseltongue"}, "edited": false, "score": 0, "creation_date": 1470864416, "post_id": 38883478, "comment_id": 65128540, "body": "Brilliant! Thanks a bunch"}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": true, "score": 2, "last_activity_date": 1470862963, "creation_date": 1470862963, "answer_id": 38883478, "question_id": 38883414, "link": "https://stackoverflow.com/questions/38883414/grabbing-one-column-in-poorly-formed-table-using-beautifulsoup-and-python/38883478#38883478", "title": "Grabbing one column in poorly-formed table using BeautifulSoup and Python", "body": "<p>For every row found, find all <code>td</code> elements and get the desired one by index:</p>\n\n<pre><code>table = soup.find('td', text=\"Commodity Description\").find_parent(\"table\")\nfor row in table.select(\"tr\")[2:]:  # skipping the header rows\n    cell = row.find_all(\"td\")[1]\n    print(cell.get_text())\n    print(\"----\")\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>WATERLINE REPLACEMENTCONSTRUCTION, PIPELINEPER YUEJIAO LIU, ADD THE REMAINING FUNDS BACK INTO THIS FUNDING LINE  //   PEMBERTON HEIGHTS PHASE III PROJECT  ++   ENC.  $53,209.97\n----\nWATERLINE REPLACEMENTCONSTRUCTION, PIPELINEPEMBERTON HEIGHTS PHASE III PROJECT\n----\nWATERLINE REPLACEMENTCONSTRUCTION, PIPELINEPEMBERTON HEIGHTS PHASE III PROJECT\n----\n</code></pre>\n"}], "owner": {"reputation": 8856, "user_id": 372526, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1ffade2b226578a12a4b0d949e5199ee?s=128&d=identicon&r=PG&f=1", "display_name": "Parseltongue", "link": "https://stackoverflow.com/users/372526/parseltongue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 38883478, "answer_count": 1, "score": 2, "last_activity_date": 1470862963, "creation_date": 1470862709, "question_id": 38883414, "link": "https://stackoverflow.com/questions/38883414/grabbing-one-column-in-poorly-formed-table-using-beautifulsoup-and-python", "title": "Grabbing one column in poorly-formed table using BeautifulSoup and Python", "body": "<p>I'm iterating through a .csv of contracts, trying to extract a single column from a website.  </p>\n\n<p>Here's an example of the website: <a href=\"https://www.austintexas.gov/financeonline/contract_catalog/OCCViewMA.cfm?cd=CT&amp;dd=6100&amp;id=13060600641\" rel=\"nofollow\">https://www.austintexas.gov/financeonline/contract_catalog/OCCViewMA.cfm?cd=CT&amp;dd=6100&amp;id=13060600641</a></p>\n\n<p>I want to grab the column labeled \"Commodity Description\" from table at the end of the webpage. However, I cannot figure out how to grab columns -- just rows.  </p>\n\n<p>Here is the code I'm currently working with</p>\n\n<pre><code>def scraper(first, second, third):\n    url = \"https://www.austintexas.gov/financeonline/contract_catalog/OCCViewMA.cfm?cd=%s&amp;dd=%d&amp;id=%s\" % (first, second, third)\n    soup = BeautifulSoup(urllib2.urlopen(url).read())\n    foundtext = soup.find('td',text=\"Commodity Description\")\n    table = foundtext.findPrevious('table')\n    rows = table.findAll('tr')\n    second_column = []\n    for row in rows:\n        print row.contents\n</code></pre>\n\n<p>I want the final output return to be the text from all the rows in that column with return carriages between the rows. </p>\n\n<p>Any thoughts? </p>\n"}, {"tags": ["python", "json", "flask", "flask-restful"], "answers": [{"tags": [], "owner": {"reputation": 5056, "user_id": 4276090, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r87tb.jpg?s=128&g=1", "display_name": "Skam", "link": "https://stackoverflow.com/users/4276090/skam"}, "is_accepted": true, "score": 2, "last_activity_date": 1470864995, "last_edit_date": 1495541288, "creation_date": 1470864687, "answer_id": 38883908, "question_id": 38883403, "link": "https://stackoverflow.com/questions/38883403/how-to-check-for-empty-json-field-in-flask-reqparse-for-a-post-request/38883908#38883908", "title": "How to check for empty JSON field in flask reqparse for a post request?", "body": "<p>From looking at the <a href=\"http://flask-restful-cn.readthedocs.io/en/0.3.4/reqparse.html\" rel=\"nofollow noreferrer\">reqparse documentation</a> and <a href=\"https://stackoverflow.com/questions/9573244/most-elegant-way-to-check-if-the-string-is-empty-in-python\">how to check for empty strings in python</a>\nYou could do something like... </p>\n\n<pre><code>args = self.parser.parse_args()\nname = args['name']\nif not name:\n    # do your foo here if name is not truthy\n</code></pre>\n\n<p>Since <code>args['name']</code> can return an array, I'd be careful about the following edge cases.</p>\n\n<pre><code>[] == false\n['foo'] == true\n[' ', '   '] == true\n</code></pre>\n\n<p>So it might be better do something along the lines of </p>\n\n<pre><code>args = self.parser.parse_args()\nnames = args['name']\nfor name in names:\n    if not name:\n        # if not truthy \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 6280050, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-g4OA31mpgvE/AAAAAAAAAAI/AAAAAAAAADE/Nj0ylk2-R3E/photo.jpg?sz=128", "display_name": "Prakash Takkalaki", "link": "https://stackoverflow.com/users/6280050/prakash-takkalaki"}, "is_accepted": false, "score": 0, "last_activity_date": 1545289957, "creation_date": 1545289957, "answer_id": 53863966, "question_id": 38883403, "link": "https://stackoverflow.com/questions/38883403/how-to-check-for-empty-json-field-in-flask-reqparse-for-a-post-request/53863966#53863966", "title": "How to check for empty JSON field in flask reqparse for a post request?", "body": "<pre><code>def non_empty_string(s):\nif not s:\n    raise ValueError(\"Must not be empty string\")\nreturn s\nparser.add_argument('name', required=True, nullable=False, type=non_empty_string)\n</code></pre>\n\n<p>i referred this from following  <a href=\"https://github.com/flask-restful/flask-restful/issues/741\" rel=\"nofollow noreferrer\">link</a></p>\n"}], "owner": {"reputation": 536, "user_id": 2695857, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c37e91ef8d00c798b1f0f6c8eaee3790?s=128&d=identicon&r=PG", "display_name": "dkakoti", "link": "https://stackoverflow.com/users/2695857/dkakoti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3964, "favorite_count": 0, "accepted_answer_id": 38883908, "answer_count": 2, "score": 2, "last_activity_date": 1545289957, "creation_date": 1470862653, "question_id": 38883403, "link": "https://stackoverflow.com/questions/38883403/how-to-check-for-empty-json-field-in-flask-reqparse-for-a-post-request", "title": "How to check for empty JSON field in flask reqparse for a post request?", "body": "<p>I need to check for empty string in JSON field for a post request in flask using reqparse. Can I achieve it with flask reqparse module?</p>\n\n<p>I have tried :</p>\n\n<pre><code>self.parser.add_argument('name', \n                 type=str, \n                 required=True, \n                 trim=True, \n                 location='json'\n                )\nself.parser.parse_args()\n</code></pre>\n\n<p>It is checking if the name field in <code>{\"name\":\"xyz\"}</code> is present, However I also want to check for empty values <code>{\"name\":\"\"}</code> , so that I can throw error to user that name can not be empty. Is it possible to do that using reqparse ?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "edited": false, "score": 1, "creation_date": 1470862839, "post_id": 38883396, "comment_id": 65127824, "body": "This is not a free debugging service. You have to do a little more work than dumping your entire code and stack trace."}], "answers": [{"comments": [{"owner": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "edited": false, "score": 0, "creation_date": 1470862854, "post_id": 38883417, "comment_id": 65127829, "body": "This is terrible asking behavior and I&#39;m DV&#39;ing just for encouraging it. Sorry."}, {"owner": {"reputation": 7478, "user_id": 2658173, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a53cc204289b776e5e12dc9d43d2cbe6?s=128&d=identicon&r=PG&f=1", "display_name": "C.B.", "link": "https://stackoverflow.com/users/2658173/c-b"}, "reply_to_user": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "edited": false, "score": 1, "creation_date": 1470863088, "post_id": 38883417, "comment_id": 65127927, "body": "No need to apologize for your opinion; that&#39;s what communities are about. I just tend to think if the question has enough code to reproduce the error in a small enough context with the exact error message, and the user is possibly new, I might as well help them. I do think I can provide more context in my answer as to what is going wrong. I myself have a lot of &quot;oh DUH&quot; moments that another pair of eyes can often catch."}, {"owner": {"reputation": 1, "user_id": 5912134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/409e1722f023443f2da5ecd039c46b77?s=128&d=identicon&r=PG&f=1", "display_name": "Icstaz", "link": "https://stackoverflow.com/users/5912134/icstaz"}, "edited": false, "score": 0, "creation_date": 1470888233, "post_id": 38883417, "comment_id": 65134648, "body": "Oh wow I feel so dumb now. I don&#39;t exactly understand the In/Out stuff but I understand what you mean that my function name was bad. Thanks!"}], "tags": [], "owner": {"reputation": 7478, "user_id": 2658173, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a53cc204289b776e5e12dc9d43d2cbe6?s=128&d=identicon&r=PG&f=1", "display_name": "C.B.", "link": "https://stackoverflow.com/users/2658173/c-b"}, "is_accepted": false, "score": 1, "last_activity_date": 1470863366, "last_edit_date": 1470863366, "creation_date": 1470862718, "answer_id": 38883417, "question_id": 38883396, "link": "https://stackoverflow.com/questions/38883396/python-3-x-typeerror-int-object-is-not-callable/38883417#38883417", "title": "python 3.x - &quot;TypeError: &#39;int&#39; object is not callable&quot;", "body": "<p>Don't name your function and your instance variable the same thing.</p>\n\n<p>Change</p>\n\n<pre><code>def reserve_price(self):\n</code></pre>\n\n<p>to</p>\n\n<pre><code>def print_reserve_price(self):\n</code></pre>\n\n<p>I know if you come from java you can do things like this and it knows the difference, but in python functions are first class citizens and you can refer to them directly. i.e.:</p>\n\n<pre><code>In [2]: x = lambda i : i * i\nIn [3]: x\nOut[3]: &lt;function __main__.&lt;lambda&gt;&gt;\nIn [5]: x(2)\nOut[5]: 4\n</code></pre>\n\n<p>However I can also overwrite it</p>\n\n<pre><code>In [6]: x = 5\n\nIn [7]: x\nOut[7]: 5\n</code></pre>\n\n<p>Which is what happens above when you set <code>self.reserve_price</code> in your init method.</p>\n"}, {"tags": [], "owner": {"reputation": 5896, "user_id": 5644961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-r4jx_ltcdtA/AAAAAAAAAAI/AAAAAAAAAAA/7RjDfLKZHxg/photo.jpg?sz=128", "display_name": "Copperfield", "link": "https://stackoverflow.com/users/5644961/copperfield"}, "is_accepted": false, "score": 0, "last_activity_date": 1470863703, "creation_date": 1470863703, "answer_id": 38883684, "question_id": 38883396, "link": "https://stackoverflow.com/questions/38883396/python-3-x-typeerror-int-object-is-not-callable/38883684#38883684", "title": "python 3.x - &quot;TypeError: &#39;int&#39; object is not callable&quot;", "body": "<p>the problem is that you overwrite your <code>reserve_price</code> method in the <code>__init__</code> method</p>\n\n<p>check this illustrative example</p>\n\n<pre><code>&gt;&gt;&gt; class A:\n        def __init__(self):\n            self.fun = 42\n        def fun(self):\n            print( \"funny\" )\n\n&gt;&gt;&gt; a = A()\n&gt;&gt;&gt; a.fun\n42\n&gt;&gt;&gt;\n</code></pre>\n\n<p>the solution is simple, change the name of one of them.  </p>\n"}], "owner": {"reputation": 1, "user_id": 5912134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/409e1722f023443f2da5ecd039c46b77?s=128&d=identicon&r=PG&f=1", "display_name": "Icstaz", "link": "https://stackoverflow.com/users/5912134/icstaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 497, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1470863703, "creation_date": 1470862629, "last_edit_date": 1470862976, "question_id": 38883396, "link": "https://stackoverflow.com/questions/38883396/python-3-x-typeerror-int-object-is-not-callable", "title": "python 3.x - &quot;TypeError: &#39;int&#39; object is not callable&quot;", "body": "<p>Upon running this code,</p>\n\n<pre><code> #Silent Auction\n\n    class Auction:\n\n        def __init__(self):\n            self.reserve_price = 30\n            self.highest_bid = 0\n            self.highest_bidder = \"\"\n            self.namelist = []\n            self.bidlist = []\n\n        def reserve_price(self):\n            print(\"Hello. The reserve price is ${}\".format(self.reserve_price))\n\n        def new_bidder(self):\n            LOOP = 0\n            while LOOP == 0:\n                name = input(\"What is your name? 'F' for FINISH \")\n                if name.upper() == \"F\":\n                    LOOP = 1\n                else:\n                    bid = int(input(\"Hello {}. What is your bid? \".format(name)))\n                    if bid &gt; self.highest_bid:\n                        self.highest_bid = bid\n                        self.highest_bidder = name\n                        self.namelist.append(name)\n                        self.bidlist.append(bid)\n\n                    else:\n                        print(\"Sorry {}. You'll need to make another higher bid.\".format(name))\n                        print(\"Highest bid so far is ${:.2f}\".format(self.highest_bid))\n\n\n        def auction_end(self):\n            if self.highest_bid &gt;= self.reserve_price:\n                print(\"The auction met the reserve price and the highest bidder was {} with ${:.2f}\".format(self.highest_bidder, self.highest_bid))\n            else:\n                print(\"The auction did not meet the reserve price\")\n                n = len(self.namelist)\n                for i in range (0, n):\n                    print(\"{} bid ${:.2f}\".format(self.namelist[n], self.bidlist[n]))\n\n    if __name__ == \"__main__\":\n        auction1 = Auction()\n        auction1.reserve_price()\n        auction1.new_bidder()\n        auction1.auction_end()\n</code></pre>\n\n<p>I receive the error</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"F:\\Work\\Year 13\\13DIP\\91637 Programming\\Silent Auction.py\", line 46, in &lt;module&gt;\n    auction1.reserve_price()\nTypeError: 'int' object is not callable\n&gt;&gt;&gt; \n</code></pre>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 3091, "user_id": 1041922, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/7FvUi.jpg?s=128&g=1", "display_name": "Andrew Barr", "link": "https://stackoverflow.com/users/1041922/andrew-barr"}, "edited": false, "score": 0, "creation_date": 1470862822, "post_id": 38883380, "comment_id": 65127818, "body": "You can make fields editable right in the admin. Have a look at the <a href=\"https://docs.djangoproject.com/ja/1.9/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_editable\" rel=\"nofollow noreferrer\">list.editable</a> property in the admin configuration."}, {"owner": {"reputation": 26209, "user_id": 1592380, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1b375c795476432e64d4433a651d2804?s=128&d=identicon&r=PG", "display_name": "user1592380", "link": "https://stackoverflow.com/users/1592380/user1592380"}, "reply_to_user": {"reputation": 3091, "user_id": 1041922, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/7FvUi.jpg?s=128&g=1", "display_name": "Andrew Barr", "link": "https://stackoverflow.com/users/1041922/andrew-barr"}, "edited": false, "score": 0, "creation_date": 1470864743, "post_id": 38883380, "comment_id": 65128662, "body": "<a href=\"http://www.djangobook.com/en/2.0/chapter06.html\" rel=\"nofollow noreferrer\">djangobook.com/en/2.0/chapter06.html</a>"}], "owner": {"reputation": 26209, "user_id": 1592380, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1b375c795476432e64d4433a651d2804?s=128&d=identicon&r=PG", "display_name": "user1592380", "link": "https://stackoverflow.com/users/1592380/user1592380"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1470863720, "creation_date": 1470862539, "last_edit_date": 1470863720, "question_id": 38883380, "link": "https://stackoverflow.com/questions/38883380/grid-crud-functionality-for-django-admin-interface", "title": "Grid/CRUD functionality for django admin interface", "body": "<p><a href=\"https://i.stack.imgur.com/8EYzY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8EYzY.png\" alt=\"enter image description here\"></a></p>\n\n<p>In my django 1.7 interface I have a list of objects, as in the screenshot. Although I can click on each and play with them , I'm looking for a way to show all the objects in a spreadsheet within the interface (ideally with CRUD ability). Is there an existing app or simple way to implement this ?</p>\n"}, {"tags": ["python", "spyder", "cwd"], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 6702225, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/ce36d1114d01e0803069392b8942f4dd?s=128&d=identicon&r=PG&f=1", "display_name": "pavlov", "link": "https://stackoverflow.com/users/6702225/pavlov"}, "edited": false, "score": 0, "creation_date": 1470930245, "post_id": 38883361, "comment_id": 65160522, "body": "Thanks! Makes sense. I&#39;m a Matlab user getting used to python."}, {"owner": {"reputation": 101, "user_id": 6702225, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/ce36d1114d01e0803069392b8942f4dd?s=128&d=identicon&r=PG&f=1", "display_name": "pavlov", "link": "https://stackoverflow.com/users/6702225/pavlov"}, "edited": false, "score": 0, "creation_date": 1470930353, "post_id": 38883361, "comment_id": 65160593, "body": "Similar question, in that I&#39;m wondering why I can&#39;t execute a &quot;startup&quot; script in my command line, but it works if I hit the run button. I have written a startup script that import some things, and changes the cwd (see below). I&#39;d like to simply be able to run this from the command line, or stick it within an if statement at the beginning of other scripts that I write, in order to ensure that my cwd is what I want it to be. The startup code looks something like this:"}, {"owner": {"reputation": 101, "user_id": 6702225, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/ce36d1114d01e0803069392b8942f4dd?s=128&d=identicon&r=PG&f=1", "display_name": "pavlov", "link": "https://stackoverflow.com/users/6702225/pavlov"}, "edited": false, "score": 0, "creation_date": 1470930385, "post_id": 38883361, "comment_id": 65160618, "body": "import os, sys, numpy as np, scipy as sp"}, {"owner": {"reputation": 101, "user_id": 6702225, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/ce36d1114d01e0803069392b8942f4dd?s=128&d=identicon&r=PG&f=1", "display_name": "pavlov", "link": "https://stackoverflow.com/users/6702225/pavlov"}, "edited": false, "score": 0, "creation_date": 1470930436, "post_id": 38883361, "comment_id": 65160655, "body": "os.chdir(&#39;myNewDirectory&#39;) #myNewDirectory is just some directory where I save all my python code"}, {"owner": {"reputation": 101, "user_id": 6702225, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/ce36d1114d01e0803069392b8942f4dd?s=128&d=identicon&r=PG&f=1", "display_name": "pavlov", "link": "https://stackoverflow.com/users/6702225/pavlov"}, "edited": false, "score": 0, "creation_date": 1470930562, "post_id": 38883361, "comment_id": 65160722, "body": "So, that startup script is saved to the default cwd. I can hit the run button to execute it, but I can&#39;t run startup from the command line -- I get the error &quot;NameError: name &#39;startup&#39; is not defined.&quot; Just wondering why I can&#39;t run this script from the command line even though I have the correct cwd."}], "tags": [], "owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "is_accepted": false, "score": 2, "last_activity_date": 1470862489, "creation_date": 1470862489, "answer_id": 38883361, "question_id": 38883327, "link": "https://stackoverflow.com/questions/38883327/spyder-python-2-7-why-do-scripts-run-if-i-hit-run-button-but-not-if-i-type/38883361#38883361", "title": "Spyder (python 2.7) - why do scripts run if I hit run button, but not if I type script name in command line?", "body": "<p><code>hello</code> isn't defined until you execute the <code>def hello</code> statement. You haven't run the script yet so that line hasn't been executed. After you have run the script, <code>hello</code> has been defined.</p>\n"}], "owner": {"reputation": 101, "user_id": 6702225, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/ce36d1114d01e0803069392b8942f4dd?s=128&d=identicon&r=PG&f=1", "display_name": "pavlov", "link": "https://stackoverflow.com/users/6702225/pavlov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 378, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1470866174, "creation_date": 1470862361, "last_edit_date": 1470862493, "question_id": 38883327, "link": "https://stackoverflow.com/questions/38883327/spyder-python-2-7-why-do-scripts-run-if-i-hit-run-button-but-not-if-i-type", "title": "Spyder (python 2.7) - why do scripts run if I hit run button, but not if I type script name in command line?", "body": "<p>New to python/spyder. I am having trouble running scripts the way I want to. Quck example using the following script:</p>\n\n<pre><code># Demo file for Spyder Tutorial\n# Hans Fangohr, University of Southampton, UK\n\ndef hello():\n    \"\"\"Print \"Hello World\" and return None\"\"\"\n    print(\"Hello World\")\n\n# main program starts here\nhello()\n</code></pre>\n\n<p>I have saved this as hello.py. When I type hello() into my command line, I get the following error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nNameError: name 'hello' is not defined\n</code></pre>\n\n<p>However, if I hit the run button with this script open in the Editor, it runs just fine, and prints Hello World. I can <em>then</em> type hello() into my command line and it runs just fine. </p>\n\n<p>Could someone please explain to me why this is? </p>\n\n<p>My general goal is to save a startup.py script that I can run from the default cwd, which changes my cwd to where I want to save all of my code. </p>\n"}, {"tags": ["python", "image", "file", "save"], "answers": [{"comments": [{"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 1, "creation_date": 1470862630, "post_id": 38883359, "comment_id": 65127724, "body": "You may want to point out that the exact argument to <code>strftime</code> can be whatever the questioner wants (<code>&#39;%Y-%m-%d&#39;</code> may be better in many situations)."}], "tags": [], "owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "is_accepted": true, "score": 2, "last_activity_date": 1470862738, "last_edit_date": 1470862738, "creation_date": 1470862485, "answer_id": 38883359, "question_id": 38883317, "link": "https://stackoverflow.com/questions/38883317/how-to-save-a-file-to-a-specific-directory-and-choose-the-files-name-in-python/38883359#38883359", "title": "How to save a file to a specific directory and choose the file&#39;s name in python?", "body": "<p>Use <a href=\"https://docs.python.org/2/library/time.html#time.strftime\" rel=\"nofollow\"><code>.strftime()</code></a> to \"convert a tuple or struct_time representing a time as returned by gmtime() or localtime() to a string as specified by the format argument.\":</p>\n\n<pre><code>photo_name = todays_date.strftime('%m-%d-%Y') + \".jpg\"\npic.save(os.path.join(\"Pictures\",photo_name))\n</code></pre>\n\n<p>Also use <a href=\"https://docs.python.org/2/library/os.path.html?highlight=os.path.join#os.path.join\" rel=\"nofollow\"><code>os.path.join()</code></a> for a cross-platform method of joining directory to filename.</p>\n\n<p>As @Blckknght says in a comment: please note that <code>'%m-%d-%Y'</code> is something for which you can change order, e.g. <code>'%Y-%m-%d'</code> is a common variant.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 6683211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdd06296b00a3e2b7c48bdfda0587ae1?s=128&d=identicon&r=PG&f=1", "display_name": "shyamksonata", "link": "https://stackoverflow.com/users/6683211/shyamksonata"}, "is_accepted": false, "score": 0, "last_activity_date": 1470862660, "creation_date": 1470862660, "answer_id": 38883404, "question_id": 38883317, "link": "https://stackoverflow.com/questions/38883317/how-to-save-a-file-to-a-specific-directory-and-choose-the-files-name-in-python/38883404#38883404", "title": "How to save a file to a specific directory and choose the file&#39;s name in python?", "body": "<p>Yes.above solution should work.Mistake what your were doing was adding time value with string.</p>\n"}, {"tags": [], "owner": {"reputation": 104, "user_id": 6395690, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/950842084772b5ac70fbfe995cc63c78?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/6395690/jeremy"}, "is_accepted": false, "score": 0, "last_activity_date": 1470862711, "creation_date": 1470862711, "answer_id": 38883415, "question_id": 38883317, "link": "https://stackoverflow.com/questions/38883317/how-to-save-a-file-to-a-specific-directory-and-choose-the-files-name-in-python/38883415#38883415", "title": "How to save a file to a specific directory and choose the file&#39;s name in python?", "body": "<p>This won't work because <code>datetime.date.today()</code> returns a date object.  Try converting to string by calling the <code>.__str__()</code> method, the <code>.ctime()</code> method, or the <code>.strftime()</code> method.<br>\nSee <a href=\"https://docs.python.org/2/library/datetime.html#date-objects\" rel=\"nofollow\">https://docs.python.org/2/library/datetime.html#date-objects</a>.</p>\n"}], "owner": {"reputation": 217, "user_id": 3642744, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a3055c8abc2ac3f579e32d246d2deff?s=128&d=identicon&r=PG&f=1", "display_name": "mdenci", "link": "https://stackoverflow.com/users/3642744/mdenci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2639, "favorite_count": 0, "accepted_answer_id": 38883359, "answer_count": 3, "score": 1, "last_activity_date": 1470862738, "creation_date": 1470862325, "question_id": 38883317, "link": "https://stackoverflow.com/questions/38883317/how-to-save-a-file-to-a-specific-directory-and-choose-the-files-name-in-python", "title": "How to save a file to a specific directory and choose the file&#39;s name in python?", "body": "<p>As the title says, how can I save a file (in this case a previously selected photo) into a specific directory and also name the saved file (I want to name it with today's date - eg: 01-01-2016.jpg)?</p>\n\n<p>Here's some of my code:</p>\n\n<pre><code>import os.path\nimport datetime\ntodays_date = datetime.date.today ()\n\ndef add_pic (pic):\n\n    if not os.path.exists (\"Pictures\"):\n        os.makedirs (\"Pictures\")\n    photo_name = todays_date + \".jpg\"\n    pic.save (\"Pictures/\"photo_name)\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>TypeError: unsupported operand type(s) for +: 'datetime.date' and 'str'\n</code></pre>\n\n<p>for this line:</p>\n\n<pre><code>photo_name = todays_date + \".jpg\"\n</code></pre>\n\n<p>Plus, I'm not sure about the last line either, so pls help! </p>\n"}, {"tags": ["python", "locking", "multiprocessing"], "comments": [{"owner": {"reputation": 690, "user_id": 5763213, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/mCpSb.jpg?s=128&g=1", "display_name": "sethmlarson", "link": "https://stackoverflow.com/users/5763213/sethmlarson"}, "edited": false, "score": 0, "creation_date": 1470863381, "post_id": 38883288, "comment_id": 65128043, "body": "Have you thought about creating your own GPU slot pool using a semaphore and a list of slots available? Implement it as a context manager such that you can use <code>with gpu_slot_pool.get() as gpu_slot:</code>"}, {"owner": {"reputation": 690, "user_id": 5763213, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/mCpSb.jpg?s=128&g=1", "display_name": "sethmlarson", "link": "https://stackoverflow.com/users/5763213/sethmlarson"}, "edited": false, "score": 0, "creation_date": 1470863494, "post_id": 38883288, "comment_id": 65128096, "body": "Oh and if you&#39;re using a Lock, use the <code>threading.Lock</code> object, not multiprocessing. The multiprocessing Lock is made with named semaphores which might not be available on all platforms."}, {"owner": {"reputation": 21, "user_id": 6620606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12e93c3564ac55f5267d25d5077cba11?s=128&d=identicon&r=PG&f=1", "display_name": "jlerche", "link": "https://stackoverflow.com/users/6620606/jlerche"}, "reply_to_user": {"reputation": 690, "user_id": 5763213, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/mCpSb.jpg?s=128&g=1", "display_name": "sethmlarson", "link": "https://stackoverflow.com/users/5763213/sethmlarson"}, "edited": false, "score": 0, "creation_date": 1470865012, "post_id": 38883288, "comment_id": 65128763, "body": "For now, at least, this code will only run on a host running Ubuntu 16.04, so without really knowing anything about the details, i&#39;d imagine it would be available."}, {"owner": {"reputation": 21, "user_id": 6620606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12e93c3564ac55f5267d25d5077cba11?s=128&d=identicon&r=PG&f=1", "display_name": "jlerche", "link": "https://stackoverflow.com/users/6620606/jlerche"}, "reply_to_user": {"reputation": 690, "user_id": 5763213, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/mCpSb.jpg?s=128&g=1", "display_name": "sethmlarson", "link": "https://stackoverflow.com/users/5763213/sethmlarson"}, "edited": false, "score": 0, "creation_date": 1470865709, "post_id": 38883288, "comment_id": 65129064, "body": "I haven&#39;t tried implementing my own slot pool as I am not at all familiar with the multiprocessing or threading modules so I wouldn&#39;t even know where to start."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 6620606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12e93c3564ac55f5267d25d5077cba11?s=128&d=identicon&r=PG&f=1", "display_name": "jlerche", "link": "https://stackoverflow.com/users/6620606/jlerche"}, "is_accepted": true, "score": 1, "last_activity_date": 1470954503, "last_edit_date": 1495541314, "creation_date": 1470954503, "answer_id": 38907066, "question_id": 38883288, "link": "https://stackoverflow.com/questions/38883288/python-multiprocessing-using-a-lock-or-manager-list-for-pool-workers-accessing-a/38907066#38907066", "title": "Python multiprocessing using a lock or manager list for Pool workers accessing a global list variable", "body": "<p>Basing off of what I found in the following SO answer <a href=\"https://stackoverflow.com/questions/25557686/python-sharing-a-lock-between-processes\">Python sharing a lock between processes</a>:</p>\n\n<p>Using a regular list leads to each process having its own copy, as is expected. Using a manager list seems to be sufficient enough to get around that.  Example code:</p>\n\n<pre><code>def doing_work(honk):\n    proc = multiprocessing.current_process()\n    # with lock:\n    #     print proc, 'about to pop SLOTS_LIST', SLOTS_LIST\n    #     slot = SLOTS_LIST.pop()\n    #     print multiprocessing.current_process(), ' just popped', slot, 'from', SLOTS_LIST\n    print proc, 'about to pop SLOTS_LIST', SLOTS_LIST\n    slot = SLOTS_LIST.pop()\n    print multiprocessing.current_process(), ' just popped', slot, 'from SLOTS_LIST'\n    time.sleep(10)\n\ndef init(l):\n    global lock\n    lock = l\n\nif __name__ == '__main__':\n    man = multiprocessing.Manager()\n    SLOTS_LIST = [1,34,3465,456,4675,6,4]\n    SLOTS_LIST = man.list(SLOTS_LIST)\n    l = multiprocessing.Lock()\n    pool = multiprocessing.Pool(processes=2, initializer=init, initargs=(l,))\n    inputs = range(len(SLOTS_LIST))\n    pool.map(doing_work, inputs)\n</code></pre>\n\n<p>which outputs</p>\n\n<pre><code>&lt;Process(PoolWorker-3, started daemon)&gt; about to pop SLOTS_LIST [1, 34, 3465, 456, 4675, 6, 4]\n&lt;Process(PoolWorker-3, started daemon)&gt;  just popped 4 from SLOTS_LIST\n&lt;Process(PoolWorker-2, started daemon)&gt; about to pop SLOTS_LIST [1, 34, 3465, 456, 4675, 6]\n&lt;Process(PoolWorker-2, started daemon)&gt;  just popped 6 from SLOTS_LIST\n&lt;Process(PoolWorker-3, started daemon)&gt; about to pop SLOTS_LIST [1, 34, 3465, 456, 4675]\n&lt;Process(PoolWorker-3, started daemon)&gt;  just popped 4675 from SLOTS_LIST\n&lt;Process(PoolWorker-2, started daemon)&gt; about to pop SLOTS_LIST [1, 34, 3465, 456]\n&lt;Process(PoolWorker-2, started daemon)&gt;  just popped 456 from SLOTS_LIST\n&lt;Process(PoolWorker-3, started daemon)&gt; about to pop SLOTS_LIST [1, 34, 3465]    \n&lt;Process(PoolWorker-3, started daemon)&gt;  just popped 3465 from SLOTS_LIST\n&lt;Process(PoolWorker-2, started daemon)&gt; about to pop SLOTS_LIST [1, 34]\n&lt;Process(PoolWorker-2, started daemon)&gt;  just popped 34 from SLOTS_LIST\n&lt;Process(PoolWorker-3, started daemon)&gt; about to pop SLOTS_LIST [1]\n&lt;Process(PoolWorker-3, started daemon)&gt;  just popped 1 from SLOTS_LIST\n</code></pre>\n\n<p>which is desired behavior. I'm not sure if it completely eliminates race conditions but it seems to be good enough. That and using a lock on top of it is simple enough.</p>\n"}], "owner": {"reputation": 21, "user_id": 6620606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12e93c3564ac55f5267d25d5077cba11?s=128&d=identicon&r=PG&f=1", "display_name": "jlerche", "link": "https://stackoverflow.com/users/6620606/jlerche"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3125, "favorite_count": 1, "accepted_answer_id": 38907066, "answer_count": 1, "score": 1, "last_activity_date": 1470954503, "creation_date": 1470862221, "last_edit_date": 1470880607, "question_id": 38883288, "link": "https://stackoverflow.com/questions/38883288/python-multiprocessing-using-a-lock-or-manager-list-for-pool-workers-accessing-a", "title": "Python multiprocessing using a lock or manager list for Pool workers accessing a global list variable", "body": "<p>I am trying to distribute jobs over several CUDA devices where the total number of running jobs at any time should be less than or equal to the number of cpu cores available. To do this, I determine the number of available 'slots' on each device and create a list that holds the available slots. If I have 6 cpu cores, and two cuda devices (0 and 1), then AVAILABLE_SLOTS = [0, 1, 0, 1, 0, 1]. In my worker function I pop the list and save it to a variable, set CUDA_VISIBLE_DEVICES env var in the subprocess call, and then append it back to the list. This has been working so far but I want to avoid race conditions. </p>\n\n<p>Current code is as follows:</p>\n\n<pre><code>def work(cmd):\n    slot = AVAILABLE_GPU_SLOTS.pop()\n    exit_code = subprocess.call(cmd, shell=False, env=dict(os.environ, CUDA_VISIBLE_DEVICES=str(slot)))\n    AVAILABLE_GPU_SLOTS.append(slot)\n    return exit_code\n\nif __name__ == '__main__':\n    pool_size = multiprocessing.cpu_count()\n    mols_to_be_run = [name for name in os.listdir(YANK_FILES) if os.path.isdir(os.path.join(YANK_FILES, name))]\n    cmds = build_cmd(mols_to_be_run)\n    cuda = get_cuda_devices()\n    AVAILABLE_GPU_SLOTS = build_available_gpu_slots(pool_size, cuda)\n    pool = multiprocessing.Pool(processes=pool_size, maxtasksperchild=2, )\n    pool.map(work, cmds)\n</code></pre>\n\n<p>Can I simply declare lock = multiprocessing.Lock() at the same level as AVAILABLE_GPU_SLOTS, put it in cmds, and then inside work() do</p>\n\n<pre><code>with lock:\n    slot = AVAILABLE_GPU_SLOTS.pop()\n# subprocess stuff\nwith lock:\n    AVAILABLE_GPU_SLOTS.append(slot)\n</code></pre>\n\n<p>or do I need a manager list. Alternatively maybe there's a better solution to what I'm doing.</p>\n"}, {"tags": ["python", "performance", "numpy", "vectorization"], "answers": [{"comments": [{"owner": {"reputation": 1188, "user_id": 4541374, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FCRMj.jpg?s=128&g=1", "display_name": "cameronroytaylor", "link": "https://stackoverflow.com/users/4541374/cameronroytaylor"}, "edited": false, "score": 0, "creation_date": 1470862948, "post_id": 38883328, "comment_id": 65127874, "body": "The np.searchsorted algorithm uses a binary search, so it will get the job done in log(n) time."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 1188, "user_id": 4541374, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FCRMj.jpg?s=128&g=1", "display_name": "cameronroytaylor", "link": "https://stackoverflow.com/users/4541374/cameronroytaylor"}, "edited": false, "score": 0, "creation_date": 1470863015, "post_id": 38883328, "comment_id": 65127896, "body": "@cameronroytaylor Yeah AFAIK, it follows the same philosophy as bisect module for searching."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1470863795, "post_id": 38883328, "comment_id": 65128232, "body": "@KennyOstrom Yeah if the number to be searched is already the minimum/first number. The expected behavior isn&#39;t listed, so I guess I will let OP take a call on how to handle such corner cases."}], "tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": true, "score": 4, "last_activity_date": 1470862363, "creation_date": 1470862363, "answer_id": 38883328, "question_id": 38883281, "link": "https://stackoverflow.com/questions/38883281/how-to-compare-value-in-list-without-using-loop-in-python/38883328#38883328", "title": "How to compare value in list without using loop in python?", "body": "<p>You can use <a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.searchsorted.html\" rel=\"nofollow\"><code>np.searchsorted</code></a> -</p>\n\n<pre><code>idx = np.searchsorted(l,n)\nout = np.take(l,[idx-1,idx])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1470863166, "post_id": 38883430, "comment_id": 65127960, "body": "The requested format would have been more like position = bisect(listname, value); if 0 &lt; position &lt; len(listname): print &quot;formatted between message&quot;"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1470863259, "post_id": 38883430, "comment_id": 65128003, "body": "pos can be 0 if searched == 1"}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1470864445, "post_id": 38883430, "comment_id": 65128550, "body": "mine would have python2 style print. I&#39;ll do that"}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1470864937, "post_id": 38883430, "comment_id": 65128730, "body": "I note that my code has the exact same boundary condition issue as the original problem.  It finds l[0] but not l[-1]. We&#39;ll assume that was an error and find it, but otherwise the OP finds l[idx], l[idx+1]"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1470865787, "post_id": 38883430, "comment_id": 65129096, "body": "thanks, I have accepted your edit as-is even if it has been heavily modified because it fixes the last item issue so 1) it is tested and 2) it is better than my code"}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 2, "last_activity_date": 1470865722, "last_edit_date": 1470865722, "creation_date": 1470862778, "answer_id": 38883430, "question_id": 38883281, "link": "https://stackoverflow.com/questions/38883281/how-to-compare-value-in-list-without-using-loop-in-python/38883430#38883430", "title": "How to compare value in list without using loop in python?", "body": "<p>You can use <code>bisect</code> native python module.</p>\n\n<p>It uses dichotomic algorithm to find insertion index in the list so it is very fast (<code>log(n)</code> instead of n). Beside, on popular platforms (linux, windows, ...) it has a native implementation: unbeatable.</p>\n\n<p>Then report the value at this index and the next, to say which numbers it was between. </p>\n\n<p>Small example with various in and out of range values. I used such a method to solve a knapsack problem and it was very efficient.</p>\n\n<pre><code># use bisect because the list is known to be sorted\nfrom bisect import bisect\n\ndef test(value, l):\n    idx = bisect(l, value)    \n    # if idx is inside the list, we have a definite find\n    if 0 &lt; idx &lt; len(l):\n        return (l[idx-1], l[idx])\n    # check for boundary condition error\n    elif len(l) == idx and value == l[-1]:\n        return (l[-2], l[-1])\n    else:\n        return None\n\ndef print_formatted_result(value, result):\n    if result is None:      \n        print (str(value) + \" was not found\")\n    else:\n        print (str(value) + \" between \" + str(result[0])+ \" and \" + str(result[1]))\n\nz = [1, 5, 6, 9, 14, 19]\nfor searched in [0, 1, 9, 12, 19, 50]:\n    result = test(searched, z)\n    print_formatted_result(searched, result)\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>0 was not found\n1 between 1 and 5\n9 between 9 and 14\n12 between 9 and 14\n19 between 14 and 19\n50 was not found\n</code></pre>\n\n<p>Note that the original code did not find 19, but this code reports it as a special case. All other cases match the same as the original code.</p>\n"}], "owner": {"reputation": 59, "user_id": 5755122, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6ce224cee89eb9db4d2b0693e98efa1?s=128&d=identicon&r=PG&f=1", "display_name": "George Sha", "link": "https://stackoverflow.com/users/5755122/george-sha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2975, "favorite_count": 0, "accepted_answer_id": 38883328, "answer_count": 2, "score": 2, "last_activity_date": 1470901136, "creation_date": 1470862201, "last_edit_date": 1470901136, "question_id": 38883281, "link": "https://stackoverflow.com/questions/38883281/how-to-compare-value-in-list-without-using-loop-in-python", "title": "How to compare value in list without using loop in python?", "body": "<p>I have a list l with sorted number, for example,</p>\n\n<pre><code>[1, 5, 6, 9, 14, 19]\n</code></pre>\n\n<p>And I'm trying to find if a given number is between two numbers in the list.</p>\n\n<p>For example, if a number 12 is given, then I want to get 9 and 14 since 12 is between them.</p>\n\n<p>I wrote this using a for loop,</p>\n\n<pre><code>l = [1, 5, 6, 9, 14, 19]\nn = 12\nfor i in range(len(l) - 1):\n    if n &gt;= l[i] and n &lt; l[i + 1]:\n        print(str(n) + \" between \" + str(l[i]) + \" and \" + str(l[i + 1]))\n</code></pre>\n\n<p>However, if this loop is inside another loop and has a very big list, this could be slow. Is there any way to do this without using a loop? For example, using numpy because I know it's strong dealing with array.</p>\n"}, {"tags": ["python", "sqlalchemy"], "answers": [{"comments": [{"owner": {"reputation": 35917, "user_id": 722263, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/nOAGj.jpg?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/722263/ray"}, "edited": false, "score": 0, "creation_date": 1470919358, "post_id": 38883606, "comment_id": 65152331, "body": "That&#39;s simpler than expected."}, {"owner": {"reputation": 882, "user_id": 3289666, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/768281e58246b165ccbc664952e11d80?s=128&d=identicon&r=PG", "display_name": "Jalal Mostafa", "link": "https://stackoverflow.com/users/3289666/jalal-mostafa"}, "edited": false, "score": 0, "creation_date": 1579626723, "post_id": 38883606, "comment_id": 105826103, "body": "Is there a way to query or filter views while using <code>metadata.reflect(views=True)</code>?"}], "tags": [], "owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "is_accepted": true, "score": 13, "last_activity_date": 1470863427, "creation_date": 1470863427, "answer_id": 38883606, "question_id": 38883256, "link": "https://stackoverflow.com/questions/38883256/with-sqlalchemy-metadata-reflect-how-do-you-get-an-actual-table-object/38883606#38883606", "title": "With SQLAlchemy metadata reflect() how do you get an actual table object?", "body": "<p>It is as simple as looking up the tables from the metadata object's dictionary of tables:</p>\n\n<pre><code>mytable = metadata.tables['mytable']\n</code></pre>\n\n<p>See <a href=\"http://docs.sqlalchemy.org/en/latest/core/reflection.html#reflecting-all-tables-at-once\" rel=\"noreferrer\">\"Reflecting All Tables At Once\"</a> for further info.</p>\n"}, {"tags": [], "owner": {"reputation": 423, "user_id": 6238102, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eZBRC.jpg?s=128&g=1", "display_name": "Halee", "link": "https://stackoverflow.com/users/6238102/halee"}, "is_accepted": false, "score": 3, "last_activity_date": 1548190284, "creation_date": 1548190284, "answer_id": 54316258, "question_id": 38883256, "link": "https://stackoverflow.com/questions/38883256/with-sqlalchemy-metadata-reflect-how-do-you-get-an-actual-table-object/54316258#54316258", "title": "With SQLAlchemy metadata reflect() how do you get an actual table object?", "body": "<p>If you are not sure what tables exist initially, you can do this query to inspect the database tables.</p>\n\n<pre><code>from sqlalchemy import create_engine\nfrom sqlalchemy.engine import reflection\n\n# Create connection string &amp; engine\nconnection_string = \"sql_connection_string\"\nengine = create_engine(connection_string, echo=False)\n\n# Performs database schema inspection\ninsp = reflection.Inspector.from_engine(engine)\nprint(insp.get_table_names())\n</code></pre>\n\n<p>Then you can select the Metadata from the table like the above answer states.</p>\n\n<p><code>Inspector.get_table_names()</code> returns all table names referred to within a particular schema. This does not return views. Views are instead returned using the <code>Inspector.get_view_names()</code> method. <a href=\"https://docs.sqlalchemy.org/en/latest/core/reflection.html#sqlalchemy.engine.reflection.Inspector.get_table_names\" rel=\"nofollow noreferrer\">Docs</a></p>\n"}], "owner": {"reputation": 35917, "user_id": 722263, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/nOAGj.jpg?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/722263/ray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11651, "favorite_count": 2, "accepted_answer_id": 38883606, "answer_count": 2, "score": 10, "last_activity_date": 1548190284, "creation_date": 1470862119, "last_edit_date": 1502688611, "question_id": 38883256, "link": "https://stackoverflow.com/questions/38883256/with-sqlalchemy-metadata-reflect-how-do-you-get-an-actual-table-object", "title": "With SQLAlchemy metadata reflect() how do you get an actual table object?", "body": "<p>I'm just doing a bunch of selects on an existing DB.</p>\n\n<ul>\n<li>Don't to use raw SQL as I may want to jump between mysql and sqlite for testing</li>\n<li>Want to stick to SQLAlchemy's SQL Expression language.</li>\n</ul>\n\n<p>I need to get a Table object so I do something like </p>\n\n<pre><code> s = select([some_table_object])\n</code></pre>\n\n<p>I've figured how to explicitly reflect a single table to get a table object:</p>\n\n<pre><code>from sqlalchemy import *\n\nconn = create_engine('mysql://....')\nmetadata = MetaData(conn)\nmytable = Table('mytable', meta, autoload=True)\n\ns = select([mytable])\nresult = conn.execute(s)\n\n# HAPPY!!!!\n</code></pre>\n\n<p>However, this gets tedious as you have to do it for each table (I go lots of tables).  I know I can somehow use the <code>MetaData</code> class to reflect the existing DB I'm connecting to, but I'm unsure of how to get the actual corresponding Table from the metadata.</p>\n\n<pre><code>from sqlalchemy import *\n\nconn = create_engine('mysql://....')\n\nmetadata = MetaData(conn)\nmetadata.reflect()\n\n# How would do I get a Table instance corresponding to the \n# mytable table in the DB so I move on to HAPPY!!\n\nmytable = metadata.no_clue_how_to_get_tables()\n\ns = select([some_table_object])\nresult = conn.execute(s)\n</code></pre>\n\n<p>What's needed to replace the line <code>mytable = metadata.no_clue_how_to_get_tables()</code> to get a <code>Table</code> instance?</p>\n"}, {"tags": ["python", "base64", "reportlab"], "comments": [{"owner": {"reputation": 3724, "user_id": 2263652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eX05O.jpg?s=128&g=1", "display_name": "B8vrede", "link": "https://stackoverflow.com/users/2263652/b8vrede"}, "edited": false, "score": 0, "creation_date": 1470904630, "post_id": 38883202, "comment_id": 65142369, "body": "Could you please add some more info on how you generated <code>image64</code>? It could be that the image uses BGR instead of RGB :)"}, {"owner": {"reputation": 11, "user_id": 4832379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1a4a301250fe674456e30145245cda1?s=128&d=identicon&r=PG&f=1", "display_name": "Jessica Gonzalez", "link": "https://stackoverflow.com/users/4832379/jessica-gonzalez"}, "reply_to_user": {"reputation": 3724, "user_id": 2263652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eX05O.jpg?s=128&g=1", "display_name": "B8vrede", "link": "https://stackoverflow.com/users/2263652/b8vrede"}, "edited": false, "score": 0, "creation_date": 1471206504, "post_id": 38883202, "comment_id": 65247567, "body": "@B8vrede I used jsignature to convert the signature to base64"}, {"owner": {"reputation": 3724, "user_id": 2263652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eX05O.jpg?s=128&g=1", "display_name": "B8vrede", "link": "https://stackoverflow.com/users/2263652/b8vrede"}, "edited": false, "score": 0, "creation_date": 1471516724, "post_id": 38883202, "comment_id": 65382513, "body": "I just tested it the demo of jsignature and couldn&#39;t reproduce your problem. Are you sure that PIL is installed correctly? And could you confirm that <code>image64</code> is a string referring to the location of the image?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 14875143, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208090452575723/picture?type=large", "display_name": "\u4fde\u570b\u9756", "link": "https://stackoverflow.com/users/14875143/%e4%bf%9e%e5%9c%8b%e9%9d%96"}, "is_accepted": false, "score": 0, "last_activity_date": 1608693350, "last_edit_date": 1608693350, "creation_date": 1608688073, "answer_id": 65418061, "question_id": 38883202, "link": "https://stackoverflow.com/questions/38883202/python-reportlab-insert-image-base64-colors-are-being-inverted/65418061#65418061", "title": "Python Reportlab insert image base64 colors are being inverted", "body": "<p>The following works for me. Can you try putting <code>mask='auto'</code> parameter?</p>\n<pre><code>image64 = signature\np.drawImage(image64, 110, 25 ,mask='auto')\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4832379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1a4a301250fe674456e30145245cda1?s=128&d=identicon&r=PG&f=1", "display_name": "Jessica Gonzalez", "link": "https://stackoverflow.com/users/4832379/jessica-gonzalez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 487, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1608693350, "creation_date": 1470861900, "question_id": 38883202, "link": "https://stackoverflow.com/questions/38883202/python-reportlab-insert-image-base64-colors-are-being-inverted", "title": "Python Reportlab insert image base64 colors are being inverted", "body": "<p>I am trying to add a base64 image on a pdf using ReportLab.  I am able to add the image successfully.  However, the colors for the image are being inverted. </p>\n\n<p>To confirm that it wasn't the base64 code that had the colors inverted, I manually converted the base64 online to make sure the colors were correct.</p>\n\n<p>Does anyone have any clue why ReportLab .drawImage might invert the colors?</p>\n\n<p>Here is my code where 'signature' is the base64 encoded image:</p>\n\n<pre><code>image64 = signature\np.drawImage(image64, 110, 25)\n</code></pre>\n\n<p>Here is the output on the pdf. The black block is the image that is being inverted:\n<a href=\"http://i.stack.imgur.com/ZsxPQ.png\" rel=\"nofollow\">pdf image</a></p>\n"}, {"tags": ["python", "multiprocessing"], "comments": [{"owner": {"reputation": 8720, "user_id": 3846213, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/5PGh1.jpg?s=128&g=1", "display_name": "Eli Korvigo", "link": "https://stackoverflow.com/users/3846213/eli-korvigo"}, "edited": false, "score": 0, "creation_date": 1470861690, "post_id": 38883113, "comment_id": 65127254, "body": "Using <code>multiprocess</code> instead of <code>multiprocessing</code> will save you a hell lot of time and nerves."}], "answers": [{"tags": [], "owner": {"reputation": 1525, "user_id": 6664393, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe985e0b1cf77b72acb4e0058029acda?s=128&d=identicon&r=PG&f=1", "display_name": "user357269", "link": "https://stackoverflow.com/users/6664393/user357269"}, "is_accepted": true, "score": 1, "last_activity_date": 1470861963, "last_edit_date": 1495540293, "creation_date": 1470861963, "answer_id": 38883227, "question_id": 38883113, "link": "https://stackoverflow.com/questions/38883113/multiprocessing-pool-picklingerror/38883227#38883227", "title": "Multiprocessing Pool PicklingError", "body": "<p>This should explain the issue your having: <a href=\"https://stackoverflow.com/questions/21111106/cant-pickle-static-method-multiprocessing-python\">Can&#39;t pickle static method - Multiprocessing - Python</a></p>\n\n<p>On a side note: I wouldn't use multiprocessing if I'm going to be spending most of my time waiting for IO. Try threading or even coroutines (<a href=\"http://www.gevent.org/\" rel=\"nofollow noreferrer\">http://www.gevent.org/</a>). You'll get the same performance and there's less fuss with pickling</p>\n"}], "owner": {"reputation": 783, "user_id": 2227656, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/d2d0279b3436ff146a0f5afa02937e08?s=128&d=identicon&r=PG&f=1", "display_name": "Ajayc", "link": "https://stackoverflow.com/users/2227656/ajayc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 38883227, "answer_count": 1, "score": 0, "last_activity_date": 1470861963, "creation_date": 1470861527, "question_id": 38883113, "link": "https://stackoverflow.com/questions/38883113/multiprocessing-pool-picklingerror", "title": "Multiprocessing Pool PicklingError", "body": "<p>I'm working on a class that can take in a list of Request type objects and execute the requests (using the object's .execute() API) and return the result of the request. I'm running into an issue when trying to make this multi-processed. I have used Pool in the past, and I am having a tough time getting it to work here. When attempting to run the staticmethod in the Executor class from a Pool, I receive a PicklingError. But when running directly from a new Process object, it seems to work as expected. What is the cause of this behavior? Is there something obvious that I am doing incorrectly here ? Running this on Python 2.6 btw</p>\n\n<p>Thanks! </p>\n\n<p>Executor class:</p>\n\n<pre><code>class Executor(object):\n    def __init__(self, max_threads):\n        self.max_threads = max_threads\n\n    @staticmethod\n    def execute_request_partition(requests):\n        return [request.execute() for request in requests]\n\n    def execute_requests(self, list_of_requests):\n        partitions = split_list(list_of_requests, self.max_threads)\n        # Seems to execute as expected\n        process = Process(target=self.execute_request_partition, args=(partitions[0],))\n        process.run()\n\n        # PicklingError: Can't pickle &lt;type 'function'&gt;: attribute lookup __builtin__.function failed\n        p = Pool(1)\n        p.apply_async(self.execute_request_partition, args=(partitions[0],))\n        p.close()\n        p.join()\n</code></pre>\n"}, {"tags": ["python", "sql", "impala"], "answers": [{"tags": [], "owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "is_accepted": true, "score": 1, "last_activity_date": 1470861360, "creation_date": 1470861360, "answer_id": 38883079, "question_id": 38883050, "link": "https://stackoverflow.com/questions/38883050/sql-impala-query-syntax-error-for-timestamp-range/38883079#38883079", "title": "SQL (Impala) query syntax error for timestamp range", "body": "<p>According to <a href=\"http://www.cloudera.com/documentation/enterprise/5-6-x/topics/impala_limit.html#limit\" rel=\"nofollow\">the documentation</a> you need to specify <code>limit 100</code> <em>after</em> the where clause.</p>\n\n<pre><code>query = 'select my_id, my_ts from my_table where my_ts &gt;  \"2016-05-13 00:00:00\" limit 100'\n</code></pre>\n"}], "owner": {"reputation": 17078, "user_id": 3993270, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/1bee661ad7451ff3107ca6954560a06c?s=128&d=identicon&r=PG&f=1", "display_name": "Edamame", "link": "https://stackoverflow.com/users/3993270/edamame"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 568, "favorite_count": 0, "accepted_answer_id": 38883079, "answer_count": 1, "score": 0, "last_activity_date": 1470861360, "creation_date": 1470861235, "question_id": 38883050, "link": "https://stackoverflow.com/questions/38883050/sql-impala-query-syntax-error-for-timestamp-range", "title": "SQL (Impala) query syntax error for timestamp range", "body": "<p>I am using the following query to find the data given the timestamp constraint:</p>\n\n<pre><code>query = 'select my_id, my_ts from my_table limit 100 where my_ts &gt;  \"2016-05-13 00:00:00\"'\ncursor = impala_con.cursor()\ncursor.execute('USE my_database')\ncursor.execute(query)\n</code></pre>\n\n<p>But get the following error:</p>\n\n<pre><code>HiveServer2Error: AnalysisException: Syntax error in line 1:\n...my_ts from my_table limit 100 where my_ts &gt;  \"201...\n                             ^\nEncountered: WHERE\nExpected: AND, BETWEEN, DIV, ILIKE, IN, IREGEXP, IS, LIKE, LIMIT, NOT, OFFSET, OR, ORDER, REGEXP, RLIKE, UNION\n\nCAUSED BY: Exception: Syntax error\n</code></pre>\n\n<hr>\n\n<p>Does anyone know what I did wrong? Thanks!</p>\n"}, {"tags": ["python", "tkinter", "progress-bar"], "answers": [{"tags": [], "owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "is_accepted": false, "score": 2, "last_activity_date": 1470866255, "creation_date": 1470866255, "answer_id": 38884235, "question_id": 38883022, "link": "https://stackoverflow.com/questions/38883022/python-progress-bar-gui/38884235#38884235", "title": "Python progress bar GUI", "body": "<p>The issue you're having is that your <code>test</code> function blocks the <code>tkinter</code> event loop. That means that even though the progress bar's <code>value</code> gets updated, the progress never appears on the screen (since nothing gets redrawn until <code>test</code> ends).</p>\n\n<p>To fix this, you need to get rid of the loop in <code>test</code> and instead use <code>tkinter</code> code to do the repeated updates.</p>\n\n<p>Here's a modified version of <code>test</code> that should work:</p>\n\n<pre><code>def test(i=0):\n    app.updating(i/100)\n    if i &lt; 100:\n        app.after(100, test, i+1)\n</code></pre>\n\n<p>Rather than explicitly looping, it reschedules itself every 100 milliseconds. Rather than <code>i</code> being a loop variable, it is now an argument, and each scheduled call gets a larger <code>i</code> value than the one before it.</p>\n"}], "owner": {"reputation": 153, "user_id": 6669719, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/aabc57d4459ee454dfb3e083ccc613a7?s=128&d=identicon&r=PG&f=1", "display_name": "Mr RC", "link": "https://stackoverflow.com/users/6669719/mr-rc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4077, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470866347, "creation_date": 1470861156, "last_edit_date": 1470866347, "question_id": 38883022, "link": "https://stackoverflow.com/questions/38883022/python-progress-bar-gui", "title": "Python progress bar GUI", "body": "<p>I wonder if you can help me. I have seen code for creating a progress bar GUI and am trying to modify it slightly so that I can send the progress bar the value I want it to be. Below is my code</p>\n\n<pre><code>import tkinter as tk\nfrom tkinter import ttk\nimport time\n\nclass progress_bar(tk.Tk):\n    def __init__(self, *args, **kwargs):\n        tk.Tk.__init__(self, *args, **kwargs)\n        self.progress = ttk.Progressbar(self, orient=\"horizontal\", length=200, mode=\"determinate\")\n        self.progress.pack()\n        self.val = 0\n        self.maxval = 1\n        self.progress[\"maximum\"] = 1\n\n    def updating(self, val):\n        self.val = val\n        self.progress[\"value\"] = self.val\n        print(self.val)\n\n        if self.val == self.maxval:\n            self.destroy()\n\ndef test():\n    for i in range(0, 101):\n        time.sleep(0.1)\n        app.updating(i/100)\n\napp = progress_bar()\napp.after(1, test)\napp.mainloop()\n</code></pre>\n\n<p>When I run the code the print message progresively increases from 0 - 1 as expected, however while the GUI is created it remains empty until the program has finished and it closes as required. Can you tell me what I need to modify so the GUI updates please. Thanks in advance for any help provided.</p>\n"}, {"tags": ["python", "beautifulsoup"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6685566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ac220107c74f51602824180015d9db3?s=128&d=identicon&r=PG&f=1", "display_name": "amin", "link": "https://stackoverflow.com/users/6685566/amin"}, "edited": false, "score": 0, "creation_date": 1470861441, "post_id": 38883044, "comment_id": 65127128, "body": "And it just results in IndexError: List index out of range. How can I debug it now?"}, {"owner": {"reputation": 1525, "user_id": 6664393, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe985e0b1cf77b72acb4e0058029acda?s=128&d=identicon&r=PG&f=1", "display_name": "user357269", "link": "https://stackoverflow.com/users/6664393/user357269"}, "reply_to_user": {"reputation": 11, "user_id": 6685566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ac220107c74f51602824180015d9db3?s=128&d=identicon&r=PG&f=1", "display_name": "amin", "link": "https://stackoverflow.com/users/6685566/amin"}, "edited": false, "score": 0, "creation_date": 1470861559, "post_id": 38883044, "comment_id": 65127182, "body": "<a href=\"http://stackoverflow.com/questions/37335219/empty-result-set-beautiful-soup\" title=\"empty result set beautiful soup\">stackoverflow.com/questions/37335219/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1525, "user_id": 6664393, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe985e0b1cf77b72acb4e0058029acda?s=128&d=identicon&r=PG&f=1", "display_name": "user357269", "link": "https://stackoverflow.com/users/6664393/user357269"}, "is_accepted": false, "score": 2, "last_activity_date": 1470861219, "last_edit_date": 1495541689, "creation_date": 1470861219, "answer_id": 38883044, "question_id": 38882998, "link": "https://stackoverflow.com/questions/38882998/web-scraping-attributeerror/38883044#38883044", "title": "Web Scraping AttributeError", "body": "<p>ResultSet is kind of like a list, so you'd need to do <code>select[0].get_text()</code> or something.</p>\n\n<p>More here: <a href=\"https://stackoverflow.com/questions/24108507/beautiful-soup-resultset-object-has-no-attribute-find-all\">Beautiful Soup: &#39;ResultSet&#39; object has no attribute &#39;find_all&#39;?</a></p>\n"}], "owner": {"reputation": 11, "user_id": 6685566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ac220107c74f51602824180015d9db3?s=128&d=identicon&r=PG&f=1", "display_name": "amin", "link": "https://stackoverflow.com/users/6685566/amin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "closed_date": 1470865290, "answer_count": 1, "score": 0, "last_activity_date": 1470861219, "creation_date": 1470861085, "last_edit_date": 1470861217, "question_id": 38882998, "link": "https://stackoverflow.com/questions/38882998/web-scraping-attributeerror", "closed_reason": "Duplicate", "title": "Web Scraping AttributeError", "body": "<p>I'm trying to use BeautifulSoup to get a number with a special id on a website. this is my code</p>\n\n<pre><code>from urllib2 import urlopen\nfrom bs4 import BeautifulSoup\nimport requests, logging\nlogging.basicConfig()\nhtml = urlopen(\"http://example.com\")\nbsObj = BeautifulSoup(str(html), \"html.parser\")\nselect = bsObj.findAll(id=\"myid\")\nprint(select.get_text())\n</code></pre>\n\n<p>But I get the 'AttributeError: 'ResultSet' object has no attribute 'get_text''.\nWhere is the problem?</p>\n"}, {"tags": ["python", "recursion", "tree", "iteration"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 1, "creation_date": 1470860912, "post_id": 38882928, "comment_id": 65126854, "body": "Show your iterative function that only partially solves the problem."}], "answers": [{"tags": [], "owner": {"reputation": 59735, "user_id": 1350899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a42186174515a63b8058100a736252f?s=128&d=identicon&r=PG", "display_name": "mata", "link": "https://stackoverflow.com/users/1350899/mata"}, "is_accepted": false, "score": 0, "last_activity_date": 1470862452, "creation_date": 1470862452, "answer_id": 38883351, "question_id": 38882928, "link": "https://stackoverflow.com/questions/38882928/convert-recursive-tree-walking-function-to-iterative/38883351#38883351", "title": "Convert recursive tree walking function to iterative", "body": "<p>The problem is that for this to work you also need to record on the stack where the node ends. A possible solution would be:</p>\n\n<pre><code>def walk(root):\n    stack = []\n    stack.append(root)\n    indent = 0\n    while stack:\n        node = stack.pop()\n        if isinstance(node, Node):\n            print('    ' * indent, \"&lt;\", node.name, \"&gt;\", sep=\"\")\n            indent += 1\n            stack.append(node.name)\n            stack.extend(reversed(node.children))\n        else:\n            indent -= 1\n            print('    ' * indent, \"&lt;/\", node, \"&gt;\", sep=\"\")\n</code></pre>\n\n<p>I've added indenting so the output is nicer:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>&lt;html&gt;\n    &lt;head&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;div&gt;\n        &lt;/div&gt;\n        &lt;p&gt;\n            &lt;a&gt;\n            &lt;/a&gt;\n        &lt;/p&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3347, "user_id": 881846, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Plm5g.jpg?s=128&g=1", "display_name": "RandyTek", "link": "https://stackoverflow.com/users/881846/randytek"}, "is_accepted": false, "score": 0, "last_activity_date": 1470873086, "last_edit_date": 1470873086, "creation_date": 1470862739, "answer_id": 38883423, "question_id": 38882928, "link": "https://stackoverflow.com/questions/38882928/convert-recursive-tree-walking-function-to-iterative/38883423#38883423", "title": "Convert recursive tree walking function to iterative", "body": "<p>It is kind of <a href=\"https://en.wikipedia.org/wiki/Tree_traversal\" rel=\"nofollow\">post-order tree treversal </a> as you have to visit the parent node after visiting children.</p>\n\n<p>I modified a few lines of your existing code:</p>\n\n<pre><code>class Node(object):\ndef __init__(self, name, children=[]):\n    self.name = name\n    self.children = children\n\n# def walk(node):\n#     print('&lt;', node.name, '&gt;', sep='')\n#     for n in node.children:\n#         walk(n)\n#     print('&lt;/', node.name, '&gt;', sep='')\n\ndef walk(node):\n    stack = []\n    stack.append((node, 'start'))\n    while len(stack) &gt; 0:\n        node, status = stack.pop()\n        if status == 'start':\n            stack.append((node, 'end'))\n            for child in reversed(node.children):\n                stack.append((child, 'start'))\n            print('&lt;', node.name, '&gt;', sep='')\n        else: # status == 'end'\n            print('&lt;/', node.name, '&gt;', sep='')\n\nroot = \\\nNode('html', [\n    Node('head'),\n    Node('body', [\n        Node('div'),\n        Node('p', [\n            Node('a'),\n        ])\n    ]),\n])\n\nwalk(root)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6702100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75906b4fe3cfe2294918a06ecf04742f?s=128&d=identicon&r=PG&f=1", "display_name": "chase37", "link": "https://stackoverflow.com/users/6702100/chase37"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 353, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1470873086, "creation_date": 1470860793, "last_edit_date": 1470861400, "question_id": 38882928, "link": "https://stackoverflow.com/questions/38882928/convert-recursive-tree-walking-function-to-iterative", "title": "Convert recursive tree walking function to iterative", "body": "<p>How can the following recursive function <code>walk()</code> be converted to an iterative function?</p>\n\n<p>Walking the nodes in the same order iteratively is easy using a stack, but I'm unable to figure out how to write an iterative function that will print both the opening and closing tags of each node like the recursive version does.</p>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>class Node(object):\n    def __init__(self, name, children=[]):\n        self.name = name\n        self.children = children\n\ndef walk(node):\n    print('&lt;', node.name, '&gt;', sep='')\n    for n in node.children:\n        walk(n)\n    print('&lt;/', node.name, '&gt;', sep='')\n\nroot = \\\nNode('html', [\n    Node('head'),\n    Node('body', [\n        Node('div'),\n        Node('p', [\n            Node('a'),\n        ])\n    ]),\n])\n\nwalk(root)\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div&gt;\n&lt;/div&gt;\n&lt;p&gt;\n&lt;a&gt;\n&lt;/a&gt;\n&lt;/p&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p><strong>Code that traverses the tree iteratively:</strong></p>\n\n<p>The function visits the nodes in the correct order, but obviously does not print the closing tags.</p>\n\n<pre><code>def walk(node):\n    stack = []\n    stack.append(node)\n    while len(stack) &gt; 0:\n        node = stack.pop()\n        for child in reversed(node.children):\n            stack.append(child)\n        print(node.name)\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "python-3.4"], "comments": [{"owner": {"reputation": 4052, "user_id": 5180509, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fd701362efce86f71d40e1ebe0254462?s=128&d=identicon&r=PG&f=1", "display_name": "JazZ", "link": "https://stackoverflow.com/users/5180509/jazz"}, "edited": false, "score": 1, "creation_date": 1470861202, "post_id": 38882913, "comment_id": 65127012, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/3964681/find-all-files-in-directory-with-extension-txt-in-python\">Find all files in directory with extension .txt in Python</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4052, "user_id": 5180509, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fd701362efce86f71d40e1ebe0254462?s=128&d=identicon&r=PG&f=1", "display_name": "JazZ", "link": "https://stackoverflow.com/users/5180509/jazz"}, "is_accepted": true, "score": 1, "last_activity_date": 1470861181, "last_edit_date": 1495540510, "creation_date": 1470861181, "answer_id": 38883029, "question_id": 38882913, "link": "https://stackoverflow.com/questions/38882913/python-convert-all-csv-files-in-folder-to-txt/38883029#38883029", "title": "Python Convert all csv files in folder to txt", "body": "<p>You can use <code>glob</code>:</p>\n\n<pre><code>import glob, os\nos.chdir(\"/mydir\")\nfor file in glob.glob(\"*.txt\"):\n    print(file)\n</code></pre>\n\n<p>Found here : <a href=\"https://stackoverflow.com/questions/3964681/find-all-files-in-directory-with-extension-txt-in-python\">Find all files in directory with extension .txt in Python</a></p>\n"}, {"tags": [], "owner": {"reputation": 201, "user_id": 5428563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaf15dc96c4bc931c085b9fe629e4063?s=128&d=identicon&r=PG&f=1", "display_name": "twothreebrent", "link": "https://stackoverflow.com/users/5428563/twothreebrent"}, "is_accepted": false, "score": 0, "last_activity_date": 1470861186, "creation_date": 1470861186, "answer_id": 38883031, "question_id": 38882913, "link": "https://stackoverflow.com/questions/38882913/python-convert-all-csv-files-in-folder-to-txt/38883031#38883031", "title": "Python Convert all csv files in folder to txt", "body": "<p>You could use glob to get all of the files in the folder then iterate over each of the files. You can make what you have a method then run the loop over the method and pass in the filename. <a href=\"https://docs.python.org/2/library/glob.html\" rel=\"nofollow\">https://docs.python.org/2/library/glob.html</a> This gives an explanation of the glob function. </p>\n\n<pre><code>for file_path in Path('src').glob('**/*.c'):\n    make_xml(file_path)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5811454"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2080, "favorite_count": 2, "accepted_answer_id": 38883029, "answer_count": 2, "score": 0, "last_activity_date": 1470861186, "creation_date": 1470860770, "question_id": 38882913, "link": "https://stackoverflow.com/questions/38882913/python-convert-all-csv-files-in-folder-to-txt", "title": "Python Convert all csv files in folder to txt", "body": "<p>I have this code that converts my csv file into a txt version of an xml file.. How can I edit this to convert all files in a folder?</p>\n\n<pre><code>import csv\n\ncsvFile = 'path\\to\\input\\123.csv'\nxmlFile = 'path\\to\\output\\123.txt'\n\ncsvData = csv.reader(open(csvFile))\nxmlData = open(xmlFile, 'w')\n\nrowNum = 0\nfor row in csvData:\n    if rowNum == 0:\n        tags = row\n        # replace spaces w/ underscores in tag names\n        for i in range(len(tags)):\n            tags[i] = tags[i].replace(' ', '_')\n    else: \n        xmlData.write('&lt;products_joined&gt;' + \"\\n\")\n        for i in range(len(tags)):\n            xmlData.write('    ' + '&lt;' + tags[i] + '&gt;&lt;![CDATA[' \\\n                          + row[i] + ']]&gt;&lt;/' + tags[i] + '&gt;' + \"\\n\")\n        xmlData.write('&lt;/products_joined&gt;' + \"\\n\")\n\n    rowNum +=1\n\nxmlData.close()\n</code></pre>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 3082, "user_id": 3263488, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b16b1330b7d55b0f837d343896bc2952?s=128&d=identicon&r=PG&f=1", "display_name": "konrad", "link": "https://stackoverflow.com/users/3263488/konrad"}, "edited": false, "score": 0, "creation_date": 1470861565, "post_id": 38883048, "comment_id": 65127187, "body": "Of course! I need to brush up some on those lambdas. Thank you!"}], "tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": true, "score": 1, "last_activity_date": 1470861227, "creation_date": 1470861227, "answer_id": 38883048, "question_id": 38882891, "link": "https://stackoverflow.com/questions/38882891/apply-a-function-to-a-list-and-multiple-single-arguments/38883048#38883048", "title": "apply a function to a list and multiple single arguments", "body": "<p>I believe this does what you want. </p>\n\n<pre><code>def SomeFunction(arg1, arg2):\n    print \"SomeFunction\", arg1, arg2\n\n\ndef SomeFunction2(arg1, arg2, arg3):\n    print \"SomeFunction\", arg1, arg2, arg3\n\n\ndef ProcessListArg(_func, _list, *_arg):\n    return map(lambda x: ProcessListArg(_func, x, *_arg)\n               if type(x) == list else _func(x, *_arg),\n               _list)\n\n\nProcessListArg(SomeFunction, [1, 2, [2.1, 2.2, 2.3], 3], 4)\nProcessListArg(SomeFunction2, [1, 2, [2.1, 2.2, 2.3], 3], 4, 5)\n</code></pre>\n"}], "owner": {"reputation": 3082, "user_id": 3263488, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b16b1330b7d55b0f837d343896bc2952?s=128&d=identicon&r=PG&f=1", "display_name": "konrad", "link": "https://stackoverflow.com/users/3263488/konrad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 38883048, "answer_count": 1, "score": 0, "last_activity_date": 1470861227, "creation_date": 1470860681, "question_id": 38882891, "link": "https://stackoverflow.com/questions/38882891/apply-a-function-to-a-list-and-multiple-single-arguments", "title": "apply a function to a list and multiple single arguments", "body": "<p>I have this definition that applies a function over a list of elements and a single additional argument that is needed for a function to execute. How can I modify it to apply arbitrary number of single arguments? Example:</p>\n\n<p>Current method: </p>\n\n<pre><code>def ProcessListArg(_func, _list, _arg):\n    return map( lambda x: ProcessListArg(_func, x, _arg) if type(x)==list else _func(x, _arg), _list )\n</code></pre>\n\n<p>for that to work i need a function that takes two arguments. Ex:</p>\n\n<pre><code>def SomeFunction(arg1, arg2):\n    return something\n</code></pre>\n\n<p>I would apply it like so: </p>\n\n<pre><code>output = ProcessListArg(SomeFunction, inputArg1List, inputArg2)\n</code></pre>\n\n<p>I want to modify ProcessListArg to take advantage of multiple single arguments like so: </p>\n\n<pre><code>def SomeFunction2(arg1, arg2, arg3):\n    return something\n</code></pre>\n\n<p>Then I would apply it like so: </p>\n\n<pre><code>output = ProcessListArgs(SomeFunction2, inputArg1List, inputArg2, inputArg3)\n</code></pre>\n\n<p>I tried this:</p>\n\n<pre><code>def ProcessListArgs(_func, _list, *args):\n    return map( lambda *xs: ProcessListArgs(_func *xs) if all(type(x) is list for x in xs) else _func(*xs), *args)\n</code></pre>\n\n<p>That throws an error that argument is not iterable. </p>\n\n<p>Thanks! </p>\n"}, {"tags": ["python", "smtp", "smtplib"], "comments": [{"owner": {"reputation": 7750, "user_id": 5747944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90aefeb5e2f0ecf9a68bf851a2b61336?s=128&d=identicon&r=PG", "display_name": "sytech", "link": "https://stackoverflow.com/users/5747944/sytech"}, "edited": false, "score": 0, "creation_date": 1470860925, "post_id": 38882890, "comment_id": 65126858, "body": "Can you try adding <code>conn.starttls()</code> on the line just before <code>conn.login</code> ? Are you sure you&#39;re connecting on the appropriate port? It should be <code>SMTP(servername, port_number)</code>"}, {"owner": {"reputation": 5657, "user_id": 3188761, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/28fe029285b3168ae61f354eccd5b562?s=128&d=identicon&r=PG&f=1", "display_name": "90abyss", "link": "https://stackoverflow.com/users/3188761/90abyss"}, "reply_to_user": {"reputation": 7750, "user_id": 5747944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90aefeb5e2f0ecf9a68bf851a2b61336?s=128&d=identicon&r=PG", "display_name": "sytech", "link": "https://stackoverflow.com/users/5747944/sytech"}, "edited": false, "score": 0, "creation_date": 1470861007, "post_id": 38882890, "comment_id": 65126911, "body": "It gets stuck on this line &quot;conn = SMTP(SMTPserver)&quot;, so doesn&#39;t go below only."}, {"owner": {"reputation": 7750, "user_id": 5747944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90aefeb5e2f0ecf9a68bf851a2b61336?s=128&d=identicon&r=PG", "display_name": "sytech", "link": "https://stackoverflow.com/users/5747944/sytech"}, "edited": false, "score": 0, "creation_date": 1470861175, "post_id": 38882890, "comment_id": 65126996, "body": "Shouldn&#39;t the server be <code>smtp.office365.com</code> on port 587? <a href=\"https://support.office.com/en-us/article/POP-and-IMAP-settings-for-Outlook-Office-365-for-business-7fc677eb-2491-4cbc-8153-8e7113525f6c\" rel=\"nofollow noreferrer\">Reference</a>"}, {"owner": {"reputation": 5657, "user_id": 3188761, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/28fe029285b3168ae61f354eccd5b562?s=128&d=identicon&r=PG&f=1", "display_name": "90abyss", "link": "https://stackoverflow.com/users/3188761/90abyss"}, "reply_to_user": {"reputation": 7750, "user_id": 5747944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90aefeb5e2f0ecf9a68bf851a2b61336?s=128&d=identicon&r=PG", "display_name": "sytech", "link": "https://stackoverflow.com/users/5747944/sytech"}, "edited": false, "score": 0, "creation_date": 1470884639, "post_id": 38882890, "comment_id": 65133657, "body": "@Gator_Python It&#39;s giving me a different error now. Posted here: <a href=\"https://stackoverflow.com/questions/38886594/\">stackoverflow.com/questions/38886594</a>"}], "owner": {"reputation": 5657, "user_id": 3188761, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/28fe029285b3168ae61f354eccd5b562?s=128&d=identicon&r=PG&f=1", "display_name": "90abyss", "link": "https://stackoverflow.com/users/3188761/90abyss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 471, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577004503, "creation_date": 1470860681, "last_edit_date": 1470860938, "question_id": 38882890, "link": "https://stackoverflow.com/questions/38882890/python-smtplib-not-working", "title": "Python: smtplib not working", "body": "<p>Using the same credentials, I'm able to use the SMTP server to send emails in my C# code. But can't seem to make it work on Python for some reason.</p>\n\n<p>This is my code:</p>\n\n<pre><code>def sendEmail(e):\n    SMTPserver = 'outlook.office365.com'\n    sender =     'x'\n    destination = ['x']\n\n    USERNAME = \"x\"\n    PASSWORD = \"x\"\n\n    text_subtype = 'plain'\n\n    content=\"\"\"\\\n    Test message\n    \"\"\"\n\n    subject = str(e)\n\n    try:\n        msg = MIMEText(content, text_subtype)\n        msg['Subject'] = subject\n        msg['From']   = sender \n\n        conn = SMTP(SMTPserver) #THIS IS WHERE IT GETS STUCK\n        conn.set_debuglevel(False)\n        conn.login(USERNAME, PASSWORD)\n        try:\n            conn.sendmail(sender, destination, msg.as_string())\n        finally:\n            conn.quit()\n\n    except Exception:\n        print( \"mail failed\" ) # give a error message\n        print(traceback.format_exc())\n</code></pre>\n\n<p>It gets stuck here: \"conn = SMTP(SMTPserver)\".</p>\n\n<p>Any ideas?</p>\n\n<p>Edit: Also, weirdly telnet gives me this -></p>\n\n<blockquote>\n  <p>C:\\Users\\x>telnet outlook.office365.com Connecting To\n  outlook.office365.com...Could not open connection to the host, on port\n  23: Connect failed</p>\n</blockquote>\n"}, {"tags": ["python", "python-2.7", "mocking", "python-sphinx", "python-import"], "answers": [{"tags": [], "owner": {"reputation": 505, "user_id": 3086470, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0b32092ef965d94eef18a4c80767cca4?s=128&d=identicon&r=PG&f=1", "display_name": "marscher", "link": "https://stackoverflow.com/users/3086470/marscher"}, "is_accepted": false, "score": 0, "last_activity_date": 1471449284, "creation_date": 1471449284, "answer_id": 39001253, "question_id": 38882882, "link": "https://stackoverflow.com/questions/38882882/python-2-7-mock-relative-import/39001253#39001253", "title": "Python 2.7 mock relative import", "body": "<p>It turns out that one can not mock c-extensions under Python-2.7, if they are relatively imported. I worked around that by using a meta_path hook to patch only these extensions.</p>\n"}], "owner": {"reputation": 505, "user_id": 3086470, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0b32092ef965d94eef18a4c80767cca4?s=128&d=identicon&r=PG&f=1", "display_name": "marscher", "link": "https://stackoverflow.com/users/3086470/marscher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 299, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1471449284, "creation_date": 1470860649, "question_id": 38882882, "link": "https://stackoverflow.com/questions/38882882/python-2-7-mock-relative-import", "title": "Python 2.7 mock relative import", "body": "<p>Background: Wanna build a documenation for a package, which imports a C-extension relatively, eg. in an __ init__.py. Lets assume this package is called mypkg.sub. So c_ext resides in sub.</p>\n\n<p>init.py of sub:</p>\n\n<pre><code>from __future__ import absolute_import\nfrom . import c_ext\n</code></pre>\n\n<p>When I mock this extension I do the following in my Sphinx conf.py:</p>\n\n<pre><code>from mock import Mock\nsys.modules['mypkg.sub.c_ext'] = Mock()\n</code></pre>\n\n<p>However I still get an import error:</p>\n\n<blockquote>\n  <p>ImportError: cannot import name c_ext</p>\n</blockquote>\n\n<p>The funny thing is, that the same thing works on Python3 (which has a slightly different import behaviour).</p>\n\n<p>Any hints appreciated!</p>\n"}, {"tags": ["python", "math"], "answers": [{"comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1470861306, "post_id": 38882999, "comment_id": 65127074, "body": "Or even <code>results = list(map(lambda x: x[0]*x[1], zip(squares, logs)))</code>"}, {"owner": {"reputation": 47, "user_id": 6665158, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10101631344230286/picture?type=large", "display_name": "Griggs Hutaff", "link": "https://stackoverflow.com/users/6665158/griggs-hutaff"}, "edited": false, "score": 0, "creation_date": 1470862368, "post_id": 38882999, "comment_id": 65127591, "body": "Both suggestions above are appropriate for multiplying elements in the &quot;squares&quot; and &quot;logs&quot; lists; however, when multiplying elements in the &quot;squareslol&quot; and &quot;logslol&quot; lists (which are &quot;list of lists&quot;) both suggestions still return the same TypeError as my original code."}], "tags": [], "owner": {"reputation": 958, "user_id": 6423520, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8fc3e99a3faefae485217a3a7312e6f7?s=128&d=identicon&r=PG&f=1", "display_name": "Monica", "link": "https://stackoverflow.com/users/6423520/monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1470861085, "creation_date": 1470861085, "answer_id": 38882999, "question_id": 38882866, "link": "https://stackoverflow.com/questions/38882866/multiplying-each-element-in-two-list-of-lists-in-python/38882999#38882999", "title": "Multiplying each element in two list of lists in python", "body": "<p>Try this approach:</p>\n\n<pre><code>results = []\nfor i,j in zip(squares,logs)\n     x = i*j\n     results.append(x)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 6665158, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10101631344230286/picture?type=large", "display_name": "Griggs Hutaff", "link": "https://stackoverflow.com/users/6665158/griggs-hutaff"}, "edited": false, "score": 0, "creation_date": 1472154201, "post_id": 39151246, "comment_id": 65650433, "body": "Thank you. I suspected that the <code>squareslol</code> and <code>logslol</code> were unnecessary. Showing the reverse sequence was especially helpful in understanding how the command is interpreted."}, {"owner": {"reputation": 425, "user_id": 4163116, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/odekY.jpg?s=128&g=1", "display_name": "Pabitra Pati", "link": "https://stackoverflow.com/users/4163116/pabitra-pati"}, "reply_to_user": {"reputation": 47, "user_id": 6665158, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10101631344230286/picture?type=large", "display_name": "Griggs Hutaff", "link": "https://stackoverflow.com/users/6665158/griggs-hutaff"}, "edited": false, "score": 0, "creation_date": 1472171920, "post_id": 39151246, "comment_id": 65656970, "body": "Initially it was difficult for me to understand what you are willing to do at step 4. I just saw the example of [i_1*j_1, i_1*j_2, ..], [i_2*j_1, i_2*j_2,...], etc...] and wrote the solution."}], "tags": [], "owner": {"reputation": 425, "user_id": 4163116, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/odekY.jpg?s=128&g=1", "display_name": "Pabitra Pati", "link": "https://stackoverflow.com/users/4163116/pabitra-pati"}, "is_accepted": true, "score": 0, "last_activity_date": 1472145672, "creation_date": 1472145672, "answer_id": 39151246, "question_id": 38882866, "link": "https://stackoverflow.com/questions/38882866/multiplying-each-element-in-two-list-of-lists-in-python/39151246#39151246", "title": "Multiplying each element in two list of lists in python", "body": "<pre><code>import math\nsquares = [pow(i,2) for i in range(1,6)]\nlogs = map(math.log10,range(1,6))\n\nmult = lambda x,y: x*y \nlmultl = map(mult,squares,logs)\n</code></pre>\n\n<p>I assume for you elements in <code>squares</code> are i_1, i_2, i_3...\nand elements in <code>logs</code> are j_1, j_2, j_3...</p>\n\n<p>And you want to create a list multiplying each element of <code>squares</code> with each element of <code>logs</code> which contains [[i_1*j_1, i_1*j_2, i_1*j_3...] [i_2*j_1, i_2*j_2, i_2*j_3...] etc], then use the below code :-</p>\n\n<pre><code>sqr_mul_log = [[m*n for m in logs ] for n in squares]\n</code></pre>\n\n<p>For the reverse sequence i.e. multiplying each element of <code>logs</code> with each element of <code>squares</code> which contains [[j_1*i_1, j_1*i_2, j_1*i_3...] [j_2*i_1, j_2*i_2, j_2*i_3...] etc], then use the below code :-</p>\n\n<pre><code>log_mul_sqr = [[m*n for m in squares] for n in logs]\n</code></pre>\n\n<p>Also, this will remove the overhead of creating <code>squareslol</code> and <code>logslol</code> that you are creating at #4</p>\n"}], "owner": {"reputation": 47, "user_id": 6665158, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10101631344230286/picture?type=large", "display_name": "Griggs Hutaff", "link": "https://stackoverflow.com/users/6665158/griggs-hutaff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 588, "favorite_count": 0, "accepted_answer_id": 39151246, "answer_count": 2, "score": 0, "last_activity_date": 1472145672, "creation_date": 1470860596, "question_id": 38882866, "link": "https://stackoverflow.com/questions/38882866/multiplying-each-element-in-two-list-of-lists-in-python", "title": "Multiplying each element in two list of lists in python", "body": "<p>I have an assignment to generate the following lists using only basic python functions (no numpy). Here is all of my code:</p>\n\n<pre><code>#1.Create a list which contains i^2 with i = 1 through 5\nsquares = [pow(i,2) for i in range(1,6)]\n#print squares\n\n#2. Create a list which contains log[j] with j = 1 through 5\nlogs = map(math.log10,range(1,6))\n#print logs\n\n#3. Create a list which contains [i_1*j_1, i_2*j_2, i_3,j_3...]\ndef mult(x,y): return x*y\nlmultl = map(mult,squares,logs)\n#print lmultl\n\n#4 Create a list which contains [[i_1*j_1, i_1*j_2, i_1*j_3...][i_2*j_1, i_2*j_2, i_2*j_3...]etc]\nlogslol = [[logs]*5] #Returns a list of lists with 5 copies of list \"logs\"\ndef lrep(x): return [x,x,x,x,x] #Returns a list w/ 5 copies of each integer \nsquareslol= map(lrep,squares) #Returns list of lists \"for squares\"\n\nprint map(mult,logslol,squareslol) #Attempt 1 to create goal list\nprint [logslol*item for item in squareslol] #Attempt 2 to create goal list \n</code></pre>\n\n<p>My Question is for the final print statements in list #4: I am getting a TypeError: \"can't multiply sequence by non-int of type 'list'\" for both methods. Is there a more efficient way to multiply each element in two \"list of lists\"?  </p>\n"}, {"tags": ["python", "python-2.7", "python-3.x", "ubuntu", "anaconda"], "answers": [{"tags": [], "owner": {"reputation": 611, "user_id": 4322488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9786cd39f64a34e92f0b0a52ae5e408?s=128&d=identicon&r=PG&f=1", "display_name": "asylumax", "link": "https://stackoverflow.com/users/4322488/asylumax"}, "is_accepted": true, "score": 4, "last_activity_date": 1493652768, "creation_date": 1493652768, "answer_id": 43721742, "question_id": 38882845, "link": "https://stackoverflow.com/questions/38882845/how-to-get-python-3-5-and-anaconda-3-5-running-on-ubuntu-16-04/43721742#43721742", "title": "How to get Python 3.5 and Anaconda 3.5 running on ubuntu 16.04?", "body": "<p>My solution for Python 3.5 and Anaconda on Ubuntu 16.04 LTS (with the bonus of OpenCV 3) was to install Anaconda, then deprecate to 3.5.   You have to be sure to update anaconda afterwards - that's the bit that got me at first.  The commands I gave were:</p>\n\n<pre><code>bash Anaconda3-4.3.1-Linux-x86_64.sh\nconda install python=3.5\nconda update anaconda\nconda install -c menpo opencv3\n</code></pre>\n\n<p>This seems to work for me; tried it on a few other Ubuntu 16.04 machines as well, and it seemed to work well.</p>\n"}, {"tags": [], "owner": {"reputation": 915, "user_id": 3481069, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dT0pX.jpg?s=128&g=1", "display_name": "sammy ongaya", "link": "https://stackoverflow.com/users/3481069/sammy-ongaya"}, "is_accepted": false, "score": 0, "last_activity_date": 1509797262, "last_edit_date": 1509797262, "creation_date": 1507280360, "answer_id": 46602056, "question_id": 38882845, "link": "https://stackoverflow.com/questions/38882845/how-to-get-python-3-5-and-anaconda-3-5-running-on-ubuntu-16-04/46602056#46602056", "title": "How to get Python 3.5 and Anaconda 3.5 running on ubuntu 16.04?", "body": "<p>Use anaconda version <code>Anaconda3-4.2.0-Linux-x86_64.sh</code> from the anaconda installer archive.This comes with <code>python 3.5</code>. This worked for me.</p>\n"}], "owner": {"reputation": 1041, "user_id": 784304, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4ba3ee04edff223cfa334051b97bdd50?s=128&d=identicon&r=PG", "display_name": "Bruce Whealton", "link": "https://stackoverflow.com/users/784304/bruce-whealton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2997, "favorite_count": 1, "accepted_answer_id": 43721742, "answer_count": 2, "score": 1, "last_activity_date": 1509797262, "creation_date": 1470860525, "last_edit_date": 1493652904, "question_id": 38882845, "link": "https://stackoverflow.com/questions/38882845/how-to-get-python-3-5-and-anaconda-3-5-running-on-ubuntu-16-04", "title": "How to get Python 3.5 and Anaconda 3.5 running on ubuntu 16.04?", "body": "<p>Anaconda for python 3.5 and python 2.7 seems to install just as a drop in folder inside my home folder on Ubuntu.  Is there an installed version of Anaconda for Ubuntu 16?  I'm not sure how to ask this but do I need python 3.5 that comes by default if I am also using Anaconda 3.5?  </p>\n\n<p>It seems like the best solution is docker these days.  I mean I understand virtualenv and virtualenvwrapper.  However, sometimes I try to indicate in my .bashrc that I want to use python 3.5 and yet I'll use the command mkvirtualenv and it will start installing the python 2.7 versions of python.  </p>\n\n<p>Should I choose either Anaconda or the version of python installed with my OS from python.org or is there an easy way to manage many different versions of Python?\nThanks,\nBruce</p>\n"}, {"tags": ["python", "function", "recursion", "return"], "answers": [{"comments": [{"owner": {"reputation": 7576, "user_id": 1603840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VJhqE.jpg?s=128&g=1", "display_name": "Karin", "link": "https://stackoverflow.com/users/1603840/karin"}, "reply_to_user": {"reputation": 61, "user_id": 5839461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16c86423e3ee546fcc981a9a487b70e2?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Finn", "link": "https://stackoverflow.com/users/5839461/joe-finn"}, "edited": false, "score": 0, "creation_date": 1470861723, "post_id": 38882877, "comment_id": 65127268, "body": "You&#39;re welcome! If your issue is fixed, would you mind marking the answer as accepted? This helps the filter for people looking for unanswered questions :)"}, {"owner": {"reputation": 1540, "user_id": 9260060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ISj3q.png?s=128&g=1", "display_name": "David Kamer", "link": "https://stackoverflow.com/users/9260060/david-kamer"}, "edited": false, "score": 2, "creation_date": 1530751013, "post_id": 38882877, "comment_id": 89346426, "body": "The point is that you have to return the called function. Some languages allow you to simply return the value on the last called function. I should say some compilers of some languages. C++ for Win32 is one that works this way. The call stack looks to the last recursive call to return the value, but not in python"}], "tags": [], "owner": {"reputation": 7576, "user_id": 1603840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VJhqE.jpg?s=128&g=1", "display_name": "Karin", "link": "https://stackoverflow.com/users/1603840/karin"}, "is_accepted": true, "score": 6, "last_activity_date": 1470860630, "creation_date": 1470860630, "answer_id": 38882877, "question_id": 38882826, "link": "https://stackoverflow.com/questions/38882826/how-to-return-a-value-from-a-recursive-python-function/38882877#38882877", "title": "How to return a value from a recursive Python function?", "body": "<p>I think you're missing a <code>return</code> before the nested <code>get_number</code>. So, it's executing and returning, but you aren't doing anything with the recursed value.</p>\n\n<pre><code>def get_number(n = 0, nums = ''):\n    for i in range(0, len(url)):\n        #both n and nums are changed\n    if len(nums) &lt; num_length:\n        return get_number(n, nums)\n\n    print(nums)\n    return nums\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 5839461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16c86423e3ee546fcc981a9a487b70e2?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Finn", "link": "https://stackoverflow.com/users/5839461/joe-finn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5356, "favorite_count": 1, "accepted_answer_id": 38882877, "answer_count": 1, "score": 1, "last_activity_date": 1470861100, "creation_date": 1470860462, "last_edit_date": 1470861100, "question_id": 38882826, "link": "https://stackoverflow.com/questions/38882826/how-to-return-a-value-from-a-recursive-python-function", "title": "How to return a value from a recursive Python function?", "body": "<p>This question seems a bit specific, and for that I'm sorry, but it has me stumped. I'm writing myself a password generator, one that takes a string (aka the URL of a website) and processes it into a secure password that can't be backtracked based on the name of the website. </p>\n\n<p>In part of the code, I created a recursive function that looks like this:</p>\n\n<pre><code>def get_number(n = 0, nums = ''):\n    for i in range(0, len(url)):\n        #both n and nums are changed\n    if len(nums) &lt; num_length:\n        get_number(n, nums)\n    else:\n        print(nums)\n        return(nums)\n</code></pre>\n\n<p>...</p>\n\n<pre><code>print(get_number())\n</code></pre>\n\n<p>I would expect 'nums' to output twice, since I print it in the else block and print the return later on. But, if it does go through a recursive loop, 'nums' is printed from the else block and the function returns 'None'. If <code>if len(nums) &lt; num_length</code> is false the first time, then it returns the proper value.</p>\n\n<p>Why would it return 'None', if I verified that the object it is returning is not in fact 'None' the line before?</p>\n\n<p>I'm a little new to Python, do they handle recursions differently?</p>\n\n<p>Thank you for your time</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>Problem fixed. Forgot a return statement on the recursive call. Thanks :D</p>\n"}, {"tags": ["python", "python-2.7", "operators"], "comments": [{"owner": {"reputation": 2594, "user_id": 6627323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39919117dd3edf525bb00bdcccd3d64e?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/6627323/james"}, "edited": false, "score": 0, "creation_date": 1470860514, "post_id": 38882817, "comment_id": 65126660, "body": "<a href=\"http://stackoverflow.com/questions/4007289/so-what-exactly-does-from-future-import-barry-as-flufl-do\" title=\"so what exactly does from future import barry as flufl do\">stackoverflow.com/questions/4007289/&hellip;</a>"}, {"owner": {"reputation": 2289, "user_id": 3873323, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GC0dB.jpg?s=128&g=1", "display_name": "Yotam Salmon", "link": "https://stackoverflow.com/users/3873323/yotam-salmon"}, "edited": false, "score": 0, "creation_date": 1470860525, "post_id": 38882817, "comment_id": 65126663, "body": "I think it&#39;s the same of <code>!=</code>, but I have never seen it in python (I have seen that one in SQL before and it represent not equals)"}, {"owner": {"reputation": 2531, "user_id": 3160529, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/409ccefcab7337f7dc87a4cac668de1d?s=128&d=identicon&r=PG", "display_name": "Shubham", "link": "https://stackoverflow.com/users/3160529/shubham"}, "edited": false, "score": 0, "creation_date": 1470860604, "post_id": 38882817, "comment_id": 65126701, "body": "Check <a href=\"http://www.tutorialspoint.com/python/python_basic_operators.htm\" rel=\"nofollow noreferrer\">this</a>. This was the first link on google after searching: <code>&lt;&gt; in python</code>"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 2531, "user_id": 3160529, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/409ccefcab7337f7dc87a4cac668de1d?s=128&d=identicon&r=PG", "display_name": "Shubham", "link": "https://stackoverflow.com/users/3160529/shubham"}, "edited": false, "score": 0, "creation_date": 1470861061, "post_id": 38882817, "comment_id": 65126936, "body": "@ShubhamBhattar: That doesn&#39;t come up at all when I perform that search. EDIT: no wait, it&#39;s buried further down the result list."}], "answers": [{"comments": [{"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 1, "creation_date": 1470861171, "post_id": 38882844, "comment_id": 65126993, "body": "Worth mentioning: it was removed from the language and doesn&#39;t work in python3.  Don&#39;t use it."}, {"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1470861597, "post_id": 38882844, "comment_id": 65127208, "body": "It goes way back to BASIC, by the way, and probably was adopted from there in Python&#39;s predecessor, ABC."}], "tags": [], "owner": {"reputation": 252, "user_id": 4403294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/029e6e295cd808c16cf68c7db4679dec?s=128&d=identicon&r=PG", "display_name": "rscarson", "link": "https://stackoverflow.com/users/4403294/rscarson"}, "is_accepted": true, "score": 1, "last_activity_date": 1470861246, "last_edit_date": 1470861246, "creation_date": 1470860519, "answer_id": 38882844, "question_id": 38882817, "link": "https://stackoverflow.com/questions/38882817/python-operator-in-conditional-statement/38882844#38882844", "title": "python: operator &quot;&lt;&gt;&quot; in conditional statement", "body": "<p>It's an alternate version of !=, checking for non-equality.</p>\n"}], "owner": {"reputation": 31, "user_id": 5136679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3b64df5fe452526f79c733e614fd835?s=128&d=identicon&r=PG&f=1", "display_name": "EshelBM", "link": "https://stackoverflow.com/users/5136679/eshelbm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 1, "closed_date": 1470861367, "accepted_answer_id": 38882844, "answer_count": 1, "score": 0, "last_activity_date": 1470861246, "creation_date": 1470860431, "last_edit_date": 1470860883, "question_id": 38882817, "link": "https://stackoverflow.com/questions/38882817/python-operator-in-conditional-statement", "closed_reason": "Duplicate", "title": "python: operator &quot;&lt;&gt;&quot; in conditional statement", "body": "<p>I am trying to understand some python code from the internet in which I found this line:</p>\n\n<pre><code> if len(u) &lt;&gt; 2:\n        # some statements\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>  if idPlayer &lt;&gt; 0:\n        # some statements\n</code></pre>\n\n<p>Tried to google it, nothing found, not even in the python documentation...</p>\n\n<p>What does the conditional sign \"&lt;>\" means?\nWhen the conditions above are True?\nThanks</p>\n"}, {"tags": ["python", "pandas", "apache-spark", "dask"], "comments": [{"owner": {"reputation": 456, "user_id": 3435769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bbe345ca6f70cee2ce5c94794984645?s=128&d=identicon&r=PG", "display_name": "ReneWang", "link": "https://stackoverflow.com/users/3435769/renewang"}, "edited": false, "score": 1, "creation_date": 1488425975, "post_id": 38882660, "comment_id": 72228260, "body": "Considering data size alone is not sufficient for choosing best parallel tools / strategy. How algorithm handles data needs to be taken into account. I have not tried both but probably will try dask on single machine such as laptop or pc. And will consider to deploy to spark when there&#39;s a need to run with multi-nodes cluster. Since it looks very complicated to learn and tune each component with the framework coming with spark."}, {"owner": {"reputation": 1090, "user_id": 720480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae13fa41c1738c3c4eedfd1284618362?s=128&d=identicon&r=PG", "display_name": "tom", "link": "https://stackoverflow.com/users/720480/tom"}, "edited": false, "score": 0, "creation_date": 1574173446, "post_id": 38882660, "comment_id": 104131171, "body": "You may find a reply here : <a href=\"https://medium.com/datadriveninvestor/pandas-dask-or-pyspark-what-should-you-choose-for-your-dataset-c0f67e1b1d36\" rel=\"nofollow noreferrer\">medium.com/datadriveninvestor/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 42, "last_activity_date": 1470863894, "creation_date": 1470863894, "answer_id": 38883747, "question_id": 38882660, "link": "https://stackoverflow.com/questions/38882660/at-what-situation-i-can-use-dask-instead-of-apache-spark/38883747#38883747", "title": "At what situation I can use Dask instead of Apache Spark?", "body": "<p>you may want to read <a href=\"http://dask.pydata.org/en/latest/spark.html\" rel=\"noreferrer\">Dask comparison to Apache Spark</a></p>\n\n<blockquote>\n  <p>Apache Spark is an all-inclusive framework combining distributed\n  computing, SQL queries, machine learning, and more that runs on the\n  JVM and is commonly co-deployed with other Big Data frameworks like\n  Hadoop. It was originally optimized for bulk data ingest and querying\n  common in data engineering and business analytics but has since\n  broadened out. Spark is typically used on small to medium sized\n  cluster but also runs well on a single machine.</p>\n  \n  <p>Dask is a parallel programming library that combines with the Numeric\n  Python ecosystem to provide parallel arrays, dataframes, machine\n  learning, and custom algorithms. It is based on Python and the\n  foundational C/Fortran stack. Dask was originally designed to\n  complement other libraries with parallelism, particular for numeric\n  computing and advanced analytics, but has since broadened out. Dask is\n  typically used on a single machine, but also runs well on a\n  distributed cluster.</p>\n  \n  <p>Generally Dask is smaller and lighter weight than Spark. This means\n  that it has fewer features and instead is intended to be used in\n  conjunction with other libraries, particularly those in the numeric\n  Python ecosystem.</p>\n</blockquote>\n"}], "owner": {"reputation": 1303, "user_id": 6440269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/370ad33812e9d83cdeafa9af1da862dd?s=128&d=identicon&r=PG&f=1", "display_name": "Hariprasad", "link": "https://stackoverflow.com/users/6440269/hariprasad"}, "delete_vote_count": 4, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33740, "favorite_count": 31, "closed_date": 1470896667, "answer_count": 1, "score": 86, "last_activity_date": 1588352185, "creation_date": 1470859904, "last_edit_date": 1588352185, "question_id": 38882660, "link": "https://stackoverflow.com/questions/38882660/at-what-situation-i-can-use-dask-instead-of-apache-spark", "closed_reason": "Opinion-based", "title": "At what situation I can use Dask instead of Apache Spark?", "body": "<p>I am currently using Pandas and Spark for data analysis. I found Dask provides parallelized NumPy array and Pandas DataFrame.</p>\n\n<p>Pandas is easy and intuitive for doing data analysis in Python. But I find difficulty in handling multiple bigger dataframes in Pandas due to limited system memory.</p>\n\n<blockquote>\n  <p>Simple Answer:</p>\n  \n  <p>Apache Spark is an all-inclusive framework combining distributed\n  computing, SQL queries, machine learning, and more that runs on the\n  JVM and is commonly co-deployed with other Big Data frameworks like\n  Hadoop. ... Generally Dask is smaller and lighter weight than Spark.</p>\n</blockquote>\n\n<p>I get to know below details from <a href=\"http://dask.pydata.org/en/latest/spark.html\" rel=\"noreferrer\">http://dask.pydata.org/en/latest/spark.html</a></p>\n\n<ul>\n<li>Dask is light weighted</li>\n<li>Dask is typically used on a single machine, but also runs well on a distributed cluster.</li>\n<li>Dask to provides parallel arrays, dataframes, machine learning, and custom algorithms</li>\n<li>Dask has an advantage for Python users because it is itself a Python library, so serialization and debugging when things go wrong happens more smoothly.</li>\n<li>Dask gives up high-level understanding to allow users to express more complex parallel algorithms. </li>\n<li>Dask is lighter weight and is easier to integrate into existing code and hardware.</li>\n<li>If you want a single project that does everything and you\u2019re already on Big Data hardware then Spark is a safe bet</li>\n<li>Spark is typically used on small to medium sized cluster but also runs well on a single machine.</li>\n</ul>\n\n<p>I understand more things about Dask from the below link\n<a href=\"https://www.continuum.io/blog/developer-blog/high-performance-hadoop-anaconda-and-dask-your-cluster\" rel=\"noreferrer\">https://www.continuum.io/blog/developer-blog/high-performance-hadoop-anaconda-and-dask-your-cluster</a></p>\n\n<ul>\n<li>If you\u2019re running into memory issues, storage limitations, or CPU boundaries on a single machine when using Pandas, NumPy, or other computations with Python, Dask can help you scale up on all of the cores on a single machine, or scale out on all of the cores and memory across your cluster.</li>\n<li>Dask works well on a single machine to make use of all of the cores on your laptop and process larger-than-memory data</li>\n<li>scales up resiliently and elastically on clusters with hundreds of nodes.</li>\n<li>Dask works natively from Python with data in different formats and storage systems, including the Hadoop Distributed File System (HDFS) and Amazon S3. Anaconda and Dask can work with your existing enterprise Hadoop distribution, including Cloudera CDH and Hortonworks HDP.</li>\n</ul>\n\n<p><a href=\"http://dask.pydata.org/en/latest/dataframe-overview.html\" rel=\"noreferrer\">http://dask.pydata.org/en/latest/dataframe-overview.html</a></p>\n\n<p><strong>Limitations</strong></p>\n\n<p>Dask.DataFrame does not implement the entire Pandas interface. Users expecting this will be disappointed.Notably, dask.dataframe has the following limitations:</p>\n\n<ol>\n<li>Setting a new index from an unsorted column is expensive</li>\n<li>Many operations, like groupby-apply and join on unsorted columns require setting the index, which as mentioned above, is expensive</li>\n<li>The Pandas API is very large. Dask.dataframe does not attempt to implement many pandas features or any of the more exotic data structures like NDFrames</li>\n</ol>\n\n<p>Thanks to the Dask developers. It seems like very promising technology.</p>\n\n<p>Overall I can understand Dask is simpler to use than spark. Dask is as flexible as Pandas with more power to compute with more cpu's parallely.</p>\n\n<p>I understand all the above facts about Dask.</p>\n\n<p><strong>So, roughly how much amount of data(in terabyte) can be processed with Dask?</strong></p>\n"}, {"tags": ["python", "string", "list", "python-2.7"], "comments": [{"owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 0, "creation_date": 1470860047, "post_id": 38882641, "comment_id": 65126433, "body": "What kind of actions are you doing? I mean: if the text is <code>LeoJohnAaron</code> what should happen? Is there some connection between what happens to  <code>LeoJohn</code> and <code>LeoJohnAaron</code> or will the code do completely different things?"}, {"owner": {"reputation": 1147, "user_id": 6701496, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b152e21900988ab6f21e6b1298f3bc62?s=128&d=identicon&r=PG&f=1", "display_name": "degath", "link": "https://stackoverflow.com/users/6701496/degath"}, "reply_to_user": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 0, "creation_date": 1470860943, "post_id": 38882641, "comment_id": 65126874, "body": "if text is LeoJohnAaron it should  for example do 2 actions: from another String substract lenght of this String and print those names in separated lines  But its just an example. :)"}, {"owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 0, "creation_date": 1470861652, "post_id": 38882641, "comment_id": 65127241, "body": "And what happens with  <code>LeoJohnLeoLeo</code>? do repetition count? Does order matter? The general approach would be to use regexes, for example <code>re.findall(&#39;({})&#39;.format(&#39;|&#39;.join(map(re.escape, names))), text)</code> and loop over the matches, but depending on a number of factors I&#39;ve pointed out simpler solution might be better."}, {"owner": {"reputation": 1147, "user_id": 6701496, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b152e21900988ab6f21e6b1298f3bc62?s=128&d=identicon&r=PG&f=1", "display_name": "degath", "link": "https://stackoverflow.com/users/6701496/degath"}, "reply_to_user": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 0, "creation_date": 1470863059, "post_id": 38882641, "comment_id": 65127911, "body": "There wont be a repetitions like LeoLeo :) Order matters. If its LeoJohn I need to print Leo first and then John. And after printing I need to know that Leo was with John.  I&#39;m kinda new in python but it seems that RegEx is one or maybe the most important thing in it. Im gona study it tomorrow. Right now its time for sleep :)"}], "answers": [{"comments": [{"owner": {"reputation": 1147, "user_id": 6701496, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b152e21900988ab6f21e6b1298f3bc62?s=128&d=identicon&r=PG&f=1", "display_name": "degath", "link": "https://stackoverflow.com/users/6701496/degath"}, "edited": false, "score": 0, "creation_date": 1470900069, "post_id": 38882705, "comment_id": 65139560, "body": "Thanks, it works good, and I&#39;ve got no repetitions in the code :-)"}, {"owner": {"reputation": 1147, "user_id": 6701496, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b152e21900988ab6f21e6b1298f3bc62?s=128&d=identicon&r=PG&f=1", "display_name": "degath", "link": "https://stackoverflow.com/users/6701496/degath"}, "edited": false, "score": 1, "creation_date": 1470987794, "post_id": 38882705, "comment_id": 65182412, "body": "Oh, sorry, it was my first question so u need to forgive me :-)"}], "tags": [], "owner": {"reputation": 2594, "user_id": 6627323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39919117dd3edf525bb00bdcccd3d64e?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/6627323/james"}, "is_accepted": true, "score": 0, "last_activity_date": 1470860072, "creation_date": 1470860072, "answer_id": 38882705, "question_id": 38882641, "link": "https://stackoverflow.com/questions/38882641/how-to-split-string-with-a-pattern-from-list/38882705#38882705", "title": "how to split String with a &quot;pattern&quot; from list", "body": "<pre><code>if String == \"\":          #this works well on Strings with 0 values\n    print \"something\"\nelif String in List:      #this works well on Strings with 1 value\n    print \"something else\"\nelif len([1 for x in List if x in String]) == 2\n    ...\n</code></pre>\n\n<p>This is called a list comprehension, it will go through the list and find all of the list elements that have a substring in common with the string at hand, then return the length of that.</p>\n\n<p>Note that there may be some issues if you have a name like \"Ann\" and \"Anna\", the name \"Anna\" in the string will get counted twice. If you need a solution that accounts for that, I would suggest splitting on capital letters to explicitly separate the list into separate names by splitting on capital letters (If you want I can update this solution to show how to do that with regex)</p>\n"}, {"tags": [], "owner": {"reputation": 62902, "user_id": 90511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/nmOPo.png?s=128&g=1", "display_name": "hugomg", "link": "https://stackoverflow.com/users/90511/hugomg"}, "is_accepted": false, "score": 0, "last_activity_date": 1470860082, "creation_date": 1470860082, "answer_id": 38882710, "question_id": 38882641, "link": "https://stackoverflow.com/questions/38882641/how-to-split-string-with-a-pattern-from-list/38882710#38882710", "title": "how to split String with a &quot;pattern&quot; from list", "body": "<p>I think the most straightforward approach would be to loop over the list of names and for each of them check if its in your string.</p>\n\n<pre><code>for name in List:\n   if name in String:\n      print(\"do something here\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "is_accepted": false, "score": 0, "last_activity_date": 1470860089, "creation_date": 1470860089, "answer_id": 38882713, "question_id": 38882641, "link": "https://stackoverflow.com/questions/38882641/how-to-split-string-with-a-pattern-from-list/38882713#38882713", "title": "how to split String with a &quot;pattern&quot; from list", "body": "<p>So, you want to find whether some string contains any members of the given list.</p>\n\n<p>Iterate over the list and check whether the string contains the current item:</p>\n\n<pre><code>for data in List:\n    if data in String:\n        print(\"Found it!\")\n</code></pre>\n"}], "owner": {"reputation": 1147, "user_id": 6701496, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b152e21900988ab6f21e6b1298f3bc62?s=128&d=identicon&r=PG&f=1", "display_name": "degath", "link": "https://stackoverflow.com/users/6701496/degath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 38882705, "answer_count": 3, "score": 0, "last_activity_date": 1470863573, "creation_date": 1470859787, "last_edit_date": 1470863573, "question_id": 38882641, "link": "https://stackoverflow.com/questions/38882641/how-to-split-string-with-a-pattern-from-list", "title": "how to split String with a &quot;pattern&quot; from list", "body": "<p>I've got a small problem with finding part of string in a list with python. </p>\n\n<p>I load the string from a file and the value is one of the following: <code>(none, 1 from list, 2 from list, 3 from list or more...)</code> </p>\n\n<p>I need to perform different actions depending on whether the String equals <code>\"\"</code>, the String equals <code>1 element from list</code>, or if the String is for 2 or more elements. For Example:</p>\n\n<pre><code>List = [ 'Aaron', 'Albert', 'Arcady', 'Leo', 'John' ... ]\nString = \"\"             #this is just example\nString = \"Aaron\"        #this is just example\nString = \"AaronAlbert\"  #this is just example \nString = \"LeoJohnAaron\" #this is just example\n</code></pre>\n\n<p>I created something like this:</p>\n\n<pre><code>if String == \"\":          #this works well on Strings with 0 values\n    print \"something\"\nelif String in List:      #this works well on Strings with 1 value\n    print \"something else\"\nelif ...                  #dont know what now\n</code></pre>\n\n<p>The best way would be to split this String with a pattern from a list. I was trying:</p>\n\n<pre><code>String.Find(x) #failed.\n</code></pre>\n\n<p>I tried to find similar posts but couldn't.</p>\n"}, {"tags": ["python", "pandas", "multi-index"], "comments": [{"owner": {"reputation": 859, "user_id": 5937075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e51c074a03e45165f026cbd8d5042e6e?s=128&d=identicon&r=PG&f=1", "display_name": "SO44", "link": "https://stackoverflow.com/users/5937075/so44"}, "edited": false, "score": 1, "creation_date": 1470860033, "post_id": 38882595, "comment_id": 65126421, "body": "Swap the 1st and 3rd elements in the tuple for stat1 and stat2 columns"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 859, "user_id": 5937075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e51c074a03e45165f026cbd8d5042e6e?s=128&d=identicon&r=PG&f=1", "display_name": "SO44", "link": "https://stackoverflow.com/users/5937075/so44"}, "edited": false, "score": 0, "creation_date": 1470860281, "post_id": 38882595, "comment_id": 65126550, "body": "Suppose I don&#39;t know it&#39;s the first element of the tuple that has the non-blank value.  What if it were the 2nd for one and 1st for another."}, {"owner": {"reputation": 19255, "user_id": 428862, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7041b76f657ac8e8d32a72f1b8b5b4bb?s=128&d=identicon&r=PG", "display_name": "Merlin", "link": "https://stackoverflow.com/users/428862/merlin"}, "reply_to_user": {"reputation": 859, "user_id": 5937075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e51c074a03e45165f026cbd8d5042e6e?s=128&d=identicon&r=PG&f=1", "display_name": "SO44", "link": "https://stackoverflow.com/users/5937075/so44"}, "edited": false, "score": 0, "creation_date": 1470860328, "post_id": 38882595, "comment_id": 65126575, "body": "@So44  I think piRSquared would seen that."}, {"owner": {"reputation": 859, "user_id": 5937075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e51c074a03e45165f026cbd8d5042e6e?s=128&d=identicon&r=PG&f=1", "display_name": "SO44", "link": "https://stackoverflow.com/users/5937075/so44"}, "edited": false, "score": 0, "creation_date": 1470860482, "post_id": 38882595, "comment_id": 65126642, "body": "oh sorry, had to go back to the question to see that"}], "answers": [{"comments": [{"owner": {"reputation": 6581, "user_id": 3765319, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1262dca6cd7334e5eb75649272eea20d?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/3765319/kartik"}, "edited": false, "score": 0, "creation_date": 1470861156, "post_id": 38882997, "comment_id": 65126982, "body": "Hang on. Let me edit this as per your comment on your question."}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 1, "creation_date": 1470861315, "post_id": 38882997, "comment_id": 65127077, "body": "So far, I like it."}, {"owner": {"reputation": 6581, "user_id": 3765319, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1262dca6cd7334e5eb75649272eea20d?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/3765319/kartik"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1470863691, "post_id": 38882997, "comment_id": 65128179, "body": "Done! Check it out!"}], "tags": [], "owner": {"reputation": 6581, "user_id": 3765319, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1262dca6cd7334e5eb75649272eea20d?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/3765319/kartik"}, "is_accepted": false, "score": 3, "last_activity_date": 1470864957, "last_edit_date": 1470864957, "creation_date": 1470861078, "answer_id": 38882997, "question_id": 38882595, "link": "https://stackoverflow.com/questions/38882595/shift-pandas-multiindex-values-such-that-they-dont-have-blanks-below-non-blanks/38882997#38882997", "title": "shift pandas multiindex values such that they don&#39;t have blanks below non blanks", "body": "<p>piRSquared, try this:</p>\n\n<pre><code>In [1]: import pandas as pd\n        import numpy as np\n\nIn [2]: col = pd.MultiIndex.from_tuples([('a', '', ''), ('', 'b', ''),\n                                         ('c', 'd', ''), ('e', '', 'f'),\n                                         ('g', 'h', 'i'), ('', 'j', 'k')])\n        df = pd.DataFrame(np.arange(24).reshape(4, 6), list('abcd'), col)\n        df\n\nOut[2]:     a       c   e   g   \n                b   d       h   j\n                        f   i   k\n        a   0   1   2   3   4   5\n        b   6   7   8   9   10  11\n        c   12  13  14  15  16  17\n        d   18  19  20  21  22  23\n\nIn [3]: new_cols = []\n        for col in df.columns:\n            b = np.argsort([1 if (v != '') else 0 for v in col])\n            col = [col[i] for i in b]\n            new_cols.append(col)\n        df.columns = list(map(list, zip(*new_cols)))\n        df\n\nOut[3]:                     g   \n                    c   e   h   j\n            a   b   d   f   i   k\n        a   0   1   2   3   4   5\n        b   6   7   8   9   10  11\n        c   12  13  14  15  16  17\n        d   18  19  20  21  22  23\n</code></pre>\n\n<hr>\n\n<h1>Timings</h1>\n\n<p>Running only one loop because:</p>\n\n<ol>\n<li>Getting cached copy warning</li>\n<li>OP probably will only run it once a time. Speed ups due to cached copies will be useless</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/xHGyA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xHGyA.png\" alt=\"Timing Profiles\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 859, "user_id": 5937075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e51c074a03e45165f026cbd8d5042e6e?s=128&d=identicon&r=PG&f=1", "display_name": "SO44", "link": "https://stackoverflow.com/users/5937075/so44"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1470862389, "post_id": 38883135, "comment_id": 65127601, "body": "If there are more than 3 layers in the header this could get crazy, instead you could change all the logic gates for a combination of filtering out blanks and then padding the leftover headers with blanks based on a fixed length"}], "tags": [], "owner": {"reputation": 859, "user_id": 5937075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e51c074a03e45165f026cbd8d5042e6e?s=128&d=identicon&r=PG&f=1", "display_name": "SO44", "link": "https://stackoverflow.com/users/5937075/so44"}, "is_accepted": false, "score": 3, "last_activity_date": 1470866815, "last_edit_date": 1470866815, "creation_date": 1470861650, "answer_id": 38883135, "question_id": 38882595, "link": "https://stackoverflow.com/questions/38882595/shift-pandas-multiindex-values-such-that-they-dont-have-blanks-below-non-blanks/38883135#38883135", "title": "shift pandas multiindex values such that they don&#39;t have blanks below non blanks", "body": "<pre><code>tuple_list = df.columns.values\nnew_tuple_list = []\n\nfor t in tuple_list:\n    if t[2] == '':\n        if t[1] == '':\n            t = (t[1], t[2], t[0])\n        else:\n            t = (t[2], t[0], t[1])\n    elif t[1] == '' and t[0] != '':\n        t = (t[1], t[0], t[2])\n\n    new_tuple_list.append(t)\n\ndf.columns = pd.MultiIndex.from_tuples(new_tuple_list)\n</code></pre>\n\n<p>This is better and should work for headers with more levels:</p>\n\n<pre><code>tuple_list = df.columns.values\nnew_tuple_list = []\n\nfor t in tuple_list:\n    header_only = [x for x in t if x != '']\n    leading_empty = ['' for x in range(0, 3-len(header_only))]\n    new_tuple = tuple(leading_empty + header_only)\n\n    new_tuple_list.append(new_tuple)\n\ndf.columns = pd.MultiIndex.from_tuples(new_tuple_list)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 3, "last_activity_date": 1470862331, "creation_date": 1470862331, "answer_id": 38883320, "question_id": 38882595, "link": "https://stackoverflow.com/questions/38882595/shift-pandas-multiindex-values-such-that-they-dont-have-blanks-below-non-blanks/38883320#38883320", "title": "shift pandas multiindex values such that they don&#39;t have blanks below non blanks", "body": "<p><strong><em>I will filter the answers based on aesthetics and run timing to choose</em></strong></p>\n\n<p>I will not choose my answer!</p>\n\n<p>What I came up with:</p>\n\n<pre><code>base = df.columns.to_series().apply(pd.Series).reset_index(drop=True)\nrplc = pd.DataFrame(np.where(base == '', None, base))\ndata = {k:v.dropna()[::-1].reset_index(drop=True) for k, v in rplc.iterrows()}\nnew_col = pd.MultiIndex.from_tuples(pd.DataFrame(data)[::-1].fillna('').T.values.tolist())\n\ndf.columns = new_col\n\ndf\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/nAco0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nAco0.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1470863743, "post_id": 38883602, "comment_id": 65128213, "body": "Might not be as fast... because it&#39;s faster ;-) and wonderfully succinct."}, {"owner": {"reputation": 26041, "user_id": 3339965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac89d084d3bc5dc083bad3ea5518f11?s=128&d=identicon&r=PG&f=1", "display_name": "root", "link": "https://stackoverflow.com/users/3339965/root"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1470865493, "post_id": 38883602, "comment_id": 65128957, "body": "Interesting...I thought that doing the count and filter separately might slow things down a little compared to other answers."}, {"owner": {"reputation": 26041, "user_id": 3339965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac89d084d3bc5dc083bad3ea5518f11?s=128&d=identicon&r=PG&f=1", "display_name": "root", "link": "https://stackoverflow.com/users/3339965/root"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1470866064, "post_id": 38883602, "comment_id": 65129213, "body": "Minor edit, just to be safe. The filter should probably be <code>[x for x in col if x != &#39;&#39;]</code> on the off chance that there&#39;s a column named <code>False</code> or <code>0</code>, or something along those lines.  Shouldn&#39;t be an issue if the columns names are always strings though."}], "tags": [], "owner": {"reputation": 26041, "user_id": 3339965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac89d084d3bc5dc083bad3ea5518f11?s=128&d=identicon&r=PG&f=1", "display_name": "root", "link": "https://stackoverflow.com/users/3339965/root"}, "is_accepted": true, "score": 5, "last_activity_date": 1470866062, "last_edit_date": 1470866062, "creation_date": 1470863424, "answer_id": 38883602, "question_id": 38882595, "link": "https://stackoverflow.com/questions/38882595/shift-pandas-multiindex-values-such-that-they-dont-have-blanks-below-non-blanks/38883602#38883602", "title": "shift pandas multiindex values such that they don&#39;t have blanks below non blanks", "body": "<p>Generalized approach to rearranging each column tuple:</p>\n\n<pre><code>new_cols = [['']*col.count('')+[x for x in col if x != ''] for col in df.columns.values]\ndf.columns = pd.MultiIndex.from_tuples(new_cols)\n</code></pre>\n\n<p>It might not be as fast as other methods that were tuned for a specific number of levels, but it's concise and should work for an arbitrary number of levels.</p>\n"}], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 38883602, "answer_count": 4, "score": 3, "last_activity_date": 1470866815, "creation_date": 1470859612, "last_edit_date": 1470863712, "question_id": 38882595, "link": "https://stackoverflow.com/questions/38882595/shift-pandas-multiindex-values-such-that-they-dont-have-blanks-below-non-blanks", "title": "shift pandas multiindex values such that they don&#39;t have blanks below non blanks", "body": "<p>consider the following <code>df</code> with <code>pd.MultiIndex</code></p>\n\n<pre><code>col = pd.MultiIndex.from_tuples([('stat1', '', ''), ('stat2', '', ''),\n                                 ('A', 'mean', 'blue'), ('A', 'mean', 'red'),\n                                 ('B', 'var', 'blue'), ('B', 'var', 'red')])\n\ndf = pd.DataFrame(np.arange(24).reshape(4, 6), list('abcd'), col)\n\ndf\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/zdk0a.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zdk0a.png\" alt=\"enter image description here\"></a></p>\n\n<p>I don't want <code>stat1</code> and <code>stat2</code> up on top. I want them at the bottom like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/QaDWe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QaDWe.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p>An exaggerated example to get more to the point</p>\n\n<pre><code>col = pd.MultiIndex.from_tuples([('a', '', ''), ('', 'b', ''),\n                                 ('c', 'd', ''), ('e', '', 'f'),\n                                 ('g', 'h', 'i'), ('', 'j', 'k')])\n\ndf = pd.DataFrame(np.arange(24).reshape(4, 6), list('abcd'), col)\n\ndf\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Hf34p.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Hf34p.png\" alt=\"enter image description here\"></a></p>\n\n<p>Should look like:</p>\n\n<p><a href=\"https://i.stack.imgur.com/337MC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/337MC.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p>I've tried:</p>\n\n<pre><code>c = np.array(col.values.tolist())\n\nc_ = pd.MultiIndex.from_tuples(np.sort(c).tolist())\n\npd.DataFrame(df.values, df.index, c_)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/PSbx0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PSbx0.png\" alt=\"enter image description here\"></a></p>\n\n<p>This isn't correct as some of the columns got sorted in ways that I didn't want.</p>\n\n<hr>\n\n<h3>Timing</h3>\n\n<p>So far, @root has the timing prize.  I don't think I care too much about much larger indices.  This is mainly for reporting.</p>\n\n<p><strong>code</strong></p>\n\n<pre><code>def pir(df):\n    base = df.columns.to_series().apply(pd.Series).reset_index(drop=True)\n    rplc = pd.DataFrame(np.where(base == '', None, base))\n    data = {k:v.dropna()[::-1].reset_index(drop=True) for k, v in rplc.iterrows()}\n    new_col = pd.MultiIndex.from_tuples(pd.DataFrame(data)[::-1].fillna('').T.values.tolist())\n\n    return pd.DataFrame(df.values, df.index, new_col)\n\ndef kartik(df):\n    new_cols = []\n    for col in df.columns:\n        col = list(col)\n        if col[2] == '':\n            col[2] = col[0]\n            col[0] = ''\n        new_cols.append(col)\n\n    return pd.DataFrame(df.values, df.index, list(map(list, zip(*new_cols))))\n\ndef so44(df):\n    tuple_list = df.columns.values\n    new_tuple_list = []\n\n    for t in tuple_list:\n        if t[2] == '':\n            if t[1] == '':\n                t = (t[1], t[2], t[0])\n            else:\n                t = (t[2], t[0], t[1])\n        elif t[1] == '' and t[0] != '':\n            t = (t[1], t[0], t[2])\n\n        new_tuple_list.append(t)\n\n    return pd.DataFrame(df.values, df.index, pd.MultiIndex.from_tuples(new_tuple_list))\n\ndef root(df):\n    new_cols = [['']*col.count('')+[x for x in col if x] for col in df.columns.values]\n    return pd.DataFrame(df.values, df.index, pd.MultiIndex.from_tuples(new_cols))\n\n\n    return pd.DataFrame(df.values, df.index, pd.MultiIndex.from_tuples(new_tuple_list))\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/dk77e.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dk77e.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 6, "creation_date": 1470859596, "post_id": 38882522, "comment_id": 65126186, "body": "Why ask us how it will work, rather than just trying it and finding out for yourself? As far as I recall, mixing <code>readline</code> with iteration on a file is not well supported, but using <code>next(f)</code> (or another <code>for</code> loop) would probably  work like your first example since files are their own iterators."}, {"owner": {"reputation": 187, "user_id": 4538495, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/u9915.jpg?s=128&g=1", "display_name": "Umibozu", "link": "https://stackoverflow.com/users/4538495/umibozu"}, "reply_to_user": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1470859733, "post_id": 38882522, "comment_id": 65126256, "body": "I will test it out and post an answer if no one else wants to. Thanks for the suggestion too."}, {"owner": {"reputation": 1887, "user_id": 6510101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GlJwX.png?s=128&g=1", "display_name": "D3181", "link": "https://stackoverflow.com/users/6510101/d3181"}, "edited": false, "score": 0, "creation_date": 1470860078, "post_id": 38882522, "comment_id": 65126449, "body": "my result showed it being: a,b,flag,fag,c,d,e,f,g....so i got none of your alternatives...."}], "answers": [{"tags": [], "owner": {"reputation": 319, "user_id": 4805737, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-6WWDqbBKXII/AAAAAAAAAAI/AAAAAAAAABM/tqlG4bim9Jo/photo.jpg?sz=128", "display_name": "Angus", "link": "https://stackoverflow.com/users/4805737/angus"}, "is_accepted": false, "score": 0, "last_activity_date": 1470860311, "last_edit_date": 1470860311, "creation_date": 1470859919, "answer_id": 38882663, "question_id": 38882522, "link": "https://stackoverflow.com/questions/38882522/python-using-readine-in-for-line-in-file-loop/38882663#38882663", "title": "Python: Using readine() in &quot;for line in file:&quot; Loop", "body": "<p>Use this: </p>\n\n<pre><code>enter = False\ncount = 0\nfor line in f:\n  if 'start_flag' in line:\n    enter = True\n  if 'end_flag' in line:\n    print count\n    count = 0\n    enter = False\n  if enter is True:\n    count+=1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 187, "user_id": 4538495, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/u9915.jpg?s=128&g=1", "display_name": "Umibozu", "link": "https://stackoverflow.com/users/4538495/umibozu"}, "edited": false, "score": 0, "creation_date": 1470861851, "post_id": 38882715, "comment_id": 65127329, "body": "The general consensus seems to be don&#39;t mix the for loop iterator and the readline function as Blcknght said. Thanks for the input from everyone."}, {"owner": {"reputation": 2008, "user_id": 5534457, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IiquF.jpg?s=128&g=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/5534457/jeff"}, "reply_to_user": {"reputation": 187, "user_id": 4538495, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/u9915.jpg?s=128&g=1", "display_name": "Umibozu", "link": "https://stackoverflow.com/users/4538495/umibozu"}, "edited": false, "score": 1, "creation_date": 1470862440, "post_id": 38882715, "comment_id": 65127630, "body": "In general it&#39;s very difficult to mess with the order of reading through a file.  If you can make it work easily in a simple, sequential fashion, you&#39;re probably doing it right."}], "tags": [], "owner": {"reputation": 2008, "user_id": 5534457, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IiquF.jpg?s=128&g=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/5534457/jeff"}, "is_accepted": true, "score": 0, "last_activity_date": 1470860095, "creation_date": 1470860095, "answer_id": 38882715, "question_id": 38882522, "link": "https://stackoverflow.com/questions/38882522/python-using-readine-in-for-line-in-file-loop/38882715#38882715", "title": "Python: Using readine() in &quot;for line in file:&quot; Loop", "body": "<p>There shouldn't be any need to use <code>readline()</code>.  Try it like this:</p>\n\n<pre><code>with open(path, 'r') as f:\n    count = 0\n    counting = False\n    for line in f:\n        if 'start_flag' in line:\n            counting = True\n        elif 'end_flag' in line:\n            counting = False\n            #do something with your count result\n            count = 0 #reset it for the next start_flag\n        if counting is True:\n            count += 1\n</code></pre>\n\n<p>This handles it all with the <code>if</code> statements in the correct order, allowing you to just run sequentially through the file in one go.  You could obviously add more operations into this, and do things with the results, for example appending them to a list if you expect to run into multiple start and end flags.</p>\n"}], "owner": {"reputation": 187, "user_id": 4538495, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/u9915.jpg?s=128&g=1", "display_name": "Umibozu", "link": "https://stackoverflow.com/users/4538495/umibozu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 38882715, "answer_count": 2, "score": 0, "last_activity_date": 1470860311, "creation_date": 1470859341, "question_id": 38882522, "link": "https://stackoverflow.com/questions/38882522/python-using-readine-in-for-line-in-file-loop", "title": "Python: Using readine() in &quot;for line in file:&quot; Loop", "body": "<p>Lets say I have a text file that looks like:</p>\n\n<pre><code>a\nb\nstart_flag\nc\nd\ne\nend_flag\nf\ng\n</code></pre>\n\n<p>I wish to iterate over this data line by line, but when I encounter a 'start_flag', I want to iterate until I reach an 'end_flag' and count the number of lines in between:</p>\n\n<pre><code>newline = ''\nfor line in f:\n    count = 0\n    if 'start_flag' in line:\n        while 'end_flag' not in newline:\n            count += 1\n            newline = f.readline()\n        print(str(count))\n</code></pre>\n\n<p>What is the expected behavior of this code? Will it iterate like:</p>\n\n<pre><code>a\nb\nstart_flag\n    c\n    d\n    e\n    end_flag\nf\ng\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>a\nb\nstart_flag\n    c\n    d\n    e\n    end_flag\nc\nd\ne\nend_flag\nf\ng\n</code></pre>\n"}, {"tags": ["python", "django", "forms", "django-forms"], "comments": [{"owner": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "edited": false, "score": 0, "creation_date": 1471568799, "post_id": 38882483, "comment_id": 65409829, "body": "Have you been able to sort this out?"}, {"owner": {"reputation": 3091, "user_id": 1041922, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/7FvUi.jpg?s=128&g=1", "display_name": "Andrew Barr", "link": "https://stackoverflow.com/users/1041922/andrew-barr"}, "reply_to_user": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "edited": false, "score": 0, "creation_date": 1471610397, "post_id": 38882483, "comment_id": 65428056, "body": "Not yet.  I think you are right that my life would be easier if I used a formal many-to-many"}], "answers": [{"tags": [], "owner": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "is_accepted": false, "score": 1, "last_activity_date": 1470873991, "creation_date": 1470873991, "answer_id": 38885384, "question_id": 38882483, "link": "https://stackoverflow.com/questions/38882483/how-do-i-create-a-wide-format-data-entry-form-if-data-is-stored-in-long-form-in/38885384#38885384", "title": "how do I create a wide-format data entry form if data is stored in long form in django", "body": "<p>Building a <code>ManyToMany</code> relationship with these models will not break your existing code nor will it make any changes to the database. In fact you already have a <code>ManyToMany</code>, you just have to mark it as such.</p>\n\n<pre><code>class species(models.Model):\n   name = models.CharField(max_length=100)\n   species_locations = models.ManyToManyField(Locations,through='Occurrences')\n</code></pre>\n\n<p>When you run the migration you will note that it doesn't actually make any changes to the database.</p>\n\n<p>Additionally, you have an error in this model.</p>\n\n<pre><code>class occurrences(models.Model):\n   species = models.ForeignKey(location)\n   location = models.ForeignKey(location)\n</code></pre>\n\n<p>I do believe you intended <code>species</code> to be a foreign key to <code>Species</code></p>\n\n<p>The second part of the problem is mostly in HTML rendering, the django component to be used is <a href=\"https://docs.djangoproject.com/en/1.10/topics/forms/modelforms/#overriding-methods-on-an-inlineformset\" rel=\"nofollow\">InlineFormSet</a> this allows related models to be edited easily. (you do not need ManyToMany here if the Occcurence model is what's been edited in the form)</p>\n"}], "owner": {"reputation": 3091, "user_id": 1041922, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/7FvUi.jpg?s=128&g=1", "display_name": "Andrew Barr", "link": "https://stackoverflow.com/users/1041922/andrew-barr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470917630, "creation_date": 1470859207, "last_edit_date": 1470917630, "question_id": 38882483, "link": "https://stackoverflow.com/questions/38882483/how-do-i-create-a-wide-format-data-entry-form-if-data-is-stored-in-long-form-in", "title": "how do I create a wide-format data entry form if data is stored in long form in django", "body": "<p>Suppose I have a model for 'species' and a model for geographic 'locations'.</p>\n\n<pre><code>class species(models.Model):\n   name = models.CharField(max_length=100)\n\nclass location(models.Model):\n   name=models.CharField(max_length=100)\n</code></pre>\n\n<p>I also have a third model <code>occurrences</code> that keeps track of occurrences of species at locations. (I realized I could also use a many-to-many field with a through table, but this is legacy code so I would prefer to keep it as is).</p>\n\n<pre><code>class occurrences(models.Model):\n   species = models.ForeignKey(species)\n   location = models.ForeignKey(location)\n</code></pre>\n\n<p>Ideally, I would like users to be able to enter new <code>occurrences</code> in a wide-table format.  So schematically, the html form would look like this, with checkboxes:</p>\n\n<pre><code>                  | Location1 | Location2 | \n         SpeciesA |     x     |           |          \n         SpeciesB |           |     x     |\n</code></pre>\n\n<p>When this form gets submitted it would create two new <code>occurrences</code> (SpeciesA at Location1, and SpeciesB at Location2).</p>\n\n<p><strong>This seems like a use case that others must have had, because users like spreadsheet formats. Is there a pre-existing django solution for allowing users to enter data in this format?</strong></p>\n"}, {"tags": ["python", "opencv", "nameerror", "imshow"], "comments": [{"owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "edited": false, "score": 1, "creation_date": 1470867393, "post_id": 38882437, "comment_id": 65129646, "body": "You&#39;re missing a fairly substantial amount of your traceback - <i>especially</i> the line on which it happens."}, {"owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "edited": false, "score": 0, "creation_date": 1470867499, "post_id": 38882437, "comment_id": 65129682, "body": "Also, do you have your files <a href=\"http://rogerdudler.github.io/git-guide/\" rel=\"nofollow noreferrer\">under version control</a>? That will tell you if any changes were made to your file."}, {"owner": {"reputation": 509, "user_id": 6069097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SuOdC.jpg?s=128&g=1", "display_name": "Zeesy", "link": "https://stackoverflow.com/users/6069097/zeesy"}, "reply_to_user": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "edited": false, "score": 0, "creation_date": 1471036528, "post_id": 38882437, "comment_id": 65210087, "body": "Great git link! Thank you. I resolved my problem, will post the solution!"}], "answers": [{"tags": [], "owner": {"reputation": 509, "user_id": 6069097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SuOdC.jpg?s=128&g=1", "display_name": "Zeesy", "link": "https://stackoverflow.com/users/6069097/zeesy"}, "is_accepted": true, "score": 0, "last_activity_date": 1471037004, "creation_date": 1471037004, "answer_id": 38926648, "question_id": 38882437, "link": "https://stackoverflow.com/questions/38882437/irregular-error-python-cv2-imshow-nameerror-name-definition-is-not-defined/38926648#38926648", "title": "Irregular Error - python cv2.imshow NameError: name &quot;definition&quot; is not defined", "body": "<p>Found a resolution. My problem was related to a condition in 'masked' that was not fulfilled. This is a program that relies on face detection, but my problem would be the same for any random, ongoing condition that must be fulfilled.</p>\n\n<p>Troubleshooting steps included:\n- reviewing my tracebacks\n- testing IRL by having a face in front of the camera on start, and then a hand over the camera on start. This confirmed that the program would run if a face was detected on start, but not if there was no face.</p>\n\n<p>To resolve the issue, I used a try/except condition for <code>cv2.imshow(\"frame\", masked)</code>, resulting in code that looked like:</p>\n\n<pre><code>image = frame.array\n\nminiframe = image\n\nM = np.float32([[1,0,x+w/2],[0,1,y+h/2]])\nmasked  = cv2.warpAffine(image, M, (x+w, y+h))\n\ntry:\n    cv2.imshow(\"frame\", masked)\nexcept NameError:\n    cv2.imshow(\"frame\", image)\n</code></pre>\n\n<p>I am a rank beginner, this really taught me the value of testing and reviewing tracebacks!</p>\n"}], "owner": {"reputation": 509, "user_id": 6069097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SuOdC.jpg?s=128&g=1", "display_name": "Zeesy", "link": "https://stackoverflow.com/users/6069097/zeesy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7253, "favorite_count": 0, "accepted_answer_id": 38926648, "answer_count": 1, "score": 0, "last_activity_date": 1597147246, "creation_date": 1470859046, "last_edit_date": 1495535322, "question_id": 38882437, "link": "https://stackoverflow.com/questions/38882437/irregular-error-python-cv2-imshow-nameerror-name-definition-is-not-defined", "title": "Irregular Error - python cv2.imshow NameError: name &quot;definition&quot; is not defined", "body": "<p>I am running a video feed through a <code>cv2.imshow</code> operator. Most of the time, the code runs when I call it in command line, but occasionally I get the following NameError:</p>\n\n<pre><code>NameError: name 'masked' is not defined\n</code></pre>\n\n<p>However, 'masked' is absolutely defined before it is called in cv2.imshow:</p>\n\n<pre><code>image = frame.array\n\nminiframe = image\n\nmasked = cv2.bitwise_and(image, image, mask=circle_img)\n\ncv2.imshow(\"frame\", masked)\n</code></pre>\n\n<p>same thing happens when 'masked' is defined this way:</p>\n\n<pre><code>image = frame.array\n\nminiframe = image\n\nM = np.float32([[1,0,x+w/2],[0,1,y+h/2]])\nmasked  = cv2.warpAffine(image, M, (x+w, y+h))\n\ncv2.imshow(\"frame\", masked)\n</code></pre>\n\n<p>When <code>print masked</code> is inserted above the <code>cv2.imshow</code> line, it results in the array printed as numbers - when the code is working. When it is not working, it results in the NameError traceback pointing to <code>print masked</code>.</p>\n\n<p>And to be clear, in either scenario the NameError happens seemingly randomly, without modification to the code. So, I can run it once or 20 times just fine, but then it will suddenly not work in command line, with a traceback to the <code>cv2.imshow</code> line. Sometimes, copy-pasting identical blocks of code from previous versions will get it to work again, but after a few unmodified tries, back to <code>NameError</code>. </p>\n\n<p>I have read over <a href=\"https://stackoverflow.com/questions/5756777/python-nameerror-when-var-is-most-definitely-defined\">Python NameError when var IS most definitely defined</a>, and used <code>cat -A filename.py</code> to check the invisible control characters. After de- and re-indenting, it worked 2 more times, and then right back to the NameError.</p>\n\n<p>Any help would be much appreciated!</p>\n"}, {"tags": ["python", "inheritance", "exec", "base"], "comments": [{"owner": {"reputation": 7576, "user_id": 1603840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VJhqE.jpg?s=128&g=1", "display_name": "Karin", "link": "https://stackoverflow.com/users/1603840/karin"}, "edited": false, "score": 0, "creation_date": 1470859673, "post_id": 38882434, "comment_id": 65126221, "body": "This code is not working for me when I copy it into a script because of the missing <code>(object)</code> on <code>class A</code>."}, {"owner": {"reputation": 589, "user_id": 4635362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07c0f4b9e411b01ffced29ec26e29047?s=128&d=identicon&r=PG&f=1", "display_name": "shijq73", "link": "https://stackoverflow.com/users/4635362/shijq73"}, "reply_to_user": {"reputation": 7576, "user_id": 1603840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VJhqE.jpg?s=128&g=1", "display_name": "Karin", "link": "https://stackoverflow.com/users/1603840/karin"}, "edited": false, "score": 0, "creation_date": 1470861007, "post_id": 38882434, "comment_id": 65126910, "body": "I changed sample code, origin one is ok"}], "answers": [{"tags": [], "owner": {"reputation": 589, "user_id": 4635362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07c0f4b9e411b01ffced29ec26e29047?s=128&d=identicon&r=PG&f=1", "display_name": "shijq73", "link": "https://stackoverflow.com/users/4635362/shijq73"}, "is_accepted": false, "score": 0, "last_activity_date": 1471009963, "creation_date": 1471009963, "answer_id": 38919708, "question_id": 38882434, "link": "https://stackoverflow.com/questions/38882434/inherited-class-can-not-call-base-method-in-python-using-exec/38919708#38919708", "title": "inherited class can not call base method in python using exec", "body": "<p>Change code as following works:</p>\n\n<pre><code>from PyQt4 import QtGui, QtCore\n\nclass Window(QtGui.QWidget):\n    def __init__(self):\n        QtGui.QWidget.__init__(self)\n        self.button = QtGui.QPushButton('Test', self)\n        self.button.clicked.connect(self.handleButton)\n        layout = QtGui.QVBoxLayout(self)\n        layout.addWidget(self.button)\n\n    def handleButton(self):\n        str = '''\nclass A:\n    def a(self):\n        print('Hello')\n        pass\n\nclass B(A):\n    def a(self):\n        super(B,self).a()\n        print('World')\n    pass    \n\nb = B()\nb.a()\n'''    \n        exec(str,globals() )        \nif __name__ == '__main__':\n\n    import sys\n    app = QtGui.QApplication(sys.argv)\n    window = Window()\n    window.show()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p>you can see only difference is exec(str) and exec(str,globals())      </p>\n"}], "owner": {"reputation": 589, "user_id": 4635362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07c0f4b9e411b01ffced29ec26e29047?s=128&d=identicon&r=PG&f=1", "display_name": "shijq73", "link": "https://stackoverflow.com/users/4635362/shijq73"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471009963, "creation_date": 1470859043, "last_edit_date": 1470860958, "question_id": 38882434, "link": "https://stackoverflow.com/questions/38882434/inherited-class-can-not-call-base-method-in-python-using-exec", "title": "inherited class can not call base method in python using exec", "body": "<p>I have following code as text file (for example: code.txt)</p>\n\n<pre><code>from PyQt4 import QtGui, QtCore\n\nclass Window(QtGui.QWidget):\n    def __init__(self):\n        QtGui.QWidget.__init__(self)\n        self.button = QtGui.QPushButton('Test', self)\n        self.button.clicked.connect(self.handleButton)\n        layout = QtGui.QVBoxLayout(self)\n        layout.addWidget(self.button)\n\n    def handleButton(self):\n        str = '''\nclass A:\n    def a(self):\n        print('Hello')\n        pass\n\nclass B(A):\n    def a(self):\n        super(B,self).a()\n        print('World')\n    pass    \n\nb = B()\nb.a()\n'''    \n        exec(str )        \nif __name__ == '__main__':\n\n    import sys\n    app = QtGui.QApplication(sys.argv)\n    window = Window()\n    window.show()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p>run this command, I got following error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:/Users/xxx/xxx/w.py\", line 28, in handleButton\n    exec(str )        \n  File \"&lt;string&gt;\", line 14, in &lt;module&gt;\n  File \"&lt;string&gt;\", line 9, in a\nNameError: name 'B' is not defined\n</code></pre>\n\n<p>without 'super(B,self).a()', it is ok. And if execute code in code.txt, it is also no problem</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "is_accepted": false, "score": 4, "last_activity_date": 1470859156, "creation_date": 1470859156, "answer_id": 38882472, "question_id": 38882432, "link": "https://stackoverflow.com/questions/38882432/lists-in-python-targeting-specific-characters/38882472#38882472", "title": "Lists in Python targeting specific characters", "body": "<p>Because you can also index <strong>strings</strong> in Python.</p>\n\n<pre><code>In [1]: L = ['hello', 'pie']\n\nIn [2]: L[0]\nOut[2]: 'hello'\n\nIn [3]: 'hello'[1]\nOut[3]: 'e'\n\nIn [4]: L[0][1]\nOut[4]: 'e'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7081, "user_id": 789671, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/feaaeb3d021966d84450cbfb24b1824a?s=128&d=identicon&r=PG", "display_name": "glibdud", "link": "https://stackoverflow.com/users/789671/glibdud"}, "is_accepted": false, "score": 4, "last_activity_date": 1470859258, "creation_date": 1470859258, "answer_id": 38882493, "question_id": 38882432, "link": "https://stackoverflow.com/questions/38882432/lists-in-python-targeting-specific-characters/38882493#38882493", "title": "Lists in Python targeting specific characters", "body": "<p>A string in python is treated as a sequence of characters for purposes of indexing. Thus the string <code>'hello'</code> can be indexed as if it was the list <code>['h', 'e', 'l', 'l', 'o']</code>. As the index <code>[1]</code> refers to the second item in a sequence, you'll get the second letter of the string, <code>'e'</code>.</p>\n"}], "owner": {"reputation": 518, "user_id": 4872718, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/0cab2a3ddea470e1073348d61e722a18?s=128&d=identicon&r=PG&f=1", "display_name": "dancemc15", "link": "https://stackoverflow.com/users/4872718/dancemc15"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1470859258, "creation_date": 1470859034, "question_id": 38882432, "link": "https://stackoverflow.com/questions/38882432/lists-in-python-targeting-specific-characters", "title": "Lists in Python targeting specific characters", "body": "<p>I'm currently learning about lists in Python and I have a specific case that I don't really understand.</p>\n\n<pre><code>L=['hello','pie']\nL[0][1]\n'e'\n</code></pre>\n\n<p>Why does L[0][1] output as 'e'? I understand that L[0] = 'hello'. So I don't really understand how L[0][1] = 'e'.</p>\n"}, {"tags": ["python", "python-2.7", "numpy", "scientific-computing"], "comments": [{"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 1, "creation_date": 1470858526, "post_id": 38882257, "comment_id": 65125621, "body": "From what I have seen, generally 2D array with the columns representing the X, Y, Z, etc., specially with Scipy."}, {"owner": {"reputation": 1206, "user_id": 1713185, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/98ab31534547ec7d1a9090dc336dee0a?s=128&d=identicon&r=PG", "display_name": "Michael Molter", "link": "https://stackoverflow.com/users/1713185/michael-molter"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1470858621, "post_id": 38882257, "comment_id": 65125668, "body": "So go for <b>Option 2</b>, the 2-D (2 x N) array approach."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1470858682, "post_id": 38882257, "comment_id": 65125701, "body": "Generally speaking that&#39;s what I would suggest."}, {"owner": {"reputation": 23220, "user_id": 1004096, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d0bd5ec4d97233e5f9f5f74bd6f02357?s=128&d=identicon&r=PG", "display_name": "Bi Rico", "link": "https://stackoverflow.com/users/1004096/bi-rico"}, "edited": false, "score": 0, "creation_date": 1470860285, "post_id": 38882257, "comment_id": 65126553, "body": "Use the approach that best solves your problem. That being said, going from 2 -&gt; 1 is very easy, ie <code>x, y = twoByN_array</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1206, "user_id": 1713185, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/98ab31534547ec7d1a9090dc336dee0a?s=128&d=identicon&r=PG", "display_name": "Michael Molter", "link": "https://stackoverflow.com/users/1713185/michael-molter"}, "edited": false, "score": 0, "creation_date": 1470863027, "post_id": 38883395, "comment_id": 65127901, "body": "Well, that pretty much tells me that the answer it no. I was hoping that being new to Numpy/Scipy I just didn&#39;t pick up on the standards, but it seems like, as you said, there aren&#39;t any because Scipy is an incoherent collection by various authors. It sounds like constantly re-arranging your data to fit each functions argument type is the norm."}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 3, "last_activity_date": 1470864691, "last_edit_date": 1470864691, "creation_date": 1470862623, "answer_id": 38883395, "question_id": 38882257, "link": "https://stackoverflow.com/questions/38882257/how-to-store-x-y-data-in-order-to-use-the-functions-in-numpy/38883395#38883395", "title": "How to store X-Y data in order to use the functions in Numpy?", "body": "<p>Check the documentation for each package and operational class or function.  <code>scipy</code> is a collection of packages, written by different people, and often serving a interfaces to even older Fortran or C packages.  So the input format is constrained by those sources.  And they also depend on what is suitable for the problem.</p>\n\n<p>Often it is convenient to generate values on a regular grid.  For example use <code>np.meshgrid</code> or <code>np.mgrid</code> with <code>arange</code> or <code>linspace</code> values to define a 2d space.  The result can be 3 2d arrays - the <code>x</code> and <code>y</code> values, and the <code>z</code> as a function of those.</p>\n\n<p>But realworld data is often available as scatter points.  Each point is then a <code>x</code>, <code>y</code> location with a <code>z</code> value.  You can't cast those as 2d arrays, at least not without interpolation.  So three 1d arrays is the appropriate representation.  Or a <code>(n, 3)</code> matrix, one column for each of the variables.  Or if the values have different dtype - say integer for x and y, float for z, then a structured array with 3 fields.</p>\n\n<p>Often data is loaded from csv files - the columns representing those <code>x,y,z</code> values, maybe with string labels, and multiple <code>z</code> values.  With a mix of data types they are often loaded with <code>genfromtxt</code>, resulting in a 1d structured array.</p>\n\n<p>It's easy to map from structured arrays to multiple arrays with uniform dtype.  Sometimes you do this by just indexing with the field name, other cases might require a <code>view</code>.</p>\n\n<p>To delve into this more you might need to expand on the data type(s), and the packages that you need to use.  </p>\n\n<p><a href=\"http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.griddata.html#scipy.interpolate.griddata\" rel=\"nofollow\">http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.griddata.html#scipy.interpolate.griddata</a>.  <code>interpolate.griddata</code> illustrates the use of both point data and grid data.</p>\n"}, {"tags": [], "owner": {"reputation": 2646, "user_id": 9282844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Djkuj.png?s=128&g=1", "display_name": "Guimoute", "link": "https://stackoverflow.com/users/9282844/guimoute"}, "is_accepted": false, "score": 1, "last_activity_date": 1609857418, "creation_date": 1609857418, "answer_id": 65580934, "question_id": 38882257, "link": "https://stackoverflow.com/questions/38882257/how-to-store-x-y-data-in-order-to-use-the-functions-in-numpy/65580934#65580934", "title": "How to store X-Y data in order to use the functions in Numpy?", "body": "<p>While it's not an answer to your question, know that if you work with only two or three dimensions you can easily switch from one standard to the other thanks to<br />\n<code>XYZ =  np.column_stack((X, Y, Z))</code> and <code>X, Y, Z = XYZ.tranpose()</code>.</p>\n<p>Usually they are both fairly cheap operations compared to the rest of your data analysis.</p>\n"}], "owner": {"reputation": 1206, "user_id": 1713185, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/98ab31534547ec7d1a9090dc336dee0a?s=128&d=identicon&r=PG", "display_name": "Michael Molter", "link": "https://stackoverflow.com/users/1713185/michael-molter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 658, "favorite_count": 1, "accepted_answer_id": 38883395, "answer_count": 2, "score": 2, "last_activity_date": 1609857418, "creation_date": 1470858380, "last_edit_date": 1495535354, "question_id": 38882257, "link": "https://stackoverflow.com/questions/38882257/how-to-store-x-y-data-in-order-to-use-the-functions-in-numpy", "title": "How to store X-Y data in order to use the functions in Numpy?", "body": "<p>Both <strong>Numpy</strong> and <strong>Scipy</strong> have a number of useful functions for performing operations on data (i.e. integrating, Fourier transforms, baseline correction, etc.). However, I haven't seen documentation regarding the general form for inputing X-Y data into these functions. Say I have a spectrum of wavelength and absorbance values, or stress and strain data from a mechanical properties test.</p>\n\n<p>Does one generally:</p>\n\n<ol>\n<li><p>Use two 1-D Numpy arrays, one for X, and one for Y?</p></li>\n<li><p>Use one 2-D Numpy array, with X on one axis, and Y on the other?</p></li>\n<li><p>Use a single <a href=\"https://stackoverflow.com/questions/15815999/is-there-a-standard-way-to-store-xy-data-in-python\">structured array</a>?</p></li>\n</ol>\n\n<p>How does this change when you have XY-Z data?</p>\n\n<p>What is the most general data structure for XY data that allows me to input my data directly into <em>most</em> of these functions without redefining how I store my data?</p>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "edited": false, "score": 1, "creation_date": 1470858549, "post_id": 38882255, "comment_id": 65125634, "body": "Because only 53 bits are used for the float accuracy: <a href=\"https://docs.python.org/2/tutorial/floatingpoint.html\" rel=\"nofollow noreferrer\">docs.python.org/2/tutorial/floatingpoint.html</a> - have a look at the <a href=\"https://docs.python.org/2/library/decimal.html\" rel=\"nofollow noreferrer\"><code>decimal</code></a> module."}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 0, "creation_date": 1470858583, "post_id": 38882255, "comment_id": 65125648, "body": "welcome to the world of floating point arithmetic with finite precision."}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 2, "creation_date": 1470858920, "post_id": 38882255, "comment_id": 65125821, "body": "Consider using <a href=\"https://docs.python.org/2/library/math.html#math.fsum\" rel=\"nofollow noreferrer\">fsum</a>"}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1470859499, "post_id": 38882255, "comment_id": 65126117, "body": "I reopened since the linked duplicate was primarily javascript and did not have an applicable solution to this particular Python series summation question."}], "answers": [{"comments": [{"owner": {"reputation": 8909, "user_id": 467366, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/fYQGf.jpg?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/467366/paul"}, "edited": false, "score": 1, "creation_date": 1470860200, "post_id": 38882281, "comment_id": 65126507, "body": "It&#39;s not that floating point numbers are less accurate than decimal numbers, it&#39;s that they are inaccurate in a different way, so rounding errors in floats look strange when represented as decimals."}], "tags": [], "owner": {"reputation": 252, "user_id": 4403294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/029e6e295cd808c16cf68c7db4679dec?s=128&d=identicon&r=PG", "display_name": "rscarson", "link": "https://stackoverflow.com/users/4403294/rscarson"}, "is_accepted": true, "score": 7, "last_activity_date": 1470860438, "last_edit_date": 1470860438, "creation_date": 1470858506, "answer_id": 38882281, "question_id": 38882255, "link": "https://stackoverflow.com/questions/38882255/why-are-my-list-structure-math-operations-off-by-a-couple-billionths/38882281#38882281", "title": "Why are my list structure math operations off by a couple billionths?", "body": "<p>This is due to the way computers represent floating point numbers.</p>\n\n<p>They are not always accurate in the way you expect, and thus should not be used to check equality, or represent things like amounts of money.</p>\n\n<p>How are these numbers being used? If you need that kind of accuracy perhaps there are better ways to use the information, like checking for a range instead of checking equality.</p>\n\n<p><a href=\"https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow\">Here is some good reading material on the subject</a></p>\n"}, {"comments": [{"owner": {"reputation": 5116, "user_id": 3254859, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mGMef.jpg?s=128&g=1", "display_name": "Chris Mueller", "link": "https://stackoverflow.com/users/3254859/chris-mueller"}, "edited": false, "score": 0, "creation_date": 1470861274, "post_id": 38882506, "comment_id": 65127060, "body": "I never knew about <code>math.fsum</code>, very interesting. +1"}], "tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": false, "score": 2, "last_activity_date": 1470867892, "last_edit_date": 1470867892, "creation_date": 1470859302, "answer_id": 38882506, "question_id": 38882255, "link": "https://stackoverflow.com/questions/38882255/why-are-my-list-structure-math-operations-off-by-a-couple-billionths/38882506#38882506", "title": "Why are my list structure math operations off by a couple billionths?", "body": "<p>Floating point can leading to surprising results if you do not fully consider how floating point is represented in binary and the rounding errors that can result. Floating point rounding errors are exacerbated in series summation. </p>\n\n<p>Examples:</p>\n\n<pre><code>&gt;&gt;&gt; sum([.1]*10)\n0.9999999999999999   # 1.0 expected in decimal\n&gt;&gt;&gt; sum([.1]*1000)\n99.9999999999986     # 100.0 expected\n&gt;&gt;&gt; sum([1, 1e100, 1, -1e100] * 10000)\n0.0                  # 20000 expected\n</code></pre>\n\n<p>There are numerous ways to get results that are exact (using the Decimal module, using the Fractions module, etc) Among other techniques, rounding errors can be eliminated by cancelation during summation. You can use <a href=\"https://docs.python.org/2/library/math.html#math.fsum\" rel=\"nofollow\">fsum</a> from the Python math library for more exact results with summation:</p>\n\n<pre><code>&gt;&gt;&gt; import math\n&gt;&gt;&gt; math.fsum([.1]*10)\n1.0\n&gt;&gt;&gt; math.fsum([.1]*1000)\n100.0\n&gt;&gt;&gt; math.fsum([1, 1e100, 1, -1e100] * 10000)\n20000.0\n</code></pre>\n\n<p>The <code>fsum</code> function is based on Raymond Hettinger's <a href=\"https://code.activestate.com/recipes/393090/\" rel=\"nofollow\">Active State</a> recipes. It is not <em>perfect</em> (try <code>math.fsum([1.1,2.2]*1000)</code>...) but it is pretty good. </p>\n"}], "owner": {"reputation": 119, "user_id": 2516746, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8ad5106abc1c16de8f2ac12781e35513?s=128&d=identicon&r=PG", "display_name": "lmeninato", "link": "https://stackoverflow.com/users/2516746/lmeninato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 38882281, "answer_count": 2, "score": 3, "last_activity_date": 1470867892, "creation_date": 1470858365, "last_edit_date": 1470860231, "question_id": 38882255, "link": "https://stackoverflow.com/questions/38882255/why-are-my-list-structure-math-operations-off-by-a-couple-billionths", "title": "Why are my list structure math operations off by a couple billionths?", "body": "<p>I have some pretty simple function that tries to return a list that is the distance between the inputted list and the average of that list. The code <em>almost</em> works. Any thoughts as to why the results are slightly off?</p>\n\n<pre><code>def distances_from_average(test_list):\n    average = [sum(test_list)/float(len(test_list))]*len(test_list)\n    return [x-y for x,y in zip(test_list, average)]\n</code></pre>\n\n<p>Here are my example results:\n[-4.200000000000003, 35.8, 2.799999999999997, -23.200000000000003, -11.200000000000003] should equal [4.2, -35.8, -2.8, 23.2, 11.2]  </p>\n"}, {"tags": ["python", "python-2.7", "unit-testing", "python-unittest", "python-mock"], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 6696285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25f4673efa9661517e155168d88c517b?s=128&d=identicon&r=PG&f=1", "display_name": "Lars Grundei", "link": "https://stackoverflow.com/users/6696285/lars-grundei"}, "is_accepted": false, "score": 0, "last_activity_date": 1470859437, "creation_date": 1470859437, "answer_id": 38882551, "question_id": 38882187, "link": "https://stackoverflow.com/questions/38882187/what-is-the-difference-between-using-the-patch-object-and-with-patch-object/38882551#38882551", "title": "What is the difference between using the &#39;@patch.object&#39; and &#39;with patch.object&#39; in Python?", "body": "<p>I think you just need to add the class name</p>\n\n<pre><code>class mymodule:\n    @staticmethod\n    def my_mock():\n        ...do something\n...\n\n@mock.patch('mypackage.mymodule.my_method', side_effect=mymodule.my_mock)\ndef test_something(self, my_method_mocked):\n    ...test something\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 649, "user_id": 4170069, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d704db14178c176581df25dceeacea33?s=128&d=identicon&r=PG", "display_name": "Erick Gallani", "link": "https://stackoverflow.com/users/4170069/erick-gallani"}, "edited": false, "score": 0, "creation_date": 1470863850, "post_id": 38882589, "comment_id": 65128260, "body": "But I can only reference method like this Foo.my_mock when they are <code>@classmethod</code>. With <code>@staticmethod</code> doesn&#39;t work."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 649, "user_id": 4170069, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d704db14178c176581df25dceeacea33?s=128&d=identicon&r=PG", "display_name": "Erick Gallani", "link": "https://stackoverflow.com/users/4170069/erick-gallani"}, "edited": false, "score": 0, "creation_date": 1470864122, "post_id": 38882589, "comment_id": 65128410, "body": "<code>Foo.my_mock</code> is <i>exactly</i> how you need to access a static method. The only difference between a static method and a class method is that the static method doesn&#39;t get a reference to the class as an argument."}, {"owner": {"reputation": 649, "user_id": 4170069, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d704db14178c176581df25dceeacea33?s=128&d=identicon&r=PG", "display_name": "Erick Gallani", "link": "https://stackoverflow.com/users/4170069/erick-gallani"}, "edited": false, "score": 0, "creation_date": 1471007095, "post_id": 38882589, "comment_id": 65194174, "body": "If I try use like you said <code>Foo.my_mock</code> with <code>my_mock</code> as a static method, I got an error saying that I can&#39;t do that. But with I declare <code>my_mock</code> as a class method, than I can use it."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 649, "user_id": 4170069, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d704db14178c176581df25dceeacea33?s=128&d=identicon&r=PG", "display_name": "Erick Gallani", "link": "https://stackoverflow.com/users/4170069/erick-gallani"}, "edited": false, "score": 0, "creation_date": 1471007745, "post_id": 38882589, "comment_id": 65194644, "body": "There is no such message that says &quot;[you] can&#39;t do that&quot;. Be precise."}, {"owner": {"reputation": 649, "user_id": 4170069, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d704db14178c176581df25dceeacea33?s=128&d=identicon&r=PG", "display_name": "Erick Gallani", "link": "https://stackoverflow.com/users/4170069/erick-gallani"}, "edited": false, "score": 0, "creation_date": 1471872072, "post_id": 38882589, "comment_id": 65508977, "body": "My mock method &#39;my_mock&#39; is inside of my test class. So if I try to use <code>side_effect=TestClass.my_mock</code> in a test method that is inside the same class of my_mock I get a reference error."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 649, "user_id": 4170069, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d704db14178c176581df25dceeacea33?s=128&d=identicon&r=PG", "display_name": "Erick Gallani", "link": "https://stackoverflow.com/users/4170069/erick-gallani"}, "edited": false, "score": 0, "creation_date": 1471874750, "post_id": 38882589, "comment_id": 65510986, "body": "If the patch occurs <i>during</i> class creation, then you can refer to it as <code>my_mock</code>."}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": true, "score": 5, "last_activity_date": 1470859931, "last_edit_date": 1470859931, "creation_date": 1470859593, "answer_id": 38882589, "question_id": 38882187, "link": "https://stackoverflow.com/questions/38882187/what-is-the-difference-between-using-the-patch-object-and-with-patch-object/38882589#38882589", "title": "What is the difference between using the &#39;@patch.object&#39; and &#39;with patch.object&#39; in Python?", "body": "<p>You are seeing the effect of Python's descriptor protocol. The difference is not in how you are calling <code>patch</code>, but in the value you are assigning to the <code>side_effect</code> attribute in each case.</p>\n\n<pre><code>class A(object):\n    @staticmethod\n    def my_mock():\n        pass\n\n    print type(my_mock)    # As in your decorator case\n\n# As in your context manager case\nprint type(A.my_mock)\nprint type(A().my_mock)\n</code></pre>\n\n<p>If you run this code, you'll see that the <code>print</code> statement inside the class declaration outputs <code>&lt;type 'staticmethod'&gt;</code>, because you have a reference to the method itself.</p>\n\n<p>The other two <code>print</code> statements output <code>&lt;type 'function'&gt;</code> because you <em>don't</em> have a reference to the method; you have a reference to the return value of the method's <code>__get__</code> method. The two calls are equivalent to</p>\n\n<pre><code>print type(A.__dict__['my_mock'].__get__(A))\nprint type(A.__dict__['my_mock'].__get__(A()))\n</code></pre>\n\n<p>See <a href=\"https://docs.python.org/2/howto/descriptor.html\" rel=\"noreferrer\">https://docs.python.org/2/howto/descriptor.html</a> for a fuller discussion of how descriptors are used to implement the three types of methods (static, class, and instance).</p>\n\n<hr>\n\n<p>The actual error comes about because <code>patch</code> expects a callable as the value of the <code>side_effect</code> argument, and failing that, it needs an iterable of return values. A <code>staticmethod</code> object is neither callable nor iterable.\n(Try it: <code>A.__dict__['my_mock']()</code>.)</p>\n\n<p>To ensure you get the function, you need to access the method through the class.</p>\n\n<pre><code>class Foo(object):\n    @staticmethod\n    def my_mock():\n        \"whatever it does\"\n\n@mock.patch('mypackage.mymodule.my_method', side_effect=Foo.my_mock)\ndef test_something(self, my_method_mocked):\n    ...test something\n</code></pre>\n"}], "owner": {"reputation": 649, "user_id": 4170069, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d704db14178c176581df25dceeacea33?s=128&d=identicon&r=PG", "display_name": "Erick Gallani", "link": "https://stackoverflow.com/users/4170069/erick-gallani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6309, "favorite_count": 1, "accepted_answer_id": 38882589, "answer_count": 2, "score": 7, "last_activity_date": 1471882932, "creation_date": 1470858134, "last_edit_date": 1471882932, "question_id": 38882187, "link": "https://stackoverflow.com/questions/38882187/what-is-the-difference-between-using-the-patch-object-and-with-patch-object", "title": "What is the difference between using the &#39;@patch.object&#39; and &#39;with patch.object&#39; in Python?", "body": "<p>In writing unit tests for my application, I have always been using the <code>@mock.patch</code> and <code>@patch.object</code> decorators. But now, for some unit tests when I use the decorator, I receive an error '<strong>TypeError: staticmethod object is not an iterator</strong>'.</p>\n\n<p>But with the same code, if I use <code>mock.patch.object</code> or <code>mock.patch.object</code>, everything works just fine.</p>\n\n<p>For example, in my test class I have this method:</p>\n\n<pre><code>@staticmethod\ndef my_mock():\n   ...do something\n</code></pre>\n\n<p>When I try the following unit test</p>\n\n<pre><code>@mock.patch('mypackage.mymodule.my_method', side_effect=my_mock)\ndef test_something(self, my_method_mocked):\n    ...test something\n</code></pre>\n\n<p>I receive the error message stated before '<strong>TypeError: staticmethod object is not an iterator</strong>'.</p>\n\n<p>But when I try this way</p>\n\n<pre><code>def test_something(self):\n    with patch.object(mymodule, \"my_method\") as mocked_method:\n        mocked_method.side_effect = self.my_mock\n        ...test something\n</code></pre>\n\n<p>then everything works perfectly.</p>\n\n<p>I've read the Python documentation about mock and unit tests, but I couldn't find any explanation for this behavior. </p>\n\n<p>What is the difference between using the <strong>decorator pattern</strong> and the <strong>with</strong> pattern? Where I can find more about this?</p>\n\n<p>Just to be more clear, this my code structure:</p>\n\n<pre><code>class TestClass(unittest.TestCase):\n\n    @staticmethod\n    def my_mock():\n    ...mock\n        return service\n\n    # doesn't work\n    @mock.patch('mypackage.mymodule.my_method', side_effect=my_mock)\n    def test_something(self, my_method_mocked):\n        ...test something\n\n    # work \n    def test_something(self):\n    with patch.object(mymodule, \"my_method\") as mocked_method:\n        mocked_method.side_effect = self.my_mock\n        ...test something\n</code></pre>\n\n<p>That's why I can't do <code>TestClass.my_mock</code>. If I do, I get a reference error.</p>\n"}, {"tags": ["python", "scheduled-tasks", "psycopg2", "terminate"], "comments": [{"owner": {"reputation": 2422, "user_id": 4047679, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7VEwB.png?s=128&g=1", "display_name": "raphael", "link": "https://stackoverflow.com/users/4047679/raphael"}, "edited": false, "score": 0, "creation_date": 1470858380, "post_id": 38882182, "comment_id": 65125555, "body": "Possibly implementing something along these lines <a href=\"http://stackoverflow.com/questions/323972/is-there-any-way-to-kill-a-thread-in-python\" title=\"is there any way to kill a thread in python\">stackoverflow.com/questions/323972/&hellip;</a>"}, {"owner": {"reputation": 801, "user_id": 4645599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4de546dd50ee3d94a9aa98230c8275cc?s=128&d=identicon&r=PG", "display_name": "Jose Raul Barreras", "link": "https://stackoverflow.com/users/4645599/jose-raul-barreras"}, "edited": false, "score": 0, "creation_date": 1470859742, "post_id": 38882182, "comment_id": 65126263, "body": "If its required, you can add some persistence and when \ufffcthe program starts again, it does from the last good state. <a href=\"https://docs.python.org/3/library/pickle.html\" rel=\"nofollow noreferrer\">`Pickle</a>  could be an option."}, {"owner": {"reputation": 2422, "user_id": 4047679, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7VEwB.png?s=128&g=1", "display_name": "raphael", "link": "https://stackoverflow.com/users/4047679/raphael"}, "reply_to_user": {"reputation": 801, "user_id": 4645599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4de546dd50ee3d94a9aa98230c8275cc?s=128&d=identicon&r=PG", "display_name": "Jose Raul Barreras", "link": "https://stackoverflow.com/users/4645599/jose-raul-barreras"}, "edited": false, "score": 0, "creation_date": 1470861596, "post_id": 38882182, "comment_id": 65127207, "body": "@JoseRaulBarreras I&#39;ll look into that, at the moment going to try something based on this <a href=\"http://stackoverflow.com/a/14924210/4047679\">stackoverflow.com/a/14924210/4047679</a>"}, {"owner": {"reputation": 2422, "user_id": 4047679, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7VEwB.png?s=128&g=1", "display_name": "raphael", "link": "https://stackoverflow.com/users/4047679/raphael"}, "reply_to_user": {"reputation": 801, "user_id": 4645599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4de546dd50ee3d94a9aa98230c8275cc?s=128&d=identicon&r=PG", "display_name": "Jose Raul Barreras", "link": "https://stackoverflow.com/users/4645599/jose-raul-barreras"}, "edited": false, "score": 0, "creation_date": 1470862047, "post_id": 38882182, "comment_id": 65127426, "body": "Running into serializabity issues, pickle might not work? for example: <a href=\"http://stackoverflow.com/questions/12461901/debugging-pickle\">stackoverflow.com/questions/12461901/debugging-pickle</a>"}], "owner": {"reputation": 2422, "user_id": 4047679, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7VEwB.png?s=128&g=1", "display_name": "raphael", "link": "https://stackoverflow.com/users/4047679/raphael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1470861187, "creation_date": 1470858120, "question_id": 38882182, "link": "https://stackoverflow.com/questions/38882182/how-can-i-schedule-a-python-script-to-terminate", "title": "How can I schedule a Python script to terminate?", "body": "<p>I'm currently using python to loop through heavy processing tasks on tables in our database. In order to be friendly to other users I want this processing to only happen during nocturnal hours. When the early risers start using the database, I want to be able to program the premature termination of this script.</p>\n\n<p>I'm aware of <a href=\"https://pypi.python.org/pypi/interruptingcow/\" rel=\"nofollow\">interrupting cow</a> so I could have something like this:</p>\n\n<pre><code>from interruptingcow import timeout\n\nfrom dbsettings import dbsetting\n\ncon = connect(database=dbset['database'],\n              host=dbset['host'],\n              user=dbset['user'],\n              password=dbset['password'])\ncursor = con.cursor()\n\nYEARS = {\"2014\":range(1, 13),\n         \"2015\":range(1, 13)}\n\ndef update_table(yyyymm, con, cursor)\n     table = 'public.tablename'+yyyymm\n     cursor.execute('Do something on {table}'.format(table))\n     con.commit()\n\ntry:\n    with timeout(57600, exception=RuntimeError):\n        for year in YEARS:\n            for month in years[year]:\n                yyyymm = get_yyyymm(year, month)\n                update_table(yyyymm, con, cursor)\nexcept RuntimeError:\n    print \"It's morning, killing database processing\"\n</code></pre>\n\n<p>But is this a best practice? Is there a better way?</p>\n"}, {"tags": ["python", "sockets", "python-3.x"], "comments": [{"owner": {"reputation": 10901, "user_id": 1076479, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/eLQUX.jpg?s=128&g=1", "display_name": "Gil Hamilton", "link": "https://stackoverflow.com/users/1076479/gil-hamilton"}, "edited": false, "score": 0, "creation_date": 1470859369, "post_id": 38882137, "comment_id": 65126056, "body": "Seems to work fine for me. But note that with TCP, message boundaries are not respected. Hence, both buffers you <code>send</code> will (or at least may) get consolidated into a single <code>recv</code> buffer (that&#39;s what I&#39;m seeing). Other notes: (a) This is not valid python-3.x (on client-side, due to missing parentheses in the print statement); (b) You should put the <code>c.close()</code> inside the loop on the server side -- otherwise you&#39;re leaving all previously-accepted connections open until the program exits."}, {"owner": {"reputation": 240, "user_id": 6308337, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ee937183a5a12487c821270bab346e4?s=128&d=identicon&r=PG&f=1", "display_name": "abc1234", "link": "https://stackoverflow.com/users/6308337/abc1234"}, "reply_to_user": {"reputation": 10901, "user_id": 1076479, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/eLQUX.jpg?s=128&g=1", "display_name": "Gil Hamilton", "link": "https://stackoverflow.com/users/1076479/gil-hamilton"}, "edited": false, "score": 0, "creation_date": 1470870498, "post_id": 38882137, "comment_id": 65130517, "body": "For a I printed it wrong sorry, I edited it now. 2nd I did put c.close() inside the loop. That doesnt do it either. I only see the first statement thats printed from the server but not the second one."}, {"owner": {"reputation": 3421, "user_id": 3926735, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cd07f4b7ab3002264309b8dbf5eecfa7?s=128&d=identicon&r=PG", "display_name": "zezollo", "link": "https://stackoverflow.com/users/3926735/zezollo"}, "edited": false, "score": 0, "creation_date": 1470893319, "post_id": 38882137, "comment_id": 65136225, "body": "The very same code you pasted works perfectly fine locally (using &#39;127.0.0.1&#39; or the IP address of the machine on the local network as &#39;MyIP&#39;)."}, {"owner": {"reputation": 10901, "user_id": 1076479, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/eLQUX.jpg?s=128&g=1", "display_name": "Gil Hamilton", "link": "https://stackoverflow.com/users/1076479/gil-hamilton"}, "edited": false, "score": 0, "creation_date": 1470926283, "post_id": 38882137, "comment_id": 65157589, "body": "If the two sent buffers happen to <i>not</i> get consolidated into a single buffer in the <code>recv</code> (which can happen based on timing, which OS you&#39;re running and other factors), then it makes sense that you would not see the second buffer because you&#39;re only making one <code>recv</code> call. If you want to receive everything the server sent, put the <code>recv</code> in a loop until it returns an empty string. (Empty string indicates end-of-file [i.e. socket closed by the other end].)"}], "answers": [{"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": true, "score": 1, "last_activity_date": 1471422299, "creation_date": 1471422299, "answer_id": 38991599, "question_id": 38882137, "link": "https://stackoverflow.com/questions/38882137/problems-with-sockets/38991599#38991599", "title": "Problems with sockets", "body": "<p>If the two sent buffers happen to not get consolidated into a single buffer in the <code>recv</code> (which can happen based on timing, which OS you're running and other factors), then it makes sense that you would not see the second buffer because you're only making one <code>recv</code> call. If you want to receive everything the server sent, put the <code>recv</code> in a loop until it returns an empty string. (Empty string indicates end-of-file [i.e. socket closed by the other end].) \u2013 Gil Hamilton</p>\n"}], "owner": {"reputation": 240, "user_id": 6308337, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ee937183a5a12487c821270bab346e4?s=128&d=identicon&r=PG&f=1", "display_name": "abc1234", "link": "https://stackoverflow.com/users/6308337/abc1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 686, "favorite_count": 0, "accepted_answer_id": 38991599, "answer_count": 1, "score": 0, "last_activity_date": 1471422299, "creation_date": 1470857939, "last_edit_date": 1470870410, "question_id": 38882137, "link": "https://stackoverflow.com/questions/38882137/problems-with-sockets", "title": "Problems with sockets", "body": "<p>I'm trying to set up a small server where when the client logs in gets some messages. </p>\n\n<p><strong>The server code</strong> </p>\n\n<pre><code>import socket\n\n#Networking\ns = socket.socket()\n\nprint(\"Network successfully created\")\n\nport = 3642\n\n\ns.bind(('',port))\n\nprint(\"Network has been binded to %s\" %(port))\n\ns.listen(5)\n\nprint(\"Waiting for connections\")\n\n\nwhile True:\n\n    c, addr = s.accept()\n\n    print(\"Got a connection from\",addr)\n\n\n    c.send(bytes(\"Thank you for connecting to me. Currently we\",\"utf-8\"))\n    c.send(bytes(\"Working on the server\",\"utf-8\"))\n\nc.close()\n</code></pre>\n\n<p><strong>This is the client code</strong></p>\n\n<pre><code># Import socket module\nimport socket               \n\n# Create a socket object\ns = socket.socket()         \n\n# Define the port on which you want to connect\nport = 3642                \n\n# connect to the server on local computer\ns.connect(('MyIp..', port))\n\n# receive data from the server\nprint(s.recv(1024))\n# close the connection\ns.close()                     \n</code></pre>\n\n<p>Everything works fine such as the connecting and the first message gets printed, however I can't get the second message to get printed. The one that says working on the server. I have just began learning about sockets and barely know anything about them so the solution probably is obvious it's just \nI can't seem to figure it out. Thank you for any responses. (I would appreciate thorough responses)</p>\n"}, {"tags": ["python", "python-2.7", "python-3.x"], "comments": [{"owner": {"reputation": 2614, "user_id": 3254869, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/O17Z7.jpg?s=128&g=1", "display_name": "zhqiat", "link": "https://stackoverflow.com/users/3254869/zhqiat"}, "edited": false, "score": 0, "creation_date": 1470858087, "post_id": 38882132, "comment_id": 65125397, "body": "Have you thought about using a cumulative sum function? <a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.cumsum.html\" rel=\"nofollow noreferrer\">docs.scipy.org/doc/numpy/reference/generated/numpy.cumsum.ht&zwnj;&#8203;ml</a>"}, {"owner": {"reputation": 2838, "user_id": 3614521, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AR81q.png?s=128&g=1", "display_name": "Mephy", "link": "https://stackoverflow.com/users/3614521/mephy"}, "edited": false, "score": 0, "creation_date": 1470858097, "post_id": 38882132, "comment_id": 65125406, "body": "This indentation will get you an indentation error."}], "answers": [{"comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 1, "creation_date": 1470858910, "post_id": 38882236, "comment_id": 65125810, "body": "or indeed <code>p = lambda n: sum(i+j for i in range(n) for j in range(i))</code>"}], "tags": [], "owner": {"reputation": 132, "user_id": 823447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/230ea26c775eaac580ae000256864ff9?s=128&d=identicon&r=PG", "display_name": "user823447", "link": "https://stackoverflow.com/users/823447/user823447"}, "is_accepted": false, "score": 0, "last_activity_date": 1470859825, "last_edit_date": 1495540858, "creation_date": 1470858316, "answer_id": 38882236, "question_id": 38882132, "link": "https://stackoverflow.com/questions/38882132/how-to-sum-all-integer-after-running-a-loop/38882236#38882236", "title": "How to sum all integer after running a loop", "body": "<p>With the most minimal change, this would allow <code>p(6)</code> to return <code>168</code>:</p>\n\n<pre><code>def multiples(n, high):\n   i = 0\n   res = 0\n   while i &lt;= high:\n      res = res + (n+i)\n      i = i + 1\n   print res\n   return res\n\ndef p(high):\n   i = 1\n   lumpSum = 0\n   while i &lt;= high:\n      lumpSum += multiples(i, i)\n      i = i + 1\n   return lumpSum\n\nprint p(6)\n</code></pre>\n\n<p>Alternatively, you can shorten <code>p</code>:</p>\n\n<pre><code>def p(high):\n    return sum([multiples(i, i) for i in range(1, high + 1)])\n</code></pre>\n\n<p>Edit: The entire code can indeed be reduced to this: <a href=\"https://stackoverflow.com/users/3058609/adam-smith\">Adam Smith</a> pointed out in <a href=\"https://stackoverflow.com/questions/38882132/how-to-sum-all-integer-after-running-a-loop/38882236?noredirect=1#comment65125810_38882236\">his comment</a>.</p>\n\n<p><code>p = lambda n: sum(i+j for i in range(n) for j in range(i))</code></p>\n"}, {"comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1470858753, "post_id": 38882264, "comment_id": 65125741, "body": "Note that depending on what you&#39;re trying to do, I may have introduced an off-by-one error. Your original implementation loops from <code>1 -&gt; N, while mine loops from </code>0 -&gt; N-1<code>. This isn&#39;t an issue in </code>multiples` but might be in <code>p</code>. Fix this with <code>for i in range(1, n+1)</code> instead of <code>for i in range(n)</code>"}], "tags": [], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "is_accepted": true, "score": 1, "last_activity_date": 1470858412, "creation_date": 1470858412, "answer_id": 38882264, "question_id": 38882132, "link": "https://stackoverflow.com/questions/38882132/how-to-sum-all-integer-after-running-a-loop/38882264#38882264", "title": "How to sum all integer after running a loop", "body": "<p>A few things,</p>\n\n<p>First off, this is a very old-school type of looping.</p>\n\n<pre><code>i = 0\nwhile i &lt;= some_number:\n    do_something\n    i = i + 1\n</code></pre>\n\n<p>The last language I used that required a pattern like that was Basic. Use <code>for</code> loops. A standard <code>for</code> loop (note: NOT Python's, but I'll get to that in a minute) looks like <code>for i=0; i&lt;=some_number; i++ { do_something }</code>. That is:</p>\n\n<ol>\n<li>Initialize <code>i</code></li>\n<li>Conditional for when to keep looping</li>\n<li>What to do after each loop block</li>\n</ol>\n\n<p>Python is even more clear. <code>for</code> loops over any iterable, so:</p>\n\n<pre><code>for element in [1,3,5,7,9]:\n    ...\n</code></pre>\n\n<p>Gives you <code>1</code>, then <code>3</code>, then <code>5</code>, then <code>7</code>, then <code>9</code> as <code>element</code> in the loop body. Use this in conjunction with the <code>range</code> built-in to loop <code>N</code> times.</p>\n\n<pre><code>for i in range(high):\n    # do something `high` number of times\n</code></pre>\n\n<p>A naive re-write looks like:</p>\n\n<pre><code>def multiples(k, n):\n    res = 0\n    for i in range(n):\n        res += (k+i)\n    print(res)\n    return res\n\ndef p(n):\n    for i in range(n):\n        multiples(i, i)\n</code></pre>\n\n<p>However that doesn't really give you what you want either. What you WANT is to assign the value <code>multiples(i, i)</code> TO something.</p>\n\n<pre><code>def p(n):\n    total = 0\n    for i in range(n):\n        total += multiples(i, i)\n    return total\n</code></pre>\n\n<p>Now we're tracking your grand total inside <code>p</code>, and returning it afterwards.</p>\n\n<pre><code>result = p(6)\nprint(result)  # does what you want\n</code></pre>\n\n<p><hr>\nOf course there's no good reason to break up these two functions. You could just as easily write:</p>\n\n<pre><code>def p(n):\n    total = 0\n    for i in range(n):\n        for j in range(i):\n            total += j+i\n    return total\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6655417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00187ab70f43c5320638ccaef625747b?s=128&d=identicon&r=PG&f=1", "display_name": "siulonbow", "link": "https://stackoverflow.com/users/6655417/siulonbow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 38882264, "answer_count": 2, "score": 0, "last_activity_date": 1470859825, "creation_date": 1470857933, "last_edit_date": 1470858609, "question_id": 38882132, "link": "https://stackoverflow.com/questions/38882132/how-to-sum-all-integer-after-running-a-loop", "title": "How to sum all integer after running a loop", "body": "<p>I have written a script, but I don't know if it's possible to have the total.  My script would give me total number per loop, but I want to have the lump sum of everything.  For instance, if I input 6, I would expect the result to be 168.  if I input 5, I would expect the result to be 105.</p>\n\n<p>Thanks</p>\n\n<p>My script is as follow:</p>\n\n<pre><code>def multiples(n, high):\n    i = 0\n    res = 0\n    while i &lt;= high:\n        res = res + (n+i)\n        i = i + 1\n    print res\n    return res\n\ndef p(high):\n    i = 1\n    while i &lt;= high:\n        multiples(i, i)\n        i = i + 1\n\np(6)  # Expected Output: 168\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "cross-entropy"], "comments": [{"owner": {"reputation": 145, "user_id": 4648617, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2ef2e9dc8474fe386f94a90e39633576?s=128&d=identicon&r=PG&f=1", "display_name": "Gary Grey", "link": "https://stackoverflow.com/users/4648617/gary-grey"}, "edited": false, "score": 0, "creation_date": 1470874260, "post_id": 38881918, "comment_id": 65131447, "body": "I think it&#39;s an issue, so I opened it on Github - <a href=\"https://github.com/tensorflow/tensorflow/issues/3739\" rel=\"nofollow noreferrer\">github.com/tensorflow/tensorflow/issues/3739</a>"}, {"owner": {"reputation": 145, "user_id": 4648617, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2ef2e9dc8474fe386f94a90e39633576?s=128&d=identicon&r=PG&f=1", "display_name": "Gary Grey", "link": "https://stackoverflow.com/users/4648617/gary-grey"}, "edited": false, "score": 0, "creation_date": 1470878091, "post_id": 38881918, "comment_id": 65132248, "body": "It&#39;s an issue. - <a href=\"https://github.com/tensorflow/tensorflow/blob/2a10e469d70827ede21c0bb5d0a46aac97404d4c/tensorflow/python/ops/nn_ops.py#L537\" rel=\"nofollow noreferrer\">github.com/tensorflow/tensorflow/blob/&hellip;</a>"}], "owner": {"reputation": 145, "user_id": 4648617, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2ef2e9dc8474fe386f94a90e39633576?s=128&d=identicon&r=PG&f=1", "display_name": "Gary Grey", "link": "https://stackoverflow.com/users/4648617/gary-grey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1381, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1470857094, "creation_date": 1470857094, "question_id": 38881918, "link": "https://stackoverflow.com/questions/38881918/tensorflow-tf-nn-in-top-k-targets-out-of-range-error", "title": "Tensorflow tf.nn.in_top_k: targets out of range error?", "body": "<p>I have figured out what was causing this error, it was due to mismatch between labels and outputs, like I'm doing 8 class sentiment classification and my labels are (1,2,3,4,7,8,9,10) so it was unable to match predictions(1,2,3,4,5,6,7,8) with my labels, so that's why it was giving out of range error. My question is, why it didn't gave me error in this line <code>c_loss = tf.nn.sparse_softmax_cross_entropy_with_logits(logits,Y)</code> , how it's matching labels with predictions in this case as opposed to in in_top_k? I think <code>c_loss = tf.nn.sparse_softmax_cross_entropy_with_logits(logits,Y)</code> should give me error because predictions and labels are not same. Why I'm not getting targets out of range error in cross entropy function? </p>\n\n<pre><code>from __future__ import absolute_import\nfrom __future__ import division\nfrom __future__ import print_function\n\nimport tensorflow as tf\nimport numpy as np\nimport math\nimport os\nfrom nltk.tokenize import TweetTokenizer\nbatch = 500\nstart = 0\nend = batch - 1\nlearning_rate = 0.2\nnum_classes = 8\npath = \"/home/indy/Downloads/aclImdb/train/pos\"\ntime_steps = 250\nembedding = 50\n\ndef get_embedding():\n    gfile_path = os.path.join(\"/home/indy/Downloads/glove.6B\", \"glove.6B.50d.txt\")\n    f = open(gfile_path,'r')\n    embeddings = {}\n    for line in f:\n        sp_value = line.split()\n        word = sp_value[0]\n        embedding = [float(value) for value in sp_value[1:]]\n        embeddings[word] = embedding\n    return embeddings\n\nebd = get_embedding()\n\ndef get_y(file_name):\n    y_value = file_name.split('_')\n    y_value = y_value[1].split('.')\n    return y_value[0] \n\ndef get_x(path,file_name):\n    file_path = os.path.join(path,file_name)\n    x_value = open(file_path,'r')\n    for line in x_value:\n        x_value = line.replace(\"&lt;br /&gt;&lt;br /&gt;\",\"\") \n        x_value = x_value.lower()\n    tokeniz = TweetTokenizer()\n    x_value = tokeniz.tokenize(x_value)\n    padding = 250 - len(x_value)\n    if padding &gt; 0:\n       p_value = ['pad' for i in range(padding)]\n       x_value = np.concatenate((x_value,p_value))\n    x_value = [ebd['value'] for value in x_value]\n\n    return x_value\n\ndef  batch_f(path):\n     directory = os.listdir(path)\n     y = [get_y(directory[i]) for i in range(len(directory))]\n     x = [get_x(path,directory[i]) for i in range(len(directory))]    \n     return x,y\n\n\nX = tf.placeholder(tf.float32, [batch,time_steps,embedding])\nY = tf.placeholder(tf.int32, [batch])\n\ndef build_nlp_model(x, _units, lstm_layers,num_classes):\n\n     x = tf.transpose(x, [1, 0, 2])\n     x = tf.reshape(x, [-1, embedding])\n     x = tf.split(0, time_steps, x)\n\n\n     lstm = tf.nn.rnn_cell.LSTMCell(num_units = _units, state_is_tuple = True)\n\n     multi_lstm = tf.nn.rnn_cell.MultiRNNCell([lstm] * lstm_layers, state_is_tuple = True)\n\n     outputs , state = tf.nn.rnn(multi_lstm,x, dtype = tf.float32)     \n\n     weights = tf.Variable(tf.random_normal([_units,num_classes]))\n     biases  = tf.Variable(tf.random_normal([num_classes]))\n\n     logits = tf.matmul(outputs[-1], weights) + biases\n     return logits\n\nlogits = build_nlp_model(X,400,4,num_classes)\nc_loss = tf.nn.sparse_softmax_cross_entropy_with_logits(logits,Y)\nloss = tf.reduce_mean(c_loss)\n\n\n\ndecayed_learning_rate = tf.train.exponential_decay(learning_rate,0,10000,0.9)\noptimizer= tf.train.AdamOptimizer(decayed_learning_rate)\nminimize_loss = optimizer.minimize(loss)\n\n\n\ncorrect_predict = tf.nn.in_top_k(logits, Y, 1)\naccuracy = tf.reduce_mean(tf.cast(correct_predict, tf.float32))\n\n\ninit = tf.initialize_all_variables()\n\nwith tf.Session() as sess:\n     sess.run(init)\n     for i in range(25):\n         x, y = batch_f(path)\n         sess.run(minimize_loss,feed_dict={X : x, Y : y})\n         accu = sess.run(accuracy,feed_dict = {X: x, Y: y})\n         cost = sess.run(loss,feed_dict = {X: x,Y: y})\n         start = end \n         end = (start + batch)\n         print (\"Minibatch Loss = \" + \"{:.6f}\".format(cost) + \", Training Accuracy= \" + \"{:.5f}\".format(accu))\n</code></pre>\n\n<p>This is the error stack.</p>\n\n<pre><code>(500, 250, 50)\n(500,)\nTraceback (most recent call last):\n  File \"nlp.py\", line 115, in &lt;module&gt;\n    accu = sess.run(accuracy,feed_dict = {X: x, Y: y})\n  File \"/home/indy/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 372, in run\n    run_metadata_ptr)\n  File \"/home/indy/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 636, in _run\n    feed_dict_string, options, run_metadata)\n  File \"/home/indy/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 708, in _do_run\n    target_list, options, run_metadata)\n  File \"/home/indy/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 728, in _do_call\n    raise type(e)(node_def, op, message)\ntensorflow.python.framework.errors.InvalidArgumentError: targets[0] is out of range\n     [[Node: InTopK = InTopK[T=DT_INT32, k=1, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](add, _recv_Placeholder_1_0)]]\nCaused by op u'InTopK', defined at:\n  File \"nlp.py\", line 102, in &lt;module&gt;\n    correct_predict = tf.nn.in_top_k(logits, Y, 1)\n  File \"/home/indy/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/ops/gen_nn_ops.py\", line 890, in in_top_k\n    targets=targets, k=k, name=name)\n  File \"/home/indy/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/ops/op_def_library.py\", line 704, in apply_op\n    op_def=op_def)\n  File \"/home/indy/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 2260, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/home/indy/tensorflow/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1230, in __init__\n    self._traceback = _extract_stack()\n</code></pre>\n"}, {"tags": ["python", "function", "parameter-passing"], "comments": [{"owner": {"reputation": 2594, "user_id": 6627323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39919117dd3edf525bb00bdcccd3d64e?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/6627323/james"}, "edited": false, "score": 1, "creation_date": 1470857276, "post_id": 38881888, "comment_id": 65124972, "body": "Do the arguments have to be set up that way? In order to force the user to use one or the other I might make the function definition <code>some_function(arg, using_a)</code> - that way there&#39;s no option to not specify either one or the other"}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1470857901, "post_id": 38881888, "comment_id": 65125302, "body": "agreed that IN GENERAL this is a bad pattern. You shouldn&#39;t try to overload functions in this way. If you&#39;re convinced this is the best for your use case, there are lots of great answers."}], "answers": [{"comments": [{"owner": {"reputation": 2594, "user_id": 6627323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39919117dd3edf525bb00bdcccd3d64e?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/6627323/james"}, "edited": false, "score": 1, "creation_date": 1470857144, "post_id": 38881914, "comment_id": 65124898, "body": "This will fail if either arg_a or arg_b is the empty string, the empty list, or another &#39;falsey&#39; value, not just if they aren&#39;t specified."}, {"owner": {"reputation": 1363, "user_id": 2792896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dbf65eb2ebc0d8dc5b8fb48ac825fed?s=128&d=identicon&r=PG&f=1", "display_name": "Arnial", "link": "https://stackoverflow.com/users/2792896/arnial"}, "edited": false, "score": 0, "creation_date": 1470857258, "post_id": 38881914, "comment_id": 65124960, "body": "<code>arg_a == arg_b == None:</code> or <code>arg_a is arg_b is None:</code>"}], "tags": [], "owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "is_accepted": false, "score": 5, "last_activity_date": 1470871141, "last_edit_date": 1470871141, "creation_date": 1470857086, "answer_id": 38881914, "question_id": 38881888, "link": "https://stackoverflow.com/questions/38881888/how-to-check-in-python-that-at-least-one-of-the-default-parameters-of-the-functi/38881914#38881914", "title": "How to check in python that at least one of the default parameters of the function specified", "body": "<p>Depends on what you expect as values for <code>arg_a</code> and <code>arg_b</code>, but this is generally sufficient.</p>\n\n<pre><code>if not arg_a and not arg_b:\n    raise ValueError(...)\n</code></pre>\n\n<p>Assumes that <code>arg_a</code> and <code>arg_b</code> are not both booleans and cannot have zeros, empty strings/lists/tuples, etc. as parameters.</p>\n\n<p>Depending on your needs, you can be more precise if you need to distinguish between None and 'falsies' such as False, 0, \"\", [], {}, (), etc.:</p>\n\n<pre><code>if arg_a is None and arg_b is None:\n    raise ValueError(...)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 304, "user_id": 2227975, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/LOheA.jpg?s=128&g=1", "display_name": "machin", "link": "https://stackoverflow.com/users/2227975/machin"}, "edited": false, "score": 1, "creation_date": 1470860190, "post_id": 38882013, "comment_id": 65126503, "body": "Ok, but after your code I have to put if-elif once more, because I need to initialize some data depends on arg_a or arg_b"}], "tags": [], "owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "is_accepted": true, "score": 9, "last_activity_date": 1470910771, "last_edit_date": 1470910771, "creation_date": 1470857494, "answer_id": 38882013, "question_id": 38881888, "link": "https://stackoverflow.com/questions/38881888/how-to-check-in-python-that-at-least-one-of-the-default-parameters-of-the-functi/38882013#38882013", "title": "How to check in python that at least one of the default parameters of the function specified", "body": "<p>You could use <code>all</code> to check if they all equal <code>None</code> and raise the <code>ValueError</code>:</p>\n\n<pre><code>if all(v is None for v in {arg_a, arg_b}):\n    raise ValueError('Expected either arg_a or arg_b args')\n</code></pre>\n\n<p>this gets rid of those <code>if-elif</code> clauses and groups all checks in the same place:</p>\n\n<pre><code>f(arg_a=0) # ok    \nf(arg_b=0) # ok\nf()        # Value Error  \n</code></pre>\n\n<p>Alternatively, with <code>any()</code>:</p>\n\n<pre><code>if not any(v is not None for v in {arg_a, arg_b}):\n    raise ValueError('Expected either arg_a or arg_b args')\n</code></pre>\n\n<p>but this is definitely more obfuscated. </p>\n\n<p>In the end, it really depends on what the interpretation of pythonic actually is.</p>\n"}, {"comments": [{"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 1, "creation_date": 1470858467, "post_id": 38882106, "comment_id": 65125594, "body": "Halfway doing a similar post when I saw yours.  However I use a <code>set</code> of valid arguments and subtract that from the set of keys in kwargs to check for incorrect arguments."}, {"owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "reply_to_user": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 1, "creation_date": 1470859015, "post_id": 38882106, "comment_id": 65125866, "body": "@cdarke That&#39;s a good one. Would look cleaner, but creating another set from the kwargs is something to consider"}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 1, "creation_date": 1470859738, "post_id": 38882106, "comment_id": 65126260, "body": "In Py3 you can use set operations on view objects returned from  <code>dict.keys()</code>, or in Py2 use <code>dict.viewkeys()</code>"}], "tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": false, "score": 1, "last_activity_date": 1470858446, "last_edit_date": 1470858446, "creation_date": 1470857847, "answer_id": 38882106, "question_id": 38881888, "link": "https://stackoverflow.com/questions/38881888/how-to-check-in-python-that-at-least-one-of-the-default-parameters-of-the-functi/38882106#38882106", "title": "How to check in python that at least one of the default parameters of the function specified", "body": "<p>You may consider using <code>kwargs</code> if you have quite a number of such named arguments with <em>mismatching</em> default values:</p>\n\n<pre><code>def some_function(**kwargs):\n    reqd = ['arg_a', 'arg_b']\n    if not all(i in kwargs for i in reqd):\n        raise ValueError('Expected either {} args'.format(' or '.join(reqd)))\n\n    arg_a = kwargs.get('args_a')\n    arg_b = kwargs.get('args_b')\n    arg_c = kwargs.get('args_c', False)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "is_accepted": false, "score": 0, "last_activity_date": 1470858354, "last_edit_date": 1470858354, "creation_date": 1470858046, "answer_id": 38882167, "question_id": 38881888, "link": "https://stackoverflow.com/questions/38881888/how-to-check-in-python-that-at-least-one-of-the-default-parameters-of-the-functi/38882167#38882167", "title": "How to check in python that at least one of the default parameters of the function specified", "body": "<blockquote>\n  <p>To check if at least one of the default parameters of the function\n  specified</p>\n</blockquote>\n\n<p>The solution using <code>locals</code>, <code>dict.values</code> and <code>any</code> functions:</p>\n\n<pre><code>def some_function(arg_a=None, arg_b=None, arg_c=False):\n    args = locals()\n    if (any(args.values()) == True):\n        print('Ok')\n    else:\n        raise ValueError('At least one default param should be passed!')\n\nsome_function(False, 1)            # Ok\nsome_function('text', False, None) # Ok\nsome_function(0, False, None)      # Error\n</code></pre>\n\n<p><a href=\"https://docs.python.org/2/library/functions.html#any\" rel=\"nofollow\">https://docs.python.org/2/library/functions.html#any</a></p>\n"}, {"tags": [], "owner": {"reputation": 3201, "user_id": 5986907, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0521ce05a7fcb2580e4f513990a5a8c8?s=128&d=identicon&r=PG&f=1", "display_name": "joel", "link": "https://stackoverflow.com/users/5986907/joel"}, "is_accepted": false, "score": 0, "last_activity_date": 1550486848, "creation_date": 1550486848, "answer_id": 54745519, "question_id": 38881888, "link": "https://stackoverflow.com/questions/38881888/how-to-check-in-python-that-at-least-one-of-the-default-parameters-of-the-functi/54745519#54745519", "title": "How to check in python that at least one of the default parameters of the function specified", "body": "<p>Since you're proposing such a pattern, there's possibly some unifying meaning to <code>arg_a</code>, <code>arg_b</code> and <code>arg_c</code>. If that's so, you could ...</p>\n\n<pre><code>from enum import Enum\n\nclass Group(Enum):\n    A = auto()\n    B = auto()\n    C = auto()\n\ndef some_function(val: int, t: Group):\n    if t == Group.A:\n        # do stuff with val\n    elif t == Group.B:\n        # do other stuff with val\n    elif t == Group.C:\n        # do other stuff with val\n\nsome_function(1, Group.A)\n</code></pre>\n\n<p>Here the caller is forced to specify both a value, and what the value corresponds to. This is tbh a bit of a hack around the lack of proper enumeration support in python and I've no idea if it's pythonic. It will however be picked up by a type checker.</p>\n"}], "owner": {"reputation": 304, "user_id": 2227975, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/LOheA.jpg?s=128&g=1", "display_name": "machin", "link": "https://stackoverflow.com/users/2227975/machin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3646, "favorite_count": 2, "accepted_answer_id": 38882013, "answer_count": 5, "score": 9, "last_activity_date": 1550486848, "creation_date": 1470856968, "last_edit_date": 1470858280, "question_id": 38881888, "link": "https://stackoverflow.com/questions/38881888/how-to-check-in-python-that-at-least-one-of-the-default-parameters-of-the-functi", "title": "How to check in python that at least one of the default parameters of the function specified", "body": "<p>What is the best practice in python to check if at least one of the default parameters of the function is specified?</p>\n\n<p>Let's suppose we have some function:</p>\n\n<pre><code>def some_function(arg_a=None, arg_b=None, arg_c=False)\n</code></pre>\n\n<p>with some default parameters. In my case, I need to check if either <code>arg_a</code> or <code>arg_b</code> is specified. So I thought of implementing something like this:</p>\n\n<pre><code>def some_function(arg_a=None, arg_b=None, arg_c=False):\n    ...\n    if arg_a is not None:\n        ...\n    elif arg_b is not None:\n        ...\n    else:\n        raise ValueError('Expected either arg_a or arg_b args')\n    ...\n    ...\n</code></pre>\n\n<p>So, what is more pythonic way to implement such kind of functionality?</p>\n"}, {"tags": ["python", "numpy", "fft"], "comments": [{"owner": {"reputation": 5127, "user_id": 5323213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c231bca62d8fc45d54fa169950c3701?s=128&d=identicon&r=PG&f=1", "display_name": "R Nar", "link": "https://stackoverflow.com/users/5323213/r-nar"}, "edited": false, "score": 2, "creation_date": 1470856786, "post_id": 38881797, "comment_id": 65124714, "body": "what version of numpy do you have? <code>norm</code> is new to v1.10 so if you have an older version, there is no <code>norm</code> keyword."}, {"owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "edited": false, "score": 0, "creation_date": 1470856831, "post_id": 38881797, "comment_id": 65124734, "body": "What does <code>np.version.short_version</code> say?"}, {"owner": {"reputation": 5909, "user_id": 500207, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DsvTT.jpg?s=128&g=1", "display_name": "Ahmed Fasih", "link": "https://stackoverflow.com/users/500207/ahmed-fasih"}, "edited": false, "score": 1, "creation_date": 1470857360, "post_id": 38881797, "comment_id": 65125019, "body": "Related: <a href=\"http://stackoverflow.com/questions/38786227/numpys-fft-with-intel-mkl\" title=\"numpys fft with intel mkl\">stackoverflow.com/questions/38786227/numpys-fft-with-intel-m&zwnj;&#8203;kl</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1740, "user_id": 2832874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e377f3e2140297d32460ae9a4b38ff98?s=128&d=identicon&r=PG", "display_name": "vielmetti", "link": "https://stackoverflow.com/users/2832874/vielmetti"}, "is_accepted": false, "score": 0, "last_activity_date": 1470856807, "creation_date": 1470856807, "answer_id": 38881850, "question_id": 38881797, "link": "https://stackoverflow.com/questions/38881797/numpy-fft-fft-can-not-have-4-arguments/38881850#38881850", "title": "numpy.fft.fft can not have 4 arguments?", "body": "<p>What version of numpy are you using?</p>\n\n<p>I ask because </p>\n\n<p><a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.fft.fft.html#numpy.fft.fft\" rel=\"nofollow\">http://docs.scipy.org/doc/numpy/reference/generated/numpy.fft.fft.html#numpy.fft.fft</a> </p>\n\n<p>refers to norm as \"New in version 1.10.0.\", and if you were using an older version, the error message would be consistent with the behavior.</p>\n"}], "owner": {"reputation": 11, "user_id": 5298450, "user_type": "registered", "profile_image": "https://graph.facebook.com/414483592075347/picture?type=large", "display_name": "Enzo  Gu", "link": "https://stackoverflow.com/users/5298450/enzo-gu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1470856807, "creation_date": 1470856599, "question_id": 38881797, "link": "https://stackoverflow.com/questions/38881797/numpy-fft-fft-can-not-have-4-arguments", "title": "numpy.fft.fft can not have 4 arguments?", "body": "<p>I tried to do FFT with numpy using this:</p>\n\n<pre><code>    sp=np.fft.fft(np.exp(-t), 1000, -1, \"ortho\")\n</code></pre>\n\n<p>and it returns:</p>\n\n<pre><code>    TypeError: fft() takes at most 3 arguments (4 given)\n</code></pre>\n\n<p>But in the manual, numpy.fft.fft() is defined as: </p>\n\n<pre><code>    numpy.fft.fft(a, n=None, axis=-1, norm=None)\n</code></pre>\n\n<p>n, axis, and norm are optional, and norm can be set to \"ortho\". \nWhy can't I use what I wrote?\nThanks.</p>\n"}, {"tags": ["python", "regex", "python-3.x", "python-3.5"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 3, "creation_date": 1470856430, "post_id": 38881732, "comment_id": 65124518, "body": "<code>re.sub</code> is <b>not</b> deprecated. Only specific replacement syntax is."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1470856522, "post_id": 38881732, "comment_id": 65124558, "body": "Are you getting a warning? Then please share the code that generated that warning. If not, you have nothing to worry about."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5164080"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1470856546, "post_id": 38881732, "comment_id": 65124572, "body": "@MartijnPieters oh, I misread this. Thanks. UPD. I don&#39;t get any warnings. Just started with docs."}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1470860107, "post_id": 38881732, "comment_id": 65126464, "body": "I also tried it and did not get any warnings, but I added more examples to my answer."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5164080"}, "edited": false, "score": 0, "creation_date": 1470856744, "post_id": 38881783, "comment_id": 65124690, "body": "Thank you for the explanation. Such a dumb question."}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1470856836, "post_id": 38881783, "comment_id": 65124737, "body": "Well, the <code>re.sub</code> has been bugging for a long time, it is really a great change that came with Python 3.5. As for the unknown escape sequences, almost every Python regex SO (good) answer states that it is best practice to use <i>raw string literals</i> to define regex patterns. Now, it will be supported by these warnings."}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1470856978, "post_id": 38881783, "comment_id": 65124815, "body": "Rather than describe the <code>re.sub</code> issue here, I hope the link to one of my answers will provide extensive reference on that issue that will remain in Python 2.x."}, {"owner": {"reputation": 68253, "user_id": 20938, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CuXSm.jpg?s=128&g=1", "display_name": "Alan Moore", "link": "https://stackoverflow.com/users/20938/alan-moore"}, "edited": false, "score": 0, "creation_date": 1470857347, "post_id": 38881783, "comment_id": 65125012, "body": "Python&#39;s too-forgiving string literals have always bugged me, but that&#39;s not what the warning is about.  It&#39;s referring to unknown <i>regex</i> escapes, like <code>\\j</code>.  Python has always ignored the backslash, which is arguably wrong and definitely inconsistent with other flavors."}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 68253, "user_id": 20938, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CuXSm.jpg?s=128&g=1", "display_name": "Alan Moore", "link": "https://stackoverflow.com/users/20938/alan-moore"}, "edited": false, "score": 0, "creation_date": 1470859504, "post_id": 38881783, "comment_id": 65126121, "body": "@AlanMoore: I see, I fixed that and updated with more illustrations."}], "tags": [], "owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": false, "score": 1, "last_activity_date": 1470859314, "last_edit_date": 1495541822, "creation_date": 1470856540, "answer_id": 38881783, "question_id": 38881732, "link": "https://stackoverflow.com/questions/38881732/re-sub-documentation-misunderstanding/38881783#38881783", "title": "re.sub() documentation misunderstanding", "body": "<p>The two entries are not related, and <a href=\"https://docs.python.org/3/library/re.html#re.sub\" rel=\"nofollow noreferrer\"><strong><code>re.sub</code></strong></a> will  <em>not</em> be deprecated.</p>\n\n<p>In Python version earlier than 3.5 <code>re.sub</code> failed if a backreference was used to a capturing group that did not participate in the match. See <a href=\"https://stackoverflow.com/a/35516425/3832970\"><strong>Empty string instead of unmatched group error</strong></a> SO question.</p>\n\n<p>An <a href=\"http://ideone.com/UVzXOQ\" rel=\"nofollow noreferrer\">example</a> where the failure occurred:</p>\n\n<pre><code>import re\nold = 'regexregex'\nnew = re.sub(r'regex(group)?regex', r'something\\1something', old)\nprint(new) # =&gt; fail as there is no \"group\" in between \"regex\" and \"regex\" in \"regexregex\"\n#    and Group 1 was not initialized with an empty string, i.e. remains null\n</code></pre>\n\n<p>As for the second one, it only says that there will be a warning (and later forbidden) if you use an <em>unknown for a regex engine</em> literal backslash followed with an ASCII character. The backslash was just ignored in them before, in Python 2.x through 3.5, <code>print(re.sub(r'\\j', '', 'joy'))</code> <a href=\"http://ideone.com/gAF65v\" rel=\"nofollow noreferrer\">prints <code>oy</code></a>. So, these will be forbidden in Python 3.6.</p>\n"}, {"comments": [{"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1470860423, "post_id": 38881823, "comment_id": 65126616, "body": "A <code>\\digit</code> is not an <i>escape sequence</i>, it is a backreference consisting of a literal <code>\\</code> + a <i>number</i> (there are groups with IDs more than <code>9</code>)."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1470863573, "post_id": 38881823, "comment_id": 65128125, "body": "@Wiktor: right, but it is still an escape sequence, one that <i>signifies</i> a backreference. Just like <code>\\n</code> is an escape sequence that signifies a newline."}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1470863723, "post_id": 38881823, "comment_id": 65128202, "body": "The <code>&quot;\\n&quot;</code> is an escape sequence, but <code>r&quot;\\n&quot;</code> is not an escape sequence, it is just a combination of <code>\\</code> and <code>n</code> - I doubt any regex reference refers to them (and <code>\\w</code>, <code>\\d</code>, <code>\\S</code>, etc.) as <i>escape sequences</i>."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1470863907, "post_id": 38881823, "comment_id": 65128291, "body": "@WiktorStribi\u017cew the regex engine still interprets the <code>\\n</code> combination as special. You match a literal newline character with them."}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1470864323, "post_id": 38881823, "comment_id": 65128510, "body": "Right, I just would not call it an escape sequence. Maybe I am too used to Microsoft terminology, where <i>escape sequence</i> refers to the string literals <code>\\n</code>, <code>\\r</code>, <code>\\f</code>, <code>\\a</code>, etc."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1470867749, "post_id": 38881823, "comment_id": 65129763, "body": "@WiktorStribi\u017cew it&#39;s a generic term that refers to the technique of flagging a change in meaning from the norm. They are not limited to string literals; switching terminal display modes and colours also use escape sequences, as do modem commands, and many more applications. See Wikipedia: <a href=\"https://en.wikipedia.org/wiki/Escape_sequence\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Escape_sequence</a>"}], "tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 3, "last_activity_date": 1470863216, "last_edit_date": 1470863216, "creation_date": 1470856670, "answer_id": 38881823, "question_id": 38881732, "link": "https://stackoverflow.com/questions/38881732/re-sub-documentation-misunderstanding/38881823#38881823", "title": "re.sub() documentation misunderstanding", "body": "<p>You misunderstand the documentation. The <code>re.sub()</code> function is <strong>not deprecated</strong>. The deprecation warning concerns <em>specific syntax</em>.</p>\n\n<p>Earlier in the <a href=\"https://docs.python.org/3/library/re.html#re.sub\" rel=\"nofollow\"><code>re.sub()</code> documentation</a> you'll find this:</p>\n\n<blockquote>\n  <p>Unknown escapes such as <code>\\&amp;</code> are left alone.</p>\n</blockquote>\n\n<p>If you used and <em>unknown</em> escape with an <em>ASCII letter</em> the escape will no longer be ignored, you'll get a warning instead. This applies both to <code>re.sub()</code> replacement patterns <em>and</em> to the regular expression patterns. The same warning is placed in the section on regex pattern syntax.</p>\n\n<p>The <em>Changed in version 3.5</em> line also concerns how <code>re.sub()</code> works. Rather than raise an exception when there is no matching group for a <code>\\number</code> backreference, an empty string is inserted at that location.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5164080"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1353, "favorite_count": 0, "accepted_answer_id": 38881823, "answer_count": 2, "score": 1, "last_activity_date": 1470863216, "creation_date": 1470856339, "last_edit_date": 1470857006, "question_id": 38881732, "link": "https://stackoverflow.com/questions/38881732/re-sub-documentation-misunderstanding", "title": "re.sub() documentation misunderstanding", "body": "<p>I've just started learning regular expressions and the documentation for  <code>re.sub()</code> states:</p>\n\n<blockquote>\n  <p><strong>Changed in version 3.5</strong>: Unmatched groups are replaced with an empty\n  string.</p>\n  \n  <p><strong>Deprecated since version 3.5, will be removed in version 3.6</strong>: Unknown\n  escapes consist of '\\' and ASCII letter now raise a deprecation\n  warning and will be forbidden in Python 3.6.</p>\n</blockquote>\n\n<p>Is re.sub() deprecated? What should I use then?</p>\n"}, {"tags": ["python", "pandas", "dictionary", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1470856455, "post_id": 38881727, "comment_id": 65124532, "body": "i like your version"}, {"owner": {"reputation": 33, "user_id": 4565509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dfc312ee918a03545ac6e8945b29a64?s=128&d=identicon&r=PG&f=1", "display_name": "RexIncognito", "link": "https://stackoverflow.com/users/4565509/rexincognito"}, "edited": false, "score": 0, "creation_date": 1470859987, "post_id": 38881727, "comment_id": 65126398, "body": "Excellent! I didn&#39;t think <code>apply</code> function works as index selector to the dataframe. Thanks, @piRSquared!"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1564972242, "post_id": 38881727, "comment_id": 101191069, "body": "I don\u2019t understand your question. Consider asking a new question."}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 4, "last_activity_date": 1470856556, "last_edit_date": 1470856556, "creation_date": 1470856313, "answer_id": 38881727, "question_id": 38881679, "link": "https://stackoverflow.com/questions/38881679/group-pandas-dataframe-by-a-nested-dictionary-key/38881727#38881727", "title": "Group pandas dataframe by a nested dictionary key", "body": "<p><strong><em>Option 1</em></strong></p>\n\n<pre><code>df.groupby(df.version.apply(lambda x: x['major'])).size()\n\nversion\n7    2\n8    1\ndtype: int64\n</code></pre>\n\n<hr>\n\n<pre><code>df.groupby(df.version.apply(lambda x: x['major']))[['a', 'b']].sum()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/SNnuY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SNnuY.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong><em>Option 2</em></strong></p>\n\n<pre><code>df.groupby(df.version.apply(pd.Series).major).size()\n\nmajor\n7    2\n8    1\ndtype: int64\n</code></pre>\n\n<hr>\n\n<pre><code>df.groupby(df.version.apply(pd.Series).major)[['a', 'b']].sum()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/eOpaW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eOpaW.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 1, "creation_date": 1470856753, "post_id": 38881741, "comment_id": 65124696, "body": "I&#39;ve never seen <code>assign</code> before.  I&#39;ve learned something new today."}, {"owner": {"reputation": 33, "user_id": 4565509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dfc312ee918a03545ac6e8945b29a64?s=128&d=identicon&r=PG&f=1", "display_name": "RexIncognito", "link": "https://stackoverflow.com/users/4565509/rexincognito"}, "edited": false, "score": 0, "creation_date": 1470857278, "post_id": 38881741, "comment_id": 65124976, "body": "Yeah, <code>assign</code> would have saved me so many <code>concat</code> and <code>merge</code>."}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 2, "last_activity_date": 1470856380, "creation_date": 1470856380, "answer_id": 38881741, "question_id": 38881679, "link": "https://stackoverflow.com/questions/38881679/group-pandas-dataframe-by-a-nested-dictionary-key/38881741#38881741", "title": "Group pandas dataframe by a nested dictionary key", "body": "<p>you can do it this way:</p>\n\n<pre><code>In [15]: df.assign(major=df.version.apply(pd.Series).major).groupby('major').sum()\nOut[15]:\n       a   b\nmajor\n7      4  10\n8      2   5\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 4565509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dfc312ee918a03545ac6e8945b29a64?s=128&d=identicon&r=PG&f=1", "display_name": "RexIncognito", "link": "https://stackoverflow.com/users/4565509/rexincognito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 763, "favorite_count": 0, "accepted_answer_id": 38881727, "answer_count": 2, "score": 3, "last_activity_date": 1470856556, "creation_date": 1470856121, "question_id": 38881679, "link": "https://stackoverflow.com/questions/38881679/group-pandas-dataframe-by-a-nested-dictionary-key", "title": "Group pandas dataframe by a nested dictionary key", "body": "<p>I have a pandas dataframe where one of the columns is dictionary type. This is an example dataframe:</p>\n\n<pre><code>import pandas as pd\ndf = pd.DataFrame({'a': [1,2,3], \n                   'b': [4,5,6], \n                   'version': [{'major': 7, 'minor':1}, \n                               {'major':8, 'minor': 5},\n                               {'major':7, 'minor':2}] })\n</code></pre>\n\n<p>df:</p>\n\n<pre><code>   a  b                   version\n0  1  4  {'minor': 1, 'major': 7}\n1  2  5  {'minor': 5, 'major': 8}\n2  3  6  {'minor': 2, 'major': 7}\n</code></pre>\n\n<p>I am looking for a way to group the dataframe by one of that dictionary key; in this case to group the <strong>df</strong> dataframe by the <strong>major</strong> key in <strong>version</strong> label. </p>\n\n<p>I have tried a few different stuff, from passing the dictionary key to dataframe groupby function, `df.groupby(['version']['major']), which doesn't work since <strong>major</strong> is not part of dataframe label, to assigning <strong>version</strong> to the dataframe index, but nothing works so far. I'm also trying to flatten the dictionaries as additional columns in the dataframe itself, but this seems to have its own issue.</p>\n\n<p>Any idea?</p>\n\n<p>P.S. Sorry about formatting, it's my first stackoverflow question.</p>\n"}, {"tags": ["python", "sql", "postgresql", "pandas", "sqlalchemy"], "comments": [{"owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "edited": false, "score": 0, "creation_date": 1470856464, "post_id": 38881676, "comment_id": 65124538, "body": "You have to pass in lists of parameter placeholders."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1470856760, "post_id": 38881676, "comment_id": 65124699, "body": "You want the two <code>%s</code> parameters to refer to <i>the same</i> list of values?"}, {"owner": {"reputation": 1331, "user_id": 3509416, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5289e35d10a71dcee399b70bcb6a674c?s=128&d=identicon&r=PG&f=1", "display_name": "hselbie", "link": "https://stackoverflow.com/users/3509416/hselbie"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1470856862, "post_id": 38881676, "comment_id": 65124748, "body": "@wildplasser, yes the two <code>%s</code> parameters referring to the same list"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1470857132, "post_id": 38881676, "comment_id": 65124892, "body": "You don&#39;t need the subqueries, Just a plain (anti-) join will do. BTW: your question is about passing a list to a prepared statement. Using it twice is only a detail."}], "answers": [{"tags": [], "owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "is_accepted": false, "score": 1, "last_activity_date": 1470859942, "last_edit_date": 1470859942, "creation_date": 1470857506, "answer_id": 38882015, "question_id": 38881676, "link": "https://stackoverflow.com/questions/38881676/multiple-insertion-of-one-value-in-sqlalchemy-statement-to-pandas/38882015#38882015", "title": "Multiple insertion of one value in sqlalchemy statement to pandas", "body": "<ul>\n<li><p>You dont need the subqueries, just join the table with itself:</p>\n\n<p><code>SELECT a.*, b.* -- or whatwever\n        , st_distance(a.the_geom, b.the_geom, true) AS dist\n        FROM ztable a\n        JOIN ztable b ON a.nid &lt; b.nid \n        WHERE a.id IN (%s)\n          AND b.id IN (%s)\n        ;</code></p></li>\n<li><p>avoid repetition by using a CTE (this may be non-optimal, performance-wise)</p>\n\n<p><code>WITH zt AS (\n        SELECT * FROM ztable\n        WHERE id IN (%s)\n        )\nSELECT a.*, b.* -- or whatever\n        , st_distance(a.the_geom, b.the_geom, true) AS dist\n        FROM zt a\n        JOIN zt b ON a.nid &lt; b.nid \n        ;</code></p></li>\n<li><p>Performance-wise, I would just stick to the first version, and supply the list-argument twice. (or refer to it twice, using a FORMAT() construct)</p></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1470859320, "post_id": 38882461, "comment_id": 65126027, "body": "Could be a nice addition. (sorry, I dont know anything about ORMs, since they confuse me. and others ;-)"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1470859453, "post_id": 38882461, "comment_id": 65126088, "body": "@wildplasser, i hope you don&#39;t mind that i&#39;ve borrowed your SQL (i have already said &quot;thank you&quot; for that) ;)"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1470859756, "post_id": 38882461, "comment_id": 65126275, "body": "No, not at all. I like collaborative effort!"}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 0, "last_activity_date": 1470859874, "last_edit_date": 1495540858, "creation_date": 1470859132, "answer_id": 38882461, "question_id": 38881676, "link": "https://stackoverflow.com/questions/38881676/multiple-insertion-of-one-value-in-sqlalchemy-statement-to-pandas/38882461#38882461", "title": "Multiple insertion of one value in sqlalchemy statement to pandas", "body": "<p>first of all i would recommend you to use <a href=\"https://stackoverflow.com/a/38882015/5741205\">updated SQL from @wildplasser</a> - it's much better and more efficient way to do that.</p>\n\n<p>now you can do the following:</p>\n\n<pre><code>sql_ = \"\"\"\\\nWITH zt AS (\n        SELECT * FROM ztable\n        WHERE id IN ({})\n        )\nSELECT a.*, b.* -- or whatever\n        , st_distance(a.the_geom, b.the_geom, true) AS dist\n        FROM zt a\n        JOIN zt b ON a.nid &lt; b.nid \n\"\"\"\nsampList = (14070,11184)\n\nsql = sql_.format(','.join(['?' for x in sampList]))\n\ndf = pd.read_sql(sql, con=conn, params=sampList)\n</code></pre>\n\n<p>dynamically generated SQL with parameters (AKA: prepared statements, bind variables, etc.):</p>\n\n<pre><code>In [27]: print(sql)\nWITH zt AS (\n        SELECT * FROM ztable\n        WHERE id IN (?,?)\n        )\nSELECT a.*, b.* -- or whatever\n        , st_distance(a.the_geom, b.the_geom, true) AS dist\n        FROM zt a\n        JOIN zt b ON a.nid &lt; b.nid\n</code></pre>\n"}], "owner": {"reputation": 1331, "user_id": 3509416, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5289e35d10a71dcee399b70bcb6a674c?s=128&d=identicon&r=PG&f=1", "display_name": "hselbie", "link": "https://stackoverflow.com/users/3509416/hselbie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1470859942, "creation_date": 1470856107, "question_id": 38881676, "link": "https://stackoverflow.com/questions/38881676/multiple-insertion-of-one-value-in-sqlalchemy-statement-to-pandas", "title": "Multiple insertion of one value in sqlalchemy statement to pandas", "body": "<p>I have constructed a sql clause where I reference the same table as <code>a</code> and <code>b</code> to compare the two geometries as a postgis command. </p>\n\n<p>I would like to pass a value into the sql statement using the <code>%s</code> operator and read the result into a pandas dataframe using <code>to_sql, params kwargs</code>. Currently my code will allow for one value to be passed to one <code>%s</code> but i'm looking for multiple insertions of the same list of values.</p>\n\n<p>I'm connecting to a postgresql database using psycopg2.</p>\n\n<p>Simplified code is below</p>\n\n<pre><code>sql = \"\"\"\nSELECT\n    st_distance(a.the_geom, b.the_geom, true) AS dist\n    FROM\n        (SELECT\n           table.*\n           FROM table\n           WHERE id in %s) AS a,\n\n        (SELECT\n           table.*\n           FROM table\n           WHERE id in %s) AS b\nWHERE a.nid &lt;&gt; b.nid \"\"\"\n\nsampList = (14070,11184)\ndf = pd.read_sql(sql, con=conn, params = [sampList])\n</code></pre>\n\n<p>Basically i'm looking to replace both <code>%s</code> with the sampList value in both places. The code as written will only replace the first value indicating <code>': list index out of range</code>. If I adjust to having one <code>%s</code> and replacing the second in statement with numbers the code runs, but ultimately I would like away to repeat those values.</p>\n"}]