[{"tags": ["python", "coinbase-api", "gdax-api"], "answers": [{"tags": [], "owner": {"reputation": 1850, "user_id": 552621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c20d79c6ba506fbed052ef164ffa225?s=128&d=identicon&r=PG", "display_name": "Nour Wolf", "link": "https://stackoverflow.com/users/552621/nour-wolf"}, "is_accepted": false, "score": 1, "last_activity_date": 1517086370, "creation_date": 1517086370, "answer_id": 48480447, "question_id": 47999982, "link": "https://stackoverflow.com/questions/47999982/websocket-to-useable-data-in-python-get-price-from-gdax-websocket-feed/48480447#48480447", "title": "Websocket to useable data in Python - get price from GDAX websocket feed", "body": "<p>Pulling is discouraged when you want to have real-time updates. In that case, it is recommended to use Web Sockets. In your case, however, running the code once and exiting, it is fine to use the pull endpoint.</p>\n\n<p>To answer your question anyway. <code>on_message</code>'s first argument is the <code>WebSocketApp</code> you can simply add this line to close it after receiving the first message.</p>\n\n<pre><code>def on_message(ws, message):\n    \"\"\"Callback executed when a message comes.\n    Positional argument:\n    message -- The message itself (string)\n    \"\"\"\n    pprint(loads(message))\n    ws.close()\n</code></pre>\n\n<h2>Tip</h2>\n\n<p>Requests library has built-in <code>.json()</code> that you can use directly on the <code>.get()</code> return</p>\n\n<pre><code>import requests\nrawticker = requests.get('https://api.gdax.com/products/BTC-EUR/ticker').json()\nprice = rawticker['price']\nprint(price)\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 2444068, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a36c8db7f6e4998a3f3ab0c822d44370?s=128&d=identicon&r=PG", "display_name": "Nazeer Bhamji", "link": "https://stackoverflow.com/users/2444068/nazeer-bhamji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1722, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1517086370, "creation_date": 1514419155, "last_edit_date": 1514422000, "question_id": 47999982, "link": "https://stackoverflow.com/questions/47999982/websocket-to-useable-data-in-python-get-price-from-gdax-websocket-feed", "title": "Websocket to useable data in Python - get price from GDAX websocket feed", "body": "<p>I am trying to get the last price data to use which is easy enough using polling on /ticker endpoint i.e.</p>\n\n<pre><code>rawticker = requests.get('https://api.gdax.com/products/BTC-EUR/ticker')\njson_data = json.loads(rawticker.text)\nprice = json_data['price']\n</code></pre>\n\n<p>but the GDAX API discourages polling. How could I get the same information using websocket. How could I get the following code to run just once and then extract the price information. </p>\n\n<pre><code>from websocket import WebSocketApp\nfrom json import dumps, loads\nfrom pprint import pprint\n\nURL = \"wss://ws-feed.gdax.com\"\n\ndef on_message(_, message):\n    \"\"\"Callback executed when a message comes.\n    Positional argument:\n    message -- The message itself (string)\n    \"\"\"\n    pprint(loads(message))\n    print\n\ndef on_open(socket):\n    \"\"\"Callback executed at socket opening.\n    Keyword argument:\n    socket -- The websocket itself\n    \"\"\"\n    params = {\n        \"type\": \"subscribe\",\n        \"channels\": [{\"name\": \"ticker\", \"product_ids\": [\"BTC-EUR\"]}]\n    }\n    socket.send(dumps(params))\n\ndef main():\n    \"\"\"Main function.\"\"\"\n    ws = WebSocketApp(URL, on_open=on_open, on_message=on_message)\n    ws.run_forever()\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>Thanks for any help.</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1514418704, "post_id": 47999934, "comment_id": 82968423, "body": "You can create a wrapper through the file handle."}, {"owner": {"reputation": 18362, "user_id": 1767754, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/00ba1fd17dc5970a0096cc4d7a932536?s=128&d=identicon&r=PG", "display_name": "user1767754", "link": "https://stackoverflow.com/users/1767754/user1767754"}, "edited": false, "score": 4, "creation_date": 1514419027, "post_id": 47999934, "comment_id": 82968483, "body": "Do proper logging by using the <code>logging</code> module, then you can have 2 streamhandlers, one standard output stream the other one can be a file."}, {"owner": {"reputation": 1285, "user_id": 8955448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDG4Z.jpg?s=128&g=1", "display_name": "Galen", "link": "https://stackoverflow.com/users/8955448/galen"}, "reply_to_user": {"reputation": 18362, "user_id": 1767754, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/00ba1fd17dc5970a0096cc4d7a932536?s=128&d=identicon&r=PG", "display_name": "user1767754", "link": "https://stackoverflow.com/users/1767754/user1767754"}, "edited": false, "score": 0, "creation_date": 1514419217, "post_id": 47999934, "comment_id": 82968528, "body": "You can conditionally open <a href=\"https://docs.python.org/2/library/os.html#os.devnull\" rel=\"nofollow noreferrer\"><code>os.devnull</code></a> as a stopgap. However, as @user1767754 suggested, I would suggest looking at <a href=\"https://docs.python.org/2/library/logging.html\" rel=\"nofollow noreferrer\"><code>logging</code></a>."}, {"owner": {"reputation": 6386, "user_id": 2950593, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/c2a48d4e4bc7b3acde3023813cec112b?s=128&d=identicon&r=PG&f=1", "display_name": "user2950593", "link": "https://stackoverflow.com/users/2950593/user2950593"}, "reply_to_user": {"reputation": 1285, "user_id": 8955448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDG4Z.jpg?s=128&g=1", "display_name": "Galen", "link": "https://stackoverflow.com/users/8955448/galen"}, "edited": false, "score": 0, "creation_date": 1514421671, "post_id": 47999934, "comment_id": 82969075, "body": "@Galen can you show me an example of os.devnull?"}, {"owner": {"reputation": 6386, "user_id": 2950593, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/c2a48d4e4bc7b3acde3023813cec112b?s=128&d=identicon&r=PG&f=1", "display_name": "user2950593", "link": "https://stackoverflow.com/users/2950593/user2950593"}, "reply_to_user": {"reputation": 1285, "user_id": 8955448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDG4Z.jpg?s=128&g=1", "display_name": "Galen", "link": "https://stackoverflow.com/users/8955448/galen"}, "edited": false, "score": 0, "creation_date": 1514421710, "post_id": 47999934, "comment_id": 82969086, "body": "@Galen I guess I got it: I just set file name to &#39;&#39;/dev/null&#39;"}, {"owner": {"reputation": 1285, "user_id": 8955448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDG4Z.jpg?s=128&g=1", "display_name": "Galen", "link": "https://stackoverflow.com/users/8955448/galen"}, "edited": false, "score": 0, "creation_date": 1514423587, "post_id": 47999934, "comment_id": 82969432, "body": "@user2950593 Look at the <a href=\"https://docs.python.org/2/library/os.html#os.devnull\" rel=\"nofollow noreferrer\">documentation</a>. Use <code>os.devnull</code> as the path. It will be more portable."}], "owner": {"reputation": 6386, "user_id": 2950593, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/c2a48d4e4bc7b3acde3023813cec112b?s=128&d=identicon&r=PG&f=1", "display_name": "user2950593", "link": "https://stackoverflow.com/users/2950593/user2950593"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1514418615, "creation_date": 1514418615, "question_id": 47999934, "link": "https://stackoverflow.com/questions/47999934/optional-logging-to-txt-file", "title": "Optional logging to txt file", "body": "<p>I am logging to txt file like this:   </p>\n\n<pre><code>with open('volumes.txt', 'a') as out:\n            out.write('something1\\n')\n            somefunctuion(someparams, out)\n\n\n\ndef somefunction(self, someparams, out):\n    out.write('something2\\n')\n    anotherfunction(anotherparams, out)\n\ndef anotherfunction(self, anotherparams, out):\n    out.write('something3\\n')\n    otherotherfunction(params, out)\n</code></pre>\n\n<p>volumes.txt:</p>\n\n<pre><code>something1 \nsomething2 \nsomething3\n .... etc\n</code></pre>\n\n<p>As you can see, I have several nested functions and they all log to one file using <code>out.write()</code> method, this log file I pass as parameter. I feel like my architecture is not as good as wanted it to be. But right now I don't have time for refactoring, I need just a hot fix:\nI need some flag to enable or disable logging.</p>\n\n<p>How can I do this, without using <code>if loggerOnFlag: out.write()</code> construction every time? ( I will have tooo many ifs otherwise)</p>\n"}, {"tags": ["python", "django", "sockets", "gunicorn"], "comments": [{"owner": {"reputation": 63, "user_id": 1534982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/620b529ea865bb8bb60aedf49ecba4ea?s=128&d=identicon&r=PG", "display_name": "Minuteman", "link": "https://stackoverflow.com/users/1534982/minuteman"}, "edited": false, "score": 1, "creation_date": 1514427956, "post_id": 47999929, "comment_id": 82970245, "body": "Update: I can run Gunicorn by appending <i>sudo</i> in front of the script. Any idea? <i>sudo</i> /home/myuser/myvenv/bin/gunicorn myproject.wsgi:application --name myproject --workers 3 --user=myuser --group=www-data --bind=unix:/home/myuser/myvenv/run/gunicorn.sock"}, {"owner": {"reputation": 903, "user_id": 6823310, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OVnrX3VtGiA/AAAAAAAAAAI/AAAAAAAAABA/1iuH3k_jRbE/photo.jpg?sz=128", "display_name": "Santiago M. Quintero", "link": "https://stackoverflow.com/users/6823310/santiago-m-quintero"}, "edited": false, "score": 0, "creation_date": 1540826505, "post_id": 47999929, "comment_id": 92997005, "body": "What happens if you disable selinux?"}], "owner": {"reputation": 63, "user_id": 1534982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/620b529ea865bb8bb60aedf49ecba4ea?s=128&d=identicon&r=PG", "display_name": "Minuteman", "link": "https://stackoverflow.com/users/1534982/minuteman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1338, "favorite_count": 1, "answer_count": 0, "score": 6, "last_activity_date": 1514418953, "creation_date": 1514418591, "last_edit_date": 1514418953, "question_id": 47999929, "link": "https://stackoverflow.com/questions/47999929/django-gunicorn-cant-connect-to-socket-as-user", "title": "Django gunicorn Can&#39;t connect to socket as user", "body": "<p>Gunicorn shows me socket failed to connect when run as user, but when run as root it worked flawlessly. Below is the command.</p>\n\n<pre><code>cd /home/myuser/web/myproject \n\nsource /home/myuser/myvenv/bin/activate\n\n/home/myuser/myvenv/bin/gunicorn myproject.wsgi:application --name myproject --workers 3 --user=myuser --group=www-data --bind=unix:/home/myuser/myvenv/run/gunicorn.sock\n</code></pre>\n\n<p>where </p>\n\n<ul>\n<li><p>Django project path: <code>/home/myuser/web/myproject</code> (which contains manage.py)</p></li>\n<li><p>Python virtualenv path: <code>/home/myuser/myvenv</code></p></li>\n</ul>\n\n<p>When run as root:</p>\n\n<pre><code>[2017-12-27 23:25:43 +0000] [24336] [INFO] Starting gunicorn 19.7.1\n[2017-12-27 23:25:43 +0000] [24336] [INFO] Listening at: unix:/home/myuser/myvenv/run/gunicorn.sock (24336)\n[2017-12-27 23:25:43 +0000] [24336] [INFO] Using worker: sync\n[2017-12-27 23:25:43 +0000] [24339] [INFO] Booting worker with pid: 24339\n[2017-12-27 23:25:43 +0000] [24340] [INFO] Booting worker with pid: 24340\n[2017-12-27 23:25:44 +0000] [24377] [INFO] Booting worker with pid: 24377\n</code></pre>\n\n<p>I killed the process, and made sure it does not exist in <code>ps -A | grep gunicorn</code>. Then I tried to run same command as <code>myuser</code>. Below is the error when I run the command.</p>\n\n<pre><code>[2017-12-27 23:21:30 +0000] [23965] [INFO] Starting gunicorn 19.7.1\n[2017-12-27 23:21:30 +0000] [23965] [ERROR] Retrying in 1 second.\n[2017-12-27 23:21:31 +0000] [23965] [ERROR] Retrying in 1 second.\n[2017-12-27 23:21:32 +0000] [23965] [ERROR] Retrying in 1 second.\n[2017-12-27 23:21:33 +0000] [23965] [ERROR] Retrying in 1 second.\n[2017-12-27 23:21:34 +0000] [23965] [ERROR] Retrying in 1 second.\n[2017-12-27 23:21:35 +0000] [23965] [ERROR] Can't connect to \n/home/myuser/myvenv/run/gunicorn.sock\n</code></pre>\n\n<p>Things I have done:</p>\n\n<ul>\n<li><p>Installed all dependencies.</p></li>\n<li><p>Made sure all folders exists with correct permission to <code>myuser</code>.</p></li>\n<li><p><code>chmod 777</code> to both Django project and Python virtualenv path.</p></li>\n<li><p><code>chown myuser:www-data</code> to both Django project and Python virtualenv path.</p></li>\n<li><p>used other path than <code>/home/myuser/myvenv/run/gunicorn.sock</code> like <code>/home/myuser/myvenv/run/myproject.sock</code> or <code>/home/myuser/myvenv/socket/gunicorn.sock</code> \n<code>/tmp/gunicorn.sock</code> in gunicorn's bind parameter.</p></li>\n</ul>\n"}, {"tags": ["python", "python-3.x", "python-3.6"], "comments": [{"owner": {"reputation": 18362, "user_id": 1767754, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/00ba1fd17dc5970a0096cc4d7a932536?s=128&d=identicon&r=PG", "display_name": "user1767754", "link": "https://stackoverflow.com/users/1767754/user1767754"}, "edited": false, "score": 1, "creation_date": 1514418268, "post_id": 47999883, "comment_id": 82968333, "body": "Break down your code to the core, where you do the comparision, that&#39;s why you are fonfused."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1514418549, "post_id": 47999883, "comment_id": 82968386, "body": "Why don&#39;t you match <code>1001</code> with <code>1002</code>? <code>1001</code> with <code>1006</code>, <code>1002</code> with <code>1006</code>? These all have one match: the emoty string."}], "answers": [{"comments": [{"owner": {"reputation": 2152, "user_id": 1306026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d117a6182330066d4771187f93e7e98e?s=128&d=identicon&r=PG", "display_name": "Joshua R.", "link": "https://stackoverflow.com/users/1306026/joshua-r"}, "edited": false, "score": 0, "creation_date": 1514420538, "post_id": 47999991, "comment_id": 82968836, "body": "I like this solution better than element-by-element solutions, but you can do it without including md5.  Python has built-in hashing for immutable types.  You can just <code>hash(tuple(&lt;your list&gt;))</code>.  If you want list comparisons to be independent of order, use <code>hash(tuple(sorted(&lt;your list&gt;)))</code>."}, {"owner": {"reputation": 2152, "user_id": 1306026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d117a6182330066d4771187f93e7e98e?s=128&d=identicon&r=PG", "display_name": "Joshua R.", "link": "https://stackoverflow.com/users/1306026/joshua-r"}, "edited": false, "score": 0, "creation_date": 1514421007, "post_id": 47999991, "comment_id": 82968934, "body": "I should add that the built-in hash function only guarantees consistent values within a running kernel session.  If you need to <i>save</i> hashes, e.g. to disk, for comparison later, then md5 is a better choice."}], "tags": [], "owner": {"reputation": 45, "user_id": 5654644, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5d01593bfc67aa8a430a8d10fecfc66c?s=128&d=identicon&r=PG", "display_name": "Guy Shilman", "link": "https://stackoverflow.com/users/5654644/guy-shilman"}, "is_accepted": false, "score": 1, "last_activity_date": 1514419201, "creation_date": 1514419201, "answer_id": 47999991, "question_id": 47999883, "link": "https://stackoverflow.com/questions/47999883/comparing-two-lists-with-strings-and-sublists-in-them/47999991#47999991", "title": "Comparing two Lists with Strings and Sublists in them", "body": "<p>You can calculate a md5 hash for every list and compare them, just like a checksum.</p>\n\n<p><code>node_md5hash = hashlib.md5(bencode.bencode(node)).hexdigest()\noutput-list_md5hash = hashlib.md5(bencode.bencode(output-list)).hexdigest()\n</code>\nAnd it would give you an md5 hash for node and for output-list and if the hashes are the same, so are their values.</p>\n\n<p><strong>You will need to import the hashlib library and the bencode library (you will probably have to pip install bencode).</strong></p>\n"}, {"tags": [], "owner": {"reputation": 638, "user_id": 2116081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8063968396b1387924cee71c29ef4d6?s=128&d=identicon&r=PG", "display_name": "SigmaPiEpsilon", "link": "https://stackoverflow.com/users/2116081/sigmapiepsilon"}, "is_accepted": true, "score": 1, "last_activity_date": 1514442369, "last_edit_date": 1514442369, "creation_date": 1514419827, "answer_id": 48000065, "question_id": 47999883, "link": "https://stackoverflow.com/questions/47999883/comparing-two-lists-with-strings-and-sublists-in-them/48000065#48000065", "title": "Comparing two Lists with Strings and Sublists in them", "body": "<p>Here is the simplest way if the order in the matching list is important.</p>\n\n<pre><code>&gt;&gt;&gt; out  = []\n&gt;&gt;&gt; for ii, elem in enumerate(node[:-1]):                                                                                                            \n...     for jj in range(ii + 1, len(node)):                                                                                                          \n...         common = [subelem for subelem in elem[-1] if subelem in node[jj][-1]]\n...         if len(common) &gt; 0 and common != ['']:\n...             out.append([elem[0], node[jj][0], common])                                                                                       \n... \n&gt;&gt;&gt; for elem in out:\n...     print elem\n... \n['1003', '1004', ['Lion', 'Leopard', 'Panda']]\n['1003', '1005', ['Lion', 'Panda']]\n['1004', '1005', ['Lion', 'Panda', 'Tiger']]\n['1004', '1007', ['Tiger']]\n['1005', '1007', ['Cheetah', 'Goat', 'Tiger']]\n</code></pre>\n\n<p>If order is not important and the lists are big use <code>set intersection</code> for the first line in the double loop as below</p>\n\n<pre><code>common = list(set(elem[-1]).intersection(set(node[jj][-1])))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3202, "user_id": 3358074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vnKYD.png?s=128&g=1", "display_name": "dmitryro", "link": "https://stackoverflow.com/users/3358074/dmitryro"}, "is_accepted": false, "score": 1, "last_activity_date": 1515368265, "creation_date": 1515368265, "answer_id": 48142582, "question_id": 47999883, "link": "https://stackoverflow.com/questions/47999883/comparing-two-lists-with-strings-and-sublists-in-them/48142582#48142582", "title": "Comparing two Lists with Strings and Sublists in them", "body": "<p>One more way to do it:</p>\n\n<pre><code>node = [['1001', '2008-01-06T02:12:13Z', ['']],\n        ['1002', '2008-01-06T02:13:55Z', ['']],\n        ['1003', '2008-01-06T02:13:00Z', ['Lion', 'Rhinoceros', 'Leopard', 'Panda']],\n        ['1004', '2008-01-06T02:15:20Z', ['Lion', 'Leopard', 'Eagle', 'Panda', 'Tiger']],\n        ['1005', '2008-01-06T02:15:48Z', ['Lion', 'Panda', 'Cheetah', 'Goat', 'Tiger']],\n        ['1006', '2008-01-06T02:13:30Z', ['']],\n        ['1007', '2008-01-06T02:13:38Z', ['Cheetah', 'Tiger', 'Goat']]]\n# Use this list for result\nresult = []\n\ndef city_exists(city, cities):\n    \"\"\" Just a helper to verify if city already used \"\"\"\n    for c in cities:\n        if c[1] == city:\n            return True\n    return False\n\n# And finally, iterate and add to the resulting list\nfor item in node:\n    for city in item[2]:\n        if not city_exists(city, result):\n            result.append([item[0], city])\n\n# Print out the result\nprint(result)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 49, "user_id": 4939983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35c0b72d901d8ac2e9171e76d2fe947c?s=128&d=identicon&r=PG&f=1", "display_name": "Shu ba", "link": "https://stackoverflow.com/users/4939983/shu-ba"}, "is_accepted": false, "score": 1, "last_activity_date": 1515424282, "last_edit_date": 1592644375, "creation_date": 1515371763, "answer_id": 48142931, "question_id": 47999883, "link": "https://stackoverflow.com/questions/47999883/comparing-two-lists-with-strings-and-sublists-in-them/48142931#48142931", "title": "Comparing two Lists with Strings and Sublists in them", "body": "<p>Looks like what you are looking for is itertools.combinations which comes with python</p>\n<pre><code>di={i[0]:set(i[2]) for i in node};outputlist=[]\nfor i,j in itertools.combinations(di.keys(),2):\n    union=list(di[i].intersection(di[j]))\n    if union and not union[0]=='':#makes sure it is not an empty set and that it does not contain only empty lists\n        outputlist.append([i,j,union])\n</code></pre>\n<p>You can even skip the di stage and jump to the combinations</p>\n<pre><code>outputlist=[]\nfor i,j in itertools.combinations(node,2):\n    union=list(set(i[2]).intersection(set(j[2])))\n    if union and not union[0]=='':#makes sure it is not an empty set and that it does not contain only empty lists\n        outputlist.append([i[0], j[0],union])\n</code></pre>\n<p>Also I Would recomend leaving the animals as a set and assigning an empty list as python empty list.</p>\n<h2>EDIT</h2>\n<p>If you stick to lists you might better use</p>\n<pre><code>union=filter(lambda x:x in i[2],j[2])\n</code></pre>\n<p>since type changing is a bit unefficient.</p>\n<h2>All comes down to</h2>\n<pre><code>import itertools    \noutput_list=filter(lambda x:x[2] and not x[2][0]=='',[[i[0],j[0],filter(lambda x:x in i[2],j[2])]for i,j in itertools.combinations(node,2)])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7745, "user_id": 3926995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2l63X.jpg?s=128&g=1", "display_name": "Chiheb Nexus", "link": "https://stackoverflow.com/users/3926995/chiheb-nexus"}, "is_accepted": false, "score": 1, "last_activity_date": 1600350151, "last_edit_date": 1600350151, "creation_date": 1515389080, "answer_id": 48144639, "question_id": 47999883, "link": "https://stackoverflow.com/questions/47999883/comparing-two-lists-with-strings-and-sublists-in-them/48144639#48144639", "title": "Comparing two Lists with Strings and Sublists in them", "body": "<p>I think the best approach to solve your question is by using <code>combinations</code> from <code>itertools</code> with an intersection between your lists converted into a dicts module like this example:</p>\n<pre><code>from itertools import combinations\n\ndef compare(node, grouping=2):\n    for elm1, elm2 in combinations(node, grouping):\n        condition = set(elm1[-1]) &amp; set(elm2[-1])\n        if bool(condition) and condition != {''}:\n            yield elm1[0], elm2[0], list(condition)\n\nnode = [['1001', '2008-01-06T02:12:13Z', ['']],\n        ['1002', '2008-01-06T02:13:55Z', ['']],\n        ['1003', '2008-01-06T02:13:00Z', ['Lion', 'Rhinoceros', 'Leopard', 'Panda']],\n        ['1004', '2008-01-06T02:15:20Z', ['Lion', 'Leopard', 'Eagle', 'Panda', 'Tiger']],\n        ['1005', '2008-01-06T02:15:48Z', ['Lion', 'Panda', 'Cheetah', 'Goat', 'Tiger']],\n        ['1006', '2008-01-06T02:13:30Z', ['']],\n        ['1007', '2008-01-06T02:13:38Z', ['Cheetah', 'Tiger', 'Goat']]]\n\nfinal = list(compare(node))\nprint(final)\n</code></pre>\n<p>Output:</p>\n<pre><code>[['1003', '1004', ['Lion', 'Leopard', 'Panda']],\n ['1003', '1005', ['Lion', 'Panda']],\n ['1004', '1005', ['Lion', 'Tiger', 'Panda']],\n ['1004', '1007', ['Tiger']],\n ['1005', '1007', ['Goat', 'Tiger', 'Cheetah']]]\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 5906581, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/PX4DJ.jpg?s=128&g=1", "display_name": "Hashmi", "link": "https://stackoverflow.com/users/5906581/hashmi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 1, "accepted_answer_id": 48000065, "answer_count": 5, "score": 0, "last_activity_date": 1600350151, "creation_date": 1514418098, "question_id": 47999883, "link": "https://stackoverflow.com/questions/47999883/comparing-two-lists-with-strings-and-sublists-in-them", "title": "Comparing two Lists with Strings and Sublists in them", "body": "<p>I am stuck in a situation where I have to compare a list of lists where each sublist contains two strings and a sub-sublist. I want to compare each sublist to next sublist and record their first string and the matching identifiers in the third item (sub-sublist). It looks a bit confusing. Here is the example:\nI have the following list of lists:</p>\n\n<pre><code>node = [['1001', '2008-01-06T02:12:13Z', ['']], \n        ['1002', '2008-01-06T02:13:55Z', ['']],  \n        ['1003', '2008-01-06T02:13:00Z', ['Lion', 'Rhinoceros', 'Leopard', 'Panda']], \n        ['1004', '2008-01-06T02:15:20Z', ['Lion', 'Leopard', 'Eagle', 'Panda', 'Tiger']], \n        ['1005', '2008-01-06T02:15:48Z', ['Lion', 'Panda', 'Cheetah', 'Goat', 'Tiger']], \n        ['1006', '2008-01-06T02:13:30Z', ['']], \n        ['1007', '2008-01-06T02:13:38Z', ['Cheetah', 'Tiger', 'Goat']]]\n</code></pre>\n\n<p>The first item of each sublist is an ID, second item is timestamp, and third item (sub-sublist) contains the members. I want to compare the members and if two sublists contain same members, I want to store them in a new list as follows along with their IDs.</p>\n\n<pre><code>output-list = [['1003', '1004', ['Lion', 'Leopard', 'Panda']], \n               ['1003', '1005', ['Lion', 'Panda']], \n               ['1004', '1005', ['Lion', 'Panda', 'Tiger']], \n               ['1004', '1007', ['Tiger']], \n               ['1005', '1007', ['Cheetah', 'Goat', 'Tiger']]]\n</code></pre>\n\n<p>My head is not getting around it how to make a double for loop or any other way of doing it. Can anyone help me here please? Sorry I cannot produce a trying code.</p>\n"}, {"tags": ["python", "web-scraping", "terminal", "scrapy", "scrapy-spider"], "answers": [{"comments": [{"owner": {"reputation": 408, "user_id": 3057550, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/b648cb25023f4dcac75940bf0c7bf12d?s=128&d=identicon&r=PG&f=1", "display_name": "Hunter", "link": "https://stackoverflow.com/users/3057550/hunter"}, "edited": false, "score": 0, "creation_date": 1514442023, "post_id": 48000149, "comment_id": 82973350, "body": "Thank you! I did what you said and it got rid of that error, but now I am getting one in the same place called &quot;NotImplementedError&quot;. What can I do about this?"}, {"owner": {"reputation": 408, "user_id": 3057550, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/b648cb25023f4dcac75940bf0c7bf12d?s=128&d=identicon&r=PG&f=1", "display_name": "Hunter", "link": "https://stackoverflow.com/users/3057550/hunter"}, "edited": false, "score": 0, "creation_date": 1514444071, "post_id": 48000149, "comment_id": 82974099, "body": "Never mind, after doing some searching I figured out how to fix that error and some others that I found. Thanks for helping with this one though!"}], "tags": [], "owner": {"reputation": 1880, "user_id": 3126085, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3d1b5320d5edffe38958e8ca1129ab32?s=128&d=identicon&r=PG&f=1", "display_name": "crookedleaf", "link": "https://stackoverflow.com/users/3126085/crookedleaf"}, "is_accepted": true, "score": 5, "last_activity_date": 1514420466, "creation_date": 1514420466, "answer_id": 48000149, "question_id": 47999832, "link": "https://stackoverflow.com/questions/47999832/scrapy-spider-not-saving-data/48000149#48000149", "title": "Scrapy Spider Not Saving Data", "body": "<p>you are getting <code>twisted.internet.error.DNSLookupError</code> messages in the log. looking at your <code>start_urls</code> list, the item starts with \"<a href=\"http://https://\" rel=\"noreferrer\">http://https://</a>\". change:</p>\n\n<pre><code>start_urls = ['http://https://scoreboard.12dt.com/scoreboard/khsaa/kybbk17/?id=51978/']\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>start_urls = ['https://scoreboard.12dt.com/scoreboard/khsaa/kybbk17/?id=51978/']\n</code></pre>\n"}], "owner": {"reputation": 408, "user_id": 3057550, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/b648cb25023f4dcac75940bf0c7bf12d?s=128&d=identicon&r=PG&f=1", "display_name": "Hunter", "link": "https://stackoverflow.com/users/3057550/hunter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 772, "favorite_count": 0, "accepted_answer_id": 48000149, "answer_count": 1, "score": 0, "last_activity_date": 1514420466, "creation_date": 1514417528, "question_id": 47999832, "link": "https://stackoverflow.com/questions/47999832/scrapy-spider-not-saving-data", "title": "Scrapy Spider Not Saving Data", "body": "<p>I am trying to save schedules of basketball teams to a CSV file using Scrapy. I have written the following code in these files:</p>\n\n<p><strong>settings.py</strong></p>\n\n<pre><code>BOT_NAME = 'test_project'\n\nSPIDER_MODULES = ['test_project.spiders']\nNEWSPIDER_MODULE = 'test_project.spiders'\n\nFEED_FORMAT = \"csv\"\nFEED_URI = \"cportboys.csv\"\n\n# Crawl responsibly by identifying yourself (and your website) on the user-agent\n#USER_AGENT = 'test_project (+http://www.yourdomain.com)'\n\n# Obey robots.txt rules\nROBOTSTXT_OBEY = True\n</code></pre>\n\n<p><strong>khsaabot.py</strong></p>\n\n<pre><code>import scrapy\n\n\nclass KhsaabotSpider(scrapy.Spider):\n    name = 'khsaabot'\n    allowed_domains = ['https://scoreboard.12dt.com/scoreboard/khsaa/kybbk17/?id=51978']\n    start_urls = ['http://https://scoreboard.12dt.com/scoreboard/khsaa/kybbk17/?id=51978/']\n\ndef parse(self, response):\n    date = response.css('.mdate::text').extract()\n    opponent = response.css('.opponent::text').extract()\n    place = response.css('.schedule-loc::text').extract()\n\n\n    for item in zip(date,opponent,place):\n        scraped_info = {\n            'date' : item[0],\n            'opponent' : item[1],\n            'place' : item[2],\n        }\n\n        yield scraped_info\n</code></pre>\n\n<p>Now, I am not sure what is going wrong here, when I run it in the terminal using \"scrapy crawl khsaabot\" it gives no errors, and appears to be working just fine. However, just in case there is a problem with what is happening in the terminal, I included the output that I got there too:</p>\n\n<pre><code>2017-12-27 17:21:49 [scrapy.utils.log] INFO: Scrapy 1.4.0 started (bot: test_project)\n2017-12-27 17:21:49 [scrapy.utils.log] INFO: Overridden settings: {'BOT_NAME': 'test_project', 'FEED_FORMAT': 'csv', 'FEED_URI': 'cportboys.csv', 'NEWSPIDER_MODULE': 'test_project.spiders', 'ROBOTSTXT_OBEY': True, 'SPIDER_MODULES': ['test_project.spiders']}\n2017-12-27 17:21:49 [scrapy.middleware] INFO: Enabled extensions:\n['scrapy.extensions.corestats.CoreStats',\n 'scrapy.extensions.telnet.TelnetConsole',\n 'scrapy.extensions.memusage.MemoryUsage',\n 'scrapy.extensions.feedexport.FeedExporter',\n 'scrapy.extensions.logstats.LogStats']\n2017-12-27 17:21:49 [scrapy.middleware] INFO: Enabled downloader middlewares:\n['scrapy.downloadermiddlewares.robotstxt.RobotsTxtMiddleware',\n 'scrapy.downloadermiddlewares.httpauth.HttpAuthMiddleware',\n 'scrapy.downloadermiddlewares.downloadtimeout.DownloadTimeoutMiddleware',\n 'scrapy.downloadermiddlewares.defaultheaders.DefaultHeadersMiddleware',\n 'scrapy.downloadermiddlewares.useragent.UserAgentMiddleware',\n 'scrapy.downloadermiddlewares.retry.RetryMiddleware',\n 'scrapy.downloadermiddlewares.redirect.MetaRefreshMiddleware',\n 'scrapy.downloadermiddlewares.httpcompression.HttpCompressionMiddleware',\n 'scrapy.downloadermiddlewares.redirect.RedirectMiddleware',\n 'scrapy.downloadermiddlewares.cookies.CookiesMiddleware',\n 'scrapy.downloadermiddlewares.httpproxy.HttpProxyMiddleware',\n 'scrapy.downloadermiddlewares.stats.DownloaderStats']\n2017-12-27 17:21:49 [scrapy.middleware] INFO: Enabled spider middlewares:\n['scrapy.spidermiddlewares.httperror.HttpErrorMiddleware',\n 'scrapy.spidermiddlewares.offsite.OffsiteMiddleware',\n 'scrapy.spidermiddlewares.referer.RefererMiddleware',\n 'scrapy.spidermiddlewares.urllength.UrlLengthMiddleware',\n 'scrapy.spidermiddlewares.depth.DepthMiddleware']\n2017-12-27 17:21:49 [scrapy.middleware] INFO: Enabled item pipelines:\n[]\n2017-12-27 17:21:49 [scrapy.core.engine] INFO: Spider opened\n2017-12-27 17:21:49 [scrapy.extensions.logstats] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)\n2017-12-27 17:21:49 [scrapy.extensions.telnet] DEBUG: Telnet console listening on 127.0.0.1:6023\n2017-12-27 17:21:49 [scrapy.downloadermiddlewares.retry] DEBUG: Retrying &lt;GET http://https/robots.txt&gt; (failed 1 times): DNS lookup failed: no results for hostname lookup: https.\n2017-12-27 17:21:49 [scrapy.downloadermiddlewares.retry] DEBUG: Retrying &lt;GET http://https/robots.txt&gt; (failed 2 times): DNS lookup failed: no results for hostname lookup: https.\n2017-12-27 17:21:49 [scrapy.downloadermiddlewares.retry] DEBUG: Gave up retrying &lt;GET http://https/robots.txt&gt; (failed 3 times): DNS lookup failed: no results for hostname lookup: https.\n2017-12-27 17:21:49 [scrapy.downloadermiddlewares.robotstxt] ERROR: Error downloading &lt;GET http://https/robots.txt&gt;: DNS lookup failed: no results for hostname lookup: https.\nTraceback (most recent call last):\n  File \"/Users/devsandbox/anaconda3/lib/python3.6/site-packages/twisted/internet/defer.py\", line 1384, in _inlineCallbacks\n    result = result.throwExceptionIntoGenerator(g)\n  File \"/Users/devsandbox/anaconda3/lib/python3.6/site-packages/twisted/python/failure.py\", line 408, in throwExceptionIntoGenerator\n    return g.throw(self.type, self.value, self.tb)\n  File \"/Users/devsandbox/anaconda3/lib/python3.6/site-packages/scrapy/core/downloader/middleware.py\", line 43, in process_request\n    defer.returnValue((yield download_func(request=request,spider=spider)))\n  File \"/Users/devsandbox/anaconda3/lib/python3.6/site-packages/twisted/internet/defer.py\", line 653, in _runCallbacks\n    current.result = callback(current.result, *args, **kw)\n  File \"/Users/devsandbox/anaconda3/lib/python3.6/site-packages/twisted/internet/endpoints.py\", line 954, in startConnectionAttempts\n    \"no results for hostname lookup: {}\".format(self._hostStr)\ntwisted.internet.error.DNSLookupError: DNS lookup failed: no results for hostname lookup: https.\n2017-12-27 17:21:49 [scrapy.downloadermiddlewares.retry] DEBUG: Retrying &lt;GET http://https//scoreboard.12dt.com/scoreboard/khsaa/kybbk17/?id=51978/&gt; (failed 1 times): DNS lookup failed: no results for hostname lookup: https.\n2017-12-27 17:21:49 [scrapy.downloadermiddlewares.retry] DEBUG: Retrying &lt;GET http://https//scoreboard.12dt.com/scoreboard/khsaa/kybbk17/?id=51978/&gt; (failed 2 times): DNS lookup failed: no results for hostname lookup: https.\n2017-12-27 17:21:49 [scrapy.downloadermiddlewares.retry] DEBUG: Gave up retrying &lt;GET http://https//scoreboard.12dt.com/scoreboard/khsaa/kybbk17/?id=51978/&gt; (failed 3 times): DNS lookup failed: no results for hostname lookup: https.\n2017-12-27 17:21:49 [scrapy.core.scraper] ERROR: Error downloading &lt;GET http://https//scoreboard.12dt.com/scoreboard/khsaa/kybbk17/?id=51978/&gt;\nTraceback (most recent call last):\n  File \"/Users/devsandbox/anaconda3/lib/python3.6/site-packages/twisted/internet/defer.py\", line 1384, in _inlineCallbacks\n    result = result.throwExceptionIntoGenerator(g)\n  File \"/Users/devsandbox/anaconda3/lib/python3.6/site-packages/twisted/python/failure.py\", line 408, in throwExceptionIntoGenerator\n    return g.throw(self.type, self.value, self.tb)\n  File \"/Users/devsandbox/anaconda3/lib/python3.6/site-packages/scrapy/core/downloader/middleware.py\", line 43, in process_request\n    defer.returnValue((yield download_func(request=request,spider=spider)))\n  File \"/Users/devsandbox/anaconda3/lib/python3.6/site-packages/twisted/internet/defer.py\", line 653, in _runCallbacks\n    current.result = callback(current.result, *args, **kw)\n  File \"/Users/devsandbox/anaconda3/lib/python3.6/site-packages/twisted/internet/endpoints.py\", line 954, in startConnectionAttempts\n    \"no results for hostname lookup: {}\".format(self._hostStr)\ntwisted.internet.error.DNSLookupError: DNS lookup failed: no results for hostname lookup: https.\n2017-12-27 17:21:49 [scrapy.core.engine] INFO: Closing spider (finished)\n2017-12-27 17:21:49 [scrapy.statscollectors] INFO: Dumping Scrapy stats:\n{'downloader/exception_count': 6,\n 'downloader/exception_type_count/twisted.internet.error.DNSLookupError': 6,\n 'downloader/request_bytes': 1416,\n 'downloader/request_count': 6,\n 'downloader/request_method_count/GET': 6,\n 'finish_reason': 'finished',\n 'finish_time': datetime.datetime(2017, 12, 27, 23, 21, 49, 579649),\n 'log_count/DEBUG': 7,\n 'log_count/ERROR': 2,\n 'log_count/INFO': 7,\n 'memusage/max': 50790400,\n 'memusage/startup': 50790400,\n 'retry/count': 4,\n 'retry/max_reached': 2,\n 'retry/reason_count/twisted.internet.error.DNSLookupError': 4,\n 'scheduler/dequeued': 3,\n 'scheduler/dequeued/memory': 3,\n 'scheduler/enqueued': 3,\n 'scheduler/enqueued/memory': 3,\n 'start_time': datetime.datetime(2017, 12, 27, 23, 21, 49, 323652)}\n2017-12-27 17:21:49 [scrapy.core.engine] INFO: Spider closed (finished)\n</code></pre>\n\n<p>The output looks right to me, but I am still new to Scrapy so I could be missing something.</p>\n\n<p>Thanks y'all</p>\n"}, {"tags": ["python", "django", "mongodb", "login", "django-views"], "comments": [{"owner": {"reputation": 15683, "user_id": 6523163, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/qUURJ.jpg?s=128&g=1", "display_name": "aircraft", "link": "https://stackoverflow.com/users/6523163/aircraft"}, "edited": false, "score": 0, "creation_date": 1514416913, "post_id": 47999718, "comment_id": 82968042, "body": "post the database settings in settings.py."}, {"owner": {"reputation": 17, "user_id": 9137621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/524766201230136/picture?type=large", "display_name": "Youssef Pu", "link": "https://stackoverflow.com/users/9137621/youssef-pu"}, "reply_to_user": {"reputation": 15683, "user_id": 6523163, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/qUURJ.jpg?s=128&g=1", "display_name": "aircraft", "link": "https://stackoverflow.com/users/6523163/aircraft"}, "edited": false, "score": 0, "creation_date": 1514417235, "post_id": 47999718, "comment_id": 82968134, "body": "@aircraft  DATABASES = {     &#39;default&#39;: {         &#39;ENGINE&#39;: &#39;django.db.backends.dummy&#39;,     } }  AUTHENTICATION_BACKENDS = ( &#39;products.backend.AuthBackend&#39;, )  from mongoengine import * connect(&#39;shops&#39;)"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 9137621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/524766201230136/picture?type=large", "display_name": "Youssef Pu", "link": "https://stackoverflow.com/users/9137621/youssef-pu"}, "edited": false, "score": 0, "creation_date": 1514418280, "post_id": 47999839, "comment_id": 82968336, "body": "Thank you i think it support just python 2.x i&#39;m using 3 but np i will use 2.x"}, {"owner": {"reputation": 519, "user_id": 5265950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74d0cecdfbd719730f72eba5d23268ca?s=128&d=identicon&r=PG&f=1", "display_name": "xpeiro", "link": "https://stackoverflow.com/users/5265950/xpeiro"}, "edited": false, "score": 0, "creation_date": 1548703428, "post_id": 47999839, "comment_id": 95628553, "body": "But port must be an int instead of a string"}], "tags": [], "owner": {"reputation": 15683, "user_id": 6523163, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/qUURJ.jpg?s=128&g=1", "display_name": "aircraft", "link": "https://stackoverflow.com/users/6523163/aircraft"}, "is_accepted": true, "score": 1, "last_activity_date": 1514418555, "last_edit_date": 1514418555, "creation_date": 1514417605, "answer_id": 47999839, "question_id": 47999718, "link": "https://stackoverflow.com/questions/47999718/how-to-login-using-django-mongodb/47999839#47999839", "title": "How to login using django &amp; mongodb", "body": "<p>The correct configuration of mongodb database in <a href=\"http://django-mongodb-engine.readthedocs.io/en/latest/topics/setup.html\" rel=\"nofollow noreferrer\">settings</a>:</p>\n\n<pre><code>DATABASES = {\n    'default': {\n        'ENGINE': 'django_mongodb_engine',\n        'NAME': 'your-database',\n        'USER': 'your-databaseuser',\n        'PASSWORD': 'your-password',\n        'HOST': '127.0.0.1',\n        'PORT': 'the-port',\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>Django uses dummy if the database ENGINE setting is empty (None or empty string).</p>\n\n<p>and it raise Exception:</p>\n\n<pre><code>ImproperlyConfigured(\"settings.DATABASES is improperly configured. \"\n                       \"Please supply the ENGINE value. Check \"\n                       \"settings documentation for more details.\")\n</code></pre>\n\n<p>So, your error is caused by setting the ENGINE to <code>django.db.backends.dummy</code> </p>\n"}], "owner": {"reputation": 17, "user_id": 9137621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/524766201230136/picture?type=large", "display_name": "Youssef Pu", "link": "https://stackoverflow.com/users/9137621/youssef-pu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 798, "favorite_count": 0, "accepted_answer_id": 47999839, "answer_count": 1, "score": 0, "last_activity_date": 1514418555, "creation_date": 1514416558, "question_id": 47999718, "link": "https://stackoverflow.com/questions/47999718/how-to-login-using-django-mongodb", "title": "How to login using django &amp; mongodb", "body": "<p>I have coding challenge must use technologies:<br>\n - Python/Django<br>\n - Backend : Django<br>\n - Frontend : Angular<br>\n - Database : MongoDB<br>\nI found some problems in login,\nin django how i can login using database mongodb </p>\n\n<p>views</p>\n\n<pre><code>def auth_login(request, on_success='/', on_fail='/account/login'):  \nuser = authenticate(username=request.POST['email'], password=request.POST['password'])\nif user is not None:\n    login(request, user)\n    return redirect(on_success)\nelse:\n    return redirect(on_fail)\n</code></pre>\n\n<p>Error : <br>\n<b>settings.DATABASES is improperly configured. Please supply the ENGINE value. Check settings documentation for more details.</b></p>\n"}, {"tags": ["python", "bots", "discord"], "comments": [{"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 1, "creation_date": 1514417812, "post_id": 47999716, "comment_id": 82968246, "body": "Use <a href=\"http://discordpy.readthedocs.io/en/latest/api.html#discord.Client.create_role\" rel=\"nofollow noreferrer\"><code>create_role</code></a> to create the role and <a href=\"http://discordpy.readthedocs.io/en/latest/api.html#discord.Client.add_roles\" rel=\"nofollow noreferrer\"><code>add_roles</code></a> to give it to the bot."}], "answers": [{"tags": [], "owner": {"reputation": 412, "user_id": 5520593, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156275316355232/picture?type=large", "display_name": "Astrydax", "link": "https://stackoverflow.com/users/5520593/astrydax"}, "is_accepted": true, "score": 1, "last_activity_date": 1515484965, "creation_date": 1515484965, "answer_id": 48163714, "question_id": 47999716, "link": "https://stackoverflow.com/questions/47999716/how-to-create-a-role-for-a-discord-bot/48163714#48163714", "title": "How to create a role for a Discord Bot", "body": "<p>you want to do this through oath2 using the url parameters</p>\n"}, {"tags": [], "owner": {"reputation": 665, "user_id": 8582663, "user_type": "registered", "profile_image": "https://graph.facebook.com/174368326469779/picture?type=large", "display_name": "Raymond Zhang", "link": "https://stackoverflow.com/users/8582663/raymond-zhang"}, "is_accepted": false, "score": 0, "last_activity_date": 1601266563, "last_edit_date": 1601266563, "creation_date": 1516368154, "answer_id": 48342129, "question_id": 47999716, "link": "https://stackoverflow.com/questions/47999716/how-to-create-a-role-for-a-discord-bot/48342129#48342129", "title": "How to create a role for a Discord Bot", "body": "<blockquote>\n<p>you want to do this through oath2 using the url parameters</p>\n</blockquote>\n<p>As <a href=\"https://stackoverflow.com/a/48163714/8582663\">Astrydax</a> said, the bot will automatically create its own role upon invite, and you can invite you bot here: <a href=\"https://discord.com/developers/applications/me\" rel=\"nofollow noreferrer\">Discord Developers</a></p>\n"}, {"tags": [], "owner": {"reputation": 339, "user_id": 11788276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4d9be5f577b99d3b2710d720a94f81?s=128&d=identicon&r=PG&f=1", "display_name": "Dec0Dedd", "link": "https://stackoverflow.com/users/11788276/dec0dedd"}, "is_accepted": false, "score": 1, "last_activity_date": 1563265338, "creation_date": 1563265338, "answer_id": 57052993, "question_id": 47999716, "link": "https://stackoverflow.com/questions/47999716/how-to-create-a-role-for-a-discord-bot/57052993#57052993", "title": "How to create a role for a Discord Bot", "body": "<p>Bot will create it's own role when it joins the server through the invite. You can set the bot's role permissions in OAuth2. Just click this <a href=\"https://discordapp.com/developers/applications/\" rel=\"nofollow noreferrer\">link</a> and select your application. Then go to OAuth2 (or create a bot if u didn't) and select all permissions which your bot's role will have. Then copy the URL (which will be your bot's invite). Invite your bot. Done!</p>\n"}], "owner": {"reputation": 61, "user_id": 5118172, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc8e3ebbdc9c5a65ce197adc9e131f18?s=128&d=identicon&r=PG&f=1", "display_name": "DoingItNow", "link": "https://stackoverflow.com/users/5118172/doingitnow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4033, "favorite_count": 0, "accepted_answer_id": 48163714, "answer_count": 3, "score": -1, "last_activity_date": 1601266563, "creation_date": 1514416551, "question_id": 47999716, "link": "https://stackoverflow.com/questions/47999716/how-to-create-a-role-for-a-discord-bot", "title": "How to create a role for a Discord Bot", "body": "<p>I am using discord.py to create my bot and I was wondering how to create roles/permissions specific to the bot? </p>\n\n<p>What that means is when the bot enters the server for the first time, it has predefined permissions and role set in place so the admin of the server doesn't need to set a role and permissions for the bot.</p>\n\n<p>I have been trying to look up a reference implementation of this but no luck. If someone can point me at example of how to get a simple permission/role for a bot that will be great!</p>\n"}, {"tags": ["python", "pyinstaller"], "comments": [{"owner": {"reputation": 6686, "user_id": 9086466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JI5yN.png?s=128&g=1", "display_name": "Ctznkane525", "link": "https://stackoverflow.com/users/9086466/ctznkane525"}, "edited": false, "score": 0, "creation_date": 1514416686, "post_id": 47999704, "comment_id": 82967984, "body": "This might help? <a href=\"https://stackoverflow.com/questions/2632199/how-do-i-get-the-path-of-the-current-executed-file-in-python\" title=\"how do i get the path of the current executed file in python\">stackoverflow.com/questions/2632199/&hellip;</a>"}, {"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1514417206, "post_id": 47999704, "comment_id": 82968127, "body": "<code>__file__</code> is the path of the module being executed, which is a <code>.py</code> file. If you name your <code>.exe</code> file the same as your module, you could swap out the filename extensions."}, {"owner": {"reputation": 514, "user_id": 6502077, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/811267f3cc849bfb9df2dd9b7b8e6890?s=128&d=identicon&r=PG&f=1", "display_name": "Lavonen", "link": "https://stackoverflow.com/users/6502077/lavonen"}, "edited": false, "score": 0, "creation_date": 1514417398, "post_id": 47999704, "comment_id": 82968165, "body": "How do I do that? Is it the &#39;procedure&#39; described in the link frm John Kane above?"}, {"owner": {"reputation": 514, "user_id": 6502077, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/811267f3cc849bfb9df2dd9b7b8e6890?s=128&d=identicon&r=PG&f=1", "display_name": "Lavonen", "link": "https://stackoverflow.com/users/6502077/lavonen"}, "edited": false, "score": 0, "creation_date": 1514417401, "post_id": 47999704, "comment_id": 82968167, "body": "How do I do that? Is it the &#39;procedure&#39; described in the link frm John Kane above?"}], "answers": [{"tags": [], "owner": {"reputation": 11899, "user_id": 7216865, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X90W9.png?s=128&g=1", "display_name": "Maurice Meyer", "link": "https://stackoverflow.com/users/7216865/maurice-meyer"}, "is_accepted": true, "score": 2, "last_activity_date": 1514417344, "creation_date": 1514417344, "answer_id": 47999811, "question_id": 47999704, "link": "https://stackoverflow.com/questions/47999704/pyinstaller-creates-py-copy-instead-of-exe-copy/47999811#47999811", "title": "(Pyinstaller) creates .py copy instead of .exe copy", "body": "<p>Python is an interpreted language. PyInstaller/Py2exe/... are zipping the all python modules and add an executable header to make the exe-file executable.  </p>\n\n<p>When you are running the exe, all python modules are extracted to a temp directory and executed from there.</p>\n\n<p>You can use <code>sys.executable</code>, to get the path of the exe. More details docs <a href=\"http://pyinstaller.readthedocs.io/en/stable/runtime-information.html#using-sys-executable-and-sys-argv-0\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 514, "user_id": 6502077, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/811267f3cc849bfb9df2dd9b7b8e6890?s=128&d=identicon&r=PG&f=1", "display_name": "Lavonen", "link": "https://stackoverflow.com/users/6502077/lavonen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 0, "accepted_answer_id": 47999811, "answer_count": 1, "score": 0, "last_activity_date": 1514417344, "creation_date": 1514416406, "question_id": 47999704, "link": "https://stackoverflow.com/questions/47999704/pyinstaller-creates-py-copy-instead-of-exe-copy", "title": "(Pyinstaller) creates .py copy instead of .exe copy", "body": "<p>I have created a simple program for Windows in Python (converted to .exe with Pyinstaller) that copy itself to a created folder in Program Files. The program works perfect except one unforeseen detail, when the file copy itself to the directory it replaces the .exe extension with .py which makes the file unfunctional. Why is this happening?</p>\n\n<p>Here is a very simple example that illustrate the problem:</p>\n\n<pre><code>import os\nimport shutil\n\nfilePath = os.path.abspath(__file__)\nfolder = 'some folder in C'\n\nshutil.copy(filePath, folder)\n</code></pre>\n\n<p>Convert it to .exe in Pyinstaller with the following:</p>\n\n<pre><code>Pyinstaller --onefile name-of-file.py\n</code></pre>\n\n<p>When you run the program it will create a .py copy...</p>\n"}, {"tags": ["python", "powershell", "visual-studio-code"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1514416332, "post_id": 47999678, "comment_id": 82967897, "body": "Probably this is a result of buffering... What happens if you <code>print(&quot;hi mom!&quot;, flush=True)</code>?"}, {"owner": {"reputation": 2522, "user_id": 462477, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/4a6f85ec4e734181f4e66b728c2f9b7f?s=128&d=identicon&r=PG", "display_name": "sisdog", "link": "https://stackoverflow.com/users/462477/sisdog"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1514423589, "post_id": 47999678, "comment_id": 82969433, "body": "Good idea,unfortunately it didn&#39;t work."}], "owner": {"reputation": 2522, "user_id": 462477, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/4a6f85ec4e734181f4e66b728c2f9b7f?s=128&d=identicon&r=PG", "display_name": "sisdog", "link": "https://stackoverflow.com/users/462477/sisdog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1514416205, "creation_date": 1514416205, "question_id": 47999678, "link": "https://stackoverflow.com/questions/47999678/vscode-requires-carriage-return-for-python-print", "title": "VSCode Requires Carriage Return for Python Print", "body": "<p>I'm running the following statement in VSCode by opening up the test.ps1 file and hitting F5. The problem is that it won't print \"hi mom\" in the VSCode Terminal window until I focus in the Terminal window and hit carriage return. it will hang there forever.  I don't have this problem in the normal PowerShell ISE, it prints immediately. Any ideas?</p>\n\n<p><strong>Test.ps1</strong></p>\n\n<pre><code>python d:\\RepoStats\\Python\\Test.py\n</code></pre>\n\n<p><strong>Test.py</strong></p>\n\n<pre><code>print(\"hi mom!\")\n</code></pre>\n"}, {"tags": ["python", "subprocess"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1514416231, "post_id": 47999670, "comment_id": 82967868, "body": "You can <code>self.log.flush()</code> after every write. Essentially Python will wait to write to the file until it has enough data in the buffer, or the file handle is closed (for instance when the application stops)."}, {"owner": {"reputation": 444, "user_id": 8840617, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/46f7dfcadb1db658491a8c20149930cc?s=128&d=identicon&r=PG&f=1", "display_name": "Crickets", "link": "https://stackoverflow.com/users/8840617/crickets"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1514417027, "post_id": 47999670, "comment_id": 82968073, "body": "I just tried inserting <code>self.log.flush()</code> after <code>self.log.write(message)</code>. Doing this did not change anything. The .txt file still does not contain the <code>print</code> text from the external script."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1514417132, "post_id": 47999670, "comment_id": 82968103, "body": "Hold on, this script is rather dangerous. Furthermore your program nowhere prints the argument at all. So I guess this is only the shell itself that prints the argument."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1514418081, "post_id": 47999670, "comment_id": 82968288, "body": "In <code>write</code>, open the file an write to it instead of using reference to an open file as an instance attribute.  Dues that work."}, {"owner": {"reputation": 444, "user_id": 8840617, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/46f7dfcadb1db658491a8c20149930cc?s=128&d=identicon&r=PG&f=1", "display_name": "Crickets", "link": "https://stackoverflow.com/users/8840617/crickets"}, "edited": false, "score": 0, "creation_date": 1514418797, "post_id": 47999670, "comment_id": 82968444, "body": "Sorry, I don&#39;t quite know how to implement this"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1514421607, "post_id": 47999670, "comment_id": 82969060, "body": "Using string concatenation to form shell commands is a substantial security risk -- if someone puts <code>$(rm -rf ~)</code> somewhere in an argument you&#39;re amending to the string, you&#39;re in a world of hurt. If you care about security and reliability, avoid <code>shell=True</code>. (Unwanted globbing poses risks even when inputs aren&#39;t deliberately malicious: I once was present when code tried to delete a file created by code with a bug that dumped random garbage from memory into a name; that garbage happened to have a whitespace-surrounded <code>*</code>, and multiple TB of backups were lost)."}], "answers": [{"tags": [], "owner": {"reputation": 3678, "user_id": 353839, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8jb0a.png?s=128&g=1", "display_name": "bbayles", "link": "https://stackoverflow.com/users/353839/bbayles"}, "is_accepted": false, "score": 1, "last_activity_date": 1514419137, "creation_date": 1514419137, "answer_id": 47999980, "question_id": 47999670, "link": "https://stackoverflow.com/questions/47999670/subprocess-popen-communicate-writes-to-console-but-not-to-log-file/47999980#47999980", "title": "subprocess.Popen communicate() writes to console, but not to log file", "body": "<p>Do you really need <code>subprocess.Popen</code>'s <code>communicate()</code> method? It looks like you just want the output. That's what <code>subprocess.check_output()</code> is for.</p>\n\n<p>If you use that, you can use the built-in <a href=\"https://docs.python.org/3/library/logging.html\" rel=\"nofollow noreferrer\">logging</a> module for \"tee\"-ing the output stream to multiple destinations.</p>\n\n<pre><code>import logging\nimport subprocess\nimport sys\n\nEXTERNAL_SCRIPT_PATH = '/path/to/talker.py'\nLOG_FILE_PATH = '/path/to/debug.log'\n\nlogger = logging.getLogger('')\nlogger.setLevel(logging.INFO)\n\n# Log to screen\nconsole_logger = logging.StreamHandler(sys.stdout)\nlogger.addHandler(console_logger)\n\n# Log to file\nfile_logger = logging.FileHandler(LOG_FILE_PATH)\nlogger.addHandler(file_logger)\n\n# Driver script output\nlogger.info('Calling external script')\n\n# External script output\nlogger.info(\n    subprocess.check_output(EXTERNAL_SCRIPT_PATH, shell=True)\n)\n\n# More driver script output\nlogger.info('Finished calling external script')\n</code></pre>\n\n<p>As always, be careful with <code>shell=True</code>. If you can write the call as <code>subprocess.check_output(['/path/to/script.py', 'arg1', 'arg2'])</code>, do so!</p>\n"}, {"comments": [{"owner": {"reputation": 444, "user_id": 8840617, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/46f7dfcadb1db658491a8c20149930cc?s=128&d=identicon&r=PG&f=1", "display_name": "Crickets", "link": "https://stackoverflow.com/users/8840617/crickets"}, "edited": false, "score": 0, "creation_date": 1514434762, "post_id": 48000291, "comment_id": 82971520, "body": "I ended up going with Solution #3. It works great. I can simply <code>print(contents)</code>, and the .txt log then reflects the <code>contents</code>. I appreciate the detailed answer."}, {"owner": {"reputation": 14111, "user_id": 289011, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7fabc4413849953957908f8690c2c24c?s=128&d=identicon&r=PG", "display_name": "BorrajaX", "link": "https://stackoverflow.com/users/289011/borrajax"}, "reply_to_user": {"reputation": 444, "user_id": 8840617, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/46f7dfcadb1db658491a8c20149930cc?s=128&d=identicon&r=PG&f=1", "display_name": "Crickets", "link": "https://stackoverflow.com/users/8840617/crickets"}, "edited": false, "score": 0, "creation_date": 1514438023, "post_id": 48000291, "comment_id": 82972250, "body": "Sure... And yeah, to me it was very important to understand that <i>processes</i> (threads are something different) basically can only communicate with each other through files (in one shape or another, but in the end, files, after all) It&#39;s like having two completely separate &quot;things&quot; that both use a common file to &quot;talk&quot; (call it queue, call it buffer... same idea): process-1 writes to a file and process-2 reads from it, and many other variations, but the files are pretty much the only thing that can &quot;link&quot; processes together"}], "tags": [], "owner": {"reputation": 14111, "user_id": 289011, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7fabc4413849953957908f8690c2c24c?s=128&d=identicon&r=PG", "display_name": "BorrajaX", "link": "https://stackoverflow.com/users/289011/borrajax"}, "is_accepted": true, "score": 0, "last_activity_date": 1514422268, "last_edit_date": 1514422268, "creation_date": 1514421916, "answer_id": 48000291, "question_id": 47999670, "link": "https://stackoverflow.com/questions/47999670/subprocess-popen-communicate-writes-to-console-but-not-to-log-file/48000291#48000291", "title": "subprocess.Popen communicate() writes to console, but not to log file", "body": "<p>Keep in mind that <code>subprocess</code> spawns a new process, and doesn't really communicate with the parent process (they're pretty much independent entities). Despite its name, the <a href=\"https://docs.python.org/2/library/subprocess.html#subprocess.Popen.communicate\" rel=\"nofollow noreferrer\"><code>communicate</code></a> method is just a way of sending/receiving data from the parent process to the child process (simulate that the user input something on the terminal, for instance)</p>\n\n<p>In order to know where to write the output, subprocess uses numbers (file identifiers or file numbers). When subprocess spawns a process, the child process only knows that the standard output is the file identified in the O.S. as <code>7</code> (to say a number) but that's pretty much it. The subprocess will independently query the operative system with something like <em>\"Hey! What is file number 7? Give it to me, I have something to write in it.\"</em> (understanding what a C <a href=\"https://www.geeksforgeeks.org/fork-system-call/\" rel=\"nofollow noreferrer\"><code>fork</code></a> does is quite helpful here)</p>\n\n<p>Basically, the spawned subprocess doesn't <em>understand</em> your <code>Logger</code> class. It just knows it has to write its stuff to a file: a file which is uniquely identified within the O.S with a number and that unless otherwise specified, that number corresponds with the file descriptor of the standard output (but as explained in the case #2 below, you can change it if you want)</p>\n\n<p>So you have several \"solutions\"... </p>\n\n<ol>\n<li><p>Clone (<a href=\"https://en.wikipedia.org/wiki/Tee_(command)\" rel=\"nofollow noreferrer\">tee</a>) stdout to a file, so when something is written to stdout, the operative system ALSO writes it to your file (this is really not Python-related... it's OS related):</p>\n\n<pre><code>import os\nimport tempfile\nimport subprocess\n\nfile_log = os.path.join(tempfile.gettempdir(), 'foo.txt')\np = subprocess.Popen(\"python ./run_something.py | tee %s\" % file_log, shell=True)\np.wait()\n</code></pre></li>\n<li><p>Choose whether to write to terminal <strong>OR</strong> to the file using the <code>fileno()</code> function of each. For instance, to write <em>only</em> to the file:</p>\n\n<pre><code>import os\nimport tempfile\nimport subprocess\n\nfile_log = os.path.join(tempfile.gettempdir(), 'foo.txt')\nwith open(file_log, 'w') as f:\n    p = subprocess.Popen(\"python ./run_something.py\", shell=True, stdout=f.fileno())\n    p.wait()\n</code></pre></li>\n<li><p>What I personally find \"safer\" (I don't feel confortable overwriting <code>sys.stdout</code>): Just let the command run and store its output into a variable and pick it up later (in the parent process):</p>\n\n<pre><code>import os\nimport tempfile\nimport subprocess\n\np = subprocess.Popen(\"python ./run_something.py\", shell=True, stdout=subprocess.PIPE)\np.wait()\ncontents = p.stdout.read()\n# Whatever the output of Subprocess was is now stored in 'contents'\n# Let's write it to file:\nfile_log = os.path.join(tempfile.gettempdir(), 'foo.txt')\nwith open(file_log, 'w') as f:\n    f.write(contents)\n</code></pre>\n\n<p>This way, you can also do a <code>print(contents)</code> somewhere in your code to output whatever the subprocess \"said\" to the terminal.</p></li>\n</ol>\n\n<p>For example purposes, the script \"./run_something.py\" is just this:</p>\n\n<pre><code>print(\"Foo1\")\nprint(\"Foo2\")\nprint(\"Foo3\")\n</code></pre>\n"}], "owner": {"reputation": 444, "user_id": 8840617, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/46f7dfcadb1db658491a8c20149930cc?s=128&d=identicon&r=PG&f=1", "display_name": "Crickets", "link": "https://stackoverflow.com/users/8840617/crickets"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2392, "favorite_count": 0, "accepted_answer_id": 48000291, "answer_count": 2, "score": 1, "last_activity_date": 1514422268, "creation_date": 1514416138, "question_id": 47999670, "link": "https://stackoverflow.com/questions/47999670/subprocess-popen-communicate-writes-to-console-but-not-to-log-file", "title": "subprocess.Popen communicate() writes to console, but not to log file", "body": "<p>I have the following line in a Python script that runs a separate Python script from within the original script:</p>\n\n<pre><code>subprocess.Popen(\"'/MyExternalPythonScript.py' \" + theArgumentToPassToPythonScript, shell=True).communicate()\n</code></pre>\n\n<p>Using the above line, any <code>print()</code> statements found in the separate Python file do appear in the console of the main Python script.</p>\n\n<p>However, these statements are <strong>not</strong> reflected in the .txt file log that the script writes to.</p>\n\n<p>Does anyone know how to fix this, so that the .txt file exactly reflects the true console text of the main Python script?</p>\n\n<hr>\n\n<p>This is <a href=\"https://stackoverflow.com/a/616672\">the method</a> I am using to save the console as a .txt file, in real time:</p>\n\n<pre><code>import sys\nclass Logger(object):\n    def __init__(self):\n        self.terminal = sys.stdout\n        self.log = open(\"/ScriptLog.txt\", \"w\", 0)\n    def write(self, message):\n        self.terminal.write(message)\n        self.log.write(message)\n\n\nsys.stdout = Logger()\n</code></pre>\n\n<p>I am not necessarily attached to this method. I am interested in any method that will achieve what I've detailed.</p>\n"}, {"tags": ["python", "selenium", "xpath", "selenium-chromedriver"], "comments": [{"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "edited": false, "score": 0, "creation_date": 1514442821, "post_id": 47999652, "comment_id": 82973648, "body": "The <code>downloaded_file</code>link is within a <b>shadow-root</b> i.e <b>shadowDOM</b> you need to use <code>JavascriptExecutor</code>"}, {"owner": {"reputation": 11632, "user_id": 8582353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa2e22a564c1d0e098316210a2ec4fb1?s=128&d=identicon&r=PG&f=1", "display_name": "yong", "link": "https://stackoverflow.com/users/8582353/yong"}, "edited": false, "score": 0, "creation_date": 1514449233, "post_id": 47999652, "comment_id": 82976030, "body": "Aggree with DebanjanB,  Please learn what&#39;s shadow DOM firstly."}], "answers": [{"tags": [], "owner": {"reputation": 1663, "user_id": 7953640, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-XXZtjJHhqKQ/AAAAAAAAAAI/AAAAAAAACGM/WH8Q0SKnwic/photo.jpg?sz=128", "display_name": "Satish", "link": "https://stackoverflow.com/users/7953640/satish"}, "is_accepted": false, "score": 1, "last_activity_date": 1514417248, "creation_date": 1514417248, "answer_id": 47999797, "question_id": 47999652, "link": "https://stackoverflow.com/questions/47999652/selenium-not-locating-xpath-element/47999797#47999797", "title": "Selenium not locating xpath element", "body": "<p>I have never used selenium to click on elements from chrome://downloads/ and I don't know if thats possible. I'd leave that to the experts here.</p>\n\n<p>Having said that, If you end up changing the way you open the downloaded pdf, you can try the below approach</p>\n\n<pre><code>options = webdriver.ChromeOptions()\noptions .add_experimental_option(\"prefs\", {\n    \"download.default_directory\": '&lt;temp_download_dir&gt;',\n    \"download.prompt_for_download\": False,\n    \"download.directory_upgrade\": True,\n    \"safebrowsing.enabled\": True\n})\n</code></pre>\n\n<p>this will force the chrome to download the pdf to temp_download_dir, from there you can open the file</p>\n"}], "owner": {"reputation": 33, "user_id": 8473855, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2U1jWTTqoZU/AAAAAAAAAAI/AAAAAAAAAA0/LDjgC4YWGBE/photo.jpg?sz=128", "display_name": "Josh Readfern-Grey", "link": "https://stackoverflow.com/users/8473855/josh-readfern-grey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1514417248, "creation_date": 1514415963, "question_id": 47999652, "link": "https://stackoverflow.com/questions/47999652/selenium-not-locating-xpath-element", "title": "Selenium not locating xpath element", "body": "<p>I'm running Selenium to download a sample PdF file and open it in Chrome but for some reason, I can't manage to get Selenium to click on the first result in the downloads section.</p>\n\n<p>The XPath has been specified but it just won't click on the element, the process is just aborted due to a timeout error (below). Please, does anyone have any ideas of what I am doing wrong?</p>\n\n<pre><code>======================================================================\nERROR: testSearch (__main__.InitialSearch)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/Josh/PycharmProjects/ideqcomps/test.py\", line 33, in testSearch\n    lambda driver: driver.find_elements_by_xpath(downloaded_file_XPath))\n  File \"/Users/Josh/Library/Python/3.6/lib/python/site-packages/selenium/webdriver/support/wait.py\", line 80, in until\n    raise TimeoutException(message, screen, stacktrace)\nselenium.common.exceptions.TimeoutException: Message: \n\n\n----------------------------------------------------------------------\nRan 1 test in 24.415s\n\nFAILED (errors=1)\n\nProcess finished with exit code 1\n</code></pre>\n\n<p>Here is the code I'm running:</p>\n\n<pre><code>from selenium import webdriver\n\nfrom selenium.webdriver.support.ui import WebDriverWait\n\nimport unittest\n\n\nclass InitialSearch(unittest.TestCase):\n\n    def setUp(self):\n        options     = webdriver.ChromeOptions()\n        self.driver = webdriver.Chrome(chrome_options=options)\n        self.driver.get(\"https://wetransfer.com/downloads/5451e039a782938826861676664ae91a20171227191356/a45960\")\n\n    def testSearch(self):\n        driver                   = self.driver\n        download_button_xpath    = '//*[@id=\"file-link\"]'\n        agree_xpath              = '//*[@id=\"5451e039a782938826861676664ae91a20171227191356\"]/div/div[2]/button'\n        downloaded_file_xpath    = '//*[@id=\"downloads-list\"]/downloads-item[1]'\n    # Click on agree to terms button\n        agree_element = WebDriverWait(driver, 10).until(\n            lambda driver: driver.find_element_by_xpath(agree_xpath))\n        agree_element.click()\n    # Click on download button\n        download_button_element = WebDriverWait(driver, 10).until(\n            lambda driver: driver.find_element_by_xpath(download_button_xpath))\n        download_button_element.click()\n    # Go to downloads\n        self.driver.get(\"chrome://downloads/\")\n    # Click on first item in downloads\n        open_pdf_element = WebDriverWait(driver, 10).until(\n            lambda driver: driver.find_element_by_xpath(downloaded_file_xpath))\n        open_pdf_element.click()\n\n\nif __name__ == '__main__':\n    unittest.main()\n</code></pre>\n"}, {"tags": ["python", "poloniex"], "comments": [{"owner": {"reputation": 2454, "user_id": 8784938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/753bb55c80a644f950a41ae11cfbe48c?s=128&d=identicon&r=PG&f=1", "display_name": "SuperStew", "link": "https://stackoverflow.com/users/8784938/superstew"}, "edited": false, "score": 1, "creation_date": 1514416009, "post_id": 47999648, "comment_id": 82967800, "body": "<a href=\"https://github.com/s4w3d0ff/python-poloniex\" rel=\"nofollow noreferrer\">github.com/s4w3d0ff/python-poloniex</a>"}], "answers": [{"tags": [], "owner": {"reputation": 6426, "user_id": 4471715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af5026f58744339680af12b163aad259?s=128&d=identicon&r=PG&f=1", "display_name": "A STEFANI", "link": "https://stackoverflow.com/users/4471715/a-stefani"}, "is_accepted": false, "score": 0, "last_activity_date": 1521729264, "creation_date": 1521729264, "answer_id": 49431361, "question_id": 47999648, "link": "https://stackoverflow.com/questions/47999648/trade-api-poloniex-python-3-5/49431361#49431361", "title": "Trade API Poloniex Python 3.5", "body": "<p>Try this:</p>\n\n<pre><code>import urllib\nimport urllib2\nimport requests\nimport json\nimport time\nimport hmac,hashlib\n\napi_secret =\"111111111111111111111111111111111111111111111111111111111\"\napi_key=\"YYYYYYYY-IIIIIIII-PPPPPPPP-LLLLLLLL\"\n\nnonce = int(time.time() * 1000)\nparms = {\"nonce\": nonce,\"command\":'returnBalances'}\npost_data = urllib.parse.urlencode(parms)\n\nsign = hmac.new( api_secret,post_data, hashlib.sha512).hexdigest()\nprint(sign)\nheaders = {\"Sign\":sign,\"Key\":api_key}\nret = urllib2.urlopen(urllib2.Request('https://poloniex.com/tradingApi', post_data, headers))\njsonRet = json.loads(ret.read())\n\nprint(jsonRet)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9146974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b88543352f04853b13dde71661be4b7b?s=128&d=identicon&r=PG&f=1", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041a\u0430\u0437\u044b\u043c\u043e\u0432", "link": "https://stackoverflow.com/users/9146974/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9a%d0%b0%d0%b7%d1%8b%d0%bc%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1539897167, "creation_date": 1514415926, "last_edit_date": 1521729537, "question_id": 47999648, "link": "https://stackoverflow.com/questions/47999648/trade-api-poloniex-python-3-5", "title": "Trade API Poloniex Python 3.5", "body": "<p>Help me log in to the api poloniex. Below is written my code with which I am trying to log in, but it gives me an error! Python version 3.5. Help me please understand what I'm doing wrong!</p>\n\n<pre><code>import urllib\nimport requests\nimport json\nimport time\nimport hmac,hashlib\n\napi_secret =\"111111111111111111111111111111111111111111111111111111111\"\napi_key=\"YYYYYYYY-IIIIIIII-PPPPPPPP-LLLLLLLL\"\n\nnonce = int(time.time() * 1000)\nparms = {\"nonce\": nonce,\"command\":'returnBalances'}\npost_data = urllib.parse.urlencode(parms)\n\nsign = hmac.new( api_secret.encode(),post_data.encode(), hashlib.sha512).hexdigest()\nprint(sign)\nheaders = {\"Sign\":sign,\"Key\":api_key}\npublic = requests.post('https://poloniex.com/tradingApi',post_data,headers)\n\nprint(public.text)\n</code></pre>\n\n<p>The result of the program is the following:\n{\"error\":\"Invalid API key/secret pair.\"}</p>\n"}, {"tags": ["python", "turtle-graphics"], "comments": [{"owner": {"reputation": 12211, "user_id": 5411817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Z0g8T.png?s=128&g=1", "display_name": "SherylHohman", "link": "https://stackoverflow.com/users/5411817/sherylhohman"}, "edited": false, "score": 0, "creation_date": 1514416574, "post_id": 47999638, "comment_id": 82967962, "body": "Can you attach an image of what you have / what you are trying to do?"}, {"owner": {"reputation": 31, "user_id": 9147054, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214449534129975/picture?type=large", "display_name": "Juan Manuel Ruiz Manso", "link": "https://stackoverflow.com/users/9147054/juan-manuel-ruiz-manso"}, "reply_to_user": {"reputation": 12211, "user_id": 5411817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Z0g8T.png?s=128&g=1", "display_name": "SherylHohman", "link": "https://stackoverflow.com/users/5411817/sherylhohman"}, "edited": false, "score": 0, "creation_date": 1514417997, "post_id": 47999638, "comment_id": 82968279, "body": "Something like this: <a href=\"https://drive.google.com/file/d/1-X7l9gR22R2uknO-dJqC6qjVXY2f6DSQ/view?usp=sharing\" rel=\"nofollow noreferrer\">drive.google.com/file/d/1-X7l9gR22R2uknO-dJqC6qjVXY2f6DSQ/&hellip;</a>  Thanks!"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1514418619, "post_id": 47999638, "comment_id": 82968408, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem. We should be able to paste your posted code into a text file and reproduce the problem you described."}], "answers": [{"tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": false, "score": 0, "last_activity_date": 1514436534, "creation_date": 1514436534, "answer_id": 48001707, "question_id": 47999638, "link": "https://stackoverflow.com/questions/47999638/how-can-i-make-my-lines-not-cross-with-turtle/48001707#48001707", "title": "How can I make my lines not cross with Turtle?", "body": "<p>The obvious way seems to be using <em>fill</em>:</p>\n\n<pre><code>import turtle\n\nturtle.color('black', 'white')\nturtle.speed('fastest')\n\nfor i in range(140, 0, -20):\n    turtle.up()\n    turtle.setposition(i, 160)\n    turtle.down()\n    turtle.setheading(90)\n    turtle.circle(i)\n\nfor i in range(160, 0, -20):\n    turtle.up()\n    turtle.setposition(i, 0)\n    turtle.down()\n    turtle.setheading(90)\n    turtle.begin_fill()\n    turtle.circle(i, 180)\n    turtle.end_fill()\n\nturtle.hideturtle()\nturtle.mainloop()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Y3GBM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Y3GBM.png\" alt=\"enter image description here\"></a></p>\n\n<p>But since you indicate you don't want to use <em>fill</em>, another approach is to use <em>stamping</em>:</p>\n\n<pre><code>from turtle import Turtle, Screen\n\nCURSOR_SIZE = 20\n\nscreen = Screen()\n\nturtle = Turtle('circle', visible=False)\nturtle.color('black', 'white')\nturtle.penup()\n\nturtle.sety(140)\n\nfor i in range(240, 0, -40):\n    turtle.shapesize(i / CURSOR_SIZE)\n    turtle.stamp()\n\nturtle.sety(0)\n\nfor i in range(280, 0, -40):\n    turtle.shapesize(i / CURSOR_SIZE)\n    turtle.stamp()\n\nturtle.sety(-10)\n\nturtle.begin_poly()\nturtle.circle(10, 180, 12)\nturtle.end_poly()\n\nscreen.register_shape(\"semicircle\", turtle.get_poly())\nturtle.shape(\"semicircle\")\n\nturtle.sety(-160)\n\nfor i in range(320, 0, -40):\n    turtle.shapesize(i / CURSOR_SIZE)\n    turtle.stamp()\n\nscreen.mainloop()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/ndoXK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ndoXK.png\" alt=\"enter image description here\"></a></p>\n\n<p>But if neither of those appeals to you, you could simply <em>draw</em> the image by calculating where the starting point of each arc is on the circle below it to avoid the overlapping lines.  I.e. do the math.</p>\n"}], "owner": {"reputation": 31, "user_id": 9147054, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214449534129975/picture?type=large", "display_name": "Juan Manuel Ruiz Manso", "link": "https://stackoverflow.com/users/9147054/juan-manuel-ruiz-manso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 315, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1514505103, "creation_date": 1514415855, "last_edit_date": 1514505103, "question_id": 47999638, "link": "https://stackoverflow.com/questions/47999638/how-can-i-make-my-lines-not-cross-with-turtle", "title": "How can I make my lines not cross with Turtle?", "body": "<p>This is part of my code (not ready yet). I need to make lines of the circles not cross, pretending to be overlaying objects. I'd like not to fill in the blank circles. Thanks in advance!</p>\n\n<pre><code># G7\nfor i in range (140,0,-20):\n    turtle.up()\n    turtle.sety(160)\n    turtle.setx(i)\n    turtle.down()\n    turtle.setheading(90)\n    turtle.circle(i)\n\n# G8\nfor i in range (160,0,-20):\n    turtle.up()\n    turtle.sety(0)\n    turtle.setx(i)\n    turtle.down()\n    turtle.setheading(90)\n    turtle.circle(i,180)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/kU8L8.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kU8L8.jpg\" alt=\"Python Drawing.jpg\"></a></p>\n"}, {"tags": ["python", "eulers-number"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1514416002, "post_id": 47999634, "comment_id": 82967796, "body": "Your approach tries 999 &#215; 100 before it tries 998 &#215; 999. Which one do you think is bigger?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8831891"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1514416113, "post_id": 47999634, "comment_id": 82967836, "body": "@Ryan Oups! You are right, thank you very much!"}, {"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 4, "creation_date": 1514416369, "post_id": 47999634, "comment_id": 82967905, "body": "<code>def palindrome(num): return str(num) == str(num)[::-1]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1514418631, "post_id": 47999724, "comment_id": 82968411, "body": "<a href=\"https://gist.github.com/ryan-copperleaf/a3d5861caca54de4ee39726d7fb3a879\" rel=\"nofollow noreferrer\">gist.github.com/ryan-copperleaf/&hellip;</a>"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8831891"}, "is_accepted": false, "score": 0, "last_activity_date": 1514416621, "creation_date": 1514416621, "answer_id": 47999724, "question_id": 47999634, "link": "https://stackoverflow.com/questions/47999634/project-euler-largest-palindrome-product-of-two-3-digit-number/47999724#47999724", "title": "Project Euler: Largest palindrome product of two 3-digit number", "body": "<p><strong>New code:</strong></p>\n\n<pre><code>def reverse(str, aux=''):\n    count = len(str)\n    while count &gt; 0:\n        aux += str[count-1]\n        count -= 1\n    return aux\n\ndef palindrome(num):\n    j = str(num)\n    if j == reverse(j):\n        return 1\n    else:\n        return 0\n\ni = 999\nmax = 0\nwhile i &gt; 99:\n    j = 999\n    while j &gt; 99:\n        num = i * j\n        if palindrome(num):\n            if num &gt; max:\n                max = num\n                print(max)\n        j -= 1\n    i -= 1\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8831891"}, "edited": false, "score": 0, "creation_date": 1514454837, "post_id": 48000539, "comment_id": 82978633, "body": "Thank so much @CristiFati, I took my time to read it and it really benefited me. One question, the result you get (998899) is made of the product of which numbers? Because it is definitely higher than 906609, but the Project Euler&#39;s question allowed 906609 as a correct answer."}], "tags": [], "owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "is_accepted": true, "score": 0, "last_activity_date": 1514463798, "last_edit_date": 1514463798, "creation_date": 1514424402, "answer_id": 48000539, "question_id": 47999634, "link": "https://stackoverflow.com/questions/47999634/project-euler-largest-palindrome-product-of-two-3-digit-number/48000539#48000539", "title": "Project Euler: Largest palindrome product of two 3-digit number", "body": "<p>Took some time and studied the problem. I tried taking the reversed approach (starting from palindrome numbers, and find their dividers (if any)). Using <em>Py354</em> on <em>Win10</em>.</p>\n\n<p><em>code.py</em>:</p>\n\n<pre><code>import time\nfrom math import sqrt\n\n\ndef reverse(str, aux=''):\n    count = len(str)\n    while count &gt; 0:\n        aux += str[count-1]\n        count -= 1\n    return aux\n\n\ndef palindrome(num):\n    j = str(num)\n    if j == reverse(j):\n        return 1\n    else:\n        return 0\n\n\ndef question_makhfi_0():\n    ret = 0\n    i = 999\n    found = 0\n    while i &gt; 99 and not found:\n        j = 999\n        while j &gt; 99 and not found:\n            if palindrome(i * j):\n                found = 1\n                ret = i * j\n            else:\n                j -= 1\n        if not found:\n            i -= 1\n    return ret, i, j\n\n\ndef answer_makhfi_0():\n    i = 999\n    _max = 0\n    while i &gt; 99:\n        j = 999\n        while j &gt; 99:\n            num = i * j\n            if palindrome(num):\n                if num &gt; _max:\n                    _max = num\n                    factor0, factor1 = i, j\n            j -= 1\n        i -= 1\n    return _max, factor0, factor1\n\n\n\"\"\"\ndef answer_makhfi__0_improved_0():\n    i = j = 999\n    prod = i * j\n    step = 0\n    while prod &gt; 100000:\n        if step % 2:\n            i -= 1\n        else:\n            j -= 1\n        prod = i * j\n        prod_str = str(prod)\n        if prod_str == prod_str[::-1]:\n            return prod\n        step += 1\n\"\"\"\n\n\ndef answer_cfati_0():\n    pal = 999999\n    while pal &gt;= 900009:\n        if pal % 10 == 9:\n            pal_str = str(pal)\n            if pal_str == pal_str[::-1]:\n                pal_sqrt = sqrt(pal)\n                for factor0 in range(101, int(pal_sqrt) + 1):\n                    if pal % factor0 == 0:\n                        factor1 = int(pal / factor0)\n                        if 100 &lt;= factor1 &lt;= 999:\n                            return pal, factor0, factor1\n        pal -= 10\n    #return pal\n\n\ndef time_func(f, *args):\n    t0 = time.time()\n    res = f(*args)\n    t1 = time.time()\n    return t1 - t0, res\n\n\nif __name__ == \"__main__\":\n    for func in [question_makhfi_0, answer_makhfi_0, answer_cfati_0]:\n        print(\"\\nStarting: {}\".format(func.__name__))\n        #print(func.__name__)\n        res = time_func(func)\n        print(\"  Time: {:.6f}\\n  Result: {}\".format(*res))\n</code></pre>\n\n<p><strong>Notes</strong>:</p>\n\n<ul>\n<li>Turned your code into functions (doing all required adjustments, and <strong>omitting</strong> everything that involves performance)</li>\n<li>Added an additional func that measures execution time</li>\n<li><code>answer_makhfi_0</code>:\n\n<ul>\n<li>replaced <code>max</code> by <code>_max</code> to avoid shadowing builtin names</li>\n<li>added a <code>return</code> statement at the end (highly inefficient, anyway)</li>\n</ul></li>\n<li><code>answer_cfati_0</code>:\n\n<ul>\n<li>The code assumes there's a palindrome number in the <code>[900009, 999999]</code> range, that can be expressed as a 2 (3 digit) numbers product. It's fair to assume that (tests support this). However if aiming for <em>bullet proof</em> code, this form won't do it, I'll have to adjust it a bit (it will be a loss performance-wise)</li>\n<li>It uses all kinds of mathematical/logical \"shortcuts\" to avoid computing uselessly (I think code could also be improved on that direction).</li>\n</ul></li>\n</ul>\n\n<p><strong>Output</strong>:</p>\n\n<blockquote>\n<pre><code>\"e\\Work\\Dev\\StackOverflow\\q47999634&gt;\"e:\\Work\\Dev\\VEnvs\\py35x64_test\\Scripts\\python.exe\" code.py\n\nStarting: question_makhfi_0\n  Time: 0.008551\n  Result: (580085, 995, 583)\n\nStarting: answer_makhfi_0\n  Time: 1.457818\n  Result: (906609, 993, 913)\n\nStarting: answer_cfati_0\n  Time: 0.012599\n  Result: (906609, 913, 993)\n</code></pre>\n</blockquote>\n\n<p>According to the output, differences between <strong>original</strong> and <strong>new</strong> code (for <em>one</em> run, as times vary):</p>\n\n<ul>\n<li>Largest palindrome number: <em>906609</em> - <em>906609</em></li>\n<li>Time to calculate it: <em>1.457818</em> - <em>0.012599</em></li>\n</ul>\n\n<p><em><strong>@EDIT0</strong></em>:</p>\n\n<ul>\n<li>Thanks to your comment, I found a (critical) logical error (and some small ones) in my code: it was returning <em>998899</em> (<em>781</em> * <em>1279</em>). After fixing them, the performance decreased by one order of magnitude, but it's still fast</li>\n<li>Modified functions to also return the factors (for checking)</li>\n</ul>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8831891"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7813, "favorite_count": 0, "accepted_answer_id": 48000539, "answer_count": 2, "score": 1, "last_activity_date": 1515170204, "creation_date": 1514415836, "last_edit_date": 1515170204, "question_id": 47999634, "link": "https://stackoverflow.com/questions/47999634/project-euler-largest-palindrome-product-of-two-3-digit-number", "title": "Project Euler: Largest palindrome product of two 3-digit number", "body": "<p>I get <strong>580085</strong>, why is it wrong? And is there another way to check whether a number is a palindrome?</p>\n\n<pre><code>def reverse(str, aux=''):\n    count = len(str)\n    while count &gt; 0:\n        aux += str[count-1]\n        count -= 1\n    return aux\n\ndef palindrome(num):\n    j = str(num)\n    if j == reverse(j):\n        return 1\n    else:\n        return 0\n\ni = 999\nfound = 0\nwhile i &gt; 99 and not found:\n    j = 999\n    while j &gt; 99 and not found:\n        if palindrome(i * j):\n            found = 1\n            print(i * j)\n        else:\n            j -= 1\n    if not found:\n        i -= 1\n</code></pre>\n\n<p>My post is mostly code, but I don't have anything else to say.</p>\n"}, {"tags": ["python", "pygame"], "comments": [{"owner": {"reputation": 1285, "user_id": 8955448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDG4Z.jpg?s=128&g=1", "display_name": "Galen", "link": "https://stackoverflow.com/users/8955448/galen"}, "edited": false, "score": 1, "creation_date": 1514417012, "post_id": 47999608, "comment_id": 82968068, "body": "Please see <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask</a> and provide a <a href=\"https://stackoverflow.com/help/mcve\">minimal, complete, and verifiable example</a>."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1514425020, "post_id": 47999608, "comment_id": 82969731, "body": "use <code>while True</code> loop to check events. And use <code>pygame.time</code> instead of <code>sleep</code> to control objects"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1514425085, "post_id": 47999608, "comment_id": 82969746, "body": "see example <a href=\"https://github.com/furas/python-examples/tree/master/pygame/time-control-object\" rel=\"nofollow noreferrer\">time-control-object</a>"}], "answers": [{"tags": [], "owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "is_accepted": false, "score": 1, "last_activity_date": 1514426641, "last_edit_date": 1514426641, "creation_date": 1514425690, "answer_id": 48000669, "question_id": 47999608, "link": "https://stackoverflow.com/questions/47999608/how-to-make-the-screen-wait-for-user-input/48000669#48000669", "title": "how to make the screen wait for user input", "body": "<p>I don't know what you try to do but I would use <code>while</code> loop to check keys till you change <code>run_me</code> or <code>stage2</code>.</p>\n\n<pre><code>if stage2 == 1:\n\n    screen.fill(black)\n    pygame.display.flip()\n\n    time.sleep(1)\n\n    screen.fill(blue)\n    pygame.display.flip()\n\n    time.sleep(0.25)\n\n    screen.fill(black)\n    pygame.display.flip()\n\n    while run_me and stage2 == 1:\n        for event in pygame.event.get():\n            if event.type == pygame.QUIT:\n                run_me = False\n            if event.type == pygame.KEYDOWN:\n                if event.key == pygame.K_LEFT:\n                    screen.fill(red)\n                    stage2 = stage2 + 1\n            if event.type == pygame.KEYDOWN:\n                if event.key == pygame.K_RIGHT:\n                    screen.fill(white)\n                    stage2 = stage2 + 1\n            if event.type == pygame.KEYDOWN:\n                if event.key == pygame.K_UP:\n                    screen.fill(blue)\n                    stage3 = stage3 + 1\n            if event.type == pygame.KEYDOWN:\n                if event.key == pygame.K_DOWN:\n                    screen.fill(green)\n                    stage2 = stage2 + 1\n</code></pre>\n\n<p>It may not work with rest of code but you didn't show rest of code.</p>\n\n<p>It will not check keys when you use <code>sleep()</code> so you may have to rethink your code and use something different. ie.</p>\n\n<pre><code>def wait(time)\n\n    quit = False\n    key = None\n\n    current_time = pygame.time.get_ticks()\n    end_time = current_time + time*1000\n\n    while end_time &gt; current_time and not key and not quit:\n\n        clock.ticks(25)\n\n        for event in pygame.event.get():\n            if event.type == pygame.QUIT:\n                quit = True\n            elif event.type == pygame.KEYDOWN:\n                key = event.key\n\n        current_time = pygame.time.get_ticks()\n\n    return quit, key\n\n\nif stage2 == 1:\n\n    screen.fill(black)\n    pygame.display.flip()\n\n    quit, key = wait(1)\n    if quit:\n        run_me = False\n    # - or -\n    #run_me = not quit\n\n    screen.fill(blue)\n    pygame.display.flip()\n\n    quit, key = wait(0.25)\n    if quit:\n        run_me = False\n    # - or -\n    #run_me = not quit\n\n    screen.fill(black)\n    pygame.display.flip()\n</code></pre>\n\n<p>Of course it still may not work with rest of code as you expect.</p>\n"}], "owner": {"reputation": 35, "user_id": 9080151, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fb80d290a6442d07f4c37d4c95b303e9?s=128&d=identicon&r=PG&f=1", "display_name": "Lumeriaux Yt", "link": "https://stackoverflow.com/users/9080151/lumeriaux-yt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1514426641, "creation_date": 1514415673, "last_edit_date": 1514422387, "question_id": 47999608, "link": "https://stackoverflow.com/questions/47999608/how-to-make-the-screen-wait-for-user-input", "title": "how to make the screen wait for user input", "body": "<p>while creating my game, I came across this bug that I thought I got rid of while test playing, however when I kept trying to fix it, it made the code not work. help!</p>\n\n<pre><code>if stage2 == 1:\n    screen.fill(black)\n    pygame.display.flip()\n    time.sleep(1)\n    screen.fill(blue)\n    pygame.display.flip()\n    time.sleep(0.25)\n    screen.fill(black)\n    pygame.display.flip()\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            run_me = False\n        if event.type == pygame.KEYDOWN:\n            if event.key == pygame.K_LEFT:\n                screen.fill(red)\n                stage2 = stage2 + 1\n        if event.type == pygame.KEYDOWN:\n            if event.key == pygame.K_RIGHT:\n                screen.fill(white)\n                stage2 = stage2 + 1\n        if event.type == pygame.KEYDOWN:\n            if event.key == pygame.K_UP:\n                screen.fill(blue)\n                stage3 = stage3 + 1\n        if event.type == pygame.KEYDOWN:\n            if event.key == pygame.K_DOWN:\n                screen.fill(green)\n                stage2 = stage2 + 1\n</code></pre>\n\n<p>by the way the code for color and everything else is further up the code, but lets just say that you can see it.</p>\n\n<p>when ever I run this code the screen keeps flashing blue, HELP!</p>\n"}, {"tags": ["python", "pandas", "matplotlib"], "comments": [{"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1514416434, "post_id": 47999583, "comment_id": 82967922, "body": "When I run your code, I am gettting x-axis in the format of dates, YYYY-MM-DD.  You my try resetting rcdefaults().  <code>import matplotlib as mpl</code> <code>mpl.rcdefaults()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 5078554, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/X8b88.jpg?s=128&g=1", "display_name": "egodial", "link": "https://stackoverflow.com/users/5078554/egodial"}, "edited": false, "score": 0, "creation_date": 1514424103, "post_id": 47999764, "comment_id": 82969550, "body": "Both are elegant solutions! and worked. I&#39;ll stick with #2 because it does not add further lines to my code. Thank you! Edit: Thanks for the edits."}], "tags": [], "owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "is_accepted": false, "score": 1, "last_activity_date": 1514417451, "last_edit_date": 1514417451, "creation_date": 1514417006, "answer_id": 47999764, "question_id": 47999583, "link": "https://stackoverflow.com/questions/47999583/matplotlib-is-not-automatically-reading-dataframe-as-date/47999764#47999764", "title": "matplotlib is not automatically reading dataframe as date", "body": "<h2>Solution 1</h2>\n\n<p>Use pandas <code>.plot</code> on the dataframe:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nfrom datetime import datetime, timedelta\ndate_today = datetime.now()\ndays = pd.date_range(date_today, date_today + timedelta(7), freq='D')\nnp.random.seed(seed=1111)\ndata = np.random.randint(1, high=100, size=len(days))\ndf = pd.DataFrame({'test': days, 'col2': data})\ndf = df.set_index('test')\n# creates graph:\nimport matplotlib.pyplot as plt\nsub = df.plot()\nfig = plt.xticks(rotation=30), plt.legend(loc='best'), plt.xlabel(\"Weeks\")\nfig = plt.style.use(['bmh', 'seaborn-paper'])\nfig = plt.title(\"Index\", fontsize=14, fontweight='bold') \n</code></pre>\n\n<h1>Solution 2</h1>\n\n<p>Convert them Python datetime objects:</p>\n\n<pre><code>fig = plt.plot(df.index.to_pydatetime(), df[\"col2\"])\n</code></pre>\n\n<h2>Result of both approaches</h2>\n\n<p><a href=\"https://i.stack.imgur.com/g18bJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/g18bJ.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 2221, "user_id": 3394386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f36befa47364f055cb5980fc4e14b7a6?s=128&d=identicon&r=PG&f=1", "display_name": "Jody Klymak", "link": "https://stackoverflow.com/users/3394386/jody-klymak"}, "is_accepted": true, "score": 1, "last_activity_date": 1515016675, "creation_date": 1515016675, "answer_id": 48085740, "question_id": 47999583, "link": "https://stackoverflow.com/questions/47999583/matplotlib-is-not-automatically-reading-dataframe-as-date/48085740#48085740", "title": "matplotlib is not automatically reading dataframe as date", "body": "<p>Pandas used to import the units handlers for datetime64, but as of 0.21 stopped (though it may be back for 0.22).  The way to get the old behaviour without explicit conversion is</p>\n\n<pre><code>from pandas.tseries import converter as pdtc\npdtc.register()\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 5078554, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/X8b88.jpg?s=128&g=1", "display_name": "egodial", "link": "https://stackoverflow.com/users/5078554/egodial"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 48085740, "answer_count": 2, "score": 0, "last_activity_date": 1515016675, "creation_date": 1514415450, "last_edit_date": 1514417132, "question_id": 47999583, "link": "https://stackoverflow.com/questions/47999583/matplotlib-is-not-automatically-reading-dataframe-as-date", "title": "matplotlib is not automatically reading dataframe as date", "body": "<p>Since pandas last update, the x axis is not reading the index as a date. Any clues on what changed? As an example, the following code (<a href=\"https://stackoverflow.com/questions/42941310/creating-pandas-dataframe-with-datetime-index-and-random-values-in-column\">Source</a>) creates a random df. The matplotlib part is exactly what I'm have been doing with my real dataset (dates in my data where made using <code>time.strftime(\"%Y-%m-%d\")</code>):</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nfrom datetime import datetime, timedelta\ndate_today = datetime.now()\ndays = pd.date_range(date_today, date_today + timedelta(7), freq='D')\nnp.random.seed(seed=1111)\ndata = np.random.randint(1, high=100, size=len(days))\ndf = pd.DataFrame({'test': days, 'col2': data})\ndf = df.set_index('test')\n# creates graph:\nimport matplotlib.pyplot as plt\nfig = plt.plot(df.index, df[\"col2\"])\nfig = plt.xticks(rotation=30), plt.legend(loc='best'), plt.xlabel(\"Weeks\")\nfig = plt.style.use(['bmh', 'seaborn-paper'])\nfig = plt.title(\"Index\", fontsize=14, fontweight='bold')\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/SADqF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SADqF.png\" alt=\"Graph\"></a></p>\n\n<p>The resulting graph has the x axis in number format. Before updating, my graphs automatically had dates in the index (because the index is in date format).</p>\n"}, {"tags": ["java", "python", "selenium", "firefox", "geckodriver"], "comments": [{"owner": {"reputation": 8275, "user_id": 4512398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yjm4v.jpg?s=128&g=1", "display_name": "Grasshopper", "link": "https://stackoverflow.com/users/4512398/grasshopper"}, "edited": false, "score": 0, "creation_date": 1514424984, "post_id": 47999568, "comment_id": 82969726, "body": "try this to kill process from tasklist - <a href=\"https://stackoverflow.com/questions/81902/how-to-find-and-kill-running-win-processes-from-within-java\" title=\"how to find and kill running win processes from within java\">stackoverflow.com/questions/81902/&hellip;</a>."}], "answers": [{"tags": [], "owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "is_accepted": true, "score": 17, "last_activity_date": 1579872045, "last_edit_date": 1579872045, "creation_date": 1514445592, "answer_id": 48003289, "question_id": 47999568, "link": "https://stackoverflow.com/questions/47999568/selenium-how-to-stop-geckodriver-process-impacting-pc-memory-without-calling/48003289#48003289", "title": "Selenium : How to stop geckodriver process impacting PC memory, without calling driver.quit()?", "body": "<p>As per your question commenting out <strong><code>driver.quit()</code></strong> just <code>Not to close firefox window after each run, because I just want to analyse what I have</code> won't be a part of best practices.</p>\n\n<p><strong>For any detailed analysis we can create log entries and take snapshots.</strong></p>\n\n<p>While automating through <strong><code>Selenium</code></strong> as per the best practices you should invoke the <strong><code>quit()</code></strong> method within the <code>tearDown() {}</code>. Invoking <strong><code>quit()</code></strong> <code>DELETE</code>s the current browsing session through sending <strong>\"quit\"</strong> command with <strong>{\"flags\":[\"eForceQuit\"]}</strong> and finally sends the <strong>GET</strong> request on <strong>/shutdown</strong> <code>EndPoint</code>. Here is an example below :</p>\n\n<pre><code>1503397488598   webdriver::server   DEBUG   -&gt; DELETE /session/8e457516-3335-4d3b-9140-53fb52aa8b74 \n1503397488607   geckodriver::marionette TRACE   -&gt; 37:[0,4,\"quit\",{\"flags\":[\"eForceQuit\"]}]\n1503397488821   webdriver::server   DEBUG   -&gt; GET /shutdown\n</code></pre>\n\n<p>So on invoking <strong><code>quit()</code></strong> method the <code>Web Browser</code> session and the <code>WebDriver</code> instance gets killed completely. Hence you don't have to incorporate any additional steps which will be an overhead.</p>\n\n<hr>\n\n<h2>Solution</h2>\n\n<p>Still if you want to execute kill the dangling <code>WebDriver</code> instances e.g. <strong><code>GeckoDriver.exe</code></strong> instances you can use either of the following code block to kill any of the dangling <code>WebDriver</code> instances :</p>\n\n<ul>\n<li><p>Java Solution(Windows):</p>\n\n<pre><code>import java.io.IOException;\n\npublic class Kill_ChromeDriver_GeckoDriver_IEDriverserver \n{\n    public static void main(String[] args) throws Exception \n    {\n        Runtime.getRuntime().exec(\"taskkill /F /IM geckodriver.exe /T\");\n        Runtime.getRuntime().exec(\"taskkill /F /IM chromedriver.exe /T\");\n        Runtime.getRuntime().exec(\"taskkill /F /IM IEDriverServer.exe /T\");\n    }\n}\n</code></pre></li>\n<li><p>Python Solution (Windows):</p>\n\n<pre><code>import os\nos.system(\"taskkill /f /im geckodriver.exe /T\")\nos.system(\"taskkill /f /im chromedriver.exe /T\")\nos.system(\"taskkill /f /im IEDriverServer.exe /T\")\n</code></pre></li>\n<li><p>Python Solution(<strong>Cross Platform</strong>): </p>\n\n<pre><code>import os\nimport psutil\n\nPROCNAME = \"geckodriver\" # or chromedriver or IEDriverServer\nfor proc in psutil.process_iter():\n    # check whether the process name matches\n    if proc.name() == PROCNAME:\n        proc.kill()\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 594, "user_id": 4396274, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/e789bda25b526cb74b8269891942e8ef?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/4396274/dmitry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10319, "favorite_count": 5, "accepted_answer_id": 48003289, "answer_count": 1, "score": 11, "last_activity_date": 1579872045, "creation_date": 1514415334, "last_edit_date": 1538404646, "question_id": 47999568, "link": "https://stackoverflow.com/questions/47999568/selenium-how-to-stop-geckodriver-process-impacting-pc-memory-without-calling", "title": "Selenium : How to stop geckodriver process impacting PC memory, without calling driver.quit()?", "body": "<p>There is a test, smth like:</p>\n\n<pre><code> import //needed imports\n\n public class TestClass{\n    WebDriver driver;\n\n    @Before\n    public void setUp() {\n       //some code\n    }\n\n    @Test\n    public void test1() {\n       //some code, including init of driver (geckodriver)\n    }\n\n   //@After\n   // public void tearDown() {\n   //  driver.quit();\n   //}\n}\n</code></pre>\n\n<p>So, I inited geckodriver, and successfully running my tests, using firefox instances. \nBut I want Not to close firefox window after each run, because I just want to analyse what I have, and fix any needed, after test run(I'm going to unComment driver.quit() later).\nAt the same time, each calling without closing the driver leads to over-impact to RAM on my PC(and does not matter - did I close browser manually, or not, after test):\n<a href=\"https://i.stack.imgur.com/PuMzN.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/PuMzN.png\" alt=\"enter image description here\"></a></p>\n\n<p>So, question is:\nis there any way to close the process(more precisely - do smth, which will close geckodriver.exe process in taskmgr) of \"geckodriver\", but will NOT close the browser after test finished? e.g., adding some method in test itself, whatever... This not impacts my work/test itself, I just want to add some optimizing.</p>\n"}, {"tags": ["python", "tkinter", "global-variables"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 4, "creation_date": 1514415406, "post_id": 47999555, "comment_id": 82967639, "body": "When they &quot;leave your application,&quot; how would they access this global variable?"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 2, "creation_date": 1514415513, "post_id": 47999555, "comment_id": 82967676, "body": "Why do you need a unique variable name? Why not just store the data in a dictionary?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1514415552, "post_id": 47999555, "comment_id": 82967693, "body": "&quot;stored as a global variable, so that it is available with that name, when the user leaves my application&quot; - you seem to be expecting globals to be so global that they&#39;re shared between separate executions of your program. They&#39;re not. Globals go away when your program ends."}, {"owner": {"reputation": 5, "user_id": 5272702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ec1cdc8c1aee74ed7751161e99b06f?s=128&d=identicon&r=PG&f=1", "display_name": "lvdp", "link": "https://stackoverflow.com/users/5272702/lvdp"}, "edited": false, "score": 0, "creation_date": 1514469797, "post_id": 47999555, "comment_id": 82985888, "body": "To clarify the reason and how they can access the global variable after leaving my application: They work e.g. Spyder. To get access to data in an easy way, the user there runs my application, select what they need, give it the name they want, and then exit my program. Then they can go on in Spyder with that dataframe."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 5272702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ec1cdc8c1aee74ed7751161e99b06f?s=128&d=identicon&r=PG&f=1", "display_name": "lvdp", "link": "https://stackoverflow.com/users/5272702/lvdp"}, "edited": false, "score": 0, "creation_date": 1514479561, "post_id": 47999676, "comment_id": 82990827, "body": "Thanks to your info I found a workable solution:      var = self.pythonVar.get()     glb = globals()     glb[var] = pd.DataFrame({&#39;AAA&#39; : [1., 2., 3., 4.], &#39;BBB&#39; : [43., 32., 21., 10.]})"}], "tags": [], "owner": {"reputation": 10223, "user_id": 7032856, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-v2P-pqI1pww/AAAAAAAAAAI/AAAAAAAAABg/BHOFSOpQ0BM/photo.jpg?sz=128", "display_name": "Nae", "link": "https://stackoverflow.com/users/7032856/nae"}, "is_accepted": false, "score": 2, "last_activity_date": 1514416200, "creation_date": 1514416200, "answer_id": 47999676, "question_id": 47999555, "link": "https://stackoverflow.com/questions/47999555/how-can-i-in-my-python-tkinter-gui-allow-the-user-to-specify-the-name-of-the/47999676#47999676", "title": "How can I - in my Python tkinter GUI - allow the user to specify the name of the global variable in which I want to store my dataframe?", "body": "<p><a href=\"https://stackoverflow.com/q/19122345/7032856\">Standard way of doing this</a> is to store it in a dictionary that has the user's desired key as in:</p>\n\n<pre><code>def save(self):\n    global df \n    df = pd.DataFrame({'AAA' : [1., 2., 3., 4.], 'BBB' : [4., 3., 2., 1.]})\n</code></pre>\n\n<p>should simply be replaced with:</p>\n\n<pre><code>def save(self):\n    global df\n    user_spec = self.pythonVar.get()\n    df[user_spec] = pd.DataFrame({'AAA' : [1., 2., 3., 4.], 'BBB' : [4., 3., 2., 1.]})\n</code></pre>\n\n<p>while also declaring <code>df</code> as a dictionary in the global scope, for example in 'main':</p>\n\n<pre><code>if __name__ == \"__main__\":\n    df = dict()\n    PyDataTest().mainloop()\n</code></pre>\n\n<hr>\n\n<p>A <strong>dangerous, and error-prone</strong> way would be to use <code>exec</code> or <code>eval</code> built-in method, like in <a href=\"https://stackoverflow.com/a/19122532/7032856\">here</a>.</p>\n"}], "owner": {"reputation": 5, "user_id": 5272702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ec1cdc8c1aee74ed7751161e99b06f?s=128&d=identicon&r=PG&f=1", "display_name": "lvdp", "link": "https://stackoverflow.com/users/5272702/lvdp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 366, "favorite_count": 0, "closed_date": 1514479490, "answer_count": 1, "score": 0, "last_activity_date": 1514416200, "creation_date": 1514415218, "last_edit_date": 1514415452, "question_id": 47999555, "link": "https://stackoverflow.com/questions/47999555/how-can-i-in-my-python-tkinter-gui-allow-the-user-to-specify-the-name-of-the", "closed_reason": "Duplicate", "title": "How can I - in my Python tkinter GUI - allow the user to specify the name of the global variable in which I want to store my dataframe?", "body": "<p>In my tkinter GUI the user can generate a pandas dataframe (in the example I take a fixed one).\nIn the GUI the user can enter a name and click the save button.\nThe idea is that the dataframe is than stored as a global variable, so that it is available with that name, when the user leaves my application.\nI would also like to keep track of the variables he created in a combobox.\nAnyone who can help me with this results in n error message, such as\nglobal df\n         ^\nSyntaxError: invalid syntax</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#%% Import libraries\nimport tkinter as tk\nimport tkinter.ttk as ttk\nimport tkinter.messagebox as messagebox\nimport pandas as pd\n\n#%% Main class\nclass PyDataTest(ttk.Frame):\n    def __init__(self, master = None):\n        # Construct the Frame object.\n        ttk.Frame.__init__(self, master)\n        self.grid(sticky=tk.N+tk.S+tk.E+tk.W)\n        self.createWidgets()\n\n    def save(self):\n        global df \n        df = pd.DataFrame({'AAA' : [1., 2., 3., 4.], 'BBB' : [4., 3., 2., 1.]})\n        messagebox.showinfo(\"Info\",\"pandas dataframe saved as df\")\n#        eval(\"global \" + self.pythonVar.get())\n#        eval(self.pythonVar.get() + \" = self.pyTable.data\")\n#        messagebox.showinfo(\"Info\",\"pandas dataframe saved as \" + self.pythonVar.get())\n\n    #%% Create widgets\n    def createWidgets(self):\n        # Get top window \n        self.top = self.winfo_toplevel()\n\n        # Make it stretchable         \n        self.top.rowconfigure(0, weight=1)\n        self.top.columnconfigure(0, weight=1)\n\n        # Allow to enter a name and save the data in the base workspace\n        ttk.Label(self, text = \"Variable\").grid(row = 0, column = 0, sticky = tk.W, padx =5, pady=5)\n        self.pythonVar = tk.StringVar()\n        self.pythonVar.set('d')\n        ttk.Entry(self, textvariable=self.pythonVar).grid(row = 0, column = 1, sticky = tk.W, padx =5, pady=5)\n        # Save button\n        ttk.Button(self, text = \"Save\", command=self.save).grid(row = 0, column = 2, sticky = tk.W, padx =5, pady=5)\n\n        # Combobox showing dataframes stored\n        ttk.Label(self, text = \"Dataframes\").grid(row = 1, column = 0, sticky = tk.W, padx =5, pady=5)\n        comboboxDataframes = ttk.Combobox(self)\n#        variables= [var for var in dir() if isinstance(eval(var), pd.core.frame.DataFrame)]\n#        comboboxDataframes['values'] = variables\n        comboboxDataframes.grid(row = 1, column = 1, sticky = tk.W, padx =5, pady=5)    \n\n#%% Allow the class to run stand-alone.\nif __name__ == \"__main__\":\n    PyDataTest().mainloop()\n</code></pre>\n"}, {"tags": ["python", "list", "recursion"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1514415300, "post_id": 47999547, "comment_id": 82967619, "body": "<code>dayqvalue()</code> needs to take <code>q</code> as a parameter."}, {"owner": {"reputation": 105, "user_id": 8794630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2f2787a461ebb8547c8bc07dba0bf4a?s=128&d=identicon&r=PG&f=1", "display_name": "AleB", "link": "https://stackoverflow.com/users/8794630/aleb"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1514415371, "post_id": 47999547, "comment_id": 82967635, "body": "Isn&#39;t there a way to do it without modifying that function which computes q value over a single day?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1514415492, "post_id": 47999547, "comment_id": 82967668, "body": "Maybe I don&#39;t really understand what you&#39;re saying. You talk about a sum, so is <code>q</code> a number or a list? Can you show examples of what this should do on a few iterations?"}, {"owner": {"reputation": 105, "user_id": 8794630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2f2787a461ebb8547c8bc07dba0bf4a?s=128&d=identicon&r=PG&f=1", "display_name": "AleB", "link": "https://stackoverflow.com/users/8794630/aleb"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1514415970, "post_id": 47999547, "comment_id": 82967787, "body": "<code>q</code> is a list of 1000 elements.  Everytime I should add entry by entry a new list of 1000 elements to the previous one. For instance, assume to have <code>q</code>computed when <code>i=0</code> and when <code>i=1</code>. I would obtain <code>newq = [q_0[0] + q_1[0] , q_0[1] + q_1[1]]</code> in the first 2 entry. The list <code>newq</code> should be of the same lenght of <code>q_0</code> and <code>q_1</code>. It should contain the sum of their values entry by entry."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1514416022, "post_id": 47999547, "comment_id": 82967806, "body": "Put the clarification in the quesiton, not a comment."}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 8794630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2f2787a461ebb8547c8bc07dba0bf4a?s=128&d=identicon&r=PG&f=1", "display_name": "AleB", "link": "https://stackoverflow.com/users/8794630/aleb"}, "edited": false, "score": 0, "creation_date": 1514416841, "post_id": 47999690, "comment_id": 82968024, "body": "This seems exactly what I wanted to do. In this way after each time the loop run, I have the desired list q. Thank you!"}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 0, "last_activity_date": 1514416326, "creation_date": 1514416326, "answer_id": 47999690, "question_id": 47999547, "link": "https://stackoverflow.com/questions/47999547/recursive-formula-inside-a-for-loop/47999690#47999690", "title": "Recursive formula inside a for loop", "body": "<p>Initialize <code>q</code> to a list of 1000 0's. Then each time through the loop, combine the new <code>q</code> returned from the function to the existing <code>q</code>.</p>\n\n<pre><code>bayesian_prices = [] \nq = [0]*1000\nfor i in range(10):\n    newq = dayqvalue(i, grid, fullData)\n    q = [sum(x) for x in zip(q, newq)]\n    w = compute_dayweights(q)\n    option_data, index_prices, initial_date = get_samedated_opt(fullData, i, 1)\n    callput, tmt, ex, mkt =  orderdata(option_data)\n    baypr = compute_bayesian_prices(w, grid, callput, tmt, ex, index_prices)\n    bayesian_prices.append(baypr)\n</code></pre>\n\n<p>See <a href=\"https://stackoverflow.com/questions/18713321/element-wise-addition-of-2-lists\">Element-wise addition of 2 lists?</a> for other ways to add two lists.</p>\n"}], "owner": {"reputation": 105, "user_id": 8794630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2f2787a461ebb8547c8bc07dba0bf4a?s=128&d=identicon&r=PG&f=1", "display_name": "AleB", "link": "https://stackoverflow.com/users/8794630/aleb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 47999690, "answer_count": 1, "score": -1, "last_activity_date": 1514416326, "creation_date": 1514415170, "last_edit_date": 1514416105, "question_id": 47999547, "link": "https://stackoverflow.com/questions/47999547/recursive-formula-inside-a-for-loop", "title": "Recursive formula inside a for loop", "body": "<p>I need to implement a recursive formula in my code block which is</p>\n\n<pre><code>bayesian_prices = [] \nfor i in range(10):\n    q = dayqvalue(i, grid, fullData)\n    w = compute_dayweights(q)\n    option_data, index_prices, initial_date = get_samedated_opt(fullData, i, 1)\n    callput, tmt, ex, mkt =  orderdata(option_data)\n    baypr = compute_bayesian_prices(w, grid, callput, tmt, ex, index_prices)\n    bayesian_prices.append(baypr)\n</code></pre>\n\n<p>What I need to do regards the computation of \"q\". Everytime I need to compute the q as sum of the old value and the new value obtained from the function \"dayqvalue\". In other words, when i=0 the first list of q values is computed. Then with i=1 I should have a list which is the sum of q computed at 0 and q computed at 1 and so on. The last time that the for loop runs, I should have a list of q which is the sum of all the precedeing lists plus the new one. Is there a simple way to implement it? The list q contains about a thousand elements. </p>\n\n<p><strong>EDIT</strong></p>\n\n<p><code>q</code> is a list of 1000 elements.  Everytime I should add entry by entry a new list of 1000 elements to the previous one. For instance, assume to have <code>q</code>computed when <code>i=0</code> and when <code>i=1</code>. I would obtain <code>newq = [q_0[0] + q_1[0] , q_0[1] + q_1[1]]</code> in the first 2 entry. The list <code>newq</code> should be of the same lenght of <code>q_0</code> and <code>q_1</code>. It should contain the sum of their values entry by entry.</p>\n"}, {"tags": ["python", "windows", "pip", "installation", "pypy"], "answers": [{"comments": [{"owner": {"reputation": 22551, "user_id": 724176, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa470aad3d456ece9ddf1a8b583b22a5?s=128&d=identicon&r=PG", "display_name": "Hugo", "link": "https://stackoverflow.com/users/724176/hugo"}, "edited": false, "score": 0, "creation_date": 1515155283, "post_id": 48001905, "comment_id": 83202923, "body": "When is 5.10.1 due for release?"}], "tags": [], "owner": {"reputation": 10650, "user_id": 1556290, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5b37e6b4ac97453e4ba9dba37954cf79?s=128&d=identicon&r=PG", "display_name": "Armin Rigo", "link": "https://stackoverflow.com/users/1556290/armin-rigo"}, "is_accepted": false, "score": 3, "last_activity_date": 1514438013, "creation_date": 1514438013, "answer_id": 48001905, "question_id": 47999518, "link": "https://stackoverflow.com/questions/47999518/pip-install-with-ensurepip-on-pypy3-5-v5-10-in-windows-7-x64/48001905#48001905", "title": "pip install with ensurepip on PyPy3.5 v5.10 in Windows 7 x64", "body": "<p>The errno module on pypy3 on Windows (which is beta) is indeed incomplete.  This has been fixed after the 5.10.0 release and will be included in the 5.10.1 release.</p>\n"}, {"comments": [{"owner": {"reputation": 325, "user_id": 5182428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/9VGVQ.png?s=128&g=1", "display_name": "green", "link": "https://stackoverflow.com/users/5182428/green"}, "edited": false, "score": 0, "creation_date": 1514457615, "post_id": 48002867, "comment_id": 82980132, "body": "May I unpack the nightly package over my 5.10.0 installation? And at which server the IRC channel is?"}, {"owner": {"reputation": 325, "user_id": 5182428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/9VGVQ.png?s=128&g=1", "display_name": "green", "link": "https://stackoverflow.com/users/5182428/green"}, "edited": false, "score": 0, "creation_date": 1514475619, "post_id": 48002867, "comment_id": 82988854, "body": "Issue at Bitbucket is created."}, {"owner": {"reputation": 1519, "user_id": 2802665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfc7a7a79851f14df65447c32711fc07?s=128&d=identicon&r=PG&f=1", "display_name": "mattip", "link": "https://stackoverflow.com/users/2802665/mattip"}, "reply_to_user": {"reputation": 325, "user_id": 5182428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/9VGVQ.png?s=128&g=1", "display_name": "green", "link": "https://stackoverflow.com/users/5182428/green"}, "edited": false, "score": 1, "creation_date": 1514533082, "post_id": 48002867, "comment_id": 83007291, "body": "You can either unpack over- or next-to-, you can have multiple python/pypy implementations next to eachother as long as you do not depend on your PATH environment variable to select between them, but refer to the exact exe you wish to use"}, {"owner": {"reputation": 22551, "user_id": 724176, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa470aad3d456ece9ddf1a8b583b22a5?s=128&d=identicon&r=PG", "display_name": "Hugo", "link": "https://stackoverflow.com/users/724176/hugo"}, "edited": false, "score": 0, "creation_date": 1515154390, "post_id": 48002867, "comment_id": 83202370, "body": "Link to issue: <a href=\"https://bitbucket.org/pypy/pypy/issues/2720/ensurepip-on-pypy-c-jit-93579-a4194a67868f\" rel=\"nofollow noreferrer\">bitbucket.org/pypy/pypy/issues/2720/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1519, "user_id": 2802665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfc7a7a79851f14df65447c32711fc07?s=128&d=identicon&r=PG&f=1", "display_name": "mattip", "link": "https://stackoverflow.com/users/2802665/mattip"}, "is_accepted": true, "score": 1, "last_activity_date": 1514443593, "creation_date": 1514443593, "answer_id": 48002867, "question_id": 47999518, "link": "https://stackoverflow.com/questions/47999518/pip-install-with-ensurepip-on-pypy3-5-v5-10-in-windows-7-x64/48002867#48002867", "title": "pip install with ensurepip on PyPy3.5 v5.10 in Windows 7 x64", "body": "<p>We build nightly zip files off the latest HEAD, available <a href=\"http://buildbot.pypy.org/nightly/py3.5/\" rel=\"nofollow noreferrer\">here</a>. It would be great if you could try out the latest windows version and let us know on IRC at #pypy, or on the <a href=\"https://mail.python.org/mailman/listinfo/pypy-dev\" rel=\"nofollow noreferrer\">pypy-dev</a> mailing list, or by filing an issue on our <a href=\"https://bitbucket.org/pypy/pypy/issues?status=new&amp;status=open\" rel=\"nofollow noreferrer\">bitbucket issue tracker</a> whether it works for you, so that we will not need to do a 5.10.2 bug release fix after the current one.</p>\n"}], "owner": {"reputation": 325, "user_id": 5182428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/9VGVQ.png?s=128&g=1", "display_name": "green", "link": "https://stackoverflow.com/users/5182428/green"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 738, "favorite_count": 0, "accepted_answer_id": 48002867, "answer_count": 2, "score": 3, "last_activity_date": 1514443593, "creation_date": 1514414927, "question_id": 47999518, "link": "https://stackoverflow.com/questions/47999518/pip-install-with-ensurepip-on-pypy3-5-v5-10-in-windows-7-x64", "title": "pip install with ensurepip on PyPy3.5 v5.10 in Windows 7 x64", "body": "<p>Why I can't install pip with <code>pypy3 -m ensurepip</code>? I have unpacked PyPy from <a href=\"https://bitbucket.org/pypy/pypy/downloads/pypy3-v5.10.0-win32.zip\" rel=\"nofollow noreferrer\">official package</a>, and followed instructions at <a href=\"https://docs.python.org/3.5/library/ensurepip.html\" rel=\"nofollow noreferrer\">official docs</a> but resulting in an error. Interpreter log is below.</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"D:\\pypy3-v5.10.0-win32\\lib-python\\3\\runpy.py\", line 193, in _run_module_as_main\n    \"__main__\", mod_spec)\n  File \"D:\\pypy3-v5.10.0-win32\\lib-python\\3\\runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \"D:\\pypy3-v5.10.0-win32\\lib-python\\3\\ensurepip\\__main__.py\", line 4, in &lt;module&gt;\n    ensurepip._main()\n  File \"D:\\pypy3-v5.10.0-win32\\lib-python\\3\\ensurepip\\__init__.py\", line 209, in _main\n    default_pip=args.default_pip,\n  File \"D:\\pypy3-v5.10.0-win32\\lib-python\\3\\ensurepip\\__init__.py\", line 116, in bootstrap\n    _run_pip(args + [p[0] for p in _PROJECTS], additional_paths)\n  File \"D:\\pypy3-v5.10.0-win32\\lib-python\\3\\ensurepip\\__init__.py\", line 40, in _run_pip\n    import pip\n  File \"C:\\Users\\user\\AppData\\Local\\Temp\\tmp5zq6hqua\\pip-9.0.1-py2.py3-none-any.whl\\pip\\__init__.py\", line 21, in &lt;module&gt;\n  File \"C:\\Users\\user\\AppData\\Local\\Temp\\tmp5zq6hqua\\pip-9.0.1-py2.py3-none-any.whl\\pip\\_vendor\\requests\\__init__.py\", line 62, in &lt;module&gt;\n  File \"C:\\Users\\user\\AppData\\Local\\Temp\\tmp5zq6hqua\\pip-9.0.1-py2.py3-none-any.whl\\pip\\_vendor\\requests\\packages\\__init__.py\", line 27, in &lt;module&gt;\n  File \"C:\\Users\\user\\AppData\\Local\\Temp\\tmp5zq6hqua\\pip-9.0.1-py2.py3-none-any.whl\\pip\\_vendor\\requests\\packages\\urllib3\\__init__.py\", line 8, in &lt;module&gt;\n  File \"C:\\Users\\user\\AppData\\Local\\Temp\\tmp5zq6hqua\\pip-9.0.1-py2.py3-none-any.whl\\pip\\_vendor\\requests\\packages\\urllib3\\connectionpool.py\", line 101, in &lt;module&gt;\nAttributeError: module 'errno' has no attribute 'EWOULDBLOCK'\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "bazel"], "answers": [{"tags": [], "owner": {"reputation": 2556, "user_id": 6327445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23bedc05d161365453ce0020096562de?s=128&d=identicon&r=PG&f=1", "display_name": "ahumesky", "link": "https://stackoverflow.com/users/6327445/ahumesky"}, "is_accepted": true, "score": 0, "last_activity_date": 1514939521, "creation_date": 1514939521, "answer_id": 48069696, "question_id": 47999484, "link": "https://stackoverflow.com/questions/47999484/bazel-bin-im2txt-run-inference-no-such-a-file/48069696#48069696", "title": "bazel-bin/im2txt/run_inference - no such a file", "body": "<p><code>bazel build -c opt /im2txt:run_inference</code></p>\n\n<p>probably needs to be <code>bazel build -c opt //im2txt:run_inference</code> (double forward slashes)</p>\n"}], "owner": {"reputation": 55, "user_id": 7907807, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9nOmMYMg5EQ/AAAAAAAAAAI/AAAAAAAAAQM/NGC08Z538RE/photo.jpg?sz=128", "display_name": "Koji", "link": "https://stackoverflow.com/users/7907807/koji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 342, "favorite_count": 0, "accepted_answer_id": 48069696, "answer_count": 1, "score": 0, "last_activity_date": 1514939521, "creation_date": 1514414581, "last_edit_date": 1514421111, "question_id": 47999484, "link": "https://stackoverflow.com/questions/47999484/bazel-bin-im2txt-run-inference-no-such-a-file", "title": "bazel-bin/im2txt/run_inference - no such a file", "body": "<p>I'm trying im2txt(<a href=\"https://github.com/tensorflow/models/tree/master/research/im2txt\" rel=\"nofollow noreferrer\">https://github.com/tensorflow/models/tree/master/research/im2txt</a>)\nI cloned the repo and downloaded a model. Then wrote a simple shell script for trying im2txt like below.</p>\n\n<pre><code>$ git clone https://github.com/tensorflow/models.git\n$ cd model/research/im2txt\n</code></pre>\n\n<p>run.sh</p>\n\n<pre><code>CHECKPOINT_PATH=\"/Users/me/Desktop/machine-learning/ml/models/research/im2txt/im2txt/model/model.ckpt-3000000\"\nVOCAB_FILE=\"/Users/me/Desktop/machine-learning/ml/models/research/im2txt/im2txt/data/word_counts.txt\"\nIMAGE_FILE=\"/Users/me/Desktop/machine-learning/ml/models/research/im2txt/im2txt/data/COCO_val2014_000000224477.jpg\"\n\nbazel build -c opt /im2txt:run_inference\n\nbazel-bin/im2txt/run_inference \\\n  --checkpoint_path=${CHECKPOINT_PATH} \\\n  --vocab_file=${VOCAB_FILE} \\\n  --input_files=${IMAGE_FILE}\n</code></pre>\n\n<p>Result</p>\n\n<pre><code>$ ./run.sh\nINFO: Analysed 0 targets (0 packages loaded).\nINFO: Found 0 targets...\nINFO: Elapsed time: 0.360s, Critical Path: 0.02s\nINFO: Build completed successfully, 1 total action\n./run.sh: line 8: bazel-bin/im2txt/run_inference: No such file or directory\n</code></pre>\n\n<p>Env</p>\n\n<pre><code>$ bazel version\nBuild label: 0.9.0-homebrew\nBuild target: bazel-out/darwin-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\nBuild time: Sun Jul 12 03:29:57 +49936 (1513677382197)\nBuild timestamp: 1513677382197\nBuild timestamp as int: 1513677382197\n\n$ java -version\njava version \"1.8.0_151\"\nJava(TM) SE Runtime Environment (build 1.8.0_151-b12)\nJava HotSpot(TM) 64-Bit Server VM (build 25.151-b12, mixed mode)\n\ntensorflow (1.1.0)\n</code></pre>\n\n<p>Does anyone have any ideas to fix this problem?</p>\n\n<p>Thank you for your help!</p>\n"}, {"tags": ["python", "bash", "pip", "anaconda"], "answers": [{"comments": [{"owner": {"reputation": 1663, "user_id": 6321559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sEAjx.png?s=128&g=1", "display_name": "it&#39;s-yer-boy-chet", "link": "https://stackoverflow.com/users/6321559/its-yer-boy-chet"}, "edited": false, "score": 0, "creation_date": 1514490631, "post_id": 47999512, "comment_id": 82995730, "body": "This works, thanks.  The error messages are pretty verbose, so I am going to have to manually make the <code>pip-requirements.txt</code> or <code>environment.yml</code> as suggested by @Nitred"}], "tags": [], "owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "is_accepted": false, "score": 1, "last_activity_date": 1514414872, "creation_date": 1514414872, "answer_id": 47999512, "question_id": 47999477, "link": "https://stackoverflow.com/questions/47999477/bash-script-to-conda-install-requirements-txt-with-pip-follow-up/47999512#47999512", "title": "Bash Script to Conda Install requirements.txt with PIP follow-up", "body": "<p>Redirect stderr to a file:</p>\n\n<pre><code>while read requirement; do conda install --yes $requirement; done &lt; requirements.txt 2&gt;error.log\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1663, "user_id": 6321559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sEAjx.png?s=128&g=1", "display_name": "it&#39;s-yer-boy-chet", "link": "https://stackoverflow.com/users/6321559/its-yer-boy-chet"}, "edited": false, "score": 0, "creation_date": 1514483275, "post_id": 47999891, "comment_id": 82992570, "body": "This is cool, thanks, it would mean I would have to look through a pretty long list of dependencies and parse them out.  Also, other members of my team are working on the same repo and not using Anaconda, so I would have to test and update for each new dependency that they add to requirements.txt.  Now you&#39;ve got me thinking it would be even cooler to have a script to read through requirements.txt and produce the environment.yml file."}, {"owner": {"reputation": 4471, "user_id": 2598661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077bac49baa40c91fca05d805a30b075?s=128&d=identicon&r=PG", "display_name": "nitred", "link": "https://stackoverflow.com/users/2598661/nitred"}, "reply_to_user": {"reputation": 1663, "user_id": 6321559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sEAjx.png?s=128&g=1", "display_name": "it&#39;s-yer-boy-chet", "link": "https://stackoverflow.com/users/6321559/its-yer-boy-chet"}, "edited": false, "score": 0, "creation_date": 1514495265, "post_id": 47999891, "comment_id": 82997707, "body": "You&#39;re welcome! Also I don&#39;t know what you&#39;re working on so I might be wrong in your case but I found out early on that the dependency list for any project is usually pretty small, around 20. However the number of packages installed in your environment might be huge mostly because your dependencies end up installing many of their own dependencies. For example installing <code>Flask</code> will also install along with it <code>Werkzeug</code>, <code>click</code>, <code>Jinja2</code> etc. But you only need to have <code>Flask</code> in your <code>requirements.txt</code> or <code>environment.yml</code>."}, {"owner": {"reputation": 1663, "user_id": 6321559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sEAjx.png?s=128&g=1", "display_name": "it&#39;s-yer-boy-chet", "link": "https://stackoverflow.com/users/6321559/its-yer-boy-chet"}, "edited": false, "score": 0, "creation_date": 1514495534, "post_id": 47999891, "comment_id": 82997806, "body": "Yeah I&#39;m working on a pretty mature Django project so there are 50 some odd packages in the <code>requirements.txt</code> file, I bet a few of them are redundant.  I found out that you can export the <code>environment.yml</code> with <code>conda env export &gt; environment.yml</code>, which is pretty slick.  See my answer below."}, {"owner": {"reputation": 4471, "user_id": 2598661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077bac49baa40c91fca05d805a30b075?s=128&d=identicon&r=PG", "display_name": "nitred", "link": "https://stackoverflow.com/users/2598661/nitred"}, "reply_to_user": {"reputation": 1663, "user_id": 6321559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sEAjx.png?s=128&g=1", "display_name": "it&#39;s-yer-boy-chet", "link": "https://stackoverflow.com/users/6321559/its-yer-boy-chet"}, "edited": false, "score": 2, "creation_date": 1514496354, "post_id": 47999891, "comment_id": 82998097, "body": "My personal opinion is that using <code>conda env export</code> is not a great idea precisely for the reasons I mentioned above. It might be very useful in the case where you&#39;re developing a one time application which isn&#39;t intended to be maintained. But if you have a project that needs to be maintained over a long period of time, doing a complete dump of the environment into the <code>environment.yml</code> file will lead to many versioning conflicts in the very near future because <code>environment.yml</code> files use precise <code>==</code> versioning where as package sub-dependencies often use more open ended <code>&gt;=</code> versioning."}, {"owner": {"reputation": 5042, "user_id": 1732418, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8f08425f8724d6ea2d605d431a2e8fb5?s=128&d=identicon&r=PG&f=1", "display_name": "tribbloid", "link": "https://stackoverflow.com/users/1732418/tribbloid"}, "edited": false, "score": 0, "creation_date": 1569791437, "post_id": 47999891, "comment_id": 102700781, "body": "Thanks a lot! This is the best dep mgmt answer I&#39;ve seen. To clarify other&#39;s concern, it should be noted that the yml file CAN have version number omitted or defined by a range, transitive dependencies can also be omitted. SO it probably make sense to write the yml file instead of generating it"}], "tags": [], "owner": {"reputation": 4471, "user_id": 2598661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077bac49baa40c91fca05d805a30b075?s=128&d=identicon&r=PG", "display_name": "nitred", "link": "https://stackoverflow.com/users/2598661/nitred"}, "is_accepted": false, "score": 8, "last_activity_date": 1514418196, "creation_date": 1514418196, "answer_id": 47999891, "question_id": 47999477, "link": "https://stackoverflow.com/questions/47999477/bash-script-to-conda-install-requirements-txt-with-pip-follow-up/47999891#47999891", "title": "Bash Script to Conda Install requirements.txt with PIP follow-up", "body": "<p>Personally I find the Anaconda environment &amp; package management to be outstanding. So if you're using the <code>conda</code> command to update your packages in your python environment then I recommend using the <code>environment.yml</code> file instead of <code>requirements.txt</code>.</p>\n\n<p>The <code>environment.yml</code> should looks like the following:</p>\n\n<pre><code>name: root            # default is root\nchannels:\n- defaults\ndependencies:         # everything under this, installed by conda\n- numpy==1.13.3\n- scipy==1.0.0\n- pip:                # everything under this, installed by pip\n  - Flask==0.12.2\n  - gunicorn==19.7.1\n</code></pre>\n\n<p>The command to install:</p>\n\n<pre><code>conda env update --file environment.yml\n</code></pre>\n\n<h3>Note:</h3>\n\n<p>Here we set <code>name: root</code> which is the default anaconda environment name. This is not standard practice of how to use the <code>conda</code> and <code>environment.yml</code> file. Ideally every python project should have its own <code>environment.yml</code> file with a project specific environment name i.e. <code>name: project-name</code>.  Please go through <a href=\"https://conda.io/docs/user-guide/tasks/manage-environments.html\" rel=\"noreferrer\">https://conda.io/docs/user-guide/tasks/manage-environments.html</a> on using Anaconda for package management.</p>\n"}, {"comments": [{"owner": {"reputation": 134, "user_id": 3046360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ffGaa.png?s=128&g=1", "display_name": "niid", "link": "https://stackoverflow.com/users/3046360/niid"}, "edited": false, "score": 0, "creation_date": 1579165017, "post_id": 48014252, "comment_id": 105676209, "body": "It should be noted that mixing conda and pip like this can lead to dependencies being installed twice. (because pip cannot see conda dependencies I think?)"}], "tags": [], "owner": {"reputation": 1663, "user_id": 6321559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sEAjx.png?s=128&g=1", "display_name": "it&#39;s-yer-boy-chet", "link": "https://stackoverflow.com/users/6321559/its-yer-boy-chet"}, "is_accepted": true, "score": 4, "last_activity_date": 1514494436, "creation_date": 1514494436, "answer_id": 48014252, "question_id": 47999477, "link": "https://stackoverflow.com/questions/47999477/bash-script-to-conda-install-requirements-txt-with-pip-follow-up/48014252#48014252", "title": "Bash Script to Conda Install requirements.txt with PIP follow-up", "body": "<p>Found a solution:</p>\n\n<p>Run this to install with conda or pip if the package is not available to conda:</p>\n\n<pre><code>while read requirement; do conda install --yes $requirement || pip install $requirement; done &lt; requirements.txt \n</code></pre>\n\n<p>Once it's done you can use conda to export the environment yaml:</p>\n\n<pre><code>conda env export &gt; environment.yml\n</code></pre>\n"}], "owner": {"reputation": 1663, "user_id": 6321559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sEAjx.png?s=128&g=1", "display_name": "it&#39;s-yer-boy-chet", "link": "https://stackoverflow.com/users/6321559/its-yer-boy-chet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8941, "favorite_count": 0, "accepted_answer_id": 48014252, "answer_count": 3, "score": 8, "last_activity_date": 1514494436, "creation_date": 1514414534, "question_id": 47999477, "link": "https://stackoverflow.com/questions/47999477/bash-script-to-conda-install-requirements-txt-with-pip-follow-up", "title": "Bash Script to Conda Install requirements.txt with PIP follow-up", "body": "<p>When installing a requirements.txt file for a Django app on a linux server I can run:</p>\n\n<pre><code>conda install --yes --file requirements.txt\n</code></pre>\n\n<p>This will crash if any of the packages are not available through Conda (<code>PackageNotFoundError</code>).  This bash one liner is a cool way to go through the requirements.txt file one line at a time <a href=\"https://gist.github.com/luiscape/19d2d73a8c7b59411a2fb73a697f5ed4\" rel=\"noreferrer\">source</a>:</p>\n\n<pre><code>while read requirement; do conda install --yes $requirement; done &lt; requirements.txt\n</code></pre>\n\n<p>This installs all of the packages that are available through Conda without crashing on the first missing package.  However, what I would like to is track the packages that fail by capturing the output from Conda and if there is a <code>PackageNotFoundError</code> then run pip install on the package.</p>\n\n<p>I'm not great with bash, so hoping someone can suggest a hack.  Another solution could be to just write out a new text file called <code>pip-requirements.txt</code> with the requirements that fail.  </p>\n"}, {"tags": ["python", "python-2.7", "pickle", "namedtuple"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8651755"}, "edited": false, "score": 0, "creation_date": 1514414678, "post_id": 47999460, "comment_id": 82967452, "body": "You would have to unpickle <i>before</i> redefining <code>Point</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8651755"}, "edited": false, "score": 0, "creation_date": 1514415281, "post_id": 47999460, "comment_id": 82967615, "body": "If you&#39;re saying you want to have <code>Point</code>s that can either have an <code>x</code> attribute <i>or</i> an <code>x</code> and <code>y</code> attribute, I don&#39;t think you can do that with a <code>namedtuple</code>."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 5654234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d8599f1fbf0971c43b2446307489f6?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/5654234/mohit"}, "edited": false, "score": 0, "creation_date": 1514414898, "post_id": 47999504, "comment_id": 82967518, "body": "This is essentially creating a new instance and using that which I cannot really do. Is there a way to define a custom class which is compatible with the old Point object?"}, {"owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "reply_to_user": {"reputation": 41, "user_id": 5654234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d8599f1fbf0971c43b2446307489f6?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/5654234/mohit"}, "edited": false, "score": 0, "creation_date": 1514414961, "post_id": 47999504, "comment_id": 82967539, "body": "Well, unpickling always creates a new instance."}, {"owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "reply_to_user": {"reputation": 41, "user_id": 5654234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d8599f1fbf0971c43b2446307489f6?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/5654234/mohit"}, "edited": false, "score": 0, "creation_date": 1514415061, "post_id": 47999504, "comment_id": 82967563, "body": "What do you mean by &quot;compatible&quot;?  A tuple has either one or two elements. It cannot have both, because it is immutable."}, {"owner": {"reputation": 41, "user_id": 5654234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d8599f1fbf0971c43b2446307489f6?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/5654234/mohit"}, "edited": false, "score": 0, "creation_date": 1514415207, "post_id": 47999504, "comment_id": 82967602, "body": "Yes. Let me rephrase it. When I will unpickle the object I can only have one Point definition which has to be the new/ custom object which supports y variable. So I need to somehow define a class which is compatible with the already pickled objects. Makes sense?"}, {"owner": {"reputation": 41, "user_id": 5654234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d8599f1fbf0971c43b2446307489f6?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/5654234/mohit"}, "edited": false, "score": 0, "creation_date": 1514415427, "post_id": 47999504, "comment_id": 82967645, "body": "by compatible i mean that I should be able to unpickle the old Point object with the new definition. And Yes i agree that a tuple has either one or two elements, but can i define a custom named tuple whose one parameter is optional."}, {"owner": {"reputation": 41, "user_id": 5654234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d8599f1fbf0971c43b2446307489f6?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/5654234/mohit"}, "edited": false, "score": 0, "creation_date": 1514415610, "post_id": 47999504, "comment_id": 82967709, "body": "For example If i make the y parameter optional in the code I get by executing the below line: Point = namedtuple(&#39;Point&#39;, [&#39;x&#39;, &#39;y&#39;], verbose=true) I can then do something like, p = Point(1), but one thing to note is that p.y will be set to the default parameter. So when I unpickle the old object i would want the y variable to be set to the default parameter"}, {"owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "reply_to_user": {"reputation": 41, "user_id": 5654234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d8599f1fbf0971c43b2446307489f6?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/5654234/mohit"}, "edited": false, "score": 0, "creation_date": 1514415922, "post_id": 47999504, "comment_id": 82967778, "body": "Updated my answer accordingly."}, {"owner": {"reputation": 324088, "user_id": 1256452, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa1648baa6108c85886312af93bb32c0?s=128&d=identicon&r=PG", "display_name": "torek", "link": "https://stackoverflow.com/users/1256452/torek"}, "edited": false, "score": 0, "creation_date": 1514419946, "post_id": 47999504, "comment_id": 82968684, "body": "Minor: you want to <code>unpickle_point(pick)</code>, not <code>unpickle_point(i)</code>, here."}, {"owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1514420045, "post_id": 47999504, "comment_id": 82968705, "body": "Fixed. Thanks for the hint."}], "tags": [], "owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "is_accepted": false, "score": 2, "last_activity_date": 1514420021, "last_edit_date": 1514420021, "creation_date": 1514414750, "answer_id": 47999504, "question_id": 47999460, "link": "https://stackoverflow.com/questions/47999460/adding-extra-fields-to-an-existing-namedtuple-object-and-unpickling/47999504#47999504", "title": "Adding extra fields to an existing namedtuple object and unpickling", "body": "<p>Tuples are immutable.\nUnpickle first, than make a new point with a different namedtuple class and use the attribute <code>x</code> from the old point.\nUsing the same name for the class <code>Point</code> should have the effect you are after:</p>\n\n<pre><code>Point = namedtuple('Point', ['x'])\ni = Point(1)\npick=cPickle.dumps(i)\n\n\ndef unpickle_point(dumped_obj):\n    Point = namedtuple('Point', ['x'])\n    point = cPickle.loads(pick)\n    Point = namedtuple('Point', ['x', 'y'])\n    return Point(point.x, 2)\n\nnew_point = unpickle_point(pick)\n</code></pre>\n\n<p>Now:</p>\n\n<pre><code>&gt;&gt;&gt; new_point\nPoint(x=1, y=2)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 324088, "user_id": 1256452, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa1648baa6108c85886312af93bb32c0?s=128&d=identicon&r=PG", "display_name": "torek", "link": "https://stackoverflow.com/users/1256452/torek"}, "is_accepted": false, "score": 0, "last_activity_date": 1514419819, "creation_date": 1514419819, "answer_id": 48000060, "question_id": 47999460, "link": "https://stackoverflow.com/questions/47999460/adding-extra-fields-to-an-existing-namedtuple-object-and-unpickling/48000060#48000060", "title": "Adding extra fields to an existing namedtuple object and unpickling", "body": "<p>If you demand that:</p>\n\n<ol>\n<li>the unpickler shall take strings produced when the name <code>Point</code> meant something with <em>one</em> argument; but</li>\n<li>at that time, <code>Point</code> shall mean something produced with <em>two</em> arguments</li>\n</ol>\n\n<p>... then you have kind of painted yourself into a corner, by demanding the impossible.  By default, both the pickling and unpickling are done by encoding (pickle) and decoding (unpickle) <em>all</em> the values that go with the object.  The object named <code>Point</code> has one value.  No, it has two values!  Well, pick one or the other: it cannot have both.</p>\n\n<p>You can, as in <a href=\"https://stackoverflow.com/a/47999504/1256452\">Mike M\u00fcller's answer</a>, make the name <code>Point</code> refer to the one-valued <code>Point</code> for the duration of the unpickling, then make the name <code>Point</code> refer to the two-valued <code>Point</code> afterward.  That will work, at the expense of a lot of type-defining and name manipulation.  You can lower the overall cost (pretty significantly) by not re-creating the types themselves.  Here's how:</p>\n\n<pre><code>from collections import namedtuple\nimport sys\n\nPoint = namedtuple('Point', ['x'])\ni = Point(1)\nimport cPickle\npick = cPickle.dumps(i)\n\nold_style_point = Point\nPoint = namedtuple('Point', ['x', 'y'])\n\ndef unpickle_point(dumped_obj):\n    \"\"\"Make main.Point refer to the old style point for the\n    duration of the pickle.loads() operation, then back to\n    the new style Point afterward.\"\"\"\n    mod = sys.modules[__name__]  # eg, sys.modules['__main__']\n    save = mod.__dict__['Point']\n    try:\n        mod.__dict__['Point'] = old_style_point\n        old_point = cPickle.loads(dumped_obj)\n    finally:\n        mod.__dict__['Point'] = save\n    return Point(old_point.x, 2)\n\nt = unpickle_point(pick)\nprint(t)\n</code></pre>\n\n<p>This code works in Python 3 as well (provided you switch from <code>cPickle</code> to <code>pickle</code>).  The <code>try</code>/<code>finally</code> sequence here means that if you run this on bad data, the type name <code>Point</code> will continue to refer to the <em>new</em> <code>Point</code> object, not the old one in <code>old_style_point</code>.  As always, though, pickled strings are not secure and if you cannot trust them, you should not be doing this at all, so this particular bit of <code>try</code>/<code>finally</code> can just be removed if the data are that trustworthy.  (But the fact that you're doing this at all suggests that the data <em>aren't</em> that trustworthy.)</p>\n"}], "owner": {"reputation": 41, "user_id": 5654234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d8599f1fbf0971c43b2446307489f6?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/5654234/mohit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2206, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1514420021, "creation_date": 1514414390, "last_edit_date": 1514414880, "question_id": 47999460, "link": "https://stackoverflow.com/questions/47999460/adding-extra-fields-to-an-existing-namedtuple-object-and-unpickling", "title": "Adding extra fields to an existing namedtuple object and unpickling", "body": "<p>I have some data in the pickled format with instances of below objects:</p>\n\n<pre><code>Point = namedtuple('Point', ['x',])\n</code></pre>\n\n<p>Now I want to extend the Point object to add another variable 'y' but also keep this compatible with the data I already have pickled.</p>\n\n<p>Below is what I tried, but seems to fail. I also tried playing around with the code to make a Point class by setting the y parameter as optional when making the Point object, but that did not work as well. Any ideas on how to proceed?</p>\n\n<pre><code>from collections import namedtuple\nPoint = namedtuple('Point', ['x'])\ni = Point(1)\nimport cPickle\npick=cPickle.dumps(i)\nPoint = namedtuple('Point', ['x', 'y'])\ncPickle.loads(pick)\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"&lt;string&gt;\", line 22, in __repr__\nTypeError: not enough arguments for format string\n</code></pre>\n"}, {"tags": ["javascript", "python", "selenium", "webdriver", "inject"], "comments": [{"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "edited": false, "score": 0, "creation_date": 1514447921, "post_id": 47999442, "comment_id": 82975564, "body": "Seems the error is clear <code>call function result missing &#39;value&#39;</code>. Can you check the <code>JS</code> if all the values are provided?"}], "answers": [{"tags": [], "owner": {"reputation": 370, "user_id": 2564826, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/717fc6578a45fd67b0384adc6c53cc00?s=128&d=identicon&r=PG", "display_name": "pointyhat", "link": "https://stackoverflow.com/users/2564826/pointyhat"}, "is_accepted": false, "score": 1, "last_activity_date": 1515414778, "creation_date": 1515414778, "answer_id": 48150380, "question_id": 47999442, "link": "https://stackoverflow.com/questions/47999442/inject-javascript-into-selenium-python-converted-argsvalue/48150380#48150380", "title": "Inject Javascript into selenium Python -&gt; converted_args})[&#39;value&#39;]", "body": "<p>Your trace suggests you are using chrome 65 (are you on the beta channel?) w/chromedriver 2.34. I don't think chrome 65 can be driven with that version of chromedriver. You might want to downgrade chrome (e.g. to the stable version, currently 63, I believe).</p>\n"}], "owner": {"reputation": 53, "user_id": 7589949, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/979ae43ff97bc323f83399c747b2049d?s=128&d=identicon&r=PG&f=1", "display_name": "K Kreid", "link": "https://stackoverflow.com/users/7589949/k-kreid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 765, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515414778, "creation_date": 1514414291, "question_id": 47999442, "link": "https://stackoverflow.com/questions/47999442/inject-javascript-into-selenium-python-converted-argsvalue", "title": "Inject Javascript into selenium Python -&gt; converted_args})[&#39;value&#39;]", "body": "<p>I am trying to inject some javascript code into my chrome selenium browser. The javascript contains a token that is only valid one time and therefore the javascript can only be executed once. To inject the javascript I have used:</p>\n\n<pre><code>driver.execute_script(toinject)\n</code></pre>\n\n<p>Where toinject contains this javascript:</p>\n\n<pre><code>javascript:(function(){ var f = document.createElement(\"form\"); f.setAttribute(\"id\",\"destroyer\"); f.setAttribute(\"method\",\"post\"); f.setAttribute(\"action\",\"http://www.adidas.ch/on/demandware.store/Sites-adidas-CH-Site/default/Cart-MiniAddProduct?clientId=c1f3632f-6d3a-43f4-9987-9de920731dcb\"); var masterPid = document.createElement(\"input\"); masterPid.setAttribute(\"type\",\"hidden\"); masterPid.setAttribute(\"name\",\"masterPid\"); masterPid.setAttribute(\"value\",\"BY9913\"); var pid = document.createElement(\"input\"); pid.setAttribute(\"type\",\"hidden\"); pid.setAttribute(\"name\",\"pid\"); pid.setAttribute(\"value\",\"BY9913_620\"); var ajaxOption = document.createElement(\"input\"); ajaxOption.setAttribute(\"type\",\"hidden\"); ajaxOption.setAttribute(\"name\",\"ajax\"); ajaxOption.setAttribute(\"value\",\"true\"); var responseOption = document.createElement(\"input\"); responseOption.setAttribute(\"type\",\"hidden\"); responseOption.setAttribute(\"name\",\"layer\"); responseOption.setAttribute(\"value\",\"Add To Bag overlay\"); var quantity = document.createElement(\"input\"); quantity.setAttribute(\"type\",\"hidden\"); quantity.setAttribute(\"name\",\"Quantity\"); quantity.setAttribute(\"value\",\"1\"); var sessionSelectedStoreID = document.createElement(\"input\"); sessionSelectedStoreID.setAttribute(\"type\",\"hidden\"); sessionSelectedStoreID.setAttribute(\"name\",\"sessionSelectedStoreID\"); sessionSelectedStoreID.setAttribute(\"value\",\"null\"); var captchaToken = document.createElement(\"input\"); captchaToken.setAttribute(\"type\",\"hidden\"); captchaToken.setAttribute(\"name\",\"g-recaptcha-response\"); captchaToken.setAttribute(\"value\",\"03AMPJSYXHk0axYBy3sJEKk7pSbaubS9c0Du3y87zzid05zpMpMvyzWdqRQmbPqVM2cxd9j3RNjMyX7x3_NOmo7NhlJD0YjyZlwG13AIGwHZ9E0IYqX1YyxAO162pXPxZboq4M47CA9Sf2BDdwIPjHsPgOX3ELuFeWR38Su0jsrrJoQ1ti49wllmsM3EbfSM4PXoudbary0NmXrSC2qpkQ0H3SkIbW3cfiwnDPm6s5bWlznjFAwtuDBbWGm7FC2TizgPr_nVRW4hh7E9F_lEkTWS-BIQFsan2huh7z-eK1Q1WEYUC9ReDg87GoKPF0CAz3yfanh_hbfHr7yMVSxqkQznGXmNQ-tj8gfa9PVwKM5BUT_-ofQliUBgEWePQN31cStqRxDuUesGyB\"); f.appendChild(captchaToken); var captchaDuplicate = document.createElement(\"input\"); captchaDuplicate.setAttribute(\"type\",\"hidden\"); captchaDuplicate.setAttribute(\"name\",\"x-PrdRt\"); captchaDuplicate.setAttribute(\"value\",\"03AMPJSYXHk0axYBy3sJEKk7pSbaubS9c0Du3y87zzid05zpMpMvyzWdqRQmbPqVM2cxd9j3RNjMyX7x3_NOmo7NhlJD0YjyZlwG13AIGwHZ9E0IYqX1YyxAO162pXPxZboq4M47CA9Sf2BDdwIPjHsPgOX3ELuFeWR38Su0jsrrJoQ1ti49wllmsM3EbfSM4PXoudbary0NmXrSC2qpkQ0H3SkIbW3cfiwnDPm6s5bWlznjFAwtuDBbWGm7FC2TizgPr_nVRW4hh7E9F_lEkTWS-BIQFsan2huh7z-eK1Q1WEYUC9ReDg87GoKPF0CAz3yfanh_hbfHr7yMVSxqkQznGXmNQ-tj8gfa9PVwKM5BUT_-ofQliUBgEWePQN31cStqRxDuUesGyB\"); f.appendChild(captchaDuplicate); var s = document.createElement(\"input\"); s.setAttribute(\"type\",\"submit\"); s.setAttribute(\"value\",\"Submit\"); f.appendChild(masterPid); f.appendChild(pid); f.appendChild(ajaxOption); f.appendChild(responseOption); f.appendChild(quantity); f.appendChild(sessionSelectedStoreID); f.appendChild(s); document.getElementsByTagName(\"body\")[0].appendChild(f); })(); document.getElementById(document.querySelector(\"[id^='destroyer']\").id).submit();\n</code></pre>\n\n<p>It is very long but im pretty certain it is correct because it works if I run it using a javascript tester. What happens after is, the javascript seems to be executed twice, making the token invalid. I get the following error: </p>\n\n<pre><code>Exception in thread Thread-2:\nTraceback (most recent call last):\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 916, in _bootstrap_inner\n    self.run()\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 864, in run\n    self._target(*self._args, **self._kwargs)\n  File \"testin.py\", line 74, in startbot\n    openseission()\n  File \"testin.py\", line 183, in openseission\n    driver.execute_script(toinject)\n  File \"/Users/____/Desktop/going_headless/chaptcha/flask/lib/python3.6/site-packages/selenium/webdriver/remote/webdriver.py\", line 546, in execute_script\n    'args': converted_args})['value']\n  File \"/Users/____/Desktop/going_headless/chaptcha/flask/lib/python3.6/site-packages/selenium/webdriver/remote/webdriver.py\", line 311, in execute\n    self.error_handler.check_response(response)\n  File \"/Users/___/Desktop/going_headless/chaptcha/flask/lib/python3.6/site-packages/selenium/webdriver/remote/errorhandler.py\", line 237, in check_response\n    raise exception_class(message, screen, stacktrace)\nselenium.common.exceptions.WebDriverException: Message: unknown error: call function result missing 'value'\n  (Session info: chrome=65.0.3305.0)\n  (Driver info: chromedriver=2.34.522932 (4140ab217e1ca1bec0c4b4d1b148f3761eb3a03e),platform=Mac OS X 10.12.6 x86_64)\n</code></pre>\n\n<p>How can I avoid this? I have'nt found anyone with the same problem for the past 3 hours. I don't mind injecting the javascript another way but I don't know any. Thank you in advance</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 16757, "user_id": 2799941, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/260db848f0eb7e3cd55998969a7a43a4?s=128&d=identicon&r=PG&f=1", "display_name": "andrew_reece", "link": "https://stackoverflow.com/users/2799941/andrew-reece"}, "edited": false, "score": 1, "creation_date": 1514414431, "post_id": 47999418, "comment_id": 82967400, "body": "<code>df1.vals.apply(pd.Series)</code> will get you most of the way there."}, {"owner": {"reputation": 841, "user_id": 1780027, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/48fb6924b550df2f89c44647f0a8be19?s=128&d=identicon&r=PG", "display_name": "FredMan", "link": "https://stackoverflow.com/users/1780027/fredman"}, "reply_to_user": {"reputation": 16757, "user_id": 2799941, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/260db848f0eb7e3cd55998969a7a43a4?s=128&d=identicon&r=PG&f=1", "display_name": "andrew_reece", "link": "https://stackoverflow.com/users/2799941/andrew-reece"}, "edited": false, "score": 1, "creation_date": 1514414668, "post_id": 47999418, "comment_id": 82967450, "body": "@andrew_reece Is that vectorized though?  He&#39;d have to create 4 different series."}], "answers": [{"tags": [], "owner": {"reputation": 16757, "user_id": 2799941, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/260db848f0eb7e3cd55998969a7a43a4?s=128&d=identicon&r=PG&f=1", "display_name": "andrew_reece", "link": "https://stackoverflow.com/users/2799941/andrew-reece"}, "is_accepted": false, "score": 5, "last_activity_date": 1514414648, "creation_date": 1514414648, "answer_id": 47999493, "question_id": 47999418, "link": "https://stackoverflow.com/questions/47999418/how-best-to-extract-a-pandas-column-containing-lists-or-tuples-into-multiple-col/47999493#47999493", "title": "How best to extract a Pandas column containing lists or tuples into multiple columns", "body": "<p>You can apply the <code>Series</code> initializer to <code>vals</code>, and then <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.add_prefix.html\" rel=\"noreferrer\"><code>add_prefix</code></a> to get the column names you're looking for.  Then <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.concat.html\" rel=\"noreferrer\"><code>concat</code></a> to the original for the desired output:</p>\n\n<pre><code>pd.concat([df1.vals, df1.vals.apply(pd.Series).add_prefix(\"vals_\")], axis=1)\n\n           vals vals_0 vals_1 vals_2 vals_3\n0  [a, b, c, d]      a      b      c      d\n1  [e, f, g, h]      e      f      g      h\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16757, "user_id": 2799941, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/260db848f0eb7e3cd55998969a7a43a4?s=128&d=identicon&r=PG&f=1", "display_name": "andrew_reece", "link": "https://stackoverflow.com/users/2799941/andrew-reece"}, "edited": false, "score": 1, "creation_date": 1514414946, "post_id": 47999513, "comment_id": 82967533, "body": "woah, nice kwarg-fu @Scott Boston!"}, {"owner": {"reputation": 727, "user_id": 8283463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7c85e7579fd9051ecc21ddb6a8a81f6?s=128&d=identicon&r=PG", "display_name": "Tom Walker", "link": "https://stackoverflow.com/users/8283463/tom-walker"}, "edited": false, "score": 1, "creation_date": 1514441393, "post_id": 47999513, "comment_id": 82973152, "body": "The way the second method does everything including the column rename fast and in one line is great."}], "tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 7, "last_activity_date": 1514416129, "last_edit_date": 1514416129, "creation_date": 1514414880, "answer_id": 47999513, "question_id": 47999418, "link": "https://stackoverflow.com/questions/47999418/how-best-to-extract-a-pandas-column-containing-lists-or-tuples-into-multiple-col/47999513#47999513", "title": "How best to extract a Pandas column containing lists or tuples into multiple columns", "body": "<p>You can use <code>assign</code>, <code>apply</code>, with <code>pd.Series</code>:</p>\n\n<pre><code>df1.assign(**df1.vals.apply(pd.Series).add_prefix('val_'))\n</code></pre>\n\n<p>A faster method for more data is to use .values and tolist() with dataframe constructor:</p>\n\n<pre><code>df1.assign(**pd.DataFrame(df1.vals.values.tolist()).add_prefix('val_'))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>           vals val_0 val_1 val_2 val_3\n0  [a, b, c, d]     a     b     c     d\n1  [e, f, g, h]     e     f     g     h\n</code></pre>\n"}], "owner": {"reputation": 727, "user_id": 8283463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7c85e7579fd9051ecc21ddb6a8a81f6?s=128&d=identicon&r=PG", "display_name": "Tom Walker", "link": "https://stackoverflow.com/users/8283463/tom-walker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1829, "favorite_count": 1, "closed_date": 1514439952, "accepted_answer_id": 47999513, "answer_count": 2, "score": 4, "last_activity_date": 1514440243, "creation_date": 1514414144, "last_edit_date": 1514440243, "question_id": 47999418, "link": "https://stackoverflow.com/questions/47999418/how-best-to-extract-a-pandas-column-containing-lists-or-tuples-into-multiple-col", "closed_reason": "Duplicate", "title": "How best to extract a Pandas column containing lists or tuples into multiple columns", "body": "<p>I accidentally closed this question with a link to the wrong duplicate. Here is the correct one: <a href=\"https://stackoverflow.com/questions/35491274/pandas-split-column-of-lists-into-multiple-columns\">Pandas split column of lists into multiple columns</a>.</p>\n\n<p>Suppose I have a dataframe of which one column is a list (of a known and identical length) or tuple, for example:</p>\n\n<pre><code>df1 = pd.DataFrame(\n {'vals': [['a', 'b', 'c', 'd'],['e','f','g','h']]}\n)\n</code></pre>\n\n<p>ie:</p>\n\n<pre><code>    vals\n0   [a, b, c, d]\n1   [e, f, g, h]\n</code></pre>\n\n<p>I want to extra the values in \"vals\" into separate named columns. I can do this clumsily by iterating through the rows:</p>\n\n<pre><code>for i in range(df1.shape[0]):\n   for j in range(0,4):\n      df1.loc[i, 'vals_'+j] = df1.loc[i, 'vals'] [j]\n</code></pre>\n\n<p>Result as desired:</p>\n\n<pre><code>    vals            vals_0  vals_1  vals_2  vals_3\n0   [a, b, c, d]    a       b       c       d \n1   [e, f, g, h]    e       f       g       h\n</code></pre>\n\n<p>Is there a neater (vectorised) way? I tried using [] but I get an error.</p>\n\n<pre><code>   for j in range (0,4)\n       df1['vals_'+str(j)] = df1['vals'][j]\n</code></pre>\n\n<p>gives:</p>\n\n<pre><code>ValueError: Length of values does not match length of index\n</code></pre>\n\n<p>It looks like Pandas is trying to apply the [] operator to the series/dataframe rather than the column content.</p>\n"}, {"tags": ["python", "python-3.x", "pandas"], "comments": [{"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 2, "creation_date": 1514414037, "post_id": 47999393, "comment_id": 82967320, "body": "Can you post the full traceback verbatim?"}, {"owner": {"reputation": 16757, "user_id": 2799941, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/260db848f0eb7e3cd55998969a7a43a4?s=128&d=identicon&r=PG&f=1", "display_name": "andrew_reece", "link": "https://stackoverflow.com/users/2799941/andrew-reece"}, "edited": false, "score": 2, "creation_date": 1514414082, "post_id": 47999393, "comment_id": 82967334, "body": "Is <code>url2</code> the same as <code>url</code>?"}, {"owner": {"reputation": 1029, "user_id": 2264225, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/cc2e89005debab3454c2c39a714b1a8a?s=128&d=identicon&r=PG", "display_name": "user", "link": "https://stackoverflow.com/users/2264225/user"}, "edited": false, "score": 0, "creation_date": 1514419160, "post_id": 47999393, "comment_id": 82968513, "body": "url2 is the same as url. Updated question to change that and added trace."}], "answers": [{"comments": [{"owner": {"reputation": 1029, "user_id": 2264225, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/cc2e89005debab3454c2c39a714b1a8a?s=128&d=identicon&r=PG", "display_name": "user", "link": "https://stackoverflow.com/users/2264225/user"}, "edited": false, "score": 0, "creation_date": 1514421573, "post_id": 47999692, "comment_id": 82969058, "body": "Installed the Python distributive. Restarted. No success. I noticed that I don&#39;t have pandas_datareader installed. Would that have an effect?"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 1029, "user_id": 2264225, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/cc2e89005debab3454c2c39a714b1a8a?s=128&d=identicon&r=PG", "display_name": "user", "link": "https://stackoverflow.com/users/2264225/user"}, "edited": false, "score": 0, "creation_date": 1514421699, "post_id": 47999692, "comment_id": 82969082, "body": "@user, did you try to run it from Anaconda&#39;s ipython shell? I don&#39;t think you need pandas_datareader in this case..."}, {"owner": {"reputation": 1029, "user_id": 2264225, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/cc2e89005debab3454c2c39a714b1a8a?s=128&d=identicon&r=PG", "display_name": "user", "link": "https://stackoverflow.com/users/2264225/user"}, "edited": false, "score": 0, "creation_date": 1514422811, "post_id": 47999692, "comment_id": 82969296, "body": "Installed the distributive via a .pkg from the link you posted. The code is all run in .py files in Spyder3. Hope that answers it - wasn&#39;t sure which &#39;it&#39; you&#39;re referring to re running in the ipython shell."}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 0, "last_activity_date": 1514416335, "last_edit_date": 1592644375, "creation_date": 1514416335, "answer_id": 47999692, "question_id": 47999393, "link": "https://stackoverflow.com/questions/47999393/typeerror-init-got-an-unexpected-keyword-argument-encoding/47999692#47999692", "title": "TypeError: __init__() got an unexpected keyword argument &#39;encoding&#39;", "body": "<p>Try to install <a href=\"https://www.anaconda.com/download/\" rel=\"nofollow noreferrer\">Anaconda Python distributive (available for Linux, Windows and MacOS</a></p>\n<p>It works perfectly fine for me:</p>\n<pre><code>In [133]: bitcoin_market_info = pd.read_html(url)[0]\n\nIn [134]: bitcoin_market_info\nOut[134]:\n              Date      Open      High       Low     Close       Volume    Market Cap\n0     Dec 26, 2017  14036.60  16461.20  14028.90  16099.80  13454300000  235294000000\n1     Dec 25, 2017  13995.90  14593.00  13448.90  14026.60  10664700000  234590000000\n2     Dec 24, 2017  14608.20  14626.00  12747.70  13925.80  11572300000  244824000000\n3     Dec 23, 2017  13948.70  15603.20  13828.80  14699.20  13086000000  233748000000\n4     Dec 22, 2017  15898.00  15943.40  11833.00  13831.80  22198000000  266381000000\n5     Dec 21, 2017  16642.40  17567.70  15342.70  15802.90  16516600000  278827000000\n6     Dec 20, 2017  17760.30  17934.70  16077.70  16624.60  22149700000  297526000000\n7     Dec 19, 2017  19118.30  19177.80  17275.40  17776.70  16894500000  320242000000\n8     Dec 18, 2017  19106.40  19371.00  18355.90  19114.20  14839500000  320000000000\n9     Dec 17, 2017  19475.80  20089.00  18974.10  19140.80  13314600000  326141000000\n...            ...       ...       ...       ...       ...          ...           ...\n1694  May 07, 2013    112.25    113.44     97.70    111.50            -    1248470000\n1695  May 06, 2013    115.98    124.66    106.64    112.30            -    1289470000\n1696  May 05, 2013    112.90    118.80    107.14    115.91            -    1254760000\n1697  May 04, 2013     98.10    115.00     92.50    112.50            -    1089890000\n1698  May 03, 2013    106.25    108.13     79.10     97.75            -    1180070000\n1699  May 02, 2013    116.38    125.60     92.28    105.21            -    1292190000\n1700  May 01, 2013    139.00    139.89    107.72    116.99            -    1542820000\n1701  Apr 30, 2013    144.00    146.93    134.05    139.00            -    1597780000\n1702  Apr 29, 2013    134.44    147.49    134.00    144.54            -    1491160000\n1703  Apr 28, 2013    135.30    135.98    132.10    134.21            -    1500520000\n\n[1704 rows x 7 columns]\n</code></pre>\n<p>Module's Versions:</p>\n<pre><code>In [135]: pd.show_versions()\n\nINSTALLED VERSIONS\n------------------\ncommit: None\npython: 3.6.3.final.0\npython-bits: 64\nOS: Windows\nOS-release: 7\nmachine: AMD64\nprocessor: Intel64 Family 6 Model 58 Stepping 9, GenuineIntel\nbyteorder: little\nLC_ALL: en_US.UTF-8\nLANG: en_US\nLOCALE: None.None\n\npandas: 0.21.1\npytest: 3.3.0\npip: 9.0.1\nsetuptools: 36.5.0.post20170921\nCython: 0.27.3\nnumpy: 1.13.3\nscipy: 1.0.0\npyarrow: 0.7.0\nxarray: 0.10.0\nIPython: 6.2.1\nsphinx: 1.6.3\npatsy: 0.4.1\ndateutil: 2.6.1\npytz: 2017.3\nblosc: 1.5.1\nbottleneck: 1.2.1\ntables: 3.4.2\nnumexpr: 2.6.4\nfeather: 0.4.0\nmatplotlib: 2.1.1\nopenpyxl: 2.4.9\nxlrd: 1.1.0\nxlwt: 1.3.0\nxlsxwriter: 1.0.2\nlxml: 4.1.1\nbs4: 4.6.0\nhtml5lib: 1.0.1\nsqlalchemy: 1.1.13\npymysql: 0.7.11.None\npsycopg2: 2.7.3.1 (dt dec pq3 ext lo64)\njinja2: 2.10\ns3fs: None\nfastparquet: None\npandas_gbq: None\npandas_datareader: 0.5.0\n</code></pre>\n<p><a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_html.html\" rel=\"nofollow noreferrer\">read_html()</a> uses lxml per default (<code>flavor=None</code>):</p>\n<blockquote>\n<p><strong>flavor</strong> : str or None, container of strings</p>\n<p>The parsing engine to use. <code>bs4</code> and <code>html5lib</code> are synonymous with each other, they are</p>\n<p>both there for backwards compatibility. The default of <code>None</code> tries to</p>\n<p>use <code>lxml</code> to parse and if that fails it falls back on <code>bs4 + html5lib</code>.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 576, "user_id": 3281978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8LigO.png?s=128&g=1", "display_name": "tgrrr", "link": "https://stackoverflow.com/users/3281978/tgrrr"}, "is_accepted": false, "score": 0, "last_activity_date": 1518495450, "creation_date": 1518495450, "answer_id": 48759357, "question_id": 47999393, "link": "https://stackoverflow.com/questions/47999393/typeerror-init-got-an-unexpected-keyword-argument-encoding/48759357#48759357", "title": "TypeError: __init__() got an unexpected keyword argument &#39;encoding&#39;", "body": "<pre><code>pip3 install -U html5lib==\"0.9999999\"\n</code></pre>\n\n<p>here's the <a href=\"https://github.com/html5lib/html5lib-python/issues/281\" rel=\"nofollow noreferrer\">html5lib bug on github</a> </p>\n\n<p>from: <a href=\"https://stackoverflow.com/a/39087283\">https://stackoverflow.com/a/39087283</a></p>\n"}], "owner": {"reputation": 1029, "user_id": 2264225, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/cc2e89005debab3454c2c39a714b1a8a?s=128&d=identicon&r=PG", "display_name": "user", "link": "https://stackoverflow.com/users/2264225/user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 13113, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1612552020, "creation_date": 1514413904, "last_edit_date": 1514419822, "question_id": 47999393, "link": "https://stackoverflow.com/questions/47999393/typeerror-init-got-an-unexpected-keyword-argument-encoding", "title": "TypeError: __init__() got an unexpected keyword argument &#39;encoding&#39;", "body": "<p>Attempting a scrape of table data using pandas in Python 3.6 using Spyder3 on a MacBook Pro OS v10.13.2 (17C88). The code is:</p>\n\n<pre><code>import pandas as pd\n...\n\nurl = \"https://coinmarketcap.com/currencies/bitcoin/historical-data/?start=20130428&amp;end=\"+time.strftime(\"%Y%m%d\")\n\n# CODE FAILS HERE\nbitcoin_market_info = pd.read_html(url)[0]\n</code></pre>\n\n<p>The results shown in the console:</p>\n\n<pre><code>bitcoin_market_info = pd.read_html(url)[0]\nTraceback (most recent call last):\n\n  File \"&lt;ipython-input-2-0b0d269a2c9d&gt;\", line 15, in &lt;module&gt;\n    bitcoin_market_info = pd.read_html(url)[0]\n\n  File \"/Users/EL-C/anaconda3/lib/python3.6/site-packages/pandas/io/html.py\", line 915, in read_html\n    keep_default_na=keep_default_na)\n\n  File \"/Users/EL-C/anaconda3/lib/python3.6/site-packages/pandas/io/html.py\", line 749, in _parse\n    raise_with_traceback(retained)\n\n  File \"/Users/EL-C/anaconda3/lib/python3.6/site-packages/pandas/compat/__init__.py\", line 385, in raise_with_traceback\n    raise exc.with_traceback(traceback)\n\nTypeError: __init__() got an unexpected keyword argument 'encoding'\n</code></pre>\n\n<p>pd.<strong>version</strong> is '0.21.1'</p>\n\n<p>Results of pd.show_versions():</p>\n\n<pre><code>INSTALLED VERSIONS\n------------------\ncommit: None\npython: 3.6.4.final.0\npython-bits: 64\nOS: Darwin\nOS-release: 17.3.0\nmachine: x86_64\nprocessor: i386\nbyteorder: little\nLC_ALL: en_US.UTF-8\nLANG: en_US.UTF-8\nLOCALE: en_US.UTF-8\n\npandas: 0.21.1\npytest: 3.3.0\npip: 9.0.1\nsetuptools: 36.5.0.post20170921\nCython: 0.27.3\nnumpy: 1.13.3\nscipy: 1.0.0\npyarrow: None\nxarray: None\nIPython: 6.2.1\nsphinx: 1.6.3\npatsy: 0.4.1\ndateutil: 2.6.1\npytz: 2017.3\nblosc: None\nbottleneck: 1.2.1\ntables: 3.4.2\nnumexpr: 2.6.4\nfeather: None\nmatplotlib: 2.1.1\nopenpyxl: 2.4.9\nxlrd: 1.1.0\nxlwt: 1.2.0\nxlsxwriter: 1.0.2\nlxml: 4.1.1\nbs4: 4.6.0\nhtml5lib: 1.0.1\nsqlalchemy: 1.1.13\npymysql: None\npsycopg2: None\njinja2: 2.10\ns3fs: None\nfastparquet: None\npandas_gbq: None\npandas_datareader: None\n</code></pre>\n\n<p>I have attempted <a href=\"https://stackoverflow.com/questions/45726184/unable-to-read-the-html-file-using-pandas?noredirect=1&amp;lq=1\">this</a> fix, but it seems to be for an older version and not exactly this situation, given that I haven't imported html5lib.</p>\n\n<p>In case it's needed: </p>\n\n<p>the html5lib.<strong>version</strong> is 1.0.1</p>\n\n<p>bs4.<strong>version</strong> is 4.6.0</p>\n\n<p>Running 'pip3 install -U html5lib==\"0.9999999\"' (as suggested) in the terminal doesn't change the version in Spyder3.</p>\n\n<p>What I see in the terminal when running the command is:</p>\n\n<pre><code>Requirement already up-to-date: html5lib==0.9999999 in /Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages\nRequirement already up-to-date: six in /Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages (from html5lib==0.9999999)\n</code></pre>\n\n<p>Maybe this is the root? If so, need help figuring this out. </p>\n"}, {"tags": ["python", "pandas", "pandas-groupby"], "comments": [{"owner": {"reputation": 16757, "user_id": 2799941, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/260db848f0eb7e3cd55998969a7a43a4?s=128&d=identicon&r=PG&f=1", "display_name": "andrew_reece", "link": "https://stackoverflow.com/users/2799941/andrew-reece"}, "edited": false, "score": 0, "creation_date": 1514413316, "post_id": 47999293, "comment_id": 82967081, "body": "&quot;first time&quot; using what ordering?  <code>transaction_dt</code>?"}, {"owner": {"reputation": 1273, "user_id": 4713504, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2ee302f694cc906a9266531ba866ac5e?s=128&d=identicon&r=PG&f=1", "display_name": "Pylander", "link": "https://stackoverflow.com/users/4713504/pylander"}, "reply_to_user": {"reputation": 16757, "user_id": 2799941, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/260db848f0eb7e3cd55998969a7a43a4?s=128&d=identicon&r=PG&f=1", "display_name": "andrew_reece", "link": "https://stackoverflow.com/users/2799941/andrew-reece"}, "edited": false, "score": 0, "creation_date": 1514413887, "post_id": 47999293, "comment_id": 82967275, "body": "yes, &#39;transaction_dt&#39; in ascending order."}], "answers": [{"comments": [{"owner": {"reputation": 1273, "user_id": 4713504, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2ee302f694cc906a9266531ba866ac5e?s=128&d=identicon&r=PG&f=1", "display_name": "Pylander", "link": "https://stackoverflow.com/users/4713504/pylander"}, "edited": false, "score": 0, "creation_date": 1514414610, "post_id": 47999368, "comment_id": 82967436, "body": "this is a clever use of .query.  so the recommendation being to create a flag on the result and merge back?  good approach"}], "tags": [], "owner": {"reputation": 16757, "user_id": 2799941, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/260db848f0eb7e3cd55998969a7a43a4?s=128&d=identicon&r=PG&f=1", "display_name": "andrew_reece", "link": "https://stackoverflow.com/users/2799941/andrew-reece"}, "is_accepted": true, "score": 1, "last_activity_date": 1514413667, "creation_date": 1514413667, "answer_id": 47999368, "question_id": 47999293, "link": "https://stackoverflow.com/questions/47999293/python-pandas-groupby-transform-first-occurrence-of-condition/47999368#47999368", "title": "Python PANDAS: Groupby Transform First Occurrence of Condition", "body": "<p>Assuming you want the first chronological appearance of a <code>customer_id</code>, within the grouping you defined, you can use <code>query</code>, <code>groupby</code>, and <code>first</code>:</p>\n\n<pre><code>(\ndf.sort_values(\"transaction_dt\")\n  .query(\"units &gt; 20 &amp; price &gt; 50\")\n  .groupby(\"customer_id\")\n  .first()\n)\n</code></pre>\n\n<p>Note: The example data you provided doesn't actually have multiple <code>customer_id</code> entries for the filters you specified, but the syntax will work in either case.</p>\n"}], "owner": {"reputation": 1273, "user_id": 4713504, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2ee302f694cc906a9266531ba866ac5e?s=128&d=identicon&r=PG&f=1", "display_name": "Pylander", "link": "https://stackoverflow.com/users/4713504/pylander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1224, "favorite_count": 0, "accepted_answer_id": 47999368, "answer_count": 1, "score": 0, "last_activity_date": 1514415181, "creation_date": 1514413089, "last_edit_date": 1514415181, "question_id": 47999293, "link": "https://stackoverflow.com/questions/47999293/python-pandas-groupby-transform-first-occurrence-of-condition", "title": "Python PANDAS: Groupby Transform First Occurrence of Condition", "body": "<p>I have dataframe in the following general format:</p>\n\n<pre><code>customer_id,transaction_dt,product,price,units\n1,2004-01-02 00:00:00,thing1,25,47\n1,2004-01-17 00:00:00,thing2,150,8\n2,2004-01-29 00:00:00,thing2,150,25\n3,2017-07-15 00:00:00,thing3,55,17\n3,2016-05-12 00:00:00,thing3,55,47\n4,2012-02-23 00:00:00,thing2,150,22\n4,2009-10-10 00:00:00,thing1,25,12\n4,2014-04-04 00:00:00,thing2,150,2\n5,2008-07-09 00:00:00,thing2,150,43\n5,2004-01-30 00:00:00,thing1,25,40\n5,2004-01-31 00:00:00,thing1,25,22\n5,2004-02-01 00:00:00,thing1,25,2\n</code></pre>\n\n<p>I have it sorted by the relevant fields in ascending order.  Now what I am trying to figure out how to check for a criteria inside a group and create a new indicator flag for only first time it occurs.  As a toy example, I am trying to figure out something like this to start:</p>\n\n<pre><code>conditions = ((df['units'] &gt; 20) | (df['price] &gt; 50)\n\ndf['flag'] = df[conditions].groupby(['customer_id']).transform()\n</code></pre>\n\n<p>Any help on how best to formulate this properly would be most welcome!</p>\n"}, {"tags": ["python", "class", "machine-learning", "scikit-learn", "dataset"], "answers": [{"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 0, "last_activity_date": 1514413956, "creation_date": 1514413956, "answer_id": 47999396, "question_id": 47999271, "link": "https://stackoverflow.com/questions/47999271/what-is-the-type-of-load-iris-in-scikit-learn-library-in-python/47999396#47999396", "title": "What is the type of load_iris in scikit-learn library in python?", "body": "<p>For sklearn 0.19.1 <code>type(iris)</code> returns:</p>\n\n<pre><code>In [126]: type(iris)\nOut[126]: sklearn.utils.Bunch\n</code></pre>\n\n<p>Let's see what does it mean under the hood:</p>\n\n<pre><code>In [127]: sklearn.utils.Bunch??\nInit signature: sklearn.utils.Bunch(**kwargs)\nSource:\nclass Bunch(dict):\n    \"\"\"Container object for datasets\n\n    Dictionary-like object that exposes its keys as attributes.\n\n    &gt;&gt;&gt; b = Bunch(a=1, b=2)\n    &gt;&gt;&gt; b['b']\n    2\n    &gt;&gt;&gt; b.b\n    2\n    &gt;&gt;&gt; b.a = 3\n    &gt;&gt;&gt; b['a']\n    3\n    &gt;&gt;&gt; b.c = 6\n    &gt;&gt;&gt; b['c']\n    6\n\n    \"\"\"\n\n    def __init__(self, **kwargs):\n        super(Bunch, self).__init__(kwargs)\n\n    def __setattr__(self, key, value):\n        self[key] = value\n\n    def __dir__(self):\n        return self.keys()\n\n    def __getattr__(self, key):\n        try:\n            return self[key]\n        except KeyError:\n            raise AttributeError(key)\n\n    def __setstate__(self, state):\n        # Bunch pickles generated with scikit-learn 0.16.* have an non\n        # empty __dict__. This causes a surprising behaviour when\n        # loading these pickles scikit-learn 0.17: reading bunch.key\n        # uses __dict__ but assigning to bunch.key use __setattr__ and\n        # only changes bunch['key']. More details can be found at:\n        # https://github.com/scikit-learn/scikit-learn/issues/6196.\n        # Overriding __setstate__ to be a noop has the effect of\n        # ignoring the pickled __dict__\n        pass\nFile:           c:\\users\\max\\anaconda3_5.0\\envs\\py36\\lib\\site-packages\\sklearn\\utils\\__init__.py\nType:           type\n\nIn [128]: sklearn.__version__\nOut[128]: '0.19.1'\n</code></pre>\n\n<p>PS I hope it helps to understand what does it contain bit better</p>\n"}, {"tags": [], "owner": {"reputation": 98, "user_id": 8557148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7593048f9beef20a0a5bd34ebd67028d?s=128&d=identicon&r=PG&f=1", "display_name": "Venkataraman", "link": "https://stackoverflow.com/users/8557148/venkataraman"}, "is_accepted": false, "score": 0, "last_activity_date": 1514531895, "creation_date": 1514531895, "answer_id": 48018968, "question_id": 47999271, "link": "https://stackoverflow.com/questions/47999271/what-is-the-type-of-load-iris-in-scikit-learn-library-in-python/48018968#48018968", "title": "What is the type of load_iris in scikit-learn library in python?", "body": "<p>The type(iris) returns sklearn.utils.Bunch.</p>\n\n<p>But its actually a Dict with Keys as data,feature_names,target,target_names</p>\n\n<pre><code>from sklearn.datasets import load_iris\nfrom sklearn.neighbors import KNeighborsClassifier\n\niris=load_iris()\n\nfeatures=iris['data'] #u can use iris.data\nlabel=iris['target'] #u can use iris.target \n\nmodel=KNeighborsClassifier(n_neighbors=1)\nmodel.fit(features,label)\n\nresult=model.predict([[ 6.7,  2.5,  5.8,  1.8]])\n</code></pre>\n\n<p>has u can see in the code iris['data'] gives the features np array with data.</p>\n\n<p>The iris['target'] gives the array of category to which they belong.</p>\n\n<p>so the iris dataset loaded from sklearn is a <strong>dict</strong> containing features and labels.</p>\n"}], "owner": {"reputation": 645, "user_id": 7560762, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/40a6b3c84454b20b6c619ac1ca7d9f2f?s=128&d=identicon&r=PG&f=1", "display_name": "ce1", "link": "https://stackoverflow.com/users/7560762/ce1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1599, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1521387294, "creation_date": 1514412940, "question_id": 47999271, "link": "https://stackoverflow.com/questions/47999271/what-is-the-type-of-load-iris-in-scikit-learn-library-in-python", "title": "What is the type of load_iris in scikit-learn library in python?", "body": "<p>I am looking at the iris dataset as part of the sklearn datasets and when I assign the following: </p>\n\n<pre><code>&gt; iris = sklearn.datasets.load_iris()\n</code></pre>\n\n<p>writing the following gives me:</p>\n\n<pre><code>&gt; type (iris)\n  &lt;class 'tuple'&gt;\n</code></pre>\n\n<p>What exactly does it mean by a class of tuples? I have read the documentation but it is still not clear to me how you can access </p>\n\n<pre><code>&gt; iris.data\n</code></pre>\n\n<p>and </p>\n\n<pre><code>&gt; iris.target\n</code></pre>\n\n<p>but then how can you also do :</p>\n\n<pre><code>&gt; iris.target[[10, 25, 50]] \n</code></pre>\n\n<p>Can someone please explain this in more detail? Thanks!</p>\n"}, {"tags": ["python", "string", "pandas", "csv", "variables"], "comments": [{"owner": {"reputation": 16757, "user_id": 2799941, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/260db848f0eb7e3cd55998969a7a43a4?s=128&d=identicon&r=PG&f=1", "display_name": "andrew_reece", "link": "https://stackoverflow.com/users/2799941/andrew-reece"}, "edited": false, "score": 2, "creation_date": 1514412914, "post_id": 47999233, "comment_id": 82966981, "body": "Welcome to StackOverflow.  You&#39;ll find you&#39;ll get better answers, faster, if you provide a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> to illustrate your problem.  At the very least, provide example data and desired output.  This not only makes it easier to help you, but for others who find your post in the future, it&#39;ll be easier for them to understand as a reference."}, {"owner": {"reputation": 301, "user_id": 7926383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1aff6128f3bd7a8d25092af1e44d6f16?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob H", "link": "https://stackoverflow.com/users/7926383/jacob-h"}, "edited": false, "score": 0, "creation_date": 1514412918, "post_id": 47999233, "comment_id": 82966982, "body": "You might be interested in the first two chapters of the <a href=\"https://pandas.pydata.org/pandas-docs/stable/tutorials.html\" rel=\"nofollow noreferrer\">pandas cookbook</a>, which are <a href=\"http://nbviewer.jupyter.org/github/jvns/pandas-cookbook/blob/v0.1/cookbook/Chapter%201%20-%20Reading%20from%20a%20CSV.ipynb\" rel=\"nofollow noreferrer\">reading csv data</a> and <a href=\"http://nbviewer.jupyter.org/github/jvns/pandas-cookbook/blob/v0.1/cookbook/Chapter%202%20-%20Selecting%20data%20&amp;%20finding%20the%20most%20common%20complaint%20type.ipynb\" rel=\"nofollow noreferrer\">selecting data from dataframes</a>."}, {"owner": {"reputation": 7875, "user_id": 2833516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9RQMa.jpg?s=128&g=1", "display_name": "Rahul Gupta", "link": "https://stackoverflow.com/users/2833516/rahul-gupta"}, "edited": false, "score": 0, "creation_date": 1514440937, "post_id": 47999233, "comment_id": 82973012, "body": "Content fomatting"}], "owner": {"user_type": "does_not_exist", "display_name": "user9146648"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1514440937, "creation_date": 1514412690, "last_edit_date": 1514440937, "question_id": 47999233, "link": "https://stackoverflow.com/questions/47999233/assigning-string-from-a-csv-cell-to-a-variable-using-pandas-python", "title": "Assigning string from a csv cell to a variable using pandas/python", "body": "<p>For example, at some point in my <code>csv</code> file there is a <code>cell</code> with the string 'username', which is in say cell b6 (note: this is not a row or column header). 2 cells to the right of this, there is the associated value for the 'username', let's say it is 'Jason', in b8. </p>\n\n<p>How can I copy the string 'Jason' and assign it to a variable x for future use? </p>\n\n<p>Ideally I would like to bypass having the code interact with excel in any way</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 12668, "user_id": 95852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e215c7362074d0346612a10d3a89be9e?s=128&d=identicon&r=PG", "display_name": "John Y", "link": "https://stackoverflow.com/users/95852/john-y"}, "edited": false, "score": 2, "creation_date": 1514414516, "post_id": 47999145, "comment_id": 82967419, "body": "The only drawback you gave for <code>namedtuple</code> is that it&#39;s &quot;too heavy&quot;. You didn&#39;t make it sound like it was missing features you need, nor that the extra features would <i>actively get in the way</i>. So to me, this is the clear and obvious winner. I don&#39;t think there is anything more Pythonic than taking a well-known, well-understood standard library feature which meets all your requirements and just using it."}, {"owner": {"reputation": 4469, "user_id": 6342812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/19e9e8f53f02cc9013f635a6bb67647d?s=128&d=identicon&r=PG&f=1", "display_name": "rassar", "link": "https://stackoverflow.com/users/6342812/rassar"}, "edited": false, "score": 0, "creation_date": 1514415000, "post_id": 47999145, "comment_id": 82967550, "body": "Of your examples, 3 is the most pythonic - 1 is not explicit, 4 is too explicit, and generally enums are not pythonic for things like this, especially with the indexing difference. 3 is more readable, uses well-known stdlib, and has no real drawbacks."}, {"owner": {"reputation": 1195, "user_id": 8217456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed0a97dac4a284f09d37905b50480de0?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan F", "link": "https://stackoverflow.com/users/8217456/dylan-f"}, "reply_to_user": {"reputation": 12668, "user_id": 95852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e215c7362074d0346612a10d3a89be9e?s=128&d=identicon&r=PG", "display_name": "John Y", "link": "https://stackoverflow.com/users/95852/john-y"}, "edited": false, "score": 0, "creation_date": 1514415489, "post_id": 47999145, "comment_id": 82967666, "body": "@JohnY See the edit. Your comment would serve as an answer to how I intended the question."}, {"owner": {"reputation": 1195, "user_id": 8217456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed0a97dac4a284f09d37905b50480de0?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan F", "link": "https://stackoverflow.com/users/8217456/dylan-f"}, "reply_to_user": {"reputation": 4469, "user_id": 6342812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/19e9e8f53f02cc9013f635a6bb67647d?s=128&d=identicon&r=PG&f=1", "display_name": "rassar", "link": "https://stackoverflow.com/users/6342812/rassar"}, "edited": false, "score": 0, "creation_date": 1514415525, "post_id": 47999145, "comment_id": 82967683, "body": "@rassar See my comment to JohnY above."}, {"owner": {"reputation": 638, "user_id": 2116081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8063968396b1387924cee71c29ef4d6?s=128&d=identicon&r=PG", "display_name": "SigmaPiEpsilon", "link": "https://stackoverflow.com/users/2116081/sigmapiepsilon"}, "edited": false, "score": 2, "creation_date": 1514417494, "post_id": 47999145, "comment_id": 82968187, "body": "This seems to be an incomplete/too subjective question. In each of the cases you present disparate and sometimes conflicting arguments. For the dictionary example you mention preference for built-ins over standard library. Then you mention need to use <code>dir()</code>. For namedtuple you mention being too heavy. If you can clearly state what the goal of the program is from the programmer (you) and the user point of view, i.e. how the program is meant to be used, why the user has to use <code>dir()</code> and not <code>classes.keys()</code> then it will be easier to answer. Maybe a list of required features too?"}, {"owner": {"reputation": 1195, "user_id": 8217456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed0a97dac4a284f09d37905b50480de0?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan F", "link": "https://stackoverflow.com/users/8217456/dylan-f"}, "reply_to_user": {"reputation": 638, "user_id": 2116081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8063968396b1387924cee71c29ef4d6?s=128&d=identicon&r=PG", "display_name": "SigmaPiEpsilon", "link": "https://stackoverflow.com/users/2116081/sigmapiepsilon"}, "edited": false, "score": 0, "creation_date": 1514420189, "post_id": 47999145, "comment_id": 82968744, "body": "@SigmaPiEpsilon Valid criticism. My initial thought was to leave the question open to general comparison of advantages and disadvantages. But, a somewhat-subjective-by-nature question needs more rigor. I tried to address your concerns with an edit."}], "answers": [{"comments": [{"owner": {"reputation": 1195, "user_id": 8217456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed0a97dac4a284f09d37905b50480de0?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan F", "link": "https://stackoverflow.com/users/8217456/dylan-f"}, "edited": false, "score": 0, "creation_date": 1514421405, "post_id": 47999771, "comment_id": 82969028, "body": "I agree with your assessment and I appreciate additional feedback on my examples. I&#39;m curious: Why do you say <code>enums</code> are not Pythonic? Could you maybe include a short, good use for enums if they&#39;re not for enumerating lists? I understand this is an additional question, but it would support your argument for <code>namedtuple</code>."}], "tags": [], "owner": {"reputation": 4469, "user_id": 6342812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/19e9e8f53f02cc9013f635a6bb67647d?s=128&d=identicon&r=PG&f=1", "display_name": "rassar", "link": "https://stackoverflow.com/users/6342812/rassar"}, "is_accepted": false, "score": 1, "last_activity_date": 1514425221, "last_edit_date": 1514425221, "creation_date": 1514417033, "answer_id": 47999771, "question_id": 47999145, "link": "https://stackoverflow.com/questions/47999145/literate-way-to-index-a-list-where-each-element-has-an-interpretation/47999771#47999771", "title": "Literate way to index a list where each element has an interpretation?", "body": "<p>Of your examples, 3 is the most pythonic answer to your question.</p>\n\n<p>1, as you said, does not even answer your question, since the names are not explicit. </p>\n\n<p>2 uses enums, which though being in the standard library are not pythonic and generally not used in these scenarios in Python.\n(Edit): In this case you only really need two different constants - the target values and the other ones. An Enum will provide separate values for each constant, which is not what the goal of your program is and seems to be a roundabout way of approaching the problem.</p>\n\n<p>4 is just not maintainable if a client wants to add options, and even as it is it's painstaking work.</p>\n\n<p>3 uses well-known classes from the standard library in a readable and succinct way. Also, it does not have any drawbacks, as it is perfectly explicit. Being too \"heavy\" doesn't matter if you don't care about performance, and anyway the lag will be unnoticeable with your input size.</p>\n"}, {"tags": [], "owner": {"reputation": 4883, "user_id": 62138, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/65881e840f44a05c4f3b0aea257da42e?s=128&d=identicon&r=PG", "display_name": "salparadise", "link": "https://stackoverflow.com/users/62138/salparadise"}, "is_accepted": true, "score": 3, "last_activity_date": 1514422683, "last_edit_date": 1514422683, "creation_date": 1514419954, "answer_id": 48000079, "question_id": 47999145, "link": "https://stackoverflow.com/questions/47999145/literate-way-to-index-a-list-where-each-element-has-an-interpretation/48000079#48000079", "title": "Literate way to index a list where each element has an interpretation?", "body": "<p>How about a factory function to create a <strong>zero</strong> indexed <code>IntEnum</code> since that is the object that suits your needs, and <code>Enum</code> provides flexibility in construction:</p>\n\n<pre><code>from enum import IntEnum\n\ndef zero_indexed_enum(name, items):\n    # splits on space, so it won't take any iterable. Easy to change depending on need.\n    return IntEnum(name, ((item, value) for value, item in enumerate(items.split())))\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>In [43]: header = (\"Arched_Eyebrows Attractive Bags_Under_Eyes \"\n    ...:           \"Bald Bangs Chubby Male Wearing_Necktie Young\")\nIn [44]: Classes = zero_indexed_enum('Classes', header)\n\nIn [45]: list(Classes)\nOut[45]:\n[&lt;Classes.Arched_Eyebrows: 0&gt;,\n &lt;Classes.Attractive: 1&gt;,\n &lt;Classes.Bags_Under_Eyes: 2&gt;,\n &lt;Classes.Bald: 3&gt;,\n &lt;Classes.Bangs: 4&gt;,\n &lt;Classes.Chubby: 5&gt;,\n &lt;Classes.Male: 6&gt;,\n &lt;Classes.Wearing_Necktie: 7&gt;,\n &lt;Classes.Young: 8&gt;]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4469, "user_id": 6342812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/19e9e8f53f02cc9013f635a6bb67647d?s=128&d=identicon&r=PG&f=1", "display_name": "rassar", "link": "https://stackoverflow.com/users/6342812/rassar"}, "edited": false, "score": 0, "creation_date": 1514420505, "post_id": 48000119, "comment_id": 82968826, "body": "Defining an entire new class might be overkill for this question."}, {"owner": {"reputation": 4471, "user_id": 2598661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077bac49baa40c91fca05d805a30b075?s=128&d=identicon&r=PG", "display_name": "nitred", "link": "https://stackoverflow.com/users/2598661/nitred"}, "reply_to_user": {"reputation": 4469, "user_id": 6342812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/19e9e8f53f02cc9013f635a6bb67647d?s=128&d=identicon&r=PG&f=1", "display_name": "rassar", "link": "https://stackoverflow.com/users/6342812/rassar"}, "edited": false, "score": 1, "creation_date": 1514420797, "post_id": 48000119, "comment_id": 82968892, "body": "@rassar OP seemed ok with it since method-4 in the question is a custom class. And the second link i.e. <code>shorter lighter version</code> is pretty small anyway."}, {"owner": {"reputation": 1195, "user_id": 8217456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed0a97dac4a284f09d37905b50480de0?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan F", "link": "https://stackoverflow.com/users/8217456/dylan-f"}, "edited": false, "score": 0, "creation_date": 1514420958, "post_id": 48000119, "comment_id": 82968925, "body": "+1 for a creative response and discussing advantages! I agree that the &quot;shorter lighter version&quot; could be appropriate."}, {"owner": {"reputation": 638, "user_id": 2116081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8063968396b1387924cee71c29ef4d6?s=128&d=identicon&r=PG", "display_name": "SigmaPiEpsilon", "link": "https://stackoverflow.com/users/2116081/sigmapiepsilon"}, "edited": false, "score": 0, "creation_date": 1514435019, "post_id": 48000119, "comment_id": 82971573, "body": "These methods are not sufficient on their own as none of these classes override <code>__dir__()</code> which is what is called by <code>dir()</code>. Using <code>dir()</code> on these instances will only give the attributes of python <code>dict</code>. The primary need for dot access as I understood was to facilitate easy documentation through sphinx by <code>dir()</code>. See my answer below."}], "tags": [], "owner": {"reputation": 4471, "user_id": 2598661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077bac49baa40c91fca05d805a30b075?s=128&d=identicon&r=PG", "display_name": "nitred", "link": "https://stackoverflow.com/users/2598661/nitred"}, "is_accepted": false, "score": 2, "last_activity_date": 1514451696, "last_edit_date": 1514451696, "creation_date": 1514420255, "answer_id": 48000119, "question_id": 47999145, "link": "https://stackoverflow.com/questions/47999145/literate-way-to-index-a-list-where-each-element-has-an-interpretation/48000119#48000119", "title": "Literate way to index a list where each element has an interpretation?", "body": "<p>You can use a custom class which I like to call as <code>DotMap</code> or as mentioned here is this SO discussion as <code>Map</code>: </p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/a/32107024/2598661\">https://stackoverflow.com/a/32107024/2598661</a> (<code>Map</code>, longer complete version)</li>\n<li><a href=\"https://stackoverflow.com/a/23689767/2598661\">https://stackoverflow.com/a/23689767/2598661</a> (<code>dotdict</code>, shorter lighter version)</li>\n</ul>\n\n<p>About <code>Map</code>:</p>\n\n<ul>\n<li>It has the features of a dictionary since the input to a Map/DotMap is a dict. You can access attributes using <code>features['male']</code>.</li>\n<li>Additionally you can access the attributes using dot i.e. <code>features.male</code> and the attributes will be exposed when you do <code>dir(features)</code>.</li>\n<li>It is only as heavy as it needs to be in order to enable the dot functionality.</li>\n<li>Unlike <code>namedtuple</code> you don't need to pre-define it and you can add and remove keys willy nilly.</li>\n<li>The <code>Map</code> function described in the SO question is not Python3 compatible because it uses <code>iteritems()</code>. Just replace it with <code>items()</code> instead.</li>\n</ul>\n\n<p>About <code>dotdict</code>:</p>\n\n<ul>\n<li><code>dotdict</code> provides the same advantages of <code>Map</code> with the exception that it does not override the <code>dir()</code> method therefore you will not be able to obtain the attributes for documentation. @SigmaPiEpsilon has provided a fix for this <a href=\"https://stackoverflow.com/a/48001538/2598661\">here</a>.</li>\n<li>It uses the <code>dict.get</code> method instead of <code>dict.__getitem__</code> therefore it will return <code>None</code> instead of throwing <code>KeyError</code> when you are access attributes that don't exist.</li>\n<li>It does not recursively apply <code>dotdict-iness</code> to nested dicts therefore you won't be able to use <code>features.foo.bar</code>.</li>\n</ul>\n\n<p>Here's the updated version of <code>dotdict</code> which solves the first two issues:</p>\n\n<pre><code>class dotdict(dict):\n    __getattr__ = dict.__getitem__  # __getitem__ instead of get\n    __setattr__ = dict.__setitem__\n    __delattr__ = dict.__delitem__\n    def __dir__(self):              # by @SigmaPiEpsilon for documentation\n        return self.keys()\n</code></pre>\n\n<h3>Update</h3>\n\n<p><code>Map</code> and <code>dotdict</code> don't have the same behavior as pointed out by @SigmaPiEpsilon so I added separate descriptions for both.</p>\n"}, {"comments": [{"owner": {"reputation": 4471, "user_id": 2598661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077bac49baa40c91fca05d805a30b075?s=128&d=identicon&r=PG", "display_name": "nitred", "link": "https://stackoverflow.com/users/2598661/nitred"}, "edited": false, "score": 0, "creation_date": 1514451788, "post_id": 48001538, "comment_id": 82977148, "body": "I hope you don&#39;t mind, I updated my answer using your suggestion for completeness. Thanks for pointing it out."}, {"owner": {"reputation": 1195, "user_id": 8217456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed0a97dac4a284f09d37905b50480de0?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan F", "link": "https://stackoverflow.com/users/8217456/dylan-f"}, "edited": false, "score": 0, "creation_date": 1514474816, "post_id": 48001538, "comment_id": 82988501, "body": "In your numpy solution, Python 3 requires <code>list(zip(...))</code>. I made an edit for you."}, {"owner": {"reputation": 638, "user_id": 2116081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8063968396b1387924cee71c29ef4d6?s=128&d=identicon&r=PG", "display_name": "SigmaPiEpsilon", "link": "https://stackoverflow.com/users/2116081/sigmapiepsilon"}, "reply_to_user": {"reputation": 1195, "user_id": 8217456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed0a97dac4a284f09d37905b50480de0?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan F", "link": "https://stackoverflow.com/users/8217456/dylan-f"}, "edited": false, "score": 0, "creation_date": 1514485959, "post_id": 48001538, "comment_id": 82993726, "body": "@DylanF I added a second way to enable accessing the keys/attributes both through <code>dir()</code> and <code>vars()</code>."}], "tags": [], "owner": {"reputation": 638, "user_id": 2116081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8063968396b1387924cee71c29ef4d6?s=128&d=identicon&r=PG", "display_name": "SigmaPiEpsilon", "link": "https://stackoverflow.com/users/2116081/sigmapiepsilon"}, "is_accepted": false, "score": 1, "last_activity_date": 1514485853, "last_edit_date": 1514485853, "creation_date": 1514434905, "answer_id": 48001538, "question_id": 47999145, "link": "https://stackoverflow.com/questions/47999145/literate-way-to-index-a-list-where-each-element-has-an-interpretation/48001538#48001538", "title": "Literate way to index a list where each element has an interpretation?", "body": "<p>Your requirements if I understand correctly can be divided into two parts:</p>\n\n<ol>\n<li><p>Access the position of header elements in the <code>.txt</code> by name in the most pythonic way possible and with minimum external dependencies</p></li>\n<li><p>Enable dot access to the data structure containing the names of the headers to be able to call <code>dir()</code> and setup easy interface with Sphinx</p></li>\n</ol>\n\n<h2>Pure Python Way (no external dependencies)</h2>\n\n<p>The most pythonic way to solve the problem is of course the method using dictionaries (dictionaries are at the heart of python). Searching a dictionary through key is also much faster than other methods. The only problem is this prevents dot access. Another answer mentions the <a href=\"https://stackoverflow.com/a/32107024/2116081\">Map</a> and <a href=\"https://stackoverflow.com/a/23689767/2116081\">dotdict</a> as alternatives. <code>dotdict</code> is simpler but it only enable dot access, it will not help in the documentation aspect with <code>dir()</code> since <code>dir()</code> calls the <code>__dir__()</code> method which is not overridden in these cases. Hence it will only return the attributes of Python <code>dict</code> and not the header names. See below:</p>\n\n<pre><code>&gt;&gt;&gt; class dotdict(dict):\n...     __getattr__ = dict.get\n...     __setattr__ = dict.__setitem__\n...     __delattr__ = dict.__delitem__\n... \n&gt;&gt;&gt; somedict = {'a' : 1, 'b': 2, 'c' : 3}                                                                                                          \n&gt;&gt;&gt; somedotdict = dotdict(somedict)\n&gt;&gt;&gt; somedotdict.a\n1\n&gt;&gt;&gt; 'a' in dir(somedotdict)\nFalse\n</code></pre>\n\n<p>There are two options to get around this problem.</p>\n\n<p><strong>Option 1</strong>: Override the <code>__dir__()</code> method like below. But this will only work when you call <code>dir()</code> on the instances of the class. To make the changes apply for the class itself you have to create a metaclass for the class. See <a href=\"https://stackoverflow.com/questions/46120462/how-to-override-the-dir-method-for-a-class\">here</a></p>\n\n<pre><code>#add this to dotdict\ndef __dir__(self):\n    return self.keys()\n\n&gt;&gt;&gt; somedotdictdir = dotdictdir(somedict)\n&gt;&gt;&gt; somedotdictdir.a\n1\n&gt;&gt;&gt; dir(somedotdictdir)\n['a', 'b', 'c']\n</code></pre>\n\n<p><strong>Option 2</strong>: A second option which makes it much closer to user-defined object with attributes is to update the <code>__dict__</code> attribute of the created object. This is what <a href=\"https://stackoverflow.com/a/32107024/2116081\">Map</a> also uses. A normal python <code>dict</code> does not have this attribute. If you add this then you can call <code>dir()</code> to get attributes/keys and also all the additional methods/attributes of python <code>dict</code>. If you just want the stored attribute and values you can use <code>vars(somedotdictdir)</code> which is also useful for documentation.</p>\n\n<pre><code>class dotdictdir(dict):\n\n    def __init__(self, *args, **kwargs):\n        dict.__init__(self, *args, **kwargs)\n        self.__dict__.update({k : v for k,v in self.items()})\n    def __setitem__(self, key, value):\n        dict.__setitem__(self, key, value)\n        self.__dict__.update({key : value})\n    __getattr__ = dict.get #replace with dict.__getitem__ if want raise error on missing key access\n    __setattr__ = __setitem__\n    __delattr__ = dict.__delitem__\n\n&gt;&gt;&gt; somedotdictdir = dotdictdir(somedict)\n&gt;&gt;&gt; somedotdictdir\n{'a': 3, 'c': 6, 'b': 4}\n&gt;&gt;&gt; vars(somedotdictdir)\n{'a': 3, 'c': 6, 'b': 4}\n&gt;&gt;&gt; 'a' in dir(somedotdictdir)\nTrue\n</code></pre>\n\n<h2>Numpy way</h2>\n\n<p>Another option will be to use a numpy <a href=\"https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.recarray.html\" rel=\"nofollow noreferrer\"><code>record</code></a> array which allows dot access. I noticed in your code you are already using numpy. In this case too <code>__dir__()</code> has to be overrridden to get the attributes. This may result in faster operations (not tested) for data with lots of other numeric values. </p>\n\n<pre><code>&gt;&gt;&gt; headers = \"Arched_Eyebrows Attractive Bags_Under_Eyes Bald Bangs Chubby Male Wearing_Necktie Young\".split()\n&gt;&gt;&gt; header_rec = np.array([tuple(range(len(headers)))], dtype = zip(headers, [int]*len(headers)))\n&gt;&gt;&gt; header_rec.dtype.names                                                                                                                           \n('Arched_Eyebrows', 'Attractive', 'Bags_Under_Eyes', 'Bald', 'Bangs', 'Chubby', 'Male', 'Wearing_Necktie', 'Young')\n&gt;&gt;&gt; np.in1d(header_rec.item(), [header_rec[key].item() for key in [\"Young\", \"Bald\", \"Chubby\"]]).astype(int)\narray([0, 0, 0, 1, 0, 1, 0, 0, 1])\n</code></pre>\n\n<p>In Python 3, you will need to use <code>dtype=list(zip(headers, [int]*len(headers)))</code> since <code>zip</code> became its own object.</p>\n"}], "owner": {"reputation": 1195, "user_id": 8217456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed0a97dac4a284f09d37905b50480de0?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan F", "link": "https://stackoverflow.com/users/8217456/dylan-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 555, "favorite_count": 1, "accepted_answer_id": 48000079, "answer_count": 4, "score": 7, "last_activity_date": 1514582304, "creation_date": 1514412091, "last_edit_date": 1514582304, "question_id": 47999145, "link": "https://stackoverflow.com/questions/47999145/literate-way-to-index-a-list-where-each-element-has-an-interpretation", "title": "Literate way to index a list where each element has an interpretation?", "body": "<p>Tl;dr is bold-faced text.</p>\n\n<p>I'm working with an image dataset that comes with boolean \"one-hot\" image annotations (Celeba to be specific). The annotations encode facial features like <em>bald</em>, <em>male</em>, <em>young</em>. Now <strong>I want to make a custom one-hot list</strong> (to test my GAN model). I want to provide a <strong>literate interface</strong>. I.e., rather than specifying <code>features[12]=True</code> knowing that <code>12</code> - counting from zero - corresponds to the <em>male</em> feature, I want something like <code>features[male]=True</code> or <code>features.male=True</code>.</p>\n\n<p>Suppose the header of my <code>.txt</code> file is</p>\n\n<pre><code>Arched_Eyebrows Attractive Bags_Under_Eyes Bald Bangs Chubby Male Wearing_Necktie Young\n</code></pre>\n\n<p>and I want to codify <em>Young</em>, <em>Bald</em>, and <em>Chubby</em>. <strong>The expected output is</strong></p>\n\n<pre><code>[ 0.  0.  0.  1.  0.  1.  0.  0.  1.]\n</code></pre>\n\n<p>since <em>Bald</em> is the fourth entry of the header, <em>Chubby</em> is the sixth, and so on. <strong>What is the clearest way to do this without expecting a user to know <em>Bald</em> is the fourth entry, etc.?</strong> </p>\n\n<p>I'm looking for a Pythonic way, not <em>necessarily</em> the fastest way.</p>\n\n<h1>Ideal Features</h1>\n\n<p>In rough order of importance:</p>\n\n<ol>\n<li>A way to accomplish my stated goal that is already standard in the Python community will take precedence.</li>\n<li>A user/programmer should not need to count to an attribute in the <code>.txt</code> header. This is the point of what I'm trying to design.</li>\n<li>A user should not be expected to have non-standard libraries like <code>aenum</code>.</li>\n<li>A user/programmer should not need to reference the <code>.txt</code> header for attribute names/available attributes. One example: if a user wants to specify the gender attribute but does not know whether to use <code>male</code> or <code>female</code>, it should be easy to find out.</li>\n<li>A user/programmer should be able to find out the available attributes via documentation (ideally generated by Sphinx api-doc). That is, the point 4 should be possible reading as little code as possible. Attribute exposure with <code>dir()</code> sufficiently satisfies this point.</li>\n<li>The programmer should find the indexing tool natural. Specifically, zero-indexing should be preferred over subtracting from one-indexing.</li>\n<li>Between two otherwise completely identical solutions, one with better performance would win.</li>\n</ol>\n\n<h1>Examples:</h1>\n\n<p>I'm going to compare and contrast the ways that immediately came to my mind. <strong>All examples use:</strong></p>\n\n<pre><code>import numpy as np\nheader = (\"Arched_Eyebrows Attractive Bags_Under_Eyes \"\n          \"Bald Bangs Chubby Male Wearing_Necktie Young\")\nNUM_CLASSES = len(header.split())  # 9\n</code></pre>\n\n<h2>1: Dict Comprehension</h2>\n\n<p>Obviously we could use a dictionary to accomplish this:</p>\n\n<pre><code>binary_label = np.zeros([NUM_CLASSES])\nclasses = {head: idx for (idx, head) in enumerate(header.split())}\nbinary_label[[classes[\"Young\"], classes[\"Bald\"], classes[\"Chubby\"]]] = True\nprint(binary_label)\n</code></pre>\n\n<p>For what it's worth, this has the fewest lines of code and is the only one that doesn't rely on a standard library over builtins. As for negatives, it isn't exactly self-documenting. To see the available options, you must <code>print(classes.keys())</code> - it's not exposed with <code>dir()</code>. This borders on not satisfying feature 5 because it requires a user to know <code>classes</code> is a dict to exposure features AFAIK.</p>\n\n<h2>2: Enum:</h2>\n\n<p>Since I'm learning C++ right now, <code>Enum</code> is the first thing that came to mind:</p>\n\n<pre><code>import enum\nbinary_label = np.zeros([NUM_CLASSES])\nClasses = enum.IntEnum(\"Classes\", header)\nfeatures = [Classes.Young, Classes.Bald, Classes.Chubby]\nzero_idx_feats = [feat-1 for feat in features]\nbinary_label[zero_idx_feats] = True\nprint(binary_label)\n</code></pre>\n\n<p>This gives dot notation and the image options are exposed with <code>dir(Classes)</code>. However, <code>enum</code> uses one-indexing by default (the reason is <a href=\"https://docs.python.org/3/library/enum.html#functional-api\" rel=\"nofollow noreferrer\">documented</a>). The work-around makes me feel like <code>enum</code> is not the Pythonic way to do this, and entirely fails to satisfy feature 6.</p>\n\n<h2>3: Named Tuple</h2>\n\n<p>Here's another one out of the standard Python library:</p>\n\n<pre><code>import collections\nbinary_label = np.zeros([NUM_CLASSES])\nclss = collections.namedtuple(\n    \"Classes\", header)._make(range(NUM_CLASSES))\nbinary_label[[clss.Young, clss.Bald, clss.Chubby]] = True\nprint(binary_label)\n</code></pre>\n\n<p>Using <code>namedtuple</code>, we again get dot notation and self-documentation with <code>dir(clss)</code>. But, the <code>namedtuple</code> class is heavier than <code>enum</code>. By this I mean, <code>namedtuple</code> has functionality I do not need. This solution appears to be a leader among my examples, but I do not know if it satisfies feature 1 or if an alternative could \"win\" via feature 7.</p>\n\n<h2>4: Custom Enum</h2>\n\n<p>I could really break my back:</p>\n\n<pre><code>binary_label = np.zeros([NUM_CLASSES])\nclass Classes(enum.IntEnum):\n    Arched_Eyebrows = 0\n    Attractive = 1\n    Bags_Under_Eyes = 2\n    Bald = 3\n    Bangs = 4\n    Chubby = 5\n    Male = 6\n    Wearing_Necktie = 7\n    Young = 8\nbinary_label[\n    [Classes.Young, Classes.Bald, Classes.Chubby]] = True\nprint(binary_label)\n</code></pre>\n\n<p>This has all the advantages of Ex. 2. But, it comes with obvious the obvious drawbacks. I have to write out <em>all the features</em> (there's <em>40</em> in the real dataset) just to zero-index! Sure, this is how to make an enum in C++ (AFAIK), but it shouldn't be necessary in Python. This is a slight failure on feature 6.</p>\n\n<h1>Summary</h1>\n\n<p>There are many ways to accomplish literate zero-indexing in Python. <strong>Would you provide a code snippet of how you would accomplish what I'm after and tell me why your way is right?</strong> </p>\n\n<p>(edit:) <strong>Or explain why one of my examples is the right tool for the job?</strong></p>\n\n<hr>\n\n<h1>Status Update:</h1>\n\n<p>I'm not ready to accept an answer yet in case anyone wants to address the following feedback/update, or any new solution appears. Maybe another 24 hours? All the responses have been helpful, so I upvoted everyone's so far. You may want to look over this <a href=\"https://github.com/flauted/SO-literate-index\" rel=\"nofollow noreferrer\">repo</a> I'm using to test solutions. <strong>Feel free to tell me if my following remarks are (in)accurate or unfair:</strong></p>\n\n<h3>zero-enum:</h3>\n\n<p>Oddly, Sphinx documents this incorrectly (one-indexed in docs), but it does document it! I suppose that \"issue\" doesn't fail any ideal feature.</p>\n\n<h3>dotdict:</h3>\n\n<p>I feel that <code>Map</code> is overkill, but <code>dotdict</code> is acceptable. Thanks to both answerers that got this solution working with <code>dir()</code>. However, it doesn't appear that it \"works seamlessly\" with Sphinx.</p>\n\n<h3>Numpy record:</h3>\n\n<p>As written, this solution takes significantly longer than the other solutions. It comes in at 10x slower than a <code>namedtuple</code> (fastest behind pure dict) and 7x slower than standard <code>IntEnum</code> (slowest behind numpy record). That's not drastic at current scale, <em>nor a priority</em>, but a quick Google search indicates <code>np.in1d</code> is in fact slow. Let's stick with</p>\n\n<pre><code>_label = np.zeros([NUM_CLASSES])\n_label[[header_rec[key].item() for key in [\"Young\", \"Bald\", \"Chubby\"]]] = True\n</code></pre>\n\n<p>unless I've implemented something wrong in the linked repo. This brings the execution speed into a range that compares with the other solutions. Again, no Sphinx.</p>\n\n<h3>namedtuple (and rassar's critiques)</h3>\n\n<p>I'm not convinced of your <code>enum</code> critique. It seems to me that you believe I'm approaching the problem wrong. It's fine to call me out on that, but I don't see how using the <code>namedtuple</code> is fundamentally different from \"Enum [which] will provide separate values for each constant.\" Have I misunderstood you?</p>\n\n<p>Regardless, <code>namedtuple</code> appears in Sphinx (correctly numbered, for what it's worth). On the Ideal Features list, this chalks up identically to zero-enum <strong>and</strong> profiles ahead of zero-enum.</p>\n\n<h2>Accepted Rationale</h2>\n\n<p>I accepted the zero-enum answer because the answer gave me the best challenger for <code>namedtuple</code>. <strong>By my standards, <code>namedtuple</code> is marginally the best solution.</strong> But salparadise wrote the answer that helped me feel confident in that assessment. Thanks to all who answered.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 2, "creation_date": 1514412355, "post_id": 47999119, "comment_id": 82966829, "body": "What are you trying to do? Also, your code is incomplete, as <code>parse_file</code> does not appear in the supplied code."}, {"owner": {"reputation": 15, "user_id": 8672630, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c968e1fce59c06e0eaaeef2917e9a4fa?s=128&d=identicon&r=PG&f=1", "display_name": "jackpetes", "link": "https://stackoverflow.com/users/8672630/jackpetes"}, "reply_to_user": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1514412539, "post_id": 47999119, "comment_id": 82966874, "body": "parse-file is readFile. My code is complete and using a lot of memory. I need to reduce the usage due to the large file sizes I am working with"}, {"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 2, "creation_date": 1514412860, "post_id": 47999119, "comment_id": 82966966, "body": "Your code is <b>not</b> complete. It will not run as written: <code>NameError: name &#39;f_step&#39; is not defined</code>. Please <a href=\"https://stackoverflow.com/posts/47999119/edit\">edit</a> your question to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 15, "user_id": 8672630, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c968e1fce59c06e0eaaeef2917e9a4fa?s=128&d=identicon&r=PG&f=1", "display_name": "jackpetes", "link": "https://stackoverflow.com/users/8672630/jackpetes"}, "reply_to_user": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1514413510, "post_id": 47999119, "comment_id": 82967158, "body": "it is now complete and runs. I had an error which I have fixed"}, {"owner": {"reputation": 50452, "user_id": 33258, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4b21ea020b4d95c4abacaffc9daaf4e?s=128&d=identicon&r=PG", "display_name": "Hugh Bothwell", "link": "https://stackoverflow.com/users/33258/hugh-bothwell"}, "edited": false, "score": 0, "creation_date": 1514413568, "post_id": 47999119, "comment_id": 82967174, "body": "It looks like you want the line from each file which contains the largest value for BB=(number)? Or just single largest value?"}, {"owner": {"reputation": 15, "user_id": 8672630, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c968e1fce59c06e0eaaeef2917e9a4fa?s=128&d=identicon&r=PG&f=1", "display_name": "jackpetes", "link": "https://stackoverflow.com/users/8672630/jackpetes"}, "edited": false, "score": 0, "creation_date": 1514413722, "post_id": 47999119, "comment_id": 82967228, "body": "yes I want from each file. i.e compare lines containing values of bb and select the highest value of bb. Then write out each line with the max value of bb into the output text after comparison. i.e compare lines 1 file 1 with line 1 file 2 with line 1 file 3 etc and whichever line has the highest value of bb gets written to output, then go to line 2 etc"}, {"owner": {"reputation": 15, "user_id": 8672630, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c968e1fce59c06e0eaaeef2917e9a4fa?s=128&d=identicon&r=PG&f=1", "display_name": "jackpetes", "link": "https://stackoverflow.com/users/8672630/jackpetes"}, "edited": false, "score": 0, "creation_date": 1514482659, "post_id": 47999119, "comment_id": 82992299, "body": "I am wondering if I asked the right question because I am not getting any answers. Or is it too trivial? I am still stuck here. My code works but I need it to be more efficient."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1514592460, "post_id": 47999119, "comment_id": 83029579, "body": "If your code works without errors, a better place to ask could be <a href=\"https://codereview.stackexchange.com\">Code Review</a>."}], "owner": {"reputation": 15, "user_id": 8672630, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c968e1fce59c06e0eaaeef2917e9a4fa?s=128&d=identicon&r=PG&f=1", "display_name": "jackpetes", "link": "https://stackoverflow.com/users/8672630/jackpetes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1514592524, "creation_date": 1514411889, "last_edit_date": 1514592524, "question_id": 47999119, "link": "https://stackoverflow.com/questions/47999119/how-to-optimize-reading-and-comparing-lines-between-multiple-files", "title": "How to optimize reading and comparing lines between multiple files?", "body": "<p>What will be the best way to make reading the files more efficient? Using this</p>\n\n<pre><code>    with open(fname, 'r') as myf:\n        for myline in myf:\n</code></pre>\n\n<p>or</p>\n\n<pre><code>    for glob.glob('*.txt'):\n</code></pre>\n\n<p>I performed a <code>cprofile</code> stats and this is what I got for a few sorted lines:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>ncalls  tottime  percall  cumtime  percall filename:lineno(function)\n      4/1    0.000    0.000 1895.428 1895.428 {built-in method builtins.exec}\n        1  157.201  157.201 1895.428 1895.428 runmyfiles.py:2(&lt;module&gt;)\n        5 1365.371  273.074 1554.015  310.803 runmyfiles.py:9(readFile)\n    52727  184.205    0.003  184.205    0.003 {method 'write' of '_io.TextIOWrapper' objects}\n   194515    0.300    0.000   74.091    0.000 /usr/lib/python3.6/re.py:214(findall)\n   194515   72.479    0.000   72.479    0.000 {method 'findall' of '_sre.SRE_Pattern' objects}\n</code></pre>\n\n<p>I know I should optimize the file reading process but not sure how to go about it. I may need to open all the files at once and compare each line in each file with similar lines in the other files then write the output for the line containing the max value of bb. Is this logical considering the stats generated?  </p>\n"}, {"tags": ["python", "django", "django-rest-framework"], "comments": [{"owner": {"reputation": 665, "user_id": 5203863, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/b3918d7e8c3a33f29db835bc4a72c273?s=128&d=identicon&r=PG&f=1", "display_name": "rosenthal", "link": "https://stackoverflow.com/users/5203863/rosenthal"}, "reply_to_user": {"reputation": 15853, "user_id": 1925257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yY7YW.jpg?s=128&g=1", "display_name": "xyres", "link": "https://stackoverflow.com/users/1925257/xyres"}, "edited": false, "score": 0, "creation_date": 1514416208, "post_id": 47999097, "comment_id": 82967862, "body": "Wrong. Not a duplicate, I explicitly state in my question I am aware of how to access the header and that it isn&#39;t present."}, {"owner": {"reputation": 14111, "user_id": 289011, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7fabc4413849953957908f8690c2c24c?s=128&d=identicon&r=PG", "display_name": "BorrajaX", "link": "https://stackoverflow.com/users/289011/borrajax"}, "edited": false, "score": 0, "creation_date": 1514422677, "post_id": 47999097, "comment_id": 82969278, "body": "@rosenthal, duplicates are not bad, not to me, at least. I even wrote an answer (which you kindly chose, which is appreciated) even though I though it was a duplicate. To me, at least, they&#39;re just ways of saying <i>&quot;Hey, there might be more info here&quot;</i> <b>:)</b>"}, {"owner": {"reputation": 665, "user_id": 5203863, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/b3918d7e8c3a33f29db835bc4a72c273?s=128&d=identicon&r=PG&f=1", "display_name": "rosenthal", "link": "https://stackoverflow.com/users/5203863/rosenthal"}, "reply_to_user": {"reputation": 14111, "user_id": 289011, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7fabc4413849953957908f8690c2c24c?s=128&d=identicon&r=PG", "display_name": "BorrajaX", "link": "https://stackoverflow.com/users/289011/borrajax"}, "edited": false, "score": 0, "creation_date": 1514527500, "post_id": 47999097, "comment_id": 83005279, "body": "Left my comment and didn&#39;t want to delete it. I was wrong, it honestly was a duplicate and a reminder to keep myself in check sometimes."}], "answers": [{"comments": [{"owner": {"reputation": 665, "user_id": 5203863, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/b3918d7e8c3a33f29db835bc4a72c273?s=128&d=identicon&r=PG&f=1", "display_name": "rosenthal", "link": "https://stackoverflow.com/users/5203863/rosenthal"}, "edited": false, "score": 1, "creation_date": 1514416956, "post_id": 47999409, "comment_id": 82968052, "body": "Your answer is pretty much exactly what the documentation says that I already read, yet somehow I still missed that it was ending up in the dump. I could&#39;ve SWORN I didn&#39;t see it, but I&#39;m seeing it appear now. Appreciate the extra pair of eyes"}, {"owner": {"reputation": 14111, "user_id": 289011, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7fabc4413849953957908f8690c2c24c?s=128&d=identicon&r=PG", "display_name": "BorrajaX", "link": "https://stackoverflow.com/users/289011/borrajax"}, "reply_to_user": {"reputation": 665, "user_id": 5203863, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/b3918d7e8c3a33f29db835bc4a72c273?s=128&d=identicon&r=PG&f=1", "display_name": "rosenthal", "link": "https://stackoverflow.com/users/5203863/rosenthal"}, "edited": false, "score": 0, "creation_date": 1514422775, "post_id": 47999409, "comment_id": 82969291, "body": "Haha... Yep, it happens to all/many of us: <a href=\"https://stackoverflow.com/questions/45827690/is-there-anything-in-python-that-is-a-nonetype-besides-none\" title=\"is there anything in python that is a nonetype besides none\">stackoverflow.com/questions/45827690/&hellip;</a>"}], "tags": [], "owner": {"reputation": 14111, "user_id": 289011, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7fabc4413849953957908f8690c2c24c?s=128&d=identicon&r=PG", "display_name": "BorrajaX", "link": "https://stackoverflow.com/users/289011/borrajax"}, "is_accepted": true, "score": 3, "last_activity_date": 1514414385, "last_edit_date": 1514414385, "creation_date": 1514414047, "answer_id": 47999409, "question_id": 47999097, "link": "https://stackoverflow.com/questions/47999097/django-rest-framework-custom-headers-in-request-object/47999409#47999409", "title": "Django REST Framework custom headers in request object", "body": "<p>Django prepends <code>HTTP_</code> to the custom headers. I <strong>think</strong> (not sure, though) that it might be related to some security issues described <a href=\"https://www.djangoproject.com/weblog/2015/jan/13/security/\" rel=\"nofollow noreferrer\">here</a>. It also capitalizes them, so your <code>custom</code> header becomes <code>HTTP_CUSTOM</code></p>\n\n<pre><code>from rest_framework.decorators import api_view\nfrom rest_framework.response import Response\n\nimport logging\n\nlogger = logging.getLogger('django.test')\n\n@api_view(['GET'])\ndef TestView(request):\n    logger.info('Meta: %s' % request.META['HTTP_CUSTOM'])\n    return Response({'message': 'test'})\n</code></pre>\n\n<p>Correctly outputs (if the logging has been properly configured as described <a href=\"https://docs.djangoproject.com/en/2.0/topics/logging/\" rel=\"nofollow noreferrer\">here</a>):</p>\n\n<pre><code>Django version 2.0, using settings 'django_server.settings'\nStarting development server at http://127.0.0.1:8000/\nQuit the server with CONTROL-C.\n\"GET /test HTTP/1.1\" 301 0\nMeta: test\n\"GET /test/ HTTP/1.1\" 200 18\n</code></pre>\n\n<p>Also, as you can see in the output above, Django gives a 301 redirect when the API is hit (I believe this is for authentication purposes? Not sure either) so you'll have to tell your cURL to follow the redirects using <code>--location</code>:</p>\n\n<pre><code>curl --location --request GET \\\n     --header 'custom: test' http://localhost:8000/test\n</code></pre>\n\n<p>Also note that all the hyphens (<code>-</code>) in your header's name are transformed to underline symbols (<code>_</code>) so if you call your header something like <code>my-custom</code>, Django will transform it to <code>HTTP_MY_CUSTOM</code></p>\n"}], "owner": {"reputation": 665, "user_id": 5203863, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/b3918d7e8c3a33f29db835bc4a72c273?s=128&d=identicon&r=PG&f=1", "display_name": "rosenthal", "link": "https://stackoverflow.com/users/5203863/rosenthal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4730, "favorite_count": 1, "closed_date": 1514421171, "accepted_answer_id": 47999409, "answer_count": 1, "score": 5, "last_activity_date": 1514414385, "creation_date": 1514411719, "question_id": 47999097, "link": "https://stackoverflow.com/questions/47999097/django-rest-framework-custom-headers-in-request-object", "closed_reason": "Duplicate", "title": "Django REST Framework custom headers in request object", "body": "<p>I have a problem viewing incoming custom headers from requests when I'm creating a new API view via the <code>@api_view</code> decorator. </p>\n\n<p>My custom API view looks like this:</p>\n\n<pre><code> @api_view(['GET'])\n def TestView(request):\n   print(request.META)\n   return Response({'message': 'test'})\n</code></pre>\n\n<p>What I'm expecting is doing something like </p>\n\n<p><code>curl --request GET \\\n  --url http://localhost:8000/test \\\n  --header 'custom: test'</code></p>\n\n<p>I'd see my custom header called <code>custom</code> to appear in the output. Instead, it's not there at all. From the documentation, it says the following for the request.META field:</p>\n\n<pre><code>A dictionary containing all available HTTP headers. Available headers depend on the client and server, but here are some examples:\n</code></pre>\n\n<p>Whereas, they don't appear at all in my output. Am I missing something here?</p>\n\n<p>If it's relevant, I register my URL as such:</p>\n\n<p><code>urlpatterns = [url(r'test', views.TestView, name='test'), ...]</code></p>\n\n<p>My end goal is to write a custom permission class that will parse the custom header and do something related to authentication with it, and either allow or deny the request. My POC here is just to show the basic example of what I'm dealing with. I can provide the output of the <code>print(request.META)</code> but it's just a wall of text without my expected header present.</p>\n"}, {"tags": ["python", "merge", "count", "row"], "comments": [{"owner": {"reputation": 1899, "user_id": 6288435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r7UxC.jpg?s=128&g=1", "display_name": "TheF1rstPancake", "link": "https://stackoverflow.com/users/6288435/thef1rstpancake"}, "edited": false, "score": 0, "creation_date": 1514412071, "post_id": 47999075, "comment_id": 82966757, "body": "I&#39;m confused by your expected output.  How did you get Candy 4, Gum 2?  The first and last line make sense to me (it&#39;s the sum of the Quantity grouped by the Product).  But the second one doesn&#39;t match that pattern."}, {"owner": {"reputation": 13, "user_id": 9146913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54b788ca41431806d921998da425c522?s=128&d=identicon&r=PG&f=1", "display_name": "connor", "link": "https://stackoverflow.com/users/9146913/connor"}, "reply_to_user": {"reputation": 1899, "user_id": 6288435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r7UxC.jpg?s=128&g=1", "display_name": "TheF1rstPancake", "link": "https://stackoverflow.com/users/6288435/thef1rstpancake"}, "edited": false, "score": 0, "creation_date": 1514413391, "post_id": 47999075, "comment_id": 82967113, "body": "On OrderNum 1 candy was ordered 4 times, also on OrderNum1 gum was ordered 2 times. Since candy was not ordered anywhere else, the output for products ordered with candy is candy 4 and gum 2."}, {"owner": {"reputation": 1899, "user_id": 6288435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r7UxC.jpg?s=128&g=1", "display_name": "TheF1rstPancake", "link": "https://stackoverflow.com/users/6288435/thef1rstpancake"}, "edited": false, "score": 0, "creation_date": 1514413772, "post_id": 47999075, "comment_id": 82967239, "body": "I think I get it now.  There were 3 orders that have Gum.  Of those orders, 7 sets of Gum were ordered in total (across 3 different orders), and 4 things of Candy and 3 things of soda."}, {"owner": {"reputation": 13, "user_id": 9146913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54b788ca41431806d921998da425c522?s=128&d=identicon&r=PG&f=1", "display_name": "connor", "link": "https://stackoverflow.com/users/9146913/connor"}, "reply_to_user": {"reputation": 1899, "user_id": 6288435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r7UxC.jpg?s=128&g=1", "display_name": "TheF1rstPancake", "link": "https://stackoverflow.com/users/6288435/thef1rstpancake"}, "edited": false, "score": 0, "creation_date": 1514414793, "post_id": 47999075, "comment_id": 82967488, "body": "Great! Can you tell me how to do this in python?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9146913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54b788ca41431806d921998da425c522?s=128&d=identicon&r=PG&f=1", "display_name": "connor", "link": "https://stackoverflow.com/users/9146913/connor"}, "edited": false, "score": 0, "creation_date": 1514419069, "post_id": 47999694, "comment_id": 82968492, "body": "Thank you very much! This was perfect and very helpful."}, {"owner": {"reputation": 1899, "user_id": 6288435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r7UxC.jpg?s=128&g=1", "display_name": "TheF1rstPancake", "link": "https://stackoverflow.com/users/6288435/thef1rstpancake"}, "reply_to_user": {"reputation": 13, "user_id": 9146913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54b788ca41431806d921998da425c522?s=128&d=identicon&r=PG&f=1", "display_name": "connor", "link": "https://stackoverflow.com/users/9146913/connor"}, "edited": false, "score": 1, "creation_date": 1514419617, "post_id": 47999694, "comment_id": 82968619, "body": "No problem. If you wouldn&#39;t mind accepting this as the answer, that would be much appreciated!"}], "tags": [], "owner": {"reputation": 1899, "user_id": 6288435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r7UxC.jpg?s=128&g=1", "display_name": "TheF1rstPancake", "link": "https://stackoverflow.com/users/6288435/thef1rstpancake"}, "is_accepted": true, "score": 0, "last_activity_date": 1514416341, "creation_date": 1514416341, "answer_id": 47999694, "question_id": 47999075, "link": "https://stackoverflow.com/questions/47999075/combine-rows-and-count-values/47999694#47999694", "title": "Combine Rows and Count Values", "body": "<p>It sounds like what you want to do is find the associations between each element.  If two (or more) orders have \"Candy\", how many of each other Product do they contain.</p>\n\n<p>This is the best I could come up with.  First, group by each Product in order to find all orders that have that Product.  Then, take that subset from the original dataframe, and get the sum of the Quantity of each product.</p>\n\n<pre><code># group by the products\nproducts = df.groupby(\"Product\")\n\n# each groupby element is a tuple\n# the first entry is the value (in this case, the Product)\n# the second is a dataframe\n# iterate through each of these groups\nfor p in products:\n  sub_select = df[df[\"OrderNum\"].isin(p[1]['OrderNum'])]\n  quantities = sub_select.groupby(\"Product\").Quantity.sum()\n\n  # print the name of the product that we grouped by\n  # and convert the sums to a dictionary for easier reading\n  print(p[0], quantities.to_dict())\n  # Candy :  {'Candy': 4, 'Gum': 2}\n  # Chocolate :  {'Chocolate': 10}\n  # Gum :  {'Candy': 4, 'Soda': 3, 'Gum': 7}\n  # Soda :  {'Soda': 3, 'Gum': 5}\n</code></pre>\n\n<p><code>sub_select</code> will be a subset of our original dataframe. For example, it will contain all rows for all orders that had Candy.  <code>quantities</code> then groups all of those orders together by the Product in order to get the sum of the Quantity for each product across all matching orders.</p>\n"}], "owner": {"reputation": 13, "user_id": 9146913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54b788ca41431806d921998da425c522?s=128&d=identicon&r=PG&f=1", "display_name": "connor", "link": "https://stackoverflow.com/users/9146913/connor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "closed_date": 1514446886, "accepted_answer_id": 47999694, "answer_count": 1, "score": -1, "last_activity_date": 1514422425, "creation_date": 1514411524, "last_edit_date": 1514422425, "question_id": 47999075, "link": "https://stackoverflow.com/questions/47999075/combine-rows-and-count-values", "closed_reason": "Not suitable for this site", "title": "Combine Rows and Count Values", "body": "<p>I have a dataframe similar to this:</p>\n\n<pre><code>OrderNum Product Quantity\n\n1 Gum 2\n\n1 Candy 4\n\n2 Chocolate 8\n\n3 Gum 3\n\n3 Soda 1\n\n4 Chocolate 2\n\n5 Gum 2\n\n5 Soda 2\n</code></pre>\n\n<p>For each product ordered I would like to find out what other products and how many of each were ordered with it, based on the order number's being identical.</p>\n\n<p>I'd like to see something like this:</p>\n\n<pre><code>Gum 7 Candy 4 Soda 3\n\nCandy 4 Gum 2\n\nChocolate 10\n\netc.\n</code></pre>\n\n<p>Thank you for the help!</p>\n\n<p>Connor</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 7081, "user_id": 789671, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/feaaeb3d021966d84450cbfb24b1824a?s=128&d=identicon&r=PG", "display_name": "glibdud", "link": "https://stackoverflow.com/users/789671/glibdud"}, "edited": false, "score": 0, "creation_date": 1514411459, "post_id": 47999034, "comment_id": 82966582, "body": "Have you made any attempts that you can show (and describe how it failed)?"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1514411537, "post_id": 47999034, "comment_id": 82966606, "body": "What have you tried? As asked, this is basically a &quot;write my code for me&quot; question. There are decent solutions involving <code>Counter</code> and it&#39;s <code>most_common</code> method if you need a starting point; <code>operator.itemgetter</code> and <code>map</code> might be used to optimize (though a plain generator expression would work just fine)."}], "answers": [{"comments": [{"owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "edited": false, "score": 0, "creation_date": 1514412849, "post_id": 47999089, "comment_id": 82966960, "body": "arbitrary number - from the numbers with the highest occurrence for that index? Is it possible to get a list of those numbers?"}, {"owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "reply_to_user": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "edited": false, "score": 0, "creation_date": 1514412933, "post_id": 47999089, "comment_id": 82966989, "body": "@CIsForCookies yes to both"}], "tags": [], "owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "is_accepted": false, "score": 3, "last_activity_date": 1514411680, "creation_date": 1514411680, "answer_id": 47999089, "question_id": 47999034, "link": "https://stackoverflow.com/questions/47999034/how-to-check-what-is-the-most-common-value-in-a-specific-index-in-list-of-lists/47999089#47999089", "title": "How to check what is the most common value in a specific index in list of lists", "body": "<p>Transpose your list, apply Counters.</p>\n\n<pre><code>&gt;&gt;&gt; from collections import Counter\n&gt;&gt;&gt; ls = [[1,2,3],[2,2,3],[1,1,3]]\n&gt;&gt;&gt; counts = [Counter(x) for x in zip(*ls)]\n&gt;&gt;&gt; [c.most_common(1)[0][0] for c in counts]\n[1, 2, 3]\n</code></pre>\n\n<p>This will pick an arbitrary number if two numbers share the highest occurence for the same index.</p>\n"}, {"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1514413793, "post_id": 47999300, "comment_id": 82967242, "body": "<code>max(x, key=x.count)</code> takes runtime quadratic in the length of <code>x</code>, due to unnecessarily rescanning <code>x</code> for each <code>count</code> call. A <code>Counter</code>-based solution takes usual-case linear time."}, {"owner": {"reputation": 2983, "user_id": 8629753, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RYMtk.jpg?s=128&g=1", "display_name": "adder", "link": "https://stackoverflow.com/users/8629753/adder"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1514429483, "post_id": 47999300, "comment_id": 82970576, "body": "I said, &quot;good to know&quot;. Moderators, please refrain from randomly deleting people&#39;s comments."}], "tags": [], "owner": {"reputation": 2983, "user_id": 8629753, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RYMtk.jpg?s=128&g=1", "display_name": "adder", "link": "https://stackoverflow.com/users/8629753/adder"}, "is_accepted": true, "score": 1, "last_activity_date": 1514413131, "creation_date": 1514413131, "answer_id": 47999300, "question_id": 47999034, "link": "https://stackoverflow.com/questions/47999034/how-to-check-what-is-the-most-common-value-in-a-specific-index-in-list-of-lists/47999300#47999300", "title": "How to check what is the most common value in a specific index in list of lists", "body": "<p>my (alternative solution) 2 cents:</p>\n\n<pre><code>&gt;&gt;&gt; ls = [[1, 2, 3], [2, 2, 3], [1, 1, 3]]\n&gt;&gt;&gt; l_mc = [max(x, key=x.count) for x in zip(*ls)]\n&gt;&gt;&gt; l_mc\n[1, 2, 3]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "is_accepted": false, "score": 0, "last_activity_date": 1514432719, "last_edit_date": 1514432719, "creation_date": 1514432251, "answer_id": 48001298, "question_id": 47999034, "link": "https://stackoverflow.com/questions/47999034/how-to-check-what-is-the-most-common-value-in-a-specific-index-in-list-of-lists/48001298#48001298", "title": "How to check what is the most common value in a specific index in list of lists", "body": "<p>Here is another way:</p>\n\n<pre><code>from collections import Counter\nfrom operator import itemgetter\n\nls = [[1, 2, 3], [2, 2, 3], [1, 1, 3]]\n\nprint([max(x.items(), key = itemgetter(1))[0] for x in map(Counter, zip(*ls))])\n# [1, 2, 3]\n</code></pre>\n"}], "owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 1, "accepted_answer_id": 47999300, "answer_count": 3, "score": -1, "last_activity_date": 1514432719, "creation_date": 1514411249, "last_edit_date": 1514412524, "question_id": 47999034, "link": "https://stackoverflow.com/questions/47999034/how-to-check-what-is-the-most-common-value-in-a-specific-index-in-list-of-lists", "title": "How to check what is the most common value in a specific index in list of lists", "body": "<p>I have a list of list of integers:</p>\n\n<pre><code>ls = [[1,2,3],[2,2,3],[1,1,3]]\n</code></pre>\n\n<p>and I want to end up with a list that has <code>len(ls[0])</code> elements, and each element is the element that appears most in that index. In this example the result would be <code>[1 (appears in first&amp;last), 2 (appears in first&amp;second), 3 (appears in all)]</code></p>\n\n<p>I tried using loops and was hoping for a built-in like <code>all</code> (most?)</p>\n\n<pre><code>ls = [[1,2,3],[2,2,3],[1,1,3]]\n\nls2=[]\n\nls2 =[item for sub in ls for item in sub]\n\nls2\nOut[40]: [1, 2, 3, 2, 2, 3, 1, 1, 3]\n\nls3=[]\n\nfor item in len(ls):...\n</code></pre>\n\n<p>What would be the way to do so?</p>\n"}, {"tags": ["python", "opencv", "image-processing", "video", "video-processing"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1514412945, "post_id": 47999030, "comment_id": 82966992, "body": "Rather than resizing every frame of every video once per each screenshot, wouldn&#39;t it make more sense to resize the screenshots once to match the size of the video?"}, {"owner": {"reputation": 375, "user_id": 3783527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d46183fb35c45badd0316e9cc39576a?s=128&d=identicon&r=PG&f=1", "display_name": "velbl&#250;d", "link": "https://stackoverflow.com/users/3783527/velbl%c3%bad"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1514413478, "post_id": 47999030, "comment_id": 82967146, "body": "@DanMa\u0161ek Maybe, I will try it. Screenshots have lower resolution than video frames so I thought that using the smaller resolution will make calculation of SSIM faster."}, {"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 2, "creation_date": 1514415619, "post_id": 47999030, "comment_id": 82967712, "body": "Why not using any perceptual-hash (img -&gt; 128 bits for example) and then using efficient kd-trees / ball-trees or similar for searching/lookup?"}, {"owner": {"reputation": 375, "user_id": 3783527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d46183fb35c45badd0316e9cc39576a?s=128&d=identicon&r=PG&f=1", "display_name": "velbl&#250;d", "link": "https://stackoverflow.com/users/3783527/velbl%c3%bad"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1514415790, "post_id": 47999030, "comment_id": 82967753, "body": "@DanMa\u0161ek I tested it using 10 screenshots in a list and resizing every frame was about 5x faster than resing screenshots to video resolution. (screenshot resolution - 224x450, video resolution - 720x1280)"}, {"owner": {"reputation": 375, "user_id": 3783527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d46183fb35c45badd0316e9cc39576a?s=128&d=identicon&r=PG&f=1", "display_name": "velbl&#250;d", "link": "https://stackoverflow.com/users/3783527/velbl%c3%bad"}, "reply_to_user": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1514416985, "post_id": 47999030, "comment_id": 82968058, "body": "@sascha Wow, I had no idea that these hashes exist and I really like the way it&#39;d work. I&#39;ll test it tommorov to see if it gives me good results. Is OpenCV&#39;s pHash suitable for this task?"}, {"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1514417144, "post_id": 47999030, "comment_id": 82968107, "body": "@velbl&#250;d No experience with it. I once implemented some higher-order-stats-based phash myself and it worked for my task. If somehow accuracy is all that matters, you can at least use those hashes as heuristic for a more accurate comparison (if your other approach works)."}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1514420028, "post_id": 47999030, "comment_id": 82968701, "body": "@velbl&#250;d OK, I didn&#39;t realize the screenshots were that much smaller. In that case it does make sense (and it seems the comparison is the more expensive step). If some of the screenshots are the same size, you could still cut some time by grouping them and doing one resize per size."}, {"owner": {"reputation": 14220, "user_id": 3547485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xGJWo.png?s=128&g=1", "display_name": "Kinght \u91d1", "link": "https://stackoverflow.com/users/3547485/kinght-%e9%87%91"}, "edited": false, "score": 0, "creation_date": 1514425955, "post_id": 47999030, "comment_id": 82969892, "body": "Example screenshots and videos screenshots are needed. As they are not same size, but almost the same scene,  features(like SIFT/SURF/ORB) extracting and matching may help."}], "answers": [{"tags": [], "owner": {"reputation": 375, "user_id": 3783527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d46183fb35c45badd0316e9cc39576a?s=128&d=identicon&r=PG&f=1", "display_name": "velbl&#250;d", "link": "https://stackoverflow.com/users/3783527/velbl%c3%bad"}, "is_accepted": true, "score": 0, "last_activity_date": 1514644751, "creation_date": 1514644751, "answer_id": 48034922, "question_id": 47999030, "link": "https://stackoverflow.com/questions/47999030/how-to-pair-screenshots-with-videos/48034922#48034922", "title": "How to pair screenshots with videos?", "body": "<p>Based on <a href=\"https://stackoverflow.com/users/2320035/sascha\">sascha</a>'s suggestion, I calculated dhashes (<a href=\"https://www.pyimagesearch.com/2017/11/27/image-hashing-opencv-python/\" rel=\"nofollow noreferrer\">source</a>) of all frames in videos and dhashes of all screenshosts, and compared them using Hamming distance (<a href=\"https://stackoverflow.com/questions/33663676/input-2-integers-and-get-binary-brgc-and-hamming-distance\">source</a>).</p>\n\n<pre><code>def dhash(image, hashSize=16): #hashSize=16 worked best for me\n    # resize the input image, adding a single column (width) so we\n    # can compute the horizontal gradient\n    resized = cv2.resize(image, (hashSize + 1, hashSize))\n\n    # compute the (relative) horizontal gradient between adjacent\n    # column pixels\n    diff = resized[:, 1:] &gt; resized[:, :-1]\n\n    # convert the difference image to a hash\n    return sum([2 ** i for (i, v) in enumerate(diff.flatten()) if v])\n\ndef hamming(a, b):\n        return bin(a^b).count('1')\n</code></pre>\n\n<p>This solution is fast and enough precise for my needs. The results would be most likely improved if I used <a href=\"https://docs.opencv.org/3.3.1/d4/d93/group__img__hash.html\" rel=\"nofollow noreferrer\">different hashing function</a> (e.g. OpenCV's pHash), but I couldn't find them in OpenCV python biding.</p>\n"}], "owner": {"reputation": 375, "user_id": 3783527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d46183fb35c45badd0316e9cc39576a?s=128&d=identicon&r=PG&f=1", "display_name": "velbl&#250;d", "link": "https://stackoverflow.com/users/3783527/velbl%c3%bad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "accepted_answer_id": 48034922, "answer_count": 1, "score": 1, "last_activity_date": 1528103772, "creation_date": 1514411225, "last_edit_date": 1528103772, "question_id": 47999030, "link": "https://stackoverflow.com/questions/47999030/how-to-pair-screenshots-with-videos", "title": "How to pair screenshots with videos?", "body": "<p>I have folder with short videos and folder with images. Most of the images are sceenshots from one of the videos, but they may not be exactly the same (different size, noise, loss of details because of compression, etc). My goal is to match every image with video it was taken from. So far, I use OpenCV library to load one video and calculate SSIM score between each video frame and each image. I store the highest SSIM score of every image. Then I'd take the image with highest SSIM score, associate it with the video and run the function again for second video.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>import cv2\nimport numpy as np\nfrom skimage.measure import compare_ssim\nimport sqlite3   \n\n#screenshots - list that contains dict(id=screenshot id, image=jpeg image data)\n#video_file - str - path to video file\ndef generate_matches(screenshots, video_file):\n    for screenshot in screenshots:\n            screenshot[\"cv_img\"] = cv2.imdecode(np.fromstring(screenshot[\"image\"], np.uint8), 0)\n            screenshot[\"best_match\"] = dict(score=0, frame=0)\n            screenshot.pop('image', None) #remove jpg data from RAM\n\n    vidcap = cv2.VideoCapture(video_file)\n    success,image = vidcap.read()\n    count = 1\n    while success:\n            image = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\n            for screenshot in screenshots:\n                    c_image = cv2.resize(image, screenshot[\"cv_img\"].shape[1::-1])\n                    score = compare_ssim(screenshot[\"cv_img\"], c_image, full=False)\n                    if score &gt; screenshot[\"best_match\"][\"score\"]:\n                            screenshot[\"best_match\"] = dict(score=score,frame=count)\n            count += 1\n            success,image = vidcap.read()\n\n            if count % 500 == 0:\n                    print(\"Frame {}\".format(count))\n\n    print(\"Last Frame {}\".format(count))\n    for screenshot in screenshots:\n            c.execute(\"INSERT INTO matches(screenshot_id, file, match, frame) VALUE (?,?,?,?)\",\n                      (screenshot[\"id\"], video_file, screenshot[\"best_match\"][\"score\"], screenshot[\"best_match\"][\"frame\"]))\n\ngenerate_matches(list_of_screenshots, \"video1.mp4\")\ngenerate_matches(list_of_screenshots, \"video2.mp4\")\n...\n</code></pre>\n\n<p>This algorithm seems to be good-enough to associate videos with images, but it is quite slow, even if I'd use more threads. Is there any way to make it faster? Maybe different algorithm or some pre-processing of videos and images? I'll be glad for any ideas!</p>\n"}, {"tags": ["python", "python-3.x", "python-2.7", "midi", "python-packaging"], "comments": [{"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 0, "creation_date": 1514411409, "post_id": 47999028, "comment_id": 82966560, "body": "Do you happen to have a file called <code>midi.py</code> by any chance?"}, {"owner": {"reputation": 89, "user_id": 9145046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HFXtK.jpg?s=128&g=1", "display_name": "Juan", "link": "https://stackoverflow.com/users/9145046/juan"}, "reply_to_user": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 0, "creation_date": 1514412823, "post_id": 47999028, "comment_id": 82966956, "body": "No unfortunately. I have no file named midi.py where I run this code. But I will check in other files if needed."}], "answers": [{"tags": [], "owner": {"reputation": 89, "user_id": 9145046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HFXtK.jpg?s=128&g=1", "display_name": "Juan", "link": "https://stackoverflow.com/users/9145046/juan"}, "is_accepted": true, "score": 0, "last_activity_date": 1514456592, "last_edit_date": 1514456592, "creation_date": 1514449794, "answer_id": 48004143, "question_id": 47999028, "link": "https://stackoverflow.com/questions/47999028/python-midi-has-no-attribute-pattern/48004143#48004143", "title": "Python-midi has no attribute Pattern", "body": "<p>I found the solution. I use this command \"<strong>pip freeze</strong>\" to know wihch packages I downloaded. Then I uninstall all packages concerning midi. And finally I downloaded the package with this command \"<strong>sudo -H pip install python-midi</strong>\". And I have no issues when I run my code anymore. \nWe can also do if we use python3: </p>\n\n<ul>\n<li>sudo -H pip3 install git+<a href=\"https://github.com/vishnubob/python-midi@feature/python3\" rel=\"nofollow noreferrer\">https://github.com/vishnubob/python-midi@feature/python3</a></li>\n</ul>\n"}], "owner": {"reputation": 89, "user_id": 9145046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HFXtK.jpg?s=128&g=1", "display_name": "Juan", "link": "https://stackoverflow.com/users/9145046/juan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 460, "favorite_count": 1, "accepted_answer_id": 48004143, "answer_count": 1, "score": -2, "last_activity_date": 1514585912, "creation_date": 1514411206, "last_edit_date": 1514585912, "question_id": 47999028, "link": "https://stackoverflow.com/questions/47999028/python-midi-has-no-attribute-pattern", "title": "Python-midi has no attribute Pattern", "body": "<p>I want to use the <code>python-midi</code> package (from <code>https://github.com/vishnubob/python-midi</code>).\nHwever there is an error when I use it.</p>\n\n<pre><code>import midi\npattern = midi.Pattern()\n</code></pre>\n\n<p>When I run it, I have the following error: </p>\n\n<pre><code>pattern = midi.Pattern()\nAttributeError: 'module' object has no attribute 'Pattern'\n</code></pre>\n\n<p>I tried to install this package with:</p>\n\n<ul>\n<li><code>pip install git+https://github.com/vishnubob/python-midi@feature/python3</code></li>\n<li><code>pip install python-midi</code></li>\n<li><code>python setup.py install</code> (in downloading the projet)</li>\n</ul>\n\n<p>Thank you in advance for your help.  </p>\n"}, {"tags": ["python", "python-3.x", "integration", "nested-function", "simpsons-rule"], "comments": [{"owner": {"reputation": 2152, "user_id": 1306026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d117a6182330066d4771187f93e7e98e?s=128&d=identicon&r=PG", "display_name": "Joshua R.", "link": "https://stackoverflow.com/users/1306026/joshua-r"}, "edited": false, "score": 1, "creation_date": 1514411966, "post_id": 47999002, "comment_id": 82966729, "body": "Rather than to nest UppLimCheck in LowLimCheck, a better alternative might be to call them in serial... like <code>a = LowLimCheck()</code> then b = UppLimCheck(a).  Then you have a more readable structure, less variable scope to keep track of, and you avoid this problem altogether."}], "answers": [{"comments": [{"owner": {"reputation": 321, "user_id": 3613025, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b6a12a290935b44e58de0bbd3aa2519b?s=128&d=identicon&r=PG&f=1", "display_name": "user3613025", "link": "https://stackoverflow.com/users/3613025/user3613025"}, "edited": false, "score": 0, "creation_date": 1514477611, "post_id": 47999076, "comment_id": 82989942, "body": "Is the UppLimCheck() in this case defined outside LowLimCheck()?When I use  <code>a, b = LowLimCheck()</code>  do I then do  <code>print(simpsonsRule(lambda x:np.sin(x), a, b, 20)</code> ?  This might be a bad question but sorry I&#39;m still new to this."}, {"owner": {"reputation": 2152, "user_id": 1306026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d117a6182330066d4771187f93e7e98e?s=128&d=identicon&r=PG", "display_name": "Joshua R.", "link": "https://stackoverflow.com/users/1306026/joshua-r"}, "reply_to_user": {"reputation": 321, "user_id": 3613025, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b6a12a290935b44e58de0bbd3aa2519b?s=128&d=identicon&r=PG&f=1", "display_name": "user3613025", "link": "https://stackoverflow.com/users/3613025/user3613025"}, "edited": false, "score": 0, "creation_date": 1514491502, "post_id": 47999076, "comment_id": 82996158, "body": "No problem, @user3613025.  See the update in the answer above."}, {"owner": {"reputation": 321, "user_id": 3613025, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b6a12a290935b44e58de0bbd3aa2519b?s=128&d=identicon&r=PG&f=1", "display_name": "user3613025", "link": "https://stackoverflow.com/users/3613025/user3613025"}, "edited": false, "score": 0, "creation_date": 1517155201, "post_id": 47999076, "comment_id": 83969434, "body": "Last question, I need to let users to enter the limit of integration of their choice. How can I allow my program such that if they type &quot;pi/2&quot; or &quot;pi/6&quot; or just any fraction of pi, so that it can recognise and translate into numpy&#39;s value of &quot;pi/2&quot; or &quot;pi/2&quot;?"}, {"owner": {"reputation": 2152, "user_id": 1306026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d117a6182330066d4771187f93e7e98e?s=128&d=identicon&r=PG", "display_name": "Joshua R.", "link": "https://stackoverflow.com/users/1306026/joshua-r"}, "reply_to_user": {"reputation": 321, "user_id": 3613025, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b6a12a290935b44e58de0bbd3aa2519b?s=128&d=identicon&r=PG&f=1", "display_name": "user3613025", "link": "https://stackoverflow.com/users/3613025/user3613025"}, "edited": false, "score": 0, "creation_date": 1517162468, "post_id": 47999076, "comment_id": 83972044, "body": "Hi @user3613025, this is a bit unrelated question and quite a large topic of its own.  You might look for posts on Python math parsers.  One &quot;quick and dirty&quot; approach would be to use Python&#39;s <code>eval</code> function.  1) <code>import numpy as np</code> 2) <code>pi= np.pi</code> and 3), do something like <code>userVal= eval(&#39;userText&#39;)</code>.  The Python <code>eval</code> function executes the given string as code and returns the result.  So <code>eval(&#39;pi&#47;2&#39;)</code>, in this case, returns ~1.57.  You <i>are</i> letting your users execute arbitrary code.  It may be wrong, so <i>try/except</i> to handle syntax errors; it may be malicious- so watch out for hackers!"}, {"owner": {"reputation": 2152, "user_id": 1306026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d117a6182330066d4771187f93e7e98e?s=128&d=identicon&r=PG", "display_name": "Joshua R.", "link": "https://stackoverflow.com/users/1306026/joshua-r"}, "reply_to_user": {"reputation": 321, "user_id": 3613025, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b6a12a290935b44e58de0bbd3aa2519b?s=128&d=identicon&r=PG&f=1", "display_name": "user3613025", "link": "https://stackoverflow.com/users/3613025/user3613025"}, "edited": false, "score": 0, "creation_date": 1517192088, "post_id": 47999076, "comment_id": 83980186, "body": "BTW, you might accept this answer if it addressed your question.  Cheers!"}], "tags": [], "owner": {"reputation": 2152, "user_id": 1306026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d117a6182330066d4771187f93e7e98e?s=128&d=identicon&r=PG", "display_name": "Joshua R.", "link": "https://stackoverflow.com/users/1306026/joshua-r"}, "is_accepted": true, "score": 1, "last_activity_date": 1514491410, "last_edit_date": 1514491410, "creation_date": 1514411527, "answer_id": 47999076, "question_id": 47999002, "link": "https://stackoverflow.com/questions/47999002/accessing-the-variable-of-a-function-within-a-function/47999076#47999076", "title": "Accessing the variable of a function within a function", "body": "<p>You can return a tuple from LowLimCheck():</p>\n\n<pre><code>def LowLimCheck():\n    ...\n    b = UppLimCheck() \n    return (a,b)\n</code></pre>\n\n<p>then unpack them when calling LowLimCheck()</p>\n\n<pre><code>a, b = LowLimCheck()\n</code></pre>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>In the most direct answer to your question, <code>LowLimCheck()</code> becomes:</p>\n\n<pre><code>def LowLimCheck():\n    while True:\n       try:\n            a = float(input(\"Please enter the lower limit of the integral: \"))\n            break\n        except ValueError:\n            print(\"Invalid input. Please enter a number.\")\n    print(\"You have chosen the lower limit: \", a)      \n\n    def UppLimCheck():\n        b = -1\n        while b &lt;= a:\n            while True:\n                try:\n                    b = float(input(\"Please enter the upper limit of the integral: \"))\n                    break\n                except ValueError:\n                    print(\"Invalid input. Please enter a number.\")\n\n            if b &lt;= a:\n                print(\"The upper limit must be bigger than the lower limit!\")\n        print(\"You have chosen the upper limit: \", b) \n        return b     \n\n    b = UppLimCheck()   # Storing the b\n    return (a,b)        # Passing b out with a in a tuple\n</code></pre>\n\n<p>then call</p>\n\n<pre><code>a, b = LowLimCheck()\n</code></pre>\n\n<p>finally,</p>\n\n<pre><code>print(simpsonsRule(lambda x:np.sin(x), a, b, 20)\n</code></pre>\n\n<p><strong>ALTERNATIVE SOLUTION</strong> (more substantial changes, but better code structure - as described in the original comments; flatter, more readable, fewer scope considerations):</p>\n\n<pre><code>def LowLimCheck():\n    while True:\n        try:\n            a = float(input(\"Please enter the lower limit of the integral: \"))\n            break\n        except ValueError:\n            print(\"Invalid input. Please enter a number.\")\n    print(\"You have chosen the lower limit: \", a)      \n\n    return a\n\ndef UppLimCheck(a):\n    b = -1\n    while b &lt;= a:\n        while True:\n            try:\n                b = float(input(\"Please enter the upper limit of the integral: \"))\n                break\n            except ValueError:\n                print(\"Invalid input. Please enter a number.\")\n\n        if b &lt;= a:\n            print(\"The upper limit must be bigger than the lower limit!\")\n    print(\"You have chosen the upper limit: \", b) \n\n    return b  \n</code></pre>\n\n<p>then:</p>\n\n<pre><code>lowLim = LowLimCheck()\nupLim  = UppLimCheck(lowLim) # pass in lowLim as an argument\n\nprint(simpsonsRule(lambda x:np.sin(x), lowLim, upLim, 20)\n</code></pre>\n"}], "owner": {"reputation": 321, "user_id": 3613025, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b6a12a290935b44e58de0bbd3aa2519b?s=128&d=identicon&r=PG&f=1", "display_name": "user3613025", "link": "https://stackoverflow.com/users/3613025/user3613025"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 47999076, "answer_count": 1, "score": 0, "last_activity_date": 1514491410, "creation_date": 1514411044, "question_id": 47999002, "link": "https://stackoverflow.com/questions/47999002/accessing-the-variable-of-a-function-within-a-function", "title": "Accessing the variable of a function within a function", "body": "<p>So say I have the lower value and an upper value of an integral that's from the user input. I ask for the lower limit first then I check for its validity. Then in order to compare the value of my upper limit with my lower I made a nested function, so that I can also ask for user input of the upper limit, checks its validity and making sure that my upper limit is bigger than my lower(cuz u know integration), shown with the code below.</p>\n\n<pre><code>def LowLimCheck():\n    while True:\n        try:\n            a = float(input(\"Please enter the lower limit of the integral: \"))\n            break\n        except ValueError:\n            print(\"Invalid input. Please enter a number.\")\n    print(\"You have chosen the lower limit: \", a)      \n\n    def UppLimCheck():\n        b = -1\n        while b &lt;= a:\n            while True:\n                try:\n                    b = float(input(\"Please enter the upper limit of the integral: \"))\n                    break\n                except ValueError:\n                    print(\"Invalid input. Please enter a number.\")\n\n            if b &lt;= a:\n                print(\"The upper limit must be bigger than the lower limit!\")\n        print(\"You have chosen the upper limit: \", b) \n        return b           \n    UppLimCheck()  \n    return a\n</code></pre>\n\n<p>Now this is all well and fine until I actually need to use the values a and b because I need to put those values into an integral that I've set up. It's basically a general integral made by the Simpson's rule, that is trivial to get into right now. So I defined the function as:</p>\n\n<pre><code>def simpsonsRule(func, a, b, N):\n\n    &lt;insert code here&gt;\n    &lt;insert code here&gt;\n\n    return d\n</code></pre>\n\n<p>OK so my function basically lets user insert any arbitrary function, the upper limit(a), the lower limit(b) and N(number of strips in Simpson's rule) and it spits out d which is the evaluation of the integral of the arbitrary function above by Simpson's Rule. My problem now is that when I'm trying to print the answer, I can take the variable a out and put in into the integral but I can't take the variable b out because it's in a function! For example if I now print the integrated value(say in this case of sin(x) and N = 20)</p>\n\n<pre><code>print(simpsonsRule(lambda x:np.sin(x), a, b, 20)\n</code></pre>\n\n<p>So I know that a and b values are local within their own functions. Now for the value of a I could easily just do this to get the value a</p>\n\n<pre><code>k = 0 #initialising the variable\nk = LowLimCheck()\nprint(simpsonsRule(lambda x:np.sin(x), k, b, 20)\n</code></pre>\n\n<p>Because since k invokes LowLimCheck() which returns the value for a which I can put into my function. But how can I get my value of b which is nested within the first function? I want to use b basically. Is there a way round this?</p>\n\n<p>Apologies for the lengthy question and thanks in advance!</p>\n"}, {"tags": ["python", "xml"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 1457821, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/eefae3533d709888d3bb98de1f50e3ce?s=128&d=identicon&r=PG", "display_name": "user1457821", "link": "https://stackoverflow.com/users/1457821/user1457821"}, "edited": false, "score": 0, "creation_date": 1514412063, "post_id": 47999021, "comment_id": 82966752, "body": "Thanks but ... Getting error Traceback (most recent call last):   File &quot;extractMetadata.py&quot;, line 70, in &lt;module&gt;     writeData(csv_writer, item)   File &quot;extractMetadata.py&quot;, line 11, in writeData     csvWriter.writerow([ NameError: name &#39;csvWriter&#39; is not defined"}, {"owner": {"reputation": 1625, "user_id": 9129289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f8fea2e820b5fd246a78be208350b6c?s=128&d=identicon&r=PG&f=1", "display_name": "Glenn D.J.", "link": "https://stackoverflow.com/users/9129289/glenn-d-j"}, "reply_to_user": {"reputation": 33, "user_id": 1457821, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/eefae3533d709888d3bb98de1f50e3ce?s=128&d=identicon&r=PG", "display_name": "user1457821", "link": "https://stackoverflow.com/users/1457821/user1457821"}, "edited": false, "score": 0, "creation_date": 1514412196, "post_id": 47999021, "comment_id": 82966787, "body": "Woops my bad, I renamed <code>csvWriter</code> to <code>csv_writer</code> last minute and apparently forgot a variable. I edited my answer."}, {"owner": {"reputation": 33, "user_id": 1457821, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/eefae3533d709888d3bb98de1f50e3ce?s=128&d=identicon&r=PG", "display_name": "user1457821", "link": "https://stackoverflow.com/users/1457821/user1457821"}, "edited": false, "score": 0, "creation_date": 1514412573, "post_id": 47999021, "comment_id": 82966885, "body": "Thanks one more modification I did... actually we don&#39;t need second loop &quot;for item in root:&quot; its duplicating the data. Do you know to make header row only once?"}, {"owner": {"reputation": 1625, "user_id": 9129289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f8fea2e820b5fd246a78be208350b6c?s=128&d=identicon&r=PG&f=1", "display_name": "Glenn D.J.", "link": "https://stackoverflow.com/users/9129289/glenn-d-j"}, "reply_to_user": {"reputation": 33, "user_id": 1457821, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/eefae3533d709888d3bb98de1f50e3ce?s=128&d=identicon&r=PG", "display_name": "user1457821", "link": "https://stackoverflow.com/users/1457821/user1457821"}, "edited": false, "score": 0, "creation_date": 1514412798, "post_id": 47999021, "comment_id": 82966947, "body": "Great to hear! As for your remark on the second loop, it just depends on what your XML file looks like. Since there was no example of that in your question, I didn&#39;t touch that part of the code."}, {"owner": {"reputation": 33, "user_id": 1457821, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/eefae3533d709888d3bb98de1f50e3ce?s=128&d=identicon&r=PG", "display_name": "user1457821", "link": "https://stackoverflow.com/users/1457821/user1457821"}, "edited": false, "score": 0, "creation_date": 1514414762, "post_id": 47999021, "comment_id": 82967484, "body": "Doesn&#39;t allow me for some reason."}], "tags": [], "owner": {"reputation": 1625, "user_id": 9129289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f8fea2e820b5fd246a78be208350b6c?s=128&d=identicon&r=PG&f=1", "display_name": "Glenn D.J.", "link": "https://stackoverflow.com/users/9129289/glenn-d-j"}, "is_accepted": false, "score": 0, "last_activity_date": 1514414174, "last_edit_date": 1514414174, "creation_date": 1514411173, "answer_id": 47999021, "question_id": 47998961, "link": "https://stackoverflow.com/questions/47998961/looping-through-variable-using-os-path-join/47999021#47999021", "title": "looping through variable using os.path.join", "body": "<p>The reason you only see the data of the last xml file, is that you keep overwriting the data in the final .csv file. Instead of reopening the .csv file for every write iteration, try opening it just once, and passing it to your <code>writeData</code> function like this:</p>\n\n<pre><code>def writeData(csv_writer, item):\n    csv_writer.writerow([\n        'type',\n        'object',\n        'title',\n        'subject',\n        'domain',\n        'name',\n        '_name',\n        'version_label',\n        'creator_name',\n        'creation_date',\n        'modifier',\n        'modify_date',\n        'content_type',\n        'chronicle_id',\n        'antecedent_id',\n        'activity_date',\n        'search_from_date',\n        'number',\n        'service_code',\n        'initial_inspection_date',\n        'search_to_date',\n        'File Name',\n        'Location',\n        ])\n    csv_writer.writerow([\n        root[0][0].text,\n        root[0][1].text,\n        root[0][2].text,\n        root[0][3].text,\n        root[0][4].text,\n        root[0][5].text,\n        root[0][6].text,\n        root[0][7].text,\n        root[0][8].text,\n        root[0][9].text,\n        root[0][10].text,\n        root[0][11].text,\n        root[0][12].text,\n        root[0][13].text,\n        root[0][14].text,\n        root[0][15].text,\n        root[0][16].text,\n        root[0][17].text,\n        root[0][18].text,\n        root[0][19].text,\n        root[0][20].text,\n        root[2].text,\n        root[1].text,\n        ])\n\nwith open('D:\\\\metadata.csv', 'w', newline='') as csv_file:\n\n    csv_writer = csv.writer(csv_file, delimiter='|', lineterminator='\\n')\n    for file in os.listdir('D:\\\\temp\\\\Export\\\\test'):\n        if file.endswith('.xml'):\n            path = os.path.join('D:\\\\temp\\\\Export\\\\test', file)\n            tree = ElementTree.parse(path)\n            root = tree.getroot()\n            writeData(csv_writer, root)\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 1457821, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/eefae3533d709888d3bb98de1f50e3ce?s=128&d=identicon&r=PG", "display_name": "user1457821", "link": "https://stackoverflow.com/users/1457821/user1457821"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 476, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1514414174, "creation_date": 1514410769, "question_id": 47998961, "link": "https://stackoverflow.com/questions/47998961/looping-through-variable-using-os-path-join", "title": "looping through variable using os.path.join", "body": "<p>I am trying to process XML files one-by-one in the directory. Basically reading the values and then populate CSV file. I am having trouble parsing each XML one by one. Issue with my code is csvWriter.writerow only write the values from the last XML file in the directory. Even I have a loop for all items in root of ElementTree.parse(path). I want it to write each line for each XML file in the directory.</p>\n\n<pre><code>from lxml import etree as ElementTree\nimport csv\nimport os\nimport errno\nimport shutil\n\n\ndef writeData(item):\n    csvFile = open('D:\\\\metadata.csv', 'w', newline='')\n    csvWriter = csv.writer(csvFile, delimiter='|',\n                           lineterminator='\\n')\n    csvWriter.writerow([\n        'type',\n        'object',\n        'title',\n        'subject',\n        'domain',\n        'name',\n        '_name',\n        'version_label',\n        'creator_name',\n        'creation_date',\n        'modifier',\n        'modify_date',\n        'content_type',\n        'chronicle_id',\n        'antecedent_id',\n        'activity_date',\n        'search_from_date',\n        'number',\n        'service_code',\n        'initial_inspection_date',\n        'search_to_date',\n        'File Name',\n        'Location',\n        ])\n    csvWriter.writerow([\n        root[0][0].text,\n        root[0][1].text,\n        root[0][2].text,\n        root[0][3].text,\n        root[0][4].text,\n        root[0][5].text,\n        root[0][6].text,\n        root[0][7].text,\n        root[0][8].text,\n        root[0][9].text,\n        root[0][10].text,\n        root[0][11].text,\n        root[0][12].text,\n        root[0][13].text,\n        root[0][14].text,\n        root[0][15].text,\n        root[0][16].text,\n        root[0][17].text,\n        root[0][18].text,\n        root[0][19].text,\n        root[0][20].text,\n        root[2].text,\n        root[1].text,\n        ])\n    csvFile.close()\n\n\n\nfor file in os.listdir('D:\\\\temp\\\\Export\\\\test'):\n    if file.endswith('.xml'):\n        path = os.path.join('D:\\\\temp\\\\Export\\\\test', file)\n        tree = ElementTree.parse(path)\n        #print(tree)\n        root = tree.getroot()\n        #print(root)\n        for item in root:\n            print(item)\n            writeData(item)\n</code></pre>\n"}, {"tags": ["python", "amazon-web-services"], "answers": [{"tags": [], "owner": {"reputation": 5464, "user_id": 4779904, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XYIDr.jpg?s=128&g=1", "display_name": "Dunedan", "link": "https://stackoverflow.com/users/4779904/dunedan"}, "is_accepted": false, "score": 0, "last_activity_date": 1514440713, "creation_date": 1514440713, "answer_id": 48002303, "question_id": 47998944, "link": "https://stackoverflow.com/questions/47998944/dynamodb-update-item-overwriting-items/48002303#48002303", "title": "DynamoDB update_item overwriting items", "body": "<p>First of all you need to ensure that all the attributes you want to add are either <a href=\"https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/HowItWorks.NamingRulesDataTypes.html#HowItWorks.DataTypes\" rel=\"nofollow noreferrer\">lists or sets</a>.</p>\n\n<p>If you use a list you need to use the <code>list_append</code> function in the update expression, as stated in the <a href=\"https://boto3.readthedocs.io/en/latest/reference/services/dynamodb.html#DynamoDB.Client.update_item\" rel=\"nofollow noreferrer\">boto3 documentation</a>. Otherwise you'd just overwrite the pre-existing value as you do right now:</p>\n\n<blockquote>\n  <p><code>SET</code> - Adds one or more attributes and values to an item. If any of these attribute already exist, they are replaced by the new values. You can also use <code>SET</code> to add or subtract from an attribute that is of type Number. For example: <code>SET myNum = myNum + :val</code> <code>SET</code> supports the following functions:</p>\n  \n  <ul>\n  <li><code>if_not_exists (path, operand)</code> - if the item does not contain an attribute at the specified path, then <code>if_not_exists</code> evaluates to operand; otherwise, it evaluates to path. You can use this function to avoid overwriting an attribute that may already be present in the item.</li>\n  <li><code>list_append (operand, operand)</code> - evaluates to a list with a new element added to it. You can append the new element to the start or the end of the list by reversing the order of the operands.</li>\n  </ul>\n</blockquote>\n\n<p>If you use a set you don't need the <code>list_append</code> function, but have to use the <code>ADD</code> action instead of the <code>SET</code> action:</p>\n\n<blockquote>\n  <p><code>ADD</code> - Adds the specified value to the item, if the attribute does not already exist. If the attribute does exist, then the behavior of <code>ADD</code> depends on the data type of the attribute:</p>\n  \n  <ul>\n  <li>If the existing data type is a set and if <code>Value</code> is also a set, then <code>Value</code> is added to the existing set.</li>\n  <li>If the existing data type is a set and if <code>Value</code> is also a set, then <code>Value</code> is added to the existing set. For example, if the attribute value is the set <code>[1,2]</code> , and the ADD action specified <code>[3]</code> , then the final attribute value is <code>[1,2,3]</code> . An error occurs if an <code>ADD</code> action is specified for a set attribute and the attribute type specified does not match the existing set type. Both sets must have the same primitive data type. For example, if the existing data type is a set of strings, the <code>Value</code> must also be a set of strings.</li>\n  </ul>\n</blockquote>\n"}], "owner": {"reputation": 109, "user_id": 8131036, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10212019697160125/picture?type=large", "display_name": "Craig A Gomez", "link": "https://stackoverflow.com/users/8131036/craig-a-gomez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1159, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1514440713, "creation_date": 1514410664, "question_id": 47998944, "link": "https://stackoverflow.com/questions/47998944/dynamodb-update-item-overwriting-items", "title": "DynamoDB update_item overwriting items", "body": "<p>Update Item is overwriting my item instead of adding a new one to the list. \nFollowing the directions <a href=\"http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/GettingStarted.Python.03.html#GettingStarted.Python.03.03\" rel=\"nofollow noreferrer\">here</a>, I should get a updated list.</p>\n\n<p>My Code:</p>\n\n<pre><code>dynamodb = boto3.resource('dynamodb', region_name='us-west-2', endpoint_url=\"http://localhost:8000\")\n\ntable = dynamodb.Table('WishListTest')\n\ndevice = input('What is the Item being requested?\\n')\ndevice = device.upper()\n\naliasInput = input('What is the Alias of the user?\\n')\naliasInput = aliasInput.upper()\n\ndate = int((time.strftime(\"%d%m%Y\")))\nresponse = table.update_item(\n    Key={\n        'Device': device,\n    },\n    UpdateExpression=\"set RequestList.Alias = :r, RequestList.Createddate = :d, AvailableQuanity = :a, \"\n                 \"ReserveQuanity = :q\",\n    ExpressionAttributeValues={\n        ':r': aliasInput,\n        ':d': date,\n        ':a': 0,\n        ':q': 0\n    }\n)\nprint(\"PutItem succeeded:\")\nprint(json.dumps(response, indent=4, cls=DecimalEncoder))\n</code></pre>\n\n<p>My output looks like this:</p>\n\n<pre><code>{\"ReserveQuanity\": 0, \"AvailableQuanity\": 0, \"Device\": \"DELL\", \"RequestList\": {\"CreatedDate\": 19122017, \"Alias\": \"JONJP\", \"Createddate\": 27122017}}\n</code></pre>\n\n<p>It overwrites it so long as I maintain the same Device name. Which it is supposed to just add another <code>Alias</code>, <code>Createddate</code>, <code>ReserveQuanity</code>, and <code>AvailableQuanity</code> to the end. </p>\n"}, {"tags": ["python", "list", "return-type"], "answers": [{"tags": [], "owner": {"reputation": 953, "user_id": 8272888, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bRUzh.jpg?s=128&g=1", "display_name": "sam-pyt", "link": "https://stackoverflow.com/users/8272888/sam-pyt"}, "is_accepted": false, "score": 1, "last_activity_date": 1514410875, "creation_date": 1514410875, "answer_id": 47998976, "question_id": 47998941, "link": "https://stackoverflow.com/questions/47998941/is-the-python-map-function-a-value-returning-function/47998976#47998976", "title": "Is the Python map function a value-returning function?", "body": "<p><code>map</code> returns a new list, and does not change the one you enter into the function. So, the usage is:</p>\n\n<pre><code>def foo(x): #sample function\n    return x * 2\n\nbar = [1, 2, 3, 4, 5]\nnewBar = map(foo, bar)\n</code></pre>\n\n<p>In the interpreter:</p>\n\n<pre><code>&gt;&gt;&gt; print bar\n[1, 2, 3, 4, 5]\n&gt;&gt;&gt; print newBar\n[2, 4, 6, 8, 10]\n</code></pre>\n\n<p><em>Note: This is python 2.x</em></p>\n"}, {"tags": [], "owner": {"reputation": 7081, "user_id": 789671, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/feaaeb3d021966d84450cbfb24b1824a?s=128&d=identicon&r=PG", "display_name": "glibdud", "link": "https://stackoverflow.com/users/789671/glibdud"}, "is_accepted": true, "score": 6, "last_activity_date": 1514410906, "creation_date": 1514410906, "answer_id": 47998980, "question_id": 47998941, "link": "https://stackoverflow.com/questions/47998941/is-the-python-map-function-a-value-returning-function/47998980#47998980", "title": "Is the Python map function a value-returning function?", "body": "<p>In Python 2, <a href=\"https://docs.python.org/2/library/functions.html#map\" rel=\"noreferrer\"><code>map()</code></a> returns a list of return values of <code>foo(...)</code>. If you don't care about the results and just want to run the elements of <code>bar</code> through <code>foo</code>, either of your examples will work.</p>\n\n<p>In Python 3, <a href=\"https://docs.python.org/3/library/functions.html#map\" rel=\"noreferrer\"><code>map()</code></a> returns an iterator that is evaluated lazily. Neither of your examples will actually run any elements of <code>bar</code> through <code>foo</code> <em>yet</em>. You will need to iterate over that iterator. The simplest way would be to convert it to a list:</p>\n\n<pre><code>list(map(foo, bar))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "is_accepted": false, "score": 1, "last_activity_date": 1514411692, "last_edit_date": 1514411692, "creation_date": 1514411016, "answer_id": 47998997, "question_id": 47998941, "link": "https://stackoverflow.com/questions/47998941/is-the-python-map-function-a-value-returning-function/47998997#47998997", "title": "Is the Python map function a value-returning function?", "body": "<p>In Python 2 <code>map()</code> returns a new list. In Python 3 it returns an iterator. You can convert it into a list with:</p>\n\n<pre><code>new_list = list(map(foo, bar))\n</code></pre>\n\n<p>As the name suggests, a common use of an iterator is to iterate over it:</p>\n\n<pre><code>for x in map(foo, bar):\n    # do something with x\n</code></pre>\n\n<p>This produces one value at a time without putting all values in memory as creating a list would.</p>\n\n<p>Furthermore, you can do single steps through an iterator:</p>\n\n<pre><code>my_iter = map(foo, bar)\nfirst_value = next(my_iter)\nsecond_value = next(my_iter)\n</code></pre>\n\n<p>Now work with the rest:</p>\n\n<pre><code>for x in map(foo, bar):\n    # x starts from the third value\n</code></pre>\n\n<p>This is very common in Python 3. <code>zip</code> and <code>enumerate</code> also return iterators. Often this is called lazy evaluation, because values are only produce when really need.</p>\n"}], "owner": {"reputation": 337, "user_id": 7347169, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-44dJ2yAupF0/AAAAAAAAAAI/AAAAAAAAAB8/yIL2R8MZIko/photo.jpg?sz=128", "display_name": "Sam Carpenter", "link": "https://stackoverflow.com/users/7347169/sam-carpenter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1255, "favorite_count": 0, "accepted_answer_id": 47998980, "answer_count": 3, "score": 0, "last_activity_date": 1514411692, "creation_date": 1514410659, "last_edit_date": 1514411614, "question_id": 47998941, "link": "https://stackoverflow.com/questions/47998941/is-the-python-map-function-a-value-returning-function", "title": "Is the Python map function a value-returning function?", "body": "<p>I've been trying to work with the <code>map</code> function in Python, and I've been having a little bit of trouble with it. I can't tell which of these is the proper way to map function foo to the list bar:</p>\n\n<pre><code>map(foo, bar)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>newBar = map(foo, bar)\n</code></pre>\n\n<p>I'm getting varied results from different websites. Which of these is the correct usage?</p>\n"}, {"tags": ["python", "arrays", "sympy", "differentiation"], "comments": [{"owner": {"reputation": 50452, "user_id": 33258, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4b21ea020b4d95c4abacaffc9daaf4e?s=128&d=identicon&r=PG", "display_name": "Hugh Bothwell", "link": "https://stackoverflow.com/users/33258/hugh-bothwell"}, "edited": false, "score": 1, "creation_date": 1514411016, "post_id": 47998930, "comment_id": 82966423, "body": "Having a function <code>z</code> and a variable <code>z</code> will not work. Rename one of them."}, {"owner": {"reputation": 123, "user_id": 9139877, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/27e29ff1176b69d10c38e21a498e8597?s=128&d=identicon&r=PG&f=1", "display_name": "Push", "link": "https://stackoverflow.com/users/9139877/push"}, "reply_to_user": {"reputation": 50452, "user_id": 33258, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4b21ea020b4d95c4abacaffc9daaf4e?s=128&d=identicon&r=PG", "display_name": "Hugh Bothwell", "link": "https://stackoverflow.com/users/33258/hugh-bothwell"}, "edited": false, "score": 0, "creation_date": 1514411168, "post_id": 47998930, "comment_id": 82966474, "body": "@HughBothwell In the example that I wrote at the end, I didn&#39;t use that. But still not working."}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 9139877, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/27e29ff1176b69d10c38e21a498e8597?s=128&d=identicon&r=PG&f=1", "display_name": "Push", "link": "https://stackoverflow.com/users/9139877/push"}, "edited": false, "score": 0, "creation_date": 1514413003, "post_id": 47999207, "comment_id": 82967009, "body": "I got the answer of one of my questions! However, I have the list of functions as strings which is coming from somewhere else. For instance f = [&#39;m&#39;, &#39;n&#39;, &#39;z&#39;] rather than f = [m, n, z]. Rest of the things are exactly same as what you did. Now would you please tell me how I can modify it? @Stelios"}, {"owner": {"reputation": 123, "user_id": 9139877, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/27e29ff1176b69d10c38e21a498e8597?s=128&d=identicon&r=PG&f=1", "display_name": "Push", "link": "https://stackoverflow.com/users/9139877/push"}, "edited": false, "score": 0, "creation_date": 1514414687, "post_id": 47999207, "comment_id": 82967459, "body": "I guess eval would do that!!"}], "tags": [], "owner": {"reputation": 4503, "user_id": 6212875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63785a00c56fd72d4e9199a973920873?s=128&d=identicon&r=PG&f=1", "display_name": "Stelios", "link": "https://stackoverflow.com/users/6212875/stelios"}, "is_accepted": false, "score": 0, "last_activity_date": 1514412514, "creation_date": 1514412514, "answer_id": 47999207, "question_id": 47998930, "link": "https://stackoverflow.com/questions/47998930/differentiation-of-a-list-of-functions-with-respect-to-a-list-of-variables/47999207#47999207", "title": "Differentiation of a list of functions with respect to a list of variables", "body": "<p>Why not doing something as simple as the following?</p>\n\n<pre><code>import sympy as sp\n\nx, y = sp.symbols('x, y')\nm, n, z = x**2, y**2, x*y\nf = [m, n, z]\nv = [x, y]\n\nH = [[fun.diff(var) for var in v] for fun in f]\nprint(H)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/z21AR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/z21AR.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6655984"}, "is_accepted": false, "score": 1, "last_activity_date": 1514412838, "creation_date": 1514412838, "answer_id": 47999254, "question_id": 47998930, "link": "https://stackoverflow.com/questions/47998930/differentiation-of-a-list-of-functions-with-respect-to-a-list-of-variables/47999254#47999254", "title": "Differentiation of a list of functions with respect to a list of variables", "body": "<p>One thing to realize is that the strings we use when creating symbols have nothing to do with names of those symbols. You can have </p>\n\n<pre><code>a = Symbol('b')\n</code></pre>\n\n<p>and now <code>a</code> is a symbol whose string representation is 'b'. In your code, this symbol is referred to as <code>a</code>, not as <code>b</code>. In particular, creating <code>Funct = [Function('m'), Function('n')]</code> and then assigning <code>m = x**2</code> does nothing for the functions you created: there is no connection between <code>m</code> and <code>Function('m')</code>.</p>\n\n<p>Also, SymPy does not really differentiate <em>functions</em>, it differentiates <em>expressions</em> (functions in which something is plugged in). The following creates a double list of derivatives, given expressions and variables:</p>\n\n<pre><code>variables = symbols(\"x y z\")\nexpressions = [x**2, y**2, x*y]\nprint([[diff(e, v) for v in variables] for e in expressions])\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[[2*x, 0, 0], [0, 2*y, 0], [y, x, 0]] \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 75386, "user_id": 161801, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0383e4cae325f65a1bbd906be4be2276?s=128&d=identicon&r=PG", "display_name": "asmeurer", "link": "https://stackoverflow.com/users/161801/asmeurer"}, "is_accepted": false, "score": 3, "last_activity_date": 1514451316, "creation_date": 1514451316, "answer_id": 48004430, "question_id": 47998930, "link": "https://stackoverflow.com/questions/47998930/differentiation-of-a-list-of-functions-with-respect-to-a-list-of-variables/48004430#48004430", "title": "Differentiation of a list of functions with respect to a list of variables", "body": "<p>What you're looking for is called the Jacobian, and can be computed with SymPy like this:</p>\n\n<pre><code>&gt;&gt;&gt; x, y, z = symbols('x y z')\n&gt;&gt;&gt; Matrix([x**2, y**2, x*y]).jacobian([x, y, z])\nMatrix([\n[2*x,   0, 0],\n[  0, 2*y, 0],\n[  y,   x, 0]])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1757, "user_id": 5190654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5133752683ffad4b5e2bf9b4aafc95bf?s=128&d=identicon&r=PG&f=1", "display_name": "Francesco Bonazzi", "link": "https://stackoverflow.com/users/5190654/francesco-bonazzi"}, "is_accepted": false, "score": 0, "last_activity_date": 1514541372, "creation_date": 1514541372, "answer_id": 48020678, "question_id": 47998930, "link": "https://stackoverflow.com/questions/47998930/differentiation-of-a-list-of-functions-with-respect-to-a-list-of-variables/48020678#48020678", "title": "Differentiation of a list of functions with respect to a list of variables", "body": "<p>You can try <code>derive_by_array</code>:</p>\n\n<pre><code>In [3]: f = [i(x, y, z) for i in symbols(['m','n', 'z'], cls=Function)]\n\nIn [4]: f\nOut[4]: [m(x, y, z), n(x, y, z), z(x, y, z)]\n\nIn [5]: derive_by_array(f, [x, y, z])\nOut[5]: \n\u23a1\u2202               \u2202               \u2202             \u23a4\n\u23a2\u2500\u2500(m(x, y, z))  \u2500\u2500(n(x, y, z))  \u2500\u2500(z(x, y, z))\u23a5\n\u23a2\u2202x              \u2202x              \u2202x            \u23a5\n\u23a2                                              \u23a5\n\u23a2\u2202               \u2202               \u2202             \u23a5\n\u23a2\u2500\u2500(m(x, y, z))  \u2500\u2500(n(x, y, z))  \u2500\u2500(z(x, y, z))\u23a5\n\u23a2\u2202y              \u2202y              \u2202y            \u23a5\n\u23a2                                              \u23a5\n\u23a2\u2202               \u2202               \u2202             \u23a5\n\u23a2\u2500\u2500(m(x, y, z))  \u2500\u2500(n(x, y, z))  \u2500\u2500(z(x, y, z))\u23a5\n\u23a3\u2202z              \u2202z              \u2202z            \u23a6\n</code></pre>\n\n<p>The next version of SymPy will support an even more compact syntax:</p>\n\n<pre><code>diff(f, [[x, y, z]])\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 9139877, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/27e29ff1176b69d10c38e21a498e8597?s=128&d=identicon&r=PG&f=1", "display_name": "Push", "link": "https://stackoverflow.com/users/9139877/push"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 885, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1514541372, "creation_date": 1514410550, "last_edit_date": 1514411112, "question_id": 47998930, "link": "https://stackoverflow.com/questions/47998930/differentiation-of-a-list-of-functions-with-respect-to-a-list-of-variables", "title": "Differentiation of a list of functions with respect to a list of variables", "body": "<p>Suppose I have a list of functions</p>\n\n<pre><code>f = ['m','n', 'z']\n</code></pre>\n\n<p>and a list of variables</p>\n\n<pre><code>v = ['x', 'y', 'z'] \n</code></pre>\n\n<p>Now</p>\n\n<pre><code>m = x**2\nn = y**2\nz = x*y\n</code></pre>\n\n<p>Two important things here: </p>\n\n<ul>\n<li>They are lists, so \"string\" has to converted into \"symbols\" or \"Function\"</li>\n<li>'z' is a function and also a variable! So they are different and dz/dz is not unity. It depends on what function 'z' is. In this case dz/dx should be y and dz/dz should be 0. (Assume d is the partial derivative)</li>\n</ul>\n\n<p>Now I want to differentiate all the elements of the function list with respect to all the elements of the variable list and the output will be an multidimensional array. I am trying this without same variable and function name(here only printing one derivative, but ultimately I need a full array):</p>\n\n<pre><code>from sympy import *\n\nf = ['m', 'n']\nv = ['x', 'y']\n\nvariable = [var(i) for i in v]\nFunct = [Function(i) for i in f]\n\nm = x**2\nn = y**2\n\nprint(diff(Funct[0], variable[0]))\n</code></pre>\n\n<p>it is giving this error:</p>\n\n<pre><code>print(diff(Funct[0], variable[0]))\nFile \"/usr/local/lib/python2.7/site-packages/sympy/core/function.py\", line 1837, in diff\nreturn Derivative(f, *symbols, **kwargs)\nFile \"/usr/local/lib/python2.7/site-packages/sympy/core/function.py\", line 1136, in __new__\nif symbol_set.difference(expr.free_symbols):\nTypeError: 'property' object is not iterable\n</code></pre>\n"}, {"tags": ["python", "pandas", "histogram", "pandas-groupby", "frequency-distribution"], "answers": [{"comments": [{"owner": {"reputation": 1057, "user_id": 4421575, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eb985cc08f9dd9fb402a912017c29fcb?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas Aimaretto", "link": "https://stackoverflow.com/users/4421575/lucas-aimaretto"}, "edited": false, "score": 0, "creation_date": 1514411230, "post_id": 47998912, "comment_id": 82966497, "body": "Hi! Tried your suggestion but, when trying to print the resulting table, I get something like a series of lists: <code>[&lt;matplotlib.axes._subplots.AxesSubplot object at 0x7f1e87b67588&gt; &lt;matplotlib.axes._subplots.AxesSubplot object at 0x7f1e87be2da0&gt;]</code>.  Further, I tried plotting it (<code>ax1 = b.plot(.)</code>) and got: <code>AttributeError: &#39;numpy.ndarray&#39; object has no attribute &#39;plot&#39;</code>. How do I manage this result?"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 1057, "user_id": 4421575, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eb985cc08f9dd9fb402a912017c29fcb?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas Aimaretto", "link": "https://stackoverflow.com/users/4421575/lucas-aimaretto"}, "edited": false, "score": 0, "creation_date": 1514411578, "post_id": 47998912, "comment_id": 82966618, "body": "@LucasAimaretto the result is according to the link you shared, can you show your expected output?"}, {"owner": {"reputation": 1057, "user_id": 4421575, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eb985cc08f9dd9fb402a912017c29fcb?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas Aimaretto", "link": "https://stackoverflow.com/users/4421575/lucas-aimaretto"}, "edited": false, "score": 0, "creation_date": 1514412443, "post_id": 47998912, "comment_id": 82966850, "body": "Hi @Wen, I&#39;ve updated the question to show what I&#39;m expecting to get. It&#39;s basically obtaining the frequencies of occurrences of the grouped data. In Excel/Calc you can do that with a PivotTable or by using the <code>Frequency()</code> formula."}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 1057, "user_id": 4421575, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eb985cc08f9dd9fb402a912017c29fcb?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas Aimaretto", "link": "https://stackoverflow.com/users/4421575/lucas-aimaretto"}, "edited": false, "score": 1, "creation_date": 1514412509, "post_id": 47998912, "comment_id": 82966866, "body": "@LucasAimaretto that is value_counts"}, {"owner": {"reputation": 1057, "user_id": 4421575, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eb985cc08f9dd9fb402a912017c29fcb?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas Aimaretto", "link": "https://stackoverflow.com/users/4421575/lucas-aimaretto"}, "edited": false, "score": 0, "creation_date": 1514413150, "post_id": 47998912, "comment_id": 82967042, "body": "Nice! The only thing is that the resulting table&#39;s first column is not sorted. If you see my example, the first column goes from 1 to 12, ascending. The result of <i>my</i> <code>value_counts()</code> gives me a first column with this sequence: 1,4,9,11,12,3,2,5,6,8,10. Can I sort that somehow?"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 1057, "user_id": 4421575, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eb985cc08f9dd9fb402a912017c29fcb?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas Aimaretto", "link": "https://stackoverflow.com/users/4421575/lucas-aimaretto"}, "edited": false, "score": 1, "creation_date": 1514413335, "post_id": 47998912, "comment_id": 82967091, "body": "@LucasAimaretto adding sort=False  <code>a[(&#39;Router_name&#39;,&#39;sum&#39;)].value_counts(sort=False)</code>"}, {"owner": {"reputation": 1057, "user_id": 4421575, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eb985cc08f9dd9fb402a912017c29fcb?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas Aimaretto", "link": "https://stackoverflow.com/users/4421575/lucas-aimaretto"}, "edited": false, "score": 0, "creation_date": 1514413462, "post_id": 47998912, "comment_id": 82967138, "body": "Very nice! Thank you very much!"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 1057, "user_id": 4421575, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eb985cc08f9dd9fb402a912017c29fcb?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas Aimaretto", "link": "https://stackoverflow.com/users/4421575/lucas-aimaretto"}, "edited": false, "score": 0, "creation_date": 1514413483, "post_id": 47998912, "comment_id": 82967147, "body": "@LucasAimaretto yw~ Happy coding"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 1, "last_activity_date": 1514412500, "last_edit_date": 1514412500, "creation_date": 1514410443, "answer_id": 47998912, "question_id": 47998828, "link": "https://stackoverflow.com/questions/47998828/cant-obtain-histogram-from-pandas-grouped-data/47998912#47998912", "title": "Can&#39;t obtain histogram from pandas grouped data", "body": "<p>By seems like you create the multi index by using the <code>agg</code> </p>\n\n<pre><code>a.hist(by=a[('Router_name','count')])\n\na[('Router_name','count')].value_counts()\nOut[1678]: \n10    4\n8     3\n6     3\n5     3\n2     3\n3     2\n12    1\n11    1\n9     1\n4     1\n1     1\nName: (Router_name, sum), dtype: int64\n</code></pre>\n"}], "owner": {"reputation": 1057, "user_id": 4421575, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eb985cc08f9dd9fb402a912017c29fcb?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas Aimaretto", "link": "https://stackoverflow.com/users/4421575/lucas-aimaretto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 1, "accepted_answer_id": 47998912, "answer_count": 1, "score": 0, "last_activity_date": 1514465740, "creation_date": 1514409935, "last_edit_date": 1514465740, "question_id": 47998828, "link": "https://stackoverflow.com/questions/47998828/cant-obtain-histogram-from-pandas-grouped-data", "title": "Can&#39;t obtain histogram from pandas grouped data", "body": "<p>I have this DF.</p>\n\n<pre><code>f = { 'Router_name':['count'] }\na = a.groupby(['Week_end']).agg(f)\n</code></pre>\n\n<p>Which produces the following data ..</p>\n\n<pre><code>         Router_name\n               count\nWeek_end            \n29                 3\n30                10\n31                 6\n32                 4\n33                 9\n34                 2\n35                 5\n36                10\n37                 8\n38                 6\n40                10\n41                 2\n42                 8\n43                 1\n44                 3\n45                 2\n46                 8\n47                 6\n49                12\n50                 5\n51                10\n52                 5\n53                11\n</code></pre>\n\n<p>I'm trying to obtain an histogram/frequencies out of the previous aggregated data for <code>Router_name</code>. So, for example, the expected output should these frequencies:</p>\n\n<p><a href=\"https://i.stack.imgur.com/QWwdH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QWwdH.png\" alt=\"enter image description here\"></a></p>\n\n<p>I've read <a href=\"https://stackoverflow.com/questions/19584029/plotting-histograms-from-grouped-data-in-a-pandas-dataframe\">here</a> that doing <code>b = a.hist(by=a['Router_name'])</code> would do the trick. However, when trying that I get the following error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"get_report_v1.5_devel.py\", line 465, in &lt;module&gt;\n    b = a.hist(by=a['Router_name'])\n    raise ValueError(\"Grouper for '%s' not 1-dimensional\" % t)\nValueError: Grouper for '&lt;class 'pandas.core.frame.DataFrame'&gt;' not 1-dimensional\n</code></pre>\n\n<p>I also tried this: <code>a.Router_name.hist()</code>. But I get the same DataFrame.</p>\n\n<p>How can I obtain the frequencies for a given column out of a grouped data?</p>\n"}, {"tags": ["python", "linux"], "comments": [{"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1514410182, "post_id": 47998787, "comment_id": 82966121, "body": "@IsmailBadawi My current logic just has to manage a single timestamp, which is like because it&#39;s simple. Having to track separate timestamps for every involved file is extra complexity I do not necessarily need."}, {"owner": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "edited": false, "score": 1, "creation_date": 1514410267, "post_id": 47998787, "comment_id": 82966148, "body": "touch a file, use its timestamp?  That&#39;s basically how &#39;make&#39; works."}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "reply_to_user": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1514413283, "post_id": 47998787, "comment_id": 82967069, "body": "@MarkPlotnick Right now, neither."}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1514414913, "post_id": 47998787, "comment_id": 82967521, "body": "As a side note, checking the modification time of a file isn&#39;t sufficient to find out if it&#39;s been modified. Moving or renaming a file doesn&#39;t change its modification time, so if you delete the original file and then move/rename a different file to that location, it won&#39;t trigger your build script."}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "reply_to_user": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1514418850, "post_id": 47998787, "comment_id": 82968453, "body": "@Rawing I think you are misinterpreting what that part of the script does, this is about detecting old files replacing new ones, not the other way around. I mean, it&#39;s technically possible to manually replace an output file with a random file that was created after the script last ran, but that&#39;s a not a scenario that should be possible without really looking for trouble."}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1514420172, "post_id": 47998787, "comment_id": 82968739, "body": "If ext4, the lag in modification times may be related to this: <a href=\"https://stackoverflow.com/questions/14392975/timestamp-accuracy-on-ext4-sub-millsecond\" title=\"timestamp accuracy on ext4 sub millsecond\">stackoverflow.com/questions/14392975/&hellip;</a>"}], "owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1514409693, "creation_date": 1514409693, "question_id": 47998787, "link": "https://stackoverflow.com/questions/47998787/whats-the-right-way-to-get-the-current-time-in-python-in-a-way-that-will-be-gua", "title": "What&#39;s the right way to get the current time in python in a way that will be guaranteed to be consistent with the filesystem?", "body": "<p>I have a very simple build script that's behaving in an unexpected way (for me) on Linux.</p>\n\n<p>Part of the script simply checks that the files generated by a build stage hasn't been manually replaced with a stale file.</p>\n\n<pre><code># load the cache from a json file\nif os.path.getmtime(some_path) &lt; cache['timestamp']:\n  print(\"build must run because %s is stale\" % some_path)\n  run_build = true\n\n...\n\nif run_build:\n  cache['timestamp'] = time.time()\n  # use subprocess to run process that modifies some_path\n  # store updated cache to json file\n</code></pre>\n\n<p>Unfortunately, this naive logic isn't working on Linux (Ubuntu 16.04): the timestamp stored in the cache is often a few miliseconds ahead of the modification time on the generated files.</p>\n\n<p>I could probably just round down the cached timestamp, but that just feels like a nasty hack, and I wonder if there's better way to get consistent times here.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 422, "user_id": 2031001, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bd1a775335621cf1508b8b64da8ad8b9?s=128&d=identicon&r=PG", "display_name": "Alex S", "link": "https://stackoverflow.com/users/2031001/alex-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1514412525, "last_edit_date": 1514412525, "creation_date": 1514412195, "answer_id": 47999163, "question_id": 47998782, "link": "https://stackoverflow.com/questions/47998782/using-to-period-to-get-end-of-business-month-in-python/47999163#47999163", "title": "using .to_period() to get end of business month in python", "body": "<p>Can use <code>BMonthEnd</code> with <code>date_range</code></p>\n\n<pre><code>In [28]: pd.date_range('19920101', '19920630', freq=dt.BMonthEnd())\nOut[28]:\nDatetimeIndex(['1992-01-31', '1992-02-28', '1992-03-31', '1992-04-30',\n               '1992-05-29', '1992-06-30'],\n              dtype='datetime64[ns]', freq='BM', tz=None)\n</code></pre>\n"}], "owner": {"reputation": 341, "user_id": 7217040, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/198e39a483a01b2008fb6e584bea9ab8?s=128&d=identicon&r=PG&f=1", "display_name": "J Westwood", "link": "https://stackoverflow.com/users/7217040/j-westwood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1514412525, "creation_date": 1514409675, "question_id": 47998782, "link": "https://stackoverflow.com/questions/47998782/using-to-period-to-get-end-of-business-month-in-python", "title": "using .to_period() to get end of business month in python", "body": "<p>I say a post that allowed me to get month end in an dataframe index but it only provided Calendar month end and I wanted BUSINESS month end</p>\n\n<pre><code>df_mth_return.index = df_mth_return.index.to_period('M').to_timestamp('M')\ndf_mth_return\n</code></pre>\n\n<p>this is a snipit of my resulting data frame.  So you can see that 2/29/1992 should be 2/28/1992 and 5/31/1992 and 5/28/1992 and it continues on</p>\n\n<pre><code>            IBM US Equity   MMM US Equity\nDate    \n2/29/1992   -2.174845   0.878127\n3/31/1992   -3.884848   -2.470764\n4/30/1992   8.682919    5.634692\n5/31/1992   1.312976    2.867628\n6/30/1992   7.85108     1.435327\n</code></pre>\n\n<p>I tried to period ('BM' and it threw and error and other post suggested pd.offset but that did not work either.</p>\n\n<p>Can anyone suggest something.</p>\n"}, {"tags": ["python", "django", "jinja2", "gettext"], "answers": [{"tags": [], "owner": {"reputation": 18111, "user_id": 7414939, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ri4Jz.jpg?s=128&g=1", "display_name": "John Moutafis", "link": "https://stackoverflow.com/users/7414939/john-moutafis"}, "is_accepted": true, "score": 3, "last_activity_date": 1514978175, "last_edit_date": 1514978175, "creation_date": 1514717412, "answer_id": 48041836, "question_id": 47998764, "link": "https://stackoverflow.com/questions/47998764/pgettext-in-jinja2-django-templates/48041836#48041836", "title": "pgettext in jinja2 django templates", "body": "<p>I don't believe that what you want exists in Jinja... (at least for now)<br> \nIf you take a look at <a href=\"https://github.com/pallets/jinja/issues/328\" rel=\"nofollow noreferrer\">this issue</a> the developer pretty much states that he won't do it:</p>\n\n<blockquote>\n  <p>This would require patches as I'm not using pgettext myself.</p>\n</blockquote>\n\n<p>Then he closed the issue.<br>\nThis was created back in 2014 and something may have changed but I don't think so (based on <a href=\"https://github.com/pallets/jinja/issues/441\" rel=\"nofollow noreferrer\">another issue</a>).</p>\n\n<p>By searching a bit around I found this project which may help: <a href=\"https://pypi.python.org/pypi/jinja2-django-tags/0.1\" rel=\"nofollow noreferrer\">https://pypi.python.org/pypi/jinja2-django-tags/0.1</a>. There I read:</p>\n\n<blockquote>\n  <p>You can also use _, gettext and pgettext directly:</p>\n\n<pre><code>Simple example: {{ _('Hello World') }}\nMore verbose: {{ gettext('Hello World') }}\nWith context: {{ pgettext('Hello World', 'another example') }}\n</code></pre>\n</blockquote>\n\n<p>Good luck :)</p>\n"}], "owner": {"reputation": 2758, "user_id": 1627479, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3fb93ac753402c0c972b32a9c32adcc0?s=128&d=identicon&r=PG&f=1", "display_name": "Joren", "link": "https://stackoverflow.com/users/1627479/joren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 296, "favorite_count": 1, "accepted_answer_id": 48041836, "answer_count": 1, "score": 3, "last_activity_date": 1514978175, "creation_date": 1514409586, "last_edit_date": 1514717534, "question_id": 47998764, "link": "https://stackoverflow.com/questions/47998764/pgettext-in-jinja2-django-templates", "title": "pgettext in jinja2 django templates", "body": "<p>I have configured the Jinja environment with <code>env.install_gettext_translations(translation, newstyle=True)</code> and the <code>jinja2.ext.i18n</code> extension.\nI can only use the <code>_()</code>, <code>_gettext()</code> and <code>ngettext()</code> functions in my jinja2 templates.</p>\n\n<p>I want to use <code>pgettext()</code> (<a href=\"https://docs.djangoproject.com/en/2.0/topics/i18n/translation/#contextual-markers\" rel=\"nofollow noreferrer\">django docs</a>) as well to add a context to the translatable strings. Is there an extension that does this, or am I missing something?</p>\n\n<p><strong>update</strong>: I have posted a feature request <a href=\"https://github.com/pallets/jinja/issues/793\" rel=\"nofollow noreferrer\">#793</a>. I would still like to know whether there is an answer that can be used right now.</p>\n"}, {"tags": ["python", "performance", "recursion", "optimization", "concatenation"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1514410468, "post_id": 47998759, "comment_id": 82966227, "body": "What should <code>concatenate2([A, B], [C, D])</code> do? (This design seems to mix up types in a way that will just lead to headaches down the line.)"}, {"owner": {"reputation": 241, "user_id": 2069660, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/11b46637f3d6dbd59aa1f5449ebf29f6?s=128&d=identicon&r=PG", "display_name": "Tob Ernack", "link": "https://stackoverflow.com/users/2069660/tob-ernack"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1514410581, "post_id": 47998759, "comment_id": 82966256, "body": "It should return [A, B, C, D] (assuming none of these are lists)."}, {"owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "edited": false, "score": 0, "creation_date": 1514410833, "post_id": 47998759, "comment_id": 82966354, "body": "So you want to flatten nested lists as well?"}, {"owner": {"reputation": 241, "user_id": 2069660, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/11b46637f3d6dbd59aa1f5449ebf29f6?s=128&d=identicon&r=PG", "display_name": "Tob Ernack", "link": "https://stackoverflow.com/users/2069660/tob-ernack"}, "edited": false, "score": 0, "creation_date": 1514411441, "post_id": 47998759, "comment_id": 82966572, "body": "Yes, I just realized my definition above might be wrong, because it doesn&#39;t take into account nested lists. I really want the ultimate result from <code>concatenate</code> to be an object which is not a list, or a list of such objects (so no nested lists)."}], "answers": [{"comments": [{"owner": {"reputation": 241, "user_id": 2069660, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/11b46637f3d6dbd59aa1f5449ebf29f6?s=128&d=identicon&r=PG", "display_name": "Tob Ernack", "link": "https://stackoverflow.com/users/2069660/tob-ernack"}, "edited": false, "score": 0, "creation_date": 1514410518, "post_id": 47998842, "comment_id": 82966242, "body": "Just to make sure, does isinstance(t, list) do the same as type(t) == list?"}, {"owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "reply_to_user": {"reputation": 241, "user_id": 2069660, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/11b46637f3d6dbd59aa1f5449ebf29f6?s=128&d=identicon&r=PG", "display_name": "Tob Ernack", "link": "https://stackoverflow.com/users/2069660/tob-ernack"}, "edited": false, "score": 2, "creation_date": 1514410717, "post_id": 47998842, "comment_id": 82966304, "body": "It is a little more liberal in that it will also accept instances of <code>list</code> subclasses."}], "tags": [], "owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "is_accepted": false, "score": 3, "last_activity_date": 1514410012, "creation_date": 1514410012, "answer_id": 47998842, "question_id": 47998759, "link": "https://stackoverflow.com/questions/47998759/python-implementing-a-variadic-concatenation-operator/47998842#47998842", "title": "Python implementing a variadic concatenation operator", "body": "<p>Using <code>+</code> for repeated concatenation is not ideal as it keeps creating intermediate <code>list</code> objects for each binary concatenation which results in quadratic worst case time-complexity with regard to the combined length. A simpler and better approach would be a nested comprehension which has linear complexity.\nThis also uses the <code>*</code> operator to unpack an arbitrary number of arguments:</p>\n\n<pre><code>def concatenate(*terms):\n    return [x for t in terms for x in (t if isinstance(t, list) else [t])]\n\n&gt;&gt;&gt; concatenate([3, 4], 5, [], 7, [1])\n[3, 4, 5, 7, 1]\n\n&gt;&gt;&gt; concatenate()\n[]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "is_accepted": true, "score": 1, "last_activity_date": 1514500087, "last_edit_date": 1514500087, "creation_date": 1514412913, "answer_id": 47999265, "question_id": 47998759, "link": "https://stackoverflow.com/questions/47998759/python-implementing-a-variadic-concatenation-operator/47999265#47999265", "title": "Python implementing a variadic concatenation operator", "body": "<p>What you seem to be wanting is not just variadic, but also has a <em>mixed type signature</em>.</p>\n\n<p>Suppose that we want to define some <code>concatenate_all(*args)</code> function that concatenates all arguments thrown at it.</p>\n\n<p><em>If</em> you agree that all arguments of <code>concatenate_all</code> are sequences, we can form a single sequence out of them, and fold-left it with <code>concatenate</code>:</p>\n\n<pre><code>import itertools\n\n# Pretend that concatenate_all is [[A]] -&gt; [A]\ndef concatenate_all(*seqs):\n  all_seqs = itertools.chain(*seqs)\n  return reduce(lambda acc, x: concatenate(acc, x), all_seqs, EMPTY)\n</code></pre>\n\n<p>If we assume that <em>some</em> of the <code>args</code> are scalars, and some are lists, we can wrap the scalars into lists and use the same trick.</p>\n\n<pre><code>def concatenate_all(*scalars_or_seqs):\n  def to_list(x):\n      # TODO: should make it work with generators, too.\n      return x if isinstance(x, list) else [x]\n\n  # We use itertools to avoid creating intermediate lists.\n  all_items = itertools.chain(*scalars_or_seqs)\n  all_lists = itertools.imap(to_list, all_items)\n  return reduce(lambda acc, x: concatenate(acc, x), all_lists, EMPTY)\n</code></pre>\n\n<p>If we assume that some of the <code>args</code> are <em>also</em> nested lists which we need to flatten, you can update the code above to also handle that. </p>\n\n<p>I want to warn you against making the a function that is <em>too</em> smart about its arguments. Excessive magic may initially <a href=\"http://www.tshirtvortex.net/wp-content/uploads/2015/09/unicreep.jpg\" rel=\"nofollow noreferrer\">look neat</a>, but in practice becomes too hard to reason about, especially when using such a highly dynamic language as Python, with nearly zero static checks. It's better to push wrapping and flattening to the caller side and make them explicit.</p>\n"}], "owner": {"reputation": 241, "user_id": 2069660, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/11b46637f3d6dbd59aa1f5449ebf29f6?s=128&d=identicon&r=PG", "display_name": "Tob Ernack", "link": "https://stackoverflow.com/users/2069660/tob-ernack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 47999265, "answer_count": 2, "score": 1, "last_activity_date": 1514500087, "creation_date": 1514409555, "last_edit_date": 1514411966, "question_id": 47998759, "link": "https://stackoverflow.com/questions/47998759/python-implementing-a-variadic-concatenation-operator", "title": "Python implementing a variadic concatenation operator", "body": "<p>CLARIFICATIONS:</p>\n\n<p>I just realized my definition and code below might be wrong, because they don't take into account nested lists. I really want the ultimate result from <code>concatenate</code> to be either an object which is not a list, or a list of more than 1 objects that are not lists (so no nested lists). And the empty list should become the object Empty.</p>\n\n<hr>\n\n<p>But it is possible for the user to provide an input consisting of nested lists, in such a case I need them to be denested. Apologies for not being clear on this.</p>\n\n<p>I have objects of a certain type (which can have Empty as value too), and I have a binary concatenation operator on these objects that satisfies the following axioms (here [A, B] means the list containing A and B):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>concatenate2(Empty, A) = concatenate2(A, Empty) = A  \nconcatenate2(A, [B, C]) = concatenate2([A, B], C) = [A, B, C]  \nconcatenate2(A, B) = [A, B] (if A, B do not match any of the previous cases).\n</code></pre>\n\n<p>Now I want to also have a concatenation of arbitrarily many terms:\n</p>\n\n<pre><code>concatenate([]) = Empty  \nconcatenate([A]) = A  \nconcatenate([A, B]) = concatenate2(A, B)  \nconcatenate([A, B, ...]) = concatenate([concatenate2(A, B), ...])\n</code></pre>\n\n<p>I would like to implement these operators in a way that minimizes the number of list copy operations, but I am not sure how to do this best in Python.</p>\n\n<p>My current idea was to do something like this:\n</p>\n\n<pre><code>def concatenate2(A, B):\n    if A == Empty:\n        return B\n\n    if B == Empty:\n        return A\n\n    if type(A) == list:\n        return concatenate(A + [B])\n\n    if type(B) == list:\n        return concatenate([A] + B)\n\n    return [A, B]\n\ndef concatenate(terms):\n    if terms == []:\n        return Empty\n\n    if len(terms) == 1:\n        return terms[0]\n\n    if len(terms) == 2:\n        return concatenate2(terms[0], terms[1])\n\n    return concatenate(concatenate2(terms[0], terms[1]) + terms[2:])\n</code></pre>\n\n<p>This looks pretty nice and clear, but I don't know how well it stands in terms of performance and memory usage. I am worried it might cause too many list copies during each [...] + [...] operation.</p>\n\n<p>Is there a better way to implement these operations?</p>\n\n<p>Note that ultimately only the <code>concatenate</code> operation is really required. The <code>concatenate2</code> operator was used to give a nice recursive definition, but if someone can propose a more efficient solution that does not use it, I would accept it too.</p>\n"}, {"tags": ["python", "nlp", "lda", "topic-modeling"], "comments": [{"owner": {"reputation": 1767, "user_id": 4075085, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/cdd3817d549a4f941e1de54c640ffb49?s=128&d=identicon&r=PG&f=1", "display_name": "JJFord3", "link": "https://stackoverflow.com/users/4075085/jjford3"}, "edited": false, "score": 0, "creation_date": 1519937336, "post_id": 47998685, "comment_id": 85121684, "body": "Ran into same issue when switching from training docs to another set of docs. You sure its the same dictionary. Might be loading from an older version."}, {"owner": {"reputation": 101, "user_id": 3854980, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pw6nP.jpg?s=128&g=1", "display_name": "Derek Allums", "link": "https://stackoverflow.com/users/3854980/derek-allums"}, "edited": false, "score": 2, "creation_date": 1521043794, "post_id": 47998685, "comment_id": 85567866, "body": "Check that your corpus contains no NaNs, Nones, &#39;-&#39;s, etc. This is usually because LDA, NMF, etc. doesn&#39;t know how to deal with documents that are too short or otherwise invalid."}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 714252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd7058abcecc3443b40695893b824e4?s=128&d=identicon&r=PG", "display_name": "AzureX", "link": "https://stackoverflow.com/users/714252/azurex"}, "is_accepted": false, "score": 2, "last_activity_date": 1536058646, "last_edit_date": 1536058646, "creation_date": 1536056063, "answer_id": 52163944, "question_id": 47998685, "link": "https://stackoverflow.com/questions/47998685/pyldavis-validation-error-on-trying-to-visualize-topics/52163944#52163944", "title": "pyLDAvis: Validation error on trying to visualize topics", "body": "<p>This happens because the pyLDAvis program expects that all document topics in the model show up in the corpus at least once. This can happen when you do some preprocessing after making your corpus/text and before making your model.</p>\n\n<p>A word in the model's internal dictionary that is not used in the dictionary you provide will cause this to fail because now the probability is slightly less than one.</p>\n\n<p>You can fix this by either adding the missing words to your corpus dictionary (or adding the words to the corpus and making a dictionary from that) or you can add this line to the site-packages\\pyLDAvis\\gensim.py code before \"assert topic_term_dists.shape[0] == doc_topic_dists.shape[1]\" (should be ~line 67)</p>\n\n<pre><code>topic_term_dists = topic_term_dists / topic_term_dists.sum(axis=1)[:, None]\n</code></pre>\n\n<p>Assuming your code ran till that point, this should renormalize the topic distribution without the missing dict items. But note that it would be better to include all terms in the corpus.</p>\n"}, {"tags": [], "owner": {"reputation": 381, "user_id": 3281039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cae6011f8e85c17656784844342e31c?s=128&d=identicon&r=PG&f=1", "display_name": "user108569", "link": "https://stackoverflow.com/users/3281039/user108569"}, "is_accepted": false, "score": 0, "last_activity_date": 1558739713, "creation_date": 1558739713, "answer_id": 56300410, "question_id": 47998685, "link": "https://stackoverflow.com/questions/47998685/pyldavis-validation-error-on-trying-to-visualize-topics/56300410#56300410", "title": "pyLDAvis: Validation error on trying to visualize topics", "body": "<p>This happened in my HDPModel after I filtered my dictionary- I was left with a lot of zero length documents, which produced this error.  I eliminated them before saving my MmCorpus to disk via <code>corpora.MmCorpus.serialize(args.save_folder + '/gensim.mm', (x for x in corpus if len(x) &gt; 0))</code> which solved the problem when running HDP later.\n<code>corpus</code> is the generator for my text documents.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 11185864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76f65f2a7ba429b5512a6871a22f3852?s=128&d=identicon&r=PG&f=1", "display_name": "GarryC", "link": "https://stackoverflow.com/users/11185864/garryc"}, "is_accepted": false, "score": 0, "last_activity_date": 1568171212, "last_edit_date": 1568171212, "creation_date": 1568169875, "answer_id": 57881368, "question_id": 47998685, "link": "https://stackoverflow.com/questions/47998685/pyldavis-validation-error-on-trying-to-visualize-topics/57881368#57881368", "title": "pyLDAvis: Validation error on trying to visualize topics", "body": "<p>I ran into the same validation error. </p>\n\n<p>What my issue was that even though <code>PyLDAVIS</code> went through a normalization step (see <code>sklearn.py</code>, <code>_row_norm</code>) to ensure that the <code>doc_topic_dists</code> and <code>topic_term_dists</code> probabilities sum to 1, if none of the words in your document actually show up in the document term matrix (e.g. Matrix of 0s), then this function does not ensure your probabilities equal 1. Your probabilities can only sum to 0!</p>\n\n<p>Run a sum on your document vectors. If there is indeed a 0, then you might want to drop that row/document.</p>\n\n<pre><code>np.sum(lda.transform(docu_term_matrix),axis=1)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7536, "user_id": 28165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jUS4D.png?s=128&g=1", "display_name": "Mapad", "link": "https://stackoverflow.com/users/28165/mapad"}, "is_accepted": false, "score": 0, "last_activity_date": 1610375822, "creation_date": 1610375822, "answer_id": 65668869, "question_id": 47998685, "link": "https://stackoverflow.com/questions/47998685/pyldavis-validation-error-on-trying-to-visualize-topics/65668869#65668869", "title": "pyLDAvis: Validation error on trying to visualize topics", "body": "<p>I had this problem and solved it by filtering out words with very low frequencies from the dictionary, before generating the corpus.</p>\n<p><code>dictionary.filter_extremes(no_below=2, no_above=1.0)</code>.</p>\n<p>I suspect that summing a lot of extremely low probabilities won't sum to 1 due to floating point approximation.</p>\n"}], "owner": {"reputation": 874, "user_id": 8382950, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/2f141e4ef00104d0ee91416545415e78?s=128&d=identicon&r=PG&f=1", "display_name": "Hackerds", "link": "https://stackoverflow.com/users/8382950/hackerds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3225, "favorite_count": 0, "answer_count": 4, "score": 8, "last_activity_date": 1610375822, "creation_date": 1514409025, "question_id": 47998685, "link": "https://stackoverflow.com/questions/47998685/pyldavis-validation-error-on-trying-to-visualize-topics", "title": "pyLDAvis: Validation error on trying to visualize topics", "body": "<p>I tried generating topics using gensim for 300000 records. On trying to visualize the topics, I get a validation error. I can print the topics after model training, but it fails on using pyLDAvis</p>\n\n<pre><code># Running and Training LDA model on the document term matrix.\nldamodel1 = Lda(doc_term_matrix1, num_topics=10, id2word = dictionary1, passes=50, workers = 4)\n\n(ldamodel1.print_topics(num_topics=10, num_words = 10))\n #pyLDAvis\nd = gensim.corpora.Dictionary.load('dictionary1.dict')\nc = gensim.corpora.MmCorpus('corpus.mm')\nlda = gensim.models.LdaModel.load('topic.model')\n\n#error on executing this line\ndata = pyLDAvis.gensim.prepare(lda, c, d)\n</code></pre>\n\n<p>I got the below error on trying to after running above pyLDAvis </p>\n\n<pre><code>---------------------------------------------------------------------------\nValidationError                           Traceback (most recent call last)\n&lt;ipython-input-53-33fd88b65056&gt; in &lt;module&gt;()\n----&gt; 1 data = pyLDAvis.gensim.prepare(lda, c, d)\n      2 data\n\nC:\\ProgramData\\Anaconda3\\lib\\site-packages\\pyLDAvis\\gensim.py in prepare(topic_model, corpus, dictionary, doc_topic_dist, **kwargs)\n    110     \"\"\"\n    111     opts = fp.merge(_extract_data(topic_model, corpus, dictionary, doc_topic_dist), kwargs)\n--&gt; 112     return vis_prepare(**opts)\n\nC:\\ProgramData\\Anaconda3\\lib\\site-packages\\pyLDAvis\\_prepare.py in prepare(topic_term_dists, doc_topic_dists, doc_lengths, vocab, term_frequency, R, lambda_step, mds, n_jobs, plot_opts, sort_topics)\n    372    doc_lengths      = _series_with_name(doc_lengths, 'doc_length')\n    373    vocab            = _series_with_name(vocab, 'vocab')\n--&gt; 374    _input_validate(topic_term_dists, doc_topic_dists, doc_lengths, vocab, term_frequency)\n    375    R = min(R, len(vocab))\n    376 \n\nC:\\ProgramData\\Anaconda3\\lib\\site-packages\\pyLDAvis\\_prepare.py in _input_validate(*args)\n     63    res = _input_check(*args)\n     64    if res:\n---&gt; 65       raise ValidationError('\\n' + '\\n'.join([' * ' + s for s in res]))\n     66 \n     67 \n\nValidationError: \n * Not all rows (distributions) in topic_term_dists sum to 1.\n</code></pre>\n"}, {"tags": ["python", "pandas", "filter", "duplicates"], "comments": [{"owner": {"reputation": 25081, "user_id": 4804629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vGzEm.jpg?s=128&g=1", "display_name": "splash58", "link": "https://stackoverflow.com/users/4804629/splash58"}, "edited": false, "score": 0, "creation_date": 1514409123, "post_id": 47998672, "comment_id": 82965727, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/11869910/pandas-filter-rows-of-dataframe-with-operator-chaining\">pandas: filter rows of DataFrame with operator chaining</a>"}, {"owner": {"reputation": 6414, "user_id": 4829258, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/3CeCz.jpg?s=128&g=1", "display_name": "Tai", "link": "https://stackoverflow.com/users/4829258/tai"}, "edited": false, "score": 0, "creation_date": 1514410537, "post_id": 47998672, "comment_id": 82966246, "body": "Why <code>2017-12-11  10000   1113</code> is gone after the operation?"}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 8378431, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/3140643cf24b671c49a10ff463c67a4b?s=128&d=identicon&r=PG&f=1", "display_name": "Reese Fitzmaurice", "link": "https://stackoverflow.com/users/8378431/reese-fitzmaurice"}, "edited": false, "score": 0, "creation_date": 1514493826, "post_id": 47998767, "comment_id": 82997118, "body": "do you know how to modify to the code to filter out for multiple numbers not just 1111 but lets you also add 1112"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 141, "user_id": 8378431, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/3140643cf24b671c49a10ff463c67a4b?s=128&d=identicon&r=PG&f=1", "display_name": "Reese Fitzmaurice", "link": "https://stackoverflow.com/users/8378431/reese-fitzmaurice"}, "edited": false, "score": 0, "creation_date": 1514494154, "post_id": 47998767, "comment_id": 82997251, "body": "@ReeseFitzmaurice <code>df[~df.Trans.isin(df.loc[df.account_no.isin([1112,1111]),&#39;Tr&zwnj;&#8203;ans&#39;])]</code>"}, {"owner": {"reputation": 141, "user_id": 8378431, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/3140643cf24b671c49a10ff463c67a4b?s=128&d=identicon&r=PG&f=1", "display_name": "Reese Fitzmaurice", "link": "https://stackoverflow.com/users/8378431/reese-fitzmaurice"}, "edited": false, "score": 0, "creation_date": 1514496575, "post_id": 47998767, "comment_id": 82998182, "body": "I am still trying to keep the original question logic, would this work?  df=df[~df.groupby(&#39;Trans&#39;).account_no.transform(lambda x : set([1112,1111]).issubset(x))]"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 141, "user_id": 8378431, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/3140643cf24b671c49a10ff463c67a4b?s=128&d=identicon&r=PG&f=1", "display_name": "Reese Fitzmaurice", "link": "https://stackoverflow.com/users/8378431/reese-fitzmaurice"}, "edited": false, "score": 0, "creation_date": 1514499238, "post_id": 47998767, "comment_id": 82999057, "body": "@ReeseFitzmaurice this will not then , cause they will match both [1112 and 1111, when both condition satisfied, they will return true, seems like you need logic or rather than and right ?"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 2, "last_activity_date": 1514409598, "creation_date": 1514409598, "answer_id": 47998767, "question_id": 47998672, "link": "https://stackoverflow.com/questions/47998672/how-to-do-a-complicated-filter-in-python/47998767#47998767", "title": "How to do a complicated filter in python", "body": "<p>By using <code>issubset</code> + <code>transform</code></p>\n\n<pre><code>df[~df.groupby('Trans').account_no.transform(lambda x : set([1111]).issubset(x))]\nOut[1658]: \n         Date  Trans  account_no\n4  2017-12-11  10002        1113\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7436, "user_id": 5514476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP6t0.jpg?s=128&g=1", "display_name": "DJK", "link": "https://stackoverflow.com/users/5514476/djk"}, "is_accepted": false, "score": 1, "last_activity_date": 1514418258, "last_edit_date": 1514418258, "creation_date": 1514410771, "answer_id": 47998962, "question_id": 47998672, "link": "https://stackoverflow.com/questions/47998672/how-to-do-a-complicated-filter-in-python/47998962#47998962", "title": "How to do a complicated filter in python", "body": "<p>You could do this in two steps. First find all <code>Trans</code> values that have an <code>account_no</code> that is ever equal to 1111 using <code>.loc</code>. Then select all other transactions with <code>isin()</code></p>\n\n<pre><code>df[~df.Trans.isin(df.loc[df.account_no == 1111,'Trans'])]\n\n         Date  Trans  account_no\n4  2017-12-11  10002        1113\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1042, "user_id": 4728007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc52f06839fc0abf6c6b812f2a1856f1?s=128&d=identicon&r=PG&f=1", "display_name": "DragonBobZ", "link": "https://stackoverflow.com/users/4728007/dragonbobz"}, "is_accepted": false, "score": 0, "last_activity_date": 1514411014, "creation_date": 1514411014, "answer_id": 47998996, "question_id": 47998672, "link": "https://stackoverflow.com/questions/47998672/how-to-do-a-complicated-filter-in-python/47998996#47998996", "title": "How to do a complicated filter in python", "body": "<p>You can use <code>.loc</code> to filter based on a series.</p>\n\n<pre><code>def complex_filter_criteria(x):\n    return x != 1111\ndf.loc[df['account_no'].apply(complex_filter_criteria)]\n</code></pre>\n\n<p><code>df['account_no'].apply(complex_filter_criteria)</code> will return a series of <code>True/False</code> evaluations for each entry in the column <code>account_no</code>. Then, when you pass that into <code>df.loc</code>, it returns a dataframe consisting only of the rows corresponding to the <code>True</code> evaluations from the series. </p>\n\n<p><a href=\"https://i.stack.imgur.com/BB2w3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BB2w3.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 141, "user_id": 8378431, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/3140643cf24b671c49a10ff463c67a4b?s=128&d=identicon&r=PG&f=1", "display_name": "Reese Fitzmaurice", "link": "https://stackoverflow.com/users/8378431/reese-fitzmaurice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 47998767, "answer_count": 3, "score": 1, "last_activity_date": 1514418258, "creation_date": 1514408947, "last_edit_date": 1514409363, "question_id": 47998672, "link": "https://stackoverflow.com/questions/47998672/how-to-do-a-complicated-filter-in-python", "title": "How to do a complicated filter in python", "body": "<p>I am trying to do a filter based on one column.  For example, I want to remove the transaction whenever I see it has account_no 1111</p>\n\n<p>Input</p>\n\n<pre><code>Date        Trans   account_no\n2017-12-11  10000   1111\n2017-12-11  10000   1112\n2017-12-11  10000   1113\n2017-12-11  10001   1111\n2017-12-11  10002   1113\n</code></pre>\n\n<p>Desired Output</p>\n\n<pre><code>Date        Trans   account_no\n2017-12-11  10002   1113\n</code></pre>\n\n<p>Edit:</p>\n\n<p>This is different than operator chaining because you are dealing with a duplication/conditional filter</p>\n"}, {"tags": ["python", "numpy", "unicode", "cython"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1514409241, "post_id": 47998664, "comment_id": 82965767, "body": "What&#39;s <code>arr</code>? You defined <code>alist</code>, <code>arr_unicode</code>, and <code>arr_object</code>, but then referred to some unknown <code>arr</code>."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1514409463, "post_id": 47998664, "comment_id": 82965850, "body": "(Note that the <code>np.char</code> functions just build Python strings, call the corresponding Python string methods, and convert the results back to a NumPy array.)"}, {"owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1514409465, "post_id": 47998664, "comment_id": 82965851, "body": "@user2357112 Good catch. It was meant to be <code>arr_unicode</code> which won&#39;t change anything"}, {"owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1514409547, "post_id": 47998664, "comment_id": 82965883, "body": "@user2357112 Yes, that makes sense on what is happening, but numpy has no other builtin ways for doing string operations correct? i.e., <code>np.char.lower</code> is the fastest way of doing this in NumPy, correct?"}, {"owner": {"reputation": 3890, "user_id": 7517724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63c21233470c84bd8e36b40bf9fe8103?s=128&d=identicon&r=PG", "display_name": "Craig", "link": "https://stackoverflow.com/users/7517724/craig"}, "edited": false, "score": 0, "creation_date": 1514409650, "post_id": 47998664, "comment_id": 82965925, "body": "I tried a <code>pandas.DataSeries</code> and got an improvement, but the list comprehension is still faster."}, {"owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "reply_to_user": {"reputation": 3890, "user_id": 7517724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63c21233470c84bd8e36b40bf9fe8103?s=128&d=identicon&r=PG", "display_name": "Craig", "link": "https://stackoverflow.com/users/7517724/craig"}, "edited": false, "score": 0, "creation_date": 1514409806, "post_id": 47998664, "comment_id": 82965977, "body": "@Craig Pandas and numpy are useless here, which is why I want to do this in Cython. I was able to lowercase ascii strings extremely fast by incrementing the bytes by 32 but this won&#39;t work for unicode strings."}, {"owner": {"reputation": 3890, "user_id": 7517724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63c21233470c84bd8e36b40bf9fe8103?s=128&d=identicon&r=PG", "display_name": "Craig", "link": "https://stackoverflow.com/users/7517724/craig"}, "edited": false, "score": 0, "creation_date": 1514410034, "post_id": 47998664, "comment_id": 82966063, "body": "@TedPetrou - which is why I offered that as a comment and not an answer--to document that the operations in pandas are faster than numpy, but they don&#39;t achieve the <i>unstated</i> speedup you require."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1514410156, "post_id": 47998664, "comment_id": 82966108, "body": "Trying to use <code>tolower</code> for Unicode is going to be tricky, since wchar_t is compiler-dependent and not very portable."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1514411636, "post_id": 47998664, "comment_id": 82966638, "body": "@TedPetrou Is <code>np.char.lower(arr_unicode)</code> doing the intended to-lower conversion? To me it seems its just changing the uppercase letters to lower ones."}, {"owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1514412097, "post_id": 47998664, "comment_id": 82966762, "body": "@Divakar Yes, <code>np.char.lower</code> is working correctly for all unicode characters."}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1514412192, "post_id": 47998664, "comment_id": 82966786, "body": "@Divakar, you can test it with this unicode text: <code>arr = np.array([&#39;\u0423\u041a\u0420\u0410\u0407\u041d\u0410&#39;], dtype=np.unicode_)</code>. Correct result should be: <code>array([&#39;\u0443\u043a\u0440\u0430\u0457\u043d\u0430&#39;], dtype=&#39;&lt;U7&#39;)</code>"}, {"owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 1, "creation_date": 1514412320, "post_id": 47998664, "comment_id": 82966823, "body": "Thanks @MaxU. That&#39;s a much better string for testing."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 1, "creation_date": 1514412437, "post_id": 47998664, "comment_id": 82966848, "body": "Hmm, I think I got the point. Thanks guys. Appreciate the feedback!"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1514413550, "post_id": 47998664, "comment_id": 82967168, "body": "Iteration on an object array takes about the same time as iteration on a list.  In effect both are working with pointers to the strings.  <code>np.char</code> is doing the slower iteration on a character array."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1514414704, "post_id": 47998664, "comment_id": 82967468, "body": "(Also, consider that Unicode case mappings aren&#39;t all 1 character to 1 character. For example, <code>&#39;&#223;&#39;.upper() == &#39;SS&#39;</code>. <code>str.upper</code> handles this fine, but <code>np.char.upper</code> doesn&#39;t realize the result needs more room.)"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1514414922, "post_id": 47998664, "comment_id": 82967526, "body": "Just an idea - what about checking the <code>str.lower()</code> implementation for Python 3.x in source files?"}, {"owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1514416433, "post_id": 47998664, "comment_id": 82967919, "body": "@user2357112 Very interesting, had no idea about that."}, {"owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1514416530, "post_id": 47998664, "comment_id": 82967954, "body": "@MaxU Thanks for the suggestion. I looked at the <a href=\"https://github.com/python/cpython/blob/master/Objects/unicodeobject.c#L9872\" rel=\"nofollow noreferrer\">source code</a> for a few minutes but only see rabbit holes :)"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1514418882, "post_id": 47998664, "comment_id": 82968457, "body": "@user2357112: on your specific example: the capital eszet <code>\u1e9e</code> has been included in Unicode in 2008. Is Python&#39;s Unicode implementation slow to catch up?"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1514420219, "post_id": 47998664, "comment_id": 82968749, "body": "@TedPetrou, i&#39;m not sure whether it helps, but you could take a look at <a href=\"https://github.com/python/cpython/blob/master/Objects/unicodectype.c#L211\" rel=\"nofollow noreferrer\">this function</a>"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1514423595, "post_id": 47998664, "comment_id": 82969434, "body": "@usr2564301: I believe the capital Eszett was nonstandard in German orthography until <a href=\"https://qz.com/1033265/germanys-century-long-debate-over-a-missing-letter-in-its-alphabet/\" rel=\"nofollow noreferrer\">very recently</a>. Standard practice was to use SS. While Unicode has encoded the capital Eszett since 5.1, the Unicode standard still specifies SS as the capital of &#223;. See the <a href=\"http://unicode.org/faq/casemap_charprop.html#11\" rel=\"nofollow noreferrer\">Unicode FAQ</a> (although that entry might currently be a bit out of date)."}], "answers": [{"comments": [{"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1514613697, "post_id": 48029862, "comment_id": 83033032, "body": "Why pass <code>&amp;arr</code> and not just <code>arr</code>? You never assign <code>*s =</code>, so I see no reason to."}, {"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1514613770, "post_id": 48029862, "comment_id": 83033051, "body": "Also, this fails on non-contiguous arrays like <code>arr_unicode[::2]</code>"}, {"owner": {"reputation": 813, "user_id": 3543200, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0e080d0d27c61c16444b17d0aae7b3c8?s=128&d=identicon&r=PG", "display_name": "gmoss", "link": "https://stackoverflow.com/users/3543200/gmoss"}, "reply_to_user": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1514613988, "post_id": 48029862, "comment_id": 83033075, "body": "@Eric you&#39;re right -- it was from a first version of the function I tried before using memcpy.   And, definitely. I mostly wrote it up because OP said he&#39;s not sure how to hook his C++ function into python, so it&#39;s mostly illustrative."}, {"owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "edited": false, "score": 1, "creation_date": 1514930662, "post_id": 48029862, "comment_id": 83110519, "body": "Thanks very much for putting this all together. I think a more straightforward approach would be to not do the operation in place and simply pass each individual string to <code>to_lower</code> in a for loop and simply return the new string. This would avoid any memory copying."}, {"owner": {"reputation": 813, "user_id": 3543200, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0e080d0d27c61c16444b17d0aae7b3c8?s=128&d=identicon&r=PG", "display_name": "gmoss", "link": "https://stackoverflow.com/users/3543200/gmoss"}, "edited": false, "score": 0, "creation_date": 1514973165, "post_id": 48029862, "comment_id": 83123427, "body": "Yes, but then a) your new string will not be wrapped in a numpy.ndarray object, and b) if you are not careful you will have a potential memory leak.   It would also be slower to do that one string at a time, because each string would be converted from a python unicode object to an <code>unsigned char *</code> and then back. When possible, send as little data as possible, as few times as possible, through the python-C barrier."}], "tags": [], "owner": {"reputation": 813, "user_id": 3543200, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0e080d0d27c61c16444b17d0aae7b3c8?s=128&d=identicon&r=PG", "display_name": "gmoss", "link": "https://stackoverflow.com/users/3543200/gmoss"}, "is_accepted": false, "score": 1, "last_activity_date": 1514616560, "last_edit_date": 1514616560, "creation_date": 1514594142, "answer_id": 48029862, "question_id": 47998664, "link": "https://stackoverflow.com/questions/47998664/fastest-way-to-lowercase-a-numpy-array-of-unicode-strings-in-cython/48029862#48029862", "title": "Fastest way to lowercase a numpy array of unicode strings in Cython", "body": "<p>This was only slightly faster than the list comprehension for me on my machine, but if you want unicode support this might be the fastest way of doing it. You'll need to <code>apt-get install libunistring-dev</code> or whatever is appropriate for your OS / package manager. </p>\n\n<p>In some C file, say, <code>_lower.c</code>, have</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;   \n#include &lt;unistr.h&gt;\n#include &lt;unicase.h&gt;\n\nvoid _c_tolower(uint8_t  **s, uint32_t total_len) {\n    size_t lower_len, s_len;\n    uint8_t *s_ptr = *s, *lowered;\n    while(s_ptr - *s &lt; total_len) {\n        s_len = u8_strlen(s_ptr);\n        if (s_len == 0) {\n            s_ptr += 1;\n            continue;\n        }\n        lowered = u8_tolower(s_ptr, s_len, NULL, NULL, NULL, &amp;lower_len);\n        memcpy(s_ptr, lowered, lower_len);\n        free(lowered);\n        s_ptr += s_len;\n    }\n}\n</code></pre>\n\n<p>Then, in <code>lower.pxd</code> you do </p>\n\n<pre><code>cdef extern from \"_lower.c\":\n    cdef void _c_tolower(unsigned char **s, unsigned int total_len)\n</code></pre>\n\n<p>And finally, in <code>lower.pyx</code>:</p>\n\n<pre><code>cpdef void lower(ndarray arr):\n    cdef unsigned char * _arr\n    _arr = &lt;unsigned char *&gt; arr.data\n    _c_tolower(&amp;_arr, arr.shape[0] * arr.itemsize)\n</code></pre>\n\n<p>On my laptop, I got 46ms for the list comprehension you had above and 37ms for this method (and 0.8ms for your <code>lower_fast</code>), so it's probably not worth it, but I figured I'd type it out in case you wanted an example of how to hook such a thing into Cython.</p>\n\n<p>There are a few points of improvement that I don't know will make much of a difference:</p>\n\n<ul>\n<li><code>arr.data</code> is something like a square matrix I guess? (I don't know, I don't use numpy for anything), and pads the ends of the shorter strings with <code>\\x00</code>s. I was too lazy to figure out how to get <code>u8_tolower</code> to look past the 0s, so I just manually fast-forward past them (that's what the <code>if (s_len == 0)</code> clause is doing). I suspect that one call to <code>u8_tolower</code> would be significantly faster than doing it thousands of times. </li>\n<li>I'm doing a lot of freeing/memcpying. You can probably avoid that if you're clever.</li>\n<li>I <em>think</em> it's the case that every lowercase unicode character is at most as wide as its uppercase variant, so this should not run into any segfaults or buffer overwrites or just overlapping substring issues, but don't take my word for that. </li>\n</ul>\n\n<p>Not really an answer, but hope it helps your further investigations!</p>\n\n<p>PS You'll notice that this does the lowering in-place, so the usage would be like this:</p>\n\n<pre><code>&gt;&gt;&gt; alist = ['JsDated', '\u0423\u041a\u0420\u0410\u0407\u041d\u0410', '\u9053\u5fb7\u7d93', '\u041d\u0443 \u0418 \u0439\u0415\u0448\u0428\u043e'] * 2\n&gt;&gt;&gt; arr_unicode = np.array(alist)\n&gt;&gt;&gt; lower_2(arr_unicode)\n&gt;&gt;&gt; for x in arr_unicode:\n...     print x\n...\njsdated\n\u0443\u043a\u0440\u0430\u0457\u043d\u0430\n\u9053\u5fb7\u7d93\n\u043d\u0443 \u0438 \u0439\u0435\u0448\u0448\u043e\njsdated\n\u0443\u043a\u0440\u0430\u0457\u043d\u0430\n\u9053\u5fb7\u7d93\n\u043d\u0443 \u0438 \u0439\u0435\u0448\u0448\u043e\n\n&gt;&gt;&gt; alist = ['JsDated', '\u0423\u041a\u0420\u0410\u0407\u041d\u0410'] * 50000\n&gt;&gt;&gt; arr_unicode = np.array(alist)\n&gt;&gt;&gt; ct = time(); x = [a.lower() for a in arr_unicode]; time() - ct;\n0.046072959899902344\n&gt;&gt;&gt; arr_unicode = np.array(alist)\n&gt;&gt;&gt; ct = time(); lower_2(arr_unicode); time() - ct\n0.037489891052246094\n</code></pre>\n\n<p>EDIT</p>\n\n<p>DUH, you modify the C function to look like this</p>\n\n<pre><code>void _c_tolower(uint8_t  **s, uint32_t total_len) {\n    size_t lower_len;\n    uint8_t *lowered;\n\n    lowered = u8_tolower(*s, total_len, NULL, NULL, NULL, &amp;lower_len);\n    memcpy(*s, lowered, lower_len);\n    free(lowered);\n}\n</code></pre>\n\n<p>and then it does it all in one go. Looks more dangerous in terms of possibly having something from the old data left over of <code>lower_len</code> is shorter than the original string... in short, this code is TOTALLY EXPERIMENTAL AND FOR ILLUSTRATIVE PURPOSES ONLY DO NOT USE THIS IN PRODUCTION IT WILL PROBABLY BREAK. </p>\n\n<p>Anyway, ~40% faster this way:</p>\n\n<pre><code>&gt;&gt;&gt; alist = ['JsDated', '\u0423\u041a\u0420\u0410\u0407\u041d\u0410'] * 50000\n&gt;&gt;&gt; arr_unicode = np.array(alist)\n&gt;&gt;&gt; ct = time(); lower_2(arr_unicode); time() - ct\n0.022463043975830078 \n</code></pre>\n"}], "owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1734, "favorite_count": 1, "answer_count": 1, "score": 8, "last_activity_date": 1514616560, "creation_date": 1514408870, "last_edit_date": 1514413636, "question_id": 47998664, "link": "https://stackoverflow.com/questions/47998664/fastest-way-to-lowercase-a-numpy-array-of-unicode-strings-in-cython", "title": "Fastest way to lowercase a numpy array of unicode strings in Cython", "body": "<p>Numpy's string functions are all very slow and are less performant than pure python lists. I am looking to optimize all the normal string functions using Cython.</p>\n\n<p>For instance, let's take a numpy array of 100,000 unicode strings with data type either unicode or object and lowecase each one.</p>\n\n<pre><code>alist = ['JsDated', '\u0423\u041a\u0420\u0410\u0407\u041d\u0410'] * 50000\narr_unicode = np.array(alist)\narr_object = np.array(alist, dtype='object')\n\n%timeit np.char.lower(arr_unicode)\n51.6 ms \u00b1 1.99 ms per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n</code></pre>\n\n<p>Using a list comprehension is just as fast</p>\n\n<pre><code>%timeit [a.lower() for a in arr_unicode]\n44.7 ms \u00b1 2.69 ms per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n</code></pre>\n\n<p>For the object data type, we cannot use <code>np.char</code>. The list comprehension is 3x as fast.</p>\n\n<pre><code>%timeit [a.lower() for a in arr_object]\n16.1 ms \u00b1 147 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n</code></pre>\n\n<p>The only way I know how to do this in Cython is to create an empty object array and call the Python string method <code>lower</code> on each iteration.</p>\n\n<pre><code>import numpy as np\ncimport numpy as np\nfrom numpy cimport ndarray\n\ndef lower(ndarray[object] arr):\n    cdef int i\n    cdef int n = len(arr)\n    cdef ndarray[object] result = np.empty(n, dtype='object')\n    for i in range(n):\n        result[i] = arr[i].lower()\n    return result\n</code></pre>\n\n<p>This yields a modest improvement</p>\n\n<pre><code>%timeit lower(arr_object)\n11.3 ms \u00b1 383 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n</code></pre>\n\n<p>I have tried accessing the memory directly with the <code>data</code> ndarray attribute like this:</p>\n\n<pre><code>def lower_fast(ndarray[object] arr):\n    cdef int n = len(arr)\n    cdef int i\n    cdef char* data = arr.data\n    cdef int itemsize = arr.itemsize\n    for i in range(n):\n        # no idea here\n</code></pre>\n\n<p>I believe <code>data</code> is one contiguous piece of memory holding all the raw bytes one after the other. Accessing these bytes is extremely fast and it seems converting these raw bytes would increase performance by 2 orders of magnitude. I found a <a href=\"http://en.cppreference.com/w/cpp/locale/tolower\" rel=\"noreferrer\"><code>tolower</code></a> c++ function that might work, but I don't know how to hook it in with Cython.</p>\n\n<h3>Update with fastest method (doesn't work for unicode)</h3>\n\n<p>Here is the fastest method I found by far, from another SO post. This lowercases all the ascii characters by accessing the numpy memoryview via the <code>data</code> attribute. I think it will mangle other unicode characters that have bytes between 65 and 90 as well. But the speed is very good.</p>\n\n<pre><code>cdef int f(char *a, int itemsize, int shape):\n    cdef int i\n    cdef int num\n    cdef int loc\n    for i in range(shape * itemsize):\n        num = a[i]\n        print(num)\n        if 65 &lt;= num &lt;= 90:\n            a[i] +=32\n\ndef lower_fast(ndarray arr):\n    cdef char *inp\n    inp = arr.data\n    f(inp, arr.itemsize, arr.shape[0])\n    return arr\n</code></pre>\n\n<p>This is 100x faster than the others and what I am looking for.</p>\n\n<pre><code>%timeit lower_fast(arr)\n103 \u00b5s \u00b1 1.23 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)\n</code></pre>\n"}, {"tags": ["python", "mysql", "docker"], "comments": [{"owner": {"reputation": 17034, "user_id": 858913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b5015a60c08feee1d8116be3dd70878d?s=128&d=identicon&r=PG", "display_name": "eLRuLL", "link": "https://stackoverflow.com/users/858913/elrull"}, "edited": false, "score": 0, "creation_date": 1514408856, "post_id": 47998646, "comment_id": 82965644, "body": "but you have mysql-client installed on the host machine?"}, {"owner": {"reputation": 1928, "user_id": 4364847, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/pcepW.png?s=128&g=1", "display_name": "MadzQuestioning", "link": "https://stackoverflow.com/users/4364847/madzquestioning"}, "reply_to_user": {"reputation": 17034, "user_id": 858913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b5015a60c08feee1d8116be3dd70878d?s=128&d=identicon&r=PG", "display_name": "eLRuLL", "link": "https://stackoverflow.com/users/858913/elrull"}, "edited": false, "score": 0, "creation_date": 1514408891, "post_id": 47998646, "comment_id": 82965654, "body": "Yes. As you can see when running pip3 freeze it displays all packages that is installed in the host"}, {"owner": {"reputation": 1434, "user_id": 4991093, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8bda2dd45616408b698ae852a24c4f1d?s=128&d=identicon&r=PG&f=1", "display_name": "Furhan S.", "link": "https://stackoverflow.com/users/4991093/furhan-s"}, "edited": false, "score": 0, "creation_date": 1514409032, "post_id": 47998646, "comment_id": 82965701, "body": "what is output of: which mysql"}, {"owner": {"reputation": 17034, "user_id": 858913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b5015a60c08feee1d8116be3dd70878d?s=128&d=identicon&r=PG", "display_name": "eLRuLL", "link": "https://stackoverflow.com/users/858913/elrull"}, "edited": false, "score": 0, "creation_date": 1514409075, "post_id": 47998646, "comment_id": 82965711, "body": "Sorry my question was incorrect. I thought you were trying to access mysql from the host machine. Now maybe I am wrong but I think &quot;mysql-client&quot; can&#39;t be installed with pip, you&#39;ll have to install that separately into the system."}, {"owner": {"reputation": 1928, "user_id": 4364847, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/pcepW.png?s=128&g=1", "display_name": "MadzQuestioning", "link": "https://stackoverflow.com/users/4364847/madzquestioning"}, "reply_to_user": {"reputation": 1434, "user_id": 4991093, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8bda2dd45616408b698ae852a24c4f1d?s=128&d=identicon&r=PG&f=1", "display_name": "Furhan S.", "link": "https://stackoverflow.com/users/4991093/furhan-s"}, "edited": false, "score": 0, "creation_date": 1514409137, "post_id": 47998646, "comment_id": 82965731, "body": "@FurhanS. there are no output."}, {"owner": {"reputation": 1928, "user_id": 4364847, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/pcepW.png?s=128&g=1", "display_name": "MadzQuestioning", "link": "https://stackoverflow.com/users/4364847/madzquestioning"}, "reply_to_user": {"reputation": 17034, "user_id": 858913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b5015a60c08feee1d8116be3dd70878d?s=128&d=identicon&r=PG", "display_name": "eLRuLL", "link": "https://stackoverflow.com/users/858913/elrull"}, "edited": false, "score": 0, "creation_date": 1514409183, "post_id": 47998646, "comment_id": 82965749, "body": "@eLRuLL probably you&#39;re right. I tried running docker-compose and mysql client is being installed properly not sure why pip3 freeze won&#39;t install it"}, {"owner": {"reputation": 1434, "user_id": 4991093, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8bda2dd45616408b698ae852a24c4f1d?s=128&d=identicon&r=PG&f=1", "display_name": "Furhan S.", "link": "https://stackoverflow.com/users/4991093/furhan-s"}, "edited": false, "score": 0, "creation_date": 1514409511, "post_id": 47998646, "comment_id": 82965868, "body": "what system are you on? centos or debian or mac?"}, {"owner": {"reputation": 242, "user_id": 4613313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rbSLW.jpg?s=128&g=1", "display_name": "PekosoG", "link": "https://stackoverflow.com/users/4613313/pekosog"}, "edited": false, "score": 0, "creation_date": 1514409552, "post_id": 47998646, "comment_id": 82965884, "body": "but are you running that command inside your docker container? or on your development machine?"}, {"owner": {"reputation": 1928, "user_id": 4364847, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/pcepW.png?s=128&g=1", "display_name": "MadzQuestioning", "link": "https://stackoverflow.com/users/4364847/madzquestioning"}, "reply_to_user": {"reputation": 1434, "user_id": 4991093, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8bda2dd45616408b698ae852a24c4f1d?s=128&d=identicon&r=PG&f=1", "display_name": "Furhan S.", "link": "https://stackoverflow.com/users/4991093/furhan-s"}, "edited": false, "score": 0, "creation_date": 1514409659, "post_id": 47998646, "comment_id": 82965929, "body": "@FurhanS. I&#39;m running on mac but command of mysql is being run inside my docker container"}, {"owner": {"reputation": 1928, "user_id": 4364847, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/pcepW.png?s=128&g=1", "display_name": "MadzQuestioning", "link": "https://stackoverflow.com/users/4364847/madzquestioning"}, "reply_to_user": {"reputation": 242, "user_id": 4613313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rbSLW.jpg?s=128&g=1", "display_name": "PekosoG", "link": "https://stackoverflow.com/users/4613313/pekosog"}, "edited": false, "score": 0, "creation_date": 1514409680, "post_id": 47998646, "comment_id": 82965938, "body": "@PekosoG I&#39;m running it inside my docker container. I&#39;m not sure what OS is it"}, {"owner": {"reputation": 242, "user_id": 4613313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rbSLW.jpg?s=128&g=1", "display_name": "PekosoG", "link": "https://stackoverflow.com/users/4613313/pekosog"}, "edited": false, "score": 1, "creation_date": 1514409750, "post_id": 47998646, "comment_id": 82965963, "body": "@MadzmarUllang which image are you importing from DockerHub? how does your Dockerfile looks like?"}, {"owner": {"reputation": 1928, "user_id": 4364847, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/pcepW.png?s=128&g=1", "display_name": "MadzQuestioning", "link": "https://stackoverflow.com/users/4364847/madzquestioning"}, "reply_to_user": {"reputation": 242, "user_id": 4613313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rbSLW.jpg?s=128&g=1", "display_name": "PekosoG", "link": "https://stackoverflow.com/users/4613313/pekosog"}, "edited": false, "score": 0, "creation_date": 1514410138, "post_id": 47998646, "comment_id": 82966103, "body": "@PekosoG updated my question"}, {"owner": {"reputation": 242, "user_id": 4613313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rbSLW.jpg?s=128&g=1", "display_name": "PekosoG", "link": "https://stackoverflow.com/users/4613313/pekosog"}, "edited": false, "score": 0, "creation_date": 1514410333, "post_id": 47998646, "comment_id": 82966175, "body": "@MadzmarUllang there&#39;s the problem, you are using a Python image, not a MySQL.... The confusion here is that you are installing mysqlclient but that only the library/ORM that will allow you to connect from Python to a MySQL Server, that&#39;s not a MySQL Database Engine"}, {"owner": {"reputation": 1928, "user_id": 4364847, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/pcepW.png?s=128&g=1", "display_name": "MadzQuestioning", "link": "https://stackoverflow.com/users/4364847/madzquestioning"}, "reply_to_user": {"reputation": 242, "user_id": 4613313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rbSLW.jpg?s=128&g=1", "display_name": "PekosoG", "link": "https://stackoverflow.com/users/4613313/pekosog"}, "edited": false, "score": 0, "creation_date": 1514410461, "post_id": 47998646, "comment_id": 82966222, "body": "@PekosoG I have my mysql instance in a separate container as mentioned on my question above. When trying to PING inside the python container to the mysql container I get a response back meaning connection successful. I just need to connect from my python container to the mysql container but I can&#39;t do that because mysql-client is not found"}, {"owner": {"reputation": 242, "user_id": 4613313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rbSLW.jpg?s=128&g=1", "display_name": "PekosoG", "link": "https://stackoverflow.com/users/4613313/pekosog"}, "edited": false, "score": 1, "creation_date": 1514410748, "post_id": 47998646, "comment_id": 82966315, "body": "@MadzmarUllang i understand, but again, that mysqlclient library is only for Python using PIP, what you would need to do is install the actual MySQL client binaries directly to your container in order to use the bash command &quot;mysql&quot; BUT there&#39;s something, do you have exposed the port on the MySQL Container or will they both live inside a docker-compose network? You need to set that up before trying to connect"}, {"owner": {"reputation": 1928, "user_id": 4364847, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/pcepW.png?s=128&g=1", "display_name": "MadzQuestioning", "link": "https://stackoverflow.com/users/4364847/madzquestioning"}, "reply_to_user": {"reputation": 242, "user_id": 4613313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rbSLW.jpg?s=128&g=1", "display_name": "PekosoG", "link": "https://stackoverflow.com/users/4613313/pekosog"}, "edited": false, "score": 0, "creation_date": 1514411140, "post_id": 47998646, "comment_id": 82966460, "body": "@PekosoG yup I exposed it with the mysql default port."}, {"owner": {"reputation": 242, "user_id": 4613313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rbSLW.jpg?s=128&g=1", "display_name": "PekosoG", "link": "https://stackoverflow.com/users/4613313/pekosog"}, "edited": false, "score": 1, "creation_date": 1514411376, "post_id": 47998646, "comment_id": 82966551, "body": "@MadzmarUllang then, in your dockerfile try add this line &quot;RUN apt-get update &amp;&amp; apt-get install -y mysql-client&quot;, once the container is running, get inside and try to connect using &quot;&gt; mysql -p -h &lt;mysql-container&gt;&quot;"}, {"owner": {"reputation": 1928, "user_id": 4364847, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/pcepW.png?s=128&g=1", "display_name": "MadzQuestioning", "link": "https://stackoverflow.com/users/4364847/madzquestioning"}, "reply_to_user": {"reputation": 242, "user_id": 4613313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rbSLW.jpg?s=128&g=1", "display_name": "PekosoG", "link": "https://stackoverflow.com/users/4613313/pekosog"}, "edited": false, "score": 0, "creation_date": 1514412267, "post_id": 47998646, "comment_id": 82966803, "body": "@PekosoG yeah it works but I&#39;m receiving Can&#39;t connect to local MySQL server through socket &#39;/var/run/mysqld/mysqld.sock&#39; when I navigate to that folder it does not exist"}, {"owner": {"reputation": 242, "user_id": 4613313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rbSLW.jpg?s=128&g=1", "display_name": "PekosoG", "link": "https://stackoverflow.com/users/4613313/pekosog"}, "reply_to_user": {"reputation": 1928, "user_id": 4364847, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/pcepW.png?s=128&g=1", "display_name": "MadzQuestioning", "link": "https://stackoverflow.com/users/4364847/madzquestioning"}, "edited": false, "score": 0, "creation_date": 1514412299, "post_id": 47998646, "comment_id": 82966814, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/162055/discussion-between-pekosog-and-madzmar-ullang\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 1857, "user_id": 1366989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c67512f4b6b2137fa70111e66ceb76a?s=128&d=identicon&r=PG", "display_name": "MrName", "link": "https://stackoverflow.com/users/1366989/mrname"}, "is_accepted": false, "score": 0, "last_activity_date": 1514420660, "creation_date": 1514420660, "answer_id": 48000168, "question_id": 47998646, "link": "https://stackoverflow.com/questions/47998646/cant-connect-from-docker-using-mysqlclient/48000168#48000168", "title": "Can&#39;t connect from docker using mysqlclient", "body": "<p>The problem here is that the CLI command <code>mysql</code> is not installed on your HOST machine. It is most likely installed inside your docker container however. As one of the comments pointed out, the <code>mysqlclient</code> you installed with <code>pip</code> would NOT install the <code>mysql</code> command line tool.</p>\n\n<p>As a quick workaround, I would suggest running the <code>mysql</code> command INSIDE your mysql container, like so:</p>\n\n<pre><code>docker exec -it &lt;container id&gt; mysql -u root -h localhost -p\n</code></pre>\n"}], "owner": {"reputation": 1928, "user_id": 4364847, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/pcepW.png?s=128&g=1", "display_name": "MadzQuestioning", "link": "https://stackoverflow.com/users/4364847/madzquestioning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 371, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1514420660, "creation_date": 1514408777, "last_edit_date": 1514410114, "question_id": 47998646, "link": "https://stackoverflow.com/questions/47998646/cant-connect-from-docker-using-mysqlclient", "title": "Can&#39;t connect from docker using mysqlclient", "body": "<p>I'm trying to connect to my mysql container but whenever I try to run <code>mysql -uroot -p</code> I always get <code>bash: mysql: command not found</code> but mysql is already installed in the docker container when I try to run <code>pip3 freeze</code> I get this result</p>\n\n<pre><code>alembic==0.9.6\nappdirs==1.4.3\nbcrypt==3.1.4\ncertifi==2017.11.5\ncffi==1.11.2\nchardet==3.0.4\nclick==6.7\nelasticsearch==5.5.1\nflasgger==0.8.0\nFlask==0.12.2\nFlask-Cors==3.0.3\ngevent==1.2.2\ngreenlet==0.4.12\nidna==2.6\niso3166==0.8\nitsdangerous==0.24\nJinja2==2.10\njsonschema==2.6.0\nMako==1.0.7\nMarkupSafe==1.0\nmistune==0.8.3\nmock==2.0.0\nmysqlclient==1.3.12\npackaging==16.8\npbr==3.1.1\npybuilder==0.11.12\npycparser==2.18\npycrypto==2.6.1\npyparsing==2.2.0\npython-dateutil==2.6.1\npython-editor==1.0.3\nPyYAML==3.12\nredis==2.10.6\nrequests==2.18.4\nsix==1.11.0\nSQLAlchemy==1.2.0\ntblib==1.3.2\nujson==1.35\nurllib3==1.21.1\nvalidate-email==1.3\nWerkzeug==0.13\n</code></pre>\n\n<p>As you can see mysqlclient is installed. If I try to check if mysql container is accessible inside my docker using ping. It's working properly and I was able to get a response. How do I connect now since it says <code>bash: mysql: command not found</code></p>\n\n<p>-- UPDATE --</p>\n\n<p>After running docker run I connected inside the docker container and run <code>pip install --no-cache-dir -r requirements.txt</code> and below is the output</p>\n\n<p><a href=\"https://i.stack.imgur.com/glBXh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/glBXh.png\" alt=\"enter image description here\"></a></p>\n\n<p>Now it says requirement already satisfied. I'm not sure but does this mean it already installed the package? Below is my dockerfile</p>\n\n<pre><code>FROM python:3.5.2\nADD deployment /root/.ssh\nRUN chmod 700 /root/.ssh/id_rsa\nRUN ssh-keyscan -t rsa bitbucket.org &gt; /root/.ssh/known_hosts\nRUN mkdir -p /app\nADD . /app\nWORKDIR /app\nRUN pip install --no-cache-dir -r requirements.txt\nWORKDIR /app/myproject\nCMD [\"python\", \"./init.py\", \"-c\", \"config/config.yaml\"]\n</code></pre>\n"}, {"tags": ["python", "numpy", "geometry"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1514409407, "post_id": 47998640, "comment_id": 82965829, "body": "Does 5/8th has to follow on 3/8? There is a known algorithm to generate a sequence with 1/2, 1/4, 3/4, 1/8, 5/8, 3/8, 7/8, 1/16, etc. This is considered as a good way for pseudo-Monte Carlo integration."}, {"owner": {"reputation": 648, "user_id": 592678, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4ab2f9dc2982ee6a13573fc02d5f2c2?s=128&d=identicon&r=PG", "display_name": "Teknophilia", "link": "https://stackoverflow.com/users/592678/teknophilia"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1514409982, "post_id": 47998640, "comment_id": 82966041, "body": "@WillemVanOnsem, yes I believe this is something called the &quot;Lost Cow Algorithm&quot;? Generating the points 3/8, 4/8, 5/8 would be simpler, but would have redundant points. This could be easily solved by checking against a set, but if there is a way to not generate redundant points in the first place - assuming that this is faster than using a set - that would be best."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1514410077, "post_id": 47998640, "comment_id": 82966081, "body": "no, the above set does not contain duplicates. It is only when the denominator changes that the <i>order</i> of the values is not incrementing. But it generates the same points without duplicates."}], "answers": [{"comments": [{"owner": {"reputation": 648, "user_id": 592678, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4ab2f9dc2982ee6a13573fc02d5f2c2?s=128&d=identicon&r=PG", "display_name": "Teknophilia", "link": "https://stackoverflow.com/users/592678/teknophilia"}, "edited": false, "score": 0, "creation_date": 1514411433, "post_id": 47998788, "comment_id": 82966570, "body": "That is exactly what I&#39;m looking for. Now I see that I forgot to double the denominator within the loop. Many thanks!"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 4, "last_activity_date": 1514411036, "last_edit_date": 1514411036, "creation_date": 1514409701, "answer_id": 47998788, "question_id": 47998640, "link": "https://stackoverflow.com/questions/47998640/back-and-forth-linspace-generator/47998788#47998788", "title": "Back-and-Forth Linspace Generator", "body": "<p>A way to achieve this is by using:</p>\n\n<pre><code>def infinite_linspace():\n    den = 2\n    while True:\n        for i in range(1,den,2):\n            yield i/den\n        den &lt;&lt;= 1\n</code></pre>\n\n<p>Here we thus iterate with the <em>numerator</em> from 1 to <code>den-1</code> (inclusive), and then double the <em>denominator</em>.</p>\n\n<p>The first 15 numbers are then:</p>\n\n<pre><code>&gt;&gt;&gt; list(islice(infinite_linspace(), 15))\n[0.5, 0.25, 0.75, 0.125, 0.375, 0.625, 0.875, 0.0625, 0.1875, 0.3125, 0.4375, 0.5625, 0.6875, 0.8125, 0.9375]\n&gt;&gt;&gt; [1/2,1/4,3/4,1/8,3/8,5/8,7/8,1/16,3/16,5/16,7/16,9/16,11/16,13/16,15/16]\n[0.5, 0.25, 0.75, 0.125, 0.375, 0.625, 0.875, 0.0625, 0.1875, 0.3125, 0.4375, 0.5625, 0.6875, 0.8125, 0.9375]\n</code></pre>\n\n<p>We can even put more intelligence into it to obtain the <em>i</em>-th element relatively fast as well:</p>\n\n<pre><code>class Linspace:\n\n    def __iter__(self):\n        den = 2\n        while True:\n            for i in range(1,den,2):\n                yield i/den\n            den &lt;&lt;= 1\n\n    def __getitem__(self, idx):\n        if not isinstance(idx, int):\n            raise TypeError('idx should be an integer')\n        if idx &lt; 0:\n            raise ValueError('idx should be positive')\n        den = denn = idx+1\n        denn |= den &gt;&gt; 1\n        while den != denn:\n            den = denn\n            denn |= denn &gt;&gt; 1\n        denn += 1\n        return (2*idx+3-denn)/denn\n</code></pre>\n\n<p>So now we can access in logarithmic time for instance the 10-th, 15-th and 123'456-th element:</p>\n\n<pre><code>&gt;&gt;&gt; l = Linspace()\n&gt;&gt;&gt; l[9]\n0.3125\n&gt;&gt;&gt; l[14]\n0.9375\n&gt;&gt;&gt; l[123455]\n0.8837966918945312\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": false, "score": 1, "last_activity_date": 1514414137, "creation_date": 1514414137, "answer_id": 47999417, "question_id": 47998640, "link": "https://stackoverflow.com/questions/47998640/back-and-forth-linspace-generator/47999417#47999417", "title": "Back-and-Forth Linspace Generator", "body": "<p>Here is a shorter, pseudo O(1) way of directly computing the i-th element:</p>\n\n<pre><code>def jumpy(i):\n    i = (i&lt;&lt;1) + 3\n    return i / (1&lt;&lt;i.bit_length()-1) - 1\n\nlist(map(jumpy, range(15)))\n# [0.5, 0.25, 0.75, 0.125, 0.375, 0.625, 0.875, 0.0625, 0.1875, 0.3125, 0.4375, 0.5625, 0.6875, 0.8125, 0.9375]\n</code></pre>\n"}], "owner": {"reputation": 648, "user_id": 592678, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4ab2f9dc2982ee6a13573fc02d5f2c2?s=128&d=identicon&r=PG", "display_name": "Teknophilia", "link": "https://stackoverflow.com/users/592678/teknophilia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 1, "accepted_answer_id": 47998788, "answer_count": 2, "score": 1, "last_activity_date": 1514414137, "creation_date": 1514408737, "question_id": 47998640, "link": "https://stackoverflow.com/questions/47998640/back-and-forth-linspace-generator", "title": "Back-and-Forth Linspace Generator", "body": "<p>I'm looking to have a generator function that returns points along a line, given a minimum-distance <code>k</code>. This is simple enough, and can be done with numpy as follows:</p>\n\n<pre><code>points = np.linspace(start, end, k)\n</code></pre>\n\n<p>However, I would like to generate the points as a sort of \"increasing resolution\", so that on a line from 0 to 1, the generator would yield:</p>\n\n<pre><code>1/2, 1/4, 3/4, 1/8, 3/8, 5/8, ...\n</code></pre>\n\n<p>Again, this is easy enough to do recursively (just accept the endpoints and call self on each half), but I'd like a generator that can achieve the same thing without having to fill an array with everything from the start, and without duplicate points.</p>\n\n<p>What would be the best way to do this?</p>\n"}, {"tags": ["python", "json", "unicode"], "comments": [{"owner": {"reputation": 4539, "user_id": 1698431, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/lpYwg.png?s=128&g=1", "display_name": "lenz", "link": "https://stackoverflow.com/users/1698431/lenz"}, "edited": false, "score": 0, "creation_date": 1514410010, "post_id": 47998634, "comment_id": 82966057, "body": "What is <code>f</code>? The std-lib <code>json</code> module doesn&#39;t have a method <code>chunks</code>, as far as I can see."}, {"owner": {"reputation": 4539, "user_id": 1698431, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/lpYwg.png?s=128&g=1", "display_name": "lenz", "link": "https://stackoverflow.com/users/1698431/lenz"}, "edited": false, "score": 0, "creation_date": 1514410193, "post_id": 47998634, "comment_id": 82966128, "body": "<code>json.dump</code> and friends work generate <code>str</code> data, so you need to open output files in text mode (&quot;wt&quot;). Also, <code>json.dump</code> has a parameter <code>ensure_ascii</code>, which might be of help."}, {"owner": {"reputation": 21, "user_id": 374592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/605006a908f0e17f2eee65e91dda7a27?s=128&d=identicon&r=PG", "display_name": "Daniel Jewett", "link": "https://stackoverflow.com/users/374592/daniel-jewett"}, "reply_to_user": {"reputation": 4539, "user_id": 1698431, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/lpYwg.png?s=128&g=1", "display_name": "lenz", "link": "https://stackoverflow.com/users/1698431/lenz"}, "edited": false, "score": 0, "creation_date": 1514420364, "post_id": 47998634, "comment_id": 82968789, "body": "@lenz &#39;f&#39; is the variable I used for the &#39;in memory&#39; file I&#39;m writing to disk. I should probably change that for clarity."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 374592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/605006a908f0e17f2eee65e91dda7a27?s=128&d=identicon&r=PG", "display_name": "Daniel Jewett", "link": "https://stackoverflow.com/users/374592/daniel-jewett"}, "edited": false, "score": 1, "creation_date": 1514420225, "post_id": 47998836, "comment_id": 82968752, "body": "It turns out that the issue is not with the content of the JSON file but with the characters in the file name I&#39;m uploading. I&#39;ll have to see what I can do about that next."}, {"owner": {"reputation": 4539, "user_id": 1698431, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/lpYwg.png?s=128&g=1", "display_name": "lenz", "link": "https://stackoverflow.com/users/1698431/lenz"}, "reply_to_user": {"reputation": 21, "user_id": 374592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/605006a908f0e17f2eee65e91dda7a27?s=128&d=identicon&r=PG", "display_name": "Daniel Jewett", "link": "https://stackoverflow.com/users/374592/daniel-jewett"}, "edited": false, "score": 0, "creation_date": 1514449746, "post_id": 47998836, "comment_id": 82976222, "body": "@DanielJewett if the problem is unrelated to this answer, why did you accept it? You should update your question, or maybe even replace it with a new one."}], "tags": [], "owner": {"reputation": 14111, "user_id": 289011, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7fabc4413849953957908f8690c2c24c?s=128&d=identicon&r=PG", "display_name": "BorrajaX", "link": "https://stackoverflow.com/users/289011/borrajax"}, "is_accepted": false, "score": 0, "last_activity_date": 1514409991, "creation_date": 1514409991, "answer_id": 47998836, "question_id": 47998634, "link": "https://stackoverflow.com/questions/47998634/unicode-issue-trying-to-process-json-file/47998836#47998836", "title": "Unicode issue trying to process JSON file", "body": "<p>I found <em>inspiration</em> in this <a href=\"https://stackoverflow.com/a/35086151/289011\">other answer</a>. Maybe it'll help? I believe the idea is having a consistent encoding when both writing and reading the file:</p>\n\n<p>As you can see, I took the liberty of adding a bunch of more \"problematic\" characters in the Json string (the \"album\" attribute)</p>\n\n<pre><code>json_str = \"\"\"{\n    \"album\": \"\u00d1\u00edght H\u00e5wk \u4f60\u597d\",\n    \"album_artist\": \"Coleman Hawkins with Eddie \\u201cLockjaw\\u201d Davis\",\n    \"artist\": \"Coleman Hawkins with Eddie \\u201cLockjaw\\u201d Davis\",\n    \"bitrate\": 744\n}\"\"\"\n\n\nimport json\nimport tempfile\nimport os\n\nprint(json.loads(json_str))  # Just double checking\npath = os.path.join(tempfile.gettempdir(), 'foo.txt')\n\nwith open(path, 'w+', encoding='utf-8') as destination:\n    # The encoding= is the important part\n    destination.write(json_str)\n\nwith open(path, 'r+', encoding='utf-8') as source:\n    # The encoding= is the important part\n    print(json.loads(source.read()))\n</code></pre>\n\n<p>This seems to output a properly parsed dictionary:</p>\n\n<pre><code>{'album_artist': 'Coleman Hawkins with Eddie \u201cLockjaw\u201d Davis', 'artist': 'Coleman Hawkins with Eddie \u201cLockjaw\u201d Davis', 'album': '\u00d1\u00edght H\u00e5wk \u4f60\u597d', 'bitrate': 744}\npath=/tmp/foo.txt\n{'album_artist': 'Coleman Hawkins with Eddie \u201cLockjaw\u201d Davis', 'artist': 'Coleman Hawkins with Eddie \u201cLockjaw\u201d Davis', 'album': '\u00d1\u00edght H\u00e5wk \u4f60\u597d', 'bitrate': 744}\n</code></pre>\n\n<p>However, this output also depends on the terminal's configuration so I'm not 100% sure it will work in your case. I'm using Python 3.5.1 For Python 2.6.x you should use the <a href=\"https://docs.python.org/2.6/library/io.html\" rel=\"nofollow noreferrer\"><code>io</code></a> library</p>\n"}], "owner": {"reputation": 21, "user_id": 374592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/605006a908f0e17f2eee65e91dda7a27?s=128&d=identicon&r=PG", "display_name": "Daniel Jewett", "link": "https://stackoverflow.com/users/374592/daniel-jewett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1514409991, "creation_date": 1514408620, "question_id": 47998634, "link": "https://stackoverflow.com/questions/47998634/unicode-issue-trying-to-process-json-file", "title": "Unicode issue trying to process JSON file", "body": "<p>I have a python script which writes JSON to a file with content that looks like this:</p>\n\n<pre><code>{\n    \"album\": \"Night Hawk\",\n    \"album_artist\": \"Coleman Hawkins with Eddie \\u201cLockjaw\\u201d Davis\",\n    \"artist\": \"Coleman Hawkins with Eddie \\u201cLockjaw\\u201d Davis\",\n    \"bitrate\": 744,\n    ...\n}\n</code></pre>\n\n<p>The file is uploaded to the server and processed with this:</p>\n\n<pre><code>with open(settings.JSON_UPLOAD_DIRECTORY + f.name, 'wb+') as destination:\n    for chunk in f.chunks():\n        destination.write(chunk)\n</code></pre>\n\n<p>This works without error on my MacOS development server. It has also worked for processing several thousands of files on my deployment server until now. Of a sudden I'm getting this error:</p>\n\n<pre><code>22.     with open(settings.JSON_UPLOAD_DIRECTORY + f.name, 'wb+') as destination:\n\nException Value: 'ascii' codec can't encode character '\\u201c' in position 81: ordinal not in range(128)\n</code></pre>\n\n<p>I've read other posts about this here without coming to an understanding of what I'm doing wrong. I'm running Python3.6. My question is, do I need to adjust the statement that opens the in memory file for writing, or is there a problem with the encoding of the JSON file itself.</p>\n"}, {"tags": ["python", "security", "cryptography", "smartcard", "pkcs#11"], "comments": [{"owner": {"reputation": 14111, "user_id": 289011, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7fabc4413849953957908f8690c2c24c?s=128&d=identicon&r=PG", "display_name": "BorrajaX", "link": "https://stackoverflow.com/users/289011/borrajax"}, "edited": false, "score": 0, "creation_date": 1514408381, "post_id": 47998565, "comment_id": 82965492, "body": "I have no idea really, but the examples I&#39;ve seen on a quick glance to the docs seem to be using strings... Have you tried without casting <code>&quot;1234&quot;</code> to bytes (just do <code>token.open(user_pin=&#39;1234&#39;)</code> ) ?"}, {"owner": {"reputation": 191, "user_id": 9146521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99e915524d19ab17975308d2a3893610?s=128&d=identicon&r=PG&f=1", "display_name": "imll", "link": "https://stackoverflow.com/users/9146521/imll"}, "reply_to_user": {"reputation": 14111, "user_id": 289011, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7fabc4413849953957908f8690c2c24c?s=128&d=identicon&r=PG", "display_name": "BorrajaX", "link": "https://stackoverflow.com/users/289011/borrajax"}, "edited": false, "score": 0, "creation_date": 1514408829, "post_id": 47998565, "comment_id": 82965630, "body": "Yes, I have tried that. Please, take a look on the edit I made on the question"}, {"owner": {"reputation": 14111, "user_id": 289011, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7fabc4413849953957908f8690c2c24c?s=128&d=identicon&r=PG", "display_name": "BorrajaX", "link": "https://stackoverflow.com/users/289011/borrajax"}, "edited": false, "score": 0, "creation_date": 1514409031, "post_id": 47998565, "comment_id": 82965700, "body": "I insist: I have no idea about PKCS11 in Python, but that <code>UserPinNotInitialized</code> seems to point to... something not initialized?  Have you seen this: <a href=\"http://python-pkcs11.readthedocs.io/en/latest/api.html#pkcs11.lib\" rel=\"nofollow noreferrer\">python-pkcs11.readthedocs.io/en/latest/api.html#pkcs11.lib</a> ? It seems to be <i>initializing</i>...something?"}, {"owner": {"reputation": 191, "user_id": 9146521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99e915524d19ab17975308d2a3893610?s=128&d=identicon&r=PG&f=1", "display_name": "imll", "link": "https://stackoverflow.com/users/9146521/imll"}, "reply_to_user": {"reputation": 14111, "user_id": 289011, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7fabc4413849953957908f8690c2c24c?s=128&d=identicon&r=PG", "display_name": "BorrajaX", "link": "https://stackoverflow.com/users/289011/borrajax"}, "edited": false, "score": 1, "creation_date": 1514412106, "post_id": 47998565, "comment_id": 82966765, "body": "Yes, I have already read the whole documentation. I really don&#39;t know what I am missing. Thank you for the help, anyway"}, {"owner": {"reputation": 4509, "user_id": 1435475, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bb5adb94461a2b72be1a84655487be80?s=128&d=identicon&r=PG", "display_name": "guidot", "link": "https://stackoverflow.com/users/1435475/guidot"}, "edited": false, "score": 0, "creation_date": 1515505445, "post_id": 47998565, "comment_id": 83318297, "body": "Is the card and especially the PIN usable by other applications? Otherwise the PIN might be still in the state, where it needs to be defined by the user."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11118987, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/f8e382147efd7c6a909e58a2e0369842?s=128&d=identicon&r=PG", "display_name": "S0C4", "link": "https://stackoverflow.com/users/11118987/s0c4"}, "is_accepted": false, "score": 0, "last_activity_date": 1551179673, "creation_date": 1551179673, "answer_id": 54884261, "question_id": 47998565, "link": "https://stackoverflow.com/questions/47998565/error-while-trying-to-establish-session-with-users-pin-smartcard/54884261#54884261", "title": "Error while trying to establish session with user&#39;s PIN (smartcard)", "body": "<p>You are missing the line:</p>\n\n<p><strong>token = lib.get_token(token_label='your token Label')</strong></p>\n\n<p>with token.open(user_pin=\"1234\") as session:\n    print(session</p>\n"}], "owner": {"reputation": 191, "user_id": 9146521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99e915524d19ab17975308d2a3893610?s=128&d=identicon&r=PG&f=1", "display_name": "imll", "link": "https://stackoverflow.com/users/9146521/imll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 279, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1565218401, "creation_date": 1514408194, "last_edit_date": 1514408789, "question_id": 47998565, "link": "https://stackoverflow.com/questions/47998565/error-while-trying-to-establish-session-with-users-pin-smartcard", "title": "Error while trying to establish session with user&#39;s PIN (smartcard)", "body": "<p>I'm using python-pkcs11 to access a smartcard I own.\nRight now, I was trying to create a session, so that I could retrieve the Public Key from the card. This is the code I was testing:</p>\n\n<pre><code>path = (...)\nos.environ[\"PKCS11 MODULE\"] = path\nlib = pkcs11.lib(os.environ['PKCS11 MODULE'])\n\npassword = bytes(\"1234\",\"utf-8\")\nprint(password)\n\nwith token.open(user_pin=password) as session:\n    print(session) \n</code></pre>\n\n<p>Everything looks good, until it reaches \"user_pin=password\". I get an error:</p>\n\n<pre><code>Traceback (most recent call last):\n    File \"acess.py\", line 46, in &lt;module&gt;\n    with token.open(user_pin=password) as session:\n    File \"pkcs11/_pkcs11.pyx\", line 227, in pkcs11._pkcs11.Token.open\n    AttributeError: 'bytes' object has no attribute 'encode'\n</code></pre>\n\n<p>In the documentation, it is said that the user_password must be in bytes, and that's what I'm doing. Can somebody help me?</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>When I test any of these 3 situations, I still get an error:</p>\n\n<pre><code>with token.open(user_pin='1234') as session:\n    print(session)\n\nwith token.open(user_pin=b\"1234\") as session:\n    print(session)\n\nwith token.open(user_pin=\"1234\") as session:\n    print(session)\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>Traceback (most recent call last):\n      File \"acess.py\", line 59, in &lt;module&gt;\n        with token.open(user_pin=\"1234\") as session:\n      File \"pkcs11/_pkcs11.pyx\", line 239, in pkcs11._pkcs11.Token.open\n      File \"pkcs11/_errors.pyx\", line 88, in pkcs11._pkcs11.assertRV\n        pkcs11.exceptions.UserPinNotInitialized\n</code></pre>\n"}, {"tags": ["python", "airflow", "apache-airflow"], "comments": [{"owner": {"reputation": 219, "user_id": 1912711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lluDd.jpg?s=128&g=1", "display_name": "listik", "link": "https://stackoverflow.com/users/1912711/listik"}, "edited": false, "score": 0, "creation_date": 1515152233, "post_id": 47998552, "comment_id": 83201164, "body": "tested this in my local and it worked; are you sure you got the files in the proper directory? could you be editing a tutorial.py file that it&#39;s not really in the dag folder? the path looks dodgy with the two &quot;airflow&quot;&#39;s there: <code>&#47;home&#47;airflow&#47;airflow&#47;dags&#47;tutorial.py</code>"}, {"owner": {"reputation": 2060, "user_id": 2197234, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/2aTcP.jpg?s=128&g=1", "display_name": "fildred13", "link": "https://stackoverflow.com/users/2197234/fildred13"}, "reply_to_user": {"reputation": 219, "user_id": 1912711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lluDd.jpg?s=128&g=1", "display_name": "listik", "link": "https://stackoverflow.com/users/1912711/listik"}, "edited": false, "score": 0, "creation_date": 1515175609, "post_id": 47998552, "comment_id": 83214349, "body": "I&#39;ve context switched off of this problem, but I&#39;ll try a totally fresh airflow install in a vm and try to replicate again when I get a chance. However I can confirm that <code>airflow</code> is the username and <code>airflow&#47;airflow</code> is the install dir, so at least that part is not the issue. I also can confirm just by <code>cd</code>ing into the dir that the directory structure is as posted in the question. But I&#39;ll do my due diligence and replicate the whole thing in an isolated environment since you are saying it works for you."}], "answers": [{"comments": [{"owner": {"reputation": 2060, "user_id": 2197234, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/2aTcP.jpg?s=128&g=1", "display_name": "fildred13", "link": "https://stackoverflow.com/users/2197234/fildred13"}, "edited": false, "score": 0, "creation_date": 1515456684, "post_id": 48154139, "comment_id": 83299161, "body": "Context switched out of this for the moment - will investigate this answer as soon as I can!"}, {"owner": {"reputation": 3061, "user_id": 3089468, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7f170f6ef0a458eb2fcb87231d4bc3ed?s=128&d=identicon&r=PG&f=1", "display_name": "moku", "link": "https://stackoverflow.com/users/3089468/moku"}, "edited": false, "score": 0, "creation_date": 1516905083, "post_id": 48154139, "comment_id": 83891983, "body": "I&#39;m having the same problem any fixes yet?"}, {"owner": {"reputation": 2060, "user_id": 2197234, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/2aTcP.jpg?s=128&g=1", "display_name": "fildred13", "link": "https://stackoverflow.com/users/2197234/fildred13"}, "reply_to_user": {"reputation": 3061, "user_id": 3089468, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7f170f6ef0a458eb2fcb87231d4bc3ed?s=128&d=identicon&r=PG&f=1", "display_name": "moku", "link": "https://stackoverflow.com/users/3089468/moku"}, "edited": false, "score": 0, "creation_date": 1523558368, "post_id": 48154139, "comment_id": 86622044, "body": "I handed off the airflow task to a coworker, so I won&#39;t get around to checking this answer yet. But this answer seems reasonable - have you tried it @moku ?"}, {"owner": {"reputation": 11979, "user_id": 101923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FVQn0.jpg?s=128&g=1", "display_name": "Tim Swast", "link": "https://stackoverflow.com/users/101923/tim-swast"}, "edited": false, "score": 0, "creation_date": 1532043883, "post_id": 48154139, "comment_id": 89837056, "body": "&quot;it want&#39;s to be able to reload it without restarting processes&quot; Couldn&#39;t Airflow use importlib.reload <a href=\"https://docs.python.org/3/library/importlib.html#importlib.reload\" rel=\"nofollow noreferrer\">docs.python.org/3/library/importlib.html#importlib.reload</a> if this were the only reason?"}, {"owner": {"reputation": 3305, "user_id": 439189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a37ac47f749d07e74b36ecb1866a8265?s=128&d=identicon&r=PG", "display_name": "Ash Berlin-Taylor", "link": "https://stackoverflow.com/users/439189/ash-berlin-taylor"}, "edited": false, "score": 0, "creation_date": 1535013919, "post_id": 48154139, "comment_id": 90913019, "body": "It could, but that wouldn&#39;t help with deps/imported libs. There are other reasons too (like sys.exit, or worse case a segfault in one dag shouldn&#39;t bring down the scheduler, and it uses multiple parallel processes to improve performance)"}, {"owner": {"reputation": 5166, "user_id": 6077549, "user_type": "registered", "accept_rate": 5, "profile_image": "https://i.stack.imgur.com/WiL4J.png?s=128&g=1", "display_name": "alltej", "link": "https://stackoverflow.com/users/6077549/alltej"}, "edited": false, "score": 1, "creation_date": 1571200519, "post_id": 48154139, "comment_id": 103156027, "body": "@AshBerlin-Taylor This seems to be an issue still with 1.10.2."}, {"owner": {"reputation": 5166, "user_id": 6077549, "user_type": "registered", "accept_rate": 5, "profile_image": "https://i.stack.imgur.com/WiL4J.png?s=128&g=1", "display_name": "alltej", "link": "https://stackoverflow.com/users/6077549/alltej"}, "edited": false, "score": 2, "creation_date": 1571239587, "post_id": 48154139, "comment_id": 103176470, "body": "exporting the <code>PYTHONPATH</code> did not work also. I am using 1.10.2"}, {"owner": {"reputation": 139, "user_id": 6818597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5480fd179ce19291a8b36644be02155?s=128&d=identicon&r=PG&f=1", "display_name": "neilharia7", "link": "https://stackoverflow.com/users/6818597/neilharia7"}, "edited": false, "score": 5, "creation_date": 1593014352, "post_id": 48154139, "comment_id": 110633130, "body": "It there any other workaround? The issue still persists in version 1.10.10"}, {"owner": {"reputation": 85, "user_id": 8089185, "user_type": "registered", "profile_image": "https://graph.facebook.com/1337316766315535/picture?type=large", "display_name": "Mehdi Hadji", "link": "https://stackoverflow.com/users/8089185/mehdi-hadji"}, "edited": false, "score": 0, "creation_date": 1617292864, "post_id": 48154139, "comment_id": 118269964, "body": "&quot;The issue still persists in version 1.10.12&quot;"}, {"owner": {"reputation": 85, "user_id": 8089185, "user_type": "registered", "profile_image": "https://graph.facebook.com/1337316766315535/picture?type=large", "display_name": "Mehdi Hadji", "link": "https://stackoverflow.com/users/8089185/mehdi-hadji"}, "edited": false, "score": 0, "creation_date": 1617293228, "post_id": 48154139, "comment_id": 118270121, "body": "what do you mean by startup scripts ? and init scripts ?"}], "tags": [], "owner": {"reputation": 3305, "user_id": 439189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a37ac47f749d07e74b36ecb1866a8265?s=128&d=identicon&r=PG", "display_name": "Ash Berlin-Taylor", "link": "https://stackoverflow.com/users/439189/ash-berlin-taylor"}, "is_accepted": false, "score": 9, "last_activity_date": 1515428400, "creation_date": 1515428400, "answer_id": 48154139, "question_id": 47998552, "link": "https://stackoverflow.com/questions/47998552/apache-airflow-dag-cannot-import-local-module/48154139#48154139", "title": "Apache Airflow DAG cannot import local module", "body": "<p>Are you using Airflow 1.9.0? This might be fixed there.</p>\n\n<p>The issue is caused by the way Airflow loads DAGs: it doesn't just import them as normal python modules, because it want's to be able to reload it without restarting processes. As a result <code>.</code> isn't in the python search path.</p>\n\n<p>If 1.9.0 doesn't fix this, the easiest change is to put <code>export PYTHONPATH=/home/airflow/airflow/:$PYTHONPATH</code> in the startup scripts. The exact format of that will depend on what you are using (systemd vs init scripts etc.)</p>\n"}, {"comments": [{"owner": {"reputation": 116, "user_id": 4281934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87f3327292fbf46baf7ded5d4f260ab1?s=128&d=identicon&r=PG&f=1", "display_name": "Phileas Fogg", "link": "https://stackoverflow.com/users/4281934/phileas-fogg"}, "edited": false, "score": 1, "creation_date": 1559635188, "post_id": 54100781, "comment_id": 99472862, "body": "Why do you use join()? This has worked for me instead:   import sys sys.path.insert(0,os.path.abspath(os.path.dirname(<b>file</b>)))"}, {"owner": {"reputation": 2985, "user_id": 8236733, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/40e76c497aa9e70c5bebe1ec8288400e?s=128&d=identicon&r=PG&f=1", "display_name": "lampShadesDrifter", "link": "https://stackoverflow.com/users/8236733/lampshadesdrifter"}, "reply_to_user": {"reputation": 5166, "user_id": 6077549, "user_type": "registered", "accept_rate": 5, "profile_image": "https://i.stack.imgur.com/WiL4J.png?s=128&g=1", "display_name": "alltej", "link": "https://stackoverflow.com/users/6077549/alltej"}, "edited": false, "score": 0, "creation_date": 1571271273, "post_id": 54100781, "comment_id": 103188558, "body": "@alltej The dag file itself, I think. Has worked for me before, though am currently seeing some weirdness trying in another dag right now (<a href=\"https://stackoverflow.com/q/58423137/8236733\">stackoverflow.com/q/58423137/8236733</a>)"}, {"owner": {"reputation": 1107, "user_id": 3955438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/076351be18e9ecd9e5af894cbfca298e?s=128&d=identicon&r=PG&f=1", "display_name": "viru", "link": "https://stackoverflow.com/users/3955438/viru"}, "edited": false, "score": 0, "creation_date": 1571370044, "post_id": 54100781, "comment_id": 103226173, "body": "Yes - this is in the DAG Python file. Works till day for me."}, {"owner": {"reputation": 2060, "user_id": 2197234, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/2aTcP.jpg?s=128&g=1", "display_name": "fildred13", "link": "https://stackoverflow.com/users/2197234/fildred13"}, "edited": false, "score": 0, "creation_date": 1594227146, "post_id": 54100781, "comment_id": 111054925, "body": "We&#39;ve stopped using airflow, so I cannot validate any of these answers. Based on the number of upvotes on this one after so much time, I&#39;m going to accept it as the correct answer."}, {"owner": {"reputation": 3766, "user_id": 4148856, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/24a6e44df97843cf87d97039313ca852?s=128&d=identicon&r=PG", "display_name": "greperror", "link": "https://stackoverflow.com/users/4148856/greperror"}, "edited": false, "score": 0, "creation_date": 1603526522, "post_id": 54100781, "comment_id": 114070207, "body": "where does this need to be added?"}, {"owner": {"reputation": 1107, "user_id": 3955438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/076351be18e9ecd9e5af894cbfca298e?s=128&d=identicon&r=PG&f=1", "display_name": "viru", "link": "https://stackoverflow.com/users/3955438/viru"}, "reply_to_user": {"reputation": 3766, "user_id": 4148856, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/24a6e44df97843cf87d97039313ca852?s=128&d=identicon&r=PG", "display_name": "greperror", "link": "https://stackoverflow.com/users/4148856/greperror"}, "edited": false, "score": 0, "creation_date": 1603740864, "post_id": 54100781, "comment_id": 114127030, "body": "@greperror - This needs to go along with the import blocks - typically before importing the local modules"}, {"owner": {"reputation": 537, "user_id": 6701520, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208341099860053/picture?type=large", "display_name": "Kevin S&#252;dmersen", "link": "https://stackoverflow.com/users/6701520/kevin-s%c3%bcdmersen"}, "edited": false, "score": 0, "creation_date": 1611071994, "post_id": 54100781, "comment_id": 116329601, "body": "If you don&#39;t like to put <code>import sys; sys.path.insert(0,os.path.abspath(os.path.dirname(__file__))&zwnj;&#8203;)</code> into you dag module, you can extend the PYTHONPATH environment variable with the return value of <code>os.path.abspath(os.path.dirname(__file__))</code>. In my case, using apache-airflow with docker, I put the following into my Dockerfile: <code>ENV PYTHONPATH &quot;${PYTHONPATH}:blablabla:&#47;opt&#47;project&quot;</code>. Apparently, my custom dag-helper module was located at <code>&#47;opt&#47;project</code> inside the airflow container. Extending the PYTHONPATH makes python look for my custom modules at <code>&#47;opt&#47;project</code> now too, whenever i import sth"}], "tags": [], "owner": {"reputation": 1107, "user_id": 3955438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/076351be18e9ecd9e5af894cbfca298e?s=128&d=identicon&r=PG&f=1", "display_name": "viru", "link": "https://stackoverflow.com/users/3955438/viru"}, "is_accepted": true, "score": 12, "last_activity_date": 1559764681, "last_edit_date": 1559764681, "creation_date": 1546987417, "answer_id": 54100781, "question_id": 47998552, "link": "https://stackoverflow.com/questions/47998552/apache-airflow-dag-cannot-import-local-module/54100781#54100781", "title": "Apache Airflow DAG cannot import local module", "body": "<p>Adding the sys path again worked for me,</p>\n\n<pre><code>import sys\nsys.path.insert(0,os.path.abspath(os.path.dirname(__file__)))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 147, "user_id": 6584566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44e75554f8d92abbc8cfaba8d5cc3e29?s=128&d=identicon&r=PG&f=1", "display_name": "Asher A", "link": "https://stackoverflow.com/users/6584566/asher-a"}, "is_accepted": false, "score": 0, "last_activity_date": 1599759546, "creation_date": 1599759546, "answer_id": 63835001, "question_id": 47998552, "link": "https://stackoverflow.com/questions/47998552/apache-airflow-dag-cannot-import-local-module/63835001#63835001", "title": "Apache Airflow DAG cannot import local module", "body": "<p>If you're working with git-sync and did not use at as an initContainer (only as a container or not at all) in kubernetes, then it is possible that the modules were not loaded into the webserver or scheduler.</p>\n"}], "owner": {"reputation": 2060, "user_id": 2197234, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/2aTcP.jpg?s=128&g=1", "display_name": "fildred13", "link": "https://stackoverflow.com/users/2197234/fildred13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23477, "favorite_count": 3, "accepted_answer_id": 54100781, "answer_count": 3, "score": 27, "last_activity_date": 1601897111, "creation_date": 1514408135, "question_id": 47998552, "link": "https://stackoverflow.com/questions/47998552/apache-airflow-dag-cannot-import-local-module", "title": "Apache Airflow DAG cannot import local module", "body": "<p>I do not seem to understand how to import modules into an apache airflow DAG definition file. I would want to do this to be able to create a library which makes declaring tasks with similar settings less verbose, for instance.</p>\n\n<p>Here is the simplest example I can think of that replicates the issue: I modified the airflow tutorial (<a href=\"https://airflow.apache.org/tutorial.html#recap\" rel=\"noreferrer\">https://airflow.apache.org/tutorial.html#recap</a>) to simply import a module and run a definition from that module. Like so:</p>\n\n<p>Directory structure:</p>\n\n<pre><code>- dags/\n-- __init__.py\n-- lib.py\n-- tutorial.py\n</code></pre>\n\n<p>tutorial.py:</p>\n\n<pre><code>\"\"\"\nCode that goes along with the Airflow located at:\nhttp://airflow.readthedocs.org/en/latest/tutorial.html\n\"\"\"\nfrom airflow import DAG\nfrom airflow.operators.bash_operator import BashOperator\nfrom datetime import datetime, timedelta\n\n# Here is my added import\nfrom lib import print_double\n\n# And my usage of the imported def\nprint_double(2)\n\n## -- snip, because this is just the tutorial code, \n## i.e., some standard DAG defintion stuff --\n</code></pre>\n\n<p><code>print_double</code> is just a simple def which multiplies whatever input you give it by 2, and prints the result, but obviously that doesn't even matter because this is an import issue.</p>\n\n<p>I am able to run <code>airflow test tutorial print_date 2015-06-01</code> as per the tutorial docs successfully - the dag runs, and moreover the print_double succeeds. <code>4</code> is printed to the console, as expected. All appears well.</p>\n\n<p>Then I go the web UI, and am greeted by <code>Broken DAG: [/home/airflow/airflow/dags/tutorial.py] No module named 'lib'</code>. Unpausing the dag and attempting a manual run using the UI causes a \"running\" status, but it never succeeds or fails. It just sits on \"running\" forever. I can queue up as many as I'd like, but they'll all just sit on \"running\" status.</p>\n\n<p>I've checked the airflow logs, and don't see any useful debug information there.</p>\n\n<p>So what am I missing?</p>\n"}, {"tags": ["python", "flask", "sqlalchemy", "flask-sqlalchemy"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 4, "creation_date": 1514408014, "post_id": 47998500, "comment_id": 82965365, "body": "Because SQLAlchemy keeps track of references. As long as the references are the same, it does not see any change hence it does not commit the difference."}, {"owner": {"reputation": 3072, "user_id": 6611672, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/fa3f99cc3070ae57d877e08f9564ed22?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Metz", "link": "https://stackoverflow.com/users/6611672/johnny-metz"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1514409662, "post_id": 47998500, "comment_id": 82965931, "body": "@WillemVanOnsem so I need to perform the workaround for all list manipulation operations, e.g. <code>append</code>, <code>remove</code>, <code>pop</code>, etc. because they will all retain the same reference?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1514409754, "post_id": 47998500, "comment_id": 82965965, "body": "correct. I faced the same problem when I implemented a JSON field: changes to the JSON field are not written back. A workaround is to assign a new dictionary instead."}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1514456296, "post_id": 47998500, "comment_id": 82979473, "body": "That, or use mutation tracking: <a href=\"http://docs.sqlalchemy.org/en/latest/orm/extensions/mutable.html\" rel=\"nofollow noreferrer\">docs.sqlalchemy.org/en/latest/orm/extensions/mutable.html</a>"}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1514460376, "post_id": 47998500, "comment_id": 82981404, "body": "This answer is pretty much what you need: <a href=\"https://stackoverflow.com/a/37317081/2681632\">stackoverflow.com/a/37317081/2681632</a>"}, {"owner": {"reputation": 2026, "user_id": 3287889, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/86ASR.png?s=128&g=1", "display_name": "blockwala", "link": "https://stackoverflow.com/users/3287889/blockwala"}, "edited": false, "score": 0, "creation_date": 1538392475, "post_id": 47998500, "comment_id": 92114434, "body": "Willem great answer"}], "owner": {"reputation": 3072, "user_id": 6611672, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/fa3f99cc3070ae57d877e08f9564ed22?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Metz", "link": "https://stackoverflow.com/users/6611672/johnny-metz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2148, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1596604752, "creation_date": 1514407821, "question_id": 47998500, "link": "https://stackoverflow.com/questions/47998500/flask-sqlalchemy-append-to-pickletype-doesnt-update", "title": "flask-sqlalchemy append to pickletype doesn&#39;t update", "body": "<p>I have the following flask-sqlalchemy table:</p>\n\n<pre><code>class Repo(db.Model):\n    id = db.Column(db.Integer, primary_key=True)\n    name = db.Column(db.String(50), nullable=False)\n    followers = db.Column(db.PickleType, nullable=False)\n    created_on = db.Column(db.DateTime, default=datetime.utcnow)\n    last_modified = db.Column(db.DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)\n</code></pre>\n\n<p>Let's say I make the following row and push it to the database:</p>\n\n<pre><code>repo = Repo(\n    name='My Repo',\n    followers=[\n        {'name': 'Johnny', 'id': 34752, 'views': 6},\n        {'name': 'Mike', 'id': 69241, 'views': 3}\n    ]\n)\ndb.session.add(repo)\ndb.session.commit()\n</code></pre>\n\n<p>If I want to change that row, I should be able to do the following; however, the database doesn't reflect the change.</p>\n\n<pre><code>repo.data.append({'name': 'Jessica', 'id': 12941, 'views': 12})\nprint(len(repo.data))\n# 3\ndb.session.commit()\nprint(len(repo.data))\n# 2\n</code></pre>\n\n<p>I've figured out the following workaround but I'd like to know why the original method doesn't work as expected.</p>\n\n<pre><code>data = list(repo.data)\ndata.append({'name': 'Jessica', 'id': 12941, 'views': 12})\nrepo.data = data\ndb.session.commit()\nprint(len(repo.data))\n# 3\n</code></pre>\n"}, {"tags": ["python", "c", "python-3.x", "module"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1514408508, "post_id": 47998489, "comment_id": 82965536, "body": "Sounds like you&#39;re running different code from what you posted. Try rebuilding it."}, {"owner": {"reputation": 103, "user_id": 7487361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c53bd9d413dbf8452d85c8f6dfe7ee0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilovescience", "link": "https://stackoverflow.com/users/7487361/ilovescience"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1514417918, "post_id": 47998489, "comment_id": 82968266, "body": "I did (see edit) but it still wont work"}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 7487361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c53bd9d413dbf8452d85c8f6dfe7ee0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilovescience", "link": "https://stackoverflow.com/users/7487361/ilovescience"}, "edited": false, "score": 0, "creation_date": 1514418438, "post_id": 47999889, "comment_id": 82968362, "body": "I cant f**ing belive it XD. Hours of debugging and then its this. Thank you very much for your help and sorry for potentially wasting your time."}, {"owner": {"reputation": 35962, "user_id": 1399279, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e2e566682f50d53a06a121d82f7ed8de?s=128&d=identicon&r=PG", "display_name": "SethMMorton", "link": "https://stackoverflow.com/users/1399279/sethmmorton"}, "reply_to_user": {"reputation": 103, "user_id": 7487361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c53bd9d413dbf8452d85c8f6dfe7ee0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilovescience", "link": "https://stackoverflow.com/users/7487361/ilovescience"}, "edited": false, "score": 1, "creation_date": 1514430818, "post_id": 47999889, "comment_id": 82970793, "body": "@Ilovescience I would recommend that you take a look at Cython.  These types of errors are essentially impossible to make with Cython, and you still get the benefits of your algorithm being written in C."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1514418166, "creation_date": 1514418166, "answer_id": 47999889, "question_id": 47998489, "link": "https://stackoverflow.com/questions/47998489/c-extension-for-python-not-working/47999889#47999889", "title": "C extension for Python not working", "body": "<p>You forgot to null-terminate your <code>module_methods</code>:</p>\n\n<pre><code>static PyMethodDef module_methods[] = {\n    { \"func\", (PyCFunction)module_func, METH_VARARGS, NULL },\n    {NULL}\n};\n</code></pre>\n\n<p>Python looks for a null entry to determine the end of a <code>PyMethodDef</code> array. Without the null terminator, Python doesn't know where the array ends, and it walks off the end of the array looking for more methods.</p>\n"}], "owner": {"reputation": 103, "user_id": 7487361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c53bd9d413dbf8452d85c8f6dfe7ee0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilovescience", "link": "https://stackoverflow.com/users/7487361/ilovescience"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 500, "favorite_count": 0, "accepted_answer_id": 47999889, "answer_count": 1, "score": 4, "last_activity_date": 1514418166, "creation_date": 1514407775, "last_edit_date": 1514417898, "question_id": 47998489, "link": "https://stackoverflow.com/questions/47998489/c-extension-for-python-not-working", "title": "C extension for Python not working", "body": "<p>The C extension installs fine (no warning and errors) but when I try to import it I get the following error: </p>\n\n<blockquote>\n  <p>File \"\", line 1, in  ValueError: module functions\n  cannot set METH_CLASS or METH_STATIC</p>\n</blockquote>\n\n<p>Here is the code, what could be the problem/what can I do to fix and avoid this error? Thank you very much in advance. \nEDIT: For some reason the compiler didnt show me all the warnings. I fixed the warnings and updated the code, but I still get the same error</p>\n\n<pre><code>#include&lt;math.h&gt;\n#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;time.h&gt;\n#include&lt;Python.h&gt;\n\n\nPyObject *makelist(unsigned int array[], size_t size) {\n    PyObject *l = PyList_New(size);\n    for (size_t i = 0; i != size; ++i) {\n        PyList_SET_ITEM(l, i, Py_BuildValue(\"i\", array[i]));\n    }\n    return l;\n}\n\nstatic PyObject *module_func(PyObject *self, PyObject *args) {\n    unsigned int n;\n\n    if (!PyArg_ParseTuple(args, \"i\", &amp;n)) {\n        return NULL;\n    }\n\n    const unsigned int size = n &gt;&gt; 3 + (n &amp; 15 ? 1 : 0);\n    const unsigned int arraySize = n &gt;&gt; 1;\n\n    char* bitArray = (char*)malloc(size);\n\n    for (unsigned int i = 0; i &lt; size; i++) {\n        *(bitArray + i) = 0b11111111;\n    }\n\n    int num;\n    for (unsigned int i = 1; i &lt;= ((unsigned int)sqrt(n)) &gt;&gt; 1; i++) {\n        int ni = i - 1;\n        if ((*(bitArray + (ni &gt;&gt; 3)) &gt;&gt; (ni &amp; 7)) &amp; 1) {\n            num = (i &lt;&lt; 1) | 1;\n            for (unsigned int j = num * num; j &lt;= n; j += num &lt;&lt; 1) {\n                *(bitArray + ((j - 3) &gt;&gt; 4)) &amp;= ~(1 &lt;&lt; (((j - 3) &gt;&gt; 1) &amp; 7));\n                // *(bitArray + ((((j - 1) &gt;&gt; 1) - 1) &gt;&gt; 3)) &amp;= ~(1 &lt;&lt; (((((j - 1) &gt;&gt; 1) - 1) &gt;&gt; 3) &amp; 7));\n            }\n        }\n    }\n\n    unsigned int* primes = (unsigned int*)malloc((arraySize * sizeof(int)));\n    *primes = 2;\n    int counter = 1;\n    for (unsigned int index = 1; index &lt; arraySize; index++) {\n        if ((*(bitArray + ((index - 1) &gt;&gt; 3)) &gt;&gt; ((index - 1) &amp; 7)) &amp; 1) {\n            *(primes + counter) = (index &lt;&lt; 1) | 1;\n            counter++;\n        }\n    }\n    *(primes + counter) = 0;\n    return Py_BuildValue(\"O\", makelist(primes, sizeof(primes)));\n}\n\nstatic PyMethodDef module_methods[] = {\n    { \"func\", (PyCFunction)module_func, METH_VARARGS, NULL }\n};\n\nstatic struct PyModuleDef func =\n{\n    PyModuleDef_HEAD_INIT,\n    \"module\",\n    \"Null\",\n    -1,\n    module_methods\n};\n\nPyMODINIT_FUNC PyInit_func(void) {\n    return PyModule_Create(&amp;func);\n}\n</code></pre>\n"}, {"tags": ["python", "pandas", "pandas-groupby"], "answers": [{"comments": [{"owner": {"reputation": 849, "user_id": 9028003, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f4a20f30230076b8851eba1d475abe57?s=128&d=identicon&r=PG&f=1", "display_name": "TylerNG", "link": "https://stackoverflow.com/users/9028003/tylerng"}, "edited": false, "score": 0, "creation_date": 1514408678, "post_id": 47998541, "comment_id": 82965589, "body": "Thanks Wen! How would the code be like if I have multiple values (Values1, Value2, Value3,....) and I want to get the mean for those?  Would there be a more convenient way?"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 849, "user_id": 9028003, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f4a20f30230076b8851eba1d475abe57?s=128&d=identicon&r=PG&f=1", "display_name": "TylerNG", "link": "https://stackoverflow.com/users/9028003/tylerng"}, "edited": false, "score": 1, "creation_date": 1514409136, "post_id": 47998541, "comment_id": 82965730, "body": "<code>df.groupby([&#39;index&#39;,&#39;A&#39;,&#39;B&#39;]).agg(lambda x : x.mean() if x.name.startswith(&#39;Value&#39;) else x.sum()).reset_index()</code> @TylerNG"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 2, "last_activity_date": 1514409159, "last_edit_date": 1514409159, "creation_date": 1514408071, "answer_id": 47998541, "question_id": 47998454, "link": "https://stackoverflow.com/questions/47998454/pandas-groupby-operation/47998541#47998541", "title": "Pandas groupby operation", "body": "<p>By using <code>str.split</code> + <code>agg</code></p>\n\n<pre><code>df['B']=np.where(df['B'].str.split('-',expand=True)[0]!='1',df['B'].str.split('-',expand=True)[0],df['B'])\ndf.groupby(['index','A','B']).agg({'Count':'sum','Value':'mean'}).reset_index()\nOut[1628]: \n  index    A    B  Count  Value\n0     x  abc  1-a      1      1\n1     x  abc    2      3      3\n2     x  xyz    3      5      1\n3     y  abc  1-b      1      5\n4     y  abc  1-c      0      3\n5     y  ijk    2      1      2\n6     y  ijk    3      2      1\n</code></pre>\n\n<p>For your case </p>\n\n<pre><code>df.groupby(['index','A','B']).agg(lambda x : x.mean() if x.name.startswith('Value') else x.sum()).reset_index() \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1731, "user_id": 6509519, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xEcoP.jpg?s=128&g=1", "display_name": "Ian Thompson", "link": "https://stackoverflow.com/users/6509519/ian-thompson"}, "is_accepted": false, "score": 2, "last_activity_date": 1514410528, "last_edit_date": 1514410528, "creation_date": 1514409075, "answer_id": 47998690, "question_id": 47998454, "link": "https://stackoverflow.com/questions/47998454/pandas-groupby-operation/47998690#47998690", "title": "Pandas groupby operation", "body": "<p>Could also use <code>str.partition</code>:</p>\n\n<pre><code># make new 'B'\ndf.B.where(df.B.str.contains('1'), other = df.B.str.partition('-')[0], inplace = True)\n\n# group and agg\ndf.groupby([\n    'index',\n    'A',\n    'B'\n]).agg({\n    'Count' : 'sum',\n    'Value' : 'mean'\n}).reset_index()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Sg8sG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Sg8sG.png\" alt=\"group and agg\"></a></p>\n"}], "owner": {"reputation": 849, "user_id": 9028003, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f4a20f30230076b8851eba1d475abe57?s=128&d=identicon&r=PG&f=1", "display_name": "TylerNG", "link": "https://stackoverflow.com/users/9028003/tylerng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 47998541, "answer_count": 2, "score": 1, "last_activity_date": 1516821005, "creation_date": 1514407622, "last_edit_date": 1516821005, "question_id": 47998454, "link": "https://stackoverflow.com/questions/47998454/pandas-groupby-operation", "title": "Pandas groupby operation", "body": "<p>I want to perform a groupby operation in pandas.  For example, I want to group field B as below.<br>\nTwo: anything with a 2 in front.\nThree: anything with a 3 in front.\nOtherwise leave the cell alone.</p>\n\n<p>For example:\ndf</p>\n\n<pre><code>index   A    B    Count  Value\nx       abc  1-a    1      1\nx       abc  2-a    2      2\nx       abc  2-b    1      4\nx       xyz  3-b    2      0\nx       xyz  3-a    3      2\ny       abc  1-b    1      5\ny       abc  1-c    0      3\ny       ijk  3-a    2      1\ny       ijk  2-c    1      2\n</code></pre>\n\n<p>The result would be:</p>\n\n<pre><code>index   A    B    Count  Value    (Count: sum by group, Value: average by group)\nx       abc  1-a    1      1\nx       abc  Two    2      3\nx       xyz  Three  2      1\ny       abc  1-b    1      5\ny       abc  1-c    0      3\ny       ijk  Three  2      1\ny       ijk  Two    1      2\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "edited": false, "score": 1, "creation_date": 1514407724, "post_id": 47998450, "comment_id": 82965269, "body": "This is too broad. There&#39;s no good answer to this question if you don&#39;t narrow the context. Include the code you already have and explain which part is giving you trouble."}, {"owner": {"reputation": 1, "user_id": 9146783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d94d54b3567f1363ff13f90b92714a5c?s=128&d=identicon&r=PG&f=1", "display_name": "David1271", "link": "https://stackoverflow.com/users/9146783/david1271"}, "reply_to_user": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "edited": false, "score": 0, "creation_date": 1514407874, "post_id": 47998450, "comment_id": 82965322, "body": "That&#39;s the issue; I don&#39;t have any code for it. Just looking for a place to start really. I&#39;ve heard you can use &quot;Classes&quot; to create enemies and such. How would you do that?"}, {"owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "edited": false, "score": 1, "creation_date": 1514407983, "post_id": 47998450, "comment_id": 82965357, "body": "The question how classes work is too broad for stackoverflow. You need to know a minimum amount of Python before you can ask a good Python question. You need to read a book, or work through some tutorials. We (almost always) deal with specific questions about specific pieces of code here."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9146783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d94d54b3567f1363ff13f90b92714a5c?s=128&d=identicon&r=PG&f=1", "display_name": "David1271", "link": "https://stackoverflow.com/users/9146783/david1271"}, "edited": false, "score": 0, "creation_date": 1514408196, "post_id": 47998524, "comment_id": 82965423, "body": "I will reword it now"}, {"owner": {"reputation": 877, "user_id": 2134991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dca82a9dd68adfb301485dcd30707?s=128&d=identicon&r=PG", "display_name": "Niema Moshiri", "link": "https://stackoverflow.com/users/2134991/niema-moshiri"}, "reply_to_user": {"reputation": 1, "user_id": 9146783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d94d54b3567f1363ff13f90b92714a5c?s=128&d=identicon&r=PG&f=1", "display_name": "David1271", "link": "https://stackoverflow.com/users/9146783/david1271"}, "edited": false, "score": 0, "creation_date": 1514408492, "post_id": 47998524, "comment_id": 82965529, "body": "Once you learn how to create Python classes, I would recommend utilizing abstract classes for this (<a href=\"https://www.python-course.eu/python3_abstract_classes.php\" rel=\"nofollow noreferrer\">python-course.eu/python3_abstract_classes.php</a>). Specifically, create an abstract <code>Monster</code> class (e.g. <code>class Monster(ABC):</code>) that defines what member variables (e.g. <code>health</code>) and what functions (e.g. <code>attack</code>) all <code>Monster</code> objects must have, and then each of your actual monster types will be instantiations of this abstract <code>Monster</code> class (e.g. <code>class Dragon(Monster):</code>)"}, {"owner": {"reputation": 1, "user_id": 9146783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d94d54b3567f1363ff13f90b92714a5c?s=128&d=identicon&r=PG&f=1", "display_name": "David1271", "link": "https://stackoverflow.com/users/9146783/david1271"}, "edited": false, "score": 0, "creation_date": 1514409644, "post_id": 47998524, "comment_id": 82965920, "body": "Ahhhhh.... I see. Perfect; this is just what i needed."}, {"owner": {"reputation": 1, "user_id": 9146783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d94d54b3567f1363ff13f90b92714a5c?s=128&d=identicon&r=PG&f=1", "display_name": "David1271", "link": "https://stackoverflow.com/users/9146783/david1271"}, "edited": false, "score": 0, "creation_date": 1514411428, "post_id": 47998524, "comment_id": 82966568, "body": "class monster:     def __init__(self,name,hp,damage):         self.name = name         self.hp = health         self.damage = damage      def is_alive(self):         return self.health &gt; 0  class Bandit(monster):     def __init__(self):         super().__init__(name=&quot;Bandit&quot;, health = 10, damage = 2)    Ok, this is my code. When i click run however; it says bandit has no attribute health; but it does. What did i do wrong here?"}, {"owner": {"reputation": 877, "user_id": 2134991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dca82a9dd68adfb301485dcd30707?s=128&d=identicon&r=PG", "display_name": "Niema Moshiri", "link": "https://stackoverflow.com/users/2134991/niema-moshiri"}, "reply_to_user": {"reputation": 1, "user_id": 9146783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d94d54b3567f1363ff13f90b92714a5c?s=128&d=identicon&r=PG&f=1", "display_name": "David1271", "link": "https://stackoverflow.com/users/9146783/david1271"}, "edited": false, "score": 0, "creation_date": 1514412132, "post_id": 47998524, "comment_id": 82966772, "body": "Your abstract class defined it as <code>hp</code>, but you&#39;re calling it using <code>health</code>. You need it to be consistent"}], "tags": [], "owner": {"reputation": 877, "user_id": 2134991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dca82a9dd68adfb301485dcd30707?s=128&d=identicon&r=PG", "display_name": "Niema Moshiri", "link": "https://stackoverflow.com/users/2134991/niema-moshiri"}, "is_accepted": false, "score": 1, "last_activity_date": 1514407970, "creation_date": 1514407970, "answer_id": 47998524, "question_id": 47998450, "link": "https://stackoverflow.com/questions/47998450/how-to-implement-a-combat-system-in-a-text-based-adventure-in-python/47998524#47998524", "title": "How to implement a combat system in a text based adventure in python?", "body": "<p>As the user comment implied, this is extremely broad. My best suggestion for a step in the right direction would be something like this:</p>\n\n<pre><code>while monster.health &gt; 0:\n    choice = input(\"Enter your attack choice: \")\n    if choice not valid: # check user input for validity somehow\n        print(\"Invalid choice: %s\" % choice)\n        continue # repeat the loop without doing anything to prompt user again\n    damage = # some randomized(?) function to compute damage from the user's choice\n    monster.health -= damage\nprint(\"You killed the monster!\")\n</code></pre>\n\n<p>EDIT: I saw your comment about how to create classes. As the other user suggested, you definitely need to read up on Python first. I would recommend the Codecademy Python Track, but something to learn the basics of programming</p>\n"}], "owner": {"reputation": 1, "user_id": 9146783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d94d54b3567f1363ff13f90b92714a5c?s=128&d=identicon&r=PG&f=1", "display_name": "David1271", "link": "https://stackoverflow.com/users/9146783/david1271"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 981, "favorite_count": 0, "closed_date": 1514407952, "answer_count": 1, "score": -3, "last_activity_date": 1514408132, "creation_date": 1514407616, "last_edit_date": 1514408132, "question_id": 47998450, "link": "https://stackoverflow.com/questions/47998450/how-to-implement-a-combat-system-in-a-text-based-adventure-in-python", "closed_reason": "Needs more focus", "title": "How to implement a combat system in a text based adventure in python?", "body": "<p>fairly new to code and as a nice intro I would love to make a little text based adventure. I'm currently trying to implement a combat system, which i've heard you can do creating classes? I am not sure, if someone could perhaps give me an example it would be very aprreciated.</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "edited": false, "score": 1, "creation_date": 1514407529, "post_id": 47998420, "comment_id": 82965199, "body": "Hi Michael. I can see that you put some effort into your question. I have trouble understanding what exactly you need. Could you please provide us a demo file (just include the content in the question) and the desired output for that file?"}, {"owner": {"reputation": 57, "user_id": 7297087, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-6upC1Lyx2Z0/AAAAAAAAAAI/AAAAAAAAAAA/w4A1QfWP_rQ/photo.jpg?sz=128", "display_name": "Michael Amos", "link": "https://stackoverflow.com/users/7297087/michael-amos"}, "reply_to_user": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "edited": false, "score": 1, "creation_date": 1514407674, "post_id": 47998420, "comment_id": 82965256, "body": "will do. Sorry for the lack up clarity. Updating, give me a few minutes."}, {"owner": {"reputation": 6414, "user_id": 4829258, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/3CeCz.jpg?s=128&g=1", "display_name": "Tai", "link": "https://stackoverflow.com/users/4829258/tai"}, "edited": false, "score": 0, "creation_date": 1514408822, "post_id": 47998420, "comment_id": 82965627, "body": "So you need a function that can tell whether a string is a billed amount, right?"}, {"owner": {"reputation": 57, "user_id": 7297087, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-6upC1Lyx2Z0/AAAAAAAAAAI/AAAAAAAAAAA/w4A1QfWP_rQ/photo.jpg?sz=128", "display_name": "Michael Amos", "link": "https://stackoverflow.com/users/7297087/michael-amos"}, "reply_to_user": {"reputation": 6414, "user_id": 4829258, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/3CeCz.jpg?s=128&g=1", "display_name": "Tai", "link": "https://stackoverflow.com/users/4829258/tai"}, "edited": false, "score": 0, "creation_date": 1514409126, "post_id": 47998420, "comment_id": 82965728, "body": "@Tai That&#39;s is correct. I need to be able to tell the &quot;1,111.11&quot; and &quot;11.11&quot; from the &quot;1111&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 7297087, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-6upC1Lyx2Z0/AAAAAAAAAAI/AAAAAAAAAAA/w4A1QfWP_rQ/photo.jpg?sz=128", "display_name": "Michael Amos", "link": "https://stackoverflow.com/users/7297087/michael-amos"}, "edited": false, "score": 1, "creation_date": 1514409477, "post_id": 47998732, "comment_id": 82965854, "body": "awesome. thanks. Once I implement this I will mark this as answered."}], "tags": [], "owner": {"reputation": 1765, "user_id": 8524503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HXxXM.png?s=128&g=1", "display_name": "Abhijith Asokan", "link": "https://stackoverflow.com/users/8524503/abhijith-asokan"}, "is_accepted": false, "score": 2, "last_activity_date": 1514409772, "last_edit_date": 1514409772, "creation_date": 1514409412, "answer_id": 47998732, "question_id": 47998420, "link": "https://stackoverflow.com/questions/47998420/trying-to-use-python-to-tell-numbers-apart/47998732#47998732", "title": "trying to use Python to tell numbers apart", "body": "<p>Using <code>regex</code> you can accomplish this</p>\n\n<pre><code>currency_matcher = re.compile(\"^(\\d+,)*\\d+\\.(\\d{2})$\")\n...\nif currency_matcher.search(line.strip()) != None:\n    pass\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 7297087, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-6upC1Lyx2Z0/AAAAAAAAAAI/AAAAAAAAAAA/w4A1QfWP_rQ/photo.jpg?sz=128", "display_name": "Michael Amos", "link": "https://stackoverflow.com/users/7297087/michael-amos"}, "edited": false, "score": 0, "creation_date": 1514409818, "post_id": 47998737, "comment_id": 82965989, "body": "Wow. this is an amazingly well constructed reply. Thanks. I popped it into jupyter, whole cloth, and it worked. integrating it back to my code add further learning from it should be straight forward."}, {"owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "reply_to_user": {"reputation": 57, "user_id": 7297087, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-6upC1Lyx2Z0/AAAAAAAAAAI/AAAAAAAAAAA/w4A1QfWP_rQ/photo.jpg?sz=128", "display_name": "Michael Amos", "link": "https://stackoverflow.com/users/7297087/michael-amos"}, "edited": false, "score": 0, "creation_date": 1514409954, "post_id": 47998737, "comment_id": 82966031, "body": "@MichaelAmos I&#39;m glad I could help! Let me know if you need any further clarification on anything"}], "tags": [], "owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "is_accepted": true, "score": 2, "last_activity_date": 1514409892, "last_edit_date": 1514409892, "creation_date": 1514409432, "answer_id": 47998737, "question_id": 47998420, "link": "https://stackoverflow.com/questions/47998420/trying-to-use-python-to-tell-numbers-apart/47998737#47998737", "title": "trying to use Python to tell numbers apart", "body": "<h2>Brief</h2>\n\n<p>Assuming you're just asking for the regex (looks like the rest of your code is good), you can see both regular expressions below in use against your sample data set.</p>\n\n<p><strong>Note</strong>: The result of <code>Year</code> also includes the result of <code>id</code>. <strong>The OP specified they have logic to differentiate between the two</strong>, thus, I don't feel it's necessary to add the logic to my answer.</p>\n\n<hr>\n\n<h2>Code</h2>\n\n<pre><code>\\d+(,\\d+)*\\.\\d+$       # Currency\n\\d{4}$                 # Year\n</code></pre>\n\n<h3>Usage</h3>\n\n<p><a href=\"https://ideone.com/EVXCNq\" rel=\"nofollow noreferrer\">See code in use here</a></p>\n\n<pre><code>import re\n\narray = [\"1\", \"Alice Alwen\", \"12345 Oak Street\", \"Anytown, US 12345\", \"0.00\", \"123.45\", \"2007\", \"Pontiac\", \"2\", \"Bob Bobberson\", \"1919 Elm Road\", \"Metropolis, US 11111\", \"123.45\", \"0.00\", \"2016\", \"Sherman Tank\", \"2105\", \"Bradley Fighting Vehicle\", \"5\", \"Carl Carlson\", \"9854 Willow Way #1\", \"Gotham City, GA 34567\", \"1,001.00\", \"2,300.00\", \"2015\", \"Batmobile - used\"]\nr1 = r\"\\d+(,\\d+)*\\.\\d+$\"\nr2 = r\"\\d{4}$\"\n\nfor s in array:\n    if re.match(r1, s):\n        print \"Currency: \" + s\n    if re.match(r2, s):\n        print \"Year: \" + s\n</code></pre>\n\n<hr>\n\n<h2>Explanation</h2>\n\n<h3>Currency</h3>\n\n<ul>\n<li><a href=\"https://docs.python.org/2/library/re.html#search-vs-match\" rel=\"nofollow noreferrer\"><code>re.match()</code></a>: Asserts position at the start of the string (<code>^</code>) when matching. </li>\n<li><code>\\d+</code> Match one or more digits</li>\n<li><code>(,\\d+)*</code> Match the following any number of times\n\n<ul>\n<li><code>,</code> Match the comma character <code>,</code> literally</li>\n<li><code>\\d+</code> Match one or more digits</li>\n</ul></li>\n<li><code>\\.</code> Match the dot character <code>.</code> literally</li>\n<li><code>\\d+</code> MAtch one or more digits</li>\n<li><code>$</code> Assert position at the end of the line</li>\n</ul>\n\n<h3>Year</h3>\n\n<ul>\n<li><a href=\"https://docs.python.org/2/library/re.html#search-vs-match\" rel=\"nofollow noreferrer\"><code>re.match()</code></a>: Asserts position at the start of the string (<code>^</code>) when matching. </li>\n<li><code>\\d{4}</code> Match any digit exactly 4 times</li>\n<li><code>$</code> Assert position at the end of the line</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 16757, "user_id": 2799941, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/260db848f0eb7e3cd55998969a7a43a4?s=128&d=identicon&r=PG&f=1", "display_name": "andrew_reece", "link": "https://stackoverflow.com/users/2799941/andrew-reece"}, "is_accepted": false, "score": 0, "last_activity_date": 1514409824, "creation_date": 1514409824, "answer_id": 47998813, "question_id": 47998420, "link": "https://stackoverflow.com/questions/47998420/trying-to-use-python-to-tell-numbers-apart/47998813#47998813", "title": "trying to use Python to tell numbers apart", "body": "<p>One approach that avoids regex is to use type conversions.  It assumes <code>ID</code> and <code>year</code> values don't overlap.  </p>\n\n<pre><code>minyear = 2000\nnew_data = []\n\nfor x in data:\n    try:\n        float_val = float(x)\n        int_val = int(float_val)\n        if float_val == int_val:\n            if int_val &gt;= minyear:\n                new_data.append((int_val, \"year\"))\n            else:\n                new_data.append((int_val, \"id\"))\n        else:  \n            new_data.append((float_val, \"amount\"))\n    except ValueError:\n        new_data.append((x, \"string\"))\n</code></pre>\n\n<p>Output of <code>new_data</code>:</p>\n\n<pre><code>[(1, 'id'),\n ('Alice Alwen', 'string'),\n ('12345 Oak Street', 'string'),\n ('Anytown, US 12345', 'string'),\n (0, 'id'),\n (123.45, 'amount'),\n (2007, 'year'),\n ('Pontiac', 'string'),\n (2, 'id'),\n ('Bob Bobberson', 'string'),\n ('1919 Elm Road', 'string'),\n ('Metropolis, US 11111', 'string'),\n (123.45, 'amount'),\n (0, 'id'),\n (2016, 'year'),\n ('Sherman Tank', 'string'),\n (2105, 'year'),\n ('Bradley Fighting Vehicle', 'string'),\n (5, 'id'),\n ('Carl Carlson', 'string'),\n ('9854 Willow Way #1', 'string'),\n ('Gotham City, GA 34567', 'string'),\n ('1,001.00', 'string'),\n ('2,300.00', 'string'),\n (2015, 'year'),\n ('Batmobile - used', 'string')]\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 7297087, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-6upC1Lyx2Z0/AAAAAAAAAAI/AAAAAAAAAAA/w4A1QfWP_rQ/photo.jpg?sz=128", "display_name": "Michael Amos", "link": "https://stackoverflow.com/users/7297087/michael-amos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 47998737, "answer_count": 3, "score": 2, "last_activity_date": 1514409892, "creation_date": 1514407430, "last_edit_date": 1514408809, "question_id": 47998420, "link": "https://stackoverflow.com/questions/47998420/trying-to-use-python-to-tell-numbers-apart", "title": "trying to use Python to tell numbers apart", "body": "<p>I'm pretty sure the answer to this lies in regular expressions but I'm not getting it right.</p>\n\n<p>I have a list of text. Within that text I'm parsing out a bunch of different things but I'm scratching my head in particular at telling certain numbers from one another. I have client numbers that are sequential but have gaps (1, 2, 4, 5.. 1900, 1901, 1905), I have year numbers (2001, 2015, 2016), and finally I have billed amounts (0.00, 43.24, 1,925.00, 10,324.95). </p>\n\n<p>I need to be able to tell the billed amounts, which include commas when the amount is $1,000 or more and always include two numbers to the right of the decimal, from year numbers, which don't use any commas and don't have a decimal point. The client numbers I can detect just by where they are located.</p>\n\n<p>I've been trying to do it by testing for a regular expression of:</p>\n\n<pre><code>currency_matcher = re.compile('\\d*[,]*\\d*\\d[.]\\d*')\nif currency_matcher.search(line) != None:\n    #assume currency\n</code></pre>\n\n<p>I haven't specifically tried looking for the years yet but assumed I'd do a similar thing like:</p>\n\n<pre><code>year_matcher = re.compile('\\d\\d\\d\\d')\n</code></pre>\n\n<p>I've also considered using try and except but am just beginning that experimentation as I type this.</p>\n\n<p>Any help or suggestions are appreciated.</p>\n\n<p>EDIT: trying to add some clarity\nI have a text document that is broken into a python list like this:</p>\n\n<pre><code>[\n  \"1\", \"Alice Alwen\", \"12345 Oak Street\", \"Anytown, US 12345\", \"0.00\", \"123.45\", \"2007\", \"Pontiac\", \n  \"2\", \"Bob Bobberson\", \"1919 Elm Road\", \"Metropolis, US 11111\", \"123.45\", \"0.00\", \"2016\", \"Sherman Tank\", \"2105\", \"Bradley Fighting Vehicle\", \"5\", \n  \"Carl Carlson\", \"9854 Willow Way #1\", \"Gotham City, GA 34567\", \"1,001.00\", \"2,300.00\", \"2015\", \"Batmobile - used\"\n]\n</code></pre>\n\n<p>I can always tell when the client ID is because it's the first thing. After the personal info there are two \"currencies\" in my example (there are four in my dataset but same idea). I'd like to be able to ID these and extract them. Towards the end of the row you will also see a year number associated with a vehicle. I don't need these but I need to make sure I don't accidentally grab them when I grab the currency.</p>\n\n<p>I have already made a note (via code) of where each customer is in my dataset so I can do something like:</p>\n\n<pre><code>for cust in customers:\n    currency_list = []\n    for line in lines[begin_line : end_line]:\n        if {magical regex here}:\n            currency_list.append(line)\n    {pseudo code to extract currency into my DataFrame}\n</code></pre>\n\n<p>hopefully that's more helpful, if not, I'm happy to add more. </p>\n\n<p>Edit 2: actual code\nI guess, while I'm at it, here is what I have written, it's erroring out but it also may be logically inaccurate:</p>\n\n<pre><code>life_total_dict = {}\ncurrency_matcher = re.compile('\\d*[,]*\\d*\\d[.]\\d*')\nfor index, row in customers.itterrows():\n    start_row = row[\"Line Number\"]\n    end_row = row[\"End Line Number\"]\n\n    currency_counter = 0\n    for line in workable_lines[range(start_row, end_row)]:\n        #if re.search(currency_matcher,line) != None:\n        if currency_matcher.search(line) != None:\n            if currency_counter == 1:\n                life_total_dict[index] = line.strip()\n                currency_counter += 1\n            else:\n                currency_counter += 1\nprint(life_total_dict)\ncustomer = customer.append(life_total_dict, ignore_index=True)\n</code></pre>\n\n<p>If you're wondering about that weird counter, I actually only need the second currency amount. The first, third and fourth are just noise to me.</p>\n"}, {"tags": ["python", "csv"], "answers": [{"tags": [], "owner": {"reputation": 3012, "user_id": 6741482, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e2d07264d5857c8851212ac5c882039a?s=128&d=identicon&r=PG&f=1", "display_name": "pstatix", "link": "https://stackoverflow.com/users/6741482/pstatix"}, "is_accepted": false, "score": 0, "last_activity_date": 1514407766, "creation_date": 1514407766, "answer_id": 47998485, "question_id": 47998419, "link": "https://stackoverflow.com/questions/47998419/convert-csv-to-different-csv/47998485#47998485", "title": "Convert csv to different csv", "body": "<pre><code>import csv\n\nwith open('org.csv', 'r', newline='') as f:\n    spamreader = csv.reader(f, delimiter=';', quotechar='|')\n    data = list(spamreader)\n\nwith open('new.csv', 'w', newline='') as f:\n    writer = csv.writer(f, delimiter=',', quotechar='|')\n    writer.writerows(data)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 2, "creation_date": 1514409447, "post_id": 47998569, "comment_id": 82965845, "body": "That&#39;s better.  +1  Anton vBR and andrew_reece"}, {"owner": {"reputation": 321, "user_id": 8717507, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh6.googleusercontent.com/-ypOvYN8TpUo/AAAAAAAAAAI/AAAAAAAAABw/ejXMZv6nabA/photo.jpg?sz=128", "display_name": "Martin Bouhier", "link": "https://stackoverflow.com/users/8717507/martin-bouhier"}, "edited": false, "score": 0, "creation_date": 1514416477, "post_id": 47998569, "comment_id": 82967939, "body": "<code>&lt;_csv.reader object at 0x07C01FB0&gt;</code> I have this results on my CSV"}, {"owner": {"reputation": 16757, "user_id": 2799941, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/260db848f0eb7e3cd55998969a7a43a4?s=128&d=identicon&r=PG&f=1", "display_name": "andrew_reece", "link": "https://stackoverflow.com/users/2799941/andrew-reece"}, "edited": false, "score": 0, "creation_date": 1514416614, "post_id": 47998569, "comment_id": 82967971, "body": "Martin, are you saying you get that result when you use the code in this answer exactly?  That looks like you are using the <code>csv</code> module."}, {"owner": {"reputation": 321, "user_id": 8717507, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh6.googleusercontent.com/-ypOvYN8TpUo/AAAAAAAAAAI/AAAAAAAAABw/ejXMZv6nabA/photo.jpg?sz=128", "display_name": "Martin Bouhier", "link": "https://stackoverflow.com/users/8717507/martin-bouhier"}, "edited": false, "score": 0, "creation_date": 1514416683, "post_id": 47998569, "comment_id": 82967983, "body": "I&#180;m using CSV module because I have the data on a csv"}, {"owner": {"reputation": 16757, "user_id": 2799941, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/260db848f0eb7e3cd55998969a7a43a4?s=128&d=identicon&r=PG&f=1", "display_name": "andrew_reece", "link": "https://stackoverflow.com/users/2799941/andrew-reece"}, "edited": false, "score": 0, "creation_date": 1514416719, "post_id": 47998569, "comment_id": 82967996, "body": "Pandas reads CSVs directly, this answer doesn&#39;t require the <code>csv</code> module."}, {"owner": {"reputation": 321, "user_id": 8717507, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh6.googleusercontent.com/-ypOvYN8TpUo/AAAAAAAAAAI/AAAAAAAAABw/ejXMZv6nabA/photo.jpg?sz=128", "display_name": "Martin Bouhier", "link": "https://stackoverflow.com/users/8717507/martin-bouhier"}, "edited": false, "score": 0, "creation_date": 1514416926, "post_id": 47998569, "comment_id": 82968045, "body": "could you edit you answer with the exactly code please? I can&#39;t understand it"}, {"owner": {"reputation": 16757, "user_id": 2799941, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/260db848f0eb7e3cd55998969a7a43a4?s=128&d=identicon&r=PG&f=1", "display_name": "andrew_reece", "link": "https://stackoverflow.com/users/2799941/andrew-reece"}, "reply_to_user": {"reputation": 321, "user_id": 8717507, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh6.googleusercontent.com/-ypOvYN8TpUo/AAAAAAAAAAI/AAAAAAAAABw/ejXMZv6nabA/photo.jpg?sz=128", "display_name": "Martin Bouhier", "link": "https://stackoverflow.com/users/8717507/martin-bouhier"}, "edited": false, "score": 0, "creation_date": 1514418392, "post_id": 47998569, "comment_id": 82968351, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/162056/discussion-between-andrew-reece-and-martin-bouhier\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 16757, "user_id": 2799941, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/260db848f0eb7e3cd55998969a7a43a4?s=128&d=identicon&r=PG&f=1", "display_name": "andrew_reece", "link": "https://stackoverflow.com/users/2799941/andrew-reece"}, "is_accepted": false, "score": 2, "last_activity_date": 1514409611, "last_edit_date": 1514409611, "creation_date": 1514408222, "answer_id": 47998569, "question_id": 47998419, "link": "https://stackoverflow.com/questions/47998419/convert-csv-to-different-csv/47998569#47998569", "title": "Convert csv to different csv", "body": "<p>Using Pandas, change <code>f</code> to <code>'test.csv'</code> to read from file:</p>\n\n<pre><code>import pandas as pd\n\ndata = '''\\\n\"DSP\";\"Fecha\";\"Moneda_a_pagar_a_medio\";\"Impresiones\";\"Importe_a_pagar_a_medio\";\"eCPM\"\nDSP;01/12/2017;USD;2.324;596,73;0,65'''\nf = pd.compat.StringIO(data)\n\ndf = pd.read_csv(f, sep=\";\", thousands='.', decimal=',')\ndf.to_csv('output.csv', index=False)\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>DSP,Fecha,Moneda_a_pagar_a_medio,Impresiones,Importe_a_pagar_a_medio,eCPM\nDSP,01/12/2017,USD,2324,596.73,0.65\n</code></pre>\n"}], "owner": {"reputation": 321, "user_id": 8717507, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh6.googleusercontent.com/-ypOvYN8TpUo/AAAAAAAAAAI/AAAAAAAAABw/ejXMZv6nabA/photo.jpg?sz=128", "display_name": "Martin Bouhier", "link": "https://stackoverflow.com/users/8717507/martin-bouhier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1514409611, "creation_date": 1514407425, "question_id": 47998419, "link": "https://stackoverflow.com/questions/47998419/convert-csv-to-different-csv", "title": "Convert csv to different csv", "body": "<p>I need to convert my csv:</p>\n\n<p>Original:</p>\n\n<pre><code>\"DSP\";\"Fecha\";\"Moneda_a_pagar_a_medio\";\"Impresiones\";\"Importe_a_pagar_a_medio\";\"eCPM\"\nDSP;01/12/2017;USD;2.324;596,73;0,65\n</code></pre>\n\n<p>What I\u00b4m looking for:</p>\n\n<pre><code>DSP,Fecha,Moneda_a_pagar_a_medio,Impresiones,Importe_a_pagar_a_medio,eCPM\nDSP,01/12/2017,USD,2324,596.73,0.65\n</code></pre>\n\n<p>Code: </p>\n\n<pre><code>import csv\nwith open('test.csv', 'rb') as csvfile:\n    spamreader = csv.reader(csvfile, delimiter=';', quotechar='|')\n    print spamreader\n</code></pre>\n"}, {"tags": ["python", "django", "django-rest-framework"], "answers": [{"comments": [{"owner": {"reputation": 600, "user_id": 1941522, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/29fb8672016eb099218e906ce3b80a13?s=128&d=identicon&r=PG", "display_name": "NST", "link": "https://stackoverflow.com/users/1941522/nst"}, "edited": false, "score": 0, "creation_date": 1514495083, "post_id": 48014014, "comment_id": 82997643, "body": "I need to be able to modify this field from view because I need to modify it depending on query parameter."}, {"owner": {"reputation": 1063, "user_id": 7770091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8b5c2ac0a502296790cb23b592c1800?s=128&d=identicon&r=PG&f=1", "display_name": "whp", "link": "https://stackoverflow.com/users/7770091/whp"}, "reply_to_user": {"reputation": 600, "user_id": 1941522, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/29fb8672016eb099218e906ce3b80a13?s=128&d=identicon&r=PG", "display_name": "NST", "link": "https://stackoverflow.com/users/1941522/nst"}, "edited": false, "score": 0, "creation_date": 1514500289, "post_id": 48014014, "comment_id": 82999462, "body": "Correct - I believe using a setter method will enable you to modify the size attribute of an instantiated BlastEvent. Does this solution not work? Why?"}], "tags": [], "owner": {"reputation": 1063, "user_id": 7770091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8b5c2ac0a502296790cb23b592c1800?s=128&d=identicon&r=PG&f=1", "display_name": "whp", "link": "https://stackoverflow.com/users/7770091/whp"}, "is_accepted": false, "score": 0, "last_activity_date": 1514493205, "creation_date": 1514493205, "answer_id": 48014014, "question_id": 47998392, "link": "https://stackoverflow.com/questions/47998392/how-to-override-value-of-read-only-field-in-view-depending-on-query-param/48014014#48014014", "title": "How to override value of read-only field in view depending on query param?", "body": "<p>Properties require setters for assignment. Try adding a setter to <code>BlastEvent</code> like this:</p>\n\n<p><a href=\"https://docs.python.org/3/library/functions.html#property\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/functions.html#property</a></p>\n\n<pre><code>class BlastEvent(Event):\n    tonnes = models.FloatField()\n    blast_type = models.ForeignKey(BlastType)\n\n    def _get_size(self):\n        return self.tonnes / BlastEvent.objects.all().aggregate(Max('tonnes'))['tonnes__max']\n\n    @property\n    def size(self):\n        if callable(self._get_size):\n            return self._get_size()\n        else:\n            return self._get_size\n\n    @size.setter\n    def size(self, value):\n        self._get_size = value\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 600, "user_id": 1941522, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/29fb8672016eb099218e906ce3b80a13?s=128&d=identicon&r=PG", "display_name": "NST", "link": "https://stackoverflow.com/users/1941522/nst"}, "is_accepted": true, "score": 0, "last_activity_date": 1514571844, "creation_date": 1514571844, "answer_id": 48026774, "question_id": 47998392, "link": "https://stackoverflow.com/questions/47998392/how-to-override-value-of-read-only-field-in-view-depending-on-query-param/48026774#48026774", "title": "How to override value of read-only field in view depending on query param?", "body": "<p>The solution I came up with is to override to_representation() method of serializer:</p>\n\n<pre><code>def to_representation(self, instance):\n    ret = super(BlastEventSerializer, self).to_representation(instance)\n\n    instrument_id = self.context['request'].query_params.get('instrument_id')\n    if instrument_id:\n        ret['size'] = 77  # some custom calculations\n    return ret\n</code></pre>\n"}], "owner": {"reputation": 600, "user_id": 1941522, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/29fb8672016eb099218e906ce3b80a13?s=128&d=identicon&r=PG", "display_name": "NST", "link": "https://stackoverflow.com/users/1941522/nst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 48026774, "answer_count": 2, "score": 0, "last_activity_date": 1514571844, "creation_date": 1514407286, "question_id": 47998392, "link": "https://stackoverflow.com/questions/47998392/how-to-override-value-of-read-only-field-in-view-depending-on-query-param", "title": "How to override value of read-only field in view depending on query param?", "body": "<p>I have this model that has a read-only field where I calculate some property.</p>\n\n<pre><code>class BlastEvent(Event):\n    tonnes = models.FloatField()\n    blast_type = models.ForeignKey(BlastType)\n\n    @property\n    def size(self):\n        return self.tonnes / BlastEvent.objects.all().aggregate(Max('tonnes'))['tonnes__max']\n</code></pre>\n\n<p>This is my serializer:</p>\n\n<pre><code>class BlastEventSerializer(serializers.HyperlinkedModelSerializer):\n\n    size = serializers.ReadOnlyField()\n\n    included_serializers = {'blast_type': BlastTypeSerializer}\n\n    blast_type = ResourceRelatedField(\n        queryset=BlastType.objects,\n        related_link_view_name='blastevent-blasttype-list',\n        related_link_url_kwarg='pk',\n        self_link_view_name='blastevent-relationships'\n    )\n\n    class Meta:\n        model = BlastEvent\n        fields = ('url', 'id', 'tonnes', 'blast_type', 'size')\n\n    class JSONAPIMeta:\n        included_resources = ['blast_type']\n</code></pre>\n\n<p>And this is my view:</p>\n\n<pre><code>class BlastEventViewSet(EventViewSet):\n    queryset = BlastEvent.objects.all()\n    serializer_class = BlastEventSerializer\n</code></pre>\n\n<p>Now I need to re-calculate and override this read-only field depending on query parameter. I'm not sure where is the proper place to do it. I tried to do it in get_queryset() method of my view like this:</p>\n\n<pre><code>class BlastEventViewSet(EventViewSet):\n    queryset = BlastEvent.objects.all()\n    serializer_class = BlastEventSerializer\n\n    def get_queryset(self):\n        queryset = self.queryset\n        instrument_id = self.request.GET.get('instrument_id')\n        if instrument_id:\n            for e in queryset:\n                e.size = e.size + Instrument.objects.get(pk=instrument_id).distance\n        return queryset\n</code></pre>\n\n<p>but it doesn't work. It says 'AttributeError: can't set attribute':</p>\n\n<pre><code>Traceback:  \n\nFile \"/home/nargiza/virtualenvs/myenv/local/lib/python2.7/site-packages/django/core/handlers/exception.py\" in inner\n  41.             response = get_response(request)\n\nFile \"/home/nargiza/virtualenvs/myenv/local/lib/python2.7/site-packages/django/core/handlers/base.py\" in _get_response\n  187.                 response = self.process_exception_by_middleware(e, request)\n\nFile \"/home/nargiza/virtualenvs/myenv/local/lib/python2.7/site-packages/django/core/handlers/base.py\" in _get_response\n  185.                 response = wrapped_callback(request, *callback_args, **callback_kwargs)\n\nFile \"/home/nargiza/virtualenvs/myenv/local/lib/python2.7/site-packages/django/views/decorators/csrf.py\" in wrapped_view\n  58.         return view_func(*args, **kwargs)\n\nFile \"/home/nargiza/virtualenvs/myenv/local/lib/python2.7/site-packages/rest_framework/viewsets.py\" in view\n  86.             return self.dispatch(request, *args, **kwargs)\n\nFile \"/home/nargiza/virtualenvs/myenv/local/lib/python2.7/site-packages/rest_framework/views.py\" in dispatch\n  489.             response = self.handle_exception(exc)\n\nFile \"/home/nargiza/virtualenvs/myenv/local/lib/python2.7/site-packages/rest_framework/views.py\" in handle_exception\n  449.             self.raise_uncaught_exception(exc)\n\nFile \"/home/nargiza/virtualenvs/myenv/local/lib/python2.7/site-packages/rest_framework/views.py\" in dispatch\n  486.             response = handler(request, *args, **kwargs)\n\nFile \"/home/nargiza/virtualenvs/myenv/local/lib/python2.7/site-packages/rest_framework/mixins.py\" in list\n  40.         queryset = self.filter_queryset(self.get_queryset())\n\nFile \"/home/nargiza/Development/geotechnical-data-platform-api/events/views.py\" in get_queryset\n  205.             e.size = ...\n</code></pre>\n\n<p>Where I can override this field's value depending on query parameter?</p>\n"}, {"tags": ["python", "python-2.7", "opencv", "scikit-learn", "svm"], "comments": [{"owner": {"reputation": 1135, "user_id": 2962174, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/AyHGh.jpg?s=128&g=1", "display_name": "&#201;liette", "link": "https://stackoverflow.com/users/2962174/%c3%89liette"}, "edited": false, "score": 0, "creation_date": 1514407451, "post_id": 47998371, "comment_id": 82965173, "body": "Is it worth asking this at <a href=\"https://dsp.stackexchange.com/\">dsp.stackexchange.com</a> ?"}, {"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1514438986, "post_id": 47998371, "comment_id": 82972511, "body": "SVMs work best with normalized data. Is your data normalized/ standardized?"}, {"owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "edited": false, "score": 0, "creation_date": 1514455823, "post_id": 47998371, "comment_id": 82979197, "body": "Hmm... I don&#39;t really know what to answer. My data is decriptors (using sift) of images taken from cifar10 challange. Does that count as random?"}, {"owner": {"reputation": 430, "user_id": 7130772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8341c5423233e44636358ee48b443ce2?s=128&d=identicon&r=PG&f=1", "display_name": "joergd", "link": "https://stackoverflow.com/users/7130772/joergd"}, "edited": false, "score": 0, "creation_date": 1514493870, "post_id": 47998371, "comment_id": 82997140, "body": "First, try increasing <code>n_estimators</code> (default is 10 I think) and see if it improves cross validation accuracy (more estimators will slow down training however). Second, try playing around with <code>max_features</code>."}], "owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1514407160, "creation_date": 1514407160, "question_id": 47998371, "link": "https://stackoverflow.com/questions/47998371/how-to-use-randomforestclassifier-for-optimal-results", "title": "How to use RandomForestClassifier for optimal results?", "body": "<p>I saw <a href=\"https://stackoverflow.com/questions/31681373/making-svm-run-faster-in-python\">this</a> question about improving SVM speed. The <code>RandomForestClassifier</code> works amazingly fast (~140 seconds on dataset of 50000 32X32 RGB images. <em>Just to compare, with regular SVC it took me ~140 for 2500 !! images</em>).</p>\n\n<p>The problem with it is, that it has sub-optimal accuracy (&lt;40% where the regular SVM with much less samples gave 50%). Is it possible to use it with linear / polynomial kernel like the regular <code>SVC(C = 0.01, kernel='poly', degree = 3)</code>)?</p>\n"}, {"tags": ["python", "macos", "exe", "pyinstaller", "vpython"], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 9094711, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/1b335f43ad21c770a63df13996f7e9eb?s=128&d=identicon&r=PG&f=1", "display_name": "Momo 6aye3", "link": "https://stackoverflow.com/users/9094711/momo-6aye3"}, "edited": false, "score": 0, "creation_date": 1514479235, "post_id": 47998374, "comment_id": 82990666, "body": "Thanks for the heads up! But in the end, I definitely need to change my program to an executable, so I have no choice. Do you have any idea how can I do that in my situation (described above)?"}], "tags": [], "owner": {"reputation": 43, "user_id": 8278099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6500486fca7336c5c00a0da5bedc6203?s=128&d=identicon&r=PG&f=1", "display_name": "JDOE", "link": "https://stackoverflow.com/users/8278099/jdoe"}, "is_accepted": false, "score": 0, "last_activity_date": 1514407165, "creation_date": 1514407165, "answer_id": 47998374, "question_id": 47998318, "link": "https://stackoverflow.com/questions/47998318/python-converting-a-vpython-program-into-an-exe/47998374#47998374", "title": "python - Converting a VPython program into an exe", "body": "<p>In order to convert a Python program into an executable file (i.e. \u201cfreeze\u201d the program), you\u2019ll need something like PyInstaller. PyInstaller and related projects (such as py2exe) take Python programs, and package them into *.exe files for your users to run. The end result is a standalone executable file that doesn\u2019t require Python to be installed on the end user\u2019s system.</p>\n\n<p>Keep in mind though, that these methods of \u201cfreezing\u201d a Python program can incur a fairly large startup penalty and/or bloat your executable size. The end result is an executable that may take a significantly longer time to start up than usual, and may be much larger than you would expect it to be.</p>\n"}], "owner": {"reputation": 95, "user_id": 9094711, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/1b335f43ad21c770a63df13996f7e9eb?s=128&d=identicon&r=PG&f=1", "display_name": "Momo 6aye3", "link": "https://stackoverflow.com/users/9094711/momo-6aye3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 191, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1574953982, "creation_date": 1514406832, "question_id": 47998318, "link": "https://stackoverflow.com/questions/47998318/python-converting-a-vpython-program-into-an-exe", "title": "python - Converting a VPython program into an exe", "body": "<p>I am currently making a physics simulation using VPython, and want to turn it into an exe file, using pyinstaller, so that it can run on a Mac laptop.</p>\n\n<p>Essentially, I have two questions - one short and one long.</p>\n\n<p>Short question: will the exe file I create using pyinstaller run on a Mac laptop if I created it using windows?</p>\n\n<p>Long question:\nI converted my program into an exe, but it doesn't work. Here is a screen shot of the error:\n<a href=\"https://i.stack.imgur.com/yfIx4.png\" rel=\"nofollow noreferrer\">Pyinstaller error</a></p>\n\n<p>Good news: I think I have found a solution to my problem from another question on stackoverflow, <strong><em>but I am a newbie and can't comprehend a single word of the answer.</em></strong> And, the answer uses anaconda, but I am using pycharm... in other words I am completely lost.</p>\n\n<p>Link to answer: <a href=\"https://stackoverflow.com/questions/39818847/how-to-make-vpython-exe-using-pyinstaller\">how to make vpython .exe using pyinstaller</a></p>\n"}, {"tags": ["python", "pyside", "stylesheet", "qpushbutton"], "comments": [{"owner": {"reputation": 743, "user_id": 447830, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7ff13bc61c77c687401d0e0300bd14e5?s=128&d=identicon&r=PG", "display_name": "Ubuntourist", "link": "https://stackoverflow.com/users/447830/ubuntourist"}, "edited": false, "score": 0, "creation_date": 1514744233, "post_id": 47998315, "comment_id": 83060587, "body": "Although there was a typo in the above version (I had a &quot; = &quot; where I should have a &quot; += &quot;) that wasn&#39;t the problem."}], "answers": [{"tags": [], "owner": {"reputation": 743, "user_id": 447830, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7ff13bc61c77c687401d0e0300bd14e5?s=128&d=identicon&r=PG", "display_name": "Ubuntourist", "link": "https://stackoverflow.com/users/447830/ubuntourist"}, "is_accepted": true, "score": 0, "last_activity_date": 1514745112, "creation_date": 1514745112, "answer_id": 48044879, "question_id": 47998315, "link": "https://stackoverflow.com/questions/47998315/how-do-i-apply-checkable-stylesheet-properties-to-multiple-qpushbuttons-with-pys/48044879#48044879", "title": "How do I apply checkable stylesheet properties to multiple QPushButtons with PySide?", "body": "<p>Apparently, the documentation does not match reality. <code>unchecked</code> and <code>checked</code> were the documented way to do what I wanted, but after experimenting with <code>off</code> and <code>on</code> which were equally ineffective, I tried <code>closed</code> and <code>open</code>, which, as I understand from the documentation, is only supposed to apply to QPushButtons with menus attached. Nonetheless, that worked. (It doesn't seem to be doing the <code>outset</code> and <code>inset</code> but it's getting the colors right.)</p>\n\n<p>I also switched to PyQt5 to see if there would be a change, but it behaved the same as PySide. </p>\n\n<pre><code>#!/usr/bin/env python3\n# -*- coding: utf-8 -*-\n\nimport sys\nimport os\n\nfrom PySide.QtCore import *\nfrom PySide.QtGui  import *\n\nclass UI(QDialog):\n\n    def __init__(self, *args, **kwargs):\n        super(UI, self).__init__(**kwargs)\n\n        outerBox = QGroupBox(self)\n        outerBox.setGeometry(50, 50, 200, 150)\n        outerBox.setObjectName(\"outerBox\")\n\n        brokenCss  = \"QPushButton:closed {\"\n        brokenCss += \"  background-color:  #ce9a9a;\"  # red-ish\n        brokenCss += \"  border: 1px outset #000000;\"\n        brokenCss += \"  border-radius: 6px;\"\n        brokenCss += \"}\"\n        brokenCss += \"QPushButton:open {\"\n        brokenCss += \"  background-color:  #12f785;\"  # green-ish\n        brokenCss += \"  border: 1px inset  #000000;\"\n        brokenCss += \"  border-radius: 6px;\"\n        brokenCss += \"}\"\n\n        broken = []\n        for i in range(2):\n            broken.append(QPushButton(outerBox))\n            broken[i].setObjectName(\"broken{0}\".format(i))\n            broken[i].setGeometry(15, (35 * (i + 1)), 100, 20)\n            broken[i].setText(\"Broken CSS {0}\".format(i))\n            broken[i].setCheckable(True)\n            broken[i].setChecked(False)\n            broken[i].setStyleSheet(brokenCss)\n\n\nif __name__ == '__main__':\n    app = QApplication(sys.argv)\n    ui = UI()\n    ui.showFullScreen()\n    sys.exit(app.exec_())\n</code></pre>\n"}], "owner": {"reputation": 743, "user_id": 447830, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7ff13bc61c77c687401d0e0300bd14e5?s=128&d=identicon&r=PG", "display_name": "Ubuntourist", "link": "https://stackoverflow.com/users/447830/ubuntourist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 48044879, "answer_count": 1, "score": 0, "last_activity_date": 1514745334, "creation_date": 1514406827, "last_edit_date": 1514745334, "question_id": 47998315, "link": "https://stackoverflow.com/questions/47998315/how-do-i-apply-checkable-stylesheet-properties-to-multiple-qpushbuttons-with-pys", "title": "How do I apply checkable stylesheet properties to multiple QPushButtons with PySide?", "body": "<p>I'm on an Linux box (Ubuntu 16.04) with Python 3.5 and PySide 1.2.2.</p>\n\n<p>If I have QPushButtons that are not checkable, and I only set the style sheet once, the buttons appear the way that I would like. However, if I make them checkable, Qt wants to play with focused and unfocused style, prioritizing those over what I'd asked for.</p>\n\n<pre><code>#!/usr/bin/env python3\n# -*- coding: utf-8 -*-\n\nimport sys\nimport os\n\nfrom PySide.QtCore import *\nfrom PySide.QtGui  import *\n\nclass UI(QDialog):\n\n    def __init__(self, *args, **kwargs):\n        super(UI, self).__init__(**kwargs)\n\n        outerBox = QGroupBox(self)\n        outerBox.setGeometry(50, 50, 200, 150)\n        outerBox.setObjectName(\"outerBox\")\n\n        brokenCss  = \"QPushButton:unchecked {\"\n        brokenCss += \"  background-color:  #ce9a9a;\"  # red-ish\n        brokenCss += \"  border: 1px outset #000000;\"\n        brokenCss += \"  border-radius: 6px;\"\n        brokenCss += \"}\"\n        brokenCss += \"QPushButton:checked {\"\n        brokenCss += \"  background-color:  #12f785;\"  # green-ish\n        brokenCss += \"  border: 1px inset  #000000;\"\n        brokenCss += \"  border-radius: 6px;\"\n        brokenCss += \"}\"\n\n        broken = []\n        for i in range(2):\n            broken.append(QPushButton(outerBox))\n            broken[i].setObjectName(\"broken{0}\".format(i))\n            broken[i].setGeometry(15, (35 * (i + 1)), 100, 20)\n            broken[i].setText(\"Broken CSS {0}\".format(i))\n            broken[i].setCheckable(True)\n            broken[i].setChecked(False)\n            broken[i].setStyleSheet(brokenCss)\n\n\nif __name__ == '__main__':\n    app = QApplication(sys.argv)\n    ui = UI()\n    ui.showFullScreen()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p>I was hoping the above would produce two red-ish buttons at startup, which would then turn green-ish and remain green-ish once they have been pressed once (and flip back to red-ish when clicked again).  Instead I see:</p>\n\n<p><a href=\"https://i.stack.imgur.com/73Zgw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/73Zgw.png\" alt=\"A focused button and an unfocused button\"></a></p>\n\n<p>Once they are both clicked they each turn green, though most recently clicked is slightly darker, indicating focus, I guess. But toggling them back to off gives me the image above again, instead of two red buttons.</p>\n\n<p>I have tried adding CSS \"stanzas\" for <code>:default</code>, <code>:flat</code> and several other pseudo-states, all to no avail.</p>\n"}, {"tags": ["javascript", "jquery", "python", "ajax", "flask"], "comments": [{"owner": {"reputation": 184244, "user_id": 14104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/otetW.jpg?s=128&g=1", "display_name": "epascarello", "link": "https://stackoverflow.com/users/14104/epascarello"}, "edited": false, "score": 0, "creation_date": 1514407029, "post_id": 47998286, "comment_id": 82965021, "body": "You should be using serialize() and code looks correct, how is the php reading it?"}, {"owner": {"reputation": 675, "user_id": 4397827, "user_type": "registered", "accept_rate": 23, "profile_image": "https://lh4.googleusercontent.com/-JH_TwZtFNNM/AAAAAAAAAAI/AAAAAAAAACE/kbXlpcHRCxs/photo.jpg?sz=128", "display_name": "Christopher Nelson", "link": "https://stackoverflow.com/users/4397827/christopher-nelson"}, "reply_to_user": {"reputation": 184244, "user_id": 14104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/otetW.jpg?s=128&g=1", "display_name": "epascarello", "link": "https://stackoverflow.com/users/14104/epascarello"}, "edited": false, "score": 0, "creation_date": 1514407525, "post_id": 47998286, "comment_id": 82965198, "body": "I&#39;m using python for the processing side. When I look at what should be the form data inside the python console it is coming over as &#39;None&#39;. I need it to come over as a JSON response.. so  { email: string,   password: string }"}, {"owner": {"reputation": 184244, "user_id": 14104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/otetW.jpg?s=128&g=1", "display_name": "epascarello", "link": "https://stackoverflow.com/users/14104/epascarello"}, "edited": false, "score": 0, "creation_date": 1514407826, "post_id": 47998286, "comment_id": 82965300, "body": "well if you want JSON, than you do not want searlize() and searlizeArray()"}, {"owner": {"reputation": 675, "user_id": 4397827, "user_type": "registered", "accept_rate": 23, "profile_image": "https://lh4.googleusercontent.com/-JH_TwZtFNNM/AAAAAAAAAAI/AAAAAAAAACE/kbXlpcHRCxs/photo.jpg?sz=128", "display_name": "Christopher Nelson", "link": "https://stackoverflow.com/users/4397827/christopher-nelson"}, "reply_to_user": {"reputation": 184244, "user_id": 14104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/otetW.jpg?s=128&g=1", "display_name": "epascarello", "link": "https://stackoverflow.com/users/14104/epascarello"}, "edited": false, "score": 0, "creation_date": 1514407928, "post_id": 47998286, "comment_id": 82965336, "body": "What would I want for it to send over the form as json?"}, {"owner": {"reputation": 184244, "user_id": 14104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/otetW.jpg?s=128&g=1", "display_name": "epascarello", "link": "https://stackoverflow.com/users/14104/epascarello"}, "edited": false, "score": 0, "creation_date": 1514408024, "post_id": 47998286, "comment_id": 82965369, "body": "<a href=\"https://stackoverflow.com/questions/1184624/convert-form-data-to-javascript-object-with-jquery\" title=\"convert form data to javascript object with jquery\">stackoverflow.com/questions/1184624/&hellip;</a>"}, {"owner": {"reputation": 1633, "user_id": 6502500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EnuRp.png?s=128&g=1", "display_name": "Mangohero1", "link": "https://stackoverflow.com/users/6502500/mangohero1"}, "edited": false, "score": 0, "creation_date": 1514408330, "post_id": 47998286, "comment_id": 82965477, "body": "You could always construct the JSON object yourself, setting each key to Jquery.val(). You&#39;d also need to declare the contentType. Set this to <code>&#39;application&#47;json&#39;</code>.Then back in Flask, you can parse this with <code>request.json[&#39;email&#39;]</code> and <code>request.json[&#39;password&#39;]</code>"}, {"owner": {"reputation": 675, "user_id": 4397827, "user_type": "registered", "accept_rate": 23, "profile_image": "https://lh4.googleusercontent.com/-JH_TwZtFNNM/AAAAAAAAAAI/AAAAAAAAACE/kbXlpcHRCxs/photo.jpg?sz=128", "display_name": "Christopher Nelson", "link": "https://stackoverflow.com/users/4397827/christopher-nelson"}, "edited": false, "score": 0, "creation_date": 1514409191, "post_id": 47998286, "comment_id": 82965751, "body": "Yeah I&#39;m trying that now but I&#39;m getting a failed to decode json object. I imagine it&#39;s because I&#39;m using Flask-RestPlus.. I&#39;m not sure what could be going on tho, because the API endpoint works fine when sending raw json. But this form is not."}, {"owner": {"reputation": 1633, "user_id": 6502500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EnuRp.png?s=128&g=1", "display_name": "Mangohero1", "link": "https://stackoverflow.com/users/6502500/mangohero1"}, "edited": false, "score": 0, "creation_date": 1514409316, "post_id": 47998286, "comment_id": 82965797, "body": "Ah, that could be it. sadly I&#39;m not familiar with Flask-RestPlus"}], "answers": [{"tags": [], "owner": {"reputation": 675, "user_id": 4397827, "user_type": "registered", "accept_rate": 23, "profile_image": "https://lh4.googleusercontent.com/-JH_TwZtFNNM/AAAAAAAAAAI/AAAAAAAAACE/kbXlpcHRCxs/photo.jpg?sz=128", "display_name": "Christopher Nelson", "link": "https://stackoverflow.com/users/4397827/christopher-nelson"}, "is_accepted": true, "score": 0, "last_activity_date": 1514410990, "creation_date": 1514410990, "answer_id": 47998992, "question_id": 47998286, "link": "https://stackoverflow.com/questions/47998286/jquery-ajax-form-post-submits-empty-to-my-api/47998992#47998992", "title": "Jquery/Ajax form POST submits empty to my API", "body": "<p>For anyone with this issue.. It seems to be the way Flask-RestPlus/Flask takes in the ajax POST. Not sure exactly what was going on but I did figure out the way around this by using this Jquery lib; <a href=\"https://github.com/marioizquierdo/jquery.serializeJSON\" rel=\"nofollow noreferrer\">https://github.com/marioizquierdo/jquery.serializeJSON</a></p>\n\n<p>and my code like so..</p>\n\n<pre><code>    &lt;script&gt;\n$(\"#login\").submit(function(e) {\n\n    var url = \"/auth/login_user\";\n    var form_data = $('#login').serializeJSON();\n\n    console.log(form_data)\n\n    $.ajax({\n           type: \"POST\",\n           url: url,\n           contentType: 'application/JSON',\n           data: JSON.stringify(form_data),\n           success: function(data)\n           {\n               alert(data); // \n           }\n         });\n\n    e.preventDefault(); \n});\n&lt;/script&gt;\n</code></pre>\n"}], "owner": {"reputation": 675, "user_id": 4397827, "user_type": "registered", "accept_rate": 23, "profile_image": "https://lh4.googleusercontent.com/-JH_TwZtFNNM/AAAAAAAAAAI/AAAAAAAAACE/kbXlpcHRCxs/photo.jpg?sz=128", "display_name": "Christopher Nelson", "link": "https://stackoverflow.com/users/4397827/christopher-nelson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 940, "favorite_count": 0, "closed_date": 1514581799, "accepted_answer_id": 47998992, "answer_count": 1, "score": 0, "last_activity_date": 1514581826, "creation_date": 1514406681, "question_id": 47998286, "link": "https://stackoverflow.com/questions/47998286/jquery-ajax-form-post-submits-empty-to-my-api", "closed_reason": "Duplicate", "title": "Jquery/Ajax form POST submits empty to my API", "body": "<p>I'm having some issues using Jquery &amp; Ajax to submit a form to my API that is powered by Flask-RestPlus &amp; Python. When I run my API from CURL, or using swagger it works as predicted, however when I try to use Jquery/Ajax to submit a form to the same endpoint I am not getting any data from the form submission.</p>\n\n<p>Here is the the HTML/Jquery</p>\n\n<pre><code>&lt;form name=\"login\" id=\"login\"&gt;\n&lt;input type=\"text\" name=\"email\" id=\"email\"&gt;\n&lt;input type=\"password\" name=\"password\" id=\"password\"&gt;\n&lt;button type=\"submit\"&gt;Submit&lt;/button&gt;\n&lt;/form&gt;\n\n&lt;/body&gt;\n&lt;script&gt;\n$(\"#login\").submit(function(e) {\n\n    var url = \"/auth/login_user\"; //\n\n    $.ajax({\n           type: \"POST\",\n           url: url,\n           data: $(\"#login\").serializeArray(), // I've tried serializeArray() &amp; serialize()\n           success: function(data)\n           {\n               alert(data);\n           }\n         });\n\n    e.preventDefault(); \n});\n&lt;/script&gt;\n</code></pre>\n\n<p>When I inspect the code inside the browser it looks like it is sending the form data, but when I print it in my console from my python function I can tell I am getting a None type.</p>\n\n<p>Any help would be much appreciated. I know I can user Jquery.val() to get the value of each form element but it doesn't seem like the correct way to solve this issue.</p>\n"}, {"tags": ["python", "python-3.x", "dictionary"], "comments": [{"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 3, "creation_date": 1514406655, "post_id": 47998184, "comment_id": 82964866, "body": "This <code>d={&#39;1&#39;: 2 , 4, 5 ,&#39;2&#39;:1, &#39;3&#39;: 4 ...</code> makes no sense. Explain better."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1514406704, "post_id": 47998184, "comment_id": 82964883, "body": "Your example output isn&#39;t a valid Python literal, and it isn&#39;t clear what you desire."}, {"owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "edited": false, "score": 0, "creation_date": 1514406873, "post_id": 47998184, "comment_id": 82964956, "body": "I&#39;m voting to close this question as unclear because the desired result is not valid Python."}], "answers": [{"tags": [], "owner": {"reputation": 877, "user_id": 2134991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dca82a9dd68adfb301485dcd30707?s=128&d=identicon&r=PG", "display_name": "Niema Moshiri", "link": "https://stackoverflow.com/users/2134991/niema-moshiri"}, "is_accepted": false, "score": -1, "last_activity_date": 1514410863, "last_edit_date": 1514410863, "creation_date": 1514406370, "answer_id": 47998237, "question_id": 47998184, "link": "https://stackoverflow.com/questions/47998184/dictionary-assigning/47998237#47998237", "title": "Dictionary assigning", "body": "<pre><code>dic = {}\nfor k,v in listim:\n    dic[k] = int(v)\n</code></pre>\n\n<p>or even shorter:</p>\n\n<pre><code>dic = {k:int(v) for k,v in listim}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 36413, "user_id": 2301450, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/4xgoZ.png?s=128&g=1", "display_name": "vaultah", "link": "https://stackoverflow.com/users/2301450/vaultah"}, "edited": false, "score": 1, "creation_date": 1514406744, "post_id": 47998276, "comment_id": 82964902, "body": "This output doesn&#39;t match <code>d={&#39;1&#39;: 2 , 4, 5 ,&#39;2&#39;:1, &#39;3&#39;: 4, (...and so on)}</code>"}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "reply_to_user": {"reputation": 36413, "user_id": 2301450, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/4xgoZ.png?s=128&g=1", "display_name": "vaultah", "link": "https://stackoverflow.com/users/2301450/vaultah"}, "edited": false, "score": 0, "creation_date": 1514406791, "post_id": 47998276, "comment_id": 82964921, "body": "Agreed, but I assumed OP wanted a list of values for each key and this method provides that."}, {"owner": {"reputation": 12178, "user_id": 1388292, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/mfJ7p.jpg?s=128&g=1", "display_name": "Jacques Gaudin", "link": "https://stackoverflow.com/users/1388292/jacques-gaudin"}, "edited": false, "score": 0, "creation_date": 1514442481, "post_id": 47998276, "comment_id": 82973527, "body": "I think the OP requests another line in the for loop: <code>d[i[1]].append(int(i[0]))</code>"}], "tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 1, "last_activity_date": 1514406613, "creation_date": 1514406613, "answer_id": 47998276, "question_id": 47998184, "link": "https://stackoverflow.com/questions/47998184/dictionary-assigning/47998276#47998276", "title": "Dictionary assigning", "body": "<p>Let's use <code>defaultdict</code> from collections using list as a factory:</p>\n\n<pre><code>from collections import defaultdict\n\nd = defaultdict(list)\n\nlistim=[['1' ,'2'], ['3' , '4'], ['1', '5'], ['4', '1']]\n\nfor i in listim:\n    d[i[0]].append(int(i[1]))\n\ndict(d)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{'1': [2, 5], '3': [4], '4': [1]}\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 8827877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3863740d8e579e0f4783f14c9d190ca?s=128&d=identicon&r=PG&f=1", "display_name": "mesboomin", "link": "https://stackoverflow.com/users/8827877/mesboomin"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "closed_date": 1514408541, "answer_count": 2, "score": -7, "last_activity_date": 1514410863, "creation_date": 1514406089, "question_id": 47998184, "link": "https://stackoverflow.com/questions/47998184/dictionary-assigning", "closed_reason": "Needs details or clarity", "title": "Dictionary assigning", "body": "<pre><code>listim=[['1' ,'2'], ['3' , '4'], ['1', '5'], ['4', '1']]\n</code></pre>\n\n<p>I am trying to make dictionary using listim for each number,</p>\n\n<p>I want to have d={'1': 2 , 4, 5 ,'2':1, '3': 4, (...and so on)}</p>\n\n<p>my code is(I can't find the mistake but probably about dictionaries):</p>\n\n<pre><code>a=1\ndic={}\nwhile a&lt;6:\n    for number in listim:\n        if number[0]==a:\n            if number[1] not in dic[a]:\n                dic[a].append(number[1])\n        elif number[1]==a:\n            if number[0] not in dic[a]:\n                dic[a].append(number[0])\n        a+=1\n</code></pre>\n\n<p>I couldn't find enough information on web,(I know I can). I hope I was clear enough. Thank you</p>\n"}, {"tags": ["python", "python-3.x", "urllib", "unc", "urlopen"], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 9145743, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NSMyA4an37k/AAAAAAAAAAI/AAAAAAAAAAo/WLsKz1MjjUM/photo.jpg?sz=128", "display_name": "Lava Viperidae", "link": "https://stackoverflow.com/users/9145743/lava-viperidae"}, "is_accepted": false, "score": 1, "last_activity_date": 1514409143, "creation_date": 1514409143, "answer_id": 47998698, "question_id": 47998169, "link": "https://stackoverflow.com/questions/47998169/python-3-6-3-urlopen-removing-server-name-from-uri-for-html-file-stored-on-remot/47998698#47998698", "title": "Python 3.6.3 urlopen removing server name from URI for html file stored on remote server", "body": "<p>So I replaced this:</p>\n\n<pre><code>url = pathlib.Path(full_path).as_uri()    \nurl_html = urlopen(url).read()\n</code></pre>\n\n<p>with this:</p>\n\n<pre><code>with open(full_path) as url_html\n</code></pre>\n\n<p>and was able to pass that into BeautifulSoup and parse as needed...</p>\n"}], "owner": {"reputation": 31, "user_id": 9145743, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NSMyA4an37k/AAAAAAAAAAI/AAAAAAAAAAo/WLsKz1MjjUM/photo.jpg?sz=128", "display_name": "Lava Viperidae", "link": "https://stackoverflow.com/users/9145743/lava-viperidae"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 503, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1514409143, "creation_date": 1514405997, "last_edit_date": 1514407057, "question_id": 47998169, "link": "https://stackoverflow.com/questions/47998169/python-3-6-3-urlopen-removing-server-name-from-uri-for-html-file-stored-on-remot", "title": "Python 3.6.3 urlopen removing server name from URI for html file stored on remote server", "body": "<p>I need to parse hundreds of HTML files that are archived on a server. The files are accessed via UNC, and then I use pathlib's as_uri() method to convert the UNC path to as URI.</p>\n\n<p>Full UNC path for example below: \\\\dmsupportfs\\~images\\sandbox\\test.html</p>\n\n<pre><code>from urllib.request import urlopen\nfrom bs4 import BeautifulSoup\nimport os, pathlib\n\nsource_path = os.path.normpath('//dmsupportfs/~images/sandbox/') + os.sep\nfilename = 'test.html'\n\nfull_path = source_path + filename\nurl = pathlib.Path(full_path).as_uri()\nprint('URL -&gt; ' + url)\nurl_html = urlopen(url).read()\n</code></pre>\n\n<p>So the URI(L) I'm passing to urlopen is: file://dmsupportfs/%7Eimages/sandbox/test.html</p>\n\n<p>I can plug this into any web browser and return the page, however, when urlopen goes to read the page, it's ignoring/removing the server name (dmsupportfs) from the URI, and so the read fails with not able to find the file.  I assume this is something with how the urlopen method processes the URI, but I'm stumped at this point (likely something quick and easy to resolve...sorry, a bit new to Python).  If I map the UNC location to a drive letter, and then use the mapped drive letter instead of the UNC path, this works without any issue. I'd like to not have to depend on a mapped drive to accomplish this though. Any advice?</p>\n\n<p>Below is the output from the above code showing the error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Anaconda3\\lib\\urllib\\request.py\", line 1474, in open_local_file\n    stats = os.stat(localfile)\nFileNotFoundError: [WinError 3] The system cannot find the path specified: '\\\\~images\\\\sandbox\\\\test.html'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"url_test.py\", line 10, in &lt;module&gt;\n    url_html = urlopen(url).read()\n  File \"C:\\Anaconda3\\lib\\urllib\\request.py\", line 223, in urlopen\n    return opener.open(url, data, timeout)\n  File \"C:\\Anaconda3\\lib\\urllib\\request.py\", line 526, in open\n    response = self._open(req, data)\n  File \"C:\\Anaconda3\\lib\\urllib\\request.py\", line 544, in _open\n    '_open', req)\n  File \"C:\\Anaconda3\\lib\\urllib\\request.py\", line 504, in _call_chain\n    result = func(*args)\n  File \"C:\\Anaconda3\\lib\\urllib\\request.py\", line 1452, in file_open\n    return self.open_local_file(req)\n  File \"C:\\Anaconda3\\lib\\urllib\\request.py\", line 1491, in open_local_file\n    raise URLError(exp)\nurllib.error.URLError: &lt;urlopen error [WinError 3] The system cannot find the path specified: '\\\\~images\\\\sandbox\\\\test.html'&gt;\n</code></pre>\n\n<p>UPDATE:  So, digging through the traceback above and the actual methods and I find this, which essentially tells me what I'm trying to do with a file:// URI isn't going to work for a remote server.</p>\n\n<pre><code>def file_open(self, req):\n    url = req.selector\n    if url[:2] == '//' and url[2:3] != '/' and (req.host and\n            req.host != 'localhost'):\n        if not req.host in self.get_names():\n            raise URLError(\"file:// scheme is supported only on localhost\")\n</code></pre>\n\n<p>Any ideas then on how to get this to work without mapping a drive?</p>\n"}, {"tags": ["python", "formatting", "output"], "comments": [{"owner": {"reputation": 4708, "user_id": 5007059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/477099189c307a35bfb73097b19af9fe?s=128&d=identicon&r=PG&f=1", "display_name": "ndmeiri", "link": "https://stackoverflow.com/users/5007059/ndmeiri"}, "edited": false, "score": 2, "creation_date": 1514406089, "post_id": 47998156, "comment_id": 82964663, "body": "Please include your current and desired output. Also do this in any future questions where such info is relevant."}, {"owner": {"reputation": 50452, "user_id": 33258, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4b21ea020b4d95c4abacaffc9daaf4e?s=128&d=identicon&r=PG", "display_name": "Hugh Bothwell", "link": "https://stackoverflow.com/users/33258/hugh-bothwell"}, "edited": false, "score": 0, "creation_date": 1514406840, "post_id": 47998156, "comment_id": 82964942, "body": "Sounds like Pycharm does word-wrapping, which a command-line doesn&#39;t. You may want to look at <code>textwrap.wrap</code>."}], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 9059975, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-aQRJ4sXeHY8/AAAAAAAAAAI/AAAAAAAAADA/ICNAfobJflk/photo.jpg?sz=128", "display_name": "Jeff Moorhead", "link": "https://stackoverflow.com/users/9059975/jeff-moorhead"}, "edited": false, "score": 1, "creation_date": 1514408379, "post_id": 47998481, "comment_id": 82965491, "body": "Very nice solution! I bet if I combine your code with textwrap, I will get exactly what I&#39;m looking for."}], "tags": [], "owner": {"reputation": 4708, "user_id": 5007059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/477099189c307a35bfb73097b19af9fe?s=128&d=identicon&r=PG&f=1", "display_name": "ndmeiri", "link": "https://stackoverflow.com/users/5007059/ndmeiri"}, "is_accepted": true, "score": 1, "last_activity_date": 1514407744, "creation_date": 1514407744, "answer_id": 47998481, "question_id": 47998156, "link": "https://stackoverflow.com/questions/47998156/python-format-a-list-so-elements-are-not-split-between-lines/47998481#47998481", "title": "Python - Format a list so elements are not split between lines", "body": "<p>Try something like this:</p>\n\n<pre><code># Gather primes in some way.\nprimes = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31]\n\n# Group the primes.\nper_line = 5\ngrouped_primes = [primes[i:i+per_line] for i in range(0, len(primes), per_line)]\n\n# Print each group.\nfor group in grouped_primes:\n    print(', '.join(str(x) for x in group))\n</code></pre>\n\n<h3>Output</h3>\n\n<pre><code>2, 3, 5, 7, 11\n13, 17, 19, 23, 29\n31\n</code></pre>\n\n<h3>Explanation</h3>\n\n<p>After you gather the list of primes, group the entire list into slices of (in this example) 5 elements each. Change the <code>per_line</code> variable to change the number of primes printed on each line.</p>\n\n<p>This code snippet will not handle the case when <code>per_line</code> is sufficiently large that the printed primes cause the console line to wrap.</p>\n\n<p>I also shortened the printing step to one line by using <code>join()</code> on each group of primes.</p>\n\n<p>You were concerned about \"abandoning the generality of the program and using a bunch of for-loops,\" but this code snippet avoids a loss of generality and only uses one for-loop.</p>\n"}, {"comments": [{"owner": {"reputation": 4708, "user_id": 5007059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/477099189c307a35bfb73097b19af9fe?s=128&d=identicon&r=PG&f=1", "display_name": "ndmeiri", "link": "https://stackoverflow.com/users/5007059/ndmeiri"}, "edited": false, "score": 0, "creation_date": 1514409623, "post_id": 47998645, "comment_id": 82965913, "body": "The columns will fall out of alignment for primes greater than 99 (primes with three or more digits)."}, {"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "reply_to_user": {"reputation": 4708, "user_id": 5007059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/477099189c307a35bfb73097b19af9fe?s=128&d=identicon&r=PG&f=1", "display_name": "ndmeiri", "link": "https://stackoverflow.com/users/5007059/ndmeiri"}, "edited": false, "score": 0, "creation_date": 1514409813, "post_id": 47998645, "comment_id": 82965984, "body": "Agreed, but the user can modify the code to the desired fixed width. Or one can choose to compute the appropriate width based on the input."}], "tags": [], "owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "is_accepted": false, "score": 0, "last_activity_date": 1514409300, "last_edit_date": 1514409300, "creation_date": 1514408767, "answer_id": 47998645, "question_id": 47998156, "link": "https://stackoverflow.com/questions/47998156/python-format-a-list-so-elements-are-not-split-between-lines/47998645#47998645", "title": "Python - Format a list so elements are not split between lines", "body": "<p>Here's another way to do it, using fixed width formatting and only one iteration through your list:</p>\n\n<pre><code>primes = [3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 47]\nN = 5  # the number to print each line\n\nprint(\n    ''.join(\n        map(\n            lambda x: \" %2d\\n\" % x[1] if ((x[0]+1)%(N)==0) else \" %2d\" % x[1],\n            enumerate(primes)\n        )\n    )\n)\n</code></pre>\n\n<p>The output will be:</p>\n\n<pre><code>  3  5  7 11 13\n 17 19 23 29 31\n 37 41 47\n</code></pre>\n\n<p>The <code>%2d</code> in the string formatting says print my numbers using 2 spaces. The logic here is that you build a list of strings for printing. Every <code>N</code> digits, you add a newline (<code>\\n</code>) to your string. Finally join the strings together with an empty string (<code>''</code>).</p>\n\n<p>Note: <code>enumerate</code> returns a tuple of (index, value), so <code>x[0]</code> refers to the index in the list and <code>x[1]</code> refers to the value at that index.</p>\n"}, {"comments": [{"owner": {"reputation": 171, "user_id": 9059975, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-aQRJ4sXeHY8/AAAAAAAAAAI/AAAAAAAAADA/ICNAfobJflk/photo.jpg?sz=128", "display_name": "Jeff Moorhead", "link": "https://stackoverflow.com/users/9059975/jeff-moorhead"}, "edited": false, "score": 0, "creation_date": 1514411488, "post_id": 47998874, "comment_id": 82966590, "body": "When I used pprint, it started a new line after each element."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "reply_to_user": {"reputation": 171, "user_id": 9059975, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-aQRJ4sXeHY8/AAAAAAAAAAI/AAAAAAAAADA/ICNAfobJflk/photo.jpg?sz=128", "display_name": "Jeff Moorhead", "link": "https://stackoverflow.com/users/9059975/jeff-moorhead"}, "edited": false, "score": 0, "creation_date": 1514411676, "post_id": 47998874, "comment_id": 82966646, "body": "Hmm, that&#39;s strange. Previously, I got the same effect, that&#39;s why I added the <code>compact=True</code> argument."}, {"owner": {"reputation": 171, "user_id": 9059975, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-aQRJ4sXeHY8/AAAAAAAAAAI/AAAAAAAAADA/ICNAfobJflk/photo.jpg?sz=128", "display_name": "Jeff Moorhead", "link": "https://stackoverflow.com/users/9059975/jeff-moorhead"}, "edited": false, "score": 0, "creation_date": 1514411763, "post_id": 47998874, "comment_id": 82966667, "body": "I really ought to investigate the docs more. I didn&#39;t know there was a compact keyword argument. Thanks for pointing that out."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "reply_to_user": {"reputation": 171, "user_id": 9059975, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-aQRJ4sXeHY8/AAAAAAAAAAI/AAAAAAAAADA/ICNAfobJflk/photo.jpg?sz=128", "display_name": "Jeff Moorhead", "link": "https://stackoverflow.com/users/9059975/jeff-moorhead"}, "edited": false, "score": 0, "creation_date": 1514411919, "post_id": 47998874, "comment_id": 82966712, "body": "<a href=\"https://docs.python.org/3/library/pprint.html#pprint.pprint\" rel=\"nofollow noreferrer\">&#91;Python&#93;: pprint.pprint(object, stream=None, indent=1, width=80, depth=None, *, compact=False)</a>"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "reply_to_user": {"reputation": 171, "user_id": 9059975, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-aQRJ4sXeHY8/AAAAAAAAAAI/AAAAAAAAADA/ICNAfobJflk/photo.jpg?sz=128", "display_name": "Jeff Moorhead", "link": "https://stackoverflow.com/users/9059975/jeff-moorhead"}, "edited": false, "score": 0, "creation_date": 1514427821, "post_id": 47998874, "comment_id": 82970209, "body": "DownVoter, could you explain yourself?"}, {"owner": {"reputation": 171, "user_id": 9059975, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-aQRJ4sXeHY8/AAAAAAAAAAI/AAAAAAAAADA/ICNAfobJflk/photo.jpg?sz=128", "display_name": "Jeff Moorhead", "link": "https://stackoverflow.com/users/9059975/jeff-moorhead"}, "edited": false, "score": 0, "creation_date": 1514430609, "post_id": 47998874, "comment_id": 82970760, "body": "no problem, I have learned in my short time as a StackOverflow member that some people are really downvote happy. Your answer was very thorough."}], "tags": [], "owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "is_accepted": false, "score": 0, "last_activity_date": 1514411792, "last_edit_date": 1514411792, "creation_date": 1514410200, "answer_id": 47998874, "question_id": 47998156, "link": "https://stackoverflow.com/questions/47998156/python-format-a-list-so-elements-are-not-split-between-lines/47998874#47998874", "title": "Python - Format a list so elements are not split between lines", "body": "<p>Here are a bunch of methods that print the list, nothing really stands out. I remember that at some point I've read something very nice on tabular I/O formatting, but I can't remember now.</p>\n\n<p><em>code.py</em>:</p>\n\n<pre><code>import sys\n#import prime_functions as pf  # Decomment this line\nfrom pprint import pprint as pp\n\n\ndef print_list(seq, items_per_line=5, chars_per_item=4):\n    l = len(seq)\n    for idx, element in enumerate(seq, start=1):\n        if (idx and idx % items_per_line == 0) or idx == l:\n            end = \"\\n\"\n        else:\n            end = \", \"\n        print(\"{}\".format(element).rjust(chars_per_item), end=end)\n\n\nnumber = int(input(\"Find primes up to what number? \"))\n# Save primes to a list.\nprimes = list(range(1234, 1275))\n#primes = pf.list_primes(number)  # Decomment this line (, and comment the one above)\n\nif not primes:\n    print(\"Empty list returned. Exiting...\")\n    sys.exit()\n\nprint(\"\\n1 - Original method:\")\nfor prime in primes[:-1]:\n    print(prime, end=', ')\nprint(primes[-1])\n\nprint(\"\\n2 - Elements one by one (not much of a difference):\")\nprint(*primes)\n\nprint(\"\\n3 - pprint:\")\npp(primes, compact=True)\n\nprint(\"\\n4 - Custom method 0:\")\nprint_list(primes)\n\n\n# Print length of primes.\nprint(f'\\nNumber of primes less than {number}: {len(primes)}')\n\n# Pause before exiting.\ninput(\"\\nPress ENTER to exit...\")\n</code></pre>\n\n<p><strong>Output</strong> (truncated lines to look <strong>exaclty</strong> as in my (140 chars wide) <em>cmd</em> console):</p>\n\n<blockquote>\n<pre><code>(py36x64_test) e:\\Work\\Dev\\StackOverflow\\q47998156&gt;\"e:\\Work\\Dev\\VEnvs\\py36x64_test\\Scripts\\python.exe\" code.py\nFind primes up to what number? 0\n\n1 - Original method:\n1234, 1235, 1236, 1237, 1238, 1239, 1240, 1241, 1242, 1243, 1244, 1245, 1246, 1247, 1248, 1249, 1250, 1251, 1252, 1253, 1254, 1255, 1256, 12\n57, 1258, 1259, 1260, 1261, 1262, 1263, 1264, 1265, 1266, 1267, 1268, 1269, 1270, 1271, 1272, 1273, 1274\n\n2 - Elements one by one (not much of a difference):\n1234 1235 1236 1237 1238 1239 1240 1241 1242 1243 1244 1245 1246 1247 1248 1249 1250 1251 1252 1253 1254 1255 1256 1257 1258 1259 1260 1261 \n1262 1263 1264 1265 1266 1267 1268 1269 1270 1271 1272 1273 1274\n\n3 - pprint:\n[1234, 1235, 1236, 1237, 1238, 1239, 1240, 1241, 1242, 1243, 1244, 1245, 1246,\n1247, 1248, 1249, 1250, 1251, 1252, 1253, 1254, 1255, 1256, 1257, 1258, 1259,\n1260, 1261, 1262, 1263, 1264, 1265, 1266, 1267, 1268, 1269, 1270, 1271, 1272,\n1273, 1274]\n\n4 - Custom method 0:\n1234, 1235, 1236, 1237, 1238\n1239, 1240, 1241, 1242, 1243\n1244, 1245, 1246, 1247, 1248\n1249, 1250, 1251, 1252, 1253\n1254, 1255, 1256, 1257, 1258\n1259, 1260, 1261, 1262, 1263\n1264, 1265, 1266, 1267, 1268\n1269, 1270, 1271, 1272, 1273\n1274\n\nNumber of primes less than 0: 41\n\nPress ENTER to exit...\n</code></pre>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1514411535, "post_id": 47998894, "comment_id": 82966604, "body": "Agree. +1, to counteract dounvoting effect."}], "tags": [], "owner": {"reputation": 131, "user_id": 7577227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46575c7cc0e98a2f0ad90e7d9ac99407?s=128&d=identicon&r=PG&f=1", "display_name": "B3W", "link": "https://stackoverflow.com/users/7577227/b3w"}, "is_accepted": false, "score": 1, "last_activity_date": 1514410336, "creation_date": 1514410336, "answer_id": 47998894, "question_id": 47998156, "link": "https://stackoverflow.com/questions/47998156/python-format-a-list-so-elements-are-not-split-between-lines/47998894#47998894", "title": "Python - Format a list so elements are not split between lines", "body": "<p>You could keep track of the index you are at and print in accordance to how many you want on a single line. Using your code for example to print five on a line like requested:</p>\n\n<pre><code>count = 1\nitems_per_line = 5\nfor prime in primes[0:len(primes)-1]:\n    if count % items_per_line != 0:\n        print(prime, end=', ')\n    else:\n        print(prime, end=',\\n')\n    count += 1\nif count % items_per_line != 0:\n    print(primes[len(primes)-1])\nelse:\n    print(\"\\n\" + str(primes[len(primes)-1]))\n</code></pre>\n\n<p>The modulus operator(%) will determine if count is a multiple of 5 and if it is then the print will add a new line to the end of the prime number. \nThe output of <code>primes = [1, 3, 5, 7, 11, 13, 17]</code> will be:</p>\n\n<pre><code>1, 2, 3, 5, 7,\n11, 13, 17\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 9059975, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-aQRJ4sXeHY8/AAAAAAAAAAI/AAAAAAAAADA/ICNAfobJflk/photo.jpg?sz=128", "display_name": "Jeff Moorhead", "link": "https://stackoverflow.com/users/9059975/jeff-moorhead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 574, "favorite_count": 0, "accepted_answer_id": 47998481, "answer_count": 4, "score": 4, "last_activity_date": 1514411792, "creation_date": 1514405934, "last_edit_date": 1514408021, "question_id": 47998156, "link": "https://stackoverflow.com/questions/47998156/python-format-a-list-so-elements-are-not-split-between-lines", "title": "Python - Format a list so elements are not split between lines", "body": "<p>I wrote a program to list all the prime numbers less than a number the user inputs. When I run the program in PyCharm, the output is very nice: each number is properly situated on the line and no numbers are spread across two lines. However, when I run the program from the command line, the formatting gets weird, with numbers at the end of a row sometimes getting cut off. </p>\n\n<p>Here is my code:</p>\n\n<pre><code>import prime_functions as pf\n\nnumber = int(input(\"Find primes up to what number? \"))\n# Save primes to a list.\nprimes = pf.list_primes(number)\n\nfor prime in primes[0:len(primes)-1]:\n    print(prime, end=', ')\nprint(primes[len(primes)-1])\n\n# Print length of primes.\nprint(f'Number of primes less than {number}: {len(primes)}')\n\n# Pause before exiting.\ninput()\n</code></pre>\n\n<p>The <code>list_primes</code> function simply checks whether each odd number from three to the user's number is prime and returns a list of all the primes it finds.</p>\n\n<p>What I would like to do ideally is print a small slice of the <code>primes</code> list on each line (say, five elements per line), but I can't think of how to do that without abandoning the generality of the program and using a bunch of for-loops. Are there any Python tricks out there that will help me?</p>\n"}, {"tags": ["python", "python-3.x", "pyqt", "qtreeview", "qsplitter"], "answers": [{"comments": [{"owner": {"reputation": 2415, "user_id": 3340758, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e307c27bd3f5c921504d0e92a1cc3c5a?s=128&d=identicon&r=PG&f=1", "display_name": "artomason", "link": "https://stackoverflow.com/users/3340758/artomason"}, "edited": false, "score": 0, "creation_date": 1514416479, "post_id": 47999446, "comment_id": 82967941, "body": "I&#39;m actually surprised that <code>sizeHint()</code> has not been implemented in a more straight forward manor such as <code>setSizeHint(width, height)</code> or something to that effect. I made the layout in Qt Creator, so subclassing would be undesirable, and I know that I can&#39;t use <code>setWidth(val)</code> directly on the <code>QTreeView</code>, but that method seems like the best option if I&#39;m looking for an accurate size."}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "reply_to_user": {"reputation": 2415, "user_id": 3340758, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e307c27bd3f5c921504d0e92a1cc3c5a?s=128&d=identicon&r=PG&f=1", "display_name": "artomason", "link": "https://stackoverflow.com/users/3340758/artomason"}, "edited": false, "score": 0, "creation_date": 1514418229, "post_id": 47999446, "comment_id": 82968326, "body": "@AaronTomason. You can use widget promotion - see the update to my answer."}, {"owner": {"reputation": 2415, "user_id": 3340758, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e307c27bd3f5c921504d0e92a1cc3c5a?s=128&d=identicon&r=PG&f=1", "display_name": "artomason", "link": "https://stackoverflow.com/users/3340758/artomason"}, "edited": false, "score": 0, "creation_date": 1514418483, "post_id": 47999446, "comment_id": 82968373, "body": "I think I will give widget promotion a spin. Thanks for the update!"}], "tags": [], "owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "is_accepted": true, "score": 1, "last_activity_date": 1514418118, "last_edit_date": 1514418118, "creation_date": 1514414312, "answer_id": 47999446, "question_id": 47998099, "link": "https://stackoverflow.com/questions/47998099/how-to-set-the-initial-size-of-a-qtreeview-in-a-qsplitter/47999446#47999446", "title": "How to set the initial size of a QTreeView in a QSplitter?", "body": "<p>You can reimplement <code>sizeHint</code> to set the initial size:</p>\n\n<pre><code>class TreeView(QtWidgets.QTreeView):\n    def sizeHint(self):\n        size = super().sizeHint()\n        size.setWidth(320)\n        return size\n</code></pre>\n\n<p>However, if creating a subclass is not desirable, and you don't mind setting a <em>proportional</em> initial size, you can use <a href=\"https://doc.qt.io/qt-5/qsplitter.html#setSizes\" rel=\"nofollow noreferrer\">QSplitter.setSizes</a>. The Qt docs define the behaviour of this method in this way:</p>\n\n<blockquote>\n  <p>The overall size of the splitter widget is not affected. Instead, any\n  additional/missing space is distributed amongst the widgets <strong>according\n  to the relative weight of the sizes</strong>. [emphasis added]</p>\n</blockquote>\n\n<p>So it doesn't matter if sum of the sizes is larger than the splitter; all that matters is the relative weights. Given this, we can just calculate the maximum possible size available, and then divide it up accordingly, like this:</p>\n\n<pre><code>width = QtWidgets.qApp.desktop().availableGeometry(self).width()\nself.splitter.setSizes([width * 2/3, width * 1/3])\n</code></pre>\n\n<p>This will make the first widget twice as large as the second.</p>\n\n<p>In addition to these approaches, you can also use <a href=\"https://doc.qt.io/qt-5/qsplitter.html#saveState\" rel=\"nofollow noreferrer\">QSplitter.saveState</a> and <a href=\"https://doc.qt.io/qt-5/qsplitter.html#restoreState\" rel=\"nofollow noreferrer\">QSplitter.restoreState</a> to save and restore the splitter sizes set by the user from a previous session.</p>\n\n<p><strong>PS</strong>:</p>\n\n<p>If you're using Qt Designer, the above <code>sizeHint</code> approach can be used with widget promotion, which is quite simple to implement. See <a href=\"https://stackoverflow.com/a/42076247/984421\">this answer</a> for an explanation of how to do this.</p>\n"}], "owner": {"reputation": 2415, "user_id": 3340758, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e307c27bd3f5c921504d0e92a1cc3c5a?s=128&d=identicon&r=PG&f=1", "display_name": "artomason", "link": "https://stackoverflow.com/users/3340758/artomason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 702, "favorite_count": 0, "accepted_answer_id": 47999446, "answer_count": 1, "score": 1, "last_activity_date": 1514418118, "creation_date": 1514405608, "last_edit_date": 1514414453, "question_id": 47998099, "link": "https://stackoverflow.com/questions/47998099/how-to-set-the-initial-size-of-a-qtreeview-in-a-qsplitter", "title": "How to set the initial size of a QTreeView in a QSplitter?", "body": "<p>I have a <code>QTreeView</code> inside of a <code>QSplitter</code> that I want to set the initial size of. I have found that I can set both <code>setMinimumWidth(val)</code> and <code>setFixedWidth(val)</code> on the <code>QTreeView</code>, but neither of those seem to do what I need.</p>\n\n<p>The <code>setMinimumWidth(val)</code> only prevents the <code>QTreeView</code> from getting smaller than the value of <code>val</code>, and <code>setFixedWidth</code> prevents the user from resizing the <code>QTreeView</code> entirely.</p>\n\n<p>Is there anyway to set the initial size, either by setting <code>QSplitter</code> or setting <code>QTreeView</code>? I assume I need to set the <code>sizeHint</code>, but I'm not quite sure.</p>\n\n<p>I'm using Python 3 with PyQt5</p>\n"}, {"tags": ["python", "pandas", "matplotlib", "plot"], "answers": [{"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 2, "last_activity_date": 1514405450, "creation_date": 1514405450, "answer_id": 47998074, "question_id": 47998025, "link": "https://stackoverflow.com/questions/47998025/python-line-plot-for-values-grouped-by-multiple-columns/47998074#47998074", "title": "Python: line plot for values grouped by multiple columns", "body": "<p>what about unstacking your series and plotting everything in one command:</p>\n\n<pre><code>In [36]: s\nOut[36]:\nrelease_year  genre\n1960.0        Action        8\n              Adventure     5\n              Comedy        8\n              Crime         2\n              Drama        13\n              Family        3\n              Fantasy       2\n              Foreign       1\n              History       5\n              Horror        7\n                           ..\n1961.0        Crime         2\n              Drama        16\n              Family        5\n              Fantasy       2\n              Foreign       1\n              History       3\n              Horror        3\n              Music         2\n              Mystery       1\n              Romance       7\nName: count, Length: 30, dtype: int64\n\nIn [37]: s.unstack()\nOut[37]:\ngenre         Action  Adventure  Animation  Comedy  Crime  Drama  Family  Fantasy  Foreign  History  Horror  Music  Mystery  Romance  \\\nrelease_year\n1960.0           8.0        5.0        NaN     8.0    2.0   13.0     3.0      2.0      1.0      5.0     7.0    1.0      NaN      6.0\n1961.0           7.0        6.0        1.0    10.0    2.0   16.0     5.0      2.0      1.0      3.0     3.0    2.0      1.0      7.0\n\ngenre         Science Fiction  Thriller  War  Western\nrelease_year\n1960.0                    3.0       6.0  2.0      6.0\n1961.0                    NaN       NaN  NaN      NaN\n</code></pre>\n\n<p>Plotting:</p>\n\n<pre><code>s.unstack().plot()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 2, "last_activity_date": 1514405921, "last_edit_date": 1514405921, "creation_date": 1514405503, "answer_id": 47998082, "question_id": 47998025, "link": "https://stackoverflow.com/questions/47998025/python-line-plot-for-values-grouped-by-multiple-columns/47998082#47998082", "title": "Python: line plot for values grouped by multiple columns", "body": "<pre><code>df_new.unstack().T.plot(kind='bar')\n</code></pre>\n\n<p>I chose bar plot, you can change to <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.plot.html\" rel=\"nofollow noreferrer\">what ever</a> you need </p>\n\n<p>PS: you can consider <code>crosstab</code> rather than <code>groupby</code></p>\n\n<pre><code>pd.crosstab(df.genre,df.release_year).plot(kind='bar')\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/DoJIj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DoJIj.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 4471, "user_id": 2598661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077bac49baa40c91fca05d805a30b075?s=128&d=identicon&r=PG", "display_name": "nitred", "link": "https://stackoverflow.com/users/2598661/nitred"}, "is_accepted": false, "score": 0, "last_activity_date": 1514407779, "creation_date": 1514407779, "answer_id": 47998490, "question_id": 47998025, "link": "https://stackoverflow.com/questions/47998025/python-line-plot-for-values-grouped-by-multiple-columns/47998490#47998490", "title": "Python: line plot for values grouped by multiple columns", "body": "<p>I'd recommend using <code>seaborn</code> which would help avoid manipulation of the dataframe before plotting. You can install it by running <code>pip install seaborn</code>. It has a simple API for standard kinds of plots:</p>\n\n<h1>release_year vs genre</h1>\n\n<pre><code>import seaborn as sns\nsns.countplot(x='release_year', hue='genre', data=df)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/V4uHW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/V4uHW.png\" alt=\"release_year vs genre\"></a></p>\n\n<h1>genre vs release_year</h1>\n\n<pre><code>import seaborn as sns\nsns.countplot(x='genre', hue='release_year', data=df)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/D9p5r.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/D9p5r.png\" alt=\"genre vs release_year\"></a></p>\n"}], "owner": {"reputation": 33, "user_id": 8805631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d61220c47b008c50969064148cc2ba61?s=128&d=identicon&r=PG&f=1", "display_name": "Chippy", "link": "https://stackoverflow.com/users/8805631/chippy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1756, "favorite_count": 0, "accepted_answer_id": 47998074, "answer_count": 3, "score": 2, "last_activity_date": 1514407779, "creation_date": 1514405193, "question_id": 47998025, "link": "https://stackoverflow.com/questions/47998025/python-line-plot-for-values-grouped-by-multiple-columns", "title": "Python: line plot for values grouped by multiple columns", "body": "<p>I have a dataframe which has 2 columns: genre and release_year. Each year has multiple genres. The format is given below:</p>\n\n<pre><code>genre   release_year\nAction  2015\nAction  2015\nAdventure   2015\nAction  2015\nAction  2015\n</code></pre>\n\n<p>I need to plot the change in all genres through the years using Pandas/Python.</p>\n\n<pre><code>df = pd.read('genres.csv')\n\ndf.shape\n(53975, 2)\n\n\ndf_new = df.groupby(['release_year', 'genre'])['genre'].count()\n</code></pre>\n\n<p>This results in the following grouping.</p>\n\n<pre><code>release_year  genre          \n1960      Action               8\n          Adventure            5\n          Comedy               8\n          Crime                2\n          Drama               13\n          Family               3\n          Fantasy              2\n          Foreign              1\n          History              5\n          Horror               7\n          Music                1\n          Romance              6\n          Science Fiction      3\n          Thriller             6\n          War                  2\n          Western              6\n1961      Action               7\n          Adventure            6\n          Animation            1\n          Comedy              10\n          Crime                2\n          Drama               16\n          Family               5\n          Fantasy              2\n          Foreign              1\n          History              3\n          Horror               3\n          Music                2\n          Mystery              1\n          Romance              7\n                            ... \n</code></pre>\n\n<p>I need to plot line graphs for the changes in genre characteristics through the years. i.e I have to have a loop which helps me plot for each genre through the years. For example,</p>\n\n<pre><code>df_action = df.query('genre == \"Action\"')\nresult_plot = df_action.groupby(['release_year','genre'])['genre'].count()\nresult_plot.plot(figsize=(10,10));\n</code></pre>\n\n<p>shows the plot for the genre 'Action'. Likewise instead of plotting for each genre separately i need to have a loop for the same.</p>\n\n<p>How can I do that? Can anyone please help me with this?</p>\n\n<p>I tried the following but it doesn't work.</p>\n\n<pre><code>genres = [\"Action\", \"Adventure\", \"Western\", \"Science Fiction\", \"Drama\",\n   \"Family\", \"Comedy\", \"Crime\", \"Romance\", \"War\", \"Mystery\",\n   \"Thriller\", \"Fantasy\", \"History\", \"Animation\", \"Horror\", \"Music\",\n   \"Documentary\", \"TV Movie\", \"Foreign\"]\n\nfor g in genres:\n    #df_new = df.query('genre == \"g\"')\n    result_plot = df.groupby(['release_year','genre'])['genre'].count()\n    result_plot.plot(figsize=(10,10));\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "edited": false, "score": 6, "creation_date": 1514405073, "post_id": 47997979, "comment_id": 82964297, "body": "<code>if int(root) == root</code>."}, {"owner": {"reputation": 3588, "user_id": 5462551, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/647be55cadd0e8edac86c55a337b264c?s=128&d=identicon&r=PG&f=1", "display_name": "noamgot", "link": "https://stackoverflow.com/users/5462551/noamgot"}, "edited": false, "score": 0, "creation_date": 1514405306, "post_id": 47997979, "comment_id": 82964399, "body": "btw, you problem is with the <code>isinstance</code> method - it returns a float type"}, {"owner": {"reputation": 11, "user_id": 9146659, "user_type": "registered", "profile_image": "https://graph.facebook.com/846706852166996/picture?type=large", "display_name": "Andrei Bratosin", "link": "https://stackoverflow.com/users/9146659/andrei-bratosin"}, "edited": false, "score": 0, "creation_date": 1514472184, "post_id": 47997979, "comment_id": 82987140, "body": "Thank you! Now it works perfectly"}], "owner": {"reputation": 11, "user_id": 9146659, "user_type": "registered", "profile_image": "https://graph.facebook.com/846706852166996/picture?type=large", "display_name": "Andrei Bratosin", "link": "https://stackoverflow.com/users/9146659/andrei-bratosin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "closed_date": 1514405161, "answer_count": 0, "score": 1, "last_activity_date": 1514405644, "creation_date": 1514404950, "last_edit_date": 1514405644, "question_id": 47997979, "link": "https://stackoverflow.com/questions/47997979/how-to-check-whether-or-not-an-integer-is-a-perfect-square", "closed_reason": "Duplicate", "title": "How to check whether or not an integer is a perfect square?", "body": "<p>I am pretty new to Python, and I'm trying to check whether or not an integer submitted by the  user is a perfect square, and this is what I came up with:</p>\n\n<pre><code>import math\nnumber=int(input(\"Insert number here: \"))\nroot= math.sqrt(number)\nif isinstance(root, int):\n    print(\"This number is a perfect square!\")\nelse:\n    print(\"This number is not a perfect square!\")\n</code></pre>\n\n<p>Now, I understand that the problem is that, if i were to input <code>9</code>, the program would store root as <code>3.0</code>, which would make it a floating point. But how can I fix this?</p>\n"}, {"tags": ["python", "arrays", "string", "object", "keyerror"], "comments": [{"owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "edited": false, "score": 2, "creation_date": 1514404987, "post_id": 47997953, "comment_id": 82964260, "body": "make sure to check the content of both <code>line</code> and <code>prev_line</code> json (also if your <code>add ...</code> is having such reference of &quot;transactions&quot;)"}, {"owner": {"reputation": 2507, "user_id": 2287557, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/Hdh8F.jpg?s=128&g=1", "display_name": "ewizard", "link": "https://stackoverflow.com/users/2287557/ewizard"}, "reply_to_user": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "edited": false, "score": 0, "creation_date": 1514405256, "post_id": 47997953, "comment_id": 82964371, "body": "ahh i think its prev_line one sec"}, {"owner": {"reputation": 2507, "user_id": 2287557, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/Hdh8F.jpg?s=128&g=1", "display_name": "ewizard", "link": "https://stackoverflow.com/users/2287557/ewizard"}, "reply_to_user": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "edited": false, "score": 0, "creation_date": 1514410783, "post_id": 47997953, "comment_id": 82966330, "body": "u were right @MoinuddinQuadri fill out an answer if you want"}], "owner": {"reputation": 2507, "user_id": 2287557, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/Hdh8F.jpg?s=128&g=1", "display_name": "ewizard", "link": "https://stackoverflow.com/users/2287557/ewizard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 510, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1514404803, "creation_date": 1514404803, "question_id": 47997953, "link": "https://stackoverflow.com/questions/47997953/python-keyerror-when-referencing-array-in-object", "title": "python - keyerror when referencing array in object", "body": "<pre><code>if json.loads(line)['index'] &gt; 1:\n    pprint(json.loads(line))\n    if json.loads(line)['transactions'][0]['recipient'] != json.loads(prev_line)['transactions'][0]['recipient'] and ...\n</code></pre>\n\n<p>This is my console output and error:</p>\n\n<pre><code>Eamons-MBP:blockchain-clone eamonwhite$ python3 pytest.py\n{'index': 2,\n 'previous_hash': 'aa097e7a6946fa1a034d1330ed1ce3b425f74a071e8b09499647706270684649',\n 'proof': 888273,\n 'timestamp': 1514402104.78347,\n 'transactions': [{'amount': 1,\n                   'recipient': 'a7cfdfcc523b453284281102b87a1dfe',\n                   'sender': '0'}]}\nTraceback (most recent call last):\n  File \"pytest.py\", line 14, in &lt;module&gt;\n    if json.loads(line)['transactions'][0]['recipient'] != json.loads(prev_line)['transactions'][0]['recipient'] and ...\nKeyError: 'transactions'\n</code></pre>\n\n<p>The object being output is immediately is just the starting line and you can see that it has a <code>transactions</code> key which is storing an array with one object in it. How do I reference it?</p>\n"}, {"tags": ["python", "pool", "catboost"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7989415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hH25H.jpg?s=128&g=1", "display_name": "Sergey Novozhilov", "link": "https://stackoverflow.com/users/7989415/sergey-novozhilov"}, "is_accepted": false, "score": 0, "last_activity_date": 1514413616, "creation_date": 1514413616, "answer_id": 47999361, "question_id": 47997932, "link": "https://stackoverflow.com/questions/47997932/how-to-create-column-description-cd-file-for-catboost/47999361#47999361", "title": "How to create column description (CD) file for Catboost", "body": "<p>The bag was a redundant unprintable char in a CD file. I didn't catch which one.\nHere is the code for generating CD file.</p>\n\n<pre><code>def catboostCD(fname, cat_features, cat_features_names, sep='\\t' ):\n    with open(fname,\"w\") as fout:\n        fout.write('0{0}Target'.format(sep))\n        fout.write(''.join(['\\n{0}{1}Categ{1}{2}'.format(el[0], sep, el[1]) for el in zip(cat_features, cat_features_names)]))\n</code></pre>\n\n<p>where </p>\n\n<pre><code>cat_features = np.ravel( np.where( np.char.startswith(list(features.columns), prefix='cat_') ) )\ncat_features_names = features.columns.values[ cat_features]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 756, "user_id": 8333590, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4cX-zoFquTM/AAAAAAAAAAI/AAAAAAAAADk/rT8Ir1eBre0/photo.jpg?sz=128", "display_name": "Anna Veronika Dorogush", "link": "https://stackoverflow.com/users/8333590/anna-veronika-dorogush"}, "is_accepted": false, "score": 0, "last_activity_date": 1554738353, "creation_date": 1554738353, "answer_id": 55577186, "question_id": 47997932, "link": "https://stackoverflow.com/questions/47997932/how-to-create-column-description-cd-file-for-catboost/55577186#55577186", "title": "How to create column description (CD) file for Catboost", "body": "<p>CatBoost Python library has a create_cd() method (<a href=\"https://catboost.ai/docs/concepts/python-reference_utils_create_cd.html\" rel=\"nofollow noreferrer\">https://catboost.ai/docs/concepts/python-reference_utils_create_cd.html</a>)</p>\n\n<p>Here is an example of how to use it to create a file with different types of columns:</p>\n\n<pre><code>from catboost.utils import create_cd\nfeature_names = {\n    4: 'Categ1',\n    5: 'Categ2',\n    12: 'Num1'\n}\n\ncreate_cd(\n    label=0,\n    cat_features=(4, 5, 6),\n    weight=1,\n    baseline=2,\n    doc_id=3,\n    group_id=7,\n    subgroup_id=8,\n    timestamp=9,\n    auxiliary_columns=(10, 11),\n    feature_names=feature_names,\n    output_path='train.cd'\n)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7989415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hH25H.jpg?s=128&g=1", "display_name": "Sergey Novozhilov", "link": "https://stackoverflow.com/users/7989415/sergey-novozhilov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 469, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1554738353, "creation_date": 1514404660, "last_edit_date": 1514405634, "question_id": 47997932, "link": "https://stackoverflow.com/questions/47997932/how-to-create-column-description-cd-file-for-catboost", "title": "How to create column description (CD) file for Catboost", "body": "<p>I'm declaring a CD file for reading it from:</p>\n\n<p><code>pool = Pool(features_file, CDfile)</code></p>\n\n<p>Where CDfile contains text and &lt;\\t> delimiters:</p>\n\n<pre><code>0   Target\n1   Categ   cat_reg\n97  Categ   cat_dow\n98  Categ   cat_nweek\n99  Categ   cat_month\n100 Categ   cat_hour\n101 Categ   cat_is_month_start\n102 Categ   cat_is_year_end\n103 Categ   cat_is_year_start\n104 Categ   cat_anomaly2016\n</code></pre>\n\n<p>I am having such a result:\n<strong><em>Factor False in column 102 and row 1 is declared as numeric and cannot be parsed as float. Try correcting column description file.</em></strong></p>\n\n<p>Here is slice for whole features= DataFrame()</p>\n\n<p>len(cat_features), len(features.columns) 9 105</p>\n\n<pre><code>   cat_columns            cat_positions values\n    cat_reg                         1   1075\n    cat_dow                        97      5\n    cat_nweek                      98     17\n    cat_month                      99      4\n    cat_hour                      100      1\n    cat_is_month_start            101  False\n    cat_is_year_end               102  False\n    cat_is_year_start             103  False\n    cat_anomaly2016               104      0\n</code></pre>\n\n<p>What's wrong with column 102? Why is it declared as numeric (not categorical) feature ?</p>\n"}, {"tags": ["python", "pandas", "dataframe", "glob", "listdir"], "comments": [{"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1514404701, "post_id": 47997914, "comment_id": 82964138, "body": "<code>df[&#39;new&#39;] = np.arange(len(df), 0, -1)</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 8014823, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7b0cb7a58a49227d1cf5020d004125e8?s=128&d=identicon&r=PG&f=1", "display_name": "David William", "link": "https://stackoverflow.com/users/8014823/david-william"}, "edited": false, "score": 0, "creation_date": 1514407746, "post_id": 47997958, "comment_id": 82965278, "body": "This correctly does the countdown, but because it globs everything together, it does not do this on each file individually. It combines all the files into one dataframe, then counts down once.  I am looking to have it countdown for EACH file.  If I have 20 files, it should countdown 20 times."}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 0, "last_activity_date": 1514404841, "creation_date": 1514404841, "answer_id": 47997958, "question_id": 47997914, "link": "https://stackoverflow.com/questions/47997914/how-do-i-make-the-same-alteration-to-individual-files-in-a-directory/47997958#47997958", "title": "How do I make the same alteration to individual files in a directory?", "body": "<p>Try this:</p>\n\n<pre><code>for f in glob.glob(r'/path/to/dir/*.csv'):\n    df = pd.read_csv(f)\n    df['Countdown'] = np.arange(len(df), 0, -1)\n    # process df...\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 8014823, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7b0cb7a58a49227d1cf5020d004125e8?s=128&d=identicon&r=PG&f=1", "display_name": "David William", "link": "https://stackoverflow.com/users/8014823/david-william"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1514404841, "creation_date": 1514404531, "question_id": 47997914, "link": "https://stackoverflow.com/questions/47997914/how-do-i-make-the-same-alteration-to-individual-files-in-a-directory", "title": "How do I make the same alteration to individual files in a directory?", "body": "<p>I have a directory that the full set of csv files I would like to make alterations to.  Each csv has a row that has date, and I would like to add a column that counts down from the length of the file down to 1 (so the last, most recent date in the file would have a value of 1 in that column.</p>\n\n<p>I have tried the following:</p>\n\n<pre><code>&gt;import os\n&gt;import pandas as pd\n\n&gt;for f in os.listdir(path):\n\n&gt;    df = pd.read_csv(f)\n\n&gt;    df['Countdown'] = range(len(df), 1, -1)\n</code></pre>\n\n<p>This gives me an error of </p>\n\n<blockquote>\n  <p>FileNotFoundError: File b'Data.csv' does not exist</p>\n</blockquote>\n\n<p>Which is odd as it gives the specific name of the Data file that is in the directory, so it can clearly see the file as it is using it's name in the error message.</p>\n\n<p>I have tried using glob as well.</p>\n\n<pre><code>&gt;import glob\n\n&gt;data_set = glob.glob(path)\n\n&gt;for f in data_set:\n\n&gt;    df = pd.read_csv(f)\n\n&gt;    df['Countdown'] = range(len(df), 1, -1)\n</code></pre>\n\n<p>This does not work as it says:</p>\n\n<blockquote>\n  <p>ValueError: Length of values does not match length of index</p>\n</blockquote>\n\n<p>This error makes sense to me, as the length of the dataframe is constantly increasing as I add more files to it, so the 'len(df)' argument is changing and doesn't match the indexes.</p>\n\n<p>I'm confident that what I'm trying to do isn't too unique, I'm just having trouble finding the best way to perform this task.  Again, the outcome I'm looking for it to have individual files that each have a column that counts down from the earliest date to be the length of the dataframe, and the most recent date having a value of 1.</p>\n\n<p>Thank you for your assistance.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 4471, "user_id": 2598661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077bac49baa40c91fca05d805a30b075?s=128&d=identicon&r=PG", "display_name": "nitred", "link": "https://stackoverflow.com/users/2598661/nitred"}, "edited": false, "score": 0, "creation_date": 1514404744, "post_id": 47997816, "comment_id": 82964154, "body": "Check if IFTTT works for you: <a href=\"https://ifttt.com/\" rel=\"nofollow noreferrer\">ifttt.com</a>. If it does then you can use their REST API via python&#39;s <code>requests</code> package."}, {"owner": {"reputation": 6305, "user_id": 72987, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/9d1484425e9a125402f85497c7f86a00?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/72987/mike"}, "reply_to_user": {"reputation": 4471, "user_id": 2598661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077bac49baa40c91fca05d805a30b075?s=128&d=identicon&r=PG", "display_name": "nitred", "link": "https://stackoverflow.com/users/2598661/nitred"}, "edited": false, "score": 0, "creation_date": 1514406480, "post_id": 47997816, "comment_id": 82964808, "body": "Its for an aquarium and the items there don&#39;t have ifttt support. You can interface through things via a voltage controller and changes in voltage determine how things run."}], "owner": {"reputation": 6305, "user_id": 72987, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/9d1484425e9a125402f85497c7f86a00?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/72987/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1514404020, "creation_date": 1514404020, "question_id": 47997816, "link": "https://stackoverflow.com/questions/47997816/python-custom-dsl-or-custom-language-inside-python", "title": "Python: Custom DSL or custom language inside python", "body": "<p>I'm looking to write a simple controller using a raspi. I want to do something like this that allows me to easily do things based on other things</p>\n\n<pre><code>if temp &gt; 80\nthen\n   turn_off lights_1\n   turn_off lights_2\nend\n</code></pre>\n\n<p>Something along those lines that doesn't expose python code and using something easy. </p>\n\n<p>I'm open to all suggestions. thanks!</p>\n"}, {"tags": ["javascript", "python", "node.js", "concurrency", "multiprocessing"], "comments": [{"owner": {"reputation": 6361, "user_id": 1333329, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b01d2e1bf9d99a4d8fee15badaa1b41?s=128&d=identicon&r=PG&f=1", "display_name": "Gntem", "link": "https://stackoverflow.com/users/1333329/gntem"}, "edited": false, "score": 0, "creation_date": 1514404127, "post_id": 47997812, "comment_id": 82963903, "body": "read about <code>cluster</code> module here <a href=\"https://nodejs.org/dist/latest-v8.x/docs/api/cluster.html\" rel=\"nofollow noreferrer\">nodejs.org/dist/latest-v8.x/docs/api/cluster.html</a> , there are also some packages that have nice features, not very familiar with python myself."}, {"owner": {"reputation": 99, "user_id": 8665299, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4212d1952ce9b5f64185a1dd89988ae1?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/8665299/michael"}, "reply_to_user": {"reputation": 6361, "user_id": 1333329, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b01d2e1bf9d99a4d8fee15badaa1b41?s=128&d=identicon&r=PG&f=1", "display_name": "Gntem", "link": "https://stackoverflow.com/users/1333329/gntem"}, "edited": false, "score": 0, "creation_date": 1514415532, "post_id": 47997812, "comment_id": 82967687, "body": "cluster is not useful in desktop nodejs"}, {"owner": {"reputation": 6361, "user_id": 1333329, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b01d2e1bf9d99a4d8fee15badaa1b41?s=128&d=identicon&r=PG&f=1", "display_name": "Gntem", "link": "https://stackoverflow.com/users/1333329/gntem"}, "edited": false, "score": 0, "creation_date": 1514480902, "post_id": 47997812, "comment_id": 82991507, "body": "i don&#39;t think you understand what cluster does in node.js.. <code>A single instance of Node.js runs in a single thread. To take advantage of multi-core systems, the user will sometimes want to launch a cluster of Node.js processes to handle the load.</code> its native to node.js and its as close it can get to multiprocessing.."}], "answers": [{"tags": [], "owner": {"reputation": 591, "user_id": 1138204, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a25c8f45467eb50c82c1da824e24b7f8?s=128&d=identicon&r=PG", "display_name": "mahdavipanah", "link": "https://stackoverflow.com/users/1138204/mahdavipanah"}, "is_accepted": false, "score": 0, "last_activity_date": 1531645290, "creation_date": 1531645290, "answer_id": 51346878, "question_id": 47997812, "link": "https://stackoverflow.com/questions/47997812/python-multiprocessing-in-node-js/51346878#51346878", "title": "Python Multiprocessing in Node.js", "body": "<p>Node.js base architecture design is one-threaded, but <a href=\"https://nodejs.org/api/cluster.html\" rel=\"nofollow noreferrer\">cluster module</a> provides a neat approach for taking advantage of multi-core systems for creating TCP and HTTP servers (what you may mean by referring to as <em>server side of Node.js</em>).<br>\nCluster module itself, uses <a href=\"https://nodejs.org/api/child_process.html\" rel=\"nofollow noreferrer\">child processes module</a> to provide its functionality.   </p>\n\n<p><em>Child processes</em> module provides functionalities for opening (spawning) other processes and communicating with them. (see <a href=\"https://dzone.com/articles/understanding-execfile-spawn-exec-and-fork-in-node\" rel=\"nofollow noreferrer\">this article</a> for more information on this module's functionalities)</p>\n\n<p>Given above information you have these options for doing multiprocess operations in Node.js:</p>\n\n<ul>\n<li>Use node's native <em>child processes</em> module</li>\n<li>Use various [including non-native tools and] <a href=\"https://stackoverflow.com/questions/6463945/whats-the-most-efficient-node-js-inter-process-communication-library-method\">techniques for IPC (Inter-process communication) in Node.js</a>:</li>\n</ul>\n"}], "owner": {"reputation": 99, "user_id": 8665299, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4212d1952ce9b5f64185a1dd89988ae1?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/8665299/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 863, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1531645290, "creation_date": 1514403978, "question_id": 47997812, "link": "https://stackoverflow.com/questions/47997812/python-multiprocessing-in-node-js", "title": "Python Multiprocessing in Node.js", "body": "<p>I am new to Node.js but I have an extensive Python background, and I was wondering how I would achieve the same outcome on Node.js as I would with Python Multiprocessing Pools. I have seen people do this without any outside libraries, so it leads me to believe that it is something native to Node. Every time I try to research this topic, I get some response about Clustering, which is effective on the server side of Node.js, but I am using Node through my command line, for desktop apps. Thanks to all!</p>\n"}, {"tags": ["python", "class", "oop", "blackjack"], "comments": [{"owner": {"reputation": 3588, "user_id": 5462551, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/647be55cadd0e8edac86c55a337b264c?s=128&d=identicon&r=PG&f=1", "display_name": "noamgot", "link": "https://stackoverflow.com/users/5462551/noamgot"}, "edited": false, "score": 0, "creation_date": 1514404217, "post_id": 47997805, "comment_id": 82963940, "body": "what&#39;s that <code>get_value</code> function? and <code>show_dealerHand</code>? etc. It seems like there are some missing methods in the <code>Hand</code> class"}, {"owner": {"reputation": 27, "user_id": 2899245, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/16fd7a19568ab756c005e97270b38585?s=128&d=identicon&r=PG&f=1", "display_name": "user2899245", "link": "https://stackoverflow.com/users/2899245/user2899245"}, "reply_to_user": {"reputation": 3588, "user_id": 5462551, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/647be55cadd0e8edac86c55a337b264c?s=128&d=identicon&r=PG&f=1", "display_name": "noamgot", "link": "https://stackoverflow.com/users/5462551/noamgot"}, "edited": false, "score": 0, "creation_date": 1514408090, "post_id": 47997805, "comment_id": 82965392, "body": "@noamgot I edited the code to include all the methods in the Hand class"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 2899245, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/16fd7a19568ab756c005e97270b38585?s=128&d=identicon&r=PG&f=1", "display_name": "user2899245", "link": "https://stackoverflow.com/users/2899245/user2899245"}, "edited": false, "score": 0, "creation_date": 1514418586, "post_id": 47999052, "comment_id": 82968396, "body": "Thank you for that. But after fixing that it seems that the problem still occurs when I call bust and also when I call dealerHand.add_card(deck1.drawCard())."}, {"owner": {"reputation": 27, "user_id": 2899245, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/16fd7a19568ab756c005e97270b38585?s=128&d=identicon&r=PG&f=1", "display_name": "user2899245", "link": "https://stackoverflow.com/users/2899245/user2899245"}, "edited": false, "score": 0, "creation_date": 1514419177, "post_id": 47999052, "comment_id": 82968517, "body": "To be clear, it seems that every time dealerHand.add_card(deck1.drawCard()) is called within while dealerHand.get_value() &lt; 17, it prints the dealer&#39;s hand"}, {"owner": {"reputation": 27, "user_id": 2899245, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/16fd7a19568ab756c005e97270b38585?s=128&d=identicon&r=PG&f=1", "display_name": "user2899245", "link": "https://stackoverflow.com/users/2899245/user2899245"}, "edited": false, "score": 0, "creation_date": 1514420752, "post_id": 47999052, "comment_id": 82968875, "body": "Never mind.. I just found out I had a piece of debugging code that I forgot to comment out which resulted in it constantly printing the cards... <i>face palm</i>"}, {"owner": {"reputation": 3588, "user_id": 5462551, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/647be55cadd0e8edac86c55a337b264c?s=128&d=identicon&r=PG&f=1", "display_name": "noamgot", "link": "https://stackoverflow.com/users/5462551/noamgot"}, "reply_to_user": {"reputation": 27, "user_id": 2899245, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/16fd7a19568ab756c005e97270b38585?s=128&d=identicon&r=PG&f=1", "display_name": "user2899245", "link": "https://stackoverflow.com/users/2899245/user2899245"}, "edited": false, "score": 0, "creation_date": 1514490469, "post_id": 47999052, "comment_id": 82995663, "body": "@user2899245 yap, debugging is an important part of writing programs (if not the most important one). good luck"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1514940537, "post_id": 47999052, "comment_id": 83113373, "body": "Your <code>get_value()</code> function contains <code>print</code> statements. That&#39;s fine if you&#39;re trying to debug <code>get_value()</code>, but once it works, it should just do what it says and not add extraneous output."}], "tags": [], "owner": {"reputation": 3588, "user_id": 5462551, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/647be55cadd0e8edac86c55a337b264c?s=128&d=identicon&r=PG&f=1", "display_name": "noamgot", "link": "https://stackoverflow.com/users/5462551/noamgot"}, "is_accepted": true, "score": 1, "last_activity_date": 1514411389, "creation_date": 1514411389, "answer_id": 47999052, "question_id": 47997805, "link": "https://stackoverflow.com/questions/47997805/python-blackjack-oop-calling-bust-and-blackjack-class-function-keep-reprinting/47999052#47999052", "title": "Python Blackjack OOP - calling bust and blackjack class function keep reprinting card values", "body": "<p>Notice that the <code>bust</code> function returns nothing:</p>\n\n<pre><code>def bust(self):\n    if self.get_value() &gt; 21:\n        print ('Busted!')\n    else:\n        pass\n</code></pre>\n\n<p>However, in the main you \"get\" its return value:</p>\n\n<pre><code>if playerHand.bust():\n    print('Dealer wins!')\nelif dealerHand.bust():\n    print('Player wins!')\n</code></pre>\n\n<p>In that case what you get is <code>None</code>. So what happens here is that <code>playerHand.bust()</code> returns None, which evaluates to <code>False</code>. Therefore, the <code>elif dealerHand.bust()</code> is also being executed, and that is why the dealer's hand is also being printed.</p>\n\n<p>In order to fix this you'll have to return <code>True</code> or <code>False</code>, according to your needs.</p>\n"}], "owner": {"reputation": 27, "user_id": 2899245, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/16fd7a19568ab756c005e97270b38585?s=128&d=identicon&r=PG&f=1", "display_name": "user2899245", "link": "https://stackoverflow.com/users/2899245/user2899245"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 941, "favorite_count": 0, "accepted_answer_id": 47999052, "answer_count": 1, "score": 0, "last_activity_date": 1514411389, "creation_date": 1514403927, "last_edit_date": 1514408054, "question_id": 47997805, "link": "https://stackoverflow.com/questions/47997805/python-blackjack-oop-calling-bust-and-blackjack-class-function-keep-reprinting", "title": "Python Blackjack OOP - calling bust and blackjack class function keep reprinting card values", "body": "<p>I'm trying to use OOP to create a blackjack game and every time I call the blackjack or bust function, it reprints the the hand value of the player and dealer ever. I figure it has to do with the Hand class being initialized, but I'm not sure what the work around is there.</p>\n\n<p>Code below for Hand Class + variables: </p>\n\n<pre><code>class Hand(object):\n\n    def __init__(self):\n\n        self.hand = []\n\n    def add_card(self, card):\n\n        self.hand.append(card)\n        return self.hand\n\n    def __str__(self):\n\n        hand = [str(card) for card in self.hand]\n        print 'Current hand is: ',hand\n\n    def get_value(self):\n        value = 0\n        for card in self.hand:\n            print(card)\n            value += card.value\n        for card in self.hand:\n            if card.card == 'Ace' and value &gt; 21:\n                value -= 10\n        return value\n\n    def bust(self):\n        if self.get_value() &gt; 21:\n            print ('Busted!')\n        else:\n            pass\n\n    def hit_or_stand(self):\n\n        self.hit = 'Hit'\n        self.stand = 'Stand'\n        self.prompter = raw_input('Would you like to hit or stand? ').lower()\n        return self.prompter\n\n    def show_hand(self):\n\n        for card in self.hand:\n            print(str(card))\n\n    def show_dealerHand(self):\n\n        print('Dealers Hand: '+ str(self.hand[0]) + ' ' + '[X]') \n\n    def blackjack(self):\n\n        self.bj = False\n        if self.get_value() == 21:\n            self.bj = True\n            print ('Blackjack!')\n        else:\n            pass\n\n    def dealerHit(self):\n\n        if self.get_value &lt; 17:\n            self.add_card(card)\n        else:\n            pass \n</code></pre>\n\n<p>Here is the main function to run the game:</p>\n\n<pre><code>def runGame():\n    player1 = Player()\n    deck1 = Deck()\n    playerHand = Hand()\n    dealerHand = Hand()\n\n    # deal out cards to player\n    i = 0\n    while i &lt; 2:\n        playerHand.add_card(deck1.drawCard())\n        dealerHand.add_card(deck1.drawCard())\n        i += 1\n    playerHand.__str__()\n    dealerHand.show_dealerHand()\n    player_move = playerHand.hit_or_stand()\n    if player_move == playerHand.hit.lower():\n        playerHand.add_card(deck1.drawCard())\n        while dealerHand.get_value() &lt; 17:\n            dealerHand.add_card(deck1.drawCard())\n        if playerHand.bust():\n            print('Dealer wins!')\n        elif dealerHand.bust():\n            print('Player wins!')\n        if playerHand.blackjack() and dealerHand.blackjack():\n            print('Both the Player and the Dealer have a blackjack!')\n            player1.winnings += player1.amount\n        elif playerHand.get_value() &gt; dealerHand.get_value():\n            print('Player wins')\n            player1.winnings += player1.amount * 2\n        elif playerHand.get_value() &lt; dealerHand.get_value():\n            print('Dealer wins')\n            player1.winnings -= player1.amount\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "matplotlib", "plot"], "answers": [{"comments": [{"owner": {"reputation": 120, "user_id": 4421872, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3358821c5e204afb9f3a09723000db9d?s=128&d=identicon&r=PG&f=1", "display_name": "AF2k15", "link": "https://stackoverflow.com/users/4421872/af2k15"}, "edited": false, "score": 0, "creation_date": 1514404980, "post_id": 47997896, "comment_id": 82964258, "body": "Oh such a simple mistake! The code finishes now but still a solid line for some reason?"}, {"owner": {"reputation": 120, "user_id": 4421872, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3358821c5e204afb9f3a09723000db9d?s=128&d=identicon&r=PG&f=1", "display_name": "AF2k15", "link": "https://stackoverflow.com/users/4421872/af2k15"}, "edited": false, "score": 0, "creation_date": 1514406150, "post_id": 47997896, "comment_id": 82964685, "body": "See my edit to the question that reflects your advice. Can you confirm that the arrow line is still solid on your system? It still shows solid on mine."}, {"owner": {"reputation": 120, "user_id": 4421872, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3358821c5e204afb9f3a09723000db9d?s=128&d=identicon&r=PG&f=1", "display_name": "AF2k15", "link": "https://stackoverflow.com/users/4421872/af2k15"}, "edited": false, "score": 0, "creation_date": 1514407065, "post_id": 47997896, "comment_id": 82965037, "body": "Thanks for the great explanation. I will have to use annotate after all."}], "tags": [], "owner": {"reputation": 29479, "user_id": 1356000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ef54c2101a4c23ea2441ce2b346ffb75?s=128&d=identicon&r=PG", "display_name": "Diziet Asahi", "link": "https://stackoverflow.com/users/1356000/diziet-asahi"}, "is_accepted": true, "score": 2, "last_activity_date": 1514406904, "last_edit_date": 1514406904, "creation_date": 1514404425, "answer_id": 47997896, "question_id": 47997772, "link": "https://stackoverflow.com/questions/47997772/how-to-use-kwargs-in-matplotlib-axes-axes-arrow-python-2-7/47997896#47997896", "title": "How to use kwargs in matplotlib.axes.Axes.arrow python 2.7", "body": "<p>The key of your <code>kwargs</code> dictionary should be a string. In you code, python looks for an object called <code>linestyle</code> which does not exist.</p>\n\n<pre><code>kwargs = {'linestyle':'--'}\n</code></pre>\n\n<p>unfortunately, doing is not enough to produce the desired effect. The line <em>is</em> dashed, but the problem is that the arrow is drawn with a closed path and the dashes are overlaid on top of one another, which cancels the effect. You can see the dashed line by plotting a thicker arrow.</p>\n\n<pre><code>ax = plt.axes()\nkwargs={'linestyle':'--', 'lw':2, 'width':0.05}\nax.arrow(0, 0, 0.5, 0.5, head_width=0.05, head_length=0.1, **kwargs)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/rT8lG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rT8lG.png\" alt=\"enter image description here\"></a></p>\n\n<p>If you want a simple dashed arrow, you have to use a simpler arrow, using <code>annotate</code></p>\n\n<pre><code>ax = plt.axes()\nkwargs={'linestyle':'--', 'lw':2}\nax.annotate(\"\", xy=(0.5, 0.5), xytext=(0, 0),\n    arrowprops=dict(arrowstyle=\"-&gt;\", **kwargs))\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/UHbIl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UHbIl.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 120, "user_id": 4421872, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3358821c5e204afb9f3a09723000db9d?s=128&d=identicon&r=PG&f=1", "display_name": "AF2k15", "link": "https://stackoverflow.com/users/4421872/af2k15"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3124, "favorite_count": 1, "accepted_answer_id": 47997896, "answer_count": 1, "score": 1, "last_activity_date": 1514406904, "creation_date": 1514403773, "last_edit_date": 1514405504, "question_id": 47997772, "link": "https://stackoverflow.com/questions/47997772/how-to-use-kwargs-in-matplotlib-axes-axes-arrow-python-2-7", "title": "How to use kwargs in matplotlib.axes.Axes.arrow python 2.7", "body": "<p>I'm working from arrow_simple_demo.py <a href=\"https://matplotlib.org/examples/pylab_examples/arrow_simple_demo.html\" rel=\"nofollow noreferrer\">here</a> which I have already modified to be:</p>\n\n<pre><code>import matplotlib.pyplot as plt\n\nax = plt.axes()\nax.arrow(0, 0, 0.5, 0.5, head_width=0.05, head_length=0.1)\n</code></pre>\n\n<p>however, I want to change the line style of the arrow to dashed using a kwarg. The arrow docs suggest it is possible. <a href=\"https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.arrow.html#matplotlib.axes.Axes.arrow\" rel=\"nofollow noreferrer\">arrow docs</a></p>\n\n<p>So I tried to give arrow the **kwargs argument to import: </p>\n\n<pre><code>kwargs = {linestyle:'--'}\n</code></pre>\n\n<p>Now my code looks like this:</p>\n\n<pre><code>import matplotlib.pyplot as plt\n\nax = plt.axes()\nkwargs={linestyle:'--'}\nax.arrow(0, 0, 0.5, 0.5, head_width=0.05, head_length=0.1, **kwargs)\n</code></pre>\n\n<p>But the result is:</p>\n\n<pre><code>NameError: name 'linestyle' is not defined\n</code></pre>\n\n<p>I'm wondering if anyone can tell me if I am using the kwargs correctly, and whether I need to import Patch from matplotlib's patches class to make this work. The statement \"Other valid kwargs (inherited from :class:<code>Patch</code>)\" which is in the arrow docs above the listing of kwargs makes me think it might be necessary. I have also been looking at the patches docs to figure that question out. <a href=\"https://matplotlib.org/1.5.3/api/patches_api.html\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>EDIT:</p>\n\n<p>Code finished when I passed linestyle key as a string, but I am not getting the dashed arrow line that I was hoping for. </p>\n\n<pre><code>import matplotlib.pyplot as plt\nax = plt.axes()\nkwargs={'linestyle':'--'}\nax.arrow(0, 0, 0.5, 0.5, head_width=0.05, head_length=0.1, **kwargs)\n</code></pre>\n\n<p>see picture:</p>\n\n<p><a href=\"https://i.stack.imgur.com/s9EZE.png\" rel=\"nofollow noreferrer\">arrow plot solid line</a></p>\n"}, {"tags": ["python", "html", "xpath"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6384198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0883deec431f99052ee0b4fb7fe2c4de?s=128&d=identicon&r=PG&f=1", "display_name": "Tarik Koric", "link": "https://stackoverflow.com/users/6384198/tarik-koric"}, "edited": false, "score": 0, "creation_date": 1514404418, "post_id": 47997792, "comment_id": 82964016, "body": "Awsome that worked thanks, what about something like this <a href=\"https://bittrex.com/Market/Index?MarketName=btc-nxt\" rel=\"nofollow noreferrer\">bittrex.com/Market/Index?MarketName=btc-nxt</a>. Im trying to get the xpath data for the price in dollars //*[@id=&quot;rowChart&quot;]/div[2]/div/div[2]/div/div[2]/span/text()&zwnj;&#8203;. But its also giving me a blank value"}, {"owner": {"reputation": 17034, "user_id": 858913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b5015a60c08feee1d8116be3dd70878d?s=128&d=identicon&r=PG", "display_name": "eLRuLL", "link": "https://stackoverflow.com/users/858913/elrull"}, "reply_to_user": {"reputation": 13, "user_id": 6384198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0883deec431f99052ee0b4fb7fe2c4de?s=128&d=identicon&r=PG&f=1", "display_name": "Tarik Koric", "link": "https://stackoverflow.com/users/6384198/tarik-koric"}, "edited": false, "score": 0, "creation_date": 1514404584, "post_id": 47997792, "comment_id": 82964087, "body": "@TarikKoric that&#39;s a totally different question and a total different case, first is it protected by cloudflare so getting any kind of data from that site will be extremely difficult and also looks like the entire site is generated dynamically with javascript, so a normal request won&#39;t work."}], "tags": [], "owner": {"reputation": 17034, "user_id": 858913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b5015a60c08feee1d8116be3dd70878d?s=128&d=identicon&r=PG", "display_name": "eLRuLL", "link": "https://stackoverflow.com/users/858913/elrull"}, "is_accepted": true, "score": 2, "last_activity_date": 1514403859, "creation_date": 1514403859, "answer_id": 47997792, "question_id": 47997725, "link": "https://stackoverflow.com/questions/47997725/xpath-in-python-not-getting-data/47997792#47997792", "title": "Xpath in python not getting data", "body": "<p>This is a very common mistake when trying to get the <code>xpath</code> from the browser and the <code>table</code> tags, as the browser is the one that normally adds the <code>tbody</code> tag inside of them, which doesn't actually exist inside the response body.</p>\n\n<p>So just remove it and it should be like:</p>\n\n<pre><code>'//*[@id=\"mw-content-text\"]/div/table[1]//tr[2]/td[2]/a[1]/text()'\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6384198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0883deec431f99052ee0b4fb7fe2c4de?s=128&d=identicon&r=PG&f=1", "display_name": "Tarik Koric", "link": "https://stackoverflow.com/users/6384198/tarik-koric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 47997792, "answer_count": 1, "score": 1, "last_activity_date": 1514403859, "creation_date": 1514403557, "last_edit_date": 1514403666, "question_id": 47997725, "link": "https://stackoverflow.com/questions/47997725/xpath-in-python-not-getting-data", "title": "Xpath in python not getting data", "body": "<p>I'm trying to request data from wikipedia in python using xpath.\nI'm getting an empty list. What am I doing wrong.</p>\n\n<pre><code>import requests\n\nfrom lxml import html\n\npageContent=requests.get(\n     'https://en.wikipedia.org/wiki/List_of_Olympic_medalists_in_judo'\n)\n\ntree = html.fromstring(pageContent.content)\n\nname = tree.xpath('//*[@id=\"mw-content-text\"]/div/table[1]/tbody/tr[2]/td[2]/a[1]/text()')\n\nprint name\n</code></pre>\n"}, {"tags": ["python", "algorithm"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1514403757, "post_id": 47997722, "comment_id": 82963767, "body": "have you looked at <code>sorted</code> and <code>filter</code>? Python has <code>map</code>, <code>filter</code>, and <code>reduce</code> constructs, and you could write an equivalent expression with Python&#39;s (a bit unwieldy) anonymous function syntax, using <code>lambda args: &lt;expression with args&gt;</code>... Although, for filtering/mapping, frequently list-comprehensions (and related constructs, e.g. <code>dict</code> comprehensions, <code>set</code> comprehensions, or even generator expressions) are considered more idiomatic."}], "answers": [{"tags": [], "owner": {"reputation": 2609, "user_id": 3991470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e3b05b1db88eadbf74c7102d37de007?s=128&d=identicon&r=PG&f=1", "display_name": "grovina", "link": "https://stackoverflow.com/users/3991470/grovina"}, "is_accepted": true, "score": 2, "last_activity_date": 1514404313, "creation_date": 1514404313, "answer_id": 47997872, "question_id": 47997722, "link": "https://stackoverflow.com/questions/47997722/python-removing-duplicates-from-ordered-list-of-complex-objects/47997872#47997872", "title": "Python - removing duplicates from ordered list of complex objects?", "body": "<p>Use a dictionary to remove duplicates (this will always keep the last occurrence for each _id):</p>\n\n<pre><code>d = {i['_id']: i for i in your_list}\n</code></pre>\n\n<p>Then sort its values by _id:</p>\n\n<pre><code>list(sorted(d.values(), key=lambda i: i['_id']))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": false, "score": 2, "last_activity_date": 1514405466, "last_edit_date": 1514405466, "creation_date": 1514404332, "answer_id": 47997877, "question_id": 47997722, "link": "https://stackoverflow.com/questions/47997722/python-removing-duplicates-from-ordered-list-of-complex-objects/47997877#47997877", "title": "Python - removing duplicates from ordered list of complex objects?", "body": "<p>An idiomatic way, in python, would be:</p>\n\n<pre><code>import itertools\nimport operator\n\nget_id = operator.itemgetter('_id') #factory function: lambda x:x['_id']\ngrouped = itertools.groupby(sorted(json_data, key=get_id), get_id)\n\nresult = [next(g) for k,g in grouped]\n</code></pre>\n\n<p>Note, the built-in python <code>sorted</code> is an stable-sort, using an adaptive merge-sort called timsort.  </p>\n\n<p><code>itertools</code> is a very useful module, implementing various lazy-iterators efficiently. <a href=\"https://docs.python.org/3/library/itertools.html#itertools.groupby\" rel=\"nofollow noreferrer\"><code>groupby</code></a> is a grouping iterator:</p>\n\n<pre><code># [k for k, g in groupby('AAAABBBCCDAABBB')] --&gt; A B C D A B\n# [list(g) for k, g in groupby('AAAABBBCCD')] --&gt; AAAA BBB CC D                 \n</code></pre>\n\n<p>You can create a transliteration of your javascript, using python anonymous functions and a ternary operator (in Python, a \"conditional expression\"). Note, Python's <code>sorted</code> function doesn't use a comparator function, it uses a <a href=\"https://docs.python.org/3/library/functions.html#sorted\" rel=\"nofollow noreferrer\">key-based function</a>:</p>\n\n<blockquote>\n  <p>key specifies a function of one argument that is used to extract a\n  comparison key from each list element: <code>key=str.lower</code>. The default\n  value is <code>None</code> (compare the elements directly).</p>\n</blockquote>\n\n<p>In Python 2, a <code>cmp</code> argument that works similarly to the Javascript version still is available (e.g. a function that returns -1, 1, or 0)</p>\n\n<p><code>cmp</code> was deprecated and finally removed in Python 3 in favor of <code>key</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "is_accepted": false, "score": 1, "last_activity_date": 1514405042, "last_edit_date": 1514405042, "creation_date": 1514404400, "answer_id": 47997889, "question_id": 47997722, "link": "https://stackoverflow.com/questions/47997722/python-removing-duplicates-from-ordered-list-of-complex-objects/47997889#47997889", "title": "Python - removing duplicates from ordered list of complex objects?", "body": "<p>Using <code>sorted</code>, <code>filter</code>, and <code>map</code>:</p>\n\n<pre><code>d = [\n    {\n        \"_id\": 3,\n        \"some_other\": \"a\"\n    },\n    {\n      \"_id\": 1,\n      \"some_other\": \"b\"\n    },\n    {\n        \"_id\": 2,\n        \"some_other\": \"c\"\n    },\n    {\n        \"_id\": 2,\n        \"some_other\": \"d\"\n    }\n]\n\nsorted_d = sorted(d, key=lambda x: x['_id'])\nmap(\n    lambda y: y[1],\n    filter(\n        lambda x: True if x[0]==0 else sorted_d[x[0]][\"_id\"] != sorted_d[x[0]-1][\"_id\"],\n        enumerate(sorted_d)\n    )\n)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[{'_id': 1, 'some_other': 'b'},\n {'_id': 2, 'some_other': 'c'},\n {'_id': 3, 'some_other': 'a'}]\n</code></pre>\n"}], "owner": {"reputation": 4264, "user_id": 2111737, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3cbb6d8cbe739789803ace7db751e3ef?s=128&d=identicon&r=PG", "display_name": "Lapsio", "link": "https://stackoverflow.com/users/2111737/lapsio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 47997872, "answer_count": 3, "score": 0, "last_activity_date": 1514494222, "creation_date": 1514403546, "question_id": 47997722, "link": "https://stackoverflow.com/questions/47997722/python-removing-duplicates-from-ordered-list-of-complex-objects", "title": "Python - removing duplicates from ordered list of complex objects?", "body": "<p>I have list of several milions of dictionaries produced from json in form like this:</p>\n\n<pre><code>{\n  \"_id\":XXX,\n  \"some_other\":\"fields\",\n  ...\n}\n</code></pre>\n\n<p>List needs to be safe-sorted by <code>_id</code> key however there are disctionaries with duplicated <code>_id</code>. There's really few duplicates comparing to size of list (around 10-100 at most). I want to take only first (or last, doesn't matter as long as it's deterministic) dictionary for each duplicated <code>_id</code>. In JavaScript I'd use following:</p>\n\n<pre><code>list.sort((a,b)=&gt;a._id&gt;b._id?1:(a._id&lt;b._id?-1:0))\n    .filter((ent,i,arr)=&gt;i==0||ent!=arr[i-1])\n</code></pre>\n\n<p>However I guess python variant of filter doesn't allow accessing index of item? Is there any similarly short way to accomplish such thing in Python? I found <code>sorted(...)</code> function that allows me to sort this list the way I want, however I still don't know how to filter out following duplicates (without obvious, brute for loop).</p>\n"}, {"tags": ["python", "regex", "python-3.x"], "comments": [{"owner": {"reputation": 15201, "user_id": 7386332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb50c81104978fe1e111da483c41ff0f?s=128&d=identicon&r=PG&f=1", "display_name": "Anton vBR", "link": "https://stackoverflow.com/users/7386332/anton-vbr"}, "edited": false, "score": 2, "creation_date": 1514403230, "post_id": 47997659, "comment_id": 82963547, "body": "There are many ways. You should have a look at doing it with regex. I tagged it with regex and soon the regex sharks will be here."}, {"owner": {"reputation": 25081, "user_id": 4804629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vGzEm.jpg?s=128&g=1", "display_name": "splash58", "link": "https://stackoverflow.com/users/4804629/splash58"}, "edited": false, "score": 1, "creation_date": 1514403292, "post_id": 47997659, "comment_id": 82963567, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/4697006/python-split-string-by-list-of-separators\">Python: Split string by list of separators</a>"}, {"owner": {"reputation": 28612, "user_id": 7954504, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/6POkt.jpg?s=128&g=1", "display_name": "Brad Solomon", "link": "https://stackoverflow.com/users/7954504/brad-solomon"}, "reply_to_user": {"reputation": 15201, "user_id": 7386332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb50c81104978fe1e111da483c41ff0f?s=128&d=identicon&r=PG&f=1", "display_name": "Anton vBR", "link": "https://stackoverflow.com/users/7386332/anton-vbr"}, "edited": false, "score": 1, "creation_date": 1514403571, "post_id": 47997659, "comment_id": 82963685, "body": "@AntonvBR lol.  The regex sharks are circling the waters"}], "answers": [{"tags": [], "owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "is_accepted": false, "score": 5, "last_activity_date": 1514816518, "last_edit_date": 1514816518, "creation_date": 1514403718, "answer_id": 47997761, "question_id": 47997659, "link": "https://stackoverflow.com/questions/47997659/how-to-remove-text-within-parentheses-from-python-string/47997761#47997761", "title": "How to remove text within parentheses from Python string?", "body": "<p>You may use below regex to get the desired result:</p>\n\n<pre><code>\"\\(.*\\)|\\s-\\s.*\"\n#   ^     ^  Pattern 2: everything followed by space, '-' hyphen, space\n#   ^   Pattern 1: everything within brackets (....)\n</code></pre>\n\n<p>Sample run:</p>\n\n<pre><code>&gt;&gt;&gt; import re\n&gt;&gt;&gt; my_regex = \"\\(.*\\)|\\s-\\s.*\"\n\n&gt;&gt;&gt; example = 'Year 1.2 Q4.1 (Section 1.5 Report (#222))'\n&gt;&gt;&gt; example2 = 'Year 2-7 Q4.8 - Data markets and phases'\n\n&gt;&gt;&gt; re.sub(my_regex, \"\", example)\n'Year 1.2 Q4.1'\n&gt;&gt;&gt; re.sub(my_regex, \"\", example2)\n'Year 2-7 Q4.8'\n</code></pre>\n\n<p>Here I am using <a href=\"https://docs.python.org/3/library/re.html#re.sub\" rel=\"nofollow noreferrer\"><strong><code>re.sub(pattern, repl, string, ...)</code></strong></a> which as the document says:</p>\n\n<blockquote>\n  <p>Return the string obtained by replacing the leftmost non-overlapping\n  occurrences of pattern in string by the replacement <em>repl</em>. If the\n  pattern isn\u2019t found, <em>string</em> is returned unchanged. <em>repl</em> can be a\n  string or a function; if it is a string, any backslash escapes in it\n  are processed.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 15201, "user_id": 7386332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb50c81104978fe1e111da483c41ff0f?s=128&d=identicon&r=PG&f=1", "display_name": "Anton vBR", "link": "https://stackoverflow.com/users/7386332/anton-vbr"}, "is_accepted": false, "score": 0, "last_activity_date": 1514403929, "creation_date": 1514403929, "answer_id": 47997806, "question_id": 47997659, "link": "https://stackoverflow.com/questions/47997659/how-to-remove-text-within-parentheses-from-python-string/47997806#47997806", "title": "How to remove text within parentheses from Python string?", "body": "<p>Here is an example without regex (just to show you have good regex can be):</p>\n\n<p>The code adds strings until a string starts with <code>Q</code>:</p>\n\n<pre><code>example = 'Year 1.2 Q4.1 (Section 1.5 Report (#222))'\n\ndef clean_string(s):\n    for item in s.split():\n        yield item\n        if item.startswith('Q'):\n            break\n\nprint(' '.join(clean_string(example)))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 171, "user_id": 5031969, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7cS0A.jpg?s=128&g=1", "display_name": "theSekyi", "link": "https://stackoverflow.com/users/5031969/thesekyi"}, "is_accepted": false, "score": 1, "last_activity_date": 1514405372, "creation_date": 1514405372, "answer_id": 47998060, "question_id": 47997659, "link": "https://stackoverflow.com/questions/47997659/how-to-remove-text-within-parentheses-from-python-string/47998060#47998060", "title": "How to remove text within parentheses from Python string?", "body": "<p>We can do this using a * and a throwaway variable.</p>\n\n<pre><code>example = 'Year 1.2 Q4.1 (Section 1.5 Report (#222))'\ndisplay,*_ = example.split('(')\nprint(display)\n\nexample2 = 'Year 2-7 Q4.8 - Data markets and phases' ##there are two hyphens\npart_1,part_2,*_ = example2.split('-')\ndisplay = part_1 + '-'+ part_2\nprint(display)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8912, "user_id": 5904928, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/jwFz9.png?s=128&g=1", "display_name": "Aaditya Ura", "link": "https://stackoverflow.com/users/5904928/aaditya-ura"}, "is_accepted": false, "score": 1, "last_activity_date": 1514470878, "creation_date": 1514470878, "answer_id": 48009157, "question_id": 47997659, "link": "https://stackoverflow.com/questions/47997659/how-to-remove-text-within-parentheses-from-python-string/48009157#48009157", "title": "How to remove text within parentheses from Python string?", "body": "<p>You can try something like this , you will need little data cleaning after you fetch result to make it as your desired output: </p>\n\n<pre><code>import re\ndata=[]\npattern=r'\\(.+\\)|\\s\\-.+'\nwith open('file.txt','r') as f:\n    for line in f:\n        match=re.search(pattern,line)\n        data.append(line.replace(match.group(),'').strip())\n\nprint(data)\n</code></pre>\n"}], "owner": {"reputation": 219, "user_id": 8960574, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/bac323a39e06c246268c048e1d05f397?s=128&d=identicon&r=PG&f=1", "display_name": "CPU", "link": "https://stackoverflow.com/users/8960574/cpu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2487, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1514816518, "creation_date": 1514403141, "last_edit_date": 1514403296, "question_id": 47997659, "link": "https://stackoverflow.com/questions/47997659/how-to-remove-text-within-parentheses-from-python-string", "title": "How to remove text within parentheses from Python string?", "body": "<p>I am trying to remove parentheses and the text that resides in these parentheses, as well as hyphen characters. Some string examples look like the following:<br>\n<code>example = 'Year 1.2 Q4.1 (Section 1.5 Report (#222))'</code><br>\n<code>example2 = 'Year 2-7 Q4.8 - Data markets and phases' ##there are two hyphens</code> </p>\n\n<p>I would like the results to be:  </p>\n\n<pre><code>example = 'Year 1.2 Q4.1'  \nexample2 = 'Year 2-7 Q4.8'  \n</code></pre>\n\n<p>How can I remove text residing within or following parentheses and special characters? I could only find <code>str.strip()</code> method. I am new to Python, so any feedback is greatly appreciated! </p>\n"}, {"tags": ["python", "pandas", "datetime"], "comments": [{"owner": {"reputation": 301, "user_id": 7926383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1aff6128f3bd7a8d25092af1e44d6f16?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob H", "link": "https://stackoverflow.com/users/7926383/jacob-h"}, "edited": false, "score": 2, "creation_date": 1514403024, "post_id": 47997596, "comment_id": 82963465, "body": "Can you provide sample data and what you&#39;d like the output to look like? Your description is clear, but it&#39;s easier to build an answer when we have something to work with."}], "answers": [{"tags": [], "owner": {"reputation": 301, "user_id": 7926383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1aff6128f3bd7a8d25092af1e44d6f16?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob H", "link": "https://stackoverflow.com/users/7926383/jacob-h"}, "is_accepted": false, "score": 1, "last_activity_date": 1514403572, "creation_date": 1514403572, "answer_id": 47997733, "question_id": 47997596, "link": "https://stackoverflow.com/questions/47997596/pandas-use-aggregation-function-on-column-for-last-n-values-of-a-datetime-colu/47997733#47997733", "title": "pandas - use aggregation function on column for last n values of a datetime column in same dataframe", "body": "<p>There's probably a more efficient way to do this with aggregation functions, but here's a solution where, for each entry, you're filtering your whole dataframe to isolate that team and date range, and then summing the goals.</p>\n\n<pre><code>df['goals_to_date'] = df.apply(lambda row: np.sum(df[(df['team_id'] == row['team_id'])\\\n    &amp;(df['datetime'] &lt; row['datetime'])]['goals_scored']), axis = 1)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 335, "user_id": 1320542, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2b6a31cd147cd7a7b2723b96f4bc5ad1?s=128&d=identicon&r=PG", "display_name": "L1meta", "link": "https://stackoverflow.com/users/1320542/l1meta"}, "edited": false, "score": 0, "creation_date": 1514466057, "post_id": 48000131, "comment_id": 82984126, "body": "This is perfect!"}], "tags": [], "owner": {"reputation": 2719, "user_id": 2028710, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/RsoK4.png?s=128&g=1", "display_name": "Dickster", "link": "https://stackoverflow.com/users/2028710/dickster"}, "is_accepted": true, "score": 1, "last_activity_date": 1514467040, "last_edit_date": 1514467040, "creation_date": 1514420346, "answer_id": 48000131, "question_id": 47997596, "link": "https://stackoverflow.com/questions/47997596/pandas-use-aggregation-function-on-column-for-last-n-values-of-a-datetime-colu/48000131#48000131", "title": "pandas - use aggregation function on column for last n values of a datetime column in same dataframe", "body": "<p>I made up some mock data, because i like football, but like Jacob H suggests it's best to always supply a sample data frame with the question.</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nnp.random.seed(2)\n\nd = {'match_id': np.arange(10)\n        ,'team_id': ['City','City','City','Utd','Utd','Utd','Albion','Albion','Albion','Albion']\n        ,'goals_scored': np.random.randint(0,5,10)\n        ,'time_played': [0,1,2,0,1,2,0,1,2,3]}\ndf = pd.DataFrame(data=d)\n\n#previous n matches\nn=2\n\n#some Saturday 3pm kickoffs.\nrng = pd.date_range('2017-12-02 15:00:00','2017-12-25 15:00:00',freq='W')\n\n# change the time_played integers to the datetimes\ndf['time_played'] = df['time_played'].map(lambda x: rng[x])\n\n#be sure the sort order is correct\ndf = df.sort_values(['team_id','time_played'])\n\n# a rolling sum() and then shift(1) to align value with row as per question\ndf['total_goals'] = df.groupby(['team_id'])['goals_scored'].apply(lambda x: x.rolling(n).sum())\ndf['total_goals'] = df.groupby(['team_id'])['total_goals'].shift(1)\n</code></pre>\n\n<p>which produces:</p>\n\n<pre><code>   goals_scored  match_id team_id         time_played  total_goals-&gt;(in previous n)\n6             2         6  Albion 2017-12-03 15:00:00          NaN\n7             1         7  Albion 2017-12-10 15:00:00          NaN\n8             3         8  Albion 2017-12-17 15:00:00          3.0\n9             2         9  Albion 2017-12-24 15:00:00          4.0\n0             0         0    City 2017-12-03 15:00:00          NaN\n1             0         1    City 2017-12-10 15:00:00          NaN\n2             3         2    City 2017-12-17 15:00:00          0.0\n3             2         3     Utd 2017-12-03 15:00:00          NaN\n4             3         4     Utd 2017-12-10 15:00:00          NaN\n5             0         5     Utd 2017-12-17 15:00:00          5.0\n</code></pre>\n"}], "owner": {"reputation": 335, "user_id": 1320542, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2b6a31cd147cd7a7b2723b96f4bc5ad1?s=128&d=identicon&r=PG", "display_name": "L1meta", "link": "https://stackoverflow.com/users/1320542/l1meta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 48000131, "answer_count": 2, "score": 0, "last_activity_date": 1514467040, "creation_date": 1514402755, "question_id": 47997596, "link": "https://stackoverflow.com/questions/47997596/pandas-use-aggregation-function-on-column-for-last-n-values-of-a-datetime-colu", "title": "pandas - use aggregation function on column for last n values of a datetime column in same dataframe", "body": "<p>I have a Dataframe with sportsbetting data containing: match_id, team_id, goals_scored and a datetime column for the time the match started. I want to add a column to this dataframe that for each row shows the sum of the goals scored by each team for the previous n matches.</p>\n"}, {"tags": ["python", "pandas", "numpy", "indexing"], "answers": [{"tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": false, "score": 8, "last_activity_date": 1514405726, "last_edit_date": 1514405726, "creation_date": 1514402812, "answer_id": 47997606, "question_id": 47997566, "link": "https://stackoverflow.com/questions/47997566/pandas-select-values-from-specific-columns-of-a-dataframe-by-row/47997606#47997606", "title": "Pandas: Select values from specific columns of a DataFrame by row", "body": "<p><strong>NumPy way</strong></p>\n\n<p>Here's a vectorized NumPy way using <code>advanced indexing</code> -</p>\n\n<pre><code># Extract array data\nIn [10]: a = df.values\n\n# Get integer based column IDs\nIn [11]: col_idx = np.searchsorted(df.columns, columns_to_select)\n\n# Use NumPy's advanced indexing to extract relevant elem per row\nIn [12]: a[np.arange(len(col_idx)), col_idx]\nOut[12]: array([ 10,   2,   3, 400])\n</code></pre>\n\n<p>If column names of <code>df</code> are not sorted, we need to use <code>sorter</code> argument with <code>np.searchsorted</code>. The code to extract <code>col_idx</code> for such a generic <code>df</code> would be :</p>\n\n<pre><code># https://stackoverflow.com/a/38489403/ @Divakar\ndef column_index(df, query_cols):\n    cols = df.columns.values\n    sidx = np.argsort(cols)\n    return sidx[np.searchsorted(cols,query_cols,sorter=sidx)]\n</code></pre>\n\n<p>So, <code>col_idx</code> would be obtained like so -</p>\n\n<pre><code>col_idx = column_index(df, columns_to_select)\n</code></pre>\n\n<p><strong>Further optimization</strong></p>\n\n<p>Profiling it revealed that the bottleneck was processing strings with <code>np.searchsorted</code>, the usual NumPy weakness of not being so great with strings. So, to overcome that and using the special case scenario of column names being single letters, we could quickly convert those to numerals and then feed those to <code>searchsorted</code> for much faster processing.</p>\n\n<p>Thus, an optimized version of getting the integer based column IDs, for the case where the column names are single letters and sorted, would be -</p>\n\n<pre><code>def column_index_singlechar_sorted(df, query_cols):\n    c0 = np.fromstring(''.join(df.columns), dtype=np.uint8)\n    c1 = np.fromstring(''.join(query_cols), dtype=np.uint8)\n    return np.searchsorted(c0, c1)\n</code></pre>\n\n<p>This, gives us a modified version of the solution, like so -</p>\n\n<pre><code>a = df.values\ncol_idx = column_index_singlechar_sorted(df, columns_to_select)\nout = pd.Series(a[np.arange(len(col_idx)), col_idx])\n</code></pre>\n\n<p>Timings -</p>\n\n<pre><code>In [149]: # Setup df with 26 uppercase column letters and many rows\n     ...: import string\n     ...: df = pd.DataFrame(np.random.randint(0,9,(1000000,26)))\n     ...: s = list(string.uppercase[:df.shape[1]])\n     ...: df.columns = s\n     ...: idx = np.random.randint(0,df.shape[1],len(df))\n     ...: columns_to_select = np.take(s, idx).tolist()\n\n# With df.lookup from @MaxU's soln\nIn [150]: %timeit pd.Series(df.lookup(df.index, columns_to_select))\n10 loops, best of 3: 76.7 ms per loop\n\n# With proposed one from this soln\nIn [151]: %%timeit\n     ...: a = df.values\n     ...: col_idx = column_index_singlechar_sorted(df, columns_to_select)\n     ...: out = pd.Series(a[np.arange(len(col_idx)), col_idx])\n10 loops, best of 3: 59 ms per loop\n</code></pre>\n\n<p>Given that <code>df.lookup</code> solves for a generic case, that's a probably a better choice, but the other possible optimizations as shown in this post could be handy as well!</p>\n"}, {"comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 1, "creation_date": 1514403379, "post_id": 47997669, "comment_id": 82963608, "body": "one sec behind you . ;-)"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1514403434, "post_id": 47997669, "comment_id": 82963633, "body": "@Wen, yeah, i know this feeling - sorry :)"}, {"owner": {"reputation": 467, "user_id": 2137312, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f52c1a0ad3565ecbeea47023b67b7986?s=128&d=identicon&r=PG", "display_name": "Jason Sanchez", "link": "https://stackoverflow.com/users/2137312/jason-sanchez"}, "edited": false, "score": 0, "creation_date": 1514403592, "post_id": 47997669, "comment_id": 82963694, "body": "@MaxU This is exactly what I was looking for. Thank you!"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 467, "user_id": 2137312, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f52c1a0ad3565ecbeea47023b67b7986?s=128&d=identicon&r=PG", "display_name": "Jason Sanchez", "link": "https://stackoverflow.com/users/2137312/jason-sanchez"}, "edited": false, "score": 0, "creation_date": 1514403658, "post_id": 47997669, "comment_id": 82963719, "body": "@JasonSanchez, glad i could help :)"}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 11, "last_activity_date": 1514403200, "creation_date": 1514403200, "answer_id": 47997669, "question_id": 47997566, "link": "https://stackoverflow.com/questions/47997566/pandas-select-values-from-specific-columns-of-a-dataframe-by-row/47997669#47997669", "title": "Pandas: Select values from specific columns of a DataFrame by row", "body": "<p><a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.lookup.html\" rel=\"noreferrer\">Pandas approach</a>:</p>\n\n<pre><code>In [22]: df['new'] = df.lookup(df.index, columns_to_select)\n\nIn [23]: df\nOut[23]:\n   A   B    C  new\n0  1  10  100   10\n1  2  20  200    2\n2  3  30  300    3\n3  4  40  400  400\n</code></pre>\n"}], "owner": {"reputation": 467, "user_id": 2137312, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f52c1a0ad3565ecbeea47023b67b7986?s=128&d=identicon&r=PG", "display_name": "Jason Sanchez", "link": "https://stackoverflow.com/users/2137312/jason-sanchez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8291, "favorite_count": 1, "accepted_answer_id": 47997669, "answer_count": 2, "score": 10, "last_activity_date": 1514405726, "creation_date": 1514402564, "last_edit_date": 1514403331, "question_id": 47997566, "link": "https://stackoverflow.com/questions/47997566/pandas-select-values-from-specific-columns-of-a-dataframe-by-row", "title": "Pandas: Select values from specific columns of a DataFrame by row", "body": "<p>Given a DataFrame with multiple columns, how do we select values from specific columns by row to create a new Series?</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>df = pd.DataFrame({\"A\":[1,2,3,4], \n                   \"B\":[10,20,30,40], \n                   \"C\":[100,200,300,400]})\ncolumns_to_select = [\"B\", \"A\", \"A\", \"C\"]\n</code></pre>\n\n<p>Goal:\n<code>[10, 2, 3, 400]</code></p>\n\n<p>One method that works is to use an apply statement.</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>df[\"cols\"] = columns_to_select\ndf.apply(lambda x: x[x.cols], axis=1)\n</code></pre>\n\n<p>Unfortunately, this is not a vectorized operation and takes a long time on a large dataset. Any ideas would be appreciated.</p>\n"}, {"tags": ["python", "if-statement"], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 9087772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cc634cb78f11a2a4c9dbb97e909afc3?s=128&d=identicon&r=PG&f=1", "display_name": "cmarios", "link": "https://stackoverflow.com/users/9087772/cmarios"}, "edited": false, "score": 0, "creation_date": 1514499246, "post_id": 47997615, "comment_id": 82999061, "body": "So in my second code, when the my_dict = { } is inside the if blocks, does it mean that as i am initializing the my_dict again, the my_dict in the first if block is different from the my_dict in the second if block (and so the .copy() is done by default)?"}, {"owner": {"reputation": 55264, "user_id": 1258041, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a2593c44c42429c503d2e5e9e307e241?s=128&d=identicon&r=PG", "display_name": "Lev Levitsky", "link": "https://stackoverflow.com/users/1258041/lev-levitsky"}, "reply_to_user": {"reputation": 123, "user_id": 9087772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cc634cb78f11a2a4c9dbb97e909afc3?s=128&d=identicon&r=PG&f=1", "display_name": "cmarios", "link": "https://stackoverflow.com/users/9087772/cmarios"}, "edited": false, "score": 0, "creation_date": 1514499396, "post_id": 47997615, "comment_id": 82999138, "body": "@cmarios Yes, after you assign <code>my_dict</code> to a new (empty) dict, you don&#39;t affect the previously appended dict by changing <code>my_dict</code>. It refers to a different object now. When using <code>defaults</code>, you need to call <code>copy()</code> so that each time <code>my_dict</code> is a different object; otherwise they will all refer to <code>defaults</code> and again you&#39;ll see the same dict repeated."}], "tags": [], "owner": {"reputation": 55264, "user_id": 1258041, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a2593c44c42429c503d2e5e9e307e241?s=128&d=identicon&r=PG", "display_name": "Lev Levitsky", "link": "https://stackoverflow.com/users/1258041/lev-levitsky"}, "is_accepted": false, "score": 0, "last_activity_date": 1514402869, "creation_date": 1514402869, "answer_id": 47997615, "question_id": 47997542, "link": "https://stackoverflow.com/questions/47997542/consecutive-if-statements-order-of-execution/47997615#47997615", "title": "Consecutive if statements: order of execution", "body": "<p>The difference between the two versions of the code is that the first one appends the same dict to a list multiple times. The list will always contain the same dict repeated in this case.</p>\n\n<p>However, nothing stops you from filling <code>my_dict</code> with pre-computed values:</p>\n\n<pre><code>defaults = {'some': 'common', 'values': 'here'}\n\nfor i in list_of_lists:\n    for j in i:        \n        if j &gt; my_constant:\n            my_dict = defaults.copy()\n            my_dict[\"a\"] = \"Hello\"\n            my_dict[\"b\"] = \"Hello\"\n            print(my_dict)\n            my_new_list.append(my_dict)\n</code></pre>\n\n<p><code>defaults</code> can be calculated inside the loop if it depends on <code>i</code> or <code>j</code>.</p>\n\n<p>If you are concerned with data duplication, just change the logic of your program and don't store repeating values in <code>my_new_list</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 8912, "user_id": 5904928, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/jwFz9.png?s=128&g=1", "display_name": "Aaditya Ura", "link": "https://stackoverflow.com/users/5904928/aaditya-ura"}, "is_accepted": true, "score": 1, "last_activity_date": 1514403457, "last_edit_date": 1514403457, "creation_date": 1514403031, "answer_id": 47997639, "question_id": 47997542, "link": "https://stackoverflow.com/questions/47997542/consecutive-if-statements-order-of-execution/47997639#47997639", "title": "Consecutive if statements: order of execution", "body": "<blockquote>\n  <p>You are re-using same object again and again</p>\n</blockquote>\n\n<p>use deepcopy:</p>\n\n<pre><code>from copy import deepcopy\nmy_constant = 5\n\nmy_constant_2 = 6\nlist_of_lists = [[3,2],[4,7]]\n\nmy_new_list = []\n\nfor i in list_of_lists:\n    my_dict = {}\n    for j in i:\n        if j &gt; my_constant:\n            my_dict[\"a\"] = \"Hello\"\n            my_dict[\"b\"] = \"Hello\"\n            print(my_dict)\n            my_new_list.append(deepcopy(my_dict))\n        if j &gt; my_constant_2:\n            my_dict[\"a\"] = \"Hello\"\n            my_dict[\"b\"] = \"Bye\"\n            print(my_dict)\n            my_new_list.append(my_dict)\n\n\nprint(my_new_list)\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>{'b': 'Hello', 'a': 'Hello'}\n{'b': 'Bye', 'a': 'Hello'}\n[{'b': 'Hello', 'a': 'Hello'}, {'b': 'Bye', 'a': 'Hello'}]\n</code></pre>\n\n<p>Why deepcopy() why not copy ?</p>\n\n<p><strong>Additional explanation :</strong></p>\n\n<p>For understanding of deepcopy vs copy here is example code  :</p>\n\n<blockquote>\n  <p>Let's explore your issue  by a little example:</p>\n</blockquote>\n\n<p>so suppose you have a list:</p>\n\n<pre><code>a=['something']\n</code></pre>\n\n<p>And there is also a second list which contains:</p>\n\n<pre><code>list_1=[a,a,a]\n</code></pre>\n\n<p>So when you do:</p>\n\n<pre><code>a[0]=\"something_else\"\n</code></pre>\n\n<p>what do you think what is the output of <code>list_1</code> ?</p>\n\n<p>Let's check:</p>\n\n<pre><code>a=['something']\nlist_1=[a,a,a]\n\n\na[0]=\"something_else\"\nprint(list_1)\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>[['something_else'], ['something_else'], ['something_else']]\n</code></pre>\n\n<p>Because in python variable doesn't store the value , variable are just referece to the object and object store the value so in list_1 all the variable are pointing to the same object:</p>\n\n<p>checking:</p>\n\n<pre><code>for i in list_1:\n    print(id(i))\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>4329477768\n4329477768\n4329477768\n</code></pre>\n\n<blockquote>\n  <p>Try deepcopy:</p>\n  \n  <p>why <code>deepcopy</code> why not <code>copy</code> ?</p>\n</blockquote>\n\n<p>suppose you have dict like this:</p>\n\n<pre><code>dict_cell = {'item1': [20,34], 'item2': [25,9]}\n</code></pre>\n\n<p>you run your code with this dict_cell and you got the output:</p>\n\n<pre><code>[[{'item2': [25, 9], 'item1': 2}, {'item2': [25, 9], 'item1': [20, 34]}], [{'item2': [25, 9], 'item1': [20, 34]}, {'item2': [25, 9], 'item1': [20, 34]}]]\n</code></pre>\n\n<p>Now let's try to change the original dict values :</p>\n\n<pre><code>dict_cell = {'item1': [20,34], 'item2': [25,9]}\nwidth = 2\nheight = 2\narray = []\nfor i in range(height):\n    row=[]\n    for j in range(width):\n        row.append(dict_cell.copy())\n    array.append(row)\narray[0][0]['item1'] =2\n\n\nfor key,value in dict_cell.items():\n    value[0]='changed'\n\nprint(array,'\\n')\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>[[{'item1': 2, 'item2': ['changed', 9]}, {'item1': ['changed', 34], 'item2': ['changed', 9]}], [{'item1': ['changed', 34], 'item2': ['changed', 9]}, {'item1': ['changed', 34], 'item2': ['changed', 9]}]] \n</code></pre>\n\n<p>we modifed the orional dict but it changed the content in array list's dict because that is shallow copy of dict. it copied the dict but didn't copy the nested list. </p>\n\n<blockquote>\n  <p>Solution :</p>\n</blockquote>\n\n<p>Use deepcopy.</p>\n"}, {"tags": [], "owner": {"reputation": 1520, "user_id": 7512762, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/40875febbe486ccf9bd44fe9952d02c3?s=128&d=identicon&r=PG", "display_name": "Lead Developer", "link": "https://stackoverflow.com/users/7512762/lead-developer"}, "is_accepted": false, "score": 1, "last_activity_date": 1514403483, "last_edit_date": 1514403483, "creation_date": 1514403179, "answer_id": 47997665, "question_id": 47997542, "link": "https://stackoverflow.com/questions/47997542/consecutive-if-statements-order-of-execution/47997665#47997665", "title": "Consecutive if statements: order of execution", "body": "<pre><code>my_constant = 5\nmy_constant_2 = 6\nlist_of_lists = [[3,2],[4,7]]\n\nmy_new_list = []\n\nfor i in list_of_lists:\n    my_dict = {}\n    for j in i:    \n        if j &gt; my_constant:\n            my_dict[\"a\"] = \"Hello\"\n            my_dict[\"b\"] = \"Hello\"\n            print(my_dict)\n            my_new_list.append(my_dict.copy())\n        if j &gt; my_constant_2:\n            my_dict[\"a\"] = \"Hello\"\n            my_dict[\"b\"] = \"Bye\"\n            print(my_dict)\n            my_new_list.append(my_dict.copy())\n\n\nprint(my_new_list)\n</code></pre>\n\n<p>because in your code, my_new_list[0] and my_new_list[1] is same object.\nSo when you change the my_dict in if j > my_constant_2 block, then will be changed my_new_list[0] too.\nplease use copy or deepcopy when you add the object into my_new_list.\ncopy() function will do the shallow copy.\nSo it's good to use deepcopy for safety.</p>\n\n<p>and I think my_dict initialization position is not proper.\nplease think about that.</p>\n"}], "owner": {"reputation": 123, "user_id": 9087772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cc634cb78f11a2a4c9dbb97e909afc3?s=128&d=identicon&r=PG&f=1", "display_name": "cmarios", "link": "https://stackoverflow.com/users/9087772/cmarios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 47997639, "answer_count": 3, "score": 0, "last_activity_date": 1514403483, "creation_date": 1514402409, "last_edit_date": 1514402883, "question_id": 47997542, "link": "https://stackoverflow.com/questions/47997542/consecutive-if-statements-order-of-execution", "title": "Consecutive if statements: order of execution", "body": "<p>Here is my Python code:</p>\n\n<pre><code>my_constant = 5\nmy_constant_2 = 6\nlist_of_lists = [[3,2],[4,7]]\n\nmy_new_list = []\n\nfor i in list_of_lists:\n    my_dict = {}\n    for j in i:    \n        if j &gt; my_constant:\n            my_dict[\"a\"] = \"Hello\"\n            my_dict[\"b\"] = \"Hello\"\n            print(my_dict)\n            my_new_list.append(my_dict)\n        if j &gt; my_constant_2:\n            my_dict[\"a\"] = \"Hello\"\n            my_dict[\"b\"] = \"Bye\"\n            print(my_dict)\n            my_new_list.append(my_dict)\n\n\nprint(my_new_list)\n</code></pre>\n\n<p>Here are the results:</p>\n\n<pre><code>{'a': 'Hello', 'b': 'Hello'}\n{'a': 'Hello', 'b': 'Bye'}\n[{'a': 'Hello', 'b': 'Bye'}, {'a': 'Hello', 'b': 'Bye'}]\n</code></pre>\n\n<p>The first two lines of the results are according to my expectations, but the third line is not. I would expect this:</p>\n\n<pre><code>[{'a': 'Hello', 'b': 'Hello'}, {'a': 'Hello', 'b': 'Bye'}]\n</code></pre>\n\n<p>So it looks that when the loop waits for the second \"if\" before appending to my_new_list, and us such the my_new_list get twice the new my_dict.</p>\n\n<p>I know that the below code solves the issue (ie moving the my_dict inside the \"if\"):</p>\n\n<pre><code>my_constant = 5\nmy_constant_2 = 6\nlist_of_lists = [[3,2],[4,7]]\n\nmy_new_list = []\n\nfor i in list_of_lists:\n    for j in i:        \n        if j &gt; my_constant:\n            my_dict = {}\n            my_dict[\"a\"] = \"Hello\"\n            my_dict[\"b\"] = \"Hello\"\n            print(my_dict)\n            my_new_list.append(my_dict)\n        if j &gt; my_constant_2:\n            my_dict = {}\n            my_dict[\"a\"] = \"Hello\"\n            my_dict[\"b\"] = \"Bye\"\n            print(my_dict)\n            my_new_list.append(my_dict)\n\n\nprint(my_new_list)\n</code></pre>\n\n<p>However, in practice my_dict is not empty and a function is used to create it (and it takes some time). Also, there are more \"ifs\", so i prefer not to use the above code. </p>\n\n<p>Is there a trick to get over it?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "oop", "mixins", "python-decorators"], "answers": [{"comments": [{"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 1, "creation_date": 1514403250, "post_id": 47997611, "comment_id": 82963553, "body": "Simply excising <code>__dict__</code> from the mapping passed to <code>type</code> also works (a new <code>__dict__</code> descriptor is created automatically).  Might be a good idea to also remove <code>__weakref__</code>."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1514405713, "post_id": 47997611, "comment_id": 82964539, "body": "Well, <code>Mixin</code> has its own <code>__dict__</code> descriptor, so it ends up using that one instead of creating a new one, but yeah, removing <code>__dict__</code> should work."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1514402850, "creation_date": 1514402850, "answer_id": 47997611, "question_id": 47997537, "link": "https://stackoverflow.com/questions/47997537/python-object-losing-dict-after-mixin-injection/47997611#47997611", "title": "Python object losing __dict__ after mixin injection", "body": "<p>It's not \"losing <code>__dict__</code>\". What's happening is that your original <code>dummyClass</code> has a <code>__dict__</code> <a href=\"https://docs.python.org/3/reference/datamodel.html#implementing-descriptors\" rel=\"nofollow noreferrer\">descriptor</a> intended to retrieve the <code>__dict__</code> attribute of instances of your original <code>dummyClass</code>, but your decorator puts that descriptor into a new <code>dummyClass</code> that doesn't descend from the original.</p>\n\n<p>It's not safe to use the original <code>__dict__</code> descriptor with instances of the new class, because there's no inheritance relationship, and instances of the new class could have their dict pointer at a different offset in their memory layout. To fix this, have your decorator create a class that descends from the original instead of copying its dict and bases:</p>\n\n<pre><code>def testDecorator(cls):\n    return type(cls.__name__, (Mixin, cls), {})\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9146532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddf7e65b3e20e50271fd467dc7b9966c?s=128&d=identicon&r=PG&f=1", "display_name": "R. Eichhorn", "link": "https://stackoverflow.com/users/9146532/r-eichhorn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 1, "accepted_answer_id": 47997611, "answer_count": 1, "score": 1, "last_activity_date": 1514813456, "creation_date": 1514402384, "last_edit_date": 1514813456, "question_id": 47997537, "link": "https://stackoverflow.com/questions/47997537/python-object-losing-dict-after-mixin-injection", "title": "Python object losing __dict__ after mixin injection", "body": "<p>I am trying to inject a mixin to a class with a decorator. When the code runs the class no longer has a <strong>dict</strong> property even though the dir(instance) says it has one. I'm not sure where the property is disappearing. Is there a way that I can get <strong>dict</strong> or otherwise find the instance's attributes?</p>\n\n<pre><code>def testDecorator(cls):\n    return type(cls.__name__, (Mixin,) + cls.__bases__, dict(cls.__dict__))\n\nclass Mixin:         \n     pass\n\n@testDecorator\nclass dummyClass:\n    def __init__(self):\n        self.testVar1 = 'test'\n        self.testVar2 = 3.14\n\ninst = dummyClass()\nprint(dir(inst))\nprint(inst.__dict__)\n</code></pre>\n\n<p>This code works if the decorator is commented out yet causes an error when the decorator is present. Running on python 3.5.1</p>\n"}, {"tags": ["python", "python-3.x", "nose"], "owner": {"reputation": 2548, "user_id": 1745291, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a1cb774f2559ce8b8a6f4a5d2e33c4f6?s=128&d=identicon&r=PG", "display_name": "hl037_", "link": "https://stackoverflow.com/users/1745291/hl037"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1514405467, "creation_date": 1514402219, "last_edit_date": 1514405467, "question_id": 47997501, "link": "https://stackoverflow.com/questions/47997501/how-to-pass-several-values-as-nosetests-options-in-setup-cfg", "title": "How to pass several values as nosetests&#39; options in setup.cfg?", "body": "<p>I currently run my tests with : </p>\n\n<pre><code>nosetests3 -vd -w . module1 module2\n</code></pre>\n\n<p>...And I would like to automate these options.</p>\n\n<p>However, I can't find a way to pass several values to an option...</p>\n\n<p>I tried this : </p>\n\n<pre><code>[nosetests]\nverbosity=1\ndetailed-errors=1\nwhere=.\n   module1\n   module2\n</code></pre>\n\n<p>...But it replies</p>\n\n<pre><code>ValueError: Working directory '.\nmodule1\nmodule2' not found, or not a directory\n</code></pre>\n\n<p>and with : </p>\n\n<pre><code>[nosetests]\nverbosity=1\ndetailed-errors=1\nwhere=.\nwhere=module1\nwhere=module2\n</code></pre>\n\n<p>it replies :</p>\n\n<pre><code>nosetests: error: Error reading config file 'setup.cfg': While reading from 'setup.cfg' [line  6]: option 'where' in section 'nosetests' already exists\n</code></pre>\n\n<p>how to do that ?</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 55264, "user_id": 1258041, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a2593c44c42429c503d2e5e9e307e241?s=128&d=identicon&r=PG", "display_name": "Lev Levitsky", "link": "https://stackoverflow.com/users/1258041/lev-levitsky"}, "edited": false, "score": 1, "creation_date": 1514402446, "post_id": 47997500, "comment_id": 82963238, "body": "Can you include the code you have in Python in your question?"}, {"owner": {"reputation": 8218, "user_id": 2615940, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/9a6Qc.jpg?s=128&g=1", "display_name": "skrrgwasme", "link": "https://stackoverflow.com/users/2615940/skrrgwasme"}, "edited": false, "score": 0, "creation_date": 1514402973, "post_id": 47997500, "comment_id": 82963448, "body": "What&#39;s stopping you from doing the translation? I know this sounds like a trite comment, but your question shows no effort on your part. SO is not intended to be a free coding service where you can just post a request and people will do it for you. We need to you to make an attempt at it. Start by reviewing the Python docs for the <a href=\"https://docs.python.org/3/library/re.html\" rel=\"nofollow noreferrer\">re module</a>, which implements Python&#39;s regular expression engine. As is shown by other comments and answers on this question, <i>sometimes</i> people will be kind enough to do just that, but you shouldn&#39;t expect it."}, {"owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "edited": false, "score": 0, "creation_date": 1514402976, "post_id": 47997500, "comment_id": 82963451, "body": "<code>(?:[a-zA-Z.]*&#47;PERSON(?:\\s|$))+</code>? Took me 2 minutes. Check out <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">regex101.com</a>"}, {"owner": {"reputation": 17034, "user_id": 858913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b5015a60c08feee1d8116be3dd70878d?s=128&d=identicon&r=PG", "display_name": "eLRuLL", "link": "https://stackoverflow.com/users/858913/elrull"}, "edited": false, "score": 0, "creation_date": 1514405213, "post_id": 47997500, "comment_id": 82964357, "body": "@JoshuaMolina from which language?"}], "answers": [{"tags": [], "owner": {"reputation": 32215, "user_id": 3789550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8mGqv.gif?s=128&g=1", "display_name": "heemayl", "link": "https://stackoverflow.com/users/3789550/heemayl"}, "is_accepted": true, "score": 0, "last_activity_date": 1514402994, "creation_date": 1514402994, "answer_id": 47997634, "question_id": 47997500, "link": "https://stackoverflow.com/questions/47997500/translate-regular-expression-to-python/47997634#47997634", "title": "Translate regular expression to python", "body": "<p>You can use the Regex pattern:</p>\n\n<pre><code>(?:[A-Za-z.]*/PERSON\\s*)+\n</code></pre>\n\n<ul>\n<li><p><code>[A-Za-z.]*</code> matches zero or more of <code>[A-Za-z.]</code></p></li>\n<li><p><code>/PERSON\\s*</code> matches <code>/PERSON</code> followed by zero or more whitespace</p></li>\n<li><p>The above is put in a non-captured group and the group is matched one or more time by the <code>+</code> token.</p></li>\n</ul>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>In [9]: re.search(r'(?:[A-Za-z.]*/PERSON\\s*)+', 'Leo/PERSON Messi/PERSON hello').group()\nOut[9]: 'Leo/PERSON Messi/PERSON ' \n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9146511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edf68fb85e75cf64fc677b67363198e5?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua Molina", "link": "https://stackoverflow.com/users/9146511/joshua-molina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 529, "favorite_count": 0, "accepted_answer_id": 47997634, "answer_count": 1, "score": -5, "last_activity_date": 1514422279, "creation_date": 1514402215, "last_edit_date": 1514402318, "question_id": 47997500, "link": "https://stackoverflow.com/questions/47997500/translate-regular-expression-to-python", "title": "Translate regular expression to python", "body": "<p>I need to translate this regular expression to the python language:</p>\n\n<pre><code>(([[:alpha:]]|\\.)*/PERSON([[:space:]]|$))+\n</code></pre>\n\n<p>I have a .txt file that contains names of people with the /PERSON tag and other words that do not have tags.</p>\n\n<pre><code>Leo/PERSON Messi/PERSON hello\n</code></pre>\n\n<p>Once you make the equivalent program in python to the regular expression above, the output must be this (all names with the label /PERSON, the other words are not):</p>\n\n<pre><code>Leo/PERSON Messi/PERSON\n</code></pre>\n"}, {"tags": ["python", "while-loop"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1514401996, "post_id": 47997425, "comment_id": 82963044, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem. We should be able to paste your posted code into a text file and reproduce the problem you described."}, {"owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "edited": false, "score": 1, "creation_date": 1514402066, "post_id": 47997425, "comment_id": 82963070, "body": "it would be appropriate to use an <code>else if</code> where by the <code>while</code> loop will be inside the <code>elif</code> in this case it will break automatically."}, {"owner": {"reputation": 339, "user_id": 4991969, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sMkLOCCufo4/AAAAAAAAAAI/AAAAAAAAABw/OakP50X0RmU/photo.jpg?sz=128", "display_name": "Zeke Egherman", "link": "https://stackoverflow.com/users/4991969/zeke-egherman"}, "edited": false, "score": 0, "creation_date": 1514402172, "post_id": 47997425, "comment_id": 82963118, "body": "Why cant you use <code>sys.exit()</code>?"}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 2, "creation_date": 1514402205, "post_id": 47997425, "comment_id": 82963129, "body": "Why have you &quot;ruled out&quot; those methods?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1514402293, "post_id": 47997425, "comment_id": 82963171, "body": "It sounds like you just forgot the parentheses."}], "answers": [{"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1514402457, "post_id": 47997507, "comment_id": 82963248, "body": "While that technically works, so should the regular <code>sys.exit</code>. There are legitimate uses of <code>os._exit</code>, but using it here seems like a bad idea."}, {"owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "edited": false, "score": 0, "creation_date": 1514402489, "post_id": 47997507, "comment_id": 82963257, "body": "Am sorry, I know one did down vote my response as it was similar to yours. The issue was I was still typing out my solution yet you had already posted yours. But if you look at the comments above, I did mention the use of <code>if else</code> statement"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1514402955, "post_id": 47997507, "comment_id": 82963439, "body": "If you have a comment that pertains to your answer, please post it there, not here.  I&#39;m not the person who down-voted."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1514402245, "creation_date": 1514402245, "answer_id": 47997507, "question_id": 47997425, "link": "https://stackoverflow.com/questions/47997425/how-do-i-stop-the-code-completely-as-soon-as-a-certain-thing-is-done/47997507#47997507", "title": "How do I stop the code completely as soon as a certain thing is done?", "body": "<p>With these small alterations, I managed to make this work:</p>\n\n<pre><code>import os\n\nwhile True:\n    #do something\n    #for loop\n    if False:\n        #do something\n        print \"Game over A\"\n        os._exit(0)\n    elif True:\n        #do something\n        print \"Game over B\"\n        os._exit(0)\n    break\n\nprint \"Not over\"\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Game over B\n</code></pre>\n\n<p>Note the lack of the <strong>Not over</strong> output.\nPerhaps <code>_exit(&lt;status&gt;)</code> is what you need?</p>\n"}, {"tags": [], "owner": {"reputation": 80, "user_id": 2140382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g9fuM.jpg?s=128&g=1", "display_name": "goosfraba", "link": "https://stackoverflow.com/users/2140382/goosfraba"}, "is_accepted": false, "score": 0, "last_activity_date": 1514402402, "creation_date": 1514402402, "answer_id": 47997540, "question_id": 47997425, "link": "https://stackoverflow.com/questions/47997425/how-do-i-stop-the-code-completely-as-soon-as-a-certain-thing-is-done/47997540#47997540", "title": "How do I stop the code completely as soon as a certain thing is done?", "body": "<p>You should use:</p>\n\n<pre><code>sys.exit(n)\n</code></pre>\n\n<p>Where the optional n is an integer with the exit status.</p>\n\n<p>Please check: <a href=\"https://docs.python.org/2/library/sys.html\" rel=\"nofollow noreferrer\">https://docs.python.org/2/library/sys.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 67, "user_id": 7091717, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0d4c99142984aafe4322e8abde09131a?s=128&d=identicon&r=PG&f=1", "display_name": "user7091717", "link": "https://stackoverflow.com/users/7091717/user7091717"}, "edited": false, "score": 0, "creation_date": 1514403188, "post_id": 47997568, "comment_id": 82963538, "body": "Solved! Thank you. Nice file name by the way."}], "tags": [], "owner": {"reputation": 94, "user_id": 4335339, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2e2b09e84f981fd85df9922d504fd40e?s=128&d=identicon&r=PG&f=1", "display_name": "wrightMatthew", "link": "https://stackoverflow.com/users/4335339/wrightmatthew"}, "is_accepted": true, "score": 1, "last_activity_date": 1514403010, "last_edit_date": 1514403010, "creation_date": 1514402588, "answer_id": 47997568, "question_id": 47997425, "link": "https://stackoverflow.com/questions/47997425/how-do-i-stop-the-code-completely-as-soon-as-a-certain-thing-is-done/47997568#47997568", "title": "How do I stop the code completely as soon as a certain thing is done?", "body": "<p>This is how sys.exit() should work. Sys.exit() should work if you import it and reach it. Maybe more troubleshooting information would be helpful? This works for python and python3</p>\n\n<pre><code>#!/usr/bin/env python\n\nimport sys\n\nwhile 1==1:\n    print(\"This will print\")\n\n    if 2==2:\n        print(\"This will also print\")\n        sys.exit()\n\n    print(\"This will not print\")\nprint(\"This will not print\")\n</code></pre>\n\n<p>This is my terminal output:</p>\n\n<pre><code>Matts-MacBook-Pro:Desktop mw$ ./stupid.py \nThis will print\nThis will also print\n</code></pre>\n\n<p>edit.</p>\n\n<p>As @goosfraba said, sys.exit(0) would probably be best practice. <a href=\"https://docs.python.org/2/library/sys.html\" rel=\"nofollow noreferrer\">The link</a> provided says no argument can have undefined behavior. Another argument like 1 or \"This is an error message\" would also work.</p>\n"}], "owner": {"reputation": 67, "user_id": 7091717, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0d4c99142984aafe4322e8abde09131a?s=128&d=identicon&r=PG&f=1", "display_name": "user7091717", "link": "https://stackoverflow.com/users/7091717/user7091717"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 47997568, "answer_count": 3, "score": -2, "last_activity_date": 1514403010, "creation_date": 1514401825, "last_edit_date": 1514402304, "question_id": 47997425, "link": "https://stackoverflow.com/questions/47997425/how-do-i-stop-the-code-completely-as-soon-as-a-certain-thing-is-done", "title": "How do I stop the code completely as soon as a certain thing is done?", "body": "<p>I've already ruled out <code>os.exit</code>, <code>sys.exit()</code>, <code>raise SystemExit(0)</code>, <code>quit</code>, and <code>exit()</code>.</p>\n\n<p>I want to completely stop once one of my multiple while conditions are fulfilled.</p>\n\n<pre><code>while x:\n    #do something\n    #for loop\n    #if a:\n        #do something\n        print \"Game over\"\n        os.exit\n    #elif b:\n        #do something\n        print \"Game over\"\n        os.exit\n    break\n\nwhile y:\n    #(...same form as the previous one^)\n\n#get user input for the next turn\n\n#while 1\n#...\n#while n\n</code></pre>\n\n<p>When I play the game, and the game over message is printed on to the screen, it still asks for the user input despite being told to stop.</p>\n"}, {"tags": ["python", "image", "pygame", "2048"], "comments": [{"owner": {"reputation": 18103, "user_id": 6220679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK4H1.png?s=128&g=1", "display_name": "skrx", "link": "https://stackoverflow.com/users/6220679/skrx"}, "edited": false, "score": 0, "creation_date": 1514402515, "post_id": 47997417, "comment_id": 82963265, "body": "Take a look at <a href=\"https://stackoverflow.com/a/47771881/6220679\">this answer</a>. If you don&#39;t know how classes work, ignore that part of the answer and just blit the loaded images in your while loop."}, {"owner": {"reputation": 18103, "user_id": 6220679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK4H1.png?s=128&g=1", "display_name": "skrx", "link": "https://stackoverflow.com/users/6220679/skrx"}, "edited": false, "score": 1, "creation_date": 1514403036, "post_id": 47997417, "comment_id": 82963471, "body": "Please add a <a href=\"https://stackoverflow.com/help/mcve\">minimal, complete and verifiable example</a> and describe more thoroughly what you&#39;re trying to do and what&#39;s causing problems. Not everybody here knows the game 2048."}, {"owner": {"reputation": 18103, "user_id": 6220679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK4H1.png?s=128&g=1", "display_name": "skrx", "link": "https://stackoverflow.com/users/6220679/skrx"}, "edited": false, "score": 1, "creation_date": 1514403188, "post_id": 47997417, "comment_id": 82963537, "body": "If you want to compare the <code>number</code> to <code>2</code>, you probably shouldn&#39;t call the <code>str</code> function in the line above."}, {"owner": {"reputation": 33, "user_id": 9146529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35eee758d8b47209a4ca5a885957646?s=128&d=identicon&r=PG&f=1", "display_name": "youknowwho", "link": "https://stackoverflow.com/users/9146529/youknowwho"}, "edited": false, "score": 0, "creation_date": 1514403196, "post_id": 47997417, "comment_id": 82963539, "body": "What you need to know is that im trying to replace a &#39;2&#39; that appears in my pygame screen with an image"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 1, "creation_date": 1514411586, "post_id": 47997417, "comment_id": 82966622, "body": "if you use <code>str()</code> then <code>numer</code> is string <code>&quot;2&quot;</code> not integer <code>2</code>"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 1, "creation_date": 1514412904, "post_id": 47997417, "comment_id": 82966978, "body": "btw: you could keep images in list or dictionary and then use <code>list_of_images[number]</code>"}], "owner": {"reputation": 33, "user_id": 9146529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35eee758d8b47209a4ca5a885957646?s=128&d=identicon&r=PG&f=1", "display_name": "youknowwho", "link": "https://stackoverflow.com/users/9146529/youknowwho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "closed_date": 1610729471, "answer_count": 0, "score": 0, "last_activity_date": 1610729526, "creation_date": 1514401808, "last_edit_date": 1514418357, "question_id": 47997417, "link": "https://stackoverflow.com/questions/47997417/how-to-assign-images-in-pygame", "closed_reason": "Duplicate", "title": "How to assign images in pygame", "body": "<p>So I'm doing the 2048 game in python (pygame) and it's already working but I wanted to replace the numbers with some images I made and I can't do it. I would really appreciate if someone would help me. Thanks in advance.</p>\n\n<p>I tried this (where <code>j</code> and <code>k</code> are the line and column of the number ;  <code>str(value(game,j,k))</code> is the value in <code>j,k</code> ; <code>wood</code> is the name of the image I uploaded)</p>\n\n<pre><code>for j in range(1,5):\n    for k in range(1,5):\n        number=str(value(game,j,k))\n        if number==2:\n                   number = wood\n</code></pre>\n\n<p>in this case I wanted to replace the 2's with the wood image</p>\n"}, {"tags": ["python", "tensorflow", "cuda"], "comments": [{"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 1, "creation_date": 1514401710, "post_id": 47997381, "comment_id": 82962934, "body": "They are not binary backwards compatible. Everything is versioned and anything which is built against a given runtime API version and shared  libraries must have that version installed or have those libraries distributed with it for it to work"}, {"owner": {"reputation": 3221, "user_id": 4727666, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Xzs0NoBGYUM/AAAAAAAAAAI/AAAAAAAAAsI/OvJLK1sQo0k/photo.jpg?sz=128", "display_name": "Julio Daniel Reyes", "link": "https://stackoverflow.com/users/4727666/julio-daniel-reyes"}, "edited": false, "score": 2, "creation_date": 1514401969, "post_id": 47997381, "comment_id": 82963034, "body": "Here is the documentation to install tensorflow <a href=\"https://www.tensorflow.org/install/\" rel=\"nofollow noreferrer\">tensorflow.org/install</a> and to download other versions of cuda <a href=\"https://developer.nvidia.com/cuda-toolkit-archive\" rel=\"nofollow noreferrer\">developer.nvidia.com/cuda-toolkit-archive</a>"}], "answers": [{"tags": [], "owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "is_accepted": true, "score": 4, "last_activity_date": 1514489824, "creation_date": 1514489824, "answer_id": 48013359, "question_id": 47997381, "link": "https://stackoverflow.com/questions/47997381/tensorflow-and-cuda-version/48013359#48013359", "title": "Tensorflow and CUDA version", "body": "<p>If you have a binary (of any sort) that is linked against CUDA libraries such as <code>libcublas.so.8.0</code>, you won't be able to satisfy the requirement at shared-object-dynamic-load-time by substituting another library such as <code>libcublas.so.9.0</code>.  CUDA has certain kinds of forward/backward compatibility, but this is not one of them.  You must provide the exact library the code was linked against.</p>\n\n<p>If you want to access an older CUDA toolkit version, so as to make an older library available, those CUDA toolkit versions are generally available on the CUDA Toolkit Archive page <a href=\"https://developer.nvidia.com/cuda-toolkit-archive\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>If you already have a newer CUDA toolkit loaded and working properly, you should be able to load an older toolkit and use it without updating/modifying your installed GPU driver.</p>\n\n<p>To work around this so as to be able to actually use a newer library, you would need to relink (at least) the code/binaries that you are using.</p>\n"}], "owner": {"reputation": 4828, "user_id": 8378419, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2772206b4d6afcbdfe7485286554190d?s=128&d=identicon&r=PG&f=1", "display_name": "Robbie Milejczak", "link": "https://stackoverflow.com/users/8378419/robbie-milejczak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8106, "favorite_count": 3, "accepted_answer_id": 48013359, "answer_count": 1, "score": 4, "last_activity_date": 1527694168, "creation_date": 1514401596, "question_id": 47997381, "link": "https://stackoverflow.com/questions/47997381/tensorflow-and-cuda-version", "title": "Tensorflow and CUDA version", "body": "<p>From what I understand all versions of CUDA are backwards compatible, but after going through the whole process of installing CUDA and setting up a virtual environment with TF this happens when I <code>import tensorflow</code></p>\n\n<pre><code>ImportError: libcublas.so.8.0: cannot open shared object file: No such file or directory\n</code></pre>\n\n<p>which apparently means Tensorflow is looking for CUDA 8.0 but doesn't find CUDA 8.0 because I have CUDA 9.1 but if it is backwards compatible why should that matter? It's pretty surprising for such a popular library to be some vague on the setup instructions so I'm hoping someone here can shed some knowledge.</p>\n\n<p>I'd have no problem installing CUDA 8.0 but of course that isn't an option, I can only get the latest version via the NVIDIA website. What's the fix for this?</p>\n"}, {"tags": ["python", "syntax"], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 9146524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca8a28d8973fd10b842a39f820afa09c?s=128&d=identicon&r=PG&f=1", "display_name": "Dank Dorito", "link": "https://stackoverflow.com/users/9146524/dank-dorito"}, "edited": false, "score": 0, "creation_date": 1514401748, "post_id": 47997357, "comment_id": 82962950, "body": "Ah. Thank you for the help."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 3, "last_activity_date": 1514401839, "last_edit_date": 1514401839, "creation_date": 1514401471, "answer_id": 47997357, "question_id": 47997346, "link": "https://stackoverflow.com/questions/47997346/syntaxerror-255-on-list/47997357#47997357", "title": "SyntaxError 255 On List", "body": "<p>\"in the range\" is not legal Python.\nRemove \"the\".</p>\n\n<p>You have a variety of other problems in the code.  I strongly recommend that you adopt <em>incremental programming</em>, especially at this stage.  Start by writing a couple of lines of code, just enough to do something, such as read and print an integer.  Once those lines work, <em>then</em> add a couple more that run through a trivial <code>for</code> loop.  Continue this, a couple of lines at a time, adding just one \"baby step\" to your program, seeing minor successes as you go.  For instance, start with</p>\n\n<pre><code>n = int(input(\"How many times?\")\nprint \"n=\", n\n</code></pre>\n\n<p>Next, add the loop:</p>\n\n<pre><code>for i in range(0, n):\n    print \"i=\", i\n</code></pre>\n\n<p>Then go on to the serial input -- again, properly labeled:</p>\n\n<pre><code>    x = input(\"Give me number\", i)\n    print x, type(x)\n</code></pre>\n\n<p>See how this works?</p>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 9089179, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d702e3cc9c80c3345dbf474508d8a80b?s=128&d=identicon&r=PG&f=1", "display_name": "alex ", "link": "https://stackoverflow.com/users/9089179/alex"}, "is_accepted": false, "score": 0, "last_activity_date": 1514402013, "creation_date": 1514402013, "answer_id": 47997453, "question_id": 47997346, "link": "https://stackoverflow.com/questions/47997346/syntaxerror-255-on-list/47997453#47997453", "title": "SyntaxError 255 On List", "body": "<p>There are a few errors in your code . The variable\"x\" name should be 'strings', if you dont change it's name those for wont do anything and a previous error with the for.</p>\n\n<pre><code>for i in range(0,n):\n    strings=input()\n    for y in range(0,len(strings)):\n         #the code....\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 9146524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca8a28d8973fd10b842a39f820afa09c?s=128&d=identicon&r=PG&f=1", "display_name": "Dank Dorito", "link": "https://stackoverflow.com/users/9146524/dank-dorito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 417, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1514402013, "creation_date": 1514401403, "last_edit_date": 1514401468, "question_id": 47997346, "link": "https://stackoverflow.com/questions/47997346/syntaxerror-255-on-list", "title": "SyntaxError 255 On List", "body": "<p>In this piece of code:</p>\n\n<pre><code>n = int(input())\n\nfor i in the range(0, n):\n    x = input()\n\n    for y in range(0, len(string)):\n\n        if y % 2 == 0:\n            print(string[y], end='')\n\n    print(\"\", end='')\n\n    for y in range(0, len(string)):\n\n        if y % 2 != 0:\n            print(string[y], end='')\n\n    print(\"\")\n</code></pre>\n\n<p>Don't know why it came so messed up.</p>\n\n<p>Error:\n  File \"solution.py\", line 3\n    for i in the range(0, n):\n                     ^\nSyntaxError: invalid syntax</p>\n"}, {"tags": ["python", "scipy"], "comments": [{"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 1, "creation_date": 1514410509, "post_id": 47997344, "comment_id": 82966240, "body": "Be more precise about your exact criteria&#39;s. It&#39;s also questionable to use those methods incl. num-diff for such slow function-evals in my opinion."}, {"owner": {"reputation": 11, "user_id": 9146512, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211138582474861/picture?type=large", "display_name": "henhans", "link": "https://stackoverflow.com/users/9146512/henhans"}, "reply_to_user": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1514512034, "post_id": 47997344, "comment_id": 83002191, "body": "For the criteria, I choose the maximum of the function return vector to be smaller than a certain value, for example, max(fun(x))&lt;1.e-6, and the solution should be the x. Right now, I can solve the problem by printing the solution x to the hard drive, and then raise an error when max(fun(x))&lt;1.e-6. But this method forces the program to stop abnormally when the criterion is satisfied. Therefore, I wonder if there are other elegant ways to solve this problem."}], "owner": {"reputation": 11, "user_id": 9146512, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211138582474861/picture?type=large", "display_name": "henhans", "link": "https://stackoverflow.com/users/9146512/henhans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 192, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1514511336, "creation_date": 1514401395, "last_edit_date": 1514511336, "question_id": 47997344, "link": "https://stackoverflow.com/questions/47997344/stop-scipy-fsolve-or-hybrd-immediately-when-the-tolerance-is-reached", "title": "stop scipy fsolve or hybrd immediately when the tolerance is reached", "body": "<p>I am dealing with a time-\u00adconsuming optimization problem where each function evaluation takes about 20 minutes, and I have to perform the optimization for several parameters. Therefore, I would like to terminate the scipy fsolve or hybrd immediately when the maximum of the function return values are smaller than a certain criterion, e.g. 1.e\u00ad-6, to avoid further calculation of the jacobians. Since the scipy fsolve and hybrd do not support the callback argument, I wonder if there are other ways that I can terminate the optimization process without throwing errors?  </p>\n\n<p>Thank you.<br>\nTsung\u00adHan</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 26041, "user_id": 3339965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac89d084d3bc5dc083bad3ea5518f11?s=128&d=identicon&r=PG&f=1", "display_name": "root", "link": "https://stackoverflow.com/users/3339965/root"}, "edited": false, "score": 1, "creation_date": 1514402279, "post_id": 47997303, "comment_id": 82963165, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/32441551/pandas-if-statements-excel-equivalent\">Pandas If Statements (excel equivalent)</a>"}], "answers": [{"comments": [{"owner": {"reputation": 849, "user_id": 9028003, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f4a20f30230076b8851eba1d475abe57?s=128&d=identicon&r=PG&f=1", "display_name": "TylerNG", "link": "https://stackoverflow.com/users/9028003/tylerng"}, "edited": false, "score": 0, "creation_date": 1514401605, "post_id": 47997343, "comment_id": 82962897, "body": "I see.  &quot;where&quot; would be a an if then statement here.  Thanks"}], "tags": [], "owner": {"reputation": 864, "user_id": 8627559, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1a5ba760dc2b2ec8cabee703ad415414?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas Dresl", "link": "https://stackoverflow.com/users/8627559/lucas-dresl"}, "is_accepted": true, "score": 4, "last_activity_date": 1514401393, "creation_date": 1514401393, "answer_id": 47997343, "question_id": 47997303, "link": "https://stackoverflow.com/questions/47997303/panda-adding-column-with-if-condition/47997343#47997343", "title": "Panda adding column with if condition", "body": "<p>You can try:     </p>\n\n<pre><code> df['z'] = np.where(df['x']!=0,df['x'],df['y'])\n</code></pre>\n"}], "owner": {"reputation": 849, "user_id": 9028003, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f4a20f30230076b8851eba1d475abe57?s=128&d=identicon&r=PG&f=1", "display_name": "TylerNG", "link": "https://stackoverflow.com/users/9028003/tylerng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 47997343, "answer_count": 1, "score": 0, "last_activity_date": 1514466115, "creation_date": 1514401177, "last_edit_date": 1514466115, "question_id": 47997303, "link": "https://stackoverflow.com/questions/47997303/panda-adding-column-with-if-condition", "title": "Panda adding column with if condition", "body": "<p>Hi I'm not sure how to add a new column z to my existing df where z = x if x is not 0 else y .</p>\n\n<p>For example:</p>\n\n<pre><code>Name  x  y  |z (new col)\nA     1  5  |1\nB     2  6  |2\nC     0  3  |3\nD     0  0  |0\n</code></pre>\n\n<p>Does np.where apply in this case?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "nlp", "nvidia", "torch"], "comments": [{"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1514489044, "post_id": 47997282, "comment_id": 82994990, "body": "Despite what you might think, this question is about the python framework and its internals, and is not a CUDA. programming question. For that reason I have removed the CUDA tag. Please do not re-add it."}, {"owner": {"reputation": 9, "user_id": 7642584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11e3841e66f8fafbcd2a110b19f55614?s=128&d=identicon&r=PG", "display_name": "parinaya-007", "link": "https://stackoverflow.com/users/7642584/parinaya-007"}, "reply_to_user": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1514489143, "post_id": 47997282, "comment_id": 82995029, "body": "Ok but the main problem is of cuda only. I dont know how to remove its usage"}, {"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1514490659, "post_id": 47997282, "comment_id": 82995750, "body": "That has everything to do with the framework and nothing to do with CUDA especially when you don&#39;t even have a driver installed"}], "answers": [{"tags": [], "owner": {"reputation": 9, "user_id": 7642584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11e3841e66f8fafbcd2a110b19f55614?s=128&d=identicon&r=PG", "display_name": "parinaya-007", "link": "https://stackoverflow.com/users/7642584/parinaya-007"}, "is_accepted": false, "score": 0, "last_activity_date": 1516006249, "creation_date": 1516006249, "answer_id": 48259543, "question_id": 47997282, "link": "https://stackoverflow.com/questions/47997282/unable-to-use-bidaf-model-without-using-cuda-device-bidafpredictor-model-fo/48259543#48259543", "title": "Unable to use bidaf model without using &#39;cuda_device&#39; : bidafPredictor._model.forward_on_instance(inst, cuda_device=-1)", "body": "<p>The problem was solved by removing cuda dependency of code(from each file in the allennlp library).</p>\n"}], "owner": {"reputation": 9, "user_id": 7642584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11e3841e66f8fafbcd2a110b19f55614?s=128&d=identicon&r=PG", "display_name": "parinaya-007", "link": "https://stackoverflow.com/users/7642584/parinaya-007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 515, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516006249, "creation_date": 1514401044, "last_edit_date": 1514488968, "question_id": 47997282, "link": "https://stackoverflow.com/questions/47997282/unable-to-use-bidaf-model-without-using-cuda-device-bidafpredictor-model-fo", "title": "Unable to use bidaf model without using &#39;cuda_device&#39; : bidafPredictor._model.forward_on_instance(inst, cuda_device=-1)", "body": "<p>I am trying to use bidaf question answer model\nsource from : <a href=\"https://github.com/allenai/bi-att-flow\" rel=\"nofollow noreferrer\">https://github.com/allenai/bi-att-flow</a></p>\n\n<p>This class is created to use the library provided by <a href=\"https://github.com/allenai\" rel=\"nofollow noreferrer\">https://github.com/allenai</a>.</p>\n\n<pre><code>## REQUIRES python3.6\n\nfrom allennlp.common.util import sanitize\nfrom allennlp.models.archival import load_archive\nfrom allennlp.service.predictors import Predictor\nimport sys\n\nclass BidafQA:\n    def __init__(self):\n        # required only first time, is cached\n        self.archive_file = \"https://s3-us-west-2.amazonaws.com/allennlp/models/bidaf-model-2017.09.15-charpad.tar.gz\"\n        self.archive = load_archive(self.archive_file)\n        self.bidafPredictor = Predictor.from_archive(self.archive, 'machine-comprehension')\n\n    def get_answer(self, question_text, passage_text):\n        out = self.get_output(question_text, passage_text)\n        return out['best_span_str'], max(out['span_start_probs']), max(out['span_end_probs'])\n\n    def get_output(self, question_text, passage_text):\n        inst = self.bidafPredictor._dataset_reader.text_to_instance(question_text, passage_text)\n        outputs = self.bidafPredictor._model.forward_on_instance(inst, cuda_device=-1)\n        out = sanitize(outputs)\n        return out\n\n    def get_probs(self, question_text, passage_text):\n        out = self.get_output(question_text, passage_text)\n        return max(out['span_start_probs']), max(out['span_end_probs'])\n\n    def answerAll(self, paras_text, question):\n        ans_all = list(map(lambda x: (self.get_answer(question, x[0])[0], x[0], x[1]), paras_text))\n        _, probS, probE = self.get_answer(question, paras_text[0][0])\n        return ans_all, (probS, probE)\n\n    def getSRL(sent):\n        # Check out \n        # https://github.com/allenai/allennlp/blob/f700584ed1b72ab45215e405ed0d22564938d1cb/allennlp/service/predictors/semantic_role_labeler.py\n        archive_file = \"https://s3-us-west-2.amazonaws.com/allennlp/models/srl-model-2017.09.05.tar.gz\"\n        archive = load_archive(archive_file)\n        srlPred = Predictor.from_archive(archive, 'semantic-role-labeling')\n        return srlPred.predict_json({\"sentence\": sent})\n\nbidaf_obj = BidafQA()\nprint(bidaf_obj.get_answer(\"question_text\", \"passage_text\"))\n</code></pre>\n\n<p>When the argument in self.bidafPredictor._model.forward_on_instance(inst, cuda_device=-1) for cuda_device is given -1 the error occurs as follows:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"bidafqa.py\", line 24, in get_answer\n    out = self.get_output(question_text, passage_text)\n  File \"bidafqa.py\", line 29, in get_output\n    outputs = self.bidafPredictor._model.forward_on_instance(inst, -1)\n  File \"/usr/local/lib/python3.6/dist-packages/allennlp/models/model.py\", line 112, in forward_on_instance\n    return self.forward_on_instances([instance], cuda_device)[0]\n  File \"/usr/local/lib/python3.6/dist-packages/allennlp/models/model.py\", line 131, in forward_on_instances\n    outputs = self.decode(self(**model_input))\n  File \"/usr/local/lib/python3.6/dist-packages/torch/nn/modules/module.py\", line 224, in __call__\n    result = self.forward(*input, **kwargs)\n  File \"/usr/local/lib/python3.6/dist-packages/allennlp/models/reading_comprehension/bidaf.py\", line 202, in forward\n    passage_question_attention = util.last_dim_softmax(passage_question_similarity, question_mask)\n  File \"/usr/local/lib/python3.6/dist-packages/allennlp/nn/util.py\", line 302, in last_dim_softmax\n    return _last_dimension_applicator(masked_softmax, tensor, mask)\n  File \"/usr/local/lib/python3.6/dist-packages/allennlp/nn/util.py\", line 292, in _last_dimension_applicator\n    reshaped_result = function_to_apply(reshaped_tensor, mask)\n  File \"/usr/local/lib/python3.6/dist-packages/allennlp/nn/util.py\", line 124, in masked_softmax\n    result = torch.nn.functional.softmax(vector * mask, dim=-1)\nTypeError: softmax() got an unexpected keyword argument 'dim'\n</code></pre>\n\n<p>and when it is used with some number then the error occurs:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"bidafqa.py\", line 51, in &lt;module&gt;\n    print (bidaf_obj.get_answer(\"question_text\", \"passage_text\"))\n  File \"bidafqa.py\", line 24, in get_answer\n    out = self.get_output(question_text, passage_text)\n  File \"bidafqa.py\", line 29, in get_output\n    outputs = self.bidafPredictor._model.forward_on_instance(inst, 0)\n  File \"/usr/local/lib/python3.6/dist-packages/allennlp/models/model.py\", line 112, in forward_on_instance\n    return self.forward_on_instances([instance], cuda_device)[0]\n  File \"/usr/local/lib/python3.6/dist-packages/allennlp/models/model.py\", line 130, in forward_on_instances\n    model_input = dataset.as_tensor_dict(cuda_device=cuda_device, for_training=False)\n  File \"/usr/local/lib/python3.6/dist-packages/allennlp/data/dataset.py\", line 161, in as_tensor_dict\n    for field, tensors in instance.as_tensor_dict(lengths_to_use, cuda_device, for_training).items():\n  File \"/usr/local/lib/python3.6/dist-packages/allennlp/data/instance.py\", line 71, in as_tensor_dict\n    for_training=for_training)\n  File \"/usr/local/lib/python3.6/dist-packages/allennlp/data/fields/text_field.py\", line 119, in as_tensor\n    tensors[indexer_name] = tensor if cuda_device == -1 else tensor.cuda(cuda_device)\n  File \"/usr/local/lib/python3.6/dist-packages/torch/autograd/variable.py\", line 279, in cuda\n    return CudaTransfer.apply(self, device_id, async)\n  File \"/usr/local/lib/python3.6/dist-packages/torch/autograd/_functions/tensor.py\", line 149, in forward\n    return i.cuda(device_id, async=async)\n  File \"/usr/local/lib/python3.6/dist-packages/torch/_utils.py\", line 58, in _cuda\n    with torch.cuda.device(device):\n  File \"/usr/local/lib/python3.6/dist-packages/torch/cuda/__init__.py\", line 125, in __enter__\n    _lazy_init()\n  File \"/usr/local/lib/python3.6/dist-packages/torch/cuda/__init__.py\", line 84, in _lazy_init\n    _check_driver()\n  File \"/usr/local/lib/python3.6/dist-packages/torch/cuda/__init__.py\", line 58, in _check_driver\n    http://www.nvidia.com/Download/index.aspx\"\"\")\nAssertionError: \nFound no NVIDIA driver on your system. Please check that you\nhave an NVIDIA GPU and installed a driver from\nhttp://www.nvidia.com/Download/index.aspx\n</code></pre>\n\n<p>If I don't want to use any cuda device then how am I supposed to use this command (self.bidafPredictor._model.forward_on_instance(inst, 0)) and what should be the parameter value to do so?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 4471, "user_id": 2598661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077bac49baa40c91fca05d805a30b075?s=128&d=identicon&r=PG", "display_name": "nitred", "link": "https://stackoverflow.com/users/2598661/nitred"}, "edited": false, "score": 0, "creation_date": 1514401147, "post_id": 47997234, "comment_id": 82962719, "body": "Can you check line 6 of your file <code>GlobalTemperatures.csv</code>. It is expecting 1 column but seems like line 6 has two column or 2 commas. If possible could you add to your question the line 4, 5, 6, 7 of your CSV file if it doesn&#39;t contain any sensitive data?"}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1514402258, "post_id": 47997234, "comment_id": 82963157, "body": "Can you show the first 10 lines of your csv file?"}], "owner": {"reputation": 13, "user_id": 9146223, "user_type": "registered", "profile_image": "https://graph.facebook.com/930974407054348/picture?type=large", "display_name": "\u0645\u062d\u0645\u062f\u064a \u0637\u0647", "link": "https://stackoverflow.com/users/9146223/%d9%85%d8%ad%d9%85%d8%af%d9%8a-%d8%b7%d9%87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 703, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1514400725, "creation_date": 1514400725, "question_id": 47997234, "link": "https://stackoverflow.com/questions/47997234/pandas-read-csv-error-error-tokenizing-data-c-error-expected-1-fields-in-line", "title": "pandas.read_csv Error: Error tokenizing data. C error: Expected 1 fields in line 6, saw 2", "body": "<p>I have problem here i want to read some csv and store it in variable with python pandas this is my code:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\ndf = pd.read_csv(\"GlobalTemperatures.csv\")\n</code></pre>\n\n<p>and this is the output:</p>\n\n<pre><code>---------------------------------------------------------------------------\nCParserError                              Traceback (most recent call \nlast)\n&lt;ipython-input-5-eb2bcd3c4f37&gt; in &lt;module&gt;()\n----&gt; 1 df = pd.read_csv(\"GlobalTemperatures.csv\")\n\n(pandas/parser.c:10415)()\n\npandas/parser.pyx in pandas.parser.TextReader._read_low_memory \n(pandas/parser.c:10691)()\n\npandas/parser.pyx in pandas.parser.TextReader._read_rows \n(pandas/parser.c:11437)()\n\npandas/parser.pyx in pandas.parser.TextReader._tokenize_rows \n(pandas/parser.c:11308)()\n\npandas/parser.pyx in pandas.parser.raise_parser_error \n(pandas/parser.c:27037)()\n\nCParserError: Error tokenizing data. C error: Expected 1 fields in \nline 6, saw 2\n</code></pre>\n\n<p>please, any suggestion?</p>\n"}, {"tags": ["python", "qt", "pyqt", "pyqt5", "qpropertyanimation"], "comments": [{"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 1, "creation_date": 1514401680, "post_id": 47997230, "comment_id": 82962927, "body": "Can you please stop posting the same question over and over again. If you need to reformulate it, edit one of your existing questions."}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1514404905, "post_id": 47997230, "comment_id": 82964225, "body": "&quot;How do I animate a position change with QPropertyAnimation while using a layout method?&quot; -- you don&#39;t, generally.  If you put a <code>QWidget</code> in a layout it&#39;s because you want the geometry of that <code>QWidget</code> to be managed by that layout.  If you want to set the geometry of the widget yourself then why put it in a layout in the first place?"}], "owner": {"reputation": 77, "user_id": 9136882, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dsxPscj4Q4w/AAAAAAAAAAI/AAAAAAAAghQ/flkF2DDzKME/photo.jpg?sz=128", "display_name": "kyle hoell", "link": "https://stackoverflow.com/users/9136882/kyle-hoell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 572, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1514400698, "creation_date": 1514400698, "question_id": 47997230, "link": "https://stackoverflow.com/questions/47997230/how-do-i-animate-a-position-change-with-qpropertyanimation-while-using-a-layout", "title": "How do I animate a position change with QPropertyAnimation while using a layout method?", "body": "<p>So basically what I am trying to do is animate a widget moving, the start point being (0,0) or somewhere on the side of the parent window, and then the end point being where the widget is actually positioned on the parent window. But I am using a layout method, QGridLayout to be specific, so i cannot just change the geometry like you normally would from my understanding. Here is what a tried so far. </p>\n\n<pre><code>    print (\"POS: \", self.Play_label.pos())\n\n    geometry_play = self.Play_label.geometry()\n    print (\"mapp: \", self.Play_label.mapToGlobal(QPoint(0,0)))\n\n    print (\"play geo: \", geometry_play)\n\n    self.animation = QPropertyAnimation(self.Play_label, b\"geometry\")\n\n    self.animation.setDuration(3000)\n    self.animation.setStartValue(QRect(0,0,150,150))\n    self.animation.setEndValue(geometry_play)\n    #print (\"Value: \", self.animation.currentValue())\n    #self.animation.valueChanged.connect(self.Play_label.changeImageSize)\n    #self.animation.setTargetObject(self.Play_label)\n    self.animation.start()\n</code></pre>\n\n<p>But the label that I created always has its x and y coordinates being (0,0), is this because I am using a layout method? Even if I attempt to print out the position using the .pos() method it always returns (0,0). </p>\n\n<p>Is there any simple way to animate this change? I understand I can change the 2nd parameter of the animation to something other than geometry but i cannot figure out what i would change it to in my case. Please any helps would be much appreciated been trying to figure this out for days now.</p>\n"}, {"tags": ["python", "tensorflow"], "answers": [{"tags": [], "owner": {"reputation": 1902, "user_id": 5737630, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/aebb1909b9d5508690f606f3bf55388f?s=128&d=identicon&r=PG", "display_name": "Lior", "link": "https://stackoverflow.com/users/5737630/lior"}, "is_accepted": true, "score": 1, "last_activity_date": 1514426453, "creation_date": 1514426453, "answer_id": 48000750, "question_id": 47997203, "link": "https://stackoverflow.com/questions/47997203/tensorflow-restore-if-present/48000750#48000750", "title": "TensorFlow - restore if present", "body": "<p>You can use the following function for restoring (taken from <a href=\"https://github.com/tensorflow/tensorflow/issues/1823\" rel=\"nofollow noreferrer\">here</a>):</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def optimistic_restore(session, save_file, graph=tf.get_default_graph()):\n    reader = tf.train.NewCheckpointReader(save_file)\n    saved_shapes = reader.get_variable_to_shape_map()\n    var_names = sorted([(var.name, var.name.split(':')[0]) for var in tf.global_variables()\n            if var.name.split(':')[0] in saved_shapes])    \n    restore_vars = []    \n    for var_name, saved_var_name in var_names:            \n        curr_var = graph.get_tensor_by_name(var_name)\n        var_shape = curr_var.get_shape().as_list()\n        if var_shape == saved_shapes[saved_var_name]:\n            restore_vars.append(curr_var)\n    opt_saver = tf.train.Saver(restore_vars)\n    opt_saver.restore(session, save_file)\n</code></pre>\n\n<p>I usually run a <code>sess.run(tf.global_variables_initializer())</code> to make sure all variables are initialized, and then I run <code>optimistic_restore(sess,...)</code> to restore the variables which can be restored. </p>\n"}, {"tags": [], "owner": {"reputation": 4261, "user_id": 3552975, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a3afcf08cd317313539eeca4b605c0ad?s=128&d=identicon&r=PG&f=1", "display_name": "Lerner Zhang", "link": "https://stackoverflow.com/users/3552975/lerner-zhang"}, "is_accepted": false, "score": 0, "last_activity_date": 1514426480, "creation_date": 1514426480, "answer_id": 48000752, "question_id": 47997203, "link": "https://stackoverflow.com/questions/47997203/tensorflow-restore-if-present/48000752#48000752", "title": "TensorFlow - restore if present", "body": "<p>You can make two savers, one for restoring the variables in the checkpoint and one for saving those variables from the checkpoint and the newly added variables. To restore variables in the checkpoint, <strong>all variables bounded to the saver should be in the checkpoint</strong>(that's the reason the error occurs), and if you do this way, you should first initialize all variables before restoring part of the defined variables which exist in the checkpoint.</p>\n"}], "owner": {"reputation": 1431, "user_id": 1779853, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d77afdcecf4a659e43e0a725b120b7ca?s=128&d=identicon&r=PG", "display_name": "VF1", "link": "https://stackoverflow.com/users/1779853/vf1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 803, "favorite_count": 0, "accepted_answer_id": 48000750, "answer_count": 2, "score": 3, "last_activity_date": 1528232269, "creation_date": 1514400557, "last_edit_date": 1528232269, "question_id": 47997203, "link": "https://stackoverflow.com/questions/47997203/tensorflow-restore-if-present", "title": "TensorFlow - restore if present", "body": "<p>Is it possible to restore a variable, only if present? What is the most idiomatic way of doing so?</p>\n\n<p>For instance, consider the following minimal example:</p>\n\n<pre><code>import tensorflow as tf\nimport glob\nimport sys\nimport os\n\nwith tf.variable_scope('volatile'):\n    x = tf.get_variable('x', initializer=0)\n\nwith tf.variable_scope('persistent'):\n    y = tf.get_variable('y', initializer=0)\n    add1 = tf.assign_add(y, 1)\n\nsaver = tf.train.Saver(tf.get_collection(tf.GraphKeys.GLOBAL_VARIABLES, 'persistent'))\n\nsess = tf.InteractiveSession()\ntf.global_variables_initializer().run()\ntf.get_default_graph().finalize()\n\nprint('save file', sys.argv[1])\nif glob.glob(sys.argv[1] + '*'):    \n    saver.restore(sess, sys.argv[1])\n\nprint(sess.run(y))\nsess.run(add1)\nprint(sess.run(y))\nsaver.save(sess, sys.argv[1])\n</code></pre>\n\n<p>When run twice with the same argument, the program first prints <code>0\\n1</code> and then <code>1\\n2</code> as expected. Now suppose you update your code to have new functionality, by adding a <code>z = tf.get_variable('z', initializer=0)</code> after <code>add1</code> within the <code>persistent</code> scope. Running this again when the old save file is present will break with the following:</p>\n\n<pre><code>NotFoundError (see above for traceback): Key persistent/z not found in checkpoint\n     [[Node: save/RestoreV2_1 = RestoreV2[dtypes=[DT_INT32],\n         _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](_arg_save/Const_0_0,\n                                                                 save/RestoreV2_1/tensor_names,\n                                                                 save/RestoreV2_1/shape_and_slices)]]\n     [[Node: save/Assign_1/_18 = _Recv[client_terminated=false,\n         recv_device=\"/job:localhost/replica:0/task:0/device:GPU:0\",\n         send_device=\"/job:localhost/replica:0/task:0/device:CPU:0\",\n         send_device_incarnation=1,\n         tensor_name=\"edge_12_save/Assign_1\",\n         tensor_type=DT_FLOAT,\n         _device=\"/job:localhost/replica:0/task:0/device:GPU:0\"]()]]\n</code></pre>\n"}, {"tags": ["python", "unit-testing", "pytest"], "comments": [{"owner": {"reputation": 732, "user_id": 4999812, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/8bd09518ec24320e674e5feb9cf69a63?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Dube", "link": "https://stackoverflow.com/users/4999812/brandon-dube"}, "reply_to_user": {"reputation": 1633, "user_id": 6502500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EnuRp.png?s=128&g=1", "display_name": "Mangohero1", "link": "https://stackoverflow.com/users/6502500/mangohero1"}, "edited": false, "score": 0, "creation_date": 1514400596, "post_id": 47997183, "comment_id": 82962490, "body": "@Mangohero1 the snippet would be at the top of a module, not part of some function.  There is no way for the importerror to &quot;bubble&quot; up into pytest."}, {"owner": {"reputation": 2536, "user_id": 1032340, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tUV0d.jpg?s=128&g=1", "display_name": "dvnguyen", "link": "https://stackoverflow.com/users/1032340/dvnguyen"}, "edited": false, "score": 0, "creation_date": 1514400741, "post_id": 47997183, "comment_id": 82962551, "body": "May I ask why you want to test that? Just curious."}, {"owner": {"reputation": 1633, "user_id": 6502500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EnuRp.png?s=128&g=1", "display_name": "Mangohero1", "link": "https://stackoverflow.com/users/6502500/mangohero1"}, "edited": false, "score": 0, "creation_date": 1514400864, "post_id": 47997183, "comment_id": 82962607, "body": "Sorry, misread it. Wouldn&#39;t it be the same way? Prepending <code>test_</code>?"}, {"owner": {"reputation": 732, "user_id": 4999812, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/8bd09518ec24320e674e5feb9cf69a63?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Dube", "link": "https://stackoverflow.com/users/4999812/brandon-dube"}, "reply_to_user": {"reputation": 2536, "user_id": 1032340, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tUV0d.jpg?s=128&g=1", "display_name": "dvnguyen", "link": "https://stackoverflow.com/users/1032340/dvnguyen"}, "edited": false, "score": 0, "creation_date": 1514401146, "post_id": 47997183, "comment_id": 82962718, "body": "@dvnguyen I write a module that can use numba to provide a jit.  If numba isn&#39;t installed, I define a jit decorator that returns the function passed to it unchanged.  I know it works, but I would like to avoid the coverage penalty for not having test(s) that cover it."}, {"owner": {"reputation": 732, "user_id": 4999812, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/8bd09518ec24320e674e5feb9cf69a63?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Dube", "link": "https://stackoverflow.com/users/4999812/brandon-dube"}, "reply_to_user": {"reputation": 1633, "user_id": 6502500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EnuRp.png?s=128&g=1", "display_name": "Mangohero1", "link": "https://stackoverflow.com/users/6502500/mangohero1"}, "edited": false, "score": 0, "creation_date": 1514401206, "post_id": 47997183, "comment_id": 82962748, "body": "@Mangohero1 -- it is part of a module, not the module&#39;s tests.  There is no way to my knowledge to write a test that is <code>def test_when_the_module_was_imported_an_importerror_was_raised_&zwnj;&#8203;and_handled,_test_th&zwnj;&#8203;e_importerror_catchi&zwnj;&#8203;ng_block():</code>"}], "answers": [{"comments": [{"owner": {"reputation": 732, "user_id": 4999812, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/8bd09518ec24320e674e5feb9cf69a63?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Dube", "link": "https://stackoverflow.com/users/4999812/brandon-dube"}, "edited": false, "score": 0, "creation_date": 1514402395, "post_id": 47997308, "comment_id": 82963212, "body": "I don&#39;t want to mock the module though, I want to test code that handles an importerror within the module."}, {"owner": {"reputation": 1012, "user_id": 6650014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10157116047225461/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/6650014/alex"}, "reply_to_user": {"reputation": 732, "user_id": 4999812, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/8bd09518ec24320e674e5feb9cf69a63?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Dube", "link": "https://stackoverflow.com/users/4999812/brandon-dube"}, "edited": false, "score": 0, "creation_date": 1514486075, "post_id": 47997308, "comment_id": 82993767, "body": "Right, you mock the import call to reach the exception case."}, {"owner": {"reputation": 732, "user_id": 4999812, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/8bd09518ec24320e674e5feb9cf69a63?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Dube", "link": "https://stackoverflow.com/users/4999812/brandon-dube"}, "edited": false, "score": 0, "creation_date": 1514488163, "post_id": 47997308, "comment_id": 82994625, "body": "Would that not require putting the test code inside the module?"}, {"owner": {"reputation": 1012, "user_id": 6650014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10157116047225461/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/6650014/alex"}, "reply_to_user": {"reputation": 732, "user_id": 4999812, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/8bd09518ec24320e674e5feb9cf69a63?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Dube", "link": "https://stackoverflow.com/users/4999812/brandon-dube"}, "edited": false, "score": 0, "creation_date": 1514496055, "post_id": 47997308, "comment_id": 82997999, "body": "No. In your test, before it executes, you need to mock the import to raise an exception. Here&#39;s a great <a href=\"https://medium.com/python-pandemonium/how-to-test-your-imports-1461c1113be1\" rel=\"nofollow noreferrer\">blog post</a> describing exactly what you need to do."}, {"owner": {"reputation": 732, "user_id": 4999812, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/8bd09518ec24320e674e5feb9cf69a63?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Dube", "link": "https://stackoverflow.com/users/4999812/brandon-dube"}, "edited": false, "score": 0, "creation_date": 1514496383, "post_id": 47997308, "comment_id": 82998106, "body": "that works inside the module.  In a unittest with a test runner, things are considerably more complicated."}, {"owner": {"reputation": 1012, "user_id": 6650014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10157116047225461/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/6650014/alex"}, "reply_to_user": {"reputation": 732, "user_id": 4999812, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/8bd09518ec24320e674e5feb9cf69a63?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Dube", "link": "https://stackoverflow.com/users/4999812/brandon-dube"}, "edited": false, "score": 0, "creation_date": 1514496726, "post_id": 47997308, "comment_id": 82998234, "body": "What do you mean more complicated? Have you tried it? It shouldn&#39;t matter if it&#39;s in a test runner or not."}, {"owner": {"reputation": 732, "user_id": 4999812, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/8bd09518ec24320e674e5feb9cf69a63?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Dube", "link": "https://stackoverflow.com/users/4999812/brandon-dube"}, "edited": false, "score": 0, "creation_date": 1514496906, "post_id": 47997308, "comment_id": 82998289, "body": "Yes, I&#39;ve tried it.  All test runners import the module under test, which will trigger the &quot;can import&quot; block.  If a module has C extensions, then there may be a large number of references to it created by importing (for numba, there are 57).  If you try to &quot;hide&quot; the module you want to cause an <code>ImportError</code> in this case, you will find it is very difficult to do so.  The only solution that <i>may</i> work as you describe is to have an entirely separate test suite that only tests ImportError catching blocks where you monkeypatch the module you want to fail to Import.  But there must be a better way"}], "tags": [], "owner": {"reputation": 1012, "user_id": 6650014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10157116047225461/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/6650014/alex"}, "is_accepted": false, "score": 0, "last_activity_date": 1514401196, "creation_date": 1514401196, "answer_id": 47997308, "question_id": 47997183, "link": "https://stackoverflow.com/questions/47997183/how-to-test-code-that-handles-importerrors/47997308#47997308", "title": "How to test code that handles ImportErrors?", "body": "<p>you can mock the behavior of <code>bar</code> to raise an <code>ImportError</code> on import within your test. I would take a look at <a href=\"https://stackoverflow.com/questions/8658043/how-to-mock-an-import\">this</a></p>\n"}], "owner": {"reputation": 732, "user_id": 4999812, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/8bd09518ec24320e674e5feb9cf69a63?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Dube", "link": "https://stackoverflow.com/users/4999812/brandon-dube"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1514401196, "creation_date": 1514400396, "question_id": 47997183, "link": "https://stackoverflow.com/questions/47997183/how-to-test-code-that-handles-importerrors", "title": "How to test code that handles ImportErrors?", "body": "<p>Suppose I have a module that does something like this:</p>\n\n<pre><code>try:\n    from foo import bar\nexcept ImportError:\n    def bar():\n        pass\n</code></pre>\n\n<p>How do I test the <code>except ImportError</code> block with pytest?</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "edited": false, "score": 2, "creation_date": 1514400454, "post_id": 47997174, "comment_id": 82962431, "body": "Can you provide sample input and expected output? Your question will be considered <i>too broad</i> otherwise."}, {"owner": {"reputation": 5979, "user_id": 8534588, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/63d016df9eac3cc0a70b1fb1683dc62b?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Withee", "link": "https://stackoverflow.com/users/8534588/josh-withee"}, "edited": false, "score": 0, "creation_date": 1514400476, "post_id": 47997174, "comment_id": 82962441, "body": "Do you want floats with 1 decimal point as well?"}, {"owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "edited": false, "score": 0, "creation_date": 1514400745, "post_id": 47997174, "comment_id": 82962556, "body": "Also, when you say <code>with 2dp</code> do you mean if you have a number like <code>1.123</code> you want to get <code>1.12</code> or you want to disregard it completely such that you don&#39;t have it show up in the output? Also if you have <code>1.126</code>, assuming you want to cut off the last digits such that you get <code>1.12</code>: Do you want <code>1.12</code> or the rounded value of <code>1.13</code>?"}, {"owner": {"reputation": 3, "user_id": 9146467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e0d4960d7c93023263e821752337f0?s=128&d=identicon&r=PG&f=1", "display_name": "Stev1234", "link": "https://stackoverflow.com/users/9146467/stev1234"}, "edited": false, "score": 0, "creation_date": 1514401123, "post_id": 47997174, "comment_id": 82962706, "body": "Apologies for the poorly framed question. I would like to consider numbers with 1 dp but would like to completely disregard numbers with more than 2 dp. So that a number like 1.126 isn&#39;t extracted from the string."}], "answers": [{"tags": [], "owner": {"reputation": 25081, "user_id": 4804629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vGzEm.jpg?s=128&g=1", "display_name": "splash58", "link": "https://stackoverflow.com/users/4804629/splash58"}, "is_accepted": false, "score": 0, "last_activity_date": 1514401824, "creation_date": 1514401824, "answer_id": 47997423, "question_id": 47997174, "link": "https://stackoverflow.com/questions/47997174/python-regex-obtaining-currency-numbers-from-a-string/47997423#47997423", "title": "Python Regex: obtaining currency numbers from a string", "body": "<pre><code>import re\n\ntemp = ['1000.5 - 2000.55']\nstrings = re.findall('\\d+(?:[.,]\\d*)?', temp[0])\nnums = [float(i) for i in strings]\nprint(nums) # [1000.5, 2000.55]\n</code></pre>\n\n<p><a href=\"https://eval.in/926342\" rel=\"nofollow noreferrer\"><strong>demo</strong></a></p>\n"}, {"tags": [], "owner": {"reputation": 8912, "user_id": 5904928, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/jwFz9.png?s=128&g=1", "display_name": "Aaditya Ura", "link": "https://stackoverflow.com/users/5904928/aaditya-ura"}, "is_accepted": false, "score": 0, "last_activity_date": 1514402254, "creation_date": 1514402254, "answer_id": 47997510, "question_id": 47997174, "link": "https://stackoverflow.com/questions/47997174/python-regex-obtaining-currency-numbers-from-a-string/47997510#47997510", "title": "Python Regex: obtaining currency numbers from a string", "body": "<p>You can just use <code>[0-9.]+</code> :</p>\n\n<pre><code>import re\npattern=r'[0-9.]+'\ntemp = ['1000.5 - 2000.55']\nfor i in temp:\n    print(list(map(lambda x:float(x),re.findall(pattern,i))))\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>[1000.5, 2000.55]\n</code></pre>\n\n<p>You can also do in one line :</p>\n\n<pre><code>print([list(map(lambda x:float(x),re.findall(pattern,i))) for i in temp][0])\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>[1000.5, 2000.55]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": true, "score": 0, "last_activity_date": 1514402619, "creation_date": 1514402619, "answer_id": 47997576, "question_id": 47997174, "link": "https://stackoverflow.com/questions/47997174/python-regex-obtaining-currency-numbers-from-a-string/47997576#47997576", "title": "Python Regex: obtaining currency numbers from a string", "body": "<p>You can try this:</p>\n\n<pre><code>import re\ntemp = ['1000.5 - 2000.55']\nfinal_data = map(float, re.findall('\\d+\\.\\d+|\\d+', temp[0]))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[1000.5, 2000.55]\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9146467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e0d4960d7c93023263e821752337f0?s=128&d=identicon&r=PG&f=1", "display_name": "Stev1234", "link": "https://stackoverflow.com/users/9146467/stev1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 793, "favorite_count": 0, "accepted_answer_id": 47997576, "answer_count": 3, "score": -3, "last_activity_date": 1560895794, "creation_date": 1514400347, "last_edit_date": 1514400990, "question_id": 47997174, "link": "https://stackoverflow.com/questions/47997174/python-regex-obtaining-currency-numbers-from-a-string", "title": "Python Regex: obtaining currency numbers from a string", "body": "<p>I am new to regex and am trying to use re.findall to extract currency-like numbers (integers or floats with 1 or 2dp) from strings of the form:</p>\n\n<pre><code>'1000 - 2000' , '1000 -', '1000.4'\n</code></pre>\n\n<p>I have struggled to find a regex pattern that would allow me to extract all numbers from the strings into a separate list, and would appreciate any help on this matter.</p>\n\n<p>For example, </p>\n\n<pre><code>import re\n\npattern = '^\\d*[.,]?\\d*$'\ntemp = ['1000.5 - 2000.55']\nstrings = re.findall('^\\d*[.,]?\\d*$', temp[0])\n</code></pre>\n\n<p>The output I get is an empty list , []</p>\n\n<p>I would like to obtain</p>\n\n<pre><code>strings = ['1000.5','2000.55']\n</code></pre>\n\n<p>and then would like to convert them to floats with</p>\n\n<pre><code>nums = [float(i) for i in strings]\n</code></pre>\n"}, {"tags": ["python", "macos", "pip", "easy-install"], "comments": [{"owner": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "edited": false, "score": 2, "creation_date": 1514400908, "post_id": 47997164, "comment_id": 82962629, "body": "<code>sudo</code> and <code>pip</code> in the same command seem like a bad idea on OSX. I&#39;d rather keep the system-provided Python completely under the OS updater control, and would do <i>any</i> development and pip-based installation in a <code>virtualenv</code> and/or on a brew-installed Python."}, {"owner": {"reputation": 17958, "user_id": 1971013, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EtqFE.jpg?s=128&g=1", "display_name": "meaning-matters", "link": "https://stackoverflow.com/users/1971013/meaning-matters"}, "reply_to_user": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "edited": false, "score": 0, "creation_date": 1514401173, "post_id": 47997164, "comment_id": 82962728, "body": "@9000 Thanks for the advice. I&#39;m new to Python. I did install brew during my attempts. How do I keep things under brew?"}, {"owner": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "edited": false, "score": 1, "creation_date": 1514404224, "post_id": 47997164, "comment_id": 82963945, "body": "Just use <code>pip install</code> instead of <code>sudo pip install</code>. When in doubt, use <code>&#47;usr&#47;bin&#47;pip</code>. Better yet, <code>brew install virtualenv</code>, <a href=\"https://virtualenv.pypa.io/en/stable/userguide/\" rel=\"nofollow noreferrer\">create a separate environment</a> for each project, and install project-specific dependencies. This way projects never conflict with each other."}], "answers": [{"comments": [{"owner": {"reputation": 257, "user_id": 5236389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/365efc5b56a5f7f9d83bb7dbd86cd452?s=128&d=identicon&r=PG&f=1", "display_name": "Maxim", "link": "https://stackoverflow.com/users/5236389/maxim"}, "edited": false, "score": 2, "creation_date": 1536781324, "post_id": 47997410, "comment_id": 91552574, "body": "Tried that, but pip is still missing"}, {"owner": {"reputation": 11755, "user_id": 608991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/1L4iV.png?s=128&g=1", "display_name": "Tommie C.", "link": "https://stackoverflow.com/users/608991/tommie-c"}, "edited": false, "score": 1, "creation_date": 1563544967, "post_id": 47997410, "comment_id": 100746953, "body": "Just try pip3 instead of pip. You can also use an alias of pip3 to pip using bash."}], "tags": [], "owner": {"reputation": 113, "user_id": 9146530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ef9b5f904ba627115e6c17768e4ee13?s=128&d=identicon&r=PG&f=1", "display_name": "Donovan Jenkins", "link": "https://stackoverflow.com/users/9146530/donovan-jenkins"}, "is_accepted": false, "score": 6, "last_activity_date": 1604262815, "last_edit_date": 1604262815, "creation_date": 1514401786, "answer_id": 47997410, "question_id": 47997164, "link": "https://stackoverflow.com/questions/47997164/installing-pip-on-macos-does-not-work-anymore/47997410#47997410", "title": "Installing pip on macOS does not work (anymore)", "body": "<p>Use brew for Macs</p>\n<p><code>brew install python</code></p>\n<p>this will come with pip and both python2 and python3</p>\n<p>instructions to bypass 2 python versions (if you want) are at <a href=\"https://pip.readthedocs.io/en/stable/installing/\" rel=\"nofollow noreferrer\">https://pip.readthedocs.io/en/stable/installing/</a></p>\n<p>otherwise, it'll just be &quot;python3 &lt;'program'&gt;&quot;</p>\n<p>Here's how to install brew:\n<a href=\"https://www.howtogeek.com/211541/homebrew-for-os-x-easily-installs-desktop-apps-and-terminal-utilities/\" rel=\"nofollow noreferrer\">https://www.howtogeek.com/211541/homebrew-for-os-x-easily-installs-desktop-apps-and-terminal-utilities/</a></p>\n"}, {"comments": [{"owner": {"reputation": 843, "user_id": 6825288, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TjgqO.jpg?s=128&g=1", "display_name": "Ganesh M S", "link": "https://stackoverflow.com/users/6825288/ganesh-m-s"}, "edited": false, "score": 0, "creation_date": 1569456142, "post_id": 52730642, "comment_id": 102606206, "body": "Even pip3 has the same issue."}], "tags": [], "owner": {"reputation": 160, "user_id": 2097736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6492fb03c0daafa23b14ddf5c7d6ec78?s=128&d=identicon&r=PG", "display_name": "Phillip Havea", "link": "https://stackoverflow.com/users/2097736/phillip-havea"}, "is_accepted": false, "score": 10, "last_activity_date": 1539128096, "creation_date": 1539128096, "answer_id": 52730642, "question_id": 47997164, "link": "https://stackoverflow.com/questions/47997164/installing-pip-on-macos-does-not-work-anymore/52730642#52730642", "title": "Installing pip on macOS does not work (anymore)", "body": "<p>You might have pip3 instead. Use it to upgrade pip.</p>\n\n<pre><code>pip3 install --upgrade pip\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2099, "user_id": 3120481, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dd4a04185761aa93182b501f6226e6d8?s=128&d=identicon&r=PG&f=1", "display_name": "akshaynagpal", "link": "https://stackoverflow.com/users/3120481/akshaynagpal"}, "is_accepted": false, "score": 1, "last_activity_date": 1553708888, "creation_date": 1553708888, "answer_id": 55383585, "question_id": 47997164, "link": "https://stackoverflow.com/questions/47997164/installing-pip-on-macos-does-not-work-anymore/55383585#55383585", "title": "Installing pip on macOS does not work (anymore)", "body": "<p>easy_install has been deprecated. Use below commands instead.</p>\n\n<ol>\n<li><p><code>curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py</code></p></li>\n<li><p><code>python get-pip.py</code></p></li>\n</ol>\n\n<p><a href=\"https://pip.pypa.io/en/stable/installing/#installing-with-get-pip-py\" rel=\"nofollow noreferrer\">Source</a></p>\n"}], "owner": {"reputation": 17958, "user_id": 1971013, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EtqFE.jpg?s=128&g=1", "display_name": "meaning-matters", "link": "https://stackoverflow.com/users/1971013/meaning-matters"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17779, "favorite_count": 2, "answer_count": 3, "score": 11, "last_activity_date": 1604262815, "creation_date": 1514400298, "question_id": 47997164, "link": "https://stackoverflow.com/questions/47997164/installing-pip-on-macos-does-not-work-anymore", "title": "Installing pip on macOS does not work (anymore)", "body": "<p>I followed online instructions on how to install <code>pip</code> on macOS (for example <a href=\"https://ahmadawais.com/install-pip-macos-os-x-python/\" rel=\"noreferrer\">this</a>, <a href=\"http://softwaretester.info/install-and-upgrade-pip-on-mac-os-x/\" rel=\"noreferrer\">this</a>, and <a href=\"https://stackoverflow.com/a/39256229/1971013\">this</a>).</p>\n\n<p>I all seems to simple, but it's not working for me.</p>\n\n<p>My <code>python --version</code> is 2.7.10.</p>\n\n<p>When I run <code>sudo easy_install pip</code> I get:</p>\n\n<pre><code>$ sudo easy_install pip\nPassword:\nSearching for pip\nReading http://pypi.python.org/simple/pip/\nCouldn't find index page for 'pip' (maybe misspelled?)\nScanning index of all packages (this may take a while)\nReading http://pypi.python.org/simple/\nNo local packages or download links found for pip\nerror: Could not find suitable distribution for Requirement.parse('pip')\n</code></pre>\n\n<p>Any idea how I can fix or work around this?</p>\n"}]