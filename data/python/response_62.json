[{"tags": ["python", "matlab", "matplotlib"], "answers": [{"comments": [{"owner": {"reputation": 331, "user_id": 3894471, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/74cfc206b72d3589475d9fceeb8c39bb?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/3894471/john"}, "edited": false, "score": 0, "creation_date": 1458179273, "post_id": 36049495, "comment_id": 59748781, "body": "Thanks for the information but xdata and ydata have to do something more than just changing the &#39;axes&#39; of the image (I think) as the image that I get from python with or without extent is the same as the image I get from MatLab when NOT using xdata, ydata, but with extend in Python, I don&#39;t get the same image as MatLab. I verified all the variables I&#39;m using in Python are the same as those in MatLab. I don&#39;t want to bother too much but do you have any other ideas?"}, {"owner": {"reputation": 4807, "user_id": 1893154, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KvEaT.jpg?s=128&g=1", "display_name": "zeeMonkeez", "link": "https://stackoverflow.com/users/1893154/zeemonkeez"}, "reply_to_user": {"reputation": 331, "user_id": 3894471, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/74cfc206b72d3589475d9fceeb8c39bb?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/3894471/john"}, "edited": false, "score": 0, "creation_date": 1458180067, "post_id": 36049495, "comment_id": 59748973, "body": "@John I fixed my typo (minus in wrong place). If that does not fix it for you, can you edit your post to show actual data, and results? (it seems to produce the same result with <code>extent</code> and <code>XData</code>/<code>YData</code> here, except <code>imshow</code> makes <code>axes</code> invisible and pyplot doesn&#39;t)"}, {"owner": {"reputation": 331, "user_id": 3894471, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/74cfc206b72d3589475d9fceeb8c39bb?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/3894471/john"}, "edited": false, "score": 0, "creation_date": 1458180590, "post_id": 36049495, "comment_id": 59749138, "body": "I saw the issue with the signs and fixed that. I edited the main post with code and output."}, {"owner": {"reputation": 4807, "user_id": 1893154, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KvEaT.jpg?s=128&g=1", "display_name": "zeeMonkeez", "link": "https://stackoverflow.com/users/1893154/zeemonkeez"}, "reply_to_user": {"reputation": 331, "user_id": 3894471, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/74cfc206b72d3589475d9fceeb8c39bb?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/3894471/john"}, "edited": false, "score": 0, "creation_date": 1458181755, "post_id": 36049495, "comment_id": 59749504, "body": "@John OK, your MATLAB code has a call to <code>axis([-2,2,-2,2]*1000);</code>, which sets the visible x and y ranges. The equivalent in <code>pyplot</code> is <code>plt.xlim(-2000, 2000)</code>, <code>plt.ylim(-2000, 2000)</code>. Then the color ranges are different. try setting <code>vmax=81252.72</code>."}, {"owner": {"reputation": 331, "user_id": 3894471, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/74cfc206b72d3589475d9fceeb8c39bb?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/3894471/john"}, "edited": false, "score": 0, "creation_date": 1458181891, "post_id": 36049495, "comment_id": 59749538, "body": "You&#39;re literally my hero! Thanks!!"}], "tags": [], "owner": {"reputation": 4807, "user_id": 1893154, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KvEaT.jpg?s=128&g=1", "display_name": "zeeMonkeez", "link": "https://stackoverflow.com/users/1893154/zeemonkeez"}, "is_accepted": true, "score": 2, "last_activity_date": 1458179948, "last_edit_date": 1458179948, "creation_date": 1458174292, "answer_id": 36049495, "question_id": 36049222, "link": "https://stackoverflow.com/questions/36049222/how-to-use-xdata-in-imshow-from-matlab-in-python3-imshow/36049495#36049495", "title": "How to use &#39;xdata&#39; in imshow() from MatLab in Python3 imshow()", "body": "<p><a href=\"http://www.mathworks.com/help/images/ref/imshow.html#input_argument_namevalue_xdata\" rel=\"nofollow\"><code>XData</code> for <code>imshow</code> in MATLAB</a> sets the </p>\n\n<blockquote>\n  <p>Limits along X axis of a nondefault spatial coordinate system, specified as a two-element vector</p>\n</blockquote>\n\n<p>(similar for <code>YData</code> and the y axis). For <a href=\"http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.imshow\" rel=\"nofollow\"><code>matplotlib.pyplot.imshow</code>, the <code>extent</code> parameter</a> seems to have the same effect:</p>\n\n<blockquote>\n  <p><strong>extent</strong> : scalars (left, right, bottom, top), optional, default: <code>None</code></p>\n  \n  <p>The location, in data-coordinates, of the lower-left and upper-right corners. If <code>None</code>, the image is positioned such that the pixel centers fall on zero-based (row, column) indices.</p>\n</blockquote>\n\n<p>Hence the equivalent call would be</p>\n\n<pre><code>matplotlib.pyplot.imshow(np.sqrt(np.real(I)), vmin = 0, vmax = 100, extent=(-a, a, -a, a))\n</code></pre>\n"}], "owner": {"reputation": 331, "user_id": 3894471, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/74cfc206b72d3589475d9fceeb8c39bb?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/3894471/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 710, "favorite_count": 0, "accepted_answer_id": 36049495, "answer_count": 1, "score": 2, "last_activity_date": 1458180954, "creation_date": 1458172622, "last_edit_date": 1458180954, "question_id": 36049222, "link": "https://stackoverflow.com/questions/36049222/how-to-use-xdata-in-imshow-from-matlab-in-python3-imshow", "title": "How to use &#39;xdata&#39; in imshow() from MatLab in Python3 imshow()", "body": "<p>I'm trying to convert some MatLab code to Python3 but am having trouble with one line, the line in MatLab is</p>\n\n<pre><code>imshow(sqrt(I),[0,100],'InitialMagnification','fit','xdata',[-1,1]*a,'ydata',[-1,1]*a);\n</code></pre>\n\n<p>Where <code>a</code> is some constant.</p>\n\n<p>The problems I'm having are with <code>'XData'</code> and <code>'YData'</code>. I'm currently using the Python code</p>\n\n<pre><code>matplotlib.pyplot.imshow(np.sqrt(np.real(I)), vmin = 0, vmax = 100)\n</code></pre>\n\n<p>How do I convert the <code>'XData'</code> and <code>'YData'</code> elements into Python?</p>\n\n<p>EDIT Full Code for Python and MatLab</p>\n\n<p>Python code:</p>\n\n<p>(I'm sooo sorry, but I haven't commented this code yet, I can do so if needed)</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\nplt.close(\"all\")\n\nl = 633*10**(-6)\nL = 10\n\nN = 2**11\nNx = 2**11\nNy = 2**11\n\nxmax = 5*10**(-4)\nymax = 5*10**(-4)\ncurlyv = np.zeros((Nx,Ny),dtype=np.double)\nx = np.tile(np.linspace(-xmax,xmax,Nx),(Ny,1))\ny = np.tile(np.linspace(-ymax,ymax,Ny).reshape(Ny,1),(1,Nx))\nh = np.sqrt(4*np.pi/(l*L))\n\nnp_x = np.array(x)\nnp_y = np.array(y)\n\naperture = np.sqrt(np_x**2 + np_y**2) &gt;= 100*10**-6\n\ncurlyv[aperture] = 1    \n\nvprime = np.fft.fftshift(np.fft.fft2(curlyv))\nI = vprime*np.conj(vprime)\nImax = np.real(np.amax(I))\nfig2 = plt.figure()\nImax_b = Imax/5000\npltp = plt.imshow(np.sqrt(np.real(I)), vmin = 0, vmax = 100, cmap='Greys_r', extent=(-Nx/h*1000, Nx/h*1000, -Ny/h*1000, Ny/h*1000))\n\nplt.show()\n</code></pre>\n\n<p>Python image: </p>\n\n<p><a href=\"https://i.stack.imgur.com/ZE0L2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZE0L2.png\" alt=\"Python Image\"></a></p>\n\n<p>MatLab Code</p>\n\n<pre><code>% This script calculates, via a 2D Fourier Transform, the Fraunhofer diffraction\n% pattern due to a circular aperture. Source plane is the xy-plane. The field plane\n% is at a distance L from the source plane.\n\nlambda = 633e-6; L = 10;                     % meters\n\n% Set up the source plane domain and initialize the source plane amplitude (curlyv) at each point\nN=2^11; Nx = N; Ny = N;                         % resolution (pixels)\nxmax=5e-4;                                  % meters\nymax=5e-4;                                  % meters\ncurlyv = zeros(Nx,Ny);                      % curlyv has one complex value at each location (x,y)\nx=repmat(linspace(-xmax,xmax,Nx),Ny,1);     % x domain (source plane)\ny=repmat(linspace(-ymax,ymax,Ny)',1,Nx);    % y domain (source plane)\nh = sqrt(4*pi/(lambda*L));                  % axes scaling (from the theory)\n\n% construct a logical vector corresponding to the (x,y)-locations where the incident field is\n% non-zero. Only need to set these elements of curlyv so some non-zero values\n% corresponding to the incident field's complex amplitude.\n\naperture = sqrt(x.^2+y.^2) &gt;= 100e-6;       % logical vector giving aperture shape\n% The incident field ampli0tude u(x,y) is just 1 everywhere in the aperture. The additional\n% exponential corresponding to the phase in curlyv is formally required from the theory but can be omitted to a good\n% approximation in most cases.\ncurlyv(aperture)=1;                         %exp(1i*h^2*(x(aperture).^2+y(aperture).^2));\n\nfigure(1);\niptsetpref('ImShowAxesVisible','On');\nimshow(curlyv,[-0.5 1],'InitialMagnification','fit',...\n    'xdata',[-xmax, xmax]*1000,'ydata',[-ymax,ymax]*1000); % display the diffraction pattern\nvprime = fftshift(fft2(curlyv,Nx,Nx));      % perform the 2D FT to get the field plane field amplitude\nI = conj(vprime).*vprime;                   % calculate intensity\nxlabel('mm'); ylabel('mm');\n\nfigure(2);\nImax=max(max(I));\niptsetpref('ImShowAxesVisible','On');\nimshow(sqrt(I),[0,sqrt(Imax)/50],'InitialMagnification','fit','xdata',[-1,1]*Nx/h*1000,'ydata',[-1,1]*Ny/h*1000); % display the diffraction pattern\n\ncolormap(bone); shg;  shading interp;\naxis([-2,2,-2,2]*1000);       % 0 =  black, Imax/10 = white (so many pixels will be saturated)\nxlabel('mm'); ylabel('mm');\n</code></pre>\n\n<p>MatLab Image (what the images should look like)</p>\n\n<p><a href=\"https://i.stack.imgur.com/2JCQY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2JCQY.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "string", "split"], "comments": [{"owner": {"reputation": 3966, "user_id": 469072, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/13ce453eb105a974aea64b2461cfc200?s=128&d=identicon&r=PG", "display_name": "joel goldstick", "link": "https://stackoverflow.com/users/469072/joel-goldstick"}, "edited": false, "score": 0, "creation_date": 1458172858, "post_id": 36049184, "comment_id": 59746877, "body": "show the traceback -- cut and paste it into your question along with what you typed for input"}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1458175496, "post_id": 36049184, "comment_id": 59747614, "body": "If one of the answers below fixes your issue, you should accept it (click the check mark next to the appropriate answer). That does two things. It lets everyone know your issue has been resolved to your satisfaction, and it gives the person that helps you credit for the assist. <a href=\"http://meta.stackexchange.com/a/5235\">See here</a> for a full explanation."}], "answers": [{"comments": [{"owner": {"reputation": 2623, "user_id": 3697163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/611ce881510094605af96f479d2c0472?s=128&d=identicon&r=PG&f=1", "display_name": "DaveBensonPhillips", "link": "https://stackoverflow.com/users/3697163/davebensonphillips"}, "edited": false, "score": 0, "creation_date": 1458172872, "post_id": 36049212, "comment_id": 59746882, "body": "Won&#39;t this leave a few stray commas around inside <code>xname</code>?"}, {"owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "reply_to_user": {"reputation": 2623, "user_id": 3697163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/611ce881510094605af96f479d2c0472?s=128&d=identicon&r=PG&f=1", "display_name": "DaveBensonPhillips", "link": "https://stackoverflow.com/users/3697163/davebensonphillips"}, "edited": false, "score": 0, "creation_date": 1458172931, "post_id": 36049212, "comment_id": 59746904, "body": "@HumphreyTriscuit: I&#39;m not sure what you mean, but your comment pointed me to something I did wrong.  Thanks."}, {"owner": {"reputation": 2623, "user_id": 3697163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/611ce881510094605af96f479d2c0472?s=128&d=identicon&r=PG&f=1", "display_name": "DaveBensonPhillips", "link": "https://stackoverflow.com/users/3697163/davebensonphillips"}, "edited": false, "score": 0, "creation_date": 1458173059, "post_id": 36049212, "comment_id": 59746945, "body": "I was referring to the fact that you had commas inside the name strings, but you&#39;ve fixed it now."}, {"owner": {"reputation": 2623, "user_id": 3697163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/611ce881510094605af96f479d2c0472?s=128&d=identicon&r=PG&f=1", "display_name": "DaveBensonPhillips", "link": "https://stackoverflow.com/users/3697163/davebensonphillips"}, "edited": false, "score": 0, "creation_date": 1458173210, "post_id": 36049212, "comment_id": 59746996, "body": "this still has a few stray spaces floating around though. When printing you have two spaces between first and last name, as well as a space before the first name"}, {"owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "reply_to_user": {"reputation": 2623, "user_id": 3697163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/611ce881510094605af96f479d2c0472?s=128&d=identicon&r=PG&f=1", "display_name": "DaveBensonPhillips", "link": "https://stackoverflow.com/users/3697163/davebensonphillips"}, "edited": false, "score": 0, "creation_date": 1458173356, "post_id": 36049212, "comment_id": 59747030, "body": "@HumphreyTriscuit: I&#39;m not sure where you get that.  I have just tested it, and besides the fact that I left out one close parenthesis, it worked just fine."}, {"owner": {"reputation": 2623, "user_id": 3697163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/611ce881510094605af96f479d2c0472?s=128&d=identicon&r=PG&f=1", "display_name": "DaveBensonPhillips", "link": "https://stackoverflow.com/users/3697163/davebensonphillips"}, "edited": false, "score": 0, "creation_date": 1458173489, "post_id": 36049212, "comment_id": 59747069, "body": "Each line looks like <code>&quot; Katherine  St. John&quot;</code>. Can&#39;t you see the extra whitespace before and between the names?"}, {"owner": {"reputation": 2623, "user_id": 3697163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/611ce881510094605af96f479d2c0472?s=128&d=identicon&r=PG&f=1", "display_name": "DaveBensonPhillips", "link": "https://stackoverflow.com/users/3697163/davebensonphillips"}, "edited": false, "score": 0, "creation_date": 1458173625, "post_id": 36049212, "comment_id": 59747112, "body": "Unless you&#39;re using your own test input that&#39;s different to the OP&#39;s that is"}], "tags": [], "owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "is_accepted": false, "score": 0, "last_activity_date": 1458173779, "last_edit_date": 1458173779, "creation_date": 1458172533, "answer_id": 36049212, "question_id": 36049184, "link": "https://stackoverflow.com/questions/36049184/splitting-a-string-of-names/36049212#36049212", "title": "Splitting a string of names", "body": "<p>You are splitting the whole list instead of each string.  Change it to this:</p>\n\n<pre><code>def main():\n\n    names=input(\"Please enter your list of names: \")\n    person=names.split(\"; \")\n    xname=[x.split(\", \") for x in person]\n</code></pre>\n\n<p>To print it out, do this:</p>\n\n<pre><code>print(\"\\n\".join([\" \".join(x[::-1]) for x in xname]))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3501, "user_id": 3124409, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/5922e9a9b3b7aef6002860ed4515b57d?s=128&d=identicon&r=PG&f=1", "display_name": "Goodies", "link": "https://stackoverflow.com/users/3124409/goodies"}, "edited": false, "score": 0, "creation_date": 1458173198, "post_id": 36049219, "comment_id": 59746991, "body": "There is a space in at least one of the names."}, {"owner": {"reputation": 2623, "user_id": 3697163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/611ce881510094605af96f479d2c0472?s=128&d=identicon&r=PG&f=1", "display_name": "DaveBensonPhillips", "link": "https://stackoverflow.com/users/3697163/davebensonphillips"}, "reply_to_user": {"reputation": 3501, "user_id": 3124409, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/5922e9a9b3b7aef6002860ed4515b57d?s=128&d=identicon&r=PG&f=1", "display_name": "Goodies", "link": "https://stackoverflow.com/users/3124409/goodies"}, "edited": false, "score": 0, "creation_date": 1458173292, "post_id": 36049219, "comment_id": 59747013, "body": "@Goodies why does that matter?"}, {"owner": {"reputation": 2623, "user_id": 3697163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/611ce881510094605af96f479d2c0472?s=128&d=identicon&r=PG&f=1", "display_name": "DaveBensonPhillips", "link": "https://stackoverflow.com/users/3697163/davebensonphillips"}, "reply_to_user": {"reputation": 3501, "user_id": 3124409, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/5922e9a9b3b7aef6002860ed4515b57d?s=128&d=identicon&r=PG&f=1", "display_name": "Goodies", "link": "https://stackoverflow.com/users/3124409/goodies"}, "edited": false, "score": 0, "creation_date": 1458173390, "post_id": 36049219, "comment_id": 59747039, "body": "@Goodies No problem :)!"}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1458175052, "post_id": 36049219, "comment_id": 59747483, "body": "FWIW, my first attempt also used <code>&#39;; &#39;</code> and <code>&#39;, &#39;</code>, but I figured it&#39;s better not to make assumptions about how much white space surrounds those separators."}], "tags": [], "owner": {"reputation": 2623, "user_id": 3697163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/611ce881510094605af96f479d2c0472?s=128&d=identicon&r=PG&f=1", "display_name": "DaveBensonPhillips", "link": "https://stackoverflow.com/users/3697163/davebensonphillips"}, "is_accepted": false, "score": 1, "last_activity_date": 1458173321, "last_edit_date": 1458173321, "creation_date": 1458172586, "answer_id": 36049219, "question_id": 36049184, "link": "https://stackoverflow.com/questions/36049184/splitting-a-string-of-names/36049219#36049219", "title": "Splitting a string of names", "body": "<p><code>.split</code> returns a list, so you are attempting</p>\n\n<pre><code> [\"Falcon, Claudio\", \"Ford, Eric\" ...].split(',')\n</code></pre>\n\n<p>Which obviously doesn't work, as <code>split</code> is a string method. Try this:</p>\n\n<pre><code>full_names = []\nfor name in names.split(\"; \"):\n    last, first = name.split(', ')\n    full_names.append(first + \" \" + last)\n</code></pre>\n\n<p>To give you</p>\n\n<pre><code>['Claudio Falcon', 'Eric Ford', 'Megan Owen', 'Josh Rogers', 'Katherine St. John']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "is_accepted": true, "score": 1, "last_activity_date": 1458173819, "creation_date": 1458173819, "answer_id": 36049431, "question_id": 36049184, "link": "https://stackoverflow.com/questions/36049184/splitting-a-string-of-names/36049431#36049431", "title": "Splitting a string of names", "body": "<p><code>.split</code> is a string method that returns a list of strings. So it works fine on splitting the original string of names, but you can't call it on the resulting list (<code>list</code> doesn't have a <code>.split</code> method, and that really wouldn't make sense). So you need to call <code>.split</code> on each of the strings in the list. And to be neat, you should clean up any leading or trailing spaces on the names. Like this:</p>\n\n<pre><code>names = \"Falcon, Claudio; Ford, Eric; Owen, Megan; Rogers, Josh; St. John, Katherine\"\nfor name in names.split(';'):\n    last, first = name.split(',')\n    print(first.strip(), last.strip())\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>Claudio Falcon\nEric Ford\nMegan Owen\nJosh Rogers\nKatherine St. John\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 352, "user_id": 6005668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/056d985175b5a16316a150bf210ff378?s=128&d=identicon&r=PG&f=1", "display_name": "aroy", "link": "https://stackoverflow.com/users/6005668/aroy"}, "is_accepted": false, "score": 0, "last_activity_date": 1458175165, "last_edit_date": 1458175165, "creation_date": 1458174794, "answer_id": 36049564, "question_id": 36049184, "link": "https://stackoverflow.com/questions/36049184/splitting-a-string-of-names/36049564#36049564", "title": "Splitting a string of names", "body": "<p>You can use the following code: </p>\n\n<pre><code>   names = raw_input(\"Please enter your list of names:\")\n    data = names.split(\";\")\n</code></pre>\n\n<p>data will return you list so process that list to get first name and last name</p>\n\n<pre><code>    f_names=[]\n    for i in data:\n        l_name,f_name= i.split(\",\")\n        f_names.append(f_name+\" \"+l_name)\n    print \"you entered \\n\"+ '\\n'.join(p for p in f_names) \n</code></pre>\n\n<p>So this way you can print desired input</p>\n"}], "owner": {"reputation": 13, "user_id": 6074302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf989741ed163cbb9a1ee3899c53057?s=128&d=identicon&r=PG&f=1", "display_name": "t.joseph", "link": "https://stackoverflow.com/users/6074302/t-joseph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 36049431, "answer_count": 4, "score": 1, "last_activity_date": 1458175165, "creation_date": 1458172356, "last_edit_date": 1458174126, "question_id": 36049184, "link": "https://stackoverflow.com/questions/36049184/splitting-a-string-of-names", "title": "Splitting a string of names", "body": "<p>I'm trying to write a program that will ask a user to input several names, separated by a semi-colon. The names would be entered as lastname,firstname. The program would then print each name in a firstname lastname format on separate lines. So far, my program is:</p>\n\n<pre><code>def main():\n\n    names=input(\"Please enter your list of names: \")\n    person=names.split(\";\")\n    xname=person.split(\",\")\n</code></pre>\n\n<p>This is as far as I got,because there's an error when I try to split on the comma. What am I doing wrong? The output should look like this:</p>\n\n<pre><code>Please enter your list of names:  Falcon, Claudio; Ford, Eric; Owen, Megan; Rogers, Josh; St. John, Katherine\n\nYou entered:\n\nClaudio Falcon\n\nEric Ford\n\nMegan Owen\n\nJosh Rogers\n\nKatherine St. John\n</code></pre>\n"}, {"tags": ["python", "c", "subprocess"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1458172242, "post_id": 36049149, "comment_id": 59746659, "body": "You invoked <i>undefined behavior</i> by using value of uninitialized variable having automatic storage duration <code>p[0]</code>, which is indeterminate."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1458172359, "post_id": 36049149, "comment_id": 59746690, "body": "Before asking how to run a program in Python, you should make sure the program runs correctly from the console."}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1458172385, "post_id": 36049149, "comment_id": 59746706, "body": "You failed to check the return value of <code>scanf()</code>. I believe that it is returning <code>EOF</code>."}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1458172521, "post_id": 36049149, "comment_id": 59746757, "body": "Aside: One should avoid <code>void main(void)</code>. <a href=\"http://stackoverflow.com/a/204483/8747\">stackoverflow.com/a/204483/8747</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1458172538, "post_id": 36049149, "comment_id": 59746764, "body": "@Rob\u1d69: As <code>p[0] is encountered first, there is no use in meditating if </code>scanf` updates <code>p</code>. Once you encounter undefined behaviour, all bets are off."}, {"owner": {"reputation": 146, "user_id": 2127595, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a559fc8f92ee3fae1883e0937b7f2545?s=128&d=identicon&r=PG", "display_name": "user2127595", "link": "https://stackoverflow.com/users/2127595/user2127595"}, "reply_to_user": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1458172767, "post_id": 36049149, "comment_id": 59746846, "body": "Runs fine from the command line and using <code>subprocess.run(&quot;test.exe&quot;)</code> and entering a sequence like hi, bye, q. @Rob, you think characters are being sent other than what are listed as the input in the call to <code>communicate</code>?"}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1458172929, "post_id": 36049149, "comment_id": 59746902, "body": "No, I think the stream is being closed after the first four characters are sent. The subsequent <code>scanf()</code> calls return EOF and the process never exits."}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1458173070, "post_id": 36049149, "comment_id": 59746950, "body": "@Olaf - you are correct in your &quot;all bets are off&quot; assertion. I still claim it is worth contemplating what happens <i>after</i> he fixes that problem."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1458173183, "post_id": 36049149, "comment_id": 59746982, "body": "@Rob\u1d69: Yes, that is the next issue to be addressed."}, {"owner": {"reputation": 146, "user_id": 2127595, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a559fc8f92ee3fae1883e0937b7f2545?s=128&d=identicon&r=PG", "display_name": "user2127595", "link": "https://stackoverflow.com/users/2127595/user2127595"}, "reply_to_user": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1458176670, "post_id": 36049149, "comment_id": 59747945, "body": "@Rob\u1d69 My question is answered by using <code>ris.stdin.write</code>, but I am still curious about why checking for <code>EOF</code> doesn&#39;t seem to prevent the loop when `com = ris.communicate(&#39;bye\\n&#39;)&#39; is called."}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1458179381, "post_id": 36049149, "comment_id": 59748803, "body": "You&#39;re not checking correctly. Re-read the doc for <a href=\"http://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow noreferrer\"><code>scanf</code></a> and <a href=\"http://en.cppreference.com/w/c/io/fgets\" rel=\"nofollow noreferrer\"><code>fgets</code></a>. In neither your original program nor your edited program do you check the return value of either of those calls."}], "answers": [{"comments": [{"owner": {"reputation": 146, "user_id": 2127595, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a559fc8f92ee3fae1883e0937b7f2545?s=128&d=identicon&r=PG", "display_name": "user2127595", "link": "https://stackoverflow.com/users/2127595/user2127595"}, "edited": false, "score": 0, "creation_date": 1458173187, "post_id": 36049295, "comment_id": 59746984, "body": "I would rather not use communicate. <code>ris.stdin.write()</code> or somoething like this that can send a stream of input would be much preferable."}], "tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": true, "score": 2, "last_activity_date": 1458173300, "last_edit_date": 1458173300, "creation_date": 1458173012, "answer_id": 36049295, "question_id": 36049149, "link": "https://stackoverflow.com/questions/36049149/running-an-external-executable-in-python-interactively/36049295#36049295", "title": "Running an external executable in Python interactively", "body": "<p>In addition to the errors in your C program that have been mentioned, you are calling <code>.communicate()</code> more than once. <code>.communicate()</code> is single-use function that sends <em>all</em> of its data to the subprocess and waits for the subprocess to exit.</p>\n\n<p>If you must use <code>.communicate()</code>, use it this way:</p>\n\n<pre><code>com = ris.communicate(input='bye\\nq\\n')\n</code></pre>\n\n<p>Alternatively, you can use <code>ris.stdin.write()</code>, like so:</p>\n\n<pre><code>import subprocess\nfrom subprocess import PIPE, STDOUT\n\noutput = open(\"test.out\",\"w\")\nris = subprocess.Popen(executable=\"/tmp/test.exe\", args=\"\", stdin=PIPE,\n                       stdout=output, stderr=STDOUT,\n                       universal_newlines=True, shell=True)\ncom = ris.stdin.write('bye\\n')\ncom = ris.stdin.write('q\\n')\nris.stdin.flush()\noutput.close()\nris.wait()\n</code></pre>\n"}], "owner": {"reputation": 146, "user_id": 2127595, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a559fc8f92ee3fae1883e0937b7f2545?s=128&d=identicon&r=PG", "display_name": "user2127595", "link": "https://stackoverflow.com/users/2127595/user2127595"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 857, "favorite_count": 0, "accepted_answer_id": 36049295, "answer_count": 1, "score": -1, "last_activity_date": 1458187522, "creation_date": 1458172142, "last_edit_date": 1458187522, "question_id": 36049149, "link": "https://stackoverflow.com/questions/36049149/running-an-external-executable-in-python-interactively", "title": "Running an external executable in Python interactively", "body": "<p>A simple C program is compiled using <code>gcc test.c -o test.exe</code>:</p>\n\n<pre><code>        /* TEST.C */\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#define TRUE 1\n\nint main (void)\n{\n  char p[256];\n  strcpy(p, \"start\\0\");\n  printf(\"Welcome!\\n\");\n  while (TRUE)\n  {\n    printf(\"Input: \");\n    if (fgets(p, 255, stdin) == NULL)  break;\n    if (p[0] == 'q')                   break;\n    printf(\"You Entered: %s\\n\", p);\n  }\n  return 0;\n}\n</code></pre>\n\n<p>The subprocess module in Python portends to start a program and grab its <code>stdin</code> and <code>stdout</code>. Simple test using the above program:</p>\n\n<pre><code>import subprocess\nfrom subprocess import PIPE, STDOUT\n\noutput = open(\"test.out\",\"w\")\nris = subprocess.Popen(executable=\"test.exe\", args=\"\", stdin=PIPE,\n                       stdout=output, stderr=STDOUT,\n                       universal_newlines=True, shell=True)  \ncom = ris.communicate(input='bye\\n')\ncom = ris.communicate(input='q\\n')\noutput.close()\n</code></pre>\n\n<p>appears to loop infinitely on the first communicate command, filling <code>test.out</code> with:</p>\n\n<pre><code>Welcome!\nYou Entered: bye\nYou Entered: bye\nYou Entered: bye\nYou Entered: bye\n.\n.\n.\n</code></pre>\n\n<p>until the user interrupts the python process. Using <code>ris.stdin.write('bye\\n')</code> instead of <code>communicate</code> does not seem to send input at all even when followed by <code>ris.stdin.flush()</code>. </p>\n\n<p>What is the proper way to interactively run an executable with <code>subprocess</code>?  The intention is to leave a single instance of the program running in the background while multiple inputs are passed in through <code>stdin</code> and the corresponding outputs are read from <code>stdout</code> or <code>stderr</code></p>\n"}, {"tags": ["python", "wsdl", "pysimplesoap"], "answers": [{"comments": [{"owner": {"reputation": 475, "user_id": 1243786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HMRFH.jpg?s=128&g=1", "display_name": "Down the Stream", "link": "https://stackoverflow.com/users/1243786/down-the-stream"}, "edited": false, "score": 0, "creation_date": 1492008106, "post_id": 43372703, "comment_id": 73807421, "body": "From time to time we use pysimplesoap and plain old requests to consume WSDL based services.   We use base64 quite often."}], "tags": [], "owner": {"reputation": 475, "user_id": 1243786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HMRFH.jpg?s=128&g=1", "display_name": "Down the Stream", "link": "https://stackoverflow.com/users/1243786/down-the-stream"}, "is_accepted": false, "score": 0, "last_activity_date": 1492007957, "creation_date": 1492007957, "answer_id": 43372703, "question_id": 36049138, "link": "https://stackoverflow.com/questions/36049138/pysimplesoap-for-base64binary/43372703#43372703", "title": "pysimplesoap for base64Binary", "body": "<pre><code># Try something like this:\n# test_base64binary.py\n\nfrom base64 import b64decode, b64encode\n\narg1_prep = {'brunch': 'toast', 'lunch': 'BBQ', 'dinner': 'burger'}\n\narg1 = b64encode(str(arg1_prep))\nprint(arg1)\n\ndecoded_arg1 = b64decode(arg1)\nprint(decoded_arg1)\n</code></pre>\n"}], "owner": {"reputation": 423, "user_id": 1440186, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2f0805d983b8c0d1026be6adef819905?s=128&d=identicon&r=PG", "display_name": "antonio", "link": "https://stackoverflow.com/users/1440186/antonio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 226, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1492007957, "creation_date": 1458172085, "last_edit_date": 1458236595, "question_id": 36049138, "link": "https://stackoverflow.com/questions/36049138/pysimplesoap-for-base64binary", "title": "pysimplesoap for base64Binary", "body": "<p>This is my code:</p>\n\n<pre><code>from pysimplesoap.client import SoapClient,SimpleXMLElement\nclient = SoapClient(wsdl='urlToMyWsdl?wsdl')\nprint client.help(\"myMethod\")\nclient.myMethod(arg0='mystring', arg1='thisCauseMeError')\n</code></pre>\n\n<p>the help function prints:\n    myMethod(arg0=type 'str'>, arg1=*{}*)</p>\n\n<p>in myMethod at wsdl file, the variable arg1 is base64Binary. python expects a Ordered dictionary, but I dont know how to set it.  Any Ideas?</p>\n"}, {"tags": ["python", "multithreading", "multiprocessing", "python-multiprocessing", "urllib3"], "comments": [{"owner": {"reputation": 13985, "user_id": 187878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c355dd26a5f80e1605d2ff1ecb6e719e?s=128&d=identicon&r=PG", "display_name": "shazow", "link": "https://stackoverflow.com/users/187878/shazow"}, "edited": false, "score": 3, "creation_date": 1458172199, "post_id": 36049084, "comment_id": 59746649, "body": "I suspect the issue is that while a connection pool can be shard between threads, it cannot be shared between processes/subprocesses. You&#39;ll need to make a separate pool for each process, or use threads instead."}, {"owner": {"reputation": 1790, "user_id": 3624549, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/6d64dd9adf330105e883f79fd0e669ff?s=128&d=identicon&r=PG&f=1", "display_name": "Alg_D", "link": "https://stackoverflow.com/users/3624549/alg-d"}, "reply_to_user": {"reputation": 13985, "user_id": 187878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c355dd26a5f80e1605d2ff1ecb6e719e?s=128&d=identicon&r=PG", "display_name": "shazow", "link": "https://stackoverflow.com/users/187878/shazow"}, "edited": false, "score": 0, "creation_date": 1458172383, "post_id": 36049084, "comment_id": 59746703, "body": "Wow, I see. Many thanks"}], "owner": {"reputation": 1790, "user_id": 3624549, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/6d64dd9adf330105e883f79fd0e669ff?s=128&d=identicon&r=PG&f=1", "display_name": "Alg_D", "link": "https://stackoverflow.com/users/3624549/alg-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 682, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1458173346, "creation_date": 1458171802, "last_edit_date": 1458173346, "question_id": 36049084, "link": "https://stackoverflow.com/questions/36049084/python-multiprocessing-and-poolmanager-urllib3-error-cant-pickle-function", "title": "python - Multiprocessing and PoolManager: urllib3 Error: Can&#39;t pickle &lt;function PoolManager", "body": "<p>I was trying to create a small program that could use a couple of threads to run a process in a class/function.</p>\n\n<p>This Object has an instance of <code>urllib3.PoolManager(..)</code> and it seems to be a problem when launching the thread. See error after code.\nIt something hanging when the line <code>self.manager = urllib3.PoolManager(num_pools = 10)</code> that is to create an instance of PoolManager that will be used later on.</p>\n\n<p>What is the issue here and what am I missing?</p>\n\n<p><strong>Code</strong>:</p>\n\n<pre><code>import time\nimport random\nfrom multiprocessing import Process, Queue, current_process, freeze_support\nimport urllib3\n\nclass myObj:\n\n    def __init__(self):\n    #problem in line below\n#==== &gt; self.manager = urllib3.PoolManager(num_pools = 10)\n        x = 5 #something\n\n    def double_id(self, val):\n        return 2*val\n\n# Functions referenced by tasks\ndef callMyObj(obj):\n    myObj = obj[0]\n    rev_val = myObj.double_id(random.random())\n    return rev_val\n    #return obj.double_id\n\n#/////////////////////////////////////////////////////////////\n\n# Function run by worker processes\ndef worker(input, output):\n    for func, args in iter(input.get, 'STOP'):\n        result = func(args)\n        output.put(result)\n\n\n#/////////////////////////////////////////////////////////////\nif __name__ == '__main__':\n    freeze_support()\n\n    NUMBER_OF_PROCESSES = 4\n    TASKS1 = [(callMyObj, (myObj(), 'double_id')) for i in range(10)]\n\n    # Create queues\n    task_queue = Queue()\n    done_queue = Queue()\n\n    #-Submit tasks, Start worker processes, Get Unordered results\n    for task in TASKS1: task_queue.put(task)\n    for i in range(NUMBER_OF_PROCESSES):\n        Process(target=worker, args=(task_queue, done_queue)).start()\n    for i in range(len(TASKS1)):\n        print('&gt;&gt; done', done_queue.get())\n    for i in range(NUMBER_OF_PROCESSES): task_queue.put('STOP') #stop childs\n</code></pre>\n\n<p><strong>Error</strong>:</p>\n\n<blockquote>\n  <p>File \"/usr/lib/python3.4/multiprocessing/reduction.py\", line 50, in\n  dumps\n      cls(buf, protocol).dump(obj)\n  _pickle.PicklingError: Can't pickle . at 0x7f9752ae3840>: attribute\n  lookup  on urllib3.poolmanager failed</p>\n</blockquote>\n"}, {"tags": ["python", "mysql", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 863, "user_id": 2597415, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/194404f63e15ade6976ded4573640cb0?s=128&d=identicon&r=PG", "display_name": "user27976", "link": "https://stackoverflow.com/users/2597415/user27976"}, "edited": false, "score": 0, "creation_date": 1458251417, "post_id": 36050163, "comment_id": 59790738, "body": "Many thanks @bunji. Your explanation of what I wanted is perfect. I have run the code, but somehow it threw an error (KeyError: 0) at the last statement: Table1_mod = id_groups.apply(blue_filter). It looks like an indexing error."}, {"owner": {"reputation": 4306, "user_id": 5992438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07146d8ff0b15449d848f2a928e5417d?s=128&d=identicon&r=PG&f=1", "display_name": "bunji", "link": "https://stackoverflow.com/users/5992438/bunji"}, "reply_to_user": {"reputation": 863, "user_id": 2597415, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/194404f63e15ade6976ded4573640cb0?s=128&d=identicon&r=PG", "display_name": "user27976", "link": "https://stackoverflow.com/users/2597415/user27976"}, "edited": false, "score": 0, "creation_date": 1458258502, "post_id": 36050163, "comment_id": 59793442, "body": "@user27976 You&#39;re totally right. My code wasn&#39;t handling cases where &#39;Blue&#39; didn&#39;t occur in the group.  I&#39;ve updated it with try/except blocks.  I also fixed a syntax error and added a bit to reset your indices so that the output is as you specified."}], "tags": [], "owner": {"reputation": 4306, "user_id": 5992438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07146d8ff0b15449d848f2a928e5417d?s=128&d=identicon&r=PG&f=1", "display_name": "bunji", "link": "https://stackoverflow.com/users/5992438/bunji"}, "is_accepted": false, "score": 1, "last_activity_date": 1458258414, "last_edit_date": 1458258414, "creation_date": 1458178644, "answer_id": 36050163, "question_id": 36049080, "link": "https://stackoverflow.com/questions/36049080/deleting-a-row-based-values-of-of-a-column-using-pandas/36050163#36050163", "title": "Deleting a row based values of of a column using pandas", "body": "<p>Just to clarify: you want to look into groups of id numbers, find the first occurrence of 'Blue' in the Serial Numbers column, and remove any other rows in this group where the Serial Number is also Blue and the calls value is less than the calls value in the first 'Blue' row?  </p>\n\n<p>I would first group your dataframe by Id</p>\n\n<pre><code>id_groups = Table1.groupby('ID')\n</code></pre>\n\n<p>Then define a function to do your filtering:</p>\n\n<pre><code>def blue_filter(group):\n    blues = group[group['SerialNo'] == 'Blue']\n    try:\n        first_blue_call =  blues['calls'].iloc[0]\n    except:\n        return group\n    return group[(group['SerialNo'] != 'Blue') | (group['calls'] &gt;= first_blue_call)] \n</code></pre>\n\n<p>Now apply that function to your groups and reform the groups as a new dataframe and reset the indices</p>\n\n<pre><code>Table1_mod = id_groups.apply(blue_filter)\nTable1_mod.index =  Table1_mod.index.levels[1]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2897, "user_id": 4463240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5ff94a097ff4d1c08a4bc77c74c5798?s=128&d=identicon&r=PG&f=1", "display_name": "tvashtar", "link": "https://stackoverflow.com/users/4463240/tvashtar"}, "reply_to_user": {"reputation": 863, "user_id": 2597415, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/194404f63e15ade6976ded4573640cb0?s=128&d=identicon&r=PG", "display_name": "user27976", "link": "https://stackoverflow.com/users/2597415/user27976"}, "edited": false, "score": 0, "creation_date": 1458310606, "post_id": 36051513, "comment_id": 59817799, "body": "No problem. If you need to run it multiple times (or on multiple data frames) you will need to either reinitialize the dict to empty it out or wrap the dict and function in a closure, but that seemed overkill for your question."}], "tags": [], "owner": {"reputation": 2897, "user_id": 4463240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5ff94a097ff4d1c08a4bc77c74c5798?s=128&d=identicon&r=PG&f=1", "display_name": "tvashtar", "link": "https://stackoverflow.com/users/4463240/tvashtar"}, "is_accepted": true, "score": 1, "last_activity_date": 1458187771, "creation_date": 1458187771, "answer_id": 36051513, "question_id": 36049080, "link": "https://stackoverflow.com/questions/36049080/deleting-a-row-based-values-of-of-a-column-using-pandas/36051513#36051513", "title": "Deleting a row based values of of a column using pandas", "body": "<p>I think you can do this all in one go using apply and a separate dict that keeps track of your maximum value of calls. This also deals with the fact that I think you want to throw out any row where the call number is lower than any previous row for that ID, SerialNo combo. </p>\n\n<pre><code>max_dict = {}\n\ndef keep_row(row):\n    if row.calls &gt; max_dict.get((row.ID, row.SerialNo), 0):\n        max_dict[(row.ID, row.SerialNo)] = row.calls\n        return True\n    else:\n        return False\n\nTable1_mod = Table1[Table1.apply(keep_row, axis=1)]\n</code></pre>\n"}], "owner": {"reputation": 863, "user_id": 2597415, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/194404f63e15ade6976ded4573640cb0?s=128&d=identicon&r=PG", "display_name": "user27976", "link": "https://stackoverflow.com/users/2597415/user27976"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 36051513, "answer_count": 2, "score": 1, "last_activity_date": 1458258414, "creation_date": 1458171774, "question_id": 36049080, "link": "https://stackoverflow.com/questions/36049080/deleting-a-row-based-values-of-of-a-column-using-pandas", "title": "Deleting a row based values of of a column using pandas", "body": "<p>I'm new to pandas and need some help with deleting rows fulfilling certain conditions from my original table below.</p>\n\n<p>Table1 (original table):</p>\n\n<pre><code>    ID  SerialNo    calls\n1   171723  Blue    2\n2   171723  Green   3\n3   171723  Blue    4\n4   171723  Yellow  5\n5   171723  Blue    1\n6   171724  Green   1\n7   171724  Yellow  2\n8   171724  Green   3\n9   171724  Green   4\n10  171724  Green   5\n11  171724  Yellow  6\n</code></pre>\n\n<p>Table1_mod (filtered table):</p>\n\n<pre><code>    ID  SerialNo    calls\n 1  171723  Blue    2\n 2  171723  Green   3\n 3  171723  Blue    4\n 4  171723  Yellow  5\n 5  171724  Green   1\n 6  171724  Yellow  2\n 7  171724  Green   3\n 8  171724  Green   4\n 9  171724  Green   5\n10  171724  Yellow  6\n</code></pre>\n\n<p>I want to obtain the modified table based on the following:</p>\n\n<p>ID column contain unique numbers. For example, for all rows with '171723', and under column 'SerialNO' I'm interested in 'Blue'. So I want the last row of '171723' deleted because Blue (SerialNo column) has a row corresponding to '1' (calls column) which is smaller than than '2' (the first occurrence of Blue on Calls column for '171723')</p>\n\n<p>How can I write a pandas code to remove rows  fulfilling these conditions?</p>\n\n<p>Thanks </p>\n"}, {"tags": ["python", "multiprocessing", "race-condition"], "comments": [{"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1458172177, "post_id": 36049011, "comment_id": 59746637, "body": "What do your glob strings look like? There aren&#39;t any race conditions because <code>output_file</code> is generated from unique file names.... unless your glob is picking up other file types so that <code>replace(&#39;.txt&#39;,&#39;.csv&#39;)</code> doesn&#39;t change the name or there is already a <code>.csv</code> in the directory."}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1458172516, "post_id": 36049011, "comment_id": 59746754, "body": "Given the error string it is likely that your glob is rather promiscuous and picked up a subdirectory named <code>B:\\\\Hevercity UT</code>."}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1458174532, "post_id": 36049011, "comment_id": 59747362, "body": "Lets try this again. You likely have a directory called <code>&#39;B :\\\\Hebercity UT&#39;</code>, and you did <code>glob.glob(&#39;B:\\\\Hebercity UT&#39;)</code>. Care to give any feedback?"}, {"owner": {"reputation": 1618, "user_id": 1088821, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/UQJgz.jpg?s=128&g=1", "display_name": "notilas", "link": "https://stackoverflow.com/users/1088821/notilas"}, "reply_to_user": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1458191664, "post_id": 36049011, "comment_id": 59752243, "body": "Thanks for the good comments. I haven&#39;t tried your suggestions, but I believe that is not related to file name duplication. Because most of cases the code works in the second attempt after the fail, which means this happens irregularly. Actually, I have tried set(filenames) instead of filenames, which produce same result."}, {"owner": {"reputation": 1305, "user_id": 4141279, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/21b951b1b50da7ca328945b7798ee25a?s=128&d=identicon&r=PG&f=1", "display_name": "RaJa", "link": "https://stackoverflow.com/users/4141279/raja"}, "edited": false, "score": 0, "creation_date": 1458201423, "post_id": 36049011, "comment_id": 59756361, "body": "A race condition seems odd. Each filename in output_file should be unique. So there is no chance that the file already exists. Do you know which line causes the trouble? Moreover, you already catch errors at <code>gzip.open</code>, so you should not get any aborts at that line. What is the line <code>fout.write(line.replace(&#39;abc&#39;,&#39;def&#39;)</code> doing exaclty? Is <code>line</code> a string or a file or something?"}], "owner": {"reputation": 1618, "user_id": 1088821, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/UQJgz.jpg?s=128&g=1", "display_name": "notilas", "link": "https://stackoverflow.com/users/1088821/notilas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 565, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1464202499, "creation_date": 1458171372, "last_edit_date": 1464202499, "question_id": 36049011, "link": "https://stackoverflow.com/questions/36049011/python-multiprocessing-pool-collision-file-writing-due-to-process-race-conditi", "title": "Python multiprocessing Pool collision (file writing) due to process race-condition", "body": "<p>The objective of the code is to read sqlite3 file and process the text and write to another file (gzip format). I am trying to use multiprocessing with pool, but \nsometimes it generates errors and stop with error message \"Cannot create a file when that file already exists\". After the fail, if I repeat the same code, it works fine most of cases, which means this happens occasionally.  </p>\n\n<p>I guess this is related to race between processes in the pool, but cannot find a way to solve the problem. Normally it works nice, but sometimes it causes problem.</p>\n\n<p>Also, I tried to terminate all the process at each directory level, and start new processes in the next directory.</p>\n\n<p>P.S. Environment: Windows server 64bit, Python 2.7 64bit</p>\n\n<pre><code>import sqlite3 as lite\nimport gzip\nimport multiprocessing\n\ndef convert_txt((infile,outfile)):\n    try:\n        conn=lite.connect(infile)\n        conn.text_factory = str\n    except:\n        print 'Sql Lite error:', infile\n        return\n\n    try:\n        fout = gzip.open(outfile, 'wb')\n    except:\n        'File write error:', outfile\n        return \n\n    for line in conn.iterdump():\n        fout.write(line.replace('abc','def')\n\n    fout.close()\n\n\nfor directory in directory_list:\n    filenames=glob.glob('B:\\\\Hebercity UT\\\\*.txt')\n    p = multiprocessing.Pool(min(10,len(filenames)))\n    file_list=[]\n    for input_file in filenames:\n        output_file=input_file.replace('.txt','.csv')\n        file_list.append([input_file, output_file])\n    p.map(convert_txt, file_list)\n    time.sleep(1)\n    p.close()   # close the pool and start the pool in the next directory\n\n\n\nTraceback (most recent call last):\n  File \"B:\\gws_txt_converter_multi.py\", line 100, in &lt;module&gt;\n    p.map(convert_txt_msg, fflist)\n  File \"C:\\opt\\Anaconda\\lib\\multiprocessing\\pool.py\", line 251, in map\n    return self.map_async(func, iterable, chunksize).get()\n  File \"C:\\opt\\Anaconda\\lib\\multiprocessing\\pool.py\", line 558, in get\n    raise self._value\nWindowsError: [Error 183] Cannot create a file when that file already exists: 'B:\\\\Hebercity UT'\n</code></pre>\n"}, {"tags": ["python", "matrix", "indexing"], "answers": [{"tags": [], "owner": {"reputation": 6738, "user_id": 906693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba54c2f46f424128b4ba467eb8d0e138?s=128&d=identicon&r=PG", "display_name": "roadrunner66", "link": "https://stackoverflow.com/users/906693/roadrunner66"}, "is_accepted": true, "score": 0, "last_activity_date": 1458172053, "last_edit_date": 1458172053, "creation_date": 1458171239, "answer_id": 36048991, "question_id": 36048909, "link": "https://stackoverflow.com/questions/36048909/python-matrix-index-out-of-range/36048991#36048991", "title": "Python matrix index out of range", "body": "<p>No, you just let your index run from (1, imax) rather than (0,imax) for i and j to avoid the edges. </p>\n\n<p>If you are also interested in the things that surround your elements  indeces  in all directions, why not add up all neighbors like so (first change your matrix to 0s and 1s, matrix is named aa):</p>\n\n<pre><code>import numpy as np\nnum_neighbors=np.zeros_like(aa)\nfor i in range(1,imax-1):\n    for j in range(1,jmax-1):\n        num_neighbors[i,j]= np.sum(aa[i-1:i+2,j-1:j+2]) - aa[i,j]  \n        # you need to subtract the center , it's not a neighbor to self\n</code></pre>\n\n<p>to sum up the values of all neighbors. In your case 8 would mean surrounded by 1s (#s) and 0 being surrounded by 0s (' 's).</p>\n"}], "owner": {"reputation": 313, "user_id": 6066031, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/87e031e69d7be579f9a4a5c0f72e4cce?s=128&d=identicon&r=PG&f=1", "display_name": "P_Ferreira", "link": "https://stackoverflow.com/users/6066031/p-ferreira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 36048991, "answer_count": 1, "score": 0, "last_activity_date": 1458173684, "creation_date": 1458170824, "last_edit_date": 1458173684, "question_id": 36048909, "link": "https://stackoverflow.com/questions/36048909/python-matrix-index-out-of-range", "title": "Python matrix index out of range", "body": "<p>I have a matrix in python full of <code>' '</code> and <code>'#'</code>, i want to check if a position in the matrix has either <code>'#'</code> or <code>' '</code> surrounding him. Here is an example: </p>\n\n<pre><code>if matrix[i-1][j] == ' ':\n   do something\nif matrix[i][j-1] == '#':\n   do something\n</code></pre>\n\n<p>But this will need a lot of ifs because i need to test if <code>i != 0</code> or <code>j != 0</code> otherwise it will check a position that doesn't even exist.\nThere is an easy way to do this in python?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "edited": false, "score": 0, "creation_date": 1458171841, "post_id": 36048899, "comment_id": 59746539, "body": "What is <code>assetids.columns[0]</code> and <code>type(assetids.columns[0])</code>?"}, {"owner": {"reputation": 209, "user_id": 2033588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b97d947e2f4b9ee401cdee3d116d7e43?s=128&d=identicon&r=PG", "display_name": "Nikhil", "link": "https://stackoverflow.com/users/2033588/nikhil"}, "reply_to_user": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "edited": false, "score": 0, "creation_date": 1458248169, "post_id": 36048899, "comment_id": 59789108, "body": "<code>assetids.columns[0]</code> was the column I was trying to join on, <code>Asset ID</code>.  The type of that column was &quot;non-null object&quot;, while the corresponding column in <code>data</code> was just &quot;object&quot;."}, {"owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "edited": false, "score": 0, "creation_date": 1458251085, "post_id": 36048899, "comment_id": 59790596, "body": "<code>non-null object</code> refers to the data type of the <i>values</i> in the column. <code>type(assetids.columns[0])</code> will tell you Python type of the column label itself. If it is something unusual, such as a <code>BeautifulSoup.NavigableString</code>, then that would explain the odd behavior you are seeing. That is, the mystery would be explained if the two objects, <code>data.columns[i]</code> and <code>assetids.columns[0]</code> look like strings <i>when printed</i>, but compare differently: <code>data.columns[i] != assetids.columns[0]</code>"}, {"owner": {"reputation": 209, "user_id": 2033588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b97d947e2f4b9ee401cdee3d116d7e43?s=128&d=identicon&r=PG", "display_name": "Nikhil", "link": "https://stackoverflow.com/users/2033588/nikhil"}, "reply_to_user": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "edited": false, "score": 0, "creation_date": 1458677286, "post_id": 36048899, "comment_id": 59965569, "body": "Okay, I see what you&#39;re asking.    <code>type(assetids.columns[0])</code> is  <code>str</code>, as is <code>type(data.columns[0])</code>.  Meanwhile, both <code>type(assetids[&#39;Asset ID&#39;])</code> and <code>type(data[&#39;Asset ID&#39;])</code> are <code>pandas.core.series.Series</code>.  So theoretically, it still should have linked up correctly, but somehow refused to.  It was a good learning experience to know I could fall back on the direct column reference as a means of joining, though."}, {"owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "edited": false, "score": 0, "creation_date": 1458731564, "post_id": 36048899, "comment_id": 59988443, "body": "What is <code>repr(assetids.columns[0])</code>? Perhaps it is a string which includes a stray space or something."}], "tags": [], "owner": {"reputation": 209, "user_id": 2033588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b97d947e2f4b9ee401cdee3d116d7e43?s=128&d=identicon&r=PG", "display_name": "Nikhil", "link": "https://stackoverflow.com/users/2033588/nikhil"}, "is_accepted": false, "score": 0, "last_activity_date": 1458170767, "creation_date": 1458170767, "answer_id": 36048899, "question_id": 36048898, "link": "https://stackoverflow.com/questions/36048898/pandas-dataframes-wont-join-return-key-errors/36048899#36048899", "title": "Pandas dataframes won&#39;t join, return key errors", "body": "<p>The tipoff for me was when I explicitly tried to run <code>assetids['Asset ID'].dtype</code>, and it returned a key error.  I still don't know exactly why the column wasn't registering (I looked for hidden characters, weird encoding, everything).</p>\n\n<p>What ended up working was referencing the columns by their position in the dataframe's column list like this:</p>\n\n<pre><code>data2 = pd.merge(data, assetids, how='left',left_on='Asset ID', right_on=assetids.columns[0])\n</code></pre>\n"}], "owner": {"reputation": 209, "user_id": 2033588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b97d947e2f4b9ee401cdee3d116d7e43?s=128&d=identicon&r=PG", "display_name": "Nikhil", "link": "https://stackoverflow.com/users/2033588/nikhil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 290, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1458170767, "creation_date": 1458170767, "question_id": 36048898, "link": "https://stackoverflow.com/questions/36048898/pandas-dataframes-wont-join-return-key-errors", "title": "Pandas dataframes won&#39;t join, return key errors", "body": "<p>I'm trying to join two Pandas dataframes, one called <code>data</code> containting some video usage data, and one called <code>assetids</code> containing the metadata for videos being viewed.  Both dataframes include a column called <code>['Asset ID']</code> with the ID numbers in the exact same format, and I confirmed with a spot check that the IDs in <code>data</code> also exist in the metadata.  The only difference is that <code>data['Asset ID'].dtype</code> is an object, while <code>assetids['Asset ID'].dtype</code> is a non-null object.</p>\n\n<p>Yet, neither joins nor merges work properly.  Among the options I tried:</p>\n\n<pre><code>data2 = data.join(assetids, on = 'Asset ID')\n</code></pre>\n\n<p>^ Results in a blank dataframe.</p>\n\n<pre><code>data2 = data.join(assetids, how = 'left', on = 'Asset ID')\n</code></pre>\n\n<p>^ Results in the a half-filled dataframe</p>\n\n<pre><code>data2 = pd.merge(data, assetids, how='left',left_on='Asset ID', right_on= 'Asset ID')\n</code></pre>\n\n<p>^ Results in a key error on\u2014oddly enough\u2014<code>'Asset ID'</code></p>\n\n<p>Why won't these two dataframes merge, and how can I get them to merge?</p>\n"}, {"tags": ["python", "windows", "twitter", "sublimetext", "bots"], "comments": [{"owner": {"reputation": 2464, "user_id": 1035438, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d802ced0d7c4ac1f7a3d4958a90eb724?s=128&d=identicon&r=PG", "display_name": "Igor T.", "link": "https://stackoverflow.com/users/1035438/igor-t"}, "edited": false, "score": 2, "creation_date": 1458170672, "post_id": 36048769, "comment_id": 59746120, "body": "How exactly do you run it?"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1458171376, "post_id": 36048769, "comment_id": 59746369, "body": "It seems unlikely that the bot code is relevant, given that the problem is that however you&#39;re running it <i>can&#39;t find that code</i>."}, {"owner": {"reputation": 41, "user_id": 5115441, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/be70252e42aa5ef67fd54e8c6a93fc64?s=128&d=identicon&r=PG&f=1", "display_name": "WindWalker", "link": "https://stackoverflow.com/users/5115441/windwalker"}, "edited": false, "score": 0, "creation_date": 1458230669, "post_id": 36048769, "comment_id": 59778060, "body": "I am trying to Run it within the Sublime editor first"}], "answers": [{"tags": [], "owner": {"reputation": 5823, "user_id": 503099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gnC28.jpg?s=128&g=1", "display_name": "Forge", "link": "https://stackoverflow.com/users/503099/forge"}, "is_accepted": false, "score": 0, "last_activity_date": 1459015737, "creation_date": 1459015737, "answer_id": 36238915, "question_id": 36048769, "link": "https://stackoverflow.com/questions/36048769/error-the-system-cannot-find-the-file-specified-when-running-python-with-subli/36238915#36238915", "title": "Error &quot;The system cannot find the file specified&quot; when running Python with Sublime", "body": "<p>It seems like Python is not part of your environment variable <code>PATH</code>.</p>\n\n<p>Go to <code>My Computer &gt; Properties &gt; Advanced &gt; Environment Variables</code> and add <code>\"C:\\python27;\"</code> (use your python version) to the beginning of <code>PATH</code>, then relaunch Sublime.</p>\n\n<p>In Sublime, open the console with \"(ctrl-`)\" run <code>os.getenv(\"PATH\")</code> and verify <code>C:\\python27;</code> is in the result.</p>\n"}], "owner": {"reputation": 41, "user_id": 5115441, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/be70252e42aa5ef67fd54e8c6a93fc64?s=128&d=identicon&r=PG&f=1", "display_name": "WindWalker", "link": "https://stackoverflow.com/users/5115441/windwalker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1971, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1459015903, "creation_date": 1458170093, "last_edit_date": 1459015903, "question_id": 36048769, "link": "https://stackoverflow.com/questions/36048769/error-the-system-cannot-find-the-file-specified-when-running-python-with-subli", "title": "Error &quot;The system cannot find the file specified&quot; when running Python with Sublime", "body": "<p>I try to run my twitter bot code and I get this error:</p>\n\n<blockquote>\n  <p>[Error 2] The system cannot find the file specified\n  [cmd:  [u'python', u'-u', u'C:\\Users\\humza\\Desktop\\Simple-Python-TwitterBot-master\\run.py']]\n  [dir:  C:\\Users\\humza\\Desktop\\Simple-Python-TwitterBot-master]\n  [path: C:\\Program Files (x86)\\Intel\\iCLS Client\\;C:\\Program Files\\Intel\\iCLS Client\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files\\Intel\\Intel(R) Management Engine Components\\DAL;C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine Components\\DAL;C:\\Program Files\\Intel\\Intel(R) Management Engine Components\\IPT;C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine Components\\IPT;C:\\Program Files\\Intel\\WiFi\\bin\\;C:\\Program Files\\Common Files\\Intel\\WirelessCommon\\;C:\\RailsInstaller\\Git\\cmd;C:\\Program Files\\nodejs\\;C:\\Program Files (x86)\\Heroku\\bin;C:\\Program Files (x86)\\git\\cmd;C:\\Program Files (x86)\\Skype\\Phone\\;C:\\Users\\humza\\AppData\\Local\\Programs\\Common\\Microsoft]\n  [Finished] </p>\n</blockquote>\n\n<p>Here is my code:</p>\n\n<pre><code>import tweepy\n    from tweepy.auth import OAuthHandler\n    from tweepy.streaming import StreamListener, Stream\n\n    ckey = \"\"\n    csecret = \"\"\n    atoken = \"\"\n    asecret = \"\"\n\n    auths = OAuthHandler(ckey, csecret)\n    auths.set_access_token(atoken, asecret)\n    api = tweepy.API(auths)\n\n    class listener(StreamListener):\n        def on_data(self, raw_data):\n            try:\n                tweet_text = raw_data.lower().split('\"text\":\"')        [1].split('\",\"source\":\"')[0].replace(\",\", \"\")\n                screen_name = raw_data.lower().split('\"screen_name\":\"')[1].split('\",\"location\"')[0].replace(\",\", \"\")\n                tweet_cid = raw_data.split('\"id\":')[1].split('\"id_str\":')[0].replace(\",\", \"\")\n\n            accs = [] # banned account screen name goes in here\n            words = [] # banned words goes in here\n\n            if not any(acc in screen_name.lower() for acc in accs):\n                if not any(word in tweet_text.lower() for word in words):\n                    # call what u want to do here\n                        #fav(tweet_cid)\n                    #retweet(tweet_cid)\n                    #syntax need to be fixed here\n           return True\n\n        except Exception as e:\n            print(str(e)) # prints the error msg, if u dont want it comment it out\n            pass\n\n\n    def on_error(self, status_code):\n        try:\n            print( \"error\" + status_code)\n        except Exception as e:\n            print(str(e))\n            pass\n\ndef create_tweet():\n    \"\"\"Kent is Great!\"\"\"\n    # Replace this with your code!\n    text = \"\"\n    return text\n\n\ndef retweet(tweet_cid):\n    try:\n        api.retweet(tweet_cid)\n    except Exception as e:\n        print(str(e))\n        pass\n\n\ndef fav(tweet_cid):\n    try:\n        api.create_favorite(tweet_cid)\n    except Exception as e:\n        print(str(e))\n        pass\n\n\ndef unfav(tweet_cid):\n    try:\n        api.destroy_favorite(tweet_cid)\n    except Exception as e:\n        print(str(e))\n        pass\n\n\ndef tweet(myinput):\n    try:\n        api.update_status(status=myinput)\n    except Exception as e:\n        print(str(e))\n        pass\n\ndef tweet(text):\n    \"\"\"Send out the text as a tweet.\"\"\"\n    # Twitter authentication\n    auth = tweepy.OAuthHandler(C_KEY, C_SECRET)\n    auth.set_access_token(A_TOKEN, A_TOKEN_SECRET)\n    api = tweepy.API(auth)\n\n    # Send the tweet and log success or failure\n    try:\n        api.update_status(text)\n    except tweepy.error.TweepError as e:\n        log(e.message)\n    else:\n        log(\"Tweeted: \" + text)\n\n\ntrack_words = [\"kent\"]\nfollow_acc = ['946886204'] # all username converted to user ids\n\ntry:\n    twt = Stream(auths, listener())\n    twt.filter(track= track_words , follow = follow_acc)\nexcept Exception as e:\n    print(str(e))\n    pass\n</code></pre>\n"}, {"tags": ["python", "function"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1458169974, "post_id": 36048713, "comment_id": 59745858, "body": "Also, please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and a matching, clear problem statement."}, {"owner": {"reputation": 11, "user_id": 6074205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a05facaa25bb0fb424b5358179be7879?s=128&d=identicon&r=PG&f=1", "display_name": "mac143", "link": "https://stackoverflow.com/users/6074205/mac143"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1458171383, "post_id": 36048713, "comment_id": 59746372, "body": "i just want to know if i have used the functions in my code correctly, because when i run the program nothing shows up. The user must enter 3 values as stated above and then the result will be BMI."}], "answers": [{"tags": [], "owner": {"reputation": 576, "user_id": 5959905, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/227446de6d13d5e623ff06651ed36dad?s=128&d=identicon&r=PG", "display_name": "VlassisFo", "link": "https://stackoverflow.com/users/5959905/vlassisfo"}, "is_accepted": false, "score": 0, "last_activity_date": 1458172974, "creation_date": 1458172974, "answer_id": 36049289, "question_id": 36048713, "link": "https://stackoverflow.com/questions/36048713/3-arguments-calculating-bmi-python/36049289#36049289", "title": "3 Arguments - Calculating BMI - Python", "body": "<p>You define a function that takes no arguments, and then you're calling it recursively with arguments. Furthermore, you are using the int function on the input value, which, by default, is an integer. Finally you are asking the user to give the height in feet, although you don't really use it.</p>\n\n<pre><code>def calculate_bmi():\n    height_inches = input('..text..')\n    weight_pounds = input('..text..')\n    bmi = (float(weight_pounds) / height_inches)*703\n    print bmi\n\ncalculate_bmi()\n</code></pre>\n\n<p>First define your function, which asks for the 2 necessary values, calculates the result and then prints it. After that simply call your function and you get the desired result. I suggest you study python's documentation about functions to learn how they work.</p>\n"}], "owner": {"reputation": 11, "user_id": 6074205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a05facaa25bb0fb424b5358179be7879?s=128&d=identicon&r=PG&f=1", "display_name": "mac143", "link": "https://stackoverflow.com/users/6074205/mac143"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1125, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1458172974, "creation_date": 1458169825, "last_edit_date": 1458170208, "question_id": 36048713, "link": "https://stackoverflow.com/questions/36048713/3-arguments-calculating-bmi-python", "title": "3 Arguments - Calculating BMI - Python", "body": "<p>So basically Im trying to create a program which should do the following in python: </p>\n\n<p>A program that contains a function called <code>calculate_bmi</code> which when it is called, has three arguments - the first argument is an integer variable containing the height in feet, the second argument is an integer variable containing the height in inches, the third argument is the person's weight in pounds. The main program asks the user to enter feet, then inches, then pounds. These variables are then sent to the function. The function calculates and prints the BMI value.</p>\n\n<p>The code below is my attempt but I'm having no luck; I cannot seem to convert the height to feet as well. Any help would really be appreciated.</p>\n\n<pre><code>def calculate_bmi():\n\n   height_feet = int(input(\"Please enter height in feet\"))\n   height_inches = int(input(\"Please enter height in inches\"))\n   weight_pounds = int(input(\"Please enter weight in pounds\"))\n\n   calculate_bmi(height_feet,height_inches,weight_pounds)\n\n   bmi = (weight_pounds / height_inches) * 703\n\n   print (bmi)\n</code></pre>\n"}, {"tags": ["python", "authentication", "http-status-code-401"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1458170182, "post_id": 36048692, "comment_id": 59745935, "body": "Did you consider reading the documentation? <a href=\"http://docs.python-requests.org/en/master/\" rel=\"nofollow noreferrer\">docs.python-requests.org/en/master</a> - literally the first example shows how to handle HTTP status codes."}, {"owner": {"reputation": 2623, "user_id": 3697163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/611ce881510094605af96f479d2c0472?s=128&d=identicon&r=PG&f=1", "display_name": "DaveBensonPhillips", "link": "https://stackoverflow.com/users/3697163/davebensonphillips"}, "edited": false, "score": 0, "creation_date": 1458170333, "post_id": 36048692, "comment_id": 59746008, "body": "It looks like you&#39;re assuming <code>output</code> is a string, when it&#39;s actually a <code>Response</code> class, which is why all your comparisons fail."}, {"owner": {"reputation": 29, "user_id": 6074152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89b3d30191a2f680bf9cd384b5a25bb3?s=128&d=identicon&r=PG&f=1", "display_name": "C Van Ort", "link": "https://stackoverflow.com/users/6074152/c-van-ort"}, "edited": false, "score": 0, "creation_date": 1458216267, "post_id": 36048692, "comment_id": 59766649, "body": "I&#39;m new to python, I didn&#39;t realize that the status code was the same thing as the response. Now I know, thanks."}], "answers": [{"comments": [{"owner": {"reputation": 74709, "user_id": 21945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/631470ecb1d4fe8bd3be6d7e0dfe4449?s=128&d=identicon&r=PG", "display_name": "mhawke", "link": "https://stackoverflow.com/users/21945/mhawke"}, "edited": false, "score": 2, "creation_date": 1458170779, "post_id": 36048777, "comment_id": 59746164, "body": "I think it should be <code>requests.status_codes.codes.UNAUTHORIZED</code> which is 401, not <code>METHOD_NOT_ALLOWED</code> which is 405."}], "tags": [], "owner": {"reputation": 2623, "user_id": 3697163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/611ce881510094605af96f479d2c0472?s=128&d=identicon&r=PG&f=1", "display_name": "DaveBensonPhillips", "link": "https://stackoverflow.com/users/3697163/davebensonphillips"}, "is_accepted": false, "score": 4, "last_activity_date": 1584634785, "last_edit_date": 1584634785, "creation_date": 1458170141, "answer_id": 36048777, "question_id": 36048692, "link": "https://stackoverflow.com/questions/36048692/how-do-i-test-for-401-response-to-a-post-request-in-python/36048777#36048777", "title": "How do I test for 401 response to a post request in python?", "body": "<p>You want the <code>status_code</code> attribute</p>\n\n<pre><code>if output.status_code == 401:\n    ...\n</code></pre>\n\n<p>Or to avoid hard coding numbers:</p>\n\n<pre><code>if output.status_code == requests.status_codes.codes.UNAUTHORIZED:\n    ....\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 6074152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89b3d30191a2f680bf9cd384b5a25bb3?s=128&d=identicon&r=PG&f=1", "display_name": "C Van Ort", "link": "https://stackoverflow.com/users/6074152/c-van-ort"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2144, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1584634785, "creation_date": 1458169709, "question_id": 36048692, "link": "https://stackoverflow.com/questions/36048692/how-do-i-test-for-401-response-to-a-post-request-in-python", "title": "How do I test for 401 response to a post request in python?", "body": "<p>I'm using a post request to access a website that requires authentication. If that authentication is incorrect, I get a Response [401]. I want to test if the authentication is incorrect and if so, abort the process and display an error of some sort. I don't know the syntax to test if the response is 401.</p>\n\n<pre><code>output = requests.post(cfg.get('HTTP', 'url'), data = query, verify=False, auth=HTTPBasicAuth(credentials['user'], credentials['pass']))\n\n        if output == '&lt;Response [401]&gt;':\n            sys.exit('Incorrect Authentication. Please try again.')\n        else:\n            sys.exit('manual stop1')\n</code></pre>\n\n<p>Instead of <code>'&lt;Response [401]&gt;'</code>, I've also tried <code>'Response [401]'</code>, <code>'response [401]'</code>, <code>'&lt;Response[401]&gt;'</code>, <code>'Response[401]'</code>, <code>'response[401]'</code>, <code>'[401]'</code>, <code>'401'</code>, and all of those without quotes.</p>\n\n<p>I've seen some responses using flask and json, but I was hoping to not have to change how I'm requesting the data. Thank you!</p>\n"}, {"tags": ["python", "matplotlib"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 6074171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31eb5d4ac8ee579dffd2b54a6a6dca8c?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/6074171/ivan"}, "edited": false, "score": 0, "creation_date": 1458323386, "post_id": 36061943, "comment_id": 59826411, "body": "Thx a lot u are my saviour!"}], "tags": [], "owner": {"reputation": 49128, "user_id": 588071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0e0397d27c84e04451691ddb6c8d49c?s=128&d=identicon&r=PG&f=1", "display_name": "tmdavison", "link": "https://stackoverflow.com/users/588071/tmdavison"}, "is_accepted": true, "score": 1, "last_activity_date": 1458221218, "last_edit_date": 1495541728, "creation_date": 1458221218, "answer_id": 36061943, "question_id": 36048679, "link": "https://stackoverflow.com/questions/36048679/matplotlib-tick-dirrection-for-different-sides-of-boxplot/36061943#36061943", "title": "Matplotlib tick dirrection for different sides of boxplot", "body": "<p>One option would be to create a twin axes using <code>ax.twinx()</code>, and then you can control the <code>yticks</code> on the two axes separately. </p>\n\n<p>You will probably also want to then share the y axes between the two axes, so that the axes limits and ticks are the same between the two. We can use the answer <a href=\"https://stackoverflow.com/a/12924646/588071\">here</a> to do that.</p>\n\n<p>Here's a minimal example, modified from the <a href=\"http://matplotlib.org/examples/pylab_examples/boxplot_demo.html\" rel=\"nofollow noreferrer\"><code>boxplot</code> demo</a>:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\n\n# fake up some data\nspread = np.random.rand(50) * 100\ncenter = np.ones(25) * 50\nflier_high = np.random.rand(10) * 100 + 100\nflier_low = np.random.rand(10) * -100\ndata = np.concatenate((spread, center, flier_high, flier_low), 0)\n\n# Make the figure and axes\nfig,ax = plt.subplots(1)\n\n# Add you twin axes\nax2 = ax.twinx()\n\n# Set the ticks to the outside on the right only\nax2.tick_params(axis='y',direction='out')\n\n# Make sure the ticks and axes limits are shared between the left and right\nax.get_shared_y_axes().join(ax,ax2)\n\n# basic boxplot\nax.boxplot(data)\n\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/sh0QO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sh0QO.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 35, "user_id": 6074171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31eb5d4ac8ee579dffd2b54a6a6dca8c?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/6074171/ivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 376, "favorite_count": 0, "accepted_answer_id": 36061943, "answer_count": 1, "score": 2, "last_activity_date": 1458221218, "creation_date": 1458169647, "last_edit_date": 1458177894, "question_id": 36048679, "link": "https://stackoverflow.com/questions/36048679/matplotlib-tick-dirrection-for-different-sides-of-boxplot", "title": "Matplotlib tick dirrection for different sides of boxplot", "body": "<p>Is the way to set direction for ticks at left side and right side of boxplot?\nWhen I <code>x_or_y_axis.set_tick_params(direction='whatever')</code> it change direction for ticks at both sides of box: </p>\n\n<pre><code>  _______________        _______________\n-|               |-     |-             -|\n |               |      |-             -|\n-|               |-     |-             -|\n |               |      |-             -|\n-|_______________|-  or |_______________|\n</code></pre>\n\n<p>But I need to:</p>\n\n<pre><code>  _______________         _______________\n |-              |-     -|             -|\n |               |       |              |\n |-              |-     -|             -|\n |               |       |              |\n |-______________|-  or -|_____________-|\n</code></pre>\n"}, {"tags": ["python", "design-patterns", "architecture", "database-connection"], "answers": [{"comments": [{"owner": {"reputation": 5422, "user_id": 649167, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/e56e7f730847a9d1ebb6b7669a83e003?s=128&d=identicon&r=PG", "display_name": "knite", "link": "https://stackoverflow.com/users/649167/knite"}, "edited": false, "score": 0, "creation_date": 1458519636, "post_id": 36120990, "comment_id": 59882794, "body": "Thanks for the thorough reply! I hadn&#39;t really considered thread and fork safety, I&#39;ll definitely have a think about that.  Re: connection parameters bug, good catch and good fix.  Re: client pools, also a good point, but even with a connection pool, you&#39;ll want to centralize initialization and guarantee that you&#39;re using the same pool throughout the application."}, {"owner": {"reputation": 5422, "user_id": 649167, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/e56e7f730847a9d1ebb6b7669a83e003?s=128&d=identicon&r=PG", "display_name": "knite", "link": "https://stackoverflow.com/users/649167/knite"}, "edited": false, "score": 0, "creation_date": 1458519983, "post_id": 36120990, "comment_id": 59882903, "body": "Re: simple helper function, I considered this approach originally. It quickly becomes annoying due to every module needing to import awesome_db <i>and</i> call it."}], "tags": [], "owner": {"reputation": 662, "user_id": 168377, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xHEet.jpg?s=128&g=1", "display_name": "emil.p.stanchev", "link": "https://stackoverflow.com/users/168377/emil-p-stanchev"}, "is_accepted": false, "score": 1, "last_activity_date": 1458517120, "creation_date": 1458517120, "answer_id": 36120990, "question_id": 36048671, "link": "https://stackoverflow.com/questions/36048671/managing-connection-creation-in-python/36120990#36120990", "title": "Managing connection creation in Python?", "body": "<p>First, design-wise, I might be missing something, but I don't see why you need the heavy mixin+singleton machinery instead of just defining a helper like so:</p>\n\n<pre><code>_awesome_db = None\ndef awesome_db(**overrides):\n    global _awesome_db\n    if _awesome_db is None:\n        # Read config/set defaults.\n        # overrides.setdefault(...)\n        _awesome_db = RealAwesomeDB(**overrides)\n    return _awesome_db\n</code></pre>\n\n<p>Also, there is a bug that might not look like a supported use-case, but anyway: if you make the following 2 calls in a row, you would wrongly get the same connection object twice even though you passed different parameters:</p>\n\n<pre><code>db = AwesomeDB()\ndb.init(username='stuff admin')\n\ndb = AwesomeDB()\ndb.init(username='not-admin')    # You'll get admin connection here.\n</code></pre>\n\n<p>An easy fix for that would be to use a dict of connections keyed on the input parameters.</p>\n\n<p>Now, on the essence of the question.</p>\n\n<p>I think the answer depends on how your \"connection\" classes are actually implemented.</p>\n\n<p>Potential downsides with your approach I see are:</p>\n\n<ul>\n<li><p>In a multithreaded environment you could get problems with unsychronized concurrent access to the global connection object from multiple threads, unless it is already thread-safe. If you care about that, you could change your code and interface a bit and use a thread-local variable.</p></li>\n<li><p>What if a process forks after creating the connection? Web application servers tend to do that and it might not be safe, again depending on the underlying connection.</p></li>\n<li><p>Does the connection object have state? What happens if the connection object becomes invalid (due to i.e. connection error/time out)? You might need to replace the broken connection with a new one to return the next time a connection is requested.</p></li>\n</ul>\n\n<p>Connection management is often already efficiently and safely implemented through a <a href=\"https://en.wikipedia.org/wiki/Connection_pool\" rel=\"nofollow\">connection pool</a> in client libraries.</p>\n\n<p>For example, the redis-py Redis client uses the following implementation:</p>\n\n<p><a href=\"https://github.com/andymccurdy/redis-py/blob/1c2071762ad9b9288e786665990083e61c1cf355/redis/connection.py#L974\" rel=\"nofollow\">https://github.com/andymccurdy/redis-py/blob/1c2071762ad9b9288e786665990083e61c1cf355/redis/connection.py#L974</a></p>\n\n<p>The Redis client then uses the connection pool like so:</p>\n\n<ul>\n<li><a href=\"https://github.com/andymccurdy/redis-py/blob/1c2071762ad9b9288e786665990083e61c1cf355/redis/client.py#L570\" rel=\"nofollow\">Requests a connection</a> from the connection pool.</li>\n<li><a href=\"https://github.com/andymccurdy/redis-py/blob/1c2071762ad9b9288e786665990083e61c1cf355/redis/client.py#L572\" rel=\"nofollow\">Tries to execute a command</a> on the connection.</li>\n<li>If the connection fails, the client <a href=\"https://github.com/andymccurdy/redis-py/blob/1c2071762ad9b9288e786665990083e61c1cf355/redis/client.py#L575\" rel=\"nofollow\">closes it</a>.</li>\n<li>In any case, finaly it is <a href=\"https://github.com/andymccurdy/redis-py/blob/1c2071762ad9b9288e786665990083e61c1cf355/redis/client.py#L581\" rel=\"nofollow\">returned to the connection pool</a> so it can be reused by subsequent calls or other threads.</li>\n</ul>\n\n<p>So since the Redis client handles all of that under the hood, you can safely do what you want directly. Connections will be lazily created until the connection pool reaches full capacity.</p>\n\n<pre><code># app/connections.py\ndef redis_client(**kwargs):\n    # Maybe read configuration/set default arguments\n    # kwargs.setdefault()\n    return redis.Redis(**kwargs)\n</code></pre>\n\n<p>Similarly, SQLAlchemy can use <a href=\"http://docs.sqlalchemy.org/en/latest/core/pooling.html\" rel=\"nofollow\">connection pooling as well</a>.</p>\n\n<p>To summarize, my understanding is that:</p>\n\n<ul>\n<li><p>If your client library supports connection pooling, you don't need to do anything special to share connections between modules and even threads. You could just define a helper similar to <code>redis_client()</code> that reads configuration, or specifies default parameters.</p></li>\n<li><p>If your client library provides only low-level connection objects, you will need to make sure access to them is thread-safe and fork-safe. Also, you need to make sure each time you return a valid connection (or raise an exception if you can't establish or reuse an existing one).</p></li>\n</ul>\n"}], "owner": {"reputation": 5422, "user_id": 649167, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/e56e7f730847a9d1ebb6b7669a83e003?s=128&d=identicon&r=PG", "display_name": "knite", "link": "https://stackoverflow.com/users/649167/knite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1704, "favorite_count": 2, "answer_count": 1, "score": 7, "last_activity_date": 1458517120, "creation_date": 1458169611, "last_edit_date": 1495535310, "question_id": 36048671, "link": "https://stackoverflow.com/questions/36048671/managing-connection-creation-in-python", "title": "Managing connection creation in Python?", "body": "<p>Applications often need to connect to other services (a database, a cache, an API, etc). For sanity and DRY, we'd like to keep all of these connections in one module so the rest of our code base can share connections.</p>\n\n<p>To reduce boilerplate, downstream usage should be simple:</p>\n\n<pre><code># app/do_stuff.py\nfrom .connections import AwesomeDB\n\ndb = AwesomeDB()\n\ndef get_stuff():\n    return db.get('stuff')\n</code></pre>\n\n<p>And setting up the connection should also be simple:</p>\n\n<pre><code># app/cli.py or some other main entry point\nfrom .connections import AwesomeDB\n\ndb = AwesomeDB()\ndb.init(username='stuff admin')    # Or os.environ['DB_USER']\n</code></pre>\n\n<p>Web frameworks like Django and Flask do something like this, but it feels a bit clunky:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/16311974/connect-to-a-database-in-flask-which-approach-is-better\">Connect to a Database in Flask, Which Approach is better?</a>\n<a href=\"http://flask.pocoo.org/docs/0.10/tutorial/dbcon/\" rel=\"nofollow noreferrer\">http://flask.pocoo.org/docs/0.10/tutorial/dbcon/</a></p>\n\n<p>One big issue with this is that we want a reference to the actual connection object instead of a proxy, because we want to retain tab-completion in iPython and other dev environments.</p>\n\n<p>So what's the Right Way (tm) to do it? After a few iterations, here's my idea:</p>\n\n<pre><code>#app/connections.py\nfrom awesome_database import AwesomeDB as RealAwesomeDB\nfrom horrible_database import HorribleDB as RealHorribleDB\n\n\nclass ConnectionMixin(object):\n    __connection = None\n\n    def __new__(cls):\n        cls.__connection = cls.__connection or object.__new__(cls)\n        return cls.__connection\n\n    def __init__(self, real=False, **kwargs):\n        if real:\n            super().__init__(**kwargs)\n\n    def init(self, **kwargs):\n        kwargs['real'] = True\n        self.__init__(**kwargs)\n\n\nclass AwesomeDB(ConnectionMixin, RealAwesomeDB):\n    pass\n\n\nclass HorribleDB(ConnectionMixin, RealHorribleDB):\n    pass\n</code></pre>\n\n<p>Room for improvement: Set initial __connection to a generic ConnectionProxy instead of None, which catches all attribute access and throws an exception.</p>\n\n<p>I've done quite a bit of poking around here on SO and in various OSS projects and haven't seen anything like this. It feels pretty solid, though it does mean a bunch of modules will be instantiating connection objects as a side effect at import time. Will this blow up in my face? Are there any other negative consequences to this approach?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 47098, "user_id": 1281485, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/G4LdD.jpg?s=128&g=1", "display_name": "Alfe", "link": "https://stackoverflow.com/users/1281485/alfe"}, "edited": false, "score": 0, "creation_date": 1458169850, "post_id": 36048661, "comment_id": 59745808, "body": "Find out whether the start time is greater than the end time and make a branch for each situation.  The first branch you already have.  The other branch will be something like this: <code>if now_time &gt; start_time or now_time &lt; end_time: \u2026</code>."}, {"owner": {"reputation": 1774, "user_id": 3861449, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fc5cffc01b789b8262766e32eddbcfd7?s=128&d=identicon&r=PG&f=1", "display_name": "zephyr", "link": "https://stackoverflow.com/users/3861449/zephyr"}, "edited": false, "score": 0, "creation_date": 1458170242, "post_id": 36048661, "comment_id": 59745964, "body": "You have the date information as well. Why not include the date as well as the time in your comparison? If arg.start is March 16, 2016 at 11:00 PM, then it&#39;s easy to say that March 17, 2016 at 1:00 AM is greater than that."}, {"owner": {"reputation": 23980, "user_id": 1735756, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SloZJ.jpg?s=128&g=1", "display_name": "Haifeng Zhang", "link": "https://stackoverflow.com/users/1735756/haifeng-zhang"}, "edited": false, "score": 0, "creation_date": 1458170287, "post_id": 36048661, "comment_id": 59745986, "body": "if <code>date</code> is not provided, how can you tell <code>11:00pm, 11:00pm</code>?"}, {"owner": {"reputation": 2900, "user_id": 2566965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/300de803639f26b633cbf259a95af052?s=128&d=identicon&r=PG", "display_name": "junnytony", "link": "https://stackoverflow.com/users/2566965/junnytony"}, "edited": false, "score": 0, "creation_date": 1458173827, "post_id": 36048661, "comment_id": 59747166, "body": "You must have date in order to know that 11:00pm today is earlier than 8:00am tomorrow. Including the date would make your current logic work for your second example"}, {"owner": {"reputation": 2055, "user_id": 665200, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8f19a0a6b0afe902c224e03a8eb38ece?s=128&d=identicon&r=PG", "display_name": "sam", "link": "https://stackoverflow.com/users/665200/sam"}, "edited": false, "score": 0, "creation_date": 1458239339, "post_id": 36048661, "comment_id": 59783858, "body": "Ok, thanks everyone. I&#39;ve included the date and it works good!"}], "owner": {"reputation": 2055, "user_id": 665200, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8f19a0a6b0afe902c224e03a8eb38ece?s=128&d=identicon&r=PG", "display_name": "sam", "link": "https://stackoverflow.com/users/665200/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1458169585, "creation_date": 1458169585, "question_id": 36048661, "link": "https://stackoverflow.com/questions/36048661/checking-whether-current-time-is-between-time-range", "title": "checking whether current time is between time range", "body": "<p>I am writing a python app where I only want processing to occur between a certain time range which is specified as parameters.</p>\n\n<p>e.g. if the user provides parameters 9:00am 10:00pm, then the processing will only happen between that range.</p>\n\n<p>The code below seems to achieve what I want however I am unsure how to handle the case where the start time is e.g. 11:00pm and end time is 08:00am. In this case 8am would refer to the next day however the code below wouldn't handle that.</p>\n\n<p>Any advice?\nThanks</p>\n\n<pre><code>    now = datetime.now()\n    now_time = now.time()\n\n    if now_time &gt;= args.start and now_time &lt;= args.end:\n        # Process as normal\n    else:\n        # Sleep until start time\n        dt_now = timedelta(hours=now_time.hour, minutes = now_time.minute, seconds=now_time.second, microseconds=now_time.microsecond)\n        dt_start = timedelta(hours=args.start.hour, minutes = args.start.minute, seconds=args.start.second, microseconds=args.start.microsecond)\n        time_to_wait = abs((dt_start - dt_now).seconds)\n        time.sleep(time_to_wait)\n</code></pre>\n"}, {"tags": ["python", "animation", "matplotlib", "matplotlib-basemap", "cartopy"], "comments": [{"owner": {"reputation": 4987, "user_id": 3100515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dZSlO.jpg?s=128&g=1", "display_name": "Ajean", "link": "https://stackoverflow.com/users/3100515/ajean"}, "edited": false, "score": 0, "creation_date": 1458257581, "post_id": 36048622, "comment_id": 59793137, "body": "I&#39;m confused ... what are you trying to animate?  Do you want to add countries one at a time, or .... what?  Also, it&#39;s better to provide an example with some example data points instead of your SQL, so that other people can run it."}, {"owner": {"reputation": 194, "user_id": 5089644, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76e4553f0915c3f5721e4f0cc17b804e?s=128&d=identicon&r=PG&f=1", "display_name": "DVL", "link": "https://stackoverflow.com/users/5089644/dvl"}, "reply_to_user": {"reputation": 4987, "user_id": 3100515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dZSlO.jpg?s=128&g=1", "display_name": "Ajean", "link": "https://stackoverflow.com/users/3100515/ajean"}, "edited": false, "score": 0, "creation_date": 1458314359, "post_id": 36048622, "comment_id": 59820441, "body": "Thanks for your response!  I&#39;m trying to have it display the colors for all countries in year 1960, then the colors for all countries in the year 1961, then 1962...  I added some example data for United States 1960-1963."}], "answers": [{"comments": [{"owner": {"reputation": 194, "user_id": 5089644, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76e4553f0915c3f5721e4f0cc17b804e?s=128&d=identicon&r=PG&f=1", "display_name": "DVL", "link": "https://stackoverflow.com/users/5089644/dvl"}, "edited": false, "score": 0, "creation_date": 1458568092, "post_id": 36090177, "comment_id": 59904123, "body": "Thanks a lot! I really appreciate it"}], "tags": [], "owner": {"reputation": 4987, "user_id": 3100515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dZSlO.jpg?s=128&g=1", "display_name": "Ajean", "link": "https://stackoverflow.com/users/3100515/ajean"}, "is_accepted": true, "score": 3, "last_activity_date": 1458327916, "last_edit_date": 1458327916, "creation_date": 1458320389, "answer_id": 36090177, "question_id": 36048622, "link": "https://stackoverflow.com/questions/36048622/animation-using-cartopy/36090177#36090177", "title": "Animation Using Cartopy", "body": "<p>There are actually several problems with how you've set up your <code>run()</code>, but the major problem appeared to actually be the <code>enumate(countries_map)</code>.  The <code>records()</code> function returns a generator, which once you've run through it once doesn't appear to like being run through again - I tried it separate from the animation to make sure.</p>\n\n<p>That said, the problem can be avoided entirely by moving a lot of code out of the <code>run()</code>.  Currently, even if it worked you're re-drawing every single country every frame, not just the ones with colors. It's both intensive and unnecessary - you don't need to draw any gray ones more than once.</p>\n\n<p>I've restructured your code a bit and with the fake data I put in for the US and Argentina it works fine for me.</p>\n\n<pre><code>import pandas as pd\nimport matplotlib.pyplot as plt\nimport matplotlib as mpl\nimport matplotlib.animation as animation\nimport cartopy.crs as ccrs\nimport cartopy.io.shapereader as shpreader\nfrom math import log\nfrom math import exp\nfrom matplotlib import colors\n\n# Grab :\n# % of electricity from renewable sources EG.ELC.RNWX.ZS\n# 1960 - 2013\n\n# Make fake data\nIndicator_df = pd.DataFrame({'CountryName':['United States']*4+['Argentina']*4,\n                             'Year':[1960, 1961, 1962, 1963]*2,\n                             'Value':[5, 10, 20, 30]*2})\n\n# setup colorbar stuff and shape files\nnorm = mpl.colors.Normalize(vmin=0, vmax=30)\ncolors_in_map = []\nlogbase = exp(1)\nfor i in range(30):\n    val = log(i + 1, logbase) / log(31, logbase)\n    colors_in_map.append((1 - val, val, 0))\ncmap = colors.ListedColormap(colors_in_map)\n\nshpfilename = shpreader.natural_earth(resolution='110m',\n                                      category='cultural',\n                                      name='admin_0_countries')\nreader = shpreader.Reader(shpfilename)\ncountries_map = reader.records()\n\n# These don't need to constantly be redefined, especially edgecolor\nfacecolor = 'gray'\nedgecolor = 'black'\n\nfig, ax = plt.subplots(figsize=(12, 6),\n                       subplot_kw={'projection': ccrs.PlateCarree()})\n\n# Draw all the gray countries just once in an init function\n# I also make a dictionary for easy lookup of the geometries by country name later\ngeom_dict = {}\ndef init_run():\n    for n, country in enumerate(countries_map):\n        ax.add_geometries(country.geometry, ccrs.PlateCarree(),\n                          facecolor=facecolor, edgecolor=edgecolor)\n        geom_dict[country.attributes['name_long']] = country.geometry\n\n\ndef run(data):\n    \"\"\"Update the Dist\"\"\"\n    # \"data\" in this setup is a frame number starting from 0, so it corresponds nicely\n    # with your years\n    year = 1960 + data\n\n    # get a subset of the df for the current year\n    year_df = Indicator_df[Indicator_df['Year'] == year]\n    for i, row in year_df.iterrows():\n        # This loops over countries, gets the value and geometry and adds\n        # the new-colored shape\n        geom = geom_dict[row['CountryName']]\n        value = row['Value']\n        greenamount = (log(float(value) + 1, logbase) /\n                       log(31, logbase))\n        facecolor = 1 - greenamount, greenamount, 0\n        ax.add_geometries(geom, ccrs.PlateCarree(),\n                          facecolor=facecolor, edgecolor=edgecolor)\n\n    # I decreased the indent of this, you only need to do it once per call to run()\n    ax.set_title('Percent of Electricity from Renewable Sources ' +\n                 str(year))\n\ncax = fig.add_axes([0.92, 0.2, 0.02, 0.6])\ncb = mpl.colorbar.ColorbarBase(cax, cmap=cmap, norm=norm,\n                               spacing='proportional')\ncb.set_label('%')\n\nani = animation.FuncAnimation(fig, run, init_func=init_run, frames=4,\n                              interval=500, blit=False)\nplt.show()\n</code></pre>\n\n<p>The primary difference is that I'm not accessing the shpreader at all inside the run function.  When making an animation, the only thing that should be in the run function are things that <em>change</em>, you don't need to re-draw everything every frame.</p>\n\n<p>That said, this could be <em>even better</em> if you just keep the artist from the very first draw and just <em>change the color</em> of it in the run function, instead of doing a whole new <code>ax.add_geometries</code>.  You'll have to look into how to change the color of a cartopy FeatureArtist for that.</p>\n"}, {"tags": [], "owner": {"reputation": 549, "user_id": 6333935, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7807ad4b2a421a6471ba46b6ad061af8?s=128&d=identicon&r=PG&f=1", "display_name": "bublitz", "link": "https://stackoverflow.com/users/6333935/bublitz"}, "is_accepted": false, "score": 0, "last_activity_date": 1480077114, "creation_date": 1480077114, "answer_id": 40805170, "question_id": 36048622, "link": "https://stackoverflow.com/questions/36048622/animation-using-cartopy/40805170#40805170", "title": "Animation Using Cartopy", "body": "<p>Just to address the second point about not having to draw the whole shape again:</p>\n\n<p>Instead of storing the shape information, store the feature artist, i.e.:</p>\n\n<pre><code>    feature_artist = ax.add_geometries(country.geometry, ccrs.PlateCarree(),\n                      facecolor=facecolor, edgecolor=edgecolor)\n    geom_dict[country.attributes['name_long']] = feature_artist\n</code></pre>\n\n<p>Then, in the updating loop, instead of calling ax.add_geometries again, call the following:</p>\n\n<pre><code>    geom._feature._kwargs['facecolor'] = facecolor\n</code></pre>\n\n<p>This will update the facecolor. (You could also change the adgecolor - since it stays the same, you can leave that away.)</p>\n"}], "owner": {"reputation": 194, "user_id": 5089644, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76e4553f0915c3f5721e4f0cc17b804e?s=128&d=identicon&r=PG&f=1", "display_name": "DVL", "link": "https://stackoverflow.com/users/5089644/dvl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2004, "favorite_count": 3, "accepted_answer_id": 36090177, "answer_count": 2, "score": 4, "last_activity_date": 1480077114, "creation_date": 1458169396, "last_edit_date": 1458320443, "question_id": 36048622, "link": "https://stackoverflow.com/questions/36048622/animation-using-cartopy", "title": "Animation Using Cartopy", "body": "<p>I'm trying to write a python program that displays an animation of a map of the world where countries change color based on how much renewable energy use they have. I'm trying to have it display the colors for all countries in year 1960, then the colors for all countries in the year 1961, then 1962... </p>\n\n<p>I'm using cartopy to add countries to the figure and basing their color off of values that I pull into a pandas dataframe from a SQL database. I was able to get the map to show what I want for one year like this:\n<a href=\"https://i.stack.imgur.com/TkJkU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TkJkU.png\" alt=\"enter image description here\"></a></p>\n\n<p>However, I can't figure out how to animate it. I tried using FuncAnimate, but I'm really struggling to understand how it works. All the examples seem to have functions that return lines, but I'm not graphing lines or contours. Here is what I tried:</p>\n\n<pre><code>import sqlite3\nimport pandas as pd\nimport os\nimport matplotlib.pyplot as plt\nimport matplotlib as mpl\nimport matplotlib.animation as animation\nimport cartopy.crs as ccrs\nimport cartopy.io.shapereader as shpreader\nfrom math import log\nfrom math import exp\nfrom matplotlib import colors\npath = 'H:/USER/DVanLunen/indicator_data/world-development-indicators/'\nos.chdir(path)\ncon = sqlite3.connect('database.sqlite')\n\n# Grab :\n# % of electricity from renewable sources EG.ELC.RNWX.ZS\n# 1960 - 2013\n\nIndicator_df = pd.read_sql('SELECT * '\n                           'FROM Indicators '\n                           'WHERE IndicatorCode in('\n                                                   '\"EG.ELC.RNWX.ZS\"'\n                                                   ')'\n                           , con)\n# setup colorbar stuff and shape files\nnorm = mpl.colors.Normalize(vmin=0, vmax=30)\ncolors_in_map = []\nfor i in range(30):\n    val = log(i + 1, logbase) / log(31, logbase)\n    colors_in_map.append((1 - val, val, 0))\ncmap = colors.ListedColormap(colors_in_map)\n\nshpfilename = shpreader.natural_earth(resolution='110m',\n                                      category='cultural',\n                                      name='admin_0_countries')\nreader = shpreader.Reader(shpfilename)\ncountries_map = reader.records()\nlogbase = exp(1)\nfig, ax = plt.subplots(figsize=(12, 6),\n                       subplot_kw={'projection': ccrs.PlateCarree()})\n\n\ndef run(data):\n    \"\"\"Update the Dist\"\"\"\n    year = 1960 + data % 54\n    logbase = exp(1)\n    for n, country in enumerate(countries_map):\n        facecolor = 'gray'\n        edgecolor = 'black'\n        indval = Indicator_df.loc[(Indicator_df['CountryName'] ==\n                                   country.attributes['name_long']) &amp;\n                                  (Indicator_df['Year'] == year), 'Value']\n        if indval.any():\n                greenamount = (log(float(indval) + 1, logbase) /\n                               log(31, logbase))\n                facecolor = 1 - greenamount, greenamount, 0\n        ax.add_geometries(country.geometry, ccrs.PlateCarree(),\n                          facecolor=facecolor, edgecolor=edgecolor)\n        ax.set_title('Percent of Electricity from Renewable Sources ' +\n                     str(year))\n    ax.figure.canvas.draw()\n\ncax = fig.add_axes([0.92, 0.2, 0.02, 0.6])\ncb = mpl.colorbar.ColorbarBase(cax, cmap=cmap, norm=norm,\n                               spacing='proportional')\ncb.set_label('%')\n\nani = animation.FuncAnimation(fig, run, interval=200, blit=False)\nplt.show()\n</code></pre>\n\n<p>Any help would be greatly appreciated. Thanks!</p>\n\n<p>Some example data for Indicator_df (not real):</p>\n\n<pre><code>CountryName     Year     Value\nUnited States     1960     5\nUnited States     1961     10\nUnited States     1962     20\nUnited States     1963     30\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 1, "creation_date": 1458169557, "post_id": 36048592, "comment_id": 59745714, "body": "What is the purpose of the first 2 lines in your function? Remove them, use <code>table</code> instead of <code>multi</code> as parameter name and try again."}, {"owner": {"reputation": 16775, "user_id": 442945, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/TovHM.png?s=128&g=1", "display_name": "Nathaniel Ford", "link": "https://stackoverflow.com/users/442945/nathaniel-ford"}, "edited": false, "score": 1, "creation_date": 1458169565, "post_id": 36048592, "comment_id": 59745719, "body": "Welcome to StackOverflow! For us to be able to help you, we need to know what you&#39;re inputting to your program, what it is returning, and what you <b>expected</b> it to return. Refer to <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>"}, {"owner": {"reputation": 3765, "user_id": 459615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73f4c8c6dee5c7decf6434296f0fce47?s=128&d=identicon&r=PG", "display_name": "Kurt Stutsman", "link": "https://stackoverflow.com/users/459615/kurt-stutsman"}, "edited": false, "score": 0, "creation_date": 1458169580, "post_id": 36048592, "comment_id": 59745728, "body": "You have to call <code>findthetable(tablechoice)</code> after you input the value. You should be using <code>multi</code> instead of <code>table</code> because that&#39;s where your value is coming form."}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1458170186, "post_id": 36048592, "comment_id": 59745939, "body": "Also, consider using a <code>for</code> loop."}, {"owner": {"reputation": 49, "user_id": 5319918, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e3c2b800b70d26bff11653d7e970f693?s=128&d=identicon&r=PG", "display_name": "BlizzardGizzard", "link": "https://stackoverflow.com/users/5319918/blizzardgizzard"}, "edited": false, "score": 0, "creation_date": 1458288716, "post_id": 36048592, "comment_id": 59803136, "body": "Kurt, why is my value coming from multi? I thought I set multi to be my list for printing out each of the numbers after they were multiplicated?"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 5319918, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e3c2b800b70d26bff11653d7e970f693?s=128&d=identicon&r=PG", "display_name": "BlizzardGizzard", "link": "https://stackoverflow.com/users/5319918/blizzardgizzard"}, "edited": false, "score": 0, "creation_date": 1458288786, "post_id": 36048798, "comment_id": 59803178, "body": "Surely this would now only do the two times tables?"}, {"owner": {"reputation": 649, "user_id": 6030550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S1qWX.png?s=128&g=1", "display_name": "Yunhe", "link": "https://stackoverflow.com/users/6030550/yunhe"}, "reply_to_user": {"reputation": 49, "user_id": 5319918, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e3c2b800b70d26bff11653d7e970f693?s=128&d=identicon&r=PG", "display_name": "BlizzardGizzard", "link": "https://stackoverflow.com/users/5319918/blizzardgizzard"}, "edited": false, "score": 0, "creation_date": 1458289754, "post_id": 36048798, "comment_id": 59803669, "body": "no, the first input parameter is the number of &#39;times&#39;. if you want to get 3 times table in [1, 12], call findthetable(3, 12)"}], "tags": [], "owner": {"reputation": 649, "user_id": 6030550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S1qWX.png?s=128&g=1", "display_name": "Yunhe", "link": "https://stackoverflow.com/users/6030550/yunhe"}, "is_accepted": false, "score": 0, "last_activity_date": 1458170213, "creation_date": 1458170213, "answer_id": 36048798, "question_id": 36048592, "link": "https://stackoverflow.com/questions/36048592/multiplication-table-program-wont-work/36048798#36048798", "title": "Multiplication Table program won&#39;t work", "body": "<p>Here is one answer. Define the function named findthetable. The first input parameter is the the number of \"times\" you want to use, and the second input parameter is the range of numbers you want to pick up from. For example, if you plan to find out all 2 times table from <code>1,2,3,...,12</code>, just call <code>findthetable(2, 12)</code></p>\n\n<pre><code>def findthetable(num_times, num_range): \n    result = [ num_times* i for i in range(1, num_range//num_times + 1) ]\n    return result\n\nprint (findthetable(2, 12))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 173, "user_id": 6070716, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a2495014b76dc04f6663382a93d3c71b?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Vasistha", "link": "https://stackoverflow.com/users/6070716/robert-vasistha"}, "is_accepted": false, "score": 0, "last_activity_date": 1458207115, "last_edit_date": 1458207115, "creation_date": 1458204993, "answer_id": 36055678, "question_id": 36048592, "link": "https://stackoverflow.com/questions/36048592/multiplication-table-program-wont-work/36055678#36055678", "title": "Multiplication Table program won&#39;t work", "body": "<p>This is how I made my multiplication table recently:</p>\n\n<pre><code>def MulTable():\nn=int(input('Please enter a positive integer between 1 and 15: '))\nfor row in range(1,n+1):\n    print(*(\"{:3}\".format(row*col) for col in range(1, n+1)))\n</code></pre>\n\n<p><code>MulTable()</code></p>\n"}, {"comments": [{"owner": {"reputation": 49, "user_id": 5319918, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e3c2b800b70d26bff11653d7e970f693?s=128&d=identicon&r=PG", "display_name": "BlizzardGizzard", "link": "https://stackoverflow.com/users/5319918/blizzardgizzard"}, "edited": false, "score": 0, "creation_date": 1458289063, "post_id": 36057773, "comment_id": 59803347, "body": "I have to use skills that we&#39;ve learnt in class and I can&#39;t exactly use these as they look a bit ahead of my skill range for my knowledge of Python."}, {"owner": {"reputation": 49, "user_id": 5319918, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e3c2b800b70d26bff11653d7e970f693?s=128&d=identicon&r=PG", "display_name": "BlizzardGizzard", "link": "https://stackoverflow.com/users/5319918/blizzardgizzard"}, "edited": false, "score": 0, "creation_date": 1458289594, "post_id": 36057773, "comment_id": 59803597, "body": "What I&#39;m trying to get is my code edited so that it works."}, {"owner": {"reputation": 405, "user_id": 4350349, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/GhnLJ.jpg?s=128&g=1", "display_name": "benSooraj", "link": "https://stackoverflow.com/users/4350349/bensooraj"}, "reply_to_user": {"reputation": 49, "user_id": 5319918, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e3c2b800b70d26bff11653d7e970f693?s=128&d=identicon&r=PG", "display_name": "BlizzardGizzard", "link": "https://stackoverflow.com/users/5319918/blizzardgizzard"}, "edited": false, "score": 0, "creation_date": 1458296420, "post_id": 36057773, "comment_id": 59807907, "body": "Hey @BlizzardGizzard, I&#39;ve modified your code for it to work. But , do take out time to understand the other two examples. Finally, if you think that this answers this question, please accept the answer :)"}, {"owner": {"reputation": 49, "user_id": 5319918, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e3c2b800b70d26bff11653d7e970f693?s=128&d=identicon&r=PG", "display_name": "BlizzardGizzard", "link": "https://stackoverflow.com/users/5319918/blizzardgizzard"}, "edited": false, "score": 0, "creation_date": 1458317485, "post_id": 36057773, "comment_id": 59822691, "body": "Thanks so much, really appreciate you taking your time to respond. =)"}, {"owner": {"reputation": 405, "user_id": 4350349, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/GhnLJ.jpg?s=128&g=1", "display_name": "benSooraj", "link": "https://stackoverflow.com/users/4350349/bensooraj"}, "reply_to_user": {"reputation": 49, "user_id": 5319918, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e3c2b800b70d26bff11653d7e970f693?s=128&d=identicon&r=PG", "display_name": "BlizzardGizzard", "link": "https://stackoverflow.com/users/5319918/blizzardgizzard"}, "edited": false, "score": 0, "creation_date": 1458319989, "post_id": 36057773, "comment_id": 59824374, "body": "I am glad I could help!"}], "tags": [], "owner": {"reputation": 405, "user_id": 4350349, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/GhnLJ.jpg?s=128&g=1", "display_name": "benSooraj", "link": "https://stackoverflow.com/users/4350349/bensooraj"}, "is_accepted": true, "score": 1, "last_activity_date": 1458296340, "last_edit_date": 1458296340, "creation_date": 1458210441, "answer_id": 36057773, "question_id": 36048592, "link": "https://stackoverflow.com/questions/36048592/multiplication-table-program-wont-work/36057773#36057773", "title": "Multiplication Table program won&#39;t work", "body": "<p>There are few ways I can think of.</p>\n\n<p><strong>1) List comprehension</strong></p>\n\n<pre><code>&gt;&gt; n = int(input(\"Please enter a number to find the times tables:\"))\n&gt;&gt; [\"{0} X {1} =&gt; {2}\".format(n, i, n*i) for i in range(1,13)]\n\n['2 X 1 =&gt; 2', '2 X 2 =&gt; 4', '2 X 3 =&gt; 6', '2 X 4 =&gt; 8', '2 X 5 =&gt; 10', '2 X 6 =&gt; 12', '2 X 7 =&gt; 14', '2 X 8 =&gt; 16', '2 X 9 =&gt; 18', '2 X 10 =&gt; 20', '2 X 11 =&gt; 22', '2 X 12 =&gt; 24']\n</code></pre>\n\n<p>wrapped around a function it should look like this:</p>\n\n<pre><code>def multiTable(n)\n    tableList = [\"{0} X {1} =&gt; {2}\".format(n, i, n*i) for i in range(1,13)]\n    for _ in tableList:\n        print(_)\n\n&gt;&gt; n = int(input(\"Please enter a number to find the times tables:\"))\n## Assuming n = 2\n&gt;&gt; multiTable(n)\n\n2 X 1 =&gt; 2\n2 X 2 =&gt; 4\n2 X 3 =&gt; 6\n2 X 4 =&gt; 8\n2 X 5 =&gt; 10\n2 X 6 =&gt; 12\n2 X 7 =&gt; 14\n2 X 8 =&gt; 16\n2 X 9 =&gt; 18\n2 X 10 =&gt; 20\n2 X 11 =&gt; 22\n2 X 12 =&gt; 24\n</code></pre>\n\n<p><strong>2) Yield</strong></p>\n\n<pre><code>def multiTable(n)\n    for _ in range(1, 13):\n        yield n*_\n\n&gt;&gt; n = int(input(\"Please enter a number to find the times tables:\"))\n## Assuming n = 2\n&gt;&gt; for i in multiTable(n): print(i)\n 2\n 4\n 6\n 8\n 10\n 12\n 14\n 16\n 18\n 20\n 22\n 24\n</code></pre>\n\n<p>I know this one is a useless example for demonstrating the power of <code>yield</code>; still good for learning.</p>\n\n<p>And finally, <strong>your code</strong> modified:</p>\n\n<pre><code>def findthetable(multi):\n    # table = tablechoice\n    # table = int()\n    table = int(multi)\n    one = table * 1\n    two = table * 2\n    three = table * 3\n    four = table * 4\n    five = table * 5\n    six = table * 6\n    seven = table * 7\n    eight = table * 8\n    nine = table * 9\n    ten = table * 10\n    eleven = table * 11\n    twelve = table * 12\n\n    multi = [one,two,three,four,five,six,seven,eight,nine,ten,eleven,twelve]\n    print(multi)\n\n    return multi\n\n&gt;&gt;&gt; tablechoice = input(\"Please enter a number that you would like to find the times tables for: \")\n&gt;&gt;&gt; findthetable(tablechoice)\n2\n4\n6\n8\n10\n12\n14\n16\n18\n20\n22\n24\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 5319918, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e3c2b800b70d26bff11653d7e970f693?s=128&d=identicon&r=PG", "display_name": "BlizzardGizzard", "link": "https://stackoverflow.com/users/5319918/blizzardgizzard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 36057773, "answer_count": 3, "score": 0, "last_activity_date": 1458296340, "creation_date": 1458169253, "last_edit_date": 1458169505, "question_id": 36048592, "link": "https://stackoverflow.com/questions/36048592/multiplication-table-program-wont-work", "title": "Multiplication Table program won&#39;t work", "body": "<p>I'm trying to implement a program that uses functions or a function to find the multiplications of a number (which the user has to pick) from one to twelve. For instance; the 'two times' tables: <code>2, 4, 6, 8, 10, etc.</code></p>\n\n<p>My current code is: </p>\n\n<pre><code>def findthetable(multi):\n    table = tablechoice\n    table = int()\n    one = table * 1\n    two = table * 2\n    three = table * 3\n    four = table * 4\n    five = table * 5\n    six = table * 6\n    seven = table * 7\n    eight = table * 8\n    nine = table * 9\n    ten = table * 10\n    eleven = table * 11\n    twelve = table * 12\n\n    multi = [one,two,three,four,five,six,seven,eight,nine,ten,eleven,twelve]\n    print(multi)\n\n    return multi\n\ntablechoice = int(input(\"Please enter a number that you would like to find the times tables for: \")\n</code></pre>\n"}, {"tags": ["python", "windows"], "comments": [{"owner": {"reputation": 4676, "user_id": 30105, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/a1dc4bddf38de8351ae70e98845242e9?s=128&d=identicon&r=PG", "display_name": "PyNEwbie", "link": "https://stackoverflow.com/users/30105/pynewbie"}, "edited": false, "score": 0, "creation_date": 1458168659, "post_id": 36048399, "comment_id": 59745344, "body": "you can using task scheduler and this question should be on SuperUser as that is probably the better match"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 2, "creation_date": 1458168948, "post_id": 36048399, "comment_id": 59745471, "body": "You can <code>ShellExecute</code> the interpreter with the <code>&quot;runas&quot;</code> command to restart the script as an elevated process. But that involves a UAC prompt. The only way to do this silently is with a task or service. You can create and run a task via schtasks.exe, but the script will have to be elevated on the first run in order to create the task."}, {"owner": {"reputation": 75, "user_id": 4443135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/463e151e31de795e932b2b83bb80dac4?s=128&d=identicon&r=PG&f=1", "display_name": "British Chap Named Charles", "link": "https://stackoverflow.com/users/4443135/british-chap-named-charles"}, "edited": false, "score": 0, "creation_date": 1458169822, "post_id": 36048399, "comment_id": 59745800, "body": "For this case, I do not mind if there is a UAC prompt. I assume you mean the pywin32 module for ShellExecute?"}, {"owner": {"reputation": 75, "user_id": 4443135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/463e151e31de795e932b2b83bb80dac4?s=128&d=identicon&r=PG&f=1", "display_name": "British Chap Named Charles", "link": "https://stackoverflow.com/users/4443135/british-chap-named-charles"}, "edited": false, "score": 2, "creation_date": 1458170416, "post_id": 36048399, "comment_id": 59746040, "body": "I feel ridiculous right now after spending ages finding the answer for this. I have finally been able to launch a python script with administrator privileges with ShellExecute like eryksun said. Thank you."}], "owner": {"reputation": 75, "user_id": 4443135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/463e151e31de795e932b2b83bb80dac4?s=128&d=identicon&r=PG&f=1", "display_name": "British Chap Named Charles", "link": "https://stackoverflow.com/users/4443135/british-chap-named-charles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 568, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1458168368, "creation_date": 1458168368, "question_id": 36048399, "link": "https://stackoverflow.com/questions/36048399/is-it-possible-to-run-a-python-script-as-an-administrator-programatically-on-win", "title": "Is it possible to run a python script as an administrator programatically on Windows 7?", "body": "<p>I am facing a problem which I cannot seem to solve after trying nearly everything. </p>\n\n<p>I need to have a python script to run with administrator privileges, without the use of cmd and without the script being converted into an executable.\nIs there any way to programatically do this? I am using python 3.4.3\nSorry if this sounds like a silly question.\nThanks.</p>\n\n<p>-Charles</p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"comments": [{"owner": {"reputation": 6913, "user_id": 835002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ozD8t.png?s=128&g=1", "display_name": "Steinar Lima", "link": "https://stackoverflow.com/users/835002/steinar-lima"}, "edited": false, "score": 0, "creation_date": 1458170094, "post_id": 36048422, "comment_id": 59745898, "body": "Be aware that since this is Python3, <code>map</code> returns an iterator, not a list. If you want lists, you may want to wrap the <code>map</code> inside a <code>list</code> statement, i.e. <code>list(map(int, ..etc.))</code>"}, {"owner": {"reputation": 2895, "user_id": 3412611, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/bPsp8.jpg?s=128&g=1", "display_name": "Tony Babarino", "link": "https://stackoverflow.com/users/3412611/tony-babarino"}, "reply_to_user": {"reputation": 6913, "user_id": 835002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ozD8t.png?s=128&g=1", "display_name": "Steinar Lima", "link": "https://stackoverflow.com/users/835002/steinar-lima"}, "edited": false, "score": 0, "creation_date": 1458173347, "post_id": 36048422, "comment_id": 59747026, "body": "Good point, I&#39;ve checked the code only in python2. Thanks for that, fixed the answer.."}], "tags": [], "owner": {"reputation": 2895, "user_id": 3412611, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/bPsp8.jpg?s=128&g=1", "display_name": "Tony Babarino", "link": "https://stackoverflow.com/users/3412611/tony-babarino"}, "is_accepted": true, "score": 2, "last_activity_date": 1458173283, "last_edit_date": 1458173283, "creation_date": 1458168457, "answer_id": 36048422, "question_id": 36048385, "link": "https://stackoverflow.com/questions/36048385/convert-value-of-dictionary-as-a-list/36048422#36048422", "title": "Convert value of dictionary as a list?", "body": "<pre><code>&gt;&gt;&gt; a\n'Female:18,36,35,49,19,19,40,23,22,22,23,18,36,35,49,19,19,18,36,18,36,35,12,19,19,18,23,22,22,23'\n&gt;&gt;&gt; a.split(':')\n['Female', '18,36,35,49,19,19,40,23,22,22,23,18,36,35,49,19,19,18,36,18,36,35,12,19,19,18,23,22,22,23']\n&gt;&gt;&gt; a.split(':')[1].split(',')\n['18', '36', '35', '49', '19', '19', '40', '23', '22', '22', '23', '18', '36', '35', '49', '19', '19', '18', '36', '18', '36', '35', '12', '19', '19', '18', '23', '22', '22', '23']\n&gt;&gt;&gt; new_dictionary = dict({a.split(':')[0]:map(int,a.split(':')[1].split(','))}) \n&gt;&gt;&gt; new_dictionary\n{'Female': [18, 36, 35, 49, 19, 19, 40, 23, 22, 22, 23, 18, 36, 35, 49, 19, 19, 18, 36, 18, 36, 35, 12, 19, 19, 18, 23, 22, 22, 23]}\n</code></pre>\n\n<p>Applying that to Your code:</p>\n\n<pre><code>file = open(\"age_gender.txt\")\n   contents = file.read().splitlines()\n   new_dictionary = dict()\n   for item in contents:\n       tmp = item.split(':')\n       new_dictionary[tmp[0]] = list(map(int, tmp[1].split(',')))\n\nreturn new_dictionary\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2559, "user_id": 2660970, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/31deb30c1f8cf14c92fdf597e38568a8?s=128&d=identicon&r=PG", "display_name": "ig-melnyk", "link": "https://stackoverflow.com/users/2660970/ig-melnyk"}, "is_accepted": false, "score": 1, "last_activity_date": 1458168534, "creation_date": 1458168534, "answer_id": 36048440, "question_id": 36048385, "link": "https://stackoverflow.com/questions/36048385/convert-value-of-dictionary-as-a-list/36048440#36048440", "title": "Convert value of dictionary as a list?", "body": "<p>You need to split this dictionary value by \",\" and then map it to int:</p>\n\n<pre><code>s['Female'] = map(int, s['Female'].split(','))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 108, "user_id": 6051898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zR9ox.png?s=128&g=1", "display_name": "Thomas Zumsteg", "link": "https://stackoverflow.com/users/6051898/thomas-zumsteg"}, "reply_to_user": {"reputation": 478030, "user_id": 279627, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2dceea858ad8f1577bec6ddaa0485d15?s=128&d=identicon&r=PG", "display_name": "Sven Marnach", "link": "https://stackoverflow.com/users/279627/sven-marnach"}, "edited": false, "score": 0, "creation_date": 1458169186, "post_id": 36048533, "comment_id": 59745572, "body": "Yes I do, @SvenMarnach thanks for the note."}], "tags": [], "owner": {"reputation": 108, "user_id": 6051898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zR9ox.png?s=128&g=1", "display_name": "Thomas Zumsteg", "link": "https://stackoverflow.com/users/6051898/thomas-zumsteg"}, "is_accepted": false, "score": 2, "last_activity_date": 1458169156, "last_edit_date": 1458169156, "creation_date": 1458168909, "answer_id": 36048533, "question_id": 36048385, "link": "https://stackoverflow.com/questions/36048385/convert-value-of-dictionary-as-a-list/36048533#36048533", "title": "Convert value of dictionary as a list?", "body": "<p>You've go the basics down, the remaining steps are:</p>\n\n<ul>\n<li>splitting the value on commas <code>split(',')</code></li>\n<li>Converting the string into an integer <code>int(i)</code></li>\n</ul>\n\n<p>Wrap these steps in a <code>for</code> loop and do it for every key/value pair the dictionary.</p>\n\n<pre><code>for key, value in new_dictionary.items():\n    new_dictionary[key] = [int(i) for i in value.split(',')]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 24659, "user_id": 218857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7bb7dc1a88a8cb1f8025ebec86b2db1?s=128&d=identicon&r=PG", "display_name": "Sandeep", "link": "https://stackoverflow.com/users/218857/sandeep"}, "edited": false, "score": 0, "creation_date": 1458170936, "post_id": 36048719, "comment_id": 59746220, "body": "Very good. i like this approach."}], "tags": [], "owner": {"reputation": 74709, "user_id": 21945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/631470ecb1d4fe8bd3be6d7e0dfe4449?s=128&d=identicon&r=PG", "display_name": "mhawke", "link": "https://stackoverflow.com/users/21945/mhawke"}, "is_accepted": false, "score": 2, "last_activity_date": 1458169853, "creation_date": 1458169853, "answer_id": 36048719, "question_id": 36048385, "link": "https://stackoverflow.com/questions/36048385/convert-value-of-dictionary-as-a-list/36048719#36048719", "title": "Convert value of dictionary as a list?", "body": "<p>Here is another way to do it using <a href=\"https://docs.python.org/3/library/ast.html#ast.literal_eval\" rel=\"nofollow\"><code>ast.literal_eval</code></a> to convert the ages into a Python list. It has the advantage of supporting all basic data types, e.g. float, without explicit conversion:</p>\n\n<pre><code>from ast import literal_eval\n\nwith open('age_gender.txt') as f:\n    d = {gender: literal_eval(ages) for gender, ages in (line.split(':') for line in f)}\n</code></pre>\n\n<p>This will produce a dictionary with tuples as values:</p>\n\n<pre>\n{'Male': (23, 22, 26, 26, 26), 'Female': (18, 36, 35, 49, 19)}\n</pre>\n\n<p>If you really, really need lists, you can convert the tuples:</p>\n\n<pre><code>with open('age_gender.txt') as f:\n    d = {gender: list(literal_eval(ages)) for gender, ages in (line.split(':') for line in f)}\n</code></pre>\n\n<pre>\n{'Male': [23, 22, 26, 26, 26], 'Female': [18, 36, 35, 49, 19]}\n</pre>\n"}], "owner": {"reputation": 57, "user_id": 5911049, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37b9ff8d41cd5be5fcb88e15b440afed?s=128&d=identicon&r=PG&f=1", "display_name": "Co.Coo", "link": "https://stackoverflow.com/users/5911049/co-coo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "closed_date": 1459024689, "accepted_answer_id": 36048422, "answer_count": 4, "score": 3, "last_activity_date": 1458173283, "creation_date": 1458168283, "last_edit_date": 1458169001, "question_id": 36048385, "link": "https://stackoverflow.com/questions/36048385/convert-value-of-dictionary-as-a-list", "closed_reason": "Duplicate", "title": "Convert value of dictionary as a list?", "body": "<p>Let's say I was given with this text <code>age_gender.txt</code></p>\n\n<pre><code>Female:18,36,35,49,19\nMale:23,22,26,26,26\n</code></pre>\n\n<p>Here's the code I have so far</p>\n\n<pre><code>file = open(\"age_gender.txt\")\n   contents = file.read().splitlines()\n   new_dictionary = dict(item.split(\":\") for item in contents)\n\nreturn new_dictionary\n</code></pre>\n\n<p>When I call the function <code>readfile()</code> this is the output I get, however the list of value is still in quotation marks. How do you convert that each value into a list? </p>\n\n<pre><code>{'Female': '18,36,35,49,19', 'Male': '23,22,26,26,26'}\n</code></pre>\n\n<p>The output I want to achieve is something like this</p>\n\n<pre><code>{'Female': [18,36,35,49,19], 'Male': [23,22,26,26,26]}\n</code></pre>\n"}, {"tags": ["python", "web-services", "soap"], "comments": [{"owner": {"reputation": 1205, "user_id": 3194712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f89dab402d2e542594c66d57fe9e6dcc?s=128&d=identicon&r=PG&f=1", "display_name": "user3194712", "link": "https://stackoverflow.com/users/3194712/user3194712"}, "edited": false, "score": 0, "creation_date": 1458169282, "post_id": 36048384, "comment_id": 59745600, "body": "Have you checked that the <code>listOfObjects</code> is not empty right before the for loop? ie.. can you print <code>listOfObjects</code> right before the for loop?"}, {"owner": {"reputation": 415, "user_id": 3424085, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/0b4e6f73fc4a18b8c285206aa5625165?s=128&d=identicon&r=PG&f=1", "display_name": "Lloyd", "link": "https://stackoverflow.com/users/3424085/lloyd"}, "reply_to_user": {"reputation": 1205, "user_id": 3194712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f89dab402d2e542594c66d57fe9e6dcc?s=128&d=identicon&r=PG&f=1", "display_name": "user3194712", "link": "https://stackoverflow.com/users/3194712/user3194712"}, "edited": false, "score": 0, "creation_date": 1458169852, "post_id": 36048384, "comment_id": 59745810, "body": "thanks @user3194712 but yes I&#39;ve checked that and the for loop still isn&#39;t being run :/"}, {"owner": {"reputation": 415, "user_id": 3424085, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/0b4e6f73fc4a18b8c285206aa5625165?s=128&d=identicon&r=PG&f=1", "display_name": "Lloyd", "link": "https://stackoverflow.com/users/3424085/lloyd"}, "reply_to_user": {"reputation": 1205, "user_id": 3194712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f89dab402d2e542594c66d57fe9e6dcc?s=128&d=identicon&r=PG&f=1", "display_name": "user3194712", "link": "https://stackoverflow.com/users/3194712/user3194712"}, "edited": false, "score": 0, "creation_date": 1458170245, "post_id": 36048384, "comment_id": 59745968, "body": "actually no what am I talking about.. the list is empty before the for loop! :O so is the SOAP call taking the delcaration value of listOfObjects which is empty and not the listOfObjects which is being used in the program...?"}, {"owner": {"reputation": 415, "user_id": 3424085, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/0b4e6f73fc4a18b8c285206aa5625165?s=128&d=identicon&r=PG&f=1", "display_name": "Lloyd", "link": "https://stackoverflow.com/users/3424085/lloyd"}, "reply_to_user": {"reputation": 1205, "user_id": 3194712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f89dab402d2e542594c66d57fe9e6dcc?s=128&d=identicon&r=PG&f=1", "display_name": "user3194712", "link": "https://stackoverflow.com/users/3194712/user3194712"}, "edited": false, "score": 0, "creation_date": 1458170908, "post_id": 36048384, "comment_id": 59746213, "body": "the list is being populated without any SOAP call... so when a single SOAP call is made to that function the listOfObjects list is empty for some reason.. I don&#39;t understand why it hasn&#39;t got the stored objects in it which had been appended to the list using a normal function call (not a SOAP call)"}], "owner": {"reputation": 415, "user_id": 3424085, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/0b4e6f73fc4a18b8c285206aa5625165?s=128&d=identicon&r=PG&f=1", "display_name": "Lloyd", "link": "https://stackoverflow.com/users/3424085/lloyd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1458172630, "creation_date": 1458168273, "last_edit_date": 1458172630, "question_id": 36048384, "link": "https://stackoverflow.com/questions/36048384/soap-call-to-function-unable-to-enter-for-loop-python", "title": "SOAP call to function unable to enter &#39;for&#39; loop (Python)", "body": "<p>My <code>SOAP</code> client calls a function where a list (<code>listOfObjects</code>) of objects is traversed in a <code>for</code> loop and it's attributes are appended to a new list, <code>listOfItems</code>. However when I run this SOAP call the <code>for</code> loop is never entered so the function just returns an empty list. If I give the <code>for</code> loop a normal list of strings to iterate over then it will do so perfectly fine. However it doesn't seem to want to iterate over a list of objects. Also, when I run the function without <code>SOAP</code> the <code>for</code> loop is entered with no problem. Does anyone know why this is happening when doing a <code>SOAP</code> call? Here is the code:</p>\n\n<pre><code>@srpc(String, _returns=Iterable(Unicode))\ndef displayItems(name):\n    listOfItems = []\n    global listOfObjects\n    for i, o in enumerate(listOfObjects):\n        listOfItems.append(\"%s %s %s %s\" %(o.ID,o.townName,o.townLocation[0],o.townLocation[1]))                                \n    return listOfItems\n</code></pre>\n\n<p>I realised that the problem is that my SOAP call is using a new 'fresh' object to access the function and subsuquently the list... now I need to know how to import the object used in a file to the SOAP client file where the SOAP call to the function is made.</p>\n"}, {"tags": ["python", "ironpython", "dllimport", "python-import"], "comments": [{"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1458169247, "post_id": 36048321, "comment_id": 59745591, "body": "I&#39;ve never heard of such a thing before. The only times comments are meaningful in Python is at the very top of the file, where the first two lines can have significance. The first line may be a &quot;shebang&quot; line specifying the interpreter to run (e.g. <code>#!&#47;usr&#47;bin&#47;env python3</code>). That&#39;s mostly used by external tools to find the right interpreter to use for a script, but also by the <code>py.exe</code> launcher for Windows. The first or second line can also specify the source file&#39;s encoding, as described in <a href=\"https://www.python.org/dev/peps/pep-0263/\" rel=\"nofollow noreferrer\">PEP 263</a>. Otherwise a comment is just a comment, I think."}, {"owner": {"reputation": 927, "user_id": 5220640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1314995621c1b3ea44cc9110eab67e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Tuffwer", "link": "https://stackoverflow.com/users/5220640/tuffwer"}, "reply_to_user": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1458169400, "post_id": 36048321, "comment_id": 59745646, "body": "@Blckknght That&#39;s what I thought too!  But I can&#39;t argue with what&#39;s happening.  It was broken, I added that line and it&#39;s not broken anymore.  Like I said it could be something in that custom pre-compiled IronPython interpreter that&#39;s being used here, in which case I may have to try to hunt up whomever put that together and ask. Thanks for that link"}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1458170501, "post_id": 36048321, "comment_id": 59746066, "body": "If that was standard in IronPython I would expect it to be documented here; <a href=\"https://ironpython-test.readthedocs.org/en/latest/reference/lexical_analysis.html\" rel=\"nofollow noreferrer\">ironpython-test.readthedocs.org/en/latest/reference/&hellip;</a> but it isn&#39;t."}], "answers": [{"comments": [{"owner": {"reputation": 927, "user_id": 5220640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1314995621c1b3ea44cc9110eab67e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Tuffwer", "link": "https://stackoverflow.com/users/5220640/tuffwer"}, "edited": false, "score": 0, "creation_date": 1458245075, "post_id": 36057437, "comment_id": 59787399, "body": "Yeah, it must be defined somewhere written into our stuff then, Thanks!"}], "tags": [], "owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "is_accepted": true, "score": 1, "last_activity_date": 1458209570, "creation_date": 1458209570, "answer_id": 36057437, "question_id": 36048321, "link": "https://stackoverflow.com/questions/36048321/what-does-using-dll-file-do-in-python/36057437#36057437", "title": "What does #using dll_file do in python", "body": "<p><code>#using</code> is just a comment. Even in IronPython.</p>\n"}], "owner": {"reputation": 927, "user_id": 5220640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1314995621c1b3ea44cc9110eab67e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Tuffwer", "link": "https://stackoverflow.com/users/5220640/tuffwer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 36057437, "answer_count": 1, "score": 0, "last_activity_date": 1458209570, "creation_date": 1458167928, "question_id": 36048321, "link": "https://stackoverflow.com/questions/36048321/what-does-using-dll-file-do-in-python", "title": "What does #using dll_file do in python", "body": "<p>I was recently working with a python script that made use of a dll file that was originally written in c++.  The python script had this import line at the top of it:</p>\n\n<pre><code>from mycustomdll import *\n</code></pre>\n\n<p>However whenever I ran the script it complained about not being able to find the package mycustomdll.  I looked in another script that also used the dll and saw the following line at the top.</p>\n\n<pre><code>#using mycustomdll\n</code></pre>\n\n<p>I added this line to the top of the first file and the python scrypt then ran without issue. A colleague guessed that the #using line was acting sort of as a namespace declaration.  Another possible explanation I have is that it's behaving as a sort of pre-processor directive to the python interpreter.</p>\n\n<p><strong>What exactly does #using do to expose the dll file to python for importing?</strong></p>\n\n<p>bonus question(s): Does python even have special keywords like this that override the standard behavior of # as a comment? If so what are they (is there a list somewhere I can peruse?) </p>\n\n<p>We are using a custom subset of pre-compiled IronPython packages for our build environment, some of which may have been written in house so I can't dismiss the possibility this is not standard behavior.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1577, "user_id": 4065182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df3e28abd04df5a6679c79907d42ba91?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisC73", "link": "https://stackoverflow.com/users/4065182/chrisc73"}, "edited": false, "score": 0, "creation_date": 1458168355, "post_id": 36048314, "comment_id": 59745228, "body": "I suggest you should first understand the definition of &#39;epoch time&#39;. From there your solution flows naturally."}, {"owner": {"reputation": 23980, "user_id": 1735756, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SloZJ.jpg?s=128&g=1", "display_name": "Haifeng Zhang", "link": "https://stackoverflow.com/users/1735756/haifeng-zhang"}, "edited": false, "score": 0, "creation_date": 1458169016, "post_id": 36048314, "comment_id": 59745502, "body": "check it here <a href=\"http://stackoverflow.com/questions/8777753/converting-datetime-date-to-utc-timestamp-in-python\" title=\"converting datetime date to utc timestamp in python\">stackoverflow.com/questions/8777753/&hellip;</a>"}, {"owner": {"reputation": 561, "user_id": 5063127, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/aa46f899fbfac039642a857a833ba17c?s=128&d=identicon&r=PG&f=1", "display_name": "Observer", "link": "https://stackoverflow.com/users/5063127/observer"}, "reply_to_user": {"reputation": 1577, "user_id": 4065182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df3e28abd04df5a6679c79907d42ba91?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisC73", "link": "https://stackoverflow.com/users/4065182/chrisc73"}, "edited": false, "score": 0, "creation_date": 1458169070, "post_id": 36048314, "comment_id": 59745524, "body": "@ChrisC73 I agree that I am new to epoch time. But I have read about that and felt that i know a little about it. I didn&#39;t get why you are saying that."}, {"owner": {"reputation": 561, "user_id": 5063127, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/aa46f899fbfac039642a857a833ba17c?s=128&d=identicon&r=PG&f=1", "display_name": "Observer", "link": "https://stackoverflow.com/users/5063127/observer"}, "reply_to_user": {"reputation": 23980, "user_id": 1735756, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SloZJ.jpg?s=128&g=1", "display_name": "Haifeng Zhang", "link": "https://stackoverflow.com/users/1735756/haifeng-zhang"}, "edited": false, "score": 0, "creation_date": 1458169418, "post_id": 36048314, "comment_id": 59745656, "body": "@haifzhan how does that answer my question?"}, {"owner": {"reputation": 1577, "user_id": 4065182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df3e28abd04df5a6679c79907d42ba91?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisC73", "link": "https://stackoverflow.com/users/4065182/chrisc73"}, "edited": false, "score": 1, "creation_date": 1458169813, "post_id": 36048314, "comment_id": 59745797, "body": "@Observer: Or not so naturally, perhaps. Epoch is in seconds =&gt; convert datetime to epoch and do your arithmetic."}, {"owner": {"reputation": 23980, "user_id": 1735756, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SloZJ.jpg?s=128&g=1", "display_name": "Haifeng Zhang", "link": "https://stackoverflow.com/users/1735756/haifeng-zhang"}, "edited": false, "score": 0, "creation_date": 1458170894, "post_id": 36048314, "comment_id": 59746206, "body": "@Observer  because you cannot use epoch time minus datetime. You haveto convert datetime to epoch and then do the math"}], "answers": [{"tags": [], "owner": {"reputation": 23980, "user_id": 1735756, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SloZJ.jpg?s=128&g=1", "display_name": "Haifeng Zhang", "link": "https://stackoverflow.com/users/1735756/haifeng-zhang"}, "is_accepted": true, "score": 1, "last_activity_date": 1458171189, "last_edit_date": 1458171189, "creation_date": 1458169602, "answer_id": 36048668, "question_id": 36048314, "link": "https://stackoverflow.com/questions/36048314/difference-between-epoch-time-and-normal-date-in-seconds-python/36048668#36048668", "title": "Difference between epoch time and normal date in seconds - python", "body": "<p>You have to convert datetime to epoch time, and then do the arithmetic subtraction.</p>\n\n<p>As you said you are always use UTC time, you need to use <code>calendar.timegm()</code>  because it takes UTC time as parameter.</p>\n\n<pre><code>import time\nimport datetime\nimport calendar\n\nTIME_FORMAT = '%Y-%m-%d %H:%M:%S'\n\ndef local_datetime_2_timestamp(local_datetime):\n    '''strptime takes local datetime as parameter'''\n    timestamp = str(time.mktime(datetime.datetime.\n        strptime(local_datetime, TIME_FORMAT).timetuple()))[:-2]\n    return timestamp\n\ndef utc_2_timestamp(utc_datetime):\n    '''timegm takes UTC time as parameter'''\n    return calendar.timegm(utc_datetime.timetuple())\n\nprint local_datetime_2_timestamp(\"2016-03-10 00:06:21.903\".split(\".\")[0])\nprint utc_2_timestamp(datetime.datetime(2016,3,10,0,6,21))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23980, "user_id": 1735756, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SloZJ.jpg?s=128&g=1", "display_name": "Haifeng Zhang", "link": "https://stackoverflow.com/users/1735756/haifeng-zhang"}, "edited": false, "score": 0, "creation_date": 1458171410, "post_id": 36048794, "comment_id": 59746391, "body": "<code>This is the inverse function of localtime(). Its argument is the struct_time or full 9-tuple (since the dst flag is needed; use -1 as the dst flag if it is unknown) which expresses the time in local time, not UTC.</code> quoted from python documents"}, {"owner": {"reputation": 4987, "user_id": 3100515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dZSlO.jpg?s=128&g=1", "display_name": "Ajean", "link": "https://stackoverflow.com/users/3100515/ajean"}, "edited": false, "score": 0, "creation_date": 1458176502, "post_id": 36048794, "comment_id": 59747891, "body": "While this code may answer the question, providing additional context regarding why and/or how this code answers the question improves its long-term value."}], "tags": [], "owner": {"reputation": 11, "user_id": 2619309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02d86d93ed69438424f1bf42a8b6861b?s=128&d=identicon&r=PG", "display_name": "lpszBar", "link": "https://stackoverflow.com/users/2619309/lpszbar"}, "is_accepted": false, "score": 0, "last_activity_date": 1458171005, "last_edit_date": 1458171005, "creation_date": 1458170195, "answer_id": 36048794, "question_id": 36048314, "link": "https://stackoverflow.com/questions/36048314/difference-between-epoch-time-and-normal-date-in-seconds-python/36048794#36048794", "title": "Difference between epoch time and normal date in seconds - python", "body": "<pre><code>from time import mktime, strptime\n\ndate_a = '20-01-2015 11:05:02'\nepoch_b = 1457586692\n\nepoch_a = int(mktime(strptime(date_a, '%d-%m-%Y %H:%M:%S')))\n\nprint(epoch_a - epoch_b)\n</code></pre>\n"}], "owner": {"reputation": 561, "user_id": 5063127, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/aa46f899fbfac039642a857a833ba17c?s=128&d=identicon&r=PG&f=1", "display_name": "Observer", "link": "https://stackoverflow.com/users/5063127/observer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1327, "favorite_count": 0, "accepted_answer_id": 36048668, "answer_count": 2, "score": -1, "last_activity_date": 1458171189, "creation_date": 1458167903, "question_id": 36048314, "link": "https://stackoverflow.com/questions/36048314/difference-between-epoch-time-and-normal-date-in-seconds-python", "title": "Difference between epoch time and normal date in seconds - python", "body": "<p>I have two variables : One is epoch time and other is normal datetime,</p>\n\n<pre><code>df['epochtime']\n\n0       1457586382\n1       1457586382\n2       1457586391\n3       1457586692\n4       1457586391\n5       1457586391\n6       1457586692\n7       1457586692\n8       1457572611\n\ndf['time']\n0      2016-03-10 00:06:21.903\n1      2016-03-10 00:06:21.908\n2      2016-03-10 00:06:30.895\n3      2016-03-10 00:06:30.895\n4      2016-03-10 00:06:30.899\n5      2016-03-10 00:06:30.899\n6      2016-03-10 00:06:31.045\n7      2016-03-10 00:06:31.094\n8      2016-03-10 01:16:51.390 \n</code></pre>\n\n<p>I want the difference between these two times in seconds. The following is my trying,</p>\n\n<pre><code>pd.to_datetime(df['epochtime'], unit ='s' ) - df['time']\n</code></pre>\n\n<p>The following is my output,</p>\n\n<pre><code>0               00:00:00.097000\n1               00:00:00.092000\n2               00:00:00.105000\n3               00:05:01.105000\n4               00:00:00.101000\n5               00:00:00.101000\n6               00:05:00.955000\n7               00:05:00.906000\n8      -1 days +23:59:59.610000   \n</code></pre>\n\n<p>I want to make this as integer in seconds. Also for the 8th value for some strange reason getting difference as -1 days, where it should be seconds only. Can anybody help me getting the seconds difference as integer ?</p>\n"}, {"tags": ["python", "string", "dictionary", "replace"], "comments": [{"owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "edited": false, "score": 0, "creation_date": 1458168089, "post_id": 36048303, "comment_id": 59745113, "body": "You return from your first loop iteration, thus never reach key <code>p</code>"}], "answers": [{"tags": [], "owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "is_accepted": true, "score": 0, "last_activity_date": 1458168226, "creation_date": 1458168226, "answer_id": 36048372, "question_id": 36048303, "link": "https://stackoverflow.com/questions/36048303/using-dictionary-to-modify-list-values/36048372#36048372", "title": "Using dictionary to modify list values", "body": "<p>You should not return from the first iteration. You could improve it like so</p>\n\n<pre><code>def ampm(value):\n    for k,v in dict1.items():\n        value = value.replace(k,v)\n    return value\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 5762225, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153214934866646/picture?type=large", "display_name": "V\u0169 Nam H\u01b0ng", "link": "https://stackoverflow.com/users/5762225/v%c5%a9-nam-h%c6%b0ng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21, "favorite_count": 0, "accepted_answer_id": 36048372, "answer_count": 1, "score": 1, "last_activity_date": 1458168226, "creation_date": 1458167854, "last_edit_date": 1592644375, "question_id": 36048303, "link": "https://stackoverflow.com/questions/36048303/using-dictionary-to-modify-list-values", "title": "Using dictionary to modify list values", "body": "<p>I need to change all &quot;a&quot; to &quot; AM&quot; and &quot;p&quot; to &quot; PM&quot; from list1.</p>\n<pre><code>dict1 = {\n    &quot;a&quot;: &quot; AM&quot;,\n    &quot;p&quot;: &quot; PM&quot;\n}\n\nlist1 = [&quot;1:34a&quot;, &quot;2:34p&quot;, &quot;4:12a&quot;]\n\ndef ampm(value):\n    for k,v in dict1.items():\n        return value.replace(k,v)\n    \nfor item in list1:\n    print (ampm(item))\n</code></pre>\n<p>I have no idea why it results in:</p>\n<blockquote>\n<p>1:34 AM</p>\n<p>2:34p</p>\n<p>4:12 AM</p>\n</blockquote>\n"}, {"tags": ["python", "mongodb", "flask", "pytest", "fixtures"], "answers": [{"tags": [], "owner": {"reputation": 97255, "user_id": 400617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa7ef250a486833a8c6c933c523b282?s=128&d=identicon&r=PG", "display_name": "davidism", "link": "https://stackoverflow.com/users/400617/davidism"}, "is_accepted": false, "score": 2, "last_activity_date": 1532708912, "last_edit_date": 1532708912, "creation_date": 1458184990, "answer_id": 36051105, "question_id": 36048295, "link": "https://stackoverflow.com/questions/36048295/will-anything-bad-happen-if-i-push-two-app-contexts-during-testing/36051105#36051105", "title": "Will anything bad happen if I push two app contexts during testing?", "body": "<p>It shouldn't affect anything, but it's not necessary. Make the <code>mongo</code> fixture depend on the <code>app</code> fixture, which already sets up the context.</p>\n\n<pre><code>import pytest\nfrom proj import app as flask_app, mongo as mongo_ext\n\n@pytest.fixture\ndef app():\n    with flask_app.app_context():\n        yield flask_app\n\n@pytest.fixture\ndef mongo(app):\n    return mongo_ext\n\ndef test_with_app(app):\n    ...\n\ndef test_with_mongo(mongo):\n    ...\n\ndef test_with_both(app, mongo):\n    ...\n</code></pre>\n\n<hr>\n\n<p>Since the <code>mongo</code> fixture isn't doing anything else, you can remove it.  Import the extension object directly and make your test depend on the <code>app</code> fixture to set up the context. (Although I assume in the real fixture you're doing some database setup/cleanup.)</p>\n"}], "owner": {"reputation": 205730, "user_id": 15055, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7f71287b47b7189d11fe6d3fbc7ed2fe?s=128&d=identicon&r=PG", "display_name": "Claudiu", "link": "https://stackoverflow.com/users/15055/claudiu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1532708912, "creation_date": 1458167828, "question_id": 36048295, "link": "https://stackoverflow.com/questions/36048295/will-anything-bad-happen-if-i-push-two-app-contexts-during-testing", "title": "Will anything bad happen if I push two app contexts during testing?", "body": "<p>I'm using Flask, Mongo (with Flask-PyMongo), and py.test. I have a py.test fixture for my app which is as you'd expect:</p>\n\n<pre><code>@pytest.fixture\ndef app(request):\n    from proj import app\n\n    ctx = app.app_context()\n    ctx.push()\n    request.addfinalizer(lambda: ctx.pop())\n\n    return app\n</code></pre>\n\n<p>I also have a Mongo fixture. Now, the <code>mongo</code> object is created with Flask-PyMongo and so it requires an app context to work. I have come up with the following:</p>\n\n<pre><code>@pytest.fixture\ndef mongo():\n    from proj import app, mongo\n\n    ctx = app.app_context()\n    ctx.push()\n    request.addfinalizer(lambda: ctx.pop())\n\n    return mongo\n</code></pre>\n\n<p>This works in that if I have a test like this it works:</p>\n\n<pre><code>def test_mongo(mongo):\n    assert mongo.db.coll.find({'foo': 'bar'}).count() &gt; 0\n</code></pre>\n\n<p>However, in some cases I want access both to the app and to the database:</p>\n\n<pre><code>def test_app_and_mongo(app, mongo):\n    assert serious_stuff(app, mongo)\n</code></pre>\n\n<p>This will cause two app contexts to be created. As it is now it just works, but given I don't understand Flask very well yet, I am wary. </p>\n\n<p>Will this cause anything bad to happen? Is there any surprising behavior I will see because of this?</p>\n\n<hr>\n\n<p>For reference, <code>proj</code>'s <code>__init__.py</code> is something like:</p>\n\n<pre><code>from flask import Flask\nfrom flask.ext.pymongo import PyMongo\n\napp = Flask(__name__)\n# ... set config ... \nmongo = PyMongo(app)\n</code></pre>\n"}, {"tags": ["python", "nltk"], "answers": [{"tags": [], "owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "is_accepted": false, "score": 0, "last_activity_date": 1458199364, "last_edit_date": 1495541357, "creation_date": 1458194186, "answer_id": 36052689, "question_id": 36048261, "link": "https://stackoverflow.com/questions/36048261/how-do-i-find-out-the-most-frequent-word-and-word-class-in-a-specific-brown-corp/36052689#36052689", "title": "How do I find out the most frequent word and word class in a specific brown corpus?", "body": "<p>Firstly, use namespaces, see <a href=\"https://docs.python.org/3.5/tutorial/modules.html#importing-from-a-package\" rel=\"nofollow noreferrer\">https://docs.python.org/3.5/tutorial/modules.html#importing-from-a-package</a>, e.g.:</p>\n\n<pre><code># We are not Java ;P\n# Try not to do nltk.corpus.brown.tagged_words()\n# Instead do this:\nfrom nltk.corpus import brown\nwords_with_tags = brown.tagged_words()\n</code></pre>\n\n<p>Next, <code>nltk.probability.FreqDist</code> is essentially a sub-type of native Python's <code>collections.Counter</code>, see <a href=\"https://stackoverflow.com/questions/34603922/difference-between-pythons-collections-counter-and-nltk-probability-freqdist\">Difference between Python&#39;s collections.Counter and nltk.probability.FreqDist</a></p>\n\n<p>If you can't use FreqDist, you can use:</p>\n\n<pre><code>from collections import Counter\n</code></pre>\n\n<p>The return type of <code>brown.tagged_words()</code> is a list of tuples:</p>\n\n<pre><code>&gt;&gt;&gt; from nltk.corpus import brown\n&gt;&gt;&gt; words_with_tags = brown.tagged_words()\n&gt;&gt;&gt; words_with_tags[0]\n(u'The', u'AT')\n&gt;&gt;&gt; words_with_tags[:10]\n[(u'The', u'AT'), (u'Fulton', u'NP-TL'), (u'County', u'NN-TL'), (u'Grand', u'JJ-TL'), (u'Jury', u'NN-TL'), (u'said', u'VBD'), (u'Friday', u'NR'), (u'an', u'AT'), (u'investigation', u'NN'), (u'of', u'IN')]\n</code></pre>\n\n<p>To split a list of tuples, see <a href=\"https://stackoverflow.com/questions/7558908/unpacking-a-list-tuple-of-pairs-into-two-lists-tuples\">Unpacking a list / tuple of pairs into two lists / tuples</a>:</p>\n\n<pre><code>&gt;&gt;&gt; from nltk.corpus import brown\n&gt;&gt;&gt; words_with_tags = brown.tagged_words()\n&gt;&gt;&gt; words, tags = zip(*words_with_tags)\n&gt;&gt;&gt; words[:10]\n(u'The', u'Fulton', u'County', u'Grand', u'Jury', u'said', u'Friday', u'an', u'investigation', u'of')\n&gt;&gt;&gt; tags[:10]\n(u'AT', u'NP-TL', u'NN-TL', u'JJ-TL', u'NN-TL', u'VBD', u'NR', u'AT', u'NN', u'IN')\n</code></pre>\n\n<p>Since this is a homework question, there won't be a full code answer =)</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7139113"}, "is_accepted": false, "score": 0, "last_activity_date": 1488323210, "creation_date": 1488323210, "answer_id": 42520428, "question_id": 36048261, "link": "https://stackoverflow.com/questions/36048261/how-do-i-find-out-the-most-frequent-word-and-word-class-in-a-specific-brown-corp/42520428#42520428", "title": "How do I find out the most frequent word and word class in a specific brown corpus?", "body": "<pre><code> import nltk\n from collections import Counter\n brown = nltk.corpus.brown.tagged_words(categories=\"news\")\n words = [word for line in brown for word in line]\n # the most frequent word class\n print Counter(words).most_common(1)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5460810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2e14e855b6f0f4c93af19cad741e4b9?s=128&d=identicon&r=PG&f=1", "display_name": "dank memes", "link": "https://stackoverflow.com/users/5460810/dank-memes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 435, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1488323210, "creation_date": 1458167658, "last_edit_date": 1458173738, "question_id": 36048261, "link": "https://stackoverflow.com/questions/36048261/how-do-i-find-out-the-most-frequent-word-and-word-class-in-a-specific-brown-corp", "title": "How do I find out the most frequent word and word class in a specific brown corpus?", "body": "<p>If I am inside the news category,</p>\n\n<pre><code>nltk.corpus.brown.tagged_words(categories=\"news\")\n</code></pre>\n\n<p>How am I able to find the most frequent word and word class?\nI am also not allowed to use FreqDist, so that is why it is hard.</p>\n"}, {"tags": ["python", "python-2.7", "pillow"], "comments": [{"owner": {"reputation": 2892, "user_id": 3991164, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/ciXQ9.jpg?s=128&g=1", "display_name": "flaschbier", "link": "https://stackoverflow.com/users/3991164/flaschbier"}, "edited": false, "score": 0, "creation_date": 1458167473, "post_id": 36048111, "comment_id": 59744876, "body": "I tried to fix the formatting, but it would be better you reproduce a full transcript of the errors in the question"}, {"owner": {"reputation": 6220, "user_id": 2216621, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/10c8cf1cdc1383558bd4b78a19d1b524?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Watts", "link": "https://stackoverflow.com/users/2216621/rob-watts"}, "edited": false, "score": 1, "creation_date": 1458168313, "post_id": 36048111, "comment_id": 59745210, "body": "Why did you install it manually instead of using pip?"}, {"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1458170539, "post_id": 36048111, "comment_id": 59746077, "body": "Pillow needs to be importable with just <code>from PIL import Image</code> because Pillow needs to be able to import modules from within itself, maybe see <a href=\"http://stackoverflow.com/questions/20017319/installing-pillow-and-pil\" title=\"installing pillow and pil\">stackoverflow.com/questions/20017319/installing-pillow-and-p&zwnj;&#8203;il</a> about how to properly install Pillow with custom folder."}, {"owner": {"reputation": 1, "user_id": 6074045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41ec28c2ead35cb6aec8d5641d7c558d?s=128&d=identicon&r=PG&f=1", "display_name": "hadasara", "link": "https://stackoverflow.com/users/6074045/hadasara"}, "edited": false, "score": 0, "creation_date": 1458572117, "post_id": 36048111, "comment_id": 59907222, "body": "thank you all for you help. Rob, I wanted to do minial extra modules installations. so , finally I did do normal installation, instead of pip, I used easy_install."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6074045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41ec28c2ead35cb6aec8d5641d7c558d?s=128&d=identicon&r=PG&f=1", "display_name": "hadasara", "link": "https://stackoverflow.com/users/6074045/hadasara"}, "edited": false, "score": 0, "creation_date": 1458572170, "post_id": 36050106, "comment_id": 59907256, "body": "Thanks for your help, but It didn&#39;t work. finally I did do normal installation,  I used easy_install."}], "tags": [], "owner": {"reputation": 99, "user_id": 2423017, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/39e350c60f19516c8637910f067a9f66?s=128&d=identicon&r=PG", "display_name": "EgorPuzyrev", "link": "https://stackoverflow.com/users/2423017/egorpuzyrev"}, "is_accepted": false, "score": 0, "last_activity_date": 1458178289, "creation_date": 1458178289, "answer_id": 36050106, "question_id": 36048111, "link": "https://stackoverflow.com/questions/36048111/cant-import-from-pillow-package/36050106#36050106", "title": "can&#39;t import from Pillow package", "body": "<p>If you want to use python in different place, than in the main installation folder, you should use <code>virtualenv</code>, not manual copy.\nIf you want to do it your way, try to add path to libs you copied to <code>sys.path</code> like this</p>\n\n<pre><code>import os\nimport sys\nsys.path.append(os.path.abspath('path/to/copied/libs'))\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6074045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41ec28c2ead35cb6aec8d5641d7c558d?s=128&d=identicon&r=PG&f=1", "display_name": "hadasara", "link": "https://stackoverflow.com/users/6074045/hadasara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 888, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1458178289, "creation_date": 1458167042, "last_edit_date": 1458168191, "question_id": 36048111, "link": "https://stackoverflow.com/questions/36048111/cant-import-from-pillow-package", "title": "can&#39;t import from Pillow package", "body": "<p>I can't use Pillow modules and I'm not sure why.</p>\n\n<p>I'm using a software that includes within it python (2.7) scripter. So I had to install Pillow package manually - just copied the folder into one of the paths that appear in sys.path. Now the paths are:</p>\n\n<pre><code>mySoftware\\Python27\\Pillow\n</code></pre>\n\n<p>and what I was trying to do is:</p>\n\n<pre><code>from Pillow.PIL import Image\n</code></pre>\n\n<p>so, it finds Image.py, but in it, it doesn't know PIL:</p>\n\n<pre><code>&gt;&gt;&gt; from PIL import VERSION, PILLOW_VERSION, _plugins\nImportError: No module named PIL\n&gt;&gt;&gt; from Pillow.PIL import Image\nTraceback (most recent call last):\n  File \"&lt;string&gt;\", line 1, in &lt;module&gt;\n  File \"C:\\Program Files\\Sim4Life_v2.2.2.904\\Python27\\Pillow\\PIL\\Image.py\", line 29, in &lt;module&gt;\n</code></pre>\n\n<p>(Pillow didn't have a <code>__init__.py</code> file. not sure if it should have.) </p>\n\n<p>How can I have it find PIL?</p>\n"}, {"tags": ["python", "pandas", "group-by"], "comments": [{"owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 0, "creation_date": 1458167411, "post_id": 36047951, "comment_id": 59744847, "body": "I really think you just have to call <code>groupby</code> again"}, {"owner": {"reputation": 4912, "user_id": 1330381, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/9TOv2.png?s=128&g=1", "display_name": "jxramos", "link": "https://stackoverflow.com/users/1330381/jxramos"}, "reply_to_user": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 0, "creation_date": 1458167636, "post_id": 36047951, "comment_id": 59744937, "body": "@PaulH that&#39;s what I&#39;m thinking because of the design of filter&#39;s return value. I guess there may be a bit of overhead involved, I&#39;m not sure the internals of groubby object with respect to data frames, maybe it&#39;s not such a high penalty to pay."}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 2, "creation_date": 1458169697, "post_id": 36047951, "comment_id": 59745759, "body": "You version is pretty fast - i tested another one (using <code>df.groupby(&#39;ColumnX&#39;).agg({&#39;ColumnY&#39;: [&#39;mean&#39;, &#39;size&#39;]})</code>) - and it was almost two times slower than yours"}, {"owner": {"reputation": 29554, "user_id": 839957, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3ac5824c6cc4817a754a186d6a45a08b?s=128&d=identicon&r=PG", "display_name": "maxymoo", "link": "https://stackoverflow.com/users/839957/maxymoo"}, "edited": false, "score": 1, "creation_date": 1458183040, "post_id": 36047951, "comment_id": 59749874, "body": "this is the same as <a href=\"http://stackoverflow.com/questions/35832475/how-can-i-filter-a-pandas-groupby-object-and-obtain-a-groupby-object-back/35833691#35833691\" title=\"how can i filter a pandas groupby object and obtain a groupby object back\">stackoverflow.com/questions/35832475/&hellip;</a> (which doesn&#39;t have an accepted answer though)"}, {"owner": {"reputation": 4912, "user_id": 1330381, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/9TOv2.png?s=128&g=1", "display_name": "jxramos", "link": "https://stackoverflow.com/users/1330381/jxramos"}, "edited": false, "score": 1, "creation_date": 1458234105, "post_id": 36047951, "comment_id": 59780550, "body": "aha you&#39;re right, I was looking for something like that but didn&#39;t look hard enough it would seem. I think your comment is key, &quot;<i>Ultimately I think it would be better if groupby.filter had an option to return a groupby object</i>&quot;, the problem is in the design of the return value. Maybe they could implement a filtergroups method or something."}, {"owner": {"reputation": 690, "user_id": 512497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e488ea8bbfc3168433f5570e52fdcd5e?s=128&d=identicon&r=PG", "display_name": "Igor Fobia", "link": "https://stackoverflow.com/users/512497/igor-fobia"}, "edited": false, "score": 0, "creation_date": 1508509203, "post_id": 36047951, "comment_id": 80649687, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/35832475/how-can-i-filter-a-pandas-groupby-object-and-obtain-a-groupby-object-back\">How can I filter a Pandas GroupBy object and obtain a GroupBy object back?</a>"}], "owner": {"reputation": 4912, "user_id": 1330381, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/9TOv2.png?s=128&g=1", "display_name": "jxramos", "link": "https://stackoverflow.com/users/1330381/jxramos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 163, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1458168341, "creation_date": 1458166408, "last_edit_date": 1458167322, "question_id": 36047951, "link": "https://stackoverflow.com/questions/36047951/how-to-preserve-pandas-groupby-object-after-filter-operation", "title": "How to preserve Pandas.GroupBy object after filter operation", "body": "<p>I wish to conduct operations on groups in my data frame but only upon filtered groups. It seems for me to do so I have to groupby, then <a href=\"http://pandas.pydata.org/pandas-docs/version/0.15.2/groupby.html#filtration\" rel=\"nofollow\">filter</a>, and then groupby again, and finally conduct my operation. Is there some means to bypass the second grouping operation? Seems wasteful if I actually want to retain the context of being a GroupBy object.</p>\n\n<pre><code>df2 = df1.groupby('ColumnX').filter( lambda x: len(x) &gt;= 2 ).groupby('ColumnX').mean()\n</code></pre>\n\n<p>Is there a way to conduct a group filter whose return value is not a dataframe but a GroupBy object?</p>\n\n<p>Here's some toy data to demonstrate with...</p>\n\n<pre><code>&gt;&gt;&gt; df = pandas.DataFrame({ 'ColumnX' : ['a', 'a', 'a' , 'b' , 'b' , 'c' ] , 'ColumnY' : [ 1 , 2  ,  3  ,  1  , 2  ,  99 ] })\n&gt;&gt;&gt; df\n  ColumnX  ColumnY\n0       a        1\n1       a        2\n2       a        3\n3       b        1\n4       b        2\n5       c       99\n&gt;&gt;&gt; df.groupby('ColumnX')\n&lt;pandas.core.groupby.DataFrameGroupBy object at 0x0000000005974438&gt;\n&gt;&gt;&gt; df.groupby('ColumnX').filter( lambda x : len(x) &gt;=2 )\n  ColumnX  ColumnY\n0       a        1\n1       a        2\n2       a        3\n3       b        1\n4       b        2\n&gt;&gt;&gt; df.groupby('ColumnX').filter( lambda x : len(x) &gt;=2 ).groupby('ColumnX')\n&lt;pandas.core.groupby.DataFrameGroupBy object at 0x00000000033A1588&gt;\n&gt;&gt;&gt; df.groupby('ColumnX').filter( lambda x : len(x) &gt;=2 ).groupby('ColumnX').mean()\n         ColumnY\nColumnX\na            2.0\nb            1.5\n&gt;&gt;&gt;\n</code></pre>\n"}, {"tags": ["python", "regex", "numpy", "replace", "iteration"], "comments": [{"owner": {"reputation": 23, "user_id": 6073994, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206089766189889/picture?type=large", "display_name": "Bryce Manubay", "link": "https://stackoverflow.com/users/6073994/bryce-manubay"}, "edited": false, "score": 0, "creation_date": 1458235197, "post_id": 36047873, "comment_id": 59781296, "body": "Note: Thank you so much armatita; it works!!"}], "answers": [{"tags": [], "owner": {"reputation": 9960, "user_id": 2868335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cd58d31ed0a97b5e664d23ff2e99131?s=128&d=identicon&r=PG", "display_name": "armatita", "link": "https://stackoverflow.com/users/2868335/armatita"}, "is_accepted": true, "score": 0, "last_activity_date": 1458219135, "creation_date": 1458219135, "answer_id": 36061107, "question_id": 36047873, "link": "https://stackoverflow.com/questions/36047873/iteratively-replace-two-strings-with-values-from-numpy-array/36061107#36061107", "title": "Iteratively replace two strings with values from numpy array", "body": "<p>I'm not sure I understood the second issue but you can use replace more than one time on the same string, so:</p>\n\n<pre><code>     s = \"x1 stuff x2\"\n     s = s.replace('x1',str(1)).replace('x2',str(2))\n     print(s)\n</code></pre>\n\n<p>, will output:</p>\n\n<pre><code>     1 stuff 2\n</code></pre>\n\n<p>No need to do this two times for two different variables. As for the second issue it just seems as your not \"reset-ing\" the \"lines\" variable before starting to write a new file. So once you finish writing a file just add:</p>\n\n<pre><code>     lines = [] \n</code></pre>\n\n<p>It should be enough to solve these issues.</p>\n"}], "owner": {"reputation": 23, "user_id": 6073994, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206089766189889/picture?type=large", "display_name": "Bryce Manubay", "link": "https://stackoverflow.com/users/6073994/bryce-manubay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 36061107, "answer_count": 1, "score": 0, "last_activity_date": 1458219135, "creation_date": 1458166055, "question_id": 36047873, "link": "https://stackoverflow.com/questions/36047873/iteratively-replace-two-strings-with-values-from-numpy-array", "title": "Iteratively replace two strings with values from numpy array", "body": "<p>I'm currently trying to make an automation script for writing new files from a master where there are two strings I want to replace (x1 and x2) with values from a 21 x 2 array of numbers (namely, [[0,1000],[50,950],[100,900],...,[1000,0]]). Additionally, with each double replacement, I want to save that change as a unique file.</p>\n\n<p>Here's my script as it stands:</p>\n\n<pre><code>import numpy\nlines = []\nx1x2 = numpy.array([[0,1000],[50,950],[100,900],...,[1000,0])\nfor i,j in x1x2:\nwith open(\"filenamexx.inp\") as infile:\n    for line in infile:\n        linex1 = line.replace('x1',str(i))\n        linex2 = line.replace('x2',str(j))\n        lines.append(linex1)\n        lines.append(linex2)\nwith open(\"filename\"+str(i)+str(j)+\".inp\", 'w') as outfile:\n    for line in lines:\n        outfile.write(line)  \n</code></pre>\n\n<p>With my current script there are a few problems. First, the string replacements are being done separately, i.e. I end up with a new file that contains the contents of the master file twice where one line has the first change and then the next will reflect the second separately. Second, with each subsequent iteration, the new files have the contents of the previous file prepended (i.e. filename100900.inp will contain its unique contents as well as the contents of both filename01000.inp and filename50950.inp before it). Anyone think they can take a crack at solving my problem?    </p>\n\n<p>Note: I've looked at using regex module solutions (somehing like this: <a href=\"https://www.safaribooksonline.com/library/view/python-cookbook-2nd/0596007973/ch01s19.html\" rel=\"nofollow\">https://www.safaribooksonline.com/library/view/python-cookbook-2nd/0596007973/ch01s19.html</a>) in order to do multiple replacements in a single pass, but I'm not sure if the way I'm indexing is translatable to a dictionary object.</p>\n"}, {"tags": ["python", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "is_accepted": true, "score": 3, "last_activity_date": 1458168049, "last_edit_date": 1458168049, "creation_date": 1458167739, "answer_id": 36048283, "question_id": 36047865, "link": "https://stackoverflow.com/questions/36047865/count-the-number-of-pixels-by-color-from-an-image-loaded-into-a-numpy-array/36048283#36048283", "title": "Count the number of pixels by color from an image loaded into a numpy array", "body": "<p>The problem is that the <code>numpy</code> array will be an array of size <code>X * Y * 4</code> but you compare each element with a tuple - but it's only a number. That's the reason why your:</p>\n\n<pre><code> np_counter = np_pixdata[(np_pixdata == color_dbz_20)].size\n</code></pre>\n\n<p>didn't exclude any elements.</p>\n\n<p>That you got different counts in the end is because you counted <code>nonzero</code>-elements. But there are zeros in some array elements, just for one color but nevertheless 0 - which are excluded even though you don't want that!</p>\n\n<p>First you want to compare numpy arrays so better convert the <code>color</code>-tuples too:</p>\n\n<pre><code>color_dbz_20 = np.array([2, 253, 2, 255]), ...\n</code></pre>\n\n<p>To get the real result for your condition you must use <code>np.all</code> along axis=2:</p>\n\n<pre><code>np.all(np_pixdata == color_dbz_20, axis=2)\n</code></pre>\n\n<p>This checks if the values along axis 2 (colors) are equal to the ones in your <code>color_dbz_20</code> and this for each pixel. To get the sum of all the matches:</p>\n\n<pre><code>np.sum(np.all(np_pixdata == color_dbz_20, axis=2)) # Sum of boolean array is integer!\n</code></pre>\n\n<p>which gives you the number of pixel where the condition is True. True is interpreted as 1 and False as 0 - that way doing the sum will work - alternativly you could also <code>count_nonzero</code> instead of <code>sum</code> here. Always assuming you created your <code>color_dbz_20</code>-array as <code>np.array</code>.</p>\n\n<p>Maybe the image has a different dimensionality and it's not <code>width * height * depth</code> then you just need to adjust the <code>axis</code> in the <code>np.all</code> to the dimension where the <code>colors</code> are (the one with length <code>4</code>).</p>\n"}], "owner": {"reputation": 954, "user_id": 646151, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3dfb0ae22bada1071424a9299769029e?s=128&d=identicon&r=PG", "display_name": "Scott", "link": "https://stackoverflow.com/users/646151/scott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6199, "favorite_count": 1, "accepted_answer_id": 36048283, "answer_count": 1, "score": 2, "last_activity_date": 1458168049, "creation_date": 1458166024, "question_id": 36047865, "link": "https://stackoverflow.com/questions/36047865/count-the-number-of-pixels-by-color-from-an-image-loaded-into-a-numpy-array", "title": "Count the number of pixels by color from an image loaded into a numpy array", "body": "<p>I'm trying to count the number pixels in a weather radar image for each dbz reflectivity level (the colored blocks of green, orange, yellow, red, etc.) so I can \"score\" the radar image based on the type of echos.</p>\n\n<p>I'm new to numpy and numpy arrays, but I know it can be very efficient when I'm working with the individual pixels in an image, so I'd like to learn more.</p>\n\n<p>I'm not even sure I'm selecting the pixels correctly, but I think I'm getting close.</p>\n\n<p>I have a sample of using both numpy and basic pixel iteration to count the number of green pixels with an RGBA of (1, 197, 1, 255). </p>\n\n<p>Hopefully I'm close and someone can give me guidance on how to select the pixels using numpy and then count them:</p>\n\n<pre><code>import io\nimport numpy as np\nimport PIL.Image\nimport urllib2\nimport sys\n\ncolor_dbz_20 = (2, 253, 2, 255)\ncolor_dbz_25 = (1, 197, 1, 255)\ncolor_dbz_30 = (0, 142, 0, 255)\n\nurl = 'http://radar.weather.gov/ridge/RadarImg/N0R/DLH_N0R_0.gif'\nimage_bytes = io.BytesIO(urllib2.urlopen(url).read())\n\nimage = PIL.Image.open(image_bytes)\nimage = image.convert('RGBA')\n\ntotal_pixels = image.height * image.width\n\n# Count using numpy\nnp_pixdata = np.array(image)\n\n# Didn't work, gave me the total size:\n# np_counter = np_pixdata[(np_pixdata == color_dbz_20)].size\n\nnp_counter = np.count_nonzero(np_pixdata[(np_pixdata == color_dbz_20)])\n\n# Count using pillow\npil_pixdata = image.load()\n\npil_counter = 0\nfor y in xrange(image.size[1]):\n    for x in xrange(image.size[0]):\n        if pil_pixdata[x, y] == color_dbz_20:\n            pil_counter += 1\n\nprint \"Numpy Count: %d\" % np_counter\nprint \"Pillow Count: %d\" % pil_counter\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Numpy Count: 134573\nPillow Count: 9967\n</code></pre>\n"}, {"tags": ["python", "email", "base64", "sha256", "dkim"], "answers": [{"comments": [{"owner": {"reputation": 19728, "user_id": 929999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e38b941717ff6f519095ee81fcd09a7?s=128&d=identicon&r=PG", "display_name": "Torxed", "link": "https://stackoverflow.com/users/929999/torxed"}, "edited": false, "score": 1, "creation_date": 1571752815, "post_id": 37300501, "comment_id": 103340182, "body": "Not sure why, but I kept getting <code>bytes</code> related errors. converting all parameters to <code>dkim.sign()</code> like so: <code>dkim.sign(bytes(msg.as_string(), &#39;UTF-8&#39;), b&#39;myselector&#39;, ...)</code> worked. Not sure if this is a Python2 vs Python3 thing, but sure smells like it."}], "tags": [], "owner": {"reputation": 874, "user_id": 3569719, "user_type": "registered", "profile_image": "https://graph.facebook.com/700878492/picture?type=large", "display_name": "Georg Zimmer", "link": "https://stackoverflow.com/users/3569719/georg-zimmer"}, "is_accepted": true, "score": 3, "last_activity_date": 1463576663, "creation_date": 1463576663, "answer_id": 37300501, "question_id": 36047831, "link": "https://stackoverflow.com/questions/36047831/generating-dkim-signatures-via-python-for-custom-mta/37300501#37300501", "title": "Generating DKIM signatures VIA Python for Custom MTA", "body": "<p>This should help.  </p>\n\n<p><a href=\"https://launchpad.net/dkimpy\" rel=\"nofollow\">https://launchpad.net/dkimpy</a></p>\n\n<p>I looked at the tests and the command line tools included in the project to learn how to use it.</p>\n\n<p>Here is a code fragment which will give you an idea of how to use it. Sorry I can't provide more.</p>\n\n<pre><code>    self.dkim_private = open(os.path.join(settings.PROJECT_DIR, 'private_key.pem')).read()\n    ... snip ...\n    msg = MIMEMultipart('alternative')\n    msg['From'] = \"{0} &lt;{1}&gt;\".format(self.sendfrom_name, self.sendfrom)\n    msg['To'] = self.sendto\n    msg['Date'] = formatdate(localtime=True)\n    msg['Message-ID'] = self.message_id\n    msg['Subject'] = self.subject\n\n    msg.attach(MIMEText(unicodedata.normalize('NFKD', self.body_text), 'plain'))\n    msg.attach(MIMEText(self.body, 'html'))\n\n    sig = dkim.sign(msg.as_string(), 'myselector',\n                    from_domain, self.dkim_private,\n                    include_headers=['from', 'to', 'subject', 'message-id'])\n    msg['DKIM-Signature'] = sig[len(\"DKIM-Signature: \"):]\n</code></pre>\n\n<p>Then you use can use smtplib to send the email.</p>\n\n<p>The private and public keys can be generated easily here:</p>\n\n<p><a href=\"https://www.port25.com/support/domainkeysdkim-wizard/\" rel=\"nofollow\">https://www.port25.com/support/domainkeysdkim-wizard/</a></p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 8846181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fd4d4fe0b28c34041ef1cdd7b1ff501?s=128&d=identicon&r=PG&f=1", "display_name": "James Miller", "link": "https://stackoverflow.com/users/8846181/james-miller"}, "is_accepted": false, "score": 4, "last_activity_date": 1509148452, "creation_date": 1509148452, "answer_id": 46984906, "question_id": 36047831, "link": "https://stackoverflow.com/questions/36047831/generating-dkim-signatures-via-python-for-custom-mta/46984906#46984906", "title": "Generating DKIM signatures VIA Python for Custom MTA", "body": "<p>I would like to thank Georg Zimmer for the above answer.  I ran into some difficulties running this on Python 3.6.2 as some of the \"byte\" / \"string\" items have changed since 2.x versions.  Below is code to make a MIMEMultipart (text/HTML) and signed with DKIM.  I used dkimpy-0.6.2.</p>\n\n<p>My very first StackOverflow post.  Hope it helps you...</p>\n\n<pre><code>import smtplib, dkim, time, os\n\nfrom email.mime.multipart import MIMEMultipart\nfrom email.mime.text import MIMEText\n\n\nprint('Content-Type: text/plain')\nprint('')\nmsg = MIMEMultipart('alternative')\nmsg['From'] = 'test@example.com'\nmsg['To'] = 'person@anotherexample.com'\nmsg['Subject'] = ' Test Subject'\nmsg['Message-ID'] = \"&lt;\" + str(time.time()) + \"-1234567890@example.com\" + \"&gt;\"\n\n# Create the body of the message (a plain-text and an HTML version).\ntext = \"\"\"\\\nTest email displayed as text only\n\"\"\"\n\nhtml = \"\"\"\\\n&lt;!doctype html&gt;\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:v=\"urn:schemas-microsoft-com:vml\" xmlns:o=\"urn:schemas-microsoft-com:office:office\"&gt;\n    &lt;head&gt;\n        &lt;title&gt;Test DKMI Email&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        HTML Body of Test DKIM\n    &lt;/body&gt;\n&lt;/html&gt;\n\"\"\"\n\n# Record the MIME types of both parts - text/plain and text/html.\npart1 = MIMEText(text, 'plain')\npart2 = MIMEText(html, 'html')\n\nmsg.attach(part1)\nmsg.attach(part2)\n\n# DKIM Private Key for example.com RSA-2048bit\nprivateKey = open(os.path.join('C:\\\\dev\\\\python\\\\', '2048.example.com.priv')).read()\n\n# Specify headers in \"byte\" form\nheaders=[b'from', b'to', b'subject', b'message-id']\n\n# Generate message signature\nsig = dkim.sign(msg.as_bytes(), b'introduction', b'example.com', privateKey.encode(), include_headers=headers)\nsig = sig.decode()\n\n# Add the DKIM-Signature\nmsg['DKIM-Signature'] = sig[len(\"DKIM-Signature: \"):]\n\n# Send the message via local SMTP server.\ns = smtplib.SMTP('localhost')\n# sendmail function takes 3 arguments: sender's address, recipient's address\n# and message to send - here it is sent as one string.\ns.sendmail(msg['From'], msg['To'], msg.as_string())\ns.quit()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1622, "user_id": 9789097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19613b45b3b535c6d829c9d711e5b5e6?s=128&d=identicon&r=PG&f=1", "display_name": "Trect", "link": "https://stackoverflow.com/users/9789097/trect"}, "edited": false, "score": 0, "creation_date": 1561792673, "post_id": 48271207, "comment_id": 100185111, "body": "This answer must be removed. Doesn&#39;t answer the qquestion"}], "tags": [], "owner": {"reputation": 41, "user_id": 6475557, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lQDo6F7JoEA/AAAAAAAAAAI/AAAAAAAAABo/bV_LvHtMfnI/photo.jpg?sz=128", "display_name": "Alexander Burch", "link": "https://stackoverflow.com/users/6475557/alexander-burch"}, "is_accepted": false, "score": 4, "last_activity_date": 1516061476, "last_edit_date": 1516061476, "creation_date": 1516053455, "answer_id": 48271207, "question_id": 36047831, "link": "https://stackoverflow.com/questions/36047831/generating-dkim-signatures-via-python-for-custom-mta/48271207#48271207", "title": "Generating DKIM signatures VIA Python for Custom MTA", "body": "<p>To build on the previous two answers, I have a few additional tips.</p>\n\n<ol>\n<li>Be sure you run </li>\n</ol>\n\n<pre><code>pip install dkimpy\n</code></pre>\n\n<ol start=\"2\">\n<li>Generate the private key. On Unix:</li>\n</ol>\n\n<pre><code>openssl genrsa -out dkimprivatekey.pem 1024</code></pre>\n\n<ol start=\"3\">\n<li>Generate the public. On Unix:</li>\n</ol>\n\n<pre><code>openssl rsa -in dkimprivatekey.pem -out public.pem -pubout</code></pre>\n\n<ol start=\"4\">\n<li>Add the public key to your DNS with the selector \"introduction\" (which is what the example above uses.</li>\n<li>Provide the path and filename to your private key in the code above (the example above uses <code>C:\\dev\\python\\</code> and <code>2048.example.com.priv</code>)</li>\n</ol>\n"}], "owner": {"reputation": 53, "user_id": 3482950, "user_type": "registered", "profile_image": "https://graph.facebook.com/501769963335924/picture?type=large", "display_name": "user3482950", "link": "https://stackoverflow.com/users/3482950/user3482950"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2687, "favorite_count": 0, "accepted_answer_id": 37300501, "answer_count": 3, "score": 1, "last_activity_date": 1516061476, "creation_date": 1458165870, "question_id": 36047831, "link": "https://stackoverflow.com/questions/36047831/generating-dkim-signatures-via-python-for-custom-mta", "title": "Generating DKIM signatures VIA Python for Custom MTA", "body": "<p>Ok, so I am not completely lost with DKIM. I know the general rules of encoding and setting DNS records with your public key, etc. What I am having issues with is incorporating the \"on the fly\" signing of outbound emails and injecting into my header because my MTA it is custom, written in python from the ground up, not out of the box. Wondering if anyone had a small python example of sending even 1 email with DKIM, and going through all the motions. Like generating the 256 bit crypto body using your private key that matches the sister (public) key in your dns settings. </p>\n"}, {"tags": ["python", "google-cloud-datastore", "app-engine-ndb", "gcloud-python", "google-cloud-python"], "comments": [{"owner": {"reputation": 2917, "user_id": 2300755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/412477c4e9148bdff2e30f283d7794b0?s=128&d=identicon&r=PG", "display_name": "Ed Davisson", "link": "https://stackoverflow.com/users/2300755/ed-davisson"}, "edited": false, "score": 0, "creation_date": 1458233679, "post_id": 36047819, "comment_id": 59780224, "body": "I added an answer. If that ends up working for you, it might be good to file an issue against the gcloud-python project to fix the documentation (and possibly the error message you received in your original code)."}, {"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "reply_to_user": {"reputation": 2917, "user_id": 2300755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/412477c4e9148bdff2e30f283d7794b0?s=128&d=identicon&r=PG", "display_name": "Ed Davisson", "link": "https://stackoverflow.com/users/2300755/ed-davisson"}, "edited": false, "score": 0, "creation_date": 1458234983, "post_id": 36047819, "comment_id": 59781134, "body": "@EdDavisson -- Thanks for the answer, but either I misunderstand your answer, or you misunderstand my question :-).  I think you&#39;re answering the question -- &quot;How do I query the <code>X</code> table by a <code>X</code> entity&#39;s Key&quot;.  I&#39;m asking &quot;How do I query the <code>X</code> table by a property that stores a Key from an entity of kind <code>Y</code>.&quot;"}, {"owner": {"reputation": 2917, "user_id": 2300755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/412477c4e9148bdff2e30f283d7794b0?s=128&d=identicon&r=PG", "display_name": "Ed Davisson", "link": "https://stackoverflow.com/users/2300755/ed-davisson"}, "edited": false, "score": 0, "creation_date": 1458255232, "post_id": 36047819, "comment_id": 59792345, "body": "You&#39;re absolutely right -- I was answering a different question. Can you send an email to the address in my profile? It&#39;d be helpful to see the original proto dumps you posted above."}], "answers": [{"comments": [{"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1458319823, "post_id": 36089923, "comment_id": 59824251, "body": "Brilliant!  Thank you guys for the help!"}], "tags": [], "owner": {"reputation": 3606, "user_id": 184643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rcr8a.jpg?s=128&g=1", "display_name": "Patrick Costello", "link": "https://stackoverflow.com/users/184643/patrick-costello"}, "is_accepted": true, "score": 3, "last_activity_date": 1458319701, "creation_date": 1458319701, "answer_id": 36089923, "question_id": 36047819, "link": "https://stackoverflow.com/questions/36047819/query-google-datastore-by-key-in-gcloud-api/36089923#36089923", "title": "Query google datastore by key in gcloud api", "body": "<p>This is a subtle bug with your use of the ndb library:</p>\n\n<p><a href=\"https://cloud.google.com/appengine/docs/python/ndb/properties#options\" rel=\"nofollow\">All ndb properties accept a single positional argument that specifies the property's name in Datastore</a></p>\n\n<p>Looking at your model definition, you'll see <code>user = ndb.KeyProperty('User')</code>. This isn't actually saying that the <code>user</code> property is a key of a <code>User</code> entity, but that it should be stored in Datastore with the property name <code>User</code>. You can verify this in your gae protocol buffer query where the property name is (case sensitive) <code>User</code>.</p>\n\n<p>If you want to limit the key to a single kind, you need to specify it using the kind option.</p>\n\n<pre><code>user = ndb.KeyProperty(kind=\"User\") \n</code></pre>\n\n<p>The <code>KeyProperty</code> also supports:</p>\n\n<pre><code>user = ndb.KeyProperty(User)   # User is a class here, not a string\n</code></pre>\n\n<p><a href=\"https://github.com/GoogleCloudPlatform/datastore-ndb-python/blob/master/ndb/model.py#L1963\" rel=\"nofollow\">Here is a description of all the magic</a>.</p>\n\n<p>As it is now, your gcloud query is querying for the wrong cased user and should be:</p>\n\n<pre><code>data_qry = client.query(kind='Data')\ndata_qry.add_filter('User', '=', user.key)\n</code></pre>\n"}], "owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 564, "favorite_count": 0, "accepted_answer_id": 36089923, "answer_count": 1, "score": 1, "last_activity_date": 1475194133, "creation_date": 1458165819, "last_edit_date": 1475194133, "question_id": 36047819, "link": "https://stackoverflow.com/questions/36047819/query-google-datastore-by-key-in-gcloud-api", "title": "Query google datastore by key in gcloud api", "body": "<p>I'm trying to query for some data using the <code>gcloud</code> api that I just discovered.  I'd like to query for a <code>KeyPropery</code>.  e.g.:</p>\n\n<pre><code>from google.appengine.ext import ndb\n\nclass User(ndb.Model):\n    email = ndb.StringProperty()\n\nclass Data(ndb.Model):\n    user = ndb.KeyProperty('User')\n    data = ndb.JsonProperty()\n</code></pre>\n\n<p>In GAE, I can query this pretty easily assuming I have a user's key:</p>\n\n<pre><code>user = User.query(User.email == 'me@domain.com').get()\ndata_records = Data.query(Data.user == user.key).fetch()\n</code></pre>\n\n<p>I'd like to do something similar using <code>gcloud</code>:</p>\n\n<pre><code>from gcloud import datastore\n\nclient = datastore.Client(project='my-project-id')\nuser_qry = client.query(kind='User')\nuser_qry.add_filter('email', '=', 'me@domain.com')\nusers = list(user_qry.fetch())\nuser = users[0]\n\ndata_qry = client.query(kind='Data')\ndata_qry.add_filter('user', '=', user.key)  # This doesn't work ...\nresults = list(data_qry.fetch())  # results = []\n</code></pre>\n\n<p>Looking at the documentation for <code>add_filter</code>, it doesn't appear that <code>Entity.key</code> is a <a href=\"https://googlecloudplatform.github.io/gcloud-python/stable/datastore-queries.html#gcloud.datastore.query.Query.add_filter\" rel=\"nofollow\">supported type</a>:</p>\n\n<blockquote>\n  <p>value (int, str, bool, float, NoneType, :class<code>datetime.datetime</code>) \u2013 The value to filter on.</p>\n</blockquote>\n\n<p>Is it possible to add filters for key properties?</p>\n\n<hr>\n\n<p>I've done a bit more sleuthing to try to figure out what is really going on here.  I'm not sure that this is helpful for me to understand this issue at the present, but maybe it'll be helpful for someone else.</p>\n\n<p>I've mocked out the underlying calls in the respective libraries to record the protocol buffers that are being serialized and sent to the server.  For GAE, it appears to be <code>Batch.create_async</code> in the <a href=\"https://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/datastore/datastore_query.py#1978\" rel=\"nofollow\">datastore_query</a> module.</p>\n\n<p>For <code>gcloud</code>, it is the <a href=\"https://github.com/GoogleCloudPlatform/gcloud-python/blob/master/gcloud/datastore/query.py#L419\" rel=\"nofollow\"><code>datastore.Client.connection.run_query</code></a> method.  Looking at the resulting protocol buffers (anonymized), I see:</p>\n\n<h2>gcloud query pb.</h2>\n\n<pre><code>kind {\n  name: \"Data\"\n}\nfilter {\n  composite_filter {\n    operator: AND\n    filter {\n      property_filter {\n        property {\n          name: \"user\"\n        }\n        operator: EQUAL\n        value {\n          key_value {\n            partition_id {\n              dataset_id: \"s~app-id\"\n            }\n            path_element {\n              kind: \"User\"\n              name: \"user_string_id\"\n            }\n          }\n        }\n      }\n    }\n  }\n}\n</code></pre>\n\n<h2>GAE query pb.</h2>\n\n<pre><code>kind: \"Data\"\nFilter {\n  op: 5\n  property &lt;\n    name: \"User\"\n    value &lt;\n      ReferenceValue {\n        app: \"s~app-id\"\n        PathElement {\n          type: \"User\"\n          name: \"user_string_id\"\n        }\n      }\n    &gt;\n    multiple: false\n  &gt;\n}\n</code></pre>\n\n<p>The two libraries are using different versions of the proto as far as I can tell, but the data being passed <em>looks</em> very similar...</p>\n"}, {"tags": ["python", "python-3.x", "for-loop", "character"], "comments": [{"owner": {"reputation": 271, "user_id": 5836717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b78ee0ec04993134a67be276210ec52?s=128&d=identicon&r=PG&f=1", "display_name": "L_Pav", "link": "https://stackoverflow.com/users/5836717/l-pav"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1458166124, "post_id": 36047792, "comment_id": 59744278, "body": "No, I am just trying to create a program which simply prints out all combinations up to a certaion value. It is just called joke_password_cracker.py"}, {"owner": {"reputation": 2623, "user_id": 3697163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/611ce881510094605af96f479d2c0472?s=128&d=identicon&r=PG&f=1", "display_name": "DaveBensonPhillips", "link": "https://stackoverflow.com/users/3697163/davebensonphillips"}, "edited": false, "score": 0, "creation_date": 1458166154, "post_id": 36047792, "comment_id": 59744291, "body": "How is this supposed to work? How do you ever expect <code>chr(i)*n</code> to output two different characters?"}, {"owner": {"reputation": 271, "user_id": 5836717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b78ee0ec04993134a67be276210ec52?s=128&d=identicon&r=PG&f=1", "display_name": "L_Pav", "link": "https://stackoverflow.com/users/5836717/l-pav"}, "edited": false, "score": 0, "creation_date": 1458166213, "post_id": 36047792, "comment_id": 59744328, "body": "I am not going to crack any passwords in real life. It is a crime."}, {"owner": {"reputation": 271, "user_id": 5836717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b78ee0ec04993134a67be276210ec52?s=128&d=identicon&r=PG&f=1", "display_name": "L_Pav", "link": "https://stackoverflow.com/users/5836717/l-pav"}, "edited": false, "score": 0, "creation_date": 1458166260, "post_id": 36047792, "comment_id": 59744352, "body": "I do not know how to make it work though, that is why I have asked this question."}, {"owner": {"reputation": 2569, "user_id": 514040, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/98bb1ee1a1f3d1297acf493776066086?s=128&d=identicon&r=PG", "display_name": "neuronaut", "link": "https://stackoverflow.com/users/514040/neuronaut"}, "edited": false, "score": 1, "creation_date": 1458166290, "post_id": 36047792, "comment_id": 59744360, "body": "You might look into python&#39;s <code>itertools.permutations</code> function - I believe it should give you what you need. Also, see <a href=\"http://stackoverflow.com/questions/17434070/generating-all-combinations-of-a-list-in-python\" title=\"generating all combinations of a list in python\">stackoverflow.com/questions/17434070/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 271, "user_id": 5836717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b78ee0ec04993134a67be276210ec52?s=128&d=identicon&r=PG&f=1", "display_name": "L_Pav", "link": "https://stackoverflow.com/users/5836717/l-pav"}, "edited": false, "score": 0, "creation_date": 1458166736, "post_id": 36047973, "comment_id": 59744560, "body": "What is this:    Traceback (most recent call last):   File &quot;D:\\My Documents\\python\\pyautogui\\joke_password_cracker.py&quot;, line 9, in &lt;module&gt;     pyautogui.typewrite(a)   File &quot;C:\\Python35\\lib\\site-packages\\pyautogui_<i>init_</i>.py&quot;, line 961, in typewrite     c = c.lower() AttributeError: &#39;tuple&#39; object has no attribute &#39;lower&#39;"}, {"owner": {"reputation": 271, "user_id": 5836717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b78ee0ec04993134a67be276210ec52?s=128&d=identicon&r=PG&f=1", "display_name": "L_Pav", "link": "https://stackoverflow.com/users/5836717/l-pav"}, "edited": false, "score": 0, "creation_date": 1458166872, "post_id": 36047973, "comment_id": 59744616, "body": "Ah, I get it, sorry for bothering you again."}, {"owner": {"reputation": 2623, "user_id": 3697163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/611ce881510094605af96f479d2c0472?s=128&d=identicon&r=PG&f=1", "display_name": "DaveBensonPhillips", "link": "https://stackoverflow.com/users/3697163/davebensonphillips"}, "reply_to_user": {"reputation": 271, "user_id": 5836717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b78ee0ec04993134a67be276210ec52?s=128&d=identicon&r=PG&f=1", "display_name": "L_Pav", "link": "https://stackoverflow.com/users/5836717/l-pav"}, "edited": false, "score": 1, "creation_date": 1458166944, "post_id": 36047973, "comment_id": 59744640, "body": "Use <code>(&#39;&#39;.join(i) for i in a)</code> to convert <code>a</code> to the format you want it in (an iterable of strings)"}], "tags": [], "owner": {"reputation": 2623, "user_id": 3697163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/611ce881510094605af96f479d2c0472?s=128&d=identicon&r=PG&f=1", "display_name": "DaveBensonPhillips", "link": "https://stackoverflow.com/users/3697163/davebensonphillips"}, "is_accepted": true, "score": 1, "last_activity_date": 1458166964, "last_edit_date": 1458166964, "creation_date": 1458166476, "answer_id": 36047973, "question_id": 36047792, "link": "https://stackoverflow.com/questions/36047792/joke-password-cracker-in-python/36047973#36047973", "title": "Joke password cracker in python", "body": "<p>If you want to find combinations, use the <code>itertools</code> module:</p>\n\n<pre><code>&gt;&gt;&gt; from itertools import combinations_with_replacement\n\n&gt;&gt;&gt; a = combinations_with_replacement(map(chr, range(123,127)), password_length))\n&gt;&gt;&gt; list(a)\n[('!', '!'), ('!', '\"'), ('!', '#'), ('!', '$'), ('!', '%') ........\n</code></pre>\n\n<p>Have fun waiting for it to finish when <code>password_length</code> gets around the minimum length for most passwords :)</p>\n"}, {"comments": [{"owner": {"reputation": 1544, "user_id": 7095433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e608c3fba680f67e2997cae63cf626?s=128&d=identicon&r=PG", "display_name": "landru27", "link": "https://stackoverflow.com/users/7095433/landru27"}, "edited": false, "score": 0, "creation_date": 1541796791, "post_id": 53232884, "comment_id": 93353162, "body": "this does not answer the OP&#39;s question; for one, the OP is asking about <i>output</i>, not <i>input</i>; please re-word your answer"}], "tags": [], "owner": {"reputation": 1, "user_id": 9271669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f67d6936ccd01edf4f982a2413268118?s=128&d=identicon&r=PG&f=1", "display_name": "user9271669", "link": "https://stackoverflow.com/users/9271669/user9271669"}, "is_accepted": false, "score": -1, "last_activity_date": 1541797232, "last_edit_date": 1592644375, "creation_date": 1541795509, "answer_id": 53232884, "question_id": 36047792, "link": "https://stackoverflow.com/questions/36047792/joke-password-cracker-in-python/53232884#53232884", "title": "Joke password cracker in python", "body": "<h1>How to create simple code for password in python:</h1>\n<p><strong>input code</strong></p>\n<pre><code>password = input(&quot;Enter password:&quot;)\n    \n    if password == &quot;cheese&quot;:   \n        \n        print(&quot;Access granted&quot;)\n        \n    else:\n        \n        print(&quot;Access denied&quot;)\n</code></pre>\n<p>The part <code>&quot;cheese&quot;</code> can be anything because it's a password.</p>\n<p><strong>Output</strong></p>\n<pre><code>Enter password:bat\n\nAccess denied\n\nEnter password:cheese\n\nAccess granted \n</code></pre>\n"}], "owner": {"reputation": 271, "user_id": 5836717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b78ee0ec04993134a67be276210ec52?s=128&d=identicon&r=PG&f=1", "display_name": "L_Pav", "link": "https://stackoverflow.com/users/5836717/l-pav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 345, "favorite_count": 0, "accepted_answer_id": 36047973, "answer_count": 2, "score": -2, "last_activity_date": 1541797232, "creation_date": 1458165734, "question_id": 36047792, "link": "https://stackoverflow.com/questions/36047792/joke-password-cracker-in-python", "title": "Joke password cracker in python", "body": "<p>I am trying to create a joke password cracker in python. Simply, what it will do, is create all combinations of characters from exclamation mark to space. It automatically opens notepad and in five seconds (when notepad has initialised) does pyautogui magic to simulate key presses to write lines to notepad. At the moment I have this code</p>\n\n<pre><code>import pyautogui, time, subprocess\n\npyautogui.PAUSE = 0\nsubprocess.Popen(\"notepad.exe\")\ntime.sleep(5)\n\nfor n in range (1,3):\n    for i in range (33,127):\n        pyautogui.typewrite((chr(i))*n+\"\\n\"*2)\n</code></pre>\n\n<p>but it produces:</p>\n\n<pre><code>!\n\n\n\"\n\n\n...\n\n\n}}\n\n\n~~\n</code></pre>\n\n<p>what I need though is</p>\n\n<pre><code>!\n\n\n\"\n\n\n...\n\n\n~}\n\n\n~~\n</code></pre>\n\n<p>can someone reply to me how to produce <strong>every</strong> combination of characters? Thank you!\nP.S. I am working in python 3.5.</p>\n"}, {"tags": ["python", "django", "django-forms", "django-templates", "django-views"], "answers": [{"comments": [{"owner": {"reputation": 503, "user_id": 5853556, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/R3gFc.gif?s=128&g=1", "display_name": "Kervvv", "link": "https://stackoverflow.com/users/5853556/kervvv"}, "edited": false, "score": 0, "creation_date": 1458176976, "post_id": 36048516, "comment_id": 59748050, "body": "Thank you soooooo much! This worked for me. I left the &quot;...item output...&quot; blank because my database is already showing the entries. But this is exactly what I needed. Kudos!!"}, {"owner": {"reputation": 1997, "user_id": 2079162, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9062be775da10788ccdff2c89a33b9ab?s=128&d=identicon&r=PG", "display_name": "warath-coder", "link": "https://stackoverflow.com/users/2079162/warath-coder"}, "reply_to_user": {"reputation": 503, "user_id": 5853556, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/R3gFc.gif?s=128&g=1", "display_name": "Kervvv", "link": "https://stackoverflow.com/users/5853556/kervvv"}, "edited": false, "score": 0, "creation_date": 1458177492, "post_id": 36048516, "comment_id": 59748234, "body": "No problem. Remember to try to keep things simple. Django and python try to make it really easy, so less is more."}, {"owner": {"reputation": 1997, "user_id": 2079162, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9062be775da10788ccdff2c89a33b9ab?s=128&d=identicon&r=PG", "display_name": "warath-coder", "link": "https://stackoverflow.com/users/2079162/warath-coder"}, "reply_to_user": {"reputation": 503, "user_id": 5853556, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/R3gFc.gif?s=128&g=1", "display_name": "Kervvv", "link": "https://stackoverflow.com/users/5853556/kervvv"}, "edited": false, "score": 0, "creation_date": 1458177629, "post_id": 36048516, "comment_id": 59748277, "body": "Also, the idea of... Item output... In my example is for you to take your template code that outputs the items (if exists) otherwise you can just change my if statement to if not items. And remove the else."}, {"owner": {"reputation": 503, "user_id": 5853556, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/R3gFc.gif?s=128&g=1", "display_name": "Kervvv", "link": "https://stackoverflow.com/users/5853556/kervvv"}, "edited": false, "score": 0, "creation_date": 1458178532, "post_id": 36048516, "comment_id": 59748570, "body": "You are absolutely right again! I instead put my loop of objects within the if statement, which makes so much more that way. I will try not to overcomplicate things in the future <i>thumbs up</i>."}], "tags": [], "owner": {"reputation": 1997, "user_id": 2079162, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9062be775da10788ccdff2c89a33b9ab?s=128&d=identicon&r=PG", "display_name": "warath-coder", "link": "https://stackoverflow.com/users/2079162/warath-coder"}, "is_accepted": true, "score": 1, "last_activity_date": 1458168838, "creation_date": 1458168838, "answer_id": 36048516, "question_id": 36047722, "link": "https://stackoverflow.com/questions/36047722/issue-using-messages-in-django-template/36048516#36048516", "title": "Issue using Messages in Django Template", "body": "<p>I would simply do this:</p>\n\n<pre><code>def vendors(request):\n    items = Itemo.objects.all()\n    var_2 = request.GET.get(\"q\")\n    if var_2:\n        items = items.filter(Vendor_Name__icontains=var_2)\n\n    return render(request, 'vendor_db/vendors.html', {'items': items})\n</code></pre>\n\n<p>and in the template you can do.</p>\n\n<pre><code>{% if items %}\n... item output ...\n{% else %}\nNo Results Found\n{% endif %}\n</code></pre>\n"}], "owner": {"reputation": 503, "user_id": 5853556, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/R3gFc.gif?s=128&g=1", "display_name": "Kervvv", "link": "https://stackoverflow.com/users/5853556/kervvv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 1, "accepted_answer_id": 36048516, "answer_count": 1, "score": 0, "last_activity_date": 1458168838, "creation_date": 1458165381, "question_id": 36047722, "link": "https://stackoverflow.com/questions/36047722/issue-using-messages-in-django-template", "title": "Issue using Messages in Django Template", "body": "<p>I am very new Django and the web development space in general. On my template, I have all of my database entries listed, and a search bar that queries the database and returns any results. I need help displaying a message when there are no results. Currently, when there are no results, the page simply reloads. I have tried implementing the <a href=\"https://docs.djangoproject.com/en/1.9/ref/contrib/messages/\" rel=\"nofollow\">messages framework</a>, but I just can't get it to work (seems like I have to have it directed to another page). In the views.py, I have an if statement that is deciding what to do when there are no results, I just don't know how to produce a statement that appears on the same page as the query. I've tried extending templates, and putting variables in views.py, but they stay the page permanently. I've also considered Javascript, but I have yet to learn that. I prefer not use Haystack or DjangoSearch, as I think this is pretty simple to do. Please let me know if you require any other information. Thanks so much for any help!</p>\n\n<p>My views.py</p>\n\n<pre><code>from django.http import Http404, HttpRequest\nfrom django.contrib import messages\nfrom vendor_db.models import Itemo\nfrom django.db.models import Q\nfrom django.shortcuts import HttpResponse, HttpResponseRedirect, render_to_response, render, redirect, get_object_or_404\n\ndef vendors(request):\n    items = Itemo.objects.all()\n    var_2 = request.GET.get(\"q\")\n    if var_2:\n        items = items.filter(Vendor_Name__icontains=var_2)\n    if not items:\n        messages.info(request, \"No Results Found\")\n        return none\n        people\n    else:\n        items\n    context = {\n        'items': items,\n    }\n    return render(request, 'vendor_db/vendors.html', context,())\n\ndef vendors_detail(request, id):\n\n    try:\n        item = Itemo.objects.get(id=id)\n    except Itemo.DoesNotExist:\n        raise Http404('This item does not exist')\n    return render(request, 'vendor_db/vendors_detail.html', {\n        'item': item,\n    })\n</code></pre>\n\n<p>My vendors template:</p>\n\n<pre><code>{% extends \"base.html\" %}\n    {% block content %}\n    {% load static %}\n            &lt;h2&gt;All Vendors&lt;/h2&gt;\n            &lt;h3&gt;Search&lt;/h3&gt;\n            &lt;form method='GET' action=''&gt;\n                &lt;input type='text' name=\"q\" placeholder='Search Vendors'/&gt;\n                &lt;input type='submit' value='Search'/&gt;\n            &lt;/form&gt;\n            &lt;form action=\"{% url 'vendors' %}\"&gt; \n                &lt;input type=\"submit\" value=\"Reset\"&gt;\n            &lt;/form&gt;\n\n    {% if messages %}\n            {% for message in messages %}\n                {{ message }}\n            {% endfor %}\n    {% endif %}\n\n            &lt;h3&gt;Sort by:&lt;/h3&gt;\n                &lt;a href=\"{% url 'product_name_asc' %}\"&gt;Product Name&lt;/a&gt;\n            &lt;ul&gt;\n                {% for stuff in items %}\n                    &lt;li&gt;\n                        &lt;a href=\"{% url 'vendors_detail' stuff.id %}\"&gt;\n                        {{ stuff.Product_Name|capfirst }}\n                        &lt;/a&gt;\n                    &lt;/li&gt;\n                {% endfor %}\n            &lt;/ul&gt;\n{% endblock %}\n</code></pre>\n\n<p>urls.py</p>\n\n<pre><code>from django.conf.urls import include, url\nfrom django.contrib import admin\nfrom vendor_db import views\n\nurlpatterns = [\n    url(r'^vendors/$', views.vendors, name='vendors'),\n    url(r'^vendors/(?P&lt;id&gt;\\d+)/', views.vendors_detail, name='vendors_detail'),\n]\n</code></pre>\n"}, {"tags": ["python", "selenium", "automation", "screen-scraping"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1458165678, "post_id": 36047699, "comment_id": 59744079, "body": "how about a <code>for</code> loop?"}, {"owner": {"reputation": 2892, "user_id": 3991164, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/ciXQ9.jpg?s=128&g=1", "display_name": "flaschbier", "link": "https://stackoverflow.com/users/3991164/flaschbier"}, "edited": false, "score": 1, "creation_date": 1458167936, "post_id": 36047699, "comment_id": 59745047, "body": "besides the <code>for</code>, your script should, within each iteration, properly log-on, scrape the data, and then log-off. Very likely there will be a UI element for this that can be scripted."}, {"owner": {"reputation": 2837, "user_id": 5162616, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/980764c4bb1e33d7af3f54e4c44cc891?s=128&d=identicon&r=PG&f=1", "display_name": "Morgan G", "link": "https://stackoverflow.com/users/5162616/morgan-g"}, "edited": false, "score": 0, "creation_date": 1458185300, "post_id": 36047699, "comment_id": 59750402, "body": "Is there a specific issue you are having a hard time wrapping your head around or that you can&#39;t get this to work?  Are you having trouble extracting the username and password data, are you having problems with logout?  Is your for-loop timing out?"}, {"owner": {"reputation": 1829, "user_id": 5378132, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/arUcg.png?s=128&g=1", "display_name": "Riley Hun", "link": "https://stackoverflow.com/users/5378132/riley-hun"}, "edited": false, "score": 0, "creation_date": 1458250642, "post_id": 36047699, "comment_id": 59790399, "body": "So I worked on some code and posted it in my original post. The part I&#39;m confused about is how to differentiate the output between the different accounts."}], "owner": {"reputation": 1829, "user_id": 5378132, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/arUcg.png?s=128&g=1", "display_name": "Riley Hun", "link": "https://stackoverflow.com/users/5378132/riley-hun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 449, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1458250374, "creation_date": 1458165258, "last_edit_date": 1458250374, "question_id": 36047699, "link": "https://stackoverflow.com/questions/36047699/python-best-way-to-automate-account-logins-for-website-and-extract-information", "title": "Python: Best way to automate account logins for website and extract information for each sign-in attempt?", "body": "<p>I was wondering if anyone could kindly recommend the best procedure for doing this in Python 3.5: </p>\n\n<p>I have 250 sets of usernames and passwords\nI have to login to a particular website for each account (so 250 times) and grab their account information</p>\n\n<p>I've seen examples but usually for only 1 sign-in attempt. But what about for multiple logins?</p>\n\n<pre><code>import requests\nimport pandas as pd\nfrom selenium import webdriver\nfrom selenium.webdriver.common.keys import Keys\nfrom bs4 import BeautifulSoup\n\n\n# read accounts information from spreadsheet\ndata = pd.read_csv(\"HWIN Accounts.csv\")\ndata.dropna()\n\n# Parameters to be called\nurl = 'https://www.hwin.ca/hwin/login.jsp'\nUSERNAME = data['Username']\nPASSWORD = data['Password']\ndata = []\ndata2 = []\n\n# Find Outstanding Payments Due on Payment Tab\ndef find_payment(html):\n    soup = BeautifulSoup(html)\n    table = soup.find(\"td\", {\"class\": \"success\"}, text=True)\n    data2.append(table.text)\n\n# Find Account Status\ndef find_account_status(htmls):\n    soup = BeautifulSoup(htmls)\n    table = soup.find('table', border=\"0\", cellpadding=\"2\")\n    table_body = table.find('tbody')\n    rows = table_body.find_all('tr')\n    for row in rows:\n        cols = row.find_all('td')\n        cols = [ele.text.strip() for ele in cols]\n        data.append([ele for ele in cols if ele])\n\n# Sign into HWIN looping through each individual account\nfor i in range(len(USERNAME)):\n    browser = webdriver.Firefox()\n    browser.get(url)\n# Input Login information into form\n    username = browser.find_element_by_name(\"userName\")\n    username.send_keys(USERNAME[i])\n    password = browser.find_element_by_name(\"password\")\n    password.send_keys(PASSWORD[i])\n    form = browser.find_element_by_name(\"imageField\")\n    form.submit()\n# Navigate to Account Status Tab\n    browser.find_element_by_link_text(\"Account status\").click()\n# Extract Account Status Tab\n    htmls = browser.page_source\n    find_account_status(htmls)\n# Navigate to Payments Tab\n    browser.find_element_by_name(\"payments\").click()\n# Extract Payment data\n    html = browser.page_source\n    find_payment(html)\n# Close Browser\n    browser.quit()\n\nprint(data)\nprint(data2)\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 1, "creation_date": 1458165455, "post_id": 36047693, "comment_id": 59743971, "body": "myVar will be a string, so you are comparing <code>&#39;0&#39; == 0 </code> which is false here"}, {"owner": {"reputation": 10425, "user_id": 2142055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Stop harming Monica", "link": "https://stackoverflow.com/users/2142055/stop-harming-monica"}, "edited": false, "score": 2, "creation_date": 1458167083, "post_id": 36047693, "comment_id": 59744708, "body": "&quot;only myName needs to be &#39;Chris&#39; and myVar could be 5 and it will still print &#39;Chris is great&#39;.&quot; No, it will print &#39;who are you?&#39;. Please clarify what your problem is or post code that actually reproduces it."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6073992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0d7342303a75e67c3ec2b835e0ab78e?s=128&d=identicon&r=PG&f=1", "display_name": "chris_1097", "link": "https://stackoverflow.com/users/6073992/chris-1097"}, "edited": false, "score": 0, "creation_date": 1458165947, "post_id": 36047747, "comment_id": 59744194, "body": "Does this make &#39;0&#39; a character type value? because myVar is a string?"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "reply_to_user": {"reputation": 11, "user_id": 6073992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0d7342303a75e67c3ec2b835e0ab78e?s=128&d=identicon&r=PG&f=1", "display_name": "chris_1097", "link": "https://stackoverflow.com/users/6073992/chris-1097"}, "edited": false, "score": 0, "creation_date": 1458166011, "post_id": 36047747, "comment_id": 59744228, "body": "<code>char</code> is not a datatype in Python, only <code>str</code>, so <code>&#39;0&#39;</code> is a string of length 1."}], "tags": [], "owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "is_accepted": false, "score": 2, "last_activity_date": 1458166133, "last_edit_date": 1458166133, "creation_date": 1458165501, "answer_id": 36047747, "question_id": 36047693, "link": "https://stackoverflow.com/questions/36047693/python-3-why-arent-my-logical-operators-and-or-not-working/36047747#36047747", "title": "Python 3. - Why aren&#39;t my logical operators (&#39;and&#39;, &#39;or&#39;) not working?", "body": "<p>In Python 3, <code>input</code> returns a <code>str</code>, but in Python 2, <code>input</code> can return an <code>int</code>. </p>\n\n<p>So, your if statement works fine. </p>\n\n<pre><code>&gt;&gt;&gt; myVar = input(\"Enter a number: \")\nEnter a number: 0\n&gt;&gt;&gt; type(myVar)\nstr\n</code></pre>\n\n<p>Therefore <code>myVar == 0</code> is never true, but <code>myVar == '0'</code> is. </p>\n\n<p>So, either quote the <code>0</code> or cast <code>input</code> to an <code>int</code> like </p>\n\n<pre><code>myVar = int(input(\"Enter a number: \"))\n</code></pre>\n\n<p>But, beware that if you don't type a number, this will throw an error, which is why you should just quote the <code>0</code>, in my opinion (unless you actually need a number at some point).</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 6073992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0d7342303a75e67c3ec2b835e0ab78e?s=128&d=identicon&r=PG&f=1", "display_name": "chris_1097", "link": "https://stackoverflow.com/users/6073992/chris-1097"}, "edited": false, "score": 0, "creation_date": 1458165901, "post_id": 36047750, "comment_id": 59744173, "body": "Ah thank you very much - the tutorial I was following said that in python there was never any need to declare the type of a variable but is it true that you would always have to in cases like this?"}, {"owner": {"reputation": 2717, "user_id": 5641674, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/syYV6.jpg?s=128&g=1", "display_name": "Mark Skelton", "link": "https://stackoverflow.com/users/5641674/mark-skelton"}, "reply_to_user": {"reputation": 11, "user_id": 6073992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0d7342303a75e67c3ec2b835e0ab78e?s=128&d=identicon&r=PG&f=1", "display_name": "chris_1097", "link": "https://stackoverflow.com/users/6073992/chris-1097"}, "edited": false, "score": 0, "creation_date": 1458166000, "post_id": 36047750, "comment_id": 59744221, "body": "Glad I could help."}, {"owner": {"reputation": 6220, "user_id": 2216621, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/10c8cf1cdc1383558bd4b78a19d1b524?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Watts", "link": "https://stackoverflow.com/users/2216621/rob-watts"}, "reply_to_user": {"reputation": 11, "user_id": 6073992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0d7342303a75e67c3ec2b835e0ab78e?s=128&d=identicon&r=PG&f=1", "display_name": "chris_1097", "link": "https://stackoverflow.com/users/6073992/chris-1097"}, "edited": false, "score": 1, "creation_date": 1458166056, "post_id": 36047750, "comment_id": 59744250, "body": "@chris_1097 this isn&#39;t declaring the type of the variable, it&#39;s actually changing what type it is."}, {"owner": {"reputation": 130, "user_id": 6056648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bed0146d476e6226e9788cb1322f0723?s=128&d=identicon&r=PG", "display_name": "coding_carebear", "link": "https://stackoverflow.com/users/6056648/coding-carebear"}, "reply_to_user": {"reputation": 11, "user_id": 6073992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0d7342303a75e67c3ec2b835e0ab78e?s=128&d=identicon&r=PG&f=1", "display_name": "chris_1097", "link": "https://stackoverflow.com/users/6073992/chris-1097"}, "edited": false, "score": 0, "creation_date": 1458166184, "post_id": 36047750, "comment_id": 59744307, "body": "@chris_1097, what Rob Watts said. You aren&#39;t declaring it an int, you are calling the int() function on it as input always returns a string. So Python reads the input and returns a string. You are then calling the int() function to convert it to an int. It only works if an integer literal is the input, otherwise the program will crash if not handled."}, {"owner": {"reputation": 11, "user_id": 6073992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0d7342303a75e67c3ec2b835e0ab78e?s=128&d=identicon&r=PG&f=1", "display_name": "chris_1097", "link": "https://stackoverflow.com/users/6073992/chris-1097"}, "edited": false, "score": 0, "creation_date": 1458166420, "post_id": 36047750, "comment_id": 59744418, "body": "Understood. I will find an up-to-date tutorial that explains 3.x! Thank you for all your help"}, {"owner": {"reputation": 2892, "user_id": 3991164, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/ciXQ9.jpg?s=128&g=1", "display_name": "flaschbier", "link": "https://stackoverflow.com/users/3991164/flaschbier"}, "edited": false, "score": 0, "creation_date": 1458167762, "post_id": 36047750, "comment_id": 59744992, "body": "no matter with the tutorial. The statement &quot;you will not have to declare what type the variable has&quot; is perfectly ok. Seems you just mixed it up with that <code>&quot;0&quot;</code> of course have a type (<code>str</code>) and that type is assigned to any variable, e.g. <code>myVar</code>, together with the value <code>&quot;0&quot;</code>."}], "tags": [], "owner": {"reputation": 2717, "user_id": 5641674, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/syYV6.jpg?s=128&g=1", "display_name": "Mark Skelton", "link": "https://stackoverflow.com/users/5641674/mark-skelton"}, "is_accepted": false, "score": 3, "last_activity_date": 1458165959, "last_edit_date": 1458165959, "creation_date": 1458165510, "answer_id": 36047750, "question_id": 36047693, "link": "https://stackoverflow.com/questions/36047693/python-3-why-arent-my-logical-operators-and-or-not-working/36047750#36047750", "title": "Python 3. - Why aren&#39;t my logical operators (&#39;and&#39;, &#39;or&#39;) not working?", "body": "<p>The problem you have is that <code>input</code> creates a string from the input. You need to convert <code>myVar</code> into an integer with <code>int()</code>.</p>\n\n<pre><code>print(\"Hello world\")\nmyName = input(\"What is your name? \") \nprint(\"Your name is\",myName)\nmyVar = int(input(\"Enter a number: \")) # myVar is an int now\nif (myName == 'Chris' and myVar == 0):\n    print(\"Chris is great\")\nelif(myName=='Bob'):\n    print(\"Bob is ok!\")\nelse:\n    print(\"who are you?\")\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6073992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0d7342303a75e67c3ec2b835e0ab78e?s=128&d=identicon&r=PG&f=1", "display_name": "chris_1097", "link": "https://stackoverflow.com/users/6073992/chris-1097"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2405, "favorite_count": 0, "closed_date": 1458246214, "answer_count": 2, "score": 0, "last_activity_date": 1458166133, "creation_date": 1458165249, "last_edit_date": 1458165645, "question_id": 36047693, "link": "https://stackoverflow.com/questions/36047693/python-3-why-arent-my-logical-operators-and-or-not-working", "closed_reason": "Not suitable for this site", "title": "Python 3. - Why aren&#39;t my logical operators (&#39;and&#39;, &#39;or&#39;) not working?", "body": "<p>I have just started learning Python and the logical <code>and</code> doesn't seem to work for example only <code>myName</code> needs to be 'Chris' and <code>myVar</code> could be 5 and it will still print 'Chris is great'. </p>\n\n<p>I have also tried using an <code>or</code> which didn't seem to follow any logic either.<br>\nIn addition, I even tried <code>myVar != 0</code> in the if statement and this didn't make any difference!</p>\n\n<p>Just to confirm, I definitely know how <code>and</code> and <code>or</code> affect the if condition. </p>\n\n<pre><code>print(\"Hello world\")\nmyName = input(\"What is your name? \") \nprint(\"Your name is\",myName)\nmyVar = input(\"Enter a number: \")\nif(myName == 'Chris' and myVar == 0):\n    print(\"Chris is great\")\nelif(myName=='Bob'):\n    print(\"Bob is ok!\")\nelse:\n    print(\"who are you?\")\n</code></pre>\n\n<p>Thank you to anyone who can help - my guess is it has something to do with how I have configured python..? I am definitely running a .py file though. </p>\n"}, {"tags": ["python", "parsing"], "answers": [{"comments": [{"owner": {"reputation": 441, "user_id": 3000724, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53e6d3292a0ea5259ee6ce7ef7ee37fc?s=128&d=identicon&r=PG&f=1", "display_name": "user3000724", "link": "https://stackoverflow.com/users/3000724/user3000724"}, "edited": false, "score": 0, "creation_date": 1458214719, "post_id": 36047782, "comment_id": 59765476, "body": "Didn&#39;t even occur to me it was JSON.  I&#39;ve always seen the word in various programming contexts but never knew what it actually was.  But the code you provided set me up for exactly what I needed.  Thanks!"}], "tags": [], "owner": {"reputation": 2623, "user_id": 3697163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/611ce881510094605af96f479d2c0472?s=128&d=identicon&r=PG&f=1", "display_name": "DaveBensonPhillips", "link": "https://stackoverflow.com/users/3697163/davebensonphillips"}, "is_accepted": true, "score": 2, "last_activity_date": 1458165698, "creation_date": 1458165698, "answer_id": 36047782, "question_id": 36047684, "link": "https://stackoverflow.com/questions/36047684/how-can-i-split-comma-separated-words-wrapped-in-quotes-efficiently-in-python/36047782#36047782", "title": "How can I split comma separated words wrapped in quotes efficiently in Python?", "body": "<p>That looks like JSON! Assuming it is...</p>\n\n<pre><code>&gt;&gt;&gt; import json\n&gt;&gt;&gt; a = json.loads('{\"repositories\":[\"docker1\",\"myImage\",\"repo123\"]}')\n&gt;&gt;&gt; a['repositories']\n[\"docker1\",\"myImage\",\"repo123\"]  # A python list, not a string\n</code></pre>\n\n<p>If it <em>is</em> guaranteed to be JSON, you can use the above method to convert the string directly into a Python object, obviating the need for any parsing.</p>\n"}], "owner": {"reputation": 441, "user_id": 3000724, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53e6d3292a0ea5259ee6ce7ef7ee37fc?s=128&d=identicon&r=PG&f=1", "display_name": "user3000724", "link": "https://stackoverflow.com/users/3000724/user3000724"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 36047782, "answer_count": 1, "score": 0, "last_activity_date": 1458167816, "creation_date": 1458165213, "last_edit_date": 1458167816, "question_id": 36047684, "link": "https://stackoverflow.com/questions/36047684/how-can-i-split-comma-separated-words-wrapped-in-quotes-efficiently-in-python", "title": "How can I split comma separated words wrapped in quotes efficiently in Python?", "body": "<p>I've done some basic string parsing in python with split, and I currently have this type of output:</p>\n\n<pre><code>{\"repositories\":[\"docker1\",\"myImage\",\"repo123\"]}\n</code></pre>\n\n<p>The \"repositories\" is guaranteed but the list may go on for hundreds.  My first thought is to start at [17:-2] which would leave a comma separated list of quoted words, then split into a list by the commas, and then take each of those words [1:-1].</p>\n\n<p>Is there a more 'elegant' solution to this?</p>\n"}, {"tags": ["python", "scrapy"], "comments": [{"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "edited": false, "score": 0, "creation_date": 1458165339, "post_id": 36047682, "comment_id": 59743919, "body": "Works for me in the scrapy shell..getting non-empty list."}], "answers": [{"comments": [{"owner": {"reputation": 9194, "user_id": 2038257, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/d7c4839a46ca7fc6d9a950aa362166ba?s=128&d=identicon&r=PG", "display_name": "Marco Dinatsoli", "link": "https://stackoverflow.com/users/2038257/marco-dinatsoli"}, "edited": false, "score": 0, "creation_date": 1458166027, "post_id": 36047789, "comment_id": 59744238, "body": "i tried your code <code>container = response.xpath(&quot;.&#47;&#47;div[@id=&#39;search_listing&#39;]&#47;ul[@id=&#39;listing&zwnj;&#8203;s&#39;]&#47;li[contains(@cla&zwnj;&#8203;ss=&#39;item&#39;)]&quot;)</code> but i get error , is it correct please ?"}, {"owner": {"reputation": 9194, "user_id": 2038257, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/d7c4839a46ca7fc6d9a950aa362166ba?s=128&d=identicon&r=PG", "display_name": "Marco Dinatsoli", "link": "https://stackoverflow.com/users/2038257/marco-dinatsoli"}, "edited": false, "score": 0, "creation_date": 1458166290, "post_id": 36047789, "comment_id": 59744361, "body": "the error is: <code>Invalid XPath: .&#47;&#47;div[@id=&#39;search_listing&#39;]&#47;ul[@id=&#39;listings&#39;]&#47;li[contains(&zwnj;&#8203;@class=&#39;item&#39;)]</code>"}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "reply_to_user": {"reputation": 9194, "user_id": 2038257, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/d7c4839a46ca7fc6d9a950aa362166ba?s=128&d=identicon&r=PG", "display_name": "Marco Dinatsoli", "link": "https://stackoverflow.com/users/2038257/marco-dinatsoli"}, "edited": false, "score": 0, "creation_date": 1458166372, "post_id": 36047789, "comment_id": 59744401, "body": "@MarcoDinatsoli note how you are using <code>contains()</code> - should be comma instead of <code>=</code> as in the answer.."}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": true, "score": 3, "last_activity_date": 1458165719, "creation_date": 1458165719, "answer_id": 36047789, "question_id": 36047682, "link": "https://stackoverflow.com/questions/36047682/xpath-expression-not-working-on-a-website/36047789#36047789", "title": "XPath expression not working on a website", "body": "<p>See the extra space after the <code>item</code> class:</p>\n\n<pre><code>&lt;li class=\"item \"&gt;...\n           HERE^\n</code></pre>\n\n<p>This is the reason why your <code>@class='item'</code> condition is not working. You would have to use <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions/contains\" rel=\"nofollow\"><code>contains()</code></a> for a partial match:</p>\n\n<pre><code>.//div[@id='search_listing']/ul[@id='listings']/li[contains(@class, 'item')]\n</code></pre>\n\n<hr>\n\n<p>I would though look into CSS selectors for a more concise location technique:</p>\n\n<pre><code>response.css(\"#search_listing #listings .item\")\n</code></pre>\n"}], "owner": {"reputation": 9194, "user_id": 2038257, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/d7c4839a46ca7fc6d9a950aa362166ba?s=128&d=identicon&r=PG", "display_name": "Marco Dinatsoli", "link": "https://stackoverflow.com/users/2038257/marco-dinatsoli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 1, "accepted_answer_id": 36047789, "answer_count": 1, "score": 1, "last_activity_date": 1458167519, "creation_date": 1458165209, "last_edit_date": 1458167519, "question_id": 36047682, "link": "https://stackoverflow.com/questions/36047682/xpath-expression-not-working-on-a-website", "title": "XPath expression not working on a website", "body": "<p>I am crawling a website</p>\n\n<p>this is my path</p>\n\n<pre><code>    response.xpath(\".//div[@id='search_listing']/ul[@id='listings']/li[@class='item']\")\n</code></pre>\n\n<p>i got empty result, though as you see bellow ,there are values:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ZBYCC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZBYCC.png\" alt=\"enter image description here\"></a></p>\n\n<p>I am suing scrapy </p>\n"}, {"tags": ["python", "pandas", "nlp", "scikit-learn"], "answers": [{"comments": [{"owner": {"reputation": 611, "user_id": 4747049, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ebdaca2ce82d8c4e8b6de943e9430224?s=128&d=identicon&r=PG&f=1", "display_name": "Zachary Nagler", "link": "https://stackoverflow.com/users/4747049/zachary-nagler"}, "edited": false, "score": 1, "creation_date": 1458225315, "post_id": 36049639, "comment_id": 59773704, "body": "Worked like a charm, thank you.  And I appreciate the explanation"}], "tags": [], "owner": {"reputation": 29554, "user_id": 839957, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3ac5824c6cc4817a754a186d6a45a08b?s=128&d=identicon&r=PG", "display_name": "maxymoo", "link": "https://stackoverflow.com/users/839957/maxymoo"}, "is_accepted": false, "score": 2, "last_activity_date": 1458175317, "creation_date": 1458175317, "answer_id": 36049639, "question_id": 36047634, "link": "https://stackoverflow.com/questions/36047634/how-do-i-get-a-ranked-list-of-ngrams-with-frequencies-with-scikit-and-pandas/36049639#36049639", "title": "How do I get a ranked list of Ngrams with frequencies with scikit and pandas?", "body": "<p>You get the vocabulary out of your vectoriser with <code>vocabulary_</code>; the values are the columns of the vectorized output corresponding to the keys:</p>\n\n<pre><code>vectorizer.vocabulary_\n{'apple': 0,\n 'apple banana': 1,\n 'apple banana this': 2,\n</code></pre>\n\n<p>The frequencies will be the sums of the columns of <code>n_grams</code>, to calculate these it's probably easiest to convert the sparse matrix to a numpy array first with <code>toarray()</code>, then one way to match them up would be with a list comprehension:</p>\n\n<pre><code>vocab = vectorizer.vocabulary_\ncount_values = n_grams.toarray().sum(axis=0)\ncounts = sorted([(count_values[i],k) for k,i in vocab.items()], reverse=True)\n\ncounts\n[(4, 'pandas'),\n (4, 'cool pandas'),\n (4, 'cool'),\n (2, 'this is fun'),\n (2, 'this is'),\n</code></pre>\n"}], "owner": {"reputation": 611, "user_id": 4747049, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ebdaca2ce82d8c4e8b6de943e9430224?s=128&d=identicon&r=PG&f=1", "display_name": "Zachary Nagler", "link": "https://stackoverflow.com/users/4747049/zachary-nagler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 996, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1458175317, "creation_date": 1458165008, "question_id": 36047634, "link": "https://stackoverflow.com/questions/36047634/how-do-i-get-a-ranked-list-of-ngrams-with-frequencies-with-scikit-and-pandas", "title": "How do I get a ranked list of Ngrams with frequencies with scikit and pandas?", "body": "<p>I am trying to this simple task with scikit but I am having trouble working with the sparse matrix.  For this, I don't care about document frequency.</p>\n\n<p>This is what I have so far:</p>\n\n<pre><code>vectorizer = CountVectorizer(ngram_range=(1,3))\nn_grams = vectorizer.fit_transform(df.column_with_text)\n</code></pre>\n\n<p>At this point I know I am supposted to do something involving <code>n_grams</code> and <code>inverse_transform</code>, but I'm not sure what. I would like a list of [n_gram,frequency] ranked by frequency, like this:</p>\n\n<pre><code>\"apple banana\", 100\n\"this is fun\", 100\n\"cool pandas\", 99\n...\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "shell", "flask", "ipython", "bpython"], "answers": [{"tags": [], "owner": {"reputation": 273, "user_id": 5282033, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ngJ2I.png?s=128&g=1", "display_name": "E Rodriguez", "link": "https://stackoverflow.com/users/5282033/e-rodriguez"}, "is_accepted": false, "score": 0, "last_activity_date": 1473412271, "creation_date": 1473412271, "answer_id": 39407927, "question_id": 36047585, "link": "https://stackoverflow.com/questions/36047585/using-flask-script-shell-with-bpython-cant-get-app-context/39407927#39407927", "title": "Using Flask-Script shell with BPython can&#39;t get app context", "body": "<p>I reported <a href=\"https://github.com/smurfix/flask-script/issues/155\" rel=\"nofollow\">this issue</a>. It was a problem with BPython <a href=\"https://github.com/smurfix/flask-script/pull/165\" rel=\"nofollow\">https://github.com/smurfix/flask-script/pull/165</a></p>\n"}], "owner": {"reputation": 273, "user_id": 5282033, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ngJ2I.png?s=128&g=1", "display_name": "E Rodriguez", "link": "https://stackoverflow.com/users/5282033/e-rodriguez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 308, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1473412271, "creation_date": 1458164804, "last_edit_date": 1460137068, "question_id": 36047585, "link": "https://stackoverflow.com/questions/36047585/using-flask-script-shell-with-bpython-cant-get-app-context", "title": "Using Flask-Script shell with BPython can&#39;t get app context", "body": "<p>I am building a Flask application using app factory pattern. If I install BPython on my virtualenv, and use the shell, it seems like it cannot get the app context, and therefore when I try to do something like:</p>\n\n<pre><code>&gt;&gt; Role.query.all()\n</code></pre>\n\n<p>I get a RuntimeError:</p>\n\n<pre><code>application not registered on db instance and no application bound to current context\n</code></pre>\n\n<p>I have to use create the app context and do it like this:</p>\n\n<pre><code>with app.app_context():\n    ...\n    do stuff\n</code></pre>\n\n<p>However, if I use IPython, it works fine. In the docs it says it's ready for both BPython and IPython so I don't know why it's not creating the app context.</p>\n"}, {"tags": ["python", "class"], "comments": [{"owner": {"reputation": 15290, "user_id": 1913824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7793dc1a1117c0583651f716630e2403?s=128&d=identicon&r=PG", "display_name": "Andrea Corbellini", "link": "https://stackoverflow.com/users/1913824/andrea-corbellini"}, "edited": false, "score": 0, "creation_date": 1458164972, "post_id": 36047574, "comment_id": 59743747, "body": "What is not working? What is the expected output? Where is the relevant code?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1458165036, "post_id": 36047574, "comment_id": 59743781, "body": "&quot;It works fine except for the default dir()&quot; - that doesn&#39;t really make it clear what&#39;s going wrong or what problem you&#39;re trying to solve. You haven&#39;t showed us what you&#39;ve done or even asked us a question. Whatever you&#39;re trying to do, we can&#39;t help you with this little to work with."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5834524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c337c3f80bee0454edfe0a9748491bff?s=128&d=identicon&r=PG&f=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/5834524/clifford"}, "edited": false, "score": 0, "creation_date": 1535553386, "post_id": 36117054, "comment_id": 91110129, "body": "It&#39;s a long time since I asked the question, and the powers that be are threatening to cut me off on questions.  This answer works, but my question is why?  Where in the documentation is the difference between the top level and importing explained?  I was accused of not asking a question, so here it is.  Is there a python function g so that when it is imported dir() == g() is True?"}], "tags": [], "owner": {"reputation": 11, "user_id": 5834524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c337c3f80bee0454edfe0a9748491bff?s=128&d=identicon&r=PG&f=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/5834524/clifford"}, "is_accepted": false, "score": 0, "last_activity_date": 1458495057, "creation_date": 1458495057, "answer_id": 36117054, "question_id": 36047574, "link": "https://stackoverflow.com/questions/36047574/using-dir-at-the-top-level-within-a-class/36117054#36117054", "title": "Using dir() at the top level within a class", "body": "<p>To get the top level dir() affect within a class, load it upon startup, e.g., put the module in /.ipython/startup/.  The class then comes in at the <strong>main</strong> level.\nWith import it does not.  All obvious I guess, but not to the new guy.</p>\n"}], "owner": {"reputation": 11, "user_id": 5834524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c337c3f80bee0454edfe0a9748491bff?s=128&d=identicon&r=PG&f=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/5834524/clifford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1535560458, "creation_date": 1458164760, "last_edit_date": 1535560458, "question_id": 36047574, "link": "https://stackoverflow.com/questions/36047574/using-dir-at-the-top-level-within-a-class", "title": "Using dir() at the top level within a class", "body": "<p>Can you construct a Python function g such that when it is imported,</p>\n\n<p>dir() == g()</p>\n\n<p>returns True. This is really a question about the difference between importing \nand manually entering a function at the top level.  Many languages make some sort of distinction.  As the answer points out, there is a difference.  What is this difference and why?</p>\n\n<p>Another answer is simply to paste the function g into the top level, leaving out the question of a startup file, which, of course also works.</p>\n\n<p>This is my attempt to get back into the good graces of the \"powers that be\" who are threatening to banish me from question asking.  I have been thrown out of other places as well that did not want to support the First Amendment, but, of course there is an easy way back in.  The same comment appears below because I'm slow at finding the correct procedure.</p>\n"}, {"tags": ["python", "python-3.x", "tkinter"], "comments": [{"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1458166551, "post_id": 36047557, "comment_id": 59744487, "body": "<code>Toplevel.lift</code> is probably what you want, just pass the root window as argument and the toplevel will be lifted above the root."}], "answers": [{"tags": [], "owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "is_accepted": true, "score": 3, "last_activity_date": 1458654653, "last_edit_date": 1458654653, "creation_date": 1458166811, "answer_id": 36048048, "question_id": 36047557, "link": "https://stackoverflow.com/questions/36047557/how-to-make-toplevel-widget-appear-above-main-root-window/36048048#36048048", "title": "How to make Toplevel() widget appear above main root window?", "body": "<p>you can use the <code>.lift()</code> method on a Toplevel widget:</p>\n\n<pre><code>import tkinter\n\nroot = tkinter.Tk()\nroot.title(\"root\")\n\ntop = tkinter.Toplevel(root)\ntop.title(\"top\")\ntop.lift(root)\nroot.mainloop()\n</code></pre>\n\n<p>according to <a href=\"http://infohost.nmt.edu/tcc/help/pubs/tkinter/web/toplevel.html\" rel=\"nofollow\">this documentation</a> you should be able to just use <code>top.lift()</code> to raise above all other windows but it didn't seem to work for me.</p>\n\n<p>Edit: calling <code>top.lift()</code> without arguments does work when called during the mainloop, although since this question was specifically when starting the program that isn't very useful.</p>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 13115950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8254506c5362c386d26ad90508b5c979?s=128&d=identicon&r=PG&f=1", "display_name": "andsa", "link": "https://stackoverflow.com/users/13115950/andsa"}, "is_accepted": false, "score": 0, "last_activity_date": 1585054207, "creation_date": 1585054207, "answer_id": 60831399, "question_id": 36047557, "link": "https://stackoverflow.com/questions/36047557/how-to-make-toplevel-widget-appear-above-main-root-window/60831399#60831399", "title": "How to make Toplevel() widget appear above main root window?", "body": "<p>try attributes</p>\n\n<pre><code>import tkinter\n\nroot = tkinter.Tk()\nroot.title(\"root\")\n\ntop = tkinter.Toplevel(root)\ntop.attributes('-topmost', 'true')\ntop.title(\"top\")\n\nroot.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 459, "user_id": 6036220, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/395afbeee673a5b025aa004bf8a200a5?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Boy", "link": "https://stackoverflow.com/users/6036220/tom-boy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1682, "favorite_count": 0, "accepted_answer_id": 36048048, "answer_count": 2, "score": 1, "last_activity_date": 1585054207, "creation_date": 1458164701, "last_edit_date": 1458165623, "question_id": 36047557, "link": "https://stackoverflow.com/questions/36047557/how-to-make-toplevel-widget-appear-above-main-root-window", "title": "How to make Toplevel() widget appear above main root window?", "body": "<p>I have made a Toplevel widget but when it pops up it always appears below my root window. Is there an easy way I can make it come to the top most level when it pops up?</p>\n"}, {"tags": ["python", "proxy", "python-requests"], "comments": [{"owner": {"reputation": 1096, "user_id": 6061947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99f89bd4c6b19d14dc3d682c08242cc4?s=128&d=identicon&r=PG&f=1", "display_name": "Cory Shay", "link": "https://stackoverflow.com/users/6061947/cory-shay"}, "edited": false, "score": 0, "creation_date": 1458164582, "post_id": 36047506, "comment_id": 59743586, "body": "Too many files open would lead me to believe when crawling the pages you are writing the results to a file and those aren&#39;t being closed. I would suggest adding a snippet of your code to help clarify the issue."}, {"owner": {"reputation": 981, "user_id": 4637358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sIfTB.jpg?s=128&g=1", "display_name": "1a1a11a", "link": "https://stackoverflow.com/users/4637358/1a1a11a"}, "reply_to_user": {"reputation": 1096, "user_id": 6061947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99f89bd4c6b19d14dc3d682c08242cc4?s=128&d=identicon&r=PG&f=1", "display_name": "Cory Shay", "link": "https://stackoverflow.com/users/6061947/cory-shay"}, "edited": false, "score": 0, "creation_date": 1458165010, "post_id": 36047506, "comment_id": 59743766, "body": "I am not writing anything to disk, just fetching and analyzing, let me simplify the code and paste it."}, {"owner": {"reputation": 981, "user_id": 4637358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sIfTB.jpg?s=128&g=1", "display_name": "1a1a11a", "link": "https://stackoverflow.com/users/4637358/1a1a11a"}, "reply_to_user": {"reputation": 1096, "user_id": 6061947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99f89bd4c6b19d14dc3d682c08242cc4?s=128&d=identicon&r=PG&f=1", "display_name": "Cory Shay", "link": "https://stackoverflow.com/users/6061947/cory-shay"}, "edited": false, "score": 0, "creation_date": 1458167150, "post_id": 36047506, "comment_id": 59744745, "body": "Pinpoint the problem now, it is because of phantomJS, the part of code is not written by me, I have corrected that. It should not happen now. How can I close this question?"}, {"owner": {"reputation": 1096, "user_id": 6061947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99f89bd4c6b19d14dc3d682c08242cc4?s=128&d=identicon&r=PG&f=1", "display_name": "Cory Shay", "link": "https://stackoverflow.com/users/6061947/cory-shay"}, "edited": false, "score": 0, "creation_date": 1458167193, "post_id": 36047506, "comment_id": 59744760, "body": "You could add an answer stating it was an issue with phantomJS and then accept it as the answer."}, {"owner": {"reputation": 981, "user_id": 4637358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sIfTB.jpg?s=128&g=1", "display_name": "1a1a11a", "link": "https://stackoverflow.com/users/4637358/1a1a11a"}, "reply_to_user": {"reputation": 1096, "user_id": 6061947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99f89bd4c6b19d14dc3d682c08242cc4?s=128&d=identicon&r=PG&f=1", "display_name": "Cory Shay", "link": "https://stackoverflow.com/users/6061947/cory-shay"}, "edited": false, "score": 0, "creation_date": 1458172394, "post_id": 36047506, "comment_id": 59746711, "body": "Wmm, phantomJS&#39;s problem has been solved, but still same error, guess still something wrong with requests module."}, {"owner": {"reputation": 1096, "user_id": 6061947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99f89bd4c6b19d14dc3d682c08242cc4?s=128&d=identicon&r=PG&f=1", "display_name": "Cory Shay", "link": "https://stackoverflow.com/users/6061947/cory-shay"}, "edited": false, "score": 0, "creation_date": 1458234975, "post_id": 36047506, "comment_id": 59781129, "body": "I know you&#39;ve seen the <a href=\"https://github.com/kennethreitz/requests/issues/239\" rel=\"nofollow noreferrer\">requests thread</a> talking about this issue, are you closing the response each time with <code>response.close()</code>?"}, {"owner": {"reputation": 981, "user_id": 4637358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sIfTB.jpg?s=128&g=1", "display_name": "1a1a11a", "link": "https://stackoverflow.com/users/4637358/1a1a11a"}, "reply_to_user": {"reputation": 1096, "user_id": 6061947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99f89bd4c6b19d14dc3d682c08242cc4?s=128&d=identicon&r=PG&f=1", "display_name": "Cory Shay", "link": "https://stackoverflow.com/users/6061947/cory-shay"}, "edited": false, "score": 0, "creation_date": 1458235403, "post_id": 36047506, "comment_id": 59781429, "body": "I didn&#39;t close that, because I did try that, but it seems after close, the response is still readable."}, {"owner": {"reputation": 981, "user_id": 4637358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sIfTB.jpg?s=128&g=1", "display_name": "1a1a11a", "link": "https://stackoverflow.com/users/4637358/1a1a11a"}, "reply_to_user": {"reputation": 1096, "user_id": 6061947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99f89bd4c6b19d14dc3d682c08242cc4?s=128&d=identicon&r=PG&f=1", "display_name": "Cory Shay", "link": "https://stackoverflow.com/users/6061947/cory-shay"}, "edited": false, "score": 0, "creation_date": 1458235435, "post_id": 36047506, "comment_id": 59781450, "body": "Oh, do you mean response.close() will close the connection, but content will not be deleted?"}, {"owner": {"reputation": 1096, "user_id": 6061947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99f89bd4c6b19d14dc3d682c08242cc4?s=128&d=identicon&r=PG&f=1", "display_name": "Cory Shay", "link": "https://stackoverflow.com/users/6061947/cory-shay"}, "edited": false, "score": 0, "creation_date": 1458235740, "post_id": 36047506, "comment_id": 59781645, "body": "You should be able to get the information from the response object still, or you could call it after you processed the information within the response."}, {"owner": {"reputation": 1096, "user_id": 6061947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99f89bd4c6b19d14dc3d682c08242cc4?s=128&d=identicon&r=PG&f=1", "display_name": "Cory Shay", "link": "https://stackoverflow.com/users/6061947/cory-shay"}, "edited": false, "score": 0, "creation_date": 1458241600, "post_id": 36047506, "comment_id": 59785184, "body": "Yes, that is correct. It should close the connection and you should be able to still use the information."}, {"owner": {"reputation": 981, "user_id": 4637358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sIfTB.jpg?s=128&g=1", "display_name": "1a1a11a", "link": "https://stackoverflow.com/users/4637358/1a1a11a"}, "reply_to_user": {"reputation": 1096, "user_id": 6061947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99f89bd4c6b19d14dc3d682c08242cc4?s=128&d=identicon&r=PG&f=1", "display_name": "Cory Shay", "link": "https://stackoverflow.com/users/6061947/cory-shay"}, "edited": false, "score": 0, "creation_date": 1458260352, "post_id": 36047506, "comment_id": 59793967, "body": "Yes, you are right, it&#39;s much better now."}, {"owner": {"reputation": 1096, "user_id": 6061947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99f89bd4c6b19d14dc3d682c08242cc4?s=128&d=identicon&r=PG&f=1", "display_name": "Cory Shay", "link": "https://stackoverflow.com/users/6061947/cory-shay"}, "edited": false, "score": 0, "creation_date": 1458260813, "post_id": 36047506, "comment_id": 59794076, "body": "That is good to hear, be sure to add an answer stating the issue was resolved by using <code>response.close()</code> to ensure the connections are closed."}, {"owner": {"reputation": 981, "user_id": 4637358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sIfTB.jpg?s=128&g=1", "display_name": "1a1a11a", "link": "https://stackoverflow.com/users/4637358/1a1a11a"}, "reply_to_user": {"reputation": 1096, "user_id": 6061947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99f89bd4c6b19d14dc3d682c08242cc4?s=128&d=identicon&r=PG&f=1", "display_name": "Cory Shay", "link": "https://stackoverflow.com/users/6061947/cory-shay"}, "edited": false, "score": 0, "creation_date": 1458320246, "post_id": 36047506, "comment_id": 59824531, "body": "Sure, I will add the answer after I finish testing very soon, actually the other problem is using proxy won&#39;t give me a higher throughput, do you know why? Or how to debug that? The situation is: previously I use two threads without proxy to crawling, now I use 30 threads with proxies for crawling, but I don&#39;t see any increase in speed, but I neither hit the limit of CPU/RAM/Disk, nor bandwidth limit. Also I only choose the proxy respond within 3 seconds (throw away the slow ones).  @CoryShay"}, {"owner": {"reputation": 1096, "user_id": 6061947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99f89bd4c6b19d14dc3d682c08242cc4?s=128&d=identicon&r=PG&f=1", "display_name": "Cory Shay", "link": "https://stackoverflow.com/users/6061947/cory-shay"}, "edited": false, "score": 0, "creation_date": 1458320809, "post_id": 36047506, "comment_id": 59824895, "body": "Have you verified that the proxy is in fact being used, by testing the connection against something like <a href=\"https://www.whatismyip.com/\" rel=\"nofollow noreferrer\">whatismyip.com</a>? It is possible depending on the number of proxies you are using that the site(s) you are connecting against is throttling your connections. Usually there will be a little bit of overhead when using proxies also since they may also be throttling connections and there is an extra hop+."}, {"owner": {"reputation": 981, "user_id": 4637358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sIfTB.jpg?s=128&g=1", "display_name": "1a1a11a", "link": "https://stackoverflow.com/users/4637358/1a1a11a"}, "reply_to_user": {"reputation": 1096, "user_id": 6061947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99f89bd4c6b19d14dc3d682c08242cc4?s=128&d=identicon&r=PG&f=1", "display_name": "Cory Shay", "link": "https://stackoverflow.com/users/6061947/cory-shay"}, "edited": false, "score": 0, "creation_date": 1458333377, "post_id": 36047506, "comment_id": 59831803, "body": "Yes, I randomly test the proxy, it is working as far as I know, and I guess 30 threads are not many enough to have a large website to reach its bottleneck. In my situation, I have over 200 proxies and 30 threads, each randomly pick one proxy or use my own ip to access the target, after getting the webpage, it saves some content into a tree, the structure is protected by a lock from simultaneously updating. I just can&#39;t figure out why using 30 threads is even slower than using 2 threads without proxies. What are the possible reasons besides slow proxy? And how can I debug that? @CoryShay"}, {"owner": {"reputation": 1096, "user_id": 6061947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99f89bd4c6b19d14dc3d682c08242cc4?s=128&d=identicon&r=PG&f=1", "display_name": "Cory Shay", "link": "https://stackoverflow.com/users/6061947/cory-shay"}, "edited": false, "score": 0, "creation_date": 1458337395, "post_id": 36047506, "comment_id": 59833823, "body": "Since you said you save the information into a tree that has a lock around it, when you increase the # of threads, it is entirely possible that is your bottleneck. Since you have 30 threads trying to get access to the object they all have to wait while another one modifies it. You may be better off having them all put the information into a queue and a finishing thread place them into your tree structure. So only one thread has to access the tree structure, and each thread has it&#39;s own queue to append information to."}, {"owner": {"reputation": 1096, "user_id": 6061947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99f89bd4c6b19d14dc3d682c08242cc4?s=128&d=identicon&r=PG&f=1", "display_name": "Cory Shay", "link": "https://stackoverflow.com/users/6061947/cory-shay"}, "reply_to_user": {"reputation": 981, "user_id": 4637358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sIfTB.jpg?s=128&g=1", "display_name": "1a1a11a", "link": "https://stackoverflow.com/users/4637358/1a1a11a"}, "edited": false, "score": 0, "creation_date": 1458337577, "post_id": 36047506, "comment_id": 59833905, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/106766/discussion-between-cory-shay-and-1a1a11a\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 981, "user_id": 4637358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sIfTB.jpg?s=128&g=1", "display_name": "1a1a11a", "link": "https://stackoverflow.com/users/4637358/1a1a11a"}, "is_accepted": true, "score": 0, "last_activity_date": 1458445174, "creation_date": 1458445174, "answer_id": 36109975, "question_id": 36047506, "link": "https://stackoverflow.com/questions/36047506/using-proxies-with-python-requests/36109975#36109975", "title": "Using proxies with python requests", "body": "<p>Just as Cory Shay mentioned in the comment, response.close() will close the connection, but the content of response is still available. </p>\n"}], "owner": {"reputation": 981, "user_id": 4637358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sIfTB.jpg?s=128&g=1", "display_name": "1a1a11a", "link": "https://stackoverflow.com/users/4637358/1a1a11a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1418, "favorite_count": 0, "accepted_answer_id": 36109975, "answer_count": 1, "score": 1, "last_activity_date": 1458445174, "creation_date": 1458164483, "last_edit_date": 1458175891, "question_id": 36047506, "link": "https://stackoverflow.com/questions/36047506/using-proxies-with-python-requests", "title": "Using proxies with python requests", "body": "<p>I am writing a crawler using multiple proxies, basically (I have a pool of verified proxies) in a single process, I start 30 threads, each random picks one of the proxies and use it to fetch some url and I set the timeout of each request to 30 seconds. \nHowever, after running for a while, I got the error of opening too many files, I guess there are some connections not closed? \nAnd if I don't use proxy with same number of threads, there are no such error. \nCould someone help? </p>\n\n<h2>Code:</h2>\n\n<p>code starting threads: </p>\n\n<pre><code>    ...\n    # the queue of url for request \n    queue.add_url(url)\n    for i in range(numOfThreads):\n        x = crawlerThread(...)\n        threadList.append(x)\n        x.start()\n        time.sleep(30)\n    ... \n</code></pre>\n\n<p>code in crawling: </p>\n\n<pre><code>    while currentUrl:\n        # different sessions use different ip of the servers \n        sessionId = (sessionId+1) % len(self.sessions)\n        try:\n            session, proxy = self.random_use_ip_session_proxy(sessionId)\n            if proxy:\n                # if proxy is not None, use proxy, otherwise use my own ip, returned proxy is list of two elements, \n                # the first one is proxy, second one is for counting \n                response = session.get(currentUrl, timeout=60, verify=False, proxies=proxy[0])\n            else:\n                response = session.get(currentUrl, timeout=60, verify=False)\n\n        except Exception as e:\n            # some error handling \n\n        ... # analyze the code and produce more url \n</code></pre>\n\n<h2>Edit:</h2>\n\n<p>Now the program won't report too many open file error (I am still seeing the number of socket connects grow rapidly till 10000), but suddenly it just stopped with no error, is it possible somehow it is killed by kernel? Where can I check this? </p>\n"}, {"tags": ["python", "xml", "replace"], "comments": [{"owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "edited": false, "score": 0, "creation_date": 1458163999, "post_id": 36047285, "comment_id": 59743292, "body": "Is there any other punctuation like full stops or exclamation marks that you want to consider or do you you always want the question to start from the beginning of a turn?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5780010"}, "reply_to_user": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "edited": false, "score": 0, "creation_date": 1458166244, "post_id": 36047285, "comment_id": 59744345, "body": "No, I only need to find the preceding question mark (actually the closing element <code>&lt;&#47;question&gt;</code> since it is easy to replace &quot;?&quot; by <code>?&lt;&#47;question&gt;</code>) or the end of the <code>&lt;Turn&gt;</code> element if it intervenes between to questions. Ideally I would also have to like a tag inside the question element indicating the line number of the file where the question begins (something like <code>&lt;question line=&quot;48&quot;&gt;</code>, which I guess would be easy to add afterwards)"}], "answers": [{"tags": [], "owner": {"reputation": 3765, "user_id": 5828883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/146cf80315cf243c6e1d6bc64cfdb454?s=128&d=identicon&r=PG", "display_name": "RootTwo", "link": "https://stackoverflow.com/users/5828883/roottwo"}, "is_accepted": true, "score": 0, "last_activity_date": 1458170621, "creation_date": 1458170621, "answer_id": 36048864, "question_id": 36047285, "link": "https://stackoverflow.com/questions/36047285/python-find-and-replace-questions-in-xml-files/36048864#36048864", "title": "Python find and replace questions in xml files", "body": "<pre><code>import re\n\n# Using re.split with grouping parens so the separators get returned in the split results\nchunk = re.split(r'(&lt;Turn.*?&gt;|\\?)', original_text)\n\n# The \"&lt;Turn...&gt;\" and \"?\" separators are at the odd indexes. These are the\n# places that '&lt;question&gt;' and '&lt;/question&gt;' need to be inserted.\nfor i in range(1, len(chunk), 2):\n    if chunk[i] == '?':\n        chunk[i-2] += '&lt;question&gt;'\n        chunk[i] += '&lt;/question&gt;'\n\nnew_text = ''.join(chunk)\n\nprint(new_text)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5780010"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 36048864, "answer_count": 1, "score": 0, "last_activity_date": 1458170621, "creation_date": 1458163667, "question_id": 36047285, "link": "https://stackoverflow.com/questions/36047285/python-find-and-replace-questions-in-xml-files", "title": "Python find and replace questions in xml files", "body": "<p>I want to modify several xml files (linguistic corpora) by adding a special element <code>&lt;question&gt;</code> to be able to operate more easily on strings representing questions.</p>\n\n<p>Here is an example of a xml file I have:</p>\n\n<pre><code>&lt;Turn speaker=\"spk2\" startTime=\"4836.047\" endTime=\"4840.004\"&gt;\n&lt;Sync time=\"4836.047\"/&gt;\nsome text\n&lt;Sync time=\"4837.199\"/&gt;\nfirst question ?\n&lt;/Turn&gt;\n&lt;Turn speaker=\"spk1\" startTime=\"4840.004\" endTime=\"4840.768\"&gt;\n&lt;Sync time=\"4840.004\"/&gt;\ntext\n&lt;Event desc=\"rire\" type=\"noise\" extent=\"instantaneous\"/&gt;\n&lt;/Turn&gt;\n&lt;Turn speaker=\"spk2\" startTime=\"4840.768\" endTime=\"4846.534\"&gt;\nsecond question ?\n&lt;Sync time=\"4840.768\"/&gt;\nthird question? fourth question ? text\n&lt;/Turn&gt;\n</code></pre>\n\n<p>And the result I want:</p>\n\n<pre><code>&lt;Turn speaker=\"spk2\" startTime=\"4836.047\" endTime=\"4840.004\"&gt;&lt;question&gt;\n&lt;Sync time=\"4836.047\"/&gt;\nsome text\n&lt;Sync time=\"4837.199\"/&gt;\nfirst question ?&lt;/question&gt;\n&lt;/Turn&gt;\n&lt;Turn speaker=\"spk1\" startTime=\"4840.004\" endTime=\"4840.768\"&gt;\n&lt;Sync time=\"4840.004\"/&gt;\ntext\n&lt;Event desc=\"rire\" type=\"noise\" extent=\"instantaneous\"/&gt;\n&lt;/Turn&gt;\n&lt;Turn speaker=\"spk2\" startTime=\"4840.768\" endTime=\"4846.534\"&gt;&lt;question&gt;\nsecond question ?&lt;/question&gt;&lt;question&gt;\n&lt;Sync time=\"4840.768\"/&gt;\nthird question?&lt;/question&gt;&lt;question&gt; fourth question ?&lt;/question&gt; text\n&lt;/Turn&gt;\n</code></pre>\n\n<p>Basically, it has to replace every question mark with <code>?&lt;/question&gt;</code>, and then go up in the text to find <strong>either</strong> another <code>?&lt;/question&gt;</code> <strong>or</strong> an element <code>&lt;Turn&gt;</code>, and then add the opening <code>&lt;question&gt;</code> here.</p>\n\n<p>The first element would also contain the string \"some text\", but this is what I want since I have no way to find the beginning of a question anyway.</p>\n\n<p>I would really prefer to do that with python since I will have to use lxml library afterwards. And I'd also like to preserve the number of newlines from the original file.</p>\n\n<p>I tried to do that with regex, but it seems a bit complicated since I have to consider newlines and also overlapping, besides having several groups. I came up with the following regex but that captures too much:</p>\n\n<pre><code>(&lt;/question&gt;|&lt;Turn.*&gt;)([\\s\\S]*&lt;/question&gt;)\n</code></pre>\n\n<p>I also tried something with a for loop on strings but being kind of new to python and programming in general I couldn't achieve what I want.</p>\n"}, {"tags": ["python", "pygame"], "comments": [{"owner": {"reputation": 1220, "user_id": 5878272, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/14e96159153b67fab5222b7c5fa18c71?s=128&d=identicon&r=PG&f=1", "display_name": "Fredrik", "link": "https://stackoverflow.com/users/5878272/fredrik"}, "reply_to_user": {"reputation": 7725, "user_id": 4889267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b86b65464f4070d38bbf2abdbd4f1610?s=128&d=identicon&r=PG&f=1", "display_name": "AK47", "link": "https://stackoverflow.com/users/4889267/ak47"}, "edited": false, "score": 1, "creation_date": 1458198687, "post_id": 36047209, "comment_id": 59754946, "body": "@Alan That is not how you do this in game programming. You use the time since last iteration of the main loop to keep track of timers and such."}], "answers": [{"comments": [{"owner": {"reputation": 1220, "user_id": 5878272, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/14e96159153b67fab5222b7c5fa18c71?s=128&d=identicon&r=PG&f=1", "display_name": "Fredrik", "link": "https://stackoverflow.com/users/5878272/fredrik"}, "edited": false, "score": 0, "creation_date": 1458198821, "post_id": 36047752, "comment_id": 59755020, "body": "The correct answer here is 1. The threaded solution should never be used. You might wanna show an example with pygame.time.Clock and it&#39;s tick function. It retruns the time since the last call to tick"}], "tags": [], "owner": {"reputation": 1716, "user_id": 3757614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56bd133b7feaee7fde836a20e59d9e49?s=128&d=identicon&r=PG&f=1", "display_name": "user3757614", "link": "https://stackoverflow.com/users/3757614/user3757614"}, "is_accepted": false, "score": 0, "last_activity_date": 1458165526, "creation_date": 1458165526, "answer_id": 36047752, "question_id": 36047209, "link": "https://stackoverflow.com/questions/36047209/delay-one-thing-in-python-without-delaying-anything-else/36047752#36047752", "title": "Delay one thing in python without delaying anything else", "body": "<p>There are 2 ways to do this:</p>\n\n<p>1) Store the current state, using a class. Every frame you call a specific function with the number of milliseconds since the last frame, and have it figure out if it needs to do anything this frame.</p>\n\n<p>2) Threaded programming. You create a start a thread that just has the job of running that animation, and spends most of its time asleep.</p>\n"}], "owner": {"reputation": 1, "user_id": 5960465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c04a83be1c381aa7e685bea15e8e6ef8?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Sears", "link": "https://stackoverflow.com/users/5960465/matthew-sears"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1458165526, "creation_date": 1458163413, "question_id": 36047209, "link": "https://stackoverflow.com/questions/36047209/delay-one-thing-in-python-without-delaying-anything-else", "title": "Delay one thing in python without delaying anything else", "body": "<p>I want this animation to play with a slight delay inbetween each dripx() command, but I can't delay anything else because the players character is also effected by any sleep/wait commands. (Kinda new to python/pygame so I don't know everything)</p>\n\n<pre><code>def wateranimation():\n    drip1()\n    drip2()\n    drip3()\n    drip4()\n    drip5()\n    drip6()\n</code></pre>\n"}, {"tags": ["python", "pandas", "matplotlib"], "comments": [{"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1458166140, "post_id": 36047163, "comment_id": 59744287, "body": "for me it is exactly as you describe it: <code>the height is just the height of &#39;Total&#39;</code>. Where would you like to have annotations?"}, {"owner": {"reputation": 106, "user_id": 1297798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce238498df04185f7f45d15f4b8ea501?s=128&d=identicon&r=PG", "display_name": "Scubed", "link": "https://stackoverflow.com/users/1297798/scubed"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1458196429, "post_id": 36047163, "comment_id": 59753994, "body": "Ok, what is happening in my chart is that the annotations are happening at a height = height of total + height of all the products in the stacked column. I just want the annotations to happen at the height of the total"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10005524, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WwKvEPZbhZQ/AAAAAAAAAAI/AAAAAAAAAHY/zFyFBxaGclE/photo.jpg?sz=128", "display_name": "Jordy", "link": "https://stackoverflow.com/users/10005524/jordy"}, "is_accepted": false, "score": 0, "last_activity_date": 1549638541, "last_edit_date": 1549638541, "creation_date": 1549612473, "answer_id": 54588055, "question_id": 36047163, "link": "https://stackoverflow.com/questions/36047163/having-trouble-with-adding-value-labels-to-a-pandas-dataframe-bar-plot/54588055#54588055", "title": "Having trouble with adding value labels to a Pandas dataframe bar plot", "body": "<p>I ran the following code, and didn't modify much. All I did was set the year as index of the dataframe, and update th .ix to the .loc method call. </p>\n\n<p>Your problem might have been caused by not plotting against the year, but against a numerical index, which would then include the year as a value to be plotted on top of the data you are interested in.</p>\n\n<p>If I understand your question correctly the following code produces your desired results. I will ad a picture of my plot for you to verify.</p>\n\n<p><a href=\"https://i.stack.imgur.com/wsVq1.png\" rel=\"nofollow noreferrer\">Plot of data</a></p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport pandas as pd\n\ndata = {\n    \"Year\": [2005, 2006],\n    \"Product1\": [123, 111],\n    \"Product2\": [123, 111],\n    \"Product3\": [123, 111],\n    \"Product4\": [123, 111],\n    \"Total\": [492, 444]\n}\n\ndf = pd.DataFrame(data).set_index(\"Year\", drop=True)\n\nfig,ax = plt.subplots()\nax =df.loc[:,df.columns.difference(['Total'])].plot.bar(stacked=True, colormap='coolwarm',figsize=(14,12),ax=ax)\nax.set_ylabel(\"Total sales\", fontsize=14)\nax.set_xlabel(\"Year\", fontsize=14)\nax.legend(loc='best', fancybox=True, framealpha=0.5)\nfor i, label in enumerate(list(df.index)):\n    score = df.loc[label]['Total']\n    ax.annotate(str(score), (i - 0.2, score))\nfig = ax.get_figure()\nfig.savefig('sumplot.png',dpi=100,bbox='Tight')\n</code></pre>\n"}], "owner": {"reputation": 106, "user_id": 1297798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce238498df04185f7f45d15f4b8ea501?s=128&d=identicon&r=PG", "display_name": "Scubed", "link": "https://stackoverflow.com/users/1297798/scubed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 898, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549638541, "creation_date": 1458163178, "last_edit_date": 1495540786, "question_id": 36047163, "link": "https://stackoverflow.com/questions/36047163/having-trouble-with-adding-value-labels-to-a-pandas-dataframe-bar-plot", "title": "Having trouble with adding value labels to a Pandas dataframe bar plot", "body": "<p>I've been struggling to add a simple thing as value labels to a Pandas dataframe bar plot. I've looked at over 20 threads (with these three being the most helpful - <a href=\"https://stackoverflow.com/questions/7423445/how-can-i-display-text-over-columns-in-a-bar-chart-in-matplotlib?rq=1\">How can I display text over columns in a bar chart in matplotlib?</a>, <a href=\"https://stackoverflow.com/questions/19917587/matplotlib-advanced-bar-plot/19919397#19919397\">matplotlib advanced bar plot</a> and <a href=\"https://stackoverflow.com/questions/23591254/python-pandas-matplotlib-annotating-labels-above-bar-chart-columns?rq=1\">Python pandas / matplotlib annotating labels above bar chart columns</a> and nothing is working.</p>\n\n<p>My data is not at all complex. The dataframe structure is:</p>\n\n<pre><code>+------+----------+----------+----------+----------+-------+\n| Year | Product1 | Product2 | Product3 | Product4 | Total |\n+------+----------+----------+----------+----------+-------+\n| 2005 |      123 |      123 |      123 |      123 |   492 |\n| 2006 |      111 |      111 |      111 |      111 |   444 |\n+------+----------+----------+----------+----------+-------+\n</code></pre>\n\n<p>with year being the index for the dataframe.</p>\n\n<p>The representation I'm looking for is simple. A stacked bar chart of all the products, with only the value label for 'Total' being displayed at the top of the stacked column (I don't want to represent 'Total' in the chart).</p>\n\n<p>The code that I've currently is:</p>\n\n<pre><code>fig,ax = plt.subplots()\nax =df.ix[:,df.columns.difference(['Total'])].plot.bar(stacked=True, colormap='coolwarm',figsize=(14,12),ax=ax)\nax.set_ylabel(\"Total sales\", fontsize=14)\nax.set_xlabel(\"Year\", fontsize=14)\nax.legend(loc='best', fancybox=True, framealpha=0.5)\nfor i, label in enumerate(list(df.index)):\n    score = df.ix[label]['Total']\n    ax.annotate(str(score), (i - 0.2, score))\nfig = ax.get_figure()\nfig.savefig('sumplot.png',dpi=100,bbox='Tight')\n</code></pre>\n\n<p>What I'm getting right now are values that are way off in the sky. I think this is because the height is being determined by the 'Total'+the values of all the other columns? Is there anyway to modify this so that the height is just the height of 'Total'? Fiddling with the value of score in the ax.annotate snippet doesnt help because in there is wide variation in the data values (the data structure above is just representative - not actual data)</p>\n"}, {"tags": ["python", "django", "rest", "django-rest-framework", "swagger"], "comments": [{"owner": {"reputation": 1474, "user_id": 2134124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NCNRz.jpg?s=128&g=1", "display_name": "Dineshs91", "link": "https://stackoverflow.com/users/2134124/dineshs91"}, "edited": false, "score": 0, "creation_date": 1499685620, "post_id": 36047050, "comment_id": 76994640, "body": "Hi, did you figure how to do this ?"}, {"owner": {"reputation": 2464, "user_id": 494631, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/20649650b6209254e570442e953a8f5f?s=128&d=identicon&r=PG", "display_name": "baldr", "link": "https://stackoverflow.com/users/494631/baldr"}, "reply_to_user": {"reputation": 1474, "user_id": 2134124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NCNRz.jpg?s=128&g=1", "display_name": "Dineshs91", "link": "https://stackoverflow.com/users/2134124/dineshs91"}, "edited": false, "score": 0, "creation_date": 1499693353, "post_id": 36047050, "comment_id": 77000450, "body": "No, I did not. It seems you may need to write your own frontend for this."}, {"owner": {"reputation": 1474, "user_id": 2134124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NCNRz.jpg?s=128&g=1", "display_name": "Dineshs91", "link": "https://stackoverflow.com/users/2134124/dineshs91"}, "edited": false, "score": 0, "creation_date": 1499695452, "post_id": 36047050, "comment_id": 77001993, "body": "Oh, thanks for the swift reply."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 1599112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e1c8995947365cb3d2b73318735a55f?s=128&d=identicon&r=PG", "display_name": "Thiago Char&#227;o", "link": "https://stackoverflow.com/users/1599112/thiago-char%c3%a3o"}, "is_accepted": false, "score": 0, "last_activity_date": 1487263369, "creation_date": 1487263369, "answer_id": 42279884, "question_id": 36047050, "link": "https://stackoverflow.com/questions/36047050/django-rest-swagger-how-to-group-endpoints/42279884#42279884", "title": "django-rest-swagger: how to group endpoints?", "body": "<p>You can have a urls.py in your tasks app (I assume there is one), and declare them in your /tasks urls.</p>\n\n<p>One of this for each of your endpoints</p>\n\n<pre><code>url(r'^ tasks/(?P&lt;task_id&gt;\\w+)$',\n    YourTaskView,\n    name='task'),\n</code></pre>\n\n<p>And this in your api root urls.py</p>\n\n<pre><code>url(r'^api/', include('api.tasks.urls'), name='my-api-root'),\n</code></pre>\n\n<p>BUT, looks like you could use <a href=\"http://www.django-rest-framework.org/api-guide/routers/\" rel=\"nofollow noreferrer\">DRF routers</a></p>\n"}, {"tags": [], "owner": {"reputation": 2464, "user_id": 494631, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/20649650b6209254e570442e953a8f5f?s=128&d=identicon&r=PG", "display_name": "baldr", "link": "https://stackoverflow.com/users/494631/baldr"}, "is_accepted": true, "score": 1, "last_activity_date": 1541083051, "last_edit_date": 1592644375, "creation_date": 1541083051, "answer_id": 53103478, "question_id": 36047050, "link": "https://stackoverflow.com/questions/36047050/django-rest-swagger-how-to-group-endpoints/53103478#53103478", "title": "django-rest-swagger: how to group endpoints?", "body": "<p>I see that people keep visiting this question and upvote it. This means the question is actual. I can describe what I ended up with with similar task recently.</p>\n<p>I created a YAML representation of API endpoints according to <a href=\"https://swagger.io/docs/specification/about/\" rel=\"nofollow noreferrer\">OpenAPI</a> spec. I had to keep the same API endpoints on the backend too and this is a drawback as this is not auto-generated docs.</p>\n<p>I installed <a href=\"https://swagger.io/tools/swagger-ui/\" rel=\"nofollow noreferrer\">Swagger-UI</a> with docker and it uses my YAML spec to represent Swagger page.</p>\n<p>It is easy to separate endpoints by custom groups and even have one endpoint in two groups.</p>\n"}], "owner": {"reputation": 2464, "user_id": 494631, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/20649650b6209254e570442e953a8f5f?s=128&d=identicon&r=PG", "display_name": "baldr", "link": "https://stackoverflow.com/users/494631/baldr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2543, "favorite_count": 1, "accepted_answer_id": 53103478, "answer_count": 2, "score": 13, "last_activity_date": 1541083051, "creation_date": 1458162743, "question_id": 36047050, "link": "https://stackoverflow.com/questions/36047050/django-rest-swagger-how-to-group-endpoints", "title": "django-rest-swagger: how to group endpoints?", "body": "<p>I am using Django REST Framework and django-rest-swagger library for building an API endpoints. I would like to group some API urls by custom attribute instead of URL.</p>\n\n<p>For example I have API endpoints and would like to group them by functions:</p>\n\n<pre><code># task list management\n\nGET /api/tasks/known  - get known tasks list with their parameters\nGET /api/tasks  - get last tasks list with their statuses\n\n# Tasks by ID management\n\nGET /api/task/12345  - get task result/status\nDELETE /api/task/12345  - Revoke task\n\n# Task by name management:\n# MyTask123\n\nGET /api/tasks/MyTask123 - get task info (parameters, etc)\nPOST /api/tasks/MyTask123 - async start new task\n\n# MySuperShinyTask777\n\nGET /api/tasks/MySuperShinyTask777 - get task info (parameters, etc)\nPOST /api/tasks/MySuperShinyTask777 - async start new task\n\n# scheduled tasks management\n\nGET /api/tasks/scheduled - get list of scheduled tasks\n\n# manage exact scheduled tasks\n\nPOST /api/tasks/scheduled/MyTask123 - schedule new task\nGET /api/tasks/scheduled/12345 - get scheduled task details\nPUT /api/tasks/scheduled/12345 - change scheduled task\nDELETE /api/tasks/scheduled/12345 - delete scheduled task\n</code></pre>\n\n<p>So I would like to show them grouped by roles. Now they grouped all only '/api/' and that's it.</p>\n\n<p>In <code>urls.py</code> I include it like this:</p>\n\n<pre><code>url(r'^api/', include('api.urls'), name='my-api-root'),\n</code></pre>\n\n<p>How can I do custom grouping for django-rest-swagger?</p>\n"}, {"tags": ["python", "algorithm", "combinatorics", "itertools"], "comments": [{"owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "edited": false, "score": 2, "creation_date": 1458164078, "post_id": 36047008, "comment_id": 59743337, "body": "I think you could try to find a &quot;normalized&quot; form for each set, and then put all those into a set. Of course, the tricky bit is making the normalized form unique. You could, e.g. sort the numbers in the set and make the most frequent number 1, the next 2, and so on, and use some similar metrics for breaking ties."}, {"owner": {"reputation": 2895, "user_id": 3412611, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/bPsp8.jpg?s=128&g=1", "display_name": "Tony Babarino", "link": "https://stackoverflow.com/users/3412611/tony-babarino"}, "edited": false, "score": 0, "creation_date": 1458165405, "post_id": 36047008, "comment_id": 59743948, "body": "Whats on the desired lists? Are those the winning coalitions or what?"}, {"owner": {"reputation": 1961, "user_id": 2275672, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Kn6X7.jpg?s=128&g=1", "display_name": "Alfredo Gimenez", "link": "https://stackoverflow.com/users/2275672/alfredo-gimenez"}, "edited": false, "score": 0, "creation_date": 1458165521, "post_id": 36047008, "comment_id": 59744003, "body": "You should use <code>set</code> objects instead of <code>list</code> objects if you want to compare lists regardless of ordering. It&#39;s also possible to have a set of sets."}, {"owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "reply_to_user": {"reputation": 2895, "user_id": 3412611, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/bPsp8.jpg?s=128&g=1", "display_name": "Tony Babarino", "link": "https://stackoverflow.com/users/3412611/tony-babarino"}, "edited": false, "score": 0, "creation_date": 1458165715, "post_id": 36047008, "comment_id": 59744087, "body": "@TonyBabarino Yes, the lists contain the winning coalitions;  tobias_k - looking into that approach;  spiffman - you can&#39;t put a set into a set (unhashable), you need to use <code>frozenset</code>"}, {"owner": {"reputation": 51837, "user_id": 2144669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7393f439028063515255b63ed94cfd?s=128&d=identicon&r=PG", "display_name": "David Eisenstat", "link": "https://stackoverflow.com/users/2144669/david-eisenstat"}, "edited": false, "score": 1, "creation_date": 1458166555, "post_id": 36047008, "comment_id": 59744489, "body": "You probably also want to avoid generating sets like <code>[[1, 2], [1, 2, 3, 4]]</code> that are not upward-closed (<code>[[1, 2, 3]]</code> and <code>[[1, 2, 4]]</code> are missing)?"}, {"owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "reply_to_user": {"reputation": 51837, "user_id": 2144669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7393f439028063515255b63ed94cfd?s=128&d=identicon&r=PG", "display_name": "David Eisenstat", "link": "https://stackoverflow.com/users/2144669/david-eisenstat"}, "edited": false, "score": 0, "creation_date": 1458166637, "post_id": 36047008, "comment_id": 59744519, "body": "@DavidEisenstat Jeez, definitely, I completed missed that."}, {"owner": {"reputation": 51837, "user_id": 2144669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7393f439028063515255b63ed94cfd?s=128&d=identicon&r=PG", "display_name": "David Eisenstat", "link": "https://stackoverflow.com/users/2144669/david-eisenstat"}, "edited": false, "score": 0, "creation_date": 1458166747, "post_id": 36047008, "comment_id": 59744563, "body": "Also, either a set or its complement should be winning, no?"}, {"owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "reply_to_user": {"reputation": 51837, "user_id": 2144669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7393f439028063515255b63ed94cfd?s=128&d=identicon&r=PG", "display_name": "David Eisenstat", "link": "https://stackoverflow.com/users/2144669/david-eisenstat"}, "edited": false, "score": 0, "creation_date": 1458167033, "post_id": 36047008, "comment_id": 59744680, "body": "@DavidEisenstat I don&#39;t believe; in the set-up [6; 3, 2, 1, 1], the coalition (1,2) has 3+2=5 votes and the coalition (3,4) has 1+1=2 votes, both of which are short of the 6 required votes. The winning coalitions are (1,2,3), (1,2,4), and (1,2,3,4). This does bring up an obvious point that I missed, which is that (1,2,3,4) always needs to be a winning coalition and the goal is to enumerate what might be called the &quot;subtraction chains&quot; of this set."}, {"owner": {"reputation": 2623, "user_id": 3697163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/611ce881510094605af96f479d2c0472?s=128&d=identicon&r=PG&f=1", "display_name": "DaveBensonPhillips", "link": "https://stackoverflow.com/users/3697163/davebensonphillips"}, "edited": false, "score": 0, "creation_date": 1458167105, "post_id": 36047008, "comment_id": 59744718, "body": "This seems like the kind of question that codegolf would gobble up. The simple task of de-golfing some pyth stands between you and the solution you need :)"}, {"owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "reply_to_user": {"reputation": 2623, "user_id": 3697163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/611ce881510094605af96f479d2c0472?s=128&d=identicon&r=PG&f=1", "display_name": "DaveBensonPhillips", "link": "https://stackoverflow.com/users/3697163/davebensonphillips"}, "edited": false, "score": 0, "creation_date": 1458167297, "post_id": 36047008, "comment_id": 59744804, "body": "@HumphreyTriscuit I like the ingenuity!"}], "answers": [{"comments": [{"owner": {"reputation": 51837, "user_id": 2144669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7393f439028063515255b63ed94cfd?s=128&d=identicon&r=PG", "display_name": "David Eisenstat", "link": "https://stackoverflow.com/users/2144669/david-eisenstat"}, "edited": false, "score": 0, "creation_date": 1458166112, "post_id": 36047866, "comment_id": 59744267, "body": "It&#39;s not minimal; this problem is graph-isomorphism-hard."}, {"owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "reply_to_user": {"reputation": 51837, "user_id": 2144669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7393f439028063515255b63ed94cfd?s=128&d=identicon&r=PG", "display_name": "David Eisenstat", "link": "https://stackoverflow.com/users/2144669/david-eisenstat"}, "edited": false, "score": 0, "creation_date": 1458166184, "post_id": 36047866, "comment_id": 59744308, "body": "@DavidEisenstat Do you know what would be the minimal number?"}, {"owner": {"reputation": 51837, "user_id": 2144669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7393f439028063515255b63ed94cfd?s=128&d=identicon&r=PG", "display_name": "David Eisenstat", "link": "https://stackoverflow.com/users/2144669/david-eisenstat"}, "edited": false, "score": 0, "creation_date": 1458166211, "post_id": 36047866, "comment_id": 59744325, "body": "Well, it might be in this special case, but not in general."}, {"owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "reply_to_user": {"reputation": 51837, "user_id": 2144669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7393f439028063515255b63ed94cfd?s=128&d=identicon&r=PG", "display_name": "David Eisenstat", "link": "https://stackoverflow.com/users/2144669/david-eisenstat"}, "edited": false, "score": 0, "creation_date": 1458167210, "post_id": 36047866, "comment_id": 59744771, "body": "@DavidEisenstat Do you have an example of two &quot;equivalent&quot; lists that will not normalize to the same value? If not, is this set only minimal because the lists are very ordered to begin with?"}, {"owner": {"reputation": 51837, "user_id": 2144669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7393f439028063515255b63ed94cfd?s=128&d=identicon&r=PG", "display_name": "David Eisenstat", "link": "https://stackoverflow.com/users/2144669/david-eisenstat"}, "reply_to_user": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "edited": false, "score": 0, "creation_date": 1458177371, "post_id": 36047866, "comment_id": 59748189, "body": "@JaredGoguen I only know that (i) there&#39;s a reduction from graph isomorphism via a reduction where each edge gives rise to a coalition on the vertices that are not its endpoints (ii) this answer will not solve graph isomorphism."}, {"owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "reply_to_user": {"reputation": 51837, "user_id": 2144669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7393f439028063515255b63ed94cfd?s=128&d=identicon&r=PG", "display_name": "David Eisenstat", "link": "https://stackoverflow.com/users/2144669/david-eisenstat"}, "edited": false, "score": 0, "creation_date": 1458178407, "post_id": 36047866, "comment_id": 59748534, "body": "@DavidEisenstat I posted <a href=\"http://stackoverflow.com/questions/36049630/efficiently-generating-subtraction-chains\">another question</a> about this problem using a different approach per one of your comments. If you have a minute, would you mind checking it out? I have a bad feeling that I might be trying to solve an unsolvable problem and it would be lovely to verify that sooner rather than later."}], "tags": [], "owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "is_accepted": true, "score": 1, "last_activity_date": 1458166027, "creation_date": 1458166027, "answer_id": 36047866, "question_id": 36047008, "link": "https://stackoverflow.com/questions/36047008/check-if-two-nested-lists-are-equivalent-upon-substitution/36047866#36047866", "title": "Check if two nested lists are equivalent upon substitution", "body": "<p>This is probably no complete solution yet, but it might show you a direction to investigate further.</p>\n\n<p>You could map each element to some characteristics concerning the \"topology\", how it is \"connected\" with other elements. You have to be careful not to take the ordering in the sets into account, or -- obviously -- the element itself. You could, for example, consider how often the element appears, in what sized groups it appears, and something like this. Combine those metrics to a key function, sort the elements by that key, and assign them new names in that order.</p>\n\n<pre><code>def normalize(lists):\n    items = set(x for y in lists for x in y)\n    counter = itertools.count()\n    sorter = lambda x: sorted(len(y) for y in lists if x in y)\n    mapping = {k: next(counter) for k in sorted(items, key=sorter)}\n    return tuple(sorted(tuple(sorted(mapping[x] for x in y)) for y in lists))\n</code></pre>\n\n<p>This maps your two example lists to the same \"normalized\" list:</p>\n\n<pre><code>&gt;&gt;&gt; normalize([[1, 2], [1, 3], [2, 3], [1, 2, 4]])\n((0, 1), (0, 2), (1, 2), (1, 2, 3))\n&gt;&gt;&gt; normalize([[1, 3], [1, 2], [3, 2], [1, 3, 4]])\n((0, 1), (0, 2), (1, 2), (1, 2, 3))\n</code></pre>\n\n<p>When applied to all the lists, it gets the count down from 330 to 36. I don't know if this is minimal, but it looks like a good start.</p>\n\n<pre><code>&gt;&gt;&gt; normalized = set(map(normalize, set_of_lists))\n&gt;&gt;&gt; len(normalized)\n36\n</code></pre>\n"}], "owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 1, "accepted_answer_id": 36047866, "answer_count": 1, "score": 4, "last_activity_date": 1458241251, "creation_date": 1458162626, "last_edit_date": 1458241251, "question_id": 36047008, "link": "https://stackoverflow.com/questions/36047008/check-if-two-nested-lists-are-equivalent-upon-substitution", "title": "Check if two nested lists are equivalent upon substitution", "body": "<p>For some context, I'm trying to enumerate the number of unique situations that can occur when calculating the <a href=\"https://en.wikipedia.org/wiki/Banzhaf_power_index\" rel=\"nofollow\">Banzhaf power indices</a> for four players, when there is no dictator and there are either four or five winning coalitions.</p>\n\n<p>I am using the following code to generate a set of lists that I want to iterate over.</p>\n\n<pre><code>from itertools import chain, combinations\n\ndef powerset(iterable):\n    s = list(iterable)\n    return chain.from_iterable(map(list, combinations(s, r)) for r in range(2, len(s)+1))\n\ndef superpowerset(iterable):\n    s = powerset(iterable)\n    return chain.from_iterable(map(list, combinations(s, r)) for r in range(4, 6))\n\nset_of_lists = superpowerset([1,2,3,4])\n</code></pre>\n\n<p>However, two lists in this set shouldn't be considered unique if they are equivalent under remapping. </p>\n\n<p>Using the following list as an example:</p>\n\n<pre><code>[[1, 2], [1, 3], [2, 3], [1, 2, 4]]\n</code></pre>\n\n<p>If each element <code>2</code> is renamed to <code>3</code> and vice-versa, we would get:</p>\n\n<pre><code>[[1, 3], [1, 2], [3, 2], [1, 3, 4]]\n</code></pre>\n\n<p>The order in each sub-list is unimportant, and the order of the sub-lists is also un-important. Thus, the swapped list can be rewritten as:</p>\n\n<pre><code>[[1, 2], [1, 3], [2, 3], [1, 3, 4]]\n</code></pre>\n\n<p>There are 4 values, so there are P(4,4)=24 possible remappings that could occur (including the trivial mapping). </p>\n\n<p>Is there any way to check this easily? Or, even better, is there are way to avoid generating these lists to begin with? </p>\n\n<p>I'm not even sure how I would go about transforming the first list into the second list (but could brute force it from there). Also, I'm not restricted to data type (to a certain extent) and using <code>frozenset</code> would be fine.</p>\n\n<p><strong>Edit:</strong> The solution offered by tobias_k answers the \"checking\" question but, as noted in the comments, I think I have the wrong approach to this problem.</p>\n"}, {"tags": ["python", "http", "http-post", "csrf"], "comments": [{"owner": {"reputation": 2892, "user_id": 3991164, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/ciXQ9.jpg?s=128&g=1", "display_name": "flaschbier", "link": "https://stackoverflow.com/users/3991164/flaschbier"}, "edited": false, "score": 1, "creation_date": 1458163322, "post_id": 36046980, "comment_id": 59742938, "body": "Cross Site Request Forgery tokens are something different than logon credentials. You have to get it beforehand by a <code>GET</code> with the appropriate header. For a more precise answer, you have to provide more detail."}, {"owner": {"reputation": 163, "user_id": 634548, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f893190ae468b3430bd2ff39598e1921?s=128&d=identicon&r=PG", "display_name": "Leo Sutton", "link": "https://stackoverflow.com/users/634548/leo-sutton"}, "reply_to_user": {"reputation": 1985, "user_id": 2080712, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/NyaqQ.jpg?s=128&g=1", "display_name": "Bernardo Meurer", "link": "https://stackoverflow.com/users/2080712/bernardo-meurer"}, "edited": false, "score": 0, "creation_date": 1458163498, "post_id": 36046980, "comment_id": 59743019, "body": "@BernardMeurer It is a TalkTalk router HG635"}, {"owner": {"reputation": 163, "user_id": 634548, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f893190ae468b3430bd2ff39598e1921?s=128&d=identicon&r=PG", "display_name": "Leo Sutton", "link": "https://stackoverflow.com/users/634548/leo-sutton"}, "reply_to_user": {"reputation": 2892, "user_id": 3991164, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/ciXQ9.jpg?s=128&g=1", "display_name": "flaschbier", "link": "https://stackoverflow.com/users/3991164/flaschbier"}, "edited": false, "score": 0, "creation_date": 1458163590, "post_id": 36046980, "comment_id": 59743071, "body": "@flaschbier Yes, I understand that, I&#39;m fine with the csrf token. I was wondering how I could get what I need to include for &#39;Password&#39;"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 1, "creation_date": 1458163712, "post_id": 36046980, "comment_id": 59743123, "body": "I&#39;m a little confused what you&#39;re really asking.  Why can&#39;t you just fill in the &quot;Password&quot; value in that code you posted?"}, {"owner": {"reputation": 1096, "user_id": 6061947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99f89bd4c6b19d14dc3d682c08242cc4?s=128&d=identicon&r=PG&f=1", "display_name": "Cory Shay", "link": "https://stackoverflow.com/users/6061947/cory-shay"}, "edited": false, "score": 1, "creation_date": 1458164116, "post_id": 36046980, "comment_id": 59743354, "body": "If the password doesn&#39;t change on subsequent requests you can just pass in the numbers each time, otherwise it may be hashing the password or encoding it with base64. It may have a function within the javascript on the page that tokenizes the password. I would check that first."}], "owner": {"reputation": 163, "user_id": 634548, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f893190ae468b3430bd2ff39598e1921?s=128&d=identicon&r=PG", "display_name": "Leo Sutton", "link": "https://stackoverflow.com/users/634548/leo-sutton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 240, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1458162561, "creation_date": 1458162561, "question_id": 36046980, "link": "https://stackoverflow.com/questions/36046980/how-can-i-log-into-my-router-with-python", "title": "How can I log into my router with python?", "body": "<p>I am trying to log into my router using python. I'm using the requests library. The login page has two input fields, one for the username, one for the password. Clicking the submit makes a POST request to a different address containing</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>{\"csrf\":{\"csrf_param\":\"MP4ePcLs1yYJ64tMVNxrm79V6aN7Vih\",\"csrf_token\":\"l0AoSk5qsr4kSEMl2lFW9pYad/4DpYJ\"},\"data\":{\"UserName\":\"admin\",\"Password\":\"[a lot of letters and numbers, not my password]\"}}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I can see the csrf param and token in the page header, but I'm not sure what I should pass as the password.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["python", "user-interface", "python-3.x", "tkinter"], "answers": [{"tags": [], "owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "is_accepted": true, "score": 2, "last_activity_date": 1458163810, "creation_date": 1458163810, "answer_id": 36047336, "question_id": 36046968, "link": "https://stackoverflow.com/questions/36046968/tkinter-enable-maximize-button-when-resizable-is-false/36047336#36047336", "title": "Tkinter, enable maximize button when resizable is False", "body": "<p>No, there is no way to enable the maximize button when you set <code>resizable</code> to false. Generally speaking, you have no control over those buttons at all. You provide hints to the os/window manager such as with the <code>resizeable</code> attribute and <code>overrideredirect</code> method, but ultimately the OS/window manager decides what to put in the titlebar. </p>\n\n<p>Personally I recommend to never set <code>resizable</code> to false. I think it gives a bad user experience. The user knows better than I do what size they need a window to be. Maybe they have a monitor with a different resolution than me? Different fonts? Better eyesight? Worse eyesight?</p>\n"}], "owner": {"reputation": 51, "user_id": 4382780, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3VlvL.jpg?s=128&g=1", "display_name": "Gromit", "link": "https://stackoverflow.com/users/4382780/gromit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 36047336, "answer_count": 1, "score": 1, "last_activity_date": 1458163810, "creation_date": 1458162519, "question_id": 36046968, "link": "https://stackoverflow.com/questions/36046968/tkinter-enable-maximize-button-when-resizable-is-false", "title": "Tkinter, enable maximize button when resizable is False", "body": "<p>Is there a way to enable maximize button, when I have:</p>\n\n<pre><code>app.resizable(width=False, height=False)\n</code></pre>\n\n<p>I want just two states of a window, fixed size and maximized(fullscreen with a title)</p>\n"}, {"tags": ["python", "arrays", "numpy", "cython", "sympy"], "comments": [{"owner": {"reputation": 75386, "user_id": 161801, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0383e4cae325f65a1bbd906be4be2276?s=128&d=identicon&r=PG", "display_name": "asmeurer", "link": "https://stackoverflow.com/users/161801/asmeurer"}, "edited": false, "score": 0, "creation_date": 1458240706, "post_id": 36046942, "comment_id": 59784696, "body": "I&#39;m not 100% sure, but this might be a duplicate of <a href=\"https://stackoverflow.com/questions/35430479/convert-sympy-expressions-to-function-of-numpy-arrays\" title=\"convert sympy expressions to function of numpy arrays\">stackoverflow.com/questions/35430479/&hellip;</a>."}, {"owner": {"reputation": 75386, "user_id": 161801, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0383e4cae325f65a1bbd906be4be2276?s=128&d=identicon&r=PG", "display_name": "asmeurer", "link": "https://stackoverflow.com/users/161801/asmeurer"}, "edited": false, "score": 0, "creation_date": 1458240743, "post_id": 36046942, "comment_id": 59784719, "body": "You may also be interested in <a href=\"https://github.com/sympy/sympy/pull/10640\" rel=\"nofollow noreferrer\">github.com/sympy/sympy/pull/10640</a>"}, {"owner": {"reputation": 1185, "user_id": 6054326, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-TOp-QTMQJ7Y/AAAAAAAAAAI/AAAAAAAAFiI/MwmBvJaIs-U/photo.jpg?sz=128", "display_name": "Victor Chubukov", "link": "https://stackoverflow.com/users/6054326/victor-chubukov"}, "reply_to_user": {"reputation": 75386, "user_id": 161801, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0383e4cae325f65a1bbd906be4be2276?s=128&d=identicon&r=PG", "display_name": "asmeurer", "link": "https://stackoverflow.com/users/161801/asmeurer"}, "edited": false, "score": 0, "creation_date": 1458270112, "post_id": 36046942, "comment_id": 59796436, "body": "You&#39;re absolutely right, that question is asking the exact same thing. It looks like there is no perfect solution, but I will investigate the examples linked in the github thread."}], "answers": [{"tags": [], "owner": {"reputation": 1185, "user_id": 6054326, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-TOp-QTMQJ7Y/AAAAAAAAAAI/AAAAAAAAFiI/MwmBvJaIs-U/photo.jpg?sz=128", "display_name": "Victor Chubukov", "link": "https://stackoverflow.com/users/6054326/victor-chubukov"}, "is_accepted": true, "score": 0, "last_activity_date": 1506223138, "creation_date": 1506223138, "answer_id": 46386256, "question_id": 36046942, "link": "https://stackoverflow.com/questions/36046942/using-sympy-to-compile-a-function-with-array-arguments/46386256#46386256", "title": "using sympy to compile a function with array arguments", "body": "<p>The new scipy codegen tutorial covers a way to do this. </p>\n\n<p>An example I was able to follow and modify is here: <a href=\"http://www.sympy.org/scipy-2017-codegen-tutorial/notebooks/40-chemical-kinetics-cython.html\" rel=\"nofollow noreferrer\">http://www.sympy.org/scipy-2017-codegen-tutorial/notebooks/40-chemical-kinetics-cython.html</a></p>\n\n<p>The overview of the course is here: <a href=\"http://www.sympy.org/scipy-2017-codegen-tutorial/\" rel=\"nofollow noreferrer\">http://www.sympy.org/scipy-2017-codegen-tutorial/</a></p>\n"}], "owner": {"reputation": 1185, "user_id": 6054326, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-TOp-QTMQJ7Y/AAAAAAAAAAI/AAAAAAAAFiI/MwmBvJaIs-U/photo.jpg?sz=128", "display_name": "Victor Chubukov", "link": "https://stackoverflow.com/users/6054326/victor-chubukov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 466, "favorite_count": 0, "accepted_answer_id": 46386256, "answer_count": 1, "score": 2, "last_activity_date": 1506223138, "creation_date": 1458162458, "last_edit_date": 1458162851, "question_id": 36046942, "link": "https://stackoverflow.com/questions/36046942/using-sympy-to-compile-a-function-with-array-arguments", "title": "using sympy to compile a function with array arguments", "body": "<p>I'm curious about the right way to use the <code>sympy</code> function compilation routines (like <code>autowrap</code>) to create a function that takes array inputs.</p>\n\n<p>With <code>lambdify</code>, I can do either one of these:</p>\n\n<pre><code>import numpy as np\nimport sympy as sp\nx, y, a,b = sp.symbols('x,y,a,b')\nf=a*x**2 + b*y**3\n</code></pre>\n\n<p>A)</p>\n\n<pre><code>L1 = sp.lambdify([x,y,a,b],f)\nv1=np.array([1,2])\nv2=np.array([3,4])\nL1(*np.concatenate([v1,v2]))\n</code></pre>\n\n<blockquote>\n  <p>35</p>\n</blockquote>\n\n<p>B)</p>\n\n<pre><code>M1=sp.Matrix([x,y])\nM2=sp.Matrix([a,b])\nL2 = sp.lambdify([M1,M2],f)\nL2(v1,v2)\n</code></pre>\n\n<blockquote>\n  <p>35</p>\n</blockquote>\n\n<p>Presumably under the hood (B) does the same thing as (A).</p>\n\n<p>But with <code>autowrap</code> I only have option A as far as I can tell.</p>\n\n<pre><code>from sympy.utilities.autowrap import autowrap\nA1 = autowrap(f,args=[x,y,a,b],backend='cython')\nA1(*np.concatenate([v1,v2]))\n</code></pre>\n\n<blockquote>\n  <p>35.0</p>\n</blockquote>\n\n<pre><code>A2 = autowrap(f,args=[M1,M2],backend='cython')\n</code></pre>\n\n<blockquote>\n  <p>CodeGenArgumentListError: (\"Argument list didn't specify: a, b, x, y \", [InputArgument(a), InputArgument(b), InputArgument(x), InputArgument(y)])</p>\n</blockquote>\n\n<p>Is there a way to do this? My use case is compiling the dy/dx function for ODE simulation. The function (much much messier than the example above) needs to take an array of x values and an array of parameters. Right now I'm using the code above, with <code>np.concatenate</code> and python list expansion, and if I profile the code, the concatenation actually takes more time than the computation. So I would love to get around it, and have sympy take the last statement and generate some C code that looks like</p>\n\n<pre><code>double f(double* M1,double* M2) {\n   return M1[0]*pow(M2[0],2)+M1[1]*pow(M2[1],3)\n}\n</code></pre>\n\n<p>Presumably then the numpy arrays could get passed directly. </p>\n\n<p>Is that possible? Is there a better way to do this? Or am I overthinking/overoptimizing here?</p>\n"}, {"tags": ["python", "string", "ip"], "comments": [{"owner": {"reputation": 1683, "user_id": 3299157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fd2850c64bf866ed6e6b448eca08f0ea?s=128&d=identicon&r=PG&f=1", "display_name": "Ageonix", "link": "https://stackoverflow.com/users/3299157/ageonix"}, "edited": false, "score": 0, "creation_date": 1458164305, "post_id": 36046925, "comment_id": 59743439, "body": "<a href=\"https://docs.python.org/2/library/json.html\" rel=\"nofollow noreferrer\">docs.python.org/2/library/json.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1205, "user_id": 3194712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f89dab402d2e542594c66d57fe9e6dcc?s=128&d=identicon&r=PG&f=1", "display_name": "user3194712", "link": "https://stackoverflow.com/users/3194712/user3194712"}, "is_accepted": false, "score": 1, "last_activity_date": 1458163417, "last_edit_date": 1458163417, "creation_date": 1458162704, "answer_id": 36047036, "question_id": 36046925, "link": "https://stackoverflow.com/questions/36046925/how-can-i-use-this-string-to-read-dictionaries-in-python/36047036#36047036", "title": "How can I use this string to read dictionaries in Python?", "body": "<p>You can use the JSON module, or ast.literal_eval if you want to go that route.</p>\n\n<p>Using JSON,</p>\n\n<pre><code>import json\n\nnew_string = b'{\"data\":[{\"ip\":\"103.170.120.105\",\"fw\":\"443\"},{\"ip\":\"185.181.217.91\",\"fw\":\"204\"},{\"ip\":\"135.203.68.159\",\"fw\":\"105\"}]}'\n\n# If you're using Python3, you may need to do this:\nnew_string = new_string.decode('utf-8')\n\njson_string = json.loads(new_string)\ndata = json_string['data']\n\nfor item in data:\n  # your ip and fw will be accessible\n  # as item['ip'] and item['fw']\n\n  print item['ip'], item['fw']\n</code></pre>\n\n<p>Using ast.literal_eval:</p>\n\n<pre><code>import ast\n\nnew_string = b'{\"data\":[{\"ip\":\"103.170.120.105\",\"fw\":\"443\"},{\"ip\":\"185.181.217.91\",\"fw\":\"204\"},{\"ip\":\"135.203.68.159\",\"fw\":\"105\"}]}'\n\n# If you're using Python3, you may need to do this:\nnew_string = new_string.decode('utf-8')\n\nmy_dictionary = ast.literal_eval(new_string)\ndata = my_dictionary['data']\n\nfor item in data:\n  # your ip and fw are accessible the same way as above\n  print item['ip'], item['fw']\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5613725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52117f722bc54c52c25742d2d6bfe290?s=128&d=identicon&r=PG&f=1", "display_name": "Jokevillager", "link": "https://stackoverflow.com/users/5613725/jokevillager"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1460067838, "creation_date": 1458162392, "last_edit_date": 1460067838, "question_id": 36046925, "link": "https://stackoverflow.com/questions/36046925/how-can-i-use-this-string-to-read-dictionaries-in-python", "title": "How can I use this string to read dictionaries in Python?", "body": "<p>I have this string. How can I read out the ip and the fw data?</p>\n\n<pre><code>new_string = b'{\"data\":[{\"ip\":\"103.170.120.105\",\"fw\":\"443\"},\n                        {\"ip\":\"185.181.217.91\",\"fw\":\"204\"},\n                        {\"ip\":\"135.203.68.159\",\"fw\":\"105\"}]}'\n</code></pre>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 619481, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "edited": false, "score": 0, "creation_date": 1458164043, "post_id": 36046973, "comment_id": 59743317, "body": "I got it now - you are absolutely right, thanks! I&#39;ll update my answer."}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 1, "last_activity_date": 1458164717, "last_edit_date": 1458164717, "creation_date": 1458162539, "answer_id": 36046973, "question_id": 36046907, "link": "https://stackoverflow.com/questions/36046907/apply-pivot-to-pandas-dataframe/36046973#36046973", "title": "Apply Pivot to Pandas Dataframe", "body": "<p>you can add one column and then simply use <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.pivot_table.html\" rel=\"nofollow\">df.pivot_table()</a>:</p>\n\n<pre><code>In [196]: df['count'] = 1\n\n\nIn [198]: df.pivot_table(index='userId', columns='movieId', values='count', aggfunc='count', fill_value=0)\nOut[198]:\nmovieId  1  2  3  4\nuserId\n1        1  1  0  0\n2        1  0  1  0\n3        0  0  0  1\n</code></pre>\n\n<p>PS I have applied @jezrael's correction (added <code>aggfunc</code>) and now it will work also for the cases where there are more than one <code>movieId</code> per <code>userId</code>.</p>\n\n<p>Prove:</p>\n\n<pre><code>In [236]: df.loc[5]=[1,1,1]\n\nIn [237]: df\nOut[237]:\n   userId  movieId  count\n0       1        1      1\n1       1        2      1\n2       2        1      1\n3       2        3      1\n4       3        4      1\n5       1        1      1\n\nIn [238]: df.pivot_table(index='userId', columns='movieId', aggfunc='count', fill_value=0)\nOut[238]:\n        count\nmovieId     1  2  3  4\nuserId\n1           2  1  0  0\n2           1  0  1  0\n3           0  0  0  1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5221, "user_id": 2955541, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/fmqg5.png?s=128&g=1", "display_name": "slaw", "link": "https://stackoverflow.com/users/2955541/slaw"}, "edited": false, "score": 0, "creation_date": 1458174631, "post_id": 36046986, "comment_id": 59747385, "body": "Perfect and pythonic"}], "tags": [], "owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "is_accepted": true, "score": 2, "last_activity_date": 1458162580, "creation_date": 1458162580, "answer_id": 36046986, "question_id": 36046907, "link": "https://stackoverflow.com/questions/36046907/apply-pivot-to-pandas-dataframe/36046986#36046986", "title": "Apply Pivot to Pandas Dataframe", "body": "<p>You can call <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.pivot.html\" rel=\"nofollow\"><code>.pivot</code></a> on the df passing in the relevant cols for the index, columns and values. Here I create a boolean df as <code>NaN</code> values will be introduced where there are no values and cast the <code>dtype</code> to <code>int</code> to generate what you desire:</p>\n\n<pre><code>In [9]:\n(df.pivot(index='userId', columns='movieId', values='movieId') &gt; 0).astype(int)\n\nOut[9]:\nmovieId  1  2  3  4\nuserId             \n1        1  1  0  0\n2        1  0  1  0\n3        0  0  0  1\n</code></pre>\n\n<p>Here is what the intermediate pivot table looks like:</p>\n\n<pre><code>In [11]:\ndf.pivot(index='userId', columns='movieId', values='movieId')\n\nOut[11]:\nmovieId   1   2   3   4\nuserId                 \n1         1   2 NaN NaN\n2         1 NaN   3 NaN\n3       NaN NaN NaN   4\n</code></pre>\n"}], "owner": {"reputation": 5221, "user_id": 2955541, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/fmqg5.png?s=128&g=1", "display_name": "slaw", "link": "https://stackoverflow.com/users/2955541/slaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 832, "favorite_count": 0, "accepted_answer_id": 36046986, "answer_count": 2, "score": 1, "last_activity_date": 1595324084, "creation_date": 1458162336, "last_edit_date": 1595324084, "question_id": 36046907, "link": "https://stackoverflow.com/questions/36046907/apply-pivot-to-pandas-dataframe", "title": "Apply Pivot to Pandas Dataframe", "body": "<p>I have a sparse DataFrame:</p>\n\n<pre><code>df = pd.DataFrame([[1, 1],[1, 2], [2,1], [2,3], [3,4]], columns=['userId', 'movieId'])\n</code></pre>\n\n<p>That looks like this:</p>\n\n<pre><code>   userId  movieId\n0       1        1\n1       1        2\n2       2        1\n3       2        3\n4       3        4\n</code></pre>\n\n<p>I want to convert this table so that it looks like this:</p>\n\n<pre><code>                movieId\nuserId      1      2    3   4\n     1      1      1    0   0\n     2      1      0    1   0\n     3      0      0    0   1\n</code></pre>\n"}, {"tags": ["python", "differential-equations", "vpython"], "answers": [{"tags": [], "owner": {"reputation": 2616, "user_id": 5732397, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mmdpdkr_pcc/AAAAAAAAAAI/AAAAAAAAC08/NKvQ733ixGo/photo.jpg?sz=128", "display_name": "StardustGogeta", "link": "https://stackoverflow.com/users/5732397/stardustgogeta"}, "is_accepted": false, "score": 0, "last_activity_date": 1458163995, "creation_date": 1458163995, "answer_id": 36047381, "question_id": 36046880, "link": "https://stackoverflow.com/questions/36046880/python-visualize-solution-of-differential-equation/36047381#36047381", "title": "Python: visualize solution of differential equation", "body": "<p>It sounds like you can use <a href=\"https://docs.python.org/2/library/turtle.html\" rel=\"nofollow\">turtle graphics</a> if you have it move to arbitrarily placed dots along the equation line.</p>\n"}], "owner": {"reputation": 51, "user_id": 6034136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7cc1864d71a31e399fc87ac6f654b37?s=128&d=identicon&r=PG&f=1", "display_name": "Benutzername", "link": "https://stackoverflow.com/users/6034136/benutzername"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 274, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1458163995, "creation_date": 1458162237, "question_id": 36046880, "link": "https://stackoverflow.com/questions/36046880/python-visualize-solution-of-differential-equation", "title": "Python: visualize solution of differential equation", "body": "<p>I try to simulate the motion of a gyroscope using python. For this I solve a differential equation numerically (which works fine), but now I want objects to move according to the solution of the differential equation. I have seen many examples where the solution is plotted (or even animated in a plot), so I was wondering if it is possible to use the solution for the manipulation of graphical objects, too.</p>\n\n<p>I hope I made it clear what I intend to do. I really appreciate your help!!!</p>\n"}, {"tags": ["python", "google-app-engine", "oauth-2.0", "google-api-client"], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 6081878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1c29418db4b5313734c4c3ecee5066?s=128&d=identicon&r=PG&f=1", "display_name": "Benoit", "link": "https://stackoverflow.com/users/6081878/benoit"}, "is_accepted": false, "score": 1, "last_activity_date": 1458481092, "last_edit_date": 1495540478, "creation_date": 1458462279, "answer_id": 36111647, "question_id": 36046871, "link": "https://stackoverflow.com/questions/36046871/how-to-refresh-expired-token-with-api-client-library-for-python/36111647#36111647", "title": "How to refresh expired token with API Client Library for Python?", "body": "<p>I don't know if what I do is correct or not.\nIt does not look to be good practice but it works.</p>\n\n<p>I declare credentials that I receive from AppAssertionCredentials as a global variable.\nI use it for an hour and it works fine. After this hour, the token is probably expired. If I test it using access_token_expired, I always receive false.\nSo, I make use of refresh method.</p>\n\n<p>I also tried a brut force method and systematically invoke the refresh method and it works as well.</p>\n\n<p>Code here</p>\n\n<p><a href=\"https://stackoverflow.com/questions/36081860/access-google-spreadsheet-from-google-appengine-with-service-account-working-o/36114406#36114406\">Access Google spreadsheet from Google Appengine with service account : working once per hour</a></p>\n"}], "owner": {"reputation": 17918, "user_id": 604388, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dfdf62e565f166f68c6772d96f6523e1?s=128&d=identicon&r=PG", "display_name": "LA_", "link": "https://stackoverflow.com/users/604388/la"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 915, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1458481092, "creation_date": 1458162223, "question_id": 36046871, "link": "https://stackoverflow.com/questions/36046871/how-to-refresh-expired-token-with-api-client-library-for-python", "title": "How to refresh expired token with API Client Library for Python?", "body": "<p>I use <a href=\"https://developers.google.com/api-client-library/python/guide/google_app_engine\" rel=\"nofollow\">API Client Library for Python</a> to work with OAuth2. The credentials I get include <code>refresh_token</code> value. <code>credentials.access_token_expired</code> allows me to check if token is expired or not. But I don't understand from the documentation - if it is expired, am I supposed to refresh it manually (and how? call <code>credentials.refresh()</code>?) or is it done automatically and I don't need to refresh it?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 8490, "user_id": 674064, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5bf2cf5a797565e548088053644704e7?s=128&d=identicon&r=PG", "display_name": "das-g", "link": "https://stackoverflow.com/users/674064/das-g"}, "edited": false, "score": 0, "creation_date": 1458162540, "post_id": 36046802, "comment_id": 59742502, "body": "&quot;<code>states[4,i] != 100000</code> is meant to get me up to that altitude&quot; ... How so? <code>!=</code> is the not-equal comparison operator, not the assignment operator."}], "answers": [{"tags": [], "owner": {"reputation": 151, "user_id": 4966638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b805e2dd42380be8925e26175190405?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/4966638/matthew"}, "is_accepted": true, "score": 1, "last_activity_date": 1458162396, "creation_date": 1458162396, "answer_id": 36046927, "question_id": 36046802, "link": "https://stackoverflow.com/questions/36046802/crossing-an-altitude-in-python/36046927#36046927", "title": "Crossing an altitude in Python", "body": "<p>I believe the issue you have here is that you need to keep track of when you cross the altitude. Why not just have a variable set to false before your loop, then true when you hit >= 100000, and add that to your while. Also, those conditionals are for leaving your loop, so you should negate it. E.g.</p>\n\n<pre><code>reachedHeight = False\nwhile (not (reachedHeight and states[4,(i - 1)] &gt;= 100000 and states[4,i] &lt;= 100000)):\n  if (not reachedHeight and states[4,i] &gt;= 100000):\n    reachedHeight = True\n  ...\n</code></pre>\n\n<p>Could also be a conditional with a break inside your loop.</p>\n"}, {"tags": [], "owner": {"reputation": 486, "user_id": 5468675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IlutD.jpg?s=128&g=1", "display_name": "pholtz", "link": "https://stackoverflow.com/users/5468675/pholtz"}, "is_accepted": false, "score": 1, "last_activity_date": 1458162407, "creation_date": 1458162407, "answer_id": 36046928, "question_id": 36046802, "link": "https://stackoverflow.com/questions/36046802/crossing-an-altitude-in-python/36046928#36046928", "title": "Crossing an altitude in Python", "body": "<p>The <code>while</code> loop you have above will continue looping unless <code>states[4,i]</code> equals <b>exactly</b> 100,000.</p>\n\n<p><code>False and False or True == True</code></p>\n\n<p>This is likely why you are experiencing the infinite loop. You may want to remove the third case and if necessary, perform other checks inside the loop.</p>\n"}], "owner": {"reputation": 151, "user_id": 1187621, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/98cda97ac889e9a4f20309c4f39125fa?s=128&d=identicon&r=PG", "display_name": "user1187621", "link": "https://stackoverflow.com/users/1187621/user1187621"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 36046927, "answer_count": 2, "score": 0, "last_activity_date": 1458162407, "creation_date": 1458161936, "question_id": 36046802, "link": "https://stackoverflow.com/questions/36046802/crossing-an-altitude-in-python", "title": "Crossing an altitude in Python", "body": "<p>I am trying to run a Python script that calculates the trajectory of an object from the ground up above 100,000-meters then back below 100,000-meters. I want to be able to figure out how much time is spent above 100,000-meters. I have my trajectory code just fine (Runge-Kutta), and I can get up to 100,000-meters. However, I cannot figure out the right Python algorithm to keep going up to max altitude and start coming down to below 100,000-meters.</p>\n\n<p>Here is what I have:</p>\n\n<p><code>while (states[4,(i - 1)] &gt;= 100000 and states[4,i] &lt;= 100000 or states[4,i] != 100000):</code></p>\n\n<p>I'm ending up in an infinite loop, though. <code>states[4,i]</code> is the altitude. My thinking is that if the previous (<code>i - 1</code>) altitude is above 100,000-meters and the current (<code>i</code>) altitude is below 100,000-meters, I want it to exit the while loop. <code>states[4,i] != 100000</code> is meant to get me up to that altitude, at least.</p>\n\n<p>Thoughts?</p>\n"}, {"tags": ["python", "optimization", "scipy"], "comments": [{"owner": {"reputation": 2015, "user_id": 1551688, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c5593a039ac898d34b49b8e5f730175c?s=128&d=identicon&r=PG", "display_name": "tBuLi", "link": "https://stackoverflow.com/users/1551688/tbuli"}, "edited": false, "score": 0, "creation_date": 1477245150, "post_id": 36046785, "comment_id": 67676449, "body": "You might be interested in this package: <a href=\"http://symfit.readthedocs.io/en/latest/fitting_types.html#ode-fitting\" rel=\"nofollow noreferrer\">symfit.readthedocs.io/en/latest/fitting_types.html#ode-fitti&zwnj;&#8203;ng</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4262, "user_id": 3608005, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/235dcc1c473c4be1ddec787d32687650?s=128&d=identicon&r=PG", "display_name": "Moritz", "link": "https://stackoverflow.com/users/3608005/moritz"}, "is_accepted": true, "score": 0, "last_activity_date": 1458163666, "creation_date": 1458163666, "answer_id": 36047284, "question_id": 36046785, "link": "https://stackoverflow.com/questions/36046785/scipy-0-16-and-robust-regression-with-implicit-ode/36047284#36047284", "title": "scipy 0.16 and robust regression with implicit ODE", "body": "<p>It seems something is broken in the package. From the <a href=\"https://github.com/ContinuumIO/anaconda-issues/issues/686\" rel=\"nofollow\">issue tracker</a>:</p>\n\n<p>At least on an Ubuntu machine, following workaround helps: <code>export LD_PRELOAD=/usr/lib/x86_64-linux-gnu/libgfortran.so.3</code> By this way the problematic version of libgfortran is replaced temporarily.</p>\n"}], "owner": {"reputation": 4262, "user_id": 3608005, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/235dcc1c473c4be1ddec787d32687650?s=128&d=identicon&r=PG", "display_name": "Moritz", "link": "https://stackoverflow.com/users/3608005/moritz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 36047284, "answer_count": 1, "score": 0, "last_activity_date": 1458163666, "creation_date": 1458161866, "question_id": 36046785, "link": "https://stackoverflow.com/questions/36046785/scipy-0-16-and-robust-regression-with-implicit-ode", "title": "scipy 0.16 and robust regression with implicit ODE", "body": "<p>I do want to fit an implicit ODE to some data and It would be good if I use robust regression. This feature is implemented in scipy 0.17 but it seems that the ODE solver (assimulo package) requires scipy 0.16 ( with scipy 0.17: <code>anaconda3/envs/scipy0.17/lib/python3.4/site-packages/scipy/linalg/../../../../libgfortran.so.3: version 'GFORTRAN_1.4' not found</code>).</p>\n\n<p>There is a section in the <a href=\"http://scipy-cookbook.readthedocs.org/items/robust_regression.html\" rel=\"nofollow\">scipy cookboock</a> dealing with robust regression. It is said, that the residuals and the Jacobian matrix are modified at each timestep. \nSo it would not be enough to change  just the residual function ? In which way would I have to change the Jacbian Matrix and can this be done at each timestep using scipy 0.16 ?</p>\n\n<p>Any ideas how I could use either scipy 0.17 with assimulo (maybe by symlinks ) or implement a robust nonlinear fitting method within scipy 0.16 ? Or are there some other optimization packages which would work ?</p>\n"}, {"tags": ["python", "function", "recursion", "encode"], "comments": [{"owner": {"reputation": 1717, "user_id": 6053327, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1c9a8153a6efd932eae5c655ad7e3814?s=128&d=identicon&r=PG&f=1", "display_name": "Ilja", "link": "https://stackoverflow.com/users/6053327/ilja"}, "edited": false, "score": 0, "creation_date": 1458162067, "post_id": 36046760, "comment_id": 59742229, "body": "You should specify, if the characters will always be ordered like this in blocks; probably not, but then you should change your example."}, {"owner": {"reputation": 1717, "user_id": 6053327, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1c9a8153a6efd932eae5c655ad7e3814?s=128&d=identicon&r=PG&f=1", "display_name": "Ilja", "link": "https://stackoverflow.com/users/6053327/ilja"}, "edited": false, "score": 0, "creation_date": 1458162196, "post_id": 36046760, "comment_id": 59742306, "body": "Also, your indentation is wrong, the block after the <code>def</code> should be indented"}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1458162806, "post_id": 36046760, "comment_id": 59742672, "body": "At what point exactly does the code not behave as it should? BTW: Such things are best developed using Test Driven Development (TDD). Start with a test where you provide an empty string, then a string with one character, then one with multple, equal characters etc."}], "answers": [{"tags": [], "owner": {"reputation": 23605, "user_id": 1016216, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/xF5Ew.png?s=128&g=1", "display_name": "L3viathan", "link": "https://stackoverflow.com/users/1016216/l3viathan"}, "is_accepted": false, "score": 0, "last_activity_date": 1458162687, "last_edit_date": 1458162687, "creation_date": 1458162339, "answer_id": 36046910, "question_id": 36046760, "link": "https://stackoverflow.com/questions/36046760/using-recursion-in-python-function-to-output-a-list-of-tuples/36046910#36046910", "title": "Using recursion in Python function to output a list of tuples", "body": "<p>One of the issues of your code is that <code>output</code> is reinitialized as an empty list on every recursive call. In the final case, when you're through the complete string, the newly created empty list is returned (and then also handed back through all of the recursive calls).</p>\n\n<hr>\n\n<p>This is a solution without recursion, as a generator:</p>\n\n<pre><code>def encode_it(x):\n    last_char = None\n    num = 0\n    for char in x:\n        if last_char == char:\n            num += 1\n        else:\n            if last_char:\n                yield (last_char, num)\n            last_char = char\n            num = 1\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>&gt;&gt;&gt; list(encode_it(\"qqqqppttyl\"))\n[('q', 4), ('p', 2), ('t', 2), ('y', 1)]\n</code></pre>\n\n<hr>\n\n<p>The way this works is by iterating over the string, and testing whether the current character is the same as the one saved in <code>last_char</code>. If so, we just increment a counter. If it isn't, we <code>yield</code> the tuple of the last character along with its count, and set new values for <code>last_char</code> and <code>num</code>.</p>\n\n<p>A <a href=\"https://wiki.python.org/moin/Generators\" rel=\"nofollow\">generator</a> doesn't return a list, but instead a generator object, so to turn it into a list, you can call <code>list()</code> on it.</p>\n"}, {"tags": [], "owner": {"reputation": 18468, "user_id": 5249307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c640cd731ca8e455d79860519b6b208?s=128&d=identicon&r=PG", "display_name": "donkopotamus", "link": "https://stackoverflow.com/users/5249307/donkopotamus"}, "is_accepted": false, "score": 1, "last_activity_date": 1458163658, "last_edit_date": 1458163658, "creation_date": 1458162846, "answer_id": 36047077, "question_id": 36046760, "link": "https://stackoverflow.com/questions/36046760/using-recursion-in-python-function-to-output-a-list-of-tuples/36047077#36047077", "title": "Using recursion in Python function to output a list of tuples", "body": "<p>This task is easily done by <a href=\"https://docs.python.org/3/library/itertools.html#itertools.groupby\" rel=\"nofollow\"><code>itertools.groupby</code></a>:</p>\n\n<pre><code>def encode_it(txt):\n    return ((c, len(tuple(grp))) for c, grp in itertools.groupby(txt))\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>&gt;&gt;&gt; list(encode_it(\"qqqqppttyl\"))\n[('q', 4), ('p', 2), ('t', 2), ('y', 1)]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "is_accepted": false, "score": 0, "last_activity_date": 1458163581, "last_edit_date": 1458163581, "creation_date": 1458163081, "answer_id": 36047134, "question_id": 36046760, "link": "https://stackoverflow.com/questions/36046760/using-recursion-in-python-function-to-output-a-list-of-tuples/36047134#36047134", "title": "Using recursion in Python function to output a list of tuples", "body": "<p>A simple recursive (as it was asked) solution to the problem:</p>\n\n<pre><code>def encode_it(x):\n    if not x:  # base case: empty string\n        return []\n    i, c = 1, x[0] \n    while i &lt; len(x) and c == x[i]:\n        i += 1\n    return [(c, i)] + encode_it(x[i:])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16, "user_id": 6015023, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HAWH1DkAbsI/AAAAAAAAAAI/AAAAAAAADbM/aqVZcmFOeCE/photo.jpg?sz=128", "display_name": "Nicola", "link": "https://stackoverflow.com/users/6015023/nicola"}, "is_accepted": false, "score": 0, "last_activity_date": 1458163214, "creation_date": 1458163214, "answer_id": 36047172, "question_id": 36046760, "link": "https://stackoverflow.com/questions/36046760/using-recursion-in-python-function-to-output-a-list-of-tuples/36047172#36047172", "title": "Using recursion in Python function to output a list of tuples", "body": "<p>You can easily without recursion using the <code>count</code> method and a single line <code>for</code> loop.</p>\n\n<pre><code>def encode_it(x):\n   return [(char,x.count(char)) for char in x]\n</code></pre>\n\n<p><code>list.count(x)</code> return the number of times x appears in the list.</p>\n"}, {"tags": [], "owner": {"reputation": 835, "user_id": 5960561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d009699bce549e7a414fb9697558dc3d?s=128&d=identicon&r=PG", "display_name": "K. Menyah", "link": "https://stackoverflow.com/users/5960561/k-menyah"}, "is_accepted": false, "score": 0, "last_activity_date": 1458163340, "creation_date": 1458163340, "answer_id": 36047196, "question_id": 36046760, "link": "https://stackoverflow.com/questions/36046760/using-recursion-in-python-function-to-output-a-list-of-tuples/36047196#36047196", "title": "Using recursion in Python function to output a list of tuples", "body": "<p>A messy one-liner:</p>\n\n<pre><code>def encode_it(x):\n    return [(c,x.count(c,i,next((i for i, v in enumerate(x) if v != c), -1))) for i, c in enumerate(x) if x.index(c) == i]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 43, "user_id": 4277456, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0mxDX.jpg?s=128&g=1", "display_name": "Kapi", "link": "https://stackoverflow.com/users/4277456/kapi"}, "is_accepted": false, "score": 0, "last_activity_date": 1458387661, "creation_date": 1458387661, "answer_id": 36101231, "question_id": 36046760, "link": "https://stackoverflow.com/questions/36046760/using-recursion-in-python-function-to-output-a-list-of-tuples/36101231#36101231", "title": "Using recursion in Python function to output a list of tuples", "body": "<p>Below solution will also work if same character are not in sequence also, without using recursion function.</p>\n\n<p>For Example given string is something </p>\n\n<pre><code>&gt;&gt;&gt;groupBy(\"qqqqqq1212\")\n[('q', 6), ('1', 2), ('2', 2)]\n</code></pre>\n\n<p>or </p>\n\n<pre><code>&gt;&gt;&gt;groupBy(\"qqqqqq1212tytl\")\n[('y', 1), ('q', 6), ('1', 2), ('l', 1), ('t', 2), ('2', 2)]\n</code></pre>\n\n<p>Program without recursion function</p>\n\n<pre><code>str = \"qqqqqq1212tytl\"\n\ndef groupBy(str):\n   result = []\n   count = {}\n   for c in str:\n      if c in count:\n          count[c] += 1\n      else:\n          count[c] = 1\n\n   for key in count:\n      if count[key] &gt;= 1:\n          result +=  [(key, count[key])]            \n\n   return result           \n\n\nprint(groupBy(str))\n</code></pre>\n\n<p>Please let me know, how can it be better coded by use of recursive function? </p>\n"}], "owner": {"reputation": 21, "user_id": 6073786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3767233911bf43ca516a1e1a407aa754?s=128&d=identicon&r=PG&f=1", "display_name": "marginrule678", "link": "https://stackoverflow.com/users/6073786/marginrule678"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "answer_count": 6, "score": 1, "last_activity_date": 1458387661, "creation_date": 1458161772, "last_edit_date": 1458164166, "question_id": 36046760, "link": "https://stackoverflow.com/questions/36046760/using-recursion-in-python-function-to-output-a-list-of-tuples", "title": "Using recursion in Python function to output a list of tuples", "body": "<p>I'm very new to python and would kindly appreciate any help.Basically im inputting a string and returning the string \"encoded\" if you like. I'm having problems however with my function, i don't know where i'm going wrong.</p>\n\n<pre><code>def encode_it(x):\n    output = []\n    counter = 1\n    while x[0] != x[-1]:\n        if x[0] == x[1]:\n            counter += 1\n            return encode_it(x[1:])\n        else:\n            output += (x[0],counter)\n            counter = 1\n            return encode_it(x[1:])\n\n    return output\n</code></pre>\n\n<p>the result i want is this:</p>\n\n<pre><code>&gt;&gt;&gt;encode_it(\"qqqqppttyl\")\n[(\"q\",4),(\"p\",2),(\"t\",2),(\"y\",1),(\"l\",1)]\n</code></pre>\n\n<p>I would really appreciate any help, I'm just learning python and trying my hand at recursion, if there was even an easier way of doing this without recursion i'd be really grateful :)</p>\n\n<p>Thanks guys!!\nin response to L3viathan's code , i modified it so it would output the result but it doesnt add the last character to the list:</p>\n\n<pre><code>def encode_it(x):\nlast_char = None\nnum = 0\nresult = []\nfor char in x:\n    t = ( )\n    if last_char == char:\n        num += 1\n    else:\n        if last_char:\n            t += last_char,num\n            result += t\n        last_char = char\n        num = 1\nreturn result \n</code></pre>\n\n<p>if i was to call encode_it(\"qqqeerrw\"), the result i would get is:</p>\n\n<pre><code>['q', 3, 'e', 2, 'r', 2] #it's leaving out the w here?\n</code></pre>\n\n<p>also, the reason i have an empty tuple 't' and an empty list 'result' is because, i want each character to be in its own tuple with its count...like so:</p>\n\n<pre><code>[(\"q\",3),(\"e\",2),(\"r\",2),(\"w\",1)]\n</code></pre>\n"}, {"tags": ["python", "pycharm", "pyspark", "pyspark-sql"], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 3138594, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4bb24e2b20fa766eccf75ce054d4e519?s=128&d=identicon&r=PG&f=1", "display_name": "user3138594", "link": "https://stackoverflow.com/users/3138594/user3138594"}, "edited": false, "score": 1, "creation_date": 1458236777, "post_id": 36047854, "comment_id": 59782272, "body": "Thanks for the answer. I tried the following: os.environ[&#39;PYSPARK_SUBMIT_ARGS&#39;] = &#39;--packages com.databricks:spark-avro_2.10:2.0.1&#39; That didn&#39;t work and kept giving java.lang.ClassNotFoundException: Failed to find data source: com.databricks.spark.avro Then I included these two lines in spark-defaults.conf spark.driver.extraClassPath     /Users/abhattac/PycharmProjects/WordCount/spark-avro_2.10-2.&zwnj;&#8203;0.1.jar spark.executor.extraClassPath   /Users/abhattac/PycharmProjects/WordCount/spark-avro_2.10-2.&zwnj;&#8203;0.1.jar With those lines I could make it work."}, {"owner": {"reputation": 85, "user_id": 3138594, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4bb24e2b20fa766eccf75ce054d4e519?s=128&d=identicon&r=PG&f=1", "display_name": "user3138594", "link": "https://stackoverflow.com/users/3138594/user3138594"}, "edited": false, "score": 0, "creation_date": 1458237211, "post_id": 36047854, "comment_id": 59782558, "body": "The original stackoverflow link: <a href=\"http://stackoverflow.com/questions/31464845/automatically-including-jars-to-pyspark-classpath\" title=\"automatically including jars to pyspark classpath\">stackoverflow.com/questions/31464845/&hellip;</a>"}, {"owner": {"reputation": 280325, "user_id": 1560062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c5027e3046fed86e8e34b4fa0e6246c?s=128&d=identicon&r=PG", "display_name": "zero323", "link": "https://stackoverflow.com/users/1560062/zero323"}, "reply_to_user": {"reputation": 85, "user_id": 3138594, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4bb24e2b20fa766eccf75ce054d4e519?s=128&d=identicon&r=PG&f=1", "display_name": "user3138594", "link": "https://stackoverflow.com/users/3138594/user3138594"}, "edited": false, "score": 0, "creation_date": 1458237593, "post_id": 36047854, "comment_id": 59782802, "body": "Missing <code>pyspark-shell</code>?"}, {"owner": {"reputation": 202, "user_id": 11222526, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bsfTsHstYQY/AAAAAAAAAAI/AAAAAAAAJmw/EWgHSe9ya3M/photo.jpg?sz=128", "display_name": "Induraj PR", "link": "https://stackoverflow.com/users/11222526/induraj-pr"}, "reply_to_user": {"reputation": 85, "user_id": 3138594, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4bb24e2b20fa766eccf75ce054d4e519?s=128&d=identicon&r=PG&f=1", "display_name": "user3138594", "link": "https://stackoverflow.com/users/3138594/user3138594"}, "edited": false, "score": 0, "creation_date": 1614789518, "post_id": 36047854, "comment_id": 117493862, "body": "@user3138594 - In windows, how to specify the path? if i need to add multiple jar&#39;s, then how to add them?"}], "tags": [], "owner": {"reputation": 280325, "user_id": 1560062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c5027e3046fed86e8e34b4fa0e6246c?s=128&d=identicon&r=PG", "display_name": "zero323", "link": "https://stackoverflow.com/users/1560062/zero323"}, "is_accepted": false, "score": 1, "last_activity_date": 1458165987, "last_edit_date": 1495540229, "creation_date": 1458165987, "answer_id": 36047854, "question_id": 36046758, "link": "https://stackoverflow.com/questions/36046758/adding-spark-packages-in-pycharm-ide/36047854#36047854", "title": "Adding Spark packages in PyCharm IDE", "body": "<p>You can use Python <code>PYSPARK_SUBMIT_ARGS</code> environment variable, either by passing it using environment variables section of the PyCharm run configuration (the same place where you set <code>SPARK_HOME</code>)</p>\n\n<p><a href=\"https://i.stack.imgur.com/O6cdp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/O6cdp.png\" alt=\"enter image description here\"></a></p>\n\n<p>or using <a href=\"https://docs.python.org/3.5/library/os.html#os.environ\" rel=\"nofollow noreferrer\"><code>os.environ</code></a> directly in your code as shown in <a href=\"https://stackoverflow.com/q/35346567/1560062\">load external libraries inside pyspark code</a></p>\n"}], "owner": {"reputation": 85, "user_id": 3138594, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4bb24e2b20fa766eccf75ce054d4e519?s=128&d=identicon&r=PG&f=1", "display_name": "user3138594", "link": "https://stackoverflow.com/users/3138594/user3138594"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3154, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1513566489, "creation_date": 1458161757, "last_edit_date": 1513566489, "question_id": 36046758, "link": "https://stackoverflow.com/questions/36046758/adding-spark-packages-in-pycharm-ide", "title": "Adding Spark packages in PyCharm IDE", "body": "<p>I have set up my PyCharm to link with my local spark installation as per <a href=\"https://stackoverflow.com/questions/34685905/how-to-link-pycharm-with-pyspark\">in this link</a></p>\n\n<pre><code>from pyspark import SparkContext, SQLContext, SparkConf\nfrom operator import add\nconf = SparkConf()\nconf.setMaster(\"spark://localhost:7077\")\nconf.setAppName(\"Test\")\nsc = SparkContext(conf=conf)\nsqlContext = SQLContext(sc)\ndf = sqlContext.createDataFrame([(2012, 8, \"Batman\", 9.8), (2012, 8, \"Hero\", 8.7), (2012, 7, \"Robot\", 5.5), (2011, 7, \"Git\", 2.0)],[\"year\", \"month\", \"title\", \"rating\"])\ndf.write.mode('overwrite').format(\"com.databricks.spark.avro\").save(\"file:///Users/abhattac/PycharmProjects/WordCount/users\")\n</code></pre>\n\n<p>This requires Databrick's avro jar to be shipped to worker node. I can get it done using spark-submit from shell like the following:</p>\n\n<pre><code>/usr/local/Cellar/apache-spark/1.6.1/bin/pyspark AvroFile.py --packages com.databricks:spark-avro_2.10:2.0.1\n</code></pre>\n\n<p>I couldn't find out how to provide --packages option when I am running it from inside PyCharm IDE. Any help will be appreciated.</p>\n"}, {"tags": ["python", "arrays"], "answers": [{"tags": [], "owner": {"reputation": 28349, "user_id": 553404, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/XkLRP.png?s=128&g=1", "display_name": "YXD", "link": "https://stackoverflow.com/users/553404/yxd"}, "is_accepted": false, "score": 4, "last_activity_date": 1458161732, "creation_date": 1458161732, "answer_id": 36046748, "question_id": 36046715, "link": "https://stackoverflow.com/questions/36046715/how-to-remove-extraneous-spaces-from-python-array/36046748#36046748", "title": "How to remove extraneous spaces from Python array?", "body": "<p>Like so</p>\n\n<pre><code>[x.strip() for x in mylist]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "is_accepted": false, "score": 0, "last_activity_date": 1458161822, "creation_date": 1458161822, "answer_id": 36046773, "question_id": 36046715, "link": "https://stackoverflow.com/questions/36046715/how-to-remove-extraneous-spaces-from-python-array/36046773#36046773", "title": "How to remove extraneous spaces from Python array?", "body": "<p>You can use <code>map</code> and <code>strip</code>:</p>\n\n<pre><code>a = ['0012 ', ' 318422 ', ' www.example.com']\nclean_a = map(lambda x: x.strip(), a)\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5859293, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/549b088b5fc1609d302ea37dd7de1f81?s=128&d=identicon&r=PG&f=1", "display_name": "pulsar100", "link": "https://stackoverflow.com/users/5859293/pulsar100"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1132, "favorite_count": 0, "closed_date": 1458162122, "answer_count": 2, "score": 0, "last_activity_date": 1458161822, "creation_date": 1458161613, "last_edit_date": 1458161671, "question_id": 36046715, "link": "https://stackoverflow.com/questions/36046715/how-to-remove-extraneous-spaces-from-python-array", "closed_reason": "Duplicate", "title": "How to remove extraneous spaces from Python array?", "body": "<p>I have a python array containing a mixed set of values that looks somewhat like the example below:</p>\n\n<pre><code>['0012 ', ' 318422 ', ' www.example.com']\n</code></pre>\n\n<p>My question is, how can I easily remove leading and trailing spaces from values in the array, such that it looks like this:</p>\n\n<pre><code>['0012', '318422', 'www.example.com']\n</code></pre>\n"}, {"tags": ["python", "if-statement", "syntax"], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 6073798, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d5cdccbc1fd5542c8a34c415f2629fa7?s=128&d=identicon&r=PG&f=1", "display_name": "paulsus", "link": "https://stackoverflow.com/users/6073798/paulsus"}, "edited": false, "score": 0, "creation_date": 1458163301, "post_id": 36046772, "comment_id": 59742927, "body": "position &lt; len(number) has to be same level as if and else?"}, {"owner": {"reputation": 130, "user_id": 6056648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bed0146d476e6226e9788cb1322f0723?s=128&d=identicon&r=PG", "display_name": "coding_carebear", "link": "https://stackoverflow.com/users/6056648/coding-carebear"}, "reply_to_user": {"reputation": 9, "user_id": 6073798, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d5cdccbc1fd5542c8a34c415f2629fa7?s=128&d=identicon&r=PG&f=1", "display_name": "paulsus", "link": "https://stackoverflow.com/users/6073798/paulsus"}, "edited": false, "score": 0, "creation_date": 1458164169, "post_id": 36046772, "comment_id": 59743376, "body": "No, it&#39;s part of the while statement. That could all be on one line as &quot;while position &lt; len(number):&quot; then the rest. You need to move the other position statement outside the if-else blocks."}], "tags": [], "owner": {"reputation": 130, "user_id": 6056648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bed0146d476e6226e9788cb1322f0723?s=128&d=identicon&r=PG", "display_name": "coding_carebear", "link": "https://stackoverflow.com/users/6056648/coding-carebear"}, "is_accepted": false, "score": 2, "last_activity_date": 1458164228, "last_edit_date": 1458164228, "creation_date": 1458161821, "answer_id": 36046772, "question_id": 36046712, "link": "https://stackoverflow.com/questions/36046712/python-3-5-1-if-else-invalid-syntax/36046772#36046772", "title": "Python 3.5.1 if else: invalid syntax?", "body": "<p>The indentation of your position = position + 1 statement is wrong.</p>\n\n<p>It is at the same level as your if and else statements, so separates them.</p>\n\n<p>Indent or move it and you'll be fine.</p>\n\n<p>Also, you could simplify the code a bit by changing the while loop to a for loop as:</p>\n\n<pre><code>number = [1, 3, 5]\n\nfor num in number:\n    if num % 2 == 0:\n        print(\"Found even number\", num)\n    else:\n</code></pre>\n\n<p>Hard to say exactly given the short snippet of code, but it looks like the while loop is unnecessary given what is there</p>\n"}], "owner": {"reputation": 9, "user_id": 6073798, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d5cdccbc1fd5542c8a34c415f2629fa7?s=128&d=identicon&r=PG&f=1", "display_name": "paulsus", "link": "https://stackoverflow.com/users/6073798/paulsus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 953, "favorite_count": 0, "closed_date": 1459025331, "answer_count": 1, "score": -5, "last_activity_date": 1458164228, "creation_date": 1458161594, "last_edit_date": 1458161682, "question_id": 36046712, "link": "https://stackoverflow.com/questions/36046712/python-3-5-1-if-else-invalid-syntax", "closed_reason": "Not suitable for this site", "title": "Python 3.5.1 if else: invalid syntax?", "body": "<pre><code>number = [1,3,5]\n\nposition = 0\n\nwhile \nposition &lt; len(number):\n\n    numbers = number[position]\n\n    if numbers % 2==0:\n        print('found even number',numbers)\n        break\n    position = position +1\n    else: \n</code></pre>\n\n<p>I got SyntaxError: invalid syntax, after i push enter after else:</p>\n\n<p>Help me please</p>\n"}, {"tags": ["python", "django", "django-admin", "django-authentication"], "comments": [{"owner": {"reputation": 3461, "user_id": 887976, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/TM1DY.png?s=128&g=1", "display_name": "Chirdeep Tomar", "link": "https://stackoverflow.com/users/887976/chirdeep-tomar"}, "edited": false, "score": 0, "creation_date": 1551564236, "post_id": 36046698, "comment_id": 96687741, "body": "Where you able to achieve this?"}, {"owner": {"reputation": 6891, "user_id": 277113, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/9edb695bef12fe05ebf107f73ec84906?s=128&d=identicon&r=PG", "display_name": "gozzilli", "link": "https://stackoverflow.com/users/277113/gozzilli"}, "reply_to_user": {"reputation": 3461, "user_id": 887976, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/TM1DY.png?s=128&g=1", "display_name": "Chirdeep Tomar", "link": "https://stackoverflow.com/users/887976/chirdeep-tomar"}, "edited": false, "score": 0, "creation_date": 1551605911, "post_id": 36046698, "comment_id": 96694950, "body": "No unfortunately"}, {"owner": {"reputation": 142, "user_id": 9616459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cef7512f1b3c202436cb5206e6b947db?s=128&d=identicon&r=PG&f=1", "display_name": "alexa", "link": "https://stackoverflow.com/users/9616459/alexa"}, "edited": false, "score": 0, "creation_date": 1610661091, "post_id": 36046698, "comment_id": 116210797, "body": "Did you fix this yet?"}], "answers": [{"comments": [{"owner": {"reputation": 6891, "user_id": 277113, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/9edb695bef12fe05ebf107f73ec84906?s=128&d=identicon&r=PG", "display_name": "gozzilli", "link": "https://stackoverflow.com/users/277113/gozzilli"}, "edited": false, "score": 0, "creation_date": 1458224793, "post_id": 36051925, "comment_id": 59773256, "body": "That is what I&#39;m doing, but a) if I use <i>my</i> <code>User</code> class, it appears in my app; b) if I use Django auth&#39;s class, it doesn&#39;t appear anywhere (not surprising since that&#39;s not the class I&#39;m using to represent the user)."}, {"owner": {"reputation": 1533, "user_id": 3526079, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/y27Ob.jpg?s=128&g=1", "display_name": "SuReSh", "link": "https://stackoverflow.com/users/3526079/suresh"}, "reply_to_user": {"reputation": 6891, "user_id": 277113, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/9edb695bef12fe05ebf107f73ec84906?s=128&d=identicon&r=PG", "display_name": "gozzilli", "link": "https://stackoverflow.com/users/277113/gozzilli"}, "edited": false, "score": 0, "creation_date": 1458280461, "post_id": 36051925, "comment_id": 59799288, "body": "You create a superuser ? SuperUser is by default shown in belog Group."}, {"owner": {"reputation": 6891, "user_id": 277113, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/9edb695bef12fe05ebf107f73ec84906?s=128&d=identicon&r=PG", "display_name": "gozzilli", "link": "https://stackoverflow.com/users/277113/gozzilli"}, "edited": false, "score": 0, "creation_date": 1458321527, "post_id": 36051925, "comment_id": 59825288, "body": "I have a superuser, yes."}], "tags": [], "owner": {"reputation": 1533, "user_id": 3526079, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/y27Ob.jpg?s=128&g=1", "display_name": "SuReSh", "link": "https://stackoverflow.com/users/3526079/suresh"}, "is_accepted": false, "score": 0, "last_activity_date": 1458190290, "creation_date": 1458190290, "answer_id": 36051925, "question_id": 36046698, "link": "https://stackoverflow.com/questions/36046698/register-custom-user-model-with-admin-auth/36051925#36051925", "title": "Register custom user model with admin auth", "body": "<p>In admin.py use</p>\n\n<pre><code>from django.contrib.auth.admin import UserAdmin\nfrom django.contrib.auth.models import User\n\nUserAdmin.list_display = ('email', 'first_name', 'last_name', 'is_active', 'date_joined', 'is_staff')\n\nadmin.site.register(User, UserAdmin)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 365, "user_id": 11220956, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QhqC6sKaPhM/AAAAAAAAAAI/AAAAAAAAAHI/cIvE9UEjwAc/photo.jpg?sz=128", "display_name": "Rin Nguyen", "link": "https://stackoverflow.com/users/11220956/rin-nguyen"}, "is_accepted": false, "score": 1, "last_activity_date": 1566189497, "creation_date": 1566189497, "answer_id": 57550557, "question_id": 36046698, "link": "https://stackoverflow.com/questions/36046698/register-custom-user-model-with-admin-auth/57550557#57550557", "title": "Register custom user model with admin auth", "body": "<pre><code>class User(AbstractUser):\n\n    class Meta:\n    app_label = 'auth'\n</code></pre>\n\n<p>This can solve your problem but may cause some errors when you migrate your app. The other hack is define <code>get_app_list</code> in your <code>AdminSite</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1553, "user_id": 4452004, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/262c32f7add160a19c186b007c417938?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Kirkpatrick", "link": "https://stackoverflow.com/users/4452004/ian-kirkpatrick"}, "is_accepted": false, "score": 1, "last_activity_date": 1567188314, "creation_date": 1567188314, "answer_id": 57731399, "question_id": 36046698, "link": "https://stackoverflow.com/questions/36046698/register-custom-user-model-with-admin-auth/57731399#57731399", "title": "Register custom user model with admin auth", "body": "<p>I think what you're looking for is replacing the django user model. To do this, see the answer on this post: <a href=\"https://stackoverflow.com/questions/44109/extending-the-user-model-with-custom-fields-in-django\">Extending the User model with custom fields in Django</a>. I would suggest going the extending route, but that would mean both parent and child model would have to be registered.</p>\n\n<p>If you really want one single model, just set the <code>AUTH_USER_MODEL</code> setting to your model. This essentially replaces the default model.</p>\n\n<p>In your settings.py:</p>\n\n<pre><code>AUTH_USER_MODEL = \"appname.UserModelName\"\n</code></pre>\n\n<p>For more info on replacing the user model, see <a href=\"https://docs.djangoproject.com/en/dev/topics/auth/customizing/#substituting-a-custom-user-model\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/dev/topics/auth/customizing/#substituting-a-custom-user-model</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1302, "user_id": 373345, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ef117ad3af989cd76868598b0d944c5f?s=128&d=identicon&r=PG", "display_name": "dsomnus", "link": "https://stackoverflow.com/users/373345/dsomnus"}, "is_accepted": false, "score": 0, "last_activity_date": 1579615817, "creation_date": 1579615817, "answer_id": 59842932, "question_id": 36046698, "link": "https://stackoverflow.com/questions/36046698/register-custom-user-model-with-admin-auth/59842932#59842932", "title": "Register custom user model with admin auth", "body": "<p>Might want to try this:</p>\n\n<p><a href=\"https://libraries.io/pypi/django-modeladmin-reorder\" rel=\"nofollow noreferrer\">https://libraries.io/pypi/django-modeladmin-reorder</a></p>\n\n<p><em>Custom ordering for the apps and models in the admin app. You can also rename, cross link or exclude models from the app list.</em></p>\n"}, {"tags": [], "owner": {"reputation": 958, "user_id": 288387, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/2c3ac194c1e0f902ec0a8c138448f7ef?s=128&d=identicon&r=PG&f=1", "display_name": "elsadek", "link": "https://stackoverflow.com/users/288387/elsadek"}, "is_accepted": false, "score": 0, "last_activity_date": 1592987639, "creation_date": 1592987639, "answer_id": 62550913, "question_id": 36046698, "link": "https://stackoverflow.com/questions/36046698/register-custom-user-model-with-admin-auth/62550913#62550913", "title": "Register custom user model with admin auth", "body": "<blockquote>\n<p>How can I get the new User model to show up under &quot;Authentication and\nAuthorization&quot;<br/></p>\n</blockquote>\n<p>I had the same concern using Django 3.0, this is how I solved it :<br/></p>\n<pre><code>class CustomUser(AbstractUser):\n    \n     class Meta:\n         db_table = 'auth_user'\n         app_label = 'auth'\n</code></pre>\n<p>In settings :</p>\n<pre><code>AUTH_USER_MODEL = &quot;auth.CustomUser&quot;\n</code></pre>\n"}], "owner": {"reputation": 6891, "user_id": 277113, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/9edb695bef12fe05ebf107f73ec84906?s=128&d=identicon&r=PG", "display_name": "gozzilli", "link": "https://stackoverflow.com/users/277113/gozzilli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2732, "favorite_count": 2, "answer_count": 5, "score": 20, "last_activity_date": 1592987639, "creation_date": 1458161552, "question_id": 36046698, "link": "https://stackoverflow.com/questions/36046698/register-custom-user-model-with-admin-auth", "title": "Register custom user model with admin auth", "body": "<p>In a Django project, I have a custom user model that adds one extra field:</p>\n\n<pre><code>class User(AbstractUser):\n\n    company = models.ForeignKey(Company, null=True, blank=True)\n</code></pre>\n\n<p>This model is defined in my app, say <code>MyApp.models</code>.</p>\n\n<p>How can I get the new <code>User</code> model to show up under \"Authentication and Authorization\" as the original <code>django.contrib.auth</code> model? </p>\n\n<p><a href=\"https://i.stack.imgur.com/AZxiV.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/AZxiV.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 36561, "user_id": 2395796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8786484468219bcf403bbdce5eb37c8d?s=128&d=identicon&r=PG", "display_name": "Kevin Christopher Henry", "link": "https://stackoverflow.com/users/2395796/kevin-christopher-henry"}, "edited": false, "score": 0, "creation_date": 1458166313, "post_id": 36046665, "comment_id": 59744373, "body": "Have you confirmed that it&#39;s actually creating the tables? Because the output of <code>migrate</code> looks the same in either case, it &quot;will just silently not perform any operations on a model for which this returns <code>False</code>&quot;."}, {"owner": {"reputation": 16356, "user_id": 1913888, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/MqCvM.jpg?s=128&g=1", "display_name": "Aaron Lelevier", "link": "https://stackoverflow.com/users/1913888/aaron-lelevier"}, "reply_to_user": {"reputation": 36561, "user_id": 2395796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8786484468219bcf403bbdce5eb37c8d?s=128&d=identicon&r=PG", "display_name": "Kevin Christopher Henry", "link": "https://stackoverflow.com/users/2395796/kevin-christopher-henry"}, "edited": false, "score": 0, "creation_date": 1458745809, "post_id": 36046665, "comment_id": 59998954, "body": "@KevinChristopherHenry, yes, it is creating tables"}, {"owner": {"reputation": 924, "user_id": 4772392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wpsCn.jpg?s=128&g=1", "display_name": "Mohammad Mustaqeem", "link": "https://stackoverflow.com/users/4772392/mohammad-mustaqeem"}, "edited": false, "score": 0, "creation_date": 1459244392, "post_id": 36046665, "comment_id": 60187381, "body": "@AaronLelevier What is the order of the routers in DATABASE_ROUTERS setting?"}], "answers": [{"comments": [{"owner": {"reputation": 6896, "user_id": 1037251, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/2fHV3.png?s=128&g=1", "display_name": "vlad-ardelean", "link": "https://stackoverflow.com/users/1037251/vlad-ardelean"}, "edited": false, "score": 0, "creation_date": 1459261540, "post_id": 36255469, "comment_id": 60199948, "body": "This also wouldn&#39;t be able to discriminate between databases. It just wouldn&#39;t create the tables in any DB."}], "tags": [], "owner": {"reputation": 147, "user_id": 1007703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6125e62be65bd8aee5984add865e4fe4?s=128&d=identicon&r=PG", "display_name": "Vibhu", "link": "https://stackoverflow.com/users/1007703/vibhu"}, "is_accepted": false, "score": 2, "last_activity_date": 1459135326, "creation_date": 1459135326, "answer_id": 36255469, "question_id": 36046665, "link": "https://stackoverflow.com/questions/36046665/migrate-tables-only-to-1-database-out-of-2-in-django/36255469#36255469", "title": "Migrate tables only to 1 database out of 2 in Django", "body": "<p>Have you tried <code>managed = False</code> for the models you don't want to create tables?</p>\n\n<pre><code>class MyModel(models.Model):\n    ...\n    class Meta:\n        managed = False\n</code></pre>\n"}], "owner": {"reputation": 16356, "user_id": 1913888, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/MqCvM.jpg?s=128&g=1", "display_name": "Aaron Lelevier", "link": "https://stackoverflow.com/users/1913888/aaron-lelevier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1459135326, "creation_date": 1458161399, "last_edit_date": 1458162437, "question_id": 36046665, "link": "https://stackoverflow.com/questions/36046665/migrate-tables-only-to-1-database-out-of-2-in-django", "title": "Migrate tables only to 1 database out of 2 in Django", "body": "<p>I am trying to create tables selectively in 1 database, but not the other. </p>\n\n<p>In my example, I only want to create tables for the apps: <code>tlocation</code> and <code>tcategory</code> in the <code>transforms</code> database. However, Django is creating all tables in the <code>transforms</code> database. </p>\n\n<p>Here is the DB router config:</p>\n\n<pre><code>TRANSFORM_APPS = ('tcategory', 'tlocation')\n\n\nclass TransformRouter(object):\n    \"\"\"\n    A router to control all database operations on models in the\n    \"utils_transform\" application.\n    \"\"\"\n    def db_for_read(self, model, **hints):\n        \"\"\"\n        Attempts to read 'transforms' models go to 'transforms' database.\n        \"\"\"\n        if model._meta.app_label in TRANSFORM_APPS:\n            return 'transforms'\n        return None\n\n    def db_for_write(self, model, **hints):\n        \"\"\"\n        Attempts to write 'transforms' models go to 'transforms' database.\n        \"\"\"\n        if model._meta.app_label in TRANSFORM_APPS:\n            return 'transforms'\n        return None\n\n    def allow_relation(self, obj1, obj2, **hints):\n        \"\"\"\n        Allow relations if a model in the 'tlocation' app is involved.\n        \"\"\"\n        if obj1._meta.app_label in TRANSFORM_APPS or \\\n           obj2._meta.app_label in TRANSFORM_APPS:\n           return True\n        return None\n\n    def allow_migrate(self, db, app_label, model=None, **hints):\n        \"\"\"\n        Make sure the 'tlocation' app only appears in the 'transforms'\n        database.\n        \"\"\"\n        if app_label in TRANSFORM_APPS:\n            return db == 'transforms'\n        return None\n\n\nclass DefaultRouter(object):\n    \"\"\"\n    Catch-all Router for all other DB transactions that aren't in the \n    ``utils_transform`` app.\n    \"\"\"\n\n    def db_for_read(self, model, **hints):\n        return 'default'\n\n    def db_for_write(self, model, **hints):\n        return 'default'\n\n    def allow_relation(self, obj1, obj2, **hints):\n        if obj1._state.db == obj2._state.db:\n           return True\n        return None\n\n    def allow_migrate(self, db, app_label, model=None, **hints):\n        return None\n</code></pre>\n\n<p>The command that I am using to run migrations is:</p>\n\n<pre><code>./manage.py migrate --database=transforms\n</code></pre>\n\n<p>When I migrate 1 app at a time only, as below, this works. But I can't run without an app filter in the <code>migrate</code> command. Example:</p>\n\n<pre><code>./manage.py migrate tlocation --database=transforms\n./manage.py migrate tcategory --database=transforms\n</code></pre>\n"}, {"tags": ["python", "list", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1458161591, "post_id": 36046638, "comment_id": 59741979, "body": "what is your goal to read those files into three DFs or to merge them together into single DF?"}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 1, "creation_date": 1458161661, "post_id": 36046638, "comment_id": 59742014, "body": "You&#39;re updating the iterable rather than what the element is, it would be the same thing if you iterated over a list. Is there a reason you need to construct the empty dfs upfront rather than just set <code>dfs=[]</code> and then just iterate over the files and do <code>dfs.append(pd.read_csv(in_file)</code>?"}, {"owner": {"reputation": 1961, "user_id": 2275672, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Kn6X7.jpg?s=128&g=1", "display_name": "Alfredo Gimenez", "link": "https://stackoverflow.com/users/2275672/alfredo-gimenez"}, "reply_to_user": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 1, "creation_date": 1458161668, "post_id": 36046638, "comment_id": 59742018, "body": "When you iterate over a list, you can&#39;t modify the element directly. The line <code>df = pd.read_csv(in_file, low_memory=False)</code> is not actually modifying the elements in the list, it&#39;s modifying a copy of the element. EDIT: beat me to it @EdChum :)"}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1458161762, "post_id": 36046638, "comment_id": 59742066, "body": "see <a href=\"http://stackoverflow.com/questions/1207406/remove-items-from-a-list-while-iterating-in-python\" title=\"remove items from a list while iterating in python\">stackoverflow.com/questions/1207406/&hellip;</a> for an explanation, but essentially you can just skip this and just append to a list your created dfs"}, {"owner": {"reputation": 41, "user_id": 5286312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b14b4d845160fb65f128b2abc2202cb?s=128&d=identicon&r=PG&f=1", "display_name": "Aliz Rao", "link": "https://stackoverflow.com/users/5286312/aliz-rao"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1458595391, "post_id": 36046638, "comment_id": 59921963, "body": "@MaxU: I was trying to read files into three different DFs. The idea was that by using a loop, one could concisely import any number of files."}], "answers": [{"tags": [], "owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "is_accepted": false, "score": 1, "last_activity_date": 1458161806, "creation_date": 1458161806, "answer_id": 36046768, "question_id": 36046638, "link": "https://stackoverflow.com/questions/36046638/reading-in-a-list-of-files-into-a-list-of-dataframes/36046768#36046768", "title": "Reading in a list of files into a list of DataFrames", "body": "<p>You are not working on the list elements themselves when iterating over them but you are <strong>not</strong> operating on the list. </p>\n\n<p>You need to insert the elements (or append them) to the list. One possibility could be:</p>\n\n<pre><code>files = [file1, file2, file3]\n\ndfs = [None] * 3 # Just a placeholder\n\n# Read in data files\nfor i, file in enumerate(files): # Enumeration instead of zip\n    if file_exists(file):\n        with open(file, 'rb') as in_file:\n            dfs[i] = pd.read_csv(in_file, low_memory=False) # Setting the list element\n            print dfs[i]      #the file is getting read properly\n</code></pre>\n\n<p>This updates the list elements and should work.</p>\n"}, {"tags": [], "owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "is_accepted": false, "score": 1, "last_activity_date": 1458161926, "creation_date": 1458161926, "answer_id": 36046799, "question_id": 36046638, "link": "https://stackoverflow.com/questions/36046638/reading-in-a-list-of-files-into-a-list-of-dataframes/36046799#36046799", "title": "Reading in a list of files into a list of DataFrames", "body": "<p>Your code seems over complicated you can just do:</p>\n\n<pre><code>files = [file1, file2, file3]\n\ndfs = []\n\n# Read in data files\nfor file in files:\n    if file_exists(file):\n        dfs.append(pd.read_csv(file, low_memory=False))\n</code></pre>\n\n<p>You will end up with a list of dfs as desired</p>\n"}, {"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 3, "last_activity_date": 1458638890, "last_edit_date": 1458638890, "creation_date": 1458162247, "answer_id": 36046881, "question_id": 36046638, "link": "https://stackoverflow.com/questions/36046638/reading-in-a-list-of-files-into-a-list-of-dataframes/36046881#36046881", "title": "Reading in a list of files into a list of DataFrames", "body": "<p>Try this:</p>\n\n<pre><code>dfs = [pd.read_csv(f, low_memory=False) for f in files]\n</code></pre>\n\n<p>if you want to check whether file exists:</p>\n\n<pre><code>import os\n\ndfs = [pd.read_csv(f, low_memory=False) for f in files if os.path.isfile(f)]\n</code></pre>\n\n<p>and if you want to concatenate all of them into one data frame:</p>\n\n<pre><code>df = pd.concat([pd.read_csv(f, low_memory=False)\n                for f in files if os.path.isfile(f)],\n               ignore_index=True)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 619481, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "is_accepted": false, "score": 0, "last_activity_date": 1458162269, "creation_date": 1458162269, "answer_id": 36046891, "question_id": 36046638, "link": "https://stackoverflow.com/questions/36046638/reading-in-a-list-of-files-into-a-list-of-dataframes/36046891#36046891", "title": "Reading in a list of files into a list of DataFrames", "body": "<p>You can try <code>list</code> comprehension:</p>\n\n<pre><code>files = [file1, file2, file3]\n\ndfs = [pd.read_csv(x, low_memory=False) for x in files if file_exists(x)]\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 5286312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b14b4d845160fb65f128b2abc2202cb?s=128&d=identicon&r=PG&f=1", "display_name": "Aliz Rao", "link": "https://stackoverflow.com/users/5286312/aliz-rao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 770, "favorite_count": 1, "answer_count": 4, "score": 3, "last_activity_date": 1458638890, "creation_date": 1458161302, "question_id": 36046638, "link": "https://stackoverflow.com/questions/36046638/reading-in-a-list-of-files-into-a-list-of-dataframes", "title": "Reading in a list of files into a list of DataFrames", "body": "<p>I'm trying to read a list of files into a list of Pandas DataFrames in Python. However, the code below doesn't work.</p>\n\n<pre><code>files = [file1, file2, file3]\n\ndf1 = pd.DataFrame()\ndf2 = pd.DataFrame()\ndf3 = pd.DataFrame()\n\ndfs = [df1, df2, df3]\n\n# Read in data files\nfor file,df in zip(files, dfs):\n    if file_exists(file):\n        with open(file, 'rb') as in_file:\n            df = pd.read_csv(in_file, low_memory=False)\n            print df        #the file is getting read properly\n\nprint df1    #empty\nprint df2    #empty\nprint df3    #empty\n</code></pre>\n\n<p>How to I get the original DataFrames to update if I pass them into a for-loop as a list of DataFrames? </p>\n"}, {"tags": ["python", "performance", "numpy", "parallel-processing", "python-multiprocessing"], "comments": [{"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "edited": false, "score": 0, "creation_date": 1458165076, "post_id": 36046634, "comment_id": 59743799, "body": "Did you compare the results for the different strategies?"}], "answers": [{"comments": [{"owner": {"reputation": 1435, "user_id": 3808639, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6d124ecc383d53e4c03eacb79669a2c9?s=128&d=identicon&r=PG&f=1", "display_name": "aph", "link": "https://stackoverflow.com/users/3808639/aph"}, "edited": false, "score": 0, "creation_date": 1458167687, "post_id": 36047245, "comment_id": 59744958, "body": "Good point, Roland, that resolves the mystery and seems obvious in hindsight. Thanks!"}], "tags": [], "owner": {"reputation": 35789, "user_id": 1219295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmJq2.png?s=128&g=1", "display_name": "Roland Smith", "link": "https://stackoverflow.com/users/1219295/roland-smith"}, "is_accepted": true, "score": 1, "last_activity_date": 1458163540, "creation_date": 1458163540, "answer_id": 36047245, "question_id": 36046634, "link": "https://stackoverflow.com/questions/36046634/optimizing-a-simple-cpu-bound-function-with-python-multiprocessing/36047245#36047245", "title": "Optimizing a simple CPU bound function with python multiprocessing", "body": "<p>Your strategies aren't doing the same!</p>\n\n<p>In the first strategy, the <code>Pool.map</code> iterates over an array, so <code>count_even_numbers</code> is called for every array item (since the shape of the array is one-dimensional).</p>\n\n<p>The second strategy maps over a list of arrays, so <code>count_even_numbers</code> is called for every array in the list.</p>\n"}, {"tags": [], "owner": {"reputation": 2011, "user_id": 5272893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2637f33878f35b750c76ccc428025a32?s=128&d=identicon&r=PG&f=1", "display_name": "serge-sans-paille", "link": "https://stackoverflow.com/users/5272893/serge-sans-paille"}, "is_accepted": false, "score": 2, "last_activity_date": 1525057959, "last_edit_date": 1525057959, "creation_date": 1458505698, "answer_id": 36119120, "question_id": 36046634, "link": "https://stackoverflow.com/questions/36046634/optimizing-a-simple-cpu-bound-function-with-python-multiprocessing/36119120#36119120", "title": "Optimizing a simple CPU bound function with python multiprocessing", "body": "<p>Turns out your example fits perfectly in the <a href=\"http://pythran.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">Pythran</a> model. Compiling the following source code <code>count_even.py</code>:</p>\n\n<pre><code>#pythran export count_even(int [:])\nimport numpy as np\n\ndef count_even_numbers(x):\n    return np.where(np.mod(x, 2) == 0, 1, 0)\n\ndef count_even(arr):\n    s = 0\n    #omp parallel for reduction(+:s)\n    for elem in arr:\n        s += count_even_numbers(elem)\n    return s\n</code></pre>\n\n<p>with the command line (-fopenmp activates the handling of the <a href=\"https://en.wikipedia.org/wiki/OpenMP\" rel=\"nofollow noreferrer\">OpenMP</a> annotations):</p>\n\n<pre><code>pythran count_even.py -fopenmp\n</code></pre>\n\n<p>And running <code>timeit</code> over this already yields massive speedups thanks to the conversion to native code:</p>\n\n<p><strong>Without Pythran</strong></p>\n\n<pre><code>$ python -m timeit -s 'import numpy as np; arr = np.arange(1e7, dtype=int); from count_even import count_even' 'count_even(arr)'\nverryyy long, more than several minutes :-/\n</code></pre>\n\n<p><strong>With Pythran, one core</strong></p>\n\n<pre><code>$ OMP_NUM_THREADS=1 python -m timeit -s 'import numpy as np; arr = np.arange(1e7, dtype=int); from count_even import count_even' 'count_even(arr)'\n100 loops, best of 3: 10.3 msec per loop\n</code></pre>\n\n<p><strong>With Pythran, two cores</strong>:</p>\n\n<pre><code>$ OMP_NUM_THREADS=2 python -m timeit -s 'import numpy as np; arr = np.arange(1e7, dtype=int); from count_even import count_even' 'count_even(arr)'\n100 loops, best of 3: 5.5 msec per loop\n</code></pre>\n\n<p>twice as fast, parallelization is working :-)</p>\n\n<p>Note that OpenMP enables multi-threading, not multi-processing.</p>\n"}], "owner": {"reputation": 1435, "user_id": 3808639, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6d124ecc383d53e4c03eacb79669a2c9?s=128&d=identicon&r=PG&f=1", "display_name": "aph", "link": "https://stackoverflow.com/users/3808639/aph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 474, "favorite_count": 1, "accepted_answer_id": 36047245, "answer_count": 2, "score": 0, "last_activity_date": 1525057959, "creation_date": 1458161296, "last_edit_date": 1495541786, "question_id": 36046634, "link": "https://stackoverflow.com/questions/36046634/optimizing-a-simple-cpu-bound-function-with-python-multiprocessing", "title": "Optimizing a simple CPU bound function with python multiprocessing", "body": "<p>I am trying to understand how the multiprocessing.Pool works, and I have developed a minimal example that illustrates my question. Briefly, I am using pool.map to parallelize a CPU-bound function operating on an array by following the example <a href=\"https://stackoverflow.com/questions/20887555/dead-simple-example-of-using-multiprocessing-queue-pool-and-locking\">Dead simple example of using Multiprocessing Queue, Pool and Locking</a>. When I follow that pattern, I get only a modest speedup with 4 cores, but if I instead manually chunk the array into <em>num_threads</em> and then use pool.map over the chunks, I find speedup factors that vastly exceed 4x, which makes no sense to me. Details to follow. </p>\n\n<p>First, the function definitions. </p>\n\n<pre><code>def take_up_time():\n    n = 1e3\n    while n &gt; 0:\n        n -= 1\n\ndef count_even_numbers(x):\n    take_up_time()\n    return np.where(np.mod(x, 2) == 0, 1, 0)\n</code></pre>\n\n<p>Now define the functions we'll benchmark. </p>\n\n<p>First the function that runs in serial:</p>\n\n<pre><code>def serial(arr):\n    return np.sum(map(count_even_numbers,arr))\n</code></pre>\n\n<p>Now the function that uses Pool.map in the \"standard\" way:</p>\n\n<pre><code>def parallelization_strategy1(arr):\n    num_threads = multiprocessing_count()\n    pool = multiprocessing.Pool(num_threads)\n    result = pool.map(count_even_numbers,arr)\n    pool.close()\n    return np.sum(result)\n</code></pre>\n\n<p>Finally, the second strategy in which I manually chunk the array and then run Pool.map over the chunks (Splitting solution due to <a href=\"https://stackoverflow.com/questions/9922395/python-numpy-split-array-into-unequal-subarrays\">python numpy split array into unequal subarrays</a>)</p>\n\n<pre><code>def split_padded(a,n):\n    \"\"\" Simple helper function for strategy 2\n    \"\"\"\n    padding = (-len(a))%n\n    if padding == 0:\n        return np.split(a, n)\n    else:\n        sub_arrays = np.split(np.concatenate((a,np.zeros(padding))),n)\n        sub_arrays[-1] = sub_arrays[-1][:-padding]\n    return sub_arrays\n\ndef parallelization_strategy2(arr):\n    num_threads = multiprocessing_count()\n    sub_arrays = split_padded(arr, num_threads)\n    pool = multiprocessing.Pool(num_threads)\n    result = pool.map(count_even_numbers,sub_arrays)\n    pool.close()\n    return np.sum(np.array(result))\n</code></pre>\n\n<p>Here is my array input:</p>\n\n<pre><code>npts = 1e3\narr = np.arange(npts)\n</code></pre>\n\n<p>Now I use the IPython %timeit function to run my timings, and for 1e3 points I get the following:</p>\n\n<ul>\n<li><strong>serial</strong>: 10 loops, best of 3: 98.7 ms per loop</li>\n<li><strong>parallelization_strategy1</strong>: 10 loops, best of 3: 77.7 ms per loop</li>\n<li><strong>parallelization_strategy2</strong>: 10 loops, best of 3: 22 ms per loop</li>\n</ul>\n\n<p>Since I have 4 cores, Strategy 1 is a disappointingly modest speedup, and strategy 2 is suspiciously larger than the maximum 4x speedup. </p>\n\n<p>When I increase npts to 1e4, the results are even more perplexing:</p>\n\n<ul>\n<li><strong>serial</strong>: 1 loops, best of 3: 967 ms per loop</li>\n<li><strong>parallelization_strategy1</strong>: 1 loops, best of 3: 596 ms per loop</li>\n<li><strong>parallelization_strategy2</strong>: 10 loops, best of 3: 22.9 ms per loop</li>\n</ul>\n\n<p>So the two sources of confusion are:</p>\n\n<ol>\n<li>Strategy 2 is way faster than the naive theoretical limit</li>\n<li>For some reason, %timeit with npts=1e4 only triggers 1 loop for serial and strategy 1, but 10 loops for strategy 2.</li>\n</ol>\n"}, {"tags": ["python", "list", "sqlite", "iterator"], "comments": [{"owner": {"reputation": 2892, "user_id": 3991164, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/ciXQ9.jpg?s=128&g=1", "display_name": "flaschbier", "link": "https://stackoverflow.com/users/3991164/flaschbier"}, "edited": false, "score": 0, "creation_date": 1458161540, "post_id": 36046601, "comment_id": 59741949, "body": "indentation still not ok. Please use your editor to indent your code by 4 spaces and then paste into question. Makes life much easier ;)"}, {"owner": {"reputation": 2892, "user_id": 3991164, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/ciXQ9.jpg?s=128&g=1", "display_name": "flaschbier", "link": "https://stackoverflow.com/users/3991164/flaschbier"}, "edited": false, "score": 0, "creation_date": 1458161729, "post_id": 36046601, "comment_id": 59742057, "body": "try <code>userOrder[j]</code> as parameter for the select instead of <code>prodItem</code>. Similar for <code>prodQty</code> further down. Take <code>userQty[j]</code> instead."}, {"owner": {"reputation": 11, "user_id": 3717991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37686f03301b0ae1a8b3539375ddd0a7?s=128&d=identicon&r=PG&f=1", "display_name": "user3717991", "link": "https://stackoverflow.com/users/3717991/user3717991"}, "reply_to_user": {"reputation": 2892, "user_id": 3991164, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/ciXQ9.jpg?s=128&g=1", "display_name": "flaschbier", "link": "https://stackoverflow.com/users/3991164/flaschbier"}, "edited": false, "score": 0, "creation_date": 1458161793, "post_id": 36046601, "comment_id": 59742087, "body": "IDLE tells me indentation is 4 spaces?"}, {"owner": {"reputation": 11, "user_id": 3717991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37686f03301b0ae1a8b3539375ddd0a7?s=128&d=identicon&r=PG&f=1", "display_name": "user3717991", "link": "https://stackoverflow.com/users/3717991/user3717991"}, "reply_to_user": {"reputation": 2892, "user_id": 3991164, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/ciXQ9.jpg?s=128&g=1", "display_name": "flaschbier", "link": "https://stackoverflow.com/users/3991164/flaschbier"}, "edited": false, "score": 0, "creation_date": 1458161892, "post_id": 36046601, "comment_id": 59742153, "body": "userOrder[j] throws a ValueError: parameters are of unsupported type"}, {"owner": {"reputation": 2892, "user_id": 3991164, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/ciXQ9.jpg?s=128&g=1", "display_name": "flaschbier", "link": "https://stackoverflow.com/users/3991164/flaschbier"}, "edited": false, "score": 0, "creation_date": 1458162255, "post_id": 36046601, "comment_id": 59742342, "body": "try the code from the answer pls"}, {"owner": {"reputation": 11, "user_id": 3717991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37686f03301b0ae1a8b3539375ddd0a7?s=128&d=identicon&r=PG&f=1", "display_name": "user3717991", "link": "https://stackoverflow.com/users/3717991/user3717991"}, "reply_to_user": {"reputation": 2892, "user_id": 3991164, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/ciXQ9.jpg?s=128&g=1", "display_name": "flaschbier", "link": "https://stackoverflow.com/users/3991164/flaschbier"}, "edited": false, "score": 0, "creation_date": 1458162565, "post_id": 36046601, "comment_id": 59742519, "body": "Still getting ValueError: parameters are of unsupported type    cursor = connection.execute(&quot;SELECT GTINnum, Item, CurrentStock,Cost from orderFile WHERE GTINnum= ?&quot;, (userOrder[j])) ValueError: parameters are of unsupported type"}, {"owner": {"reputation": 2892, "user_id": 3991164, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/ciXQ9.jpg?s=128&g=1", "display_name": "flaschbier", "link": "https://stackoverflow.com/users/3991164/flaschbier"}, "edited": false, "score": 0, "creation_date": 1458162868, "post_id": 36046601, "comment_id": 59742709, "body": "missing a comma after <code>userOrder[j]</code>..."}, {"owner": {"reputation": 11, "user_id": 3717991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37686f03301b0ae1a8b3539375ddd0a7?s=128&d=identicon&r=PG&f=1", "display_name": "user3717991", "link": "https://stackoverflow.com/users/3717991/user3717991"}, "reply_to_user": {"reputation": 2892, "user_id": 3991164, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/ciXQ9.jpg?s=128&g=1", "display_name": "flaschbier", "link": "https://stackoverflow.com/users/3991164/flaschbier"}, "edited": false, "score": 0, "creation_date": 1458163563, "post_id": 36046601, "comment_id": 59743055, "body": "Yes it seems to work although it now just prints out the first row  in the loop row in cursor. Only iterating once?"}, {"owner": {"reputation": 2892, "user_id": 3991164, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/ciXQ9.jpg?s=128&g=1", "display_name": "flaschbier", "link": "https://stackoverflow.com/users/3991164/flaschbier"}, "edited": false, "score": 0, "creation_date": 1458163764, "post_id": 36046601, "comment_id": 59743152, "body": "you select for a single value of the key, so each select will result in one hit. The iteration over the user&#39;s input is in the for loop enclosing the select."}, {"owner": {"reputation": 11, "user_id": 3717991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37686f03301b0ae1a8b3539375ddd0a7?s=128&d=identicon&r=PG&f=1", "display_name": "user3717991", "link": "https://stackoverflow.com/users/3717991/user3717991"}, "reply_to_user": {"reputation": 2892, "user_id": 3991164, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/ciXQ9.jpg?s=128&g=1", "display_name": "flaschbier", "link": "https://stackoverflow.com/users/3991164/flaschbier"}, "edited": false, "score": 0, "creation_date": 1458164532, "post_id": 36046601, "comment_id": 59743551, "body": "many thanks I get it now and will keep working on this."}, {"owner": {"reputation": 2892, "user_id": 3991164, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/ciXQ9.jpg?s=128&g=1", "display_name": "flaschbier", "link": "https://stackoverflow.com/users/3991164/flaschbier"}, "edited": false, "score": 0, "creation_date": 1458167169, "post_id": 36046601, "comment_id": 59744748, "body": "feel free to accept the answer below ;)"}], "answers": [{"tags": [], "owner": {"reputation": 2892, "user_id": 3991164, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/ciXQ9.jpg?s=128&g=1", "display_name": "flaschbier", "link": "https://stackoverflow.com/users/3991164/flaschbier"}, "is_accepted": false, "score": 1, "last_activity_date": 1458164086, "last_edit_date": 1458164086, "creation_date": 1458162044, "answer_id": 36046825, "question_id": 36046601, "link": "https://stackoverflow.com/questions/36046601/sqlite-python-and-lists/36046825#36046825", "title": "SQLite, Python and lists", "body": "<p>In the block</p>\n\n<pre><code>for j in range(len(userOrder)):\n    cursor = connection.execute(\"SELECT GTINnum, Item, CurrentStock,Cost from orderFile WHERE GTINnum= ?\", (prodItem,))\n    for row in cursor:\n        print (\"GTINnum =\", row[0], \"Item = \", row[1], \"Cost = \", row[2], \"Qty Ordered=\",(prodQty), \"\\n\")\n        prodCost = prodQty * row[2]\n        print (\"Total product cost is: \", (prodCost))\n</code></pre>\n\n<p>you are using the last user input <code>prodItem</code>and <code>prodQty</code> over and over. Replace by something that is iterating thru the lists you have built before:</p>\n\n<pre><code>for j in range(len(userOrder)):\n    cursor = connection.execute(\"SELECT GTINnum, Item, CurrentStock,Cost from orderFile WHERE GTINnum= ?\", (userOrder[j],))\n    for row in cursor:\n        print (\"GTINnum =\", row[0], \"Item = \", row[1], \"Cost = \", row[2], \"Qty Ordered=\",userQty[j], \"\\n\")\n        prodCost = userQty[j] * row[2]\n        print (\"Total product cost is: \", (prodCost))\n</code></pre>\n\n<p>Maybe I have missed some occurrence, but it should become clear where you are stuck...</p>\n\n<p>Update: When you want to do only one select, you have to generate a sequence of <code>?</code>, e.g. by</p>\n\n<pre><code>q = \"(\" + \",\".join([\"?\" for x in userOrder]) + \")\"\n</code></pre>\n\n<p>and append this to a query ending with <code>in</code>. You will also have to transform the <code>list</code> <code>userOrder</code> into a tuple. But then it becomes complicated to fiddle with the order of the result compared with the order of the entries in <code>prodQty</code>. Simply passing the array as a parameter and expect it to \"expand\" the <code>=</code> to an <code>in</code> will not work. If you do not want to completely change your program I would not try to go that way.</p>\n"}], "owner": {"reputation": 11, "user_id": 3717991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37686f03301b0ae1a8b3539375ddd0a7?s=128&d=identicon&r=PG&f=1", "display_name": "user3717991", "link": "https://stackoverflow.com/users/3717991/user3717991"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1458164086, "creation_date": 1458161172, "last_edit_date": 1458162870, "question_id": 36046601, "link": "https://stackoverflow.com/questions/36046601/sqlite-python-and-lists", "title": "SQLite, Python and lists", "body": "<p>I am a newbie to Python and SQLite but I have a program where I want the user to enter how many items they want to order from a database table. They enter the products and quantities and the select query should return the items that match. It works except that it only prints out the last user entry and not all the user entries. I think the problem is around the select query line but I cannot figure it out. I have tried numerous variations but it either crashes or returns just the last user entry. </p>\n\n<pre><code>enter code here\nfor i in range(orderQty):\n    prodItem = int(input(\"Enter your Item to the List: \"))\n    userOrder.append(prodItem)\n    prodQty = int(input(\"Enter the item quantity: \"))\n    userQty.append(prodQty)\n\n\nfor j in range(len(userOrder)):\n    cursor = connection.execute(\"SELECT GTINnum, Item, CurrentStock,Cost from orderFile WHERE GTINnum= ?\", (prodItem,))\n\n\n    for row in cursor:\n        print (\"GTINnum =\", row[0], \"Item = \", row[1], \"Cost = \", row[2], \"Qty Ordered=\",(prodQty), \"\\n\")\n        prodCost = prodQty * row[2]\n        print (\"Total product cost is: \", (prodCost))\n</code></pre>\n"}, {"tags": ["python", "npm", "dependencies", "pip"], "comments": [{"owner": {"reputation": 9701, "user_id": 5165332, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/93c5b8f16dce739cd7e4336034e1f76c?s=128&d=identicon&r=PG&f=1", "display_name": "Eugene Lisitsky", "link": "https://stackoverflow.com/users/5165332/eugene-lisitsky"}, "edited": false, "score": 1, "creation_date": 1458161085, "post_id": 36046440, "comment_id": 59741661, "body": "How does <code>pip</code> not resolve dependencies? Could you give a detailed explanation or an example?"}, {"owner": {"reputation": 557, "user_id": 1364315, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c2a94bd8b815d9f30fc293b5f8cbf256?s=128&d=identicon&r=PG", "display_name": "DaKnOb", "link": "https://stackoverflow.com/users/1364315/daknob"}, "edited": false, "score": 0, "creation_date": 1458161491, "post_id": 36046440, "comment_id": 59741915, "body": "Agree. An example package would help. It resolved dependencies for all packages I have installed. Maybe the package doesn&#39;t list something as a dependency?"}], "owner": {"reputation": 26891, "user_id": 633961, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/0c29q.jpg?s=128&g=1", "display_name": "guettli", "link": "https://stackoverflow.com/users/633961/guettli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 737, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1458161769, "creation_date": 1458160635, "last_edit_date": 1458161769, "question_id": 36046440, "link": "https://stackoverflow.com/questions/36046440/install-python-packages-via-npm", "title": "Install python packages via npm", "body": "<p>I am interested in dependency resolution out of curiosity.</p>\n\n<p>How can I install <strong>python</strong> packages on a linux server via npm?</p>\n\n<p>Maybe I am too old, but I personally think it is childish that every programming language community does re-invent the dependency resolution stuff on his own. Why not use npm for other languages?</p>\n\n<p><strong>Update</strong></p>\n\n<p>I ask out of curiosity, and to learn new stuff. I don't want to blame pip. But I was asked to provide details. Here you see <a href=\"https://github.com/pypa/pip/issues/988\" rel=\"nofollow\">pip needs a dependency resolver</a></p>\n"}, {"tags": ["python", "dictionary", "dynamic", "lambda", "constraints"], "comments": [{"owner": {"reputation": 11357, "user_id": 584846, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/uD1uQ.jpg?s=128&g=1", "display_name": "Brent Washburne", "link": "https://stackoverflow.com/users/584846/brent-washburne"}, "edited": false, "score": 0, "creation_date": 1458160865, "post_id": 36046384, "comment_id": 59741533, "body": "You have two functions with the same <code>&#39;type&#39; : &#39;ineq&#39;</code>.  Should one of them have a different type?"}, {"owner": {"reputation": 381, "user_id": 1685063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dhhjW.jpg?s=128&g=1", "display_name": "Nodiel Clavijo Llera", "link": "https://stackoverflow.com/users/1685063/nodiel-clavijo-llera"}, "edited": false, "score": 1, "creation_date": 1458160910, "post_id": 36046384, "comment_id": 59741556, "body": "What do you need to concatenate/join ?"}, {"owner": {"reputation": 697, "user_id": 1612060, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/azymj.png?s=128&g=1", "display_name": "ThatQuantDude", "link": "https://stackoverflow.com/users/1612060/thatquantdude"}, "edited": false, "score": 0, "creation_date": 1458160946, "post_id": 36046384, "comment_id": 59741585, "body": "one is a lower bound, one an upper , 0 &lt; x &lt; 0.1"}, {"owner": {"reputation": 697, "user_id": 1612060, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/azymj.png?s=128&g=1", "display_name": "ThatQuantDude", "link": "https://stackoverflow.com/users/1612060/thatquantdude"}, "edited": false, "score": 0, "creation_date": 1458160991, "post_id": 36046384, "comment_id": 59741609, "body": "I need to build the whole cons dictionary dynamically and pass it to the optimizer"}, {"owner": {"reputation": 11357, "user_id": 584846, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/uD1uQ.jpg?s=128&g=1", "display_name": "Brent Washburne", "link": "https://stackoverflow.com/users/584846/brent-washburne"}, "edited": false, "score": 0, "creation_date": 1458161168, "post_id": 36046384, "comment_id": 59741696, "body": "<code>cons</code> is not a dict, but a tuple of dicts."}, {"owner": {"reputation": 697, "user_id": 1612060, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/azymj.png?s=128&g=1", "display_name": "ThatQuantDude", "link": "https://stackoverflow.com/users/1612060/thatquantdude"}, "edited": false, "score": 0, "creation_date": 1458161239, "post_id": 36046384, "comment_id": 59741745, "body": "A sorry yes tuple of dicts"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1458161295, "post_id": 36046384, "comment_id": 59741780, "body": "If you have a function named <code>foo</code>, then <code>{&#39;type&#39;: &#39;ineq&#39;, &#39;fun&#39;: foo}</code> is a valid dict. Are you just asking how to store a function in a dict?"}, {"owner": {"reputation": 697, "user_id": 1612060, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/azymj.png?s=128&g=1", "display_name": "ThatQuantDude", "link": "https://stackoverflow.com/users/1612060/thatquantdude"}, "edited": false, "score": 0, "creation_date": 1458161476, "post_id": 36046384, "comment_id": 59741903, "body": "I need to do s.th like &#39;{&#39;type&#39; : &#39;eq&#39;, &#39;fun&#39;: lambda x: sum(x) -1}&#39; + &#39;{&#39;type&#39; : &#39;ineq&#39;, &#39;fun&#39;: lambda x: bounds(x) }&#39; + .... to create cons"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1458161584, "post_id": 36046384, "comment_id": 59741975, "body": "Combining two dicts is easy, <i>if</i> you specify how the values are supposed to be combined. This isn&#39;t a syntactic question, but a semantic question. What is the resultant function supposed to look like? <code>sum(bounds(x)) - 1</code>? <code>bounds(sum(x) - 1)</code>? <code>bounds(x) and sum(x) - 1</code>?"}, {"owner": {"reputation": 697, "user_id": 1612060, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/azymj.png?s=128&g=1", "display_name": "ThatQuantDude", "link": "https://stackoverflow.com/users/1612060/thatquantdude"}, "edited": false, "score": 0, "creation_date": 1458161795, "post_id": 36046384, "comment_id": 59742090, "body": "my end result has to look like this cons = {&#39;type&#39; : &#39;ineq&#39;, &#39;fun&#39;: lambda x: -1*bounds(x) + 0.1}, {&#39;type&#39; : &#39;ineq&#39;, &#39;fun&#39;: lambda x: -1*bounds(x) + 0.2}, {&#39;type&#39; : &#39;ineq&#39;, &#39;fun&#39;: lambda x: -1*bounds(x) + 0.3}) I basically have to dynamically insert 0.1,0.2,0.3"}, {"owner": {"reputation": 381, "user_id": 1685063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dhhjW.jpg?s=128&g=1", "display_name": "Nodiel Clavijo Llera", "link": "https://stackoverflow.com/users/1685063/nodiel-clavijo-llera"}, "edited": false, "score": 0, "creation_date": 1458161813, "post_id": 36046384, "comment_id": 59742108, "body": "Can you please provide which function in <code>scipy.optimize</code> you are trying to call, so we can see the documentation, or at least can explain what the function expects ?"}, {"owner": {"reputation": 697, "user_id": 1612060, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/azymj.png?s=128&g=1", "display_name": "ThatQuantDude", "link": "https://stackoverflow.com/users/1612060/thatquantdude"}, "edited": false, "score": 0, "creation_date": 1458162128, "post_id": 36046384, "comment_id": 59742265, "body": "bounds() is a custom function I wrote which calculates a dot product of an identity matrix and a weights vector."}], "answers": [{"tags": [], "owner": {"reputation": 11357, "user_id": 584846, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/uD1uQ.jpg?s=128&g=1", "display_name": "Brent Washburne", "link": "https://stackoverflow.com/users/584846/brent-washburne"}, "is_accepted": false, "score": -1, "last_activity_date": 1458161132, "creation_date": 1458161132, "answer_id": 36046590, "question_id": 36046384, "link": "https://stackoverflow.com/questions/36046384/dynamic-dictionary-including-keywords-lambda-function/36046590#36046590", "title": "Dynamic dictionary including keywords/ lambda function", "body": "<p>Using your current structure, you could use this code:</p>\n\n<pre><code>for c in cons:\n    if c['type'] == type:\n         fun = c['fun']\n         fun(x)\n</code></pre>\n\n<p>where <code>type</code> and <code>x</code> are your parameters.</p>\n"}, {"comments": [{"owner": {"reputation": 697, "user_id": 1612060, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/azymj.png?s=128&g=1", "display_name": "ThatQuantDude", "link": "https://stackoverflow.com/users/1612060/thatquantdude"}, "edited": false, "score": 0, "creation_date": 1458165176, "post_id": 36046842, "comment_id": 59743846, "body": "This looks like it will work, the only reason this is necessary is that I will have to input a limit value for every unique entry in my matrix e.g I have a matrix that maps products to countries the constraint will be on any individual country. If I could pass in a vector for + delta this wouldn&#39;t be necessary."}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": true, "score": 2, "last_activity_date": 1458162494, "last_edit_date": 1458162494, "creation_date": 1458162117, "answer_id": 36046842, "question_id": 36046384, "link": "https://stackoverflow.com/questions/36046384/dynamic-dictionary-including-keywords-lambda-function/36046842#36046842", "title": "Dynamic dictionary including keywords/ lambda function", "body": "<p>You need to write a function that returns a function. For example: </p>\n\n<pre><code>def constraint_maker(delta):\n    def _(x):\n        return -1*bounds(x) + delta\n    return _\n\ncons = ({'type' : 'ineq', 'fun': constraint_maker(0.1)},\n        {'type' : 'ineq', 'fun': constraint_maker(0.2)},\n        {'type' : 'ineq', 'fun': constraint_maker(0.3)})\n</code></pre>\n\n<p>The function named <code>_</code> (the name is arbitrarily chosen, it could be anything) is a <em>closure</em>; the value of <code>delta</code> in its body is fixed by the argument you pass to <code>constraint_maker</code>.</p>\n\n<p>Note that you can't write something like</p>\n\n<pre><code>cons = []\nfor d in [0.1, 0.2, 0.3]:\n    cons += {'type': 'ineq', 'fun': lambda x: -1*bounds(x) + d}\n</code></pre>\n\n<p>because your <code>lambda</code> expression does not create a closure; the name <code>d</code> is just a free variable whose value is looked up when it is finally called, and has no relation to the value of <code>d</code> when the <code>lambda</code> expression is evaluated. The closure is created when you define a function inside another function. You <em>could</em> write it as</p>\n\n<pre><code>cons = []\nfor d in [0.1, 0.2, 0.3]:\n    cons += {'type': 'ineq', 'fun': lambda x, d=d: -1*bounds(x) + d}\n</code></pre>\n\n<p>because now <code>d</code> in the body of the <code>lambda</code> is not a free variable; it's a local variable (specifically, an argument) whose default value is taken from the variable of the same name in the loop. This is a little uglier, even aside from the confusion of two variables with the same name (but different scopes), because now your function takes 2 arguments, although the second one is never meant to be used explicitly.</p>\n"}, {"tags": [], "owner": {"reputation": 3055, "user_id": 735893, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5970da463301e1fb98b1b524c633b0f9?s=128&d=identicon&r=PG", "display_name": "Vader", "link": "https://stackoverflow.com/users/735893/vader"}, "is_accepted": false, "score": 0, "last_activity_date": 1458165434, "last_edit_date": 1458165434, "creation_date": 1458164868, "answer_id": 36047595, "question_id": 36046384, "link": "https://stackoverflow.com/questions/36046384/dynamic-dictionary-including-keywords-lambda-function/36047595#36047595", "title": "Dynamic dictionary including keywords/ lambda function", "body": "<p>If I understood your question correctly, you want to combine two functions into one, e.g. if you doing something like that:</p>\n\n<pre><code>{'type': 'eq', 'fun': lambda x: x + 1} + {'type': 'ineq', 'fun': lambda x: x + 2}\n</code></pre>\n\n<p>you want to get:</p>\n\n<pre><code>{'type': 'eqineq', 'fun': lambda x: x + 1 + x + 2}\n</code></pre>\n\n<p>If that's the case then try the following:</p>\n\n<pre><code>class FunctionSum(object):\n    def __init__(self, f1, f2):\n        self.f1 = f1\n        self.f2 = f2\n\n    def __call__(self, x):\n        return self.f1(x) + self.f2(x)\n\nclass ConstDict(dict):       \n    def __add__(self, other):\n        _ = {}\n        for k, v in self.items():\n            if hasattr(v, '__call__'):\n                _[k] = FunctionSum(self[k], other[k])\n            else:\n                _[k] = self[k] + other[k]\n        return _\n\nconst = [ConstDict({'type': 'eq', 'fun': lambda x: x + 1}),\n        ConstDict({'type': 'ineq', 'fun': lambda x: x + 2})]\n\nprint (const[0] + const[1])['fun'](1)\n</code></pre>\n"}], "owner": {"reputation": 697, "user_id": 1612060, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/azymj.png?s=128&g=1", "display_name": "ThatQuantDude", "link": "https://stackoverflow.com/users/1612060/thatquantdude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 2, "accepted_answer_id": 36046842, "answer_count": 3, "score": 0, "last_activity_date": 1458165434, "creation_date": 1458160423, "last_edit_date": 1458161264, "question_id": 36046384, "link": "https://stackoverflow.com/questions/36046384/dynamic-dictionary-including-keywords-lambda-function", "title": "Dynamic dictionary including keywords/ lambda function", "body": "<p>I have a set of constraints that I have to enter in a specific way in scipy's optimise. The format looks like this</p>\n\n<pre><code>cons = ({'type' : 'eq',   'fun': lambda x:    sum(x) - 1.},\n        {'type' : 'ineq', 'fun': lambda x:    bounds(x)},\n        {'type' : 'ineq', 'fun': lambda x: -1*bounds(x) + 0.1})\n</code></pre>\n\n<p>bounds is a function which calculates a dot product. Without going into too much detail I have to manually create the cons tuple of dictionary during runtime. My question now is, how can I concatenate/ join the keys and values if it includes keywords, e.g \"lambda\"?</p>\n\n<p>I know how to call a function by a string</p>\n\n<pre><code>def install():\n    print \"In install\"\n\nmethods = {'install': install}\nmethod_name = 'install' \nif method_name in methods:\n     methods[method_name]() \n</code></pre>\n\n<p>But I cannot get my head around how I can get the cons dict working.\nthanks</p>\n"}, {"tags": ["python", "matplotlib", "3d"], "comments": [{"owner": {"reputation": 7296, "user_id": 2043505, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Aywfv.png?s=128&g=1", "display_name": "Schorsch", "link": "https://stackoverflow.com/users/2043505/schorsch"}, "edited": false, "score": 0, "creation_date": 1458607616, "post_id": 36046338, "comment_id": 59926363, "body": "very comprehensive <a href=\"http://stackoverflow.com/help/mcve\">mvce</a>! thank you"}], "answers": [{"tags": [], "owner": {"reputation": 7296, "user_id": 2043505, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Aywfv.png?s=128&g=1", "display_name": "Schorsch", "link": "https://stackoverflow.com/users/2043505/schorsch"}, "is_accepted": true, "score": 8, "last_activity_date": 1458607536, "creation_date": 1458607536, "answer_id": 36144304, "question_id": 36046338, "link": "https://stackoverflow.com/questions/36046338/contourf-on-the-faces-of-a-matplotlib-cube/36144304#36144304", "title": "Contourf on the faces of a Matplotlib cube", "body": "<p>You have to assign the data to the right axis. The zig-zag results from the fact that now you are at <code>x = const</code> and have your oscillation in the <code>z</code>-direction (from the random data, which is generated between <code>0</code> and <code>1</code>).<br>\nIf you you assign the matrixes differently in your example, you end up with the desired result: </p>\n\n<pre><code>from mpl_toolkits.mplot3d import Axes3D\nimport matplotlib.pyplot as plt\nimport numpy as np\n\nplt.close('all')\nfig = plt.figure()\nax = fig.gca(projection='3d')\n\nX = np.linspace(-5, 5, 43)\nY = np.linspace(-5, 5, 28)\nX, Y = np.meshgrid(X, Y)\n\nvarone=np.random.rand(75,28,43) * 5.0 - 10.0\nZ=varone[0,:,:]\n\ncset = [[],[],[]]\n\n# this is the example that worked for you:\ncset[0] = ax.contourf(X, Y, Z, zdir='z', offset=5,\n                      levels=np.linspace(np.min(Z),np.max(Z),30),cmap='jet')\n\n# now, for the x-constant face, assign the contour to the x-plot-variable:\ncset[1] = ax.contourf(Z, Y, X, zdir='x', offset=5,\n                      levels=np.linspace(np.min(Z),np.max(Z),30),cmap='jet')\n\n# likewise, for the y-constant face, assign the contour to the y-plot-variable:\ncset[2] = ax.contourf(X, Z, Y, zdir='y', offset=-5,\n                      levels=np.linspace(np.min(Z),np.max(Z),30),cmap='jet')\n\n# setting 3D-axis-limits:    \nax.set_xlim3d(-5,5)\nax.set_ylim3d(-5,5)\nax.set_zlim3d(-5,5)\n\nplt.show()\n</code></pre>\n\n<p>The result looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/g6bGB.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/g6bGB.png\" alt=\"contour cube\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 35, "user_id": 5964076, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0be53928bd250f783f3416a2e1a48ac4?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/5964076/patrick"}, "is_accepted": false, "score": 0, "last_activity_date": 1613984384, "creation_date": 1613984384, "answer_id": 66312650, "question_id": 36046338, "link": "https://stackoverflow.com/questions/36046338/contourf-on-the-faces-of-a-matplotlib-cube/66312650#66312650", "title": "Contourf on the faces of a Matplotlib cube", "body": "<p>The answer given below is not fully satisfying. Indeed, planes in x, y and z direction reproduce the same field.</p>\n<p>Hereafter, a function that allows to represent the correct field in each of the planes.</p>\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\ndef plot_cube_faces(arr, ax):\n    &quot;&quot;&quot;\n    External faces representation of a 3D array with matplotlib\n\n    Parameters\n    ----------\n    arr: numpy.ndarray()\n        3D array to handle\n    ax: Axes3D object\n        Axis to work with\n    &quot;&quot;&quot;\n    x0 = np.arange(arr.shape[0])\n    y0 = np.arange(arr.shape[1])\n    z0 = np.arange(arr.shape[2])\n    x, y, z = np.meshgrid(x0, y0, z0)\n    \n    xmax, ymax, zmax = max(x0), max(y0), max(z0)\n    vmin, vmax = np.min(arr), np.max(arr)\n\n    ax.contourf(x[:, :, 0], y[:, :, 0], arr[:, :, -1].T,\n                zdir='z', offset=zmax, vmin=vmin, vmax=vmax)\n    ax.contourf(x[0, :, :].T, arr[:, 0, :].T, z[0, :, :].T,\n                zdir='y', offset=0, vmin=vmin, vmax=vmax)\n    ax.contourf(arr[-1, :, :].T, y[:, 0, :].T, z[:, 0, :].T,\n                zdir='x', offset=xmax, vmin=vmin, vmax=vmax)\n\nx0 = np.arange(30)\ny0 = np.arange(20)\nz0 = np.arange(10)\nx, y, z = np.meshgrid(x0, y0, z0)\narr = (x + y + z) // 10\n\nfig = plt.figure()\nax = fig.add_subplot(111, projection='3d')\nplot_cube_faces(arr, ax)\nplt.show()\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/15TvU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/15TvU.png\" alt=\"enter image description here\" /></a></p>\n"}], "owner": {"reputation": 63, "user_id": 4531103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5587748db7587ee85856ef1690194587?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4531103/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2127, "favorite_count": 2, "accepted_answer_id": 36144304, "answer_count": 2, "score": 6, "last_activity_date": 1613984384, "creation_date": 1458160273, "last_edit_date": 1495542361, "question_id": 36046338, "link": "https://stackoverflow.com/questions/36046338/contourf-on-the-faces-of-a-matplotlib-cube", "title": "Contourf on the faces of a Matplotlib cube", "body": "<p>I am trying to 'paint' the faces of a cube with a contourf function using Python Matplotlib. Is this possible? </p>\n\n<p>This is similar idea to what was done <a href=\"https://stackoverflow.com/questions/18853563/how-can-i-paint-the-faces-of-a-cube\">here</a> but obviously I cannot use patches. Similarly, I don't think I can use add_collection3d <a href=\"https://stackoverflow.com/questions/6159437/basemap-on-the-face-of-a-matplotlib-mplot3d-cube\">like this</a> as it only supports PolyCollection, LineColleciton and PatchCollection.</p>\n\n<p>I have been trying to use contourf on a <code>fig.gca(projection='3d')</code>. Toy example below.</p>\n\n<pre><code>from mpl_toolkits.mplot3d import Axes3D\nimport matplotlib.pyplot as plt\nimport numpy as np\n\nplt.close('all')\nfig = plt.figure()\nax = fig.gca(projection='3d')\n\n############################################\n#  plotting the 'top' layer works okay...  #\n############################################\n\nX = np.linspace(-5, 5, 43)\nY = np.linspace(-5, 5, 28)\nX, Y = np.meshgrid(X, Y)\n\nvarone=np.random.rand(75,28,43)\nZ=varone[0,:,:]\ncset = ax.contourf(X, Y, Z, zdir='z', offset=1,\n                levels=np.linspace(np.min(Z),np.max(Z),30),cmap='jet')\n#see [1]\nplt.show()\n\n#################################################\n#  but now trying to plot a vertical slice....  #\n#################################################\n\nplt.close('all')\nfig = plt.figure()\nax = fig.gca(projection='3d')\n\nZ=varone[::-1,:,-1]\nX = np.linspace(-5, 5, 28)\nY = np.linspace(-5, 5, 75)\nX, Y = np.meshgrid(X, Y)\n\n#this 'projection' doesn't result in what I want, I really just want to rotate it\ncset = ax.contourf(X, Y, Z, offset=5,zdir='x',\n                levels=np.linspace(np.min(Z),np.max(Z),30),cmap='jet')\n\n#here's what it should look like....\nax=fig.add_subplot(1, 2,1)\ncs1=ax.contourf(X,Y,Z,levels=np.linspace(np.min(Z),np.max(Z),30),cmap='jet')\n#see [2]    \nplt.show()\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/18853563/how-can-i-paint-the-faces-of-a-cube\">1</a> From the example, the top surface comes easily:<br>\n<a href=\"https://i.stack.imgur.com/pkL0Y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pkL0Y.png\" alt=\"example plot #1\"></a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/6159437/basemap-on-the-face-of-a-matplotlib-mplot3d-cube\">2</a> But I'm not sure how to do the sides. Left side of this plot is what the section should look like (but rotated)...<br>\n<a href=\"https://i.stack.imgur.com/J6muf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/J6muf.png\" alt=\"example plot #2\"></a></p>\n\n<p>Open to other python approaches. The data I'm actually plotting are geophysical netcdf files.</p>\n"}, {"tags": ["python", "http", "url", "post", "python-requests"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 9994703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe09f165d7dfbde25cd0f00b8ec4dcf?s=128&d=identicon&r=PG", "display_name": "xXxSniper666xXx", "link": "https://stackoverflow.com/users/9994703/xxxsniper666xxx"}, "is_accepted": false, "score": 1, "last_activity_date": 1540283973, "creation_date": 1540283973, "answer_id": 52944694, "question_id": 36046230, "link": "https://stackoverflow.com/questions/36046230/get-auth-code-from-url-response-python/52944694#52944694", "title": "get auth code from URL response - Python", "body": "<p>I know this is an old question, but I was struggling with the same problem - I wanted to get the code using requests library. I managed to do it somehow, but I'm doubting that this isn't a very sustainable solution. Hopefully, after reading my solution you will understand better how the authentication works and you might find an improved solution.</p>\n\n<p>I have a Python Flask app with mySQL database. Occasionally, I want to create a backup of the database and send the backup file to my OneDrive, plus I want to fire this process inside my Flask App.</p>\n\n<p>First, I registered my App at <a href=\"https://apps.dev.microsoft.com/#/appList\" rel=\"nofollow noreferrer\">Microsoft Application Registration Portal</a> and added a new platform <em>Web</em> with redirect url <a href=\"http://localhost:8080/signin-microsoft\" rel=\"nofollow noreferrer\">http://localhost:8080/signin-microsoft</a>. I gave the app read and write permissions and stored the Application Id (<code>client_id</code>) and Application Secret (<code>client_secret</code>).</p>\n\n<p>Second, I added a new route to my Flask App. Note that my Flask App is running on localhost:8080.</p>\n\n<pre><code>@app.route(\"/signin-microsoft\", methods=['GET'])\ndef get_code():\n    return 'Yadda'\n</code></pre>\n\n<p>Third, I replicated the HTTP request header created by my browser to my <code>requests.get</code> call. That is, I opened Chrome, pasted <code>auth_url</code> to address bar, hit enter, inspected the request header and copied its content to my code.</p>\n\n<pre><code>r = requests.get(auth_url, \nheaders = {\"Host\" : \"login.live.com\",\n           \"Connection\" : \"keep-alive\",\n           \"Accept\" : \"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\",\n           \"Accept-Encoding\" : \"gzip, deflate, br\",\n           \"Upgrade-Insecure-Requests\" : \"1\",\n           \"Accept-Language\" : \"fi-FI,fi;q=0.9,en-US;q=0.8,en;q=0.7\",\n           \"User-agent\" : \"Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.100 Safari/537.36\",\n           \"Cookie\": (SUPER LONG WONT PASTE HERE)})\n</code></pre>\n\n<p>Fourth, I parsed the code from url the request was redirected.</p>\n\n<pre><code>re_url = r.url\ncode = re_url.split('code=')[-1]\n</code></pre>\n\n<p>Here is the final code:</p>\n\n<pre><code>redirect_uri = 'http://localhost:8080/signin-microsoft'\nclient_secret = CLIENT_SECRET\nclient_id = CLIENT_ID\napi_base_url='https://api.onedrive.com/v1.0/'\nscopes=['wl.signin', 'wl.offline_access', 'onedrive.readwrite']\n\nhttp_provider = onedrivesdk.HttpProvider()\nauth_provider = onedrivesdk.AuthProvider(\nhttp_provider = http_provider, client_id=client_id, scopes=scopes)\n\nclient = onedrivesdk.OneDriveClient(api_base_url, auth_provider, http_provider)\nauth_url = client.auth_provider.get_auth_url(redirect_uri)\nr = requests.get(auth_url, \n    headers = {\"Host\" : \"login.live.com\",\n               \"Connection\" : \"keep-alive\",\n               \"Accept\" : \"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\",\n               \"Accept-Encoding\" : \"gzip, deflate, br\",\n               \"Upgrade-Insecure-Requests\" : \"1\",\n               \"Accept-Language\" : \"fi-FI,fi;q=0.9,en-US;q=0.8,en;q=0.7\",\n               \"User-agent\" : \"Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.100 Safari/537.36\",\n               \"Cookie\": (SUPER LOOONG)})\nre_url = r.url\ncode = re_url.split('code=')[-1]\nclient.auth_provider.authenticate(code, redirect_uri, client_secret)\n</code></pre>\n\n<p>I think that there are two main points here: You need a HTTP server that listens redirect uri (in Microsoft's example they used HTTPServer from <code>http.server</code>) and you need to get the headers of the request right. Without the headers, the request won't redirect correctly and you won't get the code!</p>\n"}], "owner": {"reputation": 9123, "user_id": 1040718, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/u0SVy.jpg?s=128&g=1", "display_name": "cybertextron", "link": "https://stackoverflow.com/users/1040718/cybertextron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 970, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1540283973, "creation_date": 1458159868, "question_id": 36046230, "link": "https://stackoverflow.com/questions/36046230/get-auth-code-from-url-response-python", "title": "get auth code from URL response - Python", "body": "<p>I'm using <a href=\"https://github.com/OneDrive/onedrive-sdk-python\" rel=\"nofollow\">OneDrive Python SKD</a> in order to handle authentication with OneDrive SDK. The authentication is done as:</p>\n\n<pre><code>import onedrivesdk\nfrom onedrivesdk.helpers import GetAuthCodeServer\n\nredirect_uri = \"http://localhost:8080/\"\nclient_secret = \"your_app_secret\"\n\nclient = onedrivesdk.get_default_client(client_id='your_client_id',\n                                        scopes=['wl.signin',\n                                                'wl.offline_access',\n                                                'onedrive.readwrite'])\n\nauth_url = client.auth_provider.get_auth_url(redirect_uri)\n\n#this will block until we have the code\ncode = GetAuthCodeServer.get_auth_code(auth_url, redirect_uri)\n\nclient.auth_provider.authenticate(code, redirect_uri, client_secret)\n</code></pre>\n\n<p>However since I use a EC2 instance to run this authentication, and furthermore I don't want to utilize a browser just for that, the code blocks indefinitely. Here's the <code>get_auth_code</code> from Microsoft:</p>\n\n<pre><code>def get_auth_code(auth_url, redirect_uri):\n    \"\"\"Easy way to get the auth code. Wraps up all the threading\n    and stuff. Does block main thread.\n    Args:\n        auth_url (str): URL of auth server\n        redirect_uri (str): Redirect URI, as set for the app. Should be \n            something like \"http://localhost:8080\" for this to work.\n    Returns: \n        str: A string representing the auth code, sent back by the server\n    \"\"\"\n    HOST, PORT = urlparse(redirect_uri).netloc.split(':')\n    PORT = int(PORT)\n    # Set up HTTP server and thread\n    code_acquired = threading.Event()\n    s = GetAuthCodeServer((HOST, PORT), code_acquired, GetAuthCodeRequestHandler)    \n    th = threading.Thread(target=s.serve_forever)\n    th.start()\n    webbrowser.open(auth_url)\n    # At this point the browser will open and the code\n    # will be extracted by the server\n    code_acquired.wait()  # First wait for the response from the auth server\n    code = s.auth_code\n    s.shutdown()\n    th.join()\n    return code\n</code></pre>\n\n<p>I want to return the code. Here's a sample of <code>auth_url</code>:</p>\n\n<pre><code>https://login.live.com/oauth20_authorize.srf?scope=wl.offline_access+onedrive.readwrite&amp;redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F&amp;response_type=code&amp;client_id='your_client_id'\n</code></pre>\n\n<p>When I enter that URL in the browser, I get the code back:</p>\n\n<pre><code>http://localhost:8080/?code=Mb0bba7d1-adbc-9c1d-f790-3709cd0b9f16\n</code></pre>\n\n<p>SO I want to avoid that cumbersome process to get the code back by using <a href=\"http://docs.python-requests.org/en/master/\" rel=\"nofollow\">requests</a>. How can I accomplish that?</p>\n"}, {"tags": ["python", "scikit-learn", "term-document-matrix"], "answers": [{"tags": [], "owner": {"reputation": 567, "user_id": 4411193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d17f601e00d28dad72360704fe9118e?s=128&d=identicon&r=PG&f=1", "display_name": "Bernard Jesop", "link": "https://stackoverflow.com/users/4411193/bernard-jesop"}, "is_accepted": false, "score": 1, "last_activity_date": 1458161960, "last_edit_date": 1458161960, "creation_date": 1458161046, "answer_id": 36046563, "question_id": 36046180, "link": "https://stackoverflow.com/questions/36046180/how-to-selected-vocabulary-in-scikit-countvectorizer/36046563#36046563", "title": "how to selected vocabulary in scikit CountVectorizer", "body": "<p>When you call <code>fit_transform()</code> a sparse matrix will be returned.</p>\n\n<p>To display it you simply have to call the toarray() method.</p>\n\n<pre><code>vec = CountVectorizer()\nspars_mat = vec.fit_transform(['toto titi', 'toto toto', 'titi tata'])\n\n#you can observer the matrix in the interpretor by doing\nspars_mat.toarray()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 971, "user_id": 3368154, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ce9b75789308102d0b8490798e1d8c10?s=128&d=identicon&r=PG&f=1", "display_name": "Shweta", "link": "https://stackoverflow.com/users/3368154/shweta"}, "is_accepted": true, "score": 0, "last_activity_date": 1458202780, "last_edit_date": 1458202780, "creation_date": 1458164299, "answer_id": 36047456, "question_id": 36046180, "link": "https://stackoverflow.com/questions/36046180/how-to-selected-vocabulary-in-scikit-countvectorizer/36047456#36047456", "title": "how to selected vocabulary in scikit CountVectorizer", "body": "<p>With the help of @bernard post, I am able to completely get the result, which is as follows:</p>\n\n<pre><code>vec = CountVectorizer()\ndoc_term_matrix = vec.fit_transform(['toto titi', 'toto toto', 'titi tata'])\ndoc_term_matrix = doc_term_matrix.toarray()\nterm_freq_matrix = doc_term_matrix.sum(0)\nmin_freq = np.amin(term_freq_matrix)\nindices_name_mapping = vec.get_feature_names()\nfeature_names = [indices_name_mapping[i] for i, x in enumerate(term_freq_matrix) if x == min_freq]\n</code></pre>\n"}], "owner": {"reputation": 971, "user_id": 3368154, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ce9b75789308102d0b8490798e1d8c10?s=128&d=identicon&r=PG&f=1", "display_name": "Shweta", "link": "https://stackoverflow.com/users/3368154/shweta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 880, "favorite_count": 0, "accepted_answer_id": 36047456, "answer_count": 2, "score": 0, "last_activity_date": 1458202780, "creation_date": 1458159669, "question_id": 36046180, "link": "https://stackoverflow.com/questions/36046180/how-to-selected-vocabulary-in-scikit-countvectorizer", "title": "how to selected vocabulary in scikit CountVectorizer", "body": "<p>I have used scikit <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.text.CountVectorizer.html\" rel=\"nofollow\">CountVectorizer</a> to convert collection of documents into matrix of token counts. I have also used its max_features which considers the top max_features ordered by term frequency across the corpus.</p>\n\n<p>Now I want to analyse my selected corpus, especially I want to know frequency of tokens in selected vocabulary. But I am unable to find an easy way to do it. So kindly help me in this regard.</p>\n"}, {"tags": ["python", "python-2.7", "file"], "comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 3, "creation_date": 1458160471, "post_id": 36046167, "comment_id": 59741309, "body": "Side-note: What you&#39;re doing is subject to memory issues for large input files; I&#39;d suggest taking a look at <a href=\"https://docs.python.org/3/library/shutil.html#shutil.copyfileobj\" rel=\"nofollow noreferrer\"><code>shutil.copyfileobj</code></a> and related methods for doing this (which explicitly copy block by block, so peak memory consumption is fixed, not dependent on the size of the input file)."}, {"owner": {"reputation": 27241, "user_id": 5320906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NOdNo.jpg?s=128&g=1", "display_name": "snakecharmerb", "link": "https://stackoverflow.com/users/5320906/snakecharmerb"}, "edited": false, "score": 3, "creation_date": 1458160600, "post_id": 36046167, "comment_id": 59741383, "body": "There&#39;s a good discussion of this at <a href=\"http://stackoverflow.com/questions/7395542/is-explicitly-closing-files-important\" title=\"is explicitly closing files important\">stackoverflow.com/questions/7395542/&hellip;</a>"}, {"owner": {"reputation": 12668, "user_id": 95852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e215c7362074d0346612a10d3a89be9e?s=128&d=identicon&r=PG", "display_name": "John Y", "link": "https://stackoverflow.com/users/95852/john-y"}, "edited": false, "score": 10, "creation_date": 1458163815, "post_id": 36046167, "comment_id": 59743181, "body": "What do you mean by &quot;looks a bit more efficient&quot;? If you mean the source code is shorter, well, that&#39;s certainly true. But it&#39;s not generally considered a priority to make the code as short as possible in Python. Much more important is readability. If you mean you think it will execute more efficiently, I&#39;d say it probably won&#39;t make enough difference to matter, though to be sure you always want to measure. Why it shouldn&#39;t make much difference is that creating and assigning variables is cheap. In Python, all assignment amounts to setting a pointer."}, {"owner": {"reputation": 655, "user_id": 6025403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93dcb9996185618a1c17026a4f0b1a75?s=128&d=identicon&r=PG&f=1", "display_name": "Roy Crielaard", "link": "https://stackoverflow.com/users/6025403/roy-crielaard"}, "reply_to_user": {"reputation": 12668, "user_id": 95852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e215c7362074d0346612a10d3a89be9e?s=128&d=identicon&r=PG", "display_name": "John Y", "link": "https://stackoverflow.com/users/95852/john-y"}, "edited": false, "score": 0, "creation_date": 1458207006, "post_id": 36046167, "comment_id": 59759880, "body": "@JohnY - That is an excellent question. I think I had the assumption that &quot;shorter&quot; or &quot;involving less intermediate steps&quot; or &quot;less variables&quot; is good. You make a good point that it is actually readability that is more important (especially in a script with more code than my simple exercise). When you say assigning variables is cheap, I assume that means it will not cost much memory?"}, {"owner": {"reputation": 54008, "user_id": 2071828, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/R8AYO.jpg?s=128&g=1", "display_name": "Boris the Spider", "link": "https://stackoverflow.com/users/2071828/boris-the-spider"}, "edited": false, "score": 2, "creation_date": 1458208487, "post_id": 36046167, "comment_id": 59760931, "body": "@RoyCrielaard indeed - a &quot;variable&quot; is just a reference to data that must <i>already exist</i> in memory, it is the size of a memory pointer. Assignment is cheap both in terms of <i>size</i> and <i>speed</i>. Be aware that even in your first example you have file handle leak issues - if the writing crashes, for example, nothing will be closed."}, {"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "edited": false, "score": 0, "creation_date": 1458845343, "post_id": 36046167, "comment_id": 60049026, "body": "&quot;Fewer intermediate steps&quot; is important when a block of code gets executed millions of times, or when the &quot;steps&quot; are really large (like reading in a whole file). A single assignment is trivial; in fact, you can often make a program <i>faster</i> by assigning a non-local function or reference to a local variable. Readability is indeed always more important."}], "answers": [{"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 25, "creation_date": 1458160202, "post_id": 36046243, "comment_id": 59741153, "body": "Note: In the CPython reference interpreter, <code>open</code>ing and immediately <code>read</code>ing/<code>write</code>-ing to the returned file object (without storing a reference to the open file object) happens to be predictable and safe, but that is not the case on most other interpreters, and it&#39;s not a contractual guarantee of the language (just a side-effect of CPython reference counting). Using <code>with</code> is more scalable, portable, and predictable, so always use it, even if it seems like it works fine without it."}, {"owner": {"reputation": 16641, "user_id": 374746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/659060fcfde804c6582d87b432dfa497?s=128&d=identicon&r=PG", "display_name": "Russell Borogove", "link": "https://stackoverflow.com/users/374746/russell-borogove"}, "edited": false, "score": 0, "creation_date": 1458161561, "post_id": 36046243, "comment_id": 59741964, "body": "Are you saying that <code>open(foo).read()</code> isn&#39;t reliable on other implementations? That&#39;s horrifying; which ones behave so?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 16641, "user_id": 374746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/659060fcfde804c6582d87b432dfa497?s=128&d=identicon&r=PG", "display_name": "Russell Borogove", "link": "https://stackoverflow.com/users/374746/russell-borogove"}, "edited": false, "score": 8, "creation_date": 1458163155, "post_id": 36046243, "comment_id": 59742852, "body": "@RussellBorogove: Probably all the big ones; I don&#39;t know of any non-CPython implementations that do refcounting. A quick search shows <a href=\"http://pypy.org/compat.html\" rel=\"nofollow noreferrer\">official PyPy documentation</a> warning that <code>open(&quot;filename&quot;, &quot;w&quot;).write(&quot;stuff&quot;)</code> will only write to the file once the GC runs a collection, which is a pretty similar case. (If by &quot;isn&#39;t reliable&quot;, you mean something like &quot;might crash&quot; or &quot;might give wrong results&quot; rather than &quot;might leak file handles&quot;, <code>open(foo).read()</code> isn&#39;t any more prone to that than <code>with open(foo) as f: contents = f.read()</code>.)"}, {"owner": {"reputation": 16641, "user_id": 374746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/659060fcfde804c6582d87b432dfa497?s=128&d=identicon&r=PG", "display_name": "Russell Borogove", "link": "https://stackoverflow.com/users/374746/russell-borogove"}, "edited": false, "score": 0, "creation_date": 1458170996, "post_id": 36046243, "comment_id": 59746246, "body": "I&#39;m not concerned with filehandle leaks; I&#39;m very concerned about lost writes in particular."}, {"owner": {"reputation": 56659, "user_id": 450128, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2f72b3fdc99fe9fd1bbeb2f9da1d2c0a?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/450128/ben"}, "reply_to_user": {"reputation": 16641, "user_id": 374746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/659060fcfde804c6582d87b432dfa497?s=128&d=identicon&r=PG", "display_name": "Russell Borogove", "link": "https://stackoverflow.com/users/374746/russell-borogove"}, "edited": false, "score": 3, "creation_date": 1458180661, "post_id": 36046243, "comment_id": 59749162, "body": "@RussellBorogove <code>open(foo).read()</code> should be &#39;safe&#39;, as during the execution of <code>read()</code> the file object will still be referenced. But there&#39;s no guarantee about when (or in what order) the closes will happen when you have multiple file operations, just that it will be &quot;some time after the file objects are not referenced&quot;. This means writes can be arbitrarily delayed (or possibly even lost if objects still referenced when the program exits don&#39;t have their finalizers run, which not even CPython absolutely guarantees: <a href=\"https://docs.python.org/2/reference/datamodel.html#object.__del__\" rel=\"nofollow noreferrer\">docs.python.org/2/reference/datamodel.html#object.__del__</a>)"}, {"owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "edited": false, "score": 0, "creation_date": 1458180880, "post_id": 36046243, "comment_id": 59749236, "body": "this question has a Python 2.7 tag"}, {"owner": {"reputation": 5442, "user_id": 105886, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7d3264fa6d952319521078713f453372?s=128&d=identicon&r=PG", "display_name": "RoadieRich", "link": "https://stackoverflow.com/users/105886/roadierich"}, "reply_to_user": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "edited": false, "score": 0, "creation_date": 1458181984, "post_id": 36046243, "comment_id": 59749570, "body": "@jared updated the link, but nothing else is different between the two versions, at least as far as this answer is concerned."}, {"owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "edited": false, "score": 0, "creation_date": 1458182468, "post_id": 36046243, "comment_id": 59749736, "body": "I could have sworn you needed <code>from __future__ import with_statement</code> in 2.X. Wow, I&#39;m going crazy..."}, {"owner": {"reputation": 5442, "user_id": 105886, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7d3264fa6d952319521078713f453372?s=128&d=identicon&r=PG", "display_name": "RoadieRich", "link": "https://stackoverflow.com/users/105886/roadierich"}, "reply_to_user": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "edited": false, "score": 1, "creation_date": 1458182635, "post_id": 36046243, "comment_id": 59749778, "body": "@jared You only need the <code>__future__</code> import in 2.5. 2.6 had <code>with</code> statements with a single context, 2.7 backported multiple contexts, as seen above, from version 3.1. Prior to 2.5, you&#39;re out of luck, however."}, {"owner": {"reputation": 655, "user_id": 6025403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93dcb9996185618a1c17026a4f0b1a75?s=128&d=identicon&r=PG&f=1", "display_name": "Roy Crielaard", "link": "https://stackoverflow.com/users/6025403/roy-crielaard"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1458207846, "post_id": 36046243, "comment_id": 59760486, "body": "@ShadowRanger - I had to look up what CPython actually means. For anyone else interested, this discussion is interesting: <a href=\"http://stackoverflow.com/questions/17130975/python-vs-cpython\">stackoverflow.com/questions/17130975/python-vs-cpython</a>"}], "tags": [], "owner": {"reputation": 5442, "user_id": 105886, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7d3264fa6d952319521078713f453372?s=128&d=identicon&r=PG", "display_name": "RoadieRich", "link": "https://stackoverflow.com/users/105886/roadierich"}, "is_accepted": false, "score": 57, "last_activity_date": 1458181892, "last_edit_date": 1458181892, "creation_date": 1458159935, "answer_id": 36046243, "question_id": 36046167, "link": "https://stackoverflow.com/questions/36046167/is-there-a-need-to-close-files-that-have-no-reference-to-them/36046243#36046243", "title": "Is there a need to close files that have no reference to them?", "body": "<p>The pythonic way to deal with this is to use the <a href=\"https://docs.python.org/2.7/reference/compound_stmts.html#the-with-statement\"><code>with</code> context manager</a>:</p>\n\n<pre><code>with open(from_file) as in_file, open(to_file, 'w') as out_file:\n    indata = in_file.read()\n    out_file.write(indata)\n</code></pre>\n\n<p>Used with files like this, <code>with</code> will ensure all the necessary cleanup is done for you, even if <code>read()</code> or <code>write()</code> throw errors.</p>\n"}, {"tags": [], "owner": {"reputation": 2717, "user_id": 5641674, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/syYV6.jpg?s=128&g=1", "display_name": "Mark Skelton", "link": "https://stackoverflow.com/users/5641674/mark-skelton"}, "is_accepted": false, "score": 5, "last_activity_date": 1458160072, "last_edit_date": 1458160072, "creation_date": 1458159962, "answer_id": 36046255, "question_id": 36046167, "link": "https://stackoverflow.com/questions/36046167/is-there-a-need-to-close-files-that-have-no-reference-to-them/36046255#36046255", "title": "Is there a need to close files that have no reference to them?", "body": "<p>A safe way to open files without having to worry that you didn't close them is like this:</p>\n\n<pre><code>with open(from_file, 'r') as in_file:\n    in_data = in_file.read()\n\nwith open(to_file, 'w') as out_file:\n    outfile.write(in_data)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3642, "user_id": 4593743, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0212ffc5054bff1695ffa1e46f357746?s=128&d=identicon&r=PG&f=1", "display_name": "python", "link": "https://stackoverflow.com/users/4593743/python"}, "is_accepted": false, "score": 7, "last_activity_date": 1458159967, "creation_date": 1458159967, "answer_id": 36046257, "question_id": 36046167, "link": "https://stackoverflow.com/questions/36046167/is-there-a-need-to-close-files-that-have-no-reference-to-them/36046257#36046257", "title": "Is there a need to close files that have no reference to them?", "body": "<p>It is good practice to use the <strong><code>with</code></strong> keyword when dealing with file objects. This has the advantage that the file is properly closed after its suite finishes, even if an exception is raised on the way. It is also much shorter than writing equivalent try-finally blocks:</p>\n\n<pre><code>&gt;&gt;&gt; with open('workfile', 'r') as f:\n...     read_data = f.read()\n&gt;&gt;&gt; f.closed\nTrue\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 54008, "user_id": 2071828, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/R8AYO.jpg?s=128&g=1", "display_name": "Boris the Spider", "link": "https://stackoverflow.com/users/2071828/boris-the-spider"}, "edited": false, "score": 6, "creation_date": 1458208364, "post_id": 36047108, "comment_id": 59760860, "body": "Not just <i>closing</i> - <i>writing</i>! Buffers won&#39;t be flushed until the file is closed..."}, {"owner": {"reputation": 25770, "user_id": 5349916, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/QovYv.jpg?s=128&g=1", "display_name": "MisterMiyagi", "link": "https://stackoverflow.com/users/5349916/mistermiyagi"}, "reply_to_user": {"reputation": 54008, "user_id": 2071828, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/R8AYO.jpg?s=128&g=1", "display_name": "Boris the Spider", "link": "https://stackoverflow.com/users/2071828/boris-the-spider"}, "edited": false, "score": 0, "creation_date": 1458209843, "post_id": 36047108, "comment_id": 59761991, "body": "Thanks, I&#39;ve included it in the answer."}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "reply_to_user": {"reputation": 54008, "user_id": 2071828, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/R8AYO.jpg?s=128&g=1", "display_name": "Boris the Spider", "link": "https://stackoverflow.com/users/2071828/boris-the-spider"}, "edited": false, "score": 0, "creation_date": 1458220036, "post_id": 36047108, "comment_id": 59769469, "body": "@BoristheSpider Unless the file was opened with the <code>O_DIRECT</code> flag - kinda uncommon, though."}, {"owner": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "reply_to_user": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 0, "creation_date": 1458266861, "post_id": 36047108, "comment_id": 59795672, "body": "@black: <code>O_DIRECT</code> does not provide guarantees of any kind; see <a href=\"http://linux.die.net/man/2/open\" rel=\"nofollow noreferrer\"><code>open(2)</code></a>.  You need <code>O_SYNC</code>/<code>O_DSYNC</code>."}], "tags": [], "owner": {"reputation": 25770, "user_id": 5349916, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/QovYv.jpg?s=128&g=1", "display_name": "MisterMiyagi", "link": "https://stackoverflow.com/users/5349916/mistermiyagi"}, "is_accepted": false, "score": 38, "last_activity_date": 1458209789, "last_edit_date": 1458209789, "creation_date": 1458162961, "answer_id": 36047108, "question_id": 36046167, "link": "https://stackoverflow.com/questions/36046167/is-there-a-need-to-close-files-that-have-no-reference-to-them/36047108#36047108", "title": "Is there a need to close files that have no reference to them?", "body": "<p>The default python interpeter, CPython, uses reference counting. This means that once there are no references to an object, it gets garbage collected, i.e. cleaned up.</p>\n\n<p>In your case, doing</p>\n\n<pre><code>open(to_file, 'w').write(indata)\n</code></pre>\n\n<p>will create a file object for <code>to_file</code>, but not asign it to a name - this means there is no reference to it. You cannot possibly manipulate the object after this line.</p>\n\n<p>CPython will detect this, and clean up the object after it has been used. In the case of a file, this means closing it automatically. In principle, this is fine, and your program won't leak memory.</p>\n\n<p>The \"problem\" is this mechanism is an implementation detail of the CPython interpreter. The language standard <em>explicitly</em> gives no guarantee for it! If you are using an alternate interpreter such as pypy, automatic closing of files may be delayed <em>indefinitely</em>. This includes other implicit actions such as flushing writes on close.</p>\n\n<p>This problem also applies to other resources, e.g. network sockets. It is good practice to <em>always</em> explicitly handle such external resources. Since python 2.6, the <code>with</code> statement makes this elegant:</p>\n\n<pre><code>with open(to_file, 'w') as out_file:\n    out_file.write(in_data)\n</code></pre>\n\n<hr>\n\n<p>TLDR: It works, but please don't do it.</p>\n"}, {"tags": [], "owner": {"reputation": 3231, "user_id": 2348587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/438775d2759253a1ac650e11ab237070?s=128&d=identicon&r=PG", "display_name": "Darrick Herwehe", "link": "https://stackoverflow.com/users/2348587/darrick-herwehe"}, "is_accepted": false, "score": 7, "last_activity_date": 1458221805, "last_edit_date": 1495542746, "creation_date": 1458221805, "answer_id": 36062180, "question_id": 36046167, "link": "https://stackoverflow.com/questions/36046167/is-there-a-need-to-close-files-that-have-no-reference-to-them/36062180#36062180", "title": "Is there a need to close files that have no reference to them?", "body": "<p>The answers so far are absolutely correct <em>when working in python</em>. You should use the <code>with open()</code> context manager. It's a great built-in feature, and helps shortcut a common programming task (opening and closing a file).</p>\n\n<p>However, since you are a beginner and won't have access to <a href=\"https://stackoverflow.com/a/36046243/2348587\">context managers</a>\n and <a href=\"https://stackoverflow.com/a/36047108/2348587\">automated reference counting</a> for the entirety of your career, I'll address the question from a <em>general programming</em> stance.</p>\n\n<p>The first version of your code is perfectly fine. You open a file, save the reference, read from the file, then close it. This is how a lot of code is written when the language doesn't provide a shortcut for the task. The only thing I would improve is to move <code>close()</code> to where you are opening and reading the file. Once you open and read the file, you have the contents in memory and no longer need the file to be open.</p>\n\n<pre><code>in_file = open(from_file)\nindata = in_file.read()\nout_file.close() \n\nout_file = open(to_file, 'w')\nout_file.write(indata)\nin_file.close()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3392, "user_id": 4532996, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/uXkl2.png?s=128&g=1", "display_name": "cat", "link": "https://stackoverflow.com/users/4532996/cat"}, "edited": false, "score": 0, "creation_date": 1458242932, "post_id": 36063184, "comment_id": 59786026, "body": "<i>&quot;the number of files a process can keep open is limited (long ago the limit was about 20 on Unix&quot;</i> I can hardly see this as an issue since on any modern Unix-like, the limit is so high the system will run out of memory or CPU time before the limit is reached."}, {"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "reply_to_user": {"reputation": 3392, "user_id": 4532996, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/uXkl2.png?s=128&g=1", "display_name": "cat", "link": "https://stackoverflow.com/users/4532996/cat"}, "edited": false, "score": 0, "creation_date": 1458253411, "post_id": 36063184, "comment_id": 59791604, "body": "Thanks... I looked quickly but didn&#39;t find any hard numbers, so I went from memory. Added a little research now. (While the <i>hard</i> limits may be astronomical or unlimited, the number is usually limited with <code>ulimit</code> and the like.)"}], "tags": [], "owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "is_accepted": true, "score": 39, "last_activity_date": 1458993247, "last_edit_date": 1495541416, "creation_date": 1458224195, "answer_id": 36063184, "question_id": 36046167, "link": "https://stackoverflow.com/questions/36046167/is-there-a-need-to-close-files-that-have-no-reference-to-them/36063184#36063184", "title": "Is there a need to close files that have no reference to them?", "body": "<p>You asked about the \"basic concepts\", so let's take it from the top: When you open a file, your program gains access to <strong>a system resource,</strong> that is, to something outside the program's own memory space. This is basically a bit of magic provided by the operating system (a <em>system call,</em> in Unix terminology). Hidden inside the file object is a reference to a \"file descriptor\", the actual OS resource associated with the open file. Closing the file tells the system to release this resource.</p>\n\n<p>As an OS resource, <strong>the number of files a process can keep open is limited:</strong> Long ago the per-process limit was about 20 on Unix. Right now my OS X box imposes a limit of 256 open files (though this is an imposed limit, and can be raised). Other systems might set limits of <a href=\"https://stackoverflow.com/q/870173/699305\">a few thousand</a>, or in the <a href=\"http://www.cyberciti.biz/faq/linux-increase-the-maximum-number-of-open-files/\" rel=\"noreferrer\">tens of thousands</a> (per user, not per process in this case). When your program ends, all resources are automatically released. So if your program opens a few files, does something with them and exits, you can be sloppy and you'll never know the difference. But if your program will be opening thousands of files, you'll do well to release open files to avoid exceeding OS limits.</p>\n\n<p>There's another benefit to closing files before your process exits: If you opened a file for writing, <strong>closing it will first \"flush its output buffer\".</strong> This means that i/o libraries optimize disk use by collecting (\"buffering\") what you write out, and saving it to disk in batches.  If you write text to a file and immediately try to reopen and read it without first closing the output handle, you'll find that not everything has been written out. Also, if your program is closed too abruptly (with a signal, or occasionally even through normal exit), the output might never be flushed. </p>\n\n<p>There's already plenty of other answers on how to release files, so here's just a brief list of the approaches:</p>\n\n<ol>\n<li><p>Explicitly with <code>close()</code>. (Note for python newbies: Don't forget the parens! My students like to write <code>in_file.close</code>, which does nothing.)</p></li>\n<li><p><strong>Recommended:</strong> Implicitly, by opening files with the <code>with</code> statement. The <code>close()</code> method will be called when the end of the <code>with</code> block is reached, even in the event of abnormal termination (from an exception).</p>\n\n<pre><code>with open(\"data.txt\") as in_file:\n    data = in_file.read()\n</code></pre></li>\n<li><p>Implicitly by the reference manager or garbage collector, if your python engine implements it. This is not recommended since it's not entirely portable; see the other answers for details. That's why the <code>with</code> statement was added to python. </p></li>\n<li><p>Implicitly, when your program ends. If a file is open for output, this may run a risk of the program exiting before everything has been flushed to disk.</p></li>\n</ol>\n"}], "owner": {"reputation": 655, "user_id": 6025403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93dcb9996185618a1c17026a4f0b1a75?s=128&d=identicon&r=PG&f=1", "display_name": "Roy Crielaard", "link": "https://stackoverflow.com/users/6025403/roy-crielaard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7115, "favorite_count": 8, "accepted_answer_id": 36063184, "answer_count": 6, "score": 55, "last_activity_date": 1458993247, "creation_date": 1458159626, "last_edit_date": 1458246908, "question_id": 36046167, "link": "https://stackoverflow.com/questions/36046167/is-there-a-need-to-close-files-that-have-no-reference-to-them", "title": "Is there a need to close files that have no reference to them?", "body": "<p>As a complete beginner to programming, I am trying to understand the basic concepts of opening and closing files. One exercise I am doing is creating a script that allows me to copy the contents from one file to another. </p>\n\n<pre><code>in_file = open(from_file)\nindata = in_file.read()\n\nout_file = open(to_file, 'w')\nout_file.write(indata)\n\nout_file.close()\nin_file.close()\n</code></pre>\n\n<p>I have tried to shorten this code and came up with this:</p>\n\n<pre><code>indata = open(from_file).read()\nopen(to_file, 'w').write(indata)\n</code></pre>\n\n<p>This works and looks a bit more efficient to me. However, this is also where I get confused. I think I left out the references to the opened files; there was no need for the in_file and out_file variables. However, does this leave me with two files that are open, but have nothing referring to them? How do I close these, or is there no need to?</p>\n\n<p>Any help that sheds some light on this topic is much appreciated.</p>\n"}, {"tags": ["python", "python-2.7", "selenium", "selenium-webdriver", "macros"], "answers": [{"tags": [], "owner": {"reputation": 13000, "user_id": 3190347, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Fsjd6.jpg?s=128&g=1", "display_name": "Shubham Jain", "link": "https://stackoverflow.com/users/3190347/shubham-jain"}, "is_accepted": false, "score": 1, "last_activity_date": 1458192853, "last_edit_date": 1495540772, "creation_date": 1458192853, "answer_id": 36052392, "question_id": 36046142, "link": "https://stackoverflow.com/questions/36046142/automating-tasks-through-a-vnc-connection-within-a-browser/36052392#36052392", "title": "Automating Tasks through a VNC Connection within a Browser", "body": "<p>There is a class in java called Robot class which can handle almost all keyboard operation</p>\n\n<p>There is a similer thing present in python  <code>gtk.gdk.Display</code>.</p>\n\n<p>Refer below:-</p>\n\n<p><a href=\"https://stackoverflow.com/questions/860013/is-there-a-python-equivalent-to-javas-awt-robot-class\">Is there a Python equivalent to Java&#39;s AWT Robot class?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/69645/take-a-screenshot-via-a-python-script-linux/782768#782768\">Take a screenshot via a python script. [Linux]</a></p>\n\n<p>OR</p>\n\n<p><a href=\"https://stackoverflow.com/questions/24030781/python-ctypes-keybd-event-simulate-ctrlaltdelete\">Python ctypes keybd_event simulate ctrl+alt+delete</a></p>\n\n<p>Demo java code:-</p>\n\n<pre><code> try{   \n    Robot robot = new Robot();\n    robot.keyPress(KeyEvent.VK_CONTROL);\n    robot.keyPress(KeyEvent.VK_ALT);\n    robot.keyPress(KeyEvent.VK_DELETE);\n    robot.keyRelease(KeyEvent.VK_CONTROL);\n    robot.keyRelease(KeyEvent.VK_ALT);\n    robot.keyRelease(KeyEvent.VK_DELETE);\n\n }\n catch(Exception ex)\n {\n     System.out.println(ex.getMessage());\n }\n</code></pre>\n\n<p>Hope it will help you :)</p>\n"}], "owner": {"reputation": 745, "user_id": 4731952, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/a9f83.png?s=128&g=1", "display_name": "Saroekin", "link": "https://stackoverflow.com/users/4731952/saroekin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 678, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1458192853, "creation_date": 1458159566, "question_id": 36046142, "link": "https://stackoverflow.com/questions/36046142/automating-tasks-through-a-vnc-connection-within-a-browser", "title": "Automating Tasks through a VNC Connection within a Browser", "body": "<p>So first off, overall what I'm trying to accomplish is for a base machine (as in a VPS) to run automated task through Firefox using Python.</p>\n\n<p>Now the object or goal is to have Firefox run the given tasks in the browser itself, though then connect to a VPS (through the browser) using a VNC connection, and control or issue tasks as well to that VPS (this is the part I'm having trouble with); with also as little memory required as possible for maximum efficiency.</p>\n\n<p>To give an example, if you've used Digital Ocean, you can view your VPS's specific screen or terminal within the current browser.</p>\n\n<p>To be clear, the VPS OS I'm using to run the base process is Linux, though the VPS that the program is connecting to (through the browser) is using a Windows OS. Something such as this let's say (note I didn't screenshot this):</p>\n\n<p><a href=\"https://i.stack.imgur.com/8k3V0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8k3V0.png\" alt=\"enter image description here\"></a></p>\n\n<p>My problem lies with that after running through all of the scripted tasks using Selenium in Python (with Firefox), once I open up the VPS in the browser, I can't figure out how to access it properly or issue jobs to be completed.</p>\n\n<p>I've thought about maybe using (x,y) coordinates for mouse clicks, though I can't say this would exactly work (I tested it with iMacros, though not yet Selenium).</p>\n\n<p>So in a nutshell, I'm running base tasks in Firefox to start, and then connecting to a VPS, and finally issuing more tasks to be completed from Firefox to that VPS that's using a Windows OS environment.</p>\n\n<p>Suggestions on how to make this process simpler, more efficient, or further its reliability?</p>\n"}, {"tags": ["python", "openerp", "odoo-9"], "answers": [{"tags": [], "owner": {"reputation": 9433, "user_id": 2926754, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/DuemX.jpg?s=128&g=1", "display_name": "Bhavesh Odedra", "link": "https://stackoverflow.com/users/2926754/bhavesh-odedra"}, "is_accepted": false, "score": 0, "last_activity_date": 1458189897, "creation_date": 1458189897, "answer_id": 36051861, "question_id": 36046118, "link": "https://stackoverflow.com/questions/36046118/how-to-add-a-sequence-to-a-field-in-the-account-invoice-model/36051861#36051861", "title": "How to add a sequence to a field in the account.invoice model?", "body": "<p>You have define wrong function name. Try with below code</p>\n\n<pre><code>@api.multi\ndef invoice_proforma2(self, vals):\n    for invoice in self: \n        invoice.x_id_proforma = self.env['ir.sequence'].next_by_code('account.invoice') \n    return super(AccountInvoice, self).invoice_proforma2(vals)\n</code></pre>\n\n<p>NOTE:</p>\n\n<p>Print <code>invoice</code> variable and check weather function is call or not.</p>\n"}], "owner": {"reputation": 257, "user_id": 5986925, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/nVcFO.gif?s=128&g=1", "display_name": "beriliox", "link": "https://stackoverflow.com/users/5986925/beriliox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 285, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1458189897, "creation_date": 1458159503, "question_id": 36046118, "link": "https://stackoverflow.com/questions/36046118/how-to-add-a-sequence-to-a-field-in-the-account-invoice-model", "title": "How to add a sequence to a field in the account.invoice model?", "body": "<p>I want to add a sequence to one field called x_id_proforma in the account.invoice model when a invoice passes to PRO -FORMA. But the problem is that it does not assign the sequence to x_id_proforma field when I press the PRO -FORMA button.</p>\n\n<p>This is the button that is in the view:</p>\n\n<pre><code>&lt;button name=\"invoice_proforma2\" states=\"draft\" string=\"PRO-FORMA\" groups=\"account.group_proforma_invoices\"/&gt;\n</code></pre>\n\n<p>This is my invoice.py :</p>\n\n<pre><code>@api.multi\ndef invoice_prsoforma2(self, vals):\n    for invoice in self: \n        invoice.x_id_proforma = self.env['ir.sequence'].next_by_code('account.invoice') \n    return super(AccountInvoice, self).invoice_proforma2(vals)\n</code></pre>\n\n<p>What I want is that when you press the PRO -FORMA the field button is assigned the sequence to field x_id.proforma.</p>\n\n<p>This view is customer invoices:</p>\n\n<p><a href=\"https://i.stack.imgur.com/kaAy6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kaAy6.png\" alt=\"enter image description here\"></a></p>\n\n<p>Thanks for your help.</p>\n"}, {"tags": ["python", "csv", "delimiter", "writer"], "comments": [{"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1458159597, "post_id": 36046045, "comment_id": 59740799, "body": "Because <code>gamma</code> is not a float, it is, perhaps, a <code>tuple</code> or a <code>str</code>. Try <code>print(type(gamma), gamma)</code> inside your for loop."}, {"owner": {"reputation": 10425, "user_id": 2142055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Stop harming Monica", "link": "https://stackoverflow.com/users/2142055/stop-harming-monica"}, "edited": false, "score": 1, "creation_date": 1458159626, "post_id": 36046045, "comment_id": 59740826, "body": "Not around the las three values but the last value. You are writing 9 values."}, {"owner": {"reputation": 337, "user_id": 5829396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c8a1e12ace1b703b59326bb9f3885df?s=128&d=identicon&r=PG&f=1", "display_name": "Sugan", "link": "https://stackoverflow.com/users/5829396/sugan"}, "edited": false, "score": 0, "creation_date": 1458160443, "post_id": 36046045, "comment_id": 59741296, "body": "Thank you. Yah, gamma meant to be a float, but I was returning tuple of three floats. Problem Solved."}], "answers": [{"tags": [], "owner": {"reputation": 9701, "user_id": 5165332, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/93c5b8f16dce739cd7e4336034e1f76c?s=128&d=identicon&r=PG&f=1", "display_name": "Eugene Lisitsky", "link": "https://stackoverflow.com/users/5165332/eugene-lisitsky"}, "is_accepted": false, "score": 1, "last_activity_date": 1458159870, "creation_date": 1458159870, "answer_id": 36046232, "question_id": 36046045, "link": "https://stackoverflow.com/questions/36046045/extra-character-quotechar-while-writing-csv-using-csv-writerow-in-python/36046232#36046232", "title": "extra character (quotechar) while writing csv using csv.writerow() in python", "body": "<p>That's ok, because this value contains commas itself, so it could be read incorrectly. CSV module automatically encloses it in quotes according to standard.</p>\n"}, {"tags": [], "owner": {"reputation": 78, "user_id": 4730555, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UE8PM7VHbr8/AAAAAAAAAAI/AAAAAAAAAP8/Sy3TLX18_vk/photo.jpg?sz=128", "display_name": "RedUno", "link": "https://stackoverflow.com/users/4730555/reduno"}, "is_accepted": true, "score": 0, "last_activity_date": 1458162154, "creation_date": 1458162154, "answer_id": 36046853, "question_id": 36046045, "link": "https://stackoverflow.com/questions/36046045/extra-character-quotechar-while-writing-csv-using-csv-writerow-in-python/36046853#36046853", "title": "extra character (quotechar) while writing csv using csv.writerow() in python", "body": "<p>You are writing 9 values in the file,where the last one is a triplet</p>\n"}], "owner": {"reputation": 337, "user_id": 5829396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c8a1e12ace1b703b59326bb9f3885df?s=128&d=identicon&r=PG&f=1", "display_name": "Sugan", "link": "https://stackoverflow.com/users/5829396/sugan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 461, "favorite_count": 0, "accepted_answer_id": 36046853, "answer_count": 2, "score": 1, "last_activity_date": 1458162154, "creation_date": 1458159304, "question_id": 36046045, "link": "https://stackoverflow.com/questions/36046045/extra-character-quotechar-while-writing-csv-using-csv-writerow-in-python", "title": "extra character (quotechar) while writing csv using csv.writerow() in python", "body": "<p>I am trying to write data in csv file in python using following code:  </p>\n\n<pre><code>with open('test.csv', 'w') as csvfile:\nwriter = csv.writer(csvfile, delimiter=',')\n\nwriter.writerow(['filename', 'pump_wavelength', 'input_pump_power', 'signal_wavelength', 'input_signal_power',\n                 'output_idler_wavelength', 'output_idler_power', 'delta_beta', 'gamma'])\nfor i in z:\n    ---------- some code to get values to be written --------------\n    writer.writerow([filename, pump_wavelength, input_pump_power, signal_wavelength, input_signal_power,\n                     output_idler_wavelength, output_idler_power, delta_beta, gamma])\n</code></pre>\n\n<p>gives the following output:</p>\n\n<pre><code>  filename,pump_wavelength,input_pump_power,signal_wavelength,input_signal_power,output_idler_wavelength,output_idler_power,delta_beta,gamma\n  5.SPE,1555.503,6.654,1554.507,0.054,1554.9618225,-62.3483855665,-6.55390005475,\"(1.4790380500687297, -6.5539000547525852, 0.00015485724131853652)\"\n  6.SPE,1555.503,6.654,1554.507,0.054,1555.09420064,-62.0169964106,-6.55390005475,\"(1.5365574572884448, -6.5539000547525852, 0.00015485724131853652)\"\n</code></pre>\n\n<p>why are there \"( and )\" around the last three values in each row written in csv file? I am using python 3.</p>\n"}, {"tags": ["python", "windows", "macos", "logging"], "comments": [{"owner": {"reputation": 9701, "user_id": 5165332, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/93c5b8f16dce739cd7e4336034e1f76c?s=128&d=identicon&r=PG&f=1", "display_name": "Eugene Lisitsky", "link": "https://stackoverflow.com/users/5165332/eugene-lisitsky"}, "edited": false, "score": 1, "creation_date": 1458472849, "post_id": 36046004, "comment_id": 59866999, "body": "Could you show other variables and  especially <code>constants</code>? Looks like <code>constants.log_dir</code> contains backslashes `\\` so it is misinterpreted on Mac."}, {"owner": {"reputation": 18736, "user_id": 308827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/28f523030f3ecd9c9f2ad23ca745cc65?s=128&d=identicon&r=PG", "display_name": "user308827", "link": "https://stackoverflow.com/users/308827/user308827"}, "reply_to_user": {"reputation": 9701, "user_id": 5165332, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/93c5b8f16dce739cd7e4336034e1f76c?s=128&d=identicon&r=PG&f=1", "display_name": "Eugene Lisitsky", "link": "https://stackoverflow.com/users/5165332/eugene-lisitsky"}, "edited": false, "score": 0, "creation_date": 1458484437, "post_id": 36046004, "comment_id": 59870609, "body": "thanks @EugeneLisitsky, <code>constants.log_dir</code> looks like this: <code>&#39;&#47;Users&#47;ri&#47;Documents&#47;Projects&#47;&#47;GL&#47;Output&#47;&#47;GL&#47;&#47;Logs&#39;</code>"}, {"owner": {"reputation": 9701, "user_id": 5165332, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/93c5b8f16dce739cd7e4336034e1f76c?s=128&d=identicon&r=PG&f=1", "display_name": "Eugene Lisitsky", "link": "https://stackoverflow.com/users/5165332/eugene-lisitsky"}, "edited": false, "score": 2, "creation_date": 1458487219, "post_id": 36046004, "comment_id": 59871656, "body": "Ok. I&#39;ve tried you code, and it logged for me well, except what screen logs are without date severity and other info. Could you check maybe somewhere above sys.stdout or sys.stderr are redirected to /dev/null or another place?"}], "answers": [{"comments": [{"owner": {"reputation": 797, "user_id": 888862, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rkdH5.png?s=128&g=1", "display_name": "xavier", "link": "https://stackoverflow.com/users/888862/xavier"}, "edited": false, "score": 0, "creation_date": 1459016435, "post_id": 36235865, "comment_id": 60108266, "body": "&quot;I don&#39;t know why, but here are 3 versions of some new code I wrote that seem to work&quot; is a pretty poor answer IMO"}, {"owner": {"reputation": 38204, "user_id": 346478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0a60a250d33ebf1c57ca7e603e21311?s=128&d=identicon&r=PG", "display_name": "Jan Vlcinsky", "link": "https://stackoverflow.com/users/346478/jan-vlcinsky"}, "reply_to_user": {"reputation": 797, "user_id": 888862, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rkdH5.png?s=128&g=1", "display_name": "xavier", "link": "https://stackoverflow.com/users/888862/xavier"}, "edited": false, "score": 0, "creation_date": 1459018153, "post_id": 36235865, "comment_id": 60108883, "body": "@xavier You have probably misunderstood my final note - it is about my feelings about <code>logging</code>, not about admitting that my code works, but I do not know why. All the samples above are working examples (install <code>logbook</code> package and then you may try all of them) and I can explain you any line if you need. But please, read and test it first before sending your next reaction."}, {"owner": {"reputation": 797, "user_id": 888862, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rkdH5.png?s=128&g=1", "display_name": "xavier", "link": "https://stackoverflow.com/users/888862/xavier"}, "edited": false, "score": 0, "creation_date": 1459020512, "post_id": 36235865, "comment_id": 60109816, "body": "That&#39;s not what I meant.  The question is about &quot;why doesn&#39;t my code work on OSX&quot;.  Your answer is &quot;I don&#39;t know why, maybe there is some other code causing the problem.&quot;  That should have been left as a comment, instead of going off into tangents about logging vs. logbook."}, {"owner": {"reputation": 38204, "user_id": 346478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0a60a250d33ebf1c57ca7e603e21311?s=128&d=identicon&r=PG", "display_name": "Jan Vlcinsky", "link": "https://stackoverflow.com/users/346478/jan-vlcinsky"}, "reply_to_user": {"reputation": 797, "user_id": 888862, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rkdH5.png?s=128&g=1", "display_name": "xavier", "link": "https://stackoverflow.com/users/888862/xavier"}, "edited": false, "score": 1, "creation_date": 1459027288, "post_id": 36235865, "comment_id": 60112281, "body": "@xavier I got it. You are right, I did not detect exact cause why it did not work on OSX. It would be difficult to force the author providing complete running example. My guess is that the real source of the problem are difficulties to use <code>logging</code> library in a simple way - what often results in messy code where nobody understands, what is going on. That is why I used an answer trying to provide cleaner code which shall work. This is the best what I could do (as I am on Linux and do not have access to OSX)."}], "tags": [], "owner": {"reputation": 38204, "user_id": 346478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0a60a250d33ebf1c57ca7e603e21311?s=128&d=identicon&r=PG", "display_name": "Jan Vlcinsky", "link": "https://stackoverflow.com/users/346478/jan-vlcinsky"}, "is_accepted": true, "score": 2, "last_activity_date": 1459006080, "last_edit_date": 1459006080, "creation_date": 1458998947, "answer_id": 36235865, "question_id": 36046004, "link": "https://stackoverflow.com/questions/36046004/python-logging-working-on-windows-but-not-mac-os/36235865#36235865", "title": "Python logging working on Windows but not Mac OS", "body": "<p>From your question it is clear, you have no problem with creating logger name,\nlog file name and with logging to a file, so I will keep this part simplified to keep my code succinct.</p>\n\n<p>First thing: To me your solution seems correct as <code>logging.StreamHandler</code> shall\nsend output to <code>sys.stderr</code> by default. You might have some code around (not\nshown in your question), which is modifying <code>sys.stderr</code>, or you are running\nyour code on OSX in such a way, that output to stderr is not shown (but is\nreally output).</p>\n\n<h1>Solution with <code>logging</code></h1>\n\n<p>Put following code into <code>with_logging.py</code>:</p>\n\n<pre><code>import logging\nimport sys\n\nlogformat = \"%(asctime)s %(levelname)s %(module)s - %(funcName)s: %(message)s\"\ndatefmt = \"%m-%d %H:%M\"\n\nlogging.basicConfig(filename=\"app.log\", level=logging.INFO, filemode=\"w\",\n                    format=logformat, datefmt=datefmt)\n\nstream_handler = logging.StreamHandler(sys.stderr)\nstream_handler.setFormatter(logging.Formatter(fmt=logformat, datefmt=datefmt))\n\nlogger = logging.getLogger(\"app\")\nlogger.addHandler(stream_handler)\n\nlogger.info(\"information\")\nlogger.warning(\"warning\")\n\n\ndef fun():\n    logger.info(\" fun inf\")\n    logger.warning(\"fun warn\")\n\nif __name__ == \"__main__\":\n    fun()\n</code></pre>\n\n<p>Run it: <code>$ python with_logging.py</code> and you shall see expected log records (properly formatted)\nin log file <code>app.log</code> and on <code>stderr</code> too.</p>\n\n<p>Note, if you do not see it on <code>stderr</code>, something is hiding your stderr\noutput. To see something, change in <code>StreamHandler</code> the stream to <code>sys.stdout</code>.</p>\n\n<h1>Solution with <code>logbook</code></h1>\n\n<p><code>logbook</code> is python package providing alternative logging means. I am showing it here to show main\ndifference to stdlib <code>logging</code>: with <code>logbook</code> the use and configuration seems simpler to me.</p>\n\n<h2>Previous solution rewritten to <code>with_logbook.py</code></h2>\n\n<pre><code>import logbook\nimport sys\n\nlogformat = (\"{record.time:%m-%d %H:%M} {record.level_name} {record.module} - \"\n             \"{record.func_name}: {record.message}\")\nkwargs = {\"level\": logbook.INFO, \"format_string\": logformat, \"bubble\": True}\n\nlogbook.StreamHandler(sys.stderr, **kwargs).push_application()\nlogbook.FileHandler(\"app.log\", **kwargs).push_application()\n\nlogger = logbook.Logger(\"app\")\n\nlogger.info(\"information\")\nlogger.warning(\"warning\")\n\n\ndef fun():\n    logger.info(\" fun inf\")\n    logger.warning(\"fun warn\")\n\nif __name__ == \"__main__\":\n    fun()\n</code></pre>\n\n<p>The main difference is, that you do not have to attach handlers to loggers, your loggers simply emit\nsome log records.</p>\n\n<p>These records will be handled by handlers, if they are put in place. One method\nis to create a handler and call <code>push_application()</code> on it. This will put the\nhandler into stack of handlers in use.</p>\n\n<p>As before, we need two handlers, one for the file, another for stderr.</p>\n\n<p>If you run this script <code>$ python with_logbook.py</code>, you shall see exactly the same results as\nwith logging.</p>\n\n<h2>Separate logging setup from module code: <code>short_logbook.py</code></h2>\n\n<p>With stdlib <code>logging</code> I reall do not like the introductory dances to make the logger work. I want\nsimply emit some log records and want to do that as simply as possible.</p>\n\n<p>Following example is modification of previous one. Instead of setting up\nlogging on very beginning of the module, I do it just before the code is run\n- inside the <code>if __name__ == \"__main__\"</code> (you may do the same on any other\nplace).</p>\n\n<p>For practical reasons, I separated the module and calling code to two files:</p>\n\n<p>File <code>funmodule.py</code></p>\n\n<pre><code>from logbook import Logger\n\nlog = Logger(__name__)\n\nlog.info(\"information\")\nlog.warning(\"warning\")\n\n\ndef fun():\n    log.info(\" fun inf\")\n    log.warning(\"fun warn\")\n</code></pre>\n\n<p>You can notice, that there are really only two lines of code related to making\nlogging available.</p>\n\n<p>Then, create the calling code, put into <code>short_logbook.py</code>:</p>\n\n<pre><code>import sys\nimport logbook\n\nif __name__ == \"__main__\":\n    logformat = (\"{record.time:%m-%d %H:%M} {record.level_name} {record.module}\"\n                 \"- {record.func_name}: {record.message}\")\n    kwargs = {\"level\": logbook.INFO, \"format_string\": logformat, \"bubble\": True}\n\n    logbook.StreamHandler(sys.stderr, **kwargs).push_application()\n    logbook.FileHandler(\"app.log\", **kwargs).push_application()\n\n    from funmodule import fun\n    fun()\n</code></pre>\n\n<p>Running the code you will see it working the same way as before, only logger name will be <code>funmodule</code>.</p>\n\n<p>Note, that I did the <code>from funmodule import fun</code> after the logging was set up. If I did it on the\ntop if the <code>short_logbook.py</code> file, the first two log records from <code>funmodule.py</code> would not be seen\nas they happen during module import.</p>\n\n<p><strong>EDIT: added another <code>logging</code> solution to have fair comparison</strong></p>\n\n<h1>One more stdlib <code>logging</code> solution</h1>\n\n<p>Trying to have fair comparison of <code>logbook</code> and <code>logging</code> I rewrote final <code>logbook</code> example to\n<code>logging</code>.</p>\n\n<p><code>funmodule_logging.py</code> looks like:</p>\n\n<pre><code>import logging\n\nlog = logging.getLogger(__name__)\n\nlog.info(\"information\")\nlog.warning(\"warning\")\n\n\ndef fun():\n    log.info(\" fun inf\")\n    log.warning(\"fun warn\")\n    log.error(\"no fun at all\")\n</code></pre>\n\n<p>and <code>short_logging.py</code> looks as follows:</p>\n\n<pre><code>import sys\nimport logging\n\nif __name__ == \"__main__\":\n    logformat = \"%(asctime)s %(levelname)s %(module)s - %(funcName)s: %(message)s\"\n    datefmt = \"%m-%d %H:%M\"\n\n    logging.basicConfig(filename=\"app.log\", level=logging.INFO, filemode=\"w\",\n                        format=logformat, datefmt=datefmt)\n\n    stream_handler = logging.StreamHandler(sys.stderr)\n    stream_handler.setFormatter(logging.Formatter(fmt=logformat, datefmt=datefmt))\n\n    logger = logging.getLogger(\"funmodule_logging\")\n    logger.addHandler(stream_handler)\n\n    from funmodule_logging import fun\n    fun()\n</code></pre>\n\n<p>Functionality is very similar.</p>\n\n<p>I still strugle with logging. stdlib <code>logging</code> is not easy to grasp, but it is in stdlib and offers\nsome nice things like <code>logging.config.dictConfig</code> allowing to configure logging by a dictionary.\n<code>logbook</code> was much simpler to start with, but is a bit slower at the moment and lacks the\ndictConfig. Anyway, these differences are not relevant to your question.</p>\n"}], "owner": {"reputation": 18736, "user_id": 308827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/28f523030f3ecd9c9f2ad23ca745cc65?s=128&d=identicon&r=PG", "display_name": "user308827", "link": "https://stackoverflow.com/users/308827/user308827"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2836, "favorite_count": 1, "accepted_answer_id": 36235865, "answer_count": 1, "score": 8, "last_activity_date": 1459016503, "creation_date": 1458159123, "last_edit_date": 1458787884, "question_id": 36046004, "link": "https://stackoverflow.com/questions/36046004/python-logging-working-on-windows-but-not-mac-os", "title": "Python logging working on Windows but not Mac OS", "body": "<pre><code># Logging\ncur_flname = os.path.splitext(os.path.basename(__file__))[0]\nLOG_FILENAME = constants.log_dir + os.sep + 'Log_' + cur_flname + '.txt'\nutil.make_dir_if_missing(constants.log_dir)\nlogging.basicConfig(filename=LOG_FILENAME, level=logging.INFO, filemode='w',\n                    format='%(asctime)s %(levelname)s %(module)s - %(funcName)s: %(message)s',\n                    datefmt=\"%m-%d %H:%M\")  # Logging levels are DEBUG, INFO, WARNING, ERROR, and CRITICAL\n# Output to screen\nlogger = logging.getLogger(cur_flname)\nlogger.addHandler(logging.StreamHandler())\n</code></pre>\n\n<p>I use the code above to create a <code>logger</code> that I can use in my module to print messages to screen as well simultaneously to a text file.</p>\n\n<p>On Windows, the messages get output to both file and screen. However, on Mac OS X 10.9.5, they only get output to file. I am using Python 2.7.</p>\n\n<p>Any ideas on how to fix this?</p>\n"}, {"tags": ["python", "python-2.7", "python-3.x", "pygame", "mp3"], "comments": [{"owner": {"reputation": 9701, "user_id": 5165332, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/93c5b8f16dce739cd7e4336034e1f76c?s=128&d=identicon&r=PG&f=1", "display_name": "Eugene Lisitsky", "link": "https://stackoverflow.com/users/5165332/eugene-lisitsky"}, "edited": false, "score": 1, "creation_date": 1458160358, "post_id": 36045973, "comment_id": 59741241, "body": "Enable debug. What output do you get?"}, {"owner": {"reputation": 31, "user_id": 6073503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1b5e126e7442deca3f5a32f362d0b8b?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/6073503/peter"}, "reply_to_user": {"reputation": 9701, "user_id": 5165332, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/93c5b8f16dce739cd7e4336034e1f76c?s=128&d=identicon&r=PG&f=1", "display_name": "Eugene Lisitsky", "link": "https://stackoverflow.com/users/5165332/eugene-lisitsky"}, "edited": false, "score": 0, "creation_date": 1458172365, "post_id": 36045973, "comment_id": 59746696, "body": "After third Read:  Traceback (most recent call last):   File &quot;D:\\Programy\\Python 3.4.0\\lib\\tkinter_<i>init_</i>.py&quot;, line 1482, in <b>call</b>     return self.func(*args)   File &quot;C:\\Users\\Piotrek\\Desktop\\Python_Emotiv\\StnezatorEnglish.py&quot;&zwnj;&#8203;, line 13, in read     tts.save(soundfile)   File &quot;D:\\Programy\\Python 3.4.0\\lib\\site-packages\\gtts-1.1.4-py3.4.egg\\gtts\\tts.py&quot;, line 93, in save     with open(savefile, &#39;wb&#39;) as f: PermissionError: [Errno 13] Permission denied: &#39;D:/01_Pulpit/syntezator.mp3&#39;"}, {"owner": {"reputation": 31, "user_id": 6073503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1b5e126e7442deca3f5a32f362d0b8b?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/6073503/peter"}, "reply_to_user": {"reputation": 9701, "user_id": 5165332, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/93c5b8f16dce739cd7e4336034e1f76c?s=128&d=identicon&r=PG&f=1", "display_name": "Eugene Lisitsky", "link": "https://stackoverflow.com/users/5165332/eugene-lisitsky"}, "edited": false, "score": 0, "creation_date": 1458172477, "post_id": 36045973, "comment_id": 59746738, "body": "I have the same problem like @user45193: <a href=\"http://stackoverflow.com/questions/31809050/how-to-free-resource-in-pygame-mixer\">link</a>"}], "answers": [{"tags": [], "owner": {"reputation": 159, "user_id": 7702145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa07b63fc94573f41c58fb95bcb95546?s=128&d=identicon&r=PG&f=1", "display_name": "Sunny", "link": "https://stackoverflow.com/users/7702145/sunny"}, "is_accepted": false, "score": 6, "last_activity_date": 1489606192, "creation_date": 1489606192, "answer_id": 42819022, "question_id": 36045973, "link": "https://stackoverflow.com/questions/36045973/permissionerror-errno-13-permission-denied-file-mp3/42819022#42819022", "title": "PermissionError: [Errno 13] Permission denied: &#39;file.mp3&#39;", "body": "<pre><code>from gtts import gTTS\nimport playsound\nimport os\n\nx = ['sunny', 'sagar', 'akhil']\ntts = 'tts'\nfor i in range(0,3):\n    tts = gTTS(text= x[i], lang = 'en')\n    file1 = str(\"hello\" + str(i) + \".mp3\")\n    tts.save(file1)\n    playsound.playsound(file1,True)\n    os.remove(file1)\n</code></pre>\n\n<p>rename the file for every new save, that worked for me.</p>\n"}], "owner": {"reputation": 31, "user_id": 6073503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1b5e126e7442deca3f5a32f362d0b8b?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/6073503/peter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3848, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1489606192, "creation_date": 1458159029, "question_id": 36045973, "link": "https://stackoverflow.com/questions/36045973/permissionerror-errno-13-permission-denied-file-mp3", "title": "PermissionError: [Errno 13] Permission denied: &#39;file.mp3&#39;", "body": "<p>The program runs only twice. Later, the error occurs. I don't know why it works twice and then stops.</p>\n\n<pre><code>import tkinter, sys, pygame\nfrom tkinter import messagebox\nfrom gtts import gTTS\n\nsoundfile=\"file.mp3\"\n\ndef ex():\n    sys.exit()\n</code></pre>\n\n<p>The main problem is there:</p>\n\n<pre><code>def read():\n    t = e.get()\n    tts = gTTS(text=t, lang=\"en\")\n    tts.save(soundfile)\n    pygame.mixer.init(frequency=16000, size=-16, channels=2, buffer=4096)\n    pygame.mixer.music.load(soundfile)\n    pygame.mixer.music.set_volume(1.0)\n    pygame.mixer.music.play(0,0.0)\n    while pygame.mixer.music.get_busy()==True:\n        continue\n    pygame.quit()\n</code></pre>\n\n<p>Next is the code for the buttons.</p>\n\n<pre><code>def clear():\n    e.delete(0, 'end')\n\nmain = tkinter.Tk()\n\ne = tkinter.Entry(main, justify = \"center\")\nl = tkinter.Label(main, text = \"Write text\")\nb1 = tkinter.Button(main, text = \"Read\", command = read)\nb2 = tkinter.Button(main, text = \"Clear\", command = clear)\nb3 = tkinter.Button(main, text = \"Exit\", command = ex)\n</code></pre>\n\n<p>So, I don't have any idea to fix it.</p>\n"}, {"tags": ["python", "regression", "pymc", "pymc3"], "comments": [{"owner": {"reputation": 1244, "user_id": 1690016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2b93ae7cf08941a0e65f3216e74bd87?s=128&d=identicon&r=PG", "display_name": "inversion", "link": "https://stackoverflow.com/users/1690016/inversion"}, "edited": false, "score": 0, "creation_date": 1458262538, "post_id": 36045851, "comment_id": 59794535, "body": "If you set sigma to a small, fixed number (e.g., 0.01), you&#39;ll get results that are reasonable. I don&#39;t actually understand <i>why</i> the code isn&#39;t able to determine this on its own."}, {"owner": {"reputation": 1244, "user_id": 1690016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2b93ae7cf08941a0e65f3216e74bd87?s=128&d=identicon&r=PG", "display_name": "inversion", "link": "https://stackoverflow.com/users/1690016/inversion"}, "edited": false, "score": 0, "creation_date": 1458263893, "post_id": 36045851, "comment_id": 59794895, "body": "This is what I get with setting sigma=0.01. <a href=\"http://imgur.com/2Q6TsNJ\" rel=\"nofollow noreferrer\">imgur.com/2Q6TsNJ</a>"}, {"owner": {"reputation": 558, "user_id": 1344028, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aa21e8c31e20821c1c8c18c82cb6be27?s=128&d=identicon&r=PG", "display_name": "Andrey Chetverikov", "link": "https://stackoverflow.com/users/1344028/andrey-chetverikov"}, "reply_to_user": {"reputation": 1244, "user_id": 1690016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2b93ae7cf08941a0e65f3216e74bd87?s=128&d=identicon&r=PG", "display_name": "inversion", "link": "https://stackoverflow.com/users/1690016/inversion"}, "edited": false, "score": 0, "creation_date": 1458482871, "post_id": 36045851, "comment_id": 59870084, "body": "Thanks! That helps. But in the end I switched to discrete breaking point with Metropolis sampling, that also greatly increases the speed and accuracy."}, {"owner": {"reputation": 4645, "user_id": 1297830, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8rH9k.jpg?s=128&g=1", "display_name": "Jonas Lindel&#248;v", "link": "https://stackoverflow.com/users/1297830/jonas-lindel%c3%b8v"}, "edited": false, "score": 1, "creation_date": 1578647823, "post_id": 36045851, "comment_id": 105514772, "body": "If you are open to an R solution, this can be modeled in the <code>mcp</code> package using <code>fit = mcp(list(y ~ 1, ~ 1 + x), data)</code>. Plot the posteriors and traces with <code>plot_pars(fit)</code>."}, {"owner": {"reputation": 558, "user_id": 1344028, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aa21e8c31e20821c1c8c18c82cb6be27?s=128&d=identicon&r=PG", "display_name": "Andrey Chetverikov", "link": "https://stackoverflow.com/users/1344028/andrey-chetverikov"}, "reply_to_user": {"reputation": 4645, "user_id": 1297830, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8rH9k.jpg?s=128&g=1", "display_name": "Jonas Lindel&#248;v", "link": "https://stackoverflow.com/users/1297830/jonas-lindel%c3%b8v"}, "edited": false, "score": 0, "creation_date": 1578738917, "post_id": 36045851, "comment_id": 105542568, "body": "@JonasLindel&#248;v, thanks, I don&#39;t really need it anymore but it&#39;s good to know about the R solution"}], "answers": [{"comments": [{"owner": {"reputation": 1326, "user_id": 445023, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/RsFNp.jpg?s=128&g=1", "display_name": "carlosayam", "link": "https://stackoverflow.com/users/445023/carlosayam"}, "edited": false, "score": 2, "creation_date": 1526927910, "post_id": 36114952, "comment_id": 87922902, "body": "From memory, NUTS assumes continuity (and differentiability?) of likelihood function: a breakpoint introduces a discontinuity and hence Metropolis works but NUTS does not."}, {"owner": {"reputation": 730, "user_id": 6534818, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5a7126d1ea44dd58b527f599f1a20043?s=128&d=identicon&r=PG&f=1", "display_name": "John Stud", "link": "https://stackoverflow.com/users/6534818/john-stud"}, "edited": false, "score": 0, "creation_date": 1614724108, "post_id": 36114952, "comment_id": 117471742, "body": "Thanks for posting and following-up on this. I am wondering if you can update this to see how you can post the results with the latest build of pymc3 and <code>az.plot_trace</code> and <code>return_inferencedata=True</code>"}], "tags": [], "owner": {"reputation": 558, "user_id": 1344028, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aa21e8c31e20821c1c8c18c82cb6be27?s=128&d=identicon&r=PG", "display_name": "Andrey Chetverikov", "link": "https://stackoverflow.com/users/1344028/andrey-chetverikov"}, "is_accepted": true, "score": 10, "last_activity_date": 1458484101, "creation_date": 1458484101, "answer_id": 36114952, "question_id": 36045851, "link": "https://stackoverflow.com/questions/36045851/pymc3-regression-with-change-point/36114952#36114952", "title": "PyMC3 regression with change point", "body": "<p>In the end it seems that switching to discrete breaking point with Metropolis sampling resolves the issue. Here's the final model:</p>\n\n<pre><code>with Model() as sw_model:\n\n    sigma = HalfCauchy('sigma', beta=10, testval=1.)\n\n    switchpoint = DiscreteUniform('switchpoint', lower=0, upper=90, testval=45)\n\n    # Priors for pre- and post-switch intercepts and slopes\n    intercept_u1 = Uniform('Intercept_u1', lower=-10, upper=10, testval = 0)\n    intercept_u2 = Uniform('Intercept_u2', lower=-10, upper=10, testval = 0)\n    x_coeff_u1 = Normal('x_u1', 0, sd=20)\n    x_coeff_u2 = Normal('x_u2', 0, sd=20)\n\n    intercept = switch(switchpoint &lt; x, intercept_u1, intercept_u2)\n    x_coeff = switch(switchpoint &lt; x, x_coeff_u1, x_coeff_u2)\n\n    likelihood = Normal('y', mu=intercept + x_coeff * x, sd=sigma, observed=y)\n\n    start = find_MAP() \n\n    step1 = NUTS([intercept_u1, intercept_u2, x_coeff_u1, x_coeff_u2])\n    step2 = Metropolis([switchpoint])\n\n    trace = sample(20000, step=[step1, step2], start=start, njobs=4,progressbar=True)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/yDvX9.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/yDvX9.png\" alt=\"the traceplot\"></a></p>\n"}], "owner": {"reputation": 558, "user_id": 1344028, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aa21e8c31e20821c1c8c18c82cb6be27?s=128&d=identicon&r=PG", "display_name": "Andrey Chetverikov", "link": "https://stackoverflow.com/users/1344028/andrey-chetverikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1524, "favorite_count": 6, "accepted_answer_id": 36114952, "answer_count": 1, "score": 4, "last_activity_date": 1458484101, "creation_date": 1458158603, "last_edit_date": 1458239231, "question_id": 36045851, "link": "https://stackoverflow.com/questions/36045851/pymc3-regression-with-change-point", "title": "PyMC3 regression with change point", "body": "<p>I saw the examples of how to do change point analysis with pymc3, but it seems that I'm missing something because the results I get are far from true values. Here's a toy example.</p>\n\n<p>Data:</p>\n\n<p><a href=\"https://i.stack.imgur.com/4Mn7Y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4Mn7Y.png\" alt=\"toy data\"></a></p>\n\n<p>Script:</p>\n\n<pre><code>from pymc3 import *\nfrom numpy.random import uniform, normal\n\nbp_u = 30 #switch point\nc_u = [1, -1] #intercepts before and after switch point\nbeta_u = [0, -0.02]  #slopes before &amp; after switch point\n\nx = uniform(0,90, 200)\n\ny = (x &lt; bp_u)*(c_u[0]+beta_u[0]*x) + (x &gt;= bp_u)*(c_u[1]+beta_u[1]*x) + normal(0,0.1,200)\n\nwith Model() as sw_model:\n\n    sigma = HalfCauchy('sigma', beta=10, testval=1.)\n\n    switchpoint = Uniform('switchpoint', lower=x.min(), upper=x.max(), testval=45)\n\n    # Priors for pre- and post-switch intercepts and slopes\n    intercept_u1 = Uniform('Intercept_u1', lower=-10, upper=10)\n    intercept_u2 = Uniform('Intercept_u2', lower=-10, upper=10)\n    x_coeff_u1 = Normal('x_u1', 0, sd=20)\n    x_coeff_u2 = Normal('x_u2', 0, sd=20)\n\n    intercept = switch(switchpoint &lt; x, intercept_u1, intercept_u2)\n    x_coeff = switch(switchpoint &lt; x, x_coeff_u1, x_coeff_u2)\n\n    likelihood = Normal('y', mu=intercept + x_coeff * x, sd=sigma, observed=y)\n\n    start = find_MAP() \n\nwith sw_model:\n    step1 = NUTS([intercept_u1, intercept_u2, x_coeff_u1, x_coeff_u2])\n    step2 = NUTS([switchpoint])\n\n    trace = sample(2000, step=[step1, step2], start=start, progressbar=True)\n</code></pre>\n\n<p>And here are the results:</p>\n\n<p><a href=\"https://i.stack.imgur.com/7aRJT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7aRJT.png\" alt=\"segmented regression results\"></a></p>\n\n<p>As you can see, they are quite different from the initial values. What did I do wrong?</p>\n"}, {"tags": ["python", "windows", "ninja"], "comments": [{"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1458158741, "post_id": 36045838, "comment_id": 59740279, "body": "you say you already have <code>C:\\python27\\ </code> on the path, but it is very clearly not on <code>sys.path</code>, what is <code>sys.path</code> when you run python from python.org?"}, {"owner": {"reputation": 11, "user_id": 5674932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc8237ba2c0b727ba29358c9292e3e7e?s=128&d=identicon&r=PG", "display_name": "Mario", "link": "https://stackoverflow.com/users/5674932/mario"}, "reply_to_user": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1458221548, "post_id": 36045838, "comment_id": 59770659, "body": "I didn&#39;t know they are different. from python on windows.  &gt;&gt;&gt; import sys &gt;&gt;&gt; sys.path [&#39;&#39;, &#39;C:\\\\Python27\\\\Lib\\\\idlelib&#39;, &#39;C:\\\\Python27&#39;, &#39;C:\\\\Python27\\\\Lib&#39;, &#39;C:\\\\Python27\\\\python27.zip&#39;, &#39;C:\\\\Python27\\\\DLLs&#39;, &#39;C:\\\\Python27\\\\lib\\\\plat-win&#39;, &#39;C:\\\\Python27\\\\lib\\\\lib-tk&#39;, &#39;C:\\\\Python27\\\\lib\\\\site-packages&#39;]  How to change sys.path?"}, {"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1458267571, "post_id": 36045838, "comment_id": 59795842, "body": "<a href=\"https://docs.python.org/2/tutorial/modules.html#standard-modules\" rel=\"nofollow noreferrer\">You can modify it using standard list operations:</a>  <code>import sys ; sys.path.append(&#39;&#47;ufs&#47;guido&#47;lib&#47;python&#39;)</code>"}, {"owner": {"reputation": 11, "user_id": 5674932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc8237ba2c0b727ba29358c9292e3e7e?s=128&d=identicon&r=PG", "display_name": "Mario", "link": "https://stackoverflow.com/users/5674932/mario"}, "reply_to_user": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 1, "creation_date": 1459179884, "post_id": 36045838, "comment_id": 60159195, "body": "Hi,Im looking for a way to have the path for every project and not have to do it every time I start a new project"}], "owner": {"reputation": 11, "user_id": 5674932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc8237ba2c0b727ba29358c9292e3e7e?s=128&d=identicon&r=PG", "display_name": "Mario", "link": "https://stackoverflow.com/users/5674932/mario"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 606, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1458158523, "creation_date": 1458158523, "last_edit_date": 1495540370, "question_id": 36045838, "link": "https://stackoverflow.com/questions/36045838/how-to-change-path-in-ninja-ide-for-windows", "title": "How to change path in Ninja IDE for windows?", "body": "<p>Im a newbie to python and starting to learn Ninja IDE seemed good. but when trying to import \"telnetlib\" module from within the NINJA I get error:</p>\n\n<pre><code>&gt;&gt;&gt; import telnetlib\nTraceback (most recent call last):\n  File \"&lt;console&gt;\", line 1, in &lt;module&gt;\nImportError: No module named telnetlib\n&gt;&gt;&gt; \n</code></pre>\n\n<p>I successfully import modules like \"sys\" and \"time\".</p>\n\n<p>Results of sys.path:</p>\n\n<pre><code>&gt;&gt;&gt; sys.path\n['C:\\\\Program Files (x86)\\\\Ninja\\\\Ninja.exe']\n&gt;&gt;&gt; \n</code></pre>\n\n<p>I already have C:\\python27\\ folders in path and also created a system environment variable called PYTHONPATH as mentioned here:\n<a href=\"https://stackoverflow.com/questions/3701646/how-to-add-to-the-pythonpath-in-windows-7\">How to add to the pythonpath in windows 7?</a></p>\n\n<p>It Works fine when using python for windows (from python.org).</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "json", "jsonschema"], "comments": [{"owner": {"reputation": 2892, "user_id": 3991164, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/ciXQ9.jpg?s=128&g=1", "display_name": "flaschbier", "link": "https://stackoverflow.com/users/3991164/flaschbier"}, "edited": false, "score": 0, "creation_date": 1458162797, "post_id": 36045833, "comment_id": 59742666, "body": "Try <code>&quot;^-1|[\\\\d]+$&quot;</code> for the <code>pattern</code>. Groups do not make sense here and you do not want to match <code>-11</code>."}, {"owner": {"reputation": 1122, "user_id": 114494, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/CEycj.jpg?s=128&g=1", "display_name": "Rhinosaurus", "link": "https://stackoverflow.com/users/114494/rhinosaurus"}, "reply_to_user": {"reputation": 2892, "user_id": 3991164, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/ciXQ9.jpg?s=128&g=1", "display_name": "flaschbier", "link": "https://stackoverflow.com/users/3991164/flaschbier"}, "edited": false, "score": 0, "creation_date": 1458165909, "post_id": 36045833, "comment_id": 59744176, "body": "oh yeah, thanks @flaschbier."}], "answers": [{"comments": [{"owner": {"reputation": 1122, "user_id": 114494, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/CEycj.jpg?s=128&g=1", "display_name": "Rhinosaurus", "link": "https://stackoverflow.com/users/114494/rhinosaurus"}, "edited": false, "score": 0, "creation_date": 1458168935, "post_id": 36048470, "comment_id": 59745468, "body": "Yeah... integers as strings wouldn&#39;t have been my first choice. Thanks for the suggestion. I&#39;ll give it a try."}], "tags": [], "owner": {"reputation": 14922, "user_id": 1320693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/387effdc9ab501aa1a2c36992208435d?s=128&d=identicon&r=PG", "display_name": "Jason Desrosiers", "link": "https://stackoverflow.com/users/1320693/jason-desrosiers"}, "is_accepted": true, "score": 1, "last_activity_date": 1458168665, "creation_date": 1458168665, "answer_id": 36048470, "question_id": 36045833, "link": "https://stackoverflow.com/questions/36045833/is-there-a-way-to-use-json-schemas-to-enforce-values-between-fields/36048470#36048470", "title": "Is there a way to use JSON schemas to enforce values between fields?", "body": "<p>You can achieve the desired behavior by adding the following to your <code>items</code> schema.  It asserts that the schema must conform to at least one of the schemas in the list.  Either both are \"-1\" or both are positive integers. (I assume you have good reason for representing integers as strings.)</p>\n\n<pre><code>\"anyOf\": [\n    {\n        \"properties\": {\n            \"question_id\": { \"enum\": [\"-1\"] },\n            \"question_set_id\": { \"enum\": [\"-1\"] }\n        }\n    },\n    {\n        \"properties\": {\n            \"question_id\": {\n                \"type\": \"string\",\n                \"pattern\": \"^\\\\d+$\"\n            },\n            \"question_set_id\": {\n                \"type\": \"string\",\n                \"pattern\": \"^\\\\d+$\"\n            }\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 1122, "user_id": 114494, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/CEycj.jpg?s=128&g=1", "display_name": "Rhinosaurus", "link": "https://stackoverflow.com/users/114494/rhinosaurus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 0, "accepted_answer_id": 36048470, "answer_count": 1, "score": 2, "last_activity_date": 1458168873, "creation_date": 1458158515, "last_edit_date": 1458168873, "question_id": 36045833, "link": "https://stackoverflow.com/questions/36045833/is-there-a-way-to-use-json-schemas-to-enforce-values-between-fields", "title": "Is there a way to use JSON schemas to enforce values between fields?", "body": "<p>I've recently started playing with <a href=\"http://json-schema.org/\" rel=\"nofollow\">JSON schemas</a> to start enforcing API payloads. I'm hitting a bit of a roadblock with defining the schema for a legacy API that has some pretty kludgy design logic which has resulted (along with poor documentation) in clients misusing the endpoint.</p>\n\n<p>Here's the schema so far:</p>\n\n<pre><code>{\n    \"type\": \"array\",\n    \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n            \"type\": {\n                \"type\": \"string\"\n            },\n            \"object_id\": {\n                \"type\": \"string\"\n            },\n            \"question_id\": {\n                \"type\": \"string\",\n                \"pattern\": \"^-1|\\\\d+$\"\n            },\n            \"question_set_id\": {\n                \"type\": \"string\",\n                \"pattern\": \"^-1|\\\\d+$\"\n            },\n            \"timestamp\": {\n                \"type\": \"string\",\n                \"format\": \"date-time\"\n            },\n            \"values\": {\n                \"type\": \"array\",\n                \"items\": {\n                    \"type\": \"string\"\n                }\n            }\n        },\n        \"required\": [\n            \"type\",\n            \"object_id\",\n            \"question_id\",\n            \"question_set_id\",\n            \"timestamp\",\n            \"values\"\n        ],\n        \"additionalProperties\": false\n    }\n}\n</code></pre>\n\n<p>Notice that for <strong>question_id</strong> and <strong>question_set_id</strong>, they both take a numeric string that can either be a -1 or some other non-negative integer. </p>\n\n<p>My question: is there a way to enforce that if <strong>question_id</strong> is set to -1, that <strong>question_set_id</strong> is also set to -1 and vice-versa.</p>\n\n<p>It would be awesome if I could have that be validated by the parser rather than having to do that check in application logic.</p>\n\n<hr>\n\n<p>Just for additional context, I've been using python's jsl module to generate this schema.</p>\n"}, {"tags": ["python", "gevent"], "owner": {"reputation": 9288, "user_id": 671943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4HS79.jpg?s=128&g=1", "display_name": "Rooster", "link": "https://stackoverflow.com/users/671943/rooster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1458158466, "creation_date": 1458158466, "question_id": 36045811, "link": "https://stackoverflow.com/questions/36045811/python-gevent-why-is-monkeys-patch-all-and-patch-thread-event-kwarg-default-to", "title": "python gevent, why is monkey&#39;s patch_all and patch_thread Event kwarg default to False (and what does this do)", "body": "<p>I can't find info about this in the docs, and I only thought to try setting it to <code>True</code> after looking at the source.  It seems setting this to <code>True</code> makes the <code>patch_thread</code> method which is called by <code>patch_all</code> execute this code eventually:</p>\n\n<pre><code>    if Event:\n        from gevent.event import Event\n        patch_item(threading, 'Event', Event)\n</code></pre>\n\n<p>This apparently patches the threading modules <code>Event</code> class with gevent's.</p>\n\n<p>This seems to have fixed my original problem I had been having up to this point with DummyThreads living in memory forever (which eventually eats up all the system memory).</p>\n\n<p>As I've been hitting my head off of this problem for a day now, I am super excited to just call setting <code>Event=True</code> on the patching method as the solution.  However, I feel there's probably a reason it was set to default to False.  </p>\n\n<p>Any one know what that reason might be?</p>\n\n<p>Using python 2.7\ngevent 1.1 (freshly minted!)</p>\n\n<p>Cheers</p>\n"}, {"tags": ["jquery", "python", "html"], "owner": {"reputation": 21, "user_id": 5982494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32d7315c6425e595e9ebcffc0d238aaa?s=128&d=identicon&r=PG&f=1", "display_name": "Elsa Turner", "link": "https://stackoverflow.com/users/5982494/elsa-turner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1458159419, "creation_date": 1458158310, "last_edit_date": 1458159419, "question_id": 36045768, "link": "https://stackoverflow.com/questions/36045768/how-to-set-date-upon-form-submission", "title": "How to set date upon form submission", "body": "<p>Problem: when I click on a date in the calendar, the date will set to the specified date. When I click outside of the date (anywhere else on the form) it will default back to today's date, and in the browser console I can see the HTML value being set to today's date. And upon submission of the form, the logs come back as the current date as well. </p>\n\n<p>How do I set up JS to set the date upon submission of the form and when clicking outside of the calendar?</p>\n\n<p>JS:</p>\n\n<pre><code>function set_date() {\n    var end_date = $('#nonRecurDateCalendar').val;\n    return end_date\n} \n</code></pre>\n\n<p>HTML:</p>\n\n<pre><code>&lt;td&gt;    \n    &lt;input type=\"date\" style=\"width:100px;\" name=\"payoff_date\" value=\"[DATE_REPLACE]\" id=\"nonRecurDateCalendar\" class=\"dateedit\" onChange=\"checkforerror()\"&gt;\n            &lt;script type=\"text/javascript\"&gt;\n                webcalendar_init(\"nonRecurDateCalendar\",\"[DATE_REPLACE]\");\n            &lt;/script&gt;\n            &lt;input type=\"button\" value=\"Calculate Payoff\" name=\"calc_payoff\" id=\"calc_payoff\" onclick=\"return checkForm();\"  [SUBMIT_DISABLE_REPLACE] /&gt;\n&lt;/td&gt;\n</code></pre>\n\n<p>Python:</p>\n\n<pre><code>#build min and max dates.\ntry:\n    days_offset = int(step_obj.p_data.path_config_data['days_offset'])\nexcept:\n    days_offset = 30\nstep_obj.p_data.max_date = (datetime.date.today()+datetime.timedelta(days=days_offset))\nstep_obj.p_data.max_date_str = step_obj.p_data.max_date.strftime('%Y-%m-%d')\n\nstep_obj.p_data.min_date = datetime.date.today()\nstep_obj.p_data.min_date_str = step_obj.p_data.min_date.strftime('%Y-%m-%d')\n\nif 'payoff_date' not in step_obj.p_data.validated_form_data:\n    step_obj.p_data.form_date = step_obj.p_data.min_date_str\n    step_obj.write_line([\"DEBUG PAYOFF Min DATE:\", step_obj.p_data.min_date_str])\nelse:\n    step_obj.p_data.form_date = step_obj.p_data.validated_form_data['payoff_date']\n    step_obj.write_line([\"DEBUG PAYOFF DATE:\",\n        step_obj.p_data.validated_form_data['payoff_date']])\n</code></pre>\n"}, {"tags": ["python", "django", "django-forms"], "comments": [{"owner": {"reputation": 1725, "user_id": 6002616, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ec599c1b49169915e42a443d2d24a82d?s=128&d=identicon&r=PG&f=1", "display_name": "Coeus", "link": "https://stackoverflow.com/users/6002616/coeus"}, "reply_to_user": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "edited": false, "score": 0, "creation_date": 1458158008, "post_id": 36045610, "comment_id": 59739846, "body": "[&lt;Comment: 1st_blog&gt;]........but did not save data.."}, {"owner": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "edited": false, "score": 0, "creation_date": 1458158098, "post_id": 36045610, "comment_id": 59739902, "body": "Then your form should have errors. What does <code>form.errors</code> say? <code>title</code> should be required, right?"}, {"owner": {"reputation": 1725, "user_id": 6002616, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ec599c1b49169915e42a443d2d24a82d?s=128&d=identicon&r=PG&f=1", "display_name": "Coeus", "link": "https://stackoverflow.com/users/6002616/coeus"}, "reply_to_user": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "edited": false, "score": 0, "creation_date": 1458158298, "post_id": 36045610, "comment_id": 59740039, "body": "The logic goes through form_is.valid block....but does not save form...So no errors is being displayed"}], "answers": [{"tags": [], "owner": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "is_accepted": true, "score": 2, "last_activity_date": 1458158426, "creation_date": 1458158426, "answer_id": 36045806, "question_id": 36045610, "link": "https://stackoverflow.com/questions/36045610/django-unable-to-saved-forms-in-database/36045806#36045806", "title": "django unable to saved forms in database", "body": "<p>I think the problem is that your form excludes <code>title</code> field, but it's required according to <code>Comment</code> definition. You need to give the <code>title</code> to comment instance then save it:</p>\n\n<pre><code>def detail(request, id):\n    posts = Post.objects.get(id=id)\n    comments = posts.comment_set.all()\n    forms = CommentForm\n    if request.method == 'POST':\n        form = CommentForm(request.POST,instance=posts)\n        print form\n        if form.is_valid():\n            # create a comment instance in memory first\n            comment = form.save(commit=False)\n            # fill out the title field\n            comment.title = posts\n            comment.save()\n        else:\n          print form.errors\n    else:\n        form = PostForm()\n\n    return render(request, \"detail_post.html\", {'forms':forms,'posts': posts,'comments':comments})\n</code></pre>\n\n<p>Also, I don't know why you use plural form for one instance, like <code>posts</code> should be <code>post</code> because you use <code>objects.get()</code>, make your code more readable would save some confusion for other people.</p>\n"}], "owner": {"reputation": 1725, "user_id": 6002616, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ec599c1b49169915e42a443d2d24a82d?s=128&d=identicon&r=PG&f=1", "display_name": "Coeus", "link": "https://stackoverflow.com/users/6002616/coeus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 591, "favorite_count": 1, "accepted_answer_id": 36045806, "answer_count": 1, "score": 4, "last_activity_date": 1458158624, "creation_date": 1458157723, "last_edit_date": 1458158624, "question_id": 36045610, "link": "https://stackoverflow.com/questions/36045610/django-unable-to-saved-forms-in-database", "title": "django unable to saved forms in database", "body": "<p>I'm learning django and I'm trying to <strong>save the form</strong> using POST method and found its working fine, I'M not able to see the saved message in database(<strong>form is not submitted</strong>)</p>\n\n<p>Models.py</p>\n\n<pre><code>class Post(models.Model):\n    title = models.CharField(max_length=200)\n    description = models.TextField(max_length=10000)\n    pub_date = models.DateTimeField(auto_now_add=True)\n    slug = models.SlugField(max_length=200, unique=True)\n\n    def __unicode__(self):\n        return self.title\n\n    def description_as_list(self):\n        return self.description.split('\\n')\n\nclass Comment(models.Model):\n    title = models.ForeignKey(Post)\n    comments = models.CharField(max_length=200)\n\n    def __unicode__(self):\n        return '%s' % (self.title)\n</code></pre>\n\n<p>Forms.py</p>\n\n<pre><code>class PostForm(forms.ModelForm):\n    class Meta:\n        model = Post\n        fields = ('title', 'description')\n\neditPostedForm = modelformset_factory(Post, PostForm)\n\nclass CommentForm(forms.ModelForm):\n    class Meta:\n        model = Comment\n        fields = ('comments',)\n        exclude = ('title',)\n</code></pre>\n\n<p>Views.py</p>\n\n<pre><code>def detail(request, id):\n    posts = Post.objects.get(id=id)\n    comments = posts.comment_set.all()\n    forms = CommentForm\n    if request.method == 'POST':\n        form = CommentForm(request.POST, instance=posts)\n        print form\n        if form.is_valid():\n            form.save(commit=False)\n            form.save()\n        else:\n          print form.errors\n    else:\n        form = PostForm()\n\n    return render(request, \"detail_post.html\", {'forms':forms,'posts': posts,'comments':comments})\n</code></pre>\n\n<p>Why is the post message is not being saved. I got status code 200 in console, also i get the entered data, but the form is not being saved...Any help is much appreciated</p>\n"}, {"tags": ["python", "class", "pickle"], "comments": [{"owner": {"reputation": 47, "user_id": 6073568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13e0ab4ca9b1bd1ae91afaeeed502f61?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Moskovitz", "link": "https://stackoverflow.com/users/6073568/christopher-moskovitz"}, "edited": false, "score": 0, "creation_date": 1458157651, "post_id": 36045570, "comment_id": 59739633, "body": "Car.append(pickle.load(CarFile)) CarFile.close() print(Car)"}, {"owner": {"reputation": 47, "user_id": 6073568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13e0ab4ca9b1bd1ae91afaeeed502f61?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Moskovitz", "link": "https://stackoverflow.com/users/6073568/christopher-moskovitz"}, "edited": false, "score": 0, "creation_date": 1458157667, "post_id": 36045570, "comment_id": 59739649, "body": "that goes under the while True:"}, {"owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "edited": false, "score": 1, "creation_date": 1458158473, "post_id": 36045570, "comment_id": 59740136, "body": "I don&#39;t think you&#39;re supposed to call <code>pickle.dump</code> multiple times on one file object. Try taking all of the objects you want to dump, and putting them in a single list. Then dump that list just once into the file."}, {"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1458159073, "post_id": 36045570, "comment_id": 59740463, "body": "They are already in a single list called <code>Car</code>, I think you just need to do <code>pickle.dump(Car,CarFile)</code> without any loops then <code>Car.extend(pickle.load(CarFile))</code> again without loops."}], "answers": [{"tags": [], "owner": {"reputation": 1416, "user_id": 3568491, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/L9O7f.jpg?s=128&g=1", "display_name": "Namit Singal", "link": "https://stackoverflow.com/users/3568491/namit-singal"}, "is_accepted": true, "score": 3, "last_activity_date": 1458159658, "last_edit_date": 1495541354, "creation_date": 1458159338, "answer_id": 36046057, "question_id": 36045570, "link": "https://stackoverflow.com/questions/36045570/this-reads-eoferror-ran-out-of-input/36046057#36046057", "title": "This reads EOFError: Ran out of input", "body": "<p>Try this code, the problem with your code is you are doing a while True, which is resulting in EOF, you need to either specify unpickling length, or handle for EOFError, as specified in the edit.</p>\n\n<pre><code>import pickle\n\nclass CarRecord:\n    def __init__(self):\n        self.VehicleID = \"\"\n        self.Registration = \"\"\n        self.DateOfRegistration = None\n        self.EngineSize = 0\n        self.PurchasePrice = 0.00\n\nThisCar = CarRecord()\nCar = [ThisCar for i in range(5)]\nCar[0].EngineSize = 2400\nCar[1].EngineSize = 2300\nCar[2].EngineSize = 2200\nCar[3].EngineSize = 2100\nCar[4].EngineSize = 2000\n\nCarFile = open('Cars.DAT', 'wb')\nfor i in range(0,5):\n    pickle.dump(Car[i], CarFile)\nprint(Car)\n\nCarFile.close()\nCarFile = open('Cars.DAT', 'rb')\nCar = []\n\nprint(\"here\")\n\nfor i in range(0,5):\n    Car.append(pickle.load(CarFile))\n\nCarFile.close()\nprint(Car)\n</code></pre>\n\n<p>EDIT:- I Found a better answer, which does not use hardcoded values. <a href=\"https://stackoverflow.com/questions/3871388/reading-from-a-file-using-pickle-and-for-loop-in-python\">Reading from a file using pickle and for loop in python</a></p>\n\n<p>I will post the answer here as well. Basically it catches EOFError and UnpicklingError so that, when file ends, it just closes, and you can use it normally as you want to</p>\n\n<pre><code>Car = []\nCarFile = open('Cars.DAT', 'rb')\nwhile 1:\n    try:\n        Car.append(pickle.load(CarFile))\n    except (EOFError, UnpicklingError):\n        break\nCarFile.close()\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 6073568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13e0ab4ca9b1bd1ae91afaeeed502f61?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Moskovitz", "link": "https://stackoverflow.com/users/6073568/christopher-moskovitz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4995, "favorite_count": 0, "accepted_answer_id": 36046057, "answer_count": 1, "score": 0, "last_activity_date": 1458159658, "creation_date": 1458157615, "last_edit_date": 1458158414, "question_id": 36045570, "link": "https://stackoverflow.com/questions/36045570/this-reads-eoferror-ran-out-of-input", "title": "This reads EOFError: Ran out of input", "body": "<p>This is a class I created</p>\n\n<pre><code>import pickle\n\nclass CarRecord:\n    def __init__(self):\n        self.VehicleID = \"\"\n        self.Registration = \"\"\n        self.DateOfRegistration = None\n        self.EngineSize = 0\n        self.PurchasePrice = 0.00\n\nThisCar = CarRecord()\nCar = [ThisCar for i in range(5)]\nCar[0].EngineSize = 2400\nCar[1].EngineSize = 2300\nCar[2].EngineSize = 2200\nCar[3].EngineSize = 2100\nCar[4].EngineSize = 2000\n</code></pre>\n\n<p>I want to write these records to the binary file</p>\n\n<pre><code>CarFile = open('Cars.DAT', 'wb')\nfor i in range(5):\n   pickle.dump(Car[i], CarFile)\nprint(Car)\n\nCarFile.close()\nCarFile = open('Cars.DAT', 'rb')\nCar = []\n\nprint(\"\u00a3\u00a3\u00a3\u00a3\u00a3\u00a3\u00a3\u00a3\")\n</code></pre>\n\n<p>and append the record to he end of the list</p>\n\n<pre><code>while True:\n</code></pre>\n\n<p>and here I check for the end of file</p>\n\n<pre><code>Car.append(pickle.load(CarFile))\nCarFile.close()\nprint(Car)\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 22993, "user_id": 1394393, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mSjIL.jpg?s=128&g=1", "display_name": "jpmc26", "link": "https://stackoverflow.com/users/1394393/jpmc26"}, "edited": false, "score": 0, "creation_date": 1458158089, "post_id": 36045552, "comment_id": 59739894, "body": "Which version of Python? It looks like 3.x."}], "answers": [{"tags": [], "owner": {"reputation": 486, "user_id": 5468675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IlutD.jpg?s=128&g=1", "display_name": "pholtz", "link": "https://stackoverflow.com/users/5468675/pholtz"}, "is_accepted": false, "score": 1, "last_activity_date": 1458186943, "last_edit_date": 1458186943, "creation_date": 1458159426, "answer_id": 36046093, "question_id": 36045552, "link": "https://stackoverflow.com/questions/36045552/split-the-results-from-urrlib/36046093#36046093", "title": "Split the results from urrlib", "body": "<p>Why not just use <a href=\"http://docs.python-requests.org/en/master/\" rel=\"nofollow\"><code>requests</code></a>?</p>\n\n<pre><code>import requests\n\nresponse = requests.get(\"http://www.celestrak.com/NORAD/elements/stations.txt\")\ntext = response.text.split(\"\\r\\n\")\n\nfor t in text:\n    print t\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 5572454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91103c8d8e2d707b47d38aa5295b6643?s=128&d=identicon&r=PG&f=1", "display_name": "PowerSoft", "link": "https://stackoverflow.com/users/5572454/powersoft"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1458186943, "creation_date": 1458157557, "question_id": 36045552, "link": "https://stackoverflow.com/questions/36045552/split-the-results-from-urrlib", "title": "Split the results from urrlib", "body": "<p>Need to import data from the ISS.\nUse the code </p>\n\n<pre><code>r= urllib.request.urlopen('http://www.celestrak.com/NORAD/elements/stations.txt')\nx=r.read(1000)\n</code></pre>\n\n<p>when I try to split the data with</p>\n\n<pre><code>x=x.split(\"\\r\\n\")\n</code></pre>\n\n<p>I get the error</p>\n\n<pre><code>raceback (most recent call last):\nFile \"&lt;pyshell#26&gt;\", line 1, in &lt;module&gt;\nx=x.split(\"\\r\\n\")\nTypeError: a bytes-like object is required, not 'str'\n</code></pre>\n\n<p>How can I fix this?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 2512, "user_id": 354176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gj7Qf.jpg?s=128&g=1", "display_name": "nthall", "link": "https://stackoverflow.com/users/354176/nthall"}, "edited": false, "score": 0, "creation_date": 1458157552, "post_id": 36045530, "comment_id": 59739574, "body": "So, why not try your idea and see what happens?"}, {"owner": {"reputation": 96714, "user_id": 198633, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5b9c04999233026354268c2ee4237e04?s=128&d=identicon&r=PG", "display_name": "inspectorG4dget", "link": "https://stackoverflow.com/users/198633/inspectorg4dget"}, "edited": false, "score": 5, "creation_date": 1458157556, "post_id": 36045530, "comment_id": 59739576, "body": "<code>I have an idea</code> &lt;- please share your idea with us, so that we can show you how to get it to work"}, {"owner": {"reputation": 2892, "user_id": 3991164, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/ciXQ9.jpg?s=128&g=1", "display_name": "flaschbier", "link": "https://stackoverflow.com/users/3991164/flaschbier"}, "edited": false, "score": 1, "creation_date": 1458157572, "post_id": 36045530, "comment_id": 59739587, "body": "Please show us what you have achieved so far and ask a concise question about that code. Check here for reference: <a href=\"http://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}], "answers": [{"tags": [], "owner": {"reputation": 96714, "user_id": 198633, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5b9c04999233026354268c2ee4237e04?s=128&d=identicon&r=PG", "display_name": "inspectorG4dget", "link": "https://stackoverflow.com/users/198633/inspectorg4dget"}, "is_accepted": false, "score": 0, "last_activity_date": 1458157716, "creation_date": 1458157716, "answer_id": 36045609, "question_id": 36045530, "link": "https://stackoverflow.com/questions/36045530/python-counter-to-text-file/36045609#36045609", "title": "Python counter to text file", "body": "<p>So let's say your file looks like this:</p>\n\n<pre><code>failed password for 192.168.1.1\nfailed password for 192.168.1.2\n...\nmore similar lines\n\n\nimport collections\n\nprefix = failed password for\nwith open('path/to/file') as infile:\n    counts = collections.Counter(line.rsplit(\" \",1)[1] for line in infile)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4673347, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9ead300778ebfadb7c9a08432a37b18b?s=128&d=identicon&r=PG&f=1", "display_name": "shingster", "link": "https://stackoverflow.com/users/4673347/shingster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 326, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1458159874, "creation_date": 1458157462, "last_edit_date": 1458159874, "question_id": 36045530, "link": "https://stackoverflow.com/questions/36045530/python-counter-to-text-file", "title": "Python counter to text file", "body": "<p>So im trying to analyse a log file and extract information from it. \nOne of the things im trying to do is extract a list of IP addresses that have more than 30 failed attempts. In this a failed attempt is one that starts with the line failed password for. </p>\n\n<p>I have an idea for this that i wanted to try as i wasn't sure whether it will work. </p>\n\n<p>If i use python to create a counter that looks for the keyword failed that i total and print out </p>\n\n<p>This is what i have so far </p>\n\n<pre><code>failed_line=0\nwith open('blacklisttips.txt') as f2:\n    lines= f1.readlines()\n    for i, line in enumerate (lines):\n        if line.startswith(failed_line):\n            f2.write(line)\n            f2.write(lines[i+1])\n</code></pre>\n"}, {"tags": ["python", "arrays", "performance", "numpy", "multiplication"], "answers": [{"tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": false, "score": 3, "last_activity_date": 1458157404, "creation_date": 1458157404, "answer_id": 36045511, "question_id": 36045510, "link": "https://stackoverflow.com/questions/36045510/matrix-multiplication-with-iterator-dependency-numpy/36045511#36045511", "title": "Matrix multiplication with iterator dependency - NumPy", "body": "<p>I learnt few things along the way trying to find vectorized and faster ways to solve it.</p>\n\n<p>1) First off, there is a dependency of iterators at <code>\"for j in range(i)\"</code>. From my previous experience, especially with trying to solve such problems on <code>MATLAB</code>, it appeared that such dependency could be taken care of with a <a href=\"http://mathworld.wolfram.com/LowerTriangularMatrix.html\" rel=\"nofollow\"><code>lower triangular matrix</code></a>, so  <a href=\"http://docs.scipy.org/doc/numpy-1.10.1/reference/generated/numpy.tril.html\" rel=\"nofollow\"><code>np.tril</code></a> should work there. Thus, a fully vectorized solution and not so memory efficient solution (as it creates an intermediate <code>(N,N)</code> shaped array before finally reducing to <code>(N,)</code> shaped array) would be -</p>\n\n<pre><code>def fully_vectorized(a,b):\n    return np.tril(np.einsum('ijk,jil-&gt;kl',a,b),-1).sum(1)\n</code></pre>\n\n<p>2) Next trick/idea was to keep one loop for the iterator <code>i</code> in <code>for i in range(N)</code>, but insert that dependency with indexing and using <a href=\"http://docs.scipy.org/doc/numpy-1.10.0/reference/generated/numpy.einsum.html\" rel=\"nofollow\"><code>np.einsum</code></a> to perform all those multiplications and summations. The advantage would be memory-efficiency. The implementation would look like this -</p>\n\n<pre><code>def einsum_oneloop(a,b):\n    d = np.zeros(N)\n    for i in range(N):\n        d[i] = np.einsum('ij,jik-&gt;',a[:,:,i],b[:,:,np.arange(i)])\n    return d\n</code></pre>\n\n<p>There are two more obvious ways to solve it. So, if we start working from the original <code>all_loopy</code> solution, one could keep the outer two loops and use <code>np.einsum</code> or <a href=\"http://docs.scipy.org/doc/numpy-1.10.1/reference/generated/numpy.tensordot.html\" rel=\"nofollow\"><code>np.tensordot</code></a> to perform those operations and thus remove the inner two loops, like so -</p>\n\n<pre><code>def tensordot_twoloop(a,b):\n    d = np.zeros(N)\n    for i in range(N):\n        for j in range(i):\n            d[i] += np.tensordot(a[:,:,i],b[:,:,j], axes=([1,0],[0,1]))        \n    return d\n\ndef einsum_twoloop(a,b):\n    d = np.zeros(N)\n    for i in range(N):\n        for j in range(i):\n            d[i] += np.einsum('ij,ji-&gt;',a[:,:,i],b[:,:,j])\n    return d\n</code></pre>\n\n<p><strong>Runtime test</strong></p>\n\n<p>Let's compare all the five approaches posted thus far to solve the problem, including the one posted in the question.</p>\n\n<p>Case #1 :</p>\n\n<pre><code>In [26]: # Input arrays with random elements\n    ...: m,n,N = 20,20,20\n    ...: a = np.random.rand(m,n,N)\n    ...: b = np.random.rand(n,m,N)\n    ...: \n\nIn [27]: %timeit all_loopy(a,b)\n    ...: %timeit tensordot_twoloop(a,b)\n    ...: %timeit einsum_twoloop(a,b)\n    ...: %timeit einsum_oneloop(a,b)\n    ...: %timeit fully_vectorized(a,b)\n    ...: \n10 loops, best of 3: 79.6 ms per loop\n100 loops, best of 3: 4.97 ms per loop\n1000 loops, best of 3: 1.66 ms per loop\n1000 loops, best of 3: 585 \u00b5s per loop\n1000 loops, best of 3: 684 \u00b5s per loop\n</code></pre>\n\n<p>Case #2 :</p>\n\n<pre><code>In [28]: # Input arrays with random elements\n    ...: m,n,N = 50,50,50\n    ...: a = np.random.rand(m,n,N)\n    ...: b = np.random.rand(n,m,N)\n    ...: \n\nIn [29]: %timeit all_loopy(a,b)\n    ...: %timeit tensordot_twoloop(a,b)\n    ...: %timeit einsum_twoloop(a,b)\n    ...: %timeit einsum_oneloop(a,b)\n    ...: %timeit fully_vectorized(a,b)\n    ...: \n1 loops, best of 3: 3.1 s per loop\n10 loops, best of 3: 54.1 ms per loop\n10 loops, best of 3: 26.2 ms per loop\n10 loops, best of 3: 27 ms per loop\n10 loops, best of 3: 23.3 ms per loop\n</code></pre>\n\n<p>Case #3 (Leaving out all_loopy for being very slow) :</p>\n\n<pre><code>In [30]: # Input arrays with random elements\n    ...: m,n,N = 100,100,100\n    ...: a = np.random.rand(m,n,N)\n    ...: b = np.random.rand(n,m,N)\n    ...: \n\nIn [31]: %timeit tensordot_twoloop(a,b)\n    ...: %timeit einsum_twoloop(a,b)\n    ...: %timeit einsum_oneloop(a,b)\n    ...: %timeit fully_vectorized(a,b)\n    ...: \n1 loops, best of 3: 1.08 s per loop\n1 loops, best of 3: 744 ms per loop\n1 loops, best of 3: 568 ms per loop\n1 loops, best of 3: 866 ms per loop\n</code></pre>\n\n<p>Going by the numbers, <code>einsum_oneloop</code> looks pretty good to me, whereas <code>fully_vectorized</code> could be used when dealing with small to decent sized arrays!</p>\n"}, {"comments": [{"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1458162416, "post_id": 36046498, "comment_id": 59742438, "body": "Lovely work there! I haven&#39;t really used <code>numba</code> much and I had NumPy in mind while posting the question, but this is really good work, those gradual improvements and explanations! I will keep the question open, if that&#39;s okay."}, {"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1458164629, "post_id": 36046498, "comment_id": 59743612, "body": "Thank you. And I don&#39;t mind if you want to leave the question open. I would also be interested if there are faster or other similar approaches to tackle this question."}], "tags": [], "owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "is_accepted": false, "score": 2, "last_activity_date": 1480256325, "last_edit_date": 1480256325, "creation_date": 1458160840, "answer_id": 36046498, "question_id": 36045510, "link": "https://stackoverflow.com/questions/36045510/matrix-multiplication-with-iterator-dependency-numpy/36046498#36046498", "title": "Matrix multiplication with iterator dependency - NumPy", "body": "<p>I'm not sure if you want it to be all-<a href=\"/questions/tagged/numpy\" class=\"post-tag\" title=\"show questions tagged &#39;numpy&#39;\" rel=\"tag\">numpy</a> but I've always used <a href=\"/questions/tagged/numba\" class=\"post-tag\" title=\"show questions tagged &#39;numba&#39;\" rel=\"tag\">numba</a> for slow but easy to implement loop-based functions. The speedup for loopy-intensive tasks is amazing. First I just <a href=\"http://numba.pydata.org/numba-doc/latest/user/jit.html#nopython\" rel=\"nofollow noreferrer\"><code>numba.njit</code></a>ted your <code>all_loopy</code> variant which already gave me comperative results:</p>\n\n<pre><code>m,n,N = 20,20,20\na = np.random.rand(m,n,N)\nb = np.random.rand(n,m,N)\n\n%timeit numba_all_loopy(a,b)\n1000 loops, best of 3: 476 \u00b5s per loop # 3 times faster than everything else\n%timeit tensordot_twoloop(a,b)\n100 loops, best of 3: 16.1 ms per loop\n%timeit einsum_twoloop(a,b)\n100 loops, best of 3: 4.02 ms per loop\n%timeit einsum_oneloop(a,b)\n1000 loops, best of 3: 1.52 ms per loop\n%timeit fully_vectorized(a,b)\n1000 loops, best of 3: 1.67 ms per loop\n</code></pre>\n\n<p>Then I tested it against your 100, 100, 100 case:</p>\n\n<pre><code>m,n,N = 100,100,100\na = np.random.rand(m,n,N)\nb = np.random.rand(n,m,N)\n\n%timeit numba_all_loopy(a,b)\n1 loop, best of 3: 2.35 s per loop\n%timeit tensordot_twoloop(a,b)\n1 loop, best of 3: 3.54 s per loop\n%timeit einsum_twoloop(a,b)\n1 loop, best of 3: 2.58 s per loop\n%timeit einsum_oneloop(a,b)\n1 loop, best of 3: 2.71 s per loop\n%timeit fully_vectorized(a,b)\n1 loop, best of 3: 1.08 s per loop\n</code></pre>\n\n<p>Apart from noticing that my computer is much slower than yours - the numba version is getting slower. What happened? </p>\n\n<p>Numpy uses compiled versions and depending on the compiler options numpy will probably optimize the looping while numba doesn't. So the next logical step is the optimize the looping. Assuming C-contiguous arrays the innermost loops should be the last axis of the arrays. It's the fastest changing axis so the cache locality will be better.</p>\n\n<pre><code>@nb.njit\ndef numba_all_loopy2(a,b):\n    P,Q,N = a.shape\n    d = np.zeros(N)\n    # First axis a, second axis b\n    for k in range(P):\n        # first axis b, second axis a\n        for n in range(Q):\n            # third axis a\n            for i in range(N):\n                # third axis b\n                A = a[k,n,i] # so we have less lookups of the same variable\n                for j in range(i):\n                    d[i] += A * b[n,k,j]\n    return d\n</code></pre>\n\n<p>so what are the timings of this \"optimized\" numba function? Can it compare with the others or even beat them?</p>\n\n<pre><code>m = n = N = 20\n%timeit numba_all_loopy(a,b)\n1000 loops, best of 3: 476 \u00b5s per loop\n%timeit numba_all_loopy2(a,b)\n1000 loops, best of 3: 379 \u00b5s per loop # New one is a bit faster\n</code></pre>\n\n<p>so it's slightly faster for small matrices, what about big ones:</p>\n\n<pre><code>m = n = N = 100\n%timeit numba_all_loopy(a,b)\n1 loop, best of 3: 2.34 s per loop\n%timeit numba_all_loopy2(a,b)\n1 loop, best of 3: 213 ms per loop # More then ten times faster now!\n</code></pre>\n\n<p>So we have an amazing speedup for large arrays. This function is now 4-5 times faster than your vectorized approaches and the result is the same.</p>\n\n<p>But amazingly it seems that the ordering seems somehow dependant on the computer because the <code>fully_vectorized</code> is fastest where the <code>einsum</code>-options are faster on @Divakar's machine. So it might be open if these results are really that much faster.</p>\n\n<p>Just for fun I tried it with <code>n=m=N=200</code>:</p>\n\n<pre><code>%timeit numba_all_loopy2(a,b)\n1 loop, best of 3: 3.38 s per loop  # still 5 times faster\n%timeit einsum_oneloop(a,b)\n1 loop, best of 3: 51.4 s per loop\n%timeit fully_vectorized(a,b)\n1 loop, best of 3: 16.7 s per loop\n</code></pre>\n"}], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 581, "favorite_count": 3, "answer_count": 2, "score": 4, "last_activity_date": 1480256325, "creation_date": 1458157404, "last_edit_date": 1495541627, "question_id": 36045510, "link": "https://stackoverflow.com/questions/36045510/matrix-multiplication-with-iterator-dependency-numpy", "title": "Matrix multiplication with iterator dependency - NumPy", "body": "<p>Sometime back <a href=\"https://stackoverflow.com/questions/36042556/numpy-multiplication-anything-more-than-tensordot\"><code>this question</code></a> (now deleted but 10K+ rep users can still view it) was posted. It looked interesting to me and I learnt something new there while trying to solve it and I thought that's worth sharing. I would like to post those ideas/solutions and would love to see people post other possible ways to solve it. I am posting the gist of the question next.</p>\n\n<p>So, we have two NumPy ndarrays <code>a</code> and <code>b</code> of shapes :</p>\n\n<pre><code>a : (m,n,N)\nb : (n,m,N)\n</code></pre>\n\n<p>Let's assume we are dealing with cases where <code>m</code>,<code>n</code> &amp; <code>N</code> are comparable.</p>\n\n<p>The problem is to solve the following multiplication and summation with focus on performance :</p>\n\n<pre><code>def all_loopy(a,b):\n    P,Q,N = a.shape\n    d = np.zeros(N)\n    for i in range(N):\n        for j in range(i):\n            for k in range(P):\n                for n in range(Q):\n                    d[i] += a[k,n,i] * b[n,k,j]\n    return d\n</code></pre>\n"}, {"tags": ["python", "list", "set", "compare"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5919608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d27a5bcff125f2c56e2d890edcd6fd7?s=128&d=identicon&r=PG&f=1", "display_name": "hezzag", "link": "https://stackoverflow.com/users/5919608/hezzag"}, "edited": false, "score": 0, "creation_date": 1458157793, "post_id": 36045438, "comment_id": 59739721, "body": "I tried this but I get TypeError: unhashable type: &#39;list&#39; when trying to run it"}], "tags": [], "owner": {"reputation": 96714, "user_id": 198633, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5b9c04999233026354268c2ee4237e04?s=128&d=identicon&r=PG", "display_name": "inspectorG4dget", "link": "https://stackoverflow.com/users/198633/inspectorg4dget"}, "is_accepted": true, "score": 2, "last_activity_date": 1458157837, "last_edit_date": 1458157837, "creation_date": 1458157162, "answer_id": 36045438, "question_id": 36045409, "link": "https://stackoverflow.com/questions/36045409/python-comparing-two-lists/36045438#36045438", "title": "Python: Comparing Two lists", "body": "<pre><code>comp3 = [set(L[1:]) for L in comp3]\ncomp4 = [set(L[1:]) for L in comp4]\n\ncomp3 == comp4  # this should do the trick\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4292, "user_id": 2302482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0FAIV.jpg?s=128&g=1", "display_name": "Bahrom", "link": "https://stackoverflow.com/users/2302482/bahrom"}, "is_accepted": false, "score": 0, "last_activity_date": 1458157491, "creation_date": 1458157491, "answer_id": 36045535, "question_id": 36045409, "link": "https://stackoverflow.com/questions/36045409/python-comparing-two-lists/36045535#36045535", "title": "Python: Comparing Two lists", "body": "<p>What about this approach (using <a href=\"https://docs.python.org/2/library/itertools.html#itertools.chain\" rel=\"nofollow\"><code>itertools.chain</code></a>):</p>\n\n<pre><code>&gt;&gt;&gt; comp3 = [['set',1,2],['set',3,4]]\n&gt;&gt;&gt; comp4 = [['set',2,1],['set',4,3]]\n&gt;&gt;&gt; from itertools import chain\n&gt;&gt;&gt; print set(chain(*comp3))\nset([3, 1, 2, 'set', 4])\n&gt;&gt;&gt; set(chain(*comp3)) == set(chain(*comp4))\nTrue\n&gt;&gt;&gt; \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4292, "user_id": 2302482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0FAIV.jpg?s=128&g=1", "display_name": "Bahrom", "link": "https://stackoverflow.com/users/2302482/bahrom"}, "edited": false, "score": 0, "creation_date": 1458157918, "post_id": 36045615, "comment_id": 59739796, "body": "This is cool, I never realized I could <code>getattr</code> from <code>__builtin__</code> lol, thought of doing something with eval, but that could lead to a disaster"}, {"owner": {"reputation": 5241, "user_id": 1784138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db767202714f84472318dc67c6502026?s=128&d=identicon&r=PG", "display_name": "EnricoGiampieri", "link": "https://stackoverflow.com/users/1784138/enricogiampieri"}, "reply_to_user": {"reputation": 4292, "user_id": 2302482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0FAIV.jpg?s=128&g=1", "display_name": "Bahrom", "link": "https://stackoverflow.com/users/2302482/bahrom"}, "edited": false, "score": 0, "creation_date": 1458158047, "post_id": 36045615, "comment_id": 59739874, "body": "it always depend on the source...if you are getting data from outside yes, it would be dangerous, but if you are the source, <code>eval</code> could be useful to use with non builtin classes like <code>OrderedDict</code> or similar"}], "tags": [], "owner": {"reputation": 5241, "user_id": 1784138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db767202714f84472318dc67c6502026?s=128&d=identicon&r=PG", "display_name": "EnricoGiampieri", "link": "https://stackoverflow.com/users/1784138/enricogiampieri"}, "is_accepted": false, "score": 2, "last_activity_date": 1458157958, "last_edit_date": 1458157958, "creation_date": 1458157746, "answer_id": 36045615, "question_id": 36045409, "link": "https://stackoverflow.com/questions/36045409/python-comparing-two-lists/36045615#36045615", "title": "Python: Comparing Two lists", "body": "<p>just for fun, if you want the type to be inferred by the first string. you could pick it up from the <code>__builtin__</code> module.</p>\n\n<pre><code>def typify(seq):\n    seq = iter(seq)\n    typestr = next(seq)\n    return getattr(__builtin__, typestr)(seq)\n\ncomp3 = list(map(typify, comp3))\n</code></pre>\n\n<p>the function takes the first argument, find the equivalent type from the <code>__builtin__</code> module, apply it to the rest of the sequence.\nWe can then <code>map</code> this function on all the sub-elements of you list comp3.\nOn python2 <code>map</code> will return a list, while in python3 you will have to explicitly convert it, otherwise it will just leave you a generator.</p>\n\n<p>This is general enough so that if you pass a different type, it will recognize it automatically:</p>\n\n<pre><code>comp3 = [['list',1,2],['set',3,4]]\nlist(map(typify, comp3))\n#[[1, 2], {3, 4}]\n</code></pre>\n\n<p>after that you can just do</p>\n\n<pre><code>comp3 = [['set',1,2],['set',3,4]]\ncomp4 = [['set',2,1],['set',4,3]]\n\ncomp3 = list(map(typify, comp3))\ncomp4 = list(map(typify, comp4))\n\ncomp3 == comp4\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5919608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d27a5bcff125f2c56e2d890edcd6fd7?s=128&d=identicon&r=PG&f=1", "display_name": "hezzag", "link": "https://stackoverflow.com/users/5919608/hezzag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 429, "favorite_count": 0, "accepted_answer_id": 36045438, "answer_count": 3, "score": -1, "last_activity_date": 1458157958, "creation_date": 1458157089, "question_id": 36045409, "link": "https://stackoverflow.com/questions/36045409/python-comparing-two-lists", "title": "Python: Comparing Two lists", "body": "<p>I am trying to compare these two lists using Python:</p>\n\n<pre><code>comp1 = [['set',1,2]]\ncomp2 = [['set',2,1]]\n</code></pre>\n\n<p>Both are valid representations of the set, {1,2}</p>\n\n<p>I essentially want to check if these lists, comp1 and comp2 are equal to each other but I am unsure how to go about this in Python.</p>\n\n<p>I am also interested in finding out how I would do this with lists like:</p>\n\n<pre><code>comp3 = [['set',1,2],['set',3,4]]\ncomp4 = [['set',2,1],['set',4,3]]\n</code></pre>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 1, "creation_date": 1458157276, "post_id": 36045406, "comment_id": 59739395, "body": "<code>for i in list:</code> are you defining a variable called <code>list</code> because with the built in <code>list</code> this gives an error.  please provide a <a href=\"http://stackoverflow.com/help/mcve\">Minimal Verifiable Example</a>."}, {"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 1, "creation_date": 1458157311, "post_id": 36045406, "comment_id": 59739415, "body": "is each column in the csv an IP? or what? We can&#39;t help you unless you show a sample of what you&#39;re actually reading in. and note that &quot;ip address&quot; is vague. maybe you mean a dotted quad (e.g. 127.0.0.1), but note that 7f000001 is a valid IP as well, since that&#39;s just 127.0.0.1 in hex form."}, {"owner": {"reputation": 11, "user_id": 6073508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60a838d64ad9d6edd43cfd141b5fb42c?s=128&d=identicon&r=PG&f=1", "display_name": "Revision30", "link": "https://stackoverflow.com/users/6073508/revision30"}, "edited": false, "score": 0, "creation_date": 1458159269, "post_id": 36045406, "comment_id": 59740593, "body": "My apologists added edits with more information."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6073508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60a838d64ad9d6edd43cfd141b5fb42c?s=128&d=identicon&r=PG&f=1", "display_name": "Revision30", "link": "https://stackoverflow.com/users/6073508/revision30"}, "edited": false, "score": 0, "creation_date": 1458162548, "post_id": 36045899, "comment_id": 59742506, "body": "f = open(&#39;file.csv&#39;, &#39;rt&#39;) data = pd.read_csv(f) addresses = data[&quot;Source IP&quot;] list_of_valid_IP = list selected = data[addresses.isin(list_of_valid_IP)] print(selected)                                                                                   Thanks for answer! code  above produces. Error Empty DataFrame Columns: [Total, Sent(MB), Received(MB), Hits, User, Group, Source IP, Source Name, Destination IP, Destination Name, Service] Index: []"}], "tags": [], "owner": {"reputation": 5241, "user_id": 1784138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db767202714f84472318dc67c6502026?s=128&d=identicon&r=PG", "display_name": "EnricoGiampieri", "link": "https://stackoverflow.com/users/1784138/enricogiampieri"}, "is_accepted": false, "score": 0, "last_activity_date": 1458158772, "creation_date": 1458158772, "answer_id": 36045899, "question_id": 36045406, "link": "https://stackoverflow.com/questions/36045406/search-csv-for-ips-in-a-list/36045899#36045899", "title": "Search CSV for IP&#39;s in a List", "body": "<p>try <code>pandas</code> for it. Assuming your IP addresses are stored in the column <code>\"IPadd\"</code></p>\n\n<pre><code>import pandas as pd\ndata = pd.read_csv(\"your_file.csv\")\naddresses = data[\"IPadd\"]\nlist_of_valid_ip = ['103.13.228.134', '104.41.140.0' , '118.102.64.126']\nselected = data[addresses.isin(list_of_valid_ip)]\nprint(selected)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6073508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60a838d64ad9d6edd43cfd141b5fb42c?s=128&d=identicon&r=PG&f=1", "display_name": "Revision30", "link": "https://stackoverflow.com/users/6073508/revision30"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 336, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1458159204, "creation_date": 1458157086, "last_edit_date": 1458159204, "question_id": 36045406, "link": "https://stackoverflow.com/questions/36045406/search-csv-for-ips-in-a-list", "title": "Search CSV for IP&#39;s in a List", "body": "<p>I'm new to python and can't seem to get this to work. Any suggestion would be appreciated.</p>\n\n<p>I have a list of IP address and I would like to search a CSV for any matches and print rows from csv that have the IP addresses from the list.</p>\n\n<p>list = ['103.13.228.134', '104.41.140.0' , '118.102.64.126']    </p>\n\n<pre><code>with open('.\\\\input\\\\%s' % x, 'rt') as f:\n    reader=csv.reader(f)\n    for row in reader:\n        for i in list:\n            if i in row:\n                print row\n</code></pre>\n\n<p>CSV contains multiple fields example below: </p>\n\n<p>Source/Destination/Service</p>\n\n<p>'192.168.0.0','101.200.81.187','SSH'</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 7, "user_id": 5016156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d1badaf78a76cd7027a4b9315eb962d?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew McMillian", "link": "https://stackoverflow.com/users/5016156/matthew-mcmillian"}, "reply_to_user": {"reputation": 3783, "user_id": 1731200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ee017760fb073022ed2dc2faaf506516?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1731200/matthias"}, "edited": false, "score": 1, "creation_date": 1458157268, "post_id": 36045352, "comment_id": 59739389, "body": "I don&#39;t think it is the same?"}], "answers": [{"tags": [], "owner": {"reputation": 945, "user_id": 4987866, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-x1wNjsrUZF4/AAAAAAAAAAI/AAAAAAAAABg/6wwtMoeK7wA/photo.jpg?sz=128", "display_name": "Jules", "link": "https://stackoverflow.com/users/4987866/jules"}, "is_accepted": false, "score": 2, "last_activity_date": 1458158620, "last_edit_date": 1458158620, "creation_date": 1458157676, "answer_id": 36045599, "question_id": 36045352, "link": "https://stackoverflow.com/questions/36045352/moving-files-to-folders-round-robin-in-python/36045599#36045599", "title": "Moving files to folders, round robin in Python", "body": "<p>This is a great time to use the <code>itertools</code> built in library!</p>\n\n<pre><code>import itertools\nfiles = [\"file1\",\"file2\",\"file3\",\"file4\"]\nfolders = [\"folder1\",\"folder2\"]\nfor file, folder in zip(files, itertools.cycle(folders)):\n    print(\"move {} to {}\".format(file, folder)) \n</code></pre>\n\n<p>This is only the code for the <em>round robin</em>. The moving of files should be pretty easy. Look at the <code>os</code> module. </p>\n\n<p>Feel free to ask if you have any questions.</p>\n"}], "owner": {"reputation": 7, "user_id": 5016156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d1badaf78a76cd7027a4b9315eb962d?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew McMillian", "link": "https://stackoverflow.com/users/5016156/matthew-mcmillian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "closed_date": 1458158732, "answer_count": 1, "score": -2, "last_activity_date": 1458158769, "creation_date": 1458156927, "last_edit_date": 1458158769, "question_id": 36045352, "link": "https://stackoverflow.com/questions/36045352/moving-files-to-folders-round-robin-in-python", "closed_reason": "Duplicate", "title": "Moving files to folders, round robin in Python", "body": "<p>I have two list. One is a list of files and the other a list of folders.</p>\n\n<pre><code>list1[file1,file2,file3,file4]\nlist2[folder1,folder2]\n</code></pre>\n\n<p>I want to move:</p>\n\n<ul>\n<li>file1 to folder1</li>\n<li>file2 to folder2</li>\n<li>file3 to folder1</li>\n<li>file4 to folder2</li>\n</ul>\n"}, {"tags": ["python", "bottle"], "answers": [{"tags": [], "owner": {"reputation": 36413, "user_id": 2301450, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/4xgoZ.png?s=128&g=1", "display_name": "vaultah", "link": "https://stackoverflow.com/users/2301450/vaultah"}, "is_accepted": true, "score": 2, "last_activity_date": 1458157682, "last_edit_date": 1458157682, "creation_date": 1458157137, "answer_id": 36045428, "question_id": 36045258, "link": "https://stackoverflow.com/questions/36045258/use-embedded-python-with-simpletemplate-engine-passed-as-string-to-template/36045428#36045428", "title": "Use Embedded python with SimpleTemplate Engine passed as string to template()", "body": "<p>Lines with embedded Python code must start with <code>%</code>. The problem is that you're using string concatenation, which doesn't preserve newlines. Simply put, that string is equivalent to the following line:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;p&gt;{{text}}&lt;/p&gt;% demo = 'hello world'&lt;p&gt;{{demo}}&lt;/p&gt;\n</code></pre>\n\n<p>Since <code>%</code> isn't the first character, it doesn't mean anything to Bottle.</p>\n\n<p>Add newlines manually:</p>\n\n<pre><code>return template(\n    \"&lt;p&gt;{{text}}&lt;/p&gt;\\n\"\n    \"% demo = 'hello world'\\n\" \n    \"&lt;p&gt;{{demo}}&lt;/p&gt;\",\n    text=text\n)\n</code></pre>\n\n<p>As a side note, you can use <a href=\"https://docs.python.org/3/reference/lexical_analysis.html#string-literal-concatenation\" rel=\"nofollow\">implicit string literal concatenation</a> (as shown in the code above).</p>\n"}], "owner": {"reputation": 4602, "user_id": 1375964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b86c3c6b84ef73a7bd810996e8b9cc?s=128&d=identicon&r=PG", "display_name": "osowskit", "link": "https://stackoverflow.com/users/1375964/osowskit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 36045428, "answer_count": 1, "score": 2, "last_activity_date": 1458157682, "creation_date": 1458156588, "last_edit_date": 1458157196, "question_id": 36045258, "link": "https://stackoverflow.com/questions/36045258/use-embedded-python-with-simpletemplate-engine-passed-as-string-to-template", "title": "Use Embedded python with SimpleTemplate Engine passed as string to template()", "body": "<p>I am debugging an application and would like to use the bottle SimpleTemplate to render both HTML and Python. If I use a template as a separate file (views/simple.tpl), then Python is rendered correctly.</p>\n\n<p>If I try passing in Python as a string, I get <code>NameError(\"name 'demo' is not defined\",)</code></p>\n\n<pre><code>from bottle import template\n\ntext = \"debugging\"\nreturn template(\n    \"&lt;p&gt;{{text}}&lt;/p&gt;\" + \n    \"% demo = 'hello world'\" + \n    \"&lt;p&gt;{{demo}}&lt;/p&gt;\",\n    text=text\n)\n</code></pre>\n\n<p>Is this possible?</p>\n"}, {"tags": ["python", "google-app-engine", "google-identity-toolkit"], "comments": [{"owner": {"reputation": 219, "user_id": 4088038, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/db5c2ae56b02f734eb61db2714c0724a?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/4088038/dennis"}, "edited": false, "score": 0, "creation_date": 1458226487, "post_id": 36045223, "comment_id": 59774666, "body": "Is it fair to assume this is a problem with the setup of the service account or the reference to the service account?"}], "answers": [{"tags": [], "owner": {"reputation": 219, "user_id": 4088038, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/db5c2ae56b02f734eb61db2714c0724a?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/4088038/dennis"}, "is_accepted": false, "score": 0, "last_activity_date": 1458228528, "creation_date": 1458228528, "answer_id": 36065005, "question_id": 36045223, "link": "https://stackoverflow.com/questions/36045223/401-unauthorized-error-on-verify-gitkit-token/36065005#36065005", "title": "401 Unauthorized Error On Verify GitKit Token", "body": "<p>Ok, have figured it out.. Looks like needed to update the gitkit client to the version from Dec 2015 (was using Sep 2015), which no longer needs the conversion from .p12 to .pem</p>\n"}], "owner": {"reputation": 219, "user_id": 4088038, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/db5c2ae56b02f734eb61db2714c0724a?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/4088038/dennis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1458228528, "creation_date": 1458156480, "question_id": 36045223, "link": "https://stackoverflow.com/questions/36045223/401-unauthorized-error-on-verify-gitkit-token", "title": "401 Unauthorized Error On Verify GitKit Token", "body": "<p>I recently decided to quickly re-setup google identity toolkit using a new application, which I thought would be a walk in the park until I became stranded on the 401 Unauthorized error below... </p>\n\n<p>To make sure this was a clean setup, I followed the step-by-step setup instructions exactly (<a href=\"https://developers.google.com/identity/toolkit/web/configure-service\" rel=\"nofollow\">https://developers.google.com/identity/toolkit/web/configure-service</a>) including the step of converting the .p12 file to .pem with openssl pkcs12 -in xxxxx.p12 -nodes -nocerts > privatekey.pem</p>\n\n<p>As a side note, I previously had this up and running perfectly a couple of months back and can't seem to identify the error this time round.. Thought it must be the .pem file so I tried using the .p12 and even the .json rsa file but I'm guessing gitkit still can't accept those options</p>\n\n<p>Any ideas?</p>\n\n<blockquote>\n  <p>HTTP Error 401: Unauthorized Traceback (most recent call last):   File\n  \"/base/data/home/runtimes/python27/python27_lib/versions/third_party/webapp2-2.5.2/webapp2.py\",\n  line 1529, in <strong>call</strong>\n      rv = self.router.dispatch(request, response)   File \"/base/data/home/runtimes/python27/python27_lib/versions/third_party/webapp2-2.5.2/webapp2.py\",\n  line 1278, in default_dispatcher\n      return route.handler_adapter(request, response)   File \"/base/data/home/runtimes/python27/python27_lib/versions/third_party/webapp2-2.5.2/webapp2.py\",\n  line 1101, in <strong>call</strong>\n      handler = self.handler(request, response)   File \"/base/data/home/runtimes/python27/python27_lib/versions/third_party/webapp2-2.5.2/webapp2.py\",\n  line 528, in <strong>init</strong>\n      self.initialize(request, response)   File \"/base/data/home/apps/s~[site]/1.391420460413032384/main.py\",\n  line 56, in initialize\n      gitkit_user = gitkit_instance.VerifyGitkitToken(self.request.cookies['gtoken'])<br>\n  File\n  \"/base/data/home/apps/s~[site]/1.391420460413032384/lib/identitytoolkit/gitkitclient.py\",\n  line 216, in VerifyGitkitToken\n      certs = self.rpc_helper.GetPublicCert()   File \"/base/data/home/apps/s~[site]/1.391420460413032384/lib/identitytoolkit/rpchelper.py\",\n  line 157, in GetPublicCert\n      headers = {'Authorization': 'Bearer ' + self._GetAccessToken()}   File\n  \"/base/data/home/apps/s~[site]/1.391420460413032384/lib/identitytoolkit/rpchelper.py\",\n  line 207, in _GetAccessToken\n      raw_response = urllib2.urlopen(req, body)   File \"/base/data/home/runtimes/python27/python27_dist/lib/python2.7/urllib2.py\",\n  line 127, in urlopen\n      return _opener.open(url, data, timeout)   File \"/base/data/home/runtimes/python27/python27_dist/lib/python2.7/urllib2.py\",\n  line 410, in open\n      response = meth(req, response)   File \"/base/data/home/runtimes/python27/python27_dist/lib/python2.7/urllib2.py\",\n  line 523, in http_response\n      'http', request, response, code, msg, hdrs)   File \"/base/data/home/runtimes/python27/python27_dist/lib/python2.7/urllib2.py\",\n  line 448, in error\n      return self._call_chain(*args)   File \"/base/data/home/runtimes/python27/python27_dist/lib/python2.7/urllib2.py\",\n  line 382, in _call_chain\n      result = func(*args)   File \"/base/data/home/runtimes/python27/python27_dist/lib/python2.7/urllib2.py\",\n  line 531, in http_error_default\n      raise HTTPError(req.get_full_url(), code, msg, hdrs, fp) HTTPError: HTTP Error 401: Unauthorized</p>\n</blockquote>\n"}, {"tags": ["python", "pywinauto"], "comments": [{"owner": {"reputation": 7644, "user_id": 3648361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1aeF.jpg?s=128&g=1", "display_name": "Vasily Ryabov", "link": "https://stackoverflow.com/users/3648361/vasily-ryabov"}, "edited": false, "score": 0, "creation_date": 1458204045, "post_id": 36045199, "comment_id": 59757882, "body": "Maybe this thread would be useful as an example: <a href=\"http://stackoverflow.com/questions/32846550/python-control-window-with-pywinauto-while-the-window-is-minimized-or-hidden\" title=\"python control window with pywinauto while the window is minimized or hidden\">stackoverflow.com/questions/32846550/&hellip;</a>"}, {"owner": {"reputation": 7644, "user_id": 3648361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1aeF.jpg?s=128&g=1", "display_name": "Vasily Ryabov", "link": "https://stackoverflow.com/users/3648361/vasily-ryabov"}, "edited": false, "score": 0, "creation_date": 1458204362, "post_id": 36045199, "comment_id": 59758075, "body": "Have you tried to generate <code>Click()</code> code using SWAPY? It can be done by popup menu at the button element in the tree."}, {"owner": {"reputation": 7644, "user_id": 3648361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1aeF.jpg?s=128&g=1", "display_name": "Vasily Ryabov", "link": "https://stackoverflow.com/users/3648361/vasily-ryabov"}, "edited": false, "score": 0, "creation_date": 1458205368, "post_id": 36045199, "comment_id": 59758752, "body": "One more useful thread about attribute access: <a href=\"https://github.com/pywinauto/pywinauto/issues/120\" rel=\"nofollow noreferrer\">github.com/pywinauto/pywinauto/issues/120</a>"}], "answers": [{"tags": [], "owner": {"reputation": 685, "user_id": 1748072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/439630c12ab022b078562d18b7949baa?s=128&d=identicon&r=PG", "display_name": "SWAPYAutomation", "link": "https://stackoverflow.com/users/1748072/swapyautomation"}, "is_accepted": false, "score": 1, "last_activity_date": 1458162294, "creation_date": 1458162294, "answer_id": 36046894, "question_id": 36045199, "link": "https://stackoverflow.com/questions/36045199/pywinauto-trouble-clicking-the-next-button/36046894#36046894", "title": "PyWinAuto trouble clicking the Next Button", "body": "<p>You misapply <code>Click</code> method. It has the next signatire - <code>Click(button=u'left', pressed=u'', coords=(0, 0), double=False, absolute=False)</code></p>\n\n<p>To click a button, <code>click</code> should be performed on the button object. So you shoud navigate to the button at first.</p>\n\n<p>In your case the code may look something like:\n<code>dlg['&amp;Next &gt;'].Click()</code></p>\n\n<p>Again, please do not guess, read the <a href=\"http://pywinauto.github.io/docs/code/pywinauto.controls.HwndWrapper.html?highlight=click#pywinauto.controls.HwndWrapper.HwndWrapper.Click\" rel=\"nofollow\">docs</a> and see the <a href=\"https://github.com/pywinauto/pywinauto/tree/master/examples\" rel=\"nofollow\">examples</a></p>\n"}], "owner": {"reputation": 11, "user_id": 5874210, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-52BGXfb07J0/AAAAAAAAAAI/AAAAAAAABfs/5U3f3OZ7VoU/photo.jpg?sz=128", "display_name": "Donald MacQueen", "link": "https://stackoverflow.com/users/5874210/donald-macqueen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1119, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486570273, "creation_date": 1458156378, "last_edit_date": 1458208364, "question_id": 36045199, "link": "https://stackoverflow.com/questions/36045199/pywinauto-trouble-clicking-the-next-button", "title": "PyWinAuto trouble clicking the Next Button", "body": "<p>This code gets the first window from InstallShield.</p>\n\n<pre><code>from pywinauto import application\nfrom pywinauto import findwindows\n\napp = application.Application()\n\napp.start(\"MyInstallShieldApp.exe\")\n\ntime.sleep(15)\n\nhwnd = findwindows.find_windows(title=u\"InstallShield Wizard\", class_name=\"MsiDialogCloseClass\")\nprint (\"|\", str(hwnd), \"|\")\ndlg = app.Window_(handle=hwnd).Wait(\"enabled\", timeout=25, retry_interval=0.5)\n</code></pre>\n\n<p>Now I want to click the Next button. Swapy says that the Next button has the text '&amp;Next >' and the Button number is 1. But none of these click statements have any effect.</p>\n\n<pre><code>dlg.Click(\"Next\")\n\ndlg.Click(coords=(977, 711))\n\ndlg.Click(button=\"left\")\n</code></pre>\n"}, {"tags": ["python", "parse-platform", "scrapy", "scrapy-pipeline"], "comments": [{"owner": {"reputation": 17034, "user_id": 858913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b5015a60c08feee1d8116be3dd70878d?s=128&d=identicon&r=PG", "display_name": "eLRuLL", "link": "https://stackoverflow.com/users/858913/elrull"}, "edited": false, "score": 0, "creation_date": 1458161320, "post_id": 36045159, "comment_id": 59741798, "body": "your log says <code>connection.request(&#39;POST&#39;, &#39;&#47;1&#47;classes&#47;articlulos&#39;, json.dumps({data}), {</code> while your code <code>connection.request(&#39;POST&#39;, &#39;&#47;1&#47;classes&#47;articlulos&#39;, json.dumps({item}), {</code>, are you giving bad examples?"}, {"owner": {"reputation": 83, "user_id": 4871661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10206657516547855/picture?type=large", "display_name": "Thomas Simonini", "link": "https://stackoverflow.com/users/4871661/thomas-simonini"}, "reply_to_user": {"reputation": 17034, "user_id": 858913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b5015a60c08feee1d8116be3dd70878d?s=128&d=identicon&r=PG", "display_name": "eLRuLL", "link": "https://stackoverflow.com/users/858913/elrull"}, "edited": false, "score": 0, "creation_date": 1458163608, "post_id": 36045159, "comment_id": 59743081, "body": "Oh yes sorry it was the error when connection.request(&#39;POST&#39;, &#39;/1/classes/articlulos&#39;, json.dumps({item}), { was ({data})"}, {"owner": {"reputation": 17034, "user_id": 858913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b5015a60c08feee1d8116be3dd70878d?s=128&d=identicon&r=PG", "display_name": "eLRuLL", "link": "https://stackoverflow.com/users/858913/elrull"}, "edited": false, "score": 0, "creation_date": 1458163660, "post_id": 36045159, "comment_id": 59743104, "body": "could you update your question? (edit it)"}], "answers": [{"comments": [{"owner": {"reputation": 17034, "user_id": 858913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b5015a60c08feee1d8116be3dd70878d?s=128&d=identicon&r=PG", "display_name": "eLRuLL", "link": "https://stackoverflow.com/users/858913/elrull"}, "reply_to_user": {"reputation": 83, "user_id": 4871661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10206657516547855/picture?type=large", "display_name": "Thomas Simonini", "link": "https://stackoverflow.com/users/4871661/thomas-simonini"}, "edited": false, "score": 0, "creation_date": 1458166019, "post_id": 36047460, "comment_id": 59744232, "body": "don&#39;t surround <code>item</code> with <code>{}</code>, just pass the item"}, {"owner": {"reputation": 83, "user_id": 4871661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10206657516547855/picture?type=large", "display_name": "Thomas Simonini", "link": "https://stackoverflow.com/users/4871661/thomas-simonini"}, "edited": false, "score": 0, "creation_date": 1458166271, "post_id": 36047460, "comment_id": 59744355, "body": "I passed the item  json.dumps(item) but it&#39;s the same error: TypeError: {&#39;image&#39;: &#39;<a href=\"http://apps.site.lefigaro.fr/sites/apps/files/styles/large/public/thumbnails/image/sport24.png?itok=caKsKUzV\" rel=\"nofollow noreferrer\">apps.site.lefigaro.fr/sites/apps/files/styles/large/public/&zwnj;&#8203;&hellip;</a>&#39;,  &#39;language&#39;: &#39;FR&#39;,  &#39;publishedDate&#39;: datetime.datetime(2016, 3, 16, 22, 10, 43, 146000),  &#39;publisher&#39;: &#39;Le Figaro Sport&#39;,  &#39;theme&#39;: &#39;Sport&#39;,  &#39;title&#39;: u&#39;Une affiche du Bayern choque la communaut\\xe9 juive italienne&#39;,  &#39;url&#39;: u&#39;sport24.lefigaro.fr/tennis/atp/fil-info/gasquet-je-sais-qu&zwnj;&#8203;e-mon-meilleur-nivea&zwnj;&#8203;u-reviendra-796780&#39;} is not JSON serializable"}, {"owner": {"reputation": 17034, "user_id": 858913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b5015a60c08feee1d8116be3dd70878d?s=128&d=identicon&r=PG", "display_name": "eLRuLL", "link": "https://stackoverflow.com/users/858913/elrull"}, "reply_to_user": {"reputation": 83, "user_id": 4871661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10206657516547855/picture?type=large", "display_name": "Thomas Simonini", "link": "https://stackoverflow.com/users/4871661/thomas-simonini"}, "edited": false, "score": 0, "creation_date": 1458169584, "post_id": 36047460, "comment_id": 59745729, "body": "same error, <code>datetime</code> is not serializable, you&#39;ll have to format it like a string"}], "tags": [], "owner": {"reputation": 17034, "user_id": 858913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b5015a60c08feee1d8116be3dd70878d?s=128&d=identicon&r=PG", "display_name": "eLRuLL", "link": "https://stackoverflow.com/users/858913/elrull"}, "is_accepted": false, "score": 0, "last_activity_date": 1458164312, "creation_date": 1458164312, "answer_id": 36047460, "question_id": 36045159, "link": "https://stackoverflow.com/questions/36045159/scrapy-pipeline-to-parse/36047460#36047460", "title": "Scrapy Pipeline to Parse", "body": "<p>Looks like you have a <code>set</code> inside <code>item['data']</code>, which isn't accepted on JSON.</p>\n\n<p>You need to change that field back to list before trying to make it JSON acceptable.</p>\n"}, {"tags": [], "owner": {"reputation": 83, "user_id": 4871661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10206657516547855/picture?type=large", "display_name": "Thomas Simonini", "link": "https://stackoverflow.com/users/4871661/thomas-simonini"}, "is_accepted": true, "score": 0, "last_activity_date": 1458484114, "creation_date": 1458484114, "answer_id": 36114954, "question_id": 36045159, "link": "https://stackoverflow.com/questions/36045159/scrapy-pipeline-to-parse/36114954#36114954", "title": "Scrapy Pipeline to Parse", "body": "<p>I found the solution </p>\n\n<pre><code>class Newscrawlbotv01Pipeline(object):\ndef process_item(self, item, spider):\n    for data in item:\n        if not data:\n            raise DropItem(\"Missing data!\")\n    connection = httplib.HTTPSConnection(\n        settings['PARSE'],\n        settings['PORT']\n    )\n\n    connection.connect()\n    connection.request('POST', '/1/classes/Articles', json.dumps(dict(item)), {\n   \"X-Parse-Application-Id\": \"WW\",\n   \"X-Parse-REST-API-Key\": \"WW\",\n   \"Content-Type\": \"application/json\"\n })\n    log.msg(\"Question added to PARSE !\", level=log.DEBUG, spider=spider)\n    return item\n    #self.collection.update({'url': item['url']}, dict(item), upsert=True)\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 4871661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10206657516547855/picture?type=large", "display_name": "Thomas Simonini", "link": "https://stackoverflow.com/users/4871661/thomas-simonini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 476, "favorite_count": 0, "accepted_answer_id": 36114954, "answer_count": 2, "score": 1, "last_activity_date": 1458484114, "creation_date": 1458156273, "last_edit_date": 1458165313, "question_id": 36045159, "link": "https://stackoverflow.com/questions/36045159/scrapy-pipeline-to-parse", "title": "Scrapy Pipeline to Parse", "body": "<p>I made a pipeline to put scrapy data to my Parse Backend</p>\n\n<p>PARSE = 'api.parse.com'\nPORT = 443</p>\n\n<p><strong>However, I can't find the right way to post the data in Parse.</strong> Because everytime it creates undefined objects in my Parse DB.</p>\n\n<pre><code> class Newscrawlbotv01Pipeline(object):\n    def process_item(self, item, spider):\n        for data in item:\n            if not data:\n                raise DropItem(\"Missing data!\")\n        connection = httplib.HTTPSConnection(\n            settings['PARSE'],\n            settings['PORT']\n        )\n        connection.connect()\n        connection.request('POST', '/1/classes/articlulos', json.dumps({item}), {\n       \"X-Parse-Application-Id\": \"XXXXXXXXXXXXXXXX\",\n       \"X-Parse-REST-API-Key\": \"XXXXXXXXXXXXXXXXXXX\",\n       \"Content-Type\": \"application/json\"\n     })\n        log.msg(\"Question added to PARSE !\", level=log.DEBUG, spider=spider)\n        return item\n</code></pre>\n\n<p>Example of an error :</p>\n\n<pre><code>TypeError: set([{'image': 'http://apps.site.lefigaro.fr/sites/apps/files/styles/large/public/thumbnails/image/sport24.png?itok=caKsKUzV',\n 'language': 'FR',\n 'publishedDate': datetime.datetime(2016, 3, 16, 21, 53, 10, 289000),\n 'publisher': 'Le Figaro Sport',\n 'theme': 'Sport',\n 'title': u'Pogba aurait rencontr\\xe9 les dirigeants du PSG',\n 'url': u'sport24.lefigaro.fr/football/ligue-des-champions/fil-info/prolongation-entre-le-bayern-et-la-juve-796778'}]) is not JSON serializable\n</code></pre>\n"}, {"tags": ["python", "pip", "xgboost"], "comments": [{"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1458156542, "post_id": 36045138, "comment_id": 59738907, "body": "check version of python and version of pip used match (very common problem) for pip do <code>pip --version</code> and for python run <code>import sys ; print(sys.version)</code>"}, {"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1458156743, "post_id": 36045138, "comment_id": 59739056, "body": "if they don&#39;t match you can use <code>pip3</code> / <code>pip2</code> / <code>pip2.7</code> / <code>pip3.5</code> etc. to install the package for a specific version of python on your computer."}, {"owner": {"reputation": 21, "user_id": 4021151, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh6.googleusercontent.com/-Vg8nAtqFrjY/AAAAAAAAAAI/AAAAAAAABdc/lZRrtktfhRI/photo.jpg?sz=128", "display_name": "prashant mudgal", "link": "https://stackoverflow.com/users/4021151/prashant-mudgal"}, "reply_to_user": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1458158104, "post_id": 36045138, "comment_id": 59739906, "body": "I tried that. python is 2.7 and pip is pip 8.1.0 from /Library/Frameworks/Python.framework/Versions/2.7/lib/python&zwnj;&#8203;2.7/site-packages (python 2.7)"}, {"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 1, "creation_date": 1458158342, "post_id": 36045138, "comment_id": 59740060, "body": "can you import it when running python from terminal? if so then this probably needs the <code>ipython-notebook</code> tag."}, {"owner": {"reputation": 21, "user_id": 4021151, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh6.googleusercontent.com/-Vg8nAtqFrjY/AAAAAAAAAAI/AAAAAAAABdc/lZRrtktfhRI/photo.jpg?sz=128", "display_name": "prashant mudgal", "link": "https://stackoverflow.com/users/4021151/prashant-mudgal"}, "reply_to_user": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1458159044, "post_id": 36045138, "comment_id": 59740448, "body": "Can you please elaborate ipython-notebook tag?"}, {"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1458159138, "post_id": 36045138, "comment_id": 59740505, "body": "sorry, mixing up ipython-notebook and notebook jupyter."}, {"owner": {"reputation": 2311, "user_id": 2773607, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35dcf11a1e76a9435aa880b1f07c581f?s=128&d=identicon&r=PG&f=1", "display_name": "mprat", "link": "https://stackoverflow.com/users/2773607/mprat"}, "edited": false, "score": 0, "creation_date": 1458160187, "post_id": 36045138, "comment_id": 59741141, "body": "Are you using a virtual environment? What are the results from running <code>which python</code>, <code>which ipython</code>, and <code>which pip</code> (are they all the same)? If they are NOT the same, this is what the problem is. Can you <code>import xgboost</code> from the python shell, rather than the ipython notebook?"}, {"owner": {"reputation": 21, "user_id": 4021151, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh6.googleusercontent.com/-Vg8nAtqFrjY/AAAAAAAAAAI/AAAAAAAABdc/lZRrtktfhRI/photo.jpg?sz=128", "display_name": "prashant mudgal", "link": "https://stackoverflow.com/users/4021151/prashant-mudgal"}, "edited": false, "score": 0, "creation_date": 1458164060, "post_id": 36045138, "comment_id": 59743326, "body": "No, I am not using virtual environment. Which python yields /Library/Frameworks/Python.framework/Versions/2.7/bin/python  . Which pip /Library/Frameworks/Python.framework/Versions/2.7/bin/pip   and which ipython yields  /Users/PrashantMudgal/anaconda/bin/ipython"}, {"owner": {"reputation": 21, "user_id": 4021151, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh6.googleusercontent.com/-Vg8nAtqFrjY/AAAAAAAAAAI/AAAAAAAABdc/lZRrtktfhRI/photo.jpg?sz=128", "display_name": "prashant mudgal", "link": "https://stackoverflow.com/users/4021151/prashant-mudgal"}, "edited": false, "score": 0, "creation_date": 1458165300, "post_id": 36045138, "comment_id": 59743907, "body": "I am able to import xgboost from python shell"}], "answers": [{"tags": [], "owner": {"reputation": 149, "user_id": 4880360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50168a590385ac96b96ccd0069dea1a0?s=128&d=identicon&r=PG&f=1", "display_name": "Roozbeh", "link": "https://stackoverflow.com/users/4880360/roozbeh"}, "is_accepted": false, "score": 0, "last_activity_date": 1484182559, "creation_date": 1484182559, "answer_id": 41603441, "question_id": 36045138, "link": "https://stackoverflow.com/questions/36045138/xgboost-package-on-mac/41603441#41603441", "title": "Xgboost package on mac", "body": "<p>It may come from the fact that you have two (or more) python environments. A hacky solution is to install it within Jupyter Notebook (note the '!'):</p>\n\n<pre><code>!pip install xgboost \n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4021151, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh6.googleusercontent.com/-Vg8nAtqFrjY/AAAAAAAAAAI/AAAAAAAABdc/lZRrtktfhRI/photo.jpg?sz=128", "display_name": "prashant mudgal", "link": "https://stackoverflow.com/users/4021151/prashant-mudgal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 924, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1484182559, "creation_date": 1458156218, "last_edit_date": 1458158781, "question_id": 36045138, "link": "https://stackoverflow.com/questions/36045138/xgboost-package-on-mac", "title": "Xgboost package on mac", "body": "<p>I am trying to use Xgboost but facing problems in installation.\ni am using mac and I use python notebook jupyter for the same. I opened the command line and used <code>pip install xgboost</code> and it got installed successfully but when I try to use it in my code by writing <code>import xgboost as xg</code> then I get  <code>ImportError: No module named xgboost</code>\nCan anyone help me?</p>\n"}, {"tags": ["python", "debugging", "numpy", "append", "pycharm"], "answers": [{"tags": [], "owner": {"reputation": 8788, "user_id": 2236401, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/06a91e6a7b9d4c46e5a39e18a5491a93?s=128&d=identicon&r=PG", "display_name": "sedavidw", "link": "https://stackoverflow.com/users/2236401/sedavidw"}, "is_accepted": true, "score": 3, "last_activity_date": 1458156969, "last_edit_date": 1458156969, "creation_date": 1458156384, "answer_id": 36045200, "question_id": 36045075, "link": "https://stackoverflow.com/questions/36045075/why-does-the-pycharm-debugger-and-the-python-running-program-give-two-different/36045200#36045200", "title": "Why does the Pycharm debugger and the python running program give two different results after append?", "body": "<p><a href=\"http://www.tutorialspoint.com/python/list_append.htm\" rel=\"nofollow\"><code>append</code></a> is an inplace action (and returns <code>None</code>).  You don't need to do reassignment.  The first time you do</p>\n\n<pre><code>arrRegion_masks = arrRegion_masks.append(arrRegion_mask)\n</code></pre>\n\n<p><code>arrRegion_masks</code> gets the new value appended, but then <code>append</code> returns <code>None</code> and you assign it to <code>arrRegion_masks</code>.  So now <code>arrRegion_masks</code> is <code>None</code> and the next time through the loop you try to use <code>append</code> again (causing your error) </p>\n\n<p>Just do</p>\n\n<pre><code>arrRegion_masks.append(arrRegion_mask)\n</code></pre>\n"}], "owner": {"reputation": 2166, "user_id": 2734863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b1edbcba419dd480d29a80ea3c9674c4?s=128&d=identicon&r=PG", "display_name": "Frikster", "link": "https://stackoverflow.com/users/2734863/frikster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 471, "favorite_count": 0, "accepted_answer_id": 36045200, "answer_count": 1, "score": 0, "last_activity_date": 1458156969, "creation_date": 1458156002, "question_id": 36045075, "link": "https://stackoverflow.com/questions/36045075/why-does-the-pycharm-debugger-and-the-python-running-program-give-two-different", "title": "Why does the Pycharm debugger and the python running program give two different results after append?", "body": "<p>I don't understand. For identical situations can the debugging console and running program return different results? How?</p>\n\n<pre><code>    arrRegion_masks = []\n    test = []\n    for image_stack in videoData:\n        for i in xrange(numROIs):\n            roi = self.vb.rois[i]\n            arrRegion_mask   = roi.getROIMask(image_stack,self.vb.img, axes=(0,1)) ## BREAKPOINT HERE\n            arrRegion_masks = arrRegion_masks.append(arrRegion_mask)\n</code></pre>\n\n<p>I have a breakpoint at the call to retrieve the mask. <code>ArrRegion_mask</code> is returned and is simply a 2D numpy array that looks as follows:</p>\n\n<pre><code>&gt;&gt;&gt; arrRegion_mask\narray([[ 0.,  0.,  0., ...,  0.,  0.,  0.],\n       [ 0.,  0.,  0., ...,  0.,  0.,  0.],\n       [ 0.,  0.,  0., ...,  0.,  0.,  0.],\n       ..., \n       [ 0.,  0.,  0., ...,  0.,  0.,  0.],\n       [ 0.,  0.,  0., ...,  0.,  0.,  0.],\n       [ 0.,  0.,  0., ...,  0.,  0.,  0.]])\n</code></pre>\n\n<p>Then if I step past the next line to append this to <code>arrRegion_masks</code> it becomes <code>None</code> which then leads to </p>\n\n<pre><code>  File \"/home/cornelis/PycharmProjects/BMDanalyse/BMDanalyse/BMDanalyse.py\", line 343, in getBMD\n    arrRegion_masks = arrRegion_masks.append(arrRegion_mask)\nAttributeError: 'NoneType' object has no attribute 'append'\n</code></pre>\n\n<p>I also get this when not in debugging mode.</p>\n\n<p>Why is this especially confusing? Because while I am at the breakpoint and in my debugger I can bring up the python prompt and do the following and get exactly what I'd expect</p>\n\n<pre><code>&gt;&gt;&gt; test = test.append(arrRegion_mask)\n&gt;&gt;&gt; test\n[array([[ 0.,  0.,  0., ...,  0.,  0.,  0.],\n       [ 0.,  0.,  0., ...,  0.,  0.,  0.],\n       [ 0.,  0.,  0., ...,  0.,  0.,  0.],\n       ..., \n       [ 0.,  0.,  0., ...,  0.,  0.,  0.],\n       [ 0.,  0.,  0., ...,  0.,  0.,  0.],\n       [ 0.,  0.,  0., ...,  0.,  0.,  0.]])]\n</code></pre>\n\n<p>So the debugger and my running code give <strong>different</strong> results for <em>identical situations</em>? This is extremely disturbing to me as it means I must not be understanding something quite fundamental as I had always thought this shouldn't. Please help explain it to me.</p>\n"}, {"tags": ["python", "string"], "answers": [{"comments": [{"owner": {"reputation": 193, "user_id": 4644729, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/RMc6v.png?s=128&g=1", "display_name": "gatto", "link": "https://stackoverflow.com/users/4644729/gatto"}, "edited": false, "score": 0, "creation_date": 1458157038, "post_id": 36045110, "comment_id": 59739248, "body": "Great, thanks! Possibly could you tell me that will it work if there is no chars after the numbers? I mean there is no upcoming char or there is a whitespace."}, {"owner": {"reputation": 23605, "user_id": 1016216, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/xF5Ew.png?s=128&g=1", "display_name": "L3viathan", "link": "https://stackoverflow.com/users/1016216/l3viathan"}, "reply_to_user": {"reputation": 193, "user_id": 4644729, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/RMc6v.png?s=128&g=1", "display_name": "gatto", "link": "https://stackoverflow.com/users/4644729/gatto"}, "edited": false, "score": 1, "creation_date": 1458157586, "post_id": 36045110, "comment_id": 59739593, "body": "Whitespace worked like this already, I fixed the &quot;no upcoming char&quot; thing in an edit."}], "tags": [], "owner": {"reputation": 23605, "user_id": 1016216, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/xF5Ew.png?s=128&g=1", "display_name": "L3viathan", "link": "https://stackoverflow.com/users/1016216/l3viathan"}, "is_accepted": true, "score": 5, "last_activity_date": 1458157576, "last_edit_date": 1458157576, "creation_date": 1458156134, "answer_id": 36045110, "question_id": 36045059, "link": "https://stackoverflow.com/questions/36045059/string-between-string-and-the-next-char-that-is-not-a-number/36045110#36045110", "title": "String between string and the next char that is not a number", "body": "<p>Use regular expressions!</p>\n\n<pre><code>&gt;&gt;&gt; import re\n&gt;&gt;&gt; s = \"sampleStringWithNumber/obj3453andBlabla\"\n&gt;&gt;&gt; re.search(r'/(.*?\\d+)', s).group(1)\n'obj3453'\n</code></pre>\n\n<p>The regular expression <code>/(.*?\\d+)</code> searches for a slash, followed by a group that consists of any sequence of characters (non-greedy): <code>.*?</code>, followed by any number of digits: <code>\\d+</code>.</p>\n\n<p><code>re.search</code> returns a match object (or None), and the first <code>.group</code> will be the result. In real code, you should probably first test if anything was found at all.</p>\n"}], "owner": {"reputation": 193, "user_id": 4644729, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/RMc6v.png?s=128&g=1", "display_name": "gatto", "link": "https://stackoverflow.com/users/4644729/gatto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 36045110, "answer_count": 1, "score": 2, "last_activity_date": 1458157576, "creation_date": 1458155958, "question_id": 36045059, "link": "https://stackoverflow.com/questions/36045059/string-between-string-and-the-next-char-that-is-not-a-number", "title": "String between string and the next char that is not a number", "body": "<p>I have a string like this:</p>\n\n<pre><code>rawString \"sampleStringWithNumber/obj3453andBlabla\"\n</code></pre>\n\n<p>And I would like to achieve this:</p>\n\n<pre><code>newString = \"obj3453\"\n</code></pre>\n\n<p>I know there is a lot of relevant question, and it wouldn't  be a problem if the next character after the <code>obj3453</code> would be static, but unfortunately the next char can be any letter (word) and there can be also more/less than 4 numbers. </p>\n\n<p>So is it possible to do something like this:</p>\n\n<pre><code> def find_between( s, first, last ):\n    try:\n        start = s.index( first ) + len( first )\n        end = s.index( last, start )\n        return s[start:end]\n    except ValueError:\n        return \"\"\n\n\nprint ((find_between(rawString, \"/\",\"the_next_string_thats_not_a_number\")))\n</code></pre>\n\n<p>Basically I would like to pass a variable as the second argument that can be anything except a number.      </p>\n"}, {"tags": ["python", "django", "django-models", "getattr"], "comments": [{"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 1, "creation_date": 1458156171, "post_id": 36045006, "comment_id": 59738688, "body": "You should be able to get a property via <code>getattr</code> just fine.  Is <code>total_sales</code> defined on the <code>SalesSummaryView</code> class or something else?"}, {"owner": {"reputation": 5085, "user_id": 4928578, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh6.googleusercontent.com/-EpzHYcRgyKs/AAAAAAAAAAI/AAAAAAAAJzA/Wa-_KCLFdJY/photo.jpg?sz=128", "display_name": "Adam Starrh", "link": "https://stackoverflow.com/users/4928578/adam-starrh"}, "reply_to_user": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1458156246, "post_id": 36045006, "comment_id": 59738731, "body": "It&#39;s defined on my model, which is why this wasn&#39;t working. I had gotten confused. I posted an answer."}], "answers": [{"tags": [], "owner": {"reputation": 5085, "user_id": 4928578, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh6.googleusercontent.com/-EpzHYcRgyKs/AAAAAAAAAAI/AAAAAAAAJzA/Wa-_KCLFdJY/photo.jpg?sz=128", "display_name": "Adam Starrh", "link": "https://stackoverflow.com/users/4928578/adam-starrh"}, "is_accepted": true, "score": 0, "last_activity_date": 1458156190, "creation_date": 1458156190, "answer_id": 36045127, "question_id": 36045006, "link": "https://stackoverflow.com/questions/36045006/django-use-getattr-to-retrieve-model-method-property/36045127#36045127", "title": "Django - Use getattr() to retrieve Model Method (@property)", "body": "<p>Got it! I was calling getattr() on the view, rather than the model. Instead of using self, I needed to submit the <code>sale</code> object.</p>\n\n<pre><code>for invoice in invoice_set:\n    for sale in invoice.salesrecord_set.all():\n        total += getattr(sale, variable)\n</code></pre>\n"}], "owner": {"reputation": 5085, "user_id": 4928578, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh6.googleusercontent.com/-EpzHYcRgyKs/AAAAAAAAAAI/AAAAAAAAJzA/Wa-_KCLFdJY/photo.jpg?sz=128", "display_name": "Adam Starrh", "link": "https://stackoverflow.com/users/4928578/adam-starrh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 704, "favorite_count": 0, "accepted_answer_id": 36045127, "answer_count": 1, "score": 2, "last_activity_date": 1458156190, "creation_date": 1458155759, "question_id": 36045006, "link": "https://stackoverflow.com/questions/36045006/django-use-getattr-to-retrieve-model-method-property", "title": "Django - Use getattr() to retrieve Model Method (@property)", "body": "<p>I would like to do this:</p>\n\n<pre><code>def retrieve_data(self, variable):\n    start_date = datetime.date.today() - datetime.timedelta(int(self.kwargs['days']))\n    invoice_set = InvoiceRecord.objects.filter(sale_date__gte=start_date)\n    total = 0\n    for invoice in invoice_set:\n        for sale in invoice.salesrecord_set.all():\n            total += getattr(self, variable)\n    return round(total)\n</code></pre>\n\n<p>Where variable is submitted as a string that represents one of my model methods:</p>\n\n<pre><code>@property\ndef total_sale(self):\n    return self.sales_price * self.sales_qty\n</code></pre>\n\n<p>But my effort doesn't work:</p>\n\n<pre><code>def total_sales(self):\n    return self.retrieve_data(variable=\"total_sale\")\n</code></pre>\n\n<p>It simply says: </p>\n\n<blockquote>\n  <p>'SalesSummaryView' object has no attribute 'total_sale'</p>\n</blockquote>\n\n<p>Evidently, I am misunderstanding the usage. Can someone help me figure out a way to accomplish this goal?</p>\n"}, {"tags": ["python", "linux", "opencv", "ubuntu", "python-3.5"], "answers": [{"tags": [], "owner": {"reputation": 683, "user_id": 3598726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kpm0C.png?s=128&g=1", "display_name": "user3598726", "link": "https://stackoverflow.com/users/3598726/user3598726"}, "is_accepted": true, "score": 4, "last_activity_date": 1458507206, "last_edit_date": 1458507206, "creation_date": 1458506863, "answer_id": 36119379, "question_id": 36044991, "link": "https://stackoverflow.com/questions/36044991/unable-to-install-opencv-3-1-with-python-3-5-works-with-2-7-only/36119379#36119379", "title": "Unable to install opencv 3.1 with python 3.5, works with 2.7 only", "body": "<p>I managed to do it thanks to this site: <a href=\"https://rivercitylabs.org/up-and-running-with-opencv3-and-python-3-anaconda-edition/\" rel=\"nofollow\">https://rivercitylabs.org/up-and-running-with-opencv3-and-python-3-anaconda-edition/</a> .\nThe solution was :</p>\n\n<pre><code>conda install -c https://conda.binstar.org/menpo opencv3\n</code></pre>\n\n<p>Somehow I did not think, that anaconda offers opencv binaries. Great stuff</p>\n"}], "owner": {"reputation": 683, "user_id": 3598726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kpm0C.png?s=128&g=1", "display_name": "user3598726", "link": "https://stackoverflow.com/users/3598726/user3598726"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1075, "favorite_count": 3, "accepted_answer_id": 36119379, "answer_count": 1, "score": 2, "last_activity_date": 1458507206, "creation_date": 1458155707, "question_id": 36044991, "link": "https://stackoverflow.com/questions/36044991/unable-to-install-opencv-3-1-with-python-3-5-works-with-2-7-only", "title": "Unable to install opencv 3.1 with python 3.5, works with 2.7 only", "body": "<p>Today I installed python 3.5.1 with miniconda on ubuntu 15.10, it works fine. I tried to install opencv 3, so I completed task 1, and 2 from this site <a href=\"https://help.ubuntu.com/community/OpenCV\" rel=\"nofollow\">https://help.ubuntu.com/community/OpenCV</a>\nand ran this command too: sudo apt-get install python-opencv.</p>\n\n<p>After that if I tried to run python 3.5.1 with an script using opencv in terminal I got this message : <strong>Import error: no module named 'cv2'</strong>, but if I run it using sublime text, it works fine, I printed the version, so I found out sublime text uses  python 2.7.10.</p>\n\n<p>How can I make opencv work with python 3.5.1? I did not install python 2.7.10,and I am new to linux. If I type python into terminal it uses 3.5.1, so thats good, and I can change the sublime text too, thats not the problem. Any help is appreciated :)</p>\n"}, {"tags": ["python", "django", "django-rest-framework", "amazon-elastic-beanstalk"], "answers": [{"comments": [{"owner": {"reputation": 653, "user_id": 2141706, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4247fa3b7a9b22c1bbf1c48ddd41b41c?s=128&d=identicon&r=PG", "display_name": "gregdevs", "link": "https://stackoverflow.com/users/2141706/gregdevs"}, "edited": false, "score": 1, "creation_date": 1458162770, "post_id": 36045413, "comment_id": 59742649, "body": "Thanks alot. The <code>chmod</code> command created my www directory with the static files and I zipped that up and re-deployed."}], "tags": [], "owner": {"reputation": 9448, "user_id": 2046858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/b8SUS.jpg?s=128&g=1", "display_name": "Aswin Murugesh", "link": "https://stackoverflow.com/users/2046858/aswin-murugesh"}, "is_accepted": true, "score": 1, "last_activity_date": 1458157099, "creation_date": 1458157099, "answer_id": 36045413, "question_id": 36044972, "link": "https://stackoverflow.com/questions/36044972/elastic-beanstalk-app-is-returning-403-not-found-error-for-static-files/36045413#36045413", "title": "elastic beanstalk - app is returning 403 not found error for static files", "body": "<p>In django, you can group all the static files from different directories, which you specify in the <code>STATICFILES_DIRS</code> variable. </p>\n\n<p>There is a command called <code>python manage.py collectstatic</code>, that does the above job of copying all the static files in STATICFILES_DIRS, and also the static files related to the admin panel, and in this case, your Rest Framework related static files. All the static files are copied to a directory which you would have mentioned as <code>STATIC_ROOT</code> in your django settings file.</p>\n\n<p>Now 2 things have to be made sure by you:</p>\n\n<pre><code>1) You run the python manage.py collectstatic command\n2) Do a chmod -R 777 /path/to/static_root\n</code></pre>\n\n<p>You get 403 because the web server cannot access your static file, since it is denied the permission to read the file. Doing a chmod 777 gives the permission to read (and write and execute ) the static file, which should clear your problem.</p>\n"}], "owner": {"reputation": 653, "user_id": 2141706, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4247fa3b7a9b22c1bbf1c48ddd41b41c?s=128&d=identicon&r=PG", "display_name": "gregdevs", "link": "https://stackoverflow.com/users/2141706/gregdevs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1073, "favorite_count": 0, "accepted_answer_id": 36045413, "answer_count": 1, "score": 0, "last_activity_date": 1458157099, "creation_date": 1458155669, "question_id": 36044972, "link": "https://stackoverflow.com/questions/36044972/elastic-beanstalk-app-is-returning-403-not-found-error-for-static-files", "title": "elastic beanstalk - app is returning 403 not found error for static files", "body": "<p>Deploying a Django app to Beanstalk this week for the first time and I successfully deployed the app, however some of the <code>static</code> files are returning a 403 forbidden error. I'm using <a href=\"http://www.django-rest-framework.org/\" rel=\"nofollow\">Django Rest Framework</a> which is installed as dependency. Most of the static files that are 403-ing are from the Django Rest package.</p>\n\n<p>here is what i am seeing in the log</p>\n\n<pre><code>[Wed Mar 16 18:37:03.034730 2016] [authz_core:error] [pid 8842] [client 172.31.40.112:57965] AH01630: client denied by server configuration: /static, referer: {APPURL}.elasticbeanstalk.com/\n</code></pre>\n\n<p>my static properties in <strong>settings.py:</strong></p>\n\n<pre><code> STATIC_URL = '/static/'\n</code></pre>\n\n<p><strong>django.config</strong></p>\n\n<pre><code>option_settings:\n  aws:elasticbeanstalk:container:python:\n    WSGIPath: hungryapp/wsgi.py   \n  aws:elasticbeanstalk:container:python:staticfiles:\n    /static/: /static/  \n</code></pre>\n"}, {"tags": ["python", "apache", "python-2.7", "mamp", "web.py"], "comments": [{"owner": {"reputation": 59735, "user_id": 1350899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a42186174515a63b8058100a736252f?s=128&d=identicon&r=PG", "display_name": "mata", "link": "https://stackoverflow.com/users/1350899/mata"}, "edited": false, "score": 0, "creation_date": 1458161682, "post_id": 36044957, "comment_id": 59742026, "body": "&quot;<i>I have installed web.py in my system.</i>&quot; - how? where? if the server is running as a different user, check that that user is allowed to acces the install location, and that the install directory is in <code>sys.path</code>"}, {"owner": {"reputation": 9721, "user_id": 899573, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/A8hqI.jpg?s=128&g=1", "display_name": "Johnykutty", "link": "https://stackoverflow.com/users/899573/johnykutty"}, "reply_to_user": {"reputation": 59735, "user_id": 1350899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a42186174515a63b8058100a736252f?s=128&d=identicon&r=PG", "display_name": "mata", "link": "https://stackoverflow.com/users/1350899/mata"}, "edited": false, "score": 0, "creation_date": 1458162087, "post_id": 36044957, "comment_id": 59742241, "body": "@mata running on a Macbook pro, and under same User"}, {"owner": {"reputation": 9721, "user_id": 899573, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/A8hqI.jpg?s=128&g=1", "display_name": "Johnykutty", "link": "https://stackoverflow.com/users/899573/johnykutty"}, "reply_to_user": {"reputation": 59735, "user_id": 1350899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a42186174515a63b8058100a736252f?s=128&d=identicon&r=PG", "display_name": "mata", "link": "https://stackoverflow.com/users/1350899/mata"}, "edited": false, "score": 0, "creation_date": 1458237224, "post_id": 36044957, "comment_id": 59782567, "body": "@mata I am new to python, can you say how to install python modules for the MAMP"}], "owner": {"reputation": 9721, "user_id": 899573, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/A8hqI.jpg?s=128&g=1", "display_name": "Johnykutty", "link": "https://stackoverflow.com/users/899573/johnykutty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 458, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1458280756, "creation_date": 1458155618, "last_edit_date": 1458280756, "question_id": 36044957, "link": "https://stackoverflow.com/questions/36044957/importerror-no-module-named-web-python-in-mamp", "title": "ImportError: No module named web - python in MAMP", "body": "<p>I am running an apache server with MAMP in my Macbook pro. And I have added a python file named <code>File.py</code> to the CGI-Executable directory. </p>\n\n<p>Contents of <code>File.py</code>:</p>\n\n<pre><code>#!/usr/bin/python\n\nimport web\nimport json\nfrom xml.etree.ElementTree import Element, SubElement, Comment, tostring\n\n\nurls = (\n        '/json', 'get_json'\n        )\napp = web.application(urls, globals())\nclass get_json:\n    def GET(self):\n        pyDict = {'one':1,'two':2}\n        web.header('Content-Type', 'application/json')\n        return json.dumps(pyDict)\n\nif __name__ == \"__main__\":\n    app.run()\n</code></pre>\n\n<p>I have installed <code>web.py</code> (by running <code>pip install web.py</code>) in my Mac. Now when I go to browser and enter <code>http://localhost:8888/cgi-bin/File.py/json</code> it is showing error 500 internal error, I checked the log file, log is</p>\n\n<pre><code>[Thu Mar 17 00:31:20 2016] [error] [client ::1] Traceback (most recent call last):\n[Thu Mar 17 00:31:20 2016] [error] [client ::1]   File \" path-to-CGI-Executables/File.py\", line 3, in &lt;module&gt;\n[Thu Mar 17 00:31:20 2016] [error] [client ::1]     import web\n[Thu Mar 17 00:31:20 2016] [error] [client ::1] ImportError: No module named web\n[Thu Mar 17 00:31:20 2016] [error] [client ::1] Premature end of script headers: File.py\n</code></pre>\n\n<p>Now I tried running the python file from terminal like</p>\n\n<pre><code>$ python File.py 127.0.0.1\n</code></pre>\n\n<p>Then in browser <code>http://127.0.0.1:8080/json</code> its working fine and showing <code>{\"two\": 2, \"one\": 1}</code> as result.</p>\n\n<p>Whats happening if I add this to MAMP CGI? How to make installed modules available within MAMP?</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>MAMP version : Version 3.5 (3.5) </p>\n\n<p>Python version : Python 2.7.11 Mac</p>\n\n<p>OS X version : 10.10.5 (14F1605)</p>\n"}]