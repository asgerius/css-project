[{"tags": ["python", "pyqt", "pyqt5", "qtablewidget", "qcombobox"], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 1, "last_activity_date": 1546475288, "last_edit_date": 1546475288, "creation_date": 1546474676, "answer_id": 54014853, "question_id": 54014730, "link": "https://stackoverflow.com/questions/54014730/reading-text-value-from-qtablewidget-and-assign-automatically-to-qcombobox/54014853#54014853", "title": "Reading text value from Qtablewidget and assign automatically to Qcombobox", "body": "<p>In this it is better to pass as a model so that it is automatically updated without the unnecessary use of signals. But since you want no empty elements to be displayed, use QSortFilterProxyModel with an <a href=\"https://www.regextester.com/98264\" rel=\"nofollow noreferrer\">appropriate regex</a>:</p>\n\n<pre><code>from PyQt5 import QtCore, QtWidgets\n\nclass Window(QtWidgets.QWidget):\n    def __init__(self):\n        super(Window, self).__init__()\n        self.table = QtWidgets.QTableWidget(10, 2)\n        names = ['Name 1', 'Name 2', 'Name 3', 'Name 4', 'Name 5']\n        for index, name in enumerate(names):\n            self.table.setItem(index, 0, QtWidgets.QTableWidgetItem(name))\n\n        proxy = QtCore.QSortFilterProxyModel(self)\n        proxy.setSourceModel(self.table.model())\n        proxy.setFilterRegExp(r\"^(?!\\s*$).+\")\n\n        self.comboBox = QtWidgets.QComboBox()\n        self.comboBox.setModel(proxy)\n        self.comboBox.setModelColumn(0)\n\n        layout = QtWidgets.QVBoxLayout(self)\n        layout.addWidget(self.table)\n        layout.addWidget(self.comboBox)\n\nif __name__ == '__main__':\n    import sys\n    app = QtWidgets.QApplication(sys.argv)\n    window = Window()\n    window.setGeometry(600, 200, 300, 300)\n    window.show()\n    sys.exit(app.exec_())\n</code></pre>\n"}], "owner": {"reputation": 429, "user_id": 10295907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z31fH.jpg?s=128&g=1", "display_name": "Pavel.D", "link": "https://stackoverflow.com/users/10295907/pavel-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 54014853, "answer_count": 1, "score": 1, "last_activity_date": 1546475288, "creation_date": 1546473523, "last_edit_date": 1546474779, "question_id": 54014730, "link": "https://stackoverflow.com/questions/54014730/reading-text-value-from-qtablewidget-and-assign-automatically-to-qcombobox", "title": "Reading text value from Qtablewidget and assign automatically to Qcombobox", "body": "<p>I have a <code>QTableWidget</code> and a <code>Qcombobox</code>. I want to get text values from every single cell in first column <code>1</code> and when ever a user inserts a new value, that would assign and set automatically to <code>Qcombobox</code>. What I mean by every single cell is to get available values, when a cell is empty then do nothing. </p>\n\n<p><strong>Visualization:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/pu1w7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pu1w7.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>from PyQt5 import QtCore, QtWidgets\n\nclass Widget(QtWidgets.QWidget):\n    def __init__(self, parent=None):\n        QtWidgets.QWidget.__init__(self, parent)\n        self.setLayout(QtWidgets.QVBoxLayout())\n        combo = QtWidgets.QComboBox(self)\n        self.layout().addWidget(combo)\n\nclass Window(QtWidgets.QWidget):\n    def __init__(self):\n        super(Window, self).__init__()\n        self.table = QtWidgets.QTableWidget(10, 2, self)\n        self.comboBox = QtWidgets.QComboBox()\n        layout = QtWidgets.QVBoxLayout(self)\n        layout.addWidget(self.table)\n        names = ['Name 1', 'Name 2', 'Name 3', 'Name 4', 'Name 5']\n        for index, name in enumerate(names):\n            self.table.setItem(index, 0, QtWidgets.QTableWidgetItem(name))\n\nclass Layout(QtWidgets.QWidget):\n    def __init__(self, parent=None):\n        super(Layout, self).__init__()\n        self.comb = Widget()\n        self.table = Window()\n\n        layout = QtWidgets.QVBoxLayout(self)\n        layout.addWidget(self.table)\n        layout.addWidget(self.comb)\n\nif __name__ == '__main__':\n\n    import sys\n    app = QtWidgets.QApplication(sys.argv)\n    window = Layout()\n    window.setGeometry(600, 200, 300, 300)\n    window.show()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p>I am not sure about connection and slot solution will give a good choose?</p>\n"}, {"tags": ["python", "facebook", "random"], "comments": [{"owner": {"reputation": 8411, "user_id": 2399775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a2523b23d09e0bfc15d3a77e505271?s=128&d=identicon&r=PG", "display_name": "wpercy", "link": "https://stackoverflow.com/users/2399775/wpercy"}, "edited": false, "score": 1, "creation_date": 1546474103, "post_id": 54014722, "comment_id": 94866672, "body": "can you fix your indentation so we know which blocks are nested where?"}, {"owner": {"reputation": 101, "user_id": 10671943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aRzfS.jpg?s=128&g=1", "display_name": "dehnm", "link": "https://stackoverflow.com/users/10671943/dehnm"}, "reply_to_user": {"reputation": 8411, "user_id": 2399775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a2523b23d09e0bfc15d3a77e505271?s=128&d=identicon&r=PG", "display_name": "wpercy", "link": "https://stackoverflow.com/users/2399775/wpercy"}, "edited": false, "score": 0, "creation_date": 1546475412, "post_id": 54014722, "comment_id": 94866946, "body": "sorry my bad fixed now"}], "owner": {"reputation": 101, "user_id": 10671943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aRzfS.jpg?s=128&g=1", "display_name": "dehnm", "link": "https://stackoverflow.com/users/10671943/dehnm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1546475385, "creation_date": 1546473434, "last_edit_date": 1546475385, "question_id": 54014722, "link": "https://stackoverflow.com/questions/54014722/posting-more-than-one-line-of-text-on-fb-status-python-facebook-api", "title": "posting more than one line of text on fb status [Python] [Facebook API]", "body": "<p>I started this project in the school holidays as a way to keep practising and enhancing my python knowledge. To put it shortly the code is a facebook bot that randomly generates NBA teams, Players and positions which should look like this when run.</p>\n\n<pre><code>Houston Rockets\n\n[PG] Ryan Anderson\n[PF] Michael Curry\n[SF] Marcus Morris\n[C] Bob Royer\n[SF] Brian Heaney\n</code></pre>\n\n<p>I'm currently having trouble when it comes to posting my code to my facebook page where instead of posting 1 team and 5 players/positions the programme will only post 1 single player like this</p>\n\n<pre><code>Ryan Anderson\n</code></pre>\n\n<p>Here is my code</p>\n\n<pre><code>import os\nimport random\nimport facebook\n\ntoken = \"....\"\nfb = facebook.GraphAPI(access_token = token)\n\nparent_dir = \"../NBAbot\"\nos.chdir(parent_dir)\nfile_name = \"nba_players.txt\"\n\ndef random_position():\n    \"\"\"Random Team from list\"\"\"\n    position = ['[PG]','[SG]','[SF]','[PF]','[C]',]\n    random.shuffle(position)\n    position = position.pop()\n    return(position)\n\ndef random_team():\n    \"\"\"Random Team from list\"\"\"\n    Team = ['Los Angeles Lakers','Golden State Warriors','Toronto Raptors','Boston Celtics','Cleveland Cavaliers','Houston Rockets','San Antonio Spurs','New York Knicks','Chicago Bulls','Minnesota Timberwolves','Philadelphia 76ers','Miami Heat','Milwaukee','Portland Trail Blazers','Dallas Mavericks','Phoenix Suns','Denver Nuggets','Utah Jazz','Indiana Pacers','Los Angeles Clippers','Washington Wizards','Brooklyn Nets','New Orleans Pelicans','Sacramento Kings','Atlanta Hawks','Detroit Pistons','Memphis Grizzlies','Charlotte Hornets','Orlando Magic']\n    random.shuffle(Team)\n    Team = Team.pop()\n    return(Team)\n\ndef random_player(datafile):\n    read_mode = \"r\"\n    with open (datafile, read_mode) as read_file:\n        the_line = read_file.readlines()\n        return(random.choice(the_line))\n\ndef main():\n    return(\n        random_team(),\n        random_position(),\n        random_player(file_name),\n        random_position(),\n        random_player(file_name),\n        random_position(),\n        random_player(file_name),\n        random_position(),\n        random_player(file_name),\n        random_position(),\n        random_player(file_name))\n\nfb.put_object(parent_object=\"me\", connection_name='feed', message=main())\n</code></pre>\n\n<p>any help is appreciated.</p>\n"}, {"tags": ["python", "pandas", "dataframe", "assign"], "comments": [{"owner": {"reputation": 270, "user_id": 6503670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e91c7f871e936bfcd3c5bdab2acdc6a7?s=128&d=identicon&r=PG&f=1", "display_name": "GingerBadger", "link": "https://stackoverflow.com/users/6503670/gingerbadger"}, "edited": false, "score": 0, "creation_date": 1546473308, "post_id": 54014687, "comment_id": 94866506, "body": "I understand how to do this by first turning the dictionary into a dataframe and then merge&#39;ing it with the first. However, this gets very slow if the first dataframe (test) is much larger than its portion that I wish to modify."}, {"owner": {"reputation": 5598, "user_id": 6256482, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cbb61d1374b0c24127b13bccc2f7e586?s=128&d=identicon&r=PG&f=1", "display_name": "KenHBS", "link": "https://stackoverflow.com/users/6256482/kenhbs"}, "edited": false, "score": 1, "creation_date": 1546475440, "post_id": 54014687, "comment_id": 94866954, "body": "I think transforming your dictionary into a dataframe using <code>pd.from_dict(your_dictionary)</code> and then merging with <code>input_b</code> seems to me like the best solution. I would be surprised if there is a better solution."}], "answers": [{"tags": [], "owner": {"reputation": 562, "user_id": 8378726, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/buBRk.jpg?s=128&g=1", "display_name": "Pasa", "link": "https://stackoverflow.com/users/8378726/pasa"}, "is_accepted": false, "score": 3, "last_activity_date": 1546474545, "last_edit_date": 1546474545, "creation_date": 1546473627, "answer_id": 54014740, "question_id": 54014687, "link": "https://stackoverflow.com/questions/54014687/populate-pandas-dataframe-using-a-dictionary-based-on-a-condition/54014740#54014740", "title": "Populate Pandas DataFrame using a dictionary based on a condition", "body": "<p>This may not be the most efficient solution, but from what I understand it got the job done:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\ntest = pd.DataFrame({'A': ['a', 'b', 'b', 'b'], 'B': [1, 2, 3, 4],\n                     'C': [np.nan, np.nan, np.nan, np.nan], \n                     'D': [np.nan, np.nan, np.nan, np.nan]})\n\n\ninput_b = {2: ['Moon', 'Elephant'], 4: ['Sun', 'Mouse']}\n\n\nfor key, value in input_b.items():\n    test.loc[test['B'] == key, ['C', 'D']] = value\n\nprint(test)\n</code></pre>\n\n<p>Yields:</p>\n\n<pre><code>   A  B     C         D\n0  a  1   NaN       NaN\n1  b  2  Moon  Elephant\n2  b  3   NaN       NaN\n3  b  4   Sun     Mouse\n</code></pre>\n\n<p>This will get slower if the dictionary <code>input_b</code> gets too large (too many rows are being updated, too many iterations in the for loop), but should be relatively fast with small <code>input_b</code>'s even with large <code>test</code> dataframes.</p>\n\n<p>This answer also assumes the keys in the <code>input_b</code> dictionary refer to the values of the <code>B</code> column in the original dataframe, and will add repeated values in the <code>C</code> and <code>D</code> columns for repeated values in the <code>B</code> column.</p>\n"}, {"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 1, "last_activity_date": 1546476173, "creation_date": 1546476173, "answer_id": 54014998, "question_id": 54014687, "link": "https://stackoverflow.com/questions/54014687/populate-pandas-dataframe-using-a-dictionary-based-on-a-condition/54014998#54014998", "title": "Populate Pandas DataFrame using a dictionary based on a condition", "body": "<p>Using <code>update</code> </p>\n\n<pre><code>test=test.set_index('B')\ntest.update(pd.DataFrame(input_b,index=['C','D']).T)\ntest=test.reset_index()\ntest\n   B  A     C         D\n0  1  a   NaN       NaN\n1  2  b  Moon  Elephant\n2  3  b   NaN       NaN\n3  4  b   Sun     Mouse\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 1, "last_activity_date": 1546476859, "creation_date": 1546476859, "answer_id": 54015058, "question_id": 54014687, "link": "https://stackoverflow.com/questions/54014687/populate-pandas-dataframe-using-a-dictionary-based-on-a-condition/54015058#54015058", "title": "Populate Pandas DataFrame using a dictionary based on a condition", "body": "<p>You can use <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.loc.html\" rel=\"nofollow noreferrer\"><code>loc</code></a> indexing after setting your index to <code>B</code>:</p>\n\n<pre><code>test = test.set_index('B')\ntest.loc[input_b, ['C', 'D']] = list(input_b.values())\ntest = test.reset_index()\n\nprint(test)\n\n   B  A     C         D\n0  1  a   NaN       NaN\n1  2  b  Moon  Elephant\n2  3  b   NaN       NaN\n3  4  b   Sun     Mouse\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 176, "user_id": 1936114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aad7e49b89fa4211d884fc06c9284d7b?s=128&d=identicon&r=PG", "display_name": "raninjan", "link": "https://stackoverflow.com/users/1936114/raninjan"}, "is_accepted": true, "score": 1, "last_activity_date": 1546478097, "creation_date": 1546478097, "answer_id": 54015175, "question_id": 54014687, "link": "https://stackoverflow.com/questions/54014687/populate-pandas-dataframe-using-a-dictionary-based-on-a-condition/54015175#54015175", "title": "Populate Pandas DataFrame using a dictionary based on a condition", "body": "<p>Using <code>apply</code></p>\n\n<pre><code>test['C'] = test['B'].map(input_b).apply(lambda x: x[0] if type(x)==list else x)\ntest['D'] = test['B'].map(input_b).apply(lambda x: x[1] if type(x)==list else x)\n</code></pre>\n\n<p>yields</p>\n\n<pre><code>   A  B     C         D\n0  a  1   NaN       NaN\n1  b  2  Moon  Elephant\n2  b  3   NaN       NaN\n3  b  4   Sun     Mouse\n</code></pre>\n"}], "owner": {"reputation": 270, "user_id": 6503670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e91c7f871e936bfcd3c5bdab2acdc6a7?s=128&d=identicon&r=PG&f=1", "display_name": "GingerBadger", "link": "https://stackoverflow.com/users/6503670/gingerbadger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1355, "favorite_count": 1, "accepted_answer_id": 54015175, "answer_count": 4, "score": 1, "last_activity_date": 1546478097, "creation_date": 1546473142, "last_edit_date": 1546476410, "question_id": 54014687, "link": "https://stackoverflow.com/questions/54014687/populate-pandas-dataframe-using-a-dictionary-based-on-a-condition", "title": "Populate Pandas DataFrame using a dictionary based on a condition", "body": "<p>I have a DataFrame</p>\n\n<pre><code>&gt;&gt; test = pd.DataFrame({'A': ['a', 'b', 'b', 'b'], 'B': [1, 2, 3, 4], 'C': [np.nan, np.nan, np.nan, np.nan], 'D': [np.nan, np.nan, np.nan, np.nan]})\n    A   B   C   D\n0   a   1       \n1   b   2       \n2   b   3       \n3   b   4       \n</code></pre>\n\n<p>I also have a dictionary, where <code>b</code> in <code>input_b</code> signifies that I'm only modifying rows where <code>row.A = b</code>. </p>\n\n<pre><code>&gt;&gt; input_b = {2: ['Moon', 'Elephant'], 4: ['Sun', 'Mouse']}\n</code></pre>\n\n<p>How do I populate the DataFrame  with values from the dictionary to get</p>\n\n<pre><code>    A   B   C       D\n0   a   1       \n1   b   2   Moon    Elephant\n2   b   3       \n3   b   4   Sun     Mouse\n</code></pre>\n"}, {"tags": ["python", "selenium", "geckodriver"], "comments": [{"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1546481856, "post_id": 54014683, "comment_id": 94868098, "body": "-11 means a segmentation fault in the child process, if that helps."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "reply_to_user": {"reputation": 7187, "user_id": 1621041, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eWGcV.png?s=128&g=1", "display_name": "finefoot", "link": "https://stackoverflow.com/users/1621041/finefoot"}, "edited": false, "score": 2, "creation_date": 1546483793, "post_id": 54014683, "comment_id": 94868383, "body": "@Jayjayyy: It appears in the <a href=\"https://docs.python.org/3/library/subprocess.html#using-the-subprocess-module\" rel=\"nofollow noreferrer\"><code>subprocess</code> documentation</a>.  (True <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/exit.html\" rel=\"nofollow noreferrer\">exit status values</a> are non-negative, so you know they\u2019re special somehow.)"}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "reply_to_user": {"reputation": 7187, "user_id": 1621041, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eWGcV.png?s=128&g=1", "display_name": "finefoot", "link": "https://stackoverflow.com/users/1621041/finefoot"}, "edited": false, "score": 0, "creation_date": 1546491726, "post_id": 54014683, "comment_id": 94869850, "body": "@Jayjayyy: <code>subprocess</code> <b>represents</b> the termination of a child because of a signal (rather than an <code>exit</code>, which is the only other choice) with a negative number that indicates the signal (and can\u2019t be confused with an exit code).  (Segmentation faults happen during execution, not before it, although one could theoretically happen after <code>fork</code> and before <code>exec</code>.)"}, {"owner": {"reputation": 156, "user_id": 2213383, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/b5923aebd361839381a2c0373a1cc10a?s=128&d=identicon&r=PG", "display_name": "StephenB", "link": "https://stackoverflow.com/users/2213383/stephenb"}, "edited": false, "score": 0, "creation_date": 1546532101, "post_id": 54014683, "comment_id": 94888256, "body": "Thanks guys! How do I fix the segmentation fault for geckodriver.exe?  I tried running &#39;geckodriver --version&#39; through a terminal for the server yesterday, and it came back with the same error: segmentation fault. The permissions for the driver is set to 755."}, {"owner": {"reputation": 8717, "user_id": 3124333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MCMEh.jpg?s=128&g=1", "display_name": "SiKing", "link": "https://stackoverflow.com/users/3124333/siking"}, "edited": false, "score": 0, "creation_date": 1546622901, "post_id": 54014683, "comment_id": 94922469, "body": "Please run <code>file &#47;home&#47;DIRECTORY&#47;DIRECTORY&#47;DIRECTORY&#47;venv&#47;bin&#47;geckodriver</code> and post the output."}, {"owner": {"reputation": 156, "user_id": 2213383, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/b5923aebd361839381a2c0373a1cc10a?s=128&d=identicon&r=PG", "display_name": "StephenB", "link": "https://stackoverflow.com/users/2213383/stephenb"}, "reply_to_user": {"reputation": 8717, "user_id": 3124333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MCMEh.jpg?s=128&g=1", "display_name": "SiKing", "link": "https://stackoverflow.com/users/3124333/siking"}, "edited": false, "score": 0, "creation_date": 1546631910, "post_id": 54014683, "comment_id": 94926133, "body": "@SiKing, I am getting this output: <code>ELF 64-bit LSB executable, x86-64, version 1 (GNU&#47;Linux), statically linked, stripped</code>"}, {"owner": {"reputation": 8717, "user_id": 3124333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MCMEh.jpg?s=128&g=1", "display_name": "SiKing", "link": "https://stackoverflow.com/users/3124333/siking"}, "edited": false, "score": 0, "creation_date": 1546635247, "post_id": 54014683, "comment_id": 94927318, "body": "From your comment above, it sounded as if you might be trying to run a Windows binary on a Linux OS. But that is not the case."}], "answers": [{"tags": [], "owner": {"reputation": 7187, "user_id": 1621041, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eWGcV.png?s=128&g=1", "display_name": "finefoot", "link": "https://stackoverflow.com/users/1621041/finefoot"}, "is_accepted": true, "score": 4, "last_activity_date": 1546651182, "last_edit_date": 1546651182, "creation_date": 1546623229, "answer_id": 54043604, "question_id": 54014683, "link": "https://stackoverflow.com/questions/54014683/selenium-with-firefox-webdriver-results-in-error-service-geckodriver-unexpected/54043604#54043604", "title": "Selenium with Firefox webdriver results in error: Service geckodriver unexpectedly exited. Status code was: -11", "body": "<p>This is at least a partial answer to your question.</p>\n\n<ul>\n<li>Status code <code>-11</code> means that <code>subprocess</code> experiences a segmentation fault. Read more about it at <a href=\"https://stackoverflow.com/questions/18731791/determining-if-a-python-subprocess-segmentation-faults\">Determining if a python subprocess segmentation faults</a></li>\n</ul>\n\n<hr>\n\n<p>In the past, there were some problems with certain versions of Selenium not working well together with certain versions of Firefox and/or geckodriver. Find out your versions, update them to the most recent versions if possible and look for existing bug reports for your versions.</p>\n\n<p>The following versions work well together on my Ubuntu 18.04 LTS Bionic Beaver system:</p>\n\n<ul>\n<li><p>Check Python version</p>\n\n<pre><code>$ python3 --version\nPython 3.6.7\n</code></pre></li>\n<li><p>Check Selenium version</p>\n\n<pre><code>$ python3 -c \"import selenium; print(selenium.__version__)\"\n3.141.0\n</code></pre></li>\n<li><p>Check Firefox version</p>\n\n<pre><code>$ firefox --version\nMozilla Firefox 64.0\n</code></pre></li>\n<li><p>Check geckodriver version</p>\n\n<pre><code>$ geckodriver --version\ngeckodriver 0.23.0 ( 2018-10-04)\n\nThe source code of this program is available from\ntesting/geckodriver in https://hg.mozilla.org/mozilla-central.\n\nThis program is subject to the terms of the Mozilla Public License 2.0.\nYou can obtain a copy of the license at https://mozilla.org/MPL/2.0/.\n</code></pre></li>\n</ul>\n\n<hr>\n\n<p>If you have to browse to a special path to make those commands work and those commands don't work directly in your terminal or virtual environment, you might need to set one of the following keyword arguments in your call to <a href=\"https://seleniumhq.github.io/selenium/docs/api/py/webdriver_firefox/selenium.webdriver.firefox.webdriver.html\" rel=\"nofollow noreferrer\"><code>webdriver.Firefox</code></a>:</p>\n\n<blockquote>\n  <ul>\n  <li><code>firefox_binary</code> \u2013 Instance of FirefoxBinary or full path to the Firefox binary. If undefined, the system default Firefox installation will be used.</li>\n  <li><code>executable_path</code> \u2013 Full path to override which geckodriver binary to use for Firefox 47.0.1 and greater, which defaults to picking up the binary from the system path.</li>\n  </ul>\n</blockquote>\n\n<hr>\n\n<p>Run nothing fancy as a test, but a minimal example of Selenium with Firefox in headless mode only, for example <code>minimal_selenium_test.py</code>:</p>\n\n<pre><code>import selenium.webdriver\n\noptions = selenium.webdriver.FirefoxOptions()\noptions.add_argument(\"--headless\")\n\ndriver = selenium.webdriver.Firefox(firefox_options=options)\ndriver.get('https://www.python.org/')\nprint(driver.title)\ndriver.close()\n</code></pre>\n\n<p>This should work on your local laptop as well as on a virtual server as well as inside a Docker container and should print:</p>\n\n<pre><code>$ python3 minimal_selenium_test.py \nWelcome to Python.org\n</code></pre>\n"}], "owner": {"reputation": 156, "user_id": 2213383, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/b5923aebd361839381a2c0373a1cc10a?s=128&d=identicon&r=PG", "display_name": "StephenB", "link": "https://stackoverflow.com/users/2213383/stephenb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2288, "favorite_count": 2, "accepted_answer_id": 54043604, "answer_count": 1, "score": 5, "last_activity_date": 1546651182, "creation_date": 1546473076, "last_edit_date": 1546636483, "question_id": 54014683, "link": "https://stackoverflow.com/questions/54014683/selenium-with-firefox-webdriver-results-in-error-service-geckodriver-unexpected", "title": "Selenium with Firefox webdriver results in error: Service geckodriver unexpectedly exited. Status code was: -11", "body": "<p>I have been wracking my brain over this. I'm getting the error:</p>\n\n<blockquote>\n  <p>System geckodriver unexpectedly exited. Status code: -11. </p>\n</blockquote>\n\n<p>I am using a Linux server that is a shared hosting web server. I have everything set up in a virtual environment.</p>\n\n<ul>\n<li>Linux Server - CentOS, Release: 7.4.1708</li>\n<li>Selenium version 3.141.0</li>\n<li>geckodriver version 0.23.0</li>\n<li>Firefox 60.3.0</li>\n<li>Python 3.6.2 and cannot use a newer version</li>\n</ul>\n\n<p>Python, Selenium and Geckodriver reside on a virtual environment on a Linux web server. Firefox resides outside of the virtual environment</p>\n\n<pre><code>export PATH=$PATH:/path/to/geckodriver\n</code></pre>\n\n<p>to my terminal to have geckodriver be used in the <code>PATH</code> environment variable.</p>\n\n<p>Below is my code:</p>\n\n<pre><code>#!/home/DIRECTORY/DIRECTORY/DIRECTORY/venv/bin/python\n\n# -*- coding: UTF-8 -*-\nimport cgitb\nimport cgi\nfrom selenium import webdriver\nfrom selenium.webdriver import FirefoxOptions\n\ncgitb.enable()\nprint (\"Content-Type: text/html; charset=utf-8\\n\\n\")\npath = r'/home/DIRECTORY/DIRECTORY/DIRECTORY/venv/bin/geckodriver'\nbinary = FirefoxBinary(r'/usr/lib64/firefox')\n\nopts = FirefoxOptions()\nopts.add_argument(\"--headless\")\n\nbrowser = webdriver.Firefox(firefox_options=opts, firefox_binary=binary, executable_path=path)\nrowser.get(\"http://google.com/\")\nprint (\"Headless Firefox Initialized\")\nbrowser.quit()\n</code></pre>\n\n<p>Here is my traceback error:</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"selen.py\", line 20, in &lt;module&gt;\nbrowser = webdriver.Firefox(firefox_options=opts, executable_path=path)\nFile \"/home/DIRECTORY/DIRECTORY/DIRECTORY/venv/lib/python3.6/site-packages/selenium/webdriver/firefox/webdriver.py\", line 164, in __init__\nself.service.start()\nFile \"/home/DIRECTORY/DIRECTORY/DIRECTORY/venv/lib/python3.6/site-packages/selenium/webdriver/common/service.py\", line 98, in start\nself.assert_process_still_running()\nFile \"/home/DIRECTORY/DIRECTORY/DIRECTORY/venv/lib/python3.6/site-packages/selenium/webdriver/common/service.py\", line 111, in assert_process_still_running\n% (self.path, return_code)\nselenium.common.exceptions.WebDriverException: Message: Service /home/DIRECTORY/DIRECTORY/DIRECTORY/venv/bin/geckodriver unexpectedly exited. Status code was: -11\n</code></pre>\n\n<p>Why am I getting this error and how do I fix it?</p>\n"}, {"tags": ["python", "json", "jsonschema", "json-schema-validator", "python-jsonschema"], "comments": [{"owner": {"reputation": 4446, "user_id": 878701, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/17bdb11f4288601d4ea139a33b268a4d?s=128&d=identicon&r=PG", "display_name": "gregsdennis", "link": "https://stackoverflow.com/users/878701/gregsdennis"}, "edited": false, "score": 0, "creation_date": 1546491822, "post_id": 54014675, "comment_id": 94869869, "body": "What&#39;s the <code>&#39;enum&#39;: [&#39;4&#39;]</code> about?  Are you checking for just a single value, or is this an example?"}, {"owner": {"reputation": 5086, "user_id": 781864, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d52395e895c20f5150917f60c5dad044?s=128&d=identicon&r=PG", "display_name": "Amir", "link": "https://stackoverflow.com/users/781864/amir"}, "reply_to_user": {"reputation": 4446, "user_id": 878701, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/17bdb11f4288601d4ea139a33b268a4d?s=128&d=identicon&r=PG", "display_name": "gregsdennis", "link": "https://stackoverflow.com/users/878701/gregsdennis"}, "edited": false, "score": 0, "creation_date": 1546546947, "post_id": 54014675, "comment_id": 94894839, "body": "yes it is single value (referring you to first json)"}, {"owner": {"reputation": 5086, "user_id": 781864, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d52395e895c20f5150917f60c5dad044?s=128&d=identicon&r=PG", "display_name": "Amir", "link": "https://stackoverflow.com/users/781864/amir"}, "reply_to_user": {"reputation": 4446, "user_id": 878701, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/17bdb11f4288601d4ea139a33b268a4d?s=128&d=identicon&r=PG", "display_name": "gregsdennis", "link": "https://stackoverflow.com/users/878701/gregsdennis"}, "edited": false, "score": 0, "creation_date": 1546547157, "post_id": 54014675, "comment_id": 94894937, "body": "One other thing I learned when I was researching for this issue is that python package jsonschema 2.6.0 does not support contain: <a href=\"https://github.com/Julian/jsonschema/issues/512\" rel=\"nofollow noreferrer\">github.com/Julian/jsonschema/issues/512</a>"}], "answers": [{"tags": [], "owner": {"reputation": 8891, "user_id": 89211, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d8b4889359df45a8c8099ef16bd96be9?s=128&d=identicon&r=PG", "display_name": "Relequestual", "link": "https://stackoverflow.com/users/89211/relequestual"}, "is_accepted": false, "score": 1, "last_activity_date": 1546506845, "creation_date": 1546506845, "answer_id": 54019251, "question_id": 54014675, "link": "https://stackoverflow.com/questions/54014675/jsonschema-validate-by-keys-with-different-name-or-type/54019251#54019251", "title": "jsonschema validate by keys with different name or type", "body": "<p>You'll want to modify your <code>anyOf</code> to <code>oneOf</code> (This won't change anything with your current schema, but makes the intent clearer) and add <code>additionalProperties: false</code> to each of the subschemas.</p>\n\n<p>With your schema, <code>\"item_number\": \"4\"</code> fails validation for anyOf[0], but passes for anyOf[1], because there's no constraint for <code>item_number</code> or properties not defined.</p>\n\n<p><code>additionalProperties: false</code> means that any property not included as a key in <code>properties</code> will cause validation to fail.</p>\n"}], "owner": {"reputation": 5086, "user_id": 781864, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d52395e895c20f5150917f60c5dad044?s=128&d=identicon&r=PG", "display_name": "Amir", "link": "https://stackoverflow.com/users/781864/amir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1546506965, "creation_date": 1546473036, "last_edit_date": 1546506965, "question_id": 54014675, "link": "https://stackoverflow.com/questions/54014675/jsonschema-validate-by-keys-with-different-name-or-type", "title": "jsonschema validate by keys with different name or type", "body": "<p>I am a in a transition from this type of jsons:</p>\n\n<pre><code>{\n    \"id\": 1,\n    \"data\": {\n         \"item_number\": \"4\",\n         ...\n    }\n}\n</code></pre>\n\n<p>to</p>\n\n<pre><code>{\n    \"id\": 1,\n    \"data\": {\n        \"itemNumbers\": [4],\n        ...\n    }\n}\n</code></pre>\n\n<p>and I would need a jsonschema that matched both of these jsons.</p>\n\n<p>And here this is:</p>\n\n<pre><code>{\n  \"properties\": {\n    \"id\": {\n      \"enum\": [\n        1\n      ]\n    },\n    \"data\": {\n      \"anyOf\": [\n        {\n          \"properties\": {\n            \"item_number\": {\n              \"enum\": [\n                \"4\"\n              ]\n            }\n          }\n        },\n        {\n          \"properties\": {\n            \"itemNumbers\": {\n              \"contains\": {\n                \"enum\": [\n                  4\n                ]\n              }\n            }\n          }\n        }\n      ]\n    }\n  },\n  \"required\": [\n    \"id\"\n  ]\n}\n</code></pre>\n\n<p>Using python jsonschema package, it matches all jsons regardless of item number.</p>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["python", "matplotlib", "mplot3d"], "comments": [{"owner": {"reputation": 682, "user_id": 1189239, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/BIJXZ.jpg?s=128&g=1", "display_name": "Alessandro Peca", "link": "https://stackoverflow.com/users/1189239/alessandro-peca"}, "edited": false, "score": 0, "creation_date": 1546503957, "post_id": 54014645, "comment_id": 94873490, "body": "I advice you this post: <a href=\"https://stackoverflow.com/questions/53611716/wrong-overlab-in-bar3d-plot\" title=\"wrong overlab in bar3d plot\">stackoverflow.com/questions/53611716/&hellip;</a> Matplotlib have some issues with the 3D plotting, so pay attention!"}], "answers": [{"comments": [{"owner": {"reputation": 755, "user_id": 7504470, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/1cfdd23a75415989d8473d53bb63de93?s=128&d=identicon&r=PG&f=1", "display_name": "Matt-pow", "link": "https://stackoverflow.com/users/7504470/matt-pow"}, "edited": false, "score": 0, "creation_date": 1546495452, "post_id": 54014937, "comment_id": 94870759, "body": "Thanks for your answer, why is the z not following x and y in ax.bar3d? Also can you explain to me what does the for loop does for _z?"}, {"owner": {"reputation": 8010, "user_id": 10659910, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3zC2tMoc6PA/AAAAAAAAAAI/AAAAAAAAADg/n9BjRO9gFMo/photo.jpg?sz=128", "display_name": "William Miller", "link": "https://stackoverflow.com/users/10659910/william-miller"}, "reply_to_user": {"reputation": 755, "user_id": 7504470, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/1cfdd23a75415989d8473d53bb63de93?s=128&d=identicon&r=PG&f=1", "display_name": "Matt-pow", "link": "https://stackoverflow.com/users/7504470/matt-pow"}, "edited": false, "score": 0, "creation_date": 1546496758, "post_id": 54014937, "comment_id": 94871095, "body": "@Matt-pow I don&#39;t understand your question, the <code>z</code> values in the array are determining the height of the the bar, the <code>x</code> values determine the <code>x</code> position and the <code>y</code> values determine the <code>y</code> position. For <code>x</code> and <code>y</code> pairs that correspond to a common <code>z</code> value you see multiple bars. The values on the <code>y</code> and <code>x</code> axis are a little confusing since the bar <code>1</code> in <code>x</code> actually goes from <code>1</code> to <code>2</code> and <code>8</code> goes from <code>8</code> to <code>9</code>."}, {"owner": {"reputation": 8010, "user_id": 10659910, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3zC2tMoc6PA/AAAAAAAAAAI/AAAAAAAAADg/n9BjRO9gFMo/photo.jpg?sz=128", "display_name": "William Miller", "link": "https://stackoverflow.com/users/10659910/william-miller"}, "reply_to_user": {"reputation": 755, "user_id": 7504470, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/1cfdd23a75415989d8473d53bb63de93?s=128&d=identicon&r=PG&f=1", "display_name": "Matt-pow", "link": "https://stackoverflow.com/users/7504470/matt-pow"}, "edited": false, "score": 0, "creation_date": 1546497464, "post_id": 54014937, "comment_id": 94871290, "body": "@Matt-pow The <code>for</code> loop for <code>_z</code>  converts <code>_z</code>, a shape <code>(10L, )</code> array into <code>z</code> a shape <code>(100L, )</code> array populated by 10 instances of each value"}, {"owner": {"reputation": 755, "user_id": 7504470, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/1cfdd23a75415989d8473d53bb63de93?s=128&d=identicon&r=PG&f=1", "display_name": "Matt-pow", "link": "https://stackoverflow.com/users/7504470/matt-pow"}, "edited": false, "score": 1, "creation_date": 1546551952, "post_id": 54014937, "comment_id": 94896773, "body": "Thanks for the explaination"}], "tags": [], "owner": {"reputation": 8010, "user_id": 10659910, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3zC2tMoc6PA/AAAAAAAAAAI/AAAAAAAAADg/n9BjRO9gFMo/photo.jpg?sz=128", "display_name": "William Miller", "link": "https://stackoverflow.com/users/10659910/william-miller"}, "is_accepted": true, "score": 1, "last_activity_date": 1546475518, "creation_date": 1546475518, "answer_id": 54014937, "question_id": 54014645, "link": "https://stackoverflow.com/questions/54014645/how-to-plot-a-3d-histogram-with-matplotlib-mplot3d/54014937#54014937", "title": "How to plot a 3D histogram with matplotlib/mplot3d?", "body": "<p>The <code>z</code> array must have the same shape not of <code>x</code> and <code>y</code> but of <code>xpos</code> and <code>ypos</code> (which are of themselves the same shape). You may find <a href=\"https://matplotlib.org/gallery/mplot3d/3d_bars.html\" rel=\"nofollow noreferrer\">this example</a> more useful than the one you appear to be <a href=\"https://matplotlib.org/examples/mplot3d/hist3d_demo.html\" rel=\"nofollow noreferrer\">drawing from</a>. The following code is to demonstrate the example in the first link applied to your question,</p>\n\n<pre><code>from mpl_toolkits.mplot3d import Axes3D\nimport matplotlib.pyplot as plt\nimport numpy as np\n\nfig = plt.figure()\nax = fig.add_subplot(111, projection='3d')\n\n_x = [1, 2, 3, 2, 5, 2, 6, 8, 6, 7]\n_y = [10, 10, 20, 50, 20, 20, 30, 10, 40, 50]\n_xx, _yy = np.meshgrid(_x, _y)\nx, y = _xx.ravel(), _yy.ravel()\n_z = np.array([105, 25, 26, 74, 39, 85, 74, 153, 52, 98])\n\n# There may be an easier way to do this, but I am not aware of it\nz = np.zeros(len(x))\nfor i in range(1, len(x)):\n    z[i] = _z[(i*len(_z)) / len(x)]\n\nbottom = np.zeros_like(z)\nwidth = depth = 1\n\nax.bar3d(x, y, bottom, width, depth, z, shade=True)\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/VTKGs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VTKGs.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 755, "user_id": 7504470, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/1cfdd23a75415989d8473d53bb63de93?s=128&d=identicon&r=PG&f=1", "display_name": "Matt-pow", "link": "https://stackoverflow.com/users/7504470/matt-pow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3528, "favorite_count": 0, "accepted_answer_id": 54014937, "answer_count": 1, "score": 4, "last_activity_date": 1546475518, "creation_date": 1546472750, "last_edit_date": 1546474065, "question_id": 54014645, "link": "https://stackoverflow.com/questions/54014645/how-to-plot-a-3d-histogram-with-matplotlib-mplot3d", "title": "How to plot a 3D histogram with matplotlib/mplot3d?", "body": "<p>I have three arrays and I am trying to make a 3D histogram.</p>\n\n<pre><code>x = [1, 2, 3, 2, 5, 2, 6, 8, 6, 7]\ny = [10, 10, 20, 50, 20, 20, 30, 10, 40, 50, 60]\nz = [105, 25, 26, 74, 39, 85, 74, 153, 52, 98]\n</code></pre>\n\n<p>Here's my attempt so far: </p>\n\n<pre><code>from mpl_toolkits.mplot3d import Axes3D\nimport matplotlib.pyplot as plt\nimport numpy as np\nfig = plt.figure()\nax = plt.axes(projection='3d')\n\nbinsOne = sorted(set(x))\nbinsTwo = sorted(set(y))\nhist, xedges, yedges = np.histogram2d(x, y, bins=[binsOne, binsTwo])\nxpos, ypos = np.meshgrid(xedges[:-1] + 0.25 , yedges[:-1] + 0.25)\nxpos = xpos.flatten('F')\nypos = ypos.flatten('F')\nzpos = np.zeros_like(xpos)\n\ndx = dx.flatten()\ndy = dy.flatten()\ndz = hist.flatten()\n\nax.bar3d(xpos, ypos, zpos, dx, dy, dz, color='b', zsort='average')\n</code></pre>\n\n<p>How do I incorporate the z array into my 3D histogram? </p>\n"}, {"tags": ["python", "alexa-skills-kit"], "answers": [{"tags": [], "owner": {"reputation": 3999, "user_id": 2890590, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/exhvi.jpg?s=128&g=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/2890590/mark"}, "is_accepted": true, "score": 0, "last_activity_date": 1546961741, "creation_date": 1546961741, "answer_id": 54095047, "question_id": 54014635, "link": "https://stackoverflow.com/questions/54014635/python-how-to-obtain-userid-in-alexa-skill-using-ask-sdk-core-handler-input/54095047#54095047", "title": "Python - How to obtain UserID in Alexa Skill using ask_sdk_core.handler_input", "body": "<p>So the data in the handler_input can be extracted when you convert it to a 'dict'</p>\n\n<pre><code>step1 = handler_input.__dict__\nstep2 = step1['request_envelope'].__dict__\nstep3 = step2['session'].__dict__\nstep4 = step3['user'].__dict__\nuserid = step4['user_id']\n</code></pre>\n\n<p>It may be possible to do it in fewer steps, but this is what got it working for me.</p>\n"}, {"tags": [], "owner": {"reputation": 1739, "user_id": 6408518, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-O-cHXKYBWiU/AAAAAAAAAAI/AAAAAAAAKpo/nr4GZ0Vdc_s/photo.jpg?sz=128", "display_name": "Nicol&#242; Gasparini", "link": "https://stackoverflow.com/users/6408518/nicol%c3%b2-gasparini"}, "is_accepted": false, "score": 4, "last_activity_date": 1553633958, "creation_date": 1553633958, "answer_id": 55366101, "question_id": 54014635, "link": "https://stackoverflow.com/questions/54014635/python-how-to-obtain-userid-in-alexa-skill-using-ask-sdk-core-handler-input/55366101#55366101", "title": "Python - How to obtain UserID in Alexa Skill using ask_sdk_core.handler_input", "body": "<p>You can actually get it from 2 places:</p>\n\n<pre><code>user_id = handler_input.request_envelope.session.user.user_id\n</code></pre>\n\n<p>or</p>\n\n<pre><code>user_id = handler_input.request_envelope.context.system.user.user_id\n</code></pre>\n\n<p>It's not necessary to convert the objects to dictionaries</p>\n"}, {"tags": [], "owner": {"reputation": 813, "user_id": 2112382, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3mryV.jpg?s=128&g=1", "display_name": "vijayraj34", "link": "https://stackoverflow.com/users/2112382/vijayraj34"}, "is_accepted": false, "score": 0, "last_activity_date": 1617706641, "last_edit_date": 1617706641, "creation_date": 1617706318, "answer_id": 66967242, "question_id": 54014635, "link": "https://stackoverflow.com/questions/54014635/python-how-to-obtain-userid-in-alexa-skill-using-ask-sdk-core-handler-input/66967242#66967242", "title": "Python - How to obtain UserID in Alexa Skill using ask_sdk_core.handler_input", "body": "<p>If you're looking for <strong>Alexa Device ID</strong> to get.</p>\n<pre><code>device_id = handler_input.request_envelope.context.system.device.device_id\n</code></pre>\n"}], "owner": {"reputation": 3999, "user_id": 2890590, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/exhvi.jpg?s=128&g=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/2890590/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 752, "favorite_count": 1, "accepted_answer_id": 54095047, "answer_count": 3, "score": 3, "last_activity_date": 1617706641, "creation_date": 1546472668, "question_id": 54014635, "link": "https://stackoverflow.com/questions/54014635/python-how-to-obtain-userid-in-alexa-skill-using-ask-sdk-core-handler-input", "title": "Python - How to obtain UserID in Alexa Skill using ask_sdk_core.handler_input", "body": "<p>I'm working on a toy Alexa skill and I'm following the example in the Number Guessing Game (<a href=\"https://github.com/alexa/skill-sample-python-highlowgame\" rel=\"nofollow noreferrer\">code here</a>). In the example they</p>\n\n<pre><code>from ask_sdk_core.handler_input import HandlerInput\n\n@sb.request_handler(can_handle_func=is_request_type(\"LaunchRequest\"))\ndef launch_request_handler(handler_input):\n    \"\"\"Handler for Skill Launch.\n\n    Get the persistence attributes, to figure out the game state.\n    \"\"\"\n    # type: (HandlerInput) -&gt; Response\n    attr = handler_input.attributes_manager.persistent_attributes\n</code></pre>\n\n<p>this <code>attr</code> object allows me to persist information across the session. In the Alexa Developer console I see this data in the JSON under 'session':'attributes' - I also see 'session':'user':'userId'</p>\n\n<p>How do I access the <code>userId</code> data using the handler_input in this function?</p>\n"}, {"tags": ["python", "scikit-learn", "arguments", "predict"], "comments": [{"owner": {"reputation": 698, "user_id": 10236724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Eb946207", "link": "https://stackoverflow.com/users/10236724/eb946207"}, "edited": false, "score": 0, "creation_date": 1546472373, "post_id": 54014566, "comment_id": 94866319, "body": "Can you edit in the expected output and try to make this a bit more minimal? (see how to make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>)"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10577726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e63c0e7e74a357f91e745ed539c017fc?s=128&d=identicon&r=PG&f=1", "display_name": "nancy", "link": "https://stackoverflow.com/users/10577726/nancy"}, "edited": false, "score": 0, "creation_date": 1546473631, "post_id": 54014641, "comment_id": 94866573, "body": "I did use <code>LinearRegression.predict</code> and just double checked with <code>predict_method=LogisticRegression.predict_proba</code>, I&#39;m getting a similar error &#39;&#39;LogisticRegression&#39; object has no attribute &#39;predict_method&#39;&#39;. I&#39;m using <code>sklearn</code> 0.20.0. Thanks Abhinav!"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10859576"}, "is_accepted": false, "score": 1, "last_activity_date": 1546545098, "last_edit_date": 1546545098, "creation_date": 1546472707, "answer_id": 54014641, "question_id": 54014566, "link": "https://stackoverflow.com/questions/54014566/pass-prediction-method-as-function-argument/54014641#54014641", "title": "Pass prediction method as function argument", "body": "<p>I notice that in your code, you're not using the <code>predict_method</code> parameter that you passed in anywhere in your code, so I don't think what you have written is what you were trying to do.</p>\n\n<p>Currently, in your code, you are storing the output of the function <code>model().fit(data_x_train, data_y_train)</code> in the variable <code>model_fit</code> and then calling the <code>predict_method</code> attribute of that variable. If the above still doesn't work, that must be where the error is coming from, then.</p>\n\n<p>I suspect what you <em>want</em> to do is the following:</p>\n\n<pre><code>def Process(data_y_train, data_x_train, data_x_test,\n            model=LinearRegression, predict_method=LinearRegression.predict):\n    model_instance = model() # create an instance of the class stored in the variable 'model'\n    model_instance.fit(data_x_train, data_y_train) # run the function 'fit' belonging to that instance\n    predicted_values = predict_method(model_instance,data_x_test) # run the method stored in the variable 'predict_method' - you have to pass the instance the method belongs to in the first parameter\n    return predicted_values\n</code></pre>\n\n<p>Some more information:</p>\n\n<ul>\n<li><code>LinearRegression</code> is a <em>class</em>. It defines a bunch of methods, etc.</li>\n<li>To create an <em>instance</em> of that class, you must do something like <code>inst = LinearRegression()</code>. The variable <code>inst</code> is now an instance of the class <code>LinearRegression</code></li>\n<li><code>LinearRegression.predict</code> is an example of an <em>instance method</em>. This means it needs an instance to run (or can be thought of as to 'operate on' in this case)</li>\n<li>I can therefore call <code>inst.predict(x,y,z)</code> but not <code>LinearRegression.predict(x,y,z)</code> directly.</li>\n<li>If you want to call <code>LinearRegression.predict</code>, you have to pass in the instance in the first argument: <code>LinearRegression.predict(inst,x,y,z)</code></li>\n</ul>\n\n<p>Regarding what you tried afterwards: calling a function from a string holding the function's name is not necessary in this situation and only increases the overhead, so it's probably not the correct way to go here :)</p>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 1, "user_id": 10577726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e63c0e7e74a357f91e745ed539c017fc?s=128&d=identicon&r=PG&f=1", "display_name": "nancy", "link": "https://stackoverflow.com/users/10577726/nancy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546545098, "creation_date": 1546472057, "question_id": 54014566, "link": "https://stackoverflow.com/questions/54014566/pass-prediction-method-as-function-argument", "title": "Pass prediction method as function argument", "body": "<p>I'd like to specify which prediction method to use via function argument. Something like:</p>\n\n<pre><code>from sklearn.linear_model import LinearRegression\n\ndef Process(data_y_train, data_x_train, data_x_test, \n            model=LinearRegression, predict_method=predict):\n  model_fit = model().fit(data_x_train, data_y_train)\n  predicted_values = model_fit.predict_method(data_x_test)\n  return predicted_values\n</code></pre>\n\n<p>Passing the model function via arugment <code>model</code> (e.g., LinearRegression, LogisticRegression) works well, but I'm having trouble passing the predict method (e.g., predict, predict_proba) via argument <code>predict_method</code>.</p>\n\n<p>When I specify <code>predict_method=predict</code>, I get an error of 'name 'predict' is not defined'; if I specify <code>predict_method=LinearRegression.predict</code>, I get an error saying ''LinearRegression' object has no attribute 'predict_function''.</p>\n\n<p>Per <a href=\"https://stackoverflow.com/questions/3061/calling-a-function-of-a-module-by-using-its-name-a-string\">this discussion</a>, I also tried</p>\n\n<pre><code>import sklearn.linear_model.LinearRegression\n\ndef Process(data_y_train, data_x_train, data_x_test, \n            model_module='sklearn.linear_model.LinearRegression',\n            model=LinearRegression, predict_method='predict'):\n  model_fit = model().fit(data_x_train, data_y_train)\n  predict_call = getattr(__import__(model_module), predict_method)\n  predicted_values = model_fit.predict_call(data_x_test)\n  return predicted_values\n</code></pre>\n\n<p>But here I get an error: No module named LinearRegression.</p>\n\n<p>Thank you for your help!</p>\n"}, {"tags": ["python", "python-3.x", "character-encoding"], "comments": [{"owner": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 0, "creation_date": 1546559283, "post_id": 54014532, "comment_id": 94899048, "body": "Some variation of Ascii2Uni might help. Perhaps there is a Python binding or port."}], "answers": [{"tags": [], "owner": {"reputation": 27241, "user_id": 5320906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NOdNo.jpg?s=128&g=1", "display_name": "snakecharmerb", "link": "https://stackoverflow.com/users/5320906/snakecharmerb"}, "is_accepted": false, "score": 0, "last_activity_date": 1551550082, "creation_date": 1551550082, "answer_id": 54961499, "question_id": 54014532, "link": "https://stackoverflow.com/questions/54014532/strange-characters-in-string-gotten-from-api-cant-decode/54961499#54961499", "title": "Strange characters in string gotten from API can&#39;t decode", "body": "<p>It looks like these characters are from text encoded as cp1252.  It's possible to decode them </p>\n\n<pre><code>&gt;&gt;&gt; bs = b'{\"Description\":\"American Assets Trust, Inc. (the \\\\u0093company\\\\u0094) is a full service, vertically ...\"}'\n&gt;&gt;&gt; d = json.loads(bs)\n&gt;&gt;&gt; s = d['Description']\n&gt;&gt;&gt; decoded = s.encode('latin-1').decode('cp1252')\n&gt;&gt;&gt; decoded\n'American Assets Trust, Inc. (the \u201ccompany\u201d) is a full service, vertically ...'\n</code></pre>\n\n<p>but you will have to replace them manually, using <code>str.replace</code> or <code>str.translate</code></p>\n\n<pre><code>&gt;&gt;&gt; table = str.maketrans('\u201c\u201d', '\"\"')\n&gt;&gt;&gt; decoded = s.encode('latin-1').decode('cp1252')\n&gt;&gt;&gt; decoded.translate(table)\n'American Assets Trust, Inc. (the \"company\") is a full service, vertically ...'\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 8657934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ab01e69f76a861fdc59043ef466e5a7?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Duncan", "link": "https://stackoverflow.com/users/8657934/jonathan-duncan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1551550213, "creation_date": 1546471752, "last_edit_date": 1551550213, "question_id": 54014532, "link": "https://stackoverflow.com/questions/54014532/strange-characters-in-string-gotten-from-api-cant-decode", "title": "Strange characters in string gotten from API can&#39;t decode", "body": "<p>I'm creating a program that grabs data from an API and stores it in my own database. The problem is some of the stings have some sort of character code where quotation marks should be. Upon further inspection, it appears to be hex code for the quotation mark, but it's fantastically double escaped, confusing me along with all my decoders. I believe the string comes in as ascii and I don't have any other issues with the other characters.</p>\n\n<p>I know I can simply replace the specific character code with the actual character, but I need to catch stuff like this in the future. If it is hex, I need to comb strings for hex codes and replace them procedurally.</p>\n\n<p>I've tried</p>\n\n<pre><code>clean_val = unicodedata.normalize('NFKD', val).encode('latin1').decode('utf8')\n</code></pre>\n\n<p>I've gotten myself quite confused about the whole thing</p>\n\n<pre><code>response = session.get(url)\n    if response.status_code == requests.codes.ok:\n        print(response.content)\n\nb'{\"Description\":\"American Assets Trust, Inc. (the \\\\\\u0093company\\\\\\u0094) is a full service, vertically ...\"}'\n</code></pre>\n\n<p>I think the string is stored on their database like  \\\" to satisfy some SQL escaping protocol. When I get it, the escaping slash gets mixed in with the character code, thereby messing up the encoding.</p>\n"}, {"tags": ["python", "excel", "openpyxl"], "answers": [{"comments": [{"owner": {"reputation": 58368, "user_id": 30038, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/mPvRH.jpg?s=128&g=1", "display_name": "Vlad Bezden", "link": "https://stackoverflow.com/users/30038/vlad-bezden"}, "edited": false, "score": 0, "creation_date": 1596047178, "post_id": 60214627, "comment_id": 111687825, "body": "the key here is outline_level argument <a href=\"https://openpyxl.readthedocs.io/en/stable/api/openpyxl.worksheet.dimensions.html#openpyxl.worksheet.dimensions.DimensionHolder.group\" rel=\"nofollow noreferrer\">openpyxl.readthedocs.io/en/stable/api/&hellip;</a>"}], "tags": [], "owner": {"reputation": 41, "user_id": 7018268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/824c2540ff40ddc1d9c4d38e322ec052?s=128&d=identicon&r=PG", "display_name": "maxslug", "link": "https://stackoverflow.com/users/7018268/maxslug"}, "is_accepted": false, "score": 2, "last_activity_date": 1619041878, "last_edit_date": 1619041878, "creation_date": 1581619778, "answer_id": 60214627, "question_id": 54014529, "link": "https://stackoverflow.com/questions/54014529/how-to-use-openpyxl-to-make-all-column-folds-in-excel-sheet-all-hidden-or-showed/60214627#60214627", "title": "How to use openpyxl to make all column folds in Excel sheet all hidden or showed when starting Excel?", "body": "<p>Not quite an answer to your question but here is what I found when source-diving an .xlsx file generated from google sheets.  First you unzip the .xlsx file using <code>unzip</code> then you go into <code>xl/worksheets/sheet1.xml</code> or equivalent.</p>\n<p>Let's say I want to create three nested outline level of grouped columns:</p>\n<ul>\n<li><p>Outermost (top) level goes from <code>6:40</code></p>\n</li>\n<li><p>Second (middle) level goes from <code>6:13</code></p>\n</li>\n<li><p>Third (bottom) level goes from <code>6:8</code></p>\n<p>and they span columns 6-40.  (Column numbers are 1-indexed starting at 'A').  Here is the code in the xlsx file:</p>\n</li>\n</ul>\n<pre><code>&lt;cols&gt;\n  &lt;col min=&quot;6&quot; max=&quot;8&quot; outlineLevel=&quot;3&quot;/&gt;\n  &lt;col min=&quot;9&quot; max=&quot;13&quot;  outlineLevel=&quot;2&quot;/&gt;\n  &lt;col min=&quot;14&quot; max=&quot;40&quot; outlineLevel=&quot;1&quot;/&gt;\n&lt;/cols&gt;\n</code></pre>\n<p>Some things to note:</p>\n<ul>\n<li>Column groups never overlap!  If they do they are automatically merged, which is non-intuitive.</li>\n<li>The bottom most level is numbered the highest.  The top one is outlineLevel #1</li>\n<li>The &quot;above&quot; outline levels (lower numbered) will &quot;swallow&quot; the lower ones.  So outlineLevel 1 will end up spanning <code>6:40</code> and outlineLevel 2 will span <code>6:13</code></li>\n</ul>\n<p>Here is then the resulting openpyxl code:</p>\n<pre><code>ws.column_dimensions.group(get_column_letter(6), get_column_letter(8),outline_level=3)\nws.column_dimensions.group(get_column_letter(9), get_column_letter(13),outline_level=2)\nws.column_dimensions.group(get_column_letter(14), get_column_letter(40),outline_level=1)\n</code></pre>\n<p>I'll see if I can get something to add to the package documentation for <a href=\"https://stackoverflow.com/users/2385133/charlie-clark\">https://stackoverflow.com/users/2385133/charlie-clark</a>.   This is purely a nuance of the xlsx spec (or behavior), not openpyxl specific.  But it would be nice to have the example available in the API.</p>\n<p>EDIT: If you are interested in rows instead of columns, see my answer here : <a href=\"https://stackoverflow.com/a/67203916/7018268\">https://stackoverflow.com/a/67203916/7018268</a></p>\n"}], "owner": {"reputation": 53, "user_id": 7474590, "user_type": "registered", "profile_image": "https://graph.facebook.com/373787059665477/picture?type=large", "display_name": "William Tang", "link": "https://stackoverflow.com/users/7474590/william-tang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 413, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1619041878, "creation_date": 1546471732, "question_id": 54014529, "link": "https://stackoverflow.com/questions/54014529/how-to-use-openpyxl-to-make-all-column-folds-in-excel-sheet-all-hidden-or-showed", "title": "How to use openpyxl to make all column folds in Excel sheet all hidden or showed when starting Excel?", "body": "<p>I'm using openpyxl to modify an existing Excel file. In the Excel file, there are column folds. I want to write some code so that I can either show all the column folds or hide all the column folds.</p>\n\n<p>I tried using this code to achieve my goal. However, there's two problems:</p>\n\n<pre><code>ws.column_dimensions.group(start='A', end='C', hidden=False)  \n</code></pre>\n\n<p>First, the columns are already grouped. However, this code is only useful to me if the columns are not yet grouped. \nSecond, the hidden parameter doesn't seem to affect the output. In fact, no matter if I put the flag to False to True, I get a group that is hidden.</p>\n\n<pre><code>for col in ['A', 'B', 'C']:\n    ws.column_dimensions[col].hidden=False\n</code></pre>\n\n<p>What I expect is that it takes all the column groups/folds and close them. Instead of that, this code hides all the column (from A to C).</p>\n"}, {"tags": ["python", "nlp"], "comments": [{"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 2, "creation_date": 1546471339, "post_id": 54014454, "comment_id": 94866054, "body": "Show what you have tried please."}, {"owner": {"reputation": 117, "user_id": 10434208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MI2Qa.jpg?s=128&g=1", "display_name": "javan.rajpopat", "link": "https://stackoverflow.com/users/10434208/javan-rajpopat"}, "edited": false, "score": 0, "creation_date": 1546471531, "post_id": 54014454, "comment_id": 94866093, "body": "how and where are the above mentioned data stored?"}, {"owner": {"reputation": 1, "user_id": 10860117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe4453fd971ce45b0153e9143774d729?s=128&d=identicon&r=PG&f=1", "display_name": "jenddd", "link": "https://stackoverflow.com/users/10860117/jenddd"}, "edited": false, "score": 0, "creation_date": 1546471761, "post_id": 54014454, "comment_id": 94866163, "body": "this is the output from last step actually, I tried to store it in this way: [&#39;0 1 251 TrCP&#39;, &#39;0 2 68 TrCP&#39;,...] but don&#39;t know how to process it next, so i actually have no idea how to save it for further steps"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10860117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe4453fd971ce45b0153e9143774d729?s=128&d=identicon&r=PG&f=1", "display_name": "jenddd", "link": "https://stackoverflow.com/users/10860117/jenddd"}, "edited": false, "score": 0, "creation_date": 1546471918, "post_id": 54014512, "comment_id": 94866205, "body": "thanks for helping, it is just I have the first column with different value, so when first column the value is &#39;0&#39;, i need to find the max value, when first column the value is &#39;1&#39;, I need to find the max value again, so do to all the different numbers in first column"}, {"owner": {"reputation": 1, "user_id": 10860117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe4453fd971ce45b0153e9143774d729?s=128&d=identicon&r=PG&f=1", "display_name": "jenddd", "link": "https://stackoverflow.com/users/10860117/jenddd"}, "edited": false, "score": 0, "creation_date": 1546471936, "post_id": 54014512, "comment_id": 94866215, "body": "don&#39;t know if i explained myself properly, sorry"}, {"owner": {"reputation": 682, "user_id": 5540779, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cQBwUxcnTU4/AAAAAAAAAAI/AAAAAAAABJE/5NECUAi1nR4/photo.jpg?sz=128", "display_name": "Joe B", "link": "https://stackoverflow.com/users/5540779/joe-b"}, "reply_to_user": {"reputation": 1, "user_id": 10860117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe4453fd971ce45b0153e9143774d729?s=128&d=identicon&r=PG&f=1", "display_name": "jenddd", "link": "https://stackoverflow.com/users/10860117/jenddd"}, "edited": false, "score": 0, "creation_date": 1546472046, "post_id": 54014512, "comment_id": 94866251, "body": "are you using pandas? it will make things easier if you are :P"}], "tags": [], "owner": {"reputation": 682, "user_id": 5540779, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cQBwUxcnTU4/AAAAAAAAAAI/AAAAAAAABJE/5NECUAi1nR4/photo.jpg?sz=128", "display_name": "Joe B", "link": "https://stackoverflow.com/users/5540779/joe-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1546471969, "last_edit_date": 1546471969, "creation_date": 1546471598, "answer_id": 54014512, "question_id": 54014454, "link": "https://stackoverflow.com/questions/54014454/in-python-how-can-i-extract-the-maximum-value-in-the-third-column-and-return/54014512#54014512", "title": "In python: How can I extract the maximum value in the third column , and return the value in fourth column?", "body": "<p>I don't know how your data is stored, but the most ubiquitous solution is as follows:</p>\n\n<pre><code>my_array= [251, 68, 61, 69, 70, 75...]\nwhoa_a_wild_array = ['TrCP','TrCP','TrCP','TrCP',...]\nwhoa_a_wild_array[np.argmax(x)]\n</code></pre>\n\n<p>Here <code>np.argmax()</code> returns the index of the max value. We can then access that index in our other array/vector/list/etc. Tadaa!</p>\n\n<p>If you are using pandas the code is quite similar:</p>\n\n<pre><code>df['4th_column'].values[df['3rd_column'].argmax()]]\n</code></pre>\n\n<p>the <code>.values</code> ensures that you actually pull the desired index and not a misordered label (ie if your dataframe's index is numbered and you don't wish to access that.)</p>\n"}], "owner": {"reputation": 1, "user_id": 10860117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe4453fd971ce45b0153e9143774d729?s=128&d=identicon&r=PG&f=1", "display_name": "jenddd", "link": "https://stackoverflow.com/users/10860117/jenddd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1546472058, "creation_date": 1546471205, "question_id": 54014454, "link": "https://stackoverflow.com/questions/54014454/in-python-how-can-i-extract-the-maximum-value-in-the-third-column-and-return", "title": "In python: How can I extract the maximum value in the third column , and return the value in fourth column?", "body": "<p>I have the data like this :</p>\n\n<pre><code>    0 1 251 TrCP\n    0 2 68 TrCP\n    0 3 61 TrCP\n    0 4 69 TrCP\n    0 5 70 TrCP\n    0 6 75 TrCP\n    0 7 63 TrCP\n    0 8 57 TrCP\n    0 9 96 TrCP\n    0 10 266 TrCP\n    ........\n    0 2827 62 TrNAP\n    1 1 67 TrCP\n    1 2 84 TrCP\n    1 3 159 TrCP\n    1 4 121 TrCP\n    1 5 80 TrCP\n    1 6 68 TrCP\n    1 7 148 TrCP\n    1 8 78 TrCP\n    1 9 71 TrCP\n    1 10 67 TrCP\n    ........\n    1 2827 76 TrNAP\n    .\n    .\n    .\n    2828 1 62 TrCP\n</code></pre>\n\n<p>In the first column, I have number from 0 - 2828.\nFor each number in 0-2828\nI wanna extract the last column (TrCP for example) according to the value in third column.\nFor example, in the first column ='0', the max value in third column is '266', I wanna return the output: TrCP.</p>\n"}, {"tags": ["python", "python-3.x", "pyqt", "pyqt5", "qcheckbox"], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 10729703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3330e684e16e7f9b1c5727caf456bcf?s=128&d=identicon&r=PG&f=1", "display_name": "pyPN", "link": "https://stackoverflow.com/users/10729703/pypn"}, "edited": false, "score": 0, "creation_date": 1546477537, "post_id": 54014549, "comment_id": 94867324, "body": "Thanks @eyllanesc! I was unaware of <code>blockSignals</code> option and it solved the problem."}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 3, "last_activity_date": 1546471844, "creation_date": 1546471844, "answer_id": 54014549, "question_id": 54014436, "link": "https://stackoverflow.com/questions/54014436/qcheckbox-to-check-all-other-qcheckboxes/54014549#54014549", "title": "QCheckbox to check all other QCheckBoxes", "body": "<p>With the logic that you have you are creating a loop since the change of state of any element to change the state of another element, the idea is to block the emission of signals when the change of state is implemented in the slot with <a href=\"http://doc.qt.io/qt-5/qobject.html#blockSignals\" rel=\"nofollow noreferrer\">blockSignals()</a>:</p>\n\n<pre><code>from PyQt5 import QtCore, QtGui, QtWidgets\n\nclass Test(QtWidgets.QWidget):\n    def __init__(self):\n        super().__init__()\n        self.initUI()\n\n    def initUI(self):\n       self.checkBoxAll = QtWidgets.QCheckBox(\"Select All\")\n       self.checkBoxAll.setChecked(False)\n       self.checkBoxAll.stateChanged.connect(self.onStateChangePrincipal)\n\n       self.checkBoxA   = QtWidgets.QCheckBox(\"Select A\")\n       self.checkBoxB   = QtWidgets.QCheckBox(\"Select B\")\n       self.checkboxes = [self.checkBoxA, self.checkBoxB]\n\n       for checkbox in self.checkboxes:\n            checkbox.stateChanged.connect(self.onStateChange)\n\n       grid = QtWidgets.QGridLayout(self)\n       grid.addWidget(self.checkBoxAll, 1, 0)\n       grid.addWidget(self.checkBoxA, 2, 0)\n       grid.addWidget(self.checkBoxB, 3, 0)\n       self.setWindowTitle('Test')\n\n    @QtCore.pyqtSlot(int)\n    def onStateChangePrincipal(self, state):\n        if state == QtCore.Qt.Checked:\n            for checkbox in self.checkboxes:\n                checkbox.blockSignals(True)\n                checkbox.setCheckState(state)\n                checkbox.blockSignals(False)\n\n    @QtCore.pyqtSlot(int)\n    def onStateChange(self, state):\n        self.checkBoxAll.blockSignals(True)\n        self.checkBoxAll.setChecked(QtCore.Qt.Unchecked)\n        self.checkBoxAll.blockSignals(False)\n\nif __name__ == '__main__':\n    import sys\n    app = QtWidgets.QApplication(sys.argv)\n    w = Test()\n    w.show()\n    sys.exit(app.exec_())\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 10729703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3330e684e16e7f9b1c5727caf456bcf?s=128&d=identicon&r=PG&f=1", "display_name": "pyPN", "link": "https://stackoverflow.com/users/10729703/pypn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1837, "favorite_count": 0, "accepted_answer_id": 54014549, "answer_count": 1, "score": 2, "last_activity_date": 1577118839, "creation_date": 1546471085, "last_edit_date": 1577118839, "question_id": 54014436, "link": "https://stackoverflow.com/questions/54014436/qcheckbox-to-check-all-other-qcheckboxes", "title": "QCheckbox to check all other QCheckBoxes", "body": "<p>My question is very similar to this post, <a href=\"https://stackoverflow.com/questions/48399579/python-pyqt-checkbox-to-uncheck-all-other-checkboxes\">Python PyQt - Checkbox to uncheck all other checkboxes</a>. However, I am trying to check all other boxes when main checkbox is selected and at the same time, if any of the other boxes are selected independently, then I would like to deselect the main checkbox. I tried modifying the answer provided, but not able to put my head around the 'self.sender' signal. I am not able to change the selection when I deselect a checkbox. Here is the code that I modified using the solution provided by @ eyllanesc.Any help is greatly appreciated, thanks!</p>\n\n<pre><code>import sys\nfrom PyQt5.QtWidgets import *\nfrom PyQt5.QtCore import *\n\nclass Test(QWidget):\n    def __init__(self):\n        super().__init__()\n        self.initUI()\n\n    def initUI(self):\n       self.checkBoxAll = QCheckBox(\"Select All\")\n       self.checkBoxA    = QCheckBox(\"Select A\")\n       self.checkBoxB    = QCheckBox(\"Select B\")\n\n        self.checkBoxAll.setChecked(False)\n        self.checkBoxAll.stateChanged.connect(self.onStateChange)\n        self.checkBoxA.stateChanged.connect(self.onStateChange)\n        self.checkBoxB.stateChanged.connect(self.onStateChange)\n\n        grid = QGridLayout(self)\n\n        grid.addWidget(self.checkBoxAll, 1, 0)\n        grid.addWidget(self.checkBoxA, 2, 0)\n        grid.addWidget(self.checkBoxB, 3, 0)\n        self.setWindowTitle('Test')\n        self.show()\n\n    @pyqtSlot(int)\n    def onStateChange(self, state):\n        if state == Qt.Checked:\n            if self.sender() == self.checkBoxAll:\n                self.checkBoxA.setChecked(True)\n                self.checkBoxB.setChecked(True)\n            elif self.sender() in (self.checkBoxA, self.checkBoxB):\n                self.checkBoxAll.setChecked(False)\n</code></pre>\n"}, {"tags": ["python", "nlp", "spacy"], "comments": [{"owner": {"reputation": 682, "user_id": 5540779, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cQBwUxcnTU4/AAAAAAAAAAI/AAAAAAAABJE/5NECUAi1nR4/photo.jpg?sz=128", "display_name": "Joe B", "link": "https://stackoverflow.com/users/5540779/joe-b"}, "edited": false, "score": 0, "creation_date": 1546471207, "post_id": 54014422, "comment_id": 94866018, "body": "Hmmmm...can you look at your computers memory usage and check if it is being entirely used? Task manager in windows or activity monitor in mac."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1546472110, "post_id": 54014422, "comment_id": 94866268, "body": "Probably because <code>list(nlp(alice).sents)</code> uses all your memory..."}], "answers": [{"tags": [], "owner": {"reputation": 352, "user_id": 3234482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HwJ3Z.jpg?s=128&g=1", "display_name": "Alex L", "link": "https://stackoverflow.com/users/3234482/alex-l"}, "is_accepted": false, "score": 1, "last_activity_date": 1546552578, "creation_date": 1546552578, "answer_id": 54030344, "question_id": 54014422, "link": "https://stackoverflow.com/questions/54014422/spacy-memoryerror/54030344#54030344", "title": "Spacy MemoryError", "body": "<p>I'm guessing you truly are running out of memory. I couldn't find an exact number, but I'm sure Carrol's Alice's Adventures in Wonderland has tens of thousands of sentences. This equates to tens of thousands of <code>Span</code> elements from Spacy. Without modification, <code>nlp()</code> determines everything from POS to dependencies for the string passed to it. Moreover, the <code>sents</code> property returns an iterator which should be taken advantage of, as opposed to immediately expanding in a list.</p>\n\n<p>Basically, you're attempting a computation which very likely might be running into a memory constraint. How much memory does your machine support? In the comments Joe suggested watching your machine's memory usage, I second this. My recommendations: check if your are actually running out of memory, or limit the functionality of <code>nlp()</code>, or consider doing your work with the iterator functionality:</p>\n\n<pre><code>for sentence in nlp(alice).sents:\n    pass\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7803986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6208cf85708df6a3d20c113728f26376?s=128&d=identicon&r=PG&f=1", "display_name": "Marion Laanemae", "link": "https://stackoverflow.com/users/7803986/marion-laanemae"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1145, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1546552578, "creation_date": 1546471004, "question_id": 54014422, "link": "https://stackoverflow.com/questions/54014422/spacy-memoryerror", "title": "Spacy MemoryError", "body": "<p>I managed to install spacy but when trying to use nlp then I am getting a MemoryError for some weird reason.</p>\n\n<p>The code I wrote is as follows:</p>\n\n<pre><code>import spacy\nimport re\nfrom nltk.corpus import gutenberg\n\ndef clean_text(astring):\n    #replace newlines with space\n    newstring=re.sub(\"\\n\",\" \",astring)\n    #remove title and chapter headings\n    newstring=re.sub(\"\\[[^\\]]*\\]\",\" \",newstring)\n    newstring=re.sub(\"VOLUME \\S+\",\" \",newstring)\n    newstring=re.sub(\"CHAPTER \\S+\",\" \",newstring)\n    newstring=re.sub(\"\\s\\s+\",\" \",newstring)\n    return newstring.lstrip().rstrip()\n\nnlp=spacy.load('en')\nalice=clean_text(gutenberg.raw('carroll-alice.txt'))\nnlp_alice=list(nlp(alice).sents)\n</code></pre>\n\n<p>The error I am getting is as follows</p>\n\n<p><a href=\"https://i.stack.imgur.com/kyGNV.png\" rel=\"nofollow noreferrer\">The error message</a></p>\n\n<p>Although when my code is something like this then it works:</p>\n\n<pre><code>import spacy\n\nnlp=spacy.load('en')\nalice=nlp(\"hello Hello\")\n</code></pre>\n\n<p>If anybody could point out what I am doing wrong I would be very grateful</p>\n"}, {"tags": ["python", "arrays", "for-loop", "if-statement"], "comments": [{"owner": {"reputation": 2116, "user_id": 7247547, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9edc71b8ad82b60fb9955e8adcede03a?s=128&d=identicon&r=PG&f=1", "display_name": "kevinkayaks", "link": "https://stackoverflow.com/users/7247547/kevinkayaks"}, "edited": false, "score": 0, "creation_date": 1546470971, "post_id": 54014404, "comment_id": 94865942, "body": "post example input and expected output?"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1546471004, "post_id": 54014404, "comment_id": 94865946, "body": "<code>[x  for x in arr if arr[arr.index(x)+1] &lt; x]</code>. No idea if that actually makes sense to me, but the <code>if</code> condition comes at the end if it&#39;s not accompanied by an <code>else</code>."}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1546471108, "post_id": 54014404, "comment_id": 94865976, "body": "What if there are duplicate items in <code>arr</code>? <code>index</code> will only find the first."}, {"owner": {"reputation": 698, "user_id": 10236724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Eb946207", "link": "https://stackoverflow.com/users/10236724/eb946207"}, "edited": false, "score": 0, "creation_date": 1546471130, "post_id": 54014404, "comment_id": 94865985, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/11875364/how-does-this-for-in-work-in-python\">How does this &quot;&#91;.. for .. in ..&#93;&quot; work in Python?</a>"}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1546471149, "post_id": 54014404, "comment_id": 94865991, "body": "Doesn&#39;t this crash on the last element?"}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1546471164, "post_id": 54014404, "comment_id": 94865998, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/3013449/list-comprehension-vs-lambda-filter\">list comprehension vs. lambda + filter</a>"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1546471254, "post_id": 54014404, "comment_id": 94866032, "body": "Disagree with the dupes, I think this is better served by numpy syntax but we don&#39;t have enough context"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1546471364, "post_id": 54014404, "comment_id": 94866060, "body": "Are you actually using numpy arrays or just python lists here? &quot;Arrays&quot; 99% of the time refers to numpy"}], "answers": [{"comments": [{"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1546535142, "post_id": 54014431, "comment_id": 94889807, "body": "This crashes with <code>arr = [1, 3, 2, 4]</code> with <code>IndexError: list index out of range</code>"}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "reply_to_user": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1546547709, "post_id": 54014431, "comment_id": 94895136, "body": "@PeterWood Good point. I was only showing how to fix the syntax error from the OP&#39;s code. I didn&#39;t worry about testing if this fix reveals a logic error. I leave the fix as an exercise for the OP and any other reader."}], "tags": [], "owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "is_accepted": true, "score": 2, "last_activity_date": 1546471065, "creation_date": 1546471065, "answer_id": 54014431, "question_id": 54014404, "link": "https://stackoverflow.com/questions/54014404/if-statement-with-no-else-branch-while-making-array-with-for-loop/54014431#54014431", "title": "If statement with no else branch while making array with for loop", "body": "<p>Your <code>if</code> is in the wrong position to correctly implement <code>filter()</code> with a list comprehension. Try this instead:</p>\n\n<pre><code>[x for x in arr if arr[arr.index(x)+1] &lt; x]\n</code></pre>\n\n<p>See <a href=\"https://stackoverflow.com/questions/3013449/list-comprehension-vs-lambda-filter\">list comprehension vs. lambda + filter</a> for details.</p>\n"}, {"comments": [{"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1546533429, "post_id": 54014495, "comment_id": 94888953, "body": "This is a very elegant solution that seems to almost match what the OP is doing. Note that this will eliminate the last element of the list because <code>zip()</code> terminates on the shortest of the input lists. This may not be the desired behavior."}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "reply_to_user": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1546535082, "post_id": 54014495, "comment_id": 94889780, "body": "@Code-Apprentice The only way OP&#39;s code (and your fixed solution) wouldn&#39;t crash is if the last element was duplicated earlier in <code>arr</code>. But then the solution would be wrong as <code>index</code> would find the earlier value."}], "tags": [], "owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "is_accepted": false, "score": 2, "last_activity_date": 1546537903, "last_edit_date": 1546537903, "creation_date": 1546471457, "answer_id": 54014495, "question_id": 54014404, "link": "https://stackoverflow.com/questions/54014404/if-statement-with-no-else-branch-while-making-array-with-for-loop/54014495#54014495", "title": "If statement with no else branch while making array with for loop", "body": "<p>You can loop through pairs from the list:</p>\n\n<pre><code>[a for a, b in zip(arr, arr[1:])\n if a &lt; b]\n</code></pre>\n\n<p>For example:</p>\n\n<pre><code>&gt;&gt;&gt; arr = [1, 3, 2, 4]\n&gt;&gt;&gt; [a for a, b in zip(arr, arr[1:])\n...  if a &lt; b]\n[1, 2]\n</code></pre>\n\n<p>The accepted answer crashes with these values:</p>\n\n<pre><code>&gt;&gt;&gt; [x for x in arr if arr[arr.index(x)+1] &lt; x]\nTraceback (most recent call last):\nIndexError: list index out of range\n</code></pre>\n"}], "owner": {"reputation": 371, "user_id": 9916057, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-v0ueoRc9sUo/AAAAAAAAAAI/AAAAAAAAIAI/O9m-riagmB4/photo.jpg?sz=128", "display_name": "Kris10an", "link": "https://stackoverflow.com/users/9916057/kris10an"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 54014431, "answer_count": 2, "score": -3, "last_activity_date": 1546537903, "creation_date": 1546470881, "question_id": 54014404, "link": "https://stackoverflow.com/questions/54014404/if-statement-with-no-else-branch-while-making-array-with-for-loop", "title": "If statement with no else branch while making array with for loop", "body": "<p>I want to create an array inline like this:\n<code>[x if arr[arr.index(x)+1] &lt; x for x in arr]</code> but when i do it python tells me i cant do that without having an else branch to my if statement.</p>\n\n<p>The only \"solution\" I found was this: <code>list(filter(lambda x: x != None, [x if arr[arr.index(x)+1] &lt; x else None for x in arr])</code> but that is just ugly, and unnessecary. The reason i want to initialize the array this way is to keep the code short and clean, but now it would just be better to do a normal for loop.</p>\n\n<p>Hopefully there are better ways to do this ;)</p>\n"}, {"tags": ["python", "wav"], "answers": [{"tags": [], "owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "is_accepted": false, "score": 1, "last_activity_date": 1546472108, "creation_date": 1546472108, "answer_id": 54014574, "question_id": 54014390, "link": "https://stackoverflow.com/questions/54014390/how-to-create-a-wav-file-from-speechid-such-as-3d5ffcda-4d8b-4f2e-ae95-d86b560f/54014574#54014574", "title": "How to create a .wav file from SpeechID such as 3D5FFCDA-4D8B-4F2E-AE95-D86B560F4F85", "body": "<p>You can't:</p>\n\n<p><a href=\"https://www.telekom.com/en/company/details/speechid-the-simple-way-of-identification-538268\" rel=\"nofollow noreferrer\">https://www.telekom.com/en/company/details/speechid-the-simple-way-of-identification-538268</a></p>\n\n<blockquote>\n  <p>[SpeechID is] A sequence of numbers is created from all the characteristics, a so-called hash. A hash can be imagined as a one-way street: a speech file cannot be created from the hash [...]</p>\n</blockquote>\n"}], "owner": {"reputation": 1, "user_id": 10162979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/536d265d10079432c5dc52934bf4c033?s=128&d=identicon&r=PG&f=1", "display_name": "KD228", "link": "https://stackoverflow.com/users/10162979/kd228"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1546472108, "creation_date": 1546470807, "question_id": 54014390, "link": "https://stackoverflow.com/questions/54014390/how-to-create-a-wav-file-from-speechid-such-as-3d5ffcda-4d8b-4f2e-ae95-d86b560f", "title": "How to create a .wav file from SpeechID such as 3D5FFCDA-4D8B-4F2E-AE95-D86B560F4F85", "body": "<p>I have a different SpeechID where I want to create a .wav file from this ID's. Any idea how? </p>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 305, "user_id": 10066169, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6hmLsdcSAMc/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oit-3hlyBT7a__eViHT2T7mIAoyw/mo/photo.jpg?sz=128", "display_name": "Denis Babochenko", "link": "https://stackoverflow.com/users/10066169/denis-babochenko"}, "edited": false, "score": 1, "creation_date": 1546470825, "post_id": 54014368, "comment_id": 94865893, "body": "The list comprehension is so long that it&#39;s unreadable"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 3, "creation_date": 1546470891, "post_id": 54014368, "comment_id": 94865915, "body": "<code>x = [ 20*math.log10(i) if i&gt;0 and 20*math.log10(i)&gt;=-60 else (-(120+20*math.log10(abs(i))) if i&lt;0 and 20*math.log10(abs(i))&gt;=-60 else -60) for i in a3 ]</code> is unmaintainable. Please show an example input and output. <code>numpy</code> functions aren&#39;t faster when applied in a list comprehension."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 1, "creation_date": 1546475042, "post_id": 54014368, "comment_id": 94866870, "body": "Just yesterday I showed how to apply a conditional to <code>np.log</code>, <a href=\"https://stackoverflow.com/a/53993190/901925\">stackoverflow.com/a/53993190/901925</a>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10859957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f8d661c9b745478520fc637d841ab8e?s=128&d=identicon&r=PG&f=1", "display_name": "JoseJose123", "link": "https://stackoverflow.com/users/10859957/josejose123"}, "edited": false, "score": 0, "creation_date": 1546538307, "post_id": 54025273, "comment_id": 94891210, "body": "Oh, sorry about that, I forget to put the reason about this. I wanted to convert a plot from ratio(percent -1 to 1) to dB (-60 to -60), as Audacity:"}, {"owner": {"reputation": 11, "user_id": 10859957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f8d661c9b745478520fc637d841ab8e?s=128&d=identicon&r=PG&f=1", "display_name": "JoseJose123", "link": "https://stackoverflow.com/users/10859957/josejose123"}, "edited": false, "score": 0, "creation_date": 1546539053, "post_id": 54025273, "comment_id": 94891558, "body": "Sorry about that, I forget to put the reason about this. I wanted to convert a plot from ratio(percent -1 to 1) to dB (0 to 0, with a central edge of -60), as Audacity. This is a little bit confusing, because, you can&#39;t make a plot from 0 to 0 having any central edge, but I realize that in the Audacity representation, it plots in the upper side the positives from the ratio, and in the lower side the negatives from the ratio, and also it represents the zero values as -60. So I change the scale, from positive ratio values -60 to 0, and for negatives -120 to -60, being -120 the negative 0"}], "tags": [], "owner": {"reputation": 687, "user_id": 3901216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6133069a70b73d84f51e886a6139e898?s=128&d=identicon&r=PG&f=1", "display_name": "tch", "link": "https://stackoverflow.com/users/3901216/tch"}, "is_accepted": false, "score": 0, "last_activity_date": 1546529400, "creation_date": 1546529400, "answer_id": 54025273, "question_id": 54014368, "link": "https://stackoverflow.com/questions/54014368/how-to-apply-operations-with-conditionals-like-if-to-a-large-numpy-array-effic/54025273#54025273", "title": "How to apply operations with conditionals, like if, to a large numpy array efficiently in python?", "body": "<p>In general, when posting questions, its best practice to include a small working example. I know you included a picture of your data, but that is hard for others to use, so it would have been better to just give us a small array of data. This is important, because the solution often depends on the data. For example, all your data is (i think) between -1 and 1 so that log is always negative. If this isn't the case, then your solution might not work.</p>\n\n<p>There is no need to check if <code>i&gt;0</code> and then apply <code>abs</code> if <code>i</code> is negative. This is exactly what applying <code>abs</code> does in the first place.</p>\n\n<p>As you noticed, we can also use numpy vectorization to avoid the list comprehension. It is usually faster to do something like <code>np.sin(X)</code> than <code>[ np.sin(x) for x in X]</code>.</p>\n\n<p>Finally, if you do something like <code>X&gt;0</code> in numpy, it returns a boolean array saying if each element is <code>&gt;0</code>.</p>\n\n<p>Note that another way to have written your list comprehension would be first take <code>20*math.log10(abs(i))</code> and replace all values <code>&lt;-60</code> with <code>-60</code> and then anywhere where <code>i&lt;0</code>, flip the data about -60`. We can do this in the vectorized operation.</p>\n\n<pre><code>-120*(a3&lt;0)+np.sign(a3)*np.maximum(20*np.log10(np.abs(a3)),-60)\n</code></pre>\n\n<p>This can probably be optimized a bit since <code>a3&lt;0</code> and <code>np.sign(a3)</code> are doing similar things. That said, I'm pretty sure this is faster than list comprehensions.</p>\n"}], "owner": {"reputation": 11, "user_id": 10859957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f8d661c9b745478520fc637d841ab8e?s=128&d=identicon&r=PG&f=1", "display_name": "JoseJose123", "link": "https://stackoverflow.com/users/10859957/josejose123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1546529400, "creation_date": 1546470665, "question_id": 54014368, "link": "https://stackoverflow.com/questions/54014368/how-to-apply-operations-with-conditionals-like-if-to-a-large-numpy-array-effic", "title": "How to apply operations with conditionals, like if, to a large numpy array efficiently in python?", "body": "<p>Good afternoon everybody, I was putting raw data into numpy arrays, then I wanted to perform operations, as logarithm base 10, with \"if\"s to those arrays, nevertheless, those numpy arrays are too big and consequently they take a lot of time to complete them.</p>\n\n<p><a href=\"https://i.stack.imgur.com/c2E5Z.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<pre><code>x = [ 20*math.log10(i) if i&gt;0 and 20*math.log10(i)&gt;=-60 else (-(120+20*math.log10(abs(i))) if i&lt;0 and 20*math.log10(abs(i))&gt;=-60 else -60) for i in a3 ]\n</code></pre>\n\n<p>In the piece of code before, I use one of the channels array throwed out from the raw audio data, \"a3\", and I made another array, \"x\", that will contain an array to plot from -120 to 0, in the y edge. Futhermore, as you could note, I needed to separate positive original elements from numpy array than negative original elements from numpy array, and also 0s, being -60 the after operations 0. Having this final plot:\n<a href=\"https://i.stack.imgur.com/cOSPq.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>The problem with this code, is that, as I said before, it takes approximately 10 seconds to finish the computing, and this is only for 1 channel, and I need to compute 8 channels, so I need to wait approximately 80 seconds.</p>\n\n<p>I wanted to know if there is a faster way to perform this, in addition, I found out a way to apply numpy.log10 to the whole numpy array, and it compute in less than two seconds:</p>\n\n<pre><code>x = 20*numpy.log10(abs(a3))\n</code></pre>\n\n<p>But I did not find anything related to manipulate the preferences of that operation, numpy.log10, with ifs, conditionals, or something like that. I really need to identify the negative and positive original values, and also the 0s, and obviously transform the 0 to -60, making the -60 the minimum limit, and the reference point, as the code that I showed you before. </p>\n\n<p>Note: I already tried to do it with loops, like \"for\" and \"while\", but it takes way more time than the actual method, like 14 second each one.</p>\n\n<p>Thank you for your responses!!</p>\n"}, {"tags": ["python", "matlab"], "comments": [{"owner": {"reputation": 1281, "user_id": 8869570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd0af5294b2a744ac618e1d0d60f07b5?s=128&d=identicon&r=PG&f=1", "display_name": "anonuser01", "link": "https://stackoverflow.com/users/8869570/anonuser01"}, "reply_to_user": {"reputation": 64597, "user_id": 1453822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c8db97d2ecdfe5e044cee4c470abb60?s=128&d=identicon&r=PG", "display_name": "DeepSpace", "link": "https://stackoverflow.com/users/1453822/deepspace"}, "edited": false, "score": 0, "creation_date": 1546470898, "post_id": 54014358, "comment_id": 94865919, "body": "I&#39;m new to Python and I was asking if there is anything actually functionally different with using <code>[]</code> and <code>()</code> when you have multiple output variables. Maybe I should have asked if there&#39;s anything advantageous to using <code>[]</code> and <code>()</code>. I&#39;ll update."}], "answers": [{"comments": [{"owner": {"reputation": 64597, "user_id": 1453822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c8db97d2ecdfe5e044cee4c470abb60?s=128&d=identicon&r=PG", "display_name": "DeepSpace", "link": "https://stackoverflow.com/users/1453822/deepspace"}, "reply_to_user": {"reputation": 178, "user_id": 6394385, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_XYfHwF4Lr4/AAAAAAAAAAI/AAAAAAAAACc/__qmhCRvlSI/photo.jpg?sz=128", "display_name": "Pranav Chaudhary", "link": "https://stackoverflow.com/users/6394385/pranav-chaudhary"}, "edited": false, "score": 0, "creation_date": 1546472547, "post_id": 54014504, "comment_id": 94866346, "body": "@PranavChaudhary you can see that just above the bytecode"}, {"owner": {"reputation": 178, "user_id": 6394385, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_XYfHwF4Lr4/AAAAAAAAAAI/AAAAAAAAACc/__qmhCRvlSI/photo.jpg?sz=128", "display_name": "Pranav Chaudhary", "link": "https://stackoverflow.com/users/6394385/pranav-chaudhary"}, "edited": false, "score": 0, "creation_date": 1546472634, "post_id": 54014504, "comment_id": 94866365, "body": "Okay, Thanks. That was helpful."}], "tags": [], "owner": {"reputation": 64597, "user_id": 1453822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c8db97d2ecdfe5e044cee4c470abb60?s=128&d=identicon&r=PG", "display_name": "DeepSpace", "link": "https://stackoverflow.com/users/1453822/deepspace"}, "is_accepted": true, "score": 4, "last_activity_date": 1546472734, "last_edit_date": 1546472734, "creation_date": 1546471559, "answer_id": 54014504, "question_id": 54014358, "link": "https://stackoverflow.com/questions/54014358/brackets-around-multiple-outputs-in-python-function/54014504#54014504", "title": "Brackets around multiple outputs in Python function", "body": "<p>The only difference I can think of between</p>\n\n<pre><code>[output1, output2] = some_func()\n</code></pre>\n\n<p>and</p>\n\n<pre><code>(output1, output2) = some_func()\n</code></pre>\n\n<p>is that the latter's memory footprint <em>should</em> be smaller (but I'm sure that this is an <a href=\"https://stackoverflow.com/questions/1777719/what-is-the-definition-of-an-implementation-detail\">implementation detail</a>) since tuples take less memory than lists with the same number of elements, mainly because tuples are immutable (so the interpreter should not need to worry about adding or removing [ie re-allocating memory] elements).</p>\n\n<pre><code>import sys\n\nprint(sys.getsizeof([1, 2]))\nprint(sys.getsizeof((1, 2)))\nprint(sys.getsizeof([1, 2, 3, 4]))\nprint(sys.getsizeof((1, 2, 3, 4)))\nprint(sys.getsizeof(list(range(1000))))\nprint(sys.getsizeof(tuple(range(1000))))\n\n#  80\n#  64\n#  96\n#  80 \n#  9112\n#  8048\n</code></pre>\n\n<p>The generated bytecode is exactly the same for all 3 examples:</p>\n\n<pre><code>from dis import dis\n\n\ndef foo(): return 1, 2\n\n\ndef a():\n    output1, output2 = foo()\n\n\ndef b():\n    [output1, output2] = foo()\n\n\ndef c():\n    (output1, output2) = foo()\n\ndis(a)\nprint('-----------------------------------------------------')\ndis(b)\nprint('-----------------------------------------------------')\ndis(c)\n</code></pre>\n\n<p>outputs</p>\n\n<pre><code> 81           0 LOAD_GLOBAL              0 (foo)\n              2 CALL_FUNCTION            0\n              4 UNPACK_SEQUENCE          2\n              6 STORE_FAST               0 (output1)\n              8 STORE_FAST               1 (output2)\n             10 LOAD_CONST               0 (None)\n             12 RETURN_VALUE\n-----------------------------------------------------\n 85           0 LOAD_GLOBAL              0 (foo)\n              2 CALL_FUNCTION            0\n              4 UNPACK_SEQUENCE          2\n              6 STORE_FAST               0 (output1)\n              8 STORE_FAST               1 (output2)\n             10 LOAD_CONST               0 (None)\n             12 RETURN_VALUE\n-----------------------------------------------------\n 89           0 LOAD_GLOBAL              0 (foo)\n              2 CALL_FUNCTION            0\n              4 UNPACK_SEQUENCE          2\n              6 STORE_FAST               0 (output1)\n              8 STORE_FAST               1 (output2)\n             10 LOAD_CONST               0 (None)\n             12 RETURN_VALUE\n</code></pre>\n"}], "owner": {"reputation": 1281, "user_id": 8869570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd0af5294b2a744ac618e1d0d60f07b5?s=128&d=identicon&r=PG&f=1", "display_name": "anonuser01", "link": "https://stackoverflow.com/users/8869570/anonuser01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 54014504, "answer_count": 1, "score": 1, "last_activity_date": 1546472734, "creation_date": 1546470551, "last_edit_date": 1546470942, "question_id": 54014358, "link": "https://stackoverflow.com/questions/54014358/brackets-around-multiple-outputs-in-python-function", "title": "Brackets around multiple outputs in Python function", "body": "<p>In matlab, if we have a function that returns multiple variables, we do something like</p>\n\n<pre><code>[output1, output2] = some_func()\n</code></pre>\n\n<p>In Python, you can simply do</p>\n\n<pre><code>output1, output2 = some_func()\n</code></pre>\n\n<p>Or you could do </p>\n\n<pre><code>[output1, output2] = some_func()\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>(output1, output2) = some_func()\n</code></pre>\n\n<p>The last 2 makes some temporary list and tuple, respectively, but it is not assigned to anything, and you can access the 2 output variables identical to the case without <code>[]</code> or <code>()</code>. Is there anything actually functionally <em>advantageous</em> to using the last 2 syntax besides somewhat looking a little more elegant? </p>\n"}, {"tags": ["python", "printing"], "comments": [{"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 0, "creation_date": 1546470616, "post_id": 54014310, "comment_id": 94865844, "body": "&quot;<code>&quot;{:n}&quot;</code> sounds like what I want but does not seem to actually work.&quot;... I may have missed something but how doesn&#39;t it work?"}, {"owner": {"reputation": 2446, "user_id": 5359531, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b7636325b68a8f82a8f7b30fdfff251a?s=128&d=identicon&r=PG&f=1", "display_name": "user5359531", "link": "https://stackoverflow.com/users/5359531/user5359531"}, "reply_to_user": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 0, "creation_date": 1546470758, "post_id": 54014310, "comment_id": 94865876, "body": "<code>&quot;{:n}&quot;.format(1000000.01)</code> returns <code>&#39;1e+06&#39;</code>"}, {"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 0, "creation_date": 1546470815, "post_id": 54014310, "comment_id": 94865887, "body": "Sorry, how is <code>&quot;{:,}&quot;</code> not working?"}, {"owner": {"reputation": 2446, "user_id": 5359531, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b7636325b68a8f82a8f7b30fdfff251a?s=128&d=identicon&r=PG&f=1", "display_name": "user5359531", "link": "https://stackoverflow.com/users/5359531/user5359531"}, "reply_to_user": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 0, "creation_date": 1546470893, "post_id": 54014310, "comment_id": 94865917, "body": "<code>&quot;{:,}&quot;</code> is not locale-aware and would not work for systems where the thousands separator is <code>.</code> and not <code>,</code>. Unless I am reading the documentation wrong?"}, {"owner": {"reputation": 698, "user_id": 10236724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Eb946207", "link": "https://stackoverflow.com/users/10236724/eb946207"}, "edited": false, "score": 0, "creation_date": 1546471033, "post_id": 54014310, "comment_id": 94865953, "body": "Doesn&#39;t <a href=\"https://stackoverflow.com/questions/1823058/how-to-print-number-with-commas-as-thousands-separators\">this post&#39;s</a> second answer fix that?"}, {"owner": {"reputation": 2446, "user_id": 5359531, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b7636325b68a8f82a8f7b30fdfff251a?s=128&d=identicon&r=PG&f=1", "display_name": "user5359531", "link": "https://stackoverflow.com/users/5359531/user5359531"}, "edited": false, "score": 0, "creation_date": 1546471166, "post_id": 54014310, "comment_id": 94866000, "body": "No, <code>locale.format(&quot;%d&quot;, 1000000.01, grouping=True)</code> returns <code>&#39;1,000,000&#39;</code>, dropping the decimal"}, {"owner": {"reputation": 698, "user_id": 10236724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Eb946207", "link": "https://stackoverflow.com/users/10236724/eb946207"}, "edited": false, "score": 0, "creation_date": 1546471217, "post_id": 54014310, "comment_id": 94866022, "body": "@user5359531 Oh, I see."}, {"owner": {"reputation": 698, "user_id": 10236724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Eb946207", "link": "https://stackoverflow.com/users/10236724/eb946207"}, "edited": false, "score": 0, "creation_date": 1546471717, "post_id": 54014310, "comment_id": 94866154, "body": "@user5359531 I have edited my answer. Does it work?"}, {"owner": {"reputation": 27241, "user_id": 5320906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NOdNo.jpg?s=128&g=1", "display_name": "snakecharmerb", "link": "https://stackoverflow.com/users/5320906/snakecharmerb"}, "edited": false, "score": 0, "creation_date": 1546498807, "post_id": 54014310, "comment_id": 94871685, "body": "Related: <a href=\"https://stackoverflow.com/q/54013614/5320906\">stackoverflow.com/q/54013614/5320906</a>"}], "answers": [{"comments": [{"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 0, "creation_date": 1546470924, "post_id": 54014385, "comment_id": 94865928, "body": "I may be missing something again, but plain <code>print(&quot;{:,}&quot;.format(x))</code> works for me without any more fussing required..."}, {"owner": {"reputation": 698, "user_id": 10236724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Eb946207", "link": "https://stackoverflow.com/users/10236724/eb946207"}, "reply_to_user": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 0, "creation_date": 1546470953, "post_id": 54014385, "comment_id": 94865939, "body": "@Julien Are you sure? I haven&#39;t tested so I could be wrong, but I believe this is right."}, {"owner": {"reputation": 698, "user_id": 10236724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Eb946207", "link": "https://stackoverflow.com/users/10236724/eb946207"}, "reply_to_user": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 0, "creation_date": 1546471697, "post_id": 54014385, "comment_id": 94866149, "body": "<b>Never mind, I re-read the question and I understand now! I edited my answer to work!</b> <i>(I think... I still can&#39;t test)</i>"}, {"owner": {"reputation": 698, "user_id": 10236724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Eb946207", "link": "https://stackoverflow.com/users/10236724/eb946207"}, "reply_to_user": {"reputation": 2446, "user_id": 5359531, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b7636325b68a8f82a8f7b30fdfff251a?s=128&d=identicon&r=PG&f=1", "display_name": "user5359531", "link": "https://stackoverflow.com/users/5359531/user5359531"}, "edited": false, "score": 0, "creation_date": 1546475995, "post_id": 54014385, "comment_id": 94867066, "body": "@user5359531 input is your non-formatted number, and output is the formatted string."}], "tags": [], "owner": {"reputation": 698, "user_id": 10236724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Eb946207", "link": "https://stackoverflow.com/users/10236724/eb946207"}, "is_accepted": false, "score": 0, "last_activity_date": 1546477123, "last_edit_date": 1546477123, "creation_date": 1546470780, "answer_id": 54014385, "question_id": 54014310, "link": "https://stackoverflow.com/questions/54014310/locale-aware-method-to-print-large-number-with-commas-and-decimals/54014385#54014385", "title": "Locale-aware method to print large number with commas and decimals", "body": "<p>I mean, you could split at the decimal point and compute separately. It might not be ideal but it works.</p>\n\n<pre><code># `input` is your number, `output` is the formatted string.\nimport locale #import\nsep = '.' if locale.localeconv()['thousands_sep'] == ',' else ',' #get locale sep\nparts = str(input).split(sep) #get part before and after the sep\nparts[0] = locale.format(\"%d\", parts[0], grouping=True) #format **part 0**\noutput = sep.join(parts) #rejoin\n</code></pre>\n\n<p>I think this will do it.</p>\n\n<p>The main part of importance here is the call to <code>locale.localeconv()['thousands_sep']</code>, which gets the value separator. Then, you invert it on the same line, so that a comma becomes a period and vice verca.</p>\n"}], "owner": {"reputation": 2446, "user_id": 5359531, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b7636325b68a8f82a8f7b30fdfff251a?s=128&d=identicon&r=PG&f=1", "display_name": "user5359531", "link": "https://stackoverflow.com/users/5359531/user5359531"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 456, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1546477123, "creation_date": 1546470137, "last_edit_date": 1546471051, "question_id": 54014310, "link": "https://stackoverflow.com/questions/54014310/locale-aware-method-to-print-large-number-with-commas-and-decimals", "title": "Locale-aware method to print large number with commas and decimals", "body": "<p>There are many well established answers for how to print numbers with commas and/or decimal places, examples <a href=\"https://stackoverflow.com/questions/1823058/how-to-print-number-with-commas-as-thousands-separators\">here</a>, <a href=\"https://stackoverflow.com/questions/455612/limiting-floats-to-two-decimal-points\">here</a>, <a href=\"https://stackoverflow.com/questions/36626017/format-a-number-with-comma-separators-and-round-to-2-decimal-places-in-python-2\">here</a>, etc.</p>\n\n<p>For some reason I cannot find a clear answer on how to do this for large numbers with decimals in a locale-aware way that does not force me to hard-code in the precision (e.g. when reading a file and printing values from it, no prior knowledge of how large or precise the numbers will be). </p>\n\n<p>To make things more complicated I am also hoping to do this in a Python 2.7/3.x cross-compatible way. </p>\n\n<p>So, if I had a number such as <code>1000000.01</code>, I would want it printed as \"1,000,000.01\", and <code>1000000.00001</code> as \"1,000,000.00001\".</p>\n\n<p>Here are methods I have tried which do not work:</p>\n\n<p>(using the standard <a href=\"https://docs.python.org/2.7/library/string.html#format-specification-mini-language\" rel=\"nofollow noreferrer\">string formatter</a>)</p>\n\n<pre><code># https://docs.python.org/2.7/library/string.html#format-specification-mini-language\nx = 1000000.01\nprint(\"{:n}\".format(x)) # 1e+06 ; locale-aware but doesn't work?\nprint(\"{:g}\".format(x)) # 1e+06 ; doesn't work\nprint(\"{:f}\".format(x)) # 1000000.010000 ; wrong number of decimal places\nprint(\"{:,}\".format(x)) # 1,000,000.01 ; desired result but not locale-aware (?)\n</code></pre>\n\n<p>based on the docs, <code>\"{:n}\"</code> sounds like what I want but does not seem to actually work. <code>\"{:,}\"</code> gives the desired result but does not seem to be locale-aware (as per the docs listed; need clarification on this).</p>\n\n<p>(using <code>locale</code> <a href=\"https://docs.python.org/2/library/locale.html\" rel=\"nofollow noreferrer\">library</a>)</p>\n\n<pre><code># https://docs.python.org/2/library/locale.html\nimport locale\nlocale.setlocale(locale.LC_ALL, '')\nprint(locale.format(\"%g\", x, grouping = True)) # 1e+06 ; doesn't work\nprint(locale.format(\"%d\", x, grouping = True)) # 1,000,000 ; loses decimal place\n# print(locale.format(\"%n\", x, grouping = True)) # ValueError: format() must be given exactly one %char format specifier, '%n' not valid\n# print(locale.format(\"{:n}\", x, grouping = True)) # ValueError: format() must be given exactly one %char format specifier, '{:n}' not valid\n\nprint(locale.format_string(\"%g\", x, grouping = True)) # 1e+06 ; doesn't work\n# print(locale.format_string(\"%n\", x, grouping = True)) # TypeError: not enough arguments for format string\nprint(locale.format_string(\"{:n}\", x, grouping = True)) # {:n} ; not a valid formatter ?\n</code></pre>\n\n<p>It seems like <code>locale.format(\"%g\", ...)</code> is closest to what I want but it does not appear to work correctly:</p>\n\n<pre><code>print(locale.format(\"%g\", 1000.01, grouping = True)) # 1,000.01 ; works but only for small numbers\nprint(locale.format(\"%g\", 10000.01, grouping = True)) # 10,000 ; doesn't work, loses decimal\n</code></pre>\n\n<p>It also seems like the <code>n</code> formatter is missing from <code>local.format</code>. </p>\n\n<p>Any ideas? Seems really weird that there is no common established method for this, that I've found so far at least.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1546470081, "post_id": 54014235, "comment_id": 94865710, "body": "Related: <a href=\"https://stackoverflow.com/questions/10293234/why-wont-python-display-this-text-correctly-utf-8-decoding-issue\">Why won&#39;t Python display this text correctly? (UTF-8 Decoding Issue)</a>"}, {"owner": {"reputation": 6871, "user_id": 1316501, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/3f0ddaf1d7d2aaeeb19b6ec8a99a70ee?s=128&d=identicon&r=PG", "display_name": "anon_swe", "link": "https://stackoverflow.com/users/1316501/anon-swe"}, "reply_to_user": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1546470214, "post_id": 54014235, "comment_id": 94865746, "body": "@jpp Thanks for the help!  Took a look, so maybe (since I&#39;m using Python 2), I shouldn&#39;t even be encoding as utf-8 when writing to CSV to begin with?"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1546470255, "post_id": 54014235, "comment_id": 94865756, "body": "Possibly, I&#39;m not really sure tbh, someone with more knowledge of these decoding issues may be able to answer comprehensively."}], "owner": {"reputation": 6871, "user_id": 1316501, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/3f0ddaf1d7d2aaeeb19b6ec8a99a70ee?s=128&d=identicon&r=PG", "display_name": "anon_swe", "link": "https://stackoverflow.com/users/1316501/anon-swe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1546469666, "creation_date": 1546469666, "question_id": 54014235, "link": "https://stackoverflow.com/questions/54014235/pandas-series-tolist-incorrectly-transcribing-empty-space", "title": "Pandas Series.tolist Incorrectly Transcribing Empty Space?", "body": "<p>I have a Pandas DataFrame called <code>df</code>, with a column called <code>eligible?</code> which can contain either <code>\"Yes\"</code> or <code>\"No\"</code>.</p>\n\n<p>So I want to select all names from rows where the <code>eligible?</code> column contains \"Yes\".  So I do this:</p>\n\n<pre><code>df[df[\"eligible?\"].str.lower().str.startswith(\"y\")][\"name\"]\n</code></pre>\n\n<p>I look at the <code>Series</code> output and it looks as expected.  One of the names is <code>\"John \"</code> (note the trailing space).</p>\n\n<p>When I do:</p>\n\n<pre><code>df[df[\"eligible?\"].str.lower().str.startswith(\"y\")][\"name\"].tolist()\n</code></pre>\n\n<p>I get back a list, but now the row that had <code>\"John \"</code> has <code>\"John\\xe3\\x80\\x80\"</code>.  </p>\n\n<p>Any idea what's going on here?  </p>\n\n<p>If it's helpful, I read my DataFrame in from a CSV that was utf-8 encoded.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 0, "creation_date": 1546469694, "post_id": 54014219, "comment_id": 94865585, "body": "groupby has a key parameter"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10652346"}, "reply_to_user": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 0, "creation_date": 1546469742, "post_id": 54014219, "comment_id": 94865596, "body": "Yes, so how could it be possible to solve this example using it?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10652346"}, "edited": false, "score": 0, "creation_date": 1546469997, "post_id": 54014219, "comment_id": 94865682, "body": "Yes @juanpa.arrivillaga, but I know its a nice option to group lists by their items. And I could think of the Pandas equivalent to give an example of what I wanted to achieve"}], "answers": [{"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1546471117, "post_id": 54014270, "comment_id": 94865980, "body": "Minor quibble: <code>np.sign</code> returns <code>-1</code>, <code>0</code> or <code>1</code>, so the grouping for an input with <code>0</code> values would differ between the OP&#39;s code and yours. You&#39;d need a more complete <code>sign</code> function to handle that."}], "tags": [], "owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "is_accepted": false, "score": 0, "last_activity_date": 1546469891, "creation_date": 1546469891, "answer_id": 54014270, "question_id": 54014219, "link": "https://stackoverflow.com/questions/54014219/itertools-groupby-to-group-list-using-another-list/54014270#54014270", "title": "Itertools groupby to group list using another list", "body": "<p>You could do the following:</p>\n\n<pre><code>from itertools import groupby\n\n\ndata =  [1,1,1,-2,-4,-3,1,2]\n\nresult = [sum(1 for _ in group) for _, group in groupby(data, lambda x: x&lt;= 0)]\nprint(result)\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>[3, 3, 2]\n</code></pre>\n\n<p>The statement: <code>sum(1 for _ in group)</code> counts the number of elements in the group. The key <code>lambda x: x&lt;= 0</code> is the <em>sign</em> function.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10652346"}, "edited": false, "score": 0, "creation_date": 1546517379, "post_id": 54014403, "comment_id": 94879933, "body": "Yes quite a hacky way I would say. Nice though. I see that there is no simple or obsvious way of doing this as it seems. Thank you for your comments!"}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 0, "last_activity_date": 1546532672, "last_edit_date": 1546532672, "creation_date": 1546470881, "answer_id": 54014403, "question_id": 54014219, "link": "https://stackoverflow.com/questions/54014219/itertools-groupby-to-group-list-using-another-list/54014403#54014403", "title": "Itertools groupby to group list using another list", "body": "<p>For the general case of grouping one iterable based on the matching value in another iterable, you can just make a cheaty <code>key</code> function that iterates the other iterable, e.g. using your original <code>s</code> and <code>g</code>:</p>\n\n<pre><code>&gt;&gt;&gt; from itertools import groupby\n&gt;&gt;&gt; print([(k, len(list(grp))) for k, grp in groupby(s, key=lambda _, ig=iter(g): next(ig))])\n[(0.0, 3), (2.0, 3), (4.0, 2)]\n</code></pre>\n\n<p>The <code>key</code> function accepts the value from <code>s</code> and ignores it, instead returning the matching value from iterating <code>g</code> manually (the defaulted second argument caches an iterator created from <code>g</code>, then <code>next</code> is used to manually advance it each time; pass a second argument to <code>next</code> to silently ignore mismatched lengths and simply substitute in a default value).</p>\n\n<p>Obviously, for this specific case there are <a href=\"https://stackoverflow.com/a/54014270/364696\">better approaches</a>, but I'm answering the general question asked, not the specific example.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10652346"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 0, "accepted_answer_id": 54014403, "answer_count": 2, "score": 0, "last_activity_date": 1546532672, "creation_date": 1546469553, "last_edit_date": 1546469913, "question_id": 54014219, "link": "https://stackoverflow.com/questions/54014219/itertools-groupby-to-group-list-using-another-list", "title": "Itertools groupby to group list using another list", "body": "<p>In pandas you can use an equivalent in length Series to <code>GroupBy</code> another one, for example:</p>\n\n<pre><code>s = pd.Series([1,1,1,-2,-4,-3,1,2])\ng = np.sign(s).diff().fillna(0).abs().cumsum()\ns.groupby(g).count()\n\n0.0    3\n2.0    3\n4.0    2\ndtype: int64\n</code></pre>\n\n<p>Is it possible to do the same using <code>itertools.groupby</code>? Thus using another list to create groups from the current one? Or perhaps using some key? As long as it gives me an idea of how to solve this case <code>[1,1,1,-2,-4,-3,1,2]</code> to create groups according to the sings would be great.</p>\n\n<p>Expected output:</p>\n\n<pre><code>[3,3,2]\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1546470976, "post_id": 54014283, "comment_id": 94865943, "body": "Why not just <code>df.groupby(&#39;ID&#39;).C_Type.shift(-1) </code>"}, {"owner": {"reputation": 74809, "user_id": 9698684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hj2XY.jpg?s=128&g=1", "display_name": "yatu", "link": "https://stackoverflow.com/users/9698684/yatu"}, "edited": false, "score": 0, "creation_date": 1546471277, "post_id": 54014283, "comment_id": 94866039, "body": "I think this does not satisfy <code>ID = ID and Rank = Rank+1</code>"}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1546524650, "post_id": 54014283, "comment_id": 94884048, "body": "@W-B I do think we should include the sort_values by rank just to ensure the condition of getting the C_Type for the next rank.  However, <code>df.sort_values(&#39;Rank&#39;).groupby(&#39;ID&#39;)[&#39;C_Type&#39;].shift(-1)</code> will work also. :) Thanks."}], "tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 3, "last_activity_date": 1546524688, "last_edit_date": 1546524688, "creation_date": 1546469961, "answer_id": 54014283, "question_id": 54014193, "link": "https://stackoverflow.com/questions/54014193/how-to-assign-different-rows-value-to-new-column/54014283#54014283", "title": "How to assign different row&#39;s value to new column", "body": "<p>Try:</p>\n\n<pre><code>df['C_End'] = df.sort_values('Rank').groupby('ID')['C_Type'].transform('shift',-1)\n</code></pre>\n\n<p>Or as @W-B suggest:</p>\n\n<pre><code>df['C_End'] = df.sort_values('Rank').groupby('ID')['C_Type'].shift(-1)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>    ID  C_ID C_Type  Rank  C_End\n0  123     8    New     1  Renew\n1  123    10  Renew     2  Renew\n2  123    35  Renew     3    NaN\n3  456    36    New     1   Term\n4  456    40   Term     2    NaN\n5  789     7    New     1    NaN\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 74809, "user_id": 9698684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hj2XY.jpg?s=128&g=1", "display_name": "yatu", "link": "https://stackoverflow.com/users/9698684/yatu"}, "is_accepted": false, "score": 1, "last_activity_date": 1546470841, "creation_date": 1546470841, "answer_id": 54014396, "question_id": 54014193, "link": "https://stackoverflow.com/questions/54014193/how-to-assign-different-rows-value-to-new-column/54014396#54014396", "title": "How to assign different row&#39;s value to new column", "body": "<p>Here's one way using <a href=\"https://docs.scipy.org/doc/numpy-1.15.0/reference/generated/numpy.where.html\" rel=\"nofollow noreferrer\"><code>np.where</code></a>:</p>\n\n<pre><code>dfs = df.shift(-1)\nm1 = df.ID == dfs.ID\nm2 = df.Rank + 1 == dfs.Rank\ndf.loc[:, 'C_End'] = np.where(m1 &amp; m2, dfs.C_Type, None)\n\n   ID    C_ID C_Type  Rank C_End\n0  123     8    New     1  Renew\n1  123    10  Renew     2  Renew\n2  123    35  Renew     3   None\n3  456    36    New     1   Term\n4  456    40   Term     2   None\n5  789     7    New     1   None\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 6005914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/816a7442c60d38d2d803ce5436be1afa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/6005914/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 54014283, "answer_count": 2, "score": 4, "last_activity_date": 1546524688, "creation_date": 1546469394, "question_id": 54014193, "link": "https://stackoverflow.com/questions/54014193/how-to-assign-different-rows-value-to-new-column", "title": "How to assign different row&#39;s value to new column", "body": "<p>I'm trying to add a column, 'C_End', to a DataFrame in Pandas that looks something like this: </p>\n\n<pre><code>df = pd.DataFrame({'ID':[123,123,123,456,456,789],\n                   'C_ID':[8,10,35,36,40,7],\n                   'C_Type':['New','Renew','Renew','New','Term','New'],\n                   'Rank':[1,2,3,1,2,1]})\n</code></pre>\n\n<p>The new column needs to be the next 'C_Type' for each ID based on 'Rank', resulting in a DataFrame that looks like this:</p>\n\n<pre><code>    ID  C_ID C_Type Rank  C_End  \n0  123     8    New    1  Renew\n1  123    10  Renew    2  Renew\n2  123    35  Renew    3   None\n3  456    36    New    1   Term\n4  456    40   Term    2   None\n5  789     7    New    1   None\n</code></pre>\n\n<p>Essentially, I want to find the row where ID = ID and Rank = Rank+1 and assign C_Type to new column C_End. I've tried creating a function and using Apply (below), but that took forever and eventually gave me an error. I'm still new to Pandas and Python in general, but I feel like there has to be an easy solution that I'm not seeing.</p>\n\n<pre><code>def get_next_c_type(row):\n    return df.loc[(df['id'] == row['id']) &amp; (df['rank'] == row['rank'] + 1),'c_type']\n\ndf['c_end'] = df.apply(get_next_c_type, axis = 1)  \n</code></pre>\n"}, {"tags": ["python", "selenium", "heroku", "webdriver", "hosting"], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 10903067, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gmTgORnezYM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZgOPV2XFg-ZHx932P3chf2Lsve2Q/mo/photo.jpg?sz=128", "display_name": "Angela L.", "link": "https://stackoverflow.com/users/10903067/angela-l"}, "is_accepted": false, "score": 1, "last_activity_date": 1561676120, "creation_date": 1561676120, "answer_id": 56799290, "question_id": 54014170, "link": "https://stackoverflow.com/questions/54014170/heroku-and-selenium-webdriver-not-working-together/56799290#56799290", "title": "Heroku and Selenium webdriver not working together", "body": "<pre><code>option = webdriver.ChromeOptions()\n\n# You will need to specify the binary location for Heroku \noption.binary_location = os.getenv('GOOGLE_CHROME_BIN')\n\noption.add_argument(\"--headless\")\noption.add_argument('--disable-gpu')\noption.add_argument('--no-sandbox')\nbrowser = webdriver.Chrome(executable_path=os.getenv('CHROME_EXECUTABLE_PATH'), options=option)\n\n</code></pre>\n\n<ol>\n<li>Add two buildpacks: \n\n<ul>\n<li><a href=\"https://github.com/heroku/heroku-buildpack-chromedriver\" rel=\"nofollow noreferrer\">https://github.com/heroku/heroku-buildpack-chromedriver</a></li>\n<li><a href=\"https://github.com/heroku/heroku-buildpack-google-chrome\" rel=\"nofollow noreferrer\">https://github.com/heroku/heroku-buildpack-google-chrome</a></li>\n</ul></li>\n<li>Add Config Vars:<br/>\n\n<ul>\n<li>GOOGLE_CHROME_BIN=/app/.apt/usr/bin/google-chrome</li>\n<li>CHROME_EXECUTABLE_PATH=/app/.chromedriver/bin/chromedriver</li>\n</ul></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 655, "user_id": 10393917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/430a43f1e66e859ac78bee989b4c1ac8?s=128&d=identicon&r=PG", "display_name": "Ronnie", "link": "https://stackoverflow.com/users/10393917/ronnie"}, "is_accepted": false, "score": 0, "last_activity_date": 1580249670, "last_edit_date": 1580249670, "creation_date": 1561824117, "answer_id": 56818964, "question_id": 54014170, "link": "https://stackoverflow.com/questions/54014170/heroku-and-selenium-webdriver-not-working-together/56818964#56818964", "title": "Heroku and Selenium webdriver not working together", "body": "<p>I've posted an answer with chromedriver usage on heroku <a href=\"https://stackoverflow.com/questions/54181339/how-do-i-install-chromedriver-in-a-specific-directory-app-assets-chromedriver/56648980#56648980\">>> here</a></p>\n\n<p>Not sure if even after getting chrome buildpack to work, you'll be successfully able to scrape the data. Instead use firefox buildpack. I would suggest this <a href=\"https://pyronlaboratory.github.io/heroku-integrated-firefox-geckodriver/\" rel=\"nofollow noreferrer\">buildpack</a></p>\n\n<p>Type in <code>heroku buildpacks:add https://github.com/pyronlaboratory/heroku-integrated-firefox-geckodriver</code> to add in your heroku slug and get started with firefox and geckodriver in your application code.</p>\n"}], "owner": {"reputation": 99, "user_id": 10481312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2cfe625b7ef2f8405039f10c5308c01?s=128&d=identicon&r=PG&f=1", "display_name": "Jack A", "link": "https://stackoverflow.com/users/10481312/jack-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1443, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1600616034, "creation_date": 1546469290, "question_id": 54014170, "link": "https://stackoverflow.com/questions/54014170/heroku-and-selenium-webdriver-not-working-together", "title": "Heroku and Selenium webdriver not working together", "body": "<p>I have a flask app that i am trying to host on heroku. i am using selenium to grab data from a website. locally, it worked perfect, but now I am trying to deploy it using heroku, and having major problems. before all i did was point to the path of the webdriver on my local machine. now, I am using these 2 buildpacks - <a href=\"https://github.com/heroku/heroku-buildpack-chromedriver\" rel=\"nofollow noreferrer\">https://github.com/heroku/heroku-buildpack-chromedriver</a> , and <a href=\"https://github.com/heroku/heroku-buildpack-google-chrome\" rel=\"nofollow noreferrer\">https://github.com/heroku/heroku-buildpack-google-chrome</a> . I have no clue how to get it to work, but here is some code that i have found for another version (it doesnt work) - </p>\n\n<pre><code>chrome_options = Options()\n        chrome_options.binary_location = os.environ['GOOGLE_CHROME_BIN']\n        chrome_options.add_argument('--disable-gpu')\n        chrome_options.add_argument('--no-sandbox')\n        chrome_options.add_argument('-- headless')\n        browser = webdriver.Chrome(executable_path= os.environ['CHROMEDRIVER_PATH, chrome_options=chrome_options'])\n</code></pre>\n\n<p>I have no idea if this is correct or even close to it.</p>\n"}, {"tags": ["python", "pandas", "jupyter-notebook", "pandas-datareader"], "comments": [{"owner": {"reputation": 3677, "user_id": 10553976, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0OtkRHQ0PKw/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAFTLpkUFgg8Wso5q8W5jNUeEeS7Q/mo/photo.jpg?sz=128", "display_name": "Charles Landau", "link": "https://stackoverflow.com/users/10553976/charles-landau"}, "edited": false, "score": 0, "creation_date": 1546469675, "post_id": 54014154, "comment_id": 94865583, "body": "What is the output of <code>!pip freeze</code>? (You can run that straight from the notebook)"}, {"owner": {"reputation": 1, "user_id": 6510447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e9a37233722042572954f14de063acd?s=128&d=identicon&r=PG&f=1", "display_name": "Umer", "link": "https://stackoverflow.com/users/6510447/umer"}, "reply_to_user": {"reputation": 3677, "user_id": 10553976, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0OtkRHQ0PKw/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAFTLpkUFgg8Wso5q8W5jNUeEeS7Q/mo/photo.jpg?sz=128", "display_name": "Charles Landau", "link": "https://stackoverflow.com/users/10553976/charles-landau"}, "edited": false, "score": 0, "creation_date": 1546512199, "post_id": 54014154, "comment_id": 94877314, "body": "Sorry for the delay @CharlesLandau pandas 0.23.4, pandas-datareader 0.7.0, matplotlib 3.0.0 are all in there"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6510447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e9a37233722042572954f14de063acd?s=128&d=identicon&r=PG&f=1", "display_name": "Umer", "link": "https://stackoverflow.com/users/6510447/umer"}, "edited": false, "score": 0, "creation_date": 1546512281, "post_id": 54015115, "comment_id": 94877382, "body": "I tried both commands, the requirement was already satisfied for both."}], "tags": [], "owner": {"reputation": 1, "user_id": 9818274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3241944e2cc09887de3ed5577006d40f?s=128&d=identicon&r=PG&f=1", "display_name": "chuanzhi3103", "link": "https://stackoverflow.com/users/9818274/chuanzhi3103"}, "is_accepted": false, "score": 0, "last_activity_date": 1546477477, "creation_date": 1546477477, "answer_id": 54015115, "question_id": 54014154, "link": "https://stackoverflow.com/questions/54014154/jupyter-notebook-import-problems/54015115#54015115", "title": "Jupyter Notebook Import Problems", "body": "<p>Please try in your anaconda prompt </p>\n\n<p>for python 2:</p>\n\n<pre><code>pip install matplotlib \n</code></pre>\n\n<p>for python 3:</p>\n\n<pre><code>pip3 install matplotlib \n</code></pre>\n\n<p>and use anaconda prompt to open jupyter notebook and see. \nHope it can help you.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 6510447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e9a37233722042572954f14de063acd?s=128&d=identicon&r=PG&f=1", "display_name": "Umer", "link": "https://stackoverflow.com/users/6510447/umer"}, "edited": false, "score": 0, "creation_date": 1546562256, "post_id": 54027312, "comment_id": 94899671, "body": "This might have made it even worse since now none of the imports work, even if I open it up with anaconda navigator. I&#39;m not in a position to test suggestion 2 yet."}, {"owner": {"reputation": 3677, "user_id": 10553976, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0OtkRHQ0PKw/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAFTLpkUFgg8Wso5q8W5jNUeEeS7Q/mo/photo.jpg?sz=128", "display_name": "Charles Landau", "link": "https://stackoverflow.com/users/10553976/charles-landau"}, "reply_to_user": {"reputation": 1, "user_id": 6510447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e9a37233722042572954f14de063acd?s=128&d=identicon&r=PG&f=1", "display_name": "Umer", "link": "https://stackoverflow.com/users/6510447/umer"}, "edited": false, "score": 0, "creation_date": 1546562851, "post_id": 54027312, "comment_id": 94899799, "body": "Are you selecting the kernel you created with ipykernel"}, {"owner": {"reputation": 3677, "user_id": 10553976, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0OtkRHQ0PKw/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAFTLpkUFgg8Wso5q8W5jNUeEeS7Q/mo/photo.jpg?sz=128", "display_name": "Charles Landau", "link": "https://stackoverflow.com/users/10553976/charles-landau"}, "reply_to_user": {"reputation": 1, "user_id": 6510447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e9a37233722042572954f14de063acd?s=128&d=identicon&r=PG&f=1", "display_name": "Umer", "link": "https://stackoverflow.com/users/6510447/umer"}, "edited": false, "score": 0, "creation_date": 1546562984, "post_id": 54027312, "comment_id": 94899819, "body": "And did you use your env name or did you leave in the placeholders like <code>myenv</code>"}], "tags": [], "owner": {"reputation": 3677, "user_id": 10553976, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0OtkRHQ0PKw/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAFTLpkUFgg8Wso5q8W5jNUeEeS7Q/mo/photo.jpg?sz=128", "display_name": "Charles Landau", "link": "https://stackoverflow.com/users/10553976/charles-landau"}, "is_accepted": false, "score": 1, "last_activity_date": 1546537718, "creation_date": 1546537718, "answer_id": 54027312, "question_id": 54014154, "link": "https://stackoverflow.com/questions/54014154/jupyter-notebook-import-problems/54027312#54027312", "title": "Jupyter Notebook Import Problems", "body": "<p>Two suggestions:</p>\n\n<p>Explicitly make a kernel from your env. Activate the env (e.g. with <code>source activate env</code>) then try:</p>\n\n<pre><code>python -m ipykernel install --user --name myenv --display-name \"Python (myenv)\"\n</code></pre>\n\n<p><a href=\"https://ipython.readthedocs.io/en/stable/install/kernel_install.html#kernels-for-different-environments\" rel=\"nofollow noreferrer\">Ref</a></p>\n\n<p>Restart the notebook, and look for a new option in the kernels dropdown</p>\n\n<p>Second suggestion:</p>\n\n<p>Import <code>datareader</code> before importing <code>datareader.anything</code>, and repeat that pattern across the notebook for all imports.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 6510447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e9a37233722042572954f14de063acd?s=128&d=identicon&r=PG&f=1", "display_name": "Umer", "link": "https://stackoverflow.com/users/6510447/umer"}, "edited": false, "score": 0, "creation_date": 1546561900, "post_id": 54027783, "comment_id": 94899591, "body": "This seems like it really should work... but it didn&#39;t. Do you recommend a completely new reboot &amp; clean install of everything to do with Python? It will take a long time but hopefully, it will kill the issue. I also can&#39;t see other people getting this issue."}], "tags": [], "owner": {"reputation": 9435, "user_id": 6858244, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wfU-doP3Fhc/AAAAAAAAAAI/AAAAAAAACbY/GNmdrBKqDSM/photo.jpg?sz=128", "display_name": "Prayson W. Daniel", "link": "https://stackoverflow.com/users/6858244/prayson-w-daniel"}, "is_accepted": false, "score": 0, "last_activity_date": 1546539802, "creation_date": 1546539802, "answer_id": 54027783, "question_id": 54014154, "link": "https://stackoverflow.com/questions/54014154/jupyter-notebook-import-problems/54027783#54027783", "title": "Jupyter Notebook Import Problems", "body": "<p>You can also just do<br>\n#1 if you have environment activate it</p>\n\n<pre><code>conda activate yourenvname\n</code></pre>\n\n<p>#2 check if your libraries are there</p>\n\n<pre><code>conda list \n</code></pre>\n\n<p>#3 make a clean kernel</p>\n\n<pre><code>python -m ipykernel install --user\n</code></pre>\n\n<p>#4 open notebook or lab</p>\n\n<pre><code>jupyter notebook \n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6510447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e9a37233722042572954f14de063acd?s=128&d=identicon&r=PG&f=1", "display_name": "Umer", "link": "https://stackoverflow.com/users/6510447/umer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1232, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1546539802, "creation_date": 1546469170, "question_id": 54014154, "link": "https://stackoverflow.com/questions/54014154/jupyter-notebook-import-problems", "title": "Jupyter Notebook Import Problems", "body": "<p>I have problems importing python packages into Jupyter Notebooks. When I open notebooks from the anaconda prompt, nothing can be imported as shown below. </p>\n\n<p><a href=\"https://i.stack.imgur.com/zeWFh.png\" rel=\"nofollow noreferrer\">import problem 1</a></p>\n\n<p>When I open Jupyter Notebook through the anaconda navigator. Most of the module imports work apart from pandas-datareader. </p>\n\n<p><a href=\"https://i.stack.imgur.com/T8mW7.png\" rel=\"nofollow noreferrer\">import problem 2</a></p>\n\n<p>I do not know why pandas-datareader doesn't work because according to prompt it's installed but according to the list of packages in the navigator it is not (unless it's part of pandas). </p>\n\n<p><a href=\"https://i.stack.imgur.com/Fjiyv.png\" rel=\"nofollow noreferrer\">prompt</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/K634q.png\" rel=\"nofollow noreferrer\">navigator</a></p>\n\n<p>Please help. Thank you. </p>\n"}, {"tags": ["python", "macos", "selenium", "selenium-webdriver"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 10859987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61b0eb0567e04c20f760d9eb9e255b17?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Trocchio", "link": "https://stackoverflow.com/users/10859987/joseph-trocchio"}, "edited": false, "score": 0, "creation_date": 1546521912, "post_id": 54014552, "comment_id": 94882470, "body": "Thanks for your help!"}], "tags": [], "owner": {"reputation": 8412, "user_id": 8973620, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7qt6R.jpg?s=128&g=1", "display_name": "Mykola Zotko", "link": "https://stackoverflow.com/users/8973620/mykola-zotko"}, "is_accepted": false, "score": 1, "last_activity_date": 1546471901, "creation_date": 1546471901, "answer_id": 54014552, "question_id": 54014143, "link": "https://stackoverflow.com/questions/54014143/python-switching-browser-focus-with-selenium/54014552#54014552", "title": "Python switching browser focus with selenium", "body": "<p>You can switch between browser tabs/windows as follows:</p>\n\n<pre><code>for handle in browser.window_handles:\n    browser.switch_to_window(handle)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 10859987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61b0eb0567e04c20f760d9eb9e255b17?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Trocchio", "link": "https://stackoverflow.com/users/10859987/joseph-trocchio"}, "edited": false, "score": 0, "creation_date": 1546521832, "post_id": 54015723, "comment_id": 94882423, "body": "browser.switch_to_window(browser.window_handles[1]) # or [-1] for latest tab. # A variation of this line seemed to do the trick."}], "tags": [], "owner": {"reputation": 15697, "user_id": 458214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ef09f4a6e7e0803825d17212d2dba67?s=128&d=identicon&r=PG", "display_name": "ewwink", "link": "https://stackoverflow.com/users/458214/ewwink"}, "is_accepted": false, "score": 1, "last_activity_date": 1546483925, "creation_date": 1546483925, "answer_id": 54015723, "question_id": 54014143, "link": "https://stackoverflow.com/questions/54014143/python-switching-browser-focus-with-selenium/54015723#54015723", "title": "Python switching browser focus with selenium", "body": "<p>try to wait until second tab has handles</p>\n\n<pre><code>browser.find_element_by_tag_name('body').send_keys(Keys.Command+'t')   \n\nWebDriverWait(browser, 5).until(\n    lambda b: len(b.window_handles) != 1\n)\n# switch to second tab\nbrowser.switch_to_window(browser.window_handles[1]) # or [-1] for latest tab\nbrowser.get('https://facebook.com')\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10859987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61b0eb0567e04c20f760d9eb9e255b17?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Trocchio", "link": "https://stackoverflow.com/users/10859987/joseph-trocchio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 707, "favorite_count": 0, "closed_date": 1546495249, "answer_count": 2, "score": 2, "last_activity_date": 1546495283, "creation_date": 1546469072, "question_id": 54014143, "link": "https://stackoverflow.com/questions/54014143/python-switching-browser-focus-with-selenium", "closed_reason": "Duplicate", "title": "Python switching browser focus with selenium", "body": "<p>I am looking to open up multiple browsers with different sites, and navigate those said browsers. I have written the code to open up the initial browser and navigate freely. However, when I open up the second tab and command it to get a new site, it changes the first browser (initial Safari \"tab\") to the new site.</p>\n\n<p>Example Shortened code:</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.keys import \nKeys\n\nbrowser = webdriver.Safari()\nbrowser.get('https://twitter.com')\n\nbrowser.find_element_by_tag_name('body').\nsend_keys(Keys.Command+'t')   \n\n\nbrowser.get('https://facebook.com')\n</code></pre>\n\n<p>At this point the \"twitter tab (first tab)' changes to facebook, while the second tab, which is the one visibly in front, stays vacant.</p>\n\n<p>How do I get the web-driver to control the second tab?</p>\n"}, {"tags": ["python", "regex", "string", "lookahead"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10859974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3289ea51b366617cdbf5ba1e9610afb8?s=128&d=identicon&r=PG&f=1", "display_name": "Ringsi", "link": "https://stackoverflow.com/users/10859974/ringsi"}, "edited": false, "score": 0, "creation_date": 1546469621, "post_id": 54014095, "comment_id": 94865566, "body": "You are completely right! Output now looks as expected. Thank you very much!"}], "tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 0, "last_activity_date": 1546469296, "last_edit_date": 1546469296, "creation_date": 1546468743, "answer_id": 54014095, "question_id": 54014061, "link": "https://stackoverflow.com/questions/54014061/empty-regex-response-using-finditer-and-lookahead/54014095#54014095", "title": "Empty Regex response using finditer and lookahead", "body": "<p>The <a href=\"https://stackoverflow.com/questions/5616822/python-regex-find-all-overlapping-matches\">overlapping matches trick with a look-ahead</a> makes use of the fact that the <code>(?=...)</code> pattern matches at an empty location, then pulls out the captured group nested inside the look-ahead.</p>\n\n<p>You need to print out group 1, explicitly:</p>\n\n<pre><code>for results in sequences:\n    print(results.group(1))\n</code></pre>\n\n<p>This produces:</p>\n\n<pre><code>GMTPRLGLESLLE\nTPRLGLESLLE\n</code></pre>\n\n<p>You probably want to include the <code>M</code> and <code>p</code> characters in the capturing group:</p>\n\n<pre><code>pattern = re.compile(r'(?=(M.*?p))')\n</code></pre>\n\n<p>at which point your output becomes:</p>\n\n<pre><code>MGMTPRLGLESLLEp\nMTPRLGLESLLEp\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10859974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3289ea51b366617cdbf5ba1e9610afb8?s=128&d=identicon&r=PG&f=1", "display_name": "Ringsi", "link": "https://stackoverflow.com/users/10859974/ringsi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 1, "accepted_answer_id": 54014095, "answer_count": 1, "score": 0, "last_activity_date": 1546469296, "creation_date": 1546468520, "last_edit_date": 1546468588, "question_id": 54014061, "link": "https://stackoverflow.com/questions/54014061/empty-regex-response-using-finditer-and-lookahead", "title": "Empty Regex response using finditer and lookahead", "body": "<p>I'm having trouble understanding regex behaviour when using lookahead.</p>\n\n<p>I have a given string in which I have two overlapping patterns (starting with <code>M</code> and ending with <code>p</code>). My expected output would be <code>MGMTPRLGLESLLEp</code> and <code>MTPRLGLESLLEp</code>. My python code below results in two <strong>empty</strong> strings which share a common start with the expected output.</p>\n\n<p>Removal of the lookahead <code>(?=)</code> results in only ONE output string which is the larger one. Is there a way to modify my regex term to prevent empty strings so that I can get both results with one regex term?</p>\n\n<pre><code>import re\n\nstring = 'GYMGMTPRLGLESLLEpApMIRVA'\n\npattern = re.compile(r'(?=M(.*?)p)')\nsequences = pattern.finditer(string)\n\nfor results in sequences:\n    print(results.group())\n    print(results.start())\n    print(results.end())\n</code></pre>\n"}, {"tags": ["python", "django", "apache", "mod-wsgi"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1546472782, "post_id": 54014058, "comment_id": 94866393, "body": "No, there is no virtual file system. More likely the file is being created in another location, probably because the Apache user has a TMPDIR environment var set"}, {"owner": {"reputation": 1975, "user_id": 6070341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHHZU.png?s=128&g=1", "display_name": "Costantino Grana", "link": "https://stackoverflow.com/users/6070341/costantino-grana"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1546500912, "post_id": 54014058, "comment_id": 94872404, "body": "@DanielRoseman How can an environment variable influence this <code>open(&quot;&#47;tmp&#47;test.tmp&quot;,&quot;w&quot;).write(&quot;test&quot;)</code>? Which can later be read. And the file does not exist."}], "answers": [{"tags": [], "owner": {"reputation": 1975, "user_id": 6070341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHHZU.png?s=128&g=1", "display_name": "Costantino Grana", "link": "https://stackoverflow.com/users/6070341/costantino-grana"}, "is_accepted": true, "score": 0, "last_activity_date": 1546509937, "creation_date": 1546509937, "answer_id": 54020056, "question_id": 54014058, "link": "https://stackoverflow.com/questions/54014058/django-running-under-apache-and-mod-wsgi-uses-virtual-file-system/54020056#54020056", "title": "Django running under Apache and mod_wsgi uses &quot;virtual&quot; file system?", "body": "<p>Ok, @DanielRoseman was right: \"More likely the file is being created in another location\". The reason it can impact on any filesystem operation is that it's a feature of <code>systemd</code> called <a href=\"https://muras.eu/2017/12/06/apache-ubuntu-systemd-privatetmp/\" rel=\"nofollow noreferrer\">PrivateTmp</a>. From the <a href=\"https://www.freedesktop.org/software/systemd/man/systemd.exec.html#PrivateTmp=\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n\n<blockquote>\n  <p>sets up a new file system namespace for the executed processes and mounts private /tmp and /var/tmp directories inside it that is not shared by processes outside of the namespace</p>\n</blockquote>\n\n<p>In fact there is a bunch of folders in both <code>/tmp</code> and <code>/var/tmp</code> called something like <code>systemd-private-273bc022d82337529673d61c0673a579-apache2.service-oKiLBu</code>.</p>\n\n<p>Somehow my <code>find</code> command never reached those folders. All created files are there in a very regular filesystem. Now I also understand why an Apache restart clears the Django cache. <code>systemd</code> deletes the process private tmp and creates a new one for the new process.</p>\n\n<p>I found the answer here: <a href=\"https://unix.stackexchange.com/a/303327/329567\">https://unix.stackexchange.com/a/303327/329567</a></p>\n"}], "owner": {"reputation": 1975, "user_id": 6070341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHHZU.png?s=128&g=1", "display_name": "Costantino Grana", "link": "https://stackoverflow.com/users/6070341/costantino-grana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 54020056, "answer_count": 1, "score": 1, "last_activity_date": 1546509937, "creation_date": 1546468487, "question_id": 54014058, "link": "https://stackoverflow.com/questions/54014058/django-running-under-apache-and-mod-wsgi-uses-virtual-file-system", "title": "Django running under Apache and mod_wsgi uses &quot;virtual&quot; file system?", "body": "<p>Ok, I know this is strange, but after a day of searching, I couldn't find any answer to this problem. </p>\n\n<p>I've got this system running since two years with Django under Apache with a classical mod_wsgi installation. An exact mirror of the web site is used for development and testing. </p>\n\n<p>In order to speed up a query, I used the inbuilt Django cache, using a file backend. In development (inbuilt Django server) everything works fine and a file is created under <code>/var/tmp/django_cache</code>. Everything works also in production, but no file is created. </p>\n\n<p>I was surprised, so I started experimenting and inserted a bunch of prints in the <code>django.core.cache</code> modules and followed the execution of the cache stuff. At a certain point I got to a <code>os.makedirs</code>, which doesn't create anything. I inserted a <code>open()</code>, created a file (absolute path) and nothing is created. Tried to read back from the nonexisting file and the content was there.</p>\n\n<p>I'm really puzzled. It seems that somehow there is a sort of \"virtual\" filesystem, which works correctly but in parallel with the real thing. I'm using Django 1.11.11.</p>\n\n<p>Who is doing the magic? Django, Apache, mod_wsgi? Something else?</p>\n"}, {"tags": ["python", "python-3.x", "windows", "executable", "pyinstaller"], "answers": [{"comments": [{"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 1, "creation_date": 1546494966, "post_id": 54015301, "comment_id": 94870628, "body": "Use <code>check_call</code> and a creation flag to avoid creating a console window. For example:  <code>CREATE_NO_WINDOW = 0x08000000;</code> <code>check_call(&#39;shutdown -s -t 60&#39;, creationflags=CREATE_NO_WINDOW)</code>."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 1, "creation_date": 1546495008, "post_id": 54015301, "comment_id": 94870633, "body": "Regarding <code>check_output</code>, since it overrides <code>stdout</code>, <code>Popen</code> has to also duplicate inheritable copies of the existing stdin and stderr handles. This will fail if they&#39;re invalid. When run from a console in Windows 7, a GUI can inherit invalid standard handles. A workaround is to override all 3 handles. For example: <code>output = check_output(&#39;shutdown -s -t 60&#39;, stdin=subprocess.DEVNULL</code>, <code>stderr=subprocess.DEVNULL, creationflags=CREATE_NO_WINDOW)</code>."}, {"owner": {"reputation": 479, "user_id": 10543130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/addfb0c783dbf2d117b9340bfbd78695?s=128&d=identicon&r=PG&f=1", "display_name": "Anis Benna", "link": "https://stackoverflow.com/users/10543130/anis-benna"}, "edited": false, "score": 0, "creation_date": 1546522634, "post_id": 54015301, "comment_id": 94882887, "body": "Using the above method worked on the mentioned script but when I tried it with a longer one, the button somehow opened another instance of the application."}, {"owner": {"reputation": 479, "user_id": 10543130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/addfb0c783dbf2d117b9340bfbd78695?s=128&d=identicon&r=PG&f=1", "display_name": "Anis Benna", "link": "https://stackoverflow.com/users/10543130/anis-benna"}, "edited": false, "score": 0, "creation_date": 1546523356, "post_id": 54015301, "comment_id": 94883313, "body": "EDIT: Sometimes it works (the longer script), sometimes it doesn&#39;t. Sometimes the button opens another instance of the program without executing the command. I created two executables and then put them in the same directory, none of them works, when I deleted one of them, the other magically started working."}, {"owner": {"reputation": 479, "user_id": 10543130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/addfb0c783dbf2d117b9340bfbd78695?s=128&d=identicon&r=PG&f=1", "display_name": "Anis Benna", "link": "https://stackoverflow.com/users/10543130/anis-benna"}, "edited": false, "score": 0, "creation_date": 1546524057, "post_id": 54015301, "comment_id": 94883699, "body": "EDIT2: I created another executable and made a copy of it, I changed the copy&#39;s icon using &quot;ResHacker&quot;. None of them works when in the same folder. Deleting the original somehow makes the copy (with the custom icon) work normally. Can someone explain this ?"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "reply_to_user": {"reputation": 479, "user_id": 10543130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/addfb0c783dbf2d117b9340bfbd78695?s=128&d=identicon&r=PG&f=1", "display_name": "Anis Benna", "link": "https://stackoverflow.com/users/10543130/anis-benna"}, "edited": false, "score": 1, "creation_date": 1546555988, "post_id": 54015301, "comment_id": 94898179, "body": "@SinaUser, we don&#39;t have enough information. Use <code>logging</code> to write errors to a file, instead of depending on printing information to stdout and exceptions to stderr. They aren&#39;t available by default in a GUI process."}, {"owner": {"reputation": 479, "user_id": 10543130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/addfb0c783dbf2d117b9340bfbd78695?s=128&d=identicon&r=PG&f=1", "display_name": "Anis Benna", "link": "https://stackoverflow.com/users/10543130/anis-benna"}, "edited": false, "score": 0, "creation_date": 1546694373, "post_id": 54015301, "comment_id": 94939029, "body": "I think I&#39;ve found the problem, my script has the same file name of a method used in the same script. When I press the button, the file itself is called again instead of the method (as they have the same name). When I tried changing the script name, no errors have been encountered."}], "tags": [], "owner": {"reputation": 948, "user_id": 10513304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/644883a12022877c64abc776c770a84b?s=128&d=identicon&r=PG&f=1", "display_name": "Fabian", "link": "https://stackoverflow.com/users/10513304/fabian"}, "is_accepted": true, "score": 2, "last_activity_date": 1546526490, "last_edit_date": 1546526490, "creation_date": 1546479273, "answer_id": 54015301, "question_id": 54014038, "link": "https://stackoverflow.com/questions/54014038/using-cmd-commands-with-an-executable-python-script/54015301#54015301", "title": "Using CMD commands with an executable python script", "body": "<p><strong>What you can do:</strong></p>\n\n<p>using:</p>\n\n<pre><code>import subprocess\nsubprocess.call([\"shutdown\", \"-f\", \"-s\", \"-t\", \"60\"])\n</code></pre>\n\n<p>this will work. with <code>--windowed</code></p>\n\n<p>It seems thats there is a problem with <code>check_output</code> with <code>--windowed</code> flag :/</p>\n\n<blockquote>\n  <p><strong>Edit1:</strong></p>\n</blockquote>\n\n<p>based on <a href=\"https://stackoverflow.com/users/205580/eryksun\">eryksun</a> comments. <em>Also was my research results was but now it seems proof.</em></p>\n\n<p>Use <code>check_call</code> and a creation flag to avoid creating a console window. For example: <code>CREATE_NO_WINDOW = 0x08000000; check_call('shutdown -s -t 60', creationflags=CREATE_NO_WINDOW)</code>.</p>\n\n<p>Regarding <code>check_output</code>, since it overrides <code>stdout</code>, <code>Popen</code> has to also duplicate inheritable copies of the existing stdin and stderr handles. This will fail if they're invalid. When run from a console in Windows 7, a GUI can inherit invalid standard handles. A workaround is to override all 3 handles. For example: <code>output = check_output('shutdown -s -t 60', stdin=subprocess.DEVNULL, stderr=subprocess.DEVNULL, creationflags=CREATE_NO_WINDOW</code></p>\n\n<blockquote>\n  <p><strong>Edit2:</strong></p>\n</blockquote>\n\n<p>You can also add a icon directly with pyinstaller...<br>\nReference: <a href=\"https://pyinstaller.readthedocs.io/en/stable/usage.html#windows-and-mac-os-x-specific-options\" rel=\"nofollow noreferrer\">Windows and Mac OS X specific options</a></p>\n"}], "owner": {"reputation": 479, "user_id": 10543130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/addfb0c783dbf2d117b9340bfbd78695?s=128&d=identicon&r=PG&f=1", "display_name": "Anis Benna", "link": "https://stackoverflow.com/users/10543130/anis-benna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 617, "favorite_count": 0, "accepted_answer_id": 54015301, "answer_count": 1, "score": 2, "last_activity_date": 1546528522, "creation_date": 1546468385, "last_edit_date": 1546528522, "question_id": 54014038, "link": "https://stackoverflow.com/questions/54014038/using-cmd-commands-with-an-executable-python-script", "title": "Using CMD commands with an executable python script", "body": "<p>After writing the script below(which works perfectly), I open the <code>cmd.exe</code> windows prompt and type the following </p>\n\n<pre><code>pyinstaller -F --windowed myscript.py\n</code></pre>\n\n<p>which gives me a file called \"myscript.exe\".</p>\n\n<p>The problem is when I open the executable and press the button, nothing happens. I think there is a problem with this line:  </p>\n\n<pre><code>check_output(\"shutdown -s -t 60\", shell=True)  \n</code></pre>\n\n<p>Even though the script works \"as a script\", it doesn't work as an executable.<br>\nI've tried other syntax like </p>\n\n<pre><code>os.system(\"shutdown -s -t 60\") \n</code></pre>\n\n<p>but they don't seem to work.  </p>\n\n<pre><code>from tkinter import *\nfrom subprocess import check_output,CalledProcessError\n\nclass main_gui:\n    def __init__(self,master):\n        self.master=master\n        master.geometry(\"250x100\")\n        self.button1=Button(self.master,\n                            text=\"Press me\",\n                            font=\"Times 10 bold\",\n                            command=self.shutdown)\n        self.button1.pack()\n\n    def shutdown(self):\n        try:\n            check_output(\"shutdown -s -t 60\", shell=True)\n            print(\"Computer will shutdown in 60 seconds\")\n        except CalledProcessError:\n            print(\"Already pressed\")\n\nroot = Tk()\nmy_gui = main_gui(root)\nroot.mainloop()\n</code></pre>\n\n<p>What can I do?</p>\n"}, {"tags": ["python", "python-3.x", "pep8"], "comments": [{"owner": {"reputation": 15836, "user_id": 9299259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7A5cq.jpg?s=128&g=1", "display_name": "YOLO", "link": "https://stackoverflow.com/users/9299259/yolo"}, "edited": false, "score": 0, "creation_date": 1546468166, "post_id": 54013999, "comment_id": 94865120, "body": "I vote for list comprehensions."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1546468226, "post_id": 54013999, "comment_id": 94865140, "body": "No, this is entirely for a side-effect, to send a request. You should use a regular loop. Don&#39;t use functional programming constructs, like <code>map</code> or list comprehensions, for side effects!"}, {"owner": {"reputation": 64597, "user_id": 1453822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c8db97d2ecdfe5e044cee4c470abb60?s=128&d=identicon&r=PG", "display_name": "DeepSpace", "link": "https://stackoverflow.com/users/1453822/deepspace"}, "reply_to_user": {"reputation": 15836, "user_id": 9299259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7A5cq.jpg?s=128&g=1", "display_name": "YOLO", "link": "https://stackoverflow.com/users/9299259/yolo"}, "edited": false, "score": 0, "creation_date": 1546468256, "post_id": 54013999, "comment_id": 94865151, "body": "@YOLO Abusing list comprehensions for side effect is bad, and anyway OP wrote  &quot;without create extra list&quot;"}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1546468445, "post_id": 54013999, "comment_id": 94865233, "body": "The entire purpose of <code>map</code> (and generator expressions) is to lazily produce a new list via some mapping function. Not only is this an abuse of <code>map</code> as mentioned above, if you forget to force evaluation of the list in the future, the side effects may not run. If you want to simply loop over a list to carry out side effects, use a plain, imperative loop."}], "answers": [{"comments": [{"owner": {"reputation": 3408, "user_id": 6373357, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/a3b870102aa2df81c64374b893f601ba?s=128&d=identicon&r=PG&f=1", "display_name": "jacobcan118", "link": "https://stackoverflow.com/users/6373357/jacobcan118"}, "edited": false, "score": 0, "creation_date": 1546468841, "post_id": 54014034, "comment_id": 94865363, "body": "so what if the lambda inside the map does not have any side-effect like convert all int element of list into string? <code>map(int, list)</code> still bad idea?"}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "reply_to_user": {"reputation": 3408, "user_id": 6373357, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/a3b870102aa2df81c64374b893f601ba?s=128&d=identicon&r=PG&f=1", "display_name": "jacobcan118", "link": "https://stackoverflow.com/users/6373357/jacobcan118"}, "edited": false, "score": 0, "creation_date": 1546469153, "post_id": 54014034, "comment_id": 94865447, "body": "@jacobcan118 That is exactly the purpose of <code>map</code>, so that would be fine. I believe though that it&#39;s generally recommended to use list comprehensions/generator expressions in modern Python instead of <code>map</code>."}], "tags": [], "owner": {"reputation": 161, "user_id": 10038165, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EP0T--rFTL0/AAAAAAAAAAI/AAAAAAAAAIU/fi7JaGDZs1g/photo.jpg?sz=128", "display_name": "Jaime M", "link": "https://stackoverflow.com/users/10038165/jaime-m"}, "is_accepted": true, "score": 2, "last_activity_date": 1546468473, "last_edit_date": 1546468473, "creation_date": 1546468351, "answer_id": 54014034, "question_id": 54013999, "link": "https://stackoverflow.com/questions/54013999/good-idea-to-use-listmaplambda-x-xxxx-without-create-extra-list/54014034#54014034", "title": "good idea to use list(map(lambda x: xxxx)) without create extra list", "body": "<p>You should use a for loop. </p>\n\n<p>As @juanpa.arrivillaga and @DeepSpace pointed out - using list comprehensions to perform code that has side-effects is probably not a good idea.</p>\n"}], "owner": {"reputation": 3408, "user_id": 6373357, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/a3b870102aa2df81c64374b893f601ba?s=128&d=identicon&r=PG&f=1", "display_name": "jacobcan118", "link": "https://stackoverflow.com/users/6373357/jacobcan118"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "closed_date": 1546468350, "accepted_answer_id": 54014034, "answer_count": 1, "score": -1, "last_activity_date": 1546468473, "creation_date": 1546468113, "question_id": 54013999, "link": "https://stackoverflow.com/questions/54013999/good-idea-to-use-listmaplambda-x-xxxx-without-create-extra-list", "closed_reason": "Duplicate", "title": "good idea to use list(map(lambda x: xxxx)) without create extra list", "body": "<p>I need to send out request one by one by different id and I have following code but I am wondering if it is good idea to use syntax like <code>list(map(lambda x: xxxx), id_list)</code>\nor i should just use one-for loop for it?</p>\n\n<pre><code>id_list = [1,3,4,100,83,99]\nheaders = {'content-type': 'application/json'}\nurl = \"https://www.test.com/api/v6/test.json\"\nresponse = requests.delete(url, data=json.dumps(payload), headers=headers,auth=HTTPBasicAuth(token, 'api_token'))\nlist(map(lambda x: requests.delete(url, data=json.dumps({'id': x}), headers=headers,auth=HTTPBasicAuth(token, 'api_token')), id_list))\n</code></pre>\n"}, {"tags": ["python", "excel", "openpyxl"], "answers": [{"comments": [{"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 0, "creation_date": 1546475599, "post_id": 54014041, "comment_id": 94866987, "body": "Although I think the answer is technically correct a small code sample would make it way easier to understand."}, {"owner": {"reputation": 49, "user_id": 3386063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ad0e39812ee02719204b8fa37dd7941?s=128&d=identicon&r=PG&f=1", "display_name": "tkiral", "link": "https://stackoverflow.com/users/3386063/tkiral"}, "reply_to_user": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 0, "creation_date": 1546476111, "post_id": 54014041, "comment_id": 94867083, "body": "I generally don&#39;t do that to prevent undergraduate copy-pasting ;).  I also think it&#39;d be more helpful for learners to have to implement it themselves.  I can add that in though."}, {"owner": {"reputation": 355, "user_id": 9230289, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/31283de4bd3b890d66ccbdd8ac2d8bc1?s=128&d=identicon&r=PG&f=1", "display_name": "Patriots299", "link": "https://stackoverflow.com/users/9230289/patriots299"}, "edited": false, "score": 0, "creation_date": 1546480981, "post_id": 54014041, "comment_id": 94867952, "body": "I appreciate you editing the post and providing more information. The problem with your code is that it will not differentiate whether there is a new value, but will only catch if the cell value is not blank."}, {"owner": {"reputation": 49, "user_id": 3386063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ad0e39812ee02719204b8fa37dd7941?s=128&d=identicon&r=PG&f=1", "display_name": "tkiral", "link": "https://stackoverflow.com/users/3386063/tkiral"}, "reply_to_user": {"reputation": 355, "user_id": 9230289, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/31283de4bd3b890d66ccbdd8ac2d8bc1?s=128&d=identicon&r=PG&f=1", "display_name": "Patriots299", "link": "https://stackoverflow.com/users/9230289/patriots299"}, "edited": false, "score": 0, "creation_date": 1546536790, "post_id": 54014041, "comment_id": 94890553, "body": "@FranJ Oops; I didn&#39;t include the temp update.....adding that in now.  Based on the original explanation that was present, though, you&#39;d know that this is updated through iteration and that I was missing that from my code"}], "tags": [], "owner": {"reputation": 49, "user_id": 3386063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ad0e39812ee02719204b8fa37dd7941?s=128&d=identicon&r=PG&f=1", "display_name": "tkiral", "link": "https://stackoverflow.com/users/3386063/tkiral"}, "is_accepted": false, "score": -2, "last_activity_date": 1546536822, "last_edit_date": 1546536822, "creation_date": 1546468397, "answer_id": 54014041, "question_id": 54013984, "link": "https://stackoverflow.com/questions/54013984/openpyxl-looping-through-cells-until-condition/54014041#54014041", "title": "OpenPyXl - Looping through cells until condition", "body": "<p>If you want to change as little as possible in your current code, I'd suggest storing the last value in some kind of temporary variable that you write over each time you move to the next row.  You compare the current row's country code to the previous row's country code and, if they're different, you print the index of the row.  If the index of the row isn't easily accessible, you can implement your own counter variable that tracks which index you're on.  There may be more elegant solutions available, but these will work.</p>\n\n<p>Here's an example of the implementation I described above:</p>\n\n<pre><code>i = 0\ntemp = None\nfor row in ws.iter_rows(min_row=1,max_col=1,max_row=223181):\n    for cell in row:\n        if cell.value != temp:\n            print(i)\n        temp = cell.value\n    i += 1\n</code></pre>\n\n<p>You may want to come up with a different way to assign the temporary variable the first time.  This will print the first value no matter what.</p>\n\n<p>The highest upvoted solution <a href=\"https://stackoverflow.com/questions/10614518/iterating-over-a-range-of-rows-using-ws-iter-rows-in-the-optimised-reader-of-ope/13962583#13962583\">here</a> provides a more elegant solution for the issue of printing the index issue. Additionally, <a href=\"https://openpyxl.readthedocs.io/en/latest/optimized.html#\" rel=\"nofollow noreferrer\">this</a> documentation tells us there's a cleaner way of opening and reading the file (see the \"Read-only\" section).</p>\n"}, {"comments": [{"owner": {"reputation": 355, "user_id": 9230289, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/31283de4bd3b890d66ccbdd8ac2d8bc1?s=128&d=identicon&r=PG&f=1", "display_name": "Patriots299", "link": "https://stackoverflow.com/users/9230289/patriots299"}, "edited": false, "score": 0, "creation_date": 1546484675, "post_id": 54014184, "comment_id": 94868514, "body": "It is a good approach. It does not really resolve the question because it does not implement OpenPyXl, but I have thumbed it up. I found an alternative that I have added as an edit. If you want to update your code, and it works, I will be marking your answer as the right one."}], "tags": [], "owner": {"reputation": 64597, "user_id": 1453822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c8db97d2ecdfe5e044cee4c470abb60?s=128&d=identicon&r=PG", "display_name": "DeepSpace", "link": "https://stackoverflow.com/users/1453822/deepspace"}, "is_accepted": false, "score": 1, "last_activity_date": 1546469360, "creation_date": 1546469360, "answer_id": 54014184, "question_id": 54013984, "link": "https://stackoverflow.com/questions/54013984/openpyxl-looping-through-cells-until-condition/54014184#54014184", "title": "OpenPyXl - Looping through cells until condition", "body": "<p>Perhaps the most straightforward approach is using <code>zip</code>, but this will require loading all the rows to memory and creating 2 lists, which may be tricky if you actually have 2 million rows:</p>\n\n<pre><code>li = [1, 1, 2, 2, 3, 3, 1, 1, 2, 1, 2, 3]\nprint([index + 1 for index, (a, b) in enumerate(zip(li[:-1], li[1:])) if a != b])\n#  [2, 4, 6, 8, 9, 10, 11]\n</code></pre>\n\n<p>A more conservative way will be to \"cache\" the last value:</p>\n\n<pre><code>li = [1, 1, 2, 2, 3, 3, 1, 1, 2, 1, 2, 3]\nprevious = None\nfor index, n in enumerate(li):\n    if previous is None:\n        previous = n\n        continue\n    if previous != n:\n        print(index)\n    previous = n\n</code></pre>\n\n<p>outputs</p>\n\n<pre><code>2\n4\n6\n8\n9\n10\n11\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 355, "user_id": 9230289, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/31283de4bd3b890d66ccbdd8ac2d8bc1?s=128&d=identicon&r=PG&f=1", "display_name": "Patriots299", "link": "https://stackoverflow.com/users/9230289/patriots299"}, "edited": false, "score": 0, "creation_date": 1546484832, "post_id": 54015289, "comment_id": 94868536, "body": "It is a good approach, but does not entirely resolve the question. Therefore I have just thumbed your post up. If you want to edit, and it works well, I will mark your answer as the right one. For now, I have found a temporary solution that I have added as an edit."}], "tags": [], "owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "is_accepted": false, "score": 1, "last_activity_date": 1546479197, "creation_date": 1546479197, "answer_id": 54015289, "question_id": 54013984, "link": "https://stackoverflow.com/questions/54013984/openpyxl-looping-through-cells-until-condition/54015289#54015289", "title": "OpenPyXl - Looping through cells until condition", "body": "<p>In order to keep track of when the value changed, you can use a variable to record the last value:</p>\n\n<pre><code>def return_first_of_kind(iterable, key):\n    previous_value = None\n    for value in iterable:\n        if key(value) != previous_value:\n            yield value\n        previous_value = key(value)\n</code></pre>\n\n<p>The you use it as:</p>\n\n<pre><code>def cell_a_value(row):\n    return row[0].value\n\nfor row in return_first_of_kind(ws.iter_rows(), key=cell_a_value):\n    print(row)\n</code></pre>\n\n<p>I forgot how to get the value of the first column from an openpyxl worksheet row, please update the <code>cell_a_value</code> function as needed.</p>\n"}], "owner": {"reputation": 355, "user_id": 9230289, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/31283de4bd3b890d66ccbdd8ac2d8bc1?s=128&d=identicon&r=PG&f=1", "display_name": "Patriots299", "link": "https://stackoverflow.com/users/9230289/patriots299"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 766, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1546536822, "creation_date": 1546468020, "last_edit_date": 1546484719, "question_id": 54013984, "link": "https://stackoverflow.com/questions/54013984/openpyxl-looping-through-cells-until-condition", "title": "OpenPyXl - Looping through cells until condition", "body": "<p>Excel's column A has many rows with different values.  Example:</p>\n\n<pre><code>613\n613\n613\n625\n625\n631\n631...etc\n</code></pre>\n\n<p>I want to iterate through column A and when the cell's value refers to a new value, obtain the cell's row.</p>\n\n<p>Expected result example:\nWhen the cell's value changed to 625, it will return the row 4.  When 631, 6, and so on.</p>\n\n<p>This is my code so far:</p>\n\n<pre><code>from openpyxl import Workbook, load_workbook\n\nwb = load_workbook(\"Workbook.xlsx\")\nws = wb.active\nsheet = wb[\"Visual Query2\"]\n\nfor row in ws.iter_rows(min_row=1, max_col=1, max_row=223181):\n    for cell in row::\n           print(cell.row)\n</code></pre>\n\n<p>I got a bit lost when trying to catch when the cell starts having a different value. If someone can provide me guidance, I will really appreciate it. Thanks.</p>\n\n<p><strong>Edit:</strong> Was able to find a temporary solution utilizing:</p>\n\n<pre><code>wb = load_workbook(\"Workbook.xlsx\")\nws = wb.active\nsheet = wb[\"Sheet\"]\n\nfor fila in ws.iter_rows('A2:A7'):\n    for celda in fila:\n        if celda.value != celda.offset(-1, 0).value:\n            print(celda.row)\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1546468135, "post_id": 54013971, "comment_id": 94865113, "body": "What was wrong with the approaches you found from your research? Why do you think they&#39;re not best practice?"}], "answers": [{"comments": [{"owner": {"reputation": 581, "user_id": 5709203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab035385a8931db29144b5d31de6dba6?s=128&d=identicon&r=PG&f=1", "display_name": "Shantanu", "link": "https://stackoverflow.com/users/5709203/shantanu"}, "edited": false, "score": 0, "creation_date": 1546470140, "post_id": 54014150, "comment_id": 94865729, "body": "Thank you @unutbu, I was looking for a solution that was foolproof against injection. Also, how do I eliminate the trailing comma and %s appearing in the print statements?"}, {"owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "reply_to_user": {"reputation": 581, "user_id": 5709203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab035385a8931db29144b5d31de6dba6?s=128&d=identicon&r=PG&f=1", "display_name": "Shantanu", "link": "https://stackoverflow.com/users/5709203/shantanu"}, "edited": false, "score": 0, "creation_date": 1546471172, "post_id": 54014150, "comment_id": 94866002, "body": "The <code>print(sql, arg)</code> is there only to show you the values in <code>sqls</code> and <code>args</code>. In practice, to avoid SQL Injection, you would call <code>cursor.execute(sql, arg)</code> exactly the way they have been defined -- with <code>sql</code> containing those <code>%s</code> placemarkers. The database adapter will insert the arguments into the sql with proper escaping for you."}, {"owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "reply_to_user": {"reputation": 581, "user_id": 5709203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab035385a8931db29144b5d31de6dba6?s=128&d=identicon&r=PG&f=1", "display_name": "Shantanu", "link": "https://stackoverflow.com/users/5709203/shantanu"}, "edited": false, "score": 0, "creation_date": 1546471264, "post_id": 54014150, "comment_id": 94866035, "body": "Note that the proper placemarker depends on which database adapter you are using. For example, MySQLdb and psycopg use <code>%s</code> placemarkers, but <code>sqlite3</code> uses <code>?</code> placemarkers."}, {"owner": {"reputation": 581, "user_id": 5709203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab035385a8931db29144b5d31de6dba6?s=128&d=identicon&r=PG&f=1", "display_name": "Shantanu", "link": "https://stackoverflow.com/users/5709203/shantanu"}, "edited": false, "score": 0, "creation_date": 1546480941, "post_id": 54014150, "comment_id": 94867946, "body": "Thank you. I replaced <code>%s</code> with <code>?</code> to work for <code>pyodbc</code> and <code>mssql</code>."}], "tags": [], "owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "is_accepted": true, "score": 1, "last_activity_date": 1546481693, "last_edit_date": 1546481693, "creation_date": 1546469141, "answer_id": 54014150, "question_id": 54013971, "link": "https://stackoverflow.com/questions/54013971/pandas-groupby-and-sql-where-clause-parameters/54014150#54014150", "title": "Pandas GroupBy and SQL Where Clause parameters", "body": "<p>Let's <a href=\"http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html\" rel=\"nofollow noreferrer\">use parametrized sql</a> to give hackers one less <a href=\"https://www.theverge.com/2018/8/22/17716622/sec-business-wire-hack-stolen-press-release-fraud-ukraine\" rel=\"nofollow noreferrer\">entryway into our databases</a>: </p>\n\n<pre><code>sqls = []\nargs = []\nfor key, grp in df.groupby(['Contact Name', 'Email Address']):\n    arg = tuple(grp['Contract No'])\n    sql = 'SELECT * FROM TABLE WHERE [Contract No] IN ({})'.format(','.join(['%s']*len(arg)))\n    sqls.append(sql)\n    args.append(arg)\n\nfor sql, arg in zip(sqls, args):\n    print(sql, arg)\n    # SELECT * FROM TABLE WHERE [Contract No] IN (%s) ('2853',)\n    # SELECT * FROM TABLE WHERE [Contract No] IN (%s,%s) ('2854', '2855')\n    # SELECT * FROM TABLE WHERE [Contract No] IN (%s,%s) ('2851', '2852')\n</code></pre>\n\n<p>To execute the parametrized sql, use the <a href=\"http://www.python.org/dev/peps/pep-0249/\" rel=\"nofollow noreferrer\">2-argument form of <code>cursor.execute</code></a>:</p>\n\n<pre><code>for sql, arg in zip(sqls, args):\n    cursor.execute(sql, arg)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 581, "user_id": 5709203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab035385a8931db29144b5d31de6dba6?s=128&d=identicon&r=PG&f=1", "display_name": "Shantanu", "link": "https://stackoverflow.com/users/5709203/shantanu"}, "is_accepted": false, "score": 0, "last_activity_date": 1546469482, "creation_date": 1546469482, "answer_id": 54014204, "question_id": 54013971, "link": "https://stackoverflow.com/questions/54013971/pandas-groupby-and-sql-where-clause-parameters/54014204#54014204", "title": "Pandas GroupBy and SQL Where Clause parameters", "body": "<p>Figured out the solution. I just needed to use a lambda function alongwith groupby.</p>\n\n<pre><code>import pandas as pd\n\ndf1 = pd.DataFrame({\n    'Contact Name':['John Doe','John Doe','Jane Doe','Jim Doe','Jim Doe'],\n    'Email Address':['john.doe@gmail.com','john.doe@gmail.com','jane.doe@gmail.com','jim.doe@gmail.com','jim.doe@gmail.com'],\n    'Contract No':['2851','2852','2853','2854','2855'],\n})\n\ndf2 = df1.groupby(['Contact Name','Email Address'])['Contract No'].apply(lambda x: ','.join('\\'' + x + '\\'')).reset_index()\n\nfor index, row in df2.iterrows():\n    print('SELECT * FROM TABLE WHERE [Contract No] IN (' + row['Contract No'] + ')')\n</code></pre>\n"}], "owner": {"reputation": 581, "user_id": 5709203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab035385a8931db29144b5d31de6dba6?s=128&d=identicon&r=PG&f=1", "display_name": "Shantanu", "link": "https://stackoverflow.com/users/5709203/shantanu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "accepted_answer_id": 54014150, "answer_count": 2, "score": 0, "last_activity_date": 1546481693, "creation_date": 1546467956, "question_id": 54013971, "link": "https://stackoverflow.com/questions/54013971/pandas-groupby-and-sql-where-clause-parameters", "title": "Pandas GroupBy and SQL Where Clause parameters", "body": "<p>I want to get a SQL query string output that takes in multiple parameters in the WHERE Clause from a Pandas DataFrame column using groupby. What is the best way to do this?</p>\n\n<pre><code>import pandas as pd\n\ndf = pd.DataFrame({\n    'Contact Name':['John Doe','John Doe','Jane Doe','Jim Doe','Jim Doe'],\n    'Email Address': ['john.doe@gmail.com','john.doe@gmail.com','jane.doe@gmail.com','jim.doe@gmail.com','jim.doe@gmail.com'],\n    'Contract No':['2851','2852','2853','2854','2855'],\n})\n</code></pre>\n\n<p>From the above example, I need to get 3 different SQL queries that go as follows:</p>\n\n<pre><code>SELECT * FROM TABLE WHERE [Contract No] IN ('2851', '2852')\nSELECT * FROM TABLE WHERE [Contract No] IN ('2853')\nSELECT * FROM TABLE WHERE [Contract No] IN ('2854', '2855')\n</code></pre>\n"}, {"tags": ["python", "pyqt5", "qcombobox"], "answers": [{"tags": [], "owner": {"reputation": 10411, "user_id": 7767694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DoPOp.png?s=128&g=1", "display_name": "S. Nick", "link": "https://stackoverflow.com/users/7767694/s-nick"}, "is_accepted": true, "score": 0, "last_activity_date": 1546470963, "last_edit_date": 1592644375, "creation_date": 1546470963, "answer_id": 54014417, "question_id": 54013969, "link": "https://stackoverflow.com/questions/54013969/expanding-width-of-combobox/54014417#54014417", "title": "Expanding width of Combobox", "body": "<blockquote>\n<p>minimumContentsLength : int</p>\n<p>This property holds the minimum number of characters that should fit into the combobox.</p>\n</blockquote>\n<pre><code>from PyQt5 import QtCore, QtWidgets\n\nclass Widget(QtWidgets.QWidget):\n    def __init__(self):\n        super().__init__()\n        \n        self.setLayout(QtWidgets.QVBoxLayout())\n        \n        combo = QtWidgets.QComboBox()\n        \n        self.layout().addWidget(combo)\n        combo.addItems([&quot;item1&quot;, &quot;item2&quot;, &quot;item3&quot;])\n        combo.activated[str].connect(self.onActivatedText)\n        \n        combo.setMinimumContentsLength(30)                 # +++\n\n    @QtCore.pyqtSlot(str)\n    def onActivatedText(self, text):\n        print(text)\n\nif __name__ == '__main__':\n    import sys\n    app = QtWidgets.QApplication(sys.argv)\n    w = Widget()\n    w.show()\n    sys.exit(app.exec_())\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/jknvh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jknvh.png\" alt=\"enter image description here\" /></a></p>\n"}, {"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": false, "score": 1, "last_activity_date": 1546471018, "creation_date": 1546471018, "answer_id": 54014426, "question_id": 54013969, "link": "https://stackoverflow.com/questions/54013969/expanding-width-of-combobox/54014426#54014426", "title": "Expanding width of Combobox", "body": "<p>You must set a minimum width appropriate to the QComboBox:</p>\n\n<pre><code>from PyQt5 import QtCore, QtGui, QtWidgets\n\nclass Widget(QtWidgets.QWidget):\n    def __init__(self, parent=None):\n        QtWidgets.QWidget.__init__(self, parent)\n        self.setLayout(QtWidgets.QVBoxLayout())\n        combo = QtWidgets.QComboBox()\n        self.layout().addWidget(combo)\n        combo.addItems([\"item1\", \"item2\", \"item3\"])\n        combo.setMinimumWidth(100)\n        combo.activated[str].connect(self.onActivatedText)\n\n    @QtCore.pyqtSlot(str)\n    def onActivatedText(self, text):\n        print(text)\n\n\nif __name__ == '__main__':\n    import sys\n    app = QtWidgets.QApplication(sys.argv)\n    w = Widget()\n    w.show()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p>Before:</p>\n\n<p><a href=\"https://i.stack.imgur.com/tENea.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tENea.png\" alt=\"enter image description here\"></a></p>\n\n<p>After:</p>\n\n<p><a href=\"https://i.stack.imgur.com/EiHf6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EiHf6.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 429, "user_id": 10295907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z31fH.jpg?s=128&g=1", "display_name": "Pavel.D", "link": "https://stackoverflow.com/users/10295907/pavel-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 54014417, "answer_count": 2, "score": 0, "last_activity_date": 1546471018, "creation_date": 1546467950, "last_edit_date": 1546468294, "question_id": 54013969, "link": "https://stackoverflow.com/questions/54013969/expanding-width-of-combobox", "title": "Expanding width of Combobox", "body": "<p>I have a Qcombobox, which I want to set a specific width, which is not depending on item width. I have looked around and find some tips and hints only for C++. I do not have any knowledge on that language!! </p>\n\n<p>What I get by first run:</p>\n\n<p><a href=\"https://i.stack.imgur.com/NNGVQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NNGVQ.png\" alt=\"enter image description here\"></a></p>\n\n<p>What I want to get by first run:</p>\n\n<p><a href=\"https://i.stack.imgur.com/kNQbn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kNQbn.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>from PyQt5 import QtCore, QtWidgets\n\nclass Widget(QtWidgets.QWidget):\n    def __init__(self, parent=None):\n        QtWidgets.QWidget.__init__(self, parent)\n        self.setLayout(QtWidgets.QVBoxLayout())\n        combo = QtWidgets.QComboBox(self)\n        self.layout().addWidget(combo)\n        combo.addItems([\"item1\", \"item2\", \"item3\"])\n        combo.activated[str].connect(self.onActivatedText)\n\n    @QtCore.pyqtSlot(str)\n    def onActivatedText(self, text):\n        print(text)\n\nif __name__ == '__main__':\n    import sys\n    app = QtWidgets.QApplication(sys.argv)\n    w = Widget()\n    w.show()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p>An ugly solution is:</p>\n\n<pre><code>        combo.addItems([\"item1     \", \"item2     \", \"item3     \"])\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 9845, "user_id": 279858, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/05fd26fbba26ef18da572bbc02400ef6?s=128&d=identicon&r=PG", "display_name": "Bill Cheatham", "link": "https://stackoverflow.com/users/279858/bill-cheatham"}, "edited": false, "score": 0, "creation_date": 1546468043, "post_id": 54013943, "comment_id": 94865084, "body": "Hi, yes this is exactly the sort of thing that python and programming is good for. But how to make this work depends on the script you are running. Can you include the script you are running in your question?"}, {"owner": {"reputation": 3773, "user_id": 1838257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540386102f92985c85ced9c6b237dd60?s=128&d=identicon&r=PG", "display_name": "jorijnsmit", "link": "https://stackoverflow.com/users/1838257/jorijnsmit"}, "edited": false, "score": 0, "creation_date": 1546468053, "post_id": 54013943, "comment_id": 94865087, "body": "It is highly likely that what you want is possible but we need more information to help. How are you currently starting your script?"}, {"owner": {"reputation": 31, "user_id": 10859998, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pseC8.jpg?s=128&g=1", "display_name": "Lavender Lin", "link": "https://stackoverflow.com/users/10859998/lavender-lin"}, "edited": false, "score": 0, "creation_date": 1546468778, "post_id": 54013943, "comment_id": 94865334, "body": "thank you for the advice, I just updated my post with my code."}], "answers": [{"comments": [{"owner": {"reputation": 1189, "user_id": 10638232, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2CQwwMqP-hM/AAAAAAAAAAI/AAAAAAAACQA/5LiuWqD4TlQ/photo.jpg?sz=128", "display_name": "GeeTransit", "link": "https://stackoverflow.com/users/10638232/geetransit"}, "edited": false, "score": 0, "creation_date": 1546468135, "post_id": 54013968, "comment_id": 94865115, "body": "Maybe instead of putting it at the bottom of each script, put it in the mentioned <code>main</code> file. That should be simpler."}, {"owner": {"reputation": 1189, "user_id": 10638232, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2CQwwMqP-hM/AAAAAAAAAAI/AAAAAAAACQA/5LiuWqD4TlQ/photo.jpg?sz=128", "display_name": "GeeTransit", "link": "https://stackoverflow.com/users/10638232/geetransit"}, "edited": false, "score": 0, "creation_date": 1546468293, "post_id": 54013968, "comment_id": 94865167, "body": "No problem. Just sayin&#39;, the argument to <code>os.system</code> should be a string. So like <code>os.system(&quot;python3 &lt;file&gt; &lt;arg1&gt; &lt;arg2&gt; &lt;arg3&gt;&quot;)</code>"}], "tags": [], "owner": {"reputation": 61, "user_id": 10372269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bbf0522751c9619a65b92e7f6b0c7ac?s=128&d=identicon&r=PG&f=1", "display_name": "Sushila Jyothi L&#233;v&#234;que", "link": "https://stackoverflow.com/users/10372269/sushila-jyothi-l%c3%a9v%c3%aaque"}, "is_accepted": false, "score": 0, "last_activity_date": 1546468200, "last_edit_date": 1546468200, "creation_date": 1546467948, "answer_id": 54013968, "question_id": 54013943, "link": "https://stackoverflow.com/questions/54013943/how-to-run-the-same-script-multiple-times-with-different-input-and-output-files/54013968#54013968", "title": "How to run the same script multiple times with different input and output files?", "body": "<pre><code>import os\nos.system(python3 &lt;file&gt; &lt;arg1&gt; &lt;arg2&gt; &lt;arg3&gt;)\n</code></pre>\n\n<p>The first script will not close until the last script has finished executing, but this should not be a problem, because it is single threaded.</p>\n"}, {"tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": false, "score": 2, "last_activity_date": 1546475526, "last_edit_date": 1546475526, "creation_date": 1546468873, "answer_id": 54014120, "question_id": 54013943, "link": "https://stackoverflow.com/questions/54013943/how-to-run-the-same-script-multiple-times-with-different-input-and-output-files/54014120#54014120", "title": "How to run the same script multiple times with different input and output files?", "body": "<p>To do it, you could use the following \"driver\" script, but to use it you'll also need to modify the data analysis script so it accepts the input and output file names as command-line arguments.</p>\n\n<p>Also note how the file location and names have had an <code>r</code> prefix added to them. This is because Windows uses the backslash <code>\\</code> character as a path component separator character, but it has special meaning when used in Python string literals. The prefix prevents that interpretation and treats them as normal characters\u2014what's wanted in this case. </p>\n\n<p>Alternately, you could also have changed them all to forward slashes <code>/</code> characters which wouldn't require adding the <code>r</code> prefix because they also work as path separators in Python scripts.</p>\n\n<p>Anyway, here's the driver script (which you could execute from an editor if it supports the execution of Python scripts):</p>\n\n<pre><code>import subprocess\nimport sys\n\nanalysis_script = 'data_analysis.py'\n\nfile_list = [\n    [r\"G:\\BYU OneDrive_G\\OneDrive - BYU Office 365\\BYU\\===Price lab===\\Coding\\\\1023-CD+HD +multi rep\\\\1023-input_python_test.csv\",\n     r\"G:\\BYU OneDrive_G\\OneDrive - BYU Office 365\\BYU\\===Price lab===\\Coding\\\\1023-CD+HD +multi rep\\\\1026-CDtest_output.csv\"\n    ],\n    [r\"G:\\BYU OneDrive_G\\OneDrive - BYU Office 365\\BYU\\===Price lab===\\Coding\\\\1023-CD+HD +multi rep\\\\1036-input_python_test.csv\",\n     r\"G:\\BYU OneDrive_G\\OneDrive - BYU Office 365\\BYU\\===Price lab===\\Coding\\\\1023-CD+HD +multi rep\\\\1042-CDtest_output.csv\"\n    ],\n    # etc ...\n]\n\nfor infile, outfile in file_list:\n    # Note: It's important to put double quotes around everything in case they\n    # have embedded space characters in them.\n    command = '\"%s\" \"%s\" \"%s\" \"%s\"' % (sys.executable,      # command\n                                       analysis_script,     # argv[0]\n                                       infile,              # argv[1]\n                                       outfile)             # argv[2]\n    subprocess.Popen(command)  # Run script and pass it the files.\n\nprint('Done')\n</code></pre>\n\n<p>For it to work you'll also need to have something like the following near the beginning of the data analysis script and remove the hard-coded input and output files names it's currently using. </p>\n\n<p>Here's an example of what needs to be added at the beginning:</p>\n\n<pre><code>import sys\n\ntry:\n    infile_locationAndName = sys.argv[1]\n    outfile_locationAndName =  sys.argv[2]\nexcept IndexError:\n    print('ERROR: wrong number of command-line arguments passed')\n    print('  Usage: \"{}\" &lt;input file name&gt; &lt;output file name&gt;'.format(\n            os.path.basename(__file__)))\n    raise RuntimeError('Missing two required command-line arguments')\n\n# Rest of the (modified) data analysis script ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 9948059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a20afe177244befdf2a1adf68962a3c3?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Galicia", "link": "https://stackoverflow.com/users/9948059/luis-galicia"}, "is_accepted": false, "score": 1, "last_activity_date": 1546469190, "creation_date": 1546469190, "answer_id": 54014158, "question_id": 54013943, "link": "https://stackoverflow.com/questions/54013943/how-to-run-the-same-script-multiple-times-with-different-input-and-output-files/54014158#54014158", "title": "How to run the same script multiple times with different input and output files?", "body": "<p>If you are on linux or mac you can use a bash script. e.g inside a <code>.sh</code> file: </p>\n\n<pre><code>python script1.py\npython script2.py\n...\n</code></pre>\n\n<p>then run on a terminal <code>bash yourfile.sh</code></p>\n"}], "owner": {"reputation": 31, "user_id": 10859998, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pseC8.jpg?s=128&g=1", "display_name": "Lavender Lin", "link": "https://stackoverflow.com/users/10859998/lavender-lin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 936, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1546475526, "creation_date": 1546467770, "last_edit_date": 1546470713, "question_id": 54013943, "link": "https://stackoverflow.com/questions/54013943/how-to-run-the-same-script-multiple-times-with-different-input-and-output-files", "title": "How to run the same script multiple times with different input and output files?", "body": "<p>I am doing my data analysis using the python script, each set of analysis take about 2-3 hours. Is it possible to write a script that can run another file one after the other?\nex. I specified the analysis files I want to be run in the main file, and I simply run the main file and it will automatically run the analysis files?</p>\n\n<p>Or, is there any editor can do that?</p>\n\n<p>From a beginner in python and programming.</p>\n\n<p>Below is the script I want to run multiple time (after changing the infile and outfile location)</p>\n\n<hr>\n\n<pre><code>import numpy as np\nimport pylab\nimport csv\nfrom scipy.optimize import curve_fit\nfrom scipy.stats import t\nimport matplotlib.pyplot as plt\n\n#basic information --set up variable\n#method infodisgunsh\ndenatureMethod=\"CD\" # choose 'CD' for chemical denature, 'HD' for heat denature\nCD_xaxis_FinalGdmClConcentration_value=[0,0.43,0.87,1.3,1.74,2.17,2.61,3.04,3.48]\nCD_conc_upbound=3.48\nCD_conc_lowbound=0\nCD_conc_range=CD_conc_upbound-CD_conc_lowbound\nHD_xasis_normalizedTemp_value=[0,0.129277567,0.224334601,0.338403042,0.429657795,0.539923954,0.646387833,0.775665399,0.882129278,1]\nHD_Temp_upbound=63\nHD_Temp_lowbound=36.7\nHD_temp_range=HD_Temp_upbound-HD_Temp_lowbound\nCI_cutoff=0.3\n\n#run info\ndescriptionOfTheRun=\"F_diet\"# what ever desciption can distinguish\nnumOfReplicate=\"1\" # number of replicate used to generate 1 fit\nplotColor=\"2\"#1=blue,2=organe,3=purple,4=brown\n\n#file selection\ninfile_locationAndName=\"G:\\BYU OneDrive_G\\OneDrive - BYU Office 365\\BYU\\===Price lab===\\Coding\\\\1023-CD+HD +multi rep\\\\1023-input_python_test.csv\"\noutfile_locationAndName=\"G:\\BYU OneDrive_G\\OneDrive - BYU Office 365\\BYU\\===Price lab===\\Coding\\\\1023-CD+HD +multi rep\\\\1026-CDtest_output.csv\"\noutImage_location=\"G:\\BYU OneDrive_G\\OneDrive - BYU Office 365\\BYU\\===Price lab===\\Coding\\\\1023-CD+HD +multi rep\\\\\"\n\n#info for each peptide from infile\nrowLoc=0\nIDLoc=1\nNameLoc=2\nPeptideLoc=3\nReporterLoc=4\n\n#rep1 info\nrep1_notebookCode=\"LL1091\" #the notebook code of the run\nrep1_numPtsLocation=5# type in the number get from excel column to python raw translator\nrep1_Statrt=6 # type in the number get from excel column to python raw translator\nrep1_End=14# type in the number get from excel column to python raw translator\n\n\"\"\"#rep2 info\nrep2_notebookCode=\"LL1191\" #the notebook code of the run\nrep2_numPtsLocation=16# type in the number get from excel column to python raw translator\nrep2_Statrt=17 # type in the number get from excel column to python raw translator\nrep2_End=26# type in the number get from excel column to python raw translator\n\n#rep3_info\nrep3_notebookCode=\"LL1101\" #the notebook code of the run\nrep3_numPtsLocation=1# type in the number get from excel column to python raw translator\nrep3_Statrt=5 # type in the number get from excel column to python raw translator\nrep3_End=6# type in the number get from excel column to python raw translator\"\"\"\n\n\"\"\"#rep4_info\nrep4_notebookCode=\"LL1101\" #the notebook code of the run\nrep4_numPtsLocation=1# type in the number get from excel column to python raw translator\nrep4_Statrt=5 # type in the number get from excel column to python raw translator\nrep4_End=6# type in the number get from excel column to python raw translator\"\"\"\n\n\n#plot color Code, usually don't need to change\ncolor1_dataAndFit=\"#1f77b4\"#blue\ncolor1_Chalf=\"#aec7e8\"\ncolor1_CI=\"#c6dbef\"\n\n\ncolor2_dataAndFit=\"#ff7f0e\"#orgnae\ncolor2_Chalf=\"#ffbb78\"\ncolor2_CI=\"#fdd0a2\"\n\ncolor3_dataAndFit=\"#5254a3\"#purple\ncolor3_Chalf=\"#9e9ac8\"\ncolor3_CI=\"#dadaeb\"\n\ncolor4_dataAndFit=\"#8c6d31\"#brown\ncolor4_Chalf=\"#e7ba52\"\ncolor4_CI=\"#e7cb94\"\n\n\n\n\ndef sigmoid(x,B,A,Chalf, b):#the fitting equation\n    y =B+((A-B)/(1+np.exp((-1/b)*(Chalf-x))))\n    return y\n\ninfile=open(infile_locationAndName,\"r\")#\"r\"=reading mode\nreader=csv.reader(infile)#create reader object\nheader=next(reader)\n\n\n\n\n\n#base on replication numbers\nif numOfReplicate==\"1\":\n    xdata1=[]\n    finalData=[]\n    for i in range(rep1_Statrt,rep1_End+1):#5 is the data start, 15 is the end of data+1\n        flow=float(header[i])#making the input value to number\n        xdata1.append(flow)\n    for row in reader:\n        # input y value\n        ydata1=[]\n        for i in range(rep1_Statrt,rep1_End+1):# it means row[5] to row[15]\n            flow=float(row[i])#making the input value to number\n            ydata1.append(flow)\n\n        #baisc information input\n        title=row[rowLoc]\n        ID=row[IDLoc]\n        proteinName=row[NameLoc]\n        Peptide=row[PeptideLoc]\n        numOfReporter=row[ReporterLoc]\n        numOf_rep1_pts=row[rep1_numPtsLocation]\n\n        #baisc information ouput\n        tempRow=[title]#[0]\n        tempRow.append(ID)#[1]\n        tempRow.append(proteinName)#[2]\n        tempRow.append(Peptide)#[3]\n        tempRow.append(numOfReporter)#[4]\n        tempRow.append(numOf_rep1_pts)#[5]\n\n        try:#if statment, when it is not error\n            #normalized the data\n            normalized_ydata1=[]\n            normalized_xdata1=[]\n\n            #normalizing rep1 dataset\n            if denatureMethod==\"CD\":#first point is 0, last point is 1\n                for element in ydata1: # read from the begining, find first data !=0, make it A\n                    if element !=0:\n                        A=element# set 0\n                        break\n                for element in reversed(ydata1): #read from the end, find first data !=0, make it B\n                    if element !=0:\n                        B=element#set 1\n                        #print (\"A\",A)\n                        break\n                for i in range(len(ydata1)):\n                    if ydata1[i] !=0:\n                        element=(ydata1[i]-A)/(B-A) #3 for each data !=0, normalized_ydata=(data-A)/(B-A)\n                        normalized_ydata1.append(element)\n                        normalized_xdata1.append(xdata1[i]) #4 for each normalized_ydata, find the xdata, make it normalized_xdata\n                    else:\n                        normalized_ydata1.append(\"error\")\n                        normalized_xdata1.append(xdata1[i])\n\n            if denatureMethod==\"HD\":#first point is 1, last point is 0\n                for element in ydata1: #1 read from the begining, find first data !=0, make it B\n                    if element !=0:\n                        B=element# set 1\n                        break\n                for element in reversed(ydata1): #2 read from the end, find first data !=0, make it A\n                    if element !=0:\n                        A=element#set 0\n                        break\n                for i in range(len(ydata1)):\n                    if ydata1[i] !=0:\n                        element=(ydata1[i]-A)/(B-A) #3 for each data !=0, normalized_ydata=(data-A)/(B-A)\n                        normalized_ydata1.append(element)\n                        normalized_xdata1.append(xdata1[i]) #4 for each normalized_ydata, find the xdata, make it normalized_xdata\n                    else:\n                        normalized_ydata1.append(\"error\")\n                        normalized_xdata1.append(xdata1[i])\n\n            #Set data set for fit and plot\n            xplot1=[]\n            yplot1=[]\n\n            for i in range (len(normalized_ydata1)):\n                if normalized_ydata1[i]!=\"error\":\n                    yplot1.append(normalized_ydata1[i])\n                    xplot1.append(normalized_xdata1[i])\n\n            #fit Rep1 to s curve\n            AL_fit_result_output=[]\n            popt1, pcov1 = curve_fit(sigmoid, xplot1, yplot1)\n            AL_fit_result_output.extend(popt1)#extend merge two list to one big list\n                                                #popt has all the parameter (variable) in regression equation (x,B, A, Chalf, b)\n                                                                                                        #row [-, 0, 1, 2,    3] in  AL_fit_result_output\n            if denatureMethod==\"CD\":\n                x1 = np.linspace(0, 4, 50)\n            if denatureMethod==\"HD\":\n                x1 = np.linspace(0, 1.2, 50)\n            y1= sigmoid(x1, *popt1)# *popt split the two variable\n            AL_Chalf=AL_fit_result_output[2]\n            AL_b=AL_fit_result_output[3]\n\n            #calculate AL confidence interval\n            numOfPoint_AL_repA=float(numOf_rep1_pts)\n            sumPoints_AL=numOfPoint_AL_repA\n            tempRow.append(sumPoints_AL)#[6]\n            AL_Standard_error=np.sqrt(np.diag(pcov1))\n            AL_fit_result_output.extend(AL_Standard_error)#[4,5,6,7]=[Berror, Aerror, Chalferror, berror]\n            AL_ConfidenceInterval_chalf=t.ppf(.975, (sumPoints_AL-1))* AL_fit_result_output[6]/np.sqrt(sumPoints_AL)\n            AL_fit_result_output.append(AL_ConfidenceInterval_chalf)#[8]\n            if denatureMethod==\"CD\":\n                CI_ratioTOrange=AL_ConfidenceInterval_chalf/CD_conc_range\n                AL_fit_result_output.append(CI_ratioTOrange)#[9]\n            if denatureMethod==\"HD\":\n                CI_ratioTOrange=AL_ConfidenceInterval_chalf/HD_temp_range\n                AL_fit_result_output.append(CI_ratioTOrange)#[9]\n            AL_CI_Chalf_lowbound=AL_Chalf-AL_fit_result_output[8]\n            AL_CI_Chalf_upbound=AL_Chalf+AL_fit_result_output[8]\n            AL_fit_result_output.append(AL_CI_Chalf_lowbound)#[10]\n            AL_fit_result_output.append(AL_CI_Chalf_upbound)#[11]\n            AL_ConfidenceInterval_b=t.ppf(.975, (sumPoints_AL-1))* AL_fit_result_output[7]/np.sqrt(sumPoints_AL)\n            AL_fit_result_output.append(AL_ConfidenceInterval_b)#[12]\n            AL_CI_b_lowbound=AL_b-AL_fit_result_output[12]\n            AL_CI_b_upbound=AL_b+AL_fit_result_output[12]\n            AL_fit_result_output.append(AL_CI_b_lowbound)#[13]\n            AL_fit_result_output.append(AL_CI_b_upbound)#[14]\n\n            #compute AL r squared\n            residuals=(yplot1)-sigmoid((xplot1),*popt1)\n            ss_res=np.sum(residuals**2)\n            ss_tot=np.sum(((yplot1)-np.mean(yplot1))**2)\n            r_squared1=1-(ss_res/ss_tot)\n            AL_fit_result_output.append(r_squared1)#[15]; append add something to the list\n            if denatureMethod==\"HD\":\n                Chalf1_temp=(AL_Chalf*HD_temp_range)+HD_Temp_lowbound\n                AL_fit_result_output.append(Chalf1_temp)#[16]\n            if denatureMethod==\"CD\":\n                Chalf1_normalized=AL_Chalf/CD_conc_range\n                AL_fit_result_output.append(Chalf1_normalized)#[16]\n\n\n\n            tempRow.extend(AL_fit_result_output)\n            tempRow.extend(normalized_ydata1)\n\n\n            #generate the figure\n            if CI_ratioTOrange&lt;CI_cutoff:\n                graphName=descriptionOfTheRun+\"_\"+\"row#\"+title+\" (has CI)\"+\"\\n\"+ID +\"||\"+ proteinName+\"\\n\"+Peptide\n            else:\n                graphName=descriptionOfTheRun+\"_\"+\"row#\"+title+\"\\n\"+ID +\"||\"+ proteinName+\"\\n\"+Peptide\n\n            #plot color\n            if plotColor==\"1\":#choose from blue, orange, purple, brown\n                plt.plot(xplot1, yplot1,color=color1_dataAndFit,ls=':',marker='o',label='rep1_'+rep1_notebookCode)\n                #plt.plot(xplot2, yplot2,color=color1_dataAndFit,ls=':',marker='^',label='AL_1057')\n                pylab.plot(x1,y1,color1_dataAndFit, label='fit')\n                pylab.axvline(AL_Chalf,color=color1_Chalf,ls='-',label='C1/2')#chalf\n                if CI_ratioTOrange&lt;CI_cutoff:\n                    plt.axvspan((AL_Chalf-AL_fit_result_output[8]), (AL_Chalf+AL_fit_result_output[8]),color=color1_CI)#CI\n            if plotColor==\"2\":#choose from blue, orange, purple, brown\n                plt.plot(xplot1, yplot1,color=color2_dataAndFit,ls=':',marker='o',label='rep1_'+rep1_notebookCode)\n                #plt.plot(xplot2, yplot2,color=color2_dataAndFit,ls=':',marker='^',label='AL_1057')\n                pylab.plot(x1,y1,color2_dataAndFit, label='fit')\n                pylab.axvline(AL_Chalf,color=color2_Chalf,ls='-',label='C1/2')#chalf\n                if CI_ratioTOrange&lt;CI_cutoff:\n                    plt.axvspan((AL_Chalf-AL_fit_result_output[8]), (AL_Chalf+AL_fit_result_output[8]),color=color2_CI)#CI\n            if plotColor==\"3\":#choose from blue, orange, purple, brown\n                plt.plot(xplot1, yplot1,color=color3_dataAndFit,ls=':',marker='o',label='rep1_'+rep1_notebookCode)\n                #plt.plot(xplot2, yplot2,color=color3_dataAndFit,ls=':',marker='^',label='AL_1057')\n                pylab.plot(x1,y1,color3_dataAndFit, label='fit')\n                pylab.axvline(AL_Chalf,color=color3_Chalf,ls='-',label='C1/2')#chalf\n                if CI_ratioTOrange&lt;CI_cutoff:\n                    plt.axvspan((AL_Chalf-AL_fit_result_output[8]), (AL_Chalf+AL_fit_result_output[8]),color=color3_CI)#CI\n            if plotColor==\"4\":#choose from blue, orange, purple, brown\n                plt.plot(xplot1, yplot1,color=color4_dataAndFit,ls=':',marker='o',label='rep1_'+rep1_notebookCode)\n                #plt.plot(xplot2, yplot2,color=color4_dataAndFit,ls=':',marker='^',label='AL_1057')\n                pylab.plot(x1,y1,color4_dataAndFit, label='fit')\n                pylab.axvline(AL_Chalf,color=color4_Chalf,ls='-',label='C1/2')#chalf\n                if CI_ratioTOrange&lt;CI_cutoff:\n                    plt.axvspan((AL_Chalf-AL_fit_result_output[8]), (AL_Chalf+AL_fit_result_output[8]),color=color4_CI)#CI\n\n            #plot label\n            if denatureMethod==\"CD\":\n                pylab.xlabel('denaturant concentration')\n                pylab.ylabel('% labeled')\n            if denatureMethod==\"HD\":\n                pylab.xlabel('normalized temperature')\n                pylab.ylabel('% soluble')\n            #pylab.ylim(0.3, 2.2)\n            pylab.legend(loc='best')\n            pylab.title(graphName,fontsize=10)\n            pylab.savefig(outImage_location+title+\"_\"+proteinName+\".jpg\")\n            pylab.clf()#clearfig, start a new piece , make sure do it before or after a set of instruction\n\n        except :#define the error\n            print (title)\n\n        finalData.append(tempRow)\n\n    #output the data file\n    outfile=open(outfile_locationAndName,\"w\",newline=\"\")\n    writer=csv.writer(outfile)#create write object\n    newheader=[\"row\",\"protein ID\",\"ProteinNAme\",\"Peptide\",\"numOfReporter\",\"numOf_rep1_pts\",\"sumPoints\"]\n    newheader_AL_fitOutPut_CD=[\"B\",\"A\",\"Chalf\",\"b\",\"B_err\",\"A_err\",\"Chalf_err\",\"b_err\",\"CI_Chalf\",\"CIratioTOrange\",\"CI_Chalf_low\",\"CI_Chalf_up\",\"CI_b\",\"CI_b_low\",\"CI_b_up\",\"r_square\",\"Chalf_normalized\"]\n    newheader_AL_fitOutPut_HD=[\"B\",\"A\",\"Chalf\",\"b\",\"B_err\",\"A_err\",\"Chalf_err\",\"b_err\",\"CI_Chalf\",\"CIratioTOrange\",\"CI_Chalf_low\",\"CI_Chalf_up\",\"CI_b\",\"CI_b_low\",\"CI_b_up\",\"r_square\",\"Chalf_temp\"]\n    if denatureMethod==\"CD\":\n        newheader.extend(newheader_AL_fitOutPut_CD)\n        normalized_header1=CD_xaxis_FinalGdmClConcentration_value\n        newheader.extend(normalized_header1)\n    if denatureMethod==\"HD\":\n        newheader.extend(newheader_AL_fitOutPut_HD)\n        normalized_header1=HD_xasis_normalizedTemp_value\n        newheader.extend(normalized_header1)\n\n    writer.writerow(newheader)\n    for addvariable in finalData:\n        writer.writerow(addvariable)\n    outfile.close()\n    infile.close()\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "logging"], "answers": [{"comments": [{"owner": {"reputation": 11589, "user_id": 1128047, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/23e6238b3a165e043c3d25d40b7cceda?s=128&d=identicon&r=PG", "display_name": "Jonah Bishop", "link": "https://stackoverflow.com/users/1128047/jonah-bishop"}, "reply_to_user": {"reputation": 87, "user_id": 6442398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f98902a9cb799d9fc920c827387ebe8?s=128&d=identicon&r=PG&f=1", "display_name": "J. Lin", "link": "https://stackoverflow.com/users/6442398/j-lin"}, "edited": false, "score": 0, "creation_date": 1546539403, "post_id": 54013983, "comment_id": 94891701, "body": "I&#39;ve added a variant for IPython that I think will work (I don&#39;t have IPython installed to validate)."}], "tags": [], "owner": {"reputation": 11589, "user_id": 1128047, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/23e6238b3a165e043c3d25d40b7cceda?s=128&d=identicon&r=PG", "display_name": "Jonah Bishop", "link": "https://stackoverflow.com/users/1128047/jonah-bishop"}, "is_accepted": true, "score": 1, "last_activity_date": 1546539434, "last_edit_date": 1546539434, "creation_date": 1546468019, "answer_id": 54013983, "question_id": 54013925, "link": "https://stackoverflow.com/questions/54013925/how-to-make-streamhandler-overwrite-every-time/54013983#54013983", "title": "how to make streamHandler overwrite every time", "body": "<p>I believe that the best you can do is clear the console window on each execution. You can do that using this helpful function (<a href=\"https://stackoverflow.com/a/684344/1128047\">found here</a>):</p>\n\n<pre><code>import os\n\ndef clear_screen():\n    os.system('cls' if os.name == 'nt' else 'clear')\n\ndef clear_ipython():\n    os.system('!cls' if os.name == 'nt' else '!clear')\n</code></pre>\n\n<p>Just call the <code>clear_screen()</code> routine at the start of your script.</p>\n"}, {"tags": [], "owner": {"reputation": 87, "user_id": 6442398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f98902a9cb799d9fc920c827387ebe8?s=128&d=identicon&r=PG&f=1", "display_name": "J. Lin", "link": "https://stackoverflow.com/users/6442398/j-lin"}, "is_accepted": false, "score": 0, "last_activity_date": 1546538976, "creation_date": 1546538976, "answer_id": 54027597, "question_id": 54013925, "link": "https://stackoverflow.com/questions/54013925/how-to-make-streamhandler-overwrite-every-time/54027597#54027597", "title": "how to make streamHandler overwrite every time", "body": "<p>In the end, I found the following answer works. Do a hasHandlers check first and remove any existing handlers to avoid appending handlers every time.</p>\n\n<p>It's weird that logger.handlers.clear() method is not in the documentation.</p>\n\n<blockquote>\n  <p><a href=\"https://stackoverflow.com/a/44049484/6442398\">https://stackoverflow.com/a/44049484/6442398</a></p>\n</blockquote>\n"}], "owner": {"reputation": 87, "user_id": 6442398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f98902a9cb799d9fc920c827387ebe8?s=128&d=identicon&r=PG&f=1", "display_name": "J. Lin", "link": "https://stackoverflow.com/users/6442398/j-lin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 54013983, "answer_count": 2, "score": 1, "last_activity_date": 1546539434, "creation_date": 1546467657, "question_id": 54013925, "link": "https://stackoverflow.com/questions/54013925/how-to-make-streamhandler-overwrite-every-time", "title": "how to make streamHandler overwrite every time", "body": "<p>I hope to overwrite the previous logging every time I run the application. I figure it out for FileHandler by specifying file mode being 'w'. Where can I specify similar behaviour for StreamHandler? Consider the following code, if running multiple times, 'test.log' will always show a single line of 'test' while the console will show multiple lines of 'test'. </p>\n\n<p>I tried the flush method but it doesn't work.</p>\n\n<pre><code>import logging\n\nlogger = logging.getLogger(__name__)\nlogger.setLevel(logging.INFO)\n\nfile_handler = logging.FileHandler('test.log', mode = 'w')\nlogger.addHandler(file_handler)\n\nstreamHandler = logging.StreamHandler()\nlogger.addHandler(streamHandler)\n\nlogger.info('test')\n</code></pre>\n\n<p>I hope the console will show a single line of 'test' even if running multiple times.</p>\n"}, {"tags": ["python", "python-3.x", "cryptography"], "comments": [{"owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "edited": false, "score": 0, "creation_date": 1546469568, "post_id": 54013915, "comment_id": 94865550, "body": "You are having the function <code>alphabet_position(letter)</code> return itself rather than return a variable inside the function. Basically it is recursing over itself which doesn&#39;t seem to be your desired behavior. I think you mean to <code>return pos</code> in that function"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10859928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f96ab7b13be2ef9d645e76a4d681d9f?s=128&d=identicon&r=PG&f=1", "display_name": "Wesley", "link": "https://stackoverflow.com/users/10859928/wesley"}, "edited": false, "score": 0, "creation_date": 1546468445, "post_id": 54013986, "comment_id": 94865234, "body": "Okay, thanks! Then, when I ran it, it says:line 14, in rotate_character     y = (x + rot)%26 TypeError: unsupported operand type(s) for +: &#39;int&#39; and &#39;str&#39;"}], "tags": [], "owner": {"reputation": 1631, "user_id": 10730242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YTo3N.jpg?s=128&g=1", "display_name": "manveti", "link": "https://stackoverflow.com/users/10730242/manveti"}, "is_accepted": false, "score": 0, "last_activity_date": 1546468030, "creation_date": 1546468030, "answer_id": 54013986, "question_id": 54013915, "link": "https://stackoverflow.com/questions/54013915/crypto-python-encryption/54013986#54013986", "title": "Crypto Python Encryption", "body": "<p>Your <code>alphabet_position</code> function's return line calls itself with the same argument it was passed. You probably meant to return <code>alphabet_pos[letter]</code> (or better, <code>pos</code>) instead of <code>alphabet_position(letter)</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 10859928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f96ab7b13be2ef9d645e76a4d681d9f?s=128&d=identicon&r=PG&f=1", "display_name": "Wesley", "link": "https://stackoverflow.com/users/10859928/wesley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 206, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1546468030, "creation_date": 1546467557, "question_id": 54013915, "link": "https://stackoverflow.com/questions/54013915/crypto-python-encryption", "title": "Crypto Python Encryption", "body": "<p>I am trying to create a program that generates a coded message that looks like gibberish to any outsiders.</p>\n\n<p>I want it to allow a message to be encrypted using any rotation amount. So, users will be able to type a message in the terminal and specify a rotation amount (13, 4, 600, etc) and the program will print the resulting encrypted message.</p>\n\n<p>The final interactive program will run like this:</p>\n\n<p>$ python caesar.py\nType a message:\nHello, World!\nRotate by:\n5\nMjqqt, Btwqi!</p>\n\n<p>I using some helper functions to help break the problem down into manageable steps.</p>\n\n<p>I have tried writing a function called alphabet_position(letter), which receives a letter ( a string with only one alphabetic character) and returns the 0-based numerical position of that letter within the alphabet, assigning the values of 0 to a and A, 1 to b and B, all the way up to 25 for z and Z.</p>\n\n<p>Then I wrote another function rotate_character(char, rot) which receives a character char ( a string of length 1), and an integer rot. The function should return a new string of length 1, the result of rotating char by rot number of places to the right. It should use the alphabet_position function above and wrap back around to the beginning of the alphabet if the rotation is greater than 25.</p>\n\n<p>Then, I wrote one more function called encrypt(text, rot) which receives an input of a string and an integer. The second argument, rot, specifies the rotation amount. The function should return the result of rotating each letter in the text by rot places to the right.</p>\n\n<p>The result in the terminal should look like this:</p>\n\n<p>$ python caesar.py\nType a message:\nHello, World!\nRotate by:\n5\nMjqqt, Btwqi!</p>\n\n<p>For the final portion of this, I want to create a Vigenere cipher.</p>\n\n<p>Vigenere uses a word as the encryption key, rather than an integer. The finished program will behave like this:</p>\n\n<p>$ python vigenere.py\nType a message:\nThe crow flies at midnight!\nEncryption key:\nboom\nUvs osck rmwse bh auebwsih!</p>\n\n<p>If you could provide any information on what I have done incorrectly with this code, I would appreciate it.</p>\n\n<pre><code>def encrypt(text,rot):\n    text_new = \"\"\n    for pos in range(len(text)):\n        text_new += rotate_character(text[pos],int(rot))\n    return text_new\n\ndef alphabet_position(letter):\n    alphabet_pos = {'A':0, 'a':0, 'B':1, 'b':1, 'C':2, 'c':2, \n'D':3, 'd':3, 'E':4, 'e':4, 'F':5, 'f':5, 'G':6, 'g':6, 'H':7, \n'h':7, 'I':8, 'i':8, 'J':9, 'j':9, 'K':10, 'k':10, 'L':11, 'l':11, \n'M':12, 'm':12, 'N':13, 'n':13, 'O':14, 'o':14, 'P':15, 'p':15, \n'Q':16, 'q':16, 'R':17, 'r':17, 'S':18, 's':18, 'T':19, 't':19, \n'U':20, 'u':20, 'V':21, 'v':21, 'W':22, 'w':22, 'X':23, 'x':23, \n'Y':24, 'y':24, 'Z':25, 'z':25}\n    pos = alphabet_pos[letter]\n    return alphabet_position(letter)\n\ndef rotate_character(char,rot):\n    x = (alphabet_position(char))\n    y = (x + rot)%26\n    if (ord(char) &gt;= 97) and (ord(char) &lt;= 122): # lowercase\n        return x.lower\n    elif (ord(char) &gt;= 65) and (ord(char) &lt;=90): # uppercase\n        return x.upper\n    else:\n        return char\n\nchar = input('Enter a character:')\nrot = input('Enter a number to rotate by:')\nprint(rotate_character(char,rot))\n\n\ndef main():\n    text = input(\"Type a message\")\n    print(\"text\")\n    rot = input(\"Rotate by:\")\n\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>\n\n<p>Instead of the expected results of encrypting the message, the terminal returned this instead: \nline 10, in alphabet_position\n    return alphabet_position(letter)\n  [Previous line repeated 987 more times]\nRecursionError: maximum recursion depth exceeded</p>\n"}, {"tags": ["python", "pandas", "hover", "plotly", "scatter-plot"], "answers": [{"tags": [], "owner": {"reputation": 63, "user_id": 7561045, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lHqRq.png?s=128&g=1", "display_name": "Lucas Moskun", "link": "https://stackoverflow.com/users/7561045/lucas-moskun"}, "is_accepted": true, "score": 2, "last_activity_date": 1546469467, "creation_date": 1546469467, "answer_id": 54014203, "question_id": 54013858, "link": "https://stackoverflow.com/questions/54013858/how-to-set-scatter-plot-hover-info-with-pandas-dataframe-column-in-python-with-p/54014203#54014203", "title": "How to Set Scatter Plot Hover Info With Pandas Dataframe Column in Python With Plotly", "body": "<p>I solved the problem. It looks like the hoverinfo paramater can only be 'x', 'y', 'z', 'text', or a few other specified commands. Here is the code that compiled:</p>\n\n<pre><code>display = go.Scatter(\n    x = data['x_data'],\n    y = data['y_data'],\n    text = data['id'],\n    hoverinfo = 'text',\n    mode = 'markers',\n    name = \"data\",\n    marker = dict(\n    size = 6,\n    color = 'rgba(76, 224, 128, 0.79)'\n    )\n)\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 7561045, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lHqRq.png?s=128&g=1", "display_name": "Lucas Moskun", "link": "https://stackoverflow.com/users/7561045/lucas-moskun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1609, "favorite_count": 0, "accepted_answer_id": 54014203, "answer_count": 1, "score": 2, "last_activity_date": 1546469519, "creation_date": 1546467167, "last_edit_date": 1546469519, "question_id": 54013858, "link": "https://stackoverflow.com/questions/54013858/how-to-set-scatter-plot-hover-info-with-pandas-dataframe-column-in-python-with-p", "title": "How to Set Scatter Plot Hover Info With Pandas Dataframe Column in Python With Plotly", "body": "<p>I am using pandas to generate the data for my plotly scatter plot. However when I try to convert a column to a list for the hoverinfo I am unable to successfully compile. </p>\n\n<p>I am using the list function. I have also tried data['id'].values, and data['id'].tolist. </p>\n\n<pre><code>hoverList = list(data.id)\ndisplay = go.Scatter(\n    x = data['x_data'],\n    y = data['y_data'],\n    hoverinfo = 'hoverList',\n    mode = 'markers',\n    name = \"data\",\n    marker = dict(\n    size = 6,\n    color = 'rgba(76, 224, 128, 0.79)'\n    )\n)\n</code></pre>\n\n<p>Output recieved:</p>\n\n<blockquote>\n  <p>Invalid value of type 'builtins.str' received for the 'hoverinfo' property of scatter\n          Received value: 'hoverList'</p>\n</blockquote>\n"}, {"tags": ["python", "keras", "label", "predict"], "answers": [{"comments": [{"owner": {"reputation": 1091, "user_id": 5479704, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-hjpSYH_37i4/AAAAAAAAAAI/AAAAAAAAAFc/SP4HPI--B0k/photo.jpg?sz=128", "display_name": "Liam Hanninen", "link": "https://stackoverflow.com/users/5479704/liam-hanninen"}, "edited": false, "score": 0, "creation_date": 1546470233, "post_id": 54014202, "comment_id": 94865750, "body": "Thanks for taking a stab at this! I don&#39;t want to find the integer class label (for this question). I want to find what the integer class label <i>that ties</i> to my labels. All Keras knows is the data I trained it on. Imagine I didn&#39;t even encode - and that these (0,1,4,5,7,9) are just discrete integers that identify my classes. (0,1,2,3,4,5) are the very same classes but are meaningless to me because I don&#39;t know which one of my labels tie to them."}, {"owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "reply_to_user": {"reputation": 1091, "user_id": 5479704, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-hjpSYH_37i4/AAAAAAAAAAI/AAAAAAAAAFc/SP4HPI--B0k/photo.jpg?sz=128", "display_name": "Liam Hanninen", "link": "https://stackoverflow.com/users/5479704/liam-hanninen"}, "edited": false, "score": 0, "creation_date": 1546470429, "post_id": 54014202, "comment_id": 94865797, "body": "Keras does not store that information, the semantic meaning of thr labels is something defined at model training and has to be saved separately."}, {"owner": {"reputation": 1091, "user_id": 5479704, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-hjpSYH_37i4/AAAAAAAAAAI/AAAAAAAAAFc/SP4HPI--B0k/photo.jpg?sz=128", "display_name": "Liam Hanninen", "link": "https://stackoverflow.com/users/5479704/liam-hanninen"}, "edited": false, "score": 0, "creation_date": 1546525125, "post_id": 54014202, "comment_id": 94884320, "body": "How? That might be the answer I&#39;m looking for."}, {"owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "reply_to_user": {"reputation": 1091, "user_id": 5479704, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-hjpSYH_37i4/AAAAAAAAAAI/AAAAAAAAAFc/SP4HPI--B0k/photo.jpg?sz=128", "display_name": "Liam Hanninen", "link": "https://stackoverflow.com/users/5479704/liam-hanninen"}, "edited": false, "score": 0, "creation_date": 1546525533, "post_id": 54014202, "comment_id": 94884584, "body": "@LiamHanninen You should include the training script in your question for that to be answerable."}, {"owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "reply_to_user": {"reputation": 1091, "user_id": 5479704, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-hjpSYH_37i4/AAAAAAAAAAI/AAAAAAAAAFc/SP4HPI--B0k/photo.jpg?sz=128", "display_name": "Liam Hanninen", "link": "https://stackoverflow.com/users/5479704/liam-hanninen"}, "edited": false, "score": 0, "creation_date": 1546553035, "post_id": 54014202, "comment_id": 94897198, "body": "@LiamHanninen I don&#39;t see the dataset or the labels, the semantic meaning comes from the dataset."}], "tags": [], "owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "is_accepted": false, "score": 0, "last_activity_date": 1546469452, "creation_date": 1546469452, "answer_id": 54014202, "question_id": 54013853, "link": "https://stackoverflow.com/questions/54013853/labels-for-keras-model-predicting-multi-classification-problem/54014202#54014202", "title": "Labels for Keras Model Predicting Multi-Classification Problem", "body": "<p>Keras doesn't order anything, it all depend on how the classes in the data you used to train the model are defined and one-hot encoded.</p>\n\n<p>You can usually recover the integer class label by taking the <code>argmax</code> of the class probability array for each sample.</p>\n\n<p>From your example, 0.1 is class 0, 0.4 is class 1, 0.003 is class 2, 0.001 is class 3, 0.5 is class 4, and 0.003 is class 5 (6 classes in total).</p>\n"}], "owner": {"reputation": 1091, "user_id": 5479704, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-hjpSYH_37i4/AAAAAAAAAAI/AAAAAAAAAFc/SP4HPI--B0k/photo.jpg?sz=128", "display_name": "Liam Hanninen", "link": "https://stackoverflow.com/users/5479704/liam-hanninen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 770, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1546552686, "creation_date": 1546467100, "last_edit_date": 1546552686, "question_id": 54013853, "link": "https://stackoverflow.com/questions/54013853/labels-for-keras-model-predicting-multi-classification-problem", "title": "Labels for Keras Model Predicting Multi-Classification Problem", "body": "<p>If I have a set of targets a.k.a y's as <code>[1,0,9,9,7,5,4,0,4,1]</code> and I use <code>model.predict(X)</code> Keras returns a 6 item array for each of the 10 samples. It returns 6 items because there are 6 possible targets (0,1,4,5,7,9) and keras returns a decimal/float (for each label) representing likelihood of any one of those being the correct target. For the first sample, for example - where y=1 Keras returns an array that looks like this: <code>[.1, .4,.003,.001,.5,.003]</code>. </p>\n\n<p>I want to know which value matches to which target (does .1 refer to 1 because it's first in the dataset or 0 because it's the lowest number or 9 because it's the last number, etc). <strong>How does Keras order it's predictions?</strong> <a href=\"https://keras.io/models/model/\" rel=\"nofollow noreferrer\">The documentation</a> does not seem to articulate this; it only says </p>\n\n<blockquote>\n  <p>\"Generates output predictions for the input samples.\"</p>\n</blockquote>\n\n<p>So I'm not sure how to match the labels to the prediction results.</p>\n\n<p>EDIT:</p>\n\n<p>Here is my model and training code:</p>\n\n<pre><code>X_train, X_test, y_train, y_test = train_test_split(data, labels, test_size=0.25, random_state=42)\n\nY_train = to_categorical(y_train)\nY_test = to_categorical(y_test)\n\nsequence_input = Input(shape=(MAX_SEQUENCE_LENGTH,), dtype='int32')\nembedded_sequences = embedding_layer(sequence_input)\nx = Conv1D(64, 5, activation='relu')(embedded_sequences)\nx = MaxPooling1D(4)(x)\nx = Conv1D(64, 5, activation='relu')(x)\nx = MaxPooling1D(4)(x)\nx = Conv1D(64, 5, activation='relu')(x)\nx = MaxPooling1D(4)(x)  # global max pooling\nx = Flatten()(x)\nx = Dense(64, activation='relu')(x)\npreds = Dense(labels_Index, activation='softmax')(x)\n\nmodel = Model(sequence_input, preds)\nmodel.fit(X_train, Y_train, epochs=10, verbose = 1) \n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1546467451, "post_id": 54013847, "comment_id": 94864884, "body": "Because you open the file in write mode in a loop, which wipes any contents from the previous loop. Open in append mode (though this will be really inefficient and you&#39;ll probably want to refactor the code to be able to use <code>writerows</code> and open the file only once)"}], "answers": [{"tags": [], "owner": {"reputation": 5133, "user_id": 154762, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d07d8564c1726ca28a6b99e560f0ec7?s=128&d=identicon&r=PG", "display_name": "solarc", "link": "https://stackoverflow.com/users/154762/solarc"}, "is_accepted": false, "score": 1, "last_activity_date": 1546467697, "creation_date": 1546467697, "answer_id": 54013932, "question_id": 54013847, "link": "https://stackoverflow.com/questions/54013847/write-output-of-for-loop-in-csv-python/54013932#54013932", "title": "write output of for loop in csv python", "body": "<p>You are opening the file, writing and closing it inside the loop (the <code>with</code> makes sure the file is closed after the with's scope is done) so it is replacing the previous file for each element in the loop.</p>\n\n<p>Try opening the file only once, before the loop:</p>\n\n<pre><code>with open ('/home/shayez/Desktop/karim.csv','wt') as csvfile:\n    writer = csv.writer(csvfile, delimiter =\"\\t\" )\n    writer.writerow(header)\n\n    for result in records :\n        PMID = result['PMID']\n        Abstract = result['AB']\n        title = result['TI']\n        Date = result['DP']\n\n        print (PMID,Date,title,Abstract)\n\n        fields = [PMID, title,Date,Abstract]\n        rows = [PMID,Date,title,Abstract]\n\n        writer.writerow(rows)\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10439809, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xVGbU3z6s68/AAAAAAAAAAI/AAAAAAAAAC0/4BmY6SytpQU/photo.jpg?sz=128", "display_name": "Shayez Karim", "link": "https://stackoverflow.com/users/10439809/shayez-karim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 790, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1546467697, "creation_date": 1546467073, "question_id": 54013847, "link": "https://stackoverflow.com/questions/54013847/write-output-of-for-loop-in-csv-python", "title": "write output of for loop in csv python", "body": "<p>i want to write the result of for loop which is PMID = Id of litrature ,Date = date of publication ,title  =  title of article,Abstract =  abtract of artilce in csv file but it is saving only one element of the output no all </p>\n\n<pre><code>  import numpy as np \n  from Bio import Entrez\n  from Bio import Medline\n  import csv\n  import pandas as pd\n  Entrez.email = \"shayezkarimcide@gmail.com\"\n\n  handle = Entrez.esearch(db=\"pmc\", \n        term = \"Antimicrobial resistance Drug Resistance\",\n        rettype = \"medline\",retmode = \"txt\",\n        retmax= \"200\",sort = \"pub date\")\n\n  result = Entrez.read(handle)\n\n  handle.close()\n\n  Id = result ['IdList']\n\n  print (Id)\n\n  handle2 = Entrez.efetch(db=\"pmc\", \n    id=Id, rettype=\"medline\", \n    retmode=\"text\")\n\n  records = Medline.parse(handle2)\n\n\n  header = ['ID','Date','Title','Abstract']\n\n\n\n  for result in records :\n\n   PMID = result['PMID']\n   Abstract = result['AB']\n   title = result['TI']\n   Date = result['DP']\n\n   print (PMID,Date,title,Abstract)\n\n\n   fields = [PMID, title,Date,Abstract]\n\n   rows = [PMID,Date,title,Abstract]\n\n   with open ('/home/shayez/Desktop/karim.csv','wt') as csvfile:\n      writer = csv.writer(csvfile, delimiter =\"\\t\" )\n      writer.writerow(header)\n\n      writer.writerow(rows)\n\n  handle2.close()\n</code></pre>\n"}, {"tags": ["python", "numpy", "random"], "comments": [{"owner": {"reputation": 6519, "user_id": 2069380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac5cb90925b4059b6b2c0885c9ffaf?s=128&d=identicon&r=PG", "display_name": "Ohad Eytan", "link": "https://stackoverflow.com/users/2069380/ohad-eytan"}, "edited": false, "score": 0, "creation_date": 1546467277, "post_id": 54013800, "comment_id": 94864820, "body": "Easiest way is to re-choice until you got a valid set. Does efficiency important?"}, {"owner": {"reputation": 10419, "user_id": 1840471, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/dnKrL.jpg?s=128&g=1", "display_name": "Max Ghenis", "link": "https://stackoverflow.com/users/1840471/max-ghenis"}, "reply_to_user": {"reputation": 6519, "user_id": 2069380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac5cb90925b4059b6b2c0885c9ffaf?s=128&d=identicon&r=PG", "display_name": "Ohad Eytan", "link": "https://stackoverflow.com/users/2069380/ohad-eytan"}, "edited": false, "score": 0, "creation_date": 1546467446, "post_id": 54013800, "comment_id": 94864879, "body": "The use case will be over a few hundred thousand records, so efficiency isn&#39;t critical but I&#39;d like to minimize looping."}, {"owner": {"reputation": 6519, "user_id": 2069380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac5cb90925b4059b6b2c0885c9ffaf?s=128&d=identicon&r=PG", "display_name": "Ohad Eytan", "link": "https://stackoverflow.com/users/2069380/ohad-eytan"}, "edited": false, "score": 0, "creation_date": 1546467611, "post_id": 54013800, "comment_id": 94864942, "body": "You can choose one item at a time and update the probabilities for each step."}, {"owner": {"reputation": 6519, "user_id": 2069380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac5cb90925b4059b6b2c0885c9ffaf?s=128&d=identicon&r=PG", "display_name": "Ohad Eytan", "link": "https://stackoverflow.com/users/2069380/ohad-eytan"}, "edited": false, "score": 1, "creation_date": 1546467789, "post_id": 54013800, "comment_id": 94865003, "body": "BTW, why {3} is valid? There is a place to add item 1"}, {"owner": {"reputation": 10419, "user_id": 1840471, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/dnKrL.jpg?s=128&g=1", "display_name": "Max Ghenis", "link": "https://stackoverflow.com/users/1840471/max-ghenis"}, "reply_to_user": {"reputation": 6519, "user_id": 2069380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac5cb90925b4059b6b2c0885c9ffaf?s=128&d=identicon&r=PG", "display_name": "Ohad Eytan", "link": "https://stackoverflow.com/users/2069380/ohad-eytan"}, "edited": false, "score": 0, "creation_date": 1546469335, "post_id": 54013800, "comment_id": 94865492, "body": "You&#39;re right, updated. And yes I&#39;ll work on the one-item-at-a-time approach."}], "answers": [{"tags": [], "owner": {"reputation": 10419, "user_id": 1840471, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/dnKrL.jpg?s=128&g=1", "display_name": "Max Ghenis", "link": "https://stackoverflow.com/users/1840471/max-ghenis"}, "is_accepted": false, "score": 1, "last_activity_date": 1546474666, "creation_date": 1546474666, "answer_id": 54014850, "question_id": 54013800, "link": "https://stackoverflow.com/questions/54013800/how-to-produce-a-budget-constrained-weighted-random-sample-where-items-have-var/54014850#54014850", "title": "How to produce a budget-constrained weighted random sample, where items have varying probabilities and weights?", "body": "<p>Here's a one-at-a-time approach:</p>\n\n<ol>\n<li>Get the set of items with weight below the budget.</li>\n<li>Select a random item from this set, according to each's probability.</li>\n<li>Add this to a running list and remove it from the set of available items.</li>\n<li>Repeat 1-3 until no remaining items can fill the gap between the accrued weight and the budget.</li>\n</ol>\n\n<p>Here's a function to do it, which as expected only produces the sets {0, 1} and {0, 2} in the example:</p>\n\n<pre><code>def weighted_budgeted_random_sample(df, budget):\n    \"\"\" Produce a weighted budgeted random sample.\n\n    Args:\n        df: DataFrame with columns for `prob` and `weight`.\n        budget: Total weight budget.\n\n    Returns:\n        List of index values of df that constitute the sample.\n\n    \"\"\"\n    ids = []\n    total = 0\n    while total &lt; budget:\n        remaining = budget - total\n        df = df[df.weight &lt;= remaining]\n        # Stop if there are no records with small enough weight.\n        if df.shape[0] == 0:\n            break\n        # Select one record.\n        selection = random.choice(df.index, p=(df.prob / df.prob.sum()))\n        total += df.loc[selection].weight\n        df.drop(selection, inplace=True)\n        ids.append(selection)\n    return ids\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>df = pd.DataFrame({\n    'weight': [4, 5, 6],\n    'prob': [0.1, 0.5, 0.8]\n})\n\nweighted_budgeted_random_sample(df, 10)\n# [2, 0]\n</code></pre>\n\n<p>This could probably be optimized by starting with <code>random.choice</code> for a number of items that wouldn't be constrained by the budget.</p>\n"}, {"comments": [{"owner": {"reputation": 10419, "user_id": 1840471, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/dnKrL.jpg?s=128&g=1", "display_name": "Max Ghenis", "link": "https://stackoverflow.com/users/1840471/max-ghenis"}, "edited": false, "score": 1, "creation_date": 1546533060, "post_id": 54016329, "comment_id": 94888779, "body": "Thank you this is great, and good to learn about <code>Counter</code>. I agree that the one-at-a-time approach affects probabilities, especially with few items (1 gets selected 55% of the time even though it has only a 10% probability). In practice I&#39;ll have hundreds of thousands of items to choose from, and hitting the target closely is more important, so this won&#39;t be such an issue."}, {"owner": {"reputation": 21903, "user_id": 9274732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2713715b9156a66c16d7c1331528dce8?s=128&d=identicon&r=PG&f=1", "display_name": "Ben.T", "link": "https://stackoverflow.com/users/9274732/ben-t"}, "reply_to_user": {"reputation": 10419, "user_id": 1840471, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/dnKrL.jpg?s=128&g=1", "display_name": "Max Ghenis", "link": "https://stackoverflow.com/users/1840471/max-ghenis"}, "edited": false, "score": 1, "creation_date": 1546537809, "post_id": 54016329, "comment_id": 94891010, "body": "@MaxGhenis glad it make it for you. thanks for confirming for the affects on probabilities, I&#39;m learning about it these days for a new job I start soon :)"}], "tags": [], "owner": {"reputation": 21903, "user_id": 9274732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2713715b9156a66c16d7c1331528dce8?s=128&d=identicon&r=PG&f=1", "display_name": "Ben.T", "link": "https://stackoverflow.com/users/9274732/ben-t"}, "is_accepted": true, "score": 1, "last_activity_date": 1546489478, "creation_date": 1546489478, "answer_id": 54016329, "question_id": 54013800, "link": "https://stackoverflow.com/questions/54013800/how-to-produce-a-budget-constrained-weighted-random-sample-where-items-have-var/54016329#54016329", "title": "How to produce a budget-constrained weighted random sample, where items have varying probabilities and weights?", "body": "<p>What you can do, is using <code>np.random.choice</code> with the probabilities like you do but for the full size of you data. Then <code>reindex</code> the <code>df</code> with the new order you get from <code>np.random.choice</code>. Use <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.cumsum.html\" rel=\"nofollow noreferrer\"><code>cumsum</code></a> on the column weight and finally return only the index until it reaches the value you want. </p>\n\n<pre><code>def weighted_budgeted_random_sample_all(df, budget):\n   random_index_order = np.random.choice( df.index, size = len(df), \n                                          p = df.prob, replace = False)\n   s = df.reindex(random_index_order).weight.cumsum()\n   return s[s &lt;= budget].index.values\n</code></pre>\n\n<p>Now the problem with this method, is that with the <code>df</code> as in the question and a <code>budget</code> of 10, then some solutions are only the index 1 or 2 because if <code>random_index_order</code> is equal to <code>[2,1,0]</code> or <code>[1,2,0]</code> then the <code>cumsum</code> is higher than 10 at the second row. </p>\n\n<p>See with a <a href=\"https://docs.python.org/3.7/library/collections.html#collections.Counter\" rel=\"nofollow noreferrer\"><code>Counter</code></a>, the use of <code>tuple</code> and <code>np.sort</code> are just to make the <code>Counter</code> work and easier to see the result:</p>\n\n<pre><code>from collections import Counter\nprint (Counter([ tuple(np.sort(weighted_budgeted_random_sample_all(df,10))) \n                 for i in range(1000)]))\n# Counter({(0, 1): 167, (0, 2): 111, (1,): 390, (2,): 332})\n</code></pre>\n\n<p>as you can see, some draws were in the order with 2 and 3 as the first 2 values and the result is only 2 or 3 because the sum of their weights is 11. </p>\n\n<p>But actually, if you try the same thing with a budget of 11, then you get the expected output:</p>\n\n<pre><code>print (Counter([ tuple(np.sort(weighted_budgeted_random_sample_all(df,11))) \n                 for i in range(1000)]))\n# Counter({(0, 1): 169, (0, 2): 111, (1, 2): 720})\n</code></pre>\n\n<p>Here you find the three possibles set and the fact that the set <code>{1,2}</code> is obtained more often make sense.</p>\n\n<p>I saw that you revised your question after a comment saying you <em>'ll work on the one-item-at-a-time approach</em>. I believe than doing this will have an effect on the overall probabilities but I don't know enough in probabilities to say why. If you really want, then I assume you can combine your approach and mine to gain some time:</p>\n\n<pre><code>def weighted_budgeted_random_sample_mixed(df, budget):\n    ids = []\n    total = 0\n    dftemp = df.copy()\n    while total &lt; budget:\n        remaining = budget - total\n        dftemp = dftemp[dftemp.weight &lt;= remaining]\n        # Stop if there are no records with small enough weight.\n        if dftemp.shape[0] == 0:\n            break\n        # New order\n        new_index = np.random.choice( dftemp.index, size = len(dftemp), \n                                      p = (dftemp.prob/dftemp.prob.sum()), \n                                      replace = False)\n        s = dftemp.reindex(new_index).weight.cumsum()\n        #select only the necessary rows\n        s = s[s &lt;= remaining] \n        total += s.max() #last value in s which is less than remaining\n        dftemp.drop(s.index, inplace=True)\n        ids += s.index.tolist()\n    return ids\n</code></pre>\n\n<p>Now for comparison with your method in terms of result:</p>\n\n<pre><code>#your approach\nprint (Counter([ tuple(np.sort(weighted_budgeted_random_sample(df,10))) \n                 for i in range(1000)]))\n#Counter({(0, 1): 546, (0, 2): 454})\n\n#mixed approach\nprint (Counter([ tuple(np.sort(weighted_budgeted_random_sample_mixed(df,10))) \n                 for i in range(1000)])\n#Counter({(0, 1): 554, (0, 2): 446})\n</code></pre>\n\n<p>As you can see, the result are quite similar and the mixed approach should be faster on larger dataframe as it minimize looping in the <code>while</code></p>\n"}], "owner": {"reputation": 10419, "user_id": 1840471, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/dnKrL.jpg?s=128&g=1", "display_name": "Max Ghenis", "link": "https://stackoverflow.com/users/1840471/max-ghenis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 54016329, "answer_count": 2, "score": 1, "last_activity_date": 1546489478, "creation_date": 1546466801, "last_edit_date": 1546473698, "question_id": 54013800, "link": "https://stackoverflow.com/questions/54013800/how-to-produce-a-budget-constrained-weighted-random-sample-where-items-have-var", "title": "How to produce a budget-constrained weighted random sample, where items have varying probabilities and weights?", "body": "<p>Suppose I want to select two records from a set of three, where the probabilities of the three are 0.1, 0.5, and 0.4, respectively. Per <a href=\"https://stackoverflow.com/a/26196078/1840471\">this SO answer</a>, <code>numpy.random.choice</code> will work:</p>\n\n<pre><code>import pandas as pd\nfrom numpy import random\n\ndf = pd.DataFrame({'prob': [0.1, 0.5, 0.4]})\n\nrandom.seed(0)\nrandom.choice(df.index, p=df.prob, size=2, replace=False)\n# array([1, 2])\n</code></pre>\n\n<p>Now suppose each item also has a weight, and rather than selecting two items, I want to select a maximum weight. So if these items have weight of 4, 5, and 6, and I have a budget of 10, I could select {0, 1} or {0, 2}. The relative probabilities of each item being included would still be governed by the probabilities (though in practice I think an algorithm would return item 1 more often because its low weight can serve as a filler).</p>\n\n<p>Is there a way to adapt <code>random.choice</code> for this, or another approach to yield this result?</p>\n"}, {"tags": ["python", "tuples"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 3, "creation_date": 1546466906, "post_id": 54013789, "comment_id": 94864689, "body": "Index the tuple?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1546467210, "post_id": 54013789, "comment_id": 94864794, "body": "... what if people pass multiple arguments to <code>*population</code>?"}, {"owner": {"reputation": 5133, "user_id": 154762, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d07d8564c1726ca28a6b99e560f0ec7?s=128&d=identicon&r=PG", "display_name": "solarc", "link": "https://stackoverflow.com/users/154762/solarc"}, "edited": false, "score": 1, "creation_date": 1546467212, "post_id": 54013789, "comment_id": 94864798, "body": "This might sound silly, but why is the population argument a <code>*arg</code> in the first place? are there cases where you could get multiple populations? if so, you only need to deal with the first one?"}, {"owner": {"reputation": 1, "user_id": 10847910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c41387df234205971f260cd2aa0e76f?s=128&d=identicon&r=PG&f=1", "display_name": "TKC65", "link": "https://stackoverflow.com/users/10847910/tkc65"}, "edited": false, "score": 0, "creation_date": 1546467316, "post_id": 54013789, "comment_id": 94864828, "body": "Thanks! it worked"}, {"owner": {"reputation": 1, "user_id": 10847910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c41387df234205971f260cd2aa0e76f?s=128&d=identicon&r=PG&f=1", "display_name": "TKC65", "link": "https://stackoverflow.com/users/10847910/tkc65"}, "edited": false, "score": 0, "creation_date": 1546467434, "post_id": 54013789, "comment_id": 94864875, "body": "I am trying to get one optional argument vs, getting none"}, {"owner": {"reputation": 1189, "user_id": 10638232, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2CQwwMqP-hM/AAAAAAAAAAI/AAAAAAAACQA/5LiuWqD4TlQ/photo.jpg?sz=128", "display_name": "GeeTransit", "link": "https://stackoverflow.com/users/10638232/geetransit"}, "edited": false, "score": 0, "creation_date": 1546467637, "post_id": 54013789, "comment_id": 94864948, "body": "Optional arguments can be defined like this: <code>def combine(city, country, population=None):</code> If combine is not called with the population argument, it will return a default value of <code>None</code>. You can either test if it&#39;s None and then set it to another integer or tuple value, or you can change <code>None</code> to another integer."}, {"owner": {"reputation": 1, "user_id": 10847910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c41387df234205971f260cd2aa0e76f?s=128&d=identicon&r=PG&f=1", "display_name": "TKC65", "link": "https://stackoverflow.com/users/10847910/tkc65"}, "edited": false, "score": 0, "creation_date": 1549829893, "post_id": 54013789, "comment_id": 96033949, "body": "Thank you all for your help and those comments about defining an optional parameter as type None is very helpful as I want to do things the right way."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10847910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c41387df234205971f260cd2aa0e76f?s=128&d=identicon&r=PG&f=1", "display_name": "TKC65", "link": "https://stackoverflow.com/users/10847910/tkc65"}, "edited": false, "score": 0, "creation_date": 1546468462, "post_id": 54013837, "comment_id": 94865244, "body": "Thank YOU!, I had this problem mixed in with other problems, knew about indexing, I was confused about the error messages!"}, {"owner": {"reputation": 1189, "user_id": 10638232, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2CQwwMqP-hM/AAAAAAAAAAI/AAAAAAAACQA/5LiuWqD4TlQ/photo.jpg?sz=128", "display_name": "GeeTransit", "link": "https://stackoverflow.com/users/10638232/geetransit"}, "reply_to_user": {"reputation": 1, "user_id": 10847910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c41387df234205971f260cd2aa0e76f?s=128&d=identicon&r=PG&f=1", "display_name": "TKC65", "link": "https://stackoverflow.com/users/10847910/tkc65"}, "edited": false, "score": 0, "creation_date": 1546468596, "post_id": 54013837, "comment_id": 94865288, "body": "No problem! If this answer helped you and might help other Python programmers like you, tick the checkmark to mark it correct. Have a great time programming :D"}, {"owner": {"reputation": 1, "user_id": 10847910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c41387df234205971f260cd2aa0e76f?s=128&d=identicon&r=PG&f=1", "display_name": "TKC65", "link": "https://stackoverflow.com/users/10847910/tkc65"}, "edited": false, "score": 0, "creation_date": 1546468887, "post_id": 54013837, "comment_id": 94865373, "body": "I am now getting errors regarding a unit test function, I get &#39;index out if range&#39;  I&#39;ll post this tomorrow,  thinking not a conversion problem"}, {"owner": {"reputation": 1189, "user_id": 10638232, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2CQwwMqP-hM/AAAAAAAAAAI/AAAAAAAACQA/5LiuWqD4TlQ/photo.jpg?sz=128", "display_name": "GeeTransit", "link": "https://stackoverflow.com/users/10638232/geetransit"}, "reply_to_user": {"reputation": 1, "user_id": 10847910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c41387df234205971f260cd2aa0e76f?s=128&d=identicon&r=PG&f=1", "display_name": "TKC65", "link": "https://stackoverflow.com/users/10847910/tkc65"}, "edited": false, "score": 0, "creation_date": 1546469123, "post_id": 54013837, "comment_id": 94865437, "body": "If you got <code>IndexError</code>, it probably means the function you defined previously took it as <code>*args</code> and you called it with no arguments. You could put a try-except around it and catch the <code>IndexError</code> to check if you gave it any arguments."}, {"owner": {"reputation": 1, "user_id": 10847910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c41387df234205971f260cd2aa0e76f?s=128&d=identicon&r=PG&f=1", "display_name": "TKC65", "link": "https://stackoverflow.com/users/10847910/tkc65"}, "edited": false, "score": 0, "creation_date": 1546473415, "post_id": 54013837, "comment_id": 94866527, "body": "Actually that&#39;s close but I had  &#39;if population != &quot;&quot;&#39;  just needed to know using tuple was the right way. i.e. &#39;if population != ()&#39;"}, {"owner": {"reputation": 1189, "user_id": 10638232, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2CQwwMqP-hM/AAAAAAAAAAI/AAAAAAAACQA/5LiuWqD4TlQ/photo.jpg?sz=128", "display_name": "GeeTransit", "link": "https://stackoverflow.com/users/10638232/geetransit"}, "reply_to_user": {"reputation": 1, "user_id": 10847910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c41387df234205971f260cd2aa0e76f?s=128&d=identicon&r=PG&f=1", "display_name": "TKC65", "link": "https://stackoverflow.com/users/10847910/tkc65"}, "edited": false, "score": 0, "creation_date": 1546473501, "post_id": 54013837, "comment_id": 94866548, "body": "Looks like there&#39;s more than one way to a problem :D"}], "tags": [], "owner": {"reputation": 1189, "user_id": 10638232, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2CQwwMqP-hM/AAAAAAAAAAI/AAAAAAAACQA/5LiuWqD4TlQ/photo.jpg?sz=128", "display_name": "GeeTransit", "link": "https://stackoverflow.com/users/10638232/geetransit"}, "is_accepted": false, "score": 1, "last_activity_date": 1546467884, "last_edit_date": 1546467884, "creation_date": 1546467002, "answer_id": 54013837, "question_id": 54013789, "link": "https://stackoverflow.com/questions/54013789/how-do-you-turn-a-tuple-with-one-integer-inside-it-into-a-string-or-an-integer/54013837#54013837", "title": "How do you turn a tuple with one integer inside it into a string or an integer", "body": "<p>If you are trying to get a value out of a tuple, use <code>[0]</code> as in <code>(600,)[0]</code>. That will return <code>600</code>. If you have it inside a function or variable, do the same as in <code>var[0]</code> or <code>func()[0]</code>. If <code>var</code> and <code>func()</code> return something like <code>(525,)</code>, it will return the first item, which in this case is <code>525</code>.\nFor more info on indexes and slices, <a href=\"https://www.tutorialspoint.com/python/python_lists.htm\" rel=\"nofollow noreferrer\">check here :D</a>.</p>\n\n<p>To check the length of a tuple, use <code>len(var)</code> where <code>var</code> is the tuple.</p>\n\n<p>And to check if it IS a tuple, use <code>isinstance(var, tuple)</code> where <code>var</code> is the variable you want to check and <code>tuple</code> is the class that defines what a tuple is.</p>\n\n<p>EDIT: For getting an optional argument, you need a default value for that optional argument. Say you had a function that printed your name, but you could also input your last name too. See the function below:</p>\n\n<pre><code>def greeting(name, last=None):\n    if last is None:   # check if last was given an argument\n        print(f'Ayy, {name}.')\n    else:              # if last was given as an argument\n        print(f'Hello there, {name} {last}.')\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10847910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c41387df234205971f260cd2aa0e76f?s=128&d=identicon&r=PG&f=1", "display_name": "TKC65", "link": "https://stackoverflow.com/users/10847910/tkc65"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546496852, "creation_date": 1546466728, "last_edit_date": 1546496852, "question_id": 54013789, "link": "https://stackoverflow.com/questions/54013789/how-do-you-turn-a-tuple-with-one-integer-inside-it-into-a-string-or-an-integer", "title": "How do you turn a tuple with one integer inside it into a string or an integer", "body": "<p>I am trying to turn something like <code>(600,)</code> into <code>600</code>, that is, take the integer out of a tuple. I get this when I define a function with an optional argument like <code>def foo( arg1, arg2, *arg)</code> If the argument which is passed as an integer to <code>*arg</code>, the result is like above, one integer inside a tuple inside the function.</p>\n\n<pre><code>def combine(city, country, *population):\n    print(population)\n\nstring = combine('New York', 'United States', 50000000)\n</code></pre>\n\n<p>The rest of the <code>combine</code> function should give a string like <code>New York United States, population = 10000000</code></p>\n"}, {"tags": ["python", "python-3.x", "multiprocessing", "qtime"], "comments": [{"owner": {"reputation": 5908, "user_id": 2442613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c872ea7055801788bec55c7703b96d88?s=128&d=identicon&r=PG", "display_name": "Paul Cornelius", "link": "https://stackoverflow.com/users/2442613/paul-cornelius"}, "edited": false, "score": 0, "creation_date": 1546467574, "post_id": 54013750, "comment_id": 94864929, "body": "You say &quot;does not work.&quot;  What does that mean?  What happens?  Do you get a traceback?  I see that after you execute self.timer.stop() you will immediately create a new Bullet, since there is no return after self.timer.stop()."}, {"owner": {"reputation": 391, "user_id": 5769737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e34956b208bcb4391dacf9f693598a08?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Filipovic", "link": "https://stackoverflow.com/users/5769737/filip-filipovic"}, "reply_to_user": {"reputation": 5908, "user_id": 2442613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c872ea7055801788bec55c7703b96d88?s=128&d=identicon&r=PG", "display_name": "Paul Cornelius", "link": "https://stackoverflow.com/users/2442613/paul-cornelius"}, "edited": false, "score": 0, "creation_date": 1546467961, "post_id": 54013750, "comment_id": 94865054, "body": "When i add this line in my code &quot;self.timer.disconnect(self.timerCallback)&quot; i get traceback saying BrokenPipeError: [WinError 109] The pipe has been ended.  Without that line function continue working in background and when i fire a few bullets program start slowing"}, {"owner": {"reputation": 5908, "user_id": 2442613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c872ea7055801788bec55c7703b96d88?s=128&d=identicon&r=PG", "display_name": "Paul Cornelius", "link": "https://stackoverflow.com/users/2442613/paul-cornelius"}, "edited": false, "score": 0, "creation_date": 1546483712, "post_id": 54013750, "comment_id": 94868375, "body": "You explained about the broken pipe error when you call disconnect.  However I was asking about the call to stop() and del self.bull.  You didn&#39;t explain what actually happens at that point.  Also, executing those lines will NOT cause a decrease in the number of Bullet instances since you will immediately initialize another one in the same function. Did you consider that?"}, {"owner": {"reputation": 391, "user_id": 5769737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e34956b208bcb4391dacf9f693598a08?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Filipovic", "link": "https://stackoverflow.com/users/5769737/filip-filipovic"}, "reply_to_user": {"reputation": 5908, "user_id": 2442613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c872ea7055801788bec55c7703b96d88?s=128&d=identicon&r=PG", "display_name": "Paul Cornelius", "link": "https://stackoverflow.com/users/2442613/paul-cornelius"}, "edited": false, "score": 0, "creation_date": 1546545529, "post_id": 54013750, "comment_id": 94894276, "body": "When i call stop and del self.bull, function still continue to work, and if i fire second bullet there will be two instances of the same function. I try to create simple program with QTimer and when i call stop in him function stop working i don`t understand why in this case function continue to work"}, {"owner": {"reputation": 5908, "user_id": 2442613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c872ea7055801788bec55c7703b96d88?s=128&d=identicon&r=PG", "display_name": "Paul Cornelius", "link": "https://stackoverflow.com/users/2442613/paul-cornelius"}, "edited": false, "score": 0, "creation_date": 1546669454, "post_id": 54013750, "comment_id": 94934033, "body": "As I&#39;ve said twice now, every time you stop the timer and delete the Bullet, you immediately create another Bullet and start another timer.  That&#39;s why the function still &quot;works&quot; (I assume you mean the function named &quot;bullet&quot;).  Perhaps you need a return statement after the <code>del self.bull</code> line.  I&#39;m not sure.  I am having a hard time following your code since you have only shown pieces of it.."}], "owner": {"reputation": 391, "user_id": 5769737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e34956b208bcb4391dacf9f693598a08?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Filipovic", "link": "https://stackoverflow.com/users/5769737/filip-filipovic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 2, "answer_count": 0, "score": 2, "last_activity_date": 1546467368, "creation_date": 1546466484, "last_edit_date": 1546467368, "question_id": 54013750, "link": "https://stackoverflow.com/questions/54013750/python-qtimer-and-multiprocessing-pipe", "title": "Python, QTimer and multiprocessing Pipe", "body": "<p>I have two classes: class Bullet and Main Class. I need to the create movement of bullet and I did that, but when bullet moves out of screen I don`t know how to stop function for the moving bullet.  Because of that, the program with time gets slower.</p>\n\n<pre><code>import multiprocessing as mp\nfrom PyQt5.QtCore import Qt, QTimer\n\ndef bullet(self):\n    if self.bull_on[0] is None:\n        if self.bull is not None:\n            self.timer.stop()\n            del self.bull\n\n        self.bull = Bullet(self, self.player.geometry(), self.pipeB1)\n        self.bull_on[0] = 1\n\n        if self.player.pix1.position == 'up':\n            self.timerCallback = functools.partial(self.bull.move_up, isOn=self.bull_on)\n            self.timer.timeout.connect(self.timerCallback)\n            self.timer.start(10)\n</code></pre>\n\n<p>Above code creates instance of class Bullet and start funcion for moving bullet\nCode below is funcion that starts</p>\n\n<pre><code>def move_up(self, isOn):\n    send = [self.rec1.x(), self.rec1.y() - self.counter * 2, 'u']\n    self.pipe.send(send)\n    val = self.pipe.recv()\n    if val &gt; -1:\n        self.bullet1 = QPixmap('Images\\\\Bullet_up.png')\n        self.setGeometry(self.rec1.x() + 16, self.rec1.y() - 20 - self.counter*2, self.rec1.width(), self.rec1.height())\n        self.setPixmap(self.bullet1)\n        self.show()\n        self.counter += 1\n    else:\n        isOn[0] = None\n        self.hide()\n</code></pre>\n\n<p>I use </p>\n\n<blockquote>\n  <p>self.timer.stop()</p>\n</blockquote>\n\n<p>and </p>\n\n<blockquote>\n  <p>del self.bull</p>\n</blockquote>\n\n<p>but this does not work.  I tried </p>\n\n<blockquote>\n  <p>self.timer.disconnect(self.timerCallback)</p>\n</blockquote>\n\n<p>but that throws errors saying that pipe is not closed properly.</p>\n\n<p>My question is how to stop the function in the background?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1546466680, "post_id": 54013746, "comment_id": 94864595, "body": "<a href=\"https://pandas.pydata.org/pandas-docs/version/0.23/generated/pandas.DataFrame.html\" rel=\"nofollow noreferrer\"><code>DataFrame</code></a> has no such arguments. Did you mean <code>read_table</code> or <code>read_csv</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10332687"}, "reply_to_user": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1546466745, "post_id": 54013746, "comment_id": 94864616, "body": "@Parfait I have a list of lists that I&#39;m trying to load into pandas. So would <code>read_table</code> work on that?"}, {"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1546466864, "post_id": 54013746, "comment_id": 94864674, "body": "We need a fuller code block and input data. <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_table.html\" rel=\"nofollow noreferrer\"><code>read_table</code></a> reads from a file or buffer."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10332687"}, "reply_to_user": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1546467529, "post_id": 54013746, "comment_id": 94864910, "body": "@Parfait thanks -- I&#39;ve updated the question above."}, {"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1546467839, "post_id": 54013746, "comment_id": 94865017, "body": "What is <i>num_rows</i>, <i>skip_rows</i>, <i>header_row</i>, <i>limit_cols</i> variables?"}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 2, "creation_date": 1546467958, "post_id": 54013746, "comment_id": 94865053, "body": "Since you&#39;re not using .csv data, you don;t actually have rows or cols to skip. For skipping rows, you can just slice your list, e.g. to skip 10, call the constructor on <code>self.data[10:]</code>, and you can slice into each sublist similarly for skip_cols. If you feed <code>self.data</code> into a numpy array instead of a list of lists, that gives you more control over multidimensional indexing/slicing"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10332687"}, "reply_to_user": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1546467966, "post_id": 54013746, "comment_id": 94865057, "body": "@Parfait those are what I pass when I use the read_csv module."}], "owner": {"user_type": "does_not_exist", "display_name": "user10332687"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1546467520, "creation_date": 1546466464, "last_edit_date": 1546467520, "question_id": 54013746, "link": "https://stackoverflow.com/questions/54013746/limiting-data-in-pd-dataframe", "title": "Limiting data in pd.DataFrame", "body": "<p>I am trying to implement the following with loading an internal data structure to pandas:</p>\n\n<pre><code>df = pd.DataFrame(self.data, \n        nrows=num_rows+500,\n        skiprows=skip_rows,\n        header=header_row,\n        usecols=limit_cols)\n</code></pre>\n\n<p>However, it doesn't appear to implement any of those (like it does when reading a <code>csv</code> file, other than the data). Is there another method I can use to have more control over the data that I'm ingesting? Or, do I need to rebuild the data before loading it into pandas?</p>\n\n<p>My input data looks like this:</p>\n\n<pre><code>data = [\n\n    ['ABC', 'es-419', 'US', 'Movie', 'Full Extract', 'PARIAH', '', '', 'EST', 'Features - EST', 'HD', '2017-05-12 00:00:00', 'Open', 'WSP', '10.5000', '', '', '', '', '10.5240/8847-7152-6775-8B59-ADE0-Y', '10.5240/FFE3-D036-A9A4-9E7A-D833-1', '', '', '', '04065', '', '', '2011', '', '', '', '', '', '', '', '', '', '', '', '113811', '', '', '', '', '', '04065', '', 'Spanish (LAS)', 'US', '10', 'USA NATL SALE', '2017-05-11 00:00:00', 'TIER 3', '21', '', '', 'USA NATL SALE-SPANISH LANGUAGE', 'SPAN'],\n    ['ABC', 'es-419', 'US', 'Movie', 'Full Extract', 'PATCH ADAMS', '', '', 'EST', 'Features - EST', 'HD', '2017-05-12 00:00:00', 'Open', 'WSP', '10.5000', '', '', '', '', '10.5240/DD84-FBF4-8F67-D6F3-47FF-1', '10.5240/B091-00D4-8215-39D8-0F33-8', '', '', '', 'U2254', '', '', '1998', '', '', '', '', '', '', '', '', '', '', '', '113811', '', '', '', '', '', 'U2254', '', 'Spanish (LAS)', 'US', '10', 'USA NATL SALE', '2017-05-11 00:00:00', 'TIER 3', '21', '', '', 'USA NATL SALE-SPANISH LANGUAGE', 'SPAN']\n\n]\n</code></pre>\n\n<p>And so I'm looking to be able to state which rows it should load (or skip) and which columns it should skip (usecols). Is that possible to do with an internal python data structure?</p>\n"}, {"tags": ["python", "python-3.x", "postgresql", "plpython"], "answers": [{"comments": [{"owner": {"reputation": 639, "user_id": 451029, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/de3818c153842f685e25c7664d1a4c23?s=128&d=identicon&r=PG", "display_name": "DrLou", "link": "https://stackoverflow.com/users/451029/drlou"}, "edited": false, "score": 0, "creation_date": 1546522438, "post_id": 54014457, "comment_id": 94882784, "body": "Really perfect, klin - tks for your response. Duh...! of course; gotta reset the stream&#39;s pointer."}], "tags": [], "owner": {"reputation": 85043, "user_id": 1995738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fXrVi.png?s=128&g=1", "display_name": "klin", "link": "https://stackoverflow.com/users/1995738/klin"}, "is_accepted": true, "score": 2, "last_activity_date": 1546471239, "creation_date": 1546471239, "answer_id": 54014457, "question_id": 54013708, "link": "https://stackoverflow.com/questions/54013708/python3-pypdf2-how-to-treat-file-handlers-as-bytesio-objects/54014457#54014457", "title": "Python3 PyPDF2 - how to treat file handlers as BytesIO objects?", "body": "<p>The second argument in <code>plpy.prepare()</code> is a list. The column type is <code>bytea</code>, not <code>varchar</code>. And you should use <code>bytes</code> (not a file object) to update the column:</p>\n\n<pre><code>plan3 = plpy.prepare(\"UPDATE documents SET document_out=$2 WHERE name=$1\", [\"varchar\", \"bytea\"])\noutputStream.seek(0)\nbytes_out = outputStream.read()\nplpy.execute(plan3, ['some name', bytes_out])\n</code></pre>\n"}], "owner": {"reputation": 639, "user_id": 451029, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/de3818c153842f685e25c7664d1a4c23?s=128&d=identicon&r=PG", "display_name": "DrLou", "link": "https://stackoverflow.com/users/451029/drlou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 54014457, "answer_count": 1, "score": 2, "last_activity_date": 1546881999, "creation_date": 1546466278, "last_edit_date": 1546881999, "question_id": 54013708, "link": "https://stackoverflow.com/questions/54013708/python3-pypdf2-how-to-treat-file-handlers-as-bytesio-objects", "title": "Python3 PyPDF2 - how to treat file handlers as BytesIO objects?", "body": "<p>Have a nice, tested bit of python PyPDF2 code a .py designed to operate on 'real' OS files. Having debugged it all, I am now trying to incorporate it into a plPython function, replacing files with io.BytesIO() - or whatever mechanism would be the best candidate for seamless drop-in...</p>\n\n<p>The file read/writes will now be to PostgreSQL bytea cols. Documents 'in' have been written with PG copy functions - byte counts match disk sizes; so far so good.</p>\n\n<p>Original code expected files:</p>\n\n<pre><code># infile = \"myInputPdf.pdf\"\n# outfile = \"myOutputPdf.pdf\"\n\n# inputStream  = open(infile, \"rb\")  # designed to open OS-based file\n# --- Instead: 'document_in' loaded from PG bytea col:\ninputStream = io.BytesIO(document_in)\n# ---\npdf_reader = PdfFileReader(inputStream, strict=False)\n# (lots of code in here, seems? to be working)\noutputStream = io.BytesIO()   # trying it the python3 way!\npdf_writer.write(outputStream)\n</code></pre>\n\n<p>(I've assumed the objects should be treated as byte objects)</p>\n\n<p>Finally:</p>\n\n<pre><code>plan3 = plpy.prepare(\"UPDATE documents SET document_out=$2 WHERE name=$1\", [\"varchar\"][\"varchar\"])\nERROR:  TypeError: list indices must be integers, not str\n</code></pre>\n\n<p>(PostgreSQL 11.1, if it matters)</p>\n\n<p>Have done similar things in the past using mkstemp techniques; trying now to grow up into the bytes world!</p>\n"}, {"tags": ["python", "numpy", "where"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 3, "creation_date": 1546467622, "post_id": 54013694, "comment_id": 94864943, "body": "<code>where</code> is a <code>numpy</code> function, not a <code>ndarray</code> method.  Also it does not work with <code>[]</code>.   Plez review it&#39;s documentation."}], "owner": {"reputation": 29, "user_id": 10859932, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hWmJ5kCD4n0/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYh10tKcjvicJf1DGu4DS7IWCAjPA/mo/photo.jpg?sz=128", "display_name": "Gal Alkalay", "link": "https://stackoverflow.com/users/10859932/gal-alkalay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1634, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1547127126, "creation_date": 1546466220, "last_edit_date": 1547127126, "question_id": 54013694, "link": "https://stackoverflow.com/questions/54013694/numpy-ndarray-object-has-no-attribute-where", "title": "&#39;numpy.ndarray&#39; object has no attribute &#39;where&#39;", "body": "<p>I have problem at my code.<br>\nThis is part of <code>__init__</code>:</p>\n\n<pre><code>file = np.loadtxt(file_path,delimiter = \",\",skiprows=1)\nheader = np.loadtxt(file_path,delimiter = \",\",dtype=str)\nself.data = file\nself.header = header[0]\n</code></pre>\n\n<p>This is part of a method:</p>\n\n<pre><code>def hello(self,col_name)\n    col = self.header.where[a == col_name]\n    return col\n</code></pre>\n\n<p>Then I wanted to check if I get the index of the header:</p>\n\n<pre><code>print (name.hello('hi'))\n</code></pre>\n\n<p>but got: <code>\"AttributeError: 'numpy.ndarray' object has no attribute 'where'\"</code></p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 2, "creation_date": 1546466389, "post_id": 54013690, "comment_id": 94864508, "body": "build a dataframe ,with Date ,range then merge it back"}, {"owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 0, "creation_date": 1546466392, "post_id": 54013690, "comment_id": 94864509, "body": "Where are the dates from 2018-11-08 to 2018-11-30?"}, {"owner": {"reputation": 1675, "user_id": 9530105, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FLoW1.jpg?s=128&g=1", "display_name": "sectechguy", "link": "https://stackoverflow.com/users/9530105/sectechguy"}, "edited": false, "score": 0, "creation_date": 1546466660, "post_id": 54013690, "comment_id": 94864590, "body": "Can I add 10023 rows on here?"}, {"owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 1, "creation_date": 1546466694, "post_id": 54013690, "comment_id": 94864601, "body": "Is better if you don&#39;t :)"}], "answers": [{"tags": [], "owner": {"reputation": 925, "user_id": 2258013, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/htFkd.jpg?s=128&g=1", "display_name": "Polkaguy6000", "link": "https://stackoverflow.com/users/2258013/polkaguy6000"}, "is_accepted": false, "score": 1, "last_activity_date": 1546467032, "creation_date": 1546467032, "answer_id": 54013843, "question_id": 54013690, "link": "https://stackoverflow.com/questions/54013690/pandas-replace-missing-datestring-with-count-of-0-for-each-location/54013843#54013843", "title": "Pandas Replace missing date(string) with count of 0 for each location", "body": "<p>This answer is based on the comment by W-B:</p>\n\n<p>Assuming you start with <code>df</code> as:</p>\n\n<pre><code>  Location        Date        Count\n 0   location_one    2018-11-06  102\n 1   location_one    2018-11-06  16\n 2   location_one    2018-11-06  650\n 3   location_one    2018-11-07  4\n 4   location_one    2018-11-06  12\n 5   location_one    2018-11-06  191\n 6   location_one    2018-11-06  58\n 7   location_one    2018-11-07  149\n</code></pre>\n\n<p>You could then do:</p>\n\n<pre><code> t_df = pd.DataFrame({'date':pd.DatetimeIndex(start='2018-11-01',end='2018-11-30',freq='d')})\n result = t_df.merge(df,how='left').fillna(0) #Assumes no nas in other fields\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 925, "user_id": 2258013, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/htFkd.jpg?s=128&g=1", "display_name": "Polkaguy6000", "link": "https://stackoverflow.com/users/2258013/polkaguy6000"}, "edited": false, "score": 0, "creation_date": 1546469945, "post_id": 54014148, "comment_id": 94865662, "body": "I upvoted this because it&#39;s better at handling some additional info you got from the question. Specifically, we don&#39;t know what the dtype is for the date field. This solution works even if it is a string. My answer assumes a datetime in the <code>Date</code> field."}], "tags": [], "owner": {"reputation": 2903, "user_id": 4340076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0b1bc392e1cc52cc64c0d207c6ed680?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/4340076/andrew"}, "is_accepted": true, "score": 2, "last_activity_date": 1546469127, "creation_date": 1546469127, "answer_id": 54014148, "question_id": 54013690, "link": "https://stackoverflow.com/questions/54013690/pandas-replace-missing-datestring-with-count-of-0-for-each-location/54014148#54014148", "title": "Pandas Replace missing date(string) with count of 0 for each location", "body": "<p>Expands previous answers to work with multiple locations per OP.</p>\n\n<pre><code>import pandas as pd\n\ninput_df = pd.DataFrame([\n    ['location_one', '2018-11-06', '102'],\n    ['location_one', '2018-11-06', '16'],\n    ['location_one', '2018-11-06', '650'],\n    ['location_one', '2018-11-07', '4'],\n    ['location_one', '2018-11-06', '12'],\n    ['location_one', '2018-11-06', '191'],\n    ['location_one', '2018-11-06', '58'],\n    ['location_one', '2018-11-07', '149'],\n    ['location_two', '2018-11-06', '110'] # Added\n], columns=['location', 'date', 'count'])\n\n# (1) Create dataframe for all dates in Nov 2018\nmonth = '2018-11'\ndate_df = pd.DataFrame(\n    {'date':pd.DatetimeIndex(start='2018-11-01',end='2018-11-30',freq='d')}\n)\ndate_df.date = date_df.date.apply(lambda x: x.strftime('%Y-%m-%d'))\n\n# (2) Create dataframe with every location/date combination\nindex = pd.MultiIndex.from_product([\n    input_df.location.unique(), \n    date_df.date\n], names = ['location', 'date'])\nmaster_df = pd.DataFrame(index=index).reset_index()\n\n# (3) Populate count column and fill missing entries with zero\nresults = pd.merge(master_df, input_df, on=['location', 'date'], how='left').fillna(0)\nprint(results)\n</code></pre>\n"}], "owner": {"reputation": 1675, "user_id": 9530105, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FLoW1.jpg?s=128&g=1", "display_name": "sectechguy", "link": "https://stackoverflow.com/users/9530105/sectechguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 54014148, "answer_count": 2, "score": 0, "last_activity_date": 1546469127, "creation_date": 1546466197, "question_id": 54013690, "link": "https://stackoverflow.com/questions/54013690/pandas-replace-missing-datestring-with-count-of-0-for-each-location", "title": "Pandas Replace missing date(string) with count of 0 for each location", "body": "<p>I have a pandas data frame with Location, Date and Count.  The Date is stored as a string and is just for the month of November 2018.  There are 68 locations.  Some dates and locations have more than one count and I want to keep those rows the way they are.  What I am looking for help on is, if a location does not have a date within 2018-11-01 and 2018-11-30 I would like to add a row with the location, missing date(string), and a count of \"0\" .  This is my dataframe:</p>\n\n<pre><code>    Location        Date        Count\n0   location_one    2018-11-06  102\n1   location_one    2018-11-06  16\n2   location_one    2018-11-06  650\n3   location_one    2018-11-07  4\n4   location_one    2018-11-06  12\n5   location_one    2018-11-06  191\n6   location_one    2018-11-06  58\n7   location_one    2018-11-07  149\n</code></pre>\n\n<p>Desired output:</p>\n\n<pre><code>    Location        Date        Count\n0   location_one    2018-11-01  0\n1   location_one    2018-11-02  0\n2   location_one    2018-11-03  0\n3   location_one    2018-11-04  0\n4   location_one    2018-11-05  0\n5   location_one    2018-11-06  102\n6   location_one    2018-11-06  16\n7   location_one    2018-11-06  650\n8   location_one    2018-11-07  4\n9   location_one    2018-11-06  12\n10  location_one    2018-11-06  191\n11  location_one    2018-11-06  58\n12  location_one    2018-11-07  149\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "swig", "variant"], "comments": [{"owner": {"reputation": 5854, "user_id": 1970751, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d1a425c7654aa63519f4f45710e2f54c?s=128&d=identicon&r=PG", "display_name": "Cilyan", "link": "https://stackoverflow.com/users/1970751/cilyan"}, "edited": false, "score": 0, "creation_date": 1548253752, "post_id": 54013689, "comment_id": 95476839, "body": "After trying Cython, which was also somewhat a nightmare, I used pure C Python API instead."}], "owner": {"reputation": 5854, "user_id": 1970751, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d1a425c7654aa63519f4f45710e2f54c?s=128&d=identicon&r=PG", "display_name": "Cilyan", "link": "https://stackoverflow.com/users/1970751/cilyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 155, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1546466194, "creation_date": 1546466194, "question_id": 54013689, "link": "https://stackoverflow.com/questions/54013689/wrap-a-variant-struct-union-using-swig", "title": "Wrap a &quot;variant&quot; struct/union using SWIG", "body": "<p>I'm trying to wrap a kind of \"variant\" type using SWIG. I mean something a bit like GType or alike, where the pointer you get is of a base type but the real type is actually much bigger and can be found out using a field in the base.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#define OBJ_TYPE_1 1\n#define OBJ_TYPE_2 2\n\ntypedef struct Base_t {\n    DWORD mObjectSize;\n    DWORD mObjectType;\n} Base;\n\ntypedef struct Object1_t {\n    Base mBase;\n    DWORD member1;\n    DWORD member2;\n    // Some specific members...\n} Object1;\n\ntypedef struct Object2_t {\n    Base mBase;\n    DWORD member3;\n    DWORD member4;\n     WORD member5;\n    // Some different specific members ...\n} Object2;\n</code></pre>\n\n<p>The proposed C interface uses the library in a way ressembling the following</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>Base base;\n\n// Get object header to find out type\nPeekObject(&amp;base);\n\n// Treat object depending on type\nif (base.mObjectType == OBJ_TYPE_1) {\n    Object1* obj = (Object1*) malloc(sizeof(Object1));\n    ReadObject(&amp;(obj-&gt;mBase));\n    DWORD blahblah = obj-&gt;member2;\n}\nelse if (base.mObjectType == OBJ_TYPE_2) {\n    // ...\n}\n</code></pre>\n\n<p>How would you wrap this in SWIG? Ideally, in Python you would be able to just <em>\"ReadObject\"</em> and directly receive an object of the right type.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; obj = lib.read_object()\n&gt;&gt;&gt; obj\n&lt;class 'lib.Object1'&gt;\n</code></pre>\n\n<p>I cannot change the library, but I can modify the wrapping (.i file). Should I go with custom code? Should I use typemaps? I don't know why, I remember that there was specifically an example for this in SWIG's documentation, but I'm unable to find it again...</p>\n"}, {"tags": ["python", "pandas", "dictionary", "python-docx"], "comments": [{"owner": {"reputation": 1522, "user_id": 3057587, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/p22MW.jpg?s=128&g=1", "display_name": "lincr", "link": "https://stackoverflow.com/users/3057587/lincr"}, "edited": false, "score": 0, "creation_date": 1546486943, "post_id": 54013660, "comment_id": 94868894, "body": "About the system error, you may want to take a look at <a href=\"https://github.com/ContinuumIO/anaconda-issues/issues/8737#issuecomment-406220210\" rel=\"nofollow noreferrer\">this issue</a>"}, {"owner": {"reputation": 13, "user_id": 10750687, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OiChJA3fjGY/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iDhjhNmeaUvGmjHENNZWAgYB4lnw/mo/photo.jpg?sz=128", "display_name": "Cory Smith", "link": "https://stackoverflow.com/users/10750687/cory-smith"}, "reply_to_user": {"reputation": 1522, "user_id": 3057587, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/p22MW.jpg?s=128&g=1", "display_name": "lincr", "link": "https://stackoverflow.com/users/3057587/lincr"}, "edited": false, "score": 0, "creation_date": 1546516890, "post_id": 54013660, "comment_id": 94879690, "body": "@lincr I did see that post.  Pycharm says that the &quot;PYDEVD_USE_FRAME_EVAL=NO&quot; is an Illegal command.  The script also fails when I run it in a Python shell... I am thinking it has to do something within Pandas"}], "owner": {"reputation": 13, "user_id": 10750687, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OiChJA3fjGY/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iDhjhNmeaUvGmjHENNZWAgYB4lnw/mo/photo.jpg?sz=128", "display_name": "Cory Smith", "link": "https://stackoverflow.com/users/10750687/cory-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1546477717, "creation_date": 1546465997, "last_edit_date": 1546477717, "question_id": 54013660, "link": "https://stackoverflow.com/questions/54013660/pandas-error-on-second-iteration-through-for-loop", "title": "&quot;Pandas&quot; error on second iteration through for loop", "body": "<p>On the second iteration through the nested for loop I get the error: </p>\n\n<blockquote>\n  <p>\"File\n  \"C:\\Users\\SmithC113\\PycharmProjects\\ASCII_Word\\venv\\lib\\site-packages\\pandas\\io\\formats\\format.py\",\n  line 1404, in \n      return (len(non_na) > 0 and all(x.endswith('0') for x in non_na) and SystemError: error return without exception set.\"</p>\n</blockquote>\n\n<p>I can't figure out what is causing this error.  Any help is appreciated.</p>\n\n<p>I tried dict.clear thinking maybe the dictionary was just automatically appending the data from the array, but that didn't work.  I also tried dict.update in conjunction with and without the dict.clear.  I don't understand the error so it's hard to come with a solution. </p>\n\n<pre><code>import tkinter as tk\nfrom tkinter.filedialog import askopenfilename\nimport pandas as pd  # Pandas - gives better table display results\n\nfrom docx import Document  # Invokes Document command from docx\nfrom docx.shared import Pt  # This makes it possible to dictate the font     size we are writing to the doc-x\n\n# IMPORT ASCII CP DATA\nroot = tk.Tk()\nroot.withdraw()\nfile_path = askopenfilename(title=\"Choose Control File\")  # returns the         file path as variable for future use\ndata = pd.read_csv(file_path, sep=\",\", header=None)\nr = len(data[1])  # number of rows in ASCII file (aka number of 3D points)\nprint('Number of CP Points imported =', r)  # This is check for now\n\n# IMPORT ASCII BM DATA\nfile_pathBM = askopenfilename(title='Choose Benchmark File')  # returns the         file path as variable for future use\ndata_bm = pd.read_csv(file_pathBM, sep=\",\", header=None)\nrbm = len(data_bm[1])  # number of rows in ASCII file (aka number of 3D         points)\n    print('Number of BM Points imported =', rbm)  # This is check for now\n\n# IMPORT WORD DOCUMENT\nroot = tk.Tk()\nroot.withdraw()\ndoc_path = askopenfilename(title=\"Choose Word File\")  # returns the file         path as variable for future use\ndocument = Document(doc_path)  # Imports Word Document to Modify\nt = len(document.paragraphs)  # gives the number of lines in document\nprint('Total Number of lines =', t)  # this is a check for now\nfont = document.styles['Normal'].font\nfont.name = 'Arial'\nfont.size = Pt(8)\nx = 0\n\nfor paragraph in document.paragraphs:\n    data_dict = {\n        'NORTHING:': data[1][x],\n        'EASTING:': data[2][x],\n        'ELEV:': data[3][x],\n        'CSF:': data[8][x],\n        'STD. DEV.:': 'N: {0}\\t E: {1}\\t EL: {2}'.format(data[5][x], data[6][x], data[7][x])\n    }\n    for k, v in data_dict.items():\n        if k in paragraph.text:\n            paragraph.clear()\n            run = paragraph.add_run()\n            run.text = k + '\\t'\n            run.font.bold = True\n            run.font.underline = True\n            run = paragraph.add_run()\n            run.text = '{}'.format(v)\n    x += 1\n    data_dict.clear()\n\nfor paragraph in document.paragraphs:\n    print(paragraph.text)  # Prints the text in the entire document\n# document.save('test1_save.docx') #Saves as Word Document after Modification\n</code></pre>\n\n<p>In the debugger I can see that the dictionary values are overwriting like I want them to, but during the second iteration at the if statement I get the above error.  I am baffled because the data is all the same type as the first iteration, and the dictionary is a single value data [y][x].  Also, you will need pandas, python-docx, and numpy.</p>\n\n<p>A snipit of the data from the ASCII File is:</p>\n\n<p>1,126081.2245,12608965.8380,691.5940,CP,0.0053,0.0036,0.0006,1.0000470038\n2,126327.6401,12609040.7808,692.2263,CP,0.0041,0.0043,0.0009,1.0000467574\n3,126738.8659,12609037.5712,691.4403,CP,0.0043,0.0058,0.0030,1.0000464372\n4,127066.6430,12608990.3587,690.2438,CP,0.0051,0.0050,0.0011,1.0000462105\n5,127303.7734,12609061.0079,692.1387,CP,0.0030,0.0053,0.0029,1.0000459125</p>\n\n<p><em>paste it into a text file, and use it for both imports</em></p>\n\n<p><strong>The Word document format is as follows:</strong></p>\n\n<blockquote>\n  <p>CP1</p>\n  \n  <p>DESCRIPTION: SET 5/8\u201d X 36\u201d IRON BAR WITH MDOT CAP IN THE NORTHWST\n  QUADRANT OF MAIN STREET AND M-51.</p>\n  \n  <p>WITNESSES:</p>\n  \n  <ol>\n  <li><p>FIRE HYDRANT            S42W    30.5\u2019</p></li>\n  <li><p>LIGHT POLE          N08E    27.0\u2019</p></li>\n  <li><p>LIGHT POLE          N47E    70.0\u2019</p></li>\n  <li><p>CENTER OF CATCH BASIN       S45W    24.0\u2019</p></li>\n  </ol>\n  \n  <p>NORTHING: </p>\n  \n  <p>EASTING:  </p>\n  \n  <p>ELEV: </p>\n  \n  <p>CSF: </p>\n  \n  <p>STD. DEV.:  N:    E:      ELEV: </p>\n  \n  <p>STATION: </p>\n  \n  <p>OFFSET: </p>\n  \n  <p>CP2</p>\n  \n  <p>DESCRIPTION: SET 5/8\u201d X 36\u201d IRON BAR WITH MDOT CAP IN THE SOUTHEAST\n  QUADRANT OF SYCAMORE STREET AND M-51.</p>\n  \n  <p>WITNESSES:</p>\n  \n  <ol>\n  <li><p>STORM MANHOLE       S73W    10.0\u2019</p></li>\n  <li><p>CATCH BASIN         N0W 45.0\u2019</p></li>\n  <li><p>STRAIN POLE         S53W    20.5\u2019</p></li>\n  <li><p>FENCE CORNER            S43W    11.5\u2019</p></li>\n  </ol>\n  \n  <p>NORTHING: </p>\n  \n  <p>EASTING:  </p>\n  \n  <p>ELEV: </p>\n  \n  <p>CSF: </p>\n  \n  <p>STD. DEV.:  N:    E:      ELEV: </p>\n  \n  <p>STATION: </p>\n  \n  <p>OFFSET:</p>\n</blockquote>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 327, "user_id": 13806326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f99af852eb5a20b0ba927d958b6425e6?s=128&d=identicon&r=PG&f=1", "display_name": "amiasato", "link": "https://stackoverflow.com/users/13806326/amiasato"}, "edited": false, "score": 0, "creation_date": 1593439394, "post_id": 54013658, "comment_id": 110774192, "body": "Regarding your issue 2, I tried your code snippet with an nd-array larger than the reserved memory in a docker container, and my process got killed after a while (probably due to an out-of-memory error), as expected. I used python:3.7.7-buster image with numpy version &#39;1.19.0&#39;. May you share your environment as well?"}], "answers": [{"tags": [], "owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "is_accepted": false, "score": 2, "last_activity_date": 1598872061, "creation_date": 1598872061, "answer_id": 63669659, "question_id": 54013658, "link": "https://stackoverflow.com/questions/54013658/how-does-numpys-memmap-copy-on-write-mode-work/63669659#63669659", "title": "How does numpy&#39;s memmap copy-on-write mode work?", "body": "<p>Numpy isn't doing anything clever here, it's just deferring to the builtin <code>memmap</code> module, which has an <code>access</code> argument that:</p>\n<blockquote>\n<p>accepts one of four values: <code>ACCESS_READ</code>, <code>ACCESS_WRITE</code>, or <code>ACCESS_COPY</code> to specify read-only, write-through or <strong>copy-on-write memory</strong> respectively.</p>\n</blockquote>\n<p>On linux, this works by calling the <code>mmap</code> system call with</p>\n<blockquote>\n<p><code>MAP_PRIVATE</code></p>\n<p>Create a private copy-on-write mapping.  Updates to the\nmapping are not visible to other processes mapping the same\nfile, and are not carried through to the underlying file.</p>\n</blockquote>\n<p>Regarding your question</p>\n<blockquote>\n<p>The changes aren't written to disk, so they are kept in memory, and yet somehow all the changes, which must be over 3Gb, don't cause out-of-memory errors?</p>\n</blockquote>\n<p>The changes likely <em>are</em> written to disk, but just not to the file you opened. They're likely paged into virtual memory somewhere.</p>\n"}], "owner": {"reputation": 81, "user_id": 4539224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cb5b13d6dd5363fd1e6699cf5fb7530?s=128&d=identicon&r=PG&f=1", "display_name": "Amir", "link": "https://stackoverflow.com/users/4539224/amir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 397, "favorite_count": 4, "answer_count": 1, "score": 8, "last_activity_date": 1598872061, "creation_date": 1546465988, "last_edit_date": 1546484427, "question_id": 54013658, "link": "https://stackoverflow.com/questions/54013658/how-does-numpys-memmap-copy-on-write-mode-work", "title": "How does numpy&#39;s memmap copy-on-write mode work?", "body": "<p>I'm confused by how numpy's <code>memmap</code> handles changes to data when using copy-on-write (<code>mmap_mode=c</code>). Since nothing is written to the original array on disk, I'm expecting that it has to store all changes in memory, and thus could run out of memory if you modify every single element. To my surprise, it didn't.</p>\n\n<p>I am trying to reduce my memory usage for my machine learning scripts which I run on a shared cluster (the less mem each instance takes, the more instances I can run at the same time). My data are very large numpy arrays (each > 8 Gb). My hope is to use <code>np.memmap</code> to work with these arrays with small memory (&lt;4Gb available).</p>\n\n<p>However, each instance might modify the data differently (e.g. might choose to normalize the input data differently each time). This has implications for storage space. If I use the <code>r+</code> mode, then normalizing the array in my script will permanently change the stored array.</p>\n\n<p>Since I don't want redundant copies of the data, and just want to store the original data on disk, I thought I should use the <code>'c'</code> mode (copy-on-write) to open the arrays. But then where do your changes go? Are the changes kept just in memory? If so, if I change the whole array won't I run out of memory on a small-memory system?</p>\n\n<p>Here's an example of a test which I expected to fail:</p>\n\n<p>On a large memory system, create the array:</p>\n\n<pre><code>import numpy as np\nGB = 1000**3\nGiB = 1024**3\na = np.zeros((50000, 20000), dtype='float32')\nbytes = a.size * a.itemsize\nprint('{} GB'.format(bytes / GB))\nprint('{} GiB'.format(bytes / GiB))\nnp.save('a.npy', a)\n# Output:\n# 4.0 GB\n# 3.725290298461914 GiB\n</code></pre>\n\n<p>Now, on a machine with just 2 Gb of memory, this fails as expected:</p>\n\n<pre><code>a = np.load('a.npy')\n</code></pre>\n\n<p>But these two will succeed, as expected:</p>\n\n<pre><code>a = np.load('a.npy', mmap_mode='r+')\na = np.load('a.npy', mmap_mode='c')\n</code></pre>\n\n<p><strong>Issue 1:</strong> I run out of memory running this code, trying to modify the memmapped array (fails regardless of r+/c mode):</p>\n\n<pre><code>for i in range(a.shape[0]):\n    print('row {}'.format(i))\n    a[i,:] = i*np.arange(a.shape[1])\n</code></pre>\n\n<p><strong>Why does this fail (especially, why does it fail even in <code>r+</code> mode, where it can write to the disk)? I thought <code>memmap</code> would only load pieces of the array into memory?</strong></p>\n\n<p><strong>Issue 2:</strong> When I force the numpy to flush the changes every once in a while, both r+/c mode successfully finish the loop. <strong>But how can <code>c</code> mode do this?</strong> I didn't think <code>flush()</code> would do anything for <code>c</code> mode? The changes aren't written to disk, so they are kept in memory, and yet somehow all the changes, which must be over 3Gb, don't cause out-of-memory errors?</p>\n\n<pre><code>for i in range(a.shape[0]):\n    if i % 100 == 0:\n        print('row {}'.format(i))\n        a.flush()\n    a[i,:] = i*np.arange(a.shape[1])\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "edited": false, "score": 1, "creation_date": 1546466051, "post_id": 54013649, "comment_id": 94864365, "body": "what if you just run <code>pip install youtube_dl</code> without <code>python -m</code>"}, {"owner": {"reputation": 840, "user_id": 1454173, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZCboW.png?s=128&g=1", "display_name": "M at", "link": "https://stackoverflow.com/users/1454173/m-at"}, "edited": false, "score": 1, "creation_date": 1546466082, "post_id": 54013649, "comment_id": 94864378, "body": "In order to get an answer you need to provide every thing you have done so far, plus the errors you are getting, also it is worth mentioning which versions of each software (including OS) you are using."}, {"owner": {"reputation": 3773, "user_id": 1838257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540386102f92985c85ced9c6b237dd60?s=128&d=identicon&r=PG", "display_name": "jorijnsmit", "link": "https://stackoverflow.com/users/1838257/jorijnsmit"}, "edited": false, "score": 0, "creation_date": 1546466333, "post_id": 54013649, "comment_id": 94864486, "body": "Please share the error message!"}, {"owner": {"reputation": 1, "user_id": 10859930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0gdQbOFOwfU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcadPq62RJ5bJSlsdvfV0EgmOkRsZg/mo/photo.jpg?sz=128", "display_name": "Random Guy", "link": "https://stackoverflow.com/users/10859930/random-guy"}, "reply_to_user": {"reputation": 3773, "user_id": 1838257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540386102f92985c85ced9c6b237dd60?s=128&d=identicon&r=PG", "display_name": "jorijnsmit", "link": "https://stackoverflow.com/users/1838257/jorijnsmit"}, "edited": false, "score": 0, "creation_date": 1546562451, "post_id": 54013649, "comment_id": 94899706, "body": "@jorijnsmit pip&#39; is not recognized as an internal or external command, operable program or batch file."}, {"owner": {"reputation": 1, "user_id": 10859930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0gdQbOFOwfU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcadPq62RJ5bJSlsdvfV0EgmOkRsZg/mo/photo.jpg?sz=128", "display_name": "Random Guy", "link": "https://stackoverflow.com/users/10859930/random-guy"}, "reply_to_user": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "edited": false, "score": 0, "creation_date": 1546562500, "post_id": 54013649, "comment_id": 94899725, "body": "@d_kennetz That still didn&#39;t fix it, even when run as an admin."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10859930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0gdQbOFOwfU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcadPq62RJ5bJSlsdvfV0EgmOkRsZg/mo/photo.jpg?sz=128", "display_name": "Random Guy", "link": "https://stackoverflow.com/users/10859930/random-guy"}, "edited": false, "score": 0, "creation_date": 1546559812, "post_id": 54013677, "comment_id": 94899178, "body": "It resulted in the error &quot;&#39;pip&#39; is not recognized as an internal or external command, operable program or batch file.&quot; It might be a problem with the path, I&#39;ll check again."}, {"owner": {"reputation": 1, "user_id": 10859930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0gdQbOFOwfU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcadPq62RJ5bJSlsdvfV0EgmOkRsZg/mo/photo.jpg?sz=128", "display_name": "Random Guy", "link": "https://stackoverflow.com/users/10859930/random-guy"}, "edited": false, "score": 0, "creation_date": 1546562423, "post_id": 54013677, "comment_id": 94899700, "body": "I tried again and I set the path to where pip is installed, still didn&#39;t work. It might be an issue with the path not working properly. Would it fix it if I uninstalled python and reinstalled it?"}, {"owner": {"reputation": 49, "user_id": 3386063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ad0e39812ee02719204b8fa37dd7941?s=128&d=identicon&r=PG&f=1", "display_name": "tkiral", "link": "https://stackoverflow.com/users/3386063/tkiral"}, "reply_to_user": {"reputation": 1, "user_id": 10859930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0gdQbOFOwfU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcadPq62RJ5bJSlsdvfV0EgmOkRsZg/mo/photo.jpg?sz=128", "display_name": "Random Guy", "link": "https://stackoverflow.com/users/10859930/random-guy"}, "edited": false, "score": 0, "creation_date": 1546562915, "post_id": 54013677, "comment_id": 94899809, "body": "You could do that.  Make sure you install the correct version of Python (2 or 3) and, when installing, make sure to click the &quot;Add Python to Environment Path&quot; box.  You may need to go through custom installation for this; I don&#39;t remember."}, {"owner": {"reputation": 49, "user_id": 3386063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ad0e39812ee02719204b8fa37dd7941?s=128&d=identicon&r=PG&f=1", "display_name": "tkiral", "link": "https://stackoverflow.com/users/3386063/tkiral"}, "reply_to_user": {"reputation": 1, "user_id": 10859930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0gdQbOFOwfU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcadPq62RJ5bJSlsdvfV0EgmOkRsZg/mo/photo.jpg?sz=128", "display_name": "Random Guy", "link": "https://stackoverflow.com/users/10859930/random-guy"}, "edited": false, "score": 0, "creation_date": 1546563041, "post_id": 54013677, "comment_id": 94899835, "body": "To check the python version, run &quot;[command you usually use to run python scripts] -V.&quot;  Make sure the &quot;V&quot; is capital.  The bracketed comment should be replaced with &quot;python,&quot; &quot;py&quot; or &quot;python3&quot; depending on how you use python."}, {"owner": {"reputation": 1, "user_id": 10859930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0gdQbOFOwfU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcadPq62RJ5bJSlsdvfV0EgmOkRsZg/mo/photo.jpg?sz=128", "display_name": "Random Guy", "link": "https://stackoverflow.com/users/10859930/random-guy"}, "edited": false, "score": 0, "creation_date": 1546618982, "post_id": 54013677, "comment_id": 94920656, "body": "I&#39;ll try that and get back to you!"}, {"owner": {"reputation": 1, "user_id": 10859930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0gdQbOFOwfU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcadPq62RJ5bJSlsdvfV0EgmOkRsZg/mo/photo.jpg?sz=128", "display_name": "Random Guy", "link": "https://stackoverflow.com/users/10859930/random-guy"}, "edited": false, "score": 0, "creation_date": 1546621780, "post_id": 54013677, "comment_id": 94922009, "body": "After a bit of work I made it to the error <code>py -m pip install syntax error</code> with an arrow under the word pip. I have verified that pip is installed, and I no longer get the <code>pip is not recognized</code> error."}, {"owner": {"reputation": 49, "user_id": 3386063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ad0e39812ee02719204b8fa37dd7941?s=128&d=identicon&r=PG&f=1", "display_name": "tkiral", "link": "https://stackoverflow.com/users/3386063/tkiral"}, "reply_to_user": {"reputation": 1, "user_id": 10859930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0gdQbOFOwfU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcadPq62RJ5bJSlsdvfV0EgmOkRsZg/mo/photo.jpg?sz=128", "display_name": "Random Guy", "link": "https://stackoverflow.com/users/10859930/random-guy"}, "edited": false, "score": 0, "creation_date": 1546624830, "post_id": 54013677, "comment_id": 94923366, "body": "what OS are you working on? Are you able to install other python packages? you can test this by installing numpy"}, {"owner": {"reputation": 49, "user_id": 3386063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ad0e39812ee02719204b8fa37dd7941?s=128&d=identicon&r=PG&f=1", "display_name": "tkiral", "link": "https://stackoverflow.com/users/3386063/tkiral"}, "reply_to_user": {"reputation": 1, "user_id": 10859930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0gdQbOFOwfU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcadPq62RJ5bJSlsdvfV0EgmOkRsZg/mo/photo.jpg?sz=128", "display_name": "Random Guy", "link": "https://stackoverflow.com/users/10859930/random-guy"}, "edited": false, "score": 0, "creation_date": 1546625497, "post_id": 54013677, "comment_id": 94923640, "body": "if you are working in environments like conda/anaconda, mention that too"}, {"owner": {"reputation": 49, "user_id": 3386063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ad0e39812ee02719204b8fa37dd7941?s=128&d=identicon&r=PG&f=1", "display_name": "tkiral", "link": "https://stackoverflow.com/users/3386063/tkiral"}, "reply_to_user": {"reputation": 1, "user_id": 10859930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0gdQbOFOwfU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcadPq62RJ5bJSlsdvfV0EgmOkRsZg/mo/photo.jpg?sz=128", "display_name": "Random Guy", "link": "https://stackoverflow.com/users/10859930/random-guy"}, "edited": false, "score": 0, "creation_date": 1546626623, "post_id": 54013677, "comment_id": 94924113, "body": "by the way, it seems like youtube_dl installation might be a drawn out process; if what I recommended doesn&#39;t work, the next step would be going through the instructions at <a href=\"https://github.com/rg3/youtube-dl#faq\" rel=\"nofollow noreferrer\">this</a> link"}], "tags": [], "owner": {"reputation": 49, "user_id": 3386063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ad0e39812ee02719204b8fa37dd7941?s=128&d=identicon&r=PG&f=1", "display_name": "tkiral", "link": "https://stackoverflow.com/users/3386063/tkiral"}, "is_accepted": false, "score": 0, "last_activity_date": 1546466133, "creation_date": 1546466133, "answer_id": 54013677, "question_id": 54013649, "link": "https://stackoverflow.com/questions/54013649/why-is-pip-not-working-even-though-its-in-command-line-and-using-m/54013677#54013677", "title": "Why is pip not working even though its in command line and using -m?", "body": "<p>try running <code>pip install youtube_dl</code> as admin</p>\n"}], "owner": {"reputation": 1, "user_id": 10859930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0gdQbOFOwfU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcadPq62RJ5bJSlsdvfV0EgmOkRsZg/mo/photo.jpg?sz=128", "display_name": "Random Guy", "link": "https://stackoverflow.com/users/10859930/random-guy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 154, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546481657, "creation_date": 1546465955, "last_edit_date": 1546481657, "question_id": 54013649, "link": "https://stackoverflow.com/questions/54013649/why-is-pip-not-working-even-though-its-in-command-line-and-using-m", "title": "Why is pip not working even though its in command line and using -m?", "body": "<p>I am trying to code a bot for discord and I need to run <code>python -m pip install youtube_dl</code>, but whenever I do, I always receive a syntax error on the pip part. I am running it in command line, and I'm fairly certain I set the path to wher python is installed, but it's still not working. Any ideas?</p>\n"}, {"tags": ["python", "pandas", "utf-8"], "comments": [{"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1546466634, "post_id": 54013648, "comment_id": 94864583, "body": "Why convert the file? Just open it with the proper encoding: <code>bmc=pd.read_csv(&#39;file.csv&#39;, sep=&#39;|&#39;, error_bad_lines=False, encoding=&#39;utf-16&#39;)</code>. UTF-16 is a superset of UCS-2 which is obsolete."}, {"owner": {"reputation": 1282, "user_id": 1305886, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5add4d668f4e8052de625652f578f64a?s=128&d=identicon&r=PG", "display_name": "luisfer", "link": "https://stackoverflow.com/users/1305886/luisfer"}, "reply_to_user": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1546466788, "post_id": 54013648, "comment_id": 94864635, "body": "Why this works?????? It worked, and did it extremely fast, but I got no idea what is <i>utf-16</i>. I really hate all this encoding thing. THANKS A LOT!"}, {"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 2, "creation_date": 1546466904, "post_id": 54013648, "comment_id": 94864687, "body": "<a href=\"https://en.wikipedia.org/wiki/UTF-16\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/UTF-16</a>"}, {"owner": {"reputation": 1282, "user_id": 1305886, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5add4d668f4e8052de625652f578f64a?s=128&d=identicon&r=PG", "display_name": "luisfer", "link": "https://stackoverflow.com/users/1305886/luisfer"}, "reply_to_user": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1546467003, "post_id": 54013648, "comment_id": 94864724, "body": "Do you want to add it as answer? Thanks again!"}, {"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1546467017, "post_id": 54013648, "comment_id": 94864731, "body": "P.S. It&#39;s a shame Windows was an early adopter of Unicode. If they&#39;d waited they could have standardized on UTF-8 like Linux mostly has. UCS-2 was the first version of Unicode encoding."}, {"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1546467071, "post_id": 54013648, "comment_id": 94864749, "body": "I&#39;m reluctant to add it as an answer, because while it solves your problem it isn&#39;t an actual answer to the question you asked."}, {"owner": {"reputation": 1282, "user_id": 1305886, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5add4d668f4e8052de625652f578f64a?s=128&d=identicon&r=PG", "display_name": "luisfer", "link": "https://stackoverflow.com/users/1305886/luisfer"}, "reply_to_user": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1546468324, "post_id": 54013648, "comment_id": 94865179, "body": "The answer could be, read the df, then save it using utf-8 encoding using pandas ;-)"}], "answers": [{"comments": [{"owner": {"reputation": 1282, "user_id": 1305886, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5add4d668f4e8052de625652f578f64a?s=128&d=identicon&r=PG", "display_name": "luisfer", "link": "https://stackoverflow.com/users/1305886/luisfer"}, "edited": false, "score": 0, "creation_date": 1546644312, "post_id": 54044122, "comment_id": 94930340, "body": "Of course I tried to do this, but when I did it, produced the file with NUL characters every other character"}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "reply_to_user": {"reputation": 1282, "user_id": 1305886, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5add4d668f4e8052de625652f578f64a?s=128&d=identicon&r=PG", "display_name": "luisfer", "link": "https://stackoverflow.com/users/1305886/luisfer"}, "edited": false, "score": 0, "creation_date": 1546648501, "post_id": 54044122, "comment_id": 94931183, "body": "@luisfer That&#39;s what UTF-16 is, a word-based encoding.  You have to use an editor that can read UTF-16 encoding if you want to read it correctly.  Notepad++ can do that.  Pandas can read the file if you use the <code>utf16</code> encoding.  If you don&#39;t want the UTF-16 encoding, convert it using the first part of my answer."}, {"owner": {"reputation": 1282, "user_id": 1305886, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5add4d668f4e8052de625652f578f64a?s=128&d=identicon&r=PG", "display_name": "luisfer", "link": "https://stackoverflow.com/users/1305886/luisfer"}, "edited": false, "score": 0, "creation_date": 1546699844, "post_id": 54044122, "comment_id": 94940466, "body": "Ohhhhh got it. I didn&#39;t use utf-16 encoding, so I was getting nothing! That&#39;s much clear now"}], "tags": [], "owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "is_accepted": true, "score": 2, "last_activity_date": 1546625768, "creation_date": 1546625768, "answer_id": 54044122, "question_id": 54013648, "link": "https://stackoverflow.com/questions/54013648/python-how-can-i-read-a-file-in-x-encoding-and-save-it-as-utf-8/54044122#54044122", "title": "Python: How can I read a file in x encoding and save it as utf-8", "body": "<p>To convert a file from one encoding to another in Python:</p>\n\n<pre><code>with open('file1.txt',encoding='utf16') as fin:\n   with open('file2.txt','w',encoding='utf8') as fout:\n       fout.write(fin.read())\n</code></pre>\n\n<p>But in your case, as Mark Ransom pointed out in a comment, just open with the appropriate encoding:</p>\n\n<pre><code>bmc = pd.read_csv('file.csv', sep='|', error_bad_lines=False, encoding='utf16')\n</code></pre>\n"}], "owner": {"reputation": 1282, "user_id": 1305886, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5add4d668f4e8052de625652f578f64a?s=128&d=identicon&r=PG", "display_name": "luisfer", "link": "https://stackoverflow.com/users/1305886/luisfer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1494, "favorite_count": 0, "accepted_answer_id": 54044122, "answer_count": 1, "score": 0, "last_activity_date": 1546625768, "creation_date": 1546465953, "question_id": 54013648, "link": "https://stackoverflow.com/questions/54013648/python-how-can-i-read-a-file-in-x-encoding-and-save-it-as-utf-8", "title": "Python: How can I read a file in x encoding and save it as utf-8", "body": "<p>I have a huge dataset (about 8.5M records) on a \".csv\" file (it uses pipes instead of commas), I got no idea what is its encoding, since I live in Mexico and has accents (\u00e1 \u00e9...) I assume its either latin or iso-8859-1.</p>\n\n<p>When I try to import the file to a DataFrame using pandas</p>\n\n<pre><code>bmc=pd.read_csv('file.csv', sep='|', \n            error_bad_lines=False, encoding='iso-8859-1')\n</code></pre>\n\n<p>It reads nothing:</p>\n\n<pre><code>    \u00ff\u00feF     Unnamed: 1  Unnamed: 2  Unnamed: 3  Unnamed: 4\n0   NaN     NaN         NaN         NaN         NaN\n1   NaN     NaN         NaN         NaN         NaN\n2   NaN     NaN         NaN         NaN         NaN\n</code></pre>\n\n<p>If I don't place iso-8859-1 or latin, I got the error:</p>\n\n<pre><code>UnicodeDecodeError: 'utf-8' codec can't decode byte 0xff in position 0: invalid start byte\n</code></pre>\n\n<p>So, to encode the file to utf-8, I open the file in Notepad++ which can read huge files, I mannualy delete the \u00ff\u00fe at the start of the file, then change the encoding to utf-8 and save as a new file.</p>\n\n<p>Notepad++ says the file encoding is: <strong>UCS-2 LE BOM</strong></p>\n\n<p>The filesize goes from 1.8Mb to about 0.9Mb, now I can open this file with pandas without problem. </p>\n\n<p>So I think converting to utf-8 should be part of my preprocessing.</p>\n\n<p>I used this solution: <a href=\"https://stackoverflow.com/questions/191359/how-to-convert-a-file-to-utf-8-in-python\">How to convert a file to utf-8 in Python?</a> and created a function to convert several files:</p>\n\n<pre><code>BLOCKSIZE = 1048576 # or some other, desired size in bytes\n\ndef convert_utf8(sourceFileName, targetFileName, sourceEncoding='iso-8859-1'):\n    with codecs.open(sourceFileName, \"r\", sourceEncoding) as sourceFile:\n        with codecs.open(targetFileName, \"w\", \"utf-8\") as targetFile:\n            while True:\n                contents = sourceFile.read(BLOCKSIZE)\n                if not contents:\n                    break\n                targetFile.write(contents)\n</code></pre>\n\n<p>Now, the problem is, that when the file is written it adds a NULL character after every valid character, let me show it in the editor:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ZfgX1.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZfgX1.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>This file, of course, doesn't work in Pandas. So far, I have solved my problem using Notepad++, but of course there must be a better way, a way that I don't have to rely on other tools.</p>\n"}, {"tags": ["python", "python-3.x", "web-scraping", "beautifulsoup"], "answers": [{"tags": [], "owner": {"reputation": 17276, "user_id": 7752296, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7033ea69df1e9dddbee828dc92ac967a?s=128&d=identicon&r=PG&f=1", "display_name": "chitown88", "link": "https://stackoverflow.com/users/7752296/chitown88"}, "is_accepted": false, "score": 0, "last_activity_date": 1546475536, "last_edit_date": 1546475536, "creation_date": 1546468223, "answer_id": 54014018, "question_id": 54013637, "link": "https://stackoverflow.com/questions/54013637/cant-grab-a-specific-portion-of-text-out-of-some-html-elements/54014018#54014018", "title": "Can&#39;t grab a specific portion of text out of some html elements", "body": "<p>there might be a more elegant way, but you're correct to be looking to use <code>.next_sibling</code> </p>\n\n<pre><code>from bs4 import BeautifulSoup\n\nhtmldoc = \"\"\"\n&lt;div class=\"search-article-title-description\"&gt;\n    &lt;div class=\"search-article-title\"&gt;\n      &lt;a href=\"https://www.pga.com/pgapro/info/999918438?atrack=pgapro%3Anone&amp;amp;seapos=result%3A1%3AJeff%20S%20Swangim%2C%20PGA&amp;amp;page=1\"&gt;Jeff S Swangim, PGA&lt;/a&gt;\n      &lt;div class=\"search-article-protitle\"&gt;\n        Assistant Professional\n      &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"search-article-address\"&gt;\n      &lt;div class=\"search-instructor-course\"&gt;\n        Lake Toxaway Country Club\n      &lt;/div&gt;\n      4366 W Club Blvd&lt;br&gt;Lake Toxaway, NC  28747-8538&lt;br&gt; \n      &lt;div class=\"spotlightphone_num\"&gt;\n        (828) 966-4661\n      &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n\"\"\"\n\nsoup = BeautifulSoup(htmldoc,\"html.parser\")\n\naddr = soup.find('div', {'class':'search-instructor-course'}).next_sibling.strip()\nstate_zip = soup.find('div', {'class':'search-instructor-course'}).next_sibling.next_sibling.next_sibling.strip()\n\n\nprint (' '.join([addr, state_zip]))\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>print (' '.join([addr, state_zip]))\n4366 W Club Blvd Lake Toxaway, NC  28747-8538\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19801, "user_id": 9189799, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/U2hEg.jpg?s=128&g=1", "display_name": "SIM", "link": "https://stackoverflow.com/users/9189799/sim"}, "is_accepted": false, "score": 2, "last_activity_date": 1546499525, "creation_date": 1546499525, "answer_id": 54017827, "question_id": 54013637, "link": "https://stackoverflow.com/questions/54013637/cant-grab-a-specific-portion-of-text-out-of-some-html-elements/54017827#54017827", "title": "Can&#39;t grab a specific portion of text out of some html elements", "body": "<p>The easiest way I can think of is using <code>.extract()</code> function to kick out the portion you are not interested in. If we can ignore the content of this classes <code>search-instructor-course</code> and <code>spotlightphone_num</code> then the remain portion is the desired one.</p>\n\n<p>The following script should give us the address:</p>\n\n<pre><code>from bs4 import BeautifulSoup\n\nhtmldoc = \"\"\"\n&lt;div class=\"search-article-title-description\"&gt;\n    &lt;div class=\"search-article-title\"&gt;\n      &lt;a href=\"https://www.pga.com/pgapro/info/999918438?atrack=pgapro%3Anone&amp;amp;seapos=result%3A1%3AJeff%20S%20Swangim%2C%20PGA&amp;amp;page=1\"&gt;Jeff S Swangim, PGA&lt;/a&gt;\n      &lt;div class=\"search-article-protitle\"&gt;\n        Assistant Professional\n      &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"search-article-address\"&gt;\n      &lt;div class=\"search-instructor-course\"&gt;\n        Lake Toxaway Country Club\n      &lt;/div&gt;\n      4366 W Club Blvd&lt;br&gt;Lake Toxaway, NC  28747-8538&lt;br&gt; \n      &lt;div class=\"spotlightphone_num\"&gt;\n        (828) 966-4661\n      &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n\"\"\"\nsoup = BeautifulSoup(htmldoc,\"lxml\")\n[item.extract() for item in soup.find_all(class_=[\"search-instructor-course\",\"spotlightphone_num\"])]\naddress = soup.select_one(\".search-article-address\").get_text(strip=True)\nprint(address)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "reply_to_user": {"reputation": 19801, "user_id": 9189799, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/U2hEg.jpg?s=128&g=1", "display_name": "SIM", "link": "https://stackoverflow.com/users/9189799/sim"}, "edited": false, "score": 0, "creation_date": 1546504339, "post_id": 54018300, "comment_id": 94873626, "body": "@SIM Thanks. Still getting to grips with all this. +"}], "tags": [], "owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "is_accepted": false, "score": 1, "last_activity_date": 1546504321, "last_edit_date": 1546504321, "creation_date": 1546501884, "answer_id": 54018300, "question_id": 54013637, "link": "https://stackoverflow.com/questions/54013637/cant-grab-a-specific-portion-of-text-out-of-some-html-elements/54018300#54018300", "title": "Can&#39;t grab a specific portion of text out of some html elements", "body": "<p>You use xpath expression here and lxml. You can still pass your HTML content to this.</p>\n\n<pre><code>from lxml import html\n\nh = '''\n&lt;div class=\"search-article-title-description\"&gt;\n    &lt;div class=\"search-article-title\"&gt;\n      &lt;a href=\"https://www.pga.com/pgapro/info/999918438?atrack=pgapro%3Anone&amp;amp;seapos=result%3A1%3AJeff%20S%20Swangim%2C%20PGA&amp;amp;page=1\"&gt;Jeff S Swangim, PGA&lt;/a&gt;\n      &lt;div class=\"search-article-protitle\"&gt;\n        Assistant Professional\n      &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"search-article-address\"&gt;\n      &lt;div class=\"search-instructor-course\"&gt;\n        Lake Toxaway Country Club\n      &lt;/div&gt;\n      4366 W Club Blvd&lt;br&gt;Lake Toxaway, NC  28747-8538&lt;br&gt; \n      &lt;div class=\"spotlightphone_num\"&gt;\n        (828) 966-4661\n      &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n\n'''\n\ntree = html.fromstring(h)\nlinks = [link.strip() for link in tree.xpath(\"//div[@class='search-article-address']/br/preceding-sibling::text()[1]\")]\nprint(' '.join(links))\n</code></pre>\n\n<p>Output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/GmQcX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GmQcX.png\" alt=\"enter image description here\"></a></p>\n\n<p>Or, more simply, thanks to @SIM, just:</p>\n\n<pre><code>print(' '.join(tree.xpath(\"//div[@class='search-article-address']/text()\")))\n</code></pre>\n"}], "owner": {"reputation": 140, "user_id": 10568531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e355807cad6f3abdf401e57032a6e6dc?s=128&d=identicon&r=PG&f=1", "display_name": "robots.txt", "link": "https://stackoverflow.com/users/10568531/robots-txt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1546504321, "creation_date": 1546465870, "question_id": 54013637, "link": "https://stackoverflow.com/questions/54013637/cant-grab-a-specific-portion-of-text-out-of-some-html-elements", "title": "Can&#39;t grab a specific portion of text out of some html elements", "body": "<p>I've created a script in python to parse the address out of some html elements. When I execute my script, I get <code>title</code>, <code>address</code> and <code>phone</code> number from the elements whereas my intention is to get only the <strong><em>address</em></strong>. If I used <code>next_sibling</code>, I could get only the first portion of the address seperated by br tag and that is why I skipped that approach.</p>\n\n<p>How can I get only the address and nothing else from the below snippet?</p>\n\n<pre><code>from bs4 import BeautifulSoup\n\nhtmldoc = \"\"\"\n&lt;div class=\"search-article-title-description\"&gt;\n    &lt;div class=\"search-article-title\"&gt;\n      &lt;a href=\"https://www.pga.com/pgapro/info/999918438?atrack=pgapro%3Anone&amp;amp;seapos=result%3A1%3AJeff%20S%20Swangim%2C%20PGA&amp;amp;page=1\"&gt;Jeff S Swangim, PGA&lt;/a&gt;\n      &lt;div class=\"search-article-protitle\"&gt;\n        Assistant Professional\n      &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"search-article-address\"&gt;\n      &lt;div class=\"search-instructor-course\"&gt;\n        Lake Toxaway Country Club\n      &lt;/div&gt;\n      4366 W Club Blvd&lt;br&gt;Lake Toxaway, NC  28747-8538&lt;br&gt; \n      &lt;div class=\"spotlightphone_num\"&gt;\n        (828) 966-4661\n      &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n\"\"\"\nsoup = BeautifulSoup(htmldoc,\"lxml\")\naddress = soup.select_one(\".search-article-address\").get_text(strip=True)\nprint(address)\n</code></pre>\n\n<p>What I'm getting right now:</p>\n\n<pre><code>Lake Toxaway Country Club4366 W Club BlvdLake Toxaway, NC  28747-8538(828) 966-4661\n</code></pre>\n\n<p>My expected output:</p>\n\n<pre><code>4366 W Club BlvdLake Toxaway, NC  28747-8538\n</code></pre>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1546468368, "post_id": 54013636, "comment_id": 94865198, "body": "I really don&#39;t understand your code. Why call delete if you don&#39;t want to delete them? But why have a m2m at all when the relationship is one-to-many? You should have a foreign key from XMLGraph to User. And the title relationships are even more broken."}, {"owner": {"reputation": 79, "user_id": 10832345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ef3bd20989aff7d933c199202bc5307?s=128&d=identicon&r=PG&f=1", "display_name": "RedCactus", "link": "https://stackoverflow.com/users/10832345/redcactus"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1546474826, "post_id": 54013636, "comment_id": 94866814, "body": "@Daniel Roseman the reason i\u2019m deleting it, is because you can\u2019t update m2m fields with update() so i\u2019m deleting the previously stored data from the user so it stores new data. One XMLGraph should have One title, what\u2019s wrong with that relationship?"}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1546476400, "post_id": 54013636, "comment_id": 94867139, "body": "Your justification mages even less sense. Of course you can update ah existing instance. And I was referring to the extra relationship between Member and Title. Also you didn&#39;t address my point that the relationship between graph and member should be many to one, not many to many."}, {"owner": {"reputation": 79, "user_id": 10832345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ef3bd20989aff7d933c199202bc5307?s=128&d=identicon&r=PG&f=1", "display_name": "RedCactus", "link": "https://stackoverflow.com/users/10832345/redcactus"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1546514801, "post_id": 54013636, "comment_id": 94878733, "body": "@DanielRoseman Oh yes, you are right about member and title, that should not be included I will remove that. Thanks. Also, I was a bit confused about the graph and member relationship, I initially assumed it was a one to many relationship, but thought it would not matter I will also change this. How do you update an existing instance now in a one to many relationship for the specific field."}], "owner": {"reputation": 79, "user_id": 10832345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ef3bd20989aff7d933c199202bc5307?s=128&d=identicon&r=PG&f=1", "display_name": "RedCactus", "link": "https://stackoverflow.com/users/10832345/redcactus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1546515934, "creation_date": 1546465869, "last_edit_date": 1546515934, "question_id": 54013636, "link": "https://stackoverflow.com/questions/54013636/how-to-update-a-manytomany-field-in-django-without-deleting-the-previous-object", "title": "How to update a manytomany field in Django without deleting the previous object?", "body": "<p>I have seen this question before, but mine is a bit more restricted in terms of getting the object and filtering. </p>\n\n<p><strong>EDIT</strong> - <strong>Removed relationship between member and title and changed member and xmlgraph to one to many relationship</strong></p>\n\n<p>I have these classes in models.py:</p>\n\n<pre><code>class Title(models.Model):\n    title = models.TextField(null=True)\n    def __str__(self):\n        return self.title\n\nclass XMLGraph(models.Model):\n    #only one title per graph\n    title = models.OneToOneField(\n        to=Title,\n        blank=True,\n        null=True,\n        on_delete=models.CASCADE)\n\n    XMLGraph = models.TextField(null=True)\n\n    def __str__(self):\n        return str(self.XMLGraph)\n\nclass Member(User):\n\n    XMLGraph = models.ForeignKey('XMLGraph',\n        null=True,\n        on_delete=models.CASCADE)\n\n    def __str__(self):\n        return self.username\n\nclass Profile(models.Model):\n    user = models.OneToOneField(\n        to=Member,\n        blank=True,\n        null=True,\n        on_delete=models.CASCADE\n    )\n\n    def __str__(self):\n        return self.name\n</code></pre>\n\n<p>One <strong>Member</strong> can store multiple <strong>XMLGraphs</strong> which are basically text files stored in the database. I have a functionality where the user can save and save as the <strong>XMLGraph</strong>.</p>\n\n<p>The save function should create a new object of the <strong>XMLGraph</strong> if there is nothing in the database or update the current <strong>XMLGraph</strong>. So, when the user presses save, it should update the data stored in the <strong>XMLGraph</strong>. So, I took this approach:</p>\n\n<p><strong>Save function in views.py</strong></p>\n\n<pre><code>def saveData(request, user):\n    if request.method == \"POST\":\n        xmlData = request.POST['xml']\n        member = Member.objects.get(username=user)\n        XMLGraph.objects.all().delete()\n        xml, _ = XMLGraph.objects.get_or_create(XMLGraph = xmlData)\n        member.XMLGraph.add(xml)\n        return render_to_response(\"fastcookapp/index.html\", content_type=\"text/xml;\")\n    return HttpResponse('POST is not used')\n</code></pre>\n\n<p>However, now the issue is that the <strong>Save As</strong> function should generate a new object for <strong>XMLGraph</strong> and <strong>Title</strong> which works fine, but once they click the <strong>save</strong> function it will delete the previous data for <strong>XMLGraph</strong> because of the following line in <strong>saveData</strong></p>\n\n<pre><code>XMLGraph.objects.all().delete()\n</code></pre>\n\n<p><strong>Save As in views.py</strong>:</p>\n\n<pre><code>@loggedin\ndef saveAs(request, user):\nif request.method == \"POST\":\n    member = Member.objects.get(username=user)\n    graphTitle = request.POST['title']\n    title = Title.objects.create(title=graphTitle)\n    member.title.add(title)\n    xmlData = request.POST['xml']\n    xml = XMLGraph.objects.create(XMLGraph = xmlData, title=title)\n    member.XMLGraph.add(xml)\n    return render_to_response(\"fastcookapp/index.html\", content_type=\"text/xml;\")\nreturn HttpResponse('POST is not used')\n</code></pre>\n\n<p>I am aware of .remove() being used instead of delete, but it doesn't seem to work properly as I can't remove the previous data that was added when the user presses <strong>save</strong>.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "edited": false, "score": 1, "creation_date": 1546466798, "post_id": 54013615, "comment_id": 94864644, "body": "Is your example the correct snippet of <code>json</code>? I am unable to read it using <code>json</code> library"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "reply_to_user": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "edited": false, "score": 0, "creation_date": 1546467195, "post_id": 54013615, "comment_id": 94864789, "body": "@hqkhan it&#39;s not valid JSON"}, {"owner": {"reputation": 2107, "user_id": 9989514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbf63c873cc48b4fdccdadefb4ec3025?s=128&d=identicon&r=PG&f=1", "display_name": "Mfreeman", "link": "https://stackoverflow.com/users/9989514/mfreeman"}, "edited": false, "score": 0, "creation_date": 1546467255, "post_id": 54013615, "comment_id": 94864812, "body": "Yeah there was some error on it, The edited data should work now"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1546467277, "post_id": 54013615, "comment_id": 94864819, "body": "Now it is valid"}, {"owner": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "edited": false, "score": 1, "creation_date": 1546467839, "post_id": 54013615, "comment_id": 94865018, "body": "How does priority work in this case? As in, how is it defined? If there are multiple values, you want the first one returned?"}, {"owner": {"reputation": 2107, "user_id": 9989514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbf63c873cc48b4fdccdadefb4ec3025?s=128&d=identicon&r=PG&f=1", "display_name": "Mfreeman", "link": "https://stackoverflow.com/users/9989514/mfreeman"}, "edited": false, "score": 0, "creation_date": 1546468124, "post_id": 54013615, "comment_id": 94865108, "body": "So the list <code>[&#39;Documentation&#39;, &#39;Testing&#39;, &#39;Manufacturing&#39;]</code> is in order of priority, so when the list i return has multiple values for one &#39;issue&#39; eg. <code>(&#39;Documentation&#39;, &#39;Manufacturing&#39;)</code> it returns with the one with highest priority, in this case it would be &quot;Documentation&quot;"}, {"owner": {"reputation": 2107, "user_id": 9989514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbf63c873cc48b4fdccdadefb4ec3025?s=128&d=identicon&r=PG&f=1", "display_name": "Mfreeman", "link": "https://stackoverflow.com/users/9989514/mfreeman"}, "edited": false, "score": 0, "creation_date": 1546468538, "post_id": 54013615, "comment_id": 94865270, "body": "it was only a suggestion to iterate through a &#39;priority&#39; list then stop and return one value that the data list shares with the priority list...if that makes sense"}], "answers": [{"tags": [], "owner": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "is_accepted": false, "score": 1, "last_activity_date": 1546469432, "last_edit_date": 1546469432, "creation_date": 1546469096, "answer_id": 54014146, "question_id": 54013615, "link": "https://stackoverflow.com/questions/54013615/creating-a-list-from-data-to-include-multiple-entries-then-iterate-through-list/54014146#54014146", "title": "Creating a list from data to include multiple entries then Iterate through list to return one string", "body": "<p>How about the code below? I'm basically indexing the priority list and taking the minimum of it (since we're looking at the beginning to be of highest priority). We can switch this to <code>max</code> if the priority list ever changes.</p>\n\n<p>Try this:</p>\n\n<pre><code>import json\n\nwith open(\"file.json\") as f:\n   data = json.load(f)\n\nresult = []\npriority = ['Documentation', 'Testing', 'Manufacturing']\n\nfor issue_dict in data['issues']:\n    if len(issue_dict[\"fields\"][\"components\"]) == 0:\n        result.append([('null', 0)])\n    else: # Can support arbitrary number of custom fields\n        result.append([(list(name_dict.values())[0], priority.index(list(name_dict.values())[0]))  for name_dict in issue_dict[\"fields\"][\"components\"]])\n\nprint(result)\n# [[('null', 0)], [('Testing', 1)], [('Documentation', 0), ('Manufacturing', 2)]]\n\nresult = [min(item, key= lambda x: x[1])[0] for item in result]\n\nprint(result)\n#['null', 'Testing', 'Documentation']\n</code></pre>\n\n<p>For the nested lists: if the length is 1, then <code>min</code> will simply take the only choice obviously. For the others, we find the minimum index aka highest priority.</p>\n\n<p>I've included some print statements strictly for debugging and for you to see if it makes sense. Hope this helps.</p>\n"}, {"comments": [{"owner": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "edited": false, "score": 0, "creation_date": 1546635967, "post_id": 54045768, "comment_id": 94927617, "body": "That&#39;s great if it works. Just a word of advice, you should try your best to make your code readable. This of course depends on who will look at the code and its actual purpose but having a really long one liner is usually undesirable."}, {"owner": {"reputation": 2107, "user_id": 9989514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbf63c873cc48b4fdccdadefb4ec3025?s=128&d=identicon&r=PG&f=1", "display_name": "Mfreeman", "link": "https://stackoverflow.com/users/9989514/mfreeman"}, "reply_to_user": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "edited": false, "score": 0, "creation_date": 1546963135, "post_id": 54045768, "comment_id": 95023245, "body": "Yeah i understand, the list comprehension part is a lot bigger in my actual code and isn&#39;t to create a list of just components......its for inserting values into a database so the list that it returns is (components[0], value1[0], value2[0]), (components[1], value1[1], value2[1]) ect."}], "tags": [], "owner": {"reputation": 2107, "user_id": 9989514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbf63c873cc48b4fdccdadefb4ec3025?s=128&d=identicon&r=PG&f=1", "display_name": "Mfreeman", "link": "https://stackoverflow.com/users/9989514/mfreeman"}, "is_accepted": false, "score": 0, "last_activity_date": 1546634624, "creation_date": 1546634624, "answer_id": 54045768, "question_id": 54013615, "link": "https://stackoverflow.com/questions/54013615/creating-a-list-from-data-to-include-multiple-entries-then-iterate-through-list/54045768#54045768", "title": "Creating a list from data to include multiple entries then Iterate through list to return one string", "body": "<p>So i ended up doing it this way:</p>\n\n<p>creating a function that will look if any \"components\" are in the given list, and will return and stop the iteration when the given component is found </p>\n\n<pre><code>def _define_component(multiple_component_list):\n\n        for components in ['Documentation', 'Testing', 'Manufacturing']:\n            if components in multiple_component_list:\n                return components\n\n        return 'Unknown'\n</code></pre>\n\n<p>and calling the function in my list comprehension with the expression i used when the length > 1 as the argument (same as original code except after the last 'else' statement)</p>\n\n<pre><code>list(('Unknown' if len(item['fields']['components']) == 0 else\n                           item['fields']['components'][0]['name'] if len(\n                           item['fields']['components']) == 1 else _define_component(\n                           [item['fields']['components'][0]['name'],\n                            item['fields']['components'][1]['name']]))for item in data['issues'])\n</code></pre>\n"}], "owner": {"reputation": 2107, "user_id": 9989514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbf63c873cc48b4fdccdadefb4ec3025?s=128&d=identicon&r=PG&f=1", "display_name": "Mfreeman", "link": "https://stackoverflow.com/users/9989514/mfreeman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1546634624, "creation_date": 1546465736, "last_edit_date": 1546468801, "question_id": 54013615, "link": "https://stackoverflow.com/questions/54013615/creating-a-list-from-data-to-include-multiple-entries-then-iterate-through-list", "title": "Creating a list from data to include multiple entries then Iterate through list to return one string", "body": "<p><strong>What I have currently</strong></p>\n\n<p>I want to create a list from this data set to only include the name values, but have them grouped by each 'issue', so I then can iterate through this list and return one value based on priority. </p>\n\n<pre><code>{\n \"issues\": [\n    {\n      \"fields\": {\n        \"components\": [],\n        \"customfield_1\": null,\n        \"customfield_2\": null\n      }\n    },\n    {\n      \"fields\": {\n        \"components\": [\n            {\n              \"name\": \"Testing\"\n            }\n          ],\n        \"customfield_1\": null,\n        \"customfield_2\": null\n      }\n    },\n    {\n      \"key\": \"3\",\n      \"fields\": {\n         \"components\": [\n            {\n              \"name\": \"Documentation\"\n            },\n            {\n               \"name\": \"Manufacturing\"\n            }\n           ],\n          \"customfield_1\": null,\n          \"customfield_2\": null\n      }\n     }\n  ]\n }\n</code></pre>\n\n<p>I want the output to look something like this:</p>\n\n<pre><code>['null', 'testing', ('Documentation', 'Manufacturing')]\n</code></pre>\n\n<p>I was able to accomplish this by the following code:\n(sorry about the formatting, not sure how to make this looks better without having it on one line)</p>\n\n<pre><code>list((\n'null' if len(item['fields']['components'])== 0 \nelse \nitem['fields']['components'][0]['name']) if len(item['fields']['components'])==1 \nelse \n(item['fields']['components'][0]['name']), item['fields']['components'][1]['name']))) \nfor item in data['issues'])\n</code></pre>\n\n<p><strong>The Problem</strong></p>\n\n<p>Now I need to have the value <code>(\"Documentation\", \"Manufacturing\")</code> from the above output to return only 1 component based on priority.</p>\n\n<p>I think I need to iterate through something like <code>['Documentation', 'Testing', 'Manufacturing\"]</code> \nso when it hits, lets say 'Documentation', it stops and returns only 'Documentation'. (this list is specific for priority and is in order of highest to lowest priority)</p>\n\n<p>I want the final list to be <code>['null', 'Testing', 'Documentation']</code></p>\n\n<p>I do not need the others to be changed, just the entry with multiple values. </p>\n"}, {"tags": ["python", "decimal"], "answers": [{"comments": [{"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1546467162, "post_id": 54013786, "comment_id": 94864778, "body": "The documentation you quoted only deals with the internal representation, not what <code>format</code> is going to produce."}, {"owner": {"reputation": 1018, "user_id": 3233055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3TcV3.jpg?s=128&g=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/3233055/julian"}, "reply_to_user": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1546467231, "post_id": 54013786, "comment_id": 94864805, "body": "Right, which is why I said it wasn&#39;t clear.  It only implies through the examples that the formatting will work as expected.  There is no explicit discussion of interaction with string&#39;s .format method.  I will continue looking, and post if I find anything.  Another interesting part of those docs:  &quot;Unlike hardware based binary floating point, the decimal module has a user alterable precision (defaulting to 28 places) which can be as large as needed for a given problem:&quot; but this value doesn&#39;t seem to affect the string formatting."}, {"owner": {"reputation": 129273, "user_id": 71522, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f0e286ba0482e57904e89e753a4b36e6?s=128&d=identicon&r=PG", "display_name": "David Wolever", "link": "https://stackoverflow.com/users/71522/david-wolever"}, "edited": false, "score": 0, "creation_date": 1546467778, "post_id": 54013786, "comment_id": 94865000, "body": "See my point 3, above: this <i>appears</i> to work, but it contradicts what the <code>string.format</code> documentation says about the behavior of <code>&#39;f&#39;</code>, so I&#39;m reluctant to trust it."}, {"owner": {"reputation": 1018, "user_id": 3233055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3TcV3.jpg?s=128&g=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/3233055/julian"}, "edited": false, "score": 2, "creation_date": 1546467935, "post_id": 54013786, "comment_id": 94865044, "body": "When in doubt: use the source, haha.  I&#39;ll update the answer, but basically you can trust it because of the <code>Decimal.__format__</code> methods implementation."}, {"owner": {"reputation": 1018, "user_id": 3233055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3TcV3.jpg?s=128&g=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/3233055/julian"}, "edited": false, "score": 0, "creation_date": 1546468299, "post_id": 54013786, "comment_id": 94865171, "body": "I recommend checking out the source code for decimal.py, as the formatting is very unique.  It&#39;s a shame none of that is mentioned in the documentation."}, {"owner": {"reputation": 69000, "user_id": 85360, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/424a8f03889e3ffbf9ed57adb1fc41cc?s=128&d=identicon&r=PG", "display_name": "Brandon Rhodes", "link": "https://stackoverflow.com/users/85360/brandon-rhodes"}, "edited": false, "score": 1, "creation_date": 1546474636, "post_id": 54013786, "comment_id": 94866784, "body": "Remember that <code>string.format</code> has no control over what format operators actually do any more \u2014 it&#39;s now deferred to <code>__format__()</code> methods."}, {"owner": {"reputation": 1018, "user_id": 3233055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3TcV3.jpg?s=128&g=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/3233055/julian"}, "reply_to_user": {"reputation": 69000, "user_id": 85360, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/424a8f03889e3ffbf9ed57adb1fc41cc?s=128&d=identicon&r=PG", "display_name": "Brandon Rhodes", "link": "https://stackoverflow.com/users/85360/brandon-rhodes"}, "edited": false, "score": 0, "creation_date": 1546475039, "post_id": 54013786, "comment_id": 94866867, "body": "@BrandonRhodes great point, which makes me even more confident that this is the right answer."}], "tags": [], "owner": {"reputation": 1018, "user_id": 3233055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3TcV3.jpg?s=128&g=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/3233055/julian"}, "is_accepted": true, "score": 5, "last_activity_date": 1580323096, "last_edit_date": 1580323096, "creation_date": 1546466708, "answer_id": 54013786, "question_id": 54013614, "link": "https://stackoverflow.com/questions/54013614/get-precise-decimal-string-representation-of-python-decimal/54013786#54013786", "title": "Get precise decimal string representation of Python Decimal?", "body": "<h3>Short answer:</h3>\n\n<pre><code>&gt;&gt;&gt; d\nDecimal('1E-14')\n&gt;&gt;&gt; '{:f}'.format(d)\n'0.00000000000001'\n</code></pre>\n\n<h3>Long answer:</h3>\n\n<p>As <a href=\"https://stackoverflow.com/users/85360/brandon-rhodes\">Brandon Rhodes</a> pointed out <a href=\"https://www.python.org/dev/peps/pep-3101/#format-specifiers\" rel=\"nofollow noreferrer\">PEP 3101</a> (which is the string format PEP) states:</p>\n\n<blockquote>\n  <p>The syntax for format specifiers is open-ended, since a class can\n  override the standard format specifiers. In such cases, the\n  str.format() method merely passes all of the characters between the\n  first colon and the matching brace to the relevant underlying\n  formatting method.</p>\n</blockquote>\n\n<p>And thus, the <code>Decimal.__format__</code> method is what python's string format will utilize to generate the <code>str</code> representation of the <code>Decimal</code> value.  Basically <code>Decimal</code> overrides the formatting to be \"smart\" but will default to whatever values the format string sets (ie <code>{:.4f}</code> will truncate the decimal to 4 places).</p>\n\n<p>Here's why you can trust it (snippet from <code>decimal.py:Decimal.__format__</code>):</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def __format__(self, specifier, context=None, _localeconv=None):\n    #\n    # ...implementation snipped.\n    #\n\n    # figure out placement of the decimal point\n    leftdigits = self._exp + len(self._int)\n    if spec['type'] in 'eE':\n        if not self and precision is not None:\n            dotplace = 1 - precision\n        else:\n            dotplace = 1\n    elif spec['type'] in 'fF%':\n        dotplace = leftdigits\n    elif spec['type'] in 'gG':\n        if self._exp &lt;= 0 and leftdigits &gt; -6:\n            dotplace = leftdigits\n        else:\n            dotplace = 1\n\n    # find digits before and after decimal point, and get exponent\n    if dotplace &lt; 0:\n        intpart = '0'\n        fracpart = '0'*(-dotplace) + self._int\n    elif dotplace &gt; len(self._int):\n        intpart = self._int + '0'*(dotplace-len(self._int))\n        fracpart = ''\n    else:\n        intpart = self._int[:dotplace] or '0'\n        fracpart = self._int[dotplace:]\n    exp = leftdigits-dotplace\n\n    # done with the decimal-specific stuff;  hand over the rest\n    # of the formatting to the _format_number function\n    return _format_number(self._sign, intpart, fracpart, exp, spec)\n</code></pre>\n\n<p>Long story short, the <code>Decimal.__format__</code> method will calculate the necessary padding to represent the number before and after the decimal based upon exponentiation provided from <code>Decimal._exp</code> (in your example, 14 significant digits).</p>\n\n<pre><code>&gt;&gt;&gt; d._exp\n-14\n</code></pre>\n"}], "owner": {"reputation": 129273, "user_id": 71522, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f0e286ba0482e57904e89e753a4b36e6?s=128&d=identicon&r=PG", "display_name": "David Wolever", "link": "https://stackoverflow.com/users/71522/david-wolever"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 432, "favorite_count": 2, "accepted_answer_id": 54013786, "answer_count": 1, "score": 6, "last_activity_date": 1580323096, "creation_date": 1546465735, "question_id": 54013614, "link": "https://stackoverflow.com/questions/54013614/get-precise-decimal-string-representation-of-python-decimal", "title": "Get precise decimal string representation of Python Decimal?", "body": "<p>If I've got a Python <code>Decimal</code>, how can I reliably get the precise decimal string (ie, not scientific notation) representation of the number without trailing zeros?</p>\n\n<p>For example, if I have:</p>\n\n<pre><code>&gt;&gt;&gt; d = Decimal('1e-14')\n</code></pre>\n\n<p>I would like:</p>\n\n<pre><code>&gt;&gt;&gt; get_decimal_string(d)\n'0.00000000000001'\n</code></pre>\n\n<p>However:</p>\n\n<ol>\n<li>The <code>Decimal</code> class doesn't have any <code>to_decimal_string</code> method, or even any <code>to_radix_string(radix)</code> (cf: <a href=\"https://docs.python.org/3/library/decimal.html#decimal.Context.to_eng_string\" rel=\"noreferrer\">https://docs.python.org/3/library/decimal.html#decimal.Context.to_eng_string</a>)</li>\n<li>The <code>%f</code> formatter either defaults to rounding to 6 decimal places - <code>'%f' %(d, ) ==&gt; '0.000000'</code> - or requires a precise number of decimal places.</li>\n<li>The <code>{:f}.format(...)</code> formatter <em>appears</em> to work - <code>'{:f}'.format(d)\n==&gt; '0.00000000000001'</code> - <em>however</em> I'm reluctant to trust that, as this actually runs counter to <a href=\"https://docs.python.org/3/library/string.html#index-9\" rel=\"noreferrer\">the documentation</a>, which says \"<code>'f'</code> \u2026 Displays the number as a fixed-point number. The default precision is 6\"</li>\n<li><code>Decimal.__repr__</code> and <code>Decimal.__str__</code> sometimes return scientific notation: <code>repr(d) ==&gt; \"Decimal('1E-14')\"</code></li>\n</ol>\n\n<p>So, is there any way to get a decimal string from a Python <code>Decimal</code>? Or do I need to roll my own using <code>Decimal.as_tuple()</code>?</p>\n"}, {"tags": ["python", "flask"], "comments": [{"owner": {"reputation": 522, "user_id": 1484491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jneRa.gif?s=128&g=1", "display_name": "Hugo", "link": "https://stackoverflow.com/users/1484491/hugo"}, "edited": false, "score": 2, "creation_date": 1546467439, "post_id": 54013584, "comment_id": 94864876, "body": "Is there any particular reason you need to split the endpoint?  I&#39;d expect to see these as a single endpoint, perhaps with an early return when no args are supplied."}, {"owner": {"reputation": 972, "user_id": 1163373, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/g8q0R.jpg?s=128&g=1", "display_name": "Dani G", "link": "https://stackoverflow.com/users/1163373/dani-g"}, "edited": false, "score": 1, "creation_date": 1546467746, "post_id": 54013584, "comment_id": 94864990, "body": "Why not add a condition after &#39;value = request.args.get(&#39;morethan&#39;)&#39; ? e.g. &#39; if value: ... else: ..."}, {"owner": {"reputation": 1, "user_id": 10859914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8d342248cc1d4c680efb6ea5dfabe0b?s=128&d=identicon&r=PG&f=1", "display_name": "James McG", "link": "https://stackoverflow.com/users/10859914/james-mcg"}, "edited": false, "score": 0, "creation_date": 1546468403, "post_id": 54013584, "comment_id": 94865218, "body": "And where should I put the condition? And what should the condition be?"}], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 6303748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62f11ec1d534d75581d76cf6f1529f79?s=128&d=identicon&r=PG&f=1", "display_name": "Georgio3", "link": "https://stackoverflow.com/users/6303748/georgio3"}, "is_accepted": false, "score": 0, "last_activity_date": 1546469677, "creation_date": 1546469677, "answer_id": 54014240, "question_id": 54013584, "link": "https://stackoverflow.com/questions/54013584/flask-same-endpoints-of-routes/54014240#54014240", "title": "Flask: same endpoints of routes", "body": "<p>Solution found. Thanks to those who commented.</p>\n\n<pre><code>value = request.args.get('morethan')\nif value is not None:\n    //code for /tweets?morethan={value}\nelse:\n    //code for /tweets\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10859914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8d342248cc1d4c680efb6ea5dfabe0b?s=128&d=identicon&r=PG&f=1", "display_name": "James McG", "link": "https://stackoverflow.com/users/10859914/james-mcg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1546469677, "creation_date": 1546465618, "last_edit_date": 1546466774, "question_id": 54013584, "link": "https://stackoverflow.com/questions/54013584/flask-same-endpoints-of-routes", "title": "Flask: same endpoints of routes", "body": "<p>I'm developing a Flask API and I'm having these two endpoints:</p>\n\n<ul>\n<li><code>/length</code></li>\n<li><code>/length?morethan={value}</code></li>\n</ul>\n\n<p>How do I separate them? They are having the same beginning (before the '?') so when routing I'll have to refer to the same endpoint.</p>\n\n<pre><code>@app.route('/length', methods=['GET'])\ndef func1():\n    //code\n\n@app.route('/length', methods=['GET'])\ndef func2():\n    value = request.args.get('morethan')\n    //code\n</code></pre>\n\n<p>This code works for the second version of my API (I get what I want if I write /length?morethan=3) but for the first one I just get an empty list and it doesn't display my DB content.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1546467118, "post_id": 54013570, "comment_id": 94864763, "body": "<code>&#39;NULL_SENDER&#39;</code> is a string literal. It is like any other string you would use"}, {"owner": {"reputation": 7205, "user_id": 9288200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1c4dc5d3f7433e18f4aa04319ebaec?s=128&d=identicon&r=PG&f=1", "display_name": "Ondrej K.", "link": "https://stackoverflow.com/users/9288200/ondrej-k"}, "edited": false, "score": 1, "creation_date": 1546471085, "post_id": 54013570, "comment_id": 94865970, "body": "<code>state.config</code> apparently is not a list but a mapping object (dict or similar), hence <code>NULL_SENDER</code> is not an index, but a key."}], "answers": [{"tags": [], "owner": {"reputation": 1726, "user_id": 7363404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoAql.png?s=128&g=1", "display_name": "Axiumin_", "link": "https://stackoverflow.com/users/7363404/axiumin"}, "is_accepted": false, "score": 0, "last_activity_date": 1546482126, "creation_date": 1546482126, "answer_id": 54015554, "question_id": 54013570, "link": "https://stackoverflow.com/questions/54013570/how-to-use-index-in-python-list/54015554#54015554", "title": "How to use index in python list?", "body": "<p>Let's look through all the code.</p>\n\n<pre><code>from ethereum import utils, transactions\nfrom ethereum.common import update_block_env_variables\nfrom ethereum.messages import apply_transaction\nfrom ethereum.hybrid_casper import casper_utils\nfrom ethereum.utils import privtoaddr\n\n# Block initialization state transition\ndef initialize(state, block=None):\n    config = state.config\n\n    state.txindex = 0\n    state.gas_used = 0\n    state.bloom = 0\n    state.receipts = []\n\n    if block is not None:\n        update_block_env_variables(state, block)\n\n    # Initalize the next epoch in the Casper contract\n    if state.block_number % state.config['EPOCH_LENGTH'] == 0 and state.block_number != 0:\n        key, account = state.config['NULL_SENDER'], privtoaddr(state.config['NULL_SENDER'])\n        data = casper_utils.casper_translator.encode('initialize_epoch', [state.block_number // state.config['EPOCH_LENGTH']])\n        transaction = transactions.Transaction(state.get_nonce(account), 0, 3141592,\n                                               state.config['CASPER_ADDRESS'], 0, data).sign(key)\n        success, output = apply_transaction(state, transaction)\n        assert success\n\n    if state.is_DAO(at_fork_height=True):\n        for acct in state.config['CHILD_DAO_LIST']:\n            state.transfer_value(\n                acct,\n                state.config['DAO_WITHDRAWER'],\n                state.get_balance(acct))\n\n    if state.is_METROPOLIS(at_fork_height=True):\n        state.set_code(utils.normalize_address(\n            config[\"METROPOLIS_STATEROOT_STORE\"]), config[\"METROPOLIS_GETTER_CODE\"])\n        state.set_code(utils.normalize_address(\n            config[\"METROPOLIS_BLOCKHASH_STORE\"]), config[\"METROPOLIS_GETTER_CODE\"])\n</code></pre>\n\n<p>We can see that this code is most likely being imported by multiple programs, which it is! <a href=\"https://github.com/ethereum/pyethereum/blob/develop/ethereum/hybrid_casper/chain.py\" rel=\"nofollow noreferrer\">https://github.com/ethereum/pyethereum/blob/develop/ethereum/hybrid_casper/chain.py</a></p>\n\n<p>If we see the usage of the function in chain.py, the <code>state</code> parameter is being fulfilled with <code>self.state</code>, it is <code>self.state = self.mk_poststate_of_blockhash(self.db.get(b'head_hash'))</code>.</p>\n\n<p>This function returns a <code>State</code> object, made in <code>ethereum.state</code>, which <strong>can</strong> be turned into a dictionary. This most likely means that it is getting the value that corresponds to the key called 'NULL_SENDER'.</p>\n"}], "owner": {"reputation": 11, "user_id": 10769012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39a048286fa0387962e5790dfb1aa11?s=128&d=identicon&r=PG&f=1", "display_name": "shwetha ", "link": "https://stackoverflow.com/users/10769012/shwetha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1546498170, "creation_date": 1546465556, "last_edit_date": 1546498170, "question_id": 54013570, "link": "https://stackoverflow.com/questions/54013570/how-to-use-index-in-python-list", "title": "How to use index in python list?", "body": "<p>I am trying to execute the code of pyethereum but when I was analyzing the code in \n<code>pyethereum/Ethereum/hybrid_casper/consenus.py</code></p>\n\n<p>I can't understand where the <code>'NULL_SENDER'</code> value is defined and how this <code>state.config['NULL_SENDER]</code> will execute.</p>\n\n<p><code>key, account = state.config['NULL_SENDER'], privtoaddr(state.config['NULL_SENDER'])</code></p>\n"}, {"tags": ["python", "pandas", "csv", "nlp", "jupyter-notebook"], "comments": [{"owner": {"reputation": 2356, "user_id": 2711535, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/deb303bc03966e2e71931b5410ad81cd?s=128&d=identicon&r=PG&f=1", "display_name": "mauve", "link": "https://stackoverflow.com/users/2711535/mauve"}, "edited": false, "score": 2, "creation_date": 1546465733, "post_id": 54013555, "comment_id": 94864224, "body": "It sounds to me like you might need to figure out if you&#39;re using the wrong delimiter. i.e., comma, tab, space, etc"}, {"owner": {"reputation": 3773, "user_id": 1838257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540386102f92985c85ced9c6b237dd60?s=128&d=identicon&r=PG", "display_name": "jorijnsmit", "link": "https://stackoverflow.com/users/1838257/jorijnsmit"}, "edited": false, "score": 0, "creation_date": 1546466076, "post_id": 54013555, "comment_id": 94864375, "body": "Please share some sample data and your code!"}, {"owner": {"reputation": 127, "user_id": 10443592, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TYkqVgjQja0/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUdWlj0XFiQTsz1MgQCD2rAXOa7SA/mo/photo.jpg?sz=128", "display_name": "Talal Ghannam", "link": "https://stackoverflow.com/users/10443592/talal-ghannam"}, "edited": false, "score": 0, "creation_date": 1546466815, "post_id": 54013555, "comment_id": 94864651, "body": "I am not sure what to use as delimiter as this is one cell per row. each cell contains texts with commas, dots, | numbers etc."}, {"owner": {"reputation": 127, "user_id": 10443592, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TYkqVgjQja0/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUdWlj0XFiQTsz1MgQCD2rAXOa7SA/mo/photo.jpg?sz=128", "display_name": "Talal Ghannam", "link": "https://stackoverflow.com/users/10443592/talal-ghannam"}, "edited": false, "score": 0, "creation_date": 1546466848, "post_id": 54013555, "comment_id": 94864666, "body": "i am using pd.read_csv(&quot;path &quot;)"}, {"owner": {"reputation": 127, "user_id": 10443592, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TYkqVgjQja0/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUdWlj0XFiQTsz1MgQCD2rAXOa7SA/mo/photo.jpg?sz=128", "display_name": "Talal Ghannam", "link": "https://stackoverflow.com/users/10443592/talal-ghannam"}, "edited": false, "score": 0, "creation_date": 1546471541, "post_id": 54013555, "comment_id": 94866097, "body": "when i use jupytor notebooks on Azure it works fine, however, the problem is that Azure only allows me to upload files 10 mb in size and mine is over 300 mb. anyway around this?"}, {"owner": {"reputation": 2356, "user_id": 2711535, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/deb303bc03966e2e71931b5410ad81cd?s=128&d=identicon&r=PG&f=1", "display_name": "mauve", "link": "https://stackoverflow.com/users/2711535/mauve"}, "edited": false, "score": 0, "creation_date": 1546524408, "post_id": 54013555, "comment_id": 94883908, "body": "To get an answer to a Jupyter question, it&#39;ll get in front of folks who are more likely to be able to help if you ask that specific question and add that tag."}, {"owner": {"reputation": 127, "user_id": 10443592, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TYkqVgjQja0/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUdWlj0XFiQTsz1MgQCD2rAXOa7SA/mo/photo.jpg?sz=128", "display_name": "Talal Ghannam", "link": "https://stackoverflow.com/users/10443592/talal-ghannam"}, "edited": false, "score": 0, "creation_date": 1546794287, "post_id": 54013555, "comment_id": 94960870, "body": "I was able to solve the matter, the path to the files was wrong. I had to use os to find the go to the correct location. thanks"}], "owner": {"reputation": 127, "user_id": 10443592, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TYkqVgjQja0/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUdWlj0XFiQTsz1MgQCD2rAXOa7SA/mo/photo.jpg?sz=128", "display_name": "Talal Ghannam", "link": "https://stackoverflow.com/users/10443592/talal-ghannam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1546531317, "creation_date": 1546465476, "last_edit_date": 1546531317, "question_id": 54013555, "link": "https://stackoverflow.com/questions/54013555/pandas-reading-csv-with-large-texts-fpr-nlp", "title": "pandas reading csv with large texts fpr nlp", "body": "<p>I have a large csv file made of 1 column and with a single cell in each row, around 18800 of them. Each cell contains a large text. The file size is big; around 318 Mb. I am using Jupyter notebooks.</p>\n\n<p>I am trying to read the csv file into a pandas dataframe, however I am receiving the following error:</p>\n\n<p><code>ParserError: Error tokenizing data. C error: Expected 1 fields in line 12, saw 2</code></p>\n\n<p>I tried some tricks, however, I am not getting the original text or even the number of rows. Instead I am getting something like 200 rows. </p>\n"}, {"tags": ["python", "scikit-learn", "classification", "loss"], "comments": [{"owner": {"reputation": 1445, "user_id": 10294689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2ace5f1e6d8a8387d0290f1eeffef00?s=128&d=identicon&r=PG&f=1", "display_name": "Alex_P", "link": "https://stackoverflow.com/users/10294689/alex-p"}, "edited": false, "score": 1, "creation_date": 1546465661, "post_id": 54013554, "comment_id": 94864189, "body": "Does your code in total work and you want suggestions for improvement or do you encounter an error somewhere?"}, {"owner": {"reputation": 745, "user_id": 9027428, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c41877a269620ea86e2953590112f220?s=128&d=identicon&r=PG&f=1", "display_name": "Laurent R", "link": "https://stackoverflow.com/users/9027428/laurent-r"}, "reply_to_user": {"reputation": 1445, "user_id": 10294689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2ace5f1e6d8a8387d0290f1eeffef00?s=128&d=identicon&r=PG&f=1", "display_name": "Alex_P", "link": "https://stackoverflow.com/users/10294689/alex-p"}, "edited": false, "score": 0, "creation_date": 1546465846, "post_id": 54013554, "comment_id": 94864276, "body": "I don&#39;t think a gridsearch will tolerate that form of metric"}], "answers": [{"comments": [{"owner": {"reputation": 745, "user_id": 9027428, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c41877a269620ea86e2953590112f220?s=128&d=identicon&r=PG&f=1", "display_name": "Laurent R", "link": "https://stackoverflow.com/users/9027428/laurent-r"}, "edited": false, "score": 0, "creation_date": 1546469212, "post_id": 54013656, "comment_id": 94865464, "body": "This solution will work, I will pre-populate the cost table. I will just need to create a custom gridsearch to create the different folds for each cross validation."}], "tags": [], "owner": {"reputation": 5053, "user_id": 2421391, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/980724d5505b7c2ee035c38b8adabd54?s=128&d=identicon&r=PG", "display_name": "scnerd", "link": "https://stackoverflow.com/users/2421391/scnerd"}, "is_accepted": true, "score": 1, "last_activity_date": 1546465976, "creation_date": 1546465976, "answer_id": 54013656, "question_id": 54013554, "link": "https://stackoverflow.com/questions/54013554/use-a-amount-as-loss-to-measure-classification-performance/54013656#54013656", "title": "Use a $ amount as loss to measure classification performance", "body": "<p>You can easily implement a binary table like this using... well, a table. It'd look like this:</p>\n\n<pre><code>metric_table = [[0, reviewcost],\n                [fa, reviewcost]]\nmetric_value = metric_table[yt][yp]  # for a given yt, yp\n</code></pre>\n\n<p>I've taken the liberty here to fix what seems to be a bug in your code, since you zipped four iterables and only got three values out. I assume you want the element from <code>reviewcost</code> rather than the whole thing. Fix it if that's not correct. Also, I don't see the need to create a temporary array, just to sum it all up, so I've collapsed it to the summation of a generator:</p>\n\n<pre><code>def fraudmetric(ytrue, ypred, fraudulentamt, reviewcost):\n    return sum([[ 0, rc],\n                [fa, rc]][yt][yp]\n               for yt, yp, fa, rc in zip(ytrue, ypred, fraudulentamt, reviewcost))\n</code></pre>\n"}], "owner": {"reputation": 745, "user_id": 9027428, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c41877a269620ea86e2953590112f220?s=128&d=identicon&r=PG&f=1", "display_name": "Laurent R", "link": "https://stackoverflow.com/users/9027428/laurent-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21, "favorite_count": 0, "accepted_answer_id": 54013656, "answer_count": 1, "score": 0, "last_activity_date": 1546465976, "creation_date": 1546465469, "question_id": 54013554, "link": "https://stackoverflow.com/questions/54013554/use-a-amount-as-loss-to-measure-classification-performance", "title": "Use a $ amount as loss to measure classification performance", "body": "<p>I'm working on a fraud detection system, and I would like to optimize the system to take account of the cost (in $) of the reviewing department:</p>\n\n<p>I would like to adjust the loss depending on a final cost:</p>\n\n<ul>\n<li>If a transaction is fraudulent, but the amount is small, it may be more expensive to spend time on a review.</li>\n<li>A non-fraudulent transaction that is reviewed still has a cost.</li>\n<li>Some transaction can be really costly and must be caught</li>\n</ul>\n\n<p>The metric should be the sum of:</p>\n\n<ul>\n<li>TP --> No cost</li>\n<li>FP --> review cost</li>\n<li>TN --> review cost + the amount of money we got back from the fraud (if it's not the totality)</li>\n<li>FN --> Total amount of the fraudulent transaction</li>\n</ul>\n\n<p>The metric should look like that:</p>\n\n<pre><code>def fraudmetric(ytrue, ypred, fraudulentamt, reviewcost):\n  cost = [0 if yt==0 and yp==0 else          ## TN\n          reviewcost if yt==1 and yp==1 else ## TP\n          reviewcost if yt==0 and yp==1 else ## FP\n          fa if yt==1 and yp==0 else 0       ## FN\n          for yt, yp, fa in zip(ytrue, ypred, fraudulentamt, reviewcost)]\n  return np.sum(cost)\n</code></pre>\n\n<p>Is there an elegant way to do that with <code>Python</code> ?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "lambda"], "answers": [{"tags": [], "owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "is_accepted": true, "score": 5, "last_activity_date": 1546466152, "last_edit_date": 1546466152, "creation_date": 1546465492, "answer_id": 54013562, "question_id": 54013530, "link": "https://stackoverflow.com/questions/54013530/return-values-from-a-lambda-expression/54013562#54013562", "title": "Return values from a lambda expression", "body": "<p>No <code>lambda</code> needed at all:</p>\n\n<pre><code>lst.append(p if T &lt; 1 else 0)\n</code></pre>\n\n<p>The ternary expression itself will do. In order to get the return value of the lambda function, it would have to be called, something along these lines:</p>\n\n<pre><code>lst.append((lambda: p if T &lt; 1 else 0)())\n</code></pre>\n\n<p>This, of course, is rather pointless. A lambda function can only contain a single expression. Instantly calling it makes the function obsolete, as you are back to the bare expression. That is why such functions often take arguments that are dynamically filled by the context into which the function is passed. This lambda wouldn't even need arguments as all needed parts are there, ready to be used.</p>\n"}, {"tags": [], "owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "is_accepted": false, "score": 2, "last_activity_date": 1546465549, "creation_date": 1546465549, "answer_id": 54013569, "question_id": 54013530, "link": "https://stackoverflow.com/questions/54013530/return-values-from-a-lambda-expression/54013569#54013569", "title": "Return values from a lambda expression", "body": "<p>An alternative solution would be to consider <strong>list comprehension</strong> to create you final list <code>lst</code>. This way you can also avoid the use of intermediate variables. Of course this is just a one liner to solve your problem.</p>\n\n<pre><code>lst = [float(row[0]) if float(row[1]) &lt; 1 else 0 for row in data]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 49, "user_id": 3386063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ad0e39812ee02719204b8fa37dd7941?s=128&d=identicon&r=PG&f=1", "display_name": "tkiral", "link": "https://stackoverflow.com/users/3386063/tkiral"}, "is_accepted": false, "score": 0, "last_activity_date": 1546472607, "last_edit_date": 1546472607, "creation_date": 1546465581, "answer_id": 54013577, "question_id": 54013530, "link": "https://stackoverflow.com/questions/54013530/return-values-from-a-lambda-expression/54013577#54013577", "title": "Return values from a lambda expression", "body": "<p>You don't need the lambda expression.</p>\n\n<p>You can think of it like this: currently, you're telling the computer to append the function itself to the list; you're not telling the computer to append the evaluation of that value.  If you get rid of the <code>lambda T:</code> bit, you're basically doing an inline if-statement that DOES evaluate the value.  Lambda functions are used to define single-line functions to be used later.</p>\n"}, {"tags": [], "owner": {"reputation": 64597, "user_id": 1453822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c8db97d2ecdfe5e044cee4c470abb60?s=128&d=identicon&r=PG", "display_name": "DeepSpace", "link": "https://stackoverflow.com/users/1453822/deepspace"}, "is_accepted": false, "score": 1, "last_activity_date": 1546467387, "last_edit_date": 1546467387, "creation_date": 1546466983, "answer_id": 54013832, "question_id": 54013530, "link": "https://stackoverflow.com/questions/54013530/return-values-from-a-lambda-expression/54013832#54013832", "title": "Return values from a lambda expression", "body": "<p>You already got 2 great answers so I'm going to suggest another approach. This can be solved on the query level, assuming you are actually only selecting these 2 columns with the logic you showed us.</p>\n\n<p>This has the potential for better performance if there are a lot of rows in the table:</p>\n\n<pre><code>cur.execute('SELECT CASE WHEN T &lt; 1 THEN p WHEN T &gt; 1 THEN 0 END FROM W')\ndata = cur.fetchall()\n</code></pre>\n\n<p>Then you do not need the loop as <code>data</code> already contains what you need. Just keep in mind this query will return <code>None</code> for rows in which <code>T == 1</code>, but that can be easily handled with another <code>WHEN</code>.</p>\n"}], "owner": {"reputation": 111, "user_id": 10322766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cd4545948ced27a00cf05813ae9e65d?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle C", "link": "https://stackoverflow.com/users/10322766/kyle-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 54013562, "answer_count": 4, "score": 0, "last_activity_date": 1546472607, "creation_date": 1546465337, "last_edit_date": 1546465780, "question_id": 54013530, "link": "https://stackoverflow.com/questions/54013530/return-values-from-a-lambda-expression", "title": "Return values from a lambda expression", "body": "<p>I am importing values from a SQLite database and wanting to run a lambda expression over one of the columns to create a list. </p>\n\n<pre><code>cur.execute('SELECT p, T FROM W')\ndata = cur.fetchall()\n\nlst = list()\nfor row in data:\n    p = float(row[0])\n    T = float(row[1])\n    lst.append(lambda T: p if T &lt; 1 else 0)\n</code></pre>\n\n<p>When I run this the output is a list of the following: </p>\n\n<pre><code>&lt; function &lt;lambda&gt; at 0x00000255E52AA8C8&gt; . \n</code></pre>\n\n<p>I am wanting to append the list with the value of <code>p</code> when <code>T</code> &lt; 1 and 0 if <code>T</code> > 1.</p>\n"}, {"tags": ["python", "flask", "flask-wtforms", "wtforms", "file-storage"], "answers": [{"comments": [{"owner": {"reputation": 828, "user_id": 1489503, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/eUgxa.png?s=128&g=1", "display_name": "Rednaxel", "link": "https://stackoverflow.com/users/1489503/rednaxel"}, "edited": false, "score": 0, "creation_date": 1546495426, "post_id": 54015219, "comment_id": 94870749, "body": "ok, for the first part, the size, does that give me the size of the bytes object? Or is it the size of the element in the local directory?"}, {"owner": {"reputation": 828, "user_id": 1489503, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/eUgxa.png?s=128&g=1", "display_name": "Rednaxel", "link": "https://stackoverflow.com/users/1489503/rednaxel"}, "edited": false, "score": 0, "creation_date": 1546495466, "post_id": 54015219, "comment_id": 94870764, "body": "The second part, Thank you SO much. I was just testing a lot of things and that always stayed there. You saved my life."}], "tags": [], "owner": {"reputation": 82, "user_id": 7370024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07fdfc1c41cb82dfe20a48fb2c4195ba?s=128&d=identicon&r=PG&f=1", "display_name": "azds", "link": "https://stackoverflow.com/users/7370024/azds"}, "is_accepted": true, "score": 3, "last_activity_date": 1546478567, "creation_date": 1546478567, "answer_id": 54015219, "question_id": 54013497, "link": "https://stackoverflow.com/questions/54013497/flask-filestorage-save-empty-file/54015219#54015219", "title": "Flask FileStorage save empty file", "body": "<p>Firstly, the size of your file is always 32 because sys.getsizeof() returns the amount of memory in bytes Python uses for that object, as explained in the <a href=\"https://docs.python.org/3/library/sys.html#sys.getsizeof\" rel=\"nofollow noreferrer\">docs</a>.</p>\n\n<p>To print the actual file size you can use:</p>\n\n<pre><code>os.path.getsize('path')\n</code></pre>\n\n<p>Using it, you should see that the printed file size is effectively 0.</p>\n\n<p>Secondly, by removing:</p>\n\n<pre><code>image_data = archivio.read()\n</code></pre>\n\n<p>you should be able to successfully save the file in the desired location.</p>\n\n<p>I'm not sure what you are trying to accomplish with archivio.read().</p>\n"}], "owner": {"reputation": 828, "user_id": 1489503, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/eUgxa.png?s=128&g=1", "display_name": "Rednaxel", "link": "https://stackoverflow.com/users/1489503/rednaxel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1194, "favorite_count": 0, "accepted_answer_id": 54015219, "answer_count": 1, "score": 1, "last_activity_date": 1546478567, "creation_date": 1546465134, "last_edit_date": 1546466486, "question_id": 54013497, "link": "https://stackoverflow.com/questions/54013497/flask-filestorage-save-empty-file", "title": "Flask FileStorage save empty file", "body": "<p>I am working with Flask, WTForms and Flask-WTF to save a file but the file is always store as an empty file. It doesn't show any error.</p>\n\n<p><strong>Form:</strong></p>\n\n<pre><code>from flask_wtf import FlaskForm\nfrom flask_wtf.file import FileField\nfrom wtforms import StringField, SubmitField\n\nclass UserForm(FlaskForm):\n    username = StringField('u', validators=[InputRequired()])\n    email = StringField('e', validators=[InputRequired()])\n    password = StringField('c', validators=[InputRequired()])\n    signature = FileField('s')\n    save = SubmitField('a')\n</code></pre>\n\n<p><strong>Flask Route / Function:</strong></p>\n\n<pre><code>@bp.route('/manage/user', methods=['GET', 'POST'])\n@login_required\ndef manage_user():\n    form = UserForm()\n    action = 'create'\n\n    try:        \n        if form.validate_on_submit():\n            if form.save.data:\n                print('request.method', request.method)\n                print('request.args', request.args)\n                print('request.form', request.form)\n                print('request.files', request.files)\n                # archivo = request.files['signature']\n                # archivo = request.files.items()[0]\n                archivo = form.signature.data\n                print(type(archivo))\n                if archivo:\n                    image_data = archivo.read()\n                    basedir = os.path.abspath(os.path.dirname(__file__))\n                    filename = secure_filename(form.username.data+'.png')\n                    full_dir = os.path.join(basedir, '..\\\\static\\\\img', filename)\n                    print(sys.getsizeof(archivo))\n                    archivo.save(full_dir) \n                return redirect(url_for('main.manage'))\n    except Exception as e:\n        print(e)\n\n    return render_template('manage_user.html', title=('Admon'), form=form, action=action)\n</code></pre>\n\n<p><strong>HTML</strong></p>\n\n<pre><code>&lt;form action=\"\" method=\"POST\" role=\"form\" class=\"form-horizontal\" enctype=\"multipart/form-data\"&gt;\n    {{ form.csrf_token() }}\n    &lt;div class=\"form-group\"&gt;\n        &lt;label class=\"control-label col-sm-3\"&gt;Firma&lt;/label&gt;\n        &lt;div class=\"col-sm-6\"&gt;\n            {% if action=='create' %}\n            &lt;!-- Other fields --&gt;\n            {{ form.signature(placeholder=\"Firma\", type=\"file\", class=\"form-control\", accept=\"image/*\", required=\"True\") }}\n            &lt;img id=\"firmaimg\" src=\"{{ url_for('static', filename='img/firma130x50_dummy.png') }}\" alt=\"Firma\" /&gt;\n            {{ form.save(class=\"btn btn-success btn-md\") }}\n            {% endif %}\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>The print statements show this: \n<a href=\"https://i.stack.imgur.com/V4Vkc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/V4Vkc.png\" alt=\"Print results\"></a></p>\n\n<p>The order of the prints is:</p>\n\n<ol>\n<li>Request method </li>\n<li>Request Arguments </li>\n<li>Request Form </li>\n<li>Request Files </li>\n<li>Type of archivo variable </li>\n</ol>\n\n<p>Size of archivo is always 32, it doesn't matter what image I upload, is always 32, so from that point is already empty, haven't figure out why is coming empty. I'm following the examples.</p>\n\n<p><a href=\"https://flask-wtf.readthedocs.io/en/latest/form.html\" rel=\"nofollow noreferrer\">https://flask-wtf.readthedocs.io/en/latest/form.html</a></p>\n"}, {"tags": ["python", "python-3.x", "logging", "python-logging"], "answers": [{"tags": [], "owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "is_accepted": true, "score": 0, "last_activity_date": 1546465451, "creation_date": 1546465451, "answer_id": 54013548, "question_id": 54013492, "link": "https://stackoverflow.com/questions/54013492/filehandler-in-config-file-logging-rare-behabior/54013548#54013548", "title": "FileHandler in config file logging rare behabior", "body": "<p>You're creating a <code>fileHandler</code> when loading your logger instance, even though you are only <em>using</em> the <code>consoleHandler</code>. If you just run the following in the shell:</p>\n\n<pre><code>import logging\nfh = logging.FileHandler(\"mylogger.txt\")\nquit()\n</code></pre>\n\n<p>You'll see that \"mylogger.txt\" is created. This is because behind the scenes, the handler creates the file upon <code>__init__</code>, not at the time of use. It's better design that way, as you might <em>use</em> that handler multiple times, possibly at the same time, and you don't want to check for the existence of a file every time, as that would be slow and you could introduce a race condition upon trying to create the file</p>\n"}], "owner": {"reputation": 3542, "user_id": 1093674, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d67b951d3ef8e9d79b4c62e3a3c52b4e?s=128&d=identicon&r=PG", "display_name": "Cristhian Boujon", "link": "https://stackoverflow.com/users/1093674/cristhian-boujon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 54013548, "answer_count": 1, "score": 1, "last_activity_date": 1546465451, "creation_date": 1546465107, "question_id": 54013492, "link": "https://stackoverflow.com/questions/54013492/filehandler-in-config-file-logging-rare-behabior", "title": "FileHandler in config file logging rare behabior", "body": "<p>I have a logging config file:</p>\n\n<p><strong>logger_config.yml</strong></p>\n\n<pre><code>version: 1\nformatters:\n  simple:\n    format: '%(asctime)s - %(levelname)s - %(message)s'\nhandlers:\n  console:\n    class: logging.StreamHandler\n    level: DEBUG\n    formatter: simple\n    stream: ext://sys.stdout\n  file:\n    class: logging.FileHandler\n    level: DEBUG\n    formatter: simple\n    filename: train.log\nloggers:\n  trainLogger:\n    level: DEBUG\n    handlers: [console]\n    propagate: 1\nroot:\n  level: DEBUG\n  handlers: [console]\n  propagate: 1\n</code></pre>\n\n<p>And a simple script:</p>\n\n<p><strong>test.py</strong></p>\n\n<pre><code>import logging\nimport logging.config\nimport yaml\n\n\nwith open('logging_config.yml', 'rt') as f:\n    config = yaml.safe_load(f.read())\n\nlogging.config.dictConfig(config)\n\n# create logger\nlogger = logging.getLogger(__name__)\n\n# 'application' code\nlogger.debug('debug message')\nlogger.info('info message')\nlogger.warn('warn message')\nlogger.error('error message')\nlogger.critical('critical message')\n</code></pre>\n\n<p>When I run <code>test.py</code> it's suppose that the script will just log in console since the <code>handler</code> for <code>root</code> is <code>console</code> but an empty train.log is also created. Why this append?</p>\n"}, {"tags": ["python", "list", "find"], "answers": [{"tags": [], "owner": {"reputation": 105, "user_id": 10408267, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HdINCuoeqpI/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXaJm6LLouqSnl6wtZg1NtHM3BjkA/mo/photo.jpg?sz=128", "display_name": "Irka Irenka", "link": "https://stackoverflow.com/users/10408267/irka-irenka"}, "is_accepted": false, "score": 0, "last_activity_date": 1546466805, "creation_date": 1546466805, "answer_id": 54013801, "question_id": 54013487, "link": "https://stackoverflow.com/questions/54013487/find-all-matches-of-list1-file-in-list2-file-create-files-and-write-relevant-ou/54013801#54013801", "title": "find all matches of list1 file in list2 file, create files and write relevant output to them. Python", "body": "<p>When I read it I see, that I should've put \"a\" for append instead of \"w\" write in this line:</p>\n\n<pre><code>with open(l1.replace('http://', \"\").replace('\\\\n', '').rstrip(), 'w') as plik:\n</code></pre>\n\n<p>hope that helps someone!</p>\n"}], "owner": {"reputation": 105, "user_id": 10408267, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HdINCuoeqpI/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXaJm6LLouqSnl6wtZg1NtHM3BjkA/mo/photo.jpg?sz=128", "display_name": "Irka Irenka", "link": "https://stackoverflow.com/users/10408267/irka-irenka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1546466805, "creation_date": 1546465095, "question_id": 54013487, "link": "https://stackoverflow.com/questions/54013487/find-all-matches-of-list1-file-in-list2-file-create-files-and-write-relevant-ou", "title": "find all matches of list1 file in list2 file, create files and write relevant output to them. Python", "body": "<p>I have two lists:</p>\n\n<p>list1: </p>\n\n<pre><code>http://some.com\nhttp://thing.com\nhttp://whatever.org\n</code></pre>\n\n<p>list2:</p>\n\n<pre><code>http://www.totalywhatever.com/2018010110231/http://some.com\nhttp://www.totalywhatever.com/2018012346789/http://some.com\nhttp://www.totalywhatever.com/2018002378231/http://thing.com\nhttp://www.totalywhatever.com/2018012346789/http://thing.com\nhttp://www.totalywhatever.com/2018012110231/http://whatever.org\nhttp://www.totalywhatever.com/2018012346789/http://whatever.org\n</code></pre>\n\n<p>I want to create seperate file for each line from list1, with removing some signs. For example:</p>\n\n<p><a href=\"http://some.com\" rel=\"nofollow noreferrer\">http://some.com</a> , should create file called ---> some.com\n<a href=\"http://thing.com\" rel=\"nofollow noreferrer\">http://thing.com</a> --> thing.com\nand so on...</p>\n\n<p>To those files, links from \"list2\" containing relevant phrase,( so for  \"some.com\" it'd be first two lines from \"list2\"), should be copied to.</p>\n\n<p>equivalent of linux:</p>\n\n<pre><code>grep some.com list2 &gt; some.com  # Maan.. how complex operations on files can be ?? \n</code></pre>\n\n<p>Of course it should go in the loop for all items...</p>\n\n<p>I have came up with this one. It >>almost&lt;&lt; works, It creates correct files, but only put one link to each file instead of all matches. Any help'd be appreciated...</p>\n\n<pre><code>with open('list1', 'r+') as out, open('list2') as list:\no = out.readlines()\nl = list.readlines()\nout.seek(0)\nfor o1 in o:\n         for l1 in l:\n                 if o1.find(l1) &gt; 0:\n                         with open(l1.replace('http://', \"\").replace('\\\\n', '').rstrip(), 'w') as plik:\n                                plik.write(o1 + '\\n')\n                                plik.seek(0)\n                                plik.close()\n</code></pre>\n"}, {"tags": ["python", "amazon-web-services", "aws-lambda", "serverless", "zappa"], "comments": [{"owner": {"reputation": 806, "user_id": 506108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/170115ef10698313c9bfe2d3a8665665?s=128&d=identicon&r=PG", "display_name": "Edgar", "link": "https://stackoverflow.com/users/506108/edgar"}, "edited": false, "score": 0, "creation_date": 1546566033, "post_id": 54013486, "comment_id": 94900346, "body": "Does your virtual environment have Klein installed?"}, {"owner": {"reputation": 113000, "user_id": 1838509, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ec7211f4ff2bb160a80b2d661d0c2c1?s=128&d=identicon&r=PG&f=1", "display_name": "agstudy", "link": "https://stackoverflow.com/users/1838509/agstudy"}, "edited": false, "score": 0, "creation_date": 1547607549, "post_id": 54013486, "comment_id": 95245804, "body": "take a look in the logs using <code>zappa tail</code> as mentioned in your message."}], "answers": [{"tags": [], "owner": {"reputation": 3271, "user_id": 8900683, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e21b1c869eba517481a0476a59bb7ca?s=128&d=identicon&r=PG&f=1", "display_name": "Rene B.", "link": "https://stackoverflow.com/users/8900683/rene-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1560782837, "creation_date": 1560782837, "answer_id": 56633722, "question_id": 54013486, "link": "https://stackoverflow.com/questions/54013486/typeerror-klein-object-is-not-callable-while-calling-an-endpoint-from-aws-l/56633722#56633722", "title": "&quot;TypeError: &#39;Klein&#39; object is not callable&quot; while calling an endpoint from AWS Lambda", "body": "<p>It cannot call the object <strong>Klein()</strong>. You need to add it to the virtualenv in order to import it as only the virtualenv is build and deployed with zappa. </p>\n\n<p>For example, you could create a setup.py script which allows to install your custom code with pip to your virtual environment as described here: <a href=\"https://docs.python.org/3/distutils/setupscript.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3/distutils/setupscript.html</a> </p>\n"}], "owner": {"reputation": 98, "user_id": 6114068, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-SEOReUmYLdU/AAAAAAAAAAI/AAAAAAAAAPE/yqIOs16tUxU/photo.jpg?sz=128", "display_name": "MtziSam", "link": "https://stackoverflow.com/users/6114068/mtzisam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 162, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560782837, "creation_date": 1546465094, "question_id": 54013486, "link": "https://stackoverflow.com/questions/54013486/typeerror-klein-object-is-not-callable-while-calling-an-endpoint-from-aws-l", "title": "&quot;TypeError: &#39;Klein&#39; object is not callable&quot; while calling an endpoint from AWS Lambda", "body": "<p>I'm trying to run a simple server </p>\n\n<pre><code>from klein import Klein\n\napp = Klein()\n\n@app.route(\"/\")\ndef hello(request):\n    return \"Hello World!\"\n\nif __name__ == \"__main__\":\n    run(\"localhost\", 8080)\n</code></pre>\n\n<p>I packaged and uploaded it to AWS Lambda using Zappa, hover i'm getting this after calling the endpoint, any idea why? </p>\n\n<pre><code>\"{'message': 'An uncaught exception happened while servicing this request. You can investigate this with the `zappa tail` command.', 'traceback': ['Traceback (most recent call last):\\\\n', '  File \\\"/var/task/handler.py\\\", line 452, in handler\\\\n    response = Response.from_app(self.wsgi_app, environ)\\\\n', '  File \\\"/var/task/werkzeug/wrappers.py\\\", line 939, in from_app\\\\n    return cls(*_run_wsgi_app(app, environ, buffered))\\\\n', '  File \\\"/var/task/werkzeug/test.py\\\", line 923, in run_wsgi_app\\\\n    app_rv = app(environ, start_response)\\\\n', '  File \\\"/var/task/zappa/middleware.py\\\", line 70, in __call__\\\\n    response = self.application(environ, encode_response)\\\\n', \\\"TypeError: 'Klein' object is not callable\\\\n\\\"]}\"\n</code></pre>\n"}, {"tags": ["python", "pandas", "numpy", "text"], "answers": [{"tags": [], "owner": {"reputation": 7729, "user_id": 4718350, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-CxgNhC_5nUE/AAAAAAAAAAI/AAAAAAAAP78/9FTapxcd2dY/photo.jpg?sz=128", "display_name": "Chris", "link": "https://stackoverflow.com/users/4718350/chris"}, "is_accepted": false, "score": 1, "last_activity_date": 1546466238, "creation_date": 1546466238, "answer_id": 54013699, "question_id": 54013475, "link": "https://stackoverflow.com/questions/54013475/how-to-import-a-txt-file-with-a-desired-structure/54013699#54013699", "title": "How to import a .txt file with a desired structure", "body": "<p>Your text file is only 4 rows long with thousands of columns.  I think if we read the entire file in and get rid of the newlines we can create a single list of values.</p>\n\n<p>Then we can make that a numpy array and rehsape it.</p>\n\n<pre><code>import numpy as np\nwith open('landmark.txt', 'r') as myfile:\n    data=myfile.read().replace('\\n', '').split()\n\nmy_data = np.array(data).reshape((int(len(data)/18), 18))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 0, "last_activity_date": 1546468219, "creation_date": 1546468219, "answer_id": 54014017, "question_id": 54013475, "link": "https://stackoverflow.com/questions/54013475/how-to-import-a-txt-file-with-a-desired-structure/54014017#54014017", "title": "How to import a .txt file with a desired structure", "body": "<p>With <code>genfromtxt</code> (or <code>loadtxt</code>) I get:</p>\n\n<pre><code>In [64]: data = np.genfromtxt('../Downloads/landmark.txt')\nIn [65]: data.shape\nOut[65]: (3, 60204)\nIn [66]: data.dtype\nOut[66]: dtype('float64')\nIn [67]: data[0,:10]\nOut[67]: \narray([ 1.       , 20.46202  , 29.598587 , 28.684617 , 12.745371 ,\n       23.967345 , 24.593504 , 12.683864 ,  3.1394543,  2.       ])\nIn [68]: data[1,:10]\nOut[68]: \narray([1.       , 0.8857546, 1.0210176, 1.2740904, 1.3526302, 1.4878932,\n       1.8107791, 1.9067722, 2.8143434, 2.       ])\n</code></pre>\n\n<p>This matches what I see when I look at the file in my text editor - 3 lines with many columns.</p>\n\n<p><code>data.reshape(-1,18)</code> produces an array with <code>(10034, 18)</code>.  We could drop the initial <code>1.000</code>, but that would mess up the reshape (no long a multiple of 18).</p>\n"}], "owner": {"reputation": 687, "user_id": 6131111, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207902467831997/picture?type=large", "display_name": "Hector Esteban", "link": "https://stackoverflow.com/users/6131111/hector-esteban"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 54014017, "answer_count": 2, "score": 0, "last_activity_date": 1546496857, "creation_date": 1546465017, "last_edit_date": 1546496857, "question_id": 54013475, "link": "https://stackoverflow.com/questions/54013475/how-to-import-a-txt-file-with-a-desired-structure", "title": "How to import a .txt file with a desired structure", "body": "<p>I need to import a txt file which was supossed to be X rows with 18 columns each but actually is like this (even though cannot be seen every 13 columns starts a new line of just 5 elements):</p>\n\n<p>2.0462020e+001  2.9598587e+001  2.8684617e+001  1.2745371e+001  2.3967345e+001  2.4593504e+001  1.2683864e+001  3.1394543e+000  0.0000000e+000  0.0000000e+000  0.0000000e+000  0.0000000e+000  0.0000000e+000  0.0000000e+000  0.0000000e+000  0.0000000e+000  0.0000000e+000  0.0000000e+000</p>\n\n<p>8.8575460e-001  1.0210176e+000  1.2740904e+000  1.3526302e+000  1.4878932e+000  1.8107791e+000  1.9067722e+000  2.8143434e+000  0.0000000e+000  0.0000000e+000  0.0000000e+000  0.0000000e+000  0.0000000e+000  0.0000000e+000  0.0000000e+000  0.0000000e+000  0.0000000e+000  0.0000000e+000</p>\n\n<p>The call <code>feat = np.loadtxt(x)</code>\nreturns a strange dimension (3, 602014) and if I analyze row 0 for example it starts like:\n1.0 20.46 29.58 28.68 12.74 23.96 24.59 12.683.12 2.0 20.46 29.58 ...\nIt is like for the first row in the result I get all the non 0 values for the columns of the real dataset 0,3,6,9,12 ...\nIn the 2n row I would have the same but for original lines 1,4,7,... and again the structure is the same, starts with 1.0 + values!=0 of 1st line + 2.0 + values!= 4th line.</p>\n\n<p>As I said, I would like to get an array of dimension (X, 18) without the 1.0 and 2.0 that are appearing and where X is just the numbers of rows the original file was suppose to had (every 18 columns a new row)</p>\n\n<p>The file can be downloaded in <a href=\"https://github.com/OpenSLAM-org/openslam_ufastslam/blob/master/code/victoria_park/landmark.txt\" rel=\"nofollow noreferrer\">https://github.com/OpenSLAM-org/openslam_ufastslam/blob/master/code/victoria_park/landmark.txt</a></p>\n"}, {"tags": ["python", "python-3.x", "gtk", "gtk3", "pygobject"], "answers": [{"comments": [{"owner": {"reputation": 3049, "user_id": 6150775, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f16a0c1701c5debb928d96fa22ba0582?s=128&d=identicon&r=PG&f=1", "display_name": "theGtknerd", "link": "https://stackoverflow.com/users/6150775/thegtknerd"}, "edited": false, "score": 0, "creation_date": 1563790370, "post_id": 54484081, "comment_id": 100802483, "body": "If this answer worked for you, please mark it as such for other people coming here."}], "tags": [], "owner": {"reputation": 3049, "user_id": 6150775, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f16a0c1701c5debb928d96fa22ba0582?s=128&d=identicon&r=PG&f=1", "display_name": "theGtknerd", "link": "https://stackoverflow.com/users/6150775/thegtknerd"}, "is_accepted": false, "score": 0, "last_activity_date": 1549040915, "creation_date": 1549040915, "answer_id": 54484081, "question_id": 54013469, "link": "https://stackoverflow.com/questions/54013469/pygobject-fix-button-size-no-matter-what-break-label-accordingly/54484081#54484081", "title": "PyGObject fix button size no matter what. Break label accordingly", "body": "<p>You could <a href=\"https://developer.gnome.org/gtk3/stable/GtkLabel.html#gtk-label-set-ellipsize\" rel=\"nofollow noreferrer\">ellipsize</a> it in the middle. Example:</p>\n\n<pre><code>label = Gtk.Label(\"This text is absolutely terribly too long to \"\n                        \"fit in any decent size space on a normal window \"\n                        \"anybody in his right mind would be using, so \"\n                        \"please ellipsize it using a Gtk function that \"\n                        \"calculates a decent size based on the rest of \"\n                        \"the window by using some dots in the middle of \"\n                        \"the text. Thank You!\")\nlabel.set_ellipsize (Pango.EllipsizeMode.MIDDLE)\nfolder_button = Gtk.Button(label=label)\n</code></pre>\n"}], "owner": {"reputation": 1158, "user_id": 3154111, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cc375d11cdbd3d2f7babaf22f4101be0?s=128&d=identicon&r=PG", "display_name": "Rando Hinn", "link": "https://stackoverflow.com/users/3154111/rando-hinn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549040915, "creation_date": 1546464963, "last_edit_date": 1546555987, "question_id": 54013469, "link": "https://stackoverflow.com/questions/54013469/pygobject-fix-button-size-no-matter-what-break-label-accordingly", "title": "PyGObject fix button size no matter what. Break label accordingly", "body": "<p>I'm doing an even button grid with PyGObject. Current,y I'm doing this for button sizing and addition.</p>\n\n<pre><code>folder_button = Gtk.Button(label=folder[\"label\"])\nfolder_button.set_size_request(64,64)\nfolder_button.set_hexpand(False)\nself.attach(folder_button,folder[\"column\"],folder[\"row\"],1,1)\n</code></pre>\n\n<p>Which is all fine, if the button label is small enough to fit inside the button. However, if I then have longer labels, the buttons expand to fit the label. I would like to stop this expanding, and break/scale/truncate the label accordingly. What would be the best way to do this?</p>\n"}, {"tags": ["python", "finance", "yahoo", "trading", "stocks"], "comments": [{"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1546465566, "post_id": 54013467, "comment_id": 94864159, "body": "Unfortunately that&#39;s a very broad question, probably too broad for this site. Your best bet is to google what you&#39;re trying to do, check some tutorials, then try some things and ask specific questions if you get stuck."}], "answers": [{"tags": [], "owner": {"reputation": 485, "user_id": 9500059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96b487dfdd86416890e3dee745990cd2?s=128&d=identicon&r=PG&f=1", "display_name": "db702", "link": "https://stackoverflow.com/users/9500059/db702"}, "is_accepted": false, "score": 0, "last_activity_date": 1546466900, "creation_date": 1546466900, "answer_id": 54013817, "question_id": 54013467, "link": "https://stackoverflow.com/questions/54013467/using-python-and-yahoo-finance-so-something-else-how-can-i-get-data-for-the-pr/54013817#54013817", "title": "Using python and yahoo finance (so something else) how can I get data for the price of an an asset throughout a trading day for X number of days", "body": "<p>This is very broad, but you can do something like this (if I am understanding correctly):</p>\n\n<pre><code>import pandas as pd\nimport pandas_datareader.data as data\nimport datetime as dt \n\nstart = dt.datetime(2018,1,1)\nend = dt.datetime(2019,1,1)\n\ndf = data.DataReader('MSFT', 'yahoo', start, end)\n</code></pre>\n"}], "owner": {"reputation": 1417, "user_id": 5432156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72991dcaeb7a19e585f4f07cb503783d?s=128&d=identicon&r=PG&f=1", "display_name": "ganidat", "link": "https://stackoverflow.com/users/5432156/ganidat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1546466900, "creation_date": 1546464942, "question_id": 54013467, "link": "https://stackoverflow.com/questions/54013467/using-python-and-yahoo-finance-so-something-else-how-can-i-get-data-for-the-pr", "title": "Using python and yahoo finance (so something else) how can I get data for the price of an an asset throughout a trading day for X number of days", "body": "<p>I don't really have sample code other than the library that I should be using is probably pandas? I am pretty new to both python and yahoo.</p>\n"}, {"tags": ["python", "package"], "comments": [{"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1546465097, "post_id": 54013443, "comment_id": 94863987, "body": "In this case, It&#39;s right in the URL: scikit-learn.org/stable/ <i>modules</i> /linear_model.html linear_model is a module in the sklearn package or library. And in the first section on that page, &quot;Across the <i>module</i>, we...&quot;"}, {"owner": {"reputation": 3670, "user_id": 7857466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7OW0s.png?s=128&g=1", "display_name": "progmatico", "link": "https://stackoverflow.com/users/7857466/progmatico"}, "edited": false, "score": 0, "creation_date": 1546465431, "post_id": 54013443, "comment_id": 94864110, "body": "And generically, in a from import the name (<code>sklearn</code>) can be a simple python module too. The name you import with <code>from</code>does not require a qualifier prefix to use, and it is not linked to the module it came from. You get your own copy. As opposed to this with the <code>import</code> form names are linked but require qualification to use (<code>somemodule.somename</code>)."}], "answers": [{"tags": [], "owner": {"reputation": 64597, "user_id": 1453822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c8db97d2ecdfe5e044cee4c470abb60?s=128&d=identicon&r=PG", "display_name": "DeepSpace", "link": "https://stackoverflow.com/users/1453822/deepspace"}, "is_accepted": false, "score": 2, "last_activity_date": 1546465660, "last_edit_date": 1546465660, "creation_date": 1546465267, "answer_id": 54013513, "question_id": 54013443, "link": "https://stackoverflow.com/questions/54013443/understanding-naming-of-imports-and-packages/54013513#54013513", "title": "Understanding naming of imports and packages", "body": "<p>It can really be anything, a module-level variable (ie string, integer), a class, a function or a sub-module . Some examples:</p>\n\n<pre><code>from pandas import match\nfrom pandas import json\nfrom pandas import DataFrame\nfrom pandas import __version__\n\nprint(match)\nprint(json)\nprint(DataFrame)\n</code></pre>\n\n<p>outputs</p>\n\n<pre><code>&lt;function match at 0x0000016BE3082950&gt;  # function\n&lt;module 'pandas.json' from '\\lib\\site-packages\\pandas\\json.py'&gt;  # module\n&lt;class 'pandas.core.frame.DataFrame'&gt;  # class\n0.23.4  # string\n</code></pre>\n\n<p>In that particualr case, <code>sklearn.linear_model</code> is a module, according to its <a href=\"https://scikit-learn.org/stable/modules/classes.html#module-sklearn.linear_model\" rel=\"nofollow noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p>The sklearn.linear_model module ...</p>\n</blockquote>\n"}], "owner": {"reputation": 155, "user_id": 6604291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae747fdff8e3f5c03f2735868f058c98?s=128&d=identicon&r=PG&f=1", "display_name": "AlleyCat", "link": "https://stackoverflow.com/users/6604291/alleycat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546465660, "creation_date": 1546464845, "last_edit_date": 1546465519, "question_id": 54013443, "link": "https://stackoverflow.com/questions/54013443/understanding-naming-of-imports-and-packages", "title": "Understanding naming of imports and packages", "body": "<p><code>from sklearn import linear_model</code></p>\n\n<p>For the code above, I understand that \"sklearn\" is a package so what exactly is \"liner_model\"?</p>\n"}, {"tags": ["python", "list", "conditional-statements", "counting", "directions"], "comments": [{"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 0, "creation_date": 1546466553, "post_id": 54013442, "comment_id": 94864558, "body": "I don&#39;t quite follow your expected output. Shouldn&#39;t row one, for example, have 3 <code>.</code>s which have a <code>&amp;</code> in one of the 8 directions?"}], "answers": [{"comments": [{"owner": {"reputation": 638, "user_id": 9885747, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eFY9D.jpg?s=128&g=1", "display_name": "Horbaje", "link": "https://stackoverflow.com/users/9885747/horbaje"}, "edited": false, "score": 0, "creation_date": 1546940722, "post_id": 54013620, "comment_id": 95010408, "body": "Hey thank you! I notice you use the backslash as an escape sequence. If you dont mind, how does that work exactly?"}, {"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "reply_to_user": {"reputation": 638, "user_id": 9885747, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eFY9D.jpg?s=128&g=1", "display_name": "Horbaje", "link": "https://stackoverflow.com/users/9885747/horbaje"}, "edited": false, "score": 1, "creation_date": 1546963485, "post_id": 54013620, "comment_id": 95023459, "body": "That&#39;s Python&#39;s syntax for making an expression multi-line. I just didn&#39;t want to have too much horizontal width to my code, so it&#39;s purely cosmetic. Glad this helped."}], "tags": [], "owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "is_accepted": true, "score": 2, "last_activity_date": 1546468217, "last_edit_date": 1546468217, "creation_date": 1546465781, "answer_id": 54013620, "question_id": 54013442, "link": "https://stackoverflow.com/questions/54013442/count-string-elements-on-a-map-based-on-where-strings-are-and-fill-grid-with-the/54013620#54013620", "title": "Count string elements on a map based on where strings are and fill grid with the counts", "body": "<p>I don't think the nested conditionals are appropriate here; each outer conditional must be true for the inner ones to be evaluated. They should be independent of each other and sequential.</p>\n\n<p>It's also a lot of work and error-prone to enumerate every conditional by hand. For each cell, there are up to 8 directions in which a neighbor might live, and we do the exact same check on each direction. A loop is the appropriate construct for doing this; each loop iteration checks one neighboring cell, determining whether it's in bounds and of the appropriate character.</p>\n\n<p>Furthermore, since your grid has few <code>&amp;</code>, it makes sense to only perform neighbor checks for <code>&amp;</code> characters. For each one, increment counts for neighboring <code>.</code>s. Do the opposite if the grid is predominantly <code>&amp;</code> characters.</p>\n\n<pre><code>my_map = [\n    '................', \n    '....&amp;...........',\n    '..........E.....',\n    '&amp;&amp;..&amp;...........', \n    '....&amp;&amp;&amp;.........', \n    '......&amp;&amp;&amp;&amp;..&amp;&amp;..',\n    '................', \n    '.......&amp;........', \n    '.....&amp;.&amp;........',\n    '....S...........', \n    '.......&amp;.&amp;&amp;.....'\n]\n\ngrid = [[0] * len(x) for x in my_map]\ndirections = [\n    [-1, 0], [1, 0], [0, 1], [0, -1], \n    [-1, -1], [1, 1], [1, -1], [-1, 1]\n]\n\nfor row in range(len(my_map)):\n    for col in range(len(my_map[row])):\n        if my_map[row][col] == \"&amp;\":\n            for x, y in directions:\n                y += row\n                x += col\n\n                if y &lt; len(my_map) and y &gt;= 0 and \\\n                   x &lt; len(my_map[y]) and x &gt;= 0 and \\\n                   my_map[y][x] != \"&amp;\":\n                    grid[y][x] += 1\n\nfor row in grid:\n    print(row)\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n[0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n[2, 2, 1, 2, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n[0, 0, 1, 2, 0, 4, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0]\n[2, 2, 1, 2, 0, 0, 0, 4, 3, 2, 1, 1, 2, 2, 1, 0]\n[0, 0, 0, 1, 2, 4, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0]\n[0, 0, 0, 0, 0, 1, 3, 4, 4, 2, 1, 1, 2, 2, 1, 0]\n[0, 0, 0, 0, 1, 1, 3, 0, 2, 0, 0, 0, 0, 0, 0, 0]\n[0, 0, 0, 0, 1, 0, 3, 0, 2, 0, 0, 0, 0, 0, 0, 0]\n[0, 0, 0, 0, 1, 1, 3, 2, 3, 2, 2, 1, 0, 0, 0, 0]\n[0, 0, 0, 0, 0, 0, 1, 0, 2, 0, 0, 1, 0, 0, 0, 0]\n</code></pre>\n\n<p>And a version that overlays counts with the original map Minesweeper-style:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>0 0 0 1 1 1 0 0 0 0 0 0 0 0 0 0\n0 0 0 1 &amp; 1 0 0 0 0 0 0 0 0 0 0\n2 2 1 2 2 2 0 0 0 0 0 0 0 0 0 0\n&amp; &amp; 1 2 &amp; 4 2 1 0 0 0 0 0 0 0 0\n2 2 1 2 &amp; &amp; &amp; 4 3 2 1 1 2 2 1 0\n0 0 0 1 2 4 &amp; &amp; &amp; &amp; 1 1 &amp; &amp; 1 0\n0 0 0 0 0 1 3 4 4 2 1 1 2 2 1 0\n0 0 0 0 1 1 3 &amp; 2 0 0 0 0 0 0 0\n0 0 0 0 1 &amp; 3 &amp; 2 0 0 0 0 0 0 0\n0 0 0 0 1 1 3 2 3 2 2 1 0 0 0 0\n0 0 0 0 0 0 1 &amp; 2 &amp; &amp; 1 0 0 0 0\n</code></pre>\n\n<p><a href=\"https://repl.it/repls/DapperOffbeatLinux\" rel=\"nofollow noreferrer\">Try it!</a></p>\n"}], "owner": {"reputation": 638, "user_id": 9885747, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eFY9D.jpg?s=128&g=1", "display_name": "Horbaje", "link": "https://stackoverflow.com/users/9885747/horbaje"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 54013620, "answer_count": 1, "score": 1, "last_activity_date": 1582459917, "creation_date": 1546464844, "last_edit_date": 1582459917, "question_id": 54013442, "link": "https://stackoverflow.com/questions/54013442/count-string-elements-on-a-map-based-on-where-strings-are-and-fill-grid-with-the", "title": "Count string elements on a map based on where strings are and fill grid with the counts", "body": "<p>I have a list called my_map that contains two different kinds of string values '.' and '&amp;'. Now, for each value [x][y] that is a '.' I want to count the number of times an '&amp;' was found in any of the eight directions next to the '.' </p>\n\n<p>I created a grid to store the counts but I am just not able to formulate my conditions correctly. I can not use numpy arrays.</p>\n\n<p>Note: 'S' and 'E' are treated like '.'</p>\n\n<pre><code> my_map = ['................' '....&amp;...........' '..........E.....'\n '&amp;&amp;..&amp;...........' '....&amp;&amp;&amp;.........' '......&amp;&amp;&amp;&amp;..&amp;&amp;..'\n '................' '.......&amp;........' '.....&amp;.&amp;........'\n '....S...........' '.......&amp;.&amp;&amp;.....']\n\ndef create_grid(my_map):\n    grid = [[0]*(len(my_map[0])) for x in range(len(my_map))]\n    return grid\n\ngrid = create_grid(my_map)\n\nfor x, y in [(x,y) for x in range(len(my_map)) for y in range(len(my_map[0]))]:\n    #any '&amp;' north ?\n    if my_map[x][y+1]== '&amp;' and my_map[x][y]=='.': \n        grid[x][y]+= 1\n        #any '&amp;' west ?\n        if my_map[x-1][y]== '&amp;' and my_map[x][y]=='.': \n            grid[x][y]+=1\n            #any '&amp;' south ?\n            if my_map[x][y-1]== '&amp;'and my_map[x][y]=='.': \n                grid[x][y]+=1\n                #any '&amp;' east ?\n                if my_map[x+1][y]== '&amp;'and my_map[x][y]=='.': \n                    grid[x][y]+=1\n                    #any '&amp;' north-east ?\n                    if my_map[x+1][y+1] == '&amp;'and my_map[x][y]=='.': \n                        grid[x][y]+=1\n                        #any '&amp;' south-west ?\n                        if my_map[x-1][y-1] == '&amp;'and my_map[x][y]=='.': \n                            grid[x][y]+=1\n                            #any '&amp;' south-east ?\n                            if my_map[x+1][y-1]== '&amp;'and my_map[x][y]=='.': \n                                grid[x][y]+=1\n                                #any '&amp;' north-west?\n                                if my_map[x-1][y+1]== '&amp;'and my_map[x][y]=='.': \n                                    grid[x][y]+=1\n\n #desired output for first 3 rows\ngrid = [[0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0],[2,2,1,1,2,1,0,0,0,0,0,0,0,0,0,0]]\n</code></pre>\n\n<p>At the moment, I get an 'IndexError: string index out of range'. I dont know how to limit the range so it will still be correct.The only thing I managed so far was a grid displaying 1s for all '.' and 0s for all '&amp;'.</p>\n"}, {"tags": ["python", "activemq", "stomp"], "comments": [{"owner": {"reputation": 16275, "user_id": 8381946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YoUh4.jpg?s=128&g=1", "display_name": "Justin Bertram", "link": "https://stackoverflow.com/users/8381946/justin-bertram"}, "edited": false, "score": 0, "creation_date": 1546474978, "post_id": 54013441, "comment_id": 94866850, "body": "Please provide the broker configuration."}, {"owner": {"reputation": 1270, "user_id": 2280891, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/IS7Jn.jpg?s=128&g=1", "display_name": "Sergio Guillen Mantilla", "link": "https://stackoverflow.com/users/2280891/sergio-guillen-mantilla"}, "reply_to_user": {"reputation": 16275, "user_id": 8381946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YoUh4.jpg?s=128&g=1", "display_name": "Justin Bertram", "link": "https://stackoverflow.com/users/8381946/justin-bertram"}, "edited": false, "score": 0, "creation_date": 1546481497, "post_id": 54013441, "comment_id": 94868041, "body": "@JustinBertram thanks, I added the <code>activemq.xml</code> settings file"}, {"owner": {"reputation": 21277, "user_id": 412763, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/6CFGe.jpg?s=128&g=1", "display_name": "Petter Nordlander", "link": "https://stackoverflow.com/users/412763/petter-nordlander"}, "edited": false, "score": 1, "creation_date": 1546502788, "post_id": 54013441, "comment_id": 94873072, "body": "You need to configure authorization as well in the broker config. See example: <a href=\"http://svn.apache.org/repos/asf/activemq/trunk/activemq-unit-tests/src/test/resources/org/apache/activemq/security/jaas-broker.xml\" rel=\"nofollow noreferrer\">svn.apache.org/repos/asf/activemq/trunk/activemq-unit-tests/&zwnj;&#8203;src/&hellip;</a>"}, {"owner": {"reputation": 1270, "user_id": 2280891, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/IS7Jn.jpg?s=128&g=1", "display_name": "Sergio Guillen Mantilla", "link": "https://stackoverflow.com/users/2280891/sergio-guillen-mantilla"}, "reply_to_user": {"reputation": 21277, "user_id": 412763, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/6CFGe.jpg?s=128&g=1", "display_name": "Petter Nordlander", "link": "https://stackoverflow.com/users/412763/petter-nordlander"}, "edited": false, "score": 0, "creation_date": 1546524753, "post_id": 54013441, "comment_id": 94884103, "body": "Thank you @PetterNordlander, I started using the JAAS plugin. Although all authentication validations are failing it is a good starting point to continue investigating."}], "owner": {"reputation": 1270, "user_id": 2280891, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/IS7Jn.jpg?s=128&g=1", "display_name": "Sergio Guillen Mantilla", "link": "https://stackoverflow.com/users/2280891/sergio-guillen-mantilla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 186, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1546481360, "creation_date": 1546464824, "last_edit_date": 1546481360, "question_id": 54013441, "link": "https://stackoverflow.com/questions/54013441/activemq-stomp-transport-allows-publishing-messages-even-if-credentials-are-wron", "title": "ActiveMQ stomp transport allows publishing messages even if credentials are wrong", "body": "<p>I've been trying ActiveMQ <code>5.15.8</code> using the Stomp transport from Python. I have a producer and a consumer. So far the consumer is receiving the messages as expected, the problem is that even if I send wrong credentials with the <code>CONNECT</code> command it will always accept the connection without sending an <code>ERROR</code> frame (based on ActiveMQ <a href=\"http://activemq.apache.org/stomp.html\" rel=\"nofollow noreferrer\">docs</a>).</p>\n\n<p>I tried with <a href=\"https://pypi.org/project/stomp.py/\" rel=\"nofollow noreferrer\">stomp.py</a> library but also tried by sending the data directly via a TCP socket connection and got the same behavior.</p>\n\n<p>Is it possible that I am missing some configuration? I am using default settings on ActiveMQ, I can access to the web console via <code>admin/admin</code>.</p>\n\n<p>This the <code>activemq.xml</code> file that I have:</p>\n\n<pre><code>&lt;beans\n  xmlns=\"http://www.springframework.org/schema/beans\"\n  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n  http://activemq.apache.org/schema/core http://activemq.apache.org/schema/core/activemq-core.xsd\"&gt;\n\n    &lt;bean class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\"&gt;\n        &lt;property name=\"locations\"&gt;\n            &lt;value&gt;file:${activemq.conf}/credentials.properties&lt;/value&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n    &lt;bean id=\"logQuery\" class=\"io.fabric8.insight.log.log4j.Log4jLogQuery\"\n          lazy-init=\"false\" scope=\"singleton\"\n          init-method=\"start\" destroy-method=\"stop\"&gt;\n    &lt;/bean&gt;\n    &lt;broker xmlns=\"http://activemq.apache.org/schema/core\" brokerName=\"localhost\" dataDirectory=\"${activemq.data}\" schedulerSupport=\"true\"&gt;\n        &lt;destinationPolicy&gt;\n            &lt;policyMap&gt;\n              &lt;policyEntries&gt;\n                &lt;policyEntry topic=\"&gt;\" &gt;\n                  &lt;pendingMessageLimitStrategy&gt;\n                    &lt;constantPendingMessageLimitStrategy limit=\"1000\"/&gt;\n                  &lt;/pendingMessageLimitStrategy&gt;\n                &lt;/policyEntry&gt;\n              &lt;/policyEntries&gt;\n            &lt;/policyMap&gt;\n        &lt;/destinationPolicy&gt;\n        &lt;managementContext&gt;\n            &lt;managementContext createConnector=\"false\"/&gt;\n        &lt;/managementContext&gt;\n\n        &lt;persistenceAdapter&gt;\n            &lt;kahaDB directory=\"${activemq.data}/kahadb\"/&gt;\n        &lt;/persistenceAdapter&gt;\n        &lt;systemUsage&gt;\n            &lt;systemUsage&gt;\n                &lt;memoryUsage&gt;\n                    &lt;memoryUsage percentOfJvmHeap=\"70\" /&gt;\n                &lt;/memoryUsage&gt;\n                &lt;storeUsage&gt;\n                    &lt;storeUsage limit=\"100 gb\"/&gt;\n                &lt;/storeUsage&gt;\n                &lt;tempUsage&gt;\n                    &lt;tempUsage limit=\"50 gb\"/&gt;\n                &lt;/tempUsage&gt;\n            &lt;/systemUsage&gt;\n        &lt;/systemUsage&gt;\n\n        &lt;transportConnectors&gt;\n            &lt;!-- DOS protection, limit concurrent connections to 1000 and frame size to 100MB --&gt;\n            &lt;transportConnector name=\"openwire\" uri=\"tcp://0.0.0.0:61616?maximumConnections=1000&amp;amp;wireFormat.maxFrameSize=104857600\"/&gt;\n            &lt;transportConnector name=\"amqp\" uri=\"amqp://0.0.0.0:5672?maximumConnections=1000&amp;amp;wireFormat.maxFrameSize=104857600\"/&gt;\n            &lt;transportConnector name=\"stomp\" uri=\"stomp://0.0.0.0:61613?needClientAuth=true&amp;amp;maximumConnections=1000&amp;amp;wireFormat.maxFrameSize=104857600\"/&gt;\n            &lt;transportConnector name=\"mqtt\" uri=\"mqtt://0.0.0.0:1883?maximumConnections=1000&amp;amp;wireFormat.maxFrameSize=104857600\"/&gt;\n            &lt;transportConnector name=\"ws\" uri=\"ws://0.0.0.0:61614?maximumConnections=1000&amp;amp;wireFormat.maxFrameSize=104857600\"/&gt;\n        &lt;/transportConnectors&gt;\n        &lt;shutdownHooks&gt;\n            &lt;bean xmlns=\"http://www.springframework.org/schema/beans\" class=\"org.apache.activemq.hooks.SpringContextHook\" /&gt;\n        &lt;/shutdownHooks&gt;\n    &lt;/broker&gt;\n    &lt;import resource=\"jetty.xml\"/&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p>I really appreciate if you can give some help. Thanks. </p>\n"}, {"tags": ["python", "input"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 3, "creation_date": 1546464795, "post_id": 54013426, "comment_id": 94863879, "body": "While it&#39;s important to know the difference, you can&#39;t call <code>len</code> on either of those things."}, {"owner": {"reputation": 2408, "user_id": 4451406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0d18767747a91ded9aa995def8e4ab1?s=128&d=identicon&r=PG", "display_name": "Irmen de Jong", "link": "https://stackoverflow.com/users/4451406/irmen-de-jong"}, "edited": false, "score": 1, "creation_date": 1546464837, "post_id": 54013426, "comment_id": 94863899, "body": "It doesn&#39;t return sorry, it raises a TypeError on the other line.... have you read the error message at all?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1546464857, "post_id": 54013426, "comment_id": 94863910, "body": "Also, it sounds like you may have reassigned <code>int</code>."}], "answers": [{"tags": [], "owner": {"reputation": 972, "user_id": 1163373, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/g8q0R.jpg?s=128&g=1", "display_name": "Dani G", "link": "https://stackoverflow.com/users/1163373/dani-g"}, "is_accepted": false, "score": 3, "last_activity_date": 1546465436, "last_edit_date": 1546465436, "creation_date": 1546465093, "answer_id": 54013485, "question_id": 54013426, "link": "https://stackoverflow.com/questions/54013426/what-is-the-difference-between-int-and-int-in-python/54013485#54013485", "title": "What is the difference between int and int() in Python", "body": "<p><a href=\"https://docs.python.org/2/library/stdtypes.html#numeric-types-int-float-long-complex\" rel=\"nofollow noreferrer\">int</a> - a numeric <strong>type</strong> </p>\n\n<p><a href=\"https://docs.python.org/2/library/functions.html#int\" rel=\"nofollow noreferrer\">int()</a> - a <strong>method</strong> that return an integer object from any number or string</p>\n\n<p>both are not <strong>sequences/collections</strong> so they do not have length thus you can't use <a href=\"https://docs.python.org/2/library/functions.html#len\" rel=\"nofollow noreferrer\">len()</a> on them.</p>\n\n<p>A better way to check if the variable is an int is:</p>\n\n<pre><code>def function(define):\n    if isinstance(define, int):\n        return 'sorry'\n    else:\n        return len(define)\n\nprint(function(10))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 10311868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44079a23109128a12ef34a813838cda3?s=128&d=identicon&r=PG&f=1", "display_name": "Jimmy Hoho", "link": "https://stackoverflow.com/users/10311868/jimmy-hoho"}, "edited": false, "score": 0, "creation_date": 1546878298, "post_id": 54013520, "comment_id": 94989577, "body": "thank you so much. really simple and helpful explanation"}], "tags": [], "owner": {"reputation": 49, "user_id": 3386063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ad0e39812ee02719204b8fa37dd7941?s=128&d=identicon&r=PG&f=1", "display_name": "tkiral", "link": "https://stackoverflow.com/users/3386063/tkiral"}, "is_accepted": false, "score": 0, "last_activity_date": 1546465303, "creation_date": 1546465303, "answer_id": 54013520, "question_id": 54013426, "link": "https://stackoverflow.com/questions/54013426/what-is-the-difference-between-int-and-int-in-python/54013520#54013520", "title": "What is the difference between int and int() in Python", "body": "<p>int is used to do things like determine the type of a variable (as you've done in your example).  int() is used to convert a non-int variable to an int (i.e. \"45\" becomes 45).  I'm not really sure what you're getting at with your example.  Everything seems to be running correctly and then you just pasted the errors without any kind of explanation.</p>\n"}, {"tags": [], "owner": {"reputation": 5056, "user_id": 4276090, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r87tb.jpg?s=128&g=1", "display_name": "Skam", "link": "https://stackoverflow.com/users/4276090/skam"}, "is_accepted": false, "score": 1, "last_activity_date": 1546465766, "creation_date": 1546465766, "answer_id": 54013619, "question_id": 54013426, "link": "https://stackoverflow.com/questions/54013426/what-is-the-difference-between-int-and-int-in-python/54013619#54013619", "title": "What is the difference between int and int() in Python", "body": "<p>To answer your question, technically <code>int</code> is a class but you can also think of it as a data type as others have noted. Since it is a <a href=\"https://stackoverflow.com/questions/111234/what-is-a-callable-in-python\">callable object</a> <code>int()</code> would invoke the <code>__call__</code> method for the <code>int</code> class. For the sake of this question, you can think of it as a constructor that takes a string representation of an integer and returns an int.</p>\n\n<p>Here's an example in the Python REPL for clarity.</p>\n\n<pre><code>Python 3.7.0 (default, Sep 22 2018, 18:29:00)\n[Clang 9.1.0 (clang-902.0.39.2)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; int\n&lt;class 'int'&gt;\n&gt;&gt;&gt; int('1')\n1\n&gt;&gt;&gt; int('a')\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nValueError: invalid literal for int() with base 10: 'a'\n&gt;&gt;&gt; int.__call__('1')\n1\n&gt;&gt;&gt; isinstance(int('1'), int)\nTrue\n&gt;&gt;&gt; type(1) is int\nTrue\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 10311868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44079a23109128a12ef34a813838cda3?s=128&d=identicon&r=PG&f=1", "display_name": "Jimmy Hoho", "link": "https://stackoverflow.com/users/10311868/jimmy-hoho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1011, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1546465766, "creation_date": 1546464706, "question_id": 54013426, "link": "https://stackoverflow.com/questions/54013426/what-is-the-difference-between-int-and-int-in-python", "title": "What is the difference between int and int() in Python", "body": "<p>I'm just trying to understand what is the difference between int and int().\nHere is my code:</p>\n\n<pre><code>def function(define):\n    if type(define) == int:\n        return 'sorry'\n    else:\n        return len(define)\n\nprint(function(10))\n</code></pre>\n\n<p>and it returns: sorry</p>\n\n<pre><code>File \"exercise2.py\", line 14, in &lt;module&gt;\n    print(function(10))\n  File \"exercise2.py\", line 12, in function\n    return len(define)\nTypeError: object of type 'int' has no len()\n</code></pre>\n"}, {"tags": ["python", "django", "django-models", "django-forms"], "answers": [{"comments": [{"owner": {"reputation": 225, "user_id": 5213015, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh4.googleusercontent.com/-Zh3eK-S0zi8/AAAAAAAAAAI/AAAAAAAAAEM/Cjiz_qqh9sk/photo.jpg?sz=128", "display_name": "spidey677", "link": "https://stackoverflow.com/users/5213015/spidey677"}, "edited": false, "score": 0, "creation_date": 1546473006, "post_id": 54013705, "comment_id": 94866446, "body": "Thanks for the quick reply my friend. Still no luck. Any other clues?"}, {"owner": {"reputation": 225, "user_id": 5213015, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh4.googleusercontent.com/-Zh3eK-S0zi8/AAAAAAAAAAI/AAAAAAAAAEM/Cjiz_qqh9sk/photo.jpg?sz=128", "display_name": "spidey677", "link": "https://stackoverflow.com/users/5213015/spidey677"}, "edited": false, "score": 0, "creation_date": 1546495143, "post_id": 54013705, "comment_id": 94870671, "body": "I&#39;m getting closer to solving this... It&#39;s gladly appreciated If you have any free time I made a new ticket: <a href=\"https://stackoverflow.com/questions/54015285/django-logged-in-user-not-populating-in-admin-py\" title=\"django logged in user not populating in admin py\">stackoverflow.com/questions/54015285/&hellip;</a>"}], "tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": false, "score": 0, "last_activity_date": 1546466261, "creation_date": 1546466261, "answer_id": 54013705, "question_id": 54013425, "link": "https://stackoverflow.com/questions/54013425/django-model-instance-not-being-saved/54013705#54013705", "title": "Django - Model Instance Not Being Saved", "body": "<p>I suspect the problem is that you have a custom user model, but your signal is listening to the post_save event from the built-in User. Since you never create instances of that model, the signal never gets triggered.</p>\n\n<p>Change it to:</p>\n\n<pre><code>post_save.connect(create_profile, sender=CustomUser)\n</code></pre>\n"}], "owner": {"reputation": 225, "user_id": 5213015, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh4.googleusercontent.com/-Zh3eK-S0zi8/AAAAAAAAAAI/AAAAAAAAAEM/Cjiz_qqh9sk/photo.jpg?sz=128", "display_name": "spidey677", "link": "https://stackoverflow.com/users/5213015/spidey677"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546925531, "creation_date": 1546464686, "last_edit_date": 1592644375, "question_id": 54013425, "link": "https://stackoverflow.com/questions/54013425/django-model-instance-not-being-saved", "title": "Django - Model Instance Not Being Saved", "body": "<p>I\u2019m trying to create an instance of <code>Listing</code> so I can have <code>user</code> populate in the admin.</p>\n<p>I\u2019m new to Django and thought I had it but looks like I\u2019m wrong somewhere.</p>\n<p>How do I create an instance of <code>Listing</code> to populate in admin?</p>\n<p>Any help i gladly appreciated, thanks.</p>\n<p>Code Below:</p>\n<h1>user_profile/models</h1>\n<pre><code>from django.db import models\nfrom django.urls import reverse\nfrom django.contrib.auth.models import AbstractUser, UserManager\nfrom django.contrib.auth.models import User\nfrom django.db.models.signals import post_save\nfrom django.dispatch import receiver\nfrom django.conf import settings\nfrom users.forms import CustomUserCreationForm, CustomUserChangeForm\nfrom users.models import CustomUser\n\nclass Listing (models.Model):\n    user = models.OneToOneField(settings.AUTH_USER_MODEL, on_delete=models.PROTECT, null=True)\n    created =  models.DateTimeField(auto_now_add=True, null=True)\n    updated = models.DateTimeField(auto_now=True)\n    name = models.CharField(max_length=100)\n    address = models.CharField(max_length=100)\n    zip_code = models.CharField(max_length=100)\n    mobile_number = models.CharField(max_length=100)\n    cc_number = models.CharField(max_length=100)\n    cc_expiration = models.CharField(max_length=100)\n    cc_cvv = models.CharField(max_length=100)    \n\ndef create_profile(sender, **kwargs):\n    if kwargs['created']:\n        user_profile = Listing.objects.create(user=kwargs['instance'])\n        \npost_save.connect(create_profile, sender=User)\n</code></pre>\n<h1>user_profile/admin.py</h1>\n<pre><code>from django.contrib import admin\nfrom django.contrib.auth import get_user_model\nfrom django.contrib.auth.admin import UserAdmin\n\n\nfrom user_profile.forms import HomeForm\nfrom users.forms import CustomUserCreationForm, CustomUserChangeForm\n\nfrom user_profile.models import Listing\nfrom users.models import CustomUser\n\n\n# Register models here.\n\nclass UserProfileAdmin(admin.ModelAdmin):\n    list_display = ['name', 'address', 'zip_code', 'mobile_number', 'created', 'updated', 'user']\n    list_filter = ['name', 'zip_code', 'created', 'updated', 'user']\n\nadmin.site.register(Listing, UserProfileAdmin)\n</code></pre>\n"}, {"tags": ["python", "excel", "pandas"], "comments": [{"owner": {"reputation": 364, "user_id": 3707720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0fd80bb42c49cd68a45120900ba88ba?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan", "link": "https://stackoverflow.com/users/3707720/dylan"}, "edited": false, "score": 0, "creation_date": 1546465495, "post_id": 54013370, "comment_id": 94864136, "body": "Sorry, I can&#39;t get this to replicate. Can you possible provide a better example? I have a .xlsx with two sheets, one of which refers to another sheet with a formula, and it reads in values instead of NaNs just fine. Perhaps try specifying a dtype for the relevant column? <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_excel.html\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/stable/generated/&hellip;</a>"}, {"owner": {"reputation": 1954, "user_id": 7037228, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-TL7cHjz4RSU/AAAAAAAAAAI/AAAAAAAABaY/-afjNzJ6hjM/photo.jpg?sz=128", "display_name": "Xiaoyu Lu", "link": "https://stackoverflow.com/users/7037228/xiaoyu-lu"}, "edited": false, "score": 0, "creation_date": 1546465625, "post_id": 54013370, "comment_id": 94864178, "body": "If it&#39;s not too much of a hassle, can you just create another spreadsheet and paste from the original file but only keep the value?"}, {"owner": {"reputation": 81, "user_id": 9166295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfac404f8aec0997d0a2cd076283090b?s=128&d=identicon&r=PG&f=1", "display_name": "paul", "link": "https://stackoverflow.com/users/9166295/paul"}, "reply_to_user": {"reputation": 364, "user_id": 3707720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0fd80bb42c49cd68a45120900ba88ba?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan", "link": "https://stackoverflow.com/users/3707720/dylan"}, "edited": false, "score": 0, "creation_date": 1546468573, "post_id": 54013370, "comment_id": 94865281, "body": "@Dylan My formula is, =IF(ROUNDDOWN(VLOOKUP(J4,&#39;Inventory&#39;!$A:$Z,6)/3,0)-4&gt;0,ROUND&zwnj;&#8203;DOWN(VLOOKUP(J4,&#39;Inv&zwnj;&#8203;entory&#39;!$A:$Z,6)/3,0&zwnj;&#8203;)-4,0), not sure if this helps. I will try specifying a dtype."}, {"owner": {"reputation": 81, "user_id": 9166295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfac404f8aec0997d0a2cd076283090b?s=128&d=identicon&r=PG&f=1", "display_name": "paul", "link": "https://stackoverflow.com/users/9166295/paul"}, "reply_to_user": {"reputation": 1954, "user_id": 7037228, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-TL7cHjz4RSU/AAAAAAAAAAI/AAAAAAAABaY/-afjNzJ6hjM/photo.jpg?sz=128", "display_name": "Xiaoyu Lu", "link": "https://stackoverflow.com/users/7037228/xiaoyu-lu"}, "edited": false, "score": 0, "creation_date": 1546468727, "post_id": 54013370, "comment_id": 94865322, "body": "@XiaoyuLu I am trying to automate the entire process, I think creating a new spreadsheet will not help because I would still need the results from the formula"}, {"owner": {"reputation": 81, "user_id": 9166295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfac404f8aec0997d0a2cd076283090b?s=128&d=identicon&r=PG&f=1", "display_name": "paul", "link": "https://stackoverflow.com/users/9166295/paul"}, "reply_to_user": {"reputation": 364, "user_id": 3707720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0fd80bb42c49cd68a45120900ba88ba?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan", "link": "https://stackoverflow.com/users/3707720/dylan"}, "edited": false, "score": 0, "creation_date": 1546469528, "post_id": 54013370, "comment_id": 94865540, "body": "@Dylan I try using dtype, and converters. Had no luck."}, {"owner": {"reputation": 25691, "user_id": 1675954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zZXdA.jpg?s=128&g=1", "display_name": "Rachel Gallen", "link": "https://stackoverflow.com/users/1675954/rachel-gallen"}, "edited": false, "score": 0, "creation_date": 1546470536, "post_id": 54013370, "comment_id": 94865827, "body": "<a href=\"https://stackoverflow.com/a/42180446/1675954\">stackoverflow.com/a/42180446/1675954</a>  a regex solution"}, {"owner": {"reputation": 25691, "user_id": 1675954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zZXdA.jpg?s=128&g=1", "display_name": "Rachel Gallen", "link": "https://stackoverflow.com/users/1675954/rachel-gallen"}, "edited": false, "score": 0, "creation_date": 1546470709, "post_id": 54013370, "comment_id": 94865865, "body": "<a href=\"https://stackoverflow.com/a/41730454/1675954\">stackoverflow.com/a/41730454/1675954</a> a possible alternative solution"}, {"owner": {"reputation": 81, "user_id": 9166295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfac404f8aec0997d0a2cd076283090b?s=128&d=identicon&r=PG&f=1", "display_name": "paul", "link": "https://stackoverflow.com/users/9166295/paul"}, "reply_to_user": {"reputation": 25691, "user_id": 1675954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zZXdA.jpg?s=128&g=1", "display_name": "Rachel Gallen", "link": "https://stackoverflow.com/users/1675954/rachel-gallen"}, "edited": false, "score": 0, "creation_date": 1546471307, "post_id": 54013370, "comment_id": 94866047, "body": "@RachelGallen The second link, I did as Colton T suggested, save the file first. That worked, it displayed the numbers."}, {"owner": {"reputation": 25691, "user_id": 1675954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zZXdA.jpg?s=128&g=1", "display_name": "Rachel Gallen", "link": "https://stackoverflow.com/users/1675954/rachel-gallen"}, "edited": false, "score": 0, "creation_date": 1546471463, "post_id": 54013370, "comment_id": 94866082, "body": "@paul brilliant. Success! Always good to have a happy ending :)"}, {"owner": {"reputation": 81, "user_id": 9166295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfac404f8aec0997d0a2cd076283090b?s=128&d=identicon&r=PG&f=1", "display_name": "paul", "link": "https://stackoverflow.com/users/9166295/paul"}, "reply_to_user": {"reputation": 25691, "user_id": 1675954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zZXdA.jpg?s=128&g=1", "display_name": "Rachel Gallen", "link": "https://stackoverflow.com/users/1675954/rachel-gallen"}, "edited": false, "score": 0, "creation_date": 1546472108, "post_id": 54013370, "comment_id": 94866265, "body": "@RachelGallen Thanks!"}, {"owner": {"reputation": 807, "user_id": 6573889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lOmN8.jpg?s=128&g=1", "display_name": "Aditya K", "link": "https://stackoverflow.com/users/6573889/aditya-k"}, "edited": false, "score": 0, "creation_date": 1546496072, "post_id": 54013370, "comment_id": 94870920, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/41722374/pandas-read-excel-values-not-formulas\">pandas read excel values not formulas</a>"}], "owner": {"reputation": 81, "user_id": 9166295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfac404f8aec0997d0a2cd076283090b?s=128&d=identicon&r=PG&f=1", "display_name": "paul", "link": "https://stackoverflow.com/users/9166295/paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 420, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1546464268, "creation_date": 1546464268, "question_id": 54013370, "link": "https://stackoverflow.com/questions/54013370/how-to-get-the-value-that-a-formula-in-excel-returns-using-pandas", "title": "How to get the value that a formula in excel returns using Pandas?", "body": "<p>I have an excel workbook with multiple sheets and I am using pandas to access it. The first sheet is the one that contains formulas that access the rest of the sheets and perform some calculations. When I access the first sheet and print the data frame, the columns that uses formulas are printed as Nan. How can I get the value instead of Nan?</p>\n\n<pre><code>import numpy as np \nimport pandas as pd \n\nrefitemPath = \".\\\\170310-test.xlsx\"\n\nxlsxFile = pd.ExcelFile(refitemPath)\ndf = pd.read_excel(xlsxFile, 'Result')\nprint(df)\n</code></pre>\n\n<p>Here is an example result\n<a href=\"https://i.stack.imgur.com/qg7Bk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qg7Bk.png\" alt=\"enter image description here\"></a></p>\n\n<p>and the actual values</p>\n\n<p><a href=\"https://i.stack.imgur.com/yys59.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yys59.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "numpy"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10652346"}, "edited": false, "score": 0, "creation_date": 1546467628, "post_id": 54013420, "comment_id": 94864945, "body": "Ideally less than a sec for an array of the order of np.random.choice(10,5_000_000)"}], "tags": [], "owner": {"reputation": 992, "user_id": 4431194, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-S6yMg18nR24/AAAAAAAAAAI/AAAAAAAAABY/IzNEndpgz0A/photo.jpg?sz=128", "display_name": "hchw", "link": "https://stackoverflow.com/users/4431194/hchw"}, "is_accepted": false, "score": 1, "last_activity_date": 1546464642, "creation_date": 1546464642, "answer_id": 54013420, "question_id": 54013340, "link": "https://stackoverflow.com/questions/54013340/reverse-order-sequential-digits/54013420#54013420", "title": "Reverse order sequential digits", "body": "<p>How is this? Seems to be faster afaik but without knowing how fast is fast enough its tough to tell for sure</p>\n\n<pre><code>all_l = []\nsub_l = []\nfor i in a:\n    if sub_l:\n        if sub_l[0] &gt; i:\n            all_l.extend(sub_l)\n            sub_l = [i]\n        else:\n            sub_l.insert(0, i)\n    else:\n        sub_l = [i]\nall_l.extend(sub_l)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1546466145, "post_id": 54013606, "comment_id": 94864406, "body": "Yes, too slow. 5 M rows."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10652346"}, "edited": false, "score": 0, "creation_date": 1546466209, "post_id": 54013606, "comment_id": 94864436, "body": "Appreciate the effort though. Perhaps with a simple python loop is as good as it can get"}], "tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 2, "last_activity_date": 1546465711, "creation_date": 1546465711, "answer_id": 54013606, "question_id": 54013340, "link": "https://stackoverflow.com/questions/54013340/reverse-order-sequential-digits/54013606#54013606", "title": "Reverse order sequential digits", "body": "<p>Can you use pandas?</p>\n\n<pre><code>import pandas as pd\na = [1,5,7,3,2,5,4,45,1,5,10,12]\naa = pd.Series(a)\naa.groupby(aa.diff().bfill().lt(0).cumsum()).apply(lambda x: x[::-1]).tolist()\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[7, 5, 1, 3, 5, 2, 45, 4, 12, 10, 5, 1]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 1, "creation_date": 1546520858, "post_id": 54013796, "comment_id": 94881892, "body": "@Gerald, I was still trying to find a faster way, but the fastest I get is using generators, see my edit. Thanks for the choice, by the way."}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": true, "score": 2, "last_activity_date": 1546520733, "last_edit_date": 1546520733, "creation_date": 1546466756, "answer_id": 54013796, "question_id": 54013340, "link": "https://stackoverflow.com/questions/54013340/reverse-order-sequential-digits/54013796#54013796", "title": "Reverse order sequential digits", "body": "<p>Other option without dependencies:</p>\n\n<pre><code>array = [1,5,7,3,2,5,4,45,1,5,10,12]\n\nres, memo = [], []\nfor e in array:\n  if len(memo) == 0 or e &gt; memo[-1]: memo.append(e)\n  else:\n    res.extend(reversed(memo))\n    memo = [e]\nres.extend(reversed(memo))\n\nres # =&gt; [7, 5, 1, 3, 5, 2, 45, 4, 12, 10, 5, 1]\n</code></pre>\n\n<p><hr>\nModified version which is a bit faster:</p>\n\n<pre><code>def reverse_if_chunck_increases(array):\n  res, memo, last_memo = [], [], None\n  for e in array:\n    if not last_memo or e &gt; last_memo:\n      last_memo = e\n      memo.append(e)\n    else:\n      res.extend(memo[::-1])\n      last_memo, memo = e, [e]\n  res.extend(memo[::-1])\n  return res\n\nprint(reverse_if_chunck_increases(array) == [7, 5, 1, 3, 5, 2, 45, 4, 12, 10, 5, 1])\n#=&gt; True\n</code></pre>\n\n<p><hr>\n<strong>EDIT after the answer was accepted</strong> (Maybe it's useful.)</p>\n\n<p>I was able to get the result so easily and apparently a bit faster coding in Ruby as:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>array.chunk_while { |x, y| x &lt; y }.flat_map{ |chunk| chunk.reverse }\n</code></pre>\n\n<p>So, I wondered why there isn't an <code>itertool</code> like <code>chunk_while</code>. Then I tried to code one similar using <code>yield</code>:</p>\n\n<pre><code>def reverse_if_chunk_increases(array):\n  i, x, size, res = 0, 0, len(array), []\n  while i &lt; size-1:\n    if array[i] &gt; array[i+1]:\n      yield array[x:i+1][::-1]\n      x = i +1\n    i += 1\n  yield array[x:size][::-1]\n</code></pre>\n\n<p>The execution is superfast but it return a generator to iterate instead of a list:</p>\n\n<pre><code>chunks = reverse_if_chunk_increases(array)\nfor chunk in chunks:\n  print(chunk)\n# [7, 5, 1]\n# [3]\n# [5, 2]\n# [45, 4]\n# [12, 10, 5, 1]\n</code></pre>\n\n<p>It can be converted to a list, which is the slowest process.\nNote that a generator can be called once.\nRemoving <code>[::-1]</code> you get a result similar to Ruby enumerator/generator <code>chunk_while</code>.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10652346"}, "edited": false, "score": 0, "creation_date": 1546472871, "post_id": 54014419, "comment_id": 94866418, "body": "Thank you very much @pault! Yes, I was under the impression that perhaps a python loop was the best solution. Very nice solution anyway and thanks again for the effort and time complexity comparisson"}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1546525498, "post_id": 54014419, "comment_id": 94884558, "body": "Nice numpy solution @pault.  Interesting that numpy couldn&#39;t outperform straight python loops."}, {"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "reply_to_user": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1546552806, "post_id": 54014419, "comment_id": 94897127, "body": "@ScottBoston I can&#39;t think of a way to optimize this in any way using numpy. The fastest solution is one pass through the list, building the output as you go."}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1546552967, "post_id": 54014419, "comment_id": 94897178, "body": "@pault Yes, breaking the list part and reassembling is time consuming."}], "tags": [], "owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "is_accepted": false, "score": 1, "last_activity_date": 1546470990, "creation_date": 1546470990, "answer_id": 54014419, "question_id": 54013340, "link": "https://stackoverflow.com/questions/54013340/reverse-order-sequential-digits/54014419#54014419", "title": "Reverse order sequential digits", "body": "<p>I don't think you're going to get much faster than using a pure python loop.</p>\n\n<p>For instance, here is a numpy+itertools solution:</p>\n\n<pre><code>import numpy as np\nfrom itertools import chain, groupby\nfrom operator import itemgetter\n\ndef reverse_increasing_sequences_numpy(a):\n    idx = (np.diff(np.concatenate([[a[0]], a]))&lt;0).cumsum()\n    return list(\n        chain.from_iterable(\n            (reversed([x[0] for x in g]) for v, g in groupby(zip(a, idx), itemgetter(1)))\n        )\n    )\n\nprint(reverse_increasing_sequences(a))\n#[7, 5, 1, 3, 5, 2, 45, 4, 12, 10, 5, 1]\n</code></pre>\n\n<p>But looking at the speed test results:</p>\n\n<pre><code>b = np.random.choice(10, 100000)\n\n%%timeit\nreverse_increasing_sequences_numpy(b)\n#47.1 ms \u00b1 778 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n\n%%timeit\nreverse_increasing_sequences_iGian(b)\n#40.3 ms \u00b1 1.31 ms per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n\n%%%timeit\nreverse_increasing_sequences_hchw(b)\n#26.1 ms \u00b1 1.35 ms per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n</code></pre>\n\n<p>@hchw's <a href=\"https://stackoverflow.com/a/54013420/5858851\">solution</a> ran is almost 2 times faster than my numpy version.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10652346"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 54013796, "answer_count": 4, "score": 5, "last_activity_date": 1546520733, "creation_date": 1546464054, "last_edit_date": 1546472926, "question_id": 54013340, "link": "https://stackoverflow.com/questions/54013340/reverse-order-sequential-digits", "title": "Reverse order sequential digits", "body": "<p>I have a very long array, and I'm trying to do the following in a way as efficient as possible:</p>\n\n<p>For each consecutively incrementing chunk in the list I have to reverse its order.</p>\n\n<p>So, for the following array:</p>\n\n<pre><code>a = np.array([1,5,7,3,2,5,4,45,1,5,10,12])\n</code></pre>\n\n<p>I would like to obtain:</p>\n\n<pre><code>array([7,5,1,3,5,2,45,4,12,10,5,1])\n</code></pre>\n\n<p>I was wondering if this could be vectorized, using <code>numpy</code> perhaps?</p>\n\n<p>I have already had some answers in <a href=\"https://stackoverflow.com/questions/54011684/reverse-order-sequential-digits\">this</a> previous question, but the results, although they are big improvements, they are still a little slow.</p>\n"}, {"tags": ["python", "email", "imap"], "answers": [{"tags": [], "owner": {"reputation": 645, "user_id": 3315878, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f53d811fbb5ea4437f2313c9054b422?s=128&d=identicon&r=PG", "display_name": "Jonas Drotleff", "link": "https://stackoverflow.com/users/3315878/jonas-drotleff"}, "is_accepted": false, "score": 1, "last_activity_date": 1546467238, "last_edit_date": 1546467238, "creation_date": 1546466597, "answer_id": 54013767, "question_id": 54013333, "link": "https://stackoverflow.com/questions/54013333/how-to-reply-to-the-last-email-imap4-in-inbox/54013767#54013767", "title": "How to reply to the last email (IMAP4) in inbox?", "body": "<p>You can search the selected mailbox like this:</p>\n\n<pre><code>res, data = self.mail.search(None, 'ALL')\n</code></pre>\n\n<p>Your data will then look something like this: <code>[b'1 2 3 4 5 6 7 8 9 10 11 12']</code> where <code>12</code> is the UID for the latest email in the selected mailbox. You can now fetch this mail with</p>\n\n<pre><code>self.mail.fetch(data[0].split()[-1], '(RFC822)')\n</code></pre>\n\n<h2>Explanation</h2>\n\n<p><code>IMAP4.search(charset, criterion[, ...])</code> returns a list of all emails in your current mailbox. They are typically orderd by date with the first one being the oldest.\nProvide <code>None</code> for the charset to search for any mail and the criterion is set to <code>All</code>.</p>\n\n<p>See <a href=\"https://docs.python.org/3.6/library/imaplib.html\" rel=\"nofollow noreferrer\">Python imaplib documentation</a></p>\n\n<p><code>data[0].split()[-1]</code> returns the last element (<code>[-1]</code>) of your list of mail UIDs</p>\n\n<h2>Respond to mail</h2>\n\n<p>You are using the IMAP protocol to access a mailserver. IMAP stands for </p>\n\n<blockquote>\n  <p>Internet Message Access Protocol</p>\n</blockquote>\n\n<p>It is intendet for message access, not to send mail. You need SMTP to send messages. Take a look at <a href=\"https://stackoverflow.com/questions/3769701/how-to-create-an-email-and-send-it-to-specific-mailbox-with-imaplib\">this question</a>.</p>\n"}], "owner": {"reputation": 441, "user_id": 3556956, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uqt3D.jpg?s=128&g=1", "display_name": "Zoya", "link": "https://stackoverflow.com/users/3556956/zoya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 317, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1546467238, "creation_date": 1546464007, "last_edit_date": 1546466805, "question_id": 54013333, "link": "https://stackoverflow.com/questions/54013333/how-to-reply-to-the-last-email-imap4-in-inbox", "title": "How to reply to the last email (IMAP4) in inbox?", "body": "<p>Python IMAP4 how to reply to an email with a given UID or last email in Inbox</p>\n\n<p>I have been able to login my gmail with IMAP4 and get the last UID , but I dont know how to reply to the last email in the inbox my python automation code:</p>\n\n<pre><code>    self.mail = imaplib.IMAP4_SSL('imap.gmail.com')\n    self.mail.login(self.data[\"emailUsername\"], self.data[\"emailPassword\"]) \n    self.mail.list()\n    self.mail.select(\"inbox\")\n    subjectStr = '(HEADER Subject ' + \"\\\"\" + mySubject + \"\\\"\" + ')'\n    result, UIDemailsWithGivenSubject = self.mail.uid('search', None, subjectStr)\n    ids_string = UIDemailsWithGivenSubject[0].decode(\"utf-8\")\n    ids_string_list = ids_string.split(\" \")\n    self.lastEmailUid = ids_string_list[-1]\n</code></pre>\n\n<p>Now how do I respond to the last email or respond/reply with a given UID.</p>\n"}, {"tags": ["python", "json", "pandas", "dictionary"], "comments": [{"owner": {"reputation": 807, "user_id": 6573889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lOmN8.jpg?s=128&g=1", "display_name": "Aditya K", "link": "https://stackoverflow.com/users/6573889/aditya-k"}, "edited": false, "score": 0, "creation_date": 1546497330, "post_id": 54013327, "comment_id": 94871260, "body": "Did you create this dataframe from a JSON?"}, {"owner": {"reputation": 627, "user_id": 9399165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cd07124054fdcd2377183f05c611532?s=128&d=identicon&r=PG&f=1", "display_name": "The Dodo", "link": "https://stackoverflow.com/users/9399165/the-dodo"}, "reply_to_user": {"reputation": 807, "user_id": 6573889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lOmN8.jpg?s=128&g=1", "display_name": "Aditya K", "link": "https://stackoverflow.com/users/6573889/aditya-k"}, "edited": false, "score": 0, "creation_date": 1546526082, "post_id": 54013327, "comment_id": 94884916, "body": "Yes, a 2 GB JSON file @AdityaK"}], "answers": [{"tags": [], "owner": {"reputation": 1017, "user_id": 2708470, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/24fbe75140c97c7ad1e96e6b45aa1c11?s=128&d=identicon&r=PG", "display_name": "lapolonio", "link": "https://stackoverflow.com/users/2708470/lapolonio"}, "is_accepted": false, "score": 0, "last_activity_date": 1546579760, "creation_date": 1546579760, "answer_id": 54033520, "question_id": 54013327, "link": "https://stackoverflow.com/questions/54013327/convert-a-pandas-column-list-of-nested-dictionaries-into-separate-columns/54033520#54033520", "title": "Convert a pandas column list of nested dictionaries into separate columns", "body": "<p>I think you are looking for <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.io.json.json_normalize.html\" rel=\"nofollow noreferrer\">json_normalize</a> </p>\n"}], "owner": {"reputation": 627, "user_id": 9399165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cd07124054fdcd2377183f05c611532?s=128&d=identicon&r=PG&f=1", "display_name": "The Dodo", "link": "https://stackoverflow.com/users/9399165/the-dodo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 151, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546579760, "creation_date": 1546463960, "question_id": 54013327, "link": "https://stackoverflow.com/questions/54013327/convert-a-pandas-column-list-of-nested-dictionaries-into-separate-columns", "title": "Convert a pandas column list of nested dictionaries into separate columns", "body": "<p>I have a Pandas DataFrame like this:</p>\n\n<pre><code>Name    Level     Skills\n\nMatt     10       [{'Invisibility': True, \n                    'Powerfist': False, \n                    {'Elemental':[{'Fire': 10,\n                                  'Water': 20,\n                                  'Wind': 15,\n                                  'Earth': 10}],\n                     'Race': 'Human'},\n                    'Resources': [{'Mana' : True,\n                                   'Energy':[{'Solar' : True,\n                                              'Air' : True,\n                                              'Hydro': True}]}]}]\nJack     12       [{'Invisibility': True, \n                    'Powerfist': False, \n                    {'Elemental':[{'Fire': 5,\n                                  'Water': 13,\n                                  'Wind': 10,\n                                  'Earth': 16}]},\n                     'Race': 'Giant'},\n                    'Resources': [{'Mana' : True,\n                                   'Energy':[{'Solar' : True,\n                                              'Air' : False,\n                                              'Hydro': True}]}]}]\nZack     20       [{'Invisibility': False, \n                    'Powerfist': True, \n                    {'Elemental':[{'Fire': 10,\n                                  'Water': 10,\n                                  'Wind': 10,\n                                  'Earth': 10}]},\n                     'Race': 'Elf'},\n                    'Resources': [{'Mana' : True,\n                                   'Energy':[{'Solar' : True,\n                                              'Air' : True,\n                                              'Hydro': True}]}]}]\n</code></pre>\n\n<p>As you can see, there is a list of dictionaries and list of nested dictionaries within the <code>Skills</code> column.</p>\n\n<p>I want each and every <strong>LAST</strong> Key within each dictionary in the <code>Skills</code> column to have it's own column.</p>\n\n<p>Like this:</p>\n\n<pre><code> Name    Level    Invisibility     Powerfist    Fire   Water   Wind Earth   Race     Mana    Solar    Air    Hydro\n\n Matt     10      True             False        10     20      15     10    Human   True     True     True    True\n Jack     12      True             False         5     13      10     16    Giant   True     True     False    True\n Zack     20      False            True         10     10      10     10    Elf     True     True     True    True\n</code></pre>\n\n<p>Any suggestions is greatly appreciated!</p>\n"}, {"tags": ["python", "mongodb", "flask", "pymongo"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1546464032, "post_id": 54013320, "comment_id": 94863581, "body": "&quot;As you can see, there is A LOT of casting going on. From Decimal -&gt; Decimal 128 -&gt; string -&gt; float&quot; I don&#39;t see the conversions. More than half of that are just dictionary keys."}, {"owner": {"reputation": 41, "user_id": 10822092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f8783d7f5f1e0c0a0d8a7d4db667278?s=128&d=identicon&r=PG&f=1", "display_name": "Shafiq Mohammed", "link": "https://stackoverflow.com/users/10822092/shafiq-mohammed"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1546466429, "post_id": 54013320, "comment_id": 94864517, "body": "@roganjosh Sorry for the confusion, the object being stored in Mongo is stored as data[&#39;data&#39;][&#39;venue&#39;][&#39;ATM&#39;]"}, {"owner": {"reputation": 41, "user_id": 10822092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f8783d7f5f1e0c0a0d8a7d4db667278?s=128&d=identicon&r=PG&f=1", "display_name": "Shafiq Mohammed", "link": "https://stackoverflow.com/users/10822092/shafiq-mohammed"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1546466469, "post_id": 54013320, "comment_id": 94864529, "body": "So the process is:  Convert Decimal Value to Decimal128, store into mongodb.  Retrieve value from mongo, convert to str first because I can&#39;t convert straight from Decimal128 to float. So Decimal128 -&gt; str -&gt; float"}], "owner": {"reputation": 41, "user_id": 10822092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f8783d7f5f1e0c0a0d8a7d4db667278?s=128&d=identicon&r=PG&f=1", "display_name": "Shafiq Mohammed", "link": "https://stackoverflow.com/users/10822092/shafiq-mohammed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 243, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1546463900, "creation_date": 1546463900, "question_id": 54013320, "link": "https://stackoverflow.com/questions/54013320/best-way-to-store-a-python-decimal-object-in-mongodb-using-with-flask-and-jinja", "title": "Best way to store a python Decimal object in MongoDB (using with Flask and Jinja)?", "body": "<p>So I'm creating an app that uses monetary data. I am using Flask for my app and storing data using Flask-pymongo (basically pymongo with some HTTP functionalities). </p>\n\n<p>From my understanding - Flask doesn't have a Decimal object, so you have to cast the monetary value to Decimal128 (a BSON object).</p>\n\n<p>Now, when I retrieve the value, I want to be able to manipulate it on the frontend (e.g. displaying totals), and the way I do it is this way:</p>\n\n<p>data['data']['venue']['ATM']|string|float</p>\n\n<p>As you can see, there is A LOT of casting going on. From Decimal -> Decimal 128 -> string -> float</p>\n\n<p>Surely, I'm doing it in a very inefficient way and there has to be a better way. If there is, please let me know. Something about the multiple castings just feels wrong to me. If this way is totally okay - let me know as well </p>\n\n<p>Thank you!</p>\n"}, {"tags": ["python", "flask"], "comments": [{"owner": {"reputation": 2927, "user_id": 2016946, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/O9mVs.png?s=128&g=1", "display_name": "GG_Python", "link": "https://stackoverflow.com/users/2016946/gg-python"}, "edited": false, "score": 0, "creation_date": 1546464873, "post_id": 54013302, "comment_id": 94863918, "body": "looks like you&#39;re redirecting to a blueprint? is the function <code>start_page</code> defined in the blueprint? In general, it&#39;s hard to debug this without all the pertinent code posted in the question, see <a href=\"https://stackoverflow.com/help/mcve\">mcve</a>"}, {"owner": {"reputation": 43, "user_id": 10028126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30bc03ed95764c42d0399aea553f42bd?s=128&d=identicon&r=PG&f=1", "display_name": "Japhy", "link": "https://stackoverflow.com/users/10028126/japhy"}, "reply_to_user": {"reputation": 2927, "user_id": 2016946, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/O9mVs.png?s=128&g=1", "display_name": "GG_Python", "link": "https://stackoverflow.com/users/2016946/gg-python"}, "edited": false, "score": 0, "creation_date": 1546466031, "post_id": 54013302, "comment_id": 94864358, "body": "yes auth.start_page is defined, the function isn&#39;t being called what so ever. That function gets called on the URL <a href=\"http://127.0.0.1:5000/auth/\" rel=\"nofollow noreferrer\">127.0.0.1:5000/auth</a>, I want it to be called from just <a href=\"http://127.0.0.1:5000/\" rel=\"nofollow noreferrer\">127.0.0.1:5000</a>."}, {"owner": {"reputation": 982, "user_id": 9473052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebeb6545d601766b0ed4bcc50d9d2a98?s=128&d=identicon&r=PG&f=1", "display_name": "gittert", "link": "https://stackoverflow.com/users/9473052/gittert"}, "edited": false, "score": 0, "creation_date": 1546493490, "post_id": 54013302, "comment_id": 94870233, "body": "Why not add @bp.route(&#39;/&#39;) to the start_page function? It is possible to have multiple routes on 1 function."}], "owner": {"reputation": 43, "user_id": 10028126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30bc03ed95764c42d0399aea553f42bd?s=128&d=identicon&r=PG&f=1", "display_name": "Japhy", "link": "https://stackoverflow.com/users/10028126/japhy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 213, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1546463817, "creation_date": 1546463817, "question_id": 54013302, "link": "https://stackoverflow.com/questions/54013302/how-to-redirect-default-url-in-a-flask-app", "title": "How to redirect default url in a flask app", "body": "<p>I have a flask app running a website, and it works as expected when sent to a page directly, like the url: <a href=\"http://127.0.0.1:5000/auth/start_page\" rel=\"nofollow noreferrer\">http://127.0.0.1:5000/auth/start_page</a>, but when I go to just: <a href=\"http://127.0.0.1:5000/\" rel=\"nofollow noreferrer\">http://127.0.0.1:5000/</a>, I get a URL not found error. I want the url: <a href=\"http://127.0.0.1:5000/\" rel=\"nofollow noreferrer\">http://127.0.0.1:5000/</a> to redirect to the <a href=\"http://127.0.0.1:5000/auth/start_page\" rel=\"nofollow noreferrer\">http://127.0.0.1:5000/auth/start_page</a> page.</p>\n\n<p>I tried just adding something like this to the python:</p>\n\n<pre><code>@bp.route('/')\ndef start():\n    return redirect(url_for('auth.start_page'))\n</code></pre>\n\n<p>but I'm still getting the page not found error. This is how I redirect all the other URL's so I don't know what the problem is. Anyone know what I'm doing wrong?</p>\n"}, {"tags": ["python", "class", "module"], "comments": [{"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 1, "creation_date": 1546464461, "post_id": 54013296, "comment_id": 94863752, "body": "How can you import <code>d</code> in module <code>d</code> and use <code>MyClass</code> before it is defined? This just doesn&#39;t make sense why you would think it would work, and what you are trying to achieve. Why do you want <code>MyClass</code> to have <code>MyClass</code> as a base?"}, {"owner": {"reputation": 9, "user_id": 9270163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e21e46c993898bff67d0fa3459e684f0?s=128&d=identicon&r=PG&f=1", "display_name": "J Ou", "link": "https://stackoverflow.com/users/9270163/j-ou"}, "reply_to_user": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1546465250, "post_id": 54013296, "comment_id": 94864039, "body": "This actually comes from auto-generated code that converts schemas to python. So  I actually have the same question as to why we want to do that. But to solve this particular problem, it seems the import a.b.c.d is not throwing an import error, so the subsequent use of the class causes the attribute error. Doesn&#39;t quite make sense to me how that would be the case."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1546467741, "post_id": 54013296, "comment_id": 94864987, "body": "Please <a href=\"https://stackoverflow.com/posts/54013296/edit\">edit</a> you question and show the directory and file layout. How is the <code>d.py</code> module being executed\u2014i.e. where&#39;s the code that&#39;s trying to use the <code>a</code> package?"}], "owner": {"reputation": 9, "user_id": 9270163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e21e46c993898bff67d0fa3459e684f0?s=128&d=identicon&r=PG&f=1", "display_name": "J Ou", "link": "https://stackoverflow.com/users/9270163/j-ou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1791, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1546466933, "creation_date": 1546463778, "last_edit_date": 1546466933, "question_id": 54013296, "link": "https://stackoverflow.com/questions/54013296/dont-understand-this-attributeerror-module-object-has-no-attribute-even-th", "title": "Don&#39;t understand this &quot;AttributeError: &#39;module&#39; object has no attribute&quot; even though it is imported it right before", "body": "<p>I tried finding a solution here but had no luck. I had a piece of code that was working fine, but then I refactored things elsewhere and it broke this code for some reason. Here is example code that is causing the error:</p>\n\n<pre><code>try:\n    import a.b.c.d\n    CustomClass = a.b.c.d.MyClass\nexcept ImportError:\n    CustomClass = OtherClass\n\nclass MyClass(CustomClass):\n    \"\"\"Docstring\"\"\"\n</code></pre>\n\n<p>This is placed in the file <code>d.py</code>.  The <code>import</code> gives no error and never goes into that <code>except</code> block, but when I try to assign <code>CustomClass</code> I get the exception: <code>'module' object has no attribute 'd'</code>. </p>\n\n<p>However, if I use the following code it works:</p>\n\n<pre><code>try:\n    from a.b.c.d import MyClass\n    CustomClass = MyClass\nexcept ImportError:\n    CustomClass = OtherClass\n\nclass MyClass(CustomClass):\n    \"\"\"Docstring\"\"\"\n</code></pre>\n\n<p>What could be causing the first code to produce the error but the second snippet to work? (Note: There are blank <code>__init__.py</code> files throughout the directory structure)</p>\n\n<p><strong>Edit:</strong> I just figured out that the second code is working because it gets thrown into the <code>except</code> block and goes through. So why doesn't the first set of code throw the <code>ImportError</code>?</p>\n"}, {"tags": ["python", "django", "model"], "comments": [{"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1546464265, "post_id": 54013258, "comment_id": 94863677, "body": "I&#39;m not really sure I understand the question. But you can certainly run both queries in one view function (provided it accepts both <code>query</code> parameters, it appears they are URL parameters) and have it render a template to which it passes both resulting querysets. Why would you think you couldn&#39;t do this? Have you tried it?"}], "answers": [{"tags": [], "owner": {"reputation": 101, "user_id": 2275482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fu8Ti.jpg?s=128&g=1", "display_name": "alfandango", "link": "https://stackoverflow.com/users/2275482/alfandango"}, "is_accepted": true, "score": 1, "last_activity_date": 1546473240, "creation_date": 1546473240, "answer_id": 54014699, "question_id": 54013258, "link": "https://stackoverflow.com/questions/54013258/how-to-run-query-against-multiple-django-models-in-a-view/54014699#54014699", "title": "How to Run Query Against Multiple Django Models in a View", "body": "<p>I'm not totally clear on what you are trying to achieve but I will try and answer.</p>\n\n<blockquote>\n  <p>How can I run a query against multiple Django models and display them\n  through a template?</p>\n</blockquote>\n\n<p>Well the simple answer is that you can run queries against as many models in your view function or class as you want and add them to your context to be passed to your template.</p>\n\n<p>for example:</p>\n\n<pre><code>def my_view(request):\n    context = {}\n    context['people'] = People.objects.all()\n    context['pets'] = Pet.objects.all()\n    return render(request, index.html, context)\n</code></pre>\n\n<p>in your template you can access the results of the queries as <code>{{ people }}</code> and <code>{{ pets }}</code> and loop through them etc. You can make more complex look ups using <code>Q</code> objects. <a href=\"https://docs.djangoproject.com/en/2.1/topics/db/queries/#complex-lookups-with-q-objects\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/2.1/topics/db/queries/#complex-lookups-with-q-objects</a> </p>\n\n<blockquote>\n  <p>[..] what I want to do is submit my query through my Django form</p>\n</blockquote>\n\n<p>Again you can get the data from the form submission and place it into a query</p>\n\n<pre><code>def user_input(request):\n    # if this is a POST request we need to process the form data\n    if request.method == 'POST':\n        context = {}\n        # create a form instance and populate it with data from the request:\n        form = NameForm(request.POST)\n        # check whether it's valid:\n        if form.is_valid():\n            pet_name = form.cleaned_data.get('pet_name') # get the name entered into the pet name form field\n            person_name = form.cleaned_data.get('person_name')\n            context['pets'] = Pet.objects.filter(name=pet_name)\n            context['people'] = Person.objects.filter(name=person_name)\n            return render(request, index.html, context)\n    # if a GET (or any other method) we'll create a blank form\n    else:\n        form = NameForm()\n    return render(request, 'name.html', {'form': form}) \n</code></pre>\n\n<p>Again you would access the returned queries via the context you pass to the template. Also can build complex queries using Q objects. \nsee docs for info <a href=\"https://docs.djangoproject.com/en/2.1/topics/forms/#the-view\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/2.1/topics/forms/#the-view</a></p>\n"}], "owner": {"reputation": 169, "user_id": 7173617, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-IHiaBiyQH-Q/AAAAAAAAAAI/AAAAAAAAAGA/OHVb8rV56eM/photo.jpg?sz=128", "display_name": "Owais Arshad", "link": "https://stackoverflow.com/users/7173617/owais-arshad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 951, "favorite_count": 1, "accepted_answer_id": 54014699, "answer_count": 1, "score": 1, "last_activity_date": 1546473240, "creation_date": 1546463554, "last_edit_date": 1546468438, "question_id": 54013258, "link": "https://stackoverflow.com/questions/54013258/how-to-run-query-against-multiple-django-models-in-a-view", "title": "How to Run Query Against Multiple Django Models in a View", "body": "<p>How can I run a query against multiple Django models and display them through a template?</p>\n\n<p>I have created two models, which I can query independently and render a response in their respective templates. However, what I want to do is submit my query through my Django form, have the query run against both models, and then have the results, if any, displayed on a single template. How can I achieve this?</p>\n\n<p><strong>Models:</strong></p>\n\n<pre><code>class State(models.Model):\n    text = models.TextField(null=True)\n    topic_list = models.TextField(null=True)\n\nclass Hearings(models.Model):\n    url = models.TextField(primary_key=True)\n    title = models.TextField(null=True)\n    text = models.TextField(null=True)  \n</code></pre>\n\n<p><strong>Views:</strong></p>\n\n<pre><code>def state(request,query):\n  data = state.objects.filter(text__icontains=query).values('text','topic_list')\n  return render(request,'State.html',context={'data':data})\n\ndef hearings(request,query):\n  data = Hearings.objects.filter(data__icontains=query).values('url','title', 'text')\n  return render(request,'Hearings.html',context={'data':data})\n</code></pre>\n\n<p>Currently, I can query the models separately through my views. I want to run my query through a single view against both models. How should I do this?</p>\n"}, {"tags": ["python", "paramiko"], "comments": [{"owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1546464302, "post_id": 54013257, "comment_id": 94863692, "body": "Can you get the output continuously (not at once) using any other way? Like using command-line <code>ssh</code> or <code>plink</code>?"}, {"owner": {"reputation": 1079, "user_id": 5451769, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f31eddf72e779f7ba6fa057824f4758d?s=128&d=identicon&r=PG&f=1", "display_name": "kdheepak", "link": "https://stackoverflow.com/users/5451769/kdheepak"}, "reply_to_user": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1546464823, "post_id": 54013257, "comment_id": 94863893, "body": "If I ssh into the remote machine as an interactive session, and then cd into the folder and run the <code>python test_worker.py</code>, I&#39;m able to get the output continuously. I can try other methods now."}, {"owner": {"reputation": 1079, "user_id": 5451769, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f31eddf72e779f7ba6fa057824f4758d?s=128&d=identicon&r=PG&f=1", "display_name": "kdheepak", "link": "https://stackoverflow.com/users/5451769/kdheepak"}, "reply_to_user": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1546465674, "post_id": 54013257, "comment_id": 94864194, "body": "If I run this <code>ssh hostname.of.server.here python &#47;path&#47;to&#47;folder&#47;test_worker.py</code>, I get the output all at once, and not continuously. However, if I use <code>ssh -t hostname.of.server.here python &#47;path&#47;to&#47;folder&#47;test_worker.py</code>, I get the output continuously. Hmm. So do I HAVE to force pseudo-tty allocation in order to get the stdout and stderr back continuously?"}, {"owner": {"reputation": 1079, "user_id": 5451769, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f31eddf72e779f7ba6fa057824f4758d?s=128&d=identicon&r=PG&f=1", "display_name": "kdheepak", "link": "https://stackoverflow.com/users/5451769/kdheepak"}, "reply_to_user": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1546465851, "post_id": 54013257, "comment_id": 94864280, "body": "I was able to use <code>ssh_stdin, ssh_stdout, ssh_stderr = ssh.exec_command(command, get_pty=True)</code> to solve this."}], "answers": [{"comments": [{"owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1546497632, "post_id": 54013642, "comment_id": 94871339, "body": "Beware, that using get_pty can bring you nasty side effects. Did you try changing <code>test_worker.py</code> to flush its output using <code>sys.stdout.flush()</code>?"}, {"owner": {"reputation": 1079, "user_id": 5451769, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f31eddf72e779f7ba6fa057824f4758d?s=128&d=identicon&r=PG&f=1", "display_name": "kdheepak", "link": "https://stackoverflow.com/users/5451769/kdheepak"}, "reply_to_user": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1546585890, "post_id": 54013642, "comment_id": 94904502, "body": "I haven&#39;t tried that yet. I will and get back to you. Can you elaborate on what side effects get_pty has?"}, {"owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1546588901, "post_id": 54013642, "comment_id": 94905474, "body": "PTY signalizes to the server that the client is used interactively by a human (what is not true in your case). That can make the server use lots techniques to make the experience better for the human. Those techniques can easily break your code. They includes things like coloring the output using ANSI escape sequences. Paginating the output (waiting for key press once a [non existent] screen fills). Etc. Moreover these techniques can &quot;improve&quot; when the server gets upgraded, so your code can break any time in future, when the upgrade occurs. You should never enable PTY when automating."}], "tags": [], "owner": {"reputation": 1079, "user_id": 5451769, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f31eddf72e779f7ba6fa057824f4758d?s=128&d=identicon&r=PG&f=1", "display_name": "kdheepak", "link": "https://stackoverflow.com/users/5451769/kdheepak"}, "is_accepted": false, "score": 0, "last_activity_date": 1546465905, "creation_date": 1546465905, "answer_id": 54013642, "question_id": 54013257, "link": "https://stackoverflow.com/questions/54013257/unable-to-read-stdout-and-stderr-for-a-long-running-process-in-paramiko-with-cha/54013642#54013642", "title": "Unable to read stdout and stderr for a long running process in paramiko with channels and exec_command", "body": "<p>I believe you have to get_pty if you want to read continuous values. You can do the following:</p>\n\n<pre><code>ssh_stdin, ssh_stdout, ssh_stderr = ssh.exec_command(command, get_pty=True)\n</code></pre>\n"}], "owner": {"reputation": 1079, "user_id": 5451769, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f31eddf72e779f7ba6fa057824f4758d?s=128&d=identicon&r=PG&f=1", "display_name": "kdheepak", "link": "https://stackoverflow.com/users/5451769/kdheepak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 426, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1546465905, "creation_date": 1546463552, "question_id": 54013257, "link": "https://stackoverflow.com/questions/54013257/unable-to-read-stdout-and-stderr-for-a-long-running-process-in-paramiko-with-cha", "title": "Unable to read stdout and stderr for a long running process in paramiko with channels and exec_command", "body": "<p>I am running to run a long running process on a server (a remote machine) from a Python process on my machine (the local machine). </p>\n\n<p>I'm able to start and execute the process successfully using Paramiko's <code>exec_command</code> function, and it works great. However, the code that I am running on the remote machine is a long running process, and I wish to perform some checks on the output / the log. That is to say, I want to read the output while it is running and check for certain keywords within the output.</p>\n\n<p>I put together a minimal working example to illustrate this. Instead of checking for certain keywords, I print the output to the screen.</p>\n\n<p>When I run the following, I get all the output together once the process ends. I am not able to get the output as an when it is being printed by the remote process.</p>\n\n<p>I've even tried using <code>setblocking</code> and <code>settimeout</code> to no avail.</p>\n\n<p>I have the following file, that I run from my laptop.</p>\n\n<pre><code>import sys\nimport paramiko\nimport os\nimport select\nimport getpass\nimport time\n\nrpi = {\n    \"username\": getpass.getuser(),\n    \"hostname\": \"hostname.of.server.here\"\n}\n\ncommand = \"cd /path/to/folder/ &amp;&amp; python test_worker.py\"\nssh = paramiko.SSHClient()\nssh.load_system_host_keys()\nssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nssh.connect(**rpi)\nssh_stdin, ssh_stdout, ssh_stderr = ssh.exec_command(command)\n\ndef worker(stdout, stderr):\n\n    # Wait for the command to terminate\n    print(\"Status of worker is {}\".format(stdout.channel.exit_status_ready()))\n    while not stdout.channel.exit_status_ready():\n        time.sleep(1)\n        print(\"Status of worker is {}\".format(stdout.channel.exit_status_ready()))\n        if stdout.channel.recv_ready():\n            # Only print data if there is data to read in the channel\n            print(\"Worker stdout.channel.recv_ready: {}\".format(stdout.channel.recv_ready()))\n            rl, wl, xl = select.select([stdout.channel], [], [], 0.0)\n            if len(rl) &gt; 0:\n                # Print data from stdout\n                print(\"Output: {}\".format(stdout.channel.recv(1024).decode(\"utf-8\")))\n\nprint(\"Reading output from master\")\nworker(ssh_stdout, ssh_stderr)\nprint(\"Finished reading output from master\")\n</code></pre>\n\n<p>The test_worker.py file is as follows:</p>\n\n<pre><code>import time\nimport sys\n\ni = 0\n\nwhile True:\n    time.sleep(5)\n    i = i + 5\n    print(\"At time {}\".format(i))\n    if i &gt; 15:\n        sys.exit(0)\n</code></pre>\n\n<p>This is the output I get at the moment,</p>\n\n<pre><code>$ python paramiko_runner.py                                                                                                                                                                                                                    \nReading output from master\nWorker function printer\nStatus of worker is False\nStatus of worker is False\nStatus of worker is False\nStatus of worker is False\nStatus of worker is False\nStatus of worker is False\nStatus of worker is False\nStatus of worker is False\nStatus of worker is False\nStatus of worker is False\nStatus of worker is False\nStatus of worker is False\nStatus of worker is False\nStatus of worker is False\nStatus of worker is False\nStatus of worker is False\nStatus of worker is False\nStatus of worker is False\nStatus of worker is False\nStatus of worker is False\nStatus of worker is False\nStatus of worker is False\nStatus of worker is True\nWorker stdout.channel.recv_ready: True\nOutput: At time 5\nAt time 10\nAt time 15\nAt time 20\n\nFinished reading output from master\n</code></pre>\n"}, {"tags": ["python", "hive", "pyspark"], "answers": [{"tags": [], "owner": {"reputation": 399, "user_id": 2283314, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/67692b385cc73f1b6d6bcb24b13bfc37?s=128&d=identicon&r=PG", "display_name": "Antonio Cachuan", "link": "https://stackoverflow.com/users/2283314/antonio-cachuan"}, "is_accepted": false, "score": 0, "last_activity_date": 1546524436, "creation_date": 1546524436, "answer_id": 54023916, "question_id": 54013242, "link": "https://stackoverflow.com/questions/54013242/hivecontext-not-keeping-sparkcontext-conf/54023916#54023916", "title": "HiveContext not keeping SparkContext conf", "body": "<p>If is possible use <code>SparkSession</code> (available since Spark 2.0) instead of <code>SparkContext</code>, so you may add configurations within .conf </p>\n\n<pre><code>from pyspark.sql import SparkSession\nwarehouseLocation = \"/hive/user/location\"\nspark2 = SparkSession\\\n.builder.appName(\"SparkAppName\")\\\n.config(\"spark.sql.warehouse.dir\", warehouseLocation)\\\n.config(\"spark.executor.memory\", \"2g\")\\\n.config(\"spark.executor.executor\", \"3g\")\\\n.enableHiveSupport()\\\n.getOrCreate()\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10787528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed3631471e2b8612ee12416015641bb3?s=128&d=identicon&r=PG&f=1", "display_name": "ChuckF", "link": "https://stackoverflow.com/users/10787528/chuckf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546524436, "creation_date": 1546463464, "last_edit_date": 1546464646, "question_id": 54013242, "link": "https://stackoverflow.com/questions/54013242/hivecontext-not-keeping-sparkcontext-conf", "title": "HiveContext not keeping SparkContext conf", "body": "<p>I am unable to adjust the executor and driver memories.</p>\n\n<pre><code> from pyspark import SparkContext, SparkConf\n from pyspark.sql import HiveContext  \n\n conf = pyspark.SparkConf().setAll([('spark.executor.memory', '2g'),('spark.driver.memory','2g')])\n sc.stop() \n\n sc = pyspark.SparkContext(conf=conf)\n sc._conf.getAll()\n hc = HiveContext(sc)\n sc._conf.getAll()\n</code></pre>\n\n<p>When <code>sc._conf.getAll()</code> is ran prior to <code>hc = HiveContext(sc)</code>, I can see that my memories have been adjusted as needed. However when <code>sc._conf.getAll()</code> is run after <code>hc = HiveContext(sc)</code> the memories revert to the default.</p>\n"}, {"tags": ["python", "pytest"], "answers": [{"tags": [], "owner": {"reputation": 5785, "user_id": 7306999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9dNzL.jpg?s=128&g=1", "display_name": "Xukrao", "link": "https://stackoverflow.com/users/7306999/xukrao"}, "is_accepted": true, "score": 5, "last_activity_date": 1546463465, "creation_date": 1546463465, "answer_id": 54013243, "question_id": 54013175, "link": "https://stackoverflow.com/questions/54013175/pytest-how-to-make-a-temporary-drive-in-a-different-location-other-than-c-drive/54013243#54013243", "title": "Pytest, How to make a temporary drive in a different location other than C drive: Windows", "body": "<p>From the <a href=\"https://docs.pytest.org/en/latest/tmpdir.html#the-default-base-temporary-directory\" rel=\"noreferrer\">pytest documentation</a>:</p>\n\n<blockquote>\n  <h2>The default base temporary directory</h2>\n  \n  <p>Temporary directories are by default created as sub-directories of the\n  system temporary directory. The base name will be <code>pytest-NUM</code> where <code>NUM</code>\n  will be incremented with each test run. Moreover, entries older than 3\n  temporary directories will be removed.</p>\n  \n  <p>You can override the default temporary directory setting like this:</p>\n  \n  <p><code>pytest --basetemp=mydir</code></p>\n  \n  <p>When distributing tests on the local machine, <code>pytest</code> takes care to\n  configure a basetemp directory for the sub processes such that all\n  temporary data lands below a single per-test run basetemp directory.</p>\n</blockquote>\n"}], "owner": {"reputation": 3329, "user_id": 6814154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b76e235219baaddb83f38d12e6665fbc?s=128&d=identicon&r=PG&f=1", "display_name": "Khalil Al Hooti", "link": "https://stackoverflow.com/users/6814154/khalil-al-hooti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 54013243, "answer_count": 1, "score": 2, "last_activity_date": 1546463926, "creation_date": 1546463148, "last_edit_date": 1546463926, "question_id": 54013175, "link": "https://stackoverflow.com/questions/54013175/pytest-how-to-make-a-temporary-drive-in-a-different-location-other-than-c-drive", "title": "Pytest, How to make a temporary drive in a different location other than C drive: Windows", "body": "<p>I am trying to create a temporary directory in a drive other than the C Drive using pytest.</p>\n\n<p>The normal way to create a temporary drive ac according to my knowledge is as below:</p>\n\n<pre><code>@pytest.fixture\ndef copy_path_file(qtbot, request, tmpdir):\n    \"\"\"Setup Project widget.\"\"\"\n    directory = request.node.get_marker('change_directory')\n    if directory:\n        project_dir = to_text_string(tmpdir.mkdir('project'))\n    else:\n        project_dir = None\n</code></pre>\n\n<p>The temporary drive using this method is created in drive C. of the windows system drive, but I want to create a temporary drive in D, for example.</p>\n\n<p>Does anyone have experience with pytest? Thanks in advance.</p>\n"}, {"tags": ["python", "bokeh", "scatter-plot"], "comments": [{"owner": {"reputation": 115, "user_id": 6539515, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/905540260a3c31c9ead9b6b20475076d?s=128&d=identicon&r=PG&f=1", "display_name": "JeremyD", "link": "https://stackoverflow.com/users/6539515/jeremyd"}, "edited": false, "score": 0, "creation_date": 1546954393, "post_id": 54013172, "comment_id": 95017771, "body": "I&#39;m guessing from the crickets that this is not possible. Can bokeh handle scatter plots with multiple y values for each x value? With categorical data?"}, {"owner": {"reputation": 115, "user_id": 6539515, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/905540260a3c31c9ead9b6b20475076d?s=128&d=identicon&r=PG&f=1", "display_name": "JeremyD", "link": "https://stackoverflow.com/users/6539515/jeremyd"}, "edited": false, "score": 0, "creation_date": 1547041878, "post_id": 54013172, "comment_id": 95055414, "body": "For anyone who is trying to accomplish similar, I was not able to get this approach to work. I instead wrote a generator function to create a pandas dataframe which I then fed back to the glyph renderer using the ColumnDataSource object. I will post a minimal example below."}], "answers": [{"tags": [], "owner": {"reputation": 115, "user_id": 6539515, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/905540260a3c31c9ead9b6b20475076d?s=128&d=identicon&r=PG&f=1", "display_name": "JeremyD", "link": "https://stackoverflow.com/users/6539515/jeremyd"}, "is_accepted": true, "score": 0, "last_activity_date": 1547042079, "creation_date": 1547042079, "answer_id": 54111761, "question_id": 54013172, "link": "https://stackoverflow.com/questions/54013172/using-for-loop-generator-to-make-bokeh-scatter-plot-with-categorical-values/54111761#54111761", "title": "Using for loop generator to make Bokeh scatter plot with categorical values", "body": "<p>The ColumnDataSource object must be used. Here is a way to implement a generator for y values with categorical x values using a pandas dataframe.</p>\n\n<pre><code>import pandas\nfrom bokeh.plotting import figure, show\nfrom bokeh.models import ColumnDataSource\nfrom random import randrange\n\nxvals = ['one', 'two', 'three', 'four']\nyvals = []\n\n#Here is the generator function\nfor num in xvals:\n    yvals.append(randrange(0,10))\n\n#Construct a dataframe from generator function        \ndf=pandas.DataFrame({'XVals': xvals, 'YVals': yvals})\nsource = ColumnDataSource(df)\n\n#Create the plot\np = figure(x_range=xvals)\np.circle(x='XVals',y='YVals', source=source)\nshow(p)\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 6539515, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/905540260a3c31c9ead9b6b20475076d?s=128&d=identicon&r=PG&f=1", "display_name": "JeremyD", "link": "https://stackoverflow.com/users/6539515/jeremyd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 461, "favorite_count": 0, "accepted_answer_id": 54111761, "answer_count": 1, "score": 0, "last_activity_date": 1547042079, "creation_date": 1546463122, "question_id": 54013172, "link": "https://stackoverflow.com/questions/54013172/using-for-loop-generator-to-make-bokeh-scatter-plot-with-categorical-values", "title": "Using for loop generator to make Bokeh scatter plot with categorical values", "body": "<p>I would like to use a loop as a generator to create individual glyphs to generate a scatter plot. My x values are categorical values. I'm starting from the following simple example.</p>\n\n<pre><code>from bokeh.plotting import figure, show\n\nxvals = ['one', 'two', 'three']\np = figure(x_range=xvals)\n\ni=1\nfor value in xvals:\n   p.circle(x=value,y=i)\n   i+=1\n\nshow(p)\n</code></pre>\n\n<p>This results in Bokeh throwing the error:</p>\n\n<blockquote>\n  <p>Bokeh Error attempted to retrieve property array for nonexistent field\n  'one'</p>\n</blockquote>\n\n<p>I'm guessing this can be sorted by using columndatasource and passing it as the source to the glyph rendering function. I've tried various ways to structure the data and pass it to the renderer, but without luck. The columndatasource object wants to be passed a dictionary with the format:</p>\n\n<pre><code>data = {'x_values': [1, 2, 3, 4, 5],\n    'y_values': [6, 7, 2, 3, 6]}\n</code></pre>\n\n<p>I am not able to call a complete list of y values before the generator as they will be computed during the loop in my real function. Is there any way around this? This is super easy to do with pyplot, but I need to use Bokeh for its interactive plots.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "keras"], "comments": [{"owner": {"reputation": 13641, "user_id": 1462770, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/76341613319a6f7f72272303ad28748c?s=128&d=identicon&r=PG&f=1", "display_name": "Amir", "link": "https://stackoverflow.com/users/1462770/amir"}, "edited": false, "score": 0, "creation_date": 1546463213, "post_id": 54013147, "comment_id": 94863247, "body": "Take a look at here: <a href=\"https://stackoverflow.com/questions/36991552/keras-sentiment-analysis-with-lstm-how-to-test-it\" title=\"keras sentiment analysis with lstm how to test it\">stackoverflow.com/questions/36991552/&hellip;</a>"}, {"owner": {"reputation": 27, "user_id": 2986503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b895151ca9d98b069b82eadee755905f?s=128&d=identicon&r=PG&f=1", "display_name": "user2986503", "link": "https://stackoverflow.com/users/2986503/user2986503"}, "reply_to_user": {"reputation": 13641, "user_id": 1462770, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/76341613319a6f7f72272303ad28748c?s=128&d=identicon&r=PG&f=1", "display_name": "Amir", "link": "https://stackoverflow.com/users/1462770/amir"}, "edited": false, "score": 0, "creation_date": 1546532600, "post_id": 54013147, "comment_id": 94888526, "body": "I added this part of code at the end but it gives me error: &#39;str&#39; object has no attribute &#39;ndim&#39; <code>sample = &#39;Elmas doo&#39; sample_label = &#39;n&#39; inps = [tokenizer.word_index[word] for word in sample.split() if word in tokenizer.word_index] inps = keras.preprocessing.sequence.pad_sequences([inps], maxlen=500) print(&#39;Accuracy:&#39;, model.evaluate(inps, [sample_label], batch_size=1)[1]) print(&#39;Sentiment score: {}&#39;.format(model.predict(inps)[0][0]))</code>"}], "owner": {"reputation": 27, "user_id": 2986503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b895151ca9d98b069b82eadee755905f?s=128&d=identicon&r=PG&f=1", "display_name": "user2986503", "link": "https://stackoverflow.com/users/2986503/user2986503"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 205, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1546462974, "creation_date": 1546462974, "question_id": 54013147, "link": "https://stackoverflow.com/questions/54013147/using-trained-model-for-prediction-of-tags", "title": "Using trained model for prediction of tags", "body": "<p>I have dataset with two columns, post and tags (\"some text\",\"tag\"), and I have successfully trained model with 98% accuracy.The problem is how can I now input some other text and let model to predict what tag will it be?\nI've searched tutorials but I didn't find in any of them (in few there is testing but it is not applicable in this example) how the model is tested with data outside of dataset like text input so model could predict.\nThis is what I have so far....</p>\n\n<pre><code>import keras \nimport numpy as np\nfrom keras.preprocessing.text import Tokenizer\nimport numpy as np\nimport pandas as pd\nfrom keras.models import Sequential\nfrom keras.layers import Dense\nfrom keras.preprocessing.sequence import pad_sequences\nfrom keras.layers import Input, Dense, Dropout, Embedding, LSTM, Flatten\nfrom keras.models import Model\nfrom keras.utils import to_categorical\nfrom keras.callbacks import ModelCheckpoint\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.metrics import accuracy_score\ndata = pd.read_csv('dataset3.csv')\nprint(data.head(10))\nprint(data.tags.value_counts())\ndata['target'] = data.tags.astype('category').cat.codes\ndata['num_words'] = data.post.apply(lambda x : len(x.split()))\nbins=[0,50,75, np.inf]\ndata['bins']=pd.cut(data.num_words, bins=[0,100,300,500,800, np.inf], labels=['0-100', '100-300', '300-500','500-800' ,'&gt;800'])\nword_distribution = data.groupby('bins').size().reset_index().rename(columns={0:'counts'})\nword_distribution.head()\nnum_class = len(np.unique(data.tags.values))\ny = data['target'].values\nMAX_LENGTH = 500\ntokenizer = Tokenizer()\ntokenizer.fit_on_texts(data.post.values)\npost_seq = tokenizer.texts_to_sequences(data.post.values)\npost_seq_padded = pad_sequences(post_seq, maxlen=MAX_LENGTH)\nX_train, X_test, y_train, y_test = train_test_split(post_seq_padded, y, test_size=0.05)\nvocab_size = len(tokenizer.word_index) + 1\ninputs = Input(shape=(MAX_LENGTH, ))\nembedding_layer = Embedding(vocab_size,\n                            128,\n                            input_length=MAX_LENGTH)(inputs)\nx = Flatten()(embedding_layer)\nx = Dense(32, activation='relu')(x)\n\npredictions = Dense(num_class, activation='softmax')(x)\nmodel = Model(inputs=[inputs], outputs=predictions)\nmodel.compile(optimizer='adam',\n              loss='categorical_crossentropy',\n              metrics=['acc'])\n\nmodel.summary()\nfilepath=\"weights-simple.hdf5\"\ncheckpointer = ModelCheckpoint(filepath, monitor='val_acc', verbose=1, save_best_only=True, mode='max')\nhistory = model.fit([X_train], batch_size=64, y=to_categorical(y_train), verbose=1, validation_split=0.25, \n          shuffle=True, epochs=5, callbacks=[checkpointer])\ndf = pd.DataFrame({'epochs':history.epoch, 'accuracy': history.history['acc'], 'validation_accuracy': history.history['val_acc']})\ng = sns.pointplot(x=\"epochs\", y=\"accuracy\", data=df, fit_reg=False)\ng = sns.pointplot(x=\"epochs\", y=\"validation_accuracy\", data=df, fit_reg=False, color='green')\npredicted = model.predict(X_test)\npredicted = np.argmax(predicted, axis=1)\naccuracy_score(y_test, predicted)   \n</code></pre>\n"}, {"tags": ["python", "django", "heroku"], "comments": [{"owner": {"reputation": 2007, "user_id": 599813, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e172019aa2744d4dbe5bbff918f79ace?s=128&d=identicon&r=PG", "display_name": "Victor &#39;Chris&#39; Cabral", "link": "https://stackoverflow.com/users/599813/victor-chris-cabral"}, "edited": false, "score": 1, "creation_date": 1546463051, "post_id": 54013112, "comment_id": 94863182, "body": "Did you try and host your static content from another source? When debug is set to false it might be that your static home is not being served."}, {"owner": {"reputation": 632, "user_id": 8876777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PPhmG.png?s=128&g=1", "display_name": "coderDude", "link": "https://stackoverflow.com/users/8876777/coderdude"}, "edited": false, "score": 2, "creation_date": 1546463576, "post_id": 54013112, "comment_id": 94863403, "body": "what is the error? Please share traceback from logs if possible."}, {"owner": {"reputation": 51, "user_id": 6210879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5731a67240e5eaa64072d7217604f07f?s=128&d=identicon&r=PG&f=1", "display_name": "user6210879", "link": "https://stackoverflow.com/users/6210879/user6210879"}, "edited": false, "score": 0, "creation_date": 1546476612, "post_id": 54013112, "comment_id": 94867187, "body": "What do you mean by another source? I have all my static files contained within my django project in the static folder and set the static root. How would I serve my static home?"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 6210879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5731a67240e5eaa64072d7217604f07f?s=128&d=identicon&r=PG&f=1", "display_name": "user6210879", "link": "https://stackoverflow.com/users/6210879/user6210879"}, "edited": false, "score": 0, "creation_date": 1546476499, "post_id": 54013691, "comment_id": 94867162, "body": "I tried this but still getting the error. Did you follow all of the other steps to configure your static files with whitenoise?"}, {"owner": {"reputation": 41, "user_id": 6056615, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dc71cca3ecb3a7972f56d3374dd1a2f1?s=128&d=identicon&r=PG&f=1", "display_name": "aSoulja", "link": "https://stackoverflow.com/users/6056615/asoulja"}, "reply_to_user": {"reputation": 51, "user_id": 6210879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5731a67240e5eaa64072d7217604f07f?s=128&d=identicon&r=PG&f=1", "display_name": "user6210879", "link": "https://stackoverflow.com/users/6210879/user6210879"}, "edited": false, "score": 0, "creation_date": 1546514949, "post_id": 54013691, "comment_id": 94878805, "body": "To deploy in heroku, I followed this tutorial - <a href=\"https://medium.com/agatha-codes/9-straightforward-steps-for-deploying-your-django-app-with-heroku-82b952652fb4\" rel=\"nofollow noreferrer\">medium.com/agatha-codes/&hellip;</a>"}], "tags": [], "owner": {"reputation": 41, "user_id": 6056615, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dc71cca3ecb3a7972f56d3374dd1a2f1?s=128&d=identicon&r=PG&f=1", "display_name": "aSoulja", "link": "https://stackoverflow.com/users/6056615/asoulja"}, "is_accepted": false, "score": 0, "last_activity_date": 1546466205, "creation_date": 1546466205, "answer_id": 54013691, "question_id": 54013112, "link": "https://stackoverflow.com/questions/54013112/500-server-error-when-debug-false-in-production/54013691#54013691", "title": "500 server error when debug=False in production", "body": "<p>Enable white noise in the middleware.</p>\n\n<p><a href=\"http://whitenoise.evans.io/en/stable/django.html\" rel=\"nofollow noreferrer\">http://whitenoise.evans.io/en/stable/django.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 6210879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5731a67240e5eaa64072d7217604f07f?s=128&d=identicon&r=PG&f=1", "display_name": "user6210879", "link": "https://stackoverflow.com/users/6210879/user6210879"}, "is_accepted": false, "score": 0, "last_activity_date": 1546892594, "creation_date": 1546892594, "answer_id": 54081258, "question_id": 54013112, "link": "https://stackoverflow.com/questions/54013112/500-server-error-when-debug-false-in-production/54081258#54081258", "title": "500 server error when debug=False in production", "body": "<p>Hopefully this helps someone. The problem for me was the forward slash in '/css/layout.css' in my html template (I know.. I'm banging my head against a wall) and commenting out the line: STATICFILES_STORAGE = 'whitenoise.storage.CompressedManifestStaticFilesStorage' in my settings file. Worked perfectly after those two changes. </p>\n"}], "owner": {"reputation": 51, "user_id": 6210879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5731a67240e5eaa64072d7217604f07f?s=128&d=identicon&r=PG&f=1", "display_name": "user6210879", "link": "https://stackoverflow.com/users/6210879/user6210879"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 598, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1546892594, "creation_date": 1546462810, "question_id": 54013112, "link": "https://stackoverflow.com/questions/54013112/500-server-error-when-debug-false-in-production", "title": "500 server error when debug=False in production", "body": "<p>I have been trying for several weeks to resolve an issue with my deployment settings. When debug=True the Heroku app works fine, however, when I change debug to =False I always get a 500 server error. I have tried every suggestion on the other stackoverflow threads regarding this issue and none seem to work for me. Please let me know if you have any suggestions. </p>\n\n<pre><code>\"\"\"\nDjango settings for scipertise_demo project.\n\nGenerated by 'django-admin startproject' using Django 2.0.5.\n\nFor more information on this file, see\nhttps://docs.djangoproject.com/en/2.0/topics/settings/\n\nFor the full list of settings and their values, see\nhttps://docs.djangoproject.com/en/2.0/ref/settings/\n\"\"\"\n\nimport os\nimport django_heroku\nimport dj_database_url\n\n\n# Build paths inside the project like this: os.path.join(BASE_DIR, ...)\nBASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))\n\n\n# Quick-start development settings - unsuitable for production\n# See https://docs.djangoproject.com/en/2.0/howto/deployment/checklist/\n\n#API_KEY ='46235562'\n\n# SECURITY WARNING: keep the secret key used in production secret!\n\nSECRET_KEY = 'SECRET_KEY'\n\n# SECURITY WARNING: don't run with debug turned on in production!\nDEBUG = True\n\nALLOWED_HOSTS = ['*']\n\n\n# Application definition\n\nINSTALLED_APPS = [\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    'django.contrib.sites',\n\n    'pages',\n    'users',\n    'search',\n    'taggit',\n    'booking',\n    'bootstrap4',\n    'bootstrap_datepicker_plus',\n    'widget_tweaks',\n    'sendgrid',\n\n\n\n\n\n]\n\n#HAYSTACK_CONNECTIONS = {\n#    'default': {\n#        'ENGINE': 'haystack.backends.elasticsearch2_backend.Elasticsearch2SearchEngine',\n#        'URL': 'http://127.0.0.1:9200/',\n#        'INDEX_NAME': 'haystack',\n#    },\n#}\n\nCRISPY_TEMPLATE_PACK = 'bootstrap4'\nBOOTSTRAP4 = {\n    'include_jquery': True,\n}\n\nSITE_ID = 1\n\nMIDDLEWARE = [\n    'django.middleware.security.SecurityMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.common.CommonMiddleware',\n    'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    'django.middleware.clickjacking.XFrameOptionsMiddleware',\n\n]\n\nROOT_URLCONF = 'scipertise_demo.urls'\n\nTEMPLATES = [\n    {\n        'BACKEND': 'django.template.backends.django.DjangoTemplates',\n        'DIRS': [os.path.join(BASE_DIR, 'templates')],\n        'APP_DIRS': True,\n        'OPTIONS': {\n            'context_processors': [\n                'django.template.context_processors.debug',\n                'django.template.context_processors.request',\n                'django.contrib.auth.context_processors.auth',\n                'django.contrib.messages.context_processors.messages',\n            ],\n        },\n    },\n]\n\nWSGI_APPLICATION = 'scipertise_demo.wsgi.application'\n\n\n# Database\n# https://docs.djangoproject.com/en/2.0/ref/settings/#databases\n#DATABASES = {\n#    'default': dj_database_url.config(\n#        default=config('DATABASE_URL')\n#    )\n#}\n\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.sqlite3',\n        'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),\n    }\n}\n\n\n# Password validation\n# https://docs.djangoproject.com/en/2.0/ref/settings/#auth-password-validators\n\nAUTH_PASSWORD_VALIDATORS = [\n    {\n        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',\n    },\n]\n\n\n# Internationalization\n# https://docs.djangoproject.com/en/2.0/topics/i18n/\n\nLANGUAGE_CODE = 'en-us'\n\nTIME_ZONE = 'UTC'\n\nUSE_I18N = True\n\nUSE_L10N = True\n\nUSE_TZ = True\n\n\n# Static files (CSS, JavaScript, Images)\n# https://docs.djangoproject.com/en/2.0/howto/static-files/\n\n\nSTATIC_ROOT = os.path.join(BASE_DIR, 'staticfiles')\nSTATIC_URL = '/static/'\n\n# Extra places for collectstatic to find static files.\nSTATICFILES_DIRS = (\n    os.path.join(BASE_DIR, 'static'),\n)\n\nMEDIA_URL = \"/media/\"\n#MEDIA_ROOT = os.path.join(BASE_DIR,'media/')\n\nAUTH_USER_MODEL = 'users.CustomUser'\n\nLOGIN_REDIRECT_URL = 'home'\nLOGOUT_REDIRECT_URL = 'home'\n\nTAGGIT_CASE_INSENSITIVE = True\n\nEMAIL_HOST = 'smtp.sendgrid.net'\nEMAIL_HOST_USER = 'EMAIL_HOST_USER'\nEMAIL_HOST_PASSWORD = 'EMAIL_HOST_PASSWORD'\nEMAIL_PORT = 587\nEMAIL_USE_TLS = True\n\n\nSENDGRID_API_KEY='SENDGRID_API_KEY'\nSENDGRID_PASSWORD='SENDGRID_PASSWORD'\nSENDGRID_USERNAME='SENDGRID_USERNAME'\n\n\n# Activate Django-Heroku.\ndjango_heroku.settings(locals())\n</code></pre>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 13049, "user_id": 10611983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/379cd29e7f3b043f4e563fed697dcf75?s=128&d=identicon&r=PG&f=1", "display_name": "iz_", "link": "https://stackoverflow.com/users/10611983/iz"}, "edited": false, "score": 1, "creation_date": 1546462903, "post_id": 54013093, "comment_id": 94863127, "body": "If <code>==</code> is off limits for string length &gt;1, I would assume <code>!=</code> is also not allowed. It&#39;s essentially <code>not ==</code>."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1546463233, "post_id": 54013093, "comment_id": 94863257, "body": "Using the <code>!=</code> operator on strings longer than one character is pretty obviously against the spirit of the task - you could just do <code>not (x != y)</code> instead of <code>x == y</code> anywhere you want to use <code>==</code>."}, {"owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "edited": false, "score": 1, "creation_date": 1546463261, "post_id": 54013093, "comment_id": 94863270, "body": "<code>if s!=0:</code> is always true since <code>s</code> is a string. So you can never end up in the else part."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1546463269, "post_id": 54013093, "comment_id": 94863274, "body": "Also, <code>s</code> is a string. It&#39;ll never equal <code>0</code>. <code>0</code> isn&#39;t a string."}, {"owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "edited": false, "score": 0, "creation_date": 1546463396, "post_id": 54013093, "comment_id": 94863325, "body": "Is <code>&#39;abcabc&#39;</code> symmetrical by the constraints or do all the nested half strings themselves have to be symmetrical?"}, {"owner": {"reputation": 6489, "user_id": 5086255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XiEYC.jpg?s=128&g=1", "display_name": "sahasrara62", "link": "https://stackoverflow.com/users/5086255/sahasrara62"}, "edited": false, "score": 0, "creation_date": 1546463742, "post_id": 54013093, "comment_id": 94863463, "body": "is there combination of strings here ? substirng of main string ? if yes then doing recursive is waste as dividing half string is waste . to check symtery just do str1=str[::-1] . no need to check half only length criteria to be checked"}, {"owner": {"reputation": 1282, "user_id": 4621345, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-BrAH_VoKIz4/AAAAAAAAAAI/AAAAAAAAAIM/FT9DTnHcXJ8/photo.jpg?sz=128", "display_name": "Kevin Welch", "link": "https://stackoverflow.com/users/4621345/kevin-welch"}, "edited": false, "score": 0, "creation_date": 1546463861, "post_id": 54013093, "comment_id": 94863507, "body": "Your function will never recurse in its current state. Your if condition <code>s[0:len(s)&#47;2] != s[len(s)&#47;2:len(s)]</code> will evaluate to false for &quot;abbaabba&quot;  and then the function returns true 5 lines later. For a failing string such as &quot;aabb&quot; that condition will be true, then the following if condition <code>s != 0</code> will be true, causing it to return false. You never hit your recursive call."}, {"owner": {"reputation": 35, "user_id": 10859687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcb69f8fa5da15e539fd4155a328f269?s=128&d=identicon&r=PG&f=1", "display_name": "Marcus S.", "link": "https://stackoverflow.com/users/10859687/marcus-s"}, "reply_to_user": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "edited": false, "score": 0, "creation_date": 1546464022, "post_id": 54013093, "comment_id": 94863576, "body": "@schwobaseggl, the 2 nested half strings have to be identical in order to return True. Therefore the string itself (s) has to be symmetrical"}, {"owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "edited": false, "score": 0, "creation_date": 1546464132, "post_id": 54013093, "comment_id": 94863625, "body": "@MarcusS. So Hmm.. In <code>abcabc</code> the half strings are identical, but the string isn&#39;t symmetrical. So would that count?"}, {"owner": {"reputation": 35, "user_id": 10859687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcb69f8fa5da15e539fd4155a328f269?s=128&d=identicon&r=PG&f=1", "display_name": "Marcus S.", "link": "https://stackoverflow.com/users/10859687/marcus-s"}, "reply_to_user": {"reputation": 1282, "user_id": 4621345, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-BrAH_VoKIz4/AAAAAAAAAAI/AAAAAAAAAIM/FT9DTnHcXJ8/photo.jpg?sz=128", "display_name": "Kevin Welch", "link": "https://stackoverflow.com/users/4621345/kevin-welch"}, "edited": false, "score": 0, "creation_date": 1546464549, "post_id": 54013093, "comment_id": 94863784, "body": "@KevinWelch, basically the <code>if s!=0:</code> command is useless and I&#39;ve simply solved it without recursion.  Logically speaking this is a pretty easy task to solve. Why then asking to do it using recursion?  Maybe it has something to do with the constraint of the == usage"}, {"owner": {"reputation": 35, "user_id": 10859687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcb69f8fa5da15e539fd4155a328f269?s=128&d=identicon&r=PG&f=1", "display_name": "Marcus S.", "link": "https://stackoverflow.com/users/10859687/marcus-s"}, "reply_to_user": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "edited": false, "score": 0, "creation_date": 1546464707, "post_id": 54013093, "comment_id": 94863842, "body": "@schwobaseggl, my bad. Just the half strings identical, then"}, {"owner": {"reputation": 1282, "user_id": 4621345, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-BrAH_VoKIz4/AAAAAAAAAAI/AAAAAAAAAIM/FT9DTnHcXJ8/photo.jpg?sz=128", "display_name": "Kevin Welch", "link": "https://stackoverflow.com/users/4621345/kevin-welch"}, "edited": false, "score": 0, "creation_date": 1546465843, "post_id": 54013093, "comment_id": 94864273, "body": "Sure this is easy to solve by just evaluating the two halves of the string... the purpose of this problem is to demonstrate an understanding of recursion. The constraints on <code>==</code> are so you have to solve it recursively."}], "answers": [{"tags": [], "owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "is_accepted": false, "score": 6, "last_activity_date": 1546464346, "last_edit_date": 1546464346, "creation_date": 1546463928, "answer_id": 54013324, "question_id": 54013093, "link": "https://stackoverflow.com/questions/54013093/recursive-function-in-python-does-not-call-itself-out/54013324#54013324", "title": "Recursive function in python does not call itself out", "body": "<p>This is a much simplified recursive version that actually uses the single char comparison to reduce the problem size:</p>\n\n<pre><code>def rhs(s):\n    half, rest = divmod(len(s), 2)\n    if rest:  # odd length\n        raise ValueError  # return 'error'\n    if half == 0:  # simplest base case: empty string\n        return True\n    return s[0] == s[half] and rhs(s[1:half] + s[half+1:])\n</code></pre>\n\n<p>It has to be said though that, algorithmically, this problem does not lend itself well to a recursive approach, given the constraints.</p>\n"}, {"tags": [], "owner": {"reputation": 1282, "user_id": 4621345, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-BrAH_VoKIz4/AAAAAAAAAAI/AAAAAAAAAIM/FT9DTnHcXJ8/photo.jpg?sz=128", "display_name": "Kevin Welch", "link": "https://stackoverflow.com/users/4621345/kevin-welch"}, "is_accepted": true, "score": 1, "last_activity_date": 1546465905, "last_edit_date": 1546465905, "creation_date": 1546465297, "answer_id": 54013517, "question_id": 54013093, "link": "https://stackoverflow.com/questions/54013093/recursive-function-in-python-does-not-call-itself-out/54013517#54013517", "title": "Recursive function in python does not call itself out", "body": "<p>Here is another recursive solution. A good rule of thumb when taking a recursive approach is to first think about your <em>base case</em>.</p>\n\n<pre><code>def recursiveHalfString(s):\n    # base case, if string is empty\n    if s == '':\n        return True\n\n    if (len(s))%2==0:\n        if s[0] != s[(len(s)/2)]:\n            return False\n        else:\n            left = s[1:len(s)/2]  # the left half of the string without first char\n            right = s[(len(s)/2)+1: len(s)] # the right half without first char\n            return recursiveHalfString(left + right)\n    else:\n        return \"Error: odd string\"\n\nprint(recursiveHalfString('abbaabba'))   # True\nprint(recursiveHalfString('fail'))       # False\nprint(recursiveHalfString('oddstring'))  # Error: odd string\n</code></pre>\n\n<p>This function will split the string into two halves, compare the first characters and recursively call itself with the two halves concatenated together without the leading characters.</p>\n\n<p>However like stated in another answer, recursion is not necessarily an efficient solution in this case. This approach creates a lot of new strings and is in no way an optimal way to do this. It is for demonstration purposes only.</p>\n"}, {"tags": [], "owner": {"reputation": 121, "user_id": 10286769, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZGBS4z23hYA/AAAAAAAAAAI/AAAAAAAAIYI/_HCCf8Ll3dw/photo.jpg?sz=128", "display_name": "Albert", "link": "https://stackoverflow.com/users/10286769/albert"}, "is_accepted": false, "score": 1, "last_activity_date": 1546466495, "last_edit_date": 1546466495, "creation_date": 1546465837, "answer_id": 54013629, "question_id": 54013093, "link": "https://stackoverflow.com/questions/54013093/recursive-function-in-python-does-not-call-itself-out/54013629#54013629", "title": "Recursive function in python does not call itself out", "body": "<p>Another recursive solution that doesn't involve creating a bunch of new strings might look like:</p>\n\n<pre><code>def recursiveHalfString(s, offset=0):\n    half, odd = divmod(len(s), 2)\n    assert(not odd)\n    if not s or offset &gt; half:\n        return True\n    if s[offset] != s[half + offset]:\n        return False\n    return recursiveHalfString(s, offset + 1)\n</code></pre>\n\n<p>However, as @schwobaseggl suggested, a recursive approach here is a bit clunkier than a simple iterative approach:</p>\n\n<pre><code>def recursiveHalfString(s, offset=0):\n    half, odd = divmod(len(s), 2)\n    assert(not odd)\n    for offset in range(half):\n        if s[offset] != s[half + offset]:\n            return False\n    return True\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 10859687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcb69f8fa5da15e539fd4155a328f269?s=128&d=identicon&r=PG&f=1", "display_name": "Marcus S.", "link": "https://stackoverflow.com/users/10859687/marcus-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 1, "accepted_answer_id": 54013517, "answer_count": 3, "score": 3, "last_activity_date": 1546466495, "creation_date": 1546462698, "last_edit_date": 1546464777, "question_id": 54013093, "link": "https://stackoverflow.com/questions/54013093/recursive-function-in-python-does-not-call-itself-out", "title": "Recursive function in python does not call itself out", "body": "<p>The problem is formulated as follows:</p>\n\n<blockquote>\n  <p>Write a recursive function that, given a string, checks if the string\n  is formed by two halves equal to each other (i.e. s = s1 + s2, with s1\n  = s2), imposing the constraint that the equality operator == can only be applied to strings of length \u22641. If the length of the string is\n  odd, return an error.</p>\n</blockquote>\n\n<p>I wrote this code in Python 2.7 that is correct (it gives me the right answer every time) but does not enter that recursive loop at all. So can I omit that call here?</p>\n\n<pre><code>def recursiveHalfString(s):\n#@param s: string\n#@return bool\n\n if (len(s))%2==0:     #verify if the rest of the division by 2 = 0 (even number)\n\n  if len(s)&lt;=1:        # case in which I can use the == operator\n   if s[0]==s[1]:\n    return True\n   else:\n    return False\n\n  if len(s)&gt;1:                           \n   if s[0:len(s)/2] != s[len(s)/2:len(s)]:     # here I used != instead of ==\n    if s!=0:\n     return False\n    else:\n     return recursiveHalfString(s[0:(len(s)/2)-1]+s[(len(s)/2)+1:len(s)])    # broken call    \n   return True\n\n else:\n   return \"Error: odd string\"\n</code></pre>\n\n<hr>\n\n<p>The expected results are True if the string is like \"abbaabba\" \nor False when it's like anything else not similat to the pattern (\"wordword\")</p>\n"}, {"tags": ["python", "pandas", "openpyxl", "xlrd", "pyexcel"], "comments": [{"owner": {"reputation": 13367, "user_id": 2084384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h5lY8.jpg?s=128&g=1", "display_name": "BoarGules", "link": "https://stackoverflow.com/users/2084384/boargules"}, "edited": false, "score": 1, "creation_date": 1546462896, "post_id": 54013070, "comment_id": 94863121, "body": "I don&#39;t believe this is possible. An <code>.xlsx</code> is an xml file and they have a hierarchical and not necessarily linear structure. I think the simplest approach would be to download it once and convert it to a <code>.csv</code>, which can be split in the way you want."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10332687"}, "reply_to_user": {"reputation": 13367, "user_id": 2084384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h5lY8.jpg?s=128&g=1", "display_name": "BoarGules", "link": "https://stackoverflow.com/users/2084384/boargules"}, "edited": false, "score": 0, "creation_date": 1546462933, "post_id": 54013070, "comment_id": 94863138, "body": "@BoarGules for an incomplete xml file you could create a completed structure though with something like BeautifulSoup, right?"}, {"owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "edited": false, "score": 0, "creation_date": 1546462981, "post_id": 54013070, "comment_id": 94863157, "body": "I saw your last post @DavidL, at this point why would this be better than using pandas?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10332687"}, "reply_to_user": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "edited": false, "score": 0, "creation_date": 1546463015, "post_id": 54013070, "comment_id": 94863175, "body": "@d_kennetz loading the above is instantaneous, whereas loading the above in pandas takes 6s."}, {"owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "edited": false, "score": 0, "creation_date": 1546463083, "post_id": 54013070, "comment_id": 94863200, "body": "certainly but you cannot partially load the file, and your comment above asked if you could recreate the excel using beautfulsoup, at which point would the overhead of that be worth the 6s it takes pandas to load"}, {"owner": {"reputation": 13367, "user_id": 2084384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h5lY8.jpg?s=128&g=1", "display_name": "BoarGules", "link": "https://stackoverflow.com/users/2084384/boargules"}, "edited": false, "score": 0, "creation_date": 1546463114, "post_id": 54013070, "comment_id": 94863212, "body": "@DavidL Yes, in principle you could use BeautifulSoup to parse the file and make a subset of it. But I suspect that is a good deal easier said than done. And row 1000 might still be at the very end of the file."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10332687"}, "reply_to_user": {"reputation": 13367, "user_id": 2084384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h5lY8.jpg?s=128&g=1", "display_name": "BoarGules", "link": "https://stackoverflow.com/users/2084384/boargules"}, "edited": false, "score": 0, "creation_date": 1546463308, "post_id": 54013070, "comment_id": 94863288, "body": "@BoarGules also I believe it&#39;s a zip file, right? In which case downloading the first 5MB or so would be quite problematic I suppose..."}, {"owner": {"reputation": 13367, "user_id": 2084384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h5lY8.jpg?s=128&g=1", "display_name": "BoarGules", "link": "https://stackoverflow.com/users/2084384/boargules"}, "edited": false, "score": 1, "creation_date": 1546463630, "post_id": 54013070, "comment_id": 94863418, "body": "@DavidL Quite right, I&#39;d forgotten that. The data you want would be in <code>xl\\worksheets\\sheet1.xml</code> and you would have to extract that first."}], "answers": [{"tags": [], "owner": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "is_accepted": false, "score": 0, "last_activity_date": 1546509846, "creation_date": 1546509846, "answer_id": 54020034, "question_id": 54013070, "link": "https://stackoverflow.com/questions/54013070/possible-to-read-an-incomplete-excel-file/54020034#54020034", "title": "Possible to read an incomplete excel file?", "body": "<p>OOXML files are zip archives and, unlike gzip files, cannot really be streamed, ie. unpacked while still being transmitted. So, no, you cannot start reading the file while still downloading it.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10332687"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546509846, "creation_date": 1546462555, "question_id": 54013070, "link": "https://stackoverflow.com/questions/54013070/possible-to-read-an-incomplete-excel-file", "title": "Possible to read an incomplete excel file?", "body": "<p>I am currently using <code>openpyxl</code> to read the first 1000 rows of a very large (1GB) excel file. Is it possible to read excel data in openpyxl from an incomplete file? For example, if I only downloaded the first 10MB of the file instead of 1GB. Would there be any way to view the first 1000 of that (incomplete) file?</p>\n\n<p>Currently I'm using:</p>\n\n<pre><code>from openpyxl import load_workbook\nwb = load_workbook('BigFile.xlsx', read_only=True)\nws = wb.worksheets[0]\n</code></pre>\n\n<p>Though I'm open to using another library if it supports reading an incomplete excel file.</p>\n"}, {"tags": ["python", "python-3.x", "performance", "filter"], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 9368760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2745aefd0c41a0f61edbf10624e8edfa?s=128&d=identicon&r=PG&f=1", "display_name": "Bulat", "link": "https://stackoverflow.com/users/9368760/bulat"}, "edited": false, "score": 0, "creation_date": 1546527332, "post_id": 54013080, "comment_id": 94885712, "body": "It helps to organise together all of the testing statements. But it still includes looping over the whole list elements one by one. Is it the only way?"}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 2, "last_activity_date": 1546462919, "last_edit_date": 1546462919, "creation_date": 1546462618, "answer_id": 54013080, "question_id": 54012998, "link": "https://stackoverflow.com/questions/54012998/increasing-efficiency-of-a-string-filter/54013080#54013080", "title": "Increasing efficiency of a string filter", "body": "<p>yes, there is. You have to avoid testing if string contains a string, but rather focus on string <em>equality</em>.</p>\n\n<p>Once you settle for equality, it means that you can create a set with the known keywords, split according to <code>=</code> and test if the set contains your value (using <code>O(1)</code> lookup):</p>\n\n<pre><code>key_set = {\"fgddd\",\"#j\"}\n\nfor st in cn:\n    if '=' in st:\n       key,value = st.split(\"=\",1)\n       if key in key_set:\n           el = value.strip()\n           yield float(el)\n</code></pre>\n\n<p>if you have different types, use a dictionary to convert to the proper type according to the key</p>\n\n<pre><code>key_set = {\"fgddd\":float ,\"#j\": float, \"whatever\":int , \"something\":str}\n\nfor st in cn:\n    if '=' in st:\n       key,value = st.split(\"=\",1)\n       if key in key_set:\n           el = value.strip()\n           yield key_set[key](el)  # apply type conversion\n</code></pre>\n\n<p>note that if you don't want any conversion, <code>str</code> will do the job as it returns itself when passed a string.</p>\n\n<p>final note: if you have a say on the input format, suggest to use <code>json</code> instead of a custom format. Parsing becomes trivial using <code>json</code> module, and filtering can be achieved by the same way I've shown.</p>\n"}], "owner": {"reputation": 85, "user_id": 9368760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2745aefd0c41a0f61edbf10624e8edfa?s=128&d=identicon&r=PG&f=1", "display_name": "Bulat", "link": "https://stackoverflow.com/users/9368760/bulat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1546462919, "creation_date": 1546462177, "question_id": 54012998, "link": "https://stackoverflow.com/questions/54012998/increasing-efficiency-of-a-string-filter", "title": "Increasing efficiency of a string filter", "body": "<p>I have a long text file containing a number of strings. Here is the part of the file:</p>\n\n<pre><code>tyh89= 13\nkb2= 0\n78%= yes\n##@bb1= 7634.0\niih54= 121\nfgddd= no\n#aa1= 0\n#aa2= 1\n#$ac3= 0\nyt#@hh= 0\n#j= 12.1\n##hf= no\n</code></pre>\n\n<p>So, basically all elements have a common structure of: <code>header= value</code>. My goal is to search for elements, whose headers contain specific string parts and read out those elements' values.</p>\n\n<p>A the moment I do it with a rather straight approach: open/read the whole file as a string, differentiate it into list of elements and run if/elif conditions over all elements using a for loop. I provide my code below.</p>\n\n<p><strong>Is it the most efficient way to do it? Or is there a more efficient way to do it with not implementing the loop?</strong></p>\n\n<pre><code>def main():\n    print(list(import_param()))\n\ndef import_param():\n    fl = open('filename','r')\n    cn = fl.read()\n    cn = cn.split('\\n')\n    fl.close()\n    for st in cn:\n        if 'fgddd' in st:\n            el = st.split(' ')\n            yield float(el[1])\n        elif '#j' in st:\n            el = st.split(' ')\n            yield float(el[1])    \n\nif __name__ == '__main__': main()\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 2, "creation_date": 1546462314, "post_id": 54012993, "comment_id": 94862884, "body": "Looks OK to me.  What&#39;s the problem?"}, {"owner": {"reputation": 13, "user_id": 10859674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9525cf3eb91b72e619024880c27da57?s=128&d=identicon&r=PG&f=1", "display_name": "KEO1", "link": "https://stackoverflow.com/users/10859674/keo1"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1546469415, "post_id": 54012993, "comment_id": 94865511, "body": "Oh sorry it&#39;s the b&#39;\\n&#39; in the output that is the issue."}, {"owner": {"reputation": 20427, "user_id": 2570261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e71068b09fc539447a0cee3e99fc419d?s=128&d=identicon&r=PG&f=1", "display_name": "Haleemur Ali", "link": "https://stackoverflow.com/users/2570261/haleemur-ali"}, "edited": false, "score": 0, "creation_date": 1546470189, "post_id": 54012993, "comment_id": 94865740, "body": "you need to convert from bytes to string and then strip the new line"}, {"owner": {"reputation": 13, "user_id": 10859674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9525cf3eb91b72e619024880c27da57?s=128&d=identicon&r=PG&f=1", "display_name": "KEO1", "link": "https://stackoverflow.com/users/10859674/keo1"}, "edited": false, "score": 0, "creation_date": 1546470924, "post_id": 54012993, "comment_id": 94865929, "body": "if I use get_version.read().decode(&quot;utf-8&quot;) I just get b&#39; &#39;"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10859674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9525cf3eb91b72e619024880c27da57?s=128&d=identicon&r=PG&f=1", "display_name": "KEO1", "link": "https://stackoverflow.com/users/10859674/keo1"}, "edited": false, "score": 0, "creation_date": 1546470502, "post_id": 54014299, "comment_id": 94865817, "body": "No terminal output Just b&#39; &#39;"}, {"owner": {"reputation": 146, "user_id": 10852718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AzQkx.jpg?s=128&g=1", "display_name": "kuhnertdm", "link": "https://stackoverflow.com/users/10852718/kuhnertdm"}, "reply_to_user": {"reputation": 13, "user_id": 10859674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9525cf3eb91b72e619024880c27da57?s=128&d=identicon&r=PG&f=1", "display_name": "KEO1", "link": "https://stackoverflow.com/users/10859674/keo1"}, "edited": false, "score": 0, "creation_date": 1546470855, "post_id": 54014299, "comment_id": 94865903, "body": "The way you&#39;re using it in the original code snippet is incorrect. decode does not work in-place, but rather returns the string. So you need to assign that value."}, {"owner": {"reputation": 13, "user_id": 10859674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9525cf3eb91b72e619024880c27da57?s=128&d=identicon&r=PG&f=1", "display_name": "KEO1", "link": "https://stackoverflow.com/users/10859674/keo1"}, "edited": false, "score": 0, "creation_date": 1546471975, "post_id": 54014299, "comment_id": 94866226, "body": "YES. Thank you."}], "tags": [], "owner": {"reputation": 146, "user_id": 10852718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AzQkx.jpg?s=128&g=1", "display_name": "kuhnertdm", "link": "https://stackoverflow.com/users/10852718/kuhnertdm"}, "is_accepted": true, "score": 1, "last_activity_date": 1546470069, "creation_date": 1546470069, "answer_id": 54014299, "question_id": 54012993, "link": "https://stackoverflow.com/questions/54012993/fetch-version-number-from-github-repository/54014299#54014299", "title": "Fetch version number from GitHub repository", "body": "<p>That is a \"bytes\" type value. You need to call the decode function on it to turn it into a string.</p>\n\n<pre><code>myBytesVal = myBytesVal.decode('utf-8')\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10859674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9525cf3eb91b72e619024880c27da57?s=128&d=identicon&r=PG&f=1", "display_name": "KEO1", "link": "https://stackoverflow.com/users/10859674/keo1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 54014299, "answer_count": 1, "score": 1, "last_activity_date": 1546470069, "creation_date": 1546462153, "last_edit_date": 1546469893, "question_id": 54012993, "link": "https://stackoverflow.com/questions/54012993/fetch-version-number-from-github-repository", "title": "Fetch version number from GitHub repository", "body": "<p>I'm having trouble fetching the current version number of my application from a text file in the repository on my GitHub account.</p>\n\n<pre><code>def version_check(self):\n    # Fetch version number from GitHub repo\n\n    get_version = urlopen('https://raw.githubusercontent.com/myaccount/myproject/master/VERSION')\n    #get_version.read().decode(\"utf-8\") (No terminal output)\n    print(get_version.read())\n    print(get_version.headers['content-type'])\n\n    #if get_version.read() == version_number:\n    #    return True\n    #else:\n    #    return False\n</code></pre>\n\n<p>I get this terminal output:</p>\n\n<pre><code>    b'1.6\\n'\n    text/plain; charset=utf-8\n</code></pre>\n\n<p>How do I format the output? I believe they are bytes literals but I'm stumped on finding the solution.</p>\n"}, {"tags": ["python", "python-2.7"], "answers": [{"tags": [], "owner": {"reputation": 7081, "user_id": 789671, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/feaaeb3d021966d84450cbfb24b1824a?s=128&d=identicon&r=PG", "display_name": "glibdud", "link": "https://stackoverflow.com/users/789671/glibdud"}, "is_accepted": false, "score": 0, "last_activity_date": 1546462837, "creation_date": 1546462837, "answer_id": 54013122, "question_id": 54012954, "link": "https://stackoverflow.com/questions/54012954/python-try-except-not-executing/54013122#54013122", "title": "Python Try Except not Executing", "body": "<p>You're opening the file in <code>w+</code> mode. Example:</p>\n\n<pre><code>SS_import_error = open('/mnt/Error Files/SSI Error' + now.strftime(\"%Y-%m-%d %H:%M\") + '.txt', 'w+')\n</code></pre>\n\n<p><code>w+</code> means it will create the file if it doesn't exist, or overwrite it if it does. That means that <code>SS_import_error</code> will always point to an empty file after this line. Then you immediately try to loop over the lines of that file:</p>\n\n<pre><code>for line in SS_import_error:\n    line.write(E)\n    line.close()\n    sys.exit()\n</code></pre>\n\n<p>But attempting to loop over the lines of an empty file will end immediately, without ever executing the code within the block. The end result is that the <code>except</code> block runs, but it doesn't actually do anything (other than potentially wipe a file).</p>\n\n<p>I don't know exactly what you intended the <code>for</code> loops to do, so I can't suggest an fix.</p>\n"}, {"comments": [{"owner": {"reputation": 39, "user_id": 9687198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8edc481fd00d89106e280f03b7c4d0e9?s=128&d=identicon&r=PG&f=1", "display_name": "AJSKRILLA", "link": "https://stackoverflow.com/users/9687198/ajskrilla"}, "edited": false, "score": 0, "creation_date": 1546464453, "post_id": 54013142, "comment_id": 94863747, "body": "That seemed to do it. I never knew that this was functionally broken. I was just trying to write a way to log the errors when it fails, but this works as well."}], "tags": [], "owner": {"reputation": 2010, "user_id": 6625815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XUtQf.jpg?s=128&g=1", "display_name": "Andrew F", "link": "https://stackoverflow.com/users/6625815/andrew-f"}, "is_accepted": true, "score": 1, "last_activity_date": 1546462937, "creation_date": 1546462937, "answer_id": 54013142, "question_id": 54012954, "link": "https://stackoverflow.com/questions/54012954/python-try-except-not-executing/54013142#54013142", "title": "Python Try Except not Executing", "body": "<p>I think the primary issue revolves around your exception handling. In particular, you're opening the files as <code>w+</code> mode and then iterating through the opened file -- not exactly a syntax error but it's functionally broken. It's also worth noting that if there are no errors, you should not expect to see any printed output.</p>\n\n<p>I would suggest to take a different direction with handling errors entirely and consider using the fabulous <a href=\"https://docs.python.org/3/library/logging.html\" rel=\"nofollow noreferrer\"><code>logging</code></a> library.</p>\n\n<p>An example of how you could use it would be</p>\n\n<pre><code># ... other imports\nimport logging\n\n# ... your function definitions\ndef NDC_Import():\n    try:\n        Import_csv()\n    except Exception as E:\n        logging.exception('error during Import_csv()')\n        return\n\n    # and so on ...\n</code></pre>\n\n<p>That <code>logging.exception()</code> line will print out the whole traceback to whatever logger is configured, and you can <a href=\"https://docs.python.org/3/howto/logging.html#logging-to-a-file\" rel=\"nofollow noreferrer\">configure it to log to a file</a>. </p>\n"}], "owner": {"reputation": 39, "user_id": 9687198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8edc481fd00d89106e280f03b7c4d0e9?s=128&d=identicon&r=PG&f=1", "display_name": "AJSKRILLA", "link": "https://stackoverflow.com/users/9687198/ajskrilla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 54013142, "answer_count": 2, "score": 0, "last_activity_date": 1546462937, "creation_date": 1546461987, "question_id": 54012954, "link": "https://stackoverflow.com/questions/54012954/python-try-except-not-executing", "title": "Python Try Except not Executing", "body": "<p>I have written a script that is supposed to automate taking a data frame with pandas and interacting with it, then putting it to another part of the network as a reference, and then it interacts with SmartSheets. It uses a very basic API and most of the functions and logic work well, but the only issue is the try except block in the end that is supposed to be scheduled out.</p>\n\n<p>There is no error thrown, it just sits in a blank terminal; this is odd because if I stack the functions I wrote one after another, they work with no issue.</p>\n\n<p>This try except block is so that It can help write out errors on the machine and ultimately put into a scheduling function later in the script.</p>\n\n<p>This script is on a VM that runs Ubuntu 18.04. It is written in Python 2. </p>\n\n<p>I have researched online, and I cannot find a situation where the try except block does not error out and does not execute. I made sure my indentation on the IDE (Atom) is correct (4 spaces). I can line up the 4 functions themselves and they execute fine with no errors.</p>\n\n<pre><code>import os\nimport sys\nimport datetime\nimport tempfile\nimport smartsheet\nimport glob\nimport warnings\nimport platform\nimport pandas as pd\nimport math\nfrom apscheduler.schedulers.blocking import BlockingScheduler\n\n#variables\nwarnings.simplefilter(action='ignore', category=FutureWarning)\n\nnow = datetime.datetime.now()\n\nPATH = \"/mnt/cifs/rxlog.csv\"\n\ncsvpath = \"/home/ajskrilla/csvtest.csv\"\n\nEnd = '.csv'\n\ntoday = now.strftime(\"%Y-%m-%d %H:%M\")\n\npath1 = \"/mnt/cifs1\"+\"/Reports\"+ now.strftime(\"%Y-%m-%d\")+\"/log Import\"\n\npath_glob = \"/mnt/cifs1\"+\"/Reports\"+ now.strftime(\"%Y-%m-%d\")+\"/log Import\"+now.strftime(\"%Y-%m-%d\")\n\nFiles_to_compare = glob.glob('/mnt/cifs1'+\"/Reports\"+ now.strftime(\"%Y-%m-%d\")+'/log Import'+now.strftime(\"%Y-%m-%d\")+'*.csv')\n\nFpath =  path1 + now.strftime(\"%Y-%m-%d %H:%M\") + End\n\nSSName = 'Call Sheet/NDC ' + now.strftime(\"%Y-%m-%d %H:%M\") + End\n\nlist_of_files = Files_to_compare\n\nsched = BlockingScheduler()\n\n#start of process\n\ndef Import_csv():\n\n    data_file = pd.read_csv(PATH, error_bad_lines=False, sep=\"|\", parse_dates=True, low_memory=False, quotechar=None, quoting=3)\n\n    data_file.to_csv(csvpath)\n\ndef Clean_CSV():\n\n    file_path_directory = \"/mnt/cifs1/\"+\"Reports\" + now.strftime(\"%Y-%m-%d\")\n\n    if not os.path.exists(file_path_directory):\n\n        os.makedirs(file_path_directory)\n\n    fields=['RXNBR', 'RX STOREID', 'FILLDATE', 'PATNAMELAST', 'PATNAMEFIRST', 'NH NBR', 'RX HOLD STATUS', 'RX HOLD REASON']\n\n    df = pd.read_csv(csvpath, skipinitialspace=True, usecols=fields, low_memory=False)\n\n    df.columns = ['RXNBR','RX_STOREID', 'FILLDATE', 'PATNAMELAST', 'PATNAMEFIRST', 'NH_NBR', 'RX_HOLD_STATUS', 'RX_HOLD_REASON']\n\n    nf = df[df.NH_NBR == 0][df.RX_HOLD_STATUS != 'Online Queued']\n\n    with tempfile.NamedTemporaryFile(delete=False) as temp:\n\n        nf.to_csv(Fpath, index=False)\n\ndef Compare_files():\n\n    if platform.system() == 'Linux':\n\n        if len(list_of_files) &gt; 2:\n\n            latest_file = min(list_of_files, key=os.stat)\n\n            first_file = max(list_of_files, key=os.stat)\n\n            one_file= pd.read_csv(first_file)\n\n            two_file= pd.read_csv(latest_file)\n\n            out = one_file.append(two_file)\n\n            out.drop_duplicates('RXNBR', inplace=True)\n\n            with tempfile.NamedTemporaryFile(delete=False) as temp:\n\n                out.to_csv(Fpath, index=False)\n\n                for file in list_of_files:\n\n                    if file != latest_file:\n\n                        for files in list_of_files:\n\n                            os.remove(files)\n\n        else:\n\n            pass\n\n        #delete the old file\n\ndef SS_import():\n\n    ss_client = smartsheet.Smartsheet(\"BANNERID#\")\n\n    ss_client.errors_as_exceptions(True)\n\n    imported_sheet = ss_client.Workspaces.import_csv_sheet(\n\n# need to change this based upon workspace ID\n\n    xxxxxxxxxxxxxxxx, #WS ID\n\n    Fpath,\n\n    SSName,\n\n    header_row_index=0\n\n    )\n\n\ndef SS_delete():\n\n    ss_client = smartsheet.Smartsheet(\"BANNNERID#\")\n\n    action = ss_client.Sheets.list_sheets(include_all=True)\n\n    for single_sheet in action.data:\n\n        Sheetid= single_sheet.id\n\n        ss_client.Sheets.delete_sheet(\n\n        single_sheet.id)\n######################################################################################################################################\n\n#this is where the issue arises, during this function\n\n#full fnct with error handling\n\ndef NDC_import():\n\n    try:\n\n        Import_csv()\n\n    except Exception as E:\n\n        Import_error_file = open('/mnt/Error Files/IE Error' + now.strftime(\"%Y-%m-%d %H:%M\") + '.txt', 'w+')\n\n        for line in Import_error_file:\n\n            line.write(E)\n\n            line.close()\n\n            sys.exit()\n\n\n    try:\n\n        Clean_CSV()\n\n    except Exception as E:\n\n        Clean_CSV_error = open('/mnt/Error Files/CC Error' + now.strftime(\"%Y-%m-%d %H:%M\") + '.txt', 'w+')\n\n        for line in Clean_CSV_error:\n\n            line.write(E)\n\n            line.close()\n\n            sys.exit()\n\n    try:\n\n        Compare_files()\n\n    except Exception as E:\n\n        Compare_files_error = open('/mnt/Error Files/CF Error' + now.strftime(\"%Y-%m-%d %H:%M\") + '.txt', 'w+')\n\n        for line in Compare_files_error:\n\n            line.write(E)\n\n            line.close()\n\n            sys.exit()\n\n    try:\n\n        SS_import()\n\n    except Exception as E:\n\n        SS_import_error = open('/mnt/Error Files/SSI Error' + now.strftime(\"%Y-%m-%d %H:%M\") + '.txt', 'w+')\n\n        for line in SS_import_error:\n\n            line.write(E)\n\n            line.close()\n\n            sys.exit()\n\nNDC_import()\n</code></pre>\n\n<p>When the script is run for the <code>NDC_import()</code> function, it won't execute at all. if the 4 functions <code>Import_csv()</code>, <code>Clean_CSV()</code>, <code>Compare_files()</code>, and <code>SS_import()</code> are just by themselves, they execute normally.</p>\n\n<p>Why can't it run in that try except block I wrote? It does not even throw an error and the terminal is blank.</p>\n"}, {"tags": ["python", "selenium", "browser"], "comments": [{"owner": {"reputation": 412, "user_id": 4484863, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-lVdfDOyO5cc/AAAAAAAAAAI/AAAAAAAAQeI/tKsGP-nj2tU/photo.jpg?sz=128", "display_name": "Doug Clark", "link": "https://stackoverflow.com/users/4484863/doug-clark"}, "edited": false, "score": 0, "creation_date": 1546462673, "post_id": 54012953, "comment_id": 94863026, "body": "hard to tell without your xpath, but could the xpath to the textarea change based on your click?"}, {"owner": {"reputation": 11, "user_id": 10859685, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VH2ed_HKtf4/AAAAAAAAAAI/AAAAAAAAAew/FdUxqQ1i3qM/photo.jpg?sz=128", "display_name": "Oleg Balan", "link": "https://stackoverflow.com/users/10859685/oleg-balan"}, "reply_to_user": {"reputation": 412, "user_id": 4484863, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-lVdfDOyO5cc/AAAAAAAAAAI/AAAAAAAAQeI/tKsGP-nj2tU/photo.jpg?sz=128", "display_name": "Doug Clark", "link": "https://stackoverflow.com/users/4484863/doug-clark"}, "edited": false, "score": 0, "creation_date": 1546463335, "post_id": 54012953, "comment_id": 94863297, "body": "dont thought its important, i added it!"}], "answers": [{"tags": [], "owner": {"reputation": 15697, "user_id": 458214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ef09f4a6e7e0803825d17212d2dba67?s=128&d=identicon&r=PG", "display_name": "ewwink", "link": "https://stackoverflow.com/users/458214/ewwink"}, "is_accepted": false, "score": 0, "last_activity_date": 1546485252, "creation_date": 1546485252, "answer_id": 54015861, "question_id": 54012953, "link": "https://stackoverflow.com/questions/54012953/cant-fix-the-staleelementrefereceexception-my-send-keys/54015861#54015861", "title": "Cant fix the StaleElementRefereceException @my send_keys", "body": "<p>when you <code>click</code> the <code>textarea</code> the DOM will be modified, so it will give the error, there are two solution to fix it.</p>\n\n<ul>\n<li><p>remove <code>click()</code> action</p>\n\n<pre><code>cmmnt_elem = driver.find_element_by_xpath('//textarea[@aria-label=\"Kommentar hinzuf\u00fcgen ...\"]')    \ncmmnt_elem.send_keys(hshtg)\n</code></pre></li>\n<li><p>Re-search the element after click</p>\n\n<pre><code>cmmnt_elem = driver.find_element_by_xpath('//textarea[@aria-label=\"Kommentar hinzuf\u00fcgen ...\"]')\ncmmnt_elem.click()\n\ncmmnt_elem = driver.find_element_by_xpath('//textarea[@aria-label=\"Kommentar hinzuf\u00fcgen ...\"]')\ncmmnt_elem.send_keys(hshtg)\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 11, "user_id": 10859685, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VH2ed_HKtf4/AAAAAAAAAAI/AAAAAAAAAew/FdUxqQ1i3qM/photo.jpg?sz=128", "display_name": "Oleg Balan", "link": "https://stackoverflow.com/users/10859685/oleg-balan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "closed_date": 1546518382, "answer_count": 1, "score": 1, "last_activity_date": 1546518418, "creation_date": 1546461984, "last_edit_date": 1546467202, "question_id": 54012953, "link": "https://stackoverflow.com/questions/54012953/cant-fix-the-staleelementrefereceexception-my-send-keys", "closed_reason": "Duplicate", "title": "Cant fix the StaleElementRefereceException @my send_keys", "body": "<p>So I'm pretty new in Python and I tried something for my own, using selenium and firefox. But I got a StaleElementRefereceException when I want to type into a text field in firefox with selenium using <code>send_key()</code></p>\n\n<p>I tried a lot of Solutions like <a href=\"https://stackoverflow.com/questions/12967541/how-to-avoid-staleelementreferenceexception-in-selenium\">How to avoid &quot;StaleElementReferenceException&quot; in Selenium?</a> but doesn't help me much because mine is not a <code>click()</code>, it's a <code>send_key</code>.</p>\n\n<pre><code>    hshtg = \"xyz\"\n\n    driver = self.driver\n    driver.get(\".......\")\n    #time.sleep(3)\n\n    cmmnt_elem = driver.find_element_by_xpath('//textarea[@aria-label=\"Kommentar hinzuf\u00fcgen ...\"]')\n    cmmnt_elem.click()\n    #time.sleep(3)\n\n    cmmnt_elem.send_keys(hshtg)\n    #time.sleep(3)\n    cmmnt_elem.send_keys(Keys.RETURN)\n</code></pre>\n\n<p>But, I got those errors.</p>\n\n<pre><code>File \".....py\", line 45, in comment_photo\ncmmnt_elem.send_keys(hshtg)\n</code></pre>\n\n<p>......</p>\n\n<pre><code>selenium.common.exceptions.StaleElementReferenceException: Message: The element \nreference of &lt;textarea class=\"Ypffh\"&gt; is stale; either the element is no longer \nattached to the DOM, it is not in the current frame context, or the document \nhas been refreshed\n</code></pre>\n\n<p>tried this too: (cause of this:  <a href=\"https://stackoverflow.com/questions/12967541/how-to-avoid-staleelementreferenceexception-in-selenium\">How to avoid &quot;StaleElementReferenceException&quot; in Selenium?</a>)</p>\n\n<pre><code>attempts = 0\nwhile attempts &lt; 20:\ntry:\ncmmnt_elem.send_keys(hshtg)\nbreak\nexcept Exception as e:\nattempts+1\n</code></pre>\n\n<p>In case it's helpful, this is the field:<a href=\"https://i.stack.imgur.com/JT1Ry.png\" rel=\"nofollow noreferrer\">comment field on instagram</a></p>\n"}, {"tags": ["python", "python-3.x", "pandas", "type-conversion"], "comments": [{"owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 0, "creation_date": 1546461955, "post_id": 54012938, "comment_id": 94862735, "body": "What does 0:05 should convert to?"}, {"owner": {"reputation": 608, "user_id": 10833061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23ba9c03b031e072e559e715589cb2c0?s=128&d=identicon&r=PG&f=1", "display_name": "MisterButter", "link": "https://stackoverflow.com/users/10833061/misterbutter"}, "reply_to_user": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 0, "creation_date": 1546462016, "post_id": 54012938, "comment_id": 94862755, "body": "5 seconds, so its minutes:seconds"}, {"owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "edited": false, "score": 0, "creation_date": 1546462027, "post_id": 54012938, "comment_id": 94862763, "body": "Is this a pandas question?"}, {"owner": {"reputation": 608, "user_id": 10833061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23ba9c03b031e072e559e715589cb2c0?s=128&d=identicon&r=PG&f=1", "display_name": "MisterButter", "link": "https://stackoverflow.com/users/10833061/misterbutter"}, "edited": false, "score": 0, "creation_date": 1546462059, "post_id": 54012938, "comment_id": 94862779, "body": "Yes it is, sorry for being unclear about it"}, {"owner": {"reputation": 9435, "user_id": 6858244, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wfU-doP3Fhc/AAAAAAAAAAI/AAAAAAAACbY/GNmdrBKqDSM/photo.jpg?sz=128", "display_name": "Prayson W. Daniel", "link": "https://stackoverflow.com/users/6858244/prayson-w-daniel"}, "edited": false, "score": 0, "creation_date": 1546462157, "post_id": 54012938, "comment_id": 94862824, "body": "What are your expected results?"}, {"owner": {"reputation": 608, "user_id": 10833061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23ba9c03b031e072e559e715589cb2c0?s=128&d=identicon&r=PG&f=1", "display_name": "MisterButter", "link": "https://stackoverflow.com/users/10833061/misterbutter"}, "reply_to_user": {"reputation": 9435, "user_id": 6858244, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wfU-doP3Fhc/AAAAAAAAAAI/AAAAAAAACbY/GNmdrBKqDSM/photo.jpg?sz=128", "display_name": "Prayson W. Daniel", "link": "https://stackoverflow.com/users/6858244/prayson-w-daniel"}, "edited": false, "score": 0, "creation_date": 1546462354, "post_id": 54012938, "comment_id": 94862905, "body": "@PraysonW.Daniel My expected results is that the time can be converted to a float so that the differences in time between observations doesn&#39;t change"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1546463999, "post_id": 54012938, "comment_id": 94863564, "body": "@MisterButter Presumably, you want a float representing  fraction of a minute (so that <code>0:05</code> becomes <code>0.08333333</code>), but that&#39;s not the only option, which is why people are asking you to be specific."}, {"owner": {"reputation": 608, "user_id": 10833061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23ba9c03b031e072e559e715589cb2c0?s=128&d=identicon&r=PG&f=1", "display_name": "MisterButter", "link": "https://stackoverflow.com/users/10833061/misterbutter"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1546464178, "post_id": 54012938, "comment_id": 94863645, "body": "@chepner totaly understand your questions, I came to mind to have it converted to seconds representation so that 0:05 becomes 5 and 1:00 becomes 60 and so om"}], "answers": [{"tags": [], "owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "is_accepted": false, "score": 2, "last_activity_date": 1546462202, "creation_date": 1546462202, "answer_id": 54013002, "question_id": 54012938, "link": "https://stackoverflow.com/questions/54012938/how-to-convert-data-in-a-column-containing-string-like-420-to-a-float/54013002#54013002", "title": "How to convert data in a column containing string like &quot;4:20&quot; to a float", "body": "<p>You could do something like this:</p>\n\n<pre><code>import pandas as pd\n\ndata = ['0:05',\n        '0:05',\n        '1:24',\n        '3:29',\n        '1:34',\n        '0:05']\n\n\ndef convert(s):\n    minutes, seconds = map(int, s.split(\":\"))\n    return 60 * minutes + seconds\n\n\ndf = pd.DataFrame(data=data, columns=['powerPlayTimeOnIce'])\nprint(df['powerPlayTimeOnIce'].apply(convert))\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>0      5\n1      5\n2     84\n3    209\n4     94\n5      5\nName: powerPlayTimeOnIce, dtype: int64\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 608, "user_id": 10833061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23ba9c03b031e072e559e715589cb2c0?s=128&d=identicon&r=PG&f=1", "display_name": "MisterButter", "link": "https://stackoverflow.com/users/10833061/misterbutter"}, "edited": false, "score": 0, "creation_date": 1546462710, "post_id": 54013048, "comment_id": 94863047, "body": "The column contains the value 0 in some rows,  which I forgot to mention. So i get error &quot;time data 0 does not match format &#39;%M:%S&#39; (match)&quot;"}, {"owner": {"reputation": 608, "user_id": 10833061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23ba9c03b031e072e559e715589cb2c0?s=128&d=identicon&r=PG&f=1", "display_name": "MisterButter", "link": "https://stackoverflow.com/users/10833061/misterbutter"}, "edited": false, "score": 0, "creation_date": 1546463048, "post_id": 54013048, "comment_id": 94863180, "body": "Thank you, believe it&#39;s gonna work, messed up my notebook so had to restart kernel. Thank you very much for the solution!"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 608, "user_id": 10833061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23ba9c03b031e072e559e715589cb2c0?s=128&d=identicon&r=PG&f=1", "display_name": "MisterButter", "link": "https://stackoverflow.com/users/10833061/misterbutter"}, "edited": false, "score": 0, "creation_date": 1546463258, "post_id": 54013048, "comment_id": 94863268, "body": "@MisterButter just let us know whether it work or not"}, {"owner": {"reputation": 608, "user_id": 10833061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23ba9c03b031e072e559e715589cb2c0?s=128&d=identicon&r=PG&f=1", "display_name": "MisterButter", "link": "https://stackoverflow.com/users/10833061/misterbutter"}, "edited": false, "score": 0, "creation_date": 1546463479, "post_id": 54013048, "comment_id": 94863357, "body": "worked excellent in the format you wrote it, but changed all &quot;s&quot; to &quot;df &quot; and the rest of the data disappears. Perhaps it is not allowed?"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 608, "user_id": 10833061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23ba9c03b031e072e559e715589cb2c0?s=128&d=identicon&r=PG&f=1", "display_name": "MisterButter", "link": "https://stackoverflow.com/users/10833061/misterbutter"}, "edited": false, "score": 0, "creation_date": 1546463540, "post_id": 54013048, "comment_id": 94863387, "body": "@MisterButter you need to assign it back rather than change it   <code>df[&#39;New&#39;]=(s.dt.minute*60+s.dt.second).fillna(0)</code>"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 3, "last_activity_date": 1546462838, "last_edit_date": 1546462838, "creation_date": 1546462462, "answer_id": 54013048, "question_id": 54012938, "link": "https://stackoverflow.com/questions/54012938/how-to-convert-data-in-a-column-containing-string-like-420-to-a-float/54013048#54013048", "title": "How to convert data in a column containing string like &quot;4:20&quot; to a float", "body": "<p>Using <code>to_datetime</code></p>\n\n<pre><code>s=pd.to_datetime(df.PowerPlayTimeOnIce,format='%M:%S')\ns.dt.minute*60+s.dt.second\nOut[881]: \n0      5\n1      5\n2     84\n3    209\n4     94\n5      5\nName: PowerPlayTimeOnIce, dtype: int64\n</code></pre>\n\n<p>Update </p>\n\n<pre><code>s=pd.to_datetime(df.PowerPlayTimeOnIce,format='%M:%S',errors='coerce')\n\n(s.dt.minute*60+s.dt.second).fillna(0)\nOut[886]: \n0      5.0\n1      5.0\n2     84.0\n3    209.0\n4     94.0\n5      5.0\n6      0.0\nName: PowerPlayTimeOnIce, dtype: float64\n</code></pre>\n\n<hr>\n\n<p>Data input </p>\n\n<pre><code>  PowerPlayTimeOnIce\n0               0:05\n1               0:05\n2               1:24\n3               3:29\n4               1:34\n5               0:05\n6                  0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 608, "user_id": 10833061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23ba9c03b031e072e559e715589cb2c0?s=128&d=identicon&r=PG&f=1", "display_name": "MisterButter", "link": "https://stackoverflow.com/users/10833061/misterbutter"}, "edited": false, "score": 0, "creation_date": 1546463629, "post_id": 54013188, "comment_id": 94863417, "body": "Thank you for the solution, easy to follow! Looking for speed, I do not have a huge dataset(2 seasons on NHL games played), but I have shit code so it takes a while."}], "tags": [], "owner": {"reputation": 9435, "user_id": 6858244, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wfU-doP3Fhc/AAAAAAAAAAI/AAAAAAAACbY/GNmdrBKqDSM/photo.jpg?sz=128", "display_name": "Prayson W. Daniel", "link": "https://stackoverflow.com/users/6858244/prayson-w-daniel"}, "is_accepted": false, "score": 1, "last_activity_date": 1546463199, "creation_date": 1546463199, "answer_id": 54013188, "question_id": 54012938, "link": "https://stackoverflow.com/questions/54012938/how-to-convert-data-in-a-column-containing-string-like-420-to-a-float/54013188#54013188", "title": "How to convert data in a column containing string like &quot;4:20&quot; to a float", "body": "<p>If you want a very verbose flow and you don\u2019t have a huge dataset. You could do:</p>\n\n<pre><code>df[['min', 'sec']] = df['powerPlayTimeOnIce'].str.split(':', expand=True)\n\ndf[['min'] = df[['min'].astype('int')\ndf['sec'] = df['sec'].apply(lambda x: float('0.'+x), axis=1)\n\ndf['diff_in_seconds'] = df['min']/60 + df['sec']\n</code></pre>\n\n<p>So I split your data to min and sec. and from there you can turn to whatever format. </p>\n"}, {"comments": [{"owner": {"reputation": 608, "user_id": 10833061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23ba9c03b031e072e559e715589cb2c0?s=128&d=identicon&r=PG&f=1", "display_name": "MisterButter", "link": "https://stackoverflow.com/users/10833061/misterbutter"}, "edited": false, "score": 0, "creation_date": 1546465273, "post_id": 54013479, "comment_id": 94864045, "body": "This a small part of a dataframe with many, columns, is it possible to save it as df[\u201dpowerPlayTimeOnIce\u201d] instead of \u201ds\u201d?"}, {"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "reply_to_user": {"reputation": 608, "user_id": 10833061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23ba9c03b031e072e559e715589cb2c0?s=128&d=identicon&r=PG&f=1", "display_name": "MisterButter", "link": "https://stackoverflow.com/users/10833061/misterbutter"}, "edited": false, "score": 0, "creation_date": 1546465642, "post_id": 54013479, "comment_id": 94864186, "body": "@MisterBuster yes. It was just much easier to write out <code>s.str</code> instead of that lengthy Column name every time"}], "tags": [], "owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "is_accepted": false, "score": 0, "last_activity_date": 1546465055, "creation_date": 1546465055, "answer_id": 54013479, "question_id": 54012938, "link": "https://stackoverflow.com/questions/54012938/how-to-convert-data-in-a-column-containing-string-like-420-to-a-float/54013479#54013479", "title": "How to convert data in a column containing string like &quot;4:20&quot; to a float", "body": "<p>You can use <code>pd.to_timedelta</code> + the <code>.total_seconds()</code> accessor. First you need to format the strings properly (HH:mm:ss) as you cannot specify a format. Though perhaps not relevant for hockey times, this can deal with large time without much issue.</p>\n\n<pre><code>import pandas as pd\n\ns = df.PowerPlayTimeOnIce.replace(':', '', regex=True).str.zfill(6)\npd.to_timedelta(s.str[0:-4]+':'+s.str[-4:-2]+':'+s.str[-2::]).dt.total_seconds()\n</code></pre>\n\n<h3>Output:</h3>\n\n<pre><code>0          5.0\n1          5.0\n2         84.0\n3        209.0\n4         94.0\n5          5.0\n6          0.0\n7     446161.0\n8    4046161.0\nName: PowerPlayTimeOnIce, dtype: float64\n</code></pre>\n\n<h3>Input Data</h3>\n\n<pre><code>  PowerPlayTimeOnIce\n0               0:05\n1               0:05\n2               1:24\n3               3:29\n4               1:34\n5               0:05\n6                  0\n7          123:56:01\n8         1123:56:01\n</code></pre>\n"}], "owner": {"reputation": 608, "user_id": 10833061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23ba9c03b031e072e559e715589cb2c0?s=128&d=identicon&r=PG&f=1", "display_name": "MisterButter", "link": "https://stackoverflow.com/users/10833061/misterbutter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 1, "accepted_answer_id": 54013048, "answer_count": 4, "score": 0, "last_activity_date": 1546465055, "creation_date": 1546461924, "last_edit_date": 1546462792, "question_id": 54012938, "link": "https://stackoverflow.com/questions/54012938/how-to-convert-data-in-a-column-containing-string-like-420-to-a-float", "title": "How to convert data in a column containing string like &quot;4:20&quot; to a float", "body": "<p>In my dataframe there is a column containing values like this:</p>\n\n<pre><code> PowerPlayTimeOnIce\n       0:05\n       0:05\n       1:24\n       3:29\n       1:34\n        0\n       0:05\n        0\n        0\n</code></pre>\n\n<p>How do I convert these to floats?</p>\n\n<p>This method didn't work:</p>\n\n<pre><code>df[\"powerPlayTimeOnIce\"] = df[\"powerPlayTimeOnIce\"].astype('float')\n</code></pre>\n\n<p>EDIT:Updated data-example to fit problem better</p>\n"}, {"tags": ["python", "kivy", "kivy-language"], "comments": [{"owner": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "edited": false, "score": 0, "creation_date": 1546471604, "post_id": 54012936, "comment_id": 94866123, "body": "Have you tried using an <code>Image</code> widget?"}, {"owner": {"reputation": 53, "user_id": 10018322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d616534a0c76fc00fc387961bcc105e?s=128&d=identicon&r=PG&f=1", "display_name": "M. Momchilov", "link": "https://stackoverflow.com/users/10018322/m-momchilov"}, "reply_to_user": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "edited": false, "score": 0, "creation_date": 1546635878, "post_id": 54012936, "comment_id": 94927567, "body": "@JohnAnderson Yes, I tried and it works but only when I use pos. With pos_hint it doesn&#39;t."}], "answers": [{"comments": [{"owner": {"reputation": 433, "user_id": 10247526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/396a56c5584e4b386cca1554c2ab99d9?s=128&d=identicon&r=PG&f=1", "display_name": "Tope", "link": "https://stackoverflow.com/users/10247526/tope"}, "edited": false, "score": 0, "creation_date": 1546548681, "post_id": 54029586, "comment_id": 94895536, "body": "I hope you find this helpful. If you do, vote the answer and accept it by clicking on the Check sign."}, {"owner": {"reputation": 53, "user_id": 10018322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d616534a0c76fc00fc387961bcc105e?s=128&d=identicon&r=PG&f=1", "display_name": "M. Momchilov", "link": "https://stackoverflow.com/users/10018322/m-momchilov"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1546636329, "post_id": 54029586, "comment_id": 94927774, "body": "Thank you, @eyllanes! This solved my problem, I accepted the answer, but couldn&#39;t vote, because I don&#39;t have enought reputation."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 53, "user_id": 10018322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d616534a0c76fc00fc387961bcc105e?s=128&d=identicon&r=PG&f=1", "display_name": "M. Momchilov", "link": "https://stackoverflow.com/users/10018322/m-momchilov"}, "edited": false, "score": 0, "creation_date": 1546636424, "post_id": 54029586, "comment_id": 94927808, "body": "@M.Momchilov I have not answered your question, I have only edited the question :-)"}], "tags": [], "owner": {"reputation": 433, "user_id": 10247526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/396a56c5584e4b386cca1554c2ab99d9?s=128&d=identicon&r=PG&f=1", "display_name": "Tope", "link": "https://stackoverflow.com/users/10247526/tope"}, "is_accepted": true, "score": 0, "last_activity_date": 1546549784, "last_edit_date": 1546549784, "creation_date": 1546548534, "answer_id": 54029586, "question_id": 54012936, "link": "https://stackoverflow.com/questions/54012936/any-suggestions-for-loading-an-image-from-a-file-dialog/54029586#54029586", "title": "Any suggestions for loading an Image from a file dialog?", "body": "<p>You'd need to create an Image widget and then change the source of the image to your self.filename variable using the id you'd assign to it</p>\n\n<p>in your .kv:</p>\n\n<pre><code>Image:\n    id: imageWidget\n    source: ''\n    opacity: 0 # to make it completely invisible till your add a source file\n</code></pre>\n\n<p>in your .py:</p>\n\n<pre><code>def file_dialog(self):\n    Tk().withdraw()\n    self.filename = askopenfilename()\n    imageWid = self.ids['imageWidget']\n    imageWid.source = self.filename\n    imageWid.opacity= 1 # to make it visible\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 10018322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d616534a0c76fc00fc387961bcc105e?s=128&d=identicon&r=PG&f=1", "display_name": "M. Momchilov", "link": "https://stackoverflow.com/users/10018322/m-momchilov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 54029586, "answer_count": 1, "score": 1, "last_activity_date": 1546549784, "creation_date": 1546461911, "question_id": 54012936, "link": "https://stackoverflow.com/questions/54012936/any-suggestions-for-loading-an-image-from-a-file-dialog", "title": "Any suggestions for loading an Image from a file dialog?", "body": "<p>I'm building GUI for my app and I'm trying to load an image from file dialog.\nDoes somebody has any suggestions? This is my first Kivy application and sometimes I can't fully understand the documentation. I've tried multiple ways and the best result I got was an image at the bottom left of the screen.</p>\n\n<p>I've tried the solution from <a href=\"https://stackoverflow.com/questions/33413521/placing-an-image-in-the-middle-of-the-label-in-kivy\">Placing an image in the middle of the label in Kivy</a>, but that didn't solve my problem.</p>\n\n<p>Part of my .kv file:</p>\n\n<pre><code>&lt;RunDemoScreen&gt;:\n    GridLayout:\n        rows: 3\n        cols: 2\n        Button:\n            text:\"Test\"\n\n\n        Button:\n            text:\"File\"\n            on_press: root.file_dialog()\n\n        Button:\n            text: 'Back'\n            on_release: root.manager.current = 'menu'\n</code></pre>\n\n<p>Part of my python code:</p>\n\n<pre><code>class RunDemoScreen(Screen):\n\n    def file_dialog(self):\n        Tk().withdraw()\n        self.filename = askopenfilename()\n        print(self.filename)\n</code></pre>\n\n<p>Everything in this code works fine.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 2275, "user_id": 2175593, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/LXoPR.png?s=128&g=1", "display_name": "WillardSolutions", "link": "https://stackoverflow.com/users/2175593/willardsolutions"}, "edited": false, "score": 0, "creation_date": 1546462122, "post_id": 54012934, "comment_id": 94862812, "body": "I think that is in the original tweet; it&#39;s 140 chars...."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10859665, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JECbZjJIOl0/AAAAAAAAAAI/AAAAAAAAAMA/1Zh3FN59FWA/photo.jpg?sz=128", "display_name": "Mario Qi", "link": "https://stackoverflow.com/users/10859665/mario-qi"}, "edited": false, "score": 0, "creation_date": 1546728103, "post_id": 54013041, "comment_id": 94947896, "body": "Thank you, so much, I figured it out."}], "tags": [], "owner": {"reputation": 1203, "user_id": 10508893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19088d413e74d87a8f6e0f288cbddb45?s=128&d=identicon&r=PG&f=1", "display_name": "LeKhan9", "link": "https://stackoverflow.com/users/10508893/lekhan9"}, "is_accepted": false, "score": 1, "last_activity_date": 1546462410, "creation_date": 1546462410, "answer_id": 54013041, "question_id": 54012934, "link": "https://stackoverflow.com/questions/54012934/tweets-get-back-from-twitter-api-are-not-showing-whole-tweets/54013041#54013041", "title": "Tweets get back from twitter api are not showing whole tweets", "body": "<p>Try passing <code>tweet_mode=\"extended\"</code> to the <code>twitter.Api</code> constructor. </p>\n\n<p>I believe that since the original tweet is greater than 140 chars, we need to inform the interface to expect this as it does not do this by default.</p>\n"}], "owner": {"reputation": 1, "user_id": 10859665, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JECbZjJIOl0/AAAAAAAAAAI/AAAAAAAAAMA/1Zh3FN59FWA/photo.jpg?sz=128", "display_name": "Mario Qi", "link": "https://stackoverflow.com/users/10859665/mario-qi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546462410, "creation_date": 1546461909, "question_id": 54012934, "link": "https://stackoverflow.com/questions/54012934/tweets-get-back-from-twitter-api-are-not-showing-whole-tweets", "title": "Tweets get back from twitter api are not showing whole tweets", "body": "<p>This first I am using python twitter tool. I have question about results get back from it. It seems they are omission of original tweets.  </p>\n\n<pre><code>import twitter\napi = twitter.Api(consumer_key='jyd2tcu**OHiIrfg',\n                  consumer_secret='****t80qZeM4JYvV5V8UpB0fTtebPSsb0LUjI9kYSZbLTRn',\n                  access_token_key='1***74372608-dfi5bz22RTKep7GF04lk6FnPSYBgnD',\n                  access_token_secret='5gt0YIw***gwPca5RXiwMksg7GM4ACQtl4')\n\nresults = api.GetSearch(\nraw_query=\"q=immigration%20&amp;result_type=recent\")\n</code></pre>\n\n<p>Text I got back is </p>\n\n<pre><code>Text='RT @ddale8: Fox is now showing Trump\\'s comments at Cabinet. He begins the clip by saying he\\'s \"heard numbers as high as $275 billion\" for h\u2026')\n</code></pre>\n\n<p>It ends with \"\u2026\", is it how twitter api works or is there a way i can get whole tweets instead?</p>\n\n<p>thank you</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 2, "creation_date": 1546462038, "post_id": 54012922, "comment_id": 94862769, "body": "Put the functions into modules that you import"}, {"owner": {"reputation": 1208, "user_id": 9123163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6CgKR.jpg?s=128&g=1", "display_name": "ltd9938", "link": "https://stackoverflow.com/users/9123163/ltd9938"}, "edited": false, "score": 1, "creation_date": 1546462052, "post_id": 54012922, "comment_id": 94862775, "body": "In the same file? Not nice and neatly like you can with prototypes in C. Functions should be defined before usage."}], "owner": {"reputation": 115, "user_id": 9245513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eceea6aa0d280e65feacd3797f13e95e?s=128&d=identicon&r=PG&f=1", "display_name": "Danny", "link": "https://stackoverflow.com/users/9245513/danny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "closed_date": 1546462094, "answer_count": 0, "score": 0, "last_activity_date": 1546461885, "creation_date": 1546461885, "question_id": 54012922, "link": "https://stackoverflow.com/questions/54012922/using-function-before-declaration-in-python", "closed_reason": "Duplicate", "title": "Using function before declaration in Python", "body": "<p>I am new to python, and I tried writing a function but it says it is not defined, so I tried using it after declaring it, and it worked.\nI program in C and there I just put function prototype and it's all good.\nIs there any nice way to do this in python as well? or do I really need to think about the order that I am writing the function?\ncause it sounds pretty stupid if you have a huge code with 100 functions that uses each other what do you do?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1546461919, "post_id": 54012885, "comment_id": 94862724, "body": "Why do you need <code>Foo</code> in the first place? Can <code>five</code> simply be a function rather than a method?"}, {"owner": {"reputation": 16775, "user_id": 442945, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/TovHM.png?s=128&g=1", "display_name": "Nathaniel Ford", "link": "https://stackoverflow.com/users/442945/nathaniel-ford"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1546462040, "post_id": 54012885, "comment_id": 94862770, "body": "@chepner <code>Foo</code> is the simplest form/example of a class to demonstrate what this question is asking, I assume."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1546462108, "post_id": 54012885, "comment_id": 94862802, "body": "Yes, but it makes it impossible to tell if the correct solution is to make <code>five</code> a class method, a static method, or if something else is necessary. I think it&#39;s been simplified <i>too</i> much."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1546462297, "post_id": 54012885, "comment_id": 94862877, "body": "Addressing the edit: You say you need to access <code>self</code>, but describe a scenario where <code>self</code> is pointless. Try to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that demonstrates <i>why</i> <code>@classmethod</code>/<code>@staticmethod</code> isn&#39;t appropriate."}, {"owner": {"reputation": 675, "user_id": 10846467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9af1125eeb287b90a478c6bc797b6dbc?s=128&d=identicon&r=PG&f=1", "display_name": "hegash", "link": "https://stackoverflow.com/users/10846467/hegash"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1546462498, "post_id": 54012885, "comment_id": 94862956, "body": "@ShadowRanger done, apologies for not doing that initially, I&#39;m new to this"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1546462595, "post_id": 54012885, "comment_id": 94862993, "body": "@hegash: That&#39;s still not clarifying why this couldn&#39;t be a <code>classmethod</code>, operating on a class attribute. Will there be other instances of this class? If not, why do you need a class at all, rather than just some random function that returns a global constant? It&#39;s fine you missed stuff initially (I didn&#39;t downvote), but I&#39;m strongly suspecting <a href=\"https://meta.stackexchange.com/q/66377/322040\">an XY problem</a>; you&#39;ve got a problem, you decided on a solution, that solution isn&#39;t working, so you&#39;re asking for help making a bad solution work, rather than asking about the real problem."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1546463103, "post_id": 54012885, "comment_id": 94863207, "body": "For example, looking at your code as written, I&#39;d just skip <code>bar</code> and create the thread with <code>foobar = Foo()</code>, <code>t = threading.Thread(target=foobar.five)</code>. Or if <code>bar</code> must be a thing, give it an argument to call <code>five</code> on, so you can do <code>t = threading.Thread(target=bar, args=(foobar,))</code>. You can even make the argument a default instance of <code>Foo</code> if needed, so <code>bar</code> can be called without passing an argument and it will reuse the <code>Foo</code> it defaults to."}, {"owner": {"reputation": 16775, "user_id": 442945, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/TovHM.png?s=128&g=1", "display_name": "Nathaniel Ford", "link": "https://stackoverflow.com/users/442945/nathaniel-ford"}, "edited": false, "score": 0, "creation_date": 1546466376, "post_id": 54012885, "comment_id": 94864498, "body": "While <code>staticmethod</code> may be what he&#39;s looking for... the <code>global</code> indicates there are probably bigger structural issues outside the scope of this question... We shouldn&#39;t let this slip into a code review here."}, {"owner": {"reputation": 675, "user_id": 10846467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9af1125eeb287b90a478c6bc797b6dbc?s=128&d=identicon&r=PG&f=1", "display_name": "hegash", "link": "https://stackoverflow.com/users/10846467/hegash"}, "reply_to_user": {"reputation": 16775, "user_id": 442945, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/TovHM.png?s=128&g=1", "display_name": "Nathaniel Ford", "link": "https://stackoverflow.com/users/442945/nathaniel-ford"}, "edited": false, "score": 0, "creation_date": 1546466832, "post_id": 54012885, "comment_id": 94864659, "body": "@NathanielFord I am aware that the use of global is not good practice. You&#39;ll be pleased to hear that I am merely using it in this example for the sake of simplicity. In reality my class inherits from another class, of which the &#39;counter&#39; function (in reality not a counter at all) is a method. I am starting to think my initial code is too complicated to have put in a question. My problem is that the issue with the code stretches over hundreds of lines between classes, so I have no easy way of condensing all of it."}], "answers": [{"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 2, "creation_date": 1546462203, "post_id": 54012906, "comment_id": 94862843, "body": "In general, <code>classmethod</code> is for alternate constructors (where you need to know the real subclass it was called on to construct the appropriate subclass); if you&#39;re just namespacing a function that returns a constant, you may as well stick with <code>staticmethod</code> and avoid needing to accept (and ignore) <code>cls</code>."}, {"owner": {"reputation": 675, "user_id": 10846467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9af1125eeb287b90a478c6bc797b6dbc?s=128&d=identicon&r=PG&f=1", "display_name": "hegash", "link": "https://stackoverflow.com/users/10846467/hegash"}, "edited": false, "score": 0, "creation_date": 1546462222, "post_id": 54012906, "comment_id": 94862850, "body": "I have edited the question; Five is in fact a much more complicated method and needs to access self"}], "tags": [], "owner": {"reputation": 16775, "user_id": 442945, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/TovHM.png?s=128&g=1", "display_name": "Nathaniel Ford", "link": "https://stackoverflow.com/users/442945/nathaniel-ford"}, "is_accepted": false, "score": 3, "last_activity_date": 1546461817, "creation_date": 1546461817, "answer_id": 54012906, "question_id": 54012885, "link": "https://stackoverflow.com/questions/54012885/how-to-access-class-method-from-outside-class/54012906#54012906", "title": "How to access class method from outside class", "body": "<p>All you need to do is mark the function as a classmethod:</p>\n\n<pre><code>class Foo():\n\n    @classmethod\n    def five(cls):\n        return 5\n\ndef bar():\n    print Foo.five()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 675, "user_id": 10846467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9af1125eeb287b90a478c6bc797b6dbc?s=128&d=identicon&r=PG&f=1", "display_name": "hegash", "link": "https://stackoverflow.com/users/10846467/hegash"}, "edited": false, "score": 0, "creation_date": 1546462311, "post_id": 54012927, "comment_id": 94862881, "body": "Sorry for the confusion, I have edited my question; Five is massively over-simplified, it can&#39;t be a static method as it needs to access self"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 675, "user_id": 10846467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9af1125eeb287b90a478c6bc797b6dbc?s=128&d=identicon&r=PG&f=1", "display_name": "hegash", "link": "https://stackoverflow.com/users/10846467/hegash"}, "edited": false, "score": 0, "creation_date": 1546462435, "post_id": 54012927, "comment_id": 94862931, "body": "@hegash: Can you explain <i>why</i>? Are you trying to implement a Java-style singleton pattern? Or do you just need a default instance to work on sometimes? When you say &quot;I need an instance, but I don&#39;t want to use an instance&quot;, I suspect <a href=\"https://meta.stackexchange.com/q/66377/322040\">an XY problem</a>."}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": false, "score": 3, "last_activity_date": 1546461896, "creation_date": 1546461896, "answer_id": 54012927, "question_id": 54012885, "link": "https://stackoverflow.com/questions/54012885/how-to-access-class-method-from-outside-class/54012927#54012927", "title": "How to access class method from outside class", "body": "<p>First off, the simple solution, since you rely on neither class nor instance, is to <a href=\"https://docs.python.org/3/library/functions.html?highlight=staticmethod#staticmethod\" rel=\"nofollow noreferrer\">make your method a static method</a>:</p>\n\n<pre><code>class Foo():\n\n    @staticmethod\n    def five():\n        return 5\n\ndef bar():\n    print Foo.five()\n</code></pre>\n\n<p><a href=\"https://docs.python.org/3/library/functions.html?highlight=staticmethod#classmethod\" rel=\"nofollow noreferrer\">A class method</a> also works, but it's pointless unless there is some class specific behavior that you expect to change based on possible subclasses (where you'd derive information from knowing the subclass it was invoked with); in practice, <code>@classmethod</code> is really only for alternate constructors, and doesn't apply here.</p>\n\n<p>Secondly, <code>Foo</code> does not have an attribute named <code>self</code> in your code example, because you never constructed an instance of <code>Foo</code>, so <code>__init__</code> was never invoked to assign the class attribute. If you want to do something like that to make a singleton instance to work off of, don't do it in <code>__init__</code>; do it immediately after the class is defined, e.g.:</p>\n\n<pre><code>class Foo():\n    ...\nFoo.singleton = Foo()\n</code></pre>\n\n<p>Again, not particularly useful, so I'd avoid it if possible.</p>\n"}], "owner": {"reputation": 675, "user_id": 10846467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9af1125eeb287b90a478c6bc797b6dbc?s=128&d=identicon&r=PG&f=1", "display_name": "hegash", "link": "https://stackoverflow.com/users/10846467/hegash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1546466166, "creation_date": 1546461686, "last_edit_date": 1546466166, "question_id": 54012885, "link": "https://stackoverflow.com/questions/54012885/how-to-access-class-method-from-outside-class", "title": "How to access class method from outside class", "body": "<p>This is the simplest example:</p>\n\n<pre><code>class Foo():\n    def five(self):\n        return 5\n\ndef bar():\n    print Foo.five()\n</code></pre>\n\n<p>As you can see, I would like to call <code>five</code> from <code>bar</code>, but the problem is class methods take <code>self</code> as an argument.</p>\n\n<p>I have solved this by feeding the instance of Foo all the way through bar, shown below:</p>\n\n<pre><code>class Foo():\n\n    def five(self):\n        return 5\n\n\ndef bar(instance_of_Foo):\n    print Foo.five(instance_of_Foo)\n\n\nfoobar = Foo()\n\nbar(foobar)\n</code></pre>\n\n<p>This solution works as I can feed an instance of <code>Foo</code> into my call to <code>bar()</code>. The problem is that need to call <code>bar()</code> before I instantiate <code>Foo</code>, because the <code>Foo</code> object is the target of a thread.</p>\n\n<p>Here is a more complicated example that demonstrates the problem:</p>\n\n<pre><code>from tkinter import *\nimport threading\nimport time\n\ncount = 0\n\ndef counter():\n    global count\n    while True:\n        count += 1\n        print count\n        time.sleep(1)\n\nclass GUI():\n    def __init__(self):\n        self.root = Tk()\n\n    def five(self):\n        global count\n\n        self.var = StringVar()\n        self.var.set(count)\n\n        self.label = Label(self.root, textvariable=self.var)\n        self.label.pack()\n\n        self.root.mainloop()\n\ndef update_gui():\n    global count\n    while True:\n        GUI.var = count\n        GUI.root.update()\n\nthreads = []\nt = threading.Thread(target=update_gui)\nthreads.append(t)\nt.start()\n\ncountbot = threading.Thread(target=counter)\nthreads.append(countbot)\ncountbot.start()\n\nfoobar = GUI()\nfoobar.five()\n</code></pre>\n\n<p>The above throws this error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/threading.py\", line 801, in __bootstrap_inner\n    self.run()\n  File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/threading.py\", line 754, in run\n    self.__target(*self.__args, **self.__kwargs)\n  File \"/Users/Henry/documents/python/blank3.py\", line 36, in update_gui\n    GUI.root.update()\nAttributeError: class GUI has no attribute 'root'\n</code></pre>\n\n<p>This really surprises me, as GUI does have an attribute called root.</p>\n"}, {"tags": ["python", "windows", "powershell", "command-line"], "comments": [{"owner": {"reputation": 33825, "user_id": 9898643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c9f303fda4c69e9c9ce6b84a6268402?s=128&d=identicon&r=PG&f=1", "display_name": "Theo", "link": "https://stackoverflow.com/users/9898643/theo"}, "edited": false, "score": 0, "creation_date": 1546462180, "post_id": 54012884, "comment_id": 94862836, "body": "Could be just me, but where&#39;s the Powershell code?"}, {"owner": {"reputation": 22357, "user_id": 3439404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5YzGh.jpg?s=128&g=1", "display_name": "JosefZ", "link": "https://stackoverflow.com/users/3439404/josefz"}, "edited": false, "score": 0, "creation_date": 1546462648, "post_id": 54012884, "comment_id": 94863016, "body": "Most Windows components read values from registry while <i>bootup</i> and keep it cached. You need to restart to make <code>HKLM</code> registry changes take effect."}, {"owner": {"reputation": 25, "user_id": 10392918, "user_type": "registered", "profile_image": "https://graph.facebook.com/2478782962139331/picture?type=large", "display_name": "Steven Nguyen", "link": "https://stackoverflow.com/users/10392918/steven-nguyen"}, "edited": false, "score": 0, "creation_date": 1546462666, "post_id": 54012884, "comment_id": 94863024, "body": "My fault. I&#39;ve been running my script files in Powershell, but the code itself is python/command line. I should have noted in the OP that I restarted, but the radio button is still enabled"}, {"owner": {"reputation": 18730, "user_id": 2102693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sD3s8.jpg?s=128&g=1", "display_name": "Bill_Stewart", "link": "https://stackoverflow.com/users/2102693/bill-stewart"}, "edited": false, "score": 3, "creation_date": 1546464454, "post_id": 54012884, "comment_id": 94863749, "body": "Recommend setting this via GPO rather than script."}, {"owner": {"reputation": 25, "user_id": 10392918, "user_type": "registered", "profile_image": "https://graph.facebook.com/2478782962139331/picture?type=large", "display_name": "Steven Nguyen", "link": "https://stackoverflow.com/users/10392918/steven-nguyen"}, "reply_to_user": {"reputation": 18730, "user_id": 2102693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sD3s8.jpg?s=128&g=1", "display_name": "Bill_Stewart", "link": "https://stackoverflow.com/users/2102693/bill-stewart"}, "edited": false, "score": 0, "creation_date": 1546465023, "post_id": 54012884, "comment_id": 94863961, "body": "@Bill_Stewart I assume you can do this programmatically? This is crucial as this batch file will be used for Windows setup purposes on numerous machines so I want to automate as much as possible. New to batch scripting/powershell so any guidance would be helpfulp. Thanks! Was this: <a href=\"https://manuals.gfi.com/en/kerio/control/content/microsoft-active-directory-apple-open-directory/how-to-use-a-windows-active-directory-group-policy-object-gpo-to-logon-and-logout-users-automatically-from-kerio-control-917.html\" rel=\"nofollow noreferrer\">manuals.gfi.com/en/kerio/control/content/&hellip;</a> what you were referencing to?"}, {"owner": {"reputation": 174117, "user_id": 1630171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIS66.png?s=128&g=1", "display_name": "Ansgar Wiechers", "link": "https://stackoverflow.com/users/1630171/ansgar-wiechers"}, "edited": false, "score": 0, "creation_date": 1546466407, "post_id": 54012884, "comment_id": 94864513, "body": "Are you in a domain environment, or do you need to automate system setup without the computers being connected to a domain (OEM style)? In case of the former use GPOs as Bill suggested."}, {"owner": {"reputation": 25, "user_id": 10392918, "user_type": "registered", "profile_image": "https://graph.facebook.com/2478782962139331/picture?type=large", "display_name": "Steven Nguyen", "link": "https://stackoverflow.com/users/10392918/steven-nguyen"}, "edited": false, "score": 0, "creation_date": 1546526643, "post_id": 54012884, "comment_id": 94885267, "body": "The latter. Automating NUCs that aren&#39;t connected to a domain"}, {"owner": {"reputation": 18730, "user_id": 2102693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sD3s8.jpg?s=128&g=1", "display_name": "Bill_Stewart", "link": "https://stackoverflow.com/users/2102693/bill-stewart"}, "edited": false, "score": 0, "creation_date": 1546564974, "post_id": 54012884, "comment_id": 94900182, "body": "In that case, you should consider configuring the settings as a part of the system image instead of trying to automate after-the-fact."}], "owner": {"reputation": 25, "user_id": 10392918, "user_type": "registered", "profile_image": "https://graph.facebook.com/2478782962139331/picture?type=large", "display_name": "Steven Nguyen", "link": "https://stackoverflow.com/users/10392918/steven-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1814, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1546463449, "creation_date": 1546461682, "last_edit_date": 1546463449, "question_id": 54012884, "link": "https://stackoverflow.com/questions/54012884/powershell-command-line-turn-off-password-protected-sharing", "title": "Powershell/Command Line - Turn off password protected sharing", "body": "<p>I am attempting to create a batch script that will turn off Password Protected Sharing programmatically.</p>\n\n<p>This is for Windows 10 so the code I wrote may have worked for Windows 7.</p>\n\n<pre><code>os.system('reg add HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Lsa /v everyoneincludesanonymous /t REG_DWORD /d 0x1 /f')\n\nos.system('reg add HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\LanManServer\\Parameters /v restrictnullsessaccess /t REG_DWORD /d 0 /f')\n</code></pre>\n\n<p>Powershell/command line returns, \"The operation completed successfully\" &amp; the keys have been created in the registry w/ the correct values, name, etc. However, the \"Turn on password protected sharing\" radio button located in the Advanced sharing settings of the Control Panel is enabled (should be disabled). I have restarted the computer as well, and got the same results.</p>\n"}, {"tags": ["python", "hive", "hdfs", "hortonworks-data-platform", "tensorflow-datasets"], "comments": [{"owner": {"reputation": 1385, "user_id": 148680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rbDbI.png?s=128&g=1", "display_name": "chb", "link": "https://stackoverflow.com/users/148680/chb"}, "edited": false, "score": 0, "creation_date": 1546461970, "post_id": 54012846, "comment_id": 94862742, "body": "Welcome to Stack Overflow. Please reformulate your post such that you are asking a clear and specific question. As it is, it seems that you&#39;ve fallen into the <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY pitfall</a>."}, {"owner": {"reputation": 11, "user_id": 10859416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5696909c6951a37b8963aa4c58cf259?s=128&d=identicon&r=PG&f=1", "display_name": "user10859416", "link": "https://stackoverflow.com/users/10859416/user10859416"}, "reply_to_user": {"reputation": 1385, "user_id": 148680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rbDbI.png?s=128&g=1", "display_name": "chb", "link": "https://stackoverflow.com/users/148680/chb"}, "edited": false, "score": 0, "creation_date": 1546463339, "post_id": 54012846, "comment_id": 94863300, "body": "@chb I updated my question to be more clear and specific."}], "owner": {"reputation": 11, "user_id": 10859416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5696909c6951a37b8963aa4c58cf259?s=128&d=identicon&r=PG&f=1", "display_name": "user10859416", "link": "https://stackoverflow.com/users/10859416/user10859416"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 403, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1546463287, "creation_date": 1546461470, "last_edit_date": 1546463287, "question_id": 54012846, "link": "https://stackoverflow.com/questions/54012846/how-to-convert-a-hive-orc-format-table-to-a-tfrecord-file-and-store-in-hdfs", "title": "How to convert a Hive (ORC format) table to a TFRecord file and store in HDFS?", "body": "<p>I\u2019m working on deploying a TensorFlow model to production and would like to update my data pipeline to consume TFRecord file(s) with tf.data.</p>\n\n<p>How can I convert a Hive table stored in ORC format (Hortonworks distribution) into a TFRecord file format that is stored in HDFS? </p>\n"}, {"tags": ["python", "jinja2"], "comments": [{"owner": {"reputation": 2063, "user_id": 196834, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1EhzG.jpg?s=128&g=1", "display_name": "Ashley", "link": "https://stackoverflow.com/users/196834/ashley"}, "edited": false, "score": 1, "creation_date": 1546461641, "post_id": 54012828, "comment_id": 94862598, "body": "Try <code>{{ hosts | join(&#39; &#39;) }}</code> instead of your loop."}, {"owner": {"reputation": 41, "user_id": 10708581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d6a7e1b66e70c970a4fd3a8d4bfcf0b?s=128&d=identicon&r=PG&f=1", "display_name": "Mr39", "link": "https://stackoverflow.com/users/10708581/mr39"}, "reply_to_user": {"reputation": 2063, "user_id": 196834, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1EhzG.jpg?s=128&g=1", "display_name": "Ashley", "link": "https://stackoverflow.com/users/196834/ashley"}, "edited": false, "score": 0, "creation_date": 1546461907, "post_id": 54012828, "comment_id": 94862718, "body": "wow, perfect, exactly what i was looking for, thanks a lot."}, {"owner": {"reputation": 2063, "user_id": 196834, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1EhzG.jpg?s=128&g=1", "display_name": "Ashley", "link": "https://stackoverflow.com/users/196834/ashley"}, "edited": false, "score": 0, "creation_date": 1546462916, "post_id": 54012828, "comment_id": 94863131, "body": "I added that as an answer. Feel free to accept if you are satisfied with it."}], "answers": [{"tags": [], "owner": {"reputation": 2063, "user_id": 196834, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1EhzG.jpg?s=128&g=1", "display_name": "Ashley", "link": "https://stackoverflow.com/users/196834/ashley"}, "is_accepted": true, "score": 1, "last_activity_date": 1546462894, "creation_date": 1546462894, "answer_id": 54013132, "question_id": 54012828, "link": "https://stackoverflow.com/questions/54012828/cant-get-rid-of-newlines/54013132#54013132", "title": "Can&#39;t get rid of newlines", "body": "<p>Try <code>{{ hosts | join(' ') }}</code> instead of your <code>for</code> loop.</p>\n"}], "owner": {"reputation": 41, "user_id": 10708581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d6a7e1b66e70c970a4fd3a8d4bfcf0b?s=128&d=identicon&r=PG&f=1", "display_name": "Mr39", "link": "https://stackoverflow.com/users/10708581/mr39"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 1, "accepted_answer_id": 54013132, "answer_count": 1, "score": 0, "last_activity_date": 1546462894, "creation_date": 1546461359, "question_id": 54012828, "link": "https://stackoverflow.com/questions/54012828/cant-get-rid-of-newlines", "title": "Can&#39;t get rid of newlines", "body": "<p>I am passing a list of hosts to a jinja template, but it keeps rendering it with newline characters, i want them to all be on one line and just a space between them.</p>\n\n<pre><code>list_of_hosts = ['1.1.1.1','1.1.1.2','1.1.1.10','1.1.1.13','1.1.1.11','1.1.1.15']\n</code></pre>\n\n<p>Jinja template:</p>\n\n<pre><code>&lt;html&gt;\n&lt;table&gt;\n&lt;tr&gt;\n&lt;td&gt;Hosts&lt;/td&gt;\n&lt;td&gt;\n{% for host in hosts %}\n    {{ host }}\n{% endfor %}\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/table&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>I tried adding the \"-\" before and after the {{ host }} and it removes all spacing, so it combines everything together. Is there anyway to remove the newline characters and just have it on one line with just a space?</p>\n"}, {"tags": ["python", "attributes", "pytorch"], "answers": [{"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 2, "creation_date": 1546462575, "post_id": 54012925, "comment_id": 94862985, "body": "<code>getattr</code> would be preferable. <code>getattr(models, args.arch)(pretrained=True)</code>."}, {"owner": {"reputation": 439, "user_id": 8532501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ppENb.jpg?s=128&g=1", "display_name": "Jakub Bielan", "link": "https://stackoverflow.com/users/8532501/jakub-bielan"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1546465178, "post_id": 54012925, "comment_id": 94864017, "body": "@chepner - could you exaplain why? What&#39;s the difference?"}, {"owner": {"reputation": 15340, "user_id": 1560035, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fe3aa4a1766a44d8f27db8a95cb573ed?s=128&d=identicon&r=PG", "display_name": "TheoretiCAL", "link": "https://stackoverflow.com/users/1560035/theoretical"}, "reply_to_user": {"reputation": 439, "user_id": 8532501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ppENb.jpg?s=128&g=1", "display_name": "Jakub Bielan", "link": "https://stackoverflow.com/users/8532501/jakub-bielan"}, "edited": false, "score": 2, "creation_date": 1546470607, "post_id": 54012925, "comment_id": 94865843, "body": "@JakubBielan <a href=\"https://stackoverflow.com/questions/14084897/getattr-versus-dict-lookup-which-is-faster\" title=\"getattr versus dict lookup which is faster\">stackoverflow.com/questions/14084897/&hellip;</a>"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1546522226, "post_id": 54012925, "comment_id": 94882653, "body": "In short, think of <code>__dict__</code> as an <i>implementation</i> detail of, not an <i>interface</i> to, the attributes of an object."}], "tags": [], "owner": {"reputation": 15340, "user_id": 1560035, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fe3aa4a1766a44d8f27db8a95cb573ed?s=128&d=identicon&r=PG", "display_name": "TheoretiCAL", "link": "https://stackoverflow.com/users/1560035/theoretical"}, "is_accepted": true, "score": 3, "last_activity_date": 1546470603, "last_edit_date": 1546470603, "creation_date": 1546461891, "answer_id": 54012925, "question_id": 54012820, "link": "https://stackoverflow.com/questions/54012820/how-to-set-a-variable-as-an-attribute/54012925#54012925", "title": "How to set a variable as an attribute?", "body": "<p>You want to access the internal dict to update:</p>\n\n<pre><code>model = models.__dict__[args.arch](pretrained=True)\n</code></pre>\n\n<p>or using <code>getattr</code>:</p>\n\n<pre><code> getattr(models, args.arch)(pretrained=True)\n</code></pre>\n"}], "owner": {"reputation": 439, "user_id": 8532501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ppENb.jpg?s=128&g=1", "display_name": "Jakub Bielan", "link": "https://stackoverflow.com/users/8532501/jakub-bielan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 54012925, "answer_count": 1, "score": 1, "last_activity_date": 1546470603, "creation_date": 1546461316, "question_id": 54012820, "link": "https://stackoverflow.com/questions/54012820/how-to-set-a-variable-as-an-attribute", "title": "How to set a variable as an attribute?", "body": "<p>I'm getting error when trying to set variable as an atribute. </p>\n\n<pre><code>parser = argparse.ArgumentParser()\n\nparser.add_argument('--arch', action='store',\n                dest='arch', default='alexnet',\n                help='Store a simple value') \n\nargs = parser.parse_args()\n\nmodel = models.args.arch(pretrained=True)\n</code></pre>\n\n<p>I know <code>models.args.arch</code> prodocues an error but how syntax should looke like to set a variable as an attribute? I could do it with if statements but it would be lot's of code and I guess it's possible in 1 line. </p>\n"}, {"tags": ["python", "scikit-learn", "pickle", "joblib"], "answers": [{"comments": [{"owner": {"reputation": 3244, "user_id": 9053588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rCHbD.png?s=128&g=1", "display_name": "KRKirov", "link": "https://stackoverflow.com/users/9053588/krkirov"}, "edited": false, "score": 0, "creation_date": 1546721573, "post_id": 54055928, "comment_id": 94946318, "body": "It should be: del my_transform instead of del f. Would this still work with more than one custom function or nested pipelines?"}, {"owner": {"reputation": 11591, "user_id": 1097347, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/efffb39e9e98d002a5b9afe2fde7e50d?s=128&d=identicon&r=PG", "display_name": "Uri Goren", "link": "https://stackoverflow.com/users/1097347/uri-goren"}, "reply_to_user": {"reputation": 3244, "user_id": 9053588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rCHbD.png?s=128&g=1", "display_name": "KRKirov", "link": "https://stackoverflow.com/users/9053588/krkirov"}, "edited": false, "score": 1, "creation_date": 1546721862, "post_id": 54055928, "comment_id": 94946406, "body": "True, thanks, I fixed the code snippet. It would work with nested pipelines and anything that&#39;s marshallable (not every function is)"}, {"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1546853866, "post_id": 54055928, "comment_id": 94976229, "body": "You do intend to load your pipeline in a separate script dont you? So even with your current method, won&#39;t you need to have the code of <code>MyFunctionTransformer</code> ready somewhere in your memory or imports before calling <code>joblib.load</code>?  How is that better than having the code of the <code>function f</code> ready in imports. Maybe from another script? Am I missing something?"}, {"owner": {"reputation": 11591, "user_id": 1097347, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/efffb39e9e98d002a5b9afe2fde7e50d?s=128&d=identicon&r=PG", "display_name": "Uri Goren", "link": "https://stackoverflow.com/users/1097347/uri-goren"}, "edited": false, "score": 0, "creation_date": 1546862857, "post_id": 54055928, "comment_id": 94981010, "body": "Do you agree that if <code>FunctionTransformer</code> would be implemented with my additions (namely <code>setstate</code> and <code>getstate</code>) then pickling would include <i>all</i> the required dependencies for the pipeline ?"}, {"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1546951000, "post_id": 54055928, "comment_id": 95015919, "body": "Ok, so you want to change the scikit-learn api altogether. But in that case, to include  all the dependencies, you would also need to take care of imports that may be used inside the function, like <code>np</code> or <code>pd</code> or any other module imported for use in function or else it will throw errors."}, {"owner": {"reputation": 11591, "user_id": 1097347, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/efffb39e9e98d002a5b9afe2fde7e50d?s=128&d=identicon&r=PG", "display_name": "Uri Goren", "link": "https://stackoverflow.com/users/1097347/uri-goren"}, "edited": false, "score": 0, "creation_date": 1546970855, "post_id": 54055928, "comment_id": 95027352, "body": "Marshalling all of the dependencies (e.g. <code>pd</code>, <code>np</code> etc) falls beyond the scope of this StackOverflow question. It is possible with 3rd party libs such as <code>dill</code>.  If you wish to talk about the technical details of the implementation please comment on: <a href=\"https://github.com/scikit-learn/scikit-learn/pull/12905\" rel=\"nofollow noreferrer\">github.com/scikit-learn/scikit-learn/pull/12905</a> .  P.S. Now that we are on the same page, I&#39;d appreciate if you&#39;d reverse the downvotes. Thanks!"}, {"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1547044241, "post_id": 54055928, "comment_id": 95056928, "body": "Unfortunately, I cant reverse my vote unless the answer is edited."}, {"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1547044586, "post_id": 54055928, "comment_id": 95057180, "body": "Now coming to the issue, I tend to agree with scikit-learn devs here to not do this. (1) Because as they mentioned, if this happens at one place, it will need to be done in several other places which take a callable as input (and there are many) to maintain the API."}, {"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1547044720, "post_id": 54055928, "comment_id": 95057265, "body": "(2) Even after all the efforts (if made), the solution you proposed is not complete as I said in my previous comment, the user will need to save the information about the other imports (or maybe other things) used in functions and will have to import/define those things before using the pickled function this way. So in my opinion this tends to be a use-case specific scenario, which <code>scikit-learn</code> should not aim for."}, {"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1547044877, "post_id": 54055928, "comment_id": 95057371, "body": "Maybe I am beating around the bush, but first you ask if &quot;I agree that pickling would include <i>all</i> the required dependencies for the pipeline&quot; and then say that &quot;marshalling <i>all</i> of the dependencies falls beyond the scope&quot;. Maybe I am critisizing too much ??"}, {"owner": {"reputation": 11591, "user_id": 1097347, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/efffb39e9e98d002a5b9afe2fde7e50d?s=128&d=identicon&r=PG", "display_name": "Uri Goren", "link": "https://stackoverflow.com/users/1097347/uri-goren"}, "edited": false, "score": 0, "creation_date": 1547069119, "post_id": 54055928, "comment_id": 95069687, "body": "There are alot of edge-cases I do not want to cover, for example, if you marshal an object with one version of python and unmarshal in another version, there can be unexpected results. There are other pypi modules (e.g. <code>dill</code>) that aim to solve these issues, and my point is not to re-invent the wheel."}, {"owner": {"reputation": 11591, "user_id": 1097347, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/efffb39e9e98d002a5b9afe2fde7e50d?s=128&d=identicon&r=PG", "display_name": "Uri Goren", "link": "https://stackoverflow.com/users/1097347/uri-goren"}, "edited": false, "score": 1, "creation_date": 1547069437, "post_id": 54055928, "comment_id": 95069813, "body": "Regarding <code>sklearn</code>, when you <code>pickle</code> a <code>TfidfVectotizer</code> transformer, you expect it to store the <code>vocab</code>, <code>tf</code> and <code>idf</code> in order to work. I think that <code>FunctionTransformer</code>, that its sole purpose is to wrap a function with a <code>transformer</code> should at least save this function, or raise a warning if that&#39;s not possible. P.S. I&#39;ve edited my Q&amp;A in light of this discussion."}], "tags": [], "owner": {"reputation": 11591, "user_id": 1097347, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/efffb39e9e98d002a5b9afe2fde7e50d?s=128&d=identicon&r=PG", "display_name": "Uri Goren", "link": "https://stackoverflow.com/users/1097347/uri-goren"}, "is_accepted": true, "score": 6, "last_activity_date": 1547068728, "last_edit_date": 1547068728, "creation_date": 1546719738, "answer_id": 54055928, "question_id": 54012769, "link": "https://stackoverflow.com/questions/54012769/saving-an-sklearn-functiontransformer-with-the-function-it-wraps/54055928#54055928", "title": "Saving an sklearn `FunctionTransformer` with the function it wraps", "body": "<p>I was able to hack a solution using the <code>marshal</code> module (in addition to <code>pickle</code>) and override the magic methods <code>getstate</code> and <code>setstate</code> used by <code>pickle</code>.</p>\n\n<pre><code>import marshal\nfrom types import FunctionType\nfrom sklearn.base import BaseEstimator, TransformerMixin\n\nclass MyFunctionTransformer(BaseEstimator, TransformerMixin):\n    def __init__(self, f):\n        self.func = f\n    def __call__(self, X):\n        return self.func(X)\n    def __getstate__(self):\n        self.func_name = self.func.__name__\n        self.func_code = marshal.dumps(self.func.__code__)\n        del self.func\n        return self.__dict__\n    def __setstate__(self, d):\n        d[\"func\"] = FunctionType(marshal.loads(d[\"func_code\"]), globals(), d[\"func_name\"])\n        del d[\"func_name\"]\n        del d[\"func_code\"]\n        self.__dict__ = d\n    def fit(self, X, y=None):\n        return self\n    def transform(self, X):\n        return self.func(X)\n</code></pre>\n\n<p>Now, if we use <code>MyFunctionTransformer</code> instead of <code>FunctionTransformer</code>, the code works as expected:</p>\n\n<pre><code>from sklearn.externals import joblib\nfrom sklearn.pipeline import Pipeline\n\n@MyFunctionTransformer\ndef my_transform(x):\n    return x*2\npipe = Pipeline([(\"times_2\", my_transform)])\njoblib.dump(pipe, \"pipe.joblib\")\ndel pipe\ndel my_transform\npipe = joblib.load(\"pipe.joblib\")\n</code></pre>\n\n<p>The way this works, is by deleting the function <code>f</code> from the pickle, and instead <code>marshaling</code> its code, and its name.</p>\n\n<p><a href=\"https://pypi.org/project/dill/\" rel=\"nofollow noreferrer\"><code>dill</code></a> also looks like a good alternative to marshaling</p>\n"}], "owner": {"reputation": 11591, "user_id": 1097347, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/efffb39e9e98d002a5b9afe2fde7e50d?s=128&d=identicon&r=PG", "display_name": "Uri Goren", "link": "https://stackoverflow.com/users/1097347/uri-goren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1576, "favorite_count": 3, "accepted_answer_id": 54055928, "answer_count": 1, "score": 12, "last_activity_date": 1547221381, "creation_date": 1546461051, "last_edit_date": 1547221381, "question_id": 54012769, "link": "https://stackoverflow.com/questions/54012769/saving-an-sklearn-functiontransformer-with-the-function-it-wraps", "title": "Saving an sklearn `FunctionTransformer` with the function it wraps", "body": "<p>I am using <code>sklearn</code>'s <code>Pipeline</code> and <code>FunctionTransformer</code> with a custom function</p>\n\n<pre><code>from sklearn.externals import joblib\nfrom sklearn.preprocessing import FunctionTransformer\nfrom sklearn.pipeline import Pipeline\n</code></pre>\n\n<p>This is my code:</p>\n\n<pre><code>def f(x):\n    return x*2\npipe = Pipeline([(\"times_2\", FunctionTransformer(f))])\njoblib.dump(pipe, \"pipe.joblib\")\ndel pipe\ndel f\npipe = joblib.load(\"pipe.joblib\") # Causes an exception\n</code></pre>\n\n<p>And I get this error:</p>\n\n<blockquote>\n  <p>AttributeError: module '__ main__' has no attribute 'f'</p>\n</blockquote>\n\n<p>How can this be resolved ?</p>\n\n<p>Note that this issue occurs also in <code>pickle</code></p>\n"}]