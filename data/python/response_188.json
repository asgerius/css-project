[{"tags": ["python", "python-3.x", "conventions"], "comments": [{"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 0, "creation_date": 1534378403, "post_id": 51867912, "comment_id": 90687832, "body": "This is one of those things which cannot be strictly defined. You have to use your gut feeling (which means, the more experienced you are, the better decisions you make), because it really depends on more things than one could put in words. Anyway, I would not say that the number of lines is very important, unless it is really extreme (I would not make many files with 3 lines each, nor do I like to have many of them with thousands of lines of code)."}, {"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 1, "creation_date": 1534378475, "post_id": 51867912, "comment_id": 90687851, "body": "Anyway, this is primarily an opinion-based question and therefore I&#39;d say off-topic on SO."}, {"owner": {"reputation": 683, "user_id": 3652113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13d5db97d538a9e813217dc97963961a?s=128&d=identicon&r=PG&f=1", "display_name": "BoobyTrap", "link": "https://stackoverflow.com/users/3652113/boobytrap"}, "reply_to_user": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 0, "creation_date": 1534378738, "post_id": 51867912, "comment_id": 90687906, "body": "A lot of things are defined in PEP that often can be regarded as preference or opinion, like line length or space between brackets and what is inside them. Also, to be fair, I asked if there are any conventions (even if not Python official) about this, rather than what people prefer."}, {"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 0, "creation_date": 1534378929, "post_id": 51867912, "comment_id": 90687944, "body": "Sure, and once they are defined e.g. in PEP-8, then they are no longer opinion-based ;) And what you are asking is not defined in a PEP, so the best answer you can get is that it is not defined, or many conflicting answers based on users&#39; opinions - which is why such questions are off topic ;)"}], "answers": [{"comments": [{"owner": {"reputation": 683, "user_id": 3652113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13d5db97d538a9e813217dc97963961a?s=128&d=identicon&r=PG&f=1", "display_name": "BoobyTrap", "link": "https://stackoverflow.com/users/3652113/boobytrap"}, "edited": false, "score": 0, "creation_date": 1534379622, "post_id": 51868053, "comment_id": 90688114, "body": "The entire project isn&#39;t about GUI, only those 4 files, for now. There are few more files that add the functionality needed for the GUI, like the statistics, that is why I chose <code>guiclasses</code>. It is a valid point nonetheless.   Your idea about learning by example is actually a really good one, I&#39;ll look into mailman and IDLE."}, {"owner": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "reply_to_user": {"reputation": 683, "user_id": 3652113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13d5db97d538a9e813217dc97963961a?s=128&d=identicon&r=PG&f=1", "display_name": "BoobyTrap", "link": "https://stackoverflow.com/users/3652113/boobytrap"}, "edited": false, "score": 0, "creation_date": 1534379772, "post_id": 51868053, "comment_id": 90688148, "body": "Hope some of the clues will help! I&#39;d just save some typing by naming <code>guiclasses</code> just <code>gui</code>, classes part looks redundant to me."}, {"owner": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "reply_to_user": {"reputation": 683, "user_id": 3652113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13d5db97d538a9e813217dc97963961a?s=128&d=identicon&r=PG&f=1", "display_name": "BoobyTrap", "link": "https://stackoverflow.com/users/3652113/boobytrap"}, "edited": false, "score": 0, "creation_date": 1534403787, "post_id": 51868053, "comment_id": 90694399, "body": "Also, write back here with tkinter examples, if you find any worth reviewing. Perhaps Spyder should be on a list too."}], "tags": [], "owner": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "is_accepted": true, "score": 1, "last_activity_date": 1534378782, "creation_date": 1534378782, "answer_id": 51868053, "question_id": 51867912, "link": "https://stackoverflow.com/questions/51867912/splitting-code-into-modules-conventions/51868053#51868053", "title": "Splitting code into modules (conventions)", "body": "<p>I'm not familiar with <code>tkinter</code>, so my advice would be rather broad.</p>\n\n<p>You can use any split into modules which you feel is better, but </p>\n\n<ul>\n<li>as readability counts try making names coherent and do not repeat yourself: <code>guiclasses</code> - your enire progarm is about GUI, and there obviously classes somewhere,  why repeath that in a name? imagine typing all that in in import, make it meaningful to type</li>\n<li>flat structure is better than nested, three modules do not have to go to submodule</li>\n<li>best split is across layers of abstraction (this is probably hardest and specific to <code>tkinter</code>) </li>\n<li>anything in a module shoudl be rather self-sufficient and quite isolated from other parts of the program</li>\n<li>modules should make good entitites for unit testing (eg share same fixtures)</li>\n<li>can you write an understandable docstring for a module? then it's a good one.</li>\n<li>try learning by example, I often seek wisdom for naming and package structure in Barry Warsaw <a href=\"https://gitlab.com/mailman/mailman/tree/master/src/mailman\" rel=\"nofollow noreferrer\">mailman</a>, maybe you can try finding some reputable repo with <code>tkinter</code> to follow (eg IDLE?). </li>\n</ul>\n\n<p>From purely syntatic view I would have named the modules as:</p>\n\n<pre><code>- &lt;package_name&gt;\n   - baseframe\n   - textframe\n   - window\n   - main\n</code></pre>\n"}], "owner": {"reputation": 683, "user_id": 3652113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13d5db97d538a9e813217dc97963961a?s=128&d=identicon&r=PG&f=1", "display_name": "BoobyTrap", "link": "https://stackoverflow.com/users/3652113/boobytrap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 51868053, "answer_count": 1, "score": 1, "last_activity_date": 1534378782, "creation_date": 1534377477, "question_id": 51867912, "link": "https://stackoverflow.com/questions/51867912/splitting-code-into-modules-conventions", "title": "Splitting code into modules (conventions)", "body": "<p>So I've been searching for a bit and couldn't find anything on Google or PEP discussing this.<br>\nI am doing a project with <code>tkinter</code> and I had a file, that is part of a project, that was only 200 lines of code (excluding all the commented out code). While the entire file was related to the GUI portion of the project, it felt a bit long and a bit broad to me.<br>\nI ended up splitting the file into 4 different files that each has its own portion of the GUI.<br>\nBasically, the directory looks like this:  </p>\n\n<pre><code>project/\n        guiclasses/\n                   statisticsframe.py\n                   textframes.py\n                   windowclass.py\n        main_gui.py\n        ...\n</code></pre>\n\n<p><code>statisticsframe</code> has a class of a frame that shows statistics about stuff.<br>\n<code>textframes</code> holds 3 classes of frames holding textareas, one of them inherits Frame, the others inherit the first one.<br>\n<code>windowclass</code> basically creates the root of the window and all the general initialization for a <code>tkinter</code> GUI.<br>\n<code>main_gui</code> isn't actually the name but it simply combines all the above three and runs the <code>mainloop()</code></p>\n\n<p>Overall, each file is now 40-60 lines of code.</p>\n\n<p>I am wondering if there are any conventions regarding this. The rule of thumb in most languages is that if you can reuse the functions/ classes elsewhere then you should split, though in Python it is less of a problem since you can import specific classes and functions from modules.</p>\n\n<p>Sorry if it isn't coherent enough, nearly 3AM here and it is simply sitting in the back of my head.</p>\n"}, {"tags": ["python", "csv", "pytorch"], "owner": {"reputation": 21, "user_id": 3592323, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6c7a3ae48262664196640cf74237bc6d?s=128&d=identicon&r=PG&f=1", "display_name": "Rajan", "link": "https://stackoverflow.com/users/3592323/rajan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 18, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1534409737, "creation_date": 1534377467, "last_edit_date": 1534409737, "question_id": 51867911, "link": "https://stackoverflow.com/questions/51867911/csv-class-reader-not-getting-actual-image", "title": "CSV Class reader not getting actual image", "body": "<p>I have a CSV file reader which reads a csv file with one column and obtains data about the image such as its label. After much debugging I have found my all data about the image is read but I'm missing the actual get image part, so currently, cv2 shows the input as a black box.</p>\n\n<p>Im not sure what to do to achieve this, and need some assistance</p>\n\n<p>My CSV Reader Below</p>\n\n<pre><code>def __init__(self, csvPath, imageHeight, imageWidth, transform = None):\n    \"\"\"\n    Arguments:\n        A CSV File Path\n        Path to Image Foldr\n        Extension of Images\n        PIL Transforms\n    \"\"\"\n    self.dataFromCSV = pD.read_csv(csvPath)\n    self.dataLabels = nP.asarray(self.dataFromCSV.iloc[:, 0])\n    self.imageHeight = imageHeight\n    self.imageWidth = imageWidth\n    self.transform = transform\n\ndef __getitem__(self, index):\n    singleImageLabel = self.dataLabels[index]\n    imagePath = singleImageLabel.split(\";\")[0]\n    print ('Path: ' + str(imagePath))\n    originalImage = cv2.imread(imagePath)\n    cv2.imshow('IMAGE', originalImage)\n\n    # Create an Empty Numpy Array to Fill\n    imageAsNumpy = nP.ones((32, 32), dtype = 'uint8')\n\n    # Fill the Numpy Array with Data from Pandas DF\n    for i in range(1):\n        rowPosition = (i-1) // self.imageHeight\n        columnPosition = (i-1) % self.imageWidth\n        indexFirst = self.dataFromCSV.iloc[index][i].split(\";\")[3]\n        indexLast = self.dataFromCSV.iloc[index][i].split(\";\")[6]\n        imageAsNumpy[rowPosition][columnPosition] = indexFirst + indexLast\n        print ('LABEL: ' + str(singleImageLabel))\n        cv2.imshow('INPUT',imageAsNumpy)\n        cv2.waitKey(0)\n        cv2.destroyAllWindows()\n\n    # Convert Image from Numpy Array to PIL Image, Mode 'L' is for Grayscale\n    imageAsImage = Image.fromarray(imageAsNumpy)\n    imageAsImage = imageAsImage.convert('1')\n\n    # Transform Image to Tensor\n    if self.transform is not None:\n        imageAsTensor = self.transform(imageAsImage)\n\n    # Transform Label to Tensor\n    labelAsLabel = int(singleImageLabel.split(\";\")[7])\n    labelAsTensor = torch.from_numpy(nP.array(labelAsLabel))\n    # print ('Target: ' + str(labelAsTensor))\n\n    # Return Image &amp; the Label\n    return (imageAsTensor, labelAsLabel)\n\ndef __len__(self):\n    return len(self.dataFromCSV.index)\n</code></pre>\n"}, {"tags": ["javascript", "python", "node.js", "opencv", "stdout"], "answers": [{"tags": [], "owner": {"reputation": 19, "user_id": 7236696, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-S80-EvCchxY/AAAAAAAAAAI/AAAAAAAACLg/_GFBHgCVY3o/photo.jpg?sz=128", "display_name": "omkarstha", "link": "https://stackoverflow.com/users/7236696/omkarstha"}, "is_accepted": true, "score": 0, "last_activity_date": 1534796493, "creation_date": 1534796493, "answer_id": 51937994, "question_id": 51867897, "link": "https://stackoverflow.com/questions/51867897/console-logging-the-python-script-console-output-in-node-js/51937994#51937994", "title": "console logging the python script console output in node.js", "body": "<p>the realtime logging can be done by flushing the stdout in python script</p>\n\n<pre><code>print('somestring', flush=True)\n</code></pre>\n\n<p>works fine for flushing in python 3.3+</p>\n\n<p>and the string concatenation overlapping was because the returned string had '\\r' in it\nI removed '\\r' the var with </p>\n\n<pre><code>variable.replace(/\\n|\\r/g, \"\")\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 7236696, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-S80-EvCchxY/AAAAAAAAAAI/AAAAAAAACLg/_GFBHgCVY3o/photo.jpg?sz=128", "display_name": "omkarstha", "link": "https://stackoverflow.com/users/7236696/omkarstha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3389, "favorite_count": 0, "accepted_answer_id": 51937994, "answer_count": 1, "score": 0, "last_activity_date": 1534796493, "creation_date": 1534377312, "question_id": 51867897, "link": "https://stackoverflow.com/questions/51867897/console-logging-the-python-script-console-output-in-node-js", "title": "console logging the python script console output in node.js", "body": "<p>I'm working on opencv python and node.js server in which python script prints out the string \"moved\" useful for my node server</p>\n\n<p>I'm using 'python-shell' for spawning python script as a child process\nbut the problem is that i'm working on a video file in opencv and node only console logs only after the cv2.imshow(video window) is exited. I want it to console log the output in node from python script on real-time.</p>\n\n<p>Neither i'm getting the argument in the conditional statement (message === 'moved')</p>\n\n<h2>server.js</h2>\n\n<pre><code>var express = require('express');\nvar app = express();\n\nvar PythonShell = require('python-shell');\nvar pyshell = new PythonShell(__dirname + './script.py');\n\npyshell.on('message', function (message) {\n  // received a message sent from the Python file script.py (returns \"moved\" string)\n  console.log(message);\n  console.log(message + 'hi');\n  if(true){\n    console.log('hey')\n  }\n  if(message === 'moved'){\n    console.log('hit')\n  }\n});\n</code></pre>\n\n<h2>Console in Node.js</h2>\n\n<pre><code>moved\nhived\nhey\n</code></pre>\n\n<p>also why did 'moved' and 'hi' concatenated to 'hived'?</p>\n"}, {"tags": ["python", "tensorflow", "keras", "out-of-memory", "conv-neural-network"], "comments": [{"owner": {"reputation": 8468, "user_id": 1586200, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/111c497a3eb270092100e5ee807d9994?s=128&d=identicon&r=PG&f=1", "display_name": "Autonomous", "link": "https://stackoverflow.com/users/1586200/autonomous"}, "edited": false, "score": 0, "creation_date": 1534377501, "post_id": 51867876, "comment_id": 90687667, "body": "Have you counted the memory used up by intermediate layers in both forward and backward propagation?"}, {"owner": {"reputation": 3063, "user_id": 2475195, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ba67bfbb808f7a06faa96d310bd00ed6?s=128&d=identicon&r=PG", "display_name": "Baron Yugovich", "link": "https://stackoverflow.com/users/2475195/baron-yugovich"}, "reply_to_user": {"reputation": 8468, "user_id": 1586200, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/111c497a3eb270092100e5ee807d9994?s=128&d=identicon&r=PG&f=1", "display_name": "Autonomous", "link": "https://stackoverflow.com/users/1586200/autonomous"}, "edited": false, "score": 0, "creation_date": 1534378252, "post_id": 51867876, "comment_id": 90687797, "body": "No, how would I do that, and how would I use that info? Please explain"}, {"owner": {"reputation": 8468, "user_id": 1586200, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/111c497a3eb270092100e5ee807d9994?s=128&d=identicon&r=PG&f=1", "display_name": "Autonomous", "link": "https://stackoverflow.com/users/1586200/autonomous"}, "edited": false, "score": 0, "creation_date": 1534378657, "post_id": 51867876, "comment_id": 90687888, "body": "Let;s say you take input a <code>224 x 224 x 3</code> image and pass it through a <code>3 x 3 x 64</code> conv layer (with zero-padding to maintain the size) followed by a <code>2 x 2</code> maxpool, the output of these two layers will be <code>112 x 112 x 64</code>. Now, if you have 32 images, the output of the max-pool layer will occupy <code>32 x 112 x 112 x 64 = 25690112</code> bytes ~ 25 MB. You have to account for all such intermediate outputs. Use <a href=\"https://stackoverflow.com/questions/43137288/how-to-determine-needed-memory-of-keras-model\">this</a> to determine memory used since it can get quite complicated. You can reduce batch size if needed."}, {"owner": {"reputation": 3063, "user_id": 2475195, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ba67bfbb808f7a06faa96d310bd00ed6?s=128&d=identicon&r=PG", "display_name": "Baron Yugovich", "link": "https://stackoverflow.com/users/2475195/baron-yugovich"}, "reply_to_user": {"reputation": 8468, "user_id": 1586200, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/111c497a3eb270092100e5ee807d9994?s=128&d=identicon&r=PG&f=1", "display_name": "Autonomous", "link": "https://stackoverflow.com/users/1586200/autonomous"}, "edited": false, "score": 0, "creation_date": 1534378768, "post_id": 51867876, "comment_id": 90687913, "body": "Are there any flags I can pass to minimize storing of intermediate data, or saving previous iteration&#39;s state whenever possible?"}, {"owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1534379638, "post_id": 51867876, "comment_id": 90688119, "body": "I think we need more information to help you, like which model are you training, the size and number of images (not total size as you gave), and training parameters. Are you training on CPU or GPU? Please also include the real unedited out of memory errors."}, {"owner": {"reputation": 3063, "user_id": 2475195, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ba67bfbb808f7a06faa96d310bd00ed6?s=128&d=identicon&r=PG", "display_name": "Baron Yugovich", "link": "https://stackoverflow.com/users/2475195/baron-yugovich"}, "edited": false, "score": 0, "creation_date": 1534380283, "post_id": 51867876, "comment_id": 90688254, "body": "I am using CPU, training on 1000 images that are 2048x2048, total size 5 GB."}, {"owner": {"reputation": 8468, "user_id": 1586200, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/111c497a3eb270092100e5ee807d9994?s=128&d=identicon&r=PG&f=1", "display_name": "Autonomous", "link": "https://stackoverflow.com/users/1586200/autonomous"}, "edited": false, "score": 0, "creation_date": 1534387527, "post_id": 51867876, "comment_id": 90689557, "body": "What is the batch size and how much CPU ram do you have? Also, how much memory is being used if you set ?<code>batch_size = 1</code>"}], "answers": [{"tags": [], "owner": {"reputation": 389, "user_id": 7396398, "user_type": "registered", "profile_image": "https://graph.facebook.com/1588454514505283/picture?type=large", "display_name": "Andr&#233; Guerra", "link": "https://stackoverflow.com/users/7396398/andr%c3%a9-guerra"}, "is_accepted": false, "score": 0, "last_activity_date": 1534396007, "creation_date": 1534396007, "answer_id": 51869933, "question_id": 51867876, "link": "https://stackoverflow.com/questions/51867876/keras-improve-memory-performance/51869933#51869933", "title": "Keras - improve memory performance", "body": "<p>You don't have to load the whole dataset at once! I would create a flow generator for training and testing.\nSomething like this: <a href=\"https://www.kaggle.com/humananalog/keras-generator-for-reading-directly-from-bson\" rel=\"nofollow noreferrer\">https://www.kaggle.com/humananalog/keras-generator-for-reading-directly-from-bson</a></p>\n"}], "owner": {"reputation": 3063, "user_id": 2475195, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ba67bfbb808f7a06faa96d310bd00ed6?s=128&d=identicon&r=PG", "display_name": "Baron Yugovich", "link": "https://stackoverflow.com/users/2475195/baron-yugovich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534396007, "creation_date": 1534377045, "question_id": 51867876, "link": "https://stackoverflow.com/questions/51867876/keras-improve-memory-performance", "title": "Keras - improve memory performance", "body": "<p>I am running a convolutional neural network on input set that is <code>5GB</code>, and training output is same size, so total of 10GB of data. I am reserving about <code>50GB</code> of memory, but still getting memory issues. I am using adam optimizer, my model fitting looks like this:</p>\n\n<pre><code>cnn_model.fit(x_train,y_train, validation_data=(x_test,y_test), callbacks=[earlystopper], epochs=25)\n</code></pre>\n\n<p>Any idea how I can improve the situation? Someone here <a href=\"https://github.com/tensorflow/tensorflow/issues/18736\" rel=\"nofollow noreferrer\">https://github.com/tensorflow/tensorflow/issues/18736</a> says \"Adam and RMSProp are problematic because they memorize historical gradients\", any ideas how to address that?</p>\n"}, {"tags": ["python", "multithreading"], "comments": [{"owner": {"reputation": 22993, "user_id": 1394393, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mSjIL.jpg?s=128&g=1", "display_name": "jpmc26", "link": "https://stackoverflow.com/users/1394393/jpmc26"}, "edited": false, "score": 0, "creation_date": 1534380286, "post_id": 51867869, "comment_id": 90688255, "body": "Be aware of the <a href=\"https://wiki.python.org/moin/GlobalInterpreterLock\" rel=\"nofollow noreferrer\">global interpreter lock</a>. Unless you need the two components to communicate somehow, you&#39;re almost certainly better off just segregating the two components into separate processes. (And segregation is something to strongly consider even if they do need to communicate.)"}, {"owner": {"reputation": 22993, "user_id": 1394393, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mSjIL.jpg?s=128&g=1", "display_name": "jpmc26", "link": "https://stackoverflow.com/users/1394393/jpmc26"}, "edited": false, "score": 0, "creation_date": 1534380512, "post_id": 51867869, "comment_id": 90688295, "body": "Your example code is missing all of its imports, making it difficult to tell what functions and objects are coming from where. <code>app</code> is not initialized anywhere. Please don&#39;t post broken code samples."}], "answers": [{"tags": [], "owner": {"reputation": 164, "user_id": 3429090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGkYE.jpg?s=128&g=1", "display_name": "campellcl", "link": "https://stackoverflow.com/users/3429090/campellcl"}, "is_accepted": false, "score": 0, "last_activity_date": 1534377916, "creation_date": 1534377916, "answer_id": 51867972, "question_id": 51867869, "link": "https://stackoverflow.com/questions/51867869/do-python-threads-self-terminate-if-not-looping/51867972#51867972", "title": "Do python threads self terminate if not looping?", "body": "<p>From the official documentation on <a href=\"https://docs.python.org/3/library/threading.html#thread-objects\" rel=\"nofollow noreferrer\">Threading</a>:</p>\n\n<blockquote>\n  <p>Once the thread\u2019s activity is started, the thread is considered \u2018alive\u2019. It stops being alive when its run() method terminates \u2013 either normally, or by raising an unhandled exception. The is_alive() method tests whether the thread is alive.</p>\n</blockquote>\n\n<p>So to answer your question, your Thread objects will terminate when their corresponding <code>run()</code> methods terminate. You can use <code>threading.Thread.is_alive()</code> to determine if the thread's <code>run()</code> method has completed. </p>\n\n<p>The documentation goes on to discuss the differences between normal threads and Daemon threads (which do have a difference in termination strategies) but that doesn't seem applicable with the example you posted.</p>\n"}, {"tags": [], "owner": {"reputation": 12703, "user_id": 584597, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3d519ba6b69a89cc8ec99001eea2059b?s=128&d=identicon&r=PG", "display_name": "payne", "link": "https://stackoverflow.com/users/584597/payne"}, "is_accepted": true, "score": 0, "last_activity_date": 1534377954, "creation_date": 1534377954, "answer_id": 51867978, "question_id": 51867869, "link": "https://stackoverflow.com/questions/51867869/do-python-threads-self-terminate-if-not-looping/51867978#51867978", "title": "Do python threads self terminate if not looping?", "body": "<p>From the documentation:  </p>\n\n<blockquote>\n  <p>Once the thread\u2019s activity is started, the thread is considered\n  \u2018alive\u2019. It stops being alive when its run() method [or target method]\n  terminates \u2013 either normally, or by raising an unhandled exception.</p>\n</blockquote>\n\n<p>See:  <a href=\"https://docs.python.org/3.7/library/threading.html#threading.Thread.run\" rel=\"nofollow noreferrer\">https://docs.python.org/3.7/library/threading.html#threading.Thread.run</a></p>\n\n<p>In the context of your example, each thread you create will terminate when the <code>printFortune()</code> method for that thread completes (or throws an exception). </p>\n"}], "owner": {"reputation": 540, "user_id": 1004253, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/PTMrt.png?s=128&g=1", "display_name": "mishap_n", "link": "https://stackoverflow.com/users/1004253/mishap-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 51867978, "answer_count": 2, "score": -1, "last_activity_date": 1534377954, "creation_date": 1534376921, "question_id": 51867869, "link": "https://stackoverflow.com/questions/51867869/do-python-threads-self-terminate-if-not-looping", "title": "Do python threads self terminate if not looping?", "body": "<p>Do threads in python self terminate if they are not looping? </p>\n\n<p>My google-foo is garbage today apparently. But basically: I have a little thermal printer running on a pi, which is also hosting a webhook for an alexa service. the printer needs to run at the same time the alexa is speaking. Each time the launch function is called it fires off the thread and does its thing. i don't want to block the main program, but is this going to spawn a bunch of forever threads? Or do they just finish their task and then stop? Also this is super brute force. </p>\n\n<pre><code>def printFortune():\n    fortune = makeFortune()\n    print(\"printFortune!\",fortune)\n    printer.println(fortune[0])\n    printer.println()\n    printer.println(fortune[1])\n    printer.println()\n    printer.println(fortune[2])\n    printer.println()\n    printer.feed(3)\n    printer.setDefault()\n\n### APP THINGS #####################\n\n@app.route('/',methods=['GET','POST'])\ndef index():\n    return \"hello! This is an alexa test.\"\n\n### ALEXA THINGS #####################\n\n@ask.on_session_started\ndef new_session():\n    log.info('new session started')\n    log.info(request.locale)\n    beep = request.locale\n    print(beep)\n\n@ask.launch\ndef launch():\n    t = Thread(target=printFortune)\n    t.start()\n    to_say = \"This is a very long response that is not the response that's being printed\" \n    return statement(to_say)\n\n\n@ask.intent('AMAZON.HelpIntent')\ndef help():\n    return question(\"helping\").reprompt(\"helping\")\n\n@ask.intent('AMAZON.StopIntent')\ndef stop():\n    return statement(\"stopping\")\n\n@ask.intent('AMAZON.CancelIntent')\ndef cancel():\n    return statement(\"canceling\")\n\n@ask.session_ended\ndef session_ended():\n    log.debug(\"Session Ended\")\n    print(\"session ended\")\n    return \"{}\", 200\n\nif __name__ == '__main__':\n    app.config['ASK_VERIFY_REQUESTS'] = False\n    app.run(host='0.0.0.0', port=5000, debug=True, use_reloader=False)\n</code></pre>\n"}, {"tags": ["python", "r", "regex", "string", "dataframe"], "comments": [{"owner": {"reputation": 80563, "user_id": 496803, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b8556bc403e46083a0cac69f902fa04f?s=128&d=identicon&r=PG", "display_name": "thelatemail", "link": "https://stackoverflow.com/users/496803/thelatemail"}, "edited": false, "score": 0, "creation_date": 1534377038, "post_id": 51867868, "comment_id": 90687573, "body": "Just an initial point, what you have in <code>data</code> is a <code>matrix</code>, not a <code>data.frame</code>."}], "answers": [{"comments": [{"owner": {"reputation": 80563, "user_id": 496803, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b8556bc403e46083a0cac69f902fa04f?s=128&d=identicon&r=PG", "display_name": "thelatemail", "link": "https://stackoverflow.com/users/496803/thelatemail"}, "edited": false, "score": 0, "creation_date": 1534377793, "post_id": 51867913, "comment_id": 90687728, "body": "Nice answer. Quick query - is there a way to make <code>recode()</code> use a lookup table/named vector as input?"}, {"owner": {"reputation": 50305, "user_id": 1315767, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Iyt0M.png?s=128&g=1", "display_name": "Jilber Urbina", "link": "https://stackoverflow.com/users/1315767/jilber-urbina"}, "reply_to_user": {"reputation": 80563, "user_id": 496803, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b8556bc403e46083a0cac69f902fa04f?s=128&d=identicon&r=PG", "display_name": "thelatemail", "link": "https://stackoverflow.com/users/496803/thelatemail"}, "edited": false, "score": 0, "creation_date": 1534378419, "post_id": 51867913, "comment_id": 90687836, "body": "@thelatemail see my edit, I&#39;m not sure if this is what you asked for."}, {"owner": {"reputation": 80563, "user_id": 496803, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b8556bc403e46083a0cac69f902fa04f?s=128&d=identicon&r=PG", "display_name": "thelatemail", "link": "https://stackoverflow.com/users/496803/thelatemail"}, "edited": false, "score": 1, "creation_date": 1534378508, "post_id": 51867913, "comment_id": 90687864, "body": "That&#39;s exactly what I meant, cheers! I imagine being able to feed in a big <code>list</code> might be helpful when you have many categories to recode, rather than typing them all out as a long call."}, {"owner": {"reputation": 35, "user_id": 6598858, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f26701cd8ecdb244187d2119eaa27ab8?s=128&d=identicon&r=PG&f=1", "display_name": "scorpionz", "link": "https://stackoverflow.com/users/6598858/scorpionz"}, "edited": false, "score": 0, "creation_date": 1534394626, "post_id": 51867913, "comment_id": 90690947, "body": "@Jilber Urbina, thank you so much! you are really awesome!"}], "tags": [], "owner": {"reputation": 50305, "user_id": 1315767, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Iyt0M.png?s=128&g=1", "display_name": "Jilber Urbina", "link": "https://stackoverflow.com/users/1315767/jilber-urbina"}, "is_accepted": true, "score": 3, "last_activity_date": 1534378288, "last_edit_date": 1534378288, "creation_date": 1534377492, "answer_id": 51867913, "question_id": 51867868, "link": "https://stackoverflow.com/questions/51867868/search-dataframe-in-r-for-string-using-predefined-table-and-add-corresponding-co/51867913#51867913", "title": "Search Dataframe in r for string using predefined table and add corresponding column", "body": "<p>We can use some regex and <code>recode</code> from dplyr</p>\n\n<pre><code>library(dplyr)\nnewColumn &lt;- recode(sub(\".*(3850|7200|3560|Data Center).*\", \"\\\\1\", data[,1]), \n                    `3850` = 50, \n                    `7200` = 2,\n                    `3560` = 60,\n                    `Data Center` = 240)\n\ncbind(data, newColumn)\n\n                                                                    newColumn\n[1,] \"Cisco Catalyst 3850 Series Ethernet Stackable Switch\" \"ports\" \"50\"     \n[2,] \"Cisco 7200 Series Routers\"                            \"Ports\" \"2\"      \n[3,] \"Cisco Catalyst 3560-CX Series Switches\"               \"Ports\" \"60\"     \n[4,] \"Data Center Switches\"                                 \"Ports\" \"240\"    \n[5,] \"SW_3560_IDF1d_1879.ccs.ccctov.org\"                    \"Ports\" \"60\"     \n</code></pre>\n\n<p>A slightly different way to do it:</p>\n\n<pre><code>codes &lt;- sub(\".*(3850|7200|3560|Data Center).*\", \"\\\\1\", data[,1])\nnewCodes &lt;- list(`3850` = 50, `7200` = 2, `3560` = 60, `Data Center` = 240)\ncbind(data, recode(codes, !!!newCodes))\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 6598858, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f26701cd8ecdb244187d2119eaa27ab8?s=128&d=identicon&r=PG&f=1", "display_name": "scorpionz", "link": "https://stackoverflow.com/users/6598858/scorpionz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 51867913, "answer_count": 1, "score": 1, "last_activity_date": 1534378288, "creation_date": 1534376916, "last_edit_date": 1534376981, "question_id": 51867868, "link": "https://stackoverflow.com/questions/51867868/search-dataframe-in-r-for-string-using-predefined-table-and-add-corresponding-co", "title": "Search Dataframe in r for string using predefined table and add corresponding column", "body": "<p>Here is the sample data frame</p>\n\n<pre><code>     # create a sample test scenarios\ndata &lt;- rbind(c(\"Cisco Catalyst 3850 Series Ethernet Stackable Switch\",\"ports\"), c(\"Cisco 7200 Series Routers\", \"Ports\"),\n              c(\"Cisco Catalyst 3560-CX Series Switches\", \"Ports\"), c(\"Data Center Switches\", \"Ports\"), \n              c(\"SW_3560_IDF1d_1879.ccs.ccctov.org\", \"Ports\")) # sample data\n</code></pre>\n\n<p>String to value table</p>\n\n<pre><code>3850 - 50\n7200 - 2\n3560 - 60\nData Center - 240\n3560 - 60\n</code></pre>\n\n<p>Final output sample:</p>\n\n<pre><code>finaldata &lt;- rbind(c(\"Cisco Catalyst 3850 Series Ethernet Stackable Switch\",\"ports\", 50), c(\"Cisco 7200 Series Routers\", \"Ports\", 2),\n          c(\"Cisco Catalyst 3560-CX Series Switches\", \"Ports\", 60), c(\"Data Center Switches\", \"Ports\", 240), \n          c(\"SW_3560_IDF1d_1879.ccs.ccctgov.org\", \"Ports\", 60)) # sample data\n</code></pre>\n\n<p>Appreciate your help or guidance! </p>\n"}, {"tags": ["python", "regex", "python-3.x", "byte"], "answers": [{"tags": [], "owner": {"reputation": 1525, "user_id": 222189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/36cb170adfa384f33da06c74450e2365?s=128&d=identicon&r=PG", "display_name": "matejcik", "link": "https://stackoverflow.com/users/222189/matejcik"}, "is_accepted": true, "score": 1, "last_activity_date": 1534377456, "creation_date": 1534377456, "answer_id": 51867908, "question_id": 51867867, "link": "https://stackoverflow.com/questions/51867867/regex-does-not-match-according-to-python/51867908#51867908", "title": "Regex does not match according to python", "body": "<p>It's because the data that you're trying to match contain a newline character.</p>\n\n<p>Try this: <code>re.match(regex, data, re.DOTALL)</code>. The <code>DOTALL</code> flag will make sure <code>.</code> matches <em>any</em> byte, including newline.</p>\n"}], "owner": {"reputation": 1238, "user_id": 3049987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13670c6d7f471fa532baca3e9de8b9d6?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Woocker", "link": "https://stackoverflow.com/users/3049987/tim-woocker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 51867908, "answer_count": 1, "score": 0, "last_activity_date": 1534377456, "creation_date": 1534376903, "question_id": 51867867, "link": "https://stackoverflow.com/questions/51867867/regex-does-not-match-according-to-python", "title": "Regex does not match according to python", "body": "<p>I am working on a program that needs to match some bytes to a regex.\nSince I am working with bytes, my regex and data are both the python type <code>bytes</code>.\nI'm not sure if the next part is relevant so you can propably skip to the last 3 lines and help me find out why the regex does not match the 16 bytes. Thank you!</p>\n\n<p>My regex is:</p>\n\n<pre><code>regex = b'\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00.{16}\\x17\\x00\\x00\\x00\\x1f\\x00\\x00\\x00WalkDown'\n</code></pre>\n\n<p>I know it could be shorter to achieve the same result but this regex is auto-generated by the program itself so I can't change it.</p>\n\n<p>I am trying to match this regex with this data:</p>\n\n<pre><code>data = b'\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00`,z\\x11#\\x00\\x00\\x00k\\x004\\x00\\r\\x00\\n\\x00\\x17\\x00\\x00\\x00\\x1f\\x00\\x00\\x00WalkDown'\n</code></pre>\n\n<p>This is the python code I am using to match them:</p>\n\n<pre><code>import re\nprint(re.match(regex, data))\n</code></pre>\n\n<p>This prints out <code>None</code> so I think the regex does not match with the data.</p>\n\n<p>Since I am not testing for a string but for bytes, I can't use any online regex debuggers because they only support string regex.</p>\n\n<p>I tried to replace the 16 unknown bytes with \"1\" in my data like this and it matches the regex:</p>\n\n<pre><code>data = b'\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x001111111111111111\\x17\\x00\\x00\\x00\\x1f\\x00\\x00\\x00WalkDown'\n</code></pre>\n\n<p>I think this shows that the error is in the .{16} part. So I used python to check the length of the corresponding part:</p>\n\n<pre><code>len(b'`,z\\x11#\\x00\\x00\\x00k\\x004\\x00\\r\\x00\\n\\x00')\n</code></pre>\n\n<p>returns <code>16</code>. And it should be 16.</p>\n\n<p>So why do these 16 bytes not match the regex <code>b'.{16}'</code></p>\n\n<p>Thank you!</p>\n"}, {"tags": ["python", "python-3.x", "opencv", "python-imaging-library"], "comments": [{"owner": {"reputation": 187, "user_id": 9490631, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3nQZQ3Q8W4k/AAAAAAAAAAI/AAAAAAAAAYU/-s_FuWel0tc/photo.jpg?sz=128", "display_name": "Nazar Khan", "link": "https://stackoverflow.com/users/9490631/nazar-khan"}, "edited": false, "score": 0, "creation_date": 1534393155, "post_id": 51867834, "comment_id": 90690605, "body": "what about pytesseract?"}, {"owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "edited": false, "score": 0, "creation_date": 1534896788, "post_id": 51867834, "comment_id": 90866957, "body": "$x^2+y^2=z^2\\int_{I=0}^{j=5}$"}], "answers": [{"comments": [{"owner": {"reputation": 859, "user_id": 10158438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e5702aca0d421f347592484442f4278?s=128&d=identicon&r=PG&f=1", "display_name": "Howard GENG", "link": "https://stackoverflow.com/users/10158438/howard-geng"}, "reply_to_user": {"reputation": 33, "user_id": 9217780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8df7d3262d84680eb578a39ad547d1f8?s=128&d=identicon&r=PG", "display_name": "Spencer McMurray", "link": "https://stackoverflow.com/users/9217780/spencer-mcmurray"}, "edited": false, "score": 0, "creation_date": 1534423576, "post_id": 51875292, "comment_id": 90706057, "body": "You are welcome. Good luck and have fun with your neural network training."}], "tags": [], "owner": {"reputation": 859, "user_id": 10158438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e5702aca0d421f347592484442f4278?s=128&d=identicon&r=PG&f=1", "display_name": "Howard GENG", "link": "https://stackoverflow.com/users/10158438/howard-geng"}, "is_accepted": true, "score": 5, "last_activity_date": 1550553502, "last_edit_date": 1550553502, "creation_date": 1534416694, "answer_id": 51875292, "question_id": 51867834, "link": "https://stackoverflow.com/questions/51867834/recognizing-handwritten-digits-off-a-scanned-image/51875292#51875292", "title": "Recognizing handwritten digits off a scanned image", "body": "<p>I assume the input image name is \"sqaures.jpg\"</p>\n\n<p>First of all, import required libraries and load image in both RGB and Gray format:</p>\n\n<pre><code>import cv2\nimport numpy as np\n\nimage = cv2.imread(\"squares.jpg\", 1)\nimage_gray = cv2.imread(\"squares.jpg\", 0)\n</code></pre>\n\n<p>Then, we perform a simple operation to clean some noise from the input image using np.where() function:</p>\n\n<pre><code>image_gray = np.where(image_gray &gt; 240, 255, image_gray)\nimage_gray = np.where(image_gray &lt;= 240, 0, image_gray)\n</code></pre>\n\n<p>Because we want to grab the whole square regions from the image. We need to blur the image a little bit before performing the adaptive thresholding method:</p>\n\n<pre><code>image_gray = cv2.blur(image_gray, (5, 5))\nim_th = cv2.adaptiveThreshold(image_gray, 255, \n                              cv2.ADAPTIVE_THRESH_GAUSSIAN_C, \n                              cv2.THRESH_BINARY, 115, 1)\n\nkernal = cv2.getStructuringElement(cv2.MORPH_RECT, (3, 3))\nim_th = cv2.morphologyEx(im_th, cv2.MORPH_OPEN, kernal, iterations=3)\n</code></pre>\n\n<p>Use contour detection in OpenCV to find all possible regions:</p>\n\n<pre><code>_, contours, _ = cv2.findContours(im_th.copy(), cv2.RETR_LIST, \n                                  cv2.CHAIN_APPROX_SIMPLE)\n\ncontours = sorted(contours, key=cv2.contourArea, reverse=True)\ncontours.remove(contours[0])  #remove the biggest contour\n</code></pre>\n\n<p>Finally, try to find the potential square regions based on the ratio of height and width:</p>\n\n<pre><code>square_rects = []\nsquare_areas = []\nfor i, cnt in enumerate(contours):\n    (x, y, w, h) = cv2.boundingRect(cnt)\n    ar = w / float(h)\n    if 0.9 &lt; ar &lt; 1.1:\n        square_rects.append(((x,y), (x+w, y+h)))\n        square_areas.append(w*h)  #store area information\n</code></pre>\n\n<p>We need to remove anything that is too small from the list by doing the follows:</p>\n\n<pre><code>import statistics\nmedian_size_limit= statistics.median(square_areas) * 0.8\nsquare_rects = [rect for i, rect in enumerate(square_rects)\n                    if square_areas[i] &gt; median_size_limit]\n</code></pre>\n\n<p>You can visually check the output by drawing all the rectangles on the original image:</p>\n\n<pre><code>for rect in square_rects:\n    cv2.rectangle(image, rect[0], rect[1], (0,255,0), 2)\n\ncv2.imwrite(\"_output_image.png\", image)\n\ncv2.imshow(\"image\", image)\ncv2.waitKey()\n</code></pre>\n\n<p>You can use \"square_rects\" to locate all the squares and crop them from the original image.</p>\n\n<p>The following is the preview of the final result. <a href=\"https://i.stack.imgur.com/V9LYR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/V9LYR.png\" alt=\"Preview of Final Result\"></a></p>\n\n<p>Cheers.</p>\n"}], "owner": {"reputation": 33, "user_id": 9217780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8df7d3262d84680eb578a39ad547d1f8?s=128&d=identicon&r=PG", "display_name": "Spencer McMurray", "link": "https://stackoverflow.com/users/9217780/spencer-mcmurray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 644, "favorite_count": 1, "accepted_answer_id": 51875292, "answer_count": 1, "score": 3, "last_activity_date": 1550553502, "creation_date": 1534376507, "last_edit_date": 1534377915, "question_id": 51867834, "link": "https://stackoverflow.com/questions/51867834/recognizing-handwritten-digits-off-a-scanned-image", "title": "Recognizing handwritten digits off a scanned image", "body": "<p>I'm trying to read all of the handwritten digits in the scanned image here</p>\n\n<p><img src=\"https://i.stack.imgur.com/zUmqt.jpg\" alt=\"\"></p>\n\n<p>I tried looking through pixel-by-pixel using PIL, cropping the sub-images, then feeding them through a neural network, but the regions that were being cropped never quite lined up and led to a lot of inaccuracy. </p>\n\n<p>I've also tried using OpenCV to find all the grey squares, then crop the images and feed them through a neural network, but I couldn't seem to get it to find all or even only miss a few; it would miss ~30% of squares. (I'm not very experienced with OpenCV, so I could be messing something up)</p>\n\n<p>So I'm just looking for a potential idea/solution for this problem, so any suggestions would be appreciated, thanks in advance!</p>\n"}, {"tags": ["python", "pyqt", "pyqt5"], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 0, "last_activity_date": 1534376866, "creation_date": 1534376866, "answer_id": 51867865, "question_id": 51867811, "link": "https://stackoverflow.com/questions/51867811/how-to-import-a-custom-widget-pyqt-into-python-code/51867865#51867865", "title": "How to import a custom widget (PyQT) into Python Code", "body": "<p><code>Ui_Form</code> is not a widget, it is a class that serves to fill a widget, so the simple solution would be the following:</p>\n\n<pre><code>import MyWidget\n\n...\nform = MyWidget.Ui_Form()\nw = QtWidgets.QWidget()\nform.setupUi(w)\ngrid.addWidget(w, 4 ,2)\n...\n</code></pre>\n\n<p>But the <a href=\"http://pyqt.sourceforge.net/Docs/PyQt5/designer.html\" rel=\"nofollow noreferrer\">documentation</a> recommends creating a class that inherits from the appropriate widget and fills in it:</p>\n\n<pre><code>import MyWidget\n\nclass SomeWidget(QtWidgets.QWidget, MyWidget.Ui_Form): \n    def __init__(self, parent=None):\n        super(SomeWidget, self).__init__(parent)\n        self.setupUi(self)\n\n    ...\n    w = SomeWidget()\n    grid.addWidget(w, 4 ,2)\n</code></pre>\n"}], "owner": {"reputation": 232, "user_id": 10145397, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208447481133981/picture?type=large", "display_name": "Miguel Duran Diaz", "link": "https://stackoverflow.com/users/10145397/miguel-duran-diaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 363, "favorite_count": 0, "accepted_answer_id": 51867865, "answer_count": 1, "score": 0, "last_activity_date": 1534376866, "creation_date": 1534376312, "last_edit_date": 1534376473, "question_id": 51867811, "link": "https://stackoverflow.com/questions/51867811/how-to-import-a-custom-widget-pyqt-into-python-code", "title": "How to import a custom widget (PyQT) into Python Code", "body": "<p>I created a custom widget with Qt Designer (then created the py file with pyuic5)  but I'm unable to use it in my code. I searched a lot about this and I found that I'm supposed to use something like this:</p>\n\n<pre><code>import MyWidget\nself.MyWidget = MyWidget.Ui_Form()\nself.MyWidget.setupUi(self)\n</code></pre>\n\n<p>When I try to add it to my grid using:</p>\n\n<pre><code>grid.addWidget(self.MyWidget, 4 ,2)\n</code></pre>\n\n<p>I get the following error code:</p>\n\n<blockquote>\n  <p>TypeError: arguments did not match any overloaded call:<br>\n  addWidget(self, QWidget): argument 1 has unexpected type 'Ui_Form'<br>\n  addWidget(self, QWidget, int, int, alignment: Union[Qt.Alignment,\n  Qt.AlignmentFlag] = 0): argument 1 has unexpected type 'Ui_Form'<br>\n  addWidget(self, QWidget, int, int, int, int, alignment:\n  Union[Qt.Alignment, Qt.AlignmentFlag] = 0): argument 1 has unexpected\n  type 'Ui_Form'</p>\n</blockquote>\n\n<p>The error makes sense and I kind of understand where it comes from but I don't know how to fix it and how to use my widget.</p>\n\n<pre><code>Code of my widget generated with pyuic5:\n# -*- coding: utf-8 -*-\n\n# Form implementation generated from reading ui file 'untitled.ui'\n#\n# Created by: PyQt5 UI code generator 5.9.2\n#\n# WARNING! All changes made in this file will be lost!\n\nfrom PyQt5 import QtCore, QtGui, QtWidgets\n\nclass Ui_Form(object):\n    def setupUi(self, Form):\n        Form.setObjectName(\"Form\")\n        Form.resize(400, 300)\n        self.lcdNumber = QtWidgets.QLCDNumber(Form)\n        self.lcdNumber.setGeometry(QtCore.QRect(120, 70, 64, 23))\n        self.lcdNumber.setObjectName(\"lcdNumber\")\n        self.label = QtWidgets.QLabel(Form)\n        self.label.setGeometry(QtCore.QRect(120, 40, 71, 16))\n        self.label.setObjectName(\"label\")\n        self.horizontalSlider = QtWidgets.QSlider(Form)\n        self.horizontalSlider.setGeometry(QtCore.QRect(90, 90, 160, 29))\n        self.horizontalSlider.setOrientation(QtCore.Qt.Horizontal)\n        self.horizontalSlider.setObjectName(\"horizontalSlider\")\n\n        self.retranslateUi(Form)\n        QtCore.QMetaObject.connectSlotsByName(Form)\n\n    def retranslateUi(self, Form):\n        _translate = QtCore.QCoreApplication.translate\n        Form.setWindowTitle(_translate(\"Form\", \"Form\"))\n        self.label.setText(_translate(\"Form\", \"Frecuencia\"))\n</code></pre>\n\n<p>Btw, the class for window and all the other stuff works correctly. I just posted the piece of code I need help with. I used the MyWidget.Ui_Form() in the <strong>init</strong> method.</p>\n"}, {"tags": ["python", "python-3.x", "selenium", "htmlunit"], "answers": [{"comments": [{"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "edited": false, "score": 0, "creation_date": 1534668832, "post_id": 51905230, "comment_id": 90781956, "body": "Good catch, error trace log <code>selenium.common.exceptions.WebDriverException: Message: java.net.MalformedURLException: no protocol: google.com</code> confirms it."}], "tags": [], "owner": {"reputation": 849, "user_id": 1634939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NDwvw.jpg?s=128&g=1", "display_name": "AnkDasCo", "link": "https://stackoverflow.com/users/1634939/ankdasco"}, "is_accepted": false, "score": 1, "last_activity_date": 1534566044, "creation_date": 1534566044, "answer_id": 51905230, "question_id": 51867761, "link": "https://stackoverflow.com/questions/51867761/is-it-possible-to-use-the-htmlunit-driver-in-python-with-selenium/51905230#51905230", "title": "Is it possible to use the HTMLUnit driver in Python with Selenium?", "body": "<p>With the current stacktrace, I think the problem is with the URL protocol that you are using. Use -</p>\n\n<pre><code>driver.get(\"https://www.google.com\")\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 10123359, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O13Xb.jpg?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/10123359/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1229, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1534566044, "creation_date": 1534375820, "last_edit_date": 1534376313, "question_id": 51867761, "link": "https://stackoverflow.com/questions/51867761/is-it-possible-to-use-the-htmlunit-driver-in-python-with-selenium", "title": "Is it possible to use the HTMLUnit driver in Python with Selenium?", "body": "<p>I'm interesting in running my Selenium test scripts and using HTML Unit as my browser/driver. Is it possible to use HTML with Python? I tried using</p>\n\n<pre><code>driver = webdriver.Remote(desired_capabilities=webdriver.DesiredCapabilities.HTMLUNITWITHJS)\ndriver.get(\"google.com\")\n</code></pre>\n\n<p>but I get the following response:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \".\\testtesttest.py\", line 7, in &lt;module&gt;\n    driver.get(\"google.com\")\n  File \"C:\\Users\\slawi\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\selenium\\webdriver\\remote\\webdriver.py\", line 326, in get\n    self.execute(Command.GET, {'url': url})\n  File \"C:\\Users\\slawi\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\selenium\\webdriver\\remote\\webdriver.py\", line 314, in execute\n    self.error_handler.check_response(response)\n  File \"C:\\Users\\slawi\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\selenium\\webdriver\\remote\\errorhandler.py\", line 242, in check_response\n    raise exception_class(message, screen, stacktrace)\nselenium.common.exceptions.WebDriverException: Message: java.net.MalformedURLException: no protocol: google.com\nBuild info: version: '3.14.0', revision: 'aacccce0', time: '2018-08-02T20:13:22.693Z'\nSystem info: host: 'DESKTOP-16VCI25', ip: '192.168.139.1', os.name: 'Windows 10', os.arch: 'x86', os.version: '10.0', java.version: '1.8.0_101'\nDriver info: driver.version: HtmlUnitDriver\nStacktrace:\n    at org.openqa.selenium.htmlunit.HtmlUnitDriver.get (HtmlUnitDriver.java:667)\n    at org.openqa.selenium.remote.server.handler.ChangeUrl.call (ChangeUrl.java:40)\n    at org.openqa.selenium.remote.server.handler.ChangeUrl.call (ChangeUrl.java:25)\n    at org.openqa.selenium.remote.server.handler.WebDriverHandler.handle (WebDriverHandler.java:41)\n    at org.openqa.selenium.remote.server.rest.ResultConfig.handle (ResultConfig.java:113)\n    at org.openqa.selenium.remote.server.JsonHttpCommandHandler.handleRequest (JsonHttpCommandHandler.java:186)\n    at org.openqa.selenium.remote.server.InMemorySession.execute (InMemorySession.java:82)\n    at org.openqa.selenium.remote.server.WebDriverServlet.lambda$handle$3 (WebDriverServlet.java:250)\n    at java.util.concurrent.Executors$RunnableAdapter.call (None:-1)\n    at java.util.concurrent.FutureTask.run (None:-1)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker (None:-1)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run (None:-1)\n    at java.lang.Thread.run (None:-1)\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "progress-bar"], "comments": [{"owner": {"reputation": 3225, "user_id": 9917694, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eYLrricMNLQ/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3U1NPjt3ei5L4we8FlqCJz7mWBlg/mo/photo.jpg?sz=128", "display_name": "N Chauhan", "link": "https://stackoverflow.com/users/9917694/n-chauhan"}, "edited": false, "score": 1, "creation_date": 1534376066, "post_id": 51867748, "comment_id": 90687371, "body": "What if you pad your substitute value with whitespace before it gets substituted?"}, {"owner": {"reputation": 547, "user_id": 3549866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28c44437c470660d07d9e3c12a25f409?s=128&d=identicon&r=PG", "display_name": "Terris", "link": "https://stackoverflow.com/users/3549866/terris"}, "reply_to_user": {"reputation": 3225, "user_id": 9917694, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eYLrricMNLQ/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3U1NPjt3ei5L4we8FlqCJz7mWBlg/mo/photo.jpg?sz=128", "display_name": "N Chauhan", "link": "https://stackoverflow.com/users/9917694/n-chauhan"}, "edited": false, "score": 0, "creation_date": 1534429881, "post_id": 51867748, "comment_id": 90710462, "body": "Thanks for your reply! Unfortunately, the length is based on strings in a database that can get rather long. Padding excessive whitespace can cause the terminal to wrap and the cursor to go to the next line which defeats the niceness of ProgressBar."}], "answers": [{"tags": [], "owner": {"reputation": 547, "user_id": 3549866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28c44437c470660d07d9e3c12a25f409?s=128&d=identicon&r=PG", "display_name": "Terris", "link": "https://stackoverflow.com/users/3549866/terris"}, "is_accepted": false, "score": 0, "last_activity_date": 1534442321, "last_edit_date": 1534442321, "creation_date": 1534429597, "answer_id": 51879440, "question_id": 51867748, "link": "https://stackoverflow.com/questions/51867748/clear-line-to-the-right-of-the-text-displayed-by-progressbar-formatcustomtext-p/51879440#51879440", "title": "Clear line to the right of the text displayed by progressbar.FormatCustomText (python)", "body": "<p>Print \"\\033[K\" at the end</p>\n\n<p><code>progressbar.ProgressBar(widgets=[format_custom_text, \"\\033[K\"])\n</code></p>\n\n<p>Ideally the text to substitute should have a maximum length based on a percentage of the width of the terminal. I found a way to get the width but there is probably a better way! (<a href=\"https://stackoverflow.com/questions/566746/how-to-get-linux-console-window-width-in-python\">How to get Linux console window width in Python</a>) </p>\n\n<p>This works in python3+:</p>\n\n<p><code>\nimport shutil\nshutil.get_terminal_size((80, 20)) # Provide default values</code></p>\n"}, {"tags": [], "owner": {"reputation": 547, "user_id": 3549866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28c44437c470660d07d9e3c12a25f409?s=128&d=identicon&r=PG", "display_name": "Terris", "link": "https://stackoverflow.com/users/3549866/terris"}, "is_accepted": true, "score": 0, "last_activity_date": 1539793982, "creation_date": 1539793982, "answer_id": 52859643, "question_id": 51867748, "link": "https://stackoverflow.com/questions/51867748/clear-line-to-the-right-of-the-text-displayed-by-progressbar-formatcustomtext-p/52859643#52859643", "title": "Clear line to the right of the text displayed by progressbar.FormatCustomText (python)", "body": "<p>There is a <a href=\"https://github.com/WoLpH/python-progressbar/issues/170#issuecomment-430656579\" rel=\"nofollow noreferrer\">better answer</a> on github</p>\n"}], "owner": {"reputation": 547, "user_id": 3549866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28c44437c470660d07d9e3c12a25f409?s=128&d=identicon&r=PG", "display_name": "Terris", "link": "https://stackoverflow.com/users/3549866/terris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 52859643, "answer_count": 2, "score": 0, "last_activity_date": 1539793982, "creation_date": 1534375733, "question_id": 51867748, "link": "https://stackoverflow.com/questions/51867748/clear-line-to-the-right-of-the-text-displayed-by-progressbar-formatcustomtext-p", "title": "Clear line to the right of the text displayed by progressbar.FormatCustomText (python)", "body": "<p>I am using progressbar2 with FormatCustomText. The text is parameterized (eg \"%s\") and the width of the string to display varies.</p>\n\n<p>Let's say on the first iteration, the substituted text is \"AA.\" On the second iteration, the text is \"B.\"</p>\n\n<p>progressbar displays BA on the second iteration instead of B.</p>\n\n<p>Is there a way to clear everything to the right of the cursor to the end of the line after B? Normally, this is done with control-K (chr(11)). </p>\n\n<p>Unfortunately, adding chr(11) to the end of the string given to FormatCustomText causes a newline character to be output for each iteration.</p>\n\n<p>Any other ideas?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1534376083, "post_id": 51867712, "comment_id": 90687377, "body": "looks to me like the code requires the c++11 random library. Possible reasons it fails. Maybe wrong VS version or the build is using in appropriate flags to specify c++ version?"}, {"owner": {"reputation": 3485, "user_id": 4043556, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/g7cx1.jpg?s=128&g=1", "display_name": "dimitris93", "link": "https://stackoverflow.com/users/4043556/dimitris93"}, "reply_to_user": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1534377389, "post_id": 51867712, "comment_id": 90687642, "body": "@PaulRooney The author of the library also says that this is probably the issue. But what&#39;s the fix? I am using Visual C++ 9.0 and Python 2.7.15. If you look <a href=\"https://wiki.python.org/moin/WindowsCompilers#Which_Microsoft_Visual_C.2B-.2B-_compiler_to_use_with_a_specific_Python_version_.3F\" rel=\"nofollow noreferrer\">here</a> it says that I am supposed to use Version 9.0 for Python 2.7. Right?"}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1534377595, "post_id": 51867712, "comment_id": 90687682, "body": "Yeah I&#39;m not sure. Version 9 is also known as VS 2008, which I&#39;m guessing has no c++ 11 support. So seems like the way to fix it is to take the plunge and go with an appropriate version of python 3. The library is making 2.7 incompatible by virtue of using c++ features that VS2008 doesn&#39;t support."}, {"owner": {"reputation": 928, "user_id": 2260553, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jkXDO.jpg?s=128&g=1", "display_name": "Asav Patel", "link": "https://stackoverflow.com/users/2260553/asav-patel"}, "edited": false, "score": 0, "creation_date": 1534379749, "post_id": 51867712, "comment_id": 90688144, "body": "if you using anaconda try <code>conda install -c conda-forge implicit</code>"}], "owner": {"reputation": 3485, "user_id": 4043556, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/g7cx1.jpg?s=128&g=1", "display_name": "dimitris93", "link": "https://stackoverflow.com/users/4043556/dimitris93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 666, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1534375402, "creation_date": 1534375402, "question_id": 51867712, "link": "https://stackoverflow.com/questions/51867712/error-installing-python-implicit-framework", "title": "Error installing python &quot;implicit&quot; framework", "body": "<p>I am trying to install the implicit package on Windows 10 and Python 2.7.15, using this command:</p>\n\n<pre><code>pip install implicit\n</code></pre>\n\n<p>There seems to be an error with implicit/bpr.cpp if I am not mistaken. Anyone knows what the problem is?</p>\n\n<blockquote>\n  <p>implicit\\bpr.cpp(1277) : fatal error C1003: error count exceeds 100; stopping compilation</p>\n</blockquote>\n\n<p>This is the log I am getting:</p>\n\n<pre><code>    C:\\WINDOWS\\system32&gt;pip install implicit\nCollecting implicit\n  Using cached https://files.pythonhosted.org/packages/d9/0c/7f9f065cceab3c27b7207bbbc3127ff698f1dbaabc2e5f5ef92cb3a39a43/implicit-0.3.6.tar.gz\nRequirement already satisfied: numpy in c:\\python27\\lib\\site-packages (from implicit) (1.11.2+mkl)\nRequirement already satisfied: scipy&gt;=0.16 in c:\\python27\\lib\\site-packages (from implicit) (0.18.1)\nRequirement already satisfied: h5py in c:\\python27\\lib\\site-packages (from implicit) (2.8.0)\nRequirement already satisfied: tqdm in c:\\python27\\lib\\site-packages (from implicit) (4.24.0)\nRequirement already satisfied: six in c:\\python27\\lib\\site-packages (from h5py-&gt;implicit) (1.10.0)\nBuilding wheels for collected packages: implicit\n  Running setup.py bdist_wheel for implicit ... error\n  Complete output from command c:\\python27\\python.exe -u -c \"import setuptools, tokenize;__file__='c:\\\\users\\\\shiro\\\\appdata\\\\local\\\\temp\\\\pip-install-civoat\\\\implicit\\\\setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" bdist_wheel -d c:\\users\\shiro\\appdata\\local\\temp\\pip-wheel-iv5suw --python-tag cp27:\n  WARNING:root:The nvcc binary could not be located in your $PATH. Either add it to your path, or set $CUDAHOME to enable CUDA extensions\n  Failed to find CUDA toolkit. Building without GPU acceleration.\n  running bdist_wheel\n  running build\n  running build_py\n  creating build\n  creating build\\lib.win-amd64-2.7\n  creating build\\lib.win-amd64-2.7\\implicit\n  copying implicit\\als.py -&gt; build\\lib.win-amd64-2.7\\implicit\n  copying implicit\\approximate_als.py -&gt; build\\lib.win-amd64-2.7\\implicit\n  copying implicit\\nearest_neighbours.py -&gt; build\\lib.win-amd64-2.7\\implicit\n  copying implicit\\recommender_base.py -&gt; build\\lib.win-amd64-2.7\\implicit\n  copying implicit\\utils.py -&gt; build\\lib.win-amd64-2.7\\implicit\n  copying implicit\\__init__.py -&gt; build\\lib.win-amd64-2.7\\implicit\n  creating build\\lib.win-amd64-2.7\\implicit\\cuda\n  copying implicit\\cuda\\__init__.py -&gt; build\\lib.win-amd64-2.7\\implicit\\cuda\n  creating build\\lib.win-amd64-2.7\\implicit\\datasets\n  copying implicit\\datasets\\lastfm.py -&gt; build\\lib.win-amd64-2.7\\implicit\\datasets\n  copying implicit\\datasets\\million_song_dataset.py -&gt; build\\lib.win-amd64-2.7\\implicit\\datasets\n  copying implicit\\datasets\\movielens.py -&gt; build\\lib.win-amd64-2.7\\implicit\\datasets\n  copying implicit\\datasets\\sketchfab.py -&gt; build\\lib.win-amd64-2.7\\implicit\\datasets\n  copying implicit\\datasets\\_download.py -&gt; build\\lib.win-amd64-2.7\\implicit\\datasets\n  copying implicit\\datasets\\__init__.py -&gt; build\\lib.win-amd64-2.7\\implicit\\datasets\n  running build_ext\n  building 'implicit._als' extension\n  creating build\\temp.win-amd64-2.7\n  creating build\\temp.win-amd64-2.7\\Release\n  creating build\\temp.win-amd64-2.7\\Release\\implicit\n  C:\\Users\\shiro\\AppData\\Local\\Programs\\Common\\Microsoft\\Visual C++ for Python\\9.0\\VC\\Bin\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -Ic:\\python27\\include -Ic:\\python27\\PC /Tpimplicit\\_als.cpp /Fobuild\\temp.win-amd64-2.7\\Release\\implicit\\_als.obj /O2 /openmp\n  _als.cpp\n  C:\\Users\\shiro\\AppData\\Local\\Programs\\Common\\Microsoft\\Visual C++ for Python\\9.0\\VC\\Include\\xlocale(342) : warning C4530: C++ exception handler used, but unwind semantics are not enabled. Specify /EHsc\n  implicit\\_als.cpp(3637) : warning C4244: '=' : conversion from 'long' to 'char', possible loss of data\n  implicit\\_als.cpp(3919) : warning C4244: '=' : conversion from 'long' to 'char', possible loss of data\n  implicit\\_als.cpp(4404) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(4405) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(4850) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\n  implicit\\_als.cpp(5568) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(5569) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(6732) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(6733) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(7178) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\n  implicit\\_als.cpp(7896) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(7897) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(9060) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(9061) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(9506) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\n  implicit\\_als.cpp(10224) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(10225) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(11678) : warning C4244: '=' : conversion from 'long' to 'char', possible loss of data\n  implicit\\_als.cpp(11960) : warning C4244: '=' : conversion from 'long' to 'char', possible loss of data\n  implicit\\_als.cpp(12468) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(12469) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(12854) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\n  implicit\\_als.cpp(12999) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\n  implicit\\_als.cpp(13040) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\n  implicit\\_als.cpp(13526) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(13527) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(14584) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(14585) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(14970) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\n  implicit\\_als.cpp(15115) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\n  implicit\\_als.cpp(15156) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\n  implicit\\_als.cpp(15642) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(15643) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(16700) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(16701) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(17086) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\n  implicit\\_als.cpp(17231) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\n  implicit\\_als.cpp(17272) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\n  implicit\\_als.cpp(17758) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(17759) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(19070) : warning C4244: '=' : conversion from 'long' to 'char', possible loss of data\n  implicit\\_als.cpp(19352) : warning C4244: '=' : conversion from 'long' to 'char', possible loss of data\n  implicit\\_als.cpp(19842) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(19843) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(19844) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(20148) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\n  implicit\\_als.cpp(20652) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(20653) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(20654) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(21462) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(21463) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(21464) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(21768) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\n  implicit\\_als.cpp(22272) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(22273) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(22274) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(23082) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(23083) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(23084) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(23388) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\n  implicit\\_als.cpp(23892) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(23893) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  implicit\\_als.cpp(23894) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n  C:\\Users\\shiro\\AppData\\Local\\Programs\\Common\\Microsoft\\Visual C++ for Python\\9.0\\VC\\Bin\\amd64\\link.exe /DLL /nologo /INCREMENTAL:NO /LIBPATH:c:\\python27\\libs /LIBPATH:c:\\python27\\PCbuild\\amd64 /LIBPATH:c:\\python27\\PC\\VS9.0\\amd64 /EXPORT:init_als build\\temp.win-amd64-2.7\\Release\\implicit\\_als.obj /OUT:build\\lib.win-amd64-2.7\\implicit\\_als.pyd /IMPLIB:build\\temp.win-amd64-2.7\\Release\\implicit\\_als.lib /MANIFESTFILE:build\\temp.win-amd64-2.7\\Release\\implicit\\_als.pyd.manifest\n  _als.obj : warning LNK4197: export 'init_als' specified multiple times; using first specification\n     Creating library build\\temp.win-amd64-2.7\\Release\\implicit\\_als.lib and object build\\temp.win-amd64-2.7\\Release\\implicit\\_als.exp\n  C:\\Users\\shiro\\AppData\\Local\\Programs\\Common\\Microsoft\\Visual C++ for Python\\9.0\\WinSDK\\Bin\\x64\\mt.exe -nologo -manifest build\\temp.win-amd64-2.7\\Release\\implicit\\_als.pyd.manifest -outputresource:build\\lib.win-amd64-2.7\\implicit\\_als.pyd;2\n  building 'implicit._nearest_neighbours' extension\n  C:\\Users\\shiro\\AppData\\Local\\Programs\\Common\\Microsoft\\Visual C++ for Python\\9.0\\VC\\Bin\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -Iimplicit -Ic:\\python27\\include -Ic:\\python27\\PC /Tpimplicit\\_nearest_neighbours.cpp /Fobuild\\temp.win-amd64-2.7\\Release\\implicit\\_nearest_neighbours.obj /O2 /openmp\n  _nearest_neighbours.cpp\n  C:\\Users\\shiro\\AppData\\Local\\Programs\\Common\\Microsoft\\Visual C++ for Python\\9.0\\VC\\Include\\xlocale(342) : warning C4530: C++ exception handler used, but unwind semantics are not enabled. Specify /EHsc\n  implicit\\_nearest_neighbours.cpp(2867) : warning C4244: '=' : conversion from 'long' to 'char', possible loss of data\n  implicit\\_nearest_neighbours.cpp(3187) : warning C4800: 'int' : forcing value to bool 'true' or 'false' (performance warning)\n  implicit\\_nearest_neighbours.cpp(3604) : warning C4267: '=' : conversion from 'size_t' to 'int', possible loss of data\n  implicit\\_nearest_neighbours.cpp(4027) : warning C4800: 'int' : forcing value to bool 'true' or 'false' (performance warning)\n  implicit\\_nearest_neighbours.cpp(4444) : warning C4267: '=' : conversion from 'size_t' to 'int', possible loss of data\n  C:\\Users\\shiro\\AppData\\Local\\Programs\\Common\\Microsoft\\Visual C++ for Python\\9.0\\VC\\Bin\\amd64\\link.exe /DLL /nologo /INCREMENTAL:NO /LIBPATH:c:\\python27\\libs /LIBPATH:c:\\python27\\PCbuild\\amd64 /LIBPATH:c:\\python27\\PC\\VS9.0\\amd64 /EXPORT:init_nearest_neighbours build\\temp.win-amd64-2.7\\Release\\implicit\\_nearest_neighbours.obj /OUT:build\\lib.win-amd64-2.7\\implicit\\_nearest_neighbours.pyd /IMPLIB:build\\temp.win-amd64-2.7\\Release\\implicit\\_nearest_neighbours.lib /MANIFESTFILE:build\\temp.win-amd64-2.7\\Release\\implicit\\_nearest_neighbours.pyd.manifest\n  _nearest_neighbours.obj : warning LNK4197: export 'init_nearest_neighbours' specified multiple times; using first specification\n     Creating library build\\temp.win-amd64-2.7\\Release\\implicit\\_nearest_neighbours.lib and object build\\temp.win-amd64-2.7\\Release\\implicit\\_nearest_neighbours.exp\n  C:\\Users\\shiro\\AppData\\Local\\Programs\\Common\\Microsoft\\Visual C++ for Python\\9.0\\WinSDK\\Bin\\x64\\mt.exe -nologo -manifest build\\temp.win-amd64-2.7\\Release\\implicit\\_nearest_neighbours.pyd.manifest -outputresource:build\\lib.win-amd64-2.7\\implicit\\_nearest_neighbours.pyd;2\n  building 'implicit.bpr' extension\n  C:\\Users\\shiro\\AppData\\Local\\Programs\\Common\\Microsoft\\Visual C++ for Python\\9.0\\VC\\Bin\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -Iimplicit -Ic:\\python27\\include -Ic:\\python27\\PC /Tpimplicit\\bpr.cpp /Fobuild\\temp.win-amd64-2.7\\Release\\implicit\\bpr.obj /O2 /openmp\n  bpr.cpp\n  C:\\Users\\shiro\\AppData\\Local\\Programs\\Common\\Microsoft\\Visual C++ for Python\\9.0\\VC\\Include\\xlocale(342) : warning C4530: C++ exception handler used, but unwind semantics are not enabled. Specify /EHsc\n  implicit\\bpr.cpp(954) : error C2039: 'mt19937' : is not a member of 'std'\n  implicit\\bpr.cpp(954) : error C2065: 'mt19937' : undeclared identifier\n  implicit\\bpr.cpp(955) : error C2039: 'uniform_int_distribution' : is not a member of 'std'\n  implicit\\bpr.cpp(955) : error C2065: 'uniform_int_distribution' : undeclared identifier\n  implicit\\bpr.cpp(955) : error C2062: type 'long' unexpected\n  implicit\\bpr.cpp(956) : error C2143: syntax error : missing ';' before '}'\n  implicit\\bpr.cpp(966) : error C2143: syntax error : missing ';' before '{'\n  implicit\\bpr.cpp(981) : error C2143: syntax error : missing ';' before '}'\n  implicit\\bpr.cpp(991) : error C2143: syntax error : missing ';' before '{'\n  implicit\\bpr.cpp(994) : error C2143: syntax error : missing ';' before '}'\n  implicit\\bpr.cpp(1004) : error C2143: syntax error : missing ';' before '{'\n  implicit\\bpr.cpp(1017) : error C2143: syntax error : missing ';' before '}'\n  implicit\\bpr.cpp(1027) : error C2143: syntax error : missing ';' before '{'\n  implicit\\bpr.cpp(1032) : error C2059: syntax error : ')'\n  implicit\\bpr.cpp(1033) : error C2143: syntax error : missing ';' before '}'\n  implicit\\bpr.cpp(1045) : error C2143: syntax error : missing ';' before '{'\n  implicit\\bpr.cpp(1047) : error C2143: syntax error : missing ';' before '}'\n  implicit\\bpr.cpp(1060) : error C2143: syntax error : missing ';' before '{'\n  implicit\\bpr.cpp(1062) : error C2143: syntax error : missing ';' before '}'\n  implicit\\bpr.cpp(1074) : error C2143: syntax error : missing ';' before '{'\n  implicit\\bpr.cpp(1075) : error C2059: syntax error : ')'\n  implicit\\bpr.cpp(1076) : error C2059: syntax error : ')'\n  implicit\\bpr.cpp(1077) : error C2059: syntax error : ','\n  implicit\\bpr.cpp(1077) : error C2059: syntax error : ')'\n  implicit\\bpr.cpp(1078) : error C2143: syntax error : missing ',' before ')'\n  implicit\\bpr.cpp(1079) : error C2059: syntax error : ','\n  implicit\\bpr.cpp(1079) : error C2059: syntax error : ')'\n  implicit\\bpr.cpp(1080) : error C2143: syntax error : missing ',' before ')'\n  implicit\\bpr.cpp(1081) : error C2143: syntax error : missing ',' before ')'\n  implicit\\bpr.cpp(1082) : error C2143: syntax error : missing ';' before '}'\n  implicit\\bpr.cpp(1094) : error C2143: syntax error : missing ';' before '{'\n  implicit\\bpr.cpp(1096) : error C2143: syntax error : missing ';' before '}'\n  implicit\\bpr.cpp(1165) : error C2065: 'attr_name' : undeclared identifier\n  implicit\\bpr.cpp(1165) : error C2275: 'PyObject' : illegal use of this type as an expression\n          c:\\python27\\include\\object.h(108) : see declaration of 'PyObject'\n  implicit\\bpr.cpp(1165) : error C2143: syntax error : missing ',' before ')'\n  implicit\\bpr.cpp(1178) : error C2065: 'kw_name' : undeclared identifier\n  implicit\\bpr.cpp(1178) : error C2275: 'PyObject' : illegal use of this type as an expression\n          c:\\python27\\include\\object.h(108) : see declaration of 'PyObject'\n  implicit\\bpr.cpp(1178) : error C2143: syntax error : missing ',' before ')'\n  implicit\\bpr.cpp(1181) : error C2065: 'argnames' : undeclared identifier\n  implicit\\bpr.cpp(1181) : error C2059: syntax error : ']'\n  implicit\\bpr.cpp(1182) : error C2065: 'kwds2' : undeclared identifier\n  implicit\\bpr.cpp(1182) : error C2275: 'PyObject' : illegal use of this type as an expression\n          c:\\python27\\include\\object.h(108) : see declaration of 'PyObject'\n  implicit\\bpr.cpp(1182) : error C2146: syntax error : missing ',' before identifier 'values'\n  implicit\\bpr.cpp(1182) : error C2065: 'values' : undeclared identifier\n  implicit\\bpr.cpp(1182) : error C2059: syntax error : ']'\n  implicit\\bpr.cpp(1183) : error C2146: syntax error : missing ',' before identifier 'function_name'\n  implicit\\bpr.cpp(1183) : error C2065: 'function_name' : undeclared identifier\n  implicit\\bpr.cpp(1183) : error C2143: syntax error : missing ',' before ')'\n  implicit\\bpr.cpp(1190) : error C2065: 'arg' : undeclared identifier\n  implicit\\bpr.cpp(1190) : error C2275: 'PyObject' : illegal use of this type as an expression\n          c:\\python27\\include\\object.h(108) : see declaration of 'PyObject'\n  implicit\\bpr.cpp(1190) : error C2146: syntax error : missing ',' before identifier 'kw'\n  implicit\\bpr.cpp(1190) : error C2065: 'kw' : undeclared identifier\n  implicit\\bpr.cpp(1190) : error C2143: syntax error : missing ',' before ')'\n  implicit\\bpr.cpp(1213) : error C2065: 'type' : undeclared identifier\n  implicit\\bpr.cpp(1213) : error C2275: 'PyObject' : illegal use of this type as an expression\n          c:\\python27\\include\\object.h(108) : see declaration of 'PyObject'\n  implicit\\bpr.cpp(1213) : error C2146: syntax error : missing ',' before identifier 'value'\n  implicit\\bpr.cpp(1213) : error C2065: 'value' : undeclared identifier\n  implicit\\bpr.cpp(1213) : error C2146: syntax error : missing ',' before identifier 'tb'\n  implicit\\bpr.cpp(1213) : error C2065: 'tb' : undeclared identifier\n  implicit\\bpr.cpp(1213) : error C2143: syntax error : missing ',' before ')'\n  implicit\\bpr.cpp(1214) : error C2065: 'type' : undeclared identifier\n  implicit\\bpr.cpp(1214) : error C2275: 'PyObject' : illegal use of this type as an expression\n          c:\\python27\\include\\object.h(108) : see declaration of 'PyObject'\n  implicit\\bpr.cpp(1214) : error C2146: syntax error : missing ',' before identifier 'value'\n  implicit\\bpr.cpp(1214) : error C2065: 'value' : undeclared identifier\n  implicit\\bpr.cpp(1214) : error C2146: syntax error : missing ',' before identifier 'tb'\n  implicit\\bpr.cpp(1214) : error C2065: 'tb' : undeclared identifier\n  implicit\\bpr.cpp(1214) : error C2143: syntax error : missing ',' before ')'\n  implicit\\bpr.cpp(1232) : error C2065: 'value' : undeclared identifier\n  implicit\\bpr.cpp(1232) : error C2275: 'PyObject' : illegal use of this type as an expression\n          c:\\python27\\include\\object.h(108) : see declaration of 'PyObject'\n  implicit\\bpr.cpp(1232) : error C2146: syntax error : missing ',' before identifier 'tb'\n  implicit\\bpr.cpp(1232) : error C2065: 'tb' : undeclared identifier\n  implicit\\bpr.cpp(1232) : error C2146: syntax error : missing ',' before identifier 'cause'\n  implicit\\bpr.cpp(1232) : error C2065: 'cause' : undeclared identifier\n  implicit\\bpr.cpp(1232) : error C2143: syntax error : missing ',' before ')'\n  implicit\\bpr.cpp(1246) : error C2065: 'args' : undeclared identifier\n  implicit\\bpr.cpp(1246) : error C2275: 'PyObject' : illegal use of this type as an expression\n          c:\\python27\\include\\object.h(108) : see declaration of 'PyObject'\n  implicit\\bpr.cpp(1246) : error C2146: syntax error : missing ',' before identifier 'nargs'\n  implicit\\bpr.cpp(1246) : error C2065: 'nargs' : undeclared identifier\n  implicit\\bpr.cpp(1246) : error C2146: syntax error : missing ',' before identifier 'kwargs'\n  implicit\\bpr.cpp(1246) : error C2065: 'kwargs' : undeclared identifier\n  implicit\\bpr.cpp(1246) : error C2143: syntax error : missing ',' before ')'\n  implicit\\bpr.cpp(1254) : error C2065: 'arg' : undeclared identifier\n  implicit\\bpr.cpp(1254) : error C2275: 'PyObject' : illegal use of this type as an expression\n          c:\\python27\\include\\object.h(108) : see declaration of 'PyObject'\n  implicit\\bpr.cpp(1254) : error C2143: syntax error : missing ',' before ')'\n  implicit\\bpr.cpp(1258) : error C2065: 'arg' : undeclared identifier\n  implicit\\bpr.cpp(1258) : error C2275: 'PyObject' : illegal use of this type as an expression\n          c:\\python27\\include\\object.h(108) : see declaration of 'PyObject'\n  implicit\\bpr.cpp(1258) : error C2143: syntax error : missing ',' before ')'\n  implicit\\bpr.cpp(1269) : error C2065: 'op2' : undeclared identifier\n  implicit\\bpr.cpp(1269) : error C2275: 'PyObject' : illegal use of this type as an expression\n          c:\\python27\\include\\object.h(108) : see declaration of 'PyObject'\n  implicit\\bpr.cpp(1269) : error C2146: syntax error : missing ',' before identifier 'intval'\n  implicit\\bpr.cpp(1269) : error C2065: 'intval' : undeclared identifier\n  implicit\\bpr.cpp(1269) : error C2146: syntax error : missing ',' before identifier 'inplace'\n  implicit\\bpr.cpp(1269) : error C2065: 'inplace' : undeclared identifier\n  implicit\\bpr.cpp(1269) : error C2143: syntax error : missing ',' before ')'\n  implicit\\bpr.cpp(1277) : error C2065: 'op2' : undeclared identifier\n  implicit\\bpr.cpp(1277) : error C2275: 'PyObject' : illegal use of this type as an expression\n          c:\\python27\\include\\object.h(108) : see declaration of 'PyObject'\n  implicit\\bpr.cpp(1277) : error C2146: syntax error : missing ',' before identifier 'intval'\n  implicit\\bpr.cpp(1277) : error C2065: 'intval' : undeclared identifier\n  implicit\\bpr.cpp(1277) : error C2146: syntax error : missing ',' before identifier 'inplace'\n  implicit\\bpr.cpp(1277) : error C2065: 'inplace' : undeclared identifier\n  implicit\\bpr.cpp(1277) : error C2143: syntax error : missing ',' before ')'\n  implicit\\bpr.cpp(1277) : fatal error C1003: error count exceeds 100; stopping compilation\n  error: command 'C:\\\\Users\\\\shiro\\\\AppData\\\\Local\\\\Programs\\\\Common\\\\Microsoft\\\\Visual C++ for Python\\\\9.0\\\\VC\\\\Bin\\\\amd64\\\\cl.exe' failed with exit status 2\n\n  ----------------------------------------\n  Failed building wheel for implicit\n  Running setup.py clean for implicit\nFailed to build implicit\nInstalling collected packages: implicit\n  Running setup.py install for implicit ... error\n  [...]\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "spyder"], "comments": [{"owner": {"reputation": 208, "user_id": 9280722, "user_type": "registered", "profile_image": "https://graph.facebook.com/489910148020720/picture?type=large", "display_name": "Ahmed4end", "link": "https://stackoverflow.com/users/9280722/ahmed4end"}, "edited": false, "score": 0, "creation_date": 1534374876, "post_id": 51867655, "comment_id": 90687100, "body": "i installed it using command,  pip install spyder"}, {"owner": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "edited": false, "score": 1, "creation_date": 1534377663, "post_id": 51867655, "comment_id": 90687701, "body": "pip is a bad friend for spyder, try reinstalling in anaconda package"}], "answers": [{"tags": [], "owner": {"reputation": 2934, "user_id": 3902974, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LpTxC.jpg?s=128&g=1", "display_name": "Natsfan", "link": "https://stackoverflow.com/users/3902974/natsfan"}, "is_accepted": true, "score": 2, "last_activity_date": 1534609041, "creation_date": 1534609041, "answer_id": 51910503, "question_id": 51867655, "link": "https://stackoverflow.com/questions/51867655/spyder-python-3-7-starts-with-a-black-window-how-can-i-fix-it/51910503#51910503", "title": "Spyder (Python 3.7) starts with a black window. How can I fix it?", "body": "<p>Yes, as EPo said, pip is a bad command to use with Spyder. You should use the Anaconda distribution of python and then you can use the conda command to properly install Spyder. <code>conda install spyder</code> will install the latest spyder. I'd also recommend using virtual environments. Tou can create a virtual environment by typing: <code>conda create -n yourenvname python=x.x anaconda</code>. You activate this by typing: <code>source activate yourenvname</code>. The necessary comands and methods to use can be found <a href=\"https://uoa-eresearch.github.io/eresearch-cookbook/recipe/2014/11/20/conda/\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://conda.io/docs/user-guide/tasks/manage-environments.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 208, "user_id": 9280722, "user_type": "registered", "profile_image": "https://graph.facebook.com/489910148020720/picture?type=large", "display_name": "Ahmed4end", "link": "https://stackoverflow.com/users/9280722/ahmed4end"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 915, "favorite_count": 0, "accepted_answer_id": 51910503, "answer_count": 1, "score": 1, "last_activity_date": 1534609041, "creation_date": 1534374819, "last_edit_date": 1534382333, "question_id": 51867655, "link": "https://stackoverflow.com/questions/51867655/spyder-python-3-7-starts-with-a-black-window-how-can-i-fix-it", "title": "Spyder (Python 3.7) starts with a black window. How can I fix it?", "body": "<p>If I click on the place where the menu bar should be, it shows options, but a black window still exists, so this is a real problem.</p>\n\n<p>This is what the problem looks like:</p>\n\n<p><a href=\"https://i.stack.imgur.com/6M0NI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6M0NI.png\" alt=\"this is what the problem looks like !\"></a></p>\n"}, {"tags": ["python", "c++", "ctypes"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1534374986, "post_id": 51867653, "comment_id": 90687129, "body": "It&#39;s <code>restype</code>, not <code>restypes</code>, and also you&#39;re returning a dangling pointer."}, {"owner": {"reputation": 713, "user_id": 8408902, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/91bc8741e6c127bdede3317e71dc9d9c?s=128&d=identicon&r=PG&f=1", "display_name": "tryingtosolve", "link": "https://stackoverflow.com/users/8408902/tryingtosolve"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1534375066, "post_id": 51867653, "comment_id": 90687148, "body": "Why is that dangling? I never deleted <code>vec</code>"}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1534375706, "post_id": 51867653, "comment_id": 90687295, "body": "@tryingtosolve vector goes away when it&#39;s scope goes away - i.e. the end of the function - and with it, all the data it was holding.  Also, your code doesn&#39;t compile, so it&#39;s hard to make sense of what you&#39;re saying.  Are <code>v</code> and <code>vec</code> the same thing?"}, {"owner": {"reputation": 713, "user_id": 8408902, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/91bc8741e6c127bdede3317e71dc9d9c?s=128&d=identicon&r=PG&f=1", "display_name": "tryingtosolve", "link": "https://stackoverflow.com/users/8408902/tryingtosolve"}, "reply_to_user": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 1, "creation_date": 1534375784, "post_id": 51867653, "comment_id": 90687309, "body": "@xaxxon What can I do then? Store that in a native c++ array?"}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1534375843, "post_id": 51867653, "comment_id": 90687321, "body": "@tryingtosolve no, that would go away too.   Lexical scoping is pretty fundamental in all languages.. so it seems like you&#39;re pretty far over your head here.  Whatever you do, the vector (or array or whatever) you&#39;re returning a pointer into has to live past the end of the function."}, {"owner": {"reputation": 713, "user_id": 8408902, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/91bc8741e6c127bdede3317e71dc9d9c?s=128&d=identicon&r=PG&f=1", "display_name": "tryingtosolve", "link": "https://stackoverflow.com/users/8408902/tryingtosolve"}, "reply_to_user": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1534375930, "post_id": 51867653, "comment_id": 90687342, "body": "@xaxxon Why did the post that I&#39;m linking to work? It was returning an array as well?"}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1534376079, "post_id": 51867653, "comment_id": 90687375, "body": "@tryingtosolve because it &quot;leaks&quot; the memory from the call to new.  Heap allocations persist until they are programmatically cleaned up - they are not lexically scoped.  &quot;leaks&quot; in quotes because I&#39;m not sure if it&#39;s somehow managed elsewhere.. but it&#39;s considered to be poor form to return un-managed heap memory that is allocated in a function."}, {"owner": {"reputation": 713, "user_id": 8408902, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/91bc8741e6c127bdede3317e71dc9d9c?s=128&d=identicon&r=PG&f=1", "display_name": "tryingtosolve", "link": "https://stackoverflow.com/users/8408902/tryingtosolve"}, "reply_to_user": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1534378865, "post_id": 51867653, "comment_id": 90687933, "body": "@xaxxon just fixed my code such that it compiles. What&#39;s a viable solution? Thank you."}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 1, "creation_date": 1534379081, "post_id": 51867653, "comment_id": 90687981, "body": "@tryingtosolve the correct way to write the code is situational and there&#39;s not enough context in your question for me to provide a suggestion."}, {"owner": {"reputation": 713, "user_id": 8408902, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/91bc8741e6c127bdede3317e71dc9d9c?s=128&d=identicon&r=PG&f=1", "display_name": "tryingtosolve", "link": "https://stackoverflow.com/users/8408902/tryingtosolve"}, "reply_to_user": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1534379158, "post_id": 51867653, "comment_id": 90687991, "body": "@xaxxon I cannot, since the entire code is too long. I wrapped a class <code>car</code> written in C++ via ctypes. This class <code>car</code> contains an <code>std::vector</code> and I have a function that modifies this vector. In Python, after creating an instance of this class, I will call the function to modify the vector. Afterwards, I want to access the vector."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1534435747, "post_id": 51867653, "comment_id": 90714004, "body": "Just forget about Python (temporarily). Pretend your own C++ code needs to use v.data(). But you cannot place v in the same function that needs it. How would you do this?"}], "answers": [{"tags": [], "owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "is_accepted": true, "score": 2, "last_activity_date": 1534435212, "creation_date": 1534435212, "answer_id": 51881136, "question_id": 51867653, "link": "https://stackoverflow.com/questions/51867653/passing-stdvector-from-c-to-python-via-ctypes-getting-nonsensical-values/51881136#51881136", "title": "Passing std:vector from C++ to Python via Ctypes: getting nonsensical values", "body": "<p>As mentioned in comments, your vector is a local variable and destroyed after return from the function.  One way that works is to let Python manage the memory and copy the data into it.</p>\n\n<p><strong>test.cpp</strong></p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;cstring&gt;\n\n#define API __declspec(dllexport) // Windows-specific export\n\n// Must pass double[4] array...\nextern \"C\" API void returnQ(double* data) {\n    std::vector&lt;double&gt; v = {7.5, 5.5, 16.5, 8.5};\n    // Of course, you could write directly to \"data\" without the vector...\n    std::memcpy(data,v.data(),v.size() * sizeof v[0]);\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>&gt;&gt;&gt; from ctypes import *\n&gt;&gt;&gt; dll = CDLL('test')\n&gt;&gt;&gt; dll.returnQ.argtypes = POINTER(c_double),\n&gt;&gt;&gt; dll.returnQ.restype = None\n&gt;&gt;&gt; data = (c_double * 4)()  # equivalent to C++ double[4]\n&gt;&gt;&gt; dll.returnQ(data)\n&gt;&gt;&gt; list(data)\n[7.5, 5.5, 16.5, 8.5]\n</code></pre>\n"}], "owner": {"reputation": 713, "user_id": 8408902, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/91bc8741e6c127bdede3317e71dc9d9c?s=128&d=identicon&r=PG&f=1", "display_name": "tryingtosolve", "link": "https://stackoverflow.com/users/8408902/tryingtosolve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 822, "favorite_count": 1, "accepted_answer_id": 51881136, "answer_count": 1, "score": 1, "last_activity_date": 1534435212, "creation_date": 1534374812, "last_edit_date": 1534378839, "question_id": 51867653, "link": "https://stackoverflow.com/questions/51867653/passing-stdvector-from-c-to-python-via-ctypes-getting-nonsensical-values", "title": "Passing std:vector from C++ to Python via Ctypes: getting nonsensical values", "body": "<p>I was trying to follow the <a href=\"https://stackoverflow.com/a/14887649/8408902\">procedure</a> here but I'm stuck. I'm trying to pass an <code>std:vector</code> from my C++ code (wrapped in <code>extern C</code>) to Python. This is what I have:</p>\n\n<pre><code>extern 'C' {\n    double* returnQ() {\n        std::vector&lt;double&gt; v = {7.5, 5.5, 16.5, 8.5};\n        std::cout&lt;&lt;\"Print first element:\"&lt;&lt;vec[0]&lt;&lt;std::endl;\n        return v.data(); }\n}\n</code></pre>\n\n<p>This is my python code. After loading the library via <code>ctypes</code> as <code>lib</code>, I have:</p>\n\n<pre><code>def q():\n    lib.returnQ.restype = ndpointer(dtype=ctypes.c_double, shape=(4,))\n    return lib.returnQ()\n</code></pre>\n\n<p>However, when I call <code>q()</code> in Python, I get an array of random numbers. I'm not sure why?</p>\n"}, {"tags": ["python", "django", "django-rest-framework"], "answers": [{"comments": [{"owner": {"reputation": 3487, "user_id": 6843153, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/10207079768572690/picture?type=large", "display_name": "HuLu ViCa", "link": "https://stackoverflow.com/users/6843153/hulu-vica"}, "edited": false, "score": 0, "creation_date": 1534379797, "post_id": 51868002, "comment_id": 90688150, "body": "Great!! Thanks a lot"}], "tags": [], "owner": {"reputation": 1516, "user_id": 6177831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f2dc81a2b560de135fd71793e321b1a?s=128&d=identicon&r=PG&f=1", "display_name": "Ehsan Nouri", "link": "https://stackoverflow.com/users/6177831/ehsan-nouri"}, "is_accepted": true, "score": 1, "last_activity_date": 1534378209, "creation_date": 1534378209, "answer_id": 51868002, "question_id": 51867632, "link": "https://stackoverflow.com/questions/51867632/django-rest-framework-serializer-add-elements-to-meta-fields/51868002#51868002", "title": "Django Rest Framework Serializer add elements to Meta.fields", "body": "<p>yes you can do that, change your DynamicModelSerializer as below:</p>\n\n<pre><code>class DynamicModelSerializer(serializers.ModelSerializer):\n    def __init__(self, *args, **kwargs):\n        fields = kwargs.pop('fields', None)\n        add_fields = kwargs.pop('add_fields', None)\n        exclude = kwargs.pop('exclude', None)\n        nest = kwargs.pop('nest', None)\n\n        if nest is not None:\n            self.Meta.depth = nest\n\n        super(DynamicModelSerializer, self).__init__(*args, **kwargs)\n\n        if fields is not None:\n            allowed = set(fields)\n            existing = set(self.fields.keys())\n            for field_name in existing - allowed:\n                self.fields.pop(field_name)\n\n        if add_fields is not None:\n            for field_name, field_class in add_fields.items():\n                ### first pop the old field class from the fields if it's there\n                if field_name in self.fields:\n                    self.fields.pop(field_name)\n                ### now add the field to the fields\n                self.fields[field_name] = field_class\n\n\n        if exclude is not None:\n            for field_name in exclude:\n                self.fields.pop(field_name)\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>class ExampleSerializer(DynamicModelSerializer):\n    test1 = serializers.CharField()\n\n    class Meta:\n        model = Example\n        fields = ('test1', 'test2', 'test3')\n\n\nser = ExampleSerializer(fields=('test1', 'test3'), add_fields={'addField1': serializers.CharField()})\n</code></pre>\n"}], "owner": {"reputation": 3487, "user_id": 6843153, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/10207079768572690/picture?type=large", "display_name": "HuLu ViCa", "link": "https://stackoverflow.com/users/6843153/hulu-vica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 1, "accepted_answer_id": 51868002, "answer_count": 1, "score": 0, "last_activity_date": 1534378209, "creation_date": 1534374695, "question_id": 51867632, "link": "https://stackoverflow.com/questions/51867632/django-rest-framework-serializer-add-elements-to-meta-fields", "title": "Django Rest Framework Serializer add elements to Meta.fields", "body": "<p>I have a custom serializer class that I created copying the answer to <a href=\"https://stackoverflow.com/questions/37445248/how-to-dynamically-change-depth-in-django-rest-framework-nested-serializers\">this question</a>, but in this example the <code>fields</code> parameter replaces original <code>Meta.fields</code> attribute, and what I want is to <strong>add</strong> new elements to <code>Meta.fields</code>. Is there any way this can be done?</p>\n\n<p>This is my serializer:</p>\n\n<pre><code>class DynamicModelSerializer(serializers.ModelSerializer):\n    def __init__(self, *args, **kwargs):\n        fields = kwargs.pop('fields', None)\n        add_fields = kwargs.pop('add_fields', None)\n        exclude = kwargs.pop('exclude', None)\n        nest = kwargs.pop('nest', None)\n\n        if nest is not None:\n            self.Meta.depth = nest\n\n        super(DynamicModelSerializer, self).__init__(*args, **kwargs)\n\n        if fields is not None:\n            allowed = set(fields)\n            existing = set(self.fields.keys())\n            for field_name in existing - allowed:\n                self.fields.pop(field_name)\n\n        if exclude is not None:\n            for field_name in exclude:\n                self.fields.pop(field_name)\n</code></pre>\n"}, {"tags": ["python", "pandas", "numpy", "intervals"], "answers": [{"comments": [{"owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "edited": false, "score": 4, "creation_date": 1534376246, "post_id": 51867671, "comment_id": 90687409, "body": "nice! +1, and certainly more efficient than my answer (deleted). You could also do <code>b.diff()[2:5].mul(a).dropna()</code>, avoiding having to slice <code>a</code>. Not that it&#39;s necessarily better, but slightly different approach"}, {"owner": {"reputation": 47, "user_id": 10161588, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TtuDb6jUI70/AAAAAAAAAAI/AAAAAAAAADE/T0K5lYG-Rkc/photo.jpg?sz=128", "display_name": "Jean-Fran&#231;ois Beaubien", "link": "https://stackoverflow.com/users/10161588/jean-fran%c3%a7ois-beaubien"}, "edited": false, "score": 3, "creation_date": 1534378730, "post_id": 51867671, "comment_id": 90687902, "body": "That&#39;s it ? One single line of code ? And it works. I can use index calculated before. Thanks a lot. That will make my life much easier."}], "tags": [], "owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "is_accepted": true, "score": 3, "last_activity_date": 1534380530, "last_edit_date": 1534380530, "creation_date": 1534375072, "answer_id": 51867671, "question_id": 51867584, "link": "https://stackoverflow.com/questions/51867584/calculate-intervals-in-a-column/51867671#51867671", "title": "Calculate intervals in a column", "body": "<p>IIUC, use <a href=\"https://pandas.pydata.org/pandas-docs/version/0.17.0/generated/pandas.DataFrame.diff.html\" rel=\"nofollow noreferrer\"><code>diff()</code></a> and slice whatever range you want</p>\n\n<pre><code>b.diff()[2:5] * a[2:5]\n</code></pre>\n\n<hr>\n\n<p>As @sacul suggested in comments, can also slice just once and drop later <code>b.diff()[2:5].mul(a).dropna()</code>, even though that would imply generating lots of NaNs which, for big <code>df</code>s, might not be beneficial </p>\n"}], "owner": {"reputation": 47, "user_id": 10161588, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TtuDb6jUI70/AAAAAAAAAAI/AAAAAAAAADE/T0K5lYG-Rkc/photo.jpg?sz=128", "display_name": "Jean-Fran&#231;ois Beaubien", "link": "https://stackoverflow.com/users/10161588/jean-fran%c3%a7ois-beaubien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 368, "favorite_count": 0, "accepted_answer_id": 51867671, "answer_count": 1, "score": 2, "last_activity_date": 1534380530, "creation_date": 1534374305, "question_id": 51867584, "link": "https://stackoverflow.com/questions/51867584/calculate-intervals-in-a-column", "title": "Calculate intervals in a column", "body": "<p>I have two columns in a dataframe (a, and b). Note: I am only showing series here, but pretend that I am extracting those series from a dataframe with row index that I know (iloc). </p>\n\n<p>I'm trying to extract some numbers from columns B, and calculate intervalls into a new series, and then, use it to make some operations with column a. </p>\n\n<p>Intervals are as follow: </p>\n\n<pre><code>b[2]-b[1] \nb[3]-b[2] \nb[4]-b[3]\n</code></pre>\n\n<p>I have a code that works, but it is kind of, well not ugly, but a bit heavy. I have a feeling that there is a function that could do that. </p>\n\n<p>Basically, I am creating an empty array, then iterating in the required range to calculate the interval. Is there a better way to proceed ? </p>\n\n<pre><code>a = pd.Series(data=[10, 11, 12, 13, 14, 15], name='a')\nb = pd.Series(data=[2,3,5,8,12,17], name='b')\n\nar = np.array([])\n\nfor i in range(1,4): \n    temp = b[i+1] - b[i]\n    ar = np.append(ar, temp)\n\nResult = a.iloc[2:5] * ar\n</code></pre>\n\n<p>I used numbers here, but my actual purpose it to do that with timestamp data. I need the timedelta between row[i+1] and row[i], and then, I need to do some operations. That's why I'm trying to calculate those intervals. I just neglected timestamps to make this easier to read and understand. </p>\n"}, {"tags": ["python", "python-3.x", "oop", "tkinter"], "answers": [{"tags": [], "owner": {"reputation": 440, "user_id": 9011643, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b8c0dcaa75836587fee30ee815cb80a7?s=128&d=identicon&r=PG&f=1", "display_name": "Crawley", "link": "https://stackoverflow.com/users/9011643/crawley"}, "is_accepted": false, "score": 1, "last_activity_date": 1534379043, "creation_date": 1534379043, "answer_id": 51868081, "question_id": 51867579, "link": "https://stackoverflow.com/questions/51867579/python-tkinter-with-classes/51868081#51868081", "title": "Python Tkinter with classes", "body": "<p>Yes you can keep them separate by changing the class variables <code>store_number</code> &amp; <code>tld_date</code>. To do this, you need to <em>get</em> the numbers from the entryboxes and save them as variables. We can conveniently do this by calling <code>self.store_number = self.entStore.get()</code> or <code>self.tld_date = self.entDate.get()</code></p>\n\n<h2>MainUI.py</h2>\n\n<pre><code>from tkinter import *\n\nclass LaunchMainUi:\n    store_number = ''\n    tld_date = ''\n\n    def __init__(self, root):\n        self.root = root\n        root.title(\"TacoBell TLD Tool\")\n        self.store_number = IntVar()\n        self.tld_date = IntVar()\n\n        Label(root, text=\"Store Number (XXXXXX): \").grid(row=0, sticky=E)  # Sticky align text North(N), East(E), South(S), West(W)\n        Label(root, text=\"TLD Date(MM/DD/YYYY): \").grid(row=1, sticky=E)\n\n        self.entStore = Entry(self.root)\n        self.entDate = Entry(self.root)\n\n        self.entStore.grid(row=0, column=1)\n        self.entDate.grid(row=1, column=1)\n\n        self.confirm = Button(root, text=\"Confirm\", command=self.save)\n        self.confirm.grid(row=2, column=1)\n\n    def save(self, event=None):\n        storeNumber = self.entStore.get()\n        tldDate = self.entDate.get()\n\n        #Saved as method variables ^ in order to perform necessary validation checks easier\n\n        #If entered items are valid:\n        self.store_number = storeNumber\n        self.tld_date = tldDate\n        self.root.destroy()\n</code></pre>\n\n<p>I firstly changed the name of the class so that the file name and the class name do not clash. I then created a button called <code>self.confirm</code> and set it's command to <code>self.save</code>. This function stores the two variables as <code>storeNumber</code> and <code>tldDate</code>, before setting the class variables to what as been entered and destroying the root window.</p>\n\n<h2>Controller.py</h2>\n\n<pre><code>import MainUI\nfrom tkinter import *\n\nroot = Tk()\n\nui = MainUI.LaunchMainUi(root)\nroot.mainloop() #Keeps the ui instance running until closed, then the rest of the code is run\n\nstoreNum = ui.store_number\ntldDate = ui.tld_date\n\nprint('Store Number: {}\\nTLD Date: {}'.format(storeNum, tldDate)) #This line is to show that the variables can be accessed\n</code></pre>\n\n<p>Because we destroyed the root instance, the <code>mainloop()</code> function is returned meaning that any code underneath it will run. As long as the UI is open, the code under it won't be run. So when the root window is closed the code underneath it is run saving the two variables for later use. You should add some error-checking code where it is commented out to.</p>\n\n<hr>\n\n<h2>Using .pack()</h2>\n\n<p>I personally stay away from using <code>.grid()</code> because is can be a bit confusing. Instead I like to use <code>.pack()</code> and encapsulation.<a href=\"https://i.stack.imgur.com/Rddaw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Rddaw.png\" alt=\"enter image description here\"></a> If you'd want to use <code>.pack()</code> instead, here is another <code>__init__</code> that works just the same. I also made the GUI look a little less standard on this <code>__init__</code> and with some TacoBell colours :)</p>\n\n<pre><code>def __init__(self, root):\n    self.root = root\n    self.root.title(\"TacoBell TLD Tool\")\n    self.root.geometry('600x300')\n\n    font20 = 'Calibri 20'\n    bfont20 = font20 + ' bold'\n\n    Label(self.root, text='TacoBell TLD Tool', font=bfont20, fg='purple').pack()\n\n    topItems = Frame(self.root)\n    Label(topItems, text=\"Store Number (XXXXXX): \", font=font20).pack(side=LEFT)  # Sticky align text North(N), East(E), South(S), West(W)\n    self.entStore = Entry(topItems, font=font20)\n    self.entStore.pack(side=RIGHT)\n    topItems.pack(pady=20)\n\n    lowItems = Frame(self.root)\n    Label(lowItems, text=\"TLD Date(MM/DD/YYYY): \", font=font20).pack(side=LEFT)\n    self.entDate = Entry(lowItems, font=font20)\n    self.entDate.pack(side=RIGHT)\n    lowItems.pack(pady=20)\n\n    self.confirm = Button(root, text=\"Confirm\", bg='purple', fg='white', font=bfont20, width=30, command=self.save)\n    self.confirm.pack()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 126, "user_id": 8633776, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EPhDJKfNhyU/AAAAAAAAAAI/AAAAAAAAAFs/ww63ijvXrjw/photo.jpg?sz=128", "display_name": "Darko Stankovski", "link": "https://stackoverflow.com/users/8633776/darko-stankovski"}, "is_accepted": false, "score": 0, "last_activity_date": 1534402683, "creation_date": 1534402683, "answer_id": 51871267, "question_id": 51867579, "link": "https://stackoverflow.com/questions/51867579/python-tkinter-with-classes/51871267#51871267", "title": "Python Tkinter with classes", "body": "<p>The best approach is it use components. With tkinter, you should define your components by extending the <code>Frame</code> class. So your code should look like this:</p>\n\n<pre><code>class StoreForm(tkinter.Frame):\n    store_number = ''\n    tld_date = ''\n\n    def __init__(self, root, **kw):\n        super().__init__(**kw)\n        root.title(\"TacoBell TLD Tool\")\n        self.store_number = tkinter.IntVar()\n        self.tld_date = tkinter.IntVar()\n\n        self.lblstore_number = tkinter.Label(self, text=\"Store Number (XXXXXX): \")\n        self.lbltld_date = tkinter.Label(self, text=\"TLD Date(MM/DD/YYYY): \")\n\n        self.lblstore_number.grid(row=0, sticky=E)  # Sticky align text North(N), East(E), South(S), West(W0\n        self.lbltld_date.grid(row=1, sticky=E)\n\n        self.entStore = tkinter.Entry(self, textvariable=self.store_number)\n        self.entDate = tkinter.Entry(self, textvariable=self.tld_date)\n\n        self.entStore.grid(row=0, column=1)\n        self.entDate.grid(row=1, column=1)\n</code></pre>\n\n<p>Beware, the <code>root</code> parameter is not your root but the expected container for this frame.</p>\n\n<p>This way, you have a stand-alone reusable graphic component. This component manage the view logic (displaying the widgets, interaction between them if needed) but not your application logic which is the job of your controller. But to use that controller, you should be able to get the data from this component and/or provide some. For that purpose, you should add methods. I would not call them getters and setters even if I use similar names\u2026</p>\n\n<pre><code>    def get_data(self):\n        return self.store_number.get(), self.tld_date.get()\n\n    def set_data(self, store_number_value, tld_date_value):\n        self.store_number.set(store_number_value)\n        self.tld_date.set(tld_date_value)\n</code></pre>\n\n<p>Now, in your main module, you can add something like</p>\n\n<pre><code>MAIN_UI = tkinter.Tk()\nform = StoreForm(MAIN_UI).pack()\n</code></pre>\n\n<p>I let you choose if this should take place at the root of the module or inside a class. And this is the place where the controller should be. The controller is the component with your business logic outside the graphic component.</p>\n\n<p>Using Frames let you:</p>\n\n<ul>\n<li>separate the UI logic from your business logic</li>\n<li>mix layouts (grid in the frame for the form, pack outside for a components flow)</li>\n</ul>\n"}], "owner": {"reputation": 19, "user_id": 3010500, "user_type": "registered", "profile_image": "https://graph.facebook.com/1429689543/picture?type=large", "display_name": "user3010500", "link": "https://stackoverflow.com/users/3010500/user3010500"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1279, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1534402683, "creation_date": 1534374230, "question_id": 51867579, "link": "https://stackoverflow.com/questions/51867579/python-tkinter-with-classes", "title": "Python Tkinter with classes", "body": "<p>Trying to develop an application for work and I'd like to keep the UI and main controller class code separate. How should i approach this? </p>\n\n<p>I have my MainUi class created. </p>\n\n<pre><code>class MainUi:\nstore_number = ''\ntld_date = ''\n\ndef __init__(self, root):\n    self.root = root\n    root.title(\"TacoBell TLD Tool\")\n    self.store_number = IntVar()\n    self.tld_date = IntVar()\n\n    self.lblstore_number = Label(root, text=\"Store Number (XXXXXX): \")\n    self.lbltld_date = Label(root, text=\"TLD Date(MM/DD/YYYY): \")\n\n    self.lblstore_number.grid(row=0, sticky=E)  # Sticky align text North(N), East(E), South(S), West(W0\n    self.lbltld_date.grid(row=1, sticky=E)\n\n    self.entStore = Entry(self.root, textvariable=self.store_number)\n    self.entDate = Entry(self.root, textvariable=self.tld_date)\n\n    self.entStore.grid(row=0, column=1)\n    self.entDate.grid(row=1, column=1)\n</code></pre>\n\n<p>Do I need to define getters and setters? Id like these entrys to be store in two variables in my mainclass so i can pass the variables in my main class to other functions. </p>\n\n<pre><code>import paramiko\nimport os\nimport csv\nimport tools\nfrom ui import MainUi\nfrom tkinter import *\n\n\nroot = Tk()\nui = MainUi(root)\n# get store number and date data from UI.py and store them as variables here \nroot.mainloop()\n</code></pre>\n"}, {"tags": ["python", "mysql", "sql-injection", "pymysql"], "comments": [{"owner": {"reputation": 10803, "user_id": 2548147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cfKie.jpg?s=128&g=1", "display_name": "Raymond Nijland", "link": "https://stackoverflow.com/users/2548147/raymond-nijland"}, "edited": false, "score": 0, "creation_date": 1534376382, "post_id": 51867550, "comment_id": 90687437, "body": "&quot;This isn&#39;t really surprising because I&#39;ve seen similar behavior in other MySQL libraries in other languages&quot; Then that&#39;s simulated by the framework,, MySQL native prepare protocol only allows to prepare values not database, table or column names."}], "answers": [{"tags": [], "owner": {"reputation": 458695, "user_id": 20860, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iavmP.jpg?s=128&g=1", "display_name": "Bill Karwin", "link": "https://stackoverflow.com/users/20860/bill-karwin"}, "is_accepted": false, "score": 3, "last_activity_date": 1534378937, "creation_date": 1534378937, "answer_id": 51868068, "question_id": 51867550, "link": "https://stackoverflow.com/questions/51867550/pymysql-escaping-identifiers/51868068#51868068", "title": "PyMySQL - Escaping identifiers", "body": "<p>The python driver simulates query parameters, but it follows similar rules. A placeholder like <code>%s</code> will be replaced by a <em>quoted</em> string, with the string escaped so any literal apostrophe characters will have a <code>\\</code> inserted.</p>\n\n<pre><code>sql = \"SELECT * FROM mytable WHERE name = %s\"\ncursor.execute(sql, (myname,))\n</code></pre>\n\n<p>Will result in the SQL:</p>\n\n<pre><code>SELECT * FROM mytable WHERE name = 'O\\'Reilly'\n</code></pre>\n\n<p>The backslash is necessary to prevent SQL injection.</p>\n\n<p>But it's not useful for table names, because the single-quotes are for string or date literals, not for identifiers.</p>\n\n<p>You could do it this way:</p>\n\n<pre><code>sql = \"SELECT * FROM `{}`\".format(table_name)\n</code></pre>\n\n<p>The back-ticks delimit an identifier so you can use reserved words or whitespace or other special characters in your table name.</p>\n\n<p>It'd be up to you to make sure the value of <code>table_name</code> doesn't include any literal back-tick characters, or else insert backslashes if you do have a literal back-tick in the table name.</p>\n"}, {"tags": [], "owner": {"reputation": 450, "user_id": 4530890, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/xJOSs.png?s=128&g=1", "display_name": "Ocab19", "link": "https://stackoverflow.com/users/4530890/ocab19"}, "is_accepted": false, "score": 0, "last_activity_date": 1603022987, "last_edit_date": 1603022987, "creation_date": 1603021907, "answer_id": 64412951, "question_id": 51867550, "link": "https://stackoverflow.com/questions/51867550/pymysql-escaping-identifiers/64412951#64412951", "title": "PyMySQL - Escaping identifiers", "body": "<p>Extending the answer from <a href=\"https://stackoverflow.com/a/51868068/4530890\">@Bill Karwin</a>, you will need to escape backticks yourself, because pymysql doesn't do it natively, not even its <code>escape_string()</code> method.</p>\n<p>However, contrary to what Bill said, in order to escape possible backticks in the table name, you will need to double them, and not use a <code>\\</code>. From <a href=\"https://dev.mysql.com/doc/refman/5.7/en/identifiers.html\" rel=\"nofollow noreferrer\">mysql's documentation</a>:</p>\n<blockquote>\n<p>Identifier quote characters can be included within an identifier if you quote the identifier. If the character to be included within the identifier is the same as that used to quote the identifier itself, then you need to double the character.</p>\n</blockquote>\n<p>Which basically means that in order to escape a backtick you need a double backtick. This is what I've resorted to in the end:</p>\n<pre><code>table = 'table`; drop table users; -- '\nsane_table = pymysql.escape_string(table).strip('`').replace('`', '``')\ncursor.execute(f&quot;SELECT * FROM `{sane_table}`&quot;))\n</code></pre>\n<p>Which will correctly escape the table name and report the proper error:</p>\n<pre><code>pymysql.err.ProgrammingError: (1103, &quot;Incorrect table name 'table`; drop table users; -- '&quot;)\n</code></pre>\n"}], "owner": {"reputation": 4092, "user_id": 1031406, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7604ad9de760ea0a77170d37b753bf07?s=128&d=identicon&r=PG", "display_name": "dsw88", "link": "https://stackoverflow.com/users/1031406/dsw88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1094, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1603022987, "creation_date": 1534373958, "last_edit_date": 1534395786, "question_id": 51867550, "link": "https://stackoverflow.com/questions/51867550/pymysql-escaping-identifiers", "title": "PyMySQL - Escaping identifiers", "body": "<p>I'm using PyMySQL, and as I write queries I need to escape certain identifiers that are user-provided (table names, etc.). For example, here's a bad example showing what I mean:</p>\n\n<pre><code>sql = \"SELECT * FROM {}\".format(table_name)\ncursor.execute(sql)\n</code></pre>\n\n<p>In this case <code>table_name</code> is user-provided, so the above code is clearly vulnerable to a SQL injection attack.</p>\n\n<p>I first tried to do something like this:</p>\n\n<pre><code>sql = \"SELECT * FROM %s\"\ncursor.execute(sql, (table_name,))\n</code></pre>\n\n<p>It seems that the above code does not work when escaping identifiers, it only works with values. This isn't really surprising because I've seen similar behavior in other MySQL libraries in other languages.</p>\n\n<p>I've used other libraries, such as <code>mysql</code> in Node.js, that have a function for escaping identifiers. I can't see anything in the <a href=\"https://pymysql.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">PyMySQL documentation</a> that indicates similar functionality. I found this <a href=\"https://stackoverflow.com/questions/27618354/how-to-prevent-pymysql-from-escaping-identifier-names\">StackOverflow question</a> asking a similar question, but the answer was something along the lines of \"You shouldn't need to do that.\" Well I do need to do that! ;)</p>\n\n<p>What are my options for escaping identifiers when using MySQL in Python? Thanks!</p>\n"}, {"tags": ["python", "c++11", "boost-python", "python-c-api", "pybind11"], "comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1534380979, "post_id": 51867528, "comment_id": 90688380, "body": "This is not a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>; please provide one, boiling down your code to the <i>minimal</i> amount needed for <i>someone else</i> to reproduce the problem."}], "answers": [{"tags": [], "owner": {"reputation": 459, "user_id": 2395133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rseDE.jpg?s=128&g=1", "display_name": "dwagnerkc", "link": "https://stackoverflow.com/users/2395133/dwagnerkc"}, "is_accepted": false, "score": 0, "last_activity_date": 1539433663, "last_edit_date": 1539433663, "creation_date": 1539432661, "answer_id": 52792788, "question_id": 51867528, "link": "https://stackoverflow.com/questions/51867528/python-embedding-in-c-with-functions-returning-shared-ptrpybind11-boost-pytho/52792788#52792788", "title": "python embedding in C++ with functions returning shared_ptr(pybind11/boost_python)", "body": "<p>\"All the usecases I see in pybind/boost python is just simply python being embedded in C++ without any return value.\"</p>\n\n<p><a href=\"https://pybind11.readthedocs.io/en/stable/advanced/embedding.html#importing-modules\" rel=\"nofollow noreferrer\">PyBind11 Example with return value</a></p>\n\n<p>The example the called python function returns an int which they assign first to a py::object and then cast to an int. For STL containers like std::map, std::vector there is automatic conversion if you <code>#include &lt;pybind11/stl.h&gt;</code>. I am unsure about conversion to struct, but I would use one of PyBind's built in STL conversions between Python and C++ and then construct the struct on the C++ side. </p>\n"}], "owner": {"reputation": 1, "user_id": 10230892, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JgC_tMPRiZM/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qdk1dEoL3YaGpVbRvQk1VcomS9NA/mo/photo.jpg?sz=128", "display_name": "Tester Singh", "link": "https://stackoverflow.com/users/10230892/tester-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 713, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539433663, "creation_date": 1534373692, "last_edit_date": 1535563020, "question_id": 51867528, "link": "https://stackoverflow.com/questions/51867528/python-embedding-in-c-with-functions-returning-shared-ptrpybind11-boost-pytho", "title": "python embedding in C++ with functions returning shared_ptr(pybind11/boost_python)", "body": "<p>I am currently working on a usecase where I have implemented APIs in python and they need to return struct, vector and map to C++ caller functions. Could you please help me with an example how to do that. All the usecases I see in pybind/boost python is just simply python being embedded in C++ without any return value. \nI came across your blog as well that explained the two libraries pretty well. But I could not proceed because of this usecase.\nThe scenario which I need to implement is a python -> C++ interface where the C++ caller will start a session and call various python objects when it wants and then close the session. I am ok with solution both in boost::python or pybind11</p>\n"}, {"tags": ["python", "django", "cookies", "csrf"], "comments": [{"owner": {"reputation": 36561, "user_id": 2395796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8786484468219bcf403bbdce5eb37c8d?s=128&d=identicon&r=PG", "display_name": "Kevin Christopher Henry", "link": "https://stackoverflow.com/users/2395796/kevin-christopher-henry"}, "edited": false, "score": 0, "creation_date": 1534373948, "post_id": 51867526, "comment_id": 90686927, "body": "I don&#39;t know the answer, but the documentation does <a href=\"https://docs.djangoproject.com/en/dev/ref/settings/#std:setting-SESSION_COOKIE_DOMAIN\" rel=\"nofollow noreferrer\">suggest</a> that this can cause problems: &quot;Be cautious when updating this setting on a production site. If you update this setting to enable cross-domain cookies on a site that previously used standard domain cookies, existing user cookies will be set to the old domain. This may result in them being unable to log in as long as these cookies persist.&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 1619, "user_id": 765103, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a0c3093efd032ef79cd7cf9b59270588?s=128&d=identicon&r=PG", "display_name": "galarant", "link": "https://stackoverflow.com/users/765103/galarant"}, "edited": false, "score": 0, "creation_date": 1535643712, "post_id": 51867623, "comment_id": 91152428, "body": "This indeed turned out to be the issue. We resolved by adding a JS snippet into our base template that set an expired cookie with <code>Domain=</code> and that effectively invalidated the old ones."}], "tags": [], "owner": {"reputation": 1525, "user_id": 222189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/36cb170adfa384f33da06c74450e2365?s=128&d=identicon&r=PG", "display_name": "matejcik", "link": "https://stackoverflow.com/users/222189/matejcik"}, "is_accepted": true, "score": 1, "last_activity_date": 1534379501, "last_edit_date": 1534379501, "creation_date": 1534374610, "answer_id": 51867623, "question_id": 51867526, "link": "https://stackoverflow.com/questions/51867526/how-would-changing-djangos-cookie-domain-settings-cause-sporadic-csrf-failures/51867623#51867623", "title": "How would changing Django&#39;s cookie domain settings cause sporadic CSRF failures?", "body": "<p>The cookie with the new <code>SESSION_COOKIE_DOMAIN</code> is sent as a new cookie and does not replace the old one. So the browser will send <em>both</em> to your server. AFAICT, it sends them in arbitrary order.</p>\n\n<p>That means that you're <em>setting</em> a cookie for <code>.mydomain.com</code>, but <em>receiving</em> either the cookie you just set for <code>.mydomain.com</code>, or a stale cookie for <code>whatever.mydomain.com</code> was implicitly set originally (because django will only pick one, most likely the last it sees). Which one you get depends on the browser, possibly on some particulars of how the client computer stores them, and possibly even on how django reads the headers. This is why the failures are inconsistent: it randomly works for some clients and fails for others.</p>\n\n<p><strong>Edit:</strong> You could delete the stale cookie from the server, if you know the original cookie's properties. Probably the best way is to set a custom <code>Set-Cookie</code> header with the domain and other properties set, and expiration date in the past. You could do that e.g. from the 403 page handler.\n(see <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie</a> and <a href=\"https://stackoverflow.com/questions/5285940/correct-way-to-delete-cookies-server-side\">Correct way to delete cookies server-side</a> )</p>\n"}], "owner": {"reputation": 1619, "user_id": 765103, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a0c3093efd032ef79cd7cf9b59270588?s=128&d=identicon&r=PG", "display_name": "galarant", "link": "https://stackoverflow.com/users/765103/galarant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 361, "favorite_count": 0, "accepted_answer_id": 51867623, "answer_count": 1, "score": 1, "last_activity_date": 1534379501, "creation_date": 1534373670, "last_edit_date": 1534379051, "question_id": 51867526, "link": "https://stackoverflow.com/questions/51867526/how-would-changing-djangos-cookie-domain-settings-cause-sporadic-csrf-failures", "title": "How would changing Django&#39;s cookie domain settings cause sporadic CSRF failures?", "body": "<p>In my Django project, until recently I had left the settings <code>SESSION_COOKIE_DOMAIN</code> and <code>CSRF_COOKIE_DOMAIN</code> unset. Recently I changed them to <code>.mydomain.com</code> and since then I have been seeing sporadic CSRF failures on AJAX requests for certain users. The failure manifests as a 403 with <code>CSRF token missing or incorrect.</code> appearing in the logs.</p>\n\n<p>Asking users to clear cookies seems to resolve the issue, but I'm wondering how the settings change could have caused this and why it only seems to be happening for some users and not others.</p>\n\n<p>Wondering if there is a way to resolve these issues without asking my users to clear cookies.</p>\n"}, {"tags": ["python", "excel", "pandas", "loops"], "comments": [{"owner": {"reputation": 9542, "user_id": 8068625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4spqa.png?s=128&g=1", "display_name": "Henry Woody", "link": "https://stackoverflow.com/users/8068625/henry-woody"}, "edited": false, "score": 0, "creation_date": 1534380569, "post_id": 51867496, "comment_id": 90688302, "body": "This might have the answer to your question: <a href=\"https://stackoverflow.com/questions/51792576/how-do-i-use-pandas-for-reading-multiple-xlsx-files-and-outputting-into-one-in-i/51793105#51793105\" title=\"how do i use pandas for reading multiple xlsx files and outputting into one in i\">stackoverflow.com/questions/51792576/&hellip;</a>"}, {"owner": {"reputation": 401, "user_id": 3897078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2YdEg.jpg?s=128&g=1", "display_name": "skarchmit", "link": "https://stackoverflow.com/users/3897078/skarchmit"}, "reply_to_user": {"reputation": 9542, "user_id": 8068625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4spqa.png?s=128&g=1", "display_name": "Henry Woody", "link": "https://stackoverflow.com/users/8068625/henry-woody"}, "edited": false, "score": 0, "creation_date": 1534386200, "post_id": 51867496, "comment_id": 90689313, "body": "@HenryWoody that\u2019s also a very good implementation; using zip()"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 10135858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e587a0d90dd773373db80c6e0f466ad1?s=128&d=identicon&r=PG&f=1", "display_name": "rizzickk", "link": "https://stackoverflow.com/users/10135858/rizzickk"}, "edited": false, "score": 0, "creation_date": 1534434392, "post_id": 51867557, "comment_id": 90713228, "body": "This is perfect! I appreciate the help. I had this code already and it wasn&#39;t working because the &#39;writer.save()&#39; was in the loop when I was running it and you have it outside the loop! Thank you!"}], "tags": [], "owner": {"reputation": 401, "user_id": 3897078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2YdEg.jpg?s=128&g=1", "display_name": "skarchmit", "link": "https://stackoverflow.com/users/3897078/skarchmit"}, "is_accepted": true, "score": 3, "last_activity_date": 1617840477, "last_edit_date": 1617840477, "creation_date": 1534374018, "answer_id": 51867557, "question_id": 51867496, "link": "https://stackoverflow.com/questions/51867496/how-to-export-dfs-to-excel-with-multiple-sheets-and-different-sheet-names-pandas/51867557#51867557", "title": "How to export dfs to excel with multiple sheets and different sheet names pandas", "body": "<pre><code>final=[dataframe,dataframe,dataframe] \n\nstudentIDs=[1,2,3]\n\n\nwriter = pd.ExcelWriter('Name.xlsx', engine='xlsxwriter')\nfor i,df in enumerate(final, 0):\n    df.to_excel(writer, sheet_name='%s' %studentIDs[i])\n     \nwriter.save()\n</code></pre>\n<p>If the lists will always match in order, then you can use enumerate (which gives you a list starting from that index onward) and then match it up to the list above, but I would recommend using a dictionary</p>\n<pre><code>final = {\n   1 : dataframe,\n   2 : dataframe,\n   3 : dataframe\n}\n\n\nwriter = pd.ExcelWriter('Name.xlsx', engine='xlsxwriter')\nfor sheet_name in final:\n    final[sheet_name].to_excel(writer, sheet_name= str(sheet_name))\n    \nwriter.save()\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 10135858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e587a0d90dd773373db80c6e0f466ad1?s=128&d=identicon&r=PG&f=1", "display_name": "rizzickk", "link": "https://stackoverflow.com/users/10135858/rizzickk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1248, "favorite_count": 0, "accepted_answer_id": 51867557, "answer_count": 1, "score": 2, "last_activity_date": 1617840530, "creation_date": 1534373485, "last_edit_date": 1617840530, "question_id": 51867496, "link": "https://stackoverflow.com/questions/51867496/how-to-export-dfs-to-excel-with-multiple-sheets-and-different-sheet-names-pandas", "title": "How to export dfs to excel with multiple sheets and different sheet names pandas", "body": "<p>I am trying to iterate through student ID's WITH A LOOP by printing a df to a sheet in excel and having the student ID be the tab name.</p>\n<p>In other words:</p>\n<p>df to excel and tab name is 1</p>\n<p>next df to new sheet and tab name is 2</p>\n<p>iterate through all student IDs</p>\n<pre><code>final=[dataframe,dataframe,dataframe]\nstudentIDs=[1,2,3]\n\n\nwriter = pd.ExcelWriter('Name.xlsx', engine='xlsxwriter')\nfor df in final:\n    df.to_excel(writer, sheet_name='%s' %studentIDs)\n    writer.save()\n</code></pre>\n"}, {"tags": ["python", "html", "function", "reference"], "comments": [{"owner": {"reputation": 1089, "user_id": 5405968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TVcHU.jpg?s=128&g=1", "display_name": "Bennett Hardwick", "link": "https://stackoverflow.com/users/5405968/bennett-hardwick"}, "edited": false, "score": 0, "creation_date": 1534373580, "post_id": 51867458, "comment_id": 90686841, "body": "Python and HTML are separate, so you can&#39;t explicitly link them. But you could create a HTML form that sends data to your python backend."}, {"owner": {"reputation": 11, "user_id": 10231564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f2ea58347f9a628509bab8430557b67?s=128&d=identicon&r=PG&f=1", "display_name": "Bagman", "link": "https://stackoverflow.com/users/10231564/bagman"}, "reply_to_user": {"reputation": 1089, "user_id": 5405968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TVcHU.jpg?s=128&g=1", "display_name": "Bennett Hardwick", "link": "https://stackoverflow.com/users/5405968/bennett-hardwick"}, "edited": false, "score": 0, "creation_date": 1534374036, "post_id": 51867458, "comment_id": 90686949, "body": "How do I do that? If you have references too, it would definitely help."}, {"owner": {"reputation": 1089, "user_id": 5405968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TVcHU.jpg?s=128&g=1", "display_name": "Bennett Hardwick", "link": "https://stackoverflow.com/users/5405968/bennett-hardwick"}, "edited": false, "score": 0, "creation_date": 1534375119, "post_id": 51867458, "comment_id": 90687159, "body": "I&#39;m not on a computer at the moment, so have a look at this answer: <a href=\"https://stackoverflow.com/questions/42298851/webapp2-how-to-post-form-data-app-engine#42336812\" title=\"webapp2 how to post form data app engine%2342336812\">stackoverflow.com/questions/42298851/&hellip;</a>"}, {"owner": {"reputation": 11, "user_id": 10231564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f2ea58347f9a628509bab8430557b67?s=128&d=identicon&r=PG&f=1", "display_name": "Bagman", "link": "https://stackoverflow.com/users/10231564/bagman"}, "reply_to_user": {"reputation": 1089, "user_id": 5405968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TVcHU.jpg?s=128&g=1", "display_name": "Bennett Hardwick", "link": "https://stackoverflow.com/users/5405968/bennett-hardwick"}, "edited": false, "score": 0, "creation_date": 1534382409, "post_id": 51867458, "comment_id": 90688655, "body": "I tried it, but it didn&#39;t work. I keep getting this error:  <code>INFO     2018-08-16 01:18:19,336 module.py:880] default: &quot;GET &#47;?authuser=0 HTTP&#47;1.1&quot; 200 773  INFO     2018-08-16 01:18:25,671 module.py:880] default: &quot;GET &#47;main.py?pic=20180410_004311.jpg HTTP&#47;1.1&quot; 404 154</code>"}], "owner": {"reputation": 11, "user_id": 10231564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f2ea58347f9a628509bab8430557b67?s=128&d=identicon&r=PG&f=1", "display_name": "Bagman", "link": "https://stackoverflow.com/users/10231564/bagman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1534373232, "creation_date": 1534373232, "question_id": 51867458, "link": "https://stackoverflow.com/questions/51867458/referencing-an-html-button-to-python-script", "title": "Referencing an HTML button to Python Script", "body": "<p>My objective in this program is to store information in a database. My problem is that I'm trying to link a button from my HTML page by using a Python script. My instructor told us that it <strong>must</strong> be written in Python. Any Libraries that support Python 2.7 would work for me.</p>\n\n<pre><code>from google.appengine.api import images\nfrom google.appengine.ext import ndb\nfrom models import Note\nimport webapp2\n\nimport jinja2\nimport os\n\njinja_env = jinja2.Environment(\n    loader=jinja2.FileSystemLoader(os.path.dirname(__file__)))\n\nclass MainHandler(webapp2.RequestHandler):\n    def get(self):\n        template = jinja_env.get_template('./main.html')\n        self.response.out.write(template.render())\n\nclass InfoHandler(webapp2.RequestHandler):\n    def get(self):\n        note = Note(img = images.Image(photo.usr_img))\n\n\nclass Note(ndb.Model):\n    def get(self):\n        usr_img = ndb.BlobProperty()\n        desc = ndb.StringProperty()\n\n\napp = webapp2.WSGIApplication([\n    ('/', MainHandler),\n], debug=True)\n</code></pre>\n\n<p></p>\n\n<pre><code>&lt;html&gt;\n    &lt;head lang = \"en\"&gt;\n        &lt;meta charset = \"UTF-8\"&gt;\n        &lt;title&gt;Title&lt;/title&gt;\n    &lt;/head&gt;\n\n    &lt;body&gt;\n            &lt;div class = \"container\"&gt;\n                    &lt;h1&gt;If this is an emergency, upload a photo and provide a short description.&lt;/h1&gt;\n                    &lt;div id = \"upload\" &gt;\n                        &lt;label for = \"img\"&gt;Upload image:&lt;/label&gt;\n                        &lt;input type = \"file\" name = \"pic\" accept = \"image/*\"/&gt;\n                        &lt;label for = \"desc\"&gt;Description:&lt;/label&gt;\n                        &lt;input type = \"text\" /&gt;\n                        &lt;input type = \"submit\" href = \"{{ submit_data }}\"/&gt;\n                    &lt;/div&gt;\n            &lt;/div&gt;\n    &lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre>\n\n<p>I'm a noob in Python and I'm taking on a tough problem for class. Any suggestions or solutions?</p>\n"}, {"tags": ["python", "arrays", "performance", "numpy"], "comments": [{"owner": {"reputation": 8220, "user_id": 2605604, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/9RN4n.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/2605604/simon"}, "edited": false, "score": 0, "creation_date": 1534397763, "post_id": 51867433, "comment_id": 90691836, "body": "Could you provide an example of what you want the output to look like?"}, {"owner": {"reputation": 5208, "user_id": 4045774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c23c0c730b6a9cb71d1ce17838f2beb7?s=128&d=identicon&r=PG&f=1", "display_name": "max9111", "link": "https://stackoverflow.com/users/4045774/max9111"}, "edited": false, "score": 0, "creation_date": 1534452292, "post_id": 51867433, "comment_id": 90721672, "body": "Is using Numba or Cython not an option?"}], "answers": [{"tags": [], "owner": {"reputation": 389, "user_id": 7396398, "user_type": "registered", "profile_image": "https://graph.facebook.com/1588454514505283/picture?type=large", "display_name": "Andr&#233; Guerra", "link": "https://stackoverflow.com/users/7396398/andr%c3%a9-guerra"}, "is_accepted": false, "score": 0, "last_activity_date": 1534394773, "creation_date": 1534394773, "answer_id": 51869760, "question_id": 51867433, "link": "https://stackoverflow.com/questions/51867433/value-in-an-array-between-two-numbers-in-python/51869760#51869760", "title": "Value in an array between two numbers in python", "body": "<p>I probably did not get your issue here but if you want to first check if the bubble size is in between the same row element 95 % you can use the following:</p>\n\n<pre><code>import numpy as np\n\ndef apply(p, c):  # For each element check the bubblesize grow\n    if(p*0.95 &lt; c &lt; p*1.05):\n        return 1\n    else:\n        return 0\n\n\ndef dist(p, c):  # Calculate the distance\n    return c-p\n\ndef update(prev, cur):\n    assert isinstance(\n        cur, np.ndarray), 'Current array is not a valid numpy array'\n    assert isinstance(\n        prev, np.ndarray), 'Previous array is not a valid numpy array'\n    assert prev.shape == cur.shape, 'Arrays size mismatch'\n\n    applyvec = np.vectorize(apply)\n    toapply = applyvec(prev[:, 0], cur[:, 0])\n\n    print(toapply)\n\n    distvec = np.vectorize(dist)\n    distance = distvec(prev[:, 1], cur[:, 1])\n\n    print(distance)\n\n\ncurrent = np.array([[14040, 42],\n                [3943,71],\n                [6345,11],\n                [0,0],\n                [0,0]])\n\nprevious = np.array([[14039, 32],\n                [3942,61],\n                [6344,1],\n                [0,0],\n                [0,0]])\n\nupdate(previous,current)\n</code></pre>\n\n<p>PS: Please, could you tell us what is the final array you look for based on my examples?</p>\n"}, {"tags": [], "owner": {"reputation": 8220, "user_id": 2605604, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/9RN4n.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/2605604/simon"}, "is_accepted": false, "score": 0, "last_activity_date": 1534397603, "last_edit_date": 1534397603, "creation_date": 1534396698, "answer_id": 51870034, "question_id": 51867433, "link": "https://stackoverflow.com/questions/51867433/value-in-an-array-between-two-numbers-in-python/51870034#51870034", "title": "Value in an array between two numbers in python", "body": "<p>As I understand it (correct me if Im wrong):</p>\n\n<ul>\n<li>You have a current bubble size (integer) and a current y value (integer)</li>\n<li>You have a 2D array (<code>prev_array</code>) that contains bubble sizes and y coords</li>\n<li>You want to check whether your current bubble size is within 5% (either way) of each stored bubble size in <code>prev_array</code></li>\n<li>If they are within range, subtract your current y value from the stored y coord</li>\n<li>This will result in a new array, containing only bubble sizes that are within range, and the newly subtracted y value</li>\n<li>You want to do this without an explicit loop</li>\n</ul>\n\n<p>You can do that using boolean indexing in numpy...</p>\n\n<p>Setup the previous array:</p>\n\n<pre><code>prev_array = np.array([[14040, 42], [3943, 71], [6345, 11], [3945,0], [0,0]])\n\nprev_array\n\narray([[14040,    42],\n       [ 3943,    71],\n       [ 6345,    11],\n       [ 3945,     0],\n       [    0,     0]])\n</code></pre>\n\n<p>You have your stored bubble size you want to use for comparison, and a current y coord value:</p>\n\n<pre><code>bubble_size = 3750\ncur_y = 10\n</code></pre>\n\n<p>Next we can create a boolean mask where we only select rows of <code>prev_array</code> that meets the 5% criteria:</p>\n\n<pre><code>ind = (bubble_size &gt; prev_array[:,0]*.95) &amp; (bubble_size &lt; prev_array[:,0]*1.05)\n\n# ind is a boolean array that looks like this: [False,  True, False,  True, False]\n</code></pre>\n\n<p>Then we use <code>ind</code> to index <code>prev_array</code>, and calculate the new (subtracted) y coords:</p>\n\n<pre><code>new_array = prev_array[ind]\nnew_array[:,1] = cur_y - new_array[:,1]\n</code></pre>\n\n<p>Giving your final output array:</p>\n\n<pre><code>array([[3943,  -61],\n       [3945,   10]])\n</code></pre>\n\n<p>As its not clear what you want your output to actually look like, instead of creating a new array, you can also just update <code>prev_array</code> with the new y values:</p>\n\n<pre><code>ind = (bubble_size &gt; prev_array[:,0]*.95) &amp; (bubble_size &lt; prev_array[:,0]*1.05)\nprev_array[ind,1] = cur_y - prev_array[ind,1]\n</code></pre>\n\n<p>Which gives:</p>\n\n<pre><code>array([[14040,    42],\n       [ 3943,   -61],\n       [ 6345,    11],\n       [ 3945,    10],\n       [    0,     0]])\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5770092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca4d8fd1a56f87e561a8cd484ff88589?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5770092/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1722, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1534397603, "creation_date": 1534372990, "last_edit_date": 1534373472, "question_id": 51867433, "link": "https://stackoverflow.com/questions/51867433/value-in-an-array-between-two-numbers-in-python", "title": "Value in an array between two numbers in python", "body": "<p>So making a title that actually explains what i want is harder than i thought, so here goes me explaining it.</p>\n\n<p>I have an array filled with zeros that adds values every time a condition is met, so after 1 time step iteration i get something like this (minus the headers):</p>\n\n<p>current_array = </p>\n\n<pre><code>bubble_size y_coord\n14040       42\n3943        71\n6345        11\n0           0\n0           0\n....\n</code></pre>\n\n<p>After this time step is complete this current_array gets set as previous_array and is wiped with zeros because there is not a guaranteed number of entries each time. </p>\n\n<p>NOW the real question is i want to be able to check all rows in the first column of the previous_array and see if the current bubble size is within say 5% either side and if so i want to take the current y position away for the value associated with the matching bubble size number in the previous_array's second column. </p>\n\n<p>currently i have something like;</p>\n\n<pre><code>if bubble_size in current_array[:, 0]:\n    do_whatever\n</code></pre>\n\n<p>but i don't know how to pull out the associated y_coord without using a loop, which i am fine with doing (there is about 100 rows to the array and atleast 1000 time steps so i want to make it as efficient as possible) but would like to avoid</p>\n\n<p>i have included my thoughts on the for loop (note the current and previous_array are actually current and previous_frame)</p>\n\n<pre><code>for y in range (0, array_size):\n    if bubble_size &gt;&gt; previous_frame[y,0] *.95 &amp;&amp;&lt;&lt; previous_frame[y, 0] *1.05:\n        distance_travelled = current_y_coord - previous_frame[y,0]\n        y = y + 1\n</code></pre>\n\n<p>Any help is greatly appreciated :)</p>\n"}, {"tags": ["python", "python-3.x", "tkinter"], "comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 1, "creation_date": 1534389776, "post_id": 51867429, "comment_id": 90689977, "body": "This can&#39;t be all of your current code, because this label wouldn&#39;t be visible."}, {"owner": {"reputation": 5181, "user_id": 8321664, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YVheF.gif?s=128&g=1", "display_name": "Black Thunder", "link": "https://stackoverflow.com/users/8321664/black-thunder"}, "edited": false, "score": 0, "creation_date": 1534415289, "post_id": 51867429, "comment_id": 90701091, "body": "You have not placed your label."}], "answers": [{"comments": [{"owner": {"reputation": 166, "user_id": 10231550, "user_type": "registered", "profile_image": "https://graph.facebook.com/2077435532521752/picture?type=large", "display_name": "Ron Zhang", "link": "https://stackoverflow.com/users/10231550/ron-zhang"}, "edited": false, "score": 0, "creation_date": 1534375222, "post_id": 51867651, "comment_id": 90687186, "body": "It seems that when I tried to do this, I got this error about &quot;labelTitleTextSize = labelTitleText.len()&quot; and then the error message showed &quot;AttributeError: &#39;str&#39; object has no attribute &#39;len&#39;&quot;. What should I do to fix?"}, {"owner": {"reputation": 351, "user_id": 10194428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6720f0ebddd92f363ea83e9e97c4cbd1?s=128&d=identicon&r=PG&f=1", "display_name": "vividpk21", "link": "https://stackoverflow.com/users/10194428/vividpk21"}, "reply_to_user": {"reputation": 166, "user_id": 10231550, "user_type": "registered", "profile_image": "https://graph.facebook.com/2077435532521752/picture?type=large", "display_name": "Ron Zhang", "link": "https://stackoverflow.com/users/10231550/ron-zhang"}, "edited": false, "score": 0, "creation_date": 1534375422, "post_id": 51867651, "comment_id": 90687227, "body": "I always get len() confused, the change is reflected above in the code. Please note that I also recently changed from padx/pady to width/height due to padding being specified in pixels, while width/height being specified in characters when dealing with text. If this helped please mark it as the answer."}, {"owner": {"reputation": 166, "user_id": 10231550, "user_type": "registered", "profile_image": "https://graph.facebook.com/2077435532521752/picture?type=large", "display_name": "Ron Zhang", "link": "https://stackoverflow.com/users/10231550/ron-zhang"}, "edited": false, "score": 0, "creation_date": 1534375700, "post_id": 51867651, "comment_id": 90687293, "body": "Hmm... It isn&#39;t quite center-aligned to my window length of 960px."}, {"owner": {"reputation": 166, "user_id": 10231550, "user_type": "registered", "profile_image": "https://graph.facebook.com/2077435532521752/picture?type=large", "display_name": "Ron Zhang", "link": "https://stackoverflow.com/users/10231550/ron-zhang"}, "edited": false, "score": 0, "creation_date": 1534375800, "post_id": 51867651, "comment_id": 90687316, "body": "By the way, how do I make a reply about my current coding?"}, {"owner": {"reputation": 351, "user_id": 10194428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6720f0ebddd92f363ea83e9e97c4cbd1?s=128&d=identicon&r=PG&f=1", "display_name": "vividpk21", "link": "https://stackoverflow.com/users/10194428/vividpk21"}, "reply_to_user": {"reputation": 166, "user_id": 10231550, "user_type": "registered", "profile_image": "https://graph.facebook.com/2077435532521752/picture?type=large", "display_name": "Ron Zhang", "link": "https://stackoverflow.com/users/10231550/ron-zhang"}, "edited": false, "score": 0, "creation_date": 1534376000, "post_id": 51867651, "comment_id": 90687359, "body": "This is the only way to do what you want unless you know exactly how wide, in pixels, each character is when you display them. If you can get the exact width of said characters in pixels you would just change width/height to padx/pady respectively and by multiplying labelTitleTextSize by the width of a character before subtracting it from the maxsize."}, {"owner": {"reputation": 351, "user_id": 10194428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6720f0ebddd92f363ea83e9e97c4cbd1?s=128&d=identicon&r=PG&f=1", "display_name": "vividpk21", "link": "https://stackoverflow.com/users/10194428/vividpk21"}, "reply_to_user": {"reputation": 166, "user_id": 10231550, "user_type": "registered", "profile_image": "https://graph.facebook.com/2077435532521752/picture?type=large", "display_name": "Ron Zhang", "link": "https://stackoverflow.com/users/10231550/ron-zhang"}, "edited": false, "score": 0, "creation_date": 1534376054, "post_id": 51867651, "comment_id": 90687369, "body": "You can edit the original post if you need to show updates by clicking the edit text directly under your post."}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1534389857, "post_id": 51867651, "comment_id": 90690001, "body": "@vividpk21: no, this isn&#39;t the only way to center a label.The best solution is to ask tkinter to center the widget, and not use margins to simulate centering something."}], "tags": [], "owner": {"reputation": 351, "user_id": 10194428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6720f0ebddd92f363ea83e9e97c4cbd1?s=128&d=identicon&r=PG&f=1", "display_name": "vividpk21", "link": "https://stackoverflow.com/users/10194428/vividpk21"}, "is_accepted": false, "score": 0, "last_activity_date": 1534376192, "last_edit_date": 1534376192, "creation_date": 1534374790, "answer_id": 51867651, "question_id": 51867429, "link": "https://stackoverflow.com/questions/51867429/set-specific-width-for-python-label-as-this-many-pixels-long/51867651#51867651", "title": "Set specific width for Python label as this many pixels long?", "body": "<p>You could make a variable that declares the max size of a label and then use it to fix the width/height issues on all label declarations as follows:</p>\n\n<pre><code>maxSizeX = 100\nmaxSizeY = 100\nlabelTitleText = \"Program Name\"\nlabelTitleTextSize = len(labelTitleText)\nlabelTitle = Label(root,\n               text=labelTitleText,\n               width=(maxSizeX-labelTitleTextSize),\n               height=maxSizeY,\n               font=(None, 40)\n               )\n</code></pre>\n\n<p>Although I'm unsure as to how you would get character pixel width on the display if you could then you could change the above to:</p>\n\n<pre><code>maxSizeX = 100\nmaxSizeY = 100\nlabelTitleText = \"Program Name\"\nlabelTitleTextSize = len(labelTitleText) * pixelWidth\nlabelTitle = Label(root,\n               text=labelTitleText,\n               padx=(maxSizeX-labelTitleTextSize),\n               pady=maxSizeY,\n               font=(None, 40)\n               )\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 166, "user_id": 10231550, "user_type": "registered", "profile_image": "https://graph.facebook.com/2077435532521752/picture?type=large", "display_name": "Ron Zhang", "link": "https://stackoverflow.com/users/10231550/ron-zhang"}, "edited": false, "score": 0, "creation_date": 1535425120, "post_id": 51869204, "comment_id": 91049501, "body": "Is it possible to edit the parameters of &quot;label_toptitle.pack&quot; to set such label as a specific width of number of pixels long?"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "reply_to_user": {"reputation": 166, "user_id": 10231550, "user_type": "registered", "profile_image": "https://graph.facebook.com/2077435532521752/picture?type=large", "display_name": "Ron Zhang", "link": "https://stackoverflow.com/users/10231550/ron-zhang"}, "edited": false, "score": 0, "creation_date": 1535425191, "post_id": 51869204, "comment_id": 91049508, "body": "@RonZhang: no, you can not set parameters of <code>pack</code> to force the widget to a specific size, but you can set the widget itself to a specific size. You have to give it an image (and you&#39;ll need to use the <code>compound</code> option. If there&#39;s an image, the <code>width</code> and <code>height</code> attributes represent the width and height in pixels."}, {"owner": {"reputation": 166, "user_id": 10231550, "user_type": "registered", "profile_image": "https://graph.facebook.com/2077435532521752/picture?type=large", "display_name": "Ron Zhang", "link": "https://stackoverflow.com/users/10231550/ron-zhang"}, "edited": false, "score": 0, "creation_date": 1535425618, "post_id": 51869204, "comment_id": 91049586, "body": "What does &quot;give it an image&quot; mean? I don&#39;t see the label as an &quot;image&quot;. May I have a demonstration of what this &quot;image&quot; thing is about?"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "reply_to_user": {"reputation": 166, "user_id": 10231550, "user_type": "registered", "profile_image": "https://graph.facebook.com/2077435532521752/picture?type=large", "display_name": "Ron Zhang", "link": "https://stackoverflow.com/users/10231550/ron-zhang"}, "edited": false, "score": 0, "creation_date": 1535426232, "post_id": 51869204, "comment_id": 91049708, "body": "The <code>Label</code> widget has an <code>image</code> attribute. You can set it to a one pixel image. By using the <code>compound</code> option you can have that pixel hidden under the text."}, {"owner": {"reputation": 166, "user_id": 10231550, "user_type": "registered", "profile_image": "https://graph.facebook.com/2077435532521752/picture?type=large", "display_name": "Ron Zhang", "link": "https://stackoverflow.com/users/10231550/ron-zhang"}, "edited": false, "score": 0, "creation_date": 1535427367, "post_id": 51869204, "comment_id": 91049928, "body": "When I setted my width of my label to <code>width=100</code> along with <code>compound=&quot;center&quot;</code> and adding in <code>image=pixel</code> while the label is below the <code>pixel = tk.PhotoImage(width=1, height=1)</code>, I still don&#39;t see the label being an exact width in pixels. Is there something I have missed in my code?"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "reply_to_user": {"reputation": 166, "user_id": 10231550, "user_type": "registered", "profile_image": "https://graph.facebook.com/2077435532521752/picture?type=large", "display_name": "Ron Zhang", "link": "https://stackoverflow.com/users/10231550/ron-zhang"}, "edited": false, "score": 0, "creation_date": 1535427658, "post_id": 51869204, "comment_id": 91049976, "body": "@RonZhang: it is impossible for me to see without seeing your code. If what you say is true, the widget will be 100 pixels."}, {"owner": {"reputation": 166, "user_id": 10231550, "user_type": "registered", "profile_image": "https://graph.facebook.com/2077435532521752/picture?type=large", "display_name": "Ron Zhang", "link": "https://stackoverflow.com/users/10231550/ron-zhang"}, "edited": false, "score": 0, "creation_date": 1535507578, "post_id": 51869204, "comment_id": 91086813, "body": "I have got the code to work as you&#39;ve written, but I decided to change them all from &quot;.pack&quot; to &quot;.grid&quot;, since I feel grids are more efficient and versatile. However, when I execute the code, it does push the text to that number of pixels long but does not push them to another line if the text is full but instead omits the words from the screen completely. Is there a way to push the words to another line if the text is full?"}], "tags": [], "owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "is_accepted": true, "score": 2, "last_activity_date": 1535426479, "last_edit_date": 1535426479, "creation_date": 1534390076, "answer_id": 51869204, "question_id": 51867429, "link": "https://stackoverflow.com/questions/51867429/set-specific-width-for-python-label-as-this-many-pixels-long/51869204#51869204", "title": "Set specific width for Python label as this many pixels long?", "body": "<p>Your question title mentions setting the length of a label, but it seems your real goal is to center a label without having to calculate margins.</p>\n\n<p>The best solution for that is to not use padding or margins to center the widget. Just tell tkinter you want things centered when you use <code>grid</code> or <code>pack</code>, which is actually the default. You don't have to do much at all.</p>\n\n<p>For example, the following will give a window with a centered title:</p>\n\n<pre><code>import tkinter as tk\n\nroot = tk.Tk()\nroot.geometry(\"960x600\")\n\nlabel_toptitle = tk.Label(root,\n                          text=\"Program Name\",\n                          font=(None, 40),\n)\nlabel_toptitle.pack(side=\"top\", fill=\"x\")\n\nroot.mainloop()\n</code></pre>\n\n<p>Grid can center things too, though the exact syntax depends on what other rows and columns you have. Without knowing that it's hard to give a useful example.</p>\n\n<p>If you <em>really</em> need to specify an exact width in pixels for a label, you can add a transparent one-pixel image to the label and hide it behind the text. When you add an image, the <code>width</code> attribute represents a width in pixels rather than characters.</p>\n\n<p>Example:</p>\n\n<pre><code>pixel = tk.PhotoImage(width=1, height=1)\nlabel = tk.Label(root, image=pixel, text=\"Hello\", compound=\"center\", width=100)\n</code></pre>\n"}], "owner": {"reputation": 166, "user_id": 10231550, "user_type": "registered", "profile_image": "https://graph.facebook.com/2077435532521752/picture?type=large", "display_name": "Ron Zhang", "link": "https://stackoverflow.com/users/10231550/ron-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 405, "favorite_count": 0, "accepted_answer_id": 51869204, "answer_count": 2, "score": 1, "last_activity_date": 1535426479, "creation_date": 1534372945, "last_edit_date": 1534374151, "question_id": 51867429, "link": "https://stackoverflow.com/questions/51867429/set-specific-width-for-python-label-as-this-many-pixels-long", "title": "Set specific width for Python label as this many pixels long?", "body": "<p>I am making a Python program, and I am looking for ways to make a nice centre-aligned title at the top of inside my program. However, I am having trouble doing this because with the current tools I have, I would have to experiment my label spacing length to match how many characters I have for my title. Is there a way to make a Python label be certain amount of pixels long regardless of length of the text? I am specifically looking for a way of specifically making a label be a specific number of pixels long so I don't have to experiment with all these different lengths.</p>\n\n<p>I tried using the \"padx\" and \"pady\" parameters, but I have found that the lengths will always change depending on the length of the text of the label itself. I also tried the \"width\" parameter, but it only extends by a number of textlengths long.</p>\n\n<pre><code>from tkinter import *\n\nroot = Tk()\nroot.geometry(\"960x600\")\n\nlabel_toptitle = Label(root,\n                   text=\"Program Name\",\n                   padx=40,\n                   pady=40,\n                   font=(None, 40),\n                   #height=2,\n                   #width=30\n                   )\nroot.mainloop()\n</code></pre>\n\n<p>This is my current code right here, but if I change the name \"Program Name\" to another name, the padx and pady and/or width or height functions will become not the same amount of pixels long. I need a way to make the label a fixed amount of pixels long.</p>\n"}, {"tags": ["python", "multiprocessing"], "comments": [{"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1534373068, "post_id": 51867402, "comment_id": 90686721, "body": "I believe that if you put the <code>n=2</code> as a default in the function&#39;s parameter list, rather than adding it later via <code>functools.partial()</code>, this would work."}], "answers": [{"tags": [], "owner": {"reputation": 197, "user_id": 10083113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/626efa0e3d4d76083e67ae8e5d439c89?s=128&d=identicon&r=PG&f=1", "display_name": "Montana Burr", "link": "https://stackoverflow.com/users/10083113/montana-burr"}, "is_accepted": true, "score": 1, "last_activity_date": 1534374391, "creation_date": 1534374391, "answer_id": 51867595, "question_id": 51867402, "link": "https://stackoverflow.com/questions/51867402/cant-pickle-function-stringtongrams-at-0x104144f28-its-not-the-same-object/51867595#51867595", "title": "Can&#39;t pickle &lt;function stringToNgrams at 0x104144f28&gt;: it&#39;s not the same object as __main__.stringToNgrams", "body": "<p>It looks like this is an issue related to the functools.partial constructor. From <a href=\"https://bugs.python.org/issue1398\" rel=\"nofollow noreferrer\">the Python bug tracker</a>:</p>\n\n<blockquote>\n  <p>the liberal functools.partial\n  constructor makes it hard to pickle partial instances correctly.</p>\n</blockquote>\n\n<p>Therefore, the answer is to do one of two things:</p>\n\n<p>1) Make n an optional parameter</p>\n\n<p>2) Create another function that passes 2 to the original function.</p>\n"}], "owner": {"reputation": 197, "user_id": 10083113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/626efa0e3d4d76083e67ae8e5d439c89?s=128&d=identicon&r=PG&f=1", "display_name": "Montana Burr", "link": "https://stackoverflow.com/users/10083113/montana-burr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1384, "favorite_count": 1, "accepted_answer_id": 51867595, "answer_count": 1, "score": 0, "last_activity_date": 1534374391, "creation_date": 1534372776, "question_id": 51867402, "link": "https://stackoverflow.com/questions/51867402/cant-pickle-function-stringtongrams-at-0x104144f28-its-not-the-same-object", "title": "Can&#39;t pickle &lt;function stringToNgrams at 0x104144f28&gt;: it&#39;s not the same object as __main__.stringToNgrams", "body": "<p>I'm trying to use multiprocessing to run a function over a list of objects. However, this particular function does <strong>not</strong> belong to a class or module - it is defined directly above the multiprocessing code. </p>\n\n<p>Here is my code:</p>\n\n<pre><code>def stringToNgrams(string,n):\n    ngrams = set()\n    sentenceArray = string.split(\" \")\n    for i in range(0,len(sentenceArray) - (n - 1)):\n        ngramWords = sentenceArray[i:i + n]\n        print(ngramWords)\n        ngram = \" \".join(ngramWords)\n        print(ngram)\n        ngrams.add(ngram)\n\nfrom multiprocessing import Pool\nngramPool = Pool(3)\nimport functools\nstringToNgrams = functools.partial(stringToNgrams,n=2) # So we can load n into stringToNgrams.\nresults = ngramPool.map(stringToNgrams,strings)\n</code></pre>\n\n<p>Here is my error message:</p>\n\n<pre><code>  File \"/Users/montana/Documents/Capstone project/BBEditRunTemp-n_gram.py\", line 76, in &lt;module&gt;\n    results = ngramPool.map(stringToNgrams,strings)\n  File \"/Users/montana/miniconda3/lib/python3.6/multiprocessing/pool.py\", line 260, in map\n    return self._map_async(func, iterable, mapstar, chunksize).get()\n  File \"/Users/montana/miniconda3/lib/python3.6/multiprocessing/pool.py\", line 608, in get\n    raise self._value\n  File \"/Users/montana/miniconda3/lib/python3.6/multiprocessing/pool.py\", line 385, in _handle_tasks\n    put(task)\n  File \"/Users/montana/miniconda3/lib/python3.6/multiprocessing/connection.py\", line 206, in send\n    self._send_bytes(_ForkingPickler.dumps(obj))\n  File \"/Users/montana/miniconda3/lib/python3.6/multiprocessing/reduction.py\", line 51, in dumps\n    cls(buf, protocol).dump(obj)\n_pickle.PicklingError: Can't pickle &lt;function stringToNgrams at 0x104144f28&gt;: it's not the same object as __main__.stringToNgrams\n</code></pre>\n\n<p>I can't seem to figure out what to do - if I use <strong>main</strong>.stringToNgrams, Python then complains that the name \"<strong>main</strong>\" is not defined. Please help me, and thank you!</p>\n"}, {"tags": ["python", "string"], "answers": [{"tags": [], "owner": {"reputation": 11001, "user_id": 3316882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dbfd45c99a28cab8fe0c8ddcb19aea3?s=128&d=identicon&r=PG&f=1", "display_name": "Sunitha", "link": "https://stackoverflow.com/users/3316882/sunitha"}, "is_accepted": true, "score": 1, "last_activity_date": 1534372897, "creation_date": 1534372897, "answer_id": 51867422, "question_id": 51867377, "link": "https://stackoverflow.com/questions/51867377/find-text-after-substring-until-the-end-of-the-line-in-python/51867422#51867422", "title": "Find text after substring until the end of the line in python", "body": "<p>Use <code>re.search</code></p>\n\n<pre><code>&gt;&gt;&gt; re.search(r'--(.*)', String).group(1)\n' things'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1114, "user_id": 5992385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WcuHm.png?s=128&g=1", "display_name": "Valery Ramusik", "link": "https://stackoverflow.com/users/5992385/valery-ramusik"}, "is_accepted": false, "score": 1, "last_activity_date": 1534374254, "creation_date": 1534374254, "answer_id": 51867580, "question_id": 51867377, "link": "https://stackoverflow.com/questions/51867377/find-text-after-substring-until-the-end-of-the-line-in-python/51867580#51867580", "title": "Find text after substring until the end of the line in python", "body": "<p>Using string methods:    </p>\n\n<pre><code>for string in text.splitlines():\n    if ' -- ' in string:\n        print(string.strip().split(' -- ', 1)[1])\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10231547, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uGjI2m46V70/AAAAAAAAAAI/AAAAAAAAABU/LTj9LJnJZ9c/photo.jpg?sz=128", "display_name": "Leviathan GD", "link": "https://stackoverflow.com/users/10231547/leviathan-gd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "accepted_answer_id": 51867422, "answer_count": 2, "score": 1, "last_activity_date": 1534374254, "creation_date": 1534372626, "question_id": 51867377, "link": "https://stackoverflow.com/questions/51867377/find-text-after-substring-until-the-end-of-the-line-in-python", "title": "Find text after substring until the end of the line in python", "body": "<pre><code>String = \"\"\"bob\n123 -- things\nstuff after that line\"\"\"\n</code></pre>\n\n<p>I need to get \" things\".\nI have tried</p>\n\n<pre><code> def InBetween(Substring1, Substring2, String):\n    return String[(String.index(Substring1)+len(Substring1)):String.index(Substring2)]\nStuff = InBetween(\"--\", \"\\n\", String)\n</code></pre>\n\n<p>But this gives me a ValueError due to the fact that it can not get any results\nany way to do this?</p>\n"}, {"tags": ["python", "python-3.x", "ctypes"], "answers": [{"comments": [{"owner": {"reputation": 2577, "user_id": 3512709, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/sA5RZ.jpg?s=128&g=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/3512709/adam"}, "edited": false, "score": 0, "creation_date": 1534384855, "post_id": 51867732, "comment_id": 90689102, "body": "OMG, I dealt with this problem for hours and it was a typo... Ty so much hahaha"}], "tags": [], "owner": {"reputation": 1633, "user_id": 3022712, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/eadc29ffebbca6135b8e45373d159112?s=128&d=identicon&r=PG&f=1", "display_name": "yar", "link": "https://stackoverflow.com/users/3022712/yar"}, "is_accepted": true, "score": 1, "last_activity_date": 1534375597, "creation_date": 1534375597, "answer_id": 51867732, "question_id": 51867365, "link": "https://stackoverflow.com/questions/51867365/segfault-c-void-p-to-c-byte-array/51867732#51867732", "title": "segfault - c_void_p to c_byte array", "body": "<p>If I understant this correctly, this casts an int to a pointer.</p>\n\n<p><code>pa = cast(c_void_p(res.r1), POINTER(ArrayType))</code></p>\n\n<p>I guess you want to replace <code>r1</code> by <code>r0</code>. I suggest to use a better naming scheme.</p>\n"}], "owner": {"reputation": 2577, "user_id": 3512709, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/sA5RZ.jpg?s=128&g=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/3512709/adam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 276, "favorite_count": 0, "accepted_answer_id": 51867732, "answer_count": 1, "score": 0, "last_activity_date": 1534375597, "creation_date": 1534372512, "last_edit_date": 1534372927, "question_id": 51867365, "link": "https://stackoverflow.com/questions/51867365/segfault-c-void-p-to-c-byte-array", "title": "segfault - c_void_p to c_byte array", "body": "<p>I have a simple c function that returns a bytes array and the array length:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>// base58.h\n/* Return type for Decode */\nstruct Decode_return {\n    void* r0;\n    int r1;\n};\n\n// Decode decodes a modified base58 string to a byte slice, using BTCAlphabet\nextern struct Decode_return Decode(char* p0);\n</code></pre>\n\n<p>I'm trying to call this c function from python as such:\n</p>\n\n<pre><code>// base58.py\nfrom ctypes import *\nbase58 = CDLL('./base58.so')\n\nclass DecodeResponse(Structure):\n    _fields_ = [\n        (\"r0\", c_void_p),\n        (\"r1\", c_int),\n    ]\n\nbase58.Decode.restype = DecodeResponse\n\nexpect = bytes.fromhex(\"61\")\nprint(expect.decode(\"utf-8\"))\n\nres = base58.Decode(c_char_p(\"2g\".encode('utf-8')))\n\nlength = c_int(res.r1).value\nprint(length)\n\nArrayType = c_byte*(length)\npa = cast(c_void_p(res.r1), POINTER(ArrayType))\n\nprint(pa.contents[:])\n</code></pre>\n\n<p>I get a seg fault when I run this, though. Why is pa.contents not addressable?</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>$ python3 base58.py\na\n1\n[1]    21864 segmentation fault (core dumped)  python3 base58.py\n</code></pre>\n"}, {"tags": ["python", "scrapy"], "comments": [{"owner": {"reputation": 16919, "user_id": 3737009, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1A6EG.png?s=128&g=1", "display_name": "Granitosaurus", "link": "https://stackoverflow.com/users/3737009/granitosaurus"}, "edited": false, "score": 0, "creation_date": 1534394637, "post_id": 51867348, "comment_id": 90690949, "body": "Why do you print your information? You should yield a dictionary with all of the items and then you can save it all data as json or csv file: <code>scrapy crawl spider -o output.json</code>"}], "answers": [{"tags": [], "owner": {"reputation": 16919, "user_id": 3737009, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1A6EG.png?s=128&g=1", "display_name": "Granitosaurus", "link": "https://stackoverflow.com/users/3737009/granitosaurus"}, "is_accepted": false, "score": 0, "last_activity_date": 1534394573, "creation_date": 1534394573, "answer_id": 51869723, "question_id": 51867348, "link": "https://stackoverflow.com/questions/51867348/python-scrapy-how-to-go-into-a-deeper-link-and-go-back/51869723#51869723", "title": "Python/Scrapy How to go into a deeper link and go back", "body": "<p>You cannot rely on the order Python's <code>print</code> function when it comes to concurrent programming. If you care about standard output order you need to use <code>logging</code> module.</p>\n\n<p>Scrapy has shortcut function for that in <code>Spider</code> class:</p>\n\n<pre><code>import scrapy\nimport logging\n\nclass MySpider(scrapy.Spider):\n\n    def parse(self, response):\n        self.log(\"first message\", level=logging.INFO)\n        self.log(\"second message\", level=logging.INFO)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 9928400, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0MXC47lEEzQ/AAAAAAAAAAI/AAAAAAAAGKs/zBj0qzJ1AnU/photo.jpg?sz=128", "display_name": "Shubhankar Mohan", "link": "https://stackoverflow.com/users/9928400/shubhankar-mohan"}, "is_accepted": false, "score": 0, "last_activity_date": 1534486117, "creation_date": 1534486117, "answer_id": 51889315, "question_id": 51867348, "link": "https://stackoverflow.com/questions/51867348/python-scrapy-how-to-go-into-a-deeper-link-and-go-back/51889315#51889315", "title": "Python/Scrapy How to go into a deeper link and go back", "body": "<p>Scrapy run multiple requests at the same time, so the content displayed on the console can be corresponding to any the multiple requests running at same time. \nYou can go to settings.py and set </p>\n\n<pre><code>CONCURRENT_REQUESTS = 1\n</code></pre>\n\n<p>Now only one request will be launched at a time so your console will show meaningful data but this will make the scraping slower. </p>\n"}], "owner": {"reputation": 3, "user_id": 10226451, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bqZ50N591X0/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pwFncZOBTujbHxRA9-oLxjTpBgFA/mo/photo.jpg?sz=128", "display_name": "itsBlooDy", "link": "https://stackoverflow.com/users/10226451/itsbloody"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 419, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1534486117, "creation_date": 1534372385, "last_edit_date": 1534372723, "question_id": 51867348, "link": "https://stackoverflow.com/questions/51867348/python-scrapy-how-to-go-into-a-deeper-link-and-go-back", "title": "Python/Scrapy How to go into a deeper link and go back", "body": "<p>I am trying to scrap information about every firm in from this website : www.canadianlawlist.com</p>\n\n<p>I have finished most of it, but I am running into a small problem.</p>\n\n<p>I am trying to get the results to display in the following order :</p>\n\n<pre><code>-Firm Name and Information\n\n *Employees from the firm Information.\n</code></pre>\n\n<p>But instead I am getting very random results.</p>\n\n<p>It will scrape information about 2 firms and then scrap the information of employees. Like that :</p>\n\n<pre><code>-Firm Name and Information\n-Firm name and information\n  *Employee from Firm 1\n-Firm name and information\n  *Employee from Firm 2\n</code></pre>\n\n<p>It goes something like that . I am not sure what i am missing in my code :</p>\n\n<pre><code>def parse_after_submit(self, response):\n\n    basicurl = \"canadianlawlist.com/\"\n    products = response.xpath('//*[@class=\"searchresult_item_regular\"]/a/@href').extract()\n    for p in products:\n        url = \"http://canadianlawlist.com\" + p\n        yield scrapy.Request(url, callback=self.parse_firm_info)\n\n        #process next page\n    #for x in range(2, 6):\n     #   next_page_url = \"https://www.canadianlawlist.com/searchresult?searchtype=firms&amp;city=montreal&amp;page=\" + str(x)\n\ndef parse_firm_info(self,response):\n\n        name =  response.xpath('//div[@class=\"listingdetail_companyname\"]/h1/span/text()').extract_first()\n        print name \n        for info in response.xpath('//*[@class=\"listingdetail_contactinfo\"]'):\n\n            street_address = info.xpath('//div[@class=\"listingdetail_contactinfo\"]/div[1]/span/div/text()').extract_first()\n            city = info.xpath('//*[@itemprop=\"addressLocality\"]/text()').extract_first(),\n            province = info.xpath('//*[@itemprop=\"addressRegion\"]/text()').extract_first(),\n            postal_code = info.xpath('//*[@itemprop=\"postalCode\"]/text()').extract_first(),\n            telephone = info.xpath('//*[@itemprop=\"telephone\"]/text()').extract_first(),\n            fax_number = info.xpath('//*[@itemprop=\"faxNumber\"]/text()').extract_first(),\n            email = info.xpath('//*[@itemprop=\"email\"]/text()').extract_first(),\n\n            print street_address\n            print city\n            print province\n            print postal_code\n            print telephone\n            print fax_number\n            print email\n\n            for people in response.xpath('////div[@id=\"main_block\"]/div[1]/div[2]/div[2]'):    \n\n                pname = people.xpath('//*[@class=\"listingdetail_individual_item\"]/h3/a/text()').extract()\n                print pname\n\n            basicurl = \"canadianlawlist.com/\"\n            employees = response.xpath('//*[@class=\"listingdetail_individual_item\"]/h3/a/@href').extract()\n            for e in employees:\n                url2 = \"http://canadianlawlist.com\" + e\n                yield scrapy.Request(url2, callback=self.parse_employe_info)\n\n\ndef parse_employe_info(self,response):\n\n                    ename = response.xpath('//*[@class=\"listingdetail_individualname\"]/h1/span/text()').extract_first()\n                    job_title = response.xpath('//*[@class=\"listingdetail_individualmaininfo\"]/div/i/span/text()').extract_first()\n                    print ename\n                    print job_title\n</code></pre>\n"}, {"tags": ["python", "numpy", "scipy", "mathematical-optimization", "curve-fitting"], "answers": [{"tags": [], "owner": {"reputation": 19105, "user_id": 3005167, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/t0bMQ.png?s=128&g=1", "display_name": "kazemakase", "link": "https://stackoverflow.com/users/3005167/kazemakase"}, "is_accepted": true, "score": 1, "last_activity_date": 1534412941, "creation_date": 1534412941, "answer_id": 51874173, "question_id": 51867317, "link": "https://stackoverflow.com/questions/51867317/curve-fit-fails-when-using-endpoint-false-in-independent-variable/51874173#51874173", "title": "curve_fit fails when using endpoint=False in independent variable", "body": "<p>The Problem is caused by a combination of </p>\n\n<blockquote>\n  <p>[...] xdata increased from 17 to 27.5 in <strong>steps of 0.5</strong>.</p>\n</blockquote>\n\n<p>and </p>\n\n<p><code>np.cos((deg+1) * 2 * np.pi * x)</code></p>\n\n<p>If <code>x</code> contains values in steps of 0.5, the values passed to the trigonometric functions are multiples of <code>pi</code>. This makes <code>sin</code> always return 0 and <code>cos</code> return either +1 or -1. Because of this degeneracy the resulting function cannot be fitted.</p>\n"}], "owner": {"reputation": 33, "user_id": 8304421, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8fh_Tv86tAw/AAAAAAAAAAI/AAAAAAAABeE/aH8X-PprtrE/photo.jpg?sz=128", "display_name": "Jonathon Smith", "link": "https://stackoverflow.com/users/8304421/jonathon-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 51874173, "answer_count": 1, "score": 1, "last_activity_date": 1534412941, "creation_date": 1534372194, "question_id": 51867317, "link": "https://stackoverflow.com/questions/51867317/curve-fit-fails-when-using-endpoint-false-in-independent-variable", "title": "curve_fit fails when using endpoint=False in independent variable", "body": "<p>I'm fitting some data (I have hard-coded it here) using a technique described in <a href=\"https://stackoverflow.com/questions/32590720/create-scipy-curve-fitting-definitions-for-fourier-series-dynamically\">this question</a> and it seemed to work fine. However, I realized my xdata was not quite what I wanted it to be so I used 'endpoint=False' so that my xdata increased from 17 to 27.5 in steps of 0.5. Upon doing this, scipy warned me that:</p>\n\n<pre><code>minpack.py:794: OptimizeWarning: Covariance of the parameters could not be estimated category=OptimizeWarning) \n</code></pre>\n\n<p>Perhaps this is working as intended and I'm missing some part of how curve_fit, or the Fourier function works, but I would really like to be able to fit this with the correct (albeit only slightly different) x values. My y values do have an offset that the fit removes when it runs successfully, which is fine by me.</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom scipy.optimize import curve_fit\n\nydata = [48.97266579, 54.97148132, 65.33787537, 69.55269623, 56.5559082,  41.52973366,\n 28.06554699, 19.01652718, 16.74026489, 19.38094521, 25.63856506, 24.39780998,\n 18.99308014, 30.67970657, 31.52746582, 45.38796043, 45.3911972,  42.38343811,\n 41.90969849, 38.00998878, 49.11366463, 70.14483643]\nxdata = np.linspace(17, 28, 22, endpoint=False) #, endpoint=False\n\ndef make_fourier(na, nb):\n    def fourier(x, *a):\n        ret = 0.0\n        for deg in range(0, na):\n            ret += a[deg] * np.cos((deg+1) * 2 * np.pi * x)\n        for deg in range(na, na+nb):\n            ret += a[deg] * np.sin((deg+1) * 2 * np.pi * x)\n        return ret\n    return fourier\n\ndef obtain_fourier_coef(ydata, harms):\n    popt, pcov = curve_fit(make_fourier(harms, harms), xdata, ydata, [0.0]*harms*2)\n    plt.plot(xdata, (make_fourier(harms,harms))(xdata, *popt))\n    plt.show()\n\nplt.plot(xdata, ydata)\nobtain_fourier_coef(ydata, 10)\n</code></pre>\n\n<p>With endpoint=False:\n<a href=\"https://i.stack.imgur.com/iaKJ5.png\" rel=\"nofollow noreferrer\">curve fit results plot</a></p>\n\n<p>Without endpoint=False:\n<a href=\"https://i.stack.imgur.com/d58Kx.png\" rel=\"nofollow noreferrer\">curve fit results plot</a></p>\n"}, {"tags": ["python", "pandas", "scikit-learn"], "answers": [{"tags": [], "owner": {"reputation": 710, "user_id": 5404647, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-jjmTKjxjCFI/AAAAAAAAAAI/AAAAAAAAALY/4e9KpLVF_MQ/photo.jpg?sz=128", "display_name": "Norhther", "link": "https://stackoverflow.com/users/5404647/norhther"}, "is_accepted": true, "score": 0, "last_activity_date": 1534374424, "creation_date": 1534374424, "answer_id": 51867599, "question_id": 51867316, "link": "https://stackoverflow.com/questions/51867316/correlation-matrix-of-categorical-and-numerical-values-not-working/51867599#51867599", "title": "Correlation matrix of categorical and numerical values not working", "body": "<p>Change     <code>df[x]=le.fit_transform(df[x])</code> to     </p>\n\n<blockquote>\n  <p>df[x]=le.fit_transform(df[x].astype(str))</p>\n</blockquote>\n\n<p>And it should work. </p>\n"}], "owner": {"reputation": 955, "user_id": 9727789, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "LaLaTi", "link": "https://stackoverflow.com/users/9727789/lalati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 399, "favorite_count": 0, "accepted_answer_id": 51867599, "answer_count": 1, "score": 0, "last_activity_date": 1534374424, "creation_date": 1534372192, "question_id": 51867316, "link": "https://stackoverflow.com/questions/51867316/correlation-matrix-of-categorical-and-numerical-values-not-working", "title": "Correlation matrix of categorical and numerical values not working", "body": "<p>I am trying to convert my categorical columns into integers with Label Encoder in order to create a correlation matrix consisting of a mix of numerical and categorical variables. This is my table structure:</p>\n\n<pre><code>a   int64\nb   int64\nc   object\nd   object\ne   object\nf   object\ng   object\ndtype: object\n\nfrom sklearn import preprocessing\nle = preprocessing.LabelEncoder()\nfor x in df.columns:\n    if df[x].dtypes=='object':\n       df[x]=le.fit_transform(df[x])\ncorr = df.corr()\n</code></pre>\n\n<p>Then I get this error: </p>\n\n<pre><code>TypeError: unorderable types: int() &lt; str()\nTypeError Traceback (most recent call last)\n&lt;command-205607&gt; in &lt;module&gt;()\n      3 for x in df.columns:\n      4     if df[x].dtypes=='object':\n----&gt; 5        df[x]=le.fit_transform(df[x])\n      6 corr = df.corr()\n\n/databricks/python/lib/python3.5/site-packages/sklearn/preprocessing/label.py in fit_transform(self, y)\n    129         y = column_or_1d(y, warn=True)\n    130         _check_numpy_unicode_bug(y)\n--&gt; 131         self.classes_, y = np.unique(y, return_inverse=True)\n    132         return y\n    133 \n\n/databricks/python/lib/python3.5/site-packages/numpy/lib/arraysetops.py in unique(ar, return_index, return_inverse, return_counts, axis)\n    221     ar = np.asanyarray(ar)\n    222     if axis is None:\n--&gt; 223         return _unique1d(ar, return_index, return_inverse, return_counts)\n    224     if not (-ar.ndim &lt;= axis &lt; ar.ndim):\n    225         raise ValueError('Invalid axis kwarg specified for unique')\n\n/databricks/python/lib/python3.5/site-packages/numpy/lib/arraysetops.py in _unique1d(ar, return_index, return_inverse, return_counts)\n    278 \n    279     if optional_indices:\n--&gt; 280         perm = ar.argsort(kind='mergesort' if return_index else 'quicksort')\n    281         aux = ar[perm]\n    282     else:\n\nTypeError: unorderable types: int() &lt; str()\n</code></pre>\n\n<p>Does anybody have an idea what is wrong?</p>\n"}, {"tags": ["python", "python-3.x", "numpy", "vectorization"], "answers": [{"comments": [{"owner": {"reputation": 341, "user_id": 6422069, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xB_DjKm2wHU/AAAAAAAAAAI/AAAAAAAADWk/VjPx_3TQxig/photo.jpg?sz=128", "display_name": "tachyon", "link": "https://stackoverflow.com/users/6422069/tachyon"}, "edited": false, "score": 0, "creation_date": 1534373286, "post_id": 51867441, "comment_id": 90686776, "body": "I understand your point. What I actually need is the result of the second function but without hard coding the pattern. Also I need this generalization because the shape of pattern may not be always 2x2."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 341, "user_id": 6422069, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xB_DjKm2wHU/AAAAAAAAAAI/AAAAAAAADWk/VjPx_3TQxig/photo.jpg?sz=128", "display_name": "tachyon", "link": "https://stackoverflow.com/users/6422069/tachyon"}, "edited": false, "score": 0, "creation_date": 1534373721, "post_id": 51867441, "comment_id": 90686876, "body": "<code>np.vectorize</code> uses <code>np.frompyfunc</code>, and allows you to <code>exclude</code> certain arguments from &#39;vectorization&#39;  - I think it passes those arguments through a cover function."}, {"owner": {"reputation": 341, "user_id": 6422069, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xB_DjKm2wHU/AAAAAAAAAAI/AAAAAAAADWk/VjPx_3TQxig/photo.jpg?sz=128", "display_name": "tachyon", "link": "https://stackoverflow.com/users/6422069/tachyon"}, "edited": false, "score": 0, "creation_date": 1534374281, "post_id": 51867441, "comment_id": 90686995, "body": "Do you mean <code>func = np.vectorize(reshape_to_array, excluded=[&quot;pattern&quot;])</code> ? I tried this just now, throws the same runtime error."}, {"owner": {"reputation": 341, "user_id": 6422069, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xB_DjKm2wHU/AAAAAAAAAAI/AAAAAAAADWk/VjPx_3TQxig/photo.jpg?sz=128", "display_name": "tachyon", "link": "https://stackoverflow.com/users/6422069/tachyon"}, "edited": false, "score": 0, "creation_date": 1534405305, "post_id": 51867441, "comment_id": 90695353, "body": "The last one is the easiest solution. It did not occur to me that in the function call itself it should be specified as pattern=pattern. It seems logical as it is excluded in vectorize and python function arguments are not ordered. Thank you."}, {"owner": {"reputation": 341, "user_id": 6422069, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xB_DjKm2wHU/AAAAAAAAAAI/AAAAAAAADWk/VjPx_3TQxig/photo.jpg?sz=128", "display_name": "tachyon", "link": "https://stackoverflow.com/users/6422069/tachyon"}, "edited": false, "score": 0, "creation_date": 1534436152, "post_id": 51867441, "comment_id": 90714195, "body": "I tried to replace <code>vec_func = np.frompyfunc(in_dict.get, 1, 1)</code> to <code>vec_func = np.vectorize(in_dict.get)</code> so that correct <code>dtype</code> is returned instead of <code>object</code>. But that does not work and throws runtime error stating <code>TypeError: only length-1 arrays can be converted to Python scalars</code>. This is strange because <code>vectorize</code> is basically a wrapper for <code>frompyfunc</code>."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 341, "user_id": 6422069, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xB_DjKm2wHU/AAAAAAAAAAI/AAAAAAAADWk/VjPx_3TQxig/photo.jpg?sz=128", "display_name": "tachyon", "link": "https://stackoverflow.com/users/6422069/tachyon"}, "edited": false, "score": 0, "creation_date": 1534439324, "post_id": 51867441, "comment_id": 90715921, "body": "In my last example I specified <code>otypes</code>."}, {"owner": {"reputation": 341, "user_id": 6422069, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xB_DjKm2wHU/AAAAAAAAAAI/AAAAAAAADWk/VjPx_3TQxig/photo.jpg?sz=128", "display_name": "tachyon", "link": "https://stackoverflow.com/users/6422069/tachyon"}, "edited": false, "score": 0, "creation_date": 1534440335, "post_id": 51867441, "comment_id": 90716380, "body": "Yes. In this case it only works with <code>otypes=[&#39;O&#39;]</code>. If all the values of the dictionary is lets say <code>complex</code> then each element of the array should be an array of <code>dtype=complex</code>.When I pass <code>otypes=[complex]</code> it gives runtime error as stated above."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 341, "user_id": 6422069, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xB_DjKm2wHU/AAAAAAAAAAI/AAAAAAAADWk/VjPx_3TQxig/photo.jpg?sz=128", "display_name": "tachyon", "link": "https://stackoverflow.com/users/6422069/tachyon"}, "edited": false, "score": 0, "creation_date": 1534441404, "post_id": 51867441, "comment_id": 90716876, "body": "When I use plain <code>vectorize</code> in <code>In[334]</code> I get <code>U3</code> arrays.  The object otypes is needed in the outer <code>vectorize</code> since <code>reshape_to_array</code> returns an array.  <code>frompyfunc</code> returns object dtype; a big part of the <code>vectorize</code> wrapper is converting that object to something more conventional (deduced or <code>otypes</code>)."}, {"owner": {"reputation": 341, "user_id": 6422069, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xB_DjKm2wHU/AAAAAAAAAAI/AAAAAAAADWk/VjPx_3TQxig/photo.jpg?sz=128", "display_name": "tachyon", "link": "https://stackoverflow.com/users/6422069/tachyon"}, "edited": false, "score": 0, "creation_date": 1534441836, "post_id": 51867441, "comment_id": 90717067, "body": "Strange. In my computer plain vectorize in the inside does not work. It throws: <code>TypeError: only length-1 arrays can be converted to Python scalars</code>"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 341, "user_id": 6422069, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xB_DjKm2wHU/AAAAAAAAAAI/AAAAAAAADWk/VjPx_3TQxig/photo.jpg?sz=128", "display_name": "tachyon", "link": "https://stackoverflow.com/users/6422069/tachyon"}, "edited": false, "score": 0, "creation_date": 1534444736, "post_id": 51867441, "comment_id": 90718519, "body": "I&#39;m using your <code>dump</code> example where the dictionary values are strings. If you don&#39;t specify <code>otypes</code>, <code>vectorize</code> tries to deduce the return <code>dtype</code> from a test calc.  If it can&#39;t deduce that correctly you need specify <code>otypes</code>."}, {"owner": {"reputation": 341, "user_id": 6422069, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xB_DjKm2wHU/AAAAAAAAAAI/AAAAAAAADWk/VjPx_3TQxig/photo.jpg?sz=128", "display_name": "tachyon", "link": "https://stackoverflow.com/users/6422069/tachyon"}, "edited": false, "score": 0, "creation_date": 1534453899, "post_id": 51867441, "comment_id": 90722288, "body": "I am working with <code>complex</code> number instead of <code>strings</code>. I tried to specify <code>otypes=[complex]</code>. It shows runtime error."}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 1, "last_activity_date": 1534457898, "last_edit_date": 1534457898, "creation_date": 1534373078, "answer_id": 51867441, "question_id": 51867272, "link": "https://stackoverflow.com/questions/51867272/how-to-vectorize-a-function-having-ndarray-of-different-shape-as-an-argument/51867441#51867441", "title": "How to vectorize a function having ndarray of different shape as an argument?", "body": "<p>Your first <code>func</code> takes 2 inputs, which are broadcast against each other, and element tuples are passed to <code>reshape_to_array</code></p>\n\n<p><code>dump</code> is (4,4), <code>pattern</code> is (2,2).  The error says that it can pair up the 2 - which should be obvious if you understand broadcasting.</p>\n\n<p>If you reduce <code>dump</code> to (2,2) (or (2,1) or (1,2)) it should work.  So would a <code>pattern</code> that is (1,4) or (4,1).</p>\n\n<hr>\n\n<p>In the 2nd case, the outer <code>frompyfunc</code> is passing each of the (4,4) <code>dump</code> elements to <code>reshape_to_array</code>. and <code>(4,4)</code> pattern is evaluated.</p>\n\n<p>I suspect <code>x = func(dump[:,:,np.newaxis, np.newaxis], pattern)</code> would work, generating the same values but in a (4,4,2,2) array.  With different <code>np.newaxis</code> arangements we could produce (4,2,4,2) etc.</p>\n\n<h2>broadcasting dict and pattern</h2>\n\n<pre><code>In [291]: fn = lambda in_dict, pattern: in_dict.get(pattern)\nIn [299]: fn1 = np.frompyfunc(fn,2,1)\n</code></pre>\n\n<p>With a (4,4) <code>dump</code>, I can use a (1,4) <code>pattern</code> (or a (4,1)):</p>\n\n<pre><code>In [300]: fn1(dump, pattern.reshape(1,4))\nOut[300]: \narray([['a00', 'b01', 'c02', 'd03'],\n       ['a10', 'b11', 'c02', 'd13'],\n       ['a20', 'b21', 'c22', 'd23'],\n       ['a30', 'b31', 'c32', 'd33']], dtype=object)\n</code></pre>\n\n<p>If I add <code>newaxis</code> to <code>dump</code> I can get a (4,4,2,2) array:</p>\n\n<pre><code>In [302]: fn1(dump[:,:,None,None], pattern)\nOut[302]: \narray([[[['a00', 'b00'],\n         ['c00', 'd00']],\n\n        [['a01', 'b01'],\n         ['c01', 'd01']],\n\n        [['a02', 'b02'],\n         ['c02', 'd02']],\n\n         ....\n\n        [['a32', 'b32'],\n         ['c32', 'd32']],\n\n        [['a33', 'b33'],\n         ['c33', 'd33']]]], dtype=object)\nIn [303]: _.shape\nOut[303]: (4, 4, 2, 2)\n</code></pre>\n\n<p>These are the same as your <code>x</code>, except without the (4,4) (2,2) nesting.</p>\n\n<p>If I copy-n-paste your <code>x</code>, which produces a (4,4,2,2) 'U3' array (it doesn't preserve the nesting), and compare:</p>\n\n<pre><code>In [309]: np.all(xx == Out[302].astype('U3'))\nOut[309]: True\n</code></pre>\n\n<h2>wrapped pattern</h2>\n\n<p>You can wrap your last version in a function definition:</p>\n\n<pre><code>def foo(pattern):\n    def reshape_to_array(in_dict):\n        vec_func = np.frompyfunc(in_dict.get, 1, 1)\n        return vec_func(pattern)\n    func = np.frompyfunc(reshape_to_array,1,1)\n    return func\n</code></pre>\n\n<p>Which will be used as:</p>\n\n<pre><code>In [313]: foo(pattern)\nOut[313]: &lt;ufunc '? (vectorized)'&gt;\nIn [314]: foo(pattern)(dump)\n# your x\n</code></pre>\n\n<h2>outer vectorize</h2>\n\n<pre><code>In [334]: def reshape_to_array(in_dict, pattern=None):\n     ...:     vec_func = np.frompyfunc(in_dict.get, 1, 1)\n     ...:     return vec_func(pattern)\n\nIn [335]: f = np.vectorize(reshape_to_array, excluded=['pattern'], otypes=['O'])\nIn [336]: f(dump, pattern=pattern)\n</code></pre>\n\n<h2>vectorize with complex otypes</h2>\n\n<pre><code>In [380]: def reshape_to_array1(in_dict, pattern=None):\n     ...:     vec_func = np.vectorize(in_dict.get, otypes=[complex])\n     ...:     return vec_func(pattern)\n     ...: \n     ...: \nIn [381]: f = np.vectorize(reshape_to_array1, excluded=['pattern'], otypes=['O\n     ...: '])\nIn [382]: dd = np.array([{'HH': 1+j, 'HV': 1j, 'VH':2j, 'VV': 1+2j}])\nIn [383]: f(dd, pattern=pattern)\nOut[383]: \narray([array([[3.+0.j, 0.+1.j],\n       [0.+2.j, 1.+2.j]])], dtype=object)\n</code></pre>\n"}], "owner": {"reputation": 341, "user_id": 6422069, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xB_DjKm2wHU/AAAAAAAAAAI/AAAAAAAADWk/VjPx_3TQxig/photo.jpg?sz=128", "display_name": "tachyon", "link": "https://stackoverflow.com/users/6422069/tachyon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 1, "accepted_answer_id": 51867441, "answer_count": 1, "score": 1, "last_activity_date": 1534457898, "creation_date": 1534371911, "last_edit_date": 1534372211, "question_id": 51867272, "link": "https://stackoverflow.com/questions/51867272/how-to-vectorize-a-function-having-ndarray-of-different-shape-as-an-argument", "title": "How to vectorize a function having ndarray of different shape as an argument?", "body": "<p>I have the following function:</p>\n\n<pre><code>def reshape_to_array(in_dict, pattern):\n    vec_func = np.frompyfunc(in_dict.get, 1, 1)\n    return vec_func(pattern)\nfunc = np.frompyfunc(reshape_to_array,2,1)\n</code></pre>\n\n<p>Input:</p>\n\n<pre><code>dump = np.array([[{'HH': 'a00', 'HV': 'b00', 'VH': 'c00', 'VV': 'd00'},\n        {'HH': 'a01', 'HV': 'b01', 'VH': 'c01', 'VV': 'd01'},\n        {'HH': 'a02', 'HV': 'b02', 'VH': 'c02', 'VV': 'd02'},\n        {'HH': 'a03', 'HV': 'b03', 'VH': 'c03', 'VV': 'd03'}],\n       [{'HH': 'a10', 'HV': 'b10', 'VH': 'c10', 'VV': 'd10'},\n        {'HH': 'a11', 'HV': 'b11', 'VH': 'c11', 'VV': 'd11'},\n        {'HH': 'a02', 'HV': 'b02', 'VH': 'c02', 'VV': 'd02'},\n        {'HH': 'a13', 'HV': 'b13', 'VH': 'c13', 'VV': 'd13'}],\n       [{'HH': 'a20', 'HV': 'b20', 'VH': 'c20', 'VV': 'd20'},\n        {'HH': 'a21', 'HV': 'b21', 'VH': 'c21', 'VV': 'd21'},\n        {'HH': 'a22', 'HV': 'b22', 'VH': 'c22', 'VV': 'd22'},\n        {'HH': 'a23', 'HV': 'b23', 'VH': 'c23', 'VV': 'd23'}],\n       [{'HH': 'a30', 'HV': 'b30', 'VH': 'c30', 'VV': 'd30'},\n        {'HH': 'a31', 'HV': 'b31', 'VH': 'c31', 'VV': 'd31'},\n        {'HH': 'a32', 'HV': 'b32', 'VH': 'c32', 'VV': 'd32'},\n        {'HH': 'a33', 'HV': 'b33', 'VH': 'c33', 'VV': 'd33'}]])\n\npattern = np.array([['HH', 'HV'], ['VH', 'VV']])\n</code></pre>\n\n<p>When I execute:</p>\n\n<pre><code>x = func(dump, pattern)\n</code></pre>\n\n<p>It throws ryuntime error:</p>\n\n<pre><code>ValueError: operands could not be broadcast together with shapes (4,4) (2,2)\n</code></pre>\n\n<p>But if I modify the <code>reshape_to_array</code> function in the following way:</p>\n\n<pre><code># pattern is global\npattern = np.array([['HH', 'HV'], ['VH', 'VV']])\ndef reshape_to_array(in_dict):\n    vec_func = np.frompyfunc(in_dict.get, 1, 1)\n    return vec_func(pattern)\nfunc = np.frompyfunc(reshape_to_array,1,1)\n</code></pre>\n\n<p>And execute <code>func(dump)</code> it executes successfully and returns the expected (correct) output. Which is:</p>\n\n<pre><code>x = np.array([[array([['a00', 'b00'],\n       ['c00', 'd00']]),\n        array([['a01', 'b01'],\n       ['c01', 'd01']]),\n        array([['a02', 'b02'],\n       ['c02', 'd02']]),\n        array([['a03', 'b03'],\n       ['c03', 'd03']])],\n       [array([['a10', 'b10'],\n       ['c10', 'd10']]),\n        array([['a11', 'b11'],\n       ['c11', 'd11']]),\n        array([['a02', 'b02'],\n       ['c02', 'd02']]),\n        array([['a13', 'b13'],\n       ['c13', 'd13']])],\n       [array([['a20', 'b20'],\n       ['c20', 'd20']]),\n        array([['a21', 'b21'],\n       ['c21', 'd21']]),\n        array([['a22', 'b22'],\n       ['c22', 'd22']]),\n        array([['a23', 'b23'],\n       ['c23', 'd23']])],\n       [array([['a30', 'b30'],\n       ['c30', 'd30']]),\n        array([['a31', 'b31'],\n       ['c31', 'd31']]),\n        array([['a32', 'b32'],\n       ['c32', 'd32']]),\n        array([['a33', 'b33'],\n       ['c33', 'd33']])]])\n</code></pre>\n\n<p>My questions are:</p>\n\n<ol>\n<li>Why the function does not work in the first case but works fine in the second case?</li>\n<li>How to overcome this?</li>\n</ol>\n"}, {"tags": ["python", "callback", "contextmanager"], "answers": [{"comments": [{"owner": {"reputation": 3004, "user_id": 6451244, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-YX-fKMoU-ps/AAAAAAAAAAI/AAAAAAAAACE/qDO4Xj_LSFk/photo.jpg?sz=128", "display_name": "Jonathan DEKHTIAR", "link": "https://stackoverflow.com/users/6451244/jonathan-dekhtiar"}, "edited": false, "score": 0, "creation_date": 1534375727, "post_id": 51867726, "comment_id": 90687299, "body": "I should have precised, I can&#39;t modify BaseClass nor SubClass. So impossible to modify <b>init</b> and <b>new</b>. I will edit my post"}, {"owner": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "reply_to_user": {"reputation": 3004, "user_id": 6451244, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-YX-fKMoU-ps/AAAAAAAAAAI/AAAAAAAAACE/qDO4Xj_LSFk/photo.jpg?sz=128", "display_name": "Jonathan DEKHTIAR", "link": "https://stackoverflow.com/users/6451244/jonathan-dekhtiar"}, "edited": false, "score": 0, "creation_date": 1534375880, "post_id": 51867726, "comment_id": 90687332, "body": "you can achive some tracktion with standalone <i>new(cls)</i> function, but that would be a bit of wierd code, like <code>obj_1 = new(BaseClass, name)</code>."}, {"owner": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "reply_to_user": {"reputation": 3004, "user_id": 6451244, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-YX-fKMoU-ps/AAAAAAAAAAI/AAAAAAAAACE/qDO4Xj_LSFk/photo.jpg?sz=128", "display_name": "Jonathan DEKHTIAR", "link": "https://stackoverflow.com/users/6451244/jonathan-dekhtiar"}, "edited": false, "score": 0, "creation_date": 1534375953, "post_id": 51867726, "comment_id": 90687348, "body": "also a direction: <a href=\"https://stackoverflow.com/questions/16017397/injecting-function-call-after-init-with-decorator\" title=\"injecting function call after init with decorator\">stackoverflow.com/questions/16017397/&hellip;</a>"}, {"owner": {"reputation": 3004, "user_id": 6451244, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-YX-fKMoU-ps/AAAAAAAAAAI/AAAAAAAAACE/qDO4Xj_LSFk/photo.jpg?sz=128", "display_name": "Jonathan DEKHTIAR", "link": "https://stackoverflow.com/users/6451244/jonathan-dekhtiar"}, "edited": false, "score": 0, "creation_date": 1534375978, "post_id": 51867726, "comment_id": 90687355, "body": "That would definitely be a solution, however it&amp;#39;s not intercepting the object creation, it&amp;#39;s more encapsulating it. Why would require to rewrite a large part of the code base and break code habits. I would highly prefer not doing it something like this"}, {"owner": {"reputation": 3004, "user_id": 6451244, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-YX-fKMoU-ps/AAAAAAAAAAI/AAAAAAAAACE/qDO4Xj_LSFk/photo.jpg?sz=128", "display_name": "Jonathan DEKHTIAR", "link": "https://stackoverflow.com/users/6451244/jonathan-dekhtiar"}, "edited": false, "score": 1, "creation_date": 1534376093, "post_id": 51867726, "comment_id": 90687381, "body": "Oh that one is nice, I&#39;ll have a look. Thanks buddy!"}, {"owner": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "reply_to_user": {"reputation": 3004, "user_id": 6451244, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-YX-fKMoU-ps/AAAAAAAAAAI/AAAAAAAAACE/qDO4Xj_LSFk/photo.jpg?sz=128", "display_name": "Jonathan DEKHTIAR", "link": "https://stackoverflow.com/users/6451244/jonathan-dekhtiar"}, "edited": false, "score": 0, "creation_date": 1534376141, "post_id": 51867726, "comment_id": 90687387, "body": "It would be an interesting solution to intercept the object contruction indeed,  but it looks to be an interpreter-level hack. I doubt a context manger alone can help."}], "tags": [], "owner": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "is_accepted": false, "score": 1, "last_activity_date": 1534375549, "creation_date": 1534375549, "answer_id": 51867726, "question_id": 51867255, "link": "https://stackoverflow.com/questions/51867255/python-contextmanager-and-object-creation/51867726#51867726", "title": "Python contextmanager and object creation", "body": "<p>I can see you can implement rather easily a slightly different context manager:</p>\n\n<pre><code>with my_context_watchdog(some_instance):\n     pass\n</code></pre>\n\n<p>... but this is probably as good as a checker function and not the functionality you'd want. The magic of a context manager is __enter__ method, so there is just that much what can happen there, no any kind of massive overloads. There is probably a way to voerride __init__ method </p>\n\n<p>You can also make some constructor that can differentiate the classes names and think of applying it to __new__  method too:</p>\n\n<pre><code>def new(cls):\n     if cls.__name__ == 'BaseClass':\n          pass\n          # do something\n     else:\n          pass\n          # do a different thing\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3004, "user_id": 6451244, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-YX-fKMoU-ps/AAAAAAAAAAI/AAAAAAAAACE/qDO4Xj_LSFk/photo.jpg?sz=128", "display_name": "Jonathan DEKHTIAR", "link": "https://stackoverflow.com/users/6451244/jonathan-dekhtiar"}, "edited": false, "score": 0, "creation_date": 1534376398, "post_id": 51867780, "comment_id": 90687444, "body": "Hum... I&#39;m not a big fan of having to use instantiate() to create objects... It will break a large part of the code base and would like to keep it as transparent as possible.  Thanks anyway, I&#39;m gonna have a look to monkey_patching may looks like promising."}], "tags": [], "owner": {"reputation": 1525, "user_id": 222189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/36cb170adfa384f33da06c74450e2365?s=128&d=identicon&r=PG", "display_name": "matejcik", "link": "https://stackoverflow.com/users/222189/matejcik"}, "is_accepted": false, "score": 2, "last_activity_date": 1534376027, "creation_date": 1534376027, "answer_id": 51867780, "question_id": 51867255, "link": "https://stackoverflow.com/questions/51867255/python-contextmanager-and-object-creation/51867780#51867780", "title": "Python contextmanager and object creation", "body": "<p>The context manager doesn't actually see code in the <code>with</code> block. If you see a library doing something \"magical\" like this, there is usually a hidden global variable somewhere in the background, and the functions called inside the <code>with</code> block actively cooperate with the context manager.</p>\n\n<p>That said, there's two options for you. One makes sense and one is very ugly.</p>\n\n<p>The one that makes sense:</p>\n\n<pre><code># somewhere in the context manager:\nclass ContextManagerReturnVal:\n    def instantiate(self, cls, *args, **kwargs):\n        obj = cls(*args, **kwargs)\n        if issubclass(cls, self.base_class):\n            self.callback(cls, *args, **kwargs)\n        return obj\n\nwith watchdog(callback, BaseClass) as instantiate:\n    obj1 = instantiate(BaseClass, name)\n    obj2 = instantiate(SubClass, name)\n</code></pre>\n\n<p>And the ugly one is monkey-patching the <code>BaseClass</code>. You said in a comment that you can't <em>modify</em> the <code>BaseClass</code> - depends on what exactly you mean by that. If you can't modify the source code, you could still modify the class at run-time, like here: <a href=\"https://stackoverflow.com/questions/19545982/monkey-patching-a-class-in-another-module-in-python\">Monkey patching a class in another module in Python</a>\nYou would have to store the original <code>__init__</code> method and return it after your context manager exits... This is of course not recommended because you're basically sticking your fingers where you shouldn't and possibly introducing hard-to-find bugs.</p>\n\n<p>Other than that, I'm afraid it can't be done.</p>\n"}], "owner": {"reputation": 3004, "user_id": 6451244, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-YX-fKMoU-ps/AAAAAAAAAAI/AAAAAAAAACE/qDO4Xj_LSFk/photo.jpg?sz=128", "display_name": "Jonathan DEKHTIAR", "link": "https://stackoverflow.com/users/6451244/jonathan-dekhtiar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 327, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1534376027, "creation_date": 1534371767, "last_edit_date": 1534375867, "question_id": 51867255, "link": "https://stackoverflow.com/questions/51867255/python-contextmanager-and-object-creation", "title": "Python contextmanager and object creation", "body": "<p>I would like to create a contextmanager that would intercept any object instantiation from a given class or subclasses of this classes and do something with the object.</p>\n\n<p>I sudo code it could look like something like this:</p>\n\n<pre><code>with my_context_watchdog(my_callback, BaseClass):\n     obj_1 = BaseClass(name) # launch callback\n     obj_2 = SubClass(name) # launch callback\n\n     obj_3 = RandomClass(name) # does not launch callback\n\ndef my_callback(new_obj):\n     print(\"new object name:\", new_obj.name)\n</code></pre>\n\n<p>Is there anyway I could do something like this in Python?</p>\n\n<p>The best would be that the callback is executed only <strong>after</strong> the object has been fully instantiated. </p>\n\n<p><strong>Important:</strong> I can't modify any of the object classes, they are in a library I don't have any control on it. I just want to raise a callback when some of the Classes of this library are instantiated. </p>\n\n<p>Maybe the contextmanager is not the best idea, I'm opened to any other solution. </p>\n"}, {"tags": ["python", "discord", "discord.py"], "comments": [{"owner": {"reputation": 3108, "user_id": 5288867, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh3.googleusercontent.com/-zd2wZZ4VrjY/AAAAAAAAAAI/AAAAAAAADiM/koENXn3dc8s/photo.jpg?sz=128", "display_name": "dangee1705", "link": "https://stackoverflow.com/users/5288867/dangee1705"}, "edited": false, "score": 0, "creation_date": 1534371431, "post_id": 51867193, "comment_id": 90686342, "body": "what was the full error"}, {"owner": {"reputation": 87, "user_id": 9552883, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sEURstZDfUI/AAAAAAAAAAI/AAAAAAAAAes/1Gj0XRfw5uA/photo.jpg?sz=128", "display_name": "HaMoOoOd25", "link": "https://stackoverflow.com/users/9552883/hamooood25"}, "reply_to_user": {"reputation": 3108, "user_id": 5288867, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh3.googleusercontent.com/-zd2wZZ4VrjY/AAAAAAAAAAI/AAAAAAAADiM/koENXn3dc8s/photo.jpg?sz=128", "display_name": "dangee1705", "link": "https://stackoverflow.com/users/5288867/dangee1705"}, "edited": false, "score": 0, "creation_date": 1534371456, "post_id": 51867193, "comment_id": 90686350, "body": "Ignoring exception in on_member_join Traceback (most recent call last):   File &quot;C:\\Users\\ezter\\AppData\\Local\\Programs\\Python\\Python36\\lib\\s&zwnj;&#8203;ite-packages\\discord&zwnj;&#8203;\\client.py&quot;, line 307, in _run_event     yield from getattr(self, event)(*args, **kwargs)   File &quot;C:\\Users\\ezter\\Desktop\\Oneplix bot\\Bot.py&quot;, line 45, in on_member_join     await general.send(&#39;Welcome &lt;@%s&gt; to OnePlix server, I am Cooler!&#39; % (mid)) AttributeError: &#39;NoneType&#39; object has no attribute &#39;send&#39;"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1534371634, "post_id": 51867193, "comment_id": 90686388, "body": "The error is telling you <code>general</code> is <code>None</code>, but your code is assuming it&#39;s not <code>None</code>."}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1534371656, "post_id": 51867193, "comment_id": 90686394, "body": "If you run <code>import discord; print(discord.__version__)</code>, what does it print?"}, {"owner": {"reputation": 678, "user_id": 4698348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54890812d4d7e3d612db65f3360d0886?s=128&d=identicon&r=PG&f=1", "display_name": "hallo", "link": "https://stackoverflow.com/users/4698348/hallo"}, "edited": false, "score": 0, "creation_date": 1534371723, "post_id": 51867193, "comment_id": 90686407, "body": "You&#39;re presumably running the currently-stable/-public version of discord.py, in which all IDs are strings. Wrap that channel ID in quote marks and see if it works."}, {"owner": {"reputation": 87, "user_id": 9552883, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sEURstZDfUI/AAAAAAAAAAI/AAAAAAAAAes/1Gj0XRfw5uA/photo.jpg?sz=128", "display_name": "HaMoOoOd25", "link": "https://stackoverflow.com/users/9552883/hamooood25"}, "edited": false, "score": 0, "creation_date": 1534372108, "post_id": 51867193, "comment_id": 90686505, "body": "I did the quote I get the same error except that the &#39;NoneType&#39; turnes into &#39;Channel&#39;"}, {"owner": {"reputation": 87, "user_id": 9552883, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sEURstZDfUI/AAAAAAAAAAI/AAAAAAAAAes/1Gj0XRfw5uA/photo.jpg?sz=128", "display_name": "HaMoOoOd25", "link": "https://stackoverflow.com/users/9552883/hamooood25"}, "edited": false, "score": 0, "creation_date": 1534372179, "post_id": 51867193, "comment_id": 90686520, "body": "And the version is 0.16.12"}], "answers": [{"comments": [{"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 1, "creation_date": 1534372771, "post_id": 51867380, "comment_id": 90686650, "body": "You probably want to use the second method there: <code>await client.send_message(client.get_channel(&#39;12324234183172&#39;), &#39;hello&#39;)</code>.  The <code>Object</code> class resolving items based on their ids works, but it&#39;s really easy to lose track of what the type of that object should be, espescially when your bots start getting large."}], "tags": [], "owner": {"reputation": 87, "user_id": 9552883, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sEURstZDfUI/AAAAAAAAAAI/AAAAAAAAAes/1Gj0XRfw5uA/photo.jpg?sz=128", "display_name": "HaMoOoOd25", "link": "https://stackoverflow.com/users/9552883/hamooood25"}, "is_accepted": true, "score": 0, "last_activity_date": 1534372648, "creation_date": 1534372648, "answer_id": 51867380, "question_id": 51867193, "link": "https://stackoverflow.com/questions/51867193/attributeerror-nonetype-object-has-no-attribute-send/51867380#51867380", "title": "AttributeError: &#39;NoneType&#39; object has no attribute &#39;send&#39;", "body": "<p>This is a stupid mistake. I entered the FAQ of the wrong discord.py version. </p>\n\n<p>The solution is this </p>\n\n<pre><code>await client.send_message(discord.Object(id='12324234183172'), 'hello')\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 9552883, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sEURstZDfUI/AAAAAAAAAAI/AAAAAAAAAes/1Gj0XRfw5uA/photo.jpg?sz=128", "display_name": "HaMoOoOd25", "link": "https://stackoverflow.com/users/9552883/hamooood25"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8521, "favorite_count": 0, "accepted_answer_id": 51867380, "answer_count": 1, "score": 1, "last_activity_date": 1534372648, "creation_date": 1534371386, "question_id": 51867193, "link": "https://stackoverflow.com/questions/51867193/attributeerror-nonetype-object-has-no-attribute-send", "title": "AttributeError: &#39;NoneType&#39; object has no attribute &#39;send&#39;", "body": "<p>I want to send a message to a specific channel, I followed the steps of discord on how to do it I followed their steps correctly but it aint work.\nHere is the steps I followed <a href=\"http://discordpy.readthedocs.io/en/rewrite/faq.html#how-do-i-send-a-message-to-a-specific-channel\" rel=\"nofollow noreferrer\">http://discordpy.readthedocs.io/en/rewrite/faq.html#how-do-i-send-a-message-to-a-specific-channel</a></p>\n\n<p>and here is my code: </p>\n\n<pre><code>@bot.event\nasync def on_member_join(member):\n    print(\"A member just joined and his name is\" + member.name)\n    general = bot.get_channel(466675715333554179)\n    mid = member.id\n    await general.send('Welcome &lt;@%s&gt; to OnePlix server, I am Cooler!' % (mid))\n</code></pre>\n"}, {"tags": ["python", "dictionary", "split"], "answers": [{"tags": [], "owner": {"reputation": 3017, "user_id": 2648551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bWyXK.jpg?s=128&g=1", "display_name": "colidyre", "link": "https://stackoverflow.com/users/2648551/colidyre"}, "is_accepted": false, "score": 2, "last_activity_date": 1534599700, "last_edit_date": 1534599700, "creation_date": 1534371666, "answer_id": 51867234, "question_id": 51867176, "link": "https://stackoverflow.com/questions/51867176/splitting-a-single-dictionary-key-and-value-based-on-space-in-python/51867234#51867234", "title": "Splitting a single Dictionary Key and Value based on space in Python", "body": "<p>It's about splitting a string, not a dictionary key itself. The key's value is of the type string. So this can be done with <a href=\"https://docs.python.org/3/library/stdtypes.html#str.split\" rel=\"nofollow noreferrer\">str.split()</a>.</p>\n\n<pre><code>title, first, last = Dict['Name'].split()\nnew_dict = {\"Title\": title, \"First\": first, \"Last\": last}\n</code></pre>\n\n<p>But you will run into trouble if you cannot split it to three parts, then you have to go deeper and write your own function which also handles more or less spaces in the text (see also update at the end).</p>\n\n<p>But this should serve as a starting point as requested. Also interesting could be <a href=\"https://docs.python.org/3/library/stdtypes.html#str.partition\" rel=\"nofollow noreferrer\">str.partition()</a> or using a <a href=\"https://docs.python.org/3/library/re.html\" rel=\"nofollow noreferrer\">regex</a>.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>Here is a solution if you have either 3 name parts or 2 or even 1 without getting into trouble if you have names without title or without title and first name:</p>\n\n<p><a href=\"https://stackoverflow.com/q/51878354/2648551\">zip()-like built-in function filling unequal lengths from left with None value</a></p>\n\n<p>It's not the ultimate solution to all name variants (extra name parts, other permutation etc.) which would be very hard to solve without false positives.</p>\n"}, {"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 4, "last_activity_date": 1534372160, "creation_date": 1534372160, "answer_id": 51867312, "question_id": 51867176, "link": "https://stackoverflow.com/questions/51867176/splitting-a-single-dictionary-key-and-value-based-on-space-in-python/51867312#51867312", "title": "Splitting a single Dictionary Key and Value based on space in Python", "body": "<p>First, make sure you don't shadow built-in class names. Here you're using a capital <code>D</code>, but it's close enough to be confusing.</p>\n\n<p>There are various ways to approach the problem, but each will involve splitting your string value in your input dictionary.</p>\n\n<p>You can extract the only value, split it via <code>str.split</code>, then use <code>dict</code> + <code>zip</code> to link a list of keys with values:</p>\n\n<pre><code>d = {'Name': 'Dr. John Smith'}\nL = ['Title', 'First', 'Last']\n\nsplit = next(iter(d.values())).split()\nres = dict(zip(L, split))\n\nprint(res)\n\n{'Title': 'Dr.', 'First': 'John', 'Last': 'Smith'}\n</code></pre>\n\n<p>There are other ways, e.g. via explicitly defining dictionary keys within the <code>{}</code> constructor, or via a dictionary comprehension. The above solution is generic and minimises repeated references.</p>\n"}, {"comments": [{"owner": {"reputation": 3017, "user_id": 2648551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bWyXK.jpg?s=128&g=1", "display_name": "colidyre", "link": "https://stackoverflow.com/users/2648551/colidyre"}, "edited": false, "score": 1, "creation_date": 1534420097, "post_id": 51867381, "comment_id": 90703834, "body": "This or a similar approach is what a meant by saying <code>But you will run into trouble if you cannot split it to three parts, then you have to go deeper and write your own function which also handles more or less spaces in the text.</code> in <a href=\"https://stackoverflow.com/a/51867234/2648551\">my answer</a>. Thanks for the addition. I think it&#39;s helpful to see one approach to this."}, {"owner": {"reputation": 108, "user_id": 10231056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bd53651d3f836851713ba46ee45a311?s=128&d=identicon&r=PG&f=1", "display_name": "chrisaddy", "link": "https://stackoverflow.com/users/10231056/chrisaddy"}, "reply_to_user": {"reputation": 3017, "user_id": 2648551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bWyXK.jpg?s=128&g=1", "display_name": "colidyre", "link": "https://stackoverflow.com/users/2648551/colidyre"}, "edited": false, "score": 1, "creation_date": 1534422611, "post_id": 51867381, "comment_id": 90705393, "body": "Yes, I after I posted I saw your answer and thought &quot;good timing.&quot; The only thing a function like this won&#39;t do is return a single dictionary for the case of a single person, as you can see in my first output. I went with list of dictionaries as a better generalization since this would be the easiest way to store it in say JSON format. I was assuming there would be more than one coming in at a time, but if it was just a single dictionary at a time, this would turn it into it&#39;s own list which makes adding it to an arbitrary stored list easier."}], "tags": [], "owner": {"reputation": 108, "user_id": 10231056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bd53651d3f836851713ba46ee45a311?s=128&d=identicon&r=PG&f=1", "display_name": "chrisaddy", "link": "https://stackoverflow.com/users/10231056/chrisaddy"}, "is_accepted": false, "score": 3, "last_activity_date": 1534372650, "creation_date": 1534372650, "answer_id": 51867381, "question_id": 51867176, "link": "https://stackoverflow.com/questions/51867176/splitting-a-single-dictionary-key-and-value-based-on-space-in-python/51867381#51867381", "title": "Splitting a single Dictionary Key and Value based on space in Python", "body": "<p>Assuming you want to do this for more than one person, you could store each person as a dictionary like <code>Dicts</code> in a list. This function should do the splitting by spaces and also allows for cases where someone doesn't have a title, i.e., just a first and last name.</p>\n\n<pre><code>def split_names(dict_list):\n    l = []\n    for dict_i in dict_list:\n        new_list = list(dict_i.values())[0].split()\n        if len(new_list) == 2:\n            l.append(\n                {'First': new_list[0],\n                 'Last': new_list[1]}\n            )\n        else:\n            l.append(\n                {'Title': new_list[0],\n                 'First': new_list[1],\n                 'Last': new_list[2]}\n            )\n\n    return l\n</code></pre>\n\n<p>Then,</p>\n\n<pre><code>Dicts = {'Name': 'Dr. John Smith'}\nsplit_names(Dicts)\n\n[{'Title': 'Dr.', 'First': 'John', 'Last': 'Smith'}]\n</code></pre>\n\n<p>Or more generally:</p>\n\n<pre><code>Dicts = [{'Name': 'Dr. John Smith'}, {'Name': 'Mr. Mike Jones'}, {'Name': 'John Doe'}]\nsplit_names(Dicts)\n\n[{'Title': 'Dr.', 'First': 'John', 'Last': 'Smith'},\n {'Title': 'Mr.', 'First': 'Mike', 'Last': 'Jones'},\n {'First': 'John', 'Last': 'Doe'}]\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 2631788, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005939052360/picture?type=large", "display_name": "Madnhain", "link": "https://stackoverflow.com/users/2631788/madnhain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1062, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1534599700, "creation_date": 1534371273, "last_edit_date": 1534378959, "question_id": 51867176, "link": "https://stackoverflow.com/questions/51867176/splitting-a-single-dictionary-key-and-value-based-on-space-in-python", "title": "Splitting a single Dictionary Key and Value based on space in Python", "body": "<p>I am fairly new to Python and not really sure where to start on this, so please forgive the poor directions. </p>\n\n<p>Say I've got a dictionary: </p>\n\n<pre><code>Dict = {'Name': 'Dr. John Smith'}\n</code></pre>\n\n<p>How would I go about splitting that to create:</p>\n\n<pre><code>Dict = {'Title': 'Dr.'\n        'First': 'John'\n        'Last': 'Smith'}\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "logging"], "answers": [{"tags": [], "owner": {"reputation": 324088, "user_id": 1256452, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa1648baa6108c85886312af93bb32c0?s=128&d=identicon&r=PG", "display_name": "torek", "link": "https://stackoverflow.com/users/1256452/torek"}, "is_accepted": true, "score": 1, "last_activity_date": 1534374697, "creation_date": 1534374697, "answer_id": 51867633, "question_id": 51867173, "link": "https://stackoverflow.com/questions/51867173/python3-6-logging-fileconfig-giving-typeerror/51867633#51867633", "title": "python3.6 logging - fileConfig giving TypeError", "body": "<p>As someone answered (but deleted right away), your <code>.ini</code> file is wrong.  In particular the <code>args=(sys.stderr,)</code> passes <code>sys.stderr</code> as the (single) argument to <code>FileHandler</code>, when <code>FileHandler</code> requires a string containing the name of the log file.  This is described in <a href=\"https://docs.python.org/2/library/logging.config.html#configuration-file-format\" rel=\"nofollow noreferrer\">the documentation for using <code>fileConfig</code></a>.  Please go to <a href=\"https://docs.python.org/2/library/logging.config.html\" rel=\"nofollow noreferrer\">the top of the same page</a> to find links to tutorials and a cookbook, because <code>fileConfig</code> is generally unsafe and unsuited to a lot of use cases.</p>\n\n<p>Note that fixing the <code>args</code> just gets you another error, as the <code>keys</code> setting in the <code>[loggers]</code> section is wrong: it must list at least a <code>root</code> key.  It should also list any additional keys you might use, such as something to use your <code>tcp_server.log</code>-file <code>FileHandler</code> instance.  You can then <em>use</em> that instance via <code>logging.getLogger</code> with the qualified name for the handler.</p>\n\n<p>Combining all three fixes (but, again, don't do it this way):</p>\n\n<pre><code>diff --git a/logging_config.ini b/logging_config.ini\nindex 8614b9f..ee1a66b 100644\n--- a/logging_config.ini\n+++ b/logging_config.ini\n@@ -1,5 +1,5 @@\n [loggers]\n-keys=tcp_server\n+keys=root,tcp_server\n\n [handlers]\n keys=stream_handler,file_handler\n@@ -11,6 +11,12 @@ keys=formatter\n level=DEBUG\n handlers=stream_handler\n\n+[logger_tcp_server]\n+level=DEBUG\n+handlers=file_handler\n+propagate=0\n+qualname=whatever\n+\n [handler_stream_handler]\n class=StreamHandler\n level=DEBUG\n@@ -19,10 +25,9 @@ args=(sys.stderr,)\n\n [handler_file_handler]\n class=FileHandler\n-filename=\"tcp_server.log\"\n level=DEBUG\n formatter=formatter\n-args=(sys.stderr,)\n+args=(\"tcp_server.log\",)\n\n [formatter_formatter]\n format=%(asctime)s - %(name)s - %(levelname)s - %(message)s\ndiff --git a/tlog.py b/tlog.py\nindex 12a645a..bc3f07e 100644\n--- a/tlog.py\n+++ b/tlog.py\n@@ -4,3 +4,5 @@ from logging.config import fileConfig\n fileConfig('logging_config.ini')\n logger = logging.getLogger()\n logger.debug('often makes a very good meal of %s', 'visiting tourists')\n+logger = logging.getLogger('whatever')\n+logger.debug('tcp thing')\n</code></pre>\n"}], "owner": {"reputation": 2787, "user_id": 2507197, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/2ltLG.jpg?s=128&g=1", "display_name": "Alter", "link": "https://stackoverflow.com/users/2507197/alter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 441, "favorite_count": 0, "accepted_answer_id": 51867633, "answer_count": 1, "score": 1, "last_activity_date": 1534374697, "creation_date": 1534371251, "last_edit_date": 1534371655, "question_id": 51867173, "link": "https://stackoverflow.com/questions/51867173/python3-6-logging-fileconfig-giving-typeerror", "title": "python3.6 logging - fileConfig giving TypeError", "body": "<p>I'm trying to use <code>logging.config.fileConfig</code> to initialize the logger from a <code>.ini</code> file. However I'm getting an error message when I call <code>fileConfig('logging_config.ini')</code>:</p>\n\n<pre><code>TypeError: expected str, bytes or os.PathLike object, not _io.TextIOWrapper\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>import logging\nfrom logging.config import fileConfig\n\nfileConfig('logging_config.ini')\nlogger = logging.getLogger()\nlogger.debug('often makes a very good meal of %s', 'visiting tourists')\n</code></pre>\n\n<p>logger_config.ini:</p>\n\n<pre><code>[loggers]\nkeys=tcp_server\n\n[handlers]\nkeys=stream_handler,file_handler\n\n[formatters]\nkeys=formatter\n\n[logger_root]\nlevel=DEBUG\nhandlers=stream_handler\n\n[handler_stream_handler]\nclass=StreamHandler\nlevel=DEBUG\nformatter=formatter\nargs=(sys.stderr,)\n\n[handler_file_handler]\nclass=FileHandler\nfilename=\"tcp_server.log\"\nlevel=DEBUG\nformatter=formatter\nargs=(sys.stderr,)\n\n[formatter_formatter]\nformat=%(asctime)s - %(name)s - %(levelname)s - %(message)s\n</code></pre>\n\n<p>full error message:</p>\n\n<pre><code>Traceback (most recent call last):\n    fileConfig('logging_config.ini')\n  File \"C:\\Program Files (x86)\\Anaconda3\\lib\\logging\\config.py\", line 84, in fileConfig\n    handlers = _install_handlers(cp, formatters)\n  File \"C:\\Program Files (x86)\\Anaconda3\\lib\\logging\\config.py\", line 148, in _install_handlers\n    h = klass(*args)\n  File \"C:\\Program Files (x86)\\Anaconda3\\lib\\logging\\__init__.py\", line 1012, in __init__\n    filename = os.fspath(filename)\nTypeError: expected str, bytes or os.PathLike object, not _io.TextIOWrapper\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "list", "loops"], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 8117081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/67834cef504e240477d9ac2656e7c7e5?s=128&d=identicon&r=PG&f=1", "display_name": "Alureon", "link": "https://stackoverflow.com/users/8117081/alureon"}, "edited": false, "score": 0, "creation_date": 1534375021, "post_id": 51867195, "comment_id": 90687136, "body": "Very concise! I&#39;d heard of <code>reduce()</code> but never used it before! Thanks for sharing."}], "tags": [], "owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "is_accepted": false, "score": 1, "last_activity_date": 1534371396, "creation_date": 1534371396, "answer_id": 51867195, "question_id": 51867153, "link": "https://stackoverflow.com/questions/51867153/subtracting-elements-of-list/51867195#51867195", "title": "Subtracting Elements of List", "body": "<p>You can use <a href=\"https://docs.python.org/3/library/functools.html#functools.reduce\" rel=\"nofollow noreferrer\"><code>functools.reduce</code></a> along with <a href=\"https://docs.python.org/3/library/operator.html#operator.sub\" rel=\"nofollow noreferrer\"><code>operator.sub</code></a></p>\n\n<pre><code>from operator import sub\nfrom functools import reduce\n\na = [10, 9, 8]\n\nreduce(sub, a)\n# -7\n</code></pre>\n\n<p>This is roughly equivalent to </p>\n\n<pre><code>a = [10, 9, 8]\n\naccumulator = a[0]\nfor x in a[1:]:\n    accumulator -= x\n\nprint(accumulator)\n# -7\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 147, "user_id": 8117081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/67834cef504e240477d9ac2656e7c7e5?s=128&d=identicon&r=PG&f=1", "display_name": "Alureon", "link": "https://stackoverflow.com/users/8117081/alureon"}, "edited": false, "score": 0, "creation_date": 1534375080, "post_id": 51867265, "comment_id": 90687149, "body": "Yea I realized after I posted that my logic was wrong; I should&#39;ve kept the <i>running</i> difference, not the <i>consecutive</i> difference. Your line with the <code>if</code> statement is also what I was searching for! Thanks!"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1534378969, "post_id": 51867265, "comment_id": 90687955, "body": "Note: Testing <code>i &lt; len(a) - 1</code> on every loop is optimizing for the uncommon case at the expense of the common case. Changing the loop to <code>for x in a[1:]: sub -= x</code> or <code>for i in range(1, len(a)): sub -= a[i]</code>, or even just wrapping the loop in <code>try&#47;except IndexError: pass</code> would achieve the same effect (operating on all values except the first) with much lower overhead (Python level math, <code>len</code> checks, and indexing all have higher overhead than you might expect)."}], "tags": [], "owner": {"reputation": 1173, "user_id": 9915689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nx3Xj.jpg?s=128&g=1", "display_name": "John Stark", "link": "https://stackoverflow.com/users/9915689/john-stark"}, "is_accepted": true, "score": 1, "last_activity_date": 1534371884, "creation_date": 1534371884, "answer_id": 51867265, "question_id": 51867153, "link": "https://stackoverflow.com/questions/51867153/subtracting-elements-of-list/51867265#51867265", "title": "Subtracting Elements of List", "body": "<p>Based on your expected output of -7, you need to be subtracting from the running difference prior to the element you're currently on, rather than <code>a[i] - a[i+1]</code>. </p>\n\n<p>In terms of the index issue, you can resolve it by adding in a logical check to make sure that you have remaining elements in the array by bounding the end point to be <code>len(a) - 1</code></p>\n\n<pre><code>a = [10, 9, 8]  # Example list with 3 integers\nsub = a[0]\nfor i, n in enumerate(a):\n    if i &lt; (len(a) - 1):\n        sub = sub - a[i + 1]\nprint(sub)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 147, "user_id": 8117081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/67834cef504e240477d9ac2656e7c7e5?s=128&d=identicon&r=PG&f=1", "display_name": "Alureon", "link": "https://stackoverflow.com/users/8117081/alureon"}, "edited": false, "score": 0, "creation_date": 1534387932, "post_id": 51867827, "comment_id": 90689630, "body": "I see your logic about <code>a - (b + c + ... + n)</code>, and that&#39;s definitely something I didn&#39;t consider. I did know about <code>sum()</code>, but wanted to avoid using that because I wanted to practice a bit with explicit iteration and loops (since I&#39;m trying to learn C++, which I don&#39;t think has <code>sum()</code>).  I don&#39;t fully understand your point about &quot;shallow copy of most of <code>a</code>&quot; though. Do you mean that a new <code>list</code> object is created and stored in memory when I use <code>sum()</code>, and that&#39;s what you were trying to avoice with <code>iter()</code>?"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 147, "user_id": 8117081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/67834cef504e240477d9ac2656e7c7e5?s=128&d=identicon&r=PG&f=1", "display_name": "Alureon", "link": "https://stackoverflow.com/users/8117081/alureon"}, "edited": false, "score": 1, "creation_date": 1534402309, "post_id": 51867827, "comment_id": 90693659, "body": "@WaterGuy: It&#39;s not the <code>sum</code> itself, it&#39;s the slice operation on <code>a</code>; <code>a[1:]</code> makes a new <code>list</code> containing all but the first element of <code>a</code>. As for &quot;trying to learn C++&quot;, doing so in Python isn&#39;t exactly a useful start; different languages have different strengths and features, and trying to learn C++ via a language with very limited similarities won&#39;t get you very far. As for C++ and <code>sum</code>, <a href=\"https://en.cppreference.com/w/cpp/algorithm/reduce\" rel=\"nofollow noreferrer\">it&#39;s spelled <code>std::reduce</code> in C++17</a> (the default reduction function is addition, making it a <code>sum</code> function). :-)"}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": false, "score": 3, "last_activity_date": 1534376816, "last_edit_date": 1534376816, "creation_date": 1534376463, "answer_id": 51867827, "question_id": 51867153, "link": "https://stackoverflow.com/questions/51867153/subtracting-elements-of-list/51867827#51867827", "title": "Subtracting Elements of List", "body": "<p>Simpler and faster solution than explicit loops or <code>reduce</code>: Realizing that <code>a - b - c - ... - n</code> is equivalent to <code>a - (b + c + ... + n)</code>, so you can use the <code>sum</code> function (which is optimized at the C layer for sums that fit in a C <code>long</code>, only falling back to more expensive Python level <code>int</code>s if it overflows a C <code>long</code>).</p>\n\n<pre><code>a = [10, 9, 8]  # Example list with 3 integers\nsub = a[0] - sum(a[1:])\nprint(sub)\n</code></pre>\n\n<p>Note: This makes a shallow copy of most of <code>a</code>, and requires a sequence type (to support indexing/slicing), not any iterable. You can fix both issues with the slightly longer code:</p>\n\n<pre><code>a = [10, 9, 8]  # Example list with 3 integers\naiter = iter(a)  # Make iterator from any iterable\nsub = next(aiter) - sum(aiter)  # Pull first item from iterator, then pass rest to sum\nprint(sub)\n</code></pre>\n\n<p>This will be ever-so-slightly slower for small input <code>list</code>s (fixed overhead from <code>iter</code>/<code>next</code> being slightly greater than fixed overhead of indexing/slicing, though slicing has growing overhead of copy that <code>iter</code>/<code>next</code> lacks), but the savings on longer inputs would more than make up for it.</p>\n"}], "owner": {"reputation": 147, "user_id": 8117081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/67834cef504e240477d9ac2656e7c7e5?s=128&d=identicon&r=PG&f=1", "display_name": "Alureon", "link": "https://stackoverflow.com/users/8117081/alureon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1717, "favorite_count": 0, "accepted_answer_id": 51867265, "answer_count": 3, "score": 0, "last_activity_date": 1534378558, "creation_date": 1534371145, "last_edit_date": 1534378558, "question_id": 51867153, "link": "https://stackoverflow.com/questions/51867153/subtracting-elements-of-list", "title": "Subtracting Elements of List", "body": "<p>I've a list of integers that I want to subtract from each other in consecutive order. I want to be able to use the code for any size list of integers, even if I don't know the number of integers.</p>\n\n<p>What I've so far:</p>\n\n<pre><code>a = [10, 9, 8]  # Example list with 3 integers\nsub = 0\nfor i, n in enumerate(a):\n    sub = a[i] - a[i+1]\nprint(sub)\n</code></pre>\n\n<p>My expected answer is -7 because:</p>\n\n<p>10 - 9 = 1</p>\n\n<p>Then 1 - 8 = -7</p>\n\n<p>10 and 9 are the first and second element of the list <code>a</code>, respectively. I subtract them to get 1. I then take 1 and deduct 8 -- the third element of the list -- from it to get -7.</p>\n\n<p>Instead, I get an error that the list index is out of range. I know why I'm getting this: because when <code>i</code> hits 2, <code>i+1</code> becomes 3, and there is no <code>a[3]</code> element in the list.</p>\n\n<p>Yet for something so simple, I can't seem to figure out how to obtain consecutive indices like this, especially for a list where I wouldn't know the number of elements.</p>\n\n<p>How can I fix this? Should I just use a <code>try-except</code> clause and <code>break</code> out of the loop when I get the <code>IndexError</code>?</p>\n"}, {"tags": ["python", "pyqt", "pyqt5"], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 1, "last_activity_date": 1534373006, "creation_date": 1534373006, "answer_id": 51867434, "question_id": 51867142, "link": "https://stackoverflow.com/questions/51867142/refresh-layout-and-update-data/51867434#51867434", "title": "Refresh Layout and update data", "body": "<p>It is a bad idea to replace the layouts or widgets since time and memory are wasted, the correct thing is to reuse, in this case I will create a list of lists that maps the buttons, so when you want to update some data in the grid the data will be updated in the buttons.</p>\n\n<pre><code>from PyQt5 import QtWidgets, QtCore, QtGui\nimport string\n\ngrid = [[[\"text\", \"GREEN\"], 0, [\"text\", \"RED\"], 0, 0, 0, 0],\n        [0, 0, 0, 0, 0, 0, 0],\n        [0, 0, 0, 0, 0, 0, 0],\n        [0, 0, 0, 0, 0, 0, 0],\n        [0, 0, 0, 0, 0, 0, 0],\n        [0, 0, 0, 0, 0, 0, 0],\n        [0, 0, 0, 0, 0, 0, 0],\n        [0, 0, 0, 0, 0, 0, 0],\n        [0, 0, 0, 0, 0, 0, 0],\n        [0, 0, 0, 0, 0, 0, 0]]\n\nBTN = \"\"\"QPushButton{{font-weight: bold; color: {};\n        font-size: 14px; background-color: {}; \n        border-width: 2px; border-radius: 100px}}\"\"\"\n\n\nclass Widget(QtWidgets.QWidget):\n    def __init__(self, parent=None):\n        super(Widget, self).__init__(parent)\n\n        self.letter_count = dict(zip(string.ascii_uppercase, [x for x in range(26)]))\n\n        self.initUI()\n        self.buttons = []\n        self.createLayout()\n        self.center_widget()\n\n    def initUI(self):\n        p = self.palette()\n        gradient = QtGui.QLinearGradient(0, 0, 0, 400)\n        gradient.setColorAt(0.0, QtGui.QColor('#f1f1f1'))\n        gradient.setColorAt(1.0, QtGui.QColor('#00a1de'))\n        p.setBrush(QtGui.QPalette.Window, QtGui.QBrush(gradient))\n        self.setPalette(p)\n\n    def createLayout(self):\n        hlay = QtWidgets.QHBoxLayout(self)\n        frameL = QtWidgets.QFrame()\n\n        vlay = QtWidgets.QVBoxLayout(frameL)\n        frame = QtWidgets.QFrame()\n        frame.setObjectName(\"principal\")\n        frame.setStyleSheet(\"#principal{border: 2px solid white;}\")\n        hlay.addWidget(frameL)\n        hlay.addWidget(frame)\n\n        self.gridLayout = QtWidgets.QGridLayout(frame)\n\n        h = 60  # height\n\n        for i, row in enumerate(grid):\n            letter = \"{}\".format(string.ascii_uppercase[i])\n            frameButton = QtWidgets.QFrame()\n            frameButton.setFixedHeight(h)\n            frameButton.setContentsMargins(0, 0, 0, 0)\n            lay = QtWidgets.QVBoxLayout(frameButton)\n            button = QtWidgets.QPushButton(letter)\n            button.setCursor(QtGui.QCursor(QtCore.Qt.PointingHandCursor))\n            button.clicked.connect(lambda x, letter=letter: self.populate_row(letter)) # Every button click returns 'J'\n            lay.addWidget(button)\n            vlay.addWidget(frameButton)\n            self.buttons.append([])\n            for j, val in enumerate(row):\n                gridButton = QtWidgets.QPushButton()\n                gridButton.setFixedSize(h, h)\n                self.buttons[i].append(gridButton)\n                self.gridLayout.addWidget(gridButton, i, j)\n        for ix in range(j + 1):\n            label = QtWidgets.QLabel(\"{}\".format(ix + 1))\n            label.setAlignment(QtCore.Qt.AlignCenter)\n            self.gridLayout.addWidget(label, i + 1, ix)\n        vlay.addWidget(QtWidgets.QLabel())\n        self.update_data()\n\n\n    def update_data(self):\n        for i, row in enumerate(grid):\n            for j, val in enumerate(row):\n                btn = self.buttons[i][j]\n                if isinstance(val, list):\n                    btn.setText(val[0])\n                    if val[1] == \"GREEN\":\n                        btn.setStyleSheet(BTN.format('white', 'green'))\n                    elif val[1] == \"RED\":\n                        btn.setStyleSheet(BTN.format('white', 'red'))\n                else:\n                    btn.setStyleSheet(BTN.format('black', 'white'))\n                    btn.setText(\"{}\".format(val))\n\n\n    def center_widget(self):\n        self.window().setGeometry(\n            QtWidgets.QStyle.alignedRect(\n                QtCore.Qt.LeftToRight,\n                QtCore.Qt.AlignCenter,\n                self.window().size(),\n                QtWidgets.QApplication.desktop().availableGeometry())\n        )\n\n    def populate_row(self, letter):\n        dialog = QtWidgets.QDialog()\n        dialog.resize(660, 360)\n        textBox = QtWidgets.QPlainTextEdit(dialog)\n        Rbtn = QtWidgets.QPushButton('Add To Row')\n        Rbtn.clicked.connect(lambda: self.input_to_grid(textBox.toPlainText(), letter))       \n\n        layout = QtWidgets.QVBoxLayout(dialog)\n        layout.addWidget(textBox)\n        layout.addWidget(Rbtn)\n        dialog.exec_()\n\n    def input_to_grid(self, text, letter):\n        print(text, letter)\n        lst = text.split(' ')\n        for i, x in enumerate(lst):\n            self.add_to_grid((letter, i + 1), x)\n            print((letter, i + 1), x)\n        self.print_grid()\n        self.update_data()\n\n    def add_to_grid(self, loc, item):\n        x, y = self.translate(loc)\n        grid[x][y] = item\n\n    def translate(self, loc):\n        for k, v in self.letter_count.items():\n            if loc[0].upper() == k:\n                x = v\n        y = int(loc[1]) - 1\n        return x, y\n\n    def print_grid(self):\n        \"\"\" Print the grid prettier than normal.. \"\"\"\n        print('\\n'.join(['\\t'.join([str(c) for c in r]) for r in grid]))\n\n\nif __name__ == '__main__':\n    import sys\n\n    app = QtWidgets.QApplication(sys.argv)\n    w = Widget()\n    w.show()\n    sys.exit(app.exec_())\n</code></pre>\n"}], "owner": {"reputation": 2093, "user_id": 7695039, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7630a58c1bb8abc718c3458ff1d08af4?s=128&d=identicon&r=PG&f=1", "display_name": "johnashu", "link": "https://stackoverflow.com/users/7695039/johnashu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2128, "favorite_count": 0, "accepted_answer_id": 51867434, "answer_count": 1, "score": 0, "last_activity_date": 1534373030, "creation_date": 1534371094, "last_edit_date": 1534373030, "question_id": 51867142, "link": "https://stackoverflow.com/questions/51867142/refresh-layout-and-update-data", "title": "Refresh Layout and update data", "body": "<p>I have the following pyqt code that displays a grid of data.</p>\n\n<p>I am able to click on a letter, open a text input box and successfully save the data to the grid and print the updated data in the terminal.</p>\n\n<p>I have tried <code>update()</code> and <code>repaint()</code> but they do nothing aand calling the <code>createLayout()</code> method throws an error of <code>QLayout: Attempting to add QLayout \"\" to Widget \"\", which already has a layout</code></p>\n\n<p>How can I refresh the grid/widget/layout to display the new data?</p>\n\n<pre><code>from PyQt5 import QtWidgets, QtCore, QtGui\nimport string\n\ngrid = [[[\"text\", \"GREEN\"], 0, [\"text\", \"RED\"], 0, 0, 0, 0],\n        [0, 0, 0, 0, 0, 0, 0],\n        [0, 0, 0, 0, 0, 0, 0],\n        [0, 0, 0, 0, 0, 0, 0],\n        [0, 0, 0, 0, 0, 0, 0],\n        [0, 0, 0, 0, 0, 0, 0],\n        [0, 0, 0, 0, 0, 0, 0],\n        [0, 0, 0, 0, 0, 0, 0],\n        [0, 0, 0, 0, 0, 0, 0],\n        [0, 0, 0, 0, 0, 0, 0]]\n\nBTN = \"\"\"QPushButton{{font-weight: bold; color: {};\n        font-size: 14px; background-color: {}; \n        border-width: 2px; border-radius: 100px}}\"\"\"\n\n\nclass Widget(QtWidgets.QWidget):\n    def __init__(self, parent=None):\n        super(Widget, self).__init__(parent)\n\n        self.letter_count = dict(zip(string.ascii_uppercase, [x for x in range(26)]))\n\n        self.initUI()\n        self.createLayout()\n        self.center_widget()\n\n    def initUI(self):\n        p = self.palette()\n        gradient = QtGui.QLinearGradient(0, 0, 0, 400)\n        gradient.setColorAt(0.0, QtGui.QColor('#f1f1f1'))\n        gradient.setColorAt(1.0, QtGui.QColor('#00a1de'))\n        p.setBrush(QtGui.QPalette.Window, QtGui.QBrush(gradient))\n        self.setPalette(p)\n\n    def createLayout(self):\n        hlay = QtWidgets.QHBoxLayout(self)\n        frameL = QtWidgets.QFrame()\n\n        vlay = QtWidgets.QVBoxLayout(frameL)\n        frame = QtWidgets.QFrame()\n        frame.setObjectName(\"principal\")\n        frame.setStyleSheet(\"#principal{border: 2px solid white;}\")\n        hlay.addWidget(frameL)\n        hlay.addWidget(frame)\n\n        gridLayout = QtWidgets.QGridLayout(frame)\n\n        h = 60  # height\n\n        for i, row in enumerate(grid):\n            letter = \"{}\".format(string.ascii_uppercase[i])\n            frameButton = QtWidgets.QFrame()\n            frameButton.setFixedHeight(h)\n            frameButton.setContentsMargins(0, 0, 0, 0)\n            lay = QtWidgets.QVBoxLayout(frameButton)\n            button = QtWidgets.QPushButton(letter)\n            button.setCursor(QtGui.QCursor(QtCore.Qt.PointingHandCursor))\n            button.clicked.connect(lambda x, letter=letter: self.populate_row(letter)) # Every button click returns 'J'\n            lay.addWidget(button)\n            vlay.addWidget(frameButton)\n            for j, val in enumerate(row):\n                gridButton = QtWidgets.QPushButton()\n                gridButton.setFixedSize(h, h)\n                if isinstance(val, list):\n                    gridButton.setText(val[0])\n                    if val[1] == \"GREEN\":\n                        gridButton.setStyleSheet(BTN.format('white', 'green'))\n                    elif val[1] == \"RED\":\n                        gridButton.setStyleSheet(BTN.format('white', 'red'))\n                else:\n                    gridButton.setStyleSheet(BTN.format('black', 'white'))\n                    gridButton.setText(\"{}\".format(val))\n                gridLayout.addWidget(gridButton, i, j)\n\n        for ix in range(j + 1):\n            label = QtWidgets.QLabel(\"{}\".format(ix + 1))\n            label.setAlignment(QtCore.Qt.AlignCenter)\n            gridLayout.addWidget(label, i + 1, ix)\n        vlay.addWidget(QtWidgets.QLabel())\n\n    def center_widget(self):\n        self.window().setGeometry(\n            QtWidgets.QStyle.alignedRect(\n                QtCore.Qt.LeftToRight,\n                QtCore.Qt.AlignCenter,\n                self.window().size(),\n                QtWidgets.QApplication.desktop().availableGeometry())\n        )\n\n    def populate_row(self, letter):\n        \"\"\" Populate the row from index 0 - end \"\"\"\n        print(letter)\n        self.wi = QtWidgets.QWidget()\n        self.wi.resize(660, 360)\n        textBox = QtWidgets.QPlainTextEdit(self.wi)\n        Rbtn = QtWidgets.QPushButton('Add To Row')\n        Rbtn.clicked.connect(lambda: self.input_to_grid(textBox.toPlainText(), letter))       \n\n        layout = QtWidgets.QVBoxLayout()\n        layout.addWidget(textBox)\n        layout.addWidget(Rbtn)\n\n        Rbtn.move(600, 300)\n\n        self.wi.setLayout(layout)\n\n        self.wi.show()\n        return self.wi\n\n    def input_to_grid(self, text, letter):\n        print(text, letter)\n        lst = text.split(' ')\n        for i, x in enumerate(lst):\n            self.add_to_grid((letter, i + 1), x)\n            print((letter, i + 1), x)\n        self.print_grid()\n\n\n    def add_to_grid(self, loc, item):\n        x, y = self.translate(loc)\n        grid[x][y] = [item] \n\n    def translate(self, loc):\n        for k, v in self.letter_count.items():\n            if loc[0].upper() == k:\n                x = v\n        y = int(loc[1]) - 1\n        return x, y\n\n    def print_grid(self):\n        \"\"\" Print the grid prettier than normal.. \"\"\"\n        print('\\n'.join(['\\t'.join([str(c) for c in r]) for r in grid]))\n\n\nif __name__ == '__main__':\n    import sys\n\n    app = QtWidgets.QApplication(sys.argv)\n    w = Widget()\n    w.show()\n    sys.exit(app.exec_())\n</code></pre>\n"}, {"tags": ["python", "unit-testing", "testing", "automated-tests", "tdd"], "answers": [{"tags": [], "owner": {"reputation": 39380, "user_id": 54734, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ea91774321962f70f19362f43568cda9?s=128&d=identicon&r=PG", "display_name": "VoiceOfUnreason", "link": "https://stackoverflow.com/users/54734/voiceofunreason"}, "is_accepted": true, "score": 1, "last_activity_date": 1534562290, "creation_date": 1534562290, "answer_id": 51904929, "question_id": 51867106, "link": "https://stackoverflow.com/questions/51867106/should-test-static-text-for-tdd-for-example-email-subject/51904929#51904929", "title": "should test static text for tdd for example email subject?", "body": "<p><a href=\"https://stackoverflow.com/a/153565/54734\">Kent Beck, 2008</a></p>\n\n<blockquote>\n  <p>I get paid for code that works, not for tests, so my philosophy is to test as little as possible to reach a given level of confidence </p>\n</blockquote>\n\n<pre><code>def send_mail_complete_sectors_and_profile():\nagents = Agents.objects.filter(\n    Q(is_completed_profile=False) |\n    Q(has_sectors_config=False)\n)\nagent_emails = map(lambda a: a.email1, agents)\nsend_mail('', '', '', agent_emails);\n</code></pre>\n\n<blockquote>\n  <p>i have the next piece of code is necessary add a test for including proper subject? or proper \"from\" param?</p>\n</blockquote>\n\n<p>In this case, \"yes, you should probably do that\".</p>\n\n<p>The motivation for writing the test is to improve your design.  In particular, you want to end up with clean separation between core logic and side effects.  If these concepts aren't familiar, see Gary Bernhardt's <a href=\"https://www.destroyallsoftware.com/screencasts/catalog/functional-core-imperative-shell\" rel=\"nofollow noreferrer\">sceen cast</a>, or a recording of his excellent talk <a href=\"https://www.destroyallsoftware.com/talks/boundaries\" rel=\"nofollow noreferrer\">Boundaries</a>.</p>\n\n<p>The promise of test first (an important element of <a href=\"/questions/tagged/tdd\" class=\"post-tag\" title=\"show questions tagged &#39;tdd&#39;\" rel=\"tag\">tdd</a>) is that we get a better understanding of the boundaries and the core by exploring deterministic logic first.</p>\n"}], "owner": {"reputation": 2176, "user_id": 3626118, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/1111184589/picture?type=large", "display_name": "cristian camilo cede&#241;o gallego", "link": "https://stackoverflow.com/users/3626118/cristian-camilo-cede%c3%b1o-gallego"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 51904929, "answer_count": 1, "score": 0, "last_activity_date": 1534571408, "creation_date": 1534370858, "last_edit_date": 1534571408, "question_id": 51867106, "link": "https://stackoverflow.com/questions/51867106/should-test-static-text-for-tdd-for-example-email-subject", "title": "should test static text for tdd for example email subject?", "body": "<p>I'm not sure if should test static text for TDD for example email subject </p>\n\n<p>for example I have the next piece of code is necessary add a test for including proper subject? or proper \"from\" param?</p>\n\n<pre><code>def send_mail_complete_sectors_and_profile():\n    agents = Agents.objects.filter(\n        Q(is_completed_profile=False) |\n        Q(has_sectors_config=False)\n    )\n    agent_emails = map(lambda a: a.email1, agents)\n    send_mail('', '', '', agent_emails);\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 815, "user_id": 8749168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9de0369d344b9fcee5cd586545eeb109?s=128&d=identicon&r=PG&f=1", "display_name": "Wade", "link": "https://stackoverflow.com/users/8749168/wade"}, "edited": false, "score": 0, "creation_date": 1534372274, "post_id": 51867097, "comment_id": 90686544, "body": "Could you post the output?"}, {"owner": {"reputation": 133, "user_id": 4480431, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5lner.jpg?s=128&g=1", "display_name": "Alemex", "link": "https://stackoverflow.com/users/4480431/alemex"}, "reply_to_user": {"reputation": 815, "user_id": 8749168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9de0369d344b9fcee5cd586545eeb109?s=128&d=identicon&r=PG&f=1", "display_name": "Wade", "link": "https://stackoverflow.com/users/8749168/wade"}, "edited": false, "score": 0, "creation_date": 1534373921, "post_id": 51867097, "comment_id": 90686919, "body": "@Wade I edited the question to explain the input and output."}], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 4480431, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5lner.jpg?s=128&g=1", "display_name": "Alemex", "link": "https://stackoverflow.com/users/4480431/alemex"}, "edited": false, "score": 0, "creation_date": 1534395713, "post_id": 51869112, "comment_id": 90691220, "body": "mts is not giving monthly value instead it gives one value."}, {"owner": {"reputation": 1519, "user_id": 9373509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee85b2e77da0aaa34e30c9cf7749f2e1?s=128&d=identicon&r=PG&f=1", "display_name": "aafulei", "link": "https://stackoverflow.com/users/9373509/aafulei"}, "reply_to_user": {"reputation": 133, "user_id": 4480431, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5lner.jpg?s=128&g=1", "display_name": "Alemex", "link": "https://stackoverflow.com/users/4480431/alemex"}, "edited": false, "score": 0, "creation_date": 1534398057, "post_id": 51869112, "comment_id": 90691918, "body": "<code>mts</code> should have 4 values, i.e. values for Jan, Feb, Mar, Apr 2018."}], "tags": [], "owner": {"reputation": 1519, "user_id": 9373509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee85b2e77da0aaa34e30c9cf7749f2e1?s=128&d=identicon&r=PG&f=1", "display_name": "aafulei", "link": "https://stackoverflow.com/users/9373509/aafulei"}, "is_accepted": true, "score": 1, "last_activity_date": 1534398692, "last_edit_date": 1534398692, "creation_date": 1534389252, "answer_id": 51869112, "question_id": 51867097, "link": "https://stackoverflow.com/questions/51867097/reading-daily-time-series-using-pandas-and-re-sampling-to-monthly/51869112#51869112", "title": "Reading daily time-series using pandas and re-sampling to monthly", "body": "<p>Are you asking for <code>resample</code> which converts daily data to monthly data?</p>\n\n<p>Say</p>\n\n<pre><code>rng = np.random.RandomState(42)    # set a random seed so that result is repeatable\nts = pd.Series(data=rng.rand(100),\n               index=pd.date_range('2018/01/01', periods=100, freq='D'))\nmts = ts.resample('M').mean()      # resample (convert) to monthly data\n</code></pre>\n\n<p><code>ts</code> is like</p>\n\n<pre><code>2018-01-01    0.374540\n2018-01-02    0.950714\n2018-01-03    0.731994\n...\n2018-04-08    0.427541\n2018-04-09    0.025419\n2018-04-10    0.107891\n</code></pre>\n\n<p>Now you should have <code>mts</code> like</p>\n\n<pre><code>2018-01-31    0.444047\n2018-02-28    0.498545\n2018-03-31    0.477100\n2018-04-30    0.450325\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 4480431, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5lner.jpg?s=128&g=1", "display_name": "Alemex", "link": "https://stackoverflow.com/users/4480431/alemex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 51869112, "answer_count": 1, "score": 0, "last_activity_date": 1534448761, "creation_date": 1534370806, "last_edit_date": 1534448761, "question_id": 51867097, "link": "https://stackoverflow.com/questions/51867097/reading-daily-time-series-using-pandas-and-re-sampling-to-monthly", "title": "Reading daily time-series using pandas and re-sampling to monthly", "body": "<p>I am very new to Python. I usually use <code>scikits.timeseries</code> to process time-series data. Now I would like to use <code>Panda</code> such as <code>read_csv</code> to do the same as the code shown below. I used the read_csv manual to read the file, but I don't know how to convert the daily time-series to monthly time-series. </p>\n\n<p>The input is one column daily data starting from 2002-01-01 to 2011-12-31, so the length is 3652. The output will be one column monthly data starting from 2002-01 to 2011-12, so the length is 120.</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\nimport scikits.timeseries as ts\nstgSim = ts.time_series(np.loadtxt('examp.txt', delimiter = ',' , skiprows  = 1    ,\n                                                       usecols   = [37] ),\n                                            start_date ='2002-01-01',\n                                            freq='d'                     )\n\nv4 = ts.time_series(np.random.rand(3652),start_date='2002-01-01',freq='d')                              \nstartD = stgSim.date_to_index(v4.start_date) \nstgSim = stgSim[startD:]\nstgSimAnMonth = stgSim.convert(freq='m',func=np.ma.mean)\n</code></pre>\n"}, {"tags": ["python", "regex", "parsing", "compilation", "translate"], "comments": [{"owner": {"reputation": 815, "user_id": 8749168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9de0369d344b9fcee5cd586545eeb109?s=128&d=identicon&r=PG&f=1", "display_name": "Wade", "link": "https://stackoverflow.com/users/8749168/wade"}, "edited": false, "score": 0, "creation_date": 1534370950, "post_id": 51867082, "comment_id": 90686224, "body": "What is the purpose of converting the code? Is there a reason you want to change it to python code if it works in Stata?"}, {"owner": {"reputation": 829, "user_id": 1087924, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/2c73b57019216b5d9a4e20a643d103b3?s=128&d=identicon&r=PG", "display_name": "GoCurry", "link": "https://stackoverflow.com/users/1087924/gocurry"}, "reply_to_user": {"reputation": 815, "user_id": 8749168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9de0369d344b9fcee5cd586545eeb109?s=128&d=identicon&r=PG&f=1", "display_name": "Wade", "link": "https://stackoverflow.com/users/8749168/wade"}, "edited": false, "score": 0, "creation_date": 1534371105, "post_id": 51867082, "comment_id": 90686260, "body": "Because we are moving the entire code base from Stata to Python. Stata is not performant and hard to maintain."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1534380889, "post_id": 51867082, "comment_id": 90688363, "body": "Generally, you would need to understand both languages and write a translation."}, {"owner": {"reputation": 829, "user_id": 1087924, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/2c73b57019216b5d9a4e20a643d103b3?s=128&d=identicon&r=PG", "display_name": "GoCurry", "link": "https://stackoverflow.com/users/1087924/gocurry"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1534385648, "post_id": 51867082, "comment_id": 90689214, "body": "@juanpa.arrivillaga How do I write a translation? Where do I start with? Can you point me to some examples? Thanks a lot."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2201041"}, "edited": false, "score": 0, "creation_date": 1534447853, "post_id": 51867082, "comment_id": 90719935, "body": "@GoCurry At a high level, this would &quot;just&quot; be a compiler that outputs Python code instead of assembler. Lots of talk on that <a href=\"https://stackoverflow.com/questions/1669/learning-to-write-a-compiler\">here</a> But I&#39;d imagine it would be easier to just do it manually..."}], "answers": [{"tags": [], "owner": {"reputation": 815, "user_id": 8749168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9de0369d344b9fcee5cd586545eeb109?s=128&d=identicon&r=PG&f=1", "display_name": "Wade", "link": "https://stackoverflow.com/users/8749168/wade"}, "is_accepted": false, "score": 0, "last_activity_date": 1534371777, "creation_date": 1534371777, "answer_id": 51867256, "question_id": 51867082, "link": "https://stackoverflow.com/questions/51867082/how-do-i-convert-code-of-another-language-into-python/51867256#51867256", "title": "How do I convert code of another language into Python?", "body": "<p>A very simple workaround would be to use the <a href=\"https://docs.python.org/3/library/subprocess.html\" rel=\"nofollow noreferrer\">subprocess</a> module included with python and write a basic command line wrapper to your scripts to use their functionality, then build your code from now on in python. </p>\n\n<p>You could also look into possible API functionality in Stata if you have a whole lot of Stata code and it would take forever to convert it manually to python. This would require you to have access to a server and could be potentially costly, but would be cleaner than the subprocess module and wouldn't require the source code to be contained on your local machine. Also note that it's possible that Stata does not have tools to build an API.</p>\n\n<p>As far as I am aware there are no projects that will directly parse a file from any language and convert it into python. This would be a huge project, although maybe with machine learning or AI it would be possible, though still very difficult. There are libraries for wrapping code in C and C++ (others too I'm sure I just know that these are available), but I can't find anything for Stata.  </p>\n"}], "owner": {"reputation": 829, "user_id": 1087924, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/2c73b57019216b5d9a4e20a643d103b3?s=128&d=identicon&r=PG", "display_name": "GoCurry", "link": "https://stackoverflow.com/users/1087924/gocurry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534371777, "creation_date": 1534370727, "question_id": 51867082, "link": "https://stackoverflow.com/questions/51867082/how-do-i-convert-code-of-another-language-into-python", "title": "How do I convert code of another language into Python?", "body": "<p>I am wondering how can I convert Stata code into Python code. </p>\n\n<p>For example, my Stata code looks like</p>\n\n<pre><code>if (\"`var1'\"==\"\") {\n    local l_QS \"select distinct CountryName from `l_tableName'\"\n    ODBCLoad, exec(\"`l_QS'\") dsn(\"`dsn'\") clear\n\n}\n</code></pre>\n\n<p>And I want to convert it to Python code such as </p>\n\n<pre><code>if (f\"{var1}\"==\"\") :\n    l_QS = f\"select distinct CountryName from {l_tableName}\"\n    SQL_read(f\"{l_QS}\", dsn = f\"{dsn}\")\n</code></pre>\n\n<p>I am new to coding so I don't know what branch of computer science knowledge or what tools/techniques are relevant. I suppose knowledge about compilers and/or using regular expressions may help so I put those tags on my question. Any high-level pointers are appreciated, and specific code examples would be even better. Thanks in advance.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1534370799, "post_id": 51867074, "comment_id": 90686181, "body": "You want to know where the difference jumps by more than 1?"}, {"owner": {"reputation": 714, "user_id": 9036814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250742688f24344257034879f1fc76ea?s=128&d=identicon&r=PG&f=1", "display_name": "mckuok", "link": "https://stackoverflow.com/users/9036814/mckuok"}, "edited": false, "score": 0, "creation_date": 1534370987, "post_id": 51867074, "comment_id": 90686232, "body": "i was smh on what are edge numbers/"}, {"owner": {"reputation": 251, "user_id": 9790807, "user_type": "registered", "profile_image": "https://graph.facebook.com/844964232357409/picture?type=large", "display_name": "Yuchen Huang", "link": "https://stackoverflow.com/users/9790807/yuchen-huang"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1534371105, "post_id": 51867074, "comment_id": 90686261, "body": "@MadPhysicist Basically, yes"}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 2, "creation_date": 1534371146, "post_id": 51867074, "comment_id": 90686273, "body": "Why is <code>[747, 752]</code> not an &quot;edge number&quot;?"}, {"owner": {"reputation": 251, "user_id": 9790807, "user_type": "registered", "profile_image": "https://graph.facebook.com/844964232357409/picture?type=large", "display_name": "Yuchen Huang", "link": "https://stackoverflow.com/users/9790807/yuchen-huang"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1534371576, "post_id": 51867074, "comment_id": 90686380, "body": "@wim, thanks, this is a condition I ignored, the two numbers I want is the most far between each other"}], "answers": [{"comments": [{"owner": {"reputation": 251, "user_id": 9790807, "user_type": "registered", "profile_image": "https://graph.facebook.com/844964232357409/picture?type=large", "display_name": "Yuchen Huang", "link": "https://stackoverflow.com/users/9790807/yuchen-huang"}, "edited": false, "score": 0, "creation_date": 1534371459, "post_id": 51867129, "comment_id": 90686351, "body": "Sorry I ignore one condition, [747, 752]. For edge number, they should be two number who are the most far."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 251, "user_id": 9790807, "user_type": "registered", "profile_image": "https://graph.facebook.com/844964232357409/picture?type=large", "display_name": "Yuchen Huang", "link": "https://stackoverflow.com/users/9790807/yuchen-huang"}, "edited": false, "score": 0, "creation_date": 1534372049, "post_id": 51867129, "comment_id": 90686486, "body": "Updated with max condition taken into account"}], "tags": [], "owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "is_accepted": false, "score": 2, "last_activity_date": 1534372030, "last_edit_date": 1534372030, "creation_date": 1534371020, "answer_id": 51867129, "question_id": 51867074, "link": "https://stackoverflow.com/questions/51867074/get-edge-numbers-from-list/51867129#51867129", "title": "Get &quot;edge numbers&quot; from list", "body": "<p>Assuming that your list is always monotonically increasing, and you just want to know the values:</p>\n\n<pre><code>for i in range(1, len(my_list)):\n    if my_list[i] - my_list[i - 1] != 1:\n        print(my_list[i - 1], my_list[i])\n</code></pre>\n\n<p>You can use a list comprehension to speed things up and retain a copy of the values:</p>\n\n<pre><code>pairs = [(my_list[i - 1], my_list[i]) for i in range(1, len(my_list)) if my_list[i] - my_list[i - 1] != 1]\n</code></pre>\n\n<p>If you want the pair with the max difference, apply <code>max</code> to the result:</p>\n\n<pre><code>max(pairs, key=lambda x: x[1] - x[0])\n</code></pre>\n\n<p>Numpy is generally a more elegant solution for dealing with numerical values. In particular, the <code>diff</code> function is useful for comparing neighbors:</p>\n\n<pre><code>my_array = np.array(my_list)\nmask = np.diff(my_array)\n</code></pre>\n\n<p>Most numpy functions will convert numeric lists into arrays on input, and <code>diff</code> is no exception. The mask computed here is a boolean array that tells you the locations of edges. It is much easier to apply the mask if your data is in array format, so I did the transformation explicitly:</p>\n\n<pre><code>left = my_array[:-1][mask]\nright = my_array[1:][mask]\n</code></pre>\n\n<p>Again, if you want the max, use <code>np.argmax</code>:</p>\n\n<pre><code>index = np.argmax(right - left)\nprint((left[index], right[index]))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11001, "user_id": 3316882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dbfd45c99a28cab8fe0c8ddcb19aea3?s=128&d=identicon&r=PG&f=1", "display_name": "Sunitha", "link": "https://stackoverflow.com/users/3316882/sunitha"}, "is_accepted": false, "score": 4, "last_activity_date": 1534371768, "last_edit_date": 1534371768, "creation_date": 1534371468, "answer_id": 51867206, "question_id": 51867074, "link": "https://stackoverflow.com/questions/51867074/get-edge-numbers-from-list/51867206#51867206", "title": "Get &quot;edge numbers&quot; from list", "body": "<p>Here is a solution using <code>max</code> and <code>zip</code></p>\n\n<pre><code>&gt;&gt;&gt; l = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 747, 752, 753, 754, 755, 756, 757, 758, 759, 760, 761, 762, 763, 764, 765, 766, 767, 768, 769, 770, 771, 772, 773, 774, 775, 776, 777, 778, 779, 780, 781, 782, 783, 784, 785, 786, 787, 788, 789, 790, 791, 792, 793, 794, 795, 796, 797, 798, 799]\n&gt;&gt;&gt; max(zip(l,l[1:]), key=lambda t: abs(t[0]-t[1]))\n(47, 747)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 251, "user_id": 9790807, "user_type": "registered", "profile_image": "https://graph.facebook.com/844964232357409/picture?type=large", "display_name": "Yuchen Huang", "link": "https://stackoverflow.com/users/9790807/yuchen-huang"}, "edited": false, "score": 0, "creation_date": 1534371845, "post_id": 51867235, "comment_id": 90686438, "body": "Excellent! This is what I really want!"}], "tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": true, "score": 7, "last_activity_date": 1534372064, "last_edit_date": 1534372064, "creation_date": 1534371678, "answer_id": 51867235, "question_id": 51867074, "link": "https://stackoverflow.com/questions/51867074/get-edge-numbers-from-list/51867235#51867235", "title": "Get &quot;edge numbers&quot; from list", "body": "<pre><code>&gt;&gt;&gt; n = max(range(1, len(L)), key=lambda i: L[i] - L[i-1])\n&gt;&gt;&gt; L[n-1:n+1]\n[47, 747]\n</code></pre>\n\n<p>A numpy based approach would be:</p>\n\n<pre><code>&gt;&gt;&gt; a = np.array(L)\n&gt;&gt;&gt; n = np.diff(a).argmax()\n&gt;&gt;&gt; a[n:n+2]\narray([ 47, 747])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10920, "user_id": 3390419, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/cXKh9.jpg?s=128&g=1", "display_name": "Paolo", "link": "https://stackoverflow.com/users/3390419/paolo"}, "is_accepted": false, "score": 2, "last_activity_date": 1534371740, "creation_date": 1534371740, "answer_id": 51867249, "question_id": 51867074, "link": "https://stackoverflow.com/questions/51867074/get-edge-numbers-from-list/51867249#51867249", "title": "Get &quot;edge numbers&quot; from list", "body": "<p>You can use <code>np.diff</code> function:</p>\n\n<pre><code>import numpy as np\nls = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 747, 752, 753, 754, 755, 756, 757, 758, 759, 760, 761, 762, 763, 764, 765, 766, 767, 768, 769, 770, 771, 772, 773, 774, 775, 776, 777, 778, 779, 780, 781, 782, 783, 784, 785, 786, 787, 788, 789, 790, 791, 792, 793, 794, 795, 796, 797, 798, 799]\n\nindx = np.argmax(np.diff(ls))\nprint([ls[indx],ls[indx+1]])\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>[47, 747]\n</code></pre>\n"}], "owner": {"reputation": 251, "user_id": 9790807, "user_type": "registered", "profile_image": "https://graph.facebook.com/844964232357409/picture?type=large", "display_name": "Yuchen Huang", "link": "https://stackoverflow.com/users/9790807/yuchen-huang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 1, "accepted_answer_id": 51867235, "answer_count": 4, "score": 7, "last_activity_date": 1534379149, "creation_date": 1534370658, "last_edit_date": 1534379149, "question_id": 51867074, "link": "https://stackoverflow.com/questions/51867074/get-edge-numbers-from-list", "title": "Get &quot;edge numbers&quot; from list", "body": "<p>I have a list of data such as below:</p>\n\n<pre><code>[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 747, 752, 753, 754, 755, 756, 757, 758, 759, 760, 761, 762, 763, 764, 765, 766, 767, 768, 769, 770, 771, 772, 773, 774, 775, 776, 777, 778, 779, 780, 781, 782, 783, 784, 785, 786, 787, 788, 789, 790, 791, 792, 793, 794, 795, 796, 797, 798, 799]\n</code></pre>\n\n<p>I'm trying to find the two consecutive numbers with the greatest distance between them out of this list.</p>\n\n<p>In this case, the answer would be <code>[47, 747]</code> because they are listed right next to each other in the list and <code>747 - 47 = 700</code> which is a greater difference than any other pair of consecutive numbers</p>\n"}, {"tags": ["python", "loops", "enumerate"], "comments": [{"owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 1, "creation_date": 1534370950, "post_id": 51867052, "comment_id": 90686225, "body": "Are the spaces around <code>or</code> and <code>and</code> necessary? They were not part of your data or description."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 9633332, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "pythonista", "link": "https://stackoverflow.com/users/9633332/pythonista"}, "edited": false, "score": 0, "creation_date": 1534373420, "post_id": 51867172, "comment_id": 90686808, "body": "Hi Rory, yes the spaces were only there for readability purposes. I really like the approach - I will work on posting a snippet that follows it. Thank you!"}], "tags": [], "owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "is_accepted": false, "score": 1, "last_activity_date": 1534371251, "creation_date": 1534371251, "answer_id": 51867172, "question_id": 51867052, "link": "https://stackoverflow.com/questions/51867052/logical-expression-building-out-of-a-list-of-tuples/51867172#51867172", "title": "Logical expression building out of a list of tuples", "body": "<p>Since you provide no code, I'll just give you some ideas without any final code. If you want more details, show more work of your own.</p>\n\n<p>It seems that you need to compare the values of consecutive tuples. You also have nothing to compare before the first tuple or after the last tuple, but if you add tuples denoting empty item and depth 0 you can do all comparisons.</p>\n\n<p>So in your loop, get two consecutive tuples using <code>zip</code> with lists that are one off from each other. You can add guard tuples at the beginning and at the end to show depth zero, and if their values are empty strings those values will not show in your result.</p>\n\n<p>So you loop can be</p>\n\n<pre><code>for tuple1, tuple2 in zip([('', 0)] + lst, lst + [('', 0)]:\n</code></pre>\n\n<p>The first time through the loop, <code>tuple1</code> will be the guard tuple <code>('', 0)</code> and <code>tuple2</code> will be the first tuple in the list. The last time through the loop, <code>tuple1</code> will be the last tuple in the list and <code>tuple2</code> will be the guard tuple <code>('', 0)</code>. Every other time, <code>tuple1</code> is a tuple in your list and <code>tuple2</code> is the next tuple in your list.</p>\n\n<p>Then when comparing tuples, add left or right parentheses depending on the difference between the depths. Those zero depths enable the beginning and the closing parentheses. After the parenthesis, add the item in the second (later) tuple. You can add spaces here if you like for <code>and</code> and <code>or</code>.</p>\n\n<p>Can you finish from here?</p>\n"}, {"comments": [{"owner": {"reputation": 935, "user_id": 6312416, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8f49f352cf3013c58d36c09051a76e6a?s=128&d=identicon&r=PG&f=1", "display_name": "nedla2004", "link": "https://stackoverflow.com/users/6312416/nedla2004"}, "edited": false, "score": 0, "creation_date": 1534371632, "post_id": 51867228, "comment_id": 90686387, "body": "The code is basically just a translation of your description, but let me know if further comments would be useful."}, {"owner": {"reputation": 61, "user_id": 9633332, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "pythonista", "link": "https://stackoverflow.com/users/9633332/pythonista"}, "edited": false, "score": 0, "creation_date": 1534374278, "post_id": 51867228, "comment_id": 90686994, "body": "Very instructive and easy to follow - the idea of splitting the original list and using it as the initial depth somehow escaped me. Thanks so much!"}, {"owner": {"reputation": 935, "user_id": 6312416, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8f49f352cf3013c58d36c09051a76e6a?s=128&d=identicon&r=PG&f=1", "display_name": "nedla2004", "link": "https://stackoverflow.com/users/6312416/nedla2004"}, "reply_to_user": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 0, "creation_date": 1534377353, "post_id": 51867228, "comment_id": 90687636, "body": "@RoryDaulton Your comment made me look at the code again and try to make it cleaner, so I updated my post with cleaner code (I hope). When I was making the code the original time I was noticing the repetitiveness, but I couldn&#39;t come up with a nice way to avoid it. The new change I made to the way I include open parens is nice, but for closing parens (the <code>+ [(&#39;&#39;, 0)]</code> in the for loop), I would still like to make it better."}, {"owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 0, "creation_date": 1534377878, "post_id": 51867228, "comment_id": 90687738, "body": "That update does indeed improve your code--it now meets the DRY (Don&#39;t Repeat Yourself) principle. It remains simpler than my approach. Other than switching to my approach, which is better in some ways but worse in other ways, I don&#39;t see how to improve your code, other than adding comments. You did use one of my ideas, the guard tuple, but that&#39;s OK."}, {"owner": {"reputation": 935, "user_id": 6312416, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8f49f352cf3013c58d36c09051a76e6a?s=128&d=identicon&r=PG&f=1", "display_name": "nedla2004", "link": "https://stackoverflow.com/users/6312416/nedla2004"}, "reply_to_user": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 0, "creation_date": 1534378702, "post_id": 51867228, "comment_id": 90687895, "body": "@RoryDaulton I see what you mean about the guard tuple in your post before mine, but I didn&#39;t see it, sorry. Thanks for being okay with it!"}], "tags": [], "owner": {"reputation": 935, "user_id": 6312416, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8f49f352cf3013c58d36c09051a76e6a?s=128&d=identicon&r=PG&f=1", "display_name": "nedla2004", "link": "https://stackoverflow.com/users/6312416/nedla2004"}, "is_accepted": false, "score": 1, "last_activity_date": 1534377111, "last_edit_date": 1534377111, "creation_date": 1534371626, "answer_id": 51867228, "question_id": 51867052, "link": "https://stackoverflow.com/questions/51867052/logical-expression-building-out-of-a-list-of-tuples/51867228#51867228", "title": "Logical expression building out of a list of tuples", "body": "<p>If you do not care about spaces around <code>and</code> and <code>or</code>, this code should work</p>\n\n<pre><code>def fun(lst):\n    text = ''\n    last = 0\n    for op, depth in lst + [('', 0)]:\n        if depth &gt; last:\n            text += '(' * (depth - last)\n        elif depth &lt; last:\n            text += ')' * (last - depth)\n        text += op\n        last = depth\n    return text\n</code></pre>\n\n<p>I think this is the correct understanding of your question, as it works for your example (minus spaces).</p>\n"}], "owner": {"reputation": 61, "user_id": 9633332, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "pythonista", "link": "https://stackoverflow.com/users/9633332/pythonista"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1534377111, "creation_date": 1534370499, "question_id": 51867052, "link": "https://stackoverflow.com/questions/51867052/logical-expression-building-out-of-a-list-of-tuples", "title": "Logical expression building out of a list of tuples", "body": "<p>I am trying to build a logical expression out of that list of tuples (a,b) where a is an operator and b is depth. Basically if second element in next tuple is greater than previous one insert <code>'('</code> if less, insert <code>')'</code> - if equal skip.</p>\n\n<p>Here is an example of what I am talking about: </p>\n\n<p><code>lst = [('a',\u00a08), ('or',\u00a07), ('b',\u00a08), ('and',\u00a06), ('c',\u00a07), ('and',\u00a05), ('d',\u00a07), ('and',\u00a06), ('e',\u00a07)]</code></p>\n\n<p>with desired output being:</p>\n\n<pre><code>((((((((a) or ( b)) and ( c)) and ((d) and (e)))))))\n</code></pre>\n\n<p>I have tried enumeration, looping while adding second list <code>lst[1:]</code> and so on but I am not able to get it. Any help is greatly appreciated. Thank you!</p>\n"}, {"tags": ["python", "append", "limit"], "comments": [{"owner": {"reputation": 74, "user_id": 10012677, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HT4F1.jpg?s=128&g=1", "display_name": "Sarah Strand", "link": "https://stackoverflow.com/users/10012677/sarah-strand"}, "edited": false, "score": 0, "creation_date": 1534370470, "post_id": 51867019, "comment_id": 90686095, "body": "Can you explain the meaning of the numbers in employee.txt? And what sort of data are you wanting in the mars expedition list? Just a number? Or the full data? You could easily make a list of lists of data, each sublist representing an employee, if that&#39;s what you need."}, {"owner": {"reputation": 489, "user_id": 9696274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bb41d3349ae8294ea95dfac00409380?s=128&d=identicon&r=PG&f=1", "display_name": "Yevhen_Radchenko", "link": "https://stackoverflow.com/users/9696274/yevhen-radchenko"}, "reply_to_user": {"reputation": 74, "user_id": 10012677, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HT4F1.jpg?s=128&g=1", "display_name": "Sarah Strand", "link": "https://stackoverflow.com/users/10012677/sarah-strand"}, "edited": false, "score": 0, "creation_date": 1534370613, "post_id": 51867019, "comment_id": 90686128, "body": "if you print list witch contain those elements it will looks like: [1,doctor,0,76] - id, occupation, gender, level, if you call employee_data[2] for this you will get &#39;0&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 489, "user_id": 9696274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bb41d3349ae8294ea95dfac00409380?s=128&d=identicon&r=PG&f=1", "display_name": "Yevhen_Radchenko", "link": "https://stackoverflow.com/users/9696274/yevhen-radchenko"}, "edited": false, "score": 0, "creation_date": 1534371212, "post_id": 51867103, "comment_id": 90686289, "body": "this just add all 120 employees I have in total for expedition"}, {"owner": {"reputation": 74, "user_id": 10012677, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HT4F1.jpg?s=128&g=1", "display_name": "Sarah Strand", "link": "https://stackoverflow.com/users/10012677/sarah-strand"}, "reply_to_user": {"reputation": 489, "user_id": 9696274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bb41d3349ae8294ea95dfac00409380?s=128&d=identicon&r=PG&f=1", "display_name": "Yevhen_Radchenko", "link": "https://stackoverflow.com/users/9696274/yevhen-radchenko"}, "edited": false, "score": 0, "creation_date": 1534371344, "post_id": 51867103, "comment_id": 90686317, "body": "edited to account for this. i can help if you need to have certain numbers of certain types of employees too, not just the first 40 employees listed"}, {"owner": {"reputation": 74, "user_id": 10012677, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HT4F1.jpg?s=128&g=1", "display_name": "Sarah Strand", "link": "https://stackoverflow.com/users/10012677/sarah-strand"}, "reply_to_user": {"reputation": 489, "user_id": 9696274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bb41d3349ae8294ea95dfac00409380?s=128&d=identicon&r=PG&f=1", "display_name": "Yevhen_Radchenko", "link": "https://stackoverflow.com/users/9696274/yevhen-radchenko"}, "edited": false, "score": 0, "creation_date": 1534371536, "post_id": 51867103, "comment_id": 90686372, "body": "Be more specific about other parameters and i can continue to help"}], "tags": [], "owner": {"reputation": 74, "user_id": 10012677, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HT4F1.jpg?s=128&g=1", "display_name": "Sarah Strand", "link": "https://stackoverflow.com/users/10012677/sarah-strand"}, "is_accepted": false, "score": 0, "last_activity_date": 1534371301, "last_edit_date": 1534371301, "creation_date": 1534370839, "answer_id": 51867103, "question_id": 51867019, "link": "https://stackoverflow.com/questions/51867019/how-to-limit-append-elements-count-in-list/51867103#51867103", "title": "How to limit append elements count in list", "body": "<p>try:</p>\n\n<pre><code>manager = 1\ncook = 3\nelectrical_engineer = 4\ncomputers_specialist = 5\ndoctor = 5\nmechanic = 8\nscientist = 14\n\nexpedition_total = 40\nfemale_min = 21\nmale_min = 12\n\n    def total_resist_count():\n\n        with open('employee.txt', 'r') as employee_list:\n\n            total_count = 0\n            female_count = 0\n            male_count = 0\n            expedition = []\n\n            for employee in employee_list.readlines():\n                employee_data = employee.rstrip().split(';')\n                if int(employee_data[2] == 0) and int(employee_data[3]) &gt;= 60:\n                    female_count += 1\n                    total_count += 1\n                    expedition.append(employee_data)\n\n                elif int(employee_data[2] == 1) and int(employee_data[3]) &gt;= 60:\n                    male_count += 1\n                    total_count += 1\n                    expedition.append(employee_data)\n\n        print('Stress-resistant colonists: ', total_count)\n        print('--------- Female colonists: ', female_count)\n        print('----------- Male colonists: ', male_count)\n        print('--------------------------')\n        print('Mars expedition list: ')\n        print(expedition)\n\n\n    if __name__ == '__main__':\n        total_resist_count()\n</code></pre>\n\n<p>If you need more specific parameters, add them in the conditional statements. Like if you need a minimum/maximum amount of a certain type of employee, just check if the running total of this type of employee is within the bounds and if it is, then append or ignore accordingly.</p>\n\n<p>if you have a maximum amount of people you can take (40), use:</p>\n\n<pre><code>manager = 1\ncook = 3\nelectrical_engineer = 4\ncomputers_specialist = 5\ndoctor = 5\nmechanic = 8\nscientist = 14\n\nexpedition_total = 40\nfemale_min = 21\nmale_min = 12\n\ntotal_count = 0\nfemale_count = 0\nmale_count = 0\nexpedition = []\n\n    def total_resist_count():\n        global total_count\n        global female_count\n        global male_count\n        global expedition\n\n        with open('employee.txt', 'r') as employee_list:\n            while len(expedition) &lt; total_count:\n\n                for employee in employee_list.readlines():\n                    employee_data = employee.rstrip().split(';')\n                    if int(employee_data[2] == '0') and int(employee_data[3]) &gt;= 60:\n                        female_count += 1\n                        total_count += 1\n                        expedition.append(employee_data)\n\n                    elif int(employee_data[2] == '1') and int(employee_data[3]) &gt;= 60:\n                        male_count += 1\n                        total_count += 1\n                        expedition.append(employee_data)\n\n        print('Stress-resistant colonists: ', total_count)\n        print('--------- Female colonists: ', female_count)\n        print('----------- Male colonists: ', male_count)\n        print('--------------------------')\n        print('Mars expedition list: ')\n        print(expedition)\n\n\n    if __name__ == '__main__':\n        total_resist_count()\n</code></pre>\n"}], "owner": {"reputation": 489, "user_id": 9696274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bb41d3349ae8294ea95dfac00409380?s=128&d=identicon&r=PG&f=1", "display_name": "Yevhen_Radchenko", "link": "https://stackoverflow.com/users/9696274/yevhen-radchenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534371301, "creation_date": 1534370281, "question_id": 51867019, "link": "https://stackoverflow.com/questions/51867019/how-to-limit-append-elements-count-in-list", "title": "How to limit append elements count in list", "body": "<p>An interesting problem that I'm trying to solve:</p>\n\n<p>I need to limit count of employees I'm taking to expedition ( numbers in my code below )</p>\n\n<p><strong><em>employee.txt</em></strong> example part:</p>\n\n<blockquote>\n  <p>30;electrical engineer;1;70</p>\n  \n  <p>31;scientist;0;100</p>\n  \n  <p>32;doctor;0;42</p>\n  \n  <p>33;scientist;1;47</p>\n  \n  <p>34;mechanic;0;63</p>\n</blockquote>\n\n<p>I have the total number of each of them by gender and profession.\nThere is my code:</p>\n\n<pre><code>manager = 1\ncook = 3\nelectrical_engineer = 4\ncomputers_specialist = 5\ndoctor = 5\nmechanic = 8\nscientist = 14\n\nexpedition_total = 40\nfemale_min = 21\nmale_min = 12\n\ndef total_resist_count():\n\n    with open('employee.txt', 'r') as employee_list:\n\n        total_count = 0\n        female_count = 0\n        male_count = 0\n        expedition = []\n\n        for employee in employee_list.readlines():\n            employee_data = employee.rstrip().split(';')\n            if int(employee_data[3]) &gt;= 60:\n                total_count += 1\n\n            if int(employee_data[2] == '0') and int(employee_data[3]) &gt;= 60:\n                female_count += 1\n\n            if int(employee_data[2] == '1') and int(employee_data[3]) &gt;= 60:\n                male_count += 1\n\n        print('Stress-resistant colonists: ', total_count)\n        print('--------- Female colonists: ', female_count)\n        print('----------- Male colonists: ', male_count)\n        print('--------------------------')\n        print('Mars expedition list: ')\n        pprint(expedition)\n\n\nif __name__ == '__main__':\n    total_resist_count()\n</code></pre>\n\n<blockquote>\n  <p>OUTPUT:</p>\n  \n  <p>Stress-resistant colonists:  90</p>\n  \n  <p>--------- Female colonists:  48</p>\n  \n  <p>----------- Male colonists:  42</p>\n  \n  <hr>\n  \n  <p>Mars expedition list: </p>\n  \n  <p>[]</p>\n</blockquote>\n\n<p>And I need to add each of experts count to expedition ( limited to var's in code - 40 in total )</p>\n\n<p>I try:</p>\n\n<pre><code> if int(employee_data[2] == '0') and int(employee_data[3]) &gt;= 60:\n        expedition.append(employee_data)\n        female_count += 1\n</code></pre>\n\n<p>And:</p>\n\n<pre><code>if int(employee_data[2] == '0') and int(employee_data[3]) &gt;= 60:\n            female_count += 1\n            for female_employee in range(total_count - male_min):\n                expedition.append(female_employee)\n</code></pre>\n\n<p>1) But I'm get full list of employees who have <em>employee_data[2] == '0'</em> and<br>\n<em>employee_data[3]) >= 60</em> ( obviously )</p>\n\n<p>2) I get a duplicating numbers</p>\n\n<blockquote>\n  <p><strong>How I can limit new list append to the numbers I needed ?</strong></p>\n  \n  <p><strong><em>Appreciate any advices and pointing to mistakes</em></strong></p>\n</blockquote>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "is_accepted": true, "score": 4, "last_activity_date": 1534371204, "last_edit_date": 1534371204, "creation_date": 1534370548, "answer_id": 51867059, "question_id": 51867012, "link": "https://stackoverflow.com/questions/51867012/pandas-remove-leading-and-trailing-zeroes-from-each-row/51867059#51867059", "title": "Pandas - Remove leading and trailing zeroes from each row", "body": "<p>Using <a href=\"https://docs.scipy.org/doc/numpy-1.14.0/reference/generated/numpy.trim_zeros.html\" rel=\"nofollow noreferrer\"><code>np.trim_zeros</code></a>:</p>\n\n<blockquote>\n  <p>Trim the leading and/or trailing zeros from a 1-D array or sequence.</p>\n</blockquote>\n\n<pre><code>out = pd.DataFrame([np.trim_zeros(i) for i in df.values], index=df.index)\nout.columns = df.columns[:len(out.columns)]\n\n       c1  c2  c3   c4   c5   c6   c7\nindex\n1       1   2   3  4.0  5.0  NaN  NaN\n2       1   2   3  4.0  5.0  NaN  NaN\n3       1   2   3  NaN  NaN  NaN  NaN\n4       1   2   3  4.0  NaN  NaN  NaN\n5       1   2   3  4.0  5.0  6.0  7.0\n6       1   0   0  4.0  NaN  NaN  NaN\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 194, "user_id": 3868134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5e02b48652cf65f23df21a0019f773?s=128&d=identicon&r=PG&f=1", "display_name": "AmyChodorowski", "link": "https://stackoverflow.com/users/3868134/amychodorowski"}, "edited": false, "score": 1, "creation_date": 1608055078, "post_id": 51867073, "comment_id": 115463345, "body": "This is removing all zeros, not just  preceding and trialing zeros."}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "reply_to_user": {"reputation": 194, "user_id": 3868134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5e02b48652cf65f23df21a0019f773?s=128&d=identicon&r=PG&f=1", "display_name": "AmyChodorowski", "link": "https://stackoverflow.com/users/3868134/amychodorowski"}, "edited": false, "score": 0, "creation_date": 1608061513, "post_id": 51867073, "comment_id": 115466110, "body": "@AmyChodorowski You&#39;re correct.  I modified this solution.  Thank you for letting me know."}], "tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 2, "last_activity_date": 1608061484, "last_edit_date": 1608061484, "creation_date": 1534370655, "answer_id": 51867073, "question_id": 51867012, "link": "https://stackoverflow.com/questions/51867012/pandas-remove-leading-and-trailing-zeroes-from-each-row/51867073#51867073", "title": "Pandas - Remove leading and trailing zeroes from each row", "body": "<p>You can use this:</p>\n<pre><code>df_out = df.apply(lambda x: pd.Series(x.loc[x.mask(x == 0).first_valid_index():\n                                      x.mask(x == 0).last_valid_index()].tolist()), \n                  axis=1)\ndf_out.set_axis(df.columns[df_out.columns], axis=1, inplace=False)\n</code></pre>\n<p>Output:</p>\n<pre><code>        c1   c2   c3   c4   c5   c6   c7\nindex                                   \n1      1.0  2.0  3.0  4.0  5.0  NaN  NaN\n2      1.0  2.0  3.0  4.0  5.0  NaN  NaN\n3      1.0  2.0  3.0  NaN  NaN  NaN  NaN\n4      1.0  2.0  3.0  4.0  NaN  NaN  NaN\n5      1.0  2.0  3.0  4.0  5.0  6.0  7.0\n6      1.0  0.0  0.0  4.0  NaN  NaN  NaN\n</code></pre>\n<p>N</p>\n"}], "owner": {"reputation": 1022, "user_id": 4967460, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f5bb310b6277f2f566b62a32c8acf8d8?s=128&d=identicon&r=PG&f=1", "display_name": "swifty", "link": "https://stackoverflow.com/users/4967460/swifty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1798, "favorite_count": 0, "accepted_answer_id": 51867059, "answer_count": 2, "score": 1, "last_activity_date": 1608061484, "creation_date": 1534370255, "question_id": 51867012, "link": "https://stackoverflow.com/questions/51867012/pandas-remove-leading-and-trailing-zeroes-from-each-row", "title": "Pandas - Remove leading and trailing zeroes from each row", "body": "<p>I would like to remove preceding and trialing zero values <strong>row-wise</strong> in my df and then have them shift to be 'aligned'.</p>\n\n<p>Probably best demonstrated with the below example.</p>\n\n<p>Initial df:</p>\n\n<pre><code>index c1 c2 c3 c4 c5 c6 c7 c8\n1      0  0  1  2  3  4  5  0\n2      0  0  0  1  2  3  4  5\n3      0  1  2  3  0  0  0  0\n4      0  0  1  2  3  4  0  0\n5      1  2  3  4  5  6  7  0\n6      0  0  0  1  0  0  4  0\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>index c1 c2 c3 c4 c5 c6 c7\n1      1  2  3  4  5  \n2      1  2  3  4  5\n3      1  2  3  \n4      1  2  3  4  \n5      1  2  3  4  5  6  7  \n6      1  0  0  4 \n</code></pre>\n\n<p>Note that there is potential to be zeroes within the \"string\" of true values so need to stop at the first / reverse first occurrence. Is this possible? Thanks.</p>\n"}, {"tags": ["python", "google-cloud-platform"], "answers": [{"tags": [], "owner": {"reputation": 1209, "user_id": 5091538, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2IjhGscDJ-U/AAAAAAAAAAI/AAAAAAAAA8Q/_8EKfx7taqI/photo.jpg?sz=128", "display_name": "H&#233;ctor Neri", "link": "https://stackoverflow.com/users/5091538/h%c3%a9ctor-neri"}, "is_accepted": true, "score": 1, "last_activity_date": 1534375568, "creation_date": 1534375568, "answer_id": 51867729, "question_id": 51866993, "link": "https://stackoverflow.com/questions/51866993/where-do-i-find-documentation-for-older-versions-of-google-cloud-python/51867729#51867729", "title": "Where do I find documentation for older versions of google-cloud-python?", "body": "<p>I found it here, although the url includes \"latest\", it's the 0.20.0 release:</p>\n\n<p><a href=\"https://media.readthedocs.org/pdf/gcloud/latest/gcloud.pdf\" rel=\"nofollow noreferrer\">https://media.readthedocs.org/pdf/gcloud/latest/gcloud.pdf</a></p>\n"}], "owner": {"reputation": 1133, "user_id": 3347351, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/IhY2C.jpg?s=128&g=1", "display_name": "KevinTydlacka", "link": "https://stackoverflow.com/users/3347351/kevintydlacka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 51867729, "answer_count": 1, "score": 0, "last_activity_date": 1534375568, "creation_date": 1534370116, "question_id": 51866993, "link": "https://stackoverflow.com/questions/51866993/where-do-i-find-documentation-for-older-versions-of-google-cloud-python", "title": "Where do I find documentation for older versions of google-cloud-python?", "body": "<p>We've got a pretty extensive BI system built on <code>python 2.7</code>/<code>google-cloud 0.20.0</code>. We periodically add products from the Google Cloud Platform, and need to access documentation for the version of the python module we're using. Here is the relevant <code>pip freeze</code> if it helps:</p>\n\n<pre><code>gapic-google-logging-v2==0.10.1\ngapic-google-pubsub-v1==0.10.1\ngax-google-logging-v2==0.8.1\ngax-google-pubsub-v1==0.8.1\ngcloud==0.18.1\ngoogle-api-python-client==1.5.1\ngoogle-cloud==0.20.0\ngoogle-cloud-bigquery==0.20.0\ngoogle-cloud-bigtable==0.20.0\ngoogle-cloud-core==0.20.0\ngoogle-cloud-datastore==0.20.1\ngoogle-cloud-dns==0.20.0\ngoogle-cloud-error-reporting==0.20.0\ngoogle-cloud-language==0.20.0\ngoogle-cloud-logging==0.20.0\ngoogle-cloud-monitoring==0.20.0\ngoogle-cloud-pubsub==0.20.0\ngoogle-cloud-resource-manager==0.20.0\ngoogle-cloud-storage==0.20.0\ngoogle-cloud-translate==0.20.0\ngoogle-cloud-vision==0.20.0\ngoogle-gax==0.14.1\ngoogleads==4.7.0\ngoogleapis-common-protos==1.5.0\ngrpc-google-iam-v1==0.10.1\ngrpc-google-logging-v2==0.10.1\ngrpc-google-pubsub-v1==0.10.1\n</code></pre>\n"}, {"tags": ["python", "pandas", "finance"], "comments": [{"owner": {"reputation": 1202, "user_id": 9937273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xJAip.png?s=128&g=1", "display_name": "Don Thousand", "link": "https://stackoverflow.com/users/9937273/don-thousand"}, "edited": false, "score": 1, "creation_date": 1534369894, "post_id": 51866934, "comment_id": 90685924, "body": "<code>pandas.Series.shift(1)</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 347, "user_id": 3757265, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9c080a521bf4049b974426fee1123a51?s=128&d=identicon&r=PG&f=1", "display_name": "user3757265", "link": "https://stackoverflow.com/users/3757265/user3757265"}, "edited": false, "score": 0, "creation_date": 1534382207, "post_id": 51867519, "comment_id": 90688616, "body": "yeah I tried that and it doesnt work.   I tried.. df1[&#39;PrevDayClose&#39;]=pd.groupby(df1.index.date)[&#39;Close].last(&zwnj;&#8203;).shift(1)"}, {"owner": {"reputation": 485, "user_id": 6786021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5edec462b80ffd30bd4b6e7c456ac053?s=128&d=identicon&r=PG&f=1", "display_name": "VanTan", "link": "https://stackoverflow.com/users/6786021/vantan"}, "reply_to_user": {"reputation": 347, "user_id": 3757265, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9c080a521bf4049b974426fee1123a51?s=128&d=identicon&r=PG&f=1", "display_name": "user3757265", "link": "https://stackoverflow.com/users/3757265/user3757265"}, "edited": false, "score": 0, "creation_date": 1534446286, "post_id": 51867519, "comment_id": 90719244, "body": "See my edit. Hopefully, this guides you in the right direction."}], "tags": [], "owner": {"reputation": 485, "user_id": 6786021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5edec462b80ffd30bd4b6e7c456ac053?s=128&d=identicon&r=PG&f=1", "display_name": "VanTan", "link": "https://stackoverflow.com/users/6786021/vantan"}, "is_accepted": false, "score": 0, "last_activity_date": 1534519490, "last_edit_date": 1534519490, "creation_date": 1534373628, "answer_id": 51867519, "question_id": 51866934, "link": "https://stackoverflow.com/questions/51866934/previouls-daily-close/51867519#51867519", "title": "Previouls Daily Close", "body": "<p>You should show the structure of your dataframe to make it easy for others to make answer more relevant.</p>\n\n<p>Anyway, you can use pandas groupby to group by date and then use last() to get 'close' for the given day..followed by shift(-1) to get previous days's close. </p>\n\n<p>Edit:\nSince yo won't share data structure, I am going to assume one:</p>\n\n<pre><code>df = pd.DataFrame(columns = ['Price'], index = pd.date_range('1/1/2011', periods=72, freq='H'))\ndf.Price = range(72)\ndf['PrevClose']= df.Price.groupby(df.index.date).last().shift(1)\ndf['PrevClose'] = df['PrevClose'].fillna(method='ffill')\n</code></pre>\n\n<p>Edit #2:\nget previous close:</p>\n\n<pre><code>g = df.groupby(df.index.date).close.last().shift(1)\n</code></pre>\n\n<p>apply to new columns:</p>\n\n<pre><code>df['daily_close'] = df.apply(lambda x: g.at[x.name.date()], axis=1)\n</code></pre>\n"}], "owner": {"reputation": 347, "user_id": 3757265, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9c080a521bf4049b974426fee1123a51?s=128&d=identicon&r=PG&f=1", "display_name": "user3757265", "link": "https://stackoverflow.com/users/3757265/user3757265"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534519490, "creation_date": 1534369811, "last_edit_date": 1534381209, "question_id": 51866934, "link": "https://stackoverflow.com/questions/51866934/previouls-daily-close", "title": "Previouls Daily Close", "body": "<p>I have a dataframe of intraday data and I would like to get the previous daily close on the next day of intraday bar data.  My dataframe is uses a datetime index.   </p>\n\n<p>I don't seem to have a good way to do it.  i tried to resample the date and get the daily close and them merge into the other date frame but that wont work as the indexes and size are different.  IS there a way to do this using a vector approach via pandas?\nTHNX</p>\n\n<pre><code>    Open    High    Low Close   Vol Daily_Low   is_daily_low    PrevDayClose\ndatetime                                \n2012-09-18 09:30:00 1324.25 1325.00 1321.75 1324.50 143720  1321.75 1   NaN\n2012-09-18 10:00:00 1324.50 1325.50 1323.00 1324.25 96809   1321.75 0   NaN\n2012-09-18 10:30:00 1324.25 1326.00 1323.50 1326.00 101617  1321.75 0   NaN\n2012-09-18 11:00:00 1326.00 1327.50 1325.25 1327.00 100908  1321.75 0   NaN\n2012-09-18 11:30:00 1326.75 1327.00 1324.25 1325.00 64223   1321.75 0   NaN\n2012-09-18 12:00:00 1324.75 1325.25 1322.25 1322.50 60017   1321.75 0   NaN\n2012-09-18 12:30:00 1322.50 1325.00 1322.25 1324.00 36732   1321.75 0   NaN\n2012-09-18 13:00:00 1324.00 1325.00 1322.00 1323.75 50707   1321.75 0   NaN\n2012-09-18 13:30:00 1323.75 1324.00 1322.50 1322.75 26744   1321.75 0   NaN\n2012-09-18 14:00:00 1322.75 1324.25 1322.25 1323.75 33473   1321.75 0   NaN\n2012-09-18 14:30:00 1323.50 1324.25 1322.50 1323.25 34082   1321.75 0   NaN\n2012-09-18 15:00:00 1323.25 1325.00 1323.00 1324.25 34119   1321.75 0   NaN\n2012-09-18 15:30:00 1324.25 1325.75 1323.25 1325.50 117758  1321.75 0   NaN\n2012-09-19 09:30:00 1327.50 1327.50 1323.50 1324.50 147406  1323.50 1   NaN\n2012-09-19 10:00:00 1324.50 1329.25 1324.50 1326.75 148099  1323.50 0   NaN\n2012-09-19 10:30:00 1326.50 1327.25 1324.25 1326.25 106183  1323.50 0   NaN\n2012-09-19 11:00:00 1326.25 1330.25 1325.75 1329.50 130089  1323.50 0   NaN\n2012-09-19 11:30:00 1329.50 1330.25 1328.50 1329.25 61245   1323.50 0   NaN\n2012-09-19 12:00:00 1329.25 1331.25 1328.25 1331.00 91314   1323.50 0   NaN\n2012-09-19 12:30:00 1330.75 1331.25 1329.75 1330.25 32613   1323.50 0   NaN\n2012-09-19 13:00:00 1330.50 1330.75 1328.75 1329.00 24016   1323.50 0   NaN\n2012-09-19 13:30:00 1329.00 1330.00 1328.00 1329.00 29070   1323.50 0   NaN\n2012-09-19 14:00:00 1328.75 1330.50 1328.75 1329.75 20754   1323.50 0   NaN\n2012-09-19 14:30:00 1329.50 1330.75 1329.25 1330.75 25555   1323.50 0   NaN\n2012-09-19 15:00:00 1330.50 1331.25 1329.50 1329.75 49683   1323.50 0   NaN\n2012-09-19 15:30:00 1329.75 1330.00 1326.50 1326.50 138803  1323.50 0   NaN\n2012-09-20 09:30:00 1320.00 1321.00 1315.75 1316.75 192555  1315.75 1   NaN\n2012-09-20 10:00:00 1317.00 1321.00 1316.50 1320.25 163925  1315.75 0   NaN\n2012-09-20 10:30:00 1320.00 1323.50 1319.75 1323.25 114184  1315.75 0   NaN\n2012-09-20 11:00:00 1323.25 1324.50 1321.25 1322.25 126658  1315.75 0   NaN\n</code></pre>\n\n<p>I want to take this a make a column that is the close form the previous day that is forward filled from the previous day. SO, in my case, the data the previous close column should forward fill from 15:30 Close on 9/18/2012 until the next next day on 9/19/2012.  9/20 should have the column filled for hte next day with the previous day close.</p>\n"}, {"tags": ["java", "python", "django", "httpurlconnection"], "owner": {"reputation": 11, "user_id": 10231159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba4453718c07b6a5f9ffd2da88eb9ec9?s=128&d=identicon&r=PG&f=1", "display_name": "rknowles", "link": "https://stackoverflow.com/users/10231159/rknowles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1534370538, "creation_date": 1534369734, "last_edit_date": 1534370538, "question_id": 51866917, "link": "https://stackoverflow.com/questions/51866917/java-login-to-aristotle-metadata-registry", "title": "Java login to Aristotle Metadata Registry", "body": "<p>I'm trying to write a Java app to query data in an Aristotle Metadata Registry instance. I eventually plan to query for entry points that provide JSON output for my app to work on. To get started I have to login to Aristotle. When I look at the Aristotle console for a regular web user logging in I see this sequence:</p>\n\n<pre><code>[15/Aug/2018 21:16:59] \"GET /login?next=/account/home HTTP/1.1\" 200 7098\n[15/Aug/2018 21:16:59] \"GET /static/COMPILED/aristotle_mdr/login.css HTTP/1.1\" 200 784\n[15/Aug/2018 21:17:08] \"POST /login HTTP/1.1\" 302 0\n[15/Aug/2018 21:17:08] \"GET /account/home HTTP/1.1\" 200 16379\n[15/Aug/2018 21:17:08] \"GET /static/aristotle_mdr/bootstrap/css/bootstrap.min.css HTTP/1.1\" 200 122241\n[15/Aug/2018 21:17:08] \"GET /static/aristotle_mdr/bootstrap/js/bootstrap.min.js HTTP/1.1\" 200 37340\n[15/Aug/2018 21:17:08] \"GET /static/COMPILED/aristotle_mdr/aristotle.visuals.css HTTP/1.1\" 200 1320\n[15/Aug/2018 21:17:08] \"GET /static/COMPILED/aristotle_mdr/aristotle.css HTTP/1.1\" 200 6957\n[15/Aug/2018 21:17:08] \"GET /static/aristotle_mdr/bootstrap.wcag.css HTTP/1.1\" 200 656\n[15/Aug/2018 21:17:08] \"GET /static/aristotle_mdr/pink.wcag.css HTTP/1.1\" 200 1231\n[15/Aug/2018 21:17:08] \"GET /static/aristotle_mdr/aristotle.js HTTP/1.1\" 200 1647\n[15/Aug/2018 21:17:08] \"GET /static/bootstrap3_datetime/bootstrap-datetimepicker.min.css HTTP/1.1\" 200 7785\n[15/Aug/2018 21:17:08] \"GET /static/bootstrap3_datetime/moment.min.js HTTP/1.1\" 200 61317\n[15/Aug/2018 21:17:08] \"GET /static/bootstrap3_datetime/bootstrap-datetimepicker.min.js HTTP/1.1\" 200 38514\n[15/Aug/2018 21:17:08] \"GET /static/aristotle_mdr/aristotle.notify.js HTTP/1.1\" 200 3848\n[15/Aug/2018 21:17:08] \"GET /static/COMPILED/aristotle_mdr/aristotle.dashboard.css HTTP/1.1\" 200 2506\n</code></pre>\n\n<p>I'm not trying to reproduce loading .js and .css, but trying to copy the other GETs and POSTs. My test program produces these results:</p>\n\n<pre><code>[15/Aug/2018 21:22:53] \"GET /login HTTP/1.1\" 200 7085\n[15/Aug/2018 21:22:53] \"POST /login HTTP/1.1\" 302 0\n[15/Aug/2018 21:22:53] \"GET /account/home HTTP/1.1\" 302 0\n[15/Aug/2018 21:22:53] \"GET /login?next=/account/home HTTP/1.1\" 200 7098\n</code></pre>\n\n<p>Not only is something different here, but the HTML returned is not \"account/home\" for my test user but is a fresh login page.</p>\n\n<p>From research online I'm saving and using cookies from my server calls, in particular \"csrftoken\" and \"csrfmiddlewaretoken\". These values sometimes change from request to response. I suspect I may not be managing these correctly. I also wonder about other cookies that I see when I follow the web login, such as \"sessionid\", \"JSESSIONID\", \"remember-me\", and \"XSRF-TOKEN\". I've also debugged the Aristotle server. I can follow the request.user from the web, but my test program shows as \"Anonymous-User\". I must be missing something to retain the user.</p>\n\n<p>The test program is definitely not proper for real login and security. Right now I'm just trying to get past login so I can explore how to request data. I'd appreciate any ideas. Test program follows.</p>\n\n<pre><code>package tester;\n\nimport java.io.BufferedReader;\nimport java.io.DataOutputStream;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.net.CookieManager;\nimport java.net.HttpCookie;\nimport java.net.HttpURLConnection;\nimport java.net.URL;\nimport java.util.List;\nimport java.util.Map;\n\npublic class AristotleConnect {\n\n    private CookieManager msCookieManager = new CookieManager();\n    private String fullCookieString;\n\n\n    public static void main(String[] args) {\n        AristotleConnect ac = new AristotleConnect();\n        ac.connect();\n    }\n\n    private void connect() {\n        String urlStr = \"http://localhost:8000/\";\n        String loginUrlStr = urlStr + \"login\";\n        HttpURLConnection connection = null;\n\n        // Initial connection\n        try {\n            connection = (HttpURLConnection) new URL(loginUrlStr).openConnection();\n        } catch (IOException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n\n        // Save cookies\n        saveCookies(connection);\n\n        // Try login\n        String user = \"SOME-REAL-USER\";\n        String pw = \"THE-PASSWORD\";\n        String params = \"username=\" + user + \"&amp;password=\" + pw;\n\n        try {\n            sendPost(loginUrlStr, params);\n        } catch (Exception e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n\n//      // Does resaving cookies now give us what we need for login?\n//      saveCookies(connection);\n//      try {\n//          sendPost(loginUrlStr, params);\n//      } catch (Exception e) {\n//          // TODO Auto-generated catch block\n//          e.printStackTrace();\n//      }\n\n\n    }\n\n    private void saveCookies(HttpURLConnection connection) {\n        final String COOKIES_HEADER = \"Set-Cookie\";\n\n        Map&lt;String, List&lt;String&gt;&gt; headerFields = connection.getHeaderFields();\n        List&lt;String&gt; cookiesHeader = headerFields.get(COOKIES_HEADER);\n        fullCookieString = cookiesHeader.get(0);\n\n        if (cookiesHeader != null) {\n            for (String cookie : cookiesHeader) {\n                msCookieManager.getCookieStore().add(null,HttpCookie.parse(cookie).get(0));\n            }               \n        }\n    }\n\n    private String addCookie(HttpURLConnection con, String urlParameters) {\n        String newUrlParameters = urlParameters;\n        if (msCookieManager.getCookieStore().getCookies().size() &gt; 0) {\n\n            con.setRequestProperty(\"Cookie\", fullCookieString );\n\n            String csrfValue = \"\";\n            for ( HttpCookie ck : msCookieManager.getCookieStore().getCookies()) {\n                if ( \"csrftoken\".equals(ck.getName())) {\n                    csrfValue = ck.getValue();\n                }\n            }\n            newUrlParameters = \"csrfmiddlewaretoken=\" + csrfValue + \"&amp;\" + newUrlParameters ;\n            con.setRequestProperty(\"csrfmiddlewaretoken\", csrfValue);\n\n        }\n        return newUrlParameters;\n    }\n\n    // HTTP POST request\n    private HttpURLConnection sendPost(String url, String urlParameters) throws Exception {\n\n        URL obj = new URL(url);\n        HttpURLConnection con = (HttpURLConnection) obj.openConnection();\n\n        //add request header\n        con.setRequestMethod(\"POST\");\n        con.setRequestProperty(\"User-Agent\", \"Mozilla/5.0\");\n        con.setRequestProperty(\"Accept-Language\", \"en-US,en;q=0.5\");\n        con.setRequestProperty(\"Accept\", \"*/*\");\n\n        urlParameters = addCookie(con, urlParameters);\n\n        // Send post request\n        con.setDoOutput(true);\n        DataOutputStream wr = new DataOutputStream(con.getOutputStream());\n        wr.writeBytes(urlParameters);\n        wr.flush();\n        wr.close();\n\n        // Show results\n        int responseCode = con.getResponseCode();\n        System.out.println(\"\\nSending 'POST' request to URL : \" + con.getURL());\n        System.out.println(\"Post parameters : \" + urlParameters);\n        System.out.println(\"Response Code : \" + responseCode);\n\n        BufferedReader in = new BufferedReader(\n                new InputStreamReader(con.getInputStream()));\n        String inputLine;\n        StringBuffer response = new StringBuffer();\n\n        while ((inputLine = in.readLine()) != null) {\n            response.append(inputLine);\n        }\n        in.close();\n\n        //print result\n        System.out.println(response.toString());\n\n        return con;\n    }\n}\n</code></pre>\n"}, {"tags": ["python", "pip"], "comments": [{"owner": {"reputation": 74, "user_id": 10012677, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HT4F1.jpg?s=128&g=1", "display_name": "Sarah Strand", "link": "https://stackoverflow.com/users/10012677/sarah-strand"}, "edited": false, "score": 1, "creation_date": 1534369797, "post_id": 51866914, "comment_id": 90685895, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2812520/pip-dealing-with-multiple-python-versions\">pip: dealing with multiple Python versions?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 74, "user_id": 10012677, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HT4F1.jpg?s=128&g=1", "display_name": "Sarah Strand", "link": "https://stackoverflow.com/users/10012677/sarah-strand"}, "is_accepted": false, "score": 1, "last_activity_date": 1534369846, "creation_date": 1534369846, "answer_id": 51866940, "question_id": 51866914, "link": "https://stackoverflow.com/questions/51866914/how-to-install-pip-packages-to-specific-python-version/51866940#51866940", "title": "How to install pip packages to specific Python version?", "body": "<p>use <code>python -m pip</code> where python is the version of python you want to install to</p>\n"}, {"tags": [], "owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "is_accepted": false, "score": 2, "last_activity_date": 1534369849, "creation_date": 1534369849, "answer_id": 51866942, "question_id": 51866914, "link": "https://stackoverflow.com/questions/51866914/how-to-install-pip-packages-to-specific-python-version/51866942#51866942", "title": "How to install pip packages to specific Python version?", "body": "<p>You use the version of <code>pip</code> that corresponds to the desired Python version.  The most universally effective way is to run <code>pythonX.Y -m pip install ...</code>, where <code>X.Y</code> is replaced with the Python version number, though running just <code>pipX.Y install ...</code> may also work under some circumstances.</p>\n"}, {"tags": [], "owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "is_accepted": true, "score": 5, "last_activity_date": 1534370072, "creation_date": 1534370072, "answer_id": 51866986, "question_id": 51866914, "link": "https://stackoverflow.com/questions/51866914/how-to-install-pip-packages-to-specific-python-version/51866986#51866986", "title": "How to install pip packages to specific Python version?", "body": "<p>On Linux the @jwodder answer is fine, but on Windows use the Python Launcher, which is normally installed by default.  You specify the version of Python to launch as <code>-X.Y</code>, e.g.:</p>\n\n<pre><code>py -3.6 -m pip install ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12117, "user_id": 461343, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/am6Pk.jpg?s=128&g=1", "display_name": "Torsten Engelbrecht", "link": "https://stackoverflow.com/users/461343/torsten-engelbrecht"}, "is_accepted": false, "score": 0, "last_activity_date": 1582857652, "last_edit_date": 1582857652, "creation_date": 1534380091, "answer_id": 51868188, "question_id": 51866914, "link": "https://stackoverflow.com/questions/51866914/how-to-install-pip-packages-to-specific-python-version/51868188#51868188", "title": "How to install pip packages to specific Python version?", "body": "<p>I would suggest to use the newer and (now) recommended way of installing Python application dependencies: <a href=\"https://pipenv.kennethreitz.org/\" rel=\"nofollow noreferrer\">pipenv</a>. You can consider <code>pipenv</code> to be the better <code>pip</code> (<code>pip</code> + <code>virtualenv</code> handling + proper depedency management). Using pipenv you create a <code>Pipfile</code> and you can specify the exact <code>python_version</code> you want to use in that file. Since I started using <code>pipenv</code> in my projects most headaches I had previously with Python dependency and version management are gone. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9866372"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3041, "favorite_count": 1, "accepted_answer_id": 51866986, "answer_count": 4, "score": 2, "last_activity_date": 1582857652, "creation_date": 1534369714, "question_id": 51866914, "link": "https://stackoverflow.com/questions/51866914/how-to-install-pip-packages-to-specific-python-version", "title": "How to install pip packages to specific Python version?", "body": "<p>I have Python 3.7 and Python 3.6. How to I chose to which version of Python I want my PIP packages?</p>\n"}, {"tags": ["python", "pandas", "pandas-groupby"], "comments": [{"owner": {"reputation": 1752, "user_id": 9094710, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_cKm8ormGks/AAAAAAAAAAI/AAAAAAAABXQ/foU1k07iisM/photo.jpg?sz=128", "display_name": "Qusai Alothman", "link": "https://stackoverflow.com/users/9094710/qusai-alothman"}, "edited": false, "score": 0, "creation_date": 1534429763, "post_id": 51866908, "comment_id": 90710376, "body": "They are exactly the same."}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "reply_to_user": {"reputation": 1752, "user_id": 9094710, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_cKm8ormGks/AAAAAAAAAAI/AAAAAAAABXQ/foU1k07iisM/photo.jpg?sz=128", "display_name": "Qusai Alothman", "link": "https://stackoverflow.com/users/9094710/qusai-alothman"}, "edited": false, "score": 0, "creation_date": 1569258599, "post_id": 51866908, "comment_id": 102530352, "body": "@QusaiAlothman: No, they&#39;re only the same in this particular case <b>because the OP&#39;s dataframe doesn&#39;t have an explicit index other than the default one 0,1,2...</b> so keeping it or resetting/dropping it doesn&#39;t make a difference. If the dataframe actually had an index e.g. 100, 101, 102.. the results would not be the same."}], "answers": [{"tags": [], "owner": {"reputation": 1804, "user_id": 7571673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GASUB.jpg?s=128&g=1", "display_name": "qmeeus", "link": "https://stackoverflow.com/users/7571673/qmeeus"}, "is_accepted": true, "score": 20, "last_activity_date": 1575556996, "last_edit_date": 1575556996, "creation_date": 1534777927, "answer_id": 51933722, "question_id": 51866908, "link": "https://stackoverflow.com/questions/51866908/difference-between-as-index-false-and-reset-index-in-pandas-groupby/51933722#51933722", "title": "Difference between &quot;as_index = False&quot;, and &quot;reset_index()&quot; in pandas groupby", "body": "<p>When you use <code>as_index=False</code>, you indicate to <code>groupby()</code> that you don't want to set the column ID as the index (duh!). When both implementation yield the same results, use <code>as_index=False</code> because it will save you some typing and an unnecessary pandas operation ;)</p>\n\n<p>However, sometimes, you want to apply more complicated operations on your groups. In those occasions, you might find out that one is more suited than the other.</p>\n\n<p><strong><em>Example 1:</em></strong> You want to sum the values of three variables (i.e. columns) in a group on both axes. </p>\n\n<p>Using <code>as_index=True</code> allows you to apply a sum over <code>axis=1</code> without specifying the names of the columns, then summing the value over axis 0. When the operation is finished, you can use <code>reset_index(drop=True/False)</code> to get the dataframe under the right form.</p>\n\n<p><strong><em>Example 2:</em></strong> You need to set a value for the group based on the columns in the <code>groupby()</code>.</p>\n\n<p>Setting <code>as_index=False</code> allow you to check the condition on a common column and not on an index, which is often way easier.</p>\n\n<p>At some point, you might come across <code>KeyError</code> when applying operations on groups. In that case, it is often because you are trying to use a column in your aggregate function that is currently an index of your GroupBy object.</p>\n"}], "owner": {"reputation": 733, "user_id": 6517513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd19b13b216db8d789c46cd15c38544c?s=128&d=identicon&r=PG&f=1", "display_name": "Rohith", "link": "https://stackoverflow.com/users/6517513/rohith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14995, "favorite_count": 3, "accepted_answer_id": 51933722, "answer_count": 1, "score": 11, "last_activity_date": 1575556996, "creation_date": 1534369677, "last_edit_date": 1534370095, "question_id": 51866908, "link": "https://stackoverflow.com/questions/51866908/difference-between-as-index-false-and-reset-index-in-pandas-groupby", "title": "Difference between &quot;as_index = False&quot;, and &quot;reset_index()&quot; in pandas groupby", "body": "<p>I just wanted to know what is the difference in the function performed by these 2.</p>\n\n<p>Data:</p>\n\n<pre><code>import pandas as pd\ndf = pd.DataFrame({\"ID\":[\"A\",\"B\",\"A\",\"C\",\"A\",\"A\",\"C\",\"B\"], \"value\":[1,2,4,3,6,7,3,4]})\n</code></pre>\n\n<p>as_index=False :</p>\n\n<pre><code>df_group1 = df.groupby(\"ID\").sum().reset_index()\n</code></pre>\n\n<p>reset_index() :</p>\n\n<pre><code>df_group2 = df.groupby(\"ID\", as_index=False).sum()\n</code></pre>\n\n<p>Both of them give the exact same output.</p>\n\n<pre><code>  ID  value\n0  A     18\n1  B      6\n2  C      6\n</code></pre>\n\n<p>Can anyone tell me what is the difference and any example illustrating the same?</p>\n"}, {"tags": ["python", "gunicorn"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 4, "creation_date": 1534369811, "post_id": 51866904, "comment_id": 90685900, "body": "Short form: Don&#39;t worry about it. If it&#39;s not actively being used, it&#39;ll be swapped out; the virtual memory space remains allocated, but something else will be in physical memory. Many allocators <i>won&#39;t ever</i> release memory back to the OS -- it just releases it into a pool that application will malloc() from <i>without needing to ask the OS for more</i> in the future."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1534373875, "post_id": 51866904, "comment_id": 90686907, "body": "I&#39;m split on whether to flag this as a duplicate of <a href=\"https://stackoverflow.com/questions/15455048/releasing-memory-in-python\">Releasing memory in Python</a>. Whether or not they&#39;re duplicates, it&#39;s certainly a very pertinent read."}], "answers": [{"comments": [{"owner": {"reputation": 556, "user_id": 1444274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae195e3379da7a674abf627ceb513629?s=128&d=identicon&r=PG", "display_name": "chAlexey", "link": "https://stackoverflow.com/users/1444274/chalexey"}, "edited": false, "score": 0, "creation_date": 1574333160, "post_id": 53431762, "comment_id": 104199606, "body": "Thanks for this good hint. I think it is a good idea to force a restart of a worker from time to time. ;)"}], "tags": [], "owner": {"reputation": 174, "user_id": 7289220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61ce9e2318845d179fc9789044ea78a6?s=128&d=identicon&r=PG&f=1", "display_name": "praneeth", "link": "https://stackoverflow.com/users/7289220/praneeth"}, "is_accepted": false, "score": 5, "last_activity_date": 1542892187, "creation_date": 1542892187, "answer_id": 53431762, "question_id": 51866904, "link": "https://stackoverflow.com/questions/51866904/gunicorn-worker-doesnt-deflate-memory-after-request/53431762#53431762", "title": "Gunicorn worker doesn&#39;t deflate memory after request", "body": "<p>You may try setting the max-requests (N) parameter for a gunicorn worker to indicate to restart the worker after processing N number of requests.</p>\n\n<p>You can refer for more on the max-requests settings here: \n<a href=\"http://docs.gunicorn.org/en/stable/settings.html\" rel=\"noreferrer\">http://docs.gunicorn.org/en/stable/settings.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 96, "user_id": 5992036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b96431c32a627ef34cbb6566379f8df6?s=128&d=identicon&r=PG", "display_name": "SergeiMinaev", "link": "https://stackoverflow.com/users/5992036/sergeiminaev"}, "edited": false, "score": 0, "creation_date": 1618640777, "post_id": 63113091, "comment_id": 118667993, "body": "This simply restarts a worker after every single request."}], "tags": [], "owner": {"reputation": 11, "user_id": 10713765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GTqO0.png?s=128&g=1", "display_name": "S. M. Ruhul Kabir Howlader", "link": "https://stackoverflow.com/users/10713765/s-m-ruhul-kabir-howlader"}, "is_accepted": false, "score": 0, "last_activity_date": 1595844509, "creation_date": 1595844509, "answer_id": 63113091, "question_id": 51866904, "link": "https://stackoverflow.com/questions/51866904/gunicorn-worker-doesnt-deflate-memory-after-request/63113091#63113091", "title": "Gunicorn worker doesn&#39;t deflate memory after request", "body": "<p><code>--max-requests 1</code> worked for me for a similar case.</p>\n"}], "owner": {"reputation": 1269, "user_id": 1188729, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/2df083558264b350cba7f5562548b012?s=128&d=identicon&r=PG", "display_name": "Mauricio", "link": "https://stackoverflow.com/users/1188729/mauricio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1809, "favorite_count": 1, "answer_count": 2, "score": 5, "last_activity_date": 1595844509, "creation_date": 1534369638, "question_id": 51866904, "link": "https://stackoverflow.com/questions/51866904/gunicorn-worker-doesnt-deflate-memory-after-request", "title": "Gunicorn worker doesn&#39;t deflate memory after request", "body": "<p>I have a single gunicorn worker process running to read an enormous excel file which takes up to 5 minutes and uses 4GB of RAM. But after the request was finished processing I noticed at system monitor that it stills allocating 4GB of RAM forever. Any ideas on what to do to release the memory?</p>\n"}, {"tags": ["python", "django", "factory-boy"], "owner": {"reputation": 34200, "user_id": 995862, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d5efb6c1054808f7a79aaefbc64cce76?s=128&d=identicon&r=PG", "display_name": "Kurt Peek", "link": "https://stackoverflow.com/users/995862/kurt-peek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 288, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1534369595, "creation_date": 1534369595, "question_id": 51866895, "link": "https://stackoverflow.com/questions/51866895/in-django-factory-boy-is-it-possible-to-mute-a-specific-receiver-not-all-signa", "title": "In Django Factory Boy, is it possible to mute a specific receiver (not all signals)?", "body": "<p>In our Django project, we have a receiver function for <code>post_save</code> signals sent by the <code>User</code> model:</p>\n\n<pre><code>@receiver(post_save, sender=User)\ndef update_intercom_attributes(sender, instance, **kwargs):\n    # if the user is not yet in the app, do not attempt to setup/update their Intercom profile.\n    if instance.using_app:\n        intercom.update_intercom_attributes(instance)\n</code></pre>\n\n<p>This receiver calls an external API, and we'd like to disable it when generating test fixtures with <code>factory_boy</code>. As far as I can tell from <a href=\"https://factoryboy.readthedocs.io/en/latest/orms.html#disabling-signals\" rel=\"nofollow noreferrer\">https://factoryboy.readthedocs.io/en/latest/orms.html#disabling-signals</a>, however, all one can do is mute <em>all</em> <code>post_save</code> signals, not a specific receiver.</p>\n\n<p>At the moment, the way we are going about this is by defining an <code>IntercomMixin</code> which every test case inherits from (in the first position in the inheritance chain):</p>\n\n<pre><code>from unittest.mock import patch\n\nclass IntercomMixin:\n    @classmethod\n    def setUpClass(cls):\n        cls.patcher = patch('lucy_web.lib.intercom.update_intercom_attributes')\n        cls.intercomMock = cls.patcher.start()\n        super().setUpClass()\n\n    @classmethod\n    def tearDownClass(cls):\n        super().tearDownClass()\n        cls.patcher.stop()\n</code></pre>\n\n<p>However, it is cumbersome and repetitive to add this mixin to every test case, and ideally, we'd like to build this patching functionality into the test factories themselves.</p>\n\n<p>Is there any way to do this in Factory Boy? (I had a look at the source code (<a href=\"https://github.com/FactoryBoy/factory_boy/blob/2d735767b7f3e1f9adfc3f14c28eeef7acbf6e5a/factory/django.py#L256\" rel=\"nofollow noreferrer\">https://github.com/FactoryBoy/factory_boy/blob/2d735767b7f3e1f9adfc3f14c28eeef7acbf6e5a/factory/django.py#L256</a>) and it seems like the <code>__enter__</code> method is setting <code>signal.receivers = []</code>; perhaps this could be modified so that it accepts a <code>receiver</code> function and pops it out of the the <code>signal.receivers</code> list)?</p>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 1, "creation_date": 1534369081, "post_id": 51866791, "comment_id": 90685643, "body": "You probably want <code>np.concatenate</code>, but please format your question so it&#39;s at least somewhat readable."}, {"owner": {"reputation": 11, "user_id": 10220979, "user_type": "registered", "profile_image": "https://graph.facebook.com/280364675886009/picture?type=large", "display_name": "Marry Fox", "link": "https://stackoverflow.com/users/10220979/marry-fox"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1534369291, "post_id": 51866791, "comment_id": 90685711, "body": "I used it. But the error is concatenate() takes at most 3 arguments (8 given). Is there any other way I can add all  of them?"}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 2, "creation_date": 1534369318, "post_id": 51866791, "comment_id": 90685725, "body": "You&#39;re probably calling it wrong.  Use <code>np.concatenate([a,b,c,d,e,f,g...])</code>.  Don&#39;t pass each array as an argument, pass a list of the arguments.  In your case it would be <code>np.concatenate([first_1,first_2,first_3,first_4,first_5,firs&zwnj;&#8203;t_6,first_7,first_8]&zwnj;&#8203;)</code>"}, {"owner": {"reputation": 11, "user_id": 10220979, "user_type": "registered", "profile_image": "https://graph.facebook.com/280364675886009/picture?type=large", "display_name": "Marry Fox", "link": "https://stackoverflow.com/users/10220979/marry-fox"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1534369476, "post_id": 51866791, "comment_id": 90685780, "body": "the code is np.concatenate([first_1,first_2,first_3,first_4,first_5,firs&zwnj;&#8203;t_6,first_7,first_8]&zwnj;&#8203;). Still got an error: ValueError: zero-dimensional arrays cannot be concatenated"}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 1, "creation_date": 1534369499, "post_id": 51866791, "comment_id": 90685790, "body": "Then please provide an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, as you  have not shown enough information to solve your problem."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1534377463, "post_id": 51866791, "comment_id": 90687659, "body": "<code>np.append</code> is a poorly named function that gives users lots of problems.  Learn to use <code>np.array</code> and <code>np.concatenate</code> correctly."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10220979, "user_type": "registered", "profile_image": "https://graph.facebook.com/280364675886009/picture?type=large", "display_name": "Marry Fox", "link": "https://stackoverflow.com/users/10220979/marry-fox"}, "edited": false, "score": 0, "creation_date": 1534369539, "post_id": 51866873, "comment_id": 90685803, "body": "TypeError: append() missing 1 required positional argument: &#39;values&#39;. What does it mean?"}, {"owner": {"reputation": 1202, "user_id": 9937273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xJAip.png?s=128&g=1", "display_name": "Don Thousand", "link": "https://stackoverflow.com/users/9937273/don-thousand"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 1, "creation_date": 1534369685, "post_id": 51866873, "comment_id": 90685859, "body": "@user3483203 <code>first_1</code>... aren&#39;t arrays, they are numbers lol"}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1534369711, "post_id": 51866873, "comment_id": 90685869, "body": "Well this was a terribly unclear question, my mistake :)"}, {"owner": {"reputation": 1202, "user_id": 9937273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xJAip.png?s=128&g=1", "display_name": "Don Thousand", "link": "https://stackoverflow.com/users/9937273/don-thousand"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1534369739, "post_id": 51866873, "comment_id": 90685878, "body": "@user3483203 ahaha no problem, I did a double take as well, she worded it pretty poorly."}], "tags": [], "owner": {"reputation": 1202, "user_id": 9937273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xJAip.png?s=128&g=1", "display_name": "Don Thousand", "link": "https://stackoverflow.com/users/9937273/don-thousand"}, "is_accepted": false, "score": 1, "last_activity_date": 1534369578, "last_edit_date": 1534369578, "creation_date": 1534369461, "answer_id": 51866873, "question_id": 51866791, "link": "https://stackoverflow.com/questions/51866791/appending-multiple-elements-to-numpy-array/51866873#51866873", "title": "Appending multiple elements to numpy array", "body": "<pre><code>np.array([first_1,first_2,first_3,first_4,first_5,first_6,first_7,first_8])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9511, "user_id": 7023590, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/82052fbf0815ce82c4eded8fd941be14?s=128&d=identicon&r=PG&f=1", "display_name": "MarianD", "link": "https://stackoverflow.com/users/7023590/mariand"}, "is_accepted": false, "score": 1, "last_activity_date": 1534370539, "last_edit_date": 1534370539, "creation_date": 1534370219, "answer_id": 51867008, "question_id": 51866791, "link": "https://stackoverflow.com/questions/51866791/appending-multiple-elements-to-numpy-array/51867008#51867008", "title": "Appending multiple elements to numpy array", "body": "<p>Correct syntax is (if I suppose that you wanted to append your 8 values to an numpy array named as <code>ar</code>:</p>\n\n<pre><code>np.append(ar, (first_1, first_2, first_3, first_4, first_5, first_6, first_7, first_8))\n</code></pre>\n\n<ul>\n<li>The <em>first</em> argument is your original numpy array, </li>\n<li>The <em>second</em> one is the <em>tuple</em> (or the <em>list</em>, or other array-like object) of your values, so those values <em>have to be in the parentheses</em>.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 485, "user_id": 6786021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5edec462b80ffd30bd4b6e7c456ac053?s=128&d=identicon&r=PG&f=1", "display_name": "VanTan", "link": "https://stackoverflow.com/users/6786021/vantan"}, "is_accepted": false, "score": 0, "last_activity_date": 1534374373, "creation_date": 1534374373, "answer_id": 51867593, "question_id": 51866791, "link": "https://stackoverflow.com/questions/51866791/appending-multiple-elements-to-numpy-array/51867593#51867593", "title": "Appending multiple elements to numpy array", "body": "<pre><code>first = 35.72438966508524 \nsecond = 35.73839550991734 \nthird = 35.81944190992304\nforth = 35.80549149559467 \nfifth = 35.78399019604507 \nsixth = 36.03781192909738 \nseventh = 35.9957696566448 \neighth = 35.94692998938782\n</code></pre>\n\n<p>now to make a new numpy array:</p>\n\n<pre><code>a = np.array([first, second, third, forth, fifth, sixth, seventh, eighth])\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>a\nOut[89]: \narray([35.72438967, 35.73839551, 35.81944191, 35.8054915 , 35.7839902 ,\n       36.03781193, 35.99576966, 35.94692999])\n</code></pre>\n\n<p>to append to existing array (using previously created 'a'):</p>\n\n<pre><code>a = np.append(a, [first, second, third, forth, fifth, sixth, seventh, eight], axis=0)\n</code></pre>\n\n<p>which gives:</p>\n\n<pre><code>a\nOut[93]: \narray([35.72438967, 35.73839551, 35.81944191, 35.8054915 , 35.7839902 ,\n       36.03781193, 35.99576966, 35.94692999, 35.72438967, 35.73839551,\n       35.81944191, 35.8054915 , 35.7839902 , 36.03781193, 35.99576966,\n       35.94692999])\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10220979, "user_type": "registered", "profile_image": "https://graph.facebook.com/280364675886009/picture?type=large", "display_name": "Marry Fox", "link": "https://stackoverflow.com/users/10220979/marry-fox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5744, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1534408464, "creation_date": 1534368960, "last_edit_date": 1534408464, "question_id": 51866791, "link": "https://stackoverflow.com/questions/51866791/appending-multiple-elements-to-numpy-array", "title": "Appending multiple elements to numpy array", "body": "<p>I have <code>8</code> elements and I want to add them into a array in numpy. I used <code>np.append()</code> but it seems that I can only add two elements at one time. I want to add all <code>8</code> elements at once. <code>first_1 =35.72438966508524</code>, <code>first_2 = 35.73839550991734</code>, etc.</p>\n\n<pre><code>35.72438966508524 35.73839550991734 35.81944190992304 \n35.80549149559467 35.78399019604507 36.03781192909738 \n35.9957696566448 35.94692998938782\n\nnp.append(first_1,first_2,first_3,first_4,first_5,first_6,first_7,first_8)\n</code></pre>\n\n<p>The error is</p>\n\n<blockquote>\n<pre><code>TypeError: append() takes from 2 to 3 positional arguments but 8 were given\n</code></pre>\n</blockquote>\n"}, {"tags": ["python", "python-3.x", "web", "web-scraping"], "comments": [{"owner": {"reputation": 1000, "user_id": 9332988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRbxE.jpg?s=128&g=1", "display_name": "Surya Tej", "link": "https://stackoverflow.com/users/9332988/surya-tej"}, "edited": false, "score": 0, "creation_date": 1534369267, "post_id": 51866785, "comment_id": 90685702, "body": "Are you behind a firewall. If u so you might have to provide a proxy"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1534371221, "post_id": 51866785, "comment_id": 90686292, "body": "This has nothing to do with tkinter.  You&#39;ll get the same error without. I recommend creating a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that doesn&#39;t include tkinter. That will make it much easier to debug."}, {"owner": {"reputation": 11, "user_id": 9451638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3a938ced6dc24bd344976d67eb658ab?s=128&d=identicon&r=PG&f=1", "display_name": "Ibrahim shadi", "link": "https://stackoverflow.com/users/9451638/ibrahim-shadi"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1534426099, "post_id": 51866785, "comment_id": 90707743, "body": "i still get the same error and for now i&#39;m using it in python shell                                                              from requests import *                                                                                        ip = get(&#39;<a href=\"https://api.ipify.org&#39;).text\" rel=\"nofollow noreferrer\">api.ipify.org&#39;).text</a>    @BryanOakley"}], "owner": {"reputation": 11, "user_id": 9451638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3a938ced6dc24bd344976d67eb658ab?s=128&d=identicon&r=PG&f=1", "display_name": "Ibrahim shadi", "link": "https://stackoverflow.com/users/9451638/ibrahim-shadi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 182, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1537540276, "creation_date": 1534368936, "last_edit_date": 1537540276, "question_id": 51866785, "link": "https://stackoverflow.com/questions/51866785/requests-library-get-method-error-in-python3-6", "title": "Requests library get method error in python3.6", "body": "<p>When I try to use the requests lib <code>get</code> method I get an error: </p>\n\n<p>(using tkinter)</p>\n\n<p>The error comes from this line:</p>\n\n<pre><code>var.set(get('https://api.ipify.org').text)\n</code></pre>\n\n<p>the error message says :</p>\n\n<blockquote>\n  <p>requests.exceptions.ConnectionError: HTTPSConnectionPool(host='api.ipify.org', port=443): Max retries exceeded with url: / (Caused by NewConnectionError(': Failed to establish a new connection: [Errno 111] Connection refused',))</p>\n</blockquote>\n"}, {"tags": ["python", "matplotlib"], "answers": [{"comments": [{"owner": {"reputation": 245, "user_id": 7864179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oST1u.jpg?s=128&g=1", "display_name": "Andreas Matthias", "link": "https://stackoverflow.com/users/7864179/andreas-matthias"}, "edited": false, "score": 0, "creation_date": 1534449167, "post_id": 51866871, "comment_id": 90720417, "body": "I see. Coordinates have to be specified as <b>number of pixels</b> and not as <b>length in points</b>. Thank you."}], "tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 1, "last_activity_date": 1534369440, "creation_date": 1534369440, "answer_id": 51866871, "question_id": 51866690, "link": "https://stackoverflow.com/questions/51866690/absolute-positioning-of-axes/51866871#51866871", "title": "Absolute positioning of axes", "body": "<p>1 pixel are 0.72 points. <code>fig.transFigure.inverted()</code> transforms from display space, which uses pixels, not points. \nTo be precise you would also need to take the figure dpi into account (which is dpi=100 by default). So using</p>\n\n<pre><code>ppd = 72./fig.dpi  # points per dot\nmybbox = ax.get_position()\nmybbox.x0, mybbox.y0 = fig.transFigure.inverted().transform((100/ppd, 100/ppd))\nmybbox.x1, mybbox.y1 = fig.transFigure.inverted().transform((400/ppd, 400/ppd))\nax.set_position(mybbox)\n</code></pre>\n\n<p>should result in</p>\n\n<pre><code>gsave\n100 100 m\n400 100 l\n400 400 l\n100 400 l\ncl\n</code></pre>\n\n<p>in the post script file.</p>\n"}], "owner": {"reputation": 245, "user_id": 7864179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oST1u.jpg?s=128&g=1", "display_name": "Andreas Matthias", "link": "https://stackoverflow.com/users/7864179/andreas-matthias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 51866871, "answer_count": 1, "score": 1, "last_activity_date": 1534369440, "creation_date": 1534368459, "question_id": 51866690, "link": "https://stackoverflow.com/questions/51866690/absolute-positioning-of-axes", "title": "Absolute positioning of axes", "body": "<p>In matplotlib I tried to position the axes of a figure such that the axes rectangle has its\nlower left corner at (100, 100) and its upper right corner at (400, 400),\nassuming the unit of the given coordinates is point (pt).</p>\n\n<pre><code>import matplotlib.pyplot as plt\nplt.rcParams['ps.papersize'] = 'a4'\n\nfig = plt.figure(figsize=(8.27, 11.69))\nax = fig.add_subplot(1,1,1)\nax.plot([1,3,2])\n\nmybbox = ax.get_position()\nmybbox.x0, mybbox.y0 = fig.transFigure.inverted().transform((100, 100))\nmybbox.x1, mybbox.y1 = fig.transFigure.inverted().transform((400, 400))\nax.set_position(mybbox)\n\nprint(fig.transFigure.transform(ax.get_position()))\n\nplt.savefig('foo.ps')\n</code></pre>\n\n<p>But the created postscript file yields that the axes' corners are actually\nat (72,72) and (288,288):</p>\n\n<pre><code>72 72 m\n288 72 l\n288 288 l\n72 288 l\ncl\n</code></pre>\n\n<p>Thus all coordinates are off target by a constant factor of 0.72.\nDid I do something wrong by applying the <code>transFigure</code> transformation\nto calculate the absolute position of the axes?</p>\n"}, {"tags": ["python", "python-3.x", "function", "dictionary"], "comments": [{"owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "edited": false, "score": 3, "creation_date": 1534368578, "post_id": 51866680, "comment_id": 90685496, "body": "<code>for k, v in numbers.items(): print(k, &#39;:&#39;, v)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": false, "score": 1, "last_activity_date": 1534368553, "creation_date": 1534368553, "answer_id": 51866712, "question_id": 51866680, "link": "https://stackoverflow.com/questions/51866680/function-that-prints-dictionarys-data-line-by-line/51866712#51866712", "title": "Function that prints dictionary&#39;s data line by line", "body": "<p>You are iterating over the value of each key in the dictionary. Instead, use <code>f-strings</code> in Python3.6-Python3.7 or string formatting in Python2-Python3.5:</p>\n\n<pre><code>numbers = {\n\"1\": \"1: 345435-345-345-34\",\n\"2\": \"2: 445345-35-34-345-34\",\n\"3\": \"3: 3445-34534534-34345\"\n\n}\nprint('\\n'.join(f'{a}:{b}' for a, b in numbers.items()))\n</code></pre>\n\n<p>String formatting in Python2:</p>\n\n<pre><code>print('\\n'.join('{}:{}'.format(a, b) for a, b in numbers.items()))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1:1: 345435-345-345-34\n2:2: 445345-35-34-345-34\n3:3: 3445-34534534-34345 \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 815, "user_id": 8749168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9de0369d344b9fcee5cd586545eeb109?s=128&d=identicon&r=PG&f=1", "display_name": "Wade", "link": "https://stackoverflow.com/users/8749168/wade"}, "is_accepted": false, "score": 0, "last_activity_date": 1534368581, "creation_date": 1534368581, "answer_id": 51866720, "question_id": 51866680, "link": "https://stackoverflow.com/questions/51866680/function-that-prints-dictionarys-data-line-by-line/51866720#51866720", "title": "Function that prints dictionary&#39;s data line by line", "body": "<p>You just need to loop through both the key and the value.</p>\n\n<pre><code>for i in numbers:\n    print(\"{}: {}\".format(i, numbers[i]))\n</code></pre>\n\n<p>The <code>.format()</code> argument I used is a useful tool for formatting string, it simply places variables wherever {} is located in your string. See docs <a href=\"https://docs.python.org/3.4/library/functions.html#format\" rel=\"nofollow noreferrer\">here</a>. </p>\n"}], "owner": {"reputation": 51, "user_id": 9079624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc1dd8c6e79793215b64e9390ff6a89d?s=128&d=identicon&r=PG&f=1", "display_name": "irakli", "link": "https://stackoverflow.com/users/9079624/irakli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1534368581, "creation_date": 1534368406, "question_id": 51866680, "link": "https://stackoverflow.com/questions/51866680/function-that-prints-dictionarys-data-line-by-line", "title": "Function that prints dictionary&#39;s data line by line", "body": "<p>I've been wanting to print dictionary's data line by line. I came with this basic program </p>\n\n<pre><code>numbers = {\n    \"1\": \"1: 345435-345-345-34\",\n    \"2\": \"2: 445345-35-34-345-34\",\n    \"3\": \"3: 3445-34534534-34345\"\n\n}\n\ndef print_dict(dictionary):\n    for x in dictionary:\n        c = dictionary[x]\n        for y in c:\n            print(y, \": \", dictionary[y])\n\nprint_dict(numbers)\n</code></pre>\n\n<p>but it gives me all kinds of errors like:</p>\n\n<pre><code>1 :  1: 345435-345-345-34\nTraceback (most recent call last):\n  File \"c:\\Users\\pc\\Documents\\Bot-Programing\\satesto.py\", line 87, in &lt;module&gt;\n    print_dict(numbers)\n  File \"c:\\Users\\pc\\Documents\\Bot-Programing\\satesto.py\", line 85, in print_dict\n    print(y, \": \", dictionary[y])\nKeyError: ':'\n</code></pre>\n\n<p>All I am trying to do is to make a function that can take a dictionary as it's argument and then print it's data line by line like this:</p>\n\n<pre><code>1: 1: 345435-345-345-34\n2: 2: 445345-35-34-345-34\n3: 3: 3445-34534534-34345\n</code></pre>\n\n<p>Any help will be appreciated.</p>\n"}, {"tags": ["python", "matplotlib", "data-visualization"], "answers": [{"tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 2, "last_activity_date": 1534368610, "creation_date": 1534368610, "answer_id": 51866730, "question_id": 51866626, "link": "https://stackoverflow.com/questions/51866626/plotting-side-by-side-charts-using-matplotlib-using/51866730#51866730", "title": "Plotting side by side charts using matplotlib using", "body": "<p>You create the second axes outside the figure. The figure goes from 0 to 1 in both directions. If you start your second axes at position 1, it will go from 1 to 2, which is outside the shown figure.</p>\n\n<p>Either use subplots</p>\n\n<pre><code>fig, (ax1, ax2) = plt.subplots(subplot_kw={\"aspect\" : 1})\n</code></pre>\n\n<p>Or create the axes within the figure boundary,</p>\n\n<pre><code>ax1 = fig.add_axes([0,0,0.45,1], aspect=1)\nax2 = fig.add_axes([0.55,0,0.45,1], aspect=1)\n</code></pre>\n"}], "owner": {"reputation": 431, "user_id": 8611990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GrrZo.png?s=128&g=1", "display_name": "Douglas Ferreira", "link": "https://stackoverflow.com/users/8611990/douglas-ferreira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 412, "favorite_count": 0, "accepted_answer_id": 51866730, "answer_count": 1, "score": 0, "last_activity_date": 1534374935, "creation_date": 1534368153, "last_edit_date": 1534374935, "question_id": 51866626, "link": "https://stackoverflow.com/questions/51866626/plotting-side-by-side-charts-using-matplotlib-using", "title": "Plotting side by side charts using matplotlib using", "body": "<p>I am trying to plot two donut charts side by side using matplotlib in python.</p>\n\n<p>First of all I am creating the donut chart using the following logic:</p>\n\n<ol>\n<li>Create a simple pie chart;</li>\n<li>Pick a position for the chart using the <code>add_axes</code> function;</li>\n<li>Add a <strong>patch</strong> (white circle in it so it can look like a donut chart);</li>\n<li><p>Display the side by side charts on the screen.</p>\n\n<pre><code>fig= plt.figure()\ncircle1 = plt.Circle((0,0), radius= .7 ,color='white')\n\nax1= fig.add_axes([0,0,1,1],aspect=1)\nax1.pie(x= values, labels= KA, startangle=30,radius=1.2)\nax1.add_patch(circle1)\n\ncircle2 = plt.Circle((0,0), radius= .7 ,color='white')\nax2 = fig.add_axes([1,0,1,1],aspect=1)\nax2.pie(x=values2, explode=explode, labels=KA2,startangle=30,radius=1.2)\nax2.add_patch(circle2)\n\nplt.show()\n</code></pre></li>\n</ol>\n\n<p>When it runs the function <code>plt.show()</code> it only displays the first donut chart, with a very strong zoom in it...</p>\n\n<p>What has been driving me crazy is the fact that if I run the following function:\n<code>plt.savefig('testplot.png',bbox_inches='tight')</code>\nit saves a png file just like I want...</p>\n\n<p>How can I do that on the <code>plt.show()</code></p>\n"}, {"tags": ["python", "pymc"], "answers": [{"tags": [], "owner": {"reputation": 255, "user_id": 9655789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97901d8344f5de4b932381af5a12c63a?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/9655789/david"}, "is_accepted": false, "score": 0, "last_activity_date": 1534905269, "last_edit_date": 1534905269, "creation_date": 1534717211, "answer_id": 51922278, "question_id": 51866525, "link": "https://stackoverflow.com/questions/51866525/defining-a-custom-pymc-distribution-with-a-stochastic-matrix-variable/51922278#51922278", "title": "Defining a Custom PyMC Distribution with a Stochastic Matrix Variable", "body": "<p>I think this code works and is very simple:</p>\n\n<pre><code>import numpy as np\n\ndiagonal = np.random.randint(low=-1, high=1, size=2)\nprint(diagonal)\n\nmatrix = np.diag(diagonal)\n\nif matrix[0, 0] == -1:\n    matrix[0, 1] = 1\nif matrix[1, 1] == -1:\n    matrix[1, 0] = 1\n\nprint(matrix)\n</code></pre>\n\n<p>By the way, is that what you are looking for?</p>\n"}], "owner": {"reputation": 1512, "user_id": 1581390, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/075f8e33addc4f7aa47494e8121c8879?s=128&d=identicon&r=PG", "display_name": "user1581390", "link": "https://stackoverflow.com/users/1581390/user1581390"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1536076326, "creation_date": 1534367599, "last_edit_date": 1536076326, "question_id": 51866525, "link": "https://stackoverflow.com/questions/51866525/defining-a-custom-pymc-distribution-with-a-stochastic-matrix-variable", "title": "Defining a Custom PyMC Distribution with a Stochastic Matrix Variable", "body": "<p>I am trying to define the following distribution:</p>\n\n<pre><code>P(t) = exp(R*t)\n</code></pre>\n\n<p>Where R is 2x2 rates matrix that I want to solve for with the data (the sum of each of its rows must be 0). This is the log likelihood function, and some data:</p>\n\n<pre><code>import numpy as np\n# The data is in the format: (row index, column index, t)\ndata = {(0,1,10), (1,0,20), (0,0,49), (1,1,12)}\n\ndef logp(values, ratesMatrix):\n    r = []\n    t = []\n    for i in range(len(data)):\n        r.append(ratesMatrix[values[i][0], values[i][1]])\n        t.append(values[i][2])\n    r = np.array(r, dtype=np.float64)\n    t = np.array(t, dtype=np.float64)\n\n    # log( prod( exp(r*t) ) )\n    # == sum( log( exp(r*t) ) )\n    # == sum( r*t )\n    return np.sum(r*t)\n</code></pre>\n\n<p>How do I define the ratesMatrix variable as a stochastic 2x2 matrix where, each entry in the diagonal is between -1 and 0 (equally likely), and outside the diagonal between 0 and 1 (equally likely), such that the sum of each row is 0?</p>\n"}, {"tags": ["python", "tensorflow", "tensorflow-datasets"], "owner": {"reputation": 21, "user_id": 2860934, "user_type": "registered", "profile_image": "https://graph.facebook.com/649588025/picture?type=large", "display_name": "Chau H. Tran", "link": "https://stackoverflow.com/users/2860934/chau-h-tran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 436, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1559746124, "creation_date": 1534367404, "last_edit_date": 1559746124, "question_id": 51866489, "link": "https://stackoverflow.com/questions/51866489/creating-tensorflow-dataset-with-sparse-matrix", "title": "Creating tensorflow dataset with sparse matrix", "body": "<p>My dataset is a sparse matrix, and I'm trying to feed it using <code>tf.dataset</code>. My code below works for small matrixes, but for large matrixes (large number of columns), it fails with <code>ValueError: GraphDef cannot be larger than 2GB.</code> I understand that this is because <code>tf.SparseTensor</code> creates a lot of <code>tf.constant</code> operations. What is the right way to feed a sparse matrix into a <code>tf.dataset</code> without converting it to a <code>SparseTensor</code>?</p>\n\n<pre><code>data_tensor = tf.SparseTensor(\n    indices=[[0,0], [0,4], [1,1], [1, 50]],\n    values=np.ones(4, dtype=np.float32),\n    dense_shape=(2, 100)\n)\ndataset = tf.data.Dataset.from_tensor_slices(data_tensor)\ndataset = dataset.repeat()\niterator = dataset.make_one_shot_iterator()\ninput_ph = tf.sparse_tensor_to_dense(iterator.get_next())\nsum_op = tf.reduce_sum(input_ph)\nsess.run(sum_op)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "arguments", "celery", "celery-canvas"], "answers": [{"comments": [{"owner": {"reputation": 1172, "user_id": 6106484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/584ee637fa0e35fdc7688569a62ef30d?s=128&d=identicon&r=PG&f=1", "display_name": "Aida", "link": "https://stackoverflow.com/users/6106484/aida"}, "edited": false, "score": 0, "creation_date": 1534367086, "post_id": 51866392, "comment_id": 90684975, "body": "I know that. My problem is that I do have to do it that way. I want to know if there is a way to return the result of b() in way to contain the variable name."}, {"owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "reply_to_user": {"reputation": 1172, "user_id": 6106484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/584ee637fa0e35fdc7688569a62ef30d?s=128&d=identicon&r=PG&f=1", "display_name": "Aida", "link": "https://stackoverflow.com/users/6106484/aida"}, "edited": false, "score": 0, "creation_date": 1534367163, "post_id": 51866392, "comment_id": 90685009, "body": "@AiDa I&#39;m not sure I understand the question"}], "tags": [], "owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "is_accepted": false, "score": 1, "last_activity_date": 1534367499, "last_edit_date": 1534367499, "creation_date": 1534366946, "answer_id": 51866392, "question_id": 51866356, "link": "https://stackoverflow.com/questions/51866356/python-celery-task-canvas-syntaxerror-positional-argument-follows-keyword-argu/51866392#51866392", "title": "Python celery task canvas: SyntaxError: positional argument follows keyword argument", "body": "<p>Change your function call to:</p>\n\n<pre><code>test_func('a', b())\n</code></pre>\n\n<p>Positional args always come first in function definitions and calls</p>\n\n<p>In general, the order goes like so:</p>\n\n<pre><code>def myfunction(pos1, pos2, *args, **kwargs):\n    # do things\n</code></pre>\n\n<p>where <code>pos1</code> and <code>pos2</code> are positional args. They have no default value. </p>\n\n<p><code>*args</code> is a list of non-keyword arguments, passed in like</p>\n\n<pre><code>myfunction(pos1, pos2, [1, '2', 333])\n</code></pre>\n\n<p><code>**kwargs</code> is a dictionary of keyword arguments and they always go last:</p>\n\n<pre><code>myfunction(pos1, pos2, [1, '2', 333], {'key':'val'})\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>If you just get rid of the <code>data1=</code> in your function call, you should be fine</p>\n\n<pre><code>&gt;&gt;&gt; test_func('a', b())\na    ({'data2': 'b'},)\n</code></pre>\n\n<p>If you need it to be unpacked, then:</p>\n\n<pre><code>def test_func(data_1, **kwargs):\n    print(data_1, '\\t', '\\t'.join([kwargs[k] for k in kwargs.keys()]))\n</code></pre>\n\n<p>And you can unpack the results from <code>b()</code></p>\n\n<pre><code>&gt;&gt;&gt; test_func('a', **b())\na    b\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1172, "user_id": 6106484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/584ee637fa0e35fdc7688569a62ef30d?s=128&d=identicon&r=PG&f=1", "display_name": "Aida", "link": "https://stackoverflow.com/users/6106484/aida"}, "edited": false, "score": 0, "creation_date": 1534367521, "post_id": 51866477, "comment_id": 90685139, "body": "I am aware of that, but the problem is celery-chain doesn&#39;t do **b() it just does b()!"}, {"owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "edited": false, "score": 0, "creation_date": 1534511471, "post_id": 51866477, "comment_id": 90743029, "body": "You may need <code>*b()</code> in this case because <code>b()</code> doesn&#39;t return keyword arguments"}, {"owner": {"reputation": 21716, "user_id": 2401769, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/wkEbw.jpg?s=128&g=1", "display_name": "Matias Cicero", "link": "https://stackoverflow.com/users/2401769/matias-cicero"}, "reply_to_user": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "edited": false, "score": 0, "creation_date": 1534512860, "post_id": 51866477, "comment_id": 90743911, "body": "@C.Nivs This answer was based on the original question which had <code>b()</code> return a <code>dict</code>"}, {"owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "edited": false, "score": 0, "creation_date": 1534514145, "post_id": 51866477, "comment_id": 90744733, "body": "@MatiasCicero Yep, didn&#39;t tag the asker, I think he was referencing his original post, your answer is correct"}], "tags": [], "owner": {"reputation": 21716, "user_id": 2401769, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/wkEbw.jpg?s=128&g=1", "display_name": "Matias Cicero", "link": "https://stackoverflow.com/users/2401769/matias-cicero"}, "is_accepted": false, "score": 2, "last_activity_date": 1534367366, "creation_date": 1534367366, "answer_id": 51866477, "question_id": 51866356, "link": "https://stackoverflow.com/questions/51866356/python-celery-task-canvas-syntaxerror-positional-argument-follows-keyword-argu/51866477#51866477", "title": "Python celery task canvas: SyntaxError: positional argument follows keyword argument", "body": "<p>Change your <code>test_func</code> to:</p>\n\n<pre><code>def test_func(**kwargs):\n    # kwargs is a dict containing the keyword arguments\n    print(*kwargs)\n</code></pre>\n\n<p>Then, you can just do:</p>\n\n<pre><code>test_func(data1='a', **b())\n# Same as doing test_func(data1='a', data2='b')\n</code></pre>\n"}], "owner": {"reputation": 1172, "user_id": 6106484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/584ee637fa0e35fdc7688569a62ef30d?s=128&d=identicon&r=PG&f=1", "display_name": "Aida", "link": "https://stackoverflow.com/users/6106484/aida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1534509250, "creation_date": 1534366795, "last_edit_date": 1534509250, "question_id": 51866356, "link": "https://stackoverflow.com/questions/51866356/python-celery-task-canvas-syntaxerror-positional-argument-follows-keyword-argu", "title": "Python celery task canvas: SyntaxError: positional argument follows keyword argument", "body": "<p>I have a chain of tasks that a celery worker runs. When a task is finished the chain carries forward the result of that task to the next task as a (positional) argument. Each task has it's own arguments + *args to handle the carried forward arguments. The problem is that I want to use keyword argument for the arguments of the task but those carried forward arguments are just positional arguments. The following code is just a simple example to show my problem without use of celery chains:</p>\n\n<pre><code>def test_func(data1,*args):\n    print(data1, '\\t', args)\n\ndef b():\n    return {'data2':'b'}\n\n\ntest_func(data1='a', b())\n</code></pre>\n\n<p><strong>I know that this generates \"SyntaxError: positional argument follows keyword argument\" because the first argument is using the argument name whereas the second one doesn't.</strong></p>\n\n<p>If I know how to properly return the result of function b() then my problem will be solved. That is, to return the result of b() in a way that b() is considered as a keyword argument when calling </p>\n\n<pre><code>test_func(data1='a', b())\n</code></pre>\n\n<p><strong>UPDATE:</strong> It turned out celery chains carry over the results of each task to the first argument of the next task in the chain, not the last argument. This was my bad as I was new to celery chains. Therefore, I just switched the place of positional and keyword arguments in the function's header and my problem was solved as bellow:</p>\n\n<pre><code>def test_func(data1, data2):\n    print(data1, '\\t', data2)\n\ndef b():\n    return 'b'\n\n\ntest_func(b(),data2='a')\n</code></pre>\n\n<p>As Python allows to have a keyword argument after a positional argument, everything turned out to be smoothly running. </p>\n\n<p>Thanks to @MatiasCicero and @C.Nivs for their answers.</p>\n"}, {"tags": ["python", "python-3.x", "properties", "setter"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1534367294, "post_id": 51866342, "comment_id": 90685051, "body": "Would you expect <code>y</code> to change if you did <code>x = y; x = 3</code>?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1534367630, "post_id": 51866342, "comment_id": 90685186, "body": "Are you coming to Python from C++? If so, explaining why things are different is a bit more involved (unless you can just forget what you learned from C++ and think of this like a new programmer)."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1534367701, "post_id": 51866342, "comment_id": 90685215, "body": "Anyway,. <code>v = &lt;something&gt;</code> just says &quot;make <code>v</code> a name for the value you get by evaluating <code>&lt;something&gt;</code>. This is done by asking the appropriate (local or global) namespace to store <code>&lt;something&gt;</code> under the name <code>v</code>. But <code>v.verdict = &lt;something&gt;</code> means &quot;make <code>v.verdict</code> a name for the value you get by evaluating <code>&lt;something&gt;</code>&quot;, which can only be done by asking <code>v</code> to do it, which is done by calling <code>v.__setattr__(&#39;verdict&#39;, &lt;the value&gt;)</code>."}, {"owner": {"reputation": 129, "user_id": 869598, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/98fe4eb7ec703a7870fa5239a38a40fa?s=128&d=identicon&r=PG", "display_name": "JonFitt", "link": "https://stackoverflow.com/users/869598/jonfitt"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1534436822, "post_id": 51866342, "comment_id": 90714556, "body": "@user2357112. IDK If x is a pointer and y is an address, then yes. Stuffs weird for a C++ programmer. I can assign a Python variable to a function, so is x then a variable or a function pointer? I was expecting that if I assigned x to a parameter then it would be a pointer to the parameter, and not the underlying attribute. But it seems not. I don&#39;t think I understand what a parameter actually is, I think I need to read about decorators."}, {"owner": {"reputation": 129, "user_id": 869598, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/98fe4eb7ec703a7870fa5239a38a40fa?s=128&d=identicon&r=PG", "display_name": "JonFitt", "link": "https://stackoverflow.com/users/869598/jonfitt"}, "edited": false, "score": 0, "creation_date": 1534437446, "post_id": 51866342, "comment_id": 90714899, "body": "@abarnet My logic was:     <code>Verdict().verdict = True</code>    &lt;-calls the setter for verdict. So     <code>v = Verdict().verdict</code>     <code>v = True</code>      &lt;- v evaluates to Verdict().verdict and calls the setter for verdict. But instead it seems    <code>v = True</code>      &lt;- v evaluates to Verdict().verdict and sets the attribute verdict"}], "answers": [{"tags": [], "owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "is_accepted": true, "score": 1, "last_activity_date": 1534367916, "creation_date": 1534367916, "answer_id": 51866577, "question_id": 51866342, "link": "https://stackoverflow.com/questions/51866342/setter-ignored-when-property-is-assigned-to-variable-python-3-4/51866577#51866577", "title": "Setter ignored when property is assigned to variable (Python 3.4)", "body": "<p>You can't avoid using the <code>v.verdict = ...</code> syntax.</p>\n\n<p>This is because properties require attribute access in order to work. Properties are <a href=\"https://docs.python.org/3/howto/descriptor.html\" rel=\"nofollow noreferrer\">descriptors</a>, and the descriptor protocol only takes effect on attribute access.</p>\n\n<p>If you store a property (or, more generally, a descriptor) in a variable, you've effectively robbed it of its functionality. Accessing a variable is just a name lookup, and assigning to a variable is just binding a value to a name. It's not possible to make an assignment like <code>v = ...</code> trigger your setter.</p>\n"}], "owner": {"reputation": 129, "user_id": 869598, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/98fe4eb7ec703a7870fa5239a38a40fa?s=128&d=identicon&r=PG", "display_name": "JonFitt", "link": "https://stackoverflow.com/users/869598/jonfitt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 51866577, "answer_count": 1, "score": 2, "last_activity_date": 1534367916, "creation_date": 1534366721, "question_id": 51866342, "link": "https://stackoverflow.com/questions/51866342/setter-ignored-when-property-is-assigned-to-variable-python-3-4", "title": "Setter ignored when property is assigned to variable (Python 3.4)", "body": "<p>I'm creating a Verdict class which will evaluate to true until it is set false after which it always evaluates false even if you set it to true. The only way I could think of to do that would be to have a property and a setter.</p>\n\n<p>It works, but for simplicity rather than having:</p>\n\n<pre><code>v = Verdict()\nv.verdict = ...\nv.verdict = ...\nv.verdict = ...\n</code></pre>\n\n<p>I thought I could do:</p>\n\n<pre><code>v = Verdict().verdict\nv = ...\nv = ...\nv = ...\n</code></pre>\n\n<p>But it seems that v in the second case is the attribute directly, and is ignoring the setter.</p>\n\n<pre><code>class Verdict():\n    def __init__(self):\n        self.__verdict = True\n\n    @property\n    def verdict(self):\n        return self.__verdict\n\n    @verdict.setter\n    def verdict(self, value):\n        if self.__verdict is True:\n            self.__verdict = value\n\n    def __bool__(self):\n        return self.__verdict\n\nclass A():\n    v = Verdict().verdict\n    y = Verdict()\n\n    def foo(cls):\n        cls.y = False\n        cls.y = True # Uses setter and stays false\n        cls.v = False\n        cls.v = True # should use setter and stay false but doesn't \n</code></pre>\n\n<p>Is there a way to fix this, or a better method to achieve the Verdict?</p>\n"}, {"tags": ["python", "r", "regex", "pandas"], "comments": [{"owner": {"reputation": 10920, "user_id": 3390419, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/cXKh9.jpg?s=128&g=1", "display_name": "Paolo", "link": "https://stackoverflow.com/users/3390419/paolo"}, "edited": false, "score": 0, "creation_date": 1534366827, "post_id": 51866330, "comment_id": 90684868, "body": "Can you show the contents of <code>fake_df.csv</code> , or perhaps a small sample with desired output?"}, {"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1534367102, "post_id": 51866330, "comment_id": 90684979, "body": "<code>df.sum(axis=1) ?</code>"}, {"owner": {"reputation": 3030, "user_id": 1883795, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/089e90c27abb82424f05c13f9d49de76?s=128&d=identicon&r=PG", "display_name": "generic_user", "link": "https://stackoverflow.com/users/1883795/generic-user"}, "edited": false, "score": 0, "creation_date": 1534367161, "post_id": 51866330, "comment_id": 90685008, "body": "Yeah but I want only days 30 through 185.  And I want to do this via regex because the real dataset has columns besides <code>precip</code> -- I want to filter those out"}, {"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 1, "creation_date": 1534367227, "post_id": 51866330, "comment_id": 90685036, "body": "<code>cols = [&#39;precip_pday_&#39;+str(i) for i in range(30,186)]</code> then <code>df[cols].sum(1)</code>"}, {"owner": {"reputation": 3030, "user_id": 1883795, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/089e90c27abb82424f05c13f9d49de76?s=128&d=identicon&r=PG", "display_name": "generic_user", "link": "https://stackoverflow.com/users/1883795/generic-user"}, "edited": false, "score": 0, "creation_date": 1534367340, "post_id": 51866330, "comment_id": 90685064, "body": "Thanks!  Putting for loops in the middle of an expression like that is something that doesn&#39;t work in R, but I can see how it makes sense."}, {"owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 1, "creation_date": 1534367450, "post_id": 51866330, "comment_id": 90685117, "body": "<code>df.loc[:, &#39;precip_pday_30&#39;:&#39;precip_pday_185&#39;].sum(axis=1)</code> would also work."}, {"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "reply_to_user": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 1, "creation_date": 1534367483, "post_id": 51866330, "comment_id": 90685124, "body": "That&#39;s called <code>list comprehension</code> in Python, and I would advise against comparing them too much.. they are <i>pretty</i> different languages. Also, I&#39;ve noticed you talking about <a href=\"https://en.wikipedia.org/wiki/Regular_expression\" rel=\"nofollow noreferrer\">regular expressions</a> but I didn&#39;t see you using it actually ;) Maybe you weren&#39;t refering to the actual concept but to the fact that there is a prefix in every column? @user2285236 that would work if you assume columns are sorted and there are no column in between 30 and 185"}, {"owner": {"reputation": 3030, "user_id": 1883795, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/089e90c27abb82424f05c13f9d49de76?s=128&d=identicon&r=PG", "display_name": "generic_user", "link": "https://stackoverflow.com/users/1883795/generic-user"}, "edited": false, "score": 0, "creation_date": 1534367576, "post_id": 51866330, "comment_id": 90685166, "body": "No I don&#39;t exactly need regex in this specific example, but in similar applications I want to match all columns that match a regex and also have a certain range of suffixes.  This simple MWE was all precip."}, {"owner": {"reputation": 3030, "user_id": 1883795, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/089e90c27abb82424f05c13f9d49de76?s=128&d=identicon&r=PG", "display_name": "generic_user", "link": "https://stackoverflow.com/users/1883795/generic-user"}, "edited": false, "score": 1, "creation_date": 1534367643, "post_id": 51866330, "comment_id": 90685198, "body": "And I did use regex in the python example that I mocked up"}, {"owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 1, "creation_date": 1534367663, "post_id": 51866330, "comment_id": 90685202, "body": "@generic_user You might want to look at the <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.filter.html\" rel=\"nofollow noreferrer\">filter method</a> which accepts regexes to select columns."}], "owner": {"reputation": 3030, "user_id": 1883795, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/089e90c27abb82424f05c13f9d49de76?s=128&d=identicon&r=PG", "display_name": "generic_user", "link": "https://stackoverflow.com/users/1883795/generic-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1534368503, "creation_date": 1534366684, "last_edit_date": 1534368503, "question_id": 51866330, "link": "https://stackoverflow.com/questions/51866330/one-liner-for-creating-a-variable-based-on-the-sum-of-other-variables-defined-in", "title": "One-liner for creating a variable based on the sum of other variables defined in a regular expression?", "body": "<p>I'm pretty good with R and just starting out trying to teach myself python.  I'm trying to replicate the following lines of code:</p>\n\n<pre><code>regex &lt;- paste0(\"precip_pday_\", 30:185, collapse = \"|\")\ndat$TAP &lt;- rowSums(dat[,grepl(regex, colnames(dat))])/1000\n</code></pre>\n\n<p>Basically just create a regular expression, and then take the row-wise sum of the variables with that match the regex.  I suppose I could have as just as easily not collapsed the string and used <code>%in%</code>.</p>\n\n<p>I tried to replicate this in python, and the best I can do is a nested mess of for loops and if statements that takes 15 lines:</p>\n\n<pre><code>import re\nimport pandas as pd\nregex = re.compile(\"precip\")\nidx = []\nfor i in range(0, len(list(df))-1, 1):\n    name = list(df)[i]\n    found = regex.findall(name)\n    if len(found) &gt; 0:\n        day = name.split(\"_\")[2]\n        if int(day) in range(30, 185, 1):\n            idx.append(i)\n\ncols_I_want = df.iloc[:,idx]\ndf[\"TAP\"] = cols_I_want.sum(axis = 1)/1000\n</code></pre>\n\n<p>How could this be simplified?  Made more efficient?</p>\n\n<p>Here's a fake dataset, to complete the MWE:</p>\n\n<pre><code>fake_df &lt;- as.data.frame(matrix(rnorm(1000*365), nrow = 1000, ncol = 365))\ncolnames(fake_df) &lt;- paste0(\"precip_pday_\", 1:365)\nwrite.csv(\"fake_df.csv\")\ndf &lt;- read.csv(\"fake_df.csv\")\n</code></pre>\n\n<p>and of course</p>\n\n<pre><code>df = pd.read_csv(\"fake_df.csv\")\n</code></pre>\n\n<p>Here's what part of <code>df</code> looks like:</p>\n\n<pre><code>ddd.iloc[[1,2,3],[1,2, 365]\n]\nOut[58]: \n   precip_pday_1  precip_pday_2  precip_pday_365\n1       -1.189000       -0.825324          0.300221\n2       -1.045318       -1.092792          1.098239\n3        1.429858        0.919119         -0.643524\n</code></pre>\n\n<p>It has columns for each day of the year (and lots of others in my real dataset, but I can filter them out with the regex).  </p>\n\n<p>The desired output is the sum of the values of days 30 through 185</p>\n"}, {"tags": ["python", "matplotlib", "seaborn"], "answers": [{"comments": [{"owner": {"reputation": 10425, "user_id": 2142055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Stop harming Monica", "link": "https://stackoverflow.com/users/2142055/stop-harming-monica"}, "edited": false, "score": 0, "creation_date": 1534545099, "post_id": 51902012, "comment_id": 90758145, "body": "For the mean just something like <code>ax[0].plot(data[:4].mean(axis=0), range(5), &#39;ko&#39;)</code> is simpler. For the median I don&#39;t think you can do any better. A proper solution would require changes to the signature."}], "tags": [], "owner": {"reputation": 4248, "user_id": 2075003, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/cf9c95fa3ebf012003a0efd4b4fbc51a?s=128&d=identicon&r=PG", "display_name": "n1000", "link": "https://stackoverflow.com/users/2075003/n1000"}, "is_accepted": false, "score": 0, "last_activity_date": 1534535283, "creation_date": 1534535283, "answer_id": 51902012, "question_id": 51866324, "link": "https://stackoverflow.com/questions/51866324/how-to-edit-the-median-line-and-add-an-average-to-seaborn-boxenplot-using-subp/51902012#51902012", "title": "How to edit the median line and add an average to seaborn.boxenplot() using subplots?", "body": "<p>So I partly solved the problem. <strong>Nevertheless, this is rather a workaround than an answer and I would still prefer to have a better one.</strong> For instance that allows me to have dashes instead of a point for the means.</p>\n\n<p>In order to fix the median, I use the following:</p>\n\n<pre><code>for l in ax[0].lines:\n    l.set_linestyle('--')\n    l.set_color('r')\n    l.set_alpha(0.8)   \n</code></pre>\n\n<p>For adding the means, I (ab-)use <a href=\"https://seaborn.pydata.org/generated/seaborn.swarmplot.html#seaborn.swarmplot\" rel=\"nofollow noreferrer\"><code>sns.swarmplot()</code></a> along with the <code>ax</code> keyword:</p>\n\n<pre><code>sns.swarmplot(x=[m.mean() for m in data[:][:4]], y=np.arange(len(data[:][:4])), \n              color='0.3', edgecolor='0.3', linewidth=3,\n              ax=ax[0], orient='h')\n</code></pre>\n\n<p>So the total code looks like this:</p>\n\n<pre><code>data = np.random.randn(100, 5)\nfig, ax = plt.subplots(figsize=(12,8), ncols=1, nrows=2, \n                       gridspec_kw={'height_ratios':[len(mat_cat), 1]})\nsns.set_style('whitegrid')\nsns.boxenplot(data=data[:][:4], ax=ax[0],\n             orient='h')\nsns.swarmplot(x=[m.mean() for m in data[:][:4]], y=np.arange(len(data[:][:4])), color='0.3', edgecolor='0.3', linewidth=3,\n              ax=ax[0], orient='h')\nfor l in ax[0].lines:\n    l.set_linestyle('--')\n    l.set_color('r')\n    l.set_alpha(0.8)    \nsns.boxenplot(data=data[:][5], ax=ax[1], orient='h')\nfor l in ax[1].lines:\n    l.set_linestyle('--')\n    l.set_color('r')\n    l.set_alpha(0.8)    \nsns.swarmplot(x=data[:][5].mean(), y=np.arange(1), \n              color='0.3', edgecolor='0.3', linewidth=3,\n              ax=ax[1], orient='h')\nax[0].set_xlim(-3, 3)\nax[1].set_xlim(-2, 2)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/i9gxU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/i9gxU.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 4248, "user_id": 2075003, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/cf9c95fa3ebf012003a0efd4b4fbc51a?s=128&d=identicon&r=PG", "display_name": "n1000", "link": "https://stackoverflow.com/users/2075003/n1000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 621, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1534535283, "creation_date": 1534366645, "last_edit_date": 1534531184, "question_id": 51866324, "link": "https://stackoverflow.com/questions/51866324/how-to-edit-the-median-line-and-add-an-average-to-seaborn-boxenplot-using-subp", "title": "How to edit the median line and add an average to seaborn.boxenplot() using subplots?", "body": "<p>I am using the <a href=\"https://seaborn.pydata.org/generated/seaborn.boxenplot.html\" rel=\"nofollow noreferrer\">seaborn boxenplot</a> / <a href=\"https://vita.had.co.nz/papers/letter-value-plot.html\" rel=\"nofollow noreferrer\">letter-value plot</a> inside two subplots like this</p>\n\n<pre><code>data = np.random.randn(100, 5)\nfig, ax = plt.subplots(figsize=(12,8), ncols=1, nrows=2,\n                       gridspec_kw={'height_ratios':[len(mat_cat), 1]})\nsns.set_style('whitegrid')\nsns.boxenplot(data=data[:][:4], ax=ax[0], orient='h')\nsns.boxenplot(data=data[:][5], ax=ax[1], orient='h')\nax[0].set_xlim(-3, 3)\nax[1].set_xlim(-2, 2)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/lzsVw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lzsVw.png\" alt=\"enter image description here\"></a></p>\n\n<p>Now I would like to <strike>edit the appearance of the median dash (e.g. a red line instead of black) and also</strike> add the mean (e.g. as a dashed blue line) inside the plots. </p>\n\n<p>However I cannot figure out how to do that. For instance, when I do something like <code>ax[0].plot()</code> the boxes get plotted on top of each other. Any ideas?</p>\n\n<hr>\n\n<h1>Update</h1>\n\n<p>I figured out how to edit the existing median. If I add the following code the median dash of the upper sub-plot will become dashed, red, and 20% transparent.</p>\n\n<pre><code>for l in ax[0].lines:\n    l.set_linestyle('--')\n    l.set_color('r')\n    l.set_alpha(0.8)    \n</code></pre>\n"}, {"tags": ["python", "pandas", "csv", "dataframe"], "comments": [{"owner": {"reputation": 254, "user_id": 3495574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1e11ac90105f4cf3cf8e6d49645f458?s=128&d=identicon&r=PG&f=1", "display_name": "Khashir", "link": "https://stackoverflow.com/users/3495574/khashir"}, "edited": false, "score": 1, "creation_date": 1534366621, "post_id": 51866285, "comment_id": 90684796, "body": "Are all e-mails separated by <code>.</code>? Or do you have <code>peter_gabriel@...</code>, <code>peter-gabriel</code>, <code>petergabriel@...</code>?"}, {"owner": {"reputation": 4583, "user_id": 2561714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/752d92663322e652223379492f83bbaa?s=128&d=identicon&r=PG", "display_name": "NickD", "link": "https://stackoverflow.com/users/2561714/nickd"}, "edited": false, "score": 1, "creation_date": 1534366688, "post_id": 51866285, "comment_id": 90684824, "body": "Why should an email address include first and last names? Most don&#39;t. But in any case, if you can get the f_name and the l_name, all you have to do is convert them to lower case, concatenate them with a period in between and then see if that is a substring of the email field. Then do it for every row."}, {"owner": {"reputation": 3, "user_id": 9927312, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jwVcGSnVpLM/AAAAAAAAAAI/AAAAAAAAAAA/MateLjrH22U/photo.jpg?sz=128", "display_name": "Samuel ", "link": "https://stackoverflow.com/users/9927312/samuel"}, "edited": false, "score": 0, "creation_date": 1534367307, "post_id": 51866285, "comment_id": 90685054, "body": "Hi! The csv is comma separated and there is a dot between name.lastname. I needed to work on this file to upload accounts to a service. For some reason some rows had the wrong email. Ex. rows 6 and 7 had switched emails. So I was thinking this could be faster that checking the almost 1000 rows visually. Thanks for loking at it. /Samuel"}], "answers": [{"comments": [{"owner": {"reputation": 1202, "user_id": 9937273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xJAip.png?s=128&g=1", "display_name": "Don Thousand", "link": "https://stackoverflow.com/users/9937273/don-thousand"}, "edited": false, "score": 0, "creation_date": 1534367706, "post_id": 51866468, "comment_id": 90685218, "body": "This doesn&#39;t work. For example, imagine my name was William Iam, and my email was william@bnl.gov. Your program will ok this. On the other hand, if my name was John Smith, and my email was John.Smith@gmail.com, your program will reject this."}], "tags": [], "owner": {"reputation": 344, "user_id": 6740411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11fd2cb36a6c7d27e7a4b503dd58923d?s=128&d=identicon&r=PG&f=1", "display_name": "Dawid_Sielski", "link": "https://stackoverflow.com/users/6740411/dawid-sielski"}, "is_accepted": false, "score": 0, "last_activity_date": 1534368218, "last_edit_date": 1534368218, "creation_date": 1534367308, "answer_id": 51866468, "question_id": 51866285, "link": "https://stackoverflow.com/questions/51866285/python-and-pandas-check-if-values-in-columns-name-and-last-name-are-in-ema/51866468#51866468", "title": "Python and pandas. Check if values in columns &quot;name&quot; and &quot;last_name&quot; are in &quot;email&quot; column", "body": "<p>I have come up with some idea. Please try it :)</p>\n\n<p>First I have a function which is checking your condition:</p>\n\n<pre><code>def check(row):\n    return f\"{row['f_name'].lower()}.{row['l_name'].lower()}\" in row['email']\n</code></pre>\n\n<p>From this point you just have to apply this using:</p>\n\n<pre><code>df['is_correct'] = df.apply(check, axis=1)\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<p>When there is something wrong you will get something like this:</p>\n\n<pre><code>email   f_name  l_name  is_correct\n0   dawid.sielski@sth.com   Dawidd  Sielski False # double 'd' at the end of the name\n</code></pre>\n\n<p>and when everything is ok it will look something like this:</p>\n\n<pre><code>    email   f_name  l_name  is_correct\n0   dawid.sielski@sth.com   Dawid   Sielski True\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 9927312, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jwVcGSnVpLM/AAAAAAAAAAI/AAAAAAAAAAA/MateLjrH22U/photo.jpg?sz=128", "display_name": "Samuel ", "link": "https://stackoverflow.com/users/9927312/samuel"}, "edited": false, "score": 0, "creation_date": 1534369261, "post_id": 51866523, "comment_id": 90685698, "body": "Hi! This does the trick. Thanks! I just discovered a little thing... Here in Sweden we have names like Bj&#246;rn Borg . The &#246; character is a normal &#39;o&#39; in the email which results in a &#39;False&#39;. Any way to fix this? Thank you for your time!"}, {"owner": {"reputation": 1202, "user_id": 9937273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xJAip.png?s=128&g=1", "display_name": "Don Thousand", "link": "https://stackoverflow.com/users/9937273/don-thousand"}, "reply_to_user": {"reputation": 3, "user_id": 9927312, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jwVcGSnVpLM/AAAAAAAAAAI/AAAAAAAAAAA/MateLjrH22U/photo.jpg?sz=128", "display_name": "Samuel ", "link": "https://stackoverflow.com/users/9927312/samuel"}, "edited": false, "score": 0, "creation_date": 1534369389, "post_id": 51866523, "comment_id": 90685751, "body": "There&#39;s no easy way to do that. You have to find the appropriate ASCII codes and convert them. On that note tho, if this was helpful, make sure to hit that checkmark! Next to the arrows"}], "tags": [], "owner": {"reputation": 1202, "user_id": 9937273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xJAip.png?s=128&g=1", "display_name": "Don Thousand", "link": "https://stackoverflow.com/users/9937273/don-thousand"}, "is_accepted": true, "score": 0, "last_activity_date": 1534367592, "creation_date": 1534367592, "answer_id": 51866523, "question_id": 51866285, "link": "https://stackoverflow.com/questions/51866285/python-and-pandas-check-if-values-in-columns-name-and-last-name-are-in-ema/51866523#51866523", "title": "Python and pandas. Check if values in columns &quot;name&quot; and &quot;last_name&quot; are in &quot;email&quot; column", "body": "<pre><code>df['new'] = df2['f_name'].str.lower()+'.'+df2['l_name'].str.lower()\nprint(df.apply(lambda x: x['new'] in x['email'], axis=1))\n</code></pre>\n\n<p>This will give you a series of Trues and Falses that will tell you whether the email address is appropriate or no.</p>\n"}], "owner": {"reputation": 3, "user_id": 9927312, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jwVcGSnVpLM/AAAAAAAAAAI/AAAAAAAAAAA/MateLjrH22U/photo.jpg?sz=128", "display_name": "Samuel ", "link": "https://stackoverflow.com/users/9927312/samuel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "accepted_answer_id": 51866523, "answer_count": 2, "score": -1, "last_activity_date": 1534374529, "creation_date": 1534366444, "last_edit_date": 1534374529, "question_id": 51866285, "link": "https://stackoverflow.com/questions/51866285/python-and-pandas-check-if-values-in-columns-name-and-last-name-are-in-ema", "title": "Python and pandas. Check if values in columns &quot;name&quot; and &quot;last_name&quot; are in &quot;email&quot; column", "body": "<p>In the following pandas df, How can I check if the name and last names are included in the email column?</p>\n\n<p>Ex df:</p>\n\n<pre><code>header:   f_name    l_name    email\nvalues    Peter     Gabriel   peter.gabriel@email.com\n</code></pre>\n\n<p>How can I check if the email <code>peter.gabriel</code> corresponds with the <code>f_name</code> and <code>l_name</code> values?</p>\n\n<p>How can I print the rows that are wrong?</p>\n\n<p>I'm reading the information from a <code>.csv</code> file into a dataframe as </p>\n\n<pre><code>contacts = pd.read_csv('contacts.csv')\ncontacts_df = pd.DataFrame(contacts)\n</code></pre>\n"}, {"tags": ["python", "opencv", "matplotlib", "annotations", "computer-vision"], "comments": [{"owner": {"reputation": 378, "user_id": 2573585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8010bfb98256c138049aa3d237737b37?s=128&d=identicon&r=PG", "display_name": "Bhavul", "link": "https://stackoverflow.com/users/2573585/bhavul"}, "edited": false, "score": 0, "creation_date": 1534367197, "post_id": 51866280, "comment_id": 90685019, "body": "I&#39;m sorry I didn&#39;t understand the reason for down-voting the question. It would be good if you guys let me know the reason for the same. I would be happy if someone could even just point me in the right direction."}], "answers": [{"comments": [{"owner": {"reputation": 378, "user_id": 2573585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8010bfb98256c138049aa3d237737b37?s=128&d=identicon&r=PG", "display_name": "Bhavul", "link": "https://stackoverflow.com/users/2573585/bhavul"}, "edited": false, "score": 2, "creation_date": 1534367552, "post_id": 51866466, "comment_id": 90685156, "body": "Thanks. I had initially thought the same but this didn&#39;t seem so much of an optimised approach to me. In any case, even if I go ahead with something like this, is there a nice way to use some existing matplotlib or opencv2 functions to help me through this? Like are there methods through which I could get pink pixel points directly, and all their neighbouring pixel points as well? Is there anything to keep filling neighbour points until you reach a certain condition?"}, {"owner": {"reputation": 86, "user_id": 5070047, "user_type": "registered", "profile_image": "https://graph.facebook.com/959251914127172/picture?type=large", "display_name": "Mariana Mascarenhas de Carvalh", "link": "https://stackoverflow.com/users/5070047/mariana-mascarenhas-de-carvalh"}, "reply_to_user": {"reputation": 378, "user_id": 2573585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8010bfb98256c138049aa3d237737b37?s=128&d=identicon&r=PG", "display_name": "Bhavul", "link": "https://stackoverflow.com/users/2573585/bhavul"}, "edited": false, "score": 0, "creation_date": 1535005024, "post_id": 51866466, "comment_id": 90908427, "body": "In order to get the pink pixels, you can use an InRange sort of function. <a href=\"https://docs.opencv.org/3.4/da/d97/tutorial_threshold_inRange.html\" rel=\"nofollow noreferrer\">docs.opencv.org/3.4/da/d97/tutorial_threshold_inRange.html</a>. Now, to find pixels that meet certain condition, I believe iterating until you find image borders will be the best method, specifically for the solution I gave in my edited answer."}, {"owner": {"reputation": 378, "user_id": 2573585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8010bfb98256c138049aa3d237737b37?s=128&d=identicon&r=PG", "display_name": "Bhavul", "link": "https://stackoverflow.com/users/2573585/bhavul"}, "edited": false, "score": 1, "creation_date": 1535051685, "post_id": 51866466, "comment_id": 90935216, "body": "Hey thanks for an updated and cleaner answer. I happened to use the approach wherein, for vertical lines, I checked if endpoints one pixel to the left would also have same background color...and if they do, I would draw a line here. Then move 1 px left again. So on... Similarly, to the right.   Then for horizontal lines, I similarly iterate and keep plotting neighbouring lines above and below.   This approach also works. And yours would do too. I&#39;m accepting your answer. For anyone in future referring to this, keep in mind you need to have your pink line clearly inside the wall region."}], "tags": [], "owner": {"reputation": 86, "user_id": 5070047, "user_type": "registered", "profile_image": "https://graph.facebook.com/959251914127172/picture?type=large", "display_name": "Mariana Mascarenhas de Carvalh", "link": "https://stackoverflow.com/users/5070047/mariana-mascarenhas-de-carvalh"}, "is_accepted": true, "score": 1, "last_activity_date": 1535148818, "last_edit_date": 1535148818, "creation_date": 1534367304, "answer_id": 51866466, "question_id": 51866280, "link": "https://stackoverflow.com/questions/51866280/finding-the-surrounding-rectangular-region-given-a-line-inside-it/51866466#51866466", "title": "Finding the surrounding rectangular region given a line inside it", "body": "<p>Editing my answer to cover @Prune condition.\nI would probably try some logic such as:</p>\n\n<ol>\n<li><strong>Find pink lines.</strong> In order to do that, you can take a look at: <a href=\"https://stackoverflow.com/questions/45322630/how-to-detect-lines-in-opencv\">how to detect lines in opencv</a>. The result of this part is an array containing endpoints of detected line segments.</li>\n<li><strong>Find each line orientation.</strong> Consider the endpoints of one line: <em>[x1;y1]</em> and <em>[x2;y2]</em>. If <em>(x2-x1)>(y2-y1)</em>, the line is horizontal. Else, the line is vertical.</li>\n<li><strong>Find new endpoints. If line is horizontal,</strong> move left from your \"leftiest\" (smaller x) endpoint, until you find the dark gray pixel. It will be your new left endpoint (<em>x1'</em>) once you find it. Do the same for the \"rightiest\" (larger x) endpoint, this time moving right, so you find <em>x2'</em>. <strong>If line is vertical,</strong> move down from your lower (smaller y) endpoint, until you find the dark gray pixel. It will be your new lower endpoint (<em>y1'</em>) once you find it. Do the same for the upper (larger y) endpoint, this time moving up, so you find <em>y2'</em>.</li>\n<li><strong>Draw a rectangle, in order to paint your new wall.</strong> If the wall width is constant and the pink line is centralized, from here you can simply draw a rectangle. <strong>If the line is horizontal,</strong> the top-left coordinate of the rectangle is <em>[x1';y1+half of wall width]</em> and the bottom-right coordinate is <em>[x2'; y2-half of wall width]</em>. <strong>If the line is vertical,</strong> the top-left coordinate of the rectangle is <em>[x1-half of wall width;y1']</em> and the bottom-right coordinate is <em>[x2; y2'-half of wall width]</em>.</li>\n</ol>\n\n<p>Let me know if the 4th condition is not met. In this case, for horizontal lines, for example, we would need to iterate up/down along the horizontal line, looking for the smaller distance between the dark pixels, and then get this y-coordinates to help draw the rectangle.</p>\n"}, {"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 2, "last_activity_date": 1534374520, "creation_date": 1534374520, "answer_id": 51867611, "question_id": 51866280, "link": "https://stackoverflow.com/questions/51866280/finding-the-surrounding-rectangular-region-given-a-line-inside-it/51867611#51867611", "title": "Finding the surrounding rectangular region given a line inside it", "body": "<p>Normally, you could use a simple \"fill\" algorithm for this, as suggest in Mariana's answer.  However, you need to extend only so far as the given line -- you cannot continue down the west wall of that office area.  I'm assuming that each end result will be a rectangle aligned to the drawing axes.</p>\n\n<p>Instead, you need a \"wave-front\" fill: extend the <em>entire</em> line north and south (the line dimension that is more than a single pixel) so far as <em>all</em> of the adjacent pixels are gray.  Then do the same with the east-west direction.  You could perform the extension by replicating the line to the adjacent pixel row/column.</p>\n\n<p>I don't know of a package that will support this directly, but most will do a vectorized copy-paste or equivalent change.</p>\n"}], "owner": {"reputation": 378, "user_id": 2573585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8010bfb98256c138049aa3d237737b37?s=128&d=identicon&r=PG", "display_name": "Bhavul", "link": "https://stackoverflow.com/users/2573585/bhavul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 446, "favorite_count": 0, "accepted_answer_id": 51866466, "answer_count": 2, "score": 2, "last_activity_date": 1535148818, "creation_date": 1534366411, "question_id": 51866280, "link": "https://stackoverflow.com/questions/51866280/finding-the-surrounding-rectangular-region-given-a-line-inside-it", "title": "Finding the surrounding rectangular region given a line inside it", "body": "<p>My Question is related to OpenCV / Matplotlib only. However, to understand the problem bear with me for a few lines of ML / Computer vision side of stuff : </p>\n\n<p>I am working on a Image segmentation problem on floor plan dataset. I would be using Fully Convolutional Networks (FCN) for the same. </p>\n\n<p>Now, FCNs require for an image, a corresponding segmented image. \nFor example : </p>\n\n<p><a href=\"https://i.stack.imgur.com/ZIwQc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZIwQc.png\" alt=\"image and its groundtruth\"></a></p>\n\n<p>The image on the left is actual image, while image on the right is the proper \"ANNOTATION\" of the image. Essentially, every object (class) is completely filled with its own colour - car, road, buildings, etc. </p>\n\n<p>Now, in my case, I'm working with floor plan data. An example floorplan image looks like this : </p>\n\n<p><a href=\"https://i.stack.imgur.com/yxNMB.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yxNMB.jpg\" alt=\"Example floorplan image\"></a></p>\n\n<p>The relevant entities in such images are walls, doors, etc.</p>\n\n<p><strong>Problem</strong> I have gotten data annotated for a HUGE bunch of such images, however it is not annotated in the above form. Walls are annotated as <strong>simple lines --- which means they're 1px thick only</strong> and do not actually fill the area/thickness of the walls in actual image. See the following example : </p>\n\n<p><a href=\"https://i.stack.imgur.com/whUl8.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/whUl8.jpg\" alt=\"Annotated Data I have\"></a></p>\n\n<p>See the 2 lines representing walls on top left in above image. While wall is thick, what I have as annotated data is just those pink 1px thick lines.</p>\n\n<p>However, what I would require is actually filled region of walls completely. For example : </p>\n\n<p><a href=\"https://i.stack.imgur.com/6AozO.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6AozO.jpg\" alt=\"Ground truth I want\"></a></p>\n\n<p>What I want to do now is, programmatically, convert these lines to filled regions, i.e., based on having data about lines for every wall, I wish to create a filled version of walls inside which these lines reside. </p>\n\n<p>So, essentially the question is this : \n<strong>If I have a thin line inside a rectangular region, can I somehow get the whole rectangular region that it is representing? If I can I could fill it with its colour and I can annotate the way it's needed.</strong></p>\n\n<p>Some assumptions we can make : \n- Lines will always be representing the walls inside which they are\n- Walls would usually be thicker lines only having some dark colour compared to rest of the image</p>\n\n<p>It would be very difficult and expensive to get data annotated again, hence I'm asking this in case this could be programmatically achieved. </p>\n\n<p>I have very thin knowledge of opencv and matplotlib and hence this could be a newbie question. It might be a very very simple thing to do. In such a case, please let me know the algorithm, or function I need to read up on. </p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "regex", "django", "django-queryset"], "answers": [{"comments": [{"owner": {"reputation": 32215, "user_id": 3789550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8mGqv.gif?s=128&g=1", "display_name": "heemayl", "link": "https://stackoverflow.com/users/3789550/heemayl"}, "reply_to_user": {"reputation": 190, "user_id": 5364617, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/3u1O7.jpg?s=128&g=1", "display_name": "Paulo zOiO zuLLu Fabr&#237;cio", "link": "https://stackoverflow.com/users/5364617/paulo-zoio-zullu-fabr%c3%adcio"}, "edited": false, "score": 1, "creation_date": 1534367352, "post_id": 51866313, "comment_id": 90685069, "body": "@PaulozOiOzuLLuFabr&#237;cio It builds the Regex correctly. Check out for any whitespaces around the <code>subject</code> field&#39;s value. Also you are using <code>__iregex</code>, right?"}, {"owner": {"reputation": 190, "user_id": 5364617, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/3u1O7.jpg?s=128&g=1", "display_name": "Paulo zOiO zuLLu Fabr&#237;cio", "link": "https://stackoverflow.com/users/5364617/paulo-zoio-zullu-fabr%c3%adcio"}, "edited": false, "score": 0, "creation_date": 1534368126, "post_id": 51866313, "comment_id": 90685359, "body": "Yeah! It&#39;s ok! In the question I used the field subject, but in my code I need the field category, LOL. I changed my code and it works like a charm! Thanks, man!"}, {"owner": {"reputation": 32215, "user_id": 3789550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8mGqv.gif?s=128&g=1", "display_name": "heemayl", "link": "https://stackoverflow.com/users/3789550/heemayl"}, "reply_to_user": {"reputation": 190, "user_id": 5364617, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/3u1O7.jpg?s=128&g=1", "display_name": "Paulo zOiO zuLLu Fabr&#237;cio", "link": "https://stackoverflow.com/users/5364617/paulo-zoio-zullu-fabr%c3%adcio"}, "edited": false, "score": 1, "creation_date": 1534368217, "post_id": 51866313, "comment_id": 90685388, "body": "@PaulozOiOzuLLuFabr&#237;cio it happens! Glad I could help :)"}], "tags": [], "owner": {"reputation": 32215, "user_id": 3789550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8mGqv.gif?s=128&g=1", "display_name": "heemayl", "link": "https://stackoverflow.com/users/3789550/heemayl"}, "is_accepted": true, "score": 1, "last_activity_date": 1534366593, "creation_date": 1534366593, "answer_id": 51866313, "question_id": 51866274, "link": "https://stackoverflow.com/questions/51866274/django-queryset-where-a-field-values-are-in-a-list/51866313#51866313", "title": "Django queryset where a field values are in a list", "body": "<p>You need to add the start and end of line specifies in Regex, <code>^</code> and <code>$</code>, respectively:</p>\n\n<pre><code>subject__iregex=r\"^(\" + \"|\".join(my_list) + \")$\"\n</code></pre>\n\n<p>I find <code>str.format</code> to be more readable (for Python 3.6+ also look at f-strings):</p>\n\n<pre><code>'^({})$'.format('|'.join(my_list))\n</code></pre>\n\n<p>As we are not referring to the captured group later-on, we can make the group non-capturing:</p>\n\n<pre><code>'^(?:{})$'.format('|'.join(my_list))\n</code></pre>\n"}], "owner": {"reputation": 190, "user_id": 5364617, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/3u1O7.jpg?s=128&g=1", "display_name": "Paulo zOiO zuLLu Fabr&#237;cio", "link": "https://stackoverflow.com/users/5364617/paulo-zoio-zullu-fabr%c3%adcio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "accepted_answer_id": 51866313, "answer_count": 1, "score": 1, "last_activity_date": 1534368319, "creation_date": 1534366369, "last_edit_date": 1534368319, "question_id": 51866274, "link": "https://stackoverflow.com/questions/51866274/django-queryset-where-a-field-values-are-in-a-list", "title": "Django queryset where a field values are in a list", "body": "<p>I need to make a query that returns all rows where the field <strong>subject</strong> values exist in a list. I don't matter with sensitive case, but the values should be exact with the ones in the list.</p>\n\n<p>I'm using:</p>\n\n<pre><code>my_list = [\"Others\", \"Entertainment\"]\nresults = MyObject.objects.filter(subject__iregex=r\"(\" + \"|\".join(my_list) + \")\")\n</code></pre>\n\n<p>This is the solution from the topic <a href=\"https://stackoverflow.com/questions/2667524/django-query-case-insensitive-list-match\">Django query case-insensitive list match</a> but as result I have rows where:</p>\n\n<pre><code>subject = \"others tv series\"\n</code></pre>\n\n<p>and I just want rows like:</p>\n\n<pre><code>subject = \"others\"\n</code></pre>\n\n<p>I need something like <strong>iexact</strong> and <strong>in</strong> mixed.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "python-3.x", "compiler-errors", "syntax-error", "jupyter-notebook"], "comments": [{"owner": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "edited": false, "score": 0, "creation_date": 1534379259, "post_id": 51866261, "comment_id": 90688020, "body": "Neat coloring, but I think it is just some progressive fadeout. The really  meaningful part is the error message."}, {"owner": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "edited": false, "score": 0, "creation_date": 1534379315, "post_id": 51866261, "comment_id": 90688033, "body": "Also, does your dataframe have 3 dimensions?"}, {"owner": {"reputation": 703, "user_id": 9677043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac1a78911d424ab8fc965b48595ea915?s=128&d=identicon&r=PG&f=1", "display_name": "Karl Baker", "link": "https://stackoverflow.com/users/9677043/karl-baker"}, "reply_to_user": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "edited": false, "score": 0, "creation_date": 1534393429, "post_id": 51866261, "comment_id": 90690664, "body": "Dataframe has 2 dimensions."}, {"owner": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "edited": false, "score": 0, "creation_date": 1534403450, "post_id": 51866261, "comment_id": 90694232, "body": "Why does a call have three arguements?"}, {"owner": {"reputation": 703, "user_id": 9677043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac1a78911d424ab8fc965b48595ea915?s=128&d=identicon&r=PG&f=1", "display_name": "Karl Baker", "link": "https://stackoverflow.com/users/9677043/karl-baker"}, "reply_to_user": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "edited": false, "score": 0, "creation_date": 1534404570, "post_id": 51866261, "comment_id": 90694870, "body": "Short answer: I&#39;m learning. I&#39;m trying to display the rows that meet the condition. This works for one column: <code>adult_df[adult_df[&#39;age&#39;] &gt; 70]</code>. I can view multiple cols: <code>adult_df[[&#39;workclass&#39;, &#39;occupation&#39;, &#39;native_country&#39;]]</code>. Here&#39;s the count of instances of a condition on three cols: <code>((adult_df.workclass == &quot; &quot;).sum(), (adult_df.occupation == &quot; &quot;).sum(), (adult_df.native_country == &quot; &quot;).sum())</code>. So I tried combining the syntax. But this fails to show two columns with a condition on each: <code>adult_df[adult_df[&#39;age&#39;] &gt; 70], [adult_df[&#39;sex&#39;] == &#39;Female&#39;]</code>. Any suggestions?"}, {"owner": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "edited": false, "score": 0, "creation_date": 1534409003, "post_id": 51866261, "comment_id": 90697365, "body": "are you looking for <code>&amp;</code> and <code>|</code>? <a href=\"https://pandas.pydata.org/pandas-docs/stable/indexing.html#boolean-indexing\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/stable/&hellip;</a>"}, {"owner": {"reputation": 703, "user_id": 9677043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac1a78911d424ab8fc965b48595ea915?s=128&d=identicon&r=PG&f=1", "display_name": "Karl Baker", "link": "https://stackoverflow.com/users/9677043/karl-baker"}, "reply_to_user": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "edited": false, "score": 0, "creation_date": 1534464025, "post_id": 51866261, "comment_id": 90724912, "body": "Maybe. How would you write that? I tried these and got errors: <code>adult_df[adult_df[&#39;age&#39;] &gt; 70] | [adult_df[&#39;sex&#39;] == &#39;Female&#39;]</code> # TypeError: unsupported operand type(s) for &amp;: &#39;list&#39; and &#39;list&#39;; <code>adult_df[[adult_df[&#39;age&#39;] &gt; 70] | [adult_df[&#39;sex&#39;] == &#39;Female&#39;]]</code> # ValueError: Unable to coerce to Series, length must be 15: given 1; <code>adult_df[adult_df[&#39;age&#39;] &gt; 70] | adult_df[adult_df[&#39;sex&#39;] == &#39;Female&#39;]</code> # ValueError."}], "owner": {"reputation": 703, "user_id": 9677043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac1a78911d424ab8fc965b48595ea915?s=128&d=identicon&r=PG&f=1", "display_name": "Karl Baker", "link": "https://stackoverflow.com/users/9677043/karl-baker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1534366334, "creation_date": 1534366334, "question_id": 51866261, "link": "https://stackoverflow.com/questions/51866261/in-jupyter-notebook-how-can-the-coloring-of-error-output-in-the-code-snippets-h", "title": "In Jupyter Notebook, how can the coloring of error output in the code snippets help me figure out the error?", "body": "<p>The screenshot below shows 3 lines of code in a Jupyter cell and the error output below it. I'd like to know if the differences between the error output for lines 4, 5, and 6 is meaningful and useful in troubleshooting the cause of the errors.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Hlh3s.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Hlh3s.jpg\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Line 4</strong><br>\n - <code>[adult_df['workclass'] == '?']</code> is all black</p>\n\n<p><strong>Line 5</strong><br>\n - The brackets and <code>==</code> are brown<br>\n - Strings and quote marks are blue</p>\n\n<p><strong>Line 6</strong><br>\n - Everything, including closing parenthesis, is brown</p>\n\n<p>Does the coloring hold clues that point to issues? Can the coloring help me figure out the error in my code? If so I would love to learn how.</p>\n\n<p>I'm using\n<code>\nJupyter version 5.0.0-f6790e4 \nRunning on Python 3.6.4\nMSC v.1900 64 bit (AMD64)\nIPython 6.2.1\n</code></p>\n"}, {"tags": ["python", "pandas", "dataframe", "indexing"], "comments": [{"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 3, "creation_date": 1534368435, "post_id": 51866229, "comment_id": 90685459, "body": "I think what you are seeing is the zero inside the red circle is the index name.  Pandas displays the index name offset from the column headers, hence you have that space below the column headers. When using set index argument of colunn name, that column name changes into the new index name as that column is moved into the index of the dataframe."}], "answers": [{"comments": [{"owner": {"reputation": 1145, "user_id": 6439245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6be5a0eea9910bc8f4d22de41689baec?s=128&d=identicon&r=PG&f=1", "display_name": "SML", "link": "https://stackoverflow.com/users/6439245/sml"}, "edited": false, "score": 2, "creation_date": 1598932073, "post_id": 51874164, "comment_id": 112608929, "body": "The del df.index.name method is no longer supported by the latest version of pandas, it raises an &quot;AttributeError&quot;. df.index.name = None would do the trick as well."}], "tags": [], "owner": {"reputation": 2135, "user_id": 7547749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b630b46900e59c5ceec524b6eed391c9?s=128&d=identicon&r=PG&f=1", "display_name": "PythonSherpa", "link": "https://stackoverflow.com/users/7547749/pythonsherpa"}, "is_accepted": true, "score": 2, "last_activity_date": 1534413220, "last_edit_date": 1534413220, "creation_date": 1534412908, "answer_id": 51874164, "question_id": 51866229, "link": "https://stackoverflow.com/questions/51866229/pandas-setting-column-as-index-with-set-index-creates-a-sub-index-why-is-it/51874164#51874164", "title": "Pandas: setting column as index with set_index() creates a sub-index. Why is it happening and how to remove it?", "body": "<p>Like @scott-boston commented, the index name is shown, which was the column name \"0\" in your example. If you like to remove it, you can simply use:</p>\n\n<pre><code>del df.index.name\n</code></pre>\n\n<p>So your full code would be:</p>\n\n<pre><code>import pandas as pd\n\ndf = pd.DataFrame([[l+r*10 for l in range(1, 5)] for r in range(1, 5)])\n\ndf # before\n\ndf.set_index(0, inplace=True)\ndel df.index.name\n\ndf # after\n</code></pre>\n"}], "owner": {"reputation": 20965, "user_id": 191246, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/zRo29.png?s=128&g=1", "display_name": "ccpizza", "link": "https://stackoverflow.com/users/191246/ccpizza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1546, "favorite_count": 1, "accepted_answer_id": 51874164, "answer_count": 1, "score": 2, "last_activity_date": 1534413220, "creation_date": 1534366198, "question_id": 51866229, "link": "https://stackoverflow.com/questions/51866229/pandas-setting-column-as-index-with-set-index-creates-a-sub-index-why-is-it", "title": "Pandas: setting column as index with set_index() creates a sub-index. Why is it happening and how to remove it?", "body": "<p>I want to use the first column in a pandas dataframe as the row index, so I am trying to do it with <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.set_index.html\" rel=\"nofollow noreferrer\">pandas.set_index(0, inplace=True)</a> but this has the side-effect of adding an extra column index.</p>\n\n<p>(<a href=\"http://jupyter.org/\" rel=\"nofollow noreferrer\">jupyter notebook</a> code running with option <code>InteractiveShell.ast_node_interactivity = \"all\"</code>):</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>import pandas as pd\n\ndf = pd.DataFrame([[l+r*10 for l in range(1, 5)] for r in range(1, 5)])\n\ndf # before\n\ndf.set_index(0, inplace=True)\n\ndf # after\n</code></pre>\n\n<p>Dataframe before <code>set_index()</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/MdCTF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MdCTF.png\" alt=\"before set_index()\"></a></p>\n\n<p>Dataframe after <code>set_index()</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/3FtnW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3FtnW.png\" alt=\"after set_index()\"></a></p>\n\n<p>The question is why is there a second index created and how to remove it? The <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.set_index.html\" rel=\"nofollow noreferrer\">set_index() docs</a> don't mention anything about a sub-index being created.</p>\n"}, {"tags": ["python", "git", "anaconda"], "comments": [{"owner": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 0, "creation_date": 1534367719, "post_id": 51866213, "comment_id": 90685224, "body": "Did <code>conda install &lt;my other packages</code>&gt; in the second environment include <code>pip</code>? What is the output of <code>which pip</code> with the environments activated?"}, {"owner": {"reputation": 11, "user_id": 10231164, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Xd2Ki3Fehbo/AAAAAAAAAAI/AAAAAAAAAAo/y8xGPha6AHg/photo.jpg?sz=128", "display_name": "Tanner Bobak", "link": "https://stackoverflow.com/users/10231164/tanner-bobak"}, "reply_to_user": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 0, "creation_date": 1534371410, "post_id": 51866213, "comment_id": 90686337, "body": "@darthbith I don&#39;t install <code>pip</code> explicitly with the other packages. However those other packages depend on pip so it ends up getting installed with the first of my other packages. In <code>env1</code>, <code>which pip</code> returns <code>~&#47;.conda&#47;envs&#47;env1&#47;bin&#47;pip</code>. In <code>env2</code>, <code>which pip</code> returns <code>~&#47;.conda&#47;envs&#47;env2&#47;bin&#47;pip</code>."}, {"owner": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "edited": false, "score": 0, "creation_date": 1534380509, "post_id": 51866213, "comment_id": 90688294, "body": "does your code have packages in itself? what is the intent of <code>pip install -e git+file:&#47;&#47;&#47;path&#47;to&#47;repo@additional-feature</code>? you normally git clone and checkout to branch to switch to it, why do you resort to pip for that? is that because you want isolation?"}, {"owner": {"reputation": 11, "user_id": 10231164, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Xd2Ki3Fehbo/AAAAAAAAAAI/AAAAAAAAAAo/y8xGPha6AHg/photo.jpg?sz=128", "display_name": "Tanner Bobak", "link": "https://stackoverflow.com/users/10231164/tanner-bobak"}, "reply_to_user": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "edited": false, "score": 0, "creation_date": 1534396547, "post_id": 51866213, "comment_id": 90691457, "body": "@EPo Yes, the repository is a package itself. To clarify, I&#39;m working on this project in a team, and I am just testing functionality in the <code>issue-fix</code> branch, but I am developing new features myself in the <code>additional-feature</code> branch. I hope to have separate environments for each branch so each can be tested and edited independently."}, {"owner": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "edited": false, "score": 0, "creation_date": 1534403200, "post_id": 51866213, "comment_id": 90694108, "body": "What prevents you from just activating a different environment and switching to a branch? This is the first snd easiest thing that comes to mind."}, {"owner": {"reputation": 11, "user_id": 10231164, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Xd2Ki3Fehbo/AAAAAAAAAAI/AAAAAAAAAAo/y8xGPha6AHg/photo.jpg?sz=128", "display_name": "Tanner Bobak", "link": "https://stackoverflow.com/users/10231164/tanner-bobak"}, "reply_to_user": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "edited": false, "score": 0, "creation_date": 1534459002, "post_id": 51866213, "comment_id": 90723833, "body": "@EPo I see what you mean, but I&#39;m running both branches in parallel and I worry that I&#39;ll have a script that tries to execute <code>issue-fix</code>, then shortly thereafter another script will try to checkout and run <code>additional-feature</code>, modifying the directory that is already executing. I imagine that would create some kind of error. But to your point if switching environments and checking out the right branch would allow parallel execution without interference then that is definitely easiest."}, {"owner": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "edited": false, "score": 0, "creation_date": 1534487520, "post_id": 51866213, "comment_id": 90730048, "body": "By saying in parallel do you mean you have two python processes that execute two branches? That is a bit unusual, what task domain is it? I can see a problem invoking the processes as you can activate just one environment at a time, so you will need a runner/launcher script."}, {"owner": {"reputation": 11, "user_id": 10231164, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Xd2Ki3Fehbo/AAAAAAAAAAI/AAAAAAAAAAo/y8xGPha6AHg/photo.jpg?sz=128", "display_name": "Tanner Bobak", "link": "https://stackoverflow.com/users/10231164/tanner-bobak"}, "reply_to_user": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "edited": false, "score": 1, "creation_date": 1534524135, "post_id": 51866213, "comment_id": 90750519, "body": "@EPo By in parallel I mean I would like two different nodes on a compute cluster to be running different branches simultaneously. Each node is its own system (managed by Slurm Workload Manager) but all nodes access data from the same file system as far as I can tell."}], "answers": [{"tags": [], "owner": {"reputation": 711, "user_id": 1579211, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/3dQcC.jpg?s=128&g=1", "display_name": "Shahar", "link": "https://stackoverflow.com/users/1579211/shahar"}, "is_accepted": false, "score": 0, "last_activity_date": 1586965218, "last_edit_date": 1586965218, "creation_date": 1585423495, "answer_id": 60905860, "question_id": 51866213, "link": "https://stackoverflow.com/questions/51866213/how-to-create-different-conda-environments-for-different-branches-of-a-git-repos/60905860#60905860", "title": "How to Create Different Conda Environments for Different Branches of a Git Repository?", "body": "<p>This is actually a very interesting problem which I am running into now. I have a repo with two branches in very active development and I need to switch back and forth quite often. The branches have different compiled code (Fortran &amp; C) versions which means that every time I <code>git checkout &lt;branch&gt;</code> I need to recompile code. Not optimal to say the least.</p>\n\n<p>I would like to have two conda environments, with a different branch installed in each env. I would like to have two python kernels running, one started from each conda env and be able to test (run code) in both without doing switching branches (only the window I work in).</p>\n\n<p>What I ended up doing is cloning the repo twice under separate testing directories, both separate from the main repo's main dev dir, checking out different branches in each directory and installing each in a separate conda environment.</p>\n\n<p>As long as I don't touch the master branch in each of those testing directories, I will be able to push upstream and merge when I am ready.</p>\n"}], "owner": {"reputation": 11, "user_id": 10231164, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Xd2Ki3Fehbo/AAAAAAAAAAI/AAAAAAAAAAo/y8xGPha6AHg/photo.jpg?sz=128", "display_name": "Tanner Bobak", "link": "https://stackoverflow.com/users/10231164/tanner-bobak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 589, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1586965218, "creation_date": 1534366140, "question_id": 51866213, "link": "https://stackoverflow.com/questions/51866213/how-to-create-different-conda-environments-for-different-branches-of-a-git-repos", "title": "How to Create Different Conda Environments for Different Branches of a Git Repository?", "body": "<p>I am currently working on a project in a Git repository that has several different branches. I would like to set up two different conda environments, each using the code from a different branch of this one repository. </p>\n\n<p>I would like each of these environments to be completely independent because I run my project on a compute cluster and would like to queue multiple jobs running on different branches of the repository simultaneously. </p>\n\n<p>More specifically, my repository is organized like</p>\n\n<pre><code>my-repo/\n    master\n    issue-fix\n    additional-feature\n</code></pre>\n\n<p>and I would like to create one conda environment called something like <code>env1</code> that uses the code in <code>issue-fix</code> along with some other packages. Then, I would like to create another environment called <code>env2</code> that uses code in <code>additional-feature</code> along with those same other packages.</p>\n\n<p>With the code in branch <code>issue-fix</code> checked-out, I've tried running the following to create both environments:</p>\n\n<pre><code>conda create -n env1\nsource activate env1\nconda install &lt;my other packages&gt;\npip install -e git+file:///path/to/repo@issue-fix#egg=repo-0.1\nsource deactivate\nconda create -n env2\nsource activate env2\nconda install &lt;my other packages&gt;\npip install -e git+file:///path/to/repo@additional-feature#egg=repo-0.1\n</code></pre>\n\n<p>However, in environment <code>env2</code>, the code in branch <code>additional-feature</code> was inaccessible. How should I go about setting up these two environments? </p>\n"}, {"tags": ["python", "c++", "mpi", "distributed-computing", "vtk"], "owner": {"reputation": 12701, "user_id": 572616, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iUVL5.png?s=128&g=1", "display_name": "Woltan", "link": "https://stackoverflow.com/users/572616/woltan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1534416449, "creation_date": 1534366072, "last_edit_date": 1534416449, "question_id": 51866202, "link": "https://stackoverflow.com/questions/51866202/using-vtkdistributeddatafilter-on-unstructured-grids-with-polyhedron-cells", "title": "Using vtkDistributedDataFilter on unstructured grids with polyhedron cells", "body": "<p>I am using the <a href=\"https://www.vtk.org/doc/nightly/html/classvtkDistributedDataFilter.html\" rel=\"nofollow noreferrer\">vtkDistributedDataFilter</a> to distribute my data on several processes. Everything is working just fine except when an <a href=\"https://www.vtk.org/doc/nightly/html/classvtkUnstructuredGrid.html\" rel=\"nofollow noreferrer\">vtkUnstructuredGrid</a> has polyhedron cells in it. Then the filter throws a segmentation fault.\nCan anyone help me with</p>\n\n<ol>\n<li>confirm, that the filter does not work for unstructured grids that have polyhedron cells or</li>\n<li>tell me how I can make this filter work with polyhedral.</li>\n</ol>\n\n<p>Currently I am </p>\n\n<ol>\n<li>instantiating the filter, </li>\n<li>setting the controller with SetController,</li>\n<li>setting the input data with SetInputData and</li>\n<li>finally making the computation with Update.</li>\n</ol>\n\n<p>The following program produces the segmentation fault:</p>\n\n<pre><code>#include &lt;mpi.h&gt;\n#include \"vtkMPIController.h\"\n\n#include &lt;vtkActor.h&gt;\n#include &lt;vtkCamera.h&gt;\n#include &lt;vtkCellArray.h&gt;\n#include &lt;vtkCellData.h&gt;\n#include &lt;vtkDataArray.h&gt;\n#include &lt;vtkDataSetMapper.h&gt;\n#include &lt;vtkDistributedDataFilter.h&gt;\n#include &lt;vtkIdList.h&gt;\n#include &lt;vtkNamedColors.h&gt;\n#include &lt;vtkPointData.h&gt;\n#include &lt;vtkPoints.h&gt;\n#include &lt;vtkPolyhedron.h&gt;\n#include &lt;vtkProperty.h&gt;\n#include &lt;vtkRenderer.h&gt;\n#include &lt;vtkRenderWindow.h&gt;\n#include &lt;vtkRenderWindowInteractor.h&gt;\n#include &lt;vtkSmartPointer.h&gt;\n#include &lt;vtkUnstructuredGrid.h&gt;\n#include &lt;vtkVersion.h&gt;\n#include &lt;vtkXMLUnstructuredGridWriter.h&gt;\n\nint main(int argc, char** argv)\n{\n  MPI_Init(&amp;argc, &amp;argv);\n  vtkMPIController *contr = vtkMPIController::New();\n  contr-&gt;Initialize(&amp;argc, &amp;argv, 1);\n\n  int world_size;\n  MPI_Comm_size(MPI_COMM_WORLD, &amp;world_size);\n\n\n  int world_rank;\n  MPI_Comm_rank(MPI_COMM_WORLD, &amp;world_rank);\n\n  printf(\"%d, %d\\n\", world_size, world_rank);\n\n  vtkSmartPointer&lt;vtkUnstructuredGrid&gt; ugrid =\n    vtkSmartPointer&lt;vtkUnstructuredGrid&gt;::New();\n\n  if(world_rank == 0)\n  {\n    vtkIdType pointIds[8] = {0, 1, 2, 3, 4, 5, 6, 7};\n\n    vtkSmartPointer&lt;vtkPoints&gt; points =\n      vtkSmartPointer&lt;vtkPoints&gt;::New();\n    points-&gt;InsertNextPoint(-1.0,-1.0,-1.0);//0\n    points-&gt;InsertNextPoint( 1.0,-1.0,-1.0);//1\n    points-&gt;InsertNextPoint( 1.0, 1.0,-1.0);//2\n    points-&gt;InsertNextPoint(-1.0, 1.0,-1.0);//3\n    points-&gt;InsertNextPoint(-1.0,-1.0, 1.0);//4\n    points-&gt;InsertNextPoint( 1.0,-1.0, 1.0);//5\n    points-&gt;InsertNextPoint( 1.0, 1.0, 1.0);//6\n    points-&gt;InsertNextPoint(-1.0, 1.0, 1.0);//7\n\n    points-&gt;InsertNextPoint( 2.0,-1.0,-1.0);//8\n    points-&gt;InsertNextPoint( 2.0, 1.0,-1.0);//9\n    points-&gt;InsertNextPoint( 2.0,-1.0, 1.0);//10\n    points-&gt;InsertNextPoint( 2.0, 1.0, 1.0);//11\n\n    vtkSmartPointer&lt;vtkCellArray&gt; faces =\n      vtkSmartPointer&lt;vtkCellArray&gt;::New();\n    vtkIdType face0[4] = {0, 3, 2, 1};\n    vtkIdType face1[4] = {0, 4, 7, 3};\n    vtkIdType face2[4] = {4, 5, 6, 7};\n    vtkIdType face3[4] = {5, 1, 2, 6};\n    vtkIdType face4[4] = {0, 1, 5, 4};\n    vtkIdType face5[4] = {2, 3, 7, 6};\n\n    faces-&gt;InsertNextCell(4, face0);\n    faces-&gt;InsertNextCell(4, face1);\n    faces-&gt;InsertNextCell(4, face2);\n    faces-&gt;InsertNextCell(4, face3);\n    faces-&gt;InsertNextCell(4, face4);\n    faces-&gt;InsertNextCell(4, face5);\n\n    vtkIdType pointIds2[8] = {1, 2, 5, 6, 8, 9, 10, 11};\n\n    vtkSmartPointer&lt;vtkCellArray&gt; faces2 =\n      vtkSmartPointer&lt;vtkCellArray&gt;::New();\n    vtkIdType face6[4] = {5, 1, 2, 6};\n    vtkIdType face7[4] = {1, 2, 9, 8};\n    vtkIdType face8[4] = {2, 6, 11, 9};\n    vtkIdType face9[4] = {6, 5, 10, 11};\n    vtkIdType face10[4] = {5, 1, 8, 10};\n    vtkIdType face11[4] = {11, 10, 8, 9};\n\n    faces2-&gt;InsertNextCell(4, face6);\n    faces2-&gt;InsertNextCell(4, face7);\n    faces2-&gt;InsertNextCell(4, face8);\n    faces2-&gt;InsertNextCell(4, face9);\n    faces2-&gt;InsertNextCell(4, face10);\n    faces2-&gt;InsertNextCell(4, face11);\n\n    ugrid-&gt;SetPoints(points);\n    ugrid-&gt;InsertNextCell(VTK_POLYHEDRON, 8, pointIds, 6, faces-&gt;GetPointer());\n    ugrid-&gt;InsertNextCell(VTK_POLYHEDRON, 8, pointIds2, 6, faces2-&gt;GetPointer());\n  }\n\n  vtkSmartPointer&lt;vtkDistributedDataFilter&gt; distFilter =\n    vtkSmartPointer&lt;vtkDistributedDataFilter&gt;::New();\n\n  distFilter-&gt;SetInputData(ugrid);\n  distFilter-&gt;SetController(contr);\n  distFilter-&gt;Update();\n\n  MPI_Finalize();\n\n  return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Compiled with this CMakeLists.txt:</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.8)\n\nPROJECT(Polyhedron)\n\nfind_package(VTK REQUIRED)\ninclude(${VTK_USE_FILE})\n\nadd_executable(Polyhedron MACOSX_BUNDLE Polyhedron.cxx )\n\ntarget_link_libraries(Polyhedron ${VTK_LIBRARIES})\n</code></pre>\n"}, {"tags": ["python", "sftp", "paramiko"], "answers": [{"comments": [{"owner": {"reputation": 397, "user_id": 12955349, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JyVLQUbBiPI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdmbKkqVOglq4ztn_4Nddx1n2IiRA/photo.jpg?sz=128", "display_name": "Kar", "link": "https://stackoverflow.com/users/12955349/kar"}, "edited": false, "score": 1, "creation_date": 1608848604, "post_id": 51916553, "comment_id": 115701704, "body": "it worked fine thanks a lot"}], "tags": [], "owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "is_accepted": true, "score": 7, "last_activity_date": 1615453743, "last_edit_date": 1615453743, "creation_date": 1534672968, "answer_id": 51916553, "question_id": 51866185, "link": "https://stackoverflow.com/questions/51866185/using-wildcard-in-remote-path-using-paramikos-sftpclient/51916553#51916553", "title": "Using wildcard in remote path using Paramiko&#39;s SFTPClient", "body": "<p>Paramiko <code>SFTPClient</code> does not support wildcards.</p>\n<p>So you have to list files in a remote folder yourself and filter them to those you want to download:</p>\n<pre><code>import re\n</code></pre>\n<pre><code>remote_path = &quot;/home/user&quot;\nlocal_path = &quot;/home/local&quot;\n\nfiles = sftp.listdir(remote_path)\n\nfor filename in files:\n    if re.match(&quot;^user_.*\\\\.csv$&quot;, filename):\n        print(filename)\n        sftp.get(remote_path + &quot;/&quot; + filename, local_path + &quot;/&quot; + filename)\n</code></pre>\n<p>Or use the <code>fnmatch</code> module. See <a href=\"https://stackoverflow.com/q/49381899/850848\">List files on SFTP server matching wildcard in Python using Paramiko</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 397, "user_id": 12955349, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JyVLQUbBiPI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdmbKkqVOglq4ztn_4Nddx1n2IiRA/photo.jpg?sz=128", "display_name": "Kar", "link": "https://stackoverflow.com/users/12955349/kar"}, "edited": false, "score": 0, "creation_date": 1608843975, "post_id": 53717214, "comment_id": 115700844, "body": "I tried your solution but still, it failed, Filename is like <code>Opt_adv048-2020.12.23.14.05.51.csv.pgp</code> . I tried pattern as <code>Opt_adv048-*.csv.pgp</code>"}], "tags": [], "owner": {"reputation": 56, "user_id": 5270763, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8sOG3y4ZGYU/AAAAAAAAAAI/AAAAAAAAACk/AaCjs4vQiRA/photo.jpg?sz=128", "display_name": "Provi", "link": "https://stackoverflow.com/users/5270763/provi"}, "is_accepted": false, "score": 3, "last_activity_date": 1544501021, "creation_date": 1544501021, "answer_id": 53717214, "question_id": 51866185, "link": "https://stackoverflow.com/questions/51866185/using-wildcard-in-remote-path-using-paramikos-sftpclient/53717214#53717214", "title": "Using wildcard in remote path using Paramiko&#39;s SFTPClient", "body": "<p>After retrieving the list of files, <a href=\"https://docs.python.org/2/library/fnmatch.html\" rel=\"nofollow noreferrer\">fnmatch</a> is usually better than regex expression for this job:</p>\n\n<pre><code>import fnmatch\nfor name in sftp.listdir(remote_path):\n    if fnmatch.fnmatch(name, \"user_*.csv\"):\n        print(name)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1618416485, "post_id": 67093272, "comment_id": 118596579, "body": "That assumes you have a shell access to the server and that it&#39;s a Linux server. While this question is about SFTP."}, {"owner": {"reputation": 465, "user_id": 9185215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5d9150d5d08182937572d646b695479?s=128&d=identicon&r=PG", "display_name": "Hossein Torabi", "link": "https://stackoverflow.com/users/9185215/hossein-torabi"}, "reply_to_user": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1618422263, "post_id": 67093272, "comment_id": 118599021, "body": "@MartinPrikryl SFTP is the abbreviation of SSH File Transfer Protocol, so basically if you have SFTP you have a Linux server, maybe you mean FTPS!"}, {"owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1618423120, "post_id": 67093272, "comment_id": 118599393, "body": "Absolutely not. There are SFTP servers for all systems, not only for Linux. And even on Linux, you can have an SFTP access without a shell access."}, {"owner": {"reputation": 465, "user_id": 9185215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5d9150d5d08182937572d646b695479?s=128&d=identicon&r=PG", "display_name": "Hossein Torabi", "link": "https://stackoverflow.com/users/9185215/hossein-torabi"}, "reply_to_user": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1618435264, "post_id": 67093272, "comment_id": 118603875, "body": "Yup but in actual question its obvious he is using linux and linux is not vital! Using shell and bash is important"}, {"owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1618467614, "post_id": 67093272, "comment_id": 118610802, "body": "But we do not know if OP has a shell access. I&#39;m not saying that your answer is not useful. But the question is about <a href=\"https://stackoverflow.com/questions/tagged/sftp\">sftp</a>. Your answer does not use SFTP, but shell. So it should say it, so it&#39;s clear that not everyone will be able to use your solution"}], "tags": [], "owner": {"reputation": 465, "user_id": 9185215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5d9150d5d08182937572d646b695479?s=128&d=identicon&r=PG", "display_name": "Hossein Torabi", "link": "https://stackoverflow.com/users/9185215/hossein-torabi"}, "is_accepted": false, "score": 0, "last_activity_date": 1618496363, "last_edit_date": 1618496363, "creation_date": 1618408929, "answer_id": 67093272, "question_id": 51866185, "link": "https://stackoverflow.com/questions/51866185/using-wildcard-in-remote-path-using-paramikos-sftpclient/67093272#67093272", "title": "Using wildcard in remote path using Paramiko&#39;s SFTPClient", "body": "<p>Just an Easy soloution if you the SFTPServer deployed on the *nix like systems, use <code>execute</code> method like this:</p>\n<pre><code>conn.execute(&quot;ls dir/*.csv&quot;)\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 4828023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee5cf39e144a91ab365f399d10ff2051?s=128&d=identicon&r=PG&f=1", "display_name": "rai2048", "link": "https://stackoverflow.com/users/4828023/rai2048"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2063, "favorite_count": 4, "accepted_answer_id": 51916553, "answer_count": 3, "score": 1, "last_activity_date": 1618496363, "creation_date": 1534365985, "last_edit_date": 1615453703, "question_id": 51866185, "link": "https://stackoverflow.com/questions/51866185/using-wildcard-in-remote-path-using-paramikos-sftpclient", "title": "Using wildcard in remote path using Paramiko&#39;s SFTPClient", "body": "<p>I want to copy the file from remote server to local.</p>\n\n<pre><code>import paramiko\nparamiko.util.log_to_file('/tmp/paramiko.log')\n\n# open transport\nusername = \"user\"\nhost=\"example.com\"\nport = 22\ntransport = paramiko.Transport((host, port))\ntransport.start_client()\nprivate_key_file = \"/home/user/.ssh/id_rsa\"\nagent = paramiko.Agent()\nkey = paramiko.RSAKey.from_private_key_file(private_key_file)\ntransport.auth_publickey(username, key)\n\n# get sftp client\nsftp = paramiko.SFTPClient.from_transport(transport)\nsource = \"/home/user/user_1.csv\"\ntarget = \"/home/local/local_sftp.txt\"\nsftp.get(x[0], x[1])\n</code></pre>\n\n<p>Above code is working fine but I want to use <code>source = \"/home/user/user_*.csv\"</code> but this wildcard is not evaluated.\nCan someone please help me fix this problem.</p>\n\n<p>I found <a href=\"https://stackoverflow.com/questions/47926123/using-wildcards-in-file-names-using-pythons-scpclient-library\">one solution for <code>SCPClient</code></a> but not able to fix the problem for <code>SFTPClient</code>.</p>\n"}, {"tags": ["python", "pandas", "data-science"], "answers": [{"tags": [], "owner": {"reputation": 7823, "user_id": 8146556, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1503034639720733/picture?type=large", "display_name": "rahlf23", "link": "https://stackoverflow.com/users/8146556/rahlf23"}, "is_accepted": false, "score": 0, "last_activity_date": 1534366315, "creation_date": 1534366315, "answer_id": 51866256, "question_id": 51866182, "link": "https://stackoverflow.com/questions/51866182/how-do-i-split-multiple-rows-in-different-column-in-pandas/51866256#51866256", "title": "how do i split multiple rows in different column in pandas", "body": "<p>You can simply create a new dataframe (<code>df_new</code>) that splits the string in the <code>title</code> column of the old dataframe (<code>df</code>) and pass that as a list to the new dataframe constructor:</p>\n\n<pre><code>df_new = pd.DataFrame(df['title'].str.split(r' (?=\\()').tolist(), columns=['movie title','year'])\n</code></pre>\n\n<p>Yields:</p>\n\n<pre><code>                   movie title    year\n0                    Toy Story  (1995)\n1                      Jumanji  (1995)\n2             Grumpier Old Men  (1995)\n3            Waiting to Exhale  (1995)\n4  Father of the Bride Part II  (1995)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 1, "last_activity_date": 1534366521, "creation_date": 1534366521, "answer_id": 51866299, "question_id": 51866182, "link": "https://stackoverflow.com/questions/51866182/how-do-i-split-multiple-rows-in-different-column-in-pandas/51866299#51866299", "title": "how do i split multiple rows in different column in pandas", "body": "<p>Try to use str accessor with <code>split</code> using a regex that looks for a space and open paranthesis or close paranthesis:</p>\n\n<pre><code>df.title.str.split('\\s\\(|\\)',expand=True)\n  .drop(2, axis=1)\n  .set_axis(['movies','year'], inplace=False, axis=1)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>                        movies  year\n0                    Toy Story  1995\n1                      Jumanji  1995\n2             Grumpier Old Men  1995\n3            Waiting to Exhale  1995\n4  Father of the Bride Part II  1995\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 305, "user_id": 10231279, "user_type": "registered", "profile_image": "https://graph.facebook.com/1704663546286645/picture?type=large", "display_name": "Vishal Suryavanshi", "link": "https://stackoverflow.com/users/10231279/vishal-suryavanshi"}, "edited": false, "score": 0, "creation_date": 1534408998, "post_id": 51866325, "comment_id": 90697363, "body": "awesome thanks for the solution , if you don&#39;t mind could please explain me regex as i am new to python and also where i will get best practical documentation for regex.. thanks in advance"}, {"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "reply_to_user": {"reputation": 305, "user_id": 10231279, "user_type": "registered", "profile_image": "https://graph.facebook.com/1704663546286645/picture?type=large", "display_name": "Vishal Suryavanshi", "link": "https://stackoverflow.com/users/10231279/vishal-suryavanshi"}, "edited": false, "score": 0, "creation_date": 1534428293, "post_id": 51866325, "comment_id": 90709305, "body": "@VishalSuryavanshi see the edit for some explanation. Otherwise, <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">Regex101</a> is a great place to learn and test regex."}, {"owner": {"reputation": 305, "user_id": 10231279, "user_type": "registered", "profile_image": "https://graph.facebook.com/1704663546286645/picture?type=large", "display_name": "Vishal Suryavanshi", "link": "https://stackoverflow.com/users/10231279/vishal-suryavanshi"}, "edited": false, "score": 0, "creation_date": 1534429979, "post_id": 51866325, "comment_id": 90710536, "body": "Thanks buddy .. you are champ . Bravo"}], "tags": [], "owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "is_accepted": true, "score": 0, "last_activity_date": 1534428247, "last_edit_date": 1534428247, "creation_date": 1534366658, "answer_id": 51866325, "question_id": 51866182, "link": "https://stackoverflow.com/questions/51866182/how-do-i-split-multiple-rows-in-different-column-in-pandas/51866325#51866325", "title": "how do i split multiple rows in different column in pandas", "body": "<p>Using <code>regex</code>: </p>\n\n<pre><code>df[['movie_title', 'year']] = df.title.str.extract('(.*)\\s\\((\\d+)', expand=True)\n</code></pre>\n\n<h3>Sample Data:</h3>\n\n<pre><code>df = pd.DataFrame({'title': \n                  ['Toy Story (1995)', 'Jumanji (1995)', 'Grumpier Old Men (1995)',\n                   'Waiting to Exhale (1995)', 'Father of the Bride Part II (1995)', \n                   'Hello (Goodbye) (1995)'\n                  ]})\n\ndf[['movie_title', 'year']] = df.title.str.extract('(.*)\\s\\((\\d+)', expand=True)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>                                title                  movie_title  year\n0                    Toy Story (1995)                    Toy Story  1995\n1                      Jumanji (1995)                      Jumanji  1995\n2             Grumpier Old Men (1995)             Grumpier Old Men  1995\n3            Waiting to Exhale (1995)            Waiting to Exhale  1995\n4  Father of the Bride Part II (1995)  Father of the Bride Part II  1995\n5              Hello (Goodbye) (1995)              Hello (Goodbye)  1995\n</code></pre>\n\n<hr>\n\n<p>The regular expression we use is: <code>'(.*)\\s\\((\\d+)'</code>. </p>\n\n<p>The first part of the expression is: <code>(.*)</code>. The parenthesis indicate it's a capturing group, and what's inside the parenthesis indicates what we want to capture. In this case <code>.*</code> indicates that we greedily want to capture everything. After the capturing group, we have <code>\\s\\(</code> which is literally interpreted as a space folllwed by an open parenthesis, so <code>' ('</code>. Because the capturing group before this is greedy, we will capture everything up until the final <code>' ('</code> if there are multiple such matches. (for instance see how it captures  <code>Hello (Goodbye) (1995)</code> properly.</p>\n\n<p>Finally, we add a second capturing group with <code>\\d+</code> as the thing we want to capture, which captures all of the numbers after the final <code>' ('</code> in your title, which for us will be the 4 digit year. </p>\n"}, {"tags": [], "owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "is_accepted": false, "score": 1, "last_activity_date": 1534366812, "creation_date": 1534366812, "answer_id": 51866363, "question_id": 51866182, "link": "https://stackoverflow.com/questions/51866182/how-do-i-split-multiple-rows-in-different-column-in-pandas/51866363#51866363", "title": "how do i split multiple rows in different column in pandas", "body": "<p>If you don't want a <code>regex</code> solution,</p>\n\n<pre><code>df.title.str.rstrip(')').str.split('(').apply(pd.Series)\n\n\n    0                           1\n0   Toy Story                   1995\n1   Jumanji                     1995\n2   Grumpier Old Men            1995\n3   Waiting to Exhale           1995\n4   Father of the Bride Part II 1995\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1202, "user_id": 9937273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xJAip.png?s=128&g=1", "display_name": "Don Thousand", "link": "https://stackoverflow.com/users/9937273/don-thousand"}, "is_accepted": false, "score": 0, "last_activity_date": 1534366821, "creation_date": 1534366821, "answer_id": 51866367, "question_id": 51866182, "link": "https://stackoverflow.com/questions/51866182/how-do-i-split-multiple-rows-in-different-column-in-pandas/51866367#51866367", "title": "how do i split multiple rows in different column in pandas", "body": "<pre><code>df.apply(lambda x: x.str.split('('),axis=1)\ndf2 = pd.DataFrame({'movie title':df['title'].apply(lambda x: x[0][:-1]), 'year':df['title'].apply(lambda x: x[1][:-1])})\nprint(df2)\n</code></pre>\n\n<p>Result</p>\n\n<pre><code>                    movie title year\n0                    Toy Story  1995\n1                      Jumanji  1995\n2             Grumpier Old Men  1995\n3            Waiting to Exhale  1995\n4  Father of the Bride Part II  1995\n</code></pre>\n"}], "owner": {"reputation": 305, "user_id": 10231279, "user_type": "registered", "profile_image": "https://graph.facebook.com/1704663546286645/picture?type=large", "display_name": "Vishal Suryavanshi", "link": "https://stackoverflow.com/users/10231279/vishal-suryavanshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 311, "favorite_count": 0, "closed_date": 1534368001, "accepted_answer_id": 51866325, "answer_count": 5, "score": 1, "last_activity_date": 1534428247, "creation_date": 1534365975, "last_edit_date": 1534366075, "question_id": 51866182, "link": "https://stackoverflow.com/questions/51866182/how-do-i-split-multiple-rows-in-different-column-in-pandas", "closed_reason": "Duplicate", "title": "how do i split multiple rows in different column in pandas", "body": "<p>In below example i have data of movies :</p>\n\n<p>I want to split the title column values into 2 new column i.e one of the new column ( \" movie title \") will take = toy story as row value and another new column (\"year) will take =1995 as row value.</p>\n\n<p>how to perform this operation on whole dataframe?</p>\n\n<pre><code>                            title  \\\n0                    Toy Story (1995)   \n1                      Jumanji (1995)   \n2             Grumpier Old Men (1995)   \n3            Waiting to Exhale (1995)   \n4  Father of the Bride Part II (1995) \n</code></pre>\n"}, {"tags": ["python", "python-3.x", "openpyxl"], "comments": [{"owner": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "edited": false, "score": 1, "creation_date": 1534410205, "post_id": 51866161, "comment_id": 90698120, "body": "You can use <code>reversed</code>; deleting rows while iterating over them will have unexpected results."}], "answers": [{"tags": [], "owner": {"reputation": 31351, "user_id": 1447509, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/AYREu.jpg?s=128&g=1", "display_name": "cssyphus", "link": "https://stackoverflow.com/users/1447509/cssyphus"}, "is_accepted": true, "score": 0, "last_activity_date": 1534523644, "creation_date": 1534523644, "answer_id": 51899645, "question_id": 51866161, "link": "https://stackoverflow.com/questions/51866161/openpyxl-iterate-over-rows-in-reverse-order-from-ws-max-row-to-1/51899645#51899645", "title": "OpenPyXL - Iterate over rows in reverse order, from ws.max_row to 1", "body": "<p>Right, so here's how I did this. Despite author Charlie Clark's suggestion to use <code>reversed</code>, I still haven't identified the syntax to use that method.</p>\n\n<p>However, this worked fine:</p>\n\n<pre><code>print('BEGIN: sheet.max_row: ' + str(sheet.max_row))\n\nfor rr in range(sheet.max_row, 1, -1):\n    hasData = False\n    for cc in range(1, sheet.max_column+1):\n        tmp = AlphaFromIndex(cc)\n        ref = str(tmp) + str(rr)\n        val = sheet[ref].value\n        if val is not None: hasData = True\n    if not hasData:\n        print('Row: ' + str(rr) + ' -- Deleting row: ' + str(rr))\n        sheet.delete_rows(rr, 1)\n    else:\n        print('Row: ' + str(rr) + ' of (' +str(sheet.max_row)+')')\n\nprint('END: sheet.max_row: ' + str(sheet.max_row))\n\ndef AlphaFromIndex(num):\n    ab = [\"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\", \"K\", \"L\", \"M\", \"N\", \"O\", \"P\", \"Q\", \"R\", \"S\", \"T\", \"U\", \"V\", \"W\", \"X\", \"Y\", \"Z\"]\n    return ab[num - 1]\n</code></pre>\n\n<h2>* BUT *</h2>\n\n<p>The main take away from this exercise is that OpenPyXL will not update formulas in rows below any deleted rows. So, deleting blank rows is a bad idea in OpenPyXL <em>as any pre-existing formulas will now refer to the wrong rows.</em></p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 12791160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc2f6c5be6c357a54e1c03007f005dde?s=128&d=identicon&r=PG", "display_name": "Russell McDonell", "link": "https://stackoverflow.com/users/12791160/russell-mcdonell"}, "is_accepted": false, "score": 1, "last_activity_date": 1618374037, "creation_date": 1618374037, "answer_id": 67085492, "question_id": 51866161, "link": "https://stackoverflow.com/questions/51866161/openpyxl-iterate-over-rows-in-reverse-order-from-ws-max-row-to-1/67085492#67085492", "title": "OpenPyXL - Iterate over rows in reverse order, from ws.max_row to 1", "body": "<pre><code>rows = list(sheet.iter_rows(min_row=1, max_row=sheet.max_row)\nif needReversed:\n    rows = reversed(rows)\nfor row in rows:\n    print(row[0].value)\n</code></pre>\n"}], "owner": {"reputation": 31351, "user_id": 1447509, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/AYREu.jpg?s=128&g=1", "display_name": "cssyphus", "link": "https://stackoverflow.com/users/1447509/cssyphus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 694, "favorite_count": 0, "accepted_answer_id": 51899645, "answer_count": 2, "score": -1, "last_activity_date": 1618374037, "creation_date": 1534365892, "last_edit_date": 1534523685, "question_id": 51866161, "link": "https://stackoverflow.com/questions/51866161/openpyxl-iterate-over-rows-in-reverse-order-from-ws-max-row-to-1", "title": "OpenPyXL - Iterate over rows in reverse order, from ws.max_row to 1", "body": "<p>Using OpenPyXL, I wish to delete empty rows in the worksheet, and believe the best approach to be to begin at the bottom with <code>max_row</code> and iterate up to the top.</p>\n\n<p>I understand that to iterate over a collection in reverse order, use reversed():</p>\n\n<pre><code>a = [\"foo\", \"bar\", \"baz\"]\nfor i in reversed(a):\n    print(i)\n</code></pre>\n\n<p>However, I am unsure how to translate this to the OpenPyXL rows collection.</p>\n\n<p>At the moment, I have this but I am wondering if there is a better way to proceed using <code>reversed()</code></p>\n\n<pre><code>for i in range(ws.max_row, 1, -1):\n    print(i)\n</code></pre>\n\n<p>Important Note: I am identifying and deleting empty rows and wonder how that will affect iterating up through a rows <strong>collection</strong> ?</p>\n"}, {"tags": ["python", "pandas", "numpy"], "comments": [{"owner": {"reputation": 373, "user_id": 7788960, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-XKCuM5uA3Mw/AAAAAAAAAAI/AAAAAAAAAQI/a4hCiLgx-pQ/photo.jpg?sz=128", "display_name": "dasvootz", "link": "https://stackoverflow.com/users/7788960/dasvootz"}, "edited": false, "score": 3, "creation_date": 1534366001, "post_id": 51866152, "comment_id": 90684549, "body": "What causes the rows to be consecutive, is there an index?  Can you provide an example df with columns?"}, {"owner": {"reputation": 373, "user_id": 7788960, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-XKCuM5uA3Mw/AAAAAAAAAAI/AAAAAAAAAQI/a4hCiLgx-pQ/photo.jpg?sz=128", "display_name": "dasvootz", "link": "https://stackoverflow.com/users/7788960/dasvootz"}, "edited": false, "score": 0, "creation_date": 1534367060, "post_id": 51866152, "comment_id": 90684967, "body": "So the array is inside a dataframe or it is numpy array prior to being appended to the dataframe?  Also what do you want your end output to look like?  How many columns in the end?"}, {"owner": {"reputation": 2156, "user_id": 649090, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/383fae71e6b102d98629de9345923126?s=128&d=identicon&r=PG", "display_name": "Glassjawed", "link": "https://stackoverflow.com/users/649090/glassjawed"}, "reply_to_user": {"reputation": 373, "user_id": 7788960, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-XKCuM5uA3Mw/AAAAAAAAAAI/AAAAAAAAAQI/a4hCiLgx-pQ/photo.jpg?sz=128", "display_name": "dasvootz", "link": "https://stackoverflow.com/users/7788960/dasvootz"}, "edited": false, "score": 0, "creation_date": 1534367200, "post_id": 51866152, "comment_id": 90685021, "body": "No dataframe. It&#39;s just a numpy array of numpy arrays."}, {"owner": {"reputation": 373, "user_id": 7788960, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-XKCuM5uA3Mw/AAAAAAAAAAI/AAAAAAAAAQI/a4hCiLgx-pQ/photo.jpg?sz=128", "display_name": "dasvootz", "link": "https://stackoverflow.com/users/7788960/dasvootz"}, "edited": false, "score": 0, "creation_date": 1534425725, "post_id": 51866152, "comment_id": 90707482, "body": "On your output, I only see one column &quot;0&quot; that is why you are getting an Assertion Error.  Need to create 5 columns in pd.DataFrame.   Can you show on your desired output something with the columns and output below them.    Thanks"}, {"owner": {"reputation": 2156, "user_id": 649090, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/383fae71e6b102d98629de9345923126?s=128&d=identicon&r=PG", "display_name": "Glassjawed", "link": "https://stackoverflow.com/users/649090/glassjawed"}, "reply_to_user": {"reputation": 373, "user_id": 7788960, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-XKCuM5uA3Mw/AAAAAAAAAAI/AAAAAAAAAQI/a4hCiLgx-pQ/photo.jpg?sz=128", "display_name": "dasvootz", "link": "https://stackoverflow.com/users/7788960/dasvootz"}, "edited": false, "score": 0, "creation_date": 1534455194, "post_id": 51866152, "comment_id": 90722742, "body": "Yeah I ended up fixing this.  <code>pd.DataFrame([np.array([df1[i,:,:][j][:6],df1[i,:,:][j][7],d&zwnj;&#8203;f1[i,:,:][j][6],df1[&zwnj;&#8203;i,:,:][j][8],df1[i,:&zwnj;&#8203;,:][j+1][:6]]) for j in range(len(df1[i,:,:])-1)],columns=[&#39;state&#39;,&#39;action&#39;,&#39;reward&#39;&zwnj;&#8203;,&#39;absorb&#39;,&#39;next state&#39;])</code>"}], "owner": {"reputation": 2156, "user_id": 649090, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/383fae71e6b102d98629de9345923126?s=128&d=identicon&r=PG", "display_name": "Glassjawed", "link": "https://stackoverflow.com/users/649090/glassjawed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 215, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1534370816, "creation_date": 1534365854, "last_edit_date": 1534370816, "question_id": 51866152, "link": "https://stackoverflow.com/questions/51866152/how-to-list-pairs-of-consecutive-rows-from-pandas-dataframe", "title": "How to list pairs of consecutive rows from pandas dataframe?", "body": "<p>Say I have an array of numpy arrays <code>df</code> and I want to list the pairs of consecutive rows? How do I do that?</p>\n\n<p>I only know how to list each row one at a time and combine them into a list like this: <code>z=[x for x in df]</code>. Then I'd do <code>[np.vstack(z[i],z[i+1]) for i in range(len(z))]</code>.</p>\n\n<p>I'm just wondering if there's a Pythonic way to do this instead.</p>\n\n<p>My df is for example</p>\n\n<pre><code>array([[1., 1., 1., 0., 0., 0., 1., 0., 1.],\n       [0., 2., 0., 0., 6., 0., 0., 2., 0.],\n       [0., 2., 0., 0., 6., 0., 0., 2., 0.],\n       [0., 3., 4., 9., 1., 2., 2., 1., 8.],\n       [0., 0., 5., 0., 0., 0., 5., 9., 0.]])\n</code></pre>\n\n<p>And I'd like to return pairs of consecutive arrays at a time.</p>\n\n<p>*** UPDATE</p>\n\n<p>Okay so now I'm trying to return a dataframe where the columns are\n(first six entries in the row, the 8th entry, the 7th entry, the 9th entry, and the first six entries in the subsequent row).</p>\n\n<p>When I do <code>pd.DataFrame([[np.array([df1[1,:,:][j][:6],df1[1,:,:][j][7],df1[1,:,:][j][6],df1[1,:,:][j][8],df1[1,:,:][j+1][:6]])] for j in range(len(df1[1,:,:])-1)])</code> it looks fine and I get</p>\n\n<pre><code>                                                    0\n0   [[1.0, 1.0, 1.0, 0.0, 0.0, 0.0], 0.0, 1.0, 1.0...\n1   [[0.0, 0.0, 0.0, 0.0, 0.0, 0.0], 0.0, 0.0, 0.0...\n2   [[0.0, 0.0, 0.0, 0.0, 0.0, 0.0], 0.0, 0.0, 0.0...\n3   [[0.0, 0.0, 0.0, 0.0, 0.0, 0.0], 0.0, 0.0, 0.0...\n4   [[0.0, 0.0, 0.0, 0.0, 0.0, 0.0], 0.0, 0.0, 0.0...\n</code></pre>\n\n<p>.</p>\n\n<p>However, when I do</p>\n\n<p><code>pd.DataFrame([[np.array([df1[1,:,:][j][:6],df1[1,:,:][j][7],df1[1,:,:][j][6],df1[1,:,:][j][8],df1[1,:,:][j+1][:6]])] for j in range(len(df1[1,:,:])-1)],columns=['s','a','r','absorb','ns'])</code> (the only difference is that I provide column names now), I get the error</p>\n\n<pre><code>AssertionError: 5 columns passed, passed data had 1 columns.\n</code></pre>\n\n<p>How do I work around this? Thanks.</p>\n"}, {"tags": ["python", "logging"], "answers": [{"comments": [{"owner": {"reputation": 1840, "user_id": 1917721, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/TgopK.png?s=128&g=1", "display_name": "HFBrowning", "link": "https://stackoverflow.com/users/1917721/hfbrowning"}, "edited": false, "score": 0, "creation_date": 1534366751, "post_id": 51866266, "comment_id": 90684844, "body": "Ok so I can&#39;t believe I didn&#39;t try that earlier. It worked to move the import into the main function. However I&#39;m still puzzled about why the call to <code>log.debug()</code> inside of <code>test_function</code> works when you have them in my original order? If the details on the global sub-module logger are set when you get the logger at module import, then how do those get changed once <code>test_function</code> actually gets run? Does this make sense?"}, {"owner": {"reputation": 971, "user_id": 1418235, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LPVXC.png?s=128&g=1", "display_name": "bohrax", "link": "https://stackoverflow.com/users/1418235/bohrax"}, "reply_to_user": {"reputation": 1840, "user_id": 1917721, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/TgopK.png?s=128&g=1", "display_name": "HFBrowning", "link": "https://stackoverflow.com/users/1917721/hfbrowning"}, "edited": false, "score": 0, "creation_date": 1534367458, "post_id": 51866266, "comment_id": 90685119, "body": "The logging level is actually changed but your print statement is executed before the configuration. Try to put the same print statement inside the test_function."}, {"owner": {"reputation": 1840, "user_id": 1917721, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/TgopK.png?s=128&g=1", "display_name": "HFBrowning", "link": "https://stackoverflow.com/users/1917721/hfbrowning"}, "edited": false, "score": 0, "creation_date": 1534372898, "post_id": 51866266, "comment_id": 90686684, "body": "There is some dark magic afoot here, but that is par for the course for the logging module as far as I can gather. Thank you."}, {"owner": {"reputation": 971, "user_id": 1418235, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LPVXC.png?s=128&g=1", "display_name": "bohrax", "link": "https://stackoverflow.com/users/1418235/bohrax"}, "reply_to_user": {"reputation": 1840, "user_id": 1917721, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/TgopK.png?s=128&g=1", "display_name": "HFBrowning", "link": "https://stackoverflow.com/users/1917721/hfbrowning"}, "edited": false, "score": 1, "creation_date": 1534398804, "post_id": 51866266, "comment_id": 90692143, "body": "Some time ago I was bitten by a similar problem relating to config not working after loggers were already instantiated, so yes still some magic lurking in this module."}], "tags": [], "owner": {"reputation": 971, "user_id": 1418235, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LPVXC.png?s=128&g=1", "display_name": "bohrax", "link": "https://stackoverflow.com/users/1418235/bohrax"}, "is_accepted": true, "score": 0, "last_activity_date": 1534366793, "last_edit_date": 1534366793, "creation_date": 1534366345, "answer_id": 51866266, "question_id": 51866091, "link": "https://stackoverflow.com/questions/51866091/logging-level-string-not-correct-in-sub-modules/51866266#51866266", "title": "Logging level string not correct in sub-modules", "body": "<p>The reason for this is that the <code>other_module.py</code> was loaded before the logging system was configured and its logger is instantiated using default values.</p>\n\n<p>If you put the <code>basicConfig</code> call before <code>import other_module</code> the logging level will be as intended.</p>\n"}], "owner": {"reputation": 1840, "user_id": 1917721, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/TgopK.png?s=128&g=1", "display_name": "HFBrowning", "link": "https://stackoverflow.com/users/1917721/hfbrowning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 51866266, "answer_count": 1, "score": 1, "last_activity_date": 1534366793, "creation_date": 1534365603, "question_id": 51866091, "link": "https://stackoverflow.com/questions/51866091/logging-level-string-not-correct-in-sub-modules", "title": "Logging level string not correct in sub-modules", "body": "<p>I am working with the standard library logging module and just came across something I cannot explain: namely, that when I get a logger from a sub-module it appears that the string associated with the logger's level is <code>WARNING</code>, no matter what logging level it is actually set to. Even more confusingly, the sub-module logger logs messages at the correct level. If you run <code>main.py</code> below (changing the log filename first), you'll see what I mean. The console prints that the logger level at other_module is <code>WARNING</code> but it records the lower-level messages faithfully. </p>\n\n<p>I actually kind of need the string associated with the level for something, if I can get at it. Is this behavior a bug, or am I misunderstanding something? </p>\n\n<p><strong>main.py</strong></p>\n\n<pre><code>import logging\nimport other_module\n\ndef create_logger(log_level):\n    level = log_level.upper()\n    switcher = {\"DEBUG\": logging.DEBUG,\n                \"INFO\": logging.INFO,\n                \"WARNING\": logging.WARNING,\n                \"ERROR\": logging.ERROR,\n                \"CRITICAL\": logging.CRITICAL}\n    logging.basicConfig(filename='C:/logs/log.log', #Change this\n                        format=\"%(asctime)s | %(name)s [Line %(lineno)d] | %(levelname)s: %(message)s\",\n                        datefmt=\"%m/%d/%Y %H:%M:%S\",\n                        level=switcher[level])\n    logger = logging.getLogger(\"root\")\n    return logger\n\ndef main():\n    log = create_logger('DEBUG')\n    log.debug(\"Message from main\")\n    other_module.test_function()\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p><strong>other_module.py</strong></p>\n\n<pre><code>import logging\nlog = logging.getLogger(__name__)\nprint(\"other_module log level is {}\".format(logging.getLevelName(log.getEffectiveLevel())))\n\ndef test_function():\n    log.debug('Message from other_module')\n</code></pre>\n"}, {"tags": ["python", "pythonista"], "owner": {"reputation": 56, "user_id": 448612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db4017e3f95264b75b9606d88af36490?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/448612/cameron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1534366295, "creation_date": 1534365501, "last_edit_date": 1534366295, "question_id": 51866075, "link": "https://stackoverflow.com/questions/51866075/listen-to-mediaplayer-change-notification-in-pythonista", "title": "Listen to MediaPlayer Change Notification in Pythonista", "body": "<p>How can I listen for MediaPlayer notifications in Pythonista? I've tried this, but Pythonista crashes when the media changes.</p>\n\n<pre><code>import ui\nimport time\nfrom objc_util import *\n\nNSBundle.bundleWithPath_('/System/Library/Frameworks/MediaPlayer.framework').load()\nMPMusicPlayerController = ObjCClass('MPMusicPlayerController')\nNSNotificationCenter = ObjCClass('NSNotificationCenter')\n\ndef gotChange():\n    print('here')\n\n@ui.in_background\ndef next():\n    time.sleep(2)\n    sysPlayer.play()\n    sysPlayer.skipToNextItem()\n\nsysPlayer = MPMusicPlayerController.systemMusicPlayer()\nsysPlayer.beginGeneratingPlaybackNotifications()\ncenter = NSNotificationCenter.defaultCenter()\nblock = ObjCBlock(gotChange)\ncenter.addObserverForName_object_queue_usingBlock_('MPMusicPlayerControllerNowPlayingItemDidChangeNotification', None, None, block)\nnext()\n</code></pre>\n"}, {"tags": ["python", "excel", "pandas", "csv"], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 10178299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71a87799dfab390cee95553b8e04a089?s=128&d=identicon&r=PG&f=1", "display_name": "Rami.K", "link": "https://stackoverflow.com/users/10178299/rami-k"}, "edited": false, "score": 0, "creation_date": 1534367614, "post_id": 51866416, "comment_id": 90685179, "body": "Just tried both, I still get the same error... now interestingly enough, if I use iloc I can find the value in the dataframe... so it is there, but there is a problem with the reference I assume?"}, {"owner": {"reputation": 130, "user_id": 6653842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcec3286db902de22d3606825a347f8c?s=128&d=identicon&r=PG&f=1", "display_name": "BenHeid", "link": "https://stackoverflow.com/users/6653842/benheid"}, "reply_to_user": {"reputation": 139, "user_id": 10178299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71a87799dfab390cee95553b8e04a089?s=128&d=identicon&r=PG&f=1", "display_name": "Rami.K", "link": "https://stackoverflow.com/users/10178299/rami-k"}, "edited": false, "score": 0, "creation_date": 1534367797, "post_id": 51866416, "comment_id": 90685254, "body": "What happens if you only print GDP, and what if you print  &#39;GDP.where(GDP[&#39;Country Name&#39;] == &quot;Country Name&quot;)&#39;"}, {"owner": {"reputation": 139, "user_id": 10178299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71a87799dfab390cee95553b8e04a089?s=128&d=identicon&r=PG&f=1", "display_name": "Rami.K", "link": "https://stackoverflow.com/users/10178299/rami-k"}, "edited": false, "score": 0, "creation_date": 1534367872, "post_id": 51866416, "comment_id": 90685276, "body": "WORKED, IT TURNED OUT THAT IT WAS AS YOU SAID, I HAD A STATEMENT MASKING IT... THANKS !"}, {"owner": {"reputation": 139, "user_id": 10178299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71a87799dfab390cee95553b8e04a089?s=128&d=identicon&r=PG&f=1", "display_name": "Rami.K", "link": "https://stackoverflow.com/users/10178299/rami-k"}, "edited": false, "score": 0, "creation_date": 1534378492, "post_id": 51866416, "comment_id": 90687859, "body": "To continue on that... I need to join frames now, and the same value is missing out of the merge result... any idea how to fix it? - assuming that the other frame is compatible in terms of country names and that the iran value on 2015 is a nan which is causing all this mess... thanks"}, {"owner": {"reputation": 130, "user_id": 6653842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcec3286db902de22d3606825a347f8c?s=128&d=identicon&r=PG&f=1", "display_name": "BenHeid", "link": "https://stackoverflow.com/users/6653842/benheid"}, "reply_to_user": {"reputation": 139, "user_id": 10178299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71a87799dfab390cee95553b8e04a089?s=128&d=identicon&r=PG&f=1", "display_name": "Rami.K", "link": "https://stackoverflow.com/users/10178299/rami-k"}, "edited": false, "score": 0, "creation_date": 1534433946, "post_id": 51866416, "comment_id": 90712968, "body": "Sorry I don&#39;t know what the problem is. Perhaps it is better, if you ask a new question, so that more people could see it and answer it."}, {"owner": {"reputation": 139, "user_id": 10178299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71a87799dfab390cee95553b8e04a089?s=128&d=identicon&r=PG&f=1", "display_name": "Rami.K", "link": "https://stackoverflow.com/users/10178299/rami-k"}, "edited": false, "score": 0, "creation_date": 1534443312, "post_id": 51866416, "comment_id": 90717813, "body": "turned out that the files were corrupt.... there was a space after the name but wasn&#39;t visible to the eye, I applied the right regex and it worked, now what is interesting is that when I did split() it didn&#39;t do anything to eliminate the &#39; &#39;... only a regex worked..."}], "tags": [], "owner": {"reputation": 130, "user_id": 6653842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcec3286db902de22d3606825a347f8c?s=128&d=identicon&r=PG&f=1", "display_name": "BenHeid", "link": "https://stackoverflow.com/users/6653842/benheid"}, "is_accepted": true, "score": 0, "last_activity_date": 1534367668, "last_edit_date": 1534367668, "creation_date": 1534367050, "answer_id": 51866416, "question_id": 51866059, "link": "https://stackoverflow.com/questions/51866059/read-csv-is-skipping-2-specific-values-why-is-that-happening/51866416#51866416", "title": "read_csv is skipping 2 specific values, why is that happening?", "body": "<p>The mentioned countries are saved in GDP. But the query in the print statement isn't correct. </p>\n\n<p>The problem is, that the default value of the argument <code>how</code> in the <code>dropna</code> method is <code>'any'</code> this means, that every row will be dropped, where at least one cell is <code>NONE</code>. If you set the argument how to <code>'all'</code> it will work, because now only the lines will be remove, where every cell is <code>NONE</code>.</p>\n\n<pre><code> print (GDP.where(GDP['Country Name'] == \"Country Name\").dropna(how='all'))\n</code></pre>\n\n<p>The following line of code should also work </p>\n\n<pre><code>print(GDP.loc[GDP['Country Name'] == \"Italy\"])\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 10178299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71a87799dfab390cee95553b8e04a089?s=128&d=identicon&r=PG&f=1", "display_name": "Rami.K", "link": "https://stackoverflow.com/users/10178299/rami-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 1, "accepted_answer_id": 51866416, "answer_count": 1, "score": 0, "last_activity_date": 1534367668, "creation_date": 1534365440, "question_id": 51866059, "link": "https://stackoverflow.com/questions/51866059/read-csv-is-skipping-2-specific-values-why-is-that-happening", "title": "read_csv is skipping 2 specific values, why is that happening?", "body": "<p>I want to read change the values of the countries using a function I created and tested that works... now I realized that the GDP is not saving Iran, Islamic Rep., and Hong Kong SAR, China. I tested other countries, they are all saved. To fill the dataframe I am using</p>\n\n<pre><code>GDP = pd.read_csv('world_bank.csv', skiprows=4) # Works\n</code></pre>\n\n<p>And the csv file looks like this, the first thing I though about is the \" \" surrounding these 2 values, but there are several of these in the document and they are read normally... </p>\n\n<pre><code>  Data Source,World Development Indicators,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\nLast Updated Date,2016-07-22,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\n,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\nCountry Name,Country Code,Indicator Name,Indicator Code,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015\nAruba,ABW,GDP at market prices (constant 2010 US$),NY.GDP.MKTP.KD,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2467703910.61453,,,,,\nAndorra,AND,GDP at market prices (constant 2010 US$),NY.GDP.MKTP.KD,,,,,,,,,,,1022871401.93761,1070429536.96666,1157666822.22471,1247831302.28061,1317944270.10389,1325090206.69843,1368868423.74087,1407724771.11631,1428319832.5687,1428913249.71927,1460474058.82573,1458539387.76721,1476719523.0981,1502859168.80367,1529680509.57141,1565191061.36678,1616111761.51642,1705759462.17548,1792656379.78858,1879188446.01576,1950247955.3502,1999901280.7926,2018484671.13457,1997664169.00582,2045272407.14157,2101670670.58746,2199392933.59256,2398826713.99845,2475464141.15257,2576935425.08679,2606977004.92985,2765136580.02845,2942847625.89494,3296693262.49151,3562720066.76084,3842026792.01624,4018195653.51015,4021331428.40105,3675727910.50681,3535389132.60241,3346317328.52461,3185604581.52029,3129537611.8862,3127549907.58377,,\nIDA blend,IDB,GDP at market prices (constant 2010 US$),NY.GDP.MKTP.KD,114843734496.467,116825126778.394,121643012470.776,130734109731.368,137328520363.959,145014531146.25,144058056666.588,132890664623.984,134210156587.344,155382231058.333,183359838772.403,201110581022.513,207617530331.052,219438392800.854,238570050445.152,234626261690.864,250046897890.65,262680672413.176,260220670867.475,275041817716.204,289461610552.389,276500129859.62,282827934807.378,282421335436.72,285963227093.922,304186491207.154,299719850430.217,292729058944.008,309344459545.3,324457648875.288,345746839000.192,350924822772.177,356038812480.683,364514117515.583,373115707944.433,383892894576.167,404244192516.042,417563815701.912,431248084865.196,441355516730.99,461954366198.435,477233675738.881,494161983121.63,525287801517.408,609832448958.441,641846930294.024,686229409346.005,728044694230.304,763260853189.323,802728376068.952,851672684956.445,896205368021.057,940445925880,989736427045.418,1048143618028.7,1093273220752.24\nIndonesia,IDN,GDP at market prices (constant 2010 US$),NY.GDP.MKTP.KD,50690456241.3595,53785065695.4124,54812177702.1083,53577239297.2871,55426439386.0439,55951372227.5444,57546225952.997,58193619222.8912,65196743209.4572,70071755312.3025,75784072052.4458,81086959458.005,87478799388.7145,96030870176.5996,103960020075.396,110388314055.746,116998527975.214,127103065077.058,138803610829.959,148648426511.93,161618000132.291,174786943468.06,176716720143.147,191649119920.851,205394486074.898,212537159009.816,225213972675.202,237150320298.847,252222832803.733,275136556654.608,299903175261.402,326677919382.138,350265703789.668,375674242085.325,404000330435.902,437921644681.252,471391060076.756,493545839076.339,428759439289.54,432151483136.748,453413615265.361,469933588204.66,491078134359.3,514553481857.514,540440018909.465,571204952340.344,602626661363.277,640863456970.63,679403085754.142,710851779404.06,755094157594.527,801681837683.133,850023658571.777,897261714696.733,942339147749.082,987514144907.28\nIDA only,IDX,GDP at market prices (constant 2010 US$),NY.GDP.MKTP.KD,,,,,,,176116462408.66,179363247751.575,188465161056.638,196241783973.108,204753945215.485,210897909288.906,209665034578.705,215624504931.857,228947150724.273,229293873279.911,239948485849.848,248938643905.808,255117906941.547,257174213511.972,257306403710.239,266608586082.111,268645682060.858,270646895654.07,274648297782.878,279940445459.309,290802664775.217,302403576284.622,311755987785.511,319476139005.429,322214490537.895,326846953322.727,327215111462.726,332228448793.252,336305472889.315,351950766643.983,369675389456.755,385486862425.308,400347027194.538,414961653780.11,429165238432.989,449406495034.163,464629472677.006,486849165353.847,513154960735.692,545656117338.463,580412514329.853,620804001159.904,656668710237.39,685883500935.601,725816940326.799,756250338457.05,790635811693.669,836519782382.788,883206506653.875,927949517271.335\nIsle of Man,IMN,GDP at market prices (constant 2010 US$),NY.GDP.MKTP.KD,,,,,,,,,,,,,,,,,,,,,,,,,974215651.253195,978296865.282151,1165205747.92153,1280518548.80592,1431995653.36528,1530018808.32589,1594080341.10434,1619665137.49349,1632416698.02423,1674341664.65313,1741376689.82916,1815923292.79581,1956039869.74861,2123897982.21156,2410820855.92323,2740939768.55048,2887261118.05137,3042485078.26709,3221047763.36132,3424868543.53407,3602961595.49426,3815536439.37964,4109332802.38461,4415768422.34478,4850662591.66821,4953843516.88238,5420291954.71889,5681266119.97835,6036319157.98014,6307561781.47327,,\nIndia,IND,GDP at market prices (constant 2010 US$),NY.GDP.MKTP.KD,142574928610,147882626117.08,152217254789.058,161341694767.343,173366410805.097,168796870765.197,168703477532.633,181906149319.231,188069000822.198,200368149829.309,210701595633.017,214163276165.591,212978307947.393,219997053101.027,222604757943.431,242972897434.093,247013788528.845,264934057379.626,280068500423.3,265398000678.424,283274736343.697,300288793820.099,310726031244.58,333374518880.449,346111885322.433,364297639428.366,381698549946.995,396834254902.771,435040595513.124,460913953347.585,486418417531.595,491559040260.466,518508253530.734,543141420335.337,579308795091.949,623188492510.657,670236246400.872,697379613646.005,740508468803.062,806012037863.705,836970888960.893,877346082285.568,910720110737.538,982306185613.413,1060133682046.38,1158565308177.29,1265894322131.09,1374865195244.5,1428360609657.8,1549482541544.7,1708458876829.92,1821872415623.62,1924235460945.25,2051981849791.69,2200616575310.97,2367206118959.06\nNot classified,INX,GDP at market prices (constant 2010 US$),NY.GDP.MKTP.KD,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\nIreland,IRL,GDP at market prices (constant 2010 US$),NY.GDP.MKTP.KD,,,,,,,,,,,35646476821.192,36883369668.8742,39277029668.8742,41131466490.0662,42883761192.053,45309543576.1589,45941524768.2119,49713921324.5033,53286725960.2649,54924246357.6159,56615544635.7616,58498133774.8345,59833920132.4503,59687745165.5629,62286771920.5298,64208701854.3046,63933676423.8411,66914961986.755,70406192715.2318,74499552185.4305,80807077615.8941,82366362913.9073,85120096291.3907,87412047814.5696,92443334039.7351,101349715231.788,110743827284.768,123122771920.53,134096925960.265,148528494701.987,163721106887.417,173271782251.656,183558373774.834,190611046622.517,199007714966.887,211613113509.934,224965327549.669,237434595099.338,232300285298.013,219202343576.159,220076114437.086,225771869801.325,226113050728.477,229356195761.589,241281270463.576,260128705960.265\n\"Iran, Islamic Rep.\",IRN,GDP at market prices (constant 2010 US$),NY.GDP.MKTP.KD,55008199861.362,60724056997.4978,65526885363.1927,70141337925.7686,76085976411.7395,89047763860.6423,99290400337.9273,110463353581.338,126374696820.65,145983827472.444,161936358582.348,184124203150.852,210820400546.88,226508983528.938,239648884838.343,238867111255.166,282485286342.747,274650337458.608,239382881270.266,210607239021.737,165116813883.768,155710460310.332,191790513393.427,213053784552.521,197842062853.222,201537060006.584,181816848980.232,181503928205.772,170464865427.365,180917968164.33,205513632859.481,231647051483.288,239286729358.449,235766794094.242,231762799356.709,237327527424.692,252399073803.436,255807469064.417,261128294555.753,266357901072.916,281927925364.048,288672128262.342,311993456682.879,338947502385.457,353646523406.399,368530410531.603,389552313541.27,425064554419.087,428990857822.095,438920754763.986,467790215915.476,485330901134.448,453256899727.832,444592553889.771,463902735245.89,\nIraq,IRQ,GDP at market prices (constant 2010 US$),NY.GDP.MKTP.KD,,,,,,,,,13470458663.4932,13907465459.571,14539470348.6708,15320901820.5358,15893184046.4595,16595465000.9602,19269553239.2887,21676448518.7612,25399401037.7733,25881979343.8993,30296659415.1873,36619346656.0894,45683999700.3624,45351087827.0686,46908434219.6712,40775948070.5521,40170326687.3795,40754361565.8638,42648457432.5216,46617016405.5969,46608141953.6336,45154650633.8524,71262089027.4253,25620782636.5138,33971162223.5539,44260969337.2328,45967022762.6076,46941533526.9572,52114859315.0861,63182979850.0698,85206731245.2155,100188005390.994,101597124451.063,103939260216.262,96767263938.4528,64736488641.8064,99796330254.8975,104187984720.99,114771608149.415,116352699697.206,125926324446.493,130181751588.159,138516722649.573,148969847232.097,169730925971.545,180885914501.784,177054265948.267,180772405533.181\nIceland,ISL,GDP at market prices (constant 2010 US$),NY.GDP.MKTP.KD,2054312977.86783,2052573756.51784,2223218842.49829,2451840948.15596,2694978834.94366,2893645379.31315,3146432314.68332,3106558777.92247,2936477594.24631,3006206839.62042,3230366457.3002,3652279375.79453,3877892887.70289,4141822653.95306,4378167154.7703,4406456904.26679,4669053865.37175,5080970742.4138,5386678250.8111,5648502185.01364,5973173611.64511,6227929890.59389,6362114765.16216,6225255388.90952,6482303544.28681,6695755518.16154,7115615677.28878,7723711906.23829,7716781726.05443,7736724965.60096,7827195932.16068,7809700152.48467,7546209136.31835,7645324780.06705,7921233689.2945,7930468557.40017,8309946429.12654,8718229854.27244,9286660346.13365,9673283176.45846,10130213932.5501,10511376754.9234,10559030951.7694,10848541108.6879,11740326733.5723,12440092240.952,12963368582.5961,14193969535.7889,14403867348.1575,13729597602.4568,13236887873.0516,13500053195.3882,13659749592.2017,14191929403.0356,14451167765.0362,15023018132.9136\nIsrael,ISR,GDP at market prices (constant 2010 US$),NY.GDP.MKTP.KD,16531949036.5479,18384169709.2935,20251287530.0531,22417307095.7701,24196611804.6694,26397043366.4127,26376019480.2727,27165986591.4542,31578274414.3908,35862089476.7697,38482650593.7524,42802052510.4047,48649171993.32,50275291533.3877,53714251341.8311,55496674635.0286,56226929805.8059,56222450137.2094,58933223587.7054,62637058033.6486,66941033623.9661,70387063175.6106,71660250034.7979,74176113089.9494,74846483252.855,77427057199.6452,81136922903.7485,86968791133.6781,88729162245.5733,89500341199.5419,95618110012.4831,102980110729.696,108775620349.079,114820142495.154,122779274838.914,130882706991.227,138941804505.723,144613635421.66,150762331265.362,156396451606.529,170381458377.611,170793065289.462,170676456703.649,172685547750.969,181516775970.153,189485207634.671,200478776258.219,212778307552.702,219288062091.01,222070086195.673,234321743781.76,246108571729.902,253141727649.947,261630083834.698,268431627288.425,275110410785.986\n\"Gambia, The\",GMB,GDP at market prices (constant 2010 US$),NY.GDP.MKTP.KD,,,,,,,172511783.225106,172511783.225106,189031759.079121,193635670.825667,205551712.920038,205416301.549712,205912802.569875,224960414.777983,238185373.283037,267704708.609747,287384286.039778,297269087.137348,316045929.43624,311848260.60591,331401394.801694,342410197.885098,339792188.95895,376772546.824955,390092425.808086,386923842.888132,402753171.003884,412638073.361705,431111165.728129,456528281.016936,472775571.822219,487464894.429975,503934816.90202,519113842.885312,519915075.622107,524499937.233744,536162432.466683,562434386.788253,582119581.960865,619375231.226392,653440870.022485,691340442.024706,668871875.534639,714823372.065284,765218419.327008,758012541.800052,766533358.521271,794366380.48455,839920448.143372,894092762.494649,952429030.415536,911201531.483016,964618263.859891,1010735774.36954,1019604582.06133,\nItaly,ITA,GDP at market prices (constant 2010 US$),NY.GDP.MKTP.KD,545587936045.8\n\"Hong Kong SAR, China\",HKG,GDP at market prices (constant 2010 US$),NY.GDP.MKTP.KD,,,,,,17646914072.5316,17963587597.2928,18251600758.537,18871674770.8568,21012392496.6626,22946967034.0575,24620544326.6381,27233218366.4241,30577436438.9298,31315910641.5164,31470018825.6732,36556880968.4152,40843484682.3004,44217537723.3852,49327657046.3582,54313855535.2722,59343749332.4989,61094263256.6516,64745875473.9274,71203501724.2224,71742527987.2525,79674401051.0777,90349564237.6023,98039821040.139,100272275421.3,104113116514.092,110049570498.302,116911143429.477,124160923333.7,131655256011.867,134780527700.784,140520117876.574,147686148439.864,138998299558.026,142482530553.942,153401659211.88,154261939959.413,156817528193.178,161610386688.859,175670644204.052,188649442838.506,201916372094.71,214969758150.611,219544022644.222,214145185396.967,228637697575.04,239645861296.69,243720566257.359,251208086226.166,257775655510.28,263860579574.348\n</code></pre>\n\n<p>Now to test if GDP is reading them I ran the methods below and both return an empty data frame... Any idea why ?  </p>\n\n<pre><code>print GDP.where(GDP['Country Name'] == \"Iran, Islamic Rep.\").dropna() #NOT READ... .\nprint GDP.where(GDP['Country Name'] == \"Hong Kong SAR, China\").dropna() # NOT READ.. .\n</code></pre>\n"}, {"tags": ["python", "list", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 1505, "user_id": 2279183, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/170ce4d0e324b5e48afc40b2f9689762?s=128&d=identicon&r=PG&f=1", "display_name": "mathakoot", "link": "https://stackoverflow.com/users/2279183/mathakoot"}, "edited": false, "score": 0, "creation_date": 1607329253, "post_id": 51866039, "comment_id": 115227718, "body": "I feel such a python noob after realizing this was the error."}], "tags": [], "owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "is_accepted": true, "score": 3, "last_activity_date": 1534365319, "creation_date": 1534365319, "answer_id": 51866039, "question_id": 51866010, "link": "https://stackoverflow.com/questions/51866010/error-builtin-function-or-method-object-is-not-subscriptable-when-appending/51866039#51866039", "title": "Error &#39;builtin_function_or_method&#39; object is not subscriptable - when appending list inside a for loop", "body": "<p>Change <code>append[col[6:8]]</code> to <code>append(col[6:8])</code></p>\n\n<p><code>append[blah]</code> is trying to get an element from a function</p>\n"}, {"tags": [], "owner": {"reputation": 364, "user_id": 5557177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91be7b6b5a97f29470eabc7021c5536c?s=128&d=identicon&r=PG&f=1", "display_name": "cpander", "link": "https://stackoverflow.com/users/5557177/cpander"}, "is_accepted": false, "score": 0, "last_activity_date": 1534366823, "creation_date": 1534366823, "answer_id": 51866368, "question_id": 51866010, "link": "https://stackoverflow.com/questions/51866010/error-builtin-function-or-method-object-is-not-subscriptable-when-appending/51866368#51866368", "title": "Error &#39;builtin_function_or_method&#39; object is not subscriptable - when appending list inside a for loop", "body": "<p>Why not something like this, which uses <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.pipe.html\" rel=\"nofollow noreferrer\">pipe</a>?</p>\n\n<pre><code>def flag_product_code(df, states):\n    df = df.copy()\n\n    for state in states:\n        df['status' + state] = (df.product_code\n                                  .str.contains(state)\n                                  .astype(int))\n\n    return(df)\n\ndf1.pipe(flag_product_code, ['NY', 'PA', 'IL', 'OR', 'NJ'])\n</code></pre>\n\n<p>This creates a function to flag whichever states you want and appends columns to the original DataFrame. </p>\n\n<p>That said, you will get some unintended results; specifically, row 5 of your data with product_code value '11MNYY' will flag as NY. If you know that product_type will always be formatted like it is in your example data, you might want to check a substring of the product_type.</p>\n"}], "owner": {"reputation": 645, "user_id": 9516819, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "singularity2047", "link": "https://stackoverflow.com/users/9516819/singularity2047"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 951, "favorite_count": 0, "accepted_answer_id": 51866039, "answer_count": 2, "score": 0, "last_activity_date": 1534366823, "creation_date": 1534365161, "question_id": 51866010, "link": "https://stackoverflow.com/questions/51866010/error-builtin-function-or-method-object-is-not-subscriptable-when-appending", "title": "Error &#39;builtin_function_or_method&#39; object is not subscriptable - when appending list inside a for loop", "body": "<p>I want to create a new list from a existing list within a for loop and then pass the list through an if else statement, one element at a time. I do not have the proper knowledge to utilize a list in this manner. Hence this post</p>\n\n<p>sample data:</p>\n\n<pre><code>f = {'Sales_Person': ['John', 'Tom', 'Dick', 'Harry', 'Rob', 'Mike', 'Miz', 'Sally', 'Buck', 'Roger'],  'location': ['NY', 'NY', 'NY', 'NJ', 'PA', 'NJ', 'NJ', 'PA', 'NY', 'NJ'], 'product_code': ['10NYXX', '11NYXX', '10NYXX', '10NJXY', '11PAXY', '11MNYY', '12NJYX', '11PAYY', '12NYXX', '11CAPQ']}\ndf1 = pd.DataFrame(data = f)\ndf1['statusNY'] = 'n/a'\ndf1['statusPA'] = 'n/a'\ndf1['statusIL'] = 'n/a'\ndf1['statusOR'] = 'n/a'\ndf1['statusNJ'] = 'n/a'\n</code></pre>\n\n<p>The data looks like-</p>\n\n<p><a href=\"https://i.stack.imgur.com/bnnA5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bnnA5.png\" alt=\"enter image description here\"></a></p>\n\n<p>I am taking these column names ['statusNY', 'statusPA', 'statusIL', 'statusOR', 'statusNJ'] and extract state names [NY, PA, IL, OR and NJ] from them. Then I will check if the column 'product_code' contains these state names. If true then assign 1 to 'statusNY', if false assign 0 to 'statusNY'.Similarly for rest of the column names 'statusPA', 'statusIL', 'statusOR', 'statusNJ'</p>\n\n<p>Output should look like:</p>\n\n<p><a href=\"https://i.stack.imgur.com/pEeYt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pEeYt.png\" alt=\"enter image description here\"></a></p>\n\n<p>I have following code:</p>\n\n<pre><code>for col in ['statusNY', 'statusPA', 'statusIL', 'statusOR', 'statusNJ']:\n    x = col[6:8]\n    df1.loc[df1['product_code'].str.contains(x) == True, col] = '1'\n    df1.loc[df1['product_code'].str.contains(x) == False, col] = '0' \n</code></pre>\n\n<p>Ideally the second line should create a list which should be passed through third and fourth line. But this doesn't work.</p>\n\n<p>Then I thought of appending the list - </p>\n\n<pre><code>newlist = []\nfor col in ['statusNY', 'statusPA', 'statusIL', 'statusOR', 'statusNJ']:\n    newlist.append[col[6:8]]\n</code></pre>\n\n<p>But ended up getting this error: TypeError: 'builtin_function_or_method' object is not subscriptable. I googled it and also checked other relevant posts, but the results were not quite relevant to my case.</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 4, "creation_date": 1534365290, "post_id": 51865950, "comment_id": 90684256, "body": "pd.get_dummies normal returns headers with the data note the column header.  I am not sure what your table2 means?  How exactly did you generate table2?"}, {"owner": {"reputation": 833, "user_id": 5432304, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206686944764888/picture?type=large", "display_name": "Peybae", "link": "https://stackoverflow.com/users/5432304/peybae"}, "edited": false, "score": 0, "creation_date": 1534365375, "post_id": 51865950, "comment_id": 90684295, "body": "does this help? <code>table1[[&quot;A&quot;,&quot;B&quot;]].merge(table2)</code>?"}, {"owner": {"reputation": 955, "user_id": 9727789, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "LaLaTi", "link": "https://stackoverflow.com/users/9727789/lalati"}, "edited": false, "score": 0, "creation_date": 1534365383, "post_id": 51865950, "comment_id": 90684298, "body": "Table2 is a table that ONLY takes the data types &quot;objects&quot; which are a subset of table1&#39;s columns as I am trying to convert all categorical variables into numeric, then merge it back with the already numeric columns and then pass it into neural network. Maybe there is a better way?"}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1534365482, "post_id": 51865950, "comment_id": 90684329, "body": "Look at the output of pd.get_dummies(table2)... it doesn&#39;t like that what you represent in your question."}, {"owner": {"reputation": 45172, "user_id": 4685471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/327dc718c142e3ea70e5db4b38050a36?s=128&d=identicon&r=PG", "display_name": "desertnaut", "link": "https://stackoverflow.com/users/4685471/desertnaut"}, "edited": false, "score": 1, "creation_date": 1534365528, "post_id": 51865950, "comment_id": 90684351, "body": "Question has nothing to do with <code>machine-learning</code> - kindly do not spam the tag (removed)."}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1534365720, "post_id": 51865950, "comment_id": 90684419, "body": "Just use <code>table1[[&#39;A&#39;, &#39;B&#39;]].join(table2)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 833, "user_id": 5432304, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206686944764888/picture?type=large", "display_name": "Peybae", "link": "https://stackoverflow.com/users/5432304/peybae"}, "is_accepted": false, "score": 1, "last_activity_date": 1534368729, "last_edit_date": 1534368729, "creation_date": 1534368028, "answer_id": 51866599, "question_id": 51865950, "link": "https://stackoverflow.com/questions/51865950/how-to-merge-2-data-frames/51866599#51866599", "title": "How to merge 2 data frames?", "body": "<p>This should do it:</p>\n\n<pre><code>table2=df.select_dtypes(include=[object])\ntable1.select_dtypes(include=[int]).join(table2.apply(lambda x:pd.factorize(x, sort=True)[0]))\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/AM5xA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AM5xA.png\" alt=\"enter image description here\"></a></p>\n\n<p>It first factorizes the object typed columns of table 2 (instead of using dummies generator) and then merge it back to the int typed columns of the original dataframe!</p>\n"}, {"tags": [], "owner": {"reputation": 108, "user_id": 10231056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bd53651d3f836851713ba46ee45a311?s=128&d=identicon&r=PG&f=1", "display_name": "chrisaddy", "link": "https://stackoverflow.com/users/10231056/chrisaddy"}, "is_accepted": true, "score": 0, "last_activity_date": 1534371073, "creation_date": 1534371073, "answer_id": 51867137, "question_id": 51865950, "link": "https://stackoverflow.com/questions/51865950/how-to-merge-2-data-frames/51867137#51867137", "title": "How to merge 2 data frames?", "body": "<p>Assuming what you're trying to do from the question is have a column for <code>C</code> that has a value of <code>1</code> replace values of <code>e</code> and in column <code>D</code>, values of <code>1</code> replace values of <code>l</code>. Otherwise, as mentioned elsewhere there will be a column for each response possibility.</p>\n\n<pre><code>df = pd.DataFrame({'A': [1,2], 'B': [2,4], 'C': ['k','e'], 'D': ['l','r']})\n\ndf\n   A  B  C  D\n0  1  2  k  l\n1  2  4  e  r\n\ndf.dtypes\nA     int64\nB     int64\nC    object\nD    object\ndtype: object\n</code></pre>\n\n<p>Now, if you want to drop the <code>e</code> and <code>l</code> because you want to have <code>k-1</code> columns, you can use the <code>drop_first</code> argument.</p>\n\n<pre><code>df = pd.get_dummies(df, drop_first = True)\ndf\n   A  B  C_k  D_r\n0  1  2    1    0\n1  2  4    0    1\n</code></pre>\n\n<p>Note that the dtypes are not <code>int64</code> like columns <code>A</code> and <code>B</code>.</p>\n\n<pre><code>df\nA      int64\nB      int64\nC_k    uint8\nD_r    uint8\ndtype: object\n</code></pre>\n\n<p>If it's important they are the same type you can of course change those as appropriate. In the general case, you may want to keep names like <code>C_k</code> and <code>D_r</code> so you know what the dummies correspond to. If not, you can always rename based on the <code>_</code> (the default of <code>get_dummies</code> prefix argument.) So, you could create the rename dictionary using the '_' as as way to split out the part of the column name after the prefix. Or for a simple case like this.</p>\n\n<pre><code>df.rename({'C_k': 'C', 'D_r': 'D'}, axis = 1, inplace = True)\ndf\n   A  B  C  D\n0  1  2  1  0\n1  2  4  0  1\n</code></pre>\n"}], "owner": {"reputation": 955, "user_id": 9727789, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "LaLaTi", "link": "https://stackoverflow.com/users/9727789/lalati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 51867137, "answer_count": 2, "score": 0, "last_activity_date": 1534371073, "creation_date": 1534364911, "last_edit_date": 1534367823, "question_id": 51865950, "link": "https://stackoverflow.com/questions/51865950/how-to-merge-2-data-frames", "title": "How to merge 2 data frames?", "body": "<p>I have this table1:</p>\n\n<pre><code>  A B C D\n0 1 2 k l\n1 3 4 e r\n</code></pre>\n\n<p><code>df.dtypes</code> gets me this:</p>\n\n<pre><code>A int64\nB int64\nC object\nD object\n</code></pre>\n\n<p>Now, I want to create a table2 which only includes objects (column C and D) using this command <code>table2=df.select_dtypes(include=[object])</code>. </p>\n\n<p>Then, I want to encode table2 using this command <code>pd.get_dummies(table)</code>.</p>\n\n<p>It gives me this table2:</p>\n\n<pre><code>  C D\n0 0 1\n1 1 0\n</code></pre>\n\n<p>The last thing I want to do is append both tables together (table 1 + table 2), so that the final table looks like this:</p>\n\n<pre><code>  A B C D\n0 1 2 0 1\n1 3 4 1 0\n</code></pre>\n\n<p>Can somebody help?</p>\n"}, {"tags": ["python", "list", "count"], "comments": [{"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1534364985, "post_id": 51865939, "comment_id": 90684147, "body": "Put the <code>print</code> <i>after</i> the loop?"}, {"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 0, "creation_date": 1534365006, "post_id": 51865939, "comment_id": 90684153, "body": "Put the <code>print</code> out of the <code>for</code> loop so that it does not print in each step, but only after the whole thing is done."}, {"owner": {"reputation": 489, "user_id": 9696274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bb41d3349ae8294ea95dfac00409380?s=128&d=identicon&r=PG&f=1", "display_name": "Yevhen_Radchenko", "link": "https://stackoverflow.com/users/9696274/yevhen-radchenko"}, "reply_to_user": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1534365088, "post_id": 51865939, "comment_id": 90684182, "body": "@RafaelC  Yeah, that was the problem, post is like answer please so I can close it"}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1534365136, "post_id": 51865939, "comment_id": 90684205, "body": "Take a look at the <a href=\"https://docs.python.org/3/library/csv.html\" rel=\"nofollow noreferrer\"><code>csv</code></a> module, especially the <code>DictReader</code> class.  You&#39;ll be able to reason about data in this format much more easily."}, {"owner": {"reputation": 489, "user_id": 9696274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bb41d3349ae8294ea95dfac00409380?s=128&d=identicon&r=PG&f=1", "display_name": "Yevhen_Radchenko", "link": "https://stackoverflow.com/users/9696274/yevhen-radchenko"}, "reply_to_user": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1534365266, "post_id": 51865939, "comment_id": 90684247, "body": "@PatrickHaugh Thanks for advice I will look at it, right now it trying to learn how to do it with native methods"}], "answers": [{"tags": [], "owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "is_accepted": false, "score": 1, "last_activity_date": 1534365230, "creation_date": 1534365230, "answer_id": 51866025, "question_id": 51865939, "link": "https://stackoverflow.com/questions/51865939/single-list-count-instead-of-multiple/51866025#51866025", "title": "Single list.count instead of multiple", "body": "<p>Just print one line after the loop is done.</p>\n\n<pre><code>with open('employee.txt', 'r') as employee_list:\n    count = 0\n    for employee in employee_list.readlines():\n        employee_data = employee.rstrip().split(';')\n        if int(employee_data[3]) &gt;= 60:\n            count += 1\n    print(count)\n</code></pre>\n\n<p>But I would also recommend using <code>pandas</code> for data manipulation. For example:</p>\n\n<pre><code>df = pd.read_csv('employee.txt', sep=';')\ndf.columns = ['col1', 'col2', 'col3', 'stamina']\n</code></pre>\n\n<p>Then just filter and get the size:</p>\n\n<pre><code>df[df.stamina &gt;= 60].size\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 489, "user_id": 9696274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bb41d3349ae8294ea95dfac00409380?s=128&d=identicon&r=PG&f=1", "display_name": "Yevhen_Radchenko", "link": "https://stackoverflow.com/users/9696274/yevhen-radchenko"}, "is_accepted": true, "score": -1, "last_activity_date": 1534435697, "creation_date": 1534435697, "answer_id": 51881271, "question_id": 51865939, "link": "https://stackoverflow.com/questions/51865939/single-list-count-instead-of-multiple/51881271#51881271", "title": "Single list.count instead of multiple", "body": "<p>So after a day of thinking I wrote this and get right answer ( maybe someone will find this helpful):</p>\n\n<p>def total_resist_count():</p>\n\n<pre><code>    # with open('employee.txt', 'r') as employee_list:\n    employee_list = [input() for i in range(120)]\n\n    candidates = []\n\n    for employee in employee_list:\n        employee_data = employee.rstrip().split(';')\n        if int(employee_data[3]) &gt;= 60:\n            candidates.append(employee_data)\n    return candidates\n\n\nrequired_professionals = {\n    'computers specialist': 5,\n    'cook': 3,\n    'doctor': 5,\n    'electrical engineer': 4,\n    'manager': 1,\n    'mechanic': 8,\n    'scientist': 14\n}\n\nexpedition_total = 40\nfemale_min = 21\nmale_min = 12\n\n\ndef validate_solution(cur_team, num_females, num_males):\n    global expedition_total, female_min, male_min\n    if sum(cur_team) != expedition_total or num_females &lt; female_min or num_males &lt; male_min:\n        return False\n    num_of_free_vacancies = 0\n    for k in required_professionals:\n        num_of_free_vacancies += required_professionals[k]\n    if num_of_free_vacancies &gt; 0:\n        return False\n    return True\n\n\nTEAM = None\n\n\ndef backtrack(candidates, cur_team, num_females, num_males):\n    global required_professionals, expedition_total, TEAM\n    if sum(cur_team) &gt; expedition_total or TEAM is not None:\n        return\n    if validate_solution(cur_team, num_females, num_males):\n        team = []\n        for i, used in enumerate(cur_team):\n            if used == 1:\n                team.append(candidates[i])\n        TEAM = team\n        return\n\n    for i in range(len(candidates)):\n        if cur_team[i] == 0 and required_professionals[candidates[i][1]] &gt; 0:\n            cur_team[i] = 1\n            required_professionals[candidates[i][1]] -= 1\n            if candidates[i][2] == '1':\n                backtrack(candidates, cur_team, num_females, num_males + 1)\n            else:\n                backtrack(candidates, cur_team, num_females + 1, num_males)\n            required_professionals[candidates[i][1]] += 1\n            cur_team[i] = 0\n\n\nif __name__ == '__main__':\n    ec = decode_fcc_message()\n    candidates = total_resist_count(ec)\n    cur_team = [0] * len(candidates)\n    backtrack(candidates, cur_team, 0, 0)\n    s = \"\"\n    for t in TEAM:\n        s += str(t[0]) + ';'\n    print(s)\n</code></pre>\n"}], "owner": {"reputation": 489, "user_id": 9696274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bb41d3349ae8294ea95dfac00409380?s=128&d=identicon&r=PG&f=1", "display_name": "Yevhen_Radchenko", "link": "https://stackoverflow.com/users/9696274/yevhen-radchenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 51881271, "answer_count": 2, "score": 0, "last_activity_date": 1534435697, "creation_date": 1534364873, "question_id": 51865939, "link": "https://stackoverflow.com/questions/51865939/single-list-count-instead-of-multiple", "title": "Single list.count instead of multiple", "body": "<p>Im parsed list of crew witch one looks like:</p>\n\n<blockquote>\n  <p>20;mechanic;0;68</p>\n  \n  <p>21;cook;0;43</p>\n  \n  <p>22;scientist;0;79</p>\n  \n  <p>23;manager;1;65</p>\n  \n  <p>24;mechanic;1;41</p>\n  \n  <p>etc</p>\n</blockquote>\n\n<p>And now I'm trying to figure out how to count number of workers who have 60 or more stamina( the last element in each employee )</p>\n\n<p>There is my code:</p>\n\n<pre><code>with open('employee.txt', 'r') as employee_list:\n    count = 0\n    for employee in employee_list.readlines():\n        employee_data = employee.rstrip().split(';')\n        if int(employee_data[3]) &gt;= 60:\n            count += 1\n        print(count)\n</code></pre>\n\n<p>Print from terminal:</p>\n\n<blockquote>\n  <p>1  </p>\n  \n  <p>2  </p>\n  \n  <p>3  </p>\n  \n  <p>...</p>\n  \n  <p>90</p>\n</blockquote>\n\n<p>And there is the right answer I think, but is there anyway to get only one 'total' count, not a 90ty strings ?</p>\n"}, {"tags": ["python", "sftp", "paramiko", "pysftp"], "comments": [{"owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1534673674, "post_id": 51865934, "comment_id": 90783055, "body": "Key pair for authentication has nothing to do with host keys. - See my article on <a href=\"https://winscp.net/eng/docs/ssh_keys\" rel=\"nofollow noreferrer\">SSH keys</a> to understand."}], "owner": {"reputation": 651, "user_id": 8202745, "user_type": "registered", "accept_rate": 93, "profile_image": "https://lh6.googleusercontent.com/-urDEsdWgPaM/AAAAAAAAAAI/AAAAAAAAACc/-uRInQ8AkjA/photo.jpg?sz=128", "display_name": "Arvinth Kumar", "link": "https://stackoverflow.com/users/8202745/arvinth-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 382, "favorite_count": 2, "closed_date": 1538382065, "answer_count": 0, "score": 1, "last_activity_date": 1534364822, "creation_date": 1534364822, "question_id": 51865934, "link": "https://stackoverflow.com/questions/51865934/how-to-sftp-connect-through-paramiko-with-public-key-python", "closed_reason": "Duplicate", "title": "How to sftp connect through Paramiko with public key - python", "body": "<p>i'm using Paramiko to connect through sftp to a server.but i can't understand how to connect with below Putty User key file</p>\n\n<p>Code:</p>\n\n<pre><code>       local_path = \"C:\\blp\\aisrvintraday1045.csv\"\n       remote_path = \"/aisrvintraday1045.csv\"\n       cnopts = pysftp.CnOpts ()\n       cnopts.hostkeys.load('C:\\Python code\\SSH-KEY-08142018(private).ppk')\n       with pysftp.Connection (host='sftp.bloomberg.com', username='user', password='pass', cnopts=cnopts) as sftp:\n            sftp.get(local_path, remote_path)\n            data = sftp.listdir ()\n            for i in data:\n               print(i)\n            sftp.close()\n</code></pre>\n\n<p>I connect to it with this ppk file:</p>\n\n<pre><code>PuTTY-User-Key-File-2: ssh-rsa\nEncryption: none\nComment: rsa-key@20180814\nPublic-Lines: 12\n[12 lines key]\nPrivate-Lines: 28\n[28 lines key]\nPrivate-MAC: [hash]\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>   (&lt;class 'paramiko.ssh_exception.SSHException'&gt;, SSHException('Bad host key \n   from server',), &lt;traceback object at 0x7fa76269c5a8&gt;)\n   Bad host key from server\n</code></pre>\n\n<p>I've tried to include that ppk file and set to auth_public_key, but didn't work.</p>\n\n<p>Can you please help me? I am struggling for long time.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 3, "creation_date": 1534364884, "post_id": 51865905, "comment_id": 90684102, "body": "This code does not run. It has syntax errors. E.g. <code>execut main:</code> is definitely not valid Python code. Please read <a href=\"https://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a> and modify your question accordingly."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 9080966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d9f2a32adc2ba6a8bba6e80341b22ab?s=128&d=identicon&r=PG&f=1", "display_name": "Hedvilma", "link": "https://stackoverflow.com/users/9080966/hedvilma"}, "is_accepted": false, "score": 1, "last_activity_date": 1534366499, "creation_date": 1534366499, "answer_id": 51866296, "question_id": 51865905, "link": "https://stackoverflow.com/questions/51865905/combing-code-with-menu-selection-python/51866296#51866296", "title": "Combing code with menu selection - python", "body": "<p>Python is sensitive to indents. The <code>for entry in options:</code> should be on the same level as the row above it.</p>\n\n<p>If you use an IDE like Pycharm for example, it will help catch things like this for you while you're coding.</p>\n"}, {"tags": [], "owner": {"reputation": 14752, "user_id": 1787973, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2853d3d7c18c97459c34b86ced8c18e2?s=128&d=identicon&r=PG", "display_name": "Maxime Ch&#233;ramy", "link": "https://stackoverflow.com/users/1787973/maxime-ch%c3%a9ramy"}, "is_accepted": false, "score": 0, "last_activity_date": 1534366561, "creation_date": 1534366561, "answer_id": 51866307, "question_id": 51865905, "link": "https://stackoverflow.com/questions/51865905/combing-code-with-menu-selection-python/51866307#51866307", "title": "Combing code with menu selection - python", "body": "<p>The indentation is wrong. The <code>for entry in options</code> line shouldn't be indented:</p>\n\n<pre><code>   options = menu.keys()\n   options.sort()\n   for entry in options:\n       print entry, menu[entry]\n</code></pre>\n\n<p>There's also a missing quote: <code>menu['3'] = \"blah</code> should be <code>menu['3'] = \"blah\"</code></p>\n"}], "owner": {"reputation": 1, "user_id": 10231212, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SCcPGnt-TE0/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oLtksXp-Nj8GA4MOhKoqb61IihpA/mo/photo.jpg?sz=128", "display_name": "David Trybalski", "link": "https://stackoverflow.com/users/10231212/david-trybalski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1534366561, "creation_date": 1534364708, "question_id": 51865905, "link": "https://stackoverflow.com/questions/51865905/combing-code-with-menu-selection-python", "title": "Combing code with menu selection - python", "body": "<p>I am working on combining a collection of scritps together with a menu selection that would allow me to select the corresponding script that is selected;</p>\n\n<p>Ex - </p>\n\n<pre><code># import libaries\nimport socket\nimport os\nimport threading\nimport struct\n\n # import other programs\nimport nc\n\nfrom ctypes import *\nfrom netaddr import IPNetwork, IPAdress\n\n# ask for network infomration\nhost = raw_input(\"Enter Your Machine Ip: \")\nsubnet = raw_input(\"Enter Subnet of Network: \")\n\n# what would you like run\nmenu = {}\nmenu['1'] = \"NC\"\nmenu['2'] = \"blah\"\nmenu['3'] = \"blah\n\nwhile True:\n    options = menu.keys()\n    options.sort()\n            for entry in options:\n                    print entry, menu[entry]\n\n    selection=raw_input(\"What would you like to do?\")\n    if selection == '1':\n            print \"Runing NC...\"\n            print \"Please wait...\"\n            if __name__ == \"__main__':\n                    execut main:\n</code></pre>\n\n<p>as of now it is hitting an error at -> for entry in options:</p>\n"}, {"tags": ["python", "amazon-web-services", "tensorflow", "amazon-ec2", "keras"], "answers": [{"tags": [], "owner": {"reputation": 49, "user_id": 9559122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d7096482189eed31414aa744cb80055?s=128&d=identicon&r=PG&f=1", "display_name": "saladham", "link": "https://stackoverflow.com/users/9559122/saladham"}, "is_accepted": false, "score": 2, "last_activity_date": 1534499214, "creation_date": 1534499214, "answer_id": 51892681, "question_id": 51865887, "link": "https://stackoverflow.com/questions/51865887/amazon-web-services-p3-slower-than-local-gpu-with-keras-tensorflow-and-mobilene/51892681#51892681", "title": "Amazon Web Services P3 slower than local GPU with Keras, TensorFlow and MobileNet", "body": "<p>I'm having the same problem. Running with Amazon AWS GPU is even slower than running on CPU on my own laptop. A possible explanation is due to the large amount of time spent on data transferring between CPU and GPU as said in <a href=\"https://stackoverflow.com/questions/49138324/5-layer-dnn-in-keras-trains-slower-using-gpu\">this post</a></p>\n"}], "owner": {"reputation": 97, "user_id": 5617807, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/8AStz.jpg?s=128&g=1", "display_name": "SteffenH", "link": "https://stackoverflow.com/users/5617807/steffenh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 691, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548973605, "creation_date": 1534364571, "last_edit_date": 1548973605, "question_id": 51865887, "link": "https://stackoverflow.com/questions/51865887/amazon-web-services-p3-slower-than-local-gpu-with-keras-tensorflow-and-mobilene", "title": "Amazon Web Services P3 slower than local GPU with Keras, TensorFlow and MobileNet", "body": "<p>I'm currently training (fine tuning) a pretrained MobileNet model with keras and tensorflow. The training is done on my local computer with a GTX980.</p>\n\n<p>To speed up things I created a p3.2xlarge instance on AWS with an Amazon Deep Learning AMI based on Ubuntu (<a href=\"https://aws.amazon.com/marketplace/pp/B077GCH38C?qid=1534363940598&amp;sr=0-2&amp;ref_=srh_res_product_title\" rel=\"nofollow noreferrer\">aws marketplace</a>). </p>\n\n<p>When running with some test data (~ 300 images) I noticed that my local computer needs around 10 seconds per epoch while aws needs 26 seconds. I even tested it with a p3.16xlarge instance, but no big difference. When watching the GPU(s) with </p>\n\n<pre><code>watch -n 1 nvidia-smi \n</code></pre>\n\n<p>all the memory (16GB per GPU) was filled. I tried different amount of data, keras implementations,  batch sizes and raising GPU speed. When listing the devices, the GPU is shown as used. What could be the problem for running slow? I am using jupyter notebook. Below my test code:</p>\n\n<pre><code>from keras.applications import MobileNet\nmobile_model = MobileNet()\n\nfor layer in mobile_model.layers[:-4]:\n    layer.trainable = False\n\nfrom keras import models\nfrom keras import layers\nfrom keras import optimizers\n\n# Create the model\nmodel = models.Sequential()\n\n# Add the vgg convolutional base model\nmodel.add(mobile_model)\n\n# Add new layers\n#model.add(layers.Flatten(return_sequences=True))\nmodel.add(layers.Dense(1024, activation='relu'))\nmodel.add(layers.Dropout(0.5))\nmodel.add(layers.Dense(2, activation='softmax'))\n\nfrom keras.preprocessing.image import ImageDataGenerator\n\ntrain_dir = \"./painOrNoPain/train/\"\nvalidation_dir = \"./painOrNoPain/valid/\"\nimage_size = 224\n\ntrain_datagen = ImageDataGenerator(\n      rescale=1./255,\n      rotation_range=20,\n      width_shift_range=0.2,\n      height_shift_range=0.2,\n      horizontal_flip=True,\n      fill_mode='nearest')\n\nvalidation_datagen = ImageDataGenerator(rescale=1./255)\n\n# Change the batchsize according to your system RAM\ntrain_batchsize = 128\nval_batchsize = 128\n\ntrain_generator = train_datagen.flow_from_directory(\n        train_dir,\n        target_size=(image_size, image_size),\n        batch_size=train_batchsize,\n        class_mode='categorical')\n\nvalidation_generator = validation_datagen.flow_from_directory(\n        validation_dir,\n        target_size=(image_size, image_size),\n        batch_size=val_batchsize,\n        class_mode='categorical',\n        shuffle=False)\n\ntry:\n    model = multi_gpu_model(model)\nexcept:\n    pass\n\nfrom keras.optimizers import Adam\n# Compile the model\nmodel.compile(loss='categorical_crossentropy',\n              optimizer=Adam(lr=1e-4),\n              metrics=['acc'])\n# Train the model\nhistory = model.fit_generator(\n      train_generator,\n      steps_per_epoch=train_generator.samples/train_generator.batch_size ,\n      epochs=3,\n      validation_data=validation_generator,\n      validation_steps=validation_generator.samples/validation_generator.batch_size,\n      verbose=2)\n\n# Save the model\nmodel.save('small_last4.h5')\n</code></pre>\n"}, {"tags": ["python", "web-scraping", "beautifulsoup"], "comments": [{"owner": {"reputation": 945, "user_id": 7175945, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154161857213129/picture?type=large", "display_name": "Dascienz", "link": "https://stackoverflow.com/users/7175945/dascienz"}, "edited": false, "score": 0, "creation_date": 1534365037, "post_id": 51865855, "comment_id": 90684165, "body": "I may be wrong, but I&#39;m pretty sure you can&#39;t scrape this page without a tool that can deal with dynamic content loaded in via <code>JavaScript</code> code. You&#39;ll need to use something like <code>selenium</code> in <code>headless</code> mode for this."}, {"owner": {"reputation": 3301, "user_id": 7237997, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/4f3ef18b508d3451f1478e63cfda7ab6?s=128&d=identicon&r=PG&f=1", "display_name": "Matt W.", "link": "https://stackoverflow.com/users/7237997/matt-w"}, "reply_to_user": {"reputation": 945, "user_id": 7175945, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154161857213129/picture?type=large", "display_name": "Dascienz", "link": "https://stackoverflow.com/users/7175945/dascienz"}, "edited": false, "score": 0, "creation_date": 1534365328, "post_id": 51865855, "comment_id": 90684270, "body": "good to know, thanks @Dascienz"}], "answers": [{"comments": [{"owner": {"reputation": 3301, "user_id": 7237997, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/4f3ef18b508d3451f1478e63cfda7ab6?s=128&d=identicon&r=PG&f=1", "display_name": "Matt W.", "link": "https://stackoverflow.com/users/7237997/matt-w"}, "edited": false, "score": 0, "creation_date": 1534373634, "post_id": 51866252, "comment_id": 90686853, "body": "Wow, that is above and beyond. Thank you 1000 times. last question. If I wanted to run this on this one site many times, will it raise any issues?"}, {"owner": {"reputation": 945, "user_id": 7175945, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154161857213129/picture?type=large", "display_name": "Dascienz", "link": "https://stackoverflow.com/users/7175945/dascienz"}, "reply_to_user": {"reputation": 3301, "user_id": 7237997, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/4f3ef18b508d3451f1478e63cfda7ab6?s=128&d=identicon&r=PG&f=1", "display_name": "Matt W.", "link": "https://stackoverflow.com/users/7237997/matt-w"}, "edited": false, "score": 0, "creation_date": 1534374085, "post_id": 51866252, "comment_id": 90686957, "body": "The only issue is that you should be polite with your web-scraping. Identify your scraper by passing a dummy user-agent and limit your download speed by implementing a time delay between response requests. I can&#39;t guarantee you won&#39;t get banned if you have an extensive job to run though. If you haven&#39;t already, I&#39;d look into the scrapy library for implementing more robust crawlers."}, {"owner": {"reputation": 3301, "user_id": 7237997, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/4f3ef18b508d3451f1478e63cfda7ab6?s=128&d=identicon&r=PG&f=1", "display_name": "Matt W.", "link": "https://stackoverflow.com/users/7237997/matt-w"}, "edited": false, "score": 0, "creation_date": 1534374510, "post_id": 51866252, "comment_id": 90687029, "body": "I&#39;m assuming I add the <code>headers = {&#39;User-Agent&#39;:dummy}</code> to the <code>driver.get</code>. What do I put for the dummy part of it? I&#39;m new to web scraping. Also, what is considered a polite speed limitation. Should I wait a minute, 5 10 between each time it calls the website?"}, {"owner": {"reputation": 945, "user_id": 7175945, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154161857213129/picture?type=large", "display_name": "Dascienz", "link": "https://stackoverflow.com/users/7175945/dascienz"}, "reply_to_user": {"reputation": 3301, "user_id": 7237997, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/4f3ef18b508d3451f1478e63cfda7ab6?s=128&d=identicon&r=PG&f=1", "display_name": "Matt W.", "link": "https://stackoverflow.com/users/7237997/matt-w"}, "edited": false, "score": 1, "creation_date": 1534374788, "post_id": 51866252, "comment_id": 90687079, "body": "Actually, I misspoke. You don&#39;t need to pass a header since selenium uses your browser (in this case chrome) to pass the request. Do watch that your request rate isn&#39;t invasive though. Happy scraping!"}, {"owner": {"reputation": 3301, "user_id": 7237997, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/4f3ef18b508d3451f1478e63cfda7ab6?s=128&d=identicon&r=PG&f=1", "display_name": "Matt W.", "link": "https://stackoverflow.com/users/7237997/matt-w"}, "edited": false, "score": 0, "creation_date": 1534374828, "post_id": 51866252, "comment_id": 90687087, "body": "Thanks very much @Dascienz! I appreciate it."}], "tags": [], "owner": {"reputation": 945, "user_id": 7175945, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154161857213129/picture?type=large", "display_name": "Dascienz", "link": "https://stackoverflow.com/users/7175945/dascienz"}, "is_accepted": true, "score": 1, "last_activity_date": 1534380208, "last_edit_date": 1534380208, "creation_date": 1534366295, "answer_id": 51866252, "question_id": 51865855, "link": "https://stackoverflow.com/questions/51865855/scrape-website-traffic-from-semrush-using-beautiful-soup-python/51866252#51866252", "title": "scrape website traffic from semrush using beautiful soup python", "body": "<p>I went the extra mile and set up a working example of how you can use <code>selenium</code> to scrape that page. Install <code>selenium</code> and try it out!</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.chrome.options import Options\n\nurl = 'https://www.semrush.com/info/burton.com' #your url\noptions = Options() #set up options\noptions.add_argument('--headless') #add --headless mode to options\ndriver = webdriver.Chrome(executable_path='/opt/ChromeDriver/chromedriver',\n                      chrome_options=options)\n\n#note: executable_path will depend on where your chromedriver.exe is located\n\ndriver.get(url) #get response\ndriver.implicitly_wait(1) #wait to load content\nelements = driver.find_elements_by_xpath(xpath='//a[@href=\"/info/burton.com+(by+organic)\"]') #grab that stuff you wanted?  \n\nfor e in elements: print(e.get_attribute('text').strip()) #print text fields\n\ndriver.quit() #close the driver when you're done\n</code></pre>\n\n<p>Output that I see in my terminal:</p>\n\n<pre><code>356K\n6.5K\n59.3K\n$usd305K\nOrganic keywords\nOrganic\nTop Organic Keywords\nView full report\nOrganic Position Distribution\n</code></pre>\n"}], "owner": {"reputation": 3301, "user_id": 7237997, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/4f3ef18b508d3451f1478e63cfda7ab6?s=128&d=identicon&r=PG&f=1", "display_name": "Matt W.", "link": "https://stackoverflow.com/users/7237997/matt-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 511, "favorite_count": 0, "accepted_answer_id": 51866252, "answer_count": 1, "score": 0, "last_activity_date": 1534380208, "creation_date": 1534364392, "question_id": 51865855, "link": "https://stackoverflow.com/questions/51865855/scrape-website-traffic-from-semrush-using-beautiful-soup-python", "title": "scrape website traffic from semrush using beautiful soup python", "body": "<p>I'm trying to scrape website traffic from semrush.com. </p>\n\n<p>my current code using BeautifulSoup is:</p>\n\n<pre><code>from bs4 import BeautifulSoup, BeautifulStoneSoup\nimport urllib\nimport json\n\nreq = urllib.request.Request('https://www.semrush.com/info/burton.com', headers={'User-Agent':'Magic Browser'})\nresponse = urllib.request.urlopen(req)\nraw_data = response.read()\nresponse.close()\n\nsoup = BeautifulSoup(raw_data)\n</code></pre>\n\n<p>I've been trying <code>data = soup.findAll(\"a\", {\"href\":\"/info/burton.com+(by+organic)\"})</code> or <code>data = soup.findAll(\"span\", {\"class\":\"sem-report-counter\"})</code> without much luck. </p>\n\n<p>I can see the numbers on the webpage that I would like to get. Is there a way to pull this information off? I'm not seeing it in the html I pull.</p>\n"}, {"tags": ["python", "django", "permissions", "python-requests", "apache2"], "comments": [{"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1534364531, "post_id": 51865841, "comment_id": 90683948, "body": "You seem to have DNS resolution troubles. This usually not related to user permissions."}, {"owner": {"reputation": 83, "user_id": 6340041, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-TX1dYFzGtDU/AAAAAAAAAAI/AAAAAAAAAEM/sm76VoVGN7M/photo.jpg?sz=128", "display_name": "Allamanda Weitgereist", "link": "https://stackoverflow.com/users/6340041/allamanda-weitgereist"}, "reply_to_user": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1534364981, "post_id": 51865841, "comment_id": 90684145, "body": "@ Klaus D. No I Tried typing the ip and it didnt work :("}], "owner": {"reputation": 83, "user_id": 6340041, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-TX1dYFzGtDU/AAAAAAAAAAI/AAAAAAAAAEM/sm76VoVGN7M/photo.jpg?sz=128", "display_name": "Allamanda Weitgereist", "link": "https://stackoverflow.com/users/6340041/allamanda-weitgereist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1534364338, "creation_date": 1534364338, "question_id": 51865841, "link": "https://stackoverflow.com/questions/51865841/python-requests-deployment", "title": "Python Requests Deployment", "body": "<p>In on of my Django view\u00b4s I am making a request to another webserver via requests, this code works perfect when I run the code with the development server. It looks like that:</p>\n\n<pre><code>import requests\nr = requests.post('http://www.example.org')\nreturn r.text\n</code></pre>\n\n<p>But when I Deploy this an apaches www-data user is running it it throws this error:</p>\n\n<pre><code>ConnectionError\nHTTPConnectionPool(host='www.example.com', port=80): Max retries exceeded \nwith url: / (Caused by NewConnectionError('&lt;urllib3.connection.HTTPConnection \nobject at 0x7f23e917ba58&gt;:Failed to establish a new connection:[Errno -2] \nName or Service not known'))\n</code></pre>\n\n<p>But I can run the code as root user from a seperate script on the Deployment server without a problem this is why i think it is a permission problem. But i have no Idea how to solve this.\nThanks in advance!</p>\n"}, {"tags": ["python", "layout", "kivy"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1534371118, "post_id": 51865836, "comment_id": 90686264, "body": "You understand that it is uncomfortable to receive check and uncheck every so often, I consider it noise and it takes away the desire to help you, avoid being noisy."}, {"owner": {"reputation": 43, "user_id": 8286373, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-j_Jdiv3Bndc/AAAAAAAAAAI/AAAAAAAAAB0/NbWVIjbPEDw/photo.jpg?sz=128", "display_name": "htong", "link": "https://stackoverflow.com/users/8286373/htong"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1534371398, "post_id": 51865836, "comment_id": 90686334, "body": "sorry for that. I&#39;m new to use stack overflow. I thought it i could accept multiple answers, but then i realize that once i accept one answer it cancel the other one. sorry for that again."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1534371505, "post_id": 51865836, "comment_id": 90686361, "body": "If you have another question do not do it in the comments section, they only serve to discuss the current question, if you have another question create a new POST, if you do not want to cause more problems, read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and pass the <a href=\"https://stackoverflow.com/tour\">tour</a>"}, {"owner": {"reputation": 43, "user_id": 8286373, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-j_Jdiv3Bndc/AAAAAAAAAAI/AAAAAAAAAB0/NbWVIjbPEDw/photo.jpg?sz=128", "display_name": "htong", "link": "https://stackoverflow.com/users/8286373/htong"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1534372160, "post_id": 51865836, "comment_id": 90686519, "body": "thank you for the suggestions. sorry for bad operations."}], "answers": [{"tags": [], "owner": {"reputation": 13781, "user_id": 6366098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xw9V6.png?s=128&g=1", "display_name": "ikolim", "link": "https://stackoverflow.com/users/6366098/ikolim"}, "is_accepted": true, "score": 0, "last_activity_date": 1534369550, "creation_date": 1534369550, "answer_id": 51866887, "question_id": 51865836, "link": "https://stackoverflow.com/questions/51865836/kivy-layout-different-computer-different-display/51866887#51866887", "title": "kivy layout: different computer different display", "body": "<ol>\n<li>Try using Density-independent Pixels, <code>dp</code>.</li>\n<li>In kv file, there are two roots. There is a root rule, <code>VQCIA:</code> and also a class rule, <code>&lt;VQCIA&gt;:</code> for the root. Since in Python code, it is using <code>return VQCIA()</code>, which is associated to class rule, <code>&lt;VQCIA&gt;:</code> in kv file. Therefore, remove root rule, <code>VQCIA:</code> to avoid confusion.</li>\n</ol>\n\n<h1>kv file - vqcia.kv</h1>\n\n<pre><code>&lt;VQCIA&gt;:    # class rule for root widget\n    orientation: \"vertical\"\n    goi: goi\n    padding: dp(10)\n    spacing: dp(10)\n    size: dp(400), dp(200)\n    pos: dp(200), dp(200)\n    size_hint: None, None\n</code></pre>\n\n<p><a href=\"https://kivy.org/docs/api-kivy.metrics.html#dimensions\" rel=\"nofollow noreferrer\">Dimensions</a></p>\n\n<blockquote>\n<pre><code>dp\n</code></pre>\n  \n  <p>Density-independent Pixels - An abstract unit that is based on the\n  physical density of the screen. With a density of 1, 1dp is equal to\n  1px. When running on a higher density screen, the number of pixels\n  used to draw 1dp is scaled up a factor appropriate to the screen\u2019s\n  dpi, and the inverse for a lower dpi. The ratio of dp-to-pixels will\n  change with the screen density, but not necessarily in direct\n  proportion. Using the dp unit is a simple solution to making the view\n  dimensions in your layout resize properly for different screen\n  densities. In others words, it provides consistency for the real-world\n  size of your UI across different devices.</p>\n\n<pre><code>sp\n</code></pre>\n  \n  <p>Scale-independent Pixels - This is like the dp unit, but it is also\n  scaled by the user\u2019s font size preference. We recommend you use this\n  unit when specifying font sizes, so the font size will be adjusted to\n  both the screen density and the user\u2019s preference.</p>\n</blockquote>\n"}], "owner": {"reputation": 43, "user_id": 8286373, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-j_Jdiv3Bndc/AAAAAAAAAAI/AAAAAAAAAB0/NbWVIjbPEDw/photo.jpg?sz=128", "display_name": "htong", "link": "https://stackoverflow.com/users/8286373/htong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 51866887, "answer_count": 1, "score": -1, "last_activity_date": 1534369550, "creation_date": 1534364299, "last_edit_date": 1534366144, "question_id": 51865836, "link": "https://stackoverflow.com/questions/51865836/kivy-layout-different-computer-different-display", "title": "kivy layout: different computer different display", "body": "<p>The same code for python layout returns different GUI. I'm terribly confused:</p>\n\n<pre><code># ---------- VQCIA.kv  ----------\n\nVQCIA:\n\n&lt;VQCIA&gt;:\n    orientation: \"vertical\"\n    goi: goi\n    padding: 10\n    spacing: 10\n    size: 400, 200\n    pos: 200, 200\n    size_hint:None,None\n\n    BoxLayout:\n        Label:\n            text: \"Enter gene of interest with TAIR ID:\"\n            font_size: '25sp'\n\n    BoxLayout: \n        TextInput:\n            hint_text: 'AT3G20770'\n            multiline: False\n            font_size: '25sp'\n            id: goi\n\n    BoxLayout:\n        Button:\n            text: \"Submit\"\n            size_hint_x: 15\n            on_press: root.submit_goi()\n\n# ---------- vqcia.py  ----------\n\nfrom kivy.app import App\nfrom kivy.uix.boxlayout import BoxLayout\nfrom kivy.properties import ObjectProperty \n\nclass VQCIA(BoxLayout):\n\n    # Connects the value in the TextInput widget to these\n    # fields\n    goi = ObjectProperty()\n\n    def submit_goi(self):\n\n        # Get the student name from the TextInputs\n        goi = self.goi.text\n        print goi\n        return\n\n\nclass VQCIAApp(App):\n    def build(self):\n        return VQCIA()\n\n\ndbApp = VQCIAApp()\ndbApp.run()\n</code></pre>\n\n<p>my lab computer is macOS Sierra 10.12.6 with Kivy==1.10.1 and has ideal output:\n<a href=\"https://i.stack.imgur.com/ZSXyk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZSXyk.png\" alt=\"Img01 - macOS Sierra 10.12.6\"></a></p>\n\n<p>on the other side my personal mac, macOS high Sierra 10.13.6 with Kivy==1.10.1, has wrong outputs:\n<a href=\"https://i.stack.imgur.com/SmoKR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SmoKR.png\" alt=\"Img02 - macOS high Sierra 10.13.6\"></a> </p>\n\n<p>what happens?</p>\n"}, {"tags": ["python", "pandas", "nlp", "spell-checking"], "answers": [{"comments": [{"owner": {"reputation": 2386, "user_id": 5550203, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2588a3f1b1a7705f3d3a4312823c22a?s=128&d=identicon&r=PG&f=1", "display_name": "Arnold Klein", "link": "https://stackoverflow.com/users/5550203/arnold-klein"}, "edited": false, "score": 0, "creation_date": 1534365188, "post_id": 51865940, "comment_id": 90684221, "body": "thanks! I like your suggestions and definitely will try them. I think, given the large amount of text I need to process, computing a distance should be sufficient (also inspired by Peter Norvig implementation). I need to play around and actually test how fast it is. I will u[date on my progress!"}, {"owner": {"reputation": 1551, "user_id": 806802, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/5kFde.jpg?s=128&g=1", "display_name": "Srini", "link": "https://stackoverflow.com/users/806802/srini"}, "reply_to_user": {"reputation": 2386, "user_id": 5550203, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2588a3f1b1a7705f3d3a4312823c22a?s=128&d=identicon&r=PG&f=1", "display_name": "Arnold Klein", "link": "https://stackoverflow.com/users/5550203/arnold-klein"}, "edited": false, "score": 0, "creation_date": 1534365484, "post_id": 51865940, "comment_id": 90684330, "body": "Of course :) and good luck! You could also experiment with Levenshtein distance :)"}], "tags": [], "owner": {"reputation": 1551, "user_id": 806802, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/5kFde.jpg?s=128&g=1", "display_name": "Srini", "link": "https://stackoverflow.com/users/806802/srini"}, "is_accepted": true, "score": 3, "last_activity_date": 1534365390, "last_edit_date": 1534365390, "creation_date": 1534364875, "answer_id": 51865940, "question_id": 51865832, "link": "https://stackoverflow.com/questions/51865832/how-to-implement-fast-spellchecker-in-python-with-pandas/51865940#51865940", "title": "how to implement fast spellchecker in Python with Pandas?", "body": "<p>You are right, you cannot capture all possible misspellings with regular expressions.</p>\n\n<p>You do however have options.</p>\n\n<p>You could</p>\n\n<ul>\n<li>Use a <a href=\"https://www.geeksforgeeks.org/data-structure-dictionary-spell-checker/\" rel=\"nofollow noreferrer\">trie</a>. A lot of auto complete and spell checking solutions use tries. However most of them operate on a word for word basis. Not on text as a whole</li>\n<li>That being said, what you really want is a fuzzy text extractor as you just want to match alternate/slightly wrong spellings and not correct those spellings in the text. So you have more options here as well\n\n<ul>\n<li>Computational genomics has this challenge where they want to search for patterns of base pairs in long sequences. They allow for a certain amount of mismatch in the matched text. So an approximate matching solution like the ones outlined <a href=\"http://www.cs.jhu.edu/~langmea/resources/lecture_notes/approximate_matching.pdf\" rel=\"nofollow noreferrer\">here</a> will help. Those slides have excellent use of the pigeon hole principle to do what you need and the code is open source too!</li>\n<li>If you want something a lot less complex, just run an edit distance filter on all the words of the doc and admit only words with an edit distance of <code>k</code> or less.</li>\n</ul></li>\n</ul>\n\n<p><strong>To expand on what I mean by Edit Distance</strong></p>\n\n<p>(Images/Code borrowed from slides linked above, slides are free to use for anyone i.e no license)</p>\n\n<p>Let us examine a simpler concept of <strong><em>Hamming Distance</em></strong></p>\n\n<pre><code>def hammingDistance(x,  y):\n    assert len(x) == len(y)\n    nmm = 0\n    for i in xrange(0,  len(x)):\n        if x[i] != y[i]:\n            nmm += 1\n    return nmm\n</code></pre>\n\n<p>Hamming distance returns the number of characters that must swapped between 2 equal length strings to make them equal.</p>\n\n<p>But what happens when the strings are not equal length?</p>\n\n<p>Use <em>editDistance</em> Which is the num of characters that must be swapped/inserted/deleted on 2 strings to make them equal</p>\n\n<p>Hamming distance becomes the base case for a recursive algorithm now</p>\n\n<pre><code>def edDistRecursive(x, y):\n    if len(x) == 0: return len(y)\n    if len(y) == 0: return len(x)\n    delt = 1 if x[-1] != y[-1] else 0\n    diag = edDistRecursive(x[:-1], y[:-1]) + delt\n    vert = edDistRecursive(x[:-1], y) + 1\n    horz = edDistRecursive(x, y[:-1]) + 1\n    return min(diag, vert, horz)\n</code></pre>\n\n<p>Just call the func above on what you think the word would/should match to (maybe by first looking up a trie). You can even memoize the soln to make it faster as there is a high probability for overlap</p>\n"}], "owner": {"reputation": 2386, "user_id": 5550203, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2588a3f1b1a7705f3d3a4312823c22a?s=128&d=identicon&r=PG&f=1", "display_name": "Arnold Klein", "link": "https://stackoverflow.com/users/5550203/arnold-klein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1392, "favorite_count": 2, "accepted_answer_id": 51865940, "answer_count": 1, "score": 2, "last_activity_date": 1534365390, "creation_date": 1534364286, "question_id": 51865832, "link": "https://stackoverflow.com/questions/51865832/how-to-implement-fast-spellchecker-in-python-with-pandas", "title": "how to implement fast spellchecker in Python with Pandas?", "body": "<p>I work on text mining problem and need to extract all mentioned of certain keywords. For example, given the list:</p>\n\n<pre><code>list_of_keywords = ['citalopram', 'trazodone', 'aspirin']\n</code></pre>\n\n<p>I need to find all occurrences of the keywords in a text. That could be easily done with Pandas (assuming my text is read in from a csv file):</p>\n\n<p>import pandas as pd</p>\n\n<pre><code>df_text = pd.read_csv('text.csv')\ndf_text['matches'] = df_text.str.findall('|'.join(list_of_keywords))\n</code></pre>\n\n<p>However, there are spelling mistakes in the text and some times my keywords will be written as: </p>\n\n<pre><code>'citalopram' as 'cetalopram'\n</code></pre>\n\n<p>or </p>\n\n<pre><code>'trazodone' as 'trazadon'\n</code></pre>\n\n<p>Searching on the web, I found some suggestions how to implement the <a href=\"http://norvig.com/spell-correct.html\" rel=\"nofollow noreferrer\">spell checker</a>, but I am not sure where to insert the spell checker and I reckon that it may slow down the search in the case a very large text.</p>\n\n<p>As another option, it has been suggested to use a wild card with regex and insert in the potential locations of confusion (<strong>conceptually</strong> written)</p>\n\n<pre><code>.findall('c*t*l*pr*m')\n</code></pre>\n\n<p>However I am not convinced that I can capture all possible problematic cases. I tried some out-of-the-box spell checkers, but my texts are some-what specific and I need a spell checker that 'knows' my domain (medical domain).</p>\n\n<p><strong>QUESTION</strong></p>\n\n<p>Is there any efficient way to extract keywords from a text including spelling mistakes?</p>\n"}, {"tags": ["python", "homebrew"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10231185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4fa823a7e99d07b772e5de79c8b7d54?s=128&d=identicon&r=PG&f=1", "display_name": "Doe", "link": "https://stackoverflow.com/users/10231185/doe"}, "edited": false, "score": 0, "creation_date": 1534365683, "post_id": 51865927, "comment_id": 90684406, "body": "Thanks! Using python3 and pip3 make it work as intended! Sorry, I am new to both Mac and python, so where do I check the $PATH configuration and will changing it make 3.7 the default version used?"}, {"owner": {"reputation": 1037, "user_id": 2616268, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3L4bu.jpg?s=128&g=1", "display_name": "Omar Gonzalez", "link": "https://stackoverflow.com/users/2616268/omar-gonzalez"}, "reply_to_user": {"reputation": 1, "user_id": 10231185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4fa823a7e99d07b772e5de79c8b7d54?s=128&d=identicon&r=PG&f=1", "display_name": "Doe", "link": "https://stackoverflow.com/users/10231185/doe"}, "edited": false, "score": 0, "creation_date": 1534366682, "post_id": 51865927, "comment_id": 90684819, "body": "@Doe your welcome, this is a good article to get you started with configuring your $PATH: <a href=\"https://coolestguidesontheplanet.com/add-shell-path-osx/\" rel=\"nofollow noreferrer\">coolestguidesontheplanet.com/add-shell-path-osx</a>"}], "tags": [], "owner": {"reputation": 1037, "user_id": 2616268, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3L4bu.jpg?s=128&g=1", "display_name": "Omar Gonzalez", "link": "https://stackoverflow.com/users/2616268/omar-gonzalez"}, "is_accepted": false, "score": 0, "last_activity_date": 1534364798, "creation_date": 1534364798, "answer_id": 51865927, "question_id": 51865823, "link": "https://stackoverflow.com/questions/51865823/homebrew-not-installing-the-correct-version-of-python/51865927#51865927", "title": "Homebrew not installing the correct version of Python", "body": "<p>Most likely you need to call python 3.7 commands with </p>\n\n<pre><code>python3\n</code></pre>\n\n<p>and install packages with </p>\n\n<pre><code>pip3 \n</code></pre>\n\n<p>as well, also check your $PATH configuration, as is it usually takes the OSx python as default in Macs </p>\n"}], "owner": {"reputation": 1, "user_id": 10231185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4fa823a7e99d07b772e5de79c8b7d54?s=128&d=identicon&r=PG&f=1", "display_name": "Doe", "link": "https://stackoverflow.com/users/10231185/doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 20, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534364798, "creation_date": 1534364234, "question_id": 51865823, "link": "https://stackoverflow.com/questions/51865823/homebrew-not-installing-the-correct-version-of-python", "title": "Homebrew not installing the correct version of Python", "body": "<p>I was trying to install Python 3.7 using homebrew with \"brew install python\". When I check the version of python installed, I get python 2.7.10. Anyone know how to fix this?</p>\n"}, {"tags": ["python", "pandas", "numpy", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 8423, "user_id": 463796, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/Yihjq.png?s=128&g=1", "display_name": "w-m", "link": "https://stackoverflow.com/users/463796/w-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1534412335, "creation_date": 1534412335, "answer_id": 51873982, "question_id": 51865821, "link": "https://stackoverflow.com/questions/51865821/cleaning-up-csv-data-w-pandas-is-there-a-way-to-find-first-obj-column-that-can/51873982#51873982", "title": "Cleaning up csv data, w/ pandas is there a way to find first obj column that can be converted to #?", "body": "<p>Pandas tables are not be a good fit to deal with variable-length data. Consider not putting the url parts in a pandas table, and instead working with Python lists and normal Python functions.</p>\n\n<pre><code>parts = map(lambda s: s.split(\"/\"), urls)\n</code></pre>\n\n<p>You can have a Python function to sort the url parts list into two piles. And then you can work on the first pile to find the first numeric value and the last valid value. Then put those into a DataFrame.</p>\n\n<p>If you're set on using Pandas, you could write it something like this:</p>\n\n<pre><code>has_numeric = df.apply(lambda x: x.str.isnumeric().any(), axis=1)\ndf1 = df[has_numeric]\ndf2 = df[~has_numeric]\nnums = df1.apply(lambda x: x[(x.str.isnumeric() == True).idxmax()], axis=1)\nends = df1.apply(lambda row: row[~row.isnull()].iloc[-1], axis=1)\n\n\n&gt;&gt;&gt; df\n                          0                1         2                       3\n0                  11100411  h_aa_kk_mm.html      None                    None\n1                       nnn         51200411  aa_bb_cc    k_yxxxxxxx_mmmm.html\n2  11100411_h_aa_kk_mm.html             None      None                    None\n3                       hmn          bb_a_34  76800616         999ccc-ddd.html\n4                       nnn         92503462         v  66631xxxxffffkkka.html\n\n&gt;&gt;&gt; df1\n          0                1         2                       3\n0  11100411  h_aa_kk_mm.html      None                    None\n1       nnn         51200411  aa_bb_cc    k_yxxxxxxx_mmmm.html\n3       hmn          bb_a_34  76800616         999ccc-ddd.html\n4       nnn         92503462         v  66631xxxxffffkkka.html\n\n&gt;&gt;&gt; df2\n                          0     1     2     3\n2  11100411_h_aa_kk_mm.html  None  None  None\n\n&gt;&gt;&gt; nums \n0    11100411\n1    51200411\n3    76800616\n4    92503462\ndtype: object\n\n&gt;&gt;&gt; ends\n0           h_aa_kk_mm.html\n1      k_yxxxxxxx_mmmm.html\n3           999ccc-ddd.html\n4    66631xxxxffffkkka.html\ndtype: object\n</code></pre>\n"}], "owner": {"reputation": 762, "user_id": 9991947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b1a62cfbaa3d73f3823e381741e7dae?s=128&d=identicon&r=PG&f=1", "display_name": "WIT", "link": "https://stackoverflow.com/users/9991947/wit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 51873982, "answer_count": 1, "score": 1, "last_activity_date": 1534412335, "creation_date": 1534364232, "question_id": 51865821, "link": "https://stackoverflow.com/questions/51865821/cleaning-up-csv-data-w-pandas-is-there-a-way-to-find-first-obj-column-that-can", "title": "Cleaning up csv data, w/ pandas is there a way to find first obj column that can be converted to #?", "body": "<p>I am reading a csv file to a pandas df. each row is a long url that i split by forward slashes. </p>\n\n<p>In some cases, when i split the url there are more columns populated because the url has more forward slashes and the pattern is different. I am trying to find the first column that can convert to an integer and delete the columns before. the column won't be in integer form, it will be in object form as it was a string that can converted to an int (or to a float and then converted to an int). </p>\n\n<p>Ultimately, I want to extract that numeric column and the last column (which is the end of the url) and everything in the middle can be deleted. In some cases there won't be a column that contains an is_numeric value, in which case I just want to extract the last column. </p>\n\n<p>For example, after splitting the url I get a dataframe like the following: [in this example there are 4 columns, in mine there are 6, but it's the same thing i only want the first numeric and then the last column, and if there is not a first numeric column i just want the last column that ends in .html]</p>\n\n<pre><code>+--------------------------+-----------------+----------+------------------------+\n|            1             |        2        |    3     |           4            |\n+--------------------------+-----------------+----------+------------------------+\n| 11100411                 | h_aa_kk_mm.html | None     | None                   |\n| nnn                      | 51200411        | aa_bb_cc | k_yxxxxxxx_mmmm.html   |\n| 11100411_h_aa_kk_mm.html | None            | None     | None                   |\n| hmn                      | bb_a_34         | 76800616 | 999ccc-ddd.html        |\n| nnn                      | 92503462        | v        | 66631xxxxffffkkka.html |\n</code></pre>\n\n<p>In this case, the result i would want is: </p>\n\n<pre><code>+----------+--------------------------+\n|    1     |            2             |\n+----------+--------------------------+\n| 11100411 | h_aa_kk_mm.html          |\n| 51200411 | k_yxxxxxxx_mmmm.html     |\n| 76800616 | 999ccc-ddd.html          |\n| 92503462 | 66631xxxxffffkkka.html   |\n+----------+--------------------------+\n</code></pre>\n\n<p>df2  ..  </p>\n\n<pre><code> None     | 11100411_h_aa_kk_mm.html |\n</code></pre>\n\n<p>In the case where there is numeric column, those can be extracted into their own dataframe and i can deal with them separately.</p>\n\n<p>I know i can do this by testing each case and column and using is_numeric, but the problem is if i do is_numeric i risk overwriting the end part of the html which i need and have to inefficiently check each scenario. the dataframe is currently 300,000 rows, so the easiest way where i dont confuse myself and lose track of the different cases is important as it's imperative i dont lose any of the data.</p>\n\n<p>[I have read every stack overflow post i can find about this, but the case is slightly different and i tried various different ways for hours before posting]\nThank you.</p>\n"}, {"tags": ["python", "python-3.x", "python-2.7", "scripting", "devops"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1534364806, "post_id": 51865819, "comment_id": 90684066, "body": "I&#39;ve fixed (?) your indentation.  However, without the input files, it&#39;s not entirely clear what&#39;s happening here."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1534364892, "post_id": 51865819, "comment_id": 90684107, "body": "I think this is simply a matter of adding a line feed where you want it.  Change your output statement to <code>fileout.writeln(val1)</code>"}, {"owner": {"reputation": 19, "user_id": 9969305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9fcdb482ccc13acf1714f00ef6e2749?s=128&d=identicon&r=PG&f=1", "display_name": "parker", "link": "https://stackoverflow.com/users/9969305/parker"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1534365545, "post_id": 51865819, "comment_id": 90684359, "body": "I am getting this error"}, {"owner": {"reputation": 19, "user_id": 9969305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9fcdb482ccc13acf1714f00ef6e2749?s=128&d=identicon&r=PG&f=1", "display_name": "parker", "link": "https://stackoverflow.com/users/9969305/parker"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1534365558, "post_id": 51865819, "comment_id": 90684367, "body": "Traceback (most recent call last):   File &quot;8filecomp.py&quot;, line 25, in &lt;module&gt;     fileout.writeln(val1) AttributeError: &#39;file&#39; object has no attribute &#39;writeln&#39;"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1534366169, "post_id": 51865819, "comment_id": 90684627, "body": "Ah ... try <code>fileout.write(val1 + &#39;\\n&#39;)</code>.  My apologies -- wrong package."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 9969305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9fcdb482ccc13acf1714f00ef6e2749?s=128&d=identicon&r=PG&f=1", "display_name": "parker", "link": "https://stackoverflow.com/users/9969305/parker"}, "edited": false, "score": 0, "creation_date": 1534366128, "post_id": 51866033, "comment_id": 90684607, "body": "Rohit you made my day man. Thank you somuch. It worked as i expected. Awesome man cheers!"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1534366290, "post_id": 51866033, "comment_id": 90684677, "body": "Why are you writing the header line for every match?  Why are you using 0/1 values instead of the natural Booleans?"}, {"owner": {"reputation": 733, "user_id": 6517513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd19b13b216db8d789c46cd15c38544c?s=128&d=identicon&r=PG&f=1", "display_name": "Rohith", "link": "https://stackoverflow.com/users/6517513/rohith"}, "edited": false, "score": 0, "creation_date": 1534366441, "post_id": 51866033, "comment_id": 90684727, "body": "The way you have edited, the header &quot;Match in both the lists&quot; will be printed even if there are no matches. That&#39;s why I have added an if condition, so that the header is printed only the first time a match is found."}], "tags": [], "owner": {"reputation": 733, "user_id": 6517513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd19b13b216db8d789c46cd15c38544c?s=128&d=identicon&r=PG&f=1", "display_name": "Rohith", "link": "https://stackoverflow.com/users/6517513/rohith"}, "is_accepted": true, "score": 1, "last_activity_date": 1534366859, "last_edit_date": 1534366859, "creation_date": 1534365266, "answer_id": 51866033, "question_id": 51865819, "link": "https://stackoverflow.com/questions/51865819/how-to-get-the-following-ouput-in-python/51866033#51866033", "title": "How to get the following ouput in python", "body": "<p>Check if this works. For writing in separate lines, you can use <code>\"\\n\"</code>. And id you would want to put the phrase \"Match in both the lists\" only once, you will need to put an additional <code>if</code> statement.</p>\n\n<pre><code>test = 0\nfileout = open('9output.txt', 'w')\nfor val1 in lines1:\n    for val2 in lines2:\n        if val1 == val2:\n            if test == 0:\n                fileout.write(\"Match in both the lists\")\n                fileout.write(val1+\"\\n\")\n                test = 1\n            else:\n                fileout.write(val1+\"\\n\")\nfileout.close()\nif test == 0:\n    print(\"No matches found!\")\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 9969305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9fcdb482ccc13acf1714f00ef6e2749?s=128&d=identicon&r=PG&f=1", "display_name": "parker", "link": "https://stackoverflow.com/users/9969305/parker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 51866033, "answer_count": 1, "score": -1, "last_activity_date": 1534366859, "creation_date": 1534364223, "last_edit_date": 1534364722, "question_id": 51865819, "link": "https://stackoverflow.com/questions/51865819/how-to-get-the-following-ouput-in-python", "title": "How to get the following ouput in python", "body": "<p>I am trying to compare two text files which has subnets and be able to get the outpu.\nBut I need the output in proper format.(line by line)\nI also want to add a print statement as \"Match in both the lists\"</p>\n\n<p>Currently I am getting the output as:</p>\n\n<pre><code>2.144.0.0/142.176.0.0/12root@vagrant-ubuntu\n</code></pre>\n\n<p>My expected output:</p>\n\n<pre><code>Match in both the lists\n2.144.0.0/14\n2.176.0.0/12\nroot@vagrant-ubuntu\n</code></pre>\n\n<p>Code</p>\n\n<pre><code>#Open the first file and read in each line as\n#a value in a list called lines1. After reading\n#each line, then strip off any extra whitespace\n#or typeset characters.\nwith open('6output.txt') as f1:\n    lines1 = f1.readlines()\n    lines1 = [x.strip() for x in lines1]\nf1.close()\n#Open the second file and read in each line as\n#a value in a list called lines2. After reading\n#each line, then strip off any extra whitespace\n#or typeset characters.\nwith open('7subnet.txt') as f2:\n    lines2 = f2.readlines()\n    lines2 = [x.strip() for x in lines2]\nf2.close()\n#Loop over each element in the two lists. If a\n#match is found, then we write the value to the\n#output file. If there is no match, output info.\ntest = 0\nfileout = open('9output.txt', 'w')\nfor val1 in lines1:\n    for val2 in lines2:\n        if val1 == val2:\n            fileout.write(val1)\ntest = 1\nfileout.close()\nif test == 0:\n    print(\"No matches found!\")\n</code></pre>\n"}, {"tags": ["python", "xml", "python-3.x", "elementtree"], "comments": [{"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 2, "creation_date": 1534364297, "post_id": 51865794, "comment_id": 90683833, "body": "Read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a> for tips to learn how to debug your code."}, {"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 1, "creation_date": 1534364522, "post_id": 51865794, "comment_id": 90683940, "body": "Your indentation is wrong (currently this is just a syntax error). Please fix it, so we can know what exactly your code does. Also, you have a <code>return</code> statement, but this is not a function. Please complete the code so that it works. Please read <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a> for more info about how to ask questions. Anyway, in the end, I believe your error (or at least one of them) is that you have <code>return</code> inside the <code>for</code> loop, so the loop finishes prematurely."}, {"owner": {"reputation": 123, "user_id": 10231148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57f32db18934ad30afce46fcac6da526?s=128&d=identicon&r=PG&f=1", "display_name": "RRg", "link": "https://stackoverflow.com/users/10231148/rrg"}, "edited": false, "score": 0, "creation_date": 1534365344, "post_id": 51865794, "comment_id": 90684278, "body": "Hi, I did modify the indentation and also commented the return statement. it did solve one issue but still only the first file in the directory is being parsed and none other."}], "owner": {"reputation": 123, "user_id": 10231148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57f32db18934ad30afce46fcac6da526?s=128&d=identicon&r=PG&f=1", "display_name": "RRg", "link": "https://stackoverflow.com/users/10231148/rrg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1534380593, "creation_date": 1534364120, "last_edit_date": 1592644375, "question_id": 51865794, "link": "https://stackoverflow.com/questions/51865794/parse-xml-files-from-a-directory-using-elementtree", "title": "Parse xml files from a directory using elementtree", "body": "<h1>I am a newbie in python and I am trying to parse all the xml files in a directory. I wrote the following code, but it's just parsing the first file in the directory, however, it is printing the second file from the directory,but it doesnt parse that file.</h1>\n<pre><code>content_list=[]\nprint(&quot;ID \\t\\t PMID &quot;)\nfor file in os.listdir(&quot;directorypath&quot;):\n        try:\n            if file.endswith(&quot;.xml&quot;):\n              print(&quot;XML file found:\\t&quot;, file)\n              print(&quot;PMID&quot;)\n              tree = ET.parse(&quot;directorypath&quot;+file)\n              doc = tree.getroot()\n              ID= 0\n              for PMID in doc.iter('PMID'):\n                file1 = (ET.tostring(PMID, encoding='utf8').decode('utf8'))\n                filename = file1[56:(len(file1))]\n                filename2 = filename.split(&quot;&lt;&quot;)[0]\n                print(filename2)\n                #ID = ID + 1\n                #print(ID, '\\t',filename2)\n                #content_list.append((ID, filename2))\n              #return (content_list)\n        except Exception as e:\n               print(&quot;ERROR&quot;, e)\n</code></pre>\n"}, {"tags": ["python", "azure", "containers", "blob"], "answers": [{"comments": [{"owner": {"reputation": 1207, "user_id": 1704282, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/74521b29996d85bfb60333d41efa23ae?s=128&d=identicon&r=PG", "display_name": "pelos", "link": "https://stackoverflow.com/users/1704282/pelos"}, "edited": false, "score": 1, "creation_date": 1534367032, "post_id": 51866183, "comment_id": 90684954, "body": "thanks murray, I expect to be more than 10gigs,  do you have an example on how are you using get_blob_to_stream?   instead using a azure function, should I set up an Jenkins job?"}, {"owner": {"reputation": 10750, "user_id": 2061133, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/pgg8z.png?s=128&g=1", "display_name": "Murray Foxcroft", "link": "https://stackoverflow.com/users/2061133/murray-foxcroft"}, "reply_to_user": {"reputation": 1207, "user_id": 1704282, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/74521b29996d85bfb60333d41efa23ae?s=128&d=identicon&r=PG", "display_name": "pelos", "link": "https://stackoverflow.com/users/1704282/pelos"}, "edited": false, "score": 0, "creation_date": 1534367761, "post_id": 51866183, "comment_id": 90685241, "body": "I don&#39;t think your 10GB job is going to fit in the consumption plan constraints. You will have to use an App Service plan (i.e. a VM backing your functions). Another option would be using Azure Batch. I dont have Python to hand, only C#:var blob = blobContainer.GetBlobReference(inputBlobName);  using (var sr = new StreamReader(await blob.OpenReadAsync())) { \tstring firstline = sr.ReadLine() ?? &quot;&quot;; \t// Do your stuff   \twhile (sr.Peek() &gt;= 0) \t{ \t\tstring nextLine = sr.ReadLine(); \t\t// Do your stuff \t \t} }"}], "tags": [], "owner": {"reputation": 10750, "user_id": 2061133, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/pgg8z.png?s=128&g=1", "display_name": "Murray Foxcroft", "link": "https://stackoverflow.com/users/2061133/murray-foxcroft"}, "is_accepted": false, "score": 1, "last_activity_date": 1534365979, "creation_date": 1534365979, "answer_id": 51866183, "question_id": 51865769, "link": "https://stackoverflow.com/questions/51865769/how-to-read-a-big-csv-file-in-azure-blog/51866183#51866183", "title": "how to read a big csv file in azure blog", "body": "<p>I am not sure how huge your huge is, but for very large files > 200MB or so I would use a streaming approach. The call <code>get_blob_to_text</code> downloads the entire file in one go and places it all in memory. Using <code>get_blob_to_stream</code> allows you to read line by line and process individually, with only the current line and your working set in memory. This is very fast and very memory efficient. We use a similar approach to split 1GB files in to smaller files. 1GB takes a couple of minutes to process. </p>\n\n<p>Keep in mind that depending on your function app service plan the maximum execution time is 5 mins by default (you can increase this to 10 minutes in the hosts.json). Also, on consumption plan, you are limited to 1.5 GB memory on each function service (not per function - for all functions in your function PaaS). So be aware of these limits.</p>\n\n<p><a href=\"https://docs.microsoft.com/en-us/python/api/azure-storage-blob/azure.storage.blob.baseblobservice.baseblobservice?view=azure-python#get-blob-to-stream\" rel=\"nofollow noreferrer\">From the docs</a>: </p>\n\n<pre><code>get_blob_to_stream(container_name, blob_name, stream, snapshot=None, start_range=None, end_range=None, validate_content=False, progress_callback=None, max_connections=2, lease_id=None, if_modified_since=None, if_unmodified_since=None, if_match=None, if_none_match=None, timeout=None)\n</code></pre>\n\n<p><a href=\"https://blog.accubits.com/streaming-gzip-data-azure-blob-storage/\" rel=\"nofollow noreferrer\">Here is a good read on the topic</a> </p>\n"}, {"comments": [{"owner": {"reputation": 1084, "user_id": 6511361, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/85289c00deba068d2a967bb5eddf597d?s=128&d=identicon&r=PG&f=1", "display_name": "Yannick Einsweiler", "link": "https://stackoverflow.com/users/6511361/yannick-einsweiler"}, "edited": false, "score": 0, "creation_date": 1550944433, "post_id": 51880265, "comment_id": 96461947, "body": "Old post but if you want to use functions still, you could create 10 of them, each processing 1GB of bytes range, if applicable. E.g. if blob is 6GB, function7, 8, 9 and 10 will just give up. Nice thing is that there run in parallel."}], "tags": [], "owner": {"reputation": 1207, "user_id": 1704282, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/74521b29996d85bfb60333d41efa23ae?s=128&d=identicon&r=PG", "display_name": "pelos", "link": "https://stackoverflow.com/users/1704282/pelos"}, "is_accepted": false, "score": 1, "last_activity_date": 1561088810, "last_edit_date": 1561088810, "creation_date": 1534432135, "answer_id": 51880265, "question_id": 51865769, "link": "https://stackoverflow.com/questions/51865769/how-to-read-a-big-csv-file-in-azure-blog/51880265#51880265", "title": "how to read a big csv file in azure blog", "body": "<p>After reading other websites and modifying some of the code on the link above,</p>\n\n<pre><code>import io\nimport datetime\nfrom azure.storage.blob import BlockBlobService\n\nacc_name = 'myaccount'\nacc_key = 'my key'\ncontainer = 'storeai'\nblob = \"orderingai2.csv\"\n\nblock_blob_service = BlockBlobService(account_name=acc_name, account_key=acc_key)\nprops = block_blob_service.get_blob_properties(container, blob)\nblob_size = int(props.properties.content_length)\nindex = 0\nchunk_size =  104,858 # = 0.1meg don't make this to big or you will get memory error\noutput = io.BytesIO()\n\n\ndef worker(data):\n    print(data)\n\n\nwhile index &lt; blob_size:\n    now_chunk = datetime.datetime.now()\n    block_blob_service.get_blob_to_stream(container, blob, stream=output, start_range=index, end_range=index + chunk_size - 1, max_connections=50)\n    if output is None:\n        continue\n    output.seek(index)\n    data = output.read()\n    length = len(data)\n    index += length\n    if length &gt; 0:\n        worker(data)\n        if length &lt; chunk_size:\n          break\n    else:\n      break\n</code></pre>\n"}], "owner": {"reputation": 1207, "user_id": 1704282, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/74521b29996d85bfb60333d41efa23ae?s=128&d=identicon&r=PG", "display_name": "pelos", "link": "https://stackoverflow.com/users/1704282/pelos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1229, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1561088810, "creation_date": 1534364009, "question_id": 51865769, "link": "https://stackoverflow.com/questions/51865769/how-to-read-a-big-csv-file-in-azure-blog", "title": "how to read a big csv file in azure blog", "body": "<p>I will get a HUGE csv file as blob in azure, and I need to parse line by line, in an azure function</p>\n\n<p>I am reading each of the blobs in my container and then I get is as a string, but I think that load everything, and then I split it by new lines.\nis there a smarter way to do this?</p>\n\n<pre><code>container_name = \"test\"\nblock_blob_service = BlockBlobService(account_name=container_name, account_key=\"mykey\")\na = block_blob_service.get_container_properties(container_name)\ngenerator = block_blob_service.list_blobs(container_name)\n\nfor b in generator:\n    r = block_blob_service.get_blob_to_text(container_name, b.name)\n    for i in r.content.split(\"\\n\"):\n        print(i)\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 1092, "user_id": 4151626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NZVgT.jpg?s=128&g=1", "display_name": "ergohack", "link": "https://stackoverflow.com/users/4151626/ergohack"}, "edited": false, "score": 1, "creation_date": 1534364888, "post_id": 51865751, "comment_id": 90684104, "body": "Sounds like a homework problem, ... if so, do you really want to miss out on honing your own programming skills.  Most learn through failure (i.e. fail often enough to succeed).  A barrier to completing any assignment is being paralyzed by perfection.  Do it badly first, then improve upon it.  Write it in 50 lines, verify correctness, then work to condense the code while maintaining correctness."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 10189156, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FPMlH1FpCl8/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qksJ2h1xgrny8Q3kilnl9k8ZFCHQ/mo/photo.jpg?sz=128", "display_name": "Kyle", "link": "https://stackoverflow.com/users/10189156/kyle"}, "edited": false, "score": 0, "creation_date": 1534386554, "post_id": 51865802, "comment_id": 90689384, "body": "When I use this method the values are inverted. Any idea why?"}], "tags": [], "owner": {"reputation": 1202, "user_id": 9937273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xJAip.png?s=128&g=1", "display_name": "Don Thousand", "link": "https://stackoverflow.com/users/9937273/don-thousand"}, "is_accepted": false, "score": 0, "last_activity_date": 1534364142, "creation_date": 1534364142, "answer_id": 51865802, "question_id": 51865751, "link": "https://stackoverflow.com/questions/51865751/pandas-sort-each-row-and-print-the-top-5/51865802#51865802", "title": "Pandas sort each row and print the top 5", "body": "<p>Try the following:</p>\n\n<pre><code>import numpy as np\ndf = pd.DataFrame(np.sort(df.values, axis=0), index=df.index, columns=df.columns)\nprint(df.iloc[:5])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1202, "user_id": 9937273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xJAip.png?s=128&g=1", "display_name": "Don Thousand", "link": "https://stackoverflow.com/users/9937273/don-thousand"}, "edited": false, "score": 0, "creation_date": 1534376201, "post_id": 51865849, "comment_id": 90687401, "body": "I do think he wants to first sort the dataframe."}], "tags": [], "owner": {"reputation": 733, "user_id": 6517513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd19b13b216db8d789c46cd15c38544c?s=128&d=identicon&r=PG&f=1", "display_name": "Rohith", "link": "https://stackoverflow.com/users/6517513/rohith"}, "is_accepted": true, "score": 0, "last_activity_date": 1534364375, "creation_date": 1534364375, "answer_id": 51865849, "question_id": 51865751, "link": "https://stackoverflow.com/questions/51865751/pandas-sort-each-row-and-print-the-top-5/51865849#51865849", "title": "Pandas sort each row and print the top 5", "body": "<p>If you rather want to print out each column separately, this should work</p>\n\n<pre><code>df.apply(lambda x: print(x.sort_values(ascending=False).head(5)), axis=0)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1202, "user_id": 9937273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xJAip.png?s=128&g=1", "display_name": "Don Thousand", "link": "https://stackoverflow.com/users/9937273/don-thousand"}, "edited": false, "score": 0, "creation_date": 1534376165, "post_id": 51866927, "comment_id": 90687392, "body": "This is honestly a pretty poor solution, since looping is not only constrained to the size of your given example, but it also is far slower than the other given answers"}, {"owner": {"reputation": 63, "user_id": 10189156, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FPMlH1FpCl8/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qksJ2h1xgrny8Q3kilnl9k8ZFCHQ/mo/photo.jpg?sz=128", "display_name": "Kyle", "link": "https://stackoverflow.com/users/10189156/kyle"}, "reply_to_user": {"reputation": 1202, "user_id": 9937273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xJAip.png?s=128&g=1", "display_name": "Don Thousand", "link": "https://stackoverflow.com/users/9937273/don-thousand"}, "edited": false, "score": 0, "creation_date": 1534377257, "post_id": 51866927, "comment_id": 90687618, "body": "Still learning. Thanks for the feedback."}], "tags": [], "owner": {"reputation": 63, "user_id": 10189156, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FPMlH1FpCl8/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qksJ2h1xgrny8Q3kilnl9k8ZFCHQ/mo/photo.jpg?sz=128", "display_name": "Kyle", "link": "https://stackoverflow.com/users/10189156/kyle"}, "is_accepted": false, "score": 0, "last_activity_date": 1534369762, "creation_date": 1534369762, "answer_id": 51866927, "question_id": 51865751, "link": "https://stackoverflow.com/questions/51865751/pandas-sort-each-row-and-print-the-top-5/51866927#51866927", "title": "Pandas sort each row and print the top 5", "body": "<p>Answered my own question... This ended up working. Perhaps there is a more concise way to do it. </p>\n\n<pre><code>index = df.iloc[:,0]\nfor i in range(1,25):\n        a = exp.iloc[:,(i)]\n        b = a.sort_values(ascending=False)\n        c = pd.DataFrame(data=b)\n        print(c.head().join(index))\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 10189156, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FPMlH1FpCl8/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qksJ2h1xgrny8Q3kilnl9k8ZFCHQ/mo/photo.jpg?sz=128", "display_name": "Kyle", "link": "https://stackoverflow.com/users/10189156/kyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1005, "favorite_count": 0, "closed_date": 1534370039, "accepted_answer_id": 51865849, "answer_count": 3, "score": 1, "last_activity_date": 1534369762, "creation_date": 1534363898, "question_id": 51865751, "link": "https://stackoverflow.com/questions/51865751/pandas-sort-each-row-and-print-the-top-5", "closed_reason": "Duplicate", "title": "Pandas sort each row and print the top 5", "body": "<p>I am trying to sort 25 columns individually and then print out the top 5 rows from each column. I assume that I will need to use a loop for this, but can't seem to figure it out.</p>\n\n<p>I currently have:</p>\n\n<p><code>df.sort_values(by=['A'], ascending=False)\n df.head()</code></p>\n\n<p><code>df.sort_values(by=['B'], ascending=False)\n df.head()</code></p>\n\n<p><code>df.sort_values(by=['C'], ascending=False)\n df.head() ...</code></p>\n\n<p>The goal is to repeat this over many columns without having 25 lines of code. </p>\n"}, {"tags": ["python", "sqlalchemy", "foreign-keys", "many-to-one"], "comments": [{"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 1, "creation_date": 1534363879, "post_id": 51865716, "comment_id": 90683647, "body": "Change the <code>statusObject</code> instead?"}, {"owner": {"reputation": 7448, "user_id": 865883, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/93b1d699b8b40616d823e50e096012c2?s=128&d=identicon&r=PG&f=1", "display_name": "funseiki", "link": "https://stackoverflow.com/users/865883/funseiki"}, "reply_to_user": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1534364511, "post_id": 51865716, "comment_id": 90683936, "body": "@IljaEveril&#228; yep, that&#39;s definitely an option. Doing so would introduce some complexity to the Fruit, though, since it would need to do a lookup to figure out which status name is associated with what FruitStatus. It&#39;s not difficult, but it&#39;s a little weird if I wanted to keep Fruit from knowing about the statusObject (and defeats the reason I&#39;m using the association proxy in the first place). I&#39;ll definitely do this and just remove the association proxy altogether if nothing else comes up."}], "owner": {"reputation": 7448, "user_id": 865883, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/93b1d699b8b40616d823e50e096012c2?s=128&d=identicon&r=PG&f=1", "display_name": "funseiki", "link": "https://stackoverflow.com/users/865883/funseiki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 237, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1534363707, "creation_date": 1534363707, "question_id": 51865716, "link": "https://stackoverflow.com/questions/51865716/sqlalchemy-how-update-a-reference-to-a-foreign-table-via-associationproxy", "title": "SqlAlchemy - How update a reference to a foreign table via associationproxy?", "body": "<p>I have an <a href=\"http://docs.sqlalchemy.org/en/latest/orm/extensions/associationproxy.html\" rel=\"nofollow noreferrer\">association_proxy</a> set up on a <code>Fruit</code> class that references a <code>FruitStatus</code> class: <code>Fruit.status = association_proxy('statusObject', 'name')</code>. I'd like to be able to change a Fruit's <code>status</code> field without there being an <code>UPDATE</code> on the <code>FruitStatuses</code> table.</p>\n\n<p>Currently, if I instantiate a new Fruit with something like, then change the status, the row in FruitStatuses gets updated, instead of the foreign key in Fruit being updated:</p>\n\n<pre><code># Create an apple that's 'good'\napple = Fruit(name='apple', status='good')\nsession.merge(apple)\nsession.commit()\n\n# Shows: (1, good), (2, rotten)\nprint(session.query(FruitStatus).all())\n\n# Update the status to 'rotten'\napple.status = 'rotten'\nsession.merge(apple)\nsession.commit()\nprint(session.query(FruitStatus).all())\n\n# Shows: (1, rotten), (2, rotten)\n</code></pre>\n\n<p>I'd like for the reference to change to the row whose foreign key is 2, rather than update the original row.</p>\n\n<p>Below is a full working example.</p>\n\n<pre><code>from sqlalchemy import *\nfrom sqlalchemy.orm import *\nfrom sqlalchemy.ext.associationproxy import association_proxy\n\nmetadata = MetaData()\n\nfruitStatusTable = Table(\n    'FruitStatuses', metadata,\n    Column('status_id', Integer, primary_key=True, unique=True),\n    Column('name', String(256))\n)\n\nfruitsTable = Table(\n    'Fruits', metadata,\n    Column('fruit_id', Integer, primary_key=True),\n    Column('status_id', Integer, ForeignKey('FruitStatuses.status_id')),\n    Column('name', String(256)),\n    Column('revision', Integer, nullable=False)\n)\n\nclass FruitStatus(object):\n    def __init__(self, *args, **kwds):\n        for key in kwds:\n            setattr(self, key, kwds[key])\n            pass\n        return\n    def __repr__(self):\n        return \"{}&lt;status_id={}, name={}&gt;\".format(self.__class__.__name__, self.status_id, self.name)\n\nclass Fruit(object):\n    def __init__(self, *args, **kwds):\n        for key in kwds:\n            setattr(self, key, kwds[key])\n            pass\n        return\n    def __repr__(self):\n        ret = []\n        for key in sorted(self.__dict__):\n            if key == '_sa_instance_state':\n                continue\n            ret.append(\"{}: {}\".format(key, self.__dict__[key]))\n            pass\n        return \"{}&lt;{}&gt;\".format(self.__class__.__name__, ret)\n\n\nengine = create_engine('sqlite://')\nmetadata.create_all(engine)\nSession = sessionmaker(bind=engine)\nsession = Session()\n\nmapper(FruitStatus, fruitStatusTable)\n\ngoodStatus = FruitStatus(status_id=1, name='good')\nrottenStatus = FruitStatus(status_id=2, name='rotten')\nsession.add(goodStatus)\nsession.add(rottenStatus)\nsession.commit()\n\n#mapper(Resource, resourcesTable)\nmapper(Fruit, fruitsTable,\n    version_id_col=fruitsTable.c.revision,\n    properties={\n        \"statusObject\": relationship(FruitStatus)\n    })\nFruit.status = association_proxy(\"statusObject\", 'name', creator=lambda status: goodStatus if status=='good' else rottenStatus)\n\napple = Fruit(name='apple', status='good')\napple = session.merge(apple)\nsession.commit()\n\nprint(\"Getting statuses before change\")\nprint(session.query(FruitStatus).all())\n\napple.status = 'rotten'\nsession.add(apple)\nsession.commit()\n\nprint(\"Getting statuses after change\")\nprint(session.query(FruitStatus).all())\n</code></pre>\n"}, {"tags": ["python", "pandas", "dictionary", "mapping"], "comments": [{"owner": {"reputation": 945, "user_id": 7175945, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154161857213129/picture?type=large", "display_name": "Dascienz", "link": "https://stackoverflow.com/users/7175945/dascienz"}, "edited": false, "score": 0, "creation_date": 1534364221, "post_id": 51865705, "comment_id": 90683800, "body": "If what you&#39;re after is a mapping of your <code>table</code> values to categorical pairs in <code>df</code> why don&#39;t you try the following: <code>table.unstack().reset_index()</code>. This will melt your table down into the 9 values you want to manipulate."}], "answers": [{"tags": [], "owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "is_accepted": false, "score": 3, "last_activity_date": 1534363993, "creation_date": 1534363993, "answer_id": 51865767, "question_id": 51865705, "link": "https://stackoverflow.com/questions/51865705/create-column-in-pandas-based-on-two-other-columns-and-table/51865767#51865767", "title": "Create column in pandas based on two other columns and table", "body": "<p>You can use a <code>merge</code> for this:</p>\n\n<pre><code>df2 = (df.merge(table.stack().reset_index(),\n                left_on=['A','B'], right_on=['level_1', 'level_0'])\n       .drop(['level_0', 'level_1'], 1)\n       .rename(columns={0:'C'}))\n\n&gt;&gt;&gt; df2\n        A      B  C\n0    High   Blue  1\n1    High  Green  4\n2     Low    Red  9\n3     Low    Red  9\n4  Middle   Blue  2\n5     Low   Blue  3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 5, "last_activity_date": 1534364213, "creation_date": 1534364213, "answer_id": 51865817, "question_id": 51865705, "link": "https://stackoverflow.com/questions/51865705/create-column-in-pandas-based-on-two-other-columns-and-table/51865817#51865817", "title": "Create column in pandas based on two other columns and table", "body": "<p><code>pandas</code> <code>lookup</code></p>\n\n<pre><code>table.lookup(df.B,df.A)\nOut[248]: array([1, 4, 9, 2, 3, 9], dtype=int64)\n\n#table['c']=table.lookup(df.B,df.A)\n</code></pre>\n\n<p>Or <code>df.apply(lambda x : table.loc[x['B'],x['A']],1)</code> personally do not like <code>apply</code> </p>\n"}], "owner": {"reputation": 143, "user_id": 8175182, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/62a1422470ddcb6b1642fcd694f3891e?s=128&d=identicon&r=PG&f=1", "display_name": "Jelmerd", "link": "https://stackoverflow.com/users/8175182/jelmerd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 51865817, "answer_count": 2, "score": 1, "last_activity_date": 1534364213, "creation_date": 1534363658, "last_edit_date": 1534364134, "question_id": 51865705, "link": "https://stackoverflow.com/questions/51865705/create-column-in-pandas-based-on-two-other-columns-and-table", "title": "Create column in pandas based on two other columns and table", "body": "<pre><code>table = pd.DataFrame(data=[[1,2,3],[4,5,6],[7,8,9]],\n                 columns=['High','Middle','Low'],\n                index=['Blue','Green','Red'])\n\ndf = pd.DataFrame(data=[['High','Blue'],\n                    ['High','Green'],\n                    ['Low','Red'],\n                   ['Middle','Blue'],\n                    ['Low','Blue'],\n                    ['Low','Red']],\n             columns=['A','B'])\n\n&gt;&gt;&gt; df\n        A      B\n0    High   Blue\n1    High  Green\n2     Low    Red\n3  Middle   Blue\n4     Low   Blue\n5     Low    Red\n\n&gt;&gt;&gt; table\n       High  Middle  Low\nBlue      1       2    3\nGreen     4       5    6\nRed       7       8    9\n</code></pre>\n\n<p>I'm trying to add a third column 'C' which is based on the values in the table. So the first row would get a value of 1, the second of 4 etc.</p>\n\n<p>If this would be be a one-dimensional lookup I would convert the table to a dictionary and would use <code>df['C'] = df['A'].map(table)</code>. However since this is two-dimensional I can't figure out how to use map or apply.</p>\n\n<p>Ideally I would convert the table to dictionary format so I save it together with other dictionaries in a json, however this is not essential.</p>\n"}, {"tags": ["python", "django", "django-models", "orientdb", "pyorient"], "comments": [{"owner": {"reputation": 156, "user_id": 8828430, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/999Y0.png?s=128&g=1", "display_name": "ldacrema", "link": "https://stackoverflow.com/users/8828430/ldacrema"}, "edited": false, "score": 0, "creation_date": 1534453768, "post_id": 51865703, "comment_id": 90722235, "body": "Hi @Tommyk, which version of OrientDB and Django you use?"}, {"owner": {"reputation": 2277, "user_id": 1137624, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/414d434ed4a59f95ef416c9312f66d1e?s=128&d=identicon&r=PG", "display_name": "cegprakash", "link": "https://stackoverflow.com/users/1137624/cegprakash"}, "edited": false, "score": 0, "creation_date": 1535974492, "post_id": 51865703, "comment_id": 91247647, "body": "Did you try any of these? <a href=\"https://orientdb.com/docs/2.2.x/PyOrient-Client.html\" rel=\"nofollow noreferrer\">orientdb.com/docs/2.2.x/PyOrient-Client.html</a> <a href=\"https://orientdb.com/docs/2.2.x/PyOrient-Client-DB-Create.html\" rel=\"nofollow noreferrer\">orientdb.com/docs/2.2.x/PyOrient-Client-DB-Create.html</a> <a href=\"https://orientdb.com/docs/2.2.x/PyOrient-Client-DB-Open.html\" rel=\"nofollow noreferrer\">orientdb.com/docs/2.2.x/PyOrient-Client-DB-Open.html</a> <a href=\"https://orientdb.com/docs/2.2.x/PyOrient-OGM-Connection.html\" rel=\"nofollow noreferrer\">orientdb.com/docs/2.2.x/PyOrient-OGM-Connection.html</a>"}], "owner": {"reputation": 386, "user_id": 421193, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e26b355aeb99e077b746bf33d07f34c8?s=128&d=identicon&r=PG", "display_name": "TommyK", "link": "https://stackoverflow.com/users/421193/tommyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 240, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1534363655, "creation_date": 1534363655, "question_id": 51865703, "link": "https://stackoverflow.com/questions/51865703/how-to-set-up-orientdb-pyorient-ogm-with-django", "title": "How to set up OrientDB PyOrient OGM with Django?", "body": "<p>I am having difficulties in connecting Django with Orientdb PyOrient OGM. </p>\n\n<p>I have set the following connection strings and initialisation methods in my settings.py file in Django. </p>\n\n<pre><code># PYORIENT DB SETTINGS\nDJANGORIENT_SETTINGS = {\n    'host': 'localhost',\n    'port': '2480',\n    'username': 'xxxx',\n    'password': 'xxxxxxxxxx',\n    'name': 'authdb'\n}\n\nfrom pyorient.ogm import declarative\nNode = declarative.declarative_node()\nRelationship = declarative.declarative_relationship()\n</code></pre>\n\n<p>but I am unable to connect to the database via my models.py file</p>\n\n<pre><code>from pyorient.ogm.property import *\nfrom .settings import Node\n\nclass Car(Node):\n    registration = String(unique=True)\n    colour = String()\n</code></pre>\n\n<p>Any advice on how to connect the two technologies?</p>\n"}, {"tags": ["python", "loops", "if-statement", "conditional-statements", "text-based"], "comments": [{"owner": {"reputation": 91788, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "edited": false, "score": 3, "creation_date": 1534363498, "post_id": 51865651, "comment_id": 90683491, "body": "What are <code>f_g</code>, <code>f_y</code>, and <code>s_b</code>? Variable names like that make code hard to read."}, {"owner": {"reputation": 1202, "user_id": 9937273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xJAip.png?s=128&g=1", "display_name": "Don Thousand", "link": "https://stackoverflow.com/users/9937273/don-thousand"}, "edited": false, "score": 1, "creation_date": 1534363583, "post_id": 51865651, "comment_id": 90683517, "body": "Also, try using <code>\\n</code> as a newline, instead of <code>print(&quot;&quot;)</code>"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 4, "creation_date": 1534363723, "post_id": 51865651, "comment_id": 90683572, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation, as suggested when you created this account.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem. We should be able to paste your posted code into a text file and reproduce the problem you described."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1534364078, "post_id": 51865651, "comment_id": 90683739, "body": "Your posted code dies at line 1.  It is not at all minimal.  You&#39;ve used non-descriptive variable names.  Most of all, you&#39;ve made no attempt to write a loop to solve your problem, one which is covered well on many tutorial sites and other question on Stack Overflow.  Please perform the expected research and follow the SO guidelines.  We&#39;re happy to help you, but we need these things to be (1) straightforward for us; (2) useful for our archive -- which after all, is the charter of this site."}, {"owner": {"reputation": 8450, "user_id": 3462319, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/89268869f7b0ba2846aecad61a51b458?s=128&d=identicon&r=PG&f=1", "display_name": "depperm", "link": "https://stackoverflow.com/users/3462319/depperm"}, "edited": false, "score": 1, "creation_date": 1534364082, "post_id": 51865651, "comment_id": 90683742, "body": "also you don&#39;t have any handling for if they enter something not allowed like <code>3</code>"}, {"owner": {"reputation": 31, "user_id": 10230909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NPjjC.jpg?s=128&g=1", "display_name": "Idealprinciple", "link": "https://stackoverflow.com/users/10230909/idealprinciple"}, "edited": false, "score": 0, "creation_date": 1534364136, "post_id": 51865651, "comment_id": 90683761, "body": "I changed the variables from colorama Fore.GREEN, for example to f_g, to keep me from typing the entire variable each time. I could post the entire script, but at this moment, it is quite long. I figured just posting a snippet of the code would suffice. Should I re-post my question with the full script?"}], "answers": [{"comments": [{"owner": {"reputation": 1143, "user_id": 8759952, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7d8e784fa5cd3e5a2dfe13b405fc1de1?s=128&d=identicon&r=PG&f=1", "display_name": "Liora Haydont", "link": "https://stackoverflow.com/users/8759952/liora-haydont"}, "edited": false, "score": 0, "creation_date": 1534365957, "post_id": 51866129, "comment_id": 90684532, "body": "I&#39;m not sure the OP wants/needs someone to write the code for them"}, {"owner": {"reputation": 8450, "user_id": 3462319, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/89268869f7b0ba2846aecad61a51b458?s=128&d=identicon&r=PG&f=1", "display_name": "depperm", "link": "https://stackoverflow.com/users/3462319/depperm"}, "reply_to_user": {"reputation": 1143, "user_id": 8759952, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7d8e784fa5cd3e5a2dfe13b405fc1de1?s=128&d=identicon&r=PG&f=1", "display_name": "Liora Haydont", "link": "https://stackoverflow.com/users/8759952/liora-haydont"}, "edited": false, "score": 0, "creation_date": 1534366037, "post_id": 51866129, "comment_id": 90684567, "body": "@LioraHaydont they have made an attempt and they have trouble with <code>figuring out if I could call a previous variable.</code> This answer offers a solution to that and I believe a slightly more elegant design"}, {"owner": {"reputation": 1143, "user_id": 8759952, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7d8e784fa5cd3e5a2dfe13b405fc1de1?s=128&d=identicon&r=PG&f=1", "display_name": "Liora Haydont", "link": "https://stackoverflow.com/users/8759952/liora-haydont"}, "edited": false, "score": 0, "creation_date": 1534366147, "post_id": 51866129, "comment_id": 90684616, "body": "You could have advised them to use another design and given guidance without writing all the code for them."}, {"owner": {"reputation": 31, "user_id": 10230909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NPjjC.jpg?s=128&g=1", "display_name": "Idealprinciple", "link": "https://stackoverflow.com/users/10230909/idealprinciple"}, "edited": false, "score": 0, "creation_date": 1534366151, "post_id": 51866129, "comment_id": 90684617, "body": "Thank you for the responses!"}, {"owner": {"reputation": 31, "user_id": 10230909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NPjjC.jpg?s=128&g=1", "display_name": "Idealprinciple", "link": "https://stackoverflow.com/users/10230909/idealprinciple"}, "edited": false, "score": 0, "creation_date": 1534366377, "post_id": 51866129, "comment_id": 90684702, "body": "I made the mistake of posting only a portion of the code that does not show how the code runs. My code is quite long and I have solutions to most of the things mentioned. I do appreciate the feedback, I will post again when I am able to (Can&#39;t post more than twice in 90 minutes). I&#39;ll provide the script with the information that allows you to run it yourselves. Again, my apologies. Twas my first post haha."}], "tags": [], "owner": {"reputation": 8450, "user_id": 3462319, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/89268869f7b0ba2846aecad61a51b458?s=128&d=identicon&r=PG&f=1", "display_name": "depperm", "link": "https://stackoverflow.com/users/3462319/depperm"}, "is_accepted": false, "score": 0, "last_activity_date": 1534365961, "last_edit_date": 1534365961, "creation_date": 1534365755, "answer_id": 51866129, "question_id": 51865651, "link": "https://stackoverflow.com/questions/51865651/text-based-adventure-game-looping-to-previous-line/51866129#51866129", "title": "Text-based adventure game looping to previous line?", "body": "<p>I would recommend making a type of graph. You'll have to map out all the options but you probably have to do that already. Also, implementing a loop will help handle un-acceptable answers.</p>\n\n<p>One viable possibility (test it <a href=\"https://repl.it/repls/IntrepidSmugProspect\" rel=\"nofollow noreferrer\">here</a>, FYI this is not even as complete as OP example but you can enter 1 twice to see how it should go):</p>\n\n<pre><code># make a class for each event, it'll contain a description and any number of choices\nclass Event:\n  def __init__(self,description,choices,options):\n      self.description=description\n      self.choices=choices\n      # options should be a list the same length as choices with corresponding keys to other events\n      self.options=options\n  def to_string(self):\n      print(self.description+'\\n')\n      for choice in self.choices:\n        print(choice+'\\n')\n      # point to the next event\n      return self.options[self.make_choice()-1]\n  def make_choice(self):\n    c=0\n    # this won't allow a user to enter a value not offered\n    while c&lt;1 or c&gt;len(self.choices):\n        c=int(input(\"your choice&gt; \"))\n    return c\n\n# this is your map\nevents={'start':Event(\"You approach the knife slowly, While the alien is distracted. You finally reach the knife, but as you look up, the alien stares back at you.\\nYou make a move to stab the alien, but he is too quick. With one swift motion, the alien thrusts you into the air.\\nYou land hard, as the alien makes it's way towards you again. What should you do?\",[\"1. Accept defeat?\",\"2. Last ditch effort?\"],['defeat','ditch']),'defeat':Event(\"The alien stands over you, as you grimace in pain. You extend your arms out revealing your chest. Showing the alien you're not afrain of death.\\nThe alien stops, and brings it's face close to yours. You have gained the alien's respect, he walks slowly back to the arm he was consuming.\\nYou lie in shock, What should you do now?\",[\"1. Get up and try to communicate with the alien?\",\"2. Get up and continue onward through this seemingly dangerous world?\"],['communicate','onward']),'communicate':Event(\"You take a deep breath, still in pain, you slowly limp your way towards the alien.\\nAs the alien hears you approach, it stops eating the arm and turns towards your direction.\\nWhat should you say?\",[\"1. 'Why didn't you kill me?'\",\"2. 'Help me escape this place.'\"],['kill','escape'])}\n\nc='start'\nwhile True:\n    t=events[c].to_string()\n    # this is how you'd break the loop if you win or lose\n    if t==\"Game Over\":\n        break\n    elif t==\"You Win\":\n        break\n    c=t\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 10230909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NPjjC.jpg?s=128&g=1", "display_name": "Idealprinciple", "link": "https://stackoverflow.com/users/10230909/idealprinciple"}, "edited": false, "score": 0, "creation_date": 1534377398, "post_id": 51867517, "comment_id": 90687646, "body": "awesome recommendations!! Thank you so much. You made everything clear and your comments explain everything very well. I appreciate the insight! I&#39;ll make these changes :)"}], "tags": [], "owner": {"reputation": 1525, "user_id": 222189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/36cb170adfa384f33da06c74450e2365?s=128&d=identicon&r=PG", "display_name": "matejcik", "link": "https://stackoverflow.com/users/222189/matejcik"}, "is_accepted": true, "score": 2, "last_activity_date": 1534373612, "creation_date": 1534373612, "answer_id": 51867517, "question_id": 51865651, "link": "https://stackoverflow.com/questions/51865651/text-based-adventure-game-looping-to-previous-line/51867517#51867517", "title": "Text-based adventure game looping to previous line?", "body": "<p>You don't seem to make use of functions at all. That is something that you should do :)</p>\n\n<p>For example, instead of repeating the input colors every time, make a <code>colored_input</code>:</p>\n\n<pre><code>def colored_input():\n    return input(Fore.YELLOW + Style.BRIGHT + \"&gt; \")\n\nalien = colored_input()\n</code></pre>\n\n<p>Second, I'd consolidate the \"events\" instead of typing them out like you do. For example, I'd store the pages separately in a tuple. Like so:</p>\n\n<pre><code>STARTING_TEXT = \"\"\"\nTheres an alien eating what appears to be a human arm, though its so damaged it's hard to be sure. There is a knife next to the alien.\nwhat do you want to do?\u00a8\n\"\"\"\n\nSTARTING_CHOICES = \"\"\"\nGo for the knife\nAttack alien before it notices you\n\"\"\"\n\nEVENT_START = (STARTING_TEXT, STARTING_CHOICES)\n</code></pre>\n\n<p>The triple-quotes create a multi-line string. Note that the first and last newline is part of the string, so you'll have to get rid of it later.</p>\n\n<p>Of course, you can put the texts into the tuple directly:</p>\n\n<pre><code>EVENT_APPROACH_KNIFE = (\"\"\"\nYou approach the knife slowly, While the alien is distracted. You finally reach the knife, but as you look up, the alien stares back at you.\nYou make a move to stab the alien, but he is too quick. With one swift motion, the alien thrusts you into the air.\nYou land hard, as the alien makes it's way towards you again. What should you do?\n\"\"\", \"\"\"\nAccept defeat?\nLast ditch effort?\n\"\"\")\n</code></pre>\n\n<p>Now, if you have a bunch of \"events\" like this, you can have a function to display them and ask for input in the same step:</p>\n\n<pre><code>def run_event(event):  # from here on, the \"event\" variable will be whichever EVENT_* you call\n    text, choices = event  # separates the two items of the tuple\n    # Remove whitespace from start and end. This gets rid of the starting and ending newline\n    # that I mentioned earlier:\n    # (go ahead, remove the following line and see what happens)\n    text = text.strip()\n    # Now let's get individual lines - split the text on newlines:\n    text_lines = text.split(\"\\n\")\n    # print them with colors:\n    for line in text_lines:\n        print(Fore.YELLOW + line)\n        print() # To print an empty line, you don't even need to add the \"\"\n    # now let's do the same with choices:\n    choices = choices.strip()\n    choice_lines = choices.split(\"\\n\")\n    for num, line in enumerate(choice_lines):\n        # the \"enumerate\" gives you \"num\" as the number of the line\n        # but it counts from 0, so we need to add 1\n        # (and wrap it in str() because otherwise you can't add it to a string\n        print(Fore.GREEN + Style.BRIGHT + str(num + 1) + \". \" + line)\n        print()\n    # finally, ask for player's choice and return it\n    return colored_input()\n</code></pre>\n\n<p>This will simplify your code greatly. Assuming you define all the events beforehand, you can do the if's like so:</p>\n\n<pre><code>door = run_event(EVENT_DOOR)\nif door == \"1\":\n    alien = run_event(EVENT_ALIEN)\n    if alien == \"1\":\n        improv = run_event(EVENT_IMPROV)\n        ...\n    elif alien == \"2\":\n        ...\n</code></pre>\n\n<p>You could develop this further, for instance, use a list instead of multi-line string for the choices, and associate events to the choices.</p>\n\n<p>But, to answer your original question: structured like this, you can make parts of the game into functions. Like so:</p>\n\n<pre><code>def accept_defeat():\n    improv = run_event(EVENT_ACCEPT_DEFEAT)\n    if improv == \"1\":\n        ...\n    elif improv == \"2\":\n        wall = run_event(EVENT_LAST_DITCH)\n        if wall == \"1\":\n            accept_defeat()  # here you're calling the same function again!\n        elif ...:\n            ...\n\n # and then somewhere in the main function:\n def main():\n      alien = run_event(EVENT_ALIEN):\n      if alien == \"1\":\n          accept_defeat()\n      elif ...:\n          ...\n</code></pre>\n\n<hr>\n\n<p>When you're calling a function from within the same function, you are using <em>recursion</em>. This is a rather bad solution, actually: for one, if you decide to \"accept defeat\" more than 128 or so times in a row, you'll exceed a <em>recursion limit</em> and your program will crash.</p>\n\n<p>But to avoid recursion, you would have to rework your program in deeper ways. ISTM at your skill level, this solution works fine. You can learn more when you hit the limits of this approach - or when you feel like you understand this code very well and want more of a challenge :)</p>\n"}], "owner": {"reputation": 31, "user_id": 10230909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NPjjC.jpg?s=128&g=1", "display_name": "Idealprinciple", "link": "https://stackoverflow.com/users/10230909/idealprinciple"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 627, "favorite_count": 0, "accepted_answer_id": 51867517, "answer_count": 2, "score": 0, "last_activity_date": 1534373612, "creation_date": 1534363378, "last_edit_date": 1534366888, "question_id": 51865651, "link": "https://stackoverflow.com/questions/51865651/text-based-adventure-game-looping-to-previous-line", "title": "Text-based adventure game looping to previous line?", "body": "<p>I am learning Python by creating a text-based adventure game. I was having a difficult time figuring out if I could call a previous variable. For example, this is a snippet of my code (advice on how to consolidate would be helpful haha) I have an if statement that allows the player to select an input.</p>\n\n<p>Under the ALIEN input, you'll see if they select 1. They choose \"Accept defeat\".</p>\n\n<p>I have the same outcome towards the end of this code, for the player to choose \"Accept defeat\" again after the IMPROV input. I would like to loop back to the first alien variable if that option is chosen. Rather than writing the same if, elif, statements over again. Is this possible?</p>\n\n<pre><code>   def main(): #Groups together the entire script, allows for a loop. The enitire script is called main.\nimport sys #imports system settings and functions\nfrom colorama import init #imports color scheme\ninit()\ninit(autoreset=True) #resets color scheme after every use\n#Text based adventure game in progress\nfrom colorama import Fore, Back, Style\ns_b = Style.BRIGHT # This allows you to shorthand a variable, rather than typing Style.BRIGHT everytime.\nf_c = Fore.CYAN\nf_g = Fore.GREEN\nf_y = Fore.YELLOW\nf_r = Fore.RED\nprint (\"\")\nprint (\"\")\nprint (f_y + s_b + \"                                                                           WELCOME TO THE MAZE                                   \")\nprint (\"\")\nprint (\"\")\nprint (s_b + \"You have found yourself stuck within a dark room, inside this room are 5 doors.. Your only way out..\")\nprint (\"\")\nprint (s_b + \"Do you want to enter door 1,2,3,4, or 5?\") #This gives the player options to choose.\nprint (\"\")\ndoor = input(f_y + s_b + \"&gt; \");\n# input(\"&gt; \") means the player can give any variable\n# Will only work if the variable is defined down below\nif door == \"1\":\n    print (\"\")\n    print (s_b + \"Theres an alien eating what appears to be a human arm, though its so damaged it's hard to be sure. There is a knife next to the alien.\")\n    print (\"\")\n    print (s_b + \"what do you want to do?\")\n    print (\"\")\n    print (f_g + s_b + \"1. Go for the knife\")\n    print (\"\")\n    print (f_g + s_b + \"2. Attack alien before it notices you\")\n    print (\"\")\n\n    alien = input(f_y + s_b + \"&gt; \");\n\n    if alien == \"1\":\n        print (\"\")\n        print (s_b + \"You approach the knife slowly, While the alien is distracted. You finally reach the knife, but as you look up, the alien stares back at you.\")\n        print (\"\")\n        print (s_b + \"You make a move to stab the alien, but he is too quick. With one swift motion, the alien thrusts you into the air.\")\n        print (\"\")\n        print (s_b + \"You land hard, as the alien makes it's way towards you again. What should you do?\")\n        print (\"\")\n        print (f_g + s_b + \"1. Accept defeat?\")\n        print (\"\")\n        print (f_g + s_b + \"2. Last ditch effort?\")\n        print (\"\")\n\n        improv = input(f_y + s_b + \"&gt; \")\n\n        if improv == \"1\":\n            print (\"\")\n            print (s_b + \"The alien stands over you, as you grimace in pain. You extend your arms out revealing your chest. Showing the alien you're not afrain of death.\")\n            print (\"\")\n            print (s_b + \"The alien stops, and brings it's face close to yours. You have gained the alien's respect, he walks slowly back to the arm he was consuming.\")\n            print (\"\")\n            print (s_b + \"You lie in shock, What should you do now?\")\n            print (\"\")\n            print (s_b + f_g + \"1. Get up and try to communicate with the alien?\")\n            print (\"\")\n            print (s_b + f_g + \"2. Get up and continue onward through this seemingly dangerous world?\")\n            print (\"\")\n\n            onward = input(f_y + s_b + \"&gt; \")\n\n            if onward == \"1\":\n                print (\"\")\n                print (s_b + \"You take a deep breath, still in pain, you slowly limp your way towards the alien.\")\n                print (\"\")\n                print (s_b + \"As the alien hears you approach, it stops eating the arm and turns towards your direction.\")\n                print (\"\")\n                print (s_b + \"What should you say?\")\n                print (\"\")\n                print (s_b + f_g + \"1. 'Why didn't you kill me?'\")\n                print (\"\")\n                print (s_b + f_g + \"2. 'Help me escape this place.'\")\n                print (\"\")\n\n                kill = input(f_y + s_b + \"&gt; \")\n\n\n                if kill == \"1\":\n                    print (\"\")\n                    print (s_b + \"You walk close to the alien as he stares into your eyes, you show no fear as you stare right back. 'Why didn't you kill me?' you ask.\")\n                    print (\"\")\n                    print (s_b + \"The alien huffs and responds in the deepest voice imaginable, 'I only kill those who have fear.'\")\n                    print (\"\")\n                    print (s_b + \"You respond..\")\n                    print (\"\")\n                    print (s_b + f_g + \"1. I have fear.\")\n                    print (\"\")\n                    print (s_b + f_g + \"2. You don't scare me, nothing does.\")\n                    print (\"\")\n\n                    kill2 = input(f_y + s_b + \"&gt; \")\n\n                    if kill2 == \"1\":\n                        print (\"\")\n                        print (s_b + \"'I am terrified of you' you say. I am terrified of everything, I had given up.'\")\n                        print (\"\")\n                        print (s_b + \"The alien responds 'This is why you approach me? To express your fear? Have I misread you?'\")\n                        print (\"\")\n                        print (s_b + \"'You haven't misread me, I am ready to die.' you respond.\")\n                        print (\"\")\n                        print (s_b + \"The alien respects your wishes, 'Well, I can arrange that..'\")\n                        print (\"\")\n                        print (s_b + \"The alien swiftly swipes off your head, leaving your body lifeless.\")\n                        print (\"\")\n                        print (s_b + f_r + \"You died.. GAME OVER!! You gave up too soon..\")\n                        print (\"\")\n\n                if kill == \"2\":\n                    print (\"\")\n                    print (s_b + \"You limp up to the alien, brushing down your clothes.\")\n                    print (\"\")\n                    print (s_b + \"The alien stares at you, seemingly waiting for you to say something.\")\n                    print (\"\")\n                    print (s_b + \"'Help me escape this place' you say.\")\n                    print (\"\")\n                    print (s_b + \"'Help you?' responds the alien with a fighteningly deep voice. 'Why would you think I would help you?'\")\n                    print (\"\")\n                    print (s_b + f_g + \"1. Because you didn't kill me, and I need to get out of this place.\")\n                    print (\"\")\n                    print (s_b + f_g + \"2. Because I will kill you if you dont.\")\n                    print (\"\")\n\n\n            elif onward == \"2\":\n                print (\"\")\n                print (s_b + \"You quickly turn over and limp as far from the alien as you can.\")\n                print (\"\")\n                print (s_b + \"This world is dark, so it's difficult to see what's ahead.\")\n                print (\"\")\n                print (s_b + \"You continue onward in hopes to find a way out.\")\n                print (\"\")\n\n\n\n\n        elif improv == \"2\":\n            print (\"\")\n            print (s_b + \"You quickly scan the area for weapons and shelter. The alien is approaching quickly. You notice a black wall.\")\n            print (\"\")\n            print (s_b + \"There is no way you can reach the wall in time, and even if you do, the alien will just follow..\")\n            print (\"\")\n            print (s_b + \"What should you do?\")\n            print (\"\")\n            print (f_g + s_b + \"1. Attempt to run behind the wall\")\n            print (\"\")\n            print (f_g + s_b + \"2. Accept defeat?\")\n            print (\"\")\n\n            wall = input(f_y + s_b + \"&gt; \")\n\n            if wall == \"1\":\n                print (\"\")\n                print (s_b + \"You scream in agony as you pull yourself up and make a break toward the wall.\")\n                print (\"\")\n                print (s_b + \"You hear the alien directly behind you. You dive behind the wall, landing on a sharp object.\")\n                print (\"\")\n                print (s_b + \"The object is an incredibly sharp sword. The alien hurries around the wall and attacks you.\")\n                print (\"\")\n                print (s_b + \"What should you do?\")\n                print (\"\")\n                print (s_b + f_g + \"1. Attempt to take the alien's limbs off with the sword.\")\n                print (\"\")\n                print (s_b + f_g + \"2. Aim stright for the aliens neck with the sword.\")\n                print (\"\")\n\n            elif wall == \"2\":\n\n                improv = input(f_y + s_b + \"&gt; \")\n\n    elif alien == \"2\":\n        print (\"\")\n        print (s_b + \"You catch the alien off-guard. He stumbled and hisses in your direction. You scream in terror before he grabs the knife, and punctures your throat as he rips off your limbs.\")\n        print (\"\")\n        print (s_b + f_r + \"You died.. GAME OVER.. Mistakes can't be made this soon.. OUCH\")\n        print (\"\")\n\n    else:\n        print (\"\")\n        print (s_b + \"You froze, you decided to do nothing. In shock, you let the alien notice and approach you. He gashes your face and begins to consume your body.\")\n        print (\"\")\n        print (s_b + f_r + \"You died.. GAME OVER.. How did you die this soon??\")\n        print (\"\")\n\n    restart=input(f_y + s_b + \"Start over? Yes or No? \").lower()\n    if restart == \"yes\":\n        sys.stderr.write(\"\\x1b[2J\\x1b[H\") ## This will clear out screen in the terminal\n        main()\n\n    else:\n        exit()  #Remember this to start a loop, from restart=input, to exit()\n</code></pre>\n\n<p>main()</p>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 2162, "user_id": 3014097, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/47193d2bbe5b654700776fd2a7d14868?s=128&d=identicon&r=PG&f=1", "display_name": "dan_g", "link": "https://stackoverflow.com/users/3014097/dan-g"}, "edited": false, "score": 2, "creation_date": 1534363373, "post_id": 51865607, "comment_id": 90683427, "body": "Running your code I get lines plotted on the same plot (which is what I would expect). Can you provide some more details about your setup?"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1534363390, "post_id": 51865607, "comment_id": 90683438, "body": "Same as above. matplotlib 2.2.3"}, {"owner": {"reputation": 12006, "user_id": 1102056, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d3b5ee75a670827289364ba8dc89ed4?s=128&d=identicon&r=PG", "display_name": "Sufian Latif", "link": "https://stackoverflow.com/users/1102056/sufian-latif"}, "edited": false, "score": 0, "creation_date": 1534363681, "post_id": 51865607, "comment_id": 90683554, "body": "<code>matplotlib</code> accumulates the graphs drawn by multiple calls to <code>plt.plot()</code> by default. This answer might help: <a href=\"https://stackoverflow.com/a/4805456/1102056\">stackoverflow.com/a/4805456/1102056</a>"}, {"owner": {"reputation": 11, "user_id": 5569445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5bd902737559d65b73f39279d7cc8eb?s=128&d=identicon&r=PG&f=1", "display_name": "GTaylor", "link": "https://stackoverflow.com/users/5569445/gtaylor"}, "edited": false, "score": 0, "creation_date": 1534363729, "post_id": 51865607, "comment_id": 90683576, "body": "my matplotlib version is 2.1.2"}, {"owner": {"reputation": 11, "user_id": 5569445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5bd902737559d65b73f39279d7cc8eb?s=128&d=identicon&r=PG&f=1", "display_name": "GTaylor", "link": "https://stackoverflow.com/users/5569445/gtaylor"}, "edited": false, "score": 0, "creation_date": 1534363847, "post_id": 51865607, "comment_id": 90683635, "body": "There are numerous examples showing that it works so there must be something wrong with my installation."}, {"owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "edited": false, "score": 0, "creation_date": 1534364647, "post_id": 51865607, "comment_id": 90684006, "body": "<code>plt.show()</code> was designed with the expectation that it be called <a href=\"https://stackoverflow.com/a/15724812/190597\">only once</a>. So normally you would just call all the <code>plt.plot</code> commands first, then <code>plt.show()</code> at the end. If you want to make an animation, <a href=\"https://matplotlib.org/examples/animation/basic_example.html\" rel=\"nofollow noreferrer\">use <code>matplotlib.animation</code></a>. Then you could allow the user to pause the animation on click events, <a href=\"https://stackoverflow.com/a/16733373/190597\">for instance</a>."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1534366961, "post_id": 51865607, "comment_id": 90684925, "body": "It&#39;s not necessarily the installation. It might be the way you execute this code. If it is in a script which you call via python, you will sure get 2 lines as expected in any matplotlib version. But if you run this differently, something might prevent that from happening."}, {"owner": {"reputation": 609, "user_id": 7428855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d69eda281124da2adb70ac90cb80b91?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/7428855/ian"}, "edited": false, "score": 0, "creation_date": 1534386850, "post_id": 51865607, "comment_id": 90689434, "body": "<code>plt.hold()</code> will toggle the hold state, which make the latter plotting clear the <code>Axes</code>.  The default setting will not. You should check previous code for this state change. Or just do <code>plt.hold(True)</code>  to reset it."}, {"owner": {"reputation": 11, "user_id": 5569445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5bd902737559d65b73f39279d7cc8eb?s=128&d=identicon&r=PG&f=1", "display_name": "GTaylor", "link": "https://stackoverflow.com/users/5569445/gtaylor"}, "edited": false, "score": 0, "creation_date": 1535480986, "post_id": 51865607, "comment_id": 91078859, "body": "I was troubleshooting a script that seemed to quit working when the hold calls were removed.  Today the simple plot example worked until the problem script ran; then the simple script would print only the last .plot line."}, {"owner": {"reputation": 11, "user_id": 5569445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5bd902737559d65b73f39279d7cc8eb?s=128&d=identicon&r=PG&f=1", "display_name": "GTaylor", "link": "https://stackoverflow.com/users/5569445/gtaylor"}, "edited": false, "score": 0, "creation_date": 1535481109, "post_id": 51865607, "comment_id": 91078909, "body": "After I restarted the IDE and fixed a problem in the main script (passing a string used as a value on the Y axis) everything worked as expected.  Seems like something was getting screwed up in the environment."}, {"owner": {"reputation": 11, "user_id": 5569445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5bd902737559d65b73f39279d7cc8eb?s=128&d=identicon&r=PG&f=1", "display_name": "GTaylor", "link": "https://stackoverflow.com/users/5569445/gtaylor"}, "edited": false, "score": 0, "creation_date": 1535491015, "post_id": 51865607, "comment_id": 91083024, "body": "My script creates plots for each of 50 tests of 20 units.  During development it had both <code>plt.savefig()</code> and <code>plt.show()</code> calls.  When the script is run in File Explorer, the <code>show</code> call displays each figure and doesn&#39;t proceed until you close it.  So how should I reset the <code>plt.plot()</code> queue (?) so it creates the files without using show?"}, {"owner": {"reputation": 11, "user_id": 5569445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5bd902737559d65b73f39279d7cc8eb?s=128&d=identicon&r=PG&f=1", "display_name": "GTaylor", "link": "https://stackoverflow.com/users/5569445/gtaylor"}, "edited": false, "score": 0, "creation_date": 1535556886, "post_id": 51865607, "comment_id": 91112696, "body": "Found the answer in <a href=\"https://stackoverflow.com/questions/17106288/matplotlib-pyplot-will-not-forget-previous-plots-how-can-i-flush-refresh/17107568\">link</a>. Use <code>plt.gcf().clear()</code> instead of <code>plt.show()</code>"}], "owner": {"reputation": 11, "user_id": 5569445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5bd902737559d65b73f39279d7cc8eb?s=128&d=identicon&r=PG&f=1", "display_name": "GTaylor", "link": "https://stackoverflow.com/users/5569445/gtaylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 265, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1534377829, "creation_date": 1534363165, "last_edit_date": 1534377829, "question_id": 51865607, "link": "https://stackoverflow.com/questions/51865607/how-to-get-pyplot-to-put-multiple-lines-in-one-figure", "title": "How to get pyplot to put multiple lines in one figure", "body": "<p>I'm trying to replace <code>plt.hold()</code> which accumulates lines in a figure.</p>\n\n<p>Research: Several posted suggestions to this issue say to use multiple\n<code>plt.plot(x,y)</code> commands followed by <code>plt.show()</code>. On my system (Python 3.6) that\nprints only the content of the last <code>plt.plot()</code> call.</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\nt = np.linspace(0, 2*np.pi, 400)\na = np.sin(t)\nb = np.cos(t)\n\nplt.plot(t, a, 'b') \nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/5vAu5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5vAu5.png\" alt=\"plot of blue sine wave\"></a></p>\n\n<p>Adding another plt.plot() call clears the first line</p>\n\n<pre><code>plt.plot(t, a, 'b') \nplt.plot(t, b, 'g')\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/cZcJj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cZcJj.png\" alt=\"plot of a green cosine wave\"></a></p>\n\n<p>A method that works is to put them all in one plt.plot() call.</p>\n\n<pre><code>plt.plot(t, a, 'r--', t, b, 'b') \nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/qaql4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qaql4.png\" alt=\"plot of 2 sine/cosine waves\"></a></p>\n\n<p>But I have five lines with labels to plot so this would be a long, hard-to-read\nargument list.</p>\n\n<p>How can I define each of the lines individually for one figure?</p>\n"}, {"tags": ["python", "django", "apache", "wsgi"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10215593"}, "edited": false, "score": 1, "creation_date": 1534363429, "post_id": 51865565, "comment_id": 90683461, "body": "Yes - do you want your /django/ route to be the base root for where your project directory is stored?"}, {"owner": {"reputation": 41, "user_id": 2238312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64151d908f283aa88a311b4ca0df85d0?s=128&d=identicon&r=PG", "display_name": "nixgeek", "link": "https://stackoverflow.com/users/2238312/nixgeek"}, "edited": false, "score": 0, "creation_date": 1534364334, "post_id": 51865565, "comment_id": 90683851, "body": "well, that path is actually just the alias.  So I assume that means to the project it is the base path? If so, then yes."}], "owner": {"reputation": 41, "user_id": 2238312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64151d908f283aa88a311b4ca0df85d0?s=128&d=identicon&r=PG", "display_name": "nixgeek", "link": "https://stackoverflow.com/users/2238312/nixgeek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1534362939, "creation_date": 1534362939, "question_id": 51865565, "link": "https://stackoverflow.com/questions/51865565/have-django-setup-to-use-django-path-from-http-localhost-django", "title": "have django setup to use /django/ path from http://localhost/django/", "body": "<p>I have this WSGIScriptAlias /django/  /path/to/app in my Apache2 virtualhost config.</p>\n\n<p>I used django-admin startproject myapp to create the project.\nBut when I go to <a href=\"http://localhost/django/\" rel=\"nofollow noreferrer\">http://localhost/django/</a> I get a 404 error via Django\nIf I change the virtualhost config to just / and restart apache2. It works but I use that for other things hence the reason for virtualhost and /django/ sub-path. But it seems that Django is working just not from the correct path.</p>\n\n<pre><code>    Page not found (404)\n    Request Method: GET\n    Request URL:    http://localhost/django/\n    Using the URLconf defined in djangoexamplecom.urls, Django tried \n    these URL patterns, in this order:\n\n    ^admin/\n    The empty path didn't match any of these.\n    You're seeing this error because you have DEBUG = True in your \n    Django settings file. Change that to False, and Django will \n    display a standard 404 page.\n</code></pre>\n\n<p>I am guessing when running django-admin startproject it expects the app to run at default URL i.e. <a href=\"http://localhost/\" rel=\"nofollow noreferrer\">http://localhost/</a>   no sub-path?</p>\n\n<p>Do I need to edit url.py or settings.py to use /django/?</p>\n"}, {"tags": ["python", "sql", "python-3.x", "database-connection"], "comments": [{"owner": {"reputation": 955, "user_id": 1587534, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l7btt.jpg?s=128&g=1", "display_name": "Saksow", "link": "https://stackoverflow.com/users/1587534/saksow"}, "edited": false, "score": 0, "creation_date": 1534363193, "post_id": 51865556, "comment_id": 90683353, "body": "You are fetching twice from the cursor. Also please use global path names for your files."}, {"owner": {"reputation": 849, "user_id": 1634939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NDwvw.jpg?s=128&g=1", "display_name": "AnkDasCo", "link": "https://stackoverflow.com/users/1634939/ankdasco"}, "edited": false, "score": 0, "creation_date": 1534363455, "post_id": 51865556, "comment_id": 90683466, "body": "Try closing the file stream.I think the missing outfile.close might be the one that is causing the problem."}], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 10007046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f148455a76bb5ffe202dae652cec7a7?s=128&d=identicon&r=PG&f=1", "display_name": "bedford", "link": "https://stackoverflow.com/users/10007046/bedford"}, "edited": false, "score": 0, "creation_date": 1534365145, "post_id": 51865643, "comment_id": 90684208, "body": "Thank you for your post! I posted my new code above showing I added certificate_store = cursor.fetchall() to my code. Is this right? If not, I would greatly appreciate your help!"}, {"owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "reply_to_user": {"reputation": 161, "user_id": 10007046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f148455a76bb5ffe202dae652cec7a7?s=128&d=identicon&r=PG&f=1", "display_name": "bedford", "link": "https://stackoverflow.com/users/10007046/bedford"}, "edited": false, "score": 0, "creation_date": 1534369394, "post_id": 51865643, "comment_id": 90685753, "body": "@bedford you&#39;re still calling <code>fetchall()</code> more than once - you should do <code>certificate_store = cursor.fetchall()</code> then use <code>for certificate in certificate_store</code>... you can&#39;t call <code>fetchall()</code> again."}, {"owner": {"reputation": 161, "user_id": 10007046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f148455a76bb5ffe202dae652cec7a7?s=128&d=identicon&r=PG&f=1", "display_name": "bedford", "link": "https://stackoverflow.com/users/10007046/bedford"}, "edited": false, "score": 0, "creation_date": 1534422201, "post_id": 51865643, "comment_id": 90705117, "body": "Thank you for your reply! I made those changes and I updated my code above. I added certificate_store = cursor.fetchall()                     for certificate in certificate_store:  to my code but it is still not working. I would greatly appreciate your help!"}, {"owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "reply_to_user": {"reputation": 161, "user_id": 10007046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f148455a76bb5ffe202dae652cec7a7?s=128&d=identicon&r=PG&f=1", "display_name": "bedford", "link": "https://stackoverflow.com/users/10007046/bedford"}, "edited": false, "score": 0, "creation_date": 1534432669, "post_id": 51865643, "comment_id": 90712278, "body": "@bedford it seems fine now that you&#39;re calling <code>fetchall</code> only once. But the database code is still outside the <code>with</code> block for the database connection. That means the database is closed when it runs."}, {"owner": {"reputation": 161, "user_id": 10007046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f148455a76bb5ffe202dae652cec7a7?s=128&d=identicon&r=PG&f=1", "display_name": "bedford", "link": "https://stackoverflow.com/users/10007046/bedford"}, "edited": false, "score": 0, "creation_date": 1534433252, "post_id": 51865643, "comment_id": 90712597, "body": "I posted my updated code with the database code indented but it still doesn&#39;t work."}, {"owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "reply_to_user": {"reputation": 161, "user_id": 10007046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f148455a76bb5ffe202dae652cec7a7?s=128&d=identicon&r=PG&f=1", "display_name": "bedford", "link": "https://stackoverflow.com/users/10007046/bedford"}, "edited": false, "score": 0, "creation_date": 1534435666, "post_id": 51865643, "comment_id": 90713961, "body": "How is it failing now?"}, {"owner": {"reputation": 161, "user_id": 10007046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f148455a76bb5ffe202dae652cec7a7?s=128&d=identicon&r=PG&f=1", "display_name": "bedford", "link": "https://stackoverflow.com/users/10007046/bedford"}, "edited": false, "score": 0, "creation_date": 1534436680, "post_id": 51865643, "comment_id": 90714480, "body": "It gives me an error message saying &quot;Error: login rejected am i stuck&quot; Do you have any other suggestions on how to fix this?"}, {"owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "reply_to_user": {"reputation": 161, "user_id": 10007046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f148455a76bb5ffe202dae652cec7a7?s=128&d=identicon&r=PG&f=1", "display_name": "bedford", "link": "https://stackoverflow.com/users/10007046/bedford"}, "edited": false, "score": 0, "creation_date": 1534437281, "post_id": 51865643, "comment_id": 90714807, "body": "We need a really specific full error message output."}, {"owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "reply_to_user": {"reputation": 161, "user_id": 10007046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f148455a76bb5ffe202dae652cec7a7?s=128&d=identicon&r=PG&f=1", "display_name": "bedford", "link": "https://stackoverflow.com/users/10007046/bedford"}, "edited": false, "score": 0, "creation_date": 1534437360, "post_id": 51865643, "comment_id": 90714849, "body": "I just tried a similar code against my own postgresql server and it works fine. Maybe your login credentials are wrong? I don&#39;t see anything wrong with the code."}, {"owner": {"reputation": 161, "user_id": 10007046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f148455a76bb5ffe202dae652cec7a7?s=128&d=identicon&r=PG&f=1", "display_name": "bedford", "link": "https://stackoverflow.com/users/10007046/bedford"}, "edited": false, "score": 0, "creation_date": 1534437784, "post_id": 51865643, "comment_id": 90715100, "body": "I also get another error code that says &quot;ERROR: no more connections allowed (max_client_conn). It flips back and forth between that and the &quot;ERROR: login rejected am i stuck&quot; error message. I&#39;m guessing that I&#39;m guessing it&#39;s something to do with the syntax of my code since I wasn&#39;t getting that error message before."}, {"owner": {"reputation": 161, "user_id": 10007046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f148455a76bb5ffe202dae652cec7a7?s=128&d=identicon&r=PG&f=1", "display_name": "bedford", "link": "https://stackoverflow.com/users/10007046/bedford"}, "edited": false, "score": 0, "creation_date": 1534437910, "post_id": 51865643, "comment_id": 90715179, "body": "Now I am not getting that error message but now but my code is still not writing to the JSON file. If you could help me get my code writing to the JSON file I would greatly appreciate it!"}], "tags": [], "owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "is_accepted": false, "score": 0, "last_activity_date": 1534363316, "creation_date": 1534363316, "answer_id": 51865643, "question_id": 51865556, "link": "https://stackoverflow.com/questions/51865556/there-is-no-output-to-json-file-in-my-python-script/51865643#51865643", "title": "There is no output to JSON file in my python script", "body": "<p>The line that writes to a file:</p>\n\n<pre><code>outfile.write(...)\n</code></pre>\n\n<p>Is protected by a <code>if</code> condition:</p>\n\n<pre><code>if not unique_domains:\n    flag = False                    \nelse:\n    ....\n    outfile.write(...)\n</code></pre>\n\n<p>So <code>unique_domains</code> must be <code>True</code>ish.</p>\n\n<p>But your line </p>\n\n<pre><code>unique_domains = cursor.fetchall()\n</code></pre>\n\n<p>Is <strong>not</strong> inside the block for the database <code>with</code> condition:</p>\n\n<pre><code>with psycopg2.connect(\"dbname=certwatch user=guest host=crt.sh\".format(DB_NAME, DB_USER, DB_HOST)) as conn:\n</code></pre>\n\n<p>Also you already fetched (and discarded after printing) the records in </p>\n\n<pre><code>for certificate in cursor.fetchall():\n</code></pre>\n\n<p>So you can't fetch them again unless you <code>.execute</code> the query again. A better idea would be to store the data in the first fetch.</p>\n"}], "owner": {"reputation": 161, "user_id": 10007046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f148455a76bb5ffe202dae652cec7a7?s=128&d=identicon&r=PG&f=1", "display_name": "bedford", "link": "https://stackoverflow.com/users/10007046/bedford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534433210, "creation_date": 1534362897, "last_edit_date": 1534433210, "question_id": 51865556, "link": "https://stackoverflow.com/questions/51865556/there-is-no-output-to-json-file-in-my-python-script", "title": "There is no output to JSON file in my python script", "body": "<p>I have a python script that supposed to perform SQL queries. However the script is not writing to the JSON file and when I open the JSON file it is empty. However I get no error when the script is running. I've tried fixing this error to no avail. I would greatly appreciate your help! I added certificate_store = cursor.fetchall() but even adding that does not seem to fix my code.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>from __future__ import print_function\n\ntry:\n    import psycopg2\nexcept ImportError:\n    raise ImportError('\\n\\033[33mpsycopg2 library missing. pip install psycopg2\\033[1;m\\n')\n    sys.exit(1)\n\nimport re\nimport sys\nimport json\nimport pprint\nimport time\nimport psycopg2.extras\n\noutfilepath = \"crtsh_output/crtsh_flat_file\"\n\nDB_HOST = 'crt.sh'\nDB_NAME = 'certwatch'\nDB_USER = 'guest'\n\nDELAY = 0\n\n\ndef connect_to_db():\n    start = 0\n    offset = 10\n    flag = True\n\n    while flag:\n        filepath = 'forager.txt'\n        print('am i stuck')\n        with open(filepath, \"at+\") as fp, open(outfilepath, \"wt+\") as outfile:\n            try:\n                for cnt, domain_name in enumerate(fp):\n                    print(\"Line {}: {}\".format(cnt, domain_name))\n                    print(domain_name)\n                    domain_name = domain_name.rstrip()\n\n                    SQL = '''\n                        SELECT c.id, x509_commonName(c.certificate) as common_name,\n                              x509_issuerName(c.certificate) as issuer_name,\n                              x509_notBefore(c.certificate) as not_before,\n                              x509_notAfter(c.certificate) as not_after,\n                              x509_keyAlgorithm(c.certificate) as key_algorithm,\n                              x509_keySize(c.certificate) as key_size,\n                              x509_serialNumber(c.certificate) as serial_number,\n                              x509_signatureHashAlgorithm(c.certificate) as signature_hash_algorithm,\n                              x509_signatureKeyAlgorithm(c.certificate) as signature_key_algorithm,\n                              x509_subjectName(c.certificate) as subject_name,\n                              x509_name(c.certificate) as name,\n                              x509_altNames(c.certificate) as alt_names\n                        FROM certificate c, certificate_identity ci\n                        WHERE c.id = ci.certificate_id\n                             AND ci.name_type = 'dNSName'\n                             AND lower(ci.name_value) = lower(%s)\n                             AND x509_notAfter(c.certificate) &gt; statement_timestamp()\n                        '''\n                    with psycopg2.connect(\"dbname=certwatch user=guest host=crt.sh\".format(DB_NAME, DB_USER, DB_HOST)) as conn:\n                        cursor = conn.cursor(cursor_factory=psycopg2.extras.NamedTupleCursor)\n                        cursor.execute(SQL, (domain_name,))\n\n                        certificate_store = cursor.fetchall()\n                        for certificate in certificate_store:\n                            print(certificate.id)\n                            print(certificate.common_name)\n                            print(certificate.issuer_name)\n                            outfile.write(json.dumps(certificate, sort_keys=True, indent=4, default=str, ensure_ascii=False))\n\n\n                # query db with start and offset\n                #    unique_domains = cursor.fetchall()\n                #    if not unique_domains:\n                #        flag = False\n                #    else:\n                        # do processing with your data\n\n                #        pprint.pprint(unique_domains)\n\n\n                #        outfile.write(json.dumps(unique_domains, sort_keys=True, indent=4, default=str, ensure_ascii = False))\n                #        offset += limit\n\n\n            except Exception as error:\n                print(str(error))\n\nif __name__ == \"__main__\":\n    connect_to_db()\n</code></pre>\n"}, {"tags": ["python", "flask"], "comments": [{"owner": {"reputation": 91788, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "edited": false, "score": 2, "creation_date": 1534362690, "post_id": 51865461, "comment_id": 90683167, "body": "Please make sure any code you include here <i>exactly</i> communicates your question. We have no way of knowing if the mismatched quote in your second snippet (the source code highlighting makes it obvious) is the cause of your problem or just at typo here."}, {"owner": {"reputation": 955, "user_id": 1587534, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l7btt.jpg?s=128&g=1", "display_name": "Saksow", "link": "https://stackoverflow.com/users/1587534/saksow"}, "edited": false, "score": 1, "creation_date": 1534362946, "post_id": 51865461, "comment_id": 90683260, "body": "Can you describe the actual behaviour? Are you able to add multiple times to notes but you can never delete? Please write down a scenario. Also you are using a variable for persistence, you should not."}, {"owner": {"reputation": 13, "user_id": 9862236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uNYid.jpg?s=128&g=1", "display_name": "Yawer Ali Khan", "link": "https://stackoverflow.com/users/9862236/yawer-ali-khan"}, "reply_to_user": {"reputation": 955, "user_id": 1587534, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l7btt.jpg?s=128&g=1", "display_name": "Saksow", "link": "https://stackoverflow.com/users/1587534/saksow"}, "edited": false, "score": 0, "creation_date": 1534364494, "post_id": 51865461, "comment_id": 90683928, "body": "@Saksow Yes it updates the notes when i type something in the form and then submit via submit button. But when i press the delete button with or without a value it add &quot;none&quot; to the notes and updates the list."}], "answers": [{"tags": [], "owner": {"reputation": 982, "user_id": 9473052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebeb6545d601766b0ed4bcc50d9d2a98?s=128&d=identicon&r=PG&f=1", "display_name": "gittert", "link": "https://stackoverflow.com/users/9473052/gittert"}, "is_accepted": false, "score": 0, "last_activity_date": 1534459697, "last_edit_date": 1534459697, "creation_date": 1534371926, "answer_id": 51867274, "question_id": 51865461, "link": "https://stackoverflow.com/questions/51865461/why-doesnt-the-delete-button-works-fine-need-help-in-python-and-flask/51867274#51867274", "title": "Why doesn&#39;t the delete button works fine ? need help in python and flask", "body": "<p>Your code seems a bit mixed up, as there are 2 app routes for index and both contain a post request. Try something like the following, I have no access to all your code so this is untested, please adjust where needed. I'm sure you get the idea:</p>\n\n<pre><code>@app.route(\"/\", methods = [\"GET\" , \"POST\"])\ndef index():\nif request.method == \"POST:\n    if request.form.post['action'] == 'Append':\n        note = request.form.get(\"note\")\n        notes.append(note)\n\n    if request.form.post['action'] == 'Delete':\n        number = request.form.get(\"number\")\n        notes.remove(notes[number])\n\n return render_template(\"index.html\" , notes = notes)\n</code></pre>\n\n<p>in your html put the buttons in the right places something like this:</p>\n\n<pre><code>&lt;input type =\"submit\" name=\"action\" value=\"Append\"&gt;     \n&lt;input type =\"submit\" name=\"action\" value=\"Delete\"&gt;   \n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9862236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uNYid.jpg?s=128&g=1", "display_name": "Yawer Ali Khan", "link": "https://stackoverflow.com/users/9862236/yawer-ali-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 674, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534459697, "creation_date": 1534362497, "last_edit_date": 1534376517, "question_id": 51865461, "link": "https://stackoverflow.com/questions/51865461/why-doesnt-the-delete-button-works-fine-need-help-in-python-and-flask", "title": "Why doesn&#39;t the delete button works fine ? need help in python and flask", "body": "<pre><code>from flask import Flask,session,render_template,request,session\nfrom flask_session import Session\n\napp = Flask(__name__)\n\napp.config[\"SESSION_PERMANENT\"] = False\napp.config[\"SESSION_TYPE\"] = \"filesystem\"\nSession(app)\n</code></pre>\n\n<p><strong>Setting notes to an empty array:</strong></p>\n\n<pre><code>notes = []\n\n@app.route(\"/\", methods = [\"GET\" , \"POST\"])\n #this is the function for submit button\ndef index():\n\nif request.method == \"POST:\n    note = request.form.get(\"note\")\n\n\n    notes.append(note)\n</code></pre>\n\n<p><strong>Note is getting the HTML value of note, and then notes is appending to note:</strong></p>\n\n<pre><code>return render_template(\"index.html\",notes = notes)\n\n@app.route(\"/\",methods =[\"GET\",\"POST\"])\n#this is the function for delete function\ndef delete():\n if request.method ==\"POST\":\n    number = request.form.get(\"number\")\n    notes.remove(notes[number])\n return render_template(\"index.html\" , notes = notes)\n</code></pre>\n\n<p>I am creating a form which accepts or note down which I input as a text in the form section which has a function index.</p>\n\n<p>The other function is for the delete button. It also has a form in HTML with only numbers can be input.</p>\n\n<p>If I choose number 1, then it must delete the first item in the list but it's not happening here.</p>\n\n<p><strong>HTML section is given below:</strong></p>\n\n<pre><code>      &lt;!DOCTYPE html&gt;\n       &lt;html&gt;\n       &lt;head&gt;\n        &lt;title&gt;Hello world&lt;/title&gt;\n       &lt;/head&gt;\n       &lt;body&gt;\n       &lt;h1&gt;Notebook&lt;/h1&gt;\n\n  &lt;form action=\"{{url_for('index')}}\" method=\"POST\"&gt;\n  &lt;input type=\"text\" name=\"note\" placeholder=\"Enter the input\"&gt;\n  &lt;button&gt; Submit &lt;/button&gt;\n\n &lt;/form&gt;\n &lt;form action = \"{{url_for('delete')}}\" method=\"POST\"&gt;\n &lt;input type=\"number\" name=\"number\"&gt;\n &lt;button&gt;Delete&lt;/button&gt;\n &lt;/form&gt;\n &lt;ul&gt; {%for note in notes%}\n &lt;li&gt;{{note}}&lt;/li&gt;\n{%endfor%}\n&lt;/ul&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n\n}\n</code></pre>\n"}]