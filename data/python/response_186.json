[{"tags": ["python", "numpy", "multidimensional-array", "reshape"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 8880061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/897f4c26ce9940cda2da940b35bcd6cd?s=128&d=identicon&r=PG&f=1", "display_name": "Baron", "link": "https://stackoverflow.com/users/8880061/baron"}, "edited": false, "score": 0, "creation_date": 1533179934, "post_id": 51643793, "comment_id": 90253959, "body": "Thanks Henry, that works! I should have thought of it  :)"}], "tags": [], "owner": {"reputation": 9542, "user_id": 8068625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4spqa.png?s=128&g=1", "display_name": "Henry Woody", "link": "https://stackoverflow.com/users/8068625/henry-woody"}, "is_accepted": true, "score": 2, "last_activity_date": 1566510865, "last_edit_date": 1566510865, "creation_date": 1533168015, "answer_id": 51643793, "question_id": 51643755, "link": "https://stackoverflow.com/questions/51643755/numpy-reshape-reversal/51643793#51643793", "title": "Numpy reshape &quot;reversal&quot;", "body": "<p>To \"reverse\" a reshape, you can just call <code>reshape</code> again on the array to reshape it into the original dimensions.</p>\n\n<p>If you have an array <code>x</code> with dimensions (<code>n</code>, <code>m</code>) then:</p>\n\n<pre><code>x.reshape(kmax, jmax, imax, 6).reshape(n, m) == x\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 8880061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/897f4c26ce9940cda2da940b35bcd6cd?s=128&d=identicon&r=PG&f=1", "display_name": "Baron", "link": "https://stackoverflow.com/users/8880061/baron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4067, "favorite_count": 0, "accepted_answer_id": 51643793, "answer_count": 1, "score": 2, "last_activity_date": 1566510865, "creation_date": 1533167618, "question_id": 51643755, "link": "https://stackoverflow.com/questions/51643755/numpy-reshape-reversal", "title": "Numpy reshape &quot;reversal&quot;", "body": "<p>I read a 4D array from a file which is given in a 2D form i, j, k, x, y, z. \n<a href=\"https://i.stack.imgur.com/Aft8s.png\" rel=\"nofollow noreferrer\">Input file header and shape</a>\nI use numpy.reshape to reshape the 2D array to it's 3-D form. After making changes to this, I wish to write the file exactly the same order / format as I read it. \nI do not understand how to \"reverse\" numpy.reshape to put it back in the same format.</p>\n\n<pre><code>import numpy as np    \nimport pandas as pd\nfrom pandas import read_csv \n\n\nheader = read_csv(\"Input/Grid1_test.csv\", nrows=1,skipinitialspace=True)\n\nprint header.head()\n\nimax=header['IMAX'].iloc[0]\njmax=header['JMAX'].iloc[0]\nkmax=header['KMAX '].iloc[0]\n\nprint(imax,jmax,kmax)\n\n#read grid data with numpy array .. it is slow but probably worth it \ngrid_data = np.loadtxt('Input/Grid1_test.csv', delimiter=',', skiprows=3)\n\n\nsize_arr = np.array(grid_data).reshape(kmax, jmax, imax, 6)\n\n#do something\n\n#write the grid back into the file\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "numpy", "nltk", "spacy"], "comments": [{"owner": {"reputation": 1663, "user_id": 6321559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sEAjx.png?s=128&g=1", "display_name": "it&#39;s-yer-boy-chet", "link": "https://stackoverflow.com/users/6321559/its-yer-boy-chet"}, "edited": false, "score": 0, "creation_date": 1533168405, "post_id": 51643746, "comment_id": 90251866, "body": "Have you played around with the <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.text.CountVectorizer.html\" rel=\"nofollow noreferrer\">sklearn CountVectorizer</a>.  I&#39;m pretty sure it does what you want and I would assume it&#39;s well optimized, but I have not tested."}, {"owner": {"reputation": 21742, "user_id": 4650297, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/x1byc.jpg?s=128&g=1", "display_name": "BruceWayne", "link": "https://stackoverflow.com/users/4650297/brucewayne"}, "edited": false, "score": 1, "creation_date": 1533169977, "post_id": 51643746, "comment_id": 90252137, "body": "If this works and you&#39;re looking for tips on optimizing, I suggest instead posting to <a href=\"https://codereview.stackexchange.com/\">CodeReview</a>"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 21742, "user_id": 4650297, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/x1byc.jpg?s=128&g=1", "display_name": "BruceWayne", "link": "https://stackoverflow.com/users/4650297/brucewayne"}, "edited": false, "score": 0, "creation_date": 1533173136, "post_id": 51643746, "comment_id": 90252680, "body": "@Bruce, speedup questions, especially for numpy, are perfectly fine here on SO.  We answer those all the time."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1533173297, "post_id": 51643746, "comment_id": 90252697, "body": "<code>us</code> times like that look normal."}, {"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 1, "creation_date": 1533179835, "post_id": 51643746, "comment_id": 90253935, "body": "Tbh I don&#39;t think you can go much further than <i>list comprehension</i> plus <code>dicts</code> O(1) lookup"}, {"owner": {"reputation": 3231, "user_id": 8069403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WFeKp.png?s=128&g=1", "display_name": "xdze2", "link": "https://stackoverflow.com/users/8069403/xdze2"}, "edited": false, "score": 0, "creation_date": 1533237825, "post_id": 51643746, "comment_id": 90285061, "body": "this answer, <a href=\"https://cs.stackexchange.com/a/278\">Hash tables versus binary trees</a>, is interesting"}, {"owner": {"reputation": 328, "user_id": 8935218, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/01f876ebe116f4e1f03aae4d19d22859?s=128&d=identicon&r=PG&f=1", "display_name": "matt_07734", "link": "https://stackoverflow.com/users/8935218/matt-07734"}, "edited": false, "score": 0, "creation_date": 1533580552, "post_id": 51643746, "comment_id": 90388829, "body": "I&#39;ve heard that using a <code>set</code> of strings instead of a <code>list</code> of strings can be faster--i&#39;m curious if this is the case for you. (<a href=\"https://stackoverflow.com/questions/8929284/what-makes-sets-faster-than-lists-in-python\" title=\"what makes sets faster than lists in python\">stackoverflow.com/questions/8929284/&hellip;</a>)"}], "answers": [{"comments": [{"owner": {"reputation": 2085, "user_id": 1878808, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9493ec4c8c19c7f1f47fb9af2198c706?s=128&d=identicon&r=PG", "display_name": "ywat", "link": "https://stackoverflow.com/users/1878808/ywat"}, "edited": false, "score": 0, "creation_date": 1533314155, "post_id": 51648892, "comment_id": 90316876, "body": "This code, using gensim, does not speed up compared with the original code. On my laptop,  dict.doc2idx: 37us vs  PythonLoop(f function above): 9us."}], "tags": [], "owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "is_accepted": false, "score": 0, "last_activity_date": 1533198236, "creation_date": 1533198236, "answer_id": 51648892, "question_id": 51643746, "link": "https://stackoverflow.com/questions/51643746/fast-dictionary-lookup-for-word-list-in-python/51648892#51648892", "title": "Fast dictionary lookup for word list in Python", "body": "<p>There are multiple libraries to handle convert string/list of tokens to a vectorial representation. </p>\n\n<p>For example, with <code>gensim</code>:</p>\n\n<pre><code>&gt;&gt;&gt; import gensim\n&gt;&gt;&gt; from gensim.corpora import Dictionary\n&gt;&gt;&gt; documents = [['hello', 'world'], ['NLP', 'is', 'awesome']]\n&gt;&gt;&gt; dict = Dictionary(documents)\n\n# This is not necessary, but if you need to debug\n# the word and attached indices, you can do:\n\n&gt;&gt;&gt; {idx:dict[idx]for idx in dict}\n{0: 'hello', 1: 'world', 2: 'NLP', 3: 'awesome', 4: 'is'}\n\n# To get the indices of the words per document, e.g.\n&gt;&gt;&gt; dict.doc2idx('hello world'.split())\n[0, 1]\n&gt;&gt;&gt; dict.doc2idx('hello world is awesome'.split())\n[0, 1, 4, 3]\n</code></pre>\n"}], "owner": {"reputation": 2085, "user_id": 1878808, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9493ec4c8c19c7f1f47fb9af2198c706?s=128&d=identicon&r=PG", "display_name": "ywat", "link": "https://stackoverflow.com/users/1878808/ywat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 357, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1533198236, "creation_date": 1533167540, "question_id": 51643746, "link": "https://stackoverflow.com/questions/51643746/fast-dictionary-lookup-for-word-list-in-python", "title": "Fast dictionary lookup for word list in Python", "body": "<p>I'm doing NLP in Python 3 and trying to optimize the speed of a code.\nThe code converts a list of words to a list (or array) of numbers using a given dictionary.</p>\n\n<p>For example,</p>\n\n<pre><code>mydict = {'hello': 0, 'world': 1, 'this': 2, 'is': 3, 'an': 4, 'example': 5}\nword_list = ['hello', 'world']\n\ndef f(mydict, word_list):\n    return [mydict[w] for w in word_list]\n\n# f(mydict, word_list) == [1, 2]\n</code></pre>\n\n<p>I want to speed up the function f, especially when the word_list is about 100 words long. Is it possible? Use of external libraries like nltk, spacy, numpy etc is OK.</p>\n\n<p>Currently, it takes 6us on my laptop.</p>\n\n<pre><code>&gt;&gt;&gt; %timeit f(mydict, word_list*50)\n6.74 us +- 2.77 us per loop (mean +- std. dev. of 7 runs, 100000 loops each)\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "optimization", "keras", "gradient-descent"], "answers": [{"comments": [{"owner": {"reputation": 663, "user_id": 7189440, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/00c2b57447adc15c5879e38a16d67e7d?s=128&d=identicon&r=PG", "display_name": "AstroBen", "link": "https://stackoverflow.com/users/7189440/astroben"}, "edited": false, "score": 0, "creation_date": 1539951316, "post_id": 52888151, "comment_id": 92696817, "body": "Thank you! That&#39;s always great information to know."}], "tags": [], "owner": {"reputation": 180675, "user_id": 1090562, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d675b3e6225683ba6432496ec23ed806?s=128&d=identicon&r=PG", "display_name": "Salvador Dali", "link": "https://stackoverflow.com/users/1090562/salvador-dali"}, "is_accepted": false, "score": 2, "last_activity_date": 1539936128, "creation_date": 1539936128, "answer_id": 52888151, "question_id": 51643726, "link": "https://stackoverflow.com/questions/51643726/which-of-these-is-the-correct-implementation-of-cosine-decay-learning-rate-rewe/52888151#52888151", "title": "Which of these is the correct implementation of cosine decay (learning-rate reweighting for neural nets)?", "body": "<p>Just for your information, tf.train has implementation for many of these cosine decays:</p>\n\n<ul>\n<li><a href=\"https://www.tensorflow.org/api_docs/python/tf/train/cosine_decay\" rel=\"nofollow noreferrer\">cosine decay</a></li>\n<li><a href=\"https://www.tensorflow.org/api_docs/python/tf/train/cosine_decay_restarts\" rel=\"nofollow noreferrer\">cosine decay with restarts</a></li>\n<li><a href=\"https://www.tensorflow.org/api_docs/python/tf/train/linear_cosine_decay\" rel=\"nofollow noreferrer\">linear cosine decay</a></li>\n<li><a href=\"https://www.tensorflow.org/api_docs/python/tf/train/noisy_linear_cosine_decay\" rel=\"nofollow noreferrer\">noisy linear cosine decay</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 10265960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c26efbbd82f24405676296f8751cd47?s=128&d=identicon&r=PG&f=1", "display_name": "\ud45c\uc7a5\ubc25", "link": "https://stackoverflow.com/users/10265960/%ed%91%9c%ec%9e%a5%eb%b0%a5"}, "is_accepted": false, "score": 1, "last_activity_date": 1541076125, "creation_date": 1541076125, "answer_id": 53101494, "question_id": 51643726, "link": "https://stackoverflow.com/questions/51643726/which-of-these-is-the-correct-implementation-of-cosine-decay-learning-rate-rewe/53101494#53101494", "title": "Which of these is the correct implementation of cosine decay (learning-rate reweighting for neural nets)?", "body": "<p>Loshchilov &amp; Hutter proposed in their paper to update the learning rate after each batch:</p>\n\n<blockquote>\n  <p>Within the i-th run, we decay the learning rate with a cosine annealing <strong>for each batch</strong> [...],</p>\n</blockquote>\n\n<p>as you can see just above Eq. (5), where one run (or cycle) is typically one or several epochs.</p>\n\n<p>Several reasons could motivate this choice, including a <strong>large dataset size</strong>. With a large dataset, one might only run the optimization during few epochs. In this case, updating the learning rate every epoch would only provide few update opportunities. On the other hand, with a small dataset, one can perform more epochs with fewer batches per epoch, and this problem fades away. </p>\n\n<p>From an implementation point of view with Keras, a learning rate update every epoch is slightly more compact thanks to the <a href=\"https://keras.io/callbacks/#learningratescheduler\" rel=\"nofollow noreferrer\">LearningRateScheduler callback</a>. For example, a simple decay can implemented as</p>\n\n<pre><code>from keras.callbacks import LearningRateScheduler\n\nget_lr = lambda epoch: 0.99 ** epoch\nmodel.fit(..., callbacks=[LearningRateScheduler(get_lr)])\n</code></pre>\n"}], "owner": {"reputation": 663, "user_id": 7189440, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/00c2b57447adc15c5879e38a16d67e7d?s=128&d=identicon&r=PG", "display_name": "AstroBen", "link": "https://stackoverflow.com/users/7189440/astroben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3802, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1541076125, "creation_date": 1533167392, "last_edit_date": 1533169042, "question_id": 51643726, "link": "https://stackoverflow.com/questions/51643726/which-of-these-is-the-correct-implementation-of-cosine-decay-learning-rate-rewe", "title": "Which of these is the correct implementation of cosine decay (learning-rate reweighting for neural nets)?", "body": "<p>I've read the a <a href=\"https://arxiv.org/pdf/1608.03983.pdf\" rel=\"nofollow noreferrer\">Loshchilov &amp; Hutter</a> paper on Stochastic Gradient Descent with Warm Restart (SGDR), and I've found at least one implementation of it for keras (<a href=\"https://gist.github.com/jeremyjordan/5a222e04bb78c242f5763ad40626c452#file-sgdr-py\" rel=\"nofollow noreferrer\">like this one</a>). However, I can imagine two different implementations and want to bounce if off some folks.</p>\n\n<p>As coded <a href=\"https://gist.github.com/jeremyjordan/5a222e04bb78c242f5763ad40626c452#file-sgdr-py\" rel=\"nofollow noreferrer\">here</a>, the learning rate decreases with every mini-batch. However, I can imagine a different implementation where it only changes after each epoch. My own intuition says that the latter implementation makes more sense, however it seems most people are coding up the former. </p>\n\n<p>Thoughts?</p>\n"}, {"tags": ["python", "django", "dictionary"], "answers": [{"comments": [{"owner": {"reputation": 4574, "user_id": 2963703, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/05dbb03a093d0e76ca5b6622855cb3c4?s=128&d=identicon&r=PG&f=1", "display_name": "stackPusher", "link": "https://stackoverflow.com/users/2963703/stackpusher"}, "edited": false, "score": 2, "creation_date": 1533242486, "post_id": 51644295, "comment_id": 90287078, "body": "Actually values() doesn&#39;t load the data into memory, it returns a QuerySet object, akin to a sql statement. It isn&#39;t until you iterate over the queryset (in this case the <code>for blog in blogs</code> part) that the query is executed and the data is loaded. Water malooooooone"}, {"owner": {"reputation": 1661, "user_id": 856647, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/YWbzz.jpg?s=128&g=1", "display_name": "roob", "link": "https://stackoverflow.com/users/856647/roob"}, "reply_to_user": {"reputation": 4574, "user_id": 2963703, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/05dbb03a093d0e76ca5b6622855cb3c4?s=128&d=identicon&r=PG&f=1", "display_name": "stackPusher", "link": "https://stackoverflow.com/users/2963703/stackpusher"}, "edited": false, "score": 1, "creation_date": 1533242793, "post_id": 51644295, "comment_id": 90287225, "body": "@stackPusher You are correct. I have updated the answer with the incorrect information removed."}, {"owner": {"reputation": 4960, "user_id": 1850712, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cc0a5a588aafc7a1e42dcb9a5f9b975b?s=128&d=identicon&r=PG", "display_name": "Dora", "link": "https://stackoverflow.com/users/1850712/dora"}, "edited": false, "score": 0, "creation_date": 1533255695, "post_id": 51644295, "comment_id": 90290891, "body": "@WaterMalone got it, thx thx for the info, this is really helpful. But I am wondering as mentioned above saying <code>query is not executed until we iterate over the queryset</code>, you are saying it will not hit the database at this point until I do something like <code>for blog in blogs</code>?"}, {"owner": {"reputation": 1661, "user_id": 856647, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/YWbzz.jpg?s=128&g=1", "display_name": "roob", "link": "https://stackoverflow.com/users/856647/roob"}, "reply_to_user": {"reputation": 4960, "user_id": 1850712, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cc0a5a588aafc7a1e42dcb9a5f9b975b?s=128&d=identicon&r=PG", "display_name": "Dora", "link": "https://stackoverflow.com/users/1850712/dora"}, "edited": false, "score": 0, "creation_date": 1533256771, "post_id": 51644295, "comment_id": 90291133, "body": "@Dora Yes that is right. And my point is, if you only specify the subset of fields that you need, it will be a more efficient database query."}], "tags": [], "owner": {"reputation": 1661, "user_id": 856647, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/YWbzz.jpg?s=128&g=1", "display_name": "roob", "link": "https://stackoverflow.com/users/856647/roob"}, "is_accepted": true, "score": 3, "last_activity_date": 1533242760, "last_edit_date": 1533242760, "creation_date": 1533173225, "answer_id": 51644295, "question_id": 51643706, "link": "https://stackoverflow.com/questions/51643706/able-to-return-nested-dictionary-using-values-django/51644295#51644295", "title": "able to return nested dictionary using values? django", "body": "<p>This is not possible using <code>values</code>.</p>\n\n<p>The method you suggested works well. </p>\n\n<p>If you have a lot of extra fields on your model, and only need those two, a performance improvement would be to first load just the fields you need using values, then perform the list comprehension on them to reformat it as you specified. </p>\n\n<p>This avoids unnecessarily querying the database for fields you do not need.</p>\n"}], "owner": {"reputation": 4960, "user_id": 1850712, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cc0a5a588aafc7a1e42dcb9a5f9b975b?s=128&d=identicon&r=PG", "display_name": "Dora", "link": "https://stackoverflow.com/users/1850712/dora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 927, "favorite_count": 3, "accepted_answer_id": 51644295, "answer_count": 1, "score": 4, "last_activity_date": 1533242760, "creation_date": 1533167192, "question_id": 51643706, "link": "https://stackoverflow.com/questions/51643706/able-to-return-nested-dictionary-using-values-django", "title": "able to return nested dictionary using values? django", "body": "<p>let's say if I have a model named <code>Blog</code> and this is how the value works</p>\n\n<pre><code>&gt;&gt;&gt; Blog.objects.values()\n[{'id': 1, 'name': 'Beatles Blog', 'tagline': 'All the latest Beatles news.'}],\n&gt;&gt;&gt; Blog.objects.values('id', 'name')\n[{'id': 1, 'name': 'Beatles Blog'}]\n</code></pre>\n\n<p>but let's say if I want to make the name into another dict and get such in return </p>\n\n<pre><code>[{'id': 1, 'blog': { 'name': 'Beatles Blog'}}]\n</code></pre>\n\n<p>is the above possible by using value or something similiar?</p>\n\n<p>I know I can do something like which would work </p>\n\n<p><code>[{'id': blog.pk, 'blog': {'name': blog.name}} for blog in blogs]</code></p>\n\n<p>Thanks in advance for my curiosity </p>\n"}, {"tags": ["python", "r", "pandas", "loops", "csv"], "comments": [{"owner": {"reputation": 73862, "user_id": 3358272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/gteVQ.jpg?s=128&g=1", "display_name": "r2evans", "link": "https://stackoverflow.com/users/3358272/r2evans"}, "edited": false, "score": 0, "creation_date": 1533229175, "post_id": 51643696, "comment_id": 90281145, "body": "This was put on hold for the wrong reason. It&#39;s not too broad, I think the explanation is quite clear. It&#39;s not a great question, though, in that it provides no examples, no sample code. But that is not unclear, it&#39;s just under-justified."}], "answers": [{"tags": [], "owner": {"reputation": 73862, "user_id": 3358272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/gteVQ.jpg?s=128&g=1", "display_name": "r2evans", "link": "https://stackoverflow.com/users/3358272/r2evans"}, "is_accepted": false, "score": 1, "last_activity_date": 1533167517, "creation_date": 1533167517, "answer_id": 51643745, "question_id": 51643696, "link": "https://stackoverflow.com/questions/51643696/extract-one-specific-column-with-blank-lines-from-multiple-csv-files-and-merge-i/51643745#51643745", "title": "Extract one specific column with blank lines from multiple csv files and merge into one", "body": "<p>Fake data:</p>\n\n<pre><code>sapply(1:3, function(i) write.csv(mtcars, paste0(i,\".csv\"), row.names=FALSE))\n</code></pre>\n\n<p>results in three csv files, named <code>1.csv</code> through <code>3.csv</code>, each with:</p>\n\n<pre><code>\"mpg\",\"cyl\",\"disp\",\"hp\",\"drat\",\"wt\",\"qsec\",\"vs\",\"am\",\"gear\",\"carb\"\n21,6,160,110,3.9,2.62,16.46,0,1,4,4\n21,6,160,110,3.9,2.875,17.02,0,1,4,4\n22.8,4,108,93,3.85,2.32,18.61,1,1,4,1\n21.4,6,258,110,3.08,3.215,19.44,1,0,3,1\n...\n</code></pre>\n\n<p>The code:</p>\n\n<pre><code>write.csv(sapply(list.files(pattern=\"*.csv\"), function(a) read.csv(a)[,5]),\n          \"agg.csv\", row.names=FALSE)\n</code></pre>\n\n<p>results in a single CSV file, <code>agg.csv</code>, that contains </p>\n\n<pre><code>\"1.csv\",\"2.csv\",\"3.csv\"\n3.9,3.9,3.9\n3.9,3.9,3.9\n3.85,3.85,3.85\n3.08,3.08,3.08\n...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 10168300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee8cab38315fec91ef1fef9327fedd56?s=128&d=identicon&r=PG&f=1", "display_name": "user579145", "link": "https://stackoverflow.com/users/10168300/user579145"}, "edited": false, "score": 0, "creation_date": 1533181455, "post_id": 51643751, "comment_id": 90254295, "body": "Hello thank you very much for your help. But I have a stupid question. There is an error says &quot;No objects to concatenate&quot;. Is it because I should replace csv_file in the pd.read_csv function by my csv file names?  Thanks!"}, {"owner": {"reputation": 3, "user_id": 10168300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee8cab38315fec91ef1fef9327fedd56?s=128&d=identicon&r=PG&f=1", "display_name": "user579145", "link": "https://stackoverflow.com/users/10168300/user579145"}, "edited": false, "score": 0, "creation_date": 1533184746, "post_id": 51643751, "comment_id": 90255116, "body": "Ok I think I figure out this problem. But there is another error now. It says &quot;Usecols do not match columns, columns expected but not found&quot;. Do you mind telling me how to solve it?"}, {"owner": {"reputation": 2014, "user_id": 7480990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4d77695a75bd92bb2da36de7ae7d917?s=128&d=identicon&r=PG&f=1", "display_name": "tobsecret", "link": "https://stackoverflow.com/users/7480990/tobsecret"}, "reply_to_user": {"reputation": 3, "user_id": 10168300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee8cab38315fec91ef1fef9327fedd56?s=128&d=identicon&r=PG&f=1", "display_name": "user579145", "link": "https://stackoverflow.com/users/10168300/user579145"}, "edited": false, "score": 0, "creation_date": 1533220466, "post_id": 51643751, "comment_id": 90276003, "body": "You have to change the name of column_of_interest to the name of that column in your csv but let me make an edit that should make this unnecessary"}, {"owner": {"reputation": 2014, "user_id": 7480990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4d77695a75bd92bb2da36de7ae7d917?s=128&d=identicon&r=PG&f=1", "display_name": "tobsecret", "link": "https://stackoverflow.com/users/7480990/tobsecret"}, "reply_to_user": {"reputation": 3, "user_id": 10168300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee8cab38315fec91ef1fef9327fedd56?s=128&d=identicon&r=PG&f=1", "display_name": "user579145", "link": "https://stackoverflow.com/users/10168300/user579145"}, "edited": false, "score": 0, "creation_date": 1533220598, "post_id": 51643751, "comment_id": 90276094, "body": "There, take a look again now!"}, {"owner": {"reputation": 3, "user_id": 10168300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee8cab38315fec91ef1fef9327fedd56?s=128&d=identicon&r=PG&f=1", "display_name": "user579145", "link": "https://stackoverflow.com/users/10168300/user579145"}, "edited": false, "score": 0, "creation_date": 1533229634, "post_id": 51643751, "comment_id": 90281366, "body": "Thank you for your explanation. It is very clear. And the code works with my other csv files. But it is my fault. I wasn&#39;t so clear. I have a file like this with blank lines. <a href=\"https://drive.google.com/drive/folders/10V4s4QmeO3tFvArUYju6rlUI78-owVPO?usp=sharing\" rel=\"nofollow noreferrer\">drive.google.com/drive/folders/&hellip;</a>. And I only want the 5th column while keeping all the blanks. Do you mind having a look and giving me some hints? Thank you soooo much!"}, {"owner": {"reputation": 2014, "user_id": 7480990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4d77695a75bd92bb2da36de7ae7d917?s=128&d=identicon&r=PG&f=1", "display_name": "tobsecret", "link": "https://stackoverflow.com/users/7480990/tobsecret"}, "reply_to_user": {"reputation": 3, "user_id": 10168300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee8cab38315fec91ef1fef9327fedd56?s=128&d=identicon&r=PG&f=1", "display_name": "user579145", "link": "https://stackoverflow.com/users/10168300/user579145"}, "edited": false, "score": 0, "creation_date": 1533231797, "post_id": 51643751, "comment_id": 90282380, "body": "You can just set the <code>skiprows</code> keyword argumant to <code>9</code>, as it seems you don&#39;t want the first 9 lines. As for the rest of the spreadsheet, I would advise you to just filter those lines you don&#39;t want out after reading them in. You can get rid of empty lines by using <code>combined_df =  combined_df.dropna()</code> and you can use pd.replace to replace the <code>(Year-to-date)</code> rows."}, {"owner": {"reputation": 3, "user_id": 10168300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee8cab38315fec91ef1fef9327fedd56?s=128&d=identicon&r=PG&f=1", "display_name": "user579145", "link": "https://stackoverflow.com/users/10168300/user579145"}, "edited": false, "score": 0, "creation_date": 1533240508, "post_id": 51643751, "comment_id": 90286199, "body": "Thank you very much! It works now! Thank you for your patience!"}, {"owner": {"reputation": 2014, "user_id": 7480990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4d77695a75bd92bb2da36de7ae7d917?s=128&d=identicon&r=PG&f=1", "display_name": "tobsecret", "link": "https://stackoverflow.com/users/7480990/tobsecret"}, "reply_to_user": {"reputation": 3, "user_id": 10168300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee8cab38315fec91ef1fef9327fedd56?s=128&d=identicon&r=PG&f=1", "display_name": "user579145", "link": "https://stackoverflow.com/users/10168300/user579145"}, "edited": false, "score": 0, "creation_date": 1533242457, "post_id": 51643751, "comment_id": 90287066, "body": "No problem, glad it helped! For future reference - the <a href=\"https://pandas.pydata.org/pandas-docs/stable/index.html\" rel=\"nofollow noreferrer\"><code>pandas documentation</code></a> is really good, you can find a lot of examples there!"}], "tags": [], "owner": {"reputation": 2014, "user_id": 7480990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4d77695a75bd92bb2da36de7ae7d917?s=128&d=identicon&r=PG&f=1", "display_name": "tobsecret", "link": "https://stackoverflow.com/users/7480990/tobsecret"}, "is_accepted": true, "score": 0, "last_activity_date": 1533231973, "last_edit_date": 1533231973, "creation_date": 1533167578, "answer_id": 51643751, "question_id": 51643696, "link": "https://stackoverflow.com/questions/51643696/extract-one-specific-column-with-blank-lines-from-multiple-csv-files-and-merge-i/51643751#51643751", "title": "Extract one specific column with blank lines from multiple csv files and merge into one", "body": "<p>You can use the <code>usecols</code> argument of <code>pandas.read_csv</code>.</p>\n\n<pre><code>import pandas as pd\nfrom glob import glob\n</code></pre>\n\n<p>So what we are doing here is that we are looping over all files in the current directory that end with <code>.csv</code> and then for each of those files only read in the column of interest, i.e. the 5th column. We write <code>usecols=[4]</code> because pandas uses 0-based indexing, so out of 0, 1, 2, 3, 4, the fifth number is 4. Additionally you asked to skip blank lines and your sample data contains 9 blank lines leading up to actual data, so we will set <code>skiprows</code> to 9.\nWe concatenate all of those into one DataFrame using <code>pd.concat</code>.</p>\n\n<pre><code>combined_df = pd.concat(\n                        [\n                         pd.read_csv(csv_file, usecols=[4], skiprows=9) \n                         for csv_file in glob('*.csv')\n                         ]\n                        )\n</code></pre>\n\n<p>To get rid of blank lines from your DataFrame, you can simply use:</p>\n\n<pre><code>combined_df = combined_df.dropna()\n</code></pre>\n\n<p>This <code>combined_df</code> we can then simply write to file:</p>\n\n<pre><code>combined_df.to_csv('combined_column_5.csv')\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10168300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee8cab38315fec91ef1fef9327fedd56?s=128&d=identicon&r=PG&f=1", "display_name": "user579145", "link": "https://stackoverflow.com/users/10168300/user579145"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 0, "closed_date": 1533205838, "accepted_answer_id": 51643751, "answer_count": 2, "score": -1, "last_activity_date": 1533231973, "creation_date": 1533167149, "last_edit_date": 1533230857, "question_id": 51643696, "link": "https://stackoverflow.com/questions/51643696/extract-one-specific-column-with-blank-lines-from-multiple-csv-files-and-merge-i", "closed_reason": "Needs more focus", "title": "Extract one specific column with blank lines from multiple csv files and merge into one", "body": "<p>I have my csv files in the same folder. I want to get only the data in the 5th column from all my csv files and write the data into a single file. But there are blank lines in my csv files. <a href=\"https://drive.google.com/file/d/1SospIppACOrLeKPU_9OknnDLnDpatIqE/view?usp=sharing\" rel=\"nofollow noreferrer\">https://drive.google.com/file/d/1SospIppACOrLeKPU_9OknnDLnDpatIqE/view?usp=sharing</a></p>\n\n<p>How can I keep the blanks with pandas.read_csv command?</p>\n\n<p>Many thanks!</p>\n"}, {"tags": ["python", "speech-recognition"], "comments": [{"owner": {"reputation": 415, "user_id": 10166712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S5Jai.jpg?s=128&g=1", "display_name": "zbys", "link": "https://stackoverflow.com/users/10166712/zbys"}, "edited": false, "score": 0, "creation_date": 1533167762, "post_id": 51643689, "comment_id": 90251726, "body": "Not sure what you&#39;re trying to do, but a quick look at the doc and it doesn&#39;t seem that that&#39;s a method in the library <a href=\"https://pypi.org/project/SpeechRecognition/\" rel=\"nofollow noreferrer\">pypi.org/project/SpeechRecognition</a>"}, {"owner": {"reputation": 25, "user_id": 8384454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2c83f93fabfab2939365b6d5914e546?s=128&d=identicon&r=PG&f=1", "display_name": "SmooK", "link": "https://stackoverflow.com/users/8384454/smook"}, "reply_to_user": {"reputation": 415, "user_id": 10166712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S5Jai.jpg?s=128&g=1", "display_name": "zbys", "link": "https://stackoverflow.com/users/10166712/zbys"}, "edited": false, "score": 0, "creation_date": 1533168047, "post_id": 51643689, "comment_id": 90251782, "body": "@zacharybys Which method are you talking about? Recognizer() Is a method, isn&#39;t it? (fairly new to python)"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 8384454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2c83f93fabfab2939365b6d5914e546?s=128&d=identicon&r=PG&f=1", "display_name": "SmooK", "link": "https://stackoverflow.com/users/8384454/smook"}, "edited": false, "score": 0, "creation_date": 1533168512, "post_id": 51643826, "comment_id": 90251890, "body": "I can&#39;t believe I am that stupid, thank you so much. At first it was named speech_recognition.py, but after I googled the error I just copied the script and renamed the file, but the old file still was there. Thank you so much."}], "tags": [], "owner": {"reputation": 657, "user_id": 5628686, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/87e283a6aa60f496c39d890a49366eec?s=128&d=identicon&r=PG&f=1", "display_name": "Lakshay Sharma", "link": "https://stackoverflow.com/users/5628686/lakshay-sharma"}, "is_accepted": true, "score": 3, "last_activity_date": 1534648515, "last_edit_date": 1534648515, "creation_date": 1533168341, "answer_id": 51643826, "question_id": 51643689, "link": "https://stackoverflow.com/questions/51643689/python-speech-recognition-attributeerror-module-speech-recognition-has-no-at/51643826#51643826", "title": "Python Speech Recognition: AttributeError: module &#39;speech_recognition&#39; has no attribute &#39;Recognizer&#39;", "body": "<p>It seems like you have a file <code>/home/pi/Documents/SB/speech_recognition.py</code>, and therefore it's looking for <code>Recognizer()</code> in your file (as opposed to the actual module <code>speech_recognition</code>). Try renaming your <code>speech_recognition.py</code> file to something else.</p>\n"}], "owner": {"reputation": 25, "user_id": 8384454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2c83f93fabfab2939365b6d5914e546?s=128&d=identicon&r=PG&f=1", "display_name": "SmooK", "link": "https://stackoverflow.com/users/8384454/smook"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 698, "favorite_count": 0, "accepted_answer_id": 51643826, "answer_count": 1, "score": 0, "last_activity_date": 1534648515, "creation_date": 1533167121, "question_id": 51643689, "link": "https://stackoverflow.com/questions/51643689/python-speech-recognition-attributeerror-module-speech-recognition-has-no-at", "title": "Python Speech Recognition: AttributeError: module &#39;speech_recognition&#39; has no attribute &#39;Recognizer&#39;", "body": "<p>I know there are several threads of my question, but no answer of it helped me and I tried anything I can think of and saw here.</p>\n\n<p>The error code im getting: </p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/home/pi/Documents/SB/sp_recog.py\", line 4, in &lt;module&gt;\n    import speech_recognition as sr\n  File \"/home/pi/Documents/SB/speech_recognition.py\", line 59, in &lt;module&gt;\n    data = recordAudio()\n  File \"/home/pi/Documents/SB/speech_recognition.py\" line 20, in recordAudio\n    r = sr.Recognizer()\nAttributeError: module 'speech_recognition' has no attribute 'Recognizer'\n</code></pre>\n\n<p>And the Python Script im using:</p>\n\n<pre><code>#!/usr/bin/env python3\n# Requires PyAudio and PySpeech.\n\nimport speech_recognition as sr\nimport vlc\nimport time\nimport os\nfrom time import ctime\nfrom gtts import gTTS\n\ndef speak(audioString):\n    print(audioString)\n    tts = gTTS(text=audioString, lang='de')\n    tts.save(\"audio.mp3\")\n    os.system(\"mpg321 audio.mp3\")\n\ndef recordAudio():\n    # Record Audio\n    r = sr.Recognizer()\n    p = vlc.MediaPlayer(\"PRIVATE\")\n    with p.play() as source:\n        print(\"Say something!\")\n        audio = r.listen(source)\n\n    # Speech recognition using Google Speech Recognition\n    data = \"\"\n    try:\n        # Uses the default API key\n        # To use another API key: `r.recognize_google(audio, key=\"GOOGLE_SPEECH_RECOGNITION_API_KEY\")`\n        data = r.recognize_google(audio)\n        print(\"You said: \" + data)\n    except sr.UnknownValueError:\n        print(\"Google Speech Recognition could not understand audio\")\n    except sr.RequestError as e:\n        print(\"Could not request results from Google Speech Recognition service; {0}\".format(e))\n\n    return data\n\n\ndef PRIVATE(data):\n    if \"PRIVATE\" in data:\n        speak(\"PRIVATE\")\n\n    if \"PRIVATE\" in data:\n        speak(ctime())\n\n    if \"PRIVATE\" in data:\n        data = data.split(\" \")\n        location = data[2]\n        speak(\"PRIVATE\")\n\n\n# initialization\ntime.sleep(2)\nspeak(\"PRIVATE\")\nwhile 1:\n    data = recordAudio()\n    PRIVATE(data)\n</code></pre>\n\n<p>I changed some of the code because I don't want it to be read. I copied the script from a site and modified it so I can work with it.</p>\n\n<p>Things I tried:</p>\n\n<blockquote>\n  <ul>\n  <li>Changing the filename</li>\n  <li>Compiling the script to a executable via PYInstaller</li>\n  <li>Reinstall Speech Recognizer</li>\n  <li>Reinstall PyAudio</li>\n  <li>Reinstall Python_VLC (while I don't think the error is because of that library, It's worth a atleast.)</li>\n  </ul>\n</blockquote>\n\n<p>I would appreciate any help and I hope if the issue will be resolved that other people with the same problem benefit from this thread, thank you.</p>\n"}, {"tags": ["python", "python-3.x", "numpy", "scipy", "numerical-integration"], "comments": [{"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 2, "creation_date": 1533167381, "post_id": 51643687, "comment_id": 90251645, "body": "To use the <code>exp</code> function to get <code>e</code>, use <code>exp(1)</code>.  That is, <code>val, err = quad(f, exp(1), exp(2))</code>"}, {"owner": {"reputation": 1, "user_id": 10168309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d902469e6acae311b8a05554c2f898e3?s=128&d=identicon&r=PG&f=1", "display_name": "Alan Dennison", "link": "https://stackoverflow.com/users/10168309/alan-dennison"}, "reply_to_user": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1533167459, "post_id": 51643687, "comment_id": 90251656, "body": "Using exp(1) outputs .12011 which is near double the true solution"}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1533167576, "post_id": 51643687, "comment_id": 90251681, "body": "It looks like the upper limit should be <code>2*exp(1)</code>, not <code>exp(2)</code>.  With <code>val, err = quad(f, exp(1), 2*exp(1))</code>, I get <code>val = 0.06932400271887294</code>."}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1533167686, "post_id": 51643687, "comment_id": 90251705, "body": "Also, numpy includes the value of <code>e</code> as a predefined constant, <code>np.e</code>.  So you could also use <code>val, err = quad(f, np.e, 2*np.e)</code>."}, {"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1533168108, "post_id": 51643687, "comment_id": 90251797, "body": "Also, please indent and format your code properly. Thnx!"}, {"owner": {"reputation": 1, "user_id": 10168309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d902469e6acae311b8a05554c2f898e3?s=128&d=identicon&r=PG&f=1", "display_name": "Alan Dennison", "link": "https://stackoverflow.com/users/10168309/alan-dennison"}, "reply_to_user": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1533168175, "post_id": 51643687, "comment_id": 90251816, "body": "Thank you @Bazingaa and @WarrenWeckesser!"}], "answers": [{"tags": [], "owner": {"reputation": 2116, "user_id": 7247547, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9edc71b8ad82b60fb9955e8adcede03a?s=128&d=identicon&r=PG&f=1", "display_name": "kevinkayaks", "link": "https://stackoverflow.com/users/7247547/kevinkayaks"}, "is_accepted": false, "score": 1, "last_activity_date": 1533167953, "last_edit_date": 1533167953, "creation_date": 1533167458, "answer_id": 51643736, "question_id": 51643687, "link": "https://stackoverflow.com/questions/51643687/how-to-use-exp-in-integration-function/51643736#51643736", "title": "How to use exp() in integration function?", "body": "<p>numpy's exp is a function, not a number. You want </p>\n\n<pre><code>exp(1) = e\nexp(2) = e**2\n</code></pre>\n\n<p>or maybe </p>\n\n<pre><code>import numpy as np\nnp.e\nnp.e**2\n</code></pre>\n\n<p>as your integration limits. </p>\n\n<p>That said, I get </p>\n\n<pre><code>from numpy import exp, log\n\ndef f(x): \n    return log(log(x))/(x*log(x**2))\n\nval, err = quad(f, exp(1), exp(2))\nval\n</code></pre>\n\n<p>returning 0.12011325347955035</p>\n\n<p>This is definitely the value of this integral. You can change variables to verify </p>\n\n<pre><code>val,err = quad(lambda x: log(x)/(2*x),1,2) \n</code></pre>\n\n<p>which gives the same result </p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 10168309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d902469e6acae311b8a05554c2f898e3?s=128&d=identicon&r=PG&f=1", "display_name": "Alan Dennison", "link": "https://stackoverflow.com/users/10168309/alan-dennison"}, "edited": false, "score": 0, "creation_date": 1533167600, "post_id": 51643741, "comment_id": 90251685, "body": "Using exp(1) outputs .12011 which is near double the true solution...checking my actual function now..."}, {"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "reply_to_user": {"reputation": 1, "user_id": 10168309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d902469e6acae311b8a05554c2f898e3?s=128&d=identicon&r=PG&f=1", "display_name": "Alan Dennison", "link": "https://stackoverflow.com/users/10168309/alan-dennison"}, "edited": false, "score": 0, "creation_date": 1533167685, "post_id": 51643741, "comment_id": 90251704, "body": "<code>exp(1)</code> is the correct way to do it. I am doubting the function"}, {"owner": {"reputation": 1, "user_id": 10168309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d902469e6acae311b8a05554c2f898e3?s=128&d=identicon&r=PG&f=1", "display_name": "Alan Dennison", "link": "https://stackoverflow.com/users/10168309/alan-dennison"}, "edited": false, "score": 0, "creation_date": 1533167960, "post_id": 51643741, "comment_id": 90251763, "body": "Agreed exp(1) is how you do it. The issue with my code was the upper limit where I put exp(2) instead of 2*exp(1). Ty!"}, {"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "reply_to_user": {"reputation": 1, "user_id": 10168309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d902469e6acae311b8a05554c2f898e3?s=128&d=identicon&r=PG&f=1", "display_name": "Alan Dennison", "link": "https://stackoverflow.com/users/10168309/alan-dennison"}, "edited": false, "score": 0, "creation_date": 1533168145, "post_id": 51643741, "comment_id": 90251810, "body": "Surprised to see this typographical error on Wolfram Alpha snapshot"}], "tags": [], "owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "is_accepted": false, "score": 0, "last_activity_date": 1533168012, "last_edit_date": 1533168012, "creation_date": 1533167494, "answer_id": 51643741, "question_id": 51643687, "link": "https://stackoverflow.com/questions/51643687/how-to-use-exp-in-integration-function/51643741#51643741", "title": "How to use exp() in integration function?", "body": "<p>Just replace <code>exp()</code> by <code>exp(1)</code> and you are good to go. By the way, once you have figured out the correct function, you can also use one liner lambda functions. Your code is perfectly fine. I thought of just sharing another possible way to implement the same thing.</p>\n\n<pre><code>f = lambda x: np.log(np.log(x))/(x*np.log(x**2))\nval, err = quad(f, exp(1), 2*exp(1))\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10168309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d902469e6acae311b8a05554c2f898e3?s=128&d=identicon&r=PG&f=1", "display_name": "Alan Dennison", "link": "https://stackoverflow.com/users/10168309/alan-dennison"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1533171115, "creation_date": 1533167110, "last_edit_date": 1533171115, "question_id": 51643687, "link": "https://stackoverflow.com/questions/51643687/how-to-use-exp-in-integration-function", "title": "How to use exp() in integration function?", "body": "<p>Here is a snippet of my code. </p>\n\n<pre><code>from scipy.integrate import quad\nfrom numpy import exp, log, inf\n\ndef f(x):\n    return log(log(x))/(x*log(x**2))\n\nval, err = quad(f, exp(), exp(2))\nval\n</code></pre>\n\n<p>I know the code is structured correctly but I cannot format the <code>exp()</code> correctly. What am I doing wrong? The function should output 0.069324. Thanks ahead of time for the help!!!</p>\n\n<p>Here is the answer from WolfRamAlpha:</p>\n\n<p><a href=\"https://i.stack.imgur.com/CIxbi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CIxbi.png\" alt=\"equation and result\"></a></p>\n"}, {"tags": ["python", "django-models", "django-rest-framework", "django-views"], "comments": [{"owner": {"reputation": 54482, "user_id": 8283848, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/YiHgN.jpg?s=128&g=1", "display_name": "JPG", "link": "https://stackoverflow.com/users/8283848/jpg"}, "edited": false, "score": 1, "creation_date": 1533182496, "post_id": 51643680, "comment_id": 90254527, "body": "add your models.py"}, {"owner": {"reputation": 33, "user_id": 10136023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff9b3a6b76434f55d45e3a5c9aa5f3d4?s=128&d=identicon&r=PG&f=1", "display_name": "baduser", "link": "https://stackoverflow.com/users/10136023/baduser"}, "reply_to_user": {"reputation": 54482, "user_id": 8283848, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/YiHgN.jpg?s=128&g=1", "display_name": "JPG", "link": "https://stackoverflow.com/users/8283848/jpg"}, "edited": false, "score": 0, "creation_date": 1533266234, "post_id": 51643680, "comment_id": 90292878, "body": "no you guys dont need it"}], "owner": {"reputation": 33, "user_id": 10136023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff9b3a6b76434f55d45e3a5c9aa5f3d4?s=128&d=identicon&r=PG&f=1", "display_name": "baduser", "link": "https://stackoverflow.com/users/10136023/baduser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 20, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1533167008, "creation_date": 1533167008, "question_id": 51643680, "link": "https://stackoverflow.com/questions/51643680/filtering-in-django-with-foriegn-key-references", "title": "filtering in django with foriegn key references", "body": "<p>I have a view that is taking in query params and searching for venues which meet that query param.</p>\n\n<pre><code> cuisine = self.request.query_params.getlist('cuisine', 0)\n        if cuisine != 0:\n            cuisinelist =[]\n            for cuisine in cuisinelist:\n                cuisinepk = get_object_or_404(Cuisine, name=cuisine)\n                cuisinepk = cuisinepk.pk\n                cuisinelist.append(cuisinepk)\n                print('this is the cuisine pk')\n                print(cuisinepk)\n            venuelist = venuelist.filter(Q(cuisine1__in=cuisinelist) | Q(cuisine2__in=cuisinelist))\n</code></pre>\n\n<p>But it is not working in fact I do not get any returned venues.</p>\n\n<p>the cuisine1 and cuisine2 in a venue object look like this.</p>\n\n<pre><code>cuisine1 = models.ForeignKey(Cuisine, on_delete=models.DO_NOTHING, related_name='cuisine1', blank=True, null=True)\n    cuisine2 = models.ForeignKey(Cuisine, on_delete=models.DO_NOTHING, related_name='cuisine2', blank=True, null=True)\n</code></pre>\n\n<p>I use this method when I wanted to check relations within a room. I am wondering if I need to do the same? What is the correct method?</p>\n\n<pre><code>seatedcapacity = self.request.query_params.get('seatedcapacity',0)\n        if seatedcapacity != 0:\n            try:\n                seatedcapacity = int(seatedcapacity)\n            except ValueError:\n                return Response(status=status.HTTP_400_BAD_REQUEST)\n            rooms = Room.objects.filter(venue=OuterRef('pk'), seatedcapacity__gte=seatedcapacity)\n            venuelist = venuelist.annotate(hasseatedcapacity=Exists(rooms))\n            venuelist = venuelist.filter(Q(hasseatedcapacity=True) | Q(fullbuyoutseatedcapacity__gte=seatedcapacity))\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "keras"], "comments": [{"owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1533175885, "post_id": 51643678, "comment_id": 90253197, "body": "By default TensorFlow allocates all GPU memory and manages it internally."}], "answers": [{"comments": [{"owner": {"reputation": 1629, "user_id": 2927848, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7e21a18807ebac8e078272cfdeb6b7dd?s=128&d=identicon&r=PG&f=1", "display_name": "Chase R Lewis", "link": "https://stackoverflow.com/users/2927848/chase-r-lewis"}, "edited": false, "score": 0, "creation_date": 1533167570, "post_id": 51643718, "comment_id": 90251679, "body": "hm where are the 50&#39;s coming from? I don&#39;t think I understand that?  I thought the parameters were corresponding to 128*3*3. What am I missing?"}, {"owner": {"reputation": 73682, "user_id": 2097240, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/JskU5.jpg?s=128&g=1", "display_name": "Daniel M&#246;ller", "link": "https://stackoverflow.com/users/2097240/daniel-m%c3%b6ller"}, "reply_to_user": {"reputation": 1629, "user_id": 2927848, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7e21a18807ebac8e078272cfdeb6b7dd?s=128&d=identicon&r=PG&f=1", "display_name": "Chase R Lewis", "link": "https://stackoverflow.com/users/2927848/chase-r-lewis"}, "edited": false, "score": 0, "creation_date": 1533167658, "post_id": 51643718, "comment_id": 90251697, "body": "You&#39;re talking about the parameters of the &quot;convolutional&quot; layer. I&#39;m talking about the parameters of the <code>Dense</code> layer. You have an image, 50x50x128 as input for it."}, {"owner": {"reputation": 1629, "user_id": 2927848, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7e21a18807ebac8e078272cfdeb6b7dd?s=128&d=identicon&r=PG&f=1", "display_name": "Chase R Lewis", "link": "https://stackoverflow.com/users/2927848/chase-r-lewis"}, "edited": false, "score": 0, "creation_date": 1533168062, "post_id": 51643718, "comment_id": 90251788, "body": "ah much appreciated. I understand now. I didn&#39;t realize how pool shrunk the data. I thought it  was going down to 3*3128/(2*2). Not 99*99*128/(2*2)  I didn&#39;t realize I was preserving so many parameters. Thanks!"}], "tags": [], "owner": {"reputation": 73682, "user_id": 2097240, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/JskU5.jpg?s=128&g=1", "display_name": "Daniel M&#246;ller", "link": "https://stackoverflow.com/users/2097240/daniel-m%c3%b6ller"}, "is_accepted": true, "score": 1, "last_activity_date": 1533167900, "last_edit_date": 1533167900, "creation_date": 1533167312, "answer_id": 51643718, "question_id": 51643678, "link": "https://stackoverflow.com/questions/51643678/new-to-keras-massive-amounts-of-memory-conv2d/51643718#51643718", "title": "New to Keras, massive amounts of memory Conv2D", "body": "<p>This is awfully big:</p>\n\n<pre><code>model.add(Flatten())  #shape: (batch, 128*50*50)\nmodel.add(Dense(101*101,activation='sigmoid')) #parameters: 128*50*50*101*101 + 101*101 = 3264330201\n</code></pre>\n\n<p>THREE BILLION parameters. (Check your <code>model.summary()</code> to confirm)</p>\n\n<p>You're applying a dense layer to everything with the flatten: channels * pixels * pixels.   </p>\n\n<p>I suggest you look for U-net style models (fully convolutional).\nOr if you do want to use dense layers, use some kind of <a href=\"https://keras.io/layers/pooling/\" rel=\"nofollow noreferrer\">GlobalPooling</a> first. </p>\n\n<hr>\n\n<p>Summary:</p>\n\n<pre><code>input:    shape: (101,101,1)      params: 0\nconv:     shape: (99, 99, 128)    params: 3*3*1*128 + 3*3*128\npool:     shape: (50,50, 128)     params: 0\nflat:     shape: (50*50*128,)     params: 0\ndense:    shape: (101*101,)       params: 50*50*128*101*101 + 101*101\n</code></pre>\n"}], "owner": {"reputation": 1629, "user_id": 2927848, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7e21a18807ebac8e078272cfdeb6b7dd?s=128&d=identicon&r=PG&f=1", "display_name": "Chase R Lewis", "link": "https://stackoverflow.com/users/2927848/chase-r-lewis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 325, "favorite_count": 0, "accepted_answer_id": 51643718, "answer_count": 1, "score": 0, "last_activity_date": 1533167900, "creation_date": 1533167003, "question_id": 51643678, "link": "https://stackoverflow.com/questions/51643678/new-to-keras-massive-amounts-of-memory-conv2d", "title": "New to Keras, massive amounts of memory Conv2D", "body": "<p>My understanding from a convolution neural network is it is a set of smaller filters that applies over an image.</p>\n\n<p>So a Conv2D like in the simple model below</p>\n\n<pre><code>model = Sequential()\nmodel.add(Conv2D(128,(3,3),activation='relu',input_shape=(101,101,1)))\nmodel.add(MaxPooling2D(pool_size=(2,2)))\nmodel.add(Flatten())\nmodel.add(Dense(101*101,activation='sigmoid'))\n</code></pre>\n\n<p>parameter = 128*3*3 = 8192\nbyte count = parameters*4 =  32768 bytes</p>\n\n<p>The reality i'm seeing is that tensorflow my backend is trying to allocate 12.5GB of video memory for this training. </p>\n\n<p>My data is being passed to it as a (4000,101,101,1) array like in the MNIST examples which used a (60000,28,28,1) array. The data for my whole array converted to floats is ~326MB. </p>\n\n<p>Am I doing something wrong or is it near impossible to train images on GPU without literally 10's of GB of video ram? I have 8 GB and am not expecting to create something world changing, but the numbers. Do I need to prep my data differently? I tried passing half the data and the memory allocation was basically the same, but changing the filter count to 30 lets me compile with no errors. Am I misunderstanding the parameters? Any assistance would be appreciated.</p>\n\n<p>I thought 128 was the total number of filters. Is it the Depth of the filters, not the total number of kernels per pass? Read the documentation and still think i'm missing something.</p>\n"}, {"tags": ["python", "html", "flask", "request"], "comments": [{"owner": {"reputation": 935, "user_id": 6759854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kFnni.jpg?s=128&g=1", "display_name": "Xiwen Li", "link": "https://stackoverflow.com/users/6759854/xiwen-li"}, "edited": false, "score": 0, "creation_date": 1533167546, "post_id": 51643669, "comment_id": 90251674, "body": "There are two forms."}], "answers": [{"tags": [], "owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "is_accepted": true, "score": 1, "last_activity_date": 1533167385, "creation_date": 1533167385, "answer_id": 51643725, "question_id": 51643669, "link": "https://stackoverflow.com/questions/51643669/flask-request-issue/51643725#51643725", "title": "Flask request issue", "body": "<p>try <code>request.form.get(\"0\")</code> </p>\n\n<p>its because your inputs name is not <code>\"name\"</code> so there is no value in <code>request.form.get(\"name\")</code></p>\n\n<p><code>&lt;input type=\"number\" name=\"{{ i }}\" placeholder=\"0\" step=\"1\" min=\"0\" max=\"10\" formmethod=\"post\"&gt;</code></p>\n\n<p>sets the name to whatever <code>i</code> is (ie a value from 0..N)..,</p>\n"}], "owner": {"reputation": 13, "user_id": 8274758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wlpQm.png?s=128&g=1", "display_name": "pyRN", "link": "https://stackoverflow.com/users/8274758/pyrn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 51643725, "answer_count": 1, "score": 1, "last_activity_date": 1533167385, "creation_date": 1533166913, "question_id": 51643669, "link": "https://stackoverflow.com/questions/51643669/flask-request-issue", "title": "Flask request issue", "body": "<p>I'm making different sized tables base off a given list and it is generated via a for loop with flask in HTML.  The issue that I am having is that I'm not sure how to retrieve the values that are being entered into the type=\"number\" form.  Here is an example of my code.</p>\n\n<p>HTML code:</p>\n\n<pre><code>&lt;table&gt;\n    &lt;tr&gt;\n        &lt;th&gt;&lt;h1&gt;Name&lt;/h1&gt;&lt;/th&gt;\n        &lt;th&gt;&lt;h1&gt;Number&lt;/h1&gt;&lt;/th&gt;\n    &lt;/tr&gt;\n    {% for i in range(names|length) %}\n        &lt;tr&gt;\n            &lt;td&gt;&lt;h2&gt;{{ names[i] }}&lt;/h2&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;form&gt;\n                    &lt;input type=\"number\" name=\"{{ i }}\" placeholder=\"0\" step=\"1\" min=\"0\" max=\"10\" formmethod=\"post\"&gt;\n                &lt;/form&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;form&gt;\n                    &lt;input type=\"submit\" class=\"btn\" name=\"save_button\" value=\"Save\" formmethod=\"post\"&gt;\n                &lt;/form&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n    {% endfor %}\n&lt;/table&gt;\n</code></pre>\n\n<p>Flask code:</p>\n\n<pre><code>@app.route('/', methods=['GET', 'POST'])\ndef phone():\n    names = ['Jacob', 'Joe', 'Billy', 'Sue', 'Sally']\n\n    if request.form.get('save_button'):\n        for name in names:\n            print(request.form.get('name')\n\n    return render_template('phone.html', names=names)\n</code></pre>\n\n<p>The only thing returned is \"None.\"  Any help is greatly appreciated. </p>\n"}, {"tags": ["python", "arrays", "numpy", "bitwise-operators", "array-broadcasting"], "answers": [{"tags": [], "owner": {"reputation": 969, "user_id": 4549174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d2f8b5a0d7529eb074b3872371554c4?s=128&d=identicon&r=PG&f=1", "display_name": "klim", "link": "https://stackoverflow.com/users/4549174/klim"}, "is_accepted": true, "score": 1, "last_activity_date": 1533174725, "creation_date": 1533174725, "answer_id": 51644453, "question_id": 51643654, "link": "https://stackoverflow.com/questions/51643654/numpy-broadcasting-bitwise-union-upon-no-bitwise-intersection/51644453#51644453", "title": "Numpy broadcasting bitwise union upon no bitwise intersection", "body": "<p>The question 2 is a bit confusing. Anyway, you can do $ and | operations efficiently using broadcasting.</p>\n\n<pre><code>import numpy as np\n\nj = np.zeros(3, dtype=int)\nk = np.zeros(3, dtype=int)\nk[0] = 2\nk[1] = 6\nk[2] = 10\nj[0] = 2\nj[1] = 8\nj[2] = 1\n\n# alter shape to broadcast\nk_ = k[None].T\nr = (j|k_)[j&amp;k_==0]\nprint(r)\n</code></pre>\n\n<p>This results in</p>\n\n<pre><code>[10  3 14  7 11]\n</code></pre>\n"}], "owner": {"reputation": 655, "user_id": 4570144, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10152794699891185/picture?type=large", "display_name": "Travis Black", "link": "https://stackoverflow.com/users/4570144/travis-black"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 51644453, "answer_count": 1, "score": 0, "last_activity_date": 1533174725, "creation_date": 1533166845, "question_id": 51643654, "link": "https://stackoverflow.com/questions/51643654/numpy-broadcasting-bitwise-union-upon-no-bitwise-intersection", "title": "Numpy broadcasting bitwise union upon no bitwise intersection", "body": "<p>I am writing an algorithm that has a common scenario.  I have two large arrays of integers.  Call them k and j (because thats what I called them in my test code).</p>\n\n<p>I take each element of k, and I take it's union with each element of j, BUT ONLY IF the intersection of the two elements is zero.</p>\n\n<p>Example:</p>\n\n<pre><code>j = np.zeros(3, dtype=int)\nk = np.zeros(3, dtype=int)\nk[0] = 2\nk[1] = 6\nk[2] = 10\nj[0] = 2\nj[1] = 8\nj[2] = 1\n\nfor i in xrange(3):\n    mask = (j&amp;k[i] == 0)\n    nextpart = (j|k[i])[mask]\n    print i, nextpart\n    print \"\"\n</code></pre>\n\n<blockquote>\n  <p>0 [10  3]</p>\n  \n  <p>1 [14  7]</p>\n  \n  <p>2 [11]</p>\n</blockquote>\n\n<h2>Question 1</h2>\n\n<p>Is this method actually efficient?  My algorithm is mostly based upon this operation right here, so it will make a large difference to know the best way to do this.</p>\n\n<h2>Question 2</h2>\n\n<p>For every two arrays, I want to output all of the results into a single 1d array.  As we can see, with the method above, I am outputting to different arrays.  I imagine I can use some sort of concatenation method, but I also suspect based on the little I know about arrays that this might be relatively time consuming.  I could use some advice on how to accomplish this efficiently.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["python", "django", "geodjango"], "answers": [{"tags": [], "owner": {"reputation": 1661, "user_id": 856647, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/YWbzz.jpg?s=128&g=1", "display_name": "roob", "link": "https://stackoverflow.com/users/856647/roob"}, "is_accepted": true, "score": 1, "last_activity_date": 1533168944, "last_edit_date": 1533168944, "creation_date": 1533168489, "answer_id": 51643846, "question_id": 51643573, "link": "https://stackoverflow.com/questions/51643573/geodjango-move-a-coordinate-a-fixed-distance-in-a-given-direction-e-g-move-a/51643846#51643846", "title": "GeoDjango: Move a coordinate a fixed distance in a given direction (e.g. move a point east by one mile)", "body": "<p>You can accomplish this using the <a href=\"https://jswhit.github.io/pyproj/pyproj.Geod-class.html\" rel=\"nofollow noreferrer\" title=\"pyproj\">Geod class</a> of pyproj.</p>\n\n<pre><code>from pyproj import Geod\ngeoid = Geod(ellps='WGS84')\n\ndef add_distance(lat, lng, az, dist):\n    lng_new, lat_new, return_az = geoid.fwd(lon, lat, az, dist)\n    return lat_new, lng_new\n</code></pre>\n\n<ul>\n<li>lng: starting longitude</li>\n<li>lat: starting latitude</li>\n<li>az: azimuth, the direction of movement</li>\n<li>dist: distance in meters</li>\n</ul>\n\n<p>So for your specific question, you could do the following:</p>\n\n<pre><code>from django.contrib.gis.geos import Point\n\ndef move_point_mile_east(point):\n    dist = 1609.34\n    lat, lng = add_distance(point.y, point.x, 90, dist)\n    return Point(lng, lat)\n</code></pre>\n"}], "owner": {"reputation": 2662, "user_id": 3396860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/defKI.jpg?s=128&g=1", "display_name": "Stefan Collier", "link": "https://stackoverflow.com/users/3396860/stefan-collier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 372, "favorite_count": 0, "accepted_answer_id": 51643846, "answer_count": 1, "score": 2, "last_activity_date": 1533183751, "creation_date": 1533166119, "last_edit_date": 1533183751, "question_id": 51643573, "link": "https://stackoverflow.com/questions/51643573/geodjango-move-a-coordinate-a-fixed-distance-in-a-given-direction-e-g-move-a", "title": "GeoDjango: Move a coordinate a fixed distance in a given direction (e.g. move a point east by one mile)", "body": "<p>Given a Point (django.contrib.gis.geos.Point) how do I find another point 1 mile east from that Point object? </p>\n\n<pre><code>(A) ---[ 1 mile ]---&gt; (B)\n</code></pre>\n\n<hr>\n\n<p><strong>My failed attempts:</strong></p>\n\n<ul>\n<li><p>I've considered trying to go hardcode the <em>1 mile east point</em> but due\nto the curvature of the earth. The miles per degree change.</p></li>\n<li><p>Copius googling on SO and Geo Info Exchange. I assume I cannot find the terminology?</p></li>\n</ul>\n\n<hr>\n\n<ul>\n<li>Python 3.6 </li>\n<li>Django 1.11</li>\n</ul>\n"}, {"tags": ["python", "shell", "flask", "gunicorn"], "comments": [{"owner": {"reputation": 149, "user_id": 6219301, "user_type": "registered", "profile_image": "https://graph.facebook.com/1174631209223437/picture?type=large", "display_name": "Yassin Kisrawi", "link": "https://stackoverflow.com/users/6219301/yassin-kisrawi"}, "edited": false, "score": 0, "creation_date": 1533241890, "post_id": 51643559, "comment_id": 90286807, "body": "well, it turns out the first time it ran under python 3.6.5, but when launched from within the shell script it ran with 2.7 for which there are missing dependencies ..."}], "answers": [{"tags": [], "owner": {"reputation": 149, "user_id": 6219301, "user_type": "registered", "profile_image": "https://graph.facebook.com/1174631209223437/picture?type=large", "display_name": "Yassin Kisrawi", "link": "https://stackoverflow.com/users/6219301/yassin-kisrawi"}, "is_accepted": true, "score": 0, "last_activity_date": 1533243099, "creation_date": 1533243099, "answer_id": 51661984, "question_id": 51643559, "link": "https://stackoverflow.com/questions/51643559/running-python-flask-gunicorn-app-from-shell-script/51661984#51661984", "title": "Running python flask gunicorn app from shell script", "body": "<p>yep just as I guessed, it should be run within the script inside a virtualenv so that it will execute python 3 :)</p>\n"}], "owner": {"reputation": 149, "user_id": 6219301, "user_type": "registered", "profile_image": "https://graph.facebook.com/1174631209223437/picture?type=large", "display_name": "Yassin Kisrawi", "link": "https://stackoverflow.com/users/6219301/yassin-kisrawi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "accepted_answer_id": 51661984, "answer_count": 1, "score": -2, "last_activity_date": 1533243099, "creation_date": 1533165947, "question_id": 51643559, "link": "https://stackoverflow.com/questions/51643559/running-python-flask-gunicorn-app-from-shell-script", "title": "Running python flask gunicorn app from shell script", "body": "<p>I build my flask app, it requires external files through the runtime.\nwhen I build the app, meaning I run > gunicorn app:app (the app startup file is called app.py but that didn't bother). It runs awesomely.\nNow when I decided to make a sort of shell script to execute it (actually to make a couple of dependencies and environment checking but for the sake of simplifying, I created startup.sh in the same directory as app.py and it contains only the following instruction unquoted: \"gunicorn app:app\"), it just throws errors.\nand this is the last one ...</p>\n\n<p><a href=\"https://i.stack.imgur.com/KW4KN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KW4KN.png\" alt=\"enter image description here\"></a>\nPlease help..</p>\n"}, {"tags": ["python", "django", "django-rest-framework"], "answers": [{"comments": [{"owner": {"reputation": 3487, "user_id": 6843153, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/10207079768572690/picture?type=large", "display_name": "HuLu ViCa", "link": "https://stackoverflow.com/users/6843153/hulu-vica"}, "edited": false, "score": 0, "creation_date": 1533169301, "post_id": 51643719, "comment_id": 90252025, "body": "Thanks for your help. I tried this, but all paths stoped working."}], "tags": [], "owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "is_accepted": false, "score": 0, "last_activity_date": 1533167313, "creation_date": 1533167313, "answer_id": 51643719, "question_id": 51643547, "link": "https://stackoverflow.com/questions/51643547/django-resolve-doesnt-resolve-a-valid-path/51643719#51643719", "title": "Django resolve() doesn&#39;t resolve a valid path", "body": "<p>Pass <code>prefix_default_language=False</code> to the <code>i18n_patterns</code> function. If not, you must use the language code in all url patterns.</p>\n\n<p><a href=\"https://docs.djangoproject.com/en/2.0/topics/i18n/translation/#django.conf.urls.i18n.i18n_patterns\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/2.0/topics/i18n/translation/#django.conf.urls.i18n.i18n_patterns</a></p>\n\n<pre><code>urlpatterns = i18n_patterns(\n  path('api-token-auth/', views.obtain_auth_token),\n  ...\n  prefix_default_language=False\n)\n</code></pre>\n"}], "owner": {"reputation": 3487, "user_id": 6843153, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/10207079768572690/picture?type=large", "display_name": "HuLu ViCa", "link": "https://stackoverflow.com/users/6843153/hulu-vica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 328, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533167313, "creation_date": 1533165899, "question_id": 51643547, "link": "https://stackoverflow.com/questions/51643547/django-resolve-doesnt-resolve-a-valid-path", "title": "Django resolve() doesn&#39;t resolve a valid path", "body": "<p>I want to run test in Django, and I have a very simple test case that aims to test whether an url is reachable. I am using a valid path, but I still get a <strong>Resolver404</strong> error. I don't know if it has something to do with multilanguage settings, or something.</p>\n\n<p>This is my main <code>urls.py</code>:</p>\n\n<pre><code>from django.contrib import admin\nfrom django.conf.urls.i18n import i18n_patterns\nfrom django.urls import path, include\nfrom rest_framework.authtoken import views\nfrom django.conf.urls.static import static\nfrom django.conf import settings\n\nurlpatterns = i18n_patterns(\n    path('api-token-auth/', views.obtain_auth_token),\n    path('', include('FrontEndApp.urls')),\n    path('admin/', admin.site.urls),\n    path('api-auth/', include('rest_framework.urls')),\n    path('rosetta/', include('rosetta.urls')),\n    path('general/', include('GeneralApp.urls')),\n    #path('invoices_manager/', include('InvoicesManagerApp.urls')),\n    path('operations_manager/', include('OperationsManagerApp.urls')),\n    #path('payments_manager/', include('PaymentsManagerApp.urls')),\n    #path('providers_manager/', include('ProvidersManagerApp.urls')),\n    path('rates_manager/', include('RatesManagerApp.urls')),\n    #path('reports_manager/', include('ReportsManagerApp.urls')),\n    path('reservations_manager/', include('ReservationsManagerApp.urls')),\n    path('users_manager/', include('UsersManagerApp.urls'))\n)\n\nurlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)\n</code></pre>\n\n<p>This is my app <code>urls.py</code>:</p>\n\n<pre><code>from django.urls import path, include\nfrom GeneralApp import views, models\n\nfrom rest_framework import routers, renderers\n\nAPP_NAME = 'GeneralApp'\nurlpatterns = [\n    path('', include(router.urls)),\n    path('catalogs/', views.CatalogViewSet.as_view({'get':'list'})),\n    path('countries/', countries_list, name='rest_countries_list'),\n    path('countries/&lt;int:pk&gt;/', country_detail, name='rest_country_detail'),\n    path('countries/&lt;int:pk&gt;/states/', states_list, name='rest_country_states_list'),\n    path('states/', states_list, name='rest_states_list'),\n    path('states/&lt;int:pk&gt;/', state_detail, name='rest_state_detail'),\n    path('states/&lt;int:pk&gt;/cities/', cities_list, name='rest_state_cities_list'),\n    path('cities/', cities_list, name='rest_cities_list'),\n    path('cities/&lt;int:pk&gt;/', city_detail, name='rest_city_detail'),\n    path('cities/&lt;int:pk_city&gt;/zones/', city_zones_list, name='rest_city_zones_list'),\n    path('zones/&lt;int:pk&gt;/', zone_detail, name='rest_zone_detail'),\n    path('zones/', zones_list, name='rest_zones_list'),\n    path('airports/&lt;int:pk_city&gt;/airports/', city_airports_list, name='rest_city_airports_list'),\n    path('airports/', airports_list, name='rest_airports_list'),\n    path('airports/&lt;int:pk&gt;/', airport_detail, name='rest_airport_detail'),\n    path('languages/', languages_list, name='rest_languages_list'),\n    path('languages/&lt;int:pk&gt;/', language_detail, name='rest_language_detail'),\n    path('provider_types/', provider_types_list, name='rest_provider_types_list'),\n    path('provider_types/&lt;int:pk&gt;/', provider_type_detail, name='rest_provider_type_detail'),\n    path('companies/', companies_list, name='rest_companies_list'),\n    path('companies/&lt;int:pk&gt;/', company_detail, name='rest_company_detail'),\n    path('companies/&lt;int:pk&gt;/provider/', provider_detail, name='rest_provider_detail'),\n    path('providers/', providers_list, name='rest_providers_list'),\n    path('providers/&lt;int:pk&gt;/', provider_detail, name='rest_provider_detail'),\n    path('company_providers/', company_providers_list, name='rest_company_providers_list'),\n    path('company_providers/&lt;int:pk&gt;/', company_provider_detail, name='rest_company_provider_detail'),\n    path('contacts_hlkd/', contacts_hlkd_list, name='rest_contacts_hlkd_list'),\n    path('contacts_hlkd/&lt;int:pk&gt;/', contact_hlkd_detail, name='rest_contact_hlkd_detail'),\n    path('contacts/', contacts_list, name='rest_contacts_list'),\n    path('contacts/&lt;int:pk&gt;/', contact_detail, name='rest_contact_detail'),\n    path('exchange_rates/', exchange_rates_list, name='rest_exchange_rates_list'),\n    path('exchange_rates/&lt;int:pk&gt;/', exchange_rate_detail, name='rest_exchage_rate_detail'),\n    path('zipcodes/', zipcodes_list, name='rest_zipcodes_list'),\n    path('zipcodes/&lt;int:pk&gt;/', zipcode_detail, name='rest_zipcode_detail'),\n    path('zipcodes/&lt;int:pk&gt;/cities/', cities_list, name='rest_cities_list'),\n    path('zipcodes/&lt;int:pk&gt;/states/', states_list, name='rest_states_list'),\n    path('zipcodes/&lt;int:pk&gt;/contries/', countries_list, name='rest_countries_list'),\n    path('markets/', markets_list, name='rest_markets_list'),\n    path('markets/&lt;int:pk&gt;/', market_detail, name='rest_market_detail'),\n    path('parameters/', parameters_list, name='rest_parameters_list'),\n    path('parameters/&lt;int:pk&gt;/', parameter_detail, name='rest_parameter_detail'),\n]\n</code></pre>\n\n<p>And this is my <code>tests.py</code>:</p>\n\n<pre><code>from django.test import TestCase\nfrom django.urls import resolve\nfrom GeneralApp.views import CountryViewSet\n\n# Create your tests here.\nclass CountryEndpointTest(TestCase):\n    def test_url_resolves_to_view(self):\n        found = resolve('/general/countries/')\n        self.assertEqual(found.func, views.CountryViewSet)\n</code></pre>\n\n<p>And this is the error I get:</p>\n\n<pre><code>File \"/Users/hugovillalobos/Documents/Code/IntellibookProject/IntellibookVenv/lib/python3.6/site-packages/django/\nurls/resolvers.py\", line 523, in resolve\n    raise Resolver404({'tried': tried, 'path': new_path})\ndjango.urls.exceptions.Resolver404: {'tried': [[&lt;URLResolver &lt;URLPattern list&gt; (None:None) 'en-us/'&gt;]], 'path': 'ge\nneral/countries/'}\n</code></pre>\n"}, {"tags": ["python", "hadoop", "mapreduce"], "answers": [{"comments": [{"owner": {"reputation": 315, "user_id": 6162224, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3a84d373081b5fa6f63461b09a52215?s=128&d=identicon&r=PG&f=1", "display_name": "PKU", "link": "https://stackoverflow.com/users/6162224/pku"}, "edited": false, "score": 0, "creation_date": 1535750458, "post_id": 51670038, "comment_id": 91196775, "body": "Also, I found an issue while building the library for python 3.6 by cloning the develop branch of pydoop. JAVA_HOME not set. I am running the build as root user. I have set the value of JAVA_HOME and HADOOP_HOME in .bash_profile. I am using Hortonworks 2.6.5. The hadoop_env.sh also has JAVA_HOME value set correctly. However I still keep getting this issue. Is there anything else that I need to do?"}, {"owner": {"reputation": 1825, "user_id": 1979857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6bee61a703195e0fd980794d5a606f?s=128&d=identicon&r=PG", "display_name": "simleo", "link": "https://stackoverflow.com/users/1979857/simleo"}, "reply_to_user": {"reputation": 315, "user_id": 6162224, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3a84d373081b5fa6f63461b09a52215?s=128&d=identicon&r=PG&f=1", "display_name": "PKU", "link": "https://stackoverflow.com/users/6162224/pku"}, "edited": false, "score": 0, "creation_date": 1535980559, "post_id": 51670038, "comment_id": 91251031, "body": "@KNP this is SO, not a Pydoop help page. If you think you have found an issue with the installation process, pleas open a ticket at <a href=\"https://github.com/crs4/pydoop/issues\" rel=\"nofollow noreferrer\">github.com/crs4/pydoop/issues</a>"}, {"owner": {"reputation": 315, "user_id": 6162224, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3a84d373081b5fa6f63461b09a52215?s=128&d=identicon&r=PG&f=1", "display_name": "PKU", "link": "https://stackoverflow.com/users/6162224/pku"}, "edited": false, "score": 1, "creation_date": 1539041289, "post_id": 51670038, "comment_id": 92348767, "body": "Correction. It was a mistake from my side. I had export statements wrong in the bashrc file. Missed the export keyword. Stupid of me. Corrected it and it worked."}], "tags": [], "owner": {"reputation": 1825, "user_id": 1979857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6bee61a703195e0fd980794d5a606f?s=128&d=identicon&r=PG", "display_name": "simleo", "link": "https://stackoverflow.com/users/1979857/simleo"}, "is_accepted": true, "score": 0, "last_activity_date": 1533290150, "creation_date": 1533290150, "answer_id": 51670038, "question_id": 51643536, "link": "https://stackoverflow.com/questions/51643536/create-custom-writable-key-value-type-in-python-for-hadoop-map-reduce/51670038#51670038", "title": "Create custom writable key/value type in python for Hadoop Map Reduce?", "body": "<p>In Pydoop, <strong>explicit</strong> support for custom Hadoop types is still <a href=\"https://github.com/crs4/pydoop/issues/270\" rel=\"nofollow noreferrer\">WIP</a>. In other words, right now we're not making things easy for the user, but it can be done with a bit of work. A couple of pointers:</p>\n\n<ul>\n<li><p>Pydoop already includes custom Java code, auto-installed together with the Python package as <code>pydoop.jar</code>. We pass this extra jar to Hadoop as needed. Adding more Java code is a matter of placing the source in <code>src/</code> and listing it in <code>JavaLib.java_files</code> in <code>setup.py</code></p></li>\n<li><p>On the Python side, you need deserializers for the new types. See for instance <code>LongWritableDeserializer</code> in <code>pydoop.mapreduce.pipes</code>.</p></li>\n</ul>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 315, "user_id": 6162224, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3a84d373081b5fa6f63461b09a52215?s=128&d=identicon&r=PG&f=1", "display_name": "PKU", "link": "https://stackoverflow.com/users/6162224/pku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 51670038, "answer_count": 1, "score": 1, "last_activity_date": 1536341741, "creation_date": 1533165799, "question_id": 51643536, "link": "https://stackoverflow.com/questions/51643536/create-custom-writable-key-value-type-in-python-for-hadoop-map-reduce", "title": "Create custom writable key/value type in python for Hadoop Map Reduce?", "body": "<p>I have worked on Hadoop MR for quite some time and I have created and used custom(extension) <code>Writable</code> classes including <code>MapWritable</code>. Now I am required to translate the same MR that I have written in Java to Python. I do not have experience in python and am now exploring the various libraries for the same. I am looking into some options like <strong>Pydoop</strong> and <strong>Mrjob</strong>. However, I want to know if  these libraries contain the option to create similar custom <code>Writable</code> classes and how to create them. If not, what possible alternatives exist to do the same?</p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10168253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68caf08ff39a2ce0a99ed512fe076693?s=128&d=identicon&r=PG&f=1", "display_name": "hairyotter09", "link": "https://stackoverflow.com/users/10168253/hairyotter09"}, "edited": false, "score": 0, "creation_date": 1533167489, "post_id": 51643668, "comment_id": 90251662, "body": "That makes sense, and since new_list has arguments, it&#39;s just being overwritten by the same argument and therefore not changing anything, right?"}], "tags": [], "owner": {"reputation": 309, "user_id": 5362690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cX4bq.jpg?s=128&g=1", "display_name": "Jochen M&#252;ller", "link": "https://stackoverflow.com/users/5362690/jochen-m%c3%bcller"}, "is_accepted": false, "score": 0, "last_activity_date": 1533166906, "creation_date": 1533166906, "answer_id": 51643668, "question_id": 51643530, "link": "https://stackoverflow.com/questions/51643530/python-dataquest-confused-about-declaring-lists-outside-vs-inside-loops/51643668#51643668", "title": "Python (DataQuest): Confused about declaring lists outside vs. inside loops?", "body": "<p>No, you can also create empty lists inside loops. For example, you could rewrite the list creation inside the loop to</p>\n\n<pre><code>new_list = []\nnew_list.append(name)\nnew_list.append(count)\n</code></pre>\n\n<p>However, the loop is there to populate <code>numerical_list</code>, so it needs to be created before the loop. If you created it inside the loop it will be overwritten with an empty list in every iteration.</p>\n"}], "owner": {"reputation": 1, "user_id": 10168253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68caf08ff39a2ce0a99ed512fe076693?s=128&d=identicon&r=PG&f=1", "display_name": "hairyotter09", "link": "https://stackoverflow.com/users/10168253/hairyotter09"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533166906, "creation_date": 1533165764, "question_id": 51643530, "link": "https://stackoverflow.com/questions/51643530/python-dataquest-confused-about-declaring-lists-outside-vs-inside-loops", "title": "Python (DataQuest): Confused about declaring lists outside vs. inside loops?", "body": "<p>New to Python and learning through DataQuest. I'm learning a bit about creating a list of lists (would plural be lists of lists or list of listes? :P). Well, for this particular section, this was the correct code:</p>\n\n<pre><code>numerical_list = [];\n\nfor line in nested_list:\n    name = line[0]\n    count= float(line[1])\n    new_list = [name, count]\n    numerical_list.append(new_list)\nprint(numerical_list[0:5]);\n</code></pre>\n\n<p>They give you a little bit of instruction, including creating the empty numerical_list before starting the loop, but I'm slightly confused as to why I need to declare that empty list while, in the body of the loop, I was able to create</p>\n\n<pre><code>new_list = [name, count]\n</code></pre>\n\n<p>Without declaring it outside. I THINK I get it, but I want to be sure.</p>\n\n<p>My understanding is that, because numerical_list is empty, it needs to be declared outside of the loop so that it exists and then, on the line</p>\n\n<pre><code>numerical_list.append(new_list)\n</code></pre>\n\n<p>I'm breathing life into it. Meanwhile, because I'm declaring new_list with arguments, it already has that \"life\" (I'm sure there's a better, more technical word for it but I don't know it) and doesn't need to be established separately. Is that correct? Or am I going totally crazy here and making up logic as I go?</p>\n\n<p>In other words, is this correct: new, empty lists cannot be created inside a loop but new lists with arguments can.</p>\n"}, {"tags": ["python", "sql", "sqlite"], "answers": [{"tags": [], "owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "is_accepted": false, "score": 3, "last_activity_date": 1588881005, "last_edit_date": 1588881005, "creation_date": 1533166308, "answer_id": 51643602, "question_id": 51643509, "link": "https://stackoverflow.com/questions/51643509/sqlite-with-python-table-has-x-columns-but-y-were-supplied/51643602#51643602", "title": "SQLite with Python &quot;Table has X columns but Y were supplied&quot;", "body": "<p>If you don't specify the target columns <code>VALUES</code> is expected to provide values for all columns and that you didn't do.</p>\n\n<pre><code>INSERT\n OR IGNORE INTO simpletable\n                (text,\n                 post_id,\n                 comment_id,\n                 text)\n                VALUES ('%s',\n                        '%s',\n                        '%s',\n                        '%s');\n</code></pre>\n\n<p>Specifying the target columns is advisable in any case. The query won't break, if, for any reason, the order of the columns in the tables changes. </p>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 7147458, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aMP--PydZtg/AAAAAAAAAAI/AAAAAAAAAFU/YQCHB-GboEE/photo.jpg?sz=128", "display_name": "rsb55", "link": "https://stackoverflow.com/users/7147458/rsb55"}, "is_accepted": false, "score": 1, "last_activity_date": 1533167178, "creation_date": 1533167178, "answer_id": 51643703, "question_id": 51643509, "link": "https://stackoverflow.com/questions/51643509/sqlite-with-python-table-has-x-columns-but-y-were-supplied/51643703#51643703", "title": "SQLite with Python &quot;Table has X columns but Y were supplied&quot;", "body": "<p>try to specify the columns names to ensure that the destination of values doesn't depends on order.\nex: </p>\n\n<blockquote>\n  <p>INTO simpletable\n               (text,\n                 post_id,\n                 comment_id,\n                 text)</p>\n</blockquote>\n\n<p>And if you wants the id column to be automatically incremented make sure to add Identity property on, or similar auto increment of your dbms.\nex:</p>\n\n<blockquote>\n  <p>CREATE TABLE IF NOT EXISTS simpletable (id integer PRIMARY KEY Identity(1,1), </p>\n</blockquote>\n\n<p>and remember your script is not prepared to alter the table structure, only creation.</p>\n"}, {"tags": [], "owner": {"reputation": 2955, "user_id": 1133106, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/jHnqr.jpg?s=128&g=1", "display_name": "Ronny Kibet", "link": "https://stackoverflow.com/users/1133106/ronny-kibet"}, "is_accepted": false, "score": 1, "last_activity_date": 1558661083, "creation_date": 1558661083, "answer_id": 56284749, "question_id": 51643509, "link": "https://stackoverflow.com/questions/51643509/sqlite-with-python-table-has-x-columns-but-y-were-supplied/56284749#56284749", "title": "SQLite with Python &quot;Table has X columns but Y were supplied&quot;", "body": "<p>In Python 3.6 I did as shown below and data was inserted successfully.</p>\n\n<p>I used <code>None</code> for autoincrementing ID since <code>Null</code> was not found.</p>\n\n<pre><code>conn.execute(\"INSERT INTO CAMPAIGNS VALUES (?, ?, ?, ?)\", (None, campaign_name, campaign_username, campaign_password))\n</code></pre>\n\n<p>The ID structure is as follows.</p>\n\n<pre><code>ID INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL\n</code></pre>\n"}], "owner": {"reputation": 5028, "user_id": 2228592, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/e75c3b57e65836c9172ee3958094f911?s=128&d=identicon&r=PG", "display_name": "cclloyd", "link": "https://stackoverflow.com/users/2228592/cclloyd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6970, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1588881005, "creation_date": 1533165572, "question_id": 51643509, "link": "https://stackoverflow.com/questions/51643509/sqlite-with-python-table-has-x-columns-but-y-were-supplied", "title": "SQLite with Python &quot;Table has X columns but Y were supplied&quot;", "body": "<p>I have a python script that executes some simple SQL.</p>\n\n<pre><code>c.execute(\"CREATE TABLE IF NOT EXISTS simpletable (id integer PRIMARY KEY, post_body text, post_id text, comment_id text, url text);\")\ncommand = \"INSERT OR IGNORE INTO simpletable VALUES ('%s', '%s', '%s', '%s')\" % (comments[-1].post_body, comments[-1].post_id, comments[-1].comment_id, \ncomments[-1].url)\nc.execute(command)\nc.commit()\n</code></pre>\n\n<p>But when I execute it, I get an error</p>\n\n<blockquote>\n  <p>sqlite3.OperationalError: table simpletable has 5 columns but 4 values were supplied</p>\n</blockquote>\n\n<p>Why is it not automatically filling in the <code>id</code> key?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "is_accepted": true, "score": 2, "last_activity_date": 1533166543, "last_edit_date": 1533166543, "creation_date": 1533166164, "answer_id": 51643583, "question_id": 51643505, "link": "https://stackoverflow.com/questions/51643505/counting-unique-values-in-columns-pandas-python/51643583#51643583", "title": "Counting unique values in columns - pandas Python", "body": "<p>You could do something along these lines using <code>agg</code>, but it takes some re-shaping beforehand. Here is a way to get it:</p>\n\n<pre><code>agg_df = (df.fillna('N/A').set_index(['Unique_ID', 'No_of_Filings'])\n          .stack()\n          .reset_index('No_of_Filings')\n          .groupby(0)\n          .agg(['sum', 'size'])\n          .reset_index())\n\nagg_df.columns = ['Requirements', 'Number of Filings', 'Frequency']\n\n&gt;&gt;&gt; agg_df\n  Requirements  Number of Filings  Frequency\n0        Black                 11          3\n1         Blue                  9          3\n2        Brown                 10          3\n3        Green                 11          3\n4          N/A                  7          2\n5       Orange                  4          1\n6          Red                  9          3\n7       Violet                  3          1\n8        White                  9          3\n9       Yellow                  7          2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 2, "last_activity_date": 1533166244, "creation_date": 1533166244, "answer_id": 51643589, "question_id": 51643505, "link": "https://stackoverflow.com/questions/51643505/counting-unique-values-in-columns-pandas-python/51643589#51643589", "title": "Counting unique values in columns - pandas Python", "body": "<pre><code>from collections import defaultdict\n\nd = defaultdict(int)\nfor i, f, *r in df.values:\n    for v in r:\n        d[(v, 'filings')] += f\n        d[(v, 'frequency')] += 1\n\npd.Series(d).unstack().rename_axis('reqs').reset_index()\n\n     reqs  filings  frequency\n0     NaN        7          2\n1   Black       11          3\n2    Blue        9          3\n3   Brown       10          3\n4   Green       11          3\n5  Orange        4          1\n6     Red        9          3\n7  Violet        3          1\n8   White        9          3\n9  Yellow        7          2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "is_accepted": false, "score": 2, "last_activity_date": 1533166277, "creation_date": 1533166277, "answer_id": 51643595, "question_id": 51643505, "link": "https://stackoverflow.com/questions/51643505/counting-unique-values-in-columns-pandas-python/51643595#51643595", "title": "Counting unique values in columns - pandas Python", "body": "<p>Notice that you can use <code>np.unique</code> to get the count of the uniques right away (which already completes one of your objectives).</p>\n\n<pre><code>df= df.fillna('NA')\ncols = [\"Req_1\",\"Req_2\",\"Req_3\",\"Req_4\"]\n\nu = pd.unique(df[cols].values.ravel(\"K\"))\ns = np.unique(df[cols].values.ravel(\"K\"), return_counts=True)\n\ndf2 = pd.DataFrame({'colors': u}).fillna('N/A')\ndf2['freq'] = df2.colors.map(dict(zip(*s)))\ndf2['n'] = [df[(df[cols] == v).sum(1) &gt;=1].No_of_Filings.sum() for v in df2.colors]\n\n    colors  freq    n\n0   Blue    3   9\n1   Black   3   11\n2   Red     3   9\n3   Yellow  2   7\n4   Brown   3   10\n5   White   3   9\n6   Green   3   11\n7   Violet  1   3\n8   N/A     2   0\n9   Orange  1   4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 2, "last_activity_date": 1533168145, "creation_date": 1533168145, "answer_id": 51643806, "question_id": 51643505, "link": "https://stackoverflow.com/questions/51643505/counting-unique-values-in-columns-pandas-python/51643806#51643806", "title": "Counting unique values in columns - pandas Python", "body": "<p>IIUC</p>\n\n<pre><code>df.drop('Unique_ID',1).melt('No_of_Filings').\\\n   fillna('NaN').groupby('value')['No_of_Filings'].agg(['count','sum'])\nOut[56]: \n        count  sum\nvalue             \nBlack       3   11\nBlue        3    9\nBrown       3   10\nGreen       3   11\nNaN         2    7\nOrange      1    4\nRed         3    9\nViolet      1    3\nWhite       3    9\nYellow      2    7\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 2744315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2f028c68d8e2ee13d38a1bb7ecd7c33?s=128&d=identicon&r=PG&f=1", "display_name": "user2744315", "link": "https://stackoverflow.com/users/2744315/user2744315"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1257, "favorite_count": 0, "accepted_answer_id": 51643583, "answer_count": 4, "score": 1, "last_activity_date": 1533168145, "creation_date": 1533165546, "question_id": 51643505, "link": "https://stackoverflow.com/questions/51643505/counting-unique-values-in-columns-pandas-python", "title": "Counting unique values in columns - pandas Python", "body": "<p>Here is my dataset:</p>\n\n<pre><code>Unique_ID   No_of_Filings   Req_1   Req_2   Req_3   Req_4\n RCONF045   3               Blue    Red     White   Violet\n RCONF046   3               Blue    Red     White   Brown\n RCONF047   3               Blue    Red     White   Brown\n RCONF048   3               Black   Yellow  Green   N/A\n RCONF051   4               Black   Yellow  Green   N/A\n RCONF052   4               Black   Brown   Green   Orange\n</code></pre>\n\n<p>I've extracted the <strong>unique</strong> values from the last 4 columns (Req_1 through Req_4) by the following:</p>\n\n<pre><code>pd.unique(df1[[\"Req_1\",\"Req_2\",\"Req_3\",\"Req_4\"]].values.ravel(\"K\"))\n\nOut[20]:  array(['Blue', 'Black', 'Red', 'Yellow', 'Brown', 'White', 'Green',\n       'Violet', nan, 'Orange'], dtype=object)\n</code></pre>\n\n<p>Here's what I need for the output. Frequency = how many times it shows up in the last four columns (e.g. Yellow only shows up twice) and Number of Filings = sum(No_of_Filings <strong>if the requirement is in that row</strong>). For example, Blue is in the first three rows, so that's 3 + 3 + 3 = 9 and Brown is in the second, third, and sixth row, so it's 3 + 3 + 4 = 10</p>\n\n<pre><code>Requirements    Frequency   Number of Filings\n   Blue            3              9\n   Black           3              11\n   Red             3              9\n   Brown           3              10\n   White           3              9\n   Green           3              11\n   Yellow          2              7\n   N/A             2              7\n   Violet          1              3\n   Orange          1              4\n</code></pre>\n\n<p>How can I create those two columns in my newly-created dataframe above using pandas? </p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "pandas", "pandas.excelwriter"], "comments": [{"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1533165650, "post_id": 51643463, "comment_id": 90251271, "body": "I wonder how you didn&#39;t et error in <code>file_to_write = data_folder &#47; &#39;rwb_itsm_processed_tickets.xlsx&#39;</code>"}, {"owner": {"reputation": 25, "user_id": 10168243, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "JJ Y", "link": "https://stackoverflow.com/users/10168243/jj-y"}, "reply_to_user": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1533222332, "post_id": 51643463, "comment_id": 90277276, "body": "Honestly, no error is being produced."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 10168243, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "JJ Y", "link": "https://stackoverflow.com/users/10168243/jj-y"}, "edited": false, "score": 0, "creation_date": 1533222727, "post_id": 51643501, "comment_id": 90277613, "body": "I tried replacing the / with the + as you did in your example but it actually throws an error, doesn&#39;t like the +."}], "tags": [], "owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "is_accepted": false, "score": 0, "last_activity_date": 1533165970, "last_edit_date": 1533165970, "creation_date": 1533165530, "answer_id": 51643501, "question_id": 51643463, "link": "https://stackoverflow.com/questions/51643463/python-pandas-writing-to-file-on-networked-drive-windows/51643501#51643501", "title": "Python / Pandas: Writing to file on Networked Drive (Windows)", "body": "<p>This is how I made it work for my Mac</p>\n\n<pre><code># Now write file to networked drive as excel\ndata_folder ='/Users/myname/Desktop/'\n\n# combine path and file\nfile_to_write = data_folder + '/rwb_itsm_processed_tickets.xlsx'\n</code></pre>\n\n<p>P.S: I was unable to access <code>rwb_list_departments</code> so I just took following sample dataframe <code>df = pd.DataFrame([[1, 2], [3, 4], [5, 6], [7, 8]], columns=[\"A\", \"B\"])</code> and the file was created together with the dataframe data. Rest everything was kept same as in your code. The error seems to be in the command <code>Path</code> and then the way you are defining <code>file_to_write</code></p>\n"}], "owner": {"reputation": 25, "user_id": 10168243, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "JJ Y", "link": "https://stackoverflow.com/users/10168243/jj-y"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 399, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1533171994, "creation_date": 1533165214, "last_edit_date": 1533171994, "question_id": 51643463, "link": "https://stackoverflow.com/questions/51643463/python-pandas-writing-to-file-on-networked-drive-windows", "title": "Python / Pandas: Writing to file on Networked Drive (Windows)", "body": "<p>I'm trying to write to a file on a networked drive. I'm not getting any errors but the file is not getting created. Any suggestions?</p>\n\n<pre><code># Dataframe\ndf = pd.DataFrame(rwb_list_departments,columns=['Owned By Team','Major Incident','Status','Priority','Incident ID','Owned By','Short Description','Requester Display Name','Created Date Time','Closed Date Time','Department','Duration','NumDur'])\n\n# writing to local drive as csv works great\ndf.to_csv('rwb_itsm_processed_tickets.csv',index=False,encoding='utf-8')\n\n# Now write file to networked drive as excel\ndata_folder = Path('W:/CDS Analytics/RWB')\n\n# combine path and file\nfile_to_write = data_folder / 'rwb_itsm_processed_tickets.xlsx'\n\n# Specify a writer\nwriter = pd.ExcelWriter('file_to_write', engine='xlsxwriter')\n\n# Write your DataFrame to a file     \ndf.to_excel(writer,'report')\n\n# Save the result\nwriter.save()\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pip", "pipe", "tty"], "comments": [{"owner": {"reputation": 1710, "user_id": 4365003, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/d94Ue.png?s=128&g=1", "display_name": "RagingRoosevelt", "link": "https://stackoverflow.com/users/4365003/ragingroosevelt"}, "edited": false, "score": 0, "creation_date": 1533165801, "post_id": 51643451, "comment_id": 90251309, "body": "Progress bars are weird.  Try coding one yourself in python.  Often you need to use a carriage return character (<code>\\r</code>) without an accompanying line feed character (<code>\\n</code>) so that you overwrite the existing line with the updated progress bar text.  If this is how pip does it, your pipe&#39;d output will be hundreds of lines long with most of the outputs being different times the progress bar was printed.  I don&#39;t know how to force the progress bar but I doubt you&#39;d actually want it forced for piping to something."}, {"owner": {"reputation": 8239, "user_id": 4056181, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/G0SRK.jpg?s=128&g=1", "display_name": "jmd_dk", "link": "https://stackoverflow.com/users/4056181/jmd-dk"}, "reply_to_user": {"reputation": 1710, "user_id": 4365003, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/d94Ue.png?s=128&g=1", "display_name": "RagingRoosevelt", "link": "https://stackoverflow.com/users/4365003/ragingroosevelt"}, "edited": false, "score": 1, "creation_date": 1533166040, "post_id": 51643451, "comment_id": 90251368, "body": "@RagingRoosevelt I&#39;ve coded several progress bars myself, I know the gist. I do in fact want to force the progress bar. Sure the log file will be messy, but the output on the screen will be intact."}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1533168744, "post_id": 51643451, "comment_id": 90251930, "body": "The only way is to hack the source and send a pull request."}, {"owner": {"reputation": 8239, "user_id": 4056181, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/G0SRK.jpg?s=128&g=1", "display_name": "jmd_dk", "link": "https://stackoverflow.com/users/4056181/jmd-dk"}, "edited": false, "score": 0, "creation_date": 1591883401, "post_id": 51643451, "comment_id": 110229322, "body": "I&#39;ve submitted a <a href=\"https://github.com/pypa/pip/issues/8431\" rel=\"nofollow noreferrer\">feature request</a>"}], "owner": {"reputation": 8239, "user_id": 4056181, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/G0SRK.jpg?s=128&g=1", "display_name": "jmd_dk", "link": "https://stackoverflow.com/users/4056181/jmd-dk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 512, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1533165144, "creation_date": 1533165144, "question_id": 51643451, "link": "https://stackoverflow.com/questions/51643451/python-pip-forcing-the-progress-bar", "title": "Python pip: Forcing the progress bar", "body": "<p>When downloading Python packages with pip, a progress bar is displayed by default. Using <a href=\"https://pip.pypa.io/en/stable/reference/pip_install/#cmdoption-progress-bar\" rel=\"nofollow noreferrer\"><code>--progress-bar</code></a> I can choose between different styles or turn the progress bar off entirely. If I pipe the output of a pip command, this progress bar is automatically disabled. E.g.</p>\n\n<pre><code>python3 -m pip download --no-cache-dir scipy==1.1.0            # Progress bar\npython3 -m pip download --no-cache-dir scipy==1.1.0 | tee log  # No progress bar\n</code></pre>\n\n<p>(if you run both commands in turn, remember to remove the downloaded files in between). I'm sure that pip disables the progress bar because it detects that the output is not going to a TTY. I seek a way to ignore this cleverness of pip and force it to write out the progress bar anyway. The na\u00efve guess would be to supply the <code>--progress-bar</code> argument, e.g.</p>\n\n<pre><code>python3 -m pip download --no-cache-dir --progress-bar=on scipy==1.1.0 | tee log\n</code></pre>\n\n<p>However, the non-TTY disabling of the progress bar overrules this.</p>\n\n<p>Note: A similar story exists for <code>wget</code>. Here, the progress bar can be forced using</p>\n\n<pre><code>wget --progress=bar:force ...\n</code></pre>\n"}, {"tags": ["python", "argparse"], "comments": [{"owner": {"reputation": 3036, "user_id": 5491375, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/acb34dbd1c452d932e5d116561d6ee26?s=128&d=identicon&r=PG&f=1", "display_name": "aydow", "link": "https://stackoverflow.com/users/5491375/aydow"}, "edited": false, "score": 0, "creation_date": 1533165125, "post_id": 51643430, "comment_id": 90251177, "body": "where/how are you defining <code>args</code>?"}, {"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1533165148, "post_id": 51643430, "comment_id": 90251188, "body": "<code>print</code> to see what you are looking for: <code>print(args)</code> <code>print(args.__dict__)</code> <code>print(dir(args))</code>"}, {"owner": {"reputation": 96, "user_id": 7928026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-cNkG1PrUcak/AAAAAAAAAAI/AAAAAAAABD8/b2gXexEnBk8/photo.jpg?sz=128", "display_name": "Cambray", "link": "https://stackoverflow.com/users/7928026/cambray"}, "reply_to_user": {"reputation": 3036, "user_id": 5491375, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/acb34dbd1c452d932e5d116561d6ee26?s=128&d=identicon&r=PG&f=1", "display_name": "aydow", "link": "https://stackoverflow.com/users/5491375/aydow"}, "edited": false, "score": 0, "creation_date": 1533165224, "post_id": 51643430, "comment_id": 90251206, "body": "@aydow added the code. it has always been there, just not copied and pasted into the question by mistake"}, {"owner": {"reputation": 96, "user_id": 7928026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-cNkG1PrUcak/AAAAAAAAAAI/AAAAAAAABD8/b2gXexEnBk8/photo.jpg?sz=128", "display_name": "Cambray", "link": "https://stackoverflow.com/users/7928026/cambray"}, "reply_to_user": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1533165447, "post_id": 51643430, "comment_id": 90251241, "body": "@JacobIRR I added all three bits of code into the script and mediumterm appears each time, so it is definitely in the args. The same with shortterm, which when I run the shortterm arg the script runs"}, {"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 1, "creation_date": 1533165550, "post_id": 51643430, "comment_id": 90251261, "body": "args is a string in this context: <code>args.mediumterm</code> so I don&#39;t understand how that is possible. At some point you are transforming args from a dict/object into a string."}, {"owner": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "edited": false, "score": 2, "creation_date": 1533165620, "post_id": 51643430, "comment_id": 90251268, "body": "Search for <code>args =</code> before the line 127 and make sure you&#39;re not overwriting it."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "edited": false, "score": 0, "creation_date": 1533167151, "post_id": 51643430, "comment_id": 90251599, "body": "Your <code>dest</code> arguments are pointless (the default <code>dest</code> is the long name of the switch, so your <code>dest</code> is redundant). As @zwer says, you&#39;ve got somewhere where you reassign <code>args</code> to a <code>str</code>, so it is no longer an <code>argparse</code> namespace object; it&#39;s clearly in a conditional path since it doesn&#39;t always occur. You need to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that actually demonstrates the problem for us to provide anything further."}], "answers": [{"comments": [{"owner": {"reputation": 96, "user_id": 7928026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-cNkG1PrUcak/AAAAAAAAAAI/AAAAAAAABD8/b2gXexEnBk8/photo.jpg?sz=128", "display_name": "Cambray", "link": "https://stackoverflow.com/users/7928026/cambray"}, "edited": false, "score": 0, "creation_date": 1534790544, "post_id": 51645175, "comment_id": 90823511, "body": "This makes sense and is systematically a better way to do it it seems. Thanks"}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 1, "last_activity_date": 1533181501, "creation_date": 1533181501, "answer_id": 51645175, "question_id": 51643430, "link": "https://stackoverflow.com/questions/51643430/python-argparse-attributeerror-str-object-has-no-attribute/51645175#51645175", "title": "Python ArgParse AttributeError: &#39;str&#39; object has no attribute", "body": "<p>Your processing code, after <code>args = parser.parse_args()</code> should look something like:</p>\n\n<pre><code>term = args.mediumterm\nif term:\n    if term == \"all\":\n        get_top_tracks(term)     # unless medium_term is defined else where\n        get_top_artists(term)\n    else:\n        if term == \"track\":\n            get_top_tracks(term)\n        elif term == \"artist\":\n            get_top_artists(term)\n</code></pre>\n\n<p>Similarly for <code>shortterm</code> and <code>longterm</code>.  Once created by <code>parse_args</code>, <code>args</code> should not be reassigned (it will only confuse you and your readers).</p>\n"}], "owner": {"reputation": 96, "user_id": 7928026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-cNkG1PrUcak/AAAAAAAAAAI/AAAAAAAABD8/b2gXexEnBk8/photo.jpg?sz=128", "display_name": "Cambray", "link": "https://stackoverflow.com/users/7928026/cambray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3659, "favorite_count": 0, "accepted_answer_id": 51645175, "answer_count": 1, "score": 0, "last_activity_date": 1533181501, "creation_date": 1533164987, "last_edit_date": 1533165185, "question_id": 51643430, "link": "https://stackoverflow.com/questions/51643430/python-argparse-attributeerror-str-object-has-no-attribute", "title": "Python ArgParse AttributeError: &#39;str&#39; object has no attribute", "body": "<p>I have implemented argparse into a Python script like so:</p>\n\n<pre><code>parser = argparse.ArgumentParser()\nparser.add_argument(\"-s\", \"--shortterm\", help=\"Tweets top information from the past month\", default=\"track\",\n                    choices=choices, dest=\"shortterm\")\nparser.add_argument(\"-m\", \"--mediumterm\", help=\"Tweets top information from the past 6 months\", default=\"track\",\n                    choices=choices)\nparser.add_argument(\"-l\", \"--longterm\", help=\"Tweets top information from the past few years\", default=\"track\",\n                    choices=choices)\nargs = parser.parse_args()\n</code></pre>\n\n<p>Which I then check args for things the user could have entered or selected, like so:</p>\n\n<pre><code>if args.mediumterm:\n    if args.mediumterm == \"all\":\n        get_top_tracks(medium_term)\n        get_top_artists(medium_term)\n    else:\n        if args == \"track\":\n            get_top_tracks(medium_term)\n        elif args == \"artist\":\n            get_top_artists(medium_term)\n</code></pre>\n\n<p>When I run the script with the following command:</p>\n\n<pre><code>python top_tracks_artists_spotify_time.py --mediumterm all\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"top_tracks_artists_spotify_time.py\", line 127, in &lt;module&gt;\nif args.mediumterm:\nAttributeError: 'str' object has no attribute 'mediumterm'\n</code></pre>\n\n<p>The annoying thing is running:</p>\n\n<pre><code>python top_tracks_artists_spotify_time.py --shortterm all\n</code></pre>\n\n<p>runs the script successfully.</p>\n\n<p>EDIT: I have added dest=\"mediumterm\" to the argparse to no avail</p>\n"}, {"tags": ["python", "python-3.x", "csv", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 195, "user_id": 6621095, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/88a9bb565a90eab819e3650dc601f7fd?s=128&d=identicon&r=PG&f=1", "display_name": "dtrinh", "link": "https://stackoverflow.com/users/6621095/dtrinh"}, "edited": false, "score": 0, "creation_date": 1533168111, "post_id": 51643714, "comment_id": 90251799, "body": "Switching it to &#39;a&#39; worked and is adding all the lines; however, it&#39;s now parsing each character with a space between it now. Ex: h t t p s : / / w w w . l e n d i n g c l u b . c o m / l o a n s / p e r s o n a l - l o a n s 6 . 1 6 % &quot; &quot; t o &quot; &quot; 3 5 . 8 9 %"}, {"owner": {"reputation": 707, "user_id": 8673320, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-IXaTouByYlA/AAAAAAAAAAI/AAAAAAAAFz0/M4v8pi51Xbs/photo.jpg?sz=128", "display_name": "Aviv Shai", "link": "https://stackoverflow.com/users/8673320/aviv-shai"}, "reply_to_user": {"reputation": 195, "user_id": 6621095, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/88a9bb565a90eab819e3650dc601f7fd?s=128&d=identicon&r=PG&f=1", "display_name": "dtrinh", "link": "https://stackoverflow.com/users/6621095/dtrinh"}, "edited": false, "score": 0, "creation_date": 1533169716, "post_id": 51643714, "comment_id": 90252088, "body": "I don\u2019t work with csv files often, but my guess would be that that is caused by the delimiter parameter on line 4. Try removing that and see what happens."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1533182087, "post_id": 51643714, "comment_id": 90254437, "body": "Turning a string into a list will split it into characters, e.g. <code>&#39; &#39;.join(list(&#39;abc&#39;))</code>."}], "tags": [], "owner": {"reputation": 707, "user_id": 8673320, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-IXaTouByYlA/AAAAAAAAAAI/AAAAAAAAFz0/M4v8pi51Xbs/photo.jpg?sz=128", "display_name": "Aviv Shai", "link": "https://stackoverflow.com/users/8673320/aviv-shai"}, "is_accepted": false, "score": 0, "last_activity_date": 1533167250, "creation_date": 1533167250, "answer_id": 51643714, "question_id": 51643389, "link": "https://stackoverflow.com/questions/51643389/writing-printed-output-to-csv-numpy/51643714#51643714", "title": "Writing Printed Output to CSV - Numpy", "body": "<p>I think the problem is that you are opening the file in write-mode (the <code>\"w\"</code> in <code>open('test.csv', \"w\")</code>), meaning that Python overwrites what's already written in the file. I think you're looking for append-mode:</p>\n\n<pre><code># open the file before the loop, and close it after\ncsv_file = open(\"test.csv\", 'a')             # change the 'w' to an 'a'\ncsv_file.truncate(0)                         # clear the contents of the file\nwriter = csv.writer(csv_file, delimiter=' ') # make the writer beforehand for efficiency\n\nfor n in paragraph:\n    matches = re.findall('(?i)\\d+(?:\\.\\d+)?%\\s*(?:to|-)\\s*\\d+(?:\\.\\d+)?%', n.string)\n    try:\n        irate = str(matches[0])\n        array = np.asarray(irate)\n        array2 = np.append(link,irate)\n        array2 = np.asarray(array2)\n        print(array2)\n\n        for line in test:\n            writer.writerow(line)\n\n    except IndexError:\n        pass\n\n# close the file\ncsv_file.close()\n</code></pre>\n\n<p>If this doesn't work, please let me know!</p>\n"}, {"comments": [{"owner": {"reputation": 195, "user_id": 6621095, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/88a9bb565a90eab819e3650dc601f7fd?s=128&d=identicon&r=PG&f=1", "display_name": "dtrinh", "link": "https://stackoverflow.com/users/6621095/dtrinh"}, "edited": false, "score": 0, "creation_date": 1533312556, "post_id": 51643997, "comment_id": 90316090, "body": "Clever way of going about this. I kept trying to put everything in the same dataframe in a previous iteration of code and couldn&#39;t get it to work. Thanks!"}], "tags": [], "owner": {"reputation": 443, "user_id": 7836691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6800dfff99c43c8fe8d5f13aa6c0d483?s=128&d=identicon&r=PG&f=1", "display_name": "Arun", "link": "https://stackoverflow.com/users/7836691/arun"}, "is_accepted": true, "score": 1, "last_activity_date": 1533169784, "creation_date": 1533169784, "answer_id": 51643997, "question_id": 51643389, "link": "https://stackoverflow.com/questions/51643389/writing-printed-output-to-csv-numpy/51643997#51643997", "title": "Writing Printed Output to CSV - Numpy", "body": "<p>When it comes to using csv file, pandas comes handy.</p>\n\n<pre><code>import datetime\nimport requests as r\nfrom bs4 import BeautifulSoup as bs\nimport numpy as np\nimport regex as re\nimport pandas as pd\n\nplcompetitors = ['https://www.lendingclub.com/loans/personal-loans',\n                'https://www.marcus.com/us/en/personal-loans',\n                'https://www.discover.com/personal-loans/']\n\ndf = pd.DataFrame({'Link':[],'APR Rate':[]})\n#cycle through links in array until it finds APR rates/fixed or variable using regex\nfor link in plcompetitors:\n    cdate = datetime.date.today()\n    l = r.get(link)\n    l.encoding = 'utf-8'\n    data = l.text\n    soup = bs(data, 'html.parser')\n    #captures Discover's rate perfectly but catches too much for lightstream/prosper\n    paragraph = soup.find_all(text=re.compile('[0-9]%'))\n    for n in paragraph:\n        matches = re.findall('(?i)\\d+(?:\\.\\d+)?%\\s*(?:to|-)\\s*\\d+(?:\\.\\d+)?%', n.string)\n        irate = ''\n        try:\n            irate = str(matches[0])\n            df2 = pd.DataFrame({'Link':[link],'APR Rate':[irate]})\n            df = pd.concat([df,df2],join=\"inner\")\n        except IndexError:\n            pass\ndf.to_csv('CSV_File.csv',index=False)        \n</code></pre>\n\n<p>I have stored each link and it's irate value in a data frame <code>df2</code> and I concatenate it to parent data frame <code>df</code>.\nAt the end, I write parent data frame <code>df</code> to a csv file.</p>\n"}], "owner": {"reputation": 195, "user_id": 6621095, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/88a9bb565a90eab819e3650dc601f7fd?s=128&d=identicon&r=PG&f=1", "display_name": "dtrinh", "link": "https://stackoverflow.com/users/6621095/dtrinh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 51643997, "answer_count": 2, "score": 0, "last_activity_date": 1533169784, "creation_date": 1533164692, "last_edit_date": 1533165265, "question_id": 51643389, "link": "https://stackoverflow.com/questions/51643389/writing-printed-output-to-csv-numpy", "title": "Writing Printed Output to CSV - Numpy", "body": "<p>I want this output written via CSV</p>\n\n<blockquote>\n  <p>['<a href=\"https://www.lendingclub.com/loans/personal-loans\" rel=\"nofollow noreferrer\">https://www.lendingclub.com/loans/personal-loans</a>' '6.16% to 35.89%']\n  ['<a href=\"https://www.lendingclub.com/loans/personal-loans\" rel=\"nofollow noreferrer\">https://www.lendingclub.com/loans/personal-loans</a>' '1% to 6%']\n  ['<a href=\"https://www.marcus.com/us/en/personal-loans\" rel=\"nofollow noreferrer\">https://www.marcus.com/us/en/personal-loans</a>' '6.99% to 24.99%']\n  ['<a href=\"https://www.marcus.com/us/en/personal-loans\" rel=\"nofollow noreferrer\">https://www.marcus.com/us/en/personal-loans</a>' '6.99% to 24.99%']\n  ['<a href=\"https://www.marcus.com/us/en/personal-loans\" rel=\"nofollow noreferrer\">https://www.marcus.com/us/en/personal-loans</a>' '6.99% to 24.99%']\n  ['<a href=\"https://www.marcus.com/us/en/personal-loans\" rel=\"nofollow noreferrer\">https://www.marcus.com/us/en/personal-loans</a>' '6.99% to 24.99%']\n  ['<a href=\"https://www.marcus.com/us/en/personal-loans\" rel=\"nofollow noreferrer\">https://www.marcus.com/us/en/personal-loans</a>' '6.99% to 24.99%']\n  ['<a href=\"https://www.discover.com/personal-loans/\" rel=\"nofollow noreferrer\">https://www.discover.com/personal-loans/</a>' '6.99% to 24.99%']</p>\n</blockquote>\n\n<p>However when I run the code to write the output to CSV I only get the last line written to the CSV file:</p>\n\n<blockquote>\n  <p>['<a href=\"https://www.discover.com/personal-loans/\" rel=\"nofollow noreferrer\">https://www.discover.com/personal-loans/</a>' '6.99% to 24.99%']</p>\n</blockquote>\n\n<p>Could it be because my printed output is not comma separated? I attempted to circumvent having to put a comma in there by using a space as the delimiter. Let me know your thoughts. Would love some help on this because I am having the hardest time reshaping this collected data.</p>\n\n<pre><code>plcompetitors = ['https://www.lendingclub.com/loans/personal-loans',\n                'https://www.marcus.com/us/en/personal-loans',\n                'https://www.discover.com/personal-loans/']\n\n#cycle through links in array until it finds APR rates/fixed or variable using regex\nfor link in plcompetitors:\n    cdate = datetime.date.today()\n    l = r.get(link)\n    l.encoding = 'utf-8'\n    data = l.text\n    soup = bs(data, 'html.parser')\n    #captures Discover's rate perfectly but catches too much for lightstream/prosper\n    paragraph = soup.find_all(text=re.compile('[0-9]%'))\n    for n in paragraph:\n        matches = re.findall('(?i)\\d+(?:\\.\\d+)?%\\s*(?:to|-)\\s*\\d+(?:\\.\\d+)?%', n.string)\n        try:\n            irate = str(matches[0])\n            array = np.asarray(irate)\n            array2 = np.append(link,irate)\n            array2 = np.asarray(array2)\n            print(array2)\n            #with open('test.csv', \"w\") as csv_file:\n            #    writer = csv.writer(csv_file, delimiter=' ')\n            #    for line in test:\n            #        writer.writerow(line)\n        except IndexError:\n            pass\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "design-patterns", "builder"], "comments": [{"owner": {"reputation": 370, "user_id": 947330, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/NnnXg.jpg?s=128&g=1", "display_name": "Avi", "link": "https://stackoverflow.com/users/947330/avi"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1533166126, "post_id": 51643379, "comment_id": 90251389, "body": "What I&#39;m trying to say, is that I want to define some mandatory methods. A similar idea is found here: <a href=\"https://blog.jayway.com/2012/02/07/builder-pattern-with-a-twist/\" rel=\"nofollow noreferrer\">blog.jayway.com/2012/02/07/builder-pattern-with-a-twist</a> However, I&#39;m having issues implementing this with Python."}], "answers": [{"tags": [], "owner": {"reputation": 3247, "user_id": 2403253, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/7NK31.png?s=128&g=1", "display_name": "Justin Albano", "link": "https://stackoverflow.com/users/2403253/justin-albano"}, "is_accepted": false, "score": 1, "last_activity_date": 1533211473, "creation_date": 1533211473, "answer_id": 51653194, "question_id": 51643379, "link": "https://stackoverflow.com/questions/51643379/how-can-the-builder-pattern-with-fail-safes-be-used-in-python/51653194#51653194", "title": "How can the builder pattern with fail safes be used in Python?", "body": "<p>The Python <a href=\"https://docs.python.org/3/library/abc.html\" rel=\"nofollow noreferrer\">Abstract Base Class module (ABC)</a> allows for such restrictions. Using Python 3:</p>\n\n<pre><code>from abc import ABC, abstractmethod\n\n\nclass AbstractFoo(ABC):\n\n    @abstractmethod\n    def foo(self):\n        pass\n\nclass ConcreteFoo(AbstractFoo):\n    pass\n\nif __name__ == \"__main__\":\n    c = ConcreteFoo()     \n</code></pre>\n\n<p>Executing this script will result in the following error:</p>\n\n<pre><code>TypeError: Can't instantiate abstract class ConcreteFoo with abstract methods foo\n</code></pre>\n\n<p>This error can be resolved by providing an implementation of the <code>foo</code> method:</p>\n\n<pre><code>from abc import ABC, abstractmethod\n\n\nclass AbstractFoo(ABC):\n\n    @abstractmethod\n    def foo(self):\n        pass\n\nclass ConcreteFoo(AbstractFoo):\n\n    def foo(self):\n        print('Made it to foo')\n\nif __name__ == \"__main__\":\n    c = ConcreteFoo()\n    c.foo()    \n</code></pre>\n\n<p>Executing this script results in the following:</p>\n\n<pre><code>Made it to foo\n</code></pre>\n"}], "owner": {"reputation": 370, "user_id": 947330, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/NnnXg.jpg?s=128&g=1", "display_name": "Avi", "link": "https://stackoverflow.com/users/947330/avi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1533211473, "creation_date": 1533164566, "question_id": 51643379, "link": "https://stackoverflow.com/questions/51643379/how-can-the-builder-pattern-with-fail-safes-be-used-in-python", "title": "How can the builder pattern with fail safes be used in Python?", "body": "<p>I'm trying to implement in Python the builder pattern with some fail safes. This fail safes would normally be implemented in OOP using interfaces and would restrict the user of using some methods before others or at all, unless the current object can be manipulated using this methods. \nHow can such fail safes be implemented in Python?</p>\n"}, {"tags": ["python", "html", "parsing", "beautifulsoup", "lxml"], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 6707205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a70e703a11beee76037c69d43ceca7f2?s=128&d=identicon&r=PG&f=1", "display_name": "hdizzle", "link": "https://stackoverflow.com/users/6707205/hdizzle"}, "edited": false, "score": 0, "creation_date": 1533215519, "post_id": 51647440, "comment_id": 90272438, "body": "I think this would work if the document was just what I posted, but the document I am looking through is much larger so it would be difficult to find each index for whichever value I need. I will always know that I need the &quot;iPhone&quot; field, it&#39;s just that the number following it will be different."}], "tags": [], "owner": {"reputation": 5677, "user_id": 1592364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9fRvr.jpg?s=128&g=1", "display_name": "Ankur Sinha", "link": "https://stackoverflow.com/users/1592364/ankur-sinha"}, "is_accepted": false, "score": 1, "last_activity_date": 1533193474, "creation_date": 1533193474, "answer_id": 51647440, "question_id": 51643332, "link": "https://stackoverflow.com/questions/51643332/using-lxml-html-to-parse-large-html-document/51647440#51647440", "title": "Using lxml.html to parse large html document", "body": "<p>How about this?</p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport re\n\nsoup = BeautifulSoup(html, 'html.parser')\n\nx = soup.find_all('font')\nname = re.sub(r\"[\\n\\t\\s]*\", \"\", x[0].get_text())\nvalue = re.sub(r\"[\\n\\t\\s]*\", \"\", x[3].get_text())\n\nprint(name, 'costs', value)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>iPhone costs 29,906\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 87, "user_id": 6707205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a70e703a11beee76037c69d43ceca7f2?s=128&d=identicon&r=PG&f=1", "display_name": "hdizzle", "link": "https://stackoverflow.com/users/6707205/hdizzle"}, "is_accepted": true, "score": 0, "last_activity_date": 1533238354, "creation_date": 1533238354, "answer_id": 51660940, "question_id": 51643332, "link": "https://stackoverflow.com/questions/51643332/using-lxml-html-to-parse-large-html-document/51660940#51660940", "title": "Using lxml.html to parse large html document", "body": "<p>I didn't get exactly what I wanted, but this what I can come up with so far to build off of </p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport requests\nfrom lxml import html, cssselect\nimport csv\n\n\nlink = \"https://www.sec.gov/Archives/edgar/data/320193/000032019318000100/a10-qq320186302018.htm\"\nresponse = requests.get(link)\nsoup = BeautifulSoup(response.text, 'html.parser')\nstr_soup = str(soup)\ndoc = html.document_fromstring(str_soup)\n\n\nwith open('AAPL_financials.csv', 'w') as csvfile:\n    writer = csv.writer(csvfile)\n    for col in doc.cssselect('tr'):\n        row = []\n        for text in col.cssselect('font'):\n            if text.text == None:\n                continue\n            value = text.text.strip()\n            if value == \"\":\n                continue\n            if value == \"$\":\n                continue\n            if value == \"%\":\n                continue\n            if value == \")\":\n                continue\n            if value[0] == \"(\":\n                value = value.replace(\"(\", \"-\"))\n            row.append(value)\n        writer.writerow(row)\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 6707205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a70e703a11beee76037c69d43ceca7f2?s=128&d=identicon&r=PG&f=1", "display_name": "hdizzle", "link": "https://stackoverflow.com/users/6707205/hdizzle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 51660940, "answer_count": 2, "score": 0, "last_activity_date": 1533238354, "creation_date": 1533164212, "last_edit_date": 1533178210, "question_id": 51643332, "link": "https://stackoverflow.com/questions/51643332/using-lxml-html-to-parse-large-html-document", "title": "Using lxml.html to parse large html document", "body": "<pre><code>&lt;td style=\"vertical-align:bottom;background-color:#efefef;padding-left:2px;padding-top:2px;padding-bottom:2px;padding-right:2px;\"&gt;\n  &lt;div style=\"text-indent:26px;font-size:9pt;\"&gt;\n    &lt;font style=\"font-family:Helvetica,sans-serif;font-size:9pt;\"&gt;\n    iPhone\n    &lt;/font&gt;\n    &lt;font style=\"font-family:Helvetica,sans-serif;font-size:9pt;\"&gt;\n    &lt;sup style=\"vertical-align:top;line-height:120%;font-size:pt\"&gt;\n    (1)\n    &lt;/sup&gt;\n    &lt;/font&gt;\n  &lt;/div&gt;\n&lt;/td&gt;\n&lt;td style=\"vertical-align:bottom;padding-left:2px;padding-top:2px;padding-bottom:2px;background-color:#efefef;\"&gt;\n  &lt;div style=\"text-align:left;font-size:9pt;\"&gt;\n    &lt;font style=\"font-family:Helvetica,sans-serif;font-size:9pt;\"&gt;\n    $\n    &lt;/font&gt;\n  &lt;/div&gt;\n&lt;/td&gt;\n&lt;td style=\"vertical-align:bottom;background-color:#efefef;padding-top:2px;padding-bottom:2px;\"&gt;\n  &lt;div style=\"text-align:right;font-size:9pt;\"&gt;\n    &lt;font style=\"font-family:Helvetica,sans-serif;font-size:9pt;\"&gt;\n    29,906\n    &lt;/font&gt;\n  &lt;/div&gt;\n&lt;/td&gt;\n&lt;td style=\"vertical-align:bottom;background-color:#efefef;\"&gt;\n  &lt;div style=\"text-align:left;font-size:10pt;\"&gt;\n    &lt;font style=\"font-family:inherit;font-size:10pt;\"&gt;\n    &lt;br/&gt;\n    &lt;/font&gt;\n  &lt;/div&gt;\n&lt;/td&gt;\n</code></pre>\n\n<p>I am trying to use lxml to get the two fields: iPhone and 29,906.</p>\n\n<p>This is part of a much much bigger html file.</p>\n\n<p>I have found how to extract the font in each td, but I need to be able to match the iPhone field and the 29,906 field. </p>\n\n<p>One way I can think of is put everything into a really long array and search for \"iPhone\" and return the iPhone + 2 value, but this seems really long winded and inefficient.</p>\n\n<p>Can anyone please guide me in the right direction?</p>\n\n<p>This is what I have so far:</p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport requests\nfrom lxml import html, cssselect\n\nlink =    \"https://www.sec.gov/Archives/edgar/data/320193/000032019318000100/a10-qq320186302018.htm\"\nresponse = requests.get(link)\nsoup = BeautifulSoup(response.text, 'html.parser')\nstr_soup = str(soup)\ndoc = html.document_fromstring(str_soup)\nfor col in doc.cssselect('font'):\n    try:\n        style = col.attrib['style']\n        if style==\"font-family:Helvetica,sans-serif;font-size:9pt;\":\n            print(col.text.strip())\n    except:\n        pass\n</code></pre>\n\n<p>This returns all the text but not how I need it.</p>\n"}, {"tags": ["python", "algorithm", "linked-list", "space-complexity"], "comments": [{"owner": {"reputation": 14963, "user_id": 834261, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vxyWz.png?s=128&g=1", "display_name": "hatchet - done with SOverflow", "link": "https://stackoverflow.com/users/834261/hatchet-done-with-soverflow"}, "edited": false, "score": 0, "creation_date": 1533164895, "post_id": 51643317, "comment_id": 90251127, "body": "The array takes new space, doesn&#39;t it?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 6, "creation_date": 1533164900, "post_id": 51643317, "comment_id": 90251128, "body": "Yes, it&#39;s O(N), since you need to create an array with N entries. Granted the memory used for each entry in the array is much smaller than the memory for the node itself. But that&#39;s just a constant factor, which Big-O ignores."}], "owner": {"reputation": 427, "user_id": 7303809, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/19e7a15c0a2c04cf0685450cc959a284?s=128&d=identicon&r=PG&f=1", "display_name": "SW Williams", "link": "https://stackoverflow.com/users/7303809/sw-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 340, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1533164124, "creation_date": 1533164124, "question_id": 51643317, "link": "https://stackoverflow.com/questions/51643317/space-complexity-of-an-array-of-linked-list-node-pointers", "title": "Space complexity of an array of linked list node pointers", "body": "<p>Say I have an existing linked list. If I were to iterate through the linked list and put all the nodes in an array, what would the space complexity of this? It seems obvious that it would be O(N), but the thing is, I am not creating N new nodes, but rather storing the reference to those nodes in an array. The nodes already exist are already stored somewhere, so it seems no new space is being used.</p>\n"}, {"tags": ["python", "diskspace"], "comments": [{"owner": {"reputation": 24739, "user_id": 1790644, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f1a2a40ddbc52508d5b53e9879961251?s=128&d=identicon&r=PG", "display_name": "Matt Clark", "link": "https://stackoverflow.com/users/1790644/matt-clark"}, "edited": false, "score": 4, "creation_date": 1533163850, "post_id": 51643262, "comment_id": 90250901, "body": "<code>For some reason it fails now</code> and how exactly does it fail? Error messages? Expected vs actual behavior? What changed? We arent just going to dig through your code and blindly fix an issue that we don&#39;t even know what is."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 1, "creation_date": 1533163988, "post_id": 51643262, "comment_id": 90250922, "body": "As a side note: Are you writing this script for learning purposes, or because you need a tool that can do those things? Because tools like <code>df</code> and <code>du</code> already exist for what you want unless you&#39;re on Windows, and if you are\u2026 I&#39;m pretty sure there&#39;s something even if I don&#39;t know what it is (maybe part of Mark Russinovich&#39;s sysinternals stuff?). But if you&#39;re doing this to learn how to use <code>walk</code> and <code>listdir</code> and <code>stat</code> and so on, then it&#39;s a perfectly reasonable project (although I&#39;d suggest learning <code>scandir</code>\u2014and also <code>argparse</code> instead of <code>getopt</code>)."}, {"owner": {"reputation": 67, "user_id": 3342733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2003fb9a30df2e8a8e0e218c3b5c1fa9?s=128&d=identicon&r=PG&f=1", "display_name": "user192085", "link": "https://stackoverflow.com/users/3342733/user192085"}, "edited": false, "score": 0, "creation_date": 1533165215, "post_id": 51643262, "comment_id": 90251205, "body": "Yeah I&#39;m learning to code.  I did like ncdu, so I included it in the options.  I wanted something to instantly tell me the recursive size of a directory with one command but also an option to do it for all subdirectories.  The error I get is: the option -d I get a TypeError coercing to Unicode need string or buffer list found.  With no option given, it returns nothing at all instead of the current directory&#39;s recursive size."}, {"owner": {"reputation": 67, "user_id": 3342733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2003fb9a30df2e8a8e0e218c3b5c1fa9?s=128&d=identicon&r=PG&f=1", "display_name": "user192085", "link": "https://stackoverflow.com/users/3342733/user192085"}, "edited": false, "score": 0, "creation_date": 1533165380, "post_id": 51643262, "comment_id": 90251232, "body": "The other options seem to work, i believe"}, {"owner": {"reputation": 67, "user_id": 3342733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2003fb9a30df2e8a8e0e218c3b5c1fa9?s=128&d=identicon&r=PG&f=1", "display_name": "user192085", "link": "https://stackoverflow.com/users/3342733/user192085"}, "edited": false, "score": 0, "creation_date": 1533321625, "post_id": 51643262, "comment_id": 90319947, "body": "can anyone give me an example of using argparse instead?"}], "answers": [{"comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1533166492, "post_id": 51643554, "comment_id": 90251472, "body": "No, that&#39;s still wrong. I mean, it&#39;ll work, by accident, sometimes, but it&#39;s not what you want to do. Don&#39;t use <code>sys.argv</code> after processing it with <code>getopt</code>, use the values returned by <code>getopt</code>."}], "tags": [], "owner": {"reputation": 67, "user_id": 3342733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2003fb9a30df2e8a8e0e218c3b5c1fa9?s=128&d=identicon&r=PG&f=1", "display_name": "user192085", "link": "https://stackoverflow.com/users/3342733/user192085"}, "is_accepted": false, "score": 0, "last_activity_date": 1533165929, "creation_date": 1533165929, "answer_id": 51643554, "question_id": 51643262, "link": "https://stackoverflow.com/questions/51643262/disk-usage-script/51643554#51643554", "title": "Disk Usage Script", "body": "<p>I think I got it now.  Line 42 included sys.argv[1:] which returned a list.  It should actually be sys.argv[2] to reference the directory after supplying the -d option.</p>\n"}, {"comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1533166367, "post_id": 51643556, "comment_id": 90251445, "body": "I&#39;m pretty rusty on the Python <code>getopt</code> bindings, but I&#39;m pretty sure his options as specified are all just boolean flags, and the directory name is going to end up in args, not as the arg to <code>-d</code>."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1533231990, "post_id": 51643556, "comment_id": 90282461, "body": "@abarnert: You&#39;re right\u2014I&#39;m not very unfamiliar with <code>getopt</code> either\u2014so after learning more about it, I have updated / expand my answer according."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1533232597, "post_id": 51643556, "comment_id": 90282750, "body": "I&#39;m not really sure what his intended design is. The OP&#39;s existing flags allow something like <code>mydu.py -d dir1 dir2 dir3</code> to scan multiple directories, which seems useful (he just needs to get them out of <code>args</code> instead of <code>sys.argv</code> or <code>opts</code>, and of course he needs to iterate the list rather than treat it like a string). Your change doesn&#39;t allow multiple directories like that, but does allow multiple operations, like <code>-ddir1 -a</code>. I&#39;m not sure which one is more useful, or more in line with the OP&#39;s intentions. But now we&#39;ve got an answer explaining each option, so I guess he can choose?"}, {"owner": {"reputation": 67, "user_id": 3342733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2003fb9a30df2e8a8e0e218c3b5c1fa9?s=128&d=identicon&r=PG&f=1", "display_name": "user192085", "link": "https://stackoverflow.com/users/3342733/user192085"}, "edited": false, "score": 0, "creation_date": 1533319791, "post_id": 51643556, "comment_id": 90319234, "body": "Does anyone know why if an argument isn&#39;t given it doesn&#39;t display usage information?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1533321214, "post_id": 51643556, "comment_id": 90319777, "body": "user192085: It&#39;s because the <code>for opt, arg in opts:</code> loop doesn&#39;t execute when there aren&#39;t any arguments. I&#39;ve modified my answer by adding an <code>else:</code> clause to the loop so it will print the usage information when that&#39;s case (and added something to the unit testing portion for that case."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1533321295, "post_id": 51643556, "comment_id": 90319806, "body": "user192085: Also, if my answer solves your problem please consider accepting it. See <a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": false, "score": 1, "last_activity_date": 1533320965, "last_edit_date": 1533320965, "creation_date": 1533165937, "answer_id": 51643556, "question_id": 51643262, "link": "https://stackoverflow.com/questions/51643262/disk-usage-script/51643556#51643556", "title": "Disk Usage Script", "body": "<p>I see a couple of problems with your usage of <code>getopt</code>. One (which sounds like you've figured-out for yourself) is that you're giving the wrong thing to <code>get_size()</code> by passing it <code>start_path=sys.argv[1:]</code> which assign <code>start_path</code> to a <code>list</code> of all the command arguments after the first.</p>\n\n<p>The second issue is you're not defining the second and third arguments passed to <code>getopt()</code> properly. Quoting from the <a href=\"https://pymotw.com/3/getopt/index.html\" rel=\"nofollow noreferrer\">PyMOTW3</a>:</p>\n\n<blockquote>\n  <p>The second argument is the option definition string for single character options. <strong>If one of the options requires an argument, its letter is followed by a colon.</strong> </p>\n</blockquote>\n\n<p>(emphasis mine)</p>\n\n<p>This means that in order to accept a value along with the <code>-d</code> option, you'd need to use <code>\"ad:hnv\"</code> instead of the <code>\"adhnv\"</code> you've got. </p>\n\n<p>Similarly, for the <code>--directory</code> option in the list of long-style options:</p>\n\n<blockquote>\n  <p>The third argument, if used, should be a sequence of the long-style option names. Long style options can be more than a single character, such as --noarg or --witharg. The option names in the sequence should not include the \u201c--\u201d prefix. <strong>If any long option requires an argument, its name should have a suffix of \u201c=\u201d.</strong></p>\n</blockquote>\n\n<p>To support it there too requires you to pass <code>[\"all\", \"directory=\", \"help\", \"ncdu\", \"version\"]</code>.</p>\n\n<p>Unfortunately <code>getopt</code> doesn't support having an optional option argument. The reason is likely because it makes parsing ambiguous: For example, if <code>-a</code> takes an optional argument and <code>-b</code> is another option entirely, it unclear how interpret <code>-ab</code>.</p>\n\n<p>If you can live with that limitation, the following incorporates changes to address the above issues:</p>\n\n<pre><code>import os\nimport sys\nimport subprocess\nimport getopt\nfrom humanize import naturalsize\n\ndef get_size(start_path='.'):\n    # Might was to check validity of path here...\n    #if not (os.path.exists(start_path) and os.path.isdir(start_path)):\n    #    raise ValueError('Invalid path argument: {!r}'.format(start_path))\n    total_size = 0\n    for dirpath, dirnames, filenames in os.walk(start_path):\n        for f in filenames:\n            fp = os.path.join(dirpath, f)\n            total_size += os.path.getsize(fp)\n    return total_size\n\ndef get_immediate_subdirectories(a_dir):\n    return [name for name in os.listdir(a_dir)\n            if os.path.isdir(os.path.join(a_dir, name))]\n\ndef version():\n    print(\"Version: 1.0\")\n\ndef usage():\n    print(\"Usage: disk_usage.py [-a|--all][-n|--ncdu][-v|--version][directory name]\")\n\ndef main():\n    try:\n        opts, args = getopt.getopt(sys.argv[1:], \"ad:hnv\",\n                            [\"all\", \"directory=\", \"help\", \"ncdu\", \"version\",])\n    except getopt.GetoptError as err:\n        print(err)\n        usage()\n        if __name__ == '__main__':\n            return 2  # Unit test.\n        else:\n            sys.exit(2)\n\n    for opt, arg in opts:\n        if opt in (\"-a\", \"--all\"):\n            for subdir in get_immediate_subdirectories('.'):\n                print(\"%s\\t\\t %s\" % (naturalsize(get_size(subdir)), subdir))\n                sys.exit()\n        elif opt in (\"-d\", \"--directory\"):\n            print(naturalsize(get_size(start_path=arg)))\n        elif opt in (\"-v\", \"--version\"):\n            print(version())\n            sys.exit()\n        elif opt in (\"-h\", \"--help\"):\n            usage()\n            sys.exit()\n        elif opt in (\"-n\", \"--ncdu\"):\n            os.system('ncdu')\n            sys.exit()\n        else:\n            print(usage())\n    else:\n        print(usage())\n\n\nif __name__ == '__main__':\n    # Unit test.\n    sys.argv = ['disk_usage.py']  # no option given\n    main()\n    sys.argv = 'disk_usage.py -d.'.split()  # short opt\n    main()\n    sys.argv = 'disk_usage.py -dsome_folder'.split()  # short opt\n    main()\n    sys.argv = 'disk_usage.py -d some_folder'.split()  # short opt\n    main()\n    sys.argv = 'disk_usage.py --directory some_folder'.split()  # long opt\n    main()\n    sys.argv = 'disk_usage.py -d'.split()  # Missing argument error\n    main()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": false, "score": 0, "last_activity_date": 1533166690, "last_edit_date": 1533166690, "creation_date": 1533166210, "answer_id": 51643586, "question_id": 51643262, "link": "https://stackoverflow.com/questions/51643262/disk-usage-script/51643586#51643586", "title": "Disk Usage Script", "body": "<p>There are two problems here.</p>\n\n<hr>\n\n<p>The first problem is that you're using <code>getopt</code> wrong:</p>\n\n<pre><code>opts, args = getopt.getopt(sys.argv[1:], \"adhnv\", [\"all\",\"directory\",\"help\",\"ncdu\",\"version\",])\n</code></pre>\n\n<p>This returns a list of options <code>opts</code>, and a list of <code>args</code> with the options filtered out. But you're continuing to use <code>sys.argv</code> instead of <code>args</code>:</p>\n\n<pre><code>print (naturalsize(get_size(start_path=sys.argv[1:])))\n</code></pre>\n\n<p>In an invocation like <code>myprogram -d spam</code>, <code>sys.argv[1:]</code> is going to be <code>['-d', 'spam']</code>. But you don't want the <code>-d</code>. That's the whole reason you called <code>getopts</code> in the first place. So, use <code>args</code> here, not <code>sys.argv</code>.</p>\n\n<hr>\n\n<p>The second problem is that you're taking a slice, <code>sys.argv[1:]</code>, but treating it as if it were a single value, rather than a list of values.</p>\n\n<p>If you want to allow multiple directories to be passed with <code>-d</code> and to work on all of them, you need a <code>for arg in \u2026:</code> loop over the slice.</p>\n\n<p>If you want just a single directory, then you need to just index the list, like <code>[1]</code>, not <code>[1:]</code>. Although, if you want that, you probably don't want <code>-d</code> to be a boolean flag and the directory to be an arg; you want <code>-d</code> to be a flag with the directory as its value.</p>\n\n<hr>\n\n<p>More generally, you probably shouldn't be using <code>getopt</code> here in the first place. As <a href=\"https://docs.python.org/3/library/getopt.html\" rel=\"nofollow noreferrer\">the docs</a> say:</p>\n\n<blockquote>\n  <p>Note The <code>getopt</code> module is a parser for command line options whose API is designed to be familiar to users of the C <code>getopt()</code> function. Users who are unfamiliar with the C <code>getopt()</code> function or who would like to write less code and get better help and error messages should consider using the <a href=\"https://docs.python.org/3/library/argparse.html#module-argparse\" rel=\"nofollow noreferrer\"><code>argparse</code></a> module instead.</p>\n</blockquote>\n\n<p>If you're a <code>getopt</code> wizard, then sure, use <code>getopt</code> for simple projects instead of learning something new, even if it's better. But for anyone else, there is really no good reason to learn <code>getopt</code> in the first place, much less to learn how to debug all the funky corners of it. <code>argparse</code> is just plain better in every way. And if you don't like <code>argparse</code>, there are half a dozen alternatives on PyPI.</p>\n"}], "owner": {"reputation": 67, "user_id": 3342733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2003fb9a30df2e8a8e0e218c3b5c1fa9?s=128&d=identicon&r=PG&f=1", "display_name": "user192085", "link": "https://stackoverflow.com/users/3342733/user192085"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1268, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1533320965, "creation_date": 1533163743, "last_edit_date": 1533164276, "question_id": 51643262, "link": "https://stackoverflow.com/questions/51643262/disk-usage-script", "title": "Disk Usage Script", "body": "<p>Somewhere things stopped working.  The intent was to show current disk usage if no argument given, show the directory's usage if provided as an argument, and show all subdirectories' disk usage if an argument called --all was given.  Here is what I got so far. For some reason it fails now when supplying the <code>\"-d\"</code> for directory.</p>\n\n<pre><code>#!/usr/bin/env python\n\nimport os \nimport sys \nimport subprocess \nimport getopt \nfrom humanize import naturalsize\n\ndef get_size(start_path = '.'):\n    total_size = 0\n    for dirpath, dirnames, filenames in os.walk(start_path):\n        for f in filenames:\n            fp = os.path.join(dirpath, f)\n            total_size += os.path.getsize(fp)\n    return total_size\n\ndef get_immediate_subdirectories(a_dir):\n    return [name for name in os.listdir(a_dir)\n            if os.path.isdir(os.path.join(a_dir, name))]\n\ndef version():\n    print (\"Version: 1.0\")\n\ndef usage():\n    print (\"Usage: disk_usage.py [-a|--all][-n|--ncdu][-v|--version][directory name]\")\n\ndef main():\n    try:\n        opts, args = getopt.getopt(sys.argv[1:], \"adhnv\", [\"all\",\"directory\",\"help\",\"ncdu\",\"version\",])\n    except getopt.GetoptError as err:\n        # print help information and exit:\n        print(err)  # will print something like \"option -a not recognized\"\n        usage()\n        sys.exit(2)\n    for o, a in opts:\n        if o in (\"-a\", \"--all\"):\n            for subdir in get_immediate_subdirectories('.'):\n                print (\"%s\\t\\t %s\" % (naturalsize(get_size(subdir)),subdir))\n                sys.exit()\n        elif o in (\"-d\", \"--directory\"):\n            print (naturalsize(get_size(start_path=sys.argv[1:])))\n        elif o in (\"-v\", \"--version\"):\n            print (version())\n            sys.exit()\n        elif o in (\"-h\", \"--help\"):\n            usage()\n            sys.exit()\n        elif o in (\"-n\", \"--ncdu\"):\n            os.system('ncdu')\n            sys.exit()\n        else:\n            print (usage())\n\n\nmain()\n</code></pre>\n"}, {"tags": ["python", "sockets"], "comments": [{"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1533164405, "post_id": 51643196, "comment_id": 90251016, "body": "Why do you pickle the users? Usually when smth like this happens, do one step at a time, not more (<code>pickle.loads(json.loads(...</code>) and for each of them verify that everything is correct (strings length and so on). That at both ends! I have a feeling that it could be the fact that <i>pickle</i> yields a binary string, while <i>json</i> strings can&#39;t handle all chars (as <i>pickle</i> formats them)."}, {"owner": {"reputation": 169, "user_id": 9894117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0597117ff68f0c84eb831c613a95c840?s=128&d=identicon&r=PG&f=1", "display_name": "ergesto", "link": "https://stackoverflow.com/users/9894117/ergesto"}, "reply_to_user": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1533164904, "post_id": 51643196, "comment_id": 90251130, "body": "can you provide an example ?"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1533165996, "post_id": 51643196, "comment_id": 90251359, "body": "Oh, stupid me, I didn&#39;t notice that you just initialize some class variables, instead having an initializer (<code>__init__</code>)."}], "owner": {"reputation": 169, "user_id": 9894117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0597117ff68f0c84eb831c613a95c840?s=128&d=identicon&r=PG&f=1", "display_name": "ergesto", "link": "https://stackoverflow.com/users/9894117/ergesto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "closed_date": 1533165469, "answer_count": 0, "score": 0, "last_activity_date": 1533179159, "creation_date": 1533163305, "last_edit_date": 1533179159, "question_id": 51643196, "link": "https://stackoverflow.com/questions/51643196/access-class-object-data-sent-from-client-to-server-over-socket", "closed_reason": "Duplicate", "title": "access class object data sent from client to server over socket", "body": "<p>I have both a server and a client, I\u2019m trying to send a class object over socket from client to server, the class object contains a list with 2 usernames and a variable with the length of list 2, in server I can successfully access the ctotalusers which gives me 2, but the userslist gives me [] why the users are missing ?</p>\n\n<p><strong>client</strong></p>\n\n<pre><code>import socket, pickle, json\n\ndef create_send_users(i, y, k):\n    msg = {'i': i, 'users': y, 'k': k}\n    return json.dumps(msg)\n\n\nclass CaUsers(object):\n    ctotalusers = None \n    userslist = []\n\n\nusers = CaUsers()\nusers.userslist.append(\"bob\")\nusers.userslist.append(\"alice\")\nusers.ctotalusers = len(users.userslist)\n\n\na_users = pickle.dumps(users)\n\nmsg = create_send_users(\"i\", a_users, \"k\")\n\ns = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\ns.connect(('127.0.0.1', 7038))\ns.send(msg)\n</code></pre>\n\n<p><strong>server</strong> </p>\n\n<pre><code>import socket, pickle, json, sys\n\n\nclass CaUsers(object):\n    ctotalusers = None \n    userslist = []\n\n\n\nHOST = '127.0.0.1'  \nPORT = 7038\n\ns = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\nprint('# Socket created')\n\n# Create socket on port\ntry:\n    s.bind((HOST, PORT))\nexcept socket.error as msg:\n    print('# Bind failed. ')\n    sys.exit()\n\nprint('# Socket bind complete')\n\n# Start listening on socket\ns.listen(10)\nprint('# Socket now listening')\n\n# Wait for client\nconn, addr = s.accept()\nprint('# Connected to ' + addr[0] + ':' + str(addr[1]))\n\n# Receive data from client\nwhile True:     \n    data = conn.recv(4096)\n    if data:\n        users =  pickle.loads(json.loads(data)[\"users\"])\n        print users.ctotalusers # correct gives me 2 \n        print users.userslist # wrong gives me []\n\n\ns.close()\n</code></pre>\n"}, {"tags": ["python", "turtle-graphics", "pong"], "comments": [{"owner": {"reputation": 10008, "user_id": 462006, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/37peF.jpg?s=128&g=1", "display_name": "scrappedcola", "link": "https://stackoverflow.com/users/462006/scrappedcola"}, "edited": false, "score": 2, "creation_date": 1533163331, "post_id": 51643179, "comment_id": 90250750, "body": "Stackoverflow is for specific programming questions. The CodeReview stackexchange might be a better fit, but you should check out the FAQ of the site and update your question accordingly before posting to that exchange."}], "answers": [{"tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": false, "score": 1, "last_activity_date": 1533180314, "creation_date": 1533180314, "answer_id": 51645036, "question_id": 51643179, "link": "https://stackoverflow.com/questions/51643179/pong-created-in-python-turtle/51645036#51645036", "title": "Pong Created in Python Turtle", "body": "<p>Some issues I see:</p>\n\n<ul>\n<li><p>You've stretched a 20 by 20 square to be 10 by 80: </p>\n\n<p>AIplayer.shapesize(0.5, 4)</p>\n\n<p>But your collision distance is only 20 from center, so your ball can\ncross over the bottom or top of the paddle without actually\ncolliding.</p></li>\n<li><p>Your <code>isCollision()</code> function is mostly redundant with turtle's own\n<code>.collision()</code> method.</p></li>\n<li><p>You shouldn't have <code>while True:</code> in an event-driven world like turtle\nas it potentially prevents some events from firing.  Better to\nreplace it with a timer event.</p></li>\n<li><p>Some of your collisions change both x and y deltas when they should\nonly change one of them.</p></li>\n<li><p>You should avoid redundant queries of the turtle in your main loop as well as checking conditions that are negated by other logic clauses.  I.e. do as little as you can get away with in the main loop.</p></li>\n</ul>\n\n<p>Below is my rework of your game along the above lines, plus lots of other style and logic changes:</p>\n\n<pre><code>from turtle import Turtle, Screen\n\nFONT = (\"Arial\", 16, \"normal\")\n\ndef isCollision(t1, t2):\n    return t1.distance(t2) &lt; 15\n\n# set up screen\nscreen = Screen()\nscreen.bgcolor(\"darkgreen\")\nscreen.title(\"Pong\")\n\n# set up border\nborder_pen = Turtle(visible=False)\nborder_pen.speed('fastest')\nborder_pen.color('white')\nborder_pen.pensize(3)\n\nborder_pen.penup()\nborder_pen.setposition(-300, -300)\nborder_pen.pendown()\n\nfor _ in range(4):\n    border_pen.forward(600)\n    border_pen.left(90)\n\n# set score to 0\nscore = 0\n\n# set time to zero\nseconds = 0\n\n# Draw score\nscore_pen = Turtle(visible=False)\nscore_pen.color(\"white\")\nscore_pen.penup()\nscore_pen.setposition(-290, 310)\n\nscore_pen.write(\"Score {}\".format(score), False, align=\"left\", font=FONT)\n\n# Draw timer\ntime_pen = Turtle(visible=False)\ntime_pen.color(\"white\")\ntime_pen.penup()\ntime_pen.setposition(260, 310)\n\ntime_pen.write(\"Time {}\".format(int(seconds)), False, align=\"left\", font=FONT)\n\n# create the player turtle\nplayer = Turtle(\"square\", visible=False)\nplayer.shapesize(0.5, 3)\nplayer.speed('fastest')\nplayer.setheading(90)\nplayer.color(\"blue\")\nplayer.penup()\n\nplayer.setposition(-280, -250)  # (x,y)\nplayer.showturtle()\n\nplayerspeed = 15\n\n# create the AIplayer turtle\nAIplayer = Turtle(\"square\", visible=False)\nAIplayer.shapesize(0.5, 3)\nAIplayer.speed('fastest')\nAIplayer.setheading(90)\nAIplayer.color(\"black\")\nAIplayer.penup()\n\nAIplayer.setposition(280, 250)  # (x,y)\nAIplayer.showturtle()\n\nAIplayerspeed = 15\n\n# create the pong\npong = Turtle(\"circle\", visible=False)\npong.shapesize(0.5, 0.5)\npong.speed('fast')\npong.color(\"red\")\npong.penup()\n\npong.sety(265)\npong.showturtle()\n\npongspeed = 15\npong_dx, pong_dy = 5, -5\n\n# Move player up and down\ndef move_up():\n    player.forward(playerspeed)\n\n    y = player.ycor()\n\n    if y &gt; 265:\n        y = 260\n        player.sety(y)\n\n    screen.update()\n\ndef move_down():\n    player.backward(playerspeed)\n\n    y = player.ycor()\n\n    if y &lt; -265:\n        y = -260\n        player.sety(y)\n\n    screen.update()\n\n# keyboard bindings\nscreen.onkey(move_up, \"Up\")\nscreen.onkey(move_down, \"Down\")\n\nscreen.listen()\n\n# main game loop\ndef move():\n    global pong_dx, pong_dy, AIplayerspeed, seconds, score\n\n    # move pong ball\n    x, y = pong.position()\n    x += pong_dx\n    y += pong_dy\n    pong.setposition(x, y)\n\n    if isCollision(pong, player): # collision pong and player\n        pong_dx *= -1\n        # Update the score\n        score += 10\n        score_pen.undo()\n        score_pen.write(\"Score: {}\".format(score), align=\"left\", font=FONT)\n    elif isCollision(pong, AIplayer):  # collision pong and AIplayer\n        pong_dx *= -1\n    elif y &lt; -300 or y &gt; 300:  # check for bounce and redirect it\n        pong_dy *= -1\n    elif x &gt; 300:\n        pong_dx *= -1\n    elif x &lt; -300:\n        print(\"Game Over\")\n        screen.bye()\n        return\n\n    # move AI paddle (might speed up pong movement)\n    AIplayer.forward(AIplayerspeed)\n\n    y = AIplayer.ycor()\n\n    if y &lt; -250 or y &gt; 250:\n        AIplayerspeed *= -1\n\n    # display timer\n    seconds += 0.05\n    time_pen.undo()\n    time_pen.write(\"Time: {}\".format(int(seconds)), False, align=\"Left\", font=FONT)\n    screen.ontimer(move, 50)\n\n    screen.update()\n\nscreen.tracer(False)\nmove()\nscreen.mainloop()\n</code></pre>\n\n<p>I couldn't make sense of your \"increases ball speed\" logic so I left it out.  I used a darker background color as the original was difficult to look at on my screen.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 14033671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/319c9fe66878483550c303eb141758d9?s=128&d=identicon&r=PG&f=1", "display_name": "DevLimbani09", "link": "https://stackoverflow.com/users/14033671/devlimbani09"}, "is_accepted": false, "score": 0, "last_activity_date": 1596356647, "last_edit_date": 1596356647, "creation_date": 1596355571, "answer_id": 63213767, "question_id": 51643179, "link": "https://stackoverflow.com/questions/51643179/pong-created-in-python-turtle/63213767#63213767", "title": "Pong Created in Python Turtle", "body": "<p>The issue related to the <strong>pong/ball speed</strong> can be due to your CPU. The ball moves 5 pixels in both (x and y) direction every screen update and the update rate  depends on the CPU speed. The processes being executed by the CPU aren't constant and thus the CPU speed fluctuates.  Also because we have <code>screen.tracer()</code> set to <code>False</code> it doesn't show animations. <em>Thus, due to lack of animation and inconsistency of CPU speed, we see the speed of pong/ball increasing/decreasing.</em></p>\n<p>For <code>screen.tracer()</code> explanation refer <a href=\"https://youtu.be/LH8WgrUWG_I?t=123\" rel=\"nofollow noreferrer\">https://youtu.be/LH8WgrUWG_I?t=123</a></p>\n<p>For &quot;the increasing speed&quot; explanation refer <a href=\"https://youtu.be/Hw1H3rG3POM?t=40\" rel=\"nofollow noreferrer\">https://youtu.be/Hw1H3rG3POM?t=40</a></p>\n<p>To get a bit more consistent behavior, you could add <em>a long enough pause</em> into your loop in order to offset the variability of the computing times and to avoid drawing useless frames. You can do this using <code>time</code></p>\n<pre><code>import time\n\n# Initialization\n...\n\nwhile True:\n     time.sleep(1 / 60)\n\n    # The rest of your game logic\n...\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5471643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d790db32ef20caec66e51f7723c08e4?s=128&d=identicon&r=PG&f=1", "display_name": "Remington Nachshin", "link": "https://stackoverflow.com/users/5471643/remington-nachshin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3019, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1602923623, "creation_date": 1533163193, "last_edit_date": 1533180435, "question_id": 51643179, "link": "https://stackoverflow.com/questions/51643179/pong-created-in-python-turtle", "title": "Pong Created in Python Turtle", "body": "<p>I'm new to Python but I've coded in other languages, mainly for hardware. I made pong in Python using turtle but it's a little glitchy. I was wondering if any of you could check it out and give advice. I also want to add a start screen and end screen but am a little unsure how to. Also if you have any advice on how to improve collision detection, please let me know.</p>\n\n<p>I'm pasting code below</p>\n\n<hr>\n\n<pre><code>import os\nimport math\nimport random\nimport time\n\n#set up screen\nscreen = turtle.Screen()\nscreen.bgcolor(\"green\")\nscreen.title(\"Pong\")\n\n# set up border\nborder_pen = turtle.Turtle()\nborder_pen.speed(0)\nborder_pen.color(\"white\")\nborder_pen.penup()\nborder_pen.setposition(-300,-300)\nborder_pen.pendown()\nborder_pen.pensize(3)\nfor side in range(4):\n    border_pen.fd(600)\n    border_pen.lt(90)\nborder_pen.hideturtle()\n\n#set score to 0\nscore = 0\n\n#set time to zero\ntime = 0\nseconds = 0\n\n#Draw score\nscore_pen = turtle.Turtle()\nscore_pen.speed(0)\nscore_pen.color(\"white\")\nscore_pen.penup()\nscore_pen.setposition(-290, 310)\nscorestring = \"Score %s\" %score\nscore_pen.write(scorestring, False, align=\"left\", font=     (\"Arial\", 14, \"normal\"))\nscore_pen.hideturtle()\n\n#Draw timer\ntime_pen = turtle.Turtle()\ntime_pen.speed(0)\ntime_pen.color(\"white\")\ntime_pen.penup()\ntime_pen.setposition(260, 310)\ntimestring = \"Time %s\" %time\ntime_pen.write(timestring, False, align=\"left\", font= (\"Arial\", 14, \"normal\"))\ntime_pen.hideturtle()\n\n#create the player turtle\nplayer = turtle.Turtle()\nplayer.color(\"blue\")\nplayer.shape(\"square\")\nplayer.shapesize(0.5, 4)\nplayer.penup()\nplayer.speed(0)\nplayer.setposition(-280,-250)#(x,y)\nplayer.setheading(90)\nplayerspeed = 15\n\n#create the AIplayer turtle\nAIplayer = turtle.Turtle()\nAIplayer.color(\"black\")\nAIplayer.shape(\"square\")\nAIplayer.shapesize(0.5, 4)\nAIplayer.penup()\nAIplayer.speed(0)\nAIplayer.setposition(280,250)#(x,y)\nAIplayer.setheading(90)\nAIplayerspeed = 15\n\n\n#create the pong\npong = turtle.Turtle()\npong.color(\"red\")\npong.shape(\"circle\")\npong.shapesize(0.5, 0.5)\npong.penup()\npong.speed(10)\npong.setposition(0,0)#(x,y)\npongspeed = 15\npong.goto(0, 265)\npong.dy = -5\npong.dx = 5\n\n\n#Move player up and down\ndef move_up():\n    y = player.ycor()\n    y += playerspeed\n    if y &gt; 265:\n        y = 260\n    player.sety(y)\n\ndef move_down():\n    y = player.ycor()\n    y -= playerspeed\n    if y &lt; -265:\n        y = -260\n    player.sety(y)\n\n#keyboard bindings\nturtle.listen()\nturtle.onkey(move_up, \"Up\")\nturtle.onkey(move_down, \"Down\")\n#turtle.onkey(fire_bullet, \"space\")\n\ndef isCollision(t1, t2):\n    distance = math.sqrt(math.pow(t1.xcor()-    t2.xcor(),2)+math.pow(t1.ycor()-t2.ycor(),2))\n    if distance &lt; 20:\n        return True\n    else:\n        return False\n\n#main game loop\nwhile True:\n\n    #move pong ball\n    pong.sety(pong.ycor() +pong.dy)\n    pong.setx(pong.xcor() +pong.dx)\n\n    #check for bounce and redirect it\n    if pong.ycor() &lt; -300:\n        pong.dy *= -1\n    if pong.ycor() &gt; 300:\n        pong.dy *= -1\n    if pong.xcor() &lt; -300:\n        pong.dx *= -1\n        print(\"Game Over\")\n        exit()\n    if pong.xcor() &gt; 300:\n        pong.dx *= -1\n\n    #move AI paddle (might speed up pong movement)\n    y = pong.ycor()\n    y += AIplayerspeed\n    AIplayer.sety(y)\n    if AIplayer.ycor() &gt; 265:\n        AIplayerspeed *= -1       \n    if AIplayer.ycor() &lt; -250:\n        AIplayerspeed *= -1\n\n    #collision pong and player\n    if isCollision(pong, player):\n        pong.dy *= -1\n        pong.dx *= -1\n        #Update the score\n        score += 10\n        scorestring = \"Score: %s\" %score\n        score_pen.clear()\n        score_pen.write(scorestring, False, align=\"left\", font=(\"Arial\", 14, \"normal\"))\n\n    #collision pong and AIplayer\n    if isCollision(pong, AIplayer):\n        pong.dy *= -1\n        pong.dx *= -1\n\n    #updates timer and increases ball speed\n    if seconds &gt; 29:\n        pong.dy *= -2\n        pong.dx *= -2\n\n    if seconds &gt; 59:\n        pong.dy *= -3\n        pong.dx *= -3\n\n     #displays timer but makes game laggy\n#    seconds += 0.1\n#    time = seconds\n#    timestring = \"Time: %s\" %time\n#    time_pen.clear()\n#    time_pen.write(timestring, False, align=\"Left\", font=(\"Arial\", 14, \"normal\"))\n</code></pre>\n"}, {"tags": ["python", "variables", "global", "reset", "init"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 1, "creation_date": 1533163423, "post_id": 51643173, "comment_id": 90250782, "body": "You posted too much code, most of which is irrelevant to your question. Please create a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10156394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dd7d93eac1b218a98fd07bc37dd96b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark D", "link": "https://stackoverflow.com/users/10156394/mark-d"}, "edited": false, "score": 0, "creation_date": 1533186435, "post_id": 51643348, "comment_id": 90255552, "body": "I started with using the code at the beginning of you comment and I was successful and now learned how to implement global and local variables and argument passing. Simple but essential skills. Thanks for pointing me to the right direction."}], "tags": [], "owner": {"reputation": 284, "user_id": 7441356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fc54fe2a8aacea30c617f259e7fe0f3?s=128&d=identicon&r=PG&f=1", "display_name": "Ochmar", "link": "https://stackoverflow.com/users/7441356/ochmar"}, "is_accepted": true, "score": 0, "last_activity_date": 1533164332, "creation_date": 1533164332, "answer_id": 51643348, "question_id": 51643173, "link": "https://stackoverflow.com/questions/51643173/resetting-variable-function-error/51643348#51643348", "title": "Resetting Variable Function Error", "body": "<p>Short answer to your question would be:</p>\n\n<p>(Sorry I don't copy-paste your code, it's too long)\nReplace lines for example</p>\n\n<blockquote>\n  <p>enemy = GoblinIG</p>\n</blockquote>\n\n<p>with</p>\n\n<blockquote>\n  <p>enemy = Goblin(\"Goblin\")</p>\n</blockquote>\n\n<p>Also delete GoblinIG(\"Goblin\") etc, because from now on you won't use them.\nThis way it would create <strong>new</strong> object each time you use \"prefight\" function.</p>\n\n<p>Long answer would teach you about <a href=\"https://www.geeksforgeeks.org/global-local-variables-python/\" rel=\"nofollow noreferrer\">global and local variables</a> (you seem to use only global ones) and also <a href=\"https://www.python-course.eu/python3_passing_arguments.php\" rel=\"nofollow noreferrer\">argument passing</a>. Those would make your code so much better with so little effort.</p>\n\n<p>Don't get me wrong, I'm not trying to be mean, but to point directions. Your code will work, but it's not how you program nowadays.</p>\n"}], "owner": {"reputation": 23, "user_id": 10156394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dd7d93eac1b218a98fd07bc37dd96b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark D", "link": "https://stackoverflow.com/users/10156394/mark-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 1, "accepted_answer_id": 51643348, "answer_count": 1, "score": 1, "last_activity_date": 1533168499, "creation_date": 1533163151, "last_edit_date": 1533168499, "question_id": 51643173, "link": "https://stackoverflow.com/questions/51643173/resetting-variable-function-error", "title": "Resetting Variable Function Error", "body": "<p>So I'm a tad new to Python, I've worked a lot with RPG but I've come across a problem when trying to reset or refresh my variables in my Classes.</p>\n\n<p>At the moment when the user successfully flees the monster, entering the next fight with a goblin will result in the goblin sharing the same statistics as the previous one. For example, the user damages <code>Goblin_1</code> for <code>5</code> damage, meaning its health is at 25/30. If the user run away successfully, the next time the user fights a goblin, its starting health will be 25/30.</p>\n\n<p>This problem also carries over to the earned experience and gold given to the user when they kill the monster. I fairly certain that if the variables were reset after the user ran successfully away this would solve all the problems if I just carried it over to also the win condition.</p>\n\n<p>So to put this in short, we have <code>Goblin_1</code>. <code>Goblin_1</code> gets damaged for <code>5</code> hit points, and is now at 25/30. If the user flees, <code>Goblin_2</code> will override <code>Goblin_1</code>'s statistics and not start at 25/30 hit points.</p>\n\n<p>Any help would be fantastic mates.</p>\n\n<pre><code>import sys \nimport os\nimport random\nimport pickle\nimport time\n\n## Weapons\nweapon1 = {\"long sword\":10}\nweapon2 = {\"great sword\":40}\n\n## Potions\nhealthpot = {\"health potion\": 10}\n\n# User Statistics\nclass Player:\n    def __init__(self, name):\n        self.name = name\n        self.exp = 0\n        self.maxhealth = 100\n        self.health = self.maxhealth\n        self.base_attack = 10\n        self.gold = 0\n        self.pots_health = 0\n        self.weap = [\"rusty sword\"]\n        self.curweap = \"Rusty Sword\"\n\n# Attack Modifiers\n    @property \n    def attack(self):\n        attack = self.base_attack\n        if self.curweap == \"rusty sword\":\n            attack += 2\n\n        if self.curweap == \"long sword\":\n            attack += 10\n\n        if self.curweap == \"great sword\":\n            attack += 20\n\n        return attack\n\n## Monsters\nclass Goblin:\n    def __init__(self, name):\n        self.name = name\n        self.maxhealth = 30\n        self.health = self.maxhealth\n        self.attack = random.randint(3,8)\n        self.goldgain = random.randint(5,10)\n        self.expgain = random.randint(9,15)\nGoblinIG = Goblin(\"Goblin\")\n\nclass Skeleton:\n    def __init__(self, name):\n        self.name = name\n        self.maxhealth = 25\n        self.health = self.maxhealth\n        self.attack = random.randint(2,7)\n        self.goldgain = random.randint(0,10)\n        self.expgain = random.randint(5,10)\nSkeletonIG = Skeleton(\"Skeleton\")\n\nclass Colbolt:\n    def __init__(self, name):\n        self.name = name\n        self.maxhealth = 50\n        self.health = self.maxhealth\n        self.attack = random.randint(7,15)\n        self.goldgain = random.randint(10,20)\n        self.expgain = random.randint(9,20)\nColboltIG = Colbolt(\"Colbolt\")\n\n# Functions\n\n# Start Up Prompt\ndef main():\n    os.system('clear')\n    print (\"Basic Text RPG game.\\nCreated on July 24, 2018.\\n\\n\")\n    print (\"Select an option\\n\")\n    print (\"1.) Start\")\n    print (\"2.) Load\")\n    print (\"3.) Exit\")\n    raw_input = input (\"&gt;&gt;&gt; \")\n    option = raw_input\n    if option == \"start\":\n        start()\n    elif option == \"load\":\n        if os.path.exists(\"savefile\") == True:\n            os.system('clear')\n            with open('savefile', 'rb') as f:\n                global PlayerIG\n                PlayerIG = pickle.load(f)\n            print (\"Loaded Save State...\\n\")\n            option = raw_input\n            start1()\n        else:\n            print (\"You have no save file for this game.\")\n            option = raw_input\n            main()\n    elif option == \"exit\":\n        sys.exit()\n    else:\n        print (\"Error 404: Unknown command\")\n        main()\n\n# Goining User Infomation\ndef start():\n    os.system('clear')\n    print (\"Hello, what is your name?\")\n    raw_input = input (\"&gt;&gt;&gt; \")\n    option = raw_input\n    global PlayerIG\n    PlayerIG = Player(option)\n    start1()\n\n# Main Page - What The User Chooses To Do\ndef start1():\n    os.system('clear')\n    print (\"Name: %s\" % PlayerIG.name)\n    print (\"Experience: %i\" % PlayerIG.exp)\n    print (\"Attack: %i\" % PlayerIG.attack)\n    print (\"Gold: %d\" % PlayerIG.gold)\n    print (\"Current Weapons: %s\" % PlayerIG.curweap)\n    print (\"Health Potions: %d\" % PlayerIG.pots_health)\n    print (\"Health: %i/%i\\n\" % (PlayerIG.health, PlayerIG.maxhealth))\n    print (\"1.) Fight\")\n    print (\"2.) Drink Health Potion\")\n    print (\"3.) Shop\")\n    print (\"4.) Save\")\n    print (\"5.) Inventory\")\n    print (\"6.) Exit\")\n    os.system('clear')\n    raw_input = input (\"&gt;&gt;&gt; \")\n    option = raw_input\n    if option == \"fight\":\n        os.system('clear')\n        prefight()\n    elif option == \"shop\":\n        shop()\n    elif option == \"drink health potion\":\n        drinkpot_health_startpage()\n    elif option == \"drink health\":\n        drinkpot_health_startpage()\n    elif option == \"health potion\":\n        drinkpot_health_startpage()\n    elif option == \"save\":\n        os.system('clear')\n        with open('savefile', 'wb') as f:\n            pickle.dump(PlayerIG, f)\n            print (\"\\nGame has been saved!\\n\")\n        option = raw_input\n        start1()\n    elif option == \"exit\":\n        sys.exit()\n    elif option == \"inventory\":\n        inventory()\n    else:\n        print (\"\\n\")\n        start1()\n\n# Accessing The Inventory Of The User\ndef inventory():\n    os.system('clear')\n    print (\"What do you want to do?\")\n    print (\"1.) Equip Weapon\")\n    print (\"2.) Exit\")\n    raw_input = input (\"&gt;&gt;&gt; \")\n    option = raw_input\n    if option == \"equip weapon\":\n        equip()\n\n    elif option == \"exit\":\n        start1()\n\n    else:\n        os.system('clear')\n        print (\"Error 404: Unknown Command\\n\")\n        inventory()\n\n# Equiping Gear\ndef equip():\n    os.system('clear')\n    print (\"What do you want to equip?\\n\")\n    for weapon in PlayerIG.weap:\n        print (weapon.title())\n    print (\"Back\")\n    print (\"Exit\")\n    raw_input = input (\"&gt;&gt;&gt; \")\n    option = raw_input\n    if option == PlayerIG.curweap:\n        print (\"You already have that weapon equipped\\n\")\n        option = raw_input\n        equip()\n    elif option == \"back\":\n        inventory()\n    elif option == \"exit\":\n        start1()\n    elif option in PlayerIG.weap:\n        PlayerIG.curweap = option\n        print (\"You have equipped %s.\" % option, \"\\n\")\n        option = raw_input\n        equip()\n    else:\n        print (\"You don't have %s in your inventory\" % option, \"\\n\")\n        equip()\n\n## Deciding Monster Spawn Type\ndef prefight():\n    global enemy\n    if PlayerIG.exp &lt;= 50:\n        enemynum = random.randint(1, 2)\n        if enemynum == 1:\n            enemy = GoblinIG\n        if enemynum == 2:\n            enemy = SkeletonIG\n        fight()\n    if PlayerIG.exp &gt;= 50 &lt;= 100: \n        enemynum = random.randint(1, 3)\n        if enemynum == 1:\n            enemy = GoblinIG\n        elif enemynum == 2:\n            enemy = SkeletonIG\n        else:\n            enemy = ColboltIG\n        fight()\n\n# Determining What The User Wants To Do\ndef fight():\n    os.system('clear')\n    print (\"%s     vs      %s\" % (PlayerIG.name, enemy.name))\n    print (\"%s's Health: %d/%d    %s's Health: %i/%i\" % (PlayerIG.name, PlayerIG.health, PlayerIG.maxhealth, enemy.name, enemy.health, enemy.maxhealth))\n    print (\"Health Potions %i\\n\" % PlayerIG.pots_health)\n    print (\"1.) Attack\")\n    print (\"2.) Drink Health Potion\")\n    print (\"3.) Run\")\n    raw_input = input (\"&gt;&gt;&gt; \")\n    option = raw_input\n    if option == \"attack\":\n        os.system('clear')\n        attack()\n    elif option == \"run\":\n        run()\n    elif option == \"drink heatlh potion\":\n        drinkpot_health_fightpage()\n    elif option == \"drink heatlh\":\n        drinkpot_health_fightpage()\n    elif option == \"heatlh potion\":\n        drinkpot_health_fightpage()\n    else:\n        print (\"What the hell does that mean?\")\n        fight()\n\n# Calculating Attacking Statistics + Running Fight Outcomes\ndef attack():\n    PAttack = int(random.uniform(PlayerIG.attack // 2, PlayerIG.attack))\n    EAttack = int(random.uniform(enemy.attack // 2, enemy.attack))\n    if PAttack &lt;= PlayerIG.attack // 2:\n        print (\"You miss!\")\n    else:\n        enemy.health == PAttack\n        print (\"You deal %i damage!\" % PAttack)\n        enemy.health -= PAttack\n    if enemy.health &lt;= 1:\n        win()\n    os.system('clear')\n    if EAttack &lt;= enemy.attack // 2:\n        print (\"The enemy missed!\")\n    else:\n        PlayerIG.health -= EAttack\n        print (\"The enemy deals %i damage!\" % EAttack)\n    if PlayerIG.health &lt;= 0:\n        dead()\n    else:\n        fight()\n\n# If The User Drinks Health Potions From 'Start1()'\ndef drinkpot_health_startpage():\n    os.system('clear')\n    if PlayerIG.pots_health == 0:\n        print (\"You don't have any health potions!\\n\")\n        start1()\n    else:\n        PlayerIG.health += 25\n        if PlayerIG.health &gt; PlayerIG.maxhealth:\n            PlayerIG.health = PlayerIG.maxhealth\n        print (\"You drank a health potion!\\n\")\n        PlayerIG.pots_health -= 1\n        start1()\n\n# If The User Drinks Health Potions From 'Fight()'\ndef drinkpot_health_fightpage():\n    os.system('clear')\n    if PlayerIG.pots_health == 0:\n        print (\"You don't have any health potions!\\n\")\n        fight()\n    else:\n        PlayerIG.health += 25\n        if PlayerIG.health &gt; PlayerIG.maxhealth:\n            PlayerIG.health = PlayerIG.maxhealth\n        print (\"You drank a health potion!\\n\")\n        PlayerIG.pots_health -= 1\n        fight()\n\n# Calcualting And Running Statistics If The User Runs      \ndef run():\n    os.system('clear')\n    runnum = random.randint(1, 5)\n    if runnum &lt;= 3:\n        print (\"You have successfully ran away!\")\n        os.system('clear')\n        start1()\n    else:\n        print (\"You failed to get away!\")\n        os.system('clear')\n        EAttack = random.randint(enemy.attack // 2, enemy.attack)\n        if EAttack == enemy.attack/2:\n            print (\"The enemy missed!\")\n        else:\n            PlayerIG.health -= EAttack\n            print (\"The enemy deals %i damage!\" % EAttack)\n        fight()\n        if PlayerIG.health &lt;= 0:\n            dead()\n        else:\n            fight()\n\n# When User Defeats Monster - Calculates What User Gained\ndef win():\n    os.system('clear')\n    enemy.health = enemy.maxhealth\n    PlayerIG.gold += enemy.goldgain\n    PlayerIG.exp += enemy.expgain\n    print (\"You have defeated the %s\" % enemy.name)\n    print (\"You gained %i experience points!\" % enemy.expgain)\n    print (\"You found %i gold!\" % enemy.goldgain, \"\\n\")\n    start1()\n\n# When User Dies\ndef dead():\n    os.system('clear')\n    print (\"You have died\\n\")\n    restart()\n\n# Prompting User To Restart\ndef restart():\n    os.system('clear')\n    print (\"Would you like to Restart?\")\n    raw_input = input (\"&gt;&gt;&gt; \")\n    option = raw_input\n    if option == \"yes\" or \"restart\":\n        text1 = \"Restarting\"\n        for char in text1:\n            sys.stdout.write(char)\n            sys.stdout.flush()\n            time.sleep(0.1)\n        text2 = \"...\\n\\n\"\n        for char in text2:\n            sys.stdout.write(char)\n            sys.stdout.flush()\n            time.sleep(0.7)\n        start()\n    if option == \"no\":\n        print (\"Game Over\")\n\n# Accessing The Shop\ndef shop():\n    os.system('clear')\n    print (\"Rhaast's Weapons Shop\\n\")\n    print (\"\\nWhat would you like to buy?\\n\")\n    print (\"1.) Long Sword 10gp\")\n    print (\"2.) Great Sword 40gp\")\n    print (\"3.) Health Potion 10gp\")\n    print (\"Back\")\n    print (\" \")\n    raw_input = input (\"&gt;&gt;&gt; \")\n    option = raw_input\n\n    if option in weapon1:\n        if PlayerIG.gold &gt;= weapon1[option]:\n            os.system('clear')\n            PlayerIG.gold -= weapon1[option]\n            PlayerIG.weap.append(option)\n            print (\"You have bought %s!\" % option, \"\\n\")\n            option = raw_input\n            shop()\n        else:\n            os.system('clear')\n            print (\"You don't have enough gold\\n\")\n            option = raw_input\n            shop()\n\n    if option in weapon2:\n        if PlayerIG.gold &gt;= weapon2[option]:\n            os.system('clear')\n            PlayerIG.gold -= weapon2[option]\n            PlayerIG.weap.append(option)\n            print (\"You have bought %s!\" % option, \"\\n\")\n            option = raw_input\n            shop()\n        else:\n            os.system('clear')\n            print (\"You don't have enough gold\\n\")\n            option = raw_input\n            shop()\n\n    if option in healthpot:\n        if PlayerIG.gold &gt;= healthpot[option]:\n            os.system('clear')\n            PlayerIG.gold -= healthpot[option]\n            PlayerIG.pots_health += 1\n            print(\"You have bought %s!\" % option, \"\\n\")\n            option = raw_input\n            shop()\n        else:\n            os.system('clear')\n            print (\"You don't have enough gold\\n\")\n            option = raw_input\n            shop()\n\n    elif option == \"back\":\n        start1()\n\n    else:\n        os.system('clear')\n        print (\"That item does not exist\\n\")\n        option = raw_input\n        shop()\n\n##__main__##\nmain()\n</code></pre>\n"}, {"tags": ["python", "web-services", "input", "azure-machine-learning-studio"], "answers": [{"tags": [], "owner": {"reputation": 7717, "user_id": 155697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1MRD2.jpg?s=128&g=1", "display_name": "Vlad Iliescu", "link": "https://stackoverflow.com/users/155697/vlad-iliescu"}, "is_accepted": false, "score": 0, "last_activity_date": 1533293734, "creation_date": 1533293734, "answer_id": 51671076, "question_id": 51643168, "link": "https://stackoverflow.com/questions/51643168/azure-ml-studio-how-to-change-input-value-with-python-before-it-goes-through-da/51671076#51671076", "title": "Azure ML Studio: How to change input value with Python before it goes through data process", "body": "<p>tl;dr; You need to also link the dataset you used for training to the same port you link the Web service input, so that the Execute Python Script has something to work on - see the image below for how this should look.\n<a href=\"https://i.stack.imgur.com/gPJHZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gPJHZ.png\" alt=\"Working experiment\"></a></p>\n\n<p>You need to keep in mind that the Predictive experiment has some conventions that need to be followed (or learned the hard way :) ). One of them is that in order to use the Web service input, you need to pair it with an actual dataset, which Azure ML Studio can then use to infer structure and to provide you with some data while testing your predictive experiment. You can see it as some sort of 'ghost' module that doesn't do anything by itself. </p>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 25, "user_id": 8792812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0161edac0b5ccf0f400965b64c9601b0?s=128&d=identicon&r=PG&f=1", "display_name": "Gemini", "link": "https://stackoverflow.com/users/8792812/gemini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 257, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533293734, "creation_date": 1533163130, "question_id": 51643168, "link": "https://stackoverflow.com/questions/51643168/azure-ml-studio-how-to-change-input-value-with-python-before-it-goes-through-da", "title": "Azure ML Studio: How to change input value with Python before it goes through data process", "body": "<p>I am currently attempting to change the value of input as it goes through data process in Azure ML. However, I cannot find a clue about how to access to the input data with python.</p>\n\n<p>For example, if you were to use python, you can access to the column of data with</p>\n\n<pre><code>print(dataframe1[\"Hello World\"])\n</code></pre>\n\n<p>I tried to change the name of Web Service Input and tried to do it like how I did for other dataframe (e.g. sample)</p>\n\n<pre><code>print(dataframe[\"sample\"])\n</code></pre>\n\n<p>But it returns an error with no luck, and from what I read from an error, it's not compatible to dataframe:</p>\n\n<pre><code>object of type 'NoneType' has no len()\n</code></pre>\n\n<p>I tried to look up a solution with Nonetype error, but there is no good solution.\nThe whole error message:</p>\n\n<pre><code>requestId = 1f0f621f1d8841baa7862d5c05154942 errorComponent=Module. taskStatusCode=400. {\"Exception\":{\"ErrorId\":\"FailedToEvaluateScript\",\"ErrorCode\":\"0085\",\"ExceptionType\":\"ModuleException\",\"Message\":\"Error 0085: The following error occurred during script evaluation, please view the output log for more information:\\r\\n---------- Start of error message from Python interpreter ----------\\r\\nCaught exception while executing function: Traceback (most recent call last):\\r\\n File \\\"C:\\\\server\\\\invokepy.py\\\", line 211, in batch\\r\\n xdrutils.XDRUtils.DataFrameToRFile(outlist[i], outfiles[i], True)\\r\\n File \\\"C:\\\\server\\\\XDRReader\\\\xdrutils.py\\\", line 51, in DataFrameToRFile\\r\\n attributes = XDRBridge.DataFrameToRObject(dataframe)\\r\\n File \\\"C:\\\\server\\\\XDRReader\\\\xdrbridge.py\\\", line 40, in DataFrameToRObject\\r\\n if (len(dataframe) == 1 and type(dataframe[0]) is pd.DataFrame):\\r\\nTypeError: object of type 'NoneType' has no len()\\r\\nProcess returned with non-zero exit code 1\\r\\n\\r\\n---------- End of error message from Python interpreter ----------\"}}Error: Error 0085: The following error occurred during script evaluation, please view the output log for more information:---------- Start of error message from Python interpreter ----------Caught exception while executing function: Traceback (most recent call last): File \"C:\\server\\invokepy.py\", line 211, in batch xdrutils.XDRUtils.DataFrameToRFile(outlist[i], outfiles[i], True) File \"C:\\server\\XDRReader\\xdrutils.py\", line 51, in DataFrameToRFile attributes = XDRBridge.DataFrameToRObject(dataframe) File \"C:\\server\\XDRReader\\xdrbridge.py\", line 40, in DataFrameToRObject if (len(dataframe) == 1 and type(dataframe[0]) is pd.DataFrame):TypeError: object of type 'NoneType' has no len()Process returned with non-zero exit code 1---------- End of error message from Python interpreter ---------- Process exited with error code -2\n</code></pre>\n\n<p>I have also tried to <a href=\"https://i.stack.imgur.com/DWZK6.png\" rel=\"nofollow noreferrer\">a way to pass python script in data</a>, but it is not able to make any change to Web Service Input value as I want it to be.</p>\n\n<p>I have tried to look on forums like msdn or SO, but it's been difficult to find any information about it. Please let me know if you need any more information if needed. I would greatly appreciate your help!</p>\n"}, {"tags": ["python", "tensorflow"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 6674684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fec35aff2566ea91706676f6afd86e4d?s=128&d=identicon&r=PG&f=1", "display_name": "dg1996", "link": "https://stackoverflow.com/users/6674684/dg1996"}, "edited": false, "score": 0, "creation_date": 1533251555, "post_id": 51645349, "comment_id": 90290019, "body": "<code>tf.sparse_to_dense</code> is my current implementation, but I was trying to replace it since my GPU doesn&#39;t support it."}], "tags": [], "owner": {"reputation": 1770, "user_id": 6470853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8234c3864089d31c88536efafde43905?s=128&d=identicon&r=PG&f=1", "display_name": "syltruong", "link": "https://stackoverflow.com/users/6470853/syltruong"}, "is_accepted": false, "score": 0, "last_activity_date": 1533182932, "creation_date": 1533182932, "answer_id": 51645349, "question_id": 51643158, "link": "https://stackoverflow.com/questions/51643158/create-tf-constant-given-indices-and-values/51645349#51645349", "title": "Create tf.constant given indices and values", "body": "<p><a href=\"https://www.tensorflow.org/api_docs/python/tf/constant\" rel=\"nofollow noreferrer\"><code>tf.constant</code></a> currently does not support instantiation in coordinate format (indices and values) so the numpy/scipy workaround is actually not a bad one:</p>\n\n<pre><code>import scipy.sparse as sps\n\nA = sps.coo_matrix((values, (indices[0,:], indices[1,:])), shape=your_shape)\ntensor_A = tf.constant(A.to_dense())\n</code></pre>\n\n<p>If having a non-trainable <code>tf.Variable</code> can be an option (see <a href=\"https://stackoverflow.com/questions/41150741/in-tensorflow-what-is-the-difference-between-a-constant-and-a-non-trainable-var\">here</a> for the differences with <code>tf.constant</code>), you could use <code>tf.sparse_to_dense</code></p>\n\n<pre><code>tensor_A = tf.Variable( \\\n              tf.sparse_to_dense(indices, your_shape, values), \\\n              trainable=False \\\n           )\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 6674684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fec35aff2566ea91706676f6afd86e4d?s=128&d=identicon&r=PG&f=1", "display_name": "dg1996", "link": "https://stackoverflow.com/users/6674684/dg1996"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 133, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533182932, "creation_date": 1533163099, "last_edit_date": 1533163623, "question_id": 51643158, "link": "https://stackoverflow.com/questions/51643158/create-tf-constant-given-indices-and-values", "title": "Create tf.constant given indices and values", "body": "<p>I want to improve my current code in order to improve the execution performance on my GPU so I am replacing the operations that it does not support to avoid delegating them to the CPU.</p>\n\n<p>One of this operations is tf.sparse_to_dense. So, is there some way to create a Tensor (constant) from its indices and values as if it were an Sparse Tensor?</p>\n\n<p>I made it work with workarounds like getting the array using numpy and then creating it with <code>tensor = tf.constant(numpyarray)</code> but I was looking for an \"only Tensorflow\" approach.</p>\n"}, {"tags": ["python", "python-3.x", "python-2.7", "subprocess"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1533162984, "post_id": 51643100, "comment_id": 90250651, "body": "You have a <code>with open\u2026:</code>. So the next line after that <code>with</code> block finishes (that is, after the <code>rc = pty.spawn(argv, read)</code>), the file is closed. So if you want to call <code>send_status_report(0</code> after the file is closed, just add a line there that does <code>send_status_report()</code>."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1533163120, "post_id": 51643100, "comment_id": 90250691, "body": "If that doesn&#39;t work, then your code is <i>already</i> broken, because it&#39;s somehow closing the file before you&#39;re done with it, so where you add more code isn&#39;t really important."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1533163442, "post_id": 51643100, "comment_id": 90250787, "body": "But meanwhile, why are you doing all of this? Why do you need to have the script run another instance of itself at all? Why do you need to capture its stdout instead of just making it write to a file in the first place? Even if you need that, why do you need to use <code>pty</code> to fool it into believing its stdout is the tty?"}, {"owner": {"reputation": 25, "user_id": 8897370, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zshCN_S96SY/AAAAAAAAAAI/AAAAAAAAFY4/Hvmqm-wWx9o/photo.jpg?sz=128", "display_name": "Manu SS nair", "link": "https://stackoverflow.com/users/8897370/manu-ss-nair"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1533163571, "post_id": 51643100, "comment_id": 90250833, "body": "Im not the owner of the first script and I dont have the liberty to edit it. Also, its a huge script and I dont want to break it by making changes..make sense?"}, {"owner": {"reputation": 25, "user_id": 8897370, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zshCN_S96SY/AAAAAAAAAAI/AAAAAAAAFY4/Hvmqm-wWx9o/photo.jpg?sz=128", "display_name": "Manu SS nair", "link": "https://stackoverflow.com/users/8897370/manu-ss-nair"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1533163638, "post_id": 51643100, "comment_id": 90250848, "body": "However, the code is not broken and it worked after I placed the send_status_report() as you mentioned.. Appreciate your help !"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1533163682, "post_id": 51643100, "comment_id": 90250865, "body": "But you <i>are</i> editing the script. But\u2026 whatever, if it works for you, fine."}], "answers": [{"tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": true, "score": 0, "last_activity_date": 1533163829, "creation_date": 1533163829, "answer_id": 51643277, "question_id": 51643100, "link": "https://stackoverflow.com/questions/51643100/issue-with-the-name-main-function-calling/51643277#51643277", "title": "Issue with the __name__==&quot;__main__&quot; function calling", "body": "<blockquote>\n  <p>As Im little confused about the sequence and want to call the send_status_report() define after the file is closed, how do I make it work.</p>\n</blockquote>\n\n<p>You have a <code>with open\u2026:</code>. That statement will automatically close the file when the block is finished. So, if you want to run something right after the file is closed, just put it right after that statement:</p>\n\n<pre><code>with open(LOG+OUTFILE, 'wb') as log_file:\n    def read(fd):\n    # ...\n    rc = pty.spawn(argv, read)\n\nsend_status_report()\n</code></pre>\n\n<p>As long as your existing code is working (e.g., the file isn't getting closed before you're done with it), and isn't doing anything really weird like closing the file multiple times, this will call <code>send_status_report()</code> right after the file is closed.</p>\n"}], "owner": {"reputation": 25, "user_id": 8897370, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zshCN_S96SY/AAAAAAAAAAI/AAAAAAAAFY4/Hvmqm-wWx9o/photo.jpg?sz=128", "display_name": "Manu SS nair", "link": "https://stackoverflow.com/users/8897370/manu-ss-nair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 51643277, "answer_count": 1, "score": -2, "last_activity_date": 1533171962, "creation_date": 1533162661, "last_edit_date": 1533171962, "question_id": 51643100, "link": "https://stackoverflow.com/questions/51643100/issue-with-the-name-main-function-calling", "title": "Issue with the __name__==&quot;__main__&quot; function calling", "body": "<p>I'm struggling with a python program to redirect the output of all print calls to a file and email it. Below is my program. Everything works fine except the <code>OUTFILE</code> in the email coming up empty (perhaps the file is still open while it tries to email it). As I'm little confused about the sequence and want to call the <code>send_status_report()</code> defined after the file is closed, how do I make it work.</p>\n\n<pre><code>#! /usr/bin/python\nimport subprocess\nimport os\nimport pty\nimport sys\nimport smtplib\nimport time\nfrom email.mime.text import MIMEText\nfrom email.mime.multipart import MIMEMultipart\nfrom email.mime.application import MIMEApplication\n\n\ndef current_time():\n    from datetime import datetime\n    return datetime.now().strftime('%Y-%m-%d-%H-%M-%S')\n\n\nBIN=\"/home/netsys/filerscripts/MANU-TEST/storage-automations/REDBUTTON-DR/\"\nLOG=BIN+\"Logs/\"\nYMD=current_time()\nOUTFILE=\"ResyncLog_\"+YMD+\".txt\"\nSMTP_SERVER=\"xxxxxxxx.xxx.com\"\n\n#define to Call the reverse resync and output the log to both file and screen\n\n\ndef send_status_report():\n    dir_path = LOG\n    files = [OUTFILE, \"CLUSTERDEL.LOG\", \"RESYNC.LOG\",\"UPDATE.LOG\"]\n\n    msg = MIMEMultipart()\n    msg['To'] = \"abc@abc.com\"\n    msg['From'] = \"abc@abc.com\"\n    msg['Subject'] = \"Netapp RB Automation:Reverse Resync Status\"\n\n    body = MIMEText('Test results attached.', 'html', 'utf-8')  \n    msg.attach(body)  # add message body (text or html)\n\n    for f in files:  # add files to the message\n        file_path = os.path.join(dir_path, f)\n        attachment = MIMEApplication(open(file_path, \"rb\").read(), _subtype=\"txt\")\n        attachment.add_header('Content-Disposition','attachment', filename=f)\n        msg.attach(attachment)\n\n    s = smtplib.SMTP()\n    s.connect(host=SMTP_SERVER)\n    s.sendmail(msg['From'], msg['To'], msg.as_string())\n    print 'done!'\n    s.close()\n\n\ndef main():\n    subprocess.call(BIN+\"ReverseSync.py\", shell=True)\n\n\n\nif __name__==\"__main__\":\n    sentinel_option = '--dont-spawn'\n    if sentinel_option not in sys.argv:\n        # run itself copying output to the log file\n        with open(LOG+OUTFILE, 'wb') as log_file:\n            def read(fd):\n                data = os.read(fd, 1024)\n                log_file.write(data)\n                #OUTDATA = OUTDATA + data\n                return data\n\n            argv = [sys.executable] + sys.argv + [sentinel_option]\n            rc = pty.spawn(argv, read)\n\n    else:\n        sys.argv.remove(sentinel_option)\n        rc = main()\n    sys.exit(rc)\n\nsend_status_report()\n</code></pre>\n"}, {"tags": ["python", "sql", "json", "python-3.x"], "comments": [{"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1533164989, "post_id": 51643089, "comment_id": 90251148, "body": "What&#39;s the error? Why do you connect to the db for each line? Do you mean <code>&quot;SELECT c.id, x509_commonName(c.certificate), x509_issuerName(c.certificate) FROM certificate c, certificate_identity ci WHERE c.id = ci.certificate_id AND ci.name_type = &#39;dNSName&#39; AND lower(ci.name_value) = lower(&#39;%s&#39;) AND x509_notAfter(c.certificate) &gt; statement_timestamp();&quot;.format(domain_name)</code>?"}, {"owner": {"reputation": 161, "user_id": 10007046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f148455a76bb5ffe202dae652cec7a7?s=128&d=identicon&r=PG&f=1", "display_name": "bedford", "link": "https://stackoverflow.com/users/10007046/bedford"}, "reply_to_user": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1533213145, "post_id": 51643089, "comment_id": 90270741, "body": "@CristiFati Thanks for your reply! I tried the new sql query and it unfortunately gives me a timeout error. If I replace <b>domain_name</b> with google.com then I get an error NameError: global name &#39;google&#39; is not defined. Do you have any idea of what the issue could be? I would greatly appreciate your help!"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1533214667, "post_id": 51643089, "comment_id": 90271802, "body": "<code>domain_name</code> is a variable that you defined earlier in the code (<code>for cnt, domain_name in enumerate(fp):</code>). You didn&#39;t define <code>google</code>, there is no such variable, you want the text, so it&#39;s <code>&quot;google&quot;</code>."}, {"owner": {"reputation": 161, "user_id": 10007046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f148455a76bb5ffe202dae652cec7a7?s=128&d=identicon&r=PG&f=1", "display_name": "bedford", "link": "https://stackoverflow.com/users/10007046/bedford"}, "reply_to_user": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1533215237, "post_id": 51643089, "comment_id": 90272203, "body": "@CristiFati Thank you for your reply! I replaced google.com with &quot;google.com&quot; and now the script runs but the output it produces to the JSON files are blank. Do you have any idea of the issue?"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1533215398, "post_id": 51643089, "comment_id": 90272335, "body": "This is strictly related to your data in the database. You should take a look at the tables involved in your query and check their contents. Also you might want to try <code>&quot;google.com&quot;</code> as domain, or modify the query to use the <code>LIKE</code> operator when comparing to domain names (and maybe other fields too)."}, {"owner": {"reputation": 161, "user_id": 10007046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f148455a76bb5ffe202dae652cec7a7?s=128&d=identicon&r=PG&f=1", "display_name": "bedford", "link": "https://stackoverflow.com/users/10007046/bedford"}, "reply_to_user": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1533215835, "post_id": 51643089, "comment_id": 90272648, "body": "@CristiFati Thanks again for your reply! I tried &#39;google.com&#39; and &quot;google.com&quot; and they both don&#39;t work. Do you know any alternative to using the LIKE statement since I would prefer not to use LIKE due to the performance impacts."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1533216297, "post_id": 51643089, "comment_id": 90273012, "body": "I am not a <i>DB</i> expert/fan. You got past that problem, from now on it&#39;s just debugging and checking your data, and both of those are in your yard."}], "owner": {"reputation": 161, "user_id": 10007046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f148455a76bb5ffe202dae652cec7a7?s=128&d=identicon&r=PG&f=1", "display_name": "bedford", "link": "https://stackoverflow.com/users/10007046/bedford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1533162546, "creation_date": 1533162546, "question_id": 51643089, "link": "https://stackoverflow.com/questions/51643089/python-script-doesnt-work-when-passing-in-a-argument-from-a-text-file", "title": "Python script doesn&#39;t work when passing in a argument from a text file", "body": "<p>I have a python script that is supposed to loop through a text file and gather the domain as an argument from each line in the text file. Then it is supposed to use the domain as an argument in a SQL query. The issue is when I'm passing in the domain as an argument the JSON output the script produces is blank. If I set the domain_name argument in my sql query directly inside the query then the script outputs perfect JSON format. As you can see in the top of my script right below def connect_to_db() I start to loop through the text file. I'm not sure where in my code the error is occurring by any assistance would be greatly appreciated!</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>from __future__ import print_function\n\ntry:\n    import psycopg2\nexcept ImportError:\n    raise ImportError('\\n\\033[33mpsycopg2 library missing. pip install psycopg2\\033[1;m\\n')\n    sys.exit(1)\n\nimport re\nimport sys\nimport json\nimport pprint\n\nDB_HOST = 'crt.sh'\nDB_NAME = 'certwatch'\nDB_USER = 'guest'\n\n\ndef connect_to_db():\n    filepath = 'test.txt'\n    with open(filepath) as fp:\n        for cnt, domain_name in enumerate(fp):\n            print(\"Line {}: {}\".format(cnt, domain_name))\n            print(domain_name)\n            domain_name = domain_name.rstrip()\n\n            conn = psycopg2.connect(\"dbname={0} user={1} host={2}\".format(DB_NAME, DB_USER, DB_HOST))\n            cursor = conn.cursor()\n            cursor.execute(\n                \"SELECT c.id, x509_commonName(c.certificate), x509_issuerName(c.certificate) FROM certificate c, certificate_identity ci WHERE c.id = ci.certificate_id AND ci.name_type = 'dNSName' AND lower(ci.name_value) = lower('**domain_name**') AND x509_notAfter(c.certificate) &gt; statement_timestamp();\")\n\n            unique_domains = cursor.fetchall()\n\n        # print out the records using pretty print\n        # note that the NAMES of the columns are not shown, instead just indexes.\n        # for most people this isn't very useful so we'll show you how to return\n        # columns as a dictionary (hash) in the next example.\n            pprint.pprint(unique_domains)\n\n            outfilepath = domain_name + \".json\"\n            with open(outfilepath, 'a') as outfile:\n                    outfile.write(json.dumps(unique_domains, sort_keys=True, indent=4))\n\nif __name__ == \"__main__\":\n#    filepath = 'test.txt'\n#    with open(filepath) as fp:\n#        for cnt, domain_name in enumerate(fp):\n#            print(\"Line {}: {}\".format(cnt, domain_name))\n#            print(domain_name)\n#            domain_name = domain_name.rstrip()\n    connect_to_db()\n</code></pre>\n"}, {"tags": ["python", "django", "forms"], "comments": [{"owner": {"reputation": 1857, "user_id": 1366989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c67512f4b6b2137fa70111e66ceb76a?s=128&d=identicon&r=PG", "display_name": "MrName", "link": "https://stackoverflow.com/users/1366989/mrname"}, "edited": false, "score": 0, "creation_date": 1533163093, "post_id": 51643083, "comment_id": 90250682, "body": "Do you get a stacktrace or just nothing happens? Also, might see the problem already. If your form is not valid, you should be returning something that indicates it. Right now, it just creates a new form in this case. I think you are missing an <code>else</code> for your <code>is_valid</code> call."}, {"owner": {"reputation": 3, "user_id": 10168132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9c33519e422d1bef1b8257a81e981e?s=128&d=identicon&r=PG&f=1", "display_name": "KG997", "link": "https://stackoverflow.com/users/10168132/kg997"}, "reply_to_user": {"reputation": 1857, "user_id": 1366989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c67512f4b6b2137fa70111e66ceb76a?s=128&d=identicon&r=PG", "display_name": "MrName", "link": "https://stackoverflow.com/users/1366989/mrname"}, "edited": false, "score": 0, "creation_date": 1533163313, "post_id": 51643083, "comment_id": 90250741, "body": "@MrName Once I hit submit, the page just reloads with a blank form"}, {"owner": {"reputation": 6952, "user_id": 5644965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J9KaA.jpg?s=128&g=1", "display_name": "Lemayzeur", "link": "https://stackoverflow.com/users/5644965/lemayzeur"}, "edited": false, "score": 0, "creation_date": 1533163487, "post_id": 51643083, "comment_id": 90250809, "body": "Can we see your URLs patterns?"}, {"owner": {"reputation": 3, "user_id": 10168132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9c33519e422d1bef1b8257a81e981e?s=128&d=identicon&r=PG&f=1", "display_name": "KG997", "link": "https://stackoverflow.com/users/10168132/kg997"}, "reply_to_user": {"reputation": 6952, "user_id": 5644965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J9KaA.jpg?s=128&g=1", "display_name": "Lemayzeur", "link": "https://stackoverflow.com/users/5644965/lemayzeur"}, "edited": false, "score": 0, "creation_date": 1533163894, "post_id": 51643083, "comment_id": 90250910, "body": "@Lemayzeur <code>from django.urls import path from . import views  urlpatterns = [   path(&#39;&#39;, views.index, name=&#39;index&#39;),   path(&#39;new_blog&#47;&#39;, views.newBlog, name=&#39;new_blog&#39;)</code>"}, {"owner": {"reputation": 12017, "user_id": 5005177, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/24654adb38f30006fb2d3bd07dd6242b?s=128&d=identicon&r=PG&f=1", "display_name": "trixn", "link": "https://stackoverflow.com/users/5005177/trixn"}, "edited": false, "score": 0, "creation_date": 1533168837, "post_id": 51643083, "comment_id": 90251945, "body": "Your second <code>if form.is_valid():</code> is not correctly indented. Please pay attention to indentation when posting python code as python is whitespace sensitive. We can not know if this a typo from copy and pasting or an actual coding error."}, {"owner": {"reputation": 467, "user_id": 2802667, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mZ1pO.jpg?s=128&g=1", "display_name": "doubleo46", "link": "https://stackoverflow.com/users/2802667/doubleo46"}, "edited": false, "score": 0, "creation_date": 1533183515, "post_id": 51643083, "comment_id": 90254754, "body": "Have you tried form.save()?"}], "answers": [{"tags": [], "owner": {"reputation": 1030, "user_id": 9361129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45466ce9795191da87750d302e809b87?s=128&d=identicon&r=PG&f=1", "display_name": "Wariored", "link": "https://stackoverflow.com/users/9361129/wariored"}, "is_accepted": false, "score": 0, "last_activity_date": 1533163102, "creation_date": 1533163102, "answer_id": 51643160, "question_id": 51643083, "link": "https://stackoverflow.com/questions/51643083/django-2-0-form-is-not-saving-data-to-database/51643160#51643160", "title": "Django 2.0 Form is not saving data to database", "body": "<p>To save an Object into database\ninstead of </p>\n\n<pre><code>new_blog = BlogPost(blogger = blogger, text = text)\nnew_blog.save()\n</code></pre>\n\n<p>use the best way:</p>\n\n<pre><code>BlogPost.objects.create(blogger = blogger, text = text)\n</code></pre>\n\n<p>It will be automatically saved</p>\n"}, {"tags": [], "owner": {"reputation": 371, "user_id": 7817490, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/689e9d01a8188508b1cc44f6c1df8064?s=128&d=identicon&r=PG&f=1", "display_name": "Atcrank", "link": "https://stackoverflow.com/users/7817490/atcrank"}, "is_accepted": true, "score": 1, "last_activity_date": 1533168174, "creation_date": 1533168174, "answer_id": 51643809, "question_id": 51643083, "link": "https://stackoverflow.com/questions/51643083/django-2-0-form-is-not-saving-data-to-database/51643809#51643809", "title": "Django 2.0 Form is not saving data to database", "body": "<p>I think the problem is likely to be the first line of your view.</p>\n\n<pre><code>if request == 'POST':\n</code></pre>\n\n<p>should be: </p>\n\n<pre><code>if request.method == 'POST':\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10168132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9c33519e422d1bef1b8257a81e981e?s=128&d=identicon&r=PG&f=1", "display_name": "KG997", "link": "https://stackoverflow.com/users/10168132/kg997"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 51643809, "answer_count": 2, "score": 0, "last_activity_date": 1533168174, "creation_date": 1533162499, "question_id": 51643083, "link": "https://stackoverflow.com/questions/51643083/django-2-0-form-is-not-saving-data-to-database", "title": "Django 2.0 Form is not saving data to database", "body": "<p>so I have a very simple blog app and I'm trying to figure out why the data entered in the form doesn't save to the database and it doesn't redirect me to my index page.</p>\n\n<p>forms.py</p>\n\n<pre><code>from django import forms\n\nclass NewBlog(forms.Form):\n  blogger = forms.CharField(max_length=20, widget=forms.TextInput(attrs=  \n  {'placeholder' : 'Name'}))\n  text = forms.CharField(widget=forms.Textarea(attrs={'placeholder' : \n  'Text'}))\n</code></pre>\n\n<p>new_blog.html</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n&lt;meta charset=\"UTF-8\"&gt;\n&lt;title&gt;New Blog&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n   &lt;form action=\"{% url 'new_blog' %}\" method=\"POST\"&gt;\n   {% csrf_token %}\n   &lt;h2&gt;Write your blog here:&lt;/h2&gt;\n   {{ form }}\n   &lt;br&gt;\n   &lt;input type=\"submit\" value=\"Submit\"&gt;\n&lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>views.py</p>\n\n<pre><code>from django.shortcuts import render, redirect\nfrom .models import BlogPost\nfrom .forms import NewBlog\n\ndef index(request):\n  blogs = BlogPost.objects.all()\n  context = {'blogs' : blogs}\n  return render(request, 'blog/index.html', context)\n\ndef newBlog(request):\n   if request == 'POST':\n     form = NewBlog(request.POST)\n   if form.is_valid():\n     blogger = form.cleaned_data['blogger'] \n     text = form.cleaned_data['text'] \n     new_blog = BlogPost(blogger = blogger, text = text)\n     new_blog.save()\n     return redirect('index')\n   else:\n     form = NewBlog()\n  context = {'form' : form}\n  return render(request, 'blog/new_blog.html', context)\n</code></pre>\n"}, {"tags": ["python", "post", "python-webbrowser"], "answers": [{"comments": [{"owner": {"reputation": 442, "user_id": 5431271, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/254c7294a3d8a2755f8ab4f937ac4835?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Shir", "link": "https://stackoverflow.com/users/5431271/tom-shir"}, "edited": false, "score": 0, "creation_date": 1533203081, "post_id": 51643356, "comment_id": 90264209, "body": "Thanks, but this code is part of a software plugin, so therefore I can&#39;t add any more drivers / components to the code."}, {"owner": {"reputation": 405, "user_id": 7498669, "user_type": "registered", "profile_image": "https://graph.facebook.com/1268078026616732/picture?type=large", "display_name": "Jen", "link": "https://stackoverflow.com/users/7498669/jen"}, "reply_to_user": {"reputation": 442, "user_id": 5431271, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/254c7294a3d8a2755f8ab4f937ac4835?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Shir", "link": "https://stackoverflow.com/users/5431271/tom-shir"}, "edited": false, "score": 0, "creation_date": 1533238124, "post_id": 51643356, "comment_id": 90285206, "body": "Just though of a way for your example to work but not sure what exactly you are trying to do. You can use string concatenation to get the search string url. For example, webbrowser.open( &quot;<a href=\"http://duckduckgo.com&quot;+&quot;mysearchterm&quot;\" rel=\"nofollow noreferrer\">duckduckgo.com&quot;+&quot;mysearchterm&quot;</a>)"}], "tags": [], "owner": {"reputation": 405, "user_id": 7498669, "user_type": "registered", "profile_image": "https://graph.facebook.com/1268078026616732/picture?type=large", "display_name": "Jen", "link": "https://stackoverflow.com/users/7498669/jen"}, "is_accepted": false, "score": 0, "last_activity_date": 1533164746, "last_edit_date": 1533164746, "creation_date": 1533164399, "answer_id": 51643356, "question_id": 51643034, "link": "https://stackoverflow.com/questions/51643034/post-data-when-opening-a-browser-in-python/51643356#51643356", "title": "Post data when opening a browser in Python", "body": "<p>I believe you should be using a Web Driver such as Selenium. Here is an example:</p>\n\n<pre><code>import time\nfrom selenium import webdriver\nfrom selenium.webdriver.common.keys import Keys\n\nbrowser = webdriver.Chrome(r\"PATHTO\\chromedriver.exe\") # download the chromedriver and provide the full path here\nbrowser.get('http://duckduckgo.com/')\n\nsearch = browser.find_element_by_name('q')\nsearch.send_keys(\"mysearchterm\")\nsearch.send_keys(Keys.RETURN)\ntime.sleep(15) \n</code></pre>\n"}], "owner": {"reputation": 442, "user_id": 5431271, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/254c7294a3d8a2755f8ab4f937ac4835?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Shir", "link": "https://stackoverflow.com/users/5431271/tom-shir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 414, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1533164746, "creation_date": 1533162157, "question_id": 51643034, "link": "https://stackoverflow.com/questions/51643034/post-data-when-opening-a-browser-in-python", "title": "Post data when opening a browser in Python", "body": "<p>Is there a way to open a browser from a Python application, while posting data to it in POST method?</p>\n\n<p>I tried using <code>webbrowser.open(url)</code> to open the browser window, but I need to also post some data to it (via POST variables), to make sure the page opens with the proper information.</p>\n\n<p>As an example, I would like to open <a href=\"http://duckduckgo.com\" rel=\"nofollow noreferrer\">http://duckduckgo.com</a>, while posting \"q=mysearchterm\" as POST data to it, so the page will open with pre-filled data.</p>\n"}, {"tags": ["python", "cartopy"], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 10090697, "user_type": "registered", "profile_image": "https://graph.facebook.com/1876277019095594/picture?type=large", "display_name": "Zack Eriksen", "link": "https://stackoverflow.com/users/10090697/zack-eriksen"}, "edited": false, "score": 0, "creation_date": 1533171128, "post_id": 51643812, "comment_id": 90252348, "body": "Great! Thank you so much! What do those numbers mean exactly?"}, {"owner": {"reputation": 141, "user_id": 10136156, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KZd5RTd6d4s/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oqdyWJ1tu-2r1O-L0siQEwkxJt-Q/mo/photo.jpg?sz=128", "display_name": "marcossf", "link": "https://stackoverflow.com/users/10136156/marcossf"}, "reply_to_user": {"reputation": 149, "user_id": 10090697, "user_type": "registered", "profile_image": "https://graph.facebook.com/1876277019095594/picture?type=large", "display_name": "Zack Eriksen", "link": "https://stackoverflow.com/users/10090697/zack-eriksen"}, "edited": false, "score": 0, "creation_date": 1533173300, "post_id": 51643812, "comment_id": 90252699, "body": "They are the latitudes and longitudes of the bounding box.  lower left corner: latitude = 54, longitude = 0  upper right corner: latitude = 75, longitude = 43"}], "tags": [], "owner": {"reputation": 141, "user_id": 10136156, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KZd5RTd6d4s/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oqdyWJ1tu-2r1O-L0siQEwkxJt-Q/mo/photo.jpg?sz=128", "display_name": "marcossf", "link": "https://stackoverflow.com/users/10136156/marcossf"}, "is_accepted": true, "score": 7, "last_activity_date": 1533168205, "creation_date": 1533168205, "answer_id": 51643812, "question_id": 51643002, "link": "https://stackoverflow.com/questions/51643002/how-to-zoom-in-cartopy/51643812#51643812", "title": "How to zoom in cartopy", "body": "<p>You can use <a href=\"https://scitools.org.uk/cartopy/docs/latest/matplotlib/geoaxes.html#cartopy.mpl.geoaxes.GeoAxes.set_extent\" rel=\"noreferrer\">set_extent</a> to \"zoom\" into the desired region, in your case, just create a bounding box around Scandinavia. Add the following code right before <code>plt.show()</code>:</p>\n\n<pre><code>ax.set_extent([0, 43, 54, 75])\n</code></pre>\n\n<p>Output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/78i0Y.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/78i0Y.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 149, "user_id": 10090697, "user_type": "registered", "profile_image": "https://graph.facebook.com/1876277019095594/picture?type=large", "display_name": "Zack Eriksen", "link": "https://stackoverflow.com/users/10090697/zack-eriksen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 928, "favorite_count": 2, "accepted_answer_id": 51643812, "answer_count": 1, "score": 2, "last_activity_date": 1533194063, "creation_date": 1533161947, "last_edit_date": 1533194063, "question_id": 51643002, "link": "https://stackoverflow.com/questions/51643002/how-to-zoom-in-cartopy", "title": "How to zoom in cartopy", "body": "<p>I am attempting to edit the boundaries of a map using the <code>EuroPP()</code> projection in cartopy. I have written the following code, but hope to zoom in on the Scandinavia region. Any suggestions? Thanks!</p>\n\n<pre><code>import matplotlib.pyplot as plt\n%matplotlib inline\n\nimport cartopy\nimport cartopy.crs as ccrs\nimport cartopy.io.img_tiles as cimgt\n\nplt.figure(figsize=(5, 6))\nax = plt.axes(projection=ccrs.EuroPP())\nax.coastlines(resolution='50m', linewidth = 0.5)\nax.gridlines()\n\nax.add_feature(cartopy.feature.BORDERS, linestyle='-', alpha=.5)\nax.add_feature(cartopy.feature.OCEAN)\n\ntile = cimgt.StamenTerrain()\nax.add_image(tile,5)\n\nplt.show()\n</code></pre>\n\n<p>The code produces the following image:\n<img src=\"https://i.stack.imgur.com/KRGNP.png\" alt=\"What the code produces\"></p>\n"}, {"tags": ["python", "python-3.x", "audio", "mask", "spectrogram"], "owner": {"reputation": 23, "user_id": 5038566, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-whMcOL8LdPg/AAAAAAAAAAI/AAAAAAAAAVA/MHV4xyLkg6I/photo.jpg?sz=128", "display_name": "Blake Holman", "link": "https://stackoverflow.com/users/5038566/blake-holman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 150, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1533161733, "creation_date": 1533161733, "question_id": 51642969, "link": "https://stackoverflow.com/questions/51642969/how-do-i-use-a-binary-mask-and-stft-to-produce-an-audio-file", "title": "How do I use a binary mask and STFT to produce an audio file?", "body": "<p>So here's the idea: you can generate a spectrogram from an audio file using shorttime Fourier transform (stft). Then <a href=\"https://arxiv.org/pdf/1705.04662.pdf\" rel=\"nofollow noreferrer\">some people</a> have generated something called a \"binary mask\" to generate different audio (ie. with background noise removed etc.) from the inverse stft.</p>\n\n<p>Here's what I understand:</p>\n\n<ol>\n<li>stft is a simple equation that is applied to the audio file, which generates the information that can easily be displayed a spectrogram. </li>\n<li>By taking the inverse of the stft matrix, and multiplying it by a matrix of the same size (the binary matrix) you can create a new matrix with information to generate an audio file with the masked sound.</li>\n</ol>\n\n<p><strong>Once I do the matrix multiplication, how is the new audio file created?</strong></p>\n\n<p>It's not much but here's what I've got in terms of code:</p>\n\n<pre><code>from librosa import load\nfrom librosa.core import stft, istft\ny, sample_rate = load('1.wav')\nspectrum = stft(y)\nback_y = istft(spectrum)\n</code></pre>\n\n<p>Thank you, and <a href=\"http://www.cs.northwestern.edu/~pardo/courses/eecs352/lectures/MPM14-Time-Frequency-Masking.pdf\" rel=\"nofollow noreferrer\">here</a> are some slides that got me this far. I'd appreciate it if you could give me an example/demo in python</p>\n"}, {"tags": ["python", "tensorflow", "machine-learning", "deep-learning", "tensorflow-estimator"], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 4574160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a4a34c5cb26fa6a98d86f67770b2da5?s=128&d=identicon&r=PG&f=1", "display_name": "zeellos", "link": "https://stackoverflow.com/users/4574160/zeellos"}, "edited": false, "score": 0, "creation_date": 1533226693, "post_id": 51643481, "comment_id": 90279954, "body": "Thanks Alex. Actually, I am very intrigued with your last sentence. I can feel some tension against Python (just an opinion), I would like to hear more about why you don&#39;t recommend to use Python at all, if possible."}, {"owner": {"reputation": 1957, "user_id": 3967806, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a9af47ca60fc2cfa1303a337a625265c?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Kinman", "link": "https://stackoverflow.com/users/3967806/alex-kinman"}, "reply_to_user": {"reputation": 119, "user_id": 4574160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a4a34c5cb26fa6a98d86f67770b2da5?s=128&d=identicon&r=PG&f=1", "display_name": "zeellos", "link": "https://stackoverflow.com/users/4574160/zeellos"}, "edited": false, "score": 0, "creation_date": 1533234240, "post_id": 51643481, "comment_id": 90283542, "body": "@zeellos &quot;I can feel some tension against Python&quot; --- as far as programming languages go, I actually prefer Python to R. It&#39;s just that the number of tools available for times series analysis in R are much more mature and extensive than those available in Python."}, {"owner": {"reputation": 465, "user_id": 11726505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0edf1ce20368c463a357637055fa312b?s=128&d=identicon&r=PG&f=1", "display_name": "CorerMaximus", "link": "https://stackoverflow.com/users/11726505/corermaximus"}, "edited": false, "score": 0, "creation_date": 1571266046, "post_id": 51643481, "comment_id": 103187432, "body": "@zeellos- I&#39;m using R for all my timeseries modelling, and have been suggested to look into RNN via Keras/Tensorflow by some peers. I was wondering what has your experience using Python for Keras/TF been like vs. Prophet? I&#39;ve found no comparisons between the two online, and am looking for more information on how the two compare."}], "tags": [], "owner": {"reputation": 1957, "user_id": 3967806, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a9af47ca60fc2cfa1303a337a625265c?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Kinman", "link": "https://stackoverflow.com/users/3967806/alex-kinman"}, "is_accepted": false, "score": 0, "last_activity_date": 1533165400, "creation_date": 1533165400, "answer_id": 51643481, "question_id": 51642951, "link": "https://stackoverflow.com/questions/51642951/tensorflow-predict-grow-factor-in-a-time-series-forecast/51643481#51643481", "title": "Tensorflow: predict grow factor in a time series forecast", "body": "<p>This is a time series problem, so you're better off using <code>tf.contrib.timeseries.ARRegressor</code> (neural network built specifically for time series) or <code>tf.contrib.timeseries.StructuralEnsembleRegressor</code> (time series state space model - which ) than a generic neural network.  </p>\n\n<p>Both models take an exogenous_feature_columns argument, you could populate that with 0 for normal days and 1 for event days like Black Friday. That would fix your under-predicting problem since otherwise the model would treat those spikes as outliers (you could do this even with a generic neural network - it's just easier to code with the time series specific functions). </p>\n\n<p>On a more general note, I would recommend other tools besides tensorflow for time series forecasting, such as Facebook Prophet or Statsmodels package. </p>\n\n<p>I would go further and recommend that you don't use Python at all, and instead look at using some of the forecasting packages available in R.  </p>\n"}], "owner": {"reputation": 119, "user_id": 4574160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a4a34c5cb26fa6a98d86f67770b2da5?s=128&d=identicon&r=PG&f=1", "display_name": "zeellos", "link": "https://stackoverflow.com/users/4574160/zeellos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 364, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533165400, "creation_date": 1533161626, "question_id": 51642951, "link": "https://stackoverflow.com/questions/51642951/tensorflow-predict-grow-factor-in-a-time-series-forecast", "title": "Tensorflow: predict grow factor in a time series forecast", "body": "<p>I am developing an application to predict future hourly online orders on my e-commerce website (time-series problem) using Canned Estimator <code>tf.estimator.DNNRegressor</code></p>\n\n<pre><code>    estimator = tf.estimator.DNNRegressor(\n        feature_columns=my_feature_columns,\n        hidden_units=hidden_units, \n        model_dir=model_dir, \n        optimizer=tf.train.ProximalAdagradOptimizer(learning_rate=0.01,\n                                                l1_regularization_strength=0.001))\n</code></pre>\n\n<p>The features I am using are pretty much based on the date and time. For example, the <code>csv</code> file from my training data looks like this</p>\n\n<pre><code>year,month,day,weekday,isweekend,hr,weeknum,yearday,orders\n2018,7,16,2,0,0,29,197,193\n2018,7,16,2,0,1,29,197,131\n2018,7,16,2,0,2,29,197,77\n2018,7,16,2,0,3,29,197,59\n.....\n</code></pre>\n\n<p>where orders column is the target for the model.</p>\n\n<p>The model I got so far is working decently but when I run predictions for a high demand day like Black Friday, it is under-predicting. For example, in the graph below we can see that predictions for Black Friday this year 2018 (dashed line) are not as high as we intuitively expect, even though it predicts the shape nicely.</p>\n\n<p><a href=\"https://i.stack.imgur.com/8Z1K1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8Z1K1.png\" alt=\"enter image description here\"></a></p>\n\n<p>With that all being said, I would appreciate any recommendation to add to my model so it can also predict correctly the grow factor and not only the trend.</p>\n"}, {"tags": ["python", "pip", "numba"], "comments": [{"owner": {"reputation": 1568, "user_id": 8793975, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/086643c7f3fafe914727c51882e974bc?s=128&d=identicon&r=PG&f=1", "display_name": "enumaris", "link": "https://stackoverflow.com/users/8793975/enumaris"}, "edited": false, "score": 3, "creation_date": 1533161782, "post_id": 51642944, "comment_id": 90250328, "body": "Are you sure the <code>numba</code> package is compatible with your system&#39;s OS and architecture? <code>file was built for x86_64 which is not the architecture being linked (i386)</code> seems to me to be a system architecture compatibility issue."}, {"owner": {"reputation": 665, "user_id": 5680455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68c6c6fab27106166f61b661482865a8?s=128&d=identicon&r=PG&f=1", "display_name": "konstant", "link": "https://stackoverflow.com/users/5680455/konstant"}, "reply_to_user": {"reputation": 1568, "user_id": 8793975, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/086643c7f3fafe914727c51882e974bc?s=128&d=identicon&r=PG&f=1", "display_name": "enumaris", "link": "https://stackoverflow.com/users/8793975/enumaris"}, "edited": false, "score": 0, "creation_date": 1533161830, "post_id": 51642944, "comment_id": 90250341, "body": "<code>brew uninstall llvm</code> worked for me just now. Posting this just to let others know in case."}, {"owner": {"reputation": 618, "user_id": 3938486, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FERwc.jpg?s=128&g=1", "display_name": "ChileAddict - Intel", "link": "https://stackoverflow.com/users/3938486/chileaddict-intel"}, "edited": false, "score": 0, "creation_date": 1537223592, "post_id": 51642944, "comment_id": 91697729, "body": "Hey - just out of curiousity, why was this question down-voted?"}], "answers": [{"tags": [], "owner": {"reputation": 1806, "user_id": 2358035, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9829509b8c27e2b52dfc900ddcf79640?s=128&d=identicon&r=PG&f=1", "display_name": "doron aviguy", "link": "https://stackoverflow.com/users/2358035/doron-aviguy"}, "is_accepted": false, "score": 0, "last_activity_date": 1538294712, "creation_date": 1538294712, "answer_id": 52575956, "question_id": 51642944, "link": "https://stackoverflow.com/questions/51642944/pip-installation-issue-for-a-python-package/52575956#52575956", "title": "`pip` installation issue for a python package", "body": "<p>this worked for me </p>\n\n<pre><code> env ARCHFLAGS=\"-arch x86_64\"  pip install python-binance\n</code></pre>\n"}], "owner": {"reputation": 665, "user_id": 5680455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68c6c6fab27106166f61b661482865a8?s=128&d=identicon&r=PG&f=1", "display_name": "konstant", "link": "https://stackoverflow.com/users/5680455/konstant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1538294712, "creation_date": 1533161588, "question_id": 51642944, "link": "https://stackoverflow.com/questions/51642944/pip-installation-issue-for-a-python-package", "title": "`pip` installation issue for a python package", "body": "<p>I am trying to install a <code>python</code> package called <code>numba</code>. I want to install it for <code>python2.7</code>, so when I run <code>sudo pip2.7 install numba</code>, it gives a following message. Can anyone let me know what the issue is? Thank you.</p>\n\n<pre><code>copying numba/tests/pycc_distutils_usecase/source_module.py -&gt; build/lib.macosx-10.13-intel-2.7/numba/tests/pycc_distutils_usecase\n    running build_ext\n    building 'numba._dynfunc' extension\n    C compiler: cc -fno-strict-aliasing -fno-common -dynamic -arch x86_64 -arch i386 -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -fwrapv -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe\n\ncreating build/temp.macosx-10.13-intel-2.7\ncreating build/temp.macosx-10.13-intel-2.7/numba\ncompile options: '-I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c'\ncc: numba/_dynfuncmod.c\ncc -bundle -undefined dynamic_lookup -arch x86_64 -arch i386 -Wl,-F. build/temp.macosx-10.13-intel-2.7/numba/_dynfuncmod.o -o build/lib.macosx-10.13-intel-2.7/numba/_dynfunc.so\nld: in '/usr/local/lib/libunwind.dylib', file was built for x86_64 which is not the architecture being linked (i386): /usr/local/lib/libunwind.dylib for architecture i386\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nld: in '/usr/local/lib/libunwind.dylib', file was built for x86_64 which is not the architecture being linked (i386): /usr/local/lib/libunwind.dylib for architecture i386\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nerror: Command \"cc -bundle -undefined dynamic_lookup -arch x86_64 -arch i386 -Wl,-F. build/temp.macosx-10.13-intel-2.7/numba/_dynfuncmod.o -o build/lib.macosx-10.13-intel-2.7/numba/_dynfunc.so\" failed with exit status 1\n\n----------------------------------------\nCommand \"/System/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python -c \"import setuptools, \ntokenize;__file__='/private/tmp/pip-build-mt0h4y/numba/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\\r\\n', '\\n'), __file__, 'exec'))\" \ninstall --record /tmp/pip-yCTE4v-record/install-record.txt --single-version-externally-managed --compile\" failed with error code 1 in /private/tmp/pip-build-mt0h4y/numba\n</code></pre>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 13633, "user_id": 5916727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1508d2b83d8f3b1c7450023486045d?s=128&d=identicon&r=PG&f=1", "display_name": "student", "link": "https://stackoverflow.com/users/5916727/student"}, "is_accepted": true, "score": 1, "last_activity_date": 1533162505, "creation_date": 1533162505, "answer_id": 51643085, "question_id": 51642935, "link": "https://stackoverflow.com/questions/51642935/pandas-group-by-combination-of-two-columns/51643085#51643085", "title": "Pandas: Group by combination of two columns", "body": "<p>If you do not care about order then, may be you can use <code>sort</code> on two columns then, apply, <code>groupby</code>:</p>\n\n<pre><code>import pandas as pd\nfrom collections import Counter\n\nd = pd.DataFrame([('a','b',1), ('a','c', 2), ('b','a',3), ('b','a',3)], \n                 columns=['x', 'y', 'score'])\n# Note: you can copy to other dataframe if you do not want to change original\nd[['x', 'y']] = d[['x', 'y']].apply(sorted, axis=1) \nx = d.groupby(['x', 'y']).agg(Counter)\nprint(x)\n# Result:\n#             score\n# x y              \n# a b  {1: 1, 3: 2}\n#   c        {2: 1}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "is_accepted": false, "score": 1, "last_activity_date": 1533164057, "creation_date": 1533164057, "answer_id": 51643311, "question_id": 51642935, "link": "https://stackoverflow.com/questions/51642935/pandas-group-by-combination-of-two-columns/51643311#51643311", "title": "Pandas: Group by combination of two columns", "body": "<p>You can also <code>groupby</code> using the aggregated <code>frozenset</code> of <code>x</code> and <code>y</code> and then <code>agg</code> using <code>Counter</code></p>\n\n<pre><code>from collections import Counter\ndf.groupby(df[['x', 'y']].agg(frozenset, 1)).score.agg(Counter)\n\n(b, a)    {1: 1, 3: 2}\n(a, c)          {2: 1}\n</code></pre>\n\n<p>If you want a <code>dataframe</code>, </p>\n\n<pre><code>.to_frame()\n\n        score\n(b, a)  {1: 1, 3: 2}\n(a, c)  {2: 1}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 1, "last_activity_date": 1533171367, "creation_date": 1533171367, "answer_id": 51644142, "question_id": 51642935, "link": "https://stackoverflow.com/questions/51642935/pandas-group-by-combination-of-two-columns/51644142#51644142", "title": "Pandas: Group by combination of two columns", "body": "<p>IIUC</p>\n\n<pre><code>d[['x','y']]=np.sort(d[['x','y']],1)\npd.crosstab([d.x,d.y],d.score)\nOut[94]: \nscore  1  2  3\nx y           \na b    1  0  2\n  c    0  1  0\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 4656011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cc0943d30b129f77140988f795c3c5d?s=128&d=identicon&r=PG&f=1", "display_name": "wkf", "link": "https://stackoverflow.com/users/4656011/wkf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1306, "favorite_count": 0, "accepted_answer_id": 51643085, "answer_count": 3, "score": 1, "last_activity_date": 1533171367, "creation_date": 1533161509, "question_id": 51642935, "link": "https://stackoverflow.com/questions/51642935/pandas-group-by-combination-of-two-columns", "title": "Pandas: Group by combination of two columns", "body": "<p>I have data as follows. The score column is the score of x vs y (which is equivalent to y vs x).</p>\n\n<pre><code>from collections import Counter\nimport pandas as pd\n\nd = pd.DataFrame([('a','b',1), ('a','c', 2), ('b','a',3), ('b','a',3)], \n                 columns=['x', 'y', 'score'])\n\n    x   y   score\n0   a   b   1\n1   a   c   2\n2   b   a   3\n3   b   a   3\n</code></pre>\n\n<p>I want to evaluate the count of the score of each combination, so ('a' vs 'b) and ('b' vs 'a') should be grouped together, i.e.</p>\n\n<pre><code>        score\nx   y   \na   b   {1: 1, 3: 2}\n    c   {2: 1}\n</code></pre>\n\n<p>However if I do <code>d.groupby(['x', 'y']).agg(Counter)</code>, ('a', 'b') and ('b', 'a') are not combined together. Is there a way to solve this? Thanks!</p>\n\n<pre><code>        score\nx   y   \na   b   {1: 1}\n    c   {2: 1}\nb   a   {3: 2}\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "python-datetime", "pygal"], "answers": [{"tags": [], "owner": {"reputation": 209, "user_id": 8714519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac511ab48811b8b35648737397a6e036?s=128&d=identicon&r=PG&f=1", "display_name": "SP001", "link": "https://stackoverflow.com/users/8714519/sp001"}, "is_accepted": false, "score": 0, "last_activity_date": 1536520266, "creation_date": 1536520266, "answer_id": 52247825, "question_id": 51642920, "link": "https://stackoverflow.com/questions/51642920/pygal-plotting-dates-on-the-x-axis/52247825#52247825", "title": "pygal plotting dates on the x-axis", "body": "<p>You are trying to convert a string('2018, 07, 22, 18, 02, 07') to int, hence the valueError.</p>\n"}, {"comments": [{"owner": {"reputation": 920, "user_id": 5454192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vCR7S.png?s=128&g=1", "display_name": "AJ Poulter", "link": "https://stackoverflow.com/users/5454192/aj-poulter"}, "edited": false, "score": 0, "creation_date": 1556892960, "post_id": 55971527, "comment_id": 98593991, "body": "I should probably add (in case it&#39;s not obvious) that this also works for a graph type of DateTimeLine too\u2026"}], "tags": [], "owner": {"reputation": 920, "user_id": 5454192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vCR7S.png?s=128&g=1", "display_name": "AJ Poulter", "link": "https://stackoverflow.com/users/5454192/aj-poulter"}, "is_accepted": false, "score": 0, "last_activity_date": 1556892597, "creation_date": 1556892597, "answer_id": 55971527, "question_id": 51642920, "link": "https://stackoverflow.com/questions/51642920/pygal-plotting-dates-on-the-x-axis/55971527#55971527", "title": "pygal plotting dates on the x-axis", "body": "<p>I've just spent about an hour trying to solve a closely related issue \u2013\u00a0so despite the fact that this is old, I thought that I'd share my solution...</p>\n\n<p>Despite the fact that PyGal documentation doesn't make it terribly clear \u2013 PyGal does in fact directly support time/dates in UNIX epoch time...</p>\n\n<p>So for example to plot three points (picking numbers I was playing with for something else) in 2014 \u2013 then the code is just:</p>\n\n<pre><code>    dateline.add('Epoch Time', [\n          (1389830399, 400),\n          (1402826470, 450),\n          (1420029285, 500)])\n</code></pre>\n\n<p>Or for the full example \u2013 it'd be:</p>\n\n<pre><code>import pygal\nfrom datetime import date\n\ndateline = pygal.DateLine(x_label_rotation=45, range=(0, 750))\ndateline.x_labels = [\n        date(2014, 1, 1),\n        date(2014, 3, 1),\n        date(2014, 5, 1),\n        date(2014, 7, 1),\n        date(2014, 9, 1),\n        date(2014, 11, 1),\n        date(2014, 12, 31)\n]\n\ndateline.add('Time', [\n        (1389830399, 400),\n        (1402826470, 450),\n        (1420029285, 500)])\n\ndateline.render_to_png(\"test.png\")\n</code></pre>\n\n<p>Which gives you a graph that looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/yboKw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yboKw.png\" alt=\"Example Graph\"></a></p>\n\n<p>Anyway, I hope that's of use to save someone else the same headache that I've just had! :-)</p>\n"}], "owner": {"reputation": 11, "user_id": 6636148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cQzYT.jpg?s=128&g=1", "display_name": "motojim", "link": "https://stackoverflow.com/users/6636148/motojim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 720, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1556892597, "creation_date": 1533161426, "question_id": 51642920, "link": "https://stackoverflow.com/questions/51642920/pygal-plotting-dates-on-the-x-axis", "title": "pygal plotting dates on the x-axis", "body": "<p>(Note: I am mostly new at Python so my code is more functional than elegant, or so I hope it becomes functional.)</p>\n\n<p>Using Python 3.6 and pygal 2 I am attempting to read in json formated data from a storage array's REST API. I want to pull out the latency values (read, write, total) and create a scatter plot showing the values.</p>\n\n<p>I started with the pygal docs about plotting dates, <a href=\"http://www.pygal.org/en/stable/documentation/types/xy.html#dates\" rel=\"nofollow noreferrer\">here</a>. </p>\n\n<p>The timestamps in json are all in epoch milliseconds. So as I read them in, I have to divide to make them work with datetime library.</p>\n\n<p>Sample json data section:</p>\n\n<pre><code>    [\n  1532908042508,\n  {\n    \"latency.total\": 1.09258,\n    \"partialBlocksRatio.total\": 18.58528,\n    \"iops.read\": 5984.2,\n    \"latency.read\": 1.1011,\n    \"iops.write\": 2181.4,\n    \"throughput.read\": 1461.03762,\n    \"throughput.write\": 105.14331,\n    \"throughput.total\": 1566.18092,\n    \"iops.total\": 8165.6,\n    \"latency.write\": 1.06919\n  }\n],\n</code></pre>\n\n<p>My issue is once I get the data is how to feed it into pygal. I start with defining the chart (taken from the pygal doc example)</p>\n\n<p>I pull the data, convert the epoch milliseconds to seconds, create the time string to be in the format needed (Y, m, d, H, M, S) and put that list in a list.\nNext load the latency data into a list. \nWhen all the data is loaded, I add to pygal and attempt to render to a file.</p>\n\n<pre><code>if key.lower() == 'history':\n    for key2, historyData in value:\n        epochSec = key2 / 1000.0            # The key for each history entry is epoch time in milliseconds. Time functions in Python\n                                                # appear to want seconds. So the division is needed.\n       timeStamp = [datetime.fromtimestamp(epochSec).strftime('%Y, %m, \n%d, %H, %M, %S')]       # Create the list format used for pygal\n       timeStamps.append(timeStamp)\n       #print(timeStamp)\n       for key3 in historyData:\n           if key3.lower() == 'latency.read':\n              perfHistory.append(historyData[key3])\n              for stamp in timeStamps:\n                  #print(stamp[0])\n                  xy_dateLine.add(\"\", datetime(int(stamp[0])),perfHistory)\nxy_dateLine.render_to_file('scatter4-1.svc')\n</code></pre>\n\n<p>the error is \n    Traceback (most recent call last):\n      File \"C:/Users/../python/XIO_DataPlotting5.py\", line 57, in \n        xy_dateLine.add(\"\", datetime(int(stamp[0])),perfHistory)\n    ValueError: invalid literal for int() with base 10: '2018, 07, 22, 18, 02, 07'</p>\n\n<p>My feeling here is I am overlooking something simple, yet I am at a lost at what. Am I over complicating this? Is there a tutorial for pygal that my google-fu uncovering?</p>\n"}, {"tags": ["python", "selenium", "web-scraping", "selenium-chromedriver"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 9969775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67d94bf6b0c0d56a4bbf3320c14306be?s=128&d=identicon&r=PG&f=1", "display_name": "Davicholo", "link": "https://stackoverflow.com/users/9969775/davicholo"}, "edited": false, "score": 0, "creation_date": 1533204853, "post_id": 51645775, "comment_id": 90265264, "body": "Thank you so much Andrei. Also I have seen how to do it in:  <a href=\"https://stackoverflow.com/questions/23896625/how-to-change-default-download-folder-while-webdriver-is-running\" title=\"how to change default download folder while webdriver is running\">stackoverflow.com/questions/23896625/&hellip;</a>"}], "tags": [], "owner": {"reputation": 5161, "user_id": 8625512, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/14cFh.jpg?s=128&g=1", "display_name": "Andrei Suvorkov", "link": "https://stackoverflow.com/users/8625512/andrei-suvorkov"}, "is_accepted": true, "score": 2, "last_activity_date": 1533185889, "creation_date": 1533185889, "answer_id": 51645775, "question_id": 51642864, "link": "https://stackoverflow.com/questions/51642864/update-download-default-directory-chromedriver-for-different-file-download/51645775#51645775", "title": "Update download.default_directory chromedriver for different file download", "body": "<p>It is not possible to change download directory after creating a webdriver instance. To solve your problem, you have to create a new webdriver instance every time you want to change download directory.</p>\n"}], "owner": {"reputation": 23, "user_id": 9969775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67d94bf6b0c0d56a4bbf3320c14306be?s=128&d=identicon&r=PG&f=1", "display_name": "Davicholo", "link": "https://stackoverflow.com/users/9969775/davicholo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1483, "favorite_count": 0, "accepted_answer_id": 51645775, "answer_count": 1, "score": 2, "last_activity_date": 1533185943, "creation_date": 1533161021, "last_edit_date": 1533185943, "question_id": 51642864, "link": "https://stackoverflow.com/questions/51642864/update-download-default-directory-chromedriver-for-different-file-download", "title": "Update download.default_directory chromedriver for different file download", "body": "<p>I'm using Selenium to download different files of a web.\nMy initial configuration when i run the program is:</p>\n\n<pre><code>download_dir = \"/Users/Downloads\" \noptions = webdriver.ChromeOptions()\n\nprofile = {\"plugins.plugins_list\": [{\"enabled\": False, \"name\": \"Chrome PDF Viewer\"}], # Disable Chrome's PDF Viewer\n           \"download.default_directory\": download_dir , \n           \"download.extensions_to_open\": \"applications/pdf\",\"download.prompt_for_download\": False}\noptions.add_experimental_option(\"prefs\", profile)\n</code></pre>\n\n<p>I would like to download the differents files in differents folders, so I understand, that I should update of value of the path in \"download.default_directory\". My problem is that I don't know how do that.\nI update the new value before download the file,</p>\n\n<pre><code>download_dir = \"/Users/Download\"+exp1\ndriver.find_element_by_xpath('//*[@id=\"myTab\"]/tbody/tr[2]/td[3]/div/a[3]').click()\n</code></pre>\n\n<p>but it saves in first path \"/Users/Downloads\"</p>\n\n<p>Is it possible to update \"download.default_directory\" to save in different folder?</p>\n"}, {"tags": ["python", "dictionary", "converter", "unicode-string"], "comments": [{"owner": {"reputation": 1070, "user_id": 1021259, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/dcbI9.jpg?s=128&g=1", "display_name": "Rob Rose", "link": "https://stackoverflow.com/users/1021259/rob-rose"}, "edited": false, "score": 0, "creation_date": 1533160348, "post_id": 51642746, "comment_id": 90249928, "body": "Are you using Python 2 or 3? Python 3 supports Unicode by default, you should use it if possible."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 1070, "user_id": 1021259, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/dcbI9.jpg?s=128&g=1", "display_name": "Rob Rose", "link": "https://stackoverflow.com/users/1021259/rob-rose"}, "edited": false, "score": 1, "creation_date": 1533160419, "post_id": 51642746, "comment_id": 90249952, "body": "@RobRose that isn&#39;t the issue at all. The issue is that the OP dumped the string representation of a dict object to a csv file and now has to deserialize that. The <i>real</i> solution is to use an appropriate serialization format from the beginning. If that isn&#39;t possible,they can use one of the approaches in the linked duplicate target."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1533160450, "post_id": 51642746, "comment_id": 90249958, "body": "You should really choose a better serialization format. Dont just dump the string representations of objects to a file and call it serialization."}, {"owner": {"reputation": 661, "user_id": 5001502, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153410573162710/picture?type=large", "display_name": "Ben Jones", "link": "https://stackoverflow.com/users/5001502/ben-jones"}, "edited": false, "score": 0, "creation_date": 1533160476, "post_id": 51642746, "comment_id": 90249965, "body": "You may be able to use <code>eval(line)</code>"}, {"owner": {"reputation": 1, "user_id": 10168062, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-v5az-huVF74/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rjqEtx9zMBRIbS-pfOH6FCzfcWxw/mo/photo.jpg?sz=128", "display_name": "Tonio Vassilaros", "link": "https://stackoverflow.com/users/10168062/tonio-vassilaros"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1533161103, "post_id": 51642746, "comment_id": 90250126, "body": "@juanpa.arrivillaga please untag as duplicate as I couldn&#39;t find solutions to the problem that addresses the apostrophe within the line of code. <code>line.replace(&quot; &#39; &quot;, &#39; &quot; &#39;)</code> is not a valid solution. As for serialization from the beginning what would you recommend?"}, {"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 3, "creation_date": 1533161427, "post_id": 51642746, "comment_id": 90250220, "body": "The apostrophe makes it invalid syntax, you&#39;re not going to find a solution. The only way to make sense of that text is to make up a rule that apostrophes in the wrong place must be ignored. That&#39;s a very custom requirement."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 2, "creation_date": 1533162810, "post_id": 51642746, "comment_id": 90250600, "body": "How was this CSV file created? It can&#39;t be parsed without heuristics that will be (a) nontrivial to write and test and (b) probably wrong in some cases, producing garbage. If the CSV file came from code that you wrote, or code that a coworker wrote, or code that a company you&#39;re paying or partnered with wrote, then fix that code and generate proper CSV files. It will be much easier, and better, than coming up with, and implementing, the heuristics for trying to repair the broken data."}], "answers": [{"tags": [], "owner": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "is_accepted": false, "score": 2, "last_activity_date": 1533162419, "creation_date": 1533162419, "answer_id": 51643076, "question_id": 51642746, "link": "https://stackoverflow.com/questions/51642746/unicode-to-dictionary-unicode-contains-apostrophe-punctuation/51643076#51643076", "title": "Unicode to dictionary (unicode contains apostrophe punctuation)", "body": "<p>Given that there is an apostrophe within the string, you'll have to do some pre-processing before you even attempt to parse it into a <code>dict</code>. Assuming that all strings within the target <code>dict</code> are unicode and that closing strings have to be followed immediately by a control character (i.e. <code>}</code>, <code>:</code>, <code>,</code>, <code>}</code>, whitespace...) you can search for all apostrophes that do not match these two categories and escape them. Then you can use <a href=\"https://docs.python.org/3/library/ast.html#ast.literal_eval\" rel=\"nofollow noreferrer\"><code>ast.literal_eval()</code></a> to parse it into a <code>dict</code>, something like:</p>\n\n<pre><code>import ast\nimport re\n\nAPOSTROPHE_ESCAPE = re.compile(r\"(?&lt;!u)'(?![.}:,\\s])\")\n\nline = u\"{u'There's Still Time': u'foo'}\"\nyour_dict = ast.literal_eval(APOSTROPHE_ESCAPE.sub(r\"\\'\", line))\n\nprint(your_dict)  # {u\"There's Still Time\": u'foo'}\n</code></pre>\n\n<p>Keep in mind, tho, that just a simple:</p>\n\n<pre><code>line = u\"{u'There'}s Still Time': u'foo'}\"\n</code></pre>\n\n<p>Will throw it off - sure, it would be an illegal dictionary in the source as well, but keep in mind these limitations and adjust your pre-process regex accordingly.</p>\n"}], "owner": {"reputation": 1, "user_id": 10168062, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-v5az-huVF74/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rjqEtx9zMBRIbS-pfOH6FCzfcWxw/mo/photo.jpg?sz=128", "display_name": "Tonio Vassilaros", "link": "https://stackoverflow.com/users/10168062/tonio-vassilaros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1533162419, "creation_date": 1533160248, "last_edit_date": 1533160851, "question_id": 51642746, "link": "https://stackoverflow.com/questions/51642746/unicode-to-dictionary-unicode-contains-apostrophe-punctuation", "title": "Unicode to dictionary (unicode contains apostrophe punctuation)", "body": "<p>I have read the following Unicode from a CSV file: </p>\n\n<pre><code>line = u\"{u'There's Still Time': u'foo'}\"\n</code></pre>\n\n<p>I would like to be able to convert this to a dictionary so I would be able to so I can access it as the following:</p>\n\n<pre><code>line[\"There's Still Time\"] \nOutput: 'foo'\n</code></pre>\n\n<p>Please help.</p>\n"}, {"tags": ["python", "optimization", "statistics", "pymc3", "mcmc"], "comments": [{"owner": {"reputation": 41290, "user_id": 570918, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/27ce5101af57acecf9a5fe563b6192b1?s=128&d=identicon&r=PG", "display_name": "merv", "link": "https://stackoverflow.com/users/570918/merv"}, "edited": false, "score": 0, "creation_date": 1537240844, "post_id": 51642745, "comment_id": 91701261, "body": "Was about to post some thoughts on this, but checking <a href=\"https://github.com/pymc-devs/pymc3/issues/3132\" rel=\"nofollow noreferrer\">the cross-post</a> you diligently included, I found everything I had to suggest and much more is thoroughly covered there. If you have a chance, maybe you could summarize what you found most useful from that thread as an answer to close this out."}], "owner": {"reputation": 62908, "user_id": 567620, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/g8HIM.jpg?s=128&g=1", "display_name": "ely", "link": "https://stackoverflow.com/users/567620/ely"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1210, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1533160234, "creation_date": 1533160234, "question_id": 51642745, "link": "https://stackoverflow.com/questions/51642745/debugging-convergence-and-slow-sampling-issues-with-nuts-in-pymc3-logistic-regre", "title": "Debugging convergence and slow sampling issues with NUTS in pymc3 logistic regression", "body": "<p>I am cross-posting from a <a href=\"https://github.com/pymc-devs/pymc3/issues/3132\" rel=\"nofollow noreferrer\">GitHub issue</a> on the same topic.</p>\n\n<p>I am trying to determine the cause of slow sampling rate and convergence issues with the default NUTS algorithm in pymc fitting a standard logistic model on a data set of 1.5 million observations and 500 covariates (1500000 x 500 design matrix).</p>\n\n<p>Here is some code to create a toy data set of this size:</p>\n\n<pre><code>import numpy as np\ncovariates = np.random.randn(1500000, 499)\ncovariates = np.hstack((np.ones((1500000, 1)), covariates))\n\ntrue_coefficients = 5 * np.random.rand(500)\ntrue_logits = np.dot(covariates, true_coefficients) \ntrue_probs = 1.0 / (1.0 + np.exp(-true_logits))\nobserved_labels = (np.random.rand(1500000) &lt; true_probs).astype(np.int32)\n</code></pre>\n\n<p>From here it is easy to create a <code>statsmodels</code> or <code>sklearn.linear_model.LogisticRegression</code> model fit, for example using this code:</p>\n\n<pre><code>from sklearn.linear_model import LogisticRegression\n\nlogistic = LogisticRegression(max_iter=1000, fit_intercept=False, verbose=1)\nlogistic.fit(covariates, observed_labels)\n# above takes 3-5 minutes on my machine, appears to converge well.\n\nimport matplotlib.pyplot as plt\nplt.scatter(true_coefficients, logistic.coef_[0, :])\nplt.show()\n# above scatter plot shows good accuracy in the point estimate.\n</code></pre>\n\n<p>Even for the full data set, the sklearn model converges reasonably quickly and yields a solution parameter vector with good accuracy compared with the true coefficients.</p>\n\n<p>But using the code below for pymc, I am frequently seeing unacceptable slow sampling times whether using NUTS or a simple Metropolis sampler. I've tried changing many of the default settings for both, subsampling the data, and a variety of other tricks, but with no luck.</p>\n\n<pre><code>import pymc3 as pm\nimport theano.tensor as tt\n\nwith pm.Model() as logistic_model:\n    beta = pm.Normal('beta', 0.0, sd=3.0, shape=500)\n    p = 1.0 / (1.0 + tt.exp(-tt.dot(covariates, beta)))\n    likelihood = pm.Bernoulli('likelihood', p, observed=observed_labels)\n\nwith logistic_model:\n    tr = pm.sample(1000, njobs=2, nchains=2)\n\n# In the sample step above I have also tried all types of variations on using\n# step = pm.NUTS(), step = pm.Metropolis(), start = pm.find_MAP(),\n# start = {'beta': np.zeros(500)}, and adjustment of all sorts of options with\n# kwargs to these steppers.\n\n# I have also tried wrapping `covariates` and `observed_labels` with pm.Minibatch\n# with batch sizes ranging from 1000 to 200000 observations per sample. With NUTS,\n# the minibatches made it run drastically slower, over 40 seconds per sample.\n</code></pre>\n\n<p>For the NUTS algorithm, I find that if I don't manually set the start value either to the zero vector or using <code>pm.find_MAP</code> (which is discouraged in the pymc documentation), then I otherwise get a \"bad energy\" error with the initialization procedure:</p>\n\n<pre><code>RemoteTraceback                           Traceback (most recent call last)\nRemoteTraceback:\n\"\"\"\nTraceback (most recent call last):\n  File \"/Users/espears/anaconda3/envs/py36-pymc/lib/python3.6/site-packages/pymc3/parallel_sampling.py\", line 73, in run\n    self._start_loop()\n  File \"/Users/espears/anaconda3/envs/py36-pymc/lib/python3.6/site-packages/pymc3/parallel_sampling.py\", line 113, in _start_loop\n    point, stats = self._compute_point()\n  File \"/Users/espears/anaconda3/envs/py36-pymc/lib/python3.6/site-packages/pymc3/parallel_sampling.py\", line 139, in _compute_point\n    point, stats = self._step_method.step(self._point)\n  File \"/Users/espears/anaconda3/envs/py36-pymc/lib/python3.6/site-packages/pymc3/step_methods/arraystep.py\", line 247, in step\n    apoint, stats = self.astep(array)\n  File \"/Users/espears/anaconda3/envs/py36-pymc/lib/python3.6/site-packages/pymc3/step_methods/hmc/base_hmc.py\", line 117, in astep\n    'might be misspecified.' % start.energy)\nValueError: Bad initial energy: inf. The model might be misspecified.\n\"\"\"\n\nThe above exception was the direct cause of the following exception:\n\nValueError                                Traceback (most recent call last)\nValueError: Bad initial energy: inf. The model might be misspecified.\n\nThe above exception was the direct cause of the following exception:\n\nRuntimeError                              Traceback (most recent call last)\n~/programming/pymc-testing/logistic_example.py in &lt;module&gt;()\n     45 with logistic_model:\n     46     #step, start = pm.Metropolis(), {'beta': np.zeros(num_coefficients)}\n---&gt; 47     tr = pm.sample(1000, njobs=2, nchains=2)\n     48 print(f\"{time.time() - st}: finished_sampling...\")\n     49\n\n~/anaconda3/envs/py36-pymc/lib/python3.6/site-packages/pymc3/sampling.py in sample(draws, step, init, n_init, start, trace, chain_idx, chains, cores, tune, nuts_kwargs, step_kwargs, progressbar, model, random_seed, live_plot, discard_tuned_samples, live_plot_kwargs, compute_convergence_checks, use_mmap, **kwargs)\n    449             _print_step_hierarchy(step)\n    450             try:\n--&gt; 451                 trace = _mp_sample(**sample_args)\n    452             except pickle.PickleError:\n    453                 _log.warning(\"Could not pickle model, sampling singlethreaded.\")\n\n~/anaconda3/envs/py36-pymc/lib/python3.6/site-packages/pymc3/sampling.py in _mp_sample(draws, tune, step, chains, cores, chain, random_seed, start, progressbar, trace, model, use_mmap, **kwargs)\n    999         try:\n   1000             with sampler:\n-&gt; 1001                 for draw in sampler:\n   1002                     trace = traces[draw.chain - chain]\n   1003                     if trace.supports_sampler_stats and draw.stats is not None:\n\n~/anaconda3/envs/py36-pymc/lib/python3.6/site-packages/pymc3/parallel_sampling.py in __iter__(self)\n    303\n    304         while self._active:\n--&gt; 305             draw = ProcessAdapter.recv_draw(self._active)\n    306             proc, is_last, draw, tuning, stats, warns = draw\n    307             if self._progress is not None:\n\n~/anaconda3/envs/py36-pymc/lib/python3.6/site-packages/pymc3/parallel_sampling.py in recv_draw(processes, timeout)\n    221         if msg[0] == 'error':\n    222             old = msg[1]\n--&gt; 223             six.raise_from(RuntimeError('Chain %s failed.' % proc.chain), old)\n    224         elif msg[0] == 'writing_done':\n    225             proc._readable = True\n\n~/anaconda3/envs/py36-pymc/lib/python3.6/site-packages/six.py in raise_from(value, from_value)\n\nRuntimeError: Chain 0 failed.\n</code></pre>\n\n<p>This is all very unexpected with the NUTS or simple Metropolis algorithms, because the gradient of the log-likelihood function is extremely simple for this model, I am using a reasonable and informative prior (setting a small standard deviation of 3), and the data size at 1500000 x 500 is quite small, fits comfortably in memory and doesn't cause issues with standard statistical packages like statsmodels or scikit-learn (which are using second-order derivatives, etc., much the same as NUTS is).</p>\n\n<p>I'm looking for guidance on what sampler settings are needed to get a fast sample rate on the full data, so that I can sample longer for convergence. </p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 2014, "user_id": 7480990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4d77695a75bd92bb2da36de7ae7d917?s=128&d=identicon&r=PG&f=1", "display_name": "tobsecret", "link": "https://stackoverflow.com/users/7480990/tobsecret"}, "is_accepted": false, "score": 0, "last_activity_date": 1533160154, "creation_date": 1533160154, "answer_id": 51642727, "question_id": 51642699, "link": "https://stackoverflow.com/questions/51642699/python-dataframe-contains-column-names-that-need-to-be-dropped-in-another-data/51642727#51642727", "title": "Python - Dataframe contains column names that need to be dropped in another dataframe", "body": "<p>I may be misunderstanding what you are looking for but the following should work:</p>\n\n<pre><code>df_new = df.drop(columns=to_remove['column_name'])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "is_accepted": true, "score": 1, "last_activity_date": 1533160558, "last_edit_date": 1533160558, "creation_date": 1533160217, "answer_id": 51642738, "question_id": 51642699, "link": "https://stackoverflow.com/questions/51642699/python-dataframe-contains-column-names-that-need-to-be-dropped-in-another-data/51642738#51642738", "title": "Python - Dataframe contains column names that need to be dropped in another dataframe", "body": "<p>Take a look at this example:</p>\n\n<pre><code>df = pd.DataFrame({'cols': ['col1', 'col2']})\ndf2 = pd.DataFrame({'col1': ['a', 'b'], \n                    'col2': ['a', 'b'], \n                    'col3': ['a', 'b'], \n                    'col4': ['a', 'b']})\n</code></pre>\n\n<p>Such that </p>\n\n<pre><code>&gt;&gt;&gt; df\n    cols\n0   col1\n1   col2\n\n&gt;&gt;&gt; df2\n    col1    col2    col3    col4\n0   a       a       a       a\n1   b       b       b       b\n</code></pre>\n\n<h3>Option1: <code>isin</code>+ <code>~</code></h3>\n\n<p>You can use <code>isin</code>+ unary opearator <code>~</code></p>\n\n<pre><code>df2.loc[:, ~df2.columns.isin(df.cols)]\n\n    col3    col4\n0   a       a\n1   b       b\n</code></pre>\n\n<h3>Option2: <code>drop</code>+<code>axis=1</code></h3>\n\n<pre><code>df2.drop(df.cols, axis=1) # same as df2.drop(columns=df.cols)\n\n    col3    col4\n0   a       a\n1   b       b\n</code></pre>\n\n<p>These commands <em>return</em> a new <code>df</code>. So do not forget to assign the result back to a variable (e.g. <code>df2 = df2.drop(df.cols, axis=1)</code>)</p>\n"}, {"tags": [], "owner": {"reputation": 833, "user_id": 5432304, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206686944764888/picture?type=large", "display_name": "Peybae", "link": "https://stackoverflow.com/users/5432304/peybae"}, "is_accepted": false, "score": 0, "last_activity_date": 1533160366, "creation_date": 1533160366, "answer_id": 51642766, "question_id": 51642699, "link": "https://stackoverflow.com/questions/51642699/python-dataframe-contains-column-names-that-need-to-be-dropped-in-another-data/51642766#51642766", "title": "Python - Dataframe contains column names that need to be dropped in another dataframe", "body": "<p>This should do it:</p>\n\n<pre><code>df.drop(to_remove.column_name, axis=1, inplace=True)\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 7981856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7eb5dde185abbc0bf5294252555845d2?s=128&d=identicon&r=PG&f=1", "display_name": "brie", "link": "https://stackoverflow.com/users/7981856/brie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 51642738, "answer_count": 3, "score": 1, "last_activity_date": 1533160558, "creation_date": 1533159988, "last_edit_date": 1533160247, "question_id": 51642699, "link": "https://stackoverflow.com/questions/51642699/python-dataframe-contains-column-names-that-need-to-be-dropped-in-another-data", "title": "Python - Dataframe contains column names that need to be dropped in another dataframe", "body": "<p>I have two dataframes:</p>\n\n<p>The first dataframe is simply one column where each row is a column name in the 2nd dataframe.  This dataframe only contains a subset of all the columns.  </p>\n\n<p>What I want to do is remove the columns in the 2nd dataframe that are referenced in the smaller one.  I've written a loop that does that, but I was wondering if there was a more efficient way to do so, as I need to remove about 5,000 columns.</p>\n\n<p>Here's my code that accomplishes this task:</p>\n\n<pre><code>for i in to_remove['column_name']:\n    df = df.drop(i, axis=1)\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "matplotlib", "gis", "openstreetmap", "cartopy"], "answers": [{"comments": [{"owner": {"reputation": 229, "user_id": 9693447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc61e102e309700188a714e47b395248?s=128&d=identicon&r=PG&f=1", "display_name": "D. Lef", "link": "https://stackoverflow.com/users/9693447/d-lef"}, "edited": false, "score": 0, "creation_date": 1533222624, "post_id": 51648598, "comment_id": 90277517, "body": "So this didn&#39;t exactly solve my problem, but it did help me figure it out. My problem was not with the zoom level, but with the set_extent() method. I&#39;m not sure what the protocol is here as far as accepting this answer or writing my own."}, {"owner": {"reputation": 18313, "user_id": 741316, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a3a8307ffcd780e908d042bcc97cd2f8?s=128&d=identicon&r=PG", "display_name": "pelson", "link": "https://stackoverflow.com/users/741316/pelson"}, "reply_to_user": {"reputation": 229, "user_id": 9693447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc61e102e309700188a714e47b395248?s=128&d=identicon&r=PG&f=1", "display_name": "D. Lef", "link": "https://stackoverflow.com/users/9693447/d-lef"}, "edited": false, "score": 0, "creation_date": 1533285613, "post_id": 51648598, "comment_id": 90299783, "body": "Please feel free to write your own (and accept it). All useful info/knowledge."}], "tags": [], "owner": {"reputation": 18313, "user_id": 741316, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a3a8307ffcd780e908d042bcc97cd2f8?s=128&d=identicon&r=PG", "display_name": "pelson", "link": "https://stackoverflow.com/users/741316/pelson"}, "is_accepted": true, "score": 3, "last_activity_date": 1533197179, "creation_date": 1533197179, "answer_id": 51648598, "question_id": 51642660, "link": "https://stackoverflow.com/questions/51642660/unable-to-retrieve-map-tiles-at-high-zoom-level-i-e-zoomed-out-with-matplotli/51648598#51648598", "title": "Unable to retrieve map tiles at high zoom level (i.e. zoomed out) with Matplotlib/Cartopy/Python", "body": "<p>The <a href=\"https://wiki.openstreetmap.org/wiki/Zoom_levels\" rel=\"nofollow noreferrer\">\"zoom\" levels are based on a Quadtree</a>. Essentially increasing the \"zoom\" resolution increases the number of tiles by a power of four.</p>\n\n<p>So:</p>\n\n<pre><code>zoom level 0: 4^0 = 1 tile(s) to cover the globe\nzoom level 1: 4^1 = 4 tile(s) to cover the globe\n...\nzoom level 7: 4^7 = 16,384 tile(s) to cover the globe\n...\nzoom level 14: 4^14 = 268,435,456 tile(s) to cover the globe\n</code></pre>\n\n<p>So if you request tiles at a high zoom-level for a large area you can end up requesting <strong>a lot</strong> of tiles.</p>\n\n<p>There is a useful but undocumented method on the Tiler object called <code>find_images</code>. Its implementation isn't too hairy:<br>\n<a href=\"https://github.com/SciTools/cartopy/blob/v0.16.0/lib/cartopy/io/img_tiles.py#L103-L122\" rel=\"nofollow noreferrer\">https://github.com/SciTools/cartopy/blob/v0.16.0/lib/cartopy/io/img_tiles.py#L103-L122</a>.</p>\n\n<p>With this method, we can actually see the tiles that would be used for a given range. Importantly the range needs to be supplied in the coordinate system of the tiler (almost exclusively Web Mercator).</p>\n\n<pre><code>In [1]: import cartopy.io.img_tiles as cimgt\n\nIn [2]: import shapely.geometry as sgeom\n\nIn [3]: import cartopy.crs as ccrs\n\nIn [4]: tiler = cimgt.OSM()\n\nIn [5]: pt = 45.068466, -66.45477\n\nIn [6]: target = sgeom.box(pt[0] - 1.5, pt[1] - 1.5, pt[0] + 1.5, pt[1] + 1.5)\n\nIn [7]: target_mercator = tiler.crs.project_geometry(target, ccrs.Geodetic()).geoms[0]\n</code></pre>\n\n<p>So with all the pieces in place we can start finding out which tiles we would need to draw at particular zoom levels:</p>\n\n<p>For the target you are specifying, at zoom level 0, we need the following tiles <code>(x, y, z)</code>:</p>\n\n<pre><code>In [8]: list(tiler.find_images(target_mercator, 0))\nOut[8]: [(0, 0, 0)]\n</code></pre>\n\n<p>For z=1, it is still only one tile:</p>\n\n<pre><code>In [9]: list(tiler.find_images(target_mercator, 1))\nOut[9]: [(1, 1, 1)]\n</code></pre>\n\n<p>But for z=2 we clearly crossed a tile boundary, as we now need two tiles to cover the target domain:</p>\n\n<pre><code>In [10]: list(tiler.find_images(target_mercator, 2))\nOut[10]: [(2, 2, 2), (2, 3, 2)]\n\nNaturally, the list grows as we increase the zoom level:\n\nIn [11]: list(tiler.find_images(target_mercator, 3))\nOut[11]: [(4, 5, 3), (5, 5, 3), (4, 6, 3), (5, 6, 3)]\n\nIn [12]: list(tiler.find_images(target_mercator, 6))\nOut[12]: [(39, 47, 6), (40, 47, 6), (39, 48, 6), (40, 48, 6)]\n</code></pre>\n\n<p>When we hit z=7 we find that we would need 8 tiles to represent the area in question:</p>\n\n<pre><code>In [13]: list(tiler.find_images(target_mercator, 7))\nOut[13]: \n[(79, 94, 7),\n (79, 95, 7),\n (80, 94, 7),\n (80, 95, 7),\n (79, 96, 7),\n (79, 97, 7),\n (80, 96, 7),\n (80, 97, 7)]\n</code></pre>\n\n<p>I'm sure you can see where this is going, but let's try your zoom level of 14 to find out how many tiles we would need. To save on electricity and reading time, let's just print the length of that list...</p>\n\n<pre><code>In [14]: len(list(tiler.find_images(target_mercator, 14)))\nOut[14]: 47334\n</code></pre>\n\n<p>Right, so requesting zoom level 14 at your desired extent would need you to download ~47,000 tiles at 256x256 (8-bit colormapped PNGs). The z=0 tile (<a href=\"https://a.tile.openstreetmap.org/0/0/0.png\" rel=\"nofollow noreferrer\">https://a.tile.openstreetmap.org/0/0/0.png</a>) is about 8882 bytes compressed, so assuming this is typical, you'd end up downloading ~420420588 bytes (400MB). In order to hold this data in memory, you'd also need about 2.9GB of RAM. Finally, to reproject this data to PlateCarree you'd need to at least double this amount of RAM, and that is assuming a highly efficient reprojection implementation (cartopy's isn't).</p>\n\n<p>Hopefully this tells you <em>why</em> your code seems to take a long time - you are asking it to do a <em>lot</em> of work. There have been a few discussions about whether cartopy should warn when an excessively large number of tiles is requested, but it always comes down to what is an unreasonable number (you might actually <em>want</em> to fetch that many tiles!). We have also talked about automatic zoom level selection - this is something that is <a href=\"https://github.com/SciTools/cartopy/issues/315\" rel=\"nofollow noreferrer\">really feasible</a> if there is sufficient demand.</p>\n\n<p>HTH</p>\n"}], "owner": {"reputation": 229, "user_id": 9693447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc61e102e309700188a714e47b395248?s=128&d=identicon&r=PG&f=1", "display_name": "D. Lef", "link": "https://stackoverflow.com/users/9693447/d-lef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 802, "favorite_count": 1, "accepted_answer_id": 51648598, "answer_count": 1, "score": 2, "last_activity_date": 1533197179, "creation_date": 1533159777, "question_id": 51642660, "link": "https://stackoverflow.com/questions/51642660/unable-to-retrieve-map-tiles-at-high-zoom-level-i-e-zoomed-out-with-matplotli", "title": "Unable to retrieve map tiles at high zoom level (i.e. zoomed out) with Matplotlib/Cartopy/Python", "body": "<p>I am creating a mapping application with Python and Cartopy, and attempting to use open-source map tiles for backgrounds, to have more options than the default Cartopy map.</p>\n\n<p>It works perfectly for maps that are zoomed in fairly close, but when I try to get a view from a higher elevation, something fails. If I have the zoom set to 11, it works. If I set it to 12, it hangs indefinitely and gives no traceback.</p>\n\n<p>Same result with both the OSM and Stamen map servers.</p>\n\n<p>Here is a short, self-contained example (note that a line or two may be artifacts from the various ways I've tried this)</p>\n\n<pre><code>import matplotlib as mpl\nmpl.use('Agg')\nimport matplotlib.pyplot as plt\nimport cartopy.crs as ccrs\nimport cartopy.io.img_tiles as cimgt\n\n\ndef custom_background(source_point):\n\n    source_point = source_point.split(\" \")\n    source_point = (float(source_point[0]), float(source_point[1]))\n    dx = 1.5\n    dy = 1.5\n    lon_min, lon_max = source_point[0]-dx, source_point[0]+dx\n    lat_min, lat_max = source_point[1]-dy, source_point[1]+dy\n    zoom = 7\n    map_url = \"https://www.openstreetmap.org/#map={}/{}/{}\".format(zoom,source_point[0],source_point[1])\n    tile = cimgt.OSM(url=map_url)\n    tile = cimgt.StamenTerrain()\n    ax = plt.axes(projection=ccrs.PlateCarree())\n    ax.set_extent([lat_min, lat_max, lon_min, lon_max])\n    ax.add_image(tile, zoom)\n    #~ ax.add_image(tile)\n    return ax\n\ncustom_background(\"45.068466 -66.45477\")\nplt.savefig(\"tile.png\")\n</code></pre>\n\n<p>the result, with zoom = 7:</p>\n\n<p><a href=\"https://i.stack.imgur.com/q2Lt7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/q2Lt7.png\" alt=\"the result of code running for zoom = 7\"></a></p>\n\n<p>but if I were to change zoom to say, 14, the program will not complete no matter how long I allow it to run.</p>\n\n<p>The url parameter that is passed to cimgt.OSM() is optional. I get the same result with or without it. (See:  <a href=\"https://scitools.org.uk/cartopy/docs/v0.16/cartopy/io/img_tiles.html#cartopy.io.img_tiles.OSM\" rel=\"nofollow noreferrer\">https://scitools.org.uk/cartopy/docs/v0.16/cartopy/io/img_tiles.html#cartopy.io.img_tiles.OSM</a>)</p>\n\n<p>Am I missing something here? Any help would be appreciated, thank you.</p>\n"}, {"tags": ["python", "bokeh"], "comments": [{"owner": {"reputation": 29976, "user_id": 3406693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwfWQ.png?s=128&g=1", "display_name": "bigreddot", "link": "https://stackoverflow.com/users/3406693/bigreddot"}, "edited": false, "score": 1, "creation_date": 1533161254, "post_id": 51642602, "comment_id": 90250176, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/50285405/bokeh-the-widths-of-vertical-bars-doesnt-change\">Bokeh: The widths of vertical bars doesn&#39;t change</a>"}], "answers": [{"comments": [{"owner": {"reputation": 835, "user_id": 1883614, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/49edef0250e29d6404b01387314c141e?s=128&d=identicon&r=PG", "display_name": "user1883614", "link": "https://stackoverflow.com/users/1883614/user1883614"}, "edited": false, "score": 0, "creation_date": 1533166475, "post_id": 51642912, "comment_id": 90251466, "body": "Thanks, that was it!"}], "tags": [], "owner": {"reputation": 29976, "user_id": 3406693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwfWQ.png?s=128&g=1", "display_name": "bigreddot", "link": "https://stackoverflow.com/users/3406693/bigreddot"}, "is_accepted": false, "score": 1, "last_activity_date": 1533161370, "creation_date": 1533161370, "answer_id": 51642912, "question_id": 51642602, "link": "https://stackoverflow.com/questions/51642602/bokeh-bar-chart-not-showing-width-properly/51642912#51642912", "title": "Bokeh Bar Chart not showing width properly", "body": "<p>This is a duplicate of the linked question above, but in case it does not get moderated quickly (or ever), long story short: The units of a datetime axis are \"milliseconds since epoch\" so a width of 0.5 means a width of 0.5 milliseconds (on a scale of months). Hence, very narrow bars. You need to set a <em>much</em> bigger width.</p>\n"}], "owner": {"reputation": 835, "user_id": 1883614, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/49edef0250e29d6404b01387314c141e?s=128&d=identicon&r=PG", "display_name": "user1883614", "link": "https://stackoverflow.com/users/1883614/user1883614"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 537, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1533162235, "creation_date": 1533159489, "last_edit_date": 1533162235, "question_id": 51642602, "link": "https://stackoverflow.com/questions/51642602/bokeh-bar-chart-not-showing-width-properly", "title": "Bokeh Bar Chart not showing width properly", "body": "<p>This is what my x-axis looks like, it's the dataframe index:</p>\n\n<pre><code>overall_month.index.normalize().tolist() \n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>[Timestamp('2018-01-01 00:00:00', freq='MS'), Timestamp('2018-02-01 00:00:00', freq='MS'), Timestamp('2018-03-01 00:00:00', freq='MS'), Timestamp('2018-04-01 00:00:00', freq='MS'), Timestamp('2018-05-01 00:00:00', freq='MS'), Timestamp('2018-06-01 00:00:00', freq='MS'), Timestamp('2018-07-01 00:00:00', freq='MS')]\n</code></pre>\n\n<p>I've got the bar chart being generated like this:</p>\n\n<pre><code>p = figure(plot_width=800, plot_height=400, x_axis_type=\"datetime\")\np.vbar(x=overall_month.index, width=0.5, bottom=0,\n   top=[1.2, 2.5, 3.7, 1.2, 2.5, 3.7], color=\"firebrick\")\np.xaxis.formatter=DatetimeTickFormatter(years=['%Y-%m-%d'])\np.xaxis.major_label_orientation = math.pi/2\np.xgrid.grid_line_color = None\np.y_range.start = 0\nshow(p)\n</code></pre>\n\n<p>However, the bar chart lines show up as one straight line with almost 0 width, how can I fix this?</p>\n\n<p><a href=\"https://i.stack.imgur.com/5MV3R.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5MV3R.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["javascript", "python", "ajax", "uwsgi"], "comments": [{"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 0, "creation_date": 1533160090, "post_id": 51642600, "comment_id": 90249835, "body": "Your javascript code (btw, you should use javascript tag in your question, rather than python which is doing nothing here) is loading parser.py and index.py <i>again and again</i>, as you put it, because of the <code>setInterval</code>. It is absolutely unclear whether that means javascript files should be loaded again or not, because nothing related to them is included in the question."}, {"owner": {"reputation": 1, "user_id": 10167960, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mRzBC5AdTzI/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qCedoiC6PJBeNK1o78rU4nnDO3Og/mo/photo.jpg?sz=128", "display_name": "Viktor", "link": "https://stackoverflow.com/users/10167960/viktor"}, "reply_to_user": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 0, "creation_date": 1533161275, "post_id": 51642600, "comment_id": 90250181, "body": "It reloads without any delay, like 20 times in a sec. What about scripts: index.py generates html table depending on json file which is generating by parser.py"}, {"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 0, "creation_date": 1533161471, "post_id": 51642600, "comment_id": 90250237, "body": "It does not reload 20 times in a second because of any code seen here. If I were you, I&#39;d try removing parts of the code until it stopped reloading. I&#39;m sure a simple &quot;hello world&quot; page would not reload automatically."}, {"owner": {"reputation": 1, "user_id": 10167960, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mRzBC5AdTzI/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qCedoiC6PJBeNK1o78rU4nnDO3Og/mo/photo.jpg?sz=128", "display_name": "Viktor", "link": "https://stackoverflow.com/users/10167960/viktor"}, "reply_to_user": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 0, "creation_date": 1533161751, "post_id": 51642600, "comment_id": 90250320, "body": "Yes, it is not. On local server it works fine. on uWSGI this happens. Caused by ajax requests. Without them works fine. Idk, strange thing for me"}], "owner": {"reputation": 1, "user_id": 10167960, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mRzBC5AdTzI/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qCedoiC6PJBeNK1o78rU4nnDO3Og/mo/photo.jpg?sz=128", "display_name": "Viktor", "link": "https://stackoverflow.com/users/10167960/viktor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1533162248, "creation_date": 1533159461, "last_edit_date": 1533162248, "question_id": 51642600, "link": "https://stackoverflow.com/questions/51642600/continuous-scripts-reloading-on-uwsgi", "title": "Continuous scripts reloading on uWSGI", "body": "<p>Trying to solve it in 2 days in a row.\nI have this only script on my html page:</p>\n\n<pre><code>function show()\n    {\n        $.ajax({\n            url: \"index.py\",\n            cache: false,\n            contentType: \"application/x-www-form-urlencoded;charset=windows-1251\",\n            success: function(html){\n                $(\"#content\").html(html);\n            }\n        });\n    }\n    function parse()\n    {\n        $.ajax({\n            url: \"parser.py\",\n            cache: false,\n        });\n    }\n        setInterval(show(),1000);\n        setInterval(parse(),10000);\n&lt;/script&gt;\n</code></pre>\n\n<p>It's deployed on VPS with uWSGI+nginx.\nThe trouble is: on server, when sending ajax requests (index.py, parser.py) with loading the page it \u0441auses calling all js scripts (including bootstrap and jquery in &lt;head&gt;) <a href=\"https://i.stack.imgur.com/aPLc6.png\" rel=\"nofollow noreferrer\">again and again</a> without delay.\nBut on local python http cgi server it works absolutely fine.\nMay be this happens because of wsgi.py content?</p>\n\n<pre><code>def application(environ, start_response):\nstart_response('200 OK', [('Content-Type', 'text/html')])\nreturn '''%ENTIRE HTML CODE OF THE PAGE%'''\n</code></pre>\n"}, {"tags": ["python", "pandas", "aggregate"], "comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 3, "creation_date": 1533159558, "post_id": 51642556, "comment_id": 90249676, "body": "work fine on my side, python and pandas version ?"}, {"owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 1, "creation_date": 1533159578, "post_id": 51642556, "comment_id": 90249680, "body": "works fine on my side too"}, {"owner": {"reputation": 159, "user_id": 6481225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7dff520679d57c70dae77e92502aafc?s=128&d=identicon&r=PG", "display_name": "roundsquare", "link": "https://stackoverflow.com/users/6481225/roundsquare"}, "edited": false, "score": 0, "creation_date": 1533159693, "post_id": 51642556, "comment_id": 90249709, "body": "Python 3.6.3 |Anaconda custom (64-bit), pandas 0.20.3&#39;"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 2, "creation_date": 1533159704, "post_id": 51642556, "comment_id": 90249714, "body": "BTW <code>pd.crosstab(df.a,df.b)</code> I think this is better than Counter, since you are using pandas"}, {"owner": {"reputation": 159, "user_id": 6481225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7dff520679d57c70dae77e92502aafc?s=128&d=identicon&r=PG", "display_name": "roundsquare", "link": "https://stackoverflow.com/users/6481225/roundsquare"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1533159765, "post_id": 51642556, "comment_id": 90249731, "body": "@Wen that makes sense, but I&#39;m also going to be doing this for groupby with multiple columns"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 1, "creation_date": 1533160053, "post_id": 51642556, "comment_id": 90249822, "body": "@roundsquare pd.crosstab([df.a,df.a1,df.a2],df.b)"}, {"owner": {"reputation": 159, "user_id": 6481225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7dff520679d57c70dae77e92502aafc?s=128&d=identicon&r=PG", "display_name": "roundsquare", "link": "https://stackoverflow.com/users/6481225/roundsquare"}, "edited": false, "score": 0, "creation_date": 1533160345, "post_id": 51642556, "comment_id": 90249925, "body": "@Wenthansk! That works great! Still curious why the other didn&#39;t. What pandas version are you using?"}, {"owner": {"reputation": 159, "user_id": 6481225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7dff520679d57c70dae77e92502aafc?s=128&d=identicon&r=PG", "display_name": "roundsquare", "link": "https://stackoverflow.com/users/6481225/roundsquare"}, "edited": false, "score": 0, "creation_date": 1533164891, "post_id": 51642556, "comment_id": 90251125, "body": "Just upgraded my pandas to 0.23.3 and it works."}], "answers": [{"tags": [], "owner": {"reputation": 159, "user_id": 6481225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7dff520679d57c70dae77e92502aafc?s=128&d=identicon&r=PG", "display_name": "roundsquare", "link": "https://stackoverflow.com/users/6481225/roundsquare"}, "is_accepted": false, "score": 0, "last_activity_date": 1533226769, "creation_date": 1533226769, "answer_id": 51658202, "question_id": 51642556, "link": "https://stackoverflow.com/questions/51642556/why-cant-i-use-counter-in-a-pandas-aggregation/51658202#51658202", "title": "Why can&#39;t I use Counter in a pandas aggregation?", "body": "<p>Just to close the loop on this, I upgraded pandas from 0.20.3 to 0.23.3 and the above code worked.</p>\n"}], "owner": {"reputation": 159, "user_id": 6481225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7dff520679d57c70dae77e92502aafc?s=128&d=identicon&r=PG", "display_name": "roundsquare", "link": "https://stackoverflow.com/users/6481225/roundsquare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533226769, "creation_date": 1533159230, "question_id": 51642556, "link": "https://stackoverflow.com/questions/51642556/why-cant-i-use-counter-in-a-pandas-aggregation", "title": "Why can&#39;t I use Counter in a pandas aggregation?", "body": "<p>I'm trying to do an aggregation in pandas that gives the number of times each value shows up. For example, say I have this dataframe:</p>\n\n<pre><code>   a  b\n0  1  1\n1  1  1\n2  1  2\n3  2  1\n4  2  2\n5  2  2\n</code></pre>\n\n<p>My desired output is (something like):</p>\n\n<pre><code>a b\n1 Counter({1: 2, 2: 1})\n2 Counter({1: 1, 2: 2})\n</code></pre>\n\n<p>(The reason I want a counter is that in later operations, I want to add them up).</p>\n\n<p>I tried to do it like this:</p>\n\n<pre><code>df2 = df.groupby('a').agg({'b': lambda x: Counter(x)})\n</code></pre>\n\n<p>However, the results didn't come back as expected. What I got was:</p>\n\n<pre><code>a  b                                                  \n1  &lt;built-in method values of Counter object at 0x0000026A7722D780&gt;\n2  &lt;built-in method values of Counter object at 0x0000026A7722D990&gt;\n</code></pre>\n\n<p>I've tried using <code>Counter(list(x))</code> and <code>Counter(x.value_counts())</code> for my lambda function as well but got similar results.</p>\n\n<p>Is there a way I can get a Counter there?</p>\n"}, {"tags": ["python", "matplotlib"], "answers": [{"tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 0, "last_activity_date": 1533160597, "creation_date": 1533160597, "answer_id": 51642812, "question_id": 51642554, "link": "https://stackoverflow.com/questions/51642554/plot-a-cdf-from-a-frequency-table-in-python/51642812#51642812", "title": "Plot a CDF from a frequency table in Python", "body": "<p>Maybe you want to plot a bar plot with the rank on the x axis and the cdf on the y axis?</p>\n\n<pre><code>u = u\"\"\"Rank Count\nA    34\nB    1\nC    1\nD    2\nE    1\nF    4\nG    112\nH    1\"\"\"\n\nimport io\nimport pandas as pd\nimport matplotlib.pyplot as plt\n\ndf = pd.read_csv(io.StringIO(u), delim_whitespace=True)\ndf[\"Cum\"] = df.Count.cumsum()/df.Count.sum()\ndf.plot.bar(x=\"Rank\", y=\"Cum\")\n\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/gVIjO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gVIjO.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 73, "user_id": 9004517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a79ade905a8916c37ca26b355d9634e4?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/9004517/adrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "accepted_answer_id": 51642812, "answer_count": 1, "score": -1, "last_activity_date": 1533226588, "creation_date": 1533159208, "last_edit_date": 1533226588, "question_id": 51642554, "link": "https://stackoverflow.com/questions/51642554/plot-a-cdf-from-a-frequency-table-in-python", "title": "Plot a CDF from a frequency table in Python", "body": "<p>I have some frequency data:</p>\n\n<pre><code>Rank Count\nA    34\nB    1\nC    1\nD    2\nE    1\nF    4\nG    112\nH    1 \n ...\n</code></pre>\n\n<p>in a dictionary:</p>\n\n<pre><code>d = {\"A\":34,\"B\":1,\"C\":1,\"D\":2,\"E\":1,\"F\":4,\"G\":112,\"H\":1,.......}\n</code></pre>\n\n<p>The letters represent a rank from highest to lowest (A to Z), and the number of time I observed the rank in the dataset.</p>\n\n<p>How can I plot the cumulative distribution function given that I already have the frequencies of my observations in the dictionary? I want to be able to see the general ranking of the observations. For example: 50% of my observations have a rank lower than E.</p>\n\n<p>I have been searching for info about this but I always find ways to plot the CDF from the raw observations but not from the counts. </p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "button"], "comments": [{"owner": {"reputation": 331, "user_id": 8853184, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4EC7coFqYM0/AAAAAAAAAAI/AAAAAAAAAAc/AlnkWx2UGSQ/photo.jpg?sz=128", "display_name": "Conrad Selig", "link": "https://stackoverflow.com/users/8853184/conrad-selig"}, "edited": false, "score": 2, "creation_date": 1533159520, "post_id": 51642535, "comment_id": 90249663, "body": "This is a hard problem, and the solution you are creating is not one you are going to like very much. Every window will always have to be in the same place, and that&#39;s not very desirable. I HIGHLY recommend learning at least some very basic Python before you embark on this project, you&#39;ll be much happier if you do. There are plenty of free resources online!"}, {"owner": {"reputation": 1661, "user_id": 856647, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/YWbzz.jpg?s=128&g=1", "display_name": "roob", "link": "https://stackoverflow.com/users/856647/roob"}, "edited": false, "score": 1, "creation_date": 1533159718, "post_id": 51642535, "comment_id": 90249719, "body": "You may want to look into a different python package such as <code>selenium</code> or <code>mechanize</code> to do the browser automation. That way you don&#39;t have to rely on the pixel coordinates of items."}, {"owner": {"reputation": 11, "user_id": 10168034, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pnCd6avPCCg/AAAAAAAAAAI/AAAAAAAABFI/CRbvyH8rN50/photo.jpg?sz=128", "display_name": "Mortemon", "link": "https://stackoverflow.com/users/10168034/mortemon"}, "edited": false, "score": 0, "creation_date": 1533160013, "post_id": 51642535, "comment_id": 90249811, "body": "yes! I have tried various things with selenium, but didn&#39;t quite work out. Gonna try tomorrow with different solutions! I did learn variables, arrays and how they work. Also if statements with else and etc. In one day i think progress is quite remarkable!"}], "owner": {"reputation": 11, "user_id": 10168034, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pnCd6avPCCg/AAAAAAAAAAI/AAAAAAAABFI/CRbvyH8rN50/photo.jpg?sz=128", "display_name": "Mortemon", "link": "https://stackoverflow.com/users/10168034/mortemon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1533159086, "creation_date": 1533159086, "question_id": 51642535, "link": "https://stackoverflow.com/questions/51642535/python-toggle-able-function-by-a-button", "title": "python toggle-able function by a button", "body": "<p>I am messing around python, and made this simple thing that works on my pc that opens up discord logs in and messages something. I want this to run in the background and make it toggle-able by a button, all tho i have no idea how to do it since i started learning only today!</p>\n\n<p># log in as dave the goat and message dog dave the dog</p>\n\n<pre><code># positions for my icons below\n\n# 20, 137 chrome\n# 307, 48 search bar\n# 1674, 105 open discord web\n# 687, 685 login\n# 681, 517 click on email\n# 915, 578 click on the right email\n# 220, 310 click on dog\n# 654, 1034 click on message\n\nimport pyautogui\nimport time\n\npyautogui.click(20, 137) # click on chrome\n\ntime.sleep(0.7)\n\npyautogui.click(307, 48) # click on search bar\n\npyautogui.typewrite(\"discord.com\")\npyautogui.typewrite([\"enter\"])\n\ntime.sleep(0.5)\n\npyautogui.click(1674, 105)\n\ntime.sleep(0.7)\n\npyautogui.click(687, 685)\n\ntime.sleep(3.9)\n\npyautogui.click(220, 310)\n\npyautogui.click(654, 1034)\n\npyautogui.typewrite(\"Dave the goat says hello\")\npyautogui.typewrite([\"enter\"])\n</code></pre>\n"}, {"tags": ["python", "turi-create"], "owner": {"reputation": 657, "user_id": 6336453, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-eX1Wa9DH930/AAAAAAAAAAI/AAAAAAAAAD8/zSpZmhlAIgE/photo.jpg?sz=128", "display_name": "jscul", "link": "https://stackoverflow.com/users/6336453/jscul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1533159486, "creation_date": 1533158494, "last_edit_date": 1533159486, "question_id": 51642429, "link": "https://stackoverflow.com/questions/51642429/is-there-a-way-to-prevent-python-turicreate-from-using-subdirectories-as-trainin", "title": "Is there a way to prevent python turicreate from using subdirectories as training data?", "body": "<p>I'm getting my training data using...</p>\n\n<p><code>turicreate.image_analysis.load_images('TrainingData', with_path=True)</code></p>\n\n<p><em>TrainingData/</em> has all my training data using the folder names as labels...</p>\n\n<p><code>data['label'] = data['path'].apply(lambda path: os.path.dirname(path.split('/')[-1]))</code></p>\n\n<p>That gets the last directory... the problem is that turicreate is going deeper than I'm expecting it to.</p>\n\n<p>The directory structure looks like this...</p>\n\n<ul>\n<li><strong>TrainingData/</strong>\n\n<ul>\n<li><strong>Model1/</strong>\n\n<ul>\n<li><strong>ADirectory/</strong> // &lt;== here's the problem (I want to ignore this directory)\n\n<ul>\n<li>img1_s.jpg</li>\n</ul></li>\n<li>img1.jpg</li>\n<li>img2.jpg</li>\n</ul></li>\n<li><strong>Model2/</strong></li>\n</ul></li>\n<li>runTuriCreate.py</li>\n</ul>\n\n<p>At the moment turicreate is going into TrainingData which is what I'd expect... but it's using all subdirectories as well as the directories I want to model.</p>\n\n<p>Is there a way to do this?</p>\n\n<p><strong>EDIT: I found that you can add recursive=False to the load_images function call. The problem with this is that I AM using recursion... just recursion with one depth level strictly.</strong></p>\n"}, {"tags": ["python", "python-3.x", "web-scraping", "lxml"], "answers": [{"tags": [], "owner": {"reputation": 9542, "user_id": 8068625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4spqa.png?s=128&g=1", "display_name": "Henry Woody", "link": "https://stackoverflow.com/users/8068625/henry-woody"}, "is_accepted": false, "score": 0, "last_activity_date": 1533159841, "last_edit_date": 1533159841, "creation_date": 1533158977, "answer_id": 51642515, "question_id": 51642426, "link": "https://stackoverflow.com/questions/51642426/how-to-extend-the-scraping-done-to-more-than-1st-page-using-python/51642515#51642515", "title": "How to extend the scraping done to more than 1st page using python", "body": "<p>You need to grab the link to the next page from the current page and then update the url that you use to scrape from.</p>\n\n<p>Here's a rough example of how that could work:</p>\n\n<pre><code>def parse(zipcode, url, filter=None):\n    # get results how you are\n    # get url from next page button\n    return results, next_page_url\n\nfull_results = []\nresults, next_page_url = parse(zipcode, initial_page_url, filter=filter)\n\nfull_results += results\n\nwhile (len(results) &gt;= 25 and next_page_url):\n    results, next_page_url = parse(zipcode, next_page_url, filter=filter)\n    full_results += results\n</code></pre>\n\n<p>So in this example <code>parse</code> takes the url to scrape from as a second positional argument and returns the results and the url for the next page to scrape.</p>\n\n<p>This will just keep scraping as long as there are the max results (25) on the page and a url to the next page is returned.</p>\n"}], "owner": {"reputation": 1, "user_id": 9905778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48429e61cb8cc03a504eebc764fec61d?s=128&d=identicon&r=PG&f=1", "display_name": "Vibhore Agarwal", "link": "https://stackoverflow.com/users/9905778/vibhore-agarwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 209, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1533159841, "creation_date": 1533158476, "question_id": 51642426, "link": "https://stackoverflow.com/questions/51642426/how-to-extend-the-scraping-done-to-more-than-1st-page-using-python", "title": "How to extend the scraping done to more than 1st page using python", "body": "<p>Hi I was going through a Python code (pasted below). The code is working fine for scraping the 1st page results (25 listing per page). However, I would want to extend its usability to scrape results from atleast 10 more pages</p>\n\n<p>For example I want to generate results for zip code - 98021 which has 80 listings in total (until page 4). However, when I run the code below using <code>python zillow.py 980021 newest</code>, it displays only 25 listings</p>\n\n<p>Since I am a newbie in python I request you to please help me out with this objective.</p>\n\n<pre><code>from lxml import html\nimport requests\nimport unicodecsv as csv\nimport argparse\n\ndef parse(zipcode,filter=None):\n\nif filter==\"newest\":\n    url = \"https://www.zillow.com/homes/for_sale/{0}/0_singlestory/days_sort\".format(zipcode)\nelif filter == \"cheapest\":\n    url = \"https://www.zillow.com/homes/for_sale/{0}/0_singlestory/pricea_sort/\".format(zipcode)\nelse:\n    url = \"https://www.zillow.com/homes/for_sale/{0}_rb/?fromHomePage=true&amp;shouldFireSellPageImplicitClaimGA=false&amp;fromHomePageTab=buy\".format(zipcode)\n\nfor i in range(10):\n    # try:\n    headers= {\n                'accept':'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8',\n                'accept-encoding':'gzip, deflate, sdch, br',\n                'accept-language':'en-GB,en;q=0.8,en-US;q=0.6,ml;q=0.4',\n                'cache-control':'max-age=0',\n                'upgrade-insecure-requests':'1',\n                'user-agent':'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36'\n    }\n    response = requests.get(url,headers=headers)\n    print(response.status_code)\n    parser = html.fromstring(response.text)\n    search_results = parser.xpath(\"//div[@id='search-results']//article\")\n    properties_list = []\n\n    for properties in search_results:\n        raw_address = properties.xpath(\".//span[@itemprop='address']//span[@itemprop='streetAddress']//text()\")\n        raw_city = properties.xpath(\".//span[@itemprop='address']//span[@itemprop='addressLocality']//text()\")\n        raw_state= properties.xpath(\".//span[@itemprop='address']//span[@itemprop='addressRegion']//text()\")\n        raw_postal_code= properties.xpath(\".//span[@itemprop='address']//span[@itemprop='postalCode']//text()\")\n        raw_price = properties.xpath(\".//span[@class='zsg-photo-card-price']//text()\")\n        raw_info = properties.xpath(\".//span[@class='zsg-photo-card-info']//text()\")\n        raw_broker_name = properties.xpath(\".//span[@class='zsg-photo-card-broker-name']//text()\")\n        url = properties.xpath(\".//a[contains(@class,'overlay-link')]/@href\")\n        raw_title = properties.xpath(\".//h4//text()\")\n\n        address = ' '.join(' '.join(raw_address).split()) if raw_address else None\n        city = ''.join(raw_city).strip() if raw_city else None\n        state = ''.join(raw_state).strip() if raw_state else None\n        postal_code = ''.join(raw_postal_code).strip() if raw_postal_code else None\n        price = ''.join(raw_price).strip() if raw_price else None\n        info = ' '.join(' '.join(raw_info).split()).replace(u\"\\xb7\",',')\n        broker = ''.join(raw_broker_name).strip() if raw_broker_name else None\n        title = ''.join(raw_title) if raw_title else None\n        property_url = \"https://www.zillow.com\"+url[0] if url else None \n        is_forsale = properties.xpath('.//span[@class=\"zsg-icon-for-sale\"]')\n        properties = {\n                        'address':address,\n                        'city':city,\n                        'state':state,\n                        'postal_code':postal_code,\n                        'price':price,\n                        'facts and features':info,\n                        'real estate provider':broker,\n                        'url':property_url,\n                        'title':title\n        }\n        if is_forsale:\n            properties_list.append(properties)\n    return properties_list\n    # except:\n    #   print (\"Failed to process the page\",url)\n\nif __name__==\"__main__\":\nargparser = argparse.ArgumentParser(formatter_class=argparse.RawTextHelpFormatter)\nargparser.add_argument('zipcode',help = '')\nsortorder_help = \"\"\"\navailable sort orders are :\nnewest : Latest property details,\ncheapest : Properties with cheapest price\n\"\"\"\nargparser.add_argument('sort',nargs='?',help = sortorder_help,default ='Homes For You')\nargs = argparser.parse_args()\nzipcode = args.zipcode\nsort = args.sort\nprint (\"Fetching data for %s\"%(zipcode))\nscraped_data = parse(zipcode,sort)\nprint (\"Writing data to output file\")\nwith open(\"properties-%s.csv\"%(zipcode),'wb')as csvfile:\n    fieldnames = ['title','address','city','state','postal_code','price','facts and features','real estate provider','url']\n    writer = csv.DictWriter(csvfile, fieldnames=fieldnames)\n    writer.writeheader()\n    for row in  scraped_data:\n        writer.writerow(row)\n</code></pre>\n"}, {"tags": ["python", "generator", "send"], "answers": [{"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1533158601, "post_id": 51642433, "comment_id": 90249355, "body": "@Jean-Fran&#231;oisFabre: Yes, which is also the same with a genexp or a generator created through a generator function. As mentioned in the question, the first <code>send</code> argument has to be <code>None</code>."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1533158629, "post_id": 51642433, "comment_id": 90249363, "body": "yup, just noticed that!"}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1533159001, "last_edit_date": 1533159001, "creation_date": 1533158520, "answer_id": 51642433, "question_id": 51642396, "link": "https://stackoverflow.com/questions/51642396/what-happens-if-you-send-to-a-generator-expression-in-python/51642433#51642433", "title": "What happens if you send() to a generator *expression* in Python?", "body": "<p>Same thing as if you <code>send</code> to the equivalent generator created with a generator function:</p>\n\n<pre><code>def genfunc(outer_iterable):\n    for x in outer_iterable:\n        yield x*x\n\nge = genfunc([1, 2, 3])\n</code></pre>\n\n<p>which is to say, the <code>send</code> argument gets discarded.</p>\n\n<p>We can disassemble the bytecode for further confirmation:</p>\n\n<pre><code>import dis\n\nge=(x*x for x in [1,2,3])\n\nprint('Genexp:')\ndis.dis(ge)\n\ndef genfunc(outer_iterable):\n    for x in outer_iterable:\n        yield x*x\n\nge = genfunc([1, 2, 3])\n\nprint()\nprint('Generator function:')\ndis.dis(ge)\n</code></pre>\n\n<p><a href=\"https://ideone.com/B8ZLF2\" rel=\"nofollow noreferrer\">Output</a>:</p>\n\n<pre><code>Genexp:\n  3           0 LOAD_FAST                0 (.0)\n        &gt;&gt;    3 FOR_ITER                15 (to 21)\n              6 STORE_FAST               1 (x)\n              9 LOAD_FAST                1 (x)\n             12 LOAD_FAST                1 (x)\n             15 BINARY_MULTIPLY\n             16 YIELD_VALUE\n             17 POP_TOP\n             18 JUMP_ABSOLUTE            3\n        &gt;&gt;   21 LOAD_CONST               0 (None)\n             24 RETURN_VALUE\n\nGenerator function:\n  9           0 SETUP_LOOP              23 (to 26)\n              3 LOAD_FAST                0 (outer_iterable)\n              6 GET_ITER\n        &gt;&gt;    7 FOR_ITER                15 (to 25)\n             10 STORE_FAST               1 (x)\n\n 10          13 LOAD_FAST                1 (x)\n             16 LOAD_FAST                1 (x)\n             19 BINARY_MULTIPLY\n             20 YIELD_VALUE\n             21 POP_TOP\n             22 JUMP_ABSOLUTE            7\n        &gt;&gt;   25 POP_BLOCK\n        &gt;&gt;   26 LOAD_CONST               0 (None)\n             29 RETURN_VALUE\n</code></pre>\n\n<p>The genexp and the generator created through the generator function have very similar disassemblies, and in both, the <code>YIELD_VALUE</code> is immediately followed by a <code>POP_TOP</code> that discards any value sent in from <code>send</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 5457936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/284f7870018b8160d416f04251bb1cc5?s=128&d=identicon&r=PG&f=1", "display_name": "Jerzy Karczmarczuk", "link": "https://stackoverflow.com/users/5457936/jerzy-karczmarczuk"}, "is_accepted": false, "score": 0, "last_activity_date": 1533168690, "creation_date": 1533168690, "answer_id": 51643862, "question_id": 51642396, "link": "https://stackoverflow.com/questions/51642396/what-happens-if-you-send-to-a-generator-expression-in-python/51643862#51643862", "title": "What happens if you send() to a generator *expression* in Python?", "body": "<p>Thank you, all. So yes, the arg of send is discarded, but the fact that send is <em>accepted</em> seems to be an anomaly. </p>\n\n<p>Another, related bug has been already commented here (page 32139885), the yield expression should be forbidden in genexps, but it isn't. The form <code>ge=((yield x*x) for x in [1,2,3])</code> is accepted, and <code>.send()</code> works.</p>\n\n<p>The answer returned by <code>send</code> is then a mixture of elements in the internal iterable, and the args of <code>send</code>... If I am not mistaken, GvR wrote that in Python 3.8 this (the yield expression) will be treated as an error, and in 3.7 it should signal that it is deprecated. (People agreed that it was confusing.)</p>\n\n<p>But I tested that in Python 3.7 (Anaconda, Windows 64), and I got no deprecation warning. Anyway, this seems to be a real bug, not a feature to be deprecated. I believe that for the moment there is nothing more to say...</p>\n\n<p>JK</p>\n"}], "owner": {"reputation": 81, "user_id": 5457936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/284f7870018b8160d416f04251bb1cc5?s=128&d=identicon&r=PG&f=1", "display_name": "Jerzy Karczmarczuk", "link": "https://stackoverflow.com/users/5457936/jerzy-karczmarczuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1533168690, "creation_date": 1533158315, "last_edit_date": 1533158603, "question_id": 51642396, "link": "https://stackoverflow.com/questions/51642396/what-happens-if-you-send-to-a-generator-expression-in-python", "title": "What happens if you send() to a generator *expression* in Python?", "body": "<p>I was surprised to find that, say, \n<code>ge=(x*x for x in [1,2,3])</code>\naccepts the <code>.send</code> method. The argument of the first call must be <code>None</code>, as with any other generator , but the behaviour of further calls, say, <code>ans=ge.send(99)</code> seems identical to <code>ans=next(ge)</code>. </p>\n\n<p>Where goes my 99? There are no yield expressions within ge, nothing to be assigned. Is the value injected simply discarded (as I suspect), or there is some Mystery involved?</p>\n\n<p>Has anybody seen that?</p>\n"}, {"tags": ["python", "matplotlib", "pip"], "owner": {"reputation": 1, "user_id": 10167906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/205cbd5db9f27c7724ff270b39836cee?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Trockel", "link": "https://stackoverflow.com/users/10167906/josh-trockel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1602, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1534964414, "creation_date": 1533158071, "last_edit_date": 1534964414, "question_id": 51642348, "link": "https://stackoverflow.com/questions/51642348/pip-installation-of-matplotlib-could-not-install-packages-due-to-an-environment", "title": "pip installation of matplotlib &quot;Could not install packages due to an EnvironmentError: [Errno2] No such file or directory:&quot;", "body": "<p>I'm trying to install multiple modules onto a windows computer. I just installed visual studios community with 'python development' and 'desktop development with C++' enabled as well as python3. There's pretty tight security on the computers so I had to write a script to install modules. Below is my code (I inserted input statements for debugging, also for clarity on error message):</p>\n\n<pre><code>import sys\ntry: from pip._internal import main\nexcept: from pip import main\n\n\ndef install(package, version):\n\n    ## required syntax for these windows due to some security options\n    installTrusted = ['install','--trusted-host=pypi.python.org','--trusted-host=files.pythonhosted.org','--trusted-host=pypi.org']\n\n    ## add package to syntax\n    installTrusted.extend(package)\n\n    try:\n        ## install package\n        main(installTrusted)\n\n    except Exception as e:\n\n        ## let the user know which module could not be downloaded\n        print(e)\n\n        if version==3:\n            input('could not import ' + package[0])\n        else:\n            raw_input('could not import ' + package[0])\n\nif __name__ == \"__main__\":\n\n    ## check which version of python is being used\n    pythonVersion = sys.version_info[0]\n\n    ## install packages\n    install(['pip','--upgrade'], pythonVersion)\n    install(['setuptools', '--upgrade'],pythonVersion)\n    install(['pandas'], pythonVersion)\n    install(['numpy'], pythonVersion)\n\n    ## ---------------------------------------------------------\n    ## this the section displayed on picture of error message\n    if pythonVersion == 3:\n        input('installing matplotlib')\n    else:\n        raw_input('installing matplotlib')\n\n    install(['matplotlib'], pythonVersion)\n\n    if pythonVersion == 3:\n        input('done installing')\n    else:\n        raw_input('done installing')\n\n    ## --------------------------------------------------------\n\n    install(['python-docx'], pythonVersion)\n    install(['python-dateutil'], pythonVersion)\n    install(['pathlib'], pythonVersion)\n    install(['statsmodels'], pythonVersion)\n    install(['scipy'], pythonVersion)\n    install(['tqdm'], pythonVersion)\n    install(['pillow'],pythonVersion)\n    install(['python-resize-image'],pythonVersion)\n    install(['shutil'],pythonVersion)\n    install(['textwrap'],pythonVersion)\n</code></pre>\n\n<p>I've used this same script on a few different computers and it has worked, but for some reason on one computer it is getting this error. I typically use MacOS so Windows is a bit foreign to me. Attached below is a picture of the exact error message.</p>\n\n<p><a href=\"https://i.stack.imgur.com/NsJNu.png\" rel=\"nofollow noreferrer\">This is the error message I get when running my script.</a></p>\n\n<p>Any help pointing me in the right direction would be much appreciated!</p>\n"}, {"tags": ["python", "matlab", "opengl", "geometry", "rotational-matrices"], "comments": [{"owner": {"reputation": 13335, "user_id": 8204776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6qyq.jpg?s=128&g=1", "display_name": "meowgoesthedog", "link": "https://stackoverflow.com/users/8204776/meowgoesthedog"}, "edited": false, "score": 0, "creation_date": 1533158216, "post_id": 51642339, "comment_id": 90249217, "body": "There are countless many readily available code samples for this on the web; even the formulas themselves are easy to convert to code without having to understand how they work."}, {"owner": {"reputation": 65, "user_id": 9570591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e2b9ac7b43cfd054da719cec37abba6?s=128&d=identicon&r=PG&f=1", "display_name": "jcampos", "link": "https://stackoverflow.com/users/9570591/jcampos"}, "reply_to_user": {"reputation": 13335, "user_id": 8204776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6qyq.jpg?s=128&g=1", "display_name": "meowgoesthedog", "link": "https://stackoverflow.com/users/8204776/meowgoesthedog"}, "edited": false, "score": 0, "creation_date": 1533158562, "post_id": 51642339, "comment_id": 90249337, "body": "@meowgoesthedog could you point me to an example? I&#39;ve been struggling to find this on the web... Probably I am not using the right keywords."}, {"owner": {"reputation": 13335, "user_id": 8204776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6qyq.jpg?s=128&g=1", "display_name": "meowgoesthedog", "link": "https://stackoverflow.com/users/8204776/meowgoesthedog"}, "edited": false, "score": 0, "creation_date": 1533160515, "post_id": 51642339, "comment_id": 90249978, "body": "A formulaic example <a href=\"https://math.stackexchange.com/questions/180418/calculate-rotation-matrix-to-align-vector-a-to-vector-b-in-3d\">here</a> - called <i>Rodrigues&#39; rotation formula</i>. Another one <a href=\"http://immersivemath.com/forum/question/rotation-matrix-from-one-vector-to-another/\" rel=\"nofollow noreferrer\">here</a>. MATLAB code sample <a href=\"https://gist.github.com/peteristhegreat/3b76d5169d7b9fc1e333\" rel=\"nofollow noreferrer\">here</a>. Alternative: first obtain the <a href=\"https://stackoverflow.com/questions/21828801/how-to-find-correct-rotation-from-one-vector-to-another\"><i>quaternion</i></a> for this rotation, then convert to a matrix."}, {"owner": {"reputation": 13335, "user_id": 8204776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6qyq.jpg?s=128&g=1", "display_name": "meowgoesthedog", "link": "https://stackoverflow.com/users/8204776/meowgoesthedog"}, "edited": false, "score": 0, "creation_date": 1533160588, "post_id": 51642339, "comment_id": 90250001, "body": "However it would be better for you to directly state your desired final problem, since there may be a more efficient specific solution."}, {"owner": {"reputation": 11476, "user_id": 2790047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c5a7631a67903295da25dabb94e1f51b?s=128&d=identicon&r=PG", "display_name": "jodag", "link": "https://stackoverflow.com/users/2790047/jodag"}, "edited": false, "score": 0, "creation_date": 1533171556, "post_id": 51642339, "comment_id": 90252409, "body": "&quot;I want to obtain body joint angles from 3D points in the camera coordinate system&quot;. Wouldn&#39;t just projecting the 3D points onto the camera plane then taking the arccos of the inner product of the two unit vectors do this? I&#39;m not sure what the purpose of finding a rotation matrix here is."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1533193248, "post_id": 51642339, "comment_id": 90258355, "body": "I really don&#39;t understand your question. In the first sentence, you basically say, that <code>RM&#183;S = T</code>, and you want to find <code>RM</code>. So applying <code>RM</code> to <code>S</code> gives <code>T</code>. If you have stopped here, I would have given an answer. But afterwards, you introduce <code>D</code>, and <code>T&#39;</code>, what are these? Basically, you use 4 vectors (<code>S</code>, <code>T</code>, <code>D</code>, <code>T&#39;</code>), and it is not clear how these relate to each other. Can you formulate it mathematically? Btw, how can <code>RM&#183;D</code> be a dot product? Dot product is defined between vectors, and result in a scalar."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 9570591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e2b9ac7b43cfd054da719cec37abba6?s=128&d=identicon&r=PG&f=1", "display_name": "jcampos", "link": "https://stackoverflow.com/users/9570591/jcampos"}, "edited": false, "score": 0, "creation_date": 1533505938, "post_id": 51648789, "comment_id": 90358509, "body": "thanks a lot for pointing me to 4x4 homogenous transform matrices and your clear explanation. From your explanation if p equals to my start vector (S), then p&#39; should be my target vector (T) is that correct?"}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "reply_to_user": {"reputation": 65, "user_id": 9570591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e2b9ac7b43cfd054da719cec37abba6?s=128&d=identicon&r=PG&f=1", "display_name": "jcampos", "link": "https://stackoverflow.com/users/9570591/jcampos"}, "edited": false, "score": 0, "creation_date": 1533509024, "post_id": 51648789, "comment_id": 90359055, "body": "@jcampos yes ... if <code>p=(x,y,z,0)</code> than the <code>p,p&#39;</code> are handled as vectors and if <code>p=(x,y,z,1)</code> than they are handled as points ...."}, {"owner": {"reputation": 65, "user_id": 9570591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e2b9ac7b43cfd054da719cec37abba6?s=128&d=identicon&r=PG&f=1", "display_name": "jcampos", "link": "https://stackoverflow.com/users/9570591/jcampos"}, "edited": false, "score": 1, "creation_date": 1533526119, "post_id": 51648789, "comment_id": 90361663, "body": "<code>@Spektre</code> am I not being able to get there. So if I have <code>S=[4.10, -9.44, 0.54]</code> and <code>T=[1.40, -9.08, 4.10]</code> my matrix <code>A</code>, according to your explanation will be <code>A=[[-0.76  0.40 -0.51  0.56] [-0.36 -0.92 -0.18 -0.80]  [-0.54  0.05  0.84  0.22]  [ 0  0  0  1 ]]</code> and <code>B=[[-0.76  0.14 -0.64  0.56]  [-0.36 -0.90  0.23 -0.80]  [-0.54 0.41 0.74  0.220]  [ 0 0 0 1]]</code>, where O = [1.38, -1.97, 0.54].  When I compute <code>B*Inverse(A)*S</code> the output is not T ([ 1.69 -9.33 3.84 1]). What am I doing wrong? I am using Python and computing the inverse with the function <code>np.linalg.inv()</code>."}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "reply_to_user": {"reputation": 65, "user_id": 9570591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e2b9ac7b43cfd054da719cec37abba6?s=128&d=identicon&r=PG&f=1", "display_name": "jcampos", "link": "https://stackoverflow.com/users/9570591/jcampos"}, "edited": false, "score": 0, "creation_date": 1533536968, "post_id": 51648789, "comment_id": 90364456, "body": "@jcampos +1 for Good catch I got a mistake (reversed order in the <code>M</code> computation) I repaired the Answer and also added C++ example with results so you can compare ... Beware I amusing unit <code>S,T</code> as you can not expect that rotation will change also vector length. Also I used <code>O=(0.0,0.0,0.0)</code> as you did not specified any."}], "tags": [], "owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "is_accepted": true, "score": 3, "last_activity_date": 1533541716, "last_edit_date": 1533541716, "creation_date": 1533197857, "answer_id": 51648789, "question_id": 51642339, "link": "https://stackoverflow.com/questions/51642339/rotation-and-direction-of-a-vector-in-3d-space-inverse-order/51648789#51648789", "title": "Rotation and direction of a vector in 3D space - Inverse Order", "body": "<p>In order to make this work you also need the center of rotation (point that stays the same after rotation)... Now we need two transform matrices one representing coordinate system before and one after the transform. </p>\n\n<p>To construct your 3D transform matrix you need 3 perpendicular basis vectors and origin position see:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/a/28084380/2521214\">Understanding 4x4 homogenous transform matrices</a></li>\n</ul>\n\n<p>now rotation axis will be one of the basis vectors and we can use <code>S,T</code> as second one so the third we can compute with cross product and the origin will be the center of rotation:</p>\n\n<pre><code>X = cross(S,T);                      // rotation axis\nX /= |X|;                            // unit vector\nY = S;                               // start vector\nY /= |Y|;                            // unit vector\nZ = cross(X,Y);                      // Z perpendicular to X,Y\nZ /= |Z|;                            // unit vector\nO = center_of_rotation;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/13ZaU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/13ZaU.png\" alt=\"overview\"></a></p>\n\n<p>So construct 4x4 transform matrix <code>A</code> from those. And do the same for <code>B</code> but use <code>T</code> instead of <code>S</code>. Now we want to compute the difference transform so if <code>p=(x,y,z,1)</code> is any point to transform then:</p>\n\n<pre><code>p' = Inverse(A)*p \np' = B*p'         \n</code></pre>\n\n<p>So your transform matrix <code>M</code> is:</p>\n\n<pre><code>M = Inverse(A)*B;\n</code></pre>\n\n<p>Beware this will work with standard <strong>OpenGL</strong> conventions if you use different one (multiplication order, matrix orientation, etc) the equation might change.</p>\n\n<p>You can also use <a href=\"https://stackoverflow.com/a/42293434/2521214\">full pseudo inverse matrix</a> to compute the <code>Inverse(A)</code> more effectively and accurately.</p>\n\n<p>As you can see you do not need any goniometrics nor angle to do this (vector math is nice in this)</p>\n\n<p><strong>[Edit1] C++ example</strong></p>\n\n<p>Its using VCL (AnsiString and mm_log which you can ignore) and my vector math (used functions are in the first link).</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>//---------------------------------------------------------------------------\nAnsiString matrix_prn(double *a)\n    {\n    int i; AnsiString s;\n    for (s =\"(\",i=0;i&lt;16;i+=4) { if (a[i]&gt;=0.0) s+=\" \"; s+=AnsiString().sprintf(\"%2.3lf,\",a[i]); } s[s.Length()]=')'; s+=\"\\r\\n\";\n    for (s+=\"(\",i=1;i&lt;16;i+=4) { if (a[i]&gt;=0.0) s+=\" \"; s+=AnsiString().sprintf(\"%2.3lf,\",a[i]); } s[s.Length()]=')'; s+=\"\\r\\n\";\n    for (s+=\"(\",i=2;i&lt;16;i+=4) { if (a[i]&gt;=0.0) s+=\" \"; s+=AnsiString().sprintf(\"%2.3lf,\",a[i]); } s[s.Length()]=')'; s+=\"\\r\\n\";\n    for (s+=\"(\",i=3;i&lt;16;i+=4) { if (a[i]&gt;=0.0) s+=\" \"; s+=AnsiString().sprintf(\"%2.3lf,\",a[i]); } s[s.Length()]=')';\n    return s;\n    }\n//---------------------------------------------------------------------------\nAnsiString vector_prn(double *a)\n    {\n    int i; AnsiString s;\n    for (s =\"(\",i=0;i&lt;3;i++) { if (a[i]&gt;=0.0) s+=\" \"; s+=AnsiString().sprintf(\"%2.3lf,\",a[i]); } s[s.Length()]=')';\n    return s;\n    }\n//---------------------------------------------------------------------------\n__fastcall TForm1::TForm1(TComponent* Owner):TForm(Owner)\n    {\n    int i;\n    double O[3]={0.00, 0.00,0.00};  // center ofrotation\n    double S[3]={4.10,-9.44,0.54};  // start vector\n    double T[3]={1.40,-9.08,4.10};  // end vector\n    double A[16],_A[16],B[16],M[16],X[3],Y[3],Z[3];\n\n    // A\n    vector_mul(X,S,T);  // rotation axis\n    vector_one(X,X);    // unit vector\n    vector_one(Y,S);    // unit start vector\n    vector_mul(Z,X,Y);  // Z perpendicular to X,Y\n    vector_one(Z,Z);    // unit vector\n    for (i=0;i&lt;3;i++)\n        {\n        A[ 0+i]=X[i];\n        A[ 4+i]=Y[i];\n        A[ 8+i]=Z[i];\n        A[12+i]=O[i];\n        A[(i&lt;&lt;2)+3]=0.0;\n        } A[15]=1.0;\n    // B\n    vector_one(Y,T);    // unit end vector\n    vector_mul(Z,X,Y);  // Z perpendicular to X,Y\n    vector_one(Z,Z);    // unit vector\n    for (i=0;i&lt;3;i++)\n        {\n        B[ 0+i]=X[i];\n        B[ 4+i]=Y[i];\n        B[ 8+i]=Z[i];\n        B[12+i]=O[i];\n        B[(i&lt;&lt;2)+3]=0.0;\n        } B[15]=1.0;\n    // M = B*Inverse(A)\n    matrix_inv(_A,A);\n    matrix_mul(M,_A,B);\n\n    mm_log-&gt;Lines-&gt;Add(\"A\");\n    mm_log-&gt;Lines-&gt;Add(matrix_prn(A));\n    mm_log-&gt;Lines-&gt;Add(\"B\");\n    mm_log-&gt;Lines-&gt;Add(matrix_prn(B));\n    mm_log-&gt;Lines-&gt;Add(\"M\");\n    mm_log-&gt;Lines-&gt;Add(matrix_prn(M));\n    mm_log-&gt;Lines-&gt;Add(\"\");\n\n    vector_one(S,S);    // unit start vector\n    vector_one(T,T);    // unit end vector\n    mm_log-&gt;Lines-&gt;Add(\"S = \"+vector_prn(S));\n    matrix_mul_vector(X,M,S);\n    mm_log-&gt;Lines-&gt;Add(\"X = \"+vector_prn(X));\n    mm_log-&gt;Lines-&gt;Add(\"T = \"+vector_prn(T));\n    }\n//-------------------------------------------------------------------------\n</code></pre>\n\n<p>Here the result:</p>\n\n<pre><code>A\n(-0.760, 0.398,-0.514, 0.000)\n(-0.361,-0.916,-0.175, 0.000)\n(-0.540, 0.052, 0.840, 0.000)\n( 0.000, 0.000, 0.000, 1.000)\nB\n(-0.760, 0.139,-0.635, 0.000)\n(-0.361,-0.903, 0.235, 0.000)\n(-0.540, 0.408, 0.736, 0.000)\n( 0.000, 0.000, 0.000, 1.000)\nM\n( 0.959, 0.258,-0.115, 0.000)\n(-0.205, 0.916, 0.345, 0.000)\n( 0.194,-0.307, 0.932, 0.000)\n( 0.000, 0.000, 0.000, 1.000)\n\nS = ( 0.398,-0.916, 0.052)\nX = ( 0.139,-0.903, 0.408) // X = M * S\nT = ( 0.139,-0.903, 0.408)\n</code></pre>\n\n<p>As you can see if I transform unit <code>S</code> by <code>M</code> I got the unit <code>T</code> vector. PS. my <code>matrix_mul_vector</code> and <code>vector_mul</code> assumes <code>w=1.0</code> but as <code>O=(0.0,0.0,0.0)</code> the vectors and points are the same.</p>\n"}], "owner": {"reputation": 65, "user_id": 9570591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e2b9ac7b43cfd054da719cec37abba6?s=128&d=identicon&r=PG&f=1", "display_name": "jcampos", "link": "https://stackoverflow.com/users/9570591/jcampos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1515, "favorite_count": 0, "accepted_answer_id": 51648789, "answer_count": 1, "score": 2, "last_activity_date": 1533541716, "creation_date": 1533157982, "last_edit_date": 1533220456, "question_id": 51642339, "link": "https://stackoverflow.com/questions/51642339/rotation-and-direction-of-a-vector-in-3d-space-inverse-order", "title": "Rotation and direction of a vector in 3D space - Inverse Order", "body": "<p>I have two vectors in 3D-space, <code>S</code> (Start) and <code>T</code> (Target), and I want to find the Rotation Matrix (RM) that allows such transformation.</p>\n\n<p>I know that by computing the <strong>cross product</strong> <code>S \u00d7 T</code> I get the rotation axis. The angle between <code>S</code> and <code>T</code> is given by <code>tan\u207b\u00b9(||S \u00d7 T||, S\u00b7T)</code>, where <code>S\u00b7T</code> is the <strong>dot product</strong> between S and T.</p>\n\n<p>This gives me the rotation vector <code>rotvec = [S x T; angle]</code> (the cross product is normalized). Then by using function  <a href=\"https://www.mathworks.com/help/sl3d/vrrotvec2mat.html\" rel=\"nofollow noreferrer\">vrrotvec2mat</a> (in MATLAB) or <a href=\"https://matthew-brett.github.io/transforms3d/reference/transforms3d.axangles.html\" rel=\"nofollow noreferrer\">transforms3d.axangles.axangle2mat</a> (in Python) I can obtain the rotation matrix that corresponds to the transformation from <code>S</code> to <code>T</code>.</p>\n\n<p>In my application <code>T</code> is given by the <strong>dot product</strong> <code>RM\u00b7D</code>, where is <code>D</code> is a <code>3x1</code> vector. <strong><em>My goal</strong> is to find RM</em>. I know <code>S</code>, <code>T</code> and <code>D</code>, but I am having trouble to understand the math behind this.</p>\n\n<p>In practice I want to find a RM between <code>S</code> and <code>T'</code>, where <code>T'</code> is the target vector before <code>D</code> (the direction) has been applied.</p>\n\n<p><em>A little more context</em>:  I want to obtain body joint angles from 3D points in the camera coordinate system.</p>\n"}, {"tags": ["python", "arrays", "list", "numpy"], "comments": [{"owner": {"reputation": 1663, "user_id": 6321559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sEAjx.png?s=128&g=1", "display_name": "it&#39;s-yer-boy-chet", "link": "https://stackoverflow.com/users/6321559/its-yer-boy-chet"}, "edited": false, "score": 4, "creation_date": 1533158283, "post_id": 51642321, "comment_id": 90249242, "body": "Is there a reason you don&#39;t want to use pandas?   This is a simple <code>groupby</code> in pandas, but in numpy you could iterate over the keys, index, and then sum."}], "answers": [{"comments": [{"owner": {"reputation": 441, "user_id": 1499769, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/m2Ccg.jpg?s=128&g=1", "display_name": "Haddock-san", "link": "https://stackoverflow.com/users/1499769/haddock-san"}, "edited": false, "score": 0, "creation_date": 1533214550, "post_id": 51642443, "comment_id": 90271707, "body": "Thanks for the answer, Chet! I see your code works, but when I try to translate it to my script I get a &#39;could not convert string to float&#39; error for the names. Not quite sure why it&#39;s trying to convert the names into numbers.  I&#39;m loading my data with: <code>names, values = np.loadtxt(&#39;data.txt&#39;, delimiter=&#39;,&#39;, unpack=True, dtype=&#39;str&#39;</code>"}, {"owner": {"reputation": 441, "user_id": 1499769, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/m2Ccg.jpg?s=128&g=1", "display_name": "Haddock-san", "link": "https://stackoverflow.com/users/1499769/haddock-san"}, "edited": false, "score": 0, "creation_date": 1533221444, "post_id": 51642443, "comment_id": 90276665, "body": "Nevermind, I was able to fix it by separating each column into an array with its specific dtype:  <code>namess = np.loadtxt(&#39;data.txt&#39;, delimiter=&#39;,&#39;, dtype=&#39;str&#39;, usecols=[0]) values = np.loadtxt(&#39;data.txt&#39;, delimiter=&#39;,&#39;, dtype=&#39;int&#39;, usecols=[1])</code>"}], "tags": [], "owner": {"reputation": 1663, "user_id": 6321559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sEAjx.png?s=128&g=1", "display_name": "it&#39;s-yer-boy-chet", "link": "https://stackoverflow.com/users/6321559/its-yer-boy-chet"}, "is_accepted": true, "score": 4, "last_activity_date": 1533158572, "creation_date": 1533158572, "answer_id": 51642443, "question_id": 51642321, "link": "https://stackoverflow.com/questions/51642321/what-is-the-python-list-or-numpy-equivalent-of-excels-sumif-function/51642443#51642443", "title": "What is the Python list or NumPy equivalent of Excel&#39;s SUMIF function?", "body": "<pre><code>names = np.asarray(['jim', 'sam', 'bill', 'sam'])\nvalues = np.asarray([1, 2, 6, 5])\nresult = {name: values[names == name].sum() for name in np.unique(names)}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1893, "user_id": 8927098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zrj09.png?s=128&g=1", "display_name": "cosmic_inquiry", "link": "https://stackoverflow.com/users/8927098/cosmic-inquiry"}, "is_accepted": false, "score": 0, "last_activity_date": 1533188550, "creation_date": 1533188550, "answer_id": 51646268, "question_id": 51642321, "link": "https://stackoverflow.com/questions/51642321/what-is-the-python-list-or-numpy-equivalent-of-excels-sumif-function/51646268#51646268", "title": "What is the Python list or NumPy equivalent of Excel&#39;s SUMIF function?", "body": "<p>Another fun way to do this (without numpy) is using a <code>Counter</code>:</p>\n\n<pre><code>from collections import Counter\nnames = ['jim', 'sam', 'bill', 'sam']\ncounts = [1,2,6,5]\nc = Counter()\nfor name, count in zip(names,counts):\n    c[name] += count\n# Remapping of dict to list of lists\nlist(map(list, zip(*c.items())))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[['sam', 'jim', 'bill'], [7, 1, 6]]\n</code></pre>\n"}], "owner": {"reputation": 441, "user_id": 1499769, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/m2Ccg.jpg?s=128&g=1", "display_name": "Haddock-san", "link": "https://stackoverflow.com/users/1499769/haddock-san"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4013, "favorite_count": 1, "accepted_answer_id": 51642443, "answer_count": 2, "score": 1, "last_activity_date": 1533188550, "creation_date": 1533157890, "last_edit_date": 1533181429, "question_id": 51642321, "link": "https://stackoverflow.com/questions/51642321/what-is-the-python-list-or-numpy-equivalent-of-excels-sumif-function", "title": "What is the Python list or NumPy equivalent of Excel&#39;s SUMIF function?", "body": "<p>I have a 2D array:</p>\n\n<pre><code>expenses = np.array([['jim', 'sam', 'bill', 'sam'],[1,2,6,5]])\n</code></pre>\n\n<p>I want to know the total expenses for each unique person in a new array without hardcoding any names (real list is very long) so that I get an output like this:</p>\n\n<pre><code>totals = [['jim', 'sam', 'bill'],[1,7,6]]\n</code></pre>\n\n<p>Is there a way of doing this with a list or NumPy? I don't want to use Pandas for this.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["python", "python-asyncio"], "comments": [{"owner": {"reputation": 3734, "user_id": 3496038, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/MdpH5.jpg?s=128&g=1", "display_name": "Zach Gates", "link": "https://stackoverflow.com/users/3496038/zach-gates"}, "edited": false, "score": 0, "creation_date": 1533158804, "post_id": 51642267, "comment_id": 90249419, "body": "Why not create the event loop in the other thread in the first place? <code>asyncio.new_event_loop()</code>"}], "answers": [{"comments": [{"owner": {"reputation": 14743, "user_id": 808804, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cc54ae5944af5810788795c32ebc815b?s=128&d=identicon&r=PG", "display_name": "Adam Parkin", "link": "https://stackoverflow.com/users/808804/adam-parkin"}, "edited": false, "score": 1, "creation_date": 1533226485, "post_id": 51647591, "comment_id": 90279850, "body": "&quot;It is not even safe to call loop.stop() from another thread&quot; -- how does the loop then get stopped, if not from another thread?  Or do you mean it&#39;s safe to call <code>call_soon_threadsafe(loop.stop())</code> from another thread, but not <code>loop.stop()</code> directly?"}, {"owner": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "reply_to_user": {"reputation": 14743, "user_id": 808804, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cc54ae5944af5810788795c32ebc815b?s=128&d=identicon&r=PG", "display_name": "Adam Parkin", "link": "https://stackoverflow.com/users/808804/adam-parkin"}, "edited": false, "score": 2, "creation_date": 1533229538, "post_id": 51647591, "comment_id": 90281325, "body": "@AdamParkin The loop can get stopped from a callback or coroutine in the event loop thread - for example, a coroutine can detect an &quot;exit&quot; command on a socket and call <code>loop.stop()</code>. This is how things work when there is only one thread in the picture, and it only runs the event loop, and that&#39;s a perfectly valid (even typical) usage of asyncio. If you do use multiple threads, then all other threads must invoke <code>loop.stop()</code> as <code>loop.call_soon_threadsafe(loop.stop)</code> (note lack of parentheses after <code>loop.stop</code>), and the same for anything else loop-related."}], "tags": [], "owner": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "is_accepted": true, "score": 6, "last_activity_date": 1535386293, "last_edit_date": 1535386293, "creation_date": 1533193959, "answer_id": 51647591, "question_id": 51642267, "link": "https://stackoverflow.com/questions/51642267/asyncio-how-do-you-use-run-forever/51647591#51647591", "title": "Asyncio How do you use run_forever?", "body": "<p>There are two possible approaches: you can run the event loop in the main thread or in a background thread. If you run it in the main thread, you need to <code>run_forever</code> (or <code>run_until_complete(main())</code> or equivalent) as the very last step of the program initialization. In that case the main thread will \"block\", but that's ok because its event loop will be live and respond to outside events, allowing the program to function. A single \"blocking\" call to the event loop that dispatches coroutines and callbacks is how asyncio is designed to be run.</p>\n\n<p>In cases where this is impractical, such as programs that contain a large body of synchronous code, or those that already communicate between several threads, it is often a better idea to create a dedicated thread and run the event loop in it. In that case you must be very careful not to communicate with the event loop other than with calls to <a href=\"https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.AbstractEventLoop.call_soon_threadsafe\" rel=\"noreferrer\"><code>loop.call_soon_threadsafe()</code></a> and <a href=\"https://docs.python.org/3/library/asyncio-task.html?highlight=run_coroutine_threadsafe#asyncio.run_coroutine_threadsafe\" rel=\"noreferrer\"><code>asyncio.run_coroutine_threadsafe()</code></a>. For example, <code>__end_background_loop</code> must be invoked using <code>loop.call_soon_threadsafe(__end_background_loop)</code> because it interacts with the tasks and the event loop. This applies to all interactions with the event loop - for example, calling <code>loop.stop()</code> from another thread is not allowed, it must be spelled as <code>loop.call_soon_threadsafe(loop.stop)</code>. Of course, calling loop functions from asyncio callbacks and coroutines is fine because those will always be run in the same thread the event loop runs in.</p>\n"}], "owner": {"reputation": 14743, "user_id": 808804, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cc54ae5944af5810788795c32ebc815b?s=128&d=identicon&r=PG", "display_name": "Adam Parkin", "link": "https://stackoverflow.com/users/808804/adam-parkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7000, "favorite_count": 2, "accepted_answer_id": 51647591, "answer_count": 1, "score": 6, "last_activity_date": 1535386293, "creation_date": 1533157607, "question_id": 51642267, "link": "https://stackoverflow.com/questions/51642267/asyncio-how-do-you-use-run-forever", "title": "Asyncio How do you use run_forever?", "body": "<p>What I want to do:</p>\n\n<ol>\n<li>have an asyncio event loop that gets spun up</li>\n<li>that loop is passed to various classes in my system for scheduling coroutines on</li>\n<li>that loop is also used for handling the responses to events (ie, I have a Queue, some event handling code will place an item on that queue, and separate co-routines that await a get() on that queue to handle those values)</li>\n<li>there is a main thread which \"owns\" the loop and is responsible for creating the loop, and at time of system shutdown will cancel any running tasks on the loop and close &amp; stop the loop (cleanly shutdown)</li>\n</ol>\n\n<p>My understanding is because of #3, something needs to call <code>run_forever()</code> on the loop to ensure that tasks get scheduled on the loop.  But if I call <code>run_forever()</code> then my main thread blocks, never to terminate.</p>\n\n<p>What I've tried:</p>\n\n<p>Spawn a thread, passing in the loop, and then call <code>run_forever</code> in the thread.  This means though that my unit tests never finish.  The gist:</p>\n\n<pre><code>def __start_background_loop(loop):\n    def run_forever(loop):\n        loop.run_forever()\n\n    # because run_forever() will block the current thread, we spawn\n    # a subthread to issue that call in.\n    thread = Thread(target=run_forever, args=(loop,))\n    thread.start()\n\ndef __end_background_loop(loop):\n    for task in Task.all_tasks(loop):\n        task.cancel()\n    loop.stop()\n</code></pre>\n"}, {"tags": ["python", "django", "sockets"], "comments": [{"owner": {"reputation": 703, "user_id": 10000683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfdc868d639eba5fad764cdbd50e43c3?s=128&d=identicon&r=PG", "display_name": "Mitchell Walls", "link": "https://stackoverflow.com/users/10000683/mitchell-walls"}, "edited": false, "score": 1, "creation_date": 1533158488, "post_id": 51642240, "comment_id": 90249312, "body": "The value in s.listen(2) the 2 just says the max number of back logged connections as in waiting connections. The reason you can get three or more is because they are active connections please see <a href=\"https://stackoverflow.com/questions/35186725/how-to-limit-the-number-of-connections-to-a-socket-and-trigger-timeout-on-client\" title=\"how to limit the number of connections to a socket and trigger timeout on client\">stackoverflow.com/questions/35186725/&hellip;</a>"}], "owner": {"reputation": 129, "user_id": 9351634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84009324d6f9a80c2bb619411334a681?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Azi", "link": "https://stackoverflow.com/users/9351634/denis-azi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 18, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1533157451, "creation_date": 1533157451, "question_id": 51642240, "link": "https://stackoverflow.com/questions/51642240/listen-value-in-socket-not-worked", "title": "&#39;Listen()&#39; value in socket not worked", "body": "<p>Im need is limited quantity the connections, in listen is set s.listen(2), but I don't see any exception and I can created three new connections and more. Where is the mistake?</p>\n\n<pre><code>def func():\n    global addr\n\n    host = socket.gethostbyname(socket.gethostname())\n    port = 9000\n\n    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    s.bind((host,port))\n    s.listen(2)\n\n    while True:\n        conn, addr = s.accept()\n        if addr not in clients_addr:\n            addr.append([conn, addr])\n\n        current_addr = addr\n        thread = Thread(conn, current_addr)\n        thread.start()\n</code></pre>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 1, "creation_date": 1533159305, "post_id": 51642231, "comment_id": 90249597, "body": "MATLAB has finally added broadcasting!"}], "answers": [{"tags": [], "owner": {"reputation": 6356, "user_id": 5030164, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/11b6c08b9d6554e51280244985e3022d?s=128&d=identicon&r=PG&f=1", "display_name": "modesitt", "link": "https://stackoverflow.com/users/5030164/modesitt"}, "is_accepted": false, "score": 3, "last_activity_date": 1533157637, "creation_date": 1533157637, "answer_id": 51642270, "question_id": 51642231, "link": "https://stackoverflow.com/questions/51642231/implicit-expansion-in-python/51642270#51642270", "title": "implicit expansion in python?", "body": "<pre><code>mm = [(m==n).astype(int) for n in np.unique(m)]\n</code></pre>\n\n<p>will give you the <code>masks</code> on <code>m</code> for all <em>unique</em> values in <code>m</code></p>\n"}, {"comments": [{"owner": {"reputation": 6356, "user_id": 5030164, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/11b6c08b9d6554e51280244985e3022d?s=128&d=identicon&r=PG&f=1", "display_name": "modesitt", "link": "https://stackoverflow.com/users/5030164/modesitt"}, "edited": false, "score": 4, "creation_date": 1533157763, "post_id": 51642291, "comment_id": 90249039, "body": "nice broadcasting! +1"}, {"owner": {"reputation": 6799, "user_id": 2635863, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/40a409653d0c3b49ceab04ab22c98c1f?s=128&d=identicon&r=PG", "display_name": "HappyPy", "link": "https://stackoverflow.com/users/2635863/happypy"}, "edited": false, "score": 0, "creation_date": 1533158343, "post_id": 51642291, "comment_id": 90249258, "body": "@Divakar: Thanks, this works great. However I don&#39;t understand why it works... What is the meaning of <code>[:,None,None,None]</code> in this case?"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 6799, "user_id": 2635863, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/40a409653d0c3b49ceab04ab22c98c1f?s=128&d=identicon&r=PG", "display_name": "HappyPy", "link": "https://stackoverflow.com/users/2635863/happypy"}, "edited": false, "score": 0, "creation_date": 1533158952, "post_id": 51642291, "comment_id": 90249484, "body": "@HappyPy Added few comments for clarification."}, {"owner": {"reputation": 6799, "user_id": 2635863, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/40a409653d0c3b49ceab04ab22c98c1f?s=128&d=identicon&r=PG", "display_name": "HappyPy", "link": "https://stackoverflow.com/users/2635863/happypy"}, "edited": false, "score": 0, "creation_date": 1533158977, "post_id": 51642291, "comment_id": 90249494, "body": "@Divakar: Many thanks for the additional edits and explanation."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1533159489, "post_id": 51642291, "comment_id": 90249648, "body": "The key to broadcasting is that dimensions can be added automatically at the start, but have to be explicit at the end.  That&#39;s what the <code>None</code>s are doing."}], "tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": true, "score": 6, "last_activity_date": 1533158620, "last_edit_date": 1533158620, "creation_date": 1533157739, "answer_id": 51642291, "question_id": 51642231, "link": "https://stackoverflow.com/questions/51642231/implicit-expansion-in-python/51642291#51642291", "title": "implicit expansion in python?", "body": "<p>To have a ndim-array as the output, leveraging <code>broadcasting</code> -</p>\n\n<pre><code>mm = m == np.arange(1,4)[:,None,None,None]\n</code></pre>\n\n<p>Note that we are using <code>None</code> which is an alias for <a href=\"https://docs.scipy.org/doc/numpy-1.13.0/reference/arrays.indexing.html#numpy.newaxis\" rel=\"nofollow noreferrer\"><code>np.newaxis</code></a> to extend dimensions for the range array so that with the equality comparison we are effectively doing elementwise comparison against all elements in <code>m</code> against all in the range-array. This is needed so that <a href=\"https://docs.scipy.org/doc/numpy-1.13.0/user/basics.broadcasting.html\" rel=\"nofollow noreferrer\"><code>broadcasting</code></a> is affected.</p>\n\n<p>For a generic case of comparing a n-dim array <code>m</code> against an array of values, say : <code>ar = np.array([1,2,3])</code>, we would use a reshaping to bring on the same dimension-extending effect, like so -</p>\n\n<pre><code>mm = m == ar.reshape((-1,)+(1,)*m.ndim)\n</code></pre>\n\n<p>Or, use the built-in <code>np.equal.outer</code>, as we are essentially doing outer equality comparison -</p>\n\n<pre><code>mm = np.equal.outer(ar,m)\n</code></pre>\n\n<p>Finally, convert to <code>int</code> for int dtype array : <code>mm.astype(int)</code>.</p>\n"}], "owner": {"reputation": 6799, "user_id": 2635863, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/40a409653d0c3b49ceab04ab22c98c1f?s=128&d=identicon&r=PG", "display_name": "HappyPy", "link": "https://stackoverflow.com/users/2635863/happypy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "accepted_answer_id": 51642291, "answer_count": 2, "score": 2, "last_activity_date": 1533158620, "creation_date": 1533157393, "question_id": 51642231, "link": "https://stackoverflow.com/questions/51642231/implicit-expansion-in-python", "title": "implicit expansion in python?", "body": "<pre><code>m = np.random.randint(4,size=(4,4,4))\n</code></pre>\n\n<p>Let's say I want to create separate arrays for each integer like this </p>\n\n<pre><code>mm=[]\nmm.append((m==1).astype(int))\nmm.append((m==2).astype(int))\nmm.append((m==3).astype(int))\n</code></pre>\n\n<p>I was wondering if there is a better way to do this without having to explicitly define <code>m==1</code>, etc. Is it possible to implement an implicit expansion approach in python as easily as it is in Matlab for multidimensional arrays as shown in this <a href=\"https://stackoverflow.com/questions/51388802/split-matrix-into-separate-binary-matrices-based-on-integer-value-matlab\">post</a>?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 425, "user_id": 5472505, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2a16b05529af6157f9bbc5445795e5b6?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/5472505/chris"}, "edited": false, "score": 0, "creation_date": 1533164112, "post_id": 51642268, "comment_id": 90250949, "body": "Great, this worked. Quick question, if I had other columns in the original data set that I wanted to preserve as columns as they originally are, is that an easy parameter fix?"}, {"owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "reply_to_user": {"reputation": 425, "user_id": 5472505, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2a16b05529af6157f9bbc5445795e5b6?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/5472505/chris"}, "edited": false, "score": 1, "creation_date": 1533164224, "post_id": 51642268, "comment_id": 90250969, "body": "IIUC, just stick them in the list you pass to <code>set_index</code>"}], "tags": [], "owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "is_accepted": true, "score": 1, "last_activity_date": 1533157621, "creation_date": 1533157621, "answer_id": 51642268, "question_id": 51642220, "link": "https://stackoverflow.com/questions/51642220/python-pandas-pivot-one-column-and-unpivot-x-columns/51642268#51642268", "title": "Python Pandas pivot one column and unpivot X columns", "body": "<p>Try like this:</p>\n\n<pre><code>df.set_index(['Name', 'Food']).stack().unstack('Food')\n\nFood           burger  hot dog  pizza\nName                                 \nBob  1/1/2018     2.0      1.5    0.0\n     2/1/2018     0.0      0.0    1.0\n     3/1/2018     2.0      1.5    0.0\n     4/1/2018     2.0      1.5    0.0\nMike 1/1/2018     0.0      0.0    1.0\n     2/1/2018     3.0      0.0    0.0\n     3/1/2018     0.0      0.0    1.0\n     4/1/2018     0.0      0.0    1.0\n</code></pre>\n\n<p>If formatting is an issue, just reset the index and then rename your columns to appropriate names:</p>\n\n<pre><code>df.set_index(['Name', 'Food']).stack().unstack('Food').reset_index().rename(columns={'level_1':'date'})\n\nFood  Name      date  burger  hot dog  pizza\n0      Bob  1/1/2018     2.0      1.5    0.0\n1      Bob  2/1/2018     0.0      0.0    1.0\n2      Bob  3/1/2018     2.0      1.5    0.0\n3      Bob  4/1/2018     2.0      1.5    0.0\n4     Mike  1/1/2018     0.0      0.0    1.0\n5     Mike  2/1/2018     3.0      0.0    0.0\n6     Mike  3/1/2018     0.0      0.0    1.0\n7     Mike  4/1/2018     0.0      0.0    1.0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 0, "last_activity_date": 1533158954, "creation_date": 1533158954, "answer_id": 51642510, "question_id": 51642220, "link": "https://stackoverflow.com/questions/51642220/python-pandas-pivot-one-column-and-unpivot-x-columns/51642510#51642510", "title": "Python Pandas pivot one column and unpivot X columns", "body": "<p>Since you mention 'unpivot' (<code>melt</code>)</p>\n\n<pre><code>df.melt(['Name','Food']).pivot_table(index=['Name','variable'],columns='Food',values='value')\nOut[752]: \nFood           burger  hotdog  pizza\nName variable                       \nBob  1/1/2018     2.0     1.5    0.0\n     2/1/2018     0.0     0.0    1.0\n     3/1/2018     2.0     1.5    0.0\n     4/1/2018     2.0     1.5    0.0\nMike 1/1/2018     0.0     0.0    1.0\n     2/1/2018     3.0     0.0    0.0\n     3/1/2018     0.0     0.0    1.0\n     4/1/2018     0.0     0.0    1.0\n</code></pre>\n"}], "owner": {"reputation": 425, "user_id": 5472505, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2a16b05529af6157f9bbc5445795e5b6?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/5472505/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 621, "favorite_count": 0, "accepted_answer_id": 51642268, "answer_count": 2, "score": 0, "last_activity_date": 1533169051, "creation_date": 1533157351, "last_edit_date": 1533169051, "question_id": 51642220, "link": "https://stackoverflow.com/questions/51642220/python-pandas-pivot-one-column-and-unpivot-x-columns", "title": "Python Pandas pivot one column and unpivot X columns", "body": "<p>I'm using pandas dataframes and have two major things to do. I don't know which is the best order but I need to turn <code>Food</code> column into multiple columns titled <code>pizza</code>, <code>burger</code>, and <code>hot dog</code> as column names (pretty much pivot) and then unpivot columns <code>pd.iloc[:,2:]</code> so that the first date column through X-number of date columns is turned into a single column.</p>\n\n<p>Steps taken so far are to split the df into 3 separate dfs (one is just <code>Name</code>, two is <code>Food</code> and pivot, three is unstack and then reset index on each). I don't think this is the correct approach. I just need the basic workflow to collapse into a single large df (relational dfs won't work for this specific task).</p>\n\n<p>SAMPLE DATA:</p>\n\n<pre><code>Name    Food    1/1/2018    2/1/2018    3/1/2018    4/1/2018\nMike    pizza   1           0           1           1\nMike    burger  0           3           0           0\nMike    hot dog 0           0           0           0\nBob     pizza   0           1           0           0\nBob     burger  2           0           2           2\nBob     hot dog 1.5         0           1.5         1.5\n</code></pre>\n\n<p>WHAT I NEED:</p>\n\n<pre><code>Name                pizza   burger  hot dog\nMike    1/1/2018    1       0       0\nMike    2/1/2018    0       3       0\nMike    3/1/2018    1       0       0\nMike    4/1/2018    1       0       0\nBob     1/1/2018    0       2       1.5\nBob     2/1/2018    1       0       0\nBob     3/1/2018    0       2       1.5\nBob     4/1/2018    0       2       1.5\n</code></pre>\n"}, {"tags": ["python", "selenium", "selenium-webdriver"], "comments": [{"owner": {"reputation": 3009, "user_id": 1563807, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1QLZ8.jpg?s=128&g=1", "display_name": "CodeSamurai777", "link": "https://stackoverflow.com/users/1563807/codesamurai777"}, "edited": false, "score": 1, "creation_date": 1533157853, "post_id": 51642133, "comment_id": 90249076, "body": "You need to be sure that clicking the page does not reload the whole page if so there could be problems"}, {"owner": {"reputation": 1, "user_id": 9679911, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "strwsdr", "link": "https://stackoverflow.com/users/9679911/strwsdr"}, "reply_to_user": {"reputation": 3009, "user_id": 1563807, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1QLZ8.jpg?s=128&g=1", "display_name": "CodeSamurai777", "link": "https://stackoverflow.com/users/1563807/codesamurai777"}, "edited": false, "score": 0, "creation_date": 1533158884, "post_id": 51642133, "comment_id": 90249452, "body": "Thanks! I want to note that page is not reloading, just scroll up and shows new results"}, {"owner": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1533169674, "post_id": 51642133, "comment_id": 90252082, "body": "Post a link to the page. My guess is that you were waiting for the element to be present, etc. but if the element exists before and after the refresh, the wait likely completed before the refresh and that&#39;s why you got 1 twice."}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 5006545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b751b060728ec23f794310d77bedb516?s=128&d=identicon&r=PG&f=1", "display_name": "Fernando Escalante Gon", "link": "https://stackoverflow.com/users/5006545/fernando-escalante-gon"}, "is_accepted": false, "score": 0, "last_activity_date": 1533161862, "creation_date": 1533161862, "answer_id": 51642994, "question_id": 51642133, "link": "https://stackoverflow.com/questions/51642133/how-i-can-count-all-elements-in-2-or-more-pages-in-selenium/51642994#51642994", "title": "How I can count all elements in 2 or more pages in selenium?", "body": "<p>You can use requests and bs4 libraries to scrap a website.</p>\n\n<p>For example:</p>\n\n<p>a) I will count how many links are in a site:</p>\n\n<p>b) i will extract href value for each link</p>\n\n<pre><code>import requests, bs4\n\nmy_request = requests.get('https://www.bellezaculichi.com')\n# request one page\n\nmy_request.raise_for_status()\n# check for error\n\nmy_html = bs4.BeautifulSoup(my_request.text)\n# parse site\n\nmy_links = my_html.select('a')\n#stores all links in list my_links\n\ntotal_links = len(my_links)\n# how many links do i found\n\nprint(total_links)\n# show how many links\n\n\nfor i in range(total_links):\n    my_links[i][\"href\"]\n</code></pre>\n\n<p>With bs4 you can count any element in a web page.</p>\n\n<p>You can count how many divs, p or a</p>\n\n<p>With bs4 you can count any element by ID in a web page.</p>\n\n<p>With bs4 you can count any element by CLASS in a web page.</p>\n\n<p>With bs4 you can count any element by ATTRIBUTE in a web page.</p>\n"}], "owner": {"reputation": 1, "user_id": 9679911, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "strwsdr", "link": "https://stackoverflow.com/users/9679911/strwsdr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533161862, "creation_date": 1533156992, "last_edit_date": 1533158920, "question_id": 51642133, "link": "https://stackoverflow.com/questions/51642133/how-i-can-count-all-elements-in-2-or-more-pages-in-selenium", "title": "How I can count all elements in 2 or more pages in selenium?", "body": "<p>The problem is that I can't count all elements on 2 webpages correctly in Selenium. </p>\n\n<pre><code>pages = driver.find_elements(By.CLASS_NAME, \"page\") #getting list of pages\nfor x in pages:                              #loop through this list\n    x.click()                                #click on page number\n    prices += driver.find_elements(By.CLASS_NAME, \"final-price\") #addition 1pg and 2pg elements \nprint(len(prices))\n</code></pre>\n\n<p>Result is wrong: it adds 1pg with 1pg, not 1pg with 2pg.\ntried to insert wait - did not help :(\nI want to note that page is not reloading, just scroll up and shows new results after clicking on the page 2, it must be using ajax.</p>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1533160102, "post_id": 51642116, "comment_id": 90249842, "body": "Have you done any debugging? Why do you think it&#39;s not being destroyed? Are you getting an error? Are you certain the destroy method is being called? Are you certain it&#39;s being called on the correct widget?"}], "answers": [{"tags": [], "owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "is_accepted": true, "score": 0, "last_activity_date": 1533160296, "creation_date": 1533160296, "answer_id": 51642757, "question_id": 51642116, "link": "https://stackoverflow.com/questions/51642116/python-2-7-widget-doesnt-destroy-when-radiobutton-is-clicked-more-than-once/51642757#51642757", "title": "Python 2.7: Widget Doesn&#39;t Destroy When Radiobutton is Clicked More Than Once", "body": "<p>You are making a new Label and Entry every time you click that button. However your destroy only destroys the last one created. The easiest fix is to simply check if the Label has already been created: </p>\n\n<pre><code>def addSubject(self):\n    if hasattr(self, 'buttonLabel2'):\n        return # abort this method if the Label is already created\n    # rest of your method \n</code></pre>\n\n<p>Unrelated, but if you want your Radiobuttons to start in a blank state rather than a tristate, you need to initialize the StringVar like this: </p>\n\n<pre><code>self.tieVar1 = StringVar(value='Novel')\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10167706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/634d13b36284df9d79dc3d8fe3588a62?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Parr", "link": "https://stackoverflow.com/users/10167706/joseph-parr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 51642757, "answer_count": 1, "score": 0, "last_activity_date": 1533160296, "creation_date": 1533156890, "last_edit_date": 1533159043, "question_id": 51642116, "link": "https://stackoverflow.com/questions/51642116/python-2-7-widget-doesnt-destroy-when-radiobutton-is-clicked-more-than-once", "title": "Python 2.7: Widget Doesn&#39;t Destroy When Radiobutton is Clicked More Than Once", "body": "<p>My code shows FunctionAllocation label and two radio buttons, and once one radio button is clicked, it shows Subject ID label and its entry bar. Once return key is clicked, all widgets are destroyed and new message appears.</p>\n\n<p>Everything works smoothly if radio button is clicked once. However, if I click a radio button and then click another radio button, Subject ID label and its entry bar do not disappear despite .destroy() command.</p>\n\n<p>How do I make sure the widgets disappear no matter which &amp; how many times the radio buttons are pressed?</p>\n\n<p>Thank you so much in advance!</p>\n\n<pre><code>from Tkinter import *\n\nclass Application(Frame):\n    #Initial Settings\n    def __init__(self, master=None):\n        Frame.__init__(self, master)\n        self.pack()\n        self.radioButtons()\n\n    #Place Initial Buttons\n    def radioButtons(self):\n        #Variable to tie two radio buttons\n        self.tieVar1 = StringVar()\n\n        #Text before FA buttons\n        self.buttonLabel1 = Label(root, text=\"Function Allocation:\")\n        self.buttonLabel1.place(relx=0.35, rely=0.3, anchor=CENTER)\n\n        #Two Radio FA buttons\n        self.radio1 = Radiobutton(text = \"FA_F\", variable=self.tieVar1, value=\"FA1\", command=lambda: self.addSubject())\n        self.radio1.place(relx=0.5, rely=0.3, anchor=CENTER)\n        self.radio2 = Radiobutton(text = \"FA_I\", variable=self.tieVar1, value=\"FA2\", command=lambda: self.addSubject())\n        self.radio2.place(relx=0.6, rely=0.3, anchor=CENTER)\n\n    def addSubject(self):\n        #Text before ID entry bar\n        self.buttonLabel2 = Label(root, text=\"Subject ID:\")\n        self.buttonLabel2.place(relx=0.35, rely=0.6, anchor=CENTER)\n\n        #ID entry bar\n        self.myEntry = Entry()\n        self.myEntry.place(relx=0.5, rely=0.6, anchor=CENTER)\n        self.contents = StringVar()\n        self.contents.set(\"Sample Text\")\n        self.myEntry[\"textvariable\"] = self.contents\n        self.myEntry.bind('&lt;Key-Return&gt;', self.reset_contents)\n\n    #Action when return key pressed after typing subject ID\n    def reset_contents(self, event):\n        #Delete all \n        self.buttonLabel1.destroy()\n        self.buttonLabel2.destroy()\n        self.radio1.destroy()\n        self.radio2.destroy()\n        self.myEntry.destroy()\n\n        #Setting up new window\n        self.setActions()\n\n    def setActions(self):\n        Label(text=\"Done!\", font=(\"Times\", 10, \"bold\")).place(relx=0.5, rely=0.5, anchor=CENTER)\n\n    #Final settings to keep window open\n    root = Tk()\n    root.geometry(\"1000x400\")\n    app = Application(master=root)\n    app.mainloop()\n</code></pre>\n"}, {"tags": ["python", "pandas", "numpy", "dataframe"], "comments": [{"owner": {"reputation": 2454, "user_id": 8784938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/753bb55c80a644f950a41ae11cfbe48c?s=128&d=identicon&r=PG&f=1", "display_name": "SuperStew", "link": "https://stackoverflow.com/users/8784938/superstew"}, "edited": false, "score": 1, "creation_date": 1533156846, "post_id": 51642102, "comment_id": 90248659, "body": "pretty sure there&#39;s a &quot;sumby&quot; or similar that will help"}, {"owner": {"reputation": 389, "user_id": 8442537, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2ce4ea430d2f8305dd87eb41e445b9fd?s=128&d=identicon&r=PG&f=1", "display_name": "Liu Bei", "link": "https://stackoverflow.com/users/8442537/liu-bei"}, "reply_to_user": {"reputation": 2454, "user_id": 8784938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/753bb55c80a644f950a41ae11cfbe48c?s=128&d=identicon&r=PG&f=1", "display_name": "SuperStew", "link": "https://stackoverflow.com/users/8784938/superstew"}, "edited": false, "score": 0, "creation_date": 1533157032, "post_id": 51642102, "comment_id": 90248737, "body": "Thank you a lot! I can think of it now because of your answer. I just use <code>df.groupby(&#39;SEASON YEAR&#39;).sum()</code>. Am I correct?"}, {"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 1, "creation_date": 1533157068, "post_id": 51642102, "comment_id": 90248751, "body": "<code>df.groupby(&#39;year&#39;).number_of_mosquitoes.sum()</code>"}], "answers": [{"comments": [{"owner": {"reputation": 389, "user_id": 8442537, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2ce4ea430d2f8305dd87eb41e445b9fd?s=128&d=identicon&r=PG&f=1", "display_name": "Liu Bei", "link": "https://stackoverflow.com/users/8442537/liu-bei"}, "edited": false, "score": 0, "creation_date": 1533157336, "post_id": 51642152, "comment_id": 90248867, "body": "Thank you very much, sir. This would be another way to sum them. Very appreciated by your help."}], "tags": [], "owner": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "is_accepted": false, "score": 1, "last_activity_date": 1533157070, "creation_date": 1533157070, "answer_id": 51642152, "question_id": 51642102, "link": "https://stackoverflow.com/questions/51642102/how-can-i-add-the-values-in-the-dataset-together-in-python/51642152#51642152", "title": "How can I add the values in the dataset together in Python?", "body": "<p>If I'm understanding correctly, you want to sum the number of mosquitoes in every year.\nIf that's the case, you can use groupby.sum(), like this:</p>\n\n<pre><code>df.groupby(['SEASON YEAR'], as_index=False).sum()\n</code></pre>\n\n<p>I'm not sure if that's what you're looking for, tell me otherwise.</p>\n"}, {"comments": [{"owner": {"reputation": 389, "user_id": 8442537, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2ce4ea430d2f8305dd87eb41e445b9fd?s=128&d=identicon&r=PG&f=1", "display_name": "Liu Bei", "link": "https://stackoverflow.com/users/8442537/liu-bei"}, "edited": false, "score": 0, "creation_date": 1533157286, "post_id": 51642157, "comment_id": 90248853, "body": "Thank you very much. This is great!"}], "tags": [], "owner": {"reputation": 6511, "user_id": 3216980, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WKADu.jpg?s=128&g=1", "display_name": "TYZ", "link": "https://stackoverflow.com/users/3216980/tyz"}, "is_accepted": false, "score": 1, "last_activity_date": 1533157079, "creation_date": 1533157079, "answer_id": 51642157, "question_id": 51642102, "link": "https://stackoverflow.com/questions/51642102/how-can-i-add-the-values-in-the-dataset-together-in-python/51642157#51642157", "title": "How can I add the values in the dataset together in Python?", "body": "<p>You can simply do <code>groupby</code> and <code>sum</code>:</p>\n\n<pre><code>df.groupby(\"SEASON YEAR\").sum()[\"NUMBER OF MOSQUITOES\"]\n</code></pre>\n"}], "owner": {"reputation": 389, "user_id": 8442537, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2ce4ea430d2f8305dd87eb41e445b9fd?s=128&d=identicon&r=PG&f=1", "display_name": "Liu Bei", "link": "https://stackoverflow.com/users/8442537/liu-bei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "closed_date": 1533157097, "answer_count": 2, "score": -1, "last_activity_date": 1533157079, "creation_date": 1533156809, "question_id": 51642102, "link": "https://stackoverflow.com/questions/51642102/how-can-i-add-the-values-in-the-dataset-together-in-python", "closed_reason": "Duplicate", "title": "How can I add the values in the dataset together in Python?", "body": "<p>I am trying to add values together for each year in my dataset.</p>\n\n<p>The dataframe looks like..</p>\n\n<p><a href=\"https://i.stack.imgur.com/k9jWc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/k9jWc.png\" alt=\"enter image description here\"></a></p>\n\n<p>I'd like to add the values in <code>NUMBER OF MOSQUITOES</code> column, collect them in the year to which it belongs.</p>\n\n<p>For example,</p>\n\n<pre><code>2007 395\n2008 154\n2009 353\n...\n...\n...\n</code></pre>\n\n<p>Which methods in <code>pandas</code> or <code>numpy</code> can I use?</p>\n\n<p>Thank you for your help in advance</p>\n"}, {"tags": ["python", "python-3.x", "opencv", "video", "cv2"], "comments": [{"owner": {"reputation": 427, "user_id": 9659685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b98950b1bdbe7db977313af43229ebef?s=128&d=identicon&r=PG&f=1", "display_name": "CupinaCoffee", "link": "https://stackoverflow.com/users/9659685/cupinacoffee"}, "edited": false, "score": 0, "creation_date": 1533164811, "post_id": 51642097, "comment_id": 90251109, "body": "Shouldn&#39;t <code>cap.set(2,frame_no)</code> be <code>cap.set(2,frame_no_int)</code>?"}, {"owner": {"reputation": 3341, "user_id": 3204706, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/GIk0b.jpg?s=128&g=1", "display_name": "Tina J", "link": "https://stackoverflow.com/users/3204706/tina-j"}, "reply_to_user": {"reputation": 427, "user_id": 9659685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b98950b1bdbe7db977313af43229ebef?s=128&d=identicon&r=PG&f=1", "display_name": "CupinaCoffee", "link": "https://stackoverflow.com/users/9659685/cupinacoffee"}, "edited": false, "score": 2, "creation_date": 1533223177, "post_id": 51642097, "comment_id": 90277927, "body": "No, that takes a float in the range of [0, 1]. I used <code>cap.set(1,frame_no_int)</code> instead and this one works. Weird behavior."}], "answers": [{"comments": [{"owner": {"reputation": 3341, "user_id": 3204706, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/GIk0b.jpg?s=128&g=1", "display_name": "Tina J", "link": "https://stackoverflow.com/users/3204706/tina-j"}, "edited": false, "score": 0, "creation_date": 1533232643, "post_id": 51658605, "comment_id": 90282766, "body": "I see! I was guessing so. I used <code>cap.set(1,frame_no_int)</code> instead and this one works. Weird behavior."}, {"owner": {"reputation": 3341, "user_id": 3204706, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/GIk0b.jpg?s=128&g=1", "display_name": "Tina J", "link": "https://stackoverflow.com/users/3204706/tina-j"}, "edited": false, "score": 0, "creation_date": 1533232687, "post_id": 51658605, "comment_id": 90282782, "body": "Do you happen to know if/how we can get the list of key-frames (I-frame) number in python?"}, {"owner": {"reputation": 5790, "user_id": 5407270, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NsKU95wNnz8/AAAAAAAAAAI/AAAAAAAAAlI/JsEGfhwPOqU/photo.jpg?sz=128", "display_name": "Andriy Makukha", "link": "https://stackoverflow.com/users/5407270/andriy-makukha"}, "reply_to_user": {"reputation": 3341, "user_id": 3204706, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/GIk0b.jpg?s=128&g=1", "display_name": "Tina J", "link": "https://stackoverflow.com/users/3204706/tina-j"}, "edited": false, "score": 1, "creation_date": 1533275581, "post_id": 51658605, "comment_id": 90295133, "body": "@TinaJ, see function <code>get_frame_types</code> in my answer here: <a href=\"https://stackoverflow.com/questions/42798634/extracting-keyframes-python-opencv/51666059#51666059\" title=\"extracting keyframes python opencv\">stackoverflow.com/questions/42798634/&hellip;</a> - this solution uses a call to ffprobe to identify frame types."}, {"owner": {"reputation": 3341, "user_id": 3204706, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/GIk0b.jpg?s=128&g=1", "display_name": "Tina J", "link": "https://stackoverflow.com/users/3204706/tina-j"}, "edited": false, "score": 0, "creation_date": 1533306908, "post_id": 51658605, "comment_id": 90312746, "body": "Thanks. It looks to be helpful!"}], "tags": [], "owner": {"reputation": 5790, "user_id": 5407270, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NsKU95wNnz8/AAAAAAAAAAI/AAAAAAAAAlI/JsEGfhwPOqU/photo.jpg?sz=128", "display_name": "Andriy Makukha", "link": "https://stackoverflow.com/users/5407270/andriy-makukha"}, "is_accepted": true, "score": 2, "last_activity_date": 1533275529, "last_edit_date": 1533275529, "creation_date": 1533228326, "answer_id": 51658605, "question_id": 51642097, "link": "https://stackoverflow.com/questions/51642097/my-python-code-doesnt-save-video-frames-as-images/51658605#51658605", "title": "My python code doesn&#39;t save video frames as images", "body": "<p>Apparently, <code>CAP_PROP_POS_AVI_RATIO</code> (constant 2, which you were using in <code>cap.set()</code>) doesn't work well. Take a look at the output of your modified script:</p>\n\n<pre><code>import cv2\nfrom numpy import integer\n\nnumber = 10\nfilename = 'chaplin.mp4'\n\ndef uniform():\n    cap = cv2.VideoCapture(filename)\n    frame_count= int(cap.get(cv2.CAP_PROP_FRAME_COUNT))\n    print(frame_count)\n\n    for x in range(0, number):\n        frame_pos_ratio = 1.0*x/number\n        frame_no_int=int(frame_pos_ratio*frame_count)\n        cap.set(cv2.CAP_PROP_POS_FRAMES, frame_no_int)\n        print (frame_no_int, cap.get(cv2.CAP_PROP_POS_AVI_RATIO))\n        ret, frame = cap.read()\n        cv2.imwrite('_frame_'+str(frame_no_int)+'.jpg', frame)\n\n    # Attempt to go the end of film\n    cap.set(cv2.CAP_PROP_POS_AVI_RATIO, 1)\n    print (cap.get(cv2.CAP_PROP_POS_FRAMES))\n\n    # When everything done, release the capture\n    cap.release()\n\nif __name__ == '__main__':\n    uniform()\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>172\n(0, 6.510416666666667e-05)\n(17, 6.510416666666667e-05)\n(34, 6.510416666666667e-05)\n(51, 6.510416666666667e-05)\n(68, 6.510416666666667e-05)\n(86, 6.510416666666667e-05)\n(103, 6.510416666666667e-05)\n(120, 6.510416666666667e-05)\n(137, 6.510416666666667e-05)\n(154, 6.510416666666667e-05)\n150.0\n</code></pre>\n\n<p>As you can see, <code>cap.get(cv2.CAP_PROP_POS_AVI_RATIO)</code> inside the cycle just returns a constant <code>6.51e-05</code>.</p>\n\n<p>And even though there are 174 frames, <code>cap.set(cv2.CAP_PROP_POS_AVI_RATIO, 1)</code> takes you only to frame 150, which is definitely a bug.</p>\n\n<p>This behavior is in line with <a href=\"https://stackoverflow.com/questions/47162334/python-opencv-getcap-prop-pos-avi-ratio-returning-a-fixed-number-in-while-loop\">this question</a>.</p>\n\n<p>P.S. Interestingly, even <code>cv2.CAP_PROP_FRAME_COUNT</code> doesn't work properly. Apparently, my video file contained only 150 frames, but they were numbered from 22 to 171, as evidenced by <code>ffprobe -show_frames chaplin.mp4 | grep coded_picture_number</code>. So the output of CAP_PROP_FRAME_COUNT is just max(frame_no)+1.</p>\n"}], "owner": {"reputation": 3341, "user_id": 3204706, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/GIk0b.jpg?s=128&g=1", "display_name": "Tina J", "link": "https://stackoverflow.com/users/3204706/tina-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 1, "accepted_answer_id": 51658605, "answer_count": 1, "score": 3, "last_activity_date": 1533275529, "creation_date": 1533156796, "last_edit_date": 1533213132, "question_id": 51642097, "link": "https://stackoverflow.com/questions/51642097/my-python-code-doesnt-save-video-frames-as-images", "title": "My python code doesn&#39;t save video frames as images", "body": "<p>I'm trying to grab specific frames (e.g. frame 0, 10, 20, ...) within a video and save them as images using Python and CV2. For some reasons, my code only saves the first frame. All other frames are created, but with size 0 (they are corrupt). </p>\n\n<p>How can I fix the problem?</p>\n\n<pre><code>import cv2\nfrom numpy import integer\n\nnumber = 10;\nfilename = \"18s.mp4\";\n\ndef uniform():\n    cap = cv2.VideoCapture(filename);\n    frame_count= int(cap.get(cv2.CAP_PROP_FRAME_COUNT));\n    print(frame_count)\n\n    for x in range(0, number):\n            frame_no = 1*(x/number)\n            frame_no_int=int(frame_no*frame_count)\n\n            cap.set(2,frame_no);\n            ret, frame = cap.read()\n            cv2.imwrite(filename+'_frame_'+str(frame_no_int)+'.jpg', frame);\n\n    # When everything done, release the capture\n    cap.release()\n\nif __name__ == '__main__':\n    uniform()\n</code></pre>\n"}, {"tags": ["python", "loops", "gis"], "comments": [{"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1533156752, "post_id": 51642064, "comment_id": 90248622, "body": "What did you try?"}, {"owner": {"reputation": 11, "user_id": 10167919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ce50c287702581373e4b6a2858d14d7?s=128&d=identicon&r=PG&f=1", "display_name": "jdusher42", "link": "https://stackoverflow.com/users/10167919/jdusher42"}, "reply_to_user": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1533157349, "post_id": 51642064, "comment_id": 90248874, "body": "for fc in arcpy.SoilData():                                                                                              arcpy.AddField_management(in_table=&quot;Soil_Data&quot;, field_name=&quot;CODE&quot;, \\                                                                                         field_type=&quot;INTEGER&quot;)                                                                                            fieldName = {CODE [1:10]}"}, {"owner": {"reputation": 11, "user_id": 10167919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ce50c287702581373e4b6a2858d14d7?s=128&d=identicon&r=PG&f=1", "display_name": "jdusher42", "link": "https://stackoverflow.com/users/10167919/jdusher42"}, "reply_to_user": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1533157378, "post_id": 51642064, "comment_id": 90248887, "body": "for fc in arcpy.SoilData():    arcpy.AddField_management(in_table=&quot;Soil_Data&quot;, field_name=&quot;CODE&quot;, \\    field_type=&quot;INTEGER&quot;)     fieldName = {CODE [1:10]}"}], "answers": [{"tags": [], "owner": {"reputation": 544, "user_id": 7954998, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UvnCx.png?s=128&g=1", "display_name": "pajarnas", "link": "https://stackoverflow.com/users/7954998/pajarnas"}, "is_accepted": false, "score": 0, "last_activity_date": 1533163278, "last_edit_date": 1533163278, "creation_date": 1533159603, "answer_id": 51642629, "question_id": 51642064, "link": "https://stackoverflow.com/questions/51642064/add-field-using-loop-gis-python/51642629#51642629", "title": "Add Field using loop (GIS Python)", "body": "<p>I don\u2019t know for sure what\u2019s the usage of \u201cfc\u201d in your code.I hope the following code will help.   </p>\n\n<pre><code>n = range(1,11)\nwhile n ! = [] :\n    arcpy.AddField_management(\u201cSoil_Data\u201d,\u201dCOD\u201d+str(n[0]),\"INTEGER\")\n    remove(n[0])\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10167919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ce50c287702581373e4b6a2858d14d7?s=128&d=identicon&r=PG&f=1", "display_name": "jdusher42", "link": "https://stackoverflow.com/users/10167919/jdusher42"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1533163278, "creation_date": 1533156653, "last_edit_date": 1533158776, "question_id": 51642064, "link": "https://stackoverflow.com/questions/51642064/add-field-using-loop-gis-python", "title": "Add Field using loop (GIS Python)", "body": "<p>The task at hand is:</p>\n\n<p>Add 10 new fields to \u201cSoilData\u201d Attribute Table with the following specifications:</p>\n\n<ol>\n<li>Names: \u201cCODE1\u201d, \u201cCODE2\u201d, \u2026\u201dCODE10\u201d.</li>\n<li>Use \u201cAddFields_management()\u201dmethod.</li>\n<li>The fields are all \u201cINTEGER\u201d.</li>\n<li>Use one loop (either \u201cif\u201d\u201d, \u201cfor\u201d, or \u201cwhile\u201d) to add these 10 fields (no cursor required). The following shows the end product of the code.</li>\n</ol>\n\n<p>My question is <strong>how would this code look in a loop?</strong></p>\n\n<p>My first attempt:</p>\n\n<pre><code>for fc in arcpy.SoilData():\n  arcpy.AddField_management(in_table=\"Soil_Data\", field_name=\"CODE\", field_type=\"INTEGER\")\n  fieldName = {CODE [1:10]}\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "selenium", "web-scraping", "selenium-chromedriver"], "comments": [{"owner": {"reputation": 8717, "user_id": 3124333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MCMEh.jpg?s=128&g=1", "display_name": "SiKing", "link": "https://stackoverflow.com/users/3124333/siking"}, "edited": false, "score": 0, "creation_date": 1533166053, "post_id": 51642044, "comment_id": 90251371, "body": "Any XPath starting with <code>&#47;html</code> is almost guaranteed to be brittle and often fail. You should invest some time in learning proper XPath."}], "answers": [{"tags": [], "owner": {"reputation": 5161, "user_id": 8625512, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/14cFh.jpg?s=128&g=1", "display_name": "Andrei Suvorkov", "link": "https://stackoverflow.com/users/8625512/andrei-suvorkov"}, "is_accepted": true, "score": 1, "last_activity_date": 1533189335, "creation_date": 1533189335, "answer_id": 51646416, "question_id": 51642044, "link": "https://stackoverflow.com/questions/51642044/how-do-i-use-selenium-in-python-to-find-the-correct-layout-for-amazon-search-p/51646416#51646416", "title": "How do I use Selenium in Python to find the correct &quot;layout&quot; for amazon search page?", "body": "<p>If I right understood the question you can use this template:</p>\n\n<pre><code># check if defaultLayout is on the page\ndefaultLayout = driver.find_elements_by_xpath(\"//div[@id = 'searchTemplate' and @class = 'searchTemplate defaultLayout so_us_en']\")\n\n# check if listLayout is on the page\nlistLayout = driver.find_elements_by_xpath(\"//div[@id = 'searchTemplate' and @class = 'searchTemplate listLayout so_us_en']\")\n\nif not defaultLayout:\n    #do something...\nelif not listLayout:\n    #do something differently...\nelse:\n    pass \n</code></pre>\n\n<p>The idea of this template is to get a list of elements and check if the list is empty or not.</p>\n\n<p><strong><em>Note:</em></strong> I have used <code>find_elements</code> because it returns a list of elements found and if there were no elements found, it won't throw any exception, just return an empty list.</p>\n"}], "owner": {"reputation": 1306, "user_id": 10167843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b411320dbab3885c73dcf1ddb2bdd00?s=128&d=identicon&r=PG&f=1", "display_name": "SmitM", "link": "https://stackoverflow.com/users/10167843/smitm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 51646416, "answer_count": 1, "score": 0, "last_activity_date": 1533189335, "creation_date": 1533156558, "last_edit_date": 1533188355, "question_id": 51642044, "link": "https://stackoverflow.com/questions/51642044/how-do-i-use-selenium-in-python-to-find-the-correct-layout-for-amazon-search-p", "title": "How do I use Selenium in Python to find the correct &quot;layout&quot; for amazon search page?", "body": "<p>I'm using Python 3.5 to scrape some product information off of amazon.com. During the process of automating the \"search-grabinfo\" process, I found out that it breaks when the layout of the page changes. Currently I know of 2 different layouts and I want to have an if condition of the form:  </p>\n\n<pre><code>if layout = DefaultLayout:\n    #do something...\nelif layout = ListLayout:\n    #do something differently...\nelse:\n    pass \n</code></pre>\n\n<p>I was able to find the <code>&lt;div class&gt;</code> tag for this layout option but I'm not able to grab it using selenium to use in my <code>if</code> condition</p>\n\n<p>For the Default Layout: <code>&lt;div id=\"searchTemplate\" class=\"searchTemplate defaultLayout so_us_en\" &gt;...&lt;/div&gt;</code><br>\nFor the List Layout: <code>&lt;div id=\"searchTemplate\" class=\"searchTemplate listLayout so_us_en\" &gt;...&lt;/div&gt;</code> </p>\n\n<p>Using XPath does not seem to be an option since it is of the form <code>\"/html/body/table/tbody/tr[1350]/td[2]/span/span[4]\"</code>with tr[i] not being constant </p>\n"}, {"tags": ["python", "api", "smartsheet-api", "smartsheet-api-2.0"], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 10122701, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-u2iZPzV3no8/AAAAAAAAAAI/AAAAAAAAAak/0HsUBDL9G1o/photo.jpg?sz=128", "display_name": "adamcoolcat", "link": "https://stackoverflow.com/users/10122701/adamcoolcat"}, "edited": false, "score": 0, "creation_date": 1533215131, "post_id": 51642537, "comment_id": 90272124, "body": "When I try to get the id array from the get.folder() call (by using folder = folder.sheets.id), I get the answer: &quot;AttributeError: &#39;TypedList&#39; object has no attribute &#39;id&#39;&quot; I&#39;m not sure what function to call in python to get the array of ids in the folder."}, {"owner": {"reputation": 1592, "user_id": 413234, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/5TcuP.jpg?s=128&g=1", "display_name": "stmcallister", "link": "https://stackoverflow.com/users/413234/stmcallister"}, "reply_to_user": {"reputation": 105, "user_id": 10122701, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-u2iZPzV3no8/AAAAAAAAAAI/AAAAAAAAAak/0HsUBDL9G1o/photo.jpg?sz=128", "display_name": "adamcoolcat", "link": "https://stackoverflow.com/users/10122701/adamcoolcat"}, "edited": false, "score": 0, "creation_date": 1533233552, "post_id": 51642537, "comment_id": 90283206, "body": "Looks like you created a new question for this, so I posted the answer there: <a href=\"https://stackoverflow.com/a/51659870/413234\">stackoverflow.com/a/51659870/413234</a>"}], "tags": [], "owner": {"reputation": 1592, "user_id": 413234, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/5TcuP.jpg?s=128&g=1", "display_name": "stmcallister", "link": "https://stackoverflow.com/users/413234/stmcallister"}, "is_accepted": false, "score": 2, "last_activity_date": 1533159096, "creation_date": 1533159096, "answer_id": 51642537, "question_id": 51642034, "link": "https://stackoverflow.com/questions/51642034/is-it-possible-to-list-all-items-for-simplicity-just-sheets-in-a-folder-and-c/51642537#51642537", "title": "Is it possible to list all Items (for simplicity, just sheets) in a folder and collect the ids in an array?", "body": "<p>If you call <a href=\"http://smartsheet-platform.github.io/api-docs/?python#get-folder\" rel=\"nofollow noreferrer\">GET /folder</a> you should get an array of sheets that contain the sheet ids, like this:</p>\n\n<pre><code>{\n  \"id\": 7116448184199044,\n  \"name\": \"Projects\",\n  \"permalink\": \"https://app.smartsheet.com/b/home?lx=B0_lvAtnWygeMrWr4Rfoa\",\n  \"sheets\": [\n    {\n      \"id\": 4509918431602564,\n      \"name\": \"Project Timeline\",\n      \"accessLevel\": \"OWNER\",\n      \"permalink\": \"https://app.smartsheet.com/b/home?lx=uWicCItTmkbxJwpCfQ5wiwW\",\n      \"createdAt\": \"2015-06-05T20:05:29Z\",\n      \"modifiedAt\": \"2015-06-05T20:05:43Z\"\n    }\n  ]\n}\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 10122701, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-u2iZPzV3no8/AAAAAAAAAAI/AAAAAAAAAak/0HsUBDL9G1o/photo.jpg?sz=128", "display_name": "adamcoolcat", "link": "https://stackoverflow.com/users/10122701/adamcoolcat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533159096, "creation_date": 1533156501, "question_id": 51642034, "link": "https://stackoverflow.com/questions/51642034/is-it-possible-to-list-all-items-for-simplicity-just-sheets-in-a-folder-and-c", "title": "Is it possible to list all Items (for simplicity, just sheets) in a folder and collect the ids in an array?", "body": "<p>Is it possible to collect all the sheet ids of sheets stored in a folder? I am trying to make a program that is able to update the names of sheets based off of a word in a sheet cell, I have the code already made for that here:</p>\n\n<pre><code>#this section gets the value of a specific cell for the document renaming\nrow = ss_client.Sheets.get_row(sheetID, rowID)\ncell = row.get_column(columnID)\ncellValue = cell.value + ' Folder' # This will be changed based on the type of item\n# cell.value is equal to the project name\n</code></pre>\n\n<p>I was wondering if anyone had some input on this, I was playing around with it and an Idea I had was to use an array to store the sheet ids, and then updating the sheet names with the array that I created.</p>\n\n<p>tl;dr I have a script that creates a newly copied folder and want to get a list of all the sheet ids in that new folder</p>\n"}, {"tags": ["python", "regex", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 0, "creation_date": 1533156541, "post_id": 51642012, "comment_id": 90248514, "body": "What is your expected output? Should <code>3.*8</code> be <code>3.8</code> and <code>5..3</code> be <code>5.3</code>??"}, {"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 2, "creation_date": 1533156800, "post_id": 51642012, "comment_id": 90248645, "body": "What about <code>1.2.3</code>? Does it become <code>123</code>, <code>12.3</code>, <code>1.23</code>...?"}, {"owner": {"reputation": 28612, "user_id": 7954504, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/6POkt.jpg?s=128&g=1", "display_name": "Brad Solomon", "link": "https://stackoverflow.com/users/7954504/brad-solomon"}, "edited": false, "score": 1, "creation_date": 1533157048, "post_id": 51642012, "comment_id": 90248742, "body": "A suggested first step: replace everything that is not a digit or period, then go from there.  <code>unallowed = re.compile(r&#39;[^\\d\\.]&#39;)</code>, then <code>s.str.replace(unallowed, &#39;&#39;)</code>"}, {"owner": {"reputation": 13, "user_id": 10167854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52c29ab862d7ebe8241a505c2dcaa3a2?s=128&d=identicon&r=PG&f=1", "display_name": "abdul0589", "link": "https://stackoverflow.com/users/10167854/abdul0589"}, "reply_to_user": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1533157445, "post_id": 51642012, "comment_id": 90248923, "body": "@RafaelC if that s the case then i would just need the first occuring dot and use it as the value. 1.2.3 then translates to 1.2 ignoring .3"}, {"owner": {"reputation": 13, "user_id": 10167854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52c29ab862d7ebe8241a505c2dcaa3a2?s=128&d=identicon&r=PG&f=1", "display_name": "abdul0589", "link": "https://stackoverflow.com/users/10167854/abdul0589"}, "reply_to_user": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 0, "creation_date": 1533157931, "post_id": 51642012, "comment_id": 90249115, "body": "@ALollz Yes the expected output has to be of the format [0-9].[0-9] with all the special characters removed.3.*8 has to be 3.8 and 5..3 has to be 5.3.If it has a value like 140 then i would just need to keep it as it is and convert it into  a float so that i can scale it later ."}, {"owner": {"reputation": 13, "user_id": 10167854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52c29ab862d7ebe8241a505c2dcaa3a2?s=128&d=identicon&r=PG&f=1", "display_name": "abdul0589", "link": "https://stackoverflow.com/users/10167854/abdul0589"}, "reply_to_user": {"reputation": 28612, "user_id": 7954504, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/6POkt.jpg?s=128&g=1", "display_name": "Brad Solomon", "link": "https://stackoverflow.com/users/7954504/brad-solomon"}, "edited": false, "score": 0, "creation_date": 1533158548, "post_id": 51642012, "comment_id": 90249332, "body": "@brad solomon i tried it and  it does not seem to solve cases like 5.5.  .Any suggestions on how to handle that ?"}], "answers": [{"comments": [{"owner": {"reputation": 2565, "user_id": 4593127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d661b3425b0e9cd38ee220844e1b8659?s=128&d=identicon&r=PG&f=1", "display_name": "gaganso", "link": "https://stackoverflow.com/users/4593127/gaganso"}, "reply_to_user": {"reputation": 13, "user_id": 10167854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52c29ab862d7ebe8241a505c2dcaa3a2?s=128&d=identicon&r=PG&f=1", "display_name": "abdul0589", "link": "https://stackoverflow.com/users/10167854/abdul0589"}, "edited": false, "score": 0, "creation_date": 1533220015, "post_id": 51642689, "comment_id": 90275690, "body": "Can you comment the values for which this didn&#39;t work? Maybe, you can add it to the question."}, {"owner": {"reputation": 13, "user_id": 10167854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52c29ab862d7ebe8241a505c2dcaa3a2?s=128&d=identicon&r=PG&f=1", "display_name": "abdul0589", "link": "https://stackoverflow.com/users/10167854/abdul0589"}, "edited": false, "score": 0, "creation_date": 1533220158, "post_id": 51642689, "comment_id": 90275789, "body": "this almost solved my problem .i have a few values still which have few text in them and certain symbols .I did not know how to come up with unique values which are other than of the format [0-9].[0-9] and the examples i have listed there is based on the regexes i have tried and ran into errors with.i have few more problems coming up. how do i extract data from 14.5 of HGB,&gt;14.5,&lt;14.5, 14,5"}, {"owner": {"reputation": 2565, "user_id": 4593127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d661b3425b0e9cd38ee220844e1b8659?s=128&d=identicon&r=PG&f=1", "display_name": "gaganso", "link": "https://stackoverflow.com/users/4593127/gaganso"}, "reply_to_user": {"reputation": 13, "user_id": 10167854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52c29ab862d7ebe8241a505c2dcaa3a2?s=128&d=identicon&r=PG&f=1", "display_name": "abdul0589", "link": "https://stackoverflow.com/users/10167854/abdul0589"}, "edited": false, "score": 0, "creation_date": 1533226047, "post_id": 51642689, "comment_id": 90279646, "body": "Thank you for the update. I ran the code with the additional inputs and it seems to work. Can you check again once?"}, {"owner": {"reputation": 13, "user_id": 10167854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52c29ab862d7ebe8241a505c2dcaa3a2?s=128&d=identicon&r=PG&f=1", "display_name": "abdul0589", "link": "https://stackoverflow.com/users/10167854/abdul0589"}, "edited": false, "score": 0, "creation_date": 1533240310, "post_id": 51642689, "comment_id": 90286112, "body": "thanks so much for the solution .this indeed worked like a charm.could you please explain this regex at a detailed level so that i can apply it in the future .?"}], "tags": [], "owner": {"reputation": 2565, "user_id": 4593127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d661b3425b0e9cd38ee220844e1b8659?s=128&d=identicon&r=PG&f=1", "display_name": "gaganso", "link": "https://stackoverflow.com/users/4593127/gaganso"}, "is_accepted": true, "score": 1, "last_activity_date": 1533244582, "last_edit_date": 1533244582, "creation_date": 1533159944, "answer_id": 51642689, "question_id": 51642012, "link": "https://stackoverflow.com/questions/51642012/remove-special-characters-in-a-pandas-column-using-regex/51642689#51642689", "title": "Remove special characters in a pandas column using regex", "body": "<p>The regex groups the digits on either side of the '.' ignoring all non-digits. The code uses these groups to create the required output. <a href=\"https://regex101.com/r/bo97D9/1\" rel=\"nofollow noreferrer\">Regex101</a></p>\n\n<pre><code>import pandas as pd\n\ndef clean_input(m):\n    print(m.group(0))\n    if m:\n        val = m.group(1)\n        if m.group(2):\n            val = val + '.' +m.group(2)\n    return val\n\na = pd.DataFrame({'colA':\n   ['7.8.',\n    '5..3',\n    '%3.2',\n    '   ',\n    '3.*8',\n    '3.8*',\n    '140',\n    '5.5.',\n    '14.5 of HGB',\n    '&gt;14.5',\n    '&lt;14.5',\n    '14,5',\n   '14. 5']})\na['colA'].str.replace('[^\\d]*(\\d+)[^\\d]*(?:\\.)?[^\\d]*(\\d)*[^\\d]*', clean_input)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>0      7.8\n1      5.3\n2      3.2\n3         \n4      3.8\n5      3.8\n6      140\n7      5.5\n8     14.5\n9     14.5\n10    14.5\n11    14.5\n12    14.5\n</code></pre>\n\n<p>Regex explanation:</p>\n\n<ul>\n<li><code>\\d</code> - matches a digit </li>\n<li><code>[^&lt;pattern&gt;]</code> - matches any character except the\n </li>\n<li><code>[^\\d]</code> - matches any character except for digits. </li>\n<li><code>[^\\d]+</code>- matches one or more of the above. </li>\n<li><code>(?:)</code> - is non-capturing group where the matched characters are not captured. </li>\n<li><code>&lt;pattern&gt;?</code>  - zero or one occurance of the pattern.</li>\n<li><code>\\.</code> - since <code>.</code> is a meta character, it has to be escaped with <code>\\</code></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": false, "score": 0, "last_activity_date": 1533189541, "creation_date": 1533189541, "answer_id": 51646466, "question_id": 51642012, "link": "https://stackoverflow.com/questions/51642012/remove-special-characters-in-a-pandas-column-using-regex/51646466#51646466", "title": "Remove special characters in a pandas column using regex", "body": "<p>Another take: split a string by periods, extract all digits from the first and second fragments, concatenate them with a period.</p>\n\n<pre><code>parts = df['colA'].str.split('\\.')\npart0 = parts.str[0].str.extract('(\\d+)').fillna('0')\npart1 = parts.str[1].str.extract('(\\d+)').fillna('0')\npart0 + \".\" + part1\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>#0    7.8\n#1    5.0\n#2    3.2\n#3    0.0\n#4    3.8\n#5    3.8\n#6  140.0\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10167854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52c29ab862d7ebe8241a505c2dcaa3a2?s=128&d=identicon&r=PG&f=1", "display_name": "abdul0589", "link": "https://stackoverflow.com/users/10167854/abdul0589"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2099, "favorite_count": 1, "accepted_answer_id": 51642689, "answer_count": 2, "score": 1, "last_activity_date": 1533244582, "creation_date": 1533156385, "last_edit_date": 1533222604, "question_id": 51642012, "link": "https://stackoverflow.com/questions/51642012/remove-special-characters-in-a-pandas-column-using-regex", "title": "Remove special characters in a pandas column using regex", "body": "<p>I am working with a pandas dataframe where a column has non numeric values in it.Is there a way that i can replace characters only while retaining the numbers in the column.I am very new to applying regex patterns to clean data and highly appreciate  if someone could point me towards the right regex pattern .</p>\n\n<p>The final output has to be a single digit float of the type [0-9].[0-9] but there will be values which dont follow those standards too and i would need to find those numbers and then scale them .</p>\n\n<p>Eg:</p>\n\n<pre><code>Col A\n\n'7.8.',\n'5..3',\n'%3.2',\n'   ',\n'3.*8',\n'3.8*',\n'140',\n'14.5 of HGB',\n'&gt;14.5',\n'&lt;14.5',\n'14,5'\n'14. 5'\n</code></pre>\n\n<p>Expected Output :</p>\n\n<pre><code>Col A\n\n'7.8',\n'5.3',\n'3.2',\n'0',\n'3.8',\n'3.8',\n'140',\n'14.5',\n'14.5',\n'14.5',\n'14.5',\n'14.5'\n</code></pre>\n\n<p>P.S. the objective is to extract only the numbers and then convert it into a float so that i can do some calculations on it.</p>\n\n<p>Thanks,</p>\n\n<p>Abdul </p>\n"}, {"tags": ["javascript", "python", "django"], "comments": [{"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 1, "creation_date": 1533167442, "post_id": 51642011, "comment_id": 90251654, "body": "What have you tried and what went wrong?"}, {"owner": {"reputation": 11, "user_id": 10167877, "user_type": "registered", "profile_image": "https://graph.facebook.com/1876759452389029/picture?type=large", "display_name": "Arkojit Chatterjee", "link": "https://stackoverflow.com/users/10167877/arkojit-chatterjee"}, "reply_to_user": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1533199517, "post_id": 51642011, "comment_id": 90261966, "body": "As of now I&#39;m just looking for a technique to send the JavaScript array generated on the client side to the server, I haven&#39;t been successful yet."}, {"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1533253727, "post_id": 51642011, "comment_id": 90290499, "body": "How is it different than any other Javascript array? I would assume that an Ajax POST request would suffice."}], "owner": {"reputation": 11, "user_id": 10167877, "user_type": "registered", "profile_image": "https://graph.facebook.com/1876759452389029/picture?type=large", "display_name": "Arkojit Chatterjee", "link": "https://stackoverflow.com/users/10167877/arkojit-chatterjee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1533156361, "creation_date": 1533156361, "question_id": 51642011, "link": "https://stackoverflow.com/questions/51642011/javascript-list-import-in-django", "title": "JavaScript list import in Django", "body": "<p>I'm trying to implement a map in my website using Google v3 API. I'm trying to save the coordinates of a path in the server that the user generates by clicking on the map. I'm doing all this in JavaScript since the API is in JavaScript. For the backend I'm using Django.</p>\n\n<p>When I'm creating the path, everything gets stored in a JavaScript array. </p>\n\n<p>My question is, how do I store that array in a django model?</p>\n\n<p>My research until now has not been successful and most people suggest using geodjango for the project. But I personally found it very complicated so I only expect answers that are regarding the google map API.</p>\n"}, {"tags": ["python", "pandas", "api"], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 10011212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gUvMD.jpg?s=128&g=1", "display_name": "lmonty", "link": "https://stackoverflow.com/users/10011212/lmonty"}, "edited": false, "score": 0, "creation_date": 1533156680, "post_id": 51642026, "comment_id": 90248582, "body": "Excellent.  That&#39;s nearly done the trick.  I think I just need to drop the NaN from the range.  What&#39;s the best way to achieve that?  &quot;ValueError: Cannot convert non-finite values (NA or inf) to integer&quot;"}], "tags": [], "owner": {"reputation": 28612, "user_id": 7954504, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/6POkt.jpg?s=128&g=1", "display_name": "Brad Solomon", "link": "https://stackoverflow.com/users/7954504/brad-solomon"}, "is_accepted": true, "score": 0, "last_activity_date": 1533156885, "last_edit_date": 1533156885, "creation_date": 1533156457, "answer_id": 51642026, "question_id": 51641986, "link": "https://stackoverflow.com/questions/51641986/using-data-from-column-in-dataframe-to-pass-as-string-variable-via-api/51642026#51642026", "title": "Using data from column in DataFrame to pass as string variable via API", "body": "<p>You can use <code>.str.cat()</code> to concatenate and specify a newline:</p>\n\n<pre><code>&gt;&gt;&gt; prodIDs = pd.Series([115711, 115859, 96393], dtype=np.float64)\n\n&gt;&gt;&gt; prodIDs.astype(int).astype(str).str.cat(sep=', ')\n'115711, 115859, 96393'\n</code></pre>\n\n<p>Your question implies you want a string of <code>int</code>s.  If you want floats, just drop <code>.astype(int)</code>:</p>\n\n<pre><code>&gt;&gt;&gt; prodIDs.astype(str).str.cat(sep=', ')\n'115711.0, 115859.0, 96393.0'\n</code></pre>\n\n<p>Source: <a href=\"https://pandas.pydata.org/pandas-docs/stable/text.html#concatenation\" rel=\"nofollow noreferrer\">https://pandas.pydata.org/pandas-docs/stable/text.html#concatenation</a></p>\n\n<p>Regarding your commment:</p>\n\n<blockquote>\n  <p>I think I just need to drop the NaN from the range. What's the best way to achieve that? \"ValueError: Cannot convert non-finite values (NA or inf) to integer\"</p>\n</blockquote>\n\n<p>One way would be to use <code>numpy.isfinite()</code> as a filter.</p>\n\n<pre><code>&gt;&gt;&gt; prodIDs = pd.Series([115711, 115859, 96393, np.inf], dtype=np.float64)\n\n&gt;&gt;&gt; prodIDs[np.isfinite(prodIDs)]\n0    115711.0\n1    115859.0\n2     96393.0\ndtype: float64\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28612, "user_id": 7954504, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/6POkt.jpg?s=128&g=1", "display_name": "Brad Solomon", "link": "https://stackoverflow.com/users/7954504/brad-solomon"}, "edited": false, "score": 0, "creation_date": 1533178421, "post_id": 51642260, "comment_id": 90253653, "body": "You can also say <code>table[&#39;PRODUCT_ID&#39;].astype(float)</code>"}], "tags": [], "owner": {"reputation": 177, "user_id": 10011212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gUvMD.jpg?s=128&g=1", "display_name": "lmonty", "link": "https://stackoverflow.com/users/10011212/lmonty"}, "is_accepted": false, "score": 0, "last_activity_date": 1533157578, "creation_date": 1533157578, "answer_id": 51642260, "question_id": 51641986, "link": "https://stackoverflow.com/questions/51641986/using-data-from-column-in-dataframe-to-pass-as-string-variable-via-api/51642260#51642260", "title": "Using data from column in DataFrame to pass as string variable via API", "body": "<p>Thanks for great feedback Brad.\nAll solved now with a couple of lines:</p>\n\n<pre><code>prodIDs = pd.Series(table['PRODUCT_ID'], dtype=np.float64)\nprodIDs = prodIDs.dropna().astype(int).astype(str).str.cat(sep=', ')\nmeta = Erply.getProducts(recordsOnPage='1000', productIDs=prodIDs)\n</code></pre>\n\n<p>Now I'm getting the meta data only on the items I need making the application much more efficient.  Thanks for helping a Python Beginner : )</p>\n"}], "owner": {"reputation": 177, "user_id": 10011212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gUvMD.jpg?s=128&g=1", "display_name": "lmonty", "link": "https://stackoverflow.com/users/10011212/lmonty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 51642026, "answer_count": 2, "score": 0, "last_activity_date": 1533157578, "creation_date": 1533156290, "question_id": 51641986, "link": "https://stackoverflow.com/questions/51641986/using-data-from-column-in-dataframe-to-pass-as-string-variable-via-api", "title": "Using data from column in DataFrame to pass as string variable via API", "body": "<p>I am trying to use data from a column in a Pandas DataFrame as a variable in an API call.  I can't figure out how to convert the data into the correct formatting to pass it to the API.  </p>\n\n<p>For context, I am grabbing ProductIDs (i.e. the APIs unique DB reference for a product) from one call to grab meta data about said products in another call.  Just calling the whole DB is not an option as I generally have 100s of ProductIDs whereas the DB is 140'000 deep so this would be very inefficient!  I've managed to achieve what I want to do via GoogleAppsScript / JavaScript but looking to migrate to Python to make the whole job more efficient.</p>\n\n<p>I call:</p>\n\n<pre><code>prodIDs = table['PRODUCT_ID']\n</code></pre>\n\n<p>which returns:</p>\n\n<pre><code>185    115711.0\n186    115859.0\n187     96392.0\n188    128546.0\n189         NaN\nName: PRODUCT_ID, Length: 760, dtype: float64\n</code></pre>\n\n<p>I then pass it to the API with:</p>\n\n<pre><code>meta = Erply.getProducts(recordsOnPage='1000', productIDs=prodIDs)\n</code></pre>\n\n<p>but the response comes back blank.  The API is not reading any of the ProductIDs.  When I do it manually, such as:</p>\n\n<pre><code>meta = Erply.getProducts(recordsOnPage='1000', productIDs='128546, 128546')\n</code></pre>\n\n<p>then it works a treat!</p>\n\n<p>So, I figure that I need to convert the \"prodIDs\" in someway so that they can be passed over the API. </p>\n\n<p>The API says:</p>\n\n<p>productIDs  Retrieve specific products. Multiple product IDs, separated by commas, such as: 1,2,3,4,5   String</p>\n"}, {"tags": ["python", "python-3.x", "matplotlib"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1533157024, "post_id": 51641983, "comment_id": 90248732, "body": "See <a href=\"https://stackoverflow.com/questions/5656798/python-matplotlib-is-there-a-way-to-make-a-discontinuous-axis\" title=\"python matplotlib is there a way to make a discontinuous axis\">stackoverflow.com/questions/5656798/&hellip;</a> or <a href=\"https://matplotlib.org/gallery/subplots_axes_and_figures/broken_axis.html?highlight=broken%20axis\" rel=\"nofollow noreferrer\">matplotlib.org/gallery/subplots_axes_and_figures/&hellip;</a>"}, {"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1533157046, "post_id": 51641983, "comment_id": 90248740, "body": "What do you mean by <code>year-01</code> and <code>year-07</code>? Do you mean all the dates between January and July (both inclusive) should be excluded from the axis labels? In the data you wrote above, there is no date for January to July"}, {"owner": {"reputation": 63, "user_id": 9914733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/115e91eddf2bd6a040547214de0eb230?s=128&d=identicon&r=PG&f=1", "display_name": "wdsfds", "link": "https://stackoverflow.com/users/9914733/wdsfds"}, "edited": false, "score": 1, "creation_date": 1533157372, "post_id": 51641983, "comment_id": 90248884, "body": "yes. I want to remove those from the plot, so that long horizontal line isn&#39;t there."}], "owner": {"reputation": 63, "user_id": 9914733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/115e91eddf2bd6a040547214de0eb230?s=128&d=identicon&r=PG&f=1", "display_name": "wdsfds", "link": "https://stackoverflow.com/users/9914733/wdsfds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 231, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1533156280, "creation_date": 1533156280, "question_id": 51641983, "link": "https://stackoverflow.com/questions/51641983/exclude-range-of-dates-in-matplotlib", "title": "Exclude range of dates in matplotlib", "body": "<p>So I am plotting some 5k time date using matplotlib, using a modified tutorial. I want to remove the ranges between <code>year-01</code> and <code>year-07</code> for all years, to make the data more interesting.</p>\n\n<p>This is my code:</p>\n\n<pre><code>import matplotlib.pyplot as plt \n\ndef plotTimes(data):\n    x = data[\"x\"]\n    y = data[\"y\"]\n    fig = plt.figure()\n    ax = fig.add_subplot(111)\n    ax.grid()\n\n    plt.plot(x,y)\n    plt.xlabel('Date')\n    plt.ylabel('5k Time')\n    plt.title(data['name'])\n    plt.show()\n</code></pre>\n\n<ul>\n<li>How can I exclude a range of dates from my plot?</li>\n<li>(side question) Is pyplot the best way to use matplotlib?\n<a href=\"https://i.stack.imgur.com/aGNXk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aGNXk.png\" alt=\"Exclude date range problem\"></a></li>\n</ul>\n\n<p>All code:\n<a href=\"https://pastebin.com/raw/MQVa5QLZ\" rel=\"nofollow noreferrer\">https://pastebin.com/raw/MQVa5QLZ</a></p>\n\n<p>This is the data:</p>\n\n<pre><code>{'x': [datetime.datetime(2015, 8, 28, 0, 0), datetime.datetime(2015, \n9, 3, 0, 0), datetime.datetime(2015, 9, 10, 0, 0), datetime.datetime(2015, 9, 12, 0, 0), datetime.datetime(2015, 9, 17, 0, 0), datetime.datetime(2015, 9, 26, 0, 0), datetime.datetime(2015, 9, 29, 0,\n 0), datetime.datetime(2015, 10, 3, 0, 0), datetime.datetime(2015, 10, 16,\n 0, 0), datetime.datetime(2015, 10, 22, 0, 0), datetime.datetime(2015, 10,\n 23, 0, 0), datetime.datetime(2015, 10, 27, 0, 0), datetime.datetime(2015,\n 10, 30, 0, 0), datetime.datetime(2015, 11, 4, 0, 0), \ndatetime.datetime(2016, 8, 26, 0, 0), datetime.datetime(2016, 9, 1, 0, 0),\n datetime.datetime(2016, 9, 10, 0, 0), datetime.datetime(2016, 9, 13, 0, \n0), datetime.datetime(2016, 9, 15, 0, 0), datetime.datetime(2016, 9, 24, 0, 0), datetime.datetime(2016, 9, 27, 0, 0), datetime.datetime(2016, 10, \n14, 0, 0), datetime.datetime(2016, 10, 20, 0, 0), datetime.datetime(2016, \n10, 21, 0, 0), datetime.datetime(2016, 10, 25, 0, 0), datetime.datetime(2016, 10, 29, 0, 0), datetime.datetime(2016, 11, 2, 0,\n 0), datetime.datetime(2017, 8, 25, 0, 0), datetime.datetime(2017, 9, 9, \n0, 0), datetime.datetime(2017, 9, 12, 0, 0), datetime.datetime(2017, 9, \n14, 0, 0), datetime.datetime(2017, 9, 23, 0, 0), datetime.datetime(2017,\n 9, 27, 0, 0), datetime.datetime(2017, 10, 7, 0, 0), \ndatetime.datetime(2017, 10, 28, 0, 0), datetime.datetime(2017, 11, 1, 0, \n0)], 'y': [datetime.datetime(1900, 1, 1, 0, 20, 4, 100000), \ndatetime.datetime(1900, 1, 1, 0, 19, 59, 700000), datetime.datetime(1900, 1, 1, 0, 18, 48, 100000), datetime.datetime(1900, 1, 1, 0, 18, 26),\n datetime.datetime(1900, 1, 1, 0, 18, 49, 600000), datetime.datetime(1900,\n 1, 1, 0, 17, 57), datetime.datetime(1900, 1, 1, 0, 18, 28, 200000), \ndatetime.datetime(1900, 1, 1, 0, 17, 34, 800000), datetime.datetime(1900,\n 1, 1, 0, 17, 46), datetime.datetime(1900, 1, 1, 0, 17, 57, 700000), \ndatetime.datetime(1900, 1, 1, 0, 17, 43, 200000), datetime.datetime(1900,\n 1, 1, 0, 17, 54, 700000), datetime.datetime(1900, 1, 1, 0, 17, 40, \n700000), datetime.datetime(1900, 1, 1, 0, 17, 55, 600000), \ndatetime.datetime(1900, 1, 1, 0, 18, 29, 200000), datetime.datetime(1900,\n 1, 1, 0, 17, 43, 300000), datetime.datetime(1900, 1, 1, 0, 17, 51), \ndatetime.datetime(1900, 1, 1, 0, 18, 12, 500000), datetime.datetime(1900,\n 1, 1, 0, 17, 30, 100000), datetime.datetime(1900, 1, 1, 0, 17, 9, \n800000), datetime.datetime(1900, 1, 1, 0, 17, 58), datetime.datetime(1900,\n 1, 1, 0, 17, 16, 800000), datetime.datetime(1900, 1, 1, 0, 17, 43, \n600000), datetime.datetime(1900, 1, 1, 0, 17, 12, 400000), \ndatetime.datetime(1900, 1, 1, 0, 17, 31, 600000), datetime.datetime(1900,\n 1, 1, 0, 17, 36, 700000), datetime.datetime(1900, 1, 1, 0, 17, 13, \n900000), datetime.datetime(1900, 1, 1, 0, 17, 17,\n700000), datetime.datetime(1900, 1, 1, 0, 16, 42), datetime.datetime(1900, 1, 1, 0,\n     16, 56, 200000), datetime.datetime(1900, 1, 1, 0, 17, 11, 700000),\n datetime.datetime(1900, 1, 1, 0, 16, 51, 900000),\n datetime.datetime(1900, 1, 1, 0, 17, 15, 200000), datetime.datetime(1900, 1, 1, 0, 17, 9, \n700000),\n datetime.datetime(1900, 1, 1, 0, 16, 55, 600000), \ndatetime.datetime(1900, 1, 1, 0, 17, 2, 400000)], 'name': 'Jack Santinga'}\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1533156541, "post_id": 51641981, "comment_id": 90248515, "body": "Couple of things. Detach the problem from your specific case (I&#39;m totally guilty of not doing this) and don&#39;t post links to external resources that might expire."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1533156617, "post_id": 51641981, "comment_id": 90248547, "body": "A lot of pandas functions have an <code>inplace</code> argument."}, {"owner": {"reputation": 21, "user_id": 10167789, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1bMajOiTih8/AAAAAAAAAAI/AAAAAAAAAG8/kRQCoXzAY3k/photo.jpg?sz=128", "display_name": "Evan Jacobs", "link": "https://stackoverflow.com/users/10167789/evan-jacobs"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1533160133, "post_id": 51641981, "comment_id": 90249855, "body": "Thanks! This is my first time posting a question on here."}], "answers": [{"tags": [], "owner": {"reputation": 12739, "user_id": 304209, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ac832b45e72b203d51e2d501c0e52e4f?s=128&d=identicon&r=PG", "display_name": "Dennis Golomazov", "link": "https://stackoverflow.com/users/304209/dennis-golomazov"}, "is_accepted": false, "score": 0, "last_activity_date": 1533158021, "creation_date": 1533158021, "answer_id": 51642345, "question_id": 51641981, "link": "https://stackoverflow.com/questions/51641981/data-not-sticking-to-my-dataframe-when-i-append-it-to-a-column/51642345#51642345", "title": "Data not &quot;sticking&quot; to my DataFrame when I append it to a column", "body": "<p>Use <code>df.loc[row_index, col_name] = value</code>. Otherwise you're assigning a value to a slice of the dataframe. More info: <a href=\"https://www.dataquest.io/blog/settingwithcopywarning/\" rel=\"nofollow noreferrer\">https://www.dataquest.io/blog/settingwithcopywarning/</a></p>\n"}], "owner": {"reputation": 21, "user_id": 10167789, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1bMajOiTih8/AAAAAAAAAAI/AAAAAAAAAG8/kRQCoXzAY3k/photo.jpg?sz=128", "display_name": "Evan Jacobs", "link": "https://stackoverflow.com/users/10167789/evan-jacobs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1533158021, "creation_date": 1533156254, "question_id": 51641981, "link": "https://stackoverflow.com/questions/51641981/data-not-sticking-to-my-dataframe-when-i-append-it-to-a-column", "title": "Data not &quot;sticking&quot; to my DataFrame when I append it to a column", "body": "<p>I'm pretty new to programming and data science. Here's a strange problem I came across. I'm doing feature engineering on a DataFrame filled with information about movies. I have actors count vectorized for each movie and I'm predicting metacritic score. </p>\n\n<p>Originally, I tried to also replace the Actors column with an aggregate score for each member of the series of lists. For instance, if four people were listed in a movie, I'd take the average of their Metascores (their own average Metascore) and average that, using the code below. Some actors wouldn't have values or some movies might have no actors listed, so if I ran into those problems, I would just use annp.nan (Later, I would change this to a 666.666 to easily remove). </p>\n\n<p>At first this seemed to have worked. It gave me better models (though only when I still count vectorized the Actors column). But this may have been a fluke. I noticed some of the data was strange looking. So I tried to reproduce the problem. </p>\n\n<p>For this code:\nActors is a column of lists, each with four actor names.\nactors_df is a DataFrame of two columns, one of the actor names and one of their corresponding average Metacritic scores. \nmorta_list is just a list so I could keep track of what was going on. </p>\n\n<pre><code>morta = df.dropna(axis=0, how='any', subset=['Metascore', 'imdbID']).copy()\nmorta['ActorAvg'] = 0.\n\nmorta_list = []\nfor index, m in enumerate(morta.Actors):\n    s=0\n    den = 0\n    for p in m:\n        for n in zip(actors_df.name.values, actors_df.avgscore):\n            if p.lower() == n[0]:\n                s = s + n[1]\n                den = den + 1\n    if den == 0:\n        morta.ActorAvg[index]=666.666\n        morta_list.append(666.666)\n    else:\n        morta.ActorAvg[index]=s/den\n        morta_list.append(s/den)\n</code></pre>\n\n<p>However, later, when I checked my new column, I was getting weird results: </p>\n\n<pre><code>morta['ActorAvg'].sum()\n</code></pre>\n\n<p>gave me 6344793.712, but</p>\n\n<pre><code>morta[['ActorAvg']].sum()\n</code></pre>\n\n<p>gave me 0. There were other discrepancies as well. For instance:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Tilm6.png\" rel=\"nofollow noreferrer\">values don't match up</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/p7rj0.png\" rel=\"nofollow noreferrer\">won't sum correctly</a></p>\n\n<p>I couldn't get the new ActorAvg column to reproduce 6344793.712 as a sum when it was in the new DataFrame. </p>\n\n<p>I know this is complicated and I'm not sure I'm explaining it well, but can anyone help me get this information to \"stick\"?</p>\n"}, {"tags": ["python", "selenium"], "comments": [{"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1533167268, "post_id": 51641950, "comment_id": 90251622, "body": "I use WATIR where it&#39;s possible but in selenium it&#39;s not possible if you use implicit wait. Infact it&#39;s possible but it wouldn&#39;t move as you expected because you would be locked up by implicit wait when you check whether element exist. Since WATIR has its own timer and also it wouldn&#39;t be using the driver level wait, it&#39;s exactly possible as you are asking, you can simply check <code>b.element.exist?</code> or <code>b.element.present?</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1533167003, "post_id": 51643461, "comment_id": 90251571, "body": "This doesn&#39;t move as you expected, you will be caught up with implicit wait."}, {"owner": {"reputation": 1633, "user_id": 8791722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98WuV.png?s=128&g=1", "display_name": "PixelEinstein", "link": "https://stackoverflow.com/users/8791722/pixeleinstein"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1533167179, "post_id": 51643461, "comment_id": 90251604, "body": "Only if you are setting the <code>implicitwait</code> to more than <code>0</code>, which is the default. I will put in a note to be aware of this."}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1533169420, "post_id": 51643461, "comment_id": 90252051, "body": "They can&#39;t use explicit wait for every line of code,so implicit wait is the best . But we need to face these consequences as a result of using implicit wait."}, {"owner": {"reputation": 1633, "user_id": 8791722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98WuV.png?s=128&g=1", "display_name": "PixelEinstein", "link": "https://stackoverflow.com/users/8791722/pixeleinstein"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1533169679, "post_id": 51643461, "comment_id": 90252083, "body": "You only need to <b><i>wait</i></b> for an element to exist if the <i>load</i> of the element is outside the <i>pageload</i>, using dynamic events like <i>AJAX</i>. In this case I would strong recommend using <code>Explicit</code> wait events for every load. I do not use Implicit and have thousands of lines of code written using selenium, so you <b><i>can</i></b> use <code>WebDriverWait</code> for every element that requires it."}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1533170083, "post_id": 51643461, "comment_id": 90252153, "body": "Anyhow I am not facing this problem because I use WATIR which sits on the top of selenium which doesn&#39;t uses this driver level wait, it has the explicit kind of wait at the core.  So I can check like b.element.exists? And at the same time I wouldn&#39;t be loosing the waiting for element to exist and element to visible. Only when we automate very stable product we use seleniuim directly."}], "tags": [], "owner": {"reputation": 1633, "user_id": 8791722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98WuV.png?s=128&g=1", "display_name": "PixelEinstein", "link": "https://stackoverflow.com/users/8791722/pixeleinstein"}, "is_accepted": true, "score": 1, "last_activity_date": 1533170811, "last_edit_date": 1533170811, "creation_date": 1533165211, "answer_id": 51643461, "question_id": 51641950, "link": "https://stackoverflow.com/questions/51641950/selenium-check-if-element-exist-i-loop-if-true-click-if-not-continue/51643461#51643461", "title": "Selenium: Check if element exist i loop, if true, click, if not continue", "body": "<p>I would wrap the <code>.click()</code> in a <strong><em>try, catch</em></strong> statement. This way you can try and click the element every loop, but catch the exception that is thrown when it's <strong>not present/visible</strong>.</p>\n\n<blockquote>\n  <p>NOTE: If you are using <strong>Implicit Waits</strong>, each element check will take\n  however many seconds you have set the Implicit Wait to. I would not\n  recommend using Implicit, and use <strong>Explicit Waits</strong> instead in your\n  Selenium scripts. <a href=\"http://selenium-python.readthedocs.io/waits.html\" rel=\"nofollow noreferrer\">HERE</a> you will find the docs on both.</p>\n</blockquote>\n\n<p>Here is an example using your example:</p>\n\n<pre><code>from selenium.common.exceptions import NoSuchElementException, ElementNotVisibleException\n\nfor i in (urlList):\n    browser.get(i)\n    try:\n        browser.find_element_by_xpath(\".//div[contains(@class,'wizard-tooltip-btn skip')]\").click()\n    except (ElementNotVisibleException, NoSuchElementException):\n        pass\n    browser.find_element_by_xpath(\".//div[@data-name='data-window']\").click()\n    title_element = browser.find_element_by_class_name('pane-legend-title__description')\n    ticker = browser.find_element_by_class_name('chart-data-window-header')\n    tickerClean = ticker.text.split(',')[0]\n    latestClose = browser.find_element_by_xpath('/html/body/div[1]/div[3]/div/div[1]/div[1]/div[3]/div/div[2]/div[1]/div[1]/div[2]/div[4]/div[2]')\n    latestBase = browser.find_element_by_xpath('/html/body/div[1]/div[3]/div/div[1]/div[1]/div[3]/div/div[2]/div[1]/div[3]/div[2]/div[9]/div[2]/span')\n    data.append(title_element.text + ',' + tickerClean + ',' + latestBase.text + ',' + latestClose.text)\n    print('Done' + title_element.text + ',' + tickerClean + ',' + latestBase.text + ',' + latestClose.text)\n</code></pre>\n\n<p>If you are against the <strong>try, catch</strong> method, and would rather not deal with catching exceptions, you can use <code>find_elements</code> to <strong>Truthy check</strong> the existence of the element in a list, and click it if it passes, like this:</p>\n\n<pre><code>for i in (urlList):\n    browser.get(i)\n    if browser.find_elements_by_xpath(\".//div[contains(@class,'wizard-tooltip-btn skip')]\"):\n        browser.find_element_by_xpath(\".//div[contains(@class,'wizard-tooltip-btn skip')]\").click()\n    browser.find_element_by_xpath(\".//div[@data-name='data-window']\").click()\n    title_element = browser.find_element_by_class_name('pane-legend-title__description')\n    ticker = browser.find_element_by_class_name('chart-data-window-header')\n    tickerClean = ticker.text.split(',')[0]\n    latestClose = browser.find_element_by_xpath('/html/body/div[1]/div[3]/div/div[1]/div[1]/div[3]/div/div[2]/div[1]/div[1]/div[2]/div[4]/div[2]')\n    latestBase = browser.find_element_by_xpath('/html/body/div[1]/div[3]/div/div[1]/div[1]/div[3]/div/div[2]/div[1]/div[3]/div[2]/div[9]/div[2]/span')\n    data.append(title_element.text + ',' + tickerClean + ',' + latestBase.text + ',' + latestClose.text)\n    print('Done' + title_element.text + ',' + tickerClean + ',' + latestBase.text + ',' + latestClose.text)\n</code></pre>\n\n<p>I could not tell by the wording of the question, but if you did <strong><em>not</em></strong> want to run the rest of the statements in the loop after you found and clicked the element, add a <code>continue</code> after it passes to whichever example you chose, as such:</p>\n\n<pre><code>try:\n    browser.find_element_by_xpath(\".//div[contains(@class,'wizard-tooltip-btn skip')]\").click()\n    continue\nexcept (ElementNotVisibleException, NoSuchElementException):\n    pass\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>if browser.find_elements_by_xpath(\".//div[contains(@class,'wizard-tooltip-btn skip')]\"):\n    browser.find_element_by_xpath(\".//div[contains(@class,'wizard-tooltip-btn skip')]\").click()\n    continue\n</code></pre>\n\n<p>The <code>continue</code> will go to the next item in the loop without running the statements after the click.</p>\n"}], "owner": {"reputation": 57, "user_id": 3997815, "user_type": "registered", "profile_image": "https://graph.facebook.com/774930580/picture?type=large", "display_name": "MaynardOne", "link": "https://stackoverflow.com/users/3997815/maynardone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1241, "favorite_count": 0, "accepted_answer_id": 51643461, "answer_count": 1, "score": 1, "last_activity_date": 1533170811, "creation_date": 1533156066, "question_id": 51641950, "link": "https://stackoverflow.com/questions/51641950/selenium-check-if-element-exist-i-loop-if-true-click-if-not-continue", "title": "Selenium: Check if element exist i loop, if true, click, if not continue", "body": "<p>I'm trying to solve a issue which I cant wrap my head around whats the best solution for Selenium. </p>\n\n<p>I want to check if a element exist and is displayed. If it is, click it and close it and continue with the rest of the code code. I want evaluate this for each loop to go through my list.</p>\n\n<p>Example/pseudo code as of now:</p>\n\n<p>...</p>\n\n<pre><code>for i in (urlList):\n    browser.get(i)\n    if #element exist and is displayed (//div[contains(@class,'wizard-tooltip-btn skip'))\n       # Find it and click/close it (browser.find_element_by_xpath(\".//div[contains(@class,'wizard-tooltip-btn skip')]\").click())\n    else:\n    browser.find_element_by_xpath(\".//div[@data-name='data-window']\").click()\n    title_element = browser.find_element_by_class_name('pane-legend-title__description')\n    ticker = browser.find_element_by_class_name('chart-data-window-header')\n    tickerClean = ticker.text.split(',')[0]\n    latestClose = browser.find_element_by_xpath('/html/body/div[1]/div[3]/div/div[1]/div[1]/div[3]/div/div[2]/div[1]/div[1]/div[2]/div[4]/div[2]')\n    latestBase = browser.find_element_by_xpath('/html/body/div[1]/div[3]/div/div[1]/div[1]/div[3]/div/div[2]/div[1]/div[3]/div[2]/div[9]/div[2]/span')\n    data.append(title_element.text + ',' + tickerClean + ',' + latestBase.text + ',' + latestClose.text)\n    print('Done' + title_element.text + ',' + tickerClean + ',' + latestBase.text + ',' + latestClose.text)\n</code></pre>\n\n<p>...</p>\n"}, {"tags": ["python", "keras", "deep-learning"], "comments": [{"owner": {"reputation": 1568, "user_id": 8793975, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/086643c7f3fafe914727c51882e974bc?s=128&d=identicon&r=PG&f=1", "display_name": "enumaris", "link": "https://stackoverflow.com/users/8793975/enumaris"}, "edited": false, "score": 0, "creation_date": 1533157136, "post_id": 51641921, "comment_id": 90248785, "body": "How is your data distributed? Are your class distributions skewed?"}, {"owner": {"reputation": 616, "user_id": 8005143, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c7663462a2ff4344b2715e808f088c2b?s=128&d=identicon&r=PG&f=1", "display_name": "Kevinj22", "link": "https://stackoverflow.com/users/8005143/kevinj22"}, "edited": false, "score": 0, "creation_date": 1533157347, "post_id": 51641921, "comment_id": 90248872, "body": "Depends on the size of the model, the size of the dataset, and the difficulty of the dataset. A very large model will fit very quickly to a very small dataset. For example a CNN for image classification can fit to MNIST, a dataset of 60 000 training images within a few epochs with an accuracy of 90+%."}], "answers": [{"tags": [], "owner": {"reputation": 663, "user_id": 7189440, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/00c2b57447adc15c5879e38a16d67e7d?s=128&d=identicon&r=PG", "display_name": "AstroBen", "link": "https://stackoverflow.com/users/7189440/astroben"}, "is_accepted": true, "score": 1, "last_activity_date": 1533170231, "creation_date": 1533170231, "answer_id": 51644039, "question_id": 51641921, "link": "https://stackoverflow.com/questions/51641921/is-it-normal-to-have-a-high-accuracy-in-the-training-from-the-beginning-in-keras/51644039#51644039", "title": "Is it normal to have a high accuracy in the training from the beginning in keras?", "body": "<p>If you are using mini-batches during fitting, you can watch the accuracy and loss change during each iteration. Your first few mini-batches will probably be terrible and then jump up around half-way through if the optimizer has found a reasonable local minimum. I've had this happen a lot; it depends a lot on which optimizer I use, the size of the model, and the amount of data. On its own, it isn't necessarily a bad thing. But be sure to check for over-fitting with a test set. </p>\n"}], "owner": {"reputation": 9, "user_id": 10167839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1d0a48ff388a6a71328a8d5aa7863bd?s=128&d=identicon&r=PG&f=1", "display_name": "Rahoobah", "link": "https://stackoverflow.com/users/10167839/rahoobah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 853, "favorite_count": 0, "accepted_answer_id": 51644039, "answer_count": 1, "score": -1, "last_activity_date": 1533170231, "creation_date": 1533155871, "question_id": 51641921, "link": "https://stackoverflow.com/questions/51641921/is-it-normal-to-have-a-high-accuracy-in-the-training-from-the-beginning-in-keras", "title": "Is it normal to have a high accuracy in the training from the beginning in keras?", "body": "<p>I am training a model that does image captioning. I noticed that my model get a very high training accuracy in the first epoch  ( around 89%)as well as the validation accuracy. Actually the training accuracy starts in a very high point from the beginning of the first epoch, it starts around %60 and goes up to %80 very fast. That does not make sense to me because the model learns very fast with a very high accuracy in the beginning.\n  <a href=\"https://i.stack.imgur.com/xSFBh.png\" rel=\"nofollow noreferrer\">Here is a screenshot of the output</a></p>\n"}, {"tags": ["python", "json", "microsoft-graph-api"], "comments": [{"owner": {"reputation": 115, "user_id": 866419, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/47139e1e130f55a7517a3604be7ce53a?s=128&d=identicon&r=PG", "display_name": "Filip Nilsson", "link": "https://stackoverflow.com/users/866419/filip-nilsson"}, "edited": false, "score": 0, "creation_date": 1533159368, "post_id": 51641918, "comment_id": 90249615, "body": "Does the iteration over <code>data.value</code> work as you expect? I.e are you getting empty rows and columns where you would like the <code>gd.displayname</code> to be rendered? If they are rendered, are they just empty or do they contain any value? Do you get any errors while rendering the template?"}, {"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 0, "creation_date": 1533160570, "post_id": 51641918, "comment_id": 90249995, "body": "What is the question?"}, {"owner": {"reputation": 109, "user_id": 7095915, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-R4JKxYlTUas/AAAAAAAAAAI/AAAAAAAAAUs/EXyhUs17pfM/photo.jpg?sz=128", "display_name": "Jplaudir8", "link": "https://stackoverflow.com/users/7095915/jplaudir8"}, "reply_to_user": {"reputation": 115, "user_id": 866419, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/47139e1e130f55a7517a3604be7ce53a?s=128&d=identicon&r=PG", "display_name": "Filip Nilsson", "link": "https://stackoverflow.com/users/866419/filip-nilsson"}, "edited": false, "score": 0, "creation_date": 1533161337, "post_id": 51641918, "comment_id": 90250195, "body": "@FilipNilsson Well, my app doesnt fall to an error, but it displays empty rows, like if there was no data, I&#39;m gonna upload a picture of the result"}, {"owner": {"reputation": 109, "user_id": 7095915, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-R4JKxYlTUas/AAAAAAAAAAI/AAAAAAAAAUs/EXyhUs17pfM/photo.jpg?sz=128", "display_name": "Jplaudir8", "link": "https://stackoverflow.com/users/7095915/jplaudir8"}, "reply_to_user": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 0, "creation_date": 1533161635, "post_id": 51641918, "comment_id": 90250284, "body": "@zvone I just highlighted it"}, {"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 1, "creation_date": 1533162000, "post_id": 51641918, "comment_id": 90250386, "body": "@Jplaudir8 From the form of the question (you just pasted everything), I gather you have no idea where the problem may be. So, I suggest you simplify it. For example, ignore the actual input data you have and hard-code some <code>graph_data</code> which should work. Another approach, since you are trying to use <code>graph_data.value</code> in the jinja (I guess) template, try a <code>print graph_data.value</code> in Python. I have a feeling it won&#39;t work."}, {"owner": {"reputation": 109, "user_id": 7095915, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-R4JKxYlTUas/AAAAAAAAAAI/AAAAAAAAAUs/EXyhUs17pfM/photo.jpg?sz=128", "display_name": "Jplaudir8", "link": "https://stackoverflow.com/users/7095915/jplaudir8"}, "edited": false, "score": 0, "creation_date": 1533162254, "post_id": 51641918, "comment_id": 90250457, "body": "well, hmm when i wanted to list just the users, the graph.value worked out, but now that im retrieving nested data (groups and their users), it gets harder to access the elements."}, {"owner": {"reputation": 115, "user_id": 866419, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/47139e1e130f55a7517a3604be7ce53a?s=128&d=identicon&r=PG", "display_name": "Filip Nilsson", "link": "https://stackoverflow.com/users/866419/filip-nilsson"}, "reply_to_user": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 0, "creation_date": 1533173928, "post_id": 51641918, "comment_id": 90252795, "body": "@zvone: It feels like you are using the correct syntax in jinja (if the data indeed looks like it should). About the error message, what does it say? I would also follow the advice in another comment, try doing something like: <code>[print(gd.displayname) for gd in graph_data.values]</code>, or without parentheses around the print argument if you are using python 2. That way you can see what data you actually have."}, {"owner": {"reputation": 109, "user_id": 7095915, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-R4JKxYlTUas/AAAAAAAAAAI/AAAAAAAAAUs/EXyhUs17pfM/photo.jpg?sz=128", "display_name": "Jplaudir8", "link": "https://stackoverflow.com/users/7095915/jplaudir8"}, "edited": false, "score": 0, "creation_date": 1533174361, "post_id": 51641918, "comment_id": 90252889, "body": "I am using python 3.6, oh ok filip im gonna check"}], "owner": {"reputation": 109, "user_id": 7095915, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-R4JKxYlTUas/AAAAAAAAAAI/AAAAAAAAAUs/EXyhUs17pfM/photo.jpg?sz=128", "display_name": "Jplaudir8", "link": "https://stackoverflow.com/users/7095915/jplaudir8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 290, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1533161597, "creation_date": 1533155858, "last_edit_date": 1533161597, "question_id": 51641918, "link": "https://stackoverflow.com/questions/51641918/accessing-specific-json-nested-data-obtained-from-microsoft-graph-api", "title": "Accessing specific JSON nested data obtained from Microsoft Graph API", "body": "<p>Currently I'm working on an application in which I retrieved data from an azure active directory through microsoft's graph API, I will have to use this data to display it in a html table because the way I obtain the data is not easy to read, the json format file is stored in the <code>graph_data</code> variable that you will see later:</p>\n\n<pre><code>value [  \n       {  \n          'id':'38d0d6ab-3c35-407a-9524-b9bdc84791e3',\n          'deletedDateTime':None,\n          'classification':None,\n          'createdDateTime':'2018-07-05T14:46:35Z',\n          'creationOptions':[  \n\n          ],\n      'description':'Members of this group receive staff filtering policies',\n      'displayName':'staff',\n      'groupTypes':[  \n\n      ],\n      'mail':None,\n      'mailEnabled':False,\n      'mailNickname':'fdbdda4e-1b03-4668-98b0-5cafbc3f218b',\n      'onPremisesLastSyncDateTime':None,\n      'onPremisesProvisioningErrors':[  \n\n      ],\n      'onPremisesSecurityIdentifier':None,\n      'onPremisesSyncEnabled':None,\n      'preferredDataLocation':None,\n      'proxyAddresses':[  \n\n      ],\n      'renewedDateTime':'2018-07-05T14:46:35Z',\n      'resourceBehaviorOptions':[  \n\n      ],\n      'resourceProvisioningOptions':[  \n\n      ],\n      'securityEnabled':True,\n      'visibility':None,\n      'members':[  \n         {  \n            '@odata.type':'#microsoft.graph.user',\n            'id':'a205ea5f-f498-4841-b487-72398c88a3d6',\n            'deletedDateTime':None,\n            'accountEnabled':True,\n            'ageGroup':'Undefined',\n            'businessPhones':[  \n\n            ],\n            'city':None,\n            'companyName':None,\n            'consentProvidedForMinor':'None',\n            'country':None,\n            'createdDateTime':None,\n            'department':'Information Technology',\n            'displayName':'Yipin Lu',\n            'givenName':'Yipin',\n            'jobTitle':'Consultant',\n            'legalAgeGroupClassification':'Undefined',\n            'mail':None,\n            'mailNickname':'yipinlu',\n            'mobilePhone':None,\n            'onPremisesImmutableId':None,\n            'onPremisesLastSyncDateTime':None,\n            'onPremisesProvisioningErrors':[  \n\n            ],\n            'onPremisesSecurityIdentifier':None,\n            'onPremisesSyncEnabled':None,\n            'passwordPolicies':None,\n            'passwordProfile':None,\n            'officeLocation':None,\n            'onPremisesExtensionAttributes':{  \n               'extensionAttribute1':None,\n               'extensionAttribute2':None,\n               'extensionAttribute3':None,\n               'extensionAttribute4':None,\n               'extensionAttribute5':None,\n               'extensionAttribute6':None,\n               'extensionAttribute7':None,\n               'extensionAttribute8':None,\n               'extensionAttribute9':None,\n               'extensionAttribute10':None,\n               'extensionAttribute11':None,\n               'extensionAttribute12':None,\n               'extensionAttribute13':None,\n               'extensionAttribute14':None,\n               'extensionAttribute15':None\n            },\n            'postalCode':None,\n            'preferredLanguage':None,\n            'proxyAddresses':[  \n\n            ],\n            'imAddresses':[  \n\n            ],\n            'isResourceAccount':None,\n            'state':None,\n            'streetAddress':None,\n            'surname':'Lu',\n            'usageLocation':None,\n            'userPrincipalName':'yipinlu@joanperez5hotmail.onmicrosoft.com',\n            'userType':'Member',\n            'assignedLicenses':[  \n\n            ],\n            'assignedPlans':[  \n\n            ],\n            'provisionedPlans':[  \n\n            ]\n         },\n         {  \n            '@odata.type':'#microsoft.graph.user',\n            'id':'fa576dbe-3f7f-44f6-9db1-60908999f3f9',\n            'deletedDateTime':None,\n            'accountEnabled':True,\n            'ageGroup':'Undefined',\n            'businessPhones':[  \n\n            ],\n            'city':None,\n            'companyName':None,\n            'consentProvidedForMinor':'None',\n            'country':None,\n            'createdDateTime':None,\n            'department':'Information Technology',\n            'displayName':'Joan Perez',\n            'givenName':'Joan',\n            'jobTitle':'Consultant',\n            'legalAgeGroupClassification':'Undefined',\n            'mail':None,\n            'mailNickname':'joanperez',\n            'mobilePhone':None,\n            'onPremisesImmutableId':None,\n            'onPremisesLastSyncDateTime':None,\n            'onPremisesProvisioningErrors':[  \n\n            ],\n            'onPremisesSecurityIdentifier':None,\n            'onPremisesSyncEnabled':None,\n            'passwordPolicies':None,\n            'officeLocation':None,\n            'onPremisesExtensionAttributes':{  \n               'extensionAttribute1':None,\n               'extensionAttribute2':None,\n               'extensionAttribute3':None,\n               'extensionAttribute4':None,\n               'extensionAttribute5':None,\n               'extensionAttribute6':None,\n               'extensionAttribute7':None,\n               'extensionAttribute8':None,\n               'extensionAttribute9':None,\n               'extensionAttribute10':None,\n               'extensionAttribute11':None,\n               'extensionAttribute12':None,\n               'extensionAttribute13':None,\n               'extensionAttribute14':None,\n               'extensionAttribute15':None\n            },\n            'postalCode':None,\n            'preferredLanguage':None,\n            'proxyAddresses':[  \n\n            ],\n            'imAddresses':[  \n\n            ],\n            'isResourceAccount':None,\n            'state':None,\n            'streetAddress':None,\n            'surname':'Perez Lozano',\n            'usageLocation':None,\n            'userPrincipalName':'joanperez@joanperez5hotmail.onmicrosoft.com',\n            'userType':'Member',\n            'assignedLicenses':[  \n\n            ],\n            'assignedPlans':[  \n\n            ],\n            'passwordProfile':{  \n               'password':None,\n               'forceChangePasswordNextSignIn':True\n            },\n            'provisionedPlans':[  \n\n            ]\n         },\n         {  \n            '@odata.type':'#microsoft.graph.user',\n            'id':'d3902696-5de8-40ad-ad25-6bc72a58306b',\n            'deletedDateTime':None,\n            'accountEnabled':True,\n            'ageGroup':'Undefined',\n            'businessPhones':[  \n\n            ],\n            'city':None,\n            'companyName':None,\n            'consentProvidedForMinor':'None',\n            'country':None,\n            'createdDateTime':None,\n            'department':'Information Technology',\n            'displayName':'Dayamarali Espinosa',\n            'givenName':'Dayamarli',\n            'jobTitle':'Consultant',\n            'legalAgeGroupClassification':'Undefined',\n            'mail':None,\n            'mailNickname':'dayaespinoza',\n            'mobilePhone':None,\n            'onPremisesImmutableId':None,\n            'onPremisesLastSyncDateTime':None,\n            'onPremisesProvisioningErrors':[  \n\n            ],\n            'onPremisesSecurityIdentifier':None,\n            'onPremisesSyncEnabled':None,\n            'passwordPolicies':None,\n            'officeLocation':None,\n            'onPremisesExtensionAttributes':{  \n               'extensionAttribute1':None,\n               'extensionAttribute2':None,\n               'extensionAttribute3':None,\n               'extensionAttribute4':None,\n               'extensionAttribute5':None,\n               'extensionAttribute6':None,\n               'extensionAttribute7':None,\n               'extensionAttribute8':None,\n               'extensionAttribute9':None,\n               'extensionAttribute10':None,\n               'extensionAttribute11':None,\n               'extensionAttribute12':None,\n               'extensionAttribute13':None,\n               'extensionAttribute14':None,\n               'extensionAttribute15':None\n            },\n            'postalCode':None,\n            'preferredLanguage':None,\n            'proxyAddresses':[  \n\n            ],\n            'imAddresses':[  \n\n            ],\n            'isResourceAccount':None,\n            'state':None,\n            'streetAddress':None,\n            'surname':'Espinosa',\n            'usageLocation':None,\n            'userPrincipalName':'dayaespinosa@joanperez5hotmail.onmicrosoft.com',\n            'userType':'Member',\n            'assignedLicenses':[  \n\n            ],\n            'assignedPlans':[  \n\n            ],\n            'passwordProfile':{  \n               'password':None,\n               'forceChangePasswordNextSignIn':True\n            },\n            'provisionedPlans':[  \n\n            ]\n         }\n      ]\n   },\n   {  \n      'id':'3a2141f3-b1ed-4d79-a88f-3bcff708957e',\n      'deletedDateTime':None,\n      'classification':None,\n      'createdDateTime':'2018-07-10T20:54:55Z',\n      'creationOptions':[  \n\n      ],\n      'description':'This group of users are the summer interns of 2018',\n      'displayName':'Interns',\n      'groupTypes':[  \n\n      ],\n      'mail':None,\n      'mailEnabled':False,\n      'mailNickname':'a3264998-68b2-4174-81d3-74b1b2238091',\n      'onPremisesLastSyncDateTime':None,\n      'onPremisesProvisioningErrors':[  \n\n      ],\n      'onPremisesSecurityIdentifier':None,\n      'onPremisesSyncEnabled':None,\n      'preferredDataLocation':None,\n      'proxyAddresses':[  \n\n      ],\n      'renewedDateTime':'2018-07-10T20:54:55Z',\n      'resourceBehaviorOptions':[  \n\n      ],\n      'resourceProvisioningOptions':[  \n\n      ],\n      'securityEnabled':True,\n      'visibility':None,\n      'members':[  \n         {  \n            '@odata.type':'#microsoft.graph.user',\n            'id':'0efcf3fe-86a0-48dc-a698-13eed7e0095b',\n            'deletedDateTime':None,\n            'accountEnabled':True,\n            'ageGroup':None,\n            'businessPhones':[  \n\n            ],\n            'city':None,\n            'companyName':None,\n            'consentProvidedForMinor':None,\n            'country':None,\n            'createdDateTime':None,\n            'department':'Information Technology',\n            'displayName':'Cristiano Ronaldo',\n            'givenName':'Cristiano',\n            'jobTitle':'Intern',\n            'legalAgeGroupClassification':None,\n            'mail':None,\n            'mailNickname':'cristianoro',\n            'mobilePhone':None,\n            'onPremisesImmutableId':None,\n            'onPremisesLastSyncDateTime':None,\n            'onPremisesProvisioningErrors':[  \n\n            ],\n            'onPremisesSecurityIdentifier':None,\n            'onPremisesSyncEnabled':None,\n            'passwordPolicies':None,\n            'officeLocation':None,\n            'onPremisesExtensionAttributes':{  \n               'extensionAttribute1':None,\n               'extensionAttribute2':None,\n               'extensionAttribute3':None,\n               'extensionAttribute4':None,\n               'extensionAttribute5':None,\n               'extensionAttribute6':None,\n               'extensionAttribute7':None,\n               'extensionAttribute8':None,\n               'extensionAttribute9':None,\n               'extensionAttribute10':None,\n               'extensionAttribute11':None,\n               'extensionAttribute12':None,\n               'extensionAttribute13':None,\n               'extensionAttribute14':None,\n               'extensionAttribute15':None\n            },\n            'postalCode':None,\n            'preferredLanguage':None,\n            'proxyAddresses':[  \n\n            ],\n            'imAddresses':[  \n\n            ],\n            'isResourceAccount':None,\n            'state':None,\n            'streetAddress':None,\n            'surname':'Ronaldo',\n            'usageLocation':None,\n            'userPrincipalName':'cristianoro@joanperez5hotmail.onmicrosoft.com',\n            'userType':'Member',\n            'assignedLicenses':[  \n\n            ],\n            'assignedPlans':[  \n\n            ],\n            'passwordProfile':{  \n               'password':None,\n               'forceChangePasswordNextSignIn':True\n            },\n            'provisionedPlans':[  \n\n            ]\n         },\n         {  \n            '@odata.type':'#microsoft.graph.user',\n            'id':'3009b0bb-8420-4a76-8313-300f3d6559c0',\n            'deletedDateTime':None,\n            'accountEnabled':True,\n            'ageGroup':None,\n            'businessPhones':[  \n\n            ],\n            'city':None,\n            'companyName':None,\n            'consentProvidedForMinor':None,\n            'country':None,\n            'createdDateTime':None,\n            'department':'Information Technology',\n            'displayName':'Lionel Messi',\n            'givenName':'Lionel',\n            'jobTitle':'Intern',\n            'legalAgeGroupClassification':None,\n            'mail':None,\n            'mailNickname':'lionelme',\n            'mobilePhone':None,\n            'onPremisesImmutableId':None,\n            'onPremisesLastSyncDateTime':None,\n            'onPremisesProvisioningErrors':[  \n\n            ],\n            'onPremisesSecurityIdentifier':None,\n            'onPremisesSyncEnabled':None,\n            'passwordPolicies':None,\n            'officeLocation':None,\n            'onPremisesExtensionAttributes':{  \n               'extensionAttribute1':None,\n               'extensionAttribute2':None,\n               'extensionAttribute3':None,\n               'extensionAttribute4':None,\n               'extensionAttribute5':None,\n               'extensionAttribute6':None,\n               'extensionAttribute7':None,\n               'extensionAttribute8':None,\n               'extensionAttribute9':None,\n               'extensionAttribute10':None,\n               'extensionAttribute11':None,\n               'extensionAttribute12':None,\n               'extensionAttribute13':None,\n               'extensionAttribute14':None,\n               'extensionAttribute15':None\n            },\n            'postalCode':None,\n            'preferredLanguage':None,\n            'proxyAddresses':[  \n\n            ],\n            'imAddresses':[  \n\n            ],\n            'isResourceAccount':None,\n            'state':None,\n            'streetAddress':None,\n            'surname':'Messi',\n            'usageLocation':None,\n            'userPrincipalName':'lionelme@joanperez5hotmail.onmicrosoft.com',\n            'userType':'Member',\n            'assignedLicenses':[  \n\n            ],\n            'assignedPlans':[  \n\n            ],\n            'passwordProfile':{  \n               'password':None,\n               'forceChangePasswordNextSignIn':True\n            },\n            'provisionedPlans':[  \n\n            ]\n         },\n         {  \n            '@odata.type':'#microsoft.graph.user',\n            'id':'4fc82cba-ee4a-4829-a722-b5df1ee02188',\n            'deletedDateTime':None,\n            'accountEnabled':True,\n            'ageGroup':None,\n            'businessPhones':[  \n\n            ],\n            'city':None,\n            'companyName':None,\n            'consentProvidedForMinor':None,\n            'country':None,\n            'createdDateTime':None,\n            'department':'Information Technology',\n            'displayName':'Antoine Griezmann',\n            'givenName':'Antoine',\n            'jobTitle':'Intern',\n            'legalAgeGroupClassification':None,\n            'mail':None,\n            'mailNickname':'antoinegr',\n            'mobilePhone':None,\n            'onPremisesImmutableId':None,\n            'onPremisesLastSyncDateTime':None,\n            'onPremisesProvisioningErrors':[  \n\n            ],\n            'onPremisesSecurityIdentifier':None,\n            'onPremisesSyncEnabled':None,\n            'passwordPolicies':None,\n            'officeLocation':None,\n            'onPremisesExtensionAttributes':{  \n               'extensionAttribute1':None,\n               'extensionAttribute2':None,\n               'extensionAttribute3':None,\n               'extensionAttribute4':None,\n               'extensionAttribute5':None,\n               'extensionAttribute6':None,\n               'extensionAttribute7':None,\n               'extensionAttribute8':None,\n               'extensionAttribute9':None,\n               'extensionAttribute10':None,\n               'extensionAttribute11':None,\n               'extensionAttribute12':None,\n               'extensionAttribute13':None,\n               'extensionAttribute14':None,\n               'extensionAttribute15':None\n            },\n            'postalCode':None,\n            'preferredLanguage':None,\n            'proxyAddresses':[  \n\n            ],\n            'imAddresses':[  \n\n            ],\n            'isResourceAccount':None,\n            'state':None,\n            'streetAddress':None,\n            'surname':'Griezmann',\n            'usageLocation':None,\n            'userPrincipalName':'antoinegr@joanperez5hotmail.onmicrosoft.com',\n            'userType':'Member',\n            'assignedLicenses':[  \n\n            ],\n            'assignedPlans':[  \n\n            ],\n            'passwordProfile':{  \n               'password':None,\n               'forceChangePasswordNextSignIn':True\n            },\n            'provisionedPlans':[  \n\n            ]\n         },\n         {  \n            '@odata.type':'#microsoft.graph.user',\n            'id':'58f4b229-293b-4890-be5a-724dfcb59565',\n            'deletedDateTime':None,\n            'accountEnabled':True,\n            'ageGroup':None,\n            'businessPhones':[  \n\n            ],\n            'city':None,\n            'companyName':None,\n            'consentProvidedForMinor':None,\n            'country':None,\n            'createdDateTime':None,\n            'department':'Information Technology',\n            'displayName':'Paul Pogba',\n            'givenName':'Paul',\n            'jobTitle':'Intern',\n            'legalAgeGroupClassification':None,\n            'mail':None,\n            'mailNickname':'paulpo',\n            'mobilePhone':None,\n            'onPremisesImmutableId':None,\n            'onPremisesLastSyncDateTime':None,\n            'onPremisesProvisioningErrors':[  \n\n            ],\n            'onPremisesSecurityIdentifier':None,\n            'onPremisesSyncEnabled':None,\n            'passwordPolicies':None,\n            'officeLocation':None,\n            'onPremisesExtensionAttributes':{  \n               'extensionAttribute1':None,\n               'extensionAttribute2':None,\n               'extensionAttribute3':None,\n               'extensionAttribute4':None,\n               'extensionAttribute5':None,\n               'extensionAttribute6':None,\n               'extensionAttribute7':None,\n               'extensionAttribute8':None,\n               'extensionAttribute9':None,\n               'extensionAttribute10':None,\n               'extensionAttribute11':None,\n               'extensionAttribute12':None,\n               'extensionAttribute13':None,\n               'extensionAttribute14':None,\n               'extensionAttribute15':None\n            },\n            'postalCode':None,\n            'preferredLanguage':None,\n            'proxyAddresses':[  \n\n            ],\n            'imAddresses':[  \n\n            ],\n            'isResourceAccount':None,\n            'state':None,\n            'streetAddress':None,\n            'surname':'Pogba',\n            'usageLocation':None,\n            'userPrincipalName':'paulpo@joanperez5hotmail.onmicrosoft.com',\n            'userType':'Member',\n            'assignedLicenses':[  \n\n            ],\n            'assignedPlans':[  \n\n            ],\n            'passwordProfile':{  \n               'password':None,\n               'forceChangePasswordNextSignIn':True\n            },\n            'provisionedPlans':[  \n\n            ]\n         }\n      ]\n   }\n]\n</code></pre>\n\n<p>This data is a list of the groups and their users in an azure active directory. <strong>So in the html table I would like to know how to list the display name of the group and the user's principal name.</strong></p>\n\n<p>this is the code in which I apply the HTTP request:</p>\n\n<pre><code>import adal\nimport flask #web framework\nimport uuid\nimport requests\n\nimport config\n\napp = flask.Flask(__name__)\napp.debug = True\napp.secret_key = 'development'\n\nPORT = 5000  # A flask app by default runs on PORT 5000\nAUTHORITY_URL = config.AUTHORITY_HOST_URL + '/' + config.TENANT\nREDIRECT_URI = 'http://localhost:{}/getAToken'.format(PORT)\nTEMPLATE_AUTHZ_URL = ('https://login.microsoftonline.com/{}/oauth2/authorize?' +\n                      'response_type=code&amp;client_id={}&amp;redirect_uri={}&amp;' +\n                      'state={}&amp;resource={}')\n\n\n@app.route(\"/\")\ndef main():\n    login_url = 'http://localhost:{}/login'.format(PORT)\n    resp = flask.Response(status=307)\n    resp.headers['location'] = login_url\n    return resp\n\n\n@app.route(\"/login\")\ndef login():\n    auth_state = str(uuid.uuid4())\n    flask.session['state'] = auth_state\n    authorization_url = TEMPLATE_AUTHZ_URL.format(\n        config.TENANT,\n        config.CLIENT_ID,\n        REDIRECT_URI,\n        auth_state,\n        config.RESOURCE)\n    resp = flask.Response(status=307)\n    resp.headers['location'] = authorization_url\n    return resp\n\n\n@app.route(\"/getAToken\")\ndef main_logic():\n    code = flask.request.args['code']\n    state = flask.request.args['state']\n    if state != flask.session['state']:\n        raise ValueError(\"State does not match\")\n    auth_context = adal.AuthenticationContext(AUTHORITY_URL)\n    token_response = auth_context.acquire_token_with_authorization_code(code, REDIRECT_URI, config.RESOURCE,\n                                                                        config.CLIENT_ID, config.CLIENT_SECRET)\n    # It is recommended to save this to a database when using a production app.\n    flask.session['access_token'] = token_response['accessToken']\n\n    return flask.redirect('/graphcall')\n\n\n@app.route('/graphcall')\ndef graphcall():\n    if 'access_token' not in flask.session:\n        return flask.redirect(flask.url_for('login'))\n    endpoint = config.RESOURCE + '/' + config.API_VERSION + '/groups/?$expand=members' #https://graph.microsoft.com/v1.0/groups/\n    http_headers = {'Authorization': flask.session.get('access_token'),\n                    'User-Agent': 'adal-python-sample',\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json',\n                    'client-request-id': str(uuid.uuid4())}\n    graph_data = requests.get(endpoint, headers=http_headers, stream=False).json()\n\n    return flask.render_template('homePage_2.html', graph_data=graph_data)\n\n\nif __name__ == \"__main__\":\n    app.run()\n</code></pre>\n\n<p>this <code>graph_data</code> variable is accessed from my html file and this is my attempts to get the data I need:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n    &lt;meta charset=\"UTF-8\"&gt;\n    &lt;title&gt;ADVS&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1 style=\"text-align:center\"&gt;Active Directory Viewer System&lt;/h1&gt;\n    &lt;h2&gt;Welcome, Yipin!&lt;/h2&gt;\n&lt;p1&gt;&lt;b&gt;User Data:&lt;/b&gt; &lt;/p1&gt;\n\n\n&lt;table&gt;\n    &lt;th&gt;Display Name Group&lt;/th&gt;\n    &lt;th&gt;Description of Group&lt;/th&gt;\n    &lt;th&gt;Users&lt;/th&gt;\n    {% for gd in graph_data.value %}\n        &lt;tr&gt;\n\n            &lt;td&gt;{{ gd.displayname }}&lt;/td&gt;&lt;!-- TRYING TO ACCESS THE GROUP DISPLAYNAME--&gt;\n&lt;!-- &lt;td&gt;{{ gd.description }}&lt;/td&gt; TRYING RO ACCESS THE group description--&gt;\n            &lt;!-- &lt;td&gt;{{ gd.user.displayName }}&lt;/td&gt; TRYING TO ACCESS THE USERS DISPLAYNAME--&gt;\n\n        &lt;/tr&gt;\n    {% endfor %}\n&lt;/table&gt;\n\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>When I execute my application, requesting for the data I want, i get my html table with no data:</p>\n\n<p><a href=\"https://i.stack.imgur.com/yKkQX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yKkQX.png\" alt=\"enter image description here\"></a></p>\n\n<p>Thank you!</p>\n"}, {"tags": ["python", "r", "shiny", "shiny-server", "reticulate"], "comments": [{"owner": {"reputation": 652, "user_id": 5757857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61ca141e3116b23f14656644ddd0f679?s=128&d=identicon&r=PG&f=1", "display_name": "dilkash", "link": "https://stackoverflow.com/users/5757857/dilkash"}, "edited": false, "score": 0, "creation_date": 1533156490, "post_id": 51641854, "comment_id": 90248486, "body": "try adding // instead of / in paths"}, {"owner": {"reputation": 416, "user_id": 8436825, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a67afe6ef1713eb45aa855bbf03bf7f6?s=128&d=identicon&r=PG&f=1", "display_name": "Knowledge Seeker", "link": "https://stackoverflow.com/users/8436825/knowledge-seeker"}, "reply_to_user": {"reputation": 652, "user_id": 5757857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61ca141e3116b23f14656644ddd0f679?s=128&d=identicon&r=PG&f=1", "display_name": "dilkash", "link": "https://stackoverflow.com/users/5757857/dilkash"}, "edited": false, "score": 0, "creation_date": 1533156837, "post_id": 51641854, "comment_id": 90248657, "body": "@dilkash nothing worked with this."}], "owner": {"reputation": 416, "user_id": 8436825, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a67afe6ef1713eb45aa855bbf03bf7f6?s=128&d=identicon&r=PG&f=1", "display_name": "Knowledge Seeker", "link": "https://stackoverflow.com/users/8436825/knowledge-seeker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1533155585, "creation_date": 1533155585, "question_id": 51641854, "link": "https://stackoverflow.com/questions/51641854/error-in-py-run-file-impl-system-exit-no-such-file-or-directory", "title": "Error in py_run_file_impl: System Exit: No such file or directory", "body": "<p>I'm trying to run <code>Task1.py</code> via Shiny framework of <code>R</code> in <code>Task1.r</code>. Python code is successfully running. But it is giving me error in some line.</p>\n\n<p><strong><em>Task1.py:</em></strong></p>\n\n<pre><code>   ...\n    ... \n   params.override(...) //This line is running fine and giving desired output\n   params.process()  //This line is giving error that file doesn't exists\n    ...\n   ...\n</code></pre>\n\n<p><strong><em>Task1.r:</em></strong></p>\n\n<pre><code>observeEvent(input$action_retrain_1,{\n...\n ...                \npy_run_file(\"D:/..../Task1.py\")\n ...\n...\n  })\n</code></pre>\n\n<p><strong><em>Previously asked question that I'm following to resolve error:</em></strong></p>\n\n<p><a href=\"https://stackoverflow.com/questions/5568847/how-to-open-csv-file-in-r-when-r-says-no-such-file-or-directory\">How to open CSV file in R when R says &quot;no such file or directory&quot;?</a></p>\n\n<p><strong><em>Effort to resolve error:</em></strong></p>\n\n<p>I used following two lines before <code>py_run_file()</code>, but it is still giving me same error. What should I do? What am I missing?</p>\n\n<pre><code>setwd('D:/PycharmProjects/.../sample')\nmyfile = read.csv('D:/PycharmProjects/.../sample/parameters.yaml')\n</code></pre>\n\n<p><strong><em>Error:</em></strong></p>\n\n<pre><code>Warning: Error in py_run_file_impl: SystemExit: [Errno 2] No such file or directory: 'D:/PycharmProjects/.../sample/parameters.yaml'\n  76: &lt;Anonymous&gt;\n</code></pre>\n\n<p><code>parameters.yaml</code> file exists in folder named sample, but I don't know why it is giving me error. I'm running this in Pycharm, there it works well. But it is giving me problem in <code>R</code>. Anyone know how can I resolve this issue?</p>\n"}, {"tags": ["python", "sql", "flask", "sqlalchemy", "flask-sqlalchemy"], "answers": [{"tags": [], "owner": {"reputation": 2891, "user_id": 7233155, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97ca17a34b5f7b188c1bcb230a4701e2?s=128&d=identicon&r=PG&f=1", "display_name": "Attack68", "link": "https://stackoverflow.com/users/7233155/attack68"}, "is_accepted": false, "score": 0, "last_activity_date": 1533156781, "creation_date": 1533156781, "answer_id": 51642091, "question_id": 51641839, "link": "https://stackoverflow.com/questions/51641839/columns-of-different-length-in-sqlalchemy/51642091#51642091", "title": "Columns of different length in SQLalchemy", "body": "<p>The best way of storing financial timeseries data in databases is a hot and deeply divisive subject matter. It very much depends on your volume, focus on realtime access and performance requirements.</p>\n\n<p>For a simple task, I personally would just use a relational database and structure the data as follows:</p>\n\n<p>Table 1: \"Company Details\"<br>\nAttributes: (id (key), code (not null), [nullables: country, address, sector etc..])</p>\n\n<p>Table 2: \"Data\"<br>\nAttributes: (id (key), code (fk: company_code), timestamp (not null), [nullables: stock price, dividend, volume, etc.])</p>\n\n<p>Axis titles and axis units would be implicit from the chart that was constructued by an SQL query getting data for certain attributes of a certain company code between specific timestamps, ordered.</p>\n"}, {"tags": [], "owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "is_accepted": false, "score": 0, "last_activity_date": 1533161535, "last_edit_date": 1533161535, "creation_date": 1533161105, "answer_id": 51642877, "question_id": 51641839, "link": "https://stackoverflow.com/questions/51641839/columns-of-different-length-in-sqlalchemy/51642877#51642877", "title": "Columns of different length in SQLalchemy", "body": "<p>If I understood correctly, your data consists of graphs which have:</p>\n\n<ul>\n<li>graph name</li>\n<li>graph date</li>\n<li>x axis name</li>\n<li>y axis name</li>\n<li>list of values</li>\n</ul>\n\n<p>That would naturally fit into two tables.</p>\n\n<p><strong>Graph table</strong>, with columns:</p>\n\n<ul>\n<li>graph id (auto-incrementing integer primary key)</li>\n<li>graph name</li>\n<li>graph data</li>\n<li>x axis name</li>\n<li>y axis name</li>\n</ul>\n\n<p><strong>Value table</strong>, with columns:</p>\n\n<ul>\n<li>value id (auto-incrementing integer primary key)</li>\n<li>graph id (foreign key linked to the graph id of the graph table)</li>\n<li>value</li>\n</ul>\n\n<hr>\n\n<p><strong>Disclaimers...</strong> ;)</p>\n\n<p>\"graph\" and \"value\" are too generic to be good table names. You should thing of something more appropriate (e.g. stock values), but there is not enough information in the question for me to guess...</p>\n\n<p>Also, it seems strange that you would have axis names in a table. I guess you have a limited number of predefined axis names, for predefined data (e.g. stock price, ). In that case, you probably want to have a separate table in the data base for each of them (e.g. a \"stock price\" table instead of a \"value\" table).</p>\n"}], "owner": {"reputation": 11, "user_id": 10162600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a85f02e2371ed4f7a892e7b003000f11?s=128&d=identicon&r=PG&f=1", "display_name": "GMQuery", "link": "https://stackoverflow.com/users/10162600/gmquery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1533161535, "creation_date": 1533155522, "question_id": 51641839, "link": "https://stackoverflow.com/questions/51641839/columns-of-different-length-in-sqlalchemy", "title": "Columns of different length in SQLalchemy", "body": "<p>I am trying to save data from an online API into an SQLite database using Flask-SQLalchemy. The data is of economic graphs, which include date and value data, as well as graph and axis names. </p>\n\n<p>For this example, let's say that \"value\" data means stock prices. What is the best approach to storing a chart title in the same database as dates and stock prices? </p>\n\n<p>A chart title is one string, while dates and stock prices take up thousands of rows. So far, when I have tried to put them into the same database, I get thousands of \"None\" values, with the actual chart title hidden amongst them.</p>\n\n<p>Is there a specific approach I should use for this type of problem? Should I make two seperate data tables perhaps, one for the date and stock price data, and one for the graph and axis titles?  </p>\n"}, {"tags": ["python", "string", "dictionary"], "comments": [{"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 10, "creation_date": 1533155471, "post_id": 51641812, "comment_id": 90248038, "body": "Your code has syntax errors.."}, {"owner": {"reputation": 851, "user_id": 6308318, "user_type": "registered", "profile_image": "https://graph.facebook.com/771828312918589/picture?type=large", "display_name": "Venkata Gogu", "link": "https://stackoverflow.com/users/6308318/venkata-gogu"}, "edited": false, "score": 2, "creation_date": 1533155553, "post_id": 51641812, "comment_id": 90248075, "body": "Change the syntax of my_dict."}, {"owner": {"reputation": 1518, "user_id": 10000141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac09f6a889c1f8aa3cc060d30be17b7?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/10000141/joel"}, "edited": false, "score": 0, "creation_date": 1533155596, "post_id": 51641812, "comment_id": 90248090, "body": "It&#39;s difficult to understand your question, but it sounds like you want a Counter object from the <code>collections</code> module. <a href=\"https://docs.python.org/3/library/collections.html#collections.Counter\" rel=\"nofollow noreferrer\">Here</a> is the documentation for the Counter object"}, {"owner": {"reputation": 188, "user_id": 10145754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e87b4c38a878a6ea3c1c4dfdf709d1c?s=128&d=identicon&r=PG&f=1", "display_name": "girlwhocodes", "link": "https://stackoverflow.com/users/10145754/girlwhocodes"}, "edited": false, "score": 1, "creation_date": 1533155857, "post_id": 51641812, "comment_id": 90248203, "body": "Sorry about that! I had a previous part of my code assigning the dictionary for me."}], "answers": [{"tags": [], "owner": {"reputation": 105, "user_id": 8268265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52994d02fa33169168b1b43d81040436?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew H.", "link": "https://stackoverflow.com/users/8268265/matthew-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1533155813, "creation_date": 1533155813, "answer_id": 51641911, "question_id": 51641812, "link": "https://stackoverflow.com/questions/51641812/dictionary-just-show-key-and-count/51641911#51641911", "title": "Dictionary just show key and count", "body": "<p>If I am understanding you right, something like this would work,</p>\n\n<pre><code>keys = list(my_dict.keys())\n\nfor key in keys:\n    s = '\"' + key\n    s += '\" - count: ' + str(my_dict[key]['count'])\n    print(s)\n</code></pre>\n\n<p>This would print a list of what you described.</p>\n"}, {"comments": [{"owner": {"reputation": 188, "user_id": 10145754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e87b4c38a878a6ea3c1c4dfdf709d1c?s=128&d=identicon&r=PG&f=1", "display_name": "girlwhocodes", "link": "https://stackoverflow.com/users/10145754/girlwhocodes"}, "edited": false, "score": 0, "creation_date": 1533158573, "post_id": 51641947, "comment_id": 90249345, "body": "Hello, I am trying to add distance too and using the code: a = &#39;&lt;/br&gt;\\n&#39;.join(&#39;{k} - {n}: {v} {m}: {p}&#39;.format(k=k, n=&#39;count&#39;, v=v[&#39;count&#39;] , m=&#39;distance&#39;, p= p[&#39;distance&#39;]) for k,v in d.items())"}, {"owner": {"reputation": 188, "user_id": 10145754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e87b4c38a878a6ea3c1c4dfdf709d1c?s=128&d=identicon&r=PG&f=1", "display_name": "girlwhocodes", "link": "https://stackoverflow.com/users/10145754/girlwhocodes"}, "edited": false, "score": 0, "creation_date": 1533158608, "post_id": 51641947, "comment_id": 90249358, "body": "^that doesn&#39;t seem to work. Could you please explain how what you represented is adding count value so that I can add distance too?"}, {"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "reply_to_user": {"reputation": 188, "user_id": 10145754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e87b4c38a878a6ea3c1c4dfdf709d1c?s=128&d=identicon&r=PG&f=1", "display_name": "girlwhocodes", "link": "https://stackoverflow.com/users/10145754/girlwhocodes"}, "edited": false, "score": 1, "creation_date": 1533159125, "post_id": 51641947, "comment_id": 90249535, "body": "@girlwhocodes <code>v</code> is the <code>value</code> in your <code>key, value</code> tuple (which I called <code>k,v</code>). This k,v tuple is looping through <code>d.items()</code>, which is a sequence of <code>keu, value</code> tuples. Therefore, use <code>v[&#39;distance&#39;]</code> and not <code>p[distance]</code>"}], "tags": [], "owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "is_accepted": true, "score": 2, "last_activity_date": 1533156051, "creation_date": 1533156051, "answer_id": 51641947, "question_id": 51641812, "link": "https://stackoverflow.com/questions/51641812/dictionary-just-show-key-and-count/51641947#51641947", "title": "Dictionary just show key and count", "body": "<p>If <code>d</code> is</p>\n\n<pre><code>&gt;&gt;&gt; d = {\"Hello\": {'count': 2, 'distance': 6}, \"Clear\": {'count': 8, 'distance': 8}}\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>&gt;&gt;&gt; x = '\\n'.join('{k} - {n}: {v}'.format(k=k, n='count', v=v['count']) for k,v in d.items())\n&gt;&gt;&gt; print(x)\n\nHello - count: 2\nClear - count: 8\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 1, "last_activity_date": 1533156141, "creation_date": 1533156141, "answer_id": 51641959, "question_id": 51641812, "link": "https://stackoverflow.com/questions/51641812/dictionary-just-show-key-and-count/51641959#51641959", "title": "Dictionary just show key and count", "body": "<p>Assuming you have a nested dictionary, you can use <code>print</code> with an unpacked generator expression. <code>str.format</code> is one way to extract the relevant data from your dictionary:</p>\n\n<pre><code>my_dict = {\"Hello\": {'count': 2, 'distance': 6},\n           \"Clear\": {'count': 8, 'distance': 8}}\n\nprint(*('{} - count: {}'.format(i, d[i]['count']) for i in d), sep='\\n')\n\nHello - count: 2\nClear - count: 8\n</code></pre>\n"}], "owner": {"reputation": 188, "user_id": 10145754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e87b4c38a878a6ea3c1c4dfdf709d1c?s=128&d=identicon&r=PG&f=1", "display_name": "girlwhocodes", "link": "https://stackoverflow.com/users/10145754/girlwhocodes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 51641947, "answer_count": 3, "score": -1, "last_activity_date": 1533156183, "creation_date": 1533155409, "last_edit_date": 1533156183, "question_id": 51641812, "link": "https://stackoverflow.com/questions/51641812/dictionary-just-show-key-and-count", "title": "Dictionary just show key and count", "body": "<p>I have a dictionary with two keys.</p>\n\n<pre><code>my_dict = {\"Hello\": {'count': 2, 'distance': 6}, \"Clear\": {'count': 8, 'distance': 8}}\n</code></pre>\n\n<p>and I am using </p>\n\n<pre><code>a = ''.join(''.join((k, str(v))) for k,v in my_dict.items())\n</code></pre>\n\n<p>to convert it to string to print:</p>\n\n<pre><code>\"Hello\" {'count': 2, 'distance': 6L} \"Clear\" {'count': 8, 'distance': 9L} \n</code></pre>\n\n<p>I was wondering how I would be able to just get the key and the count \nto print:</p>\n\n<pre><code>\"Hello\" - count: 2\n\"Clear\" - count: 8\n</code></pre>\n"}, {"tags": ["python", "c++", "swig"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1533155789, "post_id": 51641780, "comment_id": 90248168, "body": "What error you do get when you try to run the code?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1533155814, "post_id": 51641780, "comment_id": 90248181, "body": "I don&#39;t think you can do what you are trying to do because the C++ class is an abstract base class. I will wait for somebody more knowledgeable than I to prove me wrong."}, {"owner": {"reputation": 2970, "user_id": 1763955, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/3a7a94d762a9d702b88404f840e31d8f?s=128&d=identicon&r=PG&f=1", "display_name": "Carbon", "link": "https://stackoverflow.com/users/1763955/carbon"}, "edited": false, "score": 0, "creation_date": 1533155959, "post_id": 51641780, "comment_id": 90248249, "body": "Right but my class fulfills the interface"}, {"owner": {"reputation": 2970, "user_id": 1763955, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/3a7a94d762a9d702b88404f840e31d8f?s=128&d=identicon&r=PG&f=1", "display_name": "Carbon", "link": "https://stackoverflow.com/users/1763955/carbon"}, "edited": false, "score": 0, "creation_date": 1533156087, "post_id": 51641780, "comment_id": 90248318, "body": "You get <code>AttributeError: No constructor defined - class is abstract</code> if you include <code>(example.iCat)</code>, if you drop it, you get <code>TypeError: in method &#39;pawGiver&#39;, argument 1 of type &#39;iCat const &amp;&#39;</code>"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1533156180, "post_id": 51641780, "comment_id": 90248348, "body": "@Carbon, I understand the motivation and the expectation. I don&#39;t think SWIG can generate all the intermediate code to make sure that <code>pyCat</code> is instantiable. But then, I am speculating a bit here."}, {"owner": {"reputation": 2970, "user_id": 1763955, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/3a7a94d762a9d702b88404f840e31d8f?s=128&d=identicon&r=PG&f=1", "display_name": "Carbon", "link": "https://stackoverflow.com/users/1763955/carbon"}, "edited": false, "score": 0, "creation_date": 1533156985, "post_id": 51641780, "comment_id": 90248714, "body": "GOT IT! Modify to <code>%module(directors=&quot;1&quot;) example</code> and add <code>%feature(&quot;director&quot;);</code>"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1533157161, "post_id": 51641780, "comment_id": 90248794, "body": "@Carbon, add the solution as an answer."}, {"owner": {"reputation": 9987, "user_id": 3809375, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/EA10l.png?s=128&g=1", "display_name": "BPL", "link": "https://stackoverflow.com/users/3809375/bpl"}, "edited": false, "score": 0, "creation_date": 1533157190, "post_id": 51641780, "comment_id": 90248804, "body": "@Carbon Did you try <code>%feature(&quot;notabstract&quot;)</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 9987, "user_id": 3809375, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/EA10l.png?s=128&g=1", "display_name": "BPL", "link": "https://stackoverflow.com/users/3809375/bpl"}, "edited": false, "score": 2, "creation_date": 1533157461, "post_id": 51642228, "comment_id": 90248935, "body": "Nice catch! here&#39;s the link to the official <a href=\"http://www.swig.org/Doc3.0/SWIGDocumentation.html#Go_director_enable\" rel=\"nofollow noreferrer\">http://www.swig.org/Doc3.0/SWIGDocumentation.html#Go_directo&zwnj;&#8203;r_enable</a>. Both question and answer really interesting ones, so, there we go, +2 ;)"}], "tags": [], "owner": {"reputation": 2970, "user_id": 1763955, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/3a7a94d762a9d702b88404f840e31d8f?s=128&d=identicon&r=PG&f=1", "display_name": "Carbon", "link": "https://stackoverflow.com/users/1763955/carbon"}, "is_accepted": true, "score": 3, "last_activity_date": 1533157384, "creation_date": 1533157384, "answer_id": 51642228, "question_id": 51641780, "link": "https://stackoverflow.com/questions/51641780/how-do-i-make-a-python-class-satisfying-an-interface-in-swig/51642228#51642228", "title": "How do I make a python class satisfying an interface in SWIG?", "body": "<p>Is easy. Modify the interface to:</p>\n\n<pre><code>/* File : example.i */\n%module(directors=\"1\") example\n%{\n#include \"Example.h\"\n%}\n%feature(\"director\");\n%include \"Example.h\"\n</code></pre>\n\n<p>Runs fine.</p>\n"}], "owner": {"reputation": 2970, "user_id": 1763955, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/3a7a94d762a9d702b88404f840e31d8f?s=128&d=identicon&r=PG&f=1", "display_name": "Carbon", "link": "https://stackoverflow.com/users/1763955/carbon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "accepted_answer_id": 51642228, "answer_count": 1, "score": 2, "last_activity_date": 1533157384, "creation_date": 1533155270, "question_id": 51641780, "link": "https://stackoverflow.com/questions/51641780/how-do-i-make-a-python-class-satisfying-an-interface-in-swig", "title": "How do I make a python class satisfying an interface in SWIG?", "body": "<p>I'd like to make an object in Python that sastifies a C++ instance using SWIG.</p>\n\n<p>Given I have an example like <code>Example.h</code>:</p>\n\n<pre><code>struct iCat\n{\n    virtual int paws() const = 0;\n};\n\nint pawGiver(const iCat&amp; cat);\n\nstruct cat : public iCat\n{\n    int paws() const\n    {\n        return 4;\n    }\n};\n</code></pre>\n\n<p>And <code>Example.cpp</code>:</p>\n\n<pre><code>#include \"Example.h\"\nint pawGiver(const iCat&amp; cat)\n{\n    return cat.paws();\n}\n</code></pre>\n\n<p>And <code>example.i</code>:</p>\n\n<pre><code>/* File : example.i */\n%module example\n%{\n#include \"Example.h\"\n%}\n%include \"Example.h\"\n</code></pre>\n\n<p>The above, of course, compile fine. I wrote the below to try to make an <code>iCat</code> in Python, i.e.:</p>\n\n<pre><code>import example;\nclass pyCat(example.iCat):\n     def __init__(self):\n             super().__init__()\n     def paws(self):\n             return 3;\n\nz = pyCat()\nexample.pawGiver(z)\n</code></pre>\n\n<p>Is what I'm trying to do even possible? Can a Python class fulfill a C++ instance? What am I doing wrong?</p>\n"}, {"tags": ["python", "plotly"], "comments": [{"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1533166632, "post_id": 51641741, "comment_id": 90251499, "body": "I deleted my answer since my suggestion of replacing <code>viridis</code> by <code>viridis_r</code> didn&#39;t work out in Plotly. Still you can have a look here: <a href=\"https://plot.ly/matplotlib/colors-and-colormaps/#matplotlib-colorscales\" rel=\"nofollow noreferrer\">plot.ly/matplotlib/colors-and-colormaps/#matplotlib-colorsca&zwnj;&#8203;les</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2677, "user_id": 1294391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1c6f81c14b784ee37f4489bd4b2bc59?s=128&d=identicon&r=PG", "display_name": "Cosyn", "link": "https://stackoverflow.com/users/1294391/cosyn"}, "edited": false, "score": 2, "creation_date": 1554191249, "post_id": 51659869, "comment_id": 97649985, "body": "Here <code>reversescale</code> is used as a property of <code>Heatmap</code>, and it&#39;s also a property of <code>Marker</code>, so it can be used in scatter graphs too."}, {"owner": {"reputation": 2623, "user_id": 5739514, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/79f8410055f0114c31bde3ccc1d56178?s=128&d=identicon&r=PG", "display_name": "HashRocketSyntax", "link": "https://stackoverflow.com/users/5739514/hashrocketsyntax"}, "edited": false, "score": 0, "creation_date": 1613397963, "post_id": 51659869, "comment_id": 117055345, "body": "heads up this does not work on plotly express"}, {"owner": {"reputation": 24305, "user_id": 2776376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/40VxD.gif?s=128&g=1", "display_name": "Maximilian Peters", "link": "https://stackoverflow.com/users/2776376/maximilian-peters"}, "reply_to_user": {"reputation": 2623, "user_id": 5739514, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/79f8410055f0114c31bde3ccc1d56178?s=128&d=identicon&r=PG", "display_name": "HashRocketSyntax", "link": "https://stackoverflow.com/users/5739514/hashrocketsyntax"}, "edited": false, "score": 0, "creation_date": 1613401539, "post_id": 51659869, "comment_id": 117057117, "body": "@HashRocketSyntax thanks for the info! I&#39;ll check if I can add a solution for Plotly express."}, {"owner": {"reputation": 2623, "user_id": 5739514, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/79f8410055f0114c31bde3ccc1d56178?s=128&d=identicon&r=PG", "display_name": "HashRocketSyntax", "link": "https://stackoverflow.com/users/5739514/hashrocketsyntax"}, "edited": false, "score": 0, "creation_date": 1613401622, "post_id": 51659869, "comment_id": 117057160, "body": "[::-1] after the colorscale does it"}, {"owner": {"reputation": 565, "user_id": 3121518, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100000133132380/picture?type=large", "display_name": "user3121518", "link": "https://stackoverflow.com/users/3121518/user3121518"}, "edited": false, "score": 1, "creation_date": 1617508862, "post_id": 51659869, "comment_id": 118322180, "body": "in R it&#39;s reversescale = TRUE"}], "tags": [], "owner": {"reputation": 24305, "user_id": 2776376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/40VxD.gif?s=128&g=1", "display_name": "Maximilian Peters", "link": "https://stackoverflow.com/users/2776376/maximilian-peters"}, "is_accepted": true, "score": 15, "last_activity_date": 1533233492, "creation_date": 1533233492, "answer_id": 51659869, "question_id": 51641741, "link": "https://stackoverflow.com/questions/51641741/plotly-colorscale-reverse-direction/51659869#51659869", "title": "Plotly colorscale reverse direction", "body": "<p>Just add <a href=\"https://plot.ly/python/reference/#heatmap-reversescale\" rel=\"noreferrer\"><code>reversescale = True</code></a> to your plot definition and the colorscale is reversed.</p>\n\n<pre><code>import plotly\nplotly.offline.init_notebook_mode()\ntrace = plotly.graph_objs.Heatmap(z=[[1, 20, 30],\n                                     [20, 1, 60],\n                                     [30, 60, 1]],\n                                  reversescale=True)\n\nplotly.offline.iplot([trace])\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/hrQFX.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/hrQFX.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 301, "user_id": 1704016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0a0eef81664bcd2cc7c7de2479c48a7?s=128&d=identicon&r=PG", "display_name": "Seth", "link": "https://stackoverflow.com/users/1704016/seth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8381, "favorite_count": 1, "accepted_answer_id": 51659869, "answer_count": 1, "score": 11, "last_activity_date": 1613401592, "creation_date": 1533155071, "last_edit_date": 1553541689, "question_id": 51641741, "link": "https://stackoverflow.com/questions/51641741/plotly-colorscale-reverse-direction", "title": "Plotly colorscale reverse direction", "body": "<p>How can I reverse the direction of a colorscale in plotly? I am trying to use the <a href=\"https://plot.ly/python/line-and-scatter/#scatter-with-a-color-dimension\" rel=\"noreferrer\">color scale Viridis for a marker plot</a></p>\n\n<pre><code>import plotly.graph_objs as go\nimport plotly.plotly as py\n\nimport numpy as np\n\ntrace1 = go.Scatter(\n    y = np.random.randn(500),\n    mode='markers',\n    marker=dict(\n        size=16,\n        color = np.random.randn(500), #set color equal to a variable\n        colorscale='Viridis',\n        showscale=True\n    )\n)\ndata = [trace1]\n\npy.iplot(data, filename='scatter-plot-with-colorscale')\n</code></pre>\n\n<p>but I want it to be darker for higher values and lighter for lower values. Is there any way to do this without defining my own custom colorscale or changing my color parameter array?</p>\n"}, {"tags": ["python", "selenium", "download"], "comments": [{"owner": {"reputation": 5161, "user_id": 8625512, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/14cFh.jpg?s=128&g=1", "display_name": "Andrei Suvorkov", "link": "https://stackoverflow.com/users/8625512/andrei-suvorkov"}, "edited": false, "score": 0, "creation_date": 1533186237, "post_id": 51641703, "comment_id": 90255493, "body": "I can&#39;t open the link"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10135257, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-29_R6uIC5Is/AAAAAAAAAAI/AAAAAAAAAA8/MwWWuPYEtP0/photo.jpg?sz=128", "display_name": "Christian Do Prado Silva", "link": "https://stackoverflow.com/users/10135257/christian-do-prado-silva"}, "edited": false, "score": 0, "creation_date": 1533211076, "post_id": 51646950, "comment_id": 90269324, "body": "Sorry, it returns in a list, I will edit. The donwload path is already especified. The problem is it is downloading that file, not just a .jsf"}, {"owner": {"reputation": 5161, "user_id": 8625512, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/14cFh.jpg?s=128&g=1", "display_name": "Andrei Suvorkov", "link": "https://stackoverflow.com/users/8625512/andrei-suvorkov"}, "reply_to_user": {"reputation": 1, "user_id": 10135257, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-29_R6uIC5Is/AAAAAAAAAAI/AAAAAAAAAA8/MwWWuPYEtP0/photo.jpg?sz=128", "display_name": "Christian Do Prado Silva", "link": "https://stackoverflow.com/users/10135257/christian-do-prado-silva"}, "edited": false, "score": 0, "creation_date": 1533211489, "post_id": 51646950, "comment_id": 90269635, "body": "could you please provide a working link to the website/document ?"}, {"owner": {"reputation": 5161, "user_id": 8625512, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/14cFh.jpg?s=128&g=1", "display_name": "Andrei Suvorkov", "link": "https://stackoverflow.com/users/8625512/andrei-suvorkov"}, "reply_to_user": {"reputation": 1, "user_id": 10135257, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-29_R6uIC5Is/AAAAAAAAAAI/AAAAAAAAAA8/MwWWuPYEtP0/photo.jpg?sz=128", "display_name": "Christian Do Prado Silva", "link": "https://stackoverflow.com/users/10135257/christian-do-prado-silva"}, "edited": false, "score": 0, "creation_date": 1533212476, "post_id": 51646950, "comment_id": 90270301, "body": "a general link to the website I can get, but what have I do to reproduce the page you are getting with the document?"}, {"owner": {"reputation": 1, "user_id": 10135257, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-29_R6uIC5Is/AAAAAAAAAAI/AAAAAAAAAA8/MwWWuPYEtP0/photo.jpg?sz=128", "display_name": "Christian Do Prado Silva", "link": "https://stackoverflow.com/users/10135257/christian-do-prado-silva"}, "edited": false, "score": 0, "creation_date": 1533219139, "post_id": 51646950, "comment_id": 90275072, "body": "use this 22977333000108 cnpj number to acess the document page, but maybe the service is unavailable now"}, {"owner": {"reputation": 1, "user_id": 10135257, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-29_R6uIC5Is/AAAAAAAAAAI/AAAAAAAAAA8/MwWWuPYEtP0/photo.jpg?sz=128", "display_name": "Christian Do Prado Silva", "link": "https://stackoverflow.com/users/10135257/christian-do-prado-silva"}, "edited": false, "score": 0, "creation_date": 1533824621, "post_id": 51646950, "comment_id": 90497629, "body": "could you see the documment?"}], "tags": [], "owner": {"reputation": 5161, "user_id": 8625512, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/14cFh.jpg?s=128&g=1", "display_name": "Andrei Suvorkov", "link": "https://stackoverflow.com/users/8625512/andrei-suvorkov"}, "is_accepted": false, "score": 0, "last_activity_date": 1533192193, "last_edit_date": 1533192193, "creation_date": 1533191675, "answer_id": 51646950, "question_id": 51641703, "link": "https://stackoverflow.com/questions/51641703/how-to-automatically-download-a-pdf-file-from-a-jsf-page/51646950#51646950", "title": "How to automatically download a PDF file from a JSF page", "body": "<p>As per <a href=\"https://docs.python.org/3/library/glob.html#glob.glob\" rel=\"nofollow noreferrer\">documentaion</a>:</p>\n\n<blockquote>\n  <p>Return a possibly-empty list of path names that match pathname, which\n  must be a string containing a path specification. pathname can be\n  either absolute (like /usr/src/Python-1.5/Makefile) or relative (like\n  ../../Tools/<em>/</em>.gif), and can contain shell-style wildcards. Broken\n  symlinks are included in the results (as in the shell).</p>\n</blockquote>\n\n<p>so you have to specify the path to the file. </p>\n\n<p><strong><em>Example:</em></strong></p>\n\n<p>lets say we have two <code>output.txt</code> files in two different directories:</p>\n\n<ul>\n<li><code>C:\\\\Test\\\\output.txt</code></li>\n<li><code>C:\\\\Users\\\\userName\\\\Desktop\\\\output.txt</code></li>\n</ul>\n\n<p>then if we try the following code:</p>\n\n<pre><code>print(glob.glob('C:\\\\Test\\\\output.txt', recursive=True))\nprint(glob.glob('C:\\\\**\\\\output.txt', recursive=True))\nprint(glob.glob('C:\\\\**\\\\output.txt'))\nprint(glob.glob('output.txt'))\n</code></pre>\n\n<p>output will be:</p>\n\n<pre><code>['C:\\\\Test\\\\output.txt']\n['C:\\\\test\\\\output.txt', 'C:\\\\Users\\\\userName\\\\Desktop\\\\output.txt']\n['C:\\\\test\\\\output.txt']\n[]\n</code></pre>\n\n<p>So you have to specify the path to the directory, where your file is saved. You can use <code>**</code>, but as documentation says:</p>\n\n<blockquote>\n  <p>Note Using the \u201c**\u201d pattern in large directory trees may consume an\n  inordinate amount of time.</p>\n</blockquote>\n"}], "owner": {"reputation": 1, "user_id": 10135257, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-29_R6uIC5Is/AAAAAAAAAAI/AAAAAAAAAA8/MwWWuPYEtP0/photo.jpg?sz=128", "display_name": "Christian Do Prado Silva", "link": "https://stackoverflow.com/users/10135257/christian-do-prado-silva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 652, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533575279, "creation_date": 1533154939, "last_edit_date": 1533575279, "question_id": 51641703, "link": "https://stackoverflow.com/questions/51641703/how-to-automatically-download-a-pdf-file-from-a-jsf-page", "title": "How to automatically download a PDF file from a JSF page", "body": "<p>I need to automate some pdf documents downloads with python and selenium. The preferences of chrome and firefox are already done to automate download, but I have a problem with this especific website, it does not download the document automatically, it opens a new tab</p>\n\n<blockquote>\n  <p>website: <a href=\"http://sistemas.sefaz.ma.gov.br/certidoes/jsp/emissaoCertidaoNegativa/emissaoCertidaoNegativa.jsf\" rel=\"nofollow noreferrer\">http://sistemas.sefaz.ma.gov.br/certidoes/jsp/emissaoCertidaoNegativa/emissaoCertidaoNegativa.jsf</a>\n  Select CPF/CNPJ and use this number to access the document 22977333000108.</p>\n</blockquote>\n\n<p>After filling the form I get the document in a new tab with the same url like on the screenshot <a href=\"https://i.stack.imgur.com/xaOIA.png\" rel=\"nofollow noreferrer\">Documment Screenshot</a> (Sorry, had to hide the documments numbers). If I manually download it and rename as PDF file it works fine.</p>\n\n<p>How can I download it as a pdf file with selenium?</p>\n\n<p>My code is like:</p>\n\n<pre><code> urlForm = 'https://sistemas.sefaz.ma.gov.br/certidoes/jsp/emissaoCertidaoNegativa/emissaoCertidaoNegativa.jsf'\n #loading firefox webdriver with preferences\n driver = loadDriver( urlForm ) \n\n #form filled\n\n # Clicking submit button\n btnSubmit = driver.find_element_by_id('form1:j_id28')\n btnSubmit.click()\n time.sleep(3)     \n\n # switch to new tab\n driver.switch_to.window(driver.window_handles[-1]) \n</code></pre>\n\n<p>Then I try to download the file with glob like this:</p>\n\n<pre><code>certidoes = glob.glob('emissaoCertidaoNegativa*')\nprint(certidoes)\n</code></pre>\n\n<p>but it prints something like:</p>\n\n<blockquote>\n  <p>[emissaoCertidaoNegativa.jsf;jsessionid=44297D6C88452FC479FC0E94013D3C0A]</p>\n</blockquote>\n\n<p>and when I try to rename it to pdf I get an empty file... can someone help?</p>\n"}, {"tags": ["python", "macos", "pip"], "owner": {"reputation": 87, "user_id": 6381428, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-j2Qecvm7JTg/AAAAAAAAAAI/AAAAAAAAADU/4aUAs6rkvVc/photo.jpg?sz=128", "display_name": "Francisco Martins Ferreira", "link": "https://stackoverflow.com/users/6381428/francisco-martins-ferreira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 632, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1533154865, "creation_date": 1533154865, "question_id": 51641690, "link": "https://stackoverflow.com/questions/51641690/pip-connectionreseterror54-connection-reset-by-peer-installing-package-in", "title": "pip - ConnectionResetError(54, &#39;Connection reset by peer&#39;) installing Package in Mac OS", "body": "<p>When i run the command</p>\n\n<pre><code>pip3 install Flask\n</code></pre>\n\n<p>i get the following output:</p>\n\n<pre><code>Collecting Flask\nRetrying (Retry(total=4, connect=None, read=None, redirect=None, status=None)) after connection broken by 'ProtocolError('Connection aborted.', ConnectionResetError(54, 'Connection reset by peer'))': /simple/flask/\nRetrying (Retry(total=3, connect=None, read=None, redirect=None, status=None)) after connection broken by 'ProtocolError('Connection aborted.', ConnectionResetError(54, 'Connection reset by peer'))': /simple/flask/\nRetrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'ProtocolError('Connection aborted.', ConnectionResetError(54, 'Connection reset by peer'))': /simple/flask/\nRetrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'ProtocolError('Connection aborted.', ConnectionResetError(54, 'Connection reset by peer'))': /simple/flask/\nRetrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'ProtocolError('Connection aborted.', ConnectionResetError(54, 'Connection reset by peer'))': /simple/flask/\nCould not find a version that satisfies the requirement Flask (from versions: )\nNo matching distribution found for Flask\n</code></pre>\n\n<p>this is my setup:</p>\n\n<pre><code>Python 3.7.0\npip 18.0 from /usr/local/lib/python3.7/site-packages/pip (python 3.7)\nLibreSSL 2.2.7\n</code></pre>\n\n<p>I have tried most solutions here and on github and none seemed to solve my issue</p>\n"}, {"tags": ["python", "pyspark", "pyspark-sql"], "answers": [{"tags": [], "owner": {"reputation": 21452, "user_id": 8037249, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rkCC0.png?s=128&g=1", "display_name": "Florian", "link": "https://stackoverflow.com/users/8037249/florian"}, "is_accepted": true, "score": 1, "last_activity_date": 1533191863, "creation_date": 1533191863, "answer_id": 51646987, "question_id": 51641658, "link": "https://stackoverflow.com/questions/51641658/mapping-values-in-a-pyspark-dataframe/51646987#51646987", "title": "Mapping values in a (Py)Spark DataFrame", "body": "<p>I think in this case you could convert the <code>dict</code> to a <code>DataFrame</code> and simply use a <code>join</code>:</p>\n\n<pre><code>import pyspark.sql.functions as F\n\nmapping = {\n    'a': 'The letter A',\n    'b': 'The letter B',\n    'c': 'The third letter'\n}\n# Convert so Spark DataFrame\nmapping_df = spark.sparkContext.parallelize([(k,)+(v,) for k,v in mapping.items()]).toDF(['letters','val'])\n\ndata = spark.createDataFrame([('a',), ('b',), ('a',), ('c',)], schema=['letters'])\ndata = data.join(mapping_df.withColumnRenamed('val','letters_mapped'),'letters','left')\ndata.show()\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>+-------+----------------+\n|letters|  letters_mapped|\n+-------+----------------+\n|      c|The third letter|\n|      b|    The letter B|\n|      a|    The letter A|\n|      a|    The letter A|\n+-------+----------------+\n</code></pre>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 8493, "user_id": 2954547, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a859521339cfc1d7bc8a3d3da7031cab?s=128&d=identicon&r=PG&f=1", "display_name": "shadowtalker", "link": "https://stackoverflow.com/users/2954547/shadowtalker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2575, "favorite_count": 1, "accepted_answer_id": 51646987, "answer_count": 1, "score": 2, "last_activity_date": 1533193556, "creation_date": 1533154709, "last_edit_date": 1533193556, "question_id": 51641658, "link": "https://stackoverflow.com/questions/51641658/mapping-values-in-a-pyspark-dataframe", "title": "Mapping values in a (Py)Spark DataFrame", "body": "<p>In Pandas, one can do an operation like this:</p>\n\n<pre><code>mapping = {\n    'a': 'The letter A',\n    'b': 'The letter B',\n    'c': 'The third letter'\n}\n\nx = pd.Series(['a', 'b', 'a', c']).map(mapping)\n</code></pre>\n\n<p>and obtain something like</p>\n\n<pre><code>pd.Series([\n    'The letter A',\n    'The letter B',\n    'The letter A',\n    'The third letter'\n])\n</code></pre>\n\n<p>Naively, I can achieve this in a PySpark DataFrame with something like</p>\n\n<pre><code>import pyspark.sql.functions as F\nimport pyspark.sql.functions as T\n\ndef _map_values_str(value, mapping, default=None):\n    \"\"\" Apply a mapping, assuming the result is a string \"\"\"\n    return mapping.get(value, default)\n\nmap_values_str = F.udf(_map_values_str, T.StringType())\n\nmapping = {\n    'a': 'The letter A',\n    'b': 'The letter B',\n    'c': 'The third letter'\n}\n\ndata = spark.createDataFrame([('a',), ('b',), ('a',), ('c',)], schema=['letters'])\ndata = data.withColumn('letters_mapped', map_values_str(F.col('letters'), mapping))\n</code></pre>\n\n<p>But UDFs like this tend to be somewhat slow on large data sets in my experience. Is there a more efficient way?</p>\n"}, {"tags": ["python", "django"], "answers": [{"tags": [], "owner": {"reputation": 5357, "user_id": 928017, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f4cd38032c44248783f3ae749a65c0f0?s=128&d=identicon&r=PG", "display_name": "Goran", "link": "https://stackoverflow.com/users/928017/goran"}, "is_accepted": true, "score": 0, "last_activity_date": 1533157238, "last_edit_date": 1533157238, "creation_date": 1533156897, "answer_id": 51642117, "question_id": 51641651, "link": "https://stackoverflow.com/questions/51641651/linking-mulit-user-profile-together/51642117#51642117", "title": "Linking Mulit User Profile Together", "body": "<p>You can have everything in one model</p>\n\n<pre><code>class Profile(models.Model):\n    user = models.OneToOneField(User, on_delete=models.CASCADE)\n    supervisor = models.ForeignKey(\n        'self', null=True, blank=True, on_delete=models.SET_NULL,\n        related_name='interns')\n\n    def is_supervisor(self):\n        if not self.supervisor:\n            return True\n        return False\n\n    def is_intern(self):\n        if not self.supervisor:\n            return False\n        return True\n</code></pre>\n\n<p>In your view or any function, you can just check if the user is a supervisor and then query his interns.</p>\n\n<pre><code>if obj.is_supervisor():\n    interns = obj.interns.all()\n</code></pre>\n\n<p>or </p>\n\n<pre><code>if obj.is_intern():\n    supervisor = obj.supervisor\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 9547196, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Kaustav Sengupta", "link": "https://stackoverflow.com/users/9547196/kaustav-sengupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 51642117, "answer_count": 1, "score": 0, "last_activity_date": 1533157238, "creation_date": 1533154678, "question_id": 51641651, "link": "https://stackoverflow.com/questions/51641651/linking-mulit-user-profile-together", "title": "Linking Mulit User Profile Together", "body": "<p>So i have this Accounts where I have two types of users example: intern, and HR Supervisor. So my models is</p>\n\n<pre><code>class User(AbstractUser):\n   is_intern = models.BooleanField(default=True)\n\nclass InternProfile(models.Model):\n   user = models.OneToOneField(User, on_delete=models.CASCADE, null=True, \n        related_name='intern_profile')\n   bio = models.CharField(max_length=30, blank=True)\n   location = models.CharField(max_length=30, blank=True)\n   SuperVisor= models.ForeignKey(HRProfile, null=True, \n                related_name='employee')\n\nclass HRProfile(models.Model):\n   user = models.OneToOneField(User, on_delete=models.CASCADE, null=True, related_name='hr_profile')\n   company_name = models.CharField(max_length=100, blank=True)\n   website = models.CharField(max_length=100, blank=True)\n</code></pre>\n\n<p>Now lets suppose i have two HR managers name Alice and Bob. Both Alice and Bob have three interns underneath them working, lets say Sam, David, Katty works under Alice and Drake, Taylor and Nik works under Bob.</p>\n\n<p>Now I want to Bob to see only his intern and Alice can only see her intern not other way round, so guys i m new and learning django any advice related to this , cause i cant able to find the way around this.\nThank you </p>\n"}, {"tags": ["python", "pip", "pipenv"], "answers": [{"tags": [], "owner": {"reputation": 436, "user_id": 2195809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f114d15a439c27cddbcfabfe8229aaf?s=128&d=identicon&r=PG", "display_name": "ame", "link": "https://stackoverflow.com/users/2195809/ame"}, "is_accepted": false, "score": 0, "last_activity_date": 1533156156, "creation_date": 1533156156, "answer_id": 51641963, "question_id": 51641650, "link": "https://stackoverflow.com/questions/51641650/pipenv-failing-to-install-any-packages/51641963#51641963", "title": "Pipenv failing to install any packages", "body": "<p>My colleague had issues with some of the libraries you are installing and Python 3.7. You could try downgrading to 3.6. </p>\n"}], "owner": {"reputation": 164, "user_id": 9100617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a845b2b2e6872dc5faedf0cb6c05d3e?s=128&d=identicon&r=PG&f=1", "display_name": "Jon M", "link": "https://stackoverflow.com/users/9100617/jon-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1164, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1533156156, "creation_date": 1533154678, "question_id": 51641650, "link": "https://stackoverflow.com/questions/51641650/pipenv-failing-to-install-any-packages", "title": "Pipenv failing to install any packages", "body": "<p>I'm trying to make a virtual environment for a script of mine using pipenv, but whenever I try to install any package I get the following error message:</p>\n\n<pre><code>\"Command \"python setup.py egg_info\" failed with error code 1\"\n</code></pre>\n\n<p>For example, when I try to install pandas:</p>\n\n<pre><code>mycomputer-admin$ pipenv install pandas\nInstalling pandas...\nCollecting pandas\n  Using cached https://files.pythonhosted.org/packages/d8/ba/d2c6578afca709e211ac1cd836a66a6a042f1a773a970be345d9d08be426/pandas-0.23.3-cp36-cp36m-macosx_10_6_intel.macosx_10_9_intel.macosx_10_9_x86_64.macosx_10_10_intel.macosx_10_10_x86_64.whl\nCollecting numpy&gt;=1.9.0 (from pandas)\n  Using cached https://files.pythonhosted.org/packages/6a/d5/218414f0f41cb3f183d55d68dbcd996fa3602d5849bdf2ad6c059e98fa68/numpy-1.15.0-cp36-cp36m-macosx_10_6_intel.macosx_10_9_intel.macosx_10_9_x86_64.macosx_10_10_intel.macosx_10_10_x86_64.whl\nCollecting python-dateutil&gt;=2.5.0 (from pandas)\n  Using cached https://files.pythonhosted.org/packages/cf/f5/af2b09c957ace60dcfac112b669c45c8c97e32f94aa8b56da4c6d1682825/python_dateutil-2.7.3-py2.py3-none-any.whl\nCollecting pytz&gt;=2011k (from pandas)\n  Using cached https://files.pythonhosted.org/packages/30/4e/27c34b62430286c6d59177a0842ed90dc789ce5d1ed740887653b898779a/pytz-2018.5-py2.py3-none-any.whl\nCollecting six&gt;=1.5 (from python-dateutil&gt;=2.5.0-&gt;pandas)\n  Using cached https://files.pythonhosted.org/packages/67/4b/141a581104b1f6397bfa78ac9d43d8ad29a7ca43ea90a2d863fe3056e86a/six-1.11.0-py2.py3-none-any.whl\nInstalling collected packages: numpy, six, python-dateutil, pytz, pandas\nSuccessfully installed numpy-1.15.0 pandas-0.23.3 python-dateutil-2.7.3 pytz-2018.5 six-1.11.0\n\nAdding pandas to Pipfile's [packages]...\nPipfile.lock not found, creating...\nLocking [dev-packages] dependencies...\nLocking [packages] dependencies...\n243, in get_dependencies\n    legacy_results = self.get_legacy_dependencies(ireq)\n  File \"/usr/local/Cellar/pipenv/2018.7.1/libexec/lib/python3.7/site-packages/pipenv/patched/piptools/repositories/pypi.py\", line 335, in get_legacy_dependencies\n    self.resolver.resolve(reqset)\n  File \"/usr/local/Cellar/pipenv/2018.7.1/libexec/lib/python3.7/site-packages/pipenv/patched/notpip/_internal/resolve.py\", line 107, in resolve\n    self._resolve_one(requirement_set, req)\n  File \"/usr/local/Cellar/pipenv/2018.7.1/libexec/lib/python3.7/site-packages/pipenv/patched/notpip/_internal/resolve.py\", line 264, in _resolve_one\n    abstract_dist = self._get_abstract_dist_for(req_to_install)\n  File \"/usr/local/Cellar/pipenv/2018.7.1/libexec/lib/python3.7/site-packages/pipenv/patched/notpip/_internal/resolve.py\", line 214, in _get_abstract_dist_for\n    self.require_hashes\n  File \"/usr/local/Cellar/pipenv/2018.7.1/libexec/lib/python3.7/site-packages/pipenv/patched/notpip/_internal/operations/prepare.py\", line 328, in prepare_linked_requirement\n    abstract_dist.prep_for_dist(finder, self.build_isolation)\n  File \"/usr/local/Cellar/pipenv/2018.7.1/libexec/lib/python3.7/site-packages/pipenv/patched/notpip/_internal/operations/prepare.py\", line 155, in prep_for_dist\n    self.req.run_egg_info()\n  File \"/usr/local/Cellar/pipenv/2018.7.1/libexec/lib/python3.7/site-packages/pipenv/patched/notpip/_internal/req/req_install.py\", line 486, in run_egg_info\n    command_desc='python setup.py egg_info')\n  File \"/usr/local/Cellar/pipenv/2018.7.1/libexec/lib/python3.7/site-packages/pipenv/patched/notpip/_internal/utils/misc.py\", line 698, in call_subprocess\n    % (command_desc, proc.returncode, cwd))\npipenv.patched.notpip._internal.exceptions.InstallationError: Command \"python setup.py egg_info\" failed with error code 1 in /var/folders/y1/7zsj8_x973n4xjwg5gg6s53jr4zz65/T/tmp6ghbw5_fbuild/email/\n</code></pre>\n\n<p>No idea what's going on to cause this. Any thoughts?</p>\n"}, {"tags": ["python", "string", "replace"], "comments": [{"owner": {"reputation": 1710, "user_id": 4365003, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/d94Ue.png?s=128&g=1", "display_name": "RagingRoosevelt", "link": "https://stackoverflow.com/users/4365003/ragingroosevelt"}, "edited": false, "score": 0, "creation_date": 1533154552, "post_id": 51641586, "comment_id": 90247624, "body": "Can you use python 3.6 or newer?  If so, <a href=\"https://docs.python.org/3/whatsnew/3.6.html#whatsnew36-pep498\" rel=\"nofollow noreferrer\">f-strings</a> might do what you&#39;re looking for.  Otherwise, <a href=\"https://docs.python.org/3/library/stdtypes.html#str.format\" rel=\"nofollow noreferrer\">str.format()</a> does pretty similar stuff."}], "answers": [{"tags": [], "owner": {"reputation": 380, "user_id": 2985413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5ee1c940160d99e5798a9e50cb4531a?s=128&d=identicon&r=PG&f=1", "display_name": "Gigaflop", "link": "https://stackoverflow.com/users/2985413/gigaflop"}, "is_accepted": false, "score": 1, "last_activity_date": 1533154744, "creation_date": 1533154744, "answer_id": 51641665, "question_id": 51641586, "link": "https://stackoverflow.com/questions/51641586/replace-string-based-on-different-user-inputs-template-config-python/51641665#51641665", "title": "Replace String Based On Different User Inputs (Template Config) - Python", "body": "<p>An example from IDLE:</p>\n\n<pre><code>&gt;&gt;&gt; fmtstr = \"hostname {} login {} privilege 15 {} enc sha256\"\n&gt;&gt;&gt; print (fmtstr.format(\"legitHost\", \"notahacker\", \"hunter2\"))\nhostname legitHost login notahacker privilege 15 hunter2 enc sha256\n</code></pre>\n\n<p>Once you have all the data you need (host, user, password) you can use the <code>.format( )</code> operation on a string to replace the <code>{}</code>s inside said string. If there are multiple curly-brace pairs in the string, you use multiple comma-separated arguments in the method as shown above, in the order they should appear.</p>\n"}, {"tags": [], "owner": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "is_accepted": false, "score": 0, "last_activity_date": 1533157234, "creation_date": 1533157234, "answer_id": 51642192, "question_id": 51641586, "link": "https://stackoverflow.com/questions/51641586/replace-string-based-on-different-user-inputs-template-config-python/51642192#51642192", "title": "Replace String Based On Different User Inputs (Template Config) - Python", "body": "<p>I'm not quite clear on what you're trying to do, so this perhaps is more appropriate for a comment, but if you can explain why you're not doing the following, that will help give you advice on how to do what you're trying to do.</p>\n\n<pre><code>variable_names = #list variables here\n\nvariable_values={}\nfor variable_name in variable_names:\n    variable_values[variable_name] = input(\"Please Enter \" + variable_name + \": \")\nwith open(\"out.txt\", \"w\") as fout:\n    with open(\"TestTemplate.txt\", \"r+\") as checkfin:\n        for line in checkfin:\n            for variable_name in variable_names:\n                if variable_name in line:\n                    line = line.replace(variable_name,variable_values[variable_name])\n            fout.write(line)\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6432385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/135698bfd51d2866830de675a07c82c0?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/6432385/nathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1533157234, "creation_date": 1533154370, "question_id": 51641586, "link": "https://stackoverflow.com/questions/51641586/replace-string-based-on-different-user-inputs-template-config-python", "title": "Replace String Based On Different User Inputs (Template Config) - Python", "body": "<p>I am now 3 days old with Python so excuse the noob.</p>\n\n<p>I am writing a program that will take variables within a template for configurations and effectively do Find and Replace. Only difference being I want it to be graphical for users (which will come later) and I want it to be dynamic so variables can change between templates, ie a template will start with:</p>\n\n<pre><code>@hostname\n@username\n@password\n</code></pre>\n\n<p>The configuration below will contain @hostname etc where needed.</p>\n\n<pre><code>hostname @hostname\nlogin @username privilege 15 @password enc sha256\n</code></pre>\n\n<p>I have the find and replace working well - however as the program loops between each @variable it will copy my template each time it does it. So in this case I would end up with 3 templates stacked in a txt file.</p>\n\n<pre><code>## OPEN TEMPLATE\nwith open(\"TestTemplate.txt\", \"rt\") as fin:\n    with open(\"out.txt\", \"w\") as fout:\n    ## PULLING VARIABLE NAMES\n        for line in fin:\n            if line.startswith(\"@\"):\n                trimmedLine = line.rstrip()\n            ## USER ENTRY ie Please Enter @username: \n                entry = input(\"Please Enter \" + trimmedLine + \": \")\n                ## Open file again to start line loop from the top without affecting the above loop\n                with open(\"TestTemplate.txt\", \"r+\") as checkfin:\n                    for line in checkfin:\n                        if trimmedLine in line:\n                            fout.write(line.replace(trimmedLine, entry))\n                        else:\n                        ## ENSURE ALL LINES UNAFFECTED ARE WRITTEN\n                            fout.write(line)\n</code></pre>\n\n<p>As you can see when it writes all lines, whether unaffected or not, it will do this for each iteration in the loop. I need it to only overwrite affected lines whilst preserving all other unaffected lines. The only way I can get them to output is to output each line with <code>fout.write(line)</code> but this is meaning I am getting 3x the output.</p>\n\n<p>I hope that is clear.</p>\n\n<p>Thank You</p>\n"}, {"tags": ["python", "arrays", "python-3.x", "numpy", "pad"], "comments": [{"owner": {"reputation": 4970, "user_id": 1726797, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a76b9e0b9a393201d9897082bf70bf07?s=128&d=identicon&r=PG", "display_name": "nnnmmm", "link": "https://stackoverflow.com/users/1726797/nnnmmm"}, "edited": false, "score": 0, "creation_date": 1533155239, "post_id": 51641570, "comment_id": 90247938, "body": "For the odd shapes, what do you want to do? Add an extra row/column before, or rather after?"}, {"owner": {"reputation": 1052, "user_id": 8474432, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/71c628c0ad8557384540efe8c7cdab1e?s=128&d=identicon&r=PG&f=1", "display_name": "curious_cosmo", "link": "https://stackoverflow.com/users/8474432/curious-cosmo"}, "reply_to_user": {"reputation": 4970, "user_id": 1726797, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a76b9e0b9a393201d9897082bf70bf07?s=128&d=identicon&r=PG", "display_name": "nnnmmm", "link": "https://stackoverflow.com/users/1726797/nnnmmm"}, "edited": false, "score": 0, "creation_date": 1533157842, "post_id": 51641570, "comment_id": 90249072, "body": "@nnnmmm Either way -- for now it doesn&#39;t make a difference to me as long as they&#39;re along the edges"}, {"owner": {"reputation": 4970, "user_id": 1726797, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a76b9e0b9a393201d9897082bf70bf07?s=128&d=identicon&r=PG", "display_name": "nnnmmm", "link": "https://stackoverflow.com/users/1726797/nnnmmm"}, "edited": false, "score": 0, "creation_date": 1533158778, "post_id": 51641570, "comment_id": 90249413, "body": "Then maybe do something like <code>pad_x = (x_max - x_len) &#47;&#47; 2</code>, then call <code>np.pad</code> with <code>(pad_x, x_max - x_len - pad_x)</code> and similarly for <code>pad_y</code>. Note the <code>&#47;&#47;</code>. This would pad more after for odd <code>x_max - x_len</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1052, "user_id": 8474432, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/71c628c0ad8557384540efe8c7cdab1e?s=128&d=identicon&r=PG&f=1", "display_name": "curious_cosmo", "link": "https://stackoverflow.com/users/8474432/curious-cosmo"}, "edited": false, "score": 0, "creation_date": 1533161542, "post_id": 51641717, "comment_id": 90250255, "body": "Do I need to loop through <code>i</code> as many 1D arrays? I thought it was allowed to pad 2D arrays in one <code>np.pad</code> statement."}, {"owner": {"reputation": 4970, "user_id": 1726797, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a76b9e0b9a393201d9897082bf70bf07?s=128&d=identicon&r=PG", "display_name": "nnnmmm", "link": "https://stackoverflow.com/users/1726797/nnnmmm"}, "reply_to_user": {"reputation": 1052, "user_id": 8474432, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/71c628c0ad8557384540efe8c7cdab1e?s=128&d=identicon&r=PG&f=1", "display_name": "curious_cosmo", "link": "https://stackoverflow.com/users/8474432/curious-cosmo"}, "edited": false, "score": 0, "creation_date": 1533161655, "post_id": 51641717, "comment_id": 90250291, "body": "No, just write <code>for i in range(len(image_concat)): image_concat[i] = np.pad(...)</code>"}], "tags": [], "owner": {"reputation": 4970, "user_id": 1726797, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a76b9e0b9a393201d9897082bf70bf07?s=128&d=identicon&r=PG", "display_name": "nnnmmm", "link": "https://stackoverflow.com/users/1726797/nnnmmm"}, "is_accepted": false, "score": 2, "last_activity_date": 1533154999, "creation_date": 1533154999, "answer_id": 51641717, "question_id": 51641570, "link": "https://stackoverflow.com/questions/51641570/padding-multiple-arrays-to-obtain-same-shape-as-largest-array/51641717#51641717", "title": "Padding multiple arrays to obtain same shape as largest array", "body": "<p><code>np.pad</code> doesn't modify the array in-place, it returns a padded array. So you'd need to do <code>image_concat[i] = np.pad(...)</code>, where <code>i</code> is the index of <code>A</code>.</p>\n"}], "owner": {"reputation": 1052, "user_id": 8474432, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/71c628c0ad8557384540efe8c7cdab1e?s=128&d=identicon&r=PG&f=1", "display_name": "curious_cosmo", "link": "https://stackoverflow.com/users/8474432/curious-cosmo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 386, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533154999, "creation_date": 1533154296, "question_id": 51641570, "link": "https://stackoverflow.com/questions/51641570/padding-multiple-arrays-to-obtain-same-shape-as-largest-array", "title": "Padding multiple arrays to obtain same shape as largest array", "body": "<p>I have multiple 2D arrays saved in a list called <code>image_concat</code>. This list will be composed of over a hundred of these arrays, but for now I'm just trying to make my code run for a list with only two of them. These arrays all have different shapes, and I would like to find the largest x-dimension and largest y-dimension out of all the arrays, and then pad all the other ones with enough zeros around the edges so that in the end, they all have the same shape. Note that the largest x-dimension and largest y-dimension might belong to separate arrays, or they might belong to the same one. What I have tried writing so far is not successfully changing the shape of the smaller array for some reason. But I also think that some issues will arise even after changing the shapes, since some arrays might be off by one in the end due to elements in the shape being even or odd. </p>\n\n<pre><code>import astropy\nimport numpy as np\nimport math\nimport matplotlib.pyplot as plt\nfrom astropy.utils.data import download_file\nfrom astropy.io import fits\n\nimages = ['http://irsa.ipac.caltech.edu/ibe/data/wise/allsky/4band_p1bm_frm/9a/02729a/148/02729a148-w2-int-1b.fits?center=89.353536,37.643864deg&amp;size=0.6deg', 'http://irsa.ipac.caltech.edu/ibe/data/wise/allsky/4band_p1bm_frm/2a/03652a/123/03652a123-w4-int-1b.fits?center=294.772333,-19.747157deg&amp;size=0.6deg']\n\nimage_list = []\nfor url in images:\n    image_list.append(download_file(url, cache=True))\n\nimage_concat = [fits.getdata(image) for image in image_list]\n\n# See shapes in the beginning\nprint(np.shape(image_concat[0]))\nprint(np.shape(image_concat[1]))\n\ndef pad(image_concat):\n\n    # Identify largest x and y dimensions\n    xdims, ydims = np.zeros(len(image_concat)), np.zeros(len(image_concat))\n    for i in range(len(xdims)):\n        x, y = np.shape(image_concat[i])\n        xdims[i] = x\n        ydims[i] = y\n    x_max = int(np.max(xdims))\n    y_max = int(np.max(ydims))\n\n    # Pad all arrays except the largest dimensions\n    for A in image_concat:\n        x_len, y_len = np.shape(A)\n        print(math.ceil((y_max-y_len)/2))\n        print(math.ceil((x_max-x_len)/2))\n\n        np.pad(A, ((math.ceil((y_max-y_len)/2), math.ceil((y_max-y_len)/2)), (math.ceil((x_max-x_len)/2), math.ceil((x_max-x_len)/2))), 'constant', constant_values=0)\n\n    return image_concat\n\nimage_concat = pad(image_concat)\n\n# See shapes afterwards (they haven't changed for some reason)\nprint(np.shape(image_concat[0]))\nprint(np.shape(image_concat[1]))\n</code></pre>\n\n<p>I can't understand why the shape isn't changing for this case. And also, is there a way to easily generalize this so that it will work on many arrays regardless of if they have even or odd dimensions?</p>\n"}, {"tags": ["python", "pandas", "numpy", "dataframe", "group-by"], "comments": [{"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 1, "creation_date": 1533154404, "post_id": 51641558, "comment_id": 90247554, "body": "Use <code>first</code> or <code>min</code> instead of iat[0]."}], "answers": [{"comments": [{"owner": {"reputation": 779, "user_id": 10007302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc46e5434cc4cc2b904a82620b44c063?s=128&d=identicon&r=PG&f=1", "display_name": "novawaly", "link": "https://stackoverflow.com/users/10007302/novawaly"}, "edited": false, "score": 0, "creation_date": 1533154939, "post_id": 51641590, "comment_id": 90247788, "body": "that returns the right date but i get a lot more with it in my result. pictured here. I just want to return only the date and time. <a href=\"https://imgur.com/a/4hRTvUx\" rel=\"nofollow noreferrer\">imgur.com/a/4hRTvUx</a>"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 3, "last_activity_date": 1533154378, "creation_date": 1533154378, "answer_id": 51641590, "question_id": 51641558, "link": "https://stackoverflow.com/questions/51641558/returning-the-index-value-when-using-groupby/51641590#51641590", "title": "Returning the index value when using groupby", "body": "<p>This is <code>head</code></p>\n\n<pre><code>df.groupby('Number').head(1)\n</code></pre>\n"}], "owner": {"reputation": 779, "user_id": 10007302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc46e5434cc4cc2b904a82620b44c063?s=128&d=identicon&r=PG&f=1", "display_name": "novawaly", "link": "https://stackoverflow.com/users/10007302/novawaly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533154378, "creation_date": 1533154213, "question_id": 51641558, "link": "https://stackoverflow.com/questions/51641558/returning-the-index-value-when-using-groupby", "title": "Returning the index value when using groupby", "body": "<p>Im using grouby to rearrange a dataframe that has a date time index and I'd like to be able to return the datetime index value at the first grouping. For example, if I group by the Number column, i'd like to return the index value at the first instance of each number. I'm able to use the Trade Type with the .iat[0] to get the Type at the first occurrence of number. How would i return the index value? </p>\n\n<pre><code>                  Number Type\n01/02/2007 - 05:30  1   Down\n01/02/2007 - 10:30  2   Up\n01/02/2007 - 15:30  2   Up\n01/02/2007 - 17:00  2   Up\n01/02/2007 - 18:30  2   Down\n01/02/2007 - 22:00  3   Down\n01/03/2007 - 06:30  3   Down\n01/03/2007 - 11:00  3   Down\n01/04/2007 - 08:30  3   Down\n01/04/2007 - 09:30  4   Down\n01/04/2007 - 10:30  4   Down\n01/05/2007 - 10:00  4   Down\n01/07/2007 - 23:00  4   Down\n01/08/2007 - 10:30  5   Down\n</code></pre>\n\n<p>this is the function i'm using to build a dictionary which will return a series that I can then apply to my dataframe.</p>\n\n<pre><code>def compact_view(groupby):\nagg_dict = {'Type': groupby['Type'].iat[0],\n            'Time': groupby['Date_Time'].iat[0]&lt;----?\n\n\n            }\n\nreturn pd.Series(agg_dict, index=['Type','Time'])\n</code></pre>\n\n<p>So i'd want these returned:</p>\n\n<pre><code>01/02/2007 - 05:30  1\n01/02/2007 - 10:30  2\n01/02/2007 - 22:00  3\n01/04/2007 - 09:30  4\n01/08/2007 - 10:30  5\n</code></pre>\n\n<p>Hopefully this makes sense</p>\n"}, {"tags": ["python", "selenium", "web-scraping", "expected-condition"], "comments": [{"owner": {"reputation": 510, "user_id": 1663382, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cc646a7c470b1f5b39d298a7583b5e85?s=128&d=identicon&r=PG", "display_name": "Liquidgenius", "link": "https://stackoverflow.com/users/1663382/liquidgenius"}, "edited": false, "score": 0, "creation_date": 1533156378, "post_id": 51641546, "comment_id": 90248437, "body": "Additional research turned up the fact that I could perform a union of nodes and combine the Xpath addresses with | into one Xpath. <a href=\"https://stackoverflow.com/questions/5350666/xpath-or-operator-for-different-nodes\" title=\"xpath or operator for different nodes\">stackoverflow.com/questions/5350666/&hellip;</a>. Still working on a solution."}], "answers": [{"tags": [], "owner": {"reputation": 510, "user_id": 1663382, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cc646a7c470b1f5b39d298a7583b5e85?s=128&d=identicon&r=PG", "display_name": "Liquidgenius", "link": "https://stackoverflow.com/users/1663382/liquidgenius"}, "is_accepted": false, "score": 0, "last_activity_date": 1533156766, "creation_date": 1533156766, "answer_id": 51642086, "question_id": 51641546, "link": "https://stackoverflow.com/questions/51641546/selenium-presence-of-one-of-many-elements-located/51642086#51642086", "title": "Selenium, Presence of one of many elements located?", "body": "<p>Once I realized Xpath has the ability for unions, the following method works. I will leave this answer open in case anyone else has a better one.</p>\n\n<pre><code>def wait_with_xpath_expectation(self, search_elements, timeout=6, max_attempts=3):\n    \"\"\"\n    Selenium wait for an element designated by Xpath to become available in the DOM. Useful for javascript AJAXy\n    loading pages where content may be be rendered dynamically on the client side after page load appears complete.\n    search_elements may be one Xpath as a string or many as a list. This allows for any of multiple elements on a\n    page or pages to be determined to have loaded based on expectations.\n    :param search_elements: string or list (strings converted to lists), Xpath(s)\n    :param timeout: int, seconds\n    :param max_attempts: int, time to wait before giving up on page loading\n    :return: Boolean, True if page has loaded, False if all attempts have failed\n    \"\"\"\n\n    # Page is not loaded yet\n    loaded = False\n\n    # Initialize attempt count\n    attempt = 0\n\n    # If only one element has been passed, ensure it is encapsulated by a list\n    if type(search_elements) is str:\n        search_elements = [search_elements]\n\n    # Begin the polling loop\n    while attempt &lt; max_attempts:\n\n        try:\n\n            while loaded is False:\n                # Decompose the list of Xpaths to a union of nodes\n                node_union = \" | \".join(search_elements)\n\n                expectation = EC.presence_of_element_located((By.XPATH, node_union))\n\n                # Define wait\n                wait = WebDriverWait(self.browser, timeout)\n\n                # Execute\n                wait.until(expectation)\n\n                # Acknowledge load\n                loaded = True\n\n                print(\"Success: Page loaded based on expectations\")\n\n                # Exit returning True for load\n                return loaded\n\n        except TimeoutException as e:\n\n            # Increment attempts\n            attempt += 1\n\n            # Check again if max attempts has not been exceeded\n            while attempt &lt; max_attempts:\n\n                # Increase timeout by 20%\n                timeout *= .2\n\n                # Try again\n                continue\n\n            # Print an error if max attempts is exceeded\n            print(\"Error: Max load with expectations attempts exceeded,\", e)\n\n            # Exit returning False for load\n            return loaded\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 510, "user_id": 1663382, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cc646a7c470b1f5b39d298a7583b5e85?s=128&d=identicon&r=PG", "display_name": "Liquidgenius", "link": "https://stackoverflow.com/users/1663382/liquidgenius"}, "edited": false, "score": 0, "creation_date": 1534351155, "post_id": 51682994, "comment_id": 90677941, "body": "Hi Tim. I like this implementation much better than mine, thank you! Multiple DOM elements can be waited for explicitly instead of a union. On top of that it looks very easy to use. The one item I&#39;d change is BY.ID to BY.XPATH as I&#39;ve found that some sites do not properly use class and id tags, but XPATH is always present due to the DOM. Accepting answer, thank you."}, {"owner": {"reputation": 236, "user_id": 40865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/154563c8030911c65fa0d14cfee152b2?s=128&d=identicon&r=PG", "display_name": "Tim Butterfield", "link": "https://stackoverflow.com/users/40865/tim-butterfield"}, "reply_to_user": {"reputation": 510, "user_id": 1663382, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cc646a7c470b1f5b39d298a7583b5e85?s=128&d=identicon&r=PG", "display_name": "Liquidgenius", "link": "https://stackoverflow.com/users/1663382/liquidgenius"}, "edited": false, "score": 0, "creation_date": 1534443853, "post_id": 51682994, "comment_id": 90718103, "body": "Thanks.  I just used By.ID as example element locator type.  Since each expected condition is created separately, you can combine different locator types as appropriate for that element.  One element may be located By.ID, another could use By.XPATH, By.NAME, By.CLASS_NAME, By.TAG_NAME, By.CSS_SELECTOR, etc."}, {"owner": {"reputation": 510, "user_id": 1663382, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cc646a7c470b1f5b39d298a7583b5e85?s=128&d=identicon&r=PG", "display_name": "Liquidgenius", "link": "https://stackoverflow.com/users/1663382/liquidgenius"}, "edited": false, "score": 0, "creation_date": 1541103595, "post_id": 51682994, "comment_id": 93112861, "body": "Accepting answer"}, {"owner": {"reputation": 116, "user_id": 10044118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5aa9a7ac4dddc6c6864d8c551920bc3?s=128&d=identicon&r=PG&f=1", "display_name": "Selim M\u0131d\u0131ko\u011flu", "link": "https://stackoverflow.com/users/10044118/selim-m%c4%b1d%c4%b1ko%c4%9flu"}, "edited": false, "score": 0, "creation_date": 1597474047, "post_id": 51682994, "comment_id": 112149397, "body": "This is perfect answer but now selenium expected condition function visibility_of_element_located takes argument as 1 tuple."}], "tags": [], "owner": {"reputation": 236, "user_id": 40865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/154563c8030911c65fa0d14cfee152b2?s=128&d=identicon&r=PG", "display_name": "Tim Butterfield", "link": "https://stackoverflow.com/users/40865/tim-butterfield"}, "is_accepted": true, "score": 4, "last_activity_date": 1533362969, "creation_date": 1533362969, "answer_id": 51682994, "question_id": 51641546, "link": "https://stackoverflow.com/questions/51641546/selenium-presence-of-one-of-many-elements-located/51682994#51682994", "title": "Selenium, Presence of one of many elements located?", "body": "<p>You can have an expected condition class to wait for a combination of expected conditions.  Here is an example of one.</p>\n\n<pre><code>class wait_for_all(object):\n    def __init__(self, methods):\n        self.methods = methods\n\n    def __call__(self, driver):\n        try:\n            for method in self.methods:\n                if not method(driver):\n                    return False\n            return True\n        except StaleElementReferenceException:\n            return False\n</code></pre>\n\n<p>This would then be used by building an array of the expected conditions and checking for all of them in the same wait.  (Example lines split for clarity.)</p>\n\n<pre><code>methods = []\nmethods.append(EC.visibility_of_element_located(BY.ID, \"idElem1\"))\nmethods.append(EC.visibility_of_element_located(BY.ID, \"idElem2\"))\nmethod = wait_for_all(methods)\nWebDriverWait(driver, 5).until(method)\n</code></pre>\n\n<p>This will perform one five second wait while checking for visibility of two different elements.</p>\n\n<p>I have documented this further in a blog post <a href=\"https://www.timbutterfield.com/blog/2018/08/03/python-selenium-waiting-for-combinations/\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 510, "user_id": 1663382, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cc646a7c470b1f5b39d298a7583b5e85?s=128&d=identicon&r=PG", "display_name": "Liquidgenius", "link": "https://stackoverflow.com/users/1663382/liquidgenius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4708, "favorite_count": 0, "accepted_answer_id": 51682994, "answer_count": 2, "score": 1, "last_activity_date": 1533362969, "creation_date": 1533154164, "last_edit_date": 1533154993, "question_id": 51641546, "link": "https://stackoverflow.com/questions/51641546/selenium-presence-of-one-of-many-elements-located", "title": "Selenium, Presence of one of many elements located?", "body": "<p>Building off of the answer to <a href=\"https://stackoverflow.com/questions/26566799/how-to-wait-until-the-page-is-loaded-with-selenium-for-python#40037216\">How to wait until the page is loaded with Selenium for Python?</a> I am attempting to create a method that allows multiple elements to be polled for presence using Expected Conditions. </p>\n\n<p>I receive an error <strong>'bool' object is not callable</strong> on the line containing: wait.until(any(expectations)). </p>\n\n<p>The thought process was to allow an number of Xpaths to be passed as expected conditions, then using <a href=\"https://docs.python.org/3/library/functions.html#any\" rel=\"nofollow noreferrer\">any()</a>, in a similar manner to this java based answer, <a href=\"https://stackoverflow.com/questions/45166181/trying-to-wait-for-one-of-two-elements-in-the-page-using-selenium-xpath\">Trying to wait for one of two elements in the page using selenium xpath</a>, check if any of the conditions are present.</p>\n\n<p><strong>What would be the proper way use any() in this case? Or better yet, what needs to be done for this method to work?</strong></p>\n\n<p>Assume that the Selenium .get('url') has already been executed immediately prior to calling this method.</p>\n\n<pre><code>def wait_with_xpath_expectation(self, search_elements, timeout=6, max_attempts=3):\n    \"\"\"\n    Selenium wait for an element(s) designated by Xpath to become available in the DOM. Useful for javascript AJAXy\n    loading pages where content may be be rendered dynamically on the client side after page load appears complete.\n    search_elements may be one Xpath as a string or many as a list. This allows for any of multiple elements on a\n    page or pages to be determined to have loaded based on expectations.\n    :param search_elements: string or list (strings converted to lists), Xpath(s)\n    :param timeout: int, seconds\n    :param max_attempts: int, time to wait before giving up on page loading\n    :return: Boolean, True if page has loaded, False if all attempts have failed\n    \"\"\"\n\n    # Page is not loaded yet\n    loaded = False\n\n    # Initialize attempt count\n    attempt = 0\n\n    # If only one element has been passed, ensure it is encapsulated by a list\n    if type(search_elements) is str:\n        search_elements = [search_elements]\n\n    # Begin the polling loop\n    while attempt &lt; max_attempts:\n\n        try:\n\n            while loaded is False:\n                # Create a list of expected elements using list comprehension\n                expectations = [EC.presence_of_element_located((By.XPATH, element)) for element in search_elements]\n\n                # Define wait\n                wait = WebDriverWait(self.browser, timeout)\n\n                # Execute\n                wait.until(any(expectations))\n\n                # Acknowledge load\n                loaded = True\n\n                print(\"Success: Page loaded based on expectations\")\n\n                # Exit returning True for load\n                return loaded\n\n        except TimeoutException as e:\n\n            # Increment attempts\n            attempt += 1\n\n            # Check again if max attempts has not been exceeded\n            while attempt &lt; max_attempts:\n\n                # Increase timeout by 20%\n                timeout *= .2\n\n                # Try again \n                continue\n\n            # Print an error if max attempts is exceeded\n            print(\"Error: Max load with expectations attempts exceeded,\", e)\n\n            # Exit returning False for load\n            return loaded\n</code></pre>\n"}, {"tags": ["python", "selenium"], "comments": [{"owner": {"reputation": 151, "user_id": 7788462, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5146ac6315c6de7db31680fef2b44c03?s=128&d=identicon&r=PG&f=1", "display_name": "Sel_Python", "link": "https://stackoverflow.com/users/7788462/sel-python"}, "edited": false, "score": 1, "creation_date": 1533168413, "post_id": 51641540, "comment_id": 90251868, "body": "Thanks Nick. That helped. Since driver.back() did not work, tried driver.execute_script(&quot;window.history.go(-1)&quot;) and that worked."}], "answers": [{"tags": [], "owner": {"reputation": 4578, "user_id": 5180047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-Z8PTw2eJC9E/AAAAAAAAAAI/AAAAAAAAAco/2C4t6AgoQNc/photo.jpg?sz=128", "display_name": "Nick Brady", "link": "https://stackoverflow.com/users/5180047/nick-brady"}, "is_accepted": true, "score": 2, "last_activity_date": 1533156665, "last_edit_date": 1533156665, "creation_date": 1533156300, "answer_id": 51641991, "question_id": 51641540, "link": "https://stackoverflow.com/questions/51641540/i-am-trying-to-click-on-each-link-using-selenium-and-python/51641991#51641991", "title": "I am trying to click on each link using selenium and python", "body": "<p><code>state</code> is already a list because you used <code>states.find_elements_by_css_selector</code> and not <code>states.find_element_by_css_selector</code></p>\n\n<p>so change it to something that looks more like this:</p>\n\n<pre><code>ranking = driver.find_element_by_xpath(xpath) # notice I use element\nnum_countries=len(ranking.find_elements_by_css_selector('li'))\nfor i in range(num_countries):\n    # you need to refetch countries every time so the elements aren't stale\n    ranking = driver.find_element_by_xpath(xpath)\n    countries = ranking.find_elements_by_css_selector('li a')\n    country = countries[i]\n    # do what you need with the state now\n    country()\n    assert country == driver.find_element_by_css_selector('#content_box li h2').text  # make sure the country is the correct one\n    # go back\n    driver.back()      \n</code></pre>\n\n<p>NOTE: I renamed the var to <code>countries</code> because they're countries.  </p>\n"}], "owner": {"reputation": 151, "user_id": 7788462, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5146ac6315c6de7db31680fef2b44c03?s=128&d=identicon&r=PG&f=1", "display_name": "Sel_Python", "link": "https://stackoverflow.com/users/7788462/sel-python"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1029, "favorite_count": 0, "accepted_answer_id": 51641991, "answer_count": 1, "score": 2, "last_activity_date": 1533160820, "creation_date": 1533154150, "last_edit_date": 1533160820, "question_id": 51641540, "link": "https://stackoverflow.com/questions/51641540/i-am-trying-to-click-on-each-link-using-selenium-and-python", "title": "I am trying to click on each link using selenium and python", "body": "<p>below is my code,</p>\n\n<pre><code>from selenium import webdriver\nimport time\nfrom selenium.webdriver.support.ui import WebDriverWait as wait\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom selenium.webdriver.common.by import By\nfrom selenium.common.exceptions import TimeoutException\nxpath='//ol[@class=\"ranking\"]'\ndriver=webdriver.Ie(\"C:\\Users\\test\\Downloads\\IEDriverServer_Win32_3.0.0\\IEDriverServer.exe\")\ndriver.get('https://www.havocscope.com/country-profile/')\nstate=[states.find_elements_by_css_selector('li a') for states in driver.find_elements_by_xpath(xpath)]\nprint (state)\n</code></pre>\n\n<p>output of above code is a below.</p>\n\n<pre><code>[[&lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"3cc4a03b-9786-4fc6-9698-012f0665bba3\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"5d323e16-451a-4e10-a514-312770ff84bc\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"da69e2ea-4a48-468f-951f-85d6df7d6888\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"9a37d096-dea9-4f76-9680-e3166abebcae\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"8d666290-67ed-4290-9fde-9d4e166a5400\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"7b3ba305-1f4e-4723-b898-ef8df1b21e1c\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"8604ff20-3bcf-4df3-a66c-57a22c263b13\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"4f20ea21-942a-43cb-8b72-a20fbd0792a9\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"4d54c7aa-fe98-4b5c-8637-01fe48f196f2\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"88a684ed-a49b-44b9-8f34-100c8356a335\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"a2eb4247-8898-4d44-9a83-d260ee4d3385\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"af760bd6-f413-4086-ad83-bcbe03cb4956\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"d47dcb8d-8228-4908-831e-c64aad15f0c2\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"9f2a7747-99ad-4c6c-83bc-6dbd6dad1690\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"86b40883-f289-4a51-af8e-36eddfdac163\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"726f6fec-f93e-4da7-8f18-d23c1c2bc710\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"fb460c1b-a7fb-4dcd-9bd1-ead6bea63a22\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"dfa5b06a-18a6-4317-ba37-dded6e333b83\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"50fd97ad-802c-4956-a535-971b29cc564d\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"ac2f8180-0c6b-4f75-b141-ec899556bd47\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"940e5f2b-2367-45b7-ab57-36c684e6ab7c\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"0eb98392-9955-401e-8b8c-afca5d19b630\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"8cf3e4a8-c497-4e44-b1ec-0208f2a28cd8\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"7f9dbd8d-a4cc-40a5-adbb-459ec52d60df\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"da237e2e-ab69-4f49-b16e-ae32e2b9f413\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"0a6b7174-904c-4429-8774-5234860d2537\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"29dae3bb-bc9f-4df4-8af3-5cb743535777\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"405f14b6-8893-4ed6-8190-656d0e0b4a1d\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"79e30290-2d14-4cde-95df-735d34a79d92\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"91684d86-0f40-485c-a898-ab7d9e30ee79\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"42d22a9e-5243-44ef-b22f-572a69855de6\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"f7e3319c-3f47-4071-9c14-a55a8a449018\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"8b61ca05-0d11-4441-bd06-fa890b05c5e1\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"e0f9fb4c-9eec-4f5b-9e42-ef1088d01530\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"ac9b04d3-89d1-416a-bcb6-1a93887660e9\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"4140a5b4-36b3-452b-b982-c32b4a11a93e\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"0baa6ce4-cbf9-4e0d-9e46-f4822c0887e9\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"d0c9ef01-5000-402e-9d21-5229d73b5d6e\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"42702842-e3ab-4003-ad27-375aa41cd217\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"013c29bd-cfa2-47e6-9f00-5e5f94d80a4f\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"50e0b8f6-d08d-411c-be4e-6e5520537e29\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"47f44233-90f5-40d7-841b-af854a1d15c5\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"d401447c-ff98-46c8-bf90-6cc4a2025c43\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"c2968ca7-0a7c-48f9-9a15-d0205d82d3ff\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"344f4af6-3a00-4d5d-8beb-94b9738ff460\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"8cdfe780-d6a6-47f3-86ca-4781e24bbfae\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"c028291b-defc-4468-862b-95f1dbb5424c\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"6a7d969b-8470-46cb-8492-d5e1636b607d\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"a9d40a2b-a0cc-44a8-844d-bb748fd0ed4f\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"505685b3-2aeb-4868-866e-5eaf80646a71\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"7427c0c4-d429-4fcc-830e-2f6fec1be49c\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"6d5ac707-9ff4-4d2c-817a-c0f6621cc183\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"47b8ef86-3684-46e9-89a1-fe1459020569\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"436b0a8e-fb5b-426f-9681-7d97c66550f0\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"aaf68e53-78e1-4729-8ccc-e0c5f377f3db\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"11b1eec1-6452-4659-8b55-1cd89f613c95\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"5082275b-acd7-47e8-aef0-d6e0c621a636\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"c4a40605-fa6b-4b29-a6e8-cc54dc300d94\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"5310c7dd-ca10-4225-b2d3-63398b36d54f\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"acbb0b10-5de8-49a0-a486-dbbdd3d5653c\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"ed203cf1-1614-4374-b753-1895252dbc8e\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"3899983b-676c-4ba6-9871-8b279019ce67\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"92040605-22c1-4650-a0c6-e6c1710e0205\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"d0e36a46-a49e-4e4a-98dc-3e4584fb0a6a\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"5cdc85a0-c698-4af4-90c3-0866ec7b757a\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"6742d9e2-cf95-4c99-b90c-ddeb04ffe4e6\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"4b769a03-87b5-4c82-90e6-65d6a698953e\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"ed41eeef-5ba6-4964-83ad-4e09657aabb9\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"97c07b5a-77df-4342-9293-4f30cda0274a\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"ed9898fc-2baa-4995-8d10-6e72af6fd7ac\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"ab8fe5a8-2867-48d1-ad8b-a51b103129e3\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"f1b10c0b-fe49-4bc1-9025-9e3e7c5bd603\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"8a65e6f5-1cb0-4457-849b-60eaabc31968\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"19a08c63-cbcc-4fed-b628-18375d332dd1\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"b7942bf7-141a-4875-85d2-253c99534b4b\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"ffb5f44d-b2ea-41a9-8c2f-b43c793e821a\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"8889aeb1-21bd-45d0-adea-bbcef8544e9a\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"673f5ff1-8d3d-4feb-98f0-0390abdbb715\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"86306a74-c512-4d2e-ac60-11996e3a0e42\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"1b2df781-70e0-4123-81c8-0b86ec8f2c12\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"8099ce05-0b81-47d3-9f8e-48f18cc300c0\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"b192a83a-ec5d-40cf-9027-95cb11a15f4c\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"829221a9-2504-4ee2-876e-758b0b7e87e2\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"bd24c85d-f3b8-461e-9bd4-228231ffe3bd\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"8b6b5ee3-fa9b-4075-95a6-acc622f6cfc5\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"7b869364-ca2d-40f4-aa8d-5d116c04e005\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"81f8ee44-2009-4a46-93d4-02a23cd92986\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"99d26d1a-7793-4a6b-89fb-c486aeac16ec\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"b5d98ac3-d171-4071-b4aa-6731b1c5c7f7\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"ba3872e9-cd7d-4119-9a6f-07d61b38b8a7\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"f724357e-5182-4c13-9cf6-4f95e8f1a747\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"5356695e-614c-44d8-859d-98f4d2ee4639\")&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=\"8745dbe7-bd85-4a9f-a5b4-140dec901b65\", element=\"1f74ff86-f212-4331-bbb5-7adc4692541a\")&gt;]]\n</code></pre>\n\n<p>Now, I am confused as to how to iterate through this by clicking on each link, going to next page, and navigating back.\nI tried for loop below but that does not work. Also, if I include print len(state) in the code, it shows 1. could it be because of 'state' being a list with in a list (notice 2 square brackets in o/p of print (state)). if so, how would I convert it to one list??</p>\n\n<pre><code>for i in range (0,len(state)):\n    state[i].click()\n</code></pre>\n\n<p>below is the html</p>\n\n<pre><code>&lt;ol class=\"ranking\"&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/united-states/\"&gt;United States&lt;/a&gt;&lt;span&gt;$625.63 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/china/\"&gt;China&lt;/a&gt;&lt;span&gt;$261 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/mexico/\"&gt;Mexico&lt;/a&gt;&lt;span&gt;$126.08 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/spain/\"&gt;Spain&lt;/a&gt;&lt;span&gt;$124.06&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/italy-economy/\"&gt;Italy&lt;/a&gt;&lt;span&gt;$111.05 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/japan/\"&gt;Japan&lt;/a&gt;&lt;span&gt;$108.3 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/canada/\"&gt;Canada&lt;/a&gt;&lt;span&gt;$77.83&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/india/\"&gt;India&lt;/a&gt;&lt;span&gt;$68.59 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/united-kingdom/\"&gt;United Kingdom&lt;/a&gt;&lt;span&gt;$61.96&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/russia/\"&gt;Russia&lt;/a&gt;&lt;span&gt;$49.04 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/germany/\"&gt;Germany&lt;/a&gt;&lt;span&gt;$39.67 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/south-korea/\"&gt;South Korea&lt;/a&gt;&lt;span&gt;$26.2 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/indonesia/\"&gt;Indonesia&lt;/a&gt;&lt;span&gt;$23.05 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/philippines/\"&gt;Philippines&lt;/a&gt;&lt;span&gt;$17.27 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/turkey/\"&gt;Turkey&lt;/a&gt;&lt;span&gt;$17.16 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/brazil/\"&gt;Brazil&lt;/a&gt;&lt;span&gt;$17 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/australia/\"&gt;Australia&lt;/a&gt;&lt;span&gt;$14.62 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/colombia/\"&gt;Colombia&lt;/a&gt;&lt;span&gt;$14.50 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/venezuela/\"&gt;Venezuela&lt;/a&gt;&lt;span&gt;$14.19 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/thailand/\"&gt;Thailand&lt;/a&gt;&lt;span&gt;$13.95 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/paraguay/\"&gt;Paraguay&lt;/a&gt;&lt;span&gt;$13 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/morocco/\"&gt;Morocco&lt;/a&gt;&lt;span&gt;$12.7 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/iran/\"&gt;Iran&lt;/a&gt;&lt;span&gt;$10.64 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/guatemala/\"&gt;Guatemala&lt;/a&gt;&lt;span&gt;$10.11 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/saudi-arabia/\"&gt;Saudi Arabia&lt;/a&gt;&lt;span&gt;$10.1 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/france/\"&gt;France&lt;/a&gt;&lt;span&gt;$9.85 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/nigeria/\"&gt;Nigeria&lt;/a&gt;&lt;span&gt;$8.4 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/afghanistan/\"&gt;Afghanistan&lt;/a&gt;&lt;span&gt;$7.3 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/israel/\"&gt;Israel&lt;/a&gt;&lt;span&gt;$7.05 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/peru/\"&gt;Peru&lt;/a&gt;&lt;span&gt;$6.7 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/pakistan/\"&gt;Pakistan&lt;/a&gt;&lt;span&gt;$6.53 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/iraq/\"&gt;Iraq&lt;/a&gt;&lt;span&gt;$5.17 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/bulgaria/\"&gt;Bulgaria&lt;/a&gt;&lt;span&gt;$4.74 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/hungary/\"&gt;Hungary&lt;/a&gt;&lt;span&gt;$4.6 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/switzerland/\"&gt;Switzerland&lt;/a&gt;&lt;span&gt;$4.5 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/ukraine/\"&gt;Ukraine&lt;/a&gt;&lt;span&gt;$4.31 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/south-africa/\"&gt;South Africa&lt;/a&gt;&lt;span&gt;$3.93 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/greece/\"&gt;Greece&lt;/a&gt;&lt;span&gt;$3.85 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/egypt/\"&gt;Egypt&lt;/a&gt;&lt;span&gt;$3.79 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/malaysia/\"&gt;Malaysia&lt;/a&gt;&lt;span&gt;$2.99 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/ireland/\"&gt;Ireland&lt;/a&gt;&lt;span&gt;$2.98 Billion&lt;/span&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"https://www.havocscope.com/tag/taiwan/\"&gt;Taiwan&lt;/a&gt;&lt;span&gt;$2.60 Billion&lt;/span&gt;&lt;/li&gt;\n&lt;/ol&gt;\n</code></pre>\n"}, {"tags": ["python", "arrays", "list", "closest"], "comments": [{"owner": {"reputation": 69, "user_id": 9718623, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OeNhkky2Fk0/AAAAAAAAAAI/AAAAAAAAAAo/5GlTXWSLjEU/photo.jpg?sz=128", "display_name": "Ben Wang", "link": "https://stackoverflow.com/users/9718623/ben-wang"}, "edited": false, "score": 0, "creation_date": 1533154077, "post_id": 51641518, "comment_id": 90247432, "body": "the dataset is too larger and I post a small part of it."}], "answers": [{"comments": [{"owner": {"reputation": 21232, "user_id": 550094, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7CAou.jpg?s=128&g=1", "display_name": "Thierry Lathuille", "link": "https://stackoverflow.com/users/550094/thierry-lathuille"}, "edited": false, "score": 1, "creation_date": 1533156499, "post_id": 51641568, "comment_id": 90248493, "body": "You can also pre-process the <code>A</code> list by calculating the middles of the adjacent values, then search the insertion point in this list of middles. This way, you don&#39;t need to test which number is closer, you get directly the right one."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 4, "last_activity_date": 1533154425, "last_edit_date": 1533154425, "creation_date": 1533154266, "answer_id": 51641568, "question_id": 51641518, "link": "https://stackoverflow.com/questions/51641518/find-the-closest-numbers-in-a-data-set-based-on-target-data-set/51641568#51641568", "title": "Find the closest numbers in a data set based on target data set", "body": "<ul>\n<li>Sort data set <code>A</code></li>\n<li>For each element of <code>B</code> (call it <code>b</code>)</li>\n<li>Use a binary search (or interpolation search) to find where <code>b</code> would fit into <code>A</code>.</li>\n<li>That gives you two adjacent indices; one number is larger than <code>b</code>, one smaller.</li>\n<li>Choose the number of the two closer to <code>b</code>.</li>\n</ul>\n\n<p>Does that get you going?</p>\n"}, {"comments": [{"owner": {"reputation": 69, "user_id": 9718623, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OeNhkky2Fk0/AAAAAAAAAAI/AAAAAAAAAAo/5GlTXWSLjEU/photo.jpg?sz=128", "display_name": "Ben Wang", "link": "https://stackoverflow.com/users/9718623/ben-wang"}, "edited": false, "score": 0, "creation_date": 1533155344, "post_id": 51641669, "comment_id": 90247975, "body": "I copied your codes and ran it. it gave me an error."}, {"owner": {"reputation": 69, "user_id": 9718623, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OeNhkky2Fk0/AAAAAAAAAAI/AAAAAAAAAAo/5GlTXWSLjEU/photo.jpg?sz=128", "display_name": "Ben Wang", "link": "https://stackoverflow.com/users/9718623/ben-wang"}, "edited": false, "score": 0, "creation_date": 1533155392, "post_id": 51641669, "comment_id": 90248008, "body": "&lt;ipython-input-187-b954c3c003b0&gt; in &lt;module&gt;()       3     for i, ((curr_diff, _), b) in enumerate(zip(stored, arr2)):       4         diff = abs(a-b) ----&gt; 5         if diff &lt; curr_diff:       6             stored[i] = (diff, a)  ValueError: The truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all()."}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "reply_to_user": {"reputation": 69, "user_id": 9718623, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OeNhkky2Fk0/AAAAAAAAAAI/AAAAAAAAAAo/5GlTXWSLjEU/photo.jpg?sz=128", "display_name": "Ben Wang", "link": "https://stackoverflow.com/users/9718623/ben-wang"}, "edited": false, "score": 0, "creation_date": 1533155678, "post_id": 51641669, "comment_id": 90248125, "body": "What types are your <code>A</code> and <code>B</code>?  It looks like they contain <code>Series</code> instead of integers."}, {"owner": {"reputation": 69, "user_id": 9718623, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OeNhkky2Fk0/AAAAAAAAAAI/AAAAAAAAAAo/5GlTXWSLjEU/photo.jpg?sz=128", "display_name": "Ben Wang", "link": "https://stackoverflow.com/users/9718623/ben-wang"}, "edited": false, "score": 0, "creation_date": 1533156220, "post_id": 51641669, "comment_id": 90248369, "body": "Both of them are lists. How to change the series into integer? Thanks"}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "reply_to_user": {"reputation": 69, "user_id": 9718623, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OeNhkky2Fk0/AAAAAAAAAAI/AAAAAAAAAAo/5GlTXWSLjEU/photo.jpg?sz=128", "display_name": "Ben Wang", "link": "https://stackoverflow.com/users/9718623/ben-wang"}, "edited": false, "score": 0, "creation_date": 1533156363, "post_id": 51641669, "comment_id": 90248430, "body": "I don&#39;t know what your data looks like. Are they lists of <code>Series</code> of ints?  In that case I would use <code>itertools.chain.from_iterable</code> to flatten them: <code>A = list(chain.from_iterable(A))</code>"}, {"owner": {"reputation": 69, "user_id": 9718623, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OeNhkky2Fk0/AAAAAAAAAAI/AAAAAAAAAAo/5GlTXWSLjEU/photo.jpg?sz=128", "display_name": "Ben Wang", "link": "https://stackoverflow.com/users/9718623/ben-wang"}, "edited": false, "score": 0, "creation_date": 1533157432, "post_id": 51641669, "comment_id": 90248917, "body": "They are not ints. Almost all of them have decimal points.I checked the original data type and it&#39;s float 64."}], "tags": [], "owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "is_accepted": false, "score": 0, "last_activity_date": 1533154760, "creation_date": 1533154760, "answer_id": 51641669, "question_id": 51641518, "link": "https://stackoverflow.com/questions/51641518/find-the-closest-numbers-in-a-data-set-based-on-target-data-set/51641669#51641669", "title": "Find the closest numbers in a data set based on target data set", "body": "<p>Make a list of pairs, <code>(difference, number)</code> for each element in <code>B</code>.  For each item in <code>A</code>, compute its difference with each item in <code>B</code> and if that difference is smaller than the stored one, replace the stored data.</p>\n\n<pre><code>A = (762.859793, 763.544183, 764.272883, 766.190053, 767.108693, 767.123893, 768.933893, 770.619013, 771.375173, 771.522083, 774.9478730000001, 775.138843, 775.463863, 776.332693, 776.466303, 777.650083, 778.3751129999999, 781.922783, 782.592033, 784.224423, 784.779903, 785.2743429999999, 787.098133, 787.8258030000001, 787.8593030000001, 788.194393, 790.939383, 791.379753, 793.572803, 796.093073, 796.720693, 796.852473, 798.519643, 800.145803, 800.758723, 801.239613, 801.332453, 801.819333, 805.290823, 806.404353, 807.995663, 808.683403, 810.0645030000001, 810.695673, 810.7933929999999, 811.150203, 814.270803, 814.706783, 815.6527629999999, 819.127253, 819.820733, 821.030753, 821.166193, 823.111683, 824.637013, 826.707083, 826.997243, 827.441463, 828.529713, 830.364193, 831.241203, 831.2571929999999, 832.635243, 832.9749730000001, 834.222713, 837.932063, 838.250483, 838.695363, 840.0615730000001, 841.246143, 841.300043, 841.5062230000001, 844.7620730000001, 845.1879230000001, 846.261283, 847.139523, 849.0279429999999, 850.5646929999999, 850.726553, 851.8736529999999, 853.9559830000001, 854.171933, 857.674983, 858.035633, 858.327443, 858.9393230000001, 859.365103, 860.0646929999999, 861.035573, 861.496883, 864.127743, 866.558833, 867.0207429999999, 868.135673, 869.329093, 870.5860529999999, 871.1149230000001, 871.691343, 872.156483, 875.2681230000001, 875.921803, 876.6624029999999, 879.2358929999999, 879.7697029999999, 880.6190730000001, 882.563473, 883.1651529999999, 883.6522130000001, 884.311393, 886.585383, 888.0967929999999, 889.6549630000001, 890.564143, 891.0488230000001, 892.887933, 893.3944630000001, 896.817743, 897.9441429999999, 898.577573, 898.681813, 900.280573, 901.308643, 903.324453, 905.128653, 905.9143029999999, 906.190423, 906.641533, 907.232963, 909.896413, 912.3604630000001, 913.905633, 914.0172630000001, 915.186703, 915.764243, 917.266943, 921.000943, 921.958943, 923.0551429999999, 924.235543, 924.545743, 925.517043, 925.8717429999999, 927.906943, 931.119243, 931.856543, 933.8970429999999, 933.929043, 934.2806429999999, 935.171843, 936.956243, 938.8980429999999, 941.066643, 941.633743, 942.986043, 944.437243, 945.839343, 948.351143, 949.9056429999999, 950.118243, 950.587543, 951.3468429999999, 954.000243, 954.205843, 954.944843, 955.703343, 959.0683429999999, 959.298543, 960.0447429999999, 961.379543, 965.161943, 967.108743, 967.7327429999999, 968.199043, 968.438843, 969.973543, 970.540543, 971.3676429999999, 972.284543, 973.603743, 976.753143, 978.1982429999999, 978.214943, 978.545843, 979.070643, 980.912243, 982.989643, 985.355943, 986.1942429999999, 986.3504429999999, 986.4826429999999, 988.964343, 989.596543, 992.602043, 993.117943, 993.7612429999999, 994.3083429999999, 994.401343, 995.340643, 998.5397429999999, 999.000443, 1000.593343, 1000.6357429999999, 1001.2584429999999, 1001.334243, 1003.663543, 1004.3092429999999, 1006.184043, 1006.665143, 1007.890843, 1010.872443, 1011.4528429999999, 1012.454843, 1012.648543, 1012.825443, 1013.512643, 1015.107543, 1017.5950429999999, 1018.145843, 1022.399143, 1023.348243, 1023.4881429999999, 1023.703943, 1023.892743, 1024.563343, 1026.059343, 1028.420643, 1028.633143, 1028.928743, 1029.316843, 1032.945843, 1036.954843, 1037.770843, 1038.025643, 1039.704743, 1040.994643, 1041.791843, 1042.953943, 1043.592843, 1043.708343, 1050.5268429999999, 1052.079443, 1052.649543, 1052.684943, 1055.256443, 1060.528543, 1061.940143, 1062.041143, 1065.194343, 1065.722143, 1066.910543, 1068.947743, 1073.2487429999999, 1073.632343, 1074.822043, 1075.200543, 1076.141143, 1077.981343, 1079.280243, 1081.3022429999999, 1081.893343, 1085.848643, 1086.145043, 1087.4752429999999, 1087.7197429999999, 1089.479843, 1094.0820429999999, 1094.511343, 1094.685543, 1096.808443, 1097.674643, 1100.9245429999999, 1101.318843, 1101.795743, 1106.028343, 1106.752143, 1108.441043, 1109.063443, 1110.809843, 1112.244343, 1115.205043, 1115.793543, 1116.281043, 1117.533043, 1120.772743, 1120.943343, 1122.063243, 1126.348043, 1126.588843, 1127.782343, 1127.8493429999999, 1132.284543, 1133.968643, 1134.083643, 1134.812743, 1138.425743, 1140.277243, 1142.692943, 1143.479343, 1143.508343, 1146.1264429999999, 1147.5087429999999, 1148.0667429999999, 1149.901943, 1150.083443, 1154.467843, 1155.7469429999999, 1156.378443, 1157.213743, 1157.893943, 1161.299843, 1163.574343, 1165.368743, 1166.530043, 1167.6391429999999, 1168.554843, 1169.4887429999999, 1170.586043, 1175.934543, 1178.156243, 1178.610543, 1178.921943, 1179.145843, 1179.573643, 1187.012243, 1187.262843, 1187.406943, 1189.229243, 1191.636343, 1191.886343, 1194.272843, 1195.991843, 1199.937643, 1200.047843, 1201.449543, 1204.830543, 1205.389743, 1209.462843, 1210.561743, 1212.594143, 1213.386543, 1214.1418429999999, 1214.154443, 1219.073643, 1221.015143, 1222.636843, 1223.881443, 1227.9897429999999, 1228.923443, 1229.525743, 1233.922243, 1234.473743, 1235.452343, 1235.808943, 1240.449043, 1241.093643, 1245.171843, 1245.478243, 1246.061043, 1246.452043, 1249.927343, 1252.341943, 1255.264743, 1257.632643, 1258.441243, 1258.452643, 1259.841943, 1260.042343, 1265.0739429999999, 1266.0141429999999, 1267.6002429999999, 1269.445043, 1270.469243, 1274.139643, 1274.924043, 1276.423843, 1281.449543, 1283.915543, 1284.392443, 1284.828943, 1287.5820429999999, 1288.2985429999999, 1290.2225429999999, 1290.778043, 1294.631843, 1296.719843, 1298.903343, 1301.526443, 1302.276343, 1302.490343, 1303.954143, 1309.437843, 1310.548043, 1314.348243, 1316.070543, 1316.260843, 1317.751243, 1317.935543, 1322.146643, 1328.689343, 1329.097243, 1329.546543, 1329.820643, 1333.801543, 1334.257043, 1338.509343, 1338.584243, 1339.321543, 1341.807143, 1345.492643, 1347.315443, 1348.668043, 1349.854643, 1352.199543, 1352.210943, 1356.886143, 1358.197243, 1361.030843, 1362.906043, 1364.2469429999999, 1366.268943, 1369.804343, 1374.347243, 1374.5440429999999, 1374.9235429999999, 1375.318443, 1377.875843, 1380.191043, 1381.156143, 1387.996743, 1388.038843, 1388.494543, 1390.815443, 1391.645243, 1397.819343, 1398.548343, 1399.623443, 1400.494943, 1402.532943, )\nB = (679.070505, 1358.141011)\n\nstored = [(float('inf'), None)]*len(B)\nfor a in A:\n    for i, ((curr_diff, _), b) in enumerate(zip(stored, B)):\n        diff = abs(a-b)\n        if diff &lt; curr_diff:\n            stored[i] = (diff, a)\n</code></pre>\n\n<p>This gives me </p>\n\n<pre><code>[(83.78928799999994, 762.859793), (0.056232000000136395, 1358.197243)]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 2, "last_activity_date": 1533155028, "creation_date": 1533155028, "answer_id": 51641723, "question_id": 51641518, "link": "https://stackoverflow.com/questions/51641518/find-the-closest-numbers-in-a-data-set-based-on-target-data-set/51641723#51641723", "title": "Find the closest numbers in a data set based on target data set", "body": "<p>With NumPy arrays and vectorised operations:</p>\n\n<pre><code>import numpy as np\n\nA = np.array(A)\nB = np.array(B)\n\nidx = np.abs(A - B[:, None]).argmin(1)\nres = A[idx]\n\nprint(res)\n\narray([ 762.859793, 1358.197243])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21232, "user_id": 550094, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7CAou.jpg?s=128&g=1", "display_name": "Thierry Lathuille", "link": "https://stackoverflow.com/users/550094/thierry-lathuille"}, "is_accepted": false, "score": 2, "last_activity_date": 1533156153, "last_edit_date": 1533156153, "creation_date": 1533155841, "answer_id": 51641916, "question_id": 51641518, "link": "https://stackoverflow.com/questions/51641518/find-the-closest-numbers-in-a-data-set-based-on-target-data-set/51641916#51641916", "title": "Find the closest numbers in a data set based on target data set", "body": "<p>You can pre-process your long list in order to calculate the middle value between adjacent pairs. Then, you can use <a href=\"https://docs.python.org/3.7/library/bisect.html\" rel=\"nofollow noreferrer\">bisect</a> to obtain the index of the closest number:</p>\n\n<pre><code>from bisect import bisect\n\nA = (762.859793, 763.544183, 764.272883, 766.190053, 767.108693, 767.123893, 768.933893, 770.619013, 771.375173, 771.522083, 774.9478730000001, 775.138843, 775.463863, 776.332693, 776.466303, 777.650083, 778.3751129999999, 781.922783, 782.592033, 784.224423, 784.779903, 785.2743429999999, 787.098133, 787.8258030000001, 787.8593030000001, 788.194393, 790.939383, 791.379753, 793.572803, 796.093073, 796.720693, 796.852473, 798.519643, 800.145803, 800.758723, 801.239613, 801.332453, 801.819333, 805.290823, 806.404353, 807.995663, 808.683403, 810.0645030000001, 810.695673, 810.7933929999999, 811.150203, 814.270803, 814.706783, 815.6527629999999, 819.127253, 819.820733, 821.030753, 821.166193, 823.111683, 824.637013, 826.707083, 826.997243, 827.441463, 828.529713, 830.364193, 831.241203, 831.2571929999999, 832.635243, 832.9749730000001, 834.222713, 837.932063, 838.250483, 838.695363, 840.0615730000001, 841.246143, 841.300043, 841.5062230000001, 844.7620730000001, 845.1879230000001, 846.261283, 847.139523, 849.0279429999999, 850.5646929999999, 850.726553, 851.8736529999999, 853.9559830000001, 854.171933, 857.674983, 858.035633, 858.327443, 858.9393230000001, 859.365103, 860.0646929999999, 861.035573, 861.496883, 864.127743, 866.558833, 867.0207429999999, 868.135673, 869.329093, 870.5860529999999, 871.1149230000001, 871.691343, 872.156483, 875.2681230000001, 875.921803, 876.6624029999999, 879.2358929999999, 879.7697029999999, 880.6190730000001, 882.563473, 883.1651529999999, 883.6522130000001, 884.311393, 886.585383, 888.0967929999999, 889.6549630000001, 890.564143, 891.0488230000001, 892.887933, 893.3944630000001, 896.817743, 897.9441429999999, 898.577573, 898.681813, 900.280573, 901.308643, 903.324453, 905.128653, 905.9143029999999, 906.190423, 906.641533, 907.232963, 909.896413, 912.3604630000001, 913.905633, 914.0172630000001, 915.186703, 915.764243, 917.266943, 921.000943, 921.958943, 923.0551429999999, 924.235543, 924.545743, 925.517043, 925.8717429999999, 927.906943, 931.119243, 931.856543, 933.8970429999999, 933.929043, 934.2806429999999, 935.171843, 936.956243, 938.8980429999999, 941.066643, 941.633743, 942.986043, 944.437243, 945.839343, 948.351143, 949.9056429999999, 950.118243, 950.587543, 951.3468429999999, 954.000243, 954.205843, 954.944843, 955.703343, 959.0683429999999, 959.298543, 960.0447429999999, 961.379543, 965.161943, 967.108743, 967.7327429999999, 968.199043, 968.438843, 969.973543, 970.540543, 971.3676429999999, 972.284543, 973.603743, 976.753143, 978.1982429999999, 978.214943, 978.545843, 979.070643, 980.912243, 982.989643, 985.355943, 986.1942429999999, 986.3504429999999, 986.4826429999999, 988.964343, 989.596543, 992.602043, 993.117943, 993.7612429999999, 994.3083429999999, 994.401343, 995.340643, 998.5397429999999, 999.000443, 1000.593343, 1000.6357429999999, 1001.2584429999999, 1001.334243, 1003.663543, 1004.3092429999999, 1006.184043, 1006.665143, 1007.890843, 1010.872443, 1011.4528429999999, 1012.454843, 1012.648543, 1012.825443, 1013.512643, 1015.107543, 1017.5950429999999, 1018.145843, 1022.399143, 1023.348243, 1023.4881429999999, 1023.703943, 1023.892743, 1024.563343, 1026.059343, 1028.420643, 1028.633143, 1028.928743, 1029.316843, 1032.945843, 1036.954843, 1037.770843, 1038.025643, 1039.704743, 1040.994643, 1041.791843, 1042.953943, 1043.592843, 1043.708343, 1050.5268429999999, 1052.079443, 1052.649543, 1052.684943, 1055.256443, 1060.528543, 1061.940143, 1062.041143, 1065.194343, 1065.722143, 1066.910543, 1068.947743, 1073.2487429999999, 1073.632343, 1074.822043, 1075.200543, 1076.141143, 1077.981343, 1079.280243, 1081.3022429999999, 1081.893343, 1085.848643, 1086.145043, 1087.4752429999999, 1087.7197429999999, 1089.479843, 1094.0820429999999, 1094.511343, 1094.685543, 1096.808443, 1097.674643, 1100.9245429999999, 1101.318843, 1101.795743, 1106.028343, 1106.752143, 1108.441043, 1109.063443, 1110.809843, 1112.244343, 1115.205043, 1115.793543, 1116.281043, 1117.533043, 1120.772743, 1120.943343, 1122.063243, 1126.348043, 1126.588843, 1127.782343, 1127.8493429999999, 1132.284543, 1133.968643, 1134.083643, 1134.812743, 1138.425743, 1140.277243, 1142.692943, 1143.479343, 1143.508343, 1146.1264429999999, 1147.5087429999999, 1148.0667429999999, 1149.901943, 1150.083443, 1154.467843, 1155.7469429999999, 1156.378443, 1157.213743, 1157.893943, 1161.299843, 1163.574343, 1165.368743, 1166.530043, 1167.6391429999999, 1168.554843, 1169.4887429999999, 1170.586043, 1175.934543, 1178.156243, 1178.610543, 1178.921943, 1179.145843, 1179.573643, 1187.012243, 1187.262843, 1187.406943, 1189.229243, 1191.636343, 1191.886343, 1194.272843, 1195.991843, 1199.937643, 1200.047843, 1201.449543, 1204.830543, 1205.389743, 1209.462843, 1210.561743, 1212.594143, 1213.386543, 1214.1418429999999, 1214.154443, 1219.073643, 1221.015143, 1222.636843, 1223.881443, 1227.9897429999999, 1228.923443, 1229.525743, 1233.922243, 1234.473743, 1235.452343, 1235.808943, 1240.449043, 1241.093643, 1245.171843, 1245.478243, 1246.061043, 1246.452043, 1249.927343, 1252.341943, 1255.264743, 1257.632643, 1258.441243, 1258.452643, 1259.841943, 1260.042343, 1265.0739429999999, 1266.0141429999999, 1267.6002429999999, 1269.445043, 1270.469243, 1274.139643, 1274.924043, 1276.423843, 1281.449543, 1283.915543, 1284.392443, 1284.828943, 1287.5820429999999, 1288.2985429999999, 1290.2225429999999, 1290.778043, 1294.631843, 1296.719843, 1298.903343, 1301.526443, 1302.276343, 1302.490343, 1303.954143, 1309.437843, 1310.548043, 1314.348243, 1316.070543, 1316.260843, 1317.751243, 1317.935543, 1322.146643, 1328.689343, 1329.097243, 1329.546543, 1329.820643, 1333.801543, 1334.257043, 1338.509343, 1338.584243, 1339.321543, 1341.807143, 1345.492643, 1347.315443, 1348.668043, 1349.854643, 1352.199543, 1352.210943, 1356.886143, 1358.197243, 1361.030843, 1362.906043, 1364.2469429999999, 1366.268943, 1369.804343, 1374.347243, 1374.5440429999999, 1374.9235429999999, 1375.318443, 1377.875843, 1380.191043, 1381.156143, 1387.996743, 1388.038843, 1388.494543, 1390.815443, 1391.645243, 1397.819343, 1398.548343, 1399.623443, 1400.494943, 1402.532943, )\n\nB = (679.070505, 763, 1358.141011, 4000)\n# A seems to be already sorted, otherwise we would have to sort it\n# first\nmiddles = [(A[i] + A[i+1])/2 for i in range(len(A)-1) ]\n\nclosest = [A[bisect(middles, value)] for value in B]\n\nprint(closest)\n# [762.859793, 762.859793, 1358.197243, 1402.532943]\n</code></pre>\n\n<p><code>bisect(middles, value)</code> will return the index at which you would have to insert <code>value</code> in the list of <code>middles</code>, such that it will be just between two middle values. This way, it is guaranteed to be closest to the value between these middles.  </p>\n\n<p>The creation of the middles list is O(size of A), each subsequent use of bisect will be rather fast as it uses a bisection algorithm. </p>\n"}], "owner": {"reputation": 69, "user_id": 9718623, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OeNhkky2Fk0/AAAAAAAAAAI/AAAAAAAAAAo/5GlTXWSLjEU/photo.jpg?sz=128", "display_name": "Ben Wang", "link": "https://stackoverflow.com/users/9718623/ben-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 51641568, "answer_count": 4, "score": 1, "last_activity_date": 1533159512, "creation_date": 1533154040, "last_edit_date": 1533159512, "question_id": 51641518, "link": "https://stackoverflow.com/questions/51641518/find-the-closest-numbers-in-a-data-set-based-on-target-data-set", "title": "Find the closest numbers in a data set based on target data set", "body": "<p>I have two data sets, group <code>A</code> has hundreds numbers and group <code>B</code> have eight numbers. I want to find another eight numbers in group <code>A</code> that are closest to the four numbers in group <code>B</code>. Now I take one number from group <code>B</code> each time and compared it with group <code>A</code>. Is there other better way to do this?</p>\n\n<pre><code>A = [762.859793, 763.544183, 764.272883, 766.190053, 767.108693, 767.123893, 768.933893, 770.619013, 771.375173, 771.522083, 774.9478730000001, 775.138843, 775.463863, 776.332693, 776.466303, 777.650083, 778.3751129999999, 781.922783, 782.592033, 784.224423, 784.779903, 785.2743429999999, 787.098133, 787.8258030000001, 787.8593030000001, 788.194393, 790.939383, 791.379753, 793.572803, 796.093073, 796.720693, 796.852473, 798.519643, 800.145803, 800.758723, 801.239613, 801.332453, 801.819333, 805.290823, 806.404353, 807.995663, 808.683403, 810.0645030000001, 810.695673, 810.7933929999999, 811.150203, 814.270803, 814.706783, 815.6527629999999, 819.127253, 819.820733, 821.030753, 821.166193, 823.111683, 824.637013, 826.707083, 826.997243, 827.441463, 828.529713, 830.364193, 831.241203, 831.2571929999999, 832.635243, 832.9749730000001, 834.222713, 837.932063, 838.250483, 838.695363, 840.0615730000001, 841.246143, 841.300043, 841.5062230000001, 844.7620730000001, 845.1879230000001, 846.261283, 847.139523, 849.0279429999999, 850.5646929999999, 850.726553, 851.8736529999999, 853.9559830000001, 854.171933, 857.674983, 858.035633, 858.327443, 858.9393230000001, 859.365103, 860.0646929999999, 861.035573, 861.496883, 864.127743, 866.558833, 867.0207429999999, 868.135673, 869.329093, 870.5860529999999, 871.1149230000001, 871.691343, 872.156483, 875.2681230000001, 875.921803, 876.6624029999999, 879.2358929999999, 879.7697029999999, 880.6190730000001, 882.563473, 883.1651529999999, 883.6522130000001, 884.311393, 886.585383, 888.0967929999999, 889.6549630000001, 890.564143, 891.0488230000001, 892.887933, 893.3944630000001, 896.817743, 897.9441429999999, 898.577573, 898.681813, 900.280573, 901.308643, 903.324453, 905.128653, 905.9143029999999, 906.190423, 906.641533, 907.232963, 909.896413, 912.3604630000001, 913.905633, 914.0172630000001, 915.186703, 915.764243, 917.266943, 921.000943, 921.958943, 923.0551429999999, 924.235543, 924.545743, 925.517043, 925.8717429999999, 927.906943, 931.119243, 931.856543, 933.8970429999999, 933.929043, 934.2806429999999, 935.171843, 936.956243, 938.8980429999999, 941.066643, 941.633743, 942.986043, 944.437243, 945.839343, 948.351143, 949.9056429999999, 950.118243, 950.587543, 951.3468429999999, 954.000243, 954.205843, 954.944843, 955.703343, 959.0683429999999, 959.298543, 960.0447429999999, 961.379543, 965.161943, 967.108743, 967.7327429999999, 968.199043, 968.438843, 969.973543, 970.540543, 971.3676429999999, 972.284543, 973.603743, 976.753143, 978.1982429999999, 978.214943, 978.545843, 979.070643, 980.912243, 982.989643, 985.355943, 986.1942429999999, 986.3504429999999, 986.4826429999999, 988.964343, 989.596543, 992.602043, 993.117943, 993.7612429999999, 994.3083429999999, 994.401343, 995.340643, 998.5397429999999, 999.000443, 1000.593343, 1000.6357429999999, 1001.2584429999999, 1001.334243, 1003.663543, 1004.3092429999999, 1006.184043, 1006.665143, 1007.890843, 1010.872443, 1011.4528429999999, 1012.454843, 1012.648543, 1012.825443, 1013.512643, 1015.107543, 1017.5950429999999, 1018.145843, 1022.399143, 1023.348243, 1023.4881429999999, 1023.703943, 1023.892743, 1024.563343, 1026.059343, 1028.420643, 1028.633143, 1028.928743, 1029.316843, 1032.945843, 1036.954843, 1037.770843, 1038.025643, 1039.704743, 1040.994643, 1041.791843, 1042.953943, 1043.592843, 1043.708343, 1050.5268429999999, 1052.079443, 1052.649543, 1052.684943, 1055.256443, 1060.528543, 1061.940143, 1062.041143, 1065.194343, 1065.722143, 1066.910543, 1068.947743, 1073.2487429999999, 1073.632343, 1074.822043, 1075.200543, 1076.141143, 1077.981343, 1079.280243, 1081.3022429999999, 1081.893343, 1085.848643, 1086.145043, 1087.4752429999999, 1087.7197429999999, 1089.479843, 1094.0820429999999, 1094.511343, 1094.685543, 1096.808443, 1097.674643, 1100.9245429999999, 1101.318843, 1101.795743, 1106.028343, 1106.752143, 1108.441043, 1109.063443, 1110.809843, 1112.244343, 1115.205043, 1115.793543, 1116.281043, 1117.533043, 1120.772743, 1120.943343, 1122.063243, 1126.348043, 1126.588843, 1127.782343, 1127.8493429999999, 1132.284543, 1133.968643, 1134.083643, 1134.812743, 1138.425743, 1140.277243, 1142.692943, 1143.479343, 1143.508343, 1146.1264429999999, 1147.5087429999999, 1148.0667429999999, 1149.901943, 1150.083443, 1154.467843, 1155.7469429999999, 1156.378443, 1157.213743, 1157.893943, 1161.299843, 1163.574343, 1165.368743, 1166.530043, 1167.6391429999999, 1168.554843, 1169.4887429999999, 1170.586043, 1175.934543, 1178.156243, 1178.610543, 1178.921943, 1179.145843, 1179.573643, 1187.012243, 1187.262843, 1187.406943, 1189.229243, 1191.636343, 1191.886343, 1194.272843, 1195.991843, 1199.937643, 1200.047843, 1201.449543, 1204.830543, 1205.389743, 1209.462843, 1210.561743, 1212.594143, 1213.386543, 1214.1418429999999, 1214.154443, 1219.073643, 1221.015143, 1222.636843, 1223.881443, 1227.9897429999999, 1228.923443, 1229.525743, 1233.922243, 1234.473743, 1235.452343, 1235.808943, 1240.449043, 1241.093643, 1245.171843, 1245.478243, 1246.061043, 1246.452043, 1249.927343, 1252.341943, 1255.264743, 1257.632643, 1258.441243, 1258.452643, 1259.841943, 1260.042343, 1265.0739429999999, 1266.0141429999999, 1267.6002429999999, 1269.445043, 1270.469243, 1274.139643, 1274.924043, 1276.423843, 1281.449543, 1283.915543, 1284.392443, 1284.828943, 1287.5820429999999, 1288.2985429999999, 1290.2225429999999, 1290.778043, 1294.631843, 1296.719843, 1298.903343, 1301.526443, 1302.276343, 1302.490343, 1303.954143, 1309.437843, 1310.548043, 1314.348243, 1316.070543, 1316.260843, 1317.751243, 1317.935543, 1322.146643, 1328.689343, 1329.097243, 1329.546543, 1329.820643, 1333.801543, 1334.257043, 1338.509343, 1338.584243, 1339.321543, 1341.807143, 1345.492643, 1347.315443, 1348.668043, 1349.854643, 1352.199543, 1352.210943, 1356.886143, 1358.197243, 1361.030843, 1362.906043, 1364.2469429999999, 1366.268943, 1369.804343, 1374.347243, 1374.5440429999999, 1374.9235429999999, 1375.318443, 1377.875843, 1380.191043, 1381.156143, 1387.996743, 1388.038843, 1388.494543, 1390.815443, 1391.645243, 1397.819343, 1398.548343, 1399.623443, 1400.494943, 1402.532943, ]\n\nB = [679.070505, 1358.141011]\n</code></pre>\n"}, {"tags": ["python", "pandas", "pandas-groupby"], "comments": [{"owner": {"reputation": 1202, "user_id": 9937273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xJAip.png?s=128&g=1", "display_name": "Don Thousand", "link": "https://stackoverflow.com/users/9937273/don-thousand"}, "edited": false, "score": 0, "creation_date": 1533154115, "post_id": 51641472, "comment_id": 90247448, "body": "Steps 1-3 are relatively good. I could be nitpicky but I don&#39;t think any changes would improve what you have by much"}, {"owner": {"reputation": 1629, "user_id": 2111390, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/80903777555e4e59b2f55e91945fec76?s=128&d=identicon&r=PG", "display_name": "Bryant", "link": "https://stackoverflow.com/users/2111390/bryant"}, "reply_to_user": {"reputation": 1202, "user_id": 9937273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xJAip.png?s=128&g=1", "display_name": "Don Thousand", "link": "https://stackoverflow.com/users/9937273/don-thousand"}, "edited": false, "score": 0, "creation_date": 1533154159, "post_id": 51641472, "comment_id": 90247462, "body": "@RushabhMehta thanks for looking it over - what about 4 :D"}, {"owner": {"reputation": 4314, "user_id": 5152563, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/ca2290acd27712398ff5bf1d469129dd?s=128&d=identicon&r=PG", "display_name": "Quickbeam2k1", "link": "https://stackoverflow.com/users/5152563/quickbeam2k1"}, "edited": false, "score": 1, "creation_date": 1533154219, "post_id": 51641472, "comment_id": 90247483, "body": "step2: use <code>(df[&#39;a&#39;] - df[&#39;median&#39;]).abs()</code>as this is vectorized"}, {"owner": {"reputation": 1202, "user_id": 9937273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xJAip.png?s=128&g=1", "display_name": "Don Thousand", "link": "https://stackoverflow.com/users/9937273/don-thousand"}, "edited": false, "score": 0, "creation_date": 1533154237, "post_id": 51641472, "comment_id": 90247489, "body": "df.D = df.groupby(&#39;id&#39;).apply(lambda x: x.fillna(x.median())) almost does it, but doesn&#39;t deal with tolerances..."}, {"owner": {"reputation": 1629, "user_id": 2111390, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/80903777555e4e59b2f55e91945fec76?s=128&d=identicon&r=PG", "display_name": "Bryant", "link": "https://stackoverflow.com/users/2111390/bryant"}, "reply_to_user": {"reputation": 4314, "user_id": 5152563, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/ca2290acd27712398ff5bf1d469129dd?s=128&d=identicon&r=PG", "display_name": "Quickbeam2k1", "link": "https://stackoverflow.com/users/5152563/quickbeam2k1"}, "edited": false, "score": 0, "creation_date": 1533154380, "post_id": 51641472, "comment_id": 90247544, "body": "@Quickbeam2k1 good catch! Thanks!"}, {"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 2, "creation_date": 1533166809, "post_id": 51641472, "comment_id": 90251534, "body": "@Quickbeam2k1...both <code>abs</code> calls are vectorized just different functional form. Your suggestion inherits the numpy array call vs OP using Python built-in call. Marginal differences in performance if any."}, {"owner": {"reputation": 4314, "user_id": 5152563, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/ca2290acd27712398ff5bf1d469129dd?s=128&d=identicon&r=PG", "display_name": "Quickbeam2k1", "link": "https://stackoverflow.com/users/5152563/quickbeam2k1"}, "edited": false, "score": 0, "creation_date": 1533184547, "post_id": 51641472, "comment_id": 90255055, "body": "@Parfati, thanks. I didn&#39;t know that python&#39;s built-in <code>abs</code> is that performant."}], "answers": [{"comments": [{"owner": {"reputation": 1202, "user_id": 9937273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xJAip.png?s=128&g=1", "display_name": "Don Thousand", "link": "https://stackoverflow.com/users/9937273/don-thousand"}, "edited": false, "score": 0, "creation_date": 1533157196, "post_id": 51642115, "comment_id": 90248808, "body": "This doesn&#39;t work, he wants a unique median per group to be filled."}, {"owner": {"reputation": 5732, "user_id": 5496433, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/05803febf5f3ccac3dc093fba5fc30fb?s=128&d=identicon&r=PG&f=1", "display_name": "BallpointBen", "link": "https://stackoverflow.com/users/5496433/ballpointben"}, "reply_to_user": {"reputation": 1202, "user_id": 9937273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xJAip.png?s=128&g=1", "display_name": "Don Thousand", "link": "https://stackoverflow.com/users/9937273/don-thousand"}, "edited": false, "score": 1, "creation_date": 1533157280, "post_id": 51642115, "comment_id": 90248849, "body": "Since the median was calculated per group, each group&#39;s median is already lined up with the element(s) it would replace."}, {"owner": {"reputation": 1629, "user_id": 2111390, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/80903777555e4e59b2f55e91945fec76?s=128&d=identicon&r=PG", "display_name": "Bryant", "link": "https://stackoverflow.com/users/2111390/bryant"}, "edited": false, "score": 0, "creation_date": 1533157480, "post_id": 51642115, "comment_id": 90248942, "body": "this does seem to work for my basic test case! Let me play with it a bit more to confirm. thanks!!"}], "tags": [], "owner": {"reputation": 5732, "user_id": 5496433, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/05803febf5f3ccac3dc093fba5fc30fb?s=128&d=identicon&r=PG&f=1", "display_name": "BallpointBen", "link": "https://stackoverflow.com/users/5496433/ballpointben"}, "is_accepted": true, "score": 1, "last_activity_date": 1533159641, "last_edit_date": 1533159641, "creation_date": 1533156887, "answer_id": 51642115, "question_id": 51641472, "link": "https://stackoverflow.com/questions/51641472/pandas-best-way-to-set-a-column-based-on-other-columns-in-groupby/51642115#51642115", "title": "Pandas - Best way to set a column based on other columns in groupby", "body": "<p>Since the median column is already lined up with <code>'a'</code>, I don't think you need to loop at all, or even <code>groupby</code>.</p>\n\n<pre><code>df['a'] = df['median'].where(df['a'].isna() &amp; (df['diff'] &lt; 1), df['a'])\n</code></pre>\n\n<p>This will take the median where appropriate, otherwise just use <code>'a'</code>. </p>\n"}, {"comments": [{"owner": {"reputation": 1629, "user_id": 2111390, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/80903777555e4e59b2f55e91945fec76?s=128&d=identicon&r=PG", "display_name": "Bryant", "link": "https://stackoverflow.com/users/2111390/bryant"}, "edited": false, "score": 0, "creation_date": 1533212214, "post_id": 51643551, "comment_id": 90270112, "body": "Is there a big difference between this on the response by BallpointBen? It looks like one is operating on a <code>series</code> and using pandas&#39; <code>where</code> vs using numpy&#39;s where. I assume pandas uses <code>np.where</code> under the hood for its <code>where</code>"}, {"owner": {"reputation": 1629, "user_id": 2111390, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/80903777555e4e59b2f55e91945fec76?s=128&d=identicon&r=PG", "display_name": "Bryant", "link": "https://stackoverflow.com/users/2111390/bryant"}, "edited": false, "score": 0, "creation_date": 1533216473, "post_id": 51643551, "comment_id": 90273132, "body": "thanks - I tested this as well as the other, both worked and had similar performance. I&#39;d accept both if I could"}], "tags": [], "owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "is_accepted": false, "score": 1, "last_activity_date": 1533165923, "creation_date": 1533165923, "answer_id": 51643551, "question_id": 51641472, "link": "https://stackoverflow.com/questions/51641472/pandas-best-way-to-set-a-column-based-on-other-columns-in-groupby/51643551#51643551", "title": "Pandas - Best way to set a column based on other columns in groupby", "body": "<p>Consider also numpy's <code>where</code> for conditional logic across series/arrays. Replace loop with the following:</p>\n\n<pre><code>df['a'] = np.where((df['a'].isna()) &amp; (df['diff'] &lt; 1), df['median'], df['a'])\n</code></pre>\n"}], "owner": {"reputation": 1629, "user_id": 2111390, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/80903777555e4e59b2f55e91945fec76?s=128&d=identicon&r=PG", "display_name": "Bryant", "link": "https://stackoverflow.com/users/2111390/bryant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 980, "favorite_count": 2, "accepted_answer_id": 51642115, "answer_count": 2, "score": 2, "last_activity_date": 1533165923, "creation_date": 1533153816, "last_edit_date": 1533154297, "question_id": 51641472, "link": "https://stackoverflow.com/questions/51641472/pandas-best-way-to-set-a-column-based-on-other-columns-in-groupby", "title": "Pandas - Best way to set a column based on other columns in groupby", "body": "<p>I'm having a hard time imagining a different way to do this in pandas. My way \"works\" but is incredibly slow. At a high level I want to do this:</p>\n\n<ol>\n<li>Group data by a <code>id</code>, find the median value for <code>a</code>.</li>\n<li>Find the difference between each value of <code>a</code> and its group's median</li>\n<li>Find the max in a group of the median</li>\n<li>Then, in the group, if <code>a</code> is missing/nan, overwrite/set <code>a</code> to the median if the value found in <code>step 3</code> is less than a tolerance (say 1). </li>\n</ol>\n\n<p>This is how I've done it:</p>\n\n<p>Assume a dataframe df:</p>\n\n<pre><code>df = pd.DataFrame({'id': [1,1,2,2,3], 'a': [1, np.nan, 3, 1, 2], 'b': [np.nan, 6, 5, np.nan, 4], 'c': [4, 1, 2, 3, 3]})\n\n    id   a    b  c\n0   1  1.0  NaN  4\n1   1  NaN  6.0  1\n2   2  3.0  5.0  2\n3   2  1.0  NaN  3\n4   3  2.0  4.0  3\n</code></pre>\n\n<p>step 1:</p>\n\n<pre><code>df['median'] = df.groupby(['id'])['a'].transform('median')\n</code></pre>\n\n<p>step 2:</p>\n\n<pre><code>df['diff'] = abs(df['a'] - df['median'])\n</code></pre>\n\n<p>step 3:</p>\n\n<pre><code>df['diff'] = df.groupby(['id'])['diff'].transform('max')\n</code></pre>\n\n<p>step 4:</p>\n\n<pre><code>for key, g in df.groupby(['id']):\n    index = (df.id == key) &amp; (df['diff'] &lt; 1.0) &amp; (df.a.isna())\n    if not df[index].empty:\n        df.loc[index, 'a'] = g['median']\n</code></pre>\n\n<p>I'm relatively confident that steps 1-3 are correct and done in an efficient way (and hopefully in idomatic pandas). Step 4 I dislike, I'm pretty sure is the bottleneck, and it seems like the wrong way to do it. I can't figure out another way to do it. </p>\n\n<p>Any suggestions in improving step 4 (and 1-3 if they are wrong/could be done a better way)?</p>\n\n<p>EDIT: As you may have noticed, if you made it this far, this is just me trying to fill missing values in a specific way. If there is a much simpler way to do the whole thing, I'm all ears :)</p>\n"}, {"tags": ["python", "kivy"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 2545698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14b64f3249a28471046308941da1b0a1?s=128&d=identicon&r=PG", "display_name": "fox1986", "link": "https://stackoverflow.com/users/2545698/fox1986"}, "edited": false, "score": 0, "creation_date": 1533232129, "post_id": 51642995, "comment_id": 90282517, "body": "Hi ikolim: It almost worked. However the &quot;typwriter-text&quot; is somehow centered. I spend the whole evening to get the text starting in the upper left corner of the label, but it never worked when I try to use halign=left &amp; valign=top. I also tried to set text_size = size like it was described in the docs. No success."}, {"owner": {"reputation": 13781, "user_id": 6366098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xw9V6.png?s=128&g=1", "display_name": "ikolim", "link": "https://stackoverflow.com/users/6366098/ikolim"}, "reply_to_user": {"reputation": 25, "user_id": 2545698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14b64f3249a28471046308941da1b0a1?s=128&d=identicon&r=PG", "display_name": "fox1986", "link": "https://stackoverflow.com/users/2545698/fox1986"}, "edited": false, "score": 0, "creation_date": 1533235365, "post_id": 51642995, "comment_id": 90284026, "body": "Please refer to updated post for placing text in top-left corner of Label widget."}, {"owner": {"reputation": 25, "user_id": 2545698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14b64f3249a28471046308941da1b0a1?s=128&d=identicon&r=PG", "display_name": "fox1986", "link": "https://stackoverflow.com/users/2545698/fox1986"}, "edited": false, "score": 0, "creation_date": 1533238822, "post_id": 51642995, "comment_id": 90285503, "body": "thx. I just figured out that I had to do that binding here to make the position work:  self.my_label.bind(size=self.my_label.setter(&#39;text_size&#39;))"}], "tags": [], "owner": {"reputation": 13781, "user_id": 6366098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xw9V6.png?s=128&g=1", "display_name": "ikolim", "link": "https://stackoverflow.com/users/6366098/ikolim"}, "is_accepted": true, "score": 1, "last_activity_date": 1533243562, "last_edit_date": 1533243562, "creation_date": 1533161875, "answer_id": 51642995, "question_id": 51641456, "link": "https://stackoverflow.com/questions/51641456/kivy-updating-a-label-text-letter-by-letter-via-interval-doesnt-work/51642995#51642995", "title": "Kivy: Updating a Label-Text letter by letter via interval doesn&#39;t work", "body": "<h1>Question</h1>\n\n<blockquote>\n  <p>get the text starting in the upper left corner of the label</p>\n</blockquote>\n\n<h1>Solution - text in top-left corner</h1>\n\n<p>Add the following in the constructor, <code>__init__()</code> method.</p>\n\n<pre><code>def __init__(self, string, **kwargs):\n    super(TestScreen, self).__init__(**kwargs)\n    self.bind(size=self.setter('text_size'))\n    self.halign = 'left'\n    self.valign = 'top'\n</code></pre>\n\n<p><a href=\"https://kivy.org/docs/api-kivy.uix.label.html#text-alignment-and-wrapping\" rel=\"nofollow noreferrer\">Text alignment and wrapping</a></p>\n\n<blockquote>\n  <p>The <a href=\"https://kivy.org/docs/api-kivy.uix.label.html#kivy.uix.label.Label\" rel=\"nofollow noreferrer\">Label</a> has <a href=\"https://kivy.org/docs/api-kivy.uix.label.html#kivy.uix.label.Label.halign\" rel=\"nofollow noreferrer\">halign</a> and <a href=\"https://kivy.org/docs/api-kivy.uix.label.html#kivy.uix.label.Label.valign\" rel=\"nofollow noreferrer\">valign</a> properties to control the alignment of\n  its text. However, by default the text image (<a href=\"https://kivy.org/docs/api-kivy.uix.label.html#kivy.uix.label.Label.texture\" rel=\"nofollow noreferrer\">texture</a>) is only just\n  large enough to contain the characters and is positioned in the center\n  of the Label. The valign property will have no effect and halign will\n  only have an effect if your text has newlines; a single line of text\n  will appear to be centered even though halign is set to left (by\n  default).</p>\n  \n  <p>In order for the alignment properties to take effect, set the\n  <a href=\"https://kivy.org/docs/api-kivy.uix.label.html#kivy.uix.label.Label.text_size\" rel=\"nofollow noreferrer\">text_size</a>, which specifies the size of the bounding box within which\n  text is aligned. For instance, the following code binds this size to\n  the size of the Label, so text will be aligned within the widget\n  bounds. This will also automatically wrap the text of the Label to\n  remain within this area.</p>\n\n<pre><code>Label:\n    text_size: self.size\n    halign: 'right'\n    valign: 'middle'\n</code></pre>\n</blockquote>\n\n<h1>Output - text in top-left corner</h1>\n\n<p><a href=\"https://i.stack.imgur.com/UoFSn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UoFSn.png\" alt=\"Img01 - text in top-left corner\"></a>\n<a href=\"https://i.stack.imgur.com/ZCn1m.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZCn1m.png\" alt=\"Img02 - text in top-left corner\"></a></p>\n\n<h1>Solution - text in center</h1>\n\n<p>Using <code>Clock.create_trigger()</code> to simulate a typewriter.</p>\n\n<p><a href=\"https://kivy.org/docs/api-kivy.clock.html#triggered-events\" rel=\"nofollow noreferrer\">Triggered Events</a></p>\n\n<blockquote>\n  <p>A triggered event is a way to defer a callback. It functions exactly\n  like schedule_once() and schedule_interval() except that it doesn\u2019t\n  immediately schedule the callback. Instead, one schedules the callback\n  using the <a href=\"https://kivy.org/docs/api-kivy.clock.html#kivy.clock.ClockEvent\" rel=\"nofollow noreferrer\">ClockEvent</a> returned by it. This ensures that you can\n  call the event multiple times but it won\u2019t be scheduled more than\n  once. This is not the case with Clock.schedule_once()</p>\n</blockquote>\n\n<h2>main.py</h2>\n\n<pre><code>from kivy.app import App\nfrom kivy.uix.label import Label\nfrom kivy.clock import Clock\n\n\nclass TestScreen(Label):\n\n    def __init__(self, string, **kwargs):\n        super(TestScreen, self).__init__(**kwargs)\n        self.font_size = 26\n        self.string = string\n        self.typewriter = Clock.create_trigger(self.typeit, 1)\n        self.typewriter()\n\n    def typeit(self, dt):\n        self.text += self.string[0]\n        self.string = self.string[1:]\n        if len(self.string) &gt; 0:\n            self.typewriter()\n\n\nclass TestApp(App):\n    title = \"Kivy Typewriter\"\n\n    def build(self):\n        return TestScreen(\"That is my Kivy Typewriter demo\")\n\n\nif __name__ == \"__main__\":\n    TestApp().run()\n</code></pre>\n\n<h1>Output - text in center</h1>\n\n<p><a href=\"https://i.stack.imgur.com/AkHOS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AkHOS.png\" alt=\"Img01 - text in center\"></a>\n<a href=\"https://i.stack.imgur.com/1hbBi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1hbBi.png\" alt=\"Img02 - text in center\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 426, "user_id": 12168946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6PcIv.jpg?s=128&g=1", "display_name": "Reinstate C0MMUNiSM", "link": "https://stackoverflow.com/users/12168946/reinstate-c0mmunism"}, "is_accepted": false, "score": 0, "last_activity_date": 1574604885, "creation_date": 1574604885, "answer_id": 59018580, "question_id": 51641456, "link": "https://stackoverflow.com/questions/51641456/kivy-updating-a-label-text-letter-by-letter-via-interval-doesnt-work/59018580#59018580", "title": "Kivy: Updating a Label-Text letter by letter via interval doesn&#39;t work", "body": "<h1><strong>Don't need to use <code>kwargs</code></strong></h1>\n\n<p>To create a typewriter effect, just follow the code below.</p>\n\n<pre><code>\ndef anything(str):\n\nfor letter in str:\n    sys.stdout.write(letter)\n    sys.stdout.flush()\n    time.sleep(0.5)\n\nanything(\"That is my sample text.\")\n</code></pre>\n\n<p>The code I've written gives a 0.5 second waiting time between every letter in the string, and only takes six lines of code.</p>\n"}], "owner": {"reputation": 25, "user_id": 2545698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14b64f3249a28471046308941da1b0a1?s=128&d=identicon&r=PG", "display_name": "fox1986", "link": "https://stackoverflow.com/users/2545698/fox1986"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 51642995, "answer_count": 2, "score": 0, "last_activity_date": 1574604885, "creation_date": 1533153749, "question_id": 51641456, "link": "https://stackoverflow.com/questions/51641456/kivy-updating-a-label-text-letter-by-letter-via-interval-doesnt-work", "title": "Kivy: Updating a Label-Text letter by letter via interval doesn&#39;t work", "body": "<p>I am deperately trying to create a \"typewriter\" effect in a Kivy Label. The Text 'That is my sample text' below should fill my label letter by letter with a 0.5 interval between each letter. Just like someone typing it with a type writer.</p>\n\n<p>However the result i get is weird: Instead of getting the desired effect, the whole string is added after 0.5 and thats it. It seems like my for-loop is completely ignored.</p>\n\n<p>Any idea what I can do?</p>\n\n<p>That's my class TestScreen(Screen):</p>\n\n<pre><code>def __init__ (self,**kwargs):\n    super(TestScreen, self).__init__(**kwargs)\n\n    my_box = FloatLayout()\n\n    self.mylabel = Label(\n            text='',\n            font_size=26,\n            pos_hint={'center_x': 0.5, 'center_y': 0.05})\n\n    my_box.add_widget(self.mylabel)\n    self.add_widget(my_box)\n\n    for letter in 'That is my sample text':\n        Clock.schedule_once(partial(self.setLetterByLetter, letter=letter), 1)\n\ndef setLetterByLetter(self, dt, letter):\n    self.mylabel.text += letter\n    return True\n</code></pre>\n"}, {"tags": ["python", "range"], "comments": [{"owner": {"reputation": 2275, "user_id": 7469434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5ae58147ba5f9c3dabf9818195368d6?s=128&d=identicon&r=PG&f=1", "display_name": "IonicSolutions", "link": "https://stackoverflow.com/users/7469434/ionicsolutions"}, "edited": false, "score": 0, "creation_date": 1533153710, "post_id": 51641395, "comment_id": 90247283, "body": "Sure, check out <a href=\"https://www.w3schools.com/python/python_for_loops.asp\" rel=\"nofollow noreferrer\">this tutorial on <code>for</code> loops</a>."}, {"owner": {"reputation": 2822, "user_id": 1281548, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9T0M7.jpg?s=128&g=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/1281548/adam"}, "edited": false, "score": 0, "creation_date": 1533153728, "post_id": 51641395, "comment_id": 90247291, "body": "Why do you need to do this in the wider context of your program. This feels like an anti-pattern / code smell to begin with."}, {"owner": {"reputation": 121, "user_id": 6460815, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rmpykt7vYXM/AAAAAAAAAAI/AAAAAAAAABE/D8JcEJTyDP0/photo.jpg?sz=128", "display_name": "Neil Macneale", "link": "https://stackoverflow.com/users/6460815/neil-macneale"}, "edited": false, "score": 0, "creation_date": 1533153918, "post_id": 51641395, "comment_id": 90247368, "body": "I need to create a one-hot label for tensorflow. The value is a percentage, and I need to find which index of an array of zeros to set to one."}], "answers": [{"comments": [{"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 1, "creation_date": 1533154038, "post_id": 51641490, "comment_id": 90247409, "body": "You should include the default case for the scenario in which <code>value &gt; 64</code>"}, {"owner": {"reputation": 586, "user_id": 4113290, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c12ede6e2770f0e5e012ec34bb72046b?s=128&d=identicon&r=PG&f=1", "display_name": "Woohoojin", "link": "https://stackoverflow.com/users/4113290/woohoojin"}, "edited": false, "score": 0, "creation_date": 1533154043, "post_id": 51641490, "comment_id": 90247414, "body": "Could expand this to have a helper function that generates <code>ranges</code> between any 2 powers of 2"}, {"owner": {"reputation": 121, "user_id": 6460815, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rmpykt7vYXM/AAAAAAAAAAI/AAAAAAAAABE/D8JcEJTyDP0/photo.jpg?sz=128", "display_name": "Neil Macneale", "link": "https://stackoverflow.com/users/6460815/neil-macneale"}, "edited": false, "score": 0, "creation_date": 1533154053, "post_id": 51641490, "comment_id": 90247418, "body": "The array look like <code>[... -2, -1, -0.5, 0, 0.5, 1, 2 ...]</code>, but other than that, thanks! This works perfectly!"}], "tags": [], "owner": {"reputation": 105, "user_id": 8268265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52994d02fa33169168b1b43d81040436?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew H.", "link": "https://stackoverflow.com/users/8268265/matthew-h"}, "is_accepted": false, "score": 2, "last_activity_date": 1533154258, "last_edit_date": 1533154258, "creation_date": 1533153876, "answer_id": 51641490, "question_id": 51641395, "link": "https://stackoverflow.com/questions/51641395/check-which-range-a-number-is-within/51641490#51641490", "title": "Check which range a number is within", "body": "<p>Based off the way you described you could do something like this:</p>\n\n<pre><code>ranges = [-64, -32, -16, -8, -4, -2, -1, -0.5, 0, 0.5, 1, 2, 4, 8, 16, 32, 64]\n\ndef build_ranges(power):\n    ranges = [-0.5, 0, 0.5]\n    for i in range(power):\n        ranges.append(2**i)\n        ranges.append(-2**i)\n    return sorted(ranges)\n\ndef find_which_range(value, ranges):\n    for i, range in enumerate(sorted(ranges)):\n        if value &lt; range:\n            return i\n    return None\n\noutput = find_which_range(value, ranges)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 121, "user_id": 6460815, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rmpykt7vYXM/AAAAAAAAAAI/AAAAAAAAABE/D8JcEJTyDP0/photo.jpg?sz=128", "display_name": "Neil Macneale", "link": "https://stackoverflow.com/users/6460815/neil-macneale"}, "edited": false, "score": 1, "creation_date": 1533154289, "post_id": 51641549, "comment_id": 90247507, "body": "That is much cleaner, but because I have no clue as to whats actually happening, I&#39;m going to use the looping method. Thanks tho."}, {"owner": {"reputation": 6356, "user_id": 5030164, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/11b6c08b9d6554e51280244985e3022d?s=128&d=identicon&r=PG&f=1", "display_name": "modesitt", "link": "https://stackoverflow.com/users/5030164/modesitt"}, "reply_to_user": {"reputation": 121, "user_id": 6460815, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rmpykt7vYXM/AAAAAAAAAAI/AAAAAAAAABE/D8JcEJTyDP0/photo.jpg?sz=128", "display_name": "Neil Macneale", "link": "https://stackoverflow.com/users/6460815/neil-macneale"}, "edited": false, "score": 0, "creation_date": 1533154666, "post_id": 51641549, "comment_id": 90247675, "body": "being easy to understand is important @NeilMacneale! No problems with that :). I did edit the answer though to be more clear"}], "tags": [], "owner": {"reputation": 6356, "user_id": 5030164, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/11b6c08b9d6554e51280244985e3022d?s=128&d=identicon&r=PG&f=1", "display_name": "modesitt", "link": "https://stackoverflow.com/users/5030164/modesitt"}, "is_accepted": false, "score": 1, "last_activity_date": 1533154865, "last_edit_date": 1533154865, "creation_date": 1533154174, "answer_id": 51641549, "question_id": 51641395, "link": "https://stackoverflow.com/questions/51641395/check-which-range-a-number-is-within/51641549#51641549", "title": "Check which range a number is within", "body": "<p>Mathew provided a looping solution that works fine. But also observe that you are checking basically, which powers of 2 your number is between. Thus, you can take the log.</p>\n\n<pre><code>import math\na_value = abs(value)\nsign = 1 if value &gt; 0 else -1\nlg_value = math.log2(a_value)\nrange_ = (2**(sign*math.floor(lg_value)), 2**(sign*math.ceil(lg_value)))\n</code></pre>\n\n<p>note that slight modifications are required for ranges &lt; 1.</p>\n"}, {"tags": [], "owner": {"reputation": 18194, "user_id": 1513933, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/0ozBK.jpg?s=128&g=1", "display_name": "Laurent LAPORTE", "link": "https://stackoverflow.com/users/1513933/laurent-laporte"}, "is_accepted": false, "score": 0, "last_activity_date": 1533154410, "creation_date": 1533154410, "answer_id": 51641599, "question_id": 51641395, "link": "https://stackoverflow.com/questions/51641395/check-which-range-a-number-is-within/51641599#51641599", "title": "Check which range a number is within", "body": "<p>To find the right range, you can iterate over each range using <code>zip</code> function, like this:</p>\n\n<pre><code>ranges = [-64, -32, -16, -8, -4, -2, -1, -0.5, 0, 0.5, 1, 2, 4, 8, 16, 32, 64]\n\ni = 9\n\nfor p, n in zip(ranges[:-1], ranges[1:]):\n    if p &lt;= i &lt; n:\n        r = p, n\n        break\nelse:\n    raise ValueError(i)\n\nprint(r)\n</code></pre>\n\n<p>You get: (8, 16)</p>\n\n<p>Then you can use a mapping between each range and target values, something like this:</p>\n\n<pre><code>mapping = {\n  (-64, -32): 1,\n  (-32, -16): 2,\n  (-16, -8): 3\n}\n\nprint(mapping[(-32, -16)])\n2\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 0, "creation_date": 1533159212, "post_id": 51641617, "comment_id": 90249569, "body": "Exactly. This is not only <i>nicer</i> than the original solution - it is also faster ;)"}], "tags": [], "owner": {"reputation": 21232, "user_id": 550094, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7CAou.jpg?s=128&g=1", "display_name": "Thierry Lathuille", "link": "https://stackoverflow.com/users/550094/thierry-lathuille"}, "is_accepted": true, "score": 3, "last_activity_date": 1533154829, "last_edit_date": 1533154829, "creation_date": 1533154500, "answer_id": 51641617, "question_id": 51641395, "link": "https://stackoverflow.com/questions/51641395/check-which-range-a-number-is-within/51641617#51641617", "title": "Check which range a number is within", "body": "<p>Use <a href=\"https://docs.python.org/3.7/library/bisect.html\" rel=\"nofollow noreferrer\">bisect</a>:</p>\n\n<pre><code>import bisect\n\nranges = [-64, -32, -16, -8, -4, -2, -1, -0.5, 0, 0.5, 1, 2, 4, 8, 16, 32, 64]\n\nprint(bisect.bisect(ranges, -65))\n# 0\n\nprint(bisect.bisect(ranges, -64))\n# 1\n\nprint(bisect.bisect(ranges, 63))\n#16\n\nprint(bisect.bisect(ranges, 64))\n# 17\n</code></pre>\n\n<p><code>bisect.bisect(l, value)</code> returns the index at which <code>value</code> would have to be inserted in <code>l</code>, such that all values to the left are less than <code>value</code>. It will also be fast to search a large list, as it uses a bisection algorithm.</p>\n"}, {"tags": [], "owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "is_accepted": false, "score": 1, "last_activity_date": 1533158899, "creation_date": 1533158899, "answer_id": 51642500, "question_id": 51641395, "link": "https://stackoverflow.com/questions/51641395/check-which-range-a-number-is-within/51642500#51642500", "title": "Check which range a number is within", "body": "<p>People already provided much shorter (and efficient) solutions. I am just posting here my attempt just to show one more way and logic to approach the problem using list comprehension. </p>\n\n<pre><code>def find_which_range(value, ranges):\n    if value &lt;= min(ranges):\n        c = 0\n    elif value &gt;= max(ranges): \n        c = len(ranges)\n    else:\n        c = [i+1 for i in range(len(ranges)-1) if ranges[i] &lt;= value &lt;= ranges[i+1]][0]\n    return c\n\nvalue = -9\ni = find_which_range(value, ranges) \n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 6460815, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rmpykt7vYXM/AAAAAAAAAAI/AAAAAAAAABE/D8JcEJTyDP0/photo.jpg?sz=128", "display_name": "Neil Macneale", "link": "https://stackoverflow.com/users/6460815/neil-macneale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 51641617, "answer_count": 5, "score": 2, "last_activity_date": 1533158899, "creation_date": 1533153536, "question_id": 51641395, "link": "https://stackoverflow.com/questions/51641395/check-which-range-a-number-is-within", "title": "Check which range a number is within", "body": "<p>I need to find which range a number, in this case <code>value</code>, is within. I cannot find any other way to set <code>i</code> to what I need other than this:</p>\n\n<pre><code>if value &lt; -64:\n  i = 0\nelif value &lt; -32:\n  i = 1\nelif value &lt; -16:\n  i = 2\nelif value &lt; -8:\n  i = 3\nelif value &lt; -4:\n  i = 4\nelif value &lt; -2:\n  i = 5\nelif value &lt; -1:\n  i = 6\nelif value &lt; -0.5:\n  i = 7\nelif value &lt; 0:\n  i = 8\nelif value &lt; 0.5:\n  i = 9\nelif value &lt; 1:\n  i = 10\nelif value &lt; 2:\n  i = 11\nelif value &lt; 4:\n  i = 12\nelif value &lt; 8:\n  i = 13\nelif value &lt; 16:\n  i = 14\nelif value &lt; 32:\n  i = 15\nelif value &lt; 64:\n  i = 16\nelse:\n  i = 17\n</code></pre>\n\n<p>This is terrible code and I hate it. Is there any way I can do something like this?</p>\n\n<pre><code>ranges = [-64, -32, -16 ... 32, 64]\ni = find_which_range(value, ranges)\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "jupyter-notebook", "jupyter", "sympy"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 10167702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4566ae64a575223849f7f5aa6e4767c9?s=128&d=identicon&r=PG&f=1", "display_name": "krowney", "link": "https://stackoverflow.com/users/10167702/krowney"}, "edited": false, "score": 0, "creation_date": 1533177958, "post_id": 51644064, "comment_id": 90253583, "body": "Feels like this simple subroutine might be useful to someone else:                         def displayEquality(expr1, expr2):     display(Math(latex(expr1) +  &quot;\\ =\\ &quot; + latex(expr2)))"}], "tags": [], "owner": {"reputation": 21, "user_id": 10167702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4566ae64a575223849f7f5aa6e4767c9?s=128&d=identicon&r=PG&f=1", "display_name": "krowney", "link": "https://stackoverflow.com/users/10167702/krowney"}, "is_accepted": false, "score": 1, "last_activity_date": 1533170590, "creation_date": 1533170590, "answer_id": 51644064, "question_id": 51641380, "link": "https://stackoverflow.com/questions/51641380/text-comments-in-sympy-output/51644064#51644064", "title": "Text comments in sympy output", "body": "<p>So after some more research, came up with a form of an answer.   Using a combination of \"display\" and \"Math\" with latex conversions and strings of raw Latex; you can get to a solution with something like this:</p>\n\n<pre><code>display(Math(\"{Let}\\ omega\\ be\\ this \\ thing\" + latex(Neworder3poly)))\n</code></pre>\n\n<p>I could apologize for having not done enough research before posting a question that could have been answered by JFGI, but instead; i'll offer a slightly sarcastic  THANK YOU from the poster of this question to the poster of this answer (me).</p>\n\n<p>;)</p>\n"}, {"tags": [], "owner": {"reputation": 30484, "user_id": 2875563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/umbJB.jpg?s=128&g=1", "display_name": "Reblochon Masque", "link": "https://stackoverflow.com/users/2875563/reblochon-masque"}, "is_accepted": false, "score": 0, "last_activity_date": 1533180891, "creation_date": 1533180891, "answer_id": 51645101, "question_id": 51641380, "link": "https://stackoverflow.com/questions/51641380/text-comments-in-sympy-output/51645101#51645101", "title": "Text comments in sympy output", "body": "<p>This shows a good latex representation:</p>\n\n<pre><code>import sympy\nfrom sympy import init_printing, Integral, Symbol\n\nx = Symbol('x')\nexpr1 = 2*x**2 + 3*x + 2\n\ninit_printing(use_latex='mathjax')\nprint(\"Here is an integral \")\nIntegral(expr1, x), sympy.integrate(expr1)\n</code></pre>\n\n<h3>output:</h3>\n\n<p><a href=\"https://i.stack.imgur.com/Rgzux.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Rgzux.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 10167702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4566ae64a575223849f7f5aa6e4767c9?s=128&d=identicon&r=PG&f=1", "display_name": "krowney", "link": "https://stackoverflow.com/users/10167702/krowney"}, "edited": false, "score": 0, "creation_date": 1533320072, "post_id": 51656837, "comment_id": 90319345, "body": "Thanks!   Am still learning about Markdown and this was clearly a huge gap in my understanding of Jupyter.     Very much appreciate your comment."}, {"owner": {"reputation": 845, "user_id": 5066426, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6FyRF.jpg?s=128&g=1", "display_name": "Nick Linker", "link": "https://stackoverflow.com/users/5066426/nick-linker"}, "edited": false, "score": 0, "creation_date": 1546716365, "post_id": 51656837, "comment_id": 94944888, "body": "I think this answer deserves to be the OP&#39;s answer."}], "tags": [], "owner": {"reputation": 352, "user_id": 9235907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fea4f9361339b4bb0c2ee0943dfb332?s=128&d=identicon&r=PG&f=1", "display_name": "butterwagon", "link": "https://stackoverflow.com/users/9235907/butterwagon"}, "is_accepted": false, "score": 3, "last_activity_date": 1533226574, "last_edit_date": 1533226574, "creation_date": 1533222269, "answer_id": 51656837, "question_id": 51641380, "link": "https://stackoverflow.com/questions/51641380/text-comments-in-sympy-output/51656837#51656837", "title": "Text comments in sympy output", "body": "<p>If you like the default markdown rendering, you can use the <code>Markdown</code> function to render your commentary and equation just as it would appear in a markdown cell:</p>\n\n<pre><code>import sympy\nfrom IPython.display import display, Markdown\nalpha, beta, theta = sympy.symbols('alpha beta theta')\nmy_eq = sympy.cos(alpha - beta + theta)\ndisplay(\n    Markdown(\n        'Here is my equation: {}'.format(\n            sympy.latex(my_eq, mode='inline')\n        )\n    )\n)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/3lD1W.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3lD1W.png\" alt=\"Example\"></a></p>\n"}], "owner": {"reputation": 21, "user_id": 10167702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4566ae64a575223849f7f5aa6e4767c9?s=128&d=identicon&r=PG&f=1", "display_name": "krowney", "link": "https://stackoverflow.com/users/10167702/krowney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 573, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1533226574, "creation_date": 1533153457, "last_edit_date": 1533180927, "question_id": 51641380, "link": "https://stackoverflow.com/questions/51641380/text-comments-in-sympy-output", "title": "Text comments in sympy output", "body": "<p>I've searched for a few days looking for a clue on how to easily format text commentary into the output of sympy when running inside (say) a Jupyter notebook.</p>\n\n<p>Simple example of what i've tried so far:</p>\n\n<pre><code>init_printing(use_latex='mathjax')\nprint(\"Here is an integral \")\nIntegral(expr1,x)\n</code></pre>\n\n<p>...which outputs a crappy looking text comment above the line with a pretty good looking integral expression.    Instead, I'm looking for a text comment that'd be included on the same line as the integral and present itself with better formatting instead of just \"code block\" font.  Ideally, there'd be some sort of \"printf\" style function; but I just not have been able to find it.</p>\n"}, {"tags": ["python", "pandas", "list", "dictionary", "list-comprehension"], "answers": [{"tags": [], "owner": {"reputation": 12229, "user_id": 12366110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8d357302df47fd4307d331001e90ef5?s=128&d=identicon&r=PG&f=1", "display_name": "CDJB", "link": "https://stackoverflow.com/users/12366110/cdjb"}, "is_accepted": false, "score": 0, "last_activity_date": 1579705219, "creation_date": 1579705219, "answer_id": 59862532, "question_id": 51641379, "link": "https://stackoverflow.com/questions/51641379/concatenate-list-of-strings-in-each-dictionary-value/59862532#59862532", "title": "Concatenate list of strings in each dictionary value", "body": "<p>This is achieved by altering your list comprehension to a dictionary comprehension:</p>\n\n<pre><code>&gt;&gt;&gt; uni3pa = {'3PA SMARTPAY': ['[Item].[Item].[10006543 - Smartpay User Licence]',\n'[Item].[Item].[10006544 - SmartPay User Licence per Site]'],\n'3PA OTHER': ['[Item].[Item].[10001234 - 3rd Party App User Licence]', \n'[Item].[Item].[10001235 - 3rd Party App User Licence (min 3 per site]',\n'[Item].[Item].[10001236 - 3rd Party Apps Single User]']}\n\n&gt;&gt;&gt; {k: ' + '.join(v) for k, v in uni3pa.items()}\n    {'3PA SMARTPAY': '[Item].[Item].[10006543 - Smartpay User Licence] + [Item].[Item].[10006544 - SmartPay User Licence per Site]',\n     '3PA OTHER': '[Item].[Item].[10001234 - 3rd Party App User Licence] + [Item].[Item].[10001235 - 3rd Party App User Licence (min 3 per site] + [Item].[Item].[10001236 - 3rd Party Apps Single User]'}\n</code></pre>\n"}], "owner": {"reputation": 106, "user_id": 5915430, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e53c57206668a4ec8af65b3e16ee21b9?s=128&d=identicon&r=PG&f=1", "display_name": "Maitiu", "link": "https://stackoverflow.com/users/5915430/maitiu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1284, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1581282905, "creation_date": 1533153454, "last_edit_date": 1581282905, "question_id": 51641379, "link": "https://stackoverflow.com/questions/51641379/concatenate-list-of-strings-in-each-dictionary-value", "title": "Concatenate list of strings in each dictionary value", "body": "<p>From a Pandas dataframe <code>df3pa</code> containing product line items (embedded in MDX query format) and product category codes, I have a dictionary <code>uni3pa</code> with product category code <code>Code</code> as the dictionary <code>keys</code>, and a list of strings <code>Item</code> (in MDX format) as the <code>values</code></p>\n\n<pre><code>uni3pa = df3pa.groupby('Code')['Item'].apply(list).to_dict()\n</code></pre>\n\n<p>A snippit of <code>uni3pa</code>:</p>\n\n<pre><code>uni3pa = \n{'3PA SMARTPAY': ['[Item].[Item].[10006543 - Smartpay User Licence]',\n'[Item].[Item].[10006544 - SmartPay User Licence per Site]'],\n'3PA OTHER': ['[Item].[Item].[10001234 - 3rd Party App User Licence]', \n'[Item].[Item].[10001235 - 3rd Party App User Licence (min 3 per site]',\n'[Item].[Item].[10001236 - 3rd Party Apps Single User]']}\n</code></pre>\n\n<p>The final result I am after, is to join all the values in each <code>key</code>, using a <code>'+'</code> to produce an MDX query that can be used, for example:</p>\n\n<pre><code>uni3pa['3PA OTHER'] = '[Item].[Item].[10001234 - 3rd Party App User \nLicence] + [Item].[Item].[10001235 - 3rd Party App User Licence (min 3 per site] + \n[Item].[Item].[10001236 - 3rd Party Apps Single User]'\n</code></pre>\n\n<p>Using <a href=\"https://stackoverflow.com/questions/16971502/joining-valuelist-from-key-value-in-dictionary\">this link</a> (I used many others, but this was the most helpful I could find for this issue) I've been able to create arrays for each product grouping as follows:</p>\n\n<pre><code>array = []\nfor el in [' + '.join(value) for key, value in uni3pa.items()]:\n    array.append(el)\n\nIn [46]: array[2]\nOut[46]: '[Item].[Item].[10001234 - 3rd Party App User Licence] + \n[Item].[Item].[10001235 - 3rd Party App User Licence (min 3 per site] + \n[Item].[Item].[10001236 - 3rd Party Apps Single User]'\n\n#for clarity, array[2] is '3PA OTHER'\n</code></pre>\n\n<p>I've gone for an array here as it was the easiest way I can see to get all the groups into the required format. However there are 100s of groups and it will be a lot easier if I am able to ID them by the name of the group (e.g. <code>3PA OTHER</code> as opposed to <code>array[2]</code>.</p>\n\n<p>There must be a simpler way to do this within the dictionary so that I could call <code>uni3pa['3PA OTHER']</code> and the value is the required format?</p>\n"}, {"tags": ["python", "pip", "bitbucket"], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 7942315, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/7WmO6.jpg?s=128&g=1", "display_name": "Heuyie", "link": "https://stackoverflow.com/users/7942315/heuyie"}, "edited": false, "score": 0, "creation_date": 1533158213, "post_id": 51641705, "comment_id": 90249216, "body": "Thank you for your response! Say I installed hg, what is the command?? bitbucket.org/dholth/cryptacular@cb96fb3 is this the location of the commit?"}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1533164054, "post_id": 51641705, "comment_id": 90250937, "body": "<code>pip install &#39;hg+ssh:&#47;&#47;hg@bitbucket.org&#47;dholth&#47;cryptacular.git@cb96fb3#eg&zwnj;&#8203;g=cryptacular&#39;</code>. See <a href=\"https://pip.readthedocs.io/en/stable/reference/pip_install/#mercurial\" rel=\"nofollow noreferrer\">pip.readthedocs.io/en/stable/reference/pip_install/#mercuria&zwnj;&#8203;l</a>"}, {"owner": {"reputation": 2798, "user_id": 5054717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/852e9b7acb207733b51ddd93523a8fef?s=128&d=identicon&r=PG", "display_name": "Jim Redmond", "link": "https://stackoverflow.com/users/5054717/jim-redmond"}, "edited": false, "score": 0, "creation_date": 1533167093, "post_id": 51641705, "comment_id": 90251584, "body": "There is no <code>.git</code> anywhere in a Mercurial repo URL. Do not include that."}], "tags": [], "owner": {"reputation": 2798, "user_id": 5054717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/852e9b7acb207733b51ddd93523a8fef?s=128&d=identicon&r=PG", "display_name": "Jim Redmond", "link": "https://stackoverflow.com/users/5054717/jim-redmond"}, "is_accepted": false, "score": 0, "last_activity_date": 1533154956, "creation_date": 1533154956, "answer_id": 51641705, "question_id": 51641367, "link": "https://stackoverflow.com/questions/51641367/how-to-install-python-module-with-pip-from-one-of-multiple-heads-in-a-bitbucket/51641705#51641705", "title": "How to Install Python Module with Pip from one of Multiple Heads in a Bitbucket Repository?", "body": "<p>You'll need to install hg, according to the instructions for your specific operating system: <a href=\"https://www.mercurial-scm.org/\" rel=\"nofollow noreferrer\">https://www.mercurial-scm.org/</a></p>\n\n<p>The SSH URL there also should not include <code>.git</code> because that repository isn't in Git.</p>\n"}, {"tags": [], "owner": {"reputation": 77, "user_id": 7942315, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/7WmO6.jpg?s=128&g=1", "display_name": "Heuyie", "link": "https://stackoverflow.com/users/7942315/heuyie"}, "is_accepted": true, "score": 1, "last_activity_date": 1533226104, "creation_date": 1533226104, "answer_id": 51658017, "question_id": 51641367, "link": "https://stackoverflow.com/questions/51641367/how-to-install-python-module-with-pip-from-one-of-multiple-heads-in-a-bitbucket/51658017#51658017", "title": "How to Install Python Module with Pip from one of Multiple Heads in a Bitbucket Repository?", "body": "<p>Mercurial does not currently support Python 3.6, so I could not install it. I found a workaround by downloading tar.gz and install it with Pip.</p>\n\n<p>Files of a project's particular commit on Bitbucket is located on:</p>\n\n<pre><code>https://bitbucket.org/&lt;username&gt;/&lt;project name&gt;/get/&lt;commit name&gt;.tar.gz\n</code></pre>\n\n<p>So, if you want to get it via terminal you do:</p>\n\n<pre><code>wget \"https://bitbucket.org/&lt;username&gt;/&lt;project name&gt;/get/&lt;commit name&gt;.tar.gz\"\n</code></pre>\n\n<p>Then, you unpack the tar.gz and install the package by Pip by:</p>\n\n<pre><code>pip install pathtothefile/&lt;commit name&gt;.tar.gz \n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 7942315, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/7WmO6.jpg?s=128&g=1", "display_name": "Heuyie", "link": "https://stackoverflow.com/users/7942315/heuyie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "accepted_answer_id": 51658017, "answer_count": 2, "score": 0, "last_activity_date": 1533226104, "creation_date": 1533153389, "question_id": 51641367, "link": "https://stackoverflow.com/questions/51641367/how-to-install-python-module-with-pip-from-one-of-multiple-heads-in-a-bitbucket", "title": "How to Install Python Module with Pip from one of Multiple Heads in a Bitbucket Repository?", "body": "<p>I am trying to update mod_wsgi, and there is a issue between cryptacular and crypt.h, which is raising an error during installing mod_wsgi. Thankfully, the owner of cryptacular made a workaround. The version with the workaround is not the version on its dowload page or I can install with:</p>\n\n<pre><code>pip install cryptacular\n</code></pre>\n\n<p>So, I want to specify where pip is going to get cryptacular. The address for SSh is </p>\n\n<pre><code>ssh://hg@bitbucket.org/dholth/cryptacular\n</code></pre>\n\n<p>And, the commit name is cb96fb3. I tried </p>\n\n<pre><code>pip install hg+ssh://hg@bitbucket.org/dholth/cryptacular.git@cb96fb3\n</code></pre>\n\n<p>and I get an error message:</p>\n\n<pre><code>Error [Errno 2] No such file or directory: 'hg': 'hg' while executing command hg clone --noupdate -q ssh://hg@bitbucket.org/dholth/cryptacular.git /tmp/pip-req-build-xf6ubrkd\nCannot find command 'hg' - do you have 'hg' installed and in your PATH?\n</code></pre>\n\n<p>Admittedly, I do not have a hg installation. What to do? Which pages should I read??</p>\n"}, {"tags": ["python", "string", "python-3.x", "nested-lists"], "answers": [{"comments": [{"owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "edited": false, "score": 0, "creation_date": 1533154394, "post_id": 51641437, "comment_id": 90247548, "body": "Thanks! This is a nice concise way to do things. I accepted the answer above because it cuts down on the whole code, but this is nice to know for a list of strings!"}], "tags": [], "owner": {"reputation": 380, "user_id": 2985413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5ee1c940160d99e5798a9e50cb4531a?s=128&d=identicon&r=PG&f=1", "display_name": "Gigaflop", "link": "https://stackoverflow.com/users/2985413/gigaflop"}, "is_accepted": false, "score": 1, "last_activity_date": 1533153669, "creation_date": 1533153669, "answer_id": 51641437, "question_id": 51641361, "link": "https://stackoverflow.com/questions/51641361/joining-strings-iteratively-between-two-indexes-python/51641437#51641437", "title": "joining strings iteratively between two indexes python", "body": "<p>Here's a small IDLE example:</p>\n\n<pre><code>&gt;&gt;&gt; stuff = ['a', 'b', 'c', '=', 'd', 'e', '=', 'f', 'g']\n&gt;&gt;&gt; \"\".join(stuff).split('=')\n['abc', 'de', 'fg']\n</code></pre>\n\n<p>It joins all of the characters together (So you can skip separating them out into separate lists), and then splits that string on the <code>=</code> character.</p>\n"}, {"comments": [{"owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "edited": false, "score": 0, "creation_date": 1533154306, "post_id": 51641459, "comment_id": 90247517, "body": "This works great, except in line2:      <code>full_string = &#39; &#39;.join([line.strip() for line in dump])</code> dump should be replaced with f :)."}, {"owner": {"reputation": 10237, "user_id": 2464597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12eaebfe8c9ae6c3a29aefe69ebcb4bd?s=128&d=identicon&r=PG", "display_name": "Engineero", "link": "https://stackoverflow.com/users/2464597/engineero"}, "reply_to_user": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "edited": false, "score": 0, "creation_date": 1533154518, "post_id": 51641459, "comment_id": 90247607, "body": "Right you are! Fixed it. Just a leftover from my dummy script to emulate your problem."}], "tags": [], "owner": {"reputation": 10237, "user_id": 2464597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12eaebfe8c9ae6c3a29aefe69ebcb4bd?s=128&d=identicon&r=PG", "display_name": "Engineero", "link": "https://stackoverflow.com/users/2464597/engineero"}, "is_accepted": true, "score": 1, "last_activity_date": 1533154054, "last_edit_date": 1533154054, "creation_date": 1533153752, "answer_id": 51641459, "question_id": 51641361, "link": "https://stackoverflow.com/questions/51641361/joining-strings-iteratively-between-two-indexes-python/51641459#51641459", "title": "joining strings iteratively between two indexes python", "body": "<p>I think this gets you what you are looking for, although there is one part that is unclear. If you want to join the strings between equals signs as each element in your final list:</p>\n\n<pre><code>with open(dump) as f:\n    full_string = ' '.join([line.strip() for line in f])\n    my_list = [string.strip() for string in full_string.split('=') if string is not '']\nprint(my_list)\n\n['one two three four', 'five six seven eight', 'nine ten one two']\n</code></pre>\n\n<p>If, instead, you want sub-lists comprising each string between the equals signs, just replace <code>my_list</code> above with:</p>\n\n<pre><code>my_list = [[s for s in string.split()] for string in full_string.split('=') if string is not '']\n\n[['one', 'two', 'three', 'four'], ['five', 'six', 'seven', 'eight'], ['nine', 'ten', 'one', 'two']]\n</code></pre>\n\n<p>Bonus, they use list comprehensions which are a much more pythonic way of looping:</p>\n"}, {"tags": [], "owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "is_accepted": false, "score": 1, "last_activity_date": 1533153830, "creation_date": 1533153830, "answer_id": 51641477, "question_id": 51641361, "link": "https://stackoverflow.com/questions/51641361/joining-strings-iteratively-between-two-indexes-python/51641477#51641477", "title": "joining strings iteratively between two indexes python", "body": "<p>Read in lines until you hit a =, merge them as one listentry and add it, continue until done, put last line-list content in: </p>\n\n<pre><code>t = \"\"\"one\ntwo\nthree\nfour\n=\nfive\nsix\nseven\neight\n=\nnine\nten\none\ntwo\n=\"\"\"\n\ndata = [] # global list\nline = [] # temp list\nfor n in [x.strip() for x in t.splitlines()]:\n    if n == \"=\": \n        if line:\n            data.append(' '.join(line))\n        line = []\n    else:\n        line.append(n)\n\nif line:\n    data.append(' '.join(line))\n\nprint(data)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code> ['one two three four', 'five six seven eight', 'nine ten one two']\n</code></pre>\n"}], "owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "accepted_answer_id": 51641459, "answer_count": 3, "score": 1, "last_activity_date": 1533154054, "creation_date": 1533153378, "question_id": 51641361, "link": "https://stackoverflow.com/questions/51641361/joining-strings-iteratively-between-two-indexes-python", "title": "joining strings iteratively between two indexes python", "body": "<p>I have a test file with the following format:</p>\n\n<pre><code>one\ntwo\nthree\nfour\n=\nfive\nsix\nseven\neight\n=\nnine\nten\none\ntwo\n=\n</code></pre>\n\n<p>and I am writing a python code to create a list, with each element in the text to be an item in a list:</p>\n\n<pre><code>dump = sys.argv[1]\nlines = []\nwith open(dump) as f:\n    for line in f:\n        x = line.strip()\n        lines.append(x)\nprint(lines)\n</code></pre>\n\n<p>lines list =</p>\n\n<pre><code>['one', 'two', 'three', 'four', '=', 'five', 'six', 'seven', 'eight', '=', 'nine', 'ten', 'one', 'two', '=']\n</code></pre>\n\n<p>I then get the indexes of the equals signs in order to try to use those at a later point to make a new list, combining the strings:</p>\n\n<pre><code>equals_indexes = [i for i, x in enumerate(lines) if x == '=']\n</code></pre>\n\n<p>equals_indexes list:</p>\n\n<pre><code>[4, 9, 14]\n</code></pre>\n\n<p>I am good up until this point. Now I would like to join the strings one, two, three, four before the first index as new_list element 1. I would like to join the next group of strings between equals sign 1 and 2, and the next group of strings between equals sign 2 and 3 to produce the following:</p>\n\n<pre><code>[[one two three four], [five six seven eight], [nine ten one two]]\n</code></pre>\n\n<p>I have tried to do this by iterating over the list of equals indexes, then iterating over the list lines:</p>\n\n<pre><code>for i in equals_indexes:\n    sequences = \"\"\n    for x,y in enumerate(lines):\n        if x &lt; i:\n            sequences = ' '.join(lines[x:i])\n            groups.append(sequences)\nprint(groups)\n</code></pre>\n\n<p>Which produces the following:</p>\n\n<pre><code>['one two three four', 'two three four', 'three four', 'four', 'one two three four = five six seven eight', 'two three four = five six seven eight', ....]\n</code></pre>\n\n<p>I understand why this is happening, because at each iteration of x, it is checking to see if it is less than i and if so appending each string at x to the string \"sequences\". I am doing this because I have a large file with huge blocks of text corresponding to one iteration of a program. The separator between iteration 1 and iteration 2 of the program is a single '=' in the line. This way I can parse the list elements after I am able to split them by equals sign.\nAny help would be great!</p>\n"}, {"tags": ["python", "user-interface", "wxpython"], "answers": [{"comments": [{"owner": {"reputation": 849, "user_id": 1747747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbe644d980b454f43bf930dff18c7b0a?s=128&d=identicon&r=PG", "display_name": "bsf10", "link": "https://stackoverflow.com/users/1747747/bsf10"}, "edited": false, "score": 0, "creation_date": 1533215395, "post_id": 51648767, "comment_id": 90272331, "body": "Thanks! Never would have tracked it down the the Panel!"}], "tags": [], "owner": {"reputation": 16948, "user_id": 4637585, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/2ff170e0cfa0be15efaabd3acef4df34?s=128&d=identicon&r=PG&f=1", "display_name": "Rolf of Saxony", "link": "https://stackoverflow.com/users/4637585/rolf-of-saxony"}, "is_accepted": true, "score": 1, "last_activity_date": 1533197803, "creation_date": 1533197803, "answer_id": 51648767, "question_id": 51641315, "link": "https://stackoverflow.com/questions/51641315/bind-enter-key-to-wxpython-button-with-focus/51648767#51648767", "title": "Bind &quot;Enter&quot; key to WXPython Button with Focus", "body": "<p>Your code is close and to be honest, on my machine (ubuntu 18.04) enter does work but the arrows keys don't.<br>\nThe key to this appears to be setting <code>Default()</code> for the focus within the window.<br>\nIf you put it all in a <code>Panel</code> you get the added benefit of Tab traversval, so tabbing moves between your buttons as well, without any effort on your part.<br>\nHere is a version of your code working on my box using python2.7 wx (3.0.2.0) and python 3.6 wx (4.0.3)</p>\n\n<pre><code>import wx\n\nclass Example(wx.Frame):\n    def __init__(self, parent, title):\n        frame = wx.Frame.__init__(self, parent, title=title, )\n        self.panel = wx.Panel(self, -1, size=(200,100))\n        self.btn1 = wx.Button(self.panel, label='Button 1', id=1)\n        self.btn2 = wx.Button(self.panel, label='Button 2', id=2)\n        self.btn1.SetDefault()\n        self.btn1.SetFocus()\n\n        self.sizer = wx.GridBagSizer(0, 0)\n        self.sizer.Add(self.btn1, pos=(0, 0), flag=wx.ALIGN_CENTER)\n        self.sizer.Add(self.btn2, pos=(1, 0), flag=wx.ALIGN_CENTER)\n\n        self.Bind(wx.EVT_BUTTON, self.button_press)\n        self.Bind(wx.EVT_CHAR_HOOK, self.on_key)\n\n        self.panel.SetSizer(self.sizer)\n        self.Fit()\n\n    def button_press(self, event):\n        Id = event.GetId()\n        print ('Click Button',str(Id))\n\n    def on_key(self, event):\n        key = event.GetKeyCode()\n        if key == wx.WXK_DOWN or key == wx.WXK_UP:\n            i = self.get_focus()\n            if i == 1:\n                self.btn1.SetDefault()\n                self.btn1.SetFocus()\n            else:\n                self.btn2.SetDefault()\n                self.btn2.SetFocus()\n            print ('Focus on',str(i))\n        elif key == wx.WXK_RETURN:\n            print ('ENTER on Button',str(event.GetId()))\n        else:\n            event.Skip()\n\n    def get_focus(self):\n        focused = wx.Window.FindFocus()\n        if focused == self.btn1:\n            return 2\n        elif focused == self.btn2:\n            return 1\n\n\nclass AppMenu(wx.App):\n    def OnInit(self):\n        'Create the main window and insert the custom frame'\n        frame = Example(None, 'Example')\n        frame.Show(True)\n\n        return True\n\napp = AppMenu()\napp.MainLoop()\n</code></pre>\n"}], "owner": {"reputation": 849, "user_id": 1747747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbe644d980b454f43bf930dff18c7b0a?s=128&d=identicon&r=PG", "display_name": "bsf10", "link": "https://stackoverflow.com/users/1747747/bsf10"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1382, "favorite_count": 0, "accepted_answer_id": 51648767, "answer_count": 1, "score": 1, "last_activity_date": 1533197803, "creation_date": 1533153185, "last_edit_date": 1533154130, "question_id": 51641315, "link": "https://stackoverflow.com/questions/51641315/bind-enter-key-to-wxpython-button-with-focus", "title": "Bind &quot;Enter&quot; key to WXPython Button with Focus", "body": "<p>I'm trying to make a series of buttons navigable with the arrow keys and enter key. </p>\n\n<p>I have the arrow keys implemented easily enough, but I can't seem to find the answer online how to bind the focused button to the enter key. Specifically I want to be able to use the up/down keys to set the focus to a button, and then hit the enter key to activate the button.</p>\n\n<p><a href=\"https://i.stack.imgur.com/AI1WD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AI1WD.png\" alt=\"Highlighted button 1\"></a></p>\n\n<p>I can highlight the button i want with the arrows, but the enter key does nothing. Any ideas?</p>\n\n<pre><code>import wx\n\nclass Example(wx.Frame):\n    def __init__(self, parent, title):\n        frame = wx.Frame.__init__(self, parent, title=title, )\n\n        self.btn = []\n        self.btn.append(wx.Button(self, label='Button 1', id=0))\n        self.btn.append(wx.Button(self, label='Button 2', id=1))\n\n        self.Bind(wx.EVT_BUTTON, self.button1_press, id=0)\n        self.Bind(wx.EVT_TEXT_ENTER, self.button1_press)\n\n        self.Bind(wx.EVT_BUTTON, self.button2_press, id=1)\n        self.Bind(wx.EVT_TEXT_ENTER, self.button2_press)\n\n        self.Bind(wx.EVT_CHAR_HOOK, self.on_key)\n\n        self.sizer = wx.GridBagSizer(0, 0)\n\n        self.sizer.Add(self.btn[0], pos=(0, 0), flag=wx.ALIGN_CENTER)\n        self.sizer.Add(self.btn[1], pos=(1, 0), flag=wx.ALIGN_CENTER)\n\n        self.SetSizer(self.sizer)\n        self.Fit()\n\n    def button1_press(self, event):\n        print 'button 1'\n\n    def button2_press(self, event):\n        print 'button 2'\n\n    def on_key(self, event):\n        i = self.get_focus()\n        if event.GetKeyCode() == wx.WXK_DOWN:\n            i = min(i+1, 1)\n            self.btn[i].SetFocus()\n        elif event.GetKeyCode() == wx.WXK_UP:\n            i = max(i-1, 0) \n            self.btn[i].SetFocus()\n        elif event.GetKeyCode() == wx.WXK_RETURN:  # &lt;-doesn't work\n            print 'ENTER!'\n        else:\n            event.Skip()\n\n    def get_focus(self):\n        focused = wx.Window.FindFocus()\n        if focused == self.btn[0]:\n            return 0\n        elif focused == self.btn[1]:\n            return 1\n\n\nclass AppMenu(wx.App):\n    def OnInit(self):\n        'Create the main window and insert the custom frame'\n        frame = Example(None, 'Example')\n        frame.Show(True)\n\n        return True\n\napp = AppMenu(0)\napp.MainLoop()\n</code></pre>\n"}]