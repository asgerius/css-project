[{"tags": ["python", "tensorflow"], "answers": [{"tags": [], "owner": {"reputation": 4963, "user_id": 11530462, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6AMOp.png?s=128&g=1", "display_name": "Tensorflow Support", "link": "https://stackoverflow.com/users/11530462/tensorflow-support"}, "is_accepted": true, "score": 2, "last_activity_date": 1566419140, "creation_date": 1566419140, "answer_id": 57598770, "question_id": 56879198, "link": "https://stackoverflow.com/questions/56879198/tensorflow-transform-how-to-find-the-mean-of-a-variable-over-the-entire-dataset/57598770#57598770", "title": "Tensorflow Transform: How to find the mean of a variable over the entire dataset", "body": "<p>The most important concept of tf.transform is preprocessing function. The preprocessing function is the logical description of the transformation of the dataset. A preprocessing function accepts and returns a dictionary of Tensors. There are 2 kinds of functions(steps) used to define a preprocessing function : </p>\n\n<ol>\n<li>Analyze Step </li>\n<li>Transform Step</li>\n</ol>\n\n<p>Analyze step: It iterates through the whole dataset and creates a graph. So, for example in order to calculate mean, we pass the full dataset to calculate the average of particular column of that dataset (This step requires the full pass of the dataset)</p>\n\n<p>Transform step: It basically uses the graph that has been created in the analyze step and transforms the complete dataset.</p>\n\n<p>So, basically the constants calculated in the analyze step is used in the Transform step.</p>\n\n<p>For better understanding, you can actually go through this <a href=\"https://www.youtube.com/watch?v=L-k6-3ApXR4&amp;t=185s\" rel=\"nofollow noreferrer\">video</a> followed by this <a href=\"https://docs.google.com/presentation/d/1Kr1skutObtDil2CExSQUb5rCVwZQm1m2lpmuAXFCE5I/edit#slide=id.g3f64cc4601_2_46\" rel=\"nofollow noreferrer\">presentation</a> which sholud solidify your understanding of how Tensorflow Transform works internally.</p>\n\n<p>If you feel that the answer is helpful, please upvote it. Thanks!</p>\n"}], "owner": {"reputation": 7076, "user_id": 1610428, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e6gnk.jpg?s=128&g=1", "display_name": "krishnab", "link": "https://stackoverflow.com/users/1610428/krishnab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1004, "favorite_count": 5, "accepted_answer_id": 57598770, "answer_count": 1, "score": 7, "last_activity_date": 1566419140, "creation_date": 1562198359, "question_id": 56879198, "link": "https://stackoverflow.com/questions/56879198/tensorflow-transform-how-to-find-the-mean-of-a-variable-over-the-entire-dataset", "title": "Tensorflow Transform: How to find the mean of a variable over the entire dataset", "body": "<p>I often see in many Tensorflow <a href=\"https://www.tensorflow.org/beta/tutorials/load_data/csv\" rel=\"noreferrer\">tutorials</a> text like:</p>\n\n<blockquote>\n  <p>To do this calculation, you need the column means. You would obviously\n  need to compute these in real life, but for this example we'll just\n  provide them.</p>\n</blockquote>\n\n<p>For small or medium sized CSV datasets computing the mean is as easy as a <code>pandas</code> method on a dataframe or using `scikit-learn</p>\n\n<p>BUT, if we have large dataset, say a CSV file that is 50GB, then how do you calculate the mean or other similar statistics. <code>Tensorflow Transform</code> claims that it can calculate global summary statistics, but they don't really explain how this work or how to integrate this into a workflow.</p>\n\n<p>Here is the code example from their <a href=\"https://www.tensorflow.org/tfx/transform/get_started\" rel=\"noreferrer\">getting started guide</a>.</p>\n\n<pre><code>import tensorflow as tf\nimport tensorflow_transform as tft\n\ndef preprocessing_fn(inputs):\n  x = inputs['x']\n  y = inputs['y']\n  s = inputs['s']\n  x_centered = x - tft.mean(x)\n  y_normalized = tft.scale_to_0_1(y)\n  s_integerized = tft.compute_and_apply_vocabulary(s)\n  x_centered_times_y_normalized = x_centered * y_normalized\n  return {\n      'x_centered': x_centered,\n      'y_normalized': y_normalized,\n      'x_centered_times_y_normalized': x_centered_times_y_normalized,\n      's_integerized': s_integerized\n  }\n</code></pre>\n\n<p>The documentation says that this code will run <code>tft.mean(x)</code> over the entire dataset, but it is not clear how that will happen since <code>x</code> is limited to just the scope of the batch? Yet here is the claim in the documentation. </p>\n\n<blockquote>\n  <p>While not obvious in the example above, the user defined preprocessing\n  function is passed tensors representing batches and not individual\n  instances, as happens during training and serving with TensorFlow. On\n  the other hand, analyzers perform a computation over the entire\n  dataset that returns a single value and not a batch of values. x is a\n  Tensor with a shape of (batch_size,), while tft.mean(x) is a Tensor\n  with a shape of ().</p>\n</blockquote>\n\n<p>So the questions are </p>\n\n<ol>\n<li><p>Does <code>tft.mean()</code> run over the entire dataset first, and only after computing the global mean does it begin to load batches?</p></li>\n<li><p>Are there any more detailed or complete examples of using <code>tft.transforms</code> in a workflow? Like can these tranforms be included in a single batch <code>preprocessing</code> function on a <code>tf.data.Dataset.map()</code> call, or how?</p></li>\n</ol>\n\n<p>So if I was trying to write some code to calculate the average <code>age</code> of individuals in my tensorflow dataset. Here is the code I have so far. Is this the best way to do something like this, or is there a better way? </p>\n\n<p>I used the tensorflow-2.0 <code>make_csv_dataset()</code> which takes care of stacking the examples from the CSV file into a column structure. Note I took the code for the <code>make_csv_dataset()</code> from the new tutorial on the tensorflow website referenced in the link above. </p>\n\n<pre><code>  dataset = tf.data.experimental.make_csv_dataset(\n      file_path,\n      batch_size=32, \n      label_name=LABEL_COLUMN,\n      na_value=\"?\",\n      num_epochs=1,\n      ignore_errors=True)\n\n ds_iter = dataset.make_one_shot_iterator()\n\n list_of_batch_means = []\n\n for ex_features, ex_labels in ds_iter:\n    batch_length = len(ex_features)\n    batch_sum = tf.reduce_sum(ex_features['age'])\n    list_of_batch_means.append(batch_sum/len(ex_features)\n\n average_age = np.mean(list_of_batch_means)\n</code></pre>\n\n<p>As a caveat, I divided the <code>batch_sum/len(ex_features)</code> since the final batch will not necessarily be the same size as the other batches, hence I did that calculate manually instead of using <code>tf.reduce_mean()</code>.This might be a minor issue if you have a lot of batches, but just wanted to be as accurate as possible. </p>\n\n<p>Any suggestions would be appreciated. </p>\n"}, {"tags": ["python", "json", "django"], "comments": [{"owner": {"reputation": 2002, "user_id": 1896134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72817a5f0bd7c29704bbe5c04cd49532?s=128&d=identicon&r=PG", "display_name": "JayRizzo", "link": "https://stackoverflow.com/users/1896134/jayrizzo"}, "edited": false, "score": 0, "creation_date": 1562198612, "post_id": 56879193, "comment_id": 100306884, "body": "Hi, Welcome to StackOverflow aka. &quot;SO&quot; Please see the help section as this will guide you in getting more support from us in the community. <a href=\"https://stackoverflow.com/help/\">stackoverflow.com/help</a> Best wishes on your endeavors! Cheers!"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1562198713, "post_id": 56879193, "comment_id": 100306900, "body": "maybe you should open JSON file inside <code>if request.POST:</code> when you need it."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1562198805, "post_id": 56879193, "comment_id": 100306919, "body": "<code>requests.get()</code> needs url, not opened file - <code>json_file</code>. Maybe you have to read url from <code>json_file</code>"}, {"owner": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "edited": false, "score": 1, "creation_date": 1562198926, "post_id": 56879193, "comment_id": 100306931, "body": "I&#39;m sure <code>requests</code> isn&#39;t a suitable package in this case."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1562198938, "post_id": 56879193, "comment_id": 100306933, "body": "if you need to read from local file then you don&#39;t need <code>requests.get()</code> but <code>data = json.loads(json_file.read())</code>"}, {"owner": {"reputation": 3, "user_id": 11736851, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fMQQ_JLwpuk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfCaBmPe5F8fb4DwBn3XNzz8lsTvw/photo.jpg?sz=128", "display_name": "GAHHBU", "link": "https://stackoverflow.com/users/11736851/gahhbu"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1562199447, "post_id": 56879193, "comment_id": 100307025, "body": "@furas I did data = json.loads( json_file.read() ) and tried data = json.loads( json_file.read() ) but i get this error - &quot; JSONDecodeError at /indexes/ Expecting value: line 1 column 1 (char 0) &quot;"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11736851, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fMQQ_JLwpuk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfCaBmPe5F8fb4DwBn3XNzz8lsTvw/photo.jpg?sz=128", "display_name": "GAHHBU", "link": "https://stackoverflow.com/users/11736851/gahhbu"}, "edited": false, "score": 0, "creation_date": 1562199473, "post_id": 56879273, "comment_id": 100307028, "body": "I did data = json.loads( json_file.read() ) and tried data = json.loads( json_file.read() ) but i get this error - &quot; JSONDecodeError at /indexes/ Expecting value: line 1 column 1 (char 0) &quot;"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "reply_to_user": {"reputation": 3, "user_id": 11736851, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fMQQ_JLwpuk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfCaBmPe5F8fb4DwBn3XNzz8lsTvw/photo.jpg?sz=128", "display_name": "GAHHBU", "link": "https://stackoverflow.com/users/11736851/gahhbu"}, "edited": false, "score": 0, "creation_date": 1562199571, "post_id": 56879273, "comment_id": 100307038, "body": "this error means your file &#39;tableInfo.json&#39; is empty and there is nothing to read. Check if you have correct JSON data in this file."}, {"owner": {"reputation": 3, "user_id": 11736851, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fMQQ_JLwpuk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfCaBmPe5F8fb4DwBn3XNzz8lsTvw/photo.jpg?sz=128", "display_name": "GAHHBU", "link": "https://stackoverflow.com/users/11736851/gahhbu"}, "edited": false, "score": 0, "creation_date": 1562200119, "post_id": 56879273, "comment_id": 100307121, "body": "Yep, I figured it out silly me the path to the JSON file was wrong. Thank you for the help!"}], "tags": [], "owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "is_accepted": true, "score": 0, "last_activity_date": 1562199145, "creation_date": 1562199145, "answer_id": 56879273, "question_id": 56879193, "link": "https://stackoverflow.com/questions/56879193/i-get-a-missingschema-error-within-my-python-file-that-is-trying-to-read-a-local/56879273#56879273", "title": "I get a MissingSchema error within my python file that is trying to read a local JSON file", "body": "<p>To read from local file you need</p>\n\n<pre><code>data = json.loads( json_file.read() )\n</code></pre>\n\n<p>or using <code>load()</code> (without \"<strong>s</strong>\" at the end)</p>\n\n<pre><code>data = json.load( json_file )\n</code></pre>\n\n<p>You don't need <code>requests.get()</code> which makes problem. </p>\n"}], "owner": {"reputation": 3, "user_id": 11736851, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fMQQ_JLwpuk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfCaBmPe5F8fb4DwBn3XNzz8lsTvw/photo.jpg?sz=128", "display_name": "GAHHBU", "link": "https://stackoverflow.com/users/11736851/gahhbu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 56879273, "answer_count": 1, "score": 0, "last_activity_date": 1562199145, "creation_date": 1562198282, "question_id": 56879193, "link": "https://stackoverflow.com/questions/56879193/i-get-a-missingschema-error-within-my-python-file-that-is-trying-to-read-a-local", "title": "I get a MissingSchema error within my python file that is trying to read a local JSON file", "body": "<p><strong>This is the error I get when I try to load my indexes.html page:</strong>  </p>\n\n<blockquote>\n  <p>MissingSchema at /indexes/\n      Invalid URL \"&lt;_io.TextIOWrapper name='tableInfo.json' mode='r' encoding='cp1252'>\": No schema supplied. Perhaps you meant\n  http://&lt;_io.TextIOWrapper name='tableInfo.json' mode='r'\n  encoding='cp1252'>?</p>\n</blockquote>\n\n<p><strong>I am not sure why this is happening, I am trying to read from a local JSON file and display it in a table</strong></p>\n\n<p><strong>This is my views.py code:</strong></p>\n\n<pre><code>def indexes(request):\n            with open('tableInfo.json') as json_file:\n                if request.POST:\n                    form = Sea(request.POST)\n                    po = request.POST.get('poNo')\n                    dc = request.POST.get('dcNo')\n                    vendor = request.POST.get('vendor')\n                    order_date = request.POST.get('order_date')\n                    delivery_date = request.POST.get('delivery_date')\n                    payload = {}\n                    if len(po) &gt; 8:\n                        payload['poNo'] = po\n                    if \"DC\" in dc:\n                        payload['dcNo'] = dc\n                    if len(vendor) &gt; 8:\n                        payload['vendorNo'] = vendor\n                    if len(order_date) &gt; 6:\n                        payload['orderDate'] = order_date\n                    if len(delivery_date) &gt; 6:\n                        payload['deliveryDate'] = delivery_date\n                    data = json.loads((requests.get(json_file, payload)).content)\n                    if data['returnCode'] == 0:\n                        resultList = data['resultList']\n                    else:\n                        resultList = []\n\n                else:\n                    form = Sea()\n                    resultList = []\n                context = {\n                    'data': resultList,\n                    'form': form\n                }\n                return render(request, 'users/indexes.html', context)\n</code></pre>\n"}, {"tags": ["python", "erlang", "elixir", "phoenix-framework", "gen-server"], "answers": [{"tags": [], "owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "is_accepted": true, "score": 0, "last_activity_date": 1564569753, "last_edit_date": 1564569753, "creation_date": 1562206364, "answer_id": 56879817, "question_id": 56879138, "link": "https://stackoverflow.com/questions/56879138/erlport-python-stdout-capture-to-elixir/56879817#56879817", "title": "Erlport/Python STDOUT capture to Elixir", "body": "<p>For anyone else getting stuck with this kinda thing: since I've got a GenServer around the <code>:python</code> instance, I've just leveraged <code>handle_info</code>:</p>\n\n<pre><code>def handle_info({:python, message}, session) do\n  message |&gt; String.split(\"\\n\", trim: true)\n  SomeWeb.Endpoint.broadcast(\"log\", \"update\", %{body: message})\n\n  {:stop, :normal,  session}\nend\n</code></pre>\n\n<p><strong>Detail</strong></p>\n\n<p>To more fully outline my solution as @7stud advised, I'll include the wider approach based on <code>erlport</code> and <a href=\"https://hackernoon.com/mixing-python-with-elixir-ii-async-e8586f9b2d53\" rel=\"nofollow noreferrer\">this great post</a>. Accordingly, I've got a <code>Python</code> module that looks like this:</p>\n\n<pre><code>defmodule App.Python do\n   @doc \"\"\"\n      Python instance pointing to priv/python.\n    \"\"\"\n   def start() do\n      path = [\n         :code.priv_dir(:prefect),\n         \"python\"\n      ]|&gt; Path.join()\n\n      {:ok, pid} = :python.start([\n         {:python_path, to_charlist(path)}\n      ])\n      pid\n   end\n\n   def call(pid, module, function, args \\\\ []) do\n      :python.call(pid, module, function, args)\n   end\n\n   def cast(pid, message) do\n      :python.cast(pid, message)\n   end\n\n   def stop(pid) do\n      :python.stop(pid)\n   end\nend\n</code></pre>\n\n<p>It's called from a GenServer that handles its spawning and termination:</p>\n\n<pre><code>defmodule App.PythonServer do\n   @doc \"\"\"\n      Receives async. messages from Python instance.\n    \"\"\"\n   use GenServer\n\n   alias App.Python\n\n   def start_link() do\n      GenServer.start_link(__MODULE__, [])\n   end\n\n   def init(_args) do\n      pid = Python.start()\n      Python.call(pid, :bridge, :register_handler, [self()])\n      App.Application.broadcast_change\n\n      {:ok, pid}\n   end\n\n   def cast_draw(id) do\n      {:ok, pid} = start_link()\n\n      GenServer.cast(pid, {:id, id})\n   end\n\n   def call_draw(id) do\n      {:ok, pid} = start_link()\n\n      GenServer.call(pid, {:id, id}, 10_000)\n   end\n\n   def handle_call({:id, id}, _from, session) do\n      result = Python.call(session, :bridge, :draw, [id])\n\n      {:reply, result, session}\n   end\n\n   def handle_cast({:id, id}, session) do\n      Python.cast(session, id)\n\n      {:noreply, session}\n   end\n\n   def handle_info({:python, message}, session) do\n      msg = message |&gt; format_response\n      {:ok, time} = Timex.now |&gt; Timex.format(\"{h12}:{m}{am} {D}/{M}/{YYYY}\")\n      AppWeb.Endpoint.broadcast(\"log\", \"update\", %{time: time, body: msg, process: message})\n\n      {:stop, :normal,  session}\n   end\n\n   def terminate(_reason, session) do\n      Python.stop(session)\n      App.Application.broadcast_change\n\n      :ok\n   end\n\n   defp format_response(message) do\n      if String.contains? message, \"[result] Sent\" do\n         message |&gt; String.split(\"\\n\", trim: true) |&gt; Enum.at(-2)\n      else\n         message |&gt; String.split(\"\\n\", trim: true) |&gt; Enum.take(-12) |&gt; Enum.join(\"\\n\")\n      end\n   end\nend\n</code></pre>\n\n<p>You can see at the end if STDOUT doesn't return a certain string from <code>bridge.py</code> (or any other Python module) it'll return a stacktrace. Speaking of, <code>bridge.py</code> looks like this:</p>\n\n<pre><code>import os\nimport sys\nimport subprocess\n\nfrom erlport.erlang import set_message_handler, cast\nfrom erlport.erlterms import Atom\n\nmessage_handler = None # reference to the elixir process to send\n\ncmd = \"xvfb-run -a python\"\npy = os.path.join(\"/home/ubuntu/app/priv/python/export.py\")\n\ndef cast_message(pid, message):\n  cast(pid, message)\n\ndef register_handler(pid):\n  global message_handler\n  message_handler = pid\n\ndef handle_message(id):\n    try:\n      result = draw(id)\n      print result\n      if message_handler:\n        cast_message(message_handler, (Atom('python'), result))\n    except Exception, error:\n      print error\n      if message_handler:\n        cast_message(message_handler, (Atom('python'), error))\n      pass\n\ndef draw(id):\n  proc = subprocess.check_output(\n    \"{0} {1} {2}\".format(cmd, py, id), stderr = subprocess.STDOUT, shell = True\n  )\n  return proc\n\nset_message_handler(handle_message)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "edited": false, "score": 0, "creation_date": 1562629246, "post_id": 56896774, "comment_id": 100427316, "body": "Thanks for your thoughtful answer. I&#39;ll mark it as accepted since it definitely explains thing better than my ad-hoc approach."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "reply_to_user": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "edited": false, "score": 1, "creation_date": 1562630144, "post_id": 56896774, "comment_id": 100427477, "body": "@cd-rum, Ah, don&#39;t do that.  In your answer, you said, <i>I&#39;ve got a Genserver around the :python instance,</i>--I think it would be helpful if you showed how you set that up.  I recently used a GenServer to get around a similar type of problem.  In my case, a process called a function which made that process the owner of a socket, which meant that only that process could send and receive messages from a socket.  I used a GenServer&#39;s <code>handle_call()</code> to call the function, which meant that the GenServer became the owner, and messages from the socket were handled by <code>handle_info()</code>."}, {"owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "edited": false, "score": 0, "creation_date": 1562630297, "post_id": 56896774, "comment_id": 100427502, "body": "Fair, I&#39;ll expand on my answer shortly."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "reply_to_user": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "edited": false, "score": 0, "creation_date": 1562630484, "post_id": 56896774, "comment_id": 100427532, "body": "@cd-rum, Okay, I edited my answer which means you can remove the checkmark, and when you expand your answer, you can accept your own answer."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "reply_to_user": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "edited": false, "score": 1, "creation_date": 1562689911, "post_id": 56896774, "comment_id": 100452377, "body": "<i>I don&#39;t know what that junk is on the last line. Edit: Hmmm...it&#39;s the atom :ok surrounded by some other stuff.)</i> -- The &quot;other stuff&quot; consists of color codes which are interpreted by the terminal.  <code>:ok</code> would display in blue (or something) in the terminal."}], "tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": false, "score": 2, "last_activity_date": 1562630441, "last_edit_date": 1562630441, "creation_date": 1562302773, "answer_id": 56896774, "question_id": 56879138, "link": "https://stackoverflow.com/questions/56879138/erlport-python-stdout-capture-to-elixir/56896774#56896774", "title": "Erlport/Python STDOUT capture to Elixir", "body": "<blockquote>\n  <p>My idea was to call something like <code>Python.call(pid, :builtins,\n  :print, [self()])</code> but that results in a bunch of errors and I really\n  don't know if that's the right direction at all.</p>\n</blockquote>\n\n<p><code>self()</code> is not where the output goes--rather <code>self()</code> is the argument for <code>print</code>, i.e. what python will print out. </p>\n\n<p>I think <code>erlport</code> can only handle MFA calls(module, function, argument), and because <code>print</code> isn't a function in <code>python 2.7</code>, I think you need to wrap a function around <code>print</code>, e.g.:</p>\n\n<p>myprint.py:</p>\n\n<pre><code>def print_this(str):\n    print str\n</code></pre>\n\n<blockquote>\n  <p>I just want to send the STDOUT stuff from Python back to Elixir for\n  logging but I can't wrap my head around how to achieve that. I know\n  it's possible even though I'm using Python 2.7</p>\n</blockquote>\n\n<p>The <a href=\"http://erlport.org/docs/python.html#standard-output-redirection\" rel=\"nofollow noreferrer\">erlport</a> docs say:</p>\n\n<blockquote>\n  <p>As a convenient feature ErlPort also supports redirection of Python`s\n  STDOUT to Erlang...</p>\n</blockquote>\n\n<p>That appears to be the default setup, so you don't have to do anything to get python stdout to be redirected to elixir stdout.  The question then becomes: \"How do you log elixir stdout to a file?\"</p>\n\n<p>I'm able to log elixir <code>stdout</code> to a file like this: </p>\n\n<p>friends.ex:</p>\n\n<pre><code>defmodule Friends do\n\n  use Export.Python\n\n  def go do\n\n    #Get path to logfile:\n\n    priv_path = :code.priv_dir(:friends)\n    logfile_path = Path.join([priv_path, \"log\", \"mylog.log\"])\n\n    #Redirect stdout:\n\n    {:ok, io_pid} = File.open(logfile_path, [:append])\n    Process.group_leader(self(), io_pid)\n\n    #Send output to stdout:\n\n    IO.puts \"Am I in the log file??!\"\n\n    python_path = Path.expand(\"lib/python\") \n    {:ok, py} = Python.start(\n                 python: \"python2.7\",\n                 python_path: python_path\n               )\n\n    Python.call(py, \"myprint\", \"print_this\", [\"hello world!\"])\n    Python.call(py, \"myprint\", \"print_this\", [\"goodbye...\"])\n\n    Python.stop(py)\n  end\n\nend\n</code></pre>\n\n<p>This is my directory structure:</p>\n\n<pre><code>friends\n    /lib\n      /friends\n      /python\n          myprint.py\n      friends.ex\n   /priv\n      /log\n          mylog.log\n</code></pre>\n\n<p>In iex:</p>\n\n<pre><code>~/elixir_programs/friends$ iex -S mix\nErlang/OTP 20 [erts-9.3] [source] [64-bit] [smp:4:4] [ds:4:4:10] [async-threads:10] [hipe] [kernel-poll:false]\nCompiling 1 file (.ex)\nInteractive Elixir (1.8.2) - press Ctrl+C to exit (type h() ENTER for help)\n\niex(1)&gt; Friends.go\niex(2)&gt;\n</code></pre>\n\n<p>In the log file:</p>\n\n<pre><code>Am I in the log file??!\nhello world!\ngoodbye...\n[33m[36m:ok[0m[33m[0m\n</code></pre>\n\n<p>(I don't know what that junk is on the last line.  Edit: Hmmm...it's the atom <code>:ok</code> surrounded by some other stuff.)</p>\n\n<p>If I comment out everything inside <code>go()</code> above the python_path line, then I get:</p>\n\n<pre><code>iex(1)&gt; Friends.go\nhello world!\ngoodbye...\n:ok\n</code></pre>\n\n<p>In erlang/elixir file I/O is handled by starting a process to which requests are sent to either write to the file or read the file.  I think stdout gets sent to whatever process is the <code>group_leader</code>, and if the process handling file I/O is the group_leader, then stdout gets sent to the file.</p>\n\n<p>I don't know if messing with the <code>group_leader</code> will screw things up when you are using a <code>GenServer</code>.  There is a warning in the <a href=\"https://erldocs.com/21.0/erts/erlang.html?i=1&amp;search=group_le#group_leader/2\" rel=\"nofollow noreferrer\">erlang docs</a>:</p>\n\n<blockquote>\n  <p>The group leader should be rarely changed in applications with a\n  supervision tree, because OTP assumes the group leader of their\n  processes is their application master.</p>\n</blockquote>\n\n<p>.</p>\n"}], "owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 311, "favorite_count": 1, "accepted_answer_id": 56879817, "answer_count": 2, "score": 2, "last_activity_date": 1564569753, "creation_date": 1562197699, "last_edit_date": 1562206378, "question_id": 56879138, "link": "https://stackoverflow.com/questions/56879138/erlport-python-stdout-capture-to-elixir", "title": "Erlport/Python STDOUT capture to Elixir", "body": "<p>I'm trying to pipe STDOUT from Python/Erlport back to Elixir. I've got <code>:python</code> calls working fine, I just want to send the STDOUT stuff from Python back to Elixir for logging but I can't wrap my head around how to achieve that. I know it's <a href=\"http://erlport.org/docs/python.html#standard-output-redirection\" rel=\"nofollow noreferrer\">possible</a> even though I'm using Python 2.7.</p>\n\n<p>I've got a Genserver wrapper around the <code>:python</code> module so that my call works like so:</p>\n\n<pre><code>pid = Python.start()\nPython.call(pid, :bridge, :register_handler, [self()]) \n</code></pre>\n\n<p>Python.call just looks like this:</p>\n\n<pre><code>def call(pid, module, function, args \\\\ []) do\n  :python.call(pid, module, function, args)\nend\n</code></pre>\n\n<p>Anything from <code>:bridge</code> (i.e., <code>bridge.py</code>) is lost to STDOUT unless I explicitly return something (obviously halting the function). What can I do to capture STDOUT? </p>\n\n<p>My idea was to call something like <code>Python.call(pid, :builtins, :print, [self()])</code> but that results in a bunch of errors and I really don't know if that's the right direction at all.</p>\n\n<p>I actually want to pipe it into a Phoenix channel, but that's the easy part (I hope). Any advice? Thanks.</p>\n"}, {"tags": ["python", "plot"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1562198439, "post_id": 56879103, "comment_id": 100306864, "body": "you use the same <code>x,y</code> with <code>polygon</code> and <code>scatter</code> - maybe problem is <code>scatter</code> not <code>polygon</code>? Did you tired run <code>polygon</code> many times with different data instead of single polygon with multidata ?"}], "answers": [{"comments": [{"owner": {"reputation": 2052, "user_id": 9749124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96bc792b252c540523faea0fb803cb1c?s=128&d=identicon&r=PG&f=1", "display_name": "taga", "link": "https://stackoverflow.com/users/9749124/taga"}, "edited": false, "score": 0, "creation_date": 1562282367, "post_id": 56879224, "comment_id": 100336176, "body": "Can you please help me with this also, I see that you are an expert:  <a href=\"https://stackoverflow.com/questions/56895030/error-when-plotting-scatter-plot-with-gmplot-in-python\" title=\"error when plotting scatter plot with gmplot in python\">stackoverflow.com/questions/56895030/&hellip;</a>"}], "tags": [], "owner": {"reputation": 36, "user_id": 6735517, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eLxYCptS4Hs/AAAAAAAAAAI/AAAAAAAAAFk/9L00ti9b7eM/photo.jpg?sz=128", "display_name": "Anna Giasson", "link": "https://stackoverflow.com/users/6735517/anna-giasson"}, "is_accepted": true, "score": 2, "last_activity_date": 1562198639, "creation_date": 1562198639, "answer_id": 56879224, "question_id": 56879103, "link": "https://stackoverflow.com/questions/56879103/is-there-a-way-to-plot-multiple-polygons-on-one-graph-with-python/56879224#56879224", "title": "Is there a way to plot multiple polygons on one graph with Python", "body": "<p>So, I think your issue is that gmap5.scatter is expecting a list of longitude and latitude points and you're passing a list of lists. I managed to get it to work by iterating over the lists in your x &amp; y lists, drawing them one at a time.</p>\n\n<p>Try this</p>\n\n<pre><code>from gmplot import gmplot\n\ngmap5 = gmplot.GoogleMapPlotter(10, 10, 7)\n\nx = [[5, 10, 10, 5], [15, 15, 19, 25]]\ny =[[5, 5, 15, 15], [16, 17, 25, 15]]\n\nfor lat, long in zip(x,y):\n    gmap5.scatter(lat, long, '# FF0000', size = 40, marker = False)\n\n    # polygon method Draw a polygon with\n    gmap5.polygon(lat, long, color = 'red')\n\ngmap5.draw( \"map.html\" )\n</code></pre>\n\n<p>By doing it like so you should be able to plot multiple polygons. </p>\n\n<p>For example, this also works for me:</p>\n\n<pre><code>from gmplot import gmplot\n\ngmap5 = gmplot.GoogleMapPlotter(10, 10, 7)\n\nx = [[5, 10, 10, 5], [15, 15, 19, 25], [10, 20, 25, 50, 10]]\ny = [[5, 5, 15, 15], [16, 17, 25, 15], [25, 30, 35, 40, 25]]\n\nfor lat, long in zip(x,y):\n    gmap5.scatter(lat, long, '# FF0000', size = 40, marker = False)\n\n    # polygon method Draw a polygon with\n    gmap5.polygon(lat, long, color = 'red')\n\ngmap5.draw( \"map.html\" )\n</code></pre>\n\n<p>As long as the corresponding lists in x and y have the same length there shouldn't be any issue.</p>\n"}], "owner": {"reputation": 2052, "user_id": 9749124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96bc792b252c540523faea0fb803cb1c?s=128&d=identicon&r=PG&f=1", "display_name": "taga", "link": "https://stackoverflow.com/users/9749124/taga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 773, "favorite_count": 0, "accepted_answer_id": 56879224, "answer_count": 1, "score": 0, "last_activity_date": 1562198639, "creation_date": 1562197254, "last_edit_date": 1562197945, "question_id": 56879103, "link": "https://stackoverflow.com/questions/56879103/is-there-a-way-to-plot-multiple-polygons-on-one-graph-with-python", "title": "Is there a way to plot multiple polygons on one graph with Python", "body": "<p>im learning pythons lib <code>gmplot</code> and Im wondering is there a way to plot multiple polygons with this lib.\nThis is the code that i wrote for plotting one polygon:</p>\n\n<pre><code>from gmplot import gmplot\n\ngmap5 = gmplot.GoogleMapPlotter(10, 10, 7)\n\nx = [5, 10, 10, 5]\ny =[5, 5, 15, 15]\ngmap5.scatter(x, y, '# FF0000', size = 40, marker = False) \n\n# polygon method Draw a polygon with \ngmap5.polygon(x, y, color = 'red') \n\ngmap5.draw( \"map.html\" )\n</code></pre>\n\n<p>But when I want to plot multiple polygons, I get an error:</p>\n\n<p><code>TypeError: can't multiply sequence by non-int of type 'float'\n</code></p>\n\n<p>This is the code that I wrote:</p>\n\n<pre><code>from gmplot import gmplot\n\ngmap5 = gmplot.GoogleMapPlotter(10, 10, 7)\n\nx = [[5, 10, 10, 5], [15, 15, 19, 25]]\ny =[[5, 5, 15, 15], [16, 17, 25, 15]]\n\ngmap5.scatter(x, y, '# FF0000', size = 40, marker = False) \n\n# polygon method Draw a polygon with \ngmap5.polygon(x, y, color = 'red') \n\ngmap5.draw( \"map.html\" )\n</code></pre>\n\n<p>I have also tried to use this: <code>x = [(5, 10, 10, 5), (15, 15, 19, 25)]\ny =[(5, 5, 15, 15), (16, 17, 25, 15)]</code> but it gives me the same error</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 6583, "user_id": 10426037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6723e3123b9a13d6360d1ee755f8728?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/10426037/valentino"}, "edited": false, "score": 0, "creation_date": 1562197383, "post_id": 56879082, "comment_id": 100306709, "body": "Hello! Ask one question per post, please. That&#39;s the rule here, one question per post."}, {"owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "edited": false, "score": 0, "creation_date": 1562197591, "post_id": 56879082, "comment_id": 100306744, "body": "You can explicitly reorder the columns.  <a href=\"https://stackoverflow.com/questions/35321812/move-column-in-pandas-dataframe/35322540#35322540\" title=\"move column in pandas dataframe\">stackoverflow.com/questions/35321812/&hellip;</a> You should also specify the version of Python and pandas that you are using."}], "answers": [{"tags": [], "owner": {"reputation": 24167, "user_id": 7388477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e42e688ade97076d4fdd1939946e7c7b?s=128&d=identicon&r=PG&f=1", "display_name": "Valdi_Bo", "link": "https://stackoverflow.com/users/7388477/valdi-bo"}, "is_accepted": false, "score": 0, "last_activity_date": 1562213368, "creation_date": 1562213368, "answer_id": 56880543, "question_id": 56879082, "link": "https://stackoverflow.com/questions/56879082/pandas-apply-series-order-of-the-columns/56880543#56880543", "title": "Pandas apply Series- Order of the columns", "body": "<p>Assume that your DataFrame is something like this:</p>\n\n<pre><code>      Deletes  Selects  Updates  Inserts\nName                                    \nXxx        20       10       40       50\nYyy        12       32       24       11\nZzz        70       20       30       20\n</code></pre>\n\n<p>Then both <em>total</em> and <em>total per sec</em> can be computed as:</p>\n\n<pre><code>total = df.sum().rename('Total')\nVSeconds = 5   # I assumed some value\ntps = (total / VSeconds).rename('Total per sec')\n</code></pre>\n\n<p>Then you can add both above rows to the DataFrame:</p>\n\n<pre><code>df = df.append(totals).append(tps)\n</code></pre>\n\n<p>The downside is that all numbers are converted to <em>float</em>.\nBut in <em>Pandat</em> there is no other way, as each column must have\nvalues of <strong>one</strong> type.</p>\n\n<p>Then you can e.g. write it to a CSV file (with totals included).</p>\n"}, {"tags": [], "owner": {"reputation": 59, "user_id": 11711657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edf0972241f14ae57da9de1ff92a56b9?s=128&d=identicon&r=PG&f=1", "display_name": "Pat", "link": "https://stackoverflow.com/users/11711657/pat"}, "is_accepted": false, "score": 0, "last_activity_date": 1562969266, "last_edit_date": 1562969266, "creation_date": 1562967901, "answer_id": 57014335, "question_id": 56879082, "link": "https://stackoverflow.com/questions/56879082/pandas-apply-series-order-of-the-columns/57014335#57014335", "title": "Pandas apply Series- Order of the columns", "body": "<p>This is how I eneded up doing</p>\n\n<pre><code>    df.to_excel(vExcelFile,'All')\n    vSortedDF=df.sort_values(['Deletes%'],ascending=False)\n    vSortedDF.loc[vSortedDF['Deletes%']&gt; 5, ['DeletesTotal','DeletesSec','Deletes%']].to_excel(vExcelFile,'Top Delete objects')\nvExcelFile.save()\n</code></pre>\n\n<p>For CSV, instead of using separate \\t used <code>,</code> and it worked just fine.\n<code>df.to_csv(/home/summary.log,sep='\\t', encoding='utf-8-sig')</code></p>\n"}], "owner": {"reputation": 59, "user_id": 11711657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edf0972241f14ae57da9de1ff92a56b9?s=128&d=identicon&r=PG&f=1", "display_name": "Pat", "link": "https://stackoverflow.com/users/11711657/pat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1562969266, "creation_date": 1562197081, "last_edit_date": 1562197432, "question_id": 56879082, "link": "https://stackoverflow.com/questions/56879082/pandas-apply-series-order-of-the-columns", "title": "Pandas apply Series- Order of the columns", "body": "<p>To aggregate and to find values per second, I am doing following in Python using pandas, however, in the output logged to a file doesn't show columns in the way they appear here. Somehow these column names are sorted and hence TotalDMLsSec shows up before UpdateTotal and UpdatesSec.</p>\n\n<pre><code>    'DeletesTotal': x['Delete'].sum(),\n    'DeletesSec': x['Delete'].sum()/VSeconds,\n    'SelectsTotal': x['Select'].sum(),\n    'SelectsSec': x['Select'].sum()/VSeconds,\n    'UpdateTotal': x['Update'].sum(),\n    'UpdatesSec': x['Update'].sum()/VSeconds,\n    'InsertsTotal': x['Insert'].sum(),\n    'InsertsSec': x['Insert'].sum()/VSeconds,\n    'TotalDMLsSec':(x['Delete'].sum()+x['Update'].sum()+x['Insert'].sum())/VSeconds\n    })\n)\ndf.to_csv(/home/summary.log,sep='\\t', encoding='utf-8-sig')\n</code></pre>\n\n<p>Apart from above questions, have couple of other questions-</p>\n\n<ol>\n<li>Despite logging as csv format, all values/columns are appearing in one column in excel, is there anyway to properly load data CSV</li>\n<li>Can rows be sorted based on one column(let say InsertsSec) by default when writing to csv file?</li>\n</ol>\n\n<p>Any help here would be really appreciated.</p>\n"}, {"tags": ["python", "keras", "python-multiprocessing"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1562198411, "post_id": 56879066, "comment_id": 100306856, "body": "The code works for me if I replace your <code>df.to_csv()</code> call with <code>time.sleep(random.randint(1, 3))</code>, so I think the problem has to do with your use of a pandas <code>dataframe</code>, not <code>Pool</code>."}, {"owner": {"reputation": 2119, "user_id": 7095751, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0kkD4YDw7Gw/AAAAAAAAAAI/AAAAAAAAAEk/ZwcaKyyr9M8/photo.jpg?sz=128", "display_name": "Alexandre Juma", "link": "https://stackoverflow.com/users/7095751/alexandre-juma"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1562198782, "post_id": 56879066, "comment_id": 100306914, "body": "@martineau Just tested with <code>df.to_csv()</code> and it works here.. (python 3.6). I have 8 cores, tested with 30 inputs and it goes all the way. @Winston, you get no exception, no output from that <code>print()</code> on your <code>main()</code>, the program doesn&#39;t hang and ends successfully (result code = 0)?"}, {"owner": {"reputation": 155, "user_id": 7692334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7555f80b32d90237304f9e86bad2b24f?s=128&d=identicon&r=PG&f=1", "display_name": "Winston", "link": "https://stackoverflow.com/users/7692334/winston"}, "reply_to_user": {"reputation": 2119, "user_id": 7095751, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0kkD4YDw7Gw/AAAAAAAAAAI/AAAAAAAAAEk/ZwcaKyyr9M8/photo.jpg?sz=128", "display_name": "Alexandre Juma", "link": "https://stackoverflow.com/users/7095751/alexandre-juma"}, "edited": false, "score": 0, "creation_date": 1562199237, "post_id": 56879066, "comment_id": 100306990, "body": "@Alexandre Juma, strange. I get nothing and the program just pauses after the first four prints. My actual function is much more complicated so maybe that&#39;s the reason. But I did test the function many times without multiprocess to make sure it is working properly."}, {"owner": {"reputation": 2119, "user_id": 7095751, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0kkD4YDw7Gw/AAAAAAAAAAI/AAAAAAAAAEk/ZwcaKyyr9M8/photo.jpg?sz=128", "display_name": "Alexandre Juma", "link": "https://stackoverflow.com/users/7095751/alexandre-juma"}, "edited": false, "score": 1, "creation_date": 1562199755, "post_id": 56879066, "comment_id": 100307073, "body": "Maybe you have stuff in your function that isn&#39;t safe to paralelize and it&#39;s breaking your program. Even not knowing what your function does, one thing you can do is try out the other <code>map()</code> implementations. You can try <code>pool.imap(func, input)</code>, <code>pool.map_async(func, input)</code>, <code>pool.imap_unordered(func, input)</code>. Long shot!"}, {"owner": {"reputation": 155, "user_id": 7692334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7555f80b32d90237304f9e86bad2b24f?s=128&d=identicon&r=PG&f=1", "display_name": "Winston", "link": "https://stackoverflow.com/users/7692334/winston"}, "edited": false, "score": 0, "creation_date": 1562211821, "post_id": 56879066, "comment_id": 100308911, "body": "I seem to have found the issue, which has to do with calling a keras model during the function, which as some pointed out, is not safe to parallelise."}, {"owner": {"reputation": 2119, "user_id": 7095751, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0kkD4YDw7Gw/AAAAAAAAAAI/AAAAAAAAAEk/ZwcaKyyr9M8/photo.jpg?sz=128", "display_name": "Alexandre Juma", "link": "https://stackoverflow.com/users/7095751/alexandre-juma"}, "edited": false, "score": 0, "creation_date": 1562228954, "post_id": 56879066, "comment_id": 100314879, "body": "Great! Answer your own question for others to benefit from it :)"}], "owner": {"reputation": 155, "user_id": 7692334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7555f80b32d90237304f9e86bad2b24f?s=128&d=identicon&r=PG&f=1", "display_name": "Winston", "link": "https://stackoverflow.com/users/7692334/winston"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 372, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1562241394, "creation_date": 1562196889, "last_edit_date": 1562241394, "question_id": 56879066, "link": "https://stackoverflow.com/questions/56879066/multiprocess-pool-map-stops-after-the-first-set-of-inputs", "title": "Multiprocess pool.map() stops after the first set of inputs", "body": "<p>I am trying to use pool.map() to serialise a function, which takes one single input and writes the output to a csv file. It seems that the process stops after the first set of inputs. I'm running the code on Debian with 4 cores.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from multiprocessing import Pool, cpu_count\nfrom keras.models import load_model\ninput = [1,2,3,4,5,6,7,8]\nmodel = load_model(directory)\ndef func(input):\n    # some calculations\n    prediction = model.predict(data)\n    # more calculations\n    print('Currently working on', input)\n    df.to_csv(directory)\n\ndef main():\n    workers = cpu_count()\n    pool = Pool(processes=workers)\n    pool.map(func, input)\n    pool.close()\n    pool.join()\n\nif __name__ == '__main__':\n    start = time.time()\n    main()\n    print('That took {} seconds'.format(time.time() - start))\n</code></pre>\n\n<pre class=\"lang-none prettyprint-override\"><code>Currently working on 1\nCurrently working on 2\nCurrently working on 3\nCurrently working on 4\n</code></pre>\n\n<p>I'm getting the above output, and then it doesn't go on to the subsequent inputs. I've tested the function without multiprocessing, and it works fine, so I am guessing the problem sits somewhere in <code>Pool()</code>.</p>\n\n<p>Edit:\nAfter some debug I found the problem. I am using a Keras model as part of the function, and that seemed to be where the issue is.</p>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1562196787, "post_id": 56879042, "comment_id": 100306604, "body": "Probably you mean <code>cards[0]</code> instead of <code>cards(0)</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11736786, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZcDzD4lZRtA/AAAAAAAAAAI/AAAAAAAAAnY/-e7mouBCaHQ/photo.jpg?sz=128", "display_name": "Imperdius", "link": "https://stackoverflow.com/users/11736786/imperdius"}, "edited": false, "score": 0, "creation_date": 1562233661, "post_id": 56879077, "comment_id": 100317656, "body": "Cheers, this worked great! Is there a simple rule for when square brackets are used, or do I just need to learn each individual case. It is a bit confusing that pop doesn&#39;t need them while removing and assingment do."}, {"owner": {"reputation": 3021, "user_id": 11606193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXr7w.jpg?s=128&g=1", "display_name": "Deepstop", "link": "https://stackoverflow.com/users/11606193/deepstop"}, "reply_to_user": {"reputation": 3, "user_id": 11736786, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZcDzD4lZRtA/AAAAAAAAAAI/AAAAAAAAAnY/-e7mouBCaHQ/photo.jpg?sz=128", "display_name": "Imperdius", "link": "https://stackoverflow.com/users/11736786/imperdius"}, "edited": false, "score": 0, "creation_date": 1562234311, "post_id": 56879077, "comment_id": 100318041, "body": "Hi @Imperdius. I can see how that might be confusing. It will be clearer after you get a bit more familiar with Python. Functions and methods (like <code>readlines</code> and <code>pop</code>) are called with their arguments in parentheses. Lists like <code>cards</code> are indexed using square brackets to indicate which element or elements are to be selected (look up &#39;slicing&#39; in the Python documentation for all the detail on that). Lists like <code>cards</code> can also have methods, like <code>pop</code>, which operate on the list. I think if you read some of the documentation about lists in Python it will be clearer."}], "tags": [], "owner": {"reputation": 3021, "user_id": 11606193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXr7w.jpg?s=128&g=1", "display_name": "Deepstop", "link": "https://stackoverflow.com/users/11606193/deepstop"}, "is_accepted": true, "score": 1, "last_activity_date": 1562197050, "creation_date": 1562197050, "answer_id": 56879077, "question_id": 56879042, "link": "https://stackoverflow.com/questions/56879042/how-can-i-remove-an-item-from-a-list-and-assign-it-to-a-variable/56879077#56879077", "title": "How can I remove an item from a list, and assign it to a variable?", "body": "<p>easy way - does assignment and removes item all at once.</p>\n\n<pre><code>p1c1 = cards.pop(0)\n</code></pre>\n\n<p>&amp; the comments are right, to index a list you need to use square brackets.</p>\n"}, {"tags": [], "owner": {"reputation": 38349, "user_id": 10221765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e762fef8d87381d5cbd58d851d1b816?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Bashford", "link": "https://stackoverflow.com/users/10221765/jack-bashford"}, "is_accepted": false, "score": 0, "last_activity_date": 1562197227, "creation_date": 1562197227, "answer_id": 56879100, "question_id": 56879042, "link": "https://stackoverflow.com/questions/56879042/how-can-i-remove-an-item-from-a-list-and-assign-it-to-a-variable/56879100#56879100", "title": "How can I remove an item from a list, and assign it to a variable?", "body": "<p>The <code>pop</code> function (see <a href=\"https://docs.python.org/2/tutorial/datastructures.html\" rel=\"nofollow noreferrer\">here</a>) takes an index, and removes it while returning that item.</p>\n\n<pre><code>p1c1 = cards.pop(0)\n</code></pre>\n\n<p>Also note that to access a certain item in a list you use square brackets - so here's your now-working approach:</p>\n\n<pre><code>p1c1 = cards[0]\ncards.remove(a[0])\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11736786, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZcDzD4lZRtA/AAAAAAAAAAI/AAAAAAAAAnY/-e7mouBCaHQ/photo.jpg?sz=128", "display_name": "Imperdius", "link": "https://stackoverflow.com/users/11736786/imperdius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 0, "accepted_answer_id": 56879077, "answer_count": 2, "score": -1, "last_activity_date": 1562602934, "creation_date": 1562196594, "last_edit_date": 1562602934, "question_id": 56879042, "link": "https://stackoverflow.com/questions/56879042/how-can-i-remove-an-item-from-a-list-and-assign-it-to-a-variable", "title": "How can I remove an item from a list, and assign it to a variable?", "body": "<p>For some background if you're interested, I have a bit of experience in python but I haven't touched it in a couple of years - I mainly used basic but im looking to learn more of python.</p>\n\n<p>I am trying to program a card based game, where items from a list (the deck of cards) are dealt out to players. I understand that this is usually bad practice, but I have created 5 \"card slots\" for each player which I am trying to move the card from the bottom of the list (deck) into this slot, this would make the rest of the game much simpler to program.</p>\n\n<pre><code>#import and shuffle cards\nwith open(\"deck.txt\") as f:\n        cards = f.readlines()\n\nrandom.shuffle(cards)\n\n#move bottom card to first slot (p1c1 stands for person 1 card 1)\n\np1c1 = cards(0)\ncards.remove(a[0])\n</code></pre>\n\n<p>I am being given this error line</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:/Users/harry/OneDrive/Documents/python/21.py\", line 41, in &lt;module&gt;\n    p1c1 = int(cards(0))\nTypeError: 'list' object is not callable\n</code></pre>\n"}, {"tags": ["python", "parallel-processing", "multiprocessing", "pool"], "comments": [{"owner": {"reputation": 89, "user_id": 4879929, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-57DNWr6OJ5Q/AAAAAAAAAAI/AAAAAAAAGHg/-ieYaO4EES8/photo.jpg?sz=128", "display_name": "Chris", "link": "https://stackoverflow.com/users/4879929/chris"}, "edited": false, "score": 0, "creation_date": 1562197146, "post_id": 56879036, "comment_id": 100306670, "body": "I tried the original code from senderle&#39;s top answer and it also kept hanging. I should add that this was run in the latest version of Jupyter Notebook. HOWEVER, when I ran senderle&#39;s code in Spyder, it DID run!! But my code still hung up in Spyder ..."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1562198026, "post_id": 56879036, "comment_id": 100306803, "body": "for starters, you should <b>always</b> use a <code>if __name__ == &#39;__main__&#39;</code> guard when using multiprocessing. There&#39;s probably all sorts of complications trying to use multiprocessing in a Jupyter notebook"}], "answers": [{"tags": [], "owner": {"reputation": 89, "user_id": 4879929, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-57DNWr6OJ5Q/AAAAAAAAAAI/AAAAAAAAGHg/-ieYaO4EES8/photo.jpg?sz=128", "display_name": "Chris", "link": "https://stackoverflow.com/users/4879929/chris"}, "is_accepted": false, "score": 0, "last_activity_date": 1562206893, "creation_date": 1562206893, "answer_id": 56879875, "question_id": 56879036, "link": "https://stackoverflow.com/questions/56879036/why-is-my-code-multiprocessing-pool-map-hanging-that-i-pulled-from-a-previous-qu/56879875#56879875", "title": "Why is my code multiprocessing pool map hanging that I pulled from a previous question?", "body": "<p>After reading <a href=\"https://stackoverflow.com/users/5014455/juanpa-arrivillaga\">juanpa.arrivillaga's</a> comment, I looked up 'jupyter notebook multiprocessing not working'. First <a href=\"https://medium.com/@grvsinghal/speed-up-your-python-code-using-multiprocessing-on-windows-and-jupyter-or-ipython-2714b49d6fac\" rel=\"nofollow noreferrer\">link</a> answered my question.</p>\n\n<ol>\n<li><p>You <b>must</b> add\n<code>if __name__ == '__main__' :</code>\nto your code.</p></li>\n<li><p>Save the function as a separate py file and import it.</p>\n\n<ul>\n<li>In my case, I saved merge_names as merge_names.py</li>\n<li>Then my code looks like the following:\n</ol></li>\n</ul>\n\n<p><code>import multiprocessing\nfrom itertools import product\nimport merge_names</code></p>\n\n<p><code>if __name__ == '__main__':\n    names = ['Brown', 'Wilson', 'Bartlett', 'Rivera', 'Molloy', 'Opie']\n    with multiprocessing.Pool(processes=3) as pool:\n        results = pool.starmap(merge_names.merge_names, product(names, repeat=2))\n    print(results)</code></p></li>\n\n\n<p>Now the code runs in Jupyter Notebook.</p>\n"}], "owner": {"reputation": 89, "user_id": 4879929, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-57DNWr6OJ5Q/AAAAAAAAAAI/AAAAAAAAGHg/-ieYaO4EES8/photo.jpg?sz=128", "display_name": "Chris", "link": "https://stackoverflow.com/users/4879929/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 178, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562206893, "creation_date": 1562196517, "last_edit_date": 1562198577, "question_id": 56879036, "link": "https://stackoverflow.com/questions/56879036/why-is-my-code-multiprocessing-pool-map-hanging-that-i-pulled-from-a-previous-qu", "title": "Why is my code multiprocessing pool map hanging that I pulled from a previous question?", "body": "<p>I took the example from senderle <a href=\"https://stackoverflow.com/questions/5442910/python-multiprocessing-pool-map-for-multiple-arguments\">here</a>. I thought I had copy and pasted the main parts of the code, but my code will not stop.</p>\n\n<p>I've tried this example after my own attempts at solving a different problem using <code>pool.map</code> kept hanging. I wonder if there's something actually wrong with the code or my multiprocessing package ...</p>\n\n<p>Below is the code I pulled from senderle's top answer:</p>\n\n<pre><code>from itertools import product\nimport multiprocessing\ndef merge_names(a, b):\n    return '{} &amp; {}'.format(a, b)\nnames = ['Brown', 'Wilson', 'Bartlett', 'Rivera', 'Molloy', 'Opie']\nwith multiprocessing.Pool(processes=3) as pool:\n    results = pool.starmap(merge_names, product(names, repeat=2))\nprint(results)\n</code></pre>\n\n<p>I was expecting a list of 36 'merged' names, but the process keeps running without end. Any help?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1562196727, "post_id": 56879033, "comment_id": 100306595, "body": "you cannot override this, <code>type</code> should return the <i>type object</i>, i.e. the class object, to begin with, so even if this were possible, returning a string would be a broken implementation. this sounds like an x-y problem, what are you <i>actually</i> trying to do?"}, {"owner": {"reputation": 197, "user_id": 9089647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cac12175a1aabb91682fc52e17c30894?s=128&d=identicon&r=PG&f=1", "display_name": "Wasp Nesser", "link": "https://stackoverflow.com/users/9089647/wasp-nesser"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1562196830, "post_id": 56879033, "comment_id": 100306612, "body": "I am trying to change that <code>&lt;class &#39;__main__.MyClassName&#39;&gt;</code> result . With <code>MyMathOBJ</code>. For instance <code>a = 5;print(type(a))</code> code will print <code>int</code> . Just that . Not with confusing staff. I just want it."}, {"owner": {"reputation": 197, "user_id": 9089647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cac12175a1aabb91682fc52e17c30894?s=128&d=identicon&r=PG&f=1", "display_name": "Wasp Nesser", "link": "https://stackoverflow.com/users/9089647/wasp-nesser"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1562197051, "post_id": 56879033, "comment_id": 100306651, "body": "Just it has better looking :) Aesthetic and Curiosity"}, {"owner": {"reputation": 11845, "user_id": 3280538, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pYuGC.jpg?s=128&g=1", "display_name": "flakes", "link": "https://stackoverflow.com/users/3280538/flakes"}, "edited": false, "score": 1, "creation_date": 1562197209, "post_id": 56879033, "comment_id": 100306683, "body": "I&#39;d be interested to see if you can actually fake the result of <code>type</code>; not necessarily changing it to a str, but changing it at all."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 11845, "user_id": 3280538, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pYuGC.jpg?s=128&g=1", "display_name": "flakes", "link": "https://stackoverflow.com/users/3280538/flakes"}, "edited": false, "score": 0, "creation_date": 1562197313, "post_id": 56879033, "comment_id": 100306697, "body": "@flakes what do you mean by &quot;fake&quot; it? You can, if you&#39;d likey, dynamically set the <code>__class__</code> of an instance to any arbitrary class (python is very much open to metaprogramming and introspection). I&#39;m not sure i&#39;d recommend that unless you really know what you are doing. If you just want to change how the class object is <i>represented</i> when you print it, you just need to create a custom metaclass (i.e. a custom type)"}, {"owner": {"reputation": 11845, "user_id": 3280538, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pYuGC.jpg?s=128&g=1", "display_name": "flakes", "link": "https://stackoverflow.com/users/3280538/flakes"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1562197492, "post_id": 56879033, "comment_id": 100306724, "body": "@juanpa.arrivillaga hmm, say the goal is in a testing class and to make a mock of the class such that <code>type</code> checks like <code>type(MockFoo()) is Foo</code> might pass."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 11845, "user_id": 3280538, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pYuGC.jpg?s=128&g=1", "display_name": "flakes", "link": "https://stackoverflow.com/users/3280538/flakes"}, "edited": false, "score": 0, "creation_date": 1562197564, "post_id": 56879033, "comment_id": 100306740, "body": "@flakes you can do it on a per-instance basis trivially, by <code>instance.__class__ = Foo</code>, and probably using some metaclass black magic you could do it in <code>MockFoo</code>, but it would be filled with landmines"}, {"owner": {"reputation": 11845, "user_id": 3280538, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pYuGC.jpg?s=128&g=1", "display_name": "flakes", "link": "https://stackoverflow.com/users/3280538/flakes"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1562197711, "post_id": 56879033, "comment_id": 100306761, "body": "@juanpa.arrivillaga I just tried that with <code>class Foo: pass</code> and <code>class Bar: pass</code> then <code>foo=Foo();foo.__class__ = Bar</code> but I get <code>TypeError: __class__ assignment only supported for heap types or ModuleType subclasses</code>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 11845, "user_id": 3280538, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pYuGC.jpg?s=128&g=1", "display_name": "flakes", "link": "https://stackoverflow.com/users/3280538/flakes"}, "edited": false, "score": 0, "creation_date": 1562197824, "post_id": 56879033, "comment_id": 100306778, "body": "@flakes yeah, you&#39;d have to do this in Python 3, or try inheriting from <code>object</code> in Python 2 (which you should always do anyways in Python 2 to use &quot;new&quot; style classes)"}, {"owner": {"reputation": 11845, "user_id": 3280538, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pYuGC.jpg?s=128&g=1", "display_name": "flakes", "link": "https://stackoverflow.com/users/3280538/flakes"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1562198094, "post_id": 56879033, "comment_id": 100306812, "body": "@juanpa.arrivillaga Are you sure? FWIW I am on python 3.7.2 <a href=\"https://gist.github.com/cal-pratt/309ec0a5a05731e69aeda465b4e8448f\" rel=\"nofollow noreferrer\">gist.github.com/cal-pratt/309ec0a5a05731e69aeda465b4e8448f</a>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 11845, "user_id": 3280538, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pYuGC.jpg?s=128&g=1", "display_name": "flakes", "link": "https://stackoverflow.com/users/3280538/flakes"}, "edited": false, "score": 0, "creation_date": 1562198218, "post_id": 56879033, "comment_id": 100306828, "body": "@flakes you meant <code>foo = Foo()</code>, not <code>foo = Foo</code>. you simply aliased the class object"}, {"owner": {"reputation": 11845, "user_id": 3280538, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pYuGC.jpg?s=128&g=1", "display_name": "flakes", "link": "https://stackoverflow.com/users/3280538/flakes"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1562198376, "post_id": 56879033, "comment_id": 100306851, "body": "@juanpa.arrivillaga Oh you are right, but this does now have the side effect of causing <code>test</code> for the foo instance to redirect to <code>Bar</code> (updated it in the gist). I&#39;m going to post a new question for the black magic metaclass approach this has peaked my curiosity! :)"}, {"owner": {"reputation": 11845, "user_id": 3280538, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pYuGC.jpg?s=128&g=1", "display_name": "flakes", "link": "https://stackoverflow.com/users/3280538/flakes"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1562198918, "post_id": 56879033, "comment_id": 100306929, "body": "@juanpa.arrivillaga posted here if you&#39;re interested on weighing in <a href=\"https://stackoverflow.com/questions/56879245/is-it-possible-to-make-the-output-of-type-return-a-different-class\" title=\"is it possible to make the output of type return a different class\">stackoverflow.com/questions/56879245/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1562205361, "post_id": 56879104, "comment_id": 100307927, "body": "Note that you can replace <code>x.__class__</code> but that does <i>not</i> change <code>type(x)</code>"}, {"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1562725539, "post_id": 56879104, "comment_id": 100462839, "body": "The parameter name in <code>__repr__</code> should be called <code>cls</code> rather than <code>self</code>, since it&#39;s in a metaclass and the instances are classes."}], "tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": true, "score": 8, "last_activity_date": 1562725165, "last_edit_date": 1562725165, "creation_date": 1562197266, "answer_id": 56879104, "question_id": 56879033, "link": "https://stackoverflow.com/questions/56879033/how-do-i-override-type-method-in-python-object/56879104#56879104", "title": "How do I override __type__ method in python object?", "body": "<p>You seem to fundamentally misunderstand what <code>type</code> does. <code>type</code> itself is just a class, a <em>metaclass</em>. When you call <code>type</code> on an instance, it returns the class object that corresponds to that instance, pretty much equivalent to <code>instance.__class__</code>. However, you simply want to change the way the class object is <em>represented when you print it</em>, so you'd need to implement a metaclass for <code>MyMathOBJ</code> that overrides <code>__repr__</code> in the metaclass to accomplish this.</p>\n\n<p>Here is how you accomplish what you are actually trying to do:</p>\n\n<pre><code>In [12]: class PrettyType(type):\n    ...:     def __repr__(self):\n    ...:         return self.__name__\n    ...:\n\nIn [13]: class MyMathOBJ(metaclass=PrettyType):\n    ...:     pass\n    ...:\n\nIn [14]: obj = MyMathOBJ()\n\nIn [15]: obj\nOut[15]: &lt;MyMathOBJ at 0x1060cbcc0&gt;\n\nIn [16]: type(obj)\nOut[16]: MyMathOBJ\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 9089647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cac12175a1aabb91682fc52e17c30894?s=128&d=identicon&r=PG&f=1", "display_name": "Wasp Nesser", "link": "https://stackoverflow.com/users/9089647/wasp-nesser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1028, "favorite_count": 0, "accepted_answer_id": 56879104, "answer_count": 1, "score": 4, "last_activity_date": 1562725165, "creation_date": 1562196512, "question_id": 56879033, "link": "https://stackoverflow.com/questions/56879033/how-do-i-override-type-method-in-python-object", "title": "How do I override __type__ method in python object?", "body": "<p>I create a Python class for some mathematical calculations. In that object, I am trying to change type(<strong>type</strong>) methods result. And my attempts failed.</p>\n\n<p>When I try type() method for my object that appears\n<code>&lt;class '__main__.MyClassName'&gt;</code>\nI override type method in my method :</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class MyMathOBJ():\n.   \n.\n.\n    def __type__(self):\n        return \"MyMathOBJ\"\n</code></pre>\n\n<p>But when I do that nothing changed. The same result. I was expecting just that result <code>MyMathOBJ</code>.</p>\n"}, {"tags": ["python", "postgresql"], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 10841093, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZdX4SDBtnRw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re_QNDWZQmmCheWUOLuRJMm4UK0VQ/mo/photo.jpg?sz=128", "display_name": "blizzard.blight", "link": "https://stackoverflow.com/users/10841093/blizzard-blight"}, "edited": false, "score": 0, "creation_date": 1562195962, "post_id": 56878978, "comment_id": 100306439, "body": "God I miss the dumbest things, Thank you so very much!"}], "tags": [], "owner": {"reputation": 106, "user_id": 11718161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e046265c4785bfaf17a3b6284d92832?s=128&d=identicon&r=PG&f=1", "display_name": "zama", "link": "https://stackoverflow.com/users/11718161/zama"}, "is_accepted": true, "score": 1, "last_activity_date": 1562196040, "last_edit_date": 1562196040, "creation_date": 1562195885, "answer_id": 56878978, "question_id": 56878937, "link": "https://stackoverflow.com/questions/56878937/insert-query-syntax-error-at-or-near/56878978#56878978", "title": "insert query: syntax error at or near &#39; &#39;", "body": "<p>The <code>resort_name</code> is a string type and needs to be enclosed in quotes in the <code>VALUES</code> part of the query, in a similar way to the <code>date</code> field:</p>\n\n<pre><code> f\"VALUES ({row['resort_id']}, '{row['resort_name']}' ,'{row['date']}', etc etc\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 10841093, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZdX4SDBtnRw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re_QNDWZQmmCheWUOLuRJMm4UK0VQ/mo/photo.jpg?sz=128", "display_name": "blizzard.blight", "link": "https://stackoverflow.com/users/10841093/blizzard-blight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 56878978, "answer_count": 1, "score": 0, "last_activity_date": 1562196040, "creation_date": 1562195558, "question_id": 56878937, "link": "https://stackoverflow.com/questions/56878937/insert-query-syntax-error-at-or-near", "title": "insert query: syntax error at or near &#39; &#39;", "body": "<p>Hello I have this little code segment that consumes some api data and inserts it into one of my tables. The issue comes when trying to insert into a charfield. Similar to the resort_id variable, Im just trying to insert the value from one table to another</p>\n\n<pre><code>\ndata = []\n'''this will assign key pairs to insert into table Reports'''\nfor var in myresult:\n    resort_id = var['id']\n    resort_name = var['resort_name']\n    weather = (snowfall_from(var['location']))\n    date = datetime.datetime.now(datetime.timezone.utc).strftime(\"%Y-%m-%d\")\n    data.append({\"resort_id\" : resort_id, \"resort_name\" : resort_name, \"date\" : date, \"snowfall\" : weather[\"snowfall\"], \"bottom_mintemp\" : weather[\"bottom_mintemp\"], \"bottom_maxtemp\" : weather[\"bottom_maxtemp\"],\n     \"middle_mintemp\" : weather[\"middle_mintemp\"], \"middle_maxtemp\" : weather[\"middle_maxtemp\"], \"top_mintemp\" : weather[\"top_mintemp\"], \"top_maxtemp\" : weather[\"top_maxtemp\"]})\n\nprint (data)\n'''data inserted into table Reports'''\nfor row in data:\n    query = (\n        f\"INSERT INTO site_face_reports (resort_id_id, resort_name, todays_date, snowfall, bottom_mintemp, bottom_maxtemp, mid_mintemp, mid_maxtemp, top_mintemp, top_maxtemp)\\n\"\n        f\"VALUES ({row['resort_id']}, {row['resort_name']} ,'{row['date']}', {row['snowfall']}, {row['bottom_mintemp']}, {row['bottom_maxtemp']}, {row['middle_mintemp']}, {row['middle_maxtemp']}, {row['top_mintemp']}, {row['top_maxtemp']})\"\n    )\n    dict_cur.execute(query)\n    print(query)\n\n\n</code></pre>\n\n<p>This is the line the is trying to be inserted</p>\n\n<pre><code>{'resort_id': 14, 'resort_name': 'Mt. Baker Ski Area', 'date': '2019-07-03', 'snowfall': '0.0', 'bottom_mintemp': '46', 'bottom_maxtemp': '56', 'middle_mintemp': '47', 'middle_maxtemp': '51', 'top_mintemp': '45', 'top_maxtemp': '47'}\n</code></pre>\n\n<p>And this is the error I recieve</p>\n\n<pre><code>psycopg2.ProgrammingError: syntax error at or near \"Ski\"\nLINE 2: VALUES (14, Mt. Baker Ski Area ,'2019-07-03', 0.0, 46, 56, 4...\n</code></pre>\n\n<p>The script works completely fine when I omit the resort_name insertion, I just cant wrap my head around whats going wrong.</p>\n"}, {"tags": ["python", "statistics", "probability"], "comments": [{"owner": {"reputation": 3021, "user_id": 11606193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXr7w.jpg?s=128&g=1", "display_name": "Deepstop", "link": "https://stackoverflow.com/users/11606193/deepstop"}, "edited": false, "score": 2, "creation_date": 1562195669, "post_id": 56878903, "comment_id": 100306376, "body": "You can&#39;t really return the index of the median because if there are an even number of samples the median is the average of the n/2 and n/2+1 values which will only exist if the two values are the same. That may not correspond to any sample. I also think that <code>return ( l[(l_len-1)&#47;2] + l[(l_len+1)&#47;2] ) &#47; 2.0</code> uses the wrong elements, and it should be <code>return ( l[(l_len)&#47;2] + l[(l_len+1)&#47;2] ) &#47; 2.0</code> as it would need to use adjacent cells."}, {"owner": {"reputation": 3, "user_id": 9582466, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tlrYnPHPr7c/AAAAAAAAAAI/AAAAAAAACvc/pqClERcSv5M/photo.jpg?sz=128", "display_name": "Joaquin Moreno Antu&#241;a", "link": "https://stackoverflow.com/users/9582466/joaquin-moreno-antu%c3%b1a"}, "reply_to_user": {"reputation": 3021, "user_id": 11606193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXr7w.jpg?s=128&g=1", "display_name": "Deepstop", "link": "https://stackoverflow.com/users/11606193/deepstop"}, "edited": false, "score": 0, "creation_date": 1562353644, "post_id": 56878903, "comment_id": 100360875, "body": "Thanks Deepstop. I found a way around it with a count variable!"}], "answers": [{"tags": [], "owner": {"reputation": 28, "user_id": 11735672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/534b4cd29f9bca305932c62619d6a1d6?s=128&d=identicon&r=PG&f=1", "display_name": "galord", "link": "https://stackoverflow.com/users/11735672/galord"}, "is_accepted": true, "score": 1, "last_activity_date": 1562195594, "creation_date": 1562195594, "answer_id": 56878941, "question_id": 56878903, "link": "https://stackoverflow.com/questions/56878903/return-the-index-corresponding-to-the-median-value-from-a-list/56878941#56878941", "title": "Return the index corresponding to the median value from a list", "body": "<p>You can use <code>list.index(element)</code></p>\n"}], "owner": {"reputation": 3, "user_id": 9582466, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tlrYnPHPr7c/AAAAAAAAAAI/AAAAAAAACvc/pqClERcSv5M/photo.jpg?sz=128", "display_name": "Joaquin Moreno Antu&#241;a", "link": "https://stackoverflow.com/users/9582466/joaquin-moreno-antu%c3%b1a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 56878941, "answer_count": 1, "score": -1, "last_activity_date": 1562196682, "creation_date": 1562195190, "last_edit_date": 1562196682, "question_id": 56878903, "link": "https://stackoverflow.com/questions/56878903/return-the-index-corresponding-to-the-median-value-from-a-list", "title": "Return the index corresponding to the median value from a list", "body": "<p>I want to write a function <code>median_index(A)</code> that returns the index of the median given a distribution A ( A is a list with values associated with each index). </p>\n\n<p>I have sorted out the way to get the median value but now I want to have the position (index) where that median is when the list A is sorted.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def median_index(P):\n    l = sorted(P)\n    l_len = len(P)\n    if l_len &lt; 1:\n        return None\n    if l_len % 2 == 0 :\n        return ( l[(l_len-1)/2] + l[(l_len+1)/2] ) / 2.0\n    else:\n        return l[(l_len-1)/2]\n\nmedian_index([0.12,0.04,0.12,0.12,0.2,0.16,0.16,0.08])\n</code></pre>\n\n<p>That produces 5 as the result. 5 is the last position where 0.12. This is the index of the median 0.12 when I sort the list and calculate the median which is 0.12.</p>\n"}, {"tags": ["python", "apache-kafka", "confluent-platform"], "answers": [{"comments": [{"owner": {"reputation": 5061, "user_id": 1812993, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9cf8b9493978bce37aa55602c7d9f660?s=128&d=identicon&r=PG", "display_name": "melchoir55", "link": "https://stackoverflow.com/users/1812993/melchoir55"}, "edited": false, "score": 0, "creation_date": 1562359817, "post_id": 56896051, "comment_id": 100362698, "body": "After making these changes the log claims the message is delivered. However, the message does not show up in the topic when I inspect it and I still get some errors in the log. Would you mind checking the update I have included above?"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "reply_to_user": {"reputation": 5061, "user_id": 1812993, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9cf8b9493978bce37aa55602c7d9f660?s=128&d=identicon&r=PG", "display_name": "melchoir55", "link": "https://stackoverflow.com/users/1812993/melchoir55"}, "edited": false, "score": 0, "creation_date": 1562381834, "post_id": 56896051, "comment_id": 100365975, "body": "Inspecting the topic how? By default, you are consuming from only the latest offset, so you wouldn&#39;t see existing data"}, {"owner": {"reputation": 5061, "user_id": 1812993, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9cf8b9493978bce37aa55602c7d9f660?s=128&d=identicon&r=PG", "display_name": "melchoir55", "link": "https://stackoverflow.com/users/1812993/melchoir55"}, "edited": false, "score": 0, "creation_date": 1562484994, "post_id": 56896051, "comment_id": 100382963, "body": "I&#39;m using kafdrop to look at the topic, and then the messages in that topic. I do see the topic, but it appears to have no messages in it. <a href=\"https://github.com/HomeAdvisor/Kafdrop\" rel=\"nofollow noreferrer\">github.com/HomeAdvisor/Kafdrop</a>"}, {"owner": {"reputation": 5061, "user_id": 1812993, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9cf8b9493978bce37aa55602c7d9f660?s=128&d=identicon&r=PG", "display_name": "melchoir55", "link": "https://stackoverflow.com/users/1812993/melchoir55"}, "edited": false, "score": 1, "creation_date": 1562615832, "post_id": 56896051, "comment_id": 100423592, "body": "kafdrop was not working, switched to using kadeck and was able to see the messages."}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "reply_to_user": {"reputation": 5061, "user_id": 1812993, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9cf8b9493978bce37aa55602c7d9f660?s=128&d=identicon&r=PG", "display_name": "melchoir55", "link": "https://stackoverflow.com/users/1812993/melchoir55"}, "edited": false, "score": 0, "creation_date": 1562643819, "post_id": 56896051, "comment_id": 100429722, "body": "Sounds like a tool misconfiguration, not necessarily a problem with Kafka or your client"}], "tags": [], "owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "is_accepted": true, "score": 1, "last_activity_date": 1562296404, "last_edit_date": 1562296404, "creation_date": 1562295914, "answer_id": 56896051, "question_id": 56878898, "link": "https://stackoverflow.com/questions/56878898/confluent-kafka-hangs-on-publish/56896051#56896051", "title": "confluent_kafka hangs on publish", "body": "<p>Your topic creation request gets forwarded down into Zookeeper, and is not returned back to the producer API.</p>\n\n<p>You need to setup the Docker image differently to be able to produce and consume outside of a (Python) container </p>\n\n<p>For bitnami, I was able to get these working </p>\n\n<pre><code>ports:\n    - 9092:9092\n    - 29092:29092\nenvironment:\n    KAFKA_LISTENER_SECURITY_PROTOCOL_MAP=PLAINTEXT:PLAINTEXT,PLAINTEXT_HOST:PLAINTEXT\n    KAFKA_LISTENERS=PLAINTEXT://:29092,PLAINTEXT_HOST://:9092\n    KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://kafka:29092,PLAINTEXT_HOST://localhost:9092\n</code></pre>\n\n<p>And add your existing environment variables </p>\n"}], "owner": {"reputation": 5061, "user_id": 1812993, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9cf8b9493978bce37aa55602c7d9f660?s=128&d=identicon&r=PG", "display_name": "melchoir55", "link": "https://stackoverflow.com/users/1812993/melchoir55"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1496, "favorite_count": 0, "accepted_answer_id": 56896051, "answer_count": 1, "score": 1, "last_activity_date": 1562359907, "creation_date": 1562195094, "last_edit_date": 1562359907, "question_id": 56878898, "link": "https://stackoverflow.com/questions/56878898/confluent-kafka-hangs-on-publish", "title": "confluent_kafka hangs on publish", "body": "<p>When I try to run the hello world (<a href=\"https://github.com/confluentinc/confluent-kafka-python\" rel=\"nofollow noreferrer\">published here</a>) for <code>confluent-kafka==1.0.1</code> my process hangs on <code>p.flush()</code>. The debug message includes the following error:</p>\n\n<pre><code> mytopic [0] 1 message(s) queued but broker not up\n</code></pre>\n\n<p>This is extremely confusing to me, because the application is clearly communicating with the broker. Before attempting to publish, it successfully creates the topic, which it couldn't do without interacting with the broker. I included the script, the environment it is running in, and the full log below.</p>\n\n<p>I've no idea what could be going wrong here, so any advice would be appreciated.</p>\n\n<p>Test script:</p>\n\n<pre><code>from confluent_kafka import Producer\n\np = Producer({'bootstrap.servers': f\"{flask_application.config['KAFKA_HOST']}:9092\",\n              \"debug\": \"topic,msg,broker\"})\n\n\ndef delivery_report(err, msg):\n    \"\"\" Called once for each message produced to indicate delivery result.\n        Triggered by poll() or flush(). \"\"\"\n    if err is not None:\n        print('Message delivery failed: {}'.format(err))\n    else:\n        print('Message delivered to {} [{}]'.format(msg.topic(), msg.partition()))\n\n\nfor data in ['imadata']:\n    # Trigger any available delivery report callbacks from previous produce() calls\n    p.poll(0)\n\n    # Asynchronously produce a message, the delivery report callback\n    # will be triggered from poll() above, or flush() below, when the message has\n    # been successfully delivered or failed permanently.\n    p.produce('mytopic', data.encode('utf-8'), callback=delivery_report)\n    print('produce called')\n\n# Wait for any outstanding messages to be delivered and delivery report\n# callbacks to be triggered.\nprint('calling flush')\np.flush()\nprint('flush called')\n</code></pre>\n\n<p>docker compose for kafka/zookeeper:</p>\n\n<pre><code>version: \"3.0\"\nservices:\n  zookeeper:\n    image: 'bitnami/zookeeper:3.5.5-r11'\n    ports:\n      - '2181:2181'\n    environment:\n      - ALLOW_ANONYMOUS_LOGIN=yes\n  kafka:\n    image: 'bitnami/kafka:2.2.1-r14'\n    ports:\n      - '9092:9092'\n    environment:\n      - KAFKA_CFG_ZOOKEEPER_CONNECT=zookeeper:2181\n      - ALLOW_PLAINTEXT_LISTENER=yes\n      - KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR=1\n    depends_on:\n      - zookeeper\n</code></pre>\n\n<p>error log:</p>\n\n<pre><code>%7|1562193919.214|BRKMAIN|rdkafka#producer-1| [thrd::0/internal]: :0/internal: Enter main broker thread\n%7|1562193919.214|BROKER|rdkafka#producer-1| [thrd:app]: localhost:9092/bootstrap: Added new broker with NodeId -1\n%7|1562193919.214|CONNECT|rdkafka#producer-1| [thrd:app]: localhost:9092/bootstrap: Selected for cluster connection: bootstrap servers added (broker has 0 connection attempt(s))\n%7|1562193919.214|INIT|rdkafka#producer-1| [thrd:app]: librdkafka v1.0.1 (0x10001ff) rdkafka#producer-1 initialized (builtin.features gzip,snappy,ssl,sasl,regex,lz4,sasl_gssapi,sasl_plain,sasl_scram,plugins,zstd, GCC GXX PKGCONFIG OSXLD LIBDL PLUGINS ZLIB SSL SASL_CYRUS ZSTD HDRHISTOGRAM SNAPPY SOCKEM SASL_SCRAM CRC32C_HW, debug 0x46)\n%7|1562193919.214|BRKMAIN|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/bootstrap: Enter main broker thread\n%7|1562193919.214|CONNECT|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/bootstrap: Received CONNECT op\n%7|1562193919.214|STATE|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/bootstrap: Broker changed state INIT -&gt; TRY_CONNECT\n%7|1562193919.214|CONNECT|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/bootstrap: broker in state TRY_CONNECT connecting\n%7|1562193919.214|STATE|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/bootstrap: Broker changed state TRY_CONNECT -&gt; CONNECT\n%7|1562193919.214|TOPIC|rdkafka#producer-1| [thrd:app]: New local topic: mytopic\n%7|1562193919.214|TOPPARNEW|rdkafka#producer-1| [thrd:app]: NEW mytopic [-1] 0x7fdc0b7988e0 (at rd_kafka_topic_new0:393)\n%7|1562193919.216|CONNECT|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/bootstrap: Connecting to ipv6#[::1]:9092 (plaintext) with socket 10\n%7|1562193919.216|CONNECT|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/bootstrap: Connected to ipv6#[::1]:9092\n%7|1562193919.216|CONNECTED|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/bootstrap: Connected (#1)\n%7|1562193919.216|FEATURE|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/bootstrap: Updated enabled protocol features +ApiVersion to ApiVersion\n%7|1562193919.216|STATE|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/bootstrap: Broker changed state CONNECT -&gt; APIVERSION_QUERY\n%7|1562193919.220|FEATURE|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/bootstrap: Updated enabled protocol features to MsgVer1,ApiVersion,BrokerBalancedConsumer,ThrottleTime,Sasl,SaslHandshake,BrokerGroupCoordinator,LZ4,OffsetTime,MsgVer2,IdempotentProducer,ZSTD\n%7|1562193919.220|STATE|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/bootstrap: Broker changed state APIVERSION_QUERY -&gt; UP\n%7|1562193919.221|BROKER|rdkafka#producer-1| [thrd:main]: 455b444cbea7:9092/1001: Added new broker with NodeId 1001\n%7|1562193919.221|STATE|rdkafka#producer-1| [thrd:main]: Topic mytopic changed state unknown -&gt; exists\n%7|1562193919.221|PARTCNT|rdkafka#producer-1| [thrd:main]: Topic mytopic partition count changed from 0 to 1\n%7|1562193919.221|TOPPARNEW|rdkafka#producer-1| [thrd:main]: NEW mytopic [0] 0x7fdc0b4d8280 (at rd_kafka_topic_partition_cnt_update:620)\n%7|1562193919.221|METADATA|rdkafka#producer-1| [thrd:main]:   Topic mytopic partition 0 Leader 1001\n%7|1562193919.221|BRKDELGT|rdkafka#producer-1| [thrd:main]: mytopic [0]: delegate to broker 455b444cbea7:9092/1001 (rktp 0x7fdc0b4d8280, term 0, ref 2, remove 0)\n%7|1562193919.221|BRKDELGT|rdkafka#producer-1| [thrd:main]: mytopic [0]: broker 455b444cbea7:9092/1001 is now leader for partition with 0 messages (0 bytes) queued\n%7|1562193919.221|BRKMAIN|rdkafka#producer-1| [thrd:455b444cbea7:9092/1001]: 455b444cbea7:9092/1001: Enter main broker thread\n%7|1562193919.221|BRKMIGR|rdkafka#producer-1| [thrd:main]: Migrating topic mytopic [0] 0x7fdc0b4d8280 from (none) to 455b444cbea7:9092/1001 (sending PARTITION_JOIN to 455b444cbea7:9092/1001)\n%7|1562193919.221|PARTCNT|rdkafka#producer-1| [thrd:main]: Partitioning 1 unassigned messages in topic mytopic to 1 partitions\n%7|1562193919.221|TOPBRK|rdkafka#producer-1| [thrd:455b444cbea7:9092/1001]: 455b444cbea7:9092/1001: Topic mytopic [0]: joining broker (rktp 0x7fdc0b4d8280, 0 message(s) queued)\n%7|1562193919.221|FETCHADD|rdkafka#producer-1| [thrd:455b444cbea7:9092/1001]: 455b444cbea7:9092/1001: Added mytopic [0] to active list (1 entries, opv 0, 0 messages queued)\n%7|1562193919.221|UAS|rdkafka#producer-1| [thrd:main]: 1/1 messages were partitioned in topic mytopic\n%7|1562193919.221|TOPPAR|rdkafka#producer-1| [thrd:455b444cbea7:9092/1001]: 455b444cbea7:9092/1001: mytopic [0] 1 message(s) queued but broker not up\n%7|1562193919.221|STATE|rdkafka#producer-1| [thrd:455b444cbea7:9092/1001]: 455b444cbea7:9092/1001: Broker changed state INIT -&gt; TRY_CONNECT\n%7|1562193919.221|METADATA|rdkafka#producer-1| [thrd:main]: localhost:9092/bootstrap: 1/1 requested topic(s) seen in metadata\n%7|1562193919.221|CLUSTERID|rdkafka#producer-1| [thrd:main]: localhost:9092/bootstrap: ClusterId update \"\" -&gt; \"aOByDyDMTpuVFWCzenRfVw\"\n%7|1562193919.221|CONTROLLERID|rdkafka#producer-1| [thrd:main]: localhost:9092/bootstrap: ControllerId update -1 -&gt; 1001\n%7|1562193919.221|CONNECT|rdkafka#producer-1| [thrd:455b444cbea7:9092/1001]: 455b444cbea7:9092/1001: broker in state TRY_CONNECT connecting\n%7|1562193919.221|STATE|rdkafka#producer-1| [thrd:455b444cbea7:9092/1001]: 455b444cbea7:9092/1001: Broker changed state TRY_CONNECT -&gt; CONNECT\n%7|1562193919.222|BROKERFAIL|rdkafka#producer-1| [thrd:455b444cbea7:9092/1001]: 455b444cbea7:9092/1001: failed: err: Local: Host resolution failure: (errno: Bad address)\n%7|1562193919.222|STATE|rdkafka#producer-1| [thrd:455b444cbea7:9092/1001]: 455b444cbea7:9092/1001: Broker changed state CONNECT -&gt; DOWN\n%7|1562193919.223|TOPPAR|rdkafka#producer-1| [thrd:455b444cbea7:9092/1001]: 455b444cbea7:9092/1001: mytopic [0] 1 message(s) queued but broker not up\n%7|1562193920.217|QRYLEADER|rdkafka#producer-1| [thrd:main]: Topic mytopic [0]: leader is down: re-query\n%7|1562193920.219|METADATA|rdkafka#producer-1| [thrd:main]:   Topic mytopic partition 0 Leader 1001\n%7|1562193920.219|METADATA|rdkafka#producer-1| [thrd:main]: localhost:9092/bootstrap: 1/1 requested topic(s) seen in metadata\n%7|1562193920.223|STATE|rdkafka#producer-1| [thrd:455b444cbea7:9092/1001]: 455b444cbea7:9092/1001: Broker changed state DOWN -&gt; INIT\n%7|1562193920.223|STATE|rdkafka#producer-1| [thrd:455b444cbea7:9092/1001]: 455b444cbea7:9092/1001: Broker changed state INIT -&gt; TRY_CONNECT\n%7|1562193920.223|CONNECT|rdkafka#producer-1| [thrd:455b444cbea7:9092/1001]: 455b444cbea7:9092/1001: broker in state TRY_CONNECT connecting\n%7|1562193920.223|STATE|rdkafka#producer-1| [thrd:455b444cbea7:9092/1001]: 455b444cbea7:9092/1001: Broker changed state TRY_CONNECT -&gt; CONNECT\n%7|1562193920.224|BROKERFAIL|rdkafka#producer-1| [thrd:455b444cbea7:9092/1001]: 455b444cbea7:9092/1001: failed: err: Local: Host resolution failure: (errno: Bad address)\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>After modifying the docker compose with kafka listeners the log now reads as follows:</p>\n\n<pre><code>%7|1562359630.985|BROKER|rdkafka#producer-1| [thrd:app]: localhost:9092/bootstrap: Added new broker with NodeId -1\n%7|1562359630.985|BRKMAIN|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/bootstrap: Enter main broker thread\n%7|1562359630.985|BRKMAIN|rdkafka#producer-1| [thrd::0/internal]: :0/internal: Enter main broker thread\n%7|1562359630.985|CONNECT|rdkafka#producer-1| [thrd:app]: localhost:9092/bootstrap: Selected for cluster connection: bootstrap servers added (broker has 0 connection attempt(s))\n%7|1562359630.985|INIT|rdkafka#producer-1| [thrd:app]: librdkafka v1.0.1 (0x10001ff) rdkafka#producer-1 initialized (builtin.features gzip,snappy,ssl,sasl,regex,lz4,sasl_gssapi,sasl_plain,sasl_scram,plugins,zstd, GCC GXX PKGCONFIG OSXLD LIBDL PLUGINS ZLIB SSL SASL_CYRUS ZSTD HDRHISTOGRAM SNAPPY SOCKEM SASL_SCRAM CRC32C_HW, debug 0x46)\n%7|1562359630.985|CONNECT|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/bootstrap: Received CONNECT op\n%7|1562359630.985|STATE|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/bootstrap: Broker changed state INIT -&gt; TRY_CONNECT\n%7|1562359630.985|CONNECT|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/bootstrap: broker in state TRY_CONNECT connecting\n%7|1562359630.985|STATE|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/bootstrap: Broker changed state TRY_CONNECT -&gt; CONNECT\n%7|1562359630.985|TOPIC|rdkafka#producer-1| [thrd:app]: New local topic: anothertopic\n%7|1562359630.985|TOPPARNEW|rdkafka#producer-1| [thrd:app]: NEW anothertopic [-1] 0x7f9fe2e8c350 (at rd_kafka_topic_new0:393)\nproduce called\ncalling flush\n%7|1562359630.987|CONNECT|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/bootstrap: Connecting to ipv6#[::1]:9092 (plaintext) with socket 10\n%7|1562359630.987|CONNECT|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/bootstrap: Connected to ipv6#[::1]:9092\n%7|1562359630.987|CONNECTED|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/bootstrap: Connected (#1)\n%7|1562359630.987|FEATURE|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/bootstrap: Updated enabled protocol features +ApiVersion to ApiVersion\n%7|1562359630.987|STATE|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/bootstrap: Broker changed state CONNECT -&gt; APIVERSION_QUERY\n%7|1562359630.994|FEATURE|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/bootstrap: Updated enabled protocol features to MsgVer1,ApiVersion,BrokerBalancedConsumer,ThrottleTime,Sasl,SaslHandshake,BrokerGroupCoordinator,LZ4,OffsetTime,MsgVer2,IdempotentProducer,ZSTD\n%7|1562359630.994|STATE|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/bootstrap: Broker changed state APIVERSION_QUERY -&gt; UP\n%7|1562359630.999|STATE|rdkafka#producer-1| [thrd:main]: Topic anothertopic changed state unknown -&gt; exists\n%7|1562359630.999|PARTCNT|rdkafka#producer-1| [thrd:main]: Topic anothertopic partition count changed from 0 to 1\n%7|1562359630.999|TOPPARNEW|rdkafka#producer-1| [thrd:main]: NEW anothertopic [0] 0x7f9fe2e8d420 (at rd_kafka_topic_partition_cnt_update:620)\n%7|1562359630.999|METADATA|rdkafka#producer-1| [thrd:main]:   Topic anothertopic partition 0 Leader 1001\n%7|1562359630.999|BRKDELGT|rdkafka#producer-1| [thrd:main]: anothertopic [0]: delegate to broker (none) (rktp 0x7f9fe2e8d420, term 0, ref 2, remove 0)\n%7|1562359630.999|BRKDELGT|rdkafka#producer-1| [thrd:main]: anothertopic [0]: broker :0/internal is now leader for partition with 0 messages (0 bytes) queued\n%7|1562359630.999|BRKMIGR|rdkafka#producer-1| [thrd:main]: Migrating topic anothertopic [0] 0x7f9fe2e8d420 from (none) to :0/internal (sending PARTITION_JOIN to :0/internal)\n%7|1562359630.999|PARTCNT|rdkafka#producer-1| [thrd:main]: Partitioning 1 unassigned messages in topic anothertopic to 1 partitions\n%7|1562359630.999|TOPBRK|rdkafka#producer-1| [thrd::0/internal]: :0/internal: Topic anothertopic [0]: joining broker (rktp 0x7f9fe2e8d420, 0 message(s) queued)\n%7|1562359630.999|FETCHADD|rdkafka#producer-1| [thrd::0/internal]: :0/internal: Added anothertopic [0] to active list (1 entries, opv 0, 0 messages queued)\n%7|1562359630.999|UAS|rdkafka#producer-1| [thrd:main]: 1/1 messages were partitioned in topic anothertopic\n%7|1562359630.999|UPDATE|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/bootstrap: NodeId changed from -1 to 1001\n%7|1562359630.999|UPDATE|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/1001: Name changed from localhost:9092/bootstrap to localhost:9092/1001\n%7|1562359630.999|METADATA|rdkafka#producer-1| [thrd:main]: localhost:9092/1001: 1/1 requested topic(s) seen in metadata\n%7|1562359630.999|TOPICUPD|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: Topic anothertopic [0] migrated from broker -1 to 1001\n%7|1562359630.999|BRKDELGT|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: anothertopic [0]: delegate to broker localhost:9092/1001 (rktp 0x7f9fe2e8d420, term 0, ref 2, remove 0)\n%7|1562359630.999|BRKDELGT|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: anothertopic [0]: broker :0/internal no longer leader\n%7|1562359630.999|BRKDELGT|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: anothertopic [0]: broker localhost:9092/1001 is now leader for partition with 1 messages (7 bytes) queued\n%7|1562359630.999|BRKMIGR|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: Migrating topic anothertopic [0] 0x7f9fe2e8d420 from :0/internal to localhost:9092/1001 (sending PARTITION_LEAVE to :0/internal)\n%7|1562359630.999|LEADER|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/1001: Mapped 1 partition(s) to broker\n%7|1562359630.999|TOPBRK|rdkafka#producer-1| [thrd::0/internal]: :0/internal: Topic anothertopic [0]: leaving broker (0 messages in xmitq, next leader localhost:9092/1001, rktp 0x7f9fe2e8d420)\n%7|1562359630.999|FETCHADD|rdkafka#producer-1| [thrd::0/internal]: :0/internal: Removed anothertopic [0] from active list (0 entries, opv 0)\n%7|1562359630.999|CLUSTERID|rdkafka#producer-1| [thrd:main]: localhost:9092/1001: ClusterId update \"\" -&gt; \"81Cu9QJLRwerPnUGz-DzjA\"\n%7|1562359630.999|CONTROLLERID|rdkafka#producer-1| [thrd:main]: localhost:9092/1001: ControllerId update -1 -&gt; 1001\n%7|1562359630.999|STATE|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/1001: Broker changed state UP -&gt; UPDATE\n%7|1562359630.999|TOPBRK|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/1001: Topic anothertopic [0]: joining broker (rktp 0x7f9fe2e8d420, 1 message(s) queued)\n%7|1562359630.999|FETCHADD|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/1001: Added anothertopic [0] to active list (1 entries, opv 0, 1 messages queued)\n%7|1562359630.999|STATE|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/1001: Broker changed state UPDATE -&gt; UP\n%7|1562359630.999|PRODUCE|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/1001: anothertopic [0]: Produce MessageSet with 1 message(s) (75 bytes, ApiVersion 7, MsgVersion 2, MsgId 0, BaseSeq -1, PID{Invalid})\nMessage delivered to anothertopic [0]\nflush called\n%7|1562359631.003|MSGSET|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/1001: anothertopic [0]: MessageSet with 1 message(s) (MsgId 0, BaseSeq -1) delivered\n%7|1562359631.056|DESTROY|rdkafka#producer-1| [thrd:app]: Terminating instance (destroy flags none (0x0))\n%7|1562359631.056|DESTROY|rdkafka#producer-1| [thrd:main]: Destroy internal\n%7|1562359631.056|DESTROY|rdkafka#producer-1| [thrd:main]: Removing all topics\n%7|1562359631.056|PARTCNT|rdkafka#producer-1| [thrd:main]: Topic anothertopic partition count changed from 1 to 0\n%7|1562359631.056|REMOVE|rdkafka#producer-1| [thrd:main]: anothertopic [0] no longer reported in metadata\n%7|1562359631.056|BRKMIGR|rdkafka#producer-1| [thrd:main]: anothertopic [0] 0x7f9fe2e8d420 sending final LEAVE for removal by localhost:9092/1001\n%7|1562359631.056|TOPPARREMOVE|rdkafka#producer-1| [thrd:main]: Removing toppar anothertopic [-1] 0x7f9fe2e8c350\n%7|1562359631.056|DESTROY|rdkafka#producer-1| [thrd:main]: anothertopic [-1]: 0x7f9fe2e8c350 DESTROY_FINAL\n%7|1562359631.056|DESTROY|rdkafka#producer-1| [thrd:main]: Sending TERMINATE to localhost:9092/1001\n%7|1562359631.056|TERM|rdkafka#producer-1| [thrd::0/internal]: :0/internal: Received TERMINATE op in state INIT: 1 refcnts, 0 toppar(s), 0 active toppar(s), 0 outbufs, 0 waitresps, 0 retrybufs\n%7|1562359631.056|BROKERFAIL|rdkafka#producer-1| [thrd::0/internal]: :0/internal: failed: err: Local: Broker handle destroyed: (errno: Undefined error: 0)\n%7|1562359631.056|FAIL|rdkafka#producer-1| [thrd::0/internal]: :0/internal: Client is terminating (after 71ms in state INIT)\n%7|1562359631.056|STATE|rdkafka#producer-1| [thrd::0/internal]: :0/internal: Broker changed state INIT -&gt; DOWN\n%7|1562359631.056|TOPBRK|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/1001: Topic anothertopic [0]: leaving broker (0 messages in xmitq, next leader (none), rktp 0x7f9fe2e8d420)\n%7|1562359631.056|FETCHADD|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/1001: Removed anothertopic [0] from active list (0 entries, opv 0)\n%7|1562359631.056|TOPBRK|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/1001: Topic anothertopic [0]: no next leader, failing 0 message(s) in partition queue\n%7|1562359631.056|TERMINATE|rdkafka#producer-1| [thrd::0/internal]: :0/internal: Handle is terminating in state DOWN: 1 refcnts (0x7f9fe24fb728), 0 toppar(s), 0 active toppar(s), 0 outbufs, 0 waitresps, 0 retrybufs: failed 0 request(s) in retry+outbuf\n%7|1562359631.056|BROKERFAIL|rdkafka#producer-1| [thrd::0/internal]: :0/internal: failed: err: Local: Broker handle destroyed: (errno: Undefined error: 0)\n%7|1562359631.056|TOPPARREMOVE|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: Removing toppar anothertopic [0] 0x7f9fe2e8d420\n%7|1562359631.056|DESTROY|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: anothertopic [0]: 0x7f9fe2e8d420 DESTROY_FINAL\n%7|1562359631.056|TERM|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/1001: Received TERMINATE op in state UP: 1 refcnts, 0 toppar(s), 0 active toppar(s), 0 outbufs, 0 waitresps, 0 retrybufs\n%7|1562359631.056|BROKERFAIL|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/1001: failed: err: Local: Broker handle destroyed: (errno: Resource temporarily unavailable)\n%7|1562359631.056|FAIL|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/1001: Client is terminating (after 57ms in state UP)\n%7|1562359631.056|STATE|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/1001: Broker changed state UP -&gt; DOWN\n%7|1562359631.056|TERMINATE|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/1001: Handle is terminating in state DOWN: 1 refcnts (0x7f9fe24da128), 0 toppar(s), 0 active toppar(s), 0 outbufs, 0 waitresps, 0 retrybufs: failed 0 request(s) in retry+outbuf\n%7|1562359631.056|BROKERFAIL|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/1001: failed: err: Local: Broker handle destroyed: (errno: Resource temporarily unavailable)\n\nProcess finished with exit code 0\n</code></pre>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 1, "creation_date": 1562195443, "post_id": 56878897, "comment_id": 100306330, "body": "Please include your code (and its output) as text in the question. Code in an image can&#39;t be copied and pasted to try it ourselves, and if the linked images ever disappears from the web, your question will become incomprehensible."}, {"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 2, "creation_date": 1562195644, "post_id": 56878897, "comment_id": 100306373, "body": "That said, this may be the same issue as in <a href=\"https://stackoverflow.com/questions/30362851/attributeerror-module-object-has-no-atribute-ascii-lowercase\">this question</a>, where you have a module of your own with the same name as the library you&#39;ve installed. Perhaps try <code>print heatmap.__file__</code> to see if you&#39;re getting the module you expect?"}, {"owner": {"reputation": 47, "user_id": 11736711, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7basPxbzLDI/AAAAAAAAAAI/AAAAAAAAARs/Hm2niFK99hI/photo.jpg?sz=128", "display_name": "Javier Aceves", "link": "https://stackoverflow.com/users/11736711/javier-aceves"}, "reply_to_user": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1562885520, "post_id": 56878897, "comment_id": 100530167, "body": "thanks for you response! and console show this:  NameError: name &#39;heatmap&#39; is not defined but i try to do the same code example and do what i want."}, {"owner": {"reputation": 47, "user_id": 11736711, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7basPxbzLDI/AAAAAAAAAAI/AAAAAAAAARs/Hm2niFK99hI/photo.jpg?sz=128", "display_name": "Javier Aceves", "link": "https://stackoverflow.com/users/11736711/javier-aceves"}, "reply_to_user": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1562886617, "post_id": 56878897, "comment_id": 100530343, "body": "Hello, i import first heatmap and use <code>print heatmap.__file__</code> and then show me this <code>heatmap.pyc</code>"}, {"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1562887965, "post_id": 56878897, "comment_id": 100530616, "body": "That makes it sound like you had a local <code>heatmap.py</code> file that you&#39;ve renamed, but the compiled module file, <code>heatmap.pyc</code>, is still around and getting imported instead. Try looking for it either in the same folder as your script or in a subfolder named <code>__pycache__</code>."}, {"owner": {"reputation": 47, "user_id": 11736711, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7basPxbzLDI/AAAAAAAAAAI/AAAAAAAAARs/Hm2niFK99hI/photo.jpg?sz=128", "display_name": "Javier Aceves", "link": "https://stackoverflow.com/users/11736711/javier-aceves"}, "reply_to_user": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1562889490, "post_id": 56878897, "comment_id": 100530888, "body": "already check that and i dont have the subfolder named <code>__pycache__</code>, i uninstall and delete all library heatmap i reinstalled to and i have the same error"}, {"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1562906010, "post_id": 56878897, "comment_id": 100533610, "body": "The <code>__file__</code> string should tell you where the <code>pyc</code> file is coming from. If it is not an absolute path, then the file is located relative to the folder you&#39;re running your script in. Just delete the file, and you should be set."}], "owner": {"reputation": 47, "user_id": 11736711, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7basPxbzLDI/AAAAAAAAAAI/AAAAAAAAARs/Hm2niFK99hI/photo.jpg?sz=128", "display_name": "Javier Aceves", "link": "https://stackoverflow.com/users/11736711/javier-aceves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562884931, "creation_date": 1562195085, "last_edit_date": 1562884931, "question_id": 56878897, "link": "https://stackoverflow.com/questions/56878897/atributeerror-module-object-has-no-atribute-name", "title": "AtributeError &quot;module&quot; object has no atribute %name%", "body": "<p>Hi im installed one library but the problem work like this, in console line python recognize my import and the code i trying work fine:\n<a href=\"https://imgur.com/Cys9X0W.jpg\" rel=\"nofollow noreferrer\">https://imgur.com/Cys9X0W.jpg</a>\nand when use the \"WinPython command prompt\" for call my example and execute, the console show me this: \n<a href=\"https://imgur.com/IDv5eyH.jpg\" rel=\"nofollow noreferrer\">https://imgur.com/IDv5eyH.jpg</a></p>\n\n<p>Console show <code>AttributeError: \"module\" objec has no attribute %name%</code></p>\n\n<p>this is the code: </p>\n\n<pre><code>import heatmap\nimport random\n\nif __name__ == \"__main__\":\n    pts = []\n    for x in range(400):\n        pts.append((random.random(), random.random()))\n    print \"Processing %d points...\" % len(pts)\n    hm = heatmap.Heatmap()\nimg = hm.heatmap(pts).save(\"classic.png\")\n</code></pre>\n"}, {"tags": ["python", "function", "parameters"], "answers": [{"tags": [], "owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "is_accepted": true, "score": 1, "last_activity_date": 1562194961, "creation_date": 1562194961, "answer_id": 56878877, "question_id": 56878856, "link": "https://stackoverflow.com/questions/56878856/how-do-you-use-a-function-as-a-parameter-in-a-function/56878877#56878877", "title": "How do you use a function as a parameter in a function?", "body": "<p>I don't know want error you get but I see mistake: </p>\n\n<p>you have to assign result from <code>remove(sentence)</code> to variable and use this result in <code>convertList()</code></p>\n\n<pre><code>result = remove(sentence)\n\nconvertList(result)\n</code></pre>\n\n<p>or you have to use function with argument <code>remove(sentence)</code> directly in <code>convertList()</code></p>\n\n<pre><code>convertList(remove(sentence))\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10184983, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mf081E0J56M/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qdZltK_82mhNGKim8gA4EhzhS2Ew/mo/photo.jpg?sz=128", "display_name": "cdelaura", "link": "https://stackoverflow.com/users/10184983/cdelaura"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 56878877, "answer_count": 1, "score": -1, "last_activity_date": 1562197376, "creation_date": 1562194745, "last_edit_date": 1562197376, "question_id": 56878856, "link": "https://stackoverflow.com/questions/56878856/how-do-you-use-a-function-as-a-parameter-in-a-function", "title": "How do you use a function as a parameter in a function?", "body": "<p>I am trying to use a function as a parameter in another function but I keep getting an error. Can you guys please take a look at my code.</p>\n\n<pre><code>#Program used to reverse the order of a string.\n\nsentence = input(\"Write a sentence. After you click enter it will be returned in reverse order. \")\nuserInputList = [ ]\nreverseInputList = [ ]\n\n#remove any periods from the sentence.\ndef remove(sentence):\n  stripped = sentence.replace(\".\", \"\")\n  return stripped\n\n#print string in reverse order\ndef convertList(stripped):\n  userInputList = stripped.split()\n  reverseInputList = userInputList[::-1]\n\n  for i in range(len(reverseInputList)):\n   print (reverseInputList[i], end=\" \")\n\n\nremove(sentence)\n\nconvertList(remove())\n</code></pre>\n"}, {"tags": ["python", "bash", "node-modules"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1562195142, "post_id": 56878854, "comment_id": 100306272, "body": "By default aliases are only expanded in interactive shells."}, {"owner": {"reputation": 3523, "user_id": 7820956, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/0dc587fdd6cdf1980d081c028387f48d?s=128&d=identicon&r=PG&f=1", "display_name": "hellofanengineer", "link": "https://stackoverflow.com/users/7820956/hellofanengineer"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1562195181, "post_id": 56878854, "comment_id": 100306278, "body": "@Barmar oh how do we expand it to default bash profile or somewhere???"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1562195277, "post_id": 56878854, "comment_id": 100306296, "body": "<code>shopt -s expand_aliases</code> will enable aliases in a non-interactive shell."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1562195300, "post_id": 56878854, "comment_id": 100306300, "body": "Why don&#39;t you just put <code>&#47;usr&#47;local&#47;bin</code> in your <code>$PATH</code> instead of using an alias?"}, {"owner": {"reputation": 10260, "user_id": 7939871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1199ba5dde05e4083823a058c5ac6bed?s=128&d=identicon&r=PG", "display_name": "L&#233;a Gris", "link": "https://stackoverflow.com/users/7939871/l%c3%a9a-gris"}, "edited": false, "score": 1, "creation_date": 1562195302, "post_id": 56878854, "comment_id": 100306301, "body": "Maybe you could declare a function rather than an alias"}, {"owner": {"reputation": 3523, "user_id": 7820956, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/0dc587fdd6cdf1980d081c028387f48d?s=128&d=identicon&r=PG&f=1", "display_name": "hellofanengineer", "link": "https://stackoverflow.com/users/7820956/hellofanengineer"}, "edited": false, "score": 0, "creation_date": 1562195337, "post_id": 56878854, "comment_id": 100306310, "body": "# .bashrc  # Source global definitions if [ -f /etc/bashrc ]; then         . /etc/bashrc fi  alias abs=&#39;~/local/bin/abs&#39;"}, {"owner": {"reputation": 3523, "user_id": 7820956, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/0dc587fdd6cdf1980d081c028387f48d?s=128&d=identicon&r=PG&f=1", "display_name": "hellofanengineer", "link": "https://stackoverflow.com/users/7820956/hellofanengineer"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1562195475, "post_id": 56878854, "comment_id": 100306335, "body": "@Barmar ok? I&#39;m in /user/local/bin and I see <code>bin</code>, jq, node, nodejs, npx, python; <code>abs</code> was originally installed by npm. Now I have a local as <code>~&#47;local&#47;bin&#47;abs</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1562195517, "post_id": 56878854, "comment_id": 100306344, "body": "So put <code>~&#47;local&#47;bin</code> in your <code>$PATH</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1562195573, "post_id": 56878854, "comment_id": 100306355, "body": "In your <code>.profile</code>, put <code>PATH=~&#47;local&#47;bin:$PATH</code>"}, {"owner": {"reputation": 3523, "user_id": 7820956, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/0dc587fdd6cdf1980d081c028387f48d?s=128&d=identicon&r=PG&f=1", "display_name": "hellofanengineer", "link": "https://stackoverflow.com/users/7820956/hellofanengineer"}, "edited": false, "score": 0, "creation_date": 1562195626, "post_id": 56878854, "comment_id": 100306365, "body": "just added it in .bashrc."}, {"owner": {"reputation": 3523, "user_id": 7820956, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/0dc587fdd6cdf1980d081c028387f48d?s=128&d=identicon&r=PG&f=1", "display_name": "hellofanengineer", "link": "https://stackoverflow.com/users/7820956/hellofanengineer"}, "edited": false, "score": 0, "creation_date": 1562195933, "post_id": 56878854, "comment_id": 100306430, "body": "damn it worked? why wasn&#39;t it working before ha"}, {"owner": {"reputation": 3523, "user_id": 7820956, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/0dc587fdd6cdf1980d081c028387f48d?s=128&d=identicon&r=PG&f=1", "display_name": "hellofanengineer", "link": "https://stackoverflow.com/users/7820956/hellofanengineer"}, "edited": false, "score": 0, "creation_date": 1562195942, "post_id": 56878854, "comment_id": 100306432, "body": "Spent literally a whole day on this"}], "owner": {"reputation": 3523, "user_id": 7820956, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/0dc587fdd6cdf1980d081c028387f48d?s=128&d=identicon&r=PG&f=1", "display_name": "hellofanengineer", "link": "https://stackoverflow.com/users/7820956/hellofanengineer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1562194737, "creation_date": 1562194737, "question_id": 56878854, "link": "https://stackoverflow.com/questions/56878854/alias-doesnt-affect-python-execution-environment-in-bash", "title": "alias doesn&#39;t affect python execution environment in bash", "body": "<p>I'm getting error while executing my shell script</p>\n\n<pre><code>alias abs='~/local/bin/abs'\necho $(which abs)\nsource /home/rundeck/.bashrc # included alias abs as well. I'm just sourcing it twice.\npython batch_update_autobuilds.py &lt;- I'm getting an error here\n</code></pre>\n\n<p><code>($which abs)</code> prints,,,</p>\n\n<pre><code>alias abs='~/local/bin/abs'\n        ~/local/bin/abs\n</code></pre>\n\n<p>batch_update_autobuilds.py source code (Where the error is coming from)</p>\n\n<pre><code>abscommand = \"abs update --test\" // --test tag has been recently updated. \ncommandline = subprocess.Popen((abscommand))\noutput, error = commandline.communicate()\nif error: &lt;- error got caught here. //So it says no option available for --test.\n</code></pre>\n\n<p>Problem:</p>\n\n<ul>\n<li>Somehow when I call the bash execution command <code>commandline.communicate()</code>, <strong>it calls the old <code>abs</code> which doesn't have <code>--test</code> option</strong>.</li>\n</ul>\n\n<p>Possible Solution(need help):</p>\n\n<ul>\n<li>I copied <code>abs</code> execution file to <code>~/local/bin</code> and I want to force python execution to use the <code>abs</code> in <code>~/local/bin</code>; alias didn't work in this case.</li>\n</ul>\n"}, {"tags": ["python", "regex", "regex-lookarounds"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1562195376, "post_id": 56878850, "comment_id": 100306317, "body": "That&#39;s not possible. A regexp always matches a contiguous substring."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 1, "creation_date": 1562199302, "post_id": 56878850, "comment_id": 100306999, "body": "All regex engines by default, advance the current (search) position by 1 if it matched at the same point as the last match. You could do something tricky with a lookbehind, but it requires a fixed value progressing using alternations where the number of alternation is fixed with a corresponding number of capture groups. In PCRE you have a chance to filter the number of groups to 2, but the alternations stand. In Dot-net you can use a single lookbehind and no need for alternations <code>(?&lt;^(.).*)(.)</code> walla .."}], "answers": [{"comments": [{"owner": {"reputation": 4473, "user_id": 3002273, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/14663c07f99bd2fdc191b05db9d3e900?s=128&d=identicon&r=PG&f=1", "display_name": "ignorance", "link": "https://stackoverflow.com/users/3002273/ignorance"}, "edited": false, "score": 0, "creation_date": 1562195865, "post_id": 56878963, "comment_id": 100306414, "body": "So <code>(A).*?(\\d)</code> will match [A, 0]. If you make the middle greedy you get the 4. Regex can&#39;t sort of just iterate from 0 to 4 in a non-greedy fashion?"}, {"owner": {"reputation": 1348, "user_id": 6933039, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Sn3RU_eNCJA/AAAAAAAAAAI/AAAAAAAAAFs/IeOaIPSOW1A/photo.jpg?sz=128", "display_name": "brandonwang", "link": "https://stackoverflow.com/users/6933039/brandonwang"}, "reply_to_user": {"reputation": 4473, "user_id": 3002273, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/14663c07f99bd2fdc191b05db9d3e900?s=128&d=identicon&r=PG&f=1", "display_name": "ignorance", "link": "https://stackoverflow.com/users/3002273/ignorance"}, "edited": false, "score": 0, "creation_date": 1562197200, "post_id": 56878963, "comment_id": 100306677, "body": "Don&#39;t think it&#39;s possible. <code>(A)*(\\d)</code> will get <code>[(&#39;&#39;, &#39;0&#39;), (&#39;&#39;, &#39;1&#39;), (&#39;&#39;, &#39;2&#39;), (&#39;&#39;, &#39;3&#39;), (&#39;&#39;, &#39;4&#39;)]</code> which is really close."}], "tags": [], "owner": {"reputation": 1348, "user_id": 6933039, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Sn3RU_eNCJA/AAAAAAAAAAI/AAAAAAAAAFs/IeOaIPSOW1A/photo.jpg?sz=128", "display_name": "brandonwang", "link": "https://stackoverflow.com/users/6933039/brandonwang"}, "is_accepted": false, "score": 0, "last_activity_date": 1562195778, "creation_date": 1562195778, "answer_id": 56878963, "question_id": 56878850, "link": "https://stackoverflow.com/questions/56878850/capture-same-line-multiple-times/56878963#56878963", "title": "Capture same line multiple times", "body": "<p>That is not possible. But you can generate such a list easily.</p>\n\n<pre><code>x = re.findall(\"A*[0-9]\", \"A 0 1 2 3 4\")\nresult = [[\"A\", str(c)] for c in x]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 11005469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/942b19f33ebc07372c8a4630d605a694?s=128&d=identicon&r=PG&f=1", "display_name": "Tulasi", "link": "https://stackoverflow.com/users/11005469/tulasi"}, "is_accepted": false, "score": 1, "last_activity_date": 1562216964, "last_edit_date": 1562216964, "creation_date": 1562216516, "answer_id": 56880922, "question_id": 56878850, "link": "https://stackoverflow.com/questions/56878850/capture-same-line-multiple-times/56880922#56880922", "title": "Capture same line multiple times", "body": "<pre><code>    dd ='A01234'\n    Result = [[dd[0],j] for i,j in enumerate(dd) if i!=0]\n    #Output = [['A', '0'], ['A', '1'], ['A', '2'], ['A', '3'], ['A', '4']]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2679, "user_id": 6194097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eJOoV.jpg?s=128&g=1", "display_name": "Kushan Gunasekera", "link": "https://stackoverflow.com/users/6194097/kushan-gunasekera"}, "is_accepted": false, "score": 0, "last_activity_date": 1562417028, "creation_date": 1562417028, "answer_id": 56914194, "question_id": 56878850, "link": "https://stackoverflow.com/questions/56878850/capture-same-line-multiple-times/56914194#56914194", "title": "Capture same line multiple times", "body": "<p>Try this, I did it with two Python <a href=\"https://docs.python.org/3/howto/regex.html\" rel=\"nofollow noreferrer\"><code>regex</code></a>.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import re\n\ntext = \"A 0 1 2 3 4\"  # your text here\n\n\"\"\"\nselect first character which belongs to alphabetically\nbetween a and z, lower case OR upper case. If you need\nto match only upper case character, just change pattern1\ninto \"^[A-Z]\"\n\npattern2 will match all the string contains with digits\nwhich mean numbers from 0-9\n\"\"\"\npattern1 = \"^[A-Za-z]\"\npattern2 = \"\\d\"\n\nprint([[re.search(pattern1, text).group(0), a] for a in re.findall(pattern2, text)])\n</code></pre>\n\n<p>Output is,</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>[['A', '0'], ['A', '1'], ['A', '2'], ['A', '3'], ['A', '4']]\n</code></pre>\n\n<p>Now you can change first character as you wish with any number of digits.</p>\n"}], "owner": {"reputation": 4473, "user_id": 3002273, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/14663c07f99bd2fdc191b05db9d3e900?s=128&d=identicon&r=PG&f=1", "display_name": "ignorance", "link": "https://stackoverflow.com/users/3002273/ignorance"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1562417028, "creation_date": 1562194728, "last_edit_date": 1562195482, "question_id": 56878850, "link": "https://stackoverflow.com/questions/56878850/capture-same-line-multiple-times", "title": "Capture same line multiple times", "body": "<p>Given text like,</p>\n\n<blockquote>\n  <p>A 0 1 2 3 4</p>\n</blockquote>\n\n<p>I want to match the A with each number as a separate match like,</p>\n\n<pre><code>re.findall(some_regex, \"A 0 1 2 3 4\")\n</code></pre>\n\n<p>would return,</p>\n\n<pre><code>[\n  [\"A\", \"0\"],\n  [\"A\", \"1\"],\n  [\"A\", \"2\"],\n  [\"A\", \"3\"],\n  [\"A\", \"4\"],\n]\n</code></pre>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 931, "user_id": 11161686, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JRO14-5CJkk/AAAAAAAAAAI/AAAAAAAAAYk/XPD0q-CC3vI/photo.jpg?sz=128", "display_name": "Tom Lubenow", "link": "https://stackoverflow.com/users/11161686/tom-lubenow"}, "is_accepted": false, "score": 0, "last_activity_date": 1562195339, "last_edit_date": 1562195339, "creation_date": 1562195017, "answer_id": 56878890, "question_id": 56878845, "link": "https://stackoverflow.com/questions/56878845/defining-multi-dimension-dictionary-dynamically/56878890#56878890", "title": "Defining Multi-Dimension Dictionary Dynamically", "body": "<p>You can use a <code>defaultdict</code> and set the default value to a new <code>defaultdict</code>.\n<a href=\"https://docs.python.org/3/library/collections.html#collections.defaultdict\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/collections.html#collections.defaultdict</a></p>\n\n<p>Related question: <a href=\"https://stackoverflow.com/questions/2600790/multiple-levels-of-collection-defaultdict-in-python?noredirect=1&amp;lq=1\">Multiple levels of &#39;collection.defaultdict&#39; in Python</a></p>\n"}], "owner": {"reputation": 979, "user_id": 2700592, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/645489509/picture?type=large", "display_name": "Nicolas Racine", "link": "https://stackoverflow.com/users/2700592/nicolas-racine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1562195339, "creation_date": 1562194680, "question_id": 56878845, "link": "https://stackoverflow.com/questions/56878845/defining-multi-dimension-dictionary-dynamically", "title": "Defining Multi-Dimension Dictionary Dynamically", "body": "<p>Im trying to declare a multi dimension dictionary and I find it tedious to always having to create a variable with my inner dict to then assign it to its parent value dict</p>\n\n<p>Coming from PHP Im now wondering if im simply missing something.</p>\n\n<p>Here is what I mean</p>\n\n<p>I used to do this alot</p>\n\n<pre><code>$var['nicolas']['age'] = 25;\n$var['nicolas']['isMale'] = True;\n$var['some_one_else']['age'] = 30;\n$var['some_one_else']['isMale'] = False\n</code></pre>\n\n<p>I really enjoyed this because it allows me to create loops and dynamically add new key/values.</p>\n\n<p>For example</p>\n\n<pre><code>$team_members = array(\n    \"someDepartment\" =&gt; array(\n        \"Nicolas\" =&gt; array(\n            'Title' =&gt; 'ConfusedProgrammer',\n            'Age' =&gt; 25,\n            'Sex' =&gt; 'm'\n        )\n    ),\n    \"OtherDepartment\" =&gt; array(\n        \"otherGuy\" =&gt; array(\n            'Title' =&gt; 'Manager',\n            'Age' =&gt; 30,\n            'Sex' =&gt; 'f'\n        )\n    )\n);\n\n$response = array();\nforeach($team_members as $deptName =&gt; $deptVal){\n    foreach($deptVal as $cName =&gt; $cVal){\n        $response[$cName]['Age'] = $cVal['Age'];\n        $response[$cName]['isMale'] = (strtolower($cVal['Sex']) == 'm'?True:False);\n    }\n}\n</code></pre>\n\n<p>In python the way I would achieve that would be something similar to the following.</p>\n\n<pre><code>parent_dict = {}\n\nparent_dict['test'] = {}\nparent_dict['test']['hello'] = 'It works'\n\nparent_dict['test2']['other_way_to_say_hello'] = 'Does not work    :(   '\n</code></pre>\n\n<p>What Im trying to do, is avoid having to declare the new dimension.</p>\n\n<p>Now after researching about this, I realize that the behavior I'm looking for might not be possible at all.</p>\n\n<p>but was hopping to see how you guys deal with those type of situation.</p>\n\n<p>I am very new to python and to date enjoy it a lot, But I feel like dealing with this type of problem often and does slow my progress down significantly.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "django", "chatterbot"], "answers": [{"tags": [], "owner": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "is_accepted": true, "score": 0, "last_activity_date": 1562196418, "creation_date": 1562196418, "answer_id": 56879026, "question_id": 56878821, "link": "https://stackoverflow.com/questions/56878821/how-to-get-urls-and-views-correct-with-this-code/56879026#56879026", "title": "How to get urls and views correct with this code", "body": "<p>The module is <code>views</code>, and the function is <code>home</code>, so:</p>\n\n<pre><code>from django.contrib import admin\nfrom sili import views\n\nurlpatterns = [\n    path('admin/', admin.site.urls),\n    path('', views.home),  # &lt;-\n]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 9783105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78bd2176690c12acfacf2146a99e3761?s=128&d=identicon&r=PG", "display_name": "mohmmad reza asgari", "link": "https://stackoverflow.com/users/9783105/mohmmad-reza-asgari"}, "is_accepted": false, "score": 0, "last_activity_date": 1562196805, "creation_date": 1562196805, "answer_id": 56879056, "question_id": 56878821, "link": "https://stackoverflow.com/questions/56878821/how-to-get-urls-and-views-correct-with-this-code/56879056#56879056", "title": "How to get urls and views correct with this code", "body": "<p>in urls.py you should design your route \nyou use home.views but you not import home and home not have views function \ncorrect version is </p>\n\n<pre><code>urlpatterns = [\n        path('admin/', admin.site.urls),\n        path('', home.views),\n    ]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11688196, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jEhwtzcJfyM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfdAiMRmpWwFbEmlBQVzwemJMqDRQ/mo/photo.jpg?sz=128", "display_name": "wu ajin", "link": "https://stackoverflow.com/users/11688196/wu-ajin"}, "is_accepted": false, "score": 0, "last_activity_date": 1562204346, "creation_date": 1562204346, "answer_id": 56879660, "question_id": 56878821, "link": "https://stackoverflow.com/questions/56878821/how-to-get-urls-and-views-correct-with-this-code/56879660#56879660", "title": "How to get urls and views correct with this code", "body": "<p>please from .views import home,and this code is not suggest ,it is not easy to read,for example</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def home(request):\n    context = {'title': 'Sili Chatbot Version 1.0'}\n    return render(request,\"home.html\", context)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11704669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e90e597e1a7df3b8a029186a0ed8266?s=128&d=identicon&r=PG&f=1", "display_name": "cyware", "link": "https://stackoverflow.com/users/11704669/cyware"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 56879026, "answer_count": 3, "score": 0, "last_activity_date": 1562204346, "creation_date": 1562194476, "question_id": 56878821, "link": "https://stackoverflow.com/questions/56878821/how-to-get-urls-and-views-correct-with-this-code", "title": "How to get urls and views correct with this code", "body": "<p>Hey guys I'm trying to set up my chatterbot to work with Django but for some reason I can't seem to get the urls and views correct for Django to show the chatbot on my server. Django 2.1.1 is the version I'm running on with Python 3.7 as my interpreter. My chatbot is in the same project in a folder called Sili with it's own views.py and urls.py in that folder.</p>\n\n<p>I have tried this but no luck </p>\n\n<pre><code>    from django.contrib import admin\n    from sili import views\n\n    urlpatterns = [\n        path('admin/', admin.site.urls),\n        path('', home.views),\n    ]\n\nthis is what is in my views.py \n\n    from django.shortcuts import render,render_to_response\n    from django.http import HttpResponse\n    import json\n    from django.views.decorators.csrf import csrf_exempt\n\n    from chatterbot import ChatBot\n    # from chatterbot.trainers import ChatterBotCorpusTrainer\n  chatbot=ChatBot('Sili',trainer='chatterbot.trainers.ChatterBotCorpusTrainer')\n\n# Train based on the english corpus\nchatbot.train(\"chatterbot.corpus.english\")\n\n\n\n@csrf_exempt\ndef get_response(request):\n    response = {'status': None}\n\n    if request.method == 'POST':\n        data = json.loads(request.body)\n        message = data['message']\n\n        chat_response = chatbot.get_response(message).text\n        response['message'] = {'text': chat_response, 'user': False, 'chat_bot': True}\n        response['status'] = 'ok'\n\n    else:\n        response['error'] = 'no post data found'\n\n    return HttpResponse(\n        json.dumps(response),\n            content_type=\"application/json\"\n        )\n\n\ndef home(request, template_name=\"home.html\"):\n    context = {'title': 'Sili Chatbot Version 1.0'}\n    return render_to_response(template_name, context)\n</code></pre>\n\n<p>what do I add to the urls.py so that it shows on the server? This is what I have so far </p>\n\n<pre><code>from django.contrib import admin\nfrom sili import views\n\nurlpatterns = [\n    path('admin/', admin.site.urls),\n]\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1214, "user_id": 4309985, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/d9a46a23b2bc57d11cf9c3adda670dea?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Fan", "link": "https://stackoverflow.com/users/4309985/andrew-fan"}, "edited": false, "score": 1, "creation_date": 1562194513, "post_id": 56878795, "comment_id": 100306137, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11505140, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iTKaghQfMCQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rflaEfb2dXcNeb08xi4Y76Bcx3fQA/mo/photo.jpg?sz=128", "display_name": "James Rich", "link": "https://stackoverflow.com/users/11505140/james-rich"}, "is_accepted": false, "score": 0, "last_activity_date": 1562196546, "last_edit_date": 1562196546, "creation_date": 1562194651, "answer_id": 56878840, "question_id": 56878795, "link": "https://stackoverflow.com/questions/56878795/extracting-files-from-directory-via-loop/56878840#56878840", "title": "Extracting files from directory via loop", "body": "<p>Maybe you should incorporate a split function into the code:</p>\n\n<pre><code>var=path.split('whatever letter separates them')\n</code></pre>\n\n<p>Then print out that variable.</p>\n"}, {"tags": [], "owner": {"reputation": 127, "user_id": 5591285, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/04dc63014cf4da2eb7ea8fe7961be348?s=128&d=identicon&r=PG&f=1", "display_name": "R L W", "link": "https://stackoverflow.com/users/5591285/r-l-w"}, "is_accepted": true, "score": 2, "last_activity_date": 1562194881, "creation_date": 1562194881, "answer_id": 56878867, "question_id": 56878795, "link": "https://stackoverflow.com/questions/56878795/extracting-files-from-directory-via-loop/56878867#56878867", "title": "Extracting files from directory via loop", "body": "<p>A simple solution would be to loop through the files returned by <code>glob.glob(path)</code>. For example if </p>\n\n<p><code>files = glob.glob(\"Z:\\T\\Al8787\\Box\\EAST\\OT\\\\ABB files/2019/*[0-9].txt\")</code> </p>\n\n<p>you could have</p>\n\n<p><code>cleaned_files = [file for file in files if \"orig\" not in files]</code></p>\n\n<p>This would remove every item in files that contains the substring <code>orig</code></p>\n"}], "owner": {"reputation": 393, "user_id": 9563772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27cf6a4033ca3de6c938ea1b701abf02?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler", "link": "https://stackoverflow.com/users/9563772/tyler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "closed_date": 1562213347, "accepted_answer_id": 56878867, "answer_count": 2, "score": 0, "last_activity_date": 1562203361, "creation_date": 1562194222, "last_edit_date": 1562203361, "question_id": 56878795, "link": "https://stackoverflow.com/questions/56878795/extracting-files-from-directory-via-loop", "closed_reason": "Duplicate", "title": "Extracting files from directory via loop", "body": "<p>I am running a loop which needs to access circa 200 files in the directory.</p>\n\n<p>In the folder - the format of the files range as follows:</p>\n\n<pre><code>Excel_YYYYMMDD.txt\nExcel_YYYYMMDD_V2.txt\nExcel_YYYYMMDD_orig.txt\n</code></pre>\n\n<p>I only need to extract the first one - that is YYYYMMDD.txt, and nothing else</p>\n\n<p>I am using glob.glob to access the directory where I specified my path name as follows:</p>\n\n<pre><code>path = \"Z:\\T\\Al8787\\Box\\EAST\\OT\\\\ABB files/2019/*[0-9].txt\"\n</code></pre>\n\n<p>However the code also extracts the .Excel_YYYYMMDD_orig.txt file too</p>\n\n<p>Appreciate assistance on how to modify code to only extract desired files.</p>\n"}, {"tags": ["python", "list", "numpy", "sum"], "comments": [{"owner": {"reputation": 209, "user_id": 5499487, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8869b8494fd0785e1ae11f838749c2b5?s=128&d=identicon&r=PG&f=1", "display_name": "scoopfaze", "link": "https://stackoverflow.com/users/5499487/scoopfaze"}, "edited": false, "score": 0, "creation_date": 1562193825, "post_id": 56878718, "comment_id": 100305994, "body": "The methodology is correct; try it for range = 100 and you&#39;ll see it works just fine. As mentioned below, there&#39;s a difference in how NumPy handles certain data."}, {"owner": {"reputation": 43423, "user_id": 1011724, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/2JAXi.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/1011724/dan"}, "edited": false, "score": 0, "creation_date": 1562193948, "post_id": 56878718, "comment_id": 100306024, "body": "What version of python and numpy are you using? An upgrade will probably fix this. Failing that <code>x_array = np.array(x, dtype=&#39;int64&#39;)</code>"}, {"owner": {"reputation": 11, "user_id": 11736645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78261f55fa6de3c2df1486bbe5f76e60?s=128&d=identicon&r=PG&f=1", "display_name": "Manuel Xavier", "link": "https://stackoverflow.com/users/11736645/manuel-xavier"}, "edited": false, "score": 0, "creation_date": 1562194339, "post_id": 56878718, "comment_id": 100306107, "body": "If a use x_array = np.array(x, dtype=&#39;int64&#39;) I get the right result! Thank you"}], "answers": [{"comments": [{"owner": {"reputation": 62191, "user_id": 3993662, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/20ce5cf17ddc888ba9d7b5e639f040b2?s=128&d=identicon&r=PG&f=1", "display_name": "baao", "link": "https://stackoverflow.com/users/3993662/baao"}, "edited": false, "score": 3, "creation_date": 1562193764, "post_id": 56878752, "comment_id": 100305982, "body": "Which versions does your answer refer to? running the code on python 3.7.3 yields the same results for both methods"}, {"owner": {"reputation": 11, "user_id": 11736645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78261f55fa6de3c2df1486bbe5f76e60?s=128&d=identicon&r=PG&f=1", "display_name": "Manuel Xavier", "link": "https://stackoverflow.com/users/11736645/manuel-xavier"}, "edited": false, "score": 0, "creation_date": 1562194161, "post_id": 56878752, "comment_id": 100306069, "body": "Thank you. I&#39;m using Python 3.7.3 (default, Mar 27 2019, 17:13:21) [MSC v.1915 64 bit (AMD64)] on win32"}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 2, "last_activity_date": 1562193662, "creation_date": 1562193662, "answer_id": 56878752, "question_id": 56878718, "link": "https://stackoverflow.com/questions/56878718/why-numpy-sum-does-not-give-me-the-right-result/56878752#56878752", "title": "Why numpy.sum does not give me the right result?", "body": "<p>Your NumPy defaults to standard 32-bit integers; Python will switch to indefinitely long integers as needed.</p>\n\n<p>You got bitten by overflow/wraparound.</p>\n\n<pre><code>4999950000 % (2**32)   ==&gt;   704982704\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11736645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78261f55fa6de3c2df1486bbe5f76e60?s=128&d=identicon&r=PG&f=1", "display_name": "Manuel Xavier", "link": "https://stackoverflow.com/users/11736645/manuel-xavier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1562196622, "creation_date": 1562193446, "last_edit_date": 1562196622, "question_id": 56878718, "link": "https://stackoverflow.com/questions/56878718/why-numpy-sum-does-not-give-me-the-right-result", "title": "Why numpy.sum does not give me the right result?", "body": "<p>The sum of a standard python list say x=list(range(100000)) does not coincide with a sum of the same sequence  x_array=np.array(x). In the first case I obtain sum(x)=4999950000, which is the correct result. Using numpy sum I obtain np.sum(x_array))=704982704.  This troubles me because i am a beginner with this language. Does anyone have an explanation for this difference? Thank you. The code is</p>\n\n<pre><code>import numpy as np\nx=list(range(100000))\nprint(\"sum x using standard python function = \",sum(x))\nx_array=np.array(x)\nprint(\"sum x using numpy =\",np.sum(x_array))\n</code></pre>\n"}, {"tags": ["python", "arrays", "numpy", "machine-learning"], "answers": [{"tags": [], "owner": {"reputation": 1486, "user_id": 6828711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G2j21.png?s=128&g=1", "display_name": "NaN", "link": "https://stackoverflow.com/users/6828711/nan"}, "is_accepted": false, "score": 1, "last_activity_date": 1562202367, "creation_date": 1562202367, "answer_id": 56879517, "question_id": 56878707, "link": "https://stackoverflow.com/questions/56878707/how-would-i-calculate-the-l2-or-euclidean-distance-between-rows-of-different-2d/56879517#56879517", "title": "how would I calculate the L2 or euclidean distance between rows of different 2D vectors", "body": "<p>I like this one since it works for 1, 2 and 3D arrays</p>\n\n<pre><code>def e_dist(a, b, metric='euclidean'):\n    \"\"\"Distance calculation for 1D, 2D and 3D points using einsum\n\n    preprocessing :\n        use `_view_`, `_new_view_` or `_reshape_` with structured/recarrays\n\n    Parameters\n    ----------\n    a, b : array like\n        Inputs, list, tuple, array in 1, 2 or 3D form\n    metric : string\n        euclidean ('e', 'eu'...), sqeuclidean ('s', 'sq'...),\n\n    Notes\n    -----\n    mini e_dist for 2d points array and a single point\n\n    &gt;&gt;&gt; def e_2d(a, p):\n            diff = a - p[np.newaxis, :]  # a and p are ndarrays\n            return np.sqrt(np.einsum('ij,ij-&gt;i', diff, diff))\n\n    See Also\n    --------\n    cartesian_dist : function\n        Produces pairs of x,y coordinates and the distance, without duplicates.\n    \"\"\"\n    a = np.asarray(a)\n    b = np.atleast_2d(b)\n    a_dim = a.ndim\n    b_dim = b.ndim\n    if a_dim == 1:\n        a = a.reshape(1, 1, a.shape[0])\n    if a_dim &gt;= 2:\n        a = a.reshape(np.prod(a.shape[:-1]), 1, a.shape[-1])\n    if b_dim &gt; 2:\n        b = b.reshape(np.prod(b.shape[:-1]), b.shape[-1])\n    diff = a - b\n    dist_arr = np.einsum('ijk,ijk-&gt;ij', diff, diff)\n    if metric[:1] == 'e':\n        dist_arr = np.sqrt(dist_arr)\n    dist_arr = np.squeeze(dist_arr)\n    return dist_arr\n</code></pre>\n\n<p>Yielding</p>\n\n<pre><code>a = np.random.rand(3, 2) \nb = np.random.rand(5, 2)\ne_dist(a, b)\narray([[0.62, 0.45, 0.88, 0.7 , 0.33],\n       [0.46, 0.57, 0.47, 0.25, 0.4 ],\n       [0.94, 0.68, 0.16, 0.35, 0.62]])\n</code></pre>\n\n<p>and for...</p>\n\n<pre><code>a = np.random.rand(2, 3, 2) \nb = np.random.rand(2, 5, 2)\ne_dist(a, b)\narray([[0.72, 0.39, 0.89, 0.25, 0.29, 0.41, 0.31, 0.6 , 0.8 , 0.39],\n       [0.25, 0.26, 0.69, 0.45, 0.45, 0.63, 0.57, 0.39, 0.25, 0.78],\n       [0.28, 0.27, 0.74, 0.47, 0.46, 0.69, 0.62, 0.45, 0.25, 0.84],\n       [0.43, 0.48, 0.47, 0.52, 0.54, 0.2 , 0.17, 0.21, 0.55, 0.38],\n       [0.15, 0.36, 0.54, 0.51, 0.52, 0.52, 0.48, 0.23, 0.23, 0.69],\n       [0.87, 0.76, 0.78, 0.67, 0.71, 0.26, 0.28, 0.64, 0.99, 0.06]])\n</code></pre>\n\n<p>And to compare numpy and scipy variants for 2d</p>\n\n<pre><code>from scipy.spatial import distance_matrix\ndistance_matrix(a, b)\narray([[0.87, 0.89, 0.91, 0.07, 0.68, 0.95, 0.89],\n       [0.78, 0.52, 0.28, 0.85, 0.22, 0.65, 0.51],\n       [0.75, 0.46, 0.51, 1.08, 0.5 , 0.57, 0.45]])\n\ne_dist(a, b)\narray([[0.87, 0.89, 0.91, 0.07, 0.68, 0.95, 0.89],\n       [0.78, 0.52, 0.28, 0.85, 0.22, 0.65, 0.51],\n       [0.75, 0.46, 0.51, 1.08, 0.5 , 0.57, 0.45]])\n</code></pre>\n\n<p>So there are lots of options, depending on the size of the arrays you are working with.</p>\n"}], "owner": {"reputation": 1, "user_id": 11736693, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aA6NfWXv-64/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdLRF477wqxSPcuM9PtoDXMbX8NlQ/photo.jpg?sz=128", "display_name": "Rashi Yadav", "link": "https://stackoverflow.com/users/11736693/rashi-yadav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 343, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562202367, "creation_date": 1562193363, "last_edit_date": 1562197043, "question_id": 56878707, "link": "https://stackoverflow.com/questions/56878707/how-would-i-calculate-the-l2-or-euclidean-distance-between-rows-of-different-2d", "title": "how would I calculate the L2 or euclidean distance between rows of different 2D vectors", "body": "<p>I've been given 2 different 2D arrays and I'm asked to calculate the L2 distance between the rows of array x and the rows in array y. The shape of array x is (M, D) and the shape of array y is (N, D). The final answer array should have the shape (M, N).</p>\n\n<p>I'm not very good at python. I'm really just doing random things and seeing what happens.</p>\n\n<pre><code>import numpy as np\n\ndef compute_distances(x, y):\n    \"\"\" Write a function that computes the L2 distance between each row \n        in `x` and `y`.\n\n        Parameters\n        ----------\n        x : numpy.ndarray\n            x.shape must be (M, D)\n            Each row of `x` is a flattened vector representing the pixel \n            values of a single image. Thus `x` represents\n            M images, each one described by a length-D vector.\n\n        y : numpy.ndarray\n            y.shape must be (N, D)\n            Each row of `y` is a flattened vector representing the pixel \n            values of a single image. Thus `y` represents\n            N images, each one described by a length-D vector.\n\n        Returns\n        -------\n        distances : numpy.ndarray\n            distances.shape = (M, N)\n            distances[i, j] = the L2 distance between x[i] and y[j]\n    \"\"\"\n    # student code goes here\n\n    M = x.shape[0]\n    N = y.shape[0]\n    dists = np.array (M, N)\n    dists[i, j] = np.sqrt(np.sum(np.square(x.shape[0] - y.shape[0]), axis = 0))\n\n    pass\n</code></pre>\n"}, {"tags": ["python", "inheritance"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 6557752, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMhAo.jpg?s=128&g=1", "display_name": "cfig97", "link": "https://stackoverflow.com/users/6557752/cfig97"}, "edited": false, "score": 0, "creation_date": 1562201745, "post_id": 56878721, "comment_id": 100307369, "body": "So the issue comes down to the line order between super()._init() and self.likes = \u201cSoccer\u201d ?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 31, "user_id": 6557752, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMhAo.jpg?s=128&g=1", "display_name": "cfig97", "link": "https://stackoverflow.com/users/6557752/cfig97"}, "edited": false, "score": 0, "creation_date": 1562600749, "post_id": 56878721, "comment_id": 100417125, "body": "Right.  Each of those sets the <code>likes</code> attribute.  As with any other variable, the second one overwrites the first."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 1, "last_activity_date": 1562193475, "creation_date": 1562193475, "answer_id": 56878721, "question_id": 56878698, "link": "https://stackoverflow.com/questions/56878698/python-how-to-properly-reassign-attributes-to-work-with-parent-class-functions/56878721#56878721", "title": "Python: How to properly reassign attributes to work with parent class functions", "body": "<p>You just need to set the <code>Son</code> attributes to overwrite those of the parent class:</p>\n\n<pre><code>class Son(Dad):\n    def __init__(self):\n        super().__init__()\n        self.likes = \"Soccer\"\n</code></pre>\n\n<p>This is the canonical way to implement child precedence.</p>\n"}], "owner": {"reputation": 31, "user_id": 6557752, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMhAo.jpg?s=128&g=1", "display_name": "cfig97", "link": "https://stackoverflow.com/users/6557752/cfig97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1562193475, "creation_date": 1562193278, "question_id": 56878698, "link": "https://stackoverflow.com/questions/56878698/python-how-to-properly-reassign-attributes-to-work-with-parent-class-functions", "title": "Python: How to properly reassign attributes to work with parent class functions", "body": "<p>I am trying to create a parent class and a child class in Python. Ive created getter functions within the parent, that call the parent's attributes using self. When creating the child, I do not want to override the function, simply reassign the value. When I do this, and call the getter from the child, I still receive the parent's attribute value. How can I force the code to use the child's attribute without having to override the getter function?</p>\n\n<p>My class definitions are as follows:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class Dad:\n    def __init__(self):\n        self.likes = \"Baseball\"\n        self.name = \"John\"\n\n    def get_likes(self):\n        print(self.likes)\n\n    def get_name(self):\n        print(self.name)\n\n    def works(self):\n        print(\"Programmer\")\n\n\nclass Son(Dad):\n    def __init__(self):\n        self.likes = \"Soccer\"\n        super().__init__()\n\n    def works(self):\n        print(\"Student\")\n</code></pre>\n\n<p>When trying to run the code,</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>d = Dad()\ns = Son()\nd.get_name()\nd.get_likes()\nd.works()\ns.get_name()\ns.get_likes()\ns.works()\n</code></pre>\n\n<p>the output looks like this:</p>\n\n<pre><code>John\nBaseball\nProgrammer\nJohn\nBaseball\nStudent\n</code></pre>\n\n<p>My desired output would be:</p>\n\n<pre><code>John\nBaseball\nProgrammer\nJohn\nSoccer\nStudent\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "macos"], "comments": [{"owner": {"reputation": 12117, "user_id": 2745495, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5bbcd267235bab78ec6710ef6654ba87?s=128&d=identicon&r=PG", "display_name": "Gino Mempin", "link": "https://stackoverflow.com/users/2745495/gino-mempin"}, "edited": false, "score": 0, "creation_date": 1562196940, "post_id": 56878696, "comment_id": 100306632, "body": "How do you know that it&#39;s caused by this code? Are you sure you don&#39;t have any other apps running? It&#39;s find it hard to believe that this code can &quot;send the CPU of your Mac into saturation&quot;."}, {"owner": {"reputation": 467, "user_id": 9216696, "user_type": "registered", "profile_image": "https://graph.facebook.com/1983536371871178/picture?type=large", "display_name": "Alex Hodges", "link": "https://stackoverflow.com/users/9216696/alex-hodges"}, "edited": false, "score": 1, "creation_date": 1562197411, "post_id": 56878696, "comment_id": 100306712, "body": "I cannot reproduce your problem on my mac, 10.14.2"}, {"owner": {"reputation": 387, "user_id": 11736671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eZzcK.jpg?s=128&g=1", "display_name": "Roberto Rocco", "link": "https://stackoverflow.com/users/11736671/roberto-rocco"}, "edited": false, "score": 0, "creation_date": 1562227439, "post_id": 56878696, "comment_id": 100314131, "body": "I think it&#39;s the IDLE 3.7.3. In fact, if you try to run this script in shell, printing is almost instantaneous, while it is running from IDLE when you use the ASCII code 300 it starts to saturate the CPU"}], "owner": {"reputation": 387, "user_id": 11736671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eZzcK.jpg?s=128&g=1", "display_name": "Roberto Rocco", "link": "https://stackoverflow.com/users/11736671/roberto-rocco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562196756, "creation_date": 1562193273, "last_edit_date": 1562196756, "question_id": 56878696, "link": "https://stackoverflow.com/questions/56878696/a-cycle-that-sends-the-macosx-cpu-down", "title": "A cycle that sends the MacOSX CPU down", "body": "<p>I'm studying Python and I tried to display more than the 255 classic ASCII code characters. With my surprise, the interpreter goes on displaying the characters and slows down by sending the CPU of my MacOS X 10.14.5 into saturation. Can anyone explain it?</p>\n\n<pre><code>for i in range(1, 4000):\n   print(i, \"-&gt;\", chr(i), end = \" \")\n</code></pre>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": true, "score": 4, "last_activity_date": 1562193377, "creation_date": 1562193377, "answer_id": 56878709, "question_id": 56878680, "link": "https://stackoverflow.com/questions/56878680/review-a-and-prev-b-with-python/56878709#56878709", "title": "review A and prev B with python", "body": "<p>IIUC:</p>\n\n<pre><code>s = df.B.shift() - (df.A)\n\ndf['Validate'] = np.select((s&gt;0, s&lt;0), ('over', 'gap'), default=np.nan)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>     A     B Validate\n0  0.0  1.50      nan\n1  1.5  2.05      nan\n2  2.1  3.00      gap\n3  2.9  4.00     over\n4  4.0  5.00      nan\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 1, "last_activity_date": 1562200170, "creation_date": 1562200170, "answer_id": 56879354, "question_id": 56878680, "link": "https://stackoverflow.com/questions/56878680/review-a-and-prev-b-with-python/56879354#56879354", "title": "review A and prev B with python", "body": "<p>We can using <code>sign</code> from <code>numpy</code></p>\n\n<pre><code>df['Validate']=np.sign(df.B.shift().sub(df.A)).map({1:'over',-1:'gap'})\ndf\nOut[150]: \n     A     B Validate\n0  0.0  1.50      NaN\n1  1.5  2.05      NaN\n2  2.1  3.00      gap\n3  2.9  4.00     over\n4  4.0  5.00      NaN\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 11736579, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-n3NWM5_hWQc/AAAAAAAAAAI/AAAAAAAAABo/BqJJKCRwVVw/photo.jpg?sz=128", "display_name": "Geology Modelling by ADT", "link": "https://stackoverflow.com/users/11736579/geology-modelling-by-adt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 56878709, "answer_count": 2, "score": 4, "last_activity_date": 1562200170, "creation_date": 1562193106, "last_edit_date": 1562193167, "question_id": 56878680, "link": "https://stackoverflow.com/questions/56878680/review-a-and-prev-b-with-python", "title": "review A and prev B with python", "body": "<p>I have this table</p>\n\n<pre><code>df= pd.DataFrame ({'A': [0,1.5,2.1,2.9,4], 'B': [1.5,2.05,3,4,5]})\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/FjZEx.jpg\" alt=\"enter image description here\"></p>\n\n<p>here I have 2 problems, a gap and an overlapping, I would like to detect automatically using python pandas, someone can help me, thanks</p>\n\n<pre><code>df= pd.DataFrame ({'A': [0,1.5,2.1,2.9,4], 'Validate': [1.5,2.05,3,4,5], 'test': ['np.nan', np.nan, 'gab','over', np.nan]})\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/EODGw.jpg\" alt=\"enter image description here\"></p>\n\n<p>thanks</p>\n"}, {"tags": ["python", "class", "default"], "comments": [{"owner": {"reputation": 43423, "user_id": 1011724, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/2JAXi.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/1011724/dan"}, "edited": false, "score": 1, "creation_date": 1562193145, "post_id": 56878667, "comment_id": 100305844, "body": "<code>def __init__(self, a = 1, b = 2, c = 3, **kwargs):</code> ? As for <code>method1</code>, it sounds like its <code>kwargs</code> have a local scope, so why bother setting global variables and then resetting them at the end? Just use the <code>kwargs</code> as locals inside <code>method1</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 43423, "user_id": 1011724, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/2JAXi.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/1011724/dan"}, "edited": false, "score": 0, "creation_date": 1562193803, "post_id": 56878667, "comment_id": 100305989, "body": "@Dan I think the expectation is that the code for the method will call other methods, and he wants them to see the temporarily modified attributes."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1562195135, "post_id": 56878667, "comment_id": 100306271, "body": "The <code>mock</code> library provides <a href=\"https://docs.python.org/3/library/unittest.mock.html#patch-dict\" rel=\"nofollow noreferrer\"><code>patch.dict</code></a>, which you can use as a context manager."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1562196507, "post_id": 56878667, "comment_id": 100306556, "body": "well, if <i>messiness</i> is the issue, then <code>self.__dict__.update((k, v) for k, v in kwargs.items())</code> -&gt; <code>self.__dict__.update(kwargs)</code>"}, {"owner": {"reputation": 30484, "user_id": 2875563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/umbJB.jpg?s=128&g=1", "display_name": "Reblochon Masque", "link": "https://stackoverflow.com/users/2875563/reblochon-masque"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1562210057, "post_id": 56878667, "comment_id": 100308627, "body": "I am surprised by your suggestion @chepner, is it an acceptable/accepted practice to use testing tools in this context?"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 30484, "user_id": 2875563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/umbJB.jpg?s=128&g=1", "display_name": "Reblochon Masque", "link": "https://stackoverflow.com/users/2875563/reblochon-masque"}, "edited": false, "score": 1, "creation_date": 1562250220, "post_id": 56878667, "comment_id": 100326732, "body": "@ReblochonMasque It&#39;s a tricky question. <code>patch.dict</code>, since it updates <i>data</i> rather than patching a name, feels at least a little bit out of place in the <code>mock</code> library. But using <code>mock</code> in production code would leave a bad taste in my mouth, hence the comment rather than an answer."}, {"owner": {"reputation": 30484, "user_id": 2875563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/umbJB.jpg?s=128&g=1", "display_name": "Reblochon Masque", "link": "https://stackoverflow.com/users/2875563/reblochon-masque"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1562253761, "post_id": 56878667, "comment_id": 100328495, "body": "Noted @chepner, thank you your reply."}], "answers": [{"tags": [], "owner": {"reputation": 30484, "user_id": 2875563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/umbJB.jpg?s=128&g=1", "display_name": "Reblochon Masque", "link": "https://stackoverflow.com/users/2875563/reblochon-masque"}, "is_accepted": false, "score": 1, "last_activity_date": 1562208152, "last_edit_date": 1562208152, "creation_date": 1562207628, "answer_id": 56879961, "question_id": 56878667, "link": "https://stackoverflow.com/questions/56878667/setting-default-values-in-a-class/56879961#56879961", "title": "Setting default values in a class", "body": "<p>You can use <strong>class variables</strong>, and property to achieve your goal to set default values for all class instances. The instances values can be modified directly, and the initial default values restored after calling a method.</p>\n\n<p>In view of the context that \"the real class has dozens of default values\", another approach that you may consider, is to set up a <strong>configuration file</strong> containing the default values, and using this file to initialize, or reset the defaults.</p>\n\n<p>Here is a short example of the first approach using one class variable:</p>\n\n<pre><code>class Plots:\n\n    _a = 1\n\n    def __init__(self):\n        self._a = None\n        self.reset_default_values()\n\n    def reset_default_values(self):\n        self._a = Plots._a\n\n    @property\n    def a(self):\n        return self._a\n\n    @a.setter\n    def a(self, value):\n        self._a = value\n\n\nplot = Plots()\nprint(plot.a)\n\nplot.a = 42\nprint(plot.a)\n\nplot.reset_default_values()\nprint(plot.a)\n</code></pre>\n\n<p><strong>output:</strong></p>\n\n<pre><code>1\n42\n1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1513, "user_id": 2044866, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b767d0f7110b85046df4be3333d281f?s=128&d=identicon&r=PG", "display_name": "Peilonrayz", "link": "https://stackoverflow.com/users/2044866/peilonrayz"}, "is_accepted": false, "score": 0, "last_activity_date": 1562239582, "last_edit_date": 1562239582, "creation_date": 1562213209, "answer_id": 56880524, "question_id": 56878667, "link": "https://stackoverflow.com/questions/56878667/setting-default-values-in-a-class/56880524#56880524", "title": "Setting default values in a class", "body": "<p>You can use a context manager or a decorator to apply and reset the values without having to type the same code on each method.</p>\n\n<p>Rather than having <code>self.default_attr</code>, I'd just return to the previous state.</p>\n\n<p>Using a decorator you could get:</p>\n\n<pre><code>def with_kwargs(fn):\n    def inner(self, **kwargs):\n        prev = self.__dict__.copy()\n        try:\n            self.__dict__.update(kwargs)\n            ret = fn(self)\n        finally:\n            self.__dict__ = prev\n        return ret\n    return inner\n\n\nclass plots:\n    a = 1\n    b = 2\n    c = 3\n\n    def __init__(self, **kwargs):\n        self.__dict__.update(kwargs)\n\n    @with_kwargs\n    def method1(self):\n        # Code goes here\n</code></pre>\n\n<hr>\n\n<p>IMHO this is a bad idea, and would at least suggest not mutating <code>plots</code>. You can do this by making a new object and passing that to <code>method1</code> as <code>self</code>.</p>\n\n<pre><code>class Transparent:\n    pass\n\n\ndef with_kwargs(fn):\n    def inner(self, **kwargs):\n        new_self = Transparent()\n        new_self.__dict__ = {**self.__dict__, **kwargs}\n        return fn(new_self)\n    return inner\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10166, "user_id": 962190, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sxvRS.png?s=128&g=1", "display_name": "Arne", "link": "https://stackoverflow.com/users/962190/arne"}, "is_accepted": false, "score": 0, "last_activity_date": 1562229644, "creation_date": 1562229644, "answer_id": 56883874, "question_id": 56878667, "link": "https://stackoverflow.com/questions/56878667/setting-default-values-in-a-class/56883874#56883874", "title": "Setting default values in a class", "body": "<p>There is a whole bunch of ways to solve this problem, but if you have python 3.7 installed (or have 3.6 and install <a href=\"https://pypi.org/project/dataclasses/\" rel=\"nofollow noreferrer\">the backport</a>), <a href=\"https://docs.python.org/3/library/dataclasses.html\" rel=\"nofollow noreferrer\">dataclasses</a> might be a good fit for a nice solution.</p>\n\n<p>First of all, it lets you define the default values in a readable and compact manner, and also allows all the mutation operations you need:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; from dataclasses import dataclass\n&gt;&gt;&gt; @dataclass\n... class Plots:\n...     a: int = 1\n...     b: int = 2\n...     c: int = 3\n...     \n&gt;&gt;&gt; p = Plots()        # create a Plot with only default values\n&gt;&gt;&gt; p\nPlots(a=1, b=2, c=3)\n&gt;&gt;&gt; p.a = -1           # update something in this Plot instance\n&gt;&gt;&gt; p\nPlots(a=-1, b=2, c=3)\n</code></pre>\n\n<p>You also get the option to define default factories instead of default values for free with the <a href=\"https://docs.python.org/3/library/dataclasses.html#dataclasses.field\" rel=\"nofollow noreferrer\">dataclass field definition</a>. It might not be a problem yet, but it avoids the <a href=\"https://docs.python-guide.org/writing/gotchas/#mutable-default-arguments\" rel=\"nofollow noreferrer\">mutable default value gotcha</a>, which every python programmer runs into sooner or later.</p>\n\n<p>Last but not least, writing a <code>reset</code> function is quite easy given an existing dataclass, because it keeps track of all the default values already in its <code>__dataclass_fields__</code> attribute:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; from dataclasses import dataclass, MISSING\n&gt;&gt;&gt; @dataclass\n... class Plots:\n...     a: int = 1\n...     b: int = 2\n...     c: int = 3\n... \n...     def reset(self):\n...         for name, field in self.__dataclass_fields__.items():\n...             if field.default != MISSING:\n...                 setattr(self, name, field.default)\n...             else:\n...                 setattr(self, name, field.default_factory())\n...\n&gt;&gt;&gt; p = Plots(a=-1)     # create a Plot with some non-default values  \n&gt;&gt;&gt; p\nPlots(a=-1, b=2, c=3)\n&gt;&gt;&gt; p.reset()           # calling reset on it restores the pre-defined defaults\n&gt;&gt;&gt; p\nPlots(a=1, b=2, c=3)\n</code></pre>\n\n<p>So now you can write some function <code>do_stuff(...)</code> that updates the fields in a Plot instance, and as long as you execute <code>reset()</code> the changes won't persist. </p>\n"}], "owner": {"reputation": 161, "user_id": 11736661, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EquZkL7d_Y8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfvoLdI5fb39-UAjKE1Q8PiBn-L5Q/photo.jpg?sz=128", "display_name": "afb", "link": "https://stackoverflow.com/users/11736661/afb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1388, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1562239582, "creation_date": 1562193003, "last_edit_date": 1562197448, "question_id": 56878667, "link": "https://stackoverflow.com/questions/56878667/setting-default-values-in-a-class", "title": "Setting default values in a class", "body": "<p>I am creating a class in Python, and I am unsure how to properly set default values. My goal is to set default values for all class instances, which can also be modified by a class method. However, I would like to have the initial default values restored after calling a method.</p>\n\n<p>I have been able to make it work with the code shown below. It isn't very \"pretty\", so I suspect that are better approaches to this problem.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class plots:\n    def __init__(self, **kwargs):\n        self.default_attr = {'a': 1, 'b': 2, 'c': 3}\n        self.default_attr.update(kwargs)\n        self.__dict__.update((k, v) for k, v in self.default_attr.items())\n\n    def method1(self, **kwargs):\n        self.__dict__.update((k, v) for k, v in kwargs.items())\n\n        #### Code for this method goes here\n\n        # Then restore initial default values\n        self.__dict__.update((k, v) for k, v in self.default_attr.items())\n</code></pre>\n\n<p>When I use this class, I would do something like <code>my_instance = plots()</code> and <code>my_instance.method1()</code>, <code>my_instance.method1(b = 5)</code>, and <code>my_instance.method1()</code>. When calling <code>method1</code> the third time, <code>b</code> would be 5 if I don't reset the default values at the end of the method definition, but I would like it to be 2 again. </p>\n\n<p>Note: the code above is just an example. The real class has dozens of default values, and using all of them as input arguments would be considered an antipattern.</p>\n\n<p>Any suggestion on how to properly address this issue?</p>\n"}, {"tags": ["python", "pip", "pypi"], "comments": [{"owner": {"reputation": 22993, "user_id": 1394393, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mSjIL.jpg?s=128&g=1", "display_name": "jpmc26", "link": "https://stackoverflow.com/users/1394393/jpmc26"}, "edited": false, "score": 3, "creation_date": 1562193725, "post_id": 56878650, "comment_id": 100305977, "body": "This is why you need to understand what the arguments in a command do, not just be able to repeat it blindly. You told it where to look for packages: <a href=\"https://pip.pypa.io/en/stable/reference/pip_wheel/#index-url\" rel=\"nofollow noreferrer\">pip.pypa.io/en/stable/reference/pip_wheel/#index-url</a> Does the location you gave it have jsonpickle? No, it does not. Using a requirements file would also fail if you included the same option."}, {"owner": {"reputation": 81, "user_id": 10681422, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmIE7.png?s=128&g=1", "display_name": "goktugerce", "link": "https://stackoverflow.com/users/10681422/goktugerce"}, "reply_to_user": {"reputation": 22993, "user_id": 1394393, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mSjIL.jpg?s=128&g=1", "display_name": "jpmc26", "link": "https://stackoverflow.com/users/1394393/jpmc26"}, "edited": false, "score": 1, "creation_date": 1562221521, "post_id": 56878650, "comment_id": 100311387, "body": "Thanks, I should have searched more for it."}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 10681422, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmIE7.png?s=128&g=1", "display_name": "goktugerce", "link": "https://stackoverflow.com/users/10681422/goktugerce"}, "edited": false, "score": 0, "creation_date": 1562193758, "post_id": 56878727, "comment_id": 100305981, "body": "I get the point but it is not related to my problem. Even if I do it this way, pip still cannot install the required packages.  <code>ERROR: No matching distribution found for Pillow==6.1.0 (from my-package-name==0.0.1)</code>"}, {"owner": {"reputation": 6489, "user_id": 5086255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XiEYC.jpg?s=128&g=1", "display_name": "sahasrara62", "link": "https://stackoverflow.com/users/5086255/sahasrara62"}, "reply_to_user": {"reputation": 81, "user_id": 10681422, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmIE7.png?s=128&g=1", "display_name": "goktugerce", "link": "https://stackoverflow.com/users/10681422/goktugerce"}, "edited": false, "score": 1, "creation_date": 1562195737, "post_id": 56878727, "comment_id": 100306388, "body": "@goktugerce as mentioned by jpmc26, you are testing it in <code>test.pypi </code> which does n&#39;t have these  package , so this is why u are getting error,instead of that do <code>pip install setup.py</code> it will work"}, {"owner": {"reputation": 15554, "user_id": 328036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db101b3a812b0464c53e5409c12ea94?s=128&d=identicon&r=PG", "display_name": "Dustin Ingram", "link": "https://stackoverflow.com/users/328036/dustin-ingram"}, "edited": false, "score": 0, "creation_date": 1562668130, "post_id": 56878727, "comment_id": 100439679, "body": "<code>setup.py</code> and <code>requirements.txt</code> are two different things, you shouldn&#39;t do this. See <a href=\"https://caremad.io/posts/2013/07/setup-vs-requirement/\" rel=\"nofollow noreferrer\">caremad.io/posts/2013/07/setup-vs-requirement</a>"}, {"owner": {"reputation": 6489, "user_id": 5086255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XiEYC.jpg?s=128&g=1", "display_name": "sahasrara62", "link": "https://stackoverflow.com/users/5086255/sahasrara62"}, "reply_to_user": {"reputation": 15554, "user_id": 328036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db101b3a812b0464c53e5409c12ea94?s=128&d=identicon&r=PG", "display_name": "Dustin Ingram", "link": "https://stackoverflow.com/users/328036/dustin-ingram"}, "edited": false, "score": 0, "creation_date": 1562670548, "post_id": 56878727, "comment_id": 100440985, "body": "@DustinIngram here <code>install_require=requirements</code> requirements is a list of all the package which needed for project, if this is not wriiten in <code>requirements.txt</code> and define in setup.py itself, it is then still a list of package with version, i dont see hwo this shouldn&#39;t do"}, {"owner": {"reputation": 15554, "user_id": 328036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db101b3a812b0464c53e5409c12ea94?s=128&d=identicon&r=PG", "display_name": "Dustin Ingram", "link": "https://stackoverflow.com/users/328036/dustin-ingram"}, "edited": false, "score": 0, "creation_date": 1562671849, "post_id": 56878727, "comment_id": 100441633, "body": "I&#39;m specifically talking about defining the dependencies in a file called <code>requirements.txt</code> and then reading it in to produce <code>install_requires</code>, which is what your answer recommends. It also fails to resolve the question as the author has already mentioned."}], "tags": [], "owner": {"reputation": 6489, "user_id": 5086255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XiEYC.jpg?s=128&g=1", "display_name": "sahasrara62", "link": "https://stackoverflow.com/users/5086255/sahasrara62"}, "is_accepted": false, "score": -1, "last_activity_date": 1562193511, "creation_date": 1562193511, "answer_id": 56878727, "question_id": 56878650, "link": "https://stackoverflow.com/questions/56878650/pip-cant-install-packages-listed-in-install-requires/56878727#56878727", "title": "pip can&#39;t install packages listed in install_requires", "body": "<p>it's better if you create a requirements.txt file and add the the package you require in that file and in setup.py open that file get the package in list and add that in setup.py</p>\n\n<p>eg</p>\n\n<p>requirements.txt</p>\n\n<pre><code>requests\njsonpickle\npandas\nmatplotlib\nseaborn\nPillow\n</code></pre>\n\n<p>and in setup.py</p>\n\n<pre><code>with open('requirements.txt') as f:\n    requirements = f.read().splitlines()\n\n...\n\nsetup(\n    name='package name',\n    version='version',\n    install_requires=requirements,\n    ...\n)\n</code></pre>\n\n<p>why this way ? -> By this way, you only have to maintain requirements.txt and no duplication of same in setup.py</p>\n"}, {"tags": [], "owner": {"reputation": 15554, "user_id": 328036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db101b3a812b0464c53e5409c12ea94?s=128&d=identicon&r=PG", "display_name": "Dustin Ingram", "link": "https://stackoverflow.com/users/328036/dustin-ingram"}, "is_accepted": false, "score": 4, "last_activity_date": 1562668022, "creation_date": 1562668022, "answer_id": 56950493, "question_id": 56878650, "link": "https://stackoverflow.com/questions/56878650/pip-cant-install-packages-listed-in-install-requires/56950493#56950493", "title": "pip can&#39;t install packages listed in install_requires", "body": "<p>This is an unfortunate (and known) downside to TestPyPI: The issue is that <code>jsonpickle</code> does not exist on TestPyPI, and by installing your package from there, you are telling <code>pip</code> to look for dependencies there as well.</p>\n\n<p>Instead, you should publish to PyPI instead, and use a pre-release version so as not to pollute your versions. You can delete these pre-releases from the project later.</p>\n"}], "owner": {"reputation": 81, "user_id": 10681422, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmIE7.png?s=128&g=1", "display_name": "goktugerce", "link": "https://stackoverflow.com/users/10681422/goktugerce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1115, "favorite_count": 1, "closed_date": 1603326478, "answer_count": 2, "score": 3, "last_activity_date": 1562668022, "creation_date": 1562192861, "question_id": 56878650, "link": "https://stackoverflow.com/questions/56878650/pip-cant-install-packages-listed-in-install-requires", "closed_reason": "Duplicate", "title": "pip can&#39;t install packages listed in install_requires", "body": "<p>I created a Python package, uploaded it to TestPyPI, and try to install it to a new virtual environment. pip cannot install the required packages, but if I try to install the same packages with <code>pip install -r requirements.txt</code>, it works.</p>\n\n<p>I created my <code>setup.py</code> file following the guidelines listed in <a href=\"https://packaging.python.org/tutorials/packaging-projects/\" rel=\"nofollow noreferrer\">Packaging Python Projects</a>. I uploaded my package to TestPyPI and try to install it to a brand new virtual environment with <code>Python 3.6.4</code> and <code>pip 19.1.1</code>.</p>\n\n<p>Here is my install instruction: <code>pip install -i https://test.pypi.org/simple/ my-package-name==0.0.1</code></p>\n\n<p>Here is what I have in <code>setuptools.setup</code> call (only related stuff):</p>\n\n<pre><code>   packages=setuptools.find_packages(),\n    classifiers=[\n        \"Programming Language :: Python :: 3.4\",\n        \"Programming Language :: Python :: 3.5\",\n        \"Programming Language :: Python :: 3.6\",\n        \"Programming Language :: Python :: 3.7\",\n        'License :: OSI Approved :: MIT License',\n        'Operating System :: OS Independent',\n    ],\n    install_requires=[\n        \"requests\",\n        \"jsonpickle\",\n        \"pandas\",\n        \"matplotlib\",\n        \"seaborn\",\n        \"Pillow\"\n    ]\n</code></pre>\n\n<p>It starts by successfull installing matplotlib, but I get the following error later:</p>\n\n<p><code>ERROR: Could not find a version that satisfies the requirement jsonpickle (from my-package-name==0.0.1) (from versions: none)\nERROR: No matching distribution found for jsonpickle (from my-package-name==0.0.1)</code></p>\n\n<p>I also tried with specifying package versions, but then I cannot install any packages.</p>\n\n<p><strong>As I have told, I can install the packages just fine by using <code>pip install -r requirements.txt</code> command.</strong></p>\n"}, {"tags": ["python", "arrays", "pandas", "iteration"], "comments": [{"owner": {"reputation": 618, "user_id": 8215902, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SPHy3MqnZk8/AAAAAAAAAAI/AAAAAAAAAC4/kpr3-pYbzn8/photo.jpg?sz=128", "display_name": "Himanshu Pant", "link": "https://stackoverflow.com/users/8215902/himanshu-pant"}, "edited": false, "score": 2, "creation_date": 1562194594, "post_id": 56878604, "comment_id": 100306153, "body": "Did you try zip() ?"}, {"owner": {"reputation": 23, "user_id": 11698228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/225ee765352054a64601f97df4a37f41?s=128&d=identicon&r=PG&f=1", "display_name": "csStudent2102", "link": "https://stackoverflow.com/users/11698228/csstudent2102"}, "reply_to_user": {"reputation": 618, "user_id": 8215902, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SPHy3MqnZk8/AAAAAAAAAAI/AAAAAAAAAC4/kpr3-pYbzn8/photo.jpg?sz=128", "display_name": "Himanshu Pant", "link": "https://stackoverflow.com/users/8215902/himanshu-pant"}, "edited": false, "score": 0, "creation_date": 1562194697, "post_id": 56878604, "comment_id": 100306172, "body": "zip() for which part?"}], "owner": {"reputation": 23, "user_id": 11698228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/225ee765352054a64601f97df4a37f41?s=128&d=identicon&r=PG&f=1", "display_name": "csStudent2102", "link": "https://stackoverflow.com/users/11698228/csstudent2102"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562194344, "creation_date": 1562192513, "last_edit_date": 1562194344, "question_id": 56878604, "link": "https://stackoverflow.com/questions/56878604/how-to-iterate-through-two-arrays-simultaneously-in-python", "title": "How to iterate through two arrays simultaneously in Python?", "body": "<p>I have written the following function in python that when given a start and end orientation, interpolates the orientation using the SLERP method: </p>\n\n<pre><code> def slerp(self, start_O, target_O, t_array):\n                ....(other code)\n                return (s0[:,np.newaxis] * start_O[np.newaxis,:]) + (s1[:,np.newaxis] * target_O[np.newaxis,:])\n</code></pre>\n\n<p>When the SLERP function is called in the trajectoryMove function, the function returns a list of 500 arrays, which each consists of 4 elements. I am attempting to simultaneously loop through the list of arrays generated by the SLERP function and through the list of x,y and z values that are generated by the function cubicSplineInterpolate. So for example, for the first pose, the x,y and z elements of the position for the first pose are determined by the cubicSplineInterpolate function, and the x,y,z and w elements of the orientation for the first pose are determined by the spline function. The trajectoryMove function should then loop to the second array of the slerp and cubicSplineInterpolate functions simultaneously. How do I do this in python? Do I need to store the result of calling the slerp function in a new array? </p>\n\n<pre><code>def trajectoryMove(self):\n        newPose = Pose()\n        arr1 = []\n        arr2 = []\n        arr3 = []\n        x_axis = [0.001, 0.0039, 0.0160, 0.0334]\n        y_axis = [0.009, 0.0239, 0.0121, 0.0034]\n        z_axis = [0.009, 0.0199, 0.0821, 0.1034]\n        start_orientation = [0.707106781172, 0.707106781191, 2.59734823723e-06, 0]\n        end_orientation = [0.151231412, 0.5112315134, 0.0051534141, 0.5]\n        self.cubicSplineInterpolate(x_axis,y_axis,z_axis)\n        self.slerp(start_orientation, end_orientation, np.arange(0,1,0.001))\n        arr1 = self.xLinespace\n        arr2 = self.yLinespace\n        arr3 = self.zLinespace\n\n        for x, y, z in zip(arr1, arr2, arr3):\n\n            newPose.position.x = x\n            newPose.position.y = y\n            newPose.position.z = z\n            newPose.orientation.x = 0.707106781172\n            newPose.orientation.y = 0.707106781191\n            newPose.orientation.z = 2.59734823723e-06\n            newPose.orientation.w = 0\n            self.set_position_cartesian.publish(newPose)\n            rospy.loginfo(newPose)\n            rospy.sleep(0.05)\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "pip", "conda"], "comments": [{"owner": {"reputation": 3302, "user_id": 3709257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nji1x.jpg?s=128&g=1", "display_name": "GramThanos", "link": "https://stackoverflow.com/users/3709257/gramthanos"}, "edited": false, "score": 0, "creation_date": 1562197702, "post_id": 56878603, "comment_id": 100306760, "body": "You may want to check this issue on conda&#39;s github page: <a href=\"https://github.com/conda/conda/issues/5439\" rel=\"nofollow noreferrer\">github.com/conda/conda/issues/5439</a>"}, {"owner": {"reputation": 43, "user_id": 11736630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bf670d1aed4867f396a3955f2f9d1c?s=128&d=identicon&r=PG&f=1", "display_name": "dem336", "link": "https://stackoverflow.com/users/11736630/dem336"}, "reply_to_user": {"reputation": 3302, "user_id": 3709257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nji1x.jpg?s=128&g=1", "display_name": "GramThanos", "link": "https://stackoverflow.com/users/3709257/gramthanos"}, "edited": false, "score": 1, "creation_date": 1562203313, "post_id": 56878603, "comment_id": 100307594, "body": "Thanks for the suggestion! It looks like it&#39;s somewhat related but the AttributeError seems to be pointing at something else, especially digging into the traceback. I did find someone else with the same AttributeError as me posted very recently <a href=\"https://stackoverflow.com/questions/56868136/failed-to-install-anaconda-on-macos\" title=\"failed to install anaconda on macos\">stackoverflow.com/questions/56868136/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 104, "user_id": 11314853, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Vu4mextiRhc/AAAAAAAAAAI/AAAAAAAAAD0/9LvjPhNeth0/photo.jpg?sz=128", "display_name": "Poppy Bee", "link": "https://stackoverflow.com/users/11314853/poppy-bee"}, "is_accepted": true, "score": 1, "last_activity_date": 1562663606, "creation_date": 1562663606, "answer_id": 56949155, "question_id": 56878603, "link": "https://stackoverflow.com/questions/56878603/conda-returns-an-attribute-error-symbol-not-found-after-trying-to-install-biopyt/56949155#56949155", "title": "Conda returns an Attribute Error symbol not found after trying to install biopython", "body": "<p>got my error fixed by the method from <a href=\"https://zhuanlan.zhihu.com/p/61717000\" rel=\"nofollow noreferrer\">zhihu</a></p>\n\n<p>Here are the steps how I solve it, Hope it's helpful to you:</p>\n\n<p>The reason caused this error on Mac is Python was installed before, I tried to delete all the python and Anaconda files, and install the anaconda again, then run the conda command successfully.</p>\n\n<ol>\n<li>Delete python from Macintouch->Frameworks->PythonFramework->Versions->3.x</li>\n<li>Delete all the records about python and anaconda in .bash_profile(find this hidden file by shift+command+.)</li>\n<li>Delete the anaconda navigator in applications</li>\n<li>Install the Anaconda again</li>\n</ol>\n"}], "owner": {"reputation": 43, "user_id": 11736630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bf670d1aed4867f396a3955f2f9d1c?s=128&d=identicon&r=PG&f=1", "display_name": "dem336", "link": "https://stackoverflow.com/users/11736630/dem336"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1364, "favorite_count": 1, "accepted_answer_id": 56949155, "answer_count": 1, "score": 3, "last_activity_date": 1562663606, "creation_date": 1562192510, "question_id": 56878603, "link": "https://stackoverflow.com/questions/56878603/conda-returns-an-attribute-error-symbol-not-found-after-trying-to-install-biopyt", "title": "Conda returns an Attribute Error symbol not found after trying to install biopython", "body": "<p>I was playing around with trying to get biopython working and it seems like I broke conda in the process. At this point, the help menu for conda will display, and <code>conda --version</code> returns <code>conda 4.7.5</code> but anything else including <code>conda info</code> throws an error <code>AttributeError: dlsym(0x1004381c0, archive_read_open_filename_w): symbol not found</code></p>\n\n<p>This is on Mac OS 10.14.4. Conda was just working and I last used it to install biopython without error <code>conda install -c conda-forge biopython</code>. Running <code>import Bio</code> still resulted in an a <code>ImportError: No module named Bio</code>. So in troubleshooting I ran <code>pip uninstall biopython</code> (which said it successfully uninstalled biopython-1.73) and <code>pip install biopython</code> which returned:</p>\n\n<pre><code>Requirement already satisfied: biopython in /Users/dmattox/anaconda/lib/python2.7/site-packages (1.73)\nRequirement already satisfied: numpy in /Users/dmattox/anaconda/lib/python2.7/site-packages (from biopython) (1.13.1)\n</code></pre>\n\n<p>I then tried installing with conda again <code>conda install -c conda-forge biopython</code> which returned the same error I showed above from <code>conda info</code>. This AttributeError appears anytime I try and use conda for anything now. I've included the traceback below. Any suggestions?</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/Users/dmattox/anaconda/bin/conda\", line 13, in &lt;module&gt;\n    sys.exit(main())\n  File \"/Users/dmattox/anaconda/lib/python2.7/site-packages/conda/cli/main.py\", line 150, in main\n    return conda_exception_handler(_main, *args, **kwargs)\n  File \"/Users/dmattox/anaconda/lib/python2.7/site-packages/conda/exceptions.py\", line 1335, in conda_exception_handler\n    return_value = exception_handler(func, *args, **kwargs)\n  File \"/Users/dmattox/anaconda/lib/python2.7/site-packages/conda/exceptions.py\", line 1046, in __call__\n    return self.handle_exception(exc_val, exc_tb)\n  File \"/Users/dmattox/anaconda/lib/python2.7/site-packages/conda/exceptions.py\", line 1090, in handle_exception\n    return self.handle_unexpected_exception(exc_val, exc_tb)\n  File \"/Users/dmattox/anaconda/lib/python2.7/site-packages/conda/exceptions.py\", line 1101, in handle_unexpected_exception\n    self.print_unexpected_error_report(error_report)\n  File \"/Users/dmattox/anaconda/lib/python2.7/site-packages/conda/exceptions.py\", line 1171, in print_unexpected_error_report\n    from .cli.main_info import get_env_vars_str, get_main_info_str\n  File \"/Users/dmattox/anaconda/lib/python2.7/site-packages/conda/cli/main_info.py\", line 19, in &lt;module&gt;\n    from ..core.index import _supplement_index_with_system\n  File \"/Users/dmattox/anaconda/lib/python2.7/site-packages/conda/core/index.py\", line 9, in &lt;module&gt;\n    from .package_cache_data import PackageCacheData\n  File \"/Users/dmattox/anaconda/lib/python2.7/site-packages/conda/core/package_cache_data.py\", line 15, in &lt;module&gt;\n    from conda_package_handling.api import InvalidArchiveError\n  File \"/Users/dmattox/anaconda/lib/python2.7/site-packages/conda_package_handling/api.py\", line 3, in &lt;module&gt;\n    from libarchive.exception import ArchiveError as _LibarchiveArchiveError\n  File \"/Users/dmattox/anaconda/lib/python2.7/site-packages/libarchive/__init__.py\", line 1, in &lt;module&gt;\n    from .entry import ArchiveEntry\n  File \"/Users/dmattox/anaconda/lib/python2.7/site-packages/libarchive/entry.py\", line 6, in &lt;module&gt;\n    from . import ffi\n  File \"/Users/dmattox/anaconda/lib/python2.7/site-packages/libarchive/ffi.py\", line 184, in &lt;module&gt;\n    c_int, check_int)\n  File \"/Users/dmattox/anaconda/lib/python2.7/site-packages/libarchive/ffi.py\", line 95, in ffi\n    f = getattr(libarchive, 'archive_'+name)\n  File \"/Users/dmattox/anaconda/lib/python2.7/ctypes/__init__.py\", line 375, in __getattr__\n    func = self.__getitem__(name)\n  File \"/Users/dmattox/anaconda/lib/python2.7/ctypes/__init__.py\", line 380, in __getitem__\n    func = self._FuncPtr((name_or_ordinal, self))\nAttributeError: dlsym(0x100548400, archive_read_open_filename_w): symbol not found\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pip"], "comments": [{"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 2, "creation_date": 1562192490, "post_id": 56878576, "comment_id": 100305702, "body": "How have you installed <code>tqdm</code> for Python 3?"}, {"owner": {"reputation": 255, "user_id": 4685767, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-k188dJpJrwc/AAAAAAAAAAI/AAAAAAAAACM/4dxdqbXHZ7Q/photo.jpg?sz=128", "display_name": "SR1", "link": "https://stackoverflow.com/users/4685767/sr1"}, "reply_to_user": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1562192805, "post_id": 56878576, "comment_id": 100305766, "body": "I did <code>pip install tqdm</code> and <code>pip3 install tqdm</code>"}, {"owner": {"reputation": 6489, "user_id": 5086255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XiEYC.jpg?s=128&g=1", "display_name": "sahasrara62", "link": "https://stackoverflow.com/users/5086255/sahasrara62"}, "edited": false, "score": 1, "creation_date": 1562192905, "post_id": 56878576, "comment_id": 100305791, "body": "use <code>python -m pip install tqdm</code> pthon is keyword yu use to invoke python in your os"}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1562236905, "post_id": 56878576, "comment_id": 100319456, "body": "@SR1 You probably have more than 1 Python 3 and <code>pip3</code> installs packages for another Python, not for the one you use to run the code that imports <code>tqdm</code>."}, {"owner": {"reputation": 2289, "user_id": 10475068, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9L6sS.jpg?s=128&g=1", "display_name": "Legorooj", "link": "https://stackoverflow.com/users/10475068/legorooj"}, "reply_to_user": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1562274298, "post_id": 56878576, "comment_id": 100334655, "body": "@phd is probably right. <code>tqdm</code> works fine on my Ubuntu, so the first thing to check is if you&#39;ve installed it fit the right version of python."}], "owner": {"reputation": 255, "user_id": 4685767, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-k188dJpJrwc/AAAAAAAAAAI/AAAAAAAAACM/4dxdqbXHZ7Q/photo.jpg?sz=128", "display_name": "SR1", "link": "https://stackoverflow.com/users/4685767/sr1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562192316, "creation_date": 1562192316, "question_id": 56878576, "link": "https://stackoverflow.com/questions/56878576/import-library-tqdm-works-in-python2-but-not-in-python3", "title": "Import library tqdm works in python2 but not in python3", "body": "<p>I've been trying to get tqdm to work in my Python 3 code.</p>\n\n<p>I first thought this was a permissions issue, then a Python 3 relative imports issue but neither seems to fit the bill. I can import tqdm just fine in python 2.</p>\n\n<p>I tried doing </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from tqdm import tqdm\n</code></pre>\n\n<p>and </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from .tqdm import tqdm\n</code></pre>\n\n<p>but I keep getting the no module named tqdm found error with the former and <strong>SystemError: Parent module '' not loaded, cannot perform relative import</strong>\n with the latter.</p>\n\n<p>I tried reinstalling tqdm with pip3, and it says the requirement is already satisfied. I have no idea what I'm doing wrong.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 6489, "user_id": 5086255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XiEYC.jpg?s=128&g=1", "display_name": "sahasrara62", "link": "https://stackoverflow.com/users/5086255/sahasrara62"}, "edited": false, "score": 1, "creation_date": 1562192773, "post_id": 56878574, "comment_id": 100305754, "body": "use <code>pickle</code> library"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1562192817, "post_id": 56878574, "comment_id": 100305771, "body": "What exactly are you trying to accomplish? <code>filedata = filedata.replace(filedata[3], b&#39;\\x01&#39;, 1)</code> might be all you need."}, {"owner": {"reputation": 326, "user_id": 9487153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc4d84d179613afbc3887c5c09363e4?s=128&d=identicon&r=PG&f=1", "display_name": "user70960", "link": "https://stackoverflow.com/users/9487153/user70960"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1562193104, "post_id": 56878574, "comment_id": 100305830, "body": "@chepner doesn&#39;t work: <code>TypeError: a bytes-like object is required, not &#39;int&#39;</code>"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1562193528, "post_id": 56878574, "comment_id": 100305927, "body": "Oops. Replace the first argument with <code>bytes(filedata[3:4])</code> instead."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1562193843, "post_id": 56878574, "comment_id": 100306001, "body": "<code>filedata.[3].to_bytes(1, &#39;big&#39;)</code> might be more efficient, though. (The second argument doesn&#39;t really matter since the first argument is 1.)"}, {"owner": {"reputation": 326, "user_id": 9487153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc4d84d179613afbc3887c5c09363e4?s=128&d=identicon&r=PG&f=1", "display_name": "user70960", "link": "https://stackoverflow.com/users/9487153/user70960"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1562196804, "post_id": 56878574, "comment_id": 100306610, "body": "@chepner thanks, replacing works, but how do i insert new items? <code>.append</code>, <code>.insert</code> and the <code>+</code> operator don&#39;t work."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1562249951, "post_id": 56878574, "comment_id": 100326605, "body": "You don&#39;t; you combine existing <code>bytes</code> values to create new ones."}], "answers": [{"comments": [{"owner": {"reputation": 326, "user_id": 9487153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc4d84d179613afbc3887c5c09363e4?s=128&d=identicon&r=PG&f=1", "display_name": "user70960", "link": "https://stackoverflow.com/users/9487153/user70960"}, "edited": false, "score": 0, "creation_date": 1562200031, "post_id": 56879213, "comment_id": 100307107, "body": "Thank you! Just what I&#39;ve been looking for."}], "tags": [], "owner": {"reputation": 1895, "user_id": 7861581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rv1nq.png?s=128&g=1", "display_name": "John Hennig", "link": "https://stackoverflow.com/users/7861581/john-hennig"}, "is_accepted": true, "score": 1, "last_activity_date": 1562240741, "last_edit_date": 1562240741, "creation_date": 1562198532, "answer_id": 56879213, "question_id": 56878574, "link": "https://stackoverflow.com/questions/56878574/converting-a-string-to-a-bytes-object-as-is/56879213#56879213", "title": "Converting a string to a bytes object as is", "body": "<blockquote>\n  <p>How do I turn a string into a bytes object AS IS, i.e. without encoding it?</p>\n</blockquote>\n\n<p>You can't. That's a contradiction of terms \u2014 as of Python 3.</p>\n\n<p>A <em>string</em> is a sequence of text characters. Think letters, punctuation, white-space, even control characters. A <em>bytes</em> object is a sequence of 8-bit numbers. How the two sequences are related is a question of encoding. There is no way around it.</p>\n\n<p>Text characters should be thought of as abstract entities. The letter A, for example, simply exists. There is no number associated with it <em>per se</em>. (Internally, it is represented by a Unicode code point, which <em>is</em> a number, but that's an implementation detail.)</p>\n\n<p>In the code above, you're reading bytes and you're writing bytes, and in between you want to manipulate the byte stream: change one of the numbers, append others.</p>\n\n<p>Python <code>bytes</code> are no different from <code>str</code> in that regard: they are both immutable types. If you did the same as above but with a string, you'd get the same kind of error:</p>\n\n<pre><code>&gt;&gt;&gt; s = 'abcd'\n&gt;&gt;&gt; s[3] = 'x'\nTypeError: 'str' object does not support item assignment\n</code></pre>\n\n<p>That is, in-place character manipulation is not supported for strings. There are other ways to achieve the same result though. In-place byte manipulation, on the other hand, <em>is</em> supported \u2014 arguably because it's a use case that is more common than for strings. You just need to use <a href=\"https://docs.python.org/3/library/stdtypes.html#bytearray\" rel=\"nofollow noreferrer\"><code>bytearray</code></a> instead of <code>bytes</code>:</p>\n\n<pre><code>&gt;&gt;&gt; data = bytearray(b'\\x00\\x01\\x02\\x03\\x04')\n&gt;&gt;&gt; data[3] = 255\n&gt;&gt;&gt; print(data)\nbytearray(b'\\x00\\x01\\x02\\xff\\x04')\n</code></pre>\n\n<p>Which you can then write to a file without any encoding whatsoever:</p>\n\n<pre><code>pathlib.Path('result.bin').write_bytes(data)\n</code></pre>\n\n<p>(Note that <code>bytes</code> literals must be prefixed with <code>b</code>.)</p>\n"}], "owner": {"reputation": 326, "user_id": 9487153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc4d84d179613afbc3887c5c09363e4?s=128&d=identicon&r=PG&f=1", "display_name": "user70960", "link": "https://stackoverflow.com/users/9487153/user70960"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 1, "accepted_answer_id": 56879213, "answer_count": 1, "score": 1, "last_activity_date": 1562240741, "creation_date": 1562192307, "last_edit_date": 1562206557, "question_id": 56878574, "link": "https://stackoverflow.com/questions/56878574/converting-a-string-to-a-bytes-object-as-is", "title": "Converting a string to a bytes object as is", "body": "<p>How do I turn a string into a bytes object AS IS, i.e. without encoding it. I can't use <code>.encode()</code> here, because it's corrupting my binary file after saving.</p>\n\n<pre><code>filedata = pathlib.Path('file.bin').read_bytes()\n# since i can't modify a bytes object, i should convert it to a string, should I?\ndata = ''\nfor i in filedata:\n    data += chr(i) if isinstance(i, int) else i\ndata[3] = '\\x01'\ndata += '\\x58\\x02\\x0C\\x80\\x61\\x39\\x56\\x18\\x55\\x61\\x89\\x42\\x42\\x16\\x46\\x17\\x54\\x70\\x10\\x58\\x60\\x10\\x10\\x01\\x75\\x10\\xF0\\xC0\\x00\\x01\\x00\\x02\\x00\\xC0\\x00\\xD0\\x00\\x01\\x00\\xC4\\x00\\x01\\x00\\x02\\x00\\x01\\x00\\x00\\x02\\x00\\x00\\x00'\npathlib.Path('result.bin').write_bytes(data.encode()) # doesn't work as it should\n</code></pre>\n\n<p>So instead of this:</p>\n\n<pre><code>58 02 0C 80 61 39 56 18 55 61 89 42 42 16 46 17 54 70 10 58 60 10 10 01 75 10 F0 C0 00 01 00 02 00 C0 00 D0 00 01 00 C4 00 01 00 02 00 01 00 00 02 00 00 00\n</code></pre>\n\n<p>I get this:</p>\n\n<pre><code>58 02 0C C2 80 61 39 56 18 55 61 C2 89 42 42 16 46 17 54 70 10 58 60 10 10 01 75 10 C3 B0 C3 80 00 01 00 02 00 C3 80 00 C3 90 00 01 00 C3 84 00 01 00 02 00 01 00 00 02 00 00 00\n</code></pre>\n\n<p>i tried modifying a bytes object itself, but i'm always getting that error:</p>\n\n<blockquote>\n  <p>TypeError: 'bytes' object does not support item assignment</p>\n</blockquote>\n\n<p>I'm new to Python so I don't know if there are better ways to do this right.</p>\n\n<hr>\n\n<h2>Solved (Thanks to John):</h2>\n\n<pre><code>filedata = bytearray(pathlib.Path(sys.argv[1]).read_bytes())\n# filedata = bytearray(open(sys.argv[1], 'rb').read()) also works\nfiledata[1] = 255 # modifying a single byte (0 - 255)\nfiledata[0:1] = b'\\xff' # inserting bytes\nfiledata.extend(255) # appending one single byte\nfiledata.extend(filedata2) # appending another array of bytes (bytearray object)\nfiledata.extend(b'\\xff\\xff') # appending bytes\nfiledata.extend([255, 255]) # appending bytes too\npathlib.Path(sys.argv[1]).write_bytes(filedata) # write data to a file\n# open(sys.argv[1], 'rb').write(filedata) should work too\n</code></pre>\n"}, {"tags": ["python", "pandas", "function", "conditional-statements", "std"], "comments": [{"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 2, "creation_date": 1562192525, "post_id": 56878546, "comment_id": 100305707, "body": "Can you provide your desired output given this input?"}, {"owner": {"reputation": 43423, "user_id": 1011724, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/2JAXi.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/1011724/dan"}, "edited": false, "score": 2, "creation_date": 1562192607, "post_id": 56878546, "comment_id": 100305725, "body": "What is wrong with <code>df.groupby([&#39;Name&#39;,&#39;Colour&#39;]).transform(&#39;mean&#39;)</code>?"}, {"owner": {"reputation": 13, "user_id": 11736550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/312b976565e34648bf609327a4f5a753?s=128&d=identicon&r=PG&f=1", "display_name": "Alphynn", "link": "https://stackoverflow.com/users/11736550/alphynn"}, "edited": false, "score": 0, "creation_date": 1562194924, "post_id": 56878546, "comment_id": 100306217, "body": "The solution below is fine for mean:  df.groupby([&#39;Name&#39;,&#39;Colour&#39;]).transform(&#39;mean&#39;)  But I didn&#39;t find the equivalent for standard deviation.  df.groupby([&#39;Name&#39;,&#39;Colour&#39;]).transform(&#39;std&#39;) &lt;- This doesn&#39;t work."}, {"owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "edited": false, "score": 0, "creation_date": 1562196221, "post_id": 56878546, "comment_id": 100306500, "body": "Can you just add your expected output, so we can stop this guessing game. Thanks"}, {"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 0, "creation_date": 1562196224, "post_id": 56878546, "comment_id": 100306502, "body": "@Alphynn <code>transform</code> with <code>std</code> should work. Can you comment on why it doesn&#39;t? My guess is you are getting <code>ValueError: Wrong number of items passed 2, placement implies 1</code> because you need to transform <i>only</i> the Age column. After you add the <code>mean</code> column, it will transform that too."}, {"owner": {"reputation": 13, "user_id": 11736550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/312b976565e34648bf609327a4f5a753?s=128&d=identicon&r=PG&f=1", "display_name": "Alphynn", "link": "https://stackoverflow.com/users/11736550/alphynn"}, "reply_to_user": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 0, "creation_date": 1562227110, "post_id": 56878546, "comment_id": 100313967, "body": "@ALollz Good guess ! You are right, this is the error I was getting. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 1, "creation_date": 1562195904, "post_id": 56878920, "comment_id": 100306425, "body": "What am I missing? <code>df.groupby([&#39;Name&#39;,&#39;Colour&#39;]).Age.transform(&#39;std&#39;)</code> works"}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "reply_to_user": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 1, "creation_date": 1562196139, "post_id": 56878920, "comment_id": 100306485, "body": "That\u2019s from OP\u2019s comment. Maybe <code>df.groupby([&#39;Name&#39;, &#39;Colour&#39;]).Age.transform(&#39;std&#39;)</code>?"}, {"owner": {"reputation": 13, "user_id": 11736550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/312b976565e34648bf609327a4f5a753?s=128&d=identicon&r=PG&f=1", "display_name": "Alphynn", "link": "https://stackoverflow.com/users/11736550/alphynn"}, "edited": false, "score": 0, "creation_date": 1562196766, "post_id": 56878920, "comment_id": 100306599, "body": "Ah ! Indeed. It works without the .Age. for the mean, but it requires the .Age. for std.  For code consistency, I have added .Age to both and it works: df[&#39;mean&#39;] = df.groupby([&#39;Name&#39;,&#39;Colour&#39;]).Age.transform(&#39;mean&#39;) df[&#39;std&#39;]=df.groupby([&#39;Name&#39;,&#39;Colour&#39;]).Age.transform(&#39;std&#39;)  Thank you!"}], "tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": false, "score": 1, "last_activity_date": 1562195359, "creation_date": 1562195359, "answer_id": 56878920, "question_id": 56878546, "link": "https://stackoverflow.com/questions/56878546/adding-a-new-pandas-dataframe-columns-populating-it-with-conditional-calculation/56878920#56878920", "title": "Adding a new pandas dataframe columns populating it with conditional calculations (mean if, standard deviation if)", "body": "<p>Since <code>transform</code> does not support <code>std</code>, we can go around by <code>groupby().agg</code> and <code>merge</code>:</p>\n\n<pre><code>new_df = df.groupby(['Name', 'Colour']).Age.agg({'mean','std'})\ndf = df.merge(new_df, left_on=['Name', 'Colour'], right_index=True)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>     Name Colour    Size  Age       std       mean\n0     Tom   Blue   Small   10  2.516611  12.333333\n1     Tom   Blue     Big   15  2.516611  12.333333\n5     Tom   Blue  Medium   12  2.516611  12.333333\n2     Tom    Red     Big    3  2.516611   5.333333\n3     Tom    Red   Small    8  2.516611   5.333333\n4     Tom    Red  Medium    5  2.516611   5.333333\n6    Nick   Blue   Small   15       NaN  15.000000\n7    Nick    Red  Medium   11  4.242641  14.000000\n8    Nick    Red   Small   17  4.242641  14.000000\n9   Julie   Blue     Big   14       NaN  14.000000\n10  Julie    Red     Big   11  4.358899   6.000000\n11  Julie    Red  Medium    3  4.358899   6.000000\n12  Julie    Red  Medium    4  4.358899   6.000000\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11736550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/312b976565e34648bf609327a4f5a753?s=128&d=identicon&r=PG&f=1", "display_name": "Alphynn", "link": "https://stackoverflow.com/users/11736550/alphynn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1338, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562310992, "creation_date": 1562192104, "last_edit_date": 1562310992, "question_id": 56878546, "link": "https://stackoverflow.com/questions/56878546/adding-a-new-pandas-dataframe-columns-populating-it-with-conditional-calculation", "title": "Adding a new pandas dataframe columns populating it with conditional calculations (mean if, standard deviation if)", "body": "<p>I need to add 2 columns to a Pandas data frame populated with conditional mean and standard deviation.</p>\n\n<pre><code># Import pandas library \nimport pandas as pd \n\n# Initialize list of lists \ndata = [\n    ['Tom',   'Blue', 'Small',  10, ], \n    ['Tom',   'Blue', 'Big',    15, ], \n    ['Tom',   'Red',  'Big',     3, ], \n    ['Tom',   'Red',  'Small',   8, ], \n    ['Tom',   'Red',  'Medium',  5, ], \n    ['Tom',   'Blue', 'Medium', 12, ], \n    ['Nick',  'Blue', 'Small',  15, ], \n    ['Nick',  'Red',  'Medium', 11, ], \n    ['Nick',  'Red',  'Small',  17, ], \n    ['Julie', 'Blue', 'Big',    14, ], \n    ['Julie', 'Red',  'Big',    11, ],\n    ['Julie', 'Red',  'Medium',  3, ], \n    ['Julie', 'Red',  'Medium',  4, ],\n]\n\n# Create the pandas DataFrame \ndf = pd.DataFrame(data, columns = ['Name', 'Colour', 'Size', 'Age']) \n\n# print dataframe. \ndf\n</code></pre>\n\n<p>In this example, I need to add 2 columns:\n<code>df['mean']</code> and <code>df['std']</code> conditional to the name and colour only.</p>\n\n<p>I looked at <code>.mean()</code> and <code>.std()</code> documentation but didn't find a way to add a set of conditions. I believe I might need 2 functions that, for each row, takes the name and the colour as arguments, calculate the mean or std over the whole series, and then populate the new columns.</p>\n\n<p><a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.std.html\" rel=\"nofollow noreferrer\">https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.std.html</a></p>\n\n<p>I believe I need a function that dynamically checks the name and the colour for each row, because, unlike this example data frame, my application is for a data frame that has thousands and names and thousands of colours.</p>\n\n<p>I know how to apply <code>.mean</code> or <code>.std</code> to a whole pandas series, without conditions:</p>\n\n<pre><code>df['Age'].std()\n</code></pre>\n\n<p>or</p>\n\n<pre><code>df['Age'].mean()\n</code></pre>\n\n<p>I also found that a group by + transformation does something slightly similar without the capacity to dynamically check for each row like a function could.</p>\n\n<pre><code>df['mean'] = df.groupby(['Name','Colour']).transform('mean')\n</code></pre>\n\n<p>Thank you for your help.</p>\n\n<p>Here is the output I expected. Thanks for the answers:\n<a href=\"https://i.stack.imgur.com/AfpD7.png\" rel=\"nofollow noreferrer\">Output dataframe</a></p>\n"}, {"tags": ["php", "python", "permutation", "repeat", "translate"], "comments": [{"owner": {"reputation": 455, "user_id": 2543234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/987c57812737e953114ab1c4481a0ca1?s=128&d=identicon&r=PG", "display_name": "Callan", "link": "https://stackoverflow.com/users/2543234/callan"}, "edited": false, "score": 0, "creation_date": 1562194125, "post_id": 56878510, "comment_id": 100306065, "body": "Rather than asking a question for which the answer is the solution, try to come up with a question that will help YOU find the solution. 1. It&#39;s much easier to learn that way. 2. I think the goal here should be to learn how to come up with the solution yourself. As a general rule of thumb, when you ask a question, think about weather the answer will help you find the solution, or the answer to your question is the solution. The former will likely get you more help than the latter.  And if you could post a snippet of your own attempt at converting the code to php, that would be even better."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 2555216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/469ecc256653b998613af0d96e3e4c67?s=128&d=identicon&r=PG", "display_name": "user2555216", "link": "https://stackoverflow.com/users/2555216/user2555216"}, "is_accepted": false, "score": 0, "last_activity_date": 1562197949, "creation_date": 1562197949, "answer_id": 56879160, "question_id": 56878510, "link": "https://stackoverflow.com/questions/56878510/how-to-make-a-permutation-without-the-repetitions/56879160#56879160", "title": "How to make a permutation without the repetitions?", "body": "<ul>\n<li>You start with an original collection, lets say [a, b, a]</li>\n<li>now you need to parse the collection</li>\n<li>for each unique element of the collection, you create a list started by the current element and followed by the permutation of the collection minus the current element (repetition allowed here)\nlike this:\n<a href=\"https://i.stack.imgur.com/9eIIi.png\" rel=\"nofollow noreferrer\">pseudo code of the permutation recursive algorithm</a></li>\n</ul>\n"}], "owner": {"reputation": 61, "user_id": 6603862, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209804989951854/picture?type=large", "display_name": "Romain Charles", "link": "https://stackoverflow.com/users/6603862/romain-charles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1562231960, "creation_date": 1562191854, "last_edit_date": 1562231960, "question_id": 56878510, "link": "https://stackoverflow.com/questions/56878510/how-to-make-a-permutation-without-the-repetitions", "title": "How to make a permutation without the repetitions?", "body": "<p>My goal is to test the solution of a game I created. Like a sudoku, you play with a grid. The grid makes you find a secret combination. The way I create the grid makes it impossible to make sure there is only one possible solution, and if there is more than one the grid is false. So I have to test the grid with all possible combinations. The fastest way to create all combinations is to generate all the possible presences of each possible number of the combination : for example [1,1,1 | 1,2,0 | 3,0,0] if lenght of the combination is 3 and three possible values. With that info I need to use permutation. </p>\n\n<p>Here is the script I wrote :</p>\n\n<pre><code>function recursion($grd_chfr, $pt_chfr, $tab, &amp;$tab_all) {\n    if($grd_chfr == 0) {\n        $tab_all[] = $tab;\n        return;\n    }\n    for($n = $pt_chfr; $n &lt;= $grd_chfr; $n++) {\n        $b = $tab;\n        $b[] =  $n;\n        recursion($grd_chfr - $n, $n, $b, $tab_all);\n    }\n}\n\nfunction permutations(array $elements)\n{\n    if (count($elements) &lt;= 1) {\n        yield $elements;\n    } else {\n        foreach (permutations(array_slice($elements, 1)) as $permutation) {\n            foreach (range(0, count($elements) - 1) as $i) {\n                yield array_merge(\n                    array_slice($permutation, 0, $i),\n                    [$elements[0]],\n                    array_slice($permutation, $i)\n                );\n            }\n        }\n    }\n}\n\n$somme = 7;\n$depart = 1;\n$entrees = 7;\n$tab_all = [];\n\n$time_start = microtime(true);\n\n// I use a recursive function to get every manner to spread values, to fill the combination whose length is $somme\nrecursion($somme, $depart, [], $tab_all);\n\n$new_tab_all = [];\n$count_gen = 0;\n\n//  if the number of possible values to use ($entrees) is higher or smaller than the length of the combination I adjust by adding zeros or by deleting distributions\nforeach($tab_all as $tab){\n    if(count($tab) &lt; $entrees){\n        $count = count($tab);\n        for($x = $depart; $x &lt;= $entrees - $count; $x++){\n            $tab[] = 0;\n        }\n        //  I create all possible permutation for each distribution, and that's where there is too much duplicatas\n        foreach(permutations($tab) as $combi){\n            if(!in_array($combi, $new_tab_all)) {\n                $new_tab_all[] = $combi;\n            }\n        }\n    }\n    elseif(count($tab) == $entrees){\n        $new_tab_all[] = $tab;\n    }\n}\n\n\n$time_stop = microtime(true);\necho round(($time_stop - $time_start), 2).\"s d'\u00e9coul\u00e9es, \".count($new_tab_all).\" solutions (\".$count_gen.\" g\u00e9n\u00e9r\u00e9es).&lt;/br&gt;&lt;/br&gt;\";\n</code></pre>\n\n<p>I need a script to get every possible unique permutation of a combination. \nFor example, having the array [1,1,2,3], I would like a script returning [[1,1,3,2], [1,3,1,2], [3,1,1,2], [2,1,3,1], [2,3,1,1], [1,3,2,1], [1,1,2,3], ...] an never having twice the same combination.</p>\n\n<p>To make permutations, I use a script but it generates a lot of repetitions with combinations like [1,1,1,1,2,3].\nI found it there : <a href=\"https://stackoverflow.com/questions/5506888/permutations-all-possible-sets-of-numbers/21084492\">Permutations - all possible sets of numbers</a></p>\n\n<pre><code>function permutations(array $elements)\n{\n    if (count($elements) &lt;= 1) {\n        yield $elements;\n    } else {\n        foreach (permutations(array_slice($elements, 1)) as $permutation) {\n            foreach (range(0, count($elements) - 1) as $i) {\n                yield array_merge(\n                    array_slice($permutation, 0, $i),\n                    [$elements[0]],\n                    array_slice($permutation, $i)\n                );\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>I also found a script which I think is what I need, but it is scripted in python, and I need it in php.\nI found it there : <a href=\"https://stackoverflow.com/questions/6284396/permutations-with-unique-values\">permutations with unique values</a></p>\n\n<pre><code>class unique_element:\n    def __init__(self,value,occurrences):\n        self.value = value\n        self.occurrences = occurrences\n\ndef perm_unique(elements):\n    eset=set(elements)\n    listunique = [unique_element(i,elements.count(i)) for i in eset]\n    u=len(elements)\n    return perm_unique_helper(listunique,[0]*u,u-1)\n\ndef perm_unique_helper(listunique,result_list,d):\n    if d &lt; 0:\n        yield tuple(result_list)\n    else:\n        for i in listunique:\n            if i.occurrences &gt; 0:\n                result_list[d]=i.value\n                i.occurrences-=1\n                for g in  perm_unique_helper(listunique,result_list,d-1):\n                    yield g\n                i.occurrences+=1\n\n\n\n\na = list(perm_unique([1,1,2]))\nprint(a)\n</code></pre>\n\n<p>I don't know how to translate the second code in php, or how to modify the first code to exclude repetitions.</p>\n"}, {"tags": ["python", "pandas", "dataframe", "pivot", "pivot-table"], "comments": [{"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1562192232, "post_id": 56878497, "comment_id": 100305660, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/47152691/how-to-pivot-a-dataframe\">How to pivot a dataframe</a>"}, {"owner": {"reputation": 1767, "user_id": 1917500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/619b3bfba2a078dc60caca6df3ab37ec?s=128&d=identicon&r=PG&f=1", "display_name": "Karthik V", "link": "https://stackoverflow.com/users/1917500/karthik-v"}, "edited": false, "score": 0, "creation_date": 1562193370, "post_id": 56878497, "comment_id": 100305897, "body": "You are likely to get more responses if you format your input data in either code that someone can directly create a DataFrame out of, or paste the output from a juputer notebook session that can easily interpreted using pandas.read_clipboard. Also, why are your product ids different in the two Dataframes?"}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1562193657, "post_id": 56878497, "comment_id": 100305961, "body": "Try <code>unstack</code>: <code>df.set_index(list(df.columns[:-1])).Quantity.unstack(&#39;Dispen&zwnj;&#8203;se Type&#39;)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "is_accepted": true, "score": 1, "last_activity_date": 1562197898, "creation_date": 1562197898, "answer_id": 56879155, "question_id": 56878497, "link": "https://stackoverflow.com/questions/56878497/pivoting-one-dataframe-column-with-associated-values-to-create-multiple-columns/56879155#56879155", "title": "Pivoting one dataframe column with associated values to create multiple columns", "body": "<p><em>Since this is not a trivial pivotting, I will answer this question and not mark it as duplicate.</em></p>\n\n<ol>\n<li>First we <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.pivot_table.html\" rel=\"nofollow noreferrer\"><code>pivot</code></a> your data and <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.sort_index.html\" rel=\"nofollow noreferrer\"><code>sort_index</code></a> by <code>level=2</code> (which is Product ID).</li>\n<li>We flatten your multiindex columns with <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Index.get_level_values.html\" rel=\"nofollow noreferrer\"><code>columns.get_level_values</code></a></li>\n<li><a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.reset_index.html\" rel=\"nofollow noreferrer\"><code>Reset index</code></a> to get them back as columns and remove the column axis name with <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.rename_axis.html\" rel=\"nofollow noreferrer\"><code>rename_axis</code></a></li>\n</ol>\n\n<pre><code># Step1\npiv = df.pivot_table(index=['Branch ID', 'Date', 'Product ID'], columns='Dispense Type').sort_index(level=2)\n\n#Step2\npiv.columns = piv.columns.get_level_values(1)\n\n#Step3\npiv = piv.reset_index().rename_axis(None, axis=1)\n</code></pre>\n\n<pre><code>  Branch ID    Date Product ID  Received  Shipped Out  Transferred\n0         A  5/6/19       ABC3         8           10            0\n1         A  5/7/19       ABC3         7            5           20\n2         B  5/6/19       ABC3         0           40            1\n3         B  5/7/19       ABC3         2            6            3\n4         A  5/6/19       QRE3         5            7           10\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 11661320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90223a876042279784079c31f1995914?s=128&d=identicon&r=PG&f=1", "display_name": "Nik Tur", "link": "https://stackoverflow.com/users/11661320/nik-tur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 1, "accepted_answer_id": 56879155, "answer_count": 1, "score": 0, "last_activity_date": 1562197898, "creation_date": 1562191720, "last_edit_date": 1562193924, "question_id": 56878497, "link": "https://stackoverflow.com/questions/56878497/pivoting-one-dataframe-column-with-associated-values-to-create-multiple-columns", "title": "Pivoting one dataframe column with associated values to create multiple columns", "body": "<p>I have a dataframe that looks like this: </p>\n\n<p><strong>CURRENT DATAFRAME</strong></p>\n\n<pre><code>Branch ID | Dispense Type | Product ID |   Date   | Quantity\n-------------------------------------------------------------\n    A     |  Shipped Out  |    ABC3    |  5/6/19  |     10\n    A     |  Received     |    ABC3    |  5/6/19  |      8\n    A     |  Transferred  |    ABC3    |  5/6/19  |      0\n\n    A     |  Shipped Out  |    ABC3    |  5/7/19  |      5\n    A     |  Received     |    ABC3    |  5/7/19  |      7\n    A     |  Transferred  |    ABC3    |  5/7/19  |     20\n\n    B     |  Shipped Out  |    ABC3    |  5/6/19  |     40\n    B     |  Received     |    ABC3    |  5/6/19  |      0\n    B     |  Transferred  |    ABC3    |  5/6/19  |      1\n\n    B     |  Shipped Out  |    ABC3    |  5/7/19  |      6\n    B     |  Received     |    ABC3    |  5/7/19  |      2\n    B     |  Transferred  |    ABC3    |  5/7/19  |      3\n\n    A     |  Shipped Out  |    QRE3    |  5/6/19  |      7\n    A     |  Transferred  |    QRE3    |  5/6/19  |     10\n    A     |  Received     |    QRE3    |  5/6/19  |      5\n</code></pre>\n\n<p>(The spaces between the rows are included here just so that the dataframe is clear and makes sense, I don't need spaces in the actual dataframe generated in my code.)</p>\n\n<p>Ideally, the Dataframe I would like as an end-result would use the column \"Dispense Type\" to make additional columns, and reduce the number of rows as a result.</p>\n\n<p><strong>DESIRED RESULT DATAFRAME</strong></p>\n\n<pre><code>Branch ID |   Date   | Product ID | Shipped Out | Received | Transferred\n------------------------------------------------------------------------\n    A     |  5/6/19  |    ABC3    |     10      |    8     |     0\n    A     |  5/7/19  |    ABC3    |      5      |    7     |    20\n\n    B     |  5/6/19  |    ABC3    |     40      |    0     |     1\n    B     |  5/7/19  |    ABC3    |      6      |    2     |     3\n\n    A     |  5/6/19  |    QRE3    |      7      |    10    |     5\n</code></pre>\n\n<p>One Branch can ship two different products, which explains why there are two different A blocks (with different Product IDs) in the original and result dataframes.</p>\n\n<p>I tried to use Pivot table, but what happens is that when one column, 'Shipped Out' has a value, the other two columns will have the value NaN. So there's only one column that will have a value while the other two will be filled with Nulls.</p>\n\n<p><em>Note: I understand that this is similar to the \"how to pivot a dataframe\" question, but after reading it, and trying certain methods, I have only run into errors and am not sure what tactic would work.</em> </p>\n"}, {"tags": ["python", "python-3.x", "dictionary"], "comments": [{"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 2, "creation_date": 1562191688, "post_id": 56878463, "comment_id": 100305560, "body": "What &quot;dictionary name&quot; are you talking about?"}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 2, "creation_date": 1562191833, "post_id": 56878463, "comment_id": 100305588, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for your question with sample input and desired output"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1562191898, "post_id": 56878463, "comment_id": 100305600, "body": "Dictionaries don&#39;t have names. Dictionary elements have keys, but <code>if item in dict</code> searches the keys, so <code>item</code> contains the key that was found."}, {"owner": {"reputation": 43423, "user_id": 1011724, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/2JAXi.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/1011724/dan"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1562192163, "post_id": 56878463, "comment_id": 100305643, "body": "To follow on from @Barmar, you can get the corresponding value with <code>dict[item]</code>. You can also skip the <code>if</code> using either <code>try</code> or else <code>dict.get(item)</code>. Finally, don&#39;t use <code>dict</code> as a variable name as you&#39;ll hide the built-in."}, {"owner": {"reputation": 10474, "user_id": 5015356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d774038494809a56eb21a730d9ba454?s=128&d=identicon&r=PG&f=1", "display_name": "Ruben Helsloot", "link": "https://stackoverflow.com/users/5015356/ruben-helsloot"}, "edited": false, "score": 0, "creation_date": 1562192206, "post_id": 56878463, "comment_id": 100305650, "body": "I think you might be looking for <a href=\"https://stackoverflow.com/q/8023306/5015356\">stackoverflow.com/q/8023306/5015356</a>"}, {"owner": {"reputation": 9, "user_id": 9629807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4021c1bcdb9bde6d552da5c1a84a790?s=128&d=identicon&r=PG&f=1", "display_name": "swanse", "link": "https://stackoverflow.com/users/9629807/swanse"}, "edited": false, "score": 0, "creation_date": 1562194393, "post_id": 56878463, "comment_id": 100306117, "body": "I edited question for more clearness now"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9239809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UntOs.png?s=128&g=1", "display_name": "tmechen", "link": "https://stackoverflow.com/users/9239809/tmechen"}, "edited": false, "score": 0, "creation_date": 1562195364, "post_id": 56878907, "comment_id": 100306314, "body": "(this wont work if the key you are looking for is in the most parent dict because of obvious reason: this one does not have a parent key.)"}], "tags": [], "owner": {"reputation": 11, "user_id": 9239809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UntOs.png?s=128&g=1", "display_name": "tmechen", "link": "https://stackoverflow.com/users/9239809/tmechen"}, "is_accepted": false, "score": 0, "last_activity_date": 1562195242, "creation_date": 1562195242, "answer_id": 56878907, "question_id": 56878463, "link": "https://stackoverflow.com/questions/56878463/if-item-in-dictionary-true-return-dictionary-name-as-a-string/56878907#56878907", "title": "if item in dictionary == True -&gt; return dictionary name as a string", "body": "<pre><code>def find_key(obj, key):\n    if key in obj:\n        return obj\n    for k, v in obj.items():\n        if isinstance(v, dict):\n            item = find_key(v, key)\n            if item is not None:\n                return k\n</code></pre>\n\n<p>(source: modified <a href=\"https://stackoverflow.com/questions/8023306/get-key-by-value-in-dictionary\">Get key by value in dictionary</a>)</p>\n"}], "owner": {"reputation": 9, "user_id": 9629807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4021c1bcdb9bde6d552da5c1a84a790?s=128&d=identicon&r=PG&f=1", "display_name": "swanse", "link": "https://stackoverflow.com/users/9629807/swanse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1562195242, "creation_date": 1562191478, "last_edit_date": 1562194229, "question_id": 56878463, "link": "https://stackoverflow.com/questions/56878463/if-item-in-dictionary-true-return-dictionary-name-as-a-string", "title": "if item in dictionary == True -&gt; return dictionary name as a string", "body": "<p>I need perform search in some dictionary structure :</p>\n\n<pre><code>dic_global = {\n    'key_lev1_1': {\n        'key_lev2_a': 'some_value_1',\n        'key_lev2_b': 'some_value_2'\n                  },\n    'key_lev1_2': 'some_value_111'\n}\n</code></pre>\n\n<p>and I need to perform recursive search for item in the whole structure so that function would return the key where the item was.\nso if fun found 'key_lev2_a' it returns 'key_lev1_1' - the name of enclosure the key where the dict with 'key_lev2_a' is.</p>\n\n<p>is it possible ?</p>\n"}, {"tags": ["python", "scikit-learn", "svm", "google-colaboratory", "joblib"], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 6167591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a414a13a8512656615da116102fac58?s=128&d=identicon&r=PG&f=1", "display_name": "Victor S.", "link": "https://stackoverflow.com/users/6167591/victor-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1562253330, "last_edit_date": 1562253330, "creation_date": 1562248518, "answer_id": 56889501, "question_id": 56878449, "link": "https://stackoverflow.com/questions/56878449/loaded-model-receives-different-prediction-compared-to-saved-model/56889501#56889501", "title": "Loaded model receives different prediction compared to saved model", "body": "<p>Is <code>loaded_model</code> always trained with the same data? you might be encountering this problem because your fitted model is trained with different chunks (folds) of your dataset and you are fitting/saving it with the last iteration only and hence, each time you test it, the model learns from different data (given by each fold) and returns different predictions. This if model fitting is within your cross-validation loop. May I ask, what type of train-test split did you use? shuffled?</p>\n"}], "owner": {"reputation": 21, "user_id": 8887001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f91569ee81fa26e44691d601d5349512?s=128&d=identicon&r=PG&f=1", "display_name": "Nadimprodutions", "link": "https://stackoverflow.com/users/8887001/nadimprodutions"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1562253330, "creation_date": 1562191310, "last_edit_date": 1562210282, "question_id": 56878449, "link": "https://stackoverflow.com/questions/56878449/loaded-model-receives-different-prediction-compared-to-saved-model", "title": "Loaded model receives different prediction compared to saved model", "body": "<p>I am trying to save a model and load it into a different session, but I am having prediction inconsistencies, and I would appreciate any help that can be offered. So here is what I did...</p>\n\n<p>First, after running the model, I used this code to save the model:</p>\n\n<pre><code>from sklearn.externals import joblib\njoblib.dump(clf, \"models.pkl\")\n</code></pre>\n\n<p>and then to load the file in a different colaboratory notebook, I used the function </p>\n\n<pre><code>from sklearn.externals import joblib\nloaded_model = joblib.load('models.pkl')\n</code></pre>\n\n<p>then the program I used to process a single image for testing </p>\n\n<pre><code>img_toArray = cv2.imread(\"/content/ESD/ESD/folder1/img1.png\")\nnew_array = cv2.resize(img_toArray, (220, 220))\nnew_array = np.array(new_array).reshape(1,145200)\n</code></pre>\n\n<p>but this results in an output of array([4]) with every image I test, and I am not sure why.</p>\n\n<p>I have also tried to reload the entire dataset again and separate the labels from the features (the image), and use train_test_split to dedicate 90% of the dataset for testing, and when I run the features (images) to test with, through the block of code:</p>\n\n<pre><code>loaded_model.predict(np.array(xTest[whatEverNumber]).reshape(1,145200))\n</code></pre>\n\n<p>I get the right predictions. So I am confused as to what I a doing wrong, because in both examples,I am processing the images in basically the same method, and then separating the images and running them through the same prediction method. So I would appreciate any help in figuring out what I did wrong.</p>\n\n<p>Extra information that may prove beneficial: I am using colaboratory and my model is an sklearn SVM that runs through a cross_validation_predict, cross_validation_predict, and finally an SVM fit function. </p>\n\n<p>Thank you in advance!</p>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 2, "creation_date": 1562191594, "post_id": 56878441, "comment_id": 100305537, "body": "If you try and write values containing commas into a comma-separated file, they have to be quoted so you can tell the commas that are part of the values from the commas that separate the values. If you want them to be separate values, don&#39;t join them all up as one value."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11736599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/800ddceb8804b5a52a775113c646475a?s=128&d=identicon&r=PG&f=1", "display_name": "roman", "link": "https://stackoverflow.com/users/11736599/roman"}, "edited": false, "score": 0, "creation_date": 1562219808, "post_id": 56878480, "comment_id": 100310756, "body": "Thanks , With what version of Python ? Cuz I does not work , please help !"}, {"owner": {"reputation": 6489, "user_id": 5086255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XiEYC.jpg?s=128&g=1", "display_name": "sahasrara62", "link": "https://stackoverflow.com/users/5086255/sahasrara62"}, "reply_to_user": {"reputation": 3, "user_id": 11736599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/800ddceb8804b5a52a775113c646475a?s=128&d=identicon&r=PG&f=1", "display_name": "roman", "link": "https://stackoverflow.com/users/11736599/roman"}, "edited": false, "score": 0, "creation_date": 1562219931, "post_id": 56878480, "comment_id": 100310780, "body": "i am using python 3.6"}], "tags": [], "owner": {"reputation": 6489, "user_id": 5086255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XiEYC.jpg?s=128&g=1", "display_name": "sahasrara62", "link": "https://stackoverflow.com/users/5086255/sahasrara62"}, "is_accepted": true, "score": 5, "last_activity_date": 1562220025, "last_edit_date": 1562220025, "creation_date": 1562191604, "answer_id": 56878480, "question_id": 56878441, "link": "https://stackoverflow.com/questions/56878441/how-to-write-integer-values-to-file-without-quotes-and-parentheses/56878480#56878480", "title": "How to write integer values to file without quotes and parentheses", "body": "<p>you need to unpack the key value to get it into list. ie(1,2,1) ->1,2,1 and pass this list to<code>writerow</code> function . </p>\n\n<p>in your present code <code>[(1,1,1),600]</code> is going as feed and it is considering it as 2 element list hence producing mentioned output.</p>\n\n<p>you need to unpack the key value ie <code>[(1,1,1),600]</code> to <code>[1,1,1,600]</code></p>\n\n<p>which can be achive by using <code>*</code> oprator,  <code>[*(1,1,1),600]</code></p>\n\n<p>also <code>open</code> with <code>w</code> mode not <code>wb</code> binary mode, as you are providing the data in ASCII format not in binary format</p>\n\n<pre><code>import csv\nd={(1, 1, 1): 600, (5, 5, 5): 700, (4, 4, 4): 800}\n\n\nwith open(\"out.csv\", \"w\") as f:\n    w = csv.writer(f)\n    for key,items in d.items():\n        w.writerow([*key,items])\n</code></pre>\n\n<p>otherwise you can use (if not want to unpack with <code>*</code></p>\n\n<pre><code>import csv\nd={(1, 1, 1): 600, (5, 5, 5): 700, (4, 4, 4): 800}\n\n\nwith open(\"out.csv\", \"w\") as f:\n    w = csv.writer(f)\n    for key,items in d.items():\n        lis = [i for i in key]+[items]\n        w.writerow(lis)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11736599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/800ddceb8804b5a52a775113c646475a?s=128&d=identicon&r=PG&f=1", "display_name": "roman", "link": "https://stackoverflow.com/users/11736599/roman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 1, "accepted_answer_id": 56878480, "answer_count": 1, "score": 0, "last_activity_date": 1562220025, "creation_date": 1562191268, "last_edit_date": 1562196767, "question_id": 56878441, "link": "https://stackoverflow.com/questions/56878441/how-to-write-integer-values-to-file-without-quotes-and-parentheses", "title": "How to write integer values to file without quotes and parentheses", "body": "<p>I have a dictionary with keys as a tuple, I want to write a file with no quotes and parentheses.</p>\n\n<p>I tried using <code>\",\".join(map(str, key))</code>.</p>\n\n<pre><code>import csv\nd={(1, 1, 1): 600, (5, 5, 5): 700, (4, 4, 4): 800}\n\n\nwith open(\"out.csv\", \"wb\") as f:\n    w = csv.writer(f)\n    for key,items in d.items():\n        w.writerow([key,items])\n</code></pre>\n\n<p>I get this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>\"(1, 1, 1)\",600\n\"(5, 5, 5)\",700\n\"(4, 4, 4)\",800\n</code></pre>\n\n<p>I expect this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>1, 1, 1, 600\n5, 5, 5, 700\n4, 4, 4, 800\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "cmd", "latex", "pylatex"], "comments": [{"owner": {"reputation": 38377, "user_id": 3074564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yo5QG.png?s=128&g=1", "display_name": "Mofi", "link": "https://stackoverflow.com/users/3074564/mofi"}, "edited": false, "score": 1, "creation_date": 1562598071, "post_id": 56878428, "comment_id": 100415621, "body": "You could have also asked for: <b>How to run a console application without displaying console window?</b> That would be exactly the same question. I suggest to use Stack Overflow search for example with <a href=\"https://stackoverflow.com/search?q=console+application+window+hidden\">console application window hidden</a>. A very common solution is using a VBScript executed with <code>wscript.exe</code> (Windows GUI version of Windows Scripting Host) which runs the console application. Also common is using a Python script and <code>pythonw.exe</code>, see <a href=\"https://stackoverflow.com/questions/9705982/\">pythonw.exe or python.exe?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 429, "user_id": 10295907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z31fH.jpg?s=128&g=1", "display_name": "Pavel.D", "link": "https://stackoverflow.com/users/10295907/pavel-d"}, "edited": false, "score": 0, "creation_date": 1562749756, "post_id": 56944411, "comment_id": 100471381, "body": "Thanks for your explanation and trying to give a possible solution, As you mention changing <code>silent = True</code>, wont really help, I do what you suggest but it does&#39;t work or help, still latex console displays. maybe some code for forcing <code>latexmk.bat</code> may help."}, {"owner": {"reputation": 1376, "user_id": 6168792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Bim4k.png?s=128&g=1", "display_name": "David J", "link": "https://stackoverflow.com/users/6168792/david-j"}, "reply_to_user": {"reputation": 429, "user_id": 10295907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z31fH.jpg?s=128&g=1", "display_name": "Pavel.D", "link": "https://stackoverflow.com/users/10295907/pavel-d"}, "edited": false, "score": 1, "creation_date": 1562891802, "post_id": 56944411, "comment_id": 100531277, "body": "thanks for the reply @Pavel.D I&#39;ll have a quick look tomorrow when I have some time :)"}], "tags": [], "owner": {"reputation": 1376, "user_id": 6168792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Bim4k.png?s=128&g=1", "display_name": "David J", "link": "https://stackoverflow.com/users/6168792/david-j"}, "is_accepted": false, "score": 2, "last_activity_date": 1562665659, "last_edit_date": 1562665659, "creation_date": 1562637430, "answer_id": 56944411, "question_id": 56878428, "link": "https://stackoverflow.com/questions/56878428/how-to-hide-command-prompt-popup-during-launching-pylatex-or-latexmk/56944411#56944411", "title": "How to hide command prompt popup during launching PyLatex or Latexmk", "body": "<p>Having had a look into Pylatex's source, the generate_pdf() method which I'm guessing you could be using, does in-fact allow for a silent=true/false parameter</p>\n\n<p><strong>Source comment:</strong></p>\n\n<pre><code>silent: bool\n    Whether to hide compiler output\n</code></pre>\n\n<p>However, this doesn't seem to be doing an awful lot and I believe if you were to pass that parameter in, you might still face the same issue, due to;</p>\n\n<pre><code>    else:\n        if not silent:\n            print(output.decode())\n</code></pre>\n\n<p>It seems there are two individual places where the use of check_output, which is a subprocess method, is being called to start-up latexmk. Which contributes to the window your seeing.</p>\n\n<p><strong>pylatest/document.py lines:</strong></p>\n\n<ul>\n<li><p>227</p>\n\n<pre><code>    output = subprocess.check_output(command,\n                                     stderr=subprocess.STDOUT)\n</code></pre></li>\n<li><p>248</p>\n\n<pre><code>     output = subprocess.check_output(command,\n                                     stderr=subprocess.STDOUT)\n</code></pre></li>\n</ul>\n\n<p><strong>Possible Solution</strong></p>\n\n<p>You could make the adjustment to both those lines, by passing in the extra parameter shell=True, which will not display a cmd window upon invoking latexmk.</p>\n\n<pre><code>         output = subprocess.check_output(command,\n                                         stderr=subprocess.STDOUT,\n                                         shell=True)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 429, "user_id": 10295907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z31fH.jpg?s=128&g=1", "display_name": "Pavel.D", "link": "https://stackoverflow.com/users/10295907/pavel-d"}, "edited": false, "score": 0, "creation_date": 1574592700, "post_id": 59012210, "comment_id": 104280209, "body": "Thanks for commenting. I have tried Start-Process in PowerShell, but unfortunately does not work."}], "tags": [], "owner": {"reputation": 406, "user_id": 7057529, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-SA_vlNIMEME/AAAAAAAAAAI/AAAAAAAAAEw/lgQMqY0cPXw/photo.jpg?sz=128", "display_name": "Anirudh Panchangam", "link": "https://stackoverflow.com/users/7057529/anirudh-panchangam"}, "is_accepted": false, "score": 0, "last_activity_date": 1574542753, "creation_date": 1574542753, "answer_id": 59012210, "question_id": 56878428, "link": "https://stackoverflow.com/questions/56878428/how-to-hide-command-prompt-popup-during-launching-pylatex-or-latexmk/59012210#59012210", "title": "How to hide command prompt popup during launching PyLatex or Latexmk", "body": "<p>I believe what you're looking to do is hide the gui that the application uses. It has nothing specific to do with Pylatex.</p>\n\n<p>You could try this </p>\n\n<pre><code>Start-Process \"C:\\path\\to\\your.exe\" -WindowStyle Hidden\n</code></pre>\n\n<p>Try this in powershell.\nIf it works for you, you could dump it in a .bat file and use that instead of having to type this in everytime.</p>\n"}], "owner": {"reputation": 429, "user_id": 10295907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z31fH.jpg?s=128&g=1", "display_name": "Pavel.D", "link": "https://stackoverflow.com/users/10295907/pavel-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 308, "favorite_count": 0, "answer_count": 2, "score": 7, "last_activity_date": 1574542753, "creation_date": 1562191197, "question_id": 56878428, "link": "https://stackoverflow.com/questions/56878428/how-to-hide-command-prompt-popup-during-launching-pylatex-or-latexmk", "title": "How to hide command prompt popup during launching PyLatex or Latexmk", "body": "<p>How could I hide command prompt that pops up during launch and execute <code>pylatex</code> codes. I have a page working on it and generate pdf. I need to hide popup window when I run the code. </p>\n\n<p><strong>Talking about this window:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/46Owv.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/46Owv.png\" alt=\"enter image description here\"></a></p>\n\n<p>Is there a way to hide or not showing <code>latexmk.exe</code> popup?</p>\n\n<p>I have been googling and searching but I found nothing related to the issue. </p>\n"}, {"tags": ["python", "anaconda", "conda"], "comments": [{"owner": {"reputation": 695, "user_id": 948768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9530f594d6f5164abbdae0b94028cdf7?s=128&d=identicon&r=PG", "display_name": "Arturo Moncada-Torres", "link": "https://stackoverflow.com/users/948768/arturo-moncada-torres"}, "edited": false, "score": 0, "creation_date": 1562226615, "post_id": 56878386, "comment_id": 100313732, "body": "By the way, you can use the command <code>conda config --set report_errors true</code> to send the error reports automatically to the developers"}, {"owner": {"reputation": 695, "user_id": 948768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9530f594d6f5164abbdae0b94028cdf7?s=128&d=identicon&r=PG", "display_name": "Arturo Moncada-Torres", "link": "https://stackoverflow.com/users/948768/arturo-moncada-torres"}, "edited": false, "score": 1, "creation_date": 1562368751, "post_id": 56878386, "comment_id": 100364545, "body": "I <a href=\"https://github.com/conda/conda/issues/8876\" rel=\"nofollow noreferrer\">raised an issue</a> for the developers. If you are interested, keep an eye there. I will get back when I solve this"}], "answers": [{"comments": [{"owner": {"reputation": 400, "user_id": 9148880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XKm4r.jpg?s=128&g=1", "display_name": "manoelpqueiroz", "link": "https://stackoverflow.com/users/9148880/manoelpqueiroz"}, "edited": false, "score": 2, "creation_date": 1562243186, "post_id": 56885587, "comment_id": 100322792, "body": "<code>conda install --revision 9</code> was already attempted as I mentioned above. My problem is that this environment now does not accept any sort of modification now. <code>conda update</code> fails for any package and also <code>conda remove</code> runs into the same &quot;unexpected error&quot; mentioned above and is unable to find the cause for it."}, {"owner": {"reputation": 965, "user_id": 5973377, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--LmmMQqGfQQ/AAAAAAAAAAI/AAAAAAAADlA/RLmvq8IYjV8/photo.jpg?sz=128", "display_name": "Nishant Patel", "link": "https://stackoverflow.com/users/5973377/nishant-patel"}, "reply_to_user": {"reputation": 400, "user_id": 9148880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XKm4r.jpg?s=128&g=1", "display_name": "manoelpqueiroz", "link": "https://stackoverflow.com/users/9148880/manoelpqueiroz"}, "edited": false, "score": 0, "creation_date": 1562306270, "post_id": 56885587, "comment_id": 100340197, "body": "Do this delete .condarc file in your home or root directory"}], "tags": [], "owner": {"reputation": 965, "user_id": 5973377, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--LmmMQqGfQQ/AAAAAAAAAAI/AAAAAAAADlA/RLmvq8IYjV8/photo.jpg?sz=128", "display_name": "Nishant Patel", "link": "https://stackoverflow.com/users/5973377/nishant-patel"}, "is_accepted": true, "score": 0, "last_activity_date": 1562234873, "creation_date": 1562234873, "answer_id": 56885587, "question_id": 56878386, "link": "https://stackoverflow.com/questions/56878386/how-to-revert-conda-updates-when-prompt-meets-unexpected-error/56885587#56885587", "title": "How to revert conda updates when prompt meets unexpected error", "body": "<p>As a fix, update your conda environment also and reset spyder kernals</p>\n\n<pre><code>conda update conda\nconda update --all\nconda remove spyder-kernels\nconda install spyder-kernels=0.*\n</code></pre>\n\n<p><strong>OR</strong></p>\n\n<p>As a workaround\nOn thing i can suggest is, list down all the conda revisions, this is similar to restore points in your conda environment</p>\n\n<pre><code>conda list --revisions\n</code></pre>\n\n<p>Later, try to roll back to the previous version which you think was working fine.\nexample </p>\n\n<p><code>conda install --revision 35</code></p>\n"}, {"tags": [], "owner": {"reputation": 695, "user_id": 948768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9530f594d6f5164abbdae0b94028cdf7?s=128&d=identicon&r=PG", "display_name": "Arturo Moncada-Torres", "link": "https://stackoverflow.com/users/948768/arturo-moncada-torres"}, "is_accepted": false, "score": 1, "last_activity_date": 1563487550, "creation_date": 1563487550, "answer_id": 57103184, "question_id": 56878386, "link": "https://stackoverflow.com/questions/56878386/how-to-revert-conda-updates-when-prompt-meets-unexpected-error/57103184#57103184", "title": "How to revert conda updates when prompt meets unexpected error", "body": "<p>Apparently <a href=\"https://github.com/conda/conda/issues/8876#issuecomment-512929690\" rel=\"nofollow noreferrer\">this was solved in the latest version of conda</a>. You just need to update it using </p>\n\n<p><code>conda update conda -c conda-canary</code></p>\n\n<p>I haven't had the chance to try it myself - I'm working on a project and I don't want to break anything until I am done with it. However, I will give it a go after I am done with it.</p>\n"}, {"tags": [], "owner": {"reputation": 344, "user_id": 3763608, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/PNSLh.jpg?s=128&g=1", "display_name": "Rahul Saxena", "link": "https://stackoverflow.com/users/3763608/rahul-saxena"}, "is_accepted": false, "score": 0, "last_activity_date": 1580193351, "creation_date": 1580193351, "answer_id": 59943304, "question_id": 56878386, "link": "https://stackoverflow.com/questions/56878386/how-to-revert-conda-updates-when-prompt-meets-unexpected-error/59943304#59943304", "title": "How to revert conda updates when prompt meets unexpected error", "body": "<p>Am sharing the steps that worked for me. \nPlease consider changing the environment to <code>root/base</code>. You can check all the available environments using <code>conda env list</code>. If it shows <code>base</code> as one of the environments, consider activating the environment using <code>activate base</code> or <code>source activate base</code>.</p>\n\n<p>After activating the environment, all the conda commands started work. It even helped to install new packages and create new environments.</p>\n"}], "owner": {"reputation": 400, "user_id": 9148880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XKm4r.jpg?s=128&g=1", "display_name": "manoelpqueiroz", "link": "https://stackoverflow.com/users/9148880/manoelpqueiroz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2242, "favorite_count": 0, "accepted_answer_id": 56885587, "answer_count": 3, "score": 1, "last_activity_date": 1580193351, "creation_date": 1562190933, "question_id": 56878386, "link": "https://stackoverflow.com/questions/56878386/how-to-revert-conda-updates-when-prompt-meets-unexpected-error", "title": "How to revert conda updates when prompt meets unexpected error", "body": "<p>I have updated Spyder (<code>conda update spyder</code>) this morning using conda on Windows 8 and later when I checked I was unable to launch Spyder and Anaconda Navigator.</p>\n\n<p>I tried updating the package again, but the prompt gave me the following warning and wasn't able to retrieve the package metadata:</p>\n\n<pre><code>WARNING conda.base.context:use_only_tar_bz2(632): Conda is constrained to only\nusing the old .tar.bz2 file format because you have conda-build installed, and\nit is &lt;3.18.3.  Update or remove conda-build to get smaller downloads and faster\nextractions.\n</code></pre>\n\n<p>Given that, I tried reverting the entire operation using <code>conda install --revision 9</code> (the previous revision), upon which I ran into the same warning message. This time, the prompt attempted to rollback, but it ultimately crashed with a lengthy report that finished with the following message: </p>\n\n<pre><code>An unexpected error has occurred. Conda has prepared the above report. If submitted,\nthis report will be used by core maintainers to improve future releases of conda.\nWould you like conda to send this report to the core maintainers?\n</code></pre>\n\n<p>Attempting either <code>conda update conda-build</code> and <code>conda remove conda-build</code> as suggested by the prompt incurs in the exact same error.</p>\n\n<p>How can I restore my environment since conda locks me inside an error whenever I perform an operation to revert or remove something?</p>\n\n<p>If it helps, this is all that changed in the environment with the update:</p>\n\n<pre><code>2019-07-03 10:40:00  (rev 10)\n ca-certificates  {2019.3.9 (conda-forge) -&gt; 2019.6.16 (conda-forge)}\n certifi  {2019.3.9 (conda-forge) -&gt; 2019.6.16 (conda-forge)}\n conda  {4.6.14 (conda-forge) -&gt; 4.7.5 (conda-forge)}\n cryptography  {2.5 (conda-forge) -&gt; 2.7 (conda-forge)}\n krb5  {1.16.2 (conda-forge) -&gt; 1.16.1}\n libssh2  {1.8.0 (conda-forge) -&gt; 1.8.2 (conda-forge)}\n openssl  {1.0.2r (conda-forge) -&gt; 1.1.1b (conda-forge)}\n pycurl  {7.43.0.2 -&gt; 7.43.0.2}\n pyqt  {5.6.0 (conda-forge) -&gt; 5.9.2 (conda-forge)}\n qt  {5.6.2 -&gt; 5.9.7}\n sip  {4.18.1 (conda-forge) -&gt; 4.19.8 (conda-forge)}\n spyder  {3.3.4 (conda-forge) -&gt; 3.3.5 (conda-forge)}\n spyder-kernels  {0.4.4 (conda-forge) -&gt; 0.5.0 (conda-forge)}\n+conda-package-handling-1.3.10 (conda-forge)\n+libarchive-3.3.3 (conda-forge)\n+lz4-c-1.8.3 (conda-forge)\n+python-libarchive-c-2.8 (conda-forge)\n+xz-5.2.4 (conda-forge)\n+zstd-1.3.3 (conda-forge)\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe", "dictionary", "data-analysis"], "answers": [{"tags": [], "owner": {"reputation": 79, "user_id": 4329379, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9FldA.jpg?s=128&g=1", "display_name": "Juan Morais", "link": "https://stackoverflow.com/users/4329379/juan-morais"}, "is_accepted": false, "score": 1, "last_activity_date": 1562191893, "creation_date": 1562191893, "answer_id": 56878514, "question_id": 56878370, "link": "https://stackoverflow.com/questions/56878370/map-two-dataframes-and-perform-sum-operation-using-a-dictionary/56878514#56878514", "title": "Map two dataframes and perform sum operation using a dictionary", "body": "<p>Given the complexity of your algorithm, I would suggest performing a <code>Series</code> addition operation to solve this problem.</p>\n\n<p>Why? In <code>Pandas</code>, every column in a <code>DataFrame</code> works as a <code>Series</code> under the hood.</p>\n\n<pre><code>data_df_new = {\n    'Object_new': df['Object'],\n    'Action_new': df['Action'],\n    'Total_Cost': (df['Cost1'] + df['Cost2'])  # Addition of two series\n}\n\ndf_new = pd.DataFrame(data_df_new)\n</code></pre>\n\n<p>Running this code will map every value contained in your dataset, which will be stored in our dictionary.</p>\n"}, {"tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": true, "score": 2, "last_activity_date": 1562192586, "creation_date": 1562192586, "answer_id": 56878614, "question_id": 56878370, "link": "https://stackoverflow.com/questions/56878370/map-two-dataframes-and-perform-sum-operation-using-a-dictionary/56878614#56878614", "title": "Map two dataframes and perform sum operation using a dictionary", "body": "<p>A play with <code>groupby</code>:</p>\n\n<pre><code>inv_dict = {x:k for k,v in dictionary.items() for x in v}\ndf_new =  df.groupby(df.columns.map(inv_dict),\n                     axis=1).sum()\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>     Action_new  Object_new  Total_Cost\n0      renovate         123       12000\n1  do something         456          10\n2        review         789        1050\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1999, "user_id": 4694757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UOLpM.png?s=128&g=1", "display_name": "i_thamary", "link": "https://stackoverflow.com/users/4694757/i-thamary"}, "is_accepted": false, "score": 1, "last_activity_date": 1562193424, "creation_date": 1562193424, "answer_id": 56878716, "question_id": 56878370, "link": "https://stackoverflow.com/questions/56878370/map-two-dataframes-and-perform-sum-operation-using-a-dictionary/56878716#56878716", "title": "Map two dataframes and perform sum operation using a dictionary", "body": "<p>You can use an empty data frame to copy the new column and use the <code>to_dict</code> to convert it to a dictionary. </p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\ndata_df = {'Object':  [123, 456, 789],\n        'Action': ['renovate', 'do something', 'review'],\n        'Cost1': [10000, 0, 1000],\n        'Cost2': [2000, 10, 50],\n        }\n\ndf = pd.DataFrame(data_df)\nprint(df) \nMyEmptydf = pd.DataFrame()\nMyEmptydf['Object_new']=df['Object']\nMyEmptydf['Action_new']=df['Action']\nMyEmptydf['Total_Cost'] = df['Cost1'] + df['Cost2']\n\nprint(MyEmptydf) \ndictionary = MyEmptydf.to_dict(orient=\"index\")\nprint(dictionary) \n</code></pre>\n\n<p>you can run the code here:<a href=\"https://repl.it/repls/RealisticVillainousGlueware\" rel=\"nofollow noreferrer\">https://repl.it/repls/RealisticVillainousGlueware</a></p>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 7919773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ceeafd78a3b4da7ffb6b3f7f9607b5a6?s=128&d=identicon&r=PG&f=1", "display_name": "iampotential", "link": "https://stackoverflow.com/users/7919773/iampotential"}, "is_accepted": false, "score": 1, "last_activity_date": 1562195394, "creation_date": 1562195394, "answer_id": 56878924, "question_id": 56878370, "link": "https://stackoverflow.com/questions/56878370/map-two-dataframes-and-perform-sum-operation-using-a-dictionary/56878924#56878924", "title": "Map two dataframes and perform sum operation using a dictionary", "body": "<p>If you trying to entirely avoid pandas and only use the dictionary this should solve it</p>\n\n<pre><code>Object = []\ntotalcost = []\naction = []\nfor i in range(0,3):\n    Object.append(data_df['Object'][i])\n    totalcost.append(data_df['Cost1'][i]+data_df['Cost2'][i])\n    action.append(data_df['Action'][i])\ndict2  = {'Object':Object, 'Action':action, 'TotalCost':totalcost} \n</code></pre>\n"}], "owner": {"reputation": 503, "user_id": 6055629, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0c429dded8afcb8a19d8dc185421bc86?s=128&d=identicon&r=PG&f=1", "display_name": "constiii", "link": "https://stackoverflow.com/users/6055629/constiii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 56878614, "answer_count": 4, "score": 1, "last_activity_date": 1562195394, "creation_date": 1562190790, "question_id": 56878370, "link": "https://stackoverflow.com/questions/56878370/map-two-dataframes-and-perform-sum-operation-using-a-dictionary", "title": "Map two dataframes and perform sum operation using a dictionary", "body": "<p>I have a dataframe <strong>df</strong> </p>\n\n<pre><code>df\n\n   Object        Action  Cost1  Cost2\n0     123      renovate  10000   2000\n1     456  do something      0     10\n2     789        review   1000     50\n</code></pre>\n\n<p>and a <strong>dictionary</strong> (called dictionary)</p>\n\n<pre><code>dictionary\n\n{'Object_new': ['Object'],\n 'Action_new': ['Action'],\n 'Total_Cost': ['Cost1', 'Cost2']}\n</code></pre>\n\n<p>Further, I have a (at the beginning empty) dataframe <strong>df_new</strong> that should contain almost the identicall information as df, except that the column names need to be different (naming according to the dictionary) and that some columns from df should be consolidated (e.g. a sum-operation) based on the dictionary. </p>\n\n<p>The result should look like this:</p>\n\n<pre><code>df_new\n\n   Object_new    Action_new  Total_Cost\n0         123      renovate       12000\n1         456  do something          10\n2         789        review        1050\n</code></pre>\n\n<p>How can I achieve this result using only the dictionary? I tried to use the .map() function but could not figure out how to perform the sum-operation with it. </p>\n\n<p>The code to reproduce both dataframes and the dictionary are attached:</p>\n\n<pre><code># import libraries\nimport pandas as pd\n\n\n### create df\ndata_df = {'Object':  [123, 456, 789],\n        'Action': ['renovate', 'do something', 'review'],\n        'Cost1': [10000, 0, 1000],\n        'Cost2': [2000, 10, 50],\n        }\n\ndf = pd.DataFrame(data_df)\n\n\n### create dictionary\ndictionary = {'Object_new':['Object'], \n              'Action_new':['Action'], \n              'Total_Cost' : ['Cost1', 'Cost2']}\n\n\n### create df_new\n# data_df_new = pd.DataFrame(columns=['Object_new', 'Action_new', 'Total_Cost' ])\ndata_df_new = {'Object_new':  [123, 456, 789],\n        'Action_new': ['renovate', 'do something', 'review'],\n        'Total_Cost': [12000, 10, 1050],\n        }\ndf_new = pd.DataFrame(data_df_new)\n</code></pre>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 3844, "user_id": 833881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/856cdb57da6d0b4758d597d30602fcd8?s=128&d=identicon&r=PG", "display_name": "kungphu", "link": "https://stackoverflow.com/users/833881/kungphu"}, "edited": false, "score": 1, "creation_date": 1562193573, "post_id": 56878367, "comment_id": 100305938, "body": "Please post the full stack trace."}, {"owner": {"reputation": 11, "user_id": 10474310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f13b2a42d27d90ec384b9316b3b0d4?s=128&d=identicon&r=PG&f=1", "display_name": "Grey Hack", "link": "https://stackoverflow.com/users/10474310/grey-hack"}, "reply_to_user": {"reputation": 3844, "user_id": 833881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/856cdb57da6d0b4758d597d30602fcd8?s=128&d=identicon&r=PG", "display_name": "kungphu", "link": "https://stackoverflow.com/users/833881/kungphu"}, "edited": false, "score": 0, "creation_date": 1562227376, "post_id": 56878367, "comment_id": 100314109, "body": "Its&#39;s there now."}, {"owner": {"reputation": 4987, "user_id": 4279120, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OMvtt.jpg?s=128&g=1", "display_name": "olinox14", "link": "https://stackoverflow.com/users/4279120/olinox14"}, "edited": false, "score": 0, "creation_date": 1562227584, "post_id": 56878367, "comment_id": 100314207, "body": "What if you also add the <code>on_delete=models.CASCADE</code> arg to your <code>likes</code> field?"}, {"owner": {"reputation": 11, "user_id": 10474310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f13b2a42d27d90ec384b9316b3b0d4?s=128&d=identicon&r=PG&f=1", "display_name": "Grey Hack", "link": "https://stackoverflow.com/users/10474310/grey-hack"}, "edited": false, "score": 0, "creation_date": 1562228648, "post_id": 56878367, "comment_id": 100314724, "body": "The like field is a ManyToManyField field i get an error every time i put a on_delete on there: TypeError: __init__() got an unexpected keyword argument &#39;on_delete&#39;"}, {"owner": {"reputation": 459, "user_id": 6017572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/48f470dae5e7b8715a6dc7b60b7888da?s=128&d=identicon&r=PG&f=1", "display_name": "LeroyJD", "link": "https://stackoverflow.com/users/6017572/leroyjd"}, "edited": false, "score": 0, "creation_date": 1562229185, "post_id": 56878367, "comment_id": 100314984, "body": "I don&#39;t think you can put an on_delete argument on a ManyToManyField. For a ForeignKey you have to explicitly specify that it can be null when initially unpopulated but the same doesn&#39;t apply to an m2m relation so an on_delete would be unnecessary. Maybe this post would help? <a href=\"https://stackoverflow.com/questions/54655757/django-db-utils-integrityerror-foreign-key-constraint-failed\" title=\"django db utils integrityerror foreign key constraint failed\">stackoverflow.com/questions/54655757/&hellip;</a>"}, {"owner": {"reputation": 11, "user_id": 10474310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f13b2a42d27d90ec384b9316b3b0d4?s=128&d=identicon&r=PG&f=1", "display_name": "Grey Hack", "link": "https://stackoverflow.com/users/10474310/grey-hack"}, "edited": false, "score": 0, "creation_date": 1562231782, "post_id": 56878367, "comment_id": 100316479, "body": "It didn&#39;t bring me any further."}, {"owner": {"reputation": 89, "user_id": 3873980, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1636565e6278329cb5083a2e2a5fa483?s=128&d=identicon&r=PG&f=1", "display_name": "Technocrat", "link": "https://stackoverflow.com/users/3873980/technocrat"}, "edited": false, "score": 0, "creation_date": 1562253084, "post_id": 56878367, "comment_id": 100328181, "body": "Is the error coming on every post deletion?"}, {"owner": {"reputation": 11, "user_id": 10474310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f13b2a42d27d90ec384b9316b3b0d4?s=128&d=identicon&r=PG&f=1", "display_name": "Grey Hack", "link": "https://stackoverflow.com/users/10474310/grey-hack"}, "edited": false, "score": 0, "creation_date": 1562256031, "post_id": 56878367, "comment_id": 100329487, "body": "Yes it&#39;s comming from every post deletion, even when i try to delete it in django administration."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10474310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f13b2a42d27d90ec384b9316b3b0d4?s=128&d=identicon&r=PG&f=1", "display_name": "Grey Hack", "link": "https://stackoverflow.com/users/10474310/grey-hack"}, "edited": false, "score": 0, "creation_date": 1562319815, "post_id": 56896524, "comment_id": 100346228, "body": "Don&#39;t know if it worked but i removed the default=1, and deleted all of my migrations and my database. And now it&#39;s working fine."}], "tags": [], "owner": {"reputation": 81, "user_id": 10711847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee44cd72e3bf191e2701cb4e1726f214?s=128&d=identicon&r=PG", "display_name": "Na&#39;aman Hirschfeld", "link": "https://stackoverflow.com/users/10711847/naaman-hirschfeld"}, "is_accepted": false, "score": 0, "last_activity_date": 1562300578, "creation_date": 1562300578, "answer_id": 56896524, "question_id": 56878367, "link": "https://stackoverflow.com/questions/56878367/keep-getting-integrityerror-foreign-key-constraint-failed-when-i-am-trying-to/56896524#56896524", "title": "Keep getting &quot;IntegrityError FOREIGN KEY constraint failed&quot; when i am trying to delete a post", "body": "<p>Try removing the default=1. I don't know if setting a default value without a choice field is the way to go. </p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 10474310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f13b2a42d27d90ec384b9316b3b0d4?s=128&d=identicon&r=PG&f=1", "display_name": "Grey Hack", "link": "https://stackoverflow.com/users/10474310/grey-hack"}, "is_accepted": true, "score": 1, "last_activity_date": 1562320421, "last_edit_date": 1562320421, "creation_date": 1562319943, "answer_id": 56900563, "question_id": 56878367, "link": "https://stackoverflow.com/questions/56878367/keep-getting-integrityerror-foreign-key-constraint-failed-when-i-am-trying-to/56900563#56900563", "title": "Keep getting &quot;IntegrityError FOREIGN KEY constraint failed&quot; when i am trying to delete a post", "body": "<p>I removed the default=1 like @Na'aman Hirschfeld said, and deleted all of my migrations and my database. And now it's working fine.</p>\n"}], "owner": {"reputation": 11, "user_id": 10474310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f13b2a42d27d90ec384b9316b3b0d4?s=128&d=identicon&r=PG&f=1", "display_name": "Grey Hack", "link": "https://stackoverflow.com/users/10474310/grey-hack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2293, "favorite_count": 0, "accepted_answer_id": 56900563, "answer_count": 2, "score": 0, "last_activity_date": 1562320421, "creation_date": 1562190770, "last_edit_date": 1562227327, "question_id": 56878367, "link": "https://stackoverflow.com/questions/56878367/keep-getting-integrityerror-foreign-key-constraint-failed-when-i-am-trying-to", "title": "Keep getting &quot;IntegrityError FOREIGN KEY constraint failed&quot; when i am trying to delete a post", "body": "<p>Every time i try to delete a post i keeping getting this error, but my delete button use to work before.\nI think it has something to do with the on_delete attribute but i changed its value a few times and it still did not work.</p>\n\n<p>//models.py</p>\n\n<pre><code>from django.db import models\nfrom django.conf import settings\nfrom django.urls import reverse\n\n\nUser = settings.AUTH_USER_MODEL\n\nclass PostManager(models.Manager):\n    def search(self, query):\n        qs = self.get_queryset().filter(title__icontains=query)\n        if qs:\n            return qs\n        return None\n\n    def get_by_id(self, id):\n        qs = self.get_queryset().filter(id=id)\n        if qs.count() == 1:\n            return qs.first()\n        else:\n            return None     \n\n\n# Create your models here.\nclass PostModel(models.Model):\n    user = models.ForeignKey(User, default=1, on_delete=models.CASCADE)\n    title = models.CharField(max_length=50)\n    message = models.TextField()\n    date = models.DateTimeField(auto_now_add=True)\n    likes = models.ManyToManyField(User, blank=True, related_name='post_likes')\n\n\n    def __str__(self):\n        return self.title\n\n    objects = PostManager()\n\n    def get_total_likes(self):\n        return self.likes.count()   \n\n    def get_absolute_url(self):\n        return reverse(\"birdpost:detail\", kwargs={\"id\": self.id})\n\n    def get_like_url(self):\n        return reverse(\"birdpost:like-toggle\", kwargs={\"id\": self.id})\n\n    def get_delete_url(self):\n        return reverse(\"birdpost:delete_post\", kwargs={\"id\": self.id})\n</code></pre>\n\n<p>//views.py</p>\n\n<pre><code>def del_post(request, id):\n    obj = get_object_or_404(PostModel, id=id)\n    if request.user != obj.user:\n        print(\"Ooh no looks like this post is not yours... \")\n    else:\n        obj.delete()\n\n    return redirect(\"home\")\n</code></pre>\n\n<p>Environment:</p>\n\n<p>Request Method: GET\nRequest URL: <a href=\"http://localhost:8000/post/4/delete\" rel=\"nofollow noreferrer\">http://localhost:8000/post/4/delete</a></p>\n\n<p>Django Version: 2.2.1\nPython Version: 3.6.8\nInstalled Applications:</p>\n\n<pre><code>['django.contrib.admin',\n 'django.contrib.auth',\n 'django.contrib.contenttypes',\n 'django.contrib.sessions',\n 'django.contrib.messages',\n 'django.contrib.staticfiles',\n 'accounts',\n 'birdpost',\n 'search']\n</code></pre>\n\n<p>Installed Middleware:</p>\n\n<pre><code>['django.middleware.security.SecurityMiddleware',\n 'django.contrib.sessions.middleware.SessionMiddleware',\n 'django.middleware.common.CommonMiddleware',\n 'django.middleware.csrf.CsrfViewMiddleware',\n 'django.contrib.auth.middleware.AuthenticationMiddleware',\n 'django.contrib.messages.middleware.MessageMiddleware',\n 'django.middleware.clickjacking.XFrameOptionsMiddleware']\n</code></pre>\n\n<p>Traceback:</p>\n\n<pre><code>File \"/home/grey/Desktop/python/birds/virtualenv/lib/python3.6/site-packages/django/db/backends/base/base.py\" in _commit\n  240.                 return self.connection.commit()\n\nThe above exception (FOREIGN KEY constraint failed) was the direct cause of the following exception:\n\nFile \"/home/grey/Desktop/python/birds/virtualenv/lib/python3.6/site-packages/django/core/handlers/exception.py\" in inner\n  34.             response = get_response(request)\n\nFile \"/home/grey/Desktop/python/birds/virtualenv/lib/python3.6/site-packages/django/core/handlers/base.py\" in _get_response\n  115.                 response = self.process_exception_by_middleware(e, request)\n\nFile \"/home/grey/Desktop/python/birds/virtualenv/lib/python3.6/site-packages/django/core/handlers/base.py\" in _get_response\n  113.                 response = wrapped_callback(request, *callback_args, **callback_kwargs)\n\nFile \"/home/grey/Desktop/python/birds/src/birdpost/views.py\" in del_post\n  104.      obj.delete()\n\nFile \"/home/grey/Desktop/python/birds/virtualenv/lib/python3.6/site-packages/django/db/models/base.py\" in delete\n  919.         return collector.delete()\n\nFile \"/home/grey/Desktop/python/birds/virtualenv/lib/python3.6/site-packages/django/db/models/deletion.py\" in delete\n  318.                             sender=model, instance=obj, using=self.using\n\nFile \"/home/grey/Desktop/python/birds/virtualenv/lib/python3.6/site-packages/django/db/transaction.py\" in __exit__\n  240.                         connection.commit()\n\nFile \"/home/grey/Desktop/python/birds/virtualenv/lib/python3.6/site-packages/django/db/backends/base/base.py\" in commit\n  262.         self._commit()\n\nFile \"/home/grey/Desktop/python/birds/virtualenv/lib/python3.6/site-packages/django/db/backends/base/base.py\" in _commit\n  240.                 return self.connection.commit()\n\nFile \"/home/grey/Desktop/python/birds/virtualenv/lib/python3.6/site-packages/django/db/utils.py\" in __exit__\n  89.                 raise dj_exc_value.with_traceback(traceback) from exc_value\n\nFile \"/home/grey/Desktop/python/birds/virtualenv/lib/python3.6/site-packages/django/db/backends/base/base.py\" in _commit\n  240.                 return self.connection.commit()\n\nException Type: IntegrityError at /post/4/delete\nException Value: FOREIGN KEY constraint failed\n</code></pre>\n"}, {"tags": ["python", "flask", "wrapper", "rbac", "flask-login"], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 6912830, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qq01z.jpg?s=128&g=1", "display_name": "Xevion", "link": "https://stackoverflow.com/users/6912830/xevion"}, "edited": false, "score": 0, "creation_date": 1562195112, "post_id": 56878726, "comment_id": 100306265, "body": "Changing the name of the <code>run</code> function won&#39;t do anything, the error doesn&#39;t change; <code>AssertionError: View function mapping is overwriting an existing endpoint function: wrapped_func</code> :("}], "tags": [], "owner": {"reputation": 1728, "user_id": 4967694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6bb32e6094783ec9fc40f63e24ef2b1?s=128&d=identicon&r=PG", "display_name": "djnz", "link": "https://stackoverflow.com/users/4967694/djnz"}, "is_accepted": false, "score": 0, "last_activity_date": 1562193509, "creation_date": 1562193509, "answer_id": 56878726, "question_id": 56878362, "link": "https://stackoverflow.com/questions/56878362/flask-custom-role-wrapper-gives-assertionerror-view-function-mapping-is-overwr/56878726#56878726", "title": "Flask Custom Role Wrapper gives &quot;AssertionError: View function mapping is overwriting an existing endpoint function: run&quot;", "body": "<p>At first glance it looks like a conflict with your <code>run</code> function in the <code>require_role</code> decorator (<a href=\"http://flask.pocoo.org/docs/1.0/patterns/viewdecorators/\" rel=\"nofollow noreferrer\">docs</a>):</p>\n\n<pre><code>def require_role(roles=[\"User\"]):\n    def wrap(func):\n        def wrapped_func(*args, **kwargs):\n            ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 646, "user_id": 5022624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/656f11a549ee741c28d72d641d7b970d?s=128&d=identicon&r=PG&f=1", "display_name": "mukesh.kumar", "link": "https://stackoverflow.com/users/5022624/mukesh-kumar"}, "edited": false, "score": 1, "creation_date": 1600455442, "post_id": 56880050, "comment_id": 113104511, "body": "Thanks for sharing! I was missing this <code>wraps</code> in my decorator. You saved my whole night!"}], "tags": [], "owner": {"reputation": 177, "user_id": 6912830, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qq01z.jpg?s=128&g=1", "display_name": "Xevion", "link": "https://stackoverflow.com/users/6912830/xevion"}, "is_accepted": false, "score": 3, "last_activity_date": 1562208480, "creation_date": 1562208480, "answer_id": 56880050, "question_id": 56878362, "link": "https://stackoverflow.com/questions/56878362/flask-custom-role-wrapper-gives-assertionerror-view-function-mapping-is-overwr/56880050#56880050", "title": "Flask Custom Role Wrapper gives &quot;AssertionError: View function mapping is overwriting an existing endpoint function: run&quot;", "body": "<p>So to solve the problem that has been plaguing me for the last couple of hours, I've looked into how the <code>flask_login</code> module actually works, and after a bit of investigating, I found out that they use an import from <code>functools</code> called <code>wraps</code>.</p>\n\n<p>I imported that, copied how <code>flask_login</code> implemented it essentially, and my app is now working.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def require_role(roles=[\"User\"]):\n    def wrap(func):\n        @wraps(func)\n        def decorated_view(*args, **kwargs):\n            if current_user.is_authenticated:\n                if current_user.has_roles(roles):\n                    return func(*args, **kwargs)\n            return abort(401)\n        return decorated_view\n    return wrap\n</code></pre>\n\n<hr>\n\n<p><a href=\"https://github.com/maxcountryman/flask-login/blob/master/flask_login/utils.py#L264\" rel=\"nofollow noreferrer\"><code>flask_login/utils.py#L264</code></a></p>\n"}], "owner": {"reputation": 177, "user_id": 6912830, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qq01z.jpg?s=128&g=1", "display_name": "Xevion", "link": "https://stackoverflow.com/users/6912830/xevion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 596, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1562208480, "creation_date": 1562190743, "last_edit_date": 1562202526, "question_id": 56878362, "link": "https://stackoverflow.com/questions/56878362/flask-custom-role-wrapper-gives-assertionerror-view-function-mapping-is-overwr", "title": "Flask Custom Role Wrapper gives &quot;AssertionError: View function mapping is overwriting an existing endpoint function: run&quot;", "body": "<p>I'm trying to create a role wrapper which will allow me to restrict certain pages and content for different users. I already have methods implemented for checking this, but the wrapper/decorator for implementing this fails and sometimes doesn't, and I have no idea of what the cause could be.</p>\n\n<p>I've searched around looking for a conclusive reason as to what is causing this problem, but unfortunately, Flask's tracebacks do not give a conclusive reason or solution, like most other searches I come up with do.</p>\n\n<p>I'm using Flask-Login, Flask-Migrate, and Flask-SQLAlchemy to manage my web application, I've looked into different methods of applying RBAC, but they all required seemingly complicated changes to my database models, and I felt that my method would have a higher chance of working in the long run.</p>\n\n<p>Here is my simplified code (I can provide the full application if requested). Below that is the full traceback from the debugger.</p>\n\n<p>Thank you.</p>\n\n<p><code>routes.py</code></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def require_role(roles=[\"User\"]):\n    def wrap(func):\n        def run(*args, **kwargs):\n            if current_user.is_authenticated:\n                if current_user.has_roles(roles):\n                    return func(*args, **kwargs)\n            return abort(401)\n        return run\n    return wrap\n\n@app.route('/hidden&lt;id&gt;/history')\n@login_required\n@require_role(roles=['Admin'])\ndef hidden_history(id):\n    if not validate_id(id):\n        return '&lt;span style=\"color: red;\"&gt;error:&lt;/span&gt; bad id'\n    return render_template('hidden_history.html')\n\n@app.route('/hidden&lt;id&gt;/help')\n@login_required\ndef hidden_help(id):\n    if not validate_id(id):\n        return '&lt;span style=\"color: red;\"&gt;error:&lt;/span&gt; bad id'\n    return render_template('hidden_help.html')\n\n@app.route('/hidden&lt;id&gt;/')\n@login_required\n@require_role(roles=['Hidden'])\ndef hidden(id):\n    if not validate_id(id):\n        return '&lt;span style=\"color: red;\"&gt;error:&lt;/span&gt; bad id'\n    # ...\n    return render_template('hidden.html')\n</code></pre>\n\n<p><code>Traceback (most recent call last)</code></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>Traceback (most recent call last):\n  File \"A:\\Programming\\Python\\Flask\\xevion.dev\\wsgi.py\", line 1, in &lt;module&gt;\n    from app import app, db\n  File \"A:\\Programming\\Python\\Flask\\xevion.dev\\app\\__init__.py\", line 18, in &lt;module&gt;\n    from app import routes, models\n  File \"A:\\Programming\\Python\\Flask\\xevion.dev\\app\\routes.py\", line 143, in &lt;module&gt;\n    @require_role(roles=['Hidden'])\n  File \"c:\\users\\xevion\\appdata\\local\\programs\\python\\python36\\lib\\site-packages\\flask\\app.py\", line 1251, in decorator\n    self.add_url_rule(rule, endpoint, f, **options)\n  File \"c:\\users\\xevion\\appdata\\local\\programs\\python\\python36\\lib\\site-packages\\flask\\app.py\", line 67, in wrapper_func\n    return f(self, *args, **kwargs)\n  File \"c:\\users\\xevion\\appdata\\local\\programs\\python\\python36\\lib\\site-packages\\flask\\app.py\", line 1222, in add_url_rule\n    'existing endpoint function: %s' % endpoint)\nAssertionError: View function mapping is overwriting an existing endpoint function: run\n</code></pre>\n\n<p><strong>Edit:</strong> I realize now that it doesn't work when there are more than one calls to the wrapper function. How come?</p>\n"}, {"tags": ["python", "scrapy"], "answers": [{"tags": [], "owner": {"reputation": 629, "user_id": 9389666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/165ae585030427efe6b9479051517523?s=128&d=identicon&r=PG&f=1", "display_name": "0x01h", "link": "https://stackoverflow.com/users/9389666/0x01h"}, "is_accepted": false, "score": 0, "last_activity_date": 1562517713, "creation_date": 1562517713, "answer_id": 56924132, "question_id": 56878360, "link": "https://stackoverflow.com/questions/56878360/how-does-scrapy-save-crawl-state/56924132#56924132", "title": "How does Scrapy save crawl state?", "body": "<p>You can write these requests to a txt file while seperating them when request is called by <strong>callback</strong> or <strong>errback</strong>. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def start_requests(self):\n    for u in self.start_urls:\n        yield scrapy.Request(u, callback=self.parse,\n                                    errback=self.err,\n                                    dont_filter=True)\n\ndef parse(self, response):\n    with open('successful_requests.txt', 'a') as out:\n        out.write(response.url + '\\n')\n\ndef err(self, failure):\n    with open('failed_requests.txt', 'a') as out:\n        out.write(response.url + ' ' + str(failure) + '\\n')\n</code></pre>\n\n<p>To reach statea of requests, just read these txt files.</p>\n"}], "owner": {"reputation": 21, "user_id": 9957558, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PAc6pB3lnus/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0-yqrrIuM1Nx1vgbEBnfYVwSkfGQ/mo/photo.jpg?sz=128", "display_name": "Mukund Srinath", "link": "https://stackoverflow.com/users/9957558/mukund-srinath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 207, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1562517713, "creation_date": 1562190734, "question_id": 56878360, "link": "https://stackoverflow.com/questions/56878360/how-does-scrapy-save-crawl-state", "title": "How does Scrapy save crawl state?", "body": "<p>I am able to save my crawl state and Scrapy successfully continues from where I cut it off. I have kept the start_urls constant each time I restart the spider i.e. the order and the list of start_urls fed each time that the spider is restarted is constant. But I need to do a random shuffle of my start_urls as I have URLs from different domains and well as in from same domain but as they are in order, the crawl delay is significantly slowing down my crawl speed. My list is 10s of millions and I have already crawled a million URLs. So I wouldn't want to jeopardize anything or restart the crawl.</p>\n\n<p>I have seen that requests.seen holds what looks like hashed values of the URLs that have been visited. And from Scrapy code I am certain that it's used to filter duplicates. But I am not sure what either spider.state or requests.queue does to help with saving state or restarting the crawl.</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 10896799, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e19A3.jpg?s=128&g=1", "display_name": "dakro", "link": "https://stackoverflow.com/users/10896799/dakro"}, "edited": false, "score": 0, "creation_date": 1562194896, "post_id": 56878767, "comment_id": 100306211, "body": "This worked perfectly!  Thank you!  I need to learn more about lambda.    This is miles better than the other approach I was taking in case I didn&#39;t get an answer.  Much appreciated."}, {"owner": {"reputation": 979, "user_id": 553965, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/bb39c2819097989a9df94b559ecca1f3?s=128&d=identicon&r=PG&f=1", "display_name": "user553965", "link": "https://stackoverflow.com/users/553965/user553965"}, "edited": false, "score": 0, "creation_date": 1605029802, "post_id": 56878767, "comment_id": 114525942, "body": "This approach works great, but is very slow compared to similar operations like <code>data[&#39;sum&#39;] = data[numerical_column_names].sum(axis=1)</code>. Is there a faster variation?"}], "tags": [], "owner": {"reputation": 1767, "user_id": 1917500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/619b3bfba2a078dc60caca6df3ab37ec?s=128&d=identicon&r=PG&f=1", "display_name": "Karthik V", "link": "https://stackoverflow.com/users/1917500/karthik-v"}, "is_accepted": true, "score": 3, "last_activity_date": 1562193837, "creation_date": 1562193837, "answer_id": 56878767, "question_id": 56878337, "link": "https://stackoverflow.com/questions/56878337/populate-a-new-pandas-dataframe-column-with-names-of-other-columns-based-on-thei/56878767#56878767", "title": "Populate a new pandas dataframe column with names of other columns based on their row value", "body": "<pre><code>  &gt;&gt;&gt;data['past_due'] = data.apply(lambda x: tuple(x[x == 'past_due'].index), \n  axis=1)\n  &gt;&gt;&gt;data\n  Out[75]: \n    customer             ...                                  past_due\n  0      bob             ...                          (electric_bill,)\n  1    jerry             ...               (internet_bill, water_bill)\n  2    alice             ...                          (electric_bill,)\n  3    susan             ...                          (internet_bill,)\n  [4 rows x 5 columns]\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 10896799, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e19A3.jpg?s=128&g=1", "display_name": "dakro", "link": "https://stackoverflow.com/users/10896799/dakro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "accepted_answer_id": 56878767, "answer_count": 1, "score": 2, "last_activity_date": 1562193837, "creation_date": 1562190536, "last_edit_date": 1562191023, "question_id": 56878337, "link": "https://stackoverflow.com/questions/56878337/populate-a-new-pandas-dataframe-column-with-names-of-other-columns-based-on-thei", "title": "Populate a new pandas dataframe column with names of other columns based on their row value", "body": "<p>I want to add a new column in a dataframe with the names of other columns as values, based on a condition.  </p>\n\n<pre><code>import pandas as pd\ndata = pd.DataFrame({\n'customer': ['bob', 'jerry', 'alice', 'susan'],\n'internet_bill': ['paid', 'past_due', 'due_soon', 'past_due'],\n'electric_bill': ['past_due', 'due_soon', 'past_due', 'paid'],\n'water_bill': ['paid', 'past_due', 'paid', 'paid']})\n</code></pre>\n\n<p>Here's the dataframe.</p>\n\n<pre><code>    customer    internet_bill   electric_bill   water_bill\n0   bob         paid            past_due        paid\n1   jerry       past_due        due_soon        past_due\n2   alice       due_soon        past_due        paid\n3   susan       past_due        paid            paid\n</code></pre>\n\n<p>I want to add a new column summarizing what is 'past_due'.  <strong>Here's the desired result:</strong></p>\n\n<pre><code>    customer    internet_bill   electric_bill   water_bill  past_due\n0   bob         past_due        past_due        past_due    internet_bill, electric_bill, water_bill\n1   jerry       past_due        due_soon        past_due    internet_bill, water_bill\n2   alice       due_soon        past_due        paid        electric_bill\n3   susan       past_due        paid            paid        internet_bill\n</code></pre>\n\n<p>I was able to do this in Excel with the following formula:</p>\n\n<pre><code>=TEXTJOIN(\",\"&amp;CHAR(10),TRUE,\nIF(B2=Values!$A$1,$K$1,\"\"),\nIF(C2=Values!$A$1,$L$1,\"\"),\nIF(D2=Values!$A$1,$M$1,\"\"))\n</code></pre>\n\n<p>Ultimately, my output will be an excel file for some nurses &amp; hospital workers to follow up with patients (not bill collecting! Patient care stuff).  I have thought about using an excel writer library to just create an .xlsx and insert formulas.</p>\n\n<p>AND - I was able to do this to catch one column, but my gut tells me there's a much better way.  Here's what I used to do that:</p>\n\n<pre><code>both['past_due'] = [\n'internet_bill' if x == 'PAST_DUE' \nelse 'None' for x in df['internet_bill']]\n</code></pre>\n\n<p>This would basically check the row in each targeted column if that row contained 'PAST_DUE', and if so, it would return the column name, move on to the next column, check for past due, add the column name.</p>\n\n<p>I have had no success in finding anything close to this with searches, probably due to struggling to form a good question in the search bar.  I haven't found any questions where someone is trying to pull other column names as a value based on a condition.</p>\n\n<p>Thanks for any help!</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 13530, "user_id": 593382, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f7326fd554e09edf21ca727d6854e22e?s=128&d=identicon&r=PG", "display_name": "Grady Player", "link": "https://stackoverflow.com/users/593382/grady-player"}, "edited": false, "score": 0, "creation_date": 1562190504, "post_id": 56878304, "comment_id": 100305239, "body": "what int do you want &quot;S&quot; to map to?"}, {"owner": {"reputation": 13530, "user_id": 593382, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f7326fd554e09edf21ca727d6854e22e?s=128&d=identicon&r=PG", "display_name": "Grady Player", "link": "https://stackoverflow.com/users/593382/grady-player"}, "edited": false, "score": 0, "creation_date": 1562190535, "post_id": 56878304, "comment_id": 100305249, "body": "are you looking for ord()?"}, {"owner": {"reputation": 13530, "user_id": 593382, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f7326fd554e09edf21ca727d6854e22e?s=128&d=identicon&r=PG", "display_name": "Grady Player", "link": "https://stackoverflow.com/users/593382/grady-player"}, "edited": false, "score": 0, "creation_date": 1562190644, "post_id": 56878304, "comment_id": 100305270, "body": "what does <code>x = (read)</code> do... do you want it to be a 2-tuple if so you need <code>x=(read,)</code>"}, {"owner": {"reputation": 1, "user_id": 11736561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7df7b242a17ca58745e4c6c4c9f2faca?s=128&d=identicon&r=PG&f=1", "display_name": "ashbest122", "link": "https://stackoverflow.com/users/11736561/ashbest122"}, "reply_to_user": {"reputation": 13530, "user_id": 593382, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f7326fd554e09edf21ca727d6854e22e?s=128&d=identicon&r=PG", "display_name": "Grady Player", "link": "https://stackoverflow.com/users/593382/grady-player"}, "edited": false, "score": 0, "creation_date": 1562191065, "post_id": 56878304, "comment_id": 100305386, "body": "I want &quot;S&quot; to map to the 5, so if x = &quot;5S4F8S&quot; it works fine but when accessing a file it just doesn&#39;t work."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 3, "creation_date": 1562191079, "post_id": 56878304, "comment_id": 100305389, "body": "use <code>print( x )</code> to see what you try to convert. Maybe you have empty string."}, {"owner": {"reputation": 1, "user_id": 11736561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7df7b242a17ca58745e4c6c4c9f2faca?s=128&d=identicon&r=PG&f=1", "display_name": "ashbest122", "link": "https://stackoverflow.com/users/11736561/ashbest122"}, "edited": false, "score": 0, "creation_date": 1562191236, "post_id": 56878304, "comment_id": 100305434, "body": "Added a print(x) between the x and y, tt just prints &quot;5S4F8S&quot; and then goes on to the error"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1562191259, "post_id": 56878304, "comment_id": 100305441, "body": "Just after the <code>else:</code> statement, print <code>number</code>, what is it?"}, {"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 0, "creation_date": 1562191269, "post_id": 56878304, "comment_id": 100305445, "body": "also you could directly iterate on <code>m_str</code> instead of the indices and access each one. Not an error, just hurts my eyes......"}, {"owner": {"reputation": 1, "user_id": 11736561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7df7b242a17ca58745e4c6c4c9f2faca?s=128&d=identicon&r=PG&f=1", "display_name": "ashbest122", "link": "https://stackoverflow.com/users/11736561/ashbest122"}, "edited": false, "score": 0, "creation_date": 1562191336, "post_id": 56878304, "comment_id": 100305467, "body": "Just goes downwards like this:  5 4 8"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1562191460, "post_id": 56878304, "comment_id": 100305503, "body": "most text editors add new line at the end so you may have <code>&quot;5S4F8S\\n&quot;</code> but you will no see <code>&quot;\\n&quot;</code> on screen but <code>&quot;\\n&quot;</code> can makes problem in your funtion."}, {"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 0, "creation_date": 1562191472, "post_id": 56878304, "comment_id": 100305508, "body": "Also you&#39;re not using the full potential of the <code>try&#47;except</code>. Instead of assigning a variable and then checking it, simply move your <code>if</code> code indise the <code>try</code> and the <code>else</code> code inside <code>except</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11736561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7df7b242a17ca58745e4c6c4c9f2faca?s=128&d=identicon&r=PG&f=1", "display_name": "ashbest122", "link": "https://stackoverflow.com/users/11736561/ashbest122"}, "edited": false, "score": 0, "creation_date": 1562191506, "post_id": 56878450, "comment_id": 100305519, "body": "Thank you so much!! This is perfect!"}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 1, "last_activity_date": 1562191325, "creation_date": 1562191325, "answer_id": 56878450, "question_id": 56878304, "link": "https://stackoverflow.com/questions/56878304/valueerror-invalid-literal-for-int-with-base-10-possibly-file-mishandlin/56878450#56878450", "title": "ValueError: invalid literal for int() with base 10: &#39;&#39; (Possibly file mishandling)", "body": "<p>Put in some basic debugging <code>print</code> commands:</p>\n\n<p>def decode(m_str):\n    number = ''\n    ret_str = ''</p>\n\n<pre><code>for index in range(len(m_str)):\n    try:\n        int(m_str[index])\n        check = True\n    except ValueError:\n        check = False\n\n    print(index, check, number)\n    if check:\n        number += m_str[index]\n    else:\n        ret_str += int(number)*m_str[index]\n        number = ''\n\nreturn ret_str\n\n\nf = open(\"RLE.txt\", 'r')\nread = f.read()\n\nx = (read)\nprint(x, [ord(c) for c in x])\ny = decode(x)\nprint(y)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>5S4F8S\n [53, 83, 52, 70, 56, 83, 10]\n0 True \n1 False 5\n2 True \n3 False 4\n4 True \n5 False 8\n6 False \nTraceback (most recent call last):\n  File \"so.py\", line 27, in &lt;module&gt;\n    y = decode(x)\n  File \"so.py\", line 16, in decode\n    ret_str += int(number)*m_str[index]\nValueError: invalid literal for int() with base 10: ''\n</code></pre>\n\n<p>Your problem is quite simple: your input includes a non-printing character, such as the \"newline\" and the end of the input.  That's not a legal item to convert.</p>\n\n<p>To fix this, clean the input:</p>\n\n<pre><code>x = (read).strip()\n</code></pre>\n\n<p>This will allow you to get the desired output.</p>\n\n<p>I'll leave the other improvements to you.</p>\n"}], "owner": {"reputation": 1, "user_id": 11736561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7df7b242a17ca58745e4c6c4c9f2faca?s=128&d=identicon&r=PG&f=1", "display_name": "ashbest122", "link": "https://stackoverflow.com/users/11736561/ashbest122"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562191909, "creation_date": 1562190360, "last_edit_date": 1562191909, "question_id": 56878304, "link": "https://stackoverflow.com/questions/56878304/valueerror-invalid-literal-for-int-with-base-10-possibly-file-mishandlin", "title": "ValueError: invalid literal for int() with base 10: &#39;&#39; (Possibly file mishandling)", "body": "<p>Trying to decode some RLE text but I'm not sure how to do it via accessing the file, any ideas?</p>\n\n<p>First I tried running the code with manually inputted string, worked fine, but whenever I try to access the file to read it and decode the RLE it doesn't seem to work.</p>\n\n<pre><code>def decode(m_str):\n    number = ''\n    ret_str = ''\n\n    for index in range(len(m_str)):\n        try:\n            int(m_str[index])\n            check = True\n        except ValueError:\n            check = False\n\n        if check:\n            number += m_str[index]\n        else:\n            ret_str += int(number)*m_str[index]\n            number = ''\n\n    return ret_str\n\n\nf = open(\"RLE.txt\", 'r')\nread = f.read()\n\nx = (read)\ny = decode(x)\nprint(y)\n</code></pre>\n\n<p>If the content of the file is <code>\"5S4F8S\"</code> I expect it to output</p>\n\n<pre><code>SSSSSFFFFSSSSSSSS\n</code></pre>\n\n<p>Instead, I get the error:</p>\n\n<pre><code>ValueError: invalid literal for int() with base 10: ''\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "keras"], "comments": [{"owner": {"reputation": 2091, "user_id": 5298937, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-93V2T2nBUP4/AAAAAAAAAAI/AAAAAAAAA7g/K5qzS98XyX0/photo.jpg?sz=128", "display_name": "Pedro Marques", "link": "https://stackoverflow.com/users/5298937/pedro-marques"}, "edited": false, "score": 1, "creation_date": 1562224284, "post_id": 56878293, "comment_id": 100312511, "body": "I suggest you define a metric that corresponds to what you would like to observe. That can be printed when training and its valued is saved in history so that you can graph it or otherwise inspect it after training."}, {"owner": {"reputation": 73682, "user_id": 2097240, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/JskU5.jpg?s=128&g=1", "display_name": "Daniel M&#246;ller", "link": "https://stackoverflow.com/users/2097240/daniel-m%c3%b6ller"}, "edited": false, "score": 0, "creation_date": 1562243250, "post_id": 56878293, "comment_id": 100322837, "body": "You must make a model that uses that calculation as &quot;output&quot; and &quot;predict&quot; with that model."}], "owner": {"reputation": 413, "user_id": 3880912, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3d2cd9f6793e9b08440eb44f357ae9b3?s=128&d=identicon&r=PG&f=1", "display_name": "media", "link": "https://stackoverflow.com/users/3880912/media"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562191139, "creation_date": 1562190266, "last_edit_date": 1562191139, "question_id": 56878293, "link": "https://stackoverflow.com/questions/56878293/how-to-print-the-value-of-cosine-similarity-between-two-tensors-in-keras", "title": "How to print the value of cosine similarity between two tensors in Keras?", "body": "<p>I would like to compute the cosine similarity between two Keras layers, which I am able to do by using the approach suggested in <a href=\"https://stackoverflow.com/questions/51003027/computing-cosine-similarity-between-two-tensors-in-keras\">here</a>. However, when I print <code>distance</code> it gives me a tensor object like <code>Tensor(\"lambda_1/Neg:0\", shape=(?, ?, 1), dtype=float32)</code>. Now, my question is how is it possible to print the value associated with this Tensor object?</p>\n"}, {"tags": ["python", "pandas", "list", "dataframe"], "comments": [{"owner": {"reputation": 1091, "user_id": 9497687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b54b9d1d94a58d81bd43a7ae50b567d6?s=128&d=identicon&r=PG&f=1", "display_name": "jeschwar", "link": "https://stackoverflow.com/users/9497687/jeschwar"}, "edited": false, "score": 0, "creation_date": 1562191112, "post_id": 56878272, "comment_id": 100305399, "body": "look into <code>DataFrame.to_string(index_names=False)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 7565842, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Xit-2uG4jUA/AAAAAAAAAAI/AAAAAAAAAGQ/KTQNhVhPPYg/photo.jpg?sz=128", "display_name": "Riley White", "link": "https://stackoverflow.com/users/7565842/riley-white"}, "is_accepted": false, "score": 0, "last_activity_date": 1562191047, "creation_date": 1562191047, "answer_id": 56878404, "question_id": 56878272, "link": "https://stackoverflow.com/questions/56878272/how-to-make-a-list-from-pandas-if-the-index-is-timestamp/56878404#56878404", "title": "how to make a list from pandas if the index is timestamp", "body": "<p>If you want to just get the values from the output you can use <code>df.values</code> which returns a numpy array. If you want a list from that numpy array you can then use <code>np_array.tolist</code>.</p>\n\n<p>So </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>b = ((df.iloc[2]-df.iloc[1])/(df.iloc[1])).values #returns numpy array\nb.tolist # returns python list\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2238, "user_id": 2681088, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5I395.png?s=128&g=1", "display_name": "pdm", "link": "https://stackoverflow.com/users/2681088/pdm"}, "is_accepted": false, "score": 1, "last_activity_date": 1562192999, "last_edit_date": 1562192999, "creation_date": 1562191115, "answer_id": 56878417, "question_id": 56878272, "link": "https://stackoverflow.com/questions/56878272/how-to-make-a-list-from-pandas-if-the-index-is-timestamp/56878417#56878417", "title": "how to make a list from pandas if the index is timestamp", "body": "<p>You can do something like the following</p>\n\n<pre><code>import pandas as pd\n\ndata = {\n    \"ord_datetime\": [\"2019-05-01\",\"2019-05-02\",\"2019-05-03\",\"2019-05-04\",\"2019-05-05\"],\n    \"value\": [22.483871,27.228070,30.140625,32.581633,30.259259]\n}\n\ndf = pd.DataFrame(data=data)\n\nres = [ (df.iloc[ridx + 1, 1] - df.iloc[ ridx, 1]) / (df.iloc[ridx, 1]) for ridx in range(0, df.shape[0]-1) ]\nres # [0.2110045463256749, 0.10696883767376833, 0.08098730533955406, -0.0712786249848188]\n</code></pre>\n\n<p>Hope it helps.</p>\n"}, {"tags": [], "owner": {"reputation": 4281, "user_id": 1491850, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fd1125371f70fe174275e950d64885b7?s=128&d=identicon&r=PG", "display_name": "Daniel Perez", "link": "https://stackoverflow.com/users/1491850/daniel-perez"}, "is_accepted": true, "score": 1, "last_activity_date": 1562191270, "creation_date": 1562191270, "answer_id": 56878442, "question_id": 56878272, "link": "https://stackoverflow.com/questions/56878272/how-to-make-a-list-from-pandas-if-the-index-is-timestamp/56878442#56878442", "title": "how to make a list from pandas if the index is timestamp", "body": "<p>You are working with <code>Series</code> here, which is why you get this result.\nYour <code>iloc</code> returns a <code>Series</code> of 1 element, and the arithmetic operators also return series.\nIf you want to get the scalar value, you can simply use <code>my_series[0]</code>.</p>\n\n<p>So for your example:</p>\n\n<pre><code>data = {datetime(2019, 5, 1): 22.483871, datetime(2019, 5, 2): 27.228070,\n        datetime(2019, 5, 3): 30.140625, datetime(2019, 5, 4): 32.581633,\n        datetime(2019, 5, 5): 30.259259}\ndf = pd.DataFrame.from_dict(data, orient=\"index\")\nseries_result = (df.iloc[2] - df.iloc[1]) / df.iloc[1]\nscalar_result = series_result[0]\n\n# you can append the result to your list if you want\n\n</code></pre>\n"}], "owner": {"reputation": 300, "user_id": 11520406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be49f3527c1ec658db39717eb206bd19?s=128&d=identicon&r=PG&f=1", "display_name": "Jose", "link": "https://stackoverflow.com/users/11520406/jose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 56878442, "answer_count": 3, "score": 2, "last_activity_date": 1562192999, "creation_date": 1562190110, "last_edit_date": 1562190189, "question_id": 56878272, "link": "https://stackoverflow.com/questions/56878272/how-to-make-a-list-from-pandas-if-the-index-is-timestamp", "title": "how to make a list from pandas if the index is timestamp", "body": "<p>Here is my dataframe</p>\n\n<pre><code>ord_datetime\n2019-05-01    22.483871\n2019-05-02    27.228070\n2019-05-03    30.140625\n2019-05-04    32.581633\n2019-05-05    30.259259\n</code></pre>\n\n<p>if i do code like this </p>\n\n<pre><code>b=[]\n\nb.append((df.iloc[2]-df.iloc[1])/(df.iloc[1]))\n\nprint(b)\n</code></pre>\n\n<p>output is </p>\n\n<pre><code>[Ordered Items    0.106969\ndtype: float64]\n</code></pre>\n\n<p>I want an output like <code>0.106969</code> only</p>\n\n<p>How can i do that?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": true, "score": 1, "last_activity_date": 1562191675, "creation_date": 1562191675, "answer_id": 56878489, "question_id": 56878265, "link": "https://stackoverflow.com/questions/56878265/pandas-from-duplicate-rows-keeping-rows-without-null-values/56878489#56878489", "title": "Pandas- from duplicate rows, keeping rows without null values", "body": "<p>For your sample data:</p>\n\n<pre><code>dup_id = df['id'].duplicated(keep=False)\ndf[~(dup_id &amp; df.test.isna())]\n</code></pre>\n\n<p>gives what you want:</p>\n\n<pre><code>   id test\n0   1    a\n2   2    b\n3   3    w\n4   3    d\n5   4  NaN\n</code></pre>\n"}], "owner": {"reputation": 1092, "user_id": 6341182, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c37c2a0f46b44ffbc5ac9a82abf60abd?s=128&d=identicon&r=PG&f=1", "display_name": "Mary", "link": "https://stackoverflow.com/users/6341182/mary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 56878489, "answer_count": 1, "score": 1, "last_activity_date": 1562191675, "creation_date": 1562190057, "question_id": 56878265, "link": "https://stackoverflow.com/questions/56878265/pandas-from-duplicate-rows-keeping-rows-without-null-values", "title": "Pandas- from duplicate rows, keeping rows without null values", "body": "<p>I have the following dataframe:</p>\n\n<pre><code>df= pd.DataFrame ({'id': [1,1,2,3,3, 4], 'test': ['a', np.nan, 'b','w', 'd', np.nan]})\n</code></pre>\n\n<p>as you see the \"id\" column has some duplicate values with different values for the \"test\" column. From duplicate rows, I want only keep rows without null values. if a duplicate rows does not have any null values, I want to keep it.</p>\n\n<p>The output should be like this:</p>\n\n<pre><code>   id   value\n0   1   a\n1   2   b\n2   3   w\n3   3   d\n4   4   NaN\n</code></pre>\n\n<p>I tried this, but it does not work because it removes the duplicate rows where the id = 3.</p>\n\n<pre><code>df = df.groupby('id', as_index=False, sort=False)['value'].first()\n</code></pre>\n\n<p>any suggestion?</p>\n"}, {"tags": ["python", "opencv", "opticalflow"], "answers": [{"tags": [], "owner": {"reputation": 2112, "user_id": 1984090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/359b34d7152e74bb71de54571ba1f8f0?s=128&d=identicon&r=PG", "display_name": "Tobias Senst", "link": "https://stackoverflow.com/users/1984090/tobias-senst"}, "is_accepted": false, "score": 2, "last_activity_date": 1569616672, "creation_date": 1569616672, "answer_id": 58141086, "question_id": 56878219, "link": "https://stackoverflow.com/questions/56878219/dense-optical-flow-with-masking/58141086#58141086", "title": "Dense optical flow with masking", "body": "<p>Unfortunately, acceleration the motion estimation with as you plan by masking or only providing the bounding boxes of your detector will be no good idea. If you use a dense optical flow approach you need to provide the whole image and compute the flow field for the whole image.\nIf you overlay the image with by removing you will introduce artifical edges which will confuse the method. \nOn the otherhand, input each vehicle region individually you will lose the ability of the dense flow method to compute larger(fast) motions. Methods such as farneback uses image pyramids to deal with large motion, i.e. they are based on downscaling the input image. If the regions are to small than this limits the ability to compute large motions.\nA possibility to reduce the runtime would be to apply a Sparse method such as (Lucas Kanade or RLOF) and apply the SparseToDense interpolation (e.g. <a href=\"https://docs.opencv.org/master/d4/dfa/classcv_1_1ximgproc_1_1EdgeAwareInterpolator.html\" rel=\"nofollow noreferrer\">EdgeAwareInterpolation</a> in OpenCV) to your vehicle region and get the dense motion field for that area. </p>\n"}, {"tags": [], "owner": {"reputation": 892, "user_id": 6114832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e88cb96ab965010731d7d9fa059d165?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Karlsson", "link": "https://stackoverflow.com/users/6114832/stefan-karlsson"}, "is_accepted": false, "score": 1, "last_activity_date": 1569749144, "last_edit_date": 1569749144, "creation_date": 1569744859, "answer_id": 58153465, "question_id": 56878219, "link": "https://stackoverflow.com/questions/56878219/dense-optical-flow-with-masking/58153465#58153465", "title": "Dense optical flow with masking", "body": "<p>This can be a healthy approach for speed up, for some use-cases of optical flow.</p>\n\n<p>To be sure we are on the same page, the optical flow will not directly be used as the main source of information for tracking the car. That is handled by another module... probably some object detector based on deep learning. This object detector is likely intense computation-wise (unless you got some special hardware for it, like a dedicated GPU or VPU). </p>\n\n<p>The dense flow can be a great compliment, to get low-latency information about what is happening to the car and around it, and maybe be used as part of bootstrapping the later detector (providing a prior to the detector in the successive frames, as in a Kalman filter tracking sort of setting).</p>\n\n<p>With this assumption, you can easily optimize your optical flow calculations as you mention. I would suggest you skip the notion of a dense mask here, just use the bounding box from your detector. This will be your region of interest for the flow calculation. If you are in frame t, where your detection is at, and want to use optical flow from 2 frames, t and t-1, then use the same bounding box for both frames. This will give you 2 ROIs, and those are fed to your dense optical flow module.</p>\n\n<p>Each optical flow algorithm has support regions for their low-level operations, and they dont all handle image boundaries well. Therefore, make sure you supply ample extra space to your bounding boxes (as far as they can fit in the original video frames). </p>\n\n<p>For clarity, if you have bounding box for car detection as bbox(x,y,w,h), you want a good margin m, so that the used bounding box for dense flow is bbox(x-m/2,y-m/2,w+m,h+m). The margin is something you want to set depending on your optical flow method (and its parameters). </p>\n\n<p>edit: code for you here, you go. Note, I havent tested this at all:</p>\n\n<pre><code>// This is c++, since we are talking optimizations\n// I am uncertain of they python wrappers, but below I am fairly certain\n// will not make any deep copies outside of the flow module.\n// Assume you have INew and IOld, the two frames of the video:\n// assume your bounding box from your detector is a cv::Rect b\nfloat m = 4.0; // 4 pixels as an example margin...\nRect boxFlow(b.x - m/2, b.y - m/2, b.width + m, b.height + m);\nMat roiNew(INew (boxFlow));\nMat roiOld(IOld (boxFlow));\nMat uflow;\ncalcOpticalFlowFarneback(roiOld, roiNew, uflow, 0.5, 3, 15, 3, 5, 1.2, 0);\n</code></pre>\n\n<p>However, depending on your setup, this may not be a significant speed up in the end. For above code, I dont know how memory is handled inside the flow module, and in your python version, I am even less certain how it will be handled.</p>\n\n<p>Consider that in a streamlined dense optical flow approach (where you use same size data througout), you have the same size of your memory buffers in your pipeline. A naive implementation of the approach you mention would need to allocate memory dynamically, as the size and number of your bounding boxes will vary over time.</p>\n"}], "owner": {"reputation": 103, "user_id": 6137223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e25706a19c6b3a7e9f36ff44526eaebd?s=128&d=identicon&r=PG&f=1", "display_name": "Pranamesh", "link": "https://stackoverflow.com/users/6137223/pranamesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1490, "favorite_count": 2, "answer_count": 2, "score": 5, "last_activity_date": 1569749144, "creation_date": 1562189714, "question_id": 56878219, "link": "https://stackoverflow.com/questions/56878219/dense-optical-flow-with-masking", "title": "Dense optical flow with masking", "body": "<p>I need to compute dense optical flow of vehicles between two consecutive frames recorded from an overhead camera. I am using an object detector for vehicle detection and Farneback algorithm for optical flow estimation in Python. Presently, the optical flow is computed for the entire image. However, I need to create a mask around the vehicles detected and compute dense optical flow only around the selected region. This will help to speed up optical flow estimation significantly. I can use any other form of dense optical flow estimation too, but not sparse optical flow (e.g., Lucas-Kanade method). One option can be to extract vehicle regions and input each vehicle region individually for optical flow estimation, but I am looking for a better solution.</p>\n\n<pre><code>flow = cv2.calcOpticalFlowFarneback(prvs,next, None, 0.5, 3, 15, 3, 5, 1.2, 0)\n</code></pre>\n\n<p>The expected optical flow result will be zero for non-vehicle masked region without any optical flow computation.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1562189793, "post_id": 56878205, "comment_id": 100305049, "body": "<code>df.pivot_table(index=[&#39;player&#39;], columns=[&#39;unit&#39;]).T.swaplevel(0, 1, 0).sort_index()</code>"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1562189881, "post_id": 56878205, "comment_id": 100305065, "body": "<code>df.melt([&#39;player&#39;, &#39;unit&#39;]).pivot_table(&#39;value&#39;, [&#39;unit&#39;, &#39;variable&#39;], &#39;player&#39;)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": true, "score": 1, "last_activity_date": 1562189715, "creation_date": 1562189715, "answer_id": 56878220, "question_id": 56878205, "link": "https://stackoverflow.com/questions/56878205/pandas-complex-transformation-of-a-dataframe/56878220#56878220", "title": "Pandas: complex transformation of a DataFrame", "body": "<p>Try:</p>\n\n<pre><code>df.pivot(index='unit', columns='player').stack(level=0)\n</code></pre>\n\n<p>or without pivot:</p>\n\n<pre><code>df.set_index(['unit','player']).stack().unstack('player')\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>player      p1  p2\nunit              \nu1   stat1  10   2\n     stat2   8   7\nu2   stat1  21  32\n     stat2   2  34\n</code></pre>\n"}], "owner": {"reputation": 453, "user_id": 229511, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Iyt3m.jpg?s=128&g=1", "display_name": "abey", "link": "https://stackoverflow.com/users/229511/abey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "closed_date": 1562189668, "accepted_answer_id": 56878220, "answer_count": 1, "score": 1, "last_activity_date": 1562189715, "creation_date": 1562189608, "question_id": 56878205, "link": "https://stackoverflow.com/questions/56878205/pandas-complex-transformation-of-a-dataframe", "closed_reason": "Duplicate", "title": "Pandas: complex transformation of a DataFrame", "body": "<p>I have a Pandas DataFrame similar to this one:</p>\n\n<pre><code>    player  unit    stat1   stat2\n0   p1      u1      10      8\n1   p1      u2      21      2\n3   p2      u1      2       7\n4   p2      u2      32      34\n</code></pre>\n\n<p>One row exists for each combination of player and unit. I would like to transform this DataFrame into one looking like this:</p>\n\n<pre><code>            p1      p2\nu1  stat1   10      2\n    stat2   8       7\nu2  stat1   21      32\n    stat2   2       34\n</code></pre>\n\n<p>where units and the various stats are turned into a multi-level index and players are turned into columns. How can I achieve this?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 0, "creation_date": 1562189753, "post_id": 56878189, "comment_id": 100305036, "body": "why do you have lines like <code>x = x</code> and <code>y = y</code>? Also what exactly seems to be the problem? what output you <i>are</i> getting"}, {"owner": {"reputation": 2052, "user_id": 9749124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96bc792b252c540523faea0fb803cb1c?s=128&d=identicon&r=PG&f=1", "display_name": "taga", "link": "https://stackoverflow.com/users/9749124/taga"}, "reply_to_user": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 0, "creation_date": 1562190125, "post_id": 56878189, "comment_id": 100305127, "body": "problem is that this code makes polygons only on X, not on Y I want to get list of polygons , 5x5 ."}, {"owner": {"reputation": 1376, "user_id": 6168792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Bim4k.png?s=128&g=1", "display_name": "David J", "link": "https://stackoverflow.com/users/6168792/david-j"}, "edited": false, "score": 0, "creation_date": 1562190253, "post_id": 56878189, "comment_id": 100305159, "body": "@taga great question format!"}, {"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 0, "creation_date": 1562190377, "post_id": 56878189, "comment_id": 100305192, "body": "Your code does produce Y. you have to specify more accuratly 1) what you are trying to get, 2) what you are actually getting"}], "answers": [{"comments": [{"owner": {"reputation": 2052, "user_id": 9749124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96bc792b252c540523faea0fb803cb1c?s=128&d=identicon&r=PG&f=1", "display_name": "taga", "link": "https://stackoverflow.com/users/9749124/taga"}, "edited": false, "score": 0, "creation_date": 1562191438, "post_id": 56878319, "comment_id": 100305494, "body": "thanks! How would this code change, if I do not increase coordinates by 5, but by some other value , for example decimal (0.005)?"}, {"owner": {"reputation": 3021, "user_id": 11606193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXr7w.jpg?s=128&g=1", "display_name": "Deepstop", "link": "https://stackoverflow.com/users/11606193/deepstop"}, "reply_to_user": {"reputation": 2052, "user_id": 9749124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96bc792b252c540523faea0fb803cb1c?s=128&d=identicon&r=PG&f=1", "display_name": "taga", "link": "https://stackoverflow.com/users/9749124/taga"}, "edited": false, "score": 0, "creation_date": 1562191547, "post_id": 56878319, "comment_id": 100305527, "body": "just change all the 5 values except the first one and the ones in the ranges to .005"}, {"owner": {"reputation": 3021, "user_id": 11606193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXr7w.jpg?s=128&g=1", "display_name": "Deepstop", "link": "https://stackoverflow.com/users/11606193/deepstop"}, "reply_to_user": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 1, "creation_date": 1562192581, "post_id": 56878319, "comment_id": 100305717, "body": "Thanks @Tomerikoo for the update. I was part way through it but you saved me the trouble and put the x_count &amp; y_count in the right places which is tricky."}, {"owner": {"reputation": 3021, "user_id": 11606193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXr7w.jpg?s=128&g=1", "display_name": "Deepstop", "link": "https://stackoverflow.com/users/11606193/deepstop"}, "reply_to_user": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 0, "creation_date": 1562194105, "post_id": 56878319, "comment_id": 100306061, "body": "Extending @Tomerikoo&#39;s answer I simplified the statements a little by modifying the range instead of multiplying each element by <code>step</code>."}, {"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 0, "creation_date": 1562226568, "post_id": 56878319, "comment_id": 100313704, "body": "Nice! yes it is tricky to understand and some might say not pythonicly readable, but once you figure it out it&#39;s very neat. nice solution. upvoted :)"}, {"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 0, "creation_date": 1562226665, "post_id": 56878319, "comment_id": 100313753, "body": "Also, an interesting note will be that <code>step</code> can also be divided to <code>x_step</code> and <code>y_step</code> thus creating rectangles and not only squares"}, {"owner": {"reputation": 2052, "user_id": 9749124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96bc792b252c540523faea0fb803cb1c?s=128&d=identicon&r=PG&f=1", "display_name": "taga", "link": "https://stackoverflow.com/users/9749124/taga"}, "edited": false, "score": 0, "creation_date": 1562229995, "post_id": 56878319, "comment_id": 100315429, "body": "Thanks, and what If I want to start number be  30 for example, not 0?"}, {"owner": {"reputation": 2052, "user_id": 9749124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96bc792b252c540523faea0fb803cb1c?s=128&d=identicon&r=PG&f=1", "display_name": "taga", "link": "https://stackoverflow.com/users/9749124/taga"}, "edited": false, "score": 0, "creation_date": 1562231825, "post_id": 56878319, "comment_id": 100316497, "body": "Also, this solution is good, but It does not work if I want to set my coordinates to increase on every 0.1 (It does not work for decimal numbers because of range)"}, {"owner": {"reputation": 3021, "user_id": 11606193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXr7w.jpg?s=128&g=1", "display_name": "Deepstop", "link": "https://stackoverflow.com/users/11606193/deepstop"}, "reply_to_user": {"reputation": 2052, "user_id": 9749124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96bc792b252c540523faea0fb803cb1c?s=128&d=identicon&r=PG&f=1", "display_name": "taga", "link": "https://stackoverflow.com/users/9749124/taga"}, "edited": false, "score": 0, "creation_date": 1562233588, "post_id": 56878319, "comment_id": 100317616, "body": "@taga right. I should have left it alone. I&#39;ll change it back. It seemed like a good idea at the time :-)"}, {"owner": {"reputation": 2052, "user_id": 9749124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96bc792b252c540523faea0fb803cb1c?s=128&d=identicon&r=PG&f=1", "display_name": "taga", "link": "https://stackoverflow.com/users/9749124/taga"}, "edited": false, "score": 0, "creation_date": 1562234447, "post_id": 56878319, "comment_id": 100318127, "body": "Please do :) Also, how can I set the start point for x and y?"}, {"owner": {"reputation": 3021, "user_id": 11606193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXr7w.jpg?s=128&g=1", "display_name": "Deepstop", "link": "https://stackoverflow.com/users/11606193/deepstop"}, "edited": false, "score": 0, "creation_date": 1562235163, "post_id": 56878319, "comment_id": 100318525, "body": "Done. The easiest way to change the start point is to use the range, although in that case you are specifying it in steps. So if step is .1, to start at x=1 instead of x=0 you would use <code>range(10, x_count+10)</code>, and you may have issues if you want to offset in fractions of a step. If you want to use absolute offset, you would have to add it to each of the 4 elements, like <code>[i*step+offset,(i+1)*step+offset,(i+1)*step+offset,i*step+of&zwnj;&#8203;fset]</code>"}], "tags": [], "owner": {"reputation": 3021, "user_id": 11606193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXr7w.jpg?s=128&g=1", "display_name": "Deepstop", "link": "https://stackoverflow.com/users/11606193/deepstop"}, "is_accepted": true, "score": 2, "last_activity_date": 1562234887, "last_edit_date": 1562234887, "creation_date": 1562190462, "answer_id": 56878319, "question_id": 56878189, "link": "https://stackoverflow.com/questions/56878189/creating-coordinates-for-polygon-using-python-lists/56878319#56878319", "title": "Creating coordinates for polygon using Python lists", "body": "<p>Here's a simple solution using list comprehensions.</p>\n\n<pre><code>x_count = 5\ny_count = 5\nstep = 5\n\nx_list = y_count * [[i*step,(i+1)*step,(i+1)*step,i*step] for i in range(x_count)]\ny_list = [[i*step,i*step,(i+1)*step,(i+1)*step] for i in range(y_count) for j in range(x_count)]\n</code></pre>\n"}], "owner": {"reputation": 2052, "user_id": 9749124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96bc792b252c540523faea0fb803cb1c?s=128&d=identicon&r=PG&f=1", "display_name": "taga", "link": "https://stackoverflow.com/users/9749124/taga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 56878319, "answer_count": 1, "score": 2, "last_activity_date": 1562234887, "creation_date": 1562189533, "last_edit_date": 1562191255, "question_id": 56878189, "link": "https://stackoverflow.com/questions/56878189/creating-coordinates-for-polygon-using-python-lists", "title": "Creating coordinates for polygon using Python lists", "body": "<p>I want to make an algorithm that will create coordinates (corner coordinates) for square polygons. See the picture below:</p>\n\n<p><a href=\"https://i.stack.imgur.com/AD13P.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AD13P.png\" alt=\"enter image description here\"></a></p>\n\n<p>I have written some code so far, but only for the X-axis, and I think it could be improved.</p>\n\n<p>My desired output should be two nested lists, one for X and one for Y. There should be 25 polygons (5x5):</p>\n\n<pre><code>X_list = [[0, 5, 5, 0], [5, 10, 10, 5], [10, 15, 15, 10], ...]\nY_list = [[0, 0, 5, 5] , [0, 0, 5, 5], [0, 0, 5, 5], ...]\n</code></pre>\n\n<p>This is the code that I have. How can I make it work, so that it can make polygons on Y-axis too.</p>\n\n<pre><code>max_x = 20\nmax_y = 20\n\nx = 0\ny = 0\n\nxlist = []\nylist = []\n\nlon = []\nlad = []\nwhile x &lt; max_x and y &lt; max_y:\n\n    xlist = []\n    ylist = []\n\n    x = x\n    y = y\n    xlist.append(x)\n    ylist.append(y)\n\n    x += 5\n    y = y\n    xlist.append(x)\n    ylist.append(y)\n\n    x = x\n    y += 5\n    xlist.append(x)\n    ylist.append(y)\n\n    x -= 5\n    y = y\n    xlist.append(x)\n    ylist.append(y)\n    x += 5\n    y -= 5\n\n    lon.append(xlist)\n    lad.append(ylist)\n\nprint(lon)\nprint(lad)\n</code></pre>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 1, "creation_date": 1562192206, "post_id": 56878179, "comment_id": 100305651, "body": "<a href=\"http://effbot.org/tkinterbook/canvas.htm#Tkinter.Canvas.find_overlapping-method\" rel=\"nofollow noreferrer\">canvas.find_overlapped</a> can give list with all elements which overlap ball. If there is paddle then you have collision. Probably you could do it in one line of code: <code>return (self.shape in self.canvas.find_overlapped(*ball_pos))</code>"}, {"owner": {"reputation": 99, "user_id": 2409646, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/57e7a1ceb90c1fe98b4f6714d4072cea?s=128&d=identicon&r=PG", "display_name": "ankit.1g", "link": "https://stackoverflow.com/users/2409646/ankit-1g"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1562193360, "post_id": 56878179, "comment_id": 100305894, "body": "Thank you I will try this as well."}], "answers": [{"tags": [], "owner": {"reputation": 1348, "user_id": 6933039, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Sn3RU_eNCJA/AAAAAAAAAAI/AAAAAAAAAFs/IeOaIPSOW1A/photo.jpg?sz=128", "display_name": "brandonwang", "link": "https://stackoverflow.com/users/6933039/brandonwang"}, "is_accepted": true, "score": 1, "last_activity_date": 1562190607, "creation_date": 1562190607, "answer_id": 56878345, "question_id": 56878179, "link": "https://stackoverflow.com/questions/56878179/pong-game-in-tkinter-check-for-the-ball-hitting-the-vertical-paddle/56878345#56878345", "title": "Pong game in tkinter, Check for the ball hitting the vertical paddle", "body": "<p>You have the right idea, but there are some rare cases when the ball could pass through the paddle.</p>\n\n<p>The first if statement checks for the y position of the ball and paddle. This should return true iff any part of the ball is in between <code>paddle_pos[1]</code> and <code>paddle_pos[3]</code>. </p>\n\n<p>The second if statement checks for the x position, and has the same logic. You need to check if the LEFT side of the ball is within range since the that's the part of the ball that will hit the LEFT paddle. </p>\n\n<p>Try out this code:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def hit_paddle(self, pos):\n     \"\"\" pos(left, top, right, bottom)\"\"\"\n     paddle_pos = self.canvas.coords(self.shape)\n     if ball_pos[3] &gt;= paddle_pos[1] and ball_pos[1] &lt;= paddle_pos[3]:\n         if ball_pos[0] &gt;= paddle_pos[0] and ball_pos[0] &lt;= paddle_pos[2]:\n             return True\n     return False\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 446, "user_id": 162264, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GRa11.jpg?s=128&g=1", "display_name": "rocarvaj", "link": "https://stackoverflow.com/users/162264/rocarvaj"}, "is_accepted": false, "score": 0, "last_activity_date": 1562190634, "creation_date": 1562190634, "answer_id": 56878349, "question_id": 56878179, "link": "https://stackoverflow.com/questions/56878179/pong-game-in-tkinter-check-for-the-ball-hitting-the-vertical-paddle/56878349#56878349", "title": "Pong game in tkinter, Check for the ball hitting the vertical paddle", "body": "<p>Assuming that <code>ball_pos[1]</code> is the y coordinate of the lower left vertex of the ball's bounding box, Shouldn't you also put a constraint on the y coordinate of the upper-right vertex of the ball's bounding box? For example, if the ball is just bellow the lower end of the paddle I think your code won't count it as a hit.</p>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 99, "user_id": 2409646, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/57e7a1ceb90c1fe98b4f6714d4072cea?s=128&d=identicon&r=PG", "display_name": "ankit.1g", "link": "https://stackoverflow.com/users/2409646/ankit-1g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 289, "favorite_count": 0, "accepted_answer_id": 56878345, "answer_count": 2, "score": 0, "last_activity_date": 1562193345, "creation_date": 1562189448, "last_edit_date": 1562193345, "question_id": 56878179, "link": "https://stackoverflow.com/questions/56878179/pong-game-in-tkinter-check-for-the-ball-hitting-the-vertical-paddle", "title": "Pong game in tkinter, Check for the ball hitting the vertical paddle", "body": "<p>I am trying to implement a pong game in python tkinter. I have paddle on the left side of the canvas and I want to detect the collision of the ball with that paddle. I am unable to get the collision detected properly as sometimes the ball just passed through the paddle. please any help is appreciated , Below is the code for the collision detection i used, not sure whats wrong with it. I am trying to implement is if the ball position is between paddle top and bottom and between left and right then there is collision</p>\n\n<pre><code>def hit_paddle(self, pos):\n    \"\"\" pos(left, top, right, bottom)\"\"\"\n    paddle_pos = self.canvas.coords(self.shape)\n    if ball_pos[1] &gt;= paddle_pos[1] and ball_pos[1] &lt;= paddle_pos[3]:\n        if ball_pos[2] &gt;= paddle_pos[0] and ball_pos[2] &lt;= paddle_pos[2]:\n            return True\n    return False\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "anaconda", "installation", "conda"], "answers": [{"tags": [], "owner": {"reputation": 134, "user_id": 2980481, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-P7ccPjmKbtU/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3fJtaZ4wChEK6PhmCAD9t9XuSLjw/mo/photo.jpg?sz=128", "display_name": "iRestMyCaseYourHonor", "link": "https://stackoverflow.com/users/2980481/irestmycaseyourhonor"}, "is_accepted": true, "score": 1, "last_activity_date": 1609072866, "creation_date": 1609072866, "answer_id": 65465847, "question_id": 56878160, "link": "https://stackoverflow.com/questions/56878160/attributeerror-dlsymrtld-default-absolutetonanoseconds-symbol-not-found/65465847#65465847", "title": "AttributeError: dlsym(RTLD_DEFAULT, AbsoluteToNanoseconds): symbol not found", "body": "<p>A similar error happened to me on macOS Big Sur and removing miniconda2 and installing miniconda3 worked for me.</p>\n<p>I followed the instructions on <a href=\"https://docs.conda.io/en/latest/miniconda.html\" rel=\"nofollow noreferrer\">https://docs.conda.io/en/latest/miniconda.html</a> which is basically:</p>\n<pre><code>rm -rf ~/miniconda2\nrm -rf ~/.condarc ~/.conda ~/.continuum\nbash Miniconda3-latest-MacOSX-x86_64.sh # after downloading the installable\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6721427, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-I3SFnn9an6Y/AAAAAAAAAAI/AAAAAAAAABc/_YpHl4l_qNs/photo.jpg?sz=128", "display_name": "OGUZ HAN ATAS", "link": "https://stackoverflow.com/users/6721427/oguz-han-atas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1480, "favorite_count": 1, "accepted_answer_id": 65465847, "answer_count": 1, "score": 1, "last_activity_date": 1609072866, "creation_date": 1562189326, "question_id": 56878160, "link": "https://stackoverflow.com/questions/56878160/attributeerror-dlsymrtld-default-absolutetonanoseconds-symbol-not-found", "title": "AttributeError: dlsym(RTLD_DEFAULT, AbsoluteToNanoseconds): symbol not found", "body": "<p>I'm trying to run 'conda install something' on macOS Mojave but i'm getting this error at every turn:</p>\n\n<pre><code>conda install update\n</code></pre>\n\n<p>This is the entire traceback:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/anaconda2/bin/conda\", line 13, in &lt;module&gt;\n    sys.exit(main())\n  File \"/anaconda2/lib/python2.7/site-packages/conda/cli/main.py\", line 149, in main\n    from ..exceptions import conda_exception_handler\n  File \"/anaconda2/lib/python2.7/site-packages/conda/exceptions.py\", line 18, in &lt;module&gt;\n    from ._vendor.auxlib.entity import EntityEncoder\n  File \"/anaconda2/lib/python2.7/site-packages/conda/_vendor/auxlib/entity.py\", line 253, in &lt;module&gt;\n    from .collection import AttrDict, frozendict, make_immutable\n  File \"/anaconda2/lib/python2.7/site-packages/conda/_vendor/auxlib/collection.py\", line 10, in &lt;module&gt;\n    from .compat import isiterable, iteritems, odict, text_type\n  File \"/anaconda2/lib/python2.7/site-packages/conda/_vendor/auxlib/compat.py\", line 10, in &lt;module&gt;\n    from ._vendor.five import WhateverIO as StringIO, with_metaclass\n  File \"/anaconda2/lib/python2.7/site-packages/conda/_vendor/auxlib/_vendor/five.py\", line 80, in &lt;module&gt;\n    absolute_to_nanoseconds = CoreServices.AbsoluteToNanoseconds\n  File \"/anaconda2/lib/python2.7/ctypes/__init__.py\", line 379, in __getattr__\n    func = self.__getitem__(name)\n  File \"/anaconda2/lib/python2.7/ctypes/__init__.py\", line 384, in __getitem__\n    func = self._FuncPtr((name_or_ordinal, self))\nAttributeError: dlsym(RTLD_DEFAULT, AbsoluteToNanoseconds): symbol not found\n</code></pre>\n\n<p>how can i fix it?</p>\n"}, {"tags": ["python", "mysql", "flask", "flask-sqlalchemy", "multiple-databases"], "answers": [{"tags": [], "owner": {"reputation": 3, "user_id": 5140618, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1PGuly3GeDo/AAAAAAAAAAI/AAAAAAAADVI/-bxj-ntDOLo/photo.jpg?sz=128", "display_name": "Juan Cruz", "link": "https://stackoverflow.com/users/5140618/juan-cruz"}, "is_accepted": false, "score": 0, "last_activity_date": 1607971430, "creation_date": 1607971430, "answer_id": 65294688, "question_id": 56878156, "link": "https://stackoverflow.com/questions/56878156/flask-view-from-table-of-a-sqlalchemy-bind-doesnt-work/65294688#65294688", "title": "Flask View from table of a sqlalchemy-bind doesn&#39;t work", "body": "<p>This is a DB access problem, not a flask-admin issue. Check your &quot;SQLALCHEMY_BINDS&quot; access</p>\n"}], "owner": {"reputation": 53, "user_id": 10276962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6121ae6e39b57e3776fe86c9a616815?s=128&d=identicon&r=PG&f=1", "display_name": "brivadeneira", "link": "https://stackoverflow.com/users/10276962/brivadeneira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 326, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1607971430, "creation_date": 1562189292, "question_id": 56878156, "link": "https://stackoverflow.com/questions/56878156/flask-view-from-table-of-a-sqlalchemy-bind-doesnt-work", "title": "Flask View from table of a sqlalchemy-bind doesn&#39;t work", "body": "<p>I'm using python 3.6.5, flask 1.0.2, flask-admin, flask-sqlalchemy</p>\n\n<p>I have problems showing a View of a table from a second database, sqlalchemy bind configuration, model database, model view all seem like it's ok, but view is not showed in the app, and when I try to force it through the URL, a permissions message appears.</p>\n\n<p>I have checked the bind configuration, when I comment that line, the expected error appears.</p>\n\n<p>I also removed and added some other views from primary database's tables, all of that work well.</p>\n\n<p>I have tried with different ways to make reference to db.session:</p>\n\n<pre><code>db.session #like always\ndb.session(bind=['login'])\ndb.get_engine(app, 'login')\n</code></pre>\n\n<p>None of that report any error, but view doesn't work.</p>\n\n<p>SQLALCHEMY_BINDS configuration:</p>\n\n<pre><code>SQLALCHEMY_DATABASE_URI = 'mysql+pymysql://user:pass@localhost/radius'\nSQLALCHEMY_BINDS = {\n        'login': 'mysql+pymysql://user:pass@localhost/login_radisp'\n}\n</code></pre>\n\n<p>db Model:</p>\n\n<pre><code>class Empleado(db.Model):\n    __bind_key__ = 'login_radisp'\n    __tablename__ = 'empleados'\n    id_empleado = Column(INTEGER, primary_key=True)\n    nombre = Column(String(255))\n    apellido = Column(String(255))\n    email = Column(String(255))\n</code></pre>\n\n<p>db Model View</p>\n\n<pre><code>class EmpleadoAdmin(sqla.ModelView):\n    column_labels = dict(\n        nombre = 'Nombre',\n        apellido = 'Apellido',\n        telefono = 'Tel\u00e9fono',\n        email = 'Email'\n</code></pre>\n\n<p>Creating app builder objects:</p>\n\n<pre><code>admin.add_view(EmpleadoAdmin(Empleado, db.session(bind=['login'])))\n</code></pre>\n\n<p>There is not error at all, but view is not showed in the app, when I try to force the view in the URL, next message appears:</p>\n\n<pre><code>Forbidden\n\nYou don't have the permission to access the requested resource. It is either read-protected or not readable by the server.\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "list"], "comments": [{"owner": {"reputation": 11289, "user_id": 1822698, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/725a332cc5b93972e715f071b631f4a8?s=128&d=identicon&r=PG", "display_name": "slider", "link": "https://stackoverflow.com/users/1822698/slider"}, "edited": false, "score": 3, "creation_date": 1562188937, "post_id": 56878076, "comment_id": 100304767, "body": "You should split the string at index 0 in the list. Try <code>list2 = list1[0].split()</code>."}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 2, "creation_date": 1562188956, "post_id": 56878076, "comment_id": 100304774, "body": "Why is the string wrapped in a list? There&#39;s only the one string."}, {"owner": {"reputation": 391, "user_id": 6947770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4eb5ec208a44c81d822b05894cec0d8?s=128&d=identicon&r=PG&f=1", "display_name": "MegaBluejay", "link": "https://stackoverflow.com/users/6947770/megabluejay"}, "edited": false, "score": 3, "creation_date": 1562188998, "post_id": 56878076, "comment_id": 100304788, "body": "It&#39;s not clear what you want exactly? Does the original list always only have one item? In that case you can simply extract it <code>list1[0].split()</code>. Otherwise, what do you want to happen to a list with multiple strings?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1562189118, "post_id": 56878076, "comment_id": 100304825, "body": "You have to apply split the <i>str</i>, not to the <i>list</i>.  <code>list[0].split</code>"}], "answers": [{"tags": [], "owner": {"reputation": 611, "user_id": 7747988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EHOW3.jpg?s=128&g=1", "display_name": "Bob White", "link": "https://stackoverflow.com/users/7747988/bob-white"}, "is_accepted": true, "score": 0, "last_activity_date": 1562188970, "creation_date": 1562188970, "answer_id": 56878102, "question_id": 56878076, "link": "https://stackoverflow.com/questions/56878076/convert-a-list-to-another-list-containing-strings/56878102#56878102", "title": "Convert a list to another list containing strings", "body": "<pre><code>list1 = ['io.o compat.o token.o']\nlist2 = list1[0].split()\n</code></pre>\n\n<p><a href=\"https://www.pythonforbeginners.com/dictionary/python-split\" rel=\"nofollow noreferrer\">resources for list</a></p>\n"}, {"tags": [], "owner": {"reputation": 134, "user_id": 10474024, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XkmSm8phXlA/AAAAAAAAAAI/AAAAAAAAAAc/Nr8e7Y7s05U/photo.jpg?sz=128", "display_name": "ProsperousHeart", "link": "https://stackoverflow.com/users/10474024/prosperousheart"}, "is_accepted": false, "score": 1, "last_activity_date": 1562189023, "creation_date": 1562189023, "answer_id": 56878112, "question_id": 56878076, "link": "https://stackoverflow.com/questions/56878076/convert-a-list-to-another-list-containing-strings/56878112#56878112", "title": "Convert a list to another list containing strings", "body": "<p>That is because it's already a list - you can't split a list.</p>\n\n<pre><code>temp = ['io.o compat.o token.o']\ntemp_list = []\nfor item in temp:\n    temp_list.extend(item.split())\nprint(temp_list)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1562189101, "post_id": 56878117, "comment_id": 100304817, "body": "<code>split()</code> returns a list, not an iterator, there&#39;s no reason to wrap it in <code>list()</code>."}, {"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 0, "creation_date": 1562190981, "post_id": 56878117, "comment_id": 100305368, "body": "There is also no need for the <code>&#39; &#39;</code> argument as it is the default"}], "tags": [], "owner": {"reputation": 400, "user_id": 6480819, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f35e7dfa3a7489c7ffd7a97307872f12?s=128&d=identicon&r=PG&f=1", "display_name": "dannyxn", "link": "https://stackoverflow.com/users/6480819/dannyxn"}, "is_accepted": false, "score": 0, "last_activity_date": 1562189157, "last_edit_date": 1562189157, "creation_date": 1562189037, "answer_id": 56878117, "question_id": 56878076, "link": "https://stackoverflow.com/questions/56878076/convert-a-list-to-another-list-containing-strings/56878117#56878117", "title": "Convert a list to another list containing strings", "body": "<p>Something like that should work:</p>\n\n<pre><code>p = ['io.o compat.po token.o']  \np = p[0].split(' ')  \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1478, "user_id": 2780261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dedc95cf990e12d953855de90220890f?s=128&d=identicon&r=PG&f=1", "display_name": "edilio", "link": "https://stackoverflow.com/users/2780261/edilio"}, "is_accepted": false, "score": 0, "last_activity_date": 1562189510, "creation_date": 1562189510, "answer_id": 56878187, "question_id": 56878076, "link": "https://stackoverflow.com/questions/56878076/convert-a-list-to-another-list-containing-strings/56878187#56878187", "title": "Convert a list to another list containing strings", "body": "<p>If more than 1 string in the input list you could do:</p>\n\n<pre><code>temp = ['io.o compat.o token.o']\nresult = [item.split() for item in temp]\nprint(result)\n</code></pre>\n\n<p><strong>OUTPUT:-</strong></p>\n\n<pre><code>[['io.o', 'compat.o', 'token.o']]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 11005469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/942b19f33ebc07372c8a4630d605a694?s=128&d=identicon&r=PG&f=1", "display_name": "Tulasi", "link": "https://stackoverflow.com/users/11005469/tulasi"}, "is_accepted": false, "score": 0, "last_activity_date": 1562221900, "creation_date": 1562221900, "answer_id": 56881853, "question_id": 56878076, "link": "https://stackoverflow.com/questions/56878076/convert-a-list-to-another-list-containing-strings/56881853#56881853", "title": "Convert a list to another list containing strings", "body": "<pre><code>dd = ['io.o compat.o token.o']\nresult = [i.split(\" \") for i in dd][0]\n# result =['io.o', 'compat.o', 'token.o']    \n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 7942834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bff7dd4522f2cccd43cfd94b2057fa66?s=128&d=identicon&r=PG&f=1", "display_name": "user7942834", "link": "https://stackoverflow.com/users/7942834/user7942834"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 56878102, "answer_count": 5, "score": 1, "last_activity_date": 1562221900, "creation_date": 1562188813, "question_id": 56878076, "link": "https://stackoverflow.com/questions/56878076/convert-a-list-to-another-list-containing-strings", "title": "Convert a list to another list containing strings", "body": "<p>I am learning Python data structures\nTrying to convert </p>\n\n<pre><code>    ['io.o compat.o token.o']\n</code></pre>\n\n<p>to </p>\n\n<pre><code>    ['io.o', 'compat.o', 'token.o']\n</code></pre>\n\n<p>I have tried split based on spaces but that works only for strings and not lists.</p>\n\n<pre><code>    &gt;&gt;&gt; list1=['io.o compat.o token.o']\n    &gt;&gt;&gt; list2=list1.split()\n    Traceback (most recent call last):\n    File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n    AttributeError: 'list' object has no attribute 'split'\n</code></pre>\n\n<p>I also looked at other functions supported on lists like copy but could not figure out how to do the above</p>\n"}, {"tags": ["python", "dataframe", "filtering"], "comments": [{"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1562188357, "post_id": 56877964, "comment_id": 100304500, "body": "You&#39;ve hard coded <code>df_state = df[df.state ==&#39;IL&#39;]</code> into your function. Change it to take the state variable passed in as the function argument and you should be fine."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 11700362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db118e69b69e482268594b71a505c738?s=128&d=identicon&r=PG&f=1", "display_name": "Yeet", "link": "https://stackoverflow.com/users/11700362/yeet"}, "edited": false, "score": 0, "creation_date": 1562188737, "post_id": 56877995, "comment_id": 100304674, "body": "God bless your soul"}], "tags": [], "owner": {"reputation": 165, "user_id": 5428725, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Pk24Hl-krBI/AAAAAAAAAAI/AAAAAAAABZE/B4obHWGCIos/photo.jpg?sz=128", "display_name": "Peanut Butter Vibes", "link": "https://stackoverflow.com/users/5428725/peanut-butter-vibes"}, "is_accepted": false, "score": 1, "last_activity_date": 1562188360, "creation_date": 1562188360, "answer_id": 56877995, "question_id": 56877964, "link": "https://stackoverflow.com/questions/56877964/a-function-to-recall-column-from-a-csv-file/56877995#56877995", "title": "A function to recall column from a csv file", "body": "<p>You've both given 'IL' as the default for the <code>state</code> kwarg, and hard coded \"IL\" into the function. Replace 'IL' with the argument <code>state</code>, and it should work. Like this:</p>\n\n<pre><code>def find_state(df, state='IL')\n    df_state = df[df.state == state]\n    return df_state\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 11700362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db118e69b69e482268594b71a505c738?s=128&d=identicon&r=PG&f=1", "display_name": "Yeet", "link": "https://stackoverflow.com/users/11700362/yeet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564183138, "creation_date": 1562188202, "last_edit_date": 1564183138, "question_id": 56877964, "link": "https://stackoverflow.com/questions/56877964/a-function-to-recall-column-from-a-csv-file", "title": "A function to recall column from a csv file", "body": "<p>I need to create a function so that would allow me to pull data by columns.For example, the df has column state I want to find all the related airport information for a particular state, say like IL</p>\n\n<pre><code>def state(df, state='IL')\n</code></pre>\n\n<p>The csv is loaded into a dataframe already.</p>\n\n<p>I tried:</p>\n\n<pre><code>def find_state(df, state='IL')\n    df_state = df[df.state =='IL']\n    return df_state\n\nfind_state(df, state='IL')\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 6896310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7404dfc56933e0966c3d736586176cf8?s=128&d=identicon&r=PG&f=1", "display_name": "EnlightenedFunky", "link": "https://stackoverflow.com/users/6896310/enlightenedfunky"}, "edited": false, "score": 0, "creation_date": 1562189834, "post_id": 56877978, "comment_id": 100305058, "body": "&quot;None of [Float64Index([1.973, 2.05, 1.76], dtype=&#39;float64&#39;)] are in the [index]&quot; then I get this errorremoving the Teflon set index"}, {"owner": {"reputation": 1027, "user_id": 3412660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9006acce12b3b2e15183fc2c0010e2c?s=128&d=identicon&r=PG&f=1", "display_name": "Rich Lysakowski PhD", "link": "https://stackoverflow.com/users/3412660/rich-lysakowski-phd"}, "edited": false, "score": 0, "creation_date": 1562624926, "post_id": 56877978, "comment_id": 100426504, "body": "You must learn more about Pandas and Python before blindly using a website example.  A pandas column (a Series) and pandas index (an Index) are different.  When you .set_index(), it converts &quot;Teflon&quot; from a values column to an index, so it can then be used with access operator &quot;[ ]&quot; to retrieve data from a regular &quot;named&quot; column, e.g., [&quot;Lactic_Acid&quot;].  Your syntax is &quot;function first&quot; not &quot;dataframe first&quot;.  Learn the object.method() syntax of Python and Pandas.  Create a &quot;lab_data&quot; dataframe, add data to it (in a loop if you like), then sort by column name, then get data using [&quot;Lactic_Acid&quot;]"}], "tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": false, "score": 3, "last_activity_date": 1562188292, "creation_date": 1562188292, "answer_id": 56877978, "question_id": 56877954, "link": "https://stackoverflow.com/questions/56877954/programming-data-to-csv-using-pandas/56877978#56877978", "title": "Programming Data to CSV using Pandas", "body": "<p>You already set <code>Teflon</code> as index by </p>\n\n<pre><code> dataframe = dataframe.set_index('Teflon')\n</code></pre>\n\n<p>you <code>dataframe</code> no longer contains that columns. Your function</p>\n\n<pre><code>sort_data_frame_by_Teflon_column()\n</code></pre>\n\n<p>would fail and through that error.</p>\n\n<p>Also, the other functions like:</p>\n\n<pre><code>def get_data_in_LacticAcid(dataframe):\n   dataframe = dataframe.loc[dataframe['Lactic Acid']]\n   dataframe = dataframe.sort_values(by= ['Lactic Acid'])\n</code></pre>\n\n<p>will likely fail or turns your <code>dataframe</code> to an empty one due to the first line. What exactly are you trying to achieve with those functions?</p>\n"}, {"comments": [{"owner": {"reputation": 147, "user_id": 6896310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7404dfc56933e0966c3d736586176cf8?s=128&d=identicon&r=PG&f=1", "display_name": "EnlightenedFunky", "link": "https://stackoverflow.com/users/6896310/enlightenedfunky"}, "edited": false, "score": 0, "creation_date": 1562275775, "post_id": 56878392, "comment_id": 100334995, "body": "I am trying to automate your code with there being an input and this is my attempt but I got this error TypeError: cannot unpack non-iterable NoneType object."}], "tags": [], "owner": {"reputation": 1027, "user_id": 3412660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9006acce12b3b2e15183fc2c0010e2c?s=128&d=identicon&r=PG&f=1", "display_name": "Rich Lysakowski PhD", "link": "https://stackoverflow.com/users/3412660/rich-lysakowski-phd"}, "is_accepted": true, "score": 3, "last_activity_date": 1562190990, "creation_date": 1562190990, "answer_id": 56878392, "question_id": 56877954, "link": "https://stackoverflow.com/questions/56877954/programming-data-to-csv-using-pandas/56878392#56878392", "title": "Programming Data to CSV using Pandas", "body": "<p>I can tell that you are a Pandas beginner.  No worries...  Here's how you do the first few operations.  </p>\n\n<p>The <code>AID</code> that you reference is doing things the old fashioned way, and not leveraging many fine tools already created for working with CSV and XLSX data in and out of Pandas and Python.  </p>\n\n<p>XLSXWriter is a fabulous library that reads and writes Pandas data easily.<br>\n[XLXSwriter.com][1]<a href=\"https://xlsxwriter.readthedocs.io/working_with_pandas.html\" rel=\"nofollow noreferrer\">https://xlsxwriter.readthedocs.io/working_with_pandas.html</a></p>\n\n<pre><code># Do necessary imports\nimport pandas as pd\nimport os\nimport xlsxwriter\n\n# Define your data\nexpt_data = [\"Teflon\", \"Lactic_Acid\", \"Expt_Wt\", \"LacticAcid_to_Exptl_Wt\"]\nrow1 = [ 1.973, .2201, 1.56, .14]\nrow2 = [2.05, .15, .93, .16]\nrow3 = [1.76, .44, 1.56, .28]\n\n# Create dataframe using constructor method\ndf1 = pd.DataFrame([row1, row2, row3], columns=expt_data)\n\n# Output dataframe\ndf1\n\n# Sort dataframe by Teflon column values and output it\nTeflon_Sorted = df1.sort_values(by=[\"Teflon\"])\nTeflon_Sorted\n\n# Sort dataframe by Lactic_Acid column values and output it\nLactic_Acid_Sorted = df1.sort_values(by=[\"Lactic_Acid\"])\nLactic_Acid_Sorted\n\n# Sort dataframe by Expt_Wt column values and output it\nExpt_Wt_sorted = df1.sort_values(by=[\"Expt_Wt\"])\nExpt_Wt_sorted\n\n# Sort dataframe by Expt_Wt column values and output it\nLacticAcid_to_Exptl_Wt_sorted = df1.sort_values(by=[\"LacticAcid_to_Exptl_Wt\"])\nLacticAcid_to_Exptl_Wt_sorted\n\n# Create a Pandas Excel writer using XlsxWriter as the engine.\nwriter = pd.ExcelWriter(\"Trial1.xlsx\", engine='xlsxwriter')\n\n# Convert all dataframes to XlsxWriter Excel objects and then write each to a different worksheet in the workbook created above named \"Trial1.xlsx\".\nTeflon_Sorted.to_excel(writer, sheet_name='Teflon_Sorted')\nLactic_Acid_Sorted.to_excel(writer, sheet_name='Lactic_Acid_Sorted')\nExpt_Wt_sorted.to_excel(writer, sheet_name='Expt_Wt_sorted')\nLacticAcid_to_Exptl_Wt_sorted.to_excel(writer, sheet_name='LacticAcid_to_Exptl_Wt_sorted')\n\n# Close the Pandas Excel writer and output the Excel file.\nwriter.save()\n\n# now go to your current directory in your file system where the Jupyter Notebook or Python file is executing and find your file. \n\n# Type !dir in Jupyter cell to list current directory on MS-Windows\n!dir \n</code></pre>\n\n<p>[XLXSwriter.com][1]<a href=\"https://xlsxwriter.readthedocs.io/working_with_pandas.html\" rel=\"nofollow noreferrer\">https://xlsxwriter.readthedocs.io/working_with_pandas.html</a></p>\n\n<p>Sorry this is not a complete application that does everything you want, but I have limited time.  I showed you how to write out your final results.  I left it as a learning exercise for you to learn how to read in your data file, rather than creating it \"on the fly\" inline in your Python program.</p>\n\n<p>My recommendation is to use XLXSwriter for everything related to Excel or Pandas.  Follow the fabulous tutorial on the XLSXwriter website.  XLSXwriter is probably the best and easiest Python-Pandas-Excel toolkit right now.  It does everything programmatically that someone would normally have to do manually (\"interactively\").</p>\n"}], "owner": {"reputation": 147, "user_id": 6896310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7404dfc56933e0966c3d736586176cf8?s=128&d=identicon&r=PG&f=1", "display_name": "EnlightenedFunky", "link": "https://stackoverflow.com/users/6896310/enlightenedfunky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 56878392, "answer_count": 2, "score": 0, "last_activity_date": 1562276046, "creation_date": 1562188155, "last_edit_date": 1562276046, "question_id": 56877954, "link": "https://stackoverflow.com/questions/56877954/programming-data-to-csv-using-pandas", "title": "Programming Data to CSV using Pandas", "body": "<p>I am trying to make a CSV, Excel I followed an online aid however, it appears not to work, and it brings up KeyError: 'Teflon'. Any thoughts why? \nHere is the aid I was following <a href=\"https://www.dev2qa.com/python-pandas-read-write-csv-file-and-convert-to-excel-file-example/\" rel=\"nofollow noreferrer\">Aid</a></p>\n\n<pre><code>import pandas as pd\nimport os\n\ndef sort_data_frame_by_Teflon_column(dataframe):\n     dataframe = dataframe.sort_values(by= ['Teflon'])\ndef sort_data_frame_by_LacticAcid_column(dataframe):\n    dataframe = dataframe.sort_values(by= ['Lactic Acid'])\ndef sort_data_frame_by_ExperimentalWeight_column(dataframe):\n    dataframe = dataframe.sort_values(by= ['Experimental Weight'])\ndef sort_data_frame_by_Ratio_column(dataframe):\n    dataframe = dataframe.sort_values(by= ['Ratio of Lactic Acid to Experimental Weight'])\ndef get_data_in_Teflon(dataframe):\n    dataframe = dataframe.loc[dataframe['Teflon']]\n    dataframe = dataframe.sort_values(by=['Teflon'])\ndef get_data_in_LacticAcid(dataframe):\n   dataframe = dataframe.loc[dataframe['Lactic Acid']]\n   dataframe = dataframe.sort_values(by= ['Lactic Acid'])\ndef get_data_in_ExperimentalWeight(dataframe):\n   dataframe = dataframe.loc[dataframe['Experimental Weight']]\n   dataframe = dataframe.sort_values(by= ['Experimental Weight'])\ndef get_data_in_Ratio(dataframe):\n   dataframe = dataframe.loc[dataframe['Ratio of Lactic Acid to Experimental Weight']]\n   dataframe = dataframe.sort_values(by= ['Ratio of Lactic Acid to Experimental Weight'])\n   path = 'C:\\\\Users\\\\Light_Wisdom\\\\Documents\\\\Spyder\\\\Mass-TeflonLacticAcidRatio.csv'\n #output_file = open(path,'x')\n #text = input(\"Input Data: \")\n #text.replace('\\\\n', '\\n')\n #output_file.write(text. replace('\\\\', ''))\n #output_file.close()\n csv_file = 'C:\\\\Users\\\\Light_Wisdom\\\\Documents\\\\Spyder\\\\Mass-TeflonLacticAcidRatio.csv'\n dataframe = pd.read_csv(csv_file)\n dataframe = dataframe.set_index('Teflon')\n sort_data_frame_by_Teflon_column(dataframe)\n sort_data_frame_by_LacticAcid_column(dataframe)\n sort_data_frame_by_ExperimentalWeight_column(dataframe)\n sort_data_frame_by_Ratio_column(dataframe)\n get_data_in_Teflon(dataframe)\n get_data_in_LacticAcid(dataframe)\n get_data_in_ExperimentalWeight(dataframe)\n get_data_in_Ratio(dataframe)\n write_to_csv_file_by_pandas(\"C:\\\\images\\\\Trial1.csv\", dataframe)\n write_to_excel_file_by_pandas(\"C:\\\\images\\\\Trial1.xlsx\", dataframe)\n #data_frame.to_csv(csv_file_path)\n #excel_writer = pd.ExcelWriter(excel_file_path, engine = 'xlsxwriter')\n #excel_writer.save()\n</code></pre>\n\n<p>Here is the CSV:</p>\n\n<pre><code>Teflon,Lactic Acid,Experimental Weight,Ratio of Lactic Acid to Experimental Weight\n1.973,.2201,1.56,.14\n2.05,.15,.93,.16\n1.76,.44,1.56,.28\n</code></pre>\n\n<h2>Edit New Question  7/24/19</h2>\n\n<p>I am trying to automate an answer with functions and I was on the attempt when I got this error.</p>\n\n<pre><code>def get_Data():\ncheck = 'No'\nwhile(check == 'Yes'):\n    row_name = input(\"What is the row number? \")\n    row_name = []\n    data = float(input(\"Teflon, Lactic_Acid, Expt_Wt, LacticAcid_to_Expt1_Wt: \"))\n    dataframe = []\n    check = input(\"Add another row? \")\n    return row_name,data, dataframe\n def row_inputter(row_name,data,dataframe):\n    row_name.append(data)\n    dataframe.append(row_name)\n    return row_name, dataframe\n\n  # Define your data\n  #row1 = [ 1.973, .2201, 1.56, .14]\n  #row2 = [2.05, .15, .93, .16]\n  #row3 = [1.76, .44, 1.56, .28]\n row_name,data, dataframe = get_Data()\n row, df = row_inputter()\n</code></pre>\n"}, {"tags": ["python", "datetime", "strptime"], "owner": {"reputation": 215, "user_id": 9835749, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Zo28c9PLbIM/AAAAAAAAAAI/AAAAAAAAASM/NZTFNL7n4no/photo.jpg?sz=128", "display_name": "Ernest Pokropek", "link": "https://stackoverflow.com/users/9835749/ernest-pokropek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 16, "favorite_count": 0, "closed_date": 1562188121, "answer_count": 0, "score": 1, "last_activity_date": 1562188035, "creation_date": 1562188035, "question_id": 56877933, "link": "https://stackoverflow.com/questions/56877933/how-to-convert-time-string-with-very-precise-time-measurements-to-date-objects-u", "closed_reason": "Duplicate", "title": "How to convert time string with very precise time measurements to date objects using strptime()?", "body": "<p>From some sensor I obtained very precise time measurement given as this:</p>\n\n<pre><code>time_str = '2019-07-03T20:03:51.520273066Z'\n</code></pre>\n\n<p>Using the datetime library, I'm trying to convert it to datetime object:</p>\n\n<pre><code>time_obj = datetime.datetime.strptime(time_str, \"%Y-%m-%dT%H:%M:%S.%fZ\")\n</code></pre>\n\n<p>Which results in: </p>\n\n<pre><code>ValueError: time data '2019-07-03T20:03:51.520273066Z' does not match format '%Y-%m-%dT%H:%M:%S.%fZ'\n</code></pre>\n\n<p>I've noticed and later read from documentation of strptime(), that the \".%f\" symbol is for formatting maximum of 6 decimal numbers. Therefore, following code works perfectly:</p>\n\n<pre><code>time_str = '2019-07-03T20:03:51.5202Z'\ntime_obj = datetime.datetime.strptime(time_str, \"%Y-%m-%dT%H:%M:%S.%fZ\")\n</code></pre>\n\n<p>My question - is there a possibility of converting such precise measurement as datetime object, besides some direct manipulations on the string itself (perhaps without loosing the accuracy)?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 22982, "user_id": 10189214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oTTBaX3HSZQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ohHVatc4khqXgYvNrBM40bMFj71Q/mo/photo.jpg?sz=128", "display_name": "Andy L.", "link": "https://stackoverflow.com/users/10189214/andy-l"}, "edited": false, "score": 0, "creation_date": 1562191079, "post_id": 56877919, "comment_id": 100305390, "body": "could you provide the output of this command: <code>MaterialsTracking_df[&#39;# BOXES&#39;].values</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1767, "user_id": 1917500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/619b3bfba2a078dc60caca6df3ab37ec?s=128&d=identicon&r=PG&f=1", "display_name": "Karthik V", "link": "https://stackoverflow.com/users/1917500/karthik-v"}, "is_accepted": false, "score": 0, "last_activity_date": 1562194566, "creation_date": 1562194566, "answer_id": 56878832, "question_id": 56877919, "link": "https://stackoverflow.com/questions/56877919/concatenating-a-string-to-a-series-in-pandas/56878832#56878832", "title": "Concatenating a string to a series in Pandas?", "body": "<p>Have you tried:</p>\n\n<pre><code>   df = MaterialsReport_df\n   df['Scoring Site Including X'] = df.apply(lambda x: x['Scoring Site DBN'] + 'X' if x['# BOXES'] == 'X' else x['Scoring Site DBN'], axis=1)\n</code></pre>\n\n<p>If each element of 'Scoring Site DBN' is a string, this should work.</p>\n"}], "owner": {"reputation": 767, "user_id": 11685024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a5651fd1574b0bfb7fcde5f229c8d43?s=128&d=identicon&r=PG&f=1", "display_name": "Christina Zhou", "link": "https://stackoverflow.com/users/11685024/christina-zhou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562194566, "creation_date": 1562187966, "question_id": 56877919, "link": "https://stackoverflow.com/questions/56877919/concatenating-a-string-to-a-series-in-pandas", "title": "Concatenating a string to a series in Pandas?", "body": "<p>A piece of code I thought would work didn't. I wanted to add \"X\" to tags only if another column represented \"X\". However, I couldn't just say <code>df['Tag With X' = df['Tag'] + \"X\"</code> which I assumed I could:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>MaterialsReport_df['Scoring Site Including X'] = np.where(MaterialsTracking_df['# BOXES'] == \"X\",\n                                                          MaterialsTracking_df['Scoring Site DBN'] + \"X\",\n                                                          MaterialsTracking_df['Scoring Site DBN'])\n</code></pre>\n\n<p>This gives the error that <code>elementwise comparison failed; returning scalar instead...result = method(y)</code>.</p>\n\n<p>I know this works when I add a <code>.astype(str)</code> to the end. I just don't understand why. </p>\n\n<p>Especially because when I check on the type of both the column and the column converted to string, Python says both are still <code>&lt;class 'pandas.core.series.Series'&gt;</code>.</p>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "edited": false, "score": 0, "creation_date": 1562188310, "post_id": 56877913, "comment_id": 100304488, "body": "Put <code>continue</code> under <code>except</code> block."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1562189391, "post_id": 56877913, "comment_id": 100304910, "body": "Catching the <code>Exception</code> in an <code>except</code> block, does not mean you will be able to recover from the error and keep going. The best you can do is abort the reading process in most if not all cases. This is because that csv reader has problem &quot;lost track&quot; of where it is in the file it was reading. Ultimately the only solution will be to fix the offending file."}, {"owner": {"reputation": 1, "user_id": 4729894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/634fe8b070c4e6faef0234c17e2f12a2?s=128&d=identicon&r=PG&f=1", "display_name": "canoetraveler", "link": "https://stackoverflow.com/users/4729894/canoetraveler"}, "edited": false, "score": 0, "creation_date": 1562281397, "post_id": 56877913, "comment_id": 100336045, "body": "I got the job done by adding       errors=&#39;ignore&#39; as a parameter to the open command."}, {"owner": {"reputation": 37454, "user_id": 4985733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r7daF.jpg?s=128&g=1", "display_name": "Martin Evans", "link": "https://stackoverflow.com/users/4985733/martin-evans"}, "edited": false, "score": 0, "creation_date": 1562504659, "post_id": 56877913, "comment_id": 100387135, "body": "Could you add some example CSV rows that are failing to your question using the <a href=\"https://stackoverflow.com/posts/56877913/edit\">edit</a> button?  It would then be easier to suggest possible solutions on how to handle them correctly."}], "owner": {"reputation": 1, "user_id": 4729894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/634fe8b070c4e6faef0234c17e2f12a2?s=128&d=identicon&r=PG&f=1", "display_name": "canoetraveler", "link": "https://stackoverflow.com/users/4729894/canoetraveler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562188276, "creation_date": 1562187936, "question_id": 56877913, "link": "https://stackoverflow.com/questions/56877913/handling-errors-while-iterating-a-csv-file", "title": "Handling errors while iterating a CSV file", "body": "<p>The Python CSV module is set up to iterate over the csv object. This is easy when the data is clean. But becomes complicated if you want to capture an error parsing a bad line in the csv file. Is there a way to try: except: handle the error without falling out of the iterating for loop?</p>\n\n<p>Here is what the documentation says to do:</p>\n\n<pre><code>import csv\nwith open('data.csv', mode='r') as csvfile:\n    reader = csv.DictReader(csvfile)\n    for row in reader:\n        #do stuff\n</code></pre>\n\n<p>However, if the error occurs when parsing the record during \"row in reader\", How can I catch the error without bombing the for loop? </p>\n\n<p>The following will catch the error but kills the loop </p>\n\n<pre><code>import csv\nwith open('data.csv', mode='r') as csvfile:\n    reader = csv.DictReader(csvfile)\n    count = 0\n    try:\n        for row in reader:\n            count += 1\n            #do stuff\n    except:\n        print('had and error on record {:d}'.format(count+1) )\n</code></pre>\n\n<p>This is a problem that comes up often in Python. There must be a \"pythonic\" way to handle errors like this.</p>\n"}, {"tags": ["python", "matlab"], "comments": [{"owner": {"reputation": 43423, "user_id": 1011724, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/2JAXi.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/1011724/dan"}, "edited": false, "score": 0, "creation_date": 1562192946, "post_id": 56877899, "comment_id": 100305796, "body": "How is <code>file_list</code> defined, in both your MATLAB and Python code?\\"}, {"owner": {"reputation": 1, "user_id": 10554098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c995cc0242ccb7782ca28f64bcc5cfb?s=128&d=identicon&r=PG&f=1", "display_name": "srag", "link": "https://stackoverflow.com/users/10554098/srag"}, "reply_to_user": {"reputation": 43423, "user_id": 1011724, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/2JAXi.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/1011724/dan"}, "edited": false, "score": 0, "creation_date": 1562705177, "post_id": 56877899, "comment_id": 100458525, "body": "In Matlab code file_list is directory of csv files whereas in python code file_list is a dataframe"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10554098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c995cc0242ccb7782ca28f64bcc5cfb?s=128&d=identicon&r=PG&f=1", "display_name": "srag", "link": "https://stackoverflow.com/users/10554098/srag"}, "edited": false, "score": 0, "creation_date": 1562190878, "post_id": 56877994, "comment_id": 100305339, "body": "Thanks for answering so fast! however, i&#39;m getting an error which says &quot; &#39;dataframe&#39; has no attribute &#39;rfind&#39; &quot;"}, {"owner": {"reputation": 1038, "user_id": 6779606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07319033471657740d4baed181bb46d9?s=128&d=identicon&r=PG&f=1", "display_name": "PyNoob", "link": "https://stackoverflow.com/users/6779606/pynoob"}, "reply_to_user": {"reputation": 1, "user_id": 10554098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c995cc0242ccb7782ca28f64bcc5cfb?s=128&d=identicon&r=PG&f=1", "display_name": "srag", "link": "https://stackoverflow.com/users/10554098/srag"}, "edited": false, "score": 0, "creation_date": 1562191114, "post_id": 56877994, "comment_id": 100305400, "body": "Oh, is <code>file</code> a DataFrame? Maybe you could add an example of the format of <code>file_list</code> and <code>file</code> to your post."}], "tags": [], "owner": {"reputation": 1038, "user_id": 6779606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07319033471657740d4baed181bb46d9?s=128&d=identicon&r=PG&f=1", "display_name": "PyNoob", "link": "https://stackoverflow.com/users/6779606/pynoob"}, "is_accepted": false, "score": 1, "last_activity_date": 1562188357, "creation_date": 1562188357, "answer_id": 56877994, "question_id": 56877899, "link": "https://stackoverflow.com/questions/56877899/how-can-i-convert-this-matlab-code-to-python/56877994#56877994", "title": "How can I convert this matlab code to python?", "body": "<p>Python starts indexes at zero, unlike MATLAB which starts indexing at 1, so you should keep that in mind. If you want to iterate through a list, you'd usually do <code>for element in list</code>, although you could iterate through indexes as well.</p>\n\n<pre><code>import os\nfor file in file_list:\n    filename = os.path.basename(file)\n</code></pre>\n\n<p>I would recommend looking into a guide for indexing and looping in Python, and then for CSV reading I recommend using <a href=\"https://pandas.pydata.org/\" rel=\"nofollow noreferrer\">Pandas</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 10554098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c995cc0242ccb7782ca28f64bcc5cfb?s=128&d=identicon&r=PG&f=1", "display_name": "srag", "link": "https://stackoverflow.com/users/10554098/srag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "closed_date": 1562231587, "answer_count": 1, "score": -1, "last_activity_date": 1562188357, "creation_date": 1562187844, "question_id": 56877899, "link": "https://stackoverflow.com/questions/56877899/how-can-i-convert-this-matlab-code-to-python", "closed_reason": "Needs more focus", "title": "How can I convert this matlab code to python?", "body": "<p>I have a Matlab code implementing a for loop which I have to convert it to python code:</p>\n\n<pre><code>for i = 1:numel(file_list)\n    filename = file_list(i).name;\n</code></pre>\n\n<p>File_list consists of 207 CSV files having 3036*190 items. this is how the following part of the code looks like:</p>\n\n<pre><code>for i = 1:numel(file_list)\n    filename = file_list(i).name;\n    SS= strcat(filename);\n    ActualRadarData = csvread(SS);\n    RadarData = real(ActualRadarData(:,20:end));\n</code></pre>\n\n<p>and this is what I attempted in doing so which is not correct:</p>\n\n<pre><code>for i in 1:len(file_list):\n     filename = os.path.basename('/path/file_list')\n</code></pre>\n\n<p>This method doesn't work out. how can it be done correctly?</p>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1562188095, "post_id": 56877875, "comment_id": 100304433, "body": "normally images are not part of HTML. They are in separated files .png, .jpg, .gif and HTML has tag <code>&lt;img src=&quot;filename.png&quot;&gt;</code> which inform browser where it should display image from &quot;filename.png&quot;."}, {"owner": {"reputation": 117, "user_id": 9113882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06a74ca296887298d9382cb223d74b9d?s=128&d=identicon&r=PG&f=1", "display_name": "rfguy", "link": "https://stackoverflow.com/users/9113882/rfguy"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1562188430, "post_id": 56877875, "comment_id": 100304541, "body": "revised question."}, {"owner": {"reputation": 400, "user_id": 6480819, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f35e7dfa3a7489c7ffd7a97307872f12?s=128&d=identicon&r=PG&f=1", "display_name": "dannyxn", "link": "https://stackoverflow.com/users/6480819/dannyxn"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1562188643, "post_id": 56877875, "comment_id": 100304639, "body": "You can manually export your plots to png, jpg etc. then append it to HTML doc, as @furas mentioned"}], "answers": [{"tags": [], "owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "is_accepted": true, "score": 1, "last_activity_date": 1562188788, "creation_date": 1562188788, "answer_id": 56878070, "question_id": 56877875, "link": "https://stackoverflow.com/questions/56877875/appending-plots-to-a-html-file-in-matplotlib/56878070#56878070", "title": "Appending plots to a HTML file in matplotlib", "body": "<p>You have to save plot in file image .png and then you can use <code>&lt;img src=\"filename.png\"&gt;</code> in HTML to display this plot in browser</p>\n\n<p>You can use <code>matplotlib</code> and <code>plt.savefig(\"filename.png\")</code> for this.</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport pandas as pd\n\ndf = pandas.read_csv('file.csv')\n\n## plot 1\ndf.plot(x,y)\nplt.savefig('plot1.png')\n\n## plot 2\ndf.plot(x,y)\nplt.savefig('plot2.png')\n</code></pre>\n\n<p>Now you can create HTML file (ie. <code>index.html</code>) with tags <code>&lt;img&gt;</code> which will inform browser where to put plots.</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n\n&lt;html&gt;\n&lt;body&gt;\n\n   Some text\n\n   &lt;img src=\"plot1.png\"&gt;\n\n   Some text\n\n   &lt;img src=\"plot2.png\"&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>So you will have three files: <code>plot1.png</code>, <code>plot2.png</code> and <code>index.html</code></p>\n"}], "owner": {"reputation": 117, "user_id": 9113882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06a74ca296887298d9382cb223d74b9d?s=128&d=identicon&r=PG&f=1", "display_name": "rfguy", "link": "https://stackoverflow.com/users/9113882/rfguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "closed_date": 1562231650, "accepted_answer_id": 56878070, "answer_count": 1, "score": 0, "last_activity_date": 1562188788, "creation_date": 1562187710, "last_edit_date": 1562188420, "question_id": 56877875, "link": "https://stackoverflow.com/questions/56877875/appending-plots-to-a-html-file-in-matplotlib", "closed_reason": "Needs more focus", "title": "Appending plots to a HTML file in matplotlib", "body": "<p>I am creating indiviual plots using df.plot on a dataframe. I can display them indiviually without any issues. I want to create an HTML doc with all plots.  Here is my pseudo code - </p>\n\n<pre><code>df=pandas.read_csv('file.csv')\n\n## plot 1\ndf.plot(x,y)\n\n## plot 2\ndf.plot(x,y)\n</code></pre>\n\n<p>Expected out - 1 HTML file with both plots 1 and 2</p>\n"}, {"tags": ["python", "pandas", "matplotlib"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 5256048, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1194263437257151/picture?type=large", "display_name": "Ant", "link": "https://stackoverflow.com/users/5256048/ant"}, "edited": false, "score": 0, "creation_date": 1562187515, "post_id": 56877774, "comment_id": 100304247, "body": "WORKS. When I applied your answer I put it AFTER the df.plot() line. As stated in the OP, I was getting two graphs trying to use it because I put .ylim before it. In other words, if you vice versa your answer&#39;s lines, that&#39;s what I had. I wonder if such a dumb questions should stay up."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1562191289, "post_id": 56877774, "comment_id": 100305452, "body": "<code>plt.ylim(bottom=0)</code> is the same as <code>plt.ylim(bottom=0, top=None)</code>, which is the same as <code>plt.ylim(0, None)</code> and that is the same as <code>plt.ylim(0)</code>. So the key is not to use kwargs, but rather not to put <code>plt.ylim</code> in front to pandas figure creation."}], "tags": [], "owner": {"reputation": 29479, "user_id": 1356000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ef54c2101a4c23ea2441ce2b346ffb75?s=128&d=identicon&r=PG", "display_name": "Diziet Asahi", "link": "https://stackoverflow.com/users/1356000/diziet-asahi"}, "is_accepted": true, "score": 1, "last_activity_date": 1562187438, "last_edit_date": 1562187438, "creation_date": 1562187125, "answer_id": 56877774, "question_id": 56877719, "link": "https://stackoverflow.com/questions/56877719/how-to-set-the-y-limit-using-plt-rcparams-to-zero-charting-a-pandas-df-and-sav/56877774#56877774", "title": "How to set the y limit using plt.rcParams to zero. (Charting a Pandas df and saving image to disk)", "body": "<p><code>ylim()</code> usually takes <a href=\"https://matplotlib.org/api/_as_gen/matplotlib.pyplot.ylim.html?highlight=ylim#matplotlib.pyplot.ylim\" rel=\"nofollow noreferrer\">2 arguments <code>(bottom, top)</code></a>. However, if you only want to change one of the limits, you have to specify which using <code>top=</code> or <code>bottom=</code></p>\n\n<p>You could simply do:</p>\n\n<pre><code>df.plot(...)\nplt.ylim(bottom=0)\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 5256048, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1194263437257151/picture?type=large", "display_name": "Ant", "link": "https://stackoverflow.com/users/5256048/ant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 56877774, "answer_count": 1, "score": 0, "last_activity_date": 1562187438, "creation_date": 1562186838, "last_edit_date": 1562187366, "question_id": 56877719, "link": "https://stackoverflow.com/questions/56877719/how-to-set-the-y-limit-using-plt-rcparams-to-zero-charting-a-pandas-df-and-sav", "title": "How to set the y limit using plt.rcParams to zero. (Charting a Pandas df and saving image to disk)", "body": "<p>My DataFrame is a time series.\nI'm using...</p>\n\n<pre><code>df.plot()\n</code></pre>\n\n<p>and it basically zooms in on the y axis but I would like the plot to show y values from 0 to my df's max value</p>\n\n<p>I tried...  </p>\n\n<pre><code>plt.ylim(0)\n</code></pre>\n\n<p>But it just plots a blank graph in addition to the graph I don't want.  </p>\n\n<p>I also tried...  </p>\n\n<pre><code>.set_ylim(bottom=0)\n</code></pre>\n\n<p>on the end, and it plots but I can't get python to store this. It turns the plot into x, y coordinates somehow.</p>\n\n<p><a href=\"https://i.stack.imgur.com/5rHFv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5rHFv.png\" alt=\"My current output\"></a></p>\n\n<p>Just to be redundant about it... This y axis stops at 4. I would like it to go to 0 and have the who chart be not zoomed in like that so other graphs can be more easily compared to each other.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1562187665, "post_id": 56877846, "comment_id": 100304292, "body": "argh, I have the same answer, 30 sec late."}, {"owner": {"reputation": 3255, "user_id": 4895877, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FZ0F1.jpg?s=128&g=1", "display_name": "Brendan", "link": "https://stackoverflow.com/users/4895877/brendan"}, "edited": false, "score": 0, "creation_date": 1562187876, "post_id": 56877846, "comment_id": 100304360, "body": "I really like the multi-level column renaming. Much better than what I&#39;ve done in the past."}, {"owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "reply_to_user": {"reputation": 3255, "user_id": 4895877, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FZ0F1.jpg?s=128&g=1", "display_name": "Brendan", "link": "https://stackoverflow.com/users/4895877/brendan"}, "edited": false, "score": 0, "creation_date": 1562188062, "post_id": 56877846, "comment_id": 100304426, "body": "Thanks, f-strings is such a great new feature to python, especially if you can write such a clean piece of code with it in a list comprehension. @BrendanCox"}, {"owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "reply_to_user": {"reputation": 717, "user_id": 11666502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f056cec5dda28937249f50f207ed8c15?s=128&d=identicon&r=PG&f=1", "display_name": "connor449", "link": "https://stackoverflow.com/users/11666502/connor449"}, "edited": false, "score": 0, "creation_date": 1562188857, "post_id": 56877846, "comment_id": 100304740, "body": "Glad I could help, I added some extra piece of code so we can generalize it, you can try it out if you want @connor449 :)"}], "tags": [], "owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "is_accepted": true, "score": 6, "last_activity_date": 1562188612, "last_edit_date": 1562188612, "creation_date": 1562187587, "answer_id": 56877846, "question_id": 56877705, "link": "https://stackoverflow.com/questions/56877705/how-to-create-new-columns-depending-on-row-value-in-pandas/56877846#56877846", "title": "How to create new columns depending on row value in pandas", "body": "<p>First we use <code>pivot_table</code> to pivot our rows to columns. Then we create our desired column names by string concatenating with <code>list_comprehension</code> and <code>f-string</code>:</p>\n\n<pre><code>piv = df.pivot_table(index='time', columns='speaker')\npiv.columns = [f'spk_{col[1]}_{col[0]}' for col in piv.columns]\n\n      spk_1_label_1  spk_2_label_1  spk_1_label_2  spk_2_label_2\ntime                                                            \n0.25             10             10              4              5\n0.50             10             10              6              7\n0.75             10             10              8              9\n1.00             10             10             11             12\n1.25             11             11             13             14\n1.50             11             11             15             16\n1.75             11             11             17             18\n2.00             11             11             19             20\n</code></pre>\n\n<p>If you want to remove the index name:</p>\n\n<pre><code>piv.rename_axis(None, inplace=True)\n\n      spk_1_label_1  spk_2_label_1  spk_1_label_2  spk_2_label_2\n0.25             10             10              4              5\n0.50             10             10              6              7\n0.75             10             10              8              9\n1.00             10             10             11             12\n1.25             11             11             13             14\n1.50             11             11             15             16\n1.75             11             11             17             18\n2.00             11             11             19             20\n</code></pre>\n\n<hr>\n\n<p><strong>Extra</strong></p>\n\n<p>If you want, we can make it more general by using the column name as prefix for your flattened columns:</p>\n\n<pre><code>piv.columns = [f'{piv.columns.names[1]}_{col[1]}_{col[0]}' for col in piv.columns]\n\n      speaker_1_label_1  speaker_2_label_1  speaker_1_label_2  speaker_2_label_2\ntime                                                                            \n0.25                 10                 10                  4                  5\n0.50                 10                 10                  6                  7\n0.75                 10                 10                  8                  9\n1.00                 10                 10                 11                 12\n1.25                 11                 11                 13                 14\n1.50                 11                 11                 15                 16\n1.75                 11                 11                 17                 18\n2.00                 11                 11                 19                 20\n</code></pre>\n\n<hr>\n\n<p><strong>Notice</strong>: if your python version &lt; 3.5, you can't use <code>f-strings</code>, we can use <code>.format</code> for our string formatting:</p>\n\n<pre><code>['spk_{}_{}'.format(col[0], col[1]) for col in piv.columns]\n</code></pre>\n"}], "owner": {"reputation": 717, "user_id": 11666502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f056cec5dda28937249f50f207ed8c15?s=128&d=identicon&r=PG&f=1", "display_name": "connor449", "link": "https://stackoverflow.com/users/11666502/connor449"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 775, "favorite_count": 0, "accepted_answer_id": 56877846, "answer_count": 1, "score": 1, "last_activity_date": 1562259688, "creation_date": 1562186770, "last_edit_date": 1562259688, "question_id": 56877705, "link": "https://stackoverflow.com/questions/56877705/how-to-create-new-columns-depending-on-row-value-in-pandas", "title": "How to create new columns depending on row value in pandas", "body": "<p>I have a dataframe that looks like this:</p>\n\n<pre><code>    time  speaker  label_1  label_2\n0   0.25        1       10        4\n1   0.25        2       10        5\n2   0.50        1       10        6\n3   0.50        2       10        7\n4   0.75        1       10        8\n5   0.75        2       10        9\n6   1.00        1       10       11\n7   1.00        2       10       12\n8   1.25        1       11       13\n9   1.25        2       11       14\n10  1.50        1       11       15\n11  1.50        2       11       16\n12  1.75        1       11       17\n13  1.75        2       11       18\n14  2.00        1       11       19\n15  2.00        2       11       20\n</code></pre>\n\n<p>The 'speaker' column yields 1 and 2 to delineate 2 speakers at a given timestamp. I want to make new columns from the 'label_1' and 'label_2' data that are associated with only one speaker. See below for desired output.</p>\n\n<pre><code> time  spk_1_label_1  spk_2_label1  spk_1_label_2  spk_2_label_2\n   0.25        10         10             4               5\n   0.50        10         10             6               7\n   0.75        10         10             8               9\n   1.00        10         10            11               12    \n   1.25        11         11            13               14\n   1.50        11         11            15               16\n   1.75        11         11            17               18\n   2.00        11         11            19               20\n\n</code></pre>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "edited": false, "score": 3, "creation_date": 1562187345, "post_id": 56877666, "comment_id": 100304172, "body": "What is your desired output?"}, {"owner": {"reputation": 450, "user_id": 4582374, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/gvWsm.jpg?s=128&g=1", "display_name": "w33b", "link": "https://stackoverflow.com/users/4582374/w33b"}, "edited": false, "score": 0, "creation_date": 1562187656, "post_id": 56877666, "comment_id": 100304290, "body": "what should the expected output look like for the given raw data?"}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1562190095, "post_id": 56877666, "comment_id": 100305115, "body": "deleted my answer. It looks like you&#39;re listing what not to do, but not giving us any indication of what you do want. (That last line is what I think would be correct.)"}, {"owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "edited": false, "score": 0, "creation_date": 1562190942, "post_id": 56877666, "comment_id": 100305357, "body": "Do you want string keys or tuple keys?"}, {"owner": {"reputation": 378, "user_id": 1472770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8e4587a9f073c0c17d2f5c7a1217d5?s=128&d=identicon&r=PG", "display_name": "alancalvitti", "link": "https://stackoverflow.com/users/1472770/alancalvitti"}, "reply_to_user": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "edited": false, "score": 0, "creation_date": 1562191349, "post_id": 56877666, "comment_id": 100305469, "body": "@Ajax1234, flatten across levels, but preserve the type of input keys, in this case: <code>{&#39;abc&#39;: 123, ((&#39;hgf&#39;, 1), &#39;gh&#39;): 432, ((&#39;hgf&#39;, 1), &#39;yu&#39;): 433, &#39;gfd&#39;: 902, (&#39;xzxzxz&#39;, &#39;432&#39;, &#39;0b0b0b&#39;): 231, (&#39;xzxzxz&#39;, &#39;43234&#39;): 1321}</code>"}, {"owner": {"reputation": 378, "user_id": 1472770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8e4587a9f073c0c17d2f5c7a1217d5?s=128&d=identicon&r=PG", "display_name": "alancalvitti", "link": "https://stackoverflow.com/users/1472770/alancalvitti"}, "reply_to_user": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "edited": false, "score": 0, "creation_date": 1562191402, "post_id": 56877666, "comment_id": 100305486, "body": "@Jab, any combination of (hashable) key types."}, {"owner": {"reputation": 3457, "user_id": 2284490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba571b7d2f77a33c9b92af6c767677bb?s=128&d=identicon&r=PG", "display_name": "Cireo", "link": "https://stackoverflow.com/users/2284490/cireo"}, "edited": false, "score": 1, "creation_date": 1562193585, "post_id": 56877666, "comment_id": 100305942, "body": "@alancalvitti one problem (the consequence can be seen in Daniel&#39;s nice answer below) is that your desired output is &quot;weird and unsafe&quot;.  It is inconsistent in not taking the top-level and converting it to a tuple, which can lead to all sorts of other corner cases."}, {"owner": {"reputation": 378, "user_id": 1472770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8e4587a9f073c0c17d2f5c7a1217d5?s=128&d=identicon&r=PG", "display_name": "alancalvitti", "link": "https://stackoverflow.com/users/1472770/alancalvitti"}, "reply_to_user": {"reputation": 3457, "user_id": 2284490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba571b7d2f77a33c9b92af6c767677bb?s=128&d=identicon&r=PG", "display_name": "Cireo", "link": "https://stackoverflow.com/users/2284490/cireo"}, "edited": false, "score": 0, "creation_date": 1562202359, "post_id": 56877666, "comment_id": 100307463, "body": "@Cireo, can you give an example? I use this flatten operation routinely in another language with no problems for years (again modulo the JSON export issue hinted in my Q). The typical application is to generate flat tables/dataframes from hierarchical data."}, {"owner": {"reputation": 3457, "user_id": 2284490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba571b7d2f77a33c9b92af6c767677bb?s=128&d=identicon&r=PG", "display_name": "Cireo", "link": "https://stackoverflow.com/users/2284490/cireo"}, "edited": false, "score": 0, "creation_date": 1562220404, "post_id": 56877666, "comment_id": 100310978, "body": "Sure: how about <code>{(1,2): 3, 1: {2: 4}}</code>?  What output is desired?"}, {"owner": {"reputation": 378, "user_id": 1472770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8e4587a9f073c0c17d2f5c7a1217d5?s=128&d=identicon&r=PG", "display_name": "alancalvitti", "link": "https://stackoverflow.com/users/1472770/alancalvitti"}, "reply_to_user": {"reputation": 3457, "user_id": 2284490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba571b7d2f77a33c9b92af6c767677bb?s=128&d=identicon&r=PG", "display_name": "Cireo", "link": "https://stackoverflow.com/users/2284490/cireo"}, "edited": false, "score": 0, "creation_date": 1562341065, "post_id": 56877666, "comment_id": 100356491, "body": "@Cireo, the key-clash issue is inherent the base case using only strings as pointed out by ninjagecko <code>{&#39;a_b&#39;:{&#39;c&#39;:1}, &#39;a&#39;:{&#39;b_c&#39;:2}}</code>. I think the obvious solution is for each key path to be a be tuple even in for len 1. In your example output should be <code>{((1,2),): 3, (1,2):4}}</code>. Will edit question."}], "answers": [{"comments": [{"owner": {"reputation": 378, "user_id": 1472770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8e4587a9f073c0c17d2f5c7a1217d5?s=128&d=identicon&r=PG", "display_name": "alancalvitti", "link": "https://stackoverflow.com/users/1472770/alancalvitti"}, "edited": false, "score": 0, "creation_date": 1562593390, "post_id": 56878609, "comment_id": 100412761, "body": "I like this approach using generator, but can you modify to handle the updated Q, ie, in the case of <code>{(1,2): 3, 1: {2: 4}}, should output </code>{((1,2),): 3, (1,2):4}}` as per comment thread with Cireo. Your method outputs {(1, 2): 4}. In other words, key-paths of length 1 should be wrapped in a tuple to disambiguate."}, {"owner": {"reputation": 378, "user_id": 1472770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8e4587a9f073c0c17d2f5c7a1217d5?s=128&d=identicon&r=PG", "display_name": "alancalvitti", "link": "https://stackoverflow.com/users/1472770/alancalvitti"}, "edited": false, "score": 0, "creation_date": 1562596234, "post_id": 56878609, "comment_id": 100414501, "body": "I think the mod is as simple as: <code>entry_key = new_key if current_key else (key,)</code>"}, {"owner": {"reputation": 378, "user_id": 1472770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8e4587a9f073c0c17d2f5c7a1217d5?s=128&d=identicon&r=PG", "display_name": "alancalvitti", "link": "https://stackoverflow.com/users/1472770/alancalvitti"}, "edited": false, "score": 0, "creation_date": 1562596493, "post_id": 56878609, "comment_id": 100414650, "body": "Thanks, - just saw your update - that&#39;s even nicer."}], "tags": [], "owner": {"reputation": 4281, "user_id": 1491850, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fd1125371f70fe174275e950d64885b7?s=128&d=identicon&r=PG", "display_name": "Daniel Perez", "link": "https://stackoverflow.com/users/1491850/daniel-perez"}, "is_accepted": false, "score": 1, "last_activity_date": 1562595427, "last_edit_date": 1562595427, "creation_date": 1562192550, "answer_id": 56878609, "question_id": 56877666, "link": "https://stackoverflow.com/questions/56877666/flatten-nested-dictionaries-with-tuple-keys/56878609#56878609", "title": "Flatten nested dictionaries with tuple keys", "body": "<p>Assuming you want the following input/output</p>\n\n<pre><code># input\n{'abc': 123,\n ('hgf', 1): {'gh': 432, 'yu': 433},\n 'gfd': 902,\n 'xzxzxz': {'432': {'0b0b0b': 231}, '43234': 1321}}\n\n# output\n{('abc',): 123,\n (('hgf', 1), 'gh'): 432,\n (('hgf', 1), 'yu'): 433,\n ('gfd',): 902,\n ('xzxzxz', '432', '0b0b0b'): 231,\n ('xzxzxz', '43234'): 1321}\n\n</code></pre>\n\n<p>One approach is to recurse on your dictionary until you find a non-dictionary value and pass down the current key as a tuple during the recursion.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def flatten_dict(deep_dict): \n    def do_flatten(deep_dict, current_key): \n        for key, value in deep_dict.items():\n            # the key will be a flattened tuple\n            # but the type of `key` is not touched\n            new_key = current_key + (key,)\n            # if we have a dict, we recurse\n            if isinstance(value, dict): \n                yield from do_flatten(value, new_key) \n            else:\n                yield (new_key, value) \n    return dict(do_flatten(deep_dict, ()))\n</code></pre>\n"}], "owner": {"reputation": 378, "user_id": 1472770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8e4587a9f073c0c17d2f5c7a1217d5?s=128&d=identicon&r=PG", "display_name": "alancalvitti", "link": "https://stackoverflow.com/users/1472770/alancalvitti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1562595427, "creation_date": 1562186553, "last_edit_date": 1562341360, "question_id": 56877666, "link": "https://stackoverflow.com/questions/56877666/flatten-nested-dictionaries-with-tuple-keys", "title": "Flatten nested dictionaries with tuple keys", "body": "<p>How to generalize this <a href=\"https://stackoverflow.com/questions/6027558/flatten-nested-dictionaries-compressing-keys\">question</a> to the case keys that may be tuples? </p>\n\n<p>As a benefit even in the case of all string keys, if these are accumulated to a tuple, there's no need for ad-hoc separators (though JSON export is another matter):</p>\n\n<p>one approach is to base it on this <a href=\"https://stackoverflow.com/a/19647596/1472770\">answer</a>. I tried 2 versions:</p>\n\n<pre><code>def flatten_keys(d,handler,prefix=[]):\n    return {handler(prefix,k) if prefix else k : v\n        for kk, vv in d.items()\n        for k, v in flatten_keys(vv, handler, kk).items()\n        } if isinstance(d, dict) else { prefix : d }\n</code></pre>\n\n<p>where the tuple handlers are:</p>\n\n<pre><code>def tuple_handler_1(prefix,k):\n    return tuple([prefix]+[k])\n\ndef tuple_handler_2(prefix,k):\n    return tuple(flatten_container((prefix,k)))\n</code></pre>\n\n<p>Using the utility generator:</p>\n\n<pre><code>def flatten_container(container):\n    for i in container:\n        if isinstance(i, (list,tuple)):\n            for j in flatten_container(i):\n                yield j\n        else:\n            yield i\n</code></pre>\n\n<p>Consider one of the test dict's but using a tuple key <code>('hgf',1)</code>:</p>\n\n<pre><code>data =  {'abc':123, ('hgf',1):{'gh':432, 'yu':433}, 'gfd':902, 'xzxzxz':{\"432\":{'0b0b0b':231}, \"43234\":1321}}\n</code></pre>\n\n<p>Neither works as intended: </p>\n\n<pre><code>flatten_keys(data,tuple_handler_1)\n</code></pre>\n\n<blockquote>\n  <p>{'abc': 123,  (('hgf', 1), 'gh'): 432,  (('hgf', 1), 'yu'): 433, \n  'gfd': 902,  ('xzxzxz', ('432', '0b0b0b')): 231,  ('xzxzxz', '43234'):\n  1321}</p>\n</blockquote>\n\n<p><code>('xzxzxz', ('432', '0b0b0b'))</code>. is not flattened</p>\n\n<p>And the 2nd flattens the input tuple key</p>\n\n<pre><code>flatten_keys(data,tuple_handler_2)\n</code></pre>\n\n<blockquote>\n  <p>{'abc': 123,  ('hgf', 1, 'gh'): 432,  ('hgf', 1, 'yu'): 433,  'gfd':\n  902,  ('xzxzxz', '432', '0b0b0b'): 231,  ('xzxzxz', '43234'): 1321}</p>\n</blockquote>\n\n<p>Is there an obvious modification of the flatten method that will correctly join strings and other hashables?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>As per comments below, a problem handling key-clash with this method is inherent the base case of strings keys, eg <code>{'a_b':{'c':1}, 'a':{'b_c':2}}</code>. </p>\n\n<p>Thus each key path should be a be tuple even in for <code>len</code> 1 key paths to avoid key clash eg  <code>{((1,2),): 3, (1,2):4}}</code>. </p>\n"}, {"tags": ["python", "tensorflow"], "answers": [{"tags": [], "owner": {"reputation": 354, "user_id": 7971276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e85c6cab20d4c1614300cc407cee18b?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/7971276/michael"}, "is_accepted": false, "score": 0, "last_activity_date": 1562186941, "creation_date": 1562186941, "answer_id": 56877743, "question_id": 56877662, "link": "https://stackoverflow.com/questions/56877662/tensorflow-code-copied-straight-from-popular-book-does-not-converge/56877743#56877743", "title": "Tensorflow code copied straight from (popular) book does not converge:", "body": "<p>You're probably using the wrong version of Tensorflow, or have not correctly installed its dependencies. <code>NaN</code> is probably the result of these issues. Double check the version the book uses and <code>pip install tensorflow==&lt;version&gt;</code>, replacing <code>&lt;version&gt;</code> with the version the book uses. </p>\n\n<p>You can see the version you're running by running <code>pip list | grep tensorflow</code>.</p>\n\n<p>For a more specific answer, could you show more of the errors you're seeing in the console? The code looks fine to me.</p>\n"}], "owner": {"reputation": 1, "user_id": 11736421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f321671e78800f207cac4ac9354ae051?s=128&d=identicon&r=PG&f=1", "display_name": "NameSake", "link": "https://stackoverflow.com/users/11736421/namesake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562192329, "creation_date": 1562186544, "last_edit_date": 1562192329, "question_id": 56877662, "link": "https://stackoverflow.com/questions/56877662/tensorflow-code-copied-straight-from-popular-book-does-not-converge", "title": "Tensorflow code copied straight from (popular) book does not converge:", "body": "<p>The below code is copied straight from the book \"Hands-on Machine Learning with Scikit learn and Tensorflow\" on page 237. </p>\n\n<pre><code>n_epochs = 10000\nlearning_rate = 0.01\nX = tf.constant(housing_data_plus_bias, dtype=tf.float32, name=\"X\")\ny = tf.constant(housing.target.reshape(-1, 1), dtype=tf.float32, name=\"y\")\ntheta = tf.Variable(tf.random_uniform([n + 1, 1], -1.0, 1.0), name=\"theta\")\ny_pred = tf.matmul(X, theta, name=\"predictions\")\nerror = y_pred - y\nmse = tf.reduce_mean(tf.square(error), name=\"mse\")\ngradients = 2/m * tf.matmul(tf.transpose(X), error)\ntraining_op = tf.assign(theta, theta - learning_rate * gradients)\ninit = tf.global_variables_initializer()\nwith tf.Session() as sess:\n    sess.run(init)\n    for epoch in range(n_epochs):\n        if epoch % 100 == 0:\n            print(\"Epoch\", epoch, \"MSE =\", mse.eval())\n        sess.run(training_op)\n    best_theta = theta.eval()\n</code></pre>\n\n<p>Here, the data housing_data_plus_bias is a normalized data-set, the same one used by the book but I normalized it myself using the following code.</p>\n\n<pre><code>housing = fetch_california_housing()\nm, n = housing.data.shape\nhousing_data_plus_bias = np.c_[np.ones((m, 1)), housing.data]\n\nmeans = []\nvars = []\nfor col in range(n):\n    means.append(np.mean(housing_data_plus_bias[:, col]))\n    vars.append(np.std(housing_data_plus_bias[:, col]))\n\n\nfor row in range(m):\n    for col in range(n):\n        if col == 0:\n            continue\n        housing_data_plus_bias[row, col] = (housing_data_plus_bias[row, col] - means[col])/vars[col]\n</code></pre>\n\n<p>But the code does NOT converge, see output below. It produces NANs instead. Why would the book say it works when it doesn't?</p>\n\n<p>Is it perhaps because of the following output I get in the console, which showcases a number of errors?</p>\n\n<p>output:</p>\n\n<p><img src=\"https://i.stack.imgur.com/mpqPj.png\" alt=\"output\"></p>\n\n<p>Finally, you can see the page from the actual book HERE and verify that I have copied it exactly:\n<a href=\"https://i.stack.imgur.com/tOJJ3.png\" rel=\"nofollow noreferrer\">book image</a></p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 3021, "user_id": 11606193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXr7w.jpg?s=128&g=1", "display_name": "Deepstop", "link": "https://stackoverflow.com/users/11606193/deepstop"}, "edited": false, "score": 0, "creation_date": 1562186742, "post_id": 56877657, "comment_id": 100303940, "body": "What does the program do instead of giving you the result you want?"}, {"owner": {"reputation": 3021, "user_id": 11606193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXr7w.jpg?s=128&g=1", "display_name": "Deepstop", "link": "https://stackoverflow.com/users/11606193/deepstop"}, "edited": false, "score": 0, "creation_date": 1562187277, "post_id": 56877657, "comment_id": 100304141, "body": "Also I submitted an edit to show the proper indentation, although as I can&#39;t get the program to do much I&#39;m not sure if I got it right. Please fix if and when the edit is approved."}, {"owner": {"reputation": 1, "user_id": 11481482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a7d75fbc1cf94fcd92a45d35cc6ad7b?s=128&d=identicon&r=PG&f=1", "display_name": "Billy", "link": "https://stackoverflow.com/users/11481482/billy"}, "reply_to_user": {"reputation": 3021, "user_id": 11606193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXr7w.jpg?s=128&g=1", "display_name": "Deepstop", "link": "https://stackoverflow.com/users/11606193/deepstop"}, "edited": false, "score": 0, "creation_date": 1562329270, "post_id": 56877657, "comment_id": 100350588, "body": "while looping giving a = 3.0  b = 3.0  c = 3.0 only taking last line value 3.0 for all variable values. Tomerikoo&#39;s answer helped me get it working."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11481482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a7d75fbc1cf94fcd92a45d35cc6ad7b?s=128&d=identicon&r=PG&f=1", "display_name": "Billy", "link": "https://stackoverflow.com/users/11481482/billy"}, "edited": false, "score": 0, "creation_date": 1562328656, "post_id": 56878137, "comment_id": 100350275, "body": "Thanks Tomerikoo for your quick reply. I have to got your modified version of my program working, but without the &quot;:&quot; colons in the square brackets. I could not get your generic code to work. I also got a regular expression program from Dr Codie! on youtube <a href=\"https://www.youtube.com/watch?v=T1M4eCGKEJs&amp;lc=z23xtzsqpkuvgxkndacdp43bogscpxv2wl4tbisj1tlw03c010c\" rel=\"nofollow noreferrer\">youtube.com/&hellip;</a> ."}, {"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "reply_to_user": {"reputation": 1, "user_id": 11481482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a7d75fbc1cf94fcd92a45d35cc6ad7b?s=128&d=identicon&r=PG&f=1", "display_name": "Billy", "link": "https://stackoverflow.com/users/11481482/billy"}, "edited": false, "score": 0, "creation_date": 1562343364, "post_id": 56878137, "comment_id": 100357434, "body": "Hi @Billy, wihtout the <code>:</code> in the square brackets your program only takes the first digit. If you will try to run it with <code>a = 10.0</code> or <code>a = 4.5</code> it will not work. I changed my code and now it should be ok"}, {"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "reply_to_user": {"reputation": 1, "user_id": 11481482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a7d75fbc1cf94fcd92a45d35cc6ad7b?s=128&d=identicon&r=PG&f=1", "display_name": "Billy", "link": "https://stackoverflow.com/users/11481482/billy"}, "edited": false, "score": 0, "creation_date": 1562343522, "post_id": 56878137, "comment_id": 100357498, "body": "@Billy and to your first comment: on such simple case I wouldn&#39;t bother with regular expressions. Although they are neat, in this case is simply not necessary"}, {"owner": {"reputation": 1, "user_id": 11481482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a7d75fbc1cf94fcd92a45d35cc6ad7b?s=128&d=identicon&r=PG&f=1", "display_name": "Billy", "link": "https://stackoverflow.com/users/11481482/billy"}, "edited": false, "score": 0, "creation_date": 1599067327, "post_id": 56878137, "comment_id": 112661443, "body": "Hi Tomerikoo, got another regular expression program that does the job. Here it is,"}, {"owner": {"reputation": 1, "user_id": 11481482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a7d75fbc1cf94fcd92a45d35cc6ad7b?s=128&d=identicon&r=PG&f=1", "display_name": "Billy", "link": "https://stackoverflow.com/users/11481482/billy"}, "edited": false, "score": 0, "creation_date": 1599225901, "post_id": 56878137, "comment_id": 112716822, "body": "Hi Tomerikoo, could not get your generic code to work."}, {"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "reply_to_user": {"reputation": 1, "user_id": 11481482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a7d75fbc1cf94fcd92a45d35cc6ad7b?s=128&d=identicon&r=PG&f=1", "display_name": "Billy", "link": "https://stackoverflow.com/users/11481482/billy"}, "edited": false, "score": 0, "creation_date": 1599227858, "post_id": 56878137, "comment_id": 112717847, "body": "@Billy there was a problem with indentation. Maybe that solved your problem. If not, try to be more specific. I also changed the list to be a dict for even more generality"}, {"owner": {"reputation": 1, "user_id": 11481482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a7d75fbc1cf94fcd92a45d35cc6ad7b?s=128&d=identicon&r=PG&f=1", "display_name": "Billy", "link": "https://stackoverflow.com/users/11481482/billy"}, "edited": false, "score": 0, "creation_date": 1599236121, "post_id": 56878137, "comment_id": 112721934, "body": "Hi Tomerikoo, only prints to screen a value with following error message, line 9, in &lt;module&gt;     print(&quot;b = &quot;, values[1]) IndexError: list index out of range"}, {"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "reply_to_user": {"reputation": 1, "user_id": 11481482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a7d75fbc1cf94fcd92a45d35cc6ad7b?s=128&d=identicon&r=PG&f=1", "display_name": "Billy", "link": "https://stackoverflow.com/users/11481482/billy"}, "edited": false, "score": 0, "creation_date": 1599485193, "post_id": 56878137, "comment_id": 112781253, "body": "@Billy you&#39;re welcome. Please see <a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}, {"owner": {"reputation": 1, "user_id": 11481482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a7d75fbc1cf94fcd92a45d35cc6ad7b?s=128&d=identicon&r=PG&f=1", "display_name": "Billy", "link": "https://stackoverflow.com/users/11481482/billy"}, "edited": false, "score": 0, "creation_date": 1602955642, "post_id": 56878137, "comment_id": 113885720, "body": "Hi Tomerikoo, can you tell me how to do what I need to do when someone answers my question, as I could not find a way of responding on the website."}, {"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "reply_to_user": {"reputation": 1, "user_id": 11481482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a7d75fbc1cf94fcd92a45d35cc6ad7b?s=128&d=identicon&r=PG&f=1", "display_name": "Billy", "link": "https://stackoverflow.com/users/11481482/billy"}, "edited": false, "score": 0, "creation_date": 1603004222, "post_id": 56878137, "comment_id": 113894665, "body": "My above comment has a link where you can have all the information. You can vote on questions using the arrows to the side of each question and accepting the best answer by clicking the grey check mark under the arrows"}], "tags": [], "owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "is_accepted": false, "score": 0, "last_activity_date": 1599228646, "last_edit_date": 1599228646, "creation_date": 1562189212, "answer_id": 56878137, "question_id": 56877657, "link": "https://stackoverflow.com/questions/56877657/read-in-text-file-decimal-number-values-and-assign-them-to-variables/56878137#56878137", "title": "Read in text file decimal number values and assign them to variables", "body": "<p>First of all you never change <code>line</code> inside the <code>while</code> loops so basically already the first will get you to an infinite loop.</p>\n<p>Second, you only take the 4th character of each line, so your code works for that specific example. If you would try <code>b = 2.5</code> it will fail. If the <code>=</code> sign would be padded with more spaces it will fail as well.</p>\n<p>I guess that you were trying to go with something like:</p>\n<pre class=\"lang-py prettyprint-override\"><code>with open(&quot;Inputpydata.txt&quot;, &quot;r&quot;) as fo:\n    line = fo.readline().strip()\n    print(line)\n    avalue = line[4:]\n\n    line = fo.readline().strip()\n    print(line)\n    bvalue = line[4:]\n\n    line = fo.readline().strip()  \n    print(line)\n    cvalue = line[4:]\n\n    a = float(avalue)\n    b = float(bvalue)\n    c = float(cvalue)\n\n    sum = a + b + c\n\n    print(&quot;a = &quot;, a)\n    print(&quot;b = &quot;, b)\n    print(&quot;c = &quot;, c)\n    print(&quot;sum = &quot;, sum)\n</code></pre>\n<p>But you could make it a little bit more generic to support any amount of values and ignore whitespaces:</p>\n<pre class=\"lang-py prettyprint-override\"><code>with open(&quot;Inputpydata.txt&quot;, &quot;r&quot;) as fo:\n    variables = {}\n    for line in fo:\n        line_split = line.split(&quot;=&quot;)\n        name = line_split[0].strip()\n        value = float(line_split[1].strip())\n        variables[name] = value\n\n    print(&quot;a = &quot;, variables['a'])\n    print(&quot;b = &quot;, variables['b'])\n    print(&quot;c = &quot;, variables['c'])\n    print(&quot;sum = &quot;, sum(variables.values()))\n</code></pre>\n<p>Of course this assumes all varaibles were in the file. If one was missing this will throw an error. You can also make the final printing more generic by doing:</p>\n<pre class=\"lang-py prettyprint-override\"><code>total = 0\nfor key, value in variables.items():\n    total += value\n    print(key, '=', value)\nprint(&quot;sum = &quot;, total)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 11481482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a7d75fbc1cf94fcd92a45d35cc6ad7b?s=128&d=identicon&r=PG&f=1", "display_name": "Billy", "link": "https://stackoverflow.com/users/11481482/billy"}, "edited": false, "score": 0, "creation_date": 1599240050, "post_id": 63742861, "comment_id": 112723601, "body": "Thanks for suggestion Utpal."}], "tags": [], "owner": {"reputation": 787, "user_id": 8518720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cdd5a014b25e7f4e0ec0e3255a2ab71?s=128&d=identicon&r=PG", "display_name": "Utpal Kumar", "link": "https://stackoverflow.com/users/8518720/utpal-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1599228813, "creation_date": 1599228813, "answer_id": 63742861, "question_id": 56877657, "link": "https://stackoverflow.com/questions/56877657/read-in-text-file-decimal-number-values-and-assign-them-to-variables/63742861#63742861", "title": "Read in text file decimal number values and assign them to variables", "body": "<p>You can perform this task easily if you opt to use <code>pandas</code>:</p>\n<pre><code>import pandas as pd\n\ndf = pd.read_csv(&quot;Inputpydata.txt&quot;,header=None,names=['variables','values'], sep=&quot;=&quot;)\nd = df['values'].sum()\nprint(d, type(d))\n</code></pre>\n<p>OUTPUT-&gt;</p>\n<pre><code>6.0 &lt;class 'numpy.float64'&gt;\n</code></pre>\n<p>where <code>Inputpydata.txt</code> file contains:</p>\n<pre><code>a = 1.0\nb = 2.0\nc = 3.0\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11481482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a7d75fbc1cf94fcd92a45d35cc6ad7b?s=128&d=identicon&r=PG&f=1", "display_name": "Billy", "link": "https://stackoverflow.com/users/11481482/billy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1599228813, "creation_date": 1562186529, "last_edit_date": 1599228014, "question_id": 56877657, "link": "https://stackoverflow.com/questions/56877657/read-in-text-file-decimal-number-values-and-assign-them-to-variables", "title": "Read in text file decimal number values and assign them to variables", "body": "<p>I can't get this program to assign decimal numbers in a text file to variables.</p>\n<pre><code>with open(&quot;Inputpydata.txt&quot;, &quot;r&quot;) as fo:\n    line = fo.readline()\n    while line:\n        print(line.strip())\n        avalue = line[4]\n    line = fo.readline()\n    while line:\n        print(line.strip())\n        bvalue = line[4]\n    line = fo.readline()\n    while line:\n        print(line.strip())\n        cvalue = line[4]\n    line = fo.readline()\n\n    a = float(avalue)\n    b = float(bvalue)\n    c = float(cvalue)\n\n    sum = a + b + c\n\n    print(&quot;a = &quot;, a)\n    print(&quot;b = &quot;, b)\n    print(&quot;c = &quot;, c)\n    print(&quot;sum = &quot;, sum)\n</code></pre>\n<p>The input text file has 3 separate lines with <code>a = 1.0</code>,  <code>b = 2.0</code>, and <code>c = 3.0</code>. The <code>sum</code> value should be 6.0.</p>\n<p>Modified working version:</p>\n<pre><code>with open(&quot;Inputpydata.txt&quot;, &quot;r&quot;) as fo:\n    line = fo.readline()\n    avalue = line[4]\n    line = fo.readline()\n    bvalue = line[4]\n    line = fo.readline()\n    cvalue = line[4]\n\n    a = float(avalue)\n    b = float(bvalue)\n    c = float(cvalue)\n\n    d = a + b + c\n\n    print(&quot;a =&quot;, a)\n    print(&quot;b =&quot;, b)\n    print(&quot;c =&quot;, c)\n    print()\n    print(&quot;d =&quot;, d)\n\nwith open(&quot;Outputpydata.txt&quot;, &quot;w&quot;) as fo:\n    fo.write(&quot;a = &quot; + str(a) + &quot;\\n&quot;)\n    fo.write(&quot;b = &quot; + str(b) + &quot;\\n&quot;)\n    fo.write(&quot;c = &quot; + str(c) + &quot;\\n&quot;)\n    fo.write(&quot;\\n&quot;)\n    fo.write(&quot;d = &quot; + str(d))\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "oop", "scope", "global"], "comments": [{"owner": {"reputation": 692, "user_id": 9717092, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ztp0D.jpg?s=128&g=1", "display_name": "Ghassen", "link": "https://stackoverflow.com/users/9717092/ghassen"}, "edited": false, "score": 0, "creation_date": 1562186574, "post_id": 56877642, "comment_id": 100303873, "body": "you can declare it like this : global n"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1562186628, "post_id": 56877642, "comment_id": 100303893, "body": "Next time you have a question, please reduce the code to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> <b>in text form</b>, too."}, {"owner": {"reputation": 301, "user_id": 10473278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/539d671ff546055b6b0da54a3c3d6ade?s=128&d=identicon&r=PG&f=1", "display_name": "Ant&#243;nio Gon&#231;alves", "link": "https://stackoverflow.com/users/10473278/ant%c3%b3nio-gon%c3%a7alves"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1562186727, "post_id": 56877642, "comment_id": 100303933, "body": "@jonrsharpe I know it&#39;s a lot, but it&#39;s hard to ask this question with little code, because it envolves a lot of methods and multiple classes."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1562186794, "post_id": 56877642, "comment_id": 100303957, "body": "No it doesn&#39;t; you&#39;re asking about <code>global</code>, which just needs a top-level variable and one place where you try to assign to it. <i>Your specific program</i> has a lot of other code, but that&#39;s not actually relevant."}, {"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1562187357, "post_id": 56877642, "comment_id": 100304177, "body": "I&#39;d just point out that I&#39;m not sure a global is actually an appropirate thing to use in this kind of code. When you&#39;re using classes, you usually should be interacting with instance variables, not globals. I don&#39;t actually understand your code well enough to fully assess it, but I&#39;d guess that both <code>blockchains</code> and <code>n</code> should be instance variables that you initialize in <code>__init__</code> and access via <code>self.n</code> etc."}], "owner": {"reputation": 301, "user_id": 10473278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/539d671ff546055b6b0da54a3c3d6ade?s=128&d=identicon&r=PG&f=1", "display_name": "Ant&#243;nio Gon&#231;alves", "link": "https://stackoverflow.com/users/10473278/ant%c3%b3nio-gon%c3%a7alves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "closed_date": 1562186542, "answer_count": 0, "score": 0, "last_activity_date": 1562186425, "creation_date": 1562186425, "question_id": 56877642, "link": "https://stackoverflow.com/questions/56877642/why-do-i-have-do-global-a-variable-thats-already-global", "closed_reason": "Duplicate", "title": "Why do I have do &quot;global&quot; a variable that&#39;s already global?", "body": "<p>I'm building a simplified Blockchain app.<br>\nI built my own iterator, and it works.  </p>\n\n<p>Here is my code:</p>\n\n<pre><code># ---------- DEPENDENCIES AND OTHERS ----------\nimport datetime\nblockchains = []\nn = 0\n\n# ---------- BLOCK CLASS ----------\nclass Block:\n    def __init__(self, sender, money, receiver, previous_block=None):\n        self.time = datetime.datetime.now()\n        self.sender = sender\n        self.money = money\n        self.receiver = receiver\n        self.previous_block = previous_block\n\n    def __repr__(self):\n        return f\"\"\"&gt; NEW BLOCK:\nTime: {self.time}\nSender: {self.sender}\nMoney: {self.money}\nReceiver: {self.receiver}\n\"\"\"\n\n\n# ----------BLOCKCHAIN CLASS ----------\nclass Blockchain:\n    def __init__(self):\n        # Set \"Tail Block\" default as none. This will help identify if Blockchain is empty or not.\n        self.tail_block = None\n        # Check if there are any existing blockchains\n        if not blockchains:\n            self.name = input(\"Insert New Blockchain Name: \")\n            blockchains.append(self)\n        else:\n            # Cycle to ensure new Blockchain has a unique name.\n            valid_name = False\n            while not valid_name:\n                name = input(\"Insert New Blockchain Name: \")\n                print()\n                if any(blockchain.name == name for blockchain in blockchains):\n                    print(\"Name already in use.\\n\")\n                else:\n                    valid_name = True\n                    self.name = name\n                    blockchains.append(self)\n\n    def __iter__(self):\n        return self\n\n    def __next__(self):\n        # If Blockchain is empty:\n        if not self.tail_block:\n            raise StopIteration\n        # If Blockchain is not empty:\n        else:\n            \"\"\" 'n' counts what iteration of \"__next__()\" the program is in.\n                Or in other words, how many times the \"__next__()\" function has been run.\"\"\"\n            global n\n            n += 1\n            # If it's the first \"__next__()\" iteration:\n            if n == 1:\n                return self.tail_block\n            # If it's after the first \"__next__()\" iteration:\n            else:\n                current_block = self.tail_block\n                for i in range(n-1):\n                    current_block = current_block.previous_block\n                if not current_block:\n                    raise StopIteration\n                else:\n                    return current_block\n\n    def __repr__(self):\n        return f\"{self.name}\"\n\n    def add_block(self, new_block_sender, new_block_money, new_block_receiver):\n        # Check to see if Blockchain is empty\n        if not self.tail_block:\n            new_block = Block(new_block_sender, new_block_money, new_block_receiver)\n        # If it's not empty, the new block's \"previous block\" will be the existing \"tail block\"\n        else:\n            new_block = Block(new_block_sender, new_block_money, new_block_receiver, self.tail_block)\n        # Update \"Tail Block\" to the newly created block\n        self.tail_block = new_block\n\n    def view(self):\n        if not self.tail_block:\n            print(\"There are no Blocks in this Blockchain.\\n\")\n        else:\n            current_block = self.tail_block\n            while True:\n                print(current_block)\n                if not current_block.previous_block:\n                    break\n                else:\n                    current_block = current_block.previous_block\n\n\n# ---------- TESTS ----------\n# Testing my iterator with an empty Blockchain:\nblockchain_1 = Blockchain()\nfor block in blockchain_1:\n    print(block)\n\n# Testing my iterator with non empty Blockchain:\nblockchain_2 = Blockchain()\nblockchain_2.add_block(\"Ant\u00f3nio\", 200000, \"Tim\")\nblockchain_2.add_block(\"Ant\u00f3nio\", 100000, \"Bob\")\nblockchain_2.add_block(\"Ant\u00f3nio\", 50000, \"John\")\nblockchain_2.add_block(\"Ant\u00f3nio\", 50000, \"Bill\")\nfor block in blockchain_2:\n    print(block)\n</code></pre>\n\n<p>In my iterator, there's a variable called <code>n</code>.<br>\nI declare <code>n</code> right at the beginning of the program with <code>n = 0</code> to make it a global variable.</p>\n\n<p>So, since <code>n</code> a global variable, I just increment it inside my <code>__next__()</code> method with the code: <code>n += 1</code>.<br>\nHowever, when I do that, I get an UnboundLocalError:\n<a href=\"https://i.stack.imgur.com/T2yH3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/T2yH3.png\" alt=\"enter image description here\"></a></p>\n\n<p>After experimenting, I found that if I type <code>global n</code> above <code>n +=1</code> it fixes it:\n<a href=\"https://i.stack.imgur.com/2KUOQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2KUOQ.png\" alt=\"enter image description here\"></a>\nBut why?</p>\n\n<p>Since I declared <code>n = 0</code> at the beginning of the program, shouldn't <code>n</code> already be a global variable?<br>\nWhy do I have to \"re-global\" <code>n</code> to make this work, when <code>n</code> was already supposed to be global in the first place?</p>\n"}, {"tags": ["python", "json", "django", "django-models"], "answers": [{"comments": [{"owner": {"reputation": 634, "user_id": 8942245, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxBSr.jpg?s=128&g=1", "display_name": "Algebra8", "link": "https://stackoverflow.com/users/8942245/algebra8"}, "edited": false, "score": 0, "creation_date": 1562278060, "post_id": 56877704, "comment_id": 100335468, "body": "Thank you very much, I will give this method a try and get back to you."}], "tags": [], "owner": {"reputation": 8778, "user_id": 136010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3fe3ce83e99620b939ce695b35b4ed0a?s=128&d=identicon&r=PG", "display_name": "Greg", "link": "https://stackoverflow.com/users/136010/greg"}, "is_accepted": false, "score": 0, "last_activity_date": 1562186760, "creation_date": 1562186760, "answer_id": 56877704, "question_id": 56877637, "link": "https://stackoverflow.com/questions/56877637/how-to-populate-my-django-database-with-json-that-i-scraped-from-a-website/56877704#56877704", "title": "How to populate my django database with json that I scraped from a website", "body": "<p>Tricky to answer without details, but I would consider doing this in two steps - first, convert your json data to a database schema, for example using a tool like sqlify: <a href=\"https://sqlify.io/convert/json/to/sqlite\" rel=\"nofollow noreferrer\">https://sqlify.io/convert/json/to/sqlite</a></p>\n\n<p>Then, create a database from the generated schema file, and use inspectdb to generate your django models: <a href=\"https://docs.djangoproject.com/en/2.2/ref/django-admin/#inspectdb\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/2.2/ref/django-admin/#inspectdb</a></p>\n\n<p>You'll probably need to tweak the generated schema and/or models, but this should go a long way towards automating the process.</p>\n"}, {"comments": [{"owner": {"reputation": 634, "user_id": 8942245, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxBSr.jpg?s=128&g=1", "display_name": "Algebra8", "link": "https://stackoverflow.com/users/8942245/algebra8"}, "edited": false, "score": 0, "creation_date": 1562278129, "post_id": 56877724, "comment_id": 100335478, "body": "Hello, thank you for the advice. However, I am trying to use as few external dependencies with regards to software as I possibly can, and I am trying to stick with sqlite, as the project is not too large. But I will take note of this for future projects! Thanks!"}], "tags": [], "owner": {"reputation": 10371, "user_id": 3322400, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/l3BGk.jpg?s=128&g=1", "display_name": "Lo&#239;c", "link": "https://stackoverflow.com/users/3322400/lo%c3%afc"}, "is_accepted": false, "score": 0, "last_activity_date": 1562186858, "creation_date": 1562186858, "answer_id": 56877724, "question_id": 56877637, "link": "https://stackoverflow.com/questions/56877637/how-to-populate-my-django-database-with-json-that-i-scraped-from-a-website/56877724#56877724", "title": "How to populate my django database with json that I scraped from a website", "body": "<p>I would go for a document database, like Elasticsearch or MongoDB.\nThose are made for this kind of situation, look it up.</p>\n"}], "owner": {"reputation": 634, "user_id": 8942245, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxBSr.jpg?s=128&g=1", "display_name": "Algebra8", "link": "https://stackoverflow.com/users/8942245/algebra8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 200, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1562186858, "creation_date": 1562186396, "question_id": 56877637, "link": "https://stackoverflow.com/questions/56877637/how-to-populate-my-django-database-with-json-that-i-scraped-from-a-website", "title": "How to populate my django database with json that I scraped from a website", "body": "<p>I have scraped data from a website using their API on a Django application. The data is JSON (a Python dictionary when I retrieve it on my end). The data has many, many fields. I want to store them in a database, so that I can create endpoints that will allow for lookup and modifications (updates). I need to use their fields to create the structure of my database. Any help on this issue or on how to tackle it would be greatly appreciated. I apologize if my question is not concise enough, please let me know if there is anything I need to specify.</p>\n\n<p>I have seen many, many people saying to just populate it, such as this example <a href=\"https://stackoverflow.com/questions/1884694/how-to-populate-a-django-sqlite3-database\">How to populate a Django sqlite3 database</a>. The issue is, there are so many fields that I cannot go and actually create the django model fields myself. From what I have read, it seems like I may be able to use serializers.ModelSerializer, although that seems to just populate a pre-existing db with already defined model.</p>\n"}, {"tags": ["python", "pickle", "python-multiprocessing", "shared-memory", "mmap"], "comments": [{"owner": {"reputation": 2149, "user_id": 163679, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/AWwbu.jpg?s=128&g=1", "display_name": "bigh_29", "link": "https://stackoverflow.com/users/163679/bigh-29"}, "edited": false, "score": 2, "creation_date": 1562679321, "post_id": 56877636, "comment_id": 100445988, "body": "I think <code>shared_memory</code> dodges pickling because it only provides a <code>memoryview</code> that wraps the shared buffer. You can read and write raw bytes, but you cannot pass objects to <code>SharedMemory</code>. It has no interface for that. To get an object into memory, you would need to serialize it to raw bytes and blast those into the buffer. Pickling creeps back into the equation because of the serialization step. Got no clue on the second question. Lastly, note that <code>mmap</code> plays a role in both the unix and windows branches in the constructor. See line 111. Disclaimer, not an authority on anything."}], "answers": [{"tags": [], "owner": {"reputation": 1373, "user_id": 3050140, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71120e525a8b177bbe690caf54464425?s=128&d=identicon&r=PG", "display_name": "Raito", "link": "https://stackoverflow.com/users/3050140/raito"}, "is_accepted": false, "score": 11, "last_activity_date": 1562887703, "creation_date": 1562887703, "answer_id": 56998503, "question_id": 56877636, "link": "https://stackoverflow.com/questions/56877636/understanding-shared-memory-in-python-3-8/56998503#56998503", "title": "Understanding shared_memory in Python 3.8", "body": "<blockquote>\n  <p>How does <code>shared_memory</code> circumvent the pickle treatment?</p>\n</blockquote>\n\n<p>I think you are confusing <em>shared ctypes</em> and <em>shared objects</em> between processes.</p>\n\n<p>First, you don't have to use the sharing mechanisms provided by <code>multiprocessing</code> in order to get shared objects, you can just wrap basic primitives such as <code>mmap</code> / Windows-equivalent or get fancier using any API that your OS/kernel provides you.</p>\n\n<p>Next, the second link you mention regarding how copy is done and how <code>__getstate__</code> defines the behavior of the pickling is dependent on you \u2014\u00a0using the <code>sharedctypes</code> module API. You are not forced to perform pickling to share memory between two processes.</p>\n\n<p>In fact, <code>sharedctypes</code> is backed by anonymous shared memory which uses: <a href=\"https://github.com/python/cpython/blob/master/Lib/multiprocessing/heap.py#L31\" rel=\"noreferrer\">https://github.com/python/cpython/blob/master/Lib/multiprocessing/heap.py#L31</a></p>\n\n<p>Both implementations relies on an <code>mmap</code>-like primitive.</p>\n\n<p>Anyway, if you try to copy something using <code>sharedctype</code>, you will hit:</p>\n\n<ul>\n<li><a href=\"https://github.com/python/cpython/blob/master/Lib/multiprocessing/sharedctypes.py#L98\" rel=\"noreferrer\">https://github.com/python/cpython/blob/master/Lib/multiprocessing/sharedctypes.py#L98</a></li>\n<li><a href=\"https://github.com/python/cpython/blob/master/Lib/multiprocessing/sharedctypes.py#L39\" rel=\"noreferrer\">https://github.com/python/cpython/blob/master/Lib/multiprocessing/sharedctypes.py#L39</a></li>\n<li><a href=\"https://github.com/python/cpython/blob/master/Lib/multiprocessing/sharedctypes.py#L135\" rel=\"noreferrer\">https://github.com/python/cpython/blob/master/Lib/multiprocessing/sharedctypes.py#L135</a></li>\n</ul>\n\n<p>And this function is using <code>ForkingPickler</code> which will make use of <code>pickle</code> and then\u2026 ultimately, you'll call <code>__getstate__</code> somewhere.</p>\n\n<p>But it's not relevant with <code>shared_memory</code>, because <code>shared_memory</code> is not really a <code>ctype</code>-like object.</p>\n\n<p>You have other ways to share objects between processes, using the Resource Sharer / Tracker API: <a href=\"https://github.com/python/cpython/blob/master/Lib/multiprocessing/resource_sharer.py\" rel=\"noreferrer\">https://github.com/python/cpython/blob/master/Lib/multiprocessing/resource_sharer.py</a> which will rely on <code>pickle</code> serialization/deserialization.</p>\n\n<p>But you don't share shared memory through shared memory, right?</p>\n\n<p>When you use: <a href=\"https://github.com/python/cpython/blob/master/Lib/multiprocessing/shared_memory.py\" rel=\"noreferrer\">https://github.com/python/cpython/blob/master/Lib/multiprocessing/shared_memory.py</a></p>\n\n<p>You create a block of memory with a unique name, and all processes must have the unique name <em>before</em> sharing the memory, otherwise you will not be able to attach it.</p>\n\n<p>Basically, the analogy is: </p>\n\n<blockquote>\n  <p>You have a group of friends and you all have a unique secret base that only you have the location, you will go on errands, be away from each other, but you can all meet at this unique location.</p>\n</blockquote>\n\n<p>In order for this to work, you must all know the location before going away from each other. If you do not have it beforehand, you are not certain that you will be able to figure out the place to meet them.</p>\n\n<p>That is the same with the <code>shared_memory</code>, you only need its name to open it. You don't share / transfer <code>shared_memory</code> between processes. You read into <code>shared_memory</code> using its unique name from multiple processes.</p>\n\n<p>As a result, why would you pickle it? You can. You can absolutely pickle it. But that might not be built-in, because it's straightforward to just send the unique name to all your processes through another shared memory channel or anything like that.</p>\n\n<p>There is no circumvention required here. <code>ShareableList</code> is just an example of application of <code>SharedMemory</code> class. As you can see it here: <a href=\"https://github.com/python/cpython/blob/master/Lib/multiprocessing/shared_memory.py#L314\" rel=\"noreferrer\">https://github.com/python/cpython/blob/master/Lib/multiprocessing/shared_memory.py#L314</a></p>\n\n<p>It requires something akin to a unique name, you can use anonymous shared memory also and transmit its name later through another channel (write a temporary file, send it back to some API, whatever).</p>\n\n<blockquote>\n  <p>Why then is CreateFileMapping \\ OpenFileMapping needed here?</p>\n</blockquote>\n\n<p>Because it depends on your Python interpreter, here you are might be using CPython, which is doing the following:</p>\n\n<p><a href=\"https://github.com/python/cpython/blob/master/Modules/mmapmodule.c#L1440\" rel=\"noreferrer\">https://github.com/python/cpython/blob/master/Modules/mmapmodule.c#L1440</a></p>\n\n<p>It's already using <code>CreateFileMapping</code> indirectly so that doing <code>CreateFileMapping</code> then attaching it is just duplicating the already-done work in CPython.</p>\n\n<p>But, what about others interpreters? Do all interpreters perform the necessary to make <code>mmap</code> work on non-POSIX platforms? Maybe the rationale of the developer would be this.</p>\n\n<p>Anyway, it is not surprising that <code>mmap</code> would work out of the box.</p>\n"}], "owner": {"reputation": 1527, "user_id": 5387972, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d6b6d9239d09a67878e860ac414c4970?s=128&d=identicon&r=PG&f=1", "display_name": "Jay", "link": "https://stackoverflow.com/users/5387972/jay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4276, "favorite_count": 2, "answer_count": 1, "score": 14, "last_activity_date": 1562887703, "creation_date": 1562186395, "question_id": 56877636, "link": "https://stackoverflow.com/questions/56877636/understanding-shared-memory-in-python-3-8", "title": "Understanding shared_memory in Python 3.8", "body": "<p>I'm trying to understand some of <code>shared_memory</code>'s operation. </p>\n\n<p>Looking at the <a href=\"https://github.com/python/cpython/blob/master/Lib/multiprocessing/shared_memory.py\" rel=\"noreferrer\">source</a> , it looks like the module uses <code>shm_open()</code> for UNIX environments, and <code>CreateFileMapping</code> \\ <code>OpenFileMapping</code> on windows, combined with <code>mmap</code>.</p>\n\n<p>I understand from <a href=\"https://stackoverflow.com/questions/56495471/multiprocessing-rawarray-operation\">here</a>, that in order to avoid a thorough serialization / deserialization by <code>pickle</code>, one needs to implement <code>__setstate__()</code> and <code>__getstate__()</code> explicitly for his shared datatype.</p>\n\n<p>I do not see any such implementation in <code>shared_memory.py</code>. </p>\n\n<p>How does <code>shared_memory</code> circumvent the pickle treatment?</p>\n\n<p>Also, on a Windows machine, this alone seems to survive accross interpreters:</p>\n\n<pre><code>from mmap import mmap\n\nshared_size = 12\nshared_label = \"my_mem\"\n\nmmap(-1, shared_size , shared_label)\n</code></pre>\n\n<p>Why then is <code>CreateFileMapping</code> \\ <code>OpenFileMapping</code> needed here?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 4057, "user_id": 8285811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C38qo.jpg?s=128&g=1", "display_name": "Akaisteph7", "link": "https://stackoverflow.com/users/8285811/akaisteph7"}, "edited": false, "score": 0, "creation_date": 1562203210, "post_id": 56877463, "comment_id": 100307575, "body": "Please mark the correct answer if it answered your question!"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5626899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59a2edafcd06f4db1877da4d5045be7f?s=128&d=identicon&r=PG&f=1", "display_name": "user40267", "link": "https://stackoverflow.com/users/5626899/user40267"}, "edited": false, "score": 0, "creation_date": 1562189582, "post_id": 56878031, "comment_id": 100304975, "body": "Thanks. Is it possible that the same code executed different times can generate or not generate the warning? If this is true is it safer create a deep copy every time you have to modify a dataframe?"}, {"owner": {"reputation": 4057, "user_id": 8285811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C38qo.jpg?s=128&g=1", "display_name": "Akaisteph7", "link": "https://stackoverflow.com/users/8285811/akaisteph7"}, "reply_to_user": {"reputation": 31, "user_id": 5626899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59a2edafcd06f4db1877da4d5045be7f?s=128&d=identicon&r=PG&f=1", "display_name": "user40267", "link": "https://stackoverflow.com/users/5626899/user40267"}, "edited": false, "score": 0, "creation_date": 1562203119, "post_id": 56878031, "comment_id": 100307564, "body": "Yes, the same code can cause the warning to not be shown after the first time it was displayed to the user. You should create a deep copy when you want to create a deep copy. Sometimes you just want to change the original. This warning is for those cases where the code doesn\u2019t know which of these two will happen. You should just make sure you do not write code that can cause this warning, more details can be seen here: <a href=\"https://www.dataquest.io/blog/settingwithcopywarning/\" rel=\"nofollow noreferrer\">dataquest.io/blog/settingwithcopywarning</a>"}], "tags": [], "owner": {"reputation": 4057, "user_id": 8285811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C38qo.jpg?s=128&g=1", "display_name": "Akaisteph7", "link": "https://stackoverflow.com/users/8285811/akaisteph7"}, "is_accepted": false, "score": 0, "last_activity_date": 1562188564, "creation_date": 1562188564, "answer_id": 56878031, "question_id": 56877463, "link": "https://stackoverflow.com/questions/56877463/print-function-and-dataframe-view-copy/56878031#56878031", "title": "Print function and dataframe view/copy", "body": "<p>First, this is a warning not an error. But, it is there for a reason and should not be ignored!  </p>\n\n<p>As explained <a href=\"https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#why-does-assignment-fail-when-using-chained-indexing\" rel=\"nofollow noreferrer\">here</a>, this warning happens because it is hard to predict whether or not one of your lines will be making a copy of the dataframe or just getting a view of it (deep vs shallow copy). </p>\n\n<p>This is the line in question:</p>\n\n<pre><code>df = df.loc[mask,:]\n</code></pre>\n\n<p>Your print operation is not actually changing anything. This line is still <em>probably</em> creating a copy after print is run. In this case, we know it is definitely creating a copy, which we know because of the warning, but this might not always be the case, hence the warning.  </p>\n\n<p>The difference is in the code that detects this problem. There must be something that needs to happen for this issue to be detected which does not after print() is called.</p>\n\n<p>To resolve this, just change the line to this to ensure you and your code knows that you are creating a copy:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df = (df.loc[mask,:]).copy()\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5626899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59a2edafcd06f4db1877da4d5045be7f?s=128&d=identicon&r=PG&f=1", "display_name": "user40267", "link": "https://stackoverflow.com/users/5626899/user40267"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562189237, "creation_date": 1562185429, "last_edit_date": 1562189237, "question_id": 56877463, "link": "https://stackoverflow.com/questions/56877463/print-function-and-dataframe-view-copy", "title": "Print function and dataframe view/copy", "body": "<p>If I use the code 1 below, I get the following error: </p>\n\n<pre><code>SettingWithCopyWarning: \nA value is trying to be set on a copy of a slice from a DataFrame\n</code></pre>\n\n<p>while I do not get it if I use the code 2.</p>\n\n<p>Both of the code should create a copy, why does the print function change this?\n<br></p>\n\n<p><strong>code 1</strong></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pandas as pd\n\ndf = pd.DataFrame({'a': [1, 2, 3], 'b': [4, 5, 6]})\ndf    \n\ndef f(df_par):\n    df_par.iloc[0, 0] = 8\n\nmask = df.iloc[:, 0] &gt; 1\ndf = df.loc[mask,:]\nf(df)\n</code></pre>\n\n<p><strong>code 2</strong></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pandas as pd\n\ndf = pd.DataFrame({'a': [1, 2, 3], 'b': [4, 5, 6]})\nprint(df)\n\ndef f(df_par):\n    df_par.iloc[0, 0] = 8\n\nmask = df.iloc[:, 0] &gt; 1\ndf = df.loc[mask,:]\nf(df)\n</code></pre>\n"}, {"tags": ["python", "pyqt", "pyqt5", "qwidget"], "answers": [{"comments": [{"owner": {"reputation": 1391, "user_id": 1119602, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/T0o2K.jpg?s=128&g=1", "display_name": "Winand", "link": "https://stackoverflow.com/users/1119602/winand"}, "edited": false, "score": 0, "creation_date": 1563388904, "post_id": 56877937, "comment_id": 100687499, "body": "But the result of <code>mro()</code> looked good to me and I thought that all dependecies between classes were resolved during MRO process."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 1391, "user_id": 1119602, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/T0o2K.jpg?s=128&g=1", "display_name": "Winand", "link": "https://stackoverflow.com/users/1119602/winand"}, "edited": false, "score": 0, "creation_date": 1563393987, "post_id": 56877937, "comment_id": 100689776, "body": "@Winand Well that does not happen with Qt, Qt is a bit special with its design unfortunately :-("}, {"owner": {"reputation": 1391, "user_id": 1119602, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/T0o2K.jpg?s=128&g=1", "display_name": "Winand", "link": "https://stackoverflow.com/users/1119602/winand"}, "edited": false, "score": 0, "creation_date": 1563394011, "post_id": 56877937, "comment_id": 100689790, "body": "One more new fact for me: PySide&#39;s QObject doesn&#39;t initialize next super class, unlike PyQt (as shown in <code>Cooperative Multi-inheritance</code> article)"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 1391, "user_id": 1119602, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/T0o2K.jpg?s=128&g=1", "display_name": "Winand", "link": "https://stackoverflow.com/users/1119602/winand"}, "edited": false, "score": 0, "creation_date": 1563394284, "post_id": 56877937, "comment_id": 100689900, "body": "@Winand Each binding is implementing its own methods to be more pythonic (the 2 are still on track) but having a different base (SIP and shiboken) usually have their own limitations, and in that path IMHO PyQt5 is gaining although PySide2 is already updating (only comparing the bugs)"}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": false, "score": 2, "last_activity_date": 1562190835, "last_edit_date": 1592644375, "creation_date": 1562188047, "answer_id": 56877937, "question_id": 56877427, "link": "https://stackoverflow.com/questions/56877427/pyqt-crash-on-double-inheritance-from-qwidget/56877937#56877937", "title": "PyQt: crash on double inheritance from QWidget", "body": "<p>On the contrary, it is a bug of PySide2 since it contradicts the <a href=\"https://doc.qt.io/qt-5/moc.html#multiple-inheritance-requires-qobject-to-be-first\" rel=\"nofollow noreferrer\">docs</a>:</p>\n<blockquote>\n<p><strong>Multiple Inheritance Requires QObject to Be First</strong></p>\n<p>If you are using\nmultiple inheritance, moc assumes that the first inherited class is a\nsubclass of QObject. Also, be sure that only the first inherited class\nis a QObject.</p>\n</blockquote>\n<p>If the behavior described in the previous part is considered then the Dialog class should only take into account UserForm and not QDialog so Dialog should not have the exec_() method since only the classes that inherit from QDialog can have it.</p>\n<ul>\n<li><p>In Qt you should not inherit from 2 QObject, only supports mixins (QObject + not QObject) <sup>(1)(2)</sup>.</p>\n</li>\n<li><p>If it is a mixin then the first must be the QObject.</p>\n</li>\n</ul>\n<p>And that's the pattern that pyuic to inherit:</p>\n<pre class=\"lang-py prettyprint-override\"><code>from PyQt5 import QtCore, QtGui, QtWidgets\n# or\n# from PySide2 import QtCore, QtGui, QtWidgets\n\nclass Ui_Dialog(object):\n    def setupUi(self, Dialog):\n        Dialog.setObjectName(&quot;Dialog&quot;)\n        Dialog.resize(400, 300)\n        self.buttonBox = QtWidgets.QDialogButtonBox(Dialog)\n        self.buttonBox.setGeometry(QtCore.QRect(30, 240, 341, 32))\n        self.buttonBox.setOrientation(QtCore.Qt.Horizontal)\n        self.buttonBox.setStandardButtons(\n            QtWidgets.QDialogButtonBox.Cancel | QtWidgets.QDialogButtonBox.Ok\n        )\n        self.buttonBox.setObjectName(&quot;buttonBox&quot;)\n\n        self.retranslateUi(Dialog)\n        self.buttonBox.accepted.connect(Dialog.accept)\n        self.buttonBox.rejected.connect(Dialog.reject)\n        QtCore.QMetaObject.connectSlotsByName(Dialog)\n\n    def retranslateUi(self, Dialog):\n        _translate = QtCore.QCoreApplication.translate\n        Dialog.setWindowTitle(_translate(&quot;Dialog&quot;, &quot;Dialog&quot;))\n\n\ndef init(self, parent=None):\n    super(self.__class__, self).__init__(parent)\n    self.setupUi(self)\n\n# or\n# class Dialog(QtWidgets.QDialog, Ui_Dialog):\n#    def __init__(self, parent=None):\n#        super(Dialog, self).__init__(parent)\n#        self.setupUi(self)\n\nDialog = type(&quot;Dialog&quot;, (QtWidgets.QDialog, Ui_Dialog), {&quot;__init__&quot;: init})\n\nif __name__ == &quot;__main__&quot;:\n    app = QtWidgets.QApplication([])\n    Dialog().exec_()\n</code></pre>\n<hr />\n<p><sub>(1) <a href=\"https://www.riverbankcomputing.com/static/Docs/PyQt5/gotchas.html#multiple-inheritance\" rel=\"nofollow noreferrer\">Multiple Inheritance</a></sub><br>\n<sub>(2) <a href=\"https://www.riverbankcomputing.com/static/Docs/PyQt5/pyqt4_differences.html#cooperative-multi-inheritance\" rel=\"nofollow noreferrer\">Cooperative Multi-inheritance</a></sub></p>\n"}], "owner": {"reputation": 1391, "user_id": 1119602, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/T0o2K.jpg?s=128&g=1", "display_name": "Winand", "link": "https://stackoverflow.com/users/1119602/winand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1562190835, "creation_date": 1562185281, "last_edit_date": 1562186443, "question_id": 56877427, "link": "https://stackoverflow.com/questions/56877427/pyqt-crash-on-double-inheritance-from-qwidget", "title": "PyQt: crash on double inheritance from QWidget", "body": "<p>The following problem happens with PyQt5, Qt 5.9.6.</p>\n\n<p>I want to generate modal dialog class (<code>Dialog</code>) based on another class (<code>UserForm</code>). But if <code>UserForm</code> already inherits from <code>QWidget</code> then my script raises exception </p>\n\n<blockquote>\n  <p>'Dialog' object has no attribute 'exec_'</p>\n</blockquote>\n\n<p>or just crashes silently or crashes with a message in console:</p>\n\n<blockquote>\n  <p>QDialog::exec: Recursive call detected</p>\n</blockquote>\n\n<p>MRO looks exactly the same if <code>UserForm</code> is inherited from QWidget or not:</p>\n\n<pre><code>(&lt;class '__main__.Dialog'&gt;, &lt;class '__main__.UserForm'&gt;, &lt;class\n'PyQt5.QtWidgets.QDialog'&gt;, &lt;class 'PyQt5.QtWidgets.QWidget'&gt;, &lt;class\n'PyQt5.QtCore.QObject'&gt;, &lt;class 'sip.wrapper'&gt;, &lt;class\n'PyQt5.QtGui.QPaintDevice'&gt;, &lt;class 'sip.simplewrapper'&gt;, &lt;class 'object'&gt;)\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>from PyQt5 import QtWidgets\napp = QtWidgets.QApplication([])\n\nclass UserForm(QtWidgets.QWidget):\n    pass\n\n# class Dialog(UserForm, QtWidgets.QDialog):\n#     pass\nDialog = type(\"Dialog\", (UserForm, QtWidgets.QDialog), {})\n\nprint(Dialog.__mro__)\nDialog().exec_()\n</code></pre>\n\n<p>I've also tried to run this code with PySide2, Qt 5.12 and it works without issues. Does it mean that there's some bug in PyQt?</p>\n"}, {"tags": ["python", "machine-learning", "scikit-learn", "cross-validation", "grid-search"], "answers": [{"tags": [], "owner": {"reputation": 12637, "user_id": 6347629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vxdJr.jpg?s=128&g=1", "display_name": "Venkatachalam", "link": "https://stackoverflow.com/users/6347629/venkatachalam"}, "is_accepted": true, "score": 1, "last_activity_date": 1562222250, "creation_date": 1562222250, "answer_id": 56881938, "question_id": 56877358, "link": "https://stackoverflow.com/questions/56877358/should-gridsearchcv-score-results-be-equal-to-score-of-cross-validate-using-same/56881938#56881938", "title": "Should GridSearchCV score results be equal to score of cross_validate using same input?", "body": "<p>It is because the <code>mean_test_f1_macro</code> is not a simple average of all combination of folds, it is a weight average, with weights being the size of the test fold. To know more about the actual implementation of refer <a href=\"https://stackoverflow.com/a/55720287/6347629\">this</a> answer.</p>\n\n<p>Now, to replicate the <code>GridSearchCV</code> result, try this!</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>print('grid search cv result',grid.cv_results_['mean_test_f1_macro'][0])\n\n# grid search cv result 0.38414468864468865\n\nprint('simple mean: ', result['test_f1_macro'].mean())\n\n# simple mean:  0.3848840048840049\n\nweights= [len(test) for (_, test) in StratifiedKFold(n_splits=10, random_state=2018).split(X,y)]\nprint('weighted mean: {}'.format(np.average(result['test_f1_macro'], axis=0, weights=weights)))\n\n# weighted mean: 0.38414468864468865\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 11736300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f745484c464b5830ac51faee131684b?s=128&d=identicon&r=PG&f=1", "display_name": "Kneipenrunde", "link": "https://stackoverflow.com/users/11736300/kneipenrunde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 642, "favorite_count": 0, "accepted_answer_id": 56881938, "answer_count": 1, "score": 2, "last_activity_date": 1562222443, "creation_date": 1562184963, "last_edit_date": 1562222443, "question_id": 56877358, "link": "https://stackoverflow.com/questions/56877358/should-gridsearchcv-score-results-be-equal-to-score-of-cross-validate-using-same", "title": "Should GridSearchCV score results be equal to score of cross_validate using same input?", "body": "<p>I am playing around with scikit-learn a bit and wanted to reproduce the cross-validation scores for one specific hyper-parameter combination of a carried out grid search. </p>\n\n<p>For the grid search, I used the <code>GridSearchCV</code> class and to reproduce the result for one specific hyper-parameter combination I used the <code>cross_validate</code> function with the exact same split and classifier settings. </p>\n\n<p>My problem is that I do not get the expected score results, which to my understanding should be exactly the same as the same computations are carried out to obtain the scores in both methods.</p>\n\n<p>I made sure to exclude any randomness sources from my script by fixing the used splits on the training data. </p>\n\n<p>In the following code snippet, an example of the stated problem is given. </p>\n\n<pre><code>import numpy as np\nfrom sklearn.model_selection import cross_validate, StratifiedKFold, GridSearchCV\nfrom sklearn.svm import NuSVC\n\nnp.random.seed(2018)\n\n# generate random training features\nX = np.random.random((100, 10))\n\n# class labels\ny = np.random.randint(2, size=100)\n\nclf = NuSVC(nu=0.4, gamma='auto')\n\n# Compute score for one parameter combination\ngrid = GridSearchCV(clf,\n                    cv=StratifiedKFold(n_splits=10, random_state=2018),\n                    param_grid={'nu': [0.4]},\n                    scoring=['f1_macro'],\n                    refit=False)\n\ngrid.fit(X, y)\nprint(grid.cv_results_['mean_test_f1_macro'][0])\n\n# Recompute score for exact same input\nresult = cross_validate(clf,\n                        X,\n                        y,\n                        cv=StratifiedKFold(n_splits=10, random_state=2018),\n                        scoring=['f1_macro'])\n\nprint(result['test_f1_macro'].mean())\n</code></pre>\n\n<p>Executing the given snippet results in the output: </p>\n\n<pre><code>0.38414468864468865\n0.3848840048840049\n</code></pre>\n\n<p>I would have expected these scores to be exactly the same, as they are computed on the same split, using the same training data with the same classifier.</p>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 119, "user_id": 11736303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea2efd2e59401a4315e89ff9c76e5cd1?s=128&d=identicon&r=PG&f=1", "display_name": "J.Hirsch", "link": "https://stackoverflow.com/users/11736303/j-hirsch"}, "edited": false, "score": 0, "creation_date": 1562588566, "post_id": 56877350, "comment_id": 100409917, "body": "edit: Since I was trying to create a drop in substitute, the suggestion below hasn&#39;t worked. Currently I&#39;m getting float divide by zero (somewhere) in my huge datasets, so I&#39;m going to investigate further. I think I&#39;m going to have to give up at getting better precision as Numppy just isn&#39;t giving me the flexibility to do so, and I&#39;m not savvy enough to write in exhaustive functions to handle it.  Any other ideas would be welcome and I&#39;m grateful, Paul, for your suggestion- gave me a good start."}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 11736303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea2efd2e59401a4315e89ff9c76e5cd1?s=128&d=identicon&r=PG&f=1", "display_name": "J.Hirsch", "link": "https://stackoverflow.com/users/11736303/j-hirsch"}, "edited": false, "score": 0, "creation_date": 1562188597, "post_id": 56877670, "comment_id": 100304615, "body": "Unfortunately it&#39;s np.sum just hasn&#39;t worked. It has, I mean, for a few hundred million individual data sets but it still is off and I&#39;m starting to bump up against edge cases.  If that inline works I&#39;ll be ecstatic. I&#39;ve not seen that type of response for any improved precision discussion anywhere."}], "tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": true, "score": 1, "last_activity_date": 1562186590, "creation_date": 1562186590, "answer_id": 56877670, "question_id": 56877350, "link": "https://stackoverflow.com/questions/56877350/numpy-sum-transition-to-kahan-but-with-masked-arrays-for-increased-precision/56877670#56877670", "title": "numpy.sum transition to kahan but with masked arrays for increased precision", "body": "<p>If you really need more precision, consider using <code>math.fsum</code> which is accurate to fp resolution. If <code>A</code> is your 3D masked array, something like:</p>\n\n<pre><code>i,j,k = A.shape\nnp.frompyfunc(lambda i,j:math.fsum(A[i,j].compressed().tolist()),2,1)(*np.ogrid[:i,:j])\n</code></pre>\n\n<p>But before that I'd triple check that<code>np.sum</code> really isn't good enough. As far as I know it uses pairwise summation along contiguous axes which in practice tends to be pretty good.</p>\n"}], "owner": {"reputation": 119, "user_id": 11736303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea2efd2e59401a4315e89ff9c76e5cd1?s=128&d=identicon&r=PG&f=1", "display_name": "J.Hirsch", "link": "https://stackoverflow.com/users/11736303/j-hirsch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 56877670, "answer_count": 1, "score": 0, "last_activity_date": 1563382052, "creation_date": 1562184941, "question_id": 56877350, "link": "https://stackoverflow.com/questions/56877350/numpy-sum-transition-to-kahan-but-with-masked-arrays-for-increased-precision", "title": "numpy.sum transition to kahan but with masked arrays for increased precision", "body": "<p>I have a multi-array stack of data that is masked to exclude 'bad' or problematic values- this is in the 3rd dimension. Current code utilizes np.sum, but the level of precision (both large and small numbers) has negatively impacted results. I've attempted to implement the kahan_sum referenced here but forgotten about the masked arrays, and the results are not similar (due to masking). It is my hope that the added precision retention by utilizing a kahan summation and accumulator will permit downstream operations to maintain less error.</p>\n\n<p>Source/research: \n<a href=\"https://github.com/numpy/numpy/issues/8786\" rel=\"nofollow noreferrer\">https://github.com/numpy/numpy/issues/8786</a>\n<a href=\"https://stackoverflow.com/questions/4940072/kahan-summation\">Kahan summation</a>\n<a href=\"https://stackoverflow.com/questions/51312279/python-floating-point-precision-sum\">Python floating point precision sum</a> (I've jacked up the precision as far as possible but it doesn't help)</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\nimport numpy as np\nimport numpy.ma as ma\n\n\ndef kahan_sum(a, axis=None):\n    s = numpy.zeros(a.shape[:axis] + a.shape[axis+1:])\n    c = numpy.zeros(s.shape)\n    for i in range(a.shape[axis]):\n        # http://stackoverflow.com/a/42817610/353337\n        y = a[(slice(None),) * axis + (i,)] - c\n        t = s + y\n        c = (t - s) - y\n        s = t.copy()\n    return s\n\n\ndata=np.random.rand(5,5,5)\ndd=np.ma.masked_array(data=d, mask=np.random.rand(5,5,5)&lt;0.2)\n</code></pre>\n\n<p>I want to sum along the 3rd (axis=2) as that's essentially my 'stack' of photos.</p>\n\n<p>The masks are not coming out as I expected. It's possible I'm just overtired...</p>\n\n<pre><code>np.sum(dd, axis=2)\nkahan_sum(dd, axis=2)\n</code></pre>\n\n<p>np.sum provides a fully populated array of data and excluded the 'masked' values.\nkahan_sum essentially or'd all of the masked values, and I've been unable to come up with a pattern for it.</p>\n\n<p>Printing the mask is pretty evident that thats where the problem is; I'm just not figuring out how to fix it or why it's operating the way it is.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["python", "django", "azure", "version", "hosting"], "owner": {"reputation": 43, "user_id": 11703783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ecebf954ef30b6041383e130db8d4d1?s=128&d=identicon&r=PG&f=1", "display_name": "Usian Bolt", "link": "https://stackoverflow.com/users/11703783/usian-bolt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1562190505, "creation_date": 1562184715, "last_edit_date": 1562190505, "question_id": 56877305, "link": "https://stackoverflow.com/questions/56877305/azure-development-center-unsupported-python-version-error", "title": "Azure development center unsupported python version error", "body": "<p>I am attempting to get a Django website hosts on Azure that I build in Visual Studio.  I am able to publish it and get a dedicated URL, however in order to get the site to load properly, I need to load my code to Azure.  </p>\n\n<p>So in the development centre tab, I tried creating a dev ops project to read from, I also tried to upload it through the GitHub repo, with both options I get an error that I am running an unsupported version of python.</p>\n\n<p>I ran commands in my local project to see what versions I am using, which are as follows:</p>\n\n<p>Python - 3.7.3</p>\n\n<p>Django - 2.1</p>\n\n<p>pip - 19.1.1</p>\n\n<pre><code>Command: \"D:\\home\\site\\deployments\\tools\\deploy.cmd\"\nHandling python deployment.\nCreating app_offline.htm\nKuduSync.NET from: 'D:\\home\\site\\repository' to: 'D:\\home\\site\\wwwroot'\nDeleting app_offline.htm\nDetected requirements.txt.  You can skip Python specific steps with a .skipPythonDeployment file.\nDetecting Python runtime from site configuration\nDetected python-2.7\nFound compatible virtual environment.\nPip install requirements.\nDownloading/unpacking django&gt;=2.1.6,&lt;3.0 (from -r requirements.txt (line 1))\n  Running setup.py (path:D:\\home\\site\\wwwroot\\env\\build\\django\\setup.py) egg_info for package django\n\n    ==========================\n    Unsupported Python version\n    ==========================\n\n    This version of Django requires Python 3.5, but you're trying to\n    install it on Python 2.7.\n\n    This may be because you are using a version of pip that doesn't\n    understand the python_requires classifier. Make sure you\n    have pip &gt;= 9.0 and setuptools &gt;= 24.2, then try again:\n\n        $ python -m pip install --upgrade pip setuptools\n        $ python -m pip install django\n\n    This will install the latest version of Django which works on your\n    version of Python. If you can't upgrade your pip (or Python), request\n    an older version of Django:\n\n        $ python -m pip install \"django&lt;2\"\n    Complete output from command python setup.py egg_info:\n\n\n==========================\n\nUnsupported Python version\n\n==========================\n\n\n\nThis version of Django requires Python 3.5, but you're trying to\n\ninstall it on Python 2.7.\n\n\n\nThis may be because you are using a version of pip that doesn't\n\nunderstand the python_requires classifier. Make sure you\n\nhave pip &gt;= 9.0 and setuptools &gt;= 24.2, then try again:\n\n\n\n    $ python -m pip install --upgrade pip setuptools\n\n    $ python -m pip install django\n\n\n\nThis will install the latest version of Django which works on your\n\nversion of Python. If you can't upgrade your pip (or Python), request\n\nan older version of Django:\n\n\n\n    $ python -m pip install \"django&lt;2\"\n\n----------------------------------------\nCleaning up...\nCommand python setup.py egg_info failed with error code 1 in D:\\home\\site\\wwwroot\\env\\build\\django\nStoring debug log for failure in D:\\home\\pip\\pip.log\nAn error has occurred during web site deployment.\n\\r\\nD:\\Program Files (x86)\\SiteExtensions\\Kudu\\82.10503.3890\\bin\\Scripts\\starter.cmd \"D:\\home\\site\\deployments\\tools\\deploy.cmd\"\n</code></pre>\n"}, {"tags": ["python", "excel", "database", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 10873207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ddd2bf5cd23f1370cae98c0c093d03?s=128&d=identicon&r=PG&f=1", "display_name": "DenverDataThug", "link": "https://stackoverflow.com/users/10873207/denverdatathug"}, "edited": false, "score": 1, "creation_date": 1562191666, "post_id": 56877348, "comment_id": 100305552, "body": "Your first (for loop) suggestion seems to be working. It created a &#39;bunch&#39; of UNNAMED columns, but I dropped them and assigned the &quot;clean&quot; dataframe to a &quot;clean_voters&quot; dataframe. Thanks !!"}], "tags": [], "owner": {"reputation": 1507, "user_id": 868736, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Dlg9M.jpg?s=128&g=1", "display_name": "pangyuteng", "link": "https://stackoverflow.com/users/868736/pangyuteng"}, "is_accepted": false, "score": 4, "last_activity_date": 1562185022, "last_edit_date": 1562185022, "creation_date": 1562184935, "answer_id": 56877348, "question_id": 56877281, "link": "https://stackoverflow.com/questions/56877281/newbie-read-49-excel-sheets-into-dataframe/56877348#56877348", "title": "Newbie - read 49 excel sheets into dataframe", "body": "<p>you need to use a <a href=\"https://en.wikipedia.org/wiki/For_loop#1991:_Python\" rel=\"nofollow noreferrer\">\"for loop\"</a>.\nMay I suggest something like the following:</p>\n\n<pre><code>df_list=[]\nxls = pd.ExcelFile('Pages 1-49.xlsx')\n\nfor x in range(150):\n    df = pd.read_excel(xls, sheet_name='page {}'.format(x+1),skiprows=1)\n    df_list.append(df)\n\n\nvoters = pd.concat(df_list,ignore_index='false') \n</code></pre>\n\n<p>alternatively, the for loop can be replaced like the below if <code>xls.sheet_names</code> is a list.</p>\n\n<pre><code>df_list=[]\nfor sheet_name in xls.sheet_names:\n    df = pd.read_excel(xls, sheet_name=sheet_name,skiprows=1)\n    df_list.append(df)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 10873207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ddd2bf5cd23f1370cae98c0c093d03?s=128&d=identicon&r=PG&f=1", "display_name": "DenverDataThug", "link": "https://stackoverflow.com/users/10873207/denverdatathug"}, "edited": false, "score": 0, "creation_date": 1562186251, "post_id": 56877454, "comment_id": 100303743, "body": "Thanks for the fast reply !"}, {"owner": {"reputation": 41, "user_id": 10873207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ddd2bf5cd23f1370cae98c0c093d03?s=128&d=identicon&r=PG&f=1", "display_name": "DenverDataThug", "link": "https://stackoverflow.com/users/10873207/denverdatathug"}, "edited": false, "score": 1, "creation_date": 1562186889, "post_id": 56877454, "comment_id": 100303997, "body": "Thanks for the fast reply !  I &quot;changed&quot; your code to the following:      dfs = pd.read_excel(&#39;Pages 1-49.xlsx&#39;, sheet_name=None,skiprows=1)     pd.concat(dfs, sort=False)  It looks like it works EXCEPT for inserting a bunch of UNNAMED columns. I&#39;m still investigating, but maybe you&#39;ve run into this before? All of the worksheets appear to have identical columns.  I have all the columns I need, but I have a bunch of added UNNAMED columns. Is there a way just to drop the UNNAMED columns? Or prevent them before they are created?"}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "reply_to_user": {"reputation": 41, "user_id": 10873207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ddd2bf5cd23f1370cae98c0c093d03?s=128&d=identicon&r=PG&f=1", "display_name": "DenverDataThug", "link": "https://stackoverflow.com/users/10873207/denverdatathug"}, "edited": false, "score": 0, "creation_date": 1562187003, "post_id": 56877454, "comment_id": 100304037, "body": "Why did you <code>skiprows=1</code>? Don&#39;t your sheets start with column names on top?"}, {"owner": {"reputation": 41, "user_id": 10873207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ddd2bf5cd23f1370cae98c0c093d03?s=128&d=identicon&r=PG&f=1", "display_name": "DenverDataThug", "link": "https://stackoverflow.com/users/10873207/denverdatathug"}, "edited": false, "score": 0, "creation_date": 1562187215, "post_id": 56877454, "comment_id": 100304114, "body": "The first row of each sheet is an unneeded header name for the sheet. The second row contains the column headers."}, {"owner": {"reputation": 41, "user_id": 10873207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ddd2bf5cd23f1370cae98c0c093d03?s=128&d=identicon&r=PG&f=1", "display_name": "DenverDataThug", "link": "https://stackoverflow.com/users/10873207/denverdatathug"}, "edited": false, "score": 0, "creation_date": 1562187706, "post_id": 56877454, "comment_id": 100304305, "body": "I get the 10 columns I want, followed by a &quot;bunch&quot; of UNNAMED columns, populated by NaN values. How do I drop - or not create - the UNNAMED columns."}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "reply_to_user": {"reputation": 41, "user_id": 10873207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ddd2bf5cd23f1370cae98c0c093d03?s=128&d=identicon&r=PG&f=1", "display_name": "DenverDataThug", "link": "https://stackoverflow.com/users/10873207/denverdatathug"}, "edited": false, "score": 0, "creation_date": 1562187759, "post_id": 56877454, "comment_id": 100304320, "body": "Did you try <code>pd.read_excel(&#39;Pages 1-49.xlsx&#39;, sheet_name=None,skiprows=1, usecols=10)</code>?"}, {"owner": {"reputation": 41, "user_id": 10873207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ddd2bf5cd23f1370cae98c0c093d03?s=128&d=identicon&r=PG&f=1", "display_name": "DenverDataThug", "link": "https://stackoverflow.com/users/10873207/denverdatathug"}, "edited": false, "score": 0, "creation_date": 1562187907, "post_id": 56877454, "comment_id": 100304372, "body": "dfs = pd.read_excel(&#39;Pages 1-49.xlsx&#39;, sheet_name=None,skiprows=1,usecols=[0,1,2,3,4,5,6,7,8,9])  I still get the UNNAMED columns ):"}, {"owner": {"reputation": 41, "user_id": 10873207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ddd2bf5cd23f1370cae98c0c093d03?s=128&d=identicon&r=PG&f=1", "display_name": "DenverDataThug", "link": "https://stackoverflow.com/users/10873207/denverdatathug"}, "edited": false, "score": 0, "creation_date": 1562187980, "post_id": 56877454, "comment_id": 100304395, "body": "usecols=10 is deprecated. Told me to use a list of column numbers (usecols=[0,1,2,3,4,5,6,7,8,9]"}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "reply_to_user": {"reputation": 41, "user_id": 10873207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ddd2bf5cd23f1370cae98c0c093d03?s=128&d=identicon&r=PG&f=1", "display_name": "DenverDataThug", "link": "https://stackoverflow.com/users/10873207/denverdatathug"}, "edited": false, "score": 0, "creation_date": 1562188144, "post_id": 56877454, "comment_id": 100304446, "body": "There must be something wrong with the excel file. Without the file, I can&#39;t tell exactly what the problem is."}, {"owner": {"reputation": 41, "user_id": 10873207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ddd2bf5cd23f1370cae98c0c093d03?s=128&d=identicon&r=PG&f=1", "display_name": "DenverDataThug", "link": "https://stackoverflow.com/users/10873207/denverdatathug"}, "edited": false, "score": 0, "creation_date": 1562191740, "post_id": 56877454, "comment_id": 100305573, "body": "Teng&#39;s suggestion seems to be working. You might want to look at my reply to him. THANK YOU for your help."}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "reply_to_user": {"reputation": 41, "user_id": 10873207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ddd2bf5cd23f1370cae98c0c093d03?s=128&d=identicon&r=PG&f=1", "display_name": "DenverDataThug", "link": "https://stackoverflow.com/users/10873207/denverdatathug"}, "edited": false, "score": 0, "creation_date": 1562191841, "post_id": 56877454, "comment_id": 100305590, "body": "Basically his answer also gives the UNAMED columns, and you still need to drop them after merge. So it&#39;s likely due to your excel file."}, {"owner": {"reputation": 41, "user_id": 10873207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ddd2bf5cd23f1370cae98c0c093d03?s=128&d=identicon&r=PG&f=1", "display_name": "DenverDataThug", "link": "https://stackoverflow.com/users/10873207/denverdatathug"}, "edited": false, "score": 0, "creation_date": 1562203745, "post_id": 56877454, "comment_id": 100307673, "body": "Could be. I&#39;m doing initial data validation/exploration. BTW, I used the solution (teng&#39;s) that I could get to work, not necessarily the better solution. I&#39;m a rookie. Thanks for your time and help."}], "tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": false, "score": 3, "last_activity_date": 1562185393, "creation_date": 1562185393, "answer_id": 56877454, "question_id": 56877281, "link": "https://stackoverflow.com/questions/56877281/newbie-read-49-excel-sheets-into-dataframe/56877454#56877454", "title": "Newbie - read 49 excel sheets into dataframe", "body": "<p>You can try:</p>\n\n<pre><code># this give you a dictionary of dataframe\n# {sheet_name: sheet_df}\ndfs = pd.read_excel('play.xlsx', sheet_name=None)\npd.concat(dfs, sort=False)\n</code></pre>\n\n<p>With my toy xlsx:</p>\n\n<pre><code>            A    B    C\nSheet1 0  1.0  2.0  3.0\n       1  4.0  5.0  6.0\nSheet2 0  1.0  2.0  3.0\n       1  4.0  5.0  6.0\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 10873207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ddd2bf5cd23f1370cae98c0c093d03?s=128&d=identicon&r=PG&f=1", "display_name": "DenverDataThug", "link": "https://stackoverflow.com/users/10873207/denverdatathug"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1562185393, "creation_date": 1562184573, "last_edit_date": 1562185019, "question_id": 56877281, "link": "https://stackoverflow.com/questions/56877281/newbie-read-49-excel-sheets-into-dataframe", "title": "Newbie - read 49 excel sheets into dataframe", "body": "<p>I have an excel workbook with 49 sheets (all same columns, different data). I want to load this data into a database, by creating one csv file from the 49 sheets. My plan is to read and concatenate each sheet into a \"master\" dataframe. Then I will write this dataframe a csv file, which I can load into a database (probably mySQL).</p>\n\n<p>I have successfully read the first 3 sheets, one at a time, as follows:</p>\n\n<pre><code>xls = pd.ExcelFile('Pages 1-49.xlsx')\nxls.sheet_names\npdf_1 = pd.read_excel(xls, sheet_name='page 1',skiprows=1)\npdf.append(pdf_next)\n</code></pre>\n\n<p>I execute this code 2 more times (not shown here) and have 3 dataframes named pdf_1, pdf_2, and pdf 3. </p>\n\n<p>I then concatenate these three dataframes as follows:</p>\n\n<pre><code>voters = pd.concat([pdf_1, pdf_2, pdf_3],ignore_index='false') \n</code></pre>\n\n<p>Everything is \"working\" - I have a single dataframe - but I have a total of 150 worksheets. How do I go from one-at-a-time to a loop?</p>\n\n<p>I want one dataframe containing 150 worksheets of data.</p>\n\n<p>Probably a simple task but I've spent several long days to get this far. I'd really appreciate some help. </p>\n"}, {"tags": ["python", "c", "i2c", "armbian"], "comments": [{"owner": {"reputation": 35849, "user_id": 1424875, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/HFA9w.png?s=128&g=1", "display_name": "nanofarad", "link": "https://stackoverflow.com/users/1424875/nanofarad"}, "edited": false, "score": 0, "creation_date": 1562189406, "post_id": 56877275, "comment_id": 100304913, "body": "Do you have access to an oscilloscope, logic analyzer, or other device that allows you to see the waveforms on the bus? There might be some insight there."}, {"owner": {"reputation": 63, "user_id": 8478201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b95d2306048b28534ac0c2a0ee10af00?s=128&d=identicon&r=PG&f=1", "display_name": "fluffypuffy", "link": "https://stackoverflow.com/users/8478201/fluffypuffy"}, "reply_to_user": {"reputation": 35849, "user_id": 1424875, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/HFA9w.png?s=128&g=1", "display_name": "nanofarad", "link": "https://stackoverflow.com/users/1424875/nanofarad"}, "edited": false, "score": 0, "creation_date": 1562270393, "post_id": 56877275, "comment_id": 100333697, "body": "unfortunately I dont have osciloscope or logic analyzer ;/"}], "answers": [{"tags": [], "owner": {"reputation": 63, "user_id": 8478201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b95d2306048b28534ac0c2a0ee10af00?s=128&d=identicon&r=PG&f=1", "display_name": "fluffypuffy", "link": "https://stackoverflow.com/users/8478201/fluffypuffy"}, "is_accepted": false, "score": 0, "last_activity_date": 1562520344, "creation_date": 1562520344, "answer_id": 56924488, "question_id": 56877275, "link": "https://stackoverflow.com/questions/56877275/reading-bme680-from-i2c-2-on-armbian/56924488#56924488", "title": "Reading BME680 from i2c 2 on Armbian", "body": "<p>So, I've tried to change address from 0x77 to 0x76 and it works as expected. Don't know why, but it looks like there is an issue with SECONDARY which system-wise looks ok, but sensor is invisible. When sensor is physically connected to use 0x76 (SDO to GND) and code is changed accordingly, it works.</p>\n"}], "owner": {"reputation": 63, "user_id": 8478201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b95d2306048b28534ac0c2a0ee10af00?s=128&d=identicon&r=PG&f=1", "display_name": "fluffypuffy", "link": "https://stackoverflow.com/users/8478201/fluffypuffy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1562520344, "creation_date": 1562184551, "last_edit_date": 1562189244, "question_id": 56877275, "link": "https://stackoverflow.com/questions/56877275/reading-bme680-from-i2c-2-on-armbian", "title": "Reading BME680 from i2c 2 on Armbian", "body": "<p>I'm trying to use BME680 sensor on BananaPI + Armbian 5.65 together with TSL 2651 on same i2c but no luck.\n(for reference, very same configuration is not working on RPi either)</p>\n\n<p>Sensor when connected alone, works, but connected together with TSL its not, at same time TSL works just fine when connected behind BME.</p>\n\n<p>It's connected :: board -> BME680 -> TSL2561</p>\n\n<p>I can reach TSL, so BME is awake and reachable as TSL have to go thru BME.</p>\n\n<p>i2cdetect see both of them, so systemwise it looks ok to me</p>\n\n<pre><code>sudo i2cdetect -y 2\n     0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f\n00:          -- -- -- -- -- -- -- -- -- -- -- -- --\n10: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --\n20: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --\n30: -- -- -- -- -- -- -- -- -- 39 -- -- -- -- -- --\n40: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --\n50: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --\n60: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --\n70: -- -- -- -- -- -- -- 77\n</code></pre>\n\n<p>I'm using Bosh Driver together with this .c <a href=\"https://github.com/twartzek/bme680-raspberry\" rel=\"nofollow noreferrer\">https://github.com/twartzek/bme680-raspberry</a> which is originally for RPI but as BananaPi M1 is exactly the same in terms of i2c/pinouts etc. I do think it should work. \nThis same code when BME is connected alone works.</p>\n\n<p>But connected together interface just returns </p>\n\n<pre><code>**** BME680 start measurements  ****\nuser_i2c_write: No such device or address\n</code></pre>\n\n<p>which I suspect simply means it can't see device on i2c-2 (0x77) but system does.</p>\n\n<p>I've edited bme680_main.c so it's using BME680_I2C_ADDR_SECONDARY and g_i2cFid = open(\"/dev/i2c-2\", O_RDWR);</p>\n\n<p>Not really sure how to proceed from here, if anyhow ;)\nAny help/hint would be appreciated.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "pydrive"], "comments": [{"owner": {"reputation": 3652, "user_id": 5298150, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dWo_GtNBONQ/AAAAAAAAAAI/AAAAAAAABGQ/Sg_HcSmvfpk/photo.jpg?sz=128", "display_name": "abdusco", "link": "https://stackoverflow.com/users/5298150/abdusco"}, "edited": false, "score": 0, "creation_date": 1562185818, "post_id": 56877264, "comment_id": 100303557, "body": "Have you completed oauth process? Is the client authorized at all?"}, {"owner": {"reputation": 1111, "user_id": 3749077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a2d0e870585e3b92458f37efb63fbff?s=128&d=identicon&r=PG&f=1", "display_name": "Sagnik", "link": "https://stackoverflow.com/users/3749077/sagnik"}, "reply_to_user": {"reputation": 3652, "user_id": 5298150, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dWo_GtNBONQ/AAAAAAAAAAI/AAAAAAAABGQ/Sg_HcSmvfpk/photo.jpg?sz=128", "display_name": "abdusco", "link": "https://stackoverflow.com/users/5298150/abdusco"}, "edited": false, "score": 0, "creation_date": 1562257015, "post_id": 56877264, "comment_id": 100329830, "body": "Yes, I have completed the oauth process and the client is authorized."}, {"owner": {"reputation": 3652, "user_id": 5298150, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dWo_GtNBONQ/AAAAAAAAAAI/AAAAAAAABGQ/Sg_HcSmvfpk/photo.jpg?sz=128", "display_name": "abdusco", "link": "https://stackoverflow.com/users/5298150/abdusco"}, "edited": false, "score": 0, "creation_date": 1562257206, "post_id": 56877264, "comment_id": 100329897, "body": "Did you perform this step? <code>The downloaded file has all authentication information of your application. Rename the file to \u201cclient_secrets.json\u201d and place it in your working directory.</code>   <a href=\"https://gsuitedevs.github.io/PyDrive/docs/build/html/quickstart.html#authentication\" rel=\"nofollow noreferrer\">gsuitedevs.github.io/PyDrive/docs/build/html/&hellip;</a>"}, {"owner": {"reputation": 1111, "user_id": 3749077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a2d0e870585e3b92458f37efb63fbff?s=128&d=identicon&r=PG&f=1", "display_name": "Sagnik", "link": "https://stackoverflow.com/users/3749077/sagnik"}, "reply_to_user": {"reputation": 3652, "user_id": 5298150, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dWo_GtNBONQ/AAAAAAAAAAI/AAAAAAAABGQ/Sg_HcSmvfpk/photo.jpg?sz=128", "display_name": "abdusco", "link": "https://stackoverflow.com/users/5298150/abdusco"}, "edited": false, "score": 0, "creation_date": 1562271427, "post_id": 56877264, "comment_id": 100333952, "body": "Yes. I have done it."}], "owner": {"reputation": 1111, "user_id": 3749077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a2d0e870585e3b92458f37efb63fbff?s=128&d=identicon&r=PG&f=1", "display_name": "Sagnik", "link": "https://stackoverflow.com/users/3749077/sagnik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1562187370, "creation_date": 1562184515, "last_edit_date": 1562187370, "question_id": 56877264, "link": "https://stackoverflow.com/questions/56877264/uploading-file-in-shared-drive", "title": "Uploading file in shared drive", "body": "<p>Can anyone tell me how to put project id of shared drive in GoogleAuth()?</p>\n\n<p>I have tried the below chunk of code but none of them are working:</p>\n\n<pre><code>auth = GoogleAuth({'id': 'projectid'}) \nauth = GoogleAuth({'project_id': 'projectid'})\nauth = GoogleAuth({'project': 'projectid'})\n</code></pre>\n\n<p>Below is my piece of code where I am trying to upload a .csv file to a shared drive. I assume that the project ID is the string after the last '/' in the URL which appears after we double click on the desired drive folder.</p>\n\n<pre><code>from pydrive.auth import GoogleAuth\nfrom pydrive.drive import GoogleDrive\n\nauth = GoogleAuth()\ndrive = GoogleDrive(gauth)\nfile1 = drive.CreateFile()\nfile1.SetContentFile('file_name.csv')\nfile1.Upload()`\n</code></pre>\n"}, {"tags": ["python", "syntax-error"], "comments": [{"owner": {"reputation": 106, "user_id": 11698632, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ePelRERy-T0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdqpV-D9ziBtuTz7EEVtwhhW3u4qQ/photo.jpg?sz=128", "display_name": "Agent Lu", "link": "https://stackoverflow.com/users/11698632/agent-lu"}, "edited": false, "score": 0, "creation_date": 1562184735, "post_id": 56877261, "comment_id": 100303126, "body": "Did you download the git file or import it?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11736261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b3183babb89f9ab3c2db2b3aa762222?s=128&d=identicon&r=PG&f=1", "display_name": "Spr1ng", "link": "https://stackoverflow.com/users/11736261/spr1ng"}, "edited": false, "score": 0, "creation_date": 1562185990, "post_id": 56877310, "comment_id": 100303630, "body": "XD Thanks a lot!"}], "tags": [], "owner": {"reputation": 150, "user_id": 7902334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q0JCM.jpg?s=128&g=1", "display_name": "Guaz", "link": "https://stackoverflow.com/users/7902334/guaz"}, "is_accepted": false, "score": 0, "last_activity_date": 1562184744, "creation_date": 1562184744, "answer_id": 56877310, "question_id": 56877261, "link": "https://stackoverflow.com/questions/56877261/syntax-error-when-using-google-module-maps/56877310#56877310", "title": "Syntax error when using google module maps", "body": "<p>You don't close <code>( )</code> line above:</p>\n\n<p>Look there:</p>\n\n<pre><code>gmaps = googlemaps.Client(key=('Here my API')\n</code></pre>\n\n<p>It should look be closed up:</p>\n\n<pre><code>gmaps = googlemaps.Client(key=('Here my API'))\n</code></pre>\n\n<p>Everytime on syntax, there isn't reason of lib</p>\n"}], "owner": {"reputation": 11, "user_id": 11736261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b3183babb89f9ab3c2db2b3aa762222?s=128&d=identicon&r=PG&f=1", "display_name": "Spr1ng", "link": "https://stackoverflow.com/users/11736261/spr1ng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1562184744, "creation_date": 1562184489, "question_id": 56877261, "link": "https://stackoverflow.com/questions/56877261/syntax-error-when-using-google-module-maps", "title": "Syntax error when using google module maps", "body": "<p>I am writing code and I need a specific time zone and I use the google maps library, I copied the code from the github, but it still gives an error. I am use Python 3.7</p>\n\n<p>I use this library for the first time.</p>\n\n<pre><code>import googlemaps\nfrom datetime import datetime\n\ngmaps = googlemaps.Client(key=('Here my API')\n# Geocoding an address\n\ngeocode_result = gmaps.geocode('1600 Amphitheatre Parkway, Mountain View, CA')\n\n\n# Request directions via public transit\nnow = datetime.now()\ndirections_result = gmaps.directions(\"Sydney Town Hall\",\n                                     \"Parramatta, NSW\",\n                                     mode=\"transit\",\n                                     departure_time=now)\n</code></pre>\n\n<p>Error:\n  line 7\n   geocode_result = gmaps.geocode('1600 Amphitheatre Parkway, Mountain \n  View, CA') SyntaxError: invalid syntax</p>\n"}, {"tags": ["python", "opencv"], "answers": [{"tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": false, "score": 1, "last_activity_date": 1562184968, "creation_date": 1562184968, "answer_id": 56877359, "question_id": 56877246, "link": "https://stackoverflow.com/questions/56877246/detecting-contours-of-white-object/56877359#56877359", "title": "detecting contours of white object", "body": "<p>Try to adjust the color range:</p>\n\n<pre><code>lower_white = np.array([0,0,180])\nhigher_white = np.array([255,255,255])\nwhite_range = cv2.inRange(hsv, lower_white, higher_white)\nplt.imshow(white_range, cmap='gray')\n</code></pre>\n\n<p>gives</p>\n\n<p><a href=\"https://i.stack.imgur.com/sz9ZN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sz9ZN.png\" alt=\"enter image description here\"></a></p>\n\n<p>Or you can filter right on <code>BGR</code> color space:</p>\n\n<pre><code>lower_white = (180,180,180)\nhigher_white = (255,255,255)\nwhite_range = cv2.inRange(rawImage, lower_white, higher_white)\n</code></pre>\n\n<p>gives</p>\n\n<p><a href=\"https://i.stack.imgur.com/4SQ3d.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4SQ3d.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 11, "user_id": 11517567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d74a630c269d7e324f712b0634f2f8?s=128&d=identicon&r=PG&f=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/11517567/developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 571, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1562184968, "creation_date": 1562184415, "last_edit_date": 1562184553, "question_id": 56877246, "link": "https://stackoverflow.com/questions/56877246/detecting-contours-of-white-object", "title": "detecting contours of white object", "body": "<p>I am trying to find the object which is painted white as shown in image attached \nI am using HSV color space to detect white color\nI am not able to get the complete object, part of the object gets detected, though whole object is painted white Image from which I am trying to detect white object:\n<img src=\"https://i.stack.imgur.com/5e1Ej.jpg\" alt=\"\"> .</p>\n\n<p>This is what I am getting, only part of the object is getting detected</p>\n\n<p><img src=\"https://i.stack.imgur.com/SuDLz.png\" alt=\"Detected Image\"></p>\n\n<p>here is code I used</p>\n\n<pre><code>import cv2\nimport numpy as np\n\nrawImage = cv2.imread('C:\\\\Users\\\\user1\\\\calibration\\\\painted2.jpg') \nhsv = cv2.cvtColor(rawImage, cv2.COLOR_BGR2HSV)\nlower_white = np.array([0,3,240])\nhigher_white = np.array([255,5,255])\n# getting the range of blue color in frame\nwhite_range = cv2.inRange(hsv, lower_white, higher_white)\ncv2.imshow(\"White\", white_range);cv2.waitKey(0);\n</code></pre>\n\n<p>Can anyone tell what is that I am doing wrong, and how can I find the complete object</p>\n"}, {"tags": ["python", "division", "zero"], "comments": [{"owner": {"reputation": 6489, "user_id": 5086255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XiEYC.jpg?s=128&g=1", "display_name": "sahasrara62", "link": "https://stackoverflow.com/users/5086255/sahasrara62"}, "edited": false, "score": 1, "creation_date": 1562184476, "post_id": 56877235, "comment_id": 100303062, "body": "without code it&#39;s hard to tell what went wrong"}], "owner": {"reputation": 51, "user_id": 11121266, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sgpjy.jpg?s=128&g=1", "display_name": "poissonrouge", "link": "https://stackoverflow.com/users/11121266/poissonrouge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 240, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1562184676, "creation_date": 1562184375, "last_edit_date": 1562184676, "question_id": 56877235, "link": "https://stackoverflow.com/questions/56877235/runtimewarning-divide-by-zero-encountered-in-true-divide", "title": "RuntimeWarning: divide by zero encountered in true_divide", "body": "<p>So basically I have values (coordinates) that evolve over time. I defined them in func() and solved them with odeint and start values. Now I'm trying to check if they fulfill the condition H=0 (H is defined in the code) at every moment, otherwise my trajectories are false. However I don't see where the error comes from, I don't understand why this doesn't work. Does anyone have an idea? In case you need more information, I'm programming light orbits around a Schwarzschild black hole. (if H\u22600, those aren't photons orbiting).</p>\n\n<p>I've tried changing the values and moving the brackets but honestly I don't really know what else to try</p>\n\n<pre><code>import numpy as np\nfrom scipy.integrate import odeint\nfrom sympy import *\nimport sympy as sp\n\n\n\n# coordinates who won't change\nptheta = 0\nrs = 2\nt0 = 0\ntheta = sp.pi/2\n\ndef func(f, T, rs):\n       # f\n       t, r, theta, phi, pt, pr, ptheta, pphi = f\n       # derivatives\n       dtdT = (1+(rs/r))*pt # 1/(1-rs/r)\n       drdT = (1-(rs/r))*pr\n       dthetadT = 0 #ptheta/(r**2)\n       dphidT = pphi/((r**2))#*(sp.sin(theta)**2))\n       dptdT = 0\n       dprdT = ((pphi**2)/(r**3))-((rs/2)/((r-rs)**2))-(((rs/2)*    (pr**2))/(r**2))\n       dpthetadT = 0 #(cos(theta)*(ptheta)**2)/((r**2)*sp.sin(phi)**3)\n       dpphidT = 0 #pphi/((r**2)*(sp.sin(theta)**2)) #0\n       return(dtdT, drdT, dthetadT, dphidT, dptdT, dprdT, dpthetadT, dpphidT)\n\n# initial conditions  \nr0 = 12*rs\nphi0 = sp.pi\npr0 = 0\npphi0 = 5 \npt0 = sqrt((((1-(rs/r0))**2)*(pr0**2)) + (pphi0**2)*(1-rs/r0)/(r0**2))\nf0=[t0, r0, theta, phi0, pt0, pr0, ptheta, pphi0]\nT = np.linspace(0, 2250, 9000)\nxx=odeint(func, f0, T, args=(rs,))\n\n# calling coordinates from odeint\nr00 = xx[:, 1]\ntheta00 = xx[:, 2]\nphi00 = xx[:, 3]\npt00 = xx[:, 4]\npr00 = xx[:, 5]\npphi00 = xx[:, 7]\n\n# hamiltonian\nH0 = -((1-rs/r00)**-1)*(pt00**2)/2 + (1-rs/r00)*(pr00**2)/2 +    (pphi00**2)/(2*(r00**2))\n\nprint(H0)\nif np.amax(H0) &lt; 6e-12:\nprint(\"Your results are correct\")\nelse:\nprint(\"Your results are wrong\")\n</code></pre>\n\n<p>I should get really small Hamilton values (x e-17 or smaller), but I keep getting n e-02 which is way too big to be correct</p>\n"}, {"tags": ["python", "plot", "wxpython", "boxsizer"], "owner": {"reputation": 77, "user_id": 11730842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dfa6b2edafa5d82729d0bd9b475b510?s=128&d=identicon&r=PG&f=1", "display_name": "Erik B.", "link": "https://stackoverflow.com/users/11730842/erik-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1562184339, "creation_date": 1562184339, "question_id": 56877229, "link": "https://stackoverflow.com/questions/56877229/how-to-put-a-plot-in-a-nested-wx-boxsizer", "title": "How to put a plot in a nested wx.boxsizer", "body": "<p>I want to make a plot within a nested boxsizer (hbox in vbox), so i can use a plot inside my panel (not like the matplotlib, which seems to use it's own panel). if i try to run my code it simply doesn't show/draw the canvas.</p>\n\n<p>I tried to put the plot into the vboxMain and it works, as soon as i put the canvas into the hbox it doesn't.</p>\n\n<pre><code>import wx\nfrom wx.lib.plot import PolyLine, PlotCanvas, PlotGraphics\n\ndef drawBarGraph():\n    points=[(1,0), (3,10)]\n    line = PolyLine(points)\n    return PlotGraphics([line])\n\nclass MyFrame(wx.Frame):\n    def __init__(self,parent,title):\n        wx.Frame.__init__(self, parent, title = title, size = (400,400))\n        self.panel = wx.Panel(self)\n\n        #building layout\n        self.vboxMain = wx.BoxSizer(wx.VERTICAL)\n        hboxContent = wx.BoxSizer(wx.HORIZONTAL)\n\n        #canvas\n        canvas = PlotCanvas(self.panel)\n        canvas.Draw(drawBarGraph())\n\n        #add everything together\n        hboxContent.Add(canvas,1, wx.EXPAND)\n        self.vboxMain.Add(hboxContent)\n        self.panel.SetSizer(self.vboxMain)\n        self.panel.Layout()\n        self.Show(True)\n\napp = wx.App(False)\nframe = MyFrame(None, 'TestApp')\napp.MainLoop()\n</code></pre>\n\n<p>I want to show the canvas in my hbox</p>\n"}, {"tags": ["python", "sqlite", "tkinter", "delete-row"], "comments": [{"owner": {"reputation": 18119, "user_id": 9284423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zakui.png?s=128&g=1", "display_name": "Henry Yik", "link": "https://stackoverflow.com/users/9284423/henry-yik"}, "edited": false, "score": 0, "creation_date": 1562205089, "post_id": 56877228, "comment_id": 100307888, "body": "The error clearly told you that <code>Application</code>, which inherits from <code>tk.Frame</code>, has no attribute <code>get_children</code> which is a method available to <code>ttk.Treeview</code> only. You need to call the method on the treeview widget."}, {"owner": {"reputation": 63, "user_id": 9804652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cf052325850ff0a749b94b363951b6e?s=128&d=identicon&r=PG&f=1", "display_name": "abdulbasit", "link": "https://stackoverflow.com/users/9804652/abdulbasit"}, "reply_to_user": {"reputation": 18119, "user_id": 9284423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zakui.png?s=128&g=1", "display_name": "Henry Yik", "link": "https://stackoverflow.com/users/9284423/henry-yik"}, "edited": false, "score": 0, "creation_date": 1562253252, "post_id": 56877228, "comment_id": 100328263, "body": "okay. But iam not getting where to call the function in the code. Can you elaborate a bit more ?"}], "owner": {"reputation": 63, "user_id": 9804652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cf052325850ff0a749b94b363951b6e?s=128&d=identicon&r=PG&f=1", "display_name": "abdulbasit", "link": "https://stackoverflow.com/users/9804652/abdulbasit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 328, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1562254531, "creation_date": 1562184334, "question_id": 56877228, "link": "https://stackoverflow.com/questions/56877228/deleting-a-row-in-tkinter-gui-table", "title": "Deleting a row in Tkinter GUI Table", "body": "<p>I am working on a Smart Shopping Cart. In this project, I have interfaced an RFID reader with a Raspberry pi. The RFID reader reads the tag and displays the value on a table in the GUI made by tkinter. Now i want to delete a row entry from the GUI table with the help of a button. </p>\n\n<p>I have tried several codes. However the delete function (remove_all(self)) that iam using now seems more relevant but shows an attribute error. iam attaching my code and the error. Any help is appreciated</p>\n\n<pre><code>from Tkinter import *\nimport ttk\nimport sqlite3\n\nimport signal\nimport time\nimport sys\nfrom pirc522 import RFID\n\n\nclass Item(object): \n    def __init__(self, unq_id, name, qty, price):\n        self.unq_id = unq_id\n        self.product_name = name\n        self.price = price\n        self.qty = qty\n\n\n\nclass Cart(object):\n    def __init__(self, master=None):\n        self.content = dict()\n        self.tree= ttk.Treeview(root, column=(\"column1\", \"column2\", \"column3\",\"column4\"), show='headings')\n        self.tree.heading(\"#1\", text=\"ITEM ID\")\n        self.tree.column(\"#1\", anchor = \"center\", width=135)\n        self.tree.heading(\"#2\", text=\"ITEM NAME\")\n        self.tree.column(\"#2\", anchor = \"center\", width=135)                 \n        self.tree.heading(\"#3\", text=\"QUANTITY\")\n        self.tree.column(\"#3\", anchor = \"center\", width=135)                 \n        self.tree.heading(\"#4\", text=\"PRICE(Rs)\")\n        self.tree.column(\"#4\", anchor = \"center\", width=135) \n        self.tree.pack()\n\n\n\ndef update(self, unq_id,product_name,price):\n\n    if unq_id not in self.content:\n        item = Item(unq_id,product_name,1,price)  \n        treeRow=(item.unq_id,item.product_name,item.qty,item.price)#tuple      \n        self.tree.insert(\"\", END, values=treeRow)\n    else:\n        #Already exists\n        item = self.content.get(unq_id)\n        for index in self.tree.get_children():\n            if unq_id == self.tree.item(index)['values'][0]:\n                x = index\n        item.qty=item.qty+1\n        treeRow=(item.unq_id,item.product_name,item.qty,item.price)\n        self.tree.item(x, values = treeRow)\n\n    self.content.update({item.unq_id: item})\n    return\n\ndef get_total(self):\n    return sum([v.price * v.qty for _, v in self.content.iteritems()])\n\ndef get_num_items(self):\n    return sum([v.qty for _, v in self.content.iteritems()])\n\ndef remove_item(self, key):\n    self.content.pop(key)\n\ndef get_item(self, key):\n    return self.content.get(key)\n\n\nclass Application(Frame):\n\n    def __init__(self, master=None):\n            self.database = \"smartShoppingCart.db\"        \n            Frame.__init__(self, master)\n            self.v = StringVar()\n\n            self.cart = Cart(master)\n            self.pack()\n\n\n        conn = sqlite3.connect(self.database)\n        cur = conn.cursor()\n        cur.execute(\"CREATE TABLE IF NOT EXISTS profile(id INTEGER PRIMARY KEY, Name TEXT, Qty INT, Price REAL, rfidTag INT)\")\n        #below test case ...will be removed later\n        #cur.execute(\"INSERT INTO profile(id,Name,Qty,Price,rfidTag) VALUES (1, 'Banana', 1, 2., 230)\")\n        #cur.execute(\"INSERT INTO profile(id,Name,Qty,Price,rfidTag) VALUES (2, 'Eggs', 2, 5., 131)\")\n        #cur.execute(\"INSERT INTO profile(id,Name,Qty,Price,rfidTag) VALUES (3, 'Donut', 3, 1., 128)\")\n        #above test case ...will be removed later\n        conn.commit()\n        conn.close()\n        Label(root, anchor=W, fg=\"green\", justify=RIGHT, font=(\"Helvetica\", 16), text=\"Total\").pack(side = LEFT)\n        btn = Button(root, anchor=W, justify=CENTER, font=(\"Helvetica\", 12), text=\"Delete\", command =remove_all(self) )\n        btn.pack()\n        Label(root, anchor=W, fg=\"red\", justify=RIGHT, font=(\"Helvetica\", 16), textvariable=self.v).pack(side = RIGHT)\n        self.v.set(\"0.0\")\n\n\n\n    def insertItemToCart(self, rfidTag):\n        #fetch data from database\n        string =\"SELECT * FROM profile WHERE rfidTag = \"+str(rfidTag)\n        conn = sqlite3.connect(self.database)\n        cur = conn.cursor()\n        cur.execute(string)\n        rows = cur.fetchall()\n        row = rows[0]\n        conn.close()\n        #update cart\n        unq_id=row[4]\n        name=row[1]\n        price=row[3] \n\n        self.cart.update(unq_id, name, price)\n\ndef remove_all(self):\n    x = self.get_children()\n    print('get children values: ',x,'\\n')\n    if x!= '()':\n        for child in x:\n            self.delete(child)\n\n\ndef end_read(signal,frame):\n    global run\n    print(\"\\nCtrl+C captured, ending read.\")\n    run = False\n    rdr.cleanup()\n    sys.exit()\nsignal.signal(signal.SIGINT, end_read)\n\n\nrun = True\nrdr = RFID()\nroot = Tk()\nroot.geometry(\"800x300\")\napp = Application(master=root)\napp.master.title('Smart shopping cart')\n\nprint(\"Starting\")\nwhile run:\n    app.update_idletasks()\n    app.update()\n    rdr.wait_for_tag()\n    (error, data) = rdr.request()                \n    if not error:\n        print(\"\\nDetected: \" + format(data, \"02x\"))\n    (error, uid) = rdr.anticoll()\n    if not error:\n        print(\"Card read UID: \"+str(uid[0])+\",\"+str(uid[1])+\",\"+str(uid[2])+\",\"+str(uid[3]))\n        time.sleep(1)\n        print(uid[0])   \n        app.insertItemToCart(uid[0])\n        app.v.set(str(app.cart.get_total()))\n    print \"You have %i items in your cart for a total of $%.02f\" % (app.cart.get_num_items(), app.cart.get_total())\nroot.destroy()\n</code></pre>\n\n<p>This is the error that shows up in the shell    </p>\n\n<pre><code>Warning (from warnings module):\n  File \"/usr/local/lib/python2.7/dist-packages/pi_rc522-2.2.1-py2.7.egg/pirc522/rfid.py\", line 78\nRuntimeWarning: This channel is already in use, continuing anyway.  Use GPIO.setwarnings(False) to disable warnings.\n\nTraceback (most recent call last):\n  File \"/home/pi/Desktop/guitest.py\", line 133, in &lt;module&gt;\n    app = Application(master=root)\n  File \"/home/pi/Desktop/guitest.py\", line 89, in __init__\n    btn = Button(root, anchor=W, justify=CENTER, font=(\"Helvetica\", 12), text=\"Delete\", command =remove_all(self) )\n  File \"/home/pi/Desktop/guitest.py\", line 113, in remove_all\n    x = self.get_children()\nAttributeError: Application instance has no attribute 'get_children'\n</code></pre>\n"}, {"tags": ["python", "web", "beautifulsoup"], "answers": [{"tags": [], "owner": {"reputation": 812, "user_id": 6288413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bLBoc.jpg?s=128&g=1", "display_name": "zmike", "link": "https://stackoverflow.com/users/6288413/zmike"}, "is_accepted": false, "score": 0, "last_activity_date": 1562184761, "creation_date": 1562184761, "answer_id": 56877312, "question_id": 56877224, "link": "https://stackoverflow.com/questions/56877224/how-do-i-collect-elements-with-beautiful-soup/56877312#56877312", "title": "How do I collect elements with Beautiful Soup?", "body": "<p>You are missing the <code>requests</code> package and you are not doing anything with the results.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from bs4 import BeautifulSoup\nimport requests\n\nurl = requests.get(\"https://www.rt.com/\")\n\nprint(url.status_code)\n\nsoup = BeautifulSoup(url.content, 'html.parser')\n\ndivs = soup.find_all('div') # save results to a variable\n\n# Print the text inside each div (example of how to use the results)\nfor div in divs:\n    print(div.text)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 422, "user_id": 1027492, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/TZ1Po.jpg?s=128&g=1", "display_name": "biomaks", "link": "https://stackoverflow.com/users/1027492/biomaks"}, "is_accepted": false, "score": 0, "last_activity_date": 1562186234, "creation_date": 1562186234, "answer_id": 56877604, "question_id": 56877224, "link": "https://stackoverflow.com/questions/56877224/how-do-i-collect-elements-with-beautiful-soup/56877604#56877604", "title": "How do I collect elements with Beautiful Soup?", "body": "<p>First of all your code doesn't work at this moment as you forgot to import requests package. So once you import the package it will work. </p>\n\n<p>Secondly I would recommend to read BeautifulSoup <a href=\"https://www.crummy.com/software/BeautifulSoup/bs4/doc/\" rel=\"nofollow noreferrer\">docs</a> thoroughly. It has all answers you need. So if you need all anchors on that page just assign them to a variable like here:</p>\n\n<pre><code> elems = soup.find_all('a')\n</code></pre>\n\n<p>after that you can work with it as with set of results, so if you need to extract links from anchor elements you can do following:</p>\n\n<pre><code>for link in elems:\n    print(link.get('href'))\n\n# http://example.com/elsie\n# http://example.com/lacie\n# http://example.com/tillie\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 11200612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xcqwd.jpg?s=128&g=1", "display_name": "Babydoll", "link": "https://stackoverflow.com/users/11200612/babydoll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1562186234, "creation_date": 1562184328, "question_id": 56877224, "link": "https://stackoverflow.com/questions/56877224/how-do-i-collect-elements-with-beautiful-soup", "title": "How do I collect elements with Beautiful Soup?", "body": "<p>I'm trying to make a web scraper with beautiful soup but every time I try scrape the website I dont get anything back. In the following code I use requests to fetch the website then I  put it into the beautiful soup object. After that I try to scrape for all the  tags.</p>\n\n<p>Ive tried watching youtube tutorials and looked at the documentation for the framework but i just dont understand how to use it.</p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport bs4\nimport urllib\n\nurl = requests.get(\"https://www.rt.com/\")\n\nprint(url.status_code)\n\nsoup = BeautifulSoup(url.content, 'html.parser')\n\nsoup.find_all('div')\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe", "pivot-table", "recommender-systems"], "comments": [{"owner": {"reputation": 2412, "user_id": 11135962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mXBpl.jpg?s=128&g=1", "display_name": "Junkrat", "link": "https://stackoverflow.com/users/11135962/junkrat"}, "edited": false, "score": 0, "creation_date": 1562184311, "post_id": 56877209, "comment_id": 100303009, "body": "Check this out: <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.pivot.html\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/stable/reference/api/&hellip;</a>"}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 1, "creation_date": 1562184311, "post_id": 56877209, "comment_id": 100303010, "body": "<code>df.pivot(index=&#39;User&#39;,columns=&#39;Item&#39;,values=&#39;Ratings&#39;)</code>"}, {"owner": {"reputation": 27, "user_id": 11362280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b357ae00e518f8755c85dc2fb8378069?s=128&d=identicon&r=PG&f=1", "display_name": "Christina", "link": "https://stackoverflow.com/users/11362280/christina"}, "reply_to_user": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1562184637, "post_id": 56877209, "comment_id": 100303107, "body": "@QuangHoang It doesn&#39;t run...There is a message error: &quot;No numeric types to aggregate&quot;"}, {"owner": {"reputation": 27, "user_id": 11362280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b357ae00e518f8755c85dc2fb8378069?s=128&d=identicon&r=PG&f=1", "display_name": "Christina", "link": "https://stackoverflow.com/users/11362280/christina"}, "reply_to_user": {"reputation": 2412, "user_id": 11135962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mXBpl.jpg?s=128&g=1", "display_name": "Junkrat", "link": "https://stackoverflow.com/users/11135962/junkrat"}, "edited": false, "score": 0, "creation_date": 1562186399, "post_id": 56877209, "comment_id": 100303808, "body": "@Junkrat I have already checked it out but i didn&#39;t find the answer"}, {"owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "edited": false, "score": 0, "creation_date": 1562186637, "post_id": 56877209, "comment_id": 100303894, "body": "With your example dataset, this gives me the correct result <code>df.pivot(index=&#39;User&#39;, columns=&#39;Item&#39;)</code>. For that error do the following first <code>df[&#39;Ratings&#39;] = pd.to_numeric(df[&#39;Ratings&#39;])</code>"}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1562187856, "post_id": 56877209, "comment_id": 100304351, "body": "Another way that does not require numeric data: <code>df.set_index([&#39;User&#39;, &#39;Item&#39;]).Ratings.unstack(level=-1)</code>."}, {"owner": {"reputation": 27, "user_id": 11362280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b357ae00e518f8755c85dc2fb8378069?s=128&d=identicon&r=PG&f=1", "display_name": "Christina", "link": "https://stackoverflow.com/users/11362280/christina"}, "reply_to_user": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1562229064, "post_id": 56877209, "comment_id": 100314924, "body": "@QuangHoang Therefore, there is no need for using df.pivot or df.pivot_table?"}], "owner": {"reputation": 27, "user_id": 11362280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b357ae00e518f8755c85dc2fb8378069?s=128&d=identicon&r=PG&f=1", "display_name": "Christina", "link": "https://stackoverflow.com/users/11362280/christina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 1, "closed_date": 1562184348, "answer_count": 0, "score": 1, "last_activity_date": 1562232656, "creation_date": 1562184229, "last_edit_date": 1562232656, "question_id": 56877209, "link": "https://stackoverflow.com/questions/56877209/how-to-convert-a-dataframe-into-a-pivot-table", "closed_reason": "Duplicate", "title": "How to convert a Dataframe into a pivot table", "body": "<p>I want to create a pivot table with users(rows), items(columns) and ratings (values). There are users that have rated many different items. I extract the data from a json file and when creating the pivot, I don't want to aggregate them. </p>\n\n<pre><code>import pandas as pd\nwith open('data.json', 'r') as file:\n    lines = file.readlines()\n    for line in lines:\n    user = splitted[0]\n    ratings = splitted[1]\n    item = splitted[4]\n    users.append(user)\n    items.append(item)\n    ratings.append(ratings)\n\ndf = pd.DataFrame({'Users': users,\n                    'Items': items,\n                    'Ratings': ratings})\n</code></pre>\n\n<p>The output of the dataframe is:</p>\n\n<pre><code>User  Item  Ratings\n\nanna   A    2\n\nanna   B    4\n\nanna   C    3\n\nchris  A    2\n\nbob    D    1\n</code></pre>\n\n<p>And i want my pivot table to be like this:</p>\n\n<pre><code>       A  B  C  D\n\nanna   2  4  3  -\nchris  2  -  -  -\nbob    -  -  -  1\n</code></pre>\n\n<p>When I run this, there is an error: \"no numeric types to aggregate\"</p>\n\n<pre><code>pivot = df.pivot_table(values = 'Ratings', index = 'Users', columns = 'Items')\n</code></pre>\n\n<p>And when running this, the error is: \"index 502966764 is out of bounds for axis 0 with size 502966644\"</p>\n\n<pre><code>pivot = df.pivot(values = 'Ratings', index = 'Users', columns = 'Items')\n</code></pre>\n\n<p>Could you give me any idea? Thank you in advance!</p>\n"}, {"tags": ["python", "beautifulsoup"], "comments": [{"owner": {"reputation": 1614, "user_id": 10852841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe7a38cc20a4dc6159ee347bf6c19fdf?s=128&d=identicon&r=PG&f=1", "display_name": "HS-nebula", "link": "https://stackoverflow.com/users/10852841/hs-nebula"}, "edited": false, "score": 0, "creation_date": 1562184321, "post_id": 56877173, "comment_id": 100303015, "body": "<code>item.get(&#39;id&#39;)</code>?"}, {"owner": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "edited": false, "score": 1, "creation_date": 1562184707, "post_id": 56877173, "comment_id": 100303122, "body": "Yep, if condition is &quot;ID starts <b>with</b> &#39;entry&#39;&quot; <code>urls = [item for item in soup.select(&#39;h4 a&#39;) if item.get(&quot;id&quot;, &quot;&quot;)[:6] == &quot;entry_&quot;]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 53073, "user_id": 16148, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/XTzm1.jpg?s=128&g=1", "display_name": "Corey Goldberg", "link": "https://stackoverflow.com/users/16148/corey-goldberg"}, "edited": false, "score": 0, "creation_date": 1562189362, "post_id": 56877494, "comment_id": 100304892, "body": "now you have 2 problems"}, {"owner": {"reputation": 3652, "user_id": 5298150, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dWo_GtNBONQ/AAAAAAAAAAI/AAAAAAAABGQ/Sg_HcSmvfpk/photo.jpg?sz=128", "display_name": "abdusco", "link": "https://stackoverflow.com/users/5298150/abdusco"}, "reply_to_user": {"reputation": 53073, "user_id": 16148, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/XTzm1.jpg?s=128&g=1", "display_name": "Corey Goldberg", "link": "https://stackoverflow.com/users/16148/corey-goldberg"}, "edited": false, "score": 0, "creation_date": 1562189515, "post_id": 56877494, "comment_id": 100304954, "body": "True, but I think it&#39;s ok for one off solutions. Also it&#39;s an official/recommended way of selecting nodes <a href=\"https://www.crummy.com/software/BeautifulSoup/bs4/doc/#a-regular-expression\" rel=\"nofollow noreferrer\">crummy.com/software/BeautifulSoup/bs4/doc/#a-regular-express&zwnj;&#8203;ion</a>"}], "tags": [], "owner": {"reputation": 3652, "user_id": 5298150, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dWo_GtNBONQ/AAAAAAAAAAI/AAAAAAAABGQ/Sg_HcSmvfpk/photo.jpg?sz=128", "display_name": "abdusco", "link": "https://stackoverflow.com/users/5298150/abdusco"}, "is_accepted": true, "score": 3, "last_activity_date": 1562185581, "creation_date": 1562185581, "answer_id": 56877494, "question_id": 56877173, "link": "https://stackoverflow.com/questions/56877173/extracting-an-element-whose-id-starts-with-a-certain-string-using-beautifulsoup/56877494#56877494", "title": "Extracting an element whose id starts with a certain string using BeautifulSoup in python", "body": "<p>Use <code>re</code> module together with <code>id</code>.<br>\nHere's how:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from bs4 import BeautifulSoup\nimport re\n\nif __name__ == \"__main__\":\n    html = '&lt;a href=\"http://www.sampleurl.com/static/welcome\" id=\"entry_1\"&gt;Lamborghini &lt;/a&gt;'\n    soup = BeautifulSoup(html, 'html.parser')\n\n    print(soup.find('a', id=re.compile('^entry_')))\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>&lt;a href=\"http://www.sampleurl.com/static/welcome\" id=\"entry_1\"&gt;Lamborghini &lt;/a&gt;\n</code></pre>\n"}], "owner": {"reputation": 1115, "user_id": 7692855, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/69900162929289ad3ce2360bcf9af08a?s=128&d=identicon&r=PG&f=1", "display_name": "user7692855", "link": "https://stackoverflow.com/users/7692855/user7692855"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 0, "closed_date": 1562213386, "accepted_answer_id": 56877494, "answer_count": 1, "score": 2, "last_activity_date": 1562210319, "creation_date": 1562184015, "last_edit_date": 1562210319, "question_id": 56877173, "link": "https://stackoverflow.com/questions/56877173/extracting-an-element-whose-id-starts-with-a-certain-string-using-beautifulsoup", "closed_reason": "Duplicate", "title": "Extracting an element whose id starts with a certain string using BeautifulSoup in python", "body": "<p>I am trying to do some web scraping with BS4. </p>\n\n<p>So far I have extracted the <code>&lt;a&gt;</code> using</p>\n\n<pre><code>urls = [item for item in soup.select('h4 a')]\n</code></pre>\n\n<p>However, I only want to have the urls where the ID starts which entry.</p>\n\n<pre><code>&lt;a href=\"http://www.sampleurl.com/static/welcome\" id=\"entry_1\"&gt;Lamborghini &lt;/a&gt;\n</code></pre>\n\n<p>I have tried <code>item.id</code> but it does not work. </p>\n\n<p>What am I missing?</p>\n"}, {"tags": ["python", "logging", "celery"], "comments": [{"owner": {"reputation": 3465, "user_id": 803194, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/517b0b537f276b8dcf84c55ed078035a?s=128&d=identicon&r=PG", "display_name": "blues", "link": "https://stackoverflow.com/users/803194/blues"}, "edited": false, "score": 0, "creation_date": 1562186738, "post_id": 56877165, "comment_id": 100303937, "body": "Just calling <code>logging.info</code> on the module level with no added arguments logs with the root logger to a default StreamHandler. If you want to catch that log you need to attach some handler that stores the message somewhere to the root logger. <code>MemoryHandler</code> for example, or write them to a file."}, {"owner": {"reputation": 2874, "user_id": 4720244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecbf3e87a6491f609f81b93e438282db?s=128&d=identicon&r=PG&f=1", "display_name": "EJAg", "link": "https://stackoverflow.com/users/4720244/ejag"}, "edited": false, "score": 0, "creation_date": 1562187393, "post_id": 56877165, "comment_id": 100304189, "body": "What&#39;s the error you&#39;re facing?"}, {"owner": {"reputation": 15566, "user_id": 876497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2713233cc2e49a4db53ff08d6c114255?s=128&d=identicon&r=PG", "display_name": "DejanLekic", "link": "https://stackoverflow.com/users/876497/dejanlekic"}, "edited": false, "score": 0, "creation_date": 1562245910, "post_id": 56877165, "comment_id": 100324399, "body": "So... you are using the logging framework to pass information to your scheduler... While doable I advise against it. Rather write your progress update to a message queue and that way you will inform the scheduler (or whatever service is on the other end) of the updates."}], "owner": {"reputation": 1172, "user_id": 6106484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/584ee637fa0e35fdc7688569a62ef30d?s=128&d=identicon&r=PG&f=1", "display_name": "Aida", "link": "https://stackoverflow.com/users/6106484/aida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1562185893, "creation_date": 1562183969, "last_edit_date": 1562185893, "question_id": 56877165, "link": "https://stackoverflow.com/questions/56877165/python-celery-how-to-read-logging-info-logged-by-other-modules", "title": "Python-Celery: How to read logging info logged by other modules", "body": "<p>I have a celery task, <code>operation</code>, as below:</p>\n\n<pre><code># tasks.py\n\n@app.task(bind=True, name='operation')\ndef operation(self, request):\n    custom_library = CustomLibrary()\n    res = custom_library.foo(request)\n    return res\n</code></pre>\n\n<p>as shown in the code snippet above, the celery task calls a custom library function <code>custom_library.foo()</code>. The function <code>foo()</code> uses Python <code>logging</code> to log some info such as percentage of progress in format of, for example, <code>\"PROGRESS %58\"</code>:</p>\n\n<pre><code># custom_library.py\n\nclass CustomLibrary:\n    # __init__() and all other methods are removed here for readability\n    def foo(request):\n         # There were some things being done here that are removed for readability\n         logging.info(\"PROGRESS %58\") # This is just an example. The progress is updated dynamically.\n\n</code></pre>\n\n<p>The Celery task is called by <code>manage()</code> function in another module as below:</p>\n\n<pre><code>   # scheduler.py\n\n   def manage(request):\n       operation.s(request).apply_async()\n\n   def get_logging_info():\n       # get all info from Python logging and return\n\n</code></pre>\n\n<p>Now, I would like to have a <code>get_logging_info()</code> function that is able to have access to the <code>PROGRESS</code> info that is logged by the <code>custom_library.foo()</code> function.</p>\n\n<p>Any help would be appreciated!</p>\n"}, {"tags": ["python", "opencv", "matchtemplate"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 11735796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38c4a4fe47a81d39f56f40d6ef854551?s=128&d=identicon&r=PG&f=1", "display_name": "mtu", "link": "https://stackoverflow.com/users/11735796/mtu"}, "is_accepted": true, "score": 0, "last_activity_date": 1562188579, "creation_date": 1562188579, "answer_id": 56878035, "question_id": 56877151, "link": "https://stackoverflow.com/questions/56877151/python-opencv-matchtemplate-with-masking-found-matches-at-all-locations/56878035#56878035", "title": "Python OpenCV matchTemplate with Masking - Found Matches at All Locations", "body": "<p>Inverting <code>img_gray</code> and <code>template</code> fixed the error.</p>\n\n<p>The comparison metric I used was <code>cv2.TM_CCORR_NORMED</code>. This works by taking the dot product of <code>img_gray</code> and <code>template</code> where the binary numpy array <code>temp_mask</code> has value <code>1</code>.</p>\n\n<p>In my sample image I wanted to match up black pixels in <code>template</code> against black pixels in <code>img_gray</code>, however the pixel value for black is <code>0</code>. Thus, the dot product at the location I wanted to detect was low.</p>\n\n<p>By inverting <code>img_gray</code> and <code>template</code> I'm matching up white pixels in <code>template</code> against white pixels in <code>img_gray</code>. Since white has pixel value <code>255</code>, the dot product of white against white, template against image, becomes high at the location I want to detect.</p>\n"}], "owner": {"reputation": 11, "user_id": 11735796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38c4a4fe47a81d39f56f40d6ef854551?s=128&d=identicon&r=PG&f=1", "display_name": "mtu", "link": "https://stackoverflow.com/users/11735796/mtu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 348, "favorite_count": 0, "accepted_answer_id": 56878035, "answer_count": 1, "score": 1, "last_activity_date": 1562188579, "creation_date": 1562183892, "question_id": 56877151, "link": "https://stackoverflow.com/questions/56877151/python-opencv-matchtemplate-with-masking-found-matches-at-all-locations", "title": "Python OpenCV matchTemplate with Masking - Found Matches at All Locations", "body": "<p><strong>Problem:</strong>\nThe results I receive from <code>matchTemplate</code> indicate that I have matches at every location with a value of <code>1.0</code>. </p>\n\n<p><strong>Expected Results</strong>:\nI expected one location in <code>results</code> to have a much higher score than others locations.</p>\n\n<p><strong>Code:</strong></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def template_match(filename=base_name,\n                   img_folder=trn_imgs_path,\n                   templates=['wet_install.png',\n                              'wet_install_cleaned.png',\n                              'wet_install_tag.png',\n                              'wet_install_tag_cleaned.png'],\n                   template_path=template_path,\n                   threshold=0.8,\n                   save_dir=save_dir):\n    ''' \n    Perform template matching on an input image using a few templates.\n    It draws bounding boxes on a copy of the original image. \n\n    Args:\n        filename (str): name of the file with the .svg extension\n        img_folder (str): path to folder containing the images\n        templates (list): list of template filenames to match against\n        template_path (str): path to folder containing the templates\n        threshold (float): the threshold for a match from template matching\n        save_dir (str): path to folder to save results\n    '''\n    print('Working on file: {}.png'.format(filename))\n\n    # load the original BGR image\n    img_rgb  = cv2.imread(img_folder + filename + '.png')[5143:5296, 15169:15368] # TODO(mtu): Don't keep these indices here!\n    img_gray = cv2.cvtColor(img_rgb, cv2.COLOR_BGR2GRAY)\n    img_gray = cv2.adaptiveThreshold(img_gray, 255, cv2.ADAPTIVE_THRESH_GAUSSIAN_C, cv2.THRESH_BINARY, 115, 1)\n\n    # loop over each template\n    colors = [(0,0,255), (0,255,0), (255,255,0), (255,0,255)]\n    for itemp in range(len(templates)):\n        template_name = templates[itemp]\n        print('Using Template: {}'.format(template_name))\n\n        # load the template as grayscale and get its width and height\n        template = cv2.imread(template_path + '{}'.format(template_name), 0)\n        height, width = template.shape[:2]\n\n        template  = cv2.adaptiveThreshold(template, 255, cv2.ADAPTIVE_THRESH_GAUSSIAN_C, cv2.THRESH_BINARY, 115, 1)\n        temp_mask = cv2.adaptiveThreshold(template, 1, cv2.ADAPTIVE_THRESH_GAUSSIAN_C, cv2.THRESH_BINARY_INV, 115, 1)\n\n        # do template matching using grayscale image and find points above theshold\n        results = cv2.matchTemplate(image=img_gray, templ=template, method=cv2.TM_CCORR_NORMED, mask=temp_mask)\n        loc = np.where(results &gt;= threshold)\n\n        # draw rectangles on points above threshold on RGB image\n        for pt in zip(*loc[::-1]):\n            cv2.rectangle(img_rgb, pt, (pt[0] + width, pt[1] + height), colors[itemp%len(colors)], 5)\n\n    # save the file with bounding boxes drawn on\n    filename = save_dir + '{}_found.png'.format(filename) \n    print('Saving bounding boxes to: {}'.format(filename))\n    cv2.imwrite(filename, img_rgb)\n</code></pre>\n\n<p><strong>Comments:</strong></p>\n\n<ul>\n<li><a href=\"https://i.stack.imgur.com/xyWRj.png\" rel=\"nofollow noreferrer\">Debug output</a> shows what <code>img_gray</code>, <code>template</code>, and <code>temp_mask</code> visually look like</li>\n<li><code>img_gray</code> is just <code>template</code> with 10 extra pixel rows of white padding on top</li>\n<li><code>template</code> and <code>temp_mask</code> are the same shape and type</li>\n<li><a href=\"https://i.stack.imgur.com/ZzY2o.png\" rel=\"nofollow noreferrer\">Saved output image</a></li>\n</ul>\n"}, {"tags": ["python", "flask", "safari", "cors", "flask-cors"], "comments": [{"owner": {"reputation": 61150, "user_id": 441757, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/921df025d1d7c99fad4553ac83bd8bdf?s=128&d=identicon&r=PG", "display_name": "sideshowbarker", "link": "https://stackoverflow.com/users/441757/sideshowbarker"}, "edited": false, "score": 0, "creation_date": 1562189634, "post_id": 56877116, "comment_id": 100304996, "body": "Please consider filing a Safari/WebKit bug report about this at <a href=\"https://bugs.webkit.org/enter_bug.cgi?product=WebKit\" rel=\"nofollow noreferrer\">bugs.webkit.org/enter_bug.cgi?product=WebKit</a>"}, {"owner": {"reputation": 323, "user_id": 7833514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/def11b39e656677f71436fb27ace3a36?s=128&d=identicon&r=PG", "display_name": "Karl Sutt", "link": "https://stackoverflow.com/users/7833514/karl-sutt"}, "reply_to_user": {"reputation": 61150, "user_id": 441757, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/921df025d1d7c99fad4553ac83bd8bdf?s=128&d=identicon&r=PG", "display_name": "sideshowbarker", "link": "https://stackoverflow.com/users/441757/sideshowbarker"}, "edited": false, "score": 0, "creation_date": 1562225622, "post_id": 56877116, "comment_id": 100313211, "body": "Thanks @sideshowbarker \u2014 I&#39;ve filed <a href=\"https://bugs.webkit.org/show_bug.cgi?id=199492\" rel=\"nofollow noreferrer\">199492</a>."}, {"owner": {"reputation": 61150, "user_id": 441757, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/921df025d1d7c99fad4553ac83bd8bdf?s=128&d=identicon&r=PG", "display_name": "sideshowbarker", "link": "https://stackoverflow.com/users/441757/sideshowbarker"}, "edited": false, "score": 0, "creation_date": 1562227147, "post_id": 56877116, "comment_id": 100313993, "body": "Thanks \u2014 I\u2019ll try to ping some WebKit friends to help get a heads-up to right engineers"}, {"owner": {"reputation": 323, "user_id": 7833514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/def11b39e656677f71436fb27ace3a36?s=128&d=identicon&r=PG", "display_name": "Karl Sutt", "link": "https://stackoverflow.com/users/7833514/karl-sutt"}, "reply_to_user": {"reputation": 61150, "user_id": 441757, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/921df025d1d7c99fad4553ac83bd8bdf?s=128&d=identicon&r=PG", "display_name": "sideshowbarker", "link": "https://stackoverflow.com/users/441757/sideshowbarker"}, "edited": false, "score": 0, "creation_date": 1562227812, "post_id": 56877116, "comment_id": 100314325, "body": "Thanks! I think I will try this with another backend, like Ruby + Sinatra or Node, to try to isolate if this really is a Safari issue or not. It really feels like \u2014 given the relative popularity of the technologies involved \u2014 this would&#39;ve been uncovered a long time ago, which makes me think I am doing something dumb."}, {"owner": {"reputation": 61150, "user_id": 441757, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/921df025d1d7c99fad4553ac83bd8bdf?s=128&d=identicon&r=PG", "display_name": "sideshowbarker", "link": "https://stackoverflow.com/users/441757/sideshowbarker"}, "edited": false, "score": 0, "creation_date": 1562228235, "post_id": 56877116, "comment_id": 100314514, "body": "It could be a new problem, or even a regression of an old problem \u2014 see for example <a href=\"https://stackoverflow.com/q/56728800/441757\">stackoverflow.com/q/56728800/441757</a> and <a href=\"https://bugs.webkit.org/show_bug.cgi?id=199183\" rel=\"nofollow noreferrer\">bugs.webkit.org/show_bug.cgi?id=199183</a>. And see <a href=\"https://bugs.webkit.org/show_bug.cgi?id=18972\" rel=\"nofollow noreferrer\">bugs.webkit.org/show_bug.cgi?id=18972</a>, which is an old bug but is interesting in that it was closed because the cause couldn\u2019t be fixed in the WebKit code anyway but was due to behavior in the platform networking code that WebKit relies on."}, {"owner": {"reputation": 61150, "user_id": 441757, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/921df025d1d7c99fad4553ac83bd8bdf?s=128&d=identicon&r=PG", "display_name": "sideshowbarker", "link": "https://stackoverflow.com/users/441757/sideshowbarker"}, "edited": false, "score": 0, "creation_date": 1562229440, "post_id": 56877116, "comment_id": 100315120, "body": "Please consider trying to see if you can reproduce this using the Fetch API rather than XHR. I strongly suspect you\u2019ll see the same behavior if you use the Fetch API but if not, that will certainly help isolate the cause."}, {"owner": {"reputation": 61150, "user_id": 441757, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/921df025d1d7c99fad4553ac83bd8bdf?s=128&d=identicon&r=PG", "display_name": "sideshowbarker", "link": "https://stackoverflow.com/users/441757/sideshowbarker"}, "edited": false, "score": 0, "creation_date": 1562229463, "post_id": 56877116, "comment_id": 100315132, "body": "(Incidentally at this point the XHR API is effectively deprecated and the Fetch API is what you probably almost always want to be using instead in all cases where you can. The only thing you can\u2019t yet do with Fetch in browsers but that you can with XHR is handling/reporting of upload progress.)"}, {"owner": {"reputation": 323, "user_id": 7833514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/def11b39e656677f71436fb27ace3a36?s=128&d=identicon&r=PG", "display_name": "Karl Sutt", "link": "https://stackoverflow.com/users/7833514/karl-sutt"}, "reply_to_user": {"reputation": 61150, "user_id": 441757, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/921df025d1d7c99fad4553ac83bd8bdf?s=128&d=identicon&r=PG", "display_name": "sideshowbarker", "link": "https://stackoverflow.com/users/441757/sideshowbarker"}, "edited": false, "score": 0, "creation_date": 1562229948, "post_id": 56877116, "comment_id": 100315396, "body": "Thanks for the suggestion \u2014 using Fetch also exhibits the same behaviour, unfortunately."}, {"owner": {"reputation": 323, "user_id": 7833514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/def11b39e656677f71436fb27ace3a36?s=128&d=identicon&r=PG", "display_name": "Karl Sutt", "link": "https://stackoverflow.com/users/7833514/karl-sutt"}, "reply_to_user": {"reputation": 61150, "user_id": 441757, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/921df025d1d7c99fad4553ac83bd8bdf?s=128&d=identicon&r=PG", "display_name": "sideshowbarker", "link": "https://stackoverflow.com/users/441757/sideshowbarker"}, "edited": false, "score": 0, "creation_date": 1562230744, "post_id": 56877116, "comment_id": 100315883, "body": "@sideshowbarker The minimal repro case in the SO question you linked to looks simpler than what I have set up \u2014 it seems like CORS does not come into play at all. And it&#39;s using Node.js as the backend, which validates that it&#39;s not a Flask/Flask-CORS issue."}, {"owner": {"reputation": 61150, "user_id": 441757, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/921df025d1d7c99fad4553ac83bd8bdf?s=128&d=identicon&r=PG", "display_name": "sideshowbarker", "link": "https://stackoverflow.com/users/441757/sideshowbarker"}, "edited": false, "score": 0, "creation_date": 1562713818, "post_id": 56877116, "comment_id": 100460751, "body": "This bug has now been fixed in the WebKit sources. See <a href=\"https://trac.webkit.org/changeset/247276/webkit\" rel=\"nofollow noreferrer\">trac.webkit.org/changeset/247276/webkit</a>. So the fix will likely be available in the next Safari Technology Preview release, and then after that, in the next Safari release \u2014 12.2 or 13, whatever version number it ends up being."}, {"owner": {"reputation": 323, "user_id": 7833514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/def11b39e656677f71436fb27ace3a36?s=128&d=identicon&r=PG", "display_name": "Karl Sutt", "link": "https://stackoverflow.com/users/7833514/karl-sutt"}, "reply_to_user": {"reputation": 61150, "user_id": 441757, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/921df025d1d7c99fad4553ac83bd8bdf?s=128&d=identicon&r=PG", "display_name": "sideshowbarker", "link": "https://stackoverflow.com/users/441757/sideshowbarker"}, "edited": false, "score": 0, "creation_date": 1562843459, "post_id": 56877116, "comment_id": 100510208, "body": "Thanks @sideshowbarker! Yep \u2014 I have been following the report and the patches. I&#39;m glad it got fixed."}], "owner": {"reputation": 323, "user_id": 7833514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/def11b39e656677f71436fb27ace3a36?s=128&d=identicon&r=PG", "display_name": "Karl Sutt", "link": "https://stackoverflow.com/users/7833514/karl-sutt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1562224424, "creation_date": 1562183736, "last_edit_date": 1562224424, "question_id": 56877116, "link": "https://stackoverflow.com/questions/56877116/flask-logs-duplicate-xhr-cors-requests-from-safari", "title": "Flask logs duplicate XHR CORS requests from Safari", "body": "<p>Firstly, I'm not sure if this is a Flask or a Safari or a Flask-CORS issue.</p>\n\n<p>In order to emulate a production setting, I have a local Flask backend (API) on one domain and a front-end (SPA) on a different domain. I initially tried this with both the API and the front-end running over HTTPS, using the same self-signed certificate, generated with <code>openssl req -x509 -newkey rsa:4096 -nodes -keyout key.pem -out cert.pem -days 365</code>. But it turns out that the behaviour described below also manifests itself when running on plain HTTP.</p>\n\n<p>Chrome and Firefox work as expected as far as I can see, but when I open the front-end with Safari and navigate around normally, Flask seemingly logs every XHR request twice. I only discovered this, because I have a Flask decorator that increments a counter in the database for specific requests and the counter always increments by 2 rather than 1, if I use Safari. </p>\n\n<p>I found some information in another <a href=\"https://stackoverflow.com/questions/5956501/safari-double-submitting-ajax-calls\">SO thread</a>, which seems to suggest that Safari is performing a conditional request. The suggestion in the thread is to set <code>If-Unmodified-Since</code> header when making the XHR request in the front-end. I tried that, and that seems to solve the problem \u2014 the first GET request seems to be replaced by an OPTIONS request, followed by a GET. If you refresh a couple of times, only the GET is performed. After a brief period of time of refreshing, it performs another OPTIONS request. However, if you don't supply <code>If-Unmodified-Since</code> and log the request headers in the Flask handler, the headers from both requests look identical.</p>\n\n<p>Also, using a different header instead of <code>If-Modified-Since</code> also seems to first fire an OPTIONS request, followed by a GET, but it doesn't prevent the double GET \u2014 another GET is fired!</p>\n\n<p>I have set up a <a href=\"https://github.com/karls/flask-safari-troubleshoot\" rel=\"nofollow noreferrer\">Github repo</a> containing a minimal example that reproduces this behaviour. It requires a bit of setup, but the instructions are outlined in the README. There is a screen recording attached as well.</p>\n\n<p>I could settle for just adding <code>If-Unmodified-Since</code> and calling it a day, but it feels a bit like brushing the whole issue under the carpet.. Why is it needed for Safari, but not other browsers?</p>\n"}, {"tags": ["python", "pandas", "function", "dataframe"], "comments": [{"owner": {"reputation": 354, "user_id": 7971276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e85c6cab20d4c1614300cc407cee18b?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/7971276/michael"}, "edited": false, "score": 1, "creation_date": 1562184831, "post_id": 56877103, "comment_id": 100303162, "body": "What does this mean?"}, {"owner": {"reputation": 2119, "user_id": 7095751, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0kkD4YDw7Gw/AAAAAAAAAAI/AAAAAAAAAEk/ZwcaKyyr9M8/photo.jpg?sz=128", "display_name": "Alexandre Juma", "link": "https://stackoverflow.com/users/7095751/alexandre-juma"}, "edited": false, "score": 1, "creation_date": 1562185228, "post_id": 56877103, "comment_id": 100303310, "body": "Are you sure your function is returning the entire set of files in each iteration? <code>os.path.splitext(file_name)[0]</code> will return the extentionless name of a single file. And this is returned by your function.. so no multiple files here. What I see in the end is that you&#39;re printing an array of returns of function <code>sections(file_name)</code>.. and there you will get, among other stuff in the return statement, the name of all the files you&#39;ve operated on. Am I right?"}, {"owner": {"reputation": 51, "user_id": 11698705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a3ddaa577ec14de0c7d6e1a722f3e1b?s=128&d=identicon&r=PG&f=1", "display_name": "Ethe99", "link": "https://stackoverflow.com/users/11698705/ethe99"}, "reply_to_user": {"reputation": 2119, "user_id": 7095751, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0kkD4YDw7Gw/AAAAAAAAAAI/AAAAAAAAAEk/ZwcaKyyr9M8/photo.jpg?sz=128", "display_name": "Alexandre Juma", "link": "https://stackoverflow.com/users/7095751/alexandre-juma"}, "edited": false, "score": 0, "creation_date": 1562190347, "post_id": 56877103, "comment_id": 100305182, "body": "@AlexandreJuma yes and now I have printed again to csv and see it works correctly - unsure of what went wrong before. thank you"}], "owner": {"reputation": 51, "user_id": 11698705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a3ddaa577ec14de0c7d6e1a722f3e1b?s=128&d=identicon&r=PG&f=1", "display_name": "Ethe99", "link": "https://stackoverflow.com/users/11698705/ethe99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1562186572, "creation_date": 1562183656, "last_edit_date": 1562186572, "question_id": 56877103, "link": "https://stackoverflow.com/questions/56877103/how-to-save-names-of-files-operated-on-in-function", "title": "How to save names of files operated on in function?", "body": "<p>I have a python function that performs operations on each text file in a folder. I want to save the name of each file operated on so that the function returns the file name along with other results.</p>\n\n<p>I tried various methods shown below.</p>\n\n<p>This gets all the file names, but for all of the files in each iteration instead of the single file being operated on.</p>\n\n<pre><code>import re, glob, os, pandas as pd\nfrom pathlib import Path\n\ndef sections(file_name):    \n\n\n    with open(file_name,'r') as f:  \n        text = f.read()\n\n        doc = textacy.preprocess.normalize_whitespace(text)\n        votes = re.findall(r\"Voting[\\s*]\\D+.+\", doc)\n        provisions = re.findall(r\"Provisions+([\\s\\S]*?)(?=authorized)\", doc)\n        name = os.path.splitext(file_name)[0]        \n\n        return name, board, votes, provisions\n\n\nfile_dir = Path(r\"path\")  \nall_files = file_dir.glob(\"*.txt\")  \nresults = [sections(f) for f in all_files]\n\nprint(results)\n</code></pre>\n\n<p>this works, but hasn't worked in function and would be better to obtain from function than combining with results.</p>\n\n<pre><code>files = [f for f in glob.glob(path + \"**/*.txt\", recursive=True)]\n\nfiles = pd.DataFrame(files)\nfiles.columns = ['file_name']\nfiles['file_name'] = files['file_name'].replace(r'.*(?=\\\\).','', regex=True) \n</code></pre>\n\n<p>When the function returns I want the file name to be included with the other variables.</p>\n"}, {"tags": ["python", "swift", "swiftsoup"], "answers": [{"tags": [], "owner": {"reputation": 386, "user_id": 11563863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R7zKe.png?s=128&g=1", "display_name": "surftijmen", "link": "https://stackoverflow.com/users/11563863/surftijmen"}, "is_accepted": true, "score": 0, "last_activity_date": 1562278020, "creation_date": 1562278020, "answer_id": 56894616, "question_id": 56877092, "link": "https://stackoverflow.com/questions/56877092/how-to-get-api-access-in-swift/56894616#56894616", "title": "How to get Api access in Swift?", "body": "<p>for people who want to know the answer:</p>\n\n<pre><code>override func viewDidLoad() {\n    super.viewDidLoad()\n\n    let headers: HTTPHeaders = [\n        \"Referer\" : \"https://www.windguru.cz/station/219\"\n    ]\n\nAlamofire.request(\"https://www.windguru.cz/int/iapi.php?q=station_data_current&amp;id_station=219&amp;date_format=Y-m-d%20H%3Ai%3As%20T&amp;_mha=f4d18b6c\", headers: headers).responseJSON { response in\n        debugPrint(response)\n    }\n</code></pre>\n"}], "owner": {"reputation": 386, "user_id": 11563863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R7zKe.png?s=128&g=1", "display_name": "surftijmen", "link": "https://stackoverflow.com/users/11563863/surftijmen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 56894616, "answer_count": 1, "score": 3, "last_activity_date": 1562278020, "creation_date": 1562183604, "question_id": 56877092, "link": "https://stackoverflow.com/questions/56877092/how-to-get-api-access-in-swift", "title": "How to get Api access in Swift?", "body": "<p>I have created a program in python where I scrape a value from a 'wind' website. Everything works OK, but I wanted to try to build the same app in Swift, but when I try to run the program, it gives this error: \"Unauthorized API access!\"</p>\n\n<p>But scraping with python works good... maybe because python uses json? can someone help me to find the mistake in my Swift code?</p>\n\n<p>This is my python WORKING code:</p>\n\n<pre><code>import requests\n\nheaders = {'Referer' : 'https://www.windguru.cz/station/219'}    \nr = requests.get('https://www.windguru.cz/int/iapi.php?    q=station_data_current&amp;id_station=219&amp;date_format=Y-m-    d%20H%3Ai%3As%20T&amp;_mha=f4d18b6c', headers = headers).json()\nprint(r)\nprint(r['wind_max'])\n</code></pre>\n\n<p>The output is the wind.</p>\n\n<p>This is my swift code:</p>\n\n<pre><code>import UIKit\nimport SwiftSoup\n\nclass ViewController: UIViewController {\n\n    @IBOutlet weak var label: UILabel!\n\n    override func viewDidLoad() {\n        super.viewDidLoad()\n\n        let myURLString = \"https://www.windguru.cz/int/iapi.php?    q=station_data_current&amp;id_station=219&amp;date_format=Y-m-    d%20H%3Ai%3As%20T&amp;_mha=f4d18b6c\"\n        guard let myURL = URL(string: myURLString) else { return }\n\n        do {\n            let myHTMLString = try String(contentsOf: myURL,     encoding: .utf8)\n            let htmlcontent = myHTMLString\n            print(myHTMLString)\n\n            do {\n                let doc = try SwiftSoup.parse(htmlcontent)\n                do {\n                    let element = try doc.select(\"title\").first()\n                }\n            }\n\n        }catch let error {\n            print(\"error: \\(error)\")\n        }\n\n    }\n</code></pre>\n\n<p>This gives the API Access error.</p>\n"}, {"tags": ["python", "python-3.x", "python-3.7"], "answers": [{"comments": [{"owner": {"reputation": 4943, "user_id": 989185, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/23f7b078442e7d98a9eb8383071d545c?s=128&d=identicon&r=PG", "display_name": "oliverbj", "link": "https://stackoverflow.com/users/989185/oliverbj"}, "edited": false, "score": 0, "creation_date": 1562184558, "post_id": 56877200, "comment_id": 100303083, "body": "I am a bit unsure about the <code>[:-1]</code> part. Doesn&#39;t that do so we start at the last item instead? I only want to check the first two lists. I need the values appended/added to my <code>row_list</code> - so how do I insert the <code>{&#39;text&#39;: &#39;&#39;, &#39;top&#39;: currentTopValue}</code> into the <code>n</code>th position in <code>row_list</code>?"}, {"owner": {"reputation": 150, "user_id": 7902334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q0JCM.jpg?s=128&g=1", "display_name": "Guaz", "link": "https://stackoverflow.com/users/7902334/guaz"}, "reply_to_user": {"reputation": 4943, "user_id": 989185, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/23f7b078442e7d98a9eb8383071d545c?s=128&d=identicon&r=PG", "display_name": "oliverbj", "link": "https://stackoverflow.com/users/989185/oliverbj"}, "edited": false, "score": 0, "creation_date": 1562186051, "post_id": 56877200, "comment_id": 100303661, "body": "No, this is <code>list_slices</code>, what means to avoid last element. Check with this example i sended for you, then try debug this with pythontutor.com or some similary visualization engine :). If you fullfill list this way, they should be ordered in begining order, to reverse u can use that construction: <code>[::-1]</code>"}, {"owner": {"reputation": 4943, "user_id": 989185, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/23f7b078442e7d98a9eb8383071d545c?s=128&d=identicon&r=PG", "display_name": "oliverbj", "link": "https://stackoverflow.com/users/989185/oliverbj"}, "edited": false, "score": 0, "creation_date": 1562186231, "post_id": 56877200, "comment_id": 100303734, "body": "Ah, got it! But still - how do I append the actual <code>n</code>th item to the <code>row_list</code>? Right now, they are added to <code>temp_row_list</code>"}, {"owner": {"reputation": 150, "user_id": 7902334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q0JCM.jpg?s=128&g=1", "display_name": "Guaz", "link": "https://stackoverflow.com/users/7902334/guaz"}, "reply_to_user": {"reputation": 4943, "user_id": 989185, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/23f7b078442e7d98a9eb8383071d545c?s=128&d=identicon&r=PG", "display_name": "oliverbj", "link": "https://stackoverflow.com/users/989185/oliverbj"}, "edited": false, "score": 0, "creation_date": 1562240427, "post_id": 56877200, "comment_id": 100321242, "body": "By index assignment you can replace value in list, if u asking about this :). For example: <code>row_list[col_no][0] = {&#39;text&#39;:&#39;&#39;, &#39;top&#39;: currentTopValue}</code> or ingore secound index if you want got list of dicts. Correct me if i understand something wrong :)"}, {"owner": {"reputation": 4943, "user_id": 989185, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/23f7b078442e7d98a9eb8383071d545c?s=128&d=identicon&r=PG", "display_name": "oliverbj", "link": "https://stackoverflow.com/users/989185/oliverbj"}, "edited": false, "score": 0, "creation_date": 1562241163, "post_id": 56877200, "comment_id": 100321640, "body": "But the value should not be replaced, a new item should be <i>inserted</i>  in the list (but at the <code>n</code>th place in the list)"}, {"owner": {"reputation": 150, "user_id": 7902334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q0JCM.jpg?s=128&g=1", "display_name": "Guaz", "link": "https://stackoverflow.com/users/7902334/guaz"}, "reply_to_user": {"reputation": 4943, "user_id": 989185, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/23f7b078442e7d98a9eb8383071d545c?s=128&d=identicon&r=PG", "display_name": "oliverbj", "link": "https://stackoverflow.com/users/989185/oliverbj"}, "edited": false, "score": 0, "creation_date": 1562243983, "post_id": 56877200, "comment_id": 100323275, "body": "Okay, I now understand, then create <code>temp_row_list  = deepcopy(row_list)</code>, iterate over <code>temp_row_list</code> with for loop, at the end, add with insert into <code>row_list</code>. Now it should work like you want :)"}, {"owner": {"reputation": 4943, "user_id": 989185, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/23f7b078442e7d98a9eb8383071d545c?s=128&d=identicon&r=PG", "display_name": "oliverbj", "link": "https://stackoverflow.com/users/989185/oliverbj"}, "edited": false, "score": 0, "creation_date": 1562244069, "post_id": 56877200, "comment_id": 100323322, "body": "Do you mind updating your answer to reflect it? I am not sure where to add it and how to use deepcopy?"}, {"owner": {"reputation": 150, "user_id": 7902334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q0JCM.jpg?s=128&g=1", "display_name": "Guaz", "link": "https://stackoverflow.com/users/7902334/guaz"}, "reply_to_user": {"reputation": 4943, "user_id": 989185, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/23f7b078442e7d98a9eb8383071d545c?s=128&d=identicon&r=PG", "display_name": "oliverbj", "link": "https://stackoverflow.com/users/989185/oliverbj"}, "edited": false, "score": 0, "creation_date": 1562604185, "post_id": 56877200, "comment_id": 100418770, "body": "<code>from copy import deepcopy; temp_row_list = deepcopy(row_list); for col_no, col in enumerate(temp_row_list[:-1]):</code> (...) so on, and insert into row_list: <code>row_list[col_no][0] = {&#39;text&#39;:&#39;&#39;, &#39;top&#39;: currentTopValue}</code>"}], "tags": [], "owner": {"reputation": 150, "user_id": 7902334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q0JCM.jpg?s=128&g=1", "display_name": "Guaz", "link": "https://stackoverflow.com/users/7902334/guaz"}, "is_accepted": false, "score": 0, "last_activity_date": 1562184168, "creation_date": 1562184168, "answer_id": 56877200, "question_id": 56877079, "link": "https://stackoverflow.com/questions/56877079/iterating-nested-list-comparing-to-other-list-items-by-looking-right-instead-of/56877200#56877200", "title": "Iterating nested list, comparing to other list items by looking right instead of down", "body": "<p>Instead of this if statement:</p>\n\n<pre><code>if col != row_list[-1]:\n</code></pre>\n\n<p>Try build your loop wisely:</p>\n\n<pre><code>for col_no, col in enumerate(row_list[:-1]):\n</code></pre>\n\n<p>And your code isn't working, becouse you inserting inside <code>row_list</code> new elements during for loop.\nThere:</p>\n\n<pre><code>            row_list.insert(0, [{'text': '', 'top': currentTopValue}])\n</code></pre>\n\n<p>Good way will be create <code>temp_row_list = []</code>\nAnd insert this data into this.</p>\n\n<p>It should work, check this:</p>\n\n<pre><code>temp_row_list = []\nfor col_no, col in enumerate(row_list[:-1]):\n    for line in col:\n        currentTopValue = line['top']\n        nextColValue = row_list[col_no + 1][0]['top']\n        if abs(currentTopValue - nextColValue) &gt;= float(10):\n            temp_row_list.append([{'text': '', 'top': currentTopValue}])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4943, "user_id": 989185, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/23f7b078442e7d98a9eb8383071d545c?s=128&d=identicon&r=PG", "display_name": "oliverbj", "link": "https://stackoverflow.com/users/989185/oliverbj"}, "edited": false, "score": 0, "creation_date": 1562186372, "post_id": 56877435, "comment_id": 100303798, "body": "But this does not insert the <code>&#39;text&#39;: &#39;&#39;, &#39;top&#39;: [...]</code> at the <code>nth</code> item. It appends to the list. As you can see in the second list in your example, it&#39;s added to the end of the list, whilst it should be at the top (because in the first list, for the first item, the <code>top</code> value is not equal to (or within the tolerance) of the first value in the 2nd (or 3rd) list."}, {"owner": {"reputation": 728, "user_id": 11647025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8f78049f82e583722b25c6a8edd7417?s=128&d=identicon&r=PG&f=1", "display_name": "crissal", "link": "https://stackoverflow.com/users/11647025/crissal"}, "reply_to_user": {"reputation": 4943, "user_id": 989185, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/23f7b078442e7d98a9eb8383071d545c?s=128&d=identicon&r=PG", "display_name": "oliverbj", "link": "https://stackoverflow.com/users/989185/oliverbj"}, "edited": false, "score": 0, "creation_date": 1562226927, "post_id": 56877435, "comment_id": 100313882, "body": "so the first item should be in first position, second in second pos, and so on? if so, this simple edit will do the work for you (instead of <code>append</code> I used <code>insert</code> at <code>counter_sublist</code> position)"}], "tags": [], "owner": {"reputation": 728, "user_id": 11647025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8f78049f82e583722b25c6a8edd7417?s=128&d=identicon&r=PG&f=1", "display_name": "crissal", "link": "https://stackoverflow.com/users/11647025/crissal"}, "is_accepted": false, "score": 0, "last_activity_date": 1562226852, "last_edit_date": 1562226852, "creation_date": 1562185331, "answer_id": 56877435, "question_id": 56877079, "link": "https://stackoverflow.com/questions/56877079/iterating-nested-list-comparing-to-other-list-items-by-looking-right-instead-of/56877435#56877435", "title": "Iterating nested list, comparing to other list items by looking right instead of down", "body": "<p>Because we are modifying sublists adding <code>dict</code>s, we want to trace who is the original element; because you're setting <code>'top'</code> attribute to <code>''</code>, we can search for the first element in sublist that contains some text.</p>\n\n<pre><code>def get_elem_for_sublist(sublist: list):\n    for elem in sublist:  # dict\n        if elem['text'] != '':\n            return elem\n    return None\n</code></pre>\n\n<p>We then can cycle over the list of lists with a specified tolerance. We can use a counter of current sublist, and at the end of the <code>while</code> loop we'll increase it by 1.</p>\n\n<p>Getting index and sublist with enumerate, we can check <code>if counter_sublist == idx</code>, getting so the <code>value_to_compare</code>, or the current difference between <code>value</code> and <code>value_to_compare</code> is bigger than <code>tolerance</code>.</p>\n\n<pre><code>def add_elems(row_list: list, tolerance: Decimal):\n    counter_sublist = 0\n\n    while counter_sublist &lt; len(row_list) - 1:\n        for idx, sublist in enumerate(row_list[counter_sublist:]):\n            actual_idx = idx + counter_sublist\n\n            value = get_elem_for_sublist(sublist)['top']  # decimal\n\n            if actual_idx == counter_sublist:  # get value to compare\n                value_to_compare = value\n            elif abs(value - value_to_compare) &gt;= tolerance:  # add dict into sublist\n                dict_to_add = {\n                    'text': '',\n                    'top': value_to_compare\n                }\n                sublist.insert(counter_sublist, dict_to_add)\n        counter_sublist += 1\n\n    return row_list\n</code></pre>\n\n<p>Output is </p>\n\n<pre><code>[\n    {'text': 'Page 1, col 1.', 'top': Decimal('83.640')}\n],\n[\n    {'text': '', 'top': Decimal('83.640')}, \n    {'text': 'Page 1, col 2.', 'top': Decimal('112.920')}\n],\n[\n    {'text': '', 'top': Decimal('83.640')}, \n    {'text': '', 'top': Decimal('112.920')}, \n    {'text': 'Page 1, col 3', 'top': Decimal('127.560')}\n]\n</code></pre>\n"}], "owner": {"reputation": 4943, "user_id": 989185, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/23f7b078442e7d98a9eb8383071d545c?s=128&d=identicon&r=PG", "display_name": "oliverbj", "link": "https://stackoverflow.com/users/989185/oliverbj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 198, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1562226852, "creation_date": 1562183515, "question_id": 56877079, "link": "https://stackoverflow.com/questions/56877079/iterating-nested-list-comparing-to-other-list-items-by-looking-right-instead-of", "title": "Iterating nested list, comparing to other list items by looking right instead of down", "body": "<p>I have below nested list called <code>row_list</code>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>[\n    [{\n        'text': 'Page 1, col 1.',\n        'top': Decimal('83.640')    \n    }],\n    [{\n        'text': 'Page 1, col 2.',\n        'top': Decimal('112.920')\n    }],\n    [{\n        'text': 'Page 1, col 3',\n        'top': Decimal('127.560'),\n    }]\n]\n</code></pre>\n\n<p>Now, I am trying to iterate this list of lists. </p>\n\n<p>However, when I iterate, I want to take each item in the <code>n</code> list, and \"look\" to the right - meaning I want to check in <em>following</em> lists (unless it's the last list), that same <code>n</code> item's value.</p>\n\n<p>For example, for the first iteration of my list, is below:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>[{\n   'text': 'Page 1, col 1.',\n   'top': Decimal('83.640')    \n}]\n</code></pre>\n\n<p>Here I want to check the <code>top</code> value of the other <code>n</code>item, in the other lists. If that top value is <strong>not</strong> the same (or within a tolerance level of 10), I want to add a new item at the same <code>n</code> place - but in the other list.</p>\n\n<p>So following the above example, the top level of <code>83.640</code> is not within the accepted range in the other two lists, so we should add an item to each:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>[\n    [{\n        'text': 'Page 1, col 1.',\n        'top': Decimal('83.640')    \n    }],\n    [{\n        'text': '', #added item\n        'top': Decimal('83.640')\n    },{\n        'text': 'Page 1, col 2.',\n        'top': Decimal('112.920')\n    }],\n    [{\n        'text': '', #added item\n        'top': Decimal('83.640')\n    },{\n        'text': 'Page 1, col 3',\n        'top': Decimal('127.560'),\n    }]\n]\n</code></pre>\n\n<p>I am trying to figure out how to look at lists from left to right instead of top to bottom. This is what I have so far:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>for col_no, col in enumerate(row_list):\n    #Don't compare the last list, as there are no more lists to compare to.\n    if col != row_list[-1]:\n        for line in col:\n            currentTopValue = line['top']\n            nextColValue = row_list[col_no + 1][0]['top']\n            if abs(currentTopValue - nextColValue) &gt;= float(10):\n                row_list.insert(0, [{'text': '', 'top': currentTopValue}])\n</code></pre>\n\n<p>As you can see, the above is rather static (hardcoded indexes). The row list can have many items within each list.</p>\n\n<p>And for some reason when I execute the code, it doesn't run (seems like it's hanging - maybe a bottleneck?)</p>\n\n<p>Can anyone guide me in the right direction?</p>\n"}, {"tags": ["python", "string", "formatting", "f-string"], "comments": [{"owner": {"reputation": 1406, "user_id": 6265630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QG6X.jpg?s=128&g=1", "display_name": "Nakor", "link": "https://stackoverflow.com/users/6265630/nakor"}, "edited": false, "score": 0, "creation_date": 1562183602, "post_id": 56877053, "comment_id": 100302727, "body": "You&#39;re sure you want to do that? Because then, if want to share your code with other people and they have a Python version lower than 3.6, then it won&#39;t work for them."}, {"owner": {"reputation": 443, "user_id": 9952406, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JXVTxlfaMvU/AAAAAAAAAAI/AAAAAAAAPyg/GaYXKPGUyOk/photo.jpg?sz=128", "display_name": "mari.mts", "link": "https://stackoverflow.com/users/9952406/mari-mts"}, "reply_to_user": {"reputation": 1406, "user_id": 6265630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QG6X.jpg?s=128&g=1", "display_name": "Nakor", "link": "https://stackoverflow.com/users/6265630/nakor"}, "edited": false, "score": 0, "creation_date": 1562184089, "post_id": 56877053, "comment_id": 100302930, "body": "@Nakor In my company Python 3.5 got deprecated, and we didn&#39;t use python 2 much (which will be deprecated in 6 months as well). But you are right, this is important to keep in mind!"}], "answers": [{"tags": [], "owner": {"reputation": 1608, "user_id": 1576254, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jq33n.png?s=128&g=1", "display_name": "ikamen", "link": "https://stackoverflow.com/users/1576254/ikamen"}, "is_accepted": true, "score": 17, "last_activity_date": 1616255873, "last_edit_date": 1616255873, "creation_date": 1562183852, "answer_id": 56877138, "question_id": 56877053, "link": "https://stackoverflow.com/questions/56877053/is-there-a-tool-to-automatically-convert-string-formatting-types-to-f-strings/56877138#56877138", "title": "Is there a tool to automatically convert string formatting types to f-strings?", "body": "<p>You can use <a href=\"https://github.com/ikamensh/flynt\" rel=\"nofollow noreferrer\">flynt</a> to convert multiple python files to use f-strings.</p>\n<p>To run it, you need a python 3.6+ interpreter. Then, its as simple as:</p>\n<pre><code>pip install flynt\nflynt [relative or absolute path to the root of your project]\n</code></pre>\n<p>Keep in mind that it will change files in place, so it is advisable to commit those to git or SVC system of your preference.</p>\n<p>Here is an article describing the pros and cons of f-strings:</p>\n<blockquote>\n<p><a href=\"https://medium.com/@ikamen/f-strings-make-your-python-code-faster-and-more-readable-today-579ef9ca0313\" rel=\"nofollow noreferrer\">https://medium.com/@ikamen/f-strings-make-your-python-code-faster-and-more-readable-today-579ef9ca0313</a></p>\n</blockquote>\n<p>Disclaimer: I am the author of flynt package.</p>\n"}, {"comments": [{"owner": {"reputation": 443, "user_id": 9952406, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JXVTxlfaMvU/AAAAAAAAAAI/AAAAAAAAPyg/GaYXKPGUyOk/photo.jpg?sz=128", "display_name": "mari.mts", "link": "https://stackoverflow.com/users/9952406/mari-mts"}, "edited": false, "score": 1, "creation_date": 1562184804, "post_id": 56877178, "comment_id": 100303151, "body": "is there a way to call it recursively on a directory? Couldn&#39;t find instructions for this."}, {"owner": {"reputation": 8761, "user_id": 1192111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/578c0836635d7d63abf64daaafb3ffa6?s=128&d=identicon&r=PG", "display_name": "Francisco C", "link": "https://stackoverflow.com/users/1192111/francisco-c"}, "reply_to_user": {"reputation": 443, "user_id": 9952406, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JXVTxlfaMvU/AAAAAAAAAAI/AAAAAAAAPyg/GaYXKPGUyOk/photo.jpg?sz=128", "display_name": "mari.mts", "link": "https://stackoverflow.com/users/9952406/mari-mts"}, "edited": false, "score": 1, "creation_date": 1562197368, "post_id": 56877178, "comment_id": 100306707, "body": "@mari.mts not on the library itself, but you can always run <code>find . -name &#39;*.py&#39; -exec pyupgrade {} \\;</code>"}, {"owner": {"reputation": 22551, "user_id": 724176, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa470aad3d456ece9ddf1a8b583b22a5?s=128&d=identicon&r=PG", "display_name": "Hugo", "link": "https://stackoverflow.com/users/724176/hugo"}, "edited": false, "score": 1, "creation_date": 1605113048, "post_id": 56877178, "comment_id": 114554062, "body": "Also <code>pyupgrade **&#47;*.py</code>"}], "tags": [], "owner": {"reputation": 8761, "user_id": 1192111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/578c0836635d7d63abf64daaafb3ffa6?s=128&d=identicon&r=PG", "display_name": "Francisco C", "link": "https://stackoverflow.com/users/1192111/francisco-c"}, "is_accepted": false, "score": 3, "last_activity_date": 1562184041, "creation_date": 1562184041, "answer_id": 56877178, "question_id": 56877053, "link": "https://stackoverflow.com/questions/56877053/is-there-a-tool-to-automatically-convert-string-formatting-types-to-f-strings/56877178#56877178", "title": "Is there a tool to automatically convert string formatting types to f-strings?", "body": "<p>It looks like <a href=\"https://github.com/asottile/pyupgrade\" rel=\"nofollow noreferrer\">pyupgrade</a> is capable of both converting <code>%</code> formatting to <code>format</code> calls, and <code>format</code> calls to f-strings</p>\n\n<blockquote>\n  <h1>printf-style string formatting</h1>\n  \n  <p>Availability:</p>\n  \n  <p>Unless <code>--keep-percent-format</code> is passed.</p>\n\n<pre><code>'%s %s' % (a, b)                  # '{} {}'.format(a, b)\n'%r %2f' % (a, b)                 # '{!r} {:2f}'.format(a, b)\n'%(a)s %(b)s' % {'a': 1, 'b': 2}  # '{a} {b}'.format(a=1, b=2)\n</code></pre>\n</blockquote>\n\n<hr>\n\n<blockquote>\n  <h1>f-strings</h1>\n  \n  <p>Availability:</p>\n  \n  <p><code>--py36-plus</code> is passed on the commandline.</p>\n\n<pre><code>'{foo} {bar}'.format(foo=foo, bar=bar)  # f'{foo} {bar}'\n'{} {}'.format(foo, bar)                # f'{foo} {bar}'\n'{} {}'.format(foo.bar, baz.womp}       # f'{foo.bar} {baz.womp}'\n</code></pre>\n</blockquote>\n\n<p>note: pyupgrade is intentionally timid and will not create an f-string if it would make the expression longer or if the substitution parameters are anything but simple names or dotted names (as this can decrease readability).</p>\n"}], "owner": {"reputation": 443, "user_id": 9952406, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JXVTxlfaMvU/AAAAAAAAAAI/AAAAAAAAPyg/GaYXKPGUyOk/photo.jpg?sz=128", "display_name": "mari.mts", "link": "https://stackoverflow.com/users/9952406/mari-mts"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1921, "favorite_count": 0, "closed_date": 1562217106, "accepted_answer_id": 56877138, "answer_count": 2, "score": 16, "last_activity_date": 1616255873, "creation_date": 1562183359, "question_id": 56877053, "link": "https://stackoverflow.com/questions/56877053/is-there-a-tool-to-automatically-convert-string-formatting-types-to-f-strings", "closed_reason": "Not suitable for this site", "title": "Is there a tool to automatically convert string formatting types to f-strings?", "body": "<p>Since python 3.6, the shortest and most performant way to format values into a string are <a href=\"https://www.python.org/dev/peps/pep-0498/\" rel=\"noreferrer\">PEP 498 f-strings</a> (e.g. <code>f'Hello {name}'</code>).</p>\n\n<p>Converting older formatting types (<code>'Hello %s' % name</code>, <code>'Hello {}'.format(name)</code> ) to the new one in an existing code base appears to be a task that could be automated, however I could not find any tool doing this. Is there a tool to automatically convert literals using old string formatting to f-strings?</p>\n"}, {"tags": ["python", "numpy", "append", "reduce"], "comments": [{"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1562183925, "post_id": 56877033, "comment_id": 100302853, "body": "What is your expected output?"}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 2, "creation_date": 1562184214, "post_id": 56877033, "comment_id": 100302971, "body": "You&#39;re looking for either <code>concatenate</code>, <code>stack</code>, or any of the derivatives."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1562185504, "post_id": 56877033, "comment_id": 100303435, "body": "<code>np.concatenate</code> takes a list of arrays as input.  <code>np.append</code> is just a poorly conceived cover function that limits you to two array.  It&#39;s written Python so you can see for yourself."}], "answers": [{"comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1562209525, "post_id": 56880094, "comment_id": 100308542, "body": "<code>np.r_</code> is another cover for <code>np.concatenate</code>, and nearly as easy to use, <code>np.concatenate([a, b, c])</code>.  In this simple case it doesn&#39;t add much."}], "tags": [], "owner": {"reputation": 1912, "user_id": 3107858, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sehuC.jpg?s=128&g=1", "display_name": "DanGoodrick", "link": "https://stackoverflow.com/users/3107858/dangoodrick"}, "is_accepted": true, "score": 0, "last_activity_date": 1562208953, "creation_date": 1562208953, "answer_id": 56880094, "question_id": 56877033, "link": "https://stackoverflow.com/questions/56877033/reduce-and-append-in-numpy/56880094#56880094", "title": "Reduce and append in Numpy", "body": "<p>np.r_[] will do this cleanly...</p>\n\n<pre><code>a = np.array([1,2,3])  \nb = np.array([11,12,13])  \nc = np.array([21,22,23])\n#below is my real code - the above is just for this example)\nnp.r_[a,b,c]\n</code></pre>\n"}], "owner": {"reputation": 1912, "user_id": 3107858, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sehuC.jpg?s=128&g=1", "display_name": "DanGoodrick", "link": "https://stackoverflow.com/users/3107858/dangoodrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 56880094, "answer_count": 1, "score": 1, "last_activity_date": 1562209009, "creation_date": 1562183266, "last_edit_date": 1562209009, "question_id": 56877033, "link": "https://stackoverflow.com/questions/56877033/reduce-and-append-in-numpy", "title": "Reduce and append in Numpy", "body": "<p>Is there a way to use reduce with numpy's append?  I want to append 3 arrays together like this:</p>\n\n<pre><code>a = np.array([1,2,3])  \nb = np.array([11,12,13])  \nc = np.array([21,22,23])\n#below is my real code - the above is just for this example)\nnp.append.reduce((a,b,c))\n</code></pre>\n\n<p>but it looks like reduce isn't implemented with append.  Thanks for any suggestions.</p>\n\n<p>The output should be:</p>\n\n<pre><code>array([ 1,  2,  3, 11, 12, 13, 21, 22, 23])\n</code></pre>\n"}, {"tags": ["python", "dictionary", "multiprocessing"], "answers": [{"tags": [], "owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": true, "score": 1, "last_activity_date": 1562183488, "creation_date": 1562183488, "answer_id": 56877072, "question_id": 56877029, "link": "https://stackoverflow.com/questions/56877029/accessing-values-in-a-dict-by-key-in-multiprocessing/56877072#56877072", "title": "Accessing values in a dict by key in multiprocessing", "body": "<p>You can use <code>get</code> to, well, get an element of a dictionary, in either version.</p>\n"}], "owner": {"reputation": 1493, "user_id": 9270181, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xIkyNI00Nh8/AAAAAAAAAAI/AAAAAAAAAfo/w0wPUt0Yb_c/photo.jpg?sz=128", "display_name": "Jacob Stern", "link": "https://stackoverflow.com/users/9270181/jacob-stern"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 56877072, "answer_count": 1, "score": 1, "last_activity_date": 1562183488, "creation_date": 1562183236, "question_id": 56877029, "link": "https://stackoverflow.com/questions/56877029/accessing-values-in-a-dict-by-key-in-multiprocessing", "title": "Accessing values in a dict by key in multiprocessing", "body": "<p>Using the multiprocessing module, I wrote a server to serve a <code>dict</code>. Now, trying to access that dict by key with a client, I get the following error (<code>server.py</code> and <code>client.py</code> are at the bottom of the post):</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"client.py\", line 19, in &lt;module&gt;\n    item = my_dict[key]\nTypeError: 'AutoProxy[get_dict]' object is not subscriptable\n</code></pre>\n\n<p>I believe this is due to the fact that the <code>dict</code> that I <code>register()</code>-ed with my <code>SyncManager</code> gets pickled and passed on as an <code>AutoProxy</code> object. When I check the methods of the AutoProxy object with <code>print(dir(my_dict))</code>, this is what I get:</p>\n\n<pre><code>['_Client', '__builtins__', '__class__', '__deepcopy__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__gt__', '__hash__', '__init__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', '_address_to_local', '_after_fork', '_authkey', '_callmethod', '_close', '_connect', '_decref', '_exposed_', '_getvalue', '_id', '_idset', '_incref', '_isauto', '_manager', '_mutex', '_serializer', '_tls', '_token', 'clear', 'copy', 'fromkeys', 'get', 'items', 'keys', 'pop', 'popitem', 'setdefault', 'update', 'values']\n</code></pre>\n\n<p>Which is different from the output of <code>print(dir(my_dict))</code> in <code>server.py</code>:</p>\n\n<pre><code>['__class__', '__contains__', '__delattr__', '__delitem__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__gt__', '__hash__', '__init__', '__iter__', '__le__', '__len__', '__lt__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__setitem__', '__sizeof__', '__str__', '__subclasshook__', 'clear', 'copy', 'fromkeys', 'get', 'items', 'keys', 'pop', 'popitem', 'setdefault', 'update', 'values']\n</code></pre>\n\n<p>It looks like this Autoproxy object retains some methods of the <code>dict</code> object, but apparently not all of them. Crucially it doesn't retain the <code>__getitem__</code> method, which prevents me from accessing items by key.</p>\n\n<p>How can I access the <code>dict</code> items by key? Also any explanation of how <code>Proxy</code>s work with Python multiprocessing would be very helpful.</p>\n\n<p>Note: I don't need to modify the <code>dict</code> values, I just need to extract them by key.</p>\n\n<p>server.py:</p>\n\n<pre><code>from multiprocessing.managers import SyncManager\n\nmy_dict = {'item_1': 1, 'item_2':2}\ndef get_my_dict():\n    return my_dict\n\nclass MyManager(SyncManager):\n    pass\n\nif __name__ == \"__main__\":\n    port_num = 4343\n    MyManager.register(\"get_dict\", get_my_dict)\n    manager = MyManager((\"127.0.0.1\", port_num), authkey=b\"password\")\n    manager.start()\n    input(\"Press any key to kill server\".center(50, \"-\"))\n    manager.shutdown\n</code></pre>\n\n<p>client.py</p>\n\n<pre><code>from multiprocessing.managers import SyncManager\nimport sys\n\nclass MyManager(SyncManager):\n    pass\n\nMyManager.register(\"get_dict\")\n\nif __name__ == \"__main__\":\n    port_num = 4343\n    manager = MyManager((\"127.0.0.1\", port_num), authkey=b\"password\")\n    manager.connect()\n    my_dict = manager.get_dict()\n\n    print(\"dict = %s\" % (dir(my_dict)))\n    keys = list(my_dict.keys())\n    print(keys)\n    for key in keys:\n        print(my_dict[key])\n</code></pre>\n"}, {"tags": ["python", "list", "matrix"], "answers": [{"tags": [], "owner": {"reputation": 13049, "user_id": 10611983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/379cd29e7f3b043f4e563fed697dcf75?s=128&d=identicon&r=PG&f=1", "display_name": "iz_", "link": "https://stackoverflow.com/users/10611983/iz"}, "is_accepted": true, "score": 3, "last_activity_date": 1562183383, "creation_date": 1562183383, "answer_id": 56877060, "question_id": 56876991, "link": "https://stackoverflow.com/questions/56876991/how-to-replace-values-in-python-nested-lists-without-saving-only-the-last-value/56877060#56877060", "title": "How to replace values in Python nested lists without saving only the last value of the iteration", "body": "<p>When you do something like:</p>\n\n<pre><code>matrix = [ [ [] * 4] * 4] * 4\n</code></pre>\n\n<p>You are actually not creating new lists with each multiplication. Instead, you are creating many references to the same underlying list. This can be seen when we simplify the example:</p>\n\n<pre><code>matrix = [[0, 0, 0]] * 3 # &lt;- Wrong!\nmatrix[0][0] = 1\nprint(matrix)\n# [[1, 0, 0], [1, 0, 0], [1, 0, 0]]\n</code></pre>\n\n<p>To fix this, use list comprehensions to properly create a new list each time:</p>\n\n<pre><code>matrix = [[[] for _ in range(4)] for _ in range(4)]\n</code></pre>\n\n<p>In your code (replacing <code>len(a) + 1</code> with <code>4</code>):</p>\n\n<pre><code>matrix = [[[] for _ in range(4)] for _ in range(4)]\nprint('pre_matrix=',matrix)\nfor m in range(4):\n    matrix[m][0] = [m]\n    print('m={}, matrix[m]={}'.format(m, matrix[m]))\nprint('post_matrix=', matrix)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>pre_matrix= [[[], [], [], []], [[], [], [], []], [[], [], [], []], [[], [], [], []]]\nm=0, matrix[m]=[[0], [], [], []]\nm=1, matrix[m]=[[1], [], [], []]\nm=2, matrix[m]=[[2], [], [], []]\nm=3, matrix[m]=[[3], [], [], []]\npost_matrix= [[[0], [], [], []], [[1], [], [], []], [[2], [], [], []], [[3], [], [], []]]\n</code></pre>\n"}], "owner": {"reputation": 318, "user_id": 5868240, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aKzAxbN-H7E/AAAAAAAAAAI/AAAAAAAAAPg/BeK8UpV9drk/photo.jpg?sz=128", "display_name": "Yuna Luzi", "link": "https://stackoverflow.com/users/5868240/yuna-luzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "closed_date": 1562183461, "accepted_answer_id": 56877060, "answer_count": 1, "score": 3, "last_activity_date": 1562183383, "creation_date": 1562183062, "question_id": 56876991, "link": "https://stackoverflow.com/questions/56876991/how-to-replace-values-in-python-nested-lists-without-saving-only-the-last-value", "closed_reason": "Duplicate", "title": "How to replace values in Python nested lists without saving only the last value of the iteration", "body": "<p>I am trying to add/replace an i element on the i-th list of a list, however, only the last iteration is saved. It would be great to understand why this happens and what a workaround this would be. I'm interested in an output that looks like this: <code>[[[0], [], [], []], [[1], [], [], []], [[2], [], [], []], [[3], [], [], []]]</code>, but instead I get this: <code>[[[3], [], [], []], [[3], [], [], []], [[3], [], [], []], [[3], [], [], []]]</code></p>\n\n<pre><code>matrix = [ [ [] * 4] * 4] * 4\nprint('pre_matrix=',matrix)\nfor m in range(len(a) + 1):\n    matrix[m][0] = [m]\n    print('m={}, matrix[m]={}'.format(m, matrix[m]))\nprint('post_matrix=', matrix)\n\n# This is what the response looks like:\n# pre_matrix= [[[], [], [], []], \n# [[], [], [], []], \n# [[], [], [], []], \n# [[], [], [], []]]\n#\n# m=0, matrix[m]=[[0], [], [], []]\n# m=1, matrix[m]=[[1], [], [], []]\n# m=2, matrix[m]=[[2], [], [], []]\n# m=3, matrix[m]=[[3], [], [], []]\n#\n# post_matrix= [[[3], [], [], []], \n# [[3], [], [], []], \n# [[3], [], [], []], \n# [[3], [], [], []]]\n</code></pre>\n"}, {"tags": ["python", "amazon-web-services", "amazon-sagemaker"], "answers": [{"tags": [], "owner": {"reputation": 2233, "user_id": 5331834, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153673777846460/picture?type=large", "display_name": "Olivier Cruchant", "link": "https://stackoverflow.com/users/5331834/olivier-cruchant"}, "is_accepted": false, "score": 2, "last_activity_date": 1562184421, "creation_date": 1562184421, "answer_id": 56877248, "question_id": 56876981, "link": "https://stackoverflow.com/questions/56876981/is-there-a-way-to-export-or-view-a-classifier-created-in-sagemaker-so-that-we-ca/56877248#56877248", "title": "Is there a way to export or view a classifier created in sagemaker so that we can see what weights/constants are used in model evaluation", "body": "<p>You can open the model artifact with mxnet and view the weights and the bias - see code below, pasted <a href=\"https://forums.aws.amazon.com/message.jspa?messageID=827236\" rel=\"nofollow noreferrer\">from this forum post</a></p>\n\n<pre><code>import os\nimport mxnet as mx\nimport boto3\n\nbucket = \"&lt;your_bucket\"\nkey = \"&lt;your_model_prefix&gt;\"\nboto3.resource('s3').Bucket(bucket).download_file(key, 'model.tar.gz')\n\nos.system('tar -zxvf model.tar.gz')\n\n# Linear learner model is itself a zip file, containing a mxnet model and other metadata.\n# First unzip the model.\nos.system('unzip model_algo-1') \n\n# Load the mxnet module\nmod = mx.module.Module.load(\"mx-mod\", 0)\n\n# model's weights\nmod._arg_params['fc0_weight'].asnumpy().flatten()\n\n# model bias\nmod._arg_params['fc0_bias'].asnumpy().flatten()\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 5511401, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Bi0wJndKCTo/AAAAAAAAAAI/AAAAAAAAAKc/aXS8A66l3vg/photo.jpg?sz=128", "display_name": "A. Nigam", "link": "https://stackoverflow.com/users/5511401/a-nigam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1562184421, "creation_date": 1562183015, "question_id": 56876981, "link": "https://stackoverflow.com/questions/56876981/is-there-a-way-to-export-or-view-a-classifier-created-in-sagemaker-so-that-we-ca", "title": "Is there a way to export or view a classifier created in sagemaker so that we can see what weights/constants are used in model evaluation", "body": "<p>I created a simple linear learner model using sagemaker, and although I can deploy it on a test data set, I would like to be able to get the actual equation that the model uses to classify values (ie for linear regression the equation of the line).</p>\n"}, {"tags": ["python", "multithreading", "csv", "global-variables", "global"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1562185076, "post_id": 56876956, "comment_id": 100303243, "body": "To change the value of a global variable inside a function or method, it must be declared <code>global</code> <i>inside</i> each one, preferably at the beginning of the <code>def</code>. To prevent problems with concurrent access to the variable, you should also create <code>Lock</code> variable and acquire the lock before referring to it&#39;s current value or changing it."}, {"owner": {"reputation": 95, "user_id": 11544697, "user_type": "registered", "profile_image": "https://graph.facebook.com/2301661703228355/picture?type=large", "display_name": "Mafaz Ahsan", "link": "https://stackoverflow.com/users/11544697/mafaz-ahsan"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1562187633, "post_id": 56876956, "comment_id": 100304283, "body": "Please consider writing some python commands for it. I found that lock is useful when a variable is accessed by two or multiple threads.Here variable &#39;i&#39; is just  needed for the first thread."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1562189073, "post_id": 56876956, "comment_id": 100304803, "body": "You can acquire a <code>Lock</code> variable after one is created by using a <code>with</code> context manager: i.e. <code>with mylock:</code> followed by an (indented) list of one or more statements that reference the protected global resource. This is because <code>Lock</code>s support the content management protocol, as mentioned in the online <a href=\"https://docs.python.org/3/library/threading.html#lock-objects\" rel=\"nofollow noreferrer\">documentation</a>."}], "owner": {"reputation": 95, "user_id": 11544697, "user_type": "registered", "profile_image": "https://graph.facebook.com/2301661703228355/picture?type=large", "display_name": "Mafaz Ahsan", "link": "https://stackoverflow.com/users/11544697/mafaz-ahsan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562182901, "creation_date": 1562182901, "question_id": 56876956, "link": "https://stackoverflow.com/questions/56876956/how-to-assign-a-global-variable-in-multi-threading-in-python", "title": "How to assign a global variable in multi-threading in python", "body": "<p>I am using multithreading and its working fine.In the first thread as mentioned in the code, I need my csv file to be saved with filename as Logger1 for the first time and after this logger1 file has crossed 1000 lines it should be converted into zip file, and removed while 'i' gets incremented by 1.Now after this, the further data should be saved in the csv file with filename as logger2.  </p>\n\n<p>If variable 'i' is assigned value the way, as shown in the code then unbound local error appears stating variable i is referenced before assignment. If I declare it like global i  instead of just i=1 in the beginning, same error appears. If I assigned value inside the u1thread this value never gets actually incremented because every time the thread is executed i is set to be 1. </p>\n\n<pre><code>    i=1\n       class u1Thread(threading.Thread):\n         def run(self):                              \n           while True:                 \n                 export_csv = x.to_csv (r'/home/pi/Logger' + str(i) \n                              + '.csv', index = None, mode='a', \n                             header=False)\n                input_file = open(\"Logger\" + str(i) + \".csv\",\"r+\")\n                             reader_file = csv.reader(input_file)\n                l = len(list(reader_file))\n                if (l &gt; 1000) :\n                  jungle_zip = zipfile.ZipFile('Logger' + str(i) + \n                               '.zip', 'w')\n                  jungle_zip.write('Logger' + str(i) + '.csv', \n                               compress_type=zipfile.ZIP_DEFLATED)\n                  jungle_zip.close()\n                  os.remove(\"Logger\" + str(i) + \".csv\")\n                  i +=1\n\n       class vfThread(threading.Thread):\n         def run(self):\n          while True:\n          ret, frame=video.read()\n</code></pre>\n"}, {"tags": ["python", "git", "google-cloud-functions", "serverless"], "owner": {"reputation": 11, "user_id": 6576401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ade402a48452f9cb8c3500dfe7d11ef0?s=128&d=identicon&r=PG&f=1", "display_name": "Anatoly Ivanov", "link": "https://stackoverflow.com/users/6576401/anatoly-ivanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "closed_date": 1562213373, "answer_count": 0, "score": 1, "last_activity_date": 1562182845, "creation_date": 1562182845, "question_id": 56876946, "link": "https://stackoverflow.com/questions/56876946/proper-git-structure-for-serverless-functions-with-heavily-shared-code", "closed_reason": "Duplicate", "title": "Proper git structure for serverless functions with heavily shared code", "body": "<p>I am writing multiple Google Cloud Functions (you can assume this is any serverless technology) which heavily share code. How do i structure my repository to make it clean?</p>\n\n<p>I am using Python. Right now each function is having a copy of the shared module in a separate directory. I am thinking towards making two repos: a repo with the main module and a repo with the functions. Functions will contain multiple copies of git submodule pointing to the main repo.</p>\n\n<p>Right now the structure is the following</p>\n\n<pre><code>application/\n     module/\n     functions/\n          f1/\n               module/\n          f2/\n               module/\n</code></pre>\n\n<p><code>module/</code> is copied using bash script from <code>application/module/</code></p>\n\n<p>I am thinking about making <code>module/</code> directories point to git submodule. Would that be a nice solution or may be there is some better way to do that?</p>\n\n<p>I want to make the code as clean as possible without sticks like bash script copying the code.</p>\n\n<p>One more important point is that ideally, i would like to copy not the whole <code>module/</code> structure, but some parts of it. Every function is relying on the same parts of the main module.</p>\n"}, {"tags": ["python", "accelerometer", "lowpass-filter"], "owner": {"reputation": 11, "user_id": 11735885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe0312e93398930e55850f253448b135?s=128&d=identicon&r=PG&f=1", "display_name": "Gindo70", "link": "https://stackoverflow.com/users/11735885/gindo70"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1562182629, "creation_date": 1562182629, "question_id": 56876905, "link": "https://stackoverflow.com/questions/56876905/how-to-remove-noise-of-accelerometer-with-low-samplerate", "title": "How to remove Noise of Accelerometer with low Samplerate", "body": "<p>i am trying to remove the Noise of my Accelerometer Data. The Problem is I have a pretty low Sample rate (only 120 Hz) but i want to recreate the movement of the Sensor as accurate as possible.</p>\n\n<p>For that I tried using a lowpass-filter, Bandpass-filter and a Kalmanfilter. I had the best results using the Lowpass, but i dont know which cutoff frequency i should use. \nI know the question is a bit vague. But maybe someone has some wisdom to share with me, or any ideas what i could try to remove the noise.</p>\n\n<pre><code>order = 6\nfs = 120.0       # sample rate, Hz\ncutoff = 3  # desired cutoff frequency of the filter, Hz\n\ndataXAcc = butter_lowpass_filter(dataXAcc,cutoff, fs, order)\ndataYAcc = butter_lowpass_filter(dataYAcc,cutoff, fs, order)\ndataZAcc = butter_lowpass_filter(dataZAcc,cutoff, fs, order)\nplotData(dataXAcc,dataYAcc,dataZAcc,'After lowpass')\n</code></pre>\n\n<p>Here is a plot of the raw Data and after that my filtering result\n(with Cutoff = 3Hz).</p>\n\n<p>Raw Data:(<a href=\"https://i.stack.imgur.com/LN8rK.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/LN8rK.png</a>)</p>\n\n<p>After Lowpass: (<a href=\"https://i.stack.imgur.com/OAGnN.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/OAGnN.png</a>)</p>\n"}, {"tags": ["python", "pip", "jupyter-notebook"], "comments": [{"owner": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "edited": false, "score": 0, "creation_date": 1562190514, "post_id": 56876901, "comment_id": 100305244, "body": "Try running <code>!pip install -vvv synapseclient[pandas,pysftp]</code> and add the output to the question."}], "owner": {"reputation": 11, "user_id": 11736217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21a451310f5dca8ba2906e31c1af8253?s=128&d=identicon&r=PG&f=1", "display_name": "JoshyG", "link": "https://stackoverflow.com/users/11736217/joshyg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 320, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1562235217, "creation_date": 1562182595, "last_edit_date": 1562235217, "question_id": 56876901, "link": "https://stackoverflow.com/questions/56876901/failed-building-wheel-for-pandas-when-pip-installing-in-jupyternotebook", "title": "&quot;Failed building wheel for pandas&quot; when pip installing in JupyterNotebook", "body": "<p>I'm trying to the Synpase package</p>\n\n<blockquote>\n  <p><a href=\"https://python-docs.synapse.org/build/html/index.html\" rel=\"nofollow noreferrer\">https://python-docs.synapse.org/build/html/index.html</a></p>\n</blockquote>\n\n<p>in Jupyter notebook file using </p>\n\n<p><code>!pip install synapseclient[pandas,pysftp]</code></p>\n\n<p>, but whenever I try and run this it gives me the error \"Failed building wheel for pandas\". What am I doing wrong? Thanks!</p>\n"}]