[{"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 825, "user_id": 3652941, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nQrvn.jpg?s=128&g=1", "display_name": "Luke.py", "link": "https://stackoverflow.com/users/3652941/luke-py"}, "edited": false, "score": 0, "creation_date": 1489654200, "post_id": 42822963, "comment_id": 72768331, "body": "I reccomend using grid rather than pack in this case. Have you tried that? PS you are also using the &#39;w&#39; identifier for all your widgets, surley that can&#39;t be helping."}, {"owner": {"reputation": 29, "user_id": 7718052, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5bf2be42ad8ff959cf2b027ba27a7bac?s=128&d=identicon&r=PG&f=1", "display_name": "Will", "link": "https://stackoverflow.com/users/7718052/will"}, "reply_to_user": {"reputation": 825, "user_id": 3652941, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nQrvn.jpg?s=128&g=1", "display_name": "Luke.py", "link": "https://stackoverflow.com/users/3652941/luke-py"}, "edited": false, "score": 0, "creation_date": 1489671333, "post_id": 42822963, "comment_id": 72780371, "body": "Ah Yeah, that was just a testing thing to start with i ment to change that before hand, I tried using grid before, but the text box and one of the list box&#39;s were the only thing that showed, maybe i could try it again."}, {"owner": {"reputation": 825, "user_id": 3652941, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nQrvn.jpg?s=128&g=1", "display_name": "Luke.py", "link": "https://stackoverflow.com/users/3652941/luke-py"}, "edited": false, "score": 0, "creation_date": 1489671674, "post_id": 42822963, "comment_id": 72780652, "body": "look at self.grid_rowconfigure and self.grid_columnconfigure. From what you&#39;ve said im guessing that you havent given each column/row a weight. :)"}], "answers": [{"tags": [], "owner": {"reputation": 825, "user_id": 3652941, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nQrvn.jpg?s=128&g=1", "display_name": "Luke.py", "link": "https://stackoverflow.com/users/3652941/luke-py"}, "is_accepted": true, "score": 0, "last_activity_date": 1489867883, "last_edit_date": 1489867883, "creation_date": 1489673174, "answer_id": 42836359, "question_id": 42822963, "link": "https://stackoverflow.com/questions/42822963/how-to-properly-position-widgets-with-pack-in-tkinker/42836359#42836359", "title": "How to properly position widgets with .pack in tkinker?", "body": "<p>See below for rough idea:</p>\n\n<pre><code>from tkinter import *\nfrom sys import exit\n\ndef button_func():\n        print(\"Test\")\n\nclass TestClient(Frame):\n    def __init__(self, master):\n        Frame.__init__(self, master)\n        self.pack()\n\n        for n in range(3):\n            self.grid_rowconfigure(n, weight=1)\n\n        for n in range(8):\n            self.grid_columnconfigure(n, weight=1)\n\n        lb1 = Listbox(self, width=20,height=24)\n        lb1.insert(1,\"WoW\")\n        lb1.grid(row=0, column=0, columnspan=2, sticky='news')\n\n        t1 = Text(self, width=60)\n        t1.grid(row=0, column=3, columnspan=3)\n\n        lb2 = Listbox(self, width=20,height=24)\n        lb2.insert(1,\"Hi\")\n        lb2.grid(row=0, column=6, columnspan=2, sticky='news')\n\n\n        b1 = Button(self, text=\"Start\", width=10,padx=10,pady=10, command=button_func)\n        b1.grid(row=1, column=0)\n\n        b2 = Button(self, text=\"Change Room\", width=10,padx=10,pady=10, command=button_func)\n        b2.grid(row=1, column=1)\n\n        b3 = Button(self, text=\"Change Room\", width=10,padx=10,pady=10, command=button_func)\n        b3.grid(row=1, column=3)\n\n        b3 = Button(self, text=\"FIGHT\", width=10,padx=10,pady=10, command=button_func)\n        b3.grid(row=1, column=4)\n\n        b4 = Button(self, text=\"PvP FIGHT\", width=10,padx=10,pady=10, command=button_func)\n        b4.grid(row=1, column=5)\n\n        b5 = Button(self, text=\"Loot\", width=10,padx=10,pady=10, command=button_func)\n        b5.grid(row=1, column=6)\n\n        b6 = Button(self, text=\"Leave\", width=10,padx=10,pady=10, command=button_func)\n        b6.grid(row=1, column=7)\n\n        stats = Listbox(self, width= 20)\n        stats.insert(1,\"health:\")\n        stats.grid(row=2, column=0, columnspan=8, sticky='news')\n\nroot = Tk()\nroot.title = \"Test program\"\ntw = TestClient(root)\nroot.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 7718052, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5bf2be42ad8ff959cf2b027ba27a7bac?s=128&d=identicon&r=PG&f=1", "display_name": "Will", "link": "https://stackoverflow.com/users/7718052/will"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 42836359, "answer_count": 1, "score": 0, "last_activity_date": 1489867883, "creation_date": 1489622351, "last_edit_date": 1489622701, "question_id": 42822963, "link": "https://stackoverflow.com/questions/42822963/how-to-properly-position-widgets-with-pack-in-tkinker", "title": "How to properly position widgets with .pack in tkinker?", "body": "<p>I'm working on a project for my class in college, trying to make a tkinker GUI for something, but am having trouble getting the positioning right in it.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>from tkinter import *\nfrom sys import exit\n\ndef button_func():\n        print(\"Test\")\n\nclass TestClient(Frame):\n    def __init__(self, master):\n        Frame.__init__(self, master)\n        self.pack()\n\n        w = Listbox(width=20,height=24)\n        w.insert(1,\"WoW\")\n        w.pack(side=LEFT)\n        w = Text(width=60)\n        w.pack(side=LEFT)\n        w = Listbox(width=20,height=24)\n        w.insert(1,\"Hi\")\n        w.pack(side=RIGHT)\n\n        w = Button(self, text=\"Start\", width=10,padx=10,pady=10, command=button_func)\n        w.pack(side=LEFT)\n        w = Button(self, text=\"Change Room\", width=10,padx=10,pady=10, command=button_func)\n        w.pack(side=LEFT)\n        w = Button(self, text=\"Change Room\", width=10,padx=10,pady=10, command=button_func)\n        w.pack(side=LEFT)\n        w = Button(self, text=\"FIGHT\", width=10,padx=10,pady=10, command=button_func)\n        w.pack(side=LEFT)\n        w = Button(self, text=\"PvP FIGHT\", width=10,padx=10,pady=10, command=button_func)\n        w.pack(side=LEFT)\n        w = Button(self, text=\"Loot\", width=10,padx=10,pady=10, command=button_func)\n        w.pack(side=LEFT)\n        w = Button(self, text=\"Leave\", width=10,padx=10,pady=10, command=button_func)\n        w.pack(side=LEFT)\n\n        stats = Listbox(width= 20)\n        stats.insert(1,\"health:\")\n        stats.pack(side=BOTTOM)\n\nroot = Tk()\nroot.title = \"Test program\"\ntw = TestClient(root)\nroot.mainloop()\n</code></pre>\n\n<p>The problem is that I want the top buttons to be below the text and listbox widgets and the listbox labeled health to be below that, I'v tried packing them to top and bottom, but neither work and I can't find a soulution on google or here, does anyone know how i would go about this?</p>\n\n<p>P.S. Sorry if the indentations bad, first time here and I wasn't sure how to paste the code without messing up the indentation.</p>\n"}, {"tags": ["python", "tornado"], "answers": [{"tags": [], "owner": {"reputation": 20703, "user_id": 2805033, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TasHL.jpg?s=128&g=1", "display_name": "Ben Darnell", "link": "https://stackoverflow.com/users/2805033/ben-darnell"}, "is_accepted": false, "score": 0, "last_activity_date": 1492268190, "last_edit_date": 1492268190, "creation_date": 1490451364, "answer_id": 43017469, "question_id": 42822958, "link": "https://stackoverflow.com/questions/42822958/tornado-websocket-handler-uncaught-exception/43017469#43017469", "title": "tornado websocket handler uncaught exception", "body": "<p>Subclassing and overriding <code>WebSocketProtocol._run_callback</code> is currently the best way to do this from a base class. But since it's cumbersome to subclass and override this method, it's probably better to handle this at the application level until <a href=\"https://github.com/tornadoweb/tornado/issues/1981\" rel=\"nofollow noreferrer\">proper support can be added to the framework</a>. Either wrap all your callbacks in a big try/except block or if you have enough of them that this gets irritating, you can make your own exception-catching decorator.</p>\n"}], "owner": {"reputation": 2386, "user_id": 3930944, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2ecfdf428a888dedff24ea5a99f715c5?s=128&d=identicon&r=PG&f=1", "display_name": "deef", "link": "https://stackoverflow.com/users/3930944/deef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 282, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1492268190, "creation_date": 1489622319, "question_id": 42822958, "link": "https://stackoverflow.com/questions/42822958/tornado-websocket-handler-uncaught-exception", "title": "tornado websocket handler uncaught exception", "body": "<p>I'm trying to catch uncaught exceptions in my WebSocketHandler. But Tornado's <a href=\"http://www.tornadoweb.org/en/stable/_modules/tornado/websocket.html#WebSocketHandler\" rel=\"nofollow noreferrer\">WebSocketHandler</a> does not have the same exception handling interface as the HTTP RequestHandler.</p>\n\n<p>In the above source, it looks like exceptions are caught and logged here:</p>\n\n<pre><code>def _run_callback(self, callback, *args, **kwargs):\n    \"\"\"Runs the given callback with exception handling.\n\n    On error, aborts the websocket connection and returns False.\n    \"\"\"\n    try:\n        callback(*args, **kwargs)\n    except Exception:\n        app_log.error(\"Uncaught exception in %s\",\n                      self.request.path, exc_info=True)\n        self._abort()\n</code></pre>\n\n<p>Instead of hacking the handler and subclassing <code>WebSocketProtocol</code> which implements the above method, is there a better way to catch exceptions in the <code>WebSocketHandler</code>?</p>\n"}, {"tags": ["python", "python-2.7", "ldap", "ldif"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7717889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TYZmE.gif?s=128&g=1", "display_name": "Chloe", "link": "https://stackoverflow.com/users/7717889/chloe"}, "edited": false, "score": 0, "creation_date": 1490137215, "post_id": 42845894, "comment_id": 72976353, "body": "<b>Like an angel from above.</b> Thank you so much! This solution worked great."}], "tags": [], "owner": {"reputation": 2442, "user_id": 1343553, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rEscr.jpg?s=128&g=1", "display_name": "mvreijn", "link": "https://stackoverflow.com/users/1343553/mvreijn"}, "is_accepted": true, "score": 0, "last_activity_date": 1489703616, "last_edit_date": 1489703616, "creation_date": 1489703044, "answer_id": 42845894, "question_id": 42822896, "link": "https://stackoverflow.com/questions/42822896/delete-an-attribute-in-ldap-using-ldif-with-python/42845894#42845894", "title": "Delete an attribute in LDAP using LDIF with Python", "body": "<p>I am not the greatest Python expert but LDAP is my piece of cake. </p>\n\n<p>The entry you are passing to the writer is simply a data object with values, and the Python <code>LDIFWriter</code> is actually a straightforward class which converts its syntax to LDIF. </p>\n\n<p>What I think you should do is, convert your entry to a <strong>modification</strong> and <em>then</em> pass it onto the <code>LDIFWriter</code>, something like this: </p>\n\n<pre><code>entry={ 'changetype' : ['modify'],\n             'delete': ['uniqueMember'],\n       'uniqueMember': ['cn=bob,ou=people,o=company,c=us','cn=bill,ou=people,o=company,c=us'],\n      }\nwriter.unparse('cn=myorg', entry)\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>If you have an array with deleted users called <code>deletes</code> you can pass it into the entry like this: </p>\n\n<pre><code>'uniqueMember': deletes\n</code></pre>\n\n<p>Seems to work :-)</p>\n"}], "owner": {"reputation": 13, "user_id": 7717889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TYZmE.gif?s=128&g=1", "display_name": "Chloe", "link": "https://stackoverflow.com/users/7717889/chloe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 666, "favorite_count": 0, "accepted_answer_id": 42845894, "answer_count": 1, "score": 1, "last_activity_date": 1489703616, "creation_date": 1489621976, "question_id": 42822896, "link": "https://stackoverflow.com/questions/42822896/delete-an-attribute-in-ldap-using-ldif-with-python", "title": "Delete an attribute in LDAP using LDIF with Python", "body": "<p>I want to do (what I thought) would be quite a simple thing. I have an LDAP entry that looks like this(in LDIF format):</p>\n\n<pre><code>dn: cn=myorg,ou=teams,ou=groups,o=company,c=us\ncn: myorg\nobjectClass: top\nobjectClass: CompanyTeams\nobjectClass: groupOfUniqueNames\nowner: cn=john,ou=people,o=company,c=us\nuniqueMember: cn=bob,ou=people,o=company,c=us\nuniqueMember: cn=bill,ou=people,o=company,c=us\nuniqueMember: cn=carol,ou=people,o=company,c=us\nuniqueMember: cn=frank,ou=people,o=company,c=us\nuniqueMember: cn=alice,ou=people,o=company,c=us\n</code></pre>\n\n<p>In my code, I have all these entries represented as dicts. I'm using  Python's LDIF writer to write these entries out to proper LDIF. Exporting the whole thing is easy:</p>\n\n<pre><code>def dump_ldif(self):\n    writer = LDIFWriter(open('entrybackup.ldif', 'wb'))\n       writer.unparse(cn=myorg, self.all_the_teams.get_teamstr_by_name('{'objectClass': ['top', 'CompanyTeams', 'groupOfUniqueNames']'owner': ['cn=john,ou=people,o=company,c=us'], 'uniqueMember': ['uniqueMember: cn=bob,ou=people,o=company,c=us','uniqueMember: cn=bill,ou=people,o=company,c=us','uniqueMember: cn=carol,ou=people,o=company,c=us','uniqueMember: cn=frank,ou=people,o=company,c=us','uniqueMember: cn=alice,ou=people,o=company,c=us'], 'cn': ['myorg']}')\n</code></pre>\n\n<p>But how do you have LDIF output that uses delete/modify operators? I have a list of uniqueMember that I want to go away:</p>\n\n<pre><code>['cn=bob,ou=people,o=company,c=us', 'cn=bill,ou=people,o=company,c=us']\n</code></pre>\n\n<p>And (I believe) this is the end goal in LDIF format, pulling from my list:</p>\n\n<pre><code>dn: cn=myorg,ou=teams,ou=groups,o=company,c=us\nchangetype: modify\ndelete: uniqueMember\nuniqueMember: cn=bob,ou=people,o=company,c=us\nuniqueMember: cn=bill,ou=people,o=company,c=us\n</code></pre>\n\n<p>Is there not some simple way to do this with Python(2.7)? Starting to feel crazy. Note: I could just do the text output/manipulation, but I want to stick with LDIFWriter to write this output. I just want find the syntax to output 'delete' LDIF directives.</p>\n"}, {"tags": ["python", "tensorflow", "neural-network", "deep-learning"], "answers": [{"comments": [{"owner": {"reputation": 740, "user_id": 5483914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588d3b2e691571029da7f787b5846ef1?s=128&d=identicon&r=PG", "display_name": "imsrgadich", "link": "https://stackoverflow.com/users/5483914/imsrgadich"}, "edited": false, "score": 0, "creation_date": 1523396396, "post_id": 42824023, "comment_id": 86542079, "body": "Hi @ayplam, what do you think is happening if the gradient&#39;s shape is getting multiplied like this one, <code>InvalidArgumentError (see above for traceback): Incompatible shapes: [100,4] vs. [10000,4]</code>. My minibatch size is 1000. I validated it by changing the minibatch size and conrrespondingly the error shape also changed. Any input here is appreciated."}], "tags": [], "owner": {"reputation": 1565, "user_id": 5617110, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-V72JTQc7MyE/AAAAAAAAAAI/AAAAAAAAAqs/BZ7rOYvMkZI/photo.jpg?sz=128", "display_name": "ayplam", "link": "https://stackoverflow.com/users/5617110/ayplam"}, "is_accepted": true, "score": 7, "last_activity_date": 1489629732, "creation_date": 1489629732, "answer_id": 42824023, "question_id": 42822844, "link": "https://stackoverflow.com/questions/42822844/tensorflow-incompatible-shapes-100-155-vs-128-155-when-combining-cnn-and/42824023#42824023", "title": "TensorFlow: Incompatible shapes: [100,155] vs. [128,155] when combining CNN and LSTM", "body": "<p>If you print a couple things before when you do your <code>sess.run()</code> you'll notice that it breaks at <code>lstm_output</code>. Going off that, you can start narrowing down your issue, which ended up being this line:</p>\n\n<p><code>init_state = lstm_cell.zero_state(128, tf.float32)</code></p>\n\n<p>This initialization is to determine the batch size. Since you have 155 units and declared a batch size of 128, it's expected that the input is <code>128 x 155</code>. However, it seems like your batch is 100, so if you change that line it should work.</p>\n"}], "owner": {"reputation": 160, "user_id": 5398272, "user_type": "registered", "profile_image": "https://graph.facebook.com/1503226703332569/picture?type=large", "display_name": "Leon Fedden", "link": "https://stackoverflow.com/users/5398272/leon-fedden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22281, "favorite_count": 2, "accepted_answer_id": 42824023, "answer_count": 1, "score": 6, "last_activity_date": 1489629732, "creation_date": 1489621702, "question_id": 42822844, "link": "https://stackoverflow.com/questions/42822844/tensorflow-incompatible-shapes-100-155-vs-128-155-when-combining-cnn-and", "title": "TensorFlow: Incompatible shapes: [100,155] vs. [128,155] when combining CNN and LSTM", "body": "<h1>Problem</h1>\n\n<p>I'm getting an incompatible shape error when trying to stack a Conv -> Lstm -> Fully connected layers for an audio regression task. I can't work out why I'm getting the error I'm getting - the graph builds fine then throws the error - can anyone help?</p>\n\n<h1>Code</h1>\n\n<pre><code>lstm_num_hidden = 128\nlstm_number_layers = 3\nx = tf.placeholder(tf.float32, [None, 1024])\ny = tf.placeholder(tf.float32, [None, 155])\nkeep_probability = tf.placeholder(tf.float32)\n\ndef conv2d(x, weights):\n    return tf.nn.conv2d(x, weights, strides=[1, 1, 1, 1], padding='SAME')\n\nx_spectrogram = tf.reshape(x, [-1, 32, 32, 1])\n\nconv1_weights = tf.Variable(tf.truncated_normal([5, 5, 1, 32], stddev=0.1))\nconv1_bias = tf.Variable(tf.constant(0.1, shape=[32]))\nconv1_hidden = tf.nn.relu(conv2d(x_spectrogram, conv1_weights) + conv1_bias)\nconv1_pooling = tf.nn.max_pool(conv1_hidden, ksize=[1, 2, 2, 1],strides=[1, 2, 2, 1], padding='SAME')\n\nconv2_weights = tf.Variable(tf.truncated_normal([5, 5, 32, 64], stddev=0.1))\nconv2_bias = tf.Variable(tf.constant(0.1, shape=[64]))\nconv2_hidden = tf.nn.relu(conv2d(conv1_pooling, conv2_weights) + conv2_bias)\nconv2_pooling = tf.nn.max_pool(conv2_hidden, ksize=[1, 2, 2, 1],strides=[1, 2, 2, 1], padding='SAME')\nconv2_output = tf.reshape(conv2_pooling, [-1, 64, 64])\n\n# changes to [8, BatchSize, 8, 64]\ntr_x = tf.transpose(conv2_output, [1, 0, 2])\nre_x = tf.reshape(tr_x, [-1, 64])\nsp_x = tf.split(0, 64, re_x)\n\nlstm_cell = rnn_cell.LSTMCell(lstm_num_hidden, forget_bias=1.0, state_is_tuple=True)\nlstm_cell = rnn_cell.MultiRNNCell([lstm_cell] * lstm_number_layers, state_is_tuple=True)\ninit_state = lstm_cell.zero_state(128, tf.float32)\nlstm_output, _ = rnn.rnn(cell=lstm_cell, inputs=sp_x, dtype=tf.float32, initial_state=init_state)\nlstm_weights = tf.Variable(tf.truncated_normal([lstm_num_hidden, 155], stddev=0.1))\nlstm_bias = tf.Variable(tf.truncated_normal([155], stddev=0.1))\nout = tf.add(tf.matmul(lstm_output[-1], lstm_weights), lstm_bias)\n\nfully_connected1_weights = tf.Variable(tf.truncated_normal([155, 1024], stddev=0.1))\nfully_connected1_biases = tf.Variable(tf.truncated_normal([1024], stddev=0.1))\nfully_connected1 = tf.nn.relu(tf.matmul(out, fully_connected1_weights) + fully_connected1_biases)\nfully_connected1_dropout = tf.nn.dropout(fully_connected1, keep_probability)\n\nfully_connected2_weights = tf.Variable(tf.truncated_normal([1024, 155], stddev=0.1))\nfully_connected2_biases = tf.Variable(tf.truncated_normal([155], stddev=0.1))\nprediction = tf.matmul(fully_connected1_dropout, fully_connected2_weights) + fully_connected2_biases\n\ndef error(labels, prediction):\n    return tf.sqrt(tf.reduce_mean(tf.square(tf.sub(labels, prediction))))\n\nrmse = error(y, prediction)\noptimise = tf.train.AdamOptimizer(1e-4).minimize(rmse)\n\n# Get training and testing batch.\ntrain_batch_x = np.load(\"train_x.npy\")\ntrain_batch_y = np.load(\"train_y.npy\")\ntest_batch_x = np.load(\"test_x.npy\")\ntest_batch_y = np.load(\"test_y.npy\")\n\nsess = tf.Session()\nsess.run(tf.global_variables_initializer())\n\nfor i in range(100):\n\n    for batch in trange(99, desc=\"Training\"):\n        start = batch * 100\n        end = batch * 100 + 100\n        sess.run(optimise, { x: train_batch_x[start:end],\n                             y: train_batch_y[start:end],\n                             keep_probability: 0.5 })\n\n    rmse_error = sess.run(rmse, { x: test_batch_x,\n                                  y: test_batch_y,\n                                  keep_probability: 1.0 })\n    print \"Root Mean Squared Error:\" + str(rmse_error)\n</code></pre>\n\n<h1>Error</h1>\n\n<pre><code>W tensorflow/core/framework/op_kernel.cc:975] Invalid argument: Incompatible shapes: [100,155] vs. [128,155]\n     [[Node: gradients/Sub_grad/BroadcastGradientArgs = BroadcastGradientArgs[T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](gradients/Sub_grad/Shape, gradients/Sub_grad/Shape_1)]]\nW tensorflow/core/framework/op_kernel.cc:975] Invalid argument: Incompatible shapes: [100,155] vs. [128,155]\n     [[Node: gradients/Sub_grad/BroadcastGradientArgs = BroadcastGradientArgs[T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](gradients/Sub_grad/Shape, gradients/Sub_grad/Shape_1)]]\n\nTraceback (most recent call last):\n  File \"conv_rnn_experiment.py\", line 81, in &lt;module&gt;\n    keep_probability: 0.5 })\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 766, in run\n    run_metadata_ptr)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 964, in _run\n    feed_dict_string, options, run_metadata)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 1014, in _do_run\n    target_list, options, run_metadata)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 1034, in _do_call\n    raise type(e)(node_def, op, message)\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Incompatible shapes: [100,155] vs. [128,155]\n     [[Node: gradients/Sub_grad/BroadcastGradientArgs = BroadcastGradientArgs[T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](gradients/Sub_grad/Shape, gradients/Sub_grad/Shape_1)]]\n\nCaused by op u'gradients/Sub_grad/BroadcastGradientArgs', defined at:\n  File \"conv_rnn_experiment.py\", line 63, in &lt;module&gt;\n    optimise = tf.train.AdamOptimizer(1e-4).minimize(rmse)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/optimizer.py\", line 269, in minimize\n    grad_loss=grad_loss)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/optimizer.py\", line 335, in compute_gradients\n    colocate_gradients_with_ops=colocate_gradients_with_ops)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gradients_impl.py\", line 482, in gradients\n    in_grads = grad_fn(op, *out_grads)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/math_grad.py\", line 594, in _SubGrad\n    rx, ry = gen_array_ops._broadcast_gradient_args(sx, sy)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_array_ops.py\", line 390, in _broadcast_gradient_args\n    name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/op_def_library.py\", line 759, in apply_op\n    op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2240, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1128, in __init__\n    self._traceback = _extract_stack()\n\n  ...which was originally created as op u'Sub', defined at:\n  File \"conv_rnn_experiment.py\", line 62, in &lt;module&gt;\n    rmse = error(y, prediction)\n  File \"conv_rnn_experiment.py\", line 60, in error\n    return tf.sqrt(tf.reduce_mean(tf.square(tf.sub(labels, prediction))))\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_math_ops.py\", line 2758, in sub\n    result = _op_def_lib.apply_op(\"Sub\", x=x, y=y, name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/op_def_library.py\", line 759, in apply_op\n    op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2240, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1128, in __init__\n    self._traceback = _extract_stack()\n\n  InvalidArgumentError (see above for traceback): Incompatible shapes: [100,155] vs. [128,155]\n     [[Node: gradients/Sub_grad/BroadcastGradientArgs = BroadcastGradientArgs[T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/gpu:0\"](gradients/Sub_grad/Shape, gradients/Sub_grad/Shape_1)]]\n</code></pre>\n"}, {"tags": ["python", "arrays", "list", "vector"], "answers": [{"tags": [], "owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "is_accepted": true, "score": 4, "last_activity_date": 1489622667, "last_edit_date": 1489622667, "creation_date": 1489621783, "answer_id": 42822861, "question_id": 42822766, "link": "https://stackoverflow.com/questions/42822766/fastest-way-to-find-norm-of-difference-of-vectors-in-python/42822861#42822861", "title": "Fastest way to find norm of difference of vectors in Python", "body": "<p>Try (time-measuring style probably only for python >= 3.3):</p>\n\n<pre><code>import numpy as np\nimport time\n\nA = np.array([[0, 0], [0, 1], [0, 3], [1, 2], [2, 2]])\nB = np.array([[ 0.1,  0.4,  0.5],\n    [ 0.7,  0.0,  0.4],\n    [ 0.8,  0.4,  0.7],\n    [ 0.9,  0.3,  0.8]])\nC = np.array([[ 0.9,  0.8,  0.9],\n    [ 0.3,  0.9,  0.5],\n    [ 0.3,  0.4,  0.8],\n    [ 0.5,  0.4,  0.3]])\n\n# your approach A\nstart = time.perf_counter()\nprint(list(map( lambda x: np.sqrt( (B[x[0]] - C[x[1]]).dot(B[x[0]] - C[x[1]]) ), A)))  # outer list because of py3\nprint('used: ', time.perf_counter() - start)\n\n# your approach B\nstart = time.perf_counter()\nprint(list(map( lambda x: np.linalg.norm((B[x[0]] - C[x[1]])), A)))  # outer list because of py3\nprint('used: ', time.perf_counter() - start)\n\n# new approach\nstart = time.perf_counter()\nprint(np.linalg.norm(B[A[:,0]] - C[A[:,1]], axis=1))\nprint('used: ', time.perf_counter() - start)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[0.97979589711327131, 0.53851648071345037, 0.44721359549995798, \n0.69282032302755092, 0.50990195135927852]\nused:  0.0014244442358304925\n\n[0.97979589711327131, 0.53851648071345037, 0.44721359549995798, \n0.69282032302755092, 0.50990195135927852]\nused:  0.0004404035049961194\n\n[ 0.9797959   0.53851648  0.4472136   0.69282032  0.50990195]  # probably hidden print-magic which cuts off some digits during print\nused:  0.0010253945897682102\n</code></pre>\n\n<p>These timings are obviously quite input-dependent and it's a very bad benchmark, so measure it yourself for your data!</p>\n\n<p>The new approach is arguably the most clean in regards to numpy-style, although it does not need to be the fastest depending on your data. In general i would expect it to be the approach using most of BLAS and vectorized-processing.</p>\n\n<p>For your bigger vectors, make sure you got a fast and multithreaded BLAS-distribution linked to numpy.</p>\n"}, {"comments": [{"owner": {"reputation": 1178, "user_id": 3761166, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/yMEuq.png?s=128&g=1", "display_name": "Commoner", "link": "https://stackoverflow.com/users/3761166/commoner"}, "edited": false, "score": 0, "creation_date": 1489622983, "post_id": 42822904, "comment_id": 72757599, "body": "I am getting the following error for the function f(). Would you know why?   ---------------------- AttributeError: &#39;numpy.float64&#39; object has no attribute &#39;dot&#39;"}, {"owner": {"reputation": 1178, "user_id": 3761166, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/yMEuq.png?s=128&g=1", "display_name": "Commoner", "link": "https://stackoverflow.com/users/3761166/commoner"}, "edited": false, "score": 0, "creation_date": 1489623330, "post_id": 42822904, "comment_id": 72757670, "body": "Now, I am getting another error ( for the function f ). It is: ---------------- ValueError: &#39;axis&#39; entry is out of bounds"}, {"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "reply_to_user": {"reputation": 1178, "user_id": 3761166, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/yMEuq.png?s=128&g=1", "display_name": "Commoner", "link": "https://stackoverflow.com/users/3761166/commoner"}, "edited": false, "score": 0, "creation_date": 1489623817, "post_id": 42822904, "comment_id": 72757809, "body": "Yeah there was a small mistake in there, see edit. Speed gain isn&#39;t as impressive unfortunately but still good."}, {"owner": {"reputation": 1178, "user_id": 3761166, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/yMEuq.png?s=128&g=1", "display_name": "Commoner", "link": "https://stackoverflow.com/users/3761166/commoner"}, "edited": false, "score": 0, "creation_date": 1489624512, "post_id": 42822904, "comment_id": 72758002, "body": "Hmm, the outputs of f() and g() are also not the same. f() returns only two values (from the way you have defined it. I think you may want to define f() like this: def f():     return np.linalg.norm(B[A[:,0]] - C[A[:,1]], axis=1)"}, {"owner": {"reputation": 1178, "user_id": 3761166, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/yMEuq.png?s=128&g=1", "display_name": "Commoner", "link": "https://stackoverflow.com/users/3761166/commoner"}, "edited": false, "score": 0, "creation_date": 1489625233, "post_id": 42822904, "comment_id": 72758168, "body": "Thanks! It works. =) Would you know if there&#39;s a fast way to convert the list of pairs (A) to a numpy array (structure with two columns)?"}, {"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "reply_to_user": {"reputation": 1178, "user_id": 3761166, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/yMEuq.png?s=128&g=1", "display_name": "Commoner", "link": "https://stackoverflow.com/users/3761166/commoner"}, "edited": false, "score": 1, "creation_date": 1489625668, "post_id": 42822904, "comment_id": 72758281, "body": "There sure is: <code>np.array(A)</code>, as simple as this! ;)"}], "tags": [], "owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "is_accepted": false, "score": 2, "last_activity_date": 1489624673, "last_edit_date": 1489624673, "creation_date": 1489622035, "answer_id": 42822904, "question_id": 42822766, "link": "https://stackoverflow.com/questions/42822766/fastest-way-to-find-norm-of-difference-of-vectors-in-python/42822904#42822904", "title": "Fastest way to find norm of difference of vectors in Python", "body": "<p>Check this out:</p>\n\n<pre><code>import numpy as np\nA = np.random.randint(1000, size=(10000,2))\nB = np.random.randn(1000,3)\nC = np.random.randn(1000,3)\n\ndef f():\n    return np.linalg.norm(B[A[:,0]] - C[A[:,1]], axis=1)\n\n%timeit f() # &gt;&gt;&gt; 100000 loops, best of 3: 448 \u00b5s ms per loop\n\ndef g():\n    return map( lambda x: np.sqrt( (B[x[0]] - C[x[1]]).dot(B[x[0]] - C[x[1]]) ), A)\n\n%timeit g() # &gt;&gt;&gt; 10 loops, best of 3: 31.8 ms per loop\n\nassert np.abs(f()-g()).max() &lt; 1e-10\n</code></pre>\n"}], "owner": {"reputation": 1178, "user_id": 3761166, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/yMEuq.png?s=128&g=1", "display_name": "Commoner", "link": "https://stackoverflow.com/users/3761166/commoner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2034, "favorite_count": 0, "accepted_answer_id": 42822861, "answer_count": 2, "score": 0, "last_activity_date": 1489624673, "creation_date": 1489621173, "last_edit_date": 1489621543, "question_id": 42822766, "link": "https://stackoverflow.com/questions/42822766/fastest-way-to-find-norm-of-difference-of-vectors-in-python", "title": "Fastest way to find norm of difference of vectors in Python", "body": "<p>I have a <strong>list of pairs</strong> (say '<strong>A</strong>'), and <strong>two arrays</strong>, '<strong>B</strong>' and '<strong>C</strong>' ( each array has three columns ). The arrays 'B' and 'C 'are collections of coordinates / vectors (3 dimensions). 'A' is a list of pairs of indices; the <strong>first entry in each pair denotes the index of a row in B</strong> and the <strong>second entry in each pair points to the index of a row in C</strong>. As an example:</p>\n\n<pre><code>A = [(0, 0), (0, 1), (0, 3), (1, 2), (2, 2)]\nB = [[ 0.1  0.4  0.5]\n    [ 0.7  0.0  0.4]\n    [ 0.8  0.4  0.7]\n    [ 0.9  0.3  0.8]]\nC = [[ 0.9  0.8  0.9]\n    [ 0.3  0.9  0.5]\n    [ 0.3  0.4  0.8]\n    [ 0.5  0.4  0.3]]\n</code></pre>\n\n<p>For each pair in the list A, I wish to find the <strong>euclidean norm of the difference of vectors</strong> in B and C. That is to say, for the pair (i,j), I wish to find Norm( B[i,:]-C[j,:] ). I wish to do this for all pairs in the fastest way possible.</p>\n\n<p>Presently, I am doing it in the following manner:</p>\n\n<pre><code>import numpy as np\nmap( lambda x: np.sqrt( (B[x[0]] - C[x[1]]).dot(B[x[0]] - C[x[1]]) ), A)\n</code></pre>\n\n<p>I find the above technique to be somewhat faster than:</p>\n\n<pre><code>map( lambda x: np.linalg.norm((B[x[0]] - C[x[1]])), A) \n</code></pre>\n\n<p>I am dealing with <strong>arrays B and C</strong> which have <strong>millions of rows</strong>. Could anyone tell me how I can obtain the above functionality in the <strong>fastest way possible</strong> in <strong>python</strong>?</p>\n"}, {"tags": ["python", "json", "duck-typing"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1489621671, "post_id": 42822759, "comment_id": 72757219, "body": "I don&#39;t think there&#39;s much you can do to improve this. It&#39;s a poorly designed data structure."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1489622029, "post_id": 42822759, "comment_id": 72757331, "body": "@Barmar: that doesn&#39;t mean the code itself can&#39;t be structured better."}, {"owner": {"reputation": 11, "user_id": 7717938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80f266b8c219ac34945aeff360711729?s=128&d=identicon&r=PG&f=1", "display_name": "Del", "link": "https://stackoverflow.com/users/7717938/del"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1490129983, "post_id": 42822759, "comment_id": 72973053, "body": "Both @martineau and @martijn-pieters answers provide runnable solutions. But I&#39;m not sure I can actually judge which is the &quot;better&quot; answer. IAs a novice in python, I&#39;ll say that  @martineau &#39;s solution is more readable and I don&#39;t know enough yet that I can recognize what @martijn-pieters does. Helpful to me that both leverage the technique of nested <code>TypeErrors</code>"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1490131893, "post_id": 42822759, "comment_id": 72974026, "body": "The essence of both answers is the same: &quot;use exceptions instead of type-checking&quot; which will make the code more &quot;Pythonic&quot;. I&#39;m biased, of course, but beyond that, what you say about readability and being able to understand the code seems like it would break the tie\u2014since those things are also important facets of the notion."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7717938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80f266b8c219ac34945aeff360711729?s=128&d=identicon&r=PG&f=1", "display_name": "Del", "link": "https://stackoverflow.com/users/7717938/del"}, "edited": false, "score": 0, "creation_date": 1489626400, "post_id": 42822842, "comment_id": 72758442, "body": "I&#39;ll read up on  the <i>EAFP</i> technique. That&#39;s a new term for me. Thank you!"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 11, "user_id": 7717938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80f266b8c219ac34945aeff360711729?s=128&d=identicon&r=PG&f=1", "display_name": "Del", "link": "https://stackoverflow.com/users/7717938/del"}, "edited": false, "score": 0, "creation_date": 1489628261, "post_id": 42822842, "comment_id": 72758879, "body": "Glad to have been of help! Feel free to <a href=\"http://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\">accept my answer</a> if you feel it was useful to you. :-)"}], "tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": false, "score": 1, "last_activity_date": 1489622439, "last_edit_date": 1489622439, "creation_date": 1489621694, "answer_id": 42822842, "question_id": 42822759, "link": "https://stackoverflow.com/questions/42822759/how-to-avoid-type-checking-when-printing-json/42822842#42822842", "title": "How to avoid type checking when printing json?", "body": "<p>You could just use key access and catch the exception, a technique called <em>Easy to Ask for Forgiveness than Permission</em>, or <em>EAFP</em>:</p>\n\n<pre><code>rtype = obj[\"responseType\"]\noutput = []\ntry:\n    container_type = rtype['type']\nexcept TypeError:\n    # not a dictionary, so plain type\n    output.extend(['null'] if rtype is None else ['a', rtype])\nelse:\n    # Container type\n    output.extend(['a', container_type, 'of'])\n    # Check for subtype\n    try:\n        sub_type = rtype['of']['type']\n    except TypeError:\n        output.append(rtype['of'])\n    else:\n        output.extend([rtype['of']['format'], sub_type + 's'])\nprint('The response type is', *output)\n</code></pre>\n\n<p>I've ignored using the correct article (<code>a</code> vs. <code>an</code>) for now, but you get the idea.</p>\n\n<p>It's not necessarily better than what you were doing, <em>Looking Before You Leap</em> (<em>LBYL</em>); it'll depend on the distribution of the mix which one is faster (as handling an exception is relatively slower than using <code>if</code> tests, but faster if exceptions are less common), or which one you find to be more readable for your use-cases.</p>\n\n<p>Demo:</p>\n\n<pre><code>&gt;&gt;&gt; def output(obj):\n...     rtype = obj[\"responseType\"]\n...     output = []\n...     try:\n...         container_type = rtype['type']\n...     except TypeError:\n...         # not a dictionary, so plain type\n...         output.extend(['null'] if rtype is None else ['a', rtype])\n...     else:\n...         # Container type\n...         output.extend(['a', container_type, 'of'])\n...         # Check for subtype\n...         try:\n...             sub_type = rtype['of']['type']\n...         except TypeError:\n...             output.append(rtype['of'])\n...         else:\n...             output.extend([rtype['of']['format'], sub_type + 's'])\n...     print('The response type is', *output)\n...\n&gt;&gt;&gt; responses = [\n...     {\"responseType\": None},\n...     {\"responseType\": \"FEATURE MODEL\"},\n...     {\"responseType\": {\"type\": \"array\", \"of\": \"Feature\"}},\n...     {\"responseType\": {\"type\": \"array\", \"of\": {\"type\": \"number\", \"format\": \"int32\"}}},\n... ]\n&gt;&gt;&gt; for r in responses:\n...     output(r)\n...\nThe response type is null\nThe response type is a FEATURE MODEL\nThe response type is a array of Feature\nThe response type is a array of int32 numbers\n</code></pre>\n\n<p>Note that if you do use type checks, I'd use <code>isinstance(ob, class)</code> over <code>type(ob) is class</code>. With data coming from JSON, there is no need to do strict checks (where you can't accept a subclass, only the exact type), and <code>isinstance()</code> is less work for Python and more readable for other maintainers.</p>\n"}, {"comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1489628316, "post_id": 42823749, "comment_id": 72758892, "body": "Why not use (more) string formatting in the first <code>try:</code> block?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1489628472, "post_id": 42823749, "comment_id": 72758936, "body": "@Martijn: Could have and often do, but in this case it didn&#39;t seem any more readable."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1489628565, "post_id": 42823749, "comment_id": 72758959, "body": "<code>kind = &#39;{0[type]} of {0[of][format]} {0[of][type]}s&#39;.format(obj[&#39;responseType&#39;])</code> looks a lot more readable to me."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1489628741, "post_id": 42823749, "comment_id": 72759015, "body": "@Martijn: While that is certainly shorter, it hides too much of what is really going on in my opinion."}], "tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": false, "score": 1, "last_activity_date": 1489678104, "last_edit_date": 1495541416, "creation_date": 1489627784, "answer_id": 42823749, "question_id": 42822759, "link": "https://stackoverflow.com/questions/42822759/how-to-avoid-type-checking-when-printing-json/42823749#42823749", "title": "How to avoid type checking when printing json?", "body": "<p>It would be more \"Pythonic\" to use exceptions. See <a href=\"https://stackoverflow.com/a/3931746/355230\">my answer</a> to another question for more details.</p>\n\n<p>At any rate, here's a runnable example of applying them to your problem:</p>\n\n<pre><code>import json\n\njson_resp = '''[{\"responseType\": null},\n                {\"responseType\": \"FEATURE MODEL\"},\n                {\"responseType\": {\"of\": \"Feature\", \"type\": \"array\"}},\n                {\"responseType\": {\"type\": \"array\",\n                                  \"of\": {\"format\": \"int32\", \"type\": \"number\"}}}]'''\nobjs = json.loads(json_resp)\n\nfor obj in objs:\n    try:\n        kind = ('an ' + obj['responseType']['type']\n                    + ' of ' + obj['responseType']['of']['format']\n                        + ' ' + obj['responseType']['of']['type']\n                            + 's')\n    except TypeError:\n        try:\n            kind = obj['responseType']['of']\n        except TypeError:\n            kind = obj['responseType']\n\n    print('The responseType is {}'.format(kind))\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>The responseType is None\nThe responseType is FEATURE MODEL\nThe responseType is Feature\nThe responseType is an array of int32 numbers\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7717938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80f266b8c219ac34945aeff360711729?s=128&d=identicon&r=PG&f=1", "display_name": "Del", "link": "https://stackoverflow.com/users/7717938/del"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1489678104, "creation_date": 1489621138, "last_edit_date": 1489623344, "question_id": 42822759, "link": "https://stackoverflow.com/questions/42822759/how-to-avoid-type-checking-when-printing-json", "title": "How to avoid type checking when printing json?", "body": "<p>I'm using Python to convert a json file to more human readable output, and a specific entry in that json can take one of the following formats. I'm trying create a method that handles creating appropriate output without checking for type.</p>\n\n<pre><code>\"responseType\": null\n</code></pre>\n\n<p>or</p>\n\n<pre><code>\"responseType\": \"FEATURE MODEL\"\n</code></pre>\n\n<p>or</p>\n\n<pre><code>\"responseType\": {\n    \"type\": \"array\",\n    \"of\": \"Feature\"\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>\"responseType\": {\n    \"type\": \"array\",\n     \"of\": {\n             \"type\": \"number\",\n             \"format\": \"int32\"\n           }\n}\n</code></pre>\n\n<p>My desired output in each case is something like:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>The responseType is null\nThe responseType is a Feature Model\nThe responseType is an array of Feature\nThe responseType is an array of int32 numbers\n</code></pre>\n\n<p>I'm new to Python and my first inclination is to do a lot of type checking and string concatenation. i.e.:</p>\n\n<pre><code>str = \"The response type is \"\nif type(obj[\"responseType\"]) is str:\n    str += obj[\"responseType\"]\nelif type(obj[\"responseType\"]) is dict:\n    str += obj[\"responseType\"][\"type\"] + \" \"\n    if type(obj[\"responseType\"][\"of\"] is str\n        str += obj[\"responseType\"][\"of\"]\n    else:\n        #dict output\n        #etc...\nelif type(obj[\"responseType\"] is None:\n     print(\"The response type is null\")\n</code></pre>\n\n<p>Doing this feels very naive and incorrect, given that I repeatedly read that you should never check for type.</p>\n\n<p>So, what is the pythonic way to handle this case without doing all that type checking?</p>\n"}, {"tags": ["python", "tensorflow", "neural-network", "keras", "convolution"], "comments": [{"owner": {"reputation": 8468, "user_id": 1586200, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/111c497a3eb270092100e5ee807d9994?s=128&d=identicon&r=PG&f=1", "display_name": "Autonomous", "link": "https://stackoverflow.com/users/1586200/autonomous"}, "edited": false, "score": 1, "creation_date": 1489621791, "post_id": 42822719, "comment_id": 72757258, "body": "You can look at the <code>Convolution1D</code> source code? I assume you know that Theano has a function for convolution: <a href=\"http://deeplearning.net/software/theano/library/tensor/nnet/conv.html#theano.tensor.nnet.conv2d\" rel=\"nofollow noreferrer\"><code>T.nnet.conv2d</code></a>. Can&#39;t you just use that?"}, {"owner": {"reputation": 757, "user_id": 7687401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74b0ee1ec0e5681c103513718fdaf228?s=128&d=identicon&r=PG&f=1", "display_name": "Starnetter", "link": "https://stackoverflow.com/users/7687401/starnetter"}, "reply_to_user": {"reputation": 8468, "user_id": 1586200, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/111c497a3eb270092100e5ee807d9994?s=128&d=identicon&r=PG&f=1", "display_name": "Autonomous", "link": "https://stackoverflow.com/users/1586200/autonomous"}, "edited": false, "score": 0, "creation_date": 1489622192, "post_id": 42822719, "comment_id": 72757379, "body": "That would be perfect. I don&#39;t see an equivalent for 1D though. Can I still use T.nnet.conv2d with 1D inputs?"}, {"owner": {"reputation": 8468, "user_id": 1586200, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/111c497a3eb270092100e5ee807d9994?s=128&d=identicon&r=PG&f=1", "display_name": "Autonomous", "link": "https://stackoverflow.com/users/1586200/autonomous"}, "edited": false, "score": 1, "creation_date": 1489622697, "post_id": 42822719, "comment_id": 72757524, "body": "Yes, you can. On how to do it, see <a href=\"http://stackoverflow.com/a/32147403/1586200\">here</a> or even better - <a href=\"https://github.com/fchollet/keras/blob/master/keras/backend/theano_backend.py/#conv1d\" rel=\"nofollow noreferrer\">here</a>. You can always write a code in numpy for 1D convolution and match its output with Theano convolution to make sure your Theano implementation is correct. I did something similar for 2D convolution <a href=\"http://stackoverflow.com/a/42742549/1586200\">here</a>."}, {"owner": {"reputation": 757, "user_id": 7687401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74b0ee1ec0e5681c103513718fdaf228?s=128&d=identicon&r=PG&f=1", "display_name": "Starnetter", "link": "https://stackoverflow.com/users/7687401/starnetter"}, "reply_to_user": {"reputation": 8468, "user_id": 1586200, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/111c497a3eb270092100e5ee807d9994?s=128&d=identicon&r=PG&f=1", "display_name": "Autonomous", "link": "https://stackoverflow.com/users/1586200/autonomous"}, "edited": false, "score": 0, "creation_date": 1489634786, "post_id": 42822719, "comment_id": 72760600, "body": "Thanks, that&#39;s perfect"}], "owner": {"reputation": 757, "user_id": 7687401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74b0ee1ec0e5681c103513718fdaf228?s=128&d=identicon&r=PG&f=1", "display_name": "Starnetter", "link": "https://stackoverflow.com/users/7687401/starnetter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 180, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489788507, "creation_date": 1489620880, "last_edit_date": 1489788507, "question_id": 42822719, "link": "https://stackoverflow.com/questions/42822719/keras-cnn-layers-as-a-function", "title": "Keras CNN layers as a function", "body": "<p>How can you represent a 1D-Convolutional Layer as an operation?\nFor instance, fully connected layers like this:</p>\n\n<pre><code>model = Sequential([\n\n    Dense(32, batch_input_shape=(None,100), init='he_normal', activation='relu),\n\n    Dense(1, init='he_normal', activation='linear)\n])\n</code></pre>\n\n<p>Can be written as a function like this:</p>\n\n<pre><code>def pred(inputs,model_weights):\n\n    weights=np.vstack([model_weights[0],model_weights()[1]]) \n\n    inputs=np.hstack([inputs,np.zeros(inputs.shape[0]).reshape(inputs.shape[0],1)])\n\n    inputs[:,-1]=1\n\n    prediction=np.dot(inputs,weights) \n\n    prediction[prediction&lt;0]=0              ### RELU after 1st layer\n\n    weights=np.vstack([model_weights[2],model_weights[3]])\n\n    prediction=np.hstack([prediction,np.zeros(prediction.shape[0]).reshape(prediction.shape[0],1)])\n\n    prediction[:,-1]=1\n\n    prediction=np.dot(prediction,weights)\n\n    return prediction\n\n\nweights_from_model = model.get_weights()\n\nx=test_data\n\npred(x,weights_from_model)\n</code></pre>\n\n<p>First of all, am I understanding the Dense layers correctly?</p>\n\n<p>Secondly, how do you represent a CNN layer like those in the code below?</p>\n\n<pre><code>model = Sequential([\n\n    InputLayer(batch_input_shape=(None,100,1)),\n\n    Convolution1D(nb_filter=16, filter_length=8, activation='relu', border_mode='same', init='he_normal', input_shape=(None,100,1)),\n\n    Convolution1D(nb_filter=32, filter_length=8, activation='relu', border_mode='same', init='he_normal'), \n\n    MaxPooling1D(pool_length=4),\n\n    Flatten(),\n\n    Dense(output_dim=32, activation='relu', init='he_normal'),\n\n    Dense(output_dim=1, input_dim=32, activation='linear'),\n])\n</code></pre>\n\n<p>Creating this function is necessary for my project in order to define a Theano function (although I have used Tensorflow to train the weights) that returns the Jacobian matrix of the output wrt the input data. The weights are already trained and set, it is just a matter of putting the layers in the form of a python function.</p>\n\n<p>***EDIT</p>\n\n<p>How do you add the bias weights to the CNN layer?</p>\n\n<p>For instance, my first layer has dimensions:\n(8, 1, 1, 16)</p>\n\n<p>With a bias with dimensions:\n(16,)</p>\n\n<p>Which is easy enough to concatenate together to get dimensions:\n(9, 1, 1, 16)</p>\n\n<p>but for the next layer I have dimensions:\n(8, 1, 16, 32)</p>\n\n<p>with a bias with dimensions:\n(32,)</p>\n\n<p>How can I combine this into one weight matrix?</p>\n"}, {"tags": ["python", "seaborn"], "answers": [{"tags": [], "owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "is_accepted": true, "score": 1, "last_activity_date": 1489622583, "last_edit_date": 1489622583, "creation_date": 1489622155, "answer_id": 42822922, "question_id": 42822707, "link": "https://stackoverflow.com/questions/42822707/seaborn-displaying-one-barplot-instead-of-multiple-plots/42822922#42822922", "title": "Seaborn displaying one barplot instead of multiple plots", "body": "<p>I've tested that this works:</p>\n\n<pre><code>import matplotlib.pyplot as plt, seaborn as sns\nfrom matplotlib.backends.backend_pdf import PdfPages\n\nylst = [.1,.2,.3,.4,.5,.6,.7,.8]\nxlst=[\"A\",\"B\",\"C\",\"D\",\"E\",\"F\",\"G\",\"H\"]\nwith PdfPages('probs.pdf') as pdf_pages:\n    fig,((ax1,ax2),(ax3,ax4)) = plt.subplots(2,2)\n    list_of_axes = (ax1,ax2,ax3,ax4)\n    for i,j in zip(range(0,len(xlst), 2),list_of_axes):\n        sns.barplot(xlst[i:i+2], ylst[i:i+2],ax=j)\n        j.axes.set_title('Which name', fontsize=24,color=\"b\",alpha=0.3)\n        j.set_ylabel(\"Probability (%)\",size = 17,color=\"r\",alpha=0.5)\n\n        for p in j.patches:\n            j.annotate(str(p.get_height()), (p.get_x() * 1.005, p.get_height() * 1.005))\n    pdf_pages.savefig()\n    plt.close()\n</code></pre>\n\n<p>I've just assigned an axis for each subplot and moved <code>.savefig()</code> outside of the loop.</p>\n"}], "owner": {"reputation": 1430, "user_id": 5739619, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dc9137cd10cc63c14d4c774bc81ef98a?s=128&d=identicon&r=PG&f=1", "display_name": "user5739619", "link": "https://stackoverflow.com/users/5739619/user5739619"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 42822922, "answer_count": 1, "score": 1, "last_activity_date": 1489622583, "creation_date": 1489620831, "question_id": 42822707, "link": "https://stackoverflow.com/questions/42822707/seaborn-displaying-one-barplot-instead-of-multiple-plots", "title": "Seaborn displaying one barplot instead of multiple plots", "body": "<p>My code looks like</p>\n\n<pre><code>ylst = [.1,.2,.3,.4,.5,.6,.7,.8]\nxlst=[\"A\",\"B\",\"C\",\"D\",\"E\",\"F\",\"G\",\"H\"]\nwith PdfPages('probs.pdf') as pdf_pages:\n    for i in range(0,len(xlst), 2):\n        ax=sns.barplot(xlst[i:i+2], ylst[i:i+2])\n        ax.axes.set_title('Which name', fontsize=24,color=\"b\",alpha=0.3)\n        ax.set_ylabel(\"Probability (%)\",size = 17,color=\"r\",alpha=0.5)\n\n        for p in ax.patches:\n            ax.annotate(str(p.get_height()), (p.get_x() * 1.005, p.get_height() * 1.005))\n        pdf_pages.savefig()\n</code></pre>\n\n<p>I want to 4 plots, in a 2 row by 2 column matrix. That is, the upper left plot should show <code>A</code> and <code>B</code> with values .1 and .2. Then, the lower left or upper right plot should show <code>C</code> and <code>D</code> with values .3 and .4. And so on</p>\n\n<p>However, what I instead get is:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Ky4he.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ky4he.png\" alt=\"enter image description here\"></a></p>\n\n<p>How can I fix this?</p>\n"}, {"tags": ["python", "json", "python-2.7", "lambda", "scrapy"], "comments": [{"owner": {"reputation": 1222, "user_id": 1028237, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a4f6ee0dbf04ff9f277c6fabf181016f?s=128&d=identicon&r=PG", "display_name": "Verbal_Kint", "link": "https://stackoverflow.com/users/1028237/verbal-kint"}, "edited": false, "score": 0, "creation_date": 1489622828, "post_id": 42822705, "comment_id": 72757554, "body": "did you ask this same question a few hours ago?"}], "answers": [{"tags": [], "owner": {"reputation": 1222, "user_id": 1028237, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a4f6ee0dbf04ff9f277c6fabf181016f?s=128&d=identicon&r=PG", "display_name": "Verbal_Kint", "link": "https://stackoverflow.com/users/1028237/verbal-kint"}, "is_accepted": true, "score": 3, "last_activity_date": 1489629902, "last_edit_date": 1489629902, "creation_date": 1489622810, "answer_id": 42823028, "question_id": 42822705, "link": "https://stackoverflow.com/questions/42822705/scrapy-typeerror-string-indices-must-be-integers-not-str/42823028#42823028", "title": "Scrapy: TypeError: string indices must be integers, not str?", "body": "<p>Short answer: \nthe variable <code>item</code> is a string</p>\n\n<p>Long answer:\nin this section </p>\n\n<pre><code>allparen= re.findall('\\(.+?\\)',item['text'])\nfor item in allparen:\n    ...\n</code></pre>\n\n<p>you are looping over allparen which should either be a list of strings or an empty list, and using the same variable name <code>item</code> as the looping variable. So item is a string, not a dict/Item object. use a different name for the looping variable, like:</p>\n\n<pre><code>for paren in allparen:\n    if paren[1].isupper() and paren[2].isupper():\n    ...\n</code></pre>\n\n<p>basically your original <code>item</code> variable is overwritten by your use of the same variable name in the loop.</p>\n"}], "owner": {"reputation": 451, "user_id": 5593661, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh6.googleusercontent.com/-gMBGuz-0YK0/AAAAAAAAAAI/AAAAAAAAALU/RwIzt5Urux8/photo.jpg?sz=128", "display_name": "Hat hout", "link": "https://stackoverflow.com/users/5593661/hat-hout"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1243, "favorite_count": 0, "accepted_answer_id": 42823028, "answer_count": 1, "score": 0, "last_activity_date": 1489629902, "creation_date": 1489620818, "question_id": 42822705, "link": "https://stackoverflow.com/questions/42822705/scrapy-typeerror-string-indices-must-be-integers-not-str", "title": "Scrapy: TypeError: string indices must be integers, not str?", "body": "<p>I wrote a spider  which scrape data from a news website:</p>\n\n<pre><code># -*- coding: utf-8 -*-\nimport scrapy\nfrom scrapy.linkextractors import LinkExtractor\nfrom scrapy.spiders import CrawlSpider, Rule\n\nfrom items import CravlingItem\n\nimport re\n\n\nclass CountrySpider(CrawlSpider):\n    name = 'Post_and_Parcel_Human_Resource'\n\n    allowed_domains = ['postandparcel.info']\n    start_urls = ['http://postandparcel.info/category/news/human-resources/']\n\n    rules = (\n        Rule(LinkExtractor(allow='',\n                           restrict_xpaths=(\n                               '//*[@id=\"page\"]/div[4]/div[1]/div[1]/div[1]/h1/a',\n                               '//*[@id=\"page\"]/div[4]/div[1]/div[1]/div[2]/h1/a',\n                               '//*[@id=\"page\"]/div[4]/div[1]/div[1]/div[3]/h1/a'\n                           )),\n             callback='parse_item',\n             follow=False),\n    )\n\n    def parse_item(self, response):\n        i = CravlingItem()\n        i['title'] = \" \".join(response.xpath('//div[@class=\"cd_left_big\"]/div/h1/text()')\n                              .extract()).strip() or \" \"\n        i['headline'] = self.clear_html(\n            \" \".join(response.xpath('//div[@class=\"cd_left_big\"]/div//div/div[1]/p')\n                                 .extract()).strip()) or \" \"\n        i['text'] = self.clear_html(\n            \" \".join(response.xpath('//div[@class=\"cd_left_big\"]/div//div/p').extract()).strip()) or \" \"\n        i['url'] = response.url\n        i['image'] = (\" \".join(response.xpath('//*[@id=\"middle_column_container\"]/div[2]/div/img/@src')\n                              .extract()).strip()).replace('wp-content/', 'http://postandparcel.info/wp-content/') or \" \"\n        i['author'] = \" \"\n        # print(\"\\n\")\n        # print(i)\n        return i\n\n    @staticmethod\n    def clear_html(html):\n        text = re.sub(r'&lt;(style).*?&lt;/\\1&gt;(?s)|&lt;[^&gt;]*?&gt;|\\n|\\t|\\r', '', html)\n        return text\n</code></pre>\n\n<p>and i also wrote a piece of code in the pipeline to refine the extracted texts:\nand here is the pipeline:</p>\n\n<pre><code>from scrapy.conf import settings\nfrom scrapy import log\nimport pymongo\nimport json\nimport codecs\nimport re\nclass RefineDataPipeline(object):\n    def process_item(self, item, spider):\n        #In this section: the below edits will be applied to all scrapy crawlers.\n    item['text'] =str( item['text'].encode(\"utf-8\"))\n    replacements ={\"U.S.\":\" US \", \" M \":\"Million\", \"same as the title\":\"\", \" MMH Editorial \":\"\", \" UPS \":\"United Parcel Service\", \" UK \":\" United Kingdom \",\" Penn \":\" Pennsylvania \", \" CIPS \":\" Chartered Institute of Procurement and Supply \", \" t \":\" tonnes \", \" Uti \":\" UTI \", \"EMEA\":\" Europe, Middle East and Africa \", \" APEC \":\" Asia-Pacific Economic Cooperation \", \" m \":\" million \", \" Q4 \":\" 4th quarter \", \"LLC\":\"\", \"Ltd\":\"\", \"Inc\":\"\", \"Published text\":\" Original text \"}\n\n\n    allparen= re.findall('\\(.+?\\)',item['text'])\n    for item in allparen:\n        if item[1].isupper() and item[2].isupper():\n            replacements[str(item)]=''\n        elif item[1].islower() or item[2].islower():\n            replacements[str(item)]=item[1:len(item)-1]\n        else:\n            try:\n                val = int(item[1:len(item)-1])\n                replacements[str(item)]= str(val)\n            except ValueError:\n                pass\n    def multireplace(s, replacements):\n        substrs = sorted(replacements, key=len, reverse=True)\n        regexp = re.compile('|'.join(map(re.escape, substrs)))\n            return regexp.sub(lambda match: replacements[match.group(0)],s)\n    item['text'] = multireplace(item['text'], replacements)\n    item['text'] = re.sub( '\\s+', ' ', item['text'] ).strip()\n    return item\n</code></pre>\n\n<p>but there is a huge problem which prevent the spider from scraping the data successfully: </p>\n\n<blockquote>\n  <p>Traceback (most recent call last):   File\n  \"/usr/lib/python2.7/dist-packages/twisted/internet/defer.py\", line\n  588, in _runCallbacks\n      current.result = callback(current.result, *args, **kw)   File \"/home/hathout/Desktop/updataed portcalls/thomas/thomas/pipelines.py\",\n  line 41, in process_item\n      item['text'] = multireplace(item['text'], replacements) TypeError: string indices must be integers, not str</p>\n</blockquote>\n\n<p>I really do not know how to overcome the \"TypeError: string indices must be integers, not str\" error. </p>\n"}, {"tags": ["python", "image", "zlib", "pillow", "image-compression"], "answers": [{"tags": [], "owner": {"reputation": 78348, "user_id": 1180620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FXaAg.jpg?s=128&g=1", "display_name": "Mark Adler", "link": "https://stackoverflow.com/users/1180620/mark-adler"}, "is_accepted": true, "score": 1, "last_activity_date": 1489645124, "creation_date": 1489645124, "answer_id": 42826616, "question_id": 42822699, "link": "https://stackoverflow.com/questions/42822699/surprising-behaviour-of-image-string-compression-with-zlib/42826616#42826616", "title": "Surprising behaviour of image/string compression with zlib", "body": "<p>As noted in the <a href=\"http://www.zlib.net/zlib_tech.html\" rel=\"nofollow noreferrer\">zlib technical notes</a>, the deflate format inherently has a maximum compression ratio of 1032:1. You are saturating the capability of the format when you get to the ratio on your plot of 10<sup>-3</sup>.</p>\n"}, {"tags": [], "owner": {"reputation": 383, "user_id": 5504692, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IfpUyEOZ8SI/AAAAAAAAAAI/AAAAAAAAAEU/j_Ka3vfEOGc/photo.jpg?sz=128", "display_name": "B Abali", "link": "https://stackoverflow.com/users/5504692/b-abali"}, "is_accepted": false, "score": 0, "last_activity_date": 1489777755, "last_edit_date": 1489777755, "creation_date": 1489777360, "answer_id": 42865320, "question_id": 42822699, "link": "https://stackoverflow.com/questions/42822699/surprising-behaviour-of-image-string-compression-with-zlib/42865320#42865320", "title": "Surprising behaviour of image/string compression with zlib", "body": "<p>Answering your question: \"why does the size of the compressed string keeps growing at such a rate?\".  The longest string zlib (deflate) can encode with one (Length,Distance) LZ pair is 258 bytes: in your case copy starting from 1 or 2 bytes ago for 258 bytes to encode runs of 0s or checkboard 1s and 0s.</p>\n\n<p>You have either all zeros or a checkboard pattern of 1s and 0s. Both of them can be encoded by the same (Length, Distance) pair.  Therefore, for every 258 bytes of input, the size of your output will increase by some amount which explains the ever increasing blue and green curves in your 1st graph.  </p>\n\n<p>Why is the compressed size not 1/258th of the original then?  Huffman encoding of the Length and Distance symbols are probably responsible for that.  In your case, when compression results in bunch of Length=258 and the Distance=0 symbols, then each one will be Huffman encoded by a 1 bit code, resulting in a (Length,Dist) pair encoding of 2 bits total. It means that each run of 258 bytes will occupy only 2 bits in the compressed output.  Asymptotically that is a compression ratio 1032 that Mark summarized above.</p>\n"}], "owner": {"reputation": 330, "user_id": 1940138, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/039907db51c03a99ca57a411df30fd50?s=128&d=identicon&r=PG", "display_name": "stefano", "link": "https://stackoverflow.com/users/1940138/stefano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 510, "favorite_count": 0, "accepted_answer_id": 42826616, "answer_count": 2, "score": 1, "last_activity_date": 1489777755, "creation_date": 1489620767, "last_edit_date": 1489636707, "question_id": 42822699, "link": "https://stackoverflow.com/questions/42822699/surprising-behaviour-of-image-string-compression-with-zlib", "title": "Surprising behaviour of image/string compression with zlib", "body": "<p>I am interested in finding out by how much images with different features can be compressed without loss. So I have generated 3 different types of bilevel images (all black, a b/w checkerboard, and a random b/w) and compressed the images using zlib. I have done the same using PIL (pillow) compressing to PNG and got the same results, but for simplicity let's stick to just using zlib (I believe PIL uses zlib as well). </p>\n\n<p>I do the following. I generate a numpy two dimensional array (of type uint8) of 0s and 1s and convert it to bytes (yes I lose information about the shape of the array by doing this). Then I pass the string to zlib that compresses it, and I compare the size of the raw image to that of the compressed image. I do this as a function of number of raw pixels (bytes). A minimal working example can be found <a href=\"https://gist.github.com/smcantab/5fd13cab03623f2dd4c18af01fec9c03\" rel=\"nofollow noreferrer\">here</a>. Up to 1024x1024 bytes the number of compressed bytes vs the number of raw bytes is the following (\"raw\" is simply the total number of pixels we start with, \"comp.\" stands for compressed and \"constant\" refers to all 0s, \"checkerboard\" to repeating 101010 and in \"random\" each pixel is randomly sampled)</p>\n\n<p><a href=\"https://i.stack.imgur.com/ivTUG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ivTUG.png\" alt=\"comparison of compressed images\"></a></p>\n\n<p>and the ratio of compressed bytes to raw bytes (coloured lines divided by the black line)</p>\n\n<p><a href=\"https://i.stack.imgur.com/SKGso.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SKGso.png\" alt=\"enter image description here\"></a></p>\n\n<p>I find the outcome strange, probably because I don't understand very well what zlib is doing. Why does the rate of compression change? It is amazingly efficient at first and then it reaches a constant rate (ratio is constant). </p>\n\n<p>For the \"constant\" (all 0s) example why does the size of the compressed string keeps growing at such a rate when I'm essentially adding little information by adding more 0s? (similar considerations can be made for the checkerboard, since it is periodic)</p>\n\n<p>I expected the size of the compressed image to be somewhat related to its Kolmogorov complexity, but it does not seem to be so.</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 1188, "user_id": 7244759, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/336538946712354/picture?type=large", "display_name": "spicypumpkin", "link": "https://stackoverflow.com/users/7244759/spicypumpkin"}, "edited": false, "score": 0, "creation_date": 1489621286, "post_id": 42822674, "comment_id": 72757093, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/29450475/replace-characters-using-re-sub-keep-one-character\">Replace characters using re.sub - keep one character</a>"}], "answers": [{"comments": [{"owner": {"reputation": 16849, "user_id": 1179026, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XmqKx.png?s=128&g=1", "display_name": "Nolen Royalty", "link": "https://stackoverflow.com/users/1179026/nolen-royalty"}, "edited": false, "score": 1, "creation_date": 1489620991, "post_id": 42822727, "comment_id": 72756996, "body": "<code>{1,4}</code> might be more appropriate than <code>+</code> since the user asked for &quot;any number from 1-1000&quot; (more generally of course this answer is correct)"}], "tags": [], "owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "is_accepted": false, "score": 4, "last_activity_date": 1489621023, "last_edit_date": 1489621023, "creation_date": 1489620916, "answer_id": 42822727, "question_id": 42822674, "link": "https://stackoverflow.com/questions/42822674/regular-expression-replace-1-3-format-with-from-1-to-3-format/42822727#42822727", "title": "regular expression replace &#39;1-3&#39; format with &#39;from 1 to 3&#39; format", "body": "<p>You can use <code>\\d+</code> to match more than one digits, here <code>+</code> means one or more; And then you can capture the digits pattern with parenthesis, use back reference to reformat the pattern the way you need:</p>\n\n<pre><code>import re\nre.sub(r\"(\\d+)-(\\d+)\", r\"from \\1 to \\2\", \"Repeat these steps 1-3 times and read the chapters 10-12 followed by 100-150 push-ups\")\n# 'Repeat these steps from 1 to 3 times and read the chapters from 10 to 12 followed by from 100 to 150 push-ups'\n</code></pre>\n\n<hr>\n\n<p>A more strict quantifier than <code>+</code> might be <code>{1,4}</code> which matches one to four digits as commented by @NolenRoyalty. so you can use <code>(\\d{1,4})-(\\d{1,4})</code> as well depending on your need. </p>\n"}, {"tags": [], "owner": {"reputation": 1123, "user_id": 7334796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40218277e3752bb31fb331861decd8b5?s=128&d=identicon&r=PG&f=1", "display_name": "J&#233;r&#244;me", "link": "https://stackoverflow.com/users/7334796/j%c3%a9r%c3%b4me"}, "is_accepted": false, "score": 1, "last_activity_date": 1489621353, "last_edit_date": 1489621353, "creation_date": 1489620934, "answer_id": 42822730, "question_id": 42822674, "link": "https://stackoverflow.com/questions/42822674/regular-expression-replace-1-3-format-with-from-1-to-3-format/42822730#42822730", "title": "regular expression replace &#39;1-3&#39; format with &#39;from 1 to 3&#39; format", "body": "<p>You have to add a quantifier like <code>+</code> which means 1 to * times.\n<code>r'\\d+\\D\\d+'</code></p>\n\n<p>Or as @Nolen Royalty suggested use  <code>{1,4}</code> like <code>r'\\d{1,4}\\D\\d{1,4}</code> so you just allow 1 to 4 digits</p>\n"}], "owner": {"reputation": 1, "user_id": 7717619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3187db1432ed8c5daeb62c31e37103d8?s=128&d=identicon&r=PG&f=1", "display_name": "hummer", "link": "https://stackoverflow.com/users/7717619/hummer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1489621353, "creation_date": 1489620638, "question_id": 42822674, "link": "https://stackoverflow.com/questions/42822674/regular-expression-replace-1-3-format-with-from-1-to-3-format", "title": "regular expression replace &#39;1-3&#39; format with &#39;from 1 to 3&#39; format", "body": "<p>I am inexperienced with regular expressions and need to know the following:\nI have a sentence:</p>\n\n<blockquote>\n  <p>\"Repeat these steps 1-3 times and read the chapters 10-12 followed by 100-150 push-ups\"</p>\n</blockquote>\n\n<p>How do I replace this with:</p>\n\n<blockquote>\n  <p>\"Repeat these steps from 1 to 3 times and read the chapters from 10 to 12 followed by from 100 to 150 pushups\"</p>\n</blockquote>\n\n<p>So the regular expression that I tried to use to identify the format 'digit-digit' is as follows:</p>\n\n<pre><code>r'\\d\\D\\d'\n</code></pre>\n\n<p>where the \\d's represent single digits and the \\D represents a non-digit.\nBut this only identifies the '1-3'... how can I get a regex that will take any number from 1-1000 and then the hyphen?\nOverall how do I replace any number followed by a hyphen with the 'from to' format shown above?</p>\n"}, {"tags": ["python", "arrays", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": true, "score": 4, "last_activity_date": 1489621094, "creation_date": 1489621094, "answer_id": 42822748, "question_id": 42822664, "link": "https://stackoverflow.com/questions/42822664/multiply-numpy-array-a-with-leading-dimension-of-numpy-array-b/42822748#42822748", "title": "multiply numpy.array a with leading dimension of numpy.array b", "body": "<p>You could use</p>\n\n<pre><code> (a * b.T).T\n</code></pre>\n\n<p>This produces a contiguous array if b is contiguous</p>\n\n<pre><code>(a*b.T).flags.contiguous\n# False\n(a*b.T).T.flags.contiguous\n# True\n</code></pre>\n"}], "owner": {"reputation": 36288, "user_id": 353337, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/500a1e2e864ae08f386afde2cd21add0?s=128&d=identicon&r=PG", "display_name": "Nico Schl&#246;mer", "link": "https://stackoverflow.com/users/353337/nico-schl%c3%b6mer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 42822748, "answer_count": 1, "score": 1, "last_activity_date": 1489621103, "creation_date": 1489620573, "question_id": 42822664, "link": "https://stackoverflow.com/questions/42822664/multiply-numpy-array-a-with-leading-dimension-of-numpy-array-b", "title": "multiply numpy.array a with leading dimension of numpy.array b", "body": "<p>I have two numpy arrays, <code>a</code> and <code>b</code>, where a has dimension 1 and the same length as the leading dimension as <code>b</code>, e.g.,</p>\n\n\n\n<pre><code>import numpy\na = numpy.random.rand(5)\nb1 = numpy.random.rand(5)\nb2 = numpy.random.rand(5, 3, 11)\n</code></pre>\n\n<p>I would like to multiply each \"row\" of <code>b</code> with the corresponding entry in <code>a</code>, and get an array of the same shape as <code>b</code>.</p>\n\n<p>Something like</p>\n\n\n\n<pre><code>a[:, None, None] * b2\n</code></pre>\n\n<p>only works if I know the dimensionality of <code>b</code> beforehand.</p>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1489620543, "post_id": 42822635, "comment_id": 72756839, "body": "<code>temp = list1</code> is not a copy. You are not creating a temporary list at all. See <a href=\"https://nedbatchelder.com/text/names.html\" rel=\"nofollow noreferrer\">nedbatchelder.com/text/names.html</a>"}, {"owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "edited": false, "score": 2, "creation_date": 1489620587, "post_id": 42822635, "comment_id": 72756856, "body": "Use <code>=</code>, not <code>==</code>."}], "answers": [{"tags": [], "owner": {"reputation": 13633, "user_id": 5916727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1508d2b83d8f3b1c7450023486045d?s=128&d=identicon&r=PG&f=1", "display_name": "student", "link": "https://stackoverflow.com/users/5916727/student"}, "is_accepted": true, "score": 0, "last_activity_date": 1489623025, "last_edit_date": 1495539981, "creation_date": 1489622546, "answer_id": 42822990, "question_id": 42822635, "link": "https://stackoverflow.com/questions/42822635/modifying-a-list-within-a-list-in-python/42822990#42822990", "title": "Modifying a list within a list in Python", "body": "<p>For copying the array of <code>list1</code> to <code>temp</code> since, <code>list1</code> is 2D array, as suggested by others we can use <code>deepcopy</code>. Refer to <a href=\"https://stackoverflow.com/a/6532908/5916727\">this link here.</a>. Alternatively, it can be done using list comprehension as well as shown <a href=\"https://stackoverflow.com/a/6533065/5916727\">here</a>.</p>\n\n<p>The array has <code>string</code> as element, so the conditional statements <code>if(temp[i][0] == 1)</code> and <code>if(temp[i+1][0] == 0)</code> can be replaced by <code>if(temp[i][0] == '1')</code> and <code>if(temp[i+1][0] == '0')</code>. And as mentioned above in the comments <code>temp[i+1][0] == 1</code> has to be replaced by <code>temp[i+1][0] = 1</code>. You can try following:</p>\n\n<pre><code>from copy import deepcopy\n\nlist1 = [['1', '1', '1'],\n         ['0', '0', '0'],\n         ['2', '2', '2']]\n\n# copying element from list1\ntemp = deepcopy(list1)\npossible = []\nfor i in range(len(temp)-1):\n    if(temp[i][0] == '1'):\n        if(temp[i+1][0] == '0'):\n            temp[i+1][0] = '1'\n\n\npossible = possible + temp\n\nprint('Contents of possible: ', possible)\nprint('Contents of list1: ', list1)\nprint('Contents of temp: ', temp)\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7717905, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DbJp7isqK-s/AAAAAAAAAAI/AAAAAAAAASk/buEqbAcTKIA/photo.jpg?sz=128", "display_name": "Judy Li", "link": "https://stackoverflow.com/users/7717905/judy-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "closed_date": 1489690642, "accepted_answer_id": 42822990, "answer_count": 1, "score": 1, "last_activity_date": 1489623025, "creation_date": 1489620460, "question_id": 42822635, "link": "https://stackoverflow.com/questions/42822635/modifying-a-list-within-a-list-in-python", "closed_reason": "Duplicate", "title": "Modifying a list within a list in Python", "body": "<p>I'm attempting to modifying the temp list and store the temp list in the possible list but I need to have list1 unchanged. When I ran this through Python, my temp list has not changed so I'm wondering where this has gone wrong.</p>\n\n<pre><code>list1 = [['1', '1', '1'],\n     ['0', '0', '0'],\n     ['2', '2', '2']]\n\ntemp = list1\npossible = []\n\nfor i in range(len(temp)-1):\n    if(temp[i][0] == 1):\n            if(temp[i+1][0] == 0):\n                    temp[i+1][0] == 1\n\npossible = possible + temp\ntemp = list1\n\nprint(possible)\n</code></pre>\n"}, {"tags": ["python", "deep-learning", "keras", "conv-neural-network"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1489621219, "post_id": 42822486, "comment_id": 72757064, "body": "What is the C++ part of the question?"}, {"owner": {"reputation": 8468, "user_id": 1586200, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/111c497a3eb270092100e5ee807d9994?s=128&d=identicon&r=PG&f=1", "display_name": "Autonomous", "link": "https://stackoverflow.com/users/1586200/autonomous"}, "edited": false, "score": 0, "creation_date": 1489621301, "post_id": 42822486, "comment_id": 72757100, "body": "Nothing... I have removed the tag and added some relevant tags."}, {"owner": {"reputation": 8468, "user_id": 1586200, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/111c497a3eb270092100e5ee807d9994?s=128&d=identicon&r=PG&f=1", "display_name": "Autonomous", "link": "https://stackoverflow.com/users/1586200/autonomous"}, "edited": false, "score": 0, "creation_date": 1489621557, "post_id": 42822486, "comment_id": 72757183, "body": "I am assuming you have <code>(X_valid, Y_valid)</code> defined in the code. If so, check if you can train using <code>ImageDataGenerator</code> and <code>train_on_batch()</code>. If you could, then at least there is no error in the model."}], "answers": [{"comments": [{"owner": {"reputation": 3463, "user_id": 277345, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/1E5Lz.jpg?s=128&g=1", "display_name": "Andrey Nikishaev", "link": "https://stackoverflow.com/users/277345/andrey-nikishaev"}, "edited": false, "score": 0, "creation_date": 1507048662, "post_id": 42823026, "comment_id": 80053071, "body": "Nope. I updates keras but still getting this exception"}, {"owner": {"reputation": 10189, "user_id": 7137636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84d35d5c39a7a166bed8ec26d3d5136f?s=128&d=identicon&r=PG&f=1", "display_name": "Nassim Ben", "link": "https://stackoverflow.com/users/7137636/nassim-ben"}, "reply_to_user": {"reputation": 3463, "user_id": 277345, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/1E5Lz.jpg?s=128&g=1", "display_name": "Andrey Nikishaev", "link": "https://stackoverflow.com/users/277345/andrey-nikishaev"}, "edited": false, "score": 0, "creation_date": 1507049360, "post_id": 42823026, "comment_id": 80053419, "body": "You might be a little more specific on the code you are using qnd version of your software."}, {"owner": {"reputation": 3463, "user_id": 277345, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/1E5Lz.jpg?s=128&g=1", "display_name": "Andrey Nikishaev", "link": "https://stackoverflow.com/users/277345/andrey-nikishaev"}, "edited": false, "score": 0, "creation_date": 1507050979, "post_id": 42823026, "comment_id": 80054276, "body": "im using Keras 2.0.8 and here is code: <a href=\"https://gist.github.com/creotiv/c7fb0328de22ec021f405ebbdc202100\" rel=\"nofollow noreferrer\">gist.github.com/creotiv/c7fb0328de22ec021f405ebbdc202100</a>"}, {"owner": {"reputation": 10189, "user_id": 7137636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84d35d5c39a7a166bed8ec26d3d5136f?s=128&d=identicon&r=PG&f=1", "display_name": "Nassim Ben", "link": "https://stackoverflow.com/users/7137636/nassim-ben"}, "reply_to_user": {"reputation": 3463, "user_id": 277345, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/1E5Lz.jpg?s=128&g=1", "display_name": "Andrey Nikishaev", "link": "https://stackoverflow.com/users/277345/andrey-nikishaev"}, "edited": false, "score": 0, "creation_date": 1507051814, "post_id": 42823026, "comment_id": 80054757, "body": "What about the error trace ? You use fit not fit_generator.. it cant be the same error."}, {"owner": {"reputation": 3463, "user_id": 277345, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/1E5Lz.jpg?s=128&g=1", "display_name": "Andrey Nikishaev", "link": "https://stackoverflow.com/users/277345/andrey-nikishaev"}, "edited": false, "score": 0, "creation_date": 1507052249, "post_id": 42823026, "comment_id": 80055021, "body": "i just commented it cause it was not working. but i already find issue, i forget to pass steps_per_epoch to it(bad eyesight). Problem that it gave different error, so i didnt see problem."}, {"owner": {"reputation": 10189, "user_id": 7137636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84d35d5c39a7a166bed8ec26d3d5136f?s=128&d=identicon&r=PG&f=1", "display_name": "Nassim Ben", "link": "https://stackoverflow.com/users/7137636/nassim-ben"}, "reply_to_user": {"reputation": 3463, "user_id": 277345, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/1E5Lz.jpg?s=128&g=1", "display_name": "Andrey Nikishaev", "link": "https://stackoverflow.com/users/277345/andrey-nikishaev"}, "edited": false, "score": 1, "creation_date": 1507052340, "post_id": 42823026, "comment_id": 80055071, "body": "Okay :) well glad you fixed it... the software evolves, the error message evolves probably too. This thread is old"}], "tags": [], "owner": {"reputation": 10189, "user_id": 7137636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84d35d5c39a7a166bed8ec26d3d5136f?s=128&d=identicon&r=PG&f=1", "display_name": "Nassim Ben", "link": "https://stackoverflow.com/users/7137636/nassim-ben"}, "is_accepted": true, "score": 3, "last_activity_date": 1500529516, "last_edit_date": 1592644375, "creation_date": 1489622797, "answer_id": 42823026, "question_id": 42822486, "link": "https://stackoverflow.com/questions/42822486/keras-model-fit-generator-odd-error/42823026#42823026", "title": "Keras model fit_generator odd error", "body": "<p>It might come from the new API (Keras 2.0 released yesterday), the <code>fit_generator()</code> now takes <code>steps_per_epoch</code> argument instead of <code>samples_per_epoch</code>.</p>\n<p>The <code>steps_per_epoch</code> is typically <code>samples_per_epoch</code> / <code>batch_size</code>.</p>\n<p>You can find this info <a href=\"https://keras.io/models/model/#methods\" rel=\"nofollow noreferrer\">in the documentation</a>.</p>\n<p>Does it help?</p>\n"}], "owner": {"reputation": 207, "user_id": 3694146, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1277814933/picture?type=large", "display_name": "Sam", "link": "https://stackoverflow.com/users/3694146/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5116, "favorite_count": 0, "accepted_answer_id": 42823026, "answer_count": 1, "score": 3, "last_activity_date": 1500529516, "creation_date": 1489619703, "last_edit_date": 1489621283, "question_id": 42822486, "link": "https://stackoverflow.com/questions/42822486/keras-model-fit-generator-odd-error", "title": "Keras model fit_generator odd error", "body": "<p>I have the following code:</p>\n\n<pre><code>    datagen = ImageDataGenerator(\n        rescale=1./255,\n        target_size=(128, 128),\n        shear_range=0.2,\n        zoom_range=0.2,\n        horizontal_flip=True)\n\n    test_datagen = ImageDataGenerator(\n        rescale=1./255,\n        target_size=(128, 128)\n    )\n\n    datagen.fit(X_train)\n\n    model.fit_generator(\n        datagen.flow(X_train, Y_train),\n        samples_per_epoch=len(X_train),\n        epochs=30,\n        verbose=1,\n        validation_data=(X_valid, Y_valid))\n</code></pre>\n\n<p>Which throws this unusual error</p>\n\n<pre><code>  Traceback (most recent call last):\n      File \"cnn.py\", line 258, in &lt;module&gt;\n          models = run_cross_validation_create_models(num_folds)\n      File \"cnn.py\", line 205, in run_cross_validation_create_models\n          validation_data=(X_valid, Y_valid))\n      TypeError: fit_generator() takes at least 4 arguments (5 given)\n</code></pre>\n\n<p>Can somebody explain what is going wrong here, I am loading in a set of 3700 images.</p>\n"}, {"tags": ["python", "python-3.x", "types", "typeerror"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1489619774, "post_id": 42822469, "comment_id": 72756580, "body": "What is <code>months[1292.23]</code> supposed to be? Why are you trying to append that to <code>goodmonths</code>?"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1489619944, "post_id": 42822469, "comment_id": 72756630, "body": "What is the value of <code>net</code>?"}, {"owner": {"reputation": 13, "user_id": 7717949, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155004029126411/picture?type=large", "display_name": "Josmolio", "link": "https://stackoverflow.com/users/7717949/josmolio"}, "edited": false, "score": 0, "creation_date": 1489624085, "post_id": 42822469, "comment_id": 72757883, "body": "The idea is to take  the value from an existing list (net) and add it to a new  list (good). Because each value in net[] corresponds to a month, I also want to have the month (i.e index) from the previous list stored somewhere, that was the idea for the goodmonths list."}], "answers": [{"tags": [], "owner": {"reputation": 3, "user_id": 7711713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b890cbd44f55fe07a5afcc2daa2f5329?s=128&d=identicon&r=PG&f=1", "display_name": "cgkevork", "link": "https://stackoverflow.com/users/7711713/cgkevork"}, "is_accepted": false, "score": 0, "last_activity_date": 1489619794, "creation_date": 1489619794, "answer_id": 42822499, "question_id": 42822469, "link": "https://stackoverflow.com/questions/42822469/append-list-of-strings-to-a-new-list-in-function/42822499#42822499", "title": "append list of strings to a new list in function", "body": "<p>It Looks like you are trying to integrate your loop using a float variables (i), they need to be straight integers.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7267189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G7aD6.jpg?s=128&g=1", "display_name": "Jan", "link": "https://stackoverflow.com/users/7267189/jan"}, "is_accepted": false, "score": 0, "last_activity_date": 1489620045, "creation_date": 1489620045, "answer_id": 42822550, "question_id": 42822469, "link": "https://stackoverflow.com/questions/42822469/append-list-of-strings-to-a-new-list-in-function/42822550#42822550", "title": "append list of strings to a new list in function", "body": "<p>The problem is the <code>months[i]</code> as an index can't be of float type (e.g. what would the 4.5th item be?) so you'd have to convert it into an integer. The easiest way to achieve this should be replacing <code>months[i]</code> with <code>months[int(i)]</code></p>\n"}, {"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1489620084, "creation_date": 1489620084, "answer_id": 42822557, "question_id": 42822469, "link": "https://stackoverflow.com/questions/42822469/append-list-of-strings-to-a-new-list-in-function/42822557#42822557", "title": "append list of strings to a new list in function", "body": "<p>I think you're trying to use one variable in two incompatible ways: as both the list index <em>and</em> the corresponding value.  Try this:</p>\n\n<pre><code>for mon in range(12): #----float\n    i = net[mon]\n    if i &gt; average: #---also float\n        good.append(i)\n        goodmonths.append(months[mon])\n    elif i &lt; average:\n        bad.append(i)\n        badmonths.append(months[mon])\n</code></pre>\n\n<p><strong>mon</strong> is the list index; <strong>i</strong> is the value from <strong>net</strong>.  You should change these to desscriptive variable names.</p>\n"}, {"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1489620153, "creation_date": 1489620153, "answer_id": 42822573, "question_id": 42822469, "link": "https://stackoverflow.com/questions/42822469/append-list-of-strings-to-a-new-list-in-function/42822573#42822573", "title": "append list of strings to a new list in function", "body": "<p>It looks like you're using the value in <code>net</code> where you need to use the index, to get the corresponding element from the <code>months</code> array. Use <code>enumerate()</code> to get the indexes and values when looping:</p>\n\n<pre><code>for i, val in enumerate(net):\n    if val &gt; average:\n        good.append(val)\n        goodmonths.append(months[i])\n    else:\n        bad.append(val)\n        badmonths.append(months[i])\n</code></pre>\n\n<p>BTW, your code completely ignores the case where the value is exactly equal to the average. The opposite of <code>&gt;</code> is <code>&lt;=</code>, not <code>&lt;</code>. But if there are just two cases, use <code>else</code> rather than <code>elif</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 7717949, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155004029126411/picture?type=large", "display_name": "Josmolio", "link": "https://stackoverflow.com/users/7717949/josmolio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1489620153, "creation_date": 1489619613, "question_id": 42822469, "link": "https://stackoverflow.com/questions/42822469/append-list-of-strings-to-a-new-list-in-function", "title": "append list of strings to a new list in function", "body": "<p>I am receiving a type error that I do not understand. I'd like to compile a list of the better/worse than average months with the month names in another list to label them. Still very new to this so I bet there is a really intuitive way to do this that I don't know yet.\nComments are the types (to be) included:</p>\n\n<pre><code>good= [] #---- float\nbad= [] #---- float\ngoodmonths = [] #---- string (month names)\nbadmonths = [] #---string\n\nfor i in net: #----float\n    if i &gt; average: #---also float\n        good.append(i)\n        goodmonths.append(months[i])\n    elif i &lt; average:\n        bad.append(i)\n        badmonths.append(months[i])\n\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n&lt;ipython-input-136-362a333d8546&gt; in &lt;module&gt;()\n      6     if i &gt; average:\n      7         good.append(i)\n----&gt; 8         goodmonths.append(months[i])\n      9     elif i &lt; average:\n     10         bad.append(i)\n\nTypeError: list indices must be integers or slices, not float\n</code></pre>\n\n<p>I'd like to receive an output like this:</p>\n\n<pre><code>Good months:\nJan: 1292.23\nFeb: 1738.09\netc... ditto for badmonths\n</code></pre>\n"}, {"tags": ["python", "permutation", "symmetry"], "comments": [{"owner": {"reputation": 215, "user_id": 6466130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oZYkp.jpg?s=128&g=1", "display_name": "jjgoings", "link": "https://stackoverflow.com/users/6466130/jjgoings"}, "edited": false, "score": 0, "creation_date": 1489620210, "post_id": 42822401, "comment_id": 72756725, "body": "@EricDuminil Whoops. <code>cd</code> is a compound index and should be incremented by one after the <code>c</code> and <code>d</code> loops. Good catch. Fixed."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1489620296, "post_id": 42822401, "comment_id": 72756751, "body": "Did you forget it in your code or just in the question?"}, {"owner": {"reputation": 3627, "user_id": 1753919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m9UUd.jpg?s=128&g=1", "display_name": "plasmon360", "link": "https://stackoverflow.com/users/1753919/plasmon360"}, "edited": false, "score": 0, "creation_date": 1489620931, "post_id": 42822401, "comment_id": 72756980, "body": "May be you could use np.fromfunction() which takes the coordinates and evaluates a function at those points, lets say your function is a<b>2+b</b>2+c<b>2+d</b>2 (substitute with your permutational symmetry function), you could use  A = np.fromfunction(lambda i, j, k, m: i<b>2+j</b>2+k<b>2+m</b>2, (N,N,N,N))"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1489656606, "post_id": 42822401, "comment_id": 72769872, "body": "<code>f(x,x,y,y)</code> is always <code>0</code>, right?"}, {"owner": {"reputation": 215, "user_id": 6466130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oZYkp.jpg?s=128&g=1", "display_name": "jjgoings", "link": "https://stackoverflow.com/users/6466130/jjgoings"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1489681082, "post_id": 42822401, "comment_id": 72788080, "body": "@EricDuminil yes, f(x,x,y,y) is always 0."}], "answers": [{"comments": [{"owner": {"reputation": 215, "user_id": 6466130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oZYkp.jpg?s=128&g=1", "display_name": "jjgoings", "link": "https://stackoverflow.com/users/6466130/jjgoings"}, "edited": false, "score": 0, "creation_date": 1489682697, "post_id": 42823075, "comment_id": 72789262, "body": "Thanks. I also went ahead and added the condition <code>if not a == b and c == d</code>, which cuts the cost down even further. I don&#39;t understand how you got the numbers 156 and 112, though?"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 215, "user_id": 6466130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oZYkp.jpg?s=128&g=1", "display_name": "jjgoings", "link": "https://stackoverflow.com/users/6466130/jjgoings"}, "edited": false, "score": 0, "creation_date": 1489705242, "post_id": 42823075, "comment_id": 72800951, "body": "@jjgoings: I updated the answer. Not that it should be <code>and not (a==b and c==d)</code>, not just <code>not a == b and c == d</code>. You can now test it yourself, and see if some combinations are missing."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 2, "last_activity_date": 1489705171, "last_edit_date": 1489705171, "creation_date": 1489623088, "answer_id": 42823075, "question_id": 42822401, "link": "https://stackoverflow.com/questions/42822401/how-to-exploit-permutational-symmetry-in-this-loop/42823075#42823075", "title": "How to exploit permutational symmetry in this loop?", "body": "<p>Interesting problem!</p>\n\n<p>For <code>N=3</code>, there should be 81 combinations with 4 elements.\nWith your loops, you create 156.</p>\n\n<p>It looks like the main source of duplicates is the <code>or</code> in <code>(a &gt;= b) or (c &gt;= d)</code>, it is too permissive. <code>(a &gt;= b) and (c &gt;= d)</code> would be too restrictive, though.</p>\n\n<p>You could compare <code>a + c &gt;= b + d</code>, though. To gain a few ms (if anything), you could save <code>a + c</code> as <code>ac</code> inside the 3rd loop :</p>\n\n<pre><code>A = np.zeros((N,N,N,N))\nab = 0\nfor a in range(N):\n    for b in range(N):\n        ab += 1\n        cd  = 0\n        for c in range(N):\n            ac = a + c\n            for d in range(N):\n                cd += 1\n                if (ab &gt;= cd and ac &gt;= b+d):\n                    A[a,b,c,d] = A[c,d,a,b] = f(a,b,c,d)\n                    A[b,a,d,c] = A[d,c,b,a] = -A[a,b,c,d]\n</code></pre>\n\n<p>With this code, we create 112 combinations, so there are less duplicates than with your method, but there might still be some optimizations left.</p>\n\n<h1>Update</h1>\n\n<p>Here's the code I used to calculate the number of created combinations :</p>\n\n<pre><code>from itertools import product\n\nN = 3\nab = 0\n\nall_combinations = set(product(range(N), repeat=4))\nzeroes = ((x, x, y, y) for x, y in product(range(N), repeat=2))\ncalculated = list()\n\nfor a in range(N):\n    for b in range(N):\n        ab += 1\n        cd = 0\n        for c in range(N):\n            ac = a + c\n            for d in range(N):\n                cd += 1\n                if (ab &gt;= cd and ac &gt;= b + d) and not (a == b and c == d):\n                    calculated.append((a, b, c, d))\n                    calculated.append((c, d, a, b))\n                    calculated.append((b, a, d, c))\n                    calculated.append((d, c, b, a))\n\nmissing = all_combinations - set(calculated) - set(zeroes)\n\nif missing:\n    print \"Some sets weren't calculated :\"\n    for s in missing:\n        print s\nelse:\n    print \"All cases were covered\"\n    print len(calculated)\n</code></pre>\n\n<p>With <code>and not (a==b and c==d)</code>, the number is down to 88.</p>\n"}], "owner": {"reputation": 215, "user_id": 6466130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oZYkp.jpg?s=128&g=1", "display_name": "jjgoings", "link": "https://stackoverflow.com/users/6466130/jjgoings"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 1, "accepted_answer_id": 42823075, "answer_count": 1, "score": 5, "last_activity_date": 1489705171, "creation_date": 1489619283, "last_edit_date": 1489620159, "question_id": 42822401, "link": "https://stackoverflow.com/questions/42822401/how-to-exploit-permutational-symmetry-in-this-loop", "title": "How to exploit permutational symmetry in this loop?", "body": "<p>I have a scalar function <code>f(a,b,c,d)</code> that has the following permutational symmetry</p>\n\n<p><code>f(a,b,c,d) = f(c,d,a,b) = -f(b,a,d,c) = -f(d,c,b,a)</code></p>\n\n<p>I'm using it to fully populate a 4D array. This code (using python/NumPy) below works:</p>\n\n<pre><code>A = np.zeros((N,N,N,N))\nfor a in range(N):\n    for b in range(N):\n        for c in range(N):\n            for d in range(N):\n                A[a,b,c,d] = f(a,b,c,d)\n</code></pre>\n\n<p>But obviously I'd like to exploit symmetry to cut down on the execution time of this section of code. I've tried:</p>\n\n<pre><code>A = np.zeros((N,N,N,N))\nab = 0\nfor a in range(N):\n    for b in range(N):\n        ab += 1\n        cd  = 0\n        for c in range(N):\n            for d in range(N):\n                cd += 1\n                if ab &gt;= cd:\n                    A[a,b,c,d] = A[c,d,a,b] = f(a,b,c,d)\n</code></pre>\n\n<p>Which cuts the execution time in half. But for the last symmetry I tried:</p>\n\n<pre><code>A = np.zeros((N,N,N,N))\nab = 0\nfor a in range(N):\n    for b in range(N):\n        ab += 1\n        cd  = 0\n        for c in range(N):\n            for d in range(N):\n                cd += 1\n                if ab &gt;= cd:\n                    if ((a &gt;= b) or (c &gt;= d)):\n                        A[a,b,c,d] = A[c,d,a,b] = f(a,b,c,d)\n                        A[b,a,d,c] = A[d,c,b,a] = -A[a,b,c,d]\n</code></pre>\n\n<p>Which works, but doesn't give me near another factor of two speed-up. I don't think it is right for the right reasons, but can't see why.</p>\n\n<p>How can I better exploit this particular permutational symmetry here?</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 2992991, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9VAG1.jpg?s=128&g=1", "display_name": "Hkk", "link": "https://stackoverflow.com/users/2992991/hkk"}, "edited": false, "score": 0, "creation_date": 1489634666, "post_id": 42822445, "comment_id": 72760576, "body": "Thanks for answering my question! I guess i got confused by the the df.assign(ln_A = lambda x: np.log(x.A)) example in the doc. So what is the callable and how is it called in df.assign?"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 0, "last_activity_date": 1489620315, "last_edit_date": 1489620315, "creation_date": 1489619500, "answer_id": 42822445, "question_id": 42822382, "link": "https://stackoverflow.com/questions/42822382/using-assign-and-lambda-to-combine-year-and-month-columns-into-1-date-column/42822445#42822445", "title": "Using assign and lambda to combine year and month columns into 1 date column", "body": "<p>All your columns are appropriately named to use <code>pd.to_datetime</code> directly on the <code>df</code></p>\n\n<pre><code>df.assign(Dt=pd.to_datetime(df))\n\n   Year  Month  Day  Hour                  Dt\n0  2012      1    1     0 2012-01-01 00:00:00\n1  2012      1    1     1 2012-01-01 01:00:00\n2  2012      1    1     2 2012-01-01 02:00:00\n3  2012      1    1     3 2012-01-01 03:00:00\n</code></pre>\n\n<p>which simplifies to:</p>\n\n<pre><code>df.assign(Dt=pd.to_datetime)\n</code></pre>\n\n<hr>\n\n<p><a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.assign.html\" rel=\"nofollow noreferrer\">From the docs</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/ejtLI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ejtLI.png\" alt=\"enter image description here\"></a></p>\n\n<p>The passed callable is not called once per row as you think.</p>\n"}], "owner": {"reputation": 101, "user_id": 2992991, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9VAG1.jpg?s=128&g=1", "display_name": "Hkk", "link": "https://stackoverflow.com/users/2992991/hkk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 994, "favorite_count": 0, "accepted_answer_id": 42822445, "answer_count": 1, "score": 1, "last_activity_date": 1530256650, "creation_date": 1489619177, "last_edit_date": 1530256650, "question_id": 42822382, "link": "https://stackoverflow.com/questions/42822382/using-assign-and-lambda-to-combine-year-and-month-columns-into-1-date-column", "title": "Using assign and lambda to combine year and month columns into 1 date column", "body": "<p>I have an Excel file with the following columns that I read into a pandas dataframe:</p>\n\n<pre><code>Year    Month   Day   Hour\n2012    1       1     0\n2012    1       1     1\n2012    1       1     2\n2012    1       1     3`\n</code></pre>\n\n<p>I'm trying to combine these 3 columns into a datetime column using the following code:</p>\n\n<pre><code>df1 = df.assign(Dt = lambda row: datetime.datetime(row['Year'].astype(int), row['Month'].astype(int)...))\n</code></pre>\n\n<p>This code gives the following error: \n   <code>Type Error: Cannot convert the series to (Type 'int')</code></p>\n\n<p>I know I can just combine these columns into a string and use <code>strptime</code> to convert to <code>datetime</code>. HoweverI i want to try to understand what i'm doing wrong with assign and lambda here.</p>\n"}, {"tags": ["python", "opencv", "computer-vision", "feature-detection"], "comments": [{"owner": {"reputation": 1018, "user_id": 5156102, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DNozE.png?s=128&g=1", "display_name": "mark jay", "link": "https://stackoverflow.com/users/5156102/mark-jay"}, "edited": false, "score": 0, "creation_date": 1489622418, "post_id": 42822323, "comment_id": 72757441, "body": "have you checked out <code>cv2.goodFeaturesToTrack()</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 963, "user_id": 3102725, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/02eac094b36fdbb0574dff5e53d4ffd1?s=128&d=identicon&r=PG&f=1", "display_name": "agupta231", "link": "https://stackoverflow.com/users/3102725/agupta231"}, "edited": false, "score": 0, "creation_date": 1489676530, "post_id": 42823112, "comment_id": 72784432, "body": "I tried using the good features to track, but the second I took a real world photo (from a phone or something similar), the gradients in the lighting really gave the goodFeaturesToTrack a hard time."}, {"owner": {"reputation": 1018, "user_id": 5156102, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DNozE.png?s=128&g=1", "display_name": "mark jay", "link": "https://stackoverflow.com/users/5156102/mark-jay"}, "reply_to_user": {"reputation": 963, "user_id": 3102725, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/02eac094b36fdbb0574dff5e53d4ffd1?s=128&d=identicon&r=PG&f=1", "display_name": "agupta231", "link": "https://stackoverflow.com/users/3102725/agupta231"}, "edited": false, "score": 0, "creation_date": 1489678278, "post_id": 42823112, "comment_id": 72785800, "body": "I see. good illumination makes processing a lot easier, but the BilateralFilter can help a bit. Can you share one of these real world images?"}, {"owner": {"reputation": 963, "user_id": 3102725, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/02eac094b36fdbb0574dff5e53d4ffd1?s=128&d=identicon&r=PG&f=1", "display_name": "agupta231", "link": "https://stackoverflow.com/users/3102725/agupta231"}, "edited": false, "score": 0, "creation_date": 1489961699, "post_id": 42823112, "comment_id": 72887069, "body": "I modified the original post and included an example image."}], "tags": [], "owner": {"reputation": 1018, "user_id": 5156102, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DNozE.png?s=128&g=1", "display_name": "mark jay", "link": "https://stackoverflow.com/users/5156102/mark-jay"}, "is_accepted": false, "score": 0, "last_activity_date": 1489623329, "creation_date": 1489623329, "answer_id": 42823112, "question_id": 42822323, "link": "https://stackoverflow.com/questions/42822323/detecting-the-corners-of-an-incomplete-shape-with-opencv-in-python/42823112#42823112", "title": "Detecting the corners of an incomplete shape with OpenCV in python", "body": "<p>I would try using <code>cv2.goodFeaturesToTrack()</code>. you can literally copy/paste the code from the openCV docs <a href=\"http://docs.opencv.org/3.0-beta/doc/py_tutorials/py_feature2d/py_shi_tomasi/py_shi_tomasi.html\" rel=\"nofollow noreferrer\">LINK</a></p>\n\n<pre><code>import numpy as np\nimport cv2\nimport matplotlib.pyplot as plt\n\nimg = cv2.imread('test.png')\ngray = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)\nblur = cv2.bilateralFilter(gray, 16, 50, 50)\n\ncorners = cv2.goodFeaturesToTrack(blur, 40, 0.1, 10)\ncorners = np.int0(corners)\n\nfor i in corners:\n    x,y = i.ravel()\n    cv2.circle(img,(x,y),3,255,-1)\n\nplt.circle(img, (x, y), 3, 255, -1)\nplt.show()\n</code></pre>\n\n<p>This is what I get<a href=\"https://i.stack.imgur.com/0kmlh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0kmlh.png\" alt=\"results\"></a></p>\n\n<p>you may want to play with the bilateral filter and the goodFeaturesToTrack  parameters.</p>\n\n<p>Another option would be to use a match filter of your corners (that way you don't get all the hits on the words).</p>\n"}, {"tags": [], "owner": {"reputation": 18948, "user_id": 3051961, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b81cbd6deac24f756452266ff2e8d3ce?s=128&d=identicon&r=PG", "display_name": "ZdaR", "link": "https://stackoverflow.com/users/3051961/zdar"}, "is_accepted": false, "score": 0, "last_activity_date": 1489635134, "creation_date": 1489635134, "answer_id": 42824808, "question_id": 42822323, "link": "https://stackoverflow.com/questions/42822323/detecting-the-corners-of-an-incomplete-shape-with-opencv-in-python/42824808#42824808", "title": "Detecting the corners of an incomplete shape with OpenCV in python", "body": "<p>What you need to do is find all the contours in the given image using <a href=\"http://docs.opencv.org/3.2.0/d4/d73/tutorial_py_contours_begin.html\" rel=\"nofollow noreferrer\"><code>cv2.findContours()</code></a>, Then find the bounding rect of each contour and find the minX, minY, maxX, maxY among all the contour rects, this will give you a outer bounding rect which covers all the smaller contours and hence your desired results.</p>\n\n<pre><code>import cv2\nimport numpy as np\n\nimg = cv2.imread(\"/Users/anmoluppal/Downloads/mjut8.png\", 0)\n\n# Threshold and Invert the image to find the contours\nret, thresh = cv2.threshold(img, 10, 255, cv2.THRESH_BINARY_INV)\n\n# Find the contours\nim, contours, hierarchy = cv2.findContours(thresh.copy(), cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_NONE)\n\nx, y, r, b = [img.shape[1]/2, img.shape[0]/2, 0, 0]\n# Iterate over all the contours, and keep updating the bounding rect\n\nfor cnt in contours:\n    rect = cv2.boundingRect(cnt)\n    if rect[0] &lt; x:\n        x = rect[0]\n    if rect[1] &lt; y:\n        y = rect[1]\n    if rect[0] + rect[2] &gt; r:\n        r = rect[0] + rect[2]\n    if rect[1] + rect[3] &gt; b:\n        b = rect[1] + rect[3]\n\nbounding_rect = [x, y, r-x, b-y]\n\n# Debugging Purpose.\ncv2.rectangle(img, (x, y), (r, b), np.array([0, 255, 0]), 3)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/nlLuL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nlLuL.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 963, "user_id": 3102725, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/02eac094b36fdbb0574dff5e53d4ffd1?s=128&d=identicon&r=PG&f=1", "display_name": "agupta231", "link": "https://stackoverflow.com/users/3102725/agupta231"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1692, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1489961623, "creation_date": 1489618897, "last_edit_date": 1489961623, "question_id": 42822323, "link": "https://stackoverflow.com/questions/42822323/detecting-the-corners-of-an-incomplete-shape-with-opencv-in-python", "title": "Detecting the corners of an incomplete shape with OpenCV in python", "body": "<p>I'm working on a program to detect the edges of a shape on a page, and then crop and wrap the image to zoom in on the shape. However, the problem is that my shape is bound by only a marker on each corner. Following is an example image that I am trying to work with:</p>\n\n<p><a href=\"https://i.stack.imgur.com/mjut8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mjut8.png\" alt=\"Example\"></a></p>\n\n<p>How would I be able to determine the corners of the image? I've tried a contour analysis, and even a feature matching algorithm, but none of them give me the reliability that I need. </p>\n\n<p>As I'm new to CV in general, is there a handy function that is capable of solving my exact problem?</p>\n\n<p>Thanks!</p>\n\n<p><strong>EDIT</strong>: Due to variable lighting, I added an example image of what I'm trying to deal with: </p>\n\n<p><a href=\"https://i.stack.imgur.com/uwVGx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uwVGx.png\" alt=\"Image Raw\"></a></p>\n"}, {"tags": ["python", "sklearn-pandas"], "comments": [{"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1489658030, "post_id": 42822318, "comment_id": 72770922, "body": "Show us the code for <code>plot_learning_curve</code> and the web tutorial link you are following for that."}, {"owner": {"reputation": 17, "user_id": 7551951, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a18564692006c47fb086761f0a1573cd?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Hee", "link": "https://stackoverflow.com/users/7551951/frank-hee"}, "reply_to_user": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1489793763, "post_id": 42822318, "comment_id": 72843403, "body": "I updated the post with required code. Could you help solve the problem?"}, {"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 1, "creation_date": 1490013719, "post_id": 42822318, "comment_id": 72907250, "body": "How are you generating <code>x_train, y_train, x_test, y_test</code>? And in which line are you getting the error? Please post full stack trace of error."}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 5609968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56caa654fe82bcad9bf44d6a5a93459a?s=128&d=identicon&r=PG", "display_name": "Xfox", "link": "https://stackoverflow.com/users/5609968/xfox"}, "is_accepted": false, "score": 0, "last_activity_date": 1567465134, "creation_date": 1567465134, "answer_id": 57763349, "question_id": 42822318, "link": "https://stackoverflow.com/questions/42822318/learning-curve-error/57763349#57763349", "title": "Learning_curve error", "body": "<p>Try adding the <code>shuffle</code> parameter to the call to <code>learning_curve</code>:</p>\n\n<pre><code>train_sizes, train_scores, test_scores = learning_curve(estimator, X, Y, cv=cv,\n scoring=scoring, n_jobs=n_jobs, train_sizes=train_sizes, shuffle=True)\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 7551951, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a18564692006c47fb086761f0a1573cd?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Hee", "link": "https://stackoverflow.com/users/7551951/frank-hee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 455, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1567465134, "creation_date": 1489618881, "last_edit_date": 1489790688, "question_id": 42822318, "link": "https://stackoverflow.com/questions/42822318/learning-curve-error", "title": "Learning_curve error", "body": "<p>I tried to use plot_learning_curve to plot logistic regression below, but got error. Could anyone help?</p>\n\n<pre><code>from sklearn.linear_model import LogisticRegression\n\nlg = LogisticRegression(random_state=42, penalty='l1')\nparameters = {'C':[0.5]}\n\n\n# Use classification accuracy to compare parameter combinations\nacc_scorer_lg = make_scorer(accuracy_score)\n\n# Run a grid search for the Logistic Regression classifier and all the selected parameters\ngrid_obj_lg = GridSearchCV(lg, parameters, scoring=acc_scorer_lg)\ngrid_obj_lg = grid_obj_lg.fit(x_train, y_train)\n\n# Set our classifier, lg, to have the best combination of parameters\nlg = grid_obj_lg.best_estimator_\n\n# Fit the selected classifier to the training data. \nlg.fit(x_train, y_train)\n</code></pre>\n\n<p>Here is the learning_curve code</p>\n\n<pre><code>predictions_lg = lg.predict(x_test)\nprint(accuracy_score(y_test, predictions_lg))\n\nplot_learning_curve(lg, 'Logistic Regression', X, Y, cv=7);\n</code></pre>\n\n<p>error message:</p>\n\n<pre><code>ValueError: This solver needs samples of at least 2 classes in the data, but the data contains only one class: '0'\n</code></pre>\n\n<p>As requested, Here is the code for plot_learning_curve. The code is from <a href=\"http://scikit-learn.org/stable/auto_examples/model_selection/plot_learning_curve.html\" rel=\"nofollow noreferrer\">http://scikit-learn.org/stable/auto_examples/model_selection/plot_learning_curve.html</a>.</p>\n\n<pre><code>from sklearn.linear_model import LogisticRegression\nfrom sklearn.metrics import make_scorer, accuracy_score\n\nfrom sklearn.ensemble import RandomForestClassifier\n\n\ndef plot_learning_curve(estimator, title, X, Y, ylim=None, cv=None, n_jobs=1,\\\n                        train_sizes=np.linspace(.1, 1.0, 5), scoring='accuracy'):\n\n    plt.figure(figsize=(10,6))\n    plt.title(title)\n\n    if ylim is not None:\n        plt.ylim(*ylim)\n\n    plt.xlabel(\"Training examples\")\n    plt.ylabel(scoring)\n\n    train_sizes, train_scores, test_scores = learning_curve(estimator, X, Y, cv=cv, scoring=scoring, n_jobs=n_jobs, train_sizes=train_sizes)\n    train_scores_mean = np.mean(train_scores, axis=1)\n    train_scores_std = np.std(train_scores, axis=1)\n    test_scores_mean = np.mean(test_scores, axis=1)\n    test_scores_std = np.std(test_scores, axis=1)\n\n    plt.grid()\n\n    plt.fill_between(train_sizes, train_scores_mean - train_scores_std,\\\n                     train_scores_mean + train_scores_std, alpha=0.1, \\\n                     color=\"r\")\n    plt.fill_between(train_sizes, test_scores_mean - test_scores_std,\\\n                     test_scores_mean + test_scores_std, alpha=0.1, color=\"g\")\n\n    plt.plot(train_sizes, train_scores_mean, 'o-', color=\"r\",label=\"Training score\")\n    plt.plot(train_sizes, test_scores_mean, 'o-', color=\"g\", label=\"Cross-validation score\")\n    plt.legend(loc=\"best\")\n\n    return plt\n</code></pre>\n"}, {"tags": ["python", "file"], "comments": [{"owner": {"reputation": 4375, "user_id": 381179, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ebb3d1f5ca7ad690f67bd5e7d2f7fd77?s=128&d=identicon&r=PG", "display_name": "Lagerbaer", "link": "https://stackoverflow.com/users/381179/lagerbaer"}, "edited": false, "score": 0, "creation_date": 1489619283, "post_id": 42822306, "comment_id": 72756406, "body": "Wait... this looks weird. Isn&#39;t the whole point of using a context guard (that <code>with ... </code> stuff that you <i>don&#39;t</i> have to take care of properly opening / closing yourself?"}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 1, "creation_date": 1489619439, "post_id": 42822306, "comment_id": 72756470, "body": "I ran your code (changing filename to a local file) and it deleted the file properly. The file is closed when the <code>with</code> clause exits. Its not open when you get to the point of deleting it."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 1, "creation_date": 1489619468, "post_id": 42822306, "comment_id": 72756481, "body": "The function <code>blackbox</code> is incorrect.It attempts to close the same file twice."}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1489619492, "post_id": 42822306, "comment_id": 72756491, "body": "btw, you don&#39;t need <code>myfile.close()</code> at the end. its handled for you by the <code>with</code> context."}, {"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1489619672, "post_id": 42822306, "comment_id": 72756549, "body": "The real <code>blackbox</code> must be doing something like storing the file handle in a global variable; garbage collection would have closed the file otherwise, after the exception is thrown.  Can&#39;t you just look at this imported module and see what it&#39;s actually doing?"}, {"owner": {"reputation": 1912, "user_id": 4691830, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-lqbwtD6n1nc/AAAAAAAAAAI/AAAAAAAAABg/vE8KR-oSqqE/photo.jpg?sz=128", "display_name": "Joooeey", "link": "https://stackoverflow.com/users/4691830/joooeey"}, "edited": false, "score": 0, "creation_date": 1489619834, "post_id": 42822306, "comment_id": 72756605, "body": "That&#39;s interesting. I&#39;m using Python 2.7 and Spyder with Anaconda on Win7 and the error gets thrown in both the IPython console and the Python console. Do you guys experience the same if that line is replaced by <code>myfile=open(mypath, &#39;w&#39;)</code>? Keep in mind my problem is with a completely different function (<code>snappy.ProductIO.writeProduct</code> from the European Space Agency&#39;s snappy module: <a href=\"http://step.esa.int/docs/v5.0/apidoc/engine/\" rel=\"nofollow noreferrer\">link</a>)."}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1489620237, "post_id": 42822306, "comment_id": 72756737, "body": "It still works for me. The file&#39;s reference count is decremented when the <code>blackbox</code> function exits - even in an exception. Assuming the function hasn&#39;t stashed a reference to the file object somewhere else, this means its reference count goes to zero. In c-based pythons, this will cause the object&#39;s <code>__del__</code> to be called and that closes the file."}, {"owner": {"reputation": 1912, "user_id": 4691830, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-lqbwtD6n1nc/AAAAAAAAAAI/AAAAAAAAABg/vE8KR-oSqqE/photo.jpg?sz=128", "display_name": "Joooeey", "link": "https://stackoverflow.com/users/4691830/joooeey"}, "edited": false, "score": 0, "creation_date": 1489621396, "post_id": 42822306, "comment_id": 72757130, "body": "I just tried this again and Error 32 was not thrown with the <code>with</code> block. So I changed the MWE to not have a <code>with</code> block. This doesn&#39;t resolve tdelaney&#39;s comment though. Not sure why I get a different behaviour."}, {"owner": {"reputation": 1912, "user_id": 4691830, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-lqbwtD6n1nc/AAAAAAAAAAI/AAAAAAAAABg/vE8KR-oSqqE/photo.jpg?sz=128", "display_name": "Joooeey", "link": "https://stackoverflow.com/users/4691830/joooeey"}, "edited": false, "score": 0, "creation_date": 1489621785, "post_id": 42822306, "comment_id": 72757256, "body": "The real blackbox module basically just calls the Java entity referenced by <code>org.esa.snap.core.dataio.ProductIO</code>. I haven&#39;t found the source code for that entity yet and I also don&#39;t understand Java."}, {"owner": {"reputation": 1912, "user_id": 4691830, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-lqbwtD6n1nc/AAAAAAAAAAI/AAAAAAAAABg/vE8KR-oSqqE/photo.jpg?sz=128", "display_name": "Joooeey", "link": "https://stackoverflow.com/users/4691830/joooeey"}, "edited": false, "score": 0, "creation_date": 1489622788, "post_id": 42822306, "comment_id": 72757544, "body": "Interestingly, <code>os.remove(mypath)</code> does delete the file when called from the shell after executing the script."}, {"owner": {"reputation": 1912, "user_id": 4691830, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-lqbwtD6n1nc/AAAAAAAAAAI/AAAAAAAAABg/vE8KR-oSqqE/photo.jpg?sz=128", "display_name": "Joooeey", "link": "https://stackoverflow.com/users/4691830/joooeey"}, "edited": false, "score": 0, "creation_date": 1489623537, "post_id": 42822306, "comment_id": 72757719, "body": "However, the following sequence of shell calls gives very strange results: <code>blackbox(mypath)</code> returns <code>An error occurred</code>, as expected.  <code>os.remove(mypath)</code> gives <code>Error 32</code>, like in the script but <code>os.remove(mypath)</code> called again executes successfully. I wish I could use this knowledge to solve my problem but calling <code>os.remove(mypath)</code> a second time in <code>del_file</code>, in an except block separated by <code>sleep(5)</code> does not succeed. Now I&#39;m completely lost as to how all this works and what happens why."}, {"owner": {"reputation": 1912, "user_id": 4691830, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-lqbwtD6n1nc/AAAAAAAAAAI/AAAAAAAAABg/vE8KR-oSqqE/photo.jpg?sz=128", "display_name": "Joooeey", "link": "https://stackoverflow.com/users/4691830/joooeey"}, "edited": false, "score": 0, "creation_date": 1491326575, "post_id": 42822306, "comment_id": 73499174, "body": "Could this be solved by running the <code>blackbox</code> function in a separate process or some other closed environment?"}], "owner": {"reputation": 1912, "user_id": 4691830, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-lqbwtD6n1nc/AAAAAAAAAAI/AAAAAAAAABg/vE8KR-oSqqE/photo.jpg?sz=128", "display_name": "Joooeey", "link": "https://stackoverflow.com/users/4691830/joooeey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 0, "score": 5, "last_activity_date": 1489621302, "creation_date": 1489618831, "last_edit_date": 1489621302, "question_id": 42822306, "link": "https://stackoverflow.com/questions/42822306/closing-a-file-without-knowing-its-handle", "title": "Closing a file without knowing its handle", "body": "<p>I have a function (which I can't modify) that tries to open a file but throws an exception in the process (<code>blackbox</code> in my MWE, a function imported from a module in reality). I'm trying to write some exception handling code that would delete the garbage file that <code>blackbox</code> tried to write. However, I can't because the file is still open and I  don't know how to close it without knowing the file handle (<code>myfile</code>).</p>\n\n<p>This is what my MWE looks like:</p>\n\n<pre><code>import os\n\ndef blackbox(mypath): # a function that I can't modify\n    myfile = open(mypath, 'w')\n    myfile.write('some text')\n    myfile.flush() # to make sure 'some text' is actually written to disc file.\n    raise Exception('An error occured')\n    myfile.write('some stuff that will never be written')\n    myfile.close()\n\ndef del_file(mypath):\n    # *** put something here that will close the file ***\n    os.remove(mypath) # throws an error because file is still in use\n    return\n\nmypath = 'g:/test.txt'\ntry:\n    blackbox(mypath)\nexcept: # all exceptions\n    del_file(mypath) # clean up\n    raise # raise whatever exception got thrown\n</code></pre>\n\n<p>On <code>os.remove(mypath)</code> I get the following error:</p>\n\n<pre><code>WindowsError: [Error 32] The process cannot access the file because it is being used by another process: 'g:/test.txt'\n</code></pre>\n\n<p>Now my question:\n<strong>How can I close and delete the open file, knowing <code>mypath</code> but without manipulating <code>blackbox</code>?</strong>\nThe code above is written for Windows 7 but I think answers should be applicable to all operating systems. You might have to change <code>mypath</code>.</p>\n"}, {"tags": ["python", "raspberry-pi", "audio-player"], "owner": {"reputation": 31, "user_id": 1174080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/846bf2cf95f0f794e241ee4533edc6a8?s=128&d=identicon&r=PG", "display_name": "Douglas", "link": "https://stackoverflow.com/users/1174080/douglas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1489618731, "creation_date": 1489618731, "question_id": 42822288, "link": "https://stackoverflow.com/questions/42822288/synchronize-audio-playback-with-code-execution-in-python", "title": "Synchronize audio playback with code execution (in Python)", "body": "<p>I'm thinking I should be able to find the answer to this via the Google, but I've spent 30 minutes with no luck.</p>\n\n<p>I need to synchronize Python code execution with audio playback on a Raspberry Pi.  Ideally, I'd embed some metadata at various points in an audio file.  I'd then initiate audio playback from Python, and when those points were reached, I'd get a chance to run some code within that Python script.</p>\n\n<p>My end goal is to synchronize the audio with some lights and a fog machine, controlled by the GPIO ports.  Is there a more reliable way to do this than a series of sleep statements aligned with the audio playback?</p>\n\n<p>Thanks,\n-Doug</p>\n"}, {"tags": ["python", "class", "oop"], "comments": [{"owner": {"reputation": 1292, "user_id": 2943790, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sYybB.png?s=128&g=1", "display_name": "nb1987", "link": "https://stackoverflow.com/users/2943790/nb1987"}, "edited": false, "score": 0, "creation_date": 1489619490, "post_id": 42822205, "comment_id": 72756489, "body": "Are you sure you&#39;re invoking the method (that is, using parentheses after the method name) when referencing <code>self.get_message_text</code>? (So your code ought to be <code>for a in self.get_message_text():</code>) The error message seems to suggest otherwise."}, {"owner": {"reputation": 76206, "user_id": 108205, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ef459127edc89cc575d80a73cd8c567a?s=128&d=identicon&r=PG", "display_name": "jsbueno", "link": "https://stackoverflow.com/users/108205/jsbueno"}, "edited": false, "score": 1, "creation_date": 1489625710, "post_id": 42822205, "comment_id": 72758290, "body": "And otherwise, having a &quot;get_message_text&quot;  method as it is presented here is a complete anti-pattern in Python - to the point I doubt the quality of the course you are following.  Maybe you have other course options?"}, {"owner": {"reputation": 153, "user_id": 7717868, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/5d9e7385709df78e092ca8e9f70fd1ab?s=128&d=identicon&r=PG&f=1", "display_name": "Iltl", "link": "https://stackoverflow.com/users/7717868/iltl"}, "edited": false, "score": 0, "creation_date": 1489649154, "post_id": 42822205, "comment_id": 72765601, "body": "Hi guys thanks for the responses they were very helpful! I wasn&#39;t adding the parenthesis at the end. So to be clear if i&#39;m going to invoke the method in the code i need the paranthesis but if i&#39;m defining things using self.get_message_text then i don&#39;t need the paranthesis?"}], "owner": {"reputation": 153, "user_id": 7717868, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/5d9e7385709df78e092ca8e9f70fd1ab?s=128&d=identicon&r=PG&f=1", "display_name": "Iltl", "link": "https://stackoverflow.com/users/7717868/iltl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489619205, "creation_date": 1489618283, "last_edit_date": 1489619205, "question_id": 42822205, "link": "https://stackoverflow.com/questions/42822205/issue-with-class-methods-in-python", "title": "Issue with class methods in python", "body": "<p>I'm following an edx course on Python and we creating a class for simple encryption of letters. </p>\n\n<p>The following method works and gets full marks. </p>\n\n<pre><code>def apply_shift(self, shift):\n    '''\n    Applies the Caesar Cipher to self.message_text with the input shift.\n    Creates a new string that is self.message_text shifted down the\n    alphabet by some number of characters determined by the input shift        \n\n    shift (integer): the shift with which to encrypt the message.\n    0 &lt;= shift &lt; 26\n\n    Returns: the message text (string) in which every character is shifted\n         down the alphabet by the input shift\n    '''\n    y=self.build_shift_dict(shift)\n    xnew=''\n    for a in self.message_text:\n     if a in y:\n      xnew=xnew+y[a]\n     else:\n      xnew=xnew+a \n    return(xnew)\n</code></pre>\n\n<p>There are getter methods for self.message_text in particular </p>\n\n<pre><code>def get_message_text(self):\n    '''\n    Used to safely access self.message_text outside of the class\n\n    Returns: self.message_text\n    '''\n    return self.message_text\n</code></pre>\n\n<p>however when i replace self.message_text in for loop of the code with self.get_self_message i get the following error message</p>\n\n<p>Traceback (most recent call last):\n  File \"submission.py\", line 191, in apply_shift\n    for a in self.get_message_text:\nTypeError: 'method' object is not iterable</p>\n\n<p>If i use the class name infront which is Message and try\nMessage.get_message_text(self) this works, we've been taught that when we assign an object to a name for example c then i can use c.get_message_text() to access it can i not use self.get_message_text() this way in the code or does this only work for outside the code? In which case it needs to be Message.get_message_text(self)?</p>\n"}, {"tags": ["python", "pyqt5", "multiple-inheritance", "mixins", "metaclass"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 6362587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27e954a88dfc47aac0f4b2eb6c949edb?s=128&d=identicon&r=PG&f=1", "display_name": "Bill3000", "link": "https://stackoverflow.com/users/6362587/bill3000"}, "edited": false, "score": 0, "creation_date": 1489673706, "post_id": 42824269, "comment_id": 72782172, "body": "I haven&#39;t had the problem that <code>pyqtWrapperType</code> does&#39;t exist; a quick check indicates that I don&#39;t have the latest version of PyQt5. (I have Anaconda and PyQt5 v 5.60) I&#39;ll update and apply your fix and see what happens, but  changing <code>pyqtWrapperType</code> to <code>type(QtCore.QObject)</code> in the version that I have hasn&#39;t seemed to resolve the issue."}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "reply_to_user": {"reputation": 31, "user_id": 6362587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27e954a88dfc47aac0f4b2eb6c949edb?s=128&d=identicon&r=PG&f=1", "display_name": "Bill3000", "link": "https://stackoverflow.com/users/6362587/bill3000"}, "edited": false, "score": 0, "creation_date": 1489678345, "post_id": 42824269, "comment_id": 72785858, "body": "After fixing several unrelated bugs in your example, I found it works perfectly fine for me when using the changes I suggested."}, {"owner": {"reputation": 31, "user_id": 6362587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27e954a88dfc47aac0f4b2eb6c949edb?s=128&d=identicon&r=PG&f=1", "display_name": "Bill3000", "link": "https://stackoverflow.com/users/6362587/bill3000"}, "edited": false, "score": 0, "creation_date": 1489702554, "post_id": 42824269, "comment_id": 72799987, "body": "What version of PyQt are you using? According to [<a href=\"http://python.6.x6.nabble.com/What-happend-to-PyQt5-QtCore-pyqtWrapperType-td5207614.html](here)\" rel=\"nofollow noreferrer\">python.6.x6.nabble.com/&hellip;</a>, pyqtWrapperType was removed in PyQt 5.7 and is still available in 5.6. Anaconda (which I use) [<a href=\"https://github.com/ContinuumIO/anaconda-issues/issues/1023](does\" rel=\"nofollow noreferrer\">github.com/ContinuumIO/anaconda-issues/issues/1023](does</a> not support PyQt 5.7). Is this a version issue where I&#39;d have to manually upgrade to 5.7?  When I do <code>type(QObject)</code> it returns <code>pyqtWrapperType</code> for me in PyQt 5.6."}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "reply_to_user": {"reputation": 31, "user_id": 6362587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27e954a88dfc47aac0f4b2eb6c949edb?s=128&d=identicon&r=PG&f=1", "display_name": "Bill3000", "link": "https://stackoverflow.com/users/6362587/bill3000"}, "edited": false, "score": 0, "creation_date": 1489710118, "post_id": 42824269, "comment_id": 72802428, "body": "FWIW, I&#39;m using PyQt-5.8. Can you please run the example in a console and get a proper traceback? The error message in your question is totally useless and has nothing to do with Python or PyQt."}, {"owner": {"reputation": 31, "user_id": 6362587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27e954a88dfc47aac0f4b2eb6c949edb?s=128&d=identicon&r=PG&f=1", "display_name": "Bill3000", "link": "https://stackoverflow.com/users/6362587/bill3000"}, "edited": false, "score": 0, "creation_date": 1490028642, "post_id": 42824269, "comment_id": 72918086, "body": "I ran it in the vanilla python console (as well as the QtConsole) and it crashes on the same line: <code>cb = LWComboBox(locator=locator</code> - it does not link to a particular error. On the regular console, python.exe itself crashes, with the error message <code>An unhandled win32 exception occured in python.exe [8972]</code>. On the Jupyter QtConsole, the kernal just crashes with no error message. It works if I make <code>cb</code> a QComboBox instead. I have included using <code>type(QtCore.QObject)</code> for the metaclass."}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "reply_to_user": {"reputation": 31, "user_id": 6362587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27e954a88dfc47aac0f4b2eb6c949edb?s=128&d=identicon&r=PG&f=1", "display_name": "Bill3000", "link": "https://stackoverflow.com/users/6362587/bill3000"}, "edited": false, "score": 0, "creation_date": 1490030186, "post_id": 42824269, "comment_id": 72919001, "body": "@Bill3000. What version of PyQt5 did you test with, and where did you install it from?"}], "tags": [], "owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "is_accepted": false, "score": 1, "last_activity_date": 1489631420, "creation_date": 1489631420, "answer_id": 42824269, "question_id": 42822154, "link": "https://stackoverflow.com/questions/42822154/pyqt5-issues-with-a-mixin-with-a-metaclass-within-a-derived-qwidget-class/42824269#42824269", "title": "PyQt5: Issues with a Mixin with a metaclass within a derived QWidget class", "body": "<p>The <code>pyqtWrapperType</code> no longer exists. If you want the equivalent type in PyQt5, you can use either:</p>\n\n<pre><code>pyqtWrapperType = type(QtCore.QObject)\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>from sip import wrappertype as pyqtWrapperType\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 6362587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27e954a88dfc47aac0f4b2eb6c949edb?s=128&d=identicon&r=PG&f=1", "display_name": "Bill3000", "link": "https://stackoverflow.com/users/6362587/bill3000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1059, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1506533735, "creation_date": 1489618039, "last_edit_date": 1506533735, "question_id": 42822154, "link": "https://stackoverflow.com/questions/42822154/pyqt5-issues-with-a-mixin-with-a-metaclass-within-a-derived-qwidget-class", "title": "PyQt5: Issues with a Mixin with a metaclass within a derived QWidget class", "body": "<p>I'm having issues trying to add a mixin with a metaclass to a class whose base is a QWidget. I'm aware that PyQt5 <a href=\"http://pyqt.sourceforge.net/Docs/PyQt5/multiinheritance.html\" rel=\"nofollow noreferrer\">supports cooperative multiple inheritance</a> and if my MixIn class has no metaclass then things work fine. However, if it has a metaclass - whether it be the <code>pyqtWrapperType</code> metaclass shared by QWidgets or a derived metaclass, then I receive the following error:</p>\n\n<p><code>Process finished with exit code -1073741819 (0xC0000005)</code></p>\n\n<p>The code for the rest of the script runs, but the QWidget does not show up. Here's the base code (stripped of the methods since I know they're not necessary for the problem)</p>\n\n<pre><code>import abc, sys\nfrom PyQt5 import QtWidgets, QtCore\n\n# Test Metaclass, will have more if metaclasses work\nclass MyMeta(abc.ABCMeta, QtCore.pyqtWrapperType):\n    def __init__(cls, name, bases, attrs):\n        super(MyMeta, cls).__init__(name, bases, attrs)\n\n# MixIn class - ignore the calls to methods for now\n# Have same issue if metaclass set to pyqtWrapperType\nclass LocatorWidget(metaclass=MyMeta):\n    def __init__(self, locator=None, name='', parameters={}, **kwargs):\n        super().__init__(**kwargs)\n        # self.setup_parameters(parameters)\n        self.locator = locator\n        self.name = name if name else ''\n        self.widgetType = self.__class__.__name__.replace('LW', '')\n        # self.setup()\n\n# Derived class with a QWidget base\nclass LWComboBox(QtWidgets.QComboBox, LocatorWidget):\n    def __init__(self, locator, **kwargs):\n        super().__init__(locator=locator, **kwargs)\n\ndef main():\n    app = QtWidgets.QApplication(sys.argv)\n    # locator is class in full code, using this as filler for now\n    locator=[0,1,2,3]\n    cb = LWComboBox(locator=locator)\n    cb.addItems([str(x) for x in range(5)])\n    # Test to see if attribute is set\n    print(cb.locator)\n\n    window = QtWidgets.QDialog()\n    window.form = QtWidgets.QFormLayout()\n    window.form.addRow(cb)\n    window.setLayout(window.form)\n\n    window.show()\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>I am <em>not</em> having the metaclass conflict error: The base class and derived classes do not have different metaclasses because MyMeta is derived from pyqtWrapperType.</p>\n\n<p>If this process doesn't work I'm wondering if I should stick with my previous idea which was enveloping the widget with the attributes and methods I want to share in a separate class, the widget being one of the attributes, but it'll be nice to subclass QWidgets directly with the necessary abstract methods and attributes.</p>\n\n<p>As an FYI I an running PyCharm 2016.2.3 in Anaconda with PyQt5 version 5.6 (PyQt can't be updated to later versions in Anaconda)</p>\n"}, {"tags": ["python", "regex"], "answers": [{"comments": [{"owner": {"reputation": 411, "user_id": 6296821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/429b724d6e2b98cd7cb4287a86f3258e?s=128&d=identicon&r=PG&f=1", "display_name": "bkula", "link": "https://stackoverflow.com/users/6296821/bkula"}, "edited": false, "score": 0, "creation_date": 1489630319, "post_id": 42823720, "comment_id": 72759456, "body": "Thanks so much for that - I&#39;m going to give that a try and see if it improves my code. To answer your question about the Star of David unicode, the document I&#39;m trying to clean is OCRed (which I&#39;m sure will introduce a whole new set of challenges once I put this code into practice). One of the characters in it might come out looking like a Star of David so I included it to be safe.  And I&#39;m actually not sure what expanding/ignoring whitespace is... Can you explain or point me to a good resource?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 411, "user_id": 6296821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/429b724d6e2b98cd7cb4287a86f3258e?s=128&d=identicon&r=PG&f=1", "display_name": "bkula", "link": "https://stackoverflow.com/users/6296821/bkula"}, "edited": false, "score": 0, "creation_date": 1489677878, "post_id": 42823720, "comment_id": 72785502, "body": "@bkula - Here is what&#39;s happening. <code>sub(notation, &quot;&quot;, line)</code> doesn&#39;t match anything, <i>newRow</i> is appended with <i>[original line]</i>.  <code>re.findall(notation, line)</code> doesn&#39;t find anything, <i>newRow</i> is appended with <i>[]</i>. The basic problem is that in an effort to format the regex, nothing is matching because you have placed literal <i>spaces</i> around the things you&#39;d like to match, but the spaces aren&#39;t actually in the source. Try the ignore whitespace flag when calling <code>sub()</code> or <code>findall()</code> or add the inline modifier <code>(?x)(?: &lt;your regex&gt; )</code> <i>at the beginning of the string</i>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 411, "user_id": 6296821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/429b724d6e2b98cd7cb4287a86f3258e?s=128&d=identicon&r=PG&f=1", "display_name": "bkula", "link": "https://stackoverflow.com/users/6296821/bkula"}, "edited": false, "score": 0, "creation_date": 1489678068, "post_id": 42823720, "comment_id": 72785641, "body": "A tip. You may want to get this app <a href=\"http://www.regexformat.com\" rel=\"nofollow noreferrer\">RegexFormat</a> and let it format and compress it for you."}, {"owner": {"reputation": 411, "user_id": 6296821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/429b724d6e2b98cd7cb4287a86f3258e?s=128&d=identicon&r=PG&f=1", "display_name": "bkula", "link": "https://stackoverflow.com/users/6296821/bkula"}, "edited": false, "score": 0, "creation_date": 1489797210, "post_id": 42823720, "comment_id": 72844271, "body": "Thanks so much! I wound up making a couple additional changes to the regex you posted, but it&#39;s working like a dream now.   It looks like RegexFormat is only for Windows - do you know of an OS X version?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 411, "user_id": 6296821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/429b724d6e2b98cd7cb4287a86f3258e?s=128&d=identicon&r=PG&f=1", "display_name": "bkula", "link": "https://stackoverflow.com/users/6296821/bkula"}, "edited": false, "score": 0, "creation_date": 1489809890, "post_id": 42823720, "comment_id": 72846428, "body": "I think it&#39;s bound to Windows for now, but I can recommend to the developer. How many users on OS X ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 411, "user_id": 6296821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/429b724d6e2b98cd7cb4287a86f3258e?s=128&d=identicon&r=PG&f=1", "display_name": "bkula", "link": "https://stackoverflow.com/users/6296821/bkula"}, "edited": false, "score": 0, "creation_date": 1489812005, "post_id": 42823720, "comment_id": 72846749, "body": "You know though, you might be able to install Windows on OS X via software like <i>VirtualBox</i>. The regexformat is pretty compatible for standard Windows."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": false, "score": 0, "last_activity_date": 1489627578, "creation_date": 1489627578, "answer_id": 42823720, "question_id": 42822144, "link": "https://stackoverflow.com/questions/42822144/searching-a-document-and-separating-out-regexes-in-python/42823720#42823720", "title": "Searching a document and separating out regexes in Python", "body": "<p>I don't know if this is something you're looking for, but this should make it  at least<br>\n<em>run</em> quicker - if you care about that.<br>\nIt probably won't make it any easier to manage.  </p>\n\n<p>Btw, I assume that your regex is <em>expanded</em> (i.e. ignore whitespace ).<br>\nAlso, why this particular codepoint <code>\\u2721  \u2721    STAR OF DAVID</code> ? </p>\n\n<p><code>(?:(?:^(?:\\$|\\)[+=-]?|\\*|\\+\\$?|-\\$?|[O0]\\b|=))|(?:(?:\\$|\\)[+=-]?|\\*|\\+\\$?|-|=)$)|Q[BHKNPRSTUVW]\\b|(?:(?:[+-]BUT|Q(?:E[DT]|GL|[IQ]))\\b)|(?:\\b(?:/|(?:C(?:LN|M)|SC|XX)\\b))|\\|{2}|\\.{3}|/[^/]+/|\\(/\\d*|\\(\\d*|\\(\\$\\d*|\\(\\(|-\\$|\\u2721|(?:DRWG|EQ|MIS(?:PMP|TD)|OVRPMP|Q(?:-(?:AP|[KTUW])|A(?:DJ|MER|NG|P)|BF|CF|DG|E(?:D[NS]|LSW|M|NG|TC)|F(?:/Y|R)|G(?:ERM|L[EY])|HU(?:M|NG)|I(?:GL|NF)|L(?:AT|IT)|M(?:/Y|EMX)|N(?:EX|OUN|[NPT])|O(?:F|OF|TW)|POL|R(?:R|TR|U(?:M|SS))|S(?:MT|YN)|T[AF]|UU|V[BL]|YID|Z[TZ]|aQ)))</code>  </p>\n\n<p>Formatted  </p>\n\n<pre><code> (?:\n      (?:\n           ^ \n           (?:\n                \\$\n             |  \\) [+=-]? \n             |  \\*\n             |  \\+\\$? \n             |  -\\$? \n             |  [O0] \\b\n             |  = \n           )\n      )\n   |  (?:\n           (?: \\$ | \\) [+=-]? | \\* | \\+\\$? | - | = )\n           $ \n      )\n   |  Q [BHKNPRSTUVW] \\b \n   |  (?:\n           (?:\n                [+-] BUT\n             |  Q\n                (?: E [DT] | GL | [IQ] )\n           )\n           \\b \n      )\n   |  (?:\n           \\b \n           (?:\n                /\n             |  (?:\n                     C\n                     (?: LN | M )\n                  |  SC\n                  |  XX\n                )\n                \\b \n           )\n      )\n   |  \\|{2}\n   |  \\.{3}\n   |  / [^/]+ /\n   |  \\(/ \\d* \n   |  \\( \\d* \n   |  \\(\\$ \\d* \n   |  \\(\\(\n   |  -\\$\n   |  \\u2721 \n   |  (?:\n           DRWG\n        |  EQ\n        |  MIS\n           (?: PMP | TD )\n        |  OVRPMP\n        |  Q\n           (?:\n                -\n                (?: AP | [KTUW] )\n             |  A\n                (?: DJ | MER | NG | P )\n             |  BF\n             |  CF\n             |  DG\n             |  E\n                (?: D [NS] | LSW | M | NG | TC )\n             |  F\n                (?: /Y | R )\n             |  G\n                (?: ERM | L [EY] )\n             |  HU\n                (?: M | NG )\n             |  I\n                (?: GL | NF )\n             |  L\n                (?: AT | IT )\n             |  M\n                (?: /Y | EMX )\n             |  N\n                (?: EX | OUN | [NPT] )\n             |  O\n                (?: F | OF | TW )\n             |  POL\n             |  R\n                (?:\n                     R\n                  |  TR\n                  |  U\n                     (?: M | SS )\n                )\n             |  S\n                (?: MT | YN )\n             |  T [AF] \n             |  UU\n             |  V [BL] \n             |  YID\n             |  Z [TZ] \n             |  aQ\n           )\n      )\n )\n</code></pre>\n"}], "owner": {"reputation": 411, "user_id": 6296821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/429b724d6e2b98cd7cb4287a86f3258e?s=128&d=identicon&r=PG&f=1", "display_name": "bkula", "link": "https://stackoverflow.com/users/6296821/bkula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489627578, "creation_date": 1489617990, "question_id": 42822144, "link": "https://stackoverflow.com/questions/42822144/searching-a-document-and-separating-out-regexes-in-python", "title": "Searching a document and separating out regexes in Python", "body": "<p>I have this old document I'm helping to clean up and transform into datasets. It's a study that was done in the form of interviews, but unfortunately the people who conducted it included shorthand notes that are mixed in with interviewees' responses. The first step of this process is for me to separate those notes from the responses. Then I want to create a .csv that has one column with the responses and another column with the notes.</p>\n\n<p>Here's an example of what the data in the study currently looks like (from a little test.txt file I made):</p>\n\n<pre><code>$ AKAR3NDA.S+ QRUSS/)+ A BLAJ3R\n0\nFIN ABIXU/BRIVNS+TELE\nIB3G81S+R1.B+ QI KOPIRN /AKCENT CLN VERBS+TAM XX(010\n</code></pre>\n\n<p>What I'm having trouble with is using Python's re module to actually pick out any of the regular expressions I'm searching for. For now I'm testing this by just seeing if I can print the separate notes and responses, so I'll leave the .csv part out of my code. Here's my code as I have it:</p>\n\n<pre><code>1 import re\n2 \n3 notation = r\"(^\\+ | \\+$ | ^- | -$ | \\+ BUT\\b | - BUT\\b | ^\\$ | \\$$ | ^\\+\\$ | \\+\\$$ | ^-\\$ | -\\$ | DRWG | QB\\b | QT\\b | QBF | QTF | QFR | ^= | =$ | Q a Q | QP\\b | QM/Y | QF/Y | ^\\* | \\*$ | QU\\b | Q-U | QUU | QR\\b | QRR | QH\\b | QS\\b | QW\\b | Q-W | QAP | Q-AP | QN\\b | QNN | QOF | QOOF | QK\\b | Q-K | QLIT | QV\\b | QEM | QVL | QDG | QAMER | QHUM | QELSW | QRTR | QSMT | QOTW | QNEX | QET\\b | QPOL | QRUSS | QRUM | QHUNG | QGERM | QSYN | QGL\\b | QGLY | QYID | QGLE | QENG | QI GL | QANG | QI\\b | ^\\) | \\)$ | ^\\)\\+ | \\)\\+$ | ^\\)- | \\)-$ | ^\\)= | \\)=$ | EQ | \\|\\| | QCF | QZZ | QZT | \\.\\.\\.{1} | QETC | QVB | QADJ | QINF | QNOUN | /[^/]+/ | \\b/ | \\bCM\\b | \\bCLN\\b | \\bSC\\b | \\bXX\\b | QQ\\b | ^0\\b | ^O\\b | QNT | Q-T | QLAT | QTA | QNP | QMEMX | \\u2721 | QED\\b | QEDS | \\(/[0-9]* | \\([0-9]* | \\(\\$[0-9]* | \\(\\( | QEDN | OVRPMP | MISPMP | MISTD)\"\n4 \n5 notesSeparate = []\n6 \n7 with open(\"test.txt\") as f:\n8   data = f.readlines()\n9 \n10 for line in data:\n11   newRow = []\n12   notes = str(re.findall(notation, line))\n13   response = str(re.sub(notation, \"\", line))\n14   newRow.append(response)\n15   newRow.append(notes)\n16   notesSeparate.append(newRow)\n17 \n18 print notesSeparate\n</code></pre>\n\n<p>I also realize that regex is ugly and long, but I'm not sure how to format it so please any pointers on that are welcome too. Anyway, what I get when I run that file is the following output. </p>\n\n<pre><code>[['$ AKAR3NDA.S+ QRUSS/)+ A BLAJ3R\\n', '[]'], ['0\\n', '[]'], ['FIN\nABIXU/BRIVNS+TELE\\n', '[]'], ['IB3G81S+R1.B+KOPIRN /AKCENTVERBS+TAM\nXX(010', \"[' QI ', ' CLN ']\"]]\n</code></pre>\n\n<p>What I want to be getting is:</p>\n\n<pre><code>[['AKAR3NDA.S+ A BLAJ3R\\n', ('$', 'QRUSS/)+')], ['0\\n', ('')], ['FIN\nABIXU/BRIVNS+TELE\\n', ('')], ['IB3G81S+R1.B+KOPIRN /AKCENTVERBS+TAM',\n(' QI ', ' CLN ', 'XX(010')]]\n</code></pre>\n\n<p>I know this is all so messy, but that's kind of the point - I'm trying to take something that's super messy and make it less so. I can't tell you how much I'll appreciate some direction.</p>\n"}, {"tags": ["python", "loops", "time", "calculator"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 2, "creation_date": 1489618045, "post_id": 42822127, "comment_id": 72755889, "body": "Your questions have nothing to do with a GUI. Do you want a GUI that can cope with your requirements?"}, {"owner": {"reputation": 811, "user_id": 4445768, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Jzeh6.jpg?s=128&g=1", "display_name": "Bango", "link": "https://stackoverflow.com/users/4445768/bango"}, "edited": false, "score": 1, "creation_date": 1489618140, "post_id": 42822127, "comment_id": 72755934, "body": "A GUI is a graphical user interface, meaning working with things other than text.  I am thinking you want a CLI, or command-line interface, which will loop over and over, asking user for input, which they type in and hit enter, until they are ready to quit, when they will enter something else to quit.  Is this a better representation of what you want?"}, {"owner": {"reputation": 11, "user_id": 7717594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G3Moo.jpg?s=128&g=1", "display_name": "Altegore", "link": "https://stackoverflow.com/users/7717594/altegore"}, "edited": false, "score": 0, "creation_date": 1489660777, "post_id": 42822127, "comment_id": 72772887, "body": "You are correct - CLI, command-line type of thing is what i have in mind... The Title ended up there by mistake and now i cant change it - i wasn&#39;t even supposed to mention GUI here..."}, {"owner": {"reputation": 11, "user_id": 7717594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G3Moo.jpg?s=128&g=1", "display_name": "Altegore", "link": "https://stackoverflow.com/users/7717594/altegore"}, "edited": false, "score": 0, "creation_date": 1489661704, "post_id": 42822127, "comment_id": 72773549, "body": "roganjosh, do you perhaps have an idea for how to turn this into a GUI? cause that would be even better..."}, {"owner": {"reputation": 34352, "user_id": 119775, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fK5bc.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Corbett", "link": "https://stackoverflow.com/users/119775/jean-fran%c3%a7ois-corbett"}, "edited": false, "score": 0, "creation_date": 1489672665, "post_id": 42822127, "comment_id": 72781388, "body": "How would you do it with pen and paper? Figure that out first. Then try to code it up."}], "answers": [{"tags": [], "owner": {"reputation": 428, "user_id": 5597630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c09JX.jpg?s=128&g=1", "display_name": "ryan.wise", "link": "https://stackoverflow.com/users/5597630/ryan-wise"}, "is_accepted": false, "score": 1, "last_activity_date": 1489618210, "last_edit_date": 1592644375, "creation_date": 1489618210, "answer_id": 42822186, "question_id": 42822127, "link": "https://stackoverflow.com/questions/42822127/how-can-i-loop-this-python-program-indefinitely-and-convert-floating-point-hour/42822186#42822186", "title": "How can I loop this Python program indefinitely, and convert floating point hours into hours and minutes?", "body": "<p>You could just wrap it in a while loop. Your title makes no sense though as this has nothing to do with a GUI (Graphical User Interface)</p>\n<h1>Example:</h1>\n<pre><code>while True: \n\n    # Get L/100km used from the user\n    fuel = input(&quot;Enter car's L/100kmh:&quot;)\n    fuel = float(fuel)\n\n    # Get distance driven from the user\n    distance = input(&quot;Enter kilometers driven:&quot;)\n    distance = float(distance)\n\n    # Get speed used from the user\n    speed = input(&quot;Enter driving speed:&quot;)\n    speed = float(speed)\n\n    # Calculate and print the answer\n    time = distance / speed\n    fuel_burned = distance / 100 * fuel\n    print(&quot;Time traveled:&quot;, time,&quot;hours&quot;)\n    print(&quot;Fuel burned:&quot;, fuel_burned,&quot;liters&quot;)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1489618552, "post_id": 42822238, "comment_id": 72756123, "body": "It&#39;s Python... and tagged as such."}, {"owner": {"reputation": 811, "user_id": 4445768, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Jzeh6.jpg?s=128&g=1", "display_name": "Bango", "link": "https://stackoverflow.com/users/4445768/bango"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1489618815, "post_id": 42822238, "comment_id": 72756222, "body": "I edited my answer accordingly. Thanks"}], "tags": [], "owner": {"reputation": 811, "user_id": 4445768, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Jzeh6.jpg?s=128&g=1", "display_name": "Bango", "link": "https://stackoverflow.com/users/4445768/bango"}, "is_accepted": true, "score": -3, "last_activity_date": 1489627553, "last_edit_date": 1495541367, "creation_date": 1489618488, "answer_id": 42822238, "question_id": 42822127, "link": "https://stackoverflow.com/questions/42822127/how-can-i-loop-this-python-program-indefinitely-and-convert-floating-point-hour/42822238#42822238", "title": "How can I loop this Python program indefinitely, and convert floating point hours into hours and minutes?", "body": "<p>This code has been edited considerably to be as accurate as possible. My solution assumes that you want to be able to exit the program gracefully, rather than having it terminate at system shutdown, but if that is not the case, simply remove the final portion of the loop, starting at <code>again = ...</code>.</p>\n\n<pre><code>while True:\n    # Get L/100km used from the user\n    fuel = input(\"Enter car's L/100kmh:\")\n    fuel = float(fuel)\n\n    # Get distance driven from the user\n    distance = input(\"Enter kilometers driven:\")\n    distance = float(distance)\n\n    # Get speed used from the user\n    speed = input(\"Enter driving speed:\")\n    speed = float(speed)\n\n    # Calculate and print the answer\n    time = distance / speed\n    fuel_burned = distance / 100 * fuel\n    hours = int(time)\n    minutes_remainder = (time - hours) * 60\n    minutes = int(minutes_remainder) \n    print(\"Time traveled: \", hours,\":\",minutes)\n    print(\"Fuel burned: \", fuel_burned,\" liters\")\n\n     again = input(\"Go again? (y/n)\")\n     if again == \"n\":\n        break\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/1903846/c-convert-decimal-hours-into-hours-minutes-and-seconds\">Here</a> is an example of converting decimal hours to hours:mins:seconds in C++, which I used to arrive at the solution I have given. </p>\n"}], "owner": {"reputation": 11, "user_id": 7717594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G3Moo.jpg?s=128&g=1", "display_name": "Altegore", "link": "https://stackoverflow.com/users/7717594/altegore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "closed_date": 1489632426, "accepted_answer_id": 42822238, "answer_count": 2, "score": -3, "last_activity_date": 1489660587, "creation_date": 1489617893, "last_edit_date": 1489660587, "question_id": 42822127, "link": "https://stackoverflow.com/questions/42822127/how-can-i-loop-this-python-program-indefinitely-and-convert-floating-point-hour", "closed_reason": "Needs details or clarity", "title": "How can I loop this Python program indefinitely, and convert floating point hours into hours and minutes?", "body": "<p>So i need to make a fuel consumption calculator that will also count time spent on a specific trip.</p>\n\n<p><strong>I cant figure out how to make the program tell me the time spent in \"hours:minutes\" format rather than just a floating point variable for hours.</strong></p>\n\n<p><code>Time traveled: 1.6666666666666667 hours</code>\nshould be\n<code>Time traveled: 1h:45min</code></p>\n\n<p><strong>Additionally, I'm not sure how to make the program repeat the questions and give results infinitely until shut down.</strong></p>\n\n<p>This is the code i have:</p>\n\n<pre><code># Get L/100km used from the user\nfuel = input(\"Enter car's L/100kmh:\")\nfuel = float(fuel)\n\n# Get distance driven from the user\ndistance = input(\"Enter kilometers driven:\")\ndistance = float(distance)\n\n# Get speed used from the user\nspeed = input(\"Enter driving speed:\")\nspeed = float(speed)\n\n# Calculate and print the answer\ntime = distance / speed\nfuel_burned = distance / 100 * fuel\nprint(\"Time traveled:\", time,\"hours\")\nprint(\"Fuel burned:\", fuel_burned,\"liters\")\n</code></pre>\n"}, {"tags": ["python", "tail-recursion"], "comments": [{"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 1, "creation_date": 1489617925, "post_id": 42822119, "comment_id": 72755848, "body": "<code>return a ** b</code>?"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 3, "creation_date": 1489618018, "post_id": 42822119, "comment_id": 72755877, "body": "Your function makes no sense whatsoever. It goes into infinite recursion at once."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1489618027, "post_id": 42822119, "comment_id": 72755885, "body": "The while-loop is unnecessary. Recursion <i>is your loop</i>. As written, you infinitely recurse in your <code>if</code> block. You don&#39;t want a recursive call there, that doesn&#39;t make any sense. Just forget about the type-checking, you probably don&#39;t even want it in the end. Just get it to work first."}, {"owner": {"reputation": 1385, "user_id": 5718237, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/31e352ce7668f7d7fbfc57408047589a?s=128&d=identicon&r=PG", "display_name": "James McCormac", "link": "https://stackoverflow.com/users/5718237/james-mccormac"}, "edited": false, "score": 0, "creation_date": 1489619641, "post_id": 42822119, "comment_id": 72756541, "body": "This looks like a university lab question :)"}], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1489619761, "creation_date": 1489619761, "answer_id": 42822493, "question_id": 42822119, "link": "https://stackoverflow.com/questions/42822119/maximum-recursion-depth-in-python/42822493#42822493", "title": "Maximum recursion depth in python", "body": "<p>First of all, you should check argument validity in a wrapper function; you're wasting a lot of time and modularity checking on every iteration.  Also, you need to check <strong>b</strong> as well; in this code, you checked <strong>a</strong> twice.  Finally, your logic assumes that <strong>b</strong> is an integer, so you need to restrict your validation.</p>\n\n<p>Remove your b==1 base case: b==0 will catch it on the next iteration.</p>\n\n<p>Remove the while loop: that's the iterative solution.  Your recursive solution is simply a check for base condition (b==0); otherwise, return a*power(a, b-1), as you're already doing.</p>\n"}, {"tags": [], "owner": {"reputation": 3072, "user_id": 6725184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40514a449959fa5e76f19afc41436221?s=128&d=identicon&r=PG&f=1", "display_name": "Christian K&#246;nig", "link": "https://stackoverflow.com/users/6725184/christian-k%c3%b6nig"}, "is_accepted": true, "score": 0, "last_activity_date": 1489619883, "creation_date": 1489619883, "answer_id": 42822516, "question_id": 42822119, "link": "https://stackoverflow.com/questions/42822119/maximum-recursion-depth-in-python/42822516#42822516", "title": "Maximum recursion depth in python", "body": "<p>Your code has several flaws and logical errors.</p>\n\n<p>As DYZ already mentioned in the comments, your function immediately goes into an infinite recursion, if a and b are numbers: you try to return the exact same call to power().</p>\n\n<pre><code>def power(a,b):\n  if isinstance(a,(int,float)) and isinstance(a,(int,float)):\n    return power(a,b)\n</code></pre>\n\n<p>Since you already put some conditions into your function, which will return something different, you seem to understand there have to be some kind of stopping conditions.</p>\n\n<p>Your correct recursive call is:</p>\n\n<pre><code>return a * power(a,b-1)\n</code></pre>\n\n<p>This returns a different call of your function, thus won't lead to an immediate infinite recursion.</p>\n\n<p>Your stopping condition is also correct:</p>\n\n<pre><code>if b == 0:\n    return 1\n</code></pre>\n\n<p>Checking for <code>b == 1</code> is unneccessary, since it will get caught by <code>b == 0</code> in the next recursion, as pointed out in Prunes answer.</p>\n\n<p>Putting all that together in the correct order, you get</p>\n\n<pre><code>def power(a,b):\n    if b == 0:\n        return 1\n    else:\n        return a * power(a,b-1)\n</code></pre>\n\n<p>The checking for instances of int or float should in my opinion be done outside of the function. You also have to take into account, that this only works for positive <code>b</code>s.</p>\n"}], "owner": {"reputation": 11, "user_id": 6471469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13987dc05edf439a06ed301f93c7a6f4?s=128&d=identicon&r=PG&f=1", "display_name": "LordNero", "link": "https://stackoverflow.com/users/6471469/lordnero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 0, "accepted_answer_id": 42822516, "answer_count": 2, "score": -2, "last_activity_date": 1489619883, "creation_date": 1489617862, "last_edit_date": 1489617909, "question_id": 42822119, "link": "https://stackoverflow.com/questions/42822119/maximum-recursion-depth-in-python", "title": "Maximum recursion depth in python", "body": "<p>How can I rewrite this code to compute a number, a raised to a power, b without exceeding the maximum recursion depth</p>\n\n<pre><code>def power(a,b):\n  if isinstance(a,(int,float)) and isinstance(a,(int,float)):\n    return power(a,b)\n  else:\n    raise TypeError(\"Argument must be integer or float\")\n  if b == 0:\n    return 1\n  elif b == 1:\n    return a\n  while b &gt;=1:\n    return a * power(a,b-1)\n  if b == 0:\n    return power(a,b)\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "python", "ajax", "django"], "answers": [{"comments": [{"owner": {"reputation": 1348, "user_id": 6735573, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/026a164e58778bbe4f8c778cb1980e14?s=128&d=identicon&r=PG&f=1", "display_name": "DeA", "link": "https://stackoverflow.com/users/6735573/dea"}, "edited": false, "score": 0, "creation_date": 1489669868, "post_id": 42832904, "comment_id": 72779321, "body": "So in <code>action: ajax</code>, <code>ajax</code> refers to my button id?"}, {"owner": {"reputation": 33, "user_id": 4660189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SsFWU.jpg?s=128&g=1", "display_name": "Daniel Reidy", "link": "https://stackoverflow.com/users/4660189/daniel-reidy"}, "reply_to_user": {"reputation": 1348, "user_id": 6735573, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/026a164e58778bbe4f8c778cb1980e14?s=128&d=identicon&r=PG&f=1", "display_name": "DeA", "link": "https://stackoverflow.com/users/6735573/dea"}, "edited": false, "score": 0, "creation_date": 1489692872, "post_id": 42832904, "comment_id": 72795389, "body": "You could use any parameter here, you just need to add it to the Ajax data as you need it to differentiate the post in your view. You could use any key pair you like. Basically calling Ajax in this way does not submit the form, so you have to add all the key pairs you wish to use in the view manually."}], "tags": [], "owner": {"reputation": 33, "user_id": 4660189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SsFWU.jpg?s=128&g=1", "display_name": "Daniel Reidy", "link": "https://stackoverflow.com/users/4660189/daniel-reidy"}, "is_accepted": true, "score": 0, "last_activity_date": 1489664413, "last_edit_date": 1489664413, "creation_date": 1489663886, "answer_id": 42832904, "question_id": 42822101, "link": "https://stackoverflow.com/questions/42822101/how-do-i-get-multiple-post-requests-from-django-and-ajax-on-the-same-page-workin/42832904#42832904", "title": "How do I get multiple post requests from Django and Ajax on the same page working?", "body": "<p>This is due to using the button click events and not a form submit to preform the Ajax call. Ajax is not sending the button name attributes. You will need to manually add the button 'name' parameter to the data sent via Ajax, like so:</p>\n\n<pre><code>data : { csrfmiddlewaretoken : csrftoken,\n       redirect_from : redirect_from,\n       redirect_to : redirect_to,\n       action: 'ajax' \n}\n</code></pre>\n\n<p>The use this in your view to capture if the Ajax request has been received: </p>\n\n<pre><code>if request.POST.get('action') == 'ajax':\n    # do ajax stuff here\n</code></pre>\n\n<p>Also as good practice I would be use 'safer' naming conventions to in order to avoid confusion. Like possibly changing the 'ajax' to 'verify' etc...</p>\n\n<p>I forgot to mention you will need to remove the <code>type=\"submit\"</code>\nfrom the Ajax button. </p>\n\n<p>Hope this helps :)</p>\n"}], "owner": {"reputation": 1348, "user_id": 6735573, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/026a164e58778bbe4f8c778cb1980e14?s=128&d=identicon&r=PG&f=1", "display_name": "DeA", "link": "https://stackoverflow.com/users/6735573/dea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1034, "favorite_count": 0, "accepted_answer_id": 42832904, "answer_count": 1, "score": 0, "last_activity_date": 1489664413, "creation_date": 1489617781, "question_id": 42822101, "link": "https://stackoverflow.com/questions/42822101/how-do-i-get-multiple-post-requests-from-django-and-ajax-on-the-same-page-workin", "title": "How do I get multiple post requests from Django and Ajax on the same page working?", "body": "<p>I have been banging my head over this all day long. Nothing seems to be working. Here's my situation.</p>\n\n<p>I have a Django form with two fields: <code>redirect_from</code>, <code>redirect_to</code>. There are two submit buttons to this form: <code>Validate</code> and <code>Save</code>. When the page loads, <code>Submit</code> is hidden and only <code>Validate</code> is shown. </p>\n\n<p>So now, when the user fills the two fields and clicks <code>Validate</code> I used Ajax to confirm that both the fields are the same. If they are, show the <code>Save</code> button. Clicking the <code>Save</code> button should save the form to the database. I also put in an <code>oninput</code> listener so that after the Ajax call is made, if the user tries to change the data, the <code>Save</code> button is hidden again and he has to now evaluate it again. </p>\n\n<p>Apparently this is supposed to be easy with Ajax, but I'm finding it extremely difficult and frustrating. This is my code so far:</p>\n\n<p>My Template:</p>\n\n<pre><code>form method=\"post\"&gt;\n        {% csrf_token %}\n        {% include 'partials/form_field.html' with field=form.redirect_from %}\n        {% include 'partials/form_field.html' with field=form.redirect_to %}\n        &lt;button id=\"submit\" class=\"btn btn-lg btn-primary\" type=\"submit\" name=\"save\" value=\"Save\"&gt;Save&lt;/button&gt;\n        &lt;button id=\"ajax_submit\" class=\"btn btn-lg btn-primary\" type=\"submit\" name=\"ajax\" value=\"Ajax\"&gt;Validate&lt;/button&gt;\n    &lt;/form&gt;\n\n\n{% endblock %}\n\n\n{% block extra_scripts %}\n{{ block.super }}\n\n&lt;script type=\"text/javascript\"&gt;\n\n    $(document).ready(function() {\n        $(\"#submit\").hide()\n    });\n\n    $('#id_redirect_to').on('input', function(){\n        $(\"#submit\").hide()\n    });\n\n\n    console.log(\"hello\")\n    //For getting CSRF token\n            function getCookie(name) {\n                var cookieValue = null;\n                if (document.cookie &amp;&amp; document.cookie != '') {\n                    var cookies = document.cookie.split(';');\n                for (var i = 0; i &lt; cookies.length; i++) {\n                    var cookie = jQuery.trim(cookies[i]);\n\n\n                if (cookie.substring(0, name.length + 1) == (name + '=')) {\n                  cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n                    break;\n                   }\n                }\n             }\n        return cookieValue;\n  }\n\n\n    //For doing AJAX post\n\n    //When submit is click\n     $(\"#ajax_submit\").click(function(e) {\n         console.log(\"Clicked\")\n\n\n     e.preventDefault();\n\n    //Prepare csrf token\n     var csrftoken = getCookie('csrftoken');\n\n\n    //Collect data from fields\n     /*var email = $('#inputEmail').val();*/\n     var redirect_from= $('#id_redirect_from').val();\n     var redirect_to= $('#id_redirect_to').val();\n     console.log(\"URL from and to is\", redirect_from, redirect_to)\n     /*var password = $('#inputPassword').val();*/\n\n\n    //Send data\n     $.ajax({\n           url : window.location.href, // the endpoint,commonly same url\n           type : \"POST\", // http method\n           data : { csrfmiddlewaretoken : csrftoken,\n           redirect_from : redirect_from,\n           redirect_to : redirect_to\n           /*password : password*/\n     }, // data sent with the post request\n\n     // handle a successful response\n     success : function(json) {\n     console.log(json); // another sanity check\n     //On success show the data posted to server as a message\n         if (json['redirect_success'] === 'true')\n         {\n             alert(\"They are the same!\" +json['redirect_success'] +'!.' );\n             $(\"#submit\").show()\n         }\n         else\n         {\n             $(\"#submit\").hide() //Maybe display some error message in the future!\n         }\n     },\n\n     // handle a non-successful response\n     error : function(xhr,errmsg,err) {\n     console.log(xhr.status + \": \" + xhr.responseText); // provide a bit more info about the error to the console\n     }\n     });\n    });\n\n\n&lt;/script&gt;\n\n{% endblock extra_scripts %}\n</code></pre>\n\n<p>My Views:</p>\n\n<pre><code>def edit_redirect(request, pk):\n    if request.method == 'GET':\n        red_url = MarketingRedirect.objects.get(pk=pk)\n        data = {'redirect_from': red_url.redirect_from, 'redirect_to': red_url.redirect_to}\n        form = RedirectEditForm(initial=data)\n        return render (request, 'marketing_redirect/edit_redirect.html', {'form': form,\n                                                                                       'redirect_from':  red_url.redirect_from})\n\n    if request.POST['save'] == 'Save':\n        form = RedirectEditForm(request.POST)\n        if form.is_valid():\n            red_url = MarketingRedirect.objects.get(pk=pk)\n            data = form.cleaned_data\n            red_url.redirect_from = data['redirect_from']\n            red_url.redirect_to = data['redirect_to']\n            red_url.save()\n            return redirect('backend_redirect')\n\n    if request.POST['ajax'] == 'Ajax':\n        if request.is_ajax():\n            redirect_from = request.POST.get('redirect_from')\n            redirect_to = request.POST.get('redirect_to')\n            if redirect_from == redirect_to:\n                data = {'redirect_success': 'true'}\n                return JsonResponse(data)\n            else:\n                data = {'redirect_success': 'false'}\n                return JsonResponse(data)\n</code></pre>\n\n<p>I'm getting a <code>500: MultiValueDictKeyError at \"'Save'\"</code></p>\n\n<p>Could someone guide me in the right direction here? Very new to ajax.</p>\n"}, {"tags": ["python", "django", "mod-wsgi", "django-file-upload", "django-filer"], "comments": [{"owner": {"reputation": 54548, "user_id": 128141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70dfb4afd84b106d0855184bf0ae4675?s=128&d=identicon&r=PG", "display_name": "Graham Dumpleton", "link": "https://stackoverflow.com/users/128141/graham-dumpleton"}, "edited": false, "score": 0, "creation_date": 1489664017, "post_id": 42822096, "comment_id": 72775160, "body": "For a start, if using mod_wsgi, your version of mod_wsgi is likely too old. Upgrade to the latest mod_wsgi version, which doesn&#39;t have the 2GB size limit. With older versions, attempts to upload more than 2GB would give unpredictable results."}, {"owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "reply_to_user": {"reputation": 54548, "user_id": 128141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70dfb4afd84b106d0855184bf0ae4675?s=128&d=identicon&r=PG", "display_name": "Graham Dumpleton", "link": "https://stackoverflow.com/users/128141/graham-dumpleton"}, "edited": false, "score": 0, "creation_date": 1489675769, "post_id": 42822096, "comment_id": 72783798, "body": "okay I will get my sys admin to upgrade that on our centos box.  Thanks, I wasn&#39;t sure where to start looking"}], "owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 331, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489664047, "creation_date": 1489617774, "last_edit_date": 1489664047, "question_id": 42822096, "link": "https://stackoverflow.com/questions/42822096/file-size-upload-restrictions-in-django-when-using-django-filer", "title": "File size upload restrictions in Django when using Django-filer", "body": "<p>I have no idea where else to post this,  I am using django-filer (<a href=\"https://django-filer.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">https://django-filer.readthedocs.io/en/latest/</a>) and running into limits when trying to upload files.  The problem is the software fails silently and does not give any errors and acts like it uploaded just fine.</p>\n\n<p>While I understand Django-filer is niche (no support forums it seems), I am trying to figure out where to start looking to even begin to trouble shoot my file over 2GB not being uploaded.  I guess I should say it doesn't fail silently, but the errors I see in the var/log/httpd/error_log do not really make sense to me:</p>\n\n<pre><code>[Wed Mar 15 16:19:16.107217 2017] [authz_core:debug] [pid 15399] mod_authz_core.c(809): [client 172.20.0.80:43660] AH01626: authorization result of Require all granted: granted, referer: https://somesite.com/admin/filer/folder/23/list/?order_by=-modified_at\n[Wed Mar 15 16:19:16.107234 2017] [authz_core:debug] [pid 15399] mod_authz_core.c(809): [client 172.20.0.80:43660] AH01626: authorization result of &lt;RequireAny&gt;: granted, referer: https://somesite.com/admin/filer/folder/23/list/?order_by=-modified_at\n[Wed Mar 15 16:19:16.614657 2017] [:info] [pid 16476] mod_wsgi (pid=16476): Initializing Python.\n[Wed Mar 15 16:19:17.235272 2017] [:info] [pid 16476] mod_wsgi (pid=16476): Attach interpreter ''.\n[Wed Mar 15 16:19:17.236272 2017] [proxy:debug] [pid 16476] proxy_util.c(1843): AH00925: initializing worker proxy:reverse shared\n[Wed Mar 15 16:19:17.236298 2017] [proxy:debug] [pid 16476] proxy_util.c(1885): AH00927: initializing worker proxy:reverse local\n[Wed Mar 15 16:19:17.236353 2017] [proxy:debug] [pid 16476] proxy_util.c(1936): AH00931: initialized single connection worker in child 16476 for (*)\n[sthomas@sw-webserver swsite]$ sudo tail -f /var/log/httpd/error_log\n[Wed Mar 15 15:21:20.544340 2017] [:error] [pid 15367]   File \"/usr/lib64/python2.7/site-packages/django/db/backends/utils.py\", line 79, in execute\n[Wed Mar 15 15:21:20.544343 2017] [:error] [pid 15367]     return super(CursorDebugWrapper, self).execute(sql, params)\n[Wed Mar 15 15:21:20.544346 2017] [:error] [pid 15367]   File \"/usr/lib64/python2.7/site-packages/django/db/backends/utils.py\", line 64, in execute\n[Wed Mar 15 15:21:20.544350 2017] [:error] [pid 15367]     return self.cursor.execute(sql, params)\n[Wed Mar 15 15:21:20.544353 2017] [:error] [pid 15367]   File \"/usr/lib64/python2.7/site-packages/django/db/utils.py\", line 95, in __exit__\n[Wed Mar 15 15:21:20.544357 2017] [:error] [pid 15367]     six.reraise(dj_exc_type, dj_exc_value, traceback)\n[Wed Mar 15 15:21:20.544360 2017] [:error] [pid 15367]   File \"/usr/lib64/python2.7/site-packages/django/db/backends/utils.py\", line 64, in execute\n[Wed Mar 15 15:21:20.544363 2017] [:error] [pid 15367]     return self.cursor.execute(sql, params)\n[Wed Mar 15 15:21:20.544366 2017] [:error] [pid 15367] DataError: integer out of range\n</code></pre>\n\n<p>So I see there is an error, looks like from the database?  But I am not sure what exactly is the reason for this and again no forums on djang-filer specifically.</p>\n\n<p>So not sure where to look next to begin trouble shooting this.</p>\n\n<p>The site works with smaller files...</p>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 65, "user_id": 7717880, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Z847OUG7Hvc/AAAAAAAAAAI/AAAAAAAAGu8/NWbBCInhRKY/photo.jpg?sz=128", "display_name": "Jeeva", "link": "https://stackoverflow.com/users/7717880/jeeva"}, "edited": false, "score": 0, "creation_date": 1489617778, "post_id": 42822081, "comment_id": 72755782, "body": "Traceback (most recent call last):   File &quot;C:\\Users\\jee11\\workspace\\hello\\jeeva\\hello\\text_pad.py&quot;, line 14, in &lt;module&gt;     T.insert(END,&quot;TEST&quot;)   File &quot;C:\\python\\lib\\tkinter_<i>init_</i>.py&quot;, line 3266, in insert     self.tk.call((self._w, &#39;insert&#39;, index, chars) + args) _tkinter.TclError: invalid command name &quot;.!text&quot;"}, {"owner": {"reputation": 161, "user_id": 7681501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1875a29c771ebce5d3c6649caa63690?s=128&d=identicon&r=PG&f=1", "display_name": "Braedon Wooding", "link": "https://stackoverflow.com/users/7681501/braedon-wooding"}, "edited": false, "score": 0, "creation_date": 1489617933, "post_id": 42822081, "comment_id": 72755850, "body": "Fix code highlighting please.  Just add 4 spaces before your code and do indentation."}], "answers": [{"tags": [], "owner": {"reputation": 3072, "user_id": 6725184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40514a449959fa5e76f19afc41436221?s=128&d=identicon&r=PG&f=1", "display_name": "Christian K&#246;nig", "link": "https://stackoverflow.com/users/6725184/christian-k%c3%b6nig"}, "is_accepted": false, "score": 2, "last_activity_date": 1489618622, "creation_date": 1489618622, "answer_id": 42822268, "question_id": 42822081, "link": "https://stackoverflow.com/questions/42822081/while-running-the-below-snippet-i-am-getting-an-error/42822268#42822268", "title": "While running the below snippet, I am getting an error", "body": "<p>For the future: please fix your code formatting (indentation matters!) and put Tracebacks into your question, not as an unformatted comment.</p>\n\n<p>Concerning your error: it is caused because you are calling <code>T.insert</code> after <code>mainloop()</code>. You reach that point in the code after your mainloop is finished (e.g. if you close the window). Since there is no more Text area to insert something into, this strange error happens.</p>\n\n<p>Aside from that, you are probably looking to do <code>if __name__=='__main__':</code>.</p>\n"}], "owner": {"reputation": 65, "user_id": 7717880, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Z847OUG7Hvc/AAAAAAAAAAI/AAAAAAAAGu8/NWbBCInhRKY/photo.jpg?sz=128", "display_name": "Jeeva", "link": "https://stackoverflow.com/users/7717880/jeeva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1489630280, "creation_date": 1489617691, "last_edit_date": 1489630280, "question_id": 42822081, "link": "https://stackoverflow.com/questions/42822081/while-running-the-below-snippet-i-am-getting-an-error", "title": "While running the below snippet, I am getting an error", "body": "<p>Many Thanks for your help! Now with this code, I am able to get the Text window. But, I am not able to get into the while loop. </p>\n\n<pre><code>from tkinter import *\nroot = Tk()\nT = Text(root, height=2, width=30)\nT.pack()\nT.insert(END, \"Just a text Widget\\nin two lines\\n\")\nroot.mainloop()\nwhile(1):\n    print(\"inside for loop\")\n    T.insert(END, \"foo\")\n    T.see(END)\n</code></pre>\n\n<p>If I change the code as below,the text window is not appearing. Kindly request you to let me know how I can proceed, in here. </p>\n\n<pre><code>from tkinter import *\nroot = Tk()\nT = Text(root, height=2, width=30)\nT.pack()\nT.insert(END, \"Just a text Widget\\nin two lines\\n\")\nwhile(1):\n    print(\"inside for loop\")\n    T.insert(END, \"foo\")\n    T.see(END)\nroot.mainloop()\n</code></pre>\n"}, {"tags": ["python", "windows", "ansible", "pyopenssl", "winrm"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7717904, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--tm1v6Cwh7Q/AAAAAAAAAAI/AAAAAAAAcvs/ioGP6cg-iOU/photo.jpg?sz=128", "display_name": "Ross Rondeau", "link": "https://stackoverflow.com/users/7717904/ross-rondeau"}, "edited": false, "score": 0, "creation_date": 1489759206, "post_id": 42853822, "comment_id": 72825066, "body": "Worked... that was an incredibly frustrating situation, thanks for providing me the answer!"}, {"owner": {"reputation": 577, "user_id": 1122101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c73894f131b91ecb5f6af48ca2040dba?s=128&d=identicon&r=PG", "display_name": "J00MZ", "link": "https://stackoverflow.com/users/1122101/j00mz"}, "edited": false, "score": 0, "creation_date": 1503933628, "post_id": 42853822, "comment_id": 78803431, "body": "and what if the module was installed?"}], "tags": [], "owner": {"reputation": 1, "user_id": 7726283, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/9208c2b62746d1fb605f69ef95f26444?s=128&d=identicon&r=PG", "display_name": "user7726283", "link": "https://stackoverflow.com/users/7726283/user7726283"}, "is_accepted": false, "score": -1, "last_activity_date": 1489760946, "last_edit_date": 1489760946, "creation_date": 1489743284, "answer_id": 42853822, "question_id": 42822072, "link": "https://stackoverflow.com/questions/42822072/exception-cannot-import-pyopenssl/42853822#42853822", "title": "Exception: Cannot import pyOpenSSL", "body": "<p>Try <code>pip install pyopenssl --upgrade</code></p>\n"}, {"tags": [], "owner": {"reputation": 35, "user_id": 2975898, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/91d92c04261b3231dae056df71c86c6b?s=128&d=identicon&r=PG&f=1", "display_name": "user2975898", "link": "https://stackoverflow.com/users/2975898/user2975898"}, "is_accepted": false, "score": 0, "last_activity_date": 1504874004, "last_edit_date": 1504874004, "creation_date": 1504871956, "answer_id": 46116032, "question_id": 42822072, "link": "https://stackoverflow.com/questions/42822072/exception-cannot-import-pyopenssl/46116032#46116032", "title": "Exception: Cannot import pyOpenSSL", "body": "<p>If your ansible control machine is on Ubuntu, install these dependencies first:</p>\n\n<pre><code>$sudo apt-get install libffi-dev\n$pip install cryptography\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7717904, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--tm1v6Cwh7Q/AAAAAAAAAAI/AAAAAAAAcvs/ioGP6cg-iOU/photo.jpg?sz=128", "display_name": "Ross Rondeau", "link": "https://stackoverflow.com/users/7717904/ross-rondeau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 828, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1516305157, "creation_date": 1489617648, "last_edit_date": 1516305157, "question_id": 42822072, "link": "https://stackoverflow.com/questions/42822072/exception-cannot-import-pyopenssl", "title": "Exception: Cannot import pyOpenSSL", "body": "<p>I'm attempting to get an ansible script working to simply ping WINDOWS guests from an ansible control server, here are my files :</p>\n\n<p><strong>hosts.yml</strong></p>\n\n<pre><code>[winsrvrs]\nserver.domain.com\n\n**group_vars/all.yml**\nansible_user: domain\\\\userID\nansible_password: password\nansible_port: 5986\nansible_connection: winrm\nansible_winrm_server_cert_validation: ignore\n\n\nWhen attempting to run ansible-playbook -i hosts play.yml i get the following error: \n\nException: Cannot import pyOpenSSL\n\nfatal: [wstnm.nml.com]: FAILED! =&gt; {\n    \"failed\": true,\n    \"msg\": \"Unexpected failure during module execution.\",\n    \"stdout\": \"\"\n}\n</code></pre>\n\n<p>I have tried to uninstall and reinstall both <code>WINRM and PYOPENSSL</code> along with all supporting dependencies. </p>\n"}, {"tags": ["python", "django", "django-forms", "django-templates", "django-views"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1489617812, "post_id": 42822063, "comment_id": 72755794, "body": "That&#39;s a wall of code. Please give a <a href=\"https://stackoverflow.com/help/mcve\">minimal, complete and verifiable exampe</a>. That includes a full traceback of your error."}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1489617857, "post_id": 42822063, "comment_id": 72755816, "body": "Why are you attempting to modify the post data? Why do you think you need to set the total forms babies manually?"}, {"owner": {"reputation": 187, "user_id": 4214077, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1145210449/picture?type=large", "display_name": "\u0398\u03bf\u03b4\u03c9\u03c1\u03ae\u03c2 \u03a6\u03bb\u03ce\u03ba\u03bf\u03c2", "link": "https://stackoverflow.com/users/4214077/%ce%98%ce%bf%ce%b4%cf%89%cf%81%ce%ae%cf%82-%ce%a6%ce%bb%cf%8e%ce%ba%ce%bf%cf%82"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1489618129, "post_id": 42822063, "comment_id": 72755924, "body": "@Daniel Roseman Im trying to modify the post data so I can include the new &quot;total form babies&quot; and render the page with one more form for the specific formset ."}], "owner": {"reputation": 187, "user_id": 4214077, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1145210449/picture?type=large", "display_name": "\u0398\u03bf\u03b4\u03c9\u03c1\u03ae\u03c2 \u03a6\u03bb\u03ce\u03ba\u03bf\u03c2", "link": "https://stackoverflow.com/users/4214077/%ce%98%ce%bf%ce%b4%cf%89%cf%81%ce%ae%cf%82-%ce%a6%ce%bb%cf%8e%ce%ba%ce%bf%cf%82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 128, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489618535, "creation_date": 1489617624, "last_edit_date": 1489618535, "question_id": 42822063, "link": "https://stackoverflow.com/questions/42822063/multivaluedictkeyerror-at-when-rendering-multiple-formsets-with-prefixes", "title": "MultiValueDictKeyError at , when rendering multiple formsets with prefixes", "body": "<p>Hello folks Im back with a new riddle .\nIm trying to render a form and 2 formsets and to do so I use prefixes.\nBut I dont seem to understand how to use prefixes .\nThe result is that when I try to add more forms to the formsets with an add button i get the error mentioned above.If you can provide me with a solution or even show me some tips i would be glad . </p>\n\n<p>Here is my views.py(i dont include the imports):</p>\n\n<pre><code>def get_researchnew(request):\n    change_crit = '0'\n    change_alt = '0'\n    CriterionFormSet = formset_factory(CreateCriterionForm,extra=1,can_delete=True)\n    AlternativeFormset = formset_factory(CreateAlternativeForm,extra=1,can_delete=True)\n    if request.method == 'POST':        \n        if 'add_criterion' in request.POST:\n                post_data = request.POST.copy() \n                post_data['criterion_form-TOTAL_FORMS'] = int(post_data['criterion_form-TOTAL_FORMS']) + 1 \n                research_form = CreateResearchForm(post_data,prefix='research_form')\n                criterion_formset = CriterionFormSet(post_data, request.FILES,prefix='criterion_form')\n                alternative_formset = AlternativeFormset(post_data,request.FILES,prefix='alternative_form')\n                change_crit ='1'\n        elif 'add_alternative' in request.POST:\n                post_data = request.POST.copy()\n                post_data['alternative_form-TOTAL_FORMS'] = int(post_data['alternative_form-TOTAL_FORMS']) + 1\n                research_form = CreateResearchForm(post_data,prefix='research_form')\n                criterion_formset = CriterionFormSet(post_data, request.FILES,prefix='criterion_form')\n                alternative_formset = AlternativeFormset(post_data,request.FILES,prefix='alternative_form')\n                change_alt = '1'\n        elif 'submit' in request.POST:\n            research_form = CreateResearchForm(request.POST,prefix='research_form')\n            criterion_formset = CriterionFormSet(request.POST, request.FILES,prefix='criterion_form')\n            alternative_formset = AlternativeFormset(request.POST,request.FILES,prefix='alternative_form')\n            if research_form.is_valid() and criterion_formset.is_valid() and alternative_formset.is_valid():\n                research_form.save()\n                research_instance = research.objects.last()\n                for form in criterion_formset:\n                    if form.is_valid():\n                        instance = form.save(commit=False)\n                        instance.criterion_research = research_instance\n                        instance.save()\n                for form in alternative_formset:\n                        instance = form.save(commit=False)\n                        instance.alternative_research = research_instance\n                        instance.ranking = '1'\n                        instance.save()\n                return HttpResponse('Research successfully added to database.')\n    else:\n        research_form = CreateResearchForm(prefix='research_form')\n        criterion_formset = CriterionFormSet(prefix='criterion_forms')\n        alternative_formset = AlternativeFormset(prefix='alternative_form')\n    return render(request,'CreateResearchnew.html',{\n                                                'research_form':research_form,\n                                                'criterion_formset':criterion_formset,\n                                                'alternative_formset':alternative_formset,\n                                                'change_crit':change_crit,\n                                                'change_alt':change_alt,\n                                                })\n</code></pre>\n\n<p>CreateResearchnew.html:</p>\n\n<pre><code>&lt;form method=\"post\"&gt;\n    {% csrf_token %}\n    &lt;table&gt;\n    {% for field in research_form %}\n        &lt;th&gt;\n            {{ field.errors }}\n            {{ field.label_tag }} \n            &lt;br&gt;\n            {{ field }}\n        &lt;/th&gt;\n    {% endfor %}\n    &lt;/table&gt;\n    {{ criterion_formset.management_form }}\n    &lt;table&gt;\n    {% for criterion_form in criterion_formset %}\n        &lt;tr&gt;\n        {% for field in criterion_form %}\n        &lt;th&gt;\n            {% if change_crit != '1' %}\n                {{ field.errors }}\n            {% endif %}\n            {{ field.label_tag }} \n            &lt;br&gt;\n            {{ field }}\n        &lt;/th&gt;\n        {% endfor %}\n        &lt;/tr&gt;\n    {% endfor %}\n    &lt;/table&gt;\n    &lt;input title='Add a new Criterion' type='submit' name='add_criterion' value='Add' /&gt;\n    {{ alternative_formset.management_form }}\n    &lt;table&gt;\n    {% for alternative_form in alternative_formset %}\n        &lt;tr&gt;\n        {% for field in alternative_form %}\n        &lt;th&gt;\n            {% if change_alt != '1' %}\n                {{ field.errors }}\n            {% endif %}\n            {{ field.label_tag }} \n            &lt;br&gt;\n            {{ field }}\n        &lt;/th&gt;\n        {% endfor %}\n        &lt;/tr&gt;\n    {% endfor %}\n    &lt;/table&gt;\n    &lt;input title='Add a new Alternative' type='submit' name='add_alternative' value='Add' /&gt;\n    &lt;input title='Submit' type='submit' name='submit' value='Submit' /&gt; \n&lt;/form&gt;\n</code></pre>\n\n<p>Traceback:</p>\n\n<pre><code>Environment:\n\n\nRequest Method: POST\nRequest URL: http://127.0.0.2:8888/utastar/get_research\n\nDjango Version: 1.10.5\nPython Version: 2.7.13\nInstalled Applications:\n['django.contrib.admin',\n 'django.contrib.auth',\n 'django.contrib.contenttypes',\n 'django.contrib.sessions',\n 'django.contrib.messages',\n 'django.contrib.staticfiles',\n 'utastar']\nInstalled Middleware:\n['django.middleware.security.SecurityMiddleware',\n 'django.contrib.sessions.middleware.SessionMiddleware',\n 'django.middleware.common.CommonMiddleware',\n 'django.middleware.csrf.CsrfViewMiddleware',\n 'django.contrib.auth.middleware.AuthenticationMiddleware',\n 'django.contrib.messages.middleware.MessageMiddleware',\n 'django.middleware.clickjacking.XFrameOptionsMiddleware']\n\n\n\nTraceback:\n\nFile \"C:\\Users\\Flokos\\Anaconda2\\lib\\site-packages\\django\\core\\handlers\\exception.py\" in inner\n  39.             response = get_response(request)\n\nFile \"C:\\Users\\Flokos\\Anaconda2\\lib\\site-packages\\django\\core\\handlers\\base.py\" in _get_response\n  187.                 response = self.process_exception_by_middleware(e, request)\n\nFile \"C:\\Users\\Flokos\\Anaconda2\\lib\\site-packages\\django\\core\\handlers\\base.py\" in _get_response\n  185.                 response = wrapped_callback(request, *callback_args, **callback_kwargs)\n\nFile \"C:\\Users\\Flokos\\Documents\\mysite\\utastar\\views.py\" in get_researchnew\n  87.               post_data['criterion_form-TOTAL_FORMS'] = int(post_data['criterion_form-TOTAL_FORMS']) + 1 \n\nFile \"C:\\Users\\Flokos\\Anaconda2\\lib\\site-packages\\django\\utils\\datastructures.py\" in __getitem__\n  85.             raise MultiValueDictKeyError(repr(key))\n\nException Type: MultiValueDictKeyError at /utastar/get_research\nException Value: \"'criterion_form-TOTAL_FORMS'\"\n</code></pre>\n"}, {"tags": ["python", "google-app-engine", "flask", "google-app-engine-python", "app-engine-flexible"], "answers": [{"tags": [], "owner": {"reputation": 37127, "user_id": 4495081, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/OuWYd.jpg?s=128&g=1", "display_name": "Dan Cornilescu", "link": "https://stackoverflow.com/users/4495081/dan-cornilescu"}, "is_accepted": true, "score": 1, "last_activity_date": 1489632035, "creation_date": 1489632035, "answer_id": 42824345, "question_id": 42822039, "link": "https://stackoverflow.com/questions/42822039/does-google-appengine-python-flexible-environment-support-task-queues/42824345#42824345", "title": "Does Google AppEngine PYTHON flexible Environment support task queues?", "body": "<p>From <a href=\"https://cloud.google.com/appengine/docs/flexible/python/migrating#task_queues\" rel=\"nofollow noreferrer\">Task Queues</a> in <a href=\"https://cloud.google.com/appengine/docs/flexible/python/migrating\" rel=\"nofollow noreferrer\">Migrating Services from the Standard Environment to the Flexible Environment</a>:</p>\n\n<blockquote>\n  <p>The Task Queue service has limited availability outside of the\n  standard environment. If you want to use the service outside of the\n  standard environment, you can sign up for the <a href=\"https://docs.google.com/forms/d/1g6yRocQ3wtdTArfO4JX8DoqOhYmsoTVgrlFnS0mV1bo/viewform?edit_requested=true\" rel=\"nofollow noreferrer\">Cloud Tasks alpha</a>.</p>\n  \n  <p>Outside of the standard environment, you can't add tasks to <a href=\"https://cloud.google.com/appengine/docs/standard/python/taskqueue/#push_queues\" rel=\"nofollow noreferrer\">push\n  queues</a>, but a service running in the flexible environment can be\n  the target of a push task. You can specify this using the\n  <a href=\"https://cloud.google.com/appengine/docs/standard/python/taskqueue/push/creating-tasks#specifying_the_worker_service\" rel=\"nofollow noreferrer\"><code>target</code></a> parameter when adding a task to queue or by specifying\n  the default <code>target</code> for the queue in <a href=\"https://cloud.google.com/appengine/docs/standard/python/config/queueref\" rel=\"nofollow noreferrer\"><code>queue.yaml</code></a>.</p>\n  \n  <p>In many cases where you might use pull queues, such as queuing up\n  tasks or messages that will be pulled and processed by separate\n  workers, <a href=\"https://cloud.google.com/pubsub/docs/\" rel=\"nofollow noreferrer\">Cloud Pub/Sub</a> can be a good alternative as it offers\n  similar functionality and delivery guarantees.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 121, "user_id": 5822799, "user_type": "registered", "profile_image": "https://graph.facebook.com/10201503728111511/picture?type=large", "display_name": "Hassan Kamal", "link": "https://stackoverflow.com/users/5822799/hassan-kamal"}, "is_accepted": false, "score": 2, "last_activity_date": 1489695377, "last_edit_date": 1495541838, "creation_date": 1489695377, "answer_id": 42843982, "question_id": 42822039, "link": "https://stackoverflow.com/questions/42822039/does-google-appengine-python-flexible-environment-support-task-queues/42843982#42843982", "title": "Does Google AppEngine PYTHON flexible Environment support task queues?", "body": "<p>As Dan answered that Cloud Pub/Sub is a good alternative.\nhere is another <a href=\"https://stackoverflow.com/questions/37070442/monitoring-the-status-of-a-google-pub-sub-submitted-job/37165907\">answer</a> that I found, which is quiet helpful.</p>\n"}], "owner": {"reputation": 121, "user_id": 5822799, "user_type": "registered", "profile_image": "https://graph.facebook.com/10201503728111511/picture?type=large", "display_name": "Hassan Kamal", "link": "https://stackoverflow.com/users/5822799/hassan-kamal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 870, "favorite_count": 0, "accepted_answer_id": 42824345, "answer_count": 2, "score": 1, "last_activity_date": 1489695377, "creation_date": 1489617489, "question_id": 42822039, "link": "https://stackoverflow.com/questions/42822039/does-google-appengine-python-flexible-environment-support-task-queues", "title": "Does Google AppEngine PYTHON flexible Environment support task queues?", "body": "<p>I have been long using GAE STANDARD with webApp2. It has great support and documentation for task queues. But now I just started using Python FLASK with Google AppEngine FLEXIBLE, I could not find any clear documentation for task queues, as compared to the documentation and support for Task Queues in GAE Standard.\nIf task queues are supported, or any one has used them please share the links or documentation which may be helpful.\nSecondly if any alternative or better way for background tasks i.e Celery etc in your opinion?\nAny opinions would be highly helpful.</p>\n"}, {"tags": ["python", "numbers"], "comments": [{"owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 1, "creation_date": 1489617622, "post_id": 42822024, "comment_id": 72755716, "body": "FYI: the first google result brought me there. Plesae do some research"}, {"owner": {"reputation": 3, "user_id": 7669169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b89e39dd44a58377d80c82be0ed6776?s=128&d=identicon&r=PG&f=1", "display_name": "sal", "link": "https://stackoverflow.com/users/7669169/sal"}, "reply_to_user": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1489617681, "post_id": 42822024, "comment_id": 72755740, "body": "its not what I want , not even close @ThomasWeller"}, {"owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1489617764, "post_id": 42822024, "comment_id": 72755779, "body": "Then please explain what you already have and how your question differs from that."}, {"owner": {"reputation": 3, "user_id": 7669169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b89e39dd44a58377d80c82be0ed6776?s=128&d=identicon&r=PG&f=1", "display_name": "sal", "link": "https://stackoverflow.com/users/7669169/sal"}, "reply_to_user": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1489617919, "post_id": 42822024, "comment_id": 72755845, "body": "i simply want a program that takes a number input from a user and prints out all the number from 0 to that number. that question is only about inputing numbers @ThomasWeller"}, {"owner": {"reputation": 507, "user_id": 4390903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wWQIG.jpg?s=128&g=1", "display_name": "Laraconda", "link": "https://stackoverflow.com/users/4390903/laraconda"}, "edited": false, "score": 0, "creation_date": 1489617920, "post_id": 42822024, "comment_id": 72755846, "body": "Thomas is right this is a duplicate. If you want to know how to print from 0 to n, research about the <code>range</code> function."}, {"owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1489618266, "post_id": 42822024, "comment_id": 72755988, "body": "FYI: fist google result for search terms &quot;print numbers from 0 to n python&quot;"}, {"owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 1, "creation_date": 1489618319, "post_id": 42822024, "comment_id": 72756016, "body": "Yeah, I know. You&#39;re welcome"}], "answers": [{"tags": [], "owner": {"reputation": 3, "user_id": 7669169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b89e39dd44a58377d80c82be0ed6776?s=128&d=identicon&r=PG&f=1", "display_name": "sal", "link": "https://stackoverflow.com/users/7669169/sal"}, "is_accepted": false, "score": 0, "last_activity_date": 1489619863, "creation_date": 1489619863, "answer_id": 42822509, "question_id": 42822024, "link": "https://stackoverflow.com/questions/42822024/take-user-input-and-use-that-for-a-program/42822509#42822509", "title": "take user input and use that for a program", "body": "<p>This one works   </p>\n\n<pre><code>n = int(input(\"enter a number\"))\ncounts = 0\nprint (0)\nwhile counts != n:\n    counts += 1\n    print(counts)\n    if counts == n:\n        break\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7669169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b89e39dd44a58377d80c82be0ed6776?s=128&d=identicon&r=PG&f=1", "display_name": "sal", "link": "https://stackoverflow.com/users/7669169/sal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "closed_date": 1489629837, "answer_count": 1, "score": -5, "last_activity_date": 1489619863, "creation_date": 1489617427, "last_edit_date": 1489617785, "question_id": 42822024, "link": "https://stackoverflow.com/questions/42822024/take-user-input-and-use-that-for-a-program", "closed_reason": "Duplicate", "title": "take user input and use that for a program", "body": "<p>I am new to python and this is just for personal knowledge.</p>\n\n<p>So how would I design a program to take a number input N from the user and print out all the numbers from 0 to N ..</p>\n"}, {"tags": ["python", "scrapy", "web-crawler"], "comments": [{"owner": {"reputation": 181, "user_id": 5523651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cb7e55a5d925e477567b479c6e17e38?s=128&d=identicon&r=PG", "display_name": "rfelten", "link": "https://stackoverflow.com/users/5523651/rfelten"}, "edited": false, "score": 0, "creation_date": 1489659809, "post_id": 42822010, "comment_id": 72772183, "body": "How did you make sure that the download was complete and (if so) the processing of the 2 GB JSON file not took longer than the time you&#39;ve waited?  Is there any way to split up the Request in multiple ones, each returning a smaller dataset?"}, {"owner": {"reputation": 1173, "user_id": 1695499, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/72618c9acf97ee4fc0817a2f8d8b62aa?s=128&d=identicon&r=PG", "display_name": "lufte", "link": "https://stackoverflow.com/users/1695499/lufte"}, "edited": false, "score": 0, "creation_date": 1489680433, "post_id": 42822010, "comment_id": 72787588, "body": "You should print something right when your callback function starts to determine if what&#39;s hanging is the downloading of the file or the parsing of it."}, {"owner": {"reputation": 1222, "user_id": 1028237, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a4f6ee0dbf04ff9f277c6fabf181016f?s=128&d=identicon&r=PG", "display_name": "Verbal_Kint", "link": "https://stackoverflow.com/users/1028237/verbal-kint"}, "reply_to_user": {"reputation": 181, "user_id": 5523651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cb7e55a5d925e477567b479c6e17e38?s=128&d=identicon&r=PG", "display_name": "rfelten", "link": "https://stackoverflow.com/users/5523651/rfelten"}, "edited": false, "score": 0, "creation_date": 1489692501, "post_id": 42822010, "comment_id": 72795228, "body": "@rfelten everything I have stated above leads me to believe that it hangs during the download. The fact that on the minute stat logs stop after 3 minutes leads me to believe that it freezes/hangs roughly 3 minutes into the download and never makes it into the callback."}, {"owner": {"reputation": 181, "user_id": 5523651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cb7e55a5d925e477567b479c6e17e38?s=128&d=identicon&r=PG", "display_name": "rfelten", "link": "https://stackoverflow.com/users/5523651/rfelten"}, "edited": false, "score": 0, "creation_date": 1489737941, "post_id": 42822010, "comment_id": 72811276, "body": "@Verbal_Kint Interesting. Can you do a small experiment? Download the file and feed it via an local webserver ( <code>python3 -m http.server </code> ) to Scrapy. How is the CPU / RAM load changing  with respect to the console output?"}], "owner": {"reputation": 1222, "user_id": 1028237, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a4f6ee0dbf04ff9f277c6fabf181016f?s=128&d=identicon&r=PG", "display_name": "Verbal_Kint", "link": "https://stackoverflow.com/users/1028237/verbal-kint"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 550, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489692546, "creation_date": 1489617386, "last_edit_date": 1489692546, "question_id": 42822010, "link": "https://stackoverflow.com/questions/42822010/scrapy-hanging-on-api-call-which-returns-large-json-object", "title": "scrapy hanging on api call which returns large JSON object", "body": "<p>I am using scrapy to make API calls to walmart's open API. Everything functions as expected except for one call which returns hundreds of thousands of products worth of information in JSON format. The json is roughly 2GB and takes roughly 4 minutes to download using requests. I have changed the following settings to accommodate for file size and download time like so:</p>\n\n<pre><code>DOWNLOAD_TIMEOUT = 420\nDOWNLOAD_MAXSIZE = 3200000000\n# left download warn size unaltered just to get some feedback and see at what point the process was hanging\n</code></pre>\n\n<p>But for some reason scrapy hangs like so:</p>\n\n<pre><code>2017-03-15 20:34:23 [scrapy.core.downloader.handlers.http11] WARNING: Received more bytes than download warn size (33554432) in request &lt;GET http://api.walmartlabs.com/v1/feeds/clearance?apiKey=XXXX&gt;.\n2017-03-15 20:34:47 [scrapy.extensions.logstats] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)\n2017-03-15 20:35:47 [scrapy.extensions.logstats] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)\n2017-03-15 20:36:47 [scrapy.extensions.logstats] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)\n^C2017-03-15 20:51:18 [scrapy.crawler] INFO: Received SIG_SETMASK, shutting down gracefully. Send again to force \n^C2017-03-15 21:09:36 [scrapy.crawler] INFO: Received SIG_SETMASK twice, forcing unclean shutdown\n</code></pre>\n\n<p>If you notice above, I stop getting on the minute INFO level stat logging after the first 3 minutes after the download size warning and repeated attempts to shut scrapy down do not work, I eventually had to kill the process manually (2 attempts at control-c did not do the job). If you notice the timestamps it took 17 minutes from the download size warning up to my first shutdown attempt. Yet the download timeout limit did not kick in.</p>\n\n<p>Again, all other api calls (thousands of them) work without incident and this particular call works in about 4 minutes with requests library, and I have tried to disable download size limits as well as increase them but it still freezes with no other logging output (on debug level). Everything seems to indicate hanging while downloading and not making it to the callback. Any suggestions?</p>\n"}, {"tags": ["python", "dynamic-programming", "subset-sum"], "answers": [{"tags": [], "owner": {"reputation": 778, "user_id": 7315895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PTS6n.jpg?s=128&g=1", "display_name": "monster", "link": "https://stackoverflow.com/users/7315895/monster"}, "is_accepted": false, "score": 0, "last_activity_date": 1489956260, "last_edit_date": 1495540827, "creation_date": 1489956260, "answer_id": 42892041, "question_id": 42822009, "link": "https://stackoverflow.com/questions/42822009/subset-sum-dynamic-programming/42892041#42892041", "title": "Subset Sum Dynamic Programming", "body": "<p>**1)**Change the <code>printsub</code> function for that that is loop an <code>i</code>through 1 to <code>len(array)</code> and use<code>if(sol[i][target])</code> instead of <code>(sol[len(array)][target])</code>.</p>\n\n<p>**2)**After the double loops-</p>\n\n<pre><code>for i in range(1,(len(array)+1)):\n    for j in range(1, target+1):\n</code></pre>\n\n<p>add a condition that checks if <code>array[i-1]</code>is negative or not <code>if</code> it is positive no need to change anything <code>else</code> replace <code>j</code> by <code>target+2-j</code>in</p>\n\n<pre><code> if (j - array[i-1] &gt;= 0):\n            sol[i][j] = sol[i-1][j] | sol[i-1][j - array[i-1]]\n</code></pre>\n\n<p>**3)**Here's link to same ques-\n<a href=\"https://stackoverflow.com/questions/42879631/reducing-time-complexity-of-knapsack-01-while-using-dp-algorithm\">Reducing time complexity of 0-1 Knapsack problem</a></p>\n"}], "owner": {"reputation": 23, "user_id": 7688094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cb06b4cc1e80df82aa193de1aa45188?s=128&d=identicon&r=PG&f=1", "display_name": "sharpie", "link": "https://stackoverflow.com/users/7688094/sharpie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 747, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489956260, "creation_date": 1489617385, "question_id": 42822009, "link": "https://stackoverflow.com/questions/42822009/subset-sum-dynamic-programming", "title": "Subset Sum Dynamic Programming", "body": "<pre><code>def subset(array, target):\n    sol = [[False for x in range(target + 1)] for x in range(len(array) + 1)]\n    for i in range(len(array)+1):\n        sol[i][0] = True\n    for i in range(1,(len(array)+1)):\n        for j in range(1, target+1):\n            if (j - array[i-1] &gt;= 0):\n                sol[i][j] = sol[i-1][j] | sol[i-1][j - array[i-1]]\n            else:\n                sol[i][j] = sol[i-1][j]\n    printSub(sol, array, target)\n    return sol[len(array)][target]\n\ndef printSub(sol, array, target):\n    if(sol[len(array)][target]):\n        print(\"Found!\")\n        i = len(array)\n        j = target\n        while(j!=0):\n            if(sol[i-1][j] == True):\n                i-=1\n            else:\n                print(array[i-1], end = \" \")\n                j = j - array[i-1]\n    else:\n        print(\"No combination found! \")\n</code></pre>\n\n<p>I've a working code of the subset problem, which can print numbers if it finds a subset equal to the desired target.</p>\n\n<ol>\n<li><p>I want to print all possible subsets for a given target, I don't understand what to change for that.</p></li>\n<li><p>How do I make it work for negative numbers?</p></li>\n<li>The time complexity is O(len(array) * target) and the space I believe is the same. Is there some way to improve this?</li>\n</ol>\n"}, {"tags": ["python", "python-2.7", "tweepy"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1489617403, "post_id": 42821961, "comment_id": 72755626, "body": "Where is the <code>^</code> actually pointing in your error message? Your formatting was all messed up."}, {"owner": {"reputation": 120, "user_id": 7717825, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154590174147809/picture?type=large", "display_name": "Sam Maule", "link": "https://stackoverflow.com/users/7717825/sam-maule"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1489617672, "post_id": 42821961, "comment_id": 72755731, "body": "Right under the last character of my consumer secret as you have it. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 7704216, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PUQco.png?s=128&g=1", "display_name": "Nala", "link": "https://stackoverflow.com/users/7704216/nala"}, "is_accepted": true, "score": 1, "last_activity_date": 1490125456, "creation_date": 1490125456, "answer_id": 42936771, "question_id": 42821961, "link": "https://stackoverflow.com/questions/42821961/syntax-error-authenticating-tweepy/42936771#42936771", "title": "Syntax error authenticating tweepy", "body": "<p>I presume you have your Twitter Apps credentials (otherwise, nothing will work).</p>\n\n<p>Use the following portion of code (assuming you have the required credentials)</p>\n\n<pre><code>import tweepy\n\n# Fill this up with the Twitter Apps Credentials (get them @ apps.twitter.com)\nconsumer_key = \"Your consumer Key\"\nconsumer_secret = \"Your consumer Key Secret\"\naccess_token = \"Your access Token\"\naccess_token_secret = \"Your access Token Secret\"\n\nauth = tweepy.OAuthHandler(consumer_key, consumer_secret)\nauth.set_access_token(access_token, access_token_secret)\n\napi = tweepy.API(auth)\n\nprint \"User Name:\", api.me().name\nprint \"Account (@):\", api.me().screen_name\n</code></pre>\n\n<p>With this, you have the basic framework to start interacting with the Twitter API using Tweepy (the last two lines, based on your Twitter credentials, should print your name and @username in Twitter.</p>\n"}], "owner": {"reputation": 120, "user_id": 7717825, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154590174147809/picture?type=large", "display_name": "Sam Maule", "link": "https://stackoverflow.com/users/7717825/sam-maule"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 614, "favorite_count": 1, "accepted_answer_id": 42936771, "answer_count": 1, "score": -1, "last_activity_date": 1490125456, "creation_date": 1489617185, "last_edit_date": 1489618004, "question_id": 42821961, "link": "https://stackoverflow.com/questions/42821961/syntax-error-authenticating-tweepy", "title": "Syntax error authenticating tweepy", "body": "<p>I am quite new to installing modules on python. I'm trying to get started with Tweepy but I'm hitting an error. </p>\n\n<p>I have run </p>\n\n<pre><code>import tweepy\nauth = tweepy.OAuthHandler(MYCONSUMERKEY, MYCONSUMERSECRET)\n</code></pre>\n\n<p>But the following error is returned:</p>\n\n<pre><code>  File \"&lt;stdin&gt;\", line 1\n    auth = tweepy.OAuthHandler(MYCONSUMERKEY, MYCONSUMERSECRET)\n                                                             ^\nSyntaxError: invalid syntax\n</code></pre>\n\n<p>Any idea what could be going wrong here? Im using Python 2.7 on OSX El Capitan </p>\n"}, {"tags": ["python", "tensorflow", "deep-learning", "conv-neural-network", "pre-trained-model"], "comments": [{"owner": {"reputation": 119710, "user_id": 3574081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LIW6C.jpg?s=128&g=1", "display_name": "mrry", "link": "https://stackoverflow.com/users/3574081/mrry"}, "edited": false, "score": 0, "creation_date": 1490032003, "post_id": 42821932, "comment_id": 72920140, "body": "Can you please share the error that you&#39;re seeing? As far as I can tell, the type of your first argument to <code>tf.train.Saver</code> is not quite right: instead of a dictionary mapping one key to a list of variables, it will expect a dictionary mapping keys to individual variables."}, {"owner": {"reputation": 61, "user_id": 3482336, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100001342047630/picture?type=large", "display_name": "Junaid Younad", "link": "https://stackoverflow.com/users/3482336/junaid-younad"}, "reply_to_user": {"reputation": 119710, "user_id": 3574081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LIW6C.jpg?s=128&g=1", "display_name": "mrry", "link": "https://stackoverflow.com/users/3574081/mrry"}, "edited": false, "score": 0, "creation_date": 1490039641, "post_id": 42821932, "comment_id": 72924686, "body": "@mrry you are exactly right, but I am getting individual weights from the list, can you explain your point in details please?"}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 3482336, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100001342047630/picture?type=large", "display_name": "Junaid Younad", "link": "https://stackoverflow.com/users/3482336/junaid-younad"}, "edited": false, "score": 0, "creation_date": 1489653889, "post_id": 42828649, "comment_id": 72768142, "body": "Do I need to restore and initialize biases?"}, {"owner": {"reputation": 833, "user_id": 3260576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c97a7a819914d8924e075cbabb777d97?s=128&d=identicon&r=PG&f=1", "display_name": "rajat", "link": "https://stackoverflow.com/users/3260576/rajat"}, "reply_to_user": {"reputation": 61, "user_id": 3482336, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100001342047630/picture?type=large", "display_name": "Junaid Younad", "link": "https://stackoverflow.com/users/3482336/junaid-younad"}, "edited": false, "score": 0, "creation_date": 1489654245, "post_id": 42828649, "comment_id": 72768358, "body": "Yes, its not hard to see that they are required by the layers you decide to freeze and reinitialize them if you need to."}, {"owner": {"reputation": 833, "user_id": 3260576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c97a7a819914d8924e075cbabb777d97?s=128&d=identicon&r=PG&f=1", "display_name": "rajat", "link": "https://stackoverflow.com/users/3260576/rajat"}, "reply_to_user": {"reputation": 61, "user_id": 3482336, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100001342047630/picture?type=large", "display_name": "Junaid Younad", "link": "https://stackoverflow.com/users/3482336/junaid-younad"}, "edited": false, "score": 0, "creation_date": 1489675712, "post_id": 42828649, "comment_id": 72783763, "body": "Btw, you reintialize only those variables that you need to train  again, others you can use directly"}, {"owner": {"reputation": 61, "user_id": 3482336, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100001342047630/picture?type=large", "display_name": "Junaid Younad", "link": "https://stackoverflow.com/users/3482336/junaid-younad"}, "edited": false, "score": 0, "creation_date": 1489677043, "post_id": 42828649, "comment_id": 72784843, "body": "This is the problem I am not able to do it... and thats the question how to do it?"}, {"owner": {"reputation": 833, "user_id": 3260576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c97a7a819914d8924e075cbabb777d97?s=128&d=identicon&r=PG&f=1", "display_name": "rajat", "link": "https://stackoverflow.com/users/3260576/rajat"}, "reply_to_user": {"reputation": 61, "user_id": 3482336, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100001342047630/picture?type=large", "display_name": "Junaid Younad", "link": "https://stackoverflow.com/users/3482336/junaid-younad"}, "edited": false, "score": 1, "creation_date": 1489686798, "post_id": 42828649, "comment_id": 72791903, "body": "the line w1_1=tf.get_collection(tf.GraphKeys.TRAINABLE_VARIABLES,scop&zwnj;&#8203;e=&#39;inference/conv1_1&zwnj;&#8203;_w will only give variables in first conv layer that is by scope, remove scope and you can get all the trainable variables"}, {"owner": {"reputation": 61, "user_id": 3482336, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100001342047630/picture?type=large", "display_name": "Junaid Younad", "link": "https://stackoverflow.com/users/3482336/junaid-younad"}, "edited": false, "score": 0, "creation_date": 1489696854, "post_id": 42828649, "comment_id": 72797544, "body": "my problem is to pass the weights to network how can I do that"}, {"owner": {"reputation": 833, "user_id": 3260576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c97a7a819914d8924e075cbabb777d97?s=128&d=identicon&r=PG&f=1", "display_name": "rajat", "link": "https://stackoverflow.com/users/3260576/rajat"}, "reply_to_user": {"reputation": 61, "user_id": 3482336, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100001342047630/picture?type=large", "display_name": "Junaid Younad", "link": "https://stackoverflow.com/users/3482336/junaid-younad"}, "edited": false, "score": 0, "creation_date": 1489725177, "post_id": 42828649, "comment_id": 72806425, "body": "if wi is weight you want to assign value to, do sess.run(wi.assign(some_value))"}], "tags": [], "owner": {"reputation": 833, "user_id": 3260576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c97a7a819914d8924e075cbabb777d97?s=128&d=identicon&r=PG&f=1", "display_name": "rajat", "link": "https://stackoverflow.com/users/3260576/rajat"}, "is_accepted": false, "score": 2, "last_activity_date": 1489652418, "creation_date": 1489652418, "answer_id": 42828649, "question_id": 42821932, "link": "https://stackoverflow.com/questions/42821932/tensorflow-how-to-modify-a-pre-trained-model-saved-as-checkpoints/42828649#42828649", "title": "Tensorflow how to modify a pre-trained Model saved as checkpoints", "body": "<p>Either you can call <code>init = tf.initialize_variables([list_of_vars])</code> followed by <code>sess.run(init)</code> and that would reinitialize those variables for you, or you can recreate the graph with same structure from the point where you want to freeze the weights but keep different names for variables. Further in case you only want to train certain variables only, you can pass those variables only to optimizer. <code>tf.train.AdamOptimizer(learning_rate).minimize(loss,var_list = [wi, wj, ....])</code>  </p>\n"}], "owner": {"reputation": 61, "user_id": 3482336, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100001342047630/picture?type=large", "display_name": "Junaid Younad", "link": "https://stackoverflow.com/users/3482336/junaid-younad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2990, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1489652418, "creation_date": 1489617050, "last_edit_date": 1489649918, "question_id": 42821932, "link": "https://stackoverflow.com/questions/42821932/tensorflow-how-to-modify-a-pre-trained-model-saved-as-checkpoints", "title": "Tensorflow how to modify a pre-trained Model saved as checkpoints", "body": "<p>I trained a FCN model in Tensorflow following implementation in <a href=\"https://github.com/shekkizh/FCN.tensorflow/blob/master/FCN.py\" rel=\"nofollow noreferrer\">link</a> and saved the complete model as checkpoint, Now I want to use the saved model(pre-trained) for different problem.\nI tried to restore the model from checkpoint by specifying the weights in <strong>Saver</strong> as:</p>\n\n<pre><code>saver = tf.train.Saver({\"weights\" : [w1_1,w1_2,w2_1,w2_2,w3_1,w3_2,w3_3,w3_4, w4_1, w4_2, w4_3, w4_4,w5_1,w5_2,w5_3,w6,w7]})\n</code></pre>\n\n<p>I am getting weights as:</p>\n\n<pre><code>w1_1=tf.get_collection(tf.GraphKeys.TRAINABLE_VARIABLES,scope='inference/conv1_1_w')\n</code></pre>\n\n<p>and so on....\nI am not able to restore it successfully (up to specific layer).\nTensorflow version:0.12r</p>\n"}, {"tags": ["python", "string"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1489617050, "post_id": 42821894, "comment_id": 72755488, "body": "You need to add an additional condition somewhere: <code>any(char in str for char in &quot;+-*&quot;)</code>."}, {"owner": {"reputation": 275, "user_id": 5490886, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9942ec963d84e651e76263127d139887?s=128&d=identicon&r=PG&f=1", "display_name": "VD18421", "link": "https://stackoverflow.com/users/5490886/vd18421"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1489617102, "post_id": 42821894, "comment_id": 72755507, "body": "I don&#39;t really know compressed for loops, can you expand it?"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1489617162, "post_id": 42821894, "comment_id": 72755532, "body": "If you mean &quot;list comprehension&quot;, then why don&#39;t you read about it? OP is not a tutoring site."}, {"owner": {"reputation": 647, "user_id": 3231557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b734e7cb6de2b7394ab1da5baa2d37e?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Gwynn-Jones", "link": "https://stackoverflow.com/users/3231557/rob-gwynn-jones"}, "edited": false, "score": 0, "creation_date": 1489617185, "post_id": 42821894, "comment_id": 72755544, "body": "Have you considered a regular expression?  Something like <code>[a-z*&#47;+-]*</code> should do what you&#39;re looking for?"}, {"owner": {"reputation": 275, "user_id": 5490886, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9942ec963d84e651e76263127d139887?s=128&d=identicon&r=PG&f=1", "display_name": "VD18421", "link": "https://stackoverflow.com/users/5490886/vd18421"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1489617232, "post_id": 42821894, "comment_id": 72755559, "body": "@DYZ, I know, I just hoped you could write it out the proper way instead of compressing it"}], "answers": [{"tags": [], "owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "is_accepted": false, "score": 0, "last_activity_date": 1506269761, "last_edit_date": 1506269761, "creation_date": 1489617240, "answer_id": 42821970, "question_id": 42821894, "link": "https://stackoverflow.com/questions/42821894/is-it-possible-to-use-isalpha-on-a-math-string-and-still-return-true-in-pytho/42821970#42821970", "title": "Is it possible to use isalpha() on a math string, and still return True in python?", "body": "<p>You can use regex:</p>\n\n<pre><code>import re\nreturn bool(re.fullmatch(r'[a-z*/+-]+', 'x+y'))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 937, "user_id": 6857253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dfc7c7e7460d19e1aa991c9dd42909c?s=128&d=identicon&r=PG&f=1", "display_name": "SegFault", "link": "https://stackoverflow.com/users/6857253/segfault"}, "is_accepted": false, "score": 0, "last_activity_date": 1489617591, "last_edit_date": 1489617591, "creation_date": 1489617293, "answer_id": 42821988, "question_id": 42821894, "link": "https://stackoverflow.com/questions/42821894/is-it-possible-to-use-isalpha-on-a-math-string-and-still-return-true-in-pytho/42821988#42821988", "title": "Is it possible to use isalpha() on a math string, and still return True in python?", "body": "<p>You can use regex and turn your code to:</p>\n\n<pre><code>import re\np = re.compile('^[a-z+*/-]+$')\nreturn p.match(str)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "is_accepted": true, "score": 0, "last_activity_date": 1489617372, "creation_date": 1489617372, "answer_id": 42822006, "question_id": 42821894, "link": "https://stackoverflow.com/questions/42821894/is-it-possible-to-use-isalpha-on-a-math-string-and-still-return-true-in-pytho/42822006#42822006", "title": "Is it possible to use isalpha() on a math string, and still return True in python?", "body": "<blockquote>\n  <p>[...] I want to return True if the string is all lowercase, and only contains alphabetical characters (with the exception of math operators).</p>\n</blockquote>\n\n<p>In my opinion the simplest solution would simply be to make your own function:</p>\n\n<pre><code>def is_valid_string(string, operators):\n    string = ''.join([c for c in string if c not in operators])\n    return all(c.isalpha() and c.lower() for c in string)\n</code></pre>\n\n<p>And it could be used like so:</p>\n\n<pre><code>if is_valid_string(str):\n    # code\n</code></pre>\n\n<p>In this way, you can easily customize which operators are ignored and which are not.</p>\n"}, {"tags": [], "owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "is_accepted": false, "score": 0, "last_activity_date": 1489617644, "creation_date": 1489617644, "answer_id": 42822069, "question_id": 42821894, "link": "https://stackoverflow.com/questions/42821894/is-it-possible-to-use-isalpha-on-a-math-string-and-still-return-true-in-pytho/42822069#42822069", "title": "Is it possible to use isalpha() on a math string, and still return True in python?", "body": "<pre><code>import string\ncomp = string.ascii_lowercase + \"+-/*\"\n</code></pre>\n\n<p>Then your valid replacement is:</p>\n\n<pre><code>if not all([False for char in str if char not in comp]):\n    return False\n</code></pre>\n\n<p>Uses a set <code>in</code> for each char, and only builds a list on failures (fast for good matches).</p>\n\n<p>As a function:</p>\n\n<pre><code>def valid(string):\n    comp = string.ascii_lowercase + \"+-/*\"\n    return all([False for char in str if char not in comp])\n</code></pre>\n"}], "owner": {"reputation": 275, "user_id": 5490886, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9942ec963d84e651e76263127d139887?s=128&d=identicon&r=PG&f=1", "display_name": "VD18421", "link": "https://stackoverflow.com/users/5490886/vd18421"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 42822006, "answer_count": 4, "score": 1, "last_activity_date": 1506269761, "creation_date": 1489616849, "last_edit_date": 1489616940, "question_id": 42821894, "link": "https://stackoverflow.com/questions/42821894/is-it-possible-to-use-isalpha-on-a-math-string-and-still-return-true-in-pytho", "title": "Is it possible to use isalpha() on a math string, and still return True in python?", "body": "<p>For example, I want to return True if the string is <strong>all lowercase</strong>, and only contains <strong>alphabetical characters (with the exception of math operators)</strong>.</p>\n\n<p>For example:\n<code>'x'</code> is True, <code>'X'</code> is False, <code>'x+y'</code> is True <code># here's where it doesn't work</code>.</p>\n\n<p>My current condition is:</p>\n\n<pre><code>if not str.islower() or not str.isalpha():\n    return False\n</code></pre>\n\n<p>When I do <code>x+y</code>, it is all <code>lower</code>, but the string is not <code>alpha</code>. I want a way to somehow <code>ignore</code> the standard math operators: <code>+, -, *</code> since this <strong>is</strong> a <strong>math expression</strong>. Is this possible without much code?</p>\n"}, {"tags": ["python", "packet", "ethernet"], "comments": [{"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 1, "creation_date": 1489619310, "post_id": 42821876, "comment_id": 72756413, "body": "The interface to the underlying library is (mistakenly?) using signed rather than unsigned bytes here.  I don&#39;t know if there&#39;s an easy way to fix that, but there&#39;s an easy workaround: use <code>(BuffDesc_getbyte(packet.pktData, i) &amp; 0xFF)</code> to get unsigned bytes from the packet."}, {"owner": {"reputation": 329, "user_id": 5776617, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/--RV_ptSa9aA/AAAAAAAAAAI/AAAAAAAAAJk/QI2FQ9xZgn0/photo.jpg?sz=128", "display_name": "Alex Turner", "link": "https://stackoverflow.com/users/5776617/alex-turner"}, "reply_to_user": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1489808770, "post_id": 42821876, "comment_id": 72846233, "body": "Perfect! Thanks :)"}], "owner": {"reputation": 329, "user_id": 5776617, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/--RV_ptSa9aA/AAAAAAAAAAI/AAAAAAAAAJk/QI2FQ9xZgn0/photo.jpg?sz=128", "display_name": "Alex Turner", "link": "https://stackoverflow.com/users/5776617/alex-turner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489616807, "creation_date": 1489616807, "question_id": 42821876, "link": "https://stackoverflow.com/questions/42821876/decoding-packets-returns-negative-hex-values", "title": "Decoding packets returns negative hex values", "body": "<p>Trying to decode ethernet frames in python using a function included in a hardware library I'm working with. I'm trying to decode a packet with a known src mac address of <code>00:1b:21:bb:c2:40</code>.</p>\n\n<p>When receiving the packet I'm cycling through each 16 bits and trying to spit out a hex output yielding the following: </p>\n\n<pre><code>-1 -1 -1 -1 -1 -1 00 1b 21 -45 -3e 40 08 06 00 01\n08 00 06 04 00 01 00 1b 21 -45 -3e 40 01 01 01 01\n00 00 00 00 00 00 01 01 01 02 00 00 00 00 00 00\n00 00 00 00 00 00 00 00 00 00 00 00 -1e 5b -67 -50\n</code></pre>\n\n<p>The mac address is hidden in there though the <code>bb and c2</code> are returning negative values for some reason. The print is being generated from:</p>\n\n<pre><code>        for i in xrange(packet.pktData.size):\n          if ((i != 0) and ((i % 16) == 0)):\n            print\n          print \"%02x\" % BuffDesc_getbyte(packet.pktData, i),\n        print\n</code></pre>\n\n<p>I can't find a huge amount (any) detail on what BuffDesc_getbyte is returning other than:</p>\n\n<pre><code>def BuffDesc_getbyte(*args):\n  \"\"\"BuffDesc_getbyte(ofdpa_buffdesc buffdesc, int offset) -&gt; int\"\"\"\n  return _OFDPA_python.BuffDesc_getbyte(*args)\n</code></pre>\n\n<p>My python-foo is horridly bad so excuse my naivity here</p>\n"}, {"tags": ["python", "tkinter", "openpyxl"], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 6901603, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e693630e659de6ee9bd30ef1d9eac512?s=128&d=identicon&r=PG&f=1", "display_name": "Clyde", "link": "https://stackoverflow.com/users/6901603/clyde"}, "edited": false, "score": 0, "creation_date": 1489688461, "post_id": 42834697, "comment_id": 72792914, "body": "Excellent, really appreciate your help!"}], "tags": [], "owner": {"reputation": 956, "user_id": 4729700, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/087241d6b8e76ac735ac3bf3924ef24b?s=128&d=identicon&r=PG&f=1", "display_name": "Jannick", "link": "https://stackoverflow.com/users/4729700/jannick"}, "is_accepted": true, "score": 1, "last_activity_date": 1489668842, "creation_date": 1489668842, "answer_id": 42834697, "question_id": 42821870, "link": "https://stackoverflow.com/questions/42821870/write-information-from-gui-to-excel-worksheet/42834697#42834697", "title": "Write information from GUI to Excel Worksheet", "body": "<p>UpdateSheet needs an input value called value. But for your submit button you don't specify, what this input value should be. So change the line</p>\n\n<pre><code>self.submit_bttn = Button(self, text = \"Submit\", command = self.UpdateSheet).grid(row=10, column=1, sticky=W)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>value = ... specify the value here\nself.submit_bttn = Button(self, text = \"Submit\", command = lambda: self.UpdateSheet(value)).grid(row=10, column=1, sticky=W)\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 6901603, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e693630e659de6ee9bd30ef1d9eac512?s=128&d=identicon&r=PG&f=1", "display_name": "Clyde", "link": "https://stackoverflow.com/users/6901603/clyde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1279, "favorite_count": 0, "accepted_answer_id": 42834697, "answer_count": 1, "score": 0, "last_activity_date": 1489668842, "creation_date": 1489616769, "question_id": 42821870, "link": "https://stackoverflow.com/questions/42821870/write-information-from-gui-to-excel-worksheet", "title": "Write information from GUI to Excel Worksheet", "body": "<p>I am working on a GUI app using TKinter, and the information entered by the user needs to then write to a excel document using Openpyxl. For now, I am trying to get the name chosen from the eng_lst option menu and write that name to cell A3 of Contacts sheet of GatewayUpgrade2.xlsx workbook. How can this be done? Thank you.</p>\n\n<p>This is the error I get:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Python35\\lib\\tkinter\\__init__.py\", line 1559, in __call__\n    return self.func(*args)\nTypeError: UpdateSheet() missing 1 required positional argument: 'value'\n\n\nfrom tkinter import *\nfrom tkinter import ttk\nimport openpyxl\n\n\nclass Application(Frame):\n\n\n    \"\"\"GUI app to automate CR creation\"\"\"\n    def __init__(self, master):\n        \"\"\"Initialize the Frame\"\"\"\n        ttk.Frame.__init__(self, master)\n        self.grid()\n        self.create_widgets()\n\n\n\n\n    def create_widgets(self):\n        #create instruction label and Entry widget\n        eng_font=('Lucida Grande', 11)\n        #CR Number Entry Box\n        self.cr_label = Label(self, text=\"CR Number: \", font=eng_font)\n        self.cr_label.grid(row=0, sticky = E)\n        self.cr_ent = Entry(self)\n        self.cr_ent.grid(row=0, column=1, sticky=E)\n\n\n        #create Submit button\n        self.submit_bttn = Button(self, text = \"Submit\", command = self.UpdateSheet).grid(row=10, column=1, sticky=W)\n\n        #Engineer Selection\n        self.eng_name = Label(self, text=\"Select Engineer: \", font=eng_font).grid(row=3, sticky=E)\n        variable=StringVar(self)\n        variable.set(\"\")\n        eng_lst=OptionMenu(self, variable, 'Johnson, Bob', 'Doe, John', 'Doe, Jane')\n        eng_lst.grid(row=3, column=1, sticky=W)\n\n        #CR Start Date &amp; Time\n        self.date_lbl=Label(self, text=\"CR Start Date &amp; Time\", font=eng_font).grid(row=5,sticky=E)\n        self.date_ent=Entry(self).grid(row=5, column=1, sticky=E)\n        self.duration_lbl=Label(self, text=\"Change Duration\", font=eng_font).grid(row=6, sticky=E)\n        self.duration_ent = Entry(self).grid(row=6, column=1, sticky=E)\n\n        #CR Type Selection\n        self.cr_type_lbl = Label(self, text = 'CR Type', font = eng_font).grid(row=8, sticky=E)\n        variableType=StringVar(self)\n        variableType.set(\"\")\n        cr_type=OptionMenu(self, variableType, 'Gateway Upgrade', 'NIC Replacement', 'Interface Errors', 'Decomm', 'Failover')\n        cr_type.grid(row=8, column=1, sticky=W)\n\n    def UpdateSheet(self, value):\n            wb=openpyxl.load_workbook('GatewayUpgrade2.xlsx')\n            wb.get_sheet_by_name('Contacts')\n            eng_name = value\n            wb['A3'] = eng_name\n\n\n\n\n\n\n\n\n#main\nroot=Tk()\nroot.title(\"CR Creation Tool\")\nroot.geometry(\"400x250\")\n\napp = Application(root)\n\nroot.mainloop()\n</code></pre>\n"}, {"tags": ["python", "django", "dictionary"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1489616611, "post_id": 42821795, "comment_id": 72755305, "body": "Where in the function is the error occurring?  Can you show the actual error message?"}, {"owner": {"reputation": 1406, "user_id": 5193247, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh3.googleusercontent.com/-3La4ZkVapbI/AAAAAAAAAAI/AAAAAAAAAG4/zNRraLjJKZk/photo.jpg?sz=128", "display_name": "Costantin", "link": "https://stackoverflow.com/users/5193247/costantin"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1489616978, "post_id": 42821795, "comment_id": 72755465, "body": "Hey @ScottHunter I&#39;ve added more info, thanks"}, {"owner": {"reputation": 7130, "user_id": 1429073, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6cf3963f7758df3b57542c790e598630?s=128&d=identicon&r=PG&f=1", "display_name": "DevLounge", "link": "https://stackoverflow.com/users/1429073/devlounge"}, "edited": false, "score": 0, "creation_date": 1489617114, "post_id": 42821795, "comment_id": 72755511, "body": "google_profile is a string, so you cannot use [&#39;items&#39;], this works only on dicts, defaultdicts and OrderedDicts or classes implementing <b>getitem</b>"}, {"owner": {"reputation": 1406, "user_id": 5193247, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh3.googleusercontent.com/-3La4ZkVapbI/AAAAAAAAAAI/AAAAAAAAAG4/zNRraLjJKZk/photo.jpg?sz=128", "display_name": "Costantin", "link": "https://stackoverflow.com/users/5193247/costantin"}, "edited": false, "score": 0, "creation_date": 1489617409, "post_id": 42821795, "comment_id": 72755629, "body": "That was correct, and json solved the problem with: <code>import json</code> <code>s = &quot;{&#39;muffin&#39; : &#39;lolz&#39;, &#39;foo&#39; : &#39;kitty&#39;}&quot;</code> <code>json_acceptable_string = s.replace(&quot;&#39;&quot;, &quot;\\&quot;&quot;)</code> <code>d = json.loads(json_acceptable_string)</code> <code># d = {u&#39;muffin&#39;: u&#39;lolz&#39;, u&#39;foo&#39;: u&#39;kitty&#39;}</code> from <a href=\"http://stackoverflow.com/questions/988228/convert-a-string-representation-of-a-dictionary-to-a-dictionary\">Other Question</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1406, "user_id": 5193247, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh3.googleusercontent.com/-3La4ZkVapbI/AAAAAAAAAAI/AAAAAAAAAG4/zNRraLjJKZk/photo.jpg?sz=128", "display_name": "Costantin", "link": "https://stackoverflow.com/users/5193247/costantin"}, "is_accepted": true, "score": 0, "last_activity_date": 1489618992, "last_edit_date": 1495541871, "creation_date": 1489618992, "answer_id": 42822347, "question_id": 42821795, "link": "https://stackoverflow.com/questions/42821795/string-indices-must-be-integers-django/42822347#42822347", "title": "String indices must be integers - Django", "body": "<p>So just to make it clear for who finds this question:</p>\n\n<p>If you save a dictionary in a database django will save it as a string, so you won't be able to access it after. </p>\n\n<p>To solve this you can re-convert it to a dictionary:</p>\n\n<p>The answer from <a href=\"https://stackoverflow.com/questions/988228/convert-a-string-representation-of-a-dictionary-to-a-dictionary\">this post</a> worked perfectly for me, in other words:</p>\n\n<pre><code>import json\ns = \"{'muffin' : 'lolz', 'foo' : 'kitty'}\"\njson_acceptable_string = s.replace(\"'\", \"\\\"\")\nd = json.loads(json_acceptable_string)\n# d = {u'muffin': u'lolz', u'foo': u'kitty'}\n</code></pre>\n\n<p>There are many ways to convert a string to a dictionary, this is only one. If you stumbled in this problem you can quickly check if it's a string instead of a dictionary with: </p>\n\n<pre><code>print(type(var))\n</code></pre>\n\n<p>In my case I had: </p>\n\n<p><code>&lt;class 'str'&gt;</code> </p>\n\n<p>before converting it with the above method and then I got </p>\n\n<p><code>&lt;class 'dict'&gt;</code></p>\n\n<p>and everything worked as supposed to</p>\n"}], "owner": {"reputation": 1406, "user_id": 5193247, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh3.googleusercontent.com/-3La4ZkVapbI/AAAAAAAAAAI/AAAAAAAAAG4/zNRraLjJKZk/photo.jpg?sz=128", "display_name": "Costantin", "link": "https://stackoverflow.com/users/5193247/costantin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 741, "favorite_count": 0, "accepted_answer_id": 42822347, "answer_count": 1, "score": 0, "last_activity_date": 1489618992, "creation_date": 1489616457, "last_edit_date": 1489616940, "question_id": 42821795, "link": "https://stackoverflow.com/questions/42821795/string-indices-must-be-integers-django", "title": "String indices must be integers - Django", "body": "<p>I have a pretty big dictionary which looks like this:</p>\n\n<pre><code>{\n'startIndex': 1,\n'username': 'myemail@gmail.com',\n'items': [{\n    'id': '67022006',\n    'name': 'Adopt-a-Hydrant',\n    'kind': 'analytics#accountSummary',\n    'webProperties': [{\n        'id': 'UA-67522226-1',\n        'name': 'Adopt-a-Hydrant',\n        'websiteUrl': 'https://www.udemy.com/,\n        'internalWebPropertyId': '104343473',\n        'profiles': [{\n            'id': '108333146',\n            'name': 'Adopt a Hydrant (Udemy)',\n            'type': 'WEB',\n            'kind': 'analytics#profileSummary'\n        }, {\n            'id': '132099908',\n            'name': 'Unfiltered view',\n            'type': 'WEB',\n            'kind': 'analytics#profileSummary'\n        }],\n        'level': 'STANDARD',\n        'kind': 'analytics#webPropertySummary'\n    }]\n}, {\n    'id': '44222959',\n    'name': 'A223n',\n    'kind': 'analytics#accountSummary', \n\nAnd so on....\n</code></pre>\n\n<p>When I copy this dictionary on my Jupyter notebook and I run the exact same function I run on my django code it runs as expected, everything is literarily the same, in my django code I'm even printing the dictionary out then I copy it to the notebook and run it and I get what I'm expecting.</p>\n\n<p>Just for more info this is the function:</p>\n\n<pre><code>google_profile = gp.google_profile # Get google_profile from DB\nprint(google_profile)\nall_properties = []\nfor properties in google_profile['items']:\n    all_properties.append(properties)\n\nsite_selection=[]\nfor single_property in all_properties:\n    single_propery_name=single_property['name']\n    for single_view in single_property['webProperties'][0]['profiles']:\n        single_view_id = single_view['id']\n        single_view_name = (single_view['name'])\n        selections = single_propery_name + ' (View: '+single_view_name+' ID: '+single_view_id+')'\n        site_selection.append(selections)\nprint (site_selection)\n</code></pre>\n\n<p>So my guess is that my notebook has some sort of json parser installed or something like that? Is that possible? Why in django I can't access dictionaries the same way I can on my ipython notebooks?</p>\n\n<p><strong>EDITS</strong></p>\n\n<p>More info: \nThe error is at the line: <code>for properties in google_profile['items']:</code>\nDjango debug is: <code>TypeError at /gconnect/ string indices must be integers</code></p>\n\n<p>Local Vars are:</p>\n\n<pre><code>all_properties =[]\ncurrent_user = 'myemail@gmail.com'\ngoogle_profile  = `the above dictionary`\n</code></pre>\n"}, {"tags": ["python", "json", "ssl", "https", "python-requests"], "answers": [{"comments": [{"owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1489643667, "post_id": 42821881, "comment_id": 72763268, "body": "Either the python is old and does not support SNI (was implemented in 2.7.9) which might be needed by the site or the site is not properly setup and missing a chain certificate (browsers will often work around this problem). Check your site with <a href=\"https://www.ssllabs.com/ssltest/analyze.html\" rel=\"nofollow noreferrer\">SSLLabs</a> and look for chain issues or SNI requirement. Simply disabling certificate validation is not a good idea."}], "tags": [], "owner": {"reputation": 377, "user_id": 5875681, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9e3fb5a19237f8e63f6d208993446fe8?s=128&d=identicon&r=PG&f=1", "display_name": "Lee Melbourne", "link": "https://stackoverflow.com/users/5875681/lee-melbourne"}, "is_accepted": true, "score": 0, "last_activity_date": 1491993389, "last_edit_date": 1491993389, "creation_date": 1489616815, "answer_id": 42821881, "question_id": 42821751, "link": "https://stackoverflow.com/questions/42821751/python-requests-call-fails-with-https/42821881#42821881", "title": "Python requests call fails with HTTPS", "body": "<p>Aha! With a little more digging into the request module docs I found the answer. If I use the following</p>\n\n<pre><code>r = requests.post(self.api_apiurl, data=json.dumps(jsonpkg), headers=headers, verify=False)\n</code></pre>\n\n<p>then it works. So the issue is with verifying the cert. I am not quite sure why the browser gets by without this...but perhaps it does the extra stuff automatically. So I either need to NOT verify the cert or have a local copy(?) that can be verified.</p>\n\n<hr>\n\n<p>Final Update:</p>\n\n<p>I finally worked out how to concatenate my site certificate with the chain certificate (and understand why). This site <a href=\"http://nginx.org/en/docs/http/configuring_https_servers.html#chains\" rel=\"nofollow noreferrer\">here</a> was a great help. Also, once they are concatenated you will probably get a second error, which if you google it you will find is caused by the need for a carriage return after the first certificate and before the second (edit the resulting concatenated file with notepad). I then was able to return the post to using \"verify=True\" which made the warnings about no verification go away.</p>\n"}], "owner": {"reputation": 377, "user_id": 5875681, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9e3fb5a19237f8e63f6d208993446fe8?s=128&d=identicon&r=PG&f=1", "display_name": "Lee Melbourne", "link": "https://stackoverflow.com/users/5875681/lee-melbourne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1623, "favorite_count": 0, "accepted_answer_id": 42821881, "answer_count": 1, "score": 0, "last_activity_date": 1491993389, "creation_date": 1489616258, "question_id": 42821751, "link": "https://stackoverflow.com/questions/42821751/python-requests-call-fails-with-https", "title": "Python requests call fails with HTTPS", "body": "<p>I am running a Flask restful API behind an NGINX web server on AWS. I am hitting that with a python module from my Pi.</p>\n\n<p>Everything worked fine when I was using HTTP to make calls to the api. But I just locked down my api so only HTTPS is possible. I changed the UIRL used by my python module but it now fails. The code is quite simple...here is an extract:</p>\n\n<pre><code>jsonpkg = {'subscriberID': self.api_login, 'token': self.api_token,\n              'content': speech_content}\nheaders = {'Content-Type': 'application/json'}\nr = requests.post(self.api_apiurl, data=json.dumps(jsonpkg), headers=headers)\n</code></pre>\n\n<p>The values are being correct set by the class init section. And I am importing the requests module at the top. Error messages indicate it is using python 2.7. However when I monitor the API I can see its not even hitting the server. I can point a browser to the api and its working fine. </p>\n\n<p>Am I to understand the requests module in python 2.7 does not support https? </p>\n\n<p>Are there additional parameters I need to send for https?</p>\n"}, {"tags": ["python", "arrays", "algorithm", "python-3.x", "numpy"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1489616666, "post_id": 42821711, "comment_id": 72755328, "body": "I would suggest to convert the numpy array into an image and then use image-processing tools (OpenCV?)"}], "answers": [{"comments": [{"owner": {"reputation": 2309, "user_id": 1269634, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8b33cfdd331ac690e21e1eb478ab8331?s=128&d=identicon&r=PG&f=1", "display_name": "Geoff", "link": "https://stackoverflow.com/users/1269634/geoff"}, "edited": false, "score": 0, "creation_date": 1489617596, "post_id": 42821935, "comment_id": 72755704, "body": "Beautiful! This is exactly as simple as I was hoping. Thanks!"}, {"owner": {"reputation": 3480, "user_id": 1764129, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2b842351820ae0b23c96d398ddff1f0e?s=128&d=identicon&r=PG", "display_name": "p-robot", "link": "https://stackoverflow.com/users/1764129/p-robot"}, "edited": false, "score": 1, "creation_date": 1489617685, "post_id": 42821935, "comment_id": 72755743, "body": "Why not simply <code>img[idx[:,0], idx[:,1]].sum()</code>?"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 3480, "user_id": 1764129, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2b842351820ae0b23c96d398ddff1f0e?s=128&d=identicon&r=PG", "display_name": "p-robot", "link": "https://stackoverflow.com/users/1764129/p-robot"}, "edited": false, "score": 2, "creation_date": 1489618169, "post_id": 42821935, "comment_id": 72755941, "body": "@P-robot Guess it wasn&#39;t clear before in the sample run before. We need the pts inside the polygon too and not just the pts on the polygon outline represented by <code>idx</code>. So, we needed all the work of filling blob and calling out <code>ndimage</code>&#39;s help :)"}], "tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": true, "score": 2, "last_activity_date": 1489618087, "last_edit_date": 1489618087, "creation_date": 1489617056, "answer_id": 42821935, "question_id": 42821711, "link": "https://stackoverflow.com/questions/42821711/how-can-i-pull-the-values-from-a-numpy-2-d-array-that-are-inside-a-polygon-laid/42821935#42821935", "title": "How can I pull the values from a NumPy 2-D array that are inside a polygon laid on top of the array?", "body": "<p>Steps involved -</p>\n\n<ul>\n<li><p>Create a boolean array of the same shape as the image array.</p></li>\n<li><p>Fill the outline using the given outline points.</p></li>\n<li><p>Create the polygon blob by filling that hole created by the outlined points.</p></li>\n<li><p>Boolean-index into image array with the filled mask and get the total sum.</p></li>\n</ul>\n\n<p>Implementation -</p>\n\n<pre><code>from scipy.ndimage.morphology import binary_fill_holes as imfill\n\nmask = np.zeros(img.shape,dtype=bool)\nmask[idx[:,0], idx[:,1]] = 1\nout = img[imfill(mask)].sum()\n</code></pre>\n\n<p>Sample run -</p>\n\n<p>1) Input image and polygon outline pts :</p>\n\n<pre><code>In [107]: img\nOut[107]: \narray([[1, 6, 8, 4, 2, 3],\n       [5, 4, 1, 3, 7, 9],\n       [1, 0, 2, 3, 4, 8],\n       [6, 7, 0, 5, 7, 4],\n       [0, 1, 2, 5, 4, 2]])\n\nIn [108]: idx\nOut[108]: \narray([[1, 2],\n       [2, 3],\n       [3, 3],\n       [4, 2],\n       [4, 1],\n       [3, 1],\n       [2, 1],\n       [1, 2]])\n</code></pre>\n\n<p>2) Proposed codes :</p>\n\n<pre><code>In [109]: mask = np.zeros(img.shape,dtype=bool)\n     ...: mask[idx[:,0], idx[:,1]] = 1\n     ...: out = img[imfill(mask)].sum()\n     ...: \n</code></pre>\n\n<p>3) Analyze the results :</p>\n\n<pre><code>In [134]: imfill(mask) # Polygon mask\nOut[134]: \narray([[False, False, False, False, False, False],\n       [False, False,  True, False, False, False],\n       [False,  True,  True,  True, False, False],\n       [False,  True,  True,  True, False, False],\n       [False,  True,  True, False, False, False]], dtype=bool)\n\nIn [135]: img[imfill(mask)]\nOut[135]: array([1, 0, 2, 3, 7, 0, 5, 1, 2])\n\nIn [136]: img[imfill(mask)].sum()\nOut[136]: 21\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": false, "score": 1, "last_activity_date": 1489617452, "creation_date": 1489617452, "answer_id": 42822028, "question_id": 42821711, "link": "https://stackoverflow.com/questions/42821711/how-can-i-pull-the-values-from-a-numpy-2-d-array-that-are-inside-a-polygon-laid/42822028#42822028", "title": "How can I pull the values from a NumPy 2-D array that are inside a polygon laid on top of the array?", "body": "<p>I don't know it's the most efficient (most probably not), but it's vectorised and it works. <code>a</code> is the 'picture', <code>b</code> is the polygon.</p>\n\n<pre><code>i, k = np.indices(a.shape)\nz = i+k*1j\np = b[:,0]+b[:,1]*1j\nm = np.unwrap(np.angle(z[..., None]-p), axis=-1)\nm = ~np.isclose (m[...,-1], m[...,0]) | np.any(np.isclose(z[..., None], p), axis=-1)\nres = np.sum(a[m])\n# 21 -&gt; res\n</code></pre>\n"}], "owner": {"reputation": 2309, "user_id": 1269634, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8b33cfdd331ac690e21e1eb478ab8331?s=128&d=identicon&r=PG&f=1", "display_name": "Geoff", "link": "https://stackoverflow.com/users/1269634/geoff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 804, "favorite_count": 0, "accepted_answer_id": 42821935, "answer_count": 2, "score": 0, "last_activity_date": 1489618087, "creation_date": 1489616090, "question_id": 42821711, "link": "https://stackoverflow.com/questions/42821711/how-can-i-pull-the-values-from-a-numpy-2-d-array-that-are-inside-a-polygon-laid", "title": "How can I pull the values from a NumPy 2-D array that are inside a polygon laid on top of the array?", "body": "<p>My goal is the following: given a 2-D array and a polygon that can be laid on top of the array, I want to pull out the values within the polygon (boundaries included) and sum the values.</p>\n\n<p>Suppose I have a 2-D array like this:</p>\n\n<pre><code>1 6 8 4 2 3\n5 4 1 3 7 9\n1 0 2 3 4 8\n6 7 0 5 7 4\n0 1 2 5 4 2\n</code></pre>\n\n<p>And suppose I have a polygon with the following vertices:</p>\n\n<pre><code>(1, 2)\n(2, 3)\n(3, 3)\n(4, 2)\n(4, 1)\n(3, 1)\n(2, 1)\n(1, 2)\n</code></pre>\n\n<p>Laying the polygon on top of the array would result in the following:</p>\n\n<pre><code>_ _ _ _ _ _\n_ _ 1 _ _ _\n_ 0 2 3 _ _\n_ 7 0 5 _ _\n_ 1 2 _ _ _\n</code></pre>\n\n<p>Finally, I want to sum the values. So the final output would be 21.</p>\n\n<p>What's the most efficient way to do this? I've seen references to <code>matplotlib.path</code> and Shapely, but I haven't found anything that quite works for what I need unless I'm just missing something (which is certainly possible). It seems like this functionality should be built into NumPy, but I haven't come across it if it is.</p>\n\n<p>Why I need this: I have an ASCII grid representing world-wide population, and I have political boundaries. I'm wanting to overlay the political boundaries on the population grid in order to determine that location's total population count.</p>\n"}, {"tags": ["python", "matplotlib", "heatmap"], "answers": [{"tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": false, "score": 0, "last_activity_date": 1489653051, "creation_date": 1489653051, "answer_id": 42828828, "question_id": 42821681, "link": "https://stackoverflow.com/questions/42821681/generating-discrete-heatmap-from-3d-data-in-matplotlib/42828828#42828828", "title": "Generating Discrete Heatmap from 3D Data in Matplotlib", "body": "<p>You may use the <code>levels</code> argument to <a href=\"http://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.contourf.html\" rel=\"nofollow noreferrer\">contour</a>, e.g <code>levels=[0,0.5,1]</code>.</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\n#===Load Data===#\nx,y  = np.meshgrid(np.arange(20),np.arange(20) )\ndata = np.random.randint(0,2, size=(20,20))\n\n#===Plot===#\nplt.subplot(111)\nplt.contourf(x,y,data, levels=[0,0.5,1])\nplt.colorbar()\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/cnOKS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cnOKS.png\" alt=\"enter image description here\"></a></p>\n\n<p>Another option may be to use <code>imshow()</code></p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\n#===Load Data===#\nx,y  = np.meshgrid(np.arange(20),np.arange(20) )\ndata = np.random.randint(0,2, size=(20,20))\n\n#===Plot===#\nplt.subplot(111)\nplt.imshow(data, interpolation=\"None\")\nplt.colorbar()\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/UUf3k.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UUf3k.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 592, "user_id": 1681409, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/54903e0733d46e7c72501b5cc1e62e5b?s=128&d=identicon&r=PG", "display_name": "The Dude", "link": "https://stackoverflow.com/users/1681409/the-dude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2033, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1489653051, "creation_date": 1489615952, "last_edit_date": 1495541843, "question_id": 42821681, "link": "https://stackoverflow.com/questions/42821681/generating-discrete-heatmap-from-3d-data-in-matplotlib", "title": "Generating Discrete Heatmap from 3D Data in Matplotlib", "body": "<p>So I want to do something like this:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/22872061/generating-a-heat-map-using-3d-data-in-matplotlib\">Generating a heat map using 3D data in matplotlib</a></p>\n\n<p>But I don't want my color axis to be continuous.</p>\n\n<hr>\n\n<p>My input data is of the form:</p>\n\n<pre><code>x = [0, 0, 0, ... , 20, 20, 20, ..., 39, 39, 39]\ny = [0, 1, 2, ..., 0, 1, 2... , 37, 38, 39]\nz = [0, 1, 0, ..., 1, 1, 0, ..., 1, 0 ,0]\n</code></pre>\n\n<p>In other words, my  z value is either a 0, or a 1, and never goes in-between.</p>\n\n<p>I try:</p>\n\n<pre><code> import numpy\n import matplotlib.pyplot as plt\n\n #===Load Data===#\n data = numpy.loadtxt(\"class_map.dat\");\n\n #===Get Array Sizes===#\n max_x_size = int(numpy.sqrt(len(data[:,0])));\n max_y_size = int(numpy.sqrt(len(data[:,1])));\n\n #===Reshape Into Square Grid===#\n x = data[:,0]; xx = numpy.reshape(x, (max_x_size, max_x_size));\n y = data[:,1]; yy = numpy.reshape(y, (max_y_size, max_y_size));\n z = data[:,2]; zz = numpy.reshape(z, (max_x_size, max_y_size));\n\n #===Plot===#\n plt.subplot(111)\n plt.contourf(xx,yy,zz)\n plt.colorbar()\n plt.show();\n</code></pre>\n\n<p>But what I get is:</p>\n\n<p><a href=\"https://i.stack.imgur.com/dDZ03.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dDZ03.png\" alt=\"Result\"></a></p>\n\n<p>It looks like contourf is giving me a continuous function. I want it to simply display the values that are already in the z-variable, rather than fitting a function to it. How can I do this?</p>\n\n<p>Edit: Also, I would like to have the discrete values (0 or 1) on a gray scale, if possible.</p>\n"}, {"tags": ["python", "django", "amazon-s3", "upload", "boto3"], "comments": [{"owner": {"reputation": 1747, "user_id": 2896976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3baa97daedb276fbd0cdca06d6de4d2d?s=128&d=identicon&r=PG&f=1", "display_name": "Jesse", "link": "https://stackoverflow.com/users/2896976/jesse"}, "edited": false, "score": 1, "creation_date": 1489617359, "post_id": 42821661, "comment_id": 72755608, "body": "Well, you either need to add a hash to the file name, or put it in a directory that&#39;s unique."}], "answers": [{"tags": [], "owner": {"reputation": 2153, "user_id": 3687725, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/1We1W.jpg?s=128&g=1", "display_name": "Preston Martin", "link": "https://stackoverflow.com/users/3687725/preston-martin"}, "is_accepted": true, "score": 1, "last_activity_date": 1489639740, "creation_date": 1489639740, "answer_id": 42825524, "question_id": 42821661, "link": "https://stackoverflow.com/questions/42821661/upload-different-files-with-identical-filenames-using-boto3-and-django-and-s3/42825524#42825524", "title": "Upload different files with identical filenames using boto3 and Django (and S3)", "body": "<p>If possible, I would have a unique identifier for the user, and upload all files for that user with the identifier appended to the url as a folder. An example would be if your bucket was mybucket, and your identifier was the userId, your upload url would be '<a href=\"http://my-bucket.s3.amazonaws.com/\" rel=\"nofollow noreferrer\">http://my-bucket.s3.amazonaws.com/</a>' + user.Id + '/' + uploaded_file.name. S3 does not have a directory structure, but uses name prefixes as a way to make organize your files easier. Below is a link to the relevant documentation:</p>\n\n<p><a href=\"http://docs.aws.amazon.com/AmazonS3/latest/UG/FolderOperations.html\" rel=\"nofollow noreferrer\" title=\"S3: Working with Folders\">S3: Working with Folders</a></p>\n"}], "owner": {"reputation": 75, "user_id": 7696549, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6b7e25c5cc6fa159e203442e9bdfd5ef?s=128&d=identicon&r=PG&f=1", "display_name": "John Amos", "link": "https://stackoverflow.com/users/7696549/john-amos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 815, "favorite_count": 0, "accepted_answer_id": 42825524, "answer_count": 1, "score": 3, "last_activity_date": 1489639740, "creation_date": 1489615895, "last_edit_date": 1489616779, "question_id": 42821661, "link": "https://stackoverflow.com/questions/42821661/upload-different-files-with-identical-filenames-using-boto3-and-django-and-s3", "title": "Upload different files with identical filenames using boto3 and Django (and S3)", "body": "<p>I am trying to create a Django server that stores media files on S3 where users can upload their own files that might all have the same filename but be different files. I have set up S3 and gotten it working via explicit python commands like </p>\n\n<pre><code>import boto3\ns3 = boto3.resource('s3')\ns3.Object('my-bucket','text.txt').put(Body=open('/text.txt', 'rb'))\n</code></pre>\n\n<p>I am setting up my model like this:</p>\n\n<pre><code>import boto3\ns3 = boto3.resource('s3')\nclass MyModel(models.Model):\n    my_file = models.FileField()\n    file_url = models.CharField(max_length=200, blank=True, null=True)\n</code></pre>\n\n<p>In my views.py, my upload form is:</p>\n\n<pre><code>import boto3\ns3 = boto3.resource('s3')\n\n...\n\nif form.is_valid():\n    # creates object from form but doesn't go into database\n    mymodel = form.save(commit=False)\n    uploaded_file = request.FILES['my_file']\n    s3.Object('my-bucket',uploaded_file.name).put(Body=request.FILES['uploaded_file'])\n    mymodel.file_url = 'http://my-bucket.s3.amazonaws.com/' + uploaded_file.name;\n</code></pre>\n\n<p>I would like users to be upload their own files that might all have the same filename but be different files. I can imagine generating an md5 string and then appending that to the file name, but then when people go to download their files they will have a random hash string appended to the end of the file.</p>\n\n<p>I assume there is a better, more elegant way to do this. Can anyone help?</p>\n"}, {"tags": ["python", "postgresql", "sqlalchemy"], "comments": [{"owner": {"reputation": 16460, "user_id": 341730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc4ac3bee5a31e114112c0222eef62e0?s=128&d=identicon&r=PG", "display_name": "univerio", "link": "https://stackoverflow.com/users/341730/univerio"}, "edited": false, "score": 1, "creation_date": 1489640401, "post_id": 42821643, "comment_id": 72762139, "body": "You need the <a href=\"http://docs.sqlalchemy.org/en/latest/orm/extensions/mutable.html\" rel=\"nofollow noreferrer\">mutable extensions</a>."}, {"owner": {"reputation": 8064, "user_id": 555515, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b1c0a29c7f0cfa9a3f586cfddecee628?s=128&d=identicon&r=PG", "display_name": "neuront", "link": "https://stackoverflow.com/users/555515/neuront"}, "edited": false, "score": 0, "creation_date": 1489656958, "post_id": 42821643, "comment_id": 72770154, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/25300447/using-list-on-postgresql-json-type-with-sqlalchemy\">using list on postgresql JSON type with sqlalchemy</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4333, "user_id": 2093785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fd2f4b2767debd3902d8ad59c38fc16?s=128&d=identicon&r=PG", "display_name": "RazerM", "link": "https://stackoverflow.com/users/2093785/razerm"}, "is_accepted": false, "score": 2, "last_activity_date": 1489655646, "creation_date": 1489655646, "answer_id": 42829689, "question_id": 42821643, "link": "https://stackoverflow.com/questions/42821643/sqlalchemy-not-committing-changes-to-postgres/42829689#42829689", "title": "SQLAlchemy not committing changes to postgres", "body": "<p>When dealing with <code>JSON</code> columns, you can call <a href=\"http://docs.sqlalchemy.org/en/latest/orm/session_api.html?highlight=flag_modified#sqlalchemy.orm.attributes.flag_modified\" rel=\"nofollow noreferrer\"><code>flag_modified</code></a> rather than try to use the mutable extensions on arbitrary levels of nesting:</p>\n\n<pre><code>from sqlalchemy.orm.attributes import flag_modified\n\ndef addUser(self, username):\n    data = self.data\n    if username not in data[u'members']:\n        data[u'members'].append(username)\n        flag_modified(self, 'data')\n</code></pre>\n"}], "owner": {"reputation": 359, "user_id": 3642365, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/92e5fb9201fa48b647e1904eea0270e2?s=128&d=identicon&r=PG&f=1", "display_name": "user3642365", "link": "https://stackoverflow.com/users/3642365/user3642365"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 525, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489655646, "creation_date": 1489615824, "last_edit_date": 1489619169, "question_id": 42821643, "link": "https://stackoverflow.com/questions/42821643/sqlalchemy-not-committing-changes-to-postgres", "title": "SQLAlchemy not committing changes to postgres", "body": "<p>I am having trouble committing database changes using SQLAlchemy and I cannot figure out why.</p>\n\n<p>Here is the data model in question:</p>\n\n<pre><code>class EmailGroup(db.Model):\n    __tablename__ = 'email_group'\n    id = db.Column(db.Integer, primary_key=True)\n    name = db.Column(db.String(), unique=True, nullable=False)\n    data = db.Column(db.JSON)\n\ndef __init__(self, name):\n    self.name = name\n    self.data = {u'members': []}\n\ndef addUser(self, username):\n    data = self.data\n    if username not in data[u'members']:\n        data[u'members'].append(username)\n        self.data = data\n</code></pre>\n\n<p>Here is the server code:</p>\n\n<pre><code>@app.route('/emailgroup/&lt;groupid&gt;/adduser/&lt;userid&gt;', methods=['POST'])\n@jwt_required()\ndef emailGroupAddUser(groupid, userid):\n    emailgroup = EmailGroup.query.filter_by(id=groupid).first()\n    if not emailgroup:\n        return 'Group with id ' + groupid + ' does not exist.', status.HTTP_400_BAD_REQUEST\n    user = User.query.filter_by(id=userid).first()\n    if not user:\n        return 'User with id ' + userid + ' does not exist.', status.HTTP_400_BAD_REQUEST\n    emailgroup.addUser(user.username)\n    print emailgroup.dumps() # Is correctly updated here\n    db.session.add(emailgroup)\n    db.session.commit()\n    print emailgroup.dumps() # Changes did not go through!\n    return jsonify(emailgroup.dumps())\n</code></pre>\n\n<p>I have also tried using <code>db.session.flush()</code> instead of <code>add/commit</code>, which makes the two print statements print the correct outputs, but does not actually update the database still.</p>\n\n<p>EDIT: I also tried using the Array type in SQLAlchemy but faced the same exact issue.</p>\n"}, {"tags": ["python", "csv", "duplicates", "counter"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1489616282, "post_id": 42821635, "comment_id": 72755170, "body": "Your code has an undefined variable <code>row</code>. Please post your <i>actual</i> code."}, {"owner": {"reputation": 41, "user_id": 4279090, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/bd5e717c3b9015aa337705e30631ad9a?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4279090/john"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1489616522, "post_id": 42821635, "comment_id": 72755273, "body": "ah that is because row is being treated like a list and row is literally a row in the excel spreadsheet..."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 4279090, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/bd5e717c3b9015aa337705e30631ad9a?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4279090/john"}, "edited": false, "score": 0, "creation_date": 1489616763, "post_id": 42821813, "comment_id": 72755369, "body": "your interpretation is correct! I&#39;m new to stack overflow and I couldn&#39;t attach my excel spreadsheet to the question, hence the difficulty in expressing :/ the data is literally three long columns full of mixed letters and numbers like akgha898 where the first column represents names, second places and third values ( but for this problem we dont care about values )"}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "reply_to_user": {"reputation": 41, "user_id": 4279090, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/bd5e717c3b9015aa337705e30631ad9a?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4279090/john"}, "edited": false, "score": 0, "creation_date": 1489617188, "post_id": 42821813, "comment_id": 72755546, "body": "@John welcome. Please read <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> to get more accommodated:)"}], "tags": [], "owner": {"reputation": 361, "user_id": 4982248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2f28a61e4fddf49dc9c73c16ddaac33?s=128&d=identicon&r=PG&f=1", "display_name": "Russel Simmons", "link": "https://stackoverflow.com/users/4982248/russel-simmons"}, "is_accepted": false, "score": 0, "last_activity_date": 1489616517, "creation_date": 1489616517, "answer_id": 42821813, "question_id": 42821635, "link": "https://stackoverflow.com/questions/42821635/iterating-through-columns-in-a-csv-file-to-find-number-of-occurrences-for-an-ite/42821813#42821813", "title": "Iterating through columns in a csv file to find number of occurrences for an item - PYTHON", "body": "<p>First of all, the code you posted has a bug and doesn't even run. Also, making a new <code>Counter</code> for each line is certainly a problem if you want to keep some overall counts. Also I'm assuming that your input data is really comma-separated; the sample you pasted appears to be space or tab-separated.</p>\n\n<p>If I understand your question correctly, you're looking to find out how many <em>different</em> places are associated with a single name. The idea is that for each name we've encountered, we keep a <code>set</code> of places that it has been associated with. Then in the end, we loop through each name and print the size of the places-set.</p>\n\n<pre><code>import csv\n\nname_places = {} # map from name to set of places\n\nwith open('input.csv', 'r') as f:\n    EXP = csv.reader(f)\n    HEADERS = next(EXP)\n    for (name, place, value)  in EXP:\n        name_places.setdefault(name, set())\n        name_places[name].add(place)\n\nfor name, places in name_places.items():\n    print('%s,%d' % (name, len(places)))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7130, "user_id": 1429073, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6cf3963f7758df3b57542c790e598630?s=128&d=identicon&r=PG&f=1", "display_name": "DevLounge", "link": "https://stackoverflow.com/users/1429073/devlounge"}, "is_accepted": false, "score": 0, "last_activity_date": 1489618089, "last_edit_date": 1489618089, "creation_date": 1489616589, "answer_id": 42821831, "question_id": 42821635, "link": "https://stackoverflow.com/questions/42821635/iterating-through-columns-in-a-csv-file-to-find-number-of-occurrences-for-an-ite/42821831#42821831", "title": "Iterating through columns in a csv file to find number of occurrences for an item - PYTHON", "body": "<p>I would just use <code>defaultdict</code> and no csv reader:</p>\n\n<h1>data.csv</h1>\n\n<pre><code>name place value\nfal6s hlkshf8 alksj0\nsaljg h9ag80a ha8g9a\nlak5f agk1h00 ha035a\nlak5f agk1h00 ha035a\nfal6s hlkshf8 alksj0\nfal6s hlkshf8 alksj0\nfal6s hlkshf8 alksj0\n</code></pre>\n\n<h1>code</h1>\n\n<pre><code>from collections import defaultdict\n\nres = defaultdict(set)\nwith open('data.csv') as f:\n    headers = next(f).split()\n    for line in f:\n        name, place, _ = line.split()\n        res[name].add(place)\n\nfor name, places in res.iteritems():\n    print name, len(places)\n</code></pre>\n\n<h1>Output:</h1>\n\n<pre><code>saljg 1\nlak5f 2\nfal6s 3\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 4279090, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/bd5e717c3b9015aa337705e30631ad9a?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4279090/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 436, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1489618089, "creation_date": 1489615798, "last_edit_date": 1489616451, "question_id": 42821635, "link": "https://stackoverflow.com/questions/42821635/iterating-through-columns-in-a-csv-file-to-find-number-of-occurrences-for-an-ite", "title": "Iterating through columns in a csv file to find number of occurrences for an item - PYTHON", "body": "<h2>I have three columns in a csv file (Excel spreadsheet):</h2>\n\n<p><strong>name  place   value</strong></p>\n\n<p>fal6s hlkshf8 alksj0</p>\n\n<p>saljg h9ag80a ha8g9a</p>\n\n<p>lak5f agk1h00 ha035a</p>\n\n<hr>\n\n<p>and so on (thousands of data points long)</p>\n\n<p>there are duplicates in the columns name and place.</p>\n\n<p>i want to find how many places are associated with just one name.</p>\n\n<p>for e.g. for name 'algh9g0' i want to count how many places are tagged to it</p>\n\n<p>I think I need to use Counter() or defaultdict().</p>\n\n<p>so far I have:</p>\n\n<pre><code>from  collections import Counter\nwith open('/Users/tb/Desktop/blah.csv', 'r') as f:\n    EXP = csv.reader(f)\n    HEADERS = next(EXP)     #skip over column titles\n    for row in EXP:\n        counts = Counter(row[1])     \n        print counts ... for every unique name\n</code></pre>\n\n<p>but its not giving me what i want.\ni'm trying to say: for every name in column 1, count the number of places which are located in column 2.</p>\n\n<p>its printing: </p>\n\n<pre><code>Counter({'6': 2, '9': 2, '8': 2, 'c': 1, 'e': 1, 'd': 1, 'f': 1, '0': 1, '7': 1})\n</code></pre>\n\n<p>as if it's splitting up the items.</p>\n\n<p>Thanks </p>\n"}, {"tags": ["python", "scikit-learn", "hierarchical-clustering"], "comments": [{"owner": {"reputation": 3135, "user_id": 7441757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02d139faa2ede7b2b6109852cd418f67?s=128&d=identicon&r=PG&f=1", "display_name": "Roelant", "link": "https://stackoverflow.com/users/7441757/roelant"}, "edited": false, "score": 1, "creation_date": 1490099183, "post_id": 42821622, "comment_id": 72951470, "body": "Your code doesn&#39;t run like this :) Maybe worth testing it yourself in a new python session."}, {"owner": {"reputation": 1259, "user_id": 1753315, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/VMPuJ.jpg?s=128&g=1", "display_name": "Michael Davidson", "link": "https://stackoverflow.com/users/1753315/michael-davidson"}, "reply_to_user": {"reputation": 3135, "user_id": 7441757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02d139faa2ede7b2b6109852cd418f67?s=128&d=identicon&r=PG&f=1", "display_name": "Roelant", "link": "https://stackoverflow.com/users/7441757/roelant"}, "edited": false, "score": 0, "creation_date": 1490107821, "post_id": 42821622, "comment_id": 72958384, "body": "Updated! Thanks for the heads up"}, {"owner": {"reputation": 3277, "user_id": 3427404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c06cd15efe014a0e304ae60b4ef0da21?s=128&d=identicon&r=PG&f=1", "display_name": "yhenon", "link": "https://stackoverflow.com/users/3427404/yhenon"}, "edited": false, "score": 1, "creation_date": 1490112314, "post_id": 42821622, "comment_id": 72962064, "body": "Your connectivity matrix is not valid. All points must be connected together, since the agglomerative clustering clusters all points in a hierarchy. (You can think of this as all points having to form a graph that cannot be disjoint. Edges between nodes can be turned off). This is why you get the warning. There is no good way to do what you&#39;re trying to do with the agglomerative clustering."}, {"owner": {"reputation": 1259, "user_id": 1753315, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/VMPuJ.jpg?s=128&g=1", "display_name": "Michael Davidson", "link": "https://stackoverflow.com/users/1753315/michael-davidson"}, "reply_to_user": {"reputation": 3277, "user_id": 3427404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c06cd15efe014a0e304ae60b4ef0da21?s=128&d=identicon&r=PG&f=1", "display_name": "yhenon", "link": "https://stackoverflow.com/users/3427404/yhenon"}, "edited": false, "score": 0, "creation_date": 1490118051, "post_id": 42821622, "comment_id": 72965931, "body": "Thanks, @y300 . If you want to blow that comment up into a full response, I&#39;ll award you the bounty. This is what I was looking for."}], "answers": [{"tags": [], "owner": {"reputation": 3277, "user_id": 3427404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c06cd15efe014a0e304ae60b4ef0da21?s=128&d=identicon&r=PG&f=1", "display_name": "yhenon", "link": "https://stackoverflow.com/users/3427404/yhenon"}, "is_accepted": true, "score": 10, "last_activity_date": 1490127794, "creation_date": 1490127794, "answer_id": 42937450, "question_id": 42821622, "link": "https://stackoverflow.com/questions/42821622/scikit-learn-agglomerative-clustering-connectivity-matrix/42937450#42937450", "title": "Scikit-learn Agglomerative Clustering Connectivity Matrix", "body": "<p>When passing a connectivity matrix to <code>sklearn.cluster.AgglomerativeClustering</code>, it is imperative that all points in the matrix be connected. Agglomerative clustering creates a hierarchy, in which all points are iteratively grouped together, so isolated clusters cannot exist. The connectivity matrix is useful to \"turn off\" connections for points that may be nearby in Euclidean space, but far away from another metric (see the jelly roll example show in the User Guide <a href=\"http://scikit-learn.org/stable/auto_examples/cluster/plot_agglomerative_clustering.html#sphx-glr-auto-examples-cluster-plot-agglomerative-clustering-py\" rel=\"noreferrer\">here</a>).</p>\n\n<p>Another way to think of this is that your points must form a graph that is not disjoint, all you can do is turn off edges between nodes.</p>\n\n<p>This warning:</p>\n\n<blockquote>\n  <p>UserWarning: the number of connected components of the connectivity matrix is 7 > 1. Completing it to avoid stopping the tree early. connectivity, n_components = _fix_connectivity(X, connectivity)</p>\n</blockquote>\n\n<p>is telling you that you have 7 disjoint clusters, which is more than the 1 which is allowed. As such sklearn \"completes\" it (essentially fills it in to not have disjoint clusters), which is why your constraints are not respected at all.</p>\n\n<p>There is no easy fix here. You can try reassigning centers after clustering to respect your constraints, or you'll need to employ a different algorithm.</p>\n"}], "owner": {"reputation": 1259, "user_id": 1753315, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/VMPuJ.jpg?s=128&g=1", "display_name": "Michael Davidson", "link": "https://stackoverflow.com/users/1753315/michael-davidson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4292, "favorite_count": 0, "accepted_answer_id": 42937450, "answer_count": 1, "score": 10, "last_activity_date": 1490127794, "creation_date": 1489615774, "last_edit_date": 1490107849, "question_id": 42821622, "link": "https://stackoverflow.com/questions/42821622/scikit-learn-agglomerative-clustering-connectivity-matrix", "title": "Scikit-learn Agglomerative Clustering Connectivity Matrix", "body": "<p>I am attempting to perform constrained clustering using sklearn's agglomerative clustering command. To make the algorithm constrained, it requests a \"connectivity matrix\". This is described as:</p>\n\n<blockquote>\n  <p>The connectivity constraints are imposed via an connectivity matrix: a scipy sparse matrix that has elements only at the intersection of a row and a column with indices of the dataset that should be connected. This matrix can be constructed from a-priori information: for instance, you may wish to cluster web pages by only merging pages with a link pointing from one to another.</p>\n</blockquote>\n\n<p>I have a list of observation pairs that I wish the algorithm will force to remain in the same cluster. I can convert this into a sparse <code>scipy</code> matrix (either <code>coo</code> or <code>csr</code>), but the resulting clusters fail to force the constraints. </p>\n\n<p>Some Data:</p>\n\n<pre><code>import numpy as np\nimport scipy as sp\nimport pandas as pd\nimport scipy.sparse as ss\nfrom sklearn.cluster import AgglomerativeClustering\n\n\n# unique ids \nids = np.arange(10)\n\n# Pairs that should belong to the same cluster\nmustLink = pd.DataFrame([[1, 2], [1, 3], [4, 6]], columns=['A', 'B'])\n\n# Features for training the model\ndata = pd.DataFrame([\n[.0873,-1.619,-1.343],\n[0.697456, 0.410943, 0.804333],\n[-1.295829, -0.709441, -0.376771],\n[-0.404985, -0.107366, 0.875791],\n[-0.404985, -0.107366,  0.875791],\n[-0.515996, 0.731980, -1.569586],\n[1.024580,  0.409148, 0.149408],\n[-0.074604, 1.269414, 0.115744],\n[-0.006706, 2.097276, 0.681819],\n[-0.432196, 1.249149,-1.159271]])\n</code></pre>\n\n<p>Convert the pairs to a \"connectivity matrix\":</p>\n\n<pre><code># Blank coo matrix to csr\nsm = ss.coo_matrix((len(ids), len(ids)), np.int32).tocsr()\n# Insert 1 for connected pairs and diagonals\nfor i in np.arange(len(mustLink)): # add links to both sides of the matrix\n    sm[mustLink.loc[i, 'A'], mustLink.loc[i, 'B']] = 1\n    sm[mustLink.loc[i, 'B'], mustLink.loc[i, 'A']] = 1\nfor i in np.arange(sm.tocsr()[1].shape[1]): # add diagonals\n    sm[i,i] = 1\nsm = sm.tocoo() # convert back to coo format\n</code></pre>\n\n<p>Train and fit the agglomerative clustering model:</p>\n\n<pre><code>m = AgglomerativeClustering(n_clusters=6, connectivity=sm)\nout = m.fit_predict(X=data)\n</code></pre>\n\n<p>Warning I receive:</p>\n\n<blockquote>\n  <p>UserWarning: the number of connected components of the connectivity matrix is 7 > 1. Completing it to avoid stopping the tree early.\n    connectivity, n_components = _fix_connectivity(X, connectivity)</p>\n</blockquote>\n\n<p>In addition to the ominous warning, the pairs that I hoped would belong to the same cluster, do not. </p>\n\n<p>Is this because the sklearn algorithms are not designed to handle mustlink constraints and instead can only use a <code>distance</code> matrix (distinction drawn <a href=\"https://www.microsoft.com/en-us/research/wp-content/uploads/2016/02/04-semi-icml.pdf\" rel=\"noreferrer\">here</a>)? </p>\n"}, {"tags": ["python", "csv", "web-scraping", "beautifulsoup", "urllib2"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1489615756, "post_id": 42821555, "comment_id": 72754937, "body": "What error are you getting?"}, {"owner": {"reputation": 171, "user_id": 5971855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UAKeO.jpg?s=128&g=1", "display_name": "ryugie", "link": "https://stackoverflow.com/users/5971855/ryugie"}, "edited": false, "score": 1, "creation_date": 1489615911, "post_id": 42821555, "comment_id": 72755013, "body": "you never define <code>write_to_file</code> or set anything to it"}], "answers": [{"tags": [], "owner": {"reputation": 858, "user_id": 1619435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f0ce56ecc57430198dc9f048c9cee3a0?s=128&d=identicon&r=PG", "display_name": "Fernando Cezar", "link": "https://stackoverflow.com/users/1619435/fernando-cezar"}, "is_accepted": false, "score": 0, "last_activity_date": 1489616394, "creation_date": 1489616394, "answer_id": 42821781, "question_id": 42821555, "link": "https://stackoverflow.com/questions/42821555/python-extract-table-from-url-to-csv/42821781#42821781", "title": "Python Extract Table from URL to csv", "body": "<p>According to the <a href=\"https://www.crummy.com/software/BeautifulSoup/bs4/doc/\" rel=\"nofollow noreferrer\">Beautifulsoup docs</a>, you need to pass a string to be parsed on initialization. However, <code>page = urllib2.urlopen(req)</code> returns a pointer to a page.</p>\n\n<p>Try using <code>soup = BeautifulSoup(page.read(), 'html.parser')</code> instead.</p>\n\n<p>Also, the variable <code>write_to_file</code> doesn't exist.</p>\n\n<p>If this doesn't solve it, please also post which error you get.</p>\n"}, {"tags": [], "owner": {"reputation": 193, "user_id": 7713015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fb61aac15cbc46a8787c1a06fd24eb8?s=128&d=identicon&r=PG&f=1", "display_name": "\u9ec4\u54e5Python\u57f9\u8bad", "link": "https://stackoverflow.com/users/7713015/%e9%bb%84%e5%93%a5python%e5%9f%b9%e8%ae%ad"}, "is_accepted": false, "score": 1, "last_activity_date": 1489616605, "creation_date": 1489616605, "answer_id": 42821833, "question_id": 42821555, "link": "https://stackoverflow.com/questions/42821555/python-extract-table-from-url-to-csv/42821833#42821833", "title": "Python Extract Table from URL to csv", "body": "<p>you code is wrong</p>\n\n<p>this '<a href=\"http://www.americashealthrankings.org/api/v1/downloads/131\" rel=\"nofollow noreferrer\">http://www.americashealthrankings.org/api/v1/downloads/131</a>'  download\ncsv file.</p>\n\n<p>download  csv file to local computer, you can use this file.</p>\n\n<pre><code>#!/usr/bin/env python\n# coding:utf-8\n'''\u9ec4\u54e5Python'''\n\nimport urllib2\n\nurl = 'http://www.americashealthrankings.org/api/v1/downloads/131'\n\nhtml = urllib2.urlopen(url).read()\n\nwith open('output.csv', 'w') as output:\n    output.write(html)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4636, "user_id": 5617035, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153607675560751/picture?type=large", "display_name": "Aurielle Perlmann", "link": "https://stackoverflow.com/users/5617035/aurielle-perlmann"}, "is_accepted": false, "score": 0, "last_activity_date": 1489718809, "creation_date": 1489718809, "answer_id": 42848337, "question_id": 42821555, "link": "https://stackoverflow.com/questions/42821555/python-extract-table-from-url-to-csv/42848337#42848337", "title": "Python Extract Table from URL to csv", "body": "<p>The reason its not working is because your pointing to a file that is already a csv - you can literally load that URL in your browser and it will download in CSV file format ---- the table your expecting though, is not at that endpoint - it is at this URL: </p>\n\n<p><a href=\"http://www.americashealthrankings.org/explore/2016-annual-report\" rel=\"nofollow noreferrer\">http://www.americashealthrankings.org/explore/2016-annual-report</a></p>\n\n<p>Also - I dont see a class called <code>STATE-RANK-VALUE</code> I only see <code>th</code> headers called <code>state</code>,<code>rank</code>, and <code>,value</code></p>\n"}], "owner": {"reputation": 23, "user_id": 7717771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1643a5695417a5914346ebc3c82bc1f7?s=128&d=identicon&r=PG&f=1", "display_name": "user7717771", "link": "https://stackoverflow.com/users/7717771/user7717771"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 764, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1489718809, "creation_date": 1489615499, "question_id": 42821555, "link": "https://stackoverflow.com/questions/42821555/python-extract-table-from-url-to-csv", "title": "Python Extract Table from URL to csv", "body": "<p>Extracting the \"2016-Annual\" table in <a href=\"http://www.americashealthrankings.org/api/v1/downloads/131\" rel=\"nofollow noreferrer\">http://www.americashealthrankings.org/api/v1/downloads/131</a> to a csv. The table has 3 fields- STATE, RANK, VALUE. Getting error with the following:</p>\n\n<pre><code>import urllib2 \nfrom bs4 import BeautifulSoup\nimport csv\n\nurl = 'http://www.americashealthrankings.org/api/v1/downloads/131'\nheader = {'User-Agent': 'Mozilla/5.0'} \nreq = urllib2.Request(url,headers=header)\npage = urllib2.urlopen(req)\nsoup = BeautifulSoup(page)\n\ntable = soup.find('2016-Annual', {'class': 'STATE-RANK-VALUE'})\n\nf = open('output.csv', 'w')\n\nfor row in table.findAll('tr'):\n    cells = row.findAll('td')\n\n    if len(cells) == 3:\n        STATE = cells[0].find(text=True)\n        RANK = cells[1].find(text=True)\n        VALUE = cells[2].find(text=True)\n\n    print  write_to_file\n    f.write(write_to_file)\n\nf.close()\n</code></pre>\n\n<p>What am I missing here? Using python 2.7</p>\n"}, {"tags": ["python", "dictionary", "bioinformatics", "biopython", "vcf-variant-call-format"], "answers": [{"tags": [], "owner": {"reputation": 14929, "user_id": 2051137, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1sIMq.jpg?s=128&g=1", "display_name": "Remi.b", "link": "https://stackoverflow.com/users/2051137/remi-b"}, "is_accepted": true, "score": 0, "last_activity_date": 1489617301, "last_edit_date": 1489617301, "creation_date": 1489616725, "answer_id": 42821861, "question_id": 42821514, "link": "https://stackoverflow.com/questions/42821514/indicating-a-population-structure-in-egglib-python/42821861#42821861", "title": "Indicating a population structure in EggLib Python", "body": "<p>There are two errors</p>\n\n<p><strong>First error</strong></p>\n\n<p>The function <code>make_structure</code> returns the Structure object but does not save it within <code>stats</code>. You therefore have to save this output and use it in the function <code>process_site</code>.</p>\n\n<pre><code>Structure = egglib.stats.make_structure(struct, None) \n</code></pre>\n\n<p><strong>Second error</strong></p>\n\n<p>The Structure object must designate haploids. Therefore, create the dictionary as</p>\n\n<pre><code>dcluster = {}            \nfor popIndex in [0,1]:  \n    dpop = {}            \n    for IndIndex in range(popIndex * 100,(popIndex + 1) * 100):     \n        dpop[IndIndex] = [IndIndex]\n    dcluster[popIndex] = dpop\n\nstruct = {0: dcluster}\n</code></pre>\n"}], "owner": {"reputation": 14929, "user_id": 2051137, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1sIMq.jpg?s=128&g=1", "display_name": "Remi.b", "link": "https://stackoverflow.com/users/2051137/remi-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 42821861, "answer_count": 1, "score": 1, "last_activity_date": 1601909299, "creation_date": 1489615332, "last_edit_date": 1601909299, "question_id": 42821514, "link": "https://stackoverflow.com/questions/42821514/indicating-a-population-structure-in-egglib-python", "title": "Indicating a population structure in EggLib Python", "body": "<p>In Python, I am using <a href=\"http://mycor.nancy.inra.fr/egglib/\" rel=\"nofollow noreferrer\">EggLib</a>. I am trying to calculate Jost's D value per SNP found in a VCF file.</p>\n<p><strong>Data</strong></p>\n<p>Data is <a href=\"http://www.zoology.ubc.ca/%7Ematthey/storage/\" rel=\"nofollow noreferrer\">here</a> in VCF format. The data set is small, there are 2 populations, 100 individuals per population and 6 SNPs (all on chromosome 1).</p>\n<p>Each individual is named <code>Pp.Ii</code>, where <code>p</code> is the population index it belongs to and <code>i</code> is the individual index.</p>\n<p><strong>Code</strong></p>\n<p>My difficulties concern the specification of the population structure. Here is my trial</p>\n<pre><code>### Read the vcf file ###\nvcf = egglib.io.VcfParser(&quot;MyData.vcf&quot;) \n\n### Create the `Structure` object ###\n# Dictionary for a given cluster. There is only one cluster.\ndcluster = {}            \n# Loop through each population \nfor popIndex in [0,1]:  \n    # dictionnary for a given population. There are two populations\n    dpop = {}            \n    # Loop through each individual\n    for IndIndex in range(popIndex * 100,(popIndex + 1) * 100):     \n            # A single list to define an individual\n        dpop[IndIndex] = [IndIndex*2, IndIndex*2 + 1]\n    dcluster[popIndex] = dpop\n\nstruct = {0: dcluster}\n\n### Define the population structure ###\nStructure = egglib.stats.make_structure(struct, None) \n\n### Configurate the 'ComputeStats' object ###\ncs = egglib.stats.ComputeStats()\ncs.configure(only_diallelic=False)\ncs.add_stats('Dj') # Jost's D\n\n### Isolate a SNP ###\nvcf.next()\nsite = egglib.stats.site_from_vcf(vcf)\n\n### Calculate Jost's D ###\ncs.process_site(site, struct=Structure)\n\nTraceback (most recent call last):\n  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;\n  File &quot;/Library/Python/2.7/site-packages/egglib/stats/_cstats.py&quot;, line 431, in process_site\n    self._frq.process_site(site, struct=struct)\n  File &quot;/Library/Python/2.7/site-packages/egglib/stats/_freq.py&quot;, line 159, in process_site\n    if sum(struct) != site._obj.get_ning(): raise ValueError, 'invalid structure (sample size is required to match)'\nValueError: invalid structure (sample size is required to match)\n</code></pre>\n<p>The documentation indicates <a href=\"http://mycor.nancy.inra.fr/egglib/manual/stats-2.html\" rel=\"nofollow noreferrer\">here</a></p>\n<blockquote>\n<p>[The Structure object] is a tuple containing two items, each being a dict. The first one represents the ingroup and the second represents the outgroup.</p>\n<p>The ingroup dictionary is itself a dictionary holding more dictionaries, one for each cluster of populations. Each cluster dictionary is a dictionary of populations, populations being themselves represented by a dictionary. A population dictionary is, again, a dictionary of individuals. Fortunately, individuals are represented by lists.</p>\n<p>An individual list contains the index of all samples belonging to this individual. For haploid data, individuals will be one-item lists. In other cases, all individual lists are required to have the same number of items (consistent ploidy). Note that, if the ploidy is more than one, nothing enforces that samples of a given individual are grouped within the original data.</p>\n<p>The keys of the ingroup dictionary are the labels identifying each cluster. Within a cluster dictionary, the keys are population labels. Finally, within a population dictionary, the keys are individual labels.</p>\n<p>The second dictionary represents the outgroup. Its structure is simpler: it has individual labels as keys, and lists of corresponding sample indexes as values. The outgroup dictionary is similar to any ingroup population dictionary. The ploidy is required to match over all ingroup and outgroup individuals.</p>\n</blockquote>\n<p>but I fail to make sense of it. The example provided is for fasta format and I don't understand to extend the logic to VCF format.</p>\n"}, {"tags": ["python", "jenkins", "jenkins-plugins"], "comments": [{"owner": {"reputation": 105809, "user_id": 234938, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e509dcb9852f237fe0412caccc335ac9?s=128&d=identicon&r=PG", "display_name": "Christopher Orr", "link": "https://stackoverflow.com/users/234938/christopher-orr"}, "edited": false, "score": 0, "creation_date": 1489751782, "post_id": 42821497, "comment_id": 72819782, "body": "You&#39;re using Windows-style variable references, and <code>cmd</code>, yet you appear to be running on Linux. Make sure your build is running on the right kind of machine. The &quot;Execute shell&quot; step will only run on non-Windows systems,  and &quot;Run Windows Batch file&quot; only on Windows. Otherwise, your builds will fail."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1534597883, "post_id": 42821497, "comment_id": 90768164, "body": "do not add SOLVED to the title of your question, if any of the answers is the solution then mark it as the correct one, if instead you have found the solution then create an answer and mark it as correct."}, {"owner": {"reputation": 197, "user_id": 7519421, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6e6be1384aeacb8f83b992b651ab4880?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7519421/alex"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1534597942, "post_id": 42821497, "comment_id": 90768180, "body": "@eyllanesc Done ,marked as correct one"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1534598018, "post_id": 42821497, "comment_id": 90768202, "body": "@jamesorc no, you have not done it, one thing is the upvote and another is to mark it as correct, check the <a href=\"https://stackoverflow.com/tour\">tour</a> for more information."}, {"owner": {"reputation": 197, "user_id": 7519421, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6e6be1384aeacb8f83b992b651ab4880?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7519421/alex"}, "edited": false, "score": 0, "creation_date": 1534598104, "post_id": 42821497, "comment_id": 90768221, "body": "upvoted &amp; marked as correct"}], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 7519421, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6e6be1384aeacb8f83b992b651ab4880?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7519421/alex"}, "edited": false, "score": 0, "creation_date": 1489669067, "post_id": 42824289, "comment_id": 72778739, "body": "what needs to done in order to fix this? I have tried using &quot;run a shell command&quot; too adding in build step  #!usr/bin/sh python &lt;path to file&gt;  this too doesn&#39;t works"}, {"owner": {"reputation": 105809, "user_id": 234938, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e509dcb9852f237fe0412caccc335ac9?s=128&d=identicon&r=PG", "display_name": "Christopher Orr", "link": "https://stackoverflow.com/users/234938/christopher-orr"}, "reply_to_user": {"reputation": 197, "user_id": 7519421, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6e6be1384aeacb8f83b992b651ab4880?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7519421/alex"}, "edited": false, "score": 1, "creation_date": 1489751665, "post_id": 42824289, "comment_id": 72819704, "body": "If you&#39;re running on Linux, remove the &quot;Run Windows Batch file&quot; step. If you&#39;re seeing a different error now, you should update your question with it."}], "tags": [], "owner": {"reputation": 105809, "user_id": 234938, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e509dcb9852f237fe0412caccc335ac9?s=128&d=identicon&r=PG", "display_name": "Christopher Orr", "link": "https://stackoverflow.com/users/234938/christopher-orr"}, "is_accepted": true, "score": 1, "last_activity_date": 1489631625, "creation_date": 1489631625, "answer_id": 42824289, "question_id": 42821497, "link": "https://stackoverflow.com/questions/42821497/running-python-scripts-as-job-rhel-6/42824289#42824289", "title": "Running Python scripts as job (RHEL 6)", "body": "<p>You appear to be running the build on Linux, but seem to have included a \"Run Windows Batch file\" step in your build, as shown by the attempt to run <code>cmd /c call &lt;temporary-file&gt;.bat</code>.</p>\n\n<p>As the Windows command prompt doesn't exist on Linux, you get the error:</p>\n\n<blockquote>\n  <p>Cannot run program \"cmd\"</p>\n</blockquote>\n"}], "owner": {"reputation": 197, "user_id": 7519421, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6e6be1384aeacb8f83b992b651ab4880?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7519421/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 42824289, "answer_count": 1, "score": 0, "last_activity_date": 1534597726, "creation_date": 1489615276, "last_edit_date": 1534597726, "question_id": 42821497, "link": "https://stackoverflow.com/questions/42821497/running-python-scripts-as-job-rhel-6", "title": "Running Python scripts as job (RHEL 6)", "body": "<p>I have setup a jenkins(1.6) job which will build periodically.\nThe job is a python script that needs to be executed.</p>\n\n<p>The Global Path of the setup is <code>/sbin:/bin:/usr/sbin:/usr/bin</code> ,\nthe build is using:</p>\n\n<pre><code>EXPORT PATH=%PATH:%PYTHON_PATH%\npython home/scripttest/test.py\n</code></pre>\n\n<p>After this the following errors in the console output appear:</p>\n\n<blockquote>\n  <p>[pytest] $ python /tmp/hudson9090694322529044967.py\n  [pytest] $ cmd /c call /tmp/hudson868114309999030575.bat\n  FATAL: command execution failed\n  java.io.IOException: Cannot run program \"cmd\" (in directory \"/home/marc/workspace/pytest\"): error=2, No such file or directory</p>\n</blockquote>\n\n<p>**Note I don't want to use a subversion.</p>\n"}, {"tags": ["python", "pygame"], "comments": [{"owner": {"reputation": 778, "user_id": 5687769, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OGS_dHjyp7s/AAAAAAAAAAI/AAAAAAAAACI/tHJG2NuXit4/photo.jpg?sz=128", "display_name": "Ankur  Jyoti Phukan", "link": "https://stackoverflow.com/users/5687769/ankur-jyoti-phukan"}, "edited": false, "score": 1, "creation_date": 1489615274, "post_id": 42821442, "comment_id": 72754704, "body": "place the image over a rectangle of equal size with required color .."}, {"owner": {"reputation": 71, "user_id": 4552325, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/85b18664b273633577542abb09c89e2f?s=128&d=identicon&r=PG&f=1", "display_name": "John_F", "link": "https://stackoverflow.com/users/4552325/john-f"}, "reply_to_user": {"reputation": 778, "user_id": 5687769, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OGS_dHjyp7s/AAAAAAAAAAI/AAAAAAAAACI/tHJG2NuXit4/photo.jpg?sz=128", "display_name": "Ankur  Jyoti Phukan", "link": "https://stackoverflow.com/users/5687769/ankur-jyoti-phukan"}, "edited": false, "score": 0, "creation_date": 1489616560, "post_id": 42821442, "comment_id": 72755285, "body": "I tried that but either the transparency doesn&#39;t work or it goes through to the black background beneath the coloured rectangular image."}, {"owner": {"reputation": 2946, "user_id": 2038801, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WVnDF.jpg?s=128&g=1", "display_name": "The4thIceman", "link": "https://stackoverflow.com/users/2038801/the4thiceman"}, "edited": false, "score": 1, "creation_date": 1489618820, "post_id": 42821442, "comment_id": 72756227, "body": "do you need to be able to change the color in the code? If not you could create the other image with any image software and alternate between them in the code based on some condition"}, {"owner": {"reputation": 71, "user_id": 4552325, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/85b18664b273633577542abb09c89e2f?s=128&d=identicon&r=PG&f=1", "display_name": "John_F", "link": "https://stackoverflow.com/users/4552325/john-f"}, "edited": false, "score": 1, "creation_date": 1489620537, "post_id": 42821442, "comment_id": 72756835, "body": "I stripped it back and rebuilt it as per Ankur&#39;s reversal suggestion and it worked. I still don&#39;t know why it worked 2nd time round but not the first? As far as I can tell, both codes were the same?"}, {"owner": {"reputation": 2946, "user_id": 2038801, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WVnDF.jpg?s=128&g=1", "display_name": "The4thIceman", "link": "https://stackoverflow.com/users/2038801/the4thiceman"}, "edited": false, "score": 1, "creation_date": 1489621436, "post_id": 42821442, "comment_id": 72757146, "body": "strange indeed, you code post before and after. I am curious now"}, {"owner": {"reputation": 18103, "user_id": 6220679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK4H1.png?s=128&g=1", "display_name": "skrx", "link": "https://stackoverflow.com/users/6220679/skrx"}, "edited": false, "score": 0, "creation_date": 1489757419, "post_id": 42821442, "comment_id": 72823744, "body": "You should really post your code in order to help others with the same problem."}], "answers": [{"comments": [{"owner": {"reputation": 18103, "user_id": 6220679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK4H1.png?s=128&g=1", "display_name": "skrx", "link": "https://stackoverflow.com/users/6220679/skrx"}, "edited": false, "score": 0, "creation_date": 1489804014, "post_id": 42859550, "comment_id": 72845505, "body": "I&#39;ve added a translucent image to my answer, so that you can better see the effect. Only the color is changed, but the transparency stays the same."}, {"owner": {"reputation": 71, "user_id": 4552325, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/85b18664b273633577542abb09c89e2f?s=128&d=identicon&r=PG&f=1", "display_name": "John_F", "link": "https://stackoverflow.com/users/4552325/john-f"}, "edited": false, "score": 1, "creation_date": 1489922116, "post_id": 42859550, "comment_id": 72873795, "body": "Thanks skrx, this will be more useful for complex or themed images."}, {"owner": {"reputation": 71, "user_id": 4552325, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/85b18664b273633577542abb09c89e2f?s=128&d=identicon&r=PG&f=1", "display_name": "John_F", "link": "https://stackoverflow.com/users/4552325/john-f"}, "edited": false, "score": 1, "creation_date": 1490382243, "post_id": 42859550, "comment_id": 73104083, "body": "It wasn&#39;t long before I needed skrx&#39;s method. It&#39;s much more flexible. Thanks again. :-)"}], "tags": [], "owner": {"reputation": 18103, "user_id": 6220679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK4H1.png?s=128&g=1", "display_name": "skrx", "link": "https://stackoverflow.com/users/6220679/skrx"}, "is_accepted": true, "score": 3, "last_activity_date": 1489803520, "last_edit_date": 1489803520, "creation_date": 1489759285, "answer_id": 42859550, "question_id": 42821442, "link": "https://stackoverflow.com/questions/42821442/how-do-i-change-the-colour-of-an-image-in-pygame-without-changing-its-transparen/42859550#42859550", "title": "How do I change the colour of an image in Pygame without changing its transparency?", "body": "<p>I've got an example that works with per pixel alpha surfaces that can also be translucent. The <code>fill</code> function just loops over the surface's pixels and sets them to the new color, but keeps their alpha value. It's probably not recommendable to do this every frame with many surfaces. (Press f, g, h to change the color.)</p>\n\n<pre><code>import sys\nimport pygame as pg\n\n\ndef fill(surface, color):\n    \"\"\"Fill all pixels of the surface with color, preserve transparency.\"\"\"\n    w, h = surface.get_size()\n    r, g, b, _ = color\n    for x in range(w):\n        for y in range(h):\n            a = surface.get_at((x, y))[3]\n            surface.set_at((x, y), pg.Color(r, g, b, a))\n\n\ndef main():\n    screen = pg.display.set_mode((640, 480))\n    clock = pg.time.Clock()\n\n    # Uncomment this for a non-translucent surface.\n    # surface = pg.Surface((100, 150), pg.SRCALPHA)\n    # pg.draw.circle(surface, pg.Color(40, 240, 120), (50, 50), 50)\n    surface = pg.image.load('bullet2.png').convert_alpha()\n    surface = pg.transform.rotozoom(surface, 0, 2)\n\n    done = False\n\n    while not done:\n        for event in pg.event.get():\n            if event.type == pg.QUIT:\n                done = True\n            if event.type == pg.KEYDOWN:\n                if event.key == pg.K_f:\n                    fill(surface, pg.Color(240, 200, 40))\n                if event.key == pg.K_g:\n                    fill(surface, pg.Color(250, 10, 40))\n                if event.key == pg.K_h:\n                    fill(surface, pg.Color(40, 240, 120))\n\n        screen.fill(pg.Color('lightskyblue4'))\n        pg.draw.rect(screen, pg.Color(40, 50, 50), (210, 210, 50, 90))\n        screen.blit(surface, (200, 200))\n\n        pg.display.flip()\n        clock.tick(30)\n\n\nif __name__ == '__main__':\n    pg.init()\n    main()\n    pg.quit()\n    sys.exit()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/aWBts.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aWBts.png\" alt=\"bullet2.png\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 18103, "user_id": 6220679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK4H1.png?s=128&g=1", "display_name": "skrx", "link": "https://stackoverflow.com/users/6220679/skrx"}, "edited": false, "score": 0, "creation_date": 1489803990, "post_id": 42864410, "comment_id": 72845502, "body": "Ah okay, that just changes the color of the subjacent rect (or line in this case) and then blits the image with transparency above. It&#39;s good that this works for you, but this actually doesn&#39;t answer the question."}], "tags": [], "owner": {"reputation": 71, "user_id": 4552325, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/85b18664b273633577542abb09c89e2f?s=128&d=identicon&r=PG&f=1", "display_name": "John_F", "link": "https://stackoverflow.com/users/4552325/john-f"}, "is_accepted": false, "score": 1, "last_activity_date": 1489774383, "last_edit_date": 1489774383, "creation_date": 1489774064, "answer_id": 42864410, "question_id": 42821442, "link": "https://stackoverflow.com/questions/42821442/how-do-i-change-the-colour-of-an-image-in-pygame-without-changing-its-transparen/42864410#42864410", "title": "How do I change the colour of an image in Pygame without changing its transparency?", "body": "<p>In this version, the visible and transparent parts are the other way round to the original question as per Ankur's suggestion.\nHere is the essential working code:</p>\n\n<pre><code>import pygame, sys\nfrom pygame.locals import *\npygame.init()\n\ndef load_image(name):\n    image = pygame.image.load(name).convert()\n    return image\n\ndef resize(obj, w, h):\n    global scale\n    return pygame.transform.scale(obj, (int(w * scale), int(h * scale)))\n\n\npink = (255, 0, 160)\nred = (255, 0, 0)\npeach = (255, 118, 95)\nblue = (0, 0, 255)\nblue_1 = (38, 0, 160)\ndark_yellow = (255, 174, 0)\ngreen = (38, 137, 0)\norange = (255, 81, 0)\ncolour = [pink, red, peach, blue, blue_1, dark_yellow, green, orange, green]\nclock = pygame.time.Clock()\nscale = 4\nscreen = pygame.display.set_mode((292 * scale, 240 * scale),0, 32)\nbanner = load_image(\"banner.png\") #292x35\nzero = load_image(\"zero.png\") #5x7\nc = 0\nwhile True:\n    for event in pygame.event.get():\n        if event.type == QUIT:\n            pygame.quit()\n            sys.exit()\n    rgb = colour[c]\n    c = c + 1\n    if c &gt; 7:\n        c = 0\n    pygame.draw.line(banner, rgb, (53, 21), (53, 27), 5) #line the same size as zero image\n    banner.blit(zero, (51, 21)) #blit image with transparency over line\n    large_banner = resize(banner, 292, 35)\n    screen.blit(large_banner, (0, 0))\n    clock.tick(120)\n    pygame.display.flip()\n\npygame.quit()\nsys.exit()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11613152, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1jN-UVSsFVw/AAAAAAAAAAI/AAAAAAAAACE/Q-6ljXWm_BA/photo.jpg?sz=128", "display_name": "Supot Swangpiriyakij", "link": "https://stackoverflow.com/users/11613152/supot-swangpiriyakij"}, "is_accepted": false, "score": 0, "last_activity_date": 1562171336, "creation_date": 1562171336, "answer_id": 56874528, "question_id": 42821442, "link": "https://stackoverflow.com/questions/42821442/how-do-i-change-the-colour-of-an-image-in-pygame-without-changing-its-transparen/56874528#56874528", "title": "How do I change the colour of an image in Pygame without changing its transparency?", "body": "<p>This code for drop all color brightness</p>\n\n<pre><code>    def drop(surface):\n        w, h = surface.get_size()\n        for x in range(w):\n            for y in range(h):\n                r = surface.get_at((x, y))[0]\n                if r&gt;150:\n                   r-=50\n                g = surface.get_at((x, y))[1]\n                if g&gt;150:\n                   g-=50\n                b = surface.get_at((x, y))[2]\n                if b&gt;150:\n                   b-=50\n                a = surface.get_at((x, y))[3]\n                surface.set_at((x, y), pygame.Color(r, g, b, a)) \n\n    img = pygame.image.load(\"image.png\").convert_alpha()\n    drop(img)\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 4552325, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/85b18664b273633577542abb09c89e2f?s=128&d=identicon&r=PG&f=1", "display_name": "John_F", "link": "https://stackoverflow.com/users/4552325/john-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7238, "favorite_count": 0, "accepted_answer_id": 42859550, "answer_count": 3, "score": 3, "last_activity_date": 1562171336, "creation_date": 1489614978, "question_id": 42821442, "link": "https://stackoverflow.com/questions/42821442/how-do-i-change-the-colour-of-an-image-in-pygame-without-changing-its-transparen", "title": "How do I change the colour of an image in Pygame without changing its transparency?", "body": "<p>It sounds like a simple thing to do , but I'm struggling.\nI have a png image of a rectangle with a transparent centre called \"zero\". I want to change the colour of the visible part of the image. To try and change it, I have tried using \"zero.fill\" but no option I try changes only the non-transparent part, or it merges the new colour with the old and stays like that.\nI'm not keen on installing numpy as I wish to take the finished program to a friend who doesn't have it. Any simple suggestions welcome.</p>\n"}, {"tags": ["python", "string", "repr"], "comments": [{"owner": {"reputation": 216457, "user_id": 846892, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/E9dZn.png?s=128&g=1", "display_name": "Ashwini Chaudhary", "link": "https://stackoverflow.com/users/846892/ashwini-chaudhary"}, "edited": false, "score": 1, "creation_date": 1489614963, "post_id": 42821400, "comment_id": 72754556, "body": "By renaming <code>__repr_</code> to <code>__repr__</code>"}], "answers": [{"comments": [{"owner": {"reputation": 46515, "user_id": 5647260, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oByMV.jpg?s=128&g=1", "display_name": "Andrew Li", "link": "https://stackoverflow.com/users/5647260/andrew-li"}, "edited": false, "score": 3, "creation_date": 1489614962, "post_id": 42821427, "comment_id": 72754555, "body": "Please comment and vote to close as a typographical error instead of answering."}], "tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": true, "score": -2, "last_activity_date": 1489614921, "creation_date": 1489614921, "answer_id": 42821427, "question_id": 42821400, "link": "https://stackoverflow.com/questions/42821400/python-how-to-use-the-str-code-for-the-repr/42821427#42821427", "title": "Python how to use the __str__ code for the __repr__?", "body": "<p>You are missing an underscore.</p>\n\n<p>Fix this line:</p>\n\n<pre><code>def __repr_(self):    # BROKEN\ndef __repr__(self):   # FIXED\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6444835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83a2ba6c94f8c9450b6451535d3913cf?s=128&d=identicon&r=PG&f=1", "display_name": "Lorenzo Atzeni", "link": "https://stackoverflow.com/users/6444835/lorenzo-atzeni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "closed_date": 1489615057, "accepted_answer_id": 42821427, "answer_count": 1, "score": -2, "last_activity_date": 1489614921, "creation_date": 1489614825, "question_id": 42821400, "link": "https://stackoverflow.com/questions/42821400/python-how-to-use-the-str-code-for-the-repr", "closed_reason": "Not suitable for this site", "title": "Python how to use the __str__ code for the __repr__?", "body": "<p>I've stated programming in Phyton just few days ago, so I'm sorry if the question is quite easy.</p>\n\n<p>I've written this code:</p>\n\n<pre><code>&gt;&gt;&gt; class Polynomial:\n        def __init__(self, coeff):\n            self.coeff=coeff\n        def __repr_(self):\n            return str(self)\n        def __str__(self):\n            s=''\n            flag=0;\n            for i in reversed(range(len(self.coeff))):\n                if(i==0):\n                    s+= '+ %g ' % (self.coeff[i])\n                elif (flag==0):\n                    flag=1\n                    s+= '%g z**%d' % (self.coeff[i],i)\n                else:\n                    s+= '+ %g z**%d ' % (self.coeff[i],i)\n            return s\n</code></pre>\n\n<p>but <code>__repr__</code> is not working:</p>\n\n<pre><code>&gt;&gt;&gt; p= Polynomial([1,2,3])\n&gt;&gt;&gt; p\n&lt;__main__.Polynomial instance at 0x7fd3580ad518&gt;\n&gt;&gt;&gt; print p\n3 z**2+ 2 z**1 + 1 \n</code></pre>\n\n<p>How can i use the code wrritten in <code>def __str__(self):</code> without re-writining it? I couldn't find the answer anywhere else.\nthanks.</p>\n"}, {"tags": ["python", "deep-learning", "cpu", "keras"], "comments": [{"owner": {"reputation": 34711, "user_id": 5974433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ojtxg.jpg?s=128&g=1", "display_name": "Marcin Mo\u017cejko", "link": "https://stackoverflow.com/users/5974433/marcin-mo%c5%bcejko"}, "edited": false, "score": 0, "creation_date": 1489614971, "post_id": 42821363, "comment_id": 72754561, "body": "Which <code>os</code> do you have? How have you installed your <code>keras</code>?"}, {"owner": {"reputation": 96714, "user_id": 198633, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5b9c04999233026354268c2ee4237e04?s=128&d=identicon&r=PG", "display_name": "inspectorG4dget", "link": "https://stackoverflow.com/users/198633/inspectorg4dget"}, "edited": false, "score": 0, "creation_date": 1489614984, "post_id": 42821363, "comment_id": 72754571, "body": "Try running it on the GPU?"}, {"owner": {"reputation": 243, "user_id": 4756421, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/102088fa64fb85072368c2fc749e5257?s=128&d=identicon&r=PG&f=1", "display_name": "Jundong", "link": "https://stackoverflow.com/users/4756421/jundong"}, "edited": false, "score": 0, "creation_date": 1489615211, "post_id": 42821363, "comment_id": 72754670, "body": "The <code>os</code> is ubuntu <code>14.04 LTS</code>.  I haven&#39;t installed cuDNN and CUDA on my work station. I am pretty new to GPU. I thought my work station has enough computing power to do a baseline model running. However, it obviously cannot use all my resources."}, {"owner": {"reputation": 243, "user_id": 4756421, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/102088fa64fb85072368c2fc749e5257?s=128&d=identicon&r=PG&f=1", "display_name": "Jundong", "link": "https://stackoverflow.com/users/4756421/jundong"}, "reply_to_user": {"reputation": 34711, "user_id": 5974433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ojtxg.jpg?s=128&g=1", "display_name": "Marcin Mo\u017cejko", "link": "https://stackoverflow.com/users/5974433/marcin-mo%c5%bcejko"}, "edited": false, "score": 0, "creation_date": 1489615306, "post_id": 42821363, "comment_id": 72754722, "body": "@Marcin Mo\u017cejko I did install &#39;keras&#39; in <code>Ubuntu 14.04LTS</code>."}, {"owner": {"reputation": 34711, "user_id": 5974433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ojtxg.jpg?s=128&g=1", "display_name": "Marcin Mo\u017cejko", "link": "https://stackoverflow.com/users/5974433/marcin-mo%c5%bcejko"}, "edited": false, "score": 0, "creation_date": 1489615363, "post_id": 42821363, "comment_id": 72754747, "body": "Try installing <code>mkl</code> by e.g. installing <code>anaconda</code> which has it as a default package."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1489615374, "post_id": 42821363, "comment_id": 72754751, "body": "Maybe the CPU capacity is not limiting, perhaps the read/write to memory speed is."}, {"owner": {"reputation": 243, "user_id": 4756421, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/102088fa64fb85072368c2fc749e5257?s=128&d=identicon&r=PG&f=1", "display_name": "Jundong", "link": "https://stackoverflow.com/users/4756421/jundong"}, "reply_to_user": {"reputation": 34711, "user_id": 5974433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ojtxg.jpg?s=128&g=1", "display_name": "Marcin Mo\u017cejko", "link": "https://stackoverflow.com/users/5974433/marcin-mo%c5%bcejko"}, "edited": false, "score": 0, "creation_date": 1489615534, "post_id": 42821363, "comment_id": 72754834, "body": "@Marcin Mo\u017cejko. I did use <code>anaconda</code>, so I do have <code>mkl</code> installed."}, {"owner": {"reputation": 243, "user_id": 4756421, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/102088fa64fb85072368c2fc749e5257?s=128&d=identicon&r=PG&f=1", "display_name": "Jundong", "link": "https://stackoverflow.com/users/4756421/jundong"}, "edited": false, "score": 0, "creation_date": 1489615599, "post_id": 42821363, "comment_id": 72754860, "body": "@ roganjosh Is there any way to find out whether read/write to memory speed is limiting the computing? Thank you."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1489616078, "post_id": 42821363, "comment_id": 72755092, "body": "I don&#39;t actually know how to check that exactly, but for sure there will be some intermediate storage in your CPU cache and RAM. We&#39;ll both be looking for the answer I guess!"}], "owner": {"reputation": 243, "user_id": 4756421, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/102088fa64fb85072368c2fc749e5257?s=128&d=identicon&r=PG&f=1", "display_name": "Jundong", "link": "https://stackoverflow.com/users/4756421/jundong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1489614708, "creation_date": 1489614708, "question_id": 42821363, "link": "https://stackoverflow.com/questions/42821363/how-to-improve-the-cpu-efficiency-on-running-deep-learning-model", "title": "How to improve the CPU efficiency on running deep learning model", "body": "<p>I am running a baseline model, with the overall architecture <code>Conv3D-&gt;MaxPooling-&gt;Conv3D-&gt;MaxPooling-&gt;Softmax</code>. I have approximate 1000 training samples, with individual dimension <code>(x, y, z, channel) = (64, 64, 32, 1)</code>. The total number of the training parameters of my baseline model is 258,561. Before using GPU acceleration, I wanna see how long it is going to take to finish training by CPU. I am using Keras, the backend is Tensorflow. I have 32 CPUs in my work station, here is the efficiency of all CPUs:</p>\n\n<p><a href=\"https://i.stack.imgur.com/OOkIf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OOkIf.png\" alt=\"enter image description here\"></a></p>\n\n<p>Is there some way to improve the efficiency? Clearly there are many CPU idle resources to be utilized. Thank you!</p>\n"}, {"tags": ["python", "machine-learning", "neural-network", "nlp", "keras"], "answers": [{"comments": [{"owner": {"reputation": 2530, "user_id": 534969, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/c29ff9c7f802e4dd620430e38c2c0b39?s=128&d=identicon&r=PG", "display_name": "Saul Berardo", "link": "https://stackoverflow.com/users/534969/saul-berardo"}, "edited": false, "score": 2, "creation_date": 1526855782, "post_id": 42821426, "comment_id": 87894149, "body": "This answer is wrong. The stop words weren&#39;t removed. Just look at the example sentence in mdaoust answer (which is correct), there are &quot;the&quot;s and &quot;and&quot;s there."}], "tags": [], "owner": {"reputation": 34711, "user_id": 5974433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ojtxg.jpg?s=128&g=1", "display_name": "Marcin Mo\u017cejko", "link": "https://stackoverflow.com/users/5974433/marcin-mo%c5%bcejko"}, "is_accepted": false, "score": 2, "last_activity_date": 1489614916, "creation_date": 1489614916, "answer_id": 42821426, "question_id": 42821330, "link": "https://stackoverflow.com/questions/42821330/restore-original-text-from-keras-s-imdb-dataset/42821426#42821426", "title": "Restore original text from Keras\u2019s imdb dataset", "body": "<p>This happened because of a basic <code>NLP</code> data preparation. Loads of the so called <em>stop words</em> were removed from text in order to make learning feasible. Usually - also the most of puntuation and less frequent words are removed from text during preprocessing. I think that the only way to restore original text is to find the most matching texts at IMDB using e.g. a Google's browser API.</p>\n"}, {"tags": [], "owner": {"reputation": 658, "user_id": 2864966, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/29362c786e33420fad0487ea02ab418d?s=128&d=identicon&r=PG&f=1", "display_name": "kmak", "link": "https://stackoverflow.com/users/2864966/kmak"}, "is_accepted": false, "score": 8, "last_activity_date": 1497887757, "creation_date": 1497887757, "answer_id": 44635045, "question_id": 42821330, "link": "https://stackoverflow.com/questions/42821330/restore-original-text-from-keras-s-imdb-dataset/44635045#44635045", "title": "Restore original text from Keras\u2019s imdb dataset", "body": "<p>You can get the original dataset without stop words removed using get_file from  keras.utils.data_utils:</p>\n\n<pre><code>path = get_file('imdb_full.pkl',\n               origin='https://s3.amazonaws.com/text-datasets/imdb_full.pkl',\n                md5_hash='d091312047c43cf9e4e38fef92437263')\nf = open(path, 'rb')\n(training_data, training_labels), (test_data, test_labels) = pickle.load(f)\n</code></pre>\n\n<p>Credit - Jeremy Howards <a href=\"http://course.fast.ai/lessons/lesson5.html\" rel=\"noreferrer\">fast.ai course lesson 5</a></p>\n"}, {"comments": [{"owner": {"reputation": 3788, "user_id": 1116465, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/b5d919b9dcff45f8ff58cd127f517d6b?s=128&d=identicon&r=PG", "display_name": "Rodrigo Ruiz", "link": "https://stackoverflow.com/users/1116465/rodrigo-ruiz"}, "edited": false, "score": 0, "creation_date": 1543092646, "post_id": 44891281, "comment_id": 93795878, "body": "Where in the documentation says that? I only found this &quot;As a convention, &quot;0&quot; does not stand for a specific word, but instead is used to encode any unknown word.&quot;"}, {"owner": {"reputation": 2696, "user_id": 366553, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5a07b05ddc37550d0dd6311c4a4c31ca?s=128&d=identicon&r=PG", "display_name": "Peteris", "link": "https://stackoverflow.com/users/366553/peteris"}, "reply_to_user": {"reputation": 3788, "user_id": 1116465, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/b5d919b9dcff45f8ff58cd127f517d6b?s=128&d=identicon&r=PG", "display_name": "Rodrigo Ruiz", "link": "https://stackoverflow.com/users/1116465/rodrigo-ruiz"}, "edited": false, "score": 1, "creation_date": 1543288625, "post_id": 44891281, "comment_id": 93854355, "body": "@RodrigoRuiz the documentation at <a href=\"https://keras.io/datasets/#imdb-movie-reviews-sentiment-classification\" rel=\"nofollow noreferrer\">keras.io/datasets/#imdb-movie-reviews-sentiment-classificati&zwnj;&#8203;on</a> gives also the default values for parameters start_char=1, oov_char=2, index_from=3 which result in the transformation as described here. You&#39;d get 0 for unknown words if you&#39;d use start_char=0, oov_char=0, index_from=1."}, {"owner": {"reputation": 561, "user_id": 7382146, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VrpY8.jpg?s=128&g=1", "display_name": "Nate Raw", "link": "https://stackoverflow.com/users/7382146/nate-raw"}, "edited": false, "score": 2, "creation_date": 1550636290, "post_id": 44891281, "comment_id": 96336603, "body": "This code is actually incorrect. One line should be changed to <code>word_to_id={k:(v+INDEX_FROM-1) for k,v in word_to_id.items()}</code>. The indexes in the downloaded <code>word_to_id</code> dictionary are actually starting at 1. So, when you add <code>INDEX_FROM</code> to the indexes, it causes there to be a gap between <code>id_to_word[2]</code> and <code>id_to_word[4]</code>. There is no value for <code>id_to_word[3]</code>."}, {"owner": {"reputation": 2080, "user_id": 774133, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/5c30305b8e03ae14c13dc86a79e111c8?s=128&d=identicon&r=PG", "display_name": "Antonio Sesto", "link": "https://stackoverflow.com/users/774133/antonio-sesto"}, "edited": false, "score": 0, "creation_date": 1569508035, "post_id": 44891281, "comment_id": 102626957, "body": "Agree with the last comment"}, {"owner": {"user_type": "does_not_exist", "display_name": "user13226257"}, "edited": false, "score": 0, "creation_date": 1598593969, "post_id": 44891281, "comment_id": 112514879, "body": "If we set index_from = 3 then what happens to the words with the index values 1, 2. What does index_from actually do?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user13226257"}, "edited": false, "score": 0, "creation_date": 1598595731, "post_id": 44891281, "comment_id": 112515465, "body": "Could any one explain what does the index_from parameter do?"}], "tags": [], "owner": {"reputation": 5759, "user_id": 997378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a11366bc2dfe133e16a89898fa33b24f?s=128&d=identicon&r=PG", "display_name": "mdaoust", "link": "https://stackoverflow.com/users/997378/mdaoust"}, "is_accepted": true, "score": 45, "last_activity_date": 1569676375, "last_edit_date": 1569676375, "creation_date": 1499103371, "answer_id": 44891281, "question_id": 42821330, "link": "https://stackoverflow.com/questions/42821330/restore-original-text-from-keras-s-imdb-dataset/44891281#44891281", "title": "Restore original text from Keras\u2019s imdb dataset", "body": "<p>Your example is coming out as gibberish, it's much worse than just some missing stop words.</p>\n\n<p>If you re-read the docs for the <code>start_char</code>, <code>oov_char</code>, and <code>index_from</code> parameters of the [<code>keras.datasets.imdb.load_data</code>](<a href=\"https://keras.io/datasets/#imdb-movie-reviews-sentiment-classification\" rel=\"noreferrer\">https://keras.io/datasets/#imdb-movie-reviews-sentiment-classification</a>\n) method they explain what is happening:</p>\n\n<p><code>start_char</code>: int. The start of a sequence will be marked with this character. Set to 1 because 0 is usually the padding character.</p>\n\n<p><code>oov_char</code>: int. words that were cut out because of the num_words or skip_top limit will be replaced with this character.</p>\n\n<p><code>index_from</code>: int. Index actual words with this index and higher.</p>\n\n<p>That dictionary you inverted assumes the word indices start from <code>1</code>.</p>\n\n<p>But the indices returned my keras have <code>&lt;START&gt;</code> and <code>&lt;UNKNOWN&gt;</code> as indexes <code>1</code> and <code>2</code>. (And it assumes you will use <code>0</code> for <code>&lt;PADDING&gt;</code>).</p>\n\n<p>This works for me:</p>\n\n<pre><code>import keras\nNUM_WORDS=1000 # only use top 1000 words\nINDEX_FROM=3   # word index offset\n\ntrain,test = keras.datasets.imdb.load_data(num_words=NUM_WORDS, index_from=INDEX_FROM)\ntrain_x,train_y = train\ntest_x,test_y = test\n\nword_to_id = keras.datasets.imdb.get_word_index()\nword_to_id = {k:(v+INDEX_FROM) for k,v in word_to_id.items()}\nword_to_id[\"&lt;PAD&gt;\"] = 0\nword_to_id[\"&lt;START&gt;\"] = 1\nword_to_id[\"&lt;UNK&gt;\"] = 2\nword_to_id[\"&lt;UNUSED&gt;\"] = 3\n\nid_to_word = {value:key for key,value in word_to_id.items()}\nprint(' '.join(id_to_word[id] for id in train_x[0] ))\n</code></pre>\n\n<p>The punctuation is missing, but that's all:</p>\n\n<pre><code>\"&lt;START&gt; this film was just brilliant casting &lt;UNK&gt; &lt;UNK&gt; story\n direction &lt;UNK&gt; really &lt;UNK&gt; the part they played and you could just\n imagine being there robert &lt;UNK&gt; is an amazing actor ...\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7889410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0JA94.jpg?s=128&g=1", "display_name": "Andreas Gompos", "link": "https://stackoverflow.com/users/7889410/andreas-gompos"}, "is_accepted": false, "score": 0, "last_activity_date": 1569148060, "creation_date": 1569148060, "answer_id": 58048264, "question_id": 42821330, "link": "https://stackoverflow.com/questions/42821330/restore-original-text-from-keras-s-imdb-dataset/58048264#58048264", "title": "Restore original text from Keras\u2019s imdb dataset", "body": "<p>The indices are offset by 3 because 0, 1 and 2 are reserved indices for \"padding\", \"start of sequence\" and \"unknown\". The following should work.</p>\n\n<pre><code>imdb = tf.keras.datasets.imdb\n(train_data, train_labels), (test_data, test_labels) = imdb.load_data(num_words=10000)\n\nword_index = imdb.get_word_index()\nreverse_word_index = dict([(value, key) for (key, value) in word_index.items()])\n\nreview = [reverse_word_index.get(i-3, \"?\") for i in train_data[0]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 39, "user_id": 10136501, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wEHoJZzGCBM/AAAAAAAAAAI/AAAAAAAAAH8/pCREp4n3w94/photo.jpg?sz=128", "display_name": "RevolverRakk", "link": "https://stackoverflow.com/users/10136501/revolverrakk"}, "is_accepted": false, "score": 0, "last_activity_date": 1576398010, "last_edit_date": 1576398010, "creation_date": 1576394072, "answer_id": 59341922, "question_id": 42821330, "link": "https://stackoverflow.com/questions/42821330/restore-original-text-from-keras-s-imdb-dataset/59341922#59341922", "title": "Restore original text from Keras\u2019s imdb dataset", "body": "<p>This works for me:</p>\n\n<pre><code>word_index = imdb.get_word_index()                                    \nreverse_word_index = dict([(value, key) for (key, value) in word_index.items()])            \ndecoded_review = ' '.join([reverse_word_index.get(i - 3, \"\") for i in train_data[0]])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1179, "user_id": 8868699, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xSE6o.jpg?s=128&g=1", "display_name": "Hayat", "link": "https://stackoverflow.com/users/8868699/hayat"}, "is_accepted": false, "score": 2, "last_activity_date": 1579802872, "creation_date": 1579802872, "answer_id": 59884709, "question_id": 42821330, "link": "https://stackoverflow.com/questions/42821330/restore-original-text-from-keras-s-imdb-dataset/59884709#59884709", "title": "Restore original text from Keras\u2019s imdb dataset", "body": "<p>This encoding will work along with the labels:</p>\n\n<pre><code>from keras.datasets import imdb\n(x_train,y_train),(x_test,y_test) = imdb.load_data()\nword_index = imdb.get_word_index() # get {word : index}\nindex_word = {v : k for k,v in word_index.items()} # get {index : word}\n\nindex = 1\nprint(\" \".join([index_word[idx] for idx in x_train[index]]))\nprint(\"positve\" if y_train[index]==1 else \"negetive\")\n</code></pre>\n\n<p>Upvote if helps. :)</p>\n"}, {"tags": [], "owner": {"reputation": 1307, "user_id": 4907639, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c86d119562e6592f74360919eb9108a6?s=128&d=identicon&r=PG&f=1", "display_name": "coolhand", "link": "https://stackoverflow.com/users/4907639/coolhand"}, "is_accepted": false, "score": 0, "last_activity_date": 1588363489, "creation_date": 1588363489, "answer_id": 61549942, "question_id": 42821330, "link": "https://stackoverflow.com/questions/42821330/restore-original-text-from-keras-s-imdb-dataset/61549942#61549942", "title": "Restore original text from Keras\u2019s imdb dataset", "body": "<p>To get an equivalent array of all the reviews:</p>\n\n<pre><code>def decode_imdb_reviews(text_data):\n    result = [0 for x in range(len(text_data))]\n    word_index = imdb.get_word_index()\n    reverse_word_index = dict([(value, key) for (key, value) in word_index.items()])\n    for review in range(0,len(text_data)):\n        for index in enumerate(text_data[review]):\n            decoded_review = ' '.join([reverse_word_index.get(index - 3, '#') for index in text_data[review]])\n        result[review] = decoded_review\n    return result\n\ntext_data = []\ntext_data = decode_imdb_reviews(train_data)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 13603057, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14Ghm3TXFFkDxcz1uZkUstJXpnksvayzgVEwO3lB3qg=k-s128", "display_name": "Boopal Singh", "link": "https://stackoverflow.com/users/13603057/boopal-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1615674253, "last_edit_date": 1615674253, "creation_date": 1590249139, "answer_id": 61974682, "question_id": 42821330, "link": "https://stackoverflow.com/questions/42821330/restore-original-text-from-keras-s-imdb-dataset/61974682#61974682", "title": "Restore original text from Keras\u2019s imdb dataset", "body": "<pre><code>from keras.datasets import imdb\nNUM_WORDS=1000 # only use top 1000 words\n\n(x_train, y_train), (x_test, y_test) = imdb.load_data(num_words=NUM_WORDS)\n</code></pre>\n<p>Get the index details:</p>\n<pre><code>word_to_id = keras.datasets.imdb.get_word_index()\n</code></pre>\n<p>Build the Key-Value pair:</p>\n<pre><code>id_to_word = {value:key for key,value in word_to_id.items()}\nprint(' '.join(id_to_word[id] for id in x_train[0] ))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 405, "user_id": 6657314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pcqnU.png?s=128&g=1", "display_name": "Soulduck", "link": "https://stackoverflow.com/users/6657314/soulduck"}, "is_accepted": false, "score": 0, "last_activity_date": 1602210966, "last_edit_date": 1602210966, "creation_date": 1602202493, "answer_id": 64272290, "question_id": 42821330, "link": "https://stackoverflow.com/questions/42821330/restore-original-text-from-keras-s-imdb-dataset/64272290#64272290", "title": "Restore original text from Keras\u2019s imdb dataset", "body": "<p>Try below code. this code worked.</p>\n<pre class=\"lang-py prettyprint-override\"><code># load dataset \nfrom tensorflow.keras.datasets import imdb \n(x_train, y_train), (x_test, y_test) = imdb.load_data(num_words=500)\n\n\n# vec 2 num \nimdb_vec2num = imdb.get_word_index(path=&quot;imdb_word_index.json&quot;)\n# num 2 vec \nimdb_num2vec = {value+3:key for key, value in imdb_vec2num.items()}\nimdb_num2vec[0] = &quot;&lt;PAD&gt;&quot;\nimdb_num2vec[1] = &quot;&lt;START&gt;&quot;\nimdb_num2vec[2] = &quot;&lt;UNK&gt;&quot;\nimdb_num2vec[3] = &quot;&lt;UNUSED&gt;&quot;\n\n# index-word table\nimdb_num2vec = {value:key for key, value in imdb_index.items()}\n\n# change encoded sentences to sentences\ndef restore_sentences(num2word, encoded_sentences): \n    sentences = []\n    for encoded_sentence in encoded_sentences:\n        sentences.append([num2word[ele] for ele in encoded_sentence])\n    return sentences\n\n# example \nsentences = restore_sentences(imdb_num2vec, x_train)\n</code></pre>\n"}], "owner": {"reputation": 623, "user_id": 7233229, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hcycl.png?s=128&g=1", "display_name": "Hironsan", "link": "https://stackoverflow.com/users/7233229/hironsan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12447, "favorite_count": 7, "accepted_answer_id": 44891281, "answer_count": 9, "score": 37, "last_activity_date": 1615674253, "creation_date": 1489614559, "last_edit_date": 1499848230, "question_id": 42821330, "link": "https://stackoverflow.com/questions/42821330/restore-original-text-from-keras-s-imdb-dataset", "title": "Restore original text from Keras\u2019s imdb dataset", "body": "<p>Restore original text from Keras\u2019s imdb dataset</p>\n\n<p>I want to restore imdb\u2019s original text from Keras\u2019s imdb dataset.</p>\n\n<p>First, when I load Keras\u2019s imdb dataset, it returned sequence of word index.</p>\n\n<p>\n\n<pre><code>&gt;&gt;&gt; (X_train, y_train), (X_test, y_test) = imdb.load_data()\n&gt;&gt;&gt; X_train[0]\n[1, 14, 22, 16, 43, 530, 973, 1622, 1385, 65, 458, 4468, 66, 3941, 4, 173, 36, 256, 5, 25, 100, 43, 838, 112, 50, 670, 22665, 9, 35, 480, 284, 5, 150, 4, 172, 112, 167, 21631, 336, 385, 39, 4, 172, 4536, 1111, 17, 546, 38, 13, 447, 4, 192, 50, 16, 6, 147, 2025, 19, 14, 22, 4, 1920, 4613, 469, 4, 22, 71, 87, 12, 16, 43, 530, 38, 76, 15, 13, 1247, 4, 22, 17, 515, 17, 12, 16, 626, 18, 19193, 5, 62, 386, 12, 8, 316, 8, 106, 5, 4, 2223, 5244, 16, 480, 66, 3785, 33, 4, 130, 12, 16, 38, 619, 5, 25, 124, 51, 36, 135, 48, 25, 1415, 33, 6, 22, 12, 215, 28, 77, 52, 5, 14, 407, 16, 82, 10311, 8, 4, 107, 117, 5952, 15, 256, 4, 31050, 7, 3766, 5, 723, 36, 71, 43, 530, 476, 26, 400, 317, 46, 7, 4, 12118, 1029, 13, 104, 88, 4, 381, 15, 297, 98, 32, 2071, 56, 26, 141, 6, 194, 7486, 18, 4, 226, 22, 21, 134, 476, 26, 480, 5, 144, 30, 5535, 18, 51, 36, 28, 224, 92, 25, 104, 4, 226, 65, 16, 38, 1334, 88, 12, 16, 283, 5, 16, 4472, 113, 103, 32, 15, 16, 5345, 19, 178, 32]\n</code></pre>\n\n<p>I found imdb.get_word_index method(), it returns word index dictionary like {\u2018create\u2019: 984, \u2018make\u2019: 94,\u2026}. For converting, I create index word dictionary.\n\n\n<pre><code>&gt;&gt;&gt; word_index = imdb.get_word_index()\n&gt;&gt;&gt; index_word = {v:k for k,v in word_index.items()}\n</code></pre>\n\n<p>Then, I tried to restore original text like following.</p>\n\n<p>\n\n<pre><code>&gt;&gt;&gt; ' '.join(index_word.get(w) for w in X_train[5])\n\"the effort still been that usually makes for of finished sucking ended cbc's an because before if just though something know novel female i i slowly lot of above freshened with connect in of script their that out end his deceptively i i\"\n</code></pre>\n\n<p>I\u2019m not good at English, but I know this sentence is something strange.</p>\n\n<p>Why is this happened? How can I restore original text?</p>\n"}, {"tags": ["python", "scikit-learn", "classification", "text-classification", "multilabel-classification"], "comments": [{"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1489641120, "post_id": 42821315, "comment_id": 72762381, "body": "You should share full code which you used in predict and fit"}, {"owner": {"reputation": 1834, "user_id": 5491423, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0bCUw.png?s=128&g=1", "display_name": "PeterB", "link": "https://stackoverflow.com/users/5491423/peterb"}, "reply_to_user": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1489644519, "post_id": 42821315, "comment_id": 72763553, "body": "<code>cross_val_predict</code> is calling those methods implicitly, I am using <code>Pipeline</code> approach. This is full code. I have only used <code>MultiLabelBinarizer</code> for transofming y labels into binary vectors before feeding them into method <code>cross_val_predict</code>."}, {"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1489645369, "post_id": 42821315, "comment_id": 72763925, "body": "Oh yes. I overlooked that you are using <code>cross_val_predict</code>. Show some samples of X and y"}, {"owner": {"reputation": 1834, "user_id": 5491423, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0bCUw.png?s=128&g=1", "display_name": "PeterB", "link": "https://stackoverflow.com/users/5491423/peterb"}, "reply_to_user": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1489646793, "post_id": 42821315, "comment_id": 72764535, "body": "@VivekKumar sure, Q should be now complete."}, {"owner": {"reputation": 316, "user_id": 3306395, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d1bd8cee72b705788cc732ccafc41a55?s=128&d=identicon&r=PG&f=1", "display_name": "karnesJ.R", "link": "https://stackoverflow.com/users/3306395/karnesj-r"}, "edited": false, "score": 2, "creation_date": 1489938828, "post_id": 42821315, "comment_id": 72879231, "body": "It looks like your assumption was correct with your second edit. The developers very clearly stated that returning nothing is a desired behavior if your data suffers from the class imbalance problem. Can you input a logging statement in the <code>decision_function</code> you are using to see if your data is simply a poor fit for your classifier? If so, you may have to augment your decision function to control what level of a fit you desire."}, {"owner": {"reputation": 1834, "user_id": 5491423, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0bCUw.png?s=128&g=1", "display_name": "PeterB", "link": "https://stackoverflow.com/users/5491423/peterb"}, "reply_to_user": {"reputation": 316, "user_id": 3306395, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d1bd8cee72b705788cc732ccafc41a55?s=128&d=identicon&r=PG&f=1", "display_name": "karnesJ.R", "link": "https://stackoverflow.com/users/3306395/karnesj-r"}, "edited": false, "score": 0, "creation_date": 1489964516, "post_id": 42821315, "comment_id": 72887807, "body": "@karnesJ.R Thanks for response. What do you mean by logging statement please? Do you want output of the <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.svm.LinearSVC.html#sklearn.svm.LinearSVC.decision_function\" rel=\"nofollow noreferrer\">decision_function</a>?"}, {"owner": {"reputation": 678, "user_id": 1124467, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ac778f7dcb31a881bda3138929d437d1?s=128&d=identicon&r=PG", "display_name": "mbednarski", "link": "https://stackoverflow.com/users/1124467/mbednarski"}, "edited": false, "score": 0, "creation_date": 1490174005, "post_id": 42821315, "comment_id": 72989860, "body": "Can you upload dataset?"}], "answers": [{"tags": [], "owner": {"reputation": 11305, "user_id": 6160119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JlM4b.jpg?s=128&g=1", "display_name": "Tonechas", "link": "https://stackoverflow.com/users/6160119/tonechas"}, "is_accepted": true, "score": 15, "last_activity_date": 1490198669, "last_edit_date": 1495542875, "creation_date": 1490196531, "answer_id": 42956097, "question_id": 42821315, "link": "https://stackoverflow.com/questions/42821315/userwarning-label-not-number-is-present-in-all-training-examples/42956097#42956097", "title": "UserWarning: Label not :NUMBER: is present in all training examples", "body": "<blockquote>\n  <p>Why is this happening, is it related to warnings it prints out while training is running?</p>\n</blockquote>\n\n<p>The issue is likely to be that some tags occur just in a few documents (check out <a href=\"https://stackoverflow.com/questions/34342122/python-sklearn-multilabel-classification-userwarning-label-not-226-is-present\">this thread</a> for details). When you split the dataset into train and test to validate your model, it may happen that some tags are missing from the training data. Let <code>train_indices</code> be an array with the indices of the training samples. If a particular tag (of index <code>k</code>) does not occur in the training sample, all the elements in the <code>k</code>-th column of the indicator matrix <code>y[train_indices]</code> are zeros. </p>\n\n<blockquote>\n  <p>How can I avoid those empty predictions?  </p>\n</blockquote>\n\n<p>In the scenario described above the classifier will not be able to reliably predict the <code>k</code>-th tag in the test documents (more on this in the next paragraph). Therefore you cannot trust the predictions made by <code>clf.predict</code> and you need to implement the prediction function on your own, for example by using the decision values returned by <code>clf.decision_function</code> as suggested in <a href=\"https://stackoverflow.com/questions/34561554/scikit-learn-label-not-x-is-present-in-all-training-examples/34561760#34561760\">this answer</a>.</p>\n\n<blockquote>\n  <p>So I don't know why is this label not chosen with binary decisioning? Or is binary decisioning evaluated in different way than probabilities?</p>\n</blockquote>\n\n<p>In datasets containing many labels the occurrence frequency for most of them uses to be rather low. If these low values are fed to a binary classifier (i.e. a classifier that makes a 0-1 prediction) it is highly probable that the classifier would pick 0 for all tags on all documents.</p>\n\n<blockquote>\n  <p>I have found an old post where OP was dealing with similar problem. Is this the same case?</p>\n</blockquote>\n\n<p>Yes, absolutely. That guy is facing exactly the same problem as you and his code is pretty similar to yours.</p>\n\n<hr>\n\n<p><strong><em>Demo</em></strong></p>\n\n<p>To further explain the issue I have elaborated a simple toy example using mock data.</p>\n\n<pre><code>Q = {'What does the \"yield\" keyword do in Python?': ['python'],\n     'What is a metaclass in Python?': ['oop'],\n     'How do I check whether a file exists using Python?': ['python'],\n     'How to make a chain of function decorators?': ['python', 'decorator'],\n     'Using i and j as variables in Matlab': ['matlab', 'naming-conventions'],\n     'MATLAB: get variable type': ['matlab'],\n     'Why is MATLAB so fast in matrix multiplication?': ['performance'],\n     'Is MATLAB OOP slow or am I doing something wrong?': ['matlab-oop'],\n    }\ndataframe = pd.DataFrame({'body': Q.keys(), 'tag': Q.values()})    \n\nmlb = MultiLabelBinarizer()\nX = dataframe['body'].values \ny = mlb.fit_transform(dataframe['tag'].values)\n\nclassifier = Pipeline([\n    ('vectorizer', CountVectorizer(lowercase=True, \n                                   stop_words='english', \n                                   max_df=0.8, \n                                   min_df=1)),\n    ('tfidf', TfidfTransformer()),\n    ('clf', OneVsRestClassifier(LinearSVC()))])\n</code></pre>\n\n<p>Please, notice that I have set <code>min_df=1</code> since my dataset is much smaller than yours. When I run the following sentence:</p>\n\n<pre><code>predicted = cross_val_predict(classifier, X, y)\n</code></pre>\n\n<p>I get a bunch of warnings</p>\n\n<pre><code>C:\\...\\multiclass.py:76: UserWarning: Label not 4 is present in all training examples.\n  str(classes[c]))\nC:\\\\multiclass.py:76: UserWarning: Label not 0 is present in all training examples.\n  str(classes[c]))\nC:\\...\\multiclass.py:76: UserWarning: Label not 3 is present in all training examples.\n  str(classes[c]))\nC:\\...\\multiclass.py:76: UserWarning: Label not 5 is present in all training examples.\n  str(classes[c]))\nC:\\...\\multiclass.py:76: UserWarning: Label not 2 is present in all training examples.\n  str(classes[c]))\n</code></pre>\n\n<p>and the following prediction:</p>\n\n<pre><code>In [5]: np.set_printoptions(precision=2, threshold=1000)    \n\nIn [6]: predicted\nOut[6]: \narray([[0, 0, 0, 0, 0, 0, 0],\n       [0, 0, 0, 0, 0, 0, 1],\n       [0, 0, 0, 0, 0, 0, 1],\n       [0, 0, 0, 0, 0, 0, 0],\n       [0, 0, 0, 0, 0, 0, 0],\n       [0, 0, 0, 0, 0, 0, 0],\n       [0, 1, 0, 0, 0, 0, 0],\n       [0, 0, 0, 0, 0, 0, 0]])\n</code></pre>\n\n<p>Those rows whose entries are all <code>0</code> indicate that no tag is predicted for the corresponding document.</p>\n\n<hr>\n\n<p><strong><em>Workaround</em></strong></p>\n\n<p>For the sake of the analysis, let us validate the model manually rather than through <code>cross_val_predict</code>. </p>\n\n<pre><code>import warnings\nfrom sklearn.model_selection import ShuffleSplit\n\nrs = ShuffleSplit(n_splits=1, test_size=.5, random_state=0)\ntrain_indices, test_indices = rs.split(X).next()\n\nwith warnings.catch_warnings(record=True) as received_warnings:\n    warnings.simplefilter(\"always\")\n    X_train, y_train = X[train_indices], y[train_indices]\n    X_test, y_test = X[test_indices], y[test_indices]\n    classifier.fit(X_train, y_train)\n    predicted_test = classifier.predict(X_test)\n    for w in received_warnings:\n        print w.message\n</code></pre>\n\n<p>When the snippet above is executed two warnings are issued (I used a context manager to make sure warnings are catched):</p>\n\n<pre><code>Label not 2 is present in all training examples.\nLabel not 4 is present in all training examples.\n</code></pre>\n\n<p>This is consistent with the fact that tags of indices <code>2</code> and <code>4</code> are missing from the training samples:</p>\n\n<pre><code>In [40]: y_train\nOut[40]: \narray([[0, 0, 0, 0, 0, 1, 0],\n       [0, 1, 0, 0, 0, 0, 0],\n       [0, 1, 0, 1, 0, 0, 0],\n       [1, 0, 0, 0, 0, 0, 1]])\n</code></pre>\n\n<p>For some documents, the prediction is empty (those documents corresponding to the rows with all zeros in <code>predicted_test</code>):</p>\n\n<pre><code>In [42]: predicted_test\nOut[42]: \narray([[0, 1, 0, 0, 0, 0, 0],\n       [0, 0, 0, 0, 0, 0, 0],\n       [0, 0, 0, 0, 0, 0, 0],\n       [0, 1, 0, 1, 0, 0, 0]])\n</code></pre>\n\n<p>To overcome that issue, you could implement your own prediction function like this:</p>\n\n<pre><code>def get_best_tags(clf, X, lb, n_tags=3):\n    decfun = clf.decision_function(X)\n    best_tags = np.argsort(decfun)[:, :-(n_tags+1): -1]\n    return lb.classes_[best_tags]\n</code></pre>\n\n<p>By doing so, each document is always assigned the <code>n_tag</code> tags with the highest confidence score:</p>\n\n<pre><code>In [59]: mlb.inverse_transform(predicted_test)\nOut[59]: [('matlab',), (), (), ('matlab', 'naming-conventions')]\n\nIn [60]: get_best_tags(classifier, X_test, mlb)\nOut[60]: \narray([['matlab', 'oop', 'matlab-oop'],\n       ['oop', 'matlab-oop', 'matlab'],\n       ['oop', 'matlab-oop', 'matlab'],\n       ['matlab', 'naming-conventions', 'oop']], dtype=object)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 351, "user_id": 9025510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/024e050bde0ce8b97ef9313becffe63d?s=128&d=identicon&r=PG&f=1", "display_name": "Vidya P V", "link": "https://stackoverflow.com/users/9025510/vidya-p-v"}, "is_accepted": false, "score": 1, "last_activity_date": 1511956651, "creation_date": 1511956651, "answer_id": 47552301, "question_id": 42821315, "link": "https://stackoverflow.com/questions/42821315/userwarning-label-not-number-is-present-in-all-training-examples/47552301#47552301", "title": "UserWarning: Label not :NUMBER: is present in all training examples", "body": "<p>I too had the same error. Then I used <em>LabelEncoder()</em> instead of <em>MultiLabelBinarizer()</em> to encode the labels.</p>\n\n<pre><code>from sklearn import preprocessing\nle = preprocessing.LabelEncoder()\ny = le.fit_transform(Labels)\n</code></pre>\n\n<p>I am not getting that error anymore.</p>\n"}], "owner": {"reputation": 1834, "user_id": 5491423, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0bCUw.png?s=128&g=1", "display_name": "PeterB", "link": "https://stackoverflow.com/users/5491423/peterb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4251, "favorite_count": 2, "accepted_answer_id": 42956097, "answer_count": 2, "score": 14, "last_activity_date": 1511956651, "creation_date": 1489614498, "last_edit_date": 1493932094, "question_id": 42821315, "link": "https://stackoverflow.com/questions/42821315/userwarning-label-not-number-is-present-in-all-training-examples", "title": "UserWarning: Label not :NUMBER: is present in all training examples", "body": "<p>I am doing multilabel classification, where I try to predict correct labels for each document and here is my code:</p>\n\n<pre><code>mlb = MultiLabelBinarizer()\nX = dataframe['body'].values \ny = mlb.fit_transform(dataframe['tag'].values)\n\nclassifier = Pipeline([\n    ('vectorizer', CountVectorizer(lowercase=True, \n                                   stop_words='english', \n                                   max_df = 0.8, \n                                   min_df = 10)),\n    ('tfidf', TfidfTransformer()),\n    ('clf', OneVsRestClassifier(LinearSVC()))])\n\npredicted = cross_val_predict(classifier, X, y)\n</code></pre>\n\n<p>When running my code I get multiple warnings:</p>\n\n<pre><code>UserWarning: Label not :NUMBER: is present in all training examples.\n</code></pre>\n\n<p>When I print out predicted and true labels, cca half of all documents has it's predictions for labels empty.</p>\n\n<p>Why is this happening, is it related to warnings it prints out while training is running? How can I avoid those empty predictions?\n<hr>\n<strong>EDIT01:</strong>\nThis is also happening when using other estimators than <code>LinearSVC()</code>.</p>\n\n<p>I've tried <code>RandomForestClassifier()</code> and it gives empty predictions as well. Strange thing is, when I use <code>cross_val_predict(classifier, X, y, method='predict_proba')</code> for predicting probabilities for each label, instead of binary decisions 0/1, there is always at least one label per predicted set with probability > 0 for given document. So I dont know why is this label not chosen with binary decisioning? Or is binary decisioning evaluated in different way than probabilities?</p>\n\n<p><strong>EDIT02:</strong>\nI have found an old <a href=\"http://scikit-learn-general.narkive.com/lm8imv9z/linearsvc-somtimes-returns-no-label\" rel=\"noreferrer\">post</a> where OP was dealing with similar problem. Is this the same case?</p>\n"}, {"tags": ["python", "dataframe", "pyspark"], "answers": [{"tags": [], "owner": {"reputation": 7389, "user_id": 360362, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/1yfQ1.jpg?s=128&g=1", "display_name": "Meitham", "link": "https://stackoverflow.com/users/360362/meitham"}, "is_accepted": true, "score": 2, "last_activity_date": 1489615640, "creation_date": 1489615640, "answer_id": 42821592, "question_id": 42821288, "link": "https://stackoverflow.com/questions/42821288/rename-columns-on-condition-in-python-data-frame/42821592#42821592", "title": "Rename columns on condition in python data frame", "body": "<p><code>DataFrame.rename</code> will not fail if the column is not in the dataframe.  So if we assume exclusivity, only one of the columns can exist in the dataframe, then you can do that in one go::</p>\n\n<pre><code>&gt;&gt;&gt; import pandas as pd\n&gt;&gt;&gt; df = pd.DataFrame({'_00_test': range(5)})\n&gt;&gt;&gt; df\n   _00_test\n0         0\n1         1\n2         2\n3         3\n4         4\n&gt;&gt;&gt; df.rename(columns={'_00_test': 'test', '00_test': 'test'})\n   test\n0     0\n1     1\n2     2\n3     3\n4     4\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7590556"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1830, "favorite_count": 0, "accepted_answer_id": 42821592, "answer_count": 1, "score": 1, "last_activity_date": 1489615640, "creation_date": 1489614396, "question_id": 42821288, "link": "https://stackoverflow.com/questions/42821288/rename-columns-on-condition-in-python-data-frame", "title": "Rename columns on condition in python data frame", "body": "<p>I have a column in python dataframe which will be either <code>_00_test</code> or <code>00_test</code> . I want to rename the column to test.</p>\n\n<p>What I want to do is check columns in data frame if either <code>_00_test</code> or <code>00_test</code> is present then rename the column name as <code>test</code></p>\n\n<p>How to do that?</p>\n"}, {"tags": ["python", "function"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 1, "creation_date": 1489614486, "post_id": 42821247, "comment_id": 72754344, "body": "There is no difference, as long as <code>f</code> always returns <code>None</code>. If a function has no explicit <code>return</code> statement, it implicitly returns <code>None</code>."}, {"owner": {"reputation": 1216, "user_id": 1717078, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ae8297158385059498bb76ae575bf3f0?s=128&d=identicon&r=PG", "display_name": "marisbest2", "link": "https://stackoverflow.com/users/1717078/marisbest2"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1489614572, "post_id": 42821247, "comment_id": 72754386, "body": "Right so the second one is <code>f(x_) if not stopping; return None</code>. I&#39;m wondering if the stack calls are different, although without TCE I assume not"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 1, "creation_date": 1489614576, "post_id": 42821247, "comment_id": 72754388, "body": "A relevant question: <a href=\"http://stackoverflow.com/questions/15300550/python-return-return-none-and-no-return-at-all\" title=\"python return return none and no return at all\">stackoverflow.com/questions/15300550/&hellip;</a>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1489614848, "post_id": 42821247, "comment_id": 72754502, "body": "Well, both. are equivalent in that they are <code>SyntaxErrors</code>. In any event, there is no concept of a return type for a Python function. Python is a dynamically typed language. They would not be equivalent depending on how you interpret what you mean."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1489614974, "post_id": 42821247, "comment_id": 72754565, "body": "But you need to <code>return</code> your recursive call, if you want the caller to have access to it&#39;s value. Likely, if it is <code>None</code> you don&#39;t need that, but you <i>might</i> (e.g. <code>None</code> is a base-case)."}, {"owner": {"reputation": 1216, "user_id": 1717078, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ae8297158385059498bb76ae575bf3f0?s=128&d=identicon&r=PG", "display_name": "marisbest2", "link": "https://stackoverflow.com/users/1717078/marisbest2"}, "edited": false, "score": 0, "creation_date": 1489615282, "post_id": 42821247, "comment_id": 72754706, "body": "In the question I made clear that the function doesn&#39;t have a return value (or since every function in python has a return value, that value is <code>None</code>).   RE syntax I just figured it&#39;d be easier to read this way. Assume there&#39;s also an else"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1580129036, "post_id": 42821247, "comment_id": 105984705, "body": "Also, recursion is a terrible way to implement a simple loop in Python. Use a while loop."}], "answers": [{"tags": [], "owner": {"reputation": 1216, "user_id": 1717078, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ae8297158385059498bb76ae575bf3f0?s=128&d=identicon&r=PG", "display_name": "marisbest2", "link": "https://stackoverflow.com/users/1717078/marisbest2"}, "is_accepted": false, "score": 0, "last_activity_date": 1489615358, "creation_date": 1489615358, "answer_id": 42821519, "question_id": 42821247, "link": "https://stackoverflow.com/questions/42821247/returning-the-recursive-call-for-a-void-python-function/42821519#42821519", "title": "Returning the recursive call for a void Python function", "body": "<p>It would appear that there is no difference between the two. Both return <code>None</code> and the stack is the same. </p>\n"}], "owner": {"reputation": 1216, "user_id": 1717078, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ae8297158385059498bb76ae575bf3f0?s=128&d=identicon&r=PG", "display_name": "marisbest2", "link": "https://stackoverflow.com/users/1717078/marisbest2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1580128808, "creation_date": 1489614177, "last_edit_date": 1580128808, "question_id": 42821247, "link": "https://stackoverflow.com/questions/42821247/returning-the-recursive-call-for-a-void-python-function", "title": "Returning the recursive call for a void Python function", "body": "<p>Assuming a function has a void return type (i.e. it doesn't return a value so its return value is <code>None</code>), is there a difference between </p>\n\n<pre><code>def f(x): return f(x_) if not stopping\n</code></pre>\n\n<p>and </p>\n\n<pre><code>def f(x): f(x_) if not stopping\n</code></pre>\n\n<p>where <code>stopping</code> is some stopping condition and <code>x_</code> is some input to <code>f</code>?</p>\n"}, {"tags": ["python", "text", "filtering", "subset"], "answers": [{"tags": [], "owner": {"reputation": 495, "user_id": 7227829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jybi3.jpg?s=128&g=1", "display_name": "Charlie G", "link": "https://stackoverflow.com/users/7227829/charlie-g"}, "is_accepted": true, "score": 0, "last_activity_date": 1489614449, "creation_date": 1489614449, "answer_id": 42821303, "question_id": 42821222, "link": "https://stackoverflow.com/questions/42821222/python-filter-dataframe-so-only-rows-that-contain-specific-text-in-specific-col/42821303#42821303", "title": "Python: filter dataframe so only rows that contain specific text in specific column remains", "body": "<p>Try taking off the <code>\"</code> around False. It could be stored as a <code>False</code> boolean instead of the string <code>'False'</code></p>\n"}], "owner": {"reputation": 3310, "user_id": 7077532, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/dc1c023b437567e50b600d8df7e1c995?s=128&d=identicon&r=PG&f=1", "display_name": "PineNuts0", "link": "https://stackoverflow.com/users/7077532/pinenuts0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 42821303, "answer_count": 1, "score": 0, "last_activity_date": 1489614449, "creation_date": 1489614089, "question_id": 42821222, "link": "https://stackoverflow.com/questions/42821222/python-filter-dataframe-so-only-rows-that-contain-specific-text-in-specific-col", "title": "Python: filter dataframe so only rows that contain specific text in specific column remains", "body": "<p>I have a dataframe called df_responses_2.  See picture below : </p>\n\n<p><a href=\"https://i.stack.imgur.com/OUi8x.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OUi8x.png\" alt=\"enter image description here\"></a></p>\n\n<p>In the Duplicate column I have \"False\" and \"True\" values.  I want to create a new dataframe called df_responses_3 that only contains rows that show \"False\" under Duplicate column.</p>\n\n<p>I tried the following code below but it did not execute correctly: </p>\n\n<blockquote>\n  <p>df_responses_3 = df_responses_2[(df_responses_2['Duplicate'] ==\n  \"False\")]</p>\n  \n  <p>df_responses_3</p>\n</blockquote>\n\n<p>The code above only returns the header row...and nothing else.  Any help is greatly appreciated!  </p>\n"}, {"tags": ["python", "arrays", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": false, "score": 2, "last_activity_date": 1489614249, "creation_date": 1489614249, "answer_id": 42821260, "question_id": 42821157, "link": "https://stackoverflow.com/questions/42821157/multiply-every-element-in-numpy-array-a-with-every-element-in-numpy-array-b/42821260#42821260", "title": "multiply every element in numpy.array a with every element in numpy.array b", "body": "<p>One approach would be using <code>np.outer</code> and then <code>reshape</code> -</p>\n\n<pre><code>np.outer(a,b).reshape((a.shape + b.shape))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 6, "last_activity_date": 1567540558, "last_edit_date": 1567540558, "creation_date": 1489614336, "answer_id": 42821276, "question_id": 42821157, "link": "https://stackoverflow.com/questions/42821157/multiply-every-element-in-numpy-array-a-with-every-element-in-numpy-array-b/42821276#42821276", "title": "multiply every element in numpy.array a with every element in numpy.array b", "body": "<p>The <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.ufunc.outer.html\" rel=\"nofollow noreferrer\"><code>outer</code> method</a> of NumPy ufuncs treats multidimensional input the way you want, so you could do</p>\n\n<pre><code>numpy.multiply.outer(a, b)\n</code></pre>\n\n<p>rather than using <code>numpy.outer</code>.</p>\n\n<p>All solutions suggested here are equally fast; for small arrays, <code>multiply.outer</code> has a slight edge</p>\n\n<p><a href=\"https://i.stack.imgur.com/cN94z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cN94z.png\" alt=\"enter image description here\"></a></p>\n\n<p>Code for generating the image:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import numpy\nimport perfplot\n\n\ndef multiply_outer(data):\n    a, b = data\n    return numpy.multiply.outer(a, b)\n\n\ndef outer_reshape(data):\n    a, b = data\n    return numpy.outer(a, b).reshape((a.shape + b.shape))\n\n\ndef tensor_dot(data):\n    a, b = data\n    return numpy.tensordot(a, b, 0)\n\n\nperfplot.save(\n    \"out.png\",\n    setup=lambda n: (numpy.random.rand(n, n), numpy.random.rand(n, n)),\n    kernels=[multiply_outer, outer_reshape, tensor_dot],\n    n_range=[2 ** k for k in range(7)],\n    logx=True,\n    logy=True,\n)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1179, "user_id": 4875040, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/15152a78f4b1c5f16f12ec79ade40854?s=128&d=identicon&r=PG&f=1", "display_name": "Ohjeah", "link": "https://stackoverflow.com/users/4875040/ohjeah"}, "is_accepted": false, "score": 1, "last_activity_date": 1489615441, "last_edit_date": 1489615441, "creation_date": 1489614452, "answer_id": 42821305, "question_id": 42821157, "link": "https://stackoverflow.com/questions/42821157/multiply-every-element-in-numpy-array-a-with-every-element-in-numpy-array-b/42821305#42821305", "title": "multiply every element in numpy.array a with every element in numpy.array b", "body": "<p><a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.einsum.html\" rel=\"nofollow noreferrer\">np.einsum</a> is what you are looking for.</p>\n\n<p><code>c[..., j] == a * b[j]</code></p>\n\n<p>should be</p>\n\n<p><code>c = np.einsum('...i,j -&gt; ...ij', a, b)</code></p>\n\n<p>and <code>c[..., i1, i2, i3] == a * b[i1, i2, i3]</code> should be</p>\n\n<p><code>c = np.einsum('i,...jkl -&gt; ...ijkl', a, b)</code></p>\n"}, {"tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 1, "last_activity_date": 1489614855, "last_edit_date": 1489614855, "creation_date": 1489614551, "answer_id": 42821329, "question_id": 42821157, "link": "https://stackoverflow.com/questions/42821157/multiply-every-element-in-numpy-array-a-with-every-element-in-numpy-array-b/42821329#42821329", "title": "multiply every element in numpy.array a with every element in numpy.array b", "body": "<p>I think you're looking for kroneker product</p>\n\n<p>for example</p>\n\n<pre><code>&gt; np.kron(np.eye(2), np.ones((2,2)))\n\narray([[ 1.,  1.,  0.,  0.],\n       [ 1.,  1.,  0.,  0.],\n       [ 0.,  0.,  1.,  1.],\n       [ 0.,  0.,  1.,  1.]])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": false, "score": 2, "last_activity_date": 1489615918, "last_edit_date": 1489615918, "creation_date": 1489614818, "answer_id": 42821399, "question_id": 42821157, "link": "https://stackoverflow.com/questions/42821157/multiply-every-element-in-numpy-array-a-with-every-element-in-numpy-array-b/42821399#42821399", "title": "multiply every element in numpy.array a with every element in numpy.array b", "body": "<p>I think <code>np.tensordot</code> also works</p>\n\n<pre><code>c = np.tensordot(a, b, 0)\n\ninds = np.reshape(np.indices(b.shape), (b.ndim, -1))\nfor ind in inds.T:\n    ind = tuple(ind)\n    assert np.allclose(a * b[ind], c[(...,) + ind])\nelse:\n    print('no error')\n# no error \n</code></pre>\n"}], "owner": {"reputation": 36288, "user_id": 353337, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/500a1e2e864ae08f386afde2cd21add0?s=128&d=identicon&r=PG", "display_name": "Nico Schl&#246;mer", "link": "https://stackoverflow.com/users/353337/nico-schl%c3%b6mer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2032, "favorite_count": 2, "accepted_answer_id": 42821276, "answer_count": 5, "score": 6, "last_activity_date": 1567540558, "creation_date": 1489613779, "last_edit_date": 1489614173, "question_id": 42821157, "link": "https://stackoverflow.com/questions/42821157/multiply-every-element-in-numpy-array-a-with-every-element-in-numpy-array-b", "title": "multiply every element in numpy.array a with every element in numpy.array b", "body": "<p>Given two <code>numpy.array</code>s <code>a</code> and <code>b</code>,</p>\n\n<pre><code>c = numpy.outer(a, b)\n</code></pre>\n\n<p>returns an two-dimensional array where <code>c[i, j] == a[i] * b[j]</code>. Now, imagine <code>a</code> having <code>k</code> dimensions. </p>\n\n<ul>\n<li>Which operation returns an array <code>c</code> of dimension <code>k+1</code> where <code>c[..., j] == a * b[j]</code>?</li>\n</ul>\n\n<p>Additionally, let <code>b</code> have <code>l</code> dimensions. </p>\n\n<ul>\n<li>Which operation returns an array <code>c</code> of dimension <code>k+1</code> where <code>c[..., i1, i2, i3] == a * b[i1, i2, i3]</code>?</li>\n</ul>\n"}, {"tags": ["python", "mongodb", "numpy", "gis", "geojson"], "comments": [{"owner": {"reputation": 7243, "user_id": 4356204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qJ6Nk.jpg?s=128&g=1", "display_name": "parsethis", "link": "https://stackoverflow.com/users/4356204/parsethis"}, "edited": false, "score": 0, "creation_date": 1489614971, "post_id": 42821146, "comment_id": 72754562, "body": "have a look  at this for an option <a href=\"https://www.khalidalnajjar.com/insert-200-million-rows-into-mongodb-in-minutes/\" rel=\"nofollow noreferrer\">khalidalnajjar.com/&hellip;</a>"}, {"owner": {"reputation": 7130, "user_id": 1429073, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6cf3963f7758df3b57542c790e598630?s=128&d=identicon&r=PG&f=1", "display_name": "DevLounge", "link": "https://stackoverflow.com/users/1429073/devlounge"}, "edited": false, "score": 0, "creation_date": 1489617467, "post_id": 42821146, "comment_id": 72755654, "body": "create batches, for example 100 points at a time. Mongo can do bulk inserts. You&#39;ll save a lot of time. <a href=\"https://docs.mongodb.com/manual/reference/method/Bulk.insert/\" rel=\"nofollow noreferrer\">docs.mongodb.com/manual/reference/method/Bulk.insert</a>  and  <a href=\"http://api.mongodb.com/python/current/examples/bulk.html\" rel=\"nofollow noreferrer\">api.mongodb.com/python/current/examples/bulk.html</a>"}, {"owner": {"reputation": 9745, "user_id": 1443118, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/d758a80b64e30e08da95ae0430e420a5?s=128&d=identicon&r=PG", "display_name": "reptilicus", "link": "https://stackoverflow.com/users/1443118/reptilicus"}, "edited": false, "score": 0, "creation_date": 1489618494, "post_id": 42821146, "comment_id": 72756097, "body": "bulk insert batches, try with different batch sizes"}], "answers": [{"tags": [], "owner": {"reputation": 101, "user_id": 6207795, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/Q0vLf.png?s=128&g=1", "display_name": "SGM", "link": "https://stackoverflow.com/users/6207795/sgm"}, "is_accepted": false, "score": 0, "last_activity_date": 1489789110, "creation_date": 1489789110, "answer_id": 42867935, "question_id": 42821146, "link": "https://stackoverflow.com/questions/42821146/how-to-efficiently-insert-billions-of-data-into-mongodb/42867935#42867935", "title": "How to efficiently insert billions of data into mongodb", "body": "<p>Thank you very much for helping me, and my insersion performance has been improved a lot! (from 3.5h to 20min) \nPer <a href=\"http://api.mongodb.com/python/current/examples/bulk.html\" rel=\"nofollow noreferrer\">this Pymongo document</a>, \nfirst I have tried insert_many([point for point in POINTS]). It is efficient on 1e6 points, but it exit with code 137 or 9 (memory exceed) for 1e8 points.\nThen I tried customize batch size as 1e7 and continue to use insert_many, but the performance did not improve (cannot tell the reason). \nFINALLY, Unordered Bulk Write in same document saved my life, and it can handle at least 1e8 points in 30 minites with out error. </p>\n"}], "owner": {"reputation": 101, "user_id": 6207795, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/Q0vLf.png?s=128&g=1", "display_name": "SGM", "link": "https://stackoverflow.com/users/6207795/sgm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 594, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489789110, "creation_date": 1489613736, "last_edit_date": 1489627481, "question_id": 42821146, "link": "https://stackoverflow.com/questions/42821146/how-to-efficiently-insert-billions-of-data-into-mongodb", "title": "How to efficiently insert billions of data into mongodb", "body": "<p>Currently I have an array of 1e10 coordinates in a numpy array, in format like this: </p>\n\n<pre><code>[[-20.225869 1.1488514 47.007915]\n[-19.585725 1.1527847 47.106827]\n[-19.007616 1.0450604 41.686756]\n[-19.277712 1.0455568 41.622501]\n[-19.650136 1.0519722 41.848976]\n......\n]\n</code></pre>\n\n<p>each row is a point's coordinates (x, y, z).\nAnd I hope to insert them into a mongodb database (GeoJSON). \nMy current approach is like this: </p>\n\n<pre><code>for point in points:\n    db.map.insert_one(\n    {\n        \"loc\": \n        {\n            \"x\": np.float64(point[0]),\n            \"y\": np.float64(point[1]),    \n        }          \n        \"z\": np.float64(point[2])\n    }\n)\n</code></pre>\n\n<p>And this process really costs a lot of time. \nI am wondering if there is some efficient approach I can do this? Should I turn to C++ for better performance? </p>\n\n<p>Thank you very much.  </p>\n"}, {"tags": ["python", "python-3.x", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "is_accepted": false, "score": 2, "last_activity_date": 1489616085, "creation_date": 1489616085, "answer_id": 42821709, "question_id": 42821139, "link": "https://stackoverflow.com/questions/42821139/xlsxwriter-overwrites-the-previous-sheet/42821709#42821709", "title": "xlsxwriter overwrites the previous sheet", "body": "<p>I think you can do this simply by postponing the <code>.save()</code> call:</p>\n\n<pre><code>pivot = pd.pivot_table(df2, index=['Customer_Name'], values=['Billed_Net_Value', 'Sales_Order_Net_Value', 'Open_Amount'], aggfunc=np.sum)\nwriter = pd.ExcelWriter('SAP.xlsx', engine='xlsxwriter')\npivot.to_excel(writer, sheet_name='Pivot')\ndf2.to_excel(writer, sheet_name='Detail')\nwriter.save()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28655, "user_id": 10238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c3b1025babebf20168dd90ea8f268c?s=128&d=identicon&r=PG", "display_name": "jmcnamara", "link": "https://stackoverflow.com/users/10238/jmcnamara"}, "is_accepted": true, "score": 1, "last_activity_date": 1489643301, "creation_date": 1489643301, "answer_id": 42826211, "question_id": 42821139, "link": "https://stackoverflow.com/questions/42821139/xlsxwriter-overwrites-the-previous-sheet/42826211#42826211", "title": "xlsxwriter overwrites the previous sheet", "body": "<p>In your example the <code>Workbook()</code> constructor creates a new file which overwrites the file created in Pandas.</p>\n\n<p>If you want to add other dataframes to the workbook you can call <code>to_excel()</code> with other worksheet names, like this:</p>\n\n<pre><code>writer = pd.ExcelWriter('SAP.xlsx', engine='xlsxwriter')\n\npivot.to_excel(writer, sheet_name='Pivot')\ndf2.to_excel(writer, sheet_name='Sheet2')\nwriter.save()\n</code></pre>\n\n<p>If you want to add a worksheet using the XlsxWriter apis you can do it as follows:</p>\n\n<pre><code>writer = pd.ExcelWriter('SAP.xlsx', engine='xlsxwriter')\n\npivot.to_excel(writer, sheet_name='Pivot')\n\nworkbook  = writer.book\nworksheet = workbook.add_worksheet('Detail')\nwriter.save()\n</code></pre>\n\n<p>See also <a href=\"http://xlsxwriter.readthedocs.io/working_with_pandas.html\" rel=\"nofollow noreferrer\">Working with Pandas</a> in the XlsxWriter docs.</p>\n"}], "owner": {"reputation": 783, "user_id": 7565818, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/baba7f06f1273317cc6e682884711879?s=128&d=identicon&r=PG&f=1", "display_name": "nomad", "link": "https://stackoverflow.com/users/7565818/nomad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1916, "favorite_count": 0, "accepted_answer_id": 42826211, "answer_count": 2, "score": 3, "last_activity_date": 1489643301, "creation_date": 1489613724, "question_id": 42821139, "link": "https://stackoverflow.com/questions/42821139/xlsxwriter-overwrites-the-previous-sheet", "title": "xlsxwriter overwrites the previous sheet", "body": "<p>I am trying to put a pivot table on one column and detail on the second sheet. But the detail sheet is being overwritten by xlsxwriter.</p>\n\n<pre><code>pivot = pd.pivot_table(df2, index=['Customer_Name'], values=['Billed_Net_Value', 'Sales_Order_Net_Value', 'Open_Amount'], aggfunc=np.sum)\nwriter = pd.ExcelWriter('SAP.xlsx', engine='xlsxwriter')\npivot.to_excel(writer, sheet_name='Pivot')\nwriter.save()\n\nfilename = 'SAP.xlsx'\nworkbook = xlsxwriter.Workbook(filename)\nworksheet = workbook.add_worksheet('Detail')\n</code></pre>\n"}, {"tags": ["python", "string", "csv", "encoding", "chinese-locale"], "comments": [{"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1489613976, "post_id": 42821128, "comment_id": 72754097, "body": "On the 2nd line should specify the encoding name, i.e. <code># -*- coding: utf-8 -*-</code>"}, {"owner": {"reputation": 315, "user_id": 5638098, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6d24d64d0a1c5b23279e3a44aebf9e22?s=128&d=identicon&r=PG&f=1", "display_name": "Hang", "link": "https://stackoverflow.com/users/5638098/hang"}, "reply_to_user": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1489615841, "post_id": 42821128, "comment_id": 72754978, "body": "Thanks downshift I copied these two lines from a SO question but didn&#39;t notice the content... I&#39;ve added it but still the code doesn&#39;t work :("}], "answers": [{"comments": [{"owner": {"reputation": 315, "user_id": 5638098, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6d24d64d0a1c5b23279e3a44aebf9e22?s=128&d=identicon&r=PG&f=1", "display_name": "Hang", "link": "https://stackoverflow.com/users/5638098/hang"}, "edited": false, "score": 0, "creation_date": 1489615282, "post_id": 42821403, "comment_id": 72754707, "body": "Hi \u9ec4\u54e5 yea sure at first I thought it could run into copyright issue so I replaced the true url, but I just figured out I can changed that later so I have now changed to the correct url. Thanks for your help!"}, {"owner": {"reputation": 193, "user_id": 7713015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fb61aac15cbc46a8787c1a06fd24eb8?s=128&d=identicon&r=PG&f=1", "display_name": "\u9ec4\u54e5Python\u57f9\u8bad", "link": "https://stackoverflow.com/users/7713015/%e9%bb%84%e5%93%a5python%e5%9f%b9%e8%ae%ad"}, "reply_to_user": {"reputation": 315, "user_id": 5638098, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6d24d64d0a1c5b23279e3a44aebf9e22?s=128&d=identicon&r=PG&f=1", "display_name": "Hang", "link": "https://stackoverflow.com/users/5638098/hang"}, "edited": false, "score": 0, "creation_date": 1489615555, "post_id": 42821403, "comment_id": 72754843, "body": "pageSoup = soup(page_html, &quot;html.parser&quot;, from_encoding=&#39;gbk&#39;)"}, {"owner": {"reputation": 315, "user_id": 5638098, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6d24d64d0a1c5b23279e3a44aebf9e22?s=128&d=identicon&r=PG&f=1", "display_name": "Hang", "link": "https://stackoverflow.com/users/5638098/hang"}, "edited": false, "score": 0, "creation_date": 1489615857, "post_id": 42821403, "comment_id": 72754986, "body": "Thanks \u9ec4\u54e5 let me try"}, {"owner": {"reputation": 315, "user_id": 5638098, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6d24d64d0a1c5b23279e3a44aebf9e22?s=128&d=identicon&r=PG&f=1", "display_name": "Hang", "link": "https://stackoverflow.com/users/5638098/hang"}, "edited": false, "score": 0, "creation_date": 1489616052, "post_id": 42821403, "comment_id": 72755082, "body": "Hi \u9ec4\u54e5 I have added from_encoding=&#39;gbk&#39; but it still won&#39;t work... Same problem..."}, {"owner": {"reputation": 193, "user_id": 7713015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fb61aac15cbc46a8787c1a06fd24eb8?s=128&d=identicon&r=PG&f=1", "display_name": "\u9ec4\u54e5Python\u57f9\u8bad", "link": "https://stackoverflow.com/users/7713015/%e9%bb%84%e5%93%a5python%e5%9f%b9%e8%ae%ad"}, "reply_to_user": {"reputation": 315, "user_id": 5638098, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6d24d64d0a1c5b23279e3a44aebf9e22?s=128&d=identicon&r=PG&f=1", "display_name": "Hang", "link": "https://stackoverflow.com/users/5638098/hang"}, "edited": false, "score": 0, "creation_date": 1489617014, "post_id": 42821403, "comment_id": 72755478, "body": "# -<i>- coding: &lt;encoding name&gt; -</i>-  change  to # coding:utf-8  and pageSoup = soup(page_html, &quot;html.parser&quot;, from_encoding=&#39;gbk&#39;) or pageSoup = soup(page_html, &quot;html.parser&quot;, from_encoding=&#39;utf-8&#39;)"}, {"owner": {"reputation": 315, "user_id": 5638098, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6d24d64d0a1c5b23279e3a44aebf9e22?s=128&d=identicon&r=PG&f=1", "display_name": "Hang", "link": "https://stackoverflow.com/users/5638098/hang"}, "edited": false, "score": 0, "creation_date": 1489619566, "post_id": 42821403, "comment_id": 72756514, "body": "Hi \u9ec4\u54e5 the correct url is already in the code. The methods you gave do not work in my side. Will you be able to debug my code by the correct url?"}, {"owner": {"reputation": 315, "user_id": 5638098, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6d24d64d0a1c5b23279e3a44aebf9e22?s=128&d=identicon&r=PG&f=1", "display_name": "Hang", "link": "https://stackoverflow.com/users/5638098/hang"}, "edited": false, "score": 0, "creation_date": 1489715778, "post_id": 42821403, "comment_id": 72803870, "body": "Hi Thanks \u9ec4\u54e5 sorry for the late reply. I just copied your code to my machine to run but it seems it stuck on the file writing command and the file created has nothing in it. Also I&#39;ve tried running it on AWS Ubuntu machine with no luck. However I believe that it could run in your machine. Do you have any idea that what could be possibly wrong? Did you run it at a Chinese-locale based machine or?"}, {"owner": {"reputation": 193, "user_id": 7713015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fb61aac15cbc46a8787c1a06fd24eb8?s=128&d=identicon&r=PG&f=1", "display_name": "\u9ec4\u54e5Python\u57f9\u8bad", "link": "https://stackoverflow.com/users/7713015/%e9%bb%84%e5%93%a5python%e5%9f%b9%e8%ae%ad"}, "reply_to_user": {"reputation": 315, "user_id": 5638098, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6d24d64d0a1c5b23279e3a44aebf9e22?s=128&d=identicon&r=PG&f=1", "display_name": "Hang", "link": "https://stackoverflow.com/users/5638098/hang"}, "edited": false, "score": 0, "creation_date": 1489715977, "post_id": 42821403, "comment_id": 72803923, "body": "maybe  forbid you IP,  not about  code, do you know?"}, {"owner": {"reputation": 193, "user_id": 7713015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fb61aac15cbc46a8787c1a06fd24eb8?s=128&d=identicon&r=PG&f=1", "display_name": "\u9ec4\u54e5Python\u57f9\u8bad", "link": "https://stackoverflow.com/users/7713015/%e9%bb%84%e5%93%a5python%e5%9f%b9%e8%ae%ad"}, "reply_to_user": {"reputation": 315, "user_id": 5638098, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6d24d64d0a1c5b23279e3a44aebf9e22?s=128&d=identicon&r=PG&f=1", "display_name": "Hang", "link": "https://stackoverflow.com/users/5638098/hang"}, "edited": false, "score": 0, "creation_date": 1489716062, "post_id": 42821403, "comment_id": 72803944, "body": "you can print(page_html)  test page_html  has value or not ?"}, {"owner": {"reputation": 315, "user_id": 5638098, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6d24d64d0a1c5b23279e3a44aebf9e22?s=128&d=identicon&r=PG&f=1", "display_name": "Hang", "link": "https://stackoverflow.com/users/5638098/hang"}, "edited": false, "score": 0, "creation_date": 1491086266, "post_id": 42821403, "comment_id": 73400226, "body": "Hi \u9ec4\u54e5 sorry for the late reply. IP shouldn&#39;t be a problem as when I just ran my code and printed the fetched content in console, the content is fetched and formatted correctly. And I guess then print(page_html) will print the content as well."}], "tags": [], "owner": {"reputation": 193, "user_id": 7713015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fb61aac15cbc46a8787c1a06fd24eb8?s=128&d=identicon&r=PG&f=1", "display_name": "\u9ec4\u54e5Python\u57f9\u8bad", "link": "https://stackoverflow.com/users/7713015/%e9%bb%84%e5%93%a5python%e5%9f%b9%e8%ae%ad"}, "is_accepted": false, "score": 1, "last_activity_date": 1489621669, "last_edit_date": 1489621669, "creation_date": 1489614841, "answer_id": 42821403, "question_id": 42821128, "link": "https://stackoverflow.com/questions/42821128/encoding-chinese-characters-in-python-and-typeerror-a-bytes-like-object-is-requ/42821403#42821403", "title": "Encoding Chinese characters in Python and TypeError: a bytes-like object is required, not &#39;str&#39;", "body": "<p>\u4f60\u7684\u4ee3\u7801\uff0c\u5199\u6210\u4e86\u9762\u6761\u5f0f\u4ee3\u7801\uff0c\u9020\u6210\u6709\u7684\u60c5\u51b5\u4e0b\uff0c\u6587\u4ef6\u5173\u95ed\u4e86\uff0c\u4e0d\u80fd\u5199\u3002</p>\n\n<p>f.write(word + ',' + '&amp;' + ',' +newWordDetail.replace(',', 'douhao') + ',' + '$')</p>\n\n<p>sometime  you write to a close file\uff0c so this is wrong. below code is correct, run this code ,I can get correct content.</p>\n\n<pre><code>#!/usr/bin/env python\n# coding:utf-8\n'''\u9ec4\u54e5Python'''\n\n\nfrom urllib.request import urlopen as uReq\nfrom bs4 import BeautifulSoup as soup\n\n# make a word list (grabbed from the wordlist pdf, converted to Excel and\n# extracted)\n\nwordList = '''Day One\nabandon\nabate\nabbreviate\nDay Two\nabate\nabbreviate\nDay Three\nabandon\nabate\nDay Four\nabandon\nabate\nabandon\nabate\nDay Five\nabandon\nabate\nDay Six\nabandon\nabate\nDay Seven\nabandon\nabate'''\n\nwordList = [y for y in (x.strip() for x in wordList.splitlines()) if y]\n\ndayIndex = 0\ndayArray = ['Day One', 'Day Two', 'Day Three',\n            'Day Four', 'Day Five', 'Day Six', 'Day Seven']\n\nfor item in wordList:\n    if item == dayArray[dayIndex]:\n        if dayIndex == 0:\n            fileName = \"Word \" + dayArray[dayIndex] + \".csv\"\n            f = open(fileName, 'w')\n            headers = \"word, separater, detail, lineSep\\n\"\n            f.write(headers)\n            dayIndex += 1\n        elif dayIndex == 6:\n            f.close()\n        else:\n            f.close()\n            fileName = \"Word \" + dayArray[dayIndex] + \".csv\"\n            f = open(fileName, 'w')\n            headers = \"word, separater, detail, lineSep\\n\"\n            f.write(headers)\n            dayIndex += 1\n    else:\n        # construct url for each word\n        myUrl = 'http://gre.kmf.com/vocab/detail/' + item\n\n        # opening up the connection, grabbing the page\n        uClient = uReq(myUrl)\n        page_html = uClient.read()\n        uClient.close()\n\n        # html parsing\n        pageSoup = soup(page_html, \"html.parser\", )\n\n        # grab word container\n        container = pageSoup.findAll(\"div\", {\"class\", \"word-d-maintile\"})\n        contain = container[0]  # actually only 1 item in the container array\n\n        # grab the word(should be the same as item)\n        word = contain.span.text\n\n        # grab word detail\n        wordDetail_container = contain.findAll(\n            \"div\", {\"class\": \"word-g-translate\"})\n        # again should be only 1 item in the array.strip() the extra spaces and\n        # useless indentation\n        wordDetail = wordDetail_container[0].text.strip()\n\n        # manipulate the string wordDetail(string is immutable but you know\n        # what I mean)\n        detailArray = []\n        for letter in wordDetail:\n            if letter != '\u3010' and letter != '\u4f8b' and letter != '\u8fd1' and letter != '\u53cd':\n                detailArray.append(letter)\n            elif letter == '\u3010':\n                detailArray.append(\"\\n\\n\\n\" + letter)\n            else:\n                detailArray.append(\"\\n\\n\" + '[' + letter + ']' + ' ')\n            newWordDetail = ''.join(detailArray)\n        # print(\"CUT\\n\") debug\n        # print(word + '\\n') debug\n        # print(newWordDetail) debug\n        # print(f)\n        try:\n            f.write(word + ',' + '&amp;' + ',' +newWordDetail.replace(',', 'douhao') + ',' + '$')\n        except Exception as e:\n            pass\n</code></pre>\n\n<p>\u8f93\u51fa\u7ed3\u679c\uff0c\u5176\u4e2d\u4e00\u4e2a\u6587\u4ef6\u7684\u5185\u5bb9\u5982\u4e0b\u3002\nword, separater, detail, lineSep\nabandon,&amp;,</p>\n\n<p>\u3010\u8003\u6cd51\u3011n. \u653e\u7eb5\uff1a carefreedouhao freedom from constraint</p>\n\n<p>[\u4f8b] add spices to the stew with complete abandon \u8086\u65e0\u5fcc\u60ee\u5730\u5411\u7096\u83dc\u91cc\u9762\u52a0\u8c03\u6599</p>\n\n<p>[\u8fd1] unconstraintdouhao uninhibitednessdouhao unrestraint</p>\n\n<p>\u3010\u8003\u6cd52\u3011v. \u653e\u7eb5\uff1a to give \uff08oneself\uff09 over unrestrainedly</p>\n\n<p>[\u4f8b] abandon oneself to emotion \u611f\u60c5\u7528\u4e8b \u2016 abandon herself to a life of complete idleness \u5979\u653e\u7eb5\u81ea\u5df1\u8fc7\u7740\u95f2\u6563\u7684\u751f\u6d3b</p>\n\n<p>[\u8fd1] indulgedouhao surrender</p>\n\n<p>\u3010\u8003\u6cd53\u3011v. \u653e\u5f03\uff1a to withdraw from often in the face of danger or encroachment</p>\n\n<p>[\u4f8b] abandon the ship/homes \u5f03\u8239\uff1b \u79bb\u5bb6</p>\n\n<p>[\u53cd] salvage \u6551\u63f4</p>\n\n<p>\u3010\u8003\u6cd54\u3011v. \u505c\u6b62\u505a\u67d0\u4e8b\uff1a to put an end to \uff08something planned or previously agreed to\uff09</p>\n\n<p>[\u4f8b] The bad weather forced NASA to abandon the launch. \u574f\u5929\u6c14\u8feb\u4f7fNASA\u505c\u6b62\u4e86\u53d1\u5c04\u3002</p>\n\n<p>[\u8fd1] abortdouhao dropdouhao repealdouhao rescinddouhao revokedouhao call offdouhao give up</p>\n\n<p>[\u53cd] keepdouhao continuedouhao maintaindouhao carry on  \u7ee7\u7eed,$abate,&amp;,</p>\n\n<p>\u3010\u8003\u6cd51\u3011v. \u51cf\u8f7b\uff08\u7a0b\u5ea6\u6216\u8005\u5f3a\u5ea6\uff09\uff1a to reduce in degree or intensity</p>\n\n<p>[\u4f8b] abate his rage/pain \u5e73\u606f\u4ed6\u7684\u6124\u6012 / \u51cf\u8f7b\u4ed6\u7684\u75db\u82e6</p>\n\n<p>[\u8fd1] moderatedouhao recededouhao subsidedouhao remitdouhao wanedouhao die \uff08away or down or out\uff09douhao let updouhao phase downdouhao taper off</p>\n\n<p>[\u53cd] intensify\u52a0\u5f3a\uff0c \u52a0\u5267</p>\n\n<p>\u3010\u8003\u6cd52\u3011v. \u51cf\u5c11\uff08\u6570\u91cf\uff09\uff0c \u964d\u4f4e\uff08\u4ef7\u503c\uff09\uff1a to reduce in amount or value</p>\n\n<p>[\u4f8b] abate a tax \u964d\u4f4e\u7a0e\u6536</p>\n\n<p>[\u8fd1] de-escalatedouhao depletedouhao downscaledouhao dwindledouhao ratchet \uff08down\uff09</p>\n\n<p>[\u53cd] augmentdouhao promote \u589e\u52a0</p>\n\n<p>\u3010\u8003\u6cd53\u3011v. \u505c\u6b62\uff0c \u64a4\u9500\uff1a to put an end to</p>\n\n<p>[\u4f8b] abate a nuisance \u505c\u6b62\u4f24\u5bb3 </p>\n\n<p>[\u8fd1] abrogatedouhao annuldouhao invalidatedouhao nullifydouhao rescinddouhao vacate,$</p>\n"}], "owner": {"reputation": 315, "user_id": 5638098, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6d24d64d0a1c5b23279e3a44aebf9e22?s=128&d=identicon&r=PG&f=1", "display_name": "Hang", "link": "https://stackoverflow.com/users/5638098/hang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 610, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489621669, "creation_date": 1489613704, "last_edit_date": 1489615617, "question_id": 42821128, "link": "https://stackoverflow.com/questions/42821128/encoding-chinese-characters-in-python-and-typeerror-a-bytes-like-object-is-requ", "title": "Encoding Chinese characters in Python and TypeError: a bytes-like object is required, not &#39;str&#39;", "body": "<p>Hi guys I've written a web scraper in Python trying to scrape some words sample sentences and so on from a dictionary-ish website for my GRE word list and put them in a csv file. The scraping content includes Chinese characters.</p>\n\n<p>The only problem to my script is when I am trying to write those out to a CSV file, I could either get an error of</p>\n\n<p>UnicodeEncodeError: 'ascii' codec can't encode characters in position 13-15: ordinal not in range(128)</p>\n\n<p>or</p>\n\n<p>TypeError: a bytes-like object is required, not 'str'</p>\n\n<p>Here is my complete code:</p>\n\n<pre><code>#!/usr/bin/python\n# -*- coding: &lt;encoding name&gt; -*-\n\nfrom urllib.request import urlopen as uReq\nfrom bs4 import BeautifulSoup as soup\n\n# make a word list (grabbed from the wordlist pdf, converted to Excel and extracted)\n\nwordList = '''Day One\nabandon\nabate\nabbreviate\nDay Two\nabate\nabbreviate\nDay Three\nabandon\nabate\nDay Four\nabandon\nabate\nabandon\nabate\nDay Five\nabandon\nabate\nDay Six\nabandon\nabate\nDay Seven\nabandon\nabate'''\n\nwordList = [y for y in (x.strip() for x in wordList.splitlines()) if y]\n\ndayIndex = 0\ndayArray = ['Day One', 'Day Two', 'Day Three', 'Day Four', 'Day Five', 'Day Six', 'Day Seven']\n\nfor item in wordList:\n        if item == dayArray[dayIndex]:\n                if dayIndex == 0:\n                        fileName = \"Word \" + dayArray[dayIndex] + \".csv\"\n                        f = open(fileName, 'w')\n                        headers = \"word, separater, detail, lineSep\\n\"\n                        f.write(headers)\n                        dayIndex += 1\n                elif dayIndex == 6:\n                        f.close()\n                else:\n                        f.close()\n                        fileName = \"Word \" + dayArray[dayIndex] + \".csv\"\n                        f = open(fileName, 'w')\n                        headers = \"word, separater, detail, lineSep\\n\"\n                        f.write(headers)\n                        dayIndex += 1\n        else:\n                # construct url for each word\n                myUrl = 'http://gre.kmf.com/vocab/detail/' + item\n\n                # opening up the connection, grabbing the page\n                uClient = uReq(myUrl)\n                page_html = uClient.read()\n                uClient.close()\n\n                # html parsing\n                pageSoup = soup(page_html, \"html.parser\")\n\n                # grab word container\n                container = pageSoup.findAll(\"div\", {\"class\", \"word-d-maintile\"})\n                contain = container[0]# actually only 1 item in the container array\n\n                # grab the word(should be the same as item)\n                word = contain.span.text\n\n                # grab word detail\n                wordDetail_container = contain.findAll(\"div\", {\"class\": \"word-g-translate\"})\n                wordDetail = wordDetail_container[0].text.strip()# again should be only 1 item in the array.strip() the extra spaces and useless indentation\n\n                # manipulate the string wordDetail(string is immutable but you know what I mean)\n                detailArray = []\n                for letter in wordDetail:\n                        if letter != '\u3010' and letter != '\u4f8b' and letter != '\u8fd1' and letter != '\u53cd':\n                            detailArray.append(letter)\n                        elif letter == '\u3010':\n                            detailArray.append(\"\\n\\n\\n\" + letter)\n                        else:\n                            detailArray.append(\"\\n\\n\" + '[' + letter + ']' + ' ')\n                        newWordDetail = ''.join(detailArray)\n                #print(\"CUT\\n\") debug\n                #print(word + '\\n') debug\n                #print(newWordDetail) debug\n                f.write(word +',' + '&amp;' + ',' + newWordDetail.replace(',', 'douhao') + ',' + '$')\n</code></pre>\n\n<p>The problem is at the last line. When the first error occurs I added a \".encode('gb2312')\" after the newWordDetail trying to encode those Chinese characters, but after I did that I got the second error. I've checked online but hardly found a solution suiting my situation.</p>\n\n<p>Thanks guys for saving my life!</p>\n"}, {"tags": ["python", "windows"], "comments": [{"owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 1, "creation_date": 1489613967, "post_id": 42821103, "comment_id": 72754096, "body": "Is this process <code>processname</code> something you are writing or something already written by someone else? Is there anything distinctive in each process based on its command line arguments, such as in the window title? What have you tried so far and why is it not working?"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1489638715, "post_id": 42821103, "comment_id": 72761615, "body": "FWIW, you can get that information using the WMI <a href=\"https://msdn.microsoft.com/en-us/library/aa394372\" rel=\"nofollow noreferrer\"><code>Win32_Process</code></a> class. In Python you can use Tim Golden&#39;s <a href=\"http://timgolden.me.uk/python/wmi/index.html\" rel=\"nofollow noreferrer\">wmi module</a>. For example, <code>c = wmi.WMI();</code> <code>procs = c.Win32_Process(Name=&#39;processname&#39;);</code> <code>for p in procs: print(p.CommandLine)</code>."}], "owner": {"reputation": 31, "user_id": 2410518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8817fe93dc3898c811fb8abc28b0018f?s=128&d=identicon&r=PG", "display_name": "regjump", "link": "https://stackoverflow.com/users/2410518/regjump"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489613634, "creation_date": 1489613634, "question_id": 42821103, "link": "https://stackoverflow.com/questions/42821103/kill-process-based-on-its-commandline-arguments-in-python", "title": "Kill process based on its commandline arguments in Python?", "body": "<p>I have many instances of a process running, but only want to kill the instance that has specific commandline arguments. In other words, killing <code>processname arg1 arg2 arg3</code> isntead of just <code>processname</code>.</p>\n"}, {"tags": ["python", "user-interface", "button", "tkinter"], "comments": [{"owner": {"reputation": 1655, "user_id": 6945651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WXXfN.jpg?s=128&g=1", "display_name": "J. Piquard", "link": "https://stackoverflow.com/users/6945651/j-piquard"}, "edited": false, "score": 0, "creation_date": 1489615066, "post_id": 42821049, "comment_id": 72754611, "body": "Why are using a the graphic interface <code>tkinter</code> to display the <code>Start</code> button then executing <code>start()</code> function with console interface <code>input()</code> and <code>print()</code> ?"}, {"owner": {"reputation": 56, "user_id": 7519882, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Tm-KTSCcHxQ/AAAAAAAAAAI/AAAAAAAAAO0/5vUoY_FEuqM/photo.jpg?sz=128", "display_name": "Henry Chang", "link": "https://stackoverflow.com/users/7519882/henry-chang"}, "reply_to_user": {"reputation": 1655, "user_id": 6945651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WXXfN.jpg?s=128&g=1", "display_name": "J. Piquard", "link": "https://stackoverflow.com/users/6945651/j-piquard"}, "edited": false, "score": 0, "creation_date": 1489686798, "post_id": 42821049, "comment_id": 72791902, "body": "The main reason is because I wish for the program to run in a loop."}], "owner": {"reputation": 56, "user_id": 7519882, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Tm-KTSCcHxQ/AAAAAAAAAAI/AAAAAAAAAO0/5vUoY_FEuqM/photo.jpg?sz=128", "display_name": "Henry Chang", "link": "https://stackoverflow.com/users/7519882/henry-chang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489613595, "creation_date": 1489613420, "last_edit_date": 1489613595, "question_id": 42821049, "link": "https://stackoverflow.com/questions/42821049/encoder-python-project", "title": "Encoder Python Project", "body": "<p>So I have created the text code for a school project. The purpose is to translate a string into a list of ASCII values and or vice versa. Now I am trying to add a user interface in order for it to be easier to use however nothing is working right now. I managed to create a user interface but none of the buttons work as I intended. </p>\n\n<p>Here is the text-based code</p>\n\n<pre><code>from functools import partial\n\n\ndef program (str,my_fn):\n    global i\n    i=0\n    while i&lt;len(str):\n        my_fn()\n        i += 1\n\ndef encrypt(my_result,str,number=0):\n    my_result.append(ord(str[i])-number)\ndef decrypt(my_result,str,number=0):\n    my_result.append(chr(str[i]+number))\ndef password_generator():\n    password = input(\"What would the password be:\\n\")\n    numerical_password=[]\n    program(password,partial(encrypt,numerical_password,password))\n    global code\n    code = sum(numerical_password)\n\n#THE CODE FOR THE GUI STARTS HERE\n\n\n\n#THE CODE FOR THE PROGRAM STARTS HERE\nchoice = \"\"\nwhile choice != \"Exit\":\n    choice = input(\"Do you want to Encrypt, Decrypt,  or Exit?\\n\")\n    if choice == \"Encrypt\": #Encrypt\n        option = input(\"Do you want a password?(Yes or No)\\n\")\n        if option == \"Yes\":\n            password_generator()\n        else:\n            code = 0\n\n        answer = input(\"What would you like to encrypt:\\n\")\n        message = []\n        program(answer,partial(encrypt,message,answer,code))\n        print (message)\n\n\n\n    if choice == \"Decrypt\": #Decrypt\n        option = input(\"Do you have a password?(Yes or No)\\n\")\n        code= 0 \n        if option == \"Yes\":\n            password_generator()\n        else:\n            code = 0\n        answer = [int(x) for x in input(\"(Please insert ONLY intergers seperated with commas)\\nWhat would you like to decrypt:\\n\").split(\",\")]\n        text =[]\n        program(answer, partial(decrypt,text,answer,code))\n        print(\"\".join(text))\nprint(\"ThAnK yOu foR uSiNg eNcodER. HAve a nICe dAY!\")\n</code></pre>\n\n<p>The issue in run into is some of the global variables will not be defined when I pressed the function for some reason.\nBelow is the code for buttons. </p>\n\n<pre><code>#Imports\nfrom tkinter import *\nfrom functools import partial\n\n#The Code for Setting up the GUI\nroot = Tk()\nroot.title(\"Note Taker\")\nroot.geometry(\"250x250\")\napp = Frame(root)\napp.grid()\n\n\n#Function for Program\ndef program (str,my_fn):\n    global i\n    i=0\n    while i&lt;len(str):\n        my_fn()\n        i += 1\ndef encrypt(my_result,str,number=0):\n    my_result.append(ord(str[i])-number)\ndef decrypt(my_result,str,number=0):\n    my_result.append(chr(str[i]+number))\ndef password_generator():\n    password = input(\"What would the password be:\\n\")\n    numerical_password=[]\n    program(password,partial(encrypt,numerical_password,password))\n    global code\n    code = sum(numerical_password)\n\n\n# #Functions of Buttons\n\n\n\ndef start():\n    choice = input(\"Do you want to Encrypt, Decrypt,  or Exit?\\n\")\n    if choice == \"Encrypt\": #Encrypt\n        option = input(\"Do you want a password?(Yes or No)\\n\")\n        if option == \"Yes\":\n            password_generator()\n        else:\n            code = 0\n\n        answer = input(\"What would you like to encrypt:\\n\")\n        message = []\n        program(answer,partial(encrypt,message,answer,code))\n        print (message)\n\n\n\n    if choice == \"Decrypt\": #Decrypt\n        option = input(\"Do you have a password?(Yes or No)\\n\")\n        code= 0 \n        if option == \"Yes\":\n            password_generator()\n        else:\n            code = 0\n        answer = [int(x) for x in input(\"(Please insert ONLY intergers seperated with commas)\\nWhat would you like to decrypt:\\n\").split(\",\")]\n        text =[]\n        program(answer, partial(decrypt,text,answer,code))\n        print(\"\".join(text))\n\n\n\n\n#Buttons\n\nEncrypt = Button(root, text=\"Start\",command= start)\nEncrypt.grid()\n\nroot.mainloop()\n</code></pre>\n\n<p>I just started programming so I know I am making several amaeture moves. However, I wish to keep my the functions since it is required for this project. Please tell me what I am doing wrong and how I can fix it. Thanks</p>\n"}, {"tags": ["javascript", "python", "html", "flask", "mustache"], "comments": [{"owner": {"reputation": 5851, "user_id": 2800058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89a11543adeba7f9212e25d410cd79d0?s=128&d=identicon&r=PG", "display_name": "pjcunningham", "link": "https://stackoverflow.com/users/2800058/pjcunningham"}, "edited": false, "score": 0, "creation_date": 1489618129, "post_id": 42821047, "comment_id": 72755926, "body": "This <a href=\"http://stackoverflow.com/a/15322060/2800058\">answer</a> might help."}, {"owner": {"reputation": 9745, "user_id": 1443118, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/d758a80b64e30e08da95ae0430e420a5?s=128&d=identicon&r=PG", "display_name": "reptilicus", "link": "https://stackoverflow.com/users/1443118/reptilicus"}, "edited": false, "score": 1, "creation_date": 1489618409, "post_id": 42821047, "comment_id": 72756062, "body": "yeah what they said, you need to put it in the template with the <code>{{data | safe}}</code> filter"}, {"owner": {"reputation": 31, "user_id": 2729697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4702bb6393c45e3ae50756aaff5be66?s=128&d=identicon&r=PG&f=1", "display_name": "Lingbo", "link": "https://stackoverflow.com/users/2729697/lingbo"}, "edited": false, "score": 0, "creation_date": 1490309154, "post_id": 42821047, "comment_id": 73068312, "body": "Thanks! The &#39;safe&#39; method solves the problem when I am hosting the app in my local windows pc! But it fails if I deploy it in the Ubuntu machine using Apache2.. Do you know what might be cause?"}, {"owner": {"reputation": 31, "user_id": 2729697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4702bb6393c45e3ae50756aaff5be66?s=128&d=identicon&r=PG&f=1", "display_name": "Lingbo", "link": "https://stackoverflow.com/users/2729697/lingbo"}, "edited": false, "score": 0, "creation_date": 1490310679, "post_id": 42821047, "comment_id": 73068819, "body": "I added one more stuff that solved the problem: {{data | tojson |safe}}"}], "owner": {"reputation": 31, "user_id": 2729697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4702bb6393c45e3ae50756aaff5be66?s=128&d=identicon&r=PG&f=1", "display_name": "Lingbo", "link": "https://stackoverflow.com/users/2729697/lingbo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1799, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1489614333, "creation_date": 1489613407, "last_edit_date": 1489614333, "question_id": 42821047, "link": "https://stackoverflow.com/questions/42821047/how-to-pass-a-list-of-strings-from-flask-python-main-function-to-javascript-in-h", "title": "How to pass a list of strings from flask python main function to javascript in html?", "body": "<p>I am building a web site using flask. In the app.py file, I calculated out some stats that are passed to the html page. </p>\n\n<pre><code>@app.route('/')\ndef index():\n    values = [10, 11, 7, 15, 19, 5, 7.5, 10.9]\n    days= [\"12/18/18\",\"12/25/18\",\"1/1/19\",\"1/8/19\",\"1/15/19\",\"1/22/19\",\"1/29/19\",\"2/5/19\"]\n\nreturn render_template('index.html', days = days, values=values)\n</code></pre>\n\n<p>The javascript in the index.html is as follows</p>\n\n<pre><code>var ctx = document.getElementById(\"lineChart\");\nvar lineChart = new Chart(ctx, {\n  type: 'line',\n  data: {\n    labels: {{days}}\n    datasets: {\n      label: \"All users\",\n      backgroundColor: \"rgba(30,144,255, 0.31)\",\n      borderColor: \"rgba(30,144,255, 0.7)\",\n      pointBorderColor: \"rgba(30,144,255, 0.7)\",\n      pointBackgroundColor: \"rgba(30,144,255, 0.7)\",\n      pointHoverBackgroundColor: \"#fff\",\n      pointHoverBorderColor: \"rgba(220,220,220,1)\",\n      pointBorderWidth: 1,\n      data: {{values}}\n    }\n  },\n});\n</code></pre>\n\n<p>I tested two options in the javascript:</p>\n\n<ol>\n<li><p>Not working (can't generate the chart plot)</p>\n\n<pre><code>labels: {{days}}\ndata: {{values}}\n</code></pre></li>\n<li><p>Working if I explicitly give list of strings</p>\n\n<pre><code>labels: [\"12/18/18\",\"12/25/18\",\"1/1/19\",\"1/8/19\",\"1/15/19\",\"1/22/19\",\"1/29/19\",\"2/5/19\"]\ndata: {{values}}    \n</code></pre></li>\n</ol>\n\n<p>It seems that passing the numeric arrays (values in this example) is fine but passing the list of strings will cause trouble. </p>\n\n<p>Do you have any suggestions to address the issue?<br>\nMuch appreciated!</p>\n"}, {"tags": ["python", "psychopy"], "comments": [{"owner": {"reputation": 8720, "user_id": 3846213, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/5PGh1.jpg?s=128&g=1", "display_name": "Eli Korvigo", "link": "https://stackoverflow.com/users/3846213/eli-korvigo"}, "edited": false, "score": 0, "creation_date": 1489700497, "post_id": 42821043, "comment_id": 72799144, "body": "One day people will stop using global variables. I wish I could live long enough to witness that moment of divine grace."}], "answers": [{"tags": [], "owner": {"reputation": 1216, "user_id": 1717078, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ae8297158385059498bb76ae575bf3f0?s=128&d=identicon&r=PG", "display_name": "marisbest2", "link": "https://stackoverflow.com/users/1717078/marisbest2"}, "is_accepted": false, "score": 0, "last_activity_date": 1489613825, "creation_date": 1489613825, "answer_id": 42821166, "question_id": 42821043, "link": "https://stackoverflow.com/questions/42821043/how-do-i-check-accuracy-within-the-loop/42821166#42821166", "title": "How do I check accuracy within the loop?", "body": "<p>A trial is defined as picking a color, drawing, waiting for an input, and then recording the answer.\nHere's some pseudocode </p>\n\n<pre><code>def trial():\n    color = random.choice(colours)\n    # draw stuff\n    # set time start\n    # wait for key press\n    # check if key press correct\n    # print whether they were correct and the time\n    if enter pressed: trial()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 7241543, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dmNTT.jpg?s=128&g=1", "display_name": "Cognitive_Science_Rules", "link": "https://stackoverflow.com/users/7241543/cognitive-science-rules"}, "edited": false, "score": 0, "creation_date": 1489665362, "post_id": 42822180, "comment_id": 72776072, "body": "Thank you, this was very useful."}, {"owner": {"reputation": 3, "user_id": 7241543, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dmNTT.jpg?s=128&g=1", "display_name": "Cognitive_Science_Rules", "link": "https://stackoverflow.com/users/7241543/cognitive-science-rules"}, "edited": false, "score": 0, "creation_date": 1489670410, "post_id": 42822180, "comment_id": 72779719, "body": "Although now it completely freezes after I&#39;ve coded the definition and function in my script..."}], "tags": [], "owner": {"reputation": 4645, "user_id": 1297830, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8rH9k.jpg?s=128&g=1", "display_name": "Jonas Lindel&#248;v", "link": "https://stackoverflow.com/users/1297830/jonas-lindel%c3%b8v"}, "is_accepted": true, "score": 0, "last_activity_date": 1489618182, "creation_date": 1489618182, "answer_id": 42822180, "question_id": 42821043, "link": "https://stackoverflow.com/questions/42821043/how-do-i-check-accuracy-within-the-loop/42822180#42822180", "title": "How do I check accuracy within the loop?", "body": "\n\n<p>To make the code neat, first define a feedback function somewhere earlier in your script:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>feedback_text = visual.TextStim(win)\ndef show_feedback(feedback):\n    # Show feedback on screen\n    feedback_text.text = feedback\n    feedback_text.draw()\n    win.flip()\n\n    # Wait for key\n    event.waitKeys()\n</code></pre>\n\n<p>Following your code add something this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># Show feedback\nif accuracy == 1:\n    show_feedback('Correct! Well done. Press a key to continue...')\nelif accuracy == 0:\n    show_feedback('Wrong! Press a key to continue...')\n</code></pre>\n\n<p>... with the correct level of indentation. I always end up having some sort of function to show a message. In <code>show_feedback</code> you could also add something to quit the experiment:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>key = event.waitKeys()[0]  # get first key pressed\nif key == 'escape':\n    core.quit()\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7241543, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dmNTT.jpg?s=128&g=1", "display_name": "Cognitive_Science_Rules", "link": "https://stackoverflow.com/users/7241543/cognitive-science-rules"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 42822180, "answer_count": 2, "score": 0, "last_activity_date": 1489618182, "creation_date": 1489613391, "last_edit_date": 1489613689, "question_id": 42821043, "link": "https://stackoverflow.com/questions/42821043/how-do-i-check-accuracy-within-the-loop", "title": "How do I check accuracy within the loop?", "body": "<p>I am trying to code a function for my experiment which shows 2 labels above a a coloured rectangle in the middle. Subjects has to press either left or right to categorise the colour with one of the labels above.</p>\n\n<p>I would like to code within in the loop that if accuracy = 1, then the experiment should show an info-text saying their choice was correct, and vice versa if accuracy = 0. After they press enter to continue, it should go back to the original loop and then repeat itself. </p>\n\n<p>How do I do that?</p>\n\n<pre><code># make a function for one trial of colour practice\ndef con1_trial(self):\n    global trial\n    global key\n    trial += 1\n    target_colour = random.choice(colours) \n\n    # show one square with gouloboy colour in top right corner of screen\n    col3rec.setFillColor(target_colour)\n    col3rec.draw()\n    sinij_text.draw()\n    boy_text.draw()\n\n    # draw and flip\n    win.flip()\n\n    key, test_answer = event.waitKeys(keyList=['right', 'left', 'escape'], timeStamped = True)[0]\n    for colour_pair in colour_pairs:\n        if test_colour == colours[0] and key == \"left\":\n            accuracy = 1\n        elif test_colour == colours[1] and key == \"right\":\n            accuracy = 1\n        elif key == 'escape':\n            core.quit() \n        else: accuracy = 0\n\n    # records time in ms\n    rt = (test_answer - test_start)*1000\n    return accuracy, rt\n</code></pre>\n"}, {"tags": ["python", "numpy", "matrix", "scipy"], "comments": [{"owner": {"reputation": 5512, "user_id": 525169, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/074ef4d038759067691dbb7fb0a4d19f?s=128&d=identicon&r=PG&f=1", "display_name": "Praveen", "link": "https://stackoverflow.com/users/525169/praveen"}, "edited": false, "score": 0, "creation_date": 1489613918, "post_id": 42821037, "comment_id": 72754076, "body": "Try appending the sums of rows as a column first, to create an <code>(n, n+1)</code>-dimensional array, <i>then</i> append the sums of the columns as a row."}], "answers": [{"tags": [], "owner": {"reputation": 15962, "user_id": 7214344, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/09fedcad60ad0dba2834ffffdd52f686?s=128&d=identicon&r=PG&f=1", "display_name": "Miriam Farber", "link": "https://stackoverflow.com/users/7214344/miriam-farber"}, "is_accepted": true, "score": 2, "last_activity_date": 1489614508, "creation_date": 1489614508, "answer_id": 42821319, "question_id": 42821037, "link": "https://stackoverflow.com/questions/42821037/append-sum-of-rows-and-columns-to-matrix/42821319#42821319", "title": "Append sum of rows and columns to matrix", "body": "<p>You can do it like that:\nFirst let's generate some matrix <code>a</code></p>\n\n<pre><code>n=5\nk=4\na=np.zeros([n,k])\nfor i in range(n):\n    for j in range(k):\n        a[i][j]=i+2*j\n</code></pre>\n\n<p>Then run the following commands.\nThis adds the row:</p>\n\n<pre><code>a=np.append(a,[np.sum(a,axis=0)],axis=0)\n</code></pre>\n\n<p>This calculates the column</p>\n\n<pre><code>col=np.array([np.sum(a,axis=1)])\n</code></pre>\n\n<p>Finally we add the column</p>\n\n<pre><code>a=np.concatenate((a,col.T),axis=1)\nprint(a)\n</code></pre>\n\n<p>Note that this takes care of the (-1,-1)  entry as well.</p>\n"}], "owner": {"reputation": 287, "user_id": 5253844, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/357532d349c0447992013e9f8654bdca?s=128&d=identicon&r=PG&f=1", "display_name": "obtmind", "link": "https://stackoverflow.com/users/5253844/obtmind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1695, "favorite_count": 0, "accepted_answer_id": 42821319, "answer_count": 1, "score": 2, "last_activity_date": 1489614533, "creation_date": 1489613370, "last_edit_date": 1489614533, "question_id": 42821037, "link": "https://stackoverflow.com/questions/42821037/append-sum-of-rows-and-columns-to-matrix", "title": "Append sum of rows and columns to matrix", "body": "<p>I have (n,n) numpy array. I want to append a column vector where each element in it is the sum of the corresponding rows. I also append a row vector to the end of the matrix which is a sum of the corresponding columns. However, appending these 1D arrays is not compatible from a dimensional stand point. I want to append these, but have a matrix where the point (-1,-1) is the sum of either the last row or column (as they are equal).</p>\n\n<p>Example;</p>\n\n<pre><code>x = np.random.randint(5, size=(4, 4))\ncolumns = np.sum(x,axis=1)\nrows = np.sum(np.transpose(x),axis=1)\n</code></pre>\n"}, {"tags": ["python", "numpy", "matplotlib"], "answers": [{"tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": false, "score": 0, "last_activity_date": 1489652426, "creation_date": 1489652426, "answer_id": 42828654, "question_id": 42821036, "link": "https://stackoverflow.com/questions/42821036/python-surface-between-two-curves-matplotlib/42828654#42828654", "title": "Python, Surface between two curves, matplotlib", "body": "<p>You have too few points to create a reasonable grid.</p>\n\n<p>What you can do is using <code>plot_trisurf</code> to plot the points.</p>\n\n<pre><code>import matplotlib.pyplot as plt\nfrom mpl_toolkits.mplot3d import Axes3D\nimport numpy as np\n\nfig = plt.figure()\nax = fig.add_subplot(111, projection='3d')\n# this represents line 1\nx1 = [1,2,3]\ny1 = [1,4,4]\nz1 = [1,1,1]\n\n# this represents line 2\nx2 = [1,2,3,4]\ny2 = [1,4,5,7]\nz2 = [10,10,10,10]\n\n# Notice that the array representing line 1 and the array representing line 2 have different sizes\n# I am currently plotting the aforementioned '3D' lines as follows\nax.plot(x1,y1,z1)\nax.plot(x2,y2,z2)\n\nx=np.array([1,2,3, 1,2,3,4])\ny=np.array([1,4,4, 1,4,5,7])\nz=np.array([1,1,1, 10,10,10,10])\n\nax.plot_trisurf(x,y,z )\n\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/otseq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/otseq.png\" alt=\"enter image description here\"></a></p>\n\n<p>But the result is not really appealing.</p>\n"}], "owner": {"reputation": 409, "user_id": 4255748, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/aa8c721011cdb5119b8bbe34201b813b?s=128&d=identicon&r=PG&f=1", "display_name": "SFD", "link": "https://stackoverflow.com/users/4255748/sfd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 725, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489652426, "creation_date": 1489613367, "question_id": 42821036, "link": "https://stackoverflow.com/questions/42821036/python-surface-between-two-curves-matplotlib", "title": "Python, Surface between two curves, matplotlib", "body": "<p>I have two numpy arrays that represent a line in 3d space (note</p>\n\n<pre><code># this represents line 1\nx1 = [1,2,3]\ny1 = [1,4,4]\nz1 = [1,1,1]\n\n# this represents line 2\nx2 = [1,2,3,4]\ny2 = [1,4,5,7]\nz2 = [10,10,10]\n\n\n\n# Notice that the array representing line 1 and the array representing line 2 have different sizes\n# I am currently plotting the aforementioned '3D' lines as follows\nax.plot(x1,y1,z1)\nax.plot(x2,y2,z2)\n</code></pre>\n\n<p>I want to plot  the surface that connects these lines in 3D to get something like this: </p>\n\n<p><a href=\"https://pythonprogramming.net/static/images/dataviz/wire-frame-plane-tutorial-matplotlib-python-1024x682.png\" rel=\"nofollow noreferrer\">https://pythonprogramming.net/static/images/dataviz/wire-frame-plane-tutorial-matplotlib-python-1024x682.png</a></p>\n\n<p>How can I do this using matplotlib in python? </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "pygithub"], "answers": [{"tags": [], "owner": {"reputation": 15129, "user_id": 116891, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0c06e7b4ff0bfdb94b4493038bf70a0e?s=128&d=identicon&r=PG", "display_name": "Pat", "link": "https://stackoverflow.com/users/116891/pat"}, "is_accepted": false, "score": 0, "last_activity_date": 1520620208, "last_edit_date": 1520620208, "creation_date": 1520619748, "answer_id": 49199909, "question_id": 42821023, "link": "https://stackoverflow.com/questions/42821023/does-pygithub-have-a-way-to-make-conditional-calls/49199909#49199909", "title": "Does PyGithub have a way to make conditional calls?", "body": "<p>Not right now, unfortunately. EDIT: I could be wrong. Looks like <a href=\"https://github.com/PyGithub/PyGithub/pull/193\" rel=\"nofollow noreferrer\">Add Conditional Request and Data Persistence Support Alternative Solution by akfish \u00b7 Pull Request #193 \u00b7 PyGithub/PyGithub</a> might have added it.</p>\n\n<p>Here are some related issues for that project. Looks like they are looking for contributors. There's only 3 folks in \n <a href=\"https://github.com/orgs/PyGithub/people\" rel=\"nofollow noreferrer\">https://github.com/orgs/PyGithub/people</a> as of Mar 2018.</p>\n\n<ul>\n<li><a href=\"https://github.com/PyGithub/PyGithub/issues/26\" rel=\"nofollow noreferrer\">https://github.com/PyGithub/PyGithub/issues/26</a></li>\n<li><a href=\"https://github.com/PyGithub/PyGithub/issues/282\" rel=\"nofollow noreferrer\">https://github.com/PyGithub/PyGithub/issues/282</a></li>\n<li><a href=\"https://github.com/PyGithub/PyGithub/issues/536\" rel=\"nofollow noreferrer\">https://github.com/PyGithub/PyGithub/issues/536</a></li>\n</ul>\n\n<p>More generally, <a href=\"https://stackoverflow.com/questions/14886664/caching-github-api-calls\">Caching Github API calls</a> might be helpful to roll your own or use for implementing inside PyGithub.</p>\n"}], "owner": {"reputation": 3135, "user_id": 4372759, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6zzjk.jpg?s=128&g=1", "display_name": "flybonzai", "link": "https://stackoverflow.com/users/4372759/flybonzai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520620208, "creation_date": 1489613321, "question_id": 42821023, "link": "https://stackoverflow.com/questions/42821023/does-pygithub-have-a-way-to-make-conditional-calls", "title": "Does PyGithub have a way to make conditional calls?", "body": "<p>I notice that the <code>GitHub</code> API has an <code>eTag</code> which can be used to return changes since the tag.  <code>github3.py</code> has a way to do this, but I prefer <code>PyGithub</code> because it feels more intuitive.</p>\n\n<p>Does this feature exist?  If not, is there another recommended library?</p>\n"}, {"tags": ["python", "operator-precedence", "comparison-operators"], "comments": [{"owner": {"reputation": 3248, "user_id": 5707684, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/wrGFn.jpg?s=128&g=1", "display_name": "Elmex80s", "link": "https://stackoverflow.com/users/5707684/elmex80s"}, "edited": false, "score": 2, "creation_date": 1489613366, "post_id": 42821002, "comment_id": 72753825, "body": "This is how Python works. One of the many great features of this language if you ask me."}], "answers": [{"tags": [], "owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "is_accepted": false, "score": 3, "last_activity_date": 1489614001, "last_edit_date": 1489614001, "creation_date": 1489613608, "answer_id": 42821090, "question_id": 42821002, "link": "https://stackoverflow.com/questions/42821002/how-does-python-operator-precedence-work-with-double-comparisons/42821090#42821090", "title": "How does python operator precedence work with double comparisons?", "body": "<p><a href=\"https://docs.python.org/2/reference/expressions.html#comparisons\" rel=\"nofollow noreferrer\">From the docs</a>:</p>\n\n<blockquote>\n  <p>Unlike C, expressions like <code>a &lt; b &lt; c</code> have the interpretation that is conventional in mathematics</p>\n  \n  <p>Comparisons can be chained arbitrarily, e.g., <code>x &lt; y &lt;= z</code> is equivalent\n  to <code>x &lt; y and y &lt;= z</code>, except that <code>y</code> is evaluated only once (but in both\n  cases <code>z</code> is not evaluated at all when <code>x &lt; y</code> is found to be <code>false</code>).</p>\n</blockquote>\n\n<p>Therefore </p>\n\n<pre><code>-3 &lt; -2 &lt; -1  \n</code></pre>\n\n<p>is equivalent to </p>\n\n<pre><code>-3 &lt; -2 and -2 &lt; -1  # where -2 is evaluated only once\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1267, "user_id": 5884242, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9db94c0de7c11f711d2e3de3dceb2be7?s=128&d=identicon&r=PG&f=1", "display_name": "willwolfram18", "link": "https://stackoverflow.com/users/5884242/willwolfram18"}, "is_accepted": false, "score": 0, "last_activity_date": 1489613613, "creation_date": 1489613613, "answer_id": 42821092, "question_id": 42821002, "link": "https://stackoverflow.com/questions/42821002/how-does-python-operator-precedence-work-with-double-comparisons/42821092#42821092", "title": "How does python operator precedence work with double comparisons?", "body": "<p>It's stated in the <a href=\"https://docs.python.org/2/reference/expressions.html#comparisons\" rel=\"nofollow noreferrer\">documentation</a> that it is part of the language</p>\n"}, {"tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 7, "last_activity_date": 1489613640, "creation_date": 1489613640, "answer_id": 42821104, "question_id": 42821002, "link": "https://stackoverflow.com/questions/42821002/how-does-python-operator-precedence-work-with-double-comparisons/42821104#42821104", "title": "How does python operator precedence work with double comparisons?", "body": "<p>This is a <a href=\"https://docs.python.org/3/reference/expressions.html#comparisons\" rel=\"noreferrer\">chained comparison</a>. Instead of being left-associative like <code>(-3 &lt; -2) &lt; -1</code> or right-associative like <code>-3 &lt; (-2 &lt; -1)</code>, it's actually treated as</p>\n\n<pre><code>(-3 &lt; -2) and (-2 &lt; -1)\n</code></pre>\n\n<p>except that <code>-2</code> is evaluated at most once.</p>\n"}], "owner": {"reputation": 468, "user_id": 2441318, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/c92d1e26a6948ba6b608d401fd742d5a?s=128&d=identicon&r=PG", "display_name": "fffred", "link": "https://stackoverflow.com/users/2441318/fffred"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "closed_date": 1489651600, "accepted_answer_id": 42821104, "answer_count": 3, "score": 2, "last_activity_date": 1489614001, "creation_date": 1489613245, "question_id": 42821002, "link": "https://stackoverflow.com/questions/42821002/how-does-python-operator-precedence-work-with-double-comparisons", "closed_reason": "Duplicate", "title": "How does python operator precedence work with double comparisons?", "body": "<p><code>-3&lt;-2&lt;-1</code> returns <code>True</code>.</p>\n\n<p>However I would expect it interpreted as </p>\n\n<pre><code>(-3&lt;-2)&lt;-1\nTrue&lt;-1\n1&lt;-1\nFalse\n</code></pre>\n\n<p>How is that possible ?</p>\n"}, {"tags": ["python", "django"], "answers": [{"tags": [], "owner": {"reputation": 4385, "user_id": 7717583, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/jmyAH.jpg?s=128&g=1", "display_name": "Xen_mar", "link": "https://stackoverflow.com/users/7717583/xen-mar"}, "is_accepted": false, "score": 0, "last_activity_date": 1489614393, "creation_date": 1489614393, "answer_id": 42821286, "question_id": 42820932, "link": "https://stackoverflow.com/questions/42820932/reverse-for-with-arguments-and-keyword-arguments-not-found/42821286#42821286", "title": "Reverse for &#39;###&#39; with arguments &#39;(&#39;&#39;,)&#39; and keyword arguments &#39;{}&#39; not found", "body": "<p>Thank you so much for the answer! I cought the error. It was a faulty .html doc also pointing to my view. </p>\n\n<p>I was looking for it for over 3 hours and ended up not going to the gym ... evil python! </p>\n"}], "owner": {"reputation": 4385, "user_id": 7717583, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/jmyAH.jpg?s=128&g=1", "display_name": "Xen_mar", "link": "https://stackoverflow.com/users/7717583/xen-mar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1489614393, "creation_date": 1489613023, "question_id": 42820932, "link": "https://stackoverflow.com/questions/42820932/reverse-for-with-arguments-and-keyword-arguments-not-found", "title": "Reverse for &#39;###&#39; with arguments &#39;(&#39;&#39;,)&#39; and keyword arguments &#39;{}&#39; not found", "body": "<p>The error im having is relatively widely discussed. I went through all of the privious topics but no solution seems to apply. The error is: </p>\n\n<blockquote>\n  <p>\"Reverse for 'favorite' with arguments '('',)' and keyword arguments\n  '{}' not found. 1 pattern(s) tried:\n  [u'music/(?P[0-9]+)/favorite/$'] [15/Mar/2017 22:09:49] \"GET\n  /music/ HTTP/1.1\" 500 119546\"</p>\n</blockquote>\n\n<p>URL PATTERN</p>\n\n<pre><code>app_name = 'music'\nurlpatterns = [\nurl(r'^(?P&lt;album_id&gt;[0-9]+)/favorite/$', views.favorite, name='favorite'),\n]\n</code></pre>\n\n<p>TEMPLATE: </p>\n\n<pre><code>&lt;form action=\"{% url 'music:favorite' album.id %}\" method=\"POST\"&gt;\n</code></pre>\n\n<p>VIEW: <br>\n   <code>def favorite(request, album_id):</code></p>\n\n<p>As you can see, I created the namespace, but django is still unable to revers the url. Can it be related to be direcotory of the template?</p>\n"}, {"tags": ["python", "command-prompt"], "comments": [{"owner": {"reputation": 809, "user_id": 7659430, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sWGmO.png?s=128&g=1", "display_name": "simlev", "link": "https://stackoverflow.com/users/7659430/simlev"}, "edited": false, "score": 0, "creation_date": 1489615055, "post_id": 42820914, "comment_id": 72754609, "body": "Maybe the perl version is not exactly the same."}, {"owner": {"reputation": 127, "user_id": 6388442, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ea04940de943380ca237f30c669078b1?s=128&d=identicon&r=PG", "display_name": "gusg21", "link": "https://stackoverflow.com/users/6388442/gusg21"}, "reply_to_user": {"reputation": 809, "user_id": 7659430, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sWGmO.png?s=128&g=1", "display_name": "simlev", "link": "https://stackoverflow.com/users/7659430/simlev"}, "edited": false, "score": 0, "creation_date": 1489615465, "post_id": 42820914, "comment_id": 72754793, "body": "What do you mean?"}, {"owner": {"reputation": 809, "user_id": 7659430, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sWGmO.png?s=128&g=1", "display_name": "simlev", "link": "https://stackoverflow.com/users/7659430/simlev"}, "edited": false, "score": 0, "creation_date": 1489615764, "post_id": 42820914, "comment_id": 72754943, "body": "Ops, I mean Python: Cygwin installs its own python executable, so scripts running inside a Cygwin terminal will probably use that. What python executable is used by your scripts running inside a Windows command prompt? If you make them use a different one, possibly a slightly different version, you could check the version and know which environment you are in."}, {"owner": {"reputation": 23589, "user_id": 6622817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93f66cc4703b66b835cf13dfeee21e7b?s=128&d=identicon&r=PG&f=1", "display_name": "abccd", "link": "https://stackoverflow.com/users/6622817/abccd"}, "edited": false, "score": 0, "creation_date": 1489616105, "post_id": 42820914, "comment_id": 72755104, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/22571333/how-can-i-know-if-my-python-script-is-running-using-cygwin-or-windows-shell\">How can I know if my python script is running? (using Cygwin or Windows shell)</a>"}, {"owner": {"reputation": 127, "user_id": 6388442, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ea04940de943380ca237f30c669078b1?s=128&d=identicon&r=PG", "display_name": "gusg21", "link": "https://stackoverflow.com/users/6388442/gusg21"}, "edited": false, "score": 1, "creation_date": 1489620433, "post_id": 42820914, "comment_id": 72756806, "body": "My copy of Cygwin uses my Windows&#39; Python. And I don&#39;t just want to detect Cygwin, I want to detect specifically Windows Command Prompt."}, {"owner": {"reputation": 809, "user_id": 7659430, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sWGmO.png?s=128&g=1", "display_name": "simlev", "link": "https://stackoverflow.com/users/7659430/simlev"}, "edited": false, "score": 0, "creation_date": 1489641083, "post_id": 42820914, "comment_id": 72762373, "body": "My suggestion is to <b>create</b> a difference you can detect. Either <b>make</b> the script use a slightly different Python version, or create a file before launching the script as abccd suggests, or simply call the script with an additional parameter, e.g. w from cmd and c from cygwin. I can&#39;t think of any drawbacks."}, {"owner": {"reputation": 127, "user_id": 6388442, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ea04940de943380ca237f30c669078b1?s=128&d=identicon&r=PG", "display_name": "gusg21", "link": "https://stackoverflow.com/users/6388442/gusg21"}, "edited": false, "score": 0, "creation_date": 1489667906, "post_id": 42820914, "comment_id": 72777900, "body": "But I want this to work universally. The user shouldn&#39;t have to do anything besides run it. If it&#39;s just not possible, I&#39;m OK with that."}], "answers": [{"comments": [{"owner": {"reputation": 560, "user_id": 803690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9697d5835ca4e049a1cfcb2b0a23800d?s=128&d=identicon&r=PG", "display_name": "jayaram S", "link": "https://stackoverflow.com/users/803690/jayaram-s"}, "edited": false, "score": 0, "creation_date": 1495033546, "post_id": 44028421, "comment_id": 75083554, "body": "actually this works better   <code>from sys import platform as _platform</code>  <code>_platform == &quot;cygwin&quot;</code>"}, {"owner": {"reputation": 127, "user_id": 6388442, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ea04940de943380ca237f30c669078b1?s=128&d=identicon&r=PG", "display_name": "gusg21", "link": "https://stackoverflow.com/users/6388442/gusg21"}, "edited": false, "score": 0, "creation_date": 1495370585, "post_id": 44028421, "comment_id": 75214662, "body": "Thank you! I solved the problem another way, but this works exactly like I wanted."}], "tags": [], "owner": {"reputation": 560, "user_id": 803690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9697d5835ca4e049a1cfcb2b0a23800d?s=128&d=identicon&r=PG", "display_name": "jayaram S", "link": "https://stackoverflow.com/users/803690/jayaram-s"}, "is_accepted": true, "score": 2, "last_activity_date": 1495033109, "creation_date": 1495033109, "answer_id": 44028421, "question_id": 42820914, "link": "https://stackoverflow.com/questions/42820914/check-if-running-in-windows-command-prompt-vs-cygwin-python/44028421#44028421", "title": "Check if running in Windows Command Prompt vs Cygwin python", "body": "<p>Have you tried </p>\n\n<pre><code>import platform\nplatform.system()\n</code></pre>\n\n<p>On my system it outputs </p>\n\n<p><code>CYGWIN_NT-10.0</code></p>\n\n<p>Hope this helps</p>\n"}], "owner": {"reputation": 127, "user_id": 6388442, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ea04940de943380ca237f30c669078b1?s=128&d=identicon&r=PG", "display_name": "gusg21", "link": "https://stackoverflow.com/users/6388442/gusg21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1235, "favorite_count": 0, "accepted_answer_id": 44028421, "answer_count": 1, "score": 1, "last_activity_date": 1591799032, "creation_date": 1489612956, "last_edit_date": 1489668222, "question_id": 42820914, "link": "https://stackoverflow.com/questions/42820914/check-if-running-in-windows-command-prompt-vs-cygwin-python", "title": "Check if running in Windows Command Prompt vs Cygwin python", "body": "<p>Is there a way to check if my python script is running in <em>Windows Command Prompt</em>, vs Cygwin? Using <code>os.name</code> doesn't work because Cygwin on Windows still returns \"nt\". I want to check the command prompt's name or type from a shell script so I can differentiate between Command Prompt and Cygwin.</p>\n"}, {"tags": ["python", "design-patterns"], "comments": [{"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1489613272, "post_id": 42820913, "comment_id": 72753791, "body": "The third option is the one I use.  What&#39;s not to like?"}], "answers": [{"tags": [], "owner": {"reputation": 149, "user_id": 2639085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb8ed70398749c3db7fd18a2e8b817e0?s=128&d=identicon&r=PG", "display_name": "lzmartinico", "link": "https://stackoverflow.com/users/2639085/lzmartinico"}, "is_accepted": false, "score": 0, "last_activity_date": 1489613549, "last_edit_date": 1495541366, "creation_date": 1489613549, "answer_id": 42821077, "question_id": 42820913, "link": "https://stackoverflow.com/questions/42820913/how-to-check-python-function-output-and-assign-it-to-variable-without-executing/42821077#42821077", "title": "How to check python function output and assign it to variable without executing the function twice?", "body": "<p>In some languages you are able to assign a variable as part of the condition block, but in Python that's not possible (see <a href=\"https://stackoverflow.com/questions/2603956/can-we-have-assignment-in-a-condition\">Can we have assignment in a condition?</a> )</p>\n"}, {"tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": false, "score": 3, "last_activity_date": 1489614658, "last_edit_date": 1489614658, "creation_date": 1489613625, "answer_id": 42821099, "question_id": 42820913, "link": "https://stackoverflow.com/questions/42820913/how-to-check-python-function-output-and-assign-it-to-variable-without-executing/42821099#42821099", "title": "How to check python function output and assign it to variable without executing the function twice?", "body": "<p>The <a href=\"https://docs.python.org/3/library/functools.html#functools.lru_cache\" rel=\"nofollow noreferrer\"><code>functools.lru_cache</code></a> can help you sometimes:</p>\n\n<blockquote>\n  <p>Decorator to wrap a function with a memoizing callable that saves up to the maxsize most recent calls. It can save time when an expensive or I/O bound function is periodically called with the same arguments.</p>\n</blockquote>\n\n<pre><code>&gt;&gt;&gt; from functools import lru_cache\n&gt;&gt;&gt; from time import sleep\n&gt;&gt;&gt; @lru_cache()\n... def expensive_potato():\n...     print('reticulating splines...')\n...     sleep(2)\n...     return 'potato'\n... \n&gt;&gt;&gt; expensive_potato()\nreticulating splines...\n'potato'\n&gt;&gt;&gt; expensive_potato()\n'potato'\n</code></pre>\n\n<p>That's new in Python 3.2.  Easy to write your own decorator, if you're on old Python.  </p>\n\n<p>If you're working with methods/attributes on a class, <a href=\"https://github.com/pydanny/cached-property\" rel=\"nofollow noreferrer\"><code>cached_property</code></a> is useful.  </p>\n"}], "owner": {"reputation": 639, "user_id": 2322869, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/822471d05ee2f022f929267067693525?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/2322869/george"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1489614658, "creation_date": 1489612951, "question_id": 42820913, "link": "https://stackoverflow.com/questions/42820913/how-to-check-python-function-output-and-assign-it-to-variable-without-executing", "title": "How to check python function output and assign it to variable without executing the function twice?", "body": "<p>Let's say I want to do the following</p>\n\n<pre><code>def calculate_something_extremally_resource_consuming():\n    # execute some api calls and make insane calculations\n    if calculations_sucessfull:\n        return result\n</code></pre>\n\n<p>meanwhile somewhere else in the project:</p>\n\n<pre><code>if calculate_something_extremally_resource_consuming():\n    a = calculate_something_extremally_resource_consuming()\n    etc...\n</code></pre>\n\n<p>This looks like the heavy function will be called twice, which is really bad. Another option I can imagine:</p>\n\n<pre><code>a = calculate_something_extremally_resource_consuming()\nif a:\n    etc...\n</code></pre>\n\n<p>Maybe there is a more elegant way?</p>\n"}, {"tags": ["python", "django", "wagtail", "modeladmin"], "comments": [{"owner": {"reputation": 562, "user_id": 7420836, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J1IcP.png?s=128&g=1", "display_name": "TomRavn", "link": "https://stackoverflow.com/users/7420836/tomravn"}, "edited": false, "score": 0, "creation_date": 1566938836, "post_id": 42820895, "comment_id": 101810586, "body": "Thank both of you for solution, it is only pity that inspect view break nice looking wagtail panels, it would be nice if there would be possibility to disable all fields, not break them to text. Anyway thank you."}], "answers": [{"comments": [{"owner": {"reputation": 313, "user_id": 3186190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzmtx.jpg?s=128&g=1", "display_name": "Cristi&#225;n", "link": "https://stackoverflow.com/users/3186190/cristi%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1489693842, "post_id": 42821742, "comment_id": 72795938, "body": "Thanks! I also had to extend <code>user_can_create, user_can_edit_obj, user_can_delete_obj</code> for achieving the inspect view only. I&#39;ve edited the question with the complete answer."}, {"owner": {"reputation": 1274, "user_id": 7668563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b7037e192e7a0505b868c8861e28878?s=128&d=identicon&r=PG", "display_name": "Lo&#239;c Teixeira", "link": "https://stackoverflow.com/users/7668563/lo%c3%afc-teixeira"}, "reply_to_user": {"reputation": 313, "user_id": 3186190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzmtx.jpg?s=128&g=1", "display_name": "Cristi&#225;n", "link": "https://stackoverflow.com/users/3186190/cristi%c3%a1n"}, "edited": false, "score": 1, "creation_date": 1489694582, "post_id": 42821742, "comment_id": 72796390, "body": "Yes, I had initially included those methods in the answer but removed them so instead of forcing add/edit/delete to always be <code>False</code>, they can be set accordingly in the roles. The &quot;drawback&quot; to that is that the admins will have access regardless, but this allow to define multiple roles with different levels of control. But you&#39;re right, your question was about &quot;unconditionally&quot; make it read only and I should have included them."}], "tags": [], "owner": {"reputation": 1274, "user_id": 7668563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b7037e192e7a0505b868c8861e28878?s=128&d=identicon&r=PG", "display_name": "Lo&#239;c Teixeira", "link": "https://stackoverflow.com/users/7668563/lo%c3%afc-teixeira"}, "is_accepted": true, "score": 6, "last_activity_date": 1504825189, "last_edit_date": 1504825189, "creation_date": 1489616225, "answer_id": 42821742, "question_id": 42820895, "link": "https://stackoverflow.com/questions/42820895/wagtail-modeladmin-read-only/42821742#42821742", "title": "Wagtail ModelAdmin read only", "body": "<p>Sadly, you need <a href=\"https://github.com/wagtail/wagtail/blob/58032420e6e3bf251d9864369be9ae637aa12b9f/wagtail/contrib/modeladmin/helpers.py#L116\" rel=\"noreferrer\">at least one</a> of the <code>add</code>, <code>change</code> or <code>delete</code> permission on that model (set within the roles) for it to show up.</p>\n\n<p>The way around that is to provide a <a href=\"http://docs.wagtail.io/en/v1.9/reference/contrib/modeladmin/primer.html#modeladmin-permission-helper-class\" rel=\"noreferrer\">custom permission helper class</a> to your <code>ModelAdmin</code> and always allow listing (and still allow add/change/delete to be set within the roles):</p>\n\n<pre><code>class MyPermissionHelper(wagtail.contrib.modeladmin.helpers.PermissionHelper):\n    def user_can_list(self, user):\n        return True  # Or any logic related to the user.\n\nclass MyModelAdmin(wagtail.contrib.modeladmin.options.ModelAdmin):\n    model = MyModel\n    permission_helper_class = MyPermissionHelper\n\nmodeladmin_register(wagtail.contrib.modeladmin.options.MyModelAdmin)\n</code></pre>\n"}], "owner": {"reputation": 313, "user_id": 3186190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzmtx.jpg?s=128&g=1", "display_name": "Cristi&#225;n", "link": "https://stackoverflow.com/users/3186190/cristi%c3%a1n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1600, "favorite_count": 1, "accepted_answer_id": 42821742, "answer_count": 1, "score": 5, "last_activity_date": 1504825189, "creation_date": 1489612886, "last_edit_date": 1489693668, "question_id": 42820895, "link": "https://stackoverflow.com/questions/42820895/wagtail-modeladmin-read-only", "title": "Wagtail ModelAdmin read only", "body": "<p>Using Wagtails Modeladmin: </p>\n\n<p><strong>Is there any way to disable edit &amp; delete options leaving only the inspect view?</strong></p>\n\n<p>A possible approach that I can think of, is extending the template, removing the edit &amp; delete buttons and then somehow disable the edit and delete view. </p>\n\n<p>Is there any cleaner approach?</p>\n\n<hr>\n\n<p>EDIT: Thanks to Loic answer I could figure out. </p>\n\n<p>The <code>PermissionHelper</code> <a href=\"https://github.com/wagtail/wagtail/blob/0e9c255b034ce4bdef5b265021833790fd813ed9/wagtail/contrib/modeladmin/helpers.py#L157\" rel=\"noreferrer\">source code</a> was also very helpful to figure out the correct method to override.</p>\n\n<p><strong>Complete answer for only showing inspect view</strong></p>\n\n<pre><code>class ValidationPermissionHelper(PermissionHelper):\n    def user_can_list(self, user):\n        return True  \n    def user_can_create(self, user):\n        return False\n    def user_can_edit_obj(self, user, obj):\n        return False\n    def user_can_delete_obj(self, user, obj):\n        return False\n\nclass ValidationAdmin(ModelAdmin):\n    model = Validation\n    permission_helper_class = ValidationPermissionHelper\n    inspect_view_enabled = True\n    [...]\n</code></pre>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "is_accepted": false, "score": 1, "last_activity_date": 1489613068, "last_edit_date": 1592644375, "creation_date": 1489613068, "answer_id": 42820947, "question_id": 42820860, "link": "https://stackoverflow.com/questions/42820860/python-logger-object-is-not-callable/42820947#42820947", "title": "Python Logger object is not callable", "body": "<p>See the <a href=\"https://docs.python.org/2/library/logging.html\" rel=\"nofollow noreferrer\">logging</a> docs:</p>\n<p>You have to use a function, you can't just call Logger:</p>\n<blockquote>\n<p>Logger.<strong>info</strong>(msg, *args, **kwargs)</p>\n<p>Logs a message with level INFO on\nthis logger. The arguments are interpreted as for debug().</p>\n</blockquote>\n<p>or</p>\n<blockquote>\n<p>Logger.<strong>warning</strong>(msg, *args, **kwargs)</p>\n<p>Logs a message with level WARNING on this logger. The arguments are &gt;interpreted as for debug().</p>\n</blockquote>\n<p>so instead, do:</p>\n<pre><code>log.info(&quot;Test info level logging...&quot;)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 292, "user_id": 7948740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t8pBi.jpg?s=128&g=1", "display_name": "Prateek Sen", "link": "https://stackoverflow.com/users/7948740/prateek-sen"}, "is_accepted": false, "score": 6, "last_activity_date": 1536667256, "creation_date": 1536667256, "answer_id": 52275461, "question_id": 42820860, "link": "https://stackoverflow.com/questions/42820860/python-logger-object-is-not-callable/52275461#52275461", "title": "Python Logger object is not callable", "body": "<p><code>log(\"Hello\")</code></p>\n\n<p>This is wrong.\nCorrect is </p>\n\n<pre><code>log.info(\"Hello\")\n</code></pre>\n\n<p>log must be printed with logging level i.e. info/error/warning</p>\n"}], "owner": {"reputation": 131, "user_id": 5982354, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f1d210e79c2c1705b89db47dd3b6ea25?s=128&d=identicon&r=PG&f=1", "display_name": "Snort5121", "link": "https://stackoverflow.com/users/5982354/snort5121"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5414, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1536667256, "creation_date": 1489612715, "question_id": 42820860, "link": "https://stackoverflow.com/questions/42820860/python-logger-object-is-not-callable", "title": "Python Logger object is not callable", "body": "<p>I'm trying to write a module to use it in different scripts</p>\n\n<pre><code>import logging\nfrom logging.handlers import RotatingFileHandler\n\n\n_logger_name = \"Nagios\"\n_print_format = \"%(asctime)s - %(levelname)s - %(message)s\"\n_level = logging.DEBUG\n\nclass Log():\n\n\n    def __init__(self,log_file,logger_name=_logger_name,level=_level):\n        self.log_file = log_file\n        self.logger_name = logger_name\n        self.level = level\n\n    def getLog(self):\n\n        \"\"\"\n        Return the logging object\n\n        \"\"\"\n       _logger = logging.getLogger(self.logger_name)\n       _logger.setLevel(self.level)\n       _logger.addHandler(self._rotateLog())\n\n       return _logger\n\n    def _rotateLog(self):\n\n       \"\"\"\n       Rotating the log files if it exceed the size\n       \"\"\"\n       rh = RotatingFileHandler(self.log_file,\n                             maxBytes=20*1024*1024, backupCount=2)\n       formatter = logging.Formatter(_print_format)\n       rh.setFormatter(formatter)\n       return rh\n\nlog = Log(\"kdfnknf\").getLog()\nlog(\"hello\")\n</code></pre>\n\n<p>I see the following error:</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"nagiosLog.py\", line 45, in &lt;module&gt;\n  log(\"hello\")\nTypeError: 'Logger' object is not callable\n</code></pre>\n\n<p>Any idea why I'm getting this error, </p>\n\n<p>When debugged using pdb I do see it returns the object and printing the dir(log) I don't see the Logger module in it.</p>\n\n<p>Am I missing something here          </p>\n"}, {"tags": ["python", "kivy"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 7648232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e775069cddac65227ef0d383c888d6b?s=128&d=identicon&r=PG&f=1", "display_name": "m.adam", "link": "https://stackoverflow.com/users/7648232/m-adam"}, "edited": false, "score": 0, "creation_date": 1489697485, "post_id": 42821155, "comment_id": 72797849, "body": "how would you make the rectangle adjust it self according to the size of the screen."}, {"owner": {"reputation": 7857, "user_id": 1542900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00aff6b6266554a0909a07844cbb98ec?s=128&d=identicon&r=PG&f=1", "display_name": "Nykakin", "link": "https://stackoverflow.com/users/1542900/nykakin"}, "reply_to_user": {"reputation": 25, "user_id": 7648232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e775069cddac65227ef0d383c888d6b?s=128&d=identicon&r=PG&f=1", "display_name": "m.adam", "link": "https://stackoverflow.com/users/7648232/m-adam"}, "edited": false, "score": 0, "creation_date": 1489698733, "post_id": 42821155, "comment_id": 72798436, "body": "Added an example."}, {"owner": {"reputation": 7857, "user_id": 1542900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00aff6b6266554a0909a07844cbb98ec?s=128&d=identicon&r=PG&f=1", "display_name": "Nykakin", "link": "https://stackoverflow.com/users/1542900/nykakin"}, "reply_to_user": {"reputation": 25, "user_id": 7648232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e775069cddac65227ef0d383c888d6b?s=128&d=identicon&r=PG&f=1", "display_name": "m.adam", "link": "https://stackoverflow.com/users/7648232/m-adam"}, "edited": false, "score": 0, "creation_date": 1489762600, "post_id": 42821155, "comment_id": 72827515, "body": "You can mark the answer as correct as described in <a href=\"http://stackoverflow.com/tour\">tour</a>."}, {"owner": {"reputation": 125, "user_id": 9617393, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7LNlj.jpg?s=128&g=1", "display_name": "BerryMan", "link": "https://stackoverflow.com/users/9617393/berryman"}, "edited": false, "score": 0, "creation_date": 1543570088, "post_id": 42821155, "comment_id": 93974717, "body": "Sadly, this doesn&#39;t work if the label is in a popup, since it calculates the location from the root screen. Any idea how to adjust that?"}, {"owner": {"reputation": 7857, "user_id": 1542900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00aff6b6266554a0909a07844cbb98ec?s=128&d=identicon&r=PG&f=1", "display_name": "Nykakin", "link": "https://stackoverflow.com/users/1542900/nykakin"}, "reply_to_user": {"reputation": 125, "user_id": 9617393, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7LNlj.jpg?s=128&g=1", "display_name": "BerryMan", "link": "https://stackoverflow.com/users/9617393/berryman"}, "edited": false, "score": 0, "creation_date": 1543576096, "post_id": 42821155, "comment_id": 93978006, "body": "@BerryMan using <code>on_pos</code> instead of <code>on_size</code> works for me <a href=\"https://pastebin.com/k2krxbMg\" rel=\"nofollow noreferrer\">pastebin.com/k2krxbMg</a>"}], "tags": [], "owner": {"reputation": 7857, "user_id": 1542900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00aff6b6266554a0909a07844cbb98ec?s=128&d=identicon&r=PG&f=1", "display_name": "Nykakin", "link": "https://stackoverflow.com/users/1542900/nykakin"}, "is_accepted": true, "score": 7, "last_activity_date": 1489698717, "last_edit_date": 1489698717, "creation_date": 1489613764, "answer_id": 42821155, "question_id": 42820798, "link": "https://stackoverflow.com/questions/42820798/how-to-add-background-colour-to-a-label-in-kivy/42821155#42821155", "title": "how to add background colour to a Label in Kivy?", "body": "<p>Well, <code>Rectangle</code> position and size should rather match <code>Label</code> position and size:</p>\n\n<pre><code>from kivy.app import App\nfrom kivy.uix.floatlayout import FloatLayout\nfrom kivy.uix.label import Label\nfrom kivy.graphics import Color, Rectangle\n\nclass MyApp(App):\n    def build(self):\n        layout = FloatLayout()\n        label = Label(\n            text='test',\n            pos=(20, 20),\n            size=(180, 100),\n            size_hint=(None, None))\n        with label.canvas:\n            Color(0, 1, 0, 0.25)\n            Rectangle(pos=label.pos, size=label.size)\n\n        layout.add_widget(label)\n\n        return layout\n\n\nif __name__ == '__main__':\n    MyApp().run()\n</code></pre>\n\n<p>Version with auto-adjusting:</p>\n\n<pre><code>from kivy.app import App\nfrom kivy.uix.floatlayout import FloatLayout\nfrom kivy.uix.label import Label\nfrom kivy.graphics import Color, Rectangle\n\nclass MyLabel(Label):\n    def on_size(self, *args):\n        self.canvas.before.clear()\n        with self.canvas.before:\n            Color(0, 1, 0, 0.25)\n            Rectangle(pos=self.pos, size=self.size)\n\nclass MyApp(App):\n    def build(self):\n        layout = FloatLayout()\n        label = MyLabel(\n            text='test',\n            pos=(20, 20),\n            size_hint=(0.5, 0.5))\n        layout.add_widget(label)\n        return layout\n\n\nif __name__ == '__main__':\n    MyApp().run()\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 7648232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e775069cddac65227ef0d383c888d6b?s=128&d=identicon&r=PG&f=1", "display_name": "m.adam", "link": "https://stackoverflow.com/users/7648232/m-adam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17822, "favorite_count": 3, "accepted_answer_id": 42821155, "answer_count": 1, "score": 2, "last_activity_date": 1489698717, "creation_date": 1489612439, "last_edit_date": 1489613876, "question_id": 42820798, "link": "https://stackoverflow.com/questions/42820798/how-to-add-background-colour-to-a-label-in-kivy", "title": "how to add background colour to a Label in Kivy?", "body": "<p>Using Kivy, how can you change the background colour of a label in Python and not by using the Kv language?</p>\n\n<p>I have tried this:</p>\n\n<pre><code>with self.canvas:\n    Color(1., 0, 0)\n    Rectangle(pos=(10, 10), size=(500, 500))\n</code></pre>\n\n<p>However this just creates a red square on the bottom left of the screen. It would be really useful if there was a alternative to the idea above and I could change the background colour of a label using python and not kv language.</p>\n"}, {"tags": ["python", "matlab", "computer-science", "montecarlo", "data-science"], "comments": [{"owner": {"reputation": 11128, "user_id": 425458, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/m6jHW.png?s=128&g=1", "display_name": "tel", "link": "https://stackoverflow.com/users/425458/tel"}, "edited": false, "score": 1, "creation_date": 1489613502, "post_id": 42820741, "comment_id": 72753882, "body": "Can you clarify <i>exactly</i> what output you&#39;re expecting your script to produce? There don&#39;t seem to be any outright errors"}], "answers": [{"tags": [], "owner": {"reputation": 15962, "user_id": 7214344, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/09fedcad60ad0dba2834ffffdd52f686?s=128&d=identicon&r=PG&f=1", "display_name": "Miriam Farber", "link": "https://stackoverflow.com/users/7214344/miriam-farber"}, "is_accepted": false, "score": 1, "last_activity_date": 1489630489, "last_edit_date": 1489630489, "creation_date": 1489613254, "answer_id": 42821006, "question_id": 42820741, "link": "https://stackoverflow.com/questions/42820741/scientific-python-array-syntax/42821006#42821006", "title": "Scientific python array syntax", "body": "<p>You can create matrix in python using numpy in the following way:</p>\n\n<pre><code>n=5\nk=4\na=np.zeros([n,k])\nfor i in range(n):\n    for j in range(k):\n        a[i,j]=i+j\nprint(a)\n</code></pre>\n\n<p>The result is</p>\n\n<pre><code>[[ 0.  1.  2.  3.]\n [ 1.  2.  3.  4.]\n [ 2.  3.  4.  5.]\n [ 3.  4.  5.  6.]\n [ 4.  5.  6.  7.]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7977, "user_id": 3604159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e32946c257cb4802dea738db1ecbf0c6?s=128&d=identicon&r=PG&f=1", "display_name": "TheBlackCat", "link": "https://stackoverflow.com/users/3604159/theblackcat"}, "is_accepted": true, "score": 1, "last_activity_date": 1489630378, "creation_date": 1489630378, "answer_id": 42824124, "question_id": 42820741, "link": "https://stackoverflow.com/questions/42820741/scientific-python-array-syntax/42824124#42824124", "title": "Scientific python array syntax", "body": "<p>Short version:</p>\n\n<p>This is the exact equivalent of your MATLAB code in Python</p>\n\n<pre><code>a = np.zeros([N, 9])\nfor i in range(N):\n    for j in range(9):\n        a[i,j]= and so on\n</code></pre>\n\n<p>The only major difference is that you need to define the array beforehand, which you really should be doing in MATLAB as well if you want your code to have reasonable performance.</p>\n\n<p>However, if you don't know the size beforehand, you can use lists in Python, then convert to a numpy array at the end.  This will be much, much faster than your MATLAB example for large arrays because of the internals of how lists and matrices/arrays are handled:</p>\n\n<pre><code>a = []\nfor i in range(N):\n    a.append([])\n    for j in range(9):\n        a[-1].append( and so on\na = np.array(a)\n</code></pre>\n\n<p>The <code>[-1]</code> means (the \"last element of <code>a</code>\", and the <code>append</code> puts whatever is inside the parentheses at the end of the list.  So. <code>a[-1].append(foo)</code> means \"put <code>foo</code> inside whatever is in the last element of <code>a</code>.</p>\n\n<p>Long version:</p>\n\n<p>Your MATLAB code will work in Python roughly the same way, but there are a few notable differences you need to take into account.</p>\n\n<p>First, assigning to an index larger than an existing array/matrix works in MATLAB but not in numpy.  So if you have a size <code>[5, 5]</code> array/matrix, in MATLAB you can assign to element <code>[5, 6]</code>, but you can't in numpy.  This means in MATLAB you can start with an empty array while in numpy you have to set the array size beforehand.  Note that MATLAB matrices can't actually be resized, you are actually making a new matrix each time through the loop and copying all the data to it.  This is very slow, which is why MATLAB warns you to pre-allocate the array.  Numpy just doesn't pretend to be able to resize arrays, so you need to be more explicit about doing the copy, pre-allocate, or use a list (which is resizable).</p>\n\n<p>Second, similarly, MATLAB doesn't require you define the matrix before you use it, while numpy does.  The reason for this is because traditionally MATLAB has three data structures (matrices, cell arrays, and structs), each with their own style of indexing.  So MATLAB can figure out what sort of data structure you want to create just from how you index it.  Python only has one style of indexing, so it can't make this sort of guess. </p>\n\n<p>Third, using a single array size in MATLAB with some (but not all) fucntions creates a 2D square matrix with each dimension of that size, while in numpy it creates a 1D array.  I am not sure from your code if that is what you are expecting or not.  Frankly I have no idea why MATLAB works this way.</p>\n\n<p>Fourth, numpy arrays can have any number of dimensions, 0 (scalars), 1 (vectors), 2, 3, 4, etc.  MATLAB matrices, on the other hand, must have at least two dimensions.  This can cause some unexpected differences, like transposing doing nothing for numpy vectors.</p>\n\n<p>As for your Python code, without you saying what is going wrong I can't tell you how to fix it.  But hopefully I have given you enough info to do it yourself.</p>\n"}, {"tags": [], "owner": {"reputation": 47, "user_id": 5927057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76caf0627ced917643a892cfd7500a80?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Esp", "link": "https://stackoverflow.com/users/5927057/gabriel-esp"}, "is_accepted": false, "score": 0, "last_activity_date": 1489695198, "creation_date": 1489695198, "answer_id": 42843928, "question_id": 42820741, "link": "https://stackoverflow.com/questions/42820741/scientific-python-array-syntax/42843928#42843928", "title": "Scientific python array syntax", "body": "<p>So i've adopted your answers and it worked!</p>\n\n<p>If anyone wonders it is a Monte Carlo simulation of how many particles would pass through both ractangular detectors. As i throw the particles from detector 1 it is trivial they go through it, and i count the number that pass detector 2.</p>\n\n<p>The corrected code is </p>\n\n<pre><code>N=100000\n\"La direcci\u00f3n viene dada por v=[rsin(teta)*cos(phi),rsin(teta)sin(phi),rcos(teta)]\"\n\"Los vectores que vamos a usar debemos inicializarlos como un vector de ceros\"\ncos=np.zeros([10,N])\nphi=np.zeros([10,N])\nteta=np.zeros([10,N])\na=np.zeros([10,N])\n\nxrn=np.zeros(N)\nyrn=np.zeros(N)\nzrn=np.zeros(N)\n\nx=np.zeros([10,N])\ny=np.zeros([10,N])\nz=np.zeros([10,N])\n\nlim1=14.7\nlim2=3.35\nlim3=-lim1\nlim4=-lim2\n\"d son las disversas distancias a las que colocamos la fuente con respecto al detector\"\n\nd=np.array([0.00001,15,20,25,30,35,40,45,50,55])\n\n\"e es la eficiencia geom\u00e9trica simulada\"\ne=np.zeros(10)\n\n\"Debemos definir el coseno como n\u00fameros aleatorios en vez de el \u00e1ngulo teta, debido a que queremos\"\n\"que se distribuyan uniformemente por toda la esfera\"\nfor j in range(10):\n    for i in range(N):\n        cos[j,i]=np.random.uniform(0,1)\n\n        phi[j,i]=np.random.uniform(0,2*np.pi)\n\n        a[j,i]=d[j]/cos[j,i]\n\n        xrn[i]=np.random.uniform(-1,1)*lim1\n        yrn[i]=np.random.uniform(-1,1)*lim2\n\n        x[j,i]=a[j,i]*np.sin(math.acos(cos[j,i]))*np.cos(phi[j,i])+xrn[i]\n        y[j,i]=a[j,i]*np.sin(math.acos(cos[j,i]))*np.sin(phi[j,i])+yrn[i]\n\n\ncuentas=np.zeros(10)\nfor j in range(10):\n    for i in range(N):\n        if a[j,i]&gt;0 and x[j,i] &lt; lim1 and x[j,i]&gt;lim3 and y[j,i] &lt; lim2 and y[j,i]&gt;lim4:\n            cuentas[j]=cuentas[j]+1\n\n    e[j]=cuentas[j]/N\n</code></pre>\n\n<p>thanks to everyone!</p>\n"}], "owner": {"reputation": 47, "user_id": 5927057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76caf0627ced917643a892cfd7500a80?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Esp", "link": "https://stackoverflow.com/users/5927057/gabriel-esp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 42824124, "answer_count": 3, "score": 0, "last_activity_date": 1489695198, "creation_date": 1489612232, "question_id": 42820741, "link": "https://stackoverflow.com/questions/42820741/scientific-python-array-syntax", "title": "Scientific python array syntax", "body": "<p>So i have this code writen in python. I'm not going to explain it as it is a simple syntax fix that i can't seem to see so it is useless to explain what's for.</p>\n\n<p>The problem that i have is that for a given d, for example 15 i get the value of \"cuentas\" right and \"e\" correct.</p>\n\n<p>What i want to do is to iterate through a set of d's and get the value of each cuentas, and each e in order to plot d vs e.</p>\n\n<p>My problem is that i dont seem to get how to create a matrix in python.</p>\n\n<p>In matlab i used to write two different loops like theese:</p>\n\n<pre><code>for i=1:1:N\n    for j=1:9\n\n      a[i,j]= and so on\n</code></pre>\n\n<p>a[i,j] would be a matrix with N rows and 9 columns that i could access and manipulate.</p>\n\n<p>In my code below i will intentionaly put # comments where i want to iterate through the distances</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nN=100000\ncos=np.zeros(N)\nphi=np.zeros(N)\nteta=np.zeros(N)\na=np.zeros(N)\n\n\nxrn=np.zeros(N)\nyrn=np.zeros(N)\nzrn=np.zeros(N)\n\nx=np.zeros(N)\ny=np.zeros(N)\nz=np.zeros(N)\n\nlim1=14.7\nlim2=3.35\nlim3=-lim1\nlim4=-lim2\n\n#d=np.array([15,20,25,30,35,40,45,50,55])\nd=15\n\n    #for j in range(9):\nfor i in range(N):\n    cos[i]=np.random.uniform(-1,1)\n    teta[i]=np.random.uniform(-np.pi,np.pi)\n    phi[i]=np.random.uniform(0,2*np.pi)\n\n# a[i]=d[j]/cos[i]*np.cos(phi[i])\na[i]=d/cos[i]*np.cos(phi[i])\n\n\nxrn[i]=np.random.uniform(-1,1)*lim1\nyrn[i]=np.random.uniform(-1,1)*lim2\n\nx[i]=a[i]*np.sin(teta[i])*np.cos(phi[i])+xrn[i]\ny[i]=a[i]*np.sin(teta[i])*np.sin(phi[i])+yrn[i]\n\n#cuentas[j]=0\ncuentas=0\n\n#for j in range(9):\nfor i in range(N):\n    if a[i]&gt;0 and x[i] &lt; lim1 and x[i]&gt;lim3 and y[i] &lt; lim2 and y[i]&gt;lim4:\n        cuentas=cuentas+1\n#e[j]=cuenta[j]/N\ne=cuentas/N\n</code></pre>\n\n<p>Thanks so much to those even reading!!</p>\n"}, {"tags": ["python", "macos", "python-3.x", "tkinter"], "comments": [{"owner": {"reputation": 1018, "user_id": 5156102, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DNozE.png?s=128&g=1", "display_name": "mark jay", "link": "https://stackoverflow.com/users/5156102/mark-jay"}, "edited": false, "score": 1, "creation_date": 1489612537, "post_id": 42820736, "comment_id": 72753393, "body": "I think you are approaching the problem wrong. Your tkinter GUI should only have 1 mainloop. Your <code>win2</code> class isn&#39;t doing anything. I suggest finding a simple tkinter example and working from there. Also, PyQt is another option for GUIs"}], "answers": [{"comments": [{"owner": {"reputation": 183, "user_id": 6209041, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--mq0xQ2RUzg/AAAAAAAAAAI/AAAAAAAATpo/t1YcKB1lG4M/photo.jpg?sz=128", "display_name": "Mike Pylypyshyn", "link": "https://stackoverflow.com/users/6209041/mike-pylypyshyn"}, "edited": false, "score": 0, "creation_date": 1489613026, "post_id": 42820809, "comment_id": 72753650, "body": "I want to create settings window for my app. Here is the link to my full code <a href=\"https://codeshare.io/GqANWx\" rel=\"nofollow noreferrer\">codeshare.io/GqANWx</a>"}, {"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "reply_to_user": {"reputation": 183, "user_id": 6209041, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--mq0xQ2RUzg/AAAAAAAAAAI/AAAAAAAATpo/t1YcKB1lG4M/photo.jpg?sz=128", "display_name": "Mike Pylypyshyn", "link": "https://stackoverflow.com/users/6209041/mike-pylypyshyn"}, "edited": false, "score": 0, "creation_date": 1489613717, "post_id": 42820809, "comment_id": 72753979, "body": "That&#39;s a &#39;modal window&#39;. I edited my answer to show you how to do that. I suggest you also follow my lead in subclassing rather than making attributes like <code>self.root</code>."}, {"owner": {"reputation": 23589, "user_id": 6622817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93f66cc4703b66b835cf13dfeee21e7b?s=128&d=identicon&r=PG&f=1", "display_name": "abccd", "link": "https://stackoverflow.com/users/6622817/abccd"}, "reply_to_user": {"reputation": 183, "user_id": 6209041, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--mq0xQ2RUzg/AAAAAAAAAAI/AAAAAAAATpo/t1YcKB1lG4M/photo.jpg?sz=128", "display_name": "Mike Pylypyshyn", "link": "https://stackoverflow.com/users/6209041/mike-pylypyshyn"}, "edited": false, "score": 1, "creation_date": 1489616379, "post_id": 42820809, "comment_id": 72755210, "body": "@\u041c\u0438\u0445\u0430\u0439\u043b\u043e\u041f\u0438\u043b\u0438\u043f\u0438\u0448\u0438\u043d please don&#39;t ask people to do everything for you and give them your full code. This isn&#39;t what SO is for..."}], "tags": [], "owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "is_accepted": true, "score": 1, "last_activity_date": 1489613648, "last_edit_date": 1489613648, "creation_date": 1489612487, "answer_id": 42820809, "question_id": 42820736, "link": "https://stackoverflow.com/questions/42820736/i-cant-create-a-second-window-using-tkinter-on-os-x/42820809#42820809", "title": "I can&#39;t create a second window using tkinter, on os x", "body": "<p>It's a very bad idea to use <code>Tk()</code> more than once in your program. Use it to make the root window, and then use <code>Toplevel()</code> to make any additional windows. </p>\n\n<pre><code>def buttonFunc(self, event):\n    Toplevel(self.root)\n</code></pre>\n\n<p>That said, it still looks like you are trying to do something the hard way. Can you describe better what your end goal is? </p>\n\n<p>To make a modal window (a popup) use code like this: </p>\n\n<pre><code>try: #python3 imports\n    import tkinter as tk\nexcept ImportError: #python3 failed, try python2 imports\n    import Tkinter as tk\n\nclass Main(tk.Frame):\n    def __init__(self, master=None, **kwargs):\n        tk.Frame.__init__(self, master, **kwargs)\n\n        lbl = tk.Label(self, text=\"this is the main frame\")\n        lbl.pack()\n\n        btn = tk.Button(self, text='click me', command=self.open_popup)\n        btn.pack()\n\n    def open_popup(self):\n        print(\"runs before the popup\")\n        Popup(self)\n        print(\"runs after the popup closes\")\n\nclass Popup(tk.Toplevel):\n    \"\"\"modal window requires a master\"\"\"\n    def __init__(self, master, **kwargs):\n        tk.Toplevel.__init__(self, master, **kwargs)\n\n        lbl = tk.Label(self, text=\"this is the popup\")\n        lbl.pack()\n\n        btn = tk.Button(self, text=\"OK\", command=self.destroy)\n        btn.pack()\n\n        # The following commands keep the popup on top.\n        # Remove these if you want a program with 2 responding windows.\n        # These commands must be at the end of __init__\n        self.transient(master) # set to be on top of the main window\n        self.grab_set() # hijack all commands from the master (clicks on the main window are ignored)\n        master.wait_window(self) # pause anything on the main window until this one closes\n\ndef main():\n    root = tk.Tk()\n    window = Main(root)\n    window.pack()\n    root.mainloop()\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 183, "user_id": 6209041, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--mq0xQ2RUzg/AAAAAAAAAAI/AAAAAAAATpo/t1YcKB1lG4M/photo.jpg?sz=128", "display_name": "Mike Pylypyshyn", "link": "https://stackoverflow.com/users/6209041/mike-pylypyshyn"}, "is_accepted": false, "score": 0, "last_activity_date": 1489733098, "creation_date": 1489733098, "answer_id": 42850912, "question_id": 42820736, "link": "https://stackoverflow.com/questions/42820736/i-cant-create-a-second-window-using-tkinter-on-os-x/42850912#42850912", "title": "I can&#39;t create a second window using tkinter, on os x", "body": "<p>This code works for me.</p>\n\n<pre><code>from tkinter import *\n\nclass win1:\n\n    def __init__(self):\n        root = Tk()\n        button = Button(root)\n        button.bind('&lt;Button-1&gt;', self.buttonFunc)\n        button.pack()\n        root.mainloop()\n\n    def buttonFunc(self, event):\n        window2 = win2()\n\nclass win2(win1):\n\n    def __init__(self):\n        top = Toplevel()\n\nif __name__ == \"__main__\":\n    window1 = win1()\n</code></pre>\n"}], "owner": {"reputation": 183, "user_id": 6209041, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--mq0xQ2RUzg/AAAAAAAAAAI/AAAAAAAATpo/t1YcKB1lG4M/photo.jpg?sz=128", "display_name": "Mike Pylypyshyn", "link": "https://stackoverflow.com/users/6209041/mike-pylypyshyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "accepted_answer_id": 42820809, "answer_count": 2, "score": 0, "last_activity_date": 1489733098, "creation_date": 1489612222, "last_edit_date": 1489618242, "question_id": 42820736, "link": "https://stackoverflow.com/questions/42820736/i-cant-create-a-second-window-using-tkinter-on-os-x", "title": "I can&#39;t create a second window using tkinter, on os x", "body": "<p>When creating a second window using python 3.6 and tkinter, it is not responsible. I`m using os x 10.11.6. \nIn other systems such as Ubuntu, this code works.</p>\n\n<pre><code>from tkinter import *\n\nclass win2:\n\n    def __init__(self):\n        self.root = Tk()\n        self.root.mainloop()\n\nclass win1:\n\n    def __init__(self):\n        self.root = Tk()\n\n        self.button = Button(self.root)\n        self.button.bind('&lt;Button-1&gt;', self.buttonFunc)\n        self.button.pack()\n\n        self.root.mainloop()\n\n    def buttonFunc(self, event):\n        windows2 = win2()\n\nif __name__ == \"__main__\":\n    window1 = win1()\n</code></pre>\n"}, {"tags": ["python", "ms-word", "win32com"], "comments": [{"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1489615908, "post_id": 42820704, "comment_id": 72755012, "body": "As toc is automatically constructed from yhe header structure, why not just insert a toc in a template and create a doc from that template?"}, {"owner": {"reputation": 359, "user_id": 3931135, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a7a33e1f6d4ee21d8ef16325ca11d644?s=128&d=identicon&r=PG&f=1", "display_name": "Abraxas", "link": "https://stackoverflow.com/users/3931135/abraxas"}, "reply_to_user": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1489616362, "post_id": 42820704, "comment_id": 72755201, "body": "@barny How could I make it stick to the second page? As I&#39;m using the <code>WordObject.Selection.action()</code> structure the document just kinda forms as I write it. If I put a ToC in the template it will just be pushed to the bottom right? Is there a way I can specify the selection start on the top of page one, then jump to after the ToC?"}, {"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 1, "creation_date": 1489617182, "post_id": 42820704, "comment_id": 72755540, "body": "Put a bookmark/marker in your template, on page 3 (or wherever). Then in your code search for the marker and that&#39;s where you add content. You can then put any other formatting you want in the template, header/footer, styles, graphics, etc. With absolutely no code. This way when someone says &quot;I want the Normal font bigger&quot; all you have to do is edit the template, no need to change a line of code. You are using styles for most formatting and not direct specific (handcoded) formatting, except in special cases, right? And then your customer is very happy."}, {"owner": {"reputation": 359, "user_id": 3931135, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a7a33e1f6d4ee21d8ef16325ca11d644?s=128&d=identicon&r=PG&f=1", "display_name": "Abraxas", "link": "https://stackoverflow.com/users/3931135/abraxas"}, "reply_to_user": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1489626649, "post_id": 42820704, "comment_id": 72758507, "body": "I&#39;ll look in to trying this tomorrow and let you know how it goes. Thank you much!"}], "answers": [{"comments": [{"owner": {"reputation": 34717, "user_id": 192910, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/de26f9c446ae47545220ff9eff3e3ef7?s=128&d=identicon&r=PG", "display_name": "Mawg says reinstate Monica", "link": "https://stackoverflow.com/users/192910/mawg-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1545313981, "post_id": 42834295, "comment_id": 94587008, "body": "Yes, did it work? barny took the trouble to try to help you. The least you could do is to provide feedback, to help others"}], "tags": [], "owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "is_accepted": false, "score": 3, "last_activity_date": 1545324787, "last_edit_date": 1545324787, "creation_date": 1489667792, "answer_id": 42834295, "question_id": 42820704, "link": "https://stackoverflow.com/questions/42820704/word-python-create-table-of-contents/42834295#42834295", "title": "Word &amp; Python - Create Table of Contents", "body": "<p>Manually, edit your template in Word, add the ToC (which will be empty initially) any intro stuff, header/footers etc., then at where you want your text content inserted (i.e. after the ToC) put a uniquely named bookmark. Then in your code, create a new document based on the template (or open the template then save it to a different name), search for the bookmark and insert your content there. Save to a different filename.</p>\n\n<p>This approach has all sorts of advantages - you can format your template in Word rather than by writing all the code details, and so you can very easily edit your template to update styles when someone says they want the Normal font to be bigger/smaller/pink you can do it just by editing the template. Make sure to use styles in your code and only apply formatting when it is specifically different from the default style.</p>\n\n<p>Not sure how you make sure the ToC is actually generated, might be automatically updated on every save.</p>\n"}], "owner": {"reputation": 359, "user_id": 3931135, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a7a33e1f6d4ee21d8ef16325ca11d644?s=128&d=identicon&r=PG&f=1", "display_name": "Abraxas", "link": "https://stackoverflow.com/users/3931135/abraxas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1722, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1575449372, "creation_date": 1489612127, "question_id": 42820704, "link": "https://stackoverflow.com/questions/42820704/word-python-create-table-of-contents", "title": "Word &amp; Python - Create Table of Contents", "body": "<p>I'm using the pywin32.client extension for python and building a Word document. I have tried a pretty good host of methods to generate a ToC but all have failed. </p>\n\n<p>I think what I want to do is call the ActiveDocument object and create one with something like this example from the MSDN page:</p>\n\n<pre><code>Set myRange = ActiveDocument.Range(Start:=0, End:=0) \nActiveDocument.TablesOfContents.Add Range:=myRange, _ \n UseFields:=False, UseHeadingStyles:=True, _ \n LowerHeadingLevel:=3, _ \n UpperHeadingLevel:=1\n</code></pre>\n\n<p>Except in Python it would be something like:</p>\n\n<pre><code>wordObject.ActiveDocument.TableOfContents.Add(Range=???,UseFiles=False, UseHeadingStyles=True, LowerHeadingLevel=3, UpperHeadingLevel=1)\n</code></pre>\n\n<p>I've built everything so far using the 'Selection' object (example below) and wish to add this ToC after the first page break. </p>\n\n<p>Here's a sample of what the document looks like:</p>\n\n<pre><code>objWord = win32com.client.Dispatch(\"Word.Application\")\nobjDoc = objWord.Documents.Open('pathtotemplate.docx') #\nobjSel = objWord.Selection\n#These seem to work but I don't know why...\nobjWord.ActiveDocument.Sections(1).Footers(1).PageNumbers.Add(1,True)\nobjWord.ActiveDocument.Sections(1).Footers(1).PageNumbers.NumberStyle = 57\nobjSel.Style = objWord.ActiveDocument.Styles(\"Heading 1\")\nobjSel.TypeText(\"TITLE PAGE AND STUFF\")\nobjSel.InsertParagraph()\nobjSel.TypeText(\"Some data or another\"\nobjSel.TypeParagraph()\nobjWord.Selection.InsertBreak()\n####INSERT TOC HERE####\n</code></pre>\n\n<p>Any help would be greatly appreciated! In a perfect world I'd use the default first option which is available from the Word GUI but that seems to point to a file and be harder to access (something about templates).</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 55248, "user_id": 2705542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc22708f70324dcbfe34f247637ca01?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Peters", "link": "https://stackoverflow.com/users/2705542/tim-peters"}, "edited": false, "score": 3, "creation_date": 1489611971, "post_id": 42820646, "comment_id": 72753104, "body": "you swapped the letters <code>c</code> and <code>p</code> in the two spellings"}, {"owner": {"reputation": 25463, "user_id": 5003756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8BUMb.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/5003756/james"}, "reply_to_user": {"reputation": 55248, "user_id": 2705542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc22708f70324dcbfe34f247637ca01?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Peters", "link": "https://stackoverflow.com/users/2705542/tim-peters"}, "edited": false, "score": 0, "creation_date": 1489612520, "post_id": 42820646, "comment_id": 72753383, "body": "as @TimPeters said: the line <code>npcname1 = npcnames[0]</code> has <code>ncpnames</code> misspelled."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 7717595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4b3fb332b1073d1cc989b181e1bb168?s=128&d=identicon&r=PG&f=1", "display_name": "user7717595", "link": "https://stackoverflow.com/users/7717595/user7717595"}, "edited": false, "score": 0, "creation_date": 1489618108, "post_id": 42820850, "comment_id": 72755913, "body": "Oh, I am such an idiot. Sorry! I was trying to get it working for like 50 minutes! It kept saying line 5 had no variable and I was so confused! I&#39;m new to this sorry."}], "tags": [], "owner": {"reputation": 82, "user_id": 7627317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0156c3d2ade6b5de14cb3033327b59e1?s=128&d=identicon&r=PG&f=1", "display_name": "loiuytre35", "link": "https://stackoverflow.com/users/7627317/loiuytre35"}, "is_accepted": true, "score": 0, "last_activity_date": 1489612679, "creation_date": 1489612679, "answer_id": 42820850, "question_id": 42820646, "link": "https://stackoverflow.com/questions/42820646/shuffle-not-working-python/42820850#42820850", "title": "Shuffle not working (Python)", "body": "<p>You misspelled your variable:</p>\n\n<pre><code>npcname1 = npcnames[0]\n</code></pre>\n\n<p>You should have:</p>\n\n<pre><code>npcname1 = ncpnames[0]\n</code></pre>\n\n<p>Honestly, you should have caught this on your own by simply reading over your code.</p>\n"}, {"tags": [], "owner": {"reputation": 1290, "user_id": 4180176, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1022787394506806/picture?type=large", "display_name": "Joshua Nixon", "link": "https://stackoverflow.com/users/4180176/joshua-nixon"}, "is_accepted": false, "score": 0, "last_activity_date": 1489612860, "creation_date": 1489612860, "answer_id": 42820890, "question_id": 42820646, "link": "https://stackoverflow.com/questions/42820646/shuffle-not-working-python/42820890#42820890", "title": "Shuffle not working (Python)", "body": "<pre><code>import random\n\nNPC = [\"Rulf\",\"Isabel\",\"William\",\"Alice\",\"Eleanor\",\"Dimia\",\"Aleida\",\"Farfelee\"]\nchosenName = random.choice(NPC)\nprint(\"Hello my name is\", chosenName)\n</code></pre>\n\n<p>Slighly neater</p>\n"}], "owner": {"reputation": 65, "user_id": 7717595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4b3fb332b1073d1cc989b181e1bb168?s=128&d=identicon&r=PG&f=1", "display_name": "user7717595", "link": "https://stackoverflow.com/users/7717595/user7717595"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 42820850, "answer_count": 2, "score": -3, "last_activity_date": 1489612860, "creation_date": 1489611884, "question_id": 42820646, "link": "https://stackoverflow.com/questions/42820646/shuffle-not-working-python", "title": "Shuffle not working (Python)", "body": "<p>I am trying to make a simple program which makes a name for the user. This is what I have. But when I run it, it says that ncpnames is not defined, but it is, I defined it at the start. Please help!</p>\n\n<pre><code>import time\nimport random\nfrom random import shuffle\nncpnames = [\"Rulf\",\"Isabel\",\"William\",\"Alice\",\"Eleanor\",\"Dimia\",\"Aleida\",\"Farfelee\"]\nshuffle(ncpnames)\nnpcname1 = npcnames[0]\nprint(\"Hello my name is\", npcname1)\n</code></pre>\n"}, {"tags": ["python", "excel"], "comments": [{"owner": {"reputation": 3248, "user_id": 5707684, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/wrGFn.jpg?s=128&g=1", "display_name": "Elmex80s", "link": "https://stackoverflow.com/users/5707684/elmex80s"}, "edited": false, "score": 0, "creation_date": 1489612472, "post_id": 42820578, "comment_id": 72753361, "body": "At which line do you get that error? Error information is always accompanied with (the latest) line number where the code crashes. Could it crash at <code>for x in range(0,2450)</code>? I remember openpyxl starts indexing at 1 instead of 0."}, {"owner": {"reputation": 35, "user_id": 7610906, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZY6s54SM3oM/AAAAAAAAAAI/AAAAAAAABHg/7v-xcmAptJQ/photo.jpg?sz=128", "display_name": "Jas999", "link": "https://stackoverflow.com/users/7610906/jas999"}, "reply_to_user": {"reputation": 3248, "user_id": 5707684, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/wrGFn.jpg?s=128&g=1", "display_name": "Elmex80s", "link": "https://stackoverflow.com/users/5707684/elmex80s"}, "edited": false, "score": 0, "creation_date": 1489612640, "post_id": 42820578, "comment_id": 72753449, "body": "Its crashing at    File &quot;C:/Users/laban/Excelpython.py&quot;, line 24, in &lt;module&gt;     if email_no[x]&lt;9:  IndexError: list index out of range"}, {"owner": {"reputation": 3248, "user_id": 5707684, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/wrGFn.jpg?s=128&g=1", "display_name": "Elmex80s", "link": "https://stackoverflow.com/users/5707684/elmex80s"}, "edited": false, "score": 0, "creation_date": 1489612766, "post_id": 42820578, "comment_id": 72753511, "body": "I suspect <code>x = 0</code> at that line. Am I right?"}], "answers": [{"tags": [], "owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "is_accepted": true, "score": 1, "last_activity_date": 1489612659, "last_edit_date": 1495541837, "creation_date": 1489612659, "answer_id": 42820844, "question_id": 42820578, "link": "https://stackoverflow.com/questions/42820578/how-to-transfer-data-from-one-worksheet-into-another-using-python-in-the-same-wo/42820844#42820844", "title": "How to transfer data from one worksheet into another using python in the same workbook?", "body": "<p>You can use:</p>\n\n<pre><code>wb = openpyxl.load_workbook('C:/Users/laban/Desktop/Par-emails1.xlsx')\nsheet1 = wb.get_sheet_by_name('Sheet1')\nsheet2 = wb.get_sheet_by_name('Sheet2')\n\nfor i,row in enumerate(sheet1.iter_rows()):\n  for j,col in enumerate(row):\n    sheet2.cell(row=i+1,column=j+1).value = col.value\n</code></pre>\n\n<p>Apparently in 2.4 you can do this with one command: <a href=\"https://stackoverflow.com/questions/27101024/copy-whole-worksheet-with-openpyxl\">Copy whole worksheet with openpyxl</a></p>\n"}, {"tags": [], "owner": {"reputation": 8602, "user_id": 5936628, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/67edb9182ec767573ef95539c533b0a9?s=128&d=identicon&r=PG&f=1", "display_name": "Anil_M", "link": "https://stackoverflow.com/users/5936628/anil-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1489634788, "last_edit_date": 1489634788, "creation_date": 1489612934, "answer_id": 42820908, "question_id": 42820578, "link": "https://stackoverflow.com/questions/42820578/how-to-transfer-data-from-one-worksheet-into-another-using-python-in-the-same-wo/42820908#42820908", "title": "How to transfer data from one worksheet into another using python in the same workbook?", "body": "<p>Obviously this is very simplified version from what I am currently using.\nHere is a code snippet to copy data from sheet1 to sheet2 without any formatting.\nYou dont need to specify max rows , max columns  as you can get it using \n<code>sheet.max_row</code> and <code>sheet.max_columns</code> methods.</p>\n\n<pre><code>from openpyxl.cell import Cell    \n\nmax_row = sheet1.max_row       #Get max row of first sheet\nmax_col = sheet1.max_column    #Get max column of first sheet\n\nfor row_num in range(1,max_row + 1):    #Iterate through rows\n    for col_num in range(1, max_col + 1):   #Iterate through columns\n        _cell1 = sheet1.cell(row=row_num, column=col_num)    \n        _cell2 = sheet2.cell(row=row_num, column=col_num)    \n        _cell2.value = _cell1.value\n</code></pre>\n\n<p>Added extra variables for understanding. You can compact at your end.</p>\n"}, {"tags": [], "owner": {"reputation": 398, "user_id": 7611973, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ac5d2e78feebec17197f30d3d828d769?s=128&d=identicon&r=PG&f=1", "display_name": "boethius", "link": "https://stackoverflow.com/users/7611973/boethius"}, "is_accepted": false, "score": 0, "last_activity_date": 1489613325, "creation_date": 1489613325, "answer_id": 42821026, "question_id": 42820578, "link": "https://stackoverflow.com/questions/42820578/how-to-transfer-data-from-one-worksheet-into-another-using-python-in-the-same-wo/42821026#42821026", "title": "How to transfer data from one worksheet into another using python in the same workbook?", "body": "<p>bernie probably has the best answer here (Copy whole worksheet) but your            index error might be coming from:</p>\n\n<pre><code>par=[sheet.cell(row= col, column=1).value for col in range(1, 2450)]\n</code></pre>\n\n<p>being 1 cell shorter than:</p>\n\n<pre><code>for x in range(0,2450):\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7986272, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UL-hLEf4gss/AAAAAAAAAAI/AAAAAAAAAC8/6hhCvy0Ui18/photo.jpg?sz=128", "display_name": "anto dani", "link": "https://stackoverflow.com/users/7986272/anto-dani"}, "is_accepted": false, "score": 0, "last_activity_date": 1506086752, "last_edit_date": 1506086752, "creation_date": 1506083389, "answer_id": 46364871, "question_id": 42820578, "link": "https://stackoverflow.com/questions/42820578/how-to-transfer-data-from-one-worksheet-into-another-using-python-in-the-same-wo/46364871#46364871", "title": "How to transfer data from one worksheet into another using python in the same workbook?", "body": "<pre><code>def excel_op():\n\n   filename='D://Python//excelread.xlsx'\n        sheet_name='Sheet1'\n        book = xlrd.open_workbook(str(filename))\n\n        sheet = book.sheet_by_name(sheet_name)\n        workbook = xlsxwriter.Workbook('excelwrite.xlsx')\n        worksheet = workbook.add_worksheet()\n\n        row_count = int(sheet.nrows)\n        col_count = int(sheet.ncols)\n        for row in range(0, int(row_count)):\n            for col in range(0, int(col_count)):\n                worksheet.write(row,col,str(sheet.cell(row, col).value))\n        workbook.close()\n        del book\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8191, "user_id": 8881141, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/C3ydX.jpg?s=128&g=1", "display_name": "Mr. T", "link": "https://stackoverflow.com/users/8881141/mr-t"}, "edited": false, "score": 0, "creation_date": 1533191898, "post_id": 51646699, "comment_id": 90257668, "body": "Please consider adding an explanation why this solves the problem. I suggest reading <a href=\"https://stackoverflow.com/help/how-to-answer\">How do I write a good answer?</a>"}], "tags": [], "owner": {"reputation": 1, "user_id": 10147300, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-buwVJyaRSIQ/AAAAAAAAAAI/AAAAAAAAABI/wF6_Nj9Mfm4/photo.jpg?sz=128", "display_name": "Akhil Reddy", "link": "https://stackoverflow.com/users/10147300/akhil-reddy"}, "is_accepted": false, "score": 0, "last_activity_date": 1533191802, "last_edit_date": 1533191802, "creation_date": 1533190621, "answer_id": 51646699, "question_id": 42820578, "link": "https://stackoverflow.com/questions/42820578/how-to-transfer-data-from-one-worksheet-into-another-using-python-in-the-same-wo/51646699#51646699", "title": "How to transfer data from one worksheet into another using python in the same workbook?", "body": "<pre><code> shutil.copy(\"Source.xlsx\", \"target.xlsx\")\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 7610906, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZY6s54SM3oM/AAAAAAAAAAI/AAAAAAAABHg/7v-xcmAptJQ/photo.jpg?sz=128", "display_name": "Jas999", "link": "https://stackoverflow.com/users/7610906/jas999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14631, "favorite_count": 0, "accepted_answer_id": 42820844, "answer_count": 5, "score": 0, "last_activity_date": 1564587388, "creation_date": 1489611580, "last_edit_date": 1564587388, "question_id": 42820578, "link": "https://stackoverflow.com/questions/42820578/how-to-transfer-data-from-one-worksheet-into-another-using-python-in-the-same-wo", "title": "How to transfer data from one worksheet into another using python in the same workbook?", "body": "<p>I want to transfer my data which is in 'Sheet1' into worksheet 'Sheet2'in the same workbook, using python.I have written the script below, but facing an <strong>'IndexError: list index out of range'</strong>. I know this is not the best way to go about it. I will appreciate if anyone can guide me with a more efficient way to go about it. I am sharing the Snapshot of excel file below </p>\n\n<p>Can I directly enter <strong>'Sheet1' cell value ---> 'Sheet2' cell value</strong> rather than doing   <strong>'Sheet1' cell value ---> List---->'Sheet2' cell value</strong>?</p>\n\n<p><a href=\"https://i.stack.imgur.com/Wrfqg.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Wrfqg.jpg\" alt=\"enter image description here\"></a></p>\n\n<pre><code> import openpyxl  \n wb = openpyxl.load_workbook('C:\\Users\\laban\\Desktop\\Par-emails1.xlsx') \n type(wb)\n wb.get_sheet_names() \n sheet = wb.get_sheet_by_name('Sheet1') \n type(sheet)  \n anotherSheet = wb.active\n sheet1 = wb.get_sheet_by_name('Sheet2')\n type(sheet1)\n par=[sheet.cell(row= col, column=1).value for col in range(1, 2450)]\n email_no=[sheet.cell(row= col, column=2).value for col in range(1, 2450)]\n Domain=[sheet.cell(row= col, column=3).value for col in range(1, 2450)]\n email=[sheet.cell(row= col, column=4).value for col in range(1, 2450)]\n\n for x in range(0,2450):\n      if email_no[x]&lt;9:\n          sheet1.cell(row= x+1, column=1).value=par[x]\n          sheet1.cell(row= x+1, column=2).value=email_no[x]\n          sheet1.cell(row= x+1, column=3).value=Domain[x]\n          sheet1.cell(row= x+1, column=4).value=email[x]\n\n\n wb.save('C:\\Users\\laban\\Desktop\\Par-emails1.xlsx')\n</code></pre>\n"}, {"tags": ["python", "dictionary", "intersection"], "comments": [{"owner": {"reputation": 952, "user_id": 5505161, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c62b36b7d0f6241b61ef9e9a671240a5?s=128&d=identicon&r=PG&f=1", "display_name": "lordingtar", "link": "https://stackoverflow.com/users/5505161/lordingtar"}, "edited": false, "score": 2, "creation_date": 1489611598, "post_id": 42820548, "comment_id": 72752897, "body": "All three dicts in your list are the same. What exactly do you want to return?"}, {"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 1, "creation_date": 1489611625, "post_id": 42820548, "comment_id": 72752920, "body": "Your values do look pretty hashable from where I am standing."}, {"owner": {"reputation": 321, "user_id": 3328802, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/1a2225e6cf6e2e1dd0341d638afcc913?s=128&d=identicon&r=PG&f=1", "display_name": "learnningprogramming", "link": "https://stackoverflow.com/users/3328802/learnningprogramming"}, "reply_to_user": {"reputation": 952, "user_id": 5505161, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c62b36b7d0f6241b61ef9e9a671240a5?s=128&d=identicon&r=PG&f=1", "display_name": "lordingtar", "link": "https://stackoverflow.com/users/5505161/lordingtar"}, "edited": false, "score": 0, "creation_date": 1489614512, "post_id": 42820548, "comment_id": 72754357, "body": "@lordingtar i have tried explaining your question in edit. Also dict now are not same"}], "answers": [{"comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1489613293, "post_id": 42820678, "comment_id": 72753797, "body": "FYR, function reduce has been deprecated in Python 3."}], "tags": [], "owner": {"reputation": 495, "user_id": 7227829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jybi3.jpg?s=128&g=1", "display_name": "Charlie G", "link": "https://stackoverflow.com/users/7227829/charlie-g"}, "is_accepted": false, "score": 0, "last_activity_date": 1489612028, "creation_date": 1489612028, "answer_id": 42820678, "question_id": 42820548, "link": "https://stackoverflow.com/questions/42820548/pythonic-way-to-find-common-key-value-pair-among-list-of-dict/42820678#42820678", "title": "pythonic way to find common key value pair among list of dict", "body": "<pre><code> reduce(lambda x, y: dict(set(x.items()).intersection(set(y.items()))), alljson)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7243, "user_id": 4356204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qJ6Nk.jpg?s=128&g=1", "display_name": "parsethis", "link": "https://stackoverflow.com/users/4356204/parsethis"}, "edited": false, "score": 0, "creation_date": 1489612715, "post_id": 42820699, "comment_id": 72753481, "body": "I dont think this is exactly correct. EchoTime occurs 3 times but this returns 0 in my tests."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 7243, "user_id": 4356204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qJ6Nk.jpg?s=128&g=1", "display_name": "parsethis", "link": "https://stackoverflow.com/users/4356204/parsethis"}, "edited": false, "score": 0, "creation_date": 1489612891, "post_id": 42820699, "comment_id": 72753568, "body": "@putonspectacles Check again. It is returned in my case."}, {"owner": {"reputation": 7243, "user_id": 4356204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qJ6Nk.jpg?s=128&g=1", "display_name": "parsethis", "link": "https://stackoverflow.com/users/4356204/parsethis"}, "edited": false, "score": 1, "creation_date": 1489613221, "post_id": 42820699, "comment_id": 72753764, "body": "ahh, I misread the question, he asked for just the unique occurrences. I really like this, showing off the python expansion <code>*</code>"}, {"owner": {"reputation": 321, "user_id": 3328802, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/1a2225e6cf6e2e1dd0341d638afcc913?s=128&d=identicon&r=PG&f=1", "display_name": "learnningprogramming", "link": "https://stackoverflow.com/users/3328802/learnningprogramming"}, "edited": false, "score": 0, "creation_date": 1489614623, "post_id": 42820699, "comment_id": 72754412, "body": "@DYZ it gves me error saying <code>&#39;dict&#39; object is not callable</code>"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 321, "user_id": 3328802, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/1a2225e6cf6e2e1dd0341d638afcc913?s=128&d=identicon&r=PG&f=1", "display_name": "learnningprogramming", "link": "https://stackoverflow.com/users/3328802/learnningprogramming"}, "edited": false, "score": 1, "creation_date": 1489614730, "post_id": 42820699, "comment_id": 72754452, "body": "@learnningprogramming You must have redefined <code>dict</code> somewhere in your program. Make sure you do not have anything like <code>dict=...</code>, then restart your interpreter."}, {"owner": {"reputation": 321, "user_id": 3328802, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/1a2225e6cf6e2e1dd0341d638afcc913?s=128&d=identicon&r=PG&f=1", "display_name": "learnningprogramming", "link": "https://stackoverflow.com/users/3328802/learnningprogramming"}, "edited": false, "score": 0, "creation_date": 1489788471, "post_id": 42820699, "comment_id": 72841813, "body": "@DYZ yes you were correct. I deleted dict obj created before. But now the issue is it gives following error: <code>TypeError: unhashable type: &#39;list&#39;</code>"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1489789687, "post_id": 42820699, "comment_id": 72842195, "body": "When I create the list of dictionaries using the code from your question and then execute the code from my answer, I get the right result. I suggest you do the same. The error that you see must be elsewhere in your code."}], "tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": false, "score": 3, "last_activity_date": 1489612919, "last_edit_date": 1489612919, "creation_date": 1489612105, "answer_id": 42820699, "question_id": 42820548, "link": "https://stackoverflow.com/questions/42820548/pythonic-way-to-find-common-key-value-pair-among-list-of-dict/42820699#42820699", "title": "pythonic way to find common key value pair among list of dict", "body": "<p>Convert each dictionary's list of items into a set, find the set intersection, and optionally convert the result back to a dictionary:</p>\n\n<pre><code>dict(set.intersection(*[set(d.items()) for d in alljson]))\n#{'MRAcquisitionType': '2D', 'FlipAngle': 90, 'RepetitionTime': 2,\n# 'ScanOptions': 'FS', 'ManufacturerModelName': 'TrioTim', \n# 'Manufacturer': 'SIEMENS', 'SequenceVariant': 'SK', 'EchoTime': 0, \n# 'MagneticFieldStrength': 3, 'ScanningSequence': 'EP'}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 316, "user_id": 5579161, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1HVpGdUHlRs/AAAAAAAAAAI/AAAAAAAAC8Q/SdM3W1kkwEU/photo.jpg?sz=128", "display_name": "Nathan Thompson", "link": "https://stackoverflow.com/users/5579161/nathan-thompson"}, "is_accepted": false, "score": 1, "last_activity_date": 1489612112, "creation_date": 1489612112, "answer_id": 42820701, "question_id": 42820548, "link": "https://stackoverflow.com/questions/42820548/pythonic-way-to-find-common-key-value-pair-among-list-of-dict/42820701#42820701", "title": "pythonic way to find common key value pair among list of dict", "body": "<p>It depends on what you mean by \"common\" pairs, but assuming you mean 'pairs present in every dictionary', you can convert each dictionary to lists of tuples and then find the intersection of all of the lists:</p>\n\n<pre><code>list_of_lists = [x.items() for x in alljson]\ncommon_pairs = set(list_of_lists[0]).intersection(*list_of_lists)\nprint(common_pairs)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7243, "user_id": 4356204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qJ6Nk.jpg?s=128&g=1", "display_name": "parsethis", "link": "https://stackoverflow.com/users/4356204/parsethis"}, "edited": false, "score": 0, "creation_date": 1489612752, "post_id": 42820733, "comment_id": 72753505, "body": "lovely, here is the docs on operators:  <a href=\"https://docs.python.org/2/library/operator.html\" rel=\"nofollow noreferrer\">docs.python.org/2/library/operator.html</a>"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 1, "creation_date": 1489613263, "post_id": 42820733, "comment_id": 72753788, "body": "FYR, function <code>reduce</code> has been deprecated in Python 3."}, {"owner": {"reputation": 7389, "user_id": 360362, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/1yfQ1.jpg?s=128&g=1", "display_name": "Meitham", "link": "https://stackoverflow.com/users/360362/meitham"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 2, "creation_date": 1489613513, "post_id": 42820733, "comment_id": 72753888, "body": "@DYZ I wouldn&#39;t say deprecated, but yes it was moved off <code>__builtins</code> into the <code>functools</code> module so it requires an <code>import</code>.  <a href=\"https://docs.python.org/3.6/library/functools.html#functools.reduce\" rel=\"nofollow noreferrer\">docs.python.org/3.6/library/functools.html#functools.reduce</a>"}], "tags": [], "owner": {"reputation": 7389, "user_id": 360362, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/1yfQ1.jpg?s=128&g=1", "display_name": "Meitham", "link": "https://stackoverflow.com/users/360362/meitham"}, "is_accepted": false, "score": 1, "last_activity_date": 1489612219, "creation_date": 1489612219, "answer_id": 42820733, "question_id": 42820548, "link": "https://stackoverflow.com/questions/42820548/pythonic-way-to-find-common-key-value-pair-among-list-of-dict/42820733#42820733", "title": "pythonic way to find common key value pair among list of dict", "body": "<pre><code>&gt;&gt;&gt; import operator as op\n&gt;&gt;&gt; reduce(op.iand, map(set, [d.items() for d in alljson]))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7243, "user_id": 4356204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qJ6Nk.jpg?s=128&g=1", "display_name": "parsethis", "link": "https://stackoverflow.com/users/4356204/parsethis"}, "is_accepted": false, "score": 0, "last_activity_date": 1489613433, "last_edit_date": 1489613433, "creation_date": 1489612273, "answer_id": 42820757, "question_id": 42820548, "link": "https://stackoverflow.com/questions/42820548/pythonic-way-to-find-common-key-value-pair-among-list-of-dict/42820757#42820757", "title": "pythonic way to find common key value pair among list of dict", "body": "<pre><code>{k : v for x in alljson for (k, v) in x.items()} \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3728, "user_id": 2460780, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/nFriP.png?s=128&g=1", "display_name": "kjmerf", "link": "https://stackoverflow.com/users/2460780/kjmerf"}, "is_accepted": false, "score": 0, "last_activity_date": 1489613456, "creation_date": 1489613456, "answer_id": 42821055, "question_id": 42820548, "link": "https://stackoverflow.com/questions/42820548/pythonic-way-to-find-common-key-value-pair-among-list-of-dict/42821055#42821055", "title": "pythonic way to find common key value pair among list of dict", "body": "<p>This one is longer but to me it's intuitive:</p>\n\n<pre><code>count = {}\nfinal = []\n\nfor dictionary in alljson:\n  for key in dictionary:\n    if key in count:\n      count[key] += 1\n    else:\n      count[key] = 1\n\nfor key in count:\n  if count[key] == len(alljson):\n    final.append(key)\n\nprint final\n</code></pre>\n\n<p>Loop through alljson and count how many times each key shows up. Then return only the keys that show up in every dictionary.</p>\n"}], "owner": {"reputation": 321, "user_id": 3328802, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/1a2225e6cf6e2e1dd0341d638afcc913?s=128&d=identicon&r=PG&f=1", "display_name": "learnningprogramming", "link": "https://stackoverflow.com/users/3328802/learnningprogramming"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1535, "favorite_count": 1, "answer_count": 6, "score": 1, "last_activity_date": 1489614438, "creation_date": 1489611463, "last_edit_date": 1495542317, "question_id": 42820548, "link": "https://stackoverflow.com/questions/42820548/pythonic-way-to-find-common-key-value-pair-among-list-of-dict", "title": "pythonic way to find common key value pair among list of dict", "body": "<p>I have a list of dictionaries. </p>\n\n<pre><code>alljson = [{'EchoTime': 0,\n  'FlipAngle': 90,\n  'MRAcquisitionType': '2D',\n  'MagneticFieldStrength': 3,\n  'Manufacturer': 'SIEMENS',\n  'ManufacturerModelName': 'TrioTim',\n  'RepetitionTime': 2,\n  'ScanOptions': 'FS',\n  'ScanningSequence': 'AP',\n  'SequenceVariant': 'SK',\n  'TaskName': 'Tom'},\n {'EchoTime': 0,\n  'FlipAngle': 90,\n  'MRAcquisitionType': '2D',\n  'MagneticFieldStrength': 3,\n  'Manufacturer': 'SIEMENS',\n  'ManufacturerModelName': 'TrioTim',\n  'RepetitionTime': 2,\n  'ScanOptions': 'FS',\n  'ScanningSequence': 'EP',\n  'SequenceVariant': 'SK',\n  'TaskName': 'fb'},\n {'EchoTime': 0,\n  'FlipAngle': 90,\n  'MRAcquisitionType': '2D',\n  'MagneticFieldStrength': 3,\n  'Manufacturer': 'SIEMENS',\n  'ManufacturerModelName': 'TrioTim',\n  'RepetitionTime': 2,\n  'ScanOptions': 'FS',\n  'ScanningSequence': 'EP',\n  'SequenceVariant': 'HK', \n  'TaskName': 'Tom-loc'}]\n</code></pre>\n\n<p>Now i intend to find all common key value pairs from the list of dict. \nwhat would be the most pythonic way  to do it. </p>\n\n<p>Note: key and value both should match, and k:v pair should exist in all dict</p>\n\n<p>I tried all solutions suggested <a href=\"https://stackoverflow.com/questions/4900308/find-all-key-elements-by-the-same-value-in-dicts\">here</a> but given values are non hashable, none of the solution fully works. </p>\n\n<p>any suggestions? </p>\n"}, {"tags": ["python", "neural-network", "theano"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5012940"}, "edited": false, "score": 0, "creation_date": 1489623125, "post_id": 42822342, "comment_id": 72757634, "body": "Oh ya!! rookie mistake I guess :-) Thx for your quick &amp; helpful response Steve!"}], "tags": [], "owner": {"reputation": 121, "user_id": 2990135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2567544e54b36ca0303f5be02f1663a3?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Hastings", "link": "https://stackoverflow.com/users/2990135/steve-hastings"}, "is_accepted": false, "score": 0, "last_activity_date": 1489618984, "creation_date": 1489618984, "answer_id": 42822342, "question_id": 42820528, "link": "https://stackoverflow.com/questions/42820528/theano-cost-function-typeerror-unknown-parameter-type-class-numpy-ndarray/42822342#42822342", "title": "Theano Cost Function, TypeError: Unknown parameter type: &lt;class &#39;numpy.ndarray&#39;&gt;", "body": "<p>In your <code>theano.function</code> your inputs are numpy arrays (X_input and y_input). You want the inputs to be symbolic variables, such as:</p>\n\n<pre><code>cost = theano.function(inputs=[X, y], outputs=fc, updates=[\n</code></pre>\n\n<p>This will create a function which can be called with numpy arrays to perform the actual computation, as in:</p>\n\n<pre><code>actual_cost = cost(X_input, y_input)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5012940"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 623, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489623171, "creation_date": 1489611404, "last_edit_date": 1489623171, "question_id": 42820528, "link": "https://stackoverflow.com/questions/42820528/theano-cost-function-typeerror-unknown-parameter-type-class-numpy-ndarray", "title": "Theano Cost Function, TypeError: Unknown parameter type: &lt;class &#39;numpy.ndarray&#39;&gt;", "body": "<p>I'm new to Theano, just learning it. I have a ANN in python that I'm implementing in Theano as learning process. I'm using Spyder.</p>\n\n<p>And Theano throws out an error: TypeError: Unknown parameter type: class 'numpy.ndarray'</p>\n\n<p>I'm not sure where the error is. Is it in the cost function or in the gradient descent? And what is the typical reason for it?</p>\n\n<p>Here is my code:</p>\n\n<pre><code>X = T.dmatrix()\ny = T.dmatrix()\n\nX_input = np.genfromtxt('X.csv',delimiter=',') #5000x195\ny_input = np.genfromtxt('y.csv',delimiter=',')  #5000x75\n\ninput_layer_size, hidden_layer_size_1, hidden_layer_size_2, y_size = 195, 15, 15, 75\n\ntheta1 = theano.shared(np.array(np.random.rand(hidden_layer_size_1, (input_layer_size+1)), dtype=theano.config.floatX))\ntheta2 = theano.shared(np.array(np.random.rand(hidden_layer_size_2, (hidden_layer_size_1+1)), dtype=theano.config.floatX))\ntheta3 = theano.shared(np.array(np.random.rand(y_size, hidden_layer_size_2+1), dtype=theano.config.floatX))\n\ndef computeCost(X, y, w1, w2, w3):\n    m = X.shape[0]\n    b = T.ones((m,1))\n    a_1 = T.concatenate([b, X], axis=1)\n    z_2 = T.dot(a_1, T.transpose(w1))\n    a_2 = T.nnet.nnet.sigmoid(z_2)\n    a_2 = T.concatenate([b, a_2], axis=1)\n    z_3 = T.dot(a_2, T.transpose(w2))\n    a_3 = T.nnet.nnet.sigmoid(z_3)\n    a_3 = T.concatenate([b, a_3], axis=1)\n    z_4 = T.dot(a_3, T.transpose(w3))\n    h   = T.nnet.nnet.sigmoid(z_4)\n    cost = T.sum(-y * T.log(h) - (1-y) * T.log(1-h))/m\n    return cost\n\nfc = computeCost(X, y, theta1, theta2, theta3)\n\ndef grad_desc(cost, theta):\n    alpha = 0.1 #learning rate\n    return theta - (alpha * T.grad(cost, wrt=theta))\n\ncost = theano.function(inputs=[X_input, y_input], outputs=fc, updates=[\n        (theta1, grad_desc(fc, theta1)),\n        (theta2, grad_desc(fc, theta2)),\n        (theta3, grad_desc(fc, theta3))])\n</code></pre>\n\n<p>My last code generated this error:</p>\n\n<pre><code>Traceback (most recent call last):\n\n  File \"ipython-input-88-099323f95e73\", line 1, in &lt;module&gt;\ncost = theano.function(inputs=[X_input, y_input], outputs=fc, updates=[(theta1, grad_desc(fc, theta1)), (theta2, grad_desc(fc, theta2)), (theta3, grad_desc(fc, theta3))])\n\n\n  File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\theano\\compile\\function.py\", line 320, in function\noutput_keys=output_keys)\n\n  File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\theano\\compile\\pfunc.py\", line 390, in pfunc\nfor p in params]\n\n  File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\theano\\compile\\pfunc.py\", line 390, in &lt;listcomp&gt;\nfor p in params]\n\n  File \"C:\\Program Files\\Anaconda3\\lib\\site-packages\\theano\\compile\\pfunc.py\", line 489, in _pfunc_param_to_in\nraise TypeError('Unknown parameter type: %s' % type(param))\n\nTypeError: Unknown parameter type: class 'numpy.ndarray'\n</code></pre>\n"}, {"tags": ["python", "list", "iteration"], "comments": [{"owner": {"reputation": 216457, "user_id": 846892, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/E9dZn.png?s=128&g=1", "display_name": "Ashwini Chaudhary", "link": "https://stackoverflow.com/users/846892/ashwini-chaudhary"}, "edited": false, "score": 0, "creation_date": 1489611947, "post_id": 42820527, "comment_id": 72753088, "body": "Create a whole new list based on another list without a loop?"}], "answers": [{"comments": [{"owner": {"reputation": 46776, "user_id": 1014938, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FqCGF.png?s=128&g=1", "display_name": "Zero Piraeus", "link": "https://stackoverflow.com/users/1014938/zero-piraeus"}, "edited": false, "score": 0, "creation_date": 1489612917, "post_id": 42820718, "comment_id": 72753578, "body": "I dunno, I see <code>for</code> twice in that \u2026 How about <code>list(itertools.chain(*map(lambda s: map(lambda x: x * s[0]&#47;&#47;2,s[1][1]), enumerate(itertools.groupby(b), 2))))</code> so we can <i>really</i> pretend there are are no loops? ;-)"}, {"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "reply_to_user": {"reputation": 46776, "user_id": 1014938, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FqCGF.png?s=128&g=1", "display_name": "Zero Piraeus", "link": "https://stackoverflow.com/users/1014938/zero-piraeus"}, "edited": false, "score": 0, "creation_date": 1489613251, "post_id": 42820718, "comment_id": 72753781, "body": "@ZeroPiraeus Thanks, I arrived at more or less the same. Yours is slightly more elegant. Hm, actually, it doesn&#39;t work on my example ;-("}], "tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": true, "score": 4, "last_activity_date": 1489614173, "last_edit_date": 1489614173, "creation_date": 1489612183, "answer_id": 42820718, "question_id": 42820527, "link": "https://stackoverflow.com/questions/42820527/given-a-list-array-of-true-false-how-can-we-label-the-clusters-of-true/42820718#42820718", "title": "Given a list/array of True/False, how can we label the clusters of True?", "body": "<p>Here is an itertools.groupby solution</p>\n\n<pre><code>b\n# [False, True, True, False, True, True, False, True, True, False, True, False, False, False, False, True, True, True, True, False]\n\nlist(itertools.chain((k * j // 2 for j, (k, g) in enumerate(itertools.groupby(b), 2) for l in g)))\n# [0, 1, 1, 0, 2, 2, 0, 3, 3, 0, 4, 0, 0, 0, 0, 5, 5, 5, 5, 0]\n</code></pre>\n\n<p>without the word <code>for</code></p>\n\n<pre><code>sum(map(lambda jkg: [jkg[1][0] * jkg[0] // 2] * len(list(jkg[1][1])), enumerate(itertools.groupby(b), 2)), [])\n# [0, 1, 1, 0, 2, 2, 0, 3, 3, 0, 4, 0, 0, 0, 0, 5, 5, 5, 5, 0]\n\n# OP's example\nsum(map(lambda jkg: [jkg[1][0] * jkg[0] // 2] * len(list(jkg[1][1])), enumerate(itertools.groupby(list1), 2)), [])\n# [1, 0, 0, 0, 0, 2, 2, 2, 0, 3, 3, 3, 3, 3, 0, 0, 4, 0, 0, 0, 0, 5, 5, 5, 0, 6, 6, 6, 6, 6, 0, 0]\n</code></pre>\n"}], "owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 42820718, "answer_count": 1, "score": 0, "last_activity_date": 1489614173, "creation_date": 1489611395, "question_id": 42820527, "link": "https://stackoverflow.com/questions/42820527/given-a-list-array-of-true-false-how-can-we-label-the-clusters-of-true", "title": "Given a list/array of True/False, how can we label the clusters of True?", "body": "<p>Let's say we have a list of values that are only <code>True</code> or <code>False</code>. What would be the best way to uniquely label each grouping of <code>True</code>, that is, the groups of <code>True</code> surrounded by entries <code>False</code>? (All values <code>False</code> should be converted to 0)</p>\n\n<pre><code>list1 = [True, False, False, False, False, True, True, True, False, True, True, True, True, True, False, False, True, False, False, False, False, True, True, True, False, True, True, True, True, True, False, False]\n</code></pre>\n\n<p>In the converted form, this list would be:</p>\n\n<pre><code>list1 = [1, 0, 0, 0, 0, 2, 2, 2, 0, 3, 3, 3, 3, 3, 0, 0, 4, 0, 0, 0, 0, 5, 5, 5, 0, 6, 6, 6, 6, 6, 0, 0]\n</code></pre>\n\n<p>I was challenged that it is possible to do this quickly and without a for-loop.</p>\n"}, {"tags": ["python", "string", "input", "exit", "break"], "comments": [{"owner": {"reputation": 1290, "user_id": 4180176, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1022787394506806/picture?type=large", "display_name": "Joshua Nixon", "link": "https://stackoverflow.com/users/4180176/joshua-nixon"}, "edited": false, "score": 1, "creation_date": 1489611455, "post_id": 42820509, "comment_id": 72752823, "body": "If you don&#39;t specify a type then it will default to string so numbers can also be accepted."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1489611509, "post_id": 42820509, "comment_id": 72752843, "body": "EDIT: my last comment half answered itself. All <code>input()</code> is a string until you convert it. Re-reading your question, there is nothing fundamentally wrong with your approach, but you&#39;re going to need to shore it up with <code>try</code>/<code>except</code> etc. for invalid inputs that can&#39;t be converted to an <code>int</code>"}, {"owner": {"reputation": 1290, "user_id": 4180176, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1022787394506806/picture?type=large", "display_name": "Joshua Nixon", "link": "https://stackoverflow.com/users/4180176/joshua-nixon"}, "edited": false, "score": 0, "creation_date": 1489611613, "post_id": 42820509, "comment_id": 72752907, "body": "You could always check what data type it is before the if statement using &#39;isinstance(var, type)&#39; or &#39;type(var) == int&#39;"}, {"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 0, "creation_date": 1489611786, "post_id": 42820509, "comment_id": 72753000, "body": "I added some notes in the scrip to show where the problem is. For some reason the scrip skips the elif choice2 == 99: statement"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1489611820, "post_id": 42820509, "comment_id": 72753018, "body": "Although in a broader sense, you have <code>note_finder</code> calling <code>start_over</code> which can call <code>note_finder</code>. This is not a sane setup overall, you could find yourself in difficulties with this kind of flow."}, {"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 0, "creation_date": 1489611956, "post_id": 42820509, "comment_id": 72753093, "body": "@ roganjosh 33: I am using the call start_over in order to move back in my small menu I have set up. Is there a better way to move back?"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1489612021, "post_id": 42820509, "comment_id": 72753133, "body": "In that case, then yes, I&#39;d probably use <code>elif choice2 == &#39;99&#39;:</code> purely because your code seems set up to expect <code>&quot;exit&quot;</code> first, and any string will throw an error for <code>elif int(choice2) == 99:</code>. It&#39;s perhaps not the cleanest approach"}, {"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1489612369, "post_id": 42820509, "comment_id": 72753294, "body": "@roganjosh Ok Thanks. I was thinking I had to use &quot;99&quot; to fix the problem I was just looking to see if there was another way I could work this instead."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1489612440, "post_id": 42820509, "comment_id": 72753335, "body": "I would personally go with refactoring. In the type of program I <i>think</i> you&#39;re making, I&#39;d have one function controlling the main flow, and for the component parts of that flow it&#39;s fine to call other functions (i.e. one for user input etc. etc.), but always hand control back to the main function. As you&#39;ve set it up, it&#39;s more of a web that can go in circles."}, {"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1489612537, "post_id": 42820509, "comment_id": 72753392, "body": "@roganjosh I will look into it. I have only been learning python for the past month in my free time so I am still learning all the right and wrong ways to do things. Thanks for the info."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1489612941, "post_id": 42820509, "comment_id": 72753603, "body": "You&#39;re welcome. Your question reminds me a lot of one I answered earlier today. It&#39;s actually quite time-consuming to refactor code but since you want to learn, try and look at the before/after in <a href=\"http://stackoverflow.com/questions/42805756/typeerror-nonetype-object-is-not-iterable-in-python-in-csv/42806532#42806532\" title=\"typeerror nonetype object is not iterable in python in csv\">stackoverflow.com/questions/42805756/&hellip;</a> and understand how it changed. I passed the main control to <code>quantity()</code>. My answer is not the most elegant approach, I was trying to give a middle ground. Perhaps that will be of some help."}], "answers": [{"comments": [{"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 2, "creation_date": 1489612717, "post_id": 42820816, "comment_id": 72753484, "body": "You just explained in your answer that the result of <code>input</code> is a string. Why do you suggest do compare it to a number then?"}], "tags": [], "owner": {"reputation": 4357, "user_id": 1125592, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e4d46a8d204b274a6e7ea6ea3598ba94?s=128&d=identicon&r=PG", "display_name": "James R", "link": "https://stackoverflow.com/users/1125592/james-r"}, "is_accepted": true, "score": 2, "last_activity_date": 1489612757, "last_edit_date": 1489612757, "creation_date": 1489612537, "answer_id": 42820816, "question_id": 42820509, "link": "https://stackoverflow.com/questions/42820509/can-you-use-input-to-accept-both-an-integer-and-a-string/42820816#42820816", "title": "Can you use input to accept both an integer and a string?", "body": "<p>So <code>input()</code> always returns a string. You can see the docs here:</p>\n\n<p><a href=\"https://docs.python.org/3/library/functions.html#input\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/functions.html#input</a></p>\n\n<p>What you could do is something like this:</p>\n\n<pre><code>choice2 = input('--&gt; ')\n\nif choice2.isnumeric() and (int(choice2) == 99):\n    break\n</code></pre>\n\n<p>this avoids you to type check and catch errors that aren't important.</p>\n\n<p>see below for how isnumeric works with different numeric types:</p>\n\n<pre><code>In [12]: a='1'\n\nIn [13]: a.isnumeric()\nOut[13]: True\n\nIn [14]: a='1.0'\n\nIn [15]: a.isnumeric()\nOut[15]: False\n\nIn [16]: a='a'\n\nIn [17]: a.isnumeric()\nOut[17]: False\n</code></pre>\n"}], "owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1291, "favorite_count": 0, "accepted_answer_id": 42820816, "answer_count": 1, "score": 0, "last_activity_date": 1494059368, "creation_date": 1489611304, "last_edit_date": 1494059368, "question_id": 42820509, "link": "https://stackoverflow.com/questions/42820509/can-you-use-input-to-accept-both-an-integer-and-a-string", "title": "Can you use input to accept both an integer and a string?", "body": "<p>I have a small script I have been working on for practice with Python. I am having trouble getting my input to accept a number for an if statement and also accept string as lower case.</p>\n\n<p>I want to tell my script for any input if the user types '99' then close the program. So far it works where I have <code>int(input())</code>, but it won't work where I have <code>input()</code>. What am I doing wrong or is it not something I can do?</p>\n\n<p>Right now my <code>if</code> statement looks like:</p>\n\n<pre><code>if choice1 == 99:\n    break\n</code></pre>\n\n<p>Should I just make 99 into a string by quoting it?</p>\n\n<p>Maybe something like this:</p>\n\n<pre><code>if choice1 == \"99\":\n    break\n</code></pre>\n\n<p>Here is the script:</p>\n\n<pre><code>global flip\nflip = True\nglobal prun\nprun = False\n\ndef note_finder(word):\n    prun = True\n    while prun == True:\n        print ('\\n','\\n','Type one of the following keywords: ','\\n','\\n', keywords,)\n        choice2 = input('--&gt; ').lower()\n        if choice2 == 'exit':\n            print ('Exiting Function')\n            prun = False\n            start_over(input)\n        elif choice2 == 99:   # this is where the scrip doesnt work\n            break             # for some reason it skips this elif\n        elif choice2 in notes:\n            print (notes[choice2],'\\n')\n        else:\n            print ('\\n',\"Not a Keyword\",'\\n')\n\ndef start_over(word):\n    flip = True\n    while flip == True:\n        print ('# Type one of the following options:\\n# 1 \\n# Type \"99\" to exit the program')\n        choice1 = int(input('--&gt; '))\n        if choice1 == 99:\n            break\n        elif choice1 &lt; 1 or choice1 &gt; 1:\n            print (\"Not an option\")\n        else:\n            flip = False\n            note_finder(input)\n\n\nwhile flip == True:\n    print ('# Type one of the following options:\\n# 1 \\n# Type \"99\" to exit the program')\n    choice1 = int(input('--&gt; '))\n    if choice1 == 99:\n        break\n    elif choice1 &lt; 1 or choice1 &gt; 1:\n        print (\"Not an option\")\n    else:\n        flip = False\n        note_finder(input)\n</code></pre>\n"}, {"tags": ["python", "pandas", "matplotlib", "python-3.6"], "comments": [{"owner": {"reputation": 25463, "user_id": 5003756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8BUMb.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/5003756/james"}, "edited": false, "score": 1, "creation_date": 1489612215, "post_id": 42820496, "comment_id": 72753212, "body": "You have way too much code here.  Please provide a <b>minimal</b>, complete, and verifiable example."}, {"owner": {"reputation": 3, "user_id": 6581221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b568b322ec5f59c6f7b13d98086c9e9?s=128&d=identicon&r=PG&f=1", "display_name": "econ99", "link": "https://stackoverflow.com/users/6581221/econ99"}, "reply_to_user": {"reputation": 25463, "user_id": 5003756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8BUMb.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/5003756/james"}, "edited": false, "score": 0, "creation_date": 1489613190, "post_id": 42820496, "comment_id": 72753742, "body": "Shortened it down to where I think the issue may fall under. Thanks for the input."}, {"owner": {"reputation": 25463, "user_id": 5003756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8BUMb.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/5003756/james"}, "edited": false, "score": 0, "creation_date": 1489613421, "post_id": 42820496, "comment_id": 72753849, "body": "What version of matplotlib are you using?"}, {"owner": {"reputation": 3, "user_id": 6581221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b568b322ec5f59c6f7b13d98086c9e9?s=128&d=identicon&r=PG&f=1", "display_name": "econ99", "link": "https://stackoverflow.com/users/6581221/econ99"}, "reply_to_user": {"reputation": 25463, "user_id": 5003756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8BUMb.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/5003756/james"}, "edited": false, "score": 0, "creation_date": 1489613515, "post_id": 42820496, "comment_id": 72753889, "body": "I am using matplotlib 2.0.0"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6581221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b568b322ec5f59c6f7b13d98086c9e9?s=128&d=identicon&r=PG&f=1", "display_name": "econ99", "link": "https://stackoverflow.com/users/6581221/econ99"}, "edited": false, "score": 0, "creation_date": 1489620199, "post_id": 42822001, "comment_id": 72756719, "body": "It works! I really appreciate it! I added two figures to the top(x-axis dates are monthly), first to show the results and then as I zoom in. As a final follow up question, how could I fill out more of the x-axis? In the second figure, how do I get the months to show up upon zooming in?"}, {"owner": {"reputation": 25463, "user_id": 5003756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8BUMb.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/5003756/james"}, "reply_to_user": {"reputation": 3, "user_id": 6581221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b568b322ec5f59c6f7b13d98086c9e9?s=128&d=identicon&r=PG&f=1", "display_name": "econ99", "link": "https://stackoverflow.com/users/6581221/econ99"}, "edited": false, "score": 0, "creation_date": 1489714056, "post_id": 42822001, "comment_id": 72803424, "body": "Try using <code>plt.tight_layout()</code> before you adjust the vertical spacing between the graphs.  Also please remember to mark the question as answered :)"}, {"owner": {"reputation": 3, "user_id": 6581221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b568b322ec5f59c6f7b13d98086c9e9?s=128&d=identicon&r=PG&f=1", "display_name": "econ99", "link": "https://stackoverflow.com/users/6581221/econ99"}, "edited": false, "score": 0, "creation_date": 1489714733, "post_id": 42822001, "comment_id": 72803594, "body": "I tried using <code>plt.tight_layout()</code> but for some reason it&#39;s still not working."}], "tags": [], "owner": {"reputation": 25463, "user_id": 5003756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8BUMb.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/5003756/james"}, "is_accepted": true, "score": 2, "last_activity_date": 1489617354, "creation_date": 1489617354, "answer_id": 42822001, "question_id": 42820496, "link": "https://stackoverflow.com/questions/42820496/matplotlib-missing-x-tick-labels/42822001#42822001", "title": "Matplotlib missing x tick labels", "body": "<p>In matplotlib, using <code>sharex</code> or <code>sharey</code> turns off the ticklabels by default in version 2.  So you can drop the pieces of code that set the label visibility to <code>False</code>.  Also, rather than iterating over each label to change the parameters, you can set the parameters for all of them in one shot using <code>setp</code>.</p>\n\n<p>I had to make fake data to simulate your graphs, so my data may look bizarre. </p>\n\n<pre><code>plt.figure()\nax1 = plt.subplot2grid((8,1),(0,0), rowspan=4, colspan=1)\nax2 = plt.subplot2grid((8,1),(4,0), rowspan=2, colspan=1, sharex=ax1)\nax3 = plt.subplot2grid((8,1),(6,0), rowspan=2, colspan=1, sharex=ax1)\n\nax1.yaxis.set_major_locator(mticker.MaxNLocator(nbins=10, prune='lower')\nax3.yaxis.set_major_locator(mticker.MaxNLocator(nbins=5, prune='upper'))\n\nmain.dropna(inplace=True)\nmain['sales1'].plot(ax=ax1)\nmain['sales2'].plot(ax=ax1)\ncmain.plot(ax=ax2)\nmain[['rollsales1', 'rollsales2']].plot(ax=ax3)\n\n# set the xaxis label\nplt.setp(ax3.xaxis.get_label(), visible=True, text='Dates')\n# set the ticks\nplt.setp(ax3.get_xticklabels(), visible=True, rotation=30, ha='right')\n# turn off minor ticks\nplt.minorticks_off()\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/LzXKs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LzXKs.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 3, "user_id": 6581221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b568b322ec5f59c6f7b13d98086c9e9?s=128&d=identicon&r=PG&f=1", "display_name": "econ99", "link": "https://stackoverflow.com/users/6581221/econ99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8117, "favorite_count": 0, "accepted_answer_id": 42822001, "answer_count": 1, "score": 0, "last_activity_date": 1489724594, "creation_date": 1489611246, "last_edit_date": 1489724594, "question_id": 42820496, "link": "https://stackoverflow.com/questions/42820496/matplotlib-missing-x-tick-labels", "title": "Matplotlib missing x tick labels", "body": "<p>Once I run the code below, the x tick labels for the third plot, ax3, does not show up. Yet, I only removed the x tick labels for ax1 and ax2. Any solution to having the dates appear on the x axis of my third plot, ax3?</p>\n\n<pre><code>plt.figure()\nax1 = plt.subplot2grid((8,1),(0,0), rowspan=4, colspan=1)\nax1.yaxis.set_major_locator(mticker.MaxNLocator(nbins=10, prune='lower'))\nplt.setp(ax1.get_xticklabels(), visible=False)\n\nax2 = plt.subplot2grid((8,1),(4,0), rowspan=2, colspan=1, sharex = ax1)\nplt.setp(ax2.get_xticklabels(), visible=False)\n\nax3 = plt.subplot2grid((8,1),(6,0), rowspan=2, colspan=1, sharex = ax1)\nax3.xaxis.set_major_locator(mticker.MaxNLocator(10))\nax3.xaxis.set_minor_locator(mticker.MaxNLocator(20))\n\n'''\n# This has been ***removed*** in corrected version\nfor label in ax3.xaxis.get_ticklabels():\n        label.set_rotation(45)\n        plt.xlabel('Dates') #This label does not appear in the figure either\n'''\n\nax3.yaxis.set_major_locator(mticker.MaxNLocator(nbins=5, prune='upper'))\n\nmain.dropna(inplace=True)                          \nmain['sales1'].plot(ax=ax1)\nmain['sales2'].plot(ax=ax1)\ncmain.plot(ax=ax2)\nmain[['rollsales1', 'rollsales2']].plot(ax=ax3)\n\n'''\n# This has been added to corrected version.   \nplt.setp(ax3.xaxis.get_label(), visible=True, text='Dates')\nplt.setp(ax3.get_xticklabels(), visible=True, rotation=30, ha='right')\n'''    \n\nplt.show()\n</code></pre>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 2180, "user_id": 526904, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e0cd6a32ecba27f5e6aea1f7f15be539?s=128&d=identicon&r=PG", "display_name": "Hoopdady", "link": "https://stackoverflow.com/users/526904/hoopdady"}, "edited": false, "score": 0, "creation_date": 1489611131, "post_id": 42820397, "comment_id": 72752643, "body": "<code>raw_input</code> is going to cause the system to wait until you enter something before it executes any more code. You can check the time after they enter something and see if its greater than 10 seconds and tell them they died, but that means the input will show forever until they enter something. If you&#39;re not OK with that, then you&#39;ll have to kick off some parallel process that can kill your input thread."}, {"owner": {"reputation": 495, "user_id": 7227829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jybi3.jpg?s=128&g=1", "display_name": "Charlie G", "link": "https://stackoverflow.com/users/7227829/charlie-g"}, "edited": false, "score": 0, "creation_date": 1489611142, "post_id": 42820397, "comment_id": 72752650, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/1335507/keyboard-input-with-timeout-in-python\">Keyboard input with timeout in Python</a>"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1489611168, "post_id": 42820397, "comment_id": 72752660, "body": "<a href=\"http://stackoverflow.com/questions/14029548/input-with-time-limit-countdown\" title=\"input with time limit countdown\">stackoverflow.com/questions/14029548/&hellip;</a>"}, {"owner": {"reputation": 1290, "user_id": 4180176, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1022787394506806/picture?type=large", "display_name": "Joshua Nixon", "link": "https://stackoverflow.com/users/4180176/joshua-nixon"}, "edited": false, "score": 1, "creation_date": 1489611186, "post_id": 42820397, "comment_id": 72752671, "body": "<a href=\"http://stackoverflow.com/a/14920854/4180176\">stackoverflow.com/a/14920854/4180176</a> - create a thread timer then check to the timer after input has been made"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 7136668, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-V-K3zwcc2Zk/AAAAAAAAAAI/AAAAAAAAACA/1V3A4PecbBo/photo.jpg?sz=128", "display_name": "KendoClaw", "link": "https://stackoverflow.com/users/7136668/kendoclaw"}, "edited": false, "score": 0, "creation_date": 1489613501, "post_id": 42820470, "comment_id": 72753881, "body": "<a href=\"http://stackoverflow.com/a/3911477/7136668\">stackoverflow.com/a/3911477/7136668</a> actually this one looks good for me but the thing is iam new to python so i couldn&#39;t find a way to merge this with my trap() function."}], "tags": [], "owner": {"reputation": 1747, "user_id": 2896976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3baa97daedb276fbd0cdca06d6de4d2d?s=128&d=identicon&r=PG&f=1", "display_name": "Jesse", "link": "https://stackoverflow.com/users/2896976/jesse"}, "is_accepted": false, "score": 0, "last_activity_date": 1489611151, "last_edit_date": 1495535396, "creation_date": 1489611151, "answer_id": 42820470, "question_id": 42820397, "link": "https://stackoverflow.com/questions/42820397/end-a-python-script-after-a-certain-amount-of-time/42820470#42820470", "title": "End a python script after a certain amount of time", "body": "<p>What your looking to accomplish can be done with signals: <a href=\"https://stackoverflow.com/a/2282656/2896976\">https://stackoverflow.com/a/2282656/2896976</a></p>\n\n<p>Unfortunately there isn't really a friendly way to handle this. Normally for a game you would call this every frame, but a call like <code>raw_input</code> is what's known as blocking. That is, the program can't do anything until it finishes (but if the user never says anything it won't finish).</p>\n"}, {"tags": [], "owner": {"reputation": 170, "user_id": 6471375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YqAjU.jpg?s=128&g=1", "display_name": "cmeadows", "link": "https://stackoverflow.com/users/6471375/cmeadows"}, "is_accepted": true, "score": 0, "last_activity_date": 1489611676, "last_edit_date": 1489611676, "creation_date": 1489611335, "answer_id": 42820512, "question_id": 42820397, "link": "https://stackoverflow.com/questions/42820397/end-a-python-script-after-a-certain-amount-of-time/42820512#42820512", "title": "End a python script after a certain amount of time", "body": "<p>Try this. It uses <code>signal</code> to send a signal back within 10 seconds from the print statement. If you want it to be after the first input, move the signal calls.</p>\n\n<pre><code>import signal\nfrom sys import exit\n\ndef trap():\n    print \"You've fallen into a trap,you have 10 seconds to type the word \\\"Get me out\\\"\"\n    signal.signal(signal.SIGALRM, die)\n    signal.alarm(10)\n\n    user_input = raw_input(\"&gt; \")\n    right_choice = \"Get me out\"\n\n    if *SOME CODE*:\n        *MORE CODE*\n        signal.alarm(0)\n\ndef die(signum, frame):\n    print \"Try again\"\n    signal.alarm(0)\n    exit(0)\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 7136668, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-V-K3zwcc2Zk/AAAAAAAAAAI/AAAAAAAAACA/1V3A4PecbBo/photo.jpg?sz=128", "display_name": "KendoClaw", "link": "https://stackoverflow.com/users/7136668/kendoclaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 0, "accepted_answer_id": 42820512, "answer_count": 2, "score": 1, "last_activity_date": 1548254071, "creation_date": 1489610874, "last_edit_date": 1548254071, "question_id": 42820397, "link": "https://stackoverflow.com/questions/42820397/end-a-python-script-after-a-certain-amount-of-time", "title": "End a python script after a certain amount of time", "body": "<p>I am trying to make a simple python game to train my skills,it's something like a dungeon with traps and things like that here's a part of the game code:</p>\n\n<pre><code>from sys import exit\n\ndef trap():\n    print \"You've fallen into a trap,you have 10 seconds to type the word \\\"Get me out\\\"\"\n\n    user_input = raw_input(\"&gt; \")\n\n    right_choice = \"Get me out\"\n\n    if *SOME CODE*:\n        *MORE CODE*\n    else:\n        die(\"you died,you were too slow\")\n\ndef die(why):\n    print why , \"Try again\"\n    exit(0)\n</code></pre>\n\n<p>as u can see i want to end the python script after 10 seconds if the user_input wasn't equal to right_choice by replacing <em>SOME CODE</em>,<em>MORE CODE</em> in the code example above,how to do that?</p>\n"}, {"tags": ["python", "pyqt", "pyqt4", "pyqt5", "qslider"], "comments": [{"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 1, "creation_date": 1489630536, "post_id": 42820380, "comment_id": 72759512, "body": "<a href=\"https://doc.qt.io/qt-5/qdoublespinbox.html\" rel=\"nofollow noreferrer\">QDoubleSpinBox</a>."}], "answers": [{"tags": [], "owner": {"reputation": 1295, "user_id": 3212246, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/c8d82749b8b5ebcba450be264de56f21?s=128&d=identicon&r=PG&f=1", "display_name": "dissidia", "link": "https://stackoverflow.com/users/3212246/dissidia"}, "is_accepted": false, "score": 1, "last_activity_date": 1489772935, "creation_date": 1489772935, "answer_id": 42864102, "question_id": 42820380, "link": "https://stackoverflow.com/questions/42820380/use-float-for-qslider/42864102#42864102", "title": "Use float for QSlider", "body": "<p>After much findings, this works for me:</p>\n\n<pre><code># Connection Signals\n\n# When user tweaks using the slider\nself.slider.valueChanged[int].connect(self.update_spinbox)\n# When user modify via the spinbox\nself.spinbox_value.editingFinished.connect(self.update_slider)\n\n\n# Functions for each modication made towards slider and spinbox\ndef update_slider(self):\n    # spinbox_value uses float/ doubles type\n    # '*100' is used to convert it into integer as QSlider\n    # only register integer type\n    spinbox_value = self.spinbox_value.value() * 100\n    self.slider.setSliderPosition(spinbox_value)\n\ndef update_spinbox(self, value):\n    # QSlider only uses integer type\n    # Need to convert the value from integer into float\n    # and divides it by 100\n    self.spinbox_value.setValue(float(value) / 100)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2686, "user_id": 9705687, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v7dmz.jpg?s=128&g=1", "display_name": "bfris", "link": "https://stackoverflow.com/users/9705687/bfris"}, "is_accepted": false, "score": 3, "last_activity_date": 1527050575, "last_edit_date": 1527050575, "creation_date": 1526076294, "answer_id": 50300848, "question_id": 42820380, "link": "https://stackoverflow.com/questions/42820380/use-float-for-qslider/50300848#50300848", "title": "Use float for QSlider", "body": "<p>@dissidia's answer is good. But if you have a lot of sliders in your app or if you need several different scale factors, it pays to subclass QSlider to make your own QDoubleSlider.</p>\n\n<p>The class below is based on the work of others, but has an extra feature you'll want if you link to a QLineEdit or QDoubleSpinBox: a new signal for valueChanged called doubleValueChanged.</p>\n\n<pre><code>class DoubleSlider(QSlider):\n\n    # create our our signal that we can connect to if necessary\n    doubleValueChanged = pyqtSignal(float)\n\n    def __init__(self, decimals=3, *args, **kargs):\n        super(DoubleSlider, self).__init__( *args, **kargs)\n        self._multi = 10 ** decimals\n\n        self.valueChanged.connect(self.emitDoubleValueChanged)\n\n    def emitDoubleValueChanged(self):\n        value = float(super(DoubleSlider, self).value())/self._multi\n        self.doubleValueChanged.emit(value)\n\n    def value(self):\n        return float(super(DoubleSlider, self).value()) / self._multi\n\n    def setMinimum(self, value):\n        return super(DoubleSlider, self).setMinimum(value * self._multi)\n\n    def setMaximum(self, value):\n        return super(DoubleSlider, self).setMaximum(value * self._multi)\n\n    def setSingleStep(self, value):\n        return super(DoubleSlider, self).setSingleStep(value * self._multi)\n\n    def singleStep(self):\n        return float(super(DoubleSlider, self).singleStep()) / self._multi\n\n    def setValue(self, value):\n        super(DoubleSlider, self).setValue(int(value * self._multi))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1145, "user_id": 4278282, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/54b37d0f15b0cf40aab8286384ad17a6?s=128&d=identicon&r=PG&f=1", "display_name": "Siyh", "link": "https://stackoverflow.com/users/4278282/siyh"}, "is_accepted": false, "score": 0, "last_activity_date": 1587896691, "creation_date": 1587896691, "answer_id": 61439160, "question_id": 42820380, "link": "https://stackoverflow.com/questions/42820380/use-float-for-qslider/61439160#61439160", "title": "Use float for QSlider", "body": "<p>I modified bfris's answer so that the user cannot track the slider between the steps as shown below. The class uses a different method to implement the use of floats, which means that the number of decimal places doesn't need to be specified.</p>\n\n<p>The <code>SetInterval</code> method is equivalent to combining the <code>setTickInterval</code> and <code>setSingleStep</code> methods, but also stops the slider being positioned between tick values.</p>\n\n<p>The class also allows the index of the point selected on the slider to be set and read.</p>\n\n<pre><code>class DoubleSlider(qw.QSlider):\n\n    def __init__(self, *args, **kargs):\n        super(DoubleSlider, self).__init__( *args, **kargs)\n        self._min = 0\n        self._max = 99\n        self.interval = 1\n\n    def setValue(self, value):\n        index = round((value - self._min) / self.interval)\n        return super(DoubleSlider, self).setValue(index)\n\n    def value(self):\n        return self.index * self.interval + self._min\n\n    @property\n    def index(self):\n        return super(DoubleSlider, self).value()\n\n    def setIndex(self, index):\n        return super(DoubleSlider, self).setValue(index)\n\n    def setMinimum(self, value):\n        self._min = value\n        self._range_adjusted()\n\n    def setMaximum(self, value):\n        self._max = value\n        self._range_adjusted()\n\n    def setInterval(self, value):\n        # To avoid division by zero\n        if not value:\n            raise ValueError('Interval of zero specified')\n        self.interval = value\n        self._range_adjusted()\n\n    def _range_adjusted(self):\n        number_of_steps = int((self._max - self._min) / self.interval)\n        super(DoubleSlider, self).setMaximum(number_of_steps)\n</code></pre>\n"}], "owner": {"reputation": 1295, "user_id": 3212246, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/c8d82749b8b5ebcba450be264de56f21?s=128&d=identicon&r=PG&f=1", "display_name": "dissidia", "link": "https://stackoverflow.com/users/3212246/dissidia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4543, "favorite_count": 2, "answer_count": 3, "score": 3, "last_activity_date": 1587896691, "creation_date": 1489610804, "last_edit_date": 1526076937, "question_id": 42820380, "link": "https://stackoverflow.com/questions/42820380/use-float-for-qslider", "title": "Use float for QSlider", "body": "<p>I have a QLineEdit and a QSlider in which it interacts with each other.</p>\n\n<p>Eg. If I set a value in the QLineEdit, the slider will be updated, or if I slide the slider across, it will updates the value in QLineEdit</p>\n\n<pre><code># If user change value on the slider\nself.timer_slider.valueChanged.connect(self.set_value)\n# If user sets a value in the text box instead\nself.timer_value.textChanged.connect(self.set_slider)\n\ndef set_slider(self, value):\n    self.timer_slider.setValue(int(value))\n\ndef set_value(self, value):\n    self.timer_value.setText(str(value))\n</code></pre>\n\n<p>Is there anyway that I can use <code>float</code> instead of <code>int</code> values?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 3, "creation_date": 1489610896, "post_id": 42820364, "comment_id": 72752528, "body": "Any program that displays a Web page is called a Web browser. You attempt to implement your own Web browser. Good luck."}, {"owner": {"reputation": 2260, "user_id": 5240970, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/16a645b64ff208b3ba9269dcf90305fd?s=128&d=identicon&r=PG&f=1", "display_name": "Kabard", "link": "https://stackoverflow.com/users/5240970/kabard"}, "edited": false, "score": 0, "creation_date": 1489611057, "post_id": 42820364, "comment_id": 72752604, "body": "this might be useful: <a href=\"http://stackoverflow.com/questions/15138614/how-can-i-read-the-contents-of-an-url-with-python\" title=\"how can i read the contents of an url with python\">stackoverflow.com/questions/15138614/&hellip;</a>"}, {"owner": {"reputation": 18987, "user_id": 2470818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c3e0df5ee75b18ce0c8aeadf4433e151?s=128&d=identicon&r=PG&f=1", "display_name": "vallentin", "link": "https://stackoverflow.com/users/2470818/vallentin"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1489611086, "post_id": 42820364, "comment_id": 72752620, "body": "Adding to @DYZ comment. By default Tkinter does not have any HTML rendering capabilities."}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 1, "creation_date": 1489611110, "post_id": 42820364, "comment_id": 72752634, "body": "Building a browser from scratch should be really hard. Prepare to spend half of your life doing this :P"}, {"owner": {"reputation": 763, "user_id": 7015861, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-ALpUk7Cx5ZE/AAAAAAAAAAI/AAAAAAAAATE/nla7Tao0zAg/photo.jpg?sz=128", "display_name": "Noah Cristino", "link": "https://stackoverflow.com/users/7015861/noah-cristino"}, "edited": false, "score": 0, "creation_date": 1489611251, "post_id": 42820364, "comment_id": 72752705, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/28799952/how-do-i-open-a-website-in-a-tkinter-window\">How do I open a website in a Tkinter window?</a>"}, {"owner": {"reputation": 109, "user_id": 7367015, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-p2oekkyThac/AAAAAAAAAAI/AAAAAAAAAmg/fyiez9ZYmwE/photo.jpg?sz=128", "display_name": "NeelJ 83", "link": "https://stackoverflow.com/users/7367015/neelj-83"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1489612717, "post_id": 42820364, "comment_id": 72753483, "body": "@DYZ I am not implementing a browser I just want to be  able to create a simple browser"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 1, "creation_date": 1489612958, "post_id": 42820364, "comment_id": 72753616, "body": "What is the difference between &#39;implementing&#39; and &#39;creating&#39;???"}], "answers": [{"tags": [], "owner": {"reputation": 708, "user_id": 7526789, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/266390177128653/picture?type=large", "display_name": "Anmol Gautam", "link": "https://stackoverflow.com/users/7526789/anmol-gautam"}, "is_accepted": false, "score": 1, "last_activity_date": 1542971176, "last_edit_date": 1542971176, "creation_date": 1489611352, "answer_id": 42820515, "question_id": 42820364, "link": "https://stackoverflow.com/questions/42820364/displaying-websites-with-python/42820515#42820515", "title": "Displaying Websites with Python", "body": "<p>Here is a simpler version of webbrowser using <code>PyQt5</code> :</p>\n\n<pre><code>import sys\nfrom PyQt5 import QtWidgets,QtGui,QtCore\nfrom PyQt5.QtWebEngineWidgets import *\napp=QtWidgets.QApplication(sys.argv)\nw=QWebEngineView()\nw.load(QtCore.QUrl('https://google.com')) ## load google on startup\nw.showMaximized()\napp.exec_()\n</code></pre>\n\n<p>You can now add different widgets to it .\nIn python you have two most common ways to make a webbrowser 1. by using gtk webkit 2. by QtWebEngine under PyQt5.</p>\n\n<p>Webkit is based upon Safari while QtWebEngine is based on Chromium. You can decide which one suits you the best. Hope it helps.</p>\n"}], "owner": {"reputation": 109, "user_id": 7367015, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-p2oekkyThac/AAAAAAAAAAI/AAAAAAAAAmg/fyiez9ZYmwE/photo.jpg?sz=128", "display_name": "NeelJ 83", "link": "https://stackoverflow.com/users/7367015/neelj-83"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2080, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1542971176, "creation_date": 1489610758, "last_edit_date": 1489677283, "question_id": 42820364, "link": "https://stackoverflow.com/questions/42820364/displaying-websites-with-python", "title": "Displaying Websites with Python", "body": "<p>I am making an os in python, but I need a web browser. Currently I am using the os.startfile method to launch chrome, but I want another way. I want a program that a user can enter a webpage and displaying the web page without using chrome, firefox, safari etc. </p>\n\n<p>Here is the basic framework I have:</p>\n\n<pre><code>from tkinter import *\nimport webbrowser as wb\nwindow = Tk()\nwindow.configure(bg=\"Dark Red\")\nwindow.geometry(\"1000x1000\")\nwindow.title(\"Hyper Web Browser\")\nwindow.iconbitmap(\"icon.ico\")\n''' Defined Functions'''\n\n\ndef submit_url():\n  wb.open_new_tab(Address_Bar.get())\n  file2write = open(\"History.txt\", \"a\")\n  file2write.write([\"\\n\", Address_Bar.get()])\n  return submit_url\n  '''Objects'''\n  Address_Bar = Entry(\n    bg=\"White\",\n    bd=0,\n    font=(\"Comic\", 25),\n    width=100\n  )\n  Tab_1 = Label(\n    bg=\"Red\",\n    bd=0,\n    width=20,\n    height=3\n  )\n  Return = Button(\n    command=submit_url()\n  )\n  Address_Bar.place(x=20, y=60)\n  Tab_1.place(x=0, y=0)\n  Return.pack()\n\nwindow.mainloop()\n</code></pre>\n\n<p>However, this program launches the web page into the user's default browser. Hence, I want to display the web page without using any other web browsers.</p>\n"}, {"tags": ["python", "regex"], "answers": [{"tags": [], "owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "is_accepted": false, "score": 0, "last_activity_date": 1489611023, "creation_date": 1489611023, "answer_id": 42820436, "question_id": 42820363, "link": "https://stackoverflow.com/questions/42820363/python-re-module-unexpected-behaviour-with-b-and/42820436#42820436", "title": "Python re module - Unexpected behaviour with \\b and &#39;-&#39;", "body": "<p>You will certainly need:</p>\n\n<pre><code>re.compile(r'''\n              [ ]?\n              (?P&lt;element&gt; [a-zA-Z])         \n              [ ]+\n              (?P&lt;x_axis&gt; \\b-?[0-9]+[.][0-9]+\\b)  # the first '\\b' seems to be\n                                                  # causing this issue\n              ''', re.VERBOSE)\n</code></pre>\n\n<p>Note the <code>r</code> in the <code>compile()</code> call.</p>\n"}, {"comments": [{"owner": {"reputation": 7975, "user_id": 3836111, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bc8e3526756540925b0536455b280205?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian Proske", "link": "https://stackoverflow.com/users/3836111/sebastian-proske"}, "edited": false, "score": 2, "creation_date": 1489611541, "post_id": 42820446, "comment_id": 72752856, "body": "This is only part of the issue - as OP doesn&#39;t use raw string notation <code>\\b</code> is a literal backspace character."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1489611783, "last_edit_date": 1489611783, "creation_date": 1489611057, "answer_id": 42820446, "question_id": 42820363, "link": "https://stackoverflow.com/questions/42820363/python-re-module-unexpected-behaviour-with-b-and/42820446#42820446", "title": "Python re module - Unexpected behaviour with \\b and &#39;-&#39;", "body": "<p><code>\\b</code> matches between a word character and a non-word character. Both space and <code>-</code> are non-word characters, so <code>\\b</code> will not match between them.</p>\n\n<p>Word characters are letters, digits, and underscore. Non-word characters are everything else.</p>\n\n<p>Also, you need to use a raw string delimited by <code>r''' ... '''</code>, so that escape sequences like <code>\\b</code> will be passed to the <code>re</code> module, not processed as string escapes.</p>\n"}, {"tags": [], "owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": false, "score": 1, "last_activity_date": 1489611600, "creation_date": 1489611600, "answer_id": 42820584, "question_id": 42820363, "link": "https://stackoverflow.com/questions/42820363/python-re-module-unexpected-behaviour-with-b-and/42820584#42820584", "title": "Python re module - Unexpected behaviour with \\b and &#39;-&#39;", "body": "<p>There are two main issues here:</p>\n\n<ul>\n<li>Word boundaries <code>\\b</code> are <em>ambiguous</em> as their meaning is context dependent. In this case, if there is a <code>-</code> before the digit, <code>\\b-?[0-9]</code> will only match if there is a word char before the <code>-</code>. You need to place <code>\\b</code> <em>after</em>  <code>-?</code>. If you remove this <code>\\b</code>, your regex will start matching the digits in any context, and  I suspect you still want to match whole words only.</li>\n<li>You need to declare the regex with a <em>raw string literal</em> so as <code>\\b</code> was treated as a word boundary and not as a backspace char.</li>\n</ul>\n\n<p>Use</p>\n\n<pre><code>import re\nr=re.compile(r'''\n              [ ]?\n              (?P&lt;element&gt; [a-zA-Z])         \n              [ ]+\n              (?P&lt;x_axis&gt; -?\\b[0-9]+[.][0-9]+\\b)  # the first '\\b' seems to be\n                                                  # causing this issue\n              ''', re.VERBOSE)\ns = ' C -1.97046278'\nprint(r.findall(s))\n</code></pre>\n\n<p>See an <a href=\"http://ideone.com/RnUiNd\" rel=\"nofollow noreferrer\">online Python demo</a></p>\n"}], "owner": {"reputation": 47, "user_id": 1536271, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/WG1Ag.jpg?s=128&g=1", "display_name": "padrezulmiro", "link": "https://stackoverflow.com/users/1536271/padrezulmiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1489611783, "creation_date": 1489610756, "question_id": 42820363, "link": "https://stackoverflow.com/questions/42820363/python-re-module-unexpected-behaviour-with-b-and", "title": "Python re module - Unexpected behaviour with \\b and &#39;-&#39;", "body": "<p>I was testing (using <a href=\"http://pythex.org/\" rel=\"nofollow noreferrer\"><em>pythex</em></a>) a regex match between</p>\n\n<pre><code>re.compile('''\n              [ ]?\n              (?P&lt;element&gt; [a-zA-Z])         \n              [ ]+\n              (?P&lt;x_axis&gt; \\b-?[0-9]+[.][0-9]+\\b)  # the first '\\b' seems to be\n                                                  # causing this issue\n              ''', re.VERBOSE)\n</code></pre>\n\n<p>and string <code>' C -1.97046278'</code>. This lead to no matches being found.</p>\n\n<p>Then, when I tried removing <code>\\b</code> <em>re</em> found the match for the aforementioned string. </p>\n\n<p>Is the syntax incorrect? Cause I've been reading the documentation for <em>re</em> and haven't found any mention of  this. </p>\n\n<p>Care to explain this behaviour for me?</p>\n"}, {"tags": ["jquery", "python", "json", "ajax", "django"], "comments": [{"owner": {"reputation": 1012, "user_id": 6650014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10157116047225461/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/6650014/alex"}, "edited": false, "score": 0, "creation_date": 1489610854, "post_id": 42820347, "comment_id": 72752501, "body": "What is the error? Is your page not rendering?"}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 7423107, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/292e7c75e1f89a3799beaf4e863de519?s=128&d=identicon&r=PG&f=1", "display_name": "Hannan", "link": "https://stackoverflow.com/users/7423107/hannan"}, "edited": false, "score": 0, "creation_date": 1489630713, "post_id": 42820429, "comment_id": 72759569, "body": "I&#39;ve fixed my code as per best of my knowledge but its still not working. I got error &quot;SyntaxError: JSON.parse: unexpected character at line 1 column 1 of the JSON data&quot; in console. Could you please help."}, {"owner": {"reputation": 1012, "user_id": 6650014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10157116047225461/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/6650014/alex"}, "reply_to_user": {"reputation": 47, "user_id": 7423107, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/292e7c75e1f89a3799beaf4e863de519?s=128&d=identicon&r=PG&f=1", "display_name": "Hannan", "link": "https://stackoverflow.com/users/7423107/hannan"}, "edited": false, "score": 0, "creation_date": 1489670622, "post_id": 42820429, "comment_id": 72779852, "body": "That means that whatever you are returning from your view is not valid JSON. Assure that your view is dumping JSON properly."}], "tags": [], "owner": {"reputation": 1012, "user_id": 6650014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10157116047225461/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/6650014/alex"}, "is_accepted": false, "score": 1, "last_activity_date": 1489610991, "creation_date": 1489610991, "answer_id": 42820429, "question_id": 42820347, "link": "https://stackoverflow.com/questions/42820347/in-django-how-to-pass-json-data-to-use-for-ajax-jquery/42820429#42820429", "title": "In Django how to pass JSON data to use for Ajax / jQuery?", "body": "<pre><code>$.getJSON(\"{{jsonData}}\", function(data)\n</code></pre>\n\n<p>Doesn't make sense. You are calling <code>getJSON</code> on rendered JSON from your view. You already have the data in your template. </p>\n\n<p>Depending on what template engine you are using, you should just be able to iterate over your <code>{{jsonData}}</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 7423107, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/292e7c75e1f89a3799beaf4e863de519?s=128&d=identicon&r=PG&f=1", "display_name": "Hannan", "link": "https://stackoverflow.com/users/7423107/hannan"}, "edited": false, "score": 0, "creation_date": 1489630757, "post_id": 42820510, "comment_id": 72759579, "body": "I&#39;ve tried to fix the code, any chance if you could check? Thx"}, {"owner": {"reputation": 4357, "user_id": 1125592, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e4d46a8d204b274a6e7ea6ea3598ba94?s=128&d=identicon&r=PG", "display_name": "James R", "link": "https://stackoverflow.com/users/1125592/james-r"}, "reply_to_user": {"reputation": 47, "user_id": 7423107, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/292e7c75e1f89a3799beaf4e863de519?s=128&d=identicon&r=PG&f=1", "display_name": "Hannan", "link": "https://stackoverflow.com/users/7423107/hannan"}, "edited": false, "score": 0, "creation_date": 1489674107, "post_id": 42820510, "comment_id": 72782441, "body": "@Hannan it doesn&#39;t look you fixed the server side code. Your still doing json.dumps on a string object. Just copy and past the very last of my <code>def index(request):</code> functions and see what happens. On the template side, you probably also want to do <code>var data = JSON.parse(&#39;{{jsonData|safe}}&#39;); </code> (i&#39;ll update my answer to reflect that)"}, {"owner": {"reputation": 47, "user_id": 7423107, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/292e7c75e1f89a3799beaf4e863de519?s=128&d=identicon&r=PG&f=1", "display_name": "Hannan", "link": "https://stackoverflow.com/users/7423107/hannan"}, "edited": false, "score": 0, "creation_date": 1489679660, "post_id": 42820510, "comment_id": 72786992, "body": "It worked, thank you. Just for my knowledge if you have time. What does |safe means when attached with JSON data? Also you mentioned that I should close the open file in python. The code is working fine but why is it necessary to close the open file?  Sorry if I&#39;m asking stupid questions but I&#39;m new to programming and self studying. Thanks again."}, {"owner": {"reputation": 4357, "user_id": 1125592, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e4d46a8d204b274a6e7ea6ea3598ba94?s=128&d=identicon&r=PG", "display_name": "James R", "link": "https://stackoverflow.com/users/1125592/james-r"}, "reply_to_user": {"reputation": 47, "user_id": 7423107, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/292e7c75e1f89a3799beaf4e863de519?s=128&d=identicon&r=PG&f=1", "display_name": "Hannan", "link": "https://stackoverflow.com/users/7423107/hannan"}, "edited": false, "score": 0, "creation_date": 1489684061, "post_id": 42820510, "comment_id": 72790205, "body": "@Hannan <a href=\"https://docs.djangoproject.com/en/1.10/ref/templates/builtins/#safe\" rel=\"nofollow noreferrer\">docs.djangoproject.com/en/1.10/ref/templates/builtins/#safe</a> should get you what you want about <code>|safe</code>"}], "tags": [], "owner": {"reputation": 4357, "user_id": 1125592, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e4d46a8d204b274a6e7ea6ea3598ba94?s=128&d=identicon&r=PG", "display_name": "James R", "link": "https://stackoverflow.com/users/1125592/james-r"}, "is_accepted": true, "score": 0, "last_activity_date": 1489674119, "last_edit_date": 1489674119, "creation_date": 1489611316, "answer_id": 42820510, "question_id": 42820347, "link": "https://stackoverflow.com/questions/42820347/in-django-how-to-pass-json-data-to-use-for-ajax-jquery/42820510#42820510", "title": "In Django how to pass JSON data to use for Ajax / jQuery?", "body": "<p>At this point here:</p>\n\n<p><code>data = open('data.json').read()</code></p>\n\n<p>data is already of type string.</p>\n\n<p>You don't need to \"turn this into json\" because it's already serialized (hopefully) as json.</p>\n\n<p>You can do this to prove it to yourself (and maybe check for errors along the way):</p>\n\n<pre><code>def index(request):\n    form = RequestForm()\n    data = open('data.json').read()\n    jsonData_loaded = json.loads(data)\n    jsonData = json.dumps(jsonData_loaded)\n    # I note here that you aren't closing the open file data.\n    return render(request, 'aceform/base.html', {'form': form, 'jsonData': jsonData})\n</code></pre>\n\n<p>But that would be super silly.</p>\n\n<p>It might make more sense to just do:</p>\n\n<pre><code>def index(request):\n    form = RequestForm()\n    with opened as open('data.json'):\n        data = json.load(opened)\n    jsonData = json.dumps(data)\n    return render(request, 'aceform/base.html', {'form': form, 'jsonData': jsonData})\n</code></pre>\n\n<p>I mean, it's probably also redundent to load and dump, but a.) how do you know that json on disk is valid and b.) you might carry over new line charectors or other random crap.</p>\n\n<p>(I wouldn't read from disk like that anyway for this kind of thing)</p>\n\n<p>The moral of the story here is, you already have a string. You could just pass it along and hope for the best on the FE side!</p>\n\n<p>Edit for FE:</p>\n\n<p>Oh, and then I just looked at your template.</p>\n\n<p>You don't actually need the whole $.getJSON function because you already have json.</p>\n\n<p>You can just do <code>var data = JSON.parse('{{jsonData|safe}}');</code></p>\n\n<p>and then go to town with that!</p>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 6925790, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yNtbN.jpg?s=128&g=1", "display_name": "GaoLiang", "link": "https://stackoverflow.com/users/6925790/gaoliang"}, "is_accepted": false, "score": 0, "last_activity_date": 1489657693, "creation_date": 1489657693, "answer_id": 42830438, "question_id": 42820347, "link": "https://stackoverflow.com/questions/42820347/in-django-how-to-pass-json-data-to-use-for-ajax-jquery/42830438#42830438", "title": "In Django how to pass JSON data to use for Ajax / jQuery?", "body": "<p>You can use a safe tag to pass json data to js/jquery,just like <code>{{ jsonData|safe }}</code></p>\n\n<p>I see your jsonData is already a string of the format of json.</p>\n\n<p>You can try this in your template like</p>\n\n<pre><code>&lt;script&gt;\n    $(function () {\n        var data = {{ jsonData|safe }}\n        console.log(data)\n        autoComplete = [];\n        for (var i = 0, len = data.length; i &lt; len; i++) {\n            autoComplete.push(data[i].iata + \", \" + data[i].name);\n        }\n        console.log(data);\n        $(\"#id_from_airport\").autocomplete({\n            source: autoComplete,\n            minLength: 3\n        });\n        $(\"#id_to_airport\").autocomplete({\n            source: autoComplete,\n            minLength: 3\n        });\n    });\n&lt;/script&gt;\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 7423107, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/292e7c75e1f89a3799beaf4e863de519?s=128&d=identicon&r=PG&f=1", "display_name": "Hannan", "link": "https://stackoverflow.com/users/7423107/hannan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1568, "favorite_count": 0, "accepted_answer_id": 42820510, "answer_count": 3, "score": 1, "last_activity_date": 1489674119, "creation_date": 1489610698, "last_edit_date": 1489630528, "question_id": 42820347, "link": "https://stackoverflow.com/questions/42820347/in-django-how-to-pass-json-data-to-use-for-ajax-jquery", "title": "In Django how to pass JSON data to use for Ajax / jQuery?", "body": "<p>I'm trying to use JSON data in Django to provide user option to search and select. I can load and extend data to html but not sure how to use it in jQuery. My code works just fine if I link my jQuery to some website outside my server. I mean if I can link it like that:</p>\n\n<pre><code>$.getJSON(\"http://meme.computer/stack/data.json\", function(data) {\n</code></pre>\n\n<h2><strong>My code is:</strong></h2>\n\n<p><strong>views.py:</strong></p>\n\n<pre><code>from django.shortcuts import render\nfrom aceform.forms import RequestForm\nimport json\n\ndef index(request):\n    form = RequestForm()\n    data = open('data.json').read()\n    jsonData = json.dumps(data)\n    return render(request, 'aceform/base.html', {'form': form, 'jsonData': jsonData})\n</code></pre>\n\n<p><strong>base.html:</strong></p>\n\n<pre><code>{% load staticfiles %}\n\n&lt;!doctype html&gt;\n&lt;html&gt;\n    &lt;head&gt;\n      &lt;link rel=\"stylesheet\" href=\"//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css\"&gt;\n      &lt;script src=\"https://code.jquery.com/jquery-1.12.4.js\"&gt;&lt;/script&gt;\n      &lt;script src=\"https://code.jquery.com/ui/1.12.1/jquery-ui.js\"&gt;&lt;/script&gt;\n      &lt;script&gt;\n     $(function() {\n        var data = JSON.parse(\"{{ jsonData }}\");\n        console.log(data)\n        autoComplete = [];\n            for (var i = 0, len = data.length; i &lt; len; i++) {\n                autoComplete.push(data[i].iata + \", \" + data[i].name);\n            }\n            console.log(data);\n            $( \"#id_from_airport\" ).autocomplete({\n                source: autoComplete,\n                minLength: 3\n            });\n            $( \"#id_to_airport\" ).autocomplete({\n                source: autoComplete,\n                minLength: 3\n            });\n     });\n    &lt;/script&gt;\n    &lt;/head&gt;\n\n    &lt;body&gt;\n        {% block content %}\n\n        {{ form.as_p }}\n\n        {% endblock content %}\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"}, {"tags": ["python", "beautifulsoup"], "answers": [{"comments": [{"owner": {"reputation": 399, "user_id": 5360025, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7575c5f19cbc757f7c1dd5196023ae23?s=128&d=identicon&r=PG&f=1", "display_name": "user6754289", "link": "https://stackoverflow.com/users/5360025/user6754289"}, "edited": false, "score": 0, "creation_date": 1489672230, "post_id": 42821649, "comment_id": 72781075, "body": "That works, but grabs all the text, when I only need it between the two headers. I&#39;ll try to modify what you gave me to see if it works, thanks!"}], "tags": [], "owner": {"reputation": 5839, "user_id": 6454584, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YR4dt.png?s=128&g=1", "display_name": "Zroq", "link": "https://stackoverflow.com/users/6454584/zroq"}, "is_accepted": true, "score": 7, "last_activity_date": 1489615845, "creation_date": 1489615845, "answer_id": 42821649, "question_id": 42820342, "link": "https://stackoverflow.com/questions/42820342/get-text-in-between-two-h2-headers-using-beautifulsoup/42821649#42821649", "title": "Get text in between two h2 headers using BeautifulSoup", "body": "<p>Check for <code>NavigableString</code> to check if the next sibling is a text node or <code>Tag</code> to check if it is an element.</p>\n\n<p>Break the loop if your next sibling is an header.</p>\n\n<pre><code>from bs4 import BeautifulSoup, NavigableString, Tag\nimport requests\n\nexample = \"\"\"&lt;h2&gt;Description&lt;/h2&gt;&lt;p&gt;This is the text I want &lt;/p&gt;&lt;p&gt;This is the text I want&lt;/p&gt;&lt;h2&gt;Next header&lt;/h2&gt;\"\"\"\n\nsoup = BeautifulSoup(example, 'html.parser')\nfor header in soup.find_all('h2'):\n    nextNode = header\n    while True:\n        nextNode = nextNode.nextSibling\n        if nextNode is None:\n            break\n        if isinstance(nextNode, NavigableString):\n            print (nextNode.strip())\n        if isinstance(nextNode, Tag):\n            if nextNode.name == \"h2\":\n                break\n            print (nextNode.get_text(strip=True).strip())\n</code></pre>\n"}], "owner": {"reputation": 399, "user_id": 5360025, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7575c5f19cbc757f7c1dd5196023ae23?s=128&d=identicon&r=PG&f=1", "display_name": "user6754289", "link": "https://stackoverflow.com/users/5360025/user6754289"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4298, "favorite_count": 3, "accepted_answer_id": 42821649, "answer_count": 1, "score": 3, "last_activity_date": 1489615845, "creation_date": 1489610689, "question_id": 42820342, "link": "https://stackoverflow.com/questions/42820342/get-text-in-between-two-h2-headers-using-beautifulsoup", "title": "Get text in between two h2 headers using BeautifulSoup", "body": "<p>I want to grab the text that comes after Description and before the Next Header.</p>\n\n<p>I know that:</p>\n\n<pre><code>In [8]: soup.findAll('h2')[6]\nOut[8]: &lt;h2&gt;Description&lt;/h2&gt;\n</code></pre>\n\n<p>However, I don\u2019t know how to grab the actual text. The problem is I have multiple links to do this on. \nSome have the p:</p>\n\n<pre><code>                                         &lt;h2&gt;Description&lt;/h2&gt;\n\n  &lt;p&gt;This is the text I want &lt;/p&gt;\n&lt;p&gt;This is the text I want&lt;/p&gt;   \n                                        &lt;h2&gt;Next header&lt;/h2&gt;\n</code></pre>\n\n<p>But, some don\u2019t:</p>\n\n<pre><code>&gt;                                       &lt;h2&gt;Description&lt;/h2&gt;\n&gt;                        This is the text I want                 \n&gt; \n&gt;                                       &lt;h2&gt;Next header&lt;/h2&gt;\n</code></pre>\n\n<p>Also on each one with the p, I can\u2019t just do soup.findAll(\u2018p\u2019)[22] because on some the \u2018p\u2019 is at 21 or 20.</p>\n"}, {"tags": ["python", "numpy", "dll"], "comments": [{"owner": {"reputation": 1290, "user_id": 4180176, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1022787394506806/picture?type=large", "display_name": "Joshua Nixon", "link": "https://stackoverflow.com/users/4180176/joshua-nixon"}, "edited": false, "score": 0, "creation_date": 1489610812, "post_id": 42820341, "comment_id": 72752476, "body": "If you are running python 3.x and getting an error in the 2.7 Python directory, surely you are trying to init numpy from 2.7. Add python 3.x to your path and remove python 2.7?"}, {"owner": {"reputation": 1, "user_id": 7717535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/834890e2fcf2248dffde6047103d0b54?s=128&d=identicon&r=PG&f=1", "display_name": "Kroush", "link": "https://stackoverflow.com/users/7717535/kroush"}, "reply_to_user": {"reputation": 1290, "user_id": 4180176, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1022787394506806/picture?type=large", "display_name": "Joshua Nixon", "link": "https://stackoverflow.com/users/4180176/joshua-nixon"}, "edited": false, "score": 0, "creation_date": 1489704459, "post_id": 42820341, "comment_id": 72800704, "body": "I have check the versions and it should not be an issue"}], "owner": {"reputation": 1, "user_id": 7717535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/834890e2fcf2248dffde6047103d0b54?s=128&d=identicon&r=PG&f=1", "display_name": "Kroush", "link": "https://stackoverflow.com/users/7717535/kroush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489610886, "creation_date": 1489610689, "last_edit_date": 1489610886, "question_id": 42820341, "link": "https://stackoverflow.com/questions/42820341/running-python-3-on-64bit-packages-updated-importerror-dll-load-failed-1-is", "title": "Running python 3 on 64bit, packages updated; ImportError: DLL load failed: %1 is not a valid Win32 application", "body": "<pre><code>Traceback (most recent call last):\n  File \"C:\\Python27\\Lib\\site-packages\\numpy\\core\\__init__.py\", line 16, in &lt;module&gt;\n    from . import multiarray\nImportError: DLL load failed: %1 is not a valid Win32 application.\n</code></pre>\n\n<p>This is the error I receive. I have updated my packages and am running on a x64 system. Any reason why I have this issue? </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1489610763, "post_id": 42820244, "comment_id": 72752448, "body": "It looks like they might have meant to use <a href=\"http://stackoverflow.com/questions/472000/usage-of-slots\"><code>__slots__</code></a>"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1489611106, "post_id": 42820244, "comment_id": 72752632, "body": "@RyanHaining: They set attributes not listed in <code>__attrs__</code>, though, such as <code>self.redirect_cache</code>. It looks like these are just the attributes they want to serialize in <code>__getstate__</code>."}, {"owner": {"reputation": 376, "user_id": 12141949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a5edcea5f63404a744b9c4ab9efc8e3?s=128&d=identicon&r=PG&f=1", "display_name": "0dminnimda", "link": "https://stackoverflow.com/users/12141949/0dminnimda"}, "edited": false, "score": 1, "creation_date": 1602600773, "post_id": 42820244, "comment_id": 113768218, "body": "this is only used for debugging (developer mode), aiohttp uses ATTRS for this"}], "answers": [{"tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 26, "last_activity_date": 1489610506, "creation_date": 1489610506, "answer_id": 42820292, "question_id": 42820244, "link": "https://stackoverflow.com/questions/42820244/python-attrs-explained/42820292#42820292", "title": "Python __attrs__ explained", "body": "<p>This is not a standard Python thing. As far as I can tell, it's only there to be used in the <code>__getstate__</code> method further down the class:</p>\n\n<pre><code>def __getstate__(self):\n    state = dict((attr, getattr(self, attr, None)) for attr in self.__attrs__)\n    state['redirect_cache'] = dict(self.redirect_cache)\n    return state\n</code></pre>\n\n<p>The name <code>__attrs__</code> is a poor choice, as names beginning and ending with <code>__</code> are reserved for core Python language features.</p>\n"}, {"tags": [], "owner": {"reputation": 2022, "user_id": 1236128, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DxsJR.png?s=128&g=1", "display_name": "Jonathan Komar", "link": "https://stackoverflow.com/users/1236128/jonathan-komar"}, "is_accepted": false, "score": 3, "last_activity_date": 1601458668, "creation_date": 1601458668, "answer_id": 64134809, "question_id": 42820244, "link": "https://stackoverflow.com/questions/42820244/python-attrs-explained/64134809#64134809", "title": "Python __attrs__ explained", "body": "<p>It is not standard, because it is not part of the Python Object Model.</p>\n<p>The requests module uses it <a href=\"https://github.com/psf/requests/blob/333fa8d3f201f68b82d9e8f26be4987e869fd3bf/requests/models.py#L594\" rel=\"nofollow noreferrer\">here</a> (Response object), too, for reference</p>\n<p>It just a way to keep some state hidden (at least as hidden as possible, because <em>nothing</em> is truly hidden in Python).</p>\n<p>The writers of this code just delegate to this dictionary using a call that <em>is</em> part of the Python Object Model <code>getattr</code>:</p>\n<pre><code>return {attr: getattr(self, attr, None) for attr in self.__attrs__}\n</code></pre>\n"}], "owner": {"reputation": 1491, "user_id": 5115219, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1e4daf0bfeb7f86112ad1ba5e32ca41b?s=128&d=identicon&r=PG", "display_name": "Ugur", "link": "https://stackoverflow.com/users/5115219/ugur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4670, "favorite_count": 0, "accepted_answer_id": 42820292, "answer_count": 2, "score": 17, "last_activity_date": 1601458668, "creation_date": 1489610327, "question_id": 42820244, "link": "https://stackoverflow.com/questions/42820244/python-attrs-explained", "title": "Python __attrs__ explained", "body": "<p>I am going through the code of Python <code>requests</code> library from Kenneth Reitz (which is awesome!). And I have encountered a Class variable named <code>__attrs__</code> (see below). Tried to find out something about it via Google and SymbolHound, but no luck.</p>\n\n<p>Is this a standard Python thing? Where can I find more infos? Can someone enlighten me?</p>\n\n<p>From: <a href=\"https://github.com/kennethreitz/requests/blob/master/requests/sessions.py\" rel=\"noreferrer\">https://github.com/kennethreitz/requests/blob/master/requests/sessions.py</a></p>\n\n<pre><code>class Session(SessionRedirectMixin):\n    ...\n\n    __attrs__ = [\n        'headers', 'cookies', 'auth', 'proxies', 'hooks', 'params', 'verify',\n        'cert', 'prefetch', 'adapters', 'stream', 'trust_env',\n        'max_redirects',\n    ]\n\n    def __init__(self):\n\n        #: A case-insensitive dictionary of headers to be sent on each\n        #: :class:`Request &lt;Request&gt;` sent from this\n        #: :class:`Session &lt;Session&gt;`.\n        self.headers = default_headers()\n</code></pre>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 124, "user_id": 3524664, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2a6cb2d297c146bf8f86d125ac8a8883?s=128&d=identicon&r=PG&f=1", "display_name": "0xDECAFBAD", "link": "https://stackoverflow.com/users/3524664/0xdecafbad"}, "edited": false, "score": 0, "creation_date": 1489611203, "post_id": 42820157, "comment_id": 72752682, "body": "It&#39;s looking like maybe I keep the settings in settings.py for django-auth-ldap. Remove that as an authentication backend and then create a custom authentication backend using the RemoteUserBackend class from RemoteUserMiddleware and the LDAPBackend class from django-auth-ldap."}, {"owner": {"reputation": 124, "user_id": 3524664, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2a6cb2d297c146bf8f86d125ac8a8883?s=128&d=identicon&r=PG&f=1", "display_name": "0xDECAFBAD", "link": "https://stackoverflow.com/users/3524664/0xdecafbad"}, "edited": false, "score": 0, "creation_date": 1489612571, "post_id": 42820157, "comment_id": 72753409, "body": "Not sure how I get request.META[&#39;REMOTE_USER&#39;] in my authentication backend since that info is in the HTTP request..."}], "owner": {"reputation": 124, "user_id": 3524664, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2a6cb2d297c146bf8f86d125ac8a8883?s=128&d=identicon&r=PG&f=1", "display_name": "0xDECAFBAD", "link": "https://stackoverflow.com/users/3524664/0xdecafbad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 314, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489610022, "creation_date": 1489610022, "question_id": 42820157, "link": "https://stackoverflow.com/questions/42820157/django-combine-remote-user-auth-with-ldap-checks", "title": "Django combine REMOTE_USER auth with LDAP checks", "body": "<p>I recently got LDAP authentication working with the django-auth-ldap module. That got me thinking, since this is being run behind IIS in an Active Directory environment, that there should be a way to do single sign-on. It looks like using the RemoteUserMiddleware you can do single sign-on using the REMOTE_USER environment variable. But problem is I need to lock this down to a small handful of users in an AD group. I'm a Django n00b so I'm having trouble wraping my head around how I would glue the two system together in order to get the user from REMOTE_USER and then do an LDAP lookup to AD to check group membership. And Google is failing me. Has anyone done anything like this before?</p>\n"}, {"tags": ["python", "constructor"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1489610170, "post_id": 42820137, "comment_id": 72752074, "body": "The interface you&#39;re asking for isn&#39;t possible, because there&#39;s no way to distinguish whether the second argument is a side length or an area. If creating rectangles from a side length and area is a common task in your use case, you may want to add a <code>Rectangle.from_side_and_area</code> static method."}], "answers": [{"comments": [{"owner": {"reputation": 1216, "user_id": 1717078, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ae8297158385059498bb76ae575bf3f0?s=128&d=identicon&r=PG", "display_name": "marisbest2", "link": "https://stackoverflow.com/users/1717078/marisbest2"}, "edited": false, "score": 1, "creation_date": 1489610516, "post_id": 42820247, "comment_id": 72752299, "body": "Like I said abovE: Careful with this. Keyword arguments are still positional and you can legally call this function with neither side_b or area"}, {"owner": {"reputation": 46, "user_id": 7560615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/034a7a426a1b9f6430826fadf4e3c527?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Swedlo", "link": "https://stackoverflow.com/users/7560615/eric-swedlo"}, "reply_to_user": {"reputation": 1216, "user_id": 1717078, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ae8297158385059498bb76ae575bf3f0?s=128&d=identicon&r=PG", "display_name": "marisbest2", "link": "https://stackoverflow.com/users/1717078/marisbest2"}, "edited": false, "score": 0, "creation_date": 1489610669, "post_id": 42820247, "comment_id": 72752392, "body": "marisbest2 - that&#39;s a good point, however I like to believe that someone using their own code wouldn&#39;t do that. Perhaps a if side_b = None and area = None would help"}, {"owner": {"reputation": 1216, "user_id": 1717078, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ae8297158385059498bb76ae575bf3f0?s=128&d=identicon&r=PG", "display_name": "marisbest2", "link": "https://stackoverflow.com/users/1717078/marisbest2"}, "edited": false, "score": 0, "creation_date": 1489610724, "post_id": 42820247, "comment_id": 72752425, "body": "Never assume that the person using the code is the same person who wrote the code."}, {"owner": {"reputation": 46, "user_id": 7560615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/034a7a426a1b9f6430826fadf4e3c527?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Swedlo", "link": "https://stackoverflow.com/users/7560615/eric-swedlo"}, "reply_to_user": {"reputation": 1216, "user_id": 1717078, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ae8297158385059498bb76ae575bf3f0?s=128&d=identicon&r=PG", "display_name": "marisbest2", "link": "https://stackoverflow.com/users/1717078/marisbest2"}, "edited": false, "score": 0, "creation_date": 1489610839, "post_id": 42820247, "comment_id": 72752489, "body": "That sounds like good practice, actually. Thanks for the advice!"}, {"owner": {"reputation": 1216, "user_id": 1717078, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ae8297158385059498bb76ae575bf3f0?s=128&d=identicon&r=PG", "display_name": "marisbest2", "link": "https://stackoverflow.com/users/1717078/marisbest2"}, "edited": false, "score": 0, "creation_date": 1489610876, "post_id": 42820247, "comment_id": 72752511, "body": "Even if you are the one who uses the code that you wrote, its unlikely that you&#39;ll remember weird edge cases"}], "tags": [], "owner": {"reputation": 46, "user_id": 7560615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/034a7a426a1b9f6430826fadf4e3c527?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Swedlo", "link": "https://stackoverflow.com/users/7560615/eric-swedlo"}, "is_accepted": false, "score": 0, "last_activity_date": 1489610565, "last_edit_date": 1489610565, "creation_date": 1489610335, "answer_id": 42820247, "question_id": 42820137, "link": "https://stackoverflow.com/questions/42820137/multiple-constructors-in-python/42820247#42820247", "title": "Multiple constructors in python", "body": "<p>This may not be what you're looking for, but here's what I came up with:</p>\n\n<pre><code>class Rectangle:\n    def __init__(self, side_a, side_b = None, area = None):\n         self.side_a = side_a\n         if area == None:\n            self.area = side_a * side_b\n            self.side_b = side_b\n         else:\n            self.side_b = area / side_a\n            self.area = area\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 687, "user_id": 3350448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nbeps.png?s=128&g=1", "display_name": "PidgeyUsedGust", "link": "https://stackoverflow.com/users/3350448/pidgeyusedgust"}, "is_accepted": false, "score": 11, "last_activity_date": 1489610383, "last_edit_date": 1495541369, "creation_date": 1489610383, "answer_id": 42820258, "question_id": 42820137, "link": "https://stackoverflow.com/questions/42820137/multiple-constructors-in-python/42820258#42820258", "title": "Multiple constructors in python", "body": "<p>As demonstrated <a href=\"https://stackoverflow.com/a/682545/3350448\">here</a>.</p>\n\n<pre><code>class Rectangle:\n\n    def __init__(self, a, b):\n        \"\"\" Create a new rectangle with sides of length a and b.\n        \"\"\"\n        self.side_a = side_a\n        self.side_b = side_b\n        self.area = self.side_a * self.side_b\n\n    @classmethod\n    def from_sides(cls, a, b):\n        return cls(a, b)\n\n    @classmethod\n    def from_area(cls, a, o):\n        return cls(a, o/a)\n</code></pre>\n\n<p>You can then create rectangles as</p>\n\n<pre><code>r1 = Rectangle.from_sides(s1, s2)\nr2 = Rectangle.from_area(s1, a)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 216457, "user_id": 846892, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/E9dZn.png?s=128&g=1", "display_name": "Ashwini Chaudhary", "link": "https://stackoverflow.com/users/846892/ashwini-chaudhary"}, "edited": false, "score": 0, "creation_date": 1489610776, "post_id": 42820299, "comment_id": 72752455, "body": "s/ keyword / keyword-only"}, {"owner": {"reputation": 216457, "user_id": 846892, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/E9dZn.png?s=128&g=1", "display_name": "Ashwini Chaudhary", "link": "https://stackoverflow.com/users/846892/ashwini-chaudhary"}, "edited": false, "score": 0, "creation_date": 1489611407, "post_id": 42820299, "comment_id": 72752797, "body": "The correct term for these arguments is <a href=\"https://www.python.org/dev/peps/pep-3102/\" rel=\"nofollow noreferrer\">keyword-only</a> arguments."}, {"owner": {"reputation": 267, "user_id": 7686419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22afa2567b6a185fb28646087a5c36f0?s=128&d=identicon&r=PG", "display_name": "zhuhuren", "link": "https://stackoverflow.com/users/7686419/zhuhuren"}, "edited": false, "score": 0, "creation_date": 1489612044, "post_id": 42820299, "comment_id": 72753140, "body": "This is a very neat solution. Thanks."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 4, "last_activity_date": 1489611436, "last_edit_date": 1489611436, "creation_date": 1489610526, "answer_id": 42820299, "question_id": 42820137, "link": "https://stackoverflow.com/questions/42820137/multiple-constructors-in-python/42820299#42820299", "title": "Multiple constructors in python", "body": "<p>You cannot overload methods with methods of the same name. Well, you can, but only the last one is then visible.</p>\n\n<p>The other option is <a href=\"https://www.python.org/dev/peps/pep-3102/\" rel=\"nofollow noreferrer\">keyword-only</a> arguments.</p>\n\n<p>With Python 3, you could write:</p>\n\n<pre><code>class Rectangle:\n    def __init__(self, side_a, *, side_b=None, area=None):\n        self.side_a = side_a\n        if side_b is None and area is None:\n            raise Exception(\"Provide either side_b or area\")\n        if side_b is not None and area is not None:\n            raise Exception(\"Provide either side_b or area, not both\")\n        if side_b is not None:\n            self.side_b = side_b\n            self.area = self.side_a * self.side_b\n        else:\n            self.area = area\n            self.side_b = self.area / side_a\n</code></pre>\n\n<p>using <code>*</code>  in the middle forces the user to use keyword argument passing from that point, not allowing positionnal, which prevents the mistakes. And the (rather clumsy) manual checking for <code>None</code> logic ensures that one and only one keyword parameter is passed to the constructor. The inside is complex, but the interface is safe to use, that's the main point here.</p>\n\n<pre><code>r = Rectangle(10,area=20)\nr2 = Rectangle(10,side_b=20)\nr3 = Rectangle(10,20)   # doesn't run, need keyword arguments\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2391, "user_id": 6764079, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/mUwmx.png?s=128&g=1", "display_name": "Juggernaut", "link": "https://stackoverflow.com/users/6764079/juggernaut"}, "is_accepted": false, "score": 0, "last_activity_date": 1489610925, "creation_date": 1489610925, "answer_id": 42820411, "question_id": 42820137, "link": "https://stackoverflow.com/questions/42820137/multiple-constructors-in-python/42820411#42820411", "title": "Multiple constructors in python", "body": "<p>You could do</p>\n\n<pre><code>class Combined:\n    def __init__(self, a, b=None, area=None):\n        self.a = a\n        self.area = self.a * b if b else area\n        self.b = self.area / self.a\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 69, "user_id": 10127031, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-B5RS3UHMoKs/AAAAAAAAAAI/AAAAAAAAAMY/9gotRNNyq4w/photo.jpg?sz=128", "display_name": "Aniket Babhulkar", "link": "https://stackoverflow.com/users/10127031/aniket-babhulkar"}, "is_accepted": false, "score": 0, "last_activity_date": 1537885360, "last_edit_date": 1537885360, "creation_date": 1537884088, "answer_id": 52500076, "question_id": 42820137, "link": "https://stackoverflow.com/questions/42820137/multiple-constructors-in-python/52500076#52500076", "title": "Multiple constructors in python", "body": "<p>I would share a basic example to use default as well as parametrized constructor in python. You need to declare as well as assign variable in function definition itself for default constructor.</p>\n\n<pre><code>class Person:\n\n    def __init__(self,name=\"\",age=0):\n        self.name=name\n        self.age=age\n    def __int__(self,name,age):\n        self.name=name\n        self.age=age\n\n    def showdetails(self):\n        print(\"\\nName is \"+str(self.name)+\" and age is \"+str(self.age))\n\np1=Person(\"Sam\",50)\n\np1.showdetails()\n\np2=Person()\n\np2.showdetails()\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Name is Sam and age is 50\n\nName is  and age is 0\n</code></pre>\n"}], "owner": {"reputation": 267, "user_id": 7686419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22afa2567b6a185fb28646087a5c36f0?s=128&d=identicon&r=PG", "display_name": "zhuhuren", "link": "https://stackoverflow.com/users/7686419/zhuhuren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1210, "favorite_count": 2, "answer_count": 5, "score": 6, "last_activity_date": 1537885360, "creation_date": 1489609963, "last_edit_date": 1489610218, "question_id": 42820137, "link": "https://stackoverflow.com/questions/42820137/multiple-constructors-in-python", "title": "Multiple constructors in python", "body": "<p>How to combine the following 2 classes into one class, Rectangle, so that a Rectangle object can be created either by rect = Rectangle(side_a, side_b) or rect = Rectangle(side_a, area)?</p>\n\n<pre><code>class Rectangle1:\n    def __init__(self, side_a, side_b):\n        self.side_a = side_a\n        self.side_b = side_b\n        self.area = self.side_a * self.side_b\n\nclass Rectangle2:\n    def __init__(self, side_a, area):\n        self.side_a = side_a\n        self.area = area\n        self.side_b = self.area / side_a\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 24739, "user_id": 1790644, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f1a2a40ddbc52508d5b53e9879961251?s=128&d=identicon&r=PG", "display_name": "Matt Clark", "link": "https://stackoverflow.com/users/1790644/matt-clark"}, "edited": false, "score": 0, "creation_date": 1489609904, "post_id": 42820088, "comment_id": 72751911, "body": "<a href=\"http://stackoverflow.com/q/3501382/1790644\">Google</a> it?"}, {"owner": {"reputation": 1290, "user_id": 4180176, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1022787394506806/picture?type=large", "display_name": "Joshua Nixon", "link": "https://stackoverflow.com/users/4180176/joshua-nixon"}, "edited": false, "score": 0, "creation_date": 1489609982, "post_id": 42820088, "comment_id": 72751963, "body": "<code>if type(variable) == int: #do something</code>"}, {"owner": {"reputation": 4357, "user_id": 1125592, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e4d46a8d204b274a6e7ea6ea3598ba94?s=128&d=identicon&r=PG", "display_name": "James R", "link": "https://stackoverflow.com/users/1125592/james-r"}, "reply_to_user": {"reputation": 1290, "user_id": 4180176, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1022787394506806/picture?type=large", "display_name": "Joshua Nixon", "link": "https://stackoverflow.com/users/4180176/joshua-nixon"}, "edited": false, "score": 2, "creation_date": 1489610149, "post_id": 42820088, "comment_id": 72752062, "body": "<code>isinstance(variable, int)</code> would be more pythonic, no? @JoshuaNixon"}, {"owner": {"reputation": 1290, "user_id": 4180176, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1022787394506806/picture?type=large", "display_name": "Joshua Nixon", "link": "https://stackoverflow.com/users/4180176/joshua-nixon"}, "reply_to_user": {"reputation": 4357, "user_id": 1125592, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e4d46a8d204b274a6e7ea6ea3598ba94?s=128&d=identicon&r=PG", "display_name": "James R", "link": "https://stackoverflow.com/users/1125592/james-r"}, "edited": false, "score": 0, "creation_date": 1489610467, "post_id": 42820088, "comment_id": 72752272, "body": "@JamesR not going to lie I&#39;ve never seen that. yes it would be better. Going to have to change my computing coursework now!"}], "answers": [{"tags": [], "owner": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "is_accepted": false, "score": 1, "last_activity_date": 1489609930, "creation_date": 1489609930, "answer_id": 42820124, "question_id": 42820088, "link": "https://stackoverflow.com/questions/42820088/how-do-i-say-if-variable-any-integer-in-python-2x/42820124#42820124", "title": "How do I say, if variable = any integer, in Python 2x", "body": "<pre><code>if type(variable) == int:\n</code></pre>\n\n<p>This gets the type of the variable and compares it to the class <code>int</code></p>\n"}, {"tags": [], "owner": {"reputation": 170, "user_id": 6471375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YqAjU.jpg?s=128&g=1", "display_name": "cmeadows", "link": "https://stackoverflow.com/users/6471375/cmeadows"}, "is_accepted": false, "score": 0, "last_activity_date": 1489610480, "creation_date": 1489610480, "answer_id": 42820284, "question_id": 42820088, "link": "https://stackoverflow.com/questions/42820088/how-do-i-say-if-variable-any-integer-in-python-2x/42820284#42820284", "title": "How do I say, if variable = any integer, in Python 2x", "body": "<p>You should use <code>isinstance()</code></p>\n\n<pre><code>if isinstance(variable, int):\n    do_something()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7, "user_id": 7717447, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a528e43e23476f508227a59a3651e19b?s=128&d=identicon&r=PG&f=1", "display_name": "Siddharth Chaudhary", "link": "https://stackoverflow.com/users/7717447/siddharth-chaudhary"}, "edited": false, "score": 0, "creation_date": 1489610781, "post_id": 42820294, "comment_id": 72752459, "body": "I want to ask the question twice, what would I do then? type it in twice?"}, {"owner": {"reputation": 634, "user_id": 2645604, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002347042160/picture?type=large", "display_name": "Tilak Putta", "link": "https://stackoverflow.com/users/2645604/tilak-putta"}, "reply_to_user": {"reputation": 7, "user_id": 7717447, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a528e43e23476f508227a59a3651e19b?s=128&d=identicon&r=PG&f=1", "display_name": "Siddharth Chaudhary", "link": "https://stackoverflow.com/users/7717447/siddharth-chaudhary"}, "edited": false, "score": 0, "creation_date": 1489612081, "post_id": 42820294, "comment_id": 72753157, "body": "see the complete solution to your work as i edited it now"}, {"owner": {"reputation": 7, "user_id": 7717447, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a528e43e23476f508227a59a3651e19b?s=128&d=identicon&r=PG&f=1", "display_name": "Siddharth Chaudhary", "link": "https://stackoverflow.com/users/7717447/siddharth-chaudhary"}, "edited": false, "score": 0, "creation_date": 1489612163, "post_id": 42820294, "comment_id": 72753187, "body": "it&#39;s saying that my best friend is 1 (the integer I inputted)?"}, {"owner": {"reputation": 634, "user_id": 2645604, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002347042160/picture?type=large", "display_name": "Tilak Putta", "link": "https://stackoverflow.com/users/2645604/tilak-putta"}, "reply_to_user": {"reputation": 7, "user_id": 7717447, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a528e43e23476f508227a59a3651e19b?s=128&d=identicon&r=PG&f=1", "display_name": "Siddharth Chaudhary", "link": "https://stackoverflow.com/users/7717447/siddharth-chaudhary"}, "edited": false, "score": 0, "creation_date": 1489612338, "post_id": 42820294, "comment_id": 72753277, "body": "see the ouput that i edited , it does show the input numbers"}, {"owner": {"reputation": 7, "user_id": 7717447, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a528e43e23476f508227a59a3651e19b?s=128&d=identicon&r=PG&f=1", "display_name": "Siddharth Chaudhary", "link": "https://stackoverflow.com/users/7717447/siddharth-chaudhary"}, "edited": false, "score": 0, "creation_date": 1489612367, "post_id": 42820294, "comment_id": 72753291, "body": "what do you mean by &#39;val&#39;?"}, {"owner": {"reputation": 634, "user_id": 2645604, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002347042160/picture?type=large", "display_name": "Tilak Putta", "link": "https://stackoverflow.com/users/2645604/tilak-putta"}, "reply_to_user": {"reputation": 7, "user_id": 7717447, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a528e43e23476f508227a59a3651e19b?s=128&d=identicon&r=PG&f=1", "display_name": "Siddharth Chaudhary", "link": "https://stackoverflow.com/users/7717447/siddharth-chaudhary"}, "edited": false, "score": 0, "creation_date": 1489612435, "post_id": 42820294, "comment_id": 72753331, "body": "just copy this code into your code and execute it .. val is just a variable that will be initialised if given is integer"}, {"owner": {"reputation": 634, "user_id": 2645604, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002347042160/picture?type=large", "display_name": "Tilak Putta", "link": "https://stackoverflow.com/users/2645604/tilak-putta"}, "reply_to_user": {"reputation": 7, "user_id": 7717447, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a528e43e23476f508227a59a3651e19b?s=128&d=identicon&r=PG&f=1", "display_name": "Siddharth Chaudhary", "link": "https://stackoverflow.com/users/7717447/siddharth-chaudhary"}, "edited": false, "score": 0, "creation_date": 1489612499, "post_id": 42820294, "comment_id": 72753375, "body": "did you get this now, upvote and accept my answer if you do."}], "tags": [], "owner": {"reputation": 634, "user_id": 2645604, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002347042160/picture?type=large", "display_name": "Tilak Putta", "link": "https://stackoverflow.com/users/2645604/tilak-putta"}, "is_accepted": true, "score": 0, "last_activity_date": 1489612292, "last_edit_date": 1489612292, "creation_date": 1489610512, "answer_id": 42820294, "question_id": 42820088, "link": "https://stackoverflow.com/questions/42820088/how-do-i-say-if-variable-any-integer-in-python-2x/42820294#42820294", "title": "How do I say, if variable = any integer, in Python 2x", "body": "<p><strong>Use this</strong></p>\n\n<pre><code>import random\nwhile True:\n    friend1 = raw_input(\"Name one of your friends: \")\n    try:\n        val = int(friend1)\n    except ValueError:\n        break\n    print(\"Enter valid name\")\nwhile True:\n    friend2 = raw_input(\"Name another friend: \")\n    try:\n        val = int(friend2)\n    except ValueError:\n        break\n    print(\"Enter valid name\")\nfriends = [friend1,friend2]\nbest_friend = random.sample(friends, 1)\nprint(\"your bestfriend is %s\" %(best_friend))\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>Name one of your friends: 1\nEnter valid name\n\nName one of your friends: 1\nEnter valid name\n\nName one of your friends: tilak\n\nName another friend: varma\nyour bestfriend is ['varma']\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 7717447, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a528e43e23476f508227a59a3651e19b?s=128&d=identicon&r=PG&f=1", "display_name": "Siddharth Chaudhary", "link": "https://stackoverflow.com/users/7717447/siddharth-chaudhary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2697, "favorite_count": 0, "accepted_answer_id": 42820294, "answer_count": 3, "score": -3, "last_activity_date": 1489612292, "creation_date": 1489609809, "last_edit_date": 1489609891, "question_id": 42820088, "link": "https://stackoverflow.com/questions/42820088/how-do-i-say-if-variable-any-integer-in-python-2x", "title": "How do I say, if variable = any integer, in Python 2x", "body": "<pre><code>import random \n\nprint (\"hello\")\n\nuser_friend1 = raw_input(\"Name one of your friends: \")\n\nuser_friend2 = raw_input(\"Name another friend: \")\n# inputs for user\nfriends = [user_friend1,user_friend2] \n\nbest_friend = random.sample(friends, 1)\n</code></pre>\n\n<p>I want to loop it so that if a user types an integer to a question then it will ask the question again, i need it for both questions <code>user_friend</code> 1 and 2</p>\n\n<pre><code>print (\"your best friend is %s\") % (best_friend) \n</code></pre>\n"}, {"tags": ["python", "elasticsearch", "kibana", "elasticsearch-query"], "answers": [{"tags": [], "owner": {"reputation": 123, "user_id": 7494328, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/216425821cce6c9235dec9cee66a6f6d?s=128&d=identicon&r=PG&f=1", "display_name": "bzadm", "link": "https://stackoverflow.com/users/7494328/bzadm"}, "is_accepted": true, "score": 0, "last_activity_date": 1489649247, "creation_date": 1489649247, "answer_id": 42827738, "question_id": 42820082, "link": "https://stackoverflow.com/questions/42820082/elasticsearch-query-print-certain-field-based-on-other-field/42827738#42827738", "title": "Elasticsearch query - print certain field based on other field", "body": "<p>I achieved this with a small workaroud. It's not pretty but at final I get what I wanted. \nFirstly I used response from first query. Than I grabbed all <code>keys</code> from those dictionary and perform new query to find certain document's <code>id</code>.</p>\n\n<pre><code>{\n  \"size\": 0,\n  \"query\": {\n    \"query_string\": {\n      \"analyze_wildcard\": True,\n      \"query\": \"_type:bmw AND compound:\"+str(0.8442)+\" AND _exists_:car_type\"\n    }\n  },\n  \"aggs\": {\n    \"3\": {\n      \"terms\": {\n        \"field\": \"id_str\",\n        \"size\": 20,\n        \"order\": {\n          \"_count\": \"desc\"\n        }\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>than iterate through response and search document by this <code>id</code> field</p>\n\n<pre><code>for y in res1:\n    res3 = es.search(index='indexname', body={\n                      \"size\" : 1,\n                      \"query\": {\n                        \"bool\": {\n                          \"must\": [\n                            {\n                              \"match\": {\n                                \"id_str\": y['key']\n                              }\n                            }\n                          ]\n                        }\n                      }\n                    })\n                    for x in res3['hits']['hits']:\n                        print (x['_source']['text'])\n</code></pre>\n\n<p>now result is </p>\n\n<pre><code>Diamond stitch leather is a great addition to any custom vehicle. Prices start from 2k! @bmw i8 getting under car... \n</code></pre>\n\n<p>which is text what I wanted.</p>\n"}], "owner": {"reputation": 123, "user_id": 7494328, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/216425821cce6c9235dec9cee66a6f6d?s=128&d=identicon&r=PG&f=1", "display_name": "bzadm", "link": "https://stackoverflow.com/users/7494328/bzadm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 546, "favorite_count": 0, "accepted_answer_id": 42827738, "answer_count": 1, "score": 0, "last_activity_date": 1489649259, "creation_date": 1489609785, "last_edit_date": 1489649259, "question_id": 42820082, "link": "https://stackoverflow.com/questions/42820082/elasticsearch-query-print-certain-field-based-on-other-field", "title": "Elasticsearch query - print certain field based on other field", "body": "<p>My goal is to find max value in one field and print another field in this found document.\nMy query so far:</p>\n\n<pre><code>{\n        \"fields\": [\"text\"], //NOT WORKING\n  \"query\": {\n    \"query_string\": {\n      \"query\": \"_type:bmw AND _exists_:car_type\",\n      \"analyze_wildcard\": True\n    }\n  },\n  \"size\": 0,\n  \"aggs\": {\n    \"2\": {\n      \"terms\": {\n        \"field\": \"compound\",\n        \"size\": 5,\n        \"order\": {\n          \"2-orderAgg\": \"desc\"\n        }\n      },\n      \"aggs\": {\n        \"2-orderAgg\": {\n          \"max\": {\n            \"field\": \"compound\"\n          }\n        }\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>Result is</p>\n\n<pre><code>'buckets': [{'doc_count': 1, '2-orderAgg': {'value': 0.8442}, 'key': 0.8442}, {'doc_count': 1, '2-orderAgg': {'value': 0.7777}, 'key': 0.7777}, {'doc_count': 1, '2-orderAgg': {'value': 0.7579}, 'key': 0.7579}, {'doc_count': 1, '2-orderAgg': {'value': 0.6476}, 'key': 0.6476}, {'doc_count': 1, '2-orderAgg': {'value': 0.6369}, 'key': 0.6369}]\n</code></pre>\n\n<p>Now I need to print <code>text</code> field in document contains <code>compound</code> value 0.8442 and so on.. Thank you for your advice.</p>\n"}, {"tags": ["python", "scikit-learn"], "comments": [{"owner": {"reputation": 1516, "user_id": 5896419, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jP2KJ.jpg?s=128&g=1", "display_name": "Robert Valencia", "link": "https://stackoverflow.com/users/5896419/robert-valencia"}, "edited": false, "score": 0, "creation_date": 1489610242, "post_id": 42820070, "comment_id": 72752119, "body": "Can you clarify what the input and expected output looks like by giving a clear and simple example (e.g. 3 items)?"}, {"owner": {"reputation": 3952, "user_id": 6696657, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c78dbc81728388bd956e9d4f4c1a6759?s=128&d=identicon&r=PG&f=1", "display_name": "MattR", "link": "https://stackoverflow.com/users/6696657/mattr"}, "edited": false, "score": 0, "creation_date": 1489610272, "post_id": 42820070, "comment_id": 72752139, "body": "Are you trying to sort by the value? if so check this: <a href=\"http://stackoverflow.com/questions/613183/sort-a-python-dictionary-by-value\">Sort a Python dictionary by value</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2274, "user_id": 6106842, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/750afd7b00413aef802017dd8f773ec5?s=128&d=identicon&r=PG&f=1", "display_name": "Aizzaac", "link": "https://stackoverflow.com/users/6106842/aizzaac"}, "edited": false, "score": 0, "creation_date": 1489612795, "post_id": 42820610, "comment_id": 72753522, "body": "I get an error  File &quot;&lt;ipython-input-85-0592e683c6a9&gt;&quot;, line 3     pp(dict(OrderedDict(sorted([(k, sorted(v, key=min)) for k, v in d.items()], key=lambda(k, v): min(v)))))                                                                                           ^ SyntaxError: invalid syntax"}, {"owner": {"reputation": 7389, "user_id": 360362, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/1yfQ1.jpg?s=128&g=1", "display_name": "Meitham", "link": "https://stackoverflow.com/users/360362/meitham"}, "reply_to_user": {"reputation": 2274, "user_id": 6106842, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/750afd7b00413aef802017dd8f773ec5?s=128&d=identicon&r=PG&f=1", "display_name": "Aizzaac", "link": "https://stackoverflow.com/users/6106842/aizzaac"}, "edited": false, "score": 0, "creation_date": 1489613138, "post_id": 42820610, "comment_id": 72753713, "body": "@Aizzaac that works fine here!  Could you check if you missed a braces between copy/paste?"}], "tags": [], "owner": {"reputation": 7389, "user_id": 360362, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/1yfQ1.jpg?s=128&g=1", "display_name": "Meitham", "link": "https://stackoverflow.com/users/360362/meitham"}, "is_accepted": false, "score": 0, "last_activity_date": 1489613356, "last_edit_date": 1489613356, "creation_date": 1489611718, "answer_id": 42820610, "question_id": 42820070, "link": "https://stackoverflow.com/questions/42820070/how-to-sort-by-value-in-descending-order-an-ordered-dictionary-in-python/42820610#42820610", "title": "How to sort by value in descending order an Ordered Dictionary in python?", "body": "<p>Your dictionary is formed of one item, so I am not sure whether you wanted to sort that too.  However, that appears to be the case form your linked question.</p>\n\n<p>Since you mentioned <code>222</code> has the highest error value, I take it you wanted to also sort the values in the list.</p>\n\n<pre><code>&gt;&gt;&gt; from pprint import pprint as pp\n&gt;&gt;&gt; d = OrderedDict([('RandomForest_AWA_Fp1, max_features=7', [(220, 0.10833333333333328), (221, 0.10833333333333328), (222, 0.10952380952380958), (223, 0.10833333333333328)])])\n&gt;&gt;&gt; pp(OrderedDict(sorted([(k, sorted(v, key=min)) for k, v in d.items()], key=lambda(k, v): min(v))))\nOrderedDict([('RandomForest_AWA_Fp1, max_features=7', [(220, 0.10833333333333328), (221, 0.10833333333333328), (223, 0.10833333333333328), (222, 0.10952380952380958)])]{'RandomForest_AWA_Fp1, max_features=7': [(220, 0.10833333333333328),\n                                                  (221, 0.10833333333333328),\n                                                  (223, 0.10833333333333328),\n                                                  (222, 0.10952380952380958)]}\n</code></pre>\n"}], "owner": {"reputation": 2274, "user_id": 6106842, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/750afd7b00413aef802017dd8f773ec5?s=128&d=identicon&r=PG&f=1", "display_name": "Aizzaac", "link": "https://stackoverflow.com/users/6106842/aizzaac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 403, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1502300339, "creation_date": 1489609746, "last_edit_date": 1495541434, "question_id": 42820070, "link": "https://stackoverflow.com/questions/42820070/how-to-sort-by-value-in-descending-order-an-ordered-dictionary-in-python", "title": "How to sort by value in descending order an Ordered Dictionary in python?", "body": "<p>I am using an Ordered Dictionary which contains all the values (n_estimators and error rates from an OOB estimation, <a href=\"https://stackoverflow.com/questions/42674758/how-to-get-the-n-estimator-and-max-features-of-the-minimum-oob-error-and-use-the\">as shown here</a>.</p>\n\n<p>I want to get the values with the lowest error rates first in the dictionary.</p>\n\n<p>For example, below you can see that 222 has the highest error rate. </p>\n\n<pre><code>OrderedDict([('RandomForest_AWA_Fp1, max_features=7', \n    [(220, 0.10833333333333328), \n     (221, 0.10833333333333328), \n     (222, 0.10952380952380958), \n     (223, 0.10833333333333328)])\n])\n</code></pre>\n\n<p>I want to sort this dictionary in this order: 220, 221, 223, 222 (by value in descending order)</p>\n\n<p>I have tried: </p>\n\n<pre><code>OrderedDict(sorted(error_rate.items(), key=lambda t: min(t[0]))) \n</code></pre>\n\n<p>But I do not see any difference.</p>\n\n<p>ERROR I GET:</p>\n\n<pre><code> File \"&lt;ipython-input-85-0592e683c6a9&gt;\", line 3\n    pp(dict(OrderedDict(sorted([(k, sorted(v, key=min)) for k, v in d.items()], key=lambda(k, v): min(v)))))\n                                                                                      ^\nSyntaxError: invalid syntax\n</code></pre>\n"}]