[{"tags": ["python", "python-3.x", "string", "strip"], "answers": [{"tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": true, "score": 4, "last_activity_date": 1557964893, "creation_date": 1557964893, "answer_id": 56159106, "question_id": 56159087, "link": "https://stackoverflow.com/questions/56159087/how-can-i-whitelist-characters-from-a-string-in-python-3/56159106#56159106", "title": "How can I whitelist characters from a string in python 3?", "body": "<p>You can use <code>re.sub</code> and provide a pattern that exactly matches what you are trying to remove:</p>\n\n<pre><code>import re\nresult = re.sub('[^a-zA-Z0-9]', '', '_abcd!?123')\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>'abcd123'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6783, "user_id": 3064538, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b644a108ae9ae0ec2f7402dd235d155c?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/3064538/boris"}, "is_accepted": false, "score": 1, "last_activity_date": 1557964902, "creation_date": 1557964902, "answer_id": 56159108, "question_id": 56159087, "link": "https://stackoverflow.com/questions/56159087/how-can-i-whitelist-characters-from-a-string-in-python-3/56159108#56159108", "title": "How can I whitelist characters from a string in python 3?", "body": "<p>Use <a href=\"https://docs.python.org/3/library/string.html\" rel=\"nofollow noreferrer\"><code>string</code></a> with a list comprehension</p>\n\n<pre><code>import string\nwhitelist = set(string.ascii_lowercase + string.digits)\nname = ''.join(c for c in name if c in whitelist)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6521, "user_id": 7583953, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/w0Jkd.jpg?s=128&g=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/7583953/alec"}, "is_accepted": false, "score": 1, "last_activity_date": 1557965326, "last_edit_date": 1557965326, "creation_date": 1557964969, "answer_id": 56159117, "question_id": 56159087, "link": "https://stackoverflow.com/questions/56159087/how-can-i-whitelist-characters-from-a-string-in-python-3/56159117#56159117", "title": "How can I whitelist characters from a string in python 3?", "body": "<p>You can use simple regex:</p>\n\n<pre><code>new_string = re.sub('[chars to remove]', '', old_string)\n</code></pre>\n\n<p>Please also note that strings are immutable. You need to assign a new variable in order to change one.</p>\n"}], "owner": {"reputation": 123, "user_id": 9545640, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55FzV.png?s=128&g=1", "display_name": "NeverEndingCycle", "link": "https://stackoverflow.com/users/9545640/neverendingcycle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1457, "favorite_count": 1, "accepted_answer_id": 56159106, "answer_count": 3, "score": 0, "last_activity_date": 1557965346, "creation_date": 1557964677, "last_edit_date": 1557965346, "question_id": 56159087, "link": "https://stackoverflow.com/questions/56159087/how-can-i-whitelist-characters-from-a-string-in-python-3", "title": "How can I whitelist characters from a string in python 3?", "body": "<p>My question is quite simple, I am trying to strip any character that is not A-Z, or 0-9 from a string.</p>\n\n<p>Basically this is the process I am trying to do:</p>\n\n<pre><code>whitelist=['a',...'z', '0',...'9']\n\nname = '_abcd!?123'\n\nname.strip(whitelist)\n\nprint(name)\n\n&gt;&gt;&gt; abcd123\n</code></pre>\n\n<p>What's important to know is that I can't just only print valid characters in name. I need to actually use the variable in its changed state.</p>\n"}, {"tags": ["python", "eclipse", "makefile", "virtualenv", "pyenv"], "comments": [{"owner": {"reputation": 10180, "user_id": 143397, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/78d44a79f724bc784792b49f78769d3a?s=128&d=identicon&r=PG", "display_name": "davidA", "link": "https://stackoverflow.com/users/143397/davida"}, "edited": false, "score": 0, "creation_date": 1557964483, "post_id": 56159051, "comment_id": 98946664, "body": "Setting <code>PYTHONPATH</code> to <code>&#47;home&#47;user&#47;.pyenv&#47;versions&#47;myvenv&#47;lib&#47;python3.7&#47;site-package&zwnj;&#8203;s</code> does seem to complete the build, but I&#39;m not sure if it&#39;s locating the correct python interpreter based on this directory - is that possible? Would setting <code>PYTHONPATH</code> affect the actual interpreter used? Or just the packages that are available for import?"}], "answers": [{"comments": [{"owner": {"reputation": 1845, "user_id": 1245694, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/061c75dcdd77111af71482c5a1f7fed0?s=128&d=identicon&r=PG", "display_name": "anishtain4", "link": "https://stackoverflow.com/users/1245694/anishtain4"}, "edited": false, "score": 0, "creation_date": 1588708779, "post_id": 57618150, "comment_id": 109002292, "body": "The question has clearly stated that pydev is not used."}], "tags": [], "owner": {"reputation": 3033, "user_id": 1053496, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/e17abca6f2fa335d84e9582e3e74ec10?s=128&d=identicon&r=PG", "display_name": "nantitv", "link": "https://stackoverflow.com/users/1053496/nantitv"}, "is_accepted": false, "score": -1, "last_activity_date": 1566516546, "creation_date": 1566516546, "answer_id": 57618150, "question_id": 56159051, "link": "https://stackoverflow.com/questions/56159051/how-to-use-a-pyenv-virtualenv-from-within-eclipse/57618150#57618150", "title": "How to use a Pyenv virtualenv from within Eclipse?", "body": "<p>For me, following steps worked ( mac os 10.12, eclipse photon version, with pydev plugin)</p>\n\n<ol>\n<li>Project -> properties</li>\n<li>Pydev-Interpreter/Grammar </li>\n<li>Click here to configure an interpreter not listed (under interpret combobox)</li>\n<li>open interpreter preference page </li>\n<li>Browse for python/pypy exe -> my virtualenvdirectory/bin/python</li>\n<li>Then the chosen python interpreter path should show ( for me still, it was not pointing to my virtual env, but I typed my path explicitly here and it worked)</li>\n</ol>\n\n<p>In the bottom libraries section, you should be able to see the site-packages from your virtual env</p>\n\n<p>Extra tip - In my mac os the virtual env was starting with .pyenv, since it's a hidden directory, I was not able to select this directory and I did not know how to view the hidden directory in eclipse  file explorer. Therefore I created an softlink ( without any . in the name) to the hidden directory (.pyenv) and then I was able to select the softlink</p>\n"}, {"comments": [{"owner": {"reputation": 1845, "user_id": 1245694, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/061c75dcdd77111af71482c5a1f7fed0?s=128&d=identicon&r=PG", "display_name": "anishtain4", "link": "https://stackoverflow.com/users/1245694/anishtain4"}, "edited": false, "score": 0, "creation_date": 1588709535, "post_id": 59180632, "comment_id": 109002660, "body": "What does this have to do with anything?"}], "tags": [], "owner": {"reputation": 1, "user_id": 9558586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13c041f4c46abcf285b4f9411675fcfc?s=128&d=identicon&r=PG&f=1", "display_name": "cccc4983", "link": "https://stackoverflow.com/users/9558586/cccc4983"}, "is_accepted": false, "score": -1, "last_activity_date": 1575477129, "creation_date": 1575477129, "answer_id": 59180632, "question_id": 56159051, "link": "https://stackoverflow.com/questions/56159051/how-to-use-a-pyenv-virtualenv-from-within-eclipse/59180632#59180632", "title": "How to use a Pyenv virtualenv from within Eclipse?", "body": "<p>Typing CMD+SHIFT+. will show you dotfiles &amp; directories that begin with dot in any Mac finder dialog box...</p>\n"}, {"tags": [], "owner": {"reputation": 1845, "user_id": 1245694, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/061c75dcdd77111af71482c5a1f7fed0?s=128&d=identicon&r=PG", "display_name": "anishtain4", "link": "https://stackoverflow.com/users/1245694/anishtain4"}, "is_accepted": false, "score": 0, "last_activity_date": 1588870989, "creation_date": 1588870989, "answer_id": 61663567, "question_id": 56159051, "link": "https://stackoverflow.com/questions/56159051/how-to-use-a-pyenv-virtualenv-from-within-eclipse/61663567#61663567", "title": "How to use a Pyenv virtualenv from within Eclipse?", "body": "<p>I had the same trouble and after some digging, there are two solutions; project-wide and workspace-wide. I prefer the project-wide as it will be saved in the git repository and the next person doesn't have to pull their hair.</p>\n\n<p>For the project-wide add <code>/Users/${USER}/.pyenv/shims:</code> to the start of the \"Project properties > C/C++ Build > Environment > PATH\".</p>\n\n<p>I couldn't figure out the other method fully (mostly because I'm happy with the other one) but it should be with possible to modify \"Eclipse preferences > C/C++ > Build > Environment\". You should change the radio button and add PATH variable.</p>\n"}], "owner": {"reputation": 10180, "user_id": 143397, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/78d44a79f724bc784792b49f78769d3a?s=128&d=identicon&r=PG", "display_name": "davidA", "link": "https://stackoverflow.com/users/143397/davida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 640, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1588870989, "creation_date": 1557964291, "question_id": 56159051, "link": "https://stackoverflow.com/questions/56159051/how-to-use-a-pyenv-virtualenv-from-within-eclipse", "title": "How to use a Pyenv virtualenv from within Eclipse?", "body": "<p>I am using Eclipse on Linux to develop C applications, and the build system I have makes use of <code>make</code> and <code>python</code>. I have a custom virtualenv installed and managed by <code>pyenv</code>, and it works fine from the command line if I pre-select the virtualenv with, say <code>pyenv shell myvenv</code>.</p>\n\n<p>However I want Eclipse to make use of this virtualenv when building (via \"existing makefile\") from within Eclipse. Currently it runs my Makefile but uses the system python in <code>/usr/bin/python</code>, which is missing all of the packages needed by the build system.</p>\n\n<p>It isn't clear to me how to configure Eclipse to use a custom Python interpreter such as the one in my virtualenv. I have heard talk of setting <code>PYTHONPATH</code> however this seems to be for finding site-packages rather than the interpreter itself. My virtualenv is based on python 3.7 and my system python is 2.7, so setting this alone probably isn't going to work.</p>\n\n<p>I am not using PyDev (this is a C project, not a Python project) so there's no explicit support for Python in Eclipse. I'd prefer not to install PyDev if I can help it.</p>\n\n<p>I've noticed that pyenv adds its <code>plugins</code>, <code>shims</code> and <code>bin</code> directories to PATH when activated. I could explicitly add these to PATH in Eclipse, so that Eclipse uses pyenv to find an interpreter. However I'd prefer to point directly at a specific virtualenv rather than use the pyenv machinery to find the current virtualenv.</p>\n"}, {"tags": ["python", "regex"], "answers": [{"comments": [{"owner": {"reputation": 6783, "user_id": 3064538, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b644a108ae9ae0ec2f7402dd235d155c?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/3064538/boris"}, "edited": false, "score": 0, "creation_date": 1557964718, "post_id": 56159068, "comment_id": 98946710, "body": "You could also write out the actual characters <code>re.sub(r&#39;&quot;(.*)&quot;&#39;, r&#39;\u201c\\1\u201d&#39;, &#39;&quot;Quoted String&quot;&#39;)</code>"}, {"owner": {"reputation": 3428, "user_id": 41908, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/854d623a64df8a746ced46dd5806ddf5?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/41908/rob"}, "edited": false, "score": 0, "creation_date": 1558019526, "post_id": 56159068, "comment_id": 98969953, "body": "Ahh, I understand now. I thought the <code>r&#39;&#39;</code> string literal was doing something more regex-y. Thanks!"}], "tags": [], "owner": {"reputation": 320805, "user_id": 14343, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/75e9a11371cbe1566607180863efdf4c?s=128&d=identicon&r=PG", "display_name": "Ned Batchelder", "link": "https://stackoverflow.com/users/14343/ned-batchelder"}, "is_accepted": true, "score": 3, "last_activity_date": 1557964471, "creation_date": 1557964471, "answer_id": 56159068, "question_id": 56159038, "link": "https://stackoverflow.com/questions/56159038/what-is-the-correct-string-literal-for-python-re-sub-replacement/56159068#56159068", "title": "What is the correct string literal for python re.sub replacement?", "body": "<p>An <code>r''</code> string makes backslashes be just backslashes.  So <code>r\"\\u201c\"</code> has six characters: <code>\\</code> <code>u</code> <code>2</code> <code>0</code> <code>1</code> <code>c</code>.  Then the regex engine looks at those characters and complains, \"I don't know what backslash-u means!\"</p>\n\n<p>So this is a case where you want to not use an r-string for a regex substitution, because you need the backslash to introduce a unicode escape.  Without the r-prefix, you have a one-character string: <code>\"\\u201c\"</code> has the character <code>\\u201c</code>, or a curly quote.</p>\n\n<p>As you showed, without the r-prefix, the substitution works properly:</p>\n\n<pre><code>&gt;&gt;&gt; re.sub(r'\"(.*)\"', '\\u201c\\\\1\\u201d', '\"Quoted String\"')\n'\u201cQuoted String\u201d'\n</code></pre>\n"}], "owner": {"reputation": 3428, "user_id": 41908, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/854d623a64df8a746ced46dd5806ddf5?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/41908/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 0, "accepted_answer_id": 56159068, "answer_count": 1, "score": 0, "last_activity_date": 1557964471, "creation_date": 1557964196, "question_id": 56159038, "link": "https://stackoverflow.com/questions/56159038/what-is-the-correct-string-literal-for-python-re-sub-replacement", "title": "What is the correct string literal for python re.sub replacement?", "body": "<p>I don't understand the errors that I am getting with my python regex to insert Unicode characters into a regex substitution. Simplified examples are below.</p>\n\n<p>According to the <a href=\"https://docs.python.org/3/library/re.html#re.sub\" rel=\"nofollow noreferrer\">documentation</a> the repl parameter should be a <code>r''</code> string literal. But if I use a Unicode escape sequence for the replacement parameter then I get a <code>KeyError</code>. It's just fine to use that in the search pattern.</p>\n\n<p>I'm looking to understand what this error message is telling me so I can better choose when to use <code>r''</code> vs <code>''</code> for the replacement pattern. Any help is appreciated.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>Python 3.7.3 (default, Mar 27 2019, 09:23:15) \n[Clang 10.0.1 (clang-1001.0.46.3)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\nPython shell history and tab completion are enabled.\n&gt;&gt;&gt; import re\n&gt;&gt;&gt; re.sub(r'\"', r'\\u201c', '\"Quoted String\"')\nTraceback (most recent call last):\n  File \"/Users/rgant/.local/share/virtualenvs/app-backend-09-_IN13/lib/python3.7/sre_parse.py\", line 1021, in parse_template\n    this = chr(ESCAPES[this][1])\nKeyError: '\\\\u'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"/Users/rgant/.local/share/virtualenvs/app-backend-09-_IN13/lib/python3.7/re.py\", line 192, in sub\n    return _compile(pattern, flags).sub(repl, string, count)\n  File \"/Users/rgant/.local/share/virtualenvs/app-backend-09-_IN13/lib/python3.7/re.py\", line 309, in _subx\n    template = _compile_repl(template, pattern)\n  File \"/Users/rgant/.local/share/virtualenvs/app-backend-09-_IN13/lib/python3.7/re.py\", line 300, in _compile_repl\n    return sre_parse.parse_template(repl, pattern)\n  File \"/Users/rgant/.local/share/virtualenvs/app-backend-09-_IN13/lib/python3.7/sre_parse.py\", line 1024, in parse_template\n    raise s.error('bad escape %s' % this, len(this))\nre.error: bad escape \\u at position 0\n&gt;&gt;&gt; re.sub(r'\"(.*)\"', '\\u201c\\\\1\\u201d', '\"Quoted String\"')\n'\u201cQuoted String\u201d'\n&gt;&gt;&gt; re.sub(r'\"(.*)\"', r'\\1', '\"Quoted String\"')\n'Quoted String'\n&gt;&gt;&gt; re.sub(r'\\u201c', '!', '\u201cQuoted String\u201d')\n'!Quoted String\u201d'\n&gt;&gt;&gt; re.sub(r'\\u201c(.*)\\u201d', r'\"\\1\"', '\u201cQuoted String\u201d')\n'\"Quoted String\"'\n&gt;&gt;&gt; r'\\u201c(.*)\\u201d'\n'\\\\u201c(.*)\\\\u201d'\n&gt;&gt;&gt; r'\"\\1\"'\n'\"\\\\1\"'\n&gt;&gt;&gt; r'\\u201c'\n'\\\\u201c'\n&gt;&gt;&gt; r'\\u201c\\1\\u201d'\n'\\\\u201c\\\\1\\\\u201d'\n&gt;&gt;&gt;\n</code></pre>\n"}, {"tags": ["python", "c++", "pickle", "swig", "built-in"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1558010698, "post_id": 56159001, "comment_id": 98964244, "body": "Can you also post the generated mymodule.py?"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1558010945, "post_id": 56159001, "comment_id": 98964428, "body": "As an aside, you may need <code>%newobject A_str</code> to avoid a memory leak"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1558011530, "post_id": 56159001, "comment_id": 98964820, "body": "You may also want to check the return of <code>PyTuple_New</code> to make sure it didn&#39;t return <code>NULL</code>. Also, there is a memory leak there."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1558011669, "post_id": 56159001, "comment_id": 98964912, "body": "In <code>__getstate__</code> and <code>__setstate__</code>, I&#39;m surprised that SWIG didn&#39;t have any errors because <code>*self</code> should be <code>$self</code>"}, {"owner": {"reputation": 25, "user_id": 11503327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce9c9cb33b430948811a32c5431c9fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Ratafia", "link": "https://stackoverflow.com/users/11503327/ratafia"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1558022295, "post_id": 56159001, "comment_id": 98971451, "body": "You&#39;re right. I tried to focus on the issue, but for production needs, all the checks you mention would be present. Thanks."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1558022618, "post_id": 56159001, "comment_id": 98971611, "body": "Thanks for the update. I don&#39;t see <code>class A</code> defined in <code>mymodule.py</code>, though"}, {"owner": {"reputation": 25, "user_id": 11503327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce9c9cb33b430948811a32c5431c9fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Ratafia", "link": "https://stackoverflow.com/users/11503327/ratafia"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1558025814, "post_id": 56159001, "comment_id": 98973147, "body": "I think that class A only lives in the _mymodule.so library.since it is a builtin. Am i wrong ?"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1558026249, "post_id": 56159001, "comment_id": 98973341, "body": "Sorry I didn&#39;t realize you were using <code>-builtin</code>. Can I see what it looks like without it?"}, {"owner": {"reputation": 25, "user_id": 11503327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce9c9cb33b430948811a32c5431c9fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Ratafia", "link": "https://stackoverflow.com/users/11503327/ratafia"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1558028940, "post_id": 56159001, "comment_id": 98974635, "body": "I&#39;ve edited the post as requested. I must mention that without the -builtin flag, everything works fine. So the problem seems to be in the usage of both the buitlin feature and pickle."}], "owner": {"reputation": 25, "user_id": 11503327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce9c9cb33b430948811a32c5431c9fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Ratafia", "link": "https://stackoverflow.com/users/11503327/ratafia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 327, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1558028788, "creation_date": 1557963870, "last_edit_date": 1558028788, "question_id": 56159001, "link": "https://stackoverflow.com/questions/56159001/fail-to-serialize-a-c-class-wrapped-with-swig-using-pickle", "title": "Fail to serialize a C++ class wrapped with SWIG using pickle", "body": "<p>For the needs of my daily work, I have to wrap with SWIG some C++ classes located in a DSO. Everything was fine until I decided for performance reasons to use Python buffer protocol, that leads me to use the -builtin flag of the SWIG tool. I've managed to get thing working but when I try to serialize/deserialize with pickle my wrapped classes, I get the following error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"test.py\", line 23, in &lt;module&gt;\n    s = pickle.dumps(a) # crash here\n_pickle.PicklingError: Can't pickle &lt;class 'mymodule.A'&gt;: attribute lookup A on imp failed\n</code></pre>\n\n<p>Here is a MWE exposing the issue.</p>\n\n<p>First, the SWIG interface file <code>mymodule.i</code> wraps an inlined C++ class A.</p>\n\n<pre><code>// File mymodule.i\n%module mymodule\n\n%feature(\"python:tp_str\")  A \"A_str\" ;\n%feature(\"python:tp_repr\") A \"A_str\" ;\n%{\n#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n\n// forward declarations\nclass A ;\nstatic std::ostream &amp; operator &lt;&lt; (std::ostream &amp;, const A &amp;) ;\nstatic int  A_getI(const A &amp;) ;\nstatic void A_setI(A &amp;, int) ;\n\nclass A\n{\n  int i_ ;\npublic:\n  A(int i) : i_(i) {}\n  friend std::ostream &amp; operator &lt;&lt; (std::ostream &amp;, const A &amp;) ;\n  friend int  A_getI(const A &amp;) ;\n  friend void A_setI(A &amp;, int) ;\n} ;\n\nstd::ostream &amp; operator &lt;&lt; (std::ostream &amp; os, const A &amp; a)\n{\n  return os &lt;&lt; \"A(\" &lt;&lt; a.i_ &lt;&lt; \")\" ;\n}\n\nint A_getI(const A &amp; a)\n{\n  return a.i_ ;\n}\n\nvoid A_setI(A &amp; a, int i)\n{\n  a.i_ = i ;\n}\n\nstatic PyObject * A_str(SwigPyObject * obj)\n{\n  A * p_a = reinterpret_cast&lt;A *&gt;(obj-&gt;ptr) ;\n  std::ostringstream oss ;\n  oss &lt;&lt; *p_a ;\n  return PyUnicode_FromString(oss.str().c_str()) ;\n}\n\n%}\n\nclass A\n{\npublic:\n  A(int i) ;\n} ;\n\n%extend A\n{\n  PyObject * __getstate__()\n  {\n    PyObject * tuple = PyTuple_New(1) ;\n    PyTuple_SetItem(tuple, 0, PyLong_FromLong(A_getI(*self))) ;\n    return tuple ;\n  }\n  void __setstate__(PyObject * state)\n  {\n    if (PyTuple_Check(state)) {\n      PyObject * val = PyTuple_GetItem(state, 0) ;\n      if (PyLong_Check(val)) {\n        int i = (int) PyLong_AsLong(val) ;\n        A_setI(*self, i) ;\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>Then, the <code>test.py</code> I use:</p>\n\n<pre><code>#!/usr/bin/env python3\n# File: test.py\n\nfrom mymodule import *\n\n# a first object a\na = A(10)\nprint(\"a=\",a)\n\n# we manually get the internal state of a\nsa = a.__getstate__()\nprint(\"sa=\",sa)\n\n# a second object b with a different internal state\nb = A(-1)\nprint(\"b=\",b)\n\n# we manually set a's internal state to b\nb.__setstate__(sa)\nprint(\"b=\",b)\n\n# now we try to dump a's state using pickle...\nimport pickle\ns = pickle.dumps(a) # crash here\nprint(s)\n</code></pre>\n\n<p>I compile the module:</p>\n\n<pre><code>swig3.0 -python -py3 -c++ -builtin -o mymodulePYTHON_wrap.cxx mymodule.i\ng++ -D_mymodule_EXPORTS -DSWIG_REV=\"\" -fPIC -I/usr/include/python3.4m -std=c++11 -o mymodulePYTHON_wrap.cxx.o -c mymodulePYTHON_wrap.cxx\ng++ -fPIC -shared -Wl,-soname,_mymodule.so -o _mymodule.so mymodulePYTHON_wrap.cxx.o\n</code></pre>\n\n<p>I run the test:</p>\n\n<pre><code>python3 test.py\n</code></pre>\n\n<p>And I get the following output:</p>\n\n<pre><code>a= A(10)\nsa= (10,)\nb= A(-1)\nb= A(10)\nTraceback (most recent call last):\n  File \"test.py\", line 23, in &lt;module&gt;\n    s = pickle.dumps(a) # crash here\n_pickle.PicklingError: Can't pickle &lt;class 'mymodule.A'&gt;: attribute lookup A on imp failed\n</code></pre>\n\n<p><strong>What is the reason of the error ?</strong></p>\n\n<p>How can I solve my problem ?</p>\n\n<p>I've also tried to:</p>\n\n<ul>\n<li>read the SWIG and the Python documentation</li>\n<li>search the Web</li>\n<li>read most of the articles related to this problem on SO but without better knowledge (the closer to my problem seems to be <a href=\"https://stackoverflow.com/questions/32295313/serialize-swig-extension-with-dill\">Serialize SWIG extension with dill</a> except that Mark McKems' answer leaves me hopeless, <a href=\"https://stackoverflow.com/questions/19855156/whats-the-exact-usage-of-reduce-in-pickler/19874769#19874769\">What's the exact usage of __reduce__ in Pickler</a>, <a href=\"https://stackoverflow.com/questions/36301322/pickle-cython-class-with-c-pointers\">Pickle Cython Class with C pointers</a>)</li>\n<li>use a <code>__reduce__</code> method returning what's expected (it worked) but the same error occurs</li>\n<li>use dill instead of pickle, the same</li>\n<li>change the protocol to the highest, the same</li>\n</ul>\n\n<p>The versions of the my tools are quite old because I have to use a Debian jessie:</p>\n\n<ul>\n<li>Python 3.4.2</li>\n<li>G++ 4.9.2</li>\n<li>SWIG 3.0.2</li>\n</ul>\n\n<p>I'm stuck. Any help would be appreciated.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>The <code>mymodule.py</code> file generated by SWIG (WITH <code>-builtin</code> flag):</p>\n\n<pre><code># This file was automatically generated by SWIG (http://www.swig.org).\n# Version 3.0.2\n#\n# Do not make changes to this file unless you know what you are doing--modify\n# the SWIG interface file instead.\n\n\n\n\n\nfrom sys import version_info\nif version_info &gt;= (2,6,0):\n    def swig_import_helper():\n        from os.path import dirname\n        import imp\n        fp = None\n        try:\n            fp, pathname, description = imp.find_module('_mymodule', [dirname(__file__)])\n        except ImportError:\n            import _mymodule\n            return _mymodule\n        if fp is not None:\n            try:\n                _mod = imp.load_module('_mymodule', fp, pathname, description)\n            finally:\n                fp.close()\n            return _mod\n    _mymodule = swig_import_helper()\n    del swig_import_helper\nelse:\n    import _mymodule\ndel version_info\nfrom _mymodule import *\ntry:\n    _swig_property = property\nexcept NameError:\n    pass # Python &lt; 2.2 doesn't have 'property'.\ndef _swig_setattr_nondynamic(self,class_type,name,value,static=1):\n    if (name == \"thisown\"): return self.this.own(value)\n    if (name == \"this\"):\n        if type(value).__name__ == 'SwigPyObject':\n            self.__dict__[name] = value\n            return\n    method = class_type.__swig_setmethods__.get(name,None)\n    if method: return method(self,value)\n    if (not static):\n        self.__dict__[name] = value\n    else:\n        raise AttributeError(\"You cannot add attributes to %s\" % self)\n\ndef _swig_setattr(self,class_type,name,value):\n    return _swig_setattr_nondynamic(self,class_type,name,value,0)\n\ndef _swig_getattr(self,class_type,name):\n    if (name == \"thisown\"): return self.this.own()\n    method = class_type.__swig_getmethods__.get(name,None)\n    if method: return method(self)\n    raise AttributeError(name)\n\ndef _swig_repr(self):\n    try: strthis = \"proxy of \" + self.this.__repr__()\n    except: strthis = \"\"\n    return \"&lt;%s.%s; %s &gt;\" % (self.__class__.__module__, self.__class__.__name__, strthis,)\n\ntry:\n    _object = object\n    _newclass = 1\nexcept AttributeError:\n    class _object : pass\n    _newclass = 0\n\n\n\n# This file is compatible with both classic and new-style classes.\n</code></pre>\n\n<p>The <code>mymodule.py</code> file WITHOUT <code>-builtin</code> SWIG flag:</p>\n\n<pre><code># This file was automatically generated by SWIG (http://www.swig.org).\n# Version 3.0.2\n#\n# Do not make changes to this file unless you know what you are doing--modify\n# the SWIG interface file instead.\n\n\n\n\n\nfrom sys import version_info\nif version_info &gt;= (2,6,0):\n    def swig_import_helper():\n        from os.path import dirname\n        import imp\n        fp = None\n        try:\n            fp, pathname, description = imp.find_module('_mymodule', [dirname(__file__)])\n        except ImportError:\n            import _mymodule\n            return _mymodule\n        if fp is not None:\n            try:\n                _mod = imp.load_module('_mymodule', fp, pathname, description)\n            finally:\n                fp.close()\n            return _mod\n    _mymodule = swig_import_helper()\n    del swig_import_helper\nelse:\n    import _mymodule\ndel version_info\ntry:\n    _swig_property = property\nexcept NameError:\n    pass # Python &lt; 2.2 doesn't have 'property'.\ndef _swig_setattr_nondynamic(self,class_type,name,value,static=1):\n    if (name == \"thisown\"): return self.this.own(value)\n    if (name == \"this\"):\n        if type(value).__name__ == 'SwigPyObject':\n            self.__dict__[name] = value\n            return\n    method = class_type.__swig_setmethods__.get(name,None)\n    if method: return method(self,value)\n    if (not static):\n        self.__dict__[name] = value\n    else:\n        raise AttributeError(\"You cannot add attributes to %s\" % self)\n\ndef _swig_setattr(self,class_type,name,value):\n    return _swig_setattr_nondynamic(self,class_type,name,value,0)\n\ndef _swig_getattr(self,class_type,name):\n    if (name == \"thisown\"): return self.this.own()\n    method = class_type.__swig_getmethods__.get(name,None)\n    if method: return method(self)\n    raise AttributeError(name)\n\ndef _swig_repr(self):\n    try: strthis = \"proxy of \" + self.this.__repr__()\n    except: strthis = \"\"\n    return \"&lt;%s.%s; %s &gt;\" % (self.__class__.__module__, self.__class__.__name__, strthis,)\n\ntry:\n    _object = object\n    _newclass = 1\nexcept AttributeError:\n    class _object : pass\n    _newclass = 0\n\n\nclass A(_object):\n    __swig_setmethods__ = {}\n    __setattr__ = lambda self, name, value: _swig_setattr(self, A, name, value)\n    __swig_getmethods__ = {}\n    __getattr__ = lambda self, name: _swig_getattr(self, A, name)\n    __repr__ = _swig_repr\n    def __init__(self, *args): \n        this = _mymodule.new_A(*args)\n        try: self.this.append(this)\n        except: self.this = this\n    def __getstate__(self) -&gt; \"PyObject *\" : return _mymodule.A___getstate__(self)\n    def __setstate__(self, *args) -&gt; \"void\" : return _mymodule.A___setstate__(self, *args)\n    __swig_destroy__ = _mymodule.delete_A\n    __del__ = lambda self : None;\nA_swigregister = _mymodule.A_swigregister\nA_swigregister(A)\n\n# This file is compatible with both classic and new-style classes.\n</code></pre>\n"}, {"tags": ["python", "json", "kivy"], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 11402640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11727b58f6383c73175702b9e46581d?s=128&d=identicon&r=PG&f=1", "display_name": "yemi.JUMP", "link": "https://stackoverflow.com/users/11402640/yemi-jump"}, "edited": false, "score": 0, "creation_date": 1557968807, "post_id": 56159202, "comment_id": 98947341, "body": "I need to keep the <code>if key == name:</code> protion of the code because the program wont know what <code>key</code> is and when I make my code: <code>key[name][&#39;score&#39;] += 1</code> I get <code>TypeError: string indices must be integers</code>"}, {"owner": {"reputation": 591, "user_id": 6781377, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-L41XCVzT1hs/AAAAAAAAAAI/AAAAAAAAGHk/ZVutHgE-0EM/photo.jpg?sz=128", "display_name": "al76", "link": "https://stackoverflow.com/users/6781377/al76"}, "reply_to_user": {"reputation": 197, "user_id": 11402640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11727b58f6383c73175702b9e46581d?s=128&d=identicon&r=PG&f=1", "display_name": "yemi.JUMP", "link": "https://stackoverflow.com/users/11402640/yemi-jump"}, "edited": false, "score": 0, "creation_date": 1557969417, "post_id": 56159202, "comment_id": 98947427, "body": "Just confirming you replaced the 5 lines with my suggested fix?"}, {"owner": {"reputation": 197, "user_id": 11402640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11727b58f6383c73175702b9e46581d?s=128&d=identicon&r=PG&f=1", "display_name": "yemi.JUMP", "link": "https://stackoverflow.com/users/11402640/yemi-jump"}, "edited": false, "score": 0, "creation_date": 1557969625, "post_id": 56159202, "comment_id": 98947455, "body": "when I do that I get ` NameError: name &#39;key&#39; is not defined`"}, {"owner": {"reputation": 591, "user_id": 6781377, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-L41XCVzT1hs/AAAAAAAAAAI/AAAAAAAAGHk/ZVutHgE-0EM/photo.jpg?sz=128", "display_name": "al76", "link": "https://stackoverflow.com/users/6781377/al76"}, "reply_to_user": {"reputation": 197, "user_id": 11402640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11727b58f6383c73175702b9e46581d?s=128&d=identicon&r=PG&f=1", "display_name": "yemi.JUMP", "link": "https://stackoverflow.com/users/11402640/yemi-jump"}, "edited": false, "score": 0, "creation_date": 1557969808, "post_id": 56159202, "comment_id": 98947489, "body": "apologies, typo at my end. I&#39;ve updated the answer to use data not key"}, {"owner": {"reputation": 197, "user_id": 11402640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11727b58f6383c73175702b9e46581d?s=128&d=identicon&r=PG&f=1", "display_name": "yemi.JUMP", "link": "https://stackoverflow.com/users/11402640/yemi-jump"}, "edited": false, "score": 0, "creation_date": 1557970557, "post_id": 56159202, "comment_id": 98947628, "body": "The value of <code>score</code> in my json file still doesn&#39;t change."}, {"owner": {"reputation": 591, "user_id": 6781377, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-L41XCVzT1hs/AAAAAAAAAAI/AAAAAAAAGHk/ZVutHgE-0EM/photo.jpg?sz=128", "display_name": "al76", "link": "https://stackoverflow.com/users/6781377/al76"}, "reply_to_user": {"reputation": 197, "user_id": 11402640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11727b58f6383c73175702b9e46581d?s=128&d=identicon&r=PG&f=1", "display_name": "yemi.JUMP", "link": "https://stackoverflow.com/users/11402640/yemi-jump"}, "edited": false, "score": 0, "creation_date": 1557970936, "post_id": 56159202, "comment_id": 98947705, "body": "You need to write the updated dictionary back to the file.  You can confirm the dictionary is updated with print data[name][&#39;score&#39;]      <a href=\"https://stackoverflow.com/questions/12309269/how-do-i-write-json-data-to-a-file\" title=\"how do i write json data to a file\">stackoverflow.com/questions/12309269/&hellip;</a>"}], "tags": [], "owner": {"reputation": 591, "user_id": 6781377, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-L41XCVzT1hs/AAAAAAAAAAI/AAAAAAAAGHk/ZVutHgE-0EM/photo.jpg?sz=128", "display_name": "al76", "link": "https://stackoverflow.com/users/6781377/al76"}, "is_accepted": false, "score": 0, "last_activity_date": 1557969730, "last_edit_date": 1557969730, "creation_date": 1557965782, "answer_id": 56159202, "question_id": 56158969, "link": "https://stackoverflow.com/questions/56158969/how-do-i-change-the-value-of-a-nested-key-inside-a-json-file/56159202#56159202", "title": "How do I change the value of a nested key inside a json file?", "body": "<p>You should be able to update the dictionary element directly.</p>\n\n<p>Replace the following</p>\n\n<pre><code>for key in data.keys():\n    if key == name:\n        score = data.get(key, {}).get('score')\n        new_score = score + 1\n        key['score'] = new_score # come back to this\n</code></pre>\n\n<p>with</p>\n\n<pre><code>data[name]['score'] += 1\n</code></pre>\n\n<p>So code would be</p>\n\n<pre><code>def add_score(self, obj):\n        for child in reversed(self.root.screen_two.ids.streak_zone.children):\n            name = child.text\n\n            with open(\"streak.json\", \"r+\") as read_file:\n                data = json.load(read_file)\n\n            data[name]['score'] += 1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 197, "user_id": 11402640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11727b58f6383c73175702b9e46581d?s=128&d=identicon&r=PG&f=1", "display_name": "yemi.JUMP", "link": "https://stackoverflow.com/users/11402640/yemi-jump"}, "edited": false, "score": 0, "creation_date": 1557970346, "post_id": 56159562, "comment_id": 98947591, "body": "The value of <code>score</code> in my json file doesn&#39;t change."}, {"owner": {"reputation": 312, "user_id": 8833217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c017674811aeee895c22398e95b58b51?s=128&d=identicon&r=PG&f=1", "display_name": "bkyada", "link": "https://stackoverflow.com/users/8833217/bkyada"}, "reply_to_user": {"reputation": 197, "user_id": 11402640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11727b58f6383c73175702b9e46581d?s=128&d=identicon&r=PG&f=1", "display_name": "yemi.JUMP", "link": "https://stackoverflow.com/users/11402640/yemi-jump"}, "edited": false, "score": 0, "creation_date": 1557970543, "post_id": 56159562, "comment_id": 98947625, "body": "@yemi.JUMP That is because you are reading/parsing the JSON file and storing data into a variable and after that performing operation on that variable not in the file."}, {"owner": {"reputation": 197, "user_id": 11402640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11727b58f6383c73175702b9e46581d?s=128&d=identicon&r=PG&f=1", "display_name": "yemi.JUMP", "link": "https://stackoverflow.com/users/11402640/yemi-jump"}, "edited": false, "score": 0, "creation_date": 1557970712, "post_id": 56159562, "comment_id": 98947662, "body": "Sorry if I wasn&#39;t clear with my question. I have edited my post to include that I want the file to change."}, {"owner": {"reputation": 591, "user_id": 6781377, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-L41XCVzT1hs/AAAAAAAAAAI/AAAAAAAAGHk/ZVutHgE-0EM/photo.jpg?sz=128", "display_name": "al76", "link": "https://stackoverflow.com/users/6781377/al76"}, "edited": false, "score": 0, "creation_date": 1557971631, "post_id": 56159562, "comment_id": 98947816, "body": "Your original question and code supplied didn&#39;t mention writing to a file."}, {"owner": {"reputation": 197, "user_id": 11402640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11727b58f6383c73175702b9e46581d?s=128&d=identicon&r=PG&f=1", "display_name": "yemi.JUMP", "link": "https://stackoverflow.com/users/11402640/yemi-jump"}, "edited": false, "score": 0, "creation_date": 1558051975, "post_id": 56159562, "comment_id": 98982288, "body": "@bkyada although this method works, every value with the name score is changed. Is there a way to only have one <code>score</code> change?"}, {"owner": {"reputation": 312, "user_id": 8833217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c017674811aeee895c22398e95b58b51?s=128&d=identicon&r=PG&f=1", "display_name": "bkyada", "link": "https://stackoverflow.com/users/8833217/bkyada"}, "reply_to_user": {"reputation": 197, "user_id": 11402640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11727b58f6383c73175702b9e46581d?s=128&d=identicon&r=PG&f=1", "display_name": "yemi.JUMP", "link": "https://stackoverflow.com/users/11402640/yemi-jump"}, "edited": false, "score": 0, "creation_date": 1558111261, "post_id": 56159562, "comment_id": 99005781, "body": "@yemi.JUMP Can you be more clear about the use case? If you can provide an example. Here, your outer loop is getting all the names and based on comparison it is updating the score. To change one <code>score</code> change do you have any other requirement to check?"}, {"owner": {"reputation": 197, "user_id": 11402640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11727b58f6383c73175702b9e46581d?s=128&d=identicon&r=PG&f=1", "display_name": "yemi.JUMP", "link": "https://stackoverflow.com/users/11402640/yemi-jump"}, "edited": false, "score": 0, "creation_date": 1558185037, "post_id": 56159562, "comment_id": 99021695, "body": "The name of the key is the same as the name of the button, that\u2019s why I did <code>name=child.text</code> but it\u2019s updating all of the buttons."}], "tags": [], "owner": {"reputation": 312, "user_id": 8833217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c017674811aeee895c22398e95b58b51?s=128&d=identicon&r=PG&f=1", "display_name": "bkyada", "link": "https://stackoverflow.com/users/8833217/bkyada"}, "is_accepted": true, "score": 0, "last_activity_date": 1557971002, "last_edit_date": 1557971002, "creation_date": 1557969668, "answer_id": 56159562, "question_id": 56158969, "link": "https://stackoverflow.com/questions/56158969/how-do-i-change-the-value-of-a-nested-key-inside-a-json-file/56159562#56159562", "title": "How do I change the value of a nested key inside a json file?", "body": "<p>In your for loop, you are iterating over keys array which is <code>['one','two','three']</code> in your case.</p>\n\n<p>Try below code. Hope this will help!</p>\n\n<pre><code>for key,value in data.items():\n    if key == name:\n        score = value['score']       \n        new_score = score + 1\n        value['score'] = new_score \n</code></pre>\n\n<p>Or for one liner instead of for loop use below,</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>data[name]['score']+=1  #name='one'\n</code></pre>\n\n<p><strong>Edit within file</strong></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>with open('streak.json', 'r+') as f:\n    data = json.load(f)\n    data[name]['score']+=1 \n    f.seek(0)\n    json.dump(data, f, indent=4)\n    f.truncate()  \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 197, "user_id": 11402640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11727b58f6383c73175702b9e46581d?s=128&d=identicon&r=PG&f=1", "display_name": "yemi.JUMP", "link": "https://stackoverflow.com/users/11402640/yemi-jump"}, "edited": false, "score": 0, "creation_date": 1557970451, "post_id": 56159568, "comment_id": 98947607, "body": "The value of score in my json file doesn&#39;t change."}, {"owner": {"reputation": 935, "user_id": 3395802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3cd4b8fede5cdfa55631a92de573b3d?s=128&d=identicon&r=PG&f=1", "display_name": "Nithin", "link": "https://stackoverflow.com/users/3395802/nithin"}, "reply_to_user": {"reputation": 197, "user_id": 11402640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11727b58f6383c73175702b9e46581d?s=128&d=identicon&r=PG&f=1", "display_name": "yemi.JUMP", "link": "https://stackoverflow.com/users/11402640/yemi-jump"}, "edited": false, "score": 0, "creation_date": 1557970700, "post_id": 56159568, "comment_id": 98947660, "body": "For that, you will have to write the &quot;data&quot; back to the file. Use json.dump()"}], "tags": [], "owner": {"reputation": 935, "user_id": 3395802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3cd4b8fede5cdfa55631a92de573b3d?s=128&d=identicon&r=PG&f=1", "display_name": "Nithin", "link": "https://stackoverflow.com/users/3395802/nithin"}, "is_accepted": false, "score": 0, "last_activity_date": 1557971138, "last_edit_date": 1557971138, "creation_date": 1557969750, "answer_id": 56159568, "question_id": 56158969, "link": "https://stackoverflow.com/questions/56158969/how-do-i-change-the-value-of-a-nested-key-inside-a-json-file/56159568#56159568", "title": "How do I change the value of a nested key inside a json file?", "body": "<p>This should work</p>\n\n<pre><code>with open(\"a.json\", \"r+\") as read_file:\n    data = json.load(read_file)\n    data[name]['score'] += 1 # update score\n\nwith open(\"a.json\", \"w\") as json_file: #write it back to the file\n    json.dump(data, json_file)\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 11402640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11727b58f6383c73175702b9e46581d?s=128&d=identicon&r=PG&f=1", "display_name": "yemi.JUMP", "link": "https://stackoverflow.com/users/11402640/yemi-jump"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 518, "favorite_count": 0, "accepted_answer_id": 56159562, "answer_count": 3, "score": -1, "last_activity_date": 1557972166, "creation_date": 1557963625, "last_edit_date": 1557972166, "question_id": 56158969, "link": "https://stackoverflow.com/questions/56158969/how-do-i-change-the-value-of-a-nested-key-inside-a-json-file", "title": "How do I change the value of a nested key inside a json file?", "body": "<p>I want to change the value of a nested key but I get this error </p>\n\n<pre><code>key['score'] = new_score # come back to this\n TypeError: 'str' object does not support item assignment\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>def add_score(self, obj):\n        for child in reversed(self.root.screen_two.ids.streak_zone.children):\n            name = child.text\n\n            with open(\"streak.json\", \"r+\") as read_file:\n                data = json.load(read_file)\n\n            for key in data.keys():\n                if key == name:\n                    score = data.get(key, {}).get('score')\n                    new_score = score + 1\n                    key['score'] = new_score # come back to this\n</code></pre>\n\n<p>This is what my json file looks like:</p>\n\n<pre><code>{\"one\": {\"action\": \"one\", \n        \"delay\": 1557963534.4314187, \n        \"seconds\": 60, \n        \"score\": 0, \n        \"delta\": 1557963474.4314187}, \n \"two\": {\"action\": \"two\", \n         \"delay\": 1557963664.037102, \n         \"seconds\": 120, \n         \"score\": 0, \n         \"delta\": 1557963544.037102}, \n \"three\":{\"action\": \"three\", \n          \"delay\": 1557963792.4683638, \n          \"seconds\": 180, \n          \"score\": 0, \n          \"delta\": 1557963612.4683638}\n}\n</code></pre>\n\n<p>How would I change the <code>score</code> value inside of my json file?</p>\n"}, {"tags": ["python", "permissions", "azure-active-directory", "azure-data-lake", "azure-files"], "comments": [{"owner": {"reputation": 30516, "user_id": 9455659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Albsq.jpg?s=128&g=1", "display_name": "Joy Wang", "link": "https://stackoverflow.com/users/9455659/joy-wang"}, "edited": false, "score": 0, "creation_date": 1557973969, "post_id": 56158956, "comment_id": 98948166, "body": "This error really like you just granted the permission on the root(add to This folder without all children), can you make sure you also granted the permission to <code>Test</code> folder?"}, {"owner": {"reputation": 23, "user_id": 11505001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c5aeed5ac7dad23a65c9ac2ec4b46a0?s=128&d=identicon&r=PG&f=1", "display_name": "Dave", "link": "https://stackoverflow.com/users/11505001/dave"}, "reply_to_user": {"reputation": 30516, "user_id": 9455659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Albsq.jpg?s=128&g=1", "display_name": "Joy Wang", "link": "https://stackoverflow.com/users/9455659/joy-wang"}, "edited": false, "score": 1, "creation_date": 1558091082, "post_id": 56158956, "comment_id": 98995438, "body": "Thanks a lot, that was the issue. The option for apply permision to children was&#39;nt checked. It works now."}], "answers": [{"tags": [], "owner": {"reputation": 4491, "user_id": 6049604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1612c1d48cc981963c4fc034ff322e8d?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit Verma", "link": "https://stackoverflow.com/users/6049604/mohit-verma"}, "is_accepted": false, "score": 0, "last_activity_date": 1558077688, "creation_date": 1558077688, "answer_id": 56181505, "question_id": 56158956, "link": "https://stackoverflow.com/questions/56158956/python-permissionerror-accessing-azure-datalake-folder/56181505#56181505", "title": "Python PermissionError accessing Azure Datalake folder", "body": "<p>In addition to the permissions on the X folder and files, you also need Execute (X) permission on all the ancestors of X.</p>\n\n<p>You can read further about permission required to read files here</p>\n\n<p>Permissions needed to read a file in this document here:</p>\n\n<p><a href=\"https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-access-control\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-access-control</a></p>\n"}, {"tags": [], "owner": {"reputation": 30516, "user_id": 9455659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Albsq.jpg?s=128&g=1", "display_name": "Joy Wang", "link": "https://stackoverflow.com/users/9455659/joy-wang"}, "is_accepted": true, "score": 2, "last_activity_date": 1558098069, "creation_date": 1558098069, "answer_id": 56186953, "question_id": 56158956, "link": "https://stackoverflow.com/questions/56158956/python-permissionerror-accessing-azure-datalake-folder/56186953#56186953", "title": "Python PermissionError accessing Azure Datalake folder", "body": "<p>Add my comment as an answer:</p>\n\n<p>The error was caused by you just granted the permission on the root(add to This folder without all children), you also need to grant the permission for all children, then it will work.</p>\n"}], "owner": {"reputation": 23, "user_id": 11505001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c5aeed5ac7dad23a65c9ac2ec4b46a0?s=128&d=identicon&r=PG&f=1", "display_name": "Dave", "link": "https://stackoverflow.com/users/11505001/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 646, "favorite_count": 0, "accepted_answer_id": 56186953, "answer_count": 2, "score": 2, "last_activity_date": 1558390537, "creation_date": 1557963537, "question_id": 56158956, "link": "https://stackoverflow.com/questions/56158956/python-permissionerror-accessing-azure-datalake-folder", "title": "Python PermissionError accessing Azure Datalake folder", "body": "<p>I'm trying to upload files from a shared folder to an Azure Datalake gen 1 folder.</p>\n\n<p>For now, i am just testing the connection, and listing folders under the root directory:</p>\n\n<pre><code>adlCreds = lib.auth(tenant_id = tenant_id, client_secret = client_secret, client_id = client_id, resource = RESOURCE, azure_username = azure_username,azure_password=azure_password)\n\nadls = core.AzureDLFileSystem(adlCreds, store_name=adlsAccountName)\n\nprint(adls.ls())\n</code></pre>\n\n<p>That works fine and i can see all folders.</p>\n\n<p>But when i am trying to access one of those folders with the ls method or the walk method, i am getting this error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Users\\Python37-32\\test_azure.py\", line 46, in &lt;module&gt;\n    print(adls.ls('/Test'))\n  File \"C:\\Users\\Python37-32\\lib\\site-packages\\azure\\datalake\\store\\core.py\", line 164, in ls\n    files = self._ls(path, invalidate_cache)\n  File \"C:\\Users\\Python37-32\\lib\\site-packages\\azure\\datalake\\store\\core.py\", line 143, in _ls\n    self.dirs[key] = self._ls_batched(key, batch_size=batch_size)\n  File \"C:\\Users\\Python37-32\\lib\\site-packages\\azure\\datalake\\store\\core.py\", line 124, in _ls_batched\n    ls_call_result = self.azure.call('LISTSTATUS', path, **parms)\n  File \"C:\\Users\\Python37-32\\lib\\site-packages\\azure\\datalake\\store\\lib.py\", line 437, in call\n    self.log_response_and_raise(response, PermissionError(path), level=exception_log_level)\n  File \"C:\\Users\\Python37-32\\lib\\site-packages\\azure\\datalake\\store\\lib.py\", line 345, in log_response_and_raise\n    raise exception\nPermissionError: Test\n</code></pre>\n\n<p>I am granted by Read, Write and Execute privileges on the root and the 'Test' folder.</p>\n\n<p>Do you have an idea why the permission is denied ?</p>\n\n<p>Thank you for your time.</p>\n"}, {"tags": ["python", "matplotlib", "heatmap", "scatter-plot"], "answers": [{"comments": [{"owner": {"reputation": 1383, "user_id": 4107770, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/84cd102ae268671aa55a8869094210fd?s=128&d=identicon&r=PG&f=1", "display_name": "Vladimir Vargas", "link": "https://stackoverflow.com/users/4107770/vladimir-vargas"}, "edited": false, "score": 0, "creation_date": 1558020007, "post_id": 56164957, "comment_id": 98970218, "body": "I am satisfied with your solution. However, in the overlapping region the orange density plot is clearly on top of the blue density plot, this comes problematic in the application that I wanted for my question, because I have like 10 different blobs, and they overlap in many regions, and the background density plots don&#39;t look too good. But it is certainly a good solution"}], "tags": [], "owner": {"reputation": 29479, "user_id": 1356000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ef54c2101a4c23ea2441ce2b346ffb75?s=128&d=identicon&r=PG", "display_name": "Diziet Asahi", "link": "https://stackoverflow.com/users/1356000/diziet-asahi"}, "is_accepted": true, "score": 1, "last_activity_date": 1557998019, "creation_date": 1557998019, "answer_id": 56164957, "question_id": 56158954, "link": "https://stackoverflow.com/questions/56158954/plotting-heatmaps-under-blobs-in-a-scatter-plot-with-matplotlib/56164957#56164957", "title": "Plotting heatmaps under blobs in a scatter plot with matplotlib", "body": "<p>You could use <a href=\"https://seaborn.pydata.org/generated/seaborn.kdeplot.html?highlight=kdeplot#seaborn.kdeplot\" rel=\"nofollow noreferrer\">seaborn's kdeplot</a></p>\n\n<pre><code>x1,y1 = np.random.normal(loc=0.0, scale=1.0, size=(100,)), np.random.normal(loc=2.0, scale=1.0, size=(100,))\nx2,y2 = np.random.normal(loc=2., scale=1.0, size=(100,)), np.random.normal(loc=0.0, scale=1.0, size=(100,))\n\nfig, ax = plt.subplots()\nsns.kdeplot(x1,y1, shade=True, shade_lowest=False, alpha=0.5, cbar=False, ax=ax, cmap=\"Blues\")\nsns.kdeplot(x2,y2, shade=True, shade_lowest=False, alpha=0.5, cbar=False, ax=ax, cmap=\"Oranges\")\nax.scatter(x1,y1, color=\"C0\")\nax.scatter(x2,y2, color=\"C1\")\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/dXX2v.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dXX2v.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1383, "user_id": 4107770, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/84cd102ae268671aa55a8869094210fd?s=128&d=identicon&r=PG&f=1", "display_name": "Vladimir Vargas", "link": "https://stackoverflow.com/users/4107770/vladimir-vargas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 818, "favorite_count": 0, "accepted_answer_id": 56164957, "answer_count": 1, "score": 0, "last_activity_date": 1557998019, "creation_date": 1557963528, "question_id": 56158954, "link": "https://stackoverflow.com/questions/56158954/plotting-heatmaps-under-blobs-in-a-scatter-plot-with-matplotlib", "title": "Plotting heatmaps under blobs in a scatter plot with matplotlib", "body": "<p>I have an Nx2 matrix <code>X</code> and an N-dim vector of labels <code>y</code>. For instance:</p>\n\n<pre><code>from sklearn.datasets.samples_generator import make_blobs\nimport matplotlib.pyplot as plt\n\nX, y = make_blobs(n_samples=100, centers=2, n_features=2, random_state=2)\n\nplt.scatter(X[:, 0], X[:, 1], c=y, edgecolor='k')\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/0RuMJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0RuMJ.png\" alt=\"enter image description here\"></a></p>\n\n<p>In the background of this plot I want to plot two heatmaps, with a colormap that has the point's colour in the zones of high points density, so that the image looks like having a purple and a yellow cloud, each centered at the purple and yellow blobs.</p>\n\n<p>This has been challenging for me. I tried creating a 2D histogram for each blob as shown in <a href=\"https://stackoverflow.com/a/2461029/4107770\">this</a> answer, and also created a custom colormap so that the low density areas of the plot are white, and the high density areas are coloured with the blob's colour:</p>\n\n<pre><code>import numpy as np\nimport seaborn as sns\nfrom matplotlib.colors import ListedColormap\n\npalette_colors = sns.color_palette(\"deep\")\npalette = sns.light_palette(palette_colors[0], input=\"husl\", n_colors=100)\nmy_cmap = ListedColormap(sns.color_palette(palette).as_hex())\n\nwhr1 = np.where(y==0)\nwhr2 = np.where(y==1)\nx1 = X[whr1][:, 0]\ny1 = X[whr1][:, 1]\nx2 = X[whr2][:, 0]\ny2 = X[whr2][:, 1]\n\nheatmap1, xedges1, yedges1 = np.histogram2d(x1, y1, bins=50)\nextent1 = [xedges1[0], xedges1[-1], yedges1[0], yedges1[-1]]\nheatmap2, xedges2, yedges2 = np.histogram2d(x2, y2, bins=50)\nextent2 = [xedges2[0], xedges2[-1], yedges2[0], yedges2[-1]]\n</code></pre>\n\n<p>But now I don't know how to plot those heatmaps using imshow. I also want to make sure that if the blobs overlap, so will the heatmaps so that one heatmap does not cover the other heatmap, but rather there is a combination of the heatmaps colours and intensities in the overlapping region.</p>\n\n<p>I really appreciate your help!</p>\n"}, {"tags": ["python", "bash", "hive", "large-data"], "owner": {"reputation": 31, "user_id": 5605936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46ebcef19a8e554b08d17198420cb2b3?s=128&d=identicon&r=PG&f=1", "display_name": "Ulysses", "link": "https://stackoverflow.com/users/5605936/ulysses"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 343, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1578510810, "creation_date": 1557963480, "last_edit_date": 1578510810, "question_id": 56158947, "link": "https://stackoverflow.com/questions/56158947/processing-loading-huge-gzip-file-into-hive", "title": "Processing/loading huge gzip file into hive", "body": "<p>I have a huge gzipped csv file (55GB compressed, 660GB expanded) that I am trying to to process and load into hive in a more useable format.</p>\n\n<p>The file has 2.5B records of device events, with each row giving a device_id, event_id, timestamp, and event_name for identification and then about 160 more columns, only a few of which are non-null for a given event_name.</p>\n\n<p>Ultimately, I'd like to format the data into the few identification columns and a JSON column that only stores the relevant fields for a given event_name and get this in a hive table partitioned by date, hour, and event_name (and partitions based on metadata like timezone, but hopefully that is a minor point) so we can query the data easily for further analysis. However, the sheer size of the file is giving me trouble.</p>\n\n<p>I've tried several approaches, without much success:</p>\n\n<ol>\n<li><p>Loading the file directly into hive and then doing 'INSERT OVERWRITE ... SELECT TRANSFORM(*) USING 'python transform.py' FROM ...' had obvious problems</p></li>\n<li><p>I split the file into multiple gzip files of 2 million rows each with bash commands: gzip -cd file.csv.gz | split -l 2000000 -d -a 5 --filter='gzip > split/$FILE.gz' and just loading one of those into hive to do the transform, but I'm running into memory issues still, though we've tried to increase memory limits (I'd have to check to see what parameters we've changed). </p>\n\n<p>A. Tried a transform script that uses pandas (because it makes it easy to group by event_name and then remove unneeded columns per event name) and limited pandas to reading in 100k rows at a time, but still needed to limit hive selection to not have memory issues (1000 rows worked fine, 50k rows did not).</p>\n\n<p>B. I also tried making a secondary temp table (stored as ORC), with the same columns as in the csv file, but partitioned by event_name and then just selecting the 2 million rows into that temp table, but also had memory issues.</p></li>\n</ol>\n\n<p>I've considered trying to start with splitting the data up by event_name. I can do this using awk, but I'm not sure that would be much better than just doing the 2 million row files.</p>\n\n<p>I'm hoping somebody has some suggestions for how to handle the file. I'm open to pretty much any combination of bash, python/pandas, hadoop/hive (I can consider others as well) to get the job done, so long as it can be made mostly automatic (I'll have several other files like this to process too).</p>\n\n<p>This is the hive transform query I'm using:</p>\n\n<pre><code>SET hive.exec.dynamic.partition.mode=nonstrict;\nSET hive.exec.max.dynamic.partitions.pernode=10000;\nSET mapreduce.map.memory.mb=8192;\nSET mapreduce.reduce.memory.mb=10240;\n\nADD FILE transform.py;\n\nINSERT OVERWRITE TABLE final_table\nPARTITION (date,hour,zone,archetype,event_name)\nSELECT TRANSFORM (*)\nUSING \"python transform.py\"\nAS device_id,timestamp,json_blob,date,hour,zone,archetype,event_name\nFROM (\nSELECT *\nFROM event_file_table eft\nJOIN meta_table m ON eft.device_id=m.device_id\nWHERE m.name = \"device\"\n) t\n;\n</code></pre>\n\n<p>And this is the python transform script:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import sys\nimport json\nimport pandas as pd\n\nINSEP='\\t'\nHEADER=None\n\nNULL='\\\\N'\nOUTSEP='\\t'\n\ncols = [# 160+ columns here]\nmetaCols =['device_id','meta_blob','zone','archetype','name']\n\ndf = pd.read_csv(sys.stdin, sep=INSEP, header=HEADER, \n                 names=cols+metaCols, na_values=NULL, chunksize=100000, \n                 parse_dates=['timestamp'])\n\nfor chunk in df:\n    chunk = chunk.drop(['name','meta_blob'], axis=1)\n    chunk['date'] = chunk['timestamp'].dt.date\n    chunk['hour'] = chunk['timestamp'].dt.hour\n    for name, grp in chunk.groupby('event_name'):\n        grp = grp.dropna(axis=1, how='all') \\\n              .set_index(['device_id','timestamp','date','hour',\n                          'zone','archetype','event_name']) \\\n\n        grp = pd.Series(grp.to_dict(orient='records'),grp.index) \\\n                .to_frame().reset_index() \\\n                .rename(columns={0:'json_blob'})\n        grp = grp[['device_id',timestamp','blob',\n                   'date','hour','zone','archetype','event_name']]\n\n        grp.to_csv(sys.stdout, sep=OUTSEP, index=False, header=False)\n</code></pre>\n\n<p>Depending on the yarn configurations, and what hits the limits first, I've received error messages:</p>\n\n<ol>\n<li><p>Error: Java heap space</p></li>\n<li><p>GC overhead limit exceeded</p></li>\n<li><p>over physical memory limit</p></li>\n</ol>\n\n<hr>\n\n<p>Update, in case anybody has similar issues.\nI did eventually manage to get this done. In our case, what seemed to work best was to use awk to split the file by date and hour. This allowed us to reduce memory overhead for partitions because we could load in a few hours at a time rather than potentially having hundreds of hourly partitions (multiplied by all the other partitions we wanted) to try to keep in memory and load at once. Running the file through awk took several hours, but could be done in parallel with loading another already split file into hive.</p>\n\n<p>Here's the bash/awk I used for splitting the file:</p>\n\n<pre><code>gzip -cd file.csv.gz |\ntail -n +2 |\nawk -F, -v MINDATE=\"$MINDATE\" -v MAXDATE=\"$MAXDATE\" \\\n    '{\n        if ( ($5&gt;=MINDATE) &amp;&amp; ($5&lt;MAXDATE) ) {\n            split($5, ts, \"[: ]\");\n            print | \"gzip &gt; file_\"ts[1]\"_\"ts[2]\".csv.gz\"\n            }\n    }'\n</code></pre>\n\n<p>where, obviously, the 5th column of the file was the timestamp, and MINDATE and MAXDATE were used to filter out dates we did not care about. This split the timestamp by spaces and colons so the first part of the timestamp was the date and the second the hour (third and fourth would be minutes and seconds) and used that to direct the line to the appropriate output file.</p>\n\n<p>Once the the file was split by hour, I loaded the hours several at a time into a temporary hive table and proceeded with basically the same transform mentioned above.</p>\n"}, {"tags": ["python", "algorithm", "list"], "answers": [{"tags": [], "owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "is_accepted": true, "score": 2, "last_activity_date": 1557963646, "creation_date": 1557963646, "answer_id": 56158973, "question_id": 56158945, "link": "https://stackoverflow.com/questions/56158945/how-to-find-dict-in-a-list-of-dict-based-on-a-value-in-a-list/56158973#56158973", "title": "How to find dict in a list of dict based on a value in a list?", "body": "<p>Loop over the list, then the dict items, then check the value and return the key if you find that value:</p>\n\n<pre><code>def somefunc(val):\n    l = [{ \"1\": [0,1,2,3]},{ \"2\": [4,5]},{ \"3\": [6,7,8,9,10,11]},{ \"4\": [12] }]\n\n    for dictionary in l:\n        for key, v_list in dictionary.items():\n            if val in v_list:\n                return key\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 156, "user_id": 5684634, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WpEc3etKNjU/AAAAAAAAAAI/AAAAAAAAAAA/VyPSXdC9p2o/photo.jpg?sz=128", "display_name": "Vasu Devan", "link": "https://stackoverflow.com/users/5684634/vasu-devan"}, "is_accepted": false, "score": 0, "last_activity_date": 1557965649, "creation_date": 1557965649, "answer_id": 56159184, "question_id": 56158945, "link": "https://stackoverflow.com/questions/56158945/how-to-find-dict-in-a-list-of-dict-based-on-a-value-in-a-list/56159184#56159184", "title": "How to find dict in a list of dict based on a value in a list?", "body": "<pre><code>[list(item.keys())[0] for item in ls if val in list(item.values())[0]]\n</code></pre>\n"}], "owner": {"reputation": 821, "user_id": 6567467, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Souames", "link": "https://stackoverflow.com/users/6567467/souames"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 56158973, "answer_count": 2, "score": 0, "last_activity_date": 1557965649, "creation_date": 1557963477, "question_id": 56158945, "link": "https://stackoverflow.com/questions/56158945/how-to-find-dict-in-a-list-of-dict-based-on-a-value-in-a-list", "title": "How to find dict in a list of dict based on a value in a list?", "body": "<p>I have a list of dicts where each dict contains a list, here's an example:</p>\n\n<pre><code>[{ \"1\": [0,1,2,3]},{ \"2\": [4,5]},{ \"3\": [6,7,8,9,10,11]},{ \"4\": [12] }]\n</code></pre>\n\n<p>I'm struggling to build a function that would take a value as input and return the correspending key : </p>\n\n<pre><code>print(somefunc(12)) # Should print 4\nprint(somefunc(5)) # should print 2\n</code></pre>\n\n<p>I'm sure that each value in each list is unique, so I don't have to care about the case where I would have the same value in different lists. </p>\n\n<p>What's the pythonic way to do this, I have tried to do some math logic by deviding the index over the sum and checks if it's smaller than 1, but with no success.</p>\n"}, {"tags": ["python", "arrays"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 2, "creation_date": 1557963345, "post_id": 56158914, "comment_id": 98946429, "body": "Can you demonstrate <i>any</i> effort at solving this yourself?"}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1557964154, "post_id": 56158914, "comment_id": 98946603, "body": "@ScottHunter It has been less than 15 minutes, and this question is already the top SO result on DuckDuckGo. These terms aren&#39;t googleable."}], "answers": [{"tags": [], "owner": {"reputation": 7430, "user_id": 3474956, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/RWbuy.jpg?s=128&g=1", "display_name": "kilojoules", "link": "https://stackoverflow.com/users/3474956/kilojoules"}, "is_accepted": false, "score": 0, "last_activity_date": 1557963482, "creation_date": 1557963482, "answer_id": 56158948, "question_id": 56158914, "link": "https://stackoverflow.com/questions/56158914/break-array-into-component-arrays/56158948#56158948", "title": "Break array into component arrays", "body": "<p>You can iterate through lists in a compact way using this syntax</p>\n\n<pre><code>&gt;&gt;&gt; x1, x2, x3 = 1, 2, 3, \n&gt;&gt;&gt; y1, y2, y3 = 3, 2, 1\n&gt;&gt;&gt; arr=[(x1,y1),(x2,y2),(x3,y3)]\n&gt;&gt;&gt; x, y = [s[0] for s in arr], [s[1] for s in arr]\n&gt;&gt;&gt; x\n[1, 2, 3]\n&gt;&gt;&gt; y\n[3, 2, 1]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "is_accepted": true, "score": 0, "last_activity_date": 1557963966, "creation_date": 1557963966, "answer_id": 56159013, "question_id": 56158914, "link": "https://stackoverflow.com/questions/56158914/break-array-into-component-arrays/56159013#56159013", "title": "Break array into component arrays", "body": "<p>Provided they aren't too large (in which case you should definitely be using <code>numpy</code>), you can use <code>zip</code> with <code>*</code>:</p>\n\n<pre><code>&gt;&gt;&gt; arr=[('x1','y1'),('x2','y2'),('x3','y3')]\n&gt;&gt;&gt; arr\n[('x1', 'y1'), ('x2', 'y2'), ('x3', 'y3')]\n&gt;&gt;&gt; x_arr, y_arr = zip(*arr)\n&gt;&gt;&gt; x_arr\n('x1', 'x2', 'x3')\n&gt;&gt;&gt; y_arr\n('y1', 'y2', 'y3')\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8196474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0ec99465e8837c559ff68024020473e?s=128&d=identicon&r=PG&f=1", "display_name": "The Big Cheese", "link": "https://stackoverflow.com/users/8196474/the-big-cheese"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 56159013, "answer_count": 2, "score": 0, "last_activity_date": 1557963966, "creation_date": 1557963198, "last_edit_date": 1557963730, "question_id": 56158914, "link": "https://stackoverflow.com/questions/56158914/break-array-into-component-arrays", "title": "Break array into component arrays", "body": "<p>This may be answered somewhere else, but I wasn't quite sure what to search.</p>\n\n<p>I have an array (of unfixed size) such as:</p>\n\n<pre><code>arr=[(x1,y1),(x2,y2),(x3,y3)]\n</code></pre>\n\n<p>I want to turn this into 2 arrays for the purpose of plotting:</p>\n\n<pre><code>x_arr=[x1,x2,x3]\ny_arr=[y1,y2,y3]\n</code></pre>\n\n<p>How can I go about doing this in python?</p>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1557963398, "post_id": 56158899, "comment_id": 98946445, "body": "The answer would depend, in part, on the language your are using, which you neglected to identify."}, {"owner": {"reputation": 1, "user_id": 11450771, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yyKiTJScJ1I/AAAAAAAAAAI/AAAAAAAAAB4/6E94Eqqg67Y/photo.jpg?sz=128", "display_name": "William Pring", "link": "https://stackoverflow.com/users/11450771/william-pring"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1557963665, "post_id": 56158899, "comment_id": 98946506, "body": "I&#39;m still pretty new to all of this, my apologies. Its Python and I have now added that to the Tags and question."}, {"owner": {"reputation": 4703, "user_id": 5375464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3292ca87ff6c766b75dbe4b2ea0831da?s=128&d=identicon&r=PG&f=1", "display_name": "J...S", "link": "https://stackoverflow.com/users/5375464/j-s"}, "edited": false, "score": 0, "creation_date": 1557965046, "post_id": 56158899, "comment_id": 98946765, "body": "Can you give some sample input and output? What would be the values of <code>line</code>?"}, {"owner": {"reputation": 1, "user_id": 11450771, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yyKiTJScJ1I/AAAAAAAAAAI/AAAAAAAAAB4/6E94Eqqg67Y/photo.jpg?sz=128", "display_name": "William Pring", "link": "https://stackoverflow.com/users/11450771/william-pring"}, "edited": false, "score": 0, "creation_date": 1557965450, "post_id": 56158899, "comment_id": 98946825, "body": "I have been given a text document with data such as &quot;Nmap scan report for 137.87.208.5&quot; or &quot;Nmap scan report for bt213-w-01-s18.lcccms.msft (137.87.208.170)&quot; there is other data but I&#39;m looking for these lines. I have collected the data I need and sent it to a text document as seen above. The next step is to get rid of everything but the IP(which is always the last item in the list(. So currently I&#39;m sending the entire line but only want to send the last item of the line, if that helps"}, {"owner": {"reputation": 6783, "user_id": 3064538, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b644a108ae9ae0ec2f7402dd235d155c?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/3064538/boris"}, "edited": false, "score": 0, "creation_date": 1557965610, "post_id": 56158899, "comment_id": 98946855, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/930397/getting-the-last-element-of-a-list-in-python\">Getting the last element of a list in Python</a>"}, {"owner": {"reputation": 6783, "user_id": 3064538, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b644a108ae9ae0ec2f7402dd235d155c?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/3064538/boris"}, "edited": false, "score": 0, "creation_date": 1557965690, "post_id": 56158899, "comment_id": 98946873, "body": "Also this question <a href=\"https://stackoverflow.com/questions/29459008/how-to-remove-brackets-from-python-string\" title=\"how to remove brackets from python string\">stackoverflow.com/questions/29459008/&hellip;</a> for removing brackets"}, {"owner": {"reputation": 6783, "user_id": 3064538, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b644a108ae9ae0ec2f7402dd235d155c?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/3064538/boris"}, "edited": false, "score": 0, "creation_date": 1557965814, "post_id": 56158899, "comment_id": 98946902, "body": "I guess you need to do this one first <a href=\"https://stackoverflow.com/questions/4309684/split-a-string-with-unknown-number-of-spaces-as-separator-in-python\" title=\"split a string with unknown number of spaces as separator in python\">stackoverflow.com/questions/4309684/&hellip;</a>"}, {"owner": {"reputation": 22993, "user_id": 1394393, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mSjIL.jpg?s=128&g=1", "display_name": "jpmc26", "link": "https://stackoverflow.com/users/1394393/jpmc26"}, "reply_to_user": {"reputation": 6783, "user_id": 3064538, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b644a108ae9ae0ec2f7402dd235d155c?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/3064538/boris"}, "edited": false, "score": 0, "creation_date": 1557974760, "post_id": 56158899, "comment_id": 98948311, "body": "@Boris I&#39;ve voted to close this as Too Broad, since it asks for a complete solution combining many different tasks (parsing some unspecified file format, accessing the final element from the parsed result, doing further processing on the parsed result, outputing a particular result to a file, etc.) rather than breaking them down into individual tasks and researching how to perform each one. Solutions to most of the subtasks would be simple to find elsewhere, as you&#39;ve demonstrated."}], "answers": [{"tags": [], "owner": {"reputation": 1385, "user_id": 2092392, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0f1a7073dcf8c42ff0332e5c90e66?s=128&d=identicon&r=PG", "display_name": "Sree", "link": "https://stackoverflow.com/users/2092392/sree"}, "is_accepted": false, "score": 2, "last_activity_date": 1557964407, "creation_date": 1557964407, "answer_id": 56159060, "question_id": 56158899, "link": "https://stackoverflow.com/questions/56158899/how-do-i-take-the-last-item-on-a-list-and-display-that-value/56159060#56159060", "title": "How do I take the last item on a list and display that value", "body": "<p>For displaying the last element of the list. </p>\n\n<pre><code>element = searchlines[-1]\nelement = searchlines[-1:] \n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11450771, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yyKiTJScJ1I/AAAAAAAAAAI/AAAAAAAAAB4/6E94Eqqg67Y/photo.jpg?sz=128", "display_name": "William Pring", "link": "https://stackoverflow.com/users/11450771/william-pring"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1557964407, "creation_date": 1557963042, "last_edit_date": 1557963576, "question_id": 56158899, "link": "https://stackoverflow.com/questions/56158899/how-do-i-take-the-last-item-on-a-list-and-display-that-value", "title": "How do I take the last item on a list and display that value", "body": "<p>I have a school project that requires me to take values from a text document and send them to a different text document(In sorts just simplifying the text document). I need to be able to find lines with certain information(already done) and then take just the last value in that list. This is all coded with Python.</p>\n\n<p>The value I'm taking is an IP address so it will always be an integer. However, some of the IP values have parenthesis around them and if possible I also need to remove just the parenthesis and keep the IP inside of them.</p>\n\n<pre><code>:for i, line in enumerate(searchlines):\n    if \"Nmap scan report for\" in line:\n        for l in searchlines[i:i+1]: IPlog.write(l)\n        print:\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "tkinter"], "answers": [{"tags": [], "owner": {"reputation": 768, "user_id": 11048426, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q9gwu.jpg?s=128&g=1", "display_name": "MatthewG", "link": "https://stackoverflow.com/users/11048426/matthewg"}, "is_accepted": false, "score": 0, "last_activity_date": 1557967269, "last_edit_date": 1557967269, "creation_date": 1557966521, "answer_id": 56159271, "question_id": 56158865, "link": "https://stackoverflow.com/questions/56158865/tkinter-basic-login-form-checking-from-csv-files/56159271#56159271", "title": "tkinter - Basic Login Form checking from csv files", "body": "<blockquote>\n  <p>The submit button doesn't do anything</p>\n</blockquote>\n\n<p>This can be fixed easily, the problem is that your function init creates the button it calls the command rather than storing it <code>command=checkUser()</code>, there are two ways to fix this.</p>\n\n<p>Change the command option of the button to <code>command=checkUser</code>, or <code>command=lambda: checkUser()</code></p>\n\n<blockquote>\n  <p>To fix the way your login form works I changed the checkUser() function, here is my update</p>\n</blockquote>\n\n<pre class=\"lang-py prettyprint-override\"><code>def checkUser():\n    uUserCheck = uUserLogin.get()\n    uUserCheckP = uUserPassword.get()\n    with open(\"Users.csv\", \"r\") as f:\n        csvreader = csv.reader(f, delimiter=\",\")\n        for row in csvreader:\n            if uUserCheck == row[0] and uUserCheckP == row[1]:\n                labelT = tk.Label(self, text=\"Hello\")\n                labelT.pack()\n                controller.show_frame(\"MainTMenu\")\n                break\n</code></pre>\n\n<p>This removes the use of nested if statements, and will terminate the for loop if a match of username and password is found, so then it doesn't have to check every username and password option every time.</p>\n\n<p>If you have any other questions feel free to ask :)</p>\n"}], "owner": {"reputation": 65, "user_id": 11214757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e1dd272a633b4454c8565e76aa73382?s=128&d=identicon&r=PG&f=1", "display_name": "DeathResister", "link": "https://stackoverflow.com/users/11214757/deathresister"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 381, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557967269, "creation_date": 1557962766, "question_id": 56158865, "link": "https://stackoverflow.com/questions/56158865/tkinter-basic-login-form-checking-from-csv-files", "title": "tkinter - Basic Login Form checking from csv files", "body": "<p>I am trying to make a tkinter login form, the program is supposed to allow existing users to type their username in a entry box and their password in an entry box, python then needs to read the values stored on a csv file and then check whether both the username and password are correct, they then use the submit button which will check if the credentials are right and if they are; it will allow them to go to the next frame. I'm not sure how to make it work properly because the submit button doesn't do anything.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>class MainMenu(tk.Frame):\n\ndef __init__(self, parent, controller):\n    tk.Frame.__init__(self, parent)\n    self.controller = controller\n    label = tk.Label(self, text=\"     Main Menu - Login    \", fg=\"red\", font=controller.title_font2)\n    label.pack(side=\"top\", fill=\"x\", pady=20)\n    usernameL = tk.Label(self, text=\"Username\").pack(side=\"top\") \n    uUserLogin = tk.Entry(self)\n    uUserLogin.pack()\n    passwordL = tk.Label(self, text=\"Password\").pack(side=\"top\")\n    uUserPassword = tk.Entry(self)\n    uUserPassword.pack()\n\n    def checkUser():\n        uLoginUser = False\n        uLoginPassword = False\n        uUserCheck = uUserLogin.get()\n        uUserCheckP = uUserPassword.get()\n        with open(\"Users.csv\", \"r\") as f:\n            csvreader = csv.reader(f, delimiter=\",\")\n            for row in csvreader:\n                if uUserCheck == row[0]:\n                    uLoginUser == True\n                    if uUserCheckP == row[1]:\n                        uLoginPassword == True\n                        #labelT = tk.Label(self, text=\"Hello\")\n                        #labelT.pack()\n        if uLoginUser and uLoginPassword == True:\n            controller.show_frame(\"MainTMenu\")\n\n    submit = tk.Button(self, text=\"Submit\",\n                       command=checkUser())\n    submit.pack()\n\n\n    #If correct -&gt; Go to next frame\n</code></pre>\n\n<p>The csv file is laid out with the first row being 2 headers - first column saying \"Users\" and the second column saying \"Passwords\" - the rest of the rows include the users and passwords in the correct columns and the right rows.</p>\n\n<p>This might help for understanding the format (in case i explained it badly):</p>\n\n<pre><code> Users, Passwords\n user, password\n user, password\n</code></pre>\n\n<p>Any help will be much appreciated</p>\n"}, {"tags": ["python", "machine-learning", "data-science", "inference"], "comments": [{"owner": {"reputation": 8205, "user_id": 1397946, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/G8wB1.png?s=128&g=1", "display_name": "Lukasz Tracewski", "link": "https://stackoverflow.com/users/1397946/lukasz-tracewski"}, "edited": false, "score": 0, "creation_date": 1557989156, "post_id": 56158854, "comment_id": 98952247, "body": "Am I correct to infer that you&#39;re using Python?"}, {"owner": {"reputation": 21, "user_id": 6335648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c0f04b852baf439523c3b87c2acf9c4?s=128&d=identicon&r=PG&f=1", "display_name": "larui529", "link": "https://stackoverflow.com/users/6335648/larui529"}, "reply_to_user": {"reputation": 8205, "user_id": 1397946, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/G8wB1.png?s=128&g=1", "display_name": "Lukasz Tracewski", "link": "https://stackoverflow.com/users/1397946/lukasz-tracewski"}, "edited": false, "score": 0, "creation_date": 1558022348, "post_id": 56158854, "comment_id": 98971472, "body": "Yes. I am using python"}, {"owner": {"reputation": 8205, "user_id": 1397946, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/G8wB1.png?s=128&g=1", "display_name": "Lukasz Tracewski", "link": "https://stackoverflow.com/users/1397946/lukasz-tracewski"}, "edited": false, "score": 0, "creation_date": 1558023408, "post_id": 56158854, "comment_id": 98972016, "body": "Then I hope my post answers your problem. Please check it and mark as solved if that&#39;s the case or let us know what&#39;s missing / doesn&#39;t work."}], "answers": [{"tags": [], "owner": {"reputation": 8205, "user_id": 1397946, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/G8wB1.png?s=128&g=1", "display_name": "Lukasz Tracewski", "link": "https://stackoverflow.com/users/1397946/lukasz-tracewski"}, "is_accepted": false, "score": 1, "last_activity_date": 1557989107, "creation_date": 1557989107, "answer_id": 56162349, "question_id": 56158854, "link": "https://stackoverflow.com/questions/56158854/is-there-method-to-save-dict-of-labelencoder-for-inference/56162349#56162349", "title": "Is there method to save dict of Labelencoder for inference", "body": "<p>Typically you'd serialise your LabelEncoder e.g. <a href=\"https://stackoverflow.com/questions/28656736/using-scikits-labelencoder-correctly-across-multiple-programs\">like this</a>. You could also use <code>pickle</code> or <code>joblib</code> modules (I'd advise the latter). Code:</p>\n\n<pre><code>import joblib\n\njoblib.dump(label_encoder, 'label_encoder.joblib')\nlabel_encoder = joblib.load('label_encoder.joblib')\n</code></pre>\n\n<p>Since you're asking about dict, I presume you might refer to packing LabelEncoder into a dictionary, something I often do with dataframes. Take this example:</p>\n\n<pre><code>import pandas\nfrom collections import defaultdict\nfrom sklearn import preprocessing \n\ndf = pandas.DataFrame({\n    'pets': ['cat', 'dog', 'cat', 'monkey', 'dog', 'dog'], \n    'owner': ['Champ', 'Ron', 'Brick', 'Champ', 'Veronica', 'Ron'], \n    'location': ['San_Diego', 'New_York', 'New_York', 'San_Diego', 'San_Diego', \n                 'New_York']\n})\n\nd = defaultdict(preprocessing.LabelEncoder)\nfit = df.apply(lambda x: d[x.name].fit_transform(x))\n</code></pre>\n\n<p><code>fit</code> now holds encoded data. We can now reverse the encoding with:</p>\n\n<pre><code>fit.apply(lambda x: d[x.name].inverse_transform(x))\n</code></pre>\n\n<p>To serialise dictionary of <code>LabelEncoder</code> you'd follow the same route as with single one:</p>\n\n<pre><code>joblib.dump(d, 'label_encoder_dict.joblib')\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6335648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c0f04b852baf439523c3b87c2acf9c4?s=128&d=identicon&r=PG&f=1", "display_name": "larui529", "link": "https://stackoverflow.com/users/6335648/larui529"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1189, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1558023251, "creation_date": 1557962687, "last_edit_date": 1558023251, "question_id": 56158854, "link": "https://stackoverflow.com/questions/56158854/is-there-method-to-save-dict-of-labelencoder-for-inference", "title": "Is there method to save dict of Labelencoder for inference", "body": "<p>I am trying to build up an inference pipeline. It consists of two parts. Monthly ML model training using some tabular order metadata in previous years and daily inference prediction using new orders taken on that day. There are several string categorical columns I want to include in my model which I used labelencoder to convert them into integers. I am wondering how can I make sure I convert daily inference dataset into the same categories during data preprocessing. Should I save the dictionary of labelencoder and mapping to my inference dataset? Thanks.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 2, "creation_date": 1557963556, "post_id": 56158822, "comment_id": 98946484, "body": "I cannot reproduce that error. maybe try add a dot <code>.</code> before the module name to indicate it is a relative directory import <code>from .icinga import Icinga</code>"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 2800773, "user_type": "registered", "profile_image": "https://graph.facebook.com/1612344578/picture?type=large", "display_name": "user2800773", "link": "https://stackoverflow.com/users/2800773/user2800773"}, "edited": false, "score": 0, "creation_date": 1558048603, "post_id": 56159112, "comment_id": 98981686, "body": "The first import works, thanks!  May I just ask you how I should call the second import from the main?"}, {"owner": {"reputation": 311, "user_id": 2473475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f34c910cc0777383b087661047763925?s=128&d=identicon&r=PG", "display_name": "Julio P.C.", "link": "https://stackoverflow.com/users/2473475/julio-p-c"}, "reply_to_user": {"reputation": 37, "user_id": 2800773, "user_type": "registered", "profile_image": "https://graph.facebook.com/1612344578/picture?type=large", "display_name": "user2800773", "link": "https://stackoverflow.com/users/2800773/user2800773"}, "edited": false, "score": 1, "creation_date": 1558119843, "post_id": 56159112, "comment_id": 99009081, "body": "You don&#39;t call the second import from the main. The second one needs to be in the <code>__init__.py</code> file, if you just want to import it."}], "tags": [], "owner": {"reputation": 311, "user_id": 2473475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f34c910cc0777383b087661047763925?s=128&d=identicon&r=PG", "display_name": "Julio P.C.", "link": "https://stackoverflow.com/users/2473475/julio-p-c"}, "is_accepted": true, "score": 0, "last_activity_date": 1558123524, "last_edit_date": 1558123524, "creation_date": 1557964924, "answer_id": 56159112, "question_id": 56158822, "link": "https://stackoverflow.com/questions/56158822/developing-a-new-package-and-getting-modulenotfounderror-no-module-named/56159112#56159112", "title": "developing a new package and getting ModuleNotFoundError: No module named", "body": "<p>If you just want to import the Icinga class, you can do it as </p>\n\n<pre><code>from receivers.icinga import Icinga\n</code></pre>\n\n<p>If you want to call the import statement on receivers, you should alter the <strong>init</strong>.py, on 2nd line, to:</p>\n\n<pre><code>from .icinga import Icinga\n</code></pre>\n\n<p>I reproduced your problem here, and was able to solve it like that.</p>\n\n<p>Edit:</p>\n\n<p>Doing this second thing (on __init__.py), you would be able to call it on the main.py as:</p>\n\n<pre><code>import receivers\nreceivers.icinga.Icinga()\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 2800773, "user_type": "registered", "profile_image": "https://graph.facebook.com/1612344578/picture?type=large", "display_name": "user2800773", "link": "https://stackoverflow.com/users/2800773/user2800773"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "accepted_answer_id": 56159112, "answer_count": 1, "score": 0, "last_activity_date": 1558123524, "creation_date": 1557962408, "question_id": 56158822, "link": "https://stackoverflow.com/questions/56158822/developing-a-new-package-and-getting-modulenotfounderror-no-module-named", "title": "developing a new package and getting ModuleNotFoundError: No module named", "body": "<p>I was writing a little application where I wanted to create a module containg a small group of classes, but when I try to import the classes from the main application, I get the error:</p>\n\n<pre><code> my_project python3 main.py \n1\nTraceback (most recent call last):\n  File \"main.py\", line 2, in &lt;module&gt;\n    import receivers\n  File \"/home/mario/Documents/python/my_project/receivers/__init__.py\", line 2, in &lt;module&gt;\n    from icinga import Icinga\nModuleNotFoundError: No module named 'icinga'\n</code></pre>\n\n<p>The file in the project are:</p>\n\n<pre><code>\u251c\u2500\u2500 main.py\n\u2514\u2500\u2500 receivers\n    \u251c\u2500\u2500 icinga.py\n    \u251c\u2500\u2500 __init__.py\n</code></pre>\n\n<p>where <code>main.py</code></p>\n\n<pre><code>#!/usr/bin/env python\nimport receivers\n\nicinga = receivers.icinga.Icinga()\n</code></pre>\n\n<p>the file <code>receivers/icinga.py</code></p>\n\n<pre><code>class Icinga:\n\n    def __init__(self):\n        print(\"I'm Icinga!\")\n</code></pre>\n\n<p>the file <code>receivers/__init__.py</code></p>\n\n<pre><code>print('1')\nfrom icinga import Icinga\nprint('2')\n</code></pre>\n\n<p>Can someone please tell me what I do wrong? </p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["python", "selenium"], "answers": [{"comments": [{"owner": {"reputation": 719, "user_id": 9075184, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7254859d1d2d90d6be1ddfdb01e6a6c4?s=128&d=identicon&r=PG&f=1", "display_name": "itsolidude", "link": "https://stackoverflow.com/users/9075184/itsolidude"}, "edited": false, "score": 0, "creation_date": 1557964166, "post_id": 56158980, "comment_id": 98946606, "body": "Doing this posts errors &#39;unresolved reference &#39;&#39;wait&quot; &#39;"}, {"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "reply_to_user": {"reputation": 719, "user_id": 9075184, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7254859d1d2d90d6be1ddfdb01e6a6c4?s=128&d=identicon&r=PG&f=1", "display_name": "itsolidude", "link": "https://stackoverflow.com/users/9075184/itsolidude"}, "edited": false, "score": 0, "creation_date": 1557964354, "post_id": 56158980, "comment_id": 98946638, "body": "My bad forget to add imports part to the post."}, {"owner": {"reputation": 719, "user_id": 9075184, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7254859d1d2d90d6be1ddfdb01e6a6c4?s=128&d=identicon&r=PG&f=1", "display_name": "itsolidude", "link": "https://stackoverflow.com/users/9075184/itsolidude"}, "edited": false, "score": 0, "creation_date": 1557964565, "post_id": 56158980, "comment_id": 98946677, "body": "Ye i assumed there were imports missing :P , but the &quot;wait&quot; one is sill throwing, would u mind posting the whole script reeal quick? i dont know what im doing wrong , might be that late time :P"}, {"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "reply_to_user": {"reputation": 719, "user_id": 9075184, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7254859d1d2d90d6be1ddfdb01e6a6c4?s=128&d=identicon&r=PG&f=1", "display_name": "itsolidude", "link": "https://stackoverflow.com/users/9075184/itsolidude"}, "edited": false, "score": 0, "creation_date": 1557965564, "post_id": 56158980, "comment_id": 98946847, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/193433/discussion-between-supputuri-and-itsolidude\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "is_accepted": true, "score": 1, "last_activity_date": 1557964616, "last_edit_date": 1557964616, "creation_date": 1557963699, "answer_id": 56158980, "question_id": 56158789, "link": "https://stackoverflow.com/questions/56158789/selenium-selectors-and-input-not-working-suggestions/56158980#56158980", "title": "Selenium Selectors and Input not working. Suggestions?", "body": "<p>Try this below code, where I added the synchronization and tested on Firefox using \npython.</p>\n\n<p>You have to add the below import</p>\n\n<pre><code>from selenium.webdriver.common.by import By\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom selenium.webdriver.support.ui import WebDriverWait\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>url = \"https://discordapp.com/login\"\ndriver.get(url)\nemail = WebDriverWait(driver,10).until(EC.presence_of_element_located((By.XPATH,\"//input[@type='email']\")))\nemail.send_keys(\"test@test.com\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 396, "user_id": 10937481, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OV667i3vdbw/AAAAAAAAAAI/AAAAAAAAARU/1Lm-gty7md8/photo.jpg?sz=128", "display_name": "Khan Saad", "link": "https://stackoverflow.com/users/10937481/khan-saad"}, "is_accepted": false, "score": 0, "last_activity_date": 1608735150, "creation_date": 1608735150, "answer_id": 65426271, "question_id": 56158789, "link": "https://stackoverflow.com/questions/56158789/selenium-selectors-and-input-not-working-suggestions/65426271#65426271", "title": "Selenium Selectors and Input not working. Suggestions?", "body": "<h3>If you wanna log in on discord server using selenium(python)then you can use my code</h3>\n<p><strong>Just add your credentials in the code :)</strong></p>\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.keys import Keys\nfrom selenium.webdriver.support.ui import Select\n\ndriver = webdriver.Chrome()\n\ndriver.get(&quot;https://discord.com/login&quot;)\ntime.sleep(6)\n\nusername_input = driver.find_element_by_name('email')\nusername_input.send_keys(&quot;enter-your-username-here&quot;)\n\n\npassword_input = driver.find_element_by_name('password')\npassword_input.send_keys(&quot;Enter-your-password-here&quot;)\n\n\nlogin_button = driver.find_element_by_xpath('//*[@id=&quot;app-mount&quot;]/div[2]/div/div[2]/div/div/form/div/div/div[1]/div[3]/button[2]')\nlogin_button.click()\n</code></pre>\n"}], "owner": {"reputation": 719, "user_id": 9075184, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7254859d1d2d90d6be1ddfdb01e6a6c4?s=128&d=identicon&r=PG&f=1", "display_name": "itsolidude", "link": "https://stackoverflow.com/users/9075184/itsolidude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 56158980, "answer_count": 2, "score": 1, "last_activity_date": 1608735150, "creation_date": 1557962108, "last_edit_date": 1557987683, "question_id": 56158789, "link": "https://stackoverflow.com/questions/56158789/selenium-selectors-and-input-not-working-suggestions", "title": "Selenium Selectors and Input not working. Suggestions?", "body": "<p>Im using Selenium (Python) and am trying to log myself into the discord Website (<a href=\"https://discordapp.com/login\" rel=\"nofollow noreferrer\">https://discordapp.com/login</a>) but all my code does is load the page and thats it. I tried all, Css selectors, XPath EVERYTHING. Does anyone have suggestions?</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>from selenium import webdriver\r\nfrom selenium.webdriver.common.keys import Keys\r\n\r\nbrowser = webdriver.Firefox()\r\n\r\nbrowser.get('https://discordapp.com/login')\r\nassert 'discordapp' in browser.title\r\n\r\nelem = browser.find_element_by_css_selector(\"input[type='email']\")\r\nelem.send_keys(\"itsolidude@gmail.com\")\r\n\r\nelem1 = browser.find_element_by_css_selector(\"input[type='password']\")\r\nelem1.send_keys(\"password\" + Keys.ENTER)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["python", "python-3.x", "import", "multiprocessing", "spyder"], "owner": {"reputation": 13, "user_id": 7559709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d72ad2e401520a00ff3a779724dcf54?s=128&d=identicon&r=PG&f=1", "display_name": "hans_maulwurf", "link": "https://stackoverflow.com/users/7559709/hans-maulwurf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 491, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1558000178, "creation_date": 1557961595, "last_edit_date": 1558000178, "question_id": 56158737, "link": "https://stackoverflow.com/questions/56158737/python-multiprocessing-suddenly-getting-stuck-although-code-is-correct", "title": "Python - Multiprocessing suddenly getting stuck, although code is correct", "body": "<p>I\u00b4ve spent the last few hours on the multiprocessing tool in python. Last thing I did was to set up a Pool with a few workers to execute a function. Everything was doing fine and multiprocessing was working.</p>\n\n<p>After I switched to another file to implement my multiprocessing insights in my actual project, the code was running, but the <code>.get()</code> invocation following the <code>apply_async(func, args)</code> never returned anything. </p>\n\n<p>I thought it was due to a false implementation, but turned out to be something else. I went back to the first file where I did my experiments and tried to run this one again. Suddenly also here multiprocessing didn\u00b4t work anymore. Apart from trying to implement the multiprocessing in my project I didn\u00b4t really do anything else on the code or the environment. The only thing maybe correlated to the problem is that I tried to execute an older version of the <code>__main__</code> program in the same environment, leading to an error because the <code>__main__</code> file took to newer project files to execute.</p>\n\n<p>Here\u00b4s the code I used for the simple experiment:</p>\n\n<pre><code>import torch.multiprocessing as mp\n\nimport torch\nimport time\n\n*#thats code from my project*\nimport data.preprocessor as preprocessor\nimport eco_neat_t1_cfg as cfg\n\n\ndef f(x):\n   return x*x    \n\nif __name__ == \"__main__\":   \n   p = mp.Pool(1)\n   j = p.apply_async(f, (5,))\n   r = j.get(timeout=10)\n   print(r)\n</code></pre>\n\n<p>So nothing to complicated here, it should actually work. \nHowever, there is no result being returned. I notice the CPU is working according to the number of processes invoked, so I assume it is caught in some kind of loop.</p>\n\n<p>I am running on Win10, with Python running over Anaconda Spyder with the IPython Console.</p>\n\n<p>When I close Spyder and all Python processes, restart and execute it again it works, but only if I am not importing my own code. Once I import the <code>eco_neat_t1_cfg as cfg</code>, which is basically only a dataclass with a few other imports, the program wont return anything and gets stuck in the execution. </p>\n\n<p>I am getting a <code>Reloaded modules: data, data.preprocessor, data.generator</code> error. This is probably because <code>cfg</code> also imports data.preprocessor. The weird thing is, if I now delete <strong>all</strong> imports from the source code, save the file and run it, it will work again, although the imports are not even specified in the code anymore... however, every time I restart Python and Spyder I need to specify the modules again ofc.</p>\n\n<p>Also, the simple code is working after deletion of all imports, but the more complicated I actually want to execute is not, although it was perfectly fine before all this happened. Now I am getting a <code>PicklingError: Can't pickle &lt;class 'neat.genotype.genome.Pickleable_Genome'&gt;: it's not the same object as neat.genotype.genome.Pickleable_Genome</code> error. As I said, there were no problems with the pickling before. That\u00b4s the \"more complicated\" piece of code I pass to <code>apply_async</code>. </p>\n\n<pre><code>def create_net(genome):\n\n   net = feedforward.Net(\"cpu\", genome, 1.0)\n\n   inp = torch.ones(2, 5)\n   input = torch.FloatTensor(inp).view(1, -1).squeeze()\n\n   res = net(input)\n   return res\n</code></pre>\n\n<p>What I did was to delete all <strong>pycache</strong> in my project, also reset Spyder settings and update Anaconda and Spyder. Also I tried to look at every piece of code of the <code>cfg</code> file, but even if I delete every line, also no imports, the program will not work. Nothing helps, I really don\u00b4t have any idea of what\u00b4s the problem and how to solve it. Maybe one of you has an idea.</p>\n\n<p>One more thing to say, if I manually interrupt (CTRL + C) the execution, in the stacktrace I noticed the processes to be waiting.</p>\n\n<pre><code> File \"C:/Users/klein/Desktop/bak/test/eco_neat_t1/blabla.py\", line 72, in &lt;module&gt;\nr = j.get(timeout=10)\n\n File \"C:\\Users\\klein\\Anaconda3\\envs\\eco_neat\\lib\\multiprocessi\\pool.py\", line 651, in get\nself.wait(timeout)\n\n File \"C:\\Users\\klein\\Anaconda3\\envs\\eco_neat\\lib\\multiprocessing\\pool.py\", line 648, in wait\nself._event.wait(timeout)\n\n File \"C:\\Users\\klein\\Anaconda3\\envs\\eco_neat\\lib\\threading.py\", line 552, in wait\nsignaled = self._cond.wait(timeout)\n</code></pre>\n\n<p>Cheers</p>\n\n<p><strong>SOLUTION</strong>: The bug was my directory structure that somehow led python to fail. I had both of my <code>__main__</code> test files running in the <code>root/tests/eco_neat_t1</code> directory. I two new files <code>t1_cfg</code> and <code>t1</code> with the same content in the root directory. Suddenly everthing works fine...weird world</p>\n"}, {"tags": ["python", "windows", "pip", "pyaudio"], "comments": [{"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1557964453, "post_id": 56158713, "comment_id": 98946657, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/55936179/trying-to-install-pyaudio-using-pip\">Trying to install pyaudio using pip</a>"}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1557964459, "post_id": 56158713, "comment_id": 98946658, "body": "<a href=\"https://stackoverflow.com/search?q=%5Bpyaudio%5D+%5Bpip%5D+%5Bwindows%5D+install\">stackoverflow.com/&hellip;</a>"}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1557964493, "post_id": 56158713, "comment_id": 98946666, "body": "<a href=\"https://stackoverflow.com/search?q=%5Bpyaudio%5D+%5Bpip%5D+install\">stackoverflow.com/search?q=%5Bpyaudio%5D+%5Bpip%5D+install</a>"}], "answers": [{"tags": [], "owner": {"reputation": 16007, "user_id": 8291949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a7pBo.gif?s=128&g=1", "display_name": "wp78de", "link": "https://stackoverflow.com/users/8291949/wp78de"}, "is_accepted": false, "score": 0, "last_activity_date": 1557961847, "creation_date": 1557961847, "answer_id": 56158761, "question_id": 56158713, "link": "https://stackoverflow.com/questions/56158713/unable-to-install-pyaudio-in-visual-studio-code/56158761#56158761", "title": "Unable to install PyAudio in Visual Studio code", "body": "<p>The error message has the answer.</p>\n\n<p>You need to install the Visual C++ build tools. The link in the error message, however, seems useless. You can download it here: <a href=\"https://visualstudio.microsoft.com/visual-cpp-build-tools/\" rel=\"nofollow noreferrer\">https://visualstudio.microsoft.com/visual-cpp-build-tools/</a></p>\n\n<p>Things should work with newer versions of Visual C++ as well.</p>\n"}], "owner": {"reputation": 11, "user_id": 11506770, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pd-SGlVz-gE/AAAAAAAAAAI/AAAAAAAAALI/VPNEF90EIAs/photo.jpg?sz=128", "display_name": "Tabish Raza", "link": "https://stackoverflow.com/users/11506770/tabish-raza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 6219, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1603494951, "creation_date": 1557961435, "last_edit_date": 1557964327, "question_id": 56158713, "link": "https://stackoverflow.com/questions/56158713/unable-to-install-pyaudio-in-visual-studio-code", "title": "Unable to install PyAudio in Visual Studio code", "body": "<p>I tried installing PyAudio in Visual Studio code using</p>\n\n<p><code>pip install PyAudio</code></p>\n\n<p>(this error comes )</p>\n\n<pre><code>Collecting PyAudio\n  Downloading https://files.pythonhosted.org/packages/ab/42/b4f04721c5c5bfc196ce156b3c768998ef8c0ae3654ed29ea5020c749a6b/PyAudio-0.2.11.tar.gz\nInstalling collected packages: PyAudio\n  Running setup.py install for PyAudio ... error\n    ERROR: Complete output from command 'c:\\users\\payload player\\appdata\\local\\programs\\python\\python37-32\\python.exe' -u -c 'import setuptools, tokenize;__file__='\"'\"'C:\\\\Users\\\\PAYLOA~1\\\\AppData\\\\Local\\\\Temp\\\\pip-install-vytdlgz3\\\\PyAudio\\\\setup.py'\"'\"';f=getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__);code=f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' install --record 'C:\\Users\\PAYLOA~1\\AppData\\Local\\Temp\\pip-record-0pn7or0v\\install-record.txt' --single-version-externally-managed --compile:\n    ERROR: running install\n    running build\n    running build_py\n    creating build\n    creating build\\lib.win32-3.7\n    copying src\\pyaudio.py -&gt; build\\lib.win32-3.7\n    running build_ext\n    building '_portaudio' extension\n    error: Microsoft Visual C++ 14.0 is required. Get it with \"Microsoft Visual C++ Build Tools\": https://visualstudio.microsoft.com/downloads/\n    ----------------------------------------\nERROR: Command \"'c:\\users\\payload player\\appdata\\local\\programs\\python\\python37-32\\python.exe' -u -c 'import setuptools, tokenize;__file__='\"'\"'C:\\\\Users\\\\PAYLOA~1\\\\AppData\\\\Local\\\\Temp\\\\pip-install-vytdlgz3\\\\PyAudio\\\\setup.py'\"'\"';f=getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__);code=f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__,\n'\"'\"'exec'\"'\"'))' install --record 'C:\\Users\\PAYLOA~1\\AppData\\Local\\Temp\\pip-record-0pn7or0v\\install-record.txt' --single-version-externally-managed --compile\" failed with error code 1 in C:\\Users\\PAYLOA~1\\AppData\\Local\\Temp\\pip-install-vytdlgz3\\PyAudio\\\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 2424, "user_id": 10286422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8eee83d47bbcbfaf55bb18f7077890?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Pap", "link": "https://stackoverflow.com/users/10286422/ben-pap"}, "edited": false, "score": 0, "creation_date": 1557962498, "post_id": 56158706, "comment_id": 98946276, "body": "So you only care about the time and the ip, the other info doesn&#39;t matter? Do you need a count of that IP in the same timespan?"}, {"owner": {"reputation": 182, "user_id": 1463994, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/217cf38100eaa7096629c1079bcd96d5?s=128&d=identicon&r=PG", "display_name": "Lucca Zenobio", "link": "https://stackoverflow.com/users/1463994/lucca-zenobio"}, "reply_to_user": {"reputation": 2424, "user_id": 10286422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8eee83d47bbcbfaf55bb18f7077890?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Pap", "link": "https://stackoverflow.com/users/10286422/ben-pap"}, "edited": false, "score": 0, "creation_date": 1557962650, "post_id": 56158706, "comment_id": 98946303, "body": "i wanna group them according to the ip and the time interval between each request. (10 min). the method, url and content i want to concat then on the same row. Ex: POST url content GET url2 conten2 ..."}, {"owner": {"reputation": 2424, "user_id": 10286422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8eee83d47bbcbfaf55bb18f7077890?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Pap", "link": "https://stackoverflow.com/users/10286422/ben-pap"}, "edited": false, "score": 0, "creation_date": 1557962706, "post_id": 56158706, "comment_id": 98946312, "body": "would the same IP have different method url and content in same timespan?"}, {"owner": {"reputation": 182, "user_id": 1463994, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/217cf38100eaa7096629c1079bcd96d5?s=128&d=identicon&r=PG", "display_name": "Lucca Zenobio", "link": "https://stackoverflow.com/users/1463994/lucca-zenobio"}, "reply_to_user": {"reputation": 2424, "user_id": 10286422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8eee83d47bbcbfaf55bb18f7077890?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Pap", "link": "https://stackoverflow.com/users/10286422/ben-pap"}, "edited": false, "score": 0, "creation_date": 1557962761, "post_id": 56158706, "comment_id": 98946320, "body": "yes. the method and content can be different in each request."}, {"owner": {"reputation": 2424, "user_id": 10286422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8eee83d47bbcbfaf55bb18f7077890?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Pap", "link": "https://stackoverflow.com/users/10286422/ben-pap"}, "edited": false, "score": 0, "creation_date": 1557962861, "post_id": 56158706, "comment_id": 98946339, "body": "So if that&#39;s the case, you would still only want 1 row for that IP?"}, {"owner": {"reputation": 182, "user_id": 1463994, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/217cf38100eaa7096629c1079bcd96d5?s=128&d=identicon&r=PG", "display_name": "Lucca Zenobio", "link": "https://stackoverflow.com/users/1463994/lucca-zenobio"}, "reply_to_user": {"reputation": 2424, "user_id": 10286422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8eee83d47bbcbfaf55bb18f7077890?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Pap", "link": "https://stackoverflow.com/users/10286422/ben-pap"}, "edited": false, "score": 0, "creation_date": 1557962919, "post_id": 56158706, "comment_id": 98946353, "body": "yes. one row, with all metthods, urls and contents concatenated"}], "answers": [{"comments": [{"owner": {"reputation": 182, "user_id": 1463994, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/217cf38100eaa7096629c1079bcd96d5?s=128&d=identicon&r=PG", "display_name": "Lucca Zenobio", "link": "https://stackoverflow.com/users/1463994/lucca-zenobio"}, "edited": false, "score": 0, "creation_date": 1557965837, "post_id": 56159093, "comment_id": 98946905, "body": "seems to work great. i just dont know how to concatenate the other fields, as it creates a new dataframe with the ip and the time interval. any ideas?"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1557966571, "post_id": 56159093, "comment_id": 98947018, "body": "glad to see you are using unnest :-)"}, {"owner": {"reputation": 2424, "user_id": 10286422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8eee83d47bbcbfaf55bb18f7077890?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Pap", "link": "https://stackoverflow.com/users/10286422/ben-pap"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1557984432, "post_id": 56159093, "comment_id": 98950450, "body": "@WeNYoBen yup! I read through that thread pretty thoroughly to understand all the pro&#39;s/con&#39;s of different methods, and your method is pretty handy :D"}, {"owner": {"reputation": 2424, "user_id": 10286422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8eee83d47bbcbfaf55bb18f7077890?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Pap", "link": "https://stackoverflow.com/users/10286422/ben-pap"}, "reply_to_user": {"reputation": 182, "user_id": 1463994, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/217cf38100eaa7096629c1079bcd96d5?s=128&d=identicon&r=PG", "display_name": "Lucca Zenobio", "link": "https://stackoverflow.com/users/1463994/lucca-zenobio"}, "edited": false, "score": 0, "creation_date": 1557984619, "post_id": 56159093, "comment_id": 98950497, "body": "@LuccaZenobio Soo this is why I was asking you questions before hand, if an IP address appears twice in 10 min with different other columns, you can&#39;t concat it so it remains a single row. Unless you want your DF to be really wide with columns repeating?"}, {"owner": {"reputation": 182, "user_id": 1463994, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/217cf38100eaa7096629c1079bcd96d5?s=128&d=identicon&r=PG", "display_name": "Lucca Zenobio", "link": "https://stackoverflow.com/users/1463994/lucca-zenobio"}, "edited": false, "score": 0, "creation_date": 1558013366, "post_id": 56159093, "comment_id": 98966102, "body": "i want to join all the other columns content in one. just like it is with your tip but with one more column with all the values concatenated. if i could get at least the indexes i can do that"}], "tags": [], "owner": {"reputation": 2424, "user_id": 10286422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8eee83d47bbcbfaf55bb18f7077890?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Pap", "link": "https://stackoverflow.com/users/10286422/ben-pap"}, "is_accepted": false, "score": 1, "last_activity_date": 1558026183, "last_edit_date": 1558026183, "creation_date": 1557964734, "answer_id": 56159093, "question_id": 56158706, "link": "https://stackoverflow.com/questions/56158706/how-to-group-http-requests-log-using-pandas/56159093#56159093", "title": "How to group HTTP requests log using pandas", "body": "<pre><code>df.set_index('date', inplace = True)\n\nunnesting(df.resample('10T')['ip'].unique().reset_index(), ['ip']).reset_index(drop = True)\n</code></pre>\n\n<p>First you need to set your date to your index. Next you need to resample the time in 10 min increments, look at your IP column and get the unique ones for each time span. Next you need to unnest the lists created by <code>unique()</code> by using the below function.</p>\n\n<pre><code>##https://stackoverflow.com/questions/53218931/how-to-unnest-explode-a-column-in-a-pandas-dataframe/55839330#55839330\n\ndef unnesting(df, explode):\n    idx = df.index.repeat(df[explode[0]].str.len())\n    df1 = pd.concat([\n        pd.DataFrame({x: np.concatenate(df[x].values)}) for x in explode], axis=1)\n    df1.index = idx\n\n    return df1.join(df.drop(explode, 1), how='left')\n</code></pre>\n\n<p>After this you can concatenate whatever you were planning.</p>\n\n<p><strong>EDIT</strong>:</p>\n\n<pre><code># Set index to the date column\ndf.set_index('date', inplace = True)\n\n# 10 minutes in nanoseconds \nns10min=10*60*1000000000\n\n#Calculate the new 10 min.   \ndf.index = pd.to_datetime(((df.index.astype(np.int64) // ns10min) * ns10min))\n\n#Groupby both index and ip, then look at the first.\ndf.groupby([df.index, df['ip']]).first()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 182, "user_id": 1463994, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/217cf38100eaa7096629c1079bcd96d5?s=128&d=identicon&r=PG", "display_name": "Lucca Zenobio", "link": "https://stackoverflow.com/users/1463994/lucca-zenobio"}, "is_accepted": true, "score": 0, "last_activity_date": 1558028176, "last_edit_date": 1558028176, "creation_date": 1558027772, "answer_id": 56173787, "question_id": 56158706, "link": "https://stackoverflow.com/questions/56158706/how-to-group-http-requests-log-using-pandas/56173787#56173787", "title": "How to group HTTP requests log using pandas", "body": "<p>I used Ben Pap's method to group the ips based on the date.\nAfter that i got an dataframe containing the IPs and the time intervals.\nTo join the other columns and add to this dataframe i did this:</p>\n\n<pre><code>content= []\nrow_iterator = test.iterrows()\nfor index, row in row_iterator:\n    texto = \"\"\n    resul = df2.loc[(df2[df2.columns[1]] == row[2]) &amp; ((row[0] &lt; df2.index) &amp; (df2.index &lt;  row[0] + pd.Timedelta(minutes=10) ) )]\n    for i, (_, current_row) in enumerate(resul.iterrows()):\n        texto += \" \" + current_row.values[2] + \" \" + current_row.values[3] + \" \" + current_row.values[4] \n     content.append(texto)\n</code></pre>\n"}], "owner": {"reputation": 182, "user_id": 1463994, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/217cf38100eaa7096629c1079bcd96d5?s=128&d=identicon&r=PG", "display_name": "Lucca Zenobio", "link": "https://stackoverflow.com/users/1463994/lucca-zenobio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 56173787, "answer_count": 2, "score": 0, "last_activity_date": 1558035935, "creation_date": 1557961370, "last_edit_date": 1558035935, "question_id": 56158706, "link": "https://stackoverflow.com/questions/56158706/how-to-group-http-requests-log-using-pandas", "title": "How to group HTTP requests log using pandas", "body": "<p>I have a HTTP requests log. The included features are: capture_time, ip, method, url, content, user_agent</p>\n\n<p>All this information is in a csv file.</p>\n\n<p>i want to group all requests from the same IP between a 10 minutes interval.</p>\n\n<p>how can i do that using pandas?</p>\n\n<p><strong>example dataset:</strong></p>\n\n<pre><code>date ip method url content agent\n</code></pre>\n\n<ul>\n<li>2019-04-24 23:16:48.742466</li>\n<li>187.20.211.99</li>\n<li>POST</li>\n<li>/delivery/check_location</li>\n<li>bairro=Vila&amp;cidade=Lima</li>\n<li>Mozilla/5.0\n(iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15\n(KHTML like Gecko) Mobile/15E148</li>\n</ul>\n\n<p>i have already tried using groupby method.</p>\n\n<p>i would like to merge all the requests content in one row (for those grouped using ip and time)</p>\n"}, {"tags": ["python", "sqlalchemy"], "answers": [{"tags": [], "owner": {"reputation": 83, "user_id": 6655369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/566bc12343e7a7b22649a7d70ce19e0b?s=128&d=identicon&r=PG&f=1", "display_name": "Reinaldo Gomes", "link": "https://stackoverflow.com/users/6655369/reinaldo-gomes"}, "is_accepted": true, "score": 0, "last_activity_date": 1558200389, "creation_date": 1558200389, "answer_id": 56201296, "question_id": 56158666, "link": "https://stackoverflow.com/questions/56158666/how-to-access-count-value-as-dict-property-in-sqlalchemy-with-group-by/56201296#56201296", "title": "How to access &quot;count&quot; value as dict/property in sqlalchemy with group_by?", "body": "<p>Found the answer to my question after re-reading <a href=\"https://docs.sqlalchemy.org/en/13/orm/tutorial.html#querying\" rel=\"nofollow noreferrer\">the official ORM tutorial</a></p>\n\n<p>All I need to do is to set a label for the column for which there's no corresponding property in my class.</p>\n\n<p>So, instead of doing this:</p>\n\n<pre><code>servers = session.query(func.count(Server.type), Server.type).group_by(Server.type).all()\n</code></pre>\n\n<p>I should do that:</p>\n\n<pre><code>servers = session.query(func.count(Server.type).label('total_count'), Server.type).group_by(Server.type).all()\n</code></pre>\n\n<p>Then I can access the <code>total_count</code> property (provided by the <code>label</code> function):</p>\n\n<pre><code>for server in servers:\n    print(server.type, server.total_count)\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 6655369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/566bc12343e7a7b22649a7d70ce19e0b?s=128&d=identicon&r=PG&f=1", "display_name": "Reinaldo Gomes", "link": "https://stackoverflow.com/users/6655369/reinaldo-gomes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 56201296, "answer_count": 1, "score": 0, "last_activity_date": 1558200389, "creation_date": 1557961043, "question_id": 56158666, "link": "https://stackoverflow.com/questions/56158666/how-to-access-count-value-as-dict-property-in-sqlalchemy-with-group-by", "title": "How to access &quot;count&quot; value as dict/property in sqlalchemy with group_by?", "body": "<p>I am making a very simple query using ORM SQLAlchemy, in which I expect to get a column (type) as well as its occurences for each value (<code>count</code> with <code>group by</code>).</p>\n\n<p>I can access the <code>type</code> column by accessing the <code>type</code> property on the <code>server</code> object (as shown in the code provided).</p>\n\n<p>I can also access the <code>count</code> column by accessing the index 0 on the <code>server</code> object.</p>\n\n<p>My question is: is there a simple way to access the <code>count</code> column as a dict/property? For example: server.count</p>\n\n<p>I've extensively inspected the <code>server</code> object using <code>dir()</code>, but I couldn't find any properties that would return the <code>count</code> value.</p>\n\n<pre><code>class Server(Base):\n    __tablename__ = 'servers'\n\n    id = Column(Integer, primary_key=True)\n    type = Column(String)\n    method = Column(String)\n\n    def __repr__(self):\n        return \"&lt;Server(type='%s', method='%s')&gt;\" % (self.type, self.method)\n\nsession = Session()\n\nservers = session.query(func.count(Server.type), Server.type).group_by(Server.type).all()\n\nfor server in servers:\n    print(server[0], server.type)\n\n</code></pre>\n"}, {"tags": ["python", "django", "django-rest-framework"], "answers": [{"comments": [{"owner": {"reputation": 646, "user_id": 8246827, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-jle2fpBmktI/AAAAAAAAAAI/AAAAAAAAIMA/BLgTIn0PxtE/photo.jpg?sz=128", "display_name": "Omar Jandali", "link": "https://stackoverflow.com/users/8246827/omar-jandali"}, "edited": false, "score": 0, "creation_date": 1557977563, "post_id": 56159498, "comment_id": 98948848, "body": "i made changes to the models. I am trying to run <code>python manage.py makemigrations</code> and <code>python manage.py migrate</code> but it isi not adding the tables to the database. do you know why it is not adding the tables to the database..."}], "tags": [], "owner": {"reputation": 161, "user_id": 5078839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa32234ac657e5b765947df2461572fc?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Gleason", "link": "https://stackoverflow.com/users/5078839/matt-gleason"}, "is_accepted": true, "score": 1, "last_activity_date": 1557969034, "creation_date": 1557969034, "answer_id": 56159498, "question_id": 56158647, "link": "https://stackoverflow.com/questions/56158647/is-it-possible-to-search-two-fields-with-one-passed-in-reference-django-rest-fra/56159498#56159498", "title": "is it possible to search two fields with one passed in reference django rest framework", "body": "<p>You can do that with simple OR queryset.  However, your friender and friended fields have to both be the same format.  So, pick either ForeignKey or CharField.  I would recommend ForeignKey and you would then just have to add a 'related_name' attribute to both, in order to avoid conflicts.  Something like the below.</p>\n\n<pre><code>friender = models.ForeignKey(User, on_delete=models.CASCADE, related_name='friender_user_id')\nfriended = models.ForeignKey(User, on_delete=models.CASCADE, related_name='friended_user_id')\n</code></pre>\n\n<p>queryset would need a Q import:</p>\n\n<pre><code>from django.db.models import Q\nFriend.objects.filter(Q(friender__name__iexact='John Doe') | Q(friended__name__iexact='John Doe')\n</code></pre>\n"}], "owner": {"reputation": 646, "user_id": 8246827, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-jle2fpBmktI/AAAAAAAAAAI/AAAAAAAAIMA/BLgTIn0PxtE/photo.jpg?sz=128", "display_name": "Omar Jandali", "link": "https://stackoverflow.com/users/8246827/omar-jandali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 56159498, "answer_count": 1, "score": 0, "last_activity_date": 1557978449, "creation_date": 1557960797, "question_id": 56158647, "link": "https://stackoverflow.com/questions/56158647/is-it-possible-to-search-two-fields-with-one-passed-in-reference-django-rest-fra", "title": "is it possible to search two fields with one passed in reference django rest framework", "body": "<p>I have a django rest framework project. I have a friend models which has a friender and friended model. the friender is a foreign key for the user which contains a username and friended is a char field that is going to be a username. </p>\n\n<p>I have a username passed in through the url that calls the serialize. I want it to be used to search through both fields and see if any records contain username for friender and friended. </p>\n\n<p>Would it be better to set both of the as charfields and store usernames in both or is there an easy way to seach both fields and combine the results...</p>\n\n<p>right now it checks the friended... i want to to check friended and friender.username</p>\n\n<p>here is my code:</p>\n\n<p>models:</p>\n\n<pre><code>class Friend(models.Model):\n    friender = models.ForeignKey(User, on_delete=models.CASCADE)\n    friended = models.CharField(max_length=50)\n    status = models.SmallIntegerField()\n    blocked = models.BooleanField(default=False)\n    favorite = models.BooleanField(default=False)\n    created = models.DateTimeField(auto_now_add=True)\n\n    def __str__(self):\n        return self.friender.username + self.friended\n</code></pre>\n\n<p>serializer:</p>\n\n<pre><code>class FriendSerializer(serializers.ModelSerializer):\n    class Meta:\n        model = Friend\n        fields = (\n            'friender',\n            'friended',\n            'status',\n            'blocked',\n            'favorite',\n        )\n        depth=2\n</code></pre>\n\n<p>views:</p>\n\n<pre><code>from users.models import Friend\nfrom ..serializers import FriendSerializer\nfrom rest_framework import viewsets\n\nclass FriendViewSet(viewsets.ModelViewSet):\n    queryset = Friend.objects.all()\n    lookup_field = 'friended'\n    serializer_class = FriendSerializer\n</code></pre>\n"}, {"tags": ["python", "pycharm", "pyqt5", "x11-forwarding"], "comments": [{"owner": {"reputation": 76, "user_id": 2821145, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ENtq3.jpg?s=128&g=1", "display_name": "George G", "link": "https://stackoverflow.com/users/2821145/george-g"}, "edited": false, "score": 0, "creation_date": 1613717870, "post_id": 56158576, "comment_id": 117167137, "body": "Use command: export DISPLAY=:0 in terminal <a href=\"https://stackoverflow.com/questions/64085911/vscode-plotting-from-remote-server-issue-qt-qpa-xcb-could-not-connect-to-displ/66266973#66266973\" title=\"vscode plotting from remote server issue qt qpa xcb could not connect to displ\">stackoverflow.com/questions/64085911/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 641, "user_id": 3671065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bed2531cf017b044b5a59d22215deaba?s=128&d=identicon&r=PG&f=1", "display_name": "apogalacticon", "link": "https://stackoverflow.com/users/3671065/apogalacticon"}, "is_accepted": false, "score": 0, "last_activity_date": 1558023022, "creation_date": 1558023022, "answer_id": 56172657, "question_id": 56158576, "link": "https://stackoverflow.com/questions/56158576/windows-forwarding-pyqt5-gui-from-pycharm/56172657#56172657", "title": "Windows forwarding PyQt5 GUI from PyCharm", "body": "<p>I found a workaround to my own question, but this is not necessarily ideal. If the program is run from PyCharm with the aforementioned environment variables set <em>and</em> I have connected to the remote host using <code>ssh -Y</code> from a terminal, the GUI window will be displayed with no errors. If I kill the ssh connection from the terminal, I will not be able to execute the program from PyCharm.</p>\n\n<p>This workaround works for me at the moment, and I wanted to post this in case anyone else stumbles upon this question in the future, but I would appreciate it if someone could help me understand why this workaround works, or how to solve this issue without having to open a separate ssh connection from a terminal.</p>\n"}], "owner": {"reputation": 641, "user_id": 3671065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bed2531cf017b044b5a59d22215deaba?s=128&d=identicon&r=PG&f=1", "display_name": "apogalacticon", "link": "https://stackoverflow.com/users/3671065/apogalacticon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 698, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1558023022, "creation_date": 1557960282, "last_edit_date": 1592644375, "question_id": 56158576, "link": "https://stackoverflow.com/questions/56158576/windows-forwarding-pyqt5-gui-from-pycharm", "title": "Windows forwarding PyQt5 GUI from PyCharm", "body": "<p>I developed a simple GUI using PyQt5, which I would like to run on a remote server from PyCharm using the remote host deployment tools. The source code for a simple GUI to display a blank window is provided below.</p>\n<pre><code>import sys\nfrom PyQt5.QtWidgets import QApplication, QWidget\n\nif __name__ == '__main__':\n    app = QApplication(sys.argv)\n    w = QWidget()\n    w.resize(250, 150)\n    w.move(300, 300)\n    w.setWindowTitle('Simple')\n    w.show()\n    sys.exit(app.exec_())\n</code></pre>\n<p>If I ssh into this host from a terminal using X11 forwarding (-Y) and run the GUI (<code>python3 myapp.py</code>), the program works fine and a blank window appears as expected. However, if I run the program from PyCharm (using the same Python interpreter on the remote host), I receive the following error:</p>\n<blockquote>\n<p>qt.qpa.plugin: Could not load the Qt platform plugin &quot;xcb&quot; in &quot;&quot; even though it was found.</p>\n<p>This application failed to start because no Qt platform plugin could be initialized. Reinstalling the application may fix this problem.</p>\n<p>Available platform plugins are: eglfs, linuxfb, minimal, minimalegl, offscreen, vnc, wayland-egl, wayland, wayland-xcomposite-egl, wayland-xcomposite-glx, webgl, xcb.</p>\n</blockquote>\n<p>Within PyCharm, I am running the script on the remote host using the same Python interpreter tested in the successful demonstration mentioned above in the terminal using <code>ssh -Y</code>. I also set the environment variables in PyCharm in Settings&gt;Build,Execution,Deployment&gt;Console&gt;Python Console&gt;Environment Variables. I ensured that the DISPLAY environment variable matches the DISPLAY variable when I ssh into the remote host (localhost:10.0). I tried changing the platform plugin to one of the others recommended (setting the <code>qt_qpa_platform</code> environment variable), and although some platform plugins do not produce the above error, the expected window does not appear.</p>\n<p>I have seen similar posts with this error, however I don't think that the typical recommended solutions of reinstalling pyqt or moving library paths applies to this situation because the program can run outside of PyCharm. I assume that there must be an issue with the PyCharm run configuration environment variables, but I believe that I am setting everything correctly:</p>\n<pre><code>DISPLAY=localhost:10.0\nPYTHONUNBUFFERED=1\nQT_DIR=/usr/lib64/qt-3.3\nQTINC=/usr/lib64/qt-3.3/include\nQTLIB=/usr/lib64/qt-3.3/lib\n</code></pre>\n<p>Thanks in advance for any guidance.</p>\n"}, {"tags": ["python", "tensorflow"], "answers": [{"tags": [], "owner": {"reputation": 409, "user_id": 3017656, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/yoGZy.jpg?s=128&g=1", "display_name": "cthl", "link": "https://stackoverflow.com/users/3017656/cthl"}, "is_accepted": false, "score": 0, "last_activity_date": 1558016984, "creation_date": 1558016984, "answer_id": 56170929, "question_id": 56158563, "link": "https://stackoverflow.com/questions/56158563/shifted-gradient-with-tensorflow/56170929#56170929", "title": "Shifted gradient with TensorFlow", "body": "<p>I think I found a solution: My goal was to compute the term <img src=\"https://latex.codecogs.com/gif.latex?y=%5Cnabla&space;f(x+s)-%5Cnabla&space;f(x)\"/>, and I tried to compute it symbolically and then evaluate <img src=\"https://latex.codecogs.com/gif.latex?y\"/>. However, after looking at my problem again, I realized that I only need the value of <img src=\"https://latex.codecogs.com/gif.latex?y\"/> for a specific <img src=\"https://latex.codecogs.com/gif.latex?x_0\"/> and not as a function of <img src=\"https://latex.codecogs.com/gif.latex?x\"/>. Hence, I can compute <img src=\"https://latex.codecogs.com/gif.latex?y\"/> in the following way:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>x = tf.Variable(0.0, tf.float32)\nf = (x + 1.0)**2.0\ngrad_f = tf.gradients(f, x)[0]\ny = tf.Variable(0.0, tf.float32)\nx0 = tf.constant(1.0, tf.float32)\ns = tf.constant(1.0, tf.float32)\n\ntensors = []\ntensors.append(tf.assign(x, x0))\ntensors.append(tf.assign(y, -grad_f))\ntensors.append(tf.assign(x, x0 + s))\n# Coming from a numerical background, the line below confused me a bit,\n# because the dependency of grad_f on x is not \"visible\" in the code.\ntensors.append(tf.assign_add(y, grad_f))\n\nwith tf.Session():\n  for t in tensors:\n    t.eval()\n</code></pre>\n"}], "owner": {"reputation": 409, "user_id": 3017656, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/yoGZy.jpg?s=128&g=1", "display_name": "cthl", "link": "https://stackoverflow.com/users/3017656/cthl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1558016984, "creation_date": 1557960148, "last_edit_date": 1557961194, "question_id": 56158563, "link": "https://stackoverflow.com/questions/56158563/shifted-gradient-with-tensorflow", "title": "Shifted gradient with TensorFlow", "body": "<p>I am new to TensorFlow, and I am struggling a bit with the following: Given <img src=\"https://latex.codecogs.com/gif.latex?f:%5Cmathbb&space;R%5En%5Crightarrow%5Cmathbb&space;R\"/> and <img src=\"https://latex.codecogs.com/gif.latex?s%5Cin%5Cmathbb&space;R%5En\"/>, I would like to compute <img src=\"https://latex.codecogs.com/gif.latex?%5Cnabla_x&space;f(x&plus;s)\"/>.</p>\n\n<p>I understand how to compute the gradient without the shift, and how I can numerically evaluate the gradient with the shift, but I do not see how to compute <img src=\"https://latex.codecogs.com/gif.latex?%5Cnabla_x&space;f(x&plus;s)\"/> symbolically.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import tensorflow as tf\n\nx = tf.placeholder(tf.float32)\nf = (x + 1.0)**2\ns = tf.constant(1.0, tf.float32)\n\n# Gradient of f(.)\ngrad_f = tf.gradients(f, x)[0]\n\n# Gradient of f(. + s)\ngrad_f_shifted = ?\n</code></pre>\n\n<p>Note that I do not know the definition of <img src=\"https://latex.codecogs.com/gif.latex?f\"/>, so I cannot simply define</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>f_shifted = (x + s + 1.0)**2\n</code></pre>\n\n<p>or at least I do not know how.</p>\n"}, {"tags": ["python", "opencv", "imutils"], "answers": [{"tags": [], "owner": {"reputation": 25800, "user_id": 11162165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5kgh.png?s=128&g=1", "display_name": "nathancy", "link": "https://stackoverflow.com/users/11162165/nathancy"}, "is_accepted": false, "score": 1, "last_activity_date": 1557962757, "last_edit_date": 1557962757, "creation_date": 1557961944, "answer_id": 56158773, "question_id": 56158518, "link": "https://stackoverflow.com/questions/56158518/contours-tuple-must-have-length-2-or-3-otherwise-opencv-changed-their-cv-findco/56158773#56158773", "title": "Contours tuple must have length 2 or 3, otherwise opencv changed their cv.findcontours signature yet again", "body": "<p>Depending on the OpenCV version, <code>findContours()</code> has varying return signatures.</p>\n\n<p>In OpenCV 3.4.X, <a href=\"https://docs.opencv.org/3.4/d3/dc0/group__imgproc__shape.html#ga17ed9f5d79ae97bd4c7cf18403e1689a\" rel=\"nofollow noreferrer\"><code>findContours()</code></a> returns 3 items</p>\n\n<pre><code>image, contours, hierarchy = cv.findContours(image, mode, method[, contours[, hierarchy[, offset]]])\n</code></pre>\n\n<p>In OpenCV 4.1.X, <a href=\"https://docs.opencv.org/4.1.0/d3/dc0/group__imgproc__shape.html#gadf1ad6a0b82947fa1fe3c3d497f260e0\" rel=\"nofollow noreferrer\"><code>findContours()</code></a> returns 2 items</p>\n\n<pre><code>contours, hierarchy = cv.findContours(image, mode, method[, contours[, hierarchy[, offset]]])\n</code></pre>\n\n<p>To manually get contours without using imutils, you can check the amount of items in the returned tuple</p>\n\n<pre><code>items = cv.findContours(edged.copy(), cv.RETR_EXTERNAL, cv.CHAIN_APPROX_SIMPLE)\ncontours = items[0] if len(items) == 2 else items[1]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12838735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bacb2a414738353a7f6bff864bdca3c5?s=128&d=identicon&r=PG&f=1", "display_name": "HunnyGrizzleBear", "link": "https://stackoverflow.com/users/12838735/hunnygrizzlebear"}, "is_accepted": false, "score": 0, "last_activity_date": 1588085458, "creation_date": 1588085458, "answer_id": 61483129, "question_id": 56158518, "link": "https://stackoverflow.com/questions/56158518/contours-tuple-must-have-length-2-or-3-otherwise-opencv-changed-their-cv-findco/61483129#61483129", "title": "Contours tuple must have length 2 or 3, otherwise opencv changed their cv.findcontours signature yet again", "body": "<p>Do it this way</p>\n\n<pre><code>items = cv.findContours(edged.copy(), cv.RETR_EXTERNAL, cv.CHAIN_APPROX_SIMPLE)\ncnts = imutils.grab_contours(items)\n</code></pre>\n\n<p>Instead</p>\n\n<pre><code>image, contours, hier = cv.findContours(edged.copy(), cv.RETR_EXTERNAL, cv.CHAIN_APPROX_SIMPLE)\ncnts = imutils.grab_contours(contours)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27168, "user_id": 7355741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6CMNt.jpg?s=128&g=1", "display_name": "fmw42", "link": "https://stackoverflow.com/users/7355741/fmw42"}, "is_accepted": false, "score": 0, "last_activity_date": 1588095342, "creation_date": 1588095342, "answer_id": 61486442, "question_id": 56158518, "link": "https://stackoverflow.com/questions/56158518/contours-tuple-must-have-length-2-or-3-otherwise-opencv-changed-their-cv-findco/61486442#61486442", "title": "Contours tuple must have length 2 or 3, otherwise opencv changed their cv.findcontours signature yet again", "body": "<p>I learned this way from @nathancy in Python/OpenCV. It takes care of both ways.</p>\n\n<pre><code>contours = cv2.findContours(thresh, cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE)\ncontours = contours[0] if len(contours) == 2 else contours[1]\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 10088060, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Hs83tgsMaAw/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7q8eEWxsaGpnlJt0inN5PXfsmNucw/mo/photo.jpg?sz=128", "display_name": "James Phelps", "link": "https://stackoverflow.com/users/10088060/james-phelps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2615, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1588095342, "creation_date": 1557959780, "last_edit_date": 1557968361, "question_id": 56158518, "link": "https://stackoverflow.com/questions/56158518/contours-tuple-must-have-length-2-or-3-otherwise-opencv-changed-their-cv-findco", "title": "Contours tuple must have length 2 or 3, otherwise opencv changed their cv.findcontours signature yet again", "body": "<p>After running my code I get the error message contours tuple must have length 2 or 3, otherwise opencv changed their return signature yet again. I am currently running ver 3.4.3.18 of opencv. The issue occurs when I grab the\ncontours running imutils ver 0.5.2</p>\n\n<p>The code finds the countours and returns the contours found after doing some edge detection. The algorithm then uses imutils to grab the contours. Is this \nthe right way of going about it or is there some up to date way of getting\nthe contours instead of using imutils?</p>\n\n<p>Please see an example below: </p>\n\n<pre><code>image, contours, hier = cv.findContours(edged.copy(), cv.RETR_EXTERNAL, cv.CHAIN_APPROX_SIMPLE)\n\n\ncnts = imutils.grab_contours(contours)\n\ncnts = sorted(contours, key = cv.contourArea, reverse = True)[:5]\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pandas", "dataframe", "pandas-groupby"], "answers": [{"comments": [{"owner": {"reputation": 2424, "user_id": 10286422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8eee83d47bbcbfaf55bb18f7077890?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Pap", "link": "https://stackoverflow.com/users/10286422/ben-pap"}, "reply_to_user": {"reputation": 2412, "user_id": 11135962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mXBpl.jpg?s=128&g=1", "display_name": "Junkrat", "link": "https://stackoverflow.com/users/11135962/junkrat"}, "edited": false, "score": 1, "creation_date": 1557962169, "post_id": 56158617, "comment_id": 98946220, "body": "I added 3 lines to add above. Replace your code with my code from <code>df = data.dropna(axis = 0)</code> to ensure everything is the same.  Your time is going to be the wrong format, but you can change that after you do all the transforms."}, {"owner": {"reputation": 2412, "user_id": 11135962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mXBpl.jpg?s=128&g=1", "display_name": "Junkrat", "link": "https://stackoverflow.com/users/11135962/junkrat"}, "edited": false, "score": 0, "creation_date": 1557995055, "post_id": 56158617, "comment_id": 98955313, "body": "When I run the <code>df[&#39;Time&#39;]</code> code, it gives me the following error:<code>TypeError: &lt;class &#39;datetime.time&#39;&gt; is not convertible to datetime</code>"}], "tags": [], "owner": {"reputation": 2424, "user_id": 10286422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8eee83d47bbcbfaf55bb18f7077890?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Pap", "link": "https://stackoverflow.com/users/10286422/ben-pap"}, "is_accepted": false, "score": 1, "last_activity_date": 1557962112, "last_edit_date": 1557962112, "creation_date": 1557960568, "answer_id": 56158617, "question_id": 56158499, "link": "https://stackoverflow.com/questions/56158499/how-to-overcome-the-valueerror-wrong-number-of-items-passed-2-placement-impli/56158617#56158617", "title": "How to overcome the &#39;ValueError: Wrong number of items passed 2, placement implies 1&#39; error?", "body": "<p>Given that both your Dates and Time columns are  datetime64[ns] then: </p>\n\n<pre><code>df = data.dropna(axis = 0)\ndf['Dates'] = pd.to_datetime(df['Dates'])\ndf['Time'] = pd.to_datetime(df['Time'])\n\ndf['month_mean'] = df.groupby(df['Dates'].dt.month).transform('mean')\ndf['hourbyday_mean'] =df.groupby([df['Dates'].dt.day, df['Time'].dt.hour]).transform('mean')\ndf['day_mean'] =df.groupby(df['Dates'].dt.day).transform('mean')\n</code></pre>\n\n<p>Will give you three new columns with their respective mean.</p>\n"}, {"comments": [{"owner": {"reputation": 2412, "user_id": 11135962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mXBpl.jpg?s=128&g=1", "display_name": "Junkrat", "link": "https://stackoverflow.com/users/11135962/junkrat"}, "edited": false, "score": 0, "creation_date": 1557995474, "post_id": 56159406, "comment_id": 98955537, "body": "Hey, when I do that, only the &#39;monthly_mean&#39; gives me the correct answer, but the daily_mean &amp; &#39;hourly_mean&#39; give me the wrong answer"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 0, "last_activity_date": 1557967935, "creation_date": 1557967935, "answer_id": 56159406, "question_id": 56158499, "link": "https://stackoverflow.com/questions/56158499/how-to-overcome-the-valueerror-wrong-number-of-items-passed-2-placement-impli/56159406#56159406", "title": "How to overcome the &#39;ValueError: Wrong number of items passed 2, placement implies 1&#39; error?", "body": "<p>The problem here is you should point out which columns to get the <code>mean</code>, here I assume it is <code>Menge</code></p>\n\n<pre><code>data_nan_dropped['hourly_mean'] = data_nan_dropped.groupby([data_nan_dropped.Dates, data_nan_dropped.Time.dt.hour])['Menge'].transform('mean')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2412, "user_id": 11135962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mXBpl.jpg?s=128&g=1", "display_name": "Junkrat", "link": "https://stackoverflow.com/users/11135962/junkrat"}, "is_accepted": true, "score": 0, "last_activity_date": 1557996135, "creation_date": 1557996135, "answer_id": 56164382, "question_id": 56158499, "link": "https://stackoverflow.com/questions/56158499/how-to-overcome-the-valueerror-wrong-number-of-items-passed-2-placement-impli/56164382#56164382", "title": "How to overcome the &#39;ValueError: Wrong number of items passed 2, placement implies 1&#39; error?", "body": "<p>I was playing around with the code again and the following code is giving me the correct answer:</p>\n\n<pre><code>data_nan_dropped.Dates = pd.to_datetime(data_nan_dropped.Dates)\ndata_nan_dropped.Time = pd.to_datetime(data_nan_dropped.Time, format='%H:%M:%S')\ndata_nan_dropped['monthly_mean'] = data_nan_dropped.groupby(data_nan_dropped['month'])['Menge'].transform('mean')\ndata_nan_dropped['hourly_mean'] = data_nan_dropped.groupby([data_nan_dropped['Dates'], data_nan_dropped['Time'].dt.hour])['Menge'].transform('mean')\ndata_nan_dropped['daily_mean'] =data_nan_dropped.groupby(data_nan_dropped['Dates'])['Menge'].transform('mean')\n</code></pre>\n"}], "owner": {"reputation": 2412, "user_id": 11135962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mXBpl.jpg?s=128&g=1", "display_name": "Junkrat", "link": "https://stackoverflow.com/users/11135962/junkrat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 761, "favorite_count": 0, "accepted_answer_id": 56164382, "answer_count": 3, "score": 1, "last_activity_date": 1557996135, "creation_date": 1557959612, "question_id": 56158499, "link": "https://stackoverflow.com/questions/56158499/how-to-overcome-the-valueerror-wrong-number-of-items-passed-2-placement-impli", "title": "How to overcome the &#39;ValueError: Wrong number of items passed 2, placement implies 1&#39; error?", "body": "<p>I have a time series df:</p>\n\n<pre><code>    Menge     Dates      Time       month\n    19.5    2018-01-01  00:00:00     Jan\n    19.0    2018-01-01  00:15:00     Jan\n    19.5    2018-01-01  00:30:00     Jan\n    19.5    2018-01-01  00:45:00     Jan\n    21.0    2018-01-01  01:00:00     Jan\n    19.5    2018-01-01  01:15:00     Jan\n    20.0    2018-01-01  01:30:00     Jan\n    23.0    2018-01-01  01:45:00     Jan\n    20.5    2018-01-01  02:00:00     Jan\n    84.5    2018-01-02  02:00:00     Jan\n    80.0    2018-01-02  02:15:00     Jan\n    75.5    2018-01-02  02:30:00     Jan\n    72.0    2018-01-02  02:45:00     Jan\n    70.0    2018-01-02  03:00:00     Jan\n    69.0    2018-01-02  03:15:00     Jan\n    67.5    2018-01-02  03:30:00     Jan\n    67.0    2018-01-02  03:45:00     Jan\n    66.0    2018-01-02  04:00:00     Jan\n    189.5   2018-02-06  07:00:00     Feb\n    188.0   2018-02-06  07:15:00     Feb\n    190.5   2018-02-06  07:30:00     Feb\n    192.0   2018-02-06  07:45:00     Feb\n    185.5   2018-02-06  08:00:00     Feb\n    182.5   2018-02-06  08:15:00     Feb\n    178.0   2018-02-06  08:30:00     Feb\n    189.5   2018-02-06  08:45:00     Feb\n    181.0   2018-02-06  09:00:00     Feb\n    161.0   2018-02-06  21:00:00     Feb\n    159.0   2018-02-06  21:15:00     Feb\n    163.5   2018-02-06  21:30:00     Feb\n    162.5   2018-02-06  21:45:00     Feb\n    163.0   2018-02-06  22:00:00     Feb\n    162.5   2018-02-06  22:15:00     Feb\n    162.5   2018-02-06  22:30:00     Feb\n    162.0   2018-02-06  22:45:00     Feb\n    158.5   2018-02-06  23:00:00     Feb\n</code></pre>\n\n<p>I am trying to calculate the hourly, daily and monthly average for the same. </p>\n\n<p>I have done:</p>\n\n<pre><code>data['month'] = [d.strftime('%b') for d in data.Dates]\n</code></pre>\n\n<p>to get the <code>month</code> column and following that I am doing:</p>\n\n<pre><code>data_nan_dropped = data.dropna(axis = 0)\ndata_nan_dropped.Dates = pd.to_datetime(data_nan_dropped.Dates)\ndata_nan_dropped.Time = pd.to_datetime(data_nan_dropped.Time, format='%H:%M:%S')\nhourly_mean = data_nan_dropped.groupby([data_nan_dropped.Dates, data_nan_dropped.Time.dt.hour]).mean()\nmonthly_mean = data_nan_dropped.groupby(data_nan_dropped.month).mean()\ndaily_mean = data_nan_dropped.groupby([data_nan_dropped.Dates]).mean()\n</code></pre>\n\n<p>This code works absolutely fine, but what I want is to add these hourly, monthly, daily means column to my dataframe <code>data_nan_dropped</code> and for that I tried editing the above code as:</p>\n\n<pre><code>data_nan_dropped['hourly_mean'] = data_nan_dropped.groupby([data_nan_dropped.Dates, data_nan_dropped.Time.dt.hour]).transform('mean')\ndata_nan_dropped['monthly_mean'] = data_nan_dropped.groupby(data_nan_dropped.month).transform('mean')\ndata_nan_dropped['daily_mean'] = data_nan_dropped.groupby([data_nan_dropped.Dates]).transform('mean')\n</code></pre>\n\n<p>The <code>data_nan_dropped['hourly_mean']</code> works perfectly fine and a new column named <code>hourly_mean</code> is created in my dataframe.</p>\n\n<p>But for the <code>monthly_mean</code> &amp; <code>daily_mean</code>, I get the following error:</p>\n\n<pre><code>Traceback (most recent call last):\n\n  File \"&lt;ipython-input-5-159d11ea8819&gt;\", line 1, in &lt;module&gt;\n    data_nan_dropped['daily_mean'] = data_nan_dropped.groupby([data_nan_dropped.Dates]).transform('mean')\n\n  File \"C:\\Users\\kashy\\Anaconda3\\envs\\py36\\lib\\site-packages\\pandas\\core\\frame.py\", line 3370, in __setitem__\n    self._set_item(key, value)\n\n  File \"C:\\Users\\kashy\\Anaconda3\\envs\\py36\\lib\\site-packages\\pandas\\core\\frame.py\", line 3446, in _set_item\n    NDFrame._set_item(self, key, value)\n\n  File \"C:\\Users\\kashy\\Anaconda3\\envs\\py36\\lib\\site-packages\\pandas\\core\\generic.py\", line 3172, in _set_item\n    self._data.set(key, value)\n\n  File \"C:\\Users\\kashy\\Anaconda3\\envs\\py36\\lib\\site-packages\\pandas\\core\\internals\\managers.py\", line 1056, in set\n    self.insert(len(self.items), item, value)\n\n  File \"C:\\Users\\kashy\\Anaconda3\\envs\\py36\\lib\\site-packages\\pandas\\core\\internals\\managers.py\", line 1158, in insert\n    placement=slice(loc, loc + 1))\n\n  File \"C:\\Users\\kashy\\Anaconda3\\envs\\py36\\lib\\site-packages\\pandas\\core\\internals\\blocks.py\", line 3095, in make_block\n    return klass(values, ndim=ndim, placement=placement)\n\n  File \"C:\\Users\\kashy\\Anaconda3\\envs\\py36\\lib\\site-packages\\pandas\\core\\internals\\blocks.py\", line 87, in __init__\n    '{mgr}'.format(val=len(self.values), mgr=len(self.mgr_locs)))\n\nValueError: Wrong number of items passed 2, placement implies 1\n</code></pre>\n\n<p>What has to be changed for overcoming this error?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "c++", "tensorflow", "protocol-buffers"], "answers": [{"tags": [], "owner": {"reputation": 6608, "user_id": 867889, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/766cbf5cffe9872f58f00c994cd34a3f?s=128&d=identicon&r=PG", "display_name": "y.selivonchyk", "link": "https://stackoverflow.com/users/867889/y-selivonchyk"}, "is_accepted": false, "score": 1, "last_activity_date": 1557978514, "creation_date": 1557978514, "answer_id": 56160539, "question_id": 56158456, "link": "https://stackoverflow.com/questions/56158456/tensorflow-model-how-to-identify-input-output-nodes-name-from-a-proto-buff-file/56160539#56160539", "title": "Tensorflow model: How to identify input/output nodes name from a proto buff file?", "body": "<p>I can not provide a full answer.</p>\n\n<p>Yet, to identify an input node you typically be searching for a node with operation \"placeholder\". There might be more than one, especially when a sophisticated optimizer or drop-out layer are used.</p>\n\n<p>When it comes to outputs it is even worth: every node is essentially an output. I can recommend 2 options here: be looking for an operation with an expected output name, like softmax. Or parse the whole file definition and find terminal nodes. The nodes that are not used in any other operation.</p>\n\n<p>One other option would be to load graph, save a checkpoint and study it in tensorboard.</p>\n\n<p>I am not aware of a programming tool capable of nicely representing tf.graph for python queries.</p>\n\n<p>In case you are willing to produce .pb file you can use help of this answer: <a href=\"https://stackoverflow.com/questions/43517959/given-a-tensor-flow-model-graph-how-to-find-the-input-node-and-output-node-name\">Given a tensor flow model graph, how to find the input node and output node names</a></p>\n"}], "owner": {"reputation": 17078, "user_id": 3993270, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/1bee661ad7451ff3107ca6954560a06c?s=128&d=identicon&r=PG&f=1", "display_name": "Edamame", "link": "https://stackoverflow.com/users/3993270/edamame"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 445, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557978514, "creation_date": 1557959313, "question_id": 56158456, "link": "https://stackoverflow.com/questions/56158456/tensorflow-model-how-to-identify-input-output-nodes-name-from-a-proto-buff-file", "title": "Tensorflow model: How to identify input/output nodes name from a proto buff file?", "body": "<p>I am using OpenAI baselines to train an RL (deepq)model.The inputs are 19 features:</p>\n\n<pre><code>observation_space = spaces.Box(0, 100, (19, 1), dtype=np.float_)\n</code></pre>\n\n<p>, and the output is:</p>\n\n<pre><code>action_space =spaces.Discrete(6)\n</code></pre>\n\n<p>All the model variables from:</p>\n\n<pre><code>for i, var in enumerate(saver._var_list):\n    print('Var {}: {}'.format(i, var))\n</code></pre>\n\n<p>are like:</p>\n\n<pre><code>Var 0: &lt;tf.Variable 'deepq/eps:0' shape=() dtype=float32_ref&gt;\nVar 1: &lt;tf.Variable 'deepq/q_func/mlp_fc0/w:0' shape=(19, 64) dtype=float32_ref&gt;\nVar 2: &lt;tf.Variable 'deepq/q_func/mlp_fc0/b:0' shape=(64,) dtype=float32_ref&gt;\nVar 3: &lt;tf.Variable 'deepq/q_func/mlp_fc1/w:0' shape=(64, 64) dtype=float32_ref&gt;\nVar 4: &lt;tf.Variable 'deepq/q_func/mlp_fc1/b:0' shape=(64,) dtype=float32_ref&gt;\nVar 5: &lt;tf.Variable 'deepq/q_func/action_value/fully_connected/weights:0' shape=(64, 256) dtype=float32_ref&gt;\nVar 6: &lt;tf.Variable 'deepq/q_func/action_value/fully_connected/biases:0' shape=(256,) dtype=float32_ref&gt;\nVar 7: &lt;tf.Variable 'deepq/q_func/action_value/fully_connected_1/weights:0' shape=(256, 6) dtype=float32_ref&gt;\nVar 8: &lt;tf.Variable 'deepq/q_func/action_value/fully_connected_1/biases:0' shape=(6,) dtype=float32_ref&gt;\nVar 9: &lt;tf.Variable 'deepq/q_func/state_value/fully_connected/weights:0' shape=(64, 256) dtype=float32_ref&gt;\nVar 10: &lt;tf.Variable 'deepq/q_func/state_value/fully_connected/biases:0' shape=(256,) dtype=float32_ref&gt;\nVar 11: &lt;tf.Variable 'deepq/q_func/state_value/fully_connected_1/weights:0' shape=(256, 1) dtype=float32_ref&gt;\nVar 12: &lt;tf.Variable 'deepq/q_func/state_value/fully_connected_1/biases:0' shape=(1,) dtype=float32_ref&gt;\nVar 13: &lt;tf.Variable 'deepq/target_q_func/mlp_fc0/w:0' shape=(19, 64) dtype=float32_ref&gt;\nVar 14: &lt;tf.Variable 'deepq/target_q_func/mlp_fc0/b:0' shape=(64,) dtype=float32_ref&gt;\nVar 15: &lt;tf.Variable 'deepq/target_q_func/mlp_fc1/w:0' shape=(64, 64) dtype=float32_ref&gt;\nVar 16: &lt;tf.Variable 'deepq/target_q_func/mlp_fc1/b:0' shape=(64,) dtype=float32_ref&gt;\nVar 17: &lt;tf.Variable 'deepq/target_q_func/action_value/fully_connected/weights:0' shape=(64, 256) dtype=float32_ref&gt;\nVar 18: &lt;tf.Variable 'deepq/target_q_func/action_value/fully_connected/biases:0' shape=(256,) dtype=float32_ref&gt;\nVar 19: &lt;tf.Variable 'deepq/target_q_func/action_value/fully_connected_1/weights:0' shape=(256, 6) dtype=float32_ref&gt;\nVar 20: &lt;tf.Variable 'deepq/target_q_func/action_value/fully_connected_1/biases:0' shape=(6,) dtype=float32_ref&gt;\nVar 21: &lt;tf.Variable 'deepq/target_q_func/state_value/fully_connected/weights:0' shape=(64, 256) dtype=float32_ref&gt;\nVar 22: &lt;tf.Variable 'deepq/target_q_func/state_value/fully_connected/biases:0' shape=(256,) dtype=float32_ref&gt;\nVar 23: &lt;tf.Variable 'deepq/target_q_func/state_value/fully_connected_1/weights:0' shape=(256, 1) dtype=float32_ref&gt;\nVar 24: &lt;tf.Variable 'deepq/target_q_func/state_value/fully_connected_1/biases:0' shape=(1,) dtype=float32_ref&gt;\nVar 25: &lt;tf.Variable 'deepq_1/beta1_power:0' shape=() dtype=float32_ref&gt;\nVar 26: &lt;tf.Variable 'deepq_1/beta2_power:0' shape=() dtype=float32_ref&gt;\nVar 27: &lt;tf.Variable 'deepq/deepq/q_func/mlp_fc0/w/Adam:0' shape=(19, 64) dtype=float32_ref&gt;\nVar 28: &lt;tf.Variable 'deepq/deepq/q_func/mlp_fc0/w/Adam_1:0' shape=(19, 64) dtype=float32_ref&gt;\nVar 29: &lt;tf.Variable 'deepq/deepq/q_func/mlp_fc0/b/Adam:0' shape=(64,) dtype=float32_ref&gt;\nVar 30: &lt;tf.Variable 'deepq/deepq/q_func/mlp_fc0/b/Adam_1:0' shape=(64,) dtype=float32_ref&gt;\nVar 31: &lt;tf.Variable 'deepq/deepq/q_func/mlp_fc1/w/Adam:0' shape=(64, 64) dtype=float32_ref&gt;\nVar 32: &lt;tf.Variable 'deepq/deepq/q_func/mlp_fc1/w/Adam_1:0' shape=(64, 64) dtype=float32_ref&gt;\nVar 33: &lt;tf.Variable 'deepq/deepq/q_func/mlp_fc1/b/Adam:0' shape=(64,) dtype=float32_ref&gt;\nVar 34: &lt;tf.Variable 'deepq/deepq/q_func/mlp_fc1/b/Adam_1:0' shape=(64,) dtype=float32_ref&gt;\nVar 35: &lt;tf.Variable 'deepq/deepq/q_func/action_value/fully_connected/weights/Adam:0' shape=(64, 256) dtype=float32_ref&gt;\nVar 36: &lt;tf.Variable 'deepq/deepq/q_func/action_value/fully_connected/weights/Adam_1:0' shape=(64, 256) dtype=float32_ref&gt;\nVar 37: &lt;tf.Variable 'deepq/deepq/q_func/action_value/fully_connected/biases/Adam:0' shape=(256,) dtype=float32_ref&gt;\nVar 38: &lt;tf.Variable 'deepq/deepq/q_func/action_value/fully_connected/biases/Adam_1:0' shape=(256,) dtype=float32_ref&gt;\nVar 39: &lt;tf.Variable 'deepq/deepq/q_func/action_value/fully_connected_1/weights/Adam:0' shape=(256, 6) dtype=float32_ref&gt;\nVar 40: &lt;tf.Variable 'deepq/deepq/q_func/action_value/fully_connected_1/weights/Adam_1:0' shape=(256, 6) dtype=float32_ref&gt;\nVar 41: &lt;tf.Variable 'deepq/deepq/q_func/action_value/fully_connected_1/biases/Adam:0' shape=(6,) dtype=float32_ref&gt;\nVar 42: &lt;tf.Variable 'deepq/deepq/q_func/action_value/fully_connected_1/biases/Adam_1:0' shape=(6,) dtype=float32_ref&gt;\nVar 43: &lt;tf.Variable 'deepq/deepq/q_func/state_value/fully_connected/weights/Adam:0' shape=(64, 256) dtype=float32_ref&gt;\nVar 44: &lt;tf.Variable 'deepq/deepq/q_func/state_value/fully_connected/weights/Adam_1:0' shape=(64, 256) dtype=float32_ref&gt;\nVar 45: &lt;tf.Variable 'deepq/deepq/q_func/state_value/fully_connected/biases/Adam:0' shape=(256,) dtype=float32_ref&gt;\nVar 46: &lt;tf.Variable 'deepq/deepq/q_func/state_value/fully_connected/biases/Adam_1:0' shape=(256,) dtype=float32_ref&gt;\nVar 47: &lt;tf.Variable 'deepq/deepq/q_func/state_value/fully_connected_1/weights/Adam:0' shape=(256, 1) dtype=float32_ref&gt;\nVar 48: &lt;tf.Variable 'deepq/deepq/q_func/state_value/fully_connected_1/weights/Adam_1:0' shape=(256, 1) dtype=float32_ref&gt;\nVar 49: &lt;tf.Variable 'deepq/deepq/q_func/state_value/fully_connected_1/biases/Adam:0' shape=(1,) dtype=float32_ref&gt;\nVar 50: &lt;tf.Variable 'deepq/deepq/q_func/state_value/fully_connected_1/biases/Adam_1:0' shape=(1,) dtype=float32_ref&gt;\n</code></pre>\n\n<p>And the output of the model is saved using</p>\n\n<pre><code>tf.train.write_graph(sess.graph_def, './model', 'my_deepq.pbtxt')\n</code></pre>\n\n<p>as a proto buff file. The profo buff file looks something like below. How do I identify the names of inputs node(layer) and output node (layer) from this proto buff file? Thanks!</p>\n\n<pre><code>node {\n  name: \"deepq/observation\"\n  op: \"Placeholder\"\n  attr {\n    key: \"dtype\"\n    value {\n      type: DT_DOUBLE\n    }\n  }\n  attr {\n    key: \"shape\"\n    value {\n      shape {\n        dim {\n          size: -1\n        }\n        dim {\n          size: 19\n        }\n        dim {\n          size: 1\n        }\n      }\n    }\n  }\n}\nnode {\n  name: \"deepq/ToFloat\"\n  op: \"Cast\"\n  input: \"deepq/observation\"\n  attr {\n    key: \"DstT\"\n    value {\n      type: DT_FLOAT\n    }\n  }\n  attr {\n    key: \"SrcT\"\n    value {\n      type: DT_DOUBLE\n    }\n  }\n  attr {\n    key: \"Truncate\"\n    value {\n      b: false\n    }\n  }\n}\n\n :\n :\n\nnode {\n  name: \"save/Assign_49\"\n  op: \"Assign\"\n  input: \"deepq_1/beta1_power\"\n  input: \"save/RestoreV2:49\"\n  attr {\n    key: \"T\"\n    value {\n      type: DT_FLOAT\n    }\n  }\n  attr {\n    key: \"_class\"\n    value {\n      list {\n        s: \"loc:@deepq/q_func/action_value/fully_connected/biases\"\n      }\n    }\n  }\n  attr {\n    key: \"use_locking\"\n    value {\n      b: true\n    }\n  }\n  attr {\n    key: \"validate_shape\"\n    value {\n      b: true\n    }\n  }\n}\nnode {\n  name: \"save/Assign_50\"\n  op: \"Assign\"\n  input: \"deepq_1/beta2_power\"\n  input: \"save/RestoreV2:50\"\n  attr {\n    key: \"T\"\n    value {\n      type: DT_FLOAT\n    }\n  }\n  attr {\n    key: \"_class\"\n    value {\n      list {\n        s: \"loc:@deepq/q_func/action_value/fully_connected/biases\"\n      }\n    }\n  }\n  attr {\n    key: \"use_locking\"\n    value {\n      b: true\n    }\n  }\n  attr {\n    key: \"validate_shape\"\n    value {\n      b: true\n    }\n  }\n}\n\n:\n:\nnode {\n  name: \"deepq_1/group_deps_1\"\n  op: \"NoOp\"\n  input: \"^deepq_1/Adam\"\n}\nnode {\n  name: \"deepq_1/group_deps_2\"\n  op: \"NoOp\"\n  input: \"^deepq_1/group_deps\"\n}\nnode {\n  name: \"deepq_1/group_deps_3\"\n  op: \"NoOp\"\n}\nnode {\n  name: \"init\"\n  op: \"NoOp\"\n  input: \"^deepq/deepq/q_func/action_value/fully_connected/biases/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/action_value/fully_connected/biases/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/action_value/fully_connected/weights/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/action_value/fully_connected/weights/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/action_value/fully_connected_1/biases/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/action_value/fully_connected_1/biases/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/action_value/fully_connected_1/weights/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/action_value/fully_connected_1/weights/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/mlp_fc0/b/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/mlp_fc0/b/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/mlp_fc0/w/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/mlp_fc0/w/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/mlp_fc1/b/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/mlp_fc1/b/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/mlp_fc1/w/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/mlp_fc1/w/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/state_value/fully_connected/biases/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/state_value/fully_connected/biases/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/state_value/fully_connected/weights/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/state_value/fully_connected/weights/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/state_value/fully_connected_1/biases/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/state_value/fully_connected_1/biases/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/state_value/fully_connected_1/weights/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/state_value/fully_connected_1/weights/Adam_1/Assign\"\n  input: \"^deepq/eps/Assign\"\n  input: \"^deepq/q_func/action_value/fully_connected/biases/Assign\"\n  input: \"^deepq/q_func/action_value/fully_connected/weights/Assign\"\n  input: \"^deepq/q_func/action_value/fully_connected_1/biases/Assign\"\n  input: \"^deepq/q_func/action_value/fully_connected_1/weights/Assign\"\n  input: \"^deepq/q_func/mlp_fc0/b/Assign\"\n  input: \"^deepq/q_func/mlp_fc0/w/Assign\"\n  input: \"^deepq/q_func/mlp_fc1/b/Assign\"\n  input: \"^deepq/q_func/mlp_fc1/w/Assign\"\n  input: \"^deepq/q_func/state_value/fully_connected/biases/Assign\"\n  input: \"^deepq/q_func/state_value/fully_connected/weights/Assign\"\n  input: \"^deepq/q_func/state_value/fully_connected_1/biases/Assign\"\n  input: \"^deepq/q_func/state_value/fully_connected_1/weights/Assign\"\n  input: \"^deepq/target_q_func/action_value/fully_connected/biases/Assign\"\n  input: \"^deepq/target_q_func/action_value/fully_connected/weights/Assign\"\n  input: \"^deepq/target_q_func/action_value/fully_connected_1/biases/Assign\"\n  input: \"^deepq/target_q_func/action_value/fully_connected_1/weights/Assign\"\n  input: \"^deepq/target_q_func/mlp_fc0/b/Assign\"\n  input: \"^deepq/target_q_func/mlp_fc0/w/Assign\"\n  input: \"^deepq/target_q_func/mlp_fc1/b/Assign\"\n  input: \"^deepq/target_q_func/mlp_fc1/w/Assign\"\n  input: \"^deepq/target_q_func/state_value/fully_connected/biases/Assign\"\n  input: \"^deepq/target_q_func/state_value/fully_connected/weights/Assign\"\n  input: \"^deepq/target_q_func/state_value/fully_connected_1/biases/Assign\"\n  input: \"^deepq/target_q_func/state_value/fully_connected_1/weights/Assign\"\n  input: \"^deepq_1/beta1_power/Assign\"\n  input: \"^deepq_1/beta2_power/Assign\"\n}\nnode {\n  name: \"init_1\"\n  op: \"NoOp\"\n  input: \"^deepq/deepq/q_func/action_value/fully_connected/biases/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/action_value/fully_connected/biases/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/action_value/fully_connected/weights/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/action_value/fully_connected/weights/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/action_value/fully_connected_1/biases/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/action_value/fully_connected_1/biases/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/action_value/fully_connected_1/weights/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/action_value/fully_connected_1/weights/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/mlp_fc0/b/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/mlp_fc0/b/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/mlp_fc0/w/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/mlp_fc0/w/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/mlp_fc1/b/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/mlp_fc1/b/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/mlp_fc1/w/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/mlp_fc1/w/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/state_value/fully_connected/biases/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/state_value/fully_connected/biases/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/state_value/fully_connected/weights/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/state_value/fully_connected/weights/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/state_value/fully_connected_1/biases/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/state_value/fully_connected_1/biases/Adam_1/Assign\"\n  input: \"^deepq/deepq/q_func/state_value/fully_connected_1/weights/Adam/Assign\"\n  input: \"^deepq/deepq/q_func/state_value/fully_connected_1/weights/Adam_1/Assign\"\n  input: \"^deepq/eps/Assign\"\n  input: \"^deepq/q_func/action_value/fully_connected/biases/Assign\"\n  input: \"^deepq/q_func/action_value/fully_connected/weights/Assign\"\n  input: \"^deepq/q_func/action_value/fully_connected_1/biases/Assign\"\n  input: \"^deepq/q_func/action_value/fully_connected_1/weights/Assign\"\n  input: \"^deepq/q_func/mlp_fc0/b/Assign\"\n  input: \"^deepq/q_func/mlp_fc0/w/Assign\"\n  input: \"^deepq/q_func/mlp_fc1/b/Assign\"\n  input: \"^deepq/q_func/mlp_fc1/w/Assign\"\n  input: \"^deepq/q_func/state_value/fully_connected/biases/Assign\"\n  input: \"^deepq/q_func/state_value/fully_connected/weights/Assign\"\n  input: \"^deepq/q_func/state_value/fully_connected_1/biases/Assign\"\n  input: \"^deepq/q_func/state_value/fully_connected_1/weights/Assign\"\n  input: \"^deepq/target_q_func/action_value/fully_connected/biases/Assign\"\n  input: \"^deepq/target_q_func/action_value/fully_connected/weights/Assign\"\n  input: \"^deepq/target_q_func/action_value/fully_connected_1/biases/Assign\"\n  input: \"^deepq/target_q_func/action_value/fully_connected_1/weights/Assign\"\n  input: \"^deepq/target_q_func/mlp_fc0/b/Assign\"\n  input: \"^deepq/target_q_func/mlp_fc0/w/Assign\"\n  input: \"^deepq/target_q_func/mlp_fc1/b/Assign\"\n  input: \"^deepq/target_q_func/mlp_fc1/w/Assign\"\n  input: \"^deepq/target_q_func/state_value/fully_connected/biases/Assign\"\n  input: \"^deepq/target_q_func/state_value/fully_connected/weights/Assign\"\n  input: \"^deepq/target_q_func/state_value/fully_connected_1/biases/Assign\"\n  input: \"^deepq/target_q_func/state_value/fully_connected_1/weights/Assign\"\n  input: \"^deepq_1/beta1_power/Assign\"\n  input: \"^deepq_1/beta2_power/Assign\"\n}\nnode {\n  name: \"init_2\"\n  op: \"NoOp\"\n}\nnode {\n  name: \"save/filename/input\"\n  op: \"Const\"\n  attr {\n    key: \"dtype\"\n    value {\n      type: DT_STRING\n    }\n  }\n  attr {\n    key: \"value\"\n    value {\n      tensor {\n        dtype: DT_STRING\n        tensor_shape {\n        }\n        string_val: \"model\"\n      }\n    }\n  }\n}\nnode {\n  name: \"save/filename\"\n  op: \"PlaceholderWithDefault\"\n  input: \"save/filename/input\"\n  attr {\n    key: \"dtype\"\n    value {\n      type: DT_STRING\n    }\n  }\n  attr {\n    key: \"shape\"\n    value {\n      shape {\n      }\n    }\n  }\n}\nnode {\n  name: \"save/Const\"\n  op: \"PlaceholderWithDefault\"\n  input: \"save/filename\"\n  attr {\n    key: \"dtype\"\n    value {\n      type: DT_STRING\n    }\n  }\n  attr {\n    key: \"shape\"\n    value {\n      shape {\n      }\n    }\n  }\n}\nnode {\n  name: \"save/SaveV2/tensor_names\"\n  op: \"Const\"\n  attr {\n    key: \"dtype\"\n    value {\n      type: DT_STRING\n    }\n  }\n  attr {\n    key: \"value\"\n    value {\n      tensor {\n        dtype: DT_STRING\n        tensor_shape {\n          dim {\n            size: 51\n          }\n        }\n        string_val: \"deepq/deepq/q_func/action_value/fully_connected/biases/Adam\"\n        string_val: \"deepq/deepq/q_func/action_value/fully_connected/biases/Adam_1\"\n        string_val: \"deepq/deepq/q_func/action_value/fully_connected/weights/Adam\"\n        string_val: \"deepq/deepq/q_func/action_value/fully_connected/weights/Adam_1\"\n        string_val: \"deepq/deepq/q_func/action_value/fully_connected_1/biases/Adam\"\n        string_val: \"deepq/deepq/q_func/action_value/fully_connected_1/biases/Adam_1\"\n        string_val: \"deepq/deepq/q_func/action_value/fully_connected_1/weights/Adam\"\n        string_val: \"deepq/deepq/q_func/action_value/fully_connected_1/weights/Adam_1\"\n        string_val: \"deepq/deepq/q_func/mlp_fc0/b/Adam\"\n        string_val: \"deepq/deepq/q_func/mlp_fc0/b/Adam_1\"\n        string_val: \"deepq/deepq/q_func/mlp_fc0/w/Adam\"\n        string_val: \"deepq/deepq/q_func/mlp_fc0/w/Adam_1\"\n        string_val: \"deepq/deepq/q_func/mlp_fc1/b/Adam\"\n        string_val: \"deepq/deepq/q_func/mlp_fc1/b/Adam_1\"\n        string_val: \"deepq/deepq/q_func/mlp_fc1/w/Adam\"\n        string_val: \"deepq/deepq/q_func/mlp_fc1/w/Adam_1\"\n        string_val: \"deepq/deepq/q_func/state_value/fully_connected/biases/Adam\"\n        string_val: \"deepq/deepq/q_func/state_value/fully_connected/biases/Adam_1\"\n        string_val: \"deepq/deepq/q_func/state_value/fully_connected/weights/Adam\"\n        string_val: \"deepq/deepq/q_func/state_value/fully_connected/weights/Adam_1\"\n        string_val: \"deepq/deepq/q_func/state_value/fully_connected_1/biases/Adam\"\n        string_val: \"deepq/deepq/q_func/state_value/fully_connected_1/biases/Adam_1\"\n        string_val: \"deepq/deepq/q_func/state_value/fully_connected_1/weights/Adam\"\n        string_val: \"deepq/deepq/q_func/state_value/fully_connected_1/weights/Adam_1\"\n        string_val: \"deepq/eps\"\n        string_val: \"deepq/q_func/action_value/fully_connected/biases\"\n        string_val: \"deepq/q_func/action_value/fully_connected/weights\"\n        string_val: \"deepq/q_func/action_value/fully_connected_1/biases\"\n        string_val: \"deepq/q_func/action_value/fully_connected_1/weights\"\n        string_val: \"deepq/q_func/mlp_fc0/b\"\n        string_val: \"deepq/q_func/mlp_fc0/w\"\n        string_val: \"deepq/q_func/mlp_fc1/b\"\n        string_val: \"deepq/q_func/mlp_fc1/w\"\n        string_val: \"deepq/q_func/state_value/fully_connected/biases\"\n        string_val: \"deepq/q_func/state_value/fully_connected/weights\"\n        string_val: \"deepq/q_func/state_value/fully_connected_1/biases\"\n        string_val: \"deepq/q_func/state_value/fully_connected_1/weights\"\n        string_val: \"deepq/target_q_func/action_value/fully_connected/biases\"\n        string_val: \"deepq/target_q_func/action_value/fully_connected/weights\"\n        string_val: \"deepq/target_q_func/action_value/fully_connected_1/biases\"\n        string_val: \"deepq/target_q_func/action_value/fully_connected_1/weights\"\n        string_val: \"deepq/target_q_func/mlp_fc0/b\"\n        string_val: \"deepq/target_q_func/mlp_fc0/w\"\n        string_val: \"deepq/target_q_func/mlp_fc1/b\"\n        string_val: \"deepq/target_q_func/mlp_fc1/w\"\n        string_val: \"deepq/target_q_func/state_value/fully_connected/biases\"\n        string_val: \"deepq/target_q_func/state_value/fully_connected/weights\"\n        string_val: \"deepq/target_q_func/state_value/fully_connected_1/biases\"\n        string_val: \"deepq/target_q_func/state_value/fully_connected_1/weights\"\n        string_val: \"deepq_1/beta1_power\"\n        string_val: \"deepq_1/beta2_power\"\n      }\n    }\n  }\n}\nnode {\n  name: \"save/SaveV2/shape_and_slices\"\n  op: \"Const\"\n  attr {\n    key: \"dtype\"\n    value {\n      type: DT_STRING\n    }\n  }\n  attr {\n    key: \"value\"\n    value {\n      tensor {\n        dtype: DT_STRING\n        tensor_shape {\n          dim {\n            size: 51\n          }\n        }\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n        string_val: \"\"\n      }\n    }\n  }\n}\n\n:\n:\nnode {\n  name: \"save/restore_all\"\n  op: \"NoOp\"\n  input: \"^save/Assign\"\n  input: \"^save/Assign_1\"\n  input: \"^save/Assign_10\"\n  input: \"^save/Assign_11\"\n  input: \"^save/Assign_12\"\n  input: \"^save/Assign_13\"\n  input: \"^save/Assign_14\"\n  input: \"^save/Assign_15\"\n  input: \"^save/Assign_16\"\n  input: \"^save/Assign_17\"\n  input: \"^save/Assign_18\"\n  input: \"^save/Assign_19\"\n  input: \"^save/Assign_2\"\n  input: \"^save/Assign_20\"\n  input: \"^save/Assign_21\"\n  input: \"^save/Assign_22\"\n  input: \"^save/Assign_23\"\n  input: \"^save/Assign_24\"\n  input: \"^save/Assign_25\"\n  input: \"^save/Assign_26\"\n  input: \"^save/Assign_27\"\n  input: \"^save/Assign_28\"\n  input: \"^save/Assign_29\"\n  input: \"^save/Assign_3\"\n  input: \"^save/Assign_30\"\n  input: \"^save/Assign_31\"\n  input: \"^save/Assign_32\"\n  input: \"^save/Assign_33\"\n  input: \"^save/Assign_34\"\n  input: \"^save/Assign_35\"\n  input: \"^save/Assign_36\"\n  input: \"^save/Assign_37\"\n  input: \"^save/Assign_38\"\n  input: \"^save/Assign_39\"\n  input: \"^save/Assign_4\"\n  input: \"^save/Assign_40\"\n  input: \"^save/Assign_41\"\n  input: \"^save/Assign_42\"\n  input: \"^save/Assign_43\"\n  input: \"^save/Assign_44\"\n  input: \"^save/Assign_45\"\n  input: \"^save/Assign_46\"\n  input: \"^save/Assign_47\"\n  input: \"^save/Assign_48\"\n  input: \"^save/Assign_49\"\n  input: \"^save/Assign_5\"\n  input: \"^save/Assign_50\"\n  input: \"^save/Assign_6\"\n  input: \"^save/Assign_7\"\n  input: \"^save/Assign_8\"\n  input: \"^save/Assign_9\"\n}\nversions {\n  producer: 27\n}\n</code></pre>\n"}, {"tags": ["python", "numpy", "array-broadcasting"], "answers": [{"comments": [{"owner": {"reputation": 367, "user_id": 10756424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/89B0G.jpg?s=128&g=1", "display_name": "Wunderbar", "link": "https://stackoverflow.com/users/10756424/wunderbar"}, "edited": false, "score": 0, "creation_date": 1557961868, "post_id": 56158640, "comment_id": 98946179, "body": "Thanks, I am aware of <code>numba</code> as well. Nonetheless, I was hoping to find something more generic like function wrapper, which I can just put a decorator to those function."}, {"owner": {"reputation": 367, "user_id": 10756424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/89B0G.jpg?s=128&g=1", "display_name": "Wunderbar", "link": "https://stackoverflow.com/users/10756424/wunderbar"}, "edited": false, "score": 0, "creation_date": 1557963513, "post_id": 56158640, "comment_id": 98946472, "body": "and a mind reminder: <code>np.full(shape, val)</code> takes shape first"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 367, "user_id": 10756424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/89B0G.jpg?s=128&g=1", "display_name": "Wunderbar", "link": "https://stackoverflow.com/users/10756424/wunderbar"}, "edited": false, "score": 0, "creation_date": 1557963958, "post_id": 56158640, "comment_id": 98946559, "body": "Whoops, that was indeed the wrong argument order. Fixed."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1557963931, "last_edit_date": 1557963931, "creation_date": 1557960736, "answer_id": 56158640, "question_id": 56158426, "link": "https://stackoverflow.com/questions/56158426/how-to-force-a-function-to-broadcast-without-invoking-np-vectorize/56158640#56158640", "title": "How to force a function to broadcast without invoking `np.vectorize`", "body": "<p>If there was a better way to make arbitrary Python functions broadcast, <code>numpy.vectorize</code> would use it. You really have to write the function with broadcasting in mind if you want it to broadcast efficiently.</p>\n\n<p>In the particular case of a constant function, you can write a broadcasting constant function using <code>numpy.full</code>:</p>\n\n<pre><code>def f(x):\n    return numpy.full(numpy.shape(x), 5)\n</code></pre>\n\n<p><a href=\"https://numba.pydata.org/numba-doc/dev/user/vectorize.html\" rel=\"nofollow noreferrer\"><code>numba.vectorize</code></a> can also vectorize functions more effectively than <code>numpy.vectorize</code>, but you need Numba, and you need to write your function in a way that Numba can compile efficiently.</p>\n"}, {"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1557964027, "post_id": 56158983, "comment_id": 98946571, "body": "<code>full_like(arr, val)</code> takes the dtype from <code>arr</code> instead of <code>val</code>, though."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1558033258, "post_id": 56158983, "comment_id": 98976656, "body": "The <code>broadcast_arrays</code> approach creates a read-only view of <code>numpy.asarray(f(x))</code> where every cell of the view aliases the same cell of the underlying array. This is only okay if you don&#39;t need to modify either the result array or the underlying array. (The one where you stuck a <code>copy</code> call on the end doesn&#39;t have this problem.)"}], "tags": [], "owner": {"reputation": 367, "user_id": 10756424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/89B0G.jpg?s=128&g=1", "display_name": "Wunderbar", "link": "https://stackoverflow.com/users/10756424/wunderbar"}, "is_accepted": false, "score": 0, "last_activity_date": 1558032562, "last_edit_date": 1558032562, "creation_date": 1557963721, "answer_id": 56158983, "question_id": 56158426, "link": "https://stackoverflow.com/questions/56158426/how-to-force-a-function-to-broadcast-without-invoking-np-vectorize/56158983#56158983", "title": "How to force a function to broadcast without invoking `np.vectorize`", "body": "<p>For those who can live without generic answer, the best answer would be <code>np.full_like(arr, val)</code> which improves by about 20% than <code>np.full(arr.shape, val)</code></p>\n\n<p>And after raising this <a href=\"https://github.com/numpy/numpy/issues/13577\" rel=\"nofollow noreferrer\">issue</a> to author, I found some best middle ground which achieves both generality while perform rather well:</p>\n\n<p><code>np.broadcast_arrays(x, f(x))[1]</code></p>\n\n<p>and here are some time analysis:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>arr = np.arange(1, 2, 0.0001).reshape(10, -1)\n\ndef master_f(x): return np.broadcast_arrays(x, f(x))[-1].copy('K')\ndef master_f_nocopy(x): return np.broadcast_arrays(x, f(x))[-1]\ndef vector_f(x): return np.vectorize(f)(x)\n\n%timeit arr+1 # this takes about 10microsec\n%timeit master_f(arr) # this takes about 40 mircrosec\n%timeit master_f_nocopy(arr) # this takes about 20 microsec\n</code></pre>\n\n<p>Note this allows one to apply to projection functions such as <code>f(x,y):=y</code>, which is beyond the help of <code>np.full_like</code>. </p>\n\n<p>Moreover, when it comes more complicated function like <code>np.sin</code> and <code>np.cos</code> you'll notice the difference between <code>f(arr)</code> and <code>master_f_nocopy(arr)</code> is almost negligible.</p>\n"}], "owner": {"reputation": 367, "user_id": 10756424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/89B0G.jpg?s=128&g=1", "display_name": "Wunderbar", "link": "https://stackoverflow.com/users/10756424/wunderbar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 1, "accepted_answer_id": 56158640, "answer_count": 2, "score": 3, "last_activity_date": 1569953169, "creation_date": 1557959067, "last_edit_date": 1569953169, "question_id": 56158426, "link": "https://stackoverflow.com/questions/56158426/how-to-force-a-function-to-broadcast-without-invoking-np-vectorize", "title": "How to force a function to broadcast without invoking `np.vectorize`", "body": "<p>I want to look for a way to force a function to broadcast.</p>\n\n<p>There are scenarios in which the function/method may be overwritten in a later instance, to constant function. In such case if</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>arr = np.arange(0, 1, 0.0001)\nf = lambda x: 5\nf(arr) # this gives just integer 5, i want [5, 5,..., 5]\n</code></pre>\n\n<p>I am aware of methods like <code>np.vectorize</code> which force the function to broadcast, but the problem is this is inefficient, as it is essentially for loop under the hood. (see <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.vectorize.html#numpy.vectorize\" rel=\"nofollow noreferrer\">documentation</a>)</p>\n\n<p>We can also use factory methods like <code>np.frompyfunc</code> which allows us to transform python function to numpy universal function <code>ufunc</code> See <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.frompyfunc.html#numpy.frompyfunc\" rel=\"nofollow noreferrer\">here</a> for instance. This outperformed <code>np.vectorize</code>, but still is way less efficient than builtin <code>ufunc</code> methods.</p>\n\n<p>I was wondering if there is any efficient numpy way of handling this, namely to force the function to broadcast?</p>\n"}, {"tags": ["python", "spotify", "spotipy"], "comments": [{"owner": {"reputation": 507, "user_id": 6446489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed68268d4de0bb9904dc1b61f77353b5?s=128&d=identicon&r=PG&f=1", "display_name": "Triggernometry", "link": "https://stackoverflow.com/users/6446489/triggernometry"}, "edited": false, "score": 0, "creation_date": 1557959645, "post_id": 56158371, "comment_id": 98945735, "body": "Please consider <a href=\"https://stackoverflow.com/posts/56156959/edit\">editing your question</a> to provide a <a href=\"https://stackoverflow.com/help/reprex\">Minimal, Complete, and Verifiable example</a>. Currently, we can&#39;t reproduce your issue because we don&#39;t have code which will run and produce the error you&#39;ve shown."}, {"owner": {"reputation": 15, "user_id": 9841370, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UYgeo8Hg7kI/AAAAAAAAAAI/AAAAAAAAAGQ/1yef8rKnVzs/photo.jpg?sz=128", "display_name": "Season5Ryze", "link": "https://stackoverflow.com/users/9841370/season5ryze"}, "reply_to_user": {"reputation": 507, "user_id": 6446489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed68268d4de0bb9904dc1b61f77353b5?s=128&d=identicon&r=PG&f=1", "display_name": "Triggernometry", "link": "https://stackoverflow.com/users/6446489/triggernometry"}, "edited": false, "score": 0, "creation_date": 1557961878, "post_id": 56158371, "comment_id": 98946183, "body": "I put in the authorization call and the playlist call, what more is necessary?"}, {"owner": {"reputation": 798, "user_id": 10307576, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0ulRB.gif?s=128&g=1", "display_name": "Bugbeeb", "link": "https://stackoverflow.com/users/10307576/bugbeeb"}, "edited": false, "score": 0, "creation_date": 1557962902, "post_id": 56158371, "comment_id": 98946344, "body": "have you tried running these suggested functions from the spotipy.oauth2.SpotifyOAuth module? <code>get_access_token(code)</code>, <code>get_authorize_url(state=None, show_dialog=False)</code>,<code>is_token_expired(token_info)</code>"}, {"owner": {"reputation": 15, "user_id": 9841370, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UYgeo8Hg7kI/AAAAAAAAAAI/AAAAAAAAAGQ/1yef8rKnVzs/photo.jpg?sz=128", "display_name": "Season5Ryze", "link": "https://stackoverflow.com/users/9841370/season5ryze"}, "edited": false, "score": 0, "creation_date": 1557963900, "post_id": 56158371, "comment_id": 98946549, "body": "Will try this out, thank you."}, {"owner": {"reputation": 15, "user_id": 9841370, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UYgeo8Hg7kI/AAAAAAAAAAI/AAAAAAAAAGQ/1yef8rKnVzs/photo.jpg?sz=128", "display_name": "Season5Ryze", "link": "https://stackoverflow.com/users/9841370/season5ryze"}, "edited": false, "score": 0, "creation_date": 1557969936, "post_id": 56158371, "comment_id": 98947509, "body": "So I&#39;ve noticed that no matter what <code>python good_playlist = sp.user_playlist(username, playlist_id=good)</code> always works and <code>python bad_playlist = sp.user_playlist(username, playlist_id=bad) </code> never works, I&#39;m at a loss here."}, {"owner": {"reputation": 1664, "user_id": 8648876, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7f1oU.jpg?s=128&g=1", "display_name": "Rach Sharp", "link": "https://stackoverflow.com/users/8648876/rach-sharp"}, "edited": false, "score": 0, "creation_date": 1558012331, "post_id": 56158371, "comment_id": 98965371, "body": "You could try swapping the order of the calls to see if that makes a difference"}, {"owner": {"reputation": 1664, "user_id": 8648876, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7f1oU.jpg?s=128&g=1", "display_name": "Rach Sharp", "link": "https://stackoverflow.com/users/8648876/rach-sharp"}, "edited": false, "score": 0, "creation_date": 1558012410, "post_id": 56158371, "comment_id": 98965417, "body": "Also you don&#39;t need to provide both <code>auth</code> and <code>client_credentials_manager</code> to the <code>Spotify</code> class, one of these will suffice. It&#39;s defaulting to just use your <code>auth</code> at the moment."}, {"owner": {"reputation": 15, "user_id": 9841370, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UYgeo8Hg7kI/AAAAAAAAAAI/AAAAAAAAAGQ/1yef8rKnVzs/photo.jpg?sz=128", "display_name": "Season5Ryze", "link": "https://stackoverflow.com/users/9841370/season5ryze"}, "edited": false, "score": 0, "creation_date": 1558025979, "post_id": 56158371, "comment_id": 98973212, "body": "I fixed it sort of, I used a normal auth and instead of calling <code>python sp.user_playlist()</code>, called <code>python sp.user_playlist_tracks()</code>"}], "owner": {"reputation": 15, "user_id": 9841370, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UYgeo8Hg7kI/AAAAAAAAAAI/AAAAAAAAAGQ/1yef8rKnVzs/photo.jpg?sz=128", "display_name": "Season5Ryze", "link": "https://stackoverflow.com/users/9841370/season5ryze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 212, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1558031998, "creation_date": 1557958680, "last_edit_date": 1558031998, "question_id": 56158371, "link": "https://stackoverflow.com/questions/56158371/spotipy-user-playlist-throws-error-bad-request-with-more-than-one-request", "title": "Spotipy.User_playlist throws Error: Bad Request with more than one request", "body": "<p>I am trying to get two of my playlists using Spotipy. I am using the spotipy.user_playlist() method. It currently works for one playlist, yet whenever I try a second one, I get an error. Both Spotify URI's are valid, and as I mentioned before, I get the first playlist perfectly fine. Here are the playlist URI's:</p>\n\n<pre><code>spotify:user:22tu7wr2adbylfh3n7jns7oga:playlist:7G8WJOoHzdwj81qzRDwAnO\nspotify:user:22tu7wr2adbylfh3n7jns7oga:playlist:4yxnkgxG3CHayD4wACjb2y\n</code></pre>\n\n<p>I have tried creating a second authorization call with 2 different authorized apps, I have used different playlists from different users, I have also tried all the authorization methods I could find to no avail.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import spotipy\nimport spotipy.util as util\nfrom spotipy.oauth2 import SpotifyClientCredentials\nimport spotipy.oauth2 as oauth2\ncid =\"****\" \nsecret = \"****\"\nusername = \"2tu7wr2adbylfh3n7jns7oga\"\nclient_credentials_manager = SpotifyClientCredentials(client_id=cid, client_secret=secret) \nscope = 'user-library-read playlist-read-private'\ntoken = util.prompt_for_user_token(username, scope, client_id=cid, client_secret=secret, redirect_uri='http://localhost/callback')\nsp = spotipy.Spotify(auth=token, client_credentials_manager=client_credentials_manager)\nif token:\n    good = \"4yxnkgxG3CHayD4wACjb2y\"\n    bad = \"7G8WJOoHzdwj81qzRDwAnO\"\n    good_playlist = sp.user_playlist(username, playlist_id=good)\n    bad_playlist = sp.user_playlist(username, playlist_id=bad)\nelse:\n    print(\"Can't get token for\", username)\n</code></pre>\n\n<p>This produces the error:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>HTTPError                                 Traceback (most recent call last)\n~/anaconda3/lib/python3.7/site-packages/spotipy/client.py in _internal_call(self, method, url, payload, params)\n    118         try:\n--&gt; 119             r.raise_for_status()\n    120         except:\n\n~/anaconda3/lib/python3.7/site-packages/requests/models.py in raise_for_status(self)\n    939         if http_error_msg:\n--&gt; 940             raise HTTPError(http_error_msg, response=self)\n    941 \n\nHTTPError: 400 Client Error: Bad Request for url: https://api.spotify.com/v1/users/2tu7wr2adbylfh3n7jns7oga/playlists/7G8WJOoHzdwj81qzRDwAnO\n\nDuring handling of the above exception, another exception occurred:\n\nSpotifyException                          Traceback (most recent call last)\n&lt;ipython-input-7-b0cbbe8e4d4f&gt; in &lt;module&gt;\n     10     bad = \"7G8WJOoHzdwj81qzRDwAnO\"\n     11     good_playlist = sp.user_playlist(username, playlist_id=good)\n---&gt; 12     bad_playlist = sp.user_playlist(username, playlist_id=bad)\n     13 else:\n     14     print(\"Can't get token for\", username)\n\n~/anaconda3/lib/python3.7/site-packages/spotipy/client.py in user_playlist(self, user, playlist_id, fields)\n    376             return self._get(\"users/%s/starred\" % (user), fields=fields)\n    377         plid = self._get_id('playlist', playlist_id)\n--&gt; 378         return self._get(\"users/%s/playlists/%s\" % (user, plid), fields=fields)\n    379 \n    380     def user_playlist_tracks(self, user, playlist_id=None, fields=None,\n\n~/anaconda3/lib/python3.7/site-packages/spotipy/client.py in _get(self, url, args, payload, **kwargs)\n    144         while retries &gt; 0:\n    145             try:\n--&gt; 146                 return self._internal_call('GET', url, payload, kwargs)\n    147             except SpotifyException as e:\n    148                 retries -= 1\n\n~/anaconda3/lib/python3.7/site-packages/spotipy/client.py in _internal_call(self, method, url, payload, params)\n    122                 raise SpotifyException(r.status_code,\n    123                     -1, '%s:\\n %s' % (r.url, r.json()['error']['message']),\n--&gt; 124                     headers=r.headers)\n    125             else:\n    126                 raise SpotifyException(r.status_code,\n\nSpotifyException: http status: 400, code:-1 - https://api.spotify.com/v1/users/2tu7wr2adbylfh3n7jns7oga/playlists/7G8WJOoHzdwj81qzRDwAnO:\n Bad request\n</code></pre>\n\n<p>When I go to the link, it says:</p>\n\n<pre><code>{\n  \"error\": {\n    \"status\": 401,\n    \"message\": \"No token provided\"\n  }\n}\n</code></pre>\n\n<p>Yet, I have a token from the authorization. I am very confused. If this is a duplicate post please let me know, I couldn't find the solution anywhere else.</p>\n\n<p>Edit: I used the function <code>python sp.user_playlist_tracks()</code> instead, and now it works for both playlists.</p>\n"}, {"tags": ["python", "excel", "python-3.x"], "comments": [{"owner": {"reputation": 71, "user_id": 8963846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f0ffeeb4c9565784265bb617867330a?s=128&d=identicon&r=PG&f=1", "display_name": "Mazin", "link": "https://stackoverflow.com/users/8963846/mazin"}, "edited": false, "score": 0, "creation_date": 1558055852, "post_id": 56158355, "comment_id": 98983072, "body": "my attempt  [import pandas as pd df_sheet_map=pd.read_excel(&quot;H:/SLM_Final/SLM Indicator template Main to clean.xlsx&quot;,sheet_name=None) df_sheet_map[&#39;SLM By DHB&#39;] result1=df_sheet_map[&#39;SLM By DHB&#39;].T.drop_duplicates().T df_sheet_map[&#39;&gt; Acute Hospital Bed SLM&#39;] result2=df_sheet_map[&#39;&gt; Acute Hospital Bed SLM&#39;].T.drop_duplicates().T and then save.  I have over 100 sheets to do the same, please help Mazin"}, {"owner": {"reputation": 71, "user_id": 8963846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f0ffeeb4c9565784265bb617867330a?s=128&d=identicon&r=PG&f=1", "display_name": "Mazin", "link": "https://stackoverflow.com/users/8963846/mazin"}, "edited": false, "score": 0, "creation_date": 1561494443, "post_id": 56158355, "comment_id": 100080483, "body": "Hi, my answer is working fine.  However, any improvement would be appreciated. I am looking to a function that incorporate delete duplicates in python rather than using VB."}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 8963846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f0ffeeb4c9565784265bb617867330a?s=128&d=identicon&r=PG&f=1", "display_name": "Mazin", "link": "https://stackoverflow.com/users/8963846/mazin"}, "is_accepted": false, "score": 0, "last_activity_date": 1561419207, "last_edit_date": 1561419207, "creation_date": 1561416197, "answer_id": 56744817, "question_id": 56158355, "link": "https://stackoverflow.com/questions/56158355/how-to-delete-duplicate-columns-in-multiple-excel-sheets-of-one-workbook/56744817#56744817", "title": "How to delete duplicate columns in multiple Excel sheets of one workbook?", "body": "<pre class=\"lang-vb prettyprint-override\"><code>#Transpose all sheets in a workbook.  then delete duplicates. then Transpose back to original file and save all sheets\n#Transpose all sheets in the workbook file\n\n    import pyexcel\n    import pyexcel_xlsx as pe\n    from pyexcel_xlsx import get_data\n\n    book = pyexcel.get_book(file_name=\"H:/SLM_Final/SLM Indicator template Main to clean.xlsx\")\n    for sheet in book:\n        sheet.transpose()\n        pass\n    book.save_as(\"H:/SLM_Final/SLM Indicator template Main to clean.xlsx\")\n\n#run excel VB from python\n\n    import win32com.client as win32\n    import time\n    xl = win32.Dispatch('Excel.Application')\n    xl.Visible = 0\n    ss = xl.Workbooks.Open('H:/SLM_Final/DeleteDup.xlsm')\n    xl.Run(\"deleteDuplicate\") \n    time.sleep(30)\n    xl.Quit() \n    time.sleep(30)\n\n#VB syntax to add on excel workbook\n'''Sub deleteDuplicate()\n\n    Dim ws As Worksheet\n    Dim wkbk1 As Workbook\n    Dim w As Long\n    Dim lRow As Long\n    Dim iCntr As Long\n    Set wkbk1 = Workbooks.Open(\"H:/SLM_Final/SLM Indicator template Main to clean.xlsx\")\n    'Set wkbk1 = ThisWorkbook\n\n    wkbk1.Activate\n\n    With wkbk1\n\n        For w = 1 To .Worksheets.Count\n\n            With Worksheets(w)\n\n                .UsedRange.RemoveDuplicates Columns:=Array(3, 4), Header:=xlYes\n\n            End With\n\n        Next w\n\n    End With\nwkbk1.Save\nwkbk1.Close\nEnd Sub''''\n\n#\n#Transpose files back to the original shape\n\n    import pyexcel\n    import pyexcel_xlsx as pe\n    from pyexcel_xlsx import get_data\n\n    book = pyexcel.get_book(file_name=\"H:/SLM_Final/SLM Indicator template Main to clean.xlsx\")\n    for sheet in book:\n        sheet.transpose()\n        #sheet.delete_duplicates(keep=False, inplace=False)\n        pass\n    book.save_as(\"H:/SLM_Final/SLM Indicator template Main to clean.xlsx\")\n</code></pre>\n\n<p>I hope this will help.</p>\n"}], "owner": {"reputation": 71, "user_id": 8963846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f0ffeeb4c9565784265bb617867330a?s=128&d=identicon&r=PG&f=1", "display_name": "Mazin", "link": "https://stackoverflow.com/users/8963846/mazin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 190, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1561448541, "creation_date": 1557958553, "last_edit_date": 1561448541, "question_id": 56158355, "link": "https://stackoverflow.com/questions/56158355/how-to-delete-duplicate-columns-in-multiple-excel-sheets-of-one-workbook", "title": "How to delete duplicate columns in multiple Excel sheets of one workbook?", "body": "<p>I have multiple sheets in one Excel workbook with duplicated columns in each sheet. I need to delete the duplicates and to leave the original columns only.  </p>\n\n<p>I know how to drop duplicates within a sheet.</p>\n\n<pre><code>df_sheet_map['&gt; Acute Hospital Bed SLM']\nresult2=df_sheet_map['&gt; Acute Hospital Bed SLM'].T.drop_duplicates().T\n\ndfList = []\npath = 'J:/TestDup' \nnewpath = 'J:/TestDup/Test2'\n\nfor fn in os.listdir(path):\n    file = os.path.join(path, fn)\n    if os.path.isfile(file): \n        # Import the excel file and call it xlsx_file \n        xlsx_file = pd.ExcelFile(file) \n        # View the excel files sheet names \n        xlsx_file.sheet_names \n        # Load the xlsx files Data sheet as a dataframe \n        df = xlsx_file.parse('Sheet1',header= None) \n        df_NoHeader = df[2:] \n        data = df_NoHeader \n        # Save individual dataframe\n        data.to_excel(os.path.join(newpath, fn))\n\n        dfList.append(data) \n\nappended_data = pd.concat(dfList)\nappended_data.to_excel(os.path.join(newpath, 'master_data.xlsx'))\n</code></pre>\n\n<p>The above code is working. However, I need to traverse all sheets. Further, it shows to delete first two rows, I need to change to delete duplicates.</p>\n"}, {"tags": ["python", "celery", "django-celery"], "owner": {"reputation": 161, "user_id": 11506637, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rGup7JCP9yU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcY0OrC33toPO8YZsltL1UJLQU5Jyg/mo/photo.jpg?sz=128", "display_name": "Extranomical", "link": "https://stackoverflow.com/users/11506637/extranomical"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1557958207, "creation_date": 1557958207, "question_id": 56158306, "link": "https://stackoverflow.com/questions/56158306/how-do-you-create-a-new-celery-queue-for-a-periodic-task-for-a-django-applicatio", "title": "How do you create a new celery queue for a periodic task for a django application?", "body": "<p>I need to create a periodic task that will run every five minutes to check an azure service bus for new messages.  Every time it runs, I would like the worker process to remain active for five minutes, whether there are new messages waiting or not.  I need to specify a new queue for these tasks as well.  </p>\n\n<p>In a django project with celery installed, where do I configure this new queue and above mentioned configuration?</p>\n\n<p>I have created a new python file containing a class that inherits from PeriodicTask, passing the parameter run_every = 300 to run the task every 5 minutes. I would like to assign it to azure_queue, but don't know where to configure it</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def CheckForProfileUpdates(PeriodicTask)\n   run_every = 300\n\n   def run(self, queue_name='azure_queue'):\n        result = check_service_bus_for_profile_update()\n        if update_was_found(result):\n            update = json.loads(result.body)\n            #do business logic here\n</code></pre>\n\n<p>I would like these tasks to execute every 5 minutes, and each time, the worker must remain active throughout those five minutes, in a dedicated queue called 'azure_queue'.  Again, where do I specify these settings using django and celery?</p>\n"}, {"tags": ["python", "plotly", "networkx"], "comments": [{"owner": {"reputation": 61, "user_id": 5474875, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6shx.jpg?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5474875/ray"}, "edited": false, "score": 0, "creation_date": 1558365260, "post_id": 56158283, "comment_id": 99068216, "body": "I also report this on GitHub community of <code>plotly</code> (<a href=\"https://github.com/plotly/plotly.py/issues/1566\" rel=\"nofollow noreferrer\">link</a>), it seems this is an issue about <code>matplotlib</code> now."}], "owner": {"reputation": 61, "user_id": 5474875, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6shx.jpg?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5474875/ray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1557958083, "creation_date": 1557958083, "question_id": 56158283, "link": "https://stackoverflow.com/questions/56158283/why-i-cannot-plot-edges-of-networkx-in-iplot-mpl-method-of-plotly", "title": "Why I cannot plot edges of networkx in iplot_mpl() method of plotly", "body": "<p>I am trying to plot a graph using <code>networkx</code> library. Additionally, I want to plot it as an interactive figure by <code>plotly</code> in <code>Jypyter</code>, so firstly I modified the <a href=\"https://networkx.github.io/documentation/networkx-2.2/auto_examples/drawing/plot_directed.html\" rel=\"nofollow noreferrer\">demo code</a> to draw a static graph using <code>networkx</code> (see the top one of the following figure), then I used <code>iplot_mpl()</code> method to convert the figure to an interactive figure via <code>plotly</code>. However, edges did not show in the graph (see the bottom one).</p>\n\n<p><a href=\"https://i.stack.imgur.com/PYCW1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PYCW1.png\" alt=\"net\"></a></p>\n\n<p>The code is the following,</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from __future__ import division\nimport matplotlib as mpl\nimport matplotlib.pyplot as plt\nimport networkx as nx\nfrom plotly.offline import (init_notebook_mode,\n                            iplot_mpl)\n\n\ninit_notebook_mode(connected=True)\n\nG = nx.generators.directed.random_k_out_graph(10, 3, 0.5)\npos = nx.layout.spring_layout(G)\n\nnode_sizes = [3 + 10 * i for i in range(len(G))]\nM = G.number_of_edges()\nedge_colors = range(2, M + 2)\nedge_alphas = [(5 + i) / (M + 4) for i in range(M)]\n\nfig = plt.figure()\n\nnodes = nx.draw_networkx_nodes(G, pos, node_size=node_sizes, node_color='blue')\nedges = nx.draw_networkx_edges(G, pos, node_size=node_sizes, arrowstyle='-&gt;',\n                               arrowsize=10, edge_color=edge_colors,\n                               edge_cmap=plt.cm.Blues, width=2)\n# for the top figure\nplt.show()\n\n# for the bottom figure\niplot_mpl(fig)\n</code></pre>\n\n<p>I also tried to use <code>draw_networkx()</code> insted of <code>draw_networkx_nodes()</code>and <code>draw_networkx_edges()</code>. Unfortunately, the edge still did not show. Moreover, I also set the <code>ax</code> parameter in <code>draw_networkx()</code> method, the result is the same...</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>fig, ax = plt.subplots()\nnx.draw_networkx(..., ax=ax)\n</code></pre>\n\n<p>Thanks in advance for your comments!</p>\n"}, {"tags": ["python", "heroku", "flask", "sqlalchemy"], "answers": [{"comments": [{"owner": {"reputation": 26209, "user_id": 1592380, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1b375c795476432e64d4433a651d2804?s=128&d=identicon&r=PG", "display_name": "user1592380", "link": "https://stackoverflow.com/users/1592380/user1592380"}, "edited": false, "score": 0, "creation_date": 1558120300, "post_id": 56158749, "comment_id": 99009250, "body": "Thank you very much! As you said, I normally go with postgres on heroku, but this project requires a read only data store."}, {"owner": {"reputation": 91789, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "reply_to_user": {"reputation": 26209, "user_id": 1592380, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1b375c795476432e64d4433a651d2804?s=128&d=identicon&r=PG", "display_name": "user1592380", "link": "https://stackoverflow.com/users/1592380/user1592380"}, "edited": false, "score": 0, "creation_date": 1558120489, "post_id": 56158749, "comment_id": 99009327, "body": "@user61629, nothing is stopping you from user Postgres as a read-only data store :-). You can even enforce it by <a href=\"https://devcenter.heroku.com/articles/heroku-postgresql-credentials#creating-a-new-credential\" rel=\"nofollow noreferrer\">provisioning new read-only credentials</a> or <a href=\"https://devcenter.heroku.com/articles/heroku-postgresql-credentials#managing-permissions\" rel=\"nofollow noreferrer\">changing existing credentials to read-only</a>."}, {"owner": {"reputation": 26209, "user_id": 1592380, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1b375c795476432e64d4433a651d2804?s=128&d=identicon&r=PG", "display_name": "user1592380", "link": "https://stackoverflow.com/users/1592380/user1592380"}, "edited": false, "score": 0, "creation_date": 1558122979, "post_id": 56158749, "comment_id": 99010278, "body": "Thanks, I will take a look."}], "tags": [], "owner": {"reputation": 91789, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "is_accepted": true, "score": 2, "last_activity_date": 1557962112, "last_edit_date": 1557962112, "creation_date": 1557961693, "answer_id": 56158749, "question_id": 56158266, "link": "https://stackoverflow.com/questions/56158266/sqlite3-operationalerror-no-such-table-on-heroku/56158749#56158749", "title": "sqlite3.OperationalError) no such table on Heroku", "body": "<p><a href=\"https://devcenter.heroku.com/articles/sqlite3\" rel=\"nofollow noreferrer\">You really shouldn't use SQLite on Heroku</a>. Its filesystem <a href=\"https://devcenter.heroku.com/articles/dynos#ephemeral-filesystem\" rel=\"nofollow noreferrer\">is ephemeral</a>. Any changes you make to files will be lost the next time your dyno restarts. This <a href=\"https://devcenter.heroku.com/articles/dynos#automatic-dyno-restarts\" rel=\"nofollow noreferrer\">happens frequently</a> (at least once per day).</p>\n\n<p>The original code did the right thing:</p>\n\n<pre><code>SQLALCHEMY_DATABASE_URI = os.environ.get('DATABASE_URL') or 'sqlite:///' + os.path.join(basedir, 'data.sqlite')\n</code></pre>\n\n<p>If the <code>DATABASE_URL</code> environment variable is set it will be used to connect to your database. Since <a href=\"https://github.com/hack4impact/flask-base/blob/159d963bcfa5d3060ed0a3923295545c48dc4f55/requirements.txt#L26\" rel=\"nofollow noreferrer\"><code>psycopg2</code> is in your <code>requirements.txt</code> file</a> Heroku should <a href=\"https://devcenter.heroku.com/articles/heroku-postgresql#provisioning-heroku-postgres\" rel=\"nofollow noreferrer\">automatically provision a PostgreSQL database</a> and set the <code>DATABASE_URL</code> variable to its connection string.</p>\n\n<p>If you really must use SQLite (and I <em>strongly</em> advise against that), treat it as read-only. You'll have to commit your database file on your local development machine and push that commit to Heroku. Even then it might not work properly. Heroku famously <a href=\"https://devcenter.heroku.com/articles/sqlite3#getting-a-sqlite-error-even-though-it-is-not-in-the-gemfile\" rel=\"nofollow noreferrer\">generates errors if Ruby users even try to install the <code>sqlite3</code> gem</a>.</p>\n"}], "owner": {"reputation": 26209, "user_id": 1592380, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1b375c795476432e64d4433a651d2804?s=128&d=identicon&r=PG", "display_name": "user1592380", "link": "https://stackoverflow.com/users/1592380/user1592380"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 705, "favorite_count": 0, "accepted_answer_id": 56158749, "answer_count": 1, "score": 0, "last_activity_date": 1557962112, "creation_date": 1557958005, "question_id": 56158266, "link": "https://stackoverflow.com/questions/56158266/sqlite3-operationalerror-no-such-table-on-heroku", "title": "sqlite3.OperationalError) no such table on Heroku", "body": "<p>I'm working with <a href=\"https://github.com/hack4impact/flask-base\" rel=\"nofollow noreferrer\">https://github.com/hack4impact/flask-base</a> (a flask boilerplate) as a basis for a project. The project runs as expected locally on windows.</p>\n\n<p>I don't need to make any db changes on the production version of my code, so for simplicity's sake, I've decided to use sqllite both locally and on heroku. With that in mind I changed the production class in <a href=\"https://github.com/hack4impact/flask-base/blob/master/config.py\" rel=\"nofollow noreferrer\">https://github.com/hack4impact/flask-base/blob/master/config.py</a> to :</p>\n\n<pre><code>class ProductionConfig(Config):\n    # SQLALCHEMY_DATABASE_URI = os.environ.get('DATABASE_URL') or 'sqlite:///' + os.path.join(basedir, 'data.sqlite')\n    SQLALCHEMY_DATABASE_URI = 'sqlite:///' + os.path.join(basedir, 'data-dev.sqlite')\n    print('IN PRODUCTION '+ SQLALCHEMY_DATABASE_URI)\n    SSL_DISABLE = (os.environ.get('SSL_DISABLE') or 'True') == 'True'\n</code></pre>\n\n<p>When I deploy the code and try to login I see a 500 error. The logs show:</p>\n\n<pre><code>2019-05-15T21:47:28.749283+00:00 app[web.1]:     raise value.with_traceback(tb)\n2019-05-15T21:47:28.749284+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/site-packages/sqlalchemy/engine/base.py\", line 1182, in _execute_context\n2019-05-15T21:47:28.749286+00:00 app[web.1]:     context)\n2019-05-15T21:47:28.749287+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/site-packages/sqlalchemy/engine/default.py\", line 470, in do_execute\n2019-05-15T21:47:28.749289+00:00 app[web.1]:     cursor.execute(statement, parameters)\n2019-05-15T21:47:28.749301+00:00 app[web.1]: sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: users [SQL: 'SELECT users.id AS users_id, users.confirmed AS users_confirmed, users.first_name AS users_first_name, users.last_name AS users_last_name, users.email AS users_email, users.password_hash AS users_password_hash, users.role_id AS users_role_id \\nFROM users \\nWHERE users.email = ?\\n LIMIT ? OFFSET ?'] [parameters: ('me@test.com', 1, 0)]\nDisconnected from log stream. There may be events happening that you do not see here! Attempting to reconnect...\n2019-05-15T21:47:28.749277+00:00 app[web.1]:     exc_info\n2019-05-15T21:47:28.749278+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/site-packages/sqlalchemy/util/compat.py\", line 203, in raise_from_cause\n2019-05-15T21:47:28.749280+00:00 app[web.1]:     reraise(type(exception), exception, tb=exc_tb, cause=cause)\n2019-05-15T21:47:28.749281+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/site-packages/sqlalchemy/util/compat.py\", line 186, in reraise\n2019-05-15T21:47:28.749283+00:00 app[web.1]:     raise value.with_traceback(tb)\n2019-05-15T21:47:28.749284+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/site-packages/sqlalchemy/engine/base.py\", line 1182, in _execute_context\n2019-05-15T21:47:28.749286+00:00 app[web.1]:     context)\n2019-05-15T21:47:28.749287+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/site-packages/sqlalchemy/engine/default.py\", line 470, in do_execute\n2019-05-15T21:47:28.749289+00:00 app[web.1]:     cursor.execute(statement, parameters)\n2019-05-15T21:47:28.749301+00:00 app[web.1]: sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: users [SQL: 'SELECT users.id AS users_id, users.confirmed AS users_confirmed, users.first_name AS users_first_name, users.last_name AS users_last_name, users.email AS users_email, users.password_hash AS users_password_hash, users.role_id AS users_role_id \\nFROM users \\nWHERE users.email = ?\\n LIMIT ? OFFSET ?'] [parameters: ('me@test.com', 1, 0)]\n</code></pre>\n\n<p>So it appears sqlalchemy can't find the table. I'm wondering if the line:</p>\n\n<pre><code>SQLALCHEMY_DATABASE_URI = 'sqlite:///' + os.path.join(basedir, 'data-dev.sqlite')\n</code></pre>\n\n<p>is then wrong way to access the flatfile db (data-dev.sqlite)</p>\n"}, {"tags": ["python", "graph", "hash", "isomorphism"], "comments": [{"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1557957825, "post_id": 56158185, "comment_id": 98945297, "body": "A google search turned up this paper that might be helpful: <a href=\"https://eprint.iacr.org/2012/352.pdf\" rel=\"nofollow noreferrer\">eprint.iacr.org/2012/352.pdf</a> (or it might be more information than you need for your current purposes)"}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1557957973, "post_id": 56158185, "comment_id": 98945330, "body": "And <a href=\"https://docs.lib.purdue.edu/cgi/viewcontent.cgi?article=1627&amp;context=ccpubs\" rel=\"nofollow noreferrer\">docs.lib.purdue.edu/cgi/&hellip;</a> seems to be a similar paper from same authors"}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1557968723, "post_id": 56158185, "comment_id": 98947335, "body": "If there are no collisions between inequivalent inputs, it\u2019s not hashing.  It\u2019s not canonicalization either if equivalent inputs do not reliably give equal outputs.  This is a sort of signature algorithm, and will be difficult/expensive in general (since graph isomorphism is, as far as is known)."}, {"owner": {"reputation": 794, "user_id": 10987015, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bwlrppuewu8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNSEJug0HtxzOxvBSi5AnoWbdb10A/mo/photo.jpg?sz=128", "display_name": "dome", "link": "https://stackoverflow.com/users/10987015/dome"}, "edited": false, "score": 0, "creation_date": 1558005916, "post_id": 56158185, "comment_id": 98961435, "body": "I know that actually it is not a hash even if I will call <code>hash</code> on the result. Anyway I think that what I&#39;m doing is a graph canonization. I&#39;m trying to find a canonical form that bring me exploring the tree always in the same way in order to generate the correct string identifier."}, {"owner": {"reputation": 794, "user_id": 10987015, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bwlrppuewu8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNSEJug0HtxzOxvBSi5AnoWbdb10A/mo/photo.jpg?sz=128", "display_name": "dome", "link": "https://stackoverflow.com/users/10987015/dome"}, "reply_to_user": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1558105098, "post_id": 56158185, "comment_id": 99003021, "body": "@Code-Apprentice I looked to the papers. They are interesting but don&#39;t explicity talk about isophormism and I think don&#39;t solve my problem for my kind of graph."}, {"owner": {"reputation": 794, "user_id": 10987015, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bwlrppuewu8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNSEJug0HtxzOxvBSi5AnoWbdb10A/mo/photo.jpg?sz=128", "display_name": "dome", "link": "https://stackoverflow.com/users/10987015/dome"}, "edited": false, "score": 0, "creation_date": 1558105781, "post_id": 56158185, "comment_id": 99003369, "body": "I cheked the second paper and it says that isomorphic graphs have different hashes, so this is definitely not the solution to my problem."}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1558106564, "post_id": 56158185, "comment_id": 99003802, "body": "You state that &quot;It is acceptable for my program, though not desiderable, if happen that sometimes isomorphic graphs have two differents hashes, but is necessary that if two graphs are not isomorphic they have different hashes.&quot; So is it a requirement for isomorphic graphs to have the same hash or not?"}, {"owner": {"reputation": 794, "user_id": 10987015, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bwlrppuewu8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNSEJug0HtxzOxvBSi5AnoWbdb10A/mo/photo.jpg?sz=128", "display_name": "dome", "link": "https://stackoverflow.com/users/10987015/dome"}, "edited": false, "score": 0, "creation_date": 1558107048, "post_id": 56158185, "comment_id": 99004054, "body": "I said that badly, now I remove it from the question because it is important that two isomorphic graphs have the same hash. I read the algorithm and using it, is very unlikely that two isomorphic graphs will have the same hash."}], "owner": {"reputation": 794, "user_id": 10987015, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bwlrppuewu8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNSEJug0HtxzOxvBSi5AnoWbdb10A/mo/photo.jpg?sz=128", "display_name": "dome", "link": "https://stackoverflow.com/users/10987015/dome"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1558477854, "creation_date": 1557957520, "last_edit_date": 1558477854, "question_id": 56158185, "link": "https://stackoverflow.com/questions/56158185/hash-function-for-coloured-isomorphic-graphs", "title": "Hash function for coloured isomorphic graphs", "body": "<p>I have an undirected coloured (adjacent nodes have different colors) graph and I need to calculate an hash so that if two graphs are isomorphic they have the same hash (the graph is also planar, I don't know if it can make some difference).</p>\n\n<p>My data structure is this:</p>\n\n<pre><code>class Node:\n    def __init__(self, id, color):\n        self.id = id # int\n        self.color = color # string\n        self.adjacentNodes = set()\n</code></pre>\n\n<p>The <code>id</code> property is used for the program logic, so it shouldn't taken into account in comparing graphs. </p>\n\n<p>My idea is to sort the nodes of the graph and then, from the first node, to explore the adjacent nodes in order to generate a tree of the graph.\nThen I generate a unique string from the tree (actually I'm generating the string during the exploration).\nSo, what I'm trying to do, is to find a sort of canonization of the graph.</p>\n\n<p><strong>Description</strong></p>\n\n<p>I sort nodes first by the <em>degree</em> and then by <em>color</em> property name in ascending order.\nI take the first node and start exploring adjacent nodes with a depth first search sorting them in the same way.\nI keep track of already visited nodes to avoid expanding old ones.</p>\n\n<p>My string is generated like this: using the depth first search, every time I reach a new node I append to the graph string the following: </p>\n\n<ul>\n<li>node color</li>\n<li>node degree</li>\n<li>index in list of visited nodes</li>\n</ul>\n\n<p>Maybe it is redundant but I thought that those informations were sufficient to garantee a right canonization.</p>\n\n<p>The real probles is when two nodes has same <em>degree</em> and same <em>color</em> during sorting.\nWhat I do should garantee canonization but is not very efficient.\nTaken the a group of similar nodes (same degree and color), I generate a subtree for each node and the associated string to the subtree and I choose the biggest one (sorting them in descending order) as next in the node sorting.\nThen I remove this last node and I repeat the operation until this group is empty.\nI need to do this because after choosing the first node, I might have changed the list of visited nodes and then the new strings might be differents.</p>\n\n<p>Currently this implementation is very inefficient:</p>\n\n<pre><code># actually this function return the unique string associated with the graph\n# that will be hashed with the function hash() in a second moment\ndef new_hash(graph, queue=[]): # graph: list of Node\n    if not queue: # first call: find the root of the tree\n        graph.sort(key = lambda x: (len(x.adjacentNodes), x.color), reverse=True)\n        groups = itertools.groupby(graph, key = lambda x: (len(x.adjacentNodes), x.color))\n        roots = []\n        result_hash = ''\n\n        for _, group in groups:\n            roots  = [x for x in group]\n            break # I just need the first (the candidates roots)\n\n        temp_hashes = []\n\n        for node in roots:\n            temp_queue = [node.id]\n            temp_hash = node.color + str(len(node.adjacentNodes)) + str(temp_queue.index(node.id))\n            temp_hash += new_hash(list(node.adjacentNodes), temp_queue)\n            temp_hashes.append((node, temp_hash, temp_queue))\n\n        temp_hashes.sort(key = lambda x: x[1], reverse=True)\n        queue = temp_hashes[0][2]        \n        result_hash += temp_hashes[0][1]\n        result_hash += new_hash(list(temp_hashes[0][0].adjacentNodes), queue=queue)\n    else:\n        graph.sort(key = lambda x: (len(x.adjacentNodes), x.color), reverse=True)\n        groups = itertools.groupby(graph, key = lambda x: (len(x.adjacentNodes), x.color))\n        grouped_nodes = []\n        result_hash = ''\n\n        for _, group in groups:\n            grouped_nodes.append([x for x in group])\n\n        for group in grouped_nodes:\n            while len(group) &gt; 0:\n                temp_hashes = []\n\n                for node in group:\n                    if node.id in queue:\n                        temp_hash = node.color + str(len(node.adjacentNodes)) + str(queue.index(node.id))\n                        temp_hashes.append((node, temp_hash, queue))\n                    else:\n                        temp_queue = queue[:]\n                        temp_queue.append(node.id)\n                        temp_hash = node.color + str(len(node.adjacentNodes)) + str(temp_queue.index(node.id))\n                        temp_hash += new_hash(list(node.adjacentNodes), queue=temp_queue)\n                        temp_hashes.append((node, temp_hash, temp_queue))\n\n                temp_hashes.sort(key = lambda x: x[1], reverse=True)\n                queue = temp_hashes[0][2]\n                result_hash += temp_hashes[0][1]\n                group.remove(temp_hashes[0][0])\n\n    return result_hash\n</code></pre>\n\n<p><strong>Questions</strong></p>\n\n<p>Therefore I have two questions:</p>\n\n<ul>\n<li>does my algorithm really works (I mean, it seems to work, but I don't have any mathematical proof)?</li>\n<li>is there a faster algorithm (less complexity) to calculate the hash?</li>\n</ul>\n"}, {"tags": ["python", "pandas", "dataframe", "datetime"], "comments": [{"owner": {"reputation": 6812, "user_id": 7371893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=128&g=1", "display_name": "&#226;\u0144\u014d\u014b\u0177Xmo\u016f\u015c", "link": "https://stackoverflow.com/users/7371893/%c3%a2%c5%84%c5%8d%c5%8b%c5%b7xmo%c5%af%c5%9c"}, "edited": false, "score": 0, "creation_date": 1557957566, "post_id": 56158177, "comment_id": 98945225, "body": "what have you tried so far?"}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1557957572, "post_id": 56158177, "comment_id": 98945227, "body": "Is there any reason you can&#39;t use the year as a numeric value instead?"}, {"owner": {"reputation": 5007, "user_id": 10924296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483c21a8a3f03bbf92cb99539ec97dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Reedinationer", "link": "https://stackoverflow.com/users/10924296/reedinationer"}, "edited": false, "score": 0, "creation_date": 1557957727, "post_id": 56158177, "comment_id": 98945272, "body": "What is <code>Date</code>? We can&#39;t really do too much to help if we don&#39;t even know what you are running calculations with. I would recommend editing your post into a MCVE as described <a href=\"https://stackoverflow.com/help/reprex\">here</a>"}, {"owner": {"reputation": 1669, "user_id": 9042078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6avg1.jpg?s=128&g=1", "display_name": "Vasu Deo.S", "link": "https://stackoverflow.com/users/9042078/vasu-deo-s"}, "edited": false, "score": 0, "creation_date": 1557958626, "post_id": 56158177, "comment_id": 98945500, "body": "This might help <a href=\"https://stackoverflow.com/questions/466345/converting-string-into-datetime\">Convert year string into datetime object</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2915, "user_id": 3591014, "user_type": "registered", "profile_image": "https://graph.facebook.com/575197264/picture?type=large", "display_name": "eatmeimadanish", "link": "https://stackoverflow.com/users/3591014/eatmeimadanish"}, "is_accepted": false, "score": 0, "last_activity_date": 1557958202, "creation_date": 1557958202, "answer_id": 56158304, "question_id": 56158177, "link": "https://stackoverflow.com/questions/56158177/convert-year-string-into-datetime-object/56158304#56158304", "title": "Convert year string into datetime object", "body": "<p>I would look at the module <code>arrow</code></p>\n\n<p><a href=\"https://arrow.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">https://arrow.readthedocs.io/en/latest/</a></p>\n\n<pre><code>import arrow\ndate = arrow.now()\n#example of text formatting\nfdate = date.format('YYYY')\n\n#example of converting text into datetime\ndate = arrow.get('201905', 'YYYYMM').datetime\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5007, "user_id": 10924296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483c21a8a3f03bbf92cb99539ec97dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Reedinationer", "link": "https://stackoverflow.com/users/10924296/reedinationer"}, "is_accepted": true, "score": 0, "last_activity_date": 1557958378, "creation_date": 1557958378, "answer_id": 56158328, "question_id": 56158177, "link": "https://stackoverflow.com/questions/56158177/convert-year-string-into-datetime-object/56158328#56158328", "title": "Convert year string into datetime object", "body": "<p>I am not sure how <code>datetime</code> interfaces with <code>pandas</code> dataframes (perhaps somebody will comment if there is special usage), but in general the <code>datetime</code> functions would work like this:</p>\n\n<pre><code>import datetime\n\ndate_string = \"201512\"\ndate_object = datetime.datetime.strptime(date_string, \"%Y%m\")\nprint(date_object)\n</code></pre>\n\n<p>Getting us:</p>\n\n<blockquote>\n  <p>2015-12-01 00:00:00</p>\n</blockquote>\n\n<p>Now that the hard part of creating a <code>datetime</code> object is done we simply</p>\n\n<pre><code>print(date_object.year)\n</code></pre>\n\n<p>Which spits out our desired</p>\n\n<blockquote>\n  <p>2015</p>\n</blockquote>\n\n<p>More info about the parsing operators (the \"%Y%m\" bit of my code) is described <a href=\"https://docs.python.org/2/library/datetime.html#strftime-and-strptime-behavior\" rel=\"nofollow noreferrer\">in the documentation</a></p>\n"}], "owner": {"reputation": 21, "user_id": 11193431, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-avrxQWH_3DY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdY6euCvUN4CmT1-4m9BasugsN19w/mo/photo.jpg?sz=128", "display_name": "user11193431", "link": "https://stackoverflow.com/users/11193431/user11193431"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 56158328, "answer_count": 2, "score": -1, "last_activity_date": 1572265023, "creation_date": 1557957453, "last_edit_date": 1572265023, "question_id": 56158177, "link": "https://stackoverflow.com/questions/56158177/convert-year-string-into-datetime-object", "title": "Convert year string into datetime object", "body": "<p>I have a date column in my dataframe that consists of strings like this...'201512' \nI would like to convert it into a datetime object of just year to do some time series analysis.</p>\n\n<p>I tried...</p>\n\n<pre><code>df['Date']= pd.to_datetime(df['Date']) \n</code></pre>\n\n<p>and something similar to</p>\n\n<pre><code>datetime.strptime(Date, \"%Y\")\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 6155, "user_id": 6817245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5e8c2d05056411966127e92c337fbd?s=128&d=identicon&r=PG&f=1", "display_name": "warped", "link": "https://stackoverflow.com/users/6817245/warped"}, "edited": false, "score": 0, "creation_date": 1557957478, "post_id": 56158109, "comment_id": 98945196, "body": "what is the desired output?"}, {"owner": {"reputation": 1933, "user_id": 10772277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8728d91c520e9ffd7ade8911ffedc3c5?s=128&d=identicon&r=PG&f=1", "display_name": "MilkyWay001", "link": "https://stackoverflow.com/users/10772277/milkyway001"}, "reply_to_user": {"reputation": 6155, "user_id": 6817245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5e8c2d05056411966127e92c337fbd?s=128&d=identicon&r=PG&f=1", "display_name": "warped", "link": "https://stackoverflow.com/users/6817245/warped"}, "edited": false, "score": 0, "creation_date": 1557957522, "post_id": 56158109, "comment_id": 98945210, "body": "desired output is output of <code>temp[temp&gt;0]</code> as given in the question."}], "answers": [{"comments": [{"owner": {"reputation": 1933, "user_id": 10772277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8728d91c520e9ffd7ade8911ffedc3c5?s=128&d=identicon&r=PG&f=1", "display_name": "MilkyWay001", "link": "https://stackoverflow.com/users/10772277/milkyway001"}, "edited": false, "score": 0, "creation_date": 1557958047, "post_id": 56158256, "comment_id": 98945349, "body": "This is a lot shorter than my method of dataframe conversion. Thanks a lot."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1557969962, "post_id": 56158256, "comment_id": 98947513, "body": "I like the idea of <code>loc</code> with a callback here. Very nifty!"}, {"owner": {"reputation": 22982, "user_id": 10189214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oTTBaX3HSZQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ohHVatc4khqXgYvNrBM40bMFj71Q/mo/photo.jpg?sz=128", "display_name": "Andy L.", "link": "https://stackoverflow.com/users/10189214/andy-l"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1558016959, "post_id": 56158256, "comment_id": 98968329, "body": "This answer is absolute correct. However, the pasted output doesn&#39;t match the actual output. I tried to edit the pasted output to match the actual output, but some dudes rejected. The actual output order is <code>c 3</code>, <code>a 2</code> because of <code>sort_values(ascending=False)</code>. I have no intention in nitpicking. This is a refreshing answer, so I just want to fix the pasted output to make it a good reference for someone else later on. WeNYoBen or @cs95, could you change the order of the pasted output?"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 4, "last_activity_date": 1557958518, "last_edit_date": 1557958518, "creation_date": 1557957952, "answer_id": 56158256, "question_id": 56158109, "link": "https://stackoverflow.com/questions/56158109/keep-only-non-zero-missing-values-in-pandas-dataframe/56158256#56158256", "title": "Keep only non zero missing values in pandas dataframe", "body": "<p>That is confused for <code>filter</code> , since it is work for index , not the value </p>\n\n<pre><code>df.isnull().sum().loc[lambda x : x&gt;0].sort_values(ascending=False)\nOut[147]: \na    2\nc    3\ndtype: int64\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2321, "user_id": 1024114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/355a81ca72c949b40cec6f0411b69d04?s=128&d=identicon&r=PG", "display_name": "ilmarinen", "link": "https://stackoverflow.com/users/1024114/ilmarinen"}, "is_accepted": false, "score": 2, "last_activity_date": 1557958299, "creation_date": 1557958299, "answer_id": 56158317, "question_id": 56158109, "link": "https://stackoverflow.com/questions/56158109/keep-only-non-zero-missing-values-in-pandas-dataframe/56158317#56158317", "title": "Keep only non zero missing values in pandas dataframe", "body": "<p>There are, of course, many ways of doing this, but in general I would not recommend using a lambda or a filter where you pass a python function as this will make things quite slow if your series is larger.\nIn your case, you could instead do\n1. Replace 0 with nan and drop the nans.</p>\n\n<pre><code>df.isnull().sum().replace(0, np.nan).dropna().sort_values(ascending=False).astype(int)\n</code></pre>\n\n<p>The downside of this is that you need to type convert twice (nan is always a float, never an int).\n 2. Use the query function.</p>\n\n<pre><code>df.isnull().sum().sort_values(ascending=False).to_frame('value').query('value!=0')['value'].rename(None)\n</code></pre>\n\n<p>The downside with this method is that it only exist on dataframes, so you need to convert the series to one first. However, for large series this should be cheaper than type converting since the underlying array remains the same.</p>\n"}, {"tags": [], "owner": {"reputation": 22982, "user_id": 10189214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oTTBaX3HSZQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ohHVatc4khqXgYvNrBM40bMFj71Q/mo/photo.jpg?sz=128", "display_name": "Andy L.", "link": "https://stackoverflow.com/users/10189214/andy-l"}, "is_accepted": false, "score": 1, "last_activity_date": 1557962080, "last_edit_date": 1557962080, "creation_date": 1557961766, "answer_id": 56158755, "question_id": 56158109, "link": "https://stackoverflow.com/questions/56158109/keep-only-non-zero-missing-values-in-pandas-dataframe/56158755#56158755", "title": "Keep only non zero missing values in pandas dataframe", "body": "<p>Using <code>.loc</code> with the mask by <code>isna</code> and <code>any</code> on <code>axis=0</code>:</p>\n\n<pre><code>df.loc[:, df.isna().any()].isna().sum().sort_values(ascending=False)\n\nOut[1845]:\nc    3\na    2\ndtype: int64\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 15282251, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GhUb23qpTC9Kn1V4C2VgIMPwx68vpAcT6MU3L8=k-s128", "display_name": "Abhinav Srivastava", "link": "https://stackoverflow.com/users/15282251/abhinav-srivastava"}, "is_accepted": false, "score": 0, "last_activity_date": 1614253222, "creation_date": 1614253222, "answer_id": 66367769, "question_id": 56158109, "link": "https://stackoverflow.com/questions/56158109/keep-only-non-zero-missing-values-in-pandas-dataframe/66367769#66367769", "title": "Keep only non zero missing values in pandas dataframe", "body": "<p>It can be answered using much more efficient way through numpy:</p>\n<pre><code>s = data.isnull().sum()\nmask = (s.values &gt; 0)\npd.Series(s.values[mask], s.index[mask]).sort_values(ascending=False)\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/sNgNK.png\" rel=\"nofollow noreferrer\">Clear comparison of time complexity among all methods</a></p>\n"}], "owner": {"reputation": 1933, "user_id": 10772277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8728d91c520e9ffd7ade8911ffedc3c5?s=128&d=identicon&r=PG&f=1", "display_name": "MilkyWay001", "link": "https://stackoverflow.com/users/10772277/milkyway001"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 504, "favorite_count": 0, "accepted_answer_id": 56158256, "answer_count": 4, "score": 3, "last_activity_date": 1614253222, "creation_date": 1557957077, "last_edit_date": 1557978680, "question_id": 56158109, "link": "https://stackoverflow.com/questions/56158109/keep-only-non-zero-missing-values-in-pandas-dataframe", "title": "Keep only non zero missing values in pandas dataframe", "body": "<p>How to select only the non-null columns in descending order from the dataframe.</p>\n\n<p>Here is the dataframe:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df = pd.DataFrame( { 'a': [1,2,np.nan,np.nan],\n                    'b':  [10,20,30,40],\n                   'c': [1,np.nan,np.nan,np.nan]})\n     a   b    c\n0  1.0  10  1.0\n1  2.0  20  NaN\n2  NaN  30  NaN\n3  NaN  40  NaN\n</code></pre>\n\n<p>I can do this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df.isnull().sum().sort_values(ascending=False)\nc    3\na    2\nb    0\n</code></pre>\n\n<p>But I want to CHAIN multiple commands to a single line so that it gives result in one line.</p>\n\n<p>I tried:\n<code>df.isnull().sum().sort_values(ascending=False).filter(lambda x: x&gt;0)</code>\nit fails</p>\n\n<p>I know this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>temp = df.isnull().sum().sort_values(ascending=False)\ntemp[temp&gt;0]\nc    3\na    2\n</code></pre>\n\n<p>But I am looking way to chaining continuation in ONE-LINE.</p>\n\n<p>Required:</p>\n\n<pre><code>df.isnull().sum().sort_values(ascending=False).somefunction( x &gt; 0)\n</code></pre>\n\n<p><strong>Update</strong><br>\nI found a way converting series to dataframe and then using query.</p>\n\n<pre><code>df.isnull().sum().sort_values(ascending=False).to_frame().rename(columns={0:'temp'}).query(\"temp &gt; 0\")\n</code></pre>\n\n<p>This looks long and superfluous. Is there a better way ?</p>\n"}, {"tags": ["python", "regex", "regex-lookarounds", "regex-group", "regex-greedy"], "comments": [{"owner": {"reputation": 4972, "user_id": 10824407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32862a03314e434224acf280c38e6e68?s=128&d=identicon&r=PG&f=1", "display_name": "Olvin Roght", "link": "https://stackoverflow.com/users/10824407/olvin-roght"}, "edited": false, "score": 0, "creation_date": 1557957785, "post_id": 56158087, "comment_id": 98945287, "body": "Your code should work properly if I&#39;ve understood you."}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1557957791, "post_id": 56158087, "comment_id": 98945289, "body": "Perhaps <code>orfs = re.findall(&#39;(?&lt;=Met)[^*]*(?=\\*\\*\\*)&#39; , translatedSequence)</code> Your expression is using a greedy match, <code>.*</code> which will go as far right in the string before it attempts to match <code>(?=\\*\\*\\*)</code> My suggested change will match non <code>*</code> up to <code>***</code>"}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1557958301, "post_id": 56158087, "comment_id": 98945414, "body": "To allow <code>*</code> in the capture that are not 3 consecutive <code>*</code>, orfs = re.findall(&#39;(?&lt;=Met).*?(?=***)&#39; , translatedSequence)` where <code>.*?</code> makes it a non greedy match"}], "answers": [{"comments": [{"owner": {"reputation": 610, "user_id": 4063669, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2I2Q3.jpg?s=128&g=1", "display_name": "Tomm P", "link": "https://stackoverflow.com/users/4063669/tomm-p"}, "edited": false, "score": 1, "creation_date": 1557967789, "post_id": 56158257, "comment_id": 98947192, "body": "wow awesome response and totally exposing my cluelessness on this topic. Only one mod to the original question, I need to keep the &quot;Met&quot;, the current regex seems to loose the search. I&#39;ll try a few variations to see what works."}], "tags": [], "owner": {"reputation": 1, "user_id": 6553328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/omcAX.jpg?s=128&g=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/6553328/emma"}, "is_accepted": false, "score": 1, "last_activity_date": 1557969323, "last_edit_date": 1557969323, "creation_date": 1557957957, "answer_id": 56158257, "question_id": 56158087, "link": "https://stackoverflow.com/questions/56158087/regex-for-capturing-a-string-between-two-substrings/56158257#56158257", "title": "RegEx for capturing a string between two substrings", "body": "<p>You may not want to have any lookarounds to get your desired output. You can simply do that with an expression similar to <a href=\"https://regex101.com/r/skk2gx/1\" rel=\"nofollow noreferrer\">this expression</a> maybe:</p>\n\n<pre><code>(Met)(.*)(\\*\\*\\*)\n</code></pre>\n\n<p>There are three capturing groups, where the second one is your desired output. </p>\n\n<h3>Python Test</h3>\n\n<pre><code># coding=utf8\n# the above tag defines encoding for this document and is for Python 2.x compatibility\n\nimport re\n\nregex = r\"(Met)(.*)(\\*\\*\\*)\"\n\ntest_str = \"MetSOMETEXT***\"\n\nsubst = \"\\\\1\\\\2\"\n\n# You can manually specify the number of replacements by changing the 4th argument\nresult = re.sub(regex, subst, test_str, 0, re.MULTILINE)\n\nif result:\n    print (result)\n\n# Note: for Python 2.7 compatibility, use ur\"\" to prefix the regex and u\"\" to prefix the test string and substitution.\n</code></pre>\n\n<h3>Output</h3>\n\n<pre><code>MetSOMETEXT\n</code></pre>\n\n<h3>JavaScript Demo</h3>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const regex = /(Met)(.*)(\\*\\*\\*)/gm;\r\nconst str = `MetSOMETEXT***`;\r\nconst subst = `$1$2`;\r\n\r\n// The substituted value will be contained in the result variable\r\nconst result = str.replace(regex, subst);\r\n\r\nconsole.log('Substitution result: ', result);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<h3>RegEx</h3>\n\n<p>If this wasn't your desired expression, you can modify/change your expressions in <a href=\"https://regex101.com/r/skk2gx/1/\" rel=\"nofollow noreferrer\">regex101.com</a>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/zZKFr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zZKFr.png\" alt=\"enter image description here\"></a></p>\n\n<h3>RegEx Circuit</h3>\n\n<p>You can also visualize your expressions in <a href=\"https://jex.im/regulex/#!flags=&amp;re=%5E(a%7Cb)*%3F%24\" rel=\"nofollow noreferrer\">jex.im</a>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/qrPYm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qrPYm.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 610, "user_id": 4063669, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2I2Q3.jpg?s=128&g=1", "display_name": "Tomm P", "link": "https://stackoverflow.com/users/4063669/tomm-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1557969323, "creation_date": 1557956950, "last_edit_date": 1557958310, "question_id": 56158087, "link": "https://stackoverflow.com/questions/56158087/regex-for-capturing-a-string-between-two-substrings", "title": "RegEx for capturing a string between two substrings", "body": "<p>I am trying to extract all occurrences of a pattern in a text file (it's an Amino acid sequence from a DNA sample).</p>\n\n<p>The pattern I am trying to match is MetSOMETEXT***</p>\n\n<p>There are multiple occurrences of the pattern in the source string, I am trying to get all.</p>\n\n<p>I am doing this in python using re.findall at the moment but it's not working.</p>\n\n<pre><code>orfs = re.findall('(?&lt;=Met).*(?=\\*\\*\\*)' , translatedSequence)\n</code></pre>\n\n<p>I'm hoping to get a list of strings containing the result.</p>\n"}, {"tags": ["python", "python-3.x", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 10728472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/777832c7df9c3fb71b6dc2f677eeb759?s=128&d=identicon&r=PG&f=1", "display_name": "Denis", "link": "https://stackoverflow.com/users/10728472/denis"}, "edited": false, "score": 0, "creation_date": 1557957862, "post_id": 56158091, "comment_id": 98945307, "body": "I\u2019ll add to other people that at the beginning of your code we can also add a line: <code>df[&quot;date_time&quot;]=pd.to_datetime(df[&quot;date_time&quot;])</code>. And in the end: <code>df.reset_index()</code>."}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 1, "last_activity_date": 1557956975, "creation_date": 1557956975, "answer_id": 56158091, "question_id": 56158037, "link": "https://stackoverflow.com/questions/56158037/how-to-convert-a-table-with-per-minute-data-into-a-table-with-hourly-data/56158091#56158091", "title": "How to convert a table with per-minute data into a table with hourly data?", "body": "<p>Your groupkey is not very easy to find , first need slice the <code>date_time</code> till <code>hour</code> and convert back to <code>datetime</code> object , then just <code>groupby</code> it with <code>agg</code> </p>\n\n<pre><code>groupkey=pd.to_datetime(df.date_time.dt.strftime('%Y-%m-%d %H'))\ndf.groupby(groupkey).agg({'last_val':'last','sum_val':'sum'})\nOut[141]: \n                     last_val  sum_val\ndate_time                             \n2019-02-15 17:00:00        22       20\n2019-02-15 18:00:00        55       60\n2019-02-16 10:00:00        77      100\n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 10728472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/777832c7df9c3fb71b6dc2f677eeb759?s=128&d=identicon&r=PG&f=1", "display_name": "Denis", "link": "https://stackoverflow.com/users/10728472/denis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 486, "favorite_count": 0, "accepted_answer_id": 56158091, "answer_count": 1, "score": 1, "last_activity_date": 1557956983, "creation_date": 1557956653, "last_edit_date": 1557956983, "question_id": 56158037, "link": "https://stackoverflow.com/questions/56158037/how-to-convert-a-table-with-per-minute-data-into-a-table-with-hourly-data", "title": "How to convert a table with per-minute data into a table with hourly data?", "body": "<p>I have a table with minute data. Some rows are missing in this table.</p>\n\n<pre><code>import pandas as pd\ndf = pd.DataFrame([\n(\"2019-02-15 17:56:00\", 11, 10),\n(\"2019-02-15 17:57:00\", 22, 10),\n(\"2019-02-15 18:00:00\", 33, 20),\n(\"2019-02-15 18:01:00\", 44, 20),\n(\"2019-02-15 18:02:00\", 55, 20),\n(\"2019-02-16 10:01:00\", 66, 50),\n(\"2019-02-16 10:02:00\", 77, 50)],\ncolumns=[\"date_time\", \"last_val\", \"sum_val\"])\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/yZHmv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yZHmv.png\" alt=\"Table with minute data\"></a></p>\n\n<p>I need to get a table with hourly data. Where in the <code>last_val</code> column will be the last value in an hour. And in the <code>sum_val</code> column there will be the sum of all values per hour.</p>\n\n<p>To make the resulting table look like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/2RzA5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2RzA5.png\" alt=\"Table with hourly data\"></a></p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1557956505, "post_id": 56157985, "comment_id": 98944941, "body": "if scores are equal you lose information in your dictionary. Create a dictionary with player names as keys, not scores"}, {"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 0, "creation_date": 1557956759, "post_id": 56157985, "comment_id": 98945001, "body": "Or create score dictionary that have lists of names as values"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1557956844, "post_id": 56157985, "comment_id": 98945023, "body": "I recommend that you work through a tutorial on lists and sorting.  You&#39;ve chosen an inappropriate data representation, and your lack of familiarity with preferred techniques leaves you with too many problems to unravel at once."}, {"owner": {"reputation": 3, "user_id": 11506549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f941f7a4edd45fb5908324bbaa4b016b?s=128&d=identicon&r=PG&f=1", "display_name": "Coen", "link": "https://stackoverflow.com/users/11506549/coen"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1557957235, "post_id": 56157985, "comment_id": 98945140, "body": "@Prune Thank you for your comment. Where would you recommend I start/ what technique do you suggest I learn first to choose an appropriate data representation?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1557959112, "post_id": 56157985, "comment_id": 98945628, "body": "I suggest basic Python tutorials to get familiar with the language.  This will include basic data types and customary usage."}], "answers": [{"tags": [], "owner": {"reputation": 116, "user_id": 11179650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d486229667379b67c9a5ef2b6073ebd?s=128&d=identicon&r=PG&f=1", "display_name": "lchojnacki", "link": "https://stackoverflow.com/users/11179650/lchojnacki"}, "is_accepted": true, "score": 1, "last_activity_date": 1557959073, "last_edit_date": 1557959073, "creation_date": 1557956752, "answer_id": 56158056, "question_id": 56157985, "link": "https://stackoverflow.com/questions/56157985/how-to-order-dictionary-when-some-of-the-values-are-the-equal/56158056#56158056", "title": "How to order dictionary when some of the values are the equal?", "body": "<p>Every key in dictionary has to be unique. If you do something like this:</p>\n\n<pre><code>my_dict[19] = 'John'\nmy_dict[19] = 'Alice'\n</code></pre>\n\n<p>John is overwritten by Alice. You may want to use names as keys and scores as values, but only if names are not repeated ('John 1' and 'John 2', not 'John' and 'John').</p>\n\n<p>UPDATE:</p>\n\n<p>Example solution of your problem using list of tuples, you can have duplicate names and scores:</p>\n\n<pre><code>from operator import itemgetter\n\ndef ranking_people():\n    scores = [(10, 'John'), (8, 'Alice'), (8, 'Bob'), (14, 'John')]\n    scores_sorted = sorted(scores, key=itemgetter(0))\n    print(scores_sorted)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11506549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f941f7a4edd45fb5908324bbaa4b016b?s=128&d=identicon&r=PG&f=1", "display_name": "Coen", "link": "https://stackoverflow.com/users/11506549/coen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 56158056, "answer_count": 1, "score": -1, "last_activity_date": 1557996800, "creation_date": 1557956341, "last_edit_date": 1557996800, "question_id": 56157985, "link": "https://stackoverflow.com/questions/56157985/how-to-order-dictionary-when-some-of-the-values-are-the-equal", "title": "How to order dictionary when some of the values are the equal?", "body": "<p>I'm looking to sort a dictionary containing scores <code>key</code> and values <code>names</code> and order them according to the highest score. When two people <code>names</code> have equal scores the dictionary cannot order itself correctly. How to fix this?</p>\n\n<p>I'm a very rookie programmer. I've searched the web but could not find an answer yet. </p>\n\n<pre><code>def ranking_people():\n    dictionary = {\n        score_player_one : player_one,\n        score_player_two : player_two,\n        score_player_three : player_three\n}\n    sorted_dictionary = sorted(dictionary.items(), key = operator.itemgetter(0), reverse = True )\n    print(\"The ranking is: \" + str(sorted_dictionary))\n</code></pre>\n\n<p>I expect the output to be:</p>\n\n<blockquote>\n  <p>The ranking is: [(19, 'John 1'), [19, Alice 2], (16, 'Bob 3')]</p>\n</blockquote>\n\n<p>The actual output is:</p>\n\n<blockquote>\n  <p>The ranking is: [(19, 'John'), (16, 'Bob')]</p>\n</blockquote>\n"}, {"tags": ["python", "mergesort"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1557956310, "post_id": 56157933, "comment_id": 98944885, "body": "Test the index before trying to use it: <code>while a &lt; len(list1) and it2 &gt; list1[a]:</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1557957753, "post_id": 56157933, "comment_id": 98945281, "body": "Post the script that&#39;s having the problem, not the script that works. It&#39;s hard to tell what you&#39;re talking about when you just describe how you changed it."}, {"owner": {"reputation": 554, "user_id": 6179432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0hYiw.jpg?s=128&g=1", "display_name": "mikewatt", "link": "https://stackoverflow.com/users/6179432/mikewatt"}, "edited": false, "score": 1, "creation_date": 1557958043, "post_id": 56157933, "comment_id": 98945346, "body": "If this is simply a programming exercise then great, otherwise itertools is your friend:  <code>filter(None, chain(*izip_longest(list1, list2)))</code>"}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1557958076, "post_id": 56157933, "comment_id": 98945353, "body": "Ok so you&#39;re trying to a merge sort of <code>list1, list2</code> of integers. One tip about keeping variable names obvious: use <code>x1,x2</code> or <code>e1,e2</code> or <code>v1,v2</code> for the element/value names (not <code>it2</code>), and <code>i2</code> for the walking index into list2, not <code>a</code>. Also, add some print statements for all the relevant values to help you debug your own code."}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1557958288, "post_id": 56157933, "comment_id": 98945409, "body": "Also, define what &#39;optimize my code&#39; means: fewer lines of code, clearer code (rename your variables, already!), better big-O performance in the typical case, or some compromises of all of those?"}], "answers": [{"tags": [], "owner": {"reputation": 585, "user_id": 9801558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hoL84.png?s=128&g=1", "display_name": "nullchimp", "link": "https://stackoverflow.com/users/9801558/nullchimp"}, "is_accepted": true, "score": 1, "last_activity_date": 1557958288, "last_edit_date": 1557958288, "creation_date": 1557957190, "answer_id": 56158135, "question_id": 56157933, "link": "https://stackoverflow.com/questions/56157933/optimise-while-loop-nested-in-an-if-condition/56158135#56158135", "title": "Optimise while loop nested in an IF condition", "body": "<p>Just change the order of what you had initially from:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>while it2 &gt; list1[a] and a &lt; len(list1)\n</code></pre>\n\n<p>to:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>while a &lt; len(list1) and it2 &gt; list1[a]\n</code></pre>\n\n<p>If the first condition is not <code>True</code> it won't be evaluated any further. Have a look at this example without the additional <code>if</code>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def linear_merge(list1, list2):\n    a = 0\n    for it2 in list2:\n        while a &lt; len(list1) and it2 &gt; list1[a]:\n            a += 1\n            if a == len(list1):\n                break\n\n        list1.insert(a, it2)\n        a += 1\n    return list1\n</code></pre>\n\n<p>I hope that helps!</p>\n"}], "owner": {"reputation": 55, "user_id": 11501160, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gRI-_kXfx88/AAAAAAAAAAI/AAAAAAAAApc/71c4ZMkiWo8/photo.jpg?sz=128", "display_name": "Zain Khaishagi", "link": "https://stackoverflow.com/users/11501160/zain-khaishagi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "closed_date": 1557962933, "accepted_answer_id": 56158135, "answer_count": 1, "score": 1, "last_activity_date": 1557958288, "creation_date": 1557956075, "last_edit_date": 1557958234, "question_id": 56157933, "link": "https://stackoverflow.com/questions/56157933/optimise-while-loop-nested-in-an-if-condition", "closed_reason": "Not suitable for this site", "title": "Optimise while loop nested in an IF condition", "body": "<p>What I'm trying to accomplish is: <strong>given two lists sorted in increasing order, create and return a merged list of all the elements in sorted order (merge-sort)</strong>.</p>\n\n<p>The code I have written is:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def linear_merge(list1, list2):\n    a = 0\n    for it2 in list2:\n        if a &lt; len(list1):\n            while it2 &gt; list1[a]:\n                a += 1\n                if a == len(list1):\n                    break\n\n        list1.insert(a, it2)\n        a += 1\n    return(list1)\n</code></pre>\n\n<p>I was inititally using the following while condition by combining it with the preceding IF:</p>\n\n<pre><code>while it2 &gt; list1[a] and a &lt; len(list1):\n</code></pre>\n\n<p>But that kept giving me the following error for <code>list1 = ['aa', 'xx', 'zz']</code>, <code>list2 = ['bb', 'cc']</code></p>\n\n<blockquote>\n  <p>File \"/Users/zainkhaishagi\n  1/Downloads/google-python-exercises/basic/list2.py\", line 35, in\n  linear_merge\n      while it2 > list1[a] and a &lt; len(list1): IndexError: list index out of range</p>\n</blockquote>\n\n<p>Upon debugging it seems that the even though the while-condition has an AND in it which is false, the index being passed into <code>list1</code> is out of range. I was hoping that the false AND condition would make the while condition a false without checking for index of <code>list1</code>. Apparently, that is not the case.</p>\n\n<ol>\n<li>Am I missing something here since AND is supposed to be False even if a single input is False ?</li>\n<li>Is there any way to optimise this code further using the same approach as I've used? (The constraints I gave myself were to not create a new list and not use more than one variable and to iterate the least number of times on the lists)</li>\n</ol>\n"}, {"tags": ["python", "regex", "re"], "comments": [{"owner": {"reputation": 19646, "user_id": 494074, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/741e480d426fabd85825861bd6481ccd?s=128&d=identicon&r=PG", "display_name": "Ankur Agarwal", "link": "https://stackoverflow.com/users/494074/ankur-agarwal"}, "edited": false, "score": 1, "creation_date": 1557956920, "post_id": 56157932, "comment_id": 98945052, "body": "Can you improve your question please? A clear example with input and expected output will greatly help. thanks"}, {"owner": {"reputation": 4972, "user_id": 10824407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32862a03314e434224acf280c38e6e68?s=128&d=identicon&r=PG&f=1", "display_name": "Olvin Roght", "link": "https://stackoverflow.com/users/10824407/olvin-roght"}, "edited": false, "score": 1, "creation_date": 1557957300, "post_id": 56157932, "comment_id": 98945159, "body": "<i>Offtopic: Creating such as regular expressions makes code almost unreadable and creates big problems in future support. If you can replace this with list of simple regular expressions and check input to match each of them - do it. It&#39;ll definitely save lot of time in future.</i>"}, {"owner": {"reputation": 119, "user_id": 8232761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6wejN.png?s=128&g=1", "display_name": "DBFS", "link": "https://stackoverflow.com/users/8232761/dbfs"}, "reply_to_user": {"reputation": 19646, "user_id": 494074, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/741e480d426fabd85825861bd6481ccd?s=128&d=identicon&r=PG", "display_name": "Ankur Agarwal", "link": "https://stackoverflow.com/users/494074/ankur-agarwal"}, "edited": false, "score": 0, "creation_date": 1558010202, "post_id": 56157932, "comment_id": 98963913, "body": "@abc Sure I can do that. It&#39;s the first time I&#39;ve asked a question on Stack so i&#39;m not too great at asking questions in a way that&#39;s easy to understand."}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 8232761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6wejN.png?s=128&g=1", "display_name": "DBFS", "link": "https://stackoverflow.com/users/8232761/dbfs"}, "edited": false, "score": 0, "creation_date": 1558012613, "post_id": 56164477, "comment_id": 98965576, "body": "Thanks for your answer! That said it doesn&#39;t match the last group correctly if the revision is just a lone number. For example &quot;XXXXXX-PA-1-1&quot; will fail to match. Sorry if my question wasn&#39;t clear enough. I&#39;ve updated it, so give it a look over."}, {"owner": {"reputation": 166, "user_id": 9174271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffb60ab50541e84a13dafc39cc618b06?s=128&d=identicon&r=PG&f=1", "display_name": "GDN", "link": "https://stackoverflow.com/users/9174271/gdn"}, "reply_to_user": {"reputation": 119, "user_id": 8232761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6wejN.png?s=128&g=1", "display_name": "DBFS", "link": "https://stackoverflow.com/users/8232761/dbfs"}, "edited": false, "score": 1, "creation_date": 1558016882, "post_id": 56164477, "comment_id": 98968269, "body": "@DBFS I changed the regular expression a little. I hope it&#39;s what you need now."}, {"owner": {"reputation": 119, "user_id": 8232761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6wejN.png?s=128&g=1", "display_name": "DBFS", "link": "https://stackoverflow.com/users/8232761/dbfs"}, "edited": false, "score": 0, "creation_date": 1558020096, "post_id": 56164477, "comment_id": 98970282, "body": "Your updated regex won&#39;t match if product takes a format such as &quot;XXXX-XXX-123-PAF-1-FG0 Sheet 1&quot; correctly. Output: (&#39;XXXX-XXX&#39;, None, &#39;1&#39;) Expected: (&#39;XXXX-XXX-123&#39;, &#39;PAF-1&#39;, &#39;&#39;FG0&#39;). Maybe i should have a pattern for each of the different filename formats and then try each one?"}, {"owner": {"reputation": 166, "user_id": 9174271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffb60ab50541e84a13dafc39cc618b06?s=128&d=identicon&r=PG&f=1", "display_name": "GDN", "link": "https://stackoverflow.com/users/9174271/gdn"}, "reply_to_user": {"reputation": 119, "user_id": 8232761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6wejN.png?s=128&g=1", "display_name": "DBFS", "link": "https://stackoverflow.com/users/8232761/dbfs"}, "edited": false, "score": 1, "creation_date": 1558020621, "post_id": 56164477, "comment_id": 98970598, "body": "It may be a solution to test, but since more pattern would output a result for the same product, how would you choose which one is the correct one?"}, {"owner": {"reputation": 166, "user_id": 9174271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffb60ab50541e84a13dafc39cc618b06?s=128&d=identicon&r=PG&f=1", "display_name": "GDN", "link": "https://stackoverflow.com/users/9174271/gdn"}, "reply_to_user": {"reputation": 119, "user_id": 8232761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6wejN.png?s=128&g=1", "display_name": "DBFS", "link": "https://stackoverflow.com/users/8232761/dbfs"}, "edited": false, "score": 1, "creation_date": 1558020726, "post_id": 56164477, "comment_id": 98970654, "body": "if you can supply some more example of &quot;difficult cases&quot; (as the one xxx-xxx-123-PAF..etc.) it may help untangle the regular expression and force it to do what you need"}, {"owner": {"reputation": 119, "user_id": 8232761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6wejN.png?s=128&g=1", "display_name": "DBFS", "link": "https://stackoverflow.com/users/8232761/dbfs"}, "edited": false, "score": 0, "creation_date": 1558021572, "post_id": 56164477, "comment_id": 98971061, "body": "I see what you mean with the list. I&#39;ve added a list of examples to the original question."}], "tags": [], "owner": {"reputation": 166, "user_id": 9174271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffb60ab50541e84a13dafc39cc618b06?s=128&d=identicon&r=PG&f=1", "display_name": "GDN", "link": "https://stackoverflow.com/users/9174271/gdn"}, "is_accepted": false, "score": 1, "last_activity_date": 1558094687, "last_edit_date": 1558094687, "creation_date": 1557996471, "answer_id": 56164477, "question_id": 56157932, "link": "https://stackoverflow.com/questions/56157932/multiple-regex-or-conditions-using-groups/56164477#56164477", "title": "Multiple regex or conditions using groups", "body": "<p><strong>EDIT after new examples</strong></p>\n\n<p>To avoid over complicating the regex pattern (which is quite enough already), I would get rid of the \"sheet\" part first.</p>\n\n<p>So first, remove the \"sheet #\" pattern from filename before applying the match instruction.</p>\n\n<p>This will reduce your cases to these patterns only:</p>\n\n<ul>\n<li><p>(Product Name)-(PAF/PA-#)-(Revision)</p></li>\n<li><p>(Product Name)-(Revision)</p></li>\n</ul>\n\n<p>Then apply the regex to split in three groups.\nFor the revision group I used (?!...) a negative lookahead assertion to handle cases like this: \"2400PSUA-8-PA-1-X0\"</p>\n\n<p>Here's the revised code:</p>\n\n<pre><code>import re\n\nstring = \"\"\"10G-HUB-PAF-1 Sheet 1-FG0\nHUB-DISP-SPCR-RD0\nHUB-MAIN-PA-1-FG0\n2400ODU-PA-1-X0 Sheet 1\n2400PSUA-8-PA-1-Sheet1-X0\n2405OE-PAF-1-FG0\n2400PSUA-8-PA-1-Sheet1-X0\nXXXX-XXX-123-PAF-1-FG0 Sheet 1\n\"\"\"\n\nregex = r'(?# product name )(.*?)' + \\\n        r'(?# PA|PAF       )(?:(?:-)(?:(PAF-\\d|PA-\\d).*))?' + \\\n        r'(?# Revision     )(?:-)((?:\\d)(?!.*(?:FG|RD|X|A\\d))|(?:(?:FG|RD|X|A)\\d))'\n\npattern = re.compile(regex, flags=re.IGNORECASE|re.VERBOSE)\n\nfor s in string.splitlines():\n    print('String %s' % s)\n    # Remove 'Sheet#' or 'Sheet #' or '-Sheet #' or '-Sheet#'\n    s=re.sub(r'-?sheet\\s?\\d','',s, flags=re.IGNORECASE)\n    print('Purged string: %s' % s)\n    f=pattern.match(s)\n    print('group1: %s' % f.group(1))\n    print('group2: %s' % f.group(2))\n    print('group3: %s\\n' % f.group(3))\n</code></pre>\n\n<p>With some output:</p>\n\n<pre><code>String 10G-HUB-PAF-1 Sheet 1-FG0\nPurged string: 10G-HUB-PAF-1 -FG0\ngroup1: 10G-HUB\ngroup2: PAF-1\ngroup3: FG0\n\nString HUB-DISP-SPCR-RD0\nPurged string: HUB-DISP-SPCR-RD0\ngroup1: HUB-DISP-SPCR\ngroup2: None\ngroup3: RD0\n\n...omitted output ...\n\nString 2400PSUA-8-PA-1-Sheet1-X0\nPurged string: 2400PSUA-8-PA-1-X0\ngroup1: 2400PSUA-8\ngroup2: PA-1\ngroup3: X0\n\nString XXXX-XXX-123-PAF-1-FG0 Sheet 1\nPurged string: XXXX-XXX-123-PAF-1-FG0 \ngroup1: XXXX-XXX-123\ngroup2: PAF-1\ngroup3: FG0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 119, "user_id": 8232761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6wejN.png?s=128&g=1", "display_name": "DBFS", "link": "https://stackoverflow.com/users/8232761/dbfs"}, "is_accepted": false, "score": 0, "last_activity_date": 1558447172, "last_edit_date": 1558447172, "creation_date": 1558446429, "answer_id": 56239753, "question_id": 56157932, "link": "https://stackoverflow.com/questions/56157932/multiple-regex-or-conditions-using-groups/56239753#56239753", "title": "Multiple regex or conditions using groups", "body": "<p>After practicing a lot with regex, and with the help from GDN i found the solution:</p>\n\n<pre><code>(.*?)(?:(?:\\s|_|-|\\s?-\\s|\\s-\\s?)(?=(?:PAF-|PA-|FG|RD|X|A)\\d+))((?:PAF|PA)-\\d+)?(?:\\s|_|-|\\s?-\\s|\\s-\\s?)?(?:.*?)?((?:FG|RD|X|A)\\d+)\n</code></pre>\n\n<pre class=\"lang-py prettyprint-override\"><code>import re\n\n\ndef input_loop(pattern, doc_type):\n    while True:\n        filename = raw_input('Enter {}, Enter \"x\" to Close: '.format(doc_type))\n        if filename == 'x':\n            break\n        matches = pattern.match(filename)\n        if matches:\n            groups = matches.groups()\n            print groups\n        else:\n            print '''Couldn't match string: \"{}\"'''.format(filename)\n\npattern = re.compile(r'''\n  (.*?)(?# Match product name)\n  (?:(?:\\s|_|-|\\s?-\\s|\\s-\\s?)(?=(?:PAF-|PA-|FG|RD|X|A)\\d+))(?# Match spacer after product name)\n  ((?:PAF|PA)-\\d+)?(?# Match optional PAF-# or PA-#)\n  (?:\\s|_|-|\\s?-\\s|\\s-\\s?)?(?# Match spacer after product type name)\n  (?:.*?)?(?# Match useless data)\n  ((?:FG|RD|X|A)\\d+)''', flags=re.IGNORECASE|re.VERBOSE)\ninput_loop(pattern, 'Assembly Drawings')\n\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 8232761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6wejN.png?s=128&g=1", "display_name": "DBFS", "link": "https://stackoverflow.com/users/8232761/dbfs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 737, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1617710452, "creation_date": 1557956074, "last_edit_date": 1617710452, "question_id": 56157932, "link": "https://stackoverflow.com/questions/56157932/multiple-regex-or-conditions-using-groups", "title": "Multiple regex or conditions using groups", "body": "<p>I'm trying to match several different filename syntaxs with one regex. In other words I am trying to match filename string with the same characters in different orders. The problem is I don't know how to string together \"OR\" | cases when it comes to groups.</p>\n\n<p>Group syntax:</p>\n\n<ul>\n<li>Product names constitute any letter any number with optional \"-\", \"_\" or spaces in between characters. \"-\", \"_\" or spaces are never at the beginning or end of Product name.</li>\n<li>PAF or PA always have a leading \"-\" followed by a trailing \"-\" and then a number.</li>\n<li>Revision codes constitute \"FG\", \"RD\", \"X\", \"A\", or \"\\d+\" all except last followed directly but a number. </li>\n<li>Sheet number is lower or upper cases (hence the re.IGNORECASE) preceded by a \"-\" a space or nothing, then the word \"sheet\" followed by \"-\" space or nothing and then a number.</li>\n</ul>\n\n<p>The filenames follow these patterns:</p>\n\n<ul>\n<li>(Product Name)-(PAF/PA-#) (Sheet #)-(Revision)</li>\n<li>(\\w(?:\\w*(?:-|\\s|_)?\\w+)*)(-PA(?:F|)-\\d+)(?:(?:\\s|-)sheet(?:\\s|-)\\d+)(-(?:FG|RD|X|A|)\\d+)</li>\n<li>(Product Name)-(PAF/PA-#)-(Revision) (Sheet #)</li>\n<li>(\\w(?:\\w*(?:-|\\s|_)?\\w+)*)(-PA(?:F|)-\\d+)(?:(?:\\s|-)sheet(?:\\s|-)\\d+)(-(?:FG|RD|X|A|)\\d+)</li>\n<li>(Product Name)-(PAF/PA-#)-(Revision)</li>\n<li>(\\w(?:\\w*(?:-|\\s|_)?\\w+)*)(-PA(?:F|)-\\d+)(-(?:FG|RD|X|A|)\\d+)</li>\n<li>(Product Name)-(Revision) (Sheet #)</li>\n<li>(\\w(?:\\w*(?:-|\\s|_)?\\w+)*)(-(?:FG|RD|X|A|)\\d+)(?:(?:\\s|-)sheet(?:\\s|-)\\d+)</li>\n<li>(Product Name)-(Revision)</li>\n<li>(\\w(?:\\w*(?:-|\\s|_)?\\w+)*)(-(?:FG|RD|X|A|)\\d+)</li>\n</ul>\n\n<p>PAF PA are product type denotations, Sheet # is useless info, and FG#, RD#, X#, A#, or # are all product revisions. I need product name, denotation, and revision all to be in their own group. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>^(\\w(?:\\w*(?:-|\\s|_)?\\w+)*)\n(?:\n(-(?:FG|RD|X|A|)\\d+)|\n(-PA(?:F|)-\\d+)(-(?:FG|RD|X|A|)\\d+)|\n(-PA(?:F|)-\\d+)(?:(?:\\s|-)sheet(?:\\s|-)\\d+)|\n(-PA(?:F|)-\\d+)(?:(?:\\s|-)sheet(?:\\s|-)\\d+)(-(?:FG|RD|X|A|)\\d+)\n)\n(?:.*)?$\n</code></pre>\n\n<p>I've tried the above regex but it doesn't work correctly. First it returns too many groups, I would only like 3.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>pattern = re.compile(r'''^(\\w(?:\\w*(?:-|\\s|_)?\\w+)*)        # match any alphanumeric and dashes without leading or trailing dashes\n                         (-PA(?:F|)-\\d+)                    # match '-PAF-&lt;number&gt;' or '-PA-&lt;number&gt;'\n                         (?:(?:\\s|-|)?sheet(?:\\s|-|)?\\d+)?  # match '?sheet?&lt;number&gt;' where ? can be &lt;space&gt; or '-'\n                         (-(?:FG|RD|X|A|)\\d+)?              # match '-FG&lt;number&gt;', '-RD&lt;number&gt;', '-X&lt;number&gt;', '-A&lt;number&gt;' or &lt;number&gt;\n                         (?:.*)?$''', flags=re.IGNORECASE|re.VERBOSE)\n</code></pre>\n\n<p>The aforementioned strings should match with the regex.</p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 2, "last_activity_date": 1557956384, "creation_date": 1557956384, "answer_id": 56157997, "question_id": 56157923, "link": "https://stackoverflow.com/questions/56157923/store-unique-substrings-from-many-lines/56157997#56157997", "title": "Store unique substrings from many lines", "body": "<p>I would split the lines according to <code>/</code> with a maxsplit of 2, discard the last item (which is the rest of the string that you don't need), join back the strings, then put that in a set comprehension to remove duplicates:</p>\n\n<pre><code>with open(\"file.txt\") as lines:\n    result = {\"/\".join(s.split(\"/\",maxsplit=2)[:-1]) for s in lines}\n</code></pre>\n\n<p>result:</p>\n\n<pre><code>&gt;&gt;&gt; result\n{'a/b', 'a/c', 'a/d'}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1557983820, "post_id": 56158086, "comment_id": 98950266, "body": "for your example you can just to <code>lines = file_content.splitlines()</code>"}], "tags": [], "owner": {"reputation": 533, "user_id": 2547431, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a97d8601185defe7b2375171dceb9a6e?s=128&d=identicon&r=PG", "display_name": "Smarties89", "link": "https://stackoverflow.com/users/2547431/smarties89"}, "is_accepted": true, "score": 1, "last_activity_date": 1557956949, "creation_date": 1557956949, "answer_id": 56158086, "question_id": 56157923, "link": "https://stackoverflow.com/questions/56157923/store-unique-substrings-from-many-lines/56158086#56158086", "title": "Store unique substrings from many lines", "body": "<p>I made an example without much magic.\nThe first we write to the file but you can remove that (it is just to easily show you how it works).</p>\n\n<pre><code>file_content = \"\"\"a/b/X/Y/1\na/b/X/Y/2\na/b/X/Y/3\na/b/X/Z/1\na/b/X/Z/2\na/b/X/Z/3\na/c/M/N/1\na/c/M/N/2\na/c/M/N/3\na/d/F/G/123\na/d/F/G/124\na/d/F/G/125\n\"\"\"\n\n# This can be removed as it is just to show how it works\nwith open('file.txt', 'w') as f:\n    f.write(file_content)\n\nwith open('file.txt', 'r') as f:\n    lines = f.readlines()\n\nresult = set()\nfor line in lines:\n    a, b, *rest = line.split('/')\n    result.add(f'{a}/{b}')\n\nprint(result)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1557983899, "post_id": 56158160, "comment_id": 98950289, "body": "<code>line.strip()[0:3]</code> is assuming that identifiers can only have 1 char long (and no need to strip either with that slicing)"}], "tags": [], "owner": {"reputation": 19646, "user_id": 494074, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/741e480d426fabd85825861bd6481ccd?s=128&d=identicon&r=PG", "display_name": "Ankur Agarwal", "link": "https://stackoverflow.com/users/494074/ankur-agarwal"}, "is_accepted": false, "score": 1, "last_activity_date": 1557957321, "creation_date": 1557957321, "answer_id": 56158160, "question_id": 56157923, "link": "https://stackoverflow.com/questions/56157923/store-unique-substrings-from-many-lines/56158160#56158160", "title": "Store unique substrings from many lines", "body": "<pre><code>def find_unique(input_file):\n    output = set()\n    with open(input_file) as f:\n        for line in f:\n            output.add(line.strip()[0:3])\n\n    return list(output)\n\nprint(find_unique(\"input_file\"))\n</code></pre>\n\n<p>This gives:</p>\n\n<pre><code>['a/b', 'a/d', 'a/c']\n</code></pre>\n\n<p>for file containing:</p>\n\n<pre><code>a/b/X/Y/1\na/b/X/Y/2\na/b/X/Y/3\na/b/X/Z/1\na/b/X/Z/2\na/b/X/Z/3\na/c/M/N/1\na/c/M/N/2\na/c/M/N/3\na/d/F/G/123\na/d/F/G/124\na/d/F/G/125\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 11506546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a81a2d8833034e3512b2566b3e8afab9?s=128&d=identicon&r=PG&f=1", "display_name": "pystarter94", "link": "https://stackoverflow.com/users/11506546/pystarter94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 56158086, "answer_count": 3, "score": 4, "last_activity_date": 1557983917, "creation_date": 1557956025, "last_edit_date": 1557983917, "question_id": 56157923, "link": "https://stackoverflow.com/questions/56157923/store-unique-substrings-from-many-lines", "title": "Store unique substrings from many lines", "body": "<p>I have a file which looks like this.</p>\n\n<pre><code>a/b/X/Y/1\na/b/X/Y/2\na/b/X/Y/3\n...\na/b/X/Z/1\na/b/X/Z/2\na/b/X/Z/3\n...\na/c/M/N/1\na/c/M/N/2\na/c/M/N/3\n...\na/d/F/G/123\na/d/F/G/124\na/d/F/G/125\n</code></pre>\n\n<p>Symbols are placeholders.</p>\n\n<p>I'm interested in the unique substrings consisting of the first and second symbol separated by a <code>\"/\"</code>. In other words, in the example I want to build a list consisting of <code>[\"a/b\", \"a/c\", \"a/d\"]</code>.</p>\n\n<p>How to do this in Python idiomatically?</p>\n"}, {"tags": ["python", "regex", "regex-lookarounds", "regex-group", "regex-greedy"], "comments": [{"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 0, "creation_date": 1557956183, "post_id": 56157896, "comment_id": 98944841, "body": "Use <a href=\"https://docs.python.org/3/library/urllib.parse.html\" rel=\"nofollow noreferrer\">urllib.parse</a> to parse the URL components."}], "answers": [{"tags": [], "owner": {"reputation": 2960, "user_id": 8089674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29551894f595eb07cf3e8d4c27b36626?s=128&d=identicon&r=PG&f=1", "display_name": "Robo Mop", "link": "https://stackoverflow.com/users/8089674/robo-mop"}, "is_accepted": false, "score": 1, "last_activity_date": 1557978754, "last_edit_date": 1592644375, "creation_date": 1557978194, "answer_id": 56160505, "question_id": 56157896, "link": "https://stackoverflow.com/questions/56157896/regex-for-extracting-domains-and-subdomains/56160505#56160505", "title": "RegEx for extracting domains and subdomains", "body": "<p>Although Robert Harvey has suggested a useful method of <code>urllib.parse</code>, here's my attempt at the regex:</p>\n<pre><code>(?:http[s]?:\\/\\/)?(?:www\\.)?([^/\\n\\r\\s]+\\.[^/\\n\\r\\s]+)(?:/)?(\\w+)?\n</code></pre>\n<p>As seen at <a href=\"https://regex101.com/r/fWgiHa/3\" rel=\"nofollow noreferrer\">regex101.com</a></p>\n<h1>Explanation -</h1>\n<p>First, the regex checks whether there is a <code>https://</code> or <code>http://</code>. If so, it ignores it, but starts searching after that.</p>\n<p>Then the regex checks for a <code>www.</code> - It's important to note that this has been kept optional, so if the user enters <code>my website is site.com</code>, <code>site.com</code> will be matched.</p>\n<p><code>[^/\\n\\r\\s]+\\.[^/\\n\\r\\s]+</code> matches the actual url you need, so it won't have spaces or newlines. Oh, and there must be at least one period (<code>.</code>) in there.</p>\n<p>Since your question looks like you want to match the sub directory as well, I've added <code>(\\w+)?</code> at the end.</p>\n<h1>TL;DR</h1>\n<p>Group 0 - Entire url</p>\n<p>Group 1 - The domain name</p>\n<p>Group 2 - The sub-directory</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6553328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/omcAX.jpg?s=128&g=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/6553328/emma"}, "is_accepted": true, "score": 1, "last_activity_date": 1557978212, "creation_date": 1557978212, "answer_id": 56160508, "question_id": 56157896, "link": "https://stackoverflow.com/questions/56157896/regex-for-extracting-domains-and-subdomains/56160508#56160508", "title": "RegEx for extracting domains and subdomains", "body": "<p>You expression seems to be working perfectly fine and it outputs what you might want to. I only added an <code>i</code> flag and slightly modify it to:</p>\n\n<pre><code>(https?:\\/\\/)?([w]{3}\\.)?(\\w*.\\w*)([\\/\\w]*)\n</code></pre>\n\n<h3>RegEx</h3>\n\n<p>If this wasn't your desired expression, you can modify/change your expressions in <a href=\"https://regex101.com/r/S48FwF/1\" rel=\"nofollow noreferrer\">regex101.com</a>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/ZMJpW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZMJpW.png\" alt=\"enter image description here\"></a></p>\n\n<h3>RegEx Circuit</h3>\n\n<p>You can also visualize your expressions in <a href=\"https://jex.im/regulex/#!flags=&amp;re=%5E(a%7Cb)*%3F%24\" rel=\"nofollow noreferrer\">jex.im</a>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/NCIpu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NCIpu.png\" alt=\"enter image description here\"></a></p>\n\n<h3>Python Code</h3>\n\n<pre><code># coding=utf8\n# the above tag defines encoding for this document and is for Python 2.x compatibility\n\nimport re\n\nregex = r\"(https?:\\/\\/)?([w]{3}\\.)?(\\w*.\\w*)([\\/\\w]*)\"\n\ntest_str = (\"https://www.facebook.org/hello\\n\"\n    \"http://www.xxxx.wordpress.com/hello\\n\"\n    \"http://www.xxxx.yyy.zzz.wordpress.com/hello\")\n\nsubst = \"\\\\3\"\n\n# You can manually specify the number of replacements by changing the 4th argument\nresult = re.sub(regex, subst, test_str, 0, re.MULTILINE | re.IGNORECASE)\n\nif result:\n    print (result)\n\n# Note: for Python 2.7 compatibility, use ur\"\" to prefix the regex and u\"\" to prefix the test string and substitution.\n</code></pre>\n\n<h3>JavaScript Demo</h3>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const regex = /(https?:\\/\\/)?([w]{3}\\.)?(\\w*.\\w*)([\\/\\w]*)/gmi;\r\nconst str = `https://www.facebook.org/hello\r\nhttp://www.xxxx.wordpress.com/hello\r\nhttp://www.xxxx.yyy.zzz.wordpress.com/hello`;\r\nconst subst = `$3`;\r\n\r\n// The substituted value will be contained in the result variable\r\nconst result = str.replace(regex, subst);\r\n\r\nconsole.log('Substitution result: ', result);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11784891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fecc2784829d05bb5af532318ccef60a?s=128&d=identicon&r=PG&f=1", "display_name": "Ankita Patel", "link": "https://stackoverflow.com/users/11784891/ankita-patel"}, "is_accepted": false, "score": 0, "last_activity_date": 1606754418, "last_edit_date": 1606754418, "creation_date": 1606753280, "answer_id": 65077261, "question_id": 56157896, "link": "https://stackoverflow.com/questions/56157896/regex-for-extracting-domains-and-subdomains/65077261#65077261", "title": "RegEx for extracting domains and subdomains", "body": "<pre><code>print(&quot;-------------&quot;)\n\n# coding=utf8\n# the above tag defines encoding for this document and is for Python 2.x compatibility\n\n    import re\n    \n    regex = r&quot;(https?:\\/\\/)?([w]{3}\\.)?(\\w*.\\w*)([\\/\\w]*)&quot;\n    regex1 = r&quot;\\.?(microsoft.com.*)&quot;\n    test_str = (\n    &quot;https://blog.microsoft.com/test.html\\n&quot;\n    &quot;https://www.blog.microsoft.com/test/test\\n&quot;\n    &quot;https://microsoft.com\\n&quot;\n    &quot;http://www.blog.xyz.abc.microsoft.com/test/test\\n&quot;\n    &quot;https://www.microsoft.com&quot;)\n    \n    subst = &quot;\\\\3&quot;\n    if test_str:\n        print (test_str)\n    \n    print (&quot;-----&quot;)\n    # You can manually specify the number of replacements by changing the 4th argument\n    result = re.sub(regex, subst, test_str, 0, re.MULTILINE | re.IGNORECASE)\n    if result:\n        print (result)\n    \n    print (&quot;-----&quot;)\n    result = re.sub(regex1, &quot;&quot;, result, 0, re.MULTILINE | re.IGNORECASE)\n    if result:\n        print (result)\n    \n    print (&quot;-----&quot;)\n    \n\n    \n</code></pre>\n"}], "owner": {"reputation": 944, "user_id": 9951273, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-W6YcrnvY-do/AAAAAAAAAAI/AAAAAAAAAPk/A6Su_M50f6E/photo.jpg?sz=128", "display_name": "Matt", "link": "https://stackoverflow.com/users/9951273/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 630, "favorite_count": 1, "accepted_answer_id": 56160508, "answer_count": 3, "score": 1, "last_activity_date": 1606754418, "creation_date": 1557955870, "last_edit_date": 1557978398, "question_id": 56157896, "link": "https://stackoverflow.com/questions/56157896/regex-for-extracting-domains-and-subdomains", "title": "RegEx for extracting domains and subdomains", "body": "<p>I'm trying to strip a bunch of websites down to their domain names i.e:</p>\n\n<pre><code>https://www.facebook.org/hello \n</code></pre>\n\n<p>becomes <code>facebook.org</code>.</p>\n\n<p>I'm using the regex pattern finder: </p>\n\n<pre><code>(https?:\\/\\/)?([wW]{3}\\.)?([\\w]*.\\w*)([\\/\\w]*)\n</code></pre>\n\n<p>This catches most cases but occasionally there will be websites such as: </p>\n\n<pre><code>http://www.xxxx.wordpress.com/hello\n</code></pre>\n\n<p>which I want to strip to <code>xxxx.wordpress.com</code>. </p>\n\n<p>How can I identify those cases while still identifying all other normal entries?</p>\n"}, {"tags": ["python", "python-3.x", "python-requests"], "comments": [{"owner": {"reputation": 1407, "user_id": 5919154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca0f83c18e982b8675e9ba617307194e?s=128&d=identicon&r=PG&f=1", "display_name": "nathan.medz", "link": "https://stackoverflow.com/users/5919154/nathan-medz"}, "edited": false, "score": 2, "creation_date": 1557956072, "post_id": 56157868, "comment_id": 98944806, "body": "your finally block is stopping the return, then returning None which causes a 500. Remove your finally block or put some logic in it."}, {"owner": {"reputation": 2180, "user_id": 3855999, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/26af4b33a36bd35eea4fed5672fe4778?s=128&d=identicon&r=PG&f=1", "display_name": "el323", "link": "https://stackoverflow.com/users/3855999/el323"}, "reply_to_user": {"reputation": 1407, "user_id": 5919154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca0f83c18e982b8675e9ba617307194e?s=128&d=identicon&r=PG&f=1", "display_name": "nathan.medz", "link": "https://stackoverflow.com/users/5919154/nathan-medz"}, "edited": false, "score": 0, "creation_date": 1557957395, "post_id": 56157868, "comment_id": 98945178, "body": "@nathan.medz Yes thanks for the help. I dont know what I was thinking. Can you write an answer so that I can accept it?"}], "owner": {"reputation": 2180, "user_id": 3855999, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/26af4b33a36bd35eea4fed5672fe4778?s=128&d=identicon&r=PG&f=1", "display_name": "el323", "link": "https://stackoverflow.com/users/3855999/el323"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1557955745, "creation_date": 1557955745, "question_id": 56157868, "link": "https://stackoverflow.com/questions/56157868/flask-endpoint-always-returns-response-with-500", "title": "Flask endpoint always returns response with 500", "body": "<p>I have the following endpoint which makes ssh connection to a server and copies some files onto it.</p>\n\n<pre><code>@upgrade_api.route(\"/take_copy_postgres_backup\", methods=['POST'])\ndef take_copy_postgres_backup():\n    try:\n        if request.method == 'POST':\n            data = request.get_json()\n\n            hostname = data['hostname']\n            username = data['username']\n            password = data['password']\n            scp_path = data['scp_path']\n            ssh_port = data['ssh_port'] or 22\n\n            ssh = SSHClient()\n            ssh.load_system_host_keys()\n            ssh.set_missing_host_key_policy(AutoAddPolicy())\n            ssh.connect(hostname=hostname, port=ssh_port, username=username, password=password, compress=True)\n\n        // Open a file and copy to server over scp\n\n        return Response('Success', 200)\n    except ssh_exception.BadHostKeyException as e:\n        logger.error(e)\n        return Response('Cannot verify SSH server host key', 404)\n    except ssh_exception.AuthenticationException as e:\n        logger.error(e)\n        return Response(response='Authentication for SSH server failed', status=401)\n    except ssh_exception.SSHException as e:\n        logger.error(e)\n        return Response('SSH to the server failed for some reason', 500)\n    except Exception as e:\n        logger.error(e)\n        return Response('Internal Server Error', 500)\n    finally:\n\n        //Close the file\n</code></pre>\n\n<p>On providing invalid username and/or password I am expecting that <code>AuthenticationException</code> will be handled and a response with 401 status code will be returned. However on hitting the endpoint using curl or postman I always get the following response:</p>\n\n<pre><code>&lt;!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 3.2 Final//EN\"&gt;\n&lt;title&gt;500 Internal Server Error&lt;/title&gt;\n&lt;h1&gt;Internal Server Error&lt;/h1&gt;\n&lt;p&gt;The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.&lt;/p&gt;\n</code></pre>\n\n<p>Even if the <code>AuthenticationException</code> is handled and logged I still get <code>500 - Internal Server Error</code>.</p>\n\n<p>I tried removing the generic exception at the end and running again and still getting the same response. I also tried running a debugger but cant seem to find where the response is actually being sent.</p>\n\n<p>Any help will be really appreciated. Thanks.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 10770344, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ynm5ZS9yy5Y/AAAAAAAAAAI/AAAAAAAAADU/xuHwht5i4hM/photo.jpg?sz=128", "display_name": "Steve", "link": "https://stackoverflow.com/users/10770344/steve"}, "edited": false, "score": 0, "creation_date": 1557987685, "post_id": 56157921, "comment_id": 98951625, "body": "Thank you @WeNYoBen, your answer worked perfectly, It took me a little while to understand as i&#39;m new to python but now that I understand its works great, I also took your advice to use labeled names ie: &#39;01&#39;: &#39;master failed&#39;.  Thank you once again for your fast accurate reply."}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 1, "last_activity_date": 1557956021, "creation_date": 1557956021, "answer_id": 56157921, "question_id": 56157858, "link": "https://stackoverflow.com/questions/56157858/i-need-to-compare-two-dfs-for-matches-and-mismatches-i-also-need-to-identify-w/56157921#56157921", "title": "I need to compare two df&#39;s for matches and mismatches, I also need to identify which answer is from the master df in the event of a mismatch", "body": "<p>In your case using <code>replace</code> after str sum , ps : you define the mapping by yourself like  <code>{'00':'both failed', '01': 'master failed'...}</code></p>\n\n<pre><code>(df_answers.astype(str)+df_master.astype(str)).replace({'00':0,'01':3,'10':2,'11':1})\nOut[129]: \n   B0  B1  B2  B3  B4\n0   3   2   0   0   0\n1   0   0   3   2   0\n2   0   0   0   1   0\n3   0   0   0   0   1\n4   0   1   0   0   0\n5   1   0   0   0   0\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 10770344, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ynm5ZS9yy5Y/AAAAAAAAAAI/AAAAAAAAADU/xuHwht5i4hM/photo.jpg?sz=128", "display_name": "Steve", "link": "https://stackoverflow.com/users/10770344/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 56157921, "answer_count": 1, "score": 3, "last_activity_date": 1557956021, "creation_date": 1557955708, "question_id": 56157858, "link": "https://stackoverflow.com/questions/56157858/i-need-to-compare-two-dfs-for-matches-and-mismatches-i-also-need-to-identify-w", "title": "I need to compare two df&#39;s for matches and mismatches, I also need to identify which answer is from the master df in the event of a mismatch", "body": "<p>I have two data frames in python and want to compare the two to look for matches as well as mismatches.  It is important though that I can identify in the mismatches which answer is from the master answer sheet and which answer is from the users answer.</p>\n\n<p>I decided to use the pandas df.where function to achieve this, it worked except for the ability to identify which answer is from the master answer sheet and which is from the users answers in the event of a mismatch.</p>\n\n<pre><code># I have a DataFrame called df_master (master answer sheet)\n\nimport pandas as pd\n\ndf_master = pd.DataFrame({'B0': [1, 0, 0, 0, 0, 1],\n            'B1': [0, 0, 0, 0, 1, 0],\n            'B2': [0, 1, 0, 0, 0, 0],\n            'B3': [0, 0, 1, 0, 0, 0],\n            'B4': [0, 0, 0, 1, 0, 0]})\nprint(df_master)\n\n#    B0  B1  B2  B3  B4\n# 0   1   0   0   0   0\n# 1   0   0   1   0   0\n# 2   0   0   0   1   0\n# 3   0   0   0   0   1\n# 4   0   1   0   0   0\n# 5   1   0   0   0   0\n\n# I also have a DataFrame called df_answers (users answers)\n\ndf_answers = pd.DataFrame({'B0': [0, 0, 0, 0, 0, 1],\n            'B1': [1, 0, 0, 0, 1, 0],\n            'B2': [0, 0, 0, 0, 0, 0],\n            'B3': [0, 1, 1, 0, 0, 0],\n            'B4': [0, 0, 0, 1, 0, 0]})\n\nprint(df_answers)\n\n#    B0  B1  B2  B3  B4\n# 0   0   1   0   0   0\n# 1   0   0   0   1   0\n# 2   0   0   0   1   0\n# 3   0   0   0   0   1\n# 4   0   1   0   0   0\n# 5   1   0   0   0   0\n\n# when I compare the the two df's, for each match, matches correctly, where there\n# is no match I have used other=2.  However this is a problem as I cannot see which is\n# the correct answer.  It would be great if there was a way to work the code to reflect\n# the master as a 3 and the incorrect answer from the users to stay 2?\n\ncomparison = df_master.where(df_master.values==df_answers.values, other=2)\n\nprint(comparison)\n\n# My Results\n\n#    B0  B1  B2  B3  B4\n# 0   2   2   0   0   0\n# 1   0   0   2   2   0\n# 2   0   0   0   1   0\n# 3   0   0   0   0   1\n# 4   0   1   0   0   0\n# 5   1   0   0   0   0\n\n# Expected Results\n\n#    B0  B1  B2  B3  B4\n# 0   3   2   0   0   0\n# 1   0   0   3   2   0\n# 2   0   0   0   1   0\n# 3   0   0   0   0   1\n# 4   0   1   0   0   0\n# 5   1   0   0   0   0\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "jinja2"], "answers": [{"tags": [], "owner": {"reputation": 142, "user_id": 2083705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67509fa059112af7bcbc22c9c8df1942?s=128&d=identicon&r=PG", "display_name": "absentia", "link": "https://stackoverflow.com/users/2083705/absentia"}, "is_accepted": true, "score": 0, "last_activity_date": 1557956541, "creation_date": 1557956541, "answer_id": 56158019, "question_id": 56157855, "link": "https://stackoverflow.com/questions/56157855/cannot-get-template-on-jinja2/56158019#56158019", "title": "Cannot get template on jinja2", "body": "<p>Found out that <code>FyleSystemLoader</code> should receives full path to folder, not a relative. Their documentation doesn't make it clear.</p>\n\n<pre><code>loader = FileSystemLoader('fullpath/to/file')\n</code></pre>\n"}], "owner": {"reputation": 142, "user_id": 2083705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67509fa059112af7bcbc22c9c8df1942?s=128&d=identicon&r=PG", "display_name": "absentia", "link": "https://stackoverflow.com/users/2083705/absentia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 56158019, "answer_count": 1, "score": 0, "last_activity_date": 1557956541, "creation_date": 1557955701, "question_id": 56157855, "link": "https://stackoverflow.com/questions/56157855/cannot-get-template-on-jinja2", "title": "Cannot get template on jinja2", "body": "<p>I'm trying to use <code>jinja2</code> as template for a xml-like language.</p>\n\n<p>The code below, is a example of this language with a jinja2 base template. This template calls a child one.</p>\n\n<p><strong>Base Template:</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt; \n&lt;!-- An NCL SlideShow example with embedded Jinja2 template --&gt;\n&lt;ncl id=\"slideShow\"&gt;\n    &lt;head&gt;\n        &lt;connectorBase&gt;\n            &lt;importBase documentURI=\"connectorBase.ncl\" alias=\"conBase\"/&gt;\n        &lt;/connectorBase&gt;\n        &lt;regionBase&gt;\n            &lt;region id=\"main\" width=\"100%\" height=\"100%\" zIndex=\"1\"/&gt;\n        &lt;/regionBase&gt;\n        &lt;descriptorBase&gt;\n            &lt;descriptor id=\"ImageDes\" region=\"main\"/&gt;\n        &lt;/descriptorBase&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;port id=\"startSlideShow\" component=\"image1\"/&gt;\n        {% block medias %}\n        {% endblock %}\n    &lt;/body&gt;\n&lt;/ncl&gt;\n</code></pre>\n\n<p><strong>Child Template:</strong></p>\n\n<pre><code>{% extends \"slide_show.j2.ncl\" %}\n{% block media %}\n    &lt;media id=\"image1\" src=\"media/WinterSun.jpg\" \ndescriptor=\"ImageDes\"/&gt; \n{% endblock media %}\n</code></pre>\n\n<p>From a python code, I try to load base template file.</p>\n\n<pre><code>if __name__ == \"__main__\":\n    env = Environment(\n        loader=FileSystemLoader('/templates/slide_show.j2'),\n        autoescape=select_autoescape(['ncl', 'xml'])\n    )\n\n    template = env.get_template('slide_show.j2')\n</code></pre>\n\n<p>However, I get this exception below:</p>\n\n<blockquote>\n  <p>jinja2.exceptions.TemplateNotFound: slide_show.j2</p>\n</blockquote>\n"}, {"tags": ["python", "python-2to3"], "answers": [{"tags": [], "owner": {"reputation": 1487, "user_id": 1564935, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/boNQA.jpg?s=128&g=1", "display_name": "codingatty", "link": "https://stackoverflow.com/users/1564935/codingatty"}, "is_accepted": false, "score": -1, "last_activity_date": 1557976264, "creation_date": 1557976264, "answer_id": 56160273, "question_id": 56157854, "link": "https://stackoverflow.com/questions/56157854/python-2to3-safe-set-of-fixers-for-python-2-and-3/56160273#56160273", "title": "Python-2to3: Safe Set of Fixers for Python 2 and 3", "body": "<p>I don't think you're going to find one. Your best approach instead is to use the #! syntax to indicate what Python you want to use and use 2to3 as you're ready on each one. (If you're on Windows, look into <a href=\"https://docs.python.org/3/using/windows.html#launcher\" rel=\"nofollow noreferrer\">Python launcher</a> to make coexistence a little easier.)</p>\n\n<p>I have one module I wrote that needs to work with both 2 and 3; and I have code at the top that looks like this:</p>\n\n<pre><code>import sys\nPYTHON3 = sys.version_info.major == 3\nPYTHON2 = sys.version_info.major == 2\n\nif PYTHON2:\n    import StringIO\n    stringio = StringIO.StringIO\n    bytesio = StringIO.StringIO # In Python2, stringIO takes strings of binary data\n    import urllib2\n    URL_open = urllib2.urlopen\n    HTTPError = urllib2.HTTPError\n\nif PYTHON3:\n    import io\n    stringio = io.StringIO\n    bytesio  = io.BytesIO # In Python3, use BytesIO for binary data\n    import urllib.request\n    URL_open = urllib.request.urlopen\n    import urllib.error\n    HTTPError = urllib.error.HTTPError\n</code></pre>\n\n<p>and scattered throughout things like:</p>\n\n<pre><code>if PYTHON2:\n    f = stringio(self.XMLData)\nif PYTHON3:\n    f = bytesio(self.XMLData.encode(encoding=\"utf-8\"))\n</code></pre>\n\n<p>It's not like there's way of expressing a line that will work in both systems. You need a lot of patching like this. It's really not worth it unless you have a use case (like this) where there's some reason you must support both Python2 and Python3 in one module.</p>\n\n<p>My use case was <em>relatively</em> straightforward. The <a href=\"https://stackoverflow.com/questions/26223761/which-2to3-fixers-output-valid-python-2-code\">similar question</a> you refer to points to the Dive Into Python <a href=\"http://diveintopython3.problemsolving.io/porting-code-to-python-3-with-2to3.html\" rel=\"nofollow noreferrer\">\"Porting Code to Python 3 with 2to3\" chapter</a>, which shows how much stuff is different, much of which is <em>incompatibly</em> different, requiring a lot of conditional coding as above. I wouldn't recommend it.</p>\n"}, {"tags": [], "owner": {"reputation": 5563, "user_id": 836748, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa0788ea4af0508334e34621bda10a9e?s=128&d=identicon&r=PG", "display_name": "Aaron D. Marasco", "link": "https://stackoverflow.com/users/836748/aaron-d-marasco"}, "is_accepted": false, "score": 1, "last_activity_date": 1573608927, "creation_date": 1573608927, "answer_id": 58829106, "question_id": 56157854, "link": "https://stackoverflow.com/questions/56157854/python-2to3-safe-set-of-fixers-for-python-2-and-3/58829106#58829106", "title": "Python-2to3: Safe Set of Fixers for Python 2 and 3", "body": "<p>I recently found a tool <code>futurize</code> that does this for you. In EPEL there's even an RPM for CentOS 6 (which I am stuck with on some machines at work) - it's <code>python-future</code>.</p>\n\n<p><a href=\"http://python-future.org/automatic_conversion.html\" rel=\"nofollow noreferrer\">http://python-future.org/automatic_conversion.html</a> - stage 1 is the \"prep for python 3 while maintaining compatibility\" with stock packages. I've found that stage 2 requires other packages that are installed with it, but not available on other machines when I copy the scripts around.</p>\n\n<p>One example:\n<code>futurize -l -f all -f idioms -f ws_comma -x long *py</code></p>\n\n<p>Adding <code>-w</code> will write the changes back out for you.</p>\n"}], "owner": {"reputation": 14060, "user_id": 234270, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c4ed6fa8257c4601b262851116eb3332?s=128&d=identicon&r=PG", "display_name": "speedplane", "link": "https://stackoverflow.com/users/234270/speedplane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1573608927, "creation_date": 1557955687, "question_id": 56157854, "link": "https://stackoverflow.com/questions/56157854/python-2to3-safe-set-of-fixers-for-python-2-and-3", "title": "Python-2to3: Safe Set of Fixers for Python 2 and 3", "body": "<p>What subset of Python 2to3 fixers output valid Python 2 code? </p>\n\n<p>Rather than move to Python 3 all at once, I'd like to use 2to3 to get most of the way there, saving the really hairy stuff (e.g., unicode changes) for a later time or possibly using <code>six</code> to support both. I'd like an initial pass to be done by <code>2to3</code>, but I want it to generate valid Python 2 code as an intermediate step.</p>\n\n<p>Note: I'm aware of <a href=\"https://stackoverflow.com/questions/26223761/which-2to3-fixers-output-valid-python-2-code\">a similar question</a>, but it wasn't really answered.</p>\n"}, {"tags": ["python", "python-3.x", "list", "list-comprehension", "nameerror"], "comments": [{"owner": {"reputation": 30387, "user_id": 6260170, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0caf9a0d28be362618ffc0223b301d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chris_Rands", "link": "https://stackoverflow.com/users/6260170/chris-rands"}, "edited": false, "score": 3, "creation_date": 1557955746, "post_id": 56157850, "comment_id": 98944696, "body": "<code>zip()</code> it......"}, {"owner": {"reputation": 1052, "user_id": 8474432, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/71c628c0ad8557384540efe8c7cdab1e?s=128&d=identicon&r=PG&f=1", "display_name": "curious_cosmo", "link": "https://stackoverflow.com/users/8474432/curious-cosmo"}, "reply_to_user": {"reputation": 30387, "user_id": 6260170, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0caf9a0d28be362618ffc0223b301d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chris_Rands", "link": "https://stackoverflow.com/users/6260170/chris-rands"}, "edited": false, "score": 0, "creation_date": 1557956326, "post_id": 56157850, "comment_id": 98944889, "body": "@Chris_Rands Thanks, but I was specifically asking about the list comprehension method here..."}], "answers": [{"comments": [{"owner": {"reputation": 1052, "user_id": 8474432, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/71c628c0ad8557384540efe8c7cdab1e?s=128&d=identicon&r=PG&f=1", "display_name": "curious_cosmo", "link": "https://stackoverflow.com/users/8474432/curious-cosmo"}, "edited": false, "score": 0, "creation_date": 1557956276, "post_id": 56157944, "comment_id": 98944873, "body": "Thank you, but I was curious if I could accomplish the same thing with list comprehension (trying to work on my list comprehension skills). Or is it not possible?"}, {"owner": {"reputation": 5007, "user_id": 10924296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483c21a8a3f03bbf92cb99539ec97dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Reedinationer", "link": "https://stackoverflow.com/users/10924296/reedinationer"}, "reply_to_user": {"reputation": 1052, "user_id": 8474432, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/71c628c0ad8557384540efe8c7cdab1e?s=128&d=identicon&r=PG&f=1", "display_name": "curious_cosmo", "link": "https://stackoverflow.com/users/8474432/curious-cosmo"}, "edited": false, "score": 0, "creation_date": 1557956894, "post_id": 56157944, "comment_id": 98945042, "body": "@curious_cosmo yes, it is possible"}], "tags": [], "owner": {"reputation": 5007, "user_id": 10924296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483c21a8a3f03bbf92cb99539ec97dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Reedinationer", "link": "https://stackoverflow.com/users/10924296/reedinationer"}, "is_accepted": true, "score": 1, "last_activity_date": 1557956880, "last_edit_date": 1557956880, "creation_date": 1557956153, "answer_id": 56157944, "question_id": 56157850, "link": "https://stackoverflow.com/questions/56157850/list-comprehension-to-combine-elements-of-sublists-by-column/56157944#56157944", "title": "List comprehension to combine elements of sublists by column", "body": "<p>That's the purpose of the built in <code>zip</code> function. You just need to unpack your lists as you call it. Something like:</p>\n\n<pre><code>allrows = [['NEPW46486', 'NEPW46550', 'sersic', 20.04, 21.12],\n           ['NEPW89344', 'NEPW89346', 'sersic', 20.33, 19.66]]\n\nfor item in zip(*allrows): # unpack with *allrows\n    print(item)\n</code></pre>\n\n<p>Nets you:</p>\n\n<pre><code>('NEPW46486', 'NEPW89344')\n('NEPW46550', 'NEPW89346')\n('sersic', 'sersic')\n(20.04, 20.33)\n(21.12, 19.66)\n</code></pre>\n\n<p>If for some reason <code>zip()</code> is unsatisfactory, to make a list comprehension it is usually easiest to make the actual code structure and then condense it. Starting with:</p>\n\n<pre><code>cols = []\nfor index, item in enumerate(allrows[0]):\n    col = []\n    for row in allrows:\n        col.append(row[index])\n    cols.append(col)\nprint(cols)\n</code></pre>\n\n<p>We get the desired</p>\n\n<blockquote>\n  <p>[['NEPW46486', 'NEPW89344'], ['NEPW46550', 'NEPW89346'], ['sersic', 'sersic'], [20.04, 20.33], [21.12, 19.66]]</p>\n</blockquote>\n\n<p>So then we can just condense it to a single line like:</p>\n\n<pre><code>cols = [[row[index] for row in allrows] for index, item in enumerate(allrows[0])]\nprint(cols)\n</code></pre>\n\n<p>Which again yields:</p>\n\n<blockquote>\n  <p>[['NEPW46486', 'NEPW89344'], ['NEPW46550', 'NEPW89346'], ['sersic', 'sersic'], [20.04, 20.33], [21.12, 19.66]]</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": false, "score": 2, "last_activity_date": 1558181463, "last_edit_date": 1558181463, "creation_date": 1557957563, "answer_id": 56158192, "question_id": 56157850, "link": "https://stackoverflow.com/questions/56157850/list-comprehension-to-combine-elements-of-sublists-by-column/56158192#56158192", "title": "List comprehension to combine elements of sublists by column", "body": "<p>You could do it in a list comprehension using the built-in <a href=\"https://docs.python.org/3/library/functions.html#zip\" rel=\"nofollow noreferrer\"><code>zip()</code></a> function like this:</p>\n\n<pre><code>allrows = [['NEPW46486', 'NEPW46550', 'sersic', 20.04, 21.12],\n           ['NEPW89344', 'NEPW89346', 'sersic', 20.33, 19.66],]\n\ncols = [list(col) for col in zip(*allrows)]\n</code></pre>\n\n<p>Result:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[['NEPW46486', 'NEPW89344'], ['NEPW46550', 'NEPW89346'], ['sersic', 'sersic'], [20.04, 20.33], [21.12, 19.66]]\n</code></pre>\n\n<p>This is sometimes called \"<a href=\"https://en.wikipedia.org/wiki/Transpose\" rel=\"nofollow noreferrer\">transposing</a>\" (meaning the swapping of columns for rows) a 2D matrix of values.</p>\n"}, {"tags": [], "owner": {"reputation": 893, "user_id": 6568097, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f0e29f0f368838d1c104e87f9cd6594c?s=128&d=identicon&r=PG&f=1", "display_name": "akhilsp", "link": "https://stackoverflow.com/users/6568097/akhilsp"}, "is_accepted": false, "score": 0, "last_activity_date": 1558174763, "creation_date": 1558174763, "answer_id": 56198042, "question_id": 56157850, "link": "https://stackoverflow.com/questions/56157850/list-comprehension-to-combine-elements-of-sublists-by-column/56198042#56198042", "title": "List comprehension to combine elements of sublists by column", "body": "<p>If you want only a list of tuples, you can simply do:</p>\n\n<pre><code>list(zip(*allrows))  # python 3\n</code></pre>\n\n<p>or</p>\n\n<pre><code>zip(*allrows)  # python 2\n</code></pre>\n"}], "owner": {"reputation": 1052, "user_id": 8474432, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/71c628c0ad8557384540efe8c7cdab1e?s=128&d=identicon&r=PG&f=1", "display_name": "curious_cosmo", "link": "https://stackoverflow.com/users/8474432/curious-cosmo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 56157944, "answer_count": 3, "score": 1, "last_activity_date": 1558181463, "creation_date": 1557955630, "last_edit_date": 1557956896, "question_id": 56157850, "link": "https://stackoverflow.com/questions/56157850/list-comprehension-to-combine-elements-of-sublists-by-column", "title": "List comprehension to combine elements of sublists by column", "body": "<p>I have a list of lists like so:</p>\n\n<pre><code>allrows = [['NEPW46486', 'NEPW46550', 'sersic', 20.04, 21.12],\n['NEPW89344', 'NEPW89346', 'sersic', 20.33, 19.66], ...]\n</code></pre>\n\n<p>And I'd like to create a new list of lists, where each list corresponds to one \"column\". My desired output is:</p>\n\n<pre><code>cols = [['NEPW46486', 'NEPW89344', ...], ['NEPW46550', 'NEPW89346', ...], ['sersic', 'sersic', ...], [20.04, 20.33, ...], [21.12, 19.66, ...]]\n</code></pre>\n\n<p>I figured I could accomplish this with list comprehension, like this:</p>\n\n<pre><code>cols = [[row[n] for row in allrows] for n in range(len(row))]\n</code></pre>\n\n<p>But I get a <code>NameError</code> that <code>row</code> is not defined. I tried to also switch the orders of my loop statements, but that did not give me my desired output (instead it gave me exactly what I started with). How can I achieve my desired output with list comprehension?</p>\n"}, {"tags": ["python", "activemq", "producer-consumer"], "answers": [{"tags": [], "owner": {"reputation": 15533, "user_id": 375722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04770ed0ecf1e91e322484f66c9726ba?s=128&d=identicon&r=PG", "display_name": "Tim Bish", "link": "https://stackoverflow.com/users/375722/tim-bish"}, "is_accepted": false, "score": 0, "last_activity_date": 1557970993, "creation_date": 1557970993, "answer_id": 56159691, "question_id": 56157832, "link": "https://stackoverflow.com/questions/56157832/consumer-level-message-processing-timeout-in-activemq/56159691#56159691", "title": "Consumer level message processing timeout in activemq", "body": "<p>No ActiveMQ does not have such a feature, you either need to NACK the message or unsubscribe to allow acquired messages to be redelivered to another consumer.</p>\n"}], "owner": {"reputation": 37, "user_id": 5957682, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-w_X4_fFlM8c/AAAAAAAAAAI/AAAAAAAAAjs/4l8c1oEs1ME/photo.jpg?sz=128", "display_name": "Kannan K", "link": "https://stackoverflow.com/users/5957682/kannan-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557970993, "creation_date": 1557955506, "question_id": 56157832, "link": "https://stackoverflow.com/questions/56157832/consumer-level-message-processing-timeout-in-activemq", "title": "Consumer level message processing timeout in activemq", "body": "<p>I Have a consumer subscribes to the queue using subscribe method with ack=client-individual mode.\nwhen an exception occurs it got hung up rather than processing the next message.\nIn try block i have connection.ack() method and in catch block i just logged  the exception because sending a connection.nack() sends the message to dead letter queue.</p>\n\n<p>1). I tried to do a NACK which sends message to DLQ (Not desired).\n2). I have created a long polling consumer which unsubscribe after particular time and subscribe again in this way i am getting the same message.</p>\n\n<h2>Sample Consumer:</h2>\n\n<h2>Note:</h2>\n\n<p>Consider exception occurs in func_to_exec call in on_message method. </p>\n\n<h2>methods to review:</h2>\n\n<p>on_message : where the final exception block gracefully handled.\nconsume_msg : where the subscribe and unsubscribe happens in while TRUE</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import sys\nimport stomp\nimport time\nimport json\nfrom core.lib.foundation.activemq_wrappers.activemq_configmanager import MQConfigMgnr\n\nACK_MODES = (\"auto\", \"client\", \"client-individual\")\n\nclass CustomListener(stomp.ConnectionListener):\n\n    def __init__(self,conn, func_to_exec,ack_mode):\n        self.conn = conn\n        self.func_to_exec = func_to_exec\n        self.ack_mode = ack_mode\n\n    def on_error(self, headers, message):\n        print('received an error::%s' % message)\n\n    def call_nack(self, msg_id, subscription):\n        try:\n            if self.ack_mode!=0:\n                print(\"nack done..!\")\n                self.conn.nack(msg_id, int(subscription))\n        except Exception as ex:\n            raise ex\n\n    def call_ack(self, msg_id, subscription):\n        try:\n            if self.ack_mode!=0:\n                print(\"ack done..!\")\n                self.conn.ack(msg_id, int(subscription))\n        except Exception as ex:\n            raise ex\n\n    def on_message(self, headers, message):\n        try:\n\n            try:\n                message = json.loads(message)\n            except Exception:\n                self.call_nack(headers.get(\"message-id\"),headers.get(\"subscription\"))\n            else:\n                response = self.func_to_exec(message,headers)\n                self.call_ack(headers.get(\"message-id\"),headers.get(\"subscription\"))\n                if 'reply-to' in headers:\n                    self.conn.send(destination='/queue/{}'.format(headers.get(\"reply-to\")),\n                                   body=json.dumps(response), header={\"JMSDeliveryMode\":\"Persistent\",\n                                                                      \"JMSPriority\":4})\n        except Exception as ex:\n            print(\"exception in on_message::%s\"%ex)\n\n    def on_disconnected(self):\n        print('disconnected')\n\nclass QueueConsumer:\n\n    def __init__(self, section_name, ack_mode=2):\n        try:\n            self.ack_mode = ack_mode\n            self.configobj = MQConfigMgnr()\n            self.section = self.configobj.get_config(\"ACTIVEMQ_PARAMS\")\n            self.hosts = self.section.get(\"hosts\")\n            self.ports = self.section.get(\"ports\")\n            self.ENCODE_FORMAT = self.section.get(\"ENCODE_FORMAT\")\n            self.conn_param = zip(self.hosts,self.ports)\n            self.conn = stomp.Connection11(self.conn_param, encoding=self.ENCODE_FORMAT)\n            func_to_exec = self.get_execution_func(section_name)\n            self.conn.start()\n            self.conn.connect(wait=True,)\n            self.conn.set_listener('', CustomListener(self.conn, func_to_exec,ack_mode))\n        except stomp.exception.ConnectFailedException as stomp_ex:\n            raise stomp_ex\n        except Exception as ex:\n            raise ex\n\n    def get_execution_func(self,section_name):\n        try:\n            consumer_data = self.configobj.get_config(\"CONSUMERS\")[\"QUEUES\"]\n            file_name = consumer_data[section_name][\"FILE_NAME\"]\n            func_to_exec = consumer_data[section_name][\"FUNC_TO_EXEC\"]\n            self.queue_names = consumer_data[section_name][\"QUEUE_NAME\"]\n            self.queue_names = \",\".join(map((lambda x:\"/queue/{}\".format(x)),self.queue_names))\n            print(self.queue_names)\n            mod = __import__(file_name, fromlist=['*'])\n            func_to_execute = mod.__dict__[func_to_exec]\n            return func_to_execute\n        except Exception as ex:\n            raise ex\n\n    def consume_msg(self):\n        try:\n            while True:\n                self.conn.subscribe(self.queue_names,1, ack=ACK_MODES[self.ack_mode],\n                                headers={\"activemq.prefetchSize\":1}\n                                )\n                time.sleep(60)\n                self.conn.unsubscribe(1)\n        except Exception as ex:\n            raise ex\n\n    def close_connection(self):\n        self.conn.disconnect()\n\n    def execute(self):\n        try:\n            self.consume_msg()\n            self.close_connection()\n        except Exception as ex:\n            raise ex\n\nif __name__ == \"__main__\":\n    try:\n        section_name = sys.argv[1]\n    except IndexError as ex:\n        print(\"please provide section name\")\n        sys.exit(0)\n    obj = QueueConsumer(section_name,ack_mode=2)\n    obj.execute()\n</code></pre>\n\n<p>Can we able to set maximum message processing time for messages in consumer so that if the message processing reaches the MAX_TIME then the same message will get redelivered (or) the consumer able to pick another message after the message processing timeout.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 2, "creation_date": 1557955533, "post_id": 56157797, "comment_id": 98944620, "body": "df.update(df.select_dtypes(include=[&#39;object&#39;]).apply(pd.Seri&zwnj;&#8203;es.str.lower,axis=1)&zwnj;&#8203;)"}, {"owner": {"reputation": 3891, "user_id": 4585713, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0163e6ba41d9dfd2c9d13c528c87e1f5?s=128&d=identicon&r=PG&f=1", "display_name": "PMende", "link": "https://stackoverflow.com/users/4585713/pmende"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1557955928, "post_id": 56157797, "comment_id": 98944770, "body": "@WeNYoBen This would fail on columns that are of mixed python types, wouldn&#39;t it?"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 3891, "user_id": 4585713, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0163e6ba41d9dfd2c9d13c528c87e1f5?s=128&d=identicon&r=PG&f=1", "display_name": "PMende", "link": "https://stackoverflow.com/users/4585713/pmende"}, "edited": false, "score": 0, "creation_date": 1557956161, "post_id": 56157797, "comment_id": 98944828, "body": "@PMende I am not sure about the mixtype in his real data or not , and if the data have mixed type,  for data safety purpose we should downgrade the dtype."}, {"owner": {"reputation": 3891, "user_id": 4585713, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0163e6ba41d9dfd2c9d13c528c87e1f5?s=128&d=identicon&r=PG&f=1", "display_name": "PMende", "link": "https://stackoverflow.com/users/4585713/pmende"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1557956304, "post_id": 56157797, "comment_id": 98944882, "body": "@WeNYoBen I just checked. Your method fails explicitly. Mine fails silently: it turns mixed <code>str</code>/numeric columns to columns with <code>str</code> and <code>NaN</code> in the column where there used to be numerics."}], "answers": [{"tags": [], "owner": {"reputation": 3891, "user_id": 4585713, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0163e6ba41d9dfd2c9d13c528c87e1f5?s=128&d=identicon&r=PG&f=1", "display_name": "PMende", "link": "https://stackoverflow.com/users/4585713/pmende"}, "is_accepted": true, "score": 2, "last_activity_date": 1557956630, "last_edit_date": 1557956630, "creation_date": 1557955732, "answer_id": 56157865, "question_id": 56157797, "link": "https://stackoverflow.com/questions/56157797/how-to-apply-lower-to-pandas-columns/56157865#56157865", "title": "How to apply lower() to pandas columns?", "body": "<p>Just try each column and pass if it fails:</p>\n\n<pre><code>for col in df.columns:\n    try:\n        df[col] = df[col].str.lower()\n    except AttributeError:\n        pass\n</code></pre>\n\n<p>This way, you avoid the explicit type checking.</p>\n\n<p>Warning: this will take mixed-type columns that have strings in them, and replace non-string entries with <code>NaN</code>.</p>\n"}], "owner": {"reputation": 3030, "user_id": 2702370, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cbdef79714a99bcd92fc92f4c09ab821?s=128&d=identicon&r=PG&f=1", "display_name": "crash", "link": "https://stackoverflow.com/users/2702370/crash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 56157865, "answer_count": 1, "score": 0, "last_activity_date": 1557956630, "creation_date": 1557955298, "question_id": 56157797, "link": "https://stackoverflow.com/questions/56157797/how-to-apply-lower-to-pandas-columns", "title": "How to apply lower() to pandas columns?", "body": "<p>What's the correct way to lowercase all text-like columns in a pandas dataframe? I was trying this approach</p>\n\n<pre><code>def lowercase(col):\n    if isinstance(col, __pandas_object_type__):\n        return col.str.lower()\ndf = df.apply(lowercase)\n</code></pre>\n\n<p>where <code>__pandas_object_type__</code> is just a placeholder to identify object types or string types. I know for date and times that would be something like <code>pd.DatetimeIndex</code> but I can't find the right alternative for my case.</p>\n\n<p>Thanks for your help</p>\n"}, {"tags": ["python", "python-3.x", "impala", "ibis"], "answers": [{"tags": [], "owner": {"reputation": 21679, "user_id": 564538, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4f4c10a585c476957ab989299ec4dcb9?s=128&d=identicon&r=PG", "display_name": "Phillip Cloud", "link": "https://stackoverflow.com/users/564538/phillip-cloud"}, "is_accepted": true, "score": 1, "last_activity_date": 1558197647, "creation_date": 1558197647, "answer_id": 56200949, "question_id": 56157766, "link": "https://stackoverflow.com/questions/56157766/converting-simple-impala-sql-query-to-ibis/56200949#56200949", "title": "Converting simple impala sql query to ibis", "body": "<p>You need to name your aggregation (note the <code>last_update_date=agg</code> keyword argument passed to the <code>aggregate</code> call):</p>\n\n<pre><code>agg = joblist_table_handle.lastupdatedate.max()\njoblist = joblist_table_handle.group_by('id').aggregate(last_update_date=agg).sort_by('last_update_date').execute()\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 5555959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mwGuD.jpg?s=128&g=1", "display_name": "Trincity", "link": "https://stackoverflow.com/users/5555959/trincity"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 56200949, "answer_count": 1, "score": 0, "last_activity_date": 1562506309, "creation_date": 1557955139, "last_edit_date": 1562506309, "question_id": 56157766, "link": "https://stackoverflow.com/questions/56157766/converting-simple-impala-sql-query-to-ibis", "title": "Converting simple impala sql query to ibis", "body": "<p>I'm trying to convert a simple Impala sql query to an ibis query in python, but I'm having trouble understanding ibis's syntax when converting from sql.</p>\n\n<p>So far, I've tried this:</p>\n\n<pre><code>agg = joblist_table_handle.lastupdatedate.max()\njoblist = joblist_table_handle.group_by('id').aggregate(agg).sort_by('lastupdatedate').execute()\n</code></pre>\n\n<p>I'm hoping to get my result close to the sql query:</p>\n\n<pre><code>SELECT id, max(lastupdatedate) \nFROM joblist_table\nGROUP BY id\nSORT BY lastupdatedate\n</code></pre>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1557955161, "post_id": 56157755, "comment_id": 98944507, "body": "How are you calling <code>close()</code>?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1557955188, "post_id": 56157755, "comment_id": 98944513, "body": "You need to put <code>global cast</code> inside each of the functions. It doesn&#39;t have any effect if you write it outside a function."}, {"owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "edited": false, "score": 0, "creation_date": 1557955219, "post_id": 56157755, "comment_id": 98944521, "body": "You need parentheses after your function definitions, otherwise SyntaxErrors are raised"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1557955256, "post_id": 56157755, "comment_id": 98944531, "body": "<code>while cast=1</code> should be <code>while cast == 1</code>. <code>=</code> is assignment, <code>==</code> is comparison."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1557955285, "post_id": 56157755, "comment_id": 98944540, "body": "Or just write <code>while cast:</code>"}, {"owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "edited": false, "score": 0, "creation_date": 1557955314, "post_id": 56157755, "comment_id": 98944550, "body": "How do you expect your <code>while</code> loop to be exited?"}, {"owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1557955350, "post_id": 56157755, "comment_id": 98944565, "body": "@Barmar all of those suggestions boil down to the fact that there is no exit condition on the while loop"}, {"owner": {"reputation": 31, "user_id": 4133214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d243107023e490ecbee1c8ba2db087e6?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/4133214/sam"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1557955892, "post_id": 56157755, "comment_id": 98944757, "body": "@Barmar I have another function which is calling close()"}, {"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 1, "creation_date": 1557956100, "post_id": 56157755, "comment_id": 98944812, "body": "How are you imagining that this other function can do anything, when your program is stuck in a <code>while</code> loop?  That would require multithreading, but there&#39;s no sign of that in the fragment of code you posted."}, {"owner": {"reputation": 31, "user_id": 4133214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d243107023e490ecbee1c8ba2db087e6?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/4133214/sam"}, "reply_to_user": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1558016047, "post_id": 56157755, "comment_id": 98967739, "body": "@jasonharper please see my edit above. Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 31, "user_id": 4133214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d243107023e490ecbee1c8ba2db087e6?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/4133214/sam"}, "edited": false, "score": 0, "creation_date": 1558023396, "post_id": 56157946, "comment_id": 98972009, "body": "&quot;Didn&#39;t work&quot; is not a problem description.  You still haven&#39;t provided the code you&#39;re using to call <code>close</code> in parallel with <code>music</code> executing.  You have to have some sort of multiprocessing."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1557956160, "creation_date": 1557956160, "answer_id": 56157946, "question_id": 56157755, "link": "https://stackoverflow.com/questions/56157755/how-to-make-loop-inside-a-function-in-python/56157946#56157946", "title": "How to make loop inside a function in Python?", "body": "<p>Each function that changes the value must declare the variable to be global; otherwise, it's merely a local variable with the same name.</p>\n\n<p>Also, if you're using a simple boolean flag, then use boolean values.</p>\n\n<pre><code>def music:\n    global cast\n    cast = True\n    while cast:\n        os.system('mpg123 /home/debian/sample.mp3')\n\ndef close:\n    global cast\n    cast = False\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 4133214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d243107023e490ecbee1c8ba2db087e6?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/4133214/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1558016007, "creation_date": 1557955080, "last_edit_date": 1558016007, "question_id": 56157755, "link": "https://stackoverflow.com/questions/56157755/how-to-make-loop-inside-a-function-in-python", "title": "How to make loop inside a function in Python?", "body": "<p>I have a function which plays audio file in os. I want to keep playing the audio on a loop when the function is called, and it should only stop unless another close function is called.</p>\n\n<hr>\n\n<pre><code>def music:\n    cast=1\n    while cast=1:\n        os.system('mpg123 /home/debian/sample.mp3')\n\ndef close:\n    cast=0\n\nglobal cast\n</code></pre>\n\n<hr>\n\n<p>I have another function which is calling close()</p>\n\n<p><strong>EDIT</strong>: If I put my sound playing command like this: </p>\n\n<pre><code>os.system('mpg123 --loop 3 /home/debian/sample.mp3')\n</code></pre>\n\n<p>Then after playing audio 3 times, the program does go to <strong>close</strong> function.</p>\n\n<p>How can I make it goto <strong>close</strong> function as soon as I get cast=0?</p>\n\n<p>This gets stuck on while loop and keeps playing the audio file forever.</p>\n\n<p>Any ideas on how to make it work? </p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "c"], "comments": [{"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1558018489, "post_id": 56157725, "comment_id": 98969282, "body": "<i>The actual array passed is ...</i>. Where in above code is that array passed? and where is it printed? BTW: the <code>&lt;</code> redirection is normally interpreted at shell level, not by the command, so I wander how the C program finds something to read..."}, {"owner": {"reputation": 324, "user_id": 6499614, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/124e72315edcf08d379f261f53a46469?s=128&d=identicon&r=PG&f=1", "display_name": "shaifali Gupta", "link": "https://stackoverflow.com/users/6499614/shaifali-gupta"}, "reply_to_user": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1558018636, "post_id": 56157725, "comment_id": 98969381, "body": "bb is that array. The received array is printed through C program."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1558018790, "post_id": 56157725, "comment_id": 98969485, "body": "You should try to give enough code for others to reproduce, that is what is called a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Without that I cannot guess what exactly you do, nor what you would want."}, {"owner": {"reputation": 324, "user_id": 6499614, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/124e72315edcf08d379f261f53a46469?s=128&d=identicon&r=PG&f=1", "display_name": "shaifali Gupta", "link": "https://stackoverflow.com/users/6499614/shaifali-gupta"}, "reply_to_user": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1558018872, "post_id": 56157725, "comment_id": 98969538, "body": "This itself is the full code. I have not written further C code yet. Right now, I am testing how to pass numpy arrayas or matrices to C from python."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1558019268, "post_id": 56157725, "comment_id": 98969805, "body": "What is the Python code that passes the array? <code>communicate</code> passes just nothing here!"}, {"owner": {"reputation": 324, "user_id": 6499614, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/124e72315edcf08d379f261f53a46469?s=128&d=identicon&r=PG&f=1", "display_name": "shaifali Gupta", "link": "https://stackoverflow.com/users/6499614/shaifali-gupta"}, "reply_to_user": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1558019443, "post_id": 56157725, "comment_id": 98969907, "body": "The two lines mentioned above is the ony python code. Perhaps what you mentioned could be the problem. I am not familiar with the syntax. Can you please specify what to pass using communicate?"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1558019721, "post_id": 56157725, "comment_id": 98970058, "body": "My question is just <i>where on earth can come <code>b&#39;0.0000000.0000000.0000000.0000000.0000000.0000000.0000000.&zwnj;&#8203;0000000.0000000.0000&zwnj;&#8203;00&#39;</code>?</i> because nothing in shown code can print that. Is there at least a <code>print stdout</code> or anything else. If you do not want to answer, I will not be able to help..."}, {"owner": {"reputation": 324, "user_id": 6499614, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/124e72315edcf08d379f261f53a46469?s=128&d=identicon&r=PG&f=1", "display_name": "shaifali Gupta", "link": "https://stackoverflow.com/users/6499614/shaifali-gupta"}, "reply_to_user": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1558019835, "post_id": 56157725, "comment_id": 98970129, "body": "Yes, this is print stdout"}], "answers": [{"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 1, "last_activity_date": 1558020793, "creation_date": 1558020793, "answer_id": 56172055, "question_id": 56157725, "link": "https://stackoverflow.com/questions/56157725/issue-with-passing-array-to-subprocess-module-while-calling-c-program-from-pytho/56172055#56172055", "title": "Issue with passing array to subprocess module while calling c program from python", "body": "<p>The only channels between a process and its subprocess are pipes, that is simple streams of bytes.</p>\n\n<p>The C programs receives an empty stdin stream through <code>communicate</code>, which is the same as reading from an empty file. It reads 10 values from that (and finds nothing) so every <code>scanf</code> returns -1 and does not change the original value of <code>rhs[i]</code> which just happens to be <code>0.</code>. Then it prints that on its stdout channel, that is 10 <code>0.</code> double value if <code>%f</code> format.</p>\n\n<p>And the Python script receives that byte string in its <code>stdout</code> variable. The initial <code>b</code> is just the marker that <code>stdout</code> is a byte string and not an unicode string.</p>\n\n<p>If that matters, there is no way to pass complex objects between a process and its subprocess: everything must be serialized at a string of bytes by the sender and deserialized by the receiver. The Python <code>struct</code> module is specifically good at serializing simple types in a portable way so that they can be easily deserialized in C.</p>\n"}], "owner": {"reputation": 324, "user_id": 6499614, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/124e72315edcf08d379f261f53a46469?s=128&d=identicon&r=PG&f=1", "display_name": "shaifali Gupta", "link": "https://stackoverflow.com/users/6499614/shaifali-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "closed_date": 1558042248, "answer_count": 1, "score": 0, "last_activity_date": 1558030458, "creation_date": 1557954917, "last_edit_date": 1558030458, "question_id": 56157725, "link": "https://stackoverflow.com/questions/56157725/issue-with-passing-array-to-subprocess-module-while-calling-c-program-from-pytho", "closed_reason": "Needs details or clarity", "title": "Issue with passing array to subprocess module while calling c program from python", "body": "<p>I am using this code to call a C script from Python:</p>\n\n<pre><code>subprocess.check_output([\"./s_cg\",str(10),str(bb)])\n</code></pre>\n\n<p>The C script has code:</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\nint order;\nint i,j;\norder = atoi(argv[1]);\n\ndouble* rhs = malloc(order * sizeof(double));\nfor (i = 0; i &lt; order; i++) {\n              scanf(\"%lf\", &amp;rhs[i])\n\n          }\n\n\n for(i=0;i&lt;order;i++)\n  {\n    printf(\"%lf\",rhs[i]);\n  }\n\n    return 0;\n</code></pre>\n\n<p>}</p>\n\n<p>The actual array bb passed is: <code>array([1., 0., 0., 0., 0., 0., 0., 0., 0., 0.])</code></p>\n\n<p>But the printed array is: </p>\n\n<blockquote>\n  <p>b'0.0000000.0000000.0000000.0000000.0000000.0000000.0000000.0000000.0000000.000000'</p>\n</blockquote>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 2, "last_activity_date": 1557955264, "creation_date": 1557955264, "answer_id": 56157789, "question_id": 56157716, "link": "https://stackoverflow.com/questions/56157716/how-to-filter-numeric-string-list-in-dataframe-column/56157789#56157789", "title": "How to filter numeric string list in dataframe column?", "body": "<h3><code>literal_eval</code></h3>\n\n<pre><code>from ast import literal_eval\n\npred = lambda x: 40 &lt;= x &lt;= 45\nlamb = lambda s: str({*filter(pred, literal_eval(s))})\ndf.assign(col1=df.col1.apply(lamb))\n\n            col1  col2\n0  {41.5, 43.76}     3\n1  {41.5, 43.76}     4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22982, "user_id": 10189214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oTTBaX3HSZQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ohHVatc4khqXgYvNrBM40bMFj71Q/mo/photo.jpg?sz=128", "display_name": "Andy L.", "link": "https://stackoverflow.com/users/10189214/andy-l"}, "is_accepted": false, "score": 0, "last_activity_date": 1557957398, "last_edit_date": 1557957398, "creation_date": 1557957044, "answer_id": 56158105, "question_id": 56157716, "link": "https://stackoverflow.com/questions/56157716/how-to-filter-numeric-string-list-in-dataframe-column/56158105#56158105", "title": "How to filter numeric string list in dataframe column?", "body": "<p>Using <code>literal_val</code> to convert to <code>set</code> and <code>map</code> to convert and filter on condition as follows:</p>\n\n<pre><code>import ast\n\ndf['col1'] = df.col1.map(lambda x: {item for item in ast.literal_eval(x) if (40&lt;=item &lt;=45)})\n\n\nOut[1734]:\n            col1  col2\n0  {43.76, 41.5}     3\n1  {43.76, 41.5}     4\n</code></pre>\n"}], "owner": {"reputation": 1487, "user_id": 1709708, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/868a7da775b2263dd1d813a78f3e27cc?s=128&d=identicon&r=PG", "display_name": "user1709708", "link": "https://stackoverflow.com/users/1709708/user1709708"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 56157789, "answer_count": 2, "score": 0, "last_activity_date": 1557957398, "creation_date": 1557954874, "question_id": 56157716, "link": "https://stackoverflow.com/questions/56157716/how-to-filter-numeric-string-list-in-dataframe-column", "title": "How to filter numeric string list in dataframe column?", "body": "<pre><code>d = {'col1': \"{35.1, 43.76, 41.5, 38.71}\", 'col2': [3, 4]}\ndf = pd.DataFrame(data=d)\n</code></pre>\n\n<p>Assuming I don't have direct access to d (and d may contain more rows than shown), I would like to filter the values encoded in col1 so that all numeric values lie within a specified interval. Lets say the interval is [40, 45] then the expected result would be:</p>\n\n<pre><code>{'col1': \"{43.76, 41.5}\", 'col2': [3, 4]}\n</code></pre>\n\n<p>Is that somehow possible in an elegant pythonic way?</p>\n"}, {"tags": ["python", "flask", "swagger", "flask-restplus"], "answers": [{"comments": [{"owner": {"reputation": 155, "user_id": 7432408, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VvnBhsvnH3o/AAAAAAAAAAI/AAAAAAAAAEY/c9aP7QK3tR0/photo.jpg?sz=128", "display_name": "Matt Anderson", "link": "https://stackoverflow.com/users/7432408/matt-anderson"}, "edited": false, "score": 1, "creation_date": 1558012246, "post_id": 56163399, "comment_id": 98965310, "body": "Thank you!  This looks like exactly what I need.  I&#39;ll get this implemented"}], "tags": [], "owner": {"reputation": 3594, "user_id": 9871463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3KP5T.jpg?s=128&g=1", "display_name": "Dinko Pehar", "link": "https://stackoverflow.com/users/9871463/dinko-pehar"}, "is_accepted": true, "score": 1, "last_activity_date": 1557992769, "creation_date": 1557992769, "answer_id": 56163399, "question_id": 56157705, "link": "https://stackoverflow.com/questions/56157705/python-rest-api-numeric-type-route-parameter-issues/56163399#56163399", "title": "Python REST API Numeric Type Route Parameter Issues", "body": "<p>You can use <code>string</code> in path and evaluate can it be converted to <code>float</code>. If not, raise <code>ValueError</code> and print proper message.</p>\n\n<pre><code>ns_area = Namespace('Area', description='Area calculations')\n@ns_area.route('/Acre/&lt;string:input&gt;/ToSquareFoot')\nclass ConversionsArea(Resource):\n    def get(self, input):\n        try:\n            input = float(input)\n            return area.acre_to_ft2(input), 200\n        except ValueError:\n            return \"Can't convert {} to number\".format(input), 400\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 7432408, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VvnBhsvnH3o/AAAAAAAAAAI/AAAAAAAAAEY/c9aP7QK3tR0/photo.jpg?sz=128", "display_name": "Matt Anderson", "link": "https://stackoverflow.com/users/7432408/matt-anderson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 56163399, "answer_count": 1, "score": 1, "last_activity_date": 1557992769, "creation_date": 1557954816, "question_id": 56157705, "link": "https://stackoverflow.com/questions/56157705/python-rest-api-numeric-type-route-parameter-issues", "title": "Python REST API Numeric Type Route Parameter Issues", "body": "<p>I'm starting a new project in Python to aid me helping to learn the language.  I'm a C# developer and very comfortable with REST APIs, but I feel I'm missing something in Python.  I am writing this with Flask-RESTPlus and have been following examples to get it working.  As it currently stands, I do have a working API, but I'm trying to figure this one last piece out.</p>\n\n<p>I need to be able to create an API endpoint that accepts a numeric route parameter, regardless of whether it's an int of a float.  </p>\n\n<p>I can get my API working properly if I add multiple routes, but there has to be a better way.</p>\n\n<p>One of my endpoints:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>ns_area = Namespace('Area', description='Area calculations')\n@ns_area.route('/Acre/&lt;float:input&gt;/ToSquareFoot')\nclass ConversionsArea(Resource):\n    def get(self, input):\n        input = float(input)\n        return area.acre_to_ft2(input)\n\n</code></pre>\n\n<p>This returns a proper calculation</p>\n\n<pre><code>curl -X GET \"http://127.0.0.1:5000/api/v1/Area/Acre/1.2/ToSquareFoot\" -H \"accept: application/json\"\n</code></pre>\n\n<p>This returns a 404 because the route parameter isn't a floating point number</p>\n\n<pre><code>curl -X GET \"http://127.0.0.1:5000/api/v1/Area/Acre/1/ToSquareFoot\" -H \"accept: application/json\"\n</code></pre>\n\n<p>Also, if I don't have a type identifier, it defaults to a string.</p>\n\n<p>I'd really rather not have to duplicate routes like this.  </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>ns_area = Namespace('Area', description='Area calculations')\n@ns_area.route('/Acre/&lt;float:input&gt;/ToSquareFoot')\n@ns_area.route('/Acre/&lt;int:input&gt;/ToSquareFoot')\nclass ConversionsArea(Resource):\n    def get(self, input):\n        input = float(input)\n        return area.acre_to_ft2(input)\n\n</code></pre>\n"}, {"tags": ["python", "matrix", "neural-network", "backpropagation"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9556489, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gr6n2aOIJ4g/AAAAAAAAAAI/AAAAAAAAAHo/mXpiu00D984/photo.jpg?sz=128", "display_name": "Dilep Dev", "link": "https://stackoverflow.com/users/9556489/dilep-dev"}, "edited": false, "score": 0, "creation_date": 1558016477, "post_id": 56158926, "comment_id": 98968006, "body": "That would break the meaning of dEdW."}, {"owner": {"reputation": 311, "user_id": 2473475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f34c910cc0777383b087661047763925?s=128&d=identicon&r=PG", "display_name": "Julio P.C.", "link": "https://stackoverflow.com/users/2473475/julio-p-c"}, "reply_to_user": {"reputation": 13, "user_id": 9556489, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gr6n2aOIJ4g/AAAAAAAAAAI/AAAAAAAAAHo/mXpiu00D984/photo.jpg?sz=128", "display_name": "Dilep Dev", "link": "https://stackoverflow.com/users/9556489/dilep-dev"}, "edited": false, "score": 0, "creation_date": 1558040719, "post_id": 56158926, "comment_id": 98979711, "body": "Either way, you have to transform your matrices in some way to fit a matrix multiplication."}], "tags": [], "owner": {"reputation": 311, "user_id": 2473475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f34c910cc0777383b087661047763925?s=128&d=identicon&r=PG", "display_name": "Julio P.C.", "link": "https://stackoverflow.com/users/2473475/julio-p-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1557963350, "creation_date": 1557963350, "answer_id": 56158926, "question_id": 56157689, "link": "https://stackoverflow.com/questions/56157689/during-back-propagation-getting-valueerror-operands-could-not-be-broadcast-toge/56158926#56158926", "title": "During back-propagation getting ValueError: operands could not be broadcast together with shapes (1,3) (1,4)", "body": "<p>You should probably transpose your matrices.</p>\n\n<p>Matrices multiplication work like \"AxB  * BxC  =  AxC\", so you will not be able to multiply (1x4) * (3x4). Try transposing the second one, so you'll have a (1x4)*(4x3) multiplication.</p>\n\n<p>And also reorder the rest, so it should look like (4x1)<em>(1x4)</em>(4x3)<em>(3x1)</em>(1x2)</p>\n"}, {"tags": [], "owner": {"reputation": 595, "user_id": 4932655, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8856bb802bca5a531a31da481166540c?s=128&d=identicon&r=PG", "display_name": "Display name", "link": "https://stackoverflow.com/users/4932655/display-name"}, "is_accepted": false, "score": 0, "last_activity_date": 1558534491, "creation_date": 1558534491, "answer_id": 56258899, "question_id": 56157689, "link": "https://stackoverflow.com/questions/56157689/during-back-propagation-getting-valueerror-operands-could-not-be-broadcast-toge/56258899#56258899", "title": "During back-propagation getting ValueError: operands could not be broadcast together with shapes (1,3) (1,4)", "body": "<p>Switch your weight matrices. Suppose the following: Given an input matrix X of dimensions 4x2 (that is you have 4 inputs - aka your rows - and each input has a dimensionality of 2 elements) for example:</p>\n\n<blockquote>\n  <p>[[0, 0], [0, 1], [1, 0], [1, 1]]</p>\n</blockquote>\n\n<p>If your hidden layer has 4 neurons, your w0 weight matrix turns out to be of size 2x4. You'll have a b0 bias vector of 4 elements and upon calculating the activation on this layer, you'll end up with:</p>\n\n<pre><code>z1 = X @ w0 + b0  # 4x2 * 2x4 + 1x4 = 4x4\na1 = f(z1)  # 4x4\n</code></pre>\n\n<p>Then let's say in the output layer you have 2 elements which makes your w1 matrix of size 4x2 and your b1 vector of size 2. Doing the maths gives:</p>\n\n<pre><code>z2 = a1 @ w1 + b1  # 4x4 * 4x2 + 1x2 = 4x2\na2  = f(z)  # 4x2\n</code></pre>\n\n<p>During backpropagation you calculate a delta for each layer as:</p>\n\n<pre><code>d_O = (Y - T) * f'(z2)\nd_H = d_O @ W1.T * f'(z1)\n</code></pre>\n\n<p>where Y is your network's guess of size: 4x2</p>\n\n<p>T are the training labels, so they must match up: 4x2</p>\n\n<p>The multiplication is an element-wise multiplication, which makes your </p>\n\n<blockquote>\n  <p>d_O of size 4x2</p>\n</blockquote>\n\n<p>Calculating the hidden layer delta dimension is pretty similar:</p>\n\n<p>d_O: 4x2</p>\n\n<p>W1 is of size 4x2, so the transpose is 2x4, with @ being the standard matrix multiplication your d_H dimension turns out as: </p>\n\n<blockquote>\n  <p>d_H of size 4x4</p>\n</blockquote>\n\n<p>For updating your weights then you have:</p>\n\n<pre><code>dW1 := a1.T @ d_O\ndW2 := X.T @ d_H\n</code></pre>\n\n<p>where a1 is a 4x4 matrix, d_O is a 4x2 matrix, which makes your dW1 a 4x2 matrix. W1 was of size 4x2.</p>\n\n<p>X is your input matrix of size 4x2, X.T is then 2x4, and d_H was 4x4, which makes dW0 a 2x4. Your original W0 was 2x4.</p>\n\n<p>Bias deltas are lot simpler:</p>\n\n<pre><code>db1 = np.sum(d_O, axis=0)\ndb0 = np.sum(d_H, axis=0)\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9556489, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gr6n2aOIJ4g/AAAAAAAAAAI/AAAAAAAAAHo/mXpiu00D984/photo.jpg?sz=128", "display_name": "Dilep Dev", "link": "https://stackoverflow.com/users/9556489/dilep-dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1573979195, "creation_date": 1557954716, "last_edit_date": 1573979195, "question_id": 56157689, "link": "https://stackoverflow.com/questions/56157689/during-back-propagation-getting-valueerror-operands-could-not-be-broadcast-toge", "title": "During back-propagation getting ValueError: operands could not be broadcast together with shapes (1,3) (1,4)", "body": "<p><p>I had created a neural network with one hidden layer with 3 nodes, the sigmoid function was used as the activation function\n<br/><br/>\n<b>The input layer</b> (2 nodes):<br/> \nX | X is a matrix with size (1x2)<br/><br/></p>\n\n<p><b>Hidden Layer</b> (3 nodes): <br/>\nW1 => will have a size (3x2) <br/>\nZ1 = X.(W1.T) + b <br/>\nA1 = \u03c3(Z) | (W1.T) is the transpose of matrix W <br/> \n<br/>\n<b>Output Layer</b> (4 nodes): <br/>\nW2 => will have a size (4x3) <br/>\nZ2 = A1.(W2.T) + b <br/>\nA2 = \u03c3(Z) <br/>\nE = 0.5*(Y- A2)^2 | Y is a matrix with size (1x4) <br/>\n<br/></p>\n\n<p>I wanted to calculate how W of hidden layer affects the E (cost function), applying the chain rule <br/></p>\n\n<p>dEdW1 = dEdA2 * dA2dZ2 * dZ2dA1 * dA1dZ1 * dZ1dW1 <br/>\n      = (A2-Y) * (\u03c3(Z2)*(1-\u03c3(Z2))) * W2.T * (\u03c3(Z1)*(1-\u03c3(Z1))) * X<br/>\nmatrix sizes=> (1x4) * (1x4) * (3x4) * (1x3) * (1x2)<br/><br/></p>\n\n<p>I know there is something wrong with my derivatives as I cannot multiply the matrices (they come in different sizes), can someone point out how to fix this<br/>\nHere is the implementation:</p>\n\n<pre><code>class Sigmoid:\n\ndef sigmoid(self, Z):\n    return (1 / (1 + numpy.exp(-Z)))\n\n# change in sigmoid w.r.t Z\ndef dsigmoiddZ(self, Z):\n    return self.sigmoid(Z) * (1 - self.sigmoid(Z))\n\nclass PrimaryLayer:\n\ndef __init__(self, node_count):\n    self.node_count = node_count\n    self.previous_layer = None\n    self.next_layer = None\n    self.Z = None\n    self.A = None\n\nclass SecondaryLayer(PrimaryLayer):\n\ndef __init__(self, node_count, previous_layer):\n    super().__init__(node_count)\n    self.dEdW = None\n    self.set_previous_layer(previous_layer)\n    self.set_next_layer_to_self()\n    self.set_W()\n    self.set_b()\n    self.set_Z()\n    self.set_A()\n\ndef set_previous_layer(self, previous_layer):\n    self.previous_layer = previous_layer\n\n# This points the next_layer of previous_layer to self\ndef set_next_layer_to_self(self):\n    self.previous_layer.next_layer = self\n\n# Randomly generate weights for this layer\ndef set_W(self):\n    self.W = numpy.random.random((self.node_count, self.previous_layer.node_count))\n\ndef set_b(self):\n    self.b = numpy.random.random()\n\ndef set_W_adjusted(self, learning_rate):\n    self.W_adjusted = W_adjusted\n\ndef set_Z(self):\n\n    previous_layer = self.previous_layer\n\n    if previous_layer.previous_layer is not None:\n        self.Z = numpy.dot(previous_layer.A, self.W.T) + self.b\n    else:\n        #if previous_layer.previos_layer = None then it is the Input Layer\n        self.Z = numpy.dot(previous_layer.X, self.W.T) + self.b\n\ndef set_A(self):\n    self.A = Sigmoid().sigmoid(self.Z)\n\ndef set_dAdZ(self):\n    self.dAdZ = self.A * (1 - self.A)\n\ndef set_dZdW(self):\n    self.dZdW = self.A\n\nclass InputLayer(PrimaryLayer):\n\ndef __init__(self, node_count, X):\n    super().__init__(node_count)\n    self.X = X\n\nclass OutputLayer(SecondaryLayer):\n\ndef __init__(self, node_count, previous_layer, Y):   \n    super().__init__(node_count, previous_layer)\n    self.Y = Y\n    self.set_E()\n\ndef set_E(self):\n    self.E = ((1 / 2) * numpy.square(self.Y - self.A))\n\ndef set_dEdA(self):\n    self.dEdA = self.A - self.Y\n\ndef set_dEdW(self):\n    self.set_dEdA()\n    self.set_dAdZ()\n    self.set_dZdW()\n    self.dEdW = self.dEdA * self.dAdZ * self.dZdW\n\nclass HiddenLayer(SecondaryLayer):\n\ndef __init__(self, node_count, previous_layer):\n    super().__init__(node_count, previous_layer)\n\ndef set_dEdW(self):\n    self.set_dAdZ()\n    self.set_dZdW()\n    self.dEdW = self.dAdZ * self.dZdW * self.calculate_derivative(self.next_layer)\n\n#calculate derivatives for other layer    \ndef calculate_derivative(self, next_layer):\n\n    this_layer = next_layer\n\n    if this_layer.next_layer is None:\n\n    # the outputlayer\n        this_layer.set_dAdZ()\n        this_layer.set_dEdA()\n        dAdZ = this_layer.dAdZ\n        dEdA = this_layer.dEdA\n        return dAdZ * dEdA\n\n    elif this_layer is not None:\n\n        this_layer.set_dAdZ()\n        # How a layer's Z changes w.r.t previous layer's A    \n        dZdA = this_layer.W.T\n        # How currrent layer's A changes w.r.t current layer's Z    \n        dAdZ = this_layer.dAdZ\n        return dZdA * dAdZ * self.calculate_derivative(this_layer.next_layer)\n\nclass NeuralNetwork:\n\ndef __init__(self):\n\n    X = numpy.array([[1, 1]])\n    Y = numpy.array([[2, 2, 2, 2]])\n\n    # create layers and foward propagate\n    self.input_layer = InputLayer(2, X)\n    self.h1 = HiddenLayer(3, self.input_layer)\n    self.output_layer = OutputLayer(4, self.h1, Y)\n\n    self.forward_propagation(self.input_layer)\n    self.back_propagation(self.output_layer)\n\ndef forward_propagation(self, input_layer):\n    current_layer = input_layer.next_layer     \n    if current_layer is not None:\n        current_layer.set_Z()\n        current_layer.set_A()\n\n        # if current layer is a outputlayer\n        if current_layer.next_layer is None:\n            current_layer.set_E()\n\n        self.forward_propagation(current_layer)\n\ndef back_propagation(self, output_layer):\n    current_layer = output_layer\n\n    # loop through all NON Input layers\n    if current_layer.previous_layer is not None:\n        current_layer.set_dEdW()\n\n    print(current_layer.dEdW)\n    self.back_propagation(current_layer.previous_layer)\n\nnn = NeuralNetwork()\n</code></pre>\n"}, {"tags": ["python", "django", "csv", "try-except"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1557995332, "post_id": 56157665, "comment_id": 98955465, "body": "You&#39;re going to have to show more detail, both of your import code and the contents of the CSV."}, {"owner": {"reputation": 1331, "user_id": 2354685, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/00d76750e1dceb7aae4c77125ddd6791?s=128&d=identicon&r=PG", "display_name": "Malik A. Rumi", "link": "https://stackoverflow.com/users/2354685/malik-a-rumi"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1558012464, "post_id": 56157665, "comment_id": 98965456, "body": "@DanielRoseman Done, as requested. I never seem to get the amount of code to put in right. When I put in what I think are the essentials, someone says they need more. When I put in all of it, someone says it&#39;s too much. I suppose the best thing is to stop worrying about it and just respond with more or less as the answerers need it to help me. Thanks."}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 1, "creation_date": 1558012756, "post_id": 56157665, "comment_id": 98965674, "body": "The key to posting code is to make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. For example, logging has nothing to do with this question, so remove all of it to reduce the size of the code and make it easier to understand.  Only a handful of lines is needed to demo the CSV."}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1558013259, "post_id": 56157665, "comment_id": 98966021, "body": "I&#39;m not really sure what you are trying to do here. There&#39;s nothing here that would raise ValidationError, so that except block will never be reached. And even if it was, there&#39;s no point modifying <code>row</code> <i>after</i> you have used it; once the except block exits, the loop continues with the next element in the row, so your changes would be removed."}, {"owner": {"reputation": 1331, "user_id": 2354685, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/00d76750e1dceb7aae4c77125ddd6791?s=128&d=identicon&r=PG", "display_name": "Malik A. Rumi", "link": "https://stackoverflow.com/users/2354685/malik-a-rumi"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1558112630, "post_id": 56157665, "comment_id": 99006299, "body": "@DanielRoseman What I was really after here - and maybe it isn&#39;t possible - was a way to use a variable for the row[&#39;end_date&#39;] value. Otherwise, I have to stick with my current solution and make two different csv: one for those with actual end dates and another one for those who have none - i.e., are currently still there."}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1558112756, "post_id": 56157665, "comment_id": 99006358, "body": "But of course it&#39;s possible. Just not in code that runs <i>after</i> you&#39;ve used it. Why not check before the create call?"}, {"owner": {"reputation": 1331, "user_id": 2354685, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/00d76750e1dceb7aae4c77125ddd6791?s=128&d=identicon&r=PG", "display_name": "Malik A. Rumi", "link": "https://stackoverflow.com/users/2354685/malik-a-rumi"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1558126338, "post_id": 56157665, "comment_id": 99011458, "body": "@DanielRoseman Yea, after I posted the prior comment it dawned on me that maybe I could use an if instead of trying to do all this in the try. Sometimes you just need another pair of eyes just to see the obvious. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 24, "user_id": 9076969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b488786a0f0e7bc8d9ee58e08ab0314?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/9076969/mark"}, "is_accepted": false, "score": 0, "last_activity_date": 1557955109, "creation_date": 1557955109, "answer_id": 56157760, "question_id": 56157665, "link": "https://stackoverflow.com/questions/56157665/importing-none-fields-in-a-csv/56157760#56157760", "title": "Importing None fields in a CSV", "body": "<p>isn't what you are after close but the other way - like this:</p>\n\n<pre><code>if row[value]:\n    #I have a value \nelse:\n   #row[value] doesn't exist\n</code></pre>\n\n<p>or to then just handle the not exist would be:</p>\n\n<pre><code>if not row[value]:\n   #row[value] doesn't exist\n</code></pre>\n"}], "owner": {"reputation": 1331, "user_id": 2354685, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/00d76750e1dceb7aae4c77125ddd6791?s=128&d=identicon&r=PG", "display_name": "Malik A. Rumi", "link": "https://stackoverflow.com/users/2354685/malik-a-rumi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 161, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1558012345, "creation_date": 1557954616, "last_edit_date": 1558012345, "question_id": 56157665, "link": "https://stackoverflow.com/questions/56157665/importing-none-fields-in-a-csv", "title": "Importing None fields in a CSV", "body": "<p>I have an historical db table of people in jobs that includes start and end date fields. I am inserting from a csv, and my script worked fine, except Python/Django sees my None fields as 'None', and it refuses to insert the rows that have empty end dates, meaning, all current jobholders are skipped. This except portion of a try/except failed:</p>\n\n<pre><code>    except ValidationError as v:\n        if row['end_date'] == 'null' or 'None' or '':\n            row['end_date'] = None\n</code></pre>\n\n<p>as did this one:</p>\n\n<pre><code>    except ValidationError as v:\n        if row['end_date'] in ['null', 'None', '']:\n            row['end_date'] = None\n</code></pre>\n\n<p>I solved the problem by filtering out the current jobholders, and running them in a separate csv with the script modified to:</p>\n\n<pre><code>            end_date=None\n</code></pre>\n\n<p>However, what I really need is some way to use a variable, like value...</p>\n\n<pre><code>        if row[value] == 'None':\n            row[value] = None\n</code></pre>\n\n<p>because I have more csv's to run, with other fields besides dates, and some of them are going to have empty/None values, too.</p>\n\n<p>Would some kind of string replace work?</p>\n\n<pre><code>        if row[value] == 'None':\n            row[value].replace(row[value], None)\n</code></pre>\n\n<p>or maybe default=None in the definition of the end_date field on my model? But then how do I make Django see the default value instead of the empty/None in the csv? According to the docs, <a href=\"https://docs.djangoproject.com/en/2.2/ref/models/fields/#django.db.models.Field.default\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/2.2/ref/models/fields/#django.db.models.Field.default</a> \"The default value is used when new model instances are created and a value isn\u2019t provided for the field.\". But I'm not sure how that would have worked here. Would I get the default value, or would I get the ValidationError?</p>\n\n<p>Finally, were my efforts to fix this in the except block misguided? What are the limits of what an except block can do to fix, as opposed to warn about, failures in the try block?</p>\n\n<p>Thanks.</p>\n\n<p>EDIT - the code -</p>\n\n<pre><code>#! usr/local/bin/python3.7\n# coding: utf-8\n\nimport csv\nimport sys\nimport logging\n\nfrom os import environ\nimport django\nsys.path.append('/home/malikarumi/Projects/hattie/hattie')\n\nenviron['DJANGO_SETTINGS_MODULE'] = 'hattie.settings'\ndjango.setup()\n\nfrom people.models import Company, Associate, CareerHistory\nfrom django.utils.text import slugify\nfrom django.db import IntegrityError\nfrom django.core.exceptions import ValidationError\nfrom django.contrib.contenttypes.models import ContentType\n\n\n# logging\nlogger = logging.getLogger(__name__)\nlogger.setLevel(logging.DEBUG)\nformatter = logging.Formatter('%(asctime)s:%(name)s:%(message)s')\nfile_handler = logging.FileHandler('2019-05-13_inserts.txt')\nlogger.addHandler(file_handler)\nfile_handler.setFormatter(formatter)\nfile_handler.setLevel(logging.INFO)\n\nstream_handler = logging.StreamHandler()\nlogger.addHandler(stream_handler)\nstream_handler.setFormatter(formatter)\n\n\nwith open('members6') as csvfile:\n    reader = csv.DictReader(csvfile, delimiter='\\t')\n    fieldnames = [\n        'last_name', 'first_name', 'middle_name', 'suffix',\n        'title', 'start_date', 'end_date'\n    ]\n    pc = ContentType.objects.get_for_model(Associate)\n    org = ContentType.objects.get_for_model(Company)\n    for row in reader:\n        try:\n            name_string = row['last_name'], row['first_name'], row['middle_name'], row['suffix']\n            associate_instance = Associate.objects.create(\n                last_name=row['last_name'], first_name=row['first_name'],\n                middle_name=row['middle_name'], suffix=row['suffix'],\n                slug=slugify(name_string))\n            CareerHistory.objects.create(\n                content_type_pc=pc, object_id_pc=associate_instance.uniqid,\n                content_type_org=org, object_id_org=\"828f4116-38eb-4f0c-9c5a-96a93682d106\",\n                title=row['title'], start_date=row['start_date'],\n                end_date=row['end_date']\n            )\n        except IntegrityError as e:\n            logger.warning(f\"Check for dupes: {name_string}, {e}\")\n            continue\n        except ValidationError as v:\n            if row['end_date'] in ['null', 'None', '']:\n                row['end_date'] = None\n\n\np.s. This also gets a name error:\n        value = row[f'{value}']\n</code></pre>\n\n<p>Edit - the csv</p>\n\n<pre><code>last_name   first_name  middle_name suffix  slug    title   start_date  end_date\nClarke  John    Hessin          Associate   1916-10-09  1922-09-18\nSutherland  George              Associate   1922-10-02  1938-01-17\nButler  Pierce              Associate   1923-01-02  1939-11-16\nSanford Edward  Terry           Associate   1923-02-19  1930-03-08\nRoberts Owen    Josephus            Associate   1930-06-02  1945-07-31\nMurphy  Frank               Associate   1940-02-05  1949-07-19\nByrnes  James   Francis         Associate   1941-07-08  1942-10-03\nJackson Robert  Houghwout           Associate   1941-07-11  1954-10-09\nRutledge    Wiley   Blount          Associate   1943-02-15  1949-09-10\nBurton  Harold  Hitz            Associate   1945-10-01  1958-10-13\nClark   Tom Campbell            Associate   1949-08-24  1967-06-12\nMinton  Sherman             Associate   1949-10-12  1956-10-15\nWhittaker   Charles Evans           Associate   1957-03-25  1962-03-31\nPaul John    Stevens            Associate   1975-12-19  2010-06-29\nO\u2019Connor    Sam  David         Associate   1981-09-25  2006-01-31\nThomas  Charles                Associate   1991-10-23  None\nGreen    Rayann    B.           Associate   1993-08-10  None\nBranson  Stephen H.          Associate   1994-08-03  None\nAllen   Samuel  A.  Jr.     Associate   2006-01-31  None\nSanchez   Sonia               Associate   2009-08-08  None\nKammisch   Elaine               Associate   2010-08-07  None\nGormley Nathan    M.          Associate   2017-04-10  None\nKing   Brad   M.          Associate   2018-10-06  None\n</code></pre>\n"}, {"tags": ["python", "pandas", "operating-system", "glob"], "comments": [{"owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "edited": false, "score": 0, "creation_date": 1557954991, "post_id": 56157634, "comment_id": 98944441, "body": "What do you mean with <code>join</code>? You want to append them on top of each other? Or next to each other?"}], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 7033882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b83dbccc0b95881e28d8557675f0f2df?s=128&d=identicon&r=PG&f=1", "display_name": "Luan Vieira", "link": "https://stackoverflow.com/users/7033882/luan-vieira"}, "edited": false, "score": 0, "creation_date": 1557956555, "post_id": 56157831, "comment_id": 98944953, "body": "Thank you for answering and help cleaning the code. I tried it with two files on a folder, &quot;name1 06.02.2019.xlsx&quot; and &quot;name2 06.02.2019.xlsx&quot;, files.keys() returned dict_keys([&#39;.2019.xlsx&#39;])"}, {"owner": {"reputation": 107, "user_id": 7033882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b83dbccc0b95881e28d8557675f0f2df?s=128&d=identicon&r=PG&f=1", "display_name": "Luan Vieira", "link": "https://stackoverflow.com/users/7033882/luan-vieira"}, "edited": false, "score": 0, "creation_date": 1557956608, "post_id": 56157831, "comment_id": 98944963, "body": "Is it because of the dot?"}, {"owner": {"reputation": 107, "user_id": 7033882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b83dbccc0b95881e28d8557675f0f2df?s=128&d=identicon&r=PG&f=1", "display_name": "Luan Vieira", "link": "https://stackoverflow.com/users/7033882/luan-vieira"}, "edited": false, "score": 0, "creation_date": 1557956693, "post_id": 56157831, "comment_id": 98944985, "body": "Nevermind, just changing 10 for 15 solves the problem(&quot;.xlsx&quot; also counts). Thank you!"}, {"owner": {"reputation": 507, "user_id": 6446489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed68268d4de0bb9904dc1b61f77353b5?s=128&d=identicon&r=PG&f=1", "display_name": "Triggernometry", "link": "https://stackoverflow.com/users/6446489/triggernometry"}, "reply_to_user": {"reputation": 107, "user_id": 7033882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b83dbccc0b95881e28d8557675f0f2df?s=128&d=identicon&r=PG&f=1", "display_name": "Luan Vieira", "link": "https://stackoverflow.com/users/7033882/luan-vieira"}, "edited": false, "score": 0, "creation_date": 1557956727, "post_id": 56157831, "comment_id": 98944989, "body": "@LuanVieira Check out line 8: that is what determines the key. It looks like you actually need the last 15 characters of the filename, not the last 10 like you said - remember, the extension is part of the filename!"}, {"owner": {"reputation": 107, "user_id": 7033882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b83dbccc0b95881e28d8557675f0f2df?s=128&d=identicon&r=PG&f=1", "display_name": "Luan Vieira", "link": "https://stackoverflow.com/users/7033882/luan-vieira"}, "edited": false, "score": 0, "creation_date": 1557957382, "post_id": 56157831, "comment_id": 98945175, "body": "Actually, it only works when all files end with the same last 15 characters. Otherwise I get IndexError                                Traceback (most recent call last) &lt;ipython-input-84-1ab6dd853616&gt; in &lt;module&gt;      16 # join all files with same last 10 characters      17 for key, value in files.items(): ---&gt; 18     files[key] = value[0].append(value[1:])"}, {"owner": {"reputation": 507, "user_id": 6446489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed68268d4de0bb9904dc1b61f77353b5?s=128&d=identicon&r=PG&f=1", "display_name": "Triggernometry", "link": "https://stackoverflow.com/users/6446489/triggernometry"}, "reply_to_user": {"reputation": 107, "user_id": 7033882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b83dbccc0b95881e28d8557675f0f2df?s=128&d=identicon&r=PG&f=1", "display_name": "Luan Vieira", "link": "https://stackoverflow.com/users/7033882/luan-vieira"}, "edited": false, "score": 0, "creation_date": 1557958366, "post_id": 56157831, "comment_id": 98945436, "body": "@LuanVieira it looks like that&#39;s a separate issue, you should post another question. Also, please don&#39;t post questions or changes in the comments, it should go in the question itself. Comments are intended for clarification only and are often deleted once they have served their purpose."}, {"owner": {"reputation": 107, "user_id": 7033882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b83dbccc0b95881e28d8557675f0f2df?s=128&d=identicon&r=PG&f=1", "display_name": "Luan Vieira", "link": "https://stackoverflow.com/users/7033882/luan-vieira"}, "edited": false, "score": 0, "creation_date": 1557958796, "post_id": 56157831, "comment_id": 98945535, "body": "Sorry about that. The issue was that I had files for which there was only one value. So value[1:] wouldn&#39;t apply. I solved it with if and else."}], "tags": [], "owner": {"reputation": 507, "user_id": 6446489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed68268d4de0bb9904dc1b61f77353b5?s=128&d=identicon&r=PG&f=1", "display_name": "Triggernometry", "link": "https://stackoverflow.com/users/6446489/triggernometry"}, "is_accepted": true, "score": 1, "last_activity_date": 1557955495, "creation_date": 1557955495, "answer_id": 56157831, "question_id": 56157634, "link": "https://stackoverflow.com/questions/56157634/how-can-i-combine-files-with-matching-ending-characters/56157831#56157831", "title": "How can I combine files with matching ending characters?", "body": "<p>Well, first off, we need to reformat your code a bit. While the line to join the Dataframes is correct, it's very difficult to read and can be accomplished more efficiently:</p>\n\n<pre><code>import glob\nimport os\nimport pandas as pd\n\nos.chdir('filepath')\nfiles = [pd.read_excel(p, skipfooter=1) for p in glob.glob(\"*.xlsx\")]\n\n# drop the tail of all files\nfiles = [f.drop(f.tail(0).index) for f in files]\n\n# join all files\ndf = files[0].append(files[1:])\n</code></pre>\n\n<p>Then, we need to update it a bit so that you can check the filename of the files you loaded, and have some way to tie them back to the Dataframe you created.</p>\n\n<pre><code>import glob\nimport os\nimport pandas as pd\n\nos.chdir('filepath')\n\n# store last 10 characters of original filename\nfiles = [(p[-10:], pd.read_excel(p, skipfooter=1)) for p in glob.glob(\"*.xlsx\")]\n\n# drop the tail of all files\nfiles = [(p, f.drop(f.tail(0).index)) for p, f in files]\n\n# group files by last 10 characters of filename\nfiles = {p: [g for n, g in files if n == p] for p in set(p for p, f in files)}\n\n# join all files with same last 10 characters\nfor key, value in files.items():\n    files[key] = value[0].append(value[1:])\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 7033882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b83dbccc0b95881e28d8557675f0f2df?s=128&d=identicon&r=PG&f=1", "display_name": "Luan Vieira", "link": "https://stackoverflow.com/users/7033882/luan-vieira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 56157831, "answer_count": 1, "score": 0, "last_activity_date": 1557955495, "creation_date": 1557954418, "question_id": 56157634, "link": "https://stackoverflow.com/questions/56157634/how-can-i-combine-files-with-matching-ending-characters", "title": "How can I combine files with matching ending characters?", "body": "<p>I have excel files named like \"name1 01.01.2018.xlsx\", \"name1 01.01.2018.xlsx\", \"name2 12.23.2019.xlsx\", and so on. I want to join all files with matching dates (last 10 characters).</p>\n\n<p>I can join all of them by doing:</p>\n\n<pre><code>import glob\nimport os\nimport pandas\n\nos.chdir('filepath')\nfiles = [pd.read_excel(p, skipfooter=1) for p in glob.glob(\"*.xlsx\")]\ndf = files[0].drop(files[0].tail(0).index).append([files[i].drop(files[i].tail(0).index) for i in range(1,len(files))])\n</code></pre>\n\n<p>How can I join only when the last characters match? I don't have a list of options for the last 10 characters, I want it to update automatically.</p>\n"}, {"tags": ["python", "graph", "networkx"], "comments": [{"owner": {"reputation": 2070, "user_id": 1044698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KWnHV.png?s=128&g=1", "display_name": "Energya", "link": "https://stackoverflow.com/users/1044698/energya"}, "edited": false, "score": 1, "creation_date": 1557955133, "post_id": 56157627, "comment_id": 98944496, "body": "What is the value of <code>tgt_nodes</code> in your code?"}, {"owner": {"reputation": 5507, "user_id": 2255198, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/SH5us.png?s=128&g=1", "display_name": "flyingmeatball", "link": "https://stackoverflow.com/users/2255198/flyingmeatball"}, "reply_to_user": {"reputation": 2070, "user_id": 1044698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KWnHV.png?s=128&g=1", "display_name": "Energya", "link": "https://stackoverflow.com/users/1044698/energya"}, "edited": false, "score": 1, "creation_date": 1557960794, "post_id": 56157627, "comment_id": 98945968, "body": "2nd line of code: tgt_nodes = [&#39;B&#39;,&#39;F&#39;]"}, {"owner": {"reputation": 17226, "user_id": 2966723, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e40a62626d129d5df080d4d57c22b53d?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/2966723/joel"}, "edited": false, "score": 0, "creation_date": 1557983131, "post_id": 56157627, "comment_id": 98950072, "body": "Note: in your edit, <code>pot_paths = {&#39;B&#39;: 0, &#39;A&#39;: 1, &#39;C&#39;: 1, &#39;D&#39;: 1, &#39;E&#39;: 1, &#39;G&#39;: 1, &#39;H&#39;: 1, &#39;F&#39;: 2}</code>.  There&#39;s nothing in there that says how many distinct ways there are with that minimum distance.  It just knows the minimum distance."}], "answers": [{"comments": [{"owner": {"reputation": 5507, "user_id": 2255198, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/SH5us.png?s=128&g=1", "display_name": "flyingmeatball", "link": "https://stackoverflow.com/users/2255198/flyingmeatball"}, "edited": false, "score": 0, "creation_date": 1557961890, "post_id": 56158718, "comment_id": 98946184, "body": "Incorrect - (B&gt;E&gt;F) exists in full graph, thus B&gt;F should be added to out graph. The problem is that It is also finding (F&gt;E&gt;B) and re-incrementing B&gt;F. I need a way to track that I&#39;ve already traversed B&gt;E&gt;F when I get to F&gt;E&gt;B. Think of these nodes as doctors and patients. Doctors can only treat patients, and patient&#39;s can only be seen by doctors. I want to know which doctors overlap in their practices, so I look at who is 2 nodes away and add them to the out_graph."}, {"owner": {"reputation": 2070, "user_id": 1044698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KWnHV.png?s=128&g=1", "display_name": "Energya", "link": "https://stackoverflow.com/users/1044698/energya"}, "reply_to_user": {"reputation": 5507, "user_id": 2255198, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/SH5us.png?s=128&g=1", "display_name": "flyingmeatball", "link": "https://stackoverflow.com/users/2255198/flyingmeatball"}, "edited": false, "score": 0, "creation_date": 1557962531, "post_id": 56158718, "comment_id": 98946279, "body": "You&#39;re right, my initial answer is incorrect, I now see what you&#39;re doing. Your problem seems to be different in nature then: an edge in <code>out_graph</code> can only be made if the distance between that pair is 2 in <code>full_graph</code>. Doesn&#39;t that by definition then mean that whenever it exists in <code>out_graph</code>, you&#39;re guaranteed to be looking at the inverse of a pair you found earlier?"}, {"owner": {"reputation": 2070, "user_id": 1044698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KWnHV.png?s=128&g=1", "display_name": "Energya", "link": "https://stackoverflow.com/users/1044698/energya"}, "reply_to_user": {"reputation": 5507, "user_id": 2255198, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/SH5us.png?s=128&g=1", "display_name": "flyingmeatball", "link": "https://stackoverflow.com/users/2255198/flyingmeatball"}, "edited": false, "score": 0, "creation_date": 1557962991, "post_id": 56158718, "comment_id": 98946364, "body": "If your graph is explicitly bipartite (i.e. consists of 2 sets of nodes that are never connected to eachother directly), you might actually want to look into some of networkx&#39;s support for that, such as the <a href=\"https://networkx.github.io/documentation/stable/reference/algorithms/generated/networkx.algorithms.bipartite.projection.projected_graph.html#networkx.algorithms.bipartite.projection.projected_graph\" rel=\"nofollow noreferrer\"><code>project_graph</code></a> function."}, {"owner": {"reputation": 5507, "user_id": 2255198, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/SH5us.png?s=128&g=1", "display_name": "flyingmeatball", "link": "https://stackoverflow.com/users/2255198/flyingmeatball"}, "edited": false, "score": 0, "creation_date": 1557974894, "post_id": 56158718, "comment_id": 98948326, "body": "You&#39;re right - I&#39;ll need to go the bipartite route."}], "tags": [], "owner": {"reputation": 2070, "user_id": 1044698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KWnHV.png?s=128&g=1", "display_name": "Energya", "link": "https://stackoverflow.com/users/1044698/energya"}, "is_accepted": true, "score": 0, "last_activity_date": 1557961459, "creation_date": 1557961459, "answer_id": 56158718, "question_id": 56157627, "link": "https://stackoverflow.com/questions/56157627/networkx-has-edge-for-undirected-graph-only-count-once/56158718#56158718", "title": "Networkx has_edge for undirected graph only count once", "body": "<p>You determine the path length based on <code>full_graph</code>, yet add the edges to <code>out_graph</code>. After adding the (B,F) edge to <code>out_graph</code>, it still doesn't exist in <code>full_graph</code>. After all, your <code>out_graph</code> is initialized to be empty. This is also why your <code>out_graph</code> at the end contains only the one edge (B,F).</p>\n\n<p>If your goal is to <em>update</em> the original, you should initialize <code>out_graph</code> to be a copy of <code>full_graph</code> and do all your computations on that. Depending on your needs, networkx's built-in <a href=\"https://networkx.github.io/documentation/latest/reference/classes/generated/networkx.Graph.copy.html\" rel=\"nofollow noreferrer\"><code>out_graph = full_graph.copy()</code></a> might do the trick, otherwise you should look into Python's <a href=\"https://docs.python.org/3.7/library/copy.html#copy.deepcopy\" rel=\"nofollow noreferrer\"><code>copy.deepcopy()</code></a>.</p>\n"}, {"comments": [{"owner": {"reputation": 5507, "user_id": 2255198, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/SH5us.png?s=128&g=1", "display_name": "flyingmeatball", "link": "https://stackoverflow.com/users/2255198/flyingmeatball"}, "edited": false, "score": 0, "creation_date": 1557964958, "post_id": 56158975, "comment_id": 98946754, "body": "Thanks - this should work - reading @energya&#39;s comment about bipartite - this is an explicitly bipartite graph, so the &quot;correct&quot; way would probably be to use a bipartite-related algorithm, but I&#39;ll go with this because it&#39;s easier. I was about to add a set of sorted nodes and compare to that, but this is more efficient. The tgt_nodes list are all possible matches to each other, so both would appear there."}, {"owner": {"reputation": 5507, "user_id": 2255198, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/SH5us.png?s=128&g=1", "display_name": "flyingmeatball", "link": "https://stackoverflow.com/users/2255198/flyingmeatball"}, "edited": false, "score": 0, "creation_date": 1557974758, "post_id": 56158975, "comment_id": 98948310, "body": "Actually this does not work. It doesn&#39;t account for the fact that there may be multiple intermediate nodes. I have edited above to show an example that doesn&#39;t work, it shows weight of 2, when it should be 3. The problem is"}, {"owner": {"reputation": 17226, "user_id": 2966723, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e40a62626d129d5df080d4d57c22b53d?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/2966723/joel"}, "reply_to_user": {"reputation": 5507, "user_id": 2255198, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/SH5us.png?s=128&g=1", "display_name": "flyingmeatball", "link": "https://stackoverflow.com/users/2255198/flyingmeatball"}, "edited": false, "score": 0, "creation_date": 1557983174, "post_id": 56158975, "comment_id": 98950083, "body": "If you look at that example, there&#39;s nothing I can see in your code that tells it to look at all the different paths between the two.  Once you&#39;ve chosen <code>curr_node</code>, it will only see each <code>pot_node</code> once.  So what I&#39;ve described here solves the issue of counting edges from <code>a</code> to <code>b</code> and from <code>b</code> to <code>a</code>, but you&#39;ll need to do something different if you want to count the distinct paths."}], "tags": [], "owner": {"reputation": 17226, "user_id": 2966723, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e40a62626d129d5df080d4d57c22b53d?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/2966723/joel"}, "is_accepted": false, "score": 2, "last_activity_date": 1557963660, "creation_date": 1557963660, "answer_id": 56158975, "question_id": 56157627, "link": "https://stackoverflow.com/questions/56157627/networkx-has-edge-for-undirected-graph-only-count-once/56158975#56158975", "title": "Networkx has_edge for undirected graph only count once", "body": "<p>So yes, if <code>G</code> is undirected, then <code>G.has_edge(a,b)</code> and <code>G.has_edge(b,a)</code> are both <code>True</code> if the edge exists and <code>False</code> if the edge doesn't.</p>\n\n<p>So given the way your code is set up, you'll look at each pair of nodes twice and perform the same calculation twice.</p>\n\n<p>How about adding one more condition:  <code>if G.has_edge(a,b) and a&lt;b:</code>   (if you are doing this in a case where you could have a self-edge, you might think about <code>a&lt;=b</code>).</p>\n\n<p>Then one of the two times it will ignore the calculations.  As long as the nodes have a comparison operation defined, it will work.  So <code>'A'&lt;1</code> won't work, but <code>'A'&lt;'B'</code> returns <code>True</code>.</p>\n\n<p>A warning I should give is that this only works if you're guaranteed to see each edge in both directions, that is, if both nodes appear in your list <code>tgt_nodes</code>.  If only the \"bigger\" node appears, then it won't count it.  So you may need to refine your test for this.</p>\n"}, {"tags": [], "owner": {"reputation": 5507, "user_id": 2255198, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/SH5us.png?s=128&g=1", "display_name": "flyingmeatball", "link": "https://stackoverflow.com/users/2255198/flyingmeatball"}, "is_accepted": false, "score": 1, "last_activity_date": 1557975299, "creation_date": 1557975299, "answer_id": 56160154, "question_id": 56157627, "link": "https://stackoverflow.com/questions/56157627/networkx-has-edge-for-undirected-graph-only-count-once/56160154#56160154", "title": "Networkx has_edge for undirected graph only count once", "body": "<p>Per @Energya's request - here is the simple code that works:</p>\n\n<pre><code>out_graph = nx.bipartite.weighted_projected_graph(full_graph, ['B','F'])\n</code></pre>\n"}], "owner": {"reputation": 5507, "user_id": 2255198, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/SH5us.png?s=128&g=1", "display_name": "flyingmeatball", "link": "https://stackoverflow.com/users/2255198/flyingmeatball"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 56158718, "answer_count": 3, "score": 1, "last_activity_date": 1557975299, "creation_date": 1557954372, "last_edit_date": 1557974850, "question_id": 56157627, "link": "https://stackoverflow.com/questions/56157627/networkx-has-edge-for-undirected-graph-only-count-once", "title": "Networkx has_edge for undirected graph only count once", "body": "<p>I have the following graph:</p>\n\n<pre><code>full_graph = nx.Graph()\n\ntgt_nodes = ['B','F']\n\nfull_graph.add_edge('A','B')\nfull_graph.add_edge('B','C')\nfull_graph.add_edge('B','D')\nfull_graph.add_edge('B','E')\nfull_graph.add_edge('E','F')\n\n#display and save as img\np = nx.drawing.nx_pydot.to_pydot(full_graph)\np.layout = 'spring'\n\n#p.write_png(outputDir+ version+ '//' + 'cluster_no' + str(clusterNo) + '.png')\ndisplay.Image(p.create_png())\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/V99f8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/V99f8.png\" alt=\"enter image description here\"></a></p>\n\n<p>I'm trying to find all nodes that are exactly two connections apart, and do things with them depending on the weight.</p>\n\n<pre><code>out_graph = nx.Graph()\n\nfor curr_node in tgt_nodes:\n\n        #find all paths for curr_node that are &lt;=2\n        pot_paths = nx.single_source_dijkstra_path_length(full_graph, curr_node,2)\n        print(pot_paths)\n\n        #iterate over all potential paths. If length ==2 either increment weight or add with weight = 1\n        for pot_node, dist in pot_paths.items():\n\n            if dist == 2:\n                print(pot_node)\n\n                if out_graph.has_edge(curr_node, pot_node):\n\n                    # we added this one before, just increase the weight by one. NEED TO LIMIT SO THAT THIS DOESN't TRIGGER ON INVERSES\n                    out_graph[curr_node][pot_node]['weight'] += 1\n                    print('incremented edge for '+ curr_node)\n                else:\n                    # new edge. add with weight=1\n                    out_graph.add_edge(curr_node, pot_node, weight=1)\n                    print('added edge for '+ pot_node)\n</code></pre>\n\n<p>This should only be triggering one time - in the comparison of B >F, it should add an edge. When it get's to F>B, I don't want it to increment, because it's the exact inverse. Here are my results:</p>\n\n<pre><code>&gt;&gt; {'B': 0, 'A': 1, 'C': 1, 'D': 1, 'F': 2, 'E': 1}\n&gt;&gt; F\n&gt;&gt; added edge for F\n&gt;&gt; {'F': 0, 'B': 2, 'E': 1}\n&gt;&gt; B\n&gt;&gt; incremented edge for F\n\nout_graph.edges(data = True)\n\n&gt;&gt; EdgeDataView([('F', 'B', {'weight': 2})])\n</code></pre>\n\n<p>How can I modify so (F,B) and (B,F) over the same intermediary node counts once, not twice?</p>\n\n<p>Thanks! </p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Actually, here is an example that doesn't work:</p>\n\n<pre><code>full_graph = nx.Graph()\n\ntgt_nodes = ['B','F']\n\nfull_graph.add_edge('A','B')\nfull_graph.add_edge('B','C')\nfull_graph.add_edge('B','D')\nfull_graph.add_edge('B','E')\nfull_graph.add_edge('E','F')\nfull_graph.add_edge('G','F')\nfull_graph.add_edge('B','G')\nfull_graph.add_edge('F','H')\nfull_graph.add_edge('B','H')\n\n\n#display and save as img\np = nx.drawing.nx_pydot.to_pydot(full_graph)\np.layout = 'spring'\n\n#p.write_png(outputDir+ version+ '//' + 'cluster_no' + str(clusterNo) + '.png')\ndisplay.Image(p.create_png())\n</code></pre>\n\n<p>It outputs an edge of 2, when it should be 3 (B &amp; F are connected over G,E, and H)</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 9037304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22b65ec97ee3d33fcc8431ad3bdc5831?s=128&d=identicon&r=PG&f=1", "display_name": "asgarth", "link": "https://stackoverflow.com/users/9037304/asgarth"}, "edited": false, "score": 0, "creation_date": 1558031649, "post_id": 56157697, "comment_id": 98975893, "body": "Works like a charm. Thank you. I did run into an unforeseen issue where a student may have taken a class more than once. This causes &quot;ValueError: Index contains duplicate entries, cannot reshape&quot; when creating the pivot table. Is there a straightforward way to choose one entry? I&#39;m really only interested in the best grade."}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "reply_to_user": {"reputation": 77, "user_id": 9037304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22b65ec97ee3d33fcc8431ad3bdc5831?s=128&d=identicon&r=PG&f=1", "display_name": "asgarth", "link": "https://stackoverflow.com/users/9037304/asgarth"}, "edited": false, "score": 1, "creation_date": 1558031999, "post_id": 56157697, "comment_id": 98976086, "body": "Use <code>pivot_table</code> instead of <code>pivot</code>, with <code>aggfunc=&#39;first&#39;</code>"}], "tags": [], "owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "is_accepted": true, "score": 2, "last_activity_date": 1557955160, "last_edit_date": 1557955160, "creation_date": 1557954737, "answer_id": 56157697, "question_id": 56157623, "link": "https://stackoverflow.com/questions/56157623/how-to-unpack-column-contents-to-new-columns-determined-by-cells-value/56157697#56157697", "title": "How to unpack column contents to new columns determined by cell&#39;s value", "body": "<p>You can use a regular expression and <code>pivot</code> here.</p>\n\n<pre><code>u = df.MATHS.str.extractall(r'([a-zA-Z]+)_([A-F][+-]?)').reset_index(1, drop=True)\n\n#               0   1\n# 0       ALGEBRA  B+\n# 0      GEOMETRY  A-\n# 0  TRIGONOMETRY   C\n# 1       ALGEBRA   B\n# 1      GEOMETRY  B+\n# 1      CALCULUS   C\n\np = u.pivot(columns=0, values=1)\n\n# 0 ALGEBRA CALCULUS GEOMETRY TRIGONOMETRY\n# 0      B+      NaN       A-            C\n# 1       B        C       B+          NaN\n\npd.concat([df.iloc[:, :-1], p], axis=1)\n</code></pre>\n\n<p></p>\n\n<pre><code>   STUDENT_ID  TEST_SCORE_1  TEST_SCORE_2 ALGEBRA CALCULUS GEOMETRY TRIGONOMETRY\n0           1            85            93      B+      NaN       A-            C\n1           2            73            95       B        C       B+          NaN\n</code></pre>\n\n<hr>\n\n<p><strong><em>Regex Explanation</em></strong></p>\n\n<pre><code>(                            # capture group 1\n  [a-zA-Z]                   # match letters\n  +                          # match 1 or more times\n)\n_                            # match the _ character\n(                            # capture group 2\n  [A-F]                      # match A-F (possible grades)\n  [+-]                       # match either + or -\n  ?                          # optional match of the + or -\n)\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 9037304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22b65ec97ee3d33fcc8431ad3bdc5831?s=128&d=identicon&r=PG&f=1", "display_name": "asgarth", "link": "https://stackoverflow.com/users/9037304/asgarth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 56157697, "answer_count": 1, "score": 2, "last_activity_date": 1557955160, "creation_date": 1557954349, "question_id": 56157623, "link": "https://stackoverflow.com/questions/56157623/how-to-unpack-column-contents-to-new-columns-determined-by-cells-value", "title": "How to unpack column contents to new columns determined by cell&#39;s value", "body": "<p>I have a dataframe that contains information about student grades, test scores, and other metrics. One of the columns contains comma separated text where each comma separated value is the name of a math class and the grade the student achieved in that class. So the dataframe looks as follows:</p>\n\n<pre><code>STUDENT_ID    TEST_SCORE_1    TEST_SCORE_2    MATHS\n001           85              93              ALGEBRA_B+,GEOMETRY_A-,TRIGONOMETRY_C\n002           73              95              ALGEBRA_B,GEOMETRY_B+,CALCULUS_C\n</code></pre>\n\n<p>What I would like is to have columns corresponding to each class, and simply have the cells containing the grade like this:</p>\n\n<pre><code>STUDENT_ID    TEST_SCORE_1    TEST_SCORE_2    ALGEBRA    GEOMETRY    TRIGONOMETRY    CALCULUS\n001           85              93              B+         A-          C               NaN\n002           73              95              B          B+          NaN             C\n</code></pre>\n\n<p>I first tried to do something like this</p>\n\n<pre><code>df.merge(df['Maths'].apply(unpack_grades), left_index=True, right_index=True)\n</code></pre>\n\n<p>where unpack_grades is a function that parses through the string of classes and grades and returns a pandas series containing every math course in the catalog as keys with the grades as values (NaN if the student has not taken the class). Here is the beginning of that function:</p>\n\n<pre><code>def unpack_grades(x):\n\n    courses = [a.strip() for a in x.split(',')]\n</code></pre>\n\n<p>However, I get the following error:</p>\n\n<pre><code>AttributeError: 'float' object has no attribute 'split'\n</code></pre>\n\n<p>If anyone can suggest a fix for my error, or even an alternate approach if there is a more direct way to achieve what I'm after, that would be great.</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 305, "user_id": 11191031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab9c0e7c65bca07bb7082e8083f6d493?s=128&d=identicon&r=PG&f=1", "display_name": "tfw", "link": "https://stackoverflow.com/users/11191031/tfw"}, "edited": false, "score": 0, "creation_date": 1557955799, "post_id": 56157577, "comment_id": 98944719, "body": "<code>request.build_absolute_uri(&#39;&#39;)</code>?"}, {"owner": {"reputation": 1327, "user_id": 9989779, "user_type": "registered", "profile_image": "https://graph.facebook.com/232246634231252/picture?type=large", "display_name": "Maddie Graham", "link": "https://stackoverflow.com/users/9989779/maddie-graham"}, "reply_to_user": {"reputation": 305, "user_id": 11191031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab9c0e7c65bca07bb7082e8083f6d493?s=128&d=identicon&r=PG&f=1", "display_name": "tfw", "link": "https://stackoverflow.com/users/11191031/tfw"}, "edited": false, "score": 0, "creation_date": 1557956405, "post_id": 56157577, "comment_id": 98944907, "body": "it&#39;s return &#39;h t t p ://127.0.0.1:8000/aaa/bbb/ccc/&#39; i need only &#39;h t t p ://127.0.0.1:8000/&#39;"}, {"owner": {"reputation": 305, "user_id": 11191031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab9c0e7c65bca07bb7082e8083f6d493?s=128&d=identicon&r=PG&f=1", "display_name": "tfw", "link": "https://stackoverflow.com/users/11191031/tfw"}, "edited": false, "score": 0, "creation_date": 1557956453, "post_id": 56157577, "comment_id": 98944925, "body": "Are you inputting an empty string (<code>&#39;&#39;</code>) like in my example?"}], "answers": [{"comments": [{"owner": {"reputation": 1327, "user_id": 9989779, "user_type": "registered", "profile_image": "https://graph.facebook.com/232246634231252/picture?type=large", "display_name": "Maddie Graham", "link": "https://stackoverflow.com/users/9989779/maddie-graham"}, "edited": false, "score": 0, "creation_date": 1557954905, "post_id": 56157667, "comment_id": 98944406, "body": "No i need somethin like this &#39;h t t p ://127.0.0.1:8000&#39; only not &#39;/aaa/bbb/vvv&#39;"}, {"owner": {"reputation": 1312, "user_id": 9717184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ad422fe492f8008ce2945c57c5148d?s=128&d=identicon&r=PG", "display_name": "connectyourcharger", "link": "https://stackoverflow.com/users/9717184/connectyourcharger"}, "reply_to_user": {"reputation": 1327, "user_id": 9989779, "user_type": "registered", "profile_image": "https://graph.facebook.com/232246634231252/picture?type=large", "display_name": "Maddie Graham", "link": "https://stackoverflow.com/users/9989779/maddie-graham"}, "edited": false, "score": 0, "creation_date": 1557956170, "post_id": 56157667, "comment_id": 98944833, "body": "@MaddieGraham Try <code>request.build_absolute_uri()</code>."}, {"owner": {"reputation": 1327, "user_id": 9989779, "user_type": "registered", "profile_image": "https://graph.facebook.com/232246634231252/picture?type=large", "display_name": "Maddie Graham", "link": "https://stackoverflow.com/users/9989779/maddie-graham"}, "edited": false, "score": 0, "creation_date": 1557956341, "post_id": 56157667, "comment_id": 98944895, "body": "it&#39;s return &#39;h t t p ://127.0.0.1:8000/aaa/bbb/ccc/&#39; i need only &#39;h t t p ://127.0.0.1:8000/&#39;"}, {"owner": {"reputation": 1312, "user_id": 9717184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ad422fe492f8008ce2945c57c5148d?s=128&d=identicon&r=PG", "display_name": "connectyourcharger", "link": "https://stackoverflow.com/users/9717184/connectyourcharger"}, "reply_to_user": {"reputation": 1327, "user_id": 9989779, "user_type": "registered", "profile_image": "https://graph.facebook.com/232246634231252/picture?type=large", "display_name": "Maddie Graham", "link": "https://stackoverflow.com/users/9989779/maddie-graham"}, "edited": false, "score": 0, "creation_date": 1557956511, "post_id": 56157667, "comment_id": 98944943, "body": "@MaddieGraham See my edit, this will most likely get what you are asking for. Pass in a <code>&quot;&#47;&quot;</code> to <code>build_absolute_uri</code>."}], "tags": [], "owner": {"reputation": 1312, "user_id": 9717184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ad422fe492f8008ce2945c57c5148d?s=128&d=identicon&r=PG", "display_name": "connectyourcharger", "link": "https://stackoverflow.com/users/9717184/connectyourcharger"}, "is_accepted": true, "score": 1, "last_activity_date": 1557956479, "last_edit_date": 1592644375, "creation_date": 1557954619, "answer_id": 56157667, "question_id": 56157577, "link": "https://stackoverflow.com/questions/56157577/receiving-the-application-url-django/56157667#56157667", "title": "Receiving the application URL. Django", "body": "<pre><code>url = request.build_absolute_uri(&quot;/&quot;)\n</code></pre>\n<p>See <a href=\"https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.build_absolute_uri\" rel=\"nofollow noreferrer\">the Django documentation reference</a>:</p>\n<blockquote>\n<p>Returns the absolute URI form of <strong><code>location</code></strong>. If no location is provided, the location will be set to <code>request.get_full_path()</code>.</p>\n<p>If the location is already an absolute URI, it will not be altered. Otherwise the absolute URI is built using the server variables available in this request.</p>\n</blockquote>\n<p>This seems to be what you are asking for.</p>\n"}], "owner": {"reputation": 1327, "user_id": 9989779, "user_type": "registered", "profile_image": "https://graph.facebook.com/232246634231252/picture?type=large", "display_name": "Maddie Graham", "link": "https://stackoverflow.com/users/9989779/maddie-graham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 56157667, "answer_count": 1, "score": 1, "last_activity_date": 1557956479, "creation_date": 1557954102, "question_id": 56157577, "link": "https://stackoverflow.com/questions/56157577/receiving-the-application-url-django", "title": "Receiving the application URL. Django", "body": "<p>I need to get the current URL of my application in my views.py. Not the bookmark I am in but the address to the home page (all).</p>\n\n<p>I finded this solution:</p>\n\n<pre><code>url = \"{0}://{1}\".format(request.scheme, request.get_host())\n</code></pre>\n\n<p>But i but I think it can be simpler . Not using 'request ....' twice and by obtaining an interpretation of one variable.</p>\n\n<p>Any good suggestions will be appreciated.</p>\n"}, {"tags": ["python", "multiprocessing"], "answers": [{"tags": [], "owner": {"reputation": 327, "user_id": 5648162, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w22wy.jpg?s=128&g=1", "display_name": "Ros&#232;", "link": "https://stackoverflow.com/users/5648162/ros%c3%a8"}, "is_accepted": true, "score": 0, "last_activity_date": 1557955591, "creation_date": 1557955591, "answer_id": 56157843, "question_id": 56157543, "link": "https://stackoverflow.com/questions/56157543/using-multiprocessing-and-handling-inputs/56157843#56157843", "title": "Using multiprocessing and handling inputs", "body": "<p>I'm sorry for being a finger prince but I figured this out in stackoverflow :\n\"\nWhen you spawn a thread in Python, it closes stdin. You can't use a subprocess to collect standard input. Use the main thread to collect input instead and post them to the Queue from the main thread. It may be possible to pass the stdin to another thread, but you likely need to close it in your main thread.\n\"</p>\n\n<p>This is not what I wrote and instead it's an answer by Karl. F.\n<a href=\"https://stackoverflow.com/questions/5697305/python-command-line-input-in-a-process\">Python command line input in a process</a></p>\n"}], "owner": {"reputation": 327, "user_id": 5648162, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w22wy.jpg?s=128&g=1", "display_name": "Ros&#232;", "link": "https://stackoverflow.com/users/5648162/ros%c3%a8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 56157843, "answer_count": 1, "score": 1, "last_activity_date": 1557955591, "creation_date": 1557953903, "question_id": 56157543, "link": "https://stackoverflow.com/questions/56157543/using-multiprocessing-and-handling-inputs", "title": "Using multiprocessing and handling inputs", "body": "<p>I want to make a multiprocessing program that runs concurrently.</p>\n\n<p>So I want my process to keep counting every 5 seconds while another process keeps asking for an input and printing it.</p>\n\n<p>and the process asking for two inputs should be running in an infinite loop because later I want to change it so that every input will be a value of number variable in the first process.\n(If you have any ideas to help me out with this too, please let me know! I really appreciate it)</p>\n\n<p>This is the code I have and it just gives me\nEOFError: EOF when reading a line</p>\n\n<pre><code>import os\nimport time\n\nfrom multiprocessing import Process\n\ndef doubler():\n    number =0\n    while True:\n        proc = os.getpid()\n        print('num : {0} by procss id : {1}'.format(number,proc))\n        time.sleep(5)\n\ndef test():\n\n    while True:\n        x = raw_input(\"input x : \")\n        y = raw_input(\"input y : \")\n        print('x = {0}, y = {1}'.format(x,y))\n\n\nif __name__ == '__main__':\n    proc1 = Process(target=doubler)\n    proc2 = Process(target=test)\n    procs = []\n    procs.append(proc1)\n    procs.append(proc2)\n    proc1.start()\n    proc2.start()\n\n    for proc in procs:\n        proc.join()\n</code></pre>\n\n<p>Result ---> EOFError: EOF when reading a line</p>\n"}, {"tags": ["python", "tensorflow", "machine-learning", "keras", "lstm"], "comments": [{"owner": {"reputation": 10237, "user_id": 2464597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12eaebfe8c9ae6c3a29aefe69ebcb4bd?s=128&d=identicon&r=PG", "display_name": "Engineero", "link": "https://stackoverflow.com/users/2464597/engineero"}, "edited": false, "score": 0, "creation_date": 1557959358, "post_id": 56157510, "comment_id": 98945675, "body": "To whoever voted to close: breh, this is exactly on topic. It&#39;s specific, reproducible, contains a minimal complete example, and pertains to a specific programming problem or algorithm. Literally the definition of <a href=\"https://stackoverflow.com/help/on-topic\">on topic</a>."}], "owner": {"reputation": 10237, "user_id": 2464597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12eaebfe8c9ae6c3a29aefe69ebcb4bd?s=128&d=identicon&r=PG", "display_name": "Engineero", "link": "https://stackoverflow.com/users/2464597/engineero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1557958086, "creation_date": 1557953790, "last_edit_date": 1557958086, "question_id": 56157510, "link": "https://stackoverflow.com/questions/56157510/rnn-fails-to-fit-a-linear-trend-keras-bptt-issue", "title": "RNN fails to fit a linear trend (Keras BPTT issue?)", "body": "<p>I am trying to train a simple LSTM to fit a line. My hypothesis is that I should be able to fit a linearly decreasing trend with zero input since the LSTM can decide how much it listens to its input vs. internal state, and can thus learn to just operate on the internal state. Basically a degenerate case for testing whether the LSTM can fit an expected result with zero input.</p>\n\n<p>I create my input and target data:</p>\n\n<pre><code>seq_len = 1000    \nx_train = np.zeros((1, seq_len, 1))  # [batch_size, seq_len, num_feat]\ntarget = np.linspace(100, 0, num=seq_len).reshape(1, -1, 1)\n</code></pre>\n\n<p>I create a pretty simple network:</p>\n\n<pre><code>from keras.models import Model\nfrom keras.layers import LSTM, Dense, Input, TimeDistributed\n\nx_in = Input((seq_len, 1))\nseq1 = LSTM(8, return_sequences=True)(x_in)\ndense1 = TimeDistributed(Dense(8))(seq1)\nseq2 = LSTM(8, return_sequences=True)(dense1)\ndense2 = TimeDistributed(Dense(8))(seq2)\nout = TimeDistributed(Dense(1))(dense2)\n\nmodel = Model(inputs=x_in, outputs=out)\nmodel.compile(optimizer='adam', loss='mean_squared_error')\n\nhistory = model.fit(x_train, target, batch_size=1, epochs=1000,\n                    validation_split=0.)\n</code></pre>\n\n<p>I also created a custom callback that calls <code>model.predict(x_train)</code> after every epoch and adds the results to an array so I can see how my model's output is evolving over time. Basically the model just learns to predict a constant value which gradually (asymptotically) approaches the mean of my target line (target line is in red, not sure why the legend didn't show):</p>\n\n<p><a href=\"https://i.stack.imgur.com/ZGhIN.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZGhIN.jpg\" alt=\"Epoch prediction history\"></a></p>\n\n<p>So basically nothing is driving my response to fit the actual line, I'm just gradually approaching the <em>mean</em> of the line. I suspect I am not getting any gradient with respect to time (data index), just an average gradient over time. But I would have thought LSTM losses would automagically give you gradient through time.</p>\n\n<p>I've tried:</p>\n\n<ul>\n<li>different activation functions for the LSTM layers (<code>None</code>, <code>'relu'</code> for both the regular activation and recurrent activation)</li>\n<li>different optimizers (<code>'nadam'</code>, <code>'adadelta'</code>, <code>'rmsprop'</code>)</li>\n<li>the <code>'mean_aboslute_error'</code> loss function, which I didn't expect to improve the results, and it acted about the same</li>\n<li>passing sequences of random numbers drawn from a normal distribution as input</li>\n<li>replacing <code>LSTM</code> with <code>GRU</code></li>\n</ul>\n\n<p>Nothing seems to do it.</p>\n\n<p>Anybody have a suggestion as to how I can force this thing to train on the gradient as a function of my sequence index, i.e. <code>g(t)</code>? Or any other suggestions on how I can get this to work?</p>\n\n<p><strong>Note:</strong> with the trend as shown, if the LSTM results in a constant value at exactly the mean (50), the minimum mean absolute error will be 25 and the minimum mean squared error will be about 835.8. So if we don't see any better than that, we probably aren't fitting the line, just the mean.</p>\n\n<p>Just some references in case you run this yourself.</p>\n"}, {"tags": ["python", "python-3.x", "numpy", "python-multiprocessing"], "comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 1, "creation_date": 1557954089, "post_id": 56157485, "comment_id": 98944114, "body": "The simplest answer would be to improve whatever <code>foo</code> is, but since you haven&#39;t included it, really no way to say.  Probably a better idea to optimize the function before jumping to multiprocessing."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 2, "creation_date": 1557970328, "post_id": 56157485, "comment_id": 98947590, "body": "Try <code>x = p.map(...)</code> and check what <code>x</code> is returned.  Evidently it isn&#39;t the 3 objects that you think it should.  That <code>arr1,arr2,arr3=...</code> unpacking is very unforgiving, and doesn&#39;t provide much debugging help."}], "answers": [{"comments": [{"owner": {"reputation": 742, "user_id": 9978457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r70xA.jpg?s=128&g=1", "display_name": "anon", "link": "https://stackoverflow.com/users/9978457/anon"}, "edited": false, "score": 0, "creation_date": 1557969122, "post_id": 56157872, "comment_id": 98947386, "body": "In my case <code>to_calc</code> is <code>a_nested_list_of_ints[j]</code>?"}, {"owner": {"reputation": 742, "user_id": 9978457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r70xA.jpg?s=128&g=1", "display_name": "anon", "link": "https://stackoverflow.com/users/9978457/anon"}, "edited": false, "score": 0, "creation_date": 1558363632, "post_id": 56157872, "comment_id": 99067219, "body": "I updated the question and added a bounty if you are interested"}, {"owner": {"reputation": 96, "user_id": 10255708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b0effe7732b79fd6730e375924e764?s=128&d=identicon&r=PG&f=1", "display_name": "maxioatic ", "link": "https://stackoverflow.com/users/10255708/maxioatic"}, "reply_to_user": {"reputation": 742, "user_id": 9978457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r70xA.jpg?s=128&g=1", "display_name": "anon", "link": "https://stackoverflow.com/users/9978457/anon"}, "edited": false, "score": 1, "creation_date": 1558365226, "post_id": 56157872, "comment_id": 99068197, "body": "Sure. If I understand your question correctly you want to finish with three numpy arrays? Is there any problem with transforming the data into this format after the multiprocessing is finished? I think if you modified your <code>foo</code> function it would be much easier."}, {"owner": {"reputation": 96, "user_id": 10255708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b0effe7732b79fd6730e375924e764?s=128&d=identicon&r=PG&f=1", "display_name": "maxioatic ", "link": "https://stackoverflow.com/users/10255708/maxioatic"}, "reply_to_user": {"reputation": 742, "user_id": 9978457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r70xA.jpg?s=128&g=1", "display_name": "anon", "link": "https://stackoverflow.com/users/9978457/anon"}, "edited": false, "score": 0, "creation_date": 1558400954, "post_id": 56157872, "comment_id": 99079580, "body": "Ok. What was wrong with hpaulj&#39;s suggestion of using zip like so: <code>arr_1_, arr_2_, arr_3_ = zip(*p.map(foo,a_nested_list_of_ints))</code>?"}, {"owner": {"reputation": 742, "user_id": 9978457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r70xA.jpg?s=128&g=1", "display_name": "anon", "link": "https://stackoverflow.com/users/9978457/anon"}, "edited": false, "score": 0, "creation_date": 1558404032, "post_id": 56157872, "comment_id": 99080071, "body": "he is not considering the next part of the code, where the arrays are assaigned with the indexes"}, {"owner": {"reputation": 96, "user_id": 10255708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b0effe7732b79fd6730e375924e764?s=128&d=identicon&r=PG&f=1", "display_name": "maxioatic ", "link": "https://stackoverflow.com/users/10255708/maxioatic"}, "reply_to_user": {"reputation": 742, "user_id": 9978457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r70xA.jpg?s=128&g=1", "display_name": "anon", "link": "https://stackoverflow.com/users/9978457/anon"}, "edited": false, "score": 0, "creation_date": 1558408564, "post_id": 56157872, "comment_id": 99080831, "body": "It&#39;s a little tough without your actual data. If you try the function above and share it&#39;s output, with your desired output, that would be very helpful."}], "tags": [], "owner": {"reputation": 96, "user_id": 10255708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b0effe7732b79fd6730e375924e764?s=128&d=identicon&r=PG&f=1", "display_name": "maxioatic ", "link": "https://stackoverflow.com/users/10255708/maxioatic"}, "is_accepted": false, "score": 0, "last_activity_date": 1557955755, "creation_date": 1557955755, "answer_id": 56157872, "question_id": 56157485, "link": "https://stackoverflow.com/questions/56157485/how-to-use-multiprocessing-for-accelerate-the-following-function/56157872#56157872", "title": "How to use multiprocessing for accelerate the following function?", "body": "<p>Here's an implementation for multiprocessing that I use fairly often. It will split your list, in this case <code>a_nested_list_of_ints</code>, into however many cores you have. Then it runs your <code>foo</code> function over each of the split lists, one list per core. </p>\n\n<pre><code>def split_list(all_params, instances):\n    return list(np.array_split(all_params, instances))\n\n# split the list up into equal chucks for each core\nn_proc = multiprocessing.cpu_count()\nsplit_items = split_list(to_calc, n_proc)\n\n# create the multiprocessing pool\npool = Pool(processes=n_proc)\nall_calcs = []\nfor i in range(n_proc):\n    # the arguments to the foo definition have to be a tuple - (split[i],)\n    async_calc = pool.apply_async(foo, (split_items[i],))\n    all_calcs.append(async_calc)\n\npool.close()\npool.join()\n\n# get results\nall_results = []\nfor result in all_calcs:\n    all_results += result.get()\n\nprint(all_results)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 742, "user_id": 9978457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r70xA.jpg?s=128&g=1", "display_name": "anon", "link": "https://stackoverflow.com/users/9978457/anon"}, "edited": false, "score": 0, "creation_date": 1557972433, "post_id": 56159767, "comment_id": 98947946, "body": "I tried: <code>x = foo(a_nested_list_of_ints[i])</code>  and i am getting this:<code>Columns 0 to 9   0.1590 -0.1165 -0.1300  0.1441 -0.3016  0.2087  0.2543 -0.0794 -0.1356  0.1614</code> and the type is <code>(Variable containing:....</code> how should I proceed here?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 742, "user_id": 9978457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r70xA.jpg?s=128&g=1", "display_name": "anon", "link": "https://stackoverflow.com/users/9978457/anon"}, "edited": false, "score": 1, "creation_date": 1557972748, "post_id": 56159767, "comment_id": 98947991, "body": "I think you said in another question that <code>foo</code> is a <code>torch</code> function, which presumably returns some sort of <code>torch</code> array, which you attempt to convert to <code>ndarray</code> with <code>arr.data.numpy()</code>.  I don&#39;t have <code>torch</code> or related packages, so can&#39;t help directly."}, {"owner": {"reputation": 742, "user_id": 9978457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r70xA.jpg?s=128&g=1", "display_name": "anon", "link": "https://stackoverflow.com/users/9978457/anon"}, "edited": false, "score": 0, "creation_date": 1558029762, "post_id": 56159767, "comment_id": 98974968, "body": "what happen with the index assignation? <code>arr_2[j,:]</code>"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 742, "user_id": 9978457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r70xA.jpg?s=128&g=1", "display_name": "anon", "link": "https://stackoverflow.com/users/9978457/anon"}, "edited": false, "score": 1, "creation_date": 1558032346, "post_id": 56159767, "comment_id": 98976253, "body": "You may have to do a separate <code>j</code> loop on the unpacked lists.  I don&#39;t know enough about <code>torch</code> <code>data.numpy()</code> conversion to know whether there&#39;s some of concatenation or other action that can do that conversion to all elements or not."}, {"owner": {"reputation": 742, "user_id": 9978457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r70xA.jpg?s=128&g=1", "display_name": "anon", "link": "https://stackoverflow.com/users/9978457/anon"}, "edited": false, "score": 0, "creation_date": 1558234554, "post_id": 56159767, "comment_id": 99030848, "body": "Could you provide an example of the separate loop?"}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 4, "last_activity_date": 1557972544, "last_edit_date": 1557972544, "creation_date": 1557971763, "answer_id": 56159767, "question_id": 56157485, "link": "https://stackoverflow.com/questions/56157485/how-to-use-multiprocessing-for-accelerate-the-following-function/56159767#56159767", "title": "How to use multiprocessing for accelerate the following function?", "body": "<p>Here's a <code>pool</code> demo that works:</p>\n\n<pre><code>In [11]: def foo(i): \n    ...:     return np.arange(i), np.arange(10-i) \n    ...:                                                                        \nIn [12]: with multiprocessing.Pool(processes=2) as pool: \n    ...:     x = pool.map(foo, range(10)) \n    ...:                                                                        \nIn [13]: x                                                                      \nOut[13]: \n[(array([], dtype=int64), array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])),\n (array([0]), array([0, 1, 2, 3, 4, 5, 6, 7, 8])),\n (array([0, 1]), array([0, 1, 2, 3, 4, 5, 6, 7])),\n (array([0, 1, 2]), array([0, 1, 2, 3, 4, 5, 6])),\n (array([0, 1, 2, 3]), array([0, 1, 2, 3, 4, 5])),\n (array([0, 1, 2, 3, 4]), array([0, 1, 2, 3, 4])),\n (array([0, 1, 2, 3, 4, 5]), array([0, 1, 2, 3])),\n (array([0, 1, 2, 3, 4, 5, 6]), array([0, 1, 2])),\n (array([0, 1, 2, 3, 4, 5, 6, 7]), array([0, 1])),\n (array([0, 1, 2, 3, 4, 5, 6, 7, 8]), array([0]))]\n</code></pre>\n\n<p><code>pool.map</code> is doing the iteration, not some external <code>for</code> loop.</p>\n\n<p>And to get a little closer to your example:</p>\n\n<pre><code>In [14]: def foo(alist): \n    ...:     return np.arange(*alist), np.zeros(alist,int) \n    ...:      \n    ...:                                                                        \nIn [15]: alists=[(0,3),(1,4),(1,6,2)]                                           \nIn [16]: with multiprocessing.Pool(processes=2) as pool: \n    ...:     x = pool.map(foo, alists) \n    ...:                                                                        \nIn [17]: x                                                                      \nOut[17]: \n[(array([0, 1, 2]), array([], shape=(0, 3), dtype=int64)),\n (array([1, 2, 3]), array([[0, 0, 0, 0]])),\n (array([1, 3, 5]), array([[[0, 0],\n          [0, 0],\n          [0, 0],\n          [0, 0],\n          [0, 0],\n          [0, 0]]]))]\n</code></pre>\n\n<p>Note that <code>pool.map</code> returns a list, with all cases generated from <code>alists</code>.  It doesn't make sense to unpack that <code>x</code>.</p>\n\n<pre><code> x,y = pool.map(...)   # too many values to pack error\n</code></pre>\n\n<p>I can unpack the <code>x</code> using the <code>zip*</code> idiom:</p>\n\n<pre><code>In [21]: list(zip(*x))                                                          \nOut[21]: \n[(array([0, 1, 2]), array([1, 2, 3]), array([1, 3, 5])),\n (array([], shape=(0, 3), dtype=int64), array([[0, 0, 0, 0]]), array([[[0, 0],\n          [0, 0],\n          [0, 0],\n          [0, 0],\n          [0, 0],\n          [0, 0]]]))]\n</code></pre>\n\n<p>This a list of 2 tuples; in effect a list version of transpose.  This can be unpacked:</p>\n\n<pre><code>In [23]: y,z = zip(*x)                                                          \nIn [24]: y                                                                      \nOut[24]: (array([0, 1, 2]), array([1, 2, 3]), array([1, 3, 5]))\nIn [25]: z                                                                      \nOut[25]: \n(array([], shape=(0, 3), dtype=int64), array([[0, 0, 0, 0]]), array([[[0, 0],\n         [0, 0],\n         [0, 0],\n         [0, 0],\n         [0, 0],\n         [0, 0]]]))\n</code></pre>\n"}], "owner": {"reputation": 742, "user_id": 9978457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r70xA.jpg?s=128&g=1", "display_name": "anon", "link": "https://stackoverflow.com/users/9978457/anon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1558234425, "creation_date": 1557953669, "question_id": 56157485, "link": "https://stackoverflow.com/questions/56157485/how-to-use-multiprocessing-for-accelerate-the-following-function", "title": "How to use multiprocessing for accelerate the following function?", "body": "<p>I have the following for loop:</p>\n\n<pre><code>for j in range(len(a_nested_list_of_ints)):\n    arr_1_, arr_2_, arr_3_ = foo(a_nested_list_of_ints[j])\n    arr_1[j,:] = arr_1_.data.numpy()\n    arr_2[j,:] = arr_2_.data.numpy()\n    arr_3[j,:] = arr_3_.data.numpy()\n</code></pre>\n\n<p>Where <code>a_nested_list_of_ints</code> is a nested list of ints. However it is taking a lot of time to finish. How can I optimize it through multiprocessing? So far I tried to use <code>multiprocessing</code></p>\n\n<pre><code>p = Pool(5)\nfor j in range(len(a_nested_list_of_ints)):\n    arr_1_, arr_2_, arr_3_ = p.map(foo,a_nested_list_of_ints[j])\n    arr_1[j,:] = arr_1_.data.numpy()\n    arr_2[j,:] = arr_2_.data.numpy()\n    arr_3[j,:] = arr_3_.data.numpy()\n</code></pre>\n\n<p>However, I am getting:</p>\n\n<pre><code>ValueError: not enough values to unpack (expected 3, got 2)\n</code></pre>\n\n<p>here:</p>\n\n<pre><code>    arr_1_, arr_2_, arr_3_ = p.map(foo,a_nested_list_of_ints[j])\n</code></pre>\n\n<p>Any idea of how to make the above operation faster? I also even tried with starmap but it aint working.</p>\n"}, {"tags": ["python", "windows"], "answers": [{"comments": [{"owner": {"reputation": 132, "user_id": 11744026, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OwAhqK2_hzo/AAAAAAAAAAI/AAAAAAAAEVg/wOmSJo2H2Oc/photo.jpg?sz=128", "display_name": "Dettlaff", "link": "https://stackoverflow.com/users/11744026/dettlaff"}, "edited": false, "score": 0, "creation_date": 1610237223, "post_id": 56157636, "comment_id": 116070147, "body": "Wow, nice one!!"}], "tags": [], "owner": {"reputation": 36, "user_id": 6878876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3702d950e296b11b33fc87f6047203d8?s=128&d=identicon&r=PG&f=1", "display_name": "Kacper Szot", "link": "https://stackoverflow.com/users/6878876/kacper-szot"}, "is_accepted": false, "score": 1, "last_activity_date": 1557954435, "creation_date": 1557954435, "answer_id": 56157636, "question_id": 56157464, "link": "https://stackoverflow.com/questions/56157464/i-am-trying-to-slice-all-jpg-in-a-directory/56157636#56157636", "title": "I am trying to slice all .jpg in a directory", "body": "<p>Use glob to get all jpgs from your current directory then slice them.</p>\n\n<pre><code>import glob, os\nimport image_slicer\n\nos.chdir(\"./\")\nfor file in glob.glob(\"*.jpg\"):\n    image_slicer.slice(file, 60)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11506429, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Y-I5fI23H6Y/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rciE8oRlHIJDoYu3jsfvvLI1dkOCw/mo/photo.jpg?sz=128", "display_name": "ELW", "link": "https://stackoverflow.com/users/11506429/elw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "closed_date": 1557954644, "answer_count": 1, "score": 0, "last_activity_date": 1557954435, "creation_date": 1557953555, "last_edit_date": 1557953921, "question_id": 56157464, "link": "https://stackoverflow.com/questions/56157464/i-am-trying-to-slice-all-jpg-in-a-directory", "closed_reason": "Duplicate", "title": "I am trying to slice all .jpg in a directory", "body": "<p>I have successfully sliced an individual image. Now I would like to have #this code to do every .jpg be sliced in a directory.</p>\n\n<p>Here is my python code for slicing the individual images:</p>\n\n<pre><code>from PIL import Image\nimport os\n\n\nimage1=Image.open('banana.jpg')\n\nimport image_slicer\nimage_slicer.slice('banana.jpg', 60)\n</code></pre>\n\n<p>I have several images of fruit I would like to slice into smaller images #within this folder that are all the same size.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 143, "user_id": 9873471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DO1Ar.png?s=128&g=1", "display_name": "Column01", "link": "https://stackoverflow.com/users/9873471/column01"}, "edited": false, "score": 2, "creation_date": 1557953847, "post_id": 56157400, "comment_id": 98944025, "body": "All the Keys need to be surrounded in quotes otherwise no JSON parser will read it since it isn&#39;t JSON format. Did this data come from and API or something?"}, {"owner": {"reputation": 143, "user_id": 9873471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DO1Ar.png?s=128&g=1", "display_name": "Column01", "link": "https://stackoverflow.com/users/9873471/column01"}, "edited": false, "score": 0, "creation_date": 1557953971, "post_id": 56157400, "comment_id": 98944074, "body": "That format is valid for say JavaScript, but otherwise it isn&#39;t."}, {"owner": {"reputation": 99, "user_id": 10094771, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CKh78Y-PL0U/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oWmuRoVLpsXzMgTg9wknPuugdsqQ/mo/photo.jpg?sz=128", "display_name": "AHB", "link": "https://stackoverflow.com/users/10094771/ahb"}, "reply_to_user": {"reputation": 143, "user_id": 9873471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DO1Ar.png?s=128&g=1", "display_name": "Column01", "link": "https://stackoverflow.com/users/9873471/column01"}, "edited": false, "score": 0, "creation_date": 1557953989, "post_id": 56157400, "comment_id": 98944081, "body": "yes, the data is returned by a node js script"}, {"owner": {"reputation": 99, "user_id": 10094771, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CKh78Y-PL0U/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oWmuRoVLpsXzMgTg9wknPuugdsqQ/mo/photo.jpg?sz=128", "display_name": "AHB", "link": "https://stackoverflow.com/users/10094771/ahb"}, "reply_to_user": {"reputation": 143, "user_id": 9873471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DO1Ar.png?s=128&g=1", "display_name": "Column01", "link": "https://stackoverflow.com/users/9873471/column01"}, "edited": false, "score": 0, "creation_date": 1557954126, "post_id": 56157400, "comment_id": 98944133, "body": "@Column01 how to add double quotes around all the keys here"}, {"owner": {"reputation": 143, "user_id": 9873471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DO1Ar.png?s=128&g=1", "display_name": "Column01", "link": "https://stackoverflow.com/users/9873471/column01"}, "edited": false, "score": 1, "creation_date": 1557954301, "post_id": 56157400, "comment_id": 98944193, "body": "Well automatically in python it&#39;s a nightmare to write a script to fix this. Do you have access to the JS script that output&#39;s the json data?"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1557954368, "post_id": 56157400, "comment_id": 98944214, "body": "That&#39;s not a Unicode object; it&#39;s an (invalid) <code>dict</code> literal. Did you mean <code>x = &quot;{...}&quot;</code>?"}, {"owner": {"reputation": 7749, "user_id": 4046632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43e6a87a176719c607a2a73ce6728d88?s=128&d=identicon&r=PG&f=1", "display_name": "buran", "link": "https://stackoverflow.com/users/4046632/buran"}, "edited": false, "score": 0, "creation_date": 1557954431, "post_id": 56157400, "comment_id": 98944238, "body": "Also you will need to replace <code>true</code> with <code>True</code> and <code>null</code> with <code>None</code>"}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 9873471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DO1Ar.png?s=128&g=1", "display_name": "Column01", "link": "https://stackoverflow.com/users/9873471/column01"}, "edited": false, "score": 0, "creation_date": 1557955681, "post_id": 56157844, "comment_id": 98944681, "body": "Here is what the script prints at the end. <a href=\"https://pastebin.com/7fDPLWk8\" rel=\"nofollow noreferrer\">pastebin.com/7fDPLWk8</a>"}, {"owner": {"reputation": 99, "user_id": 10094771, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CKh78Y-PL0U/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oWmuRoVLpsXzMgTg9wknPuugdsqQ/mo/photo.jpg?sz=128", "display_name": "AHB", "link": "https://stackoverflow.com/users/10094771/ahb"}, "edited": false, "score": 0, "creation_date": 1557957291, "post_id": 56157844, "comment_id": 98945156, "body": "demjson.JSONDecodeError: Unexpected text after end of JSON value. I see this error sometimes. What could be the reason?"}, {"owner": {"reputation": 143, "user_id": 9873471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DO1Ar.png?s=128&g=1", "display_name": "Column01", "link": "https://stackoverflow.com/users/9873471/column01"}, "reply_to_user": {"reputation": 99, "user_id": 10094771, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CKh78Y-PL0U/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oWmuRoVLpsXzMgTg9wknPuugdsqQ/mo/photo.jpg?sz=128", "display_name": "AHB", "link": "https://stackoverflow.com/users/10094771/ahb"}, "edited": false, "score": 0, "creation_date": 1557962921, "post_id": 56157844, "comment_id": 98946354, "body": "Can you post a pastebin link of the data you are trying to decode?"}], "tags": [], "owner": {"reputation": 143, "user_id": 9873471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DO1Ar.png?s=128&g=1", "display_name": "Column01", "link": "https://stackoverflow.com/users/9873471/column01"}, "is_accepted": true, "score": 1, "last_activity_date": 1557955596, "creation_date": 1557955596, "answer_id": 56157844, "question_id": 56157400, "link": "https://stackoverflow.com/questions/56157400/parsing-unicode-with-keys-without-double-quotes-in-python/56157844#56157844", "title": "Parsing unicode with keys without double quotes in python", "body": "<p>Try the <code>demjson.decode()</code> function instead. Make sure to convert the input into a long string by wrapping it in double quotes and convert it to one line like I did here.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import demjson\nimport json\n\n# input JavaScript object\nx = \"{ version: '2.1.2', dipa: '1.2.3.4', dipaType: '', customerInfo: [{ name: 'xyz', id: 1234, account_id: 'abc', contract_id: 'abc', in_use: true, region: 'NA', location: 'USA' }, { name: 'XYZ', id: 9644, account_id: 'qwerty5', contract_id: 'qscdfgr', in_use: true, region: 'NA', location: 'cambridge' } ], maxAlertCount: 2304, onEgress: false, scrubCenters: [{ name: 'TO', percentage: 95.01, onEgress: false }], state: 'update', updated: '1557950465', vectors: [{ name: 'rate', alertNames: ['rate'], onEgress: false, Alerts: [{ key: '1.2.3.4', source: 'eve', eNew: '1557943443', dc: 'TOP2', bond: 'Border', percentage: 95.01, gress: 'ingress', sourceEpochs: ['1557950408', '1557950411', '1557950414', '1557950417', '1557950420', '1557950423', '1557950426', '1557950429', '1557950432', '1557950435', '1557950438', '1557950441', '1557950444', '1557950447', '1557950450', '1557950453', '1557950456', '1557950459', '1557950462', '1557950465' ], name: 'rate', category: 'rate', level: 'alarm', data_type: 'value', data: 19.99, timestamp: 1557950466, type: 'alert', value: 95.01, eUpdated: '1557950465' }], dcs: ['TO'], bonds: ['Bo'] }, { name: 'udp', alertNames: ['udp'], onEgress: false, Alerts: [{ key: '1.2.3.4', source: 'top', eNew: '1557943500', dc: 'TO', bond: 'Bo', percentage: 95.01, gress: 'ingress', sourceEpochs: ['1557950408', '1557950411', '1557950414', '1557950417', '1557950420', '1557950423', '1557950426', '1557950429', '1557950432', '1557950435', '1557950438', '1557950441', '1557950444', '1557950447', '1557950450', '1557950453', '1557950456', '1557950459', '1557950462', '1557950465' ], name: 'udp', category: 'udp', level: 'alert', data_type: 'named_values_list', data: [{ name: 'Dst', value: 25 }], timestamp: 1557950466, type: 'alert', eUpdated: '1557950465' }], dcs: ['TO'], bonds: ['Bo'] }, { name: 'tcp', alertNames: ['tcp_condition'], onEgress: false, Alerts: [{ key: '1.2.3.4', source: 'to', eNew: '1557950354', dc: 'TO', bond: 'Bo', percentage: 95.01, gress: 'ingress', sourceEpochs: ['1557950360', '1557950363', '1557950366', '1557950372', '1557950384', '1557950387', '1557950396', '1557950399', '1557950411', '1557950417', '1557950423', '1557950426', '1557950432', '1557950441', '1557950444', '1557950447', '1557950450', '1557950456', '1557950459', '1557950465' ], name: 'tcp', category: 'tcp', level: 'alert', data_type: 'named', data: [{ name: 'TCP', value: 25 }], timestamp: 1557950466, type: 'alert', eUpdated: '1557950465' }], dcs: ['TO'], bonds: ['Bo'] } ], timestamps: { firstAlerted: '1557943443', lastAlerted: '1557950465', lastLeaked: null } }\"\n\n# decode it into json data\njson_data = demjson.decode(x, \"utf-8\")\n# Return the 4 space indent the original had\njson_final = json.dumps(json_data, indent=4)\nprint(json_final)\n</code></pre>\n\n<p>If you have access to the Node JS script (see comments above where we discussed this more) that outputs the data, you can stringyify the JavaScript object before sending it to the API for python.\n<code>var pyJSON = JSON.stringify(obj);</code> will output the proper json data format</p>\n"}], "owner": {"reputation": 99, "user_id": 10094771, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CKh78Y-PL0U/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oWmuRoVLpsXzMgTg9wknPuugdsqQ/mo/photo.jpg?sz=128", "display_name": "AHB", "link": "https://stackoverflow.com/users/10094771/ahb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 56157844, "answer_count": 1, "score": 0, "last_activity_date": 1557955596, "creation_date": 1557953243, "last_edit_date": 1557953312, "question_id": 56157400, "link": "https://stackoverflow.com/questions/56157400/parsing-unicode-with-keys-without-double-quotes-in-python", "title": "Parsing unicode with keys without double quotes in python", "body": "<p>I'm trying to convert the below  python unicode object  without double quotes to json.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>x = {\n    version: '2.1.2',\n    dipa: '1.2.3.4',\n    dipaType: '',\n    customerInfo: [{\n            name: 'xyz',\n            id: 1234,\n            account_id: 'abc',\n            contract_id: 'abc',\n            in_use: true,\n            region: 'NA',\n            location: 'USA'\n        },\n        {\n            name: 'XYZ',\n            id: 9644,\n            account_id: 'qwerty5',\n            contract_id: 'qscdfgr',\n            in_use: true,\n            region: 'NA',\n            location: 'cambridge'\n        }\n    ],\n    maxAlertCount: 2304,\n    onEgress: false,\n    scrubCenters: [{\n        name: 'TO',\n        percentage: 95.01,\n        onEgress: false\n    }],\n    state: 'update',\n    updated: '1557950465',\n    vectors: [{\n            name: 'rate',\n            alertNames: ['rate'],\n            onEgress: false,\n            Alerts: [{\n                key: '1.2.3.4',\n                source: 'eve',\n                eNew: '1557943443',\n                dc: 'TOP2',\n                bond: 'Border',\n                percentage: 95.01,\n                gress: 'ingress',\n                sourceEpochs: ['1557950408',\n                    '1557950411',\n                    '1557950414',\n                    '1557950417',\n                    '1557950420',\n                    '1557950423',\n                    '1557950426',\n                    '1557950429',\n                    '1557950432',\n                    '1557950435',\n                    '1557950438',\n                    '1557950441',\n                    '1557950444',\n                    '1557950447',\n                    '1557950450',\n                    '1557950453',\n                    '1557950456',\n                    '1557950459',\n                    '1557950462',\n                    '1557950465'\n                ],\n                name: 'rate',\n                category: 'rate',\n                level: 'alarm',\n                data_type: 'value',\n                data: 19.99,\n                timestamp: 1557950466,\n                type: 'alert',\n                value: 95.01,\n                eUpdated: '1557950465'\n            }],\n            dcs: ['TO'],\n            bonds: ['Bo']\n        },\n        {\n            name: 'udp',\n            alertNames: ['udp'],\n            onEgress: false,\n             Alerts: [{\n                key: '1.2.3.4',\n                source: 'top',\n                eNew: '1557943500',\n                dc: 'TO',\n                bond: 'Bo',\n                percentage: 95.01,\n                gress: 'ingress',\n                sourceEpochs: ['1557950408',\n                    '1557950411',\n                    '1557950414',\n                    '1557950417',\n                    '1557950420',\n                    '1557950423',\n                    '1557950426',\n                    '1557950429',\n                    '1557950432',\n                    '1557950435',\n                    '1557950438',\n                    '1557950441',\n                    '1557950444',\n                    '1557950447',\n                    '1557950450',\n                    '1557950453',\n                    '1557950456',\n                    '1557950459',\n                    '1557950462',\n                    '1557950465'\n                ],\n                name: 'udp',\n                category: 'udp',\n                level: 'alert',\n                data_type: 'named_values_list',\n                data: [{\n                    name: 'Dst',\n                    value: 25\n                }],\n                timestamp: 1557950466,\n                type: 'alert',\n                eUpdated: '1557950465'\n            }],\n            dcs: ['TO'],\n            bonds: ['Bo']\n        },\n        {\n            name: 'tcp',\n            alertNames: ['tcp_condition'],\n            onEgress: false,\n            Alerts: [{\n                key: '1.2.3.4',\n                source: 'to',\n                eNew: '1557950354',\n                dc: 'TO',\n                bond: 'Bo',\n                percentage: 95.01,\n                gress: 'ingress',\n                sourceEpochs: ['1557950360',\n                    '1557950363',\n                    '1557950366',\n                    '1557950372',\n                    '1557950384',\n                    '1557950387',\n                    '1557950396',\n                    '1557950399',\n                    '1557950411',\n                    '1557950417',\n                    '1557950423',\n                    '1557950426',\n                    '1557950432',\n                    '1557950441',\n                    '1557950444',\n                    '1557950447',\n                    '1557950450',\n                    '1557950456',\n                    '1557950459',\n                    '1557950465'\n                ],\n                name: 'tcp',\n                category: 'tcp',\n                level: 'alert',\n                data_type: 'named',\n                data: [{\n                    name: 'TCP',\n                    value: 25\n                }],\n                timestamp: 1557950466,\n                type: 'alert',\n                eUpdated: '1557950465'\n            }],\n            dcs: ['TO'],\n            bonds: ['Bo']\n        }\n    ],\n    timestamps: {\n        firstAlerted: '1557943443',\n        lastAlerted: '1557950465',\n        lastLeaked: null\n    }\n}\n</code></pre>\n\n<p>I tried using hjson and demjson</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import hjson\nresult = hjson.loads(x)\n</code></pre>\n\n<pre class=\"lang-py prettyprint-override\"><code>import demjson\nresult = demjson.loads(x)\n</code></pre>\n\n<p>Actual result :</p>\n\n<p>hjson.scanner.HjsonDecodeError: Extra data: line 156 column 1 - line 620 column 27 (char 4551 - 232056)</p>\n\n<p>demjson.JSONDecodeError: Unexpected text after end of JSON value</p>\n\n<p>expected result:</p>\n\n<p>Json object</p>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1557954267, "post_id": 56157394, "comment_id": 98944184, "body": "There\u2019s no need to use re.split - and anyway r\u201d.\u201d Will match any character where I think you probably want to split on r\u201d\\.\u201d - and then you haven\u2019t given it the tring as a parameter. You MUST read the documentation! Anyway, instead simply use <code>each.split(\u201c.\u201d)</code>"}, {"owner": {"reputation": 3, "user_id": 11042124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbf302b546e22fa096c3af33a5b0d38?s=128&d=identicon&r=PG&f=1", "display_name": "Udolza", "link": "https://stackoverflow.com/users/11042124/udolza"}, "reply_to_user": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1558021037, "post_id": 56157394, "comment_id": 98970822, "body": "I tried that, but I got <code>TypeError: list indices must be integers or slices, not str</code>. I can&#39;t convert lst to an intiger because of the periods. I have read the documentation and understood it to the best of my abilities... which obviously isn&#39;t well enough."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11042124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbf302b546e22fa096c3af33a5b0d38?s=128&d=identicon&r=PG&f=1", "display_name": "Udolza", "link": "https://stackoverflow.com/users/11042124/udolza"}, "edited": false, "score": 0, "creation_date": 1558021558, "post_id": 56157916, "comment_id": 98971050, "body": "your code as written works, but I get an error when I change <code>ip</code> to be my csv list. It needs to be integer or slice, not a string as it currently is."}, {"owner": {"reputation": 3, "user_id": 11042124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbf302b546e22fa096c3af33a5b0d38?s=128&d=identicon&r=PG&f=1", "display_name": "Udolza", "link": "https://stackoverflow.com/users/11042124/udolza"}, "edited": false, "score": 0, "creation_date": 1558023204, "post_id": 56157916, "comment_id": 98971919, "body": "Wait... I got it working now. I thought that <code>each</code> was just keeping count of what line of the csv I&#39;m on... turns out it was the IP itself. Thanks!"}], "tags": [], "owner": {"reputation": 1668, "user_id": 10146012, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dlAbb.jpg?s=128&g=1", "display_name": "Mahmoud Elshahat", "link": "https://stackoverflow.com/users/10146012/mahmoud-elshahat"}, "is_accepted": true, "score": -1, "last_activity_date": 1557955981, "creation_date": 1557955981, "answer_id": 56157916, "question_id": 56157394, "link": "https://stackoverflow.com/questions/56157394/how-to-split-octets-of-ip-addressses-from-csv/56157916#56157916", "title": "How to split octets of ip addressses from csv", "body": "<p>if you need to split ip address to individual octets, try this:</p>\n\n<pre><code>ip = '192.168.1.70'\n\nv = [int(x) for x in ip.split('.')]\nprint(v) \n</code></pre>\n\n<p>output:</p>\n\n<pre><code>[192, 168, 1, 70]\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11042124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbf302b546e22fa096c3af33a5b0d38?s=128&d=identicon&r=PG&f=1", "display_name": "Udolza", "link": "https://stackoverflow.com/users/11042124/udolza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 56157916, "answer_count": 1, "score": 0, "last_activity_date": 1557955981, "creation_date": 1557953221, "question_id": 56157394, "link": "https://stackoverflow.com/questions/56157394/how-to-split-octets-of-ip-addressses-from-csv", "title": "How to split octets of ip addressses from csv", "body": "<p>I'm trying to take an IP log list (in CSV format) remove all duplicate addresses, then split it up into separate octets and store it in a list. I'm going to eventually add in checking for subnet duplicates (same ip in the same subnet), but I'm stuck here. there is extra information in the CSV file, but its been a long time since I've coded, so I'm mostly just focused on the IPs right now. I don't care if I lose the rest of the info. </p>\n\n<p>I originally tried to try set character blocks (ex. take character 0-2 as the first octect, 4-6 as second, etc.) but that obviously doesn't work if octets are less than 3 digits. Then I tried using re.split to split up the octets, but it was saying that it wouldn't accept strings (for some reason). I then tried what I currently have in my code, but with <code>blah=int(fin.append(lst[each].re.split(r\".\",int)))</code>, but that wouldn't work because of the periods in the intiger. </p>\n\n<pre><code>import pandas\nimport re\n\n#set column names and input the data\ncolnames = ['zero', 'one', 'two', 'three', 'four', 'five', 'six', 'seven']\ndata = pandas.read_csv(r'C:\\Users\\xxx\\Desktop\\Projects\\Find the IPs\\tiny version.csv', names=colnames)\n\n#tell which column to read from then put in list called \"lst\" \nip = data.five.tolist()\nlst = list(dict.fromkeys(ip))\n\n#create final list\nfin = []\n#for every entry in lst, split it up at the periods, then add it to fin\nfor each in lst:\n    print(\"I got here\")\n    blah = lst([each]).re.split(r\".\",int)\n\n\n    fin.append(blah)\n</code></pre>\n\n<p>right now, I'm hoping for a list with each entry containing all four octets as integers.</p>\n"}, {"tags": ["python", "csv"], "answers": [{"tags": [], "owner": {"reputation": 2617, "user_id": 3697870, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/krATc.jpg?s=128&g=1", "display_name": "Heath Raftery", "link": "https://stackoverflow.com/users/3697870/heath-raftery"}, "is_accepted": true, "score": 0, "last_activity_date": 1557953685, "creation_date": 1557953685, "answer_id": 56157488, "question_id": 56157382, "link": "https://stackoverflow.com/questions/56157382/trying-to-use-a-list-to-populate-cells-in-a-row/56157488#56157488", "title": "Trying to use a list to populate cells in a row", "body": "<p>You want all the elements of <code>new_list</code> to appear as cells in a single row? Then write the whole list as a row, instead of each element of <code>new_list</code> as a row.</p>\n\n<pre><code>new_list = ['X', 'N', 'N', 'N', 'X', 'N', 'N', 'X', 'N', 'N', 'N', 'N', 'X', 'N', 'N',]\n\ndef new_list_report(new_list):\n    with open('newlist.csv', 'w') as csvfile:\n        thewriter = csv.writer(csvfile)\n        thewriter.writerow(new_list)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11506327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2f4d5b4e5d014970a6eac4c02678abd?s=128&d=identicon&r=PG&f=1", "display_name": "meerkat", "link": "https://stackoverflow.com/users/11506327/meerkat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "accepted_answer_id": 56157488, "answer_count": 1, "score": 0, "last_activity_date": 1557953685, "creation_date": 1557953135, "question_id": 56157382, "link": "https://stackoverflow.com/questions/56157382/trying-to-use-a-list-to-populate-cells-in-a-row", "title": "Trying to use a list to populate cells in a row", "body": "<p>I want to use a list to populate a row of data cells. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\nnew_list = ['X', 'N', 'N', 'N', 'X', 'N', 'N', 'X', 'N', 'N', 'N', 'N', 'X', 'N', 'N',]\n\ndef new_list_report(new_list):\n    with open('newlist.csv', 'w') as csvfile:\n        thewriter = csv.writer(csvfile)\n        for word in new_list:\n            thewriter.writerow(word)\n</code></pre>\n\n<p>When I execute the code, it populates each data cell in a column. What I would like to do is instead populate each cell in a row. How could I do this?</p>\n"}, {"tags": ["python", "django", "django-views", "django-urls"], "answers": [{"tags": [], "owner": {"reputation": 5358, "user_id": 6731765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/851df22ef596b0dad4e237f738852108?s=128&d=identicon&r=PG&f=1", "display_name": "NS0", "link": "https://stackoverflow.com/users/6731765/ns0"}, "is_accepted": true, "score": 3, "last_activity_date": 1557954305, "last_edit_date": 1557954305, "creation_date": 1557954065, "answer_id": 56157569, "question_id": 56157353, "link": "https://stackoverflow.com/questions/56157353/reverse-for-account-login-not-found-in-django/56157569#56157569", "title": "reverse for account_login not found in Django", "body": "<p>It looks like you need to include the following pattern in urls.py</p>\n\n<pre><code>url(r'^accounts/', include('allauth.urls')),\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 10290511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53833521f6fd45a67f7c75670782209?s=128&d=identicon&r=PG&f=1", "display_name": "Jack022", "link": "https://stackoverflow.com/users/10290511/jack022"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 739, "favorite_count": 0, "accepted_answer_id": 56157569, "answer_count": 1, "score": 0, "last_activity_date": 1557954305, "creation_date": 1557953041, "question_id": 56157353, "link": "https://stackoverflow.com/questions/56157353/reverse-for-account-login-not-found-in-django", "title": "reverse for account_login not found in Django", "body": "<p>I'm trying o add to my Django project a registration view from the <a href=\"https://github.com/pennersr/django-allauth\" rel=\"nofollow noreferrer\">django-allauth</a> package.</p>\n\n<p>I added the view to my <strong>urls.py</strong> file but i keep getting the following error:</p>\n\n<pre><code>Reverse for 'account_login' not found. 'account_login' is not a valid view function or pattern name.\n</code></pre>\n\n<p>Here is how i added the view to my urls:</p>\n\n<pre><code>from allauth.account.views import SignupView\n\nurlpatterns = [\n    path(\"signup/\", SignupView.as_view(), name=\"account_signup\"),\n]\n</code></pre>\n\n<p>I don't really understand what am i missing when importing the view, can anyone help me?</p>\n"}, {"tags": ["python", "tensorflow", "machine-learning", "scikit-learn", "tensorflow-estimator"], "owner": {"reputation": 11, "user_id": 4151961, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uynWRp4IwdQ/AAAAAAAAAAI/AAAAAAAACFY/ZwXSXpnieeM/photo.jpg?sz=128", "display_name": "Chase Adams", "link": "https://stackoverflow.com/users/4151961/chase-adams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 175, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1557953864, "creation_date": 1557952845, "last_edit_date": 1557953864, "question_id": 56157312, "link": "https://stackoverflow.com/questions/56157312/how-do-i-use-logistic-regression-tensorflow-estimator-similar-to-scikit-class-we", "title": "How do I use Logistic Regression Tensorflow Estimator similar to Scikit class weights", "body": "<p>I am trying to port over a basic binary sklearn logistic regression model to tensorflow, and I would like to use the Estimator class, because I just need a simple model. However, because my two classes are imbalanced, the sklearn version used the class_weight parameter. I do not see an equivalent variant for the Estimator.</p>\n\n<p>I'm trying to get the same functionality as:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class_weight = {\"false\": 1, \"true\": 10}\nmodel = sklearn.linear_model.LogisticRegression(class_weight = class_weight)\nmodel.fit(X, Y)\n</code></pre>\n\n<p>I tried using the weight_column, but it did not seem to properly train. It has a lot more false positives, due to the class imbalance not being properly accounted for.  I also tried looking into changing the loss function, but every example I see is not for the Estimator framework: <a href=\"https://stackoverflow.com/questions/45867942/weighted-training-examples-in-tensorflow\">Weighted Training Examples in Tensorflow</a></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def input_fn(X, Y):\n  features = dict(X)\n  features['weight'] = np.ones(len(X))\n  dataset = tf.data.Dataset.from_tensor_slices((features, Y))\n  return dataset.repeat(1).batch(len(Y)) # 1 epoch, no batching\n\nmodel = tf.estimator.LinearClassifier(feature_columns, weight_column='weight')\nmodel.train(input_fn: lambda: batching_fn(X, Y)\n</code></pre>\n\n<p>But doing this gives accuracy around 6% lower, which is fairly significant. And most of it comes from false positives, so the model isn't properly oversampling the negative/False cases.</p>\n"}, {"tags": ["python", "terminal"], "comments": [{"owner": {"reputation": 6812, "user_id": 7371893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=128&g=1", "display_name": "&#226;\u0144\u014d\u014b\u0177Xmo\u016f\u015c", "link": "https://stackoverflow.com/users/7371893/%c3%a2%c5%84%c5%8d%c5%8b%c5%b7xmo%c5%af%c5%9c"}, "edited": false, "score": 0, "creation_date": 1557952948, "post_id": 56157284, "comment_id": 98943683, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/33216679/usr-bin-python3-error-while-finding-spec-for-virtualenvwrapper-hook-loader\">/usr/bin/python3: Error while finding spec for &#39;virtualenvwrapper.hook_loader&#39; (&lt;class &#39;ImportError&#39;&gt;: No module named &#39;virtualenvwrapper&#39;)</a>"}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 6209301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e6611f5186cc9ea7bade6491f5b024e?s=128&d=identicon&r=PG&f=1", "display_name": "niloofar latifian", "link": "https://stackoverflow.com/users/6209301/niloofar-latifian"}, "edited": false, "score": 0, "creation_date": 1557953818, "post_id": 56157375, "comment_id": 98944014, "body": "I can not find <code>~&#47;.bashrc</code> where is it? I just have <code>~&#47;.bash_profile</code>"}, {"owner": {"reputation": 719, "user_id": 8008686, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--pCWUmKn7oo/AAAAAAAAAAI/AAAAAAAAAWM/vBulcxARDuw/photo.jpg?sz=128", "display_name": "DMellon", "link": "https://stackoverflow.com/users/8008686/dmellon"}, "reply_to_user": {"reputation": 81, "user_id": 6209301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e6611f5186cc9ea7bade6491f5b024e?s=128&d=identicon&r=PG&f=1", "display_name": "niloofar latifian", "link": "https://stackoverflow.com/users/6209301/niloofar-latifian"}, "edited": false, "score": 0, "creation_date": 1557954217, "post_id": 56157375, "comment_id": 98944168, "body": ".bash_profile is executed for login shells, while .bashrc is executed for interactive non-login shells. Are you in your home directory? Also, what OS? If there is nothing in your home directory you can create one as it is user specific but make sure there is nothing there first. The system wide bash is in /etc/bash.bashrc."}], "tags": [], "owner": {"reputation": 719, "user_id": 8008686, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--pCWUmKn7oo/AAAAAAAAAAI/AAAAAAAAAWM/vBulcxARDuw/photo.jpg?sz=128", "display_name": "DMellon", "link": "https://stackoverflow.com/users/8008686/dmellon"}, "is_accepted": false, "score": 0, "last_activity_date": 1557953114, "creation_date": 1557953114, "answer_id": 56157375, "question_id": 56157284, "link": "https://stackoverflow.com/questions/56157284/problem-with-importing-packages-of-python-in-terminal/56157375#56157375", "title": "problem with importing packages of python in terminal", "body": "<p>This comes down to backwards compatibility and you likely just need to update your ~/.bashrc by entering the following:</p>\n\n<pre><code>nano ~/.bashrc\n</code></pre>\n\n<p>Change </p>\n\n<blockquote>\n  <p>export VIRTUALENVWRAPPER_PYTHON=/usr/bin/python3</p>\n</blockquote>\n\n<p>to </p>\n\n<blockquote>\n  <p>export VIRTUALENVWRAPPER_PYTHON=/usr/bin/python</p>\n</blockquote>\n\n<p>That will likely solve your issue.</p>\n"}], "owner": {"reputation": 81, "user_id": 6209301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e6611f5186cc9ea7bade6491f5b024e?s=128&d=identicon&r=PG&f=1", "display_name": "niloofar latifian", "link": "https://stackoverflow.com/users/6209301/niloofar-latifian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557953114, "creation_date": 1557952734, "question_id": 56157284, "link": "https://stackoverflow.com/questions/56157284/problem-with-importing-packages-of-python-in-terminal", "title": "problem with importing packages of python in terminal", "body": "<p>I have some problems with python and import errors.\nwhenever I open the terminal, before entering any commands I get this:</p>\n\n<pre><code>/Library/Frameworks/Python.framework/Versions/3.6/bin/python3: \nError while finding module specification for \n'virtualenvwrapper.hook_loader' (ModuleNotFoundError: No module \nnamed 'virtualenvwrapper')\nvirtualenvwrapper.sh: There was a problem running the \ninitialization hooks. \n\nIf Python could not import the module \nvirtualenvwrapper.hook_loader,\ncheck that virtualenvwrapper has been installed for\nVIRTUALENVWRAPPER_PYTHON=/Library/Frameworks/ \nPython.framework/Versions/3.6/bin/python3 and that PATH is\nset properly.\n</code></pre>\n\n<p>also when I type <code>python</code> in the terminal I get this error:</p>\n\n<pre><code>ImportError: No module named site\n</code></pre>\n\n<p>I don't know why, but I get this every time that I want to install a package with <code>pip</code></p>\n"}, {"tags": ["python", "sql", "excel"], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 9110699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6bc8deffef4fb8aa1dac749deb8fc1a?s=128&d=identicon&r=PG&f=1", "display_name": "Amantux", "link": "https://stackoverflow.com/users/9110699/amantux"}, "is_accepted": false, "score": 0, "last_activity_date": 1557952965, "creation_date": 1557952965, "answer_id": 56157332, "question_id": 56157279, "link": "https://stackoverflow.com/questions/56157279/automating-teradata-data-sql/56157332#56157332", "title": "Automating Teradata Data SQL", "body": "<p>I mean you could use Python to run the query, dump it in a dataframe, then save/send the dataframe as a csv or similar</p>\n"}], "owner": {"reputation": 21, "user_id": 11377627, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-G_IVFafpwHE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3recTDi9BYF0O4LTqE2Or_8yaKvvAQ/mo/photo.jpg?sz=128", "display_name": "lil chill", "link": "https://stackoverflow.com/users/11377627/lil-chill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 133, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1557952965, "creation_date": 1557952697, "last_edit_date": 1557952724, "question_id": 56157279, "link": "https://stackoverflow.com/questions/56157279/automating-teradata-data-sql", "title": "Automating Teradata Data SQL", "body": "<p>I have an SQL script whose output I want automated, that is for example,</p>\n\n<p>Every 8AM I want the script to run and export the output to excel\nE.g </p>\n\n<pre><code>Select * FROM data WHERE ACCT = 1\n</code></pre>\n\n<p>The results should be sent to a folder. The dream will be to send d results via email.</p>\n\n<p>I have no idea how to do this. HELP!</p>\n"}, {"tags": ["python", "computational-geometry", "cgal"], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 13540243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/371e84b23cf2a030cd479f1f8c7432bc?s=128&d=identicon&r=PG&f=1", "display_name": "gmh2015", "link": "https://stackoverflow.com/users/13540243/gmh2015"}, "is_accepted": false, "score": 0, "last_activity_date": 1598860897, "creation_date": 1598860897, "answer_id": 63666987, "question_id": 56157264, "link": "https://stackoverflow.com/questions/56157264/finding-intersections-between-line-segment-and-general-polygon-in-2d-3d/63666987#63666987", "title": "Finding intersections between line segment and general polygon in 2D/3D", "body": "<p>If you don't care about the efficiency of the program.\nYou can try my latest python package Geometry3D by</p>\n<pre class=\"lang-sh prettyprint-override\"><code>pip install Geometry3D\n</code></pre>\n<p>As it is written in pure Python, it's a little slow and is not suitable for works like graphics.\nBut it works well in common situations and it supports many geometries.</p>\n<p>An example is shown below</p>\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; from Geometry3D import *\n&gt;&gt;&gt;\n&gt;&gt;&gt; a = Point(1,1,1)\n&gt;&gt;&gt; b = Point(-1,1,1)\n&gt;&gt;&gt; c = Point(-1,-1,1)\n&gt;&gt;&gt; d = Point(1,-1,1)\n&gt;&gt;&gt; e = Point(1,1,-1)\n&gt;&gt;&gt; f = Point(-1,1,-1)\n&gt;&gt;&gt; g = Point(-1,-1,-1)\n&gt;&gt;&gt; h = Point(1,-1,-1)\n&gt;&gt;&gt; cph0 = Parallelepiped(Point(-1,-1,-1),Vector(2,0,0),Vector(0,2,0),Vector(0,0,2))\n&gt;&gt;&gt; cpg12 = ConvexPolygon((e,c,h))\n&gt;&gt;&gt; cpg13 = ConvexPolygon((e,f,c))\n&gt;&gt;&gt; cpg14 = ConvexPolygon((c,f,g))\n&gt;&gt;&gt; cpg15 = ConvexPolygon((h,c,g))\n&gt;&gt;&gt; cpg16 = ConvexPolygon((h,g,f,e))\n&gt;&gt;&gt; cph1 = ConvexPolyhedron((cpg12,cpg13,cpg14,cpg15,cpg16))\n&gt;&gt;&gt; a1 = Point(1.5,1.5,1.5)\n&gt;&gt;&gt; b1 = Point(-0.5,1.5,1.5)\n&gt;&gt;&gt; c1 = Point(-0.5,-0.5,1.5)\n&gt;&gt;&gt; d1 = Point(1.5,-0.5,1.5)\n&gt;&gt;&gt; e1 = Point(1.5,1.5,-0.5)\n&gt;&gt;&gt; f1 = Point(-0.2,1.5,-0.5)\n&gt;&gt;&gt; g1 = Point(-0.2,-0.5,-0.5)\n&gt;&gt;&gt; h1 = Point(1.5,-0.5,-0.5)\n&gt;&gt;&gt;\n&gt;&gt;&gt; cpg6 = ConvexPolygon((a1,d1,h1,e1))\n&gt;&gt;&gt; cpg7 = ConvexPolygon((a1,e1,f1,b1))\n&gt;&gt;&gt; cpg8 = ConvexPolygon((c1,b1,f1,g1))\n&gt;&gt;&gt; cpg9 = ConvexPolygon((c1,g1,h1,d1))\n&gt;&gt;&gt; cpg10 = ConvexPolygon((a1,b1,c1,d1))\n&gt;&gt;&gt; cpg11 = ConvexPolygon((e1,h1,g1,f1))\n&gt;&gt;&gt; cph2 = ConvexPolyhedron((cpg6,cpg7,cpg8,cpg9,cpg10,cpg11))\n&gt;&gt;&gt; cph3 = intersection(cph0,cph2)\n&gt;&gt;&gt;\n&gt;&gt;&gt; cph4 = intersection(cph1,cph2)\n&gt;&gt;&gt; r = Renderer()\n&gt;&gt;&gt; r.add((cph0,'r',1),normal_length = 0)\n&gt;&gt;&gt; r.add((cph1,'r',1),normal_length = 0)\n&gt;&gt;&gt; r.add((cph2,'g',1),normal_length = 0)\n&gt;&gt;&gt; r.add((cph3,'b',3),normal_length = 0.5)\n&gt;&gt;&gt; r.add((cph4,'y',3),normal_length = 0.5)\n&gt;&gt;&gt; r.show()\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/0a3ko.png\" rel=\"nofollow noreferrer\">Result</a></p>\n<p>You can also look at the documentation <a href=\"https://github.com/GouMinghao/Geometry3D\" rel=\"nofollow noreferrer\">Geomrtry3D</a></p>\n"}], "owner": {"reputation": 71, "user_id": 7571870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f9651a112498286ea45dfaaf91d6c5?s=128&d=identicon&r=PG&f=1", "display_name": "rahulv88", "link": "https://stackoverflow.com/users/7571870/rahulv88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 305, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1598860897, "creation_date": 1557952627, "question_id": 56157264, "link": "https://stackoverflow.com/questions/56157264/finding-intersections-between-line-segment-and-general-polygon-in-2d-3d", "title": "Finding intersections between line segment and general polygon in 2D/3D", "body": "<p>I'm trying to use the CGAL python-bindings to write a program (in Python) to find intersections between 1 object (which could be a line segment(s) or a polygon/polyhedron) and another polygon/polyhedron. While I am currently working in 2D, I would like to extend the program to 3D as well.</p>\n\n<p>I've installed the python-bindings for CGAL already. I understand it is still under development, but it seems it can already do a lot of things. I have managed to get it to output intersections between a line segment and a tetrahedron (using the AABB tree algorithms), and intersecting sequences of dD iso-oriented boxes. However, the AABB tree algorithms seem to only work with 3D objects. I guess I can represent my general shape as a pseudo-3D object, but then I ran into the problem of actually constructing the 3D object. The examples given in the python-bindings only work for tetrahedrons, and I cannot figure out how to create a general polyhedron. So my problem has become two-fold:</p>\n\n<ol>\n<li>How do I define a general polyhedron using the CGAL python-bindings?</li>\n<li>How do I use the defined polyhedron to calculate intersections and distances from other general shapes like line segments and polygons?</li>\n</ol>\n\n<p>So for a tetrahedron, the package does (from <a href=\"https://github.com/CGAL/cgal-swig-bindings/blob/master/examples/python/AABB_polyhedron_facet_intersection_example.py\" rel=\"nofollow noreferrer\">https://github.com/CGAL/cgal-swig-bindings/blob/master/examples/python/AABB_polyhedron_facet_intersection_example.py</a>) :</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from CGAL.CGAL_Kernel import Point_3\nfrom CGAL.CGAL_Polyhedron_3 import Polyhedron_3\n\np=Point_3(1.0, 0.0, 0.0)\nq=Point_3(0.0, 1.0, 0.0)\nr=Point_3(0.0, 0.0, 1.0)\ns=Point_3(0.0, 0.0, 0.0)\npolyhedron = Polyhedron_3()\npolyhedron.make_tetrahedron(p, q, r, s)\n\n#constructs AABB tree\ntree = AABB_tree_Polyhedron_3_Facet_handle(polyhedron.facets())\n\n#constructs segment query\na = Point_3(-0.2, 0.2, -0.2)\nb = Point_3(1.3, 0.2, 1.3)\nsegment_query=Segment_3(a,b)\n\n</code></pre>\n\n<p>This creates a tetrahedron, which can support queries on intersection, squared distance etc. However, this does not work for more than 4 points. In my case, the polygon/polyhedron would be defined by around 50 points. How do I create such an object using CGAL-python?</p>\n"}, {"tags": ["python", "performance", "numpy", "multiprocessing", "python-xarray"], "comments": [{"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1557970670, "post_id": 56157256, "comment_id": 98947654, "body": "Multiprocessing has overhead.  New Python processes have to start and data has to be passed via interprocess mechanisms.  That can easily overwhelm a task that takes only 7 seconds."}, {"owner": {"reputation": 1211, "user_id": 4614444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c29398e46e3d313b31faf29aa52738c?s=128&d=identicon&r=PG&f=1", "display_name": "Thalish Sajeed", "link": "https://stackoverflow.com/users/4614444/thalish-sajeed"}, "edited": false, "score": 0, "creation_date": 1557987315, "post_id": 56157256, "comment_id": 98951459, "body": "@Fxipzap : Can you pickle the xarray and share it here? I&#39;ll try analyzing the issue"}, {"owner": {"reputation": 1, "user_id": 11415829, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hDVoiVscNtI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfv5BVqd8F_i0P-GMoiKj1PFiuGfw/mo/photo.jpg?sz=128", "display_name": "Fxizap", "link": "https://stackoverflow.com/users/11415829/fxizap"}, "edited": false, "score": 0, "creation_date": 1558009822, "post_id": 56157256, "comment_id": 98963673, "body": "Thanks to both of you. I have uploaded the file here: <a href=\"ftp://ftp.gfdl.noaa.gov/pub/Fabien.Paulot/for_stack_overflow/merge.nc\" rel=\"nofollow noreferrer\">ftp.gfdl.noaa.gov/pub/Fabien.Paulot/for_stack_overflow/merge&zwnj;&#8203;.nc</a>"}], "owner": {"reputation": 1, "user_id": 11415829, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hDVoiVscNtI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfv5BVqd8F_i0P-GMoiKj1PFiuGfw/mo/photo.jpg?sz=128", "display_name": "Fxizap", "link": "https://stackoverflow.com/users/11415829/fxizap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1558010289, "creation_date": 1557952604, "last_edit_date": 1558010289, "question_id": 56157256, "link": "https://stackoverflow.com/questions/56157256/no-speed-up-with-python-multiprocessing", "title": "No speed up with python multiprocessing", "body": "<p>I am trying to speed up the calculation of bootstrap estimates using python `'mp``. However I am not seeing any speed up.\nThe data I am trying to apply bootstrapping to are gridded (time,lat,lon) and read from netcdf using xarray.</p>\n\n<p>Here is what I have done. </p>\n\n<pre><code>import multiprocessing as mp\nimport xarray as xr\n\ndef boot_mean(idata):\n    return(idata.mean(dim='boot_ax'))\n\ndef process_boot(nsample,bfun,idata):\n    ind_boot        =  np.random.choice(len(idata['boot_ax']),nsample)\n    return(bfun(idata.isel(boot_ax=ind_boot)))\n\n\n#geo bootstrap                                                                                                                                                                                \ndef geo_bootstrap(idata_raw,bfun,nsample=0,nboot=1000,scoord='time',\\\n                  np=1):\n\n    idata = idata_raw.rename({scoord:'boot_ax'})\n\n\n    if nsample==0:\n        nsample=len(idata['boot_ax'])\n    if np==1:\n        C  = xr.concat([process_boot(nsample,bfun,idata) \\ \n                        for x in range(nboot)],dim='boot')\n    else:\n        pool    = mp.Pool(processes=np)\n        results = [pool.apply_async(process_boot,args=(nsample,bfun,idata))   for x in range(nboot)]\n\n        C = xr.concat([p.get() for p in results],dim='boot')\n        pool.close()\n\n    return(C)\n\n</code></pre>\n\n<p>With 1 cpu, the code takes ~7s</p>\n\n<pre><code>%%time\nO = geo_bootstrap(INPUT,boot_mean,nboot=20)\nCPU times: user 6.79 s, sys: 268 ms, total: 7.06 s\nWall time: 7.1 s\n</code></pre>\n\n<p>With 4 cpus, the code takes longer, which I cannot quite understand</p>\n\n<pre><code>%%time\nO = geo_bootstrap(INPUT,boot_mean,nboot=20,np=4)\n\nCPU times: user 2.14 s, sys: 4.34 s, total: 6.49 s\nWall time: 8.44 s\n</code></pre>\n\n<p>The machine I am running on has plenty of memory. It's my first attempt with <code>mp</code> and I am not sure what is the bottleneck.\nINPUT is an xarray dataset</p>\n\n<pre><code>&lt;xarray.Dataset&gt;\nDimensions:           (bnds: 2, time: 15, xh: 720, yh: 576)\nCoordinates:\n  * time              (time) object 1990-07-02 12:00:00 ... 1994-07-02 12:00:00\n  * xh                (xh) float64 -299.8 -299.2 -298.8 ... 58.75 59.25 59.75\n  * yh                (yh) float64 -77.91 -77.72 -77.54 ... 89.47 89.68 89.89\n    x                 (yh, xh) float64 -299.8 -299.2 -298.8 ... 59.99 59.99 60.0\n    y                 (yh, xh) float64 -77.91 -77.91 -77.91 ... 65.18 64.97\nDimensions without coordinates: bnds\nData variables:\n    time_bnds         (time, bnds) object 1990-01-01 00:00:00 ... 1995-01-01 00:00:00\n    dep_n             (time, yh, xh) float32 nan nan nan nan ... nan nan nan nan\n    tot_fsn           (time, yh, xh) float32 nan nan nan nan ... nan nan nan nan\n    epc100            (time, yh, xh) float32 nan nan nan nan ... nan nan nan nan\n    nh4_stf           (time, yh, xh) float32 nan nan nan nan ... nan nan nan nan\n    wc_vert_int_nfix  (time, yh, xh) float32 nan nan nan nan ... nan nan nan nan\n    no3os             (time, yh, xh) float32 nan nan nan nan ... nan nan nan nan\n\n</code></pre>\n\n<p><strong>Additional information</strong></p>\n\n<p>I think the issue may be that the array is passed to each subprocess.\nIf I redefine the functions as follows:</p>\n\n<pre><code>def process_boot(nsample):\n    ind_boot        =  np.random.choice(len(INPUT['time']),nsample)\n    return(INPUT.isel(time=ind_boot).mean(dim='time'))\n\n\n#geo bootstrap                                                                                                                                                                                \ndef geo_bootstrap(idata_raw,bfun,nsample=0,nboot=1000,scoord='time',\\\n                  np=1):\n    '''bootstrap estimates of time,lat,lon dataset                                                                                                                                                  \n    '''\n\n\n    idata = idata_raw.rename({scoord:'boot_ax'})\n\n\n    if nsample==0:\n        nsample=len(idata['boot_ax'])\n    if np==1:\n        C  = xr.concat([process_boot(nsample) for x in range(nboot)],dim='boot')\n    else:\n        pool    = mp.Pool(processes=np)\n        results = [pool.apply_async(process_boot,args=(nsample,))   for x in range(nboot)]\n\n        C = xr.concat([p.get() for p in results],dim='time')\n        pool.close()\n\n    return(C)\n\n</code></pre>\n\n<p>I get a nice speed up</p>\n\n<pre><code>%%time\nO = geo_bootstrap(historical_diff_ts,boot_mean,nboot=20,np=5)\nCPU times: user 350 ms, sys: 585 ms, total: 935 ms\nWall time: 2.41 s\n</code></pre>\n\n<p>But then the code is not as modular as I would like. </p>\n"}, {"tags": ["python", "loops", "dictionary", "iterator", "iteration"], "comments": [{"owner": {"reputation": 1101, "user_id": 3958521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GorZx.jpg?s=128&g=1", "display_name": "bigwillydos", "link": "https://stackoverflow.com/users/3958521/bigwillydos"}, "edited": false, "score": 0, "creation_date": 1557952909, "post_id": 56157219, "comment_id": 98943672, "body": "I wouldn&#39;t say that you have no idea. At the very least, you can deduce from the example that you can keep nesting for loops."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 2, "creation_date": 1557952955, "post_id": 56157219, "comment_id": 98943687, "body": "You need the <code>itertools.product()</code> of the lists.  See the docs for details."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 11172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/2953544728052618/picture?type=large", "display_name": "Tessa Ickx", "link": "https://stackoverflow.com/users/11172363/tessa-ickx"}, "edited": false, "score": 0, "creation_date": 1557956168, "post_id": 56157809, "comment_id": 98944832, "body": "Thank you very much! This solved my problem.  ``` from itertools import product  combinations = [p for p in product(*d.values())] for c in combinations:     if something = somethingelse:         #print(something) ```"}], "tags": [], "owner": {"reputation": 162, "user_id": 11505680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7537b6a0dfdbbbba92ab116c29aadf8?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/11505680/ilya"}, "is_accepted": true, "score": 2, "last_activity_date": 1557955362, "creation_date": 1557955362, "answer_id": 56157809, "question_id": 56157219, "link": "https://stackoverflow.com/questions/56157219/how-to-iterate-over-a-dictionary-in-a-specific-way/56157809#56157809", "title": "How to iterate over a dictionary in a specific way?", "body": "<p>Try this (compliments to @Prune):</p>\n\n<pre><code>from itertools import product\n[p for p in product(*d.values())]\n</code></pre>\n\n<p><code>product()</code> gives you an iterable. If you don't want the iterable blown up into a list right away, skip the list comprehension.</p>\n"}], "owner": {"reputation": 23, "user_id": 11172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/2953544728052618/picture?type=large", "display_name": "Tessa Ickx", "link": "https://stackoverflow.com/users/11172363/tessa-ickx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 56157809, "answer_count": 1, "score": 1, "last_activity_date": 1557955362, "creation_date": 1557952403, "last_edit_date": 1557954464, "question_id": 56157219, "link": "https://stackoverflow.com/questions/56157219/how-to-iterate-over-a-dictionary-in-a-specific-way", "title": "How to iterate over a dictionary in a specific way?", "body": "<p>I'm trying to iterate over a dictionary in a specific way.\nLet's say my dictionary is like this:</p>\n\n<pre><code>d={'MERRY': [12996, 13225, 18225, 20449, 24336, 27556, 27889, 34225, 46225,\n             52441, 61009, 62001, 63001, 64009, 70225, 73441, 81225],\n   'XMAS': [1024, 1089, 1296, 1369, 1764, 1849, 1936, 2304, 2401, 2601, 2704,\n            2809, 2916, 3025, 3249, 3481,3721, 4096, 4356, 4761, 5041, 5184,\n            5329, 5476, 6084, 6241, 6724, 7056, 7396, 7569, 7921, 8649, 9025,\n            9216, 9604, 9801],\n   'TO': [16, 25, 36, 49, 64, 81],\n   'ALL': [100, 144, 400, 900]}\n</code></pre>\n\n<p>First, I want to check the combinations:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>12996 1024 16 100,\n12996 1024 16 144,\n12996 1024 16 400,\n12996 1024 16 900,\n</code></pre>\n\n<p>After that: <code>12966 1024 25 100</code>, etc.</p>\n\n<p>I need to check <strong>all</strong> the possible combinations. Another solution is also fine by me.</p>\n\n<p>I've tried doing it manually with a lot of for-loops, and that works.</p>\n\n<p>The code worked for this example, but I need to expand it to a dictionary with up to 10 keys. I have no idea how to fix this.</p>\n\n<p>This code shows an example for a dictionary with 4 keys:</p>\n\n<pre><code>for item in d['MERRY']:\n    for item2 in d['XMAS']:\n        for item3 in d['TO']:\n            for item4 in d['ALL']:\n                #make something out of items1,2,3 and 4\n                if something == somethingelse:\n                    #print(something)\n</code></pre>\n"}, {"tags": ["python", "arcgis"], "answers": [{"tags": [], "owner": {"reputation": 1669, "user_id": 9042078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6avg1.jpg?s=128&g=1", "display_name": "Vasu Deo.S", "link": "https://stackoverflow.com/users/9042078/vasu-deo-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1557957900, "creation_date": 1557957900, "answer_id": 56158246, "question_id": 56157195, "link": "https://stackoverflow.com/questions/56157195/how-do-i-use-a-wildcard-with-arcpy-da-walk/56158246#56158246", "title": "How do I use a wildcard with arcpy.da.Walk", "body": "<p>If you are asking about SQL Like Wildcard matching, then try using <code>fnmatch</code> module. It is a inbuilt module in Python which allows single character matching (via <code>?</code>) or global matching (via <code>*</code>).</p>\n\n<p>Even though the main purpose of the module is for filename matching, but you can still use it for string pattern matching.</p>\n\n<p><strong>Sample Code:</strong></p>\n\n<pre><code>import fnmatch\n\na = \"hello\"\nprint(fnmatch.fnmatch(a, \"h*\"))\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>True\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11506107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c17046e65245722457b0779377f8f65?s=128&d=identicon&r=PG&f=1", "display_name": "RKS", "link": "https://stackoverflow.com/users/11506107/rks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 214, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1557959156, "creation_date": 1557952263, "last_edit_date": 1557959156, "question_id": 56157195, "link": "https://stackoverflow.com/questions/56157195/how-do-i-use-a-wildcard-with-arcpy-da-walk", "title": "How do I use a wildcard with arcpy.da.Walk", "body": "<p>I am trying to use a wildcard to pull out only certain types of relationship classes but don't know the syntax/usage of wildcards.</p>\n\n<p>I have a piece of code that lists the relationship classes perfectly as I need it to.</p>\n\n<pre><code>ws = 'Database Connections\\\\gis@gisprod.sde'\narcpy.env.workspace = ws\n\nfeaturedatasets = arcpy.ListDatasets(\"GIS.Wa*\", \"Feature\")\nfcs = []\n\nprint (featuredatasets)\n\n# go into each feature dataset and get a list of relationship classes\nfor fd in featuredatasets:\n    oldws = arcpy.env.workspace\n    arcpy.env.workspace = ws + \"\\\\\" + fd\n\n    relationship_classes = next(arcpy.da.Walk(arcpy.env.workspace, datatype='RelationshipClass'))[2]\n</code></pre>\n\n<p>a listing of all relationship classes within the workspace that contain \"Has\" in their name</p>\n"}, {"tags": ["java", "python", "rest", "analysis"], "comments": [{"owner": {"reputation": 688, "user_id": 3633525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b533ea49b2c4aa86ca86faba37af9d01?s=128&d=identicon&r=PG&f=1", "display_name": "ChocolateAndCheese", "link": "https://stackoverflow.com/users/3633525/chocolateandcheese"}, "edited": false, "score": 1, "creation_date": 1557953259, "post_id": 56157192, "comment_id": 98943804, "body": "If the python script is to be executed on the same box as the java service, I would say that designing an HTTP api just for this one call is a bit overkill.  From java you can call a shell command that can run the python script, that might be the easiest thing to do here."}, {"owner": {"reputation": 195, "user_id": 7068748, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/908dd34e8e399f109768b09eed8d4770?s=128&d=identicon&r=PG&f=1", "display_name": "Luca Trembon", "link": "https://stackoverflow.com/users/7068748/luca-trembon"}, "reply_to_user": {"reputation": 688, "user_id": 3633525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b533ea49b2c4aa86ca86faba37af9d01?s=128&d=identicon&r=PG&f=1", "display_name": "ChocolateAndCheese", "link": "https://stackoverflow.com/users/3633525/chocolateandcheese"}, "edited": false, "score": 0, "creation_date": 1557954061, "post_id": 56157192, "comment_id": 98944103, "body": "Alright thanks alot"}], "owner": {"reputation": 195, "user_id": 7068748, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/908dd34e8e399f109768b09eed8d4770?s=128&d=identicon&r=PG&f=1", "display_name": "Luca Trembon", "link": "https://stackoverflow.com/users/7068748/luca-trembon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1557952244, "creation_date": 1557952244, "question_id": 56157192, "link": "https://stackoverflow.com/questions/56157192/integrating-python-analysis-into-java-rest-api", "title": "Integrating Python analysis into Java Rest API", "body": "<p>My Java backend needs an analysis during an insert statement into a database, which I have to do with Python. Now the question arises how to connect a Java backend with a Python script. Should the Python script be created as a Restful API and then executed during the insert statement via an HTTP request or is this Bad Practice? Or are there alternative approaches I could look at?</p>\n"}, {"tags": ["python", "pygame"], "comments": [{"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 1, "creation_date": 1557952379, "post_id": 56157162, "comment_id": 98943454, "body": "Where exactly should  the rectangle be drawn in this code? What is <code>WallList[walls]</code> expected to do?"}, {"owner": {"reputation": 33, "user_id": 9582056, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gybC7emrKyc/AAAAAAAAAAI/AAAAAAAAApo/elU9co7u5Fs/photo.jpg?sz=128", "display_name": "minus", "link": "https://stackoverflow.com/users/9582056/minus"}, "reply_to_user": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1557952947, "post_id": 56157162, "comment_id": 98943682, "body": "the rectangle position is ok, in fact that&#39;s not the problem. <code>WallList[walls]</code> calls the class that draws the rectangle at given position. I appent the classes to this list in the first piece of code."}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 1, "creation_date": 1557953001, "post_id": 56157162, "comment_id": 98943706, "body": "I don&#39;t mean a position, I mean which line in the code. <code>WallList[walls]</code> doesn&#39;t call anything. Show the class, especially the method which is assumed to draw the rectangle."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1557953302, "post_id": 56157162, "comment_id": 98943819, "body": "In other words, you need code. probably a call to something, that <i>draws</i> <code>WallList[walls]</code> because all what have does is access an element of the list, but doesn&#39;t do anything with it."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1557953450, "post_id": 56157162, "comment_id": 98943872, "body": "Don&#39;t put a that much code in a comment. Put it in your question."}, {"owner": {"reputation": 33, "user_id": 9582056, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gybC7emrKyc/AAAAAAAAAAI/AAAAAAAAApo/elU9co7u5Fs/photo.jpg?sz=128", "display_name": "minus", "link": "https://stackoverflow.com/users/9582056/minus"}, "edited": false, "score": 0, "creation_date": 1557953507, "post_id": 56157162, "comment_id": 98943887, "body": "I&#39;m saying that with no &quot;draw-refresh&quot; code, it works. But with a simple <code>root.fill()</code> function, it doesn&#39;t work. Sorry."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 9582056, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gybC7emrKyc/AAAAAAAAAAI/AAAAAAAAApo/elU9co7u5Fs/photo.jpg?sz=128", "display_name": "minus", "link": "https://stackoverflow.com/users/9582056/minus"}, "edited": false, "score": 0, "creation_date": 1557953950, "post_id": 56157468, "comment_id": 98944066, "body": "Thanks! new lesson learnt. You opened me a lot of doors. It works. Once I was going to do that, but I took Python too &quot;logical&quot; so I made a few errors."}], "tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 1, "last_activity_date": 1557953568, "creation_date": 1557953568, "answer_id": 56157468, "question_id": 56157162, "link": "https://stackoverflow.com/questions/56157162/pygame-draw-rect-function-called-in-a-class-doesnt-show-the-rectangle/56157468#56157468", "title": "pygame.draw.rect() function called in a class doesn&#39;t show the rectangle", "body": "<p>You've to add a method to the class, which draws the rectangle. </p>\n\n<p>e.g.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class Wall():\n    def __init__(self, x, y, thotType):\n        self.x=x\n        self.y=y\n        self.type=thotType\n        TypeList.append(self.type)\n\n    def draw(self):\n        if self.type== \"Wall\":\n            pygame.draw.rect(root,(0,255,255),(self.x+camX,self.y+camY,mapmultiplier,mapmultiplier),1)\n        if self.type== \"Blank\":\n            pygame.draw.rect(root,(32,32,32),(self.x+camX,self.y+camY,mapmultiplier,mapmultiplier))\n</code></pre>\n\n<p>then you can call the <code>draw</code> method:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>for walls in range(len(WallList)):\n    WallList[walls].draw()\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 9582056, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gybC7emrKyc/AAAAAAAAAAI/AAAAAAAAApo/elU9co7u5Fs/photo.jpg?sz=128", "display_name": "minus", "link": "https://stackoverflow.com/users/9582056/minus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 56157468, "answer_count": 1, "score": 2, "last_activity_date": 1557953607, "creation_date": 1557952117, "last_edit_date": 1557953607, "question_id": 56157162, "link": "https://stackoverflow.com/questions/56157162/pygame-draw-rect-function-called-in-a-class-doesnt-show-the-rectangle", "title": "pygame.draw.rect() function called in a class doesn&#39;t show the rectangle", "body": "<p>The code down below doesn't show a rectangle called in a class that is stored in a list even if the order of the loop \"draw-refresh\" is right.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>while True:\n\n     root.fill((0,200,255))\n\n     for walls in range(len(WallList)):\n          WallList[walls]\n          print(walls, WallList[walls])\n\n     for event in pygame.event.get():\n          if event.type == pygame.QUIT:\n                pygame.quit()\n                quit()\n\n     pygame.display.update()\n</code></pre>\n\n<p>I expect the rectangles to be drawn before the root is filled, but the root is always blue (The color that I gave).</p>\n\n<p>Edit: There's the class:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class Wall():\n     def __init__(self, x, y, thotType):\n          global TypeList,camX,camY\n          self.x=x\n          self.y=y\n          self.type=thotType\n          if self.type== \"Wall\": pygame.draw.rect(root,(0,255,255),(x+camX,y+camY,mapmultiplier,mapmultiplier),1)\n          if self.type== \"Blank\": pygame.draw.rect(root,(32,32,32),(x+camX,y+camY,mapmultiplier,mapmultiplier))\n          TypeList.append(self.type)\n\n</code></pre>\n"}, {"tags": ["python", "pandas", "tensorflow", "tensorflow-datasets", "tensorflow2.0"], "answers": [{"tags": [], "owner": {"reputation": 793, "user_id": 2717128, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/01baf7540a49bf8bf84f2f23bbb63d4d?s=128&d=identicon&r=PG", "display_name": "azmath", "link": "https://stackoverflow.com/users/2717128/azmath"}, "is_accepted": false, "score": 0, "last_activity_date": 1575825446, "creation_date": 1575825446, "answer_id": 59237874, "question_id": 56157125, "link": "https://stackoverflow.com/questions/56157125/advise-for-debugging-tf-data-dataset-operations-in-tensorflow-2-0/59237874#59237874", "title": "advise for debugging `tf.data.Dataset` operations in tensorflow 2.0", "body": "<p>I was in a similar situation. I eventually ended up using <strong>zip</strong></p>\n\n<pre><code>train_dataset = train_dataset.window(10, shift=5)\nfor step_dataset in train_dataset:\n    for (images, labels, paths) in zip(*step_dataset):\n        train_step(images, labels)\n</code></pre>\n"}], "owner": {"reputation": 794, "user_id": 8456120, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_KbMyeVRdUc/AAAAAAAAAAI/AAAAAAAACDo/xDT7TClS5Uw/photo.jpg?sz=128", "display_name": "James McKeown", "link": "https://stackoverflow.com/users/8456120/james-mckeown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 995, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1575825446, "creation_date": 1557951960, "last_edit_date": 1557952531, "question_id": 56157125, "link": "https://stackoverflow.com/questions/56157125/advise-for-debugging-tf-data-dataset-operations-in-tensorflow-2-0", "title": "advise for debugging `tf.data.Dataset` operations in tensorflow 2.0", "body": "<p><strong>What is the equivalent of Panda's <code>df.head()</code> for tf datasets?</strong></p>\n\n<p>Following the documentation <a href=\"https://www.tensorflow.org/versions/r2.0/api_docs/python/tf/data/Dataset\" rel=\"noreferrer\">here</a> I've constructed the following toy examples:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>dset = tf.data.Dataset.from_tensor_slices((tf.constant([1.,2.,3.]), tf.constant([4.,4.,4.]), tf.constant([5.,6.,7.])))\nprint(dset)\n</code></pre>\n\n<p>outputs </p>\n\n<pre><code>&lt;TensorSliceDataset shapes: ((), (), ()), types: (tf.float32, tf.float32, tf.float32)&gt;\n</code></pre>\n\n<p><strong>I would prefer to get back something resembling a tensor</strong>, so to get some values I'll make an iterator.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>dset_iter = dset.__iter__()\nprint(dset_iter.next())\n</code></pre>\n\n<p>outputs</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>(&lt;tf.Tensor: id=122, shape=(), dtype=float32, numpy=1.0&gt;,\n &lt;tf.Tensor: id=123, shape=(), dtype=float32, numpy=4.0&gt;,\n &lt;tf.Tensor: id=124, shape=(), dtype=float32, numpy=5.0&gt;)\n</code></pre>\n\n<p>So far so good.  Let's try some windowing...</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>windowed = dset.window(2)\nprint(windowed)\n</code></pre>\n\n<p>outputs</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&lt;WindowDataset shapes: (&lt;tensorflow.python.data.ops.dataset_ops.DatasetStructure object at 0x1349b25c0&gt;, &lt;tensorflow.python.data.ops.dataset_ops.DatasetStructure object at 0x1349b27b8&gt;, &lt;tensorflow.python.data.ops.dataset_ops.DatasetStructure object at 0x1349b29b0&gt;), types: (&lt;tensorflow.python.data.ops.dataset_ops.DatasetStructure object at 0x1349b25c0&gt;, &lt;tensorflow.python.data.ops.dataset_ops.DatasetStructure object at 0x1349b27b8&gt;, &lt;tensorflow.python.data.ops.dataset_ops.DatasetStructure object at 0x1349b29b0&gt;)&gt;\n</code></pre>\n\n<p>Ok, use the iterator trick again:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>windowed_iter = windowed.__iter__()\nwindowed_iter.next()\n</code></pre>\n\n<p>outputs</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>(&lt;_VariantDataset shapes: (), types: tf.float32&gt;,\n &lt;_VariantDataset shapes: (), types: tf.float32&gt;,\n &lt;_VariantDataset shapes: (), types: tf.float32&gt;)\n</code></pre>\n\n<p>What?  A <code>WindowDataset</code>'s iterator gives back a <em>tuple</em> of other dataset objects?<br>\nI would expect the first item in this WindowDataset to be the tensor with values [[1.,4.,5.],[2.,4.,6.]].  Maybe this is still true, but it isn't readily apparent to me from this 3-tuple of datasets.\nOk.  Let's get <em>their</em> iterators...</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>vd = windowed_iter.get_next()\nvd0, vd1, vd2 = vd[0], vd[1], vd[2]\nvd0i, vd1i, vd2i = vd0.__iter__(), vd1.__iter__(), vd2.__iter__()\nprint(vd0i.next(), vd1i.next(), vd2i.next())\n</code></pre>\n\n<p>outputs</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>(&lt;tf.Tensor: id=357, shape=(), dtype=float32, numpy=1.0&gt;,\n &lt;tf.Tensor: id=358, shape=(), dtype=float32, numpy=4.0&gt;,\n &lt;tf.Tensor: id=359, shape=(), dtype=float32, numpy=5.0&gt;)\n</code></pre>\n\n<p>As you can see, this workflow is quickly becoming a mess.  I like how Tf2.0 is attempting to make the framework more interactive and pythonic.  Are there good examples of the datasets api conforming to this vision too?</p>\n"}, {"tags": ["python", "python-3.x", "string", "selenium", "selenium-webdriver"], "comments": [{"owner": {"reputation": 459, "user_id": 11291889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o1EbF.jpg?s=128&g=1", "display_name": "Valga", "link": "https://stackoverflow.com/users/11291889/valga"}, "edited": false, "score": 3, "creation_date": 1557951976, "post_id": 56157104, "comment_id": 98943288, "body": "try escaping the escape character <code>&quot;string_one\\\\nstring_two&quot;</code>"}, {"owner": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 1, "creation_date": 1558114179, "post_id": 56157104, "comment_id": 99006930, "body": "Please read why <a href=\"https://meta.stackoverflow.com/questions/303812/discourage-screenshots-of-code-and-or-errors\">a screenshot of code is a bad idea</a>. Paste the code and properly format it instead."}], "answers": [{"comments": [{"owner": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 2, "creation_date": 1557954654, "post_id": 56157144, "comment_id": 98944312, "body": "It&#39;s called escaping... see <a href=\"https://docs.python.org/2.0/ref/strings.html\" rel=\"nofollow noreferrer\">the docs</a>"}], "tags": [], "owner": {"reputation": 235, "user_id": 8585525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4e4eb017cd17ddac14415b294d72f53?s=128&d=identicon&r=PG&f=1", "display_name": "jdavid05", "link": "https://stackoverflow.com/users/8585525/jdavid05"}, "is_accepted": true, "score": 1, "last_activity_date": 1557952022, "creation_date": 1557952022, "answer_id": 56157144, "question_id": 56157104, "link": "https://stackoverflow.com/questions/56157104/string-contains-n-and-it-leads-to-an-error/56157144#56157144", "title": "String contains \\n and it leads to an ERROR", "body": "<p>Use '\\\\n' to start a new line in a string. The first \\ tells Python to read the second \\ as part of the string.</p>\n\n<pre><code>string = \"\\\\n\"\nprint string\n\nreturns \"\\n\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 727, "user_id": 3894818, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6pCQc.jpg?s=128&g=1", "display_name": "Quanti Monati", "link": "https://stackoverflow.com/users/3894818/quanti-monati"}, "edited": false, "score": 0, "creation_date": 1558104650, "post_id": 56188591, "comment_id": 99002774, "body": "And how to use string as raw when string object is shown as variable in code ?"}, {"owner": {"reputation": 235, "user_id": 8585525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4e4eb017cd17ddac14415b294d72f53?s=128&d=identicon&r=PG&f=1", "display_name": "jdavid05", "link": "https://stackoverflow.com/users/8585525/jdavid05"}, "edited": false, "score": 0, "creation_date": 1558176752, "post_id": 56188591, "comment_id": 99019803, "body": "This is good practice for copying file paths. I use it for ArcPy scripting"}], "tags": [], "owner": {"reputation": 53073, "user_id": 16148, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/XTzm1.jpg?s=128&g=1", "display_name": "Corey Goldberg", "link": "https://stackoverflow.com/users/16148/corey-goldberg"}, "is_accepted": false, "score": 1, "last_activity_date": 1558103644, "creation_date": 1558103644, "answer_id": 56188591, "question_id": 56157104, "link": "https://stackoverflow.com/questions/56157104/string-contains-n-and-it-leads-to-an-error/56188591#56188591", "title": "String contains \\n and it leads to an ERROR", "body": "<p>use raw strings so the backslash doesn't get used as an escape char.</p>\n\n<p>so change:</p>\n\n<pre><code>two_str = \"string_one\\nstring_two\"\n</code></pre>\n\n<p>to</p>\n\n<pre><code>two_str = r\"string_one\\nstring_two\"\n</code></pre>\n"}], "owner": {"reputation": 727, "user_id": 3894818, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6pCQc.jpg?s=128&g=1", "display_name": "Quanti Monati", "link": "https://stackoverflow.com/users/3894818/quanti-monati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 56157144, "answer_count": 2, "score": 0, "last_activity_date": 1558103644, "creation_date": 1557951855, "last_edit_date": 1557951983, "question_id": 56157104, "link": "https://stackoverflow.com/questions/56157104/string-contains-n-and-it-leads-to-an-error", "title": "String contains \\n and it leads to an ERROR", "body": "<p>Actual code:</p>\n\n<pre><code>from selenium import webdriver\n\ndriver = webdriver.Chrome()\ndriver.get(\"https://htmlcompressor.com/compressor/\")\n\ntwo_str = \"string_one\\nstring_two\"\ndriver.execute_script(\"document.getElementById('code').value = '%s';\" % two_str)\n</code></pre>\n\n<h1>Here is the error itself:</h1>\n\n<p><a href=\"https://i.stack.imgur.com/EfcM9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EfcM9.png\" alt=\"enter image description here\"></a>\nAs you can see, variable two_str contains \"\\n\" (new line separator). And its presence leads to an error. But if its removed - everything works perfectly.</p>\n\n<h1>How to solve this problem?</h1>\n\n<p>P.S.\nI need to have a string with \"\\n\" new line separator.</p>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 6103, "user_id": 8111755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba44734a0f158430bbb9c7d84d92cbc3?s=128&d=identicon&r=PG", "display_name": "Christian Sloper", "link": "https://stackoverflow.com/users/8111755/christian-sloper"}, "edited": false, "score": 1, "creation_date": 1557951846, "post_id": 56157091, "comment_id": 98943237, "body": "zip takes any number of elements?"}, {"owner": {"reputation": 6103, "user_id": 8111755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba44734a0f158430bbb9c7d84d92cbc3?s=128&d=identicon&r=PG", "display_name": "Christian Sloper", "link": "https://stackoverflow.com/users/8111755/christian-sloper"}, "edited": false, "score": 0, "creation_date": 1557951939, "post_id": 56157091, "comment_id": 98943274, "body": "No, zip can take more if needed."}, {"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 0, "creation_date": 1557952204, "post_id": 56157091, "comment_id": 98943380, "body": "Zip does not work if you got different sized elements."}, {"owner": {"reputation": 74809, "user_id": 9698684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hj2XY.jpg?s=128&g=1", "display_name": "yatu", "link": "https://stackoverflow.com/users/9698684/yatu"}, "edited": false, "score": 0, "creation_date": 1557953366, "post_id": 56157091, "comment_id": 98943841, "body": "@lohi just updated with an approach without imports"}], "answers": [{"comments": [{"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 1, "creation_date": 1557952450, "post_id": 56157191, "comment_id": 98943489, "body": "I&#39;d probably use <code>itertools.chain.from_iterable(b)</code> over <code>sum(b, ())</code>, especially if we&#39;re already importing <code>itertools</code>"}, {"owner": {"reputation": 1780, "user_id": 9161389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wgvbi.png?s=128&g=1", "display_name": "Lante Dellarovere", "link": "https://stackoverflow.com/users/9161389/lante-dellarovere"}, "reply_to_user": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1557953513, "post_id": 56157191, "comment_id": 98943892, "body": "it&#39;s an option, why not"}], "tags": [], "owner": {"reputation": 1780, "user_id": 9161389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wgvbi.png?s=128&g=1", "display_name": "Lante Dellarovere", "link": "https://stackoverflow.com/users/9161389/lante-dellarovere"}, "is_accepted": false, "score": 2, "last_activity_date": 1557953711, "last_edit_date": 1557953711, "creation_date": 1557952238, "answer_id": 56157191, "question_id": 56157091, "link": "https://stackoverflow.com/questions/56157091/iterating-items-over-items-in-a-list/56157191#56157191", "title": "Iterating items over items in a list", "body": "<p>Use <code>itertools.zip_longest</code>:</p>\n\n<pre><code>from itertools import zip_longest\n\na=['aaaaa', 'bbbb', 'ccc']\nb = zip_longest(*a, fillvalue=\"\")\n\n&gt;&gt;&gt; print(\"\".join(sum(b, ())))\nabcabcabcaba\n</code></pre>\n\n<p><strong>Update: no packages</strong></p>\n\n<p>Can loop in the range of the longest string:</p>\n\n<pre><code>m = max([len(x) for x in a])\nb = [x[i:i+1]  for i in range(m) for x in a]\n&gt;&gt;&gt; print(\"\".join(b))\nabcabcabcaba\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 132, "user_id": 5984266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21723d87f52cb0ac688b5c88b43f2507?s=128&d=identicon&r=PG&f=1", "display_name": "Himanshu Mishra", "link": "https://stackoverflow.com/users/5984266/himanshu-mishra"}, "is_accepted": false, "score": 1, "last_activity_date": 1557952283, "creation_date": 1557952283, "answer_id": 56157199, "question_id": 56157091, "link": "https://stackoverflow.com/questions/56157091/iterating-items-over-items-in-a-list/56157199#56157199", "title": "Iterating items over items in a list", "body": "<p>You can use</p>\n\n<pre><code>''.join(char for tup in itertools.zip_longest(*a) for char in tup if char)\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 11442544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c2ebbac1d294415a7ee5db1ff1f0ab7?s=128&d=identicon&r=PG", "display_name": "Loki", "link": "https://stackoverflow.com/users/11442544/loki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "closed_date": 1558005053, "answer_count": 2, "score": -5, "last_activity_date": 1557953964, "creation_date": 1557951803, "last_edit_date": 1557952593, "question_id": 56157091, "link": "https://stackoverflow.com/questions/56157091/iterating-items-over-items-in-a-list", "closed_reason": "Needs details or clarity", "title": "Iterating items over items in a list", "body": "<pre><code>a=['aaaaa', 'bbbb', 'ccc']\n</code></pre>\n\n<p>I want my final output to look like this:</p>\n\n<pre><code>abcabcabcaba\n</code></pre>\n\n<p>NOTE: I would prefer not to import any additional packages.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 1219, "user_id": 5330805, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c56d9df54a81610d9ca8ddb0df86fe16?s=128&d=identicon&r=PG&f=1", "display_name": "olidem", "link": "https://stackoverflow.com/users/5330805/olidem"}, "edited": false, "score": 0, "creation_date": 1557951998, "post_id": 56157086, "comment_id": 98943295, "body": "you could look into sympy"}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 1370857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5be51fdff148c1b9caf57b629b91565c?s=128&d=identicon&r=PG", "display_name": "jbryan", "link": "https://stackoverflow.com/users/1370857/jbryan"}, "is_accepted": true, "score": 1, "last_activity_date": 1557953851, "last_edit_date": 1557953851, "creation_date": 1557953005, "answer_id": 56157346, "question_id": 56157086, "link": "https://stackoverflow.com/questions/56157086/python-package-for-multiplying-polynomials-with-large-coefficients/56157346#56157346", "title": "Python package for multiplying polynomials with large coefficients", "body": "<p>Sympy would be a good bet.  Doing this in sympy would look something like:</p>\n\n<pre><code>import sympy\nx = sympy.var('x')\np = (x+2)**250\np = sympy.expand(p)\nprint(p)\n</code></pre>\n\n<p>I have not included the output as it is quite long, but spot checking it looks correct.  Sympy uses arbitrary precision libraries, so all coefficients are expanded out.  You can get individual coefficients by using the <code>coeff</code> method.  E.g.:</p>\n\n<pre><code>&gt;&gt; p.coeff(x**249)\n250\n</code></pre>\n"}], "owner": {"reputation": 409, "user_id": 2751532, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c0f4ee9b4f35739c9fb337af060f7639?s=128&d=identicon&r=PG&f=1", "display_name": "satya", "link": "https://stackoverflow.com/users/2751532/satya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 56157346, "answer_count": 1, "score": 0, "last_activity_date": 1557953851, "creation_date": 1557951774, "question_id": 56157086, "link": "https://stackoverflow.com/questions/56157086/python-package-for-multiplying-polynomials-with-large-coefficients", "title": "Python package for multiplying polynomials with large coefficients", "body": "<p>I want to multiply multiply polynomials with large coefficients in python. I tried this in numpy. </p>\n\n<pre><code>import numpy as np\np = np.poly1d([1])\nfor i in range(250):\n    p = np.polymul(p, [1, 2])\nprint (\"P : \", p)\n</code></pre>\n\n<p>But suprisingly, numpy is giving wrong results! Ideally the program should expand the polynomial (x+2)^250 and output it. But it outputs the following.</p>\n\n<pre><code>P :     250       249             248             247             246\n1 x   + 500 x   + 1.245e+05 x   + 2.058e+07 x   + 2.542e+09 x  \n              245             244             243             242\n + 2.501e+11 x   + 2.043e+13 x   + 1.424e+15 x   + 8.652e+16 x  \n              241             240            239             238\n + 4.653e+18 x   + 2.901e+18 x   + 9.18e+18 x   + 9.015e+18 x  \n              237             236             235             234\n - 7.634e+18 x   - 1.988e+17 x   - 8.716e+18 x   + 6.834e+18 x  \n              233             232            231            230\n - 3.933e+18 x   + 2.712e+18 x   + 6.03e+18 x   - 4.58e+18 x  \n              229             228             227             226\n + 7.714e+18 x   - 5.435e+18 x   + 3.734e+18 x   + 4.537e+18 x  \n              225             224             223            222\n - 6.507e+18 x   - 1.937e+18 x   + 6.602e+17 x   + 2.61e+18 x  \n              221             220             219             218\n - 3.935e+18 x   + 8.436e+18 x   + 6.076e+18 x   - 5.604e+18 x  \n              217             216             215             214\n + 2.542e+18 x   + 3.146e+18 x   + 3.515e+18 x   - 3.458e+16 x  \n              213             212             211             210\n - 5.884e+18 x   + 5.881e+18 x   - 3.702e+18 x   + 6.049e+17 x  \n              209            208             207             206\n - 9.101e+18 x   - 5.37e+18 x   - 8.623e+18 x   + 5.234e+18 x  \n              205             204             203             202\n + 4.466e+18 x   + 8.528e+18 x   - 5.645e+18 x   + 6.822e+18 x  \n              201             200             199             198\n + 2.037e+18 x   - 2.809e+18 x   + 5.819e+18 x   + 2.675e+18 x  \n              197             196             195             194\n + 7.458e+18 x   + 5.224e+18 x   + 2.018e+18 x   - 9.007e+18 x  \n              193             192\n - 1.441e+18 x   - 2.594e+18 x  \n</code></pre>\n\n<p>There seems to be some precision issues with the function. Is there any library in python that is suitable for multiplying polynomials with large coefficients?</p>\n"}, {"tags": ["python", "django", "django-rest-framework", "django-serializer"], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 5891148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf56deb08f0eea9c134ed1cb44343c7b?s=128&d=identicon&r=PG&f=1", "display_name": "dhiraj", "link": "https://stackoverflow.com/users/5891148/dhiraj"}, "edited": false, "score": 0, "creation_date": 1558022917, "post_id": 56160660, "comment_id": 98971773, "body": "That&#39;s a cool way, but  setting it <code>self.fields[&#39;field1&#39;].source = &quot;get_field1&quot;</code> way doesn&#39;t work? I do I set the source field dynamically?"}, {"owner": {"reputation": 54482, "user_id": 8283848, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/YiHgN.jpg?s=128&g=1", "display_name": "JPG", "link": "https://stackoverflow.com/users/8283848/jpg"}, "reply_to_user": {"reputation": 115, "user_id": 5891148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf56deb08f0eea9c134ed1cb44343c7b?s=128&d=identicon&r=PG&f=1", "display_name": "dhiraj", "link": "https://stackoverflow.com/users/5891148/dhiraj"}, "edited": false, "score": 0, "creation_date": 1558024143, "post_id": 56160660, "comment_id": 98972361, "body": "Yeah... You have to set it dynamically"}, {"owner": {"reputation": 115, "user_id": 5891148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf56deb08f0eea9c134ed1cb44343c7b?s=128&d=identicon&r=PG&f=1", "display_name": "dhiraj", "link": "https://stackoverflow.com/users/5891148/dhiraj"}, "edited": false, "score": 0, "creation_date": 1558024385, "post_id": 56160660, "comment_id": 98972479, "body": "what&#39;s the syntax to set it dynamically? the syntax you mentioned doesn&#39;t work."}, {"owner": {"reputation": 115, "user_id": 5891148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf56deb08f0eea9c134ed1cb44343c7b?s=128&d=identicon&r=PG&f=1", "display_name": "dhiraj", "link": "https://stackoverflow.com/users/5891148/dhiraj"}, "edited": false, "score": 0, "creation_date": 1558025547, "post_id": 56160660, "comment_id": 98973018, "body": "Didn&#39;t get any error, but verified, the source is still not set to what I wanted."}], "tags": [], "owner": {"reputation": 54482, "user_id": 8283848, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/YiHgN.jpg?s=128&g=1", "display_name": "JPG", "link": "https://stackoverflow.com/users/8283848/jpg"}, "is_accepted": false, "score": 1, "last_activity_date": 1558025654, "last_edit_date": 1558025654, "creation_date": 1557979383, "answer_id": 56160660, "question_id": 56157019, "link": "https://stackoverflow.com/questions/56157019/how-to-make-a-field-in-serializer-both-readable-and-writeable/56160660#56160660", "title": "How to make a field in Serializer both readable and writeable", "body": "<p>This can be done by overriding the <strong><code>__init__()</code></strong> method of the serializer. Apart from that, we've to pass some <strong><em><code>context</code></em></strong> data to the serializer to distinguish between the <code>GET</code>, <code>POST</code> and <code>PATCH</code> requests.</p>\n\n<pre><code>class MyModelSerializer(serializers.ModelSerializer):\n    <b>field1 = serializers.NullBooleanField()  # remove \"source\" argument from here\n\n    def __init__(self, *args, **kwargs):\n        super().__init__(*args, **kwargs)\n        if self.context['request'].method == 'GET':\n            self.fields['field1'] =serializers.NullBooleanField(source= \"get_field1\")</b>\n\n    class Meta:\n        model = MyModel\n        fields = ('field1',)</code></pre>\n\n<p>and while serializing the data, don't forget to pass the request as context, as</p>\n\n<pre><code>serializer = MyModelSerializer(my_model, data=request.data, partial=True, <b>context={\"request\": request}</b>)</code></pre>\n"}, {"tags": [], "owner": {"reputation": 334, "user_id": 2909839, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5d867cdb88bd8af5a447b16dbd3c2d0d?s=128&d=identicon&r=PG&f=1", "display_name": "vardos", "link": "https://stackoverflow.com/users/2909839/vardos"}, "is_accepted": true, "score": 1, "last_activity_date": 1558033783, "creation_date": 1558033783, "answer_id": 56175154, "question_id": 56157019, "link": "https://stackoverflow.com/questions/56157019/how-to-make-a-field-in-serializer-both-readable-and-writeable/56175154#56175154", "title": "How to make a field in Serializer both readable and writeable", "body": "<p>Answer by @JPG is good, but I feel it's a hacky way.</p>\n\n<p>I would override the <code>to_representation</code> method of the Serializer to achieve your purpose.</p>\n\n<p>Here's what you can do</p>\n\n<pre><code>class MyModelSerializer(serializers.ModelSerializer):\n        field1 = serializers.NullBooleanField() # get rid of source\n\n        def to_representation(self, instance):\n             data = super(MyModel, self).to_representation(instance)\n             data.update({\n                  'field1': instance.get_field1\n             })\n             return data       \n\n        class Meta:\n             model = MyModel\n             fields = ('field1')\n</code></pre>\n\n<p>This way you are implicitly providing the source and your field becomes writeable. So every time you GET, POST, or PATCH you'll get the right value.</p>\n"}], "owner": {"reputation": 115, "user_id": 5891148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf56deb08f0eea9c134ed1cb44343c7b?s=128&d=identicon&r=PG&f=1", "display_name": "dhiraj", "link": "https://stackoverflow.com/users/5891148/dhiraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 1, "accepted_answer_id": 56175154, "answer_count": 2, "score": 3, "last_activity_date": 1558033783, "creation_date": 1557951511, "last_edit_date": 1557961587, "question_id": 56157019, "link": "https://stackoverflow.com/questions/56157019/how-to-make-a-field-in-serializer-both-readable-and-writeable", "title": "How to make a field in Serializer both readable and writeable", "body": "<p>I am writing a Serializer for my model which will be accessed using GET, POST and PATCH endpoints. I have a property in my model which I am using as a source for a field. However, using <code>source=</code> in serializer field is making it ready-only.</p>\n\n<p>If I remove the <code>source=\"get_field1\"</code> from the </p>\n\n<p><code>field1 = serializers.NullBooleanField(source=\"get_field1\")</code> </p>\n\n<p>then I am able to update the data.</p>\n\n<p>But I HAVE to use the source to get the right value of the field.</p>\n\n<pre><code>class MyModel(models.Model):\n    field1 = NullBooleanField(default=None)\n\n    @property\n    get_field1(self):\n       data = True\n       # ...some logic\n       return data\n</code></pre>\n\n<p>Now I have a serializer that I am using</p>\n\n<pre><code>    class MyModelSerializer(serializers.ModelSerializer):\n        field1 = serializers.NullBooleanField(source=\"get_field1\")\n        class Meta:\n             model = MyModel\n             fields = ('field1')\n</code></pre>\n\n<p>Now in my API endpoint, I do this</p>\n\n<pre><code>    serializer = MyModelSerializer(my_model, data=request.data, partial=True)\n    if serializer.is_valid():\n        serializer.save() # &lt;- throws error \"can't set attribute\"\n</code></pre>\n\n<p>Also, I would like to mention that the field in the serializer is referred by the property name and not by the field name.</p>\n\n<p>Example: If I do </p>\n\n<p><code>&gt;&gt; serializer.validated_data</code></p>\n\n<p><code>&gt;&gt; 'OrderedDict(['get_field1'], True) # &lt;- shouldn't this by field1 and not get_field1</code></p>\n"}, {"tags": ["python", "cupy"], "answers": [{"tags": [], "owner": {"reputation": 1554, "user_id": 5215416, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ORsiN.jpg?s=128&g=1", "display_name": "corochann", "link": "https://stackoverflow.com/users/5215416/corochann"}, "is_accepted": true, "score": 2, "last_activity_date": 1557996776, "last_edit_date": 1557996776, "creation_date": 1557960401, "answer_id": 56158593, "question_id": 56157018, "link": "https://stackoverflow.com/questions/56157018/does-cupy-automatically-use-cuda-and-the-gpu/56158593#56158593", "title": "Does cupy automatically use cuda and the gpu?", "body": "<p>Yes, <code>CuPy</code> automatically uses <code>CUDA</code>.</p>\n\n<p>Before you install <code>CuPy</code>, you need to setup your <code>CUDA</code> environment. Then, you can install <code>CuPy</code> with a specific <code>CUDA</code> version as follows:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>pip install cupy-cudaXX\n</code></pre>\n\n<p>where XX corresponds to your <code>CUDA</code> version, for example <code>cupy-cuda90</code> for <code>CUDA 9.0</code>.\nSee <a href=\"https://docs-cupy.chainer.org/en/stable/install.html#install-cupy\" rel=\"nofollow noreferrer\">https://docs-cupy.chainer.org/en/stable/install.html#install-cupy</a> for details.</p>\n"}], "owner": {"reputation": 135, "user_id": 10394047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87746ea4f23edadd4896849cf65e5ba9?s=128&d=identicon&r=PG&f=1", "display_name": "Ipulatov", "link": "https://stackoverflow.com/users/10394047/ipulatov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 363, "favorite_count": 0, "accepted_answer_id": 56158593, "answer_count": 1, "score": 2, "last_activity_date": 1557996776, "creation_date": 1557951505, "last_edit_date": 1557951631, "question_id": 56157018, "link": "https://stackoverflow.com/questions/56157018/does-cupy-automatically-use-cuda-and-the-gpu", "title": "Does cupy automatically use cuda and the gpu?", "body": "<p>I know that with other libraries that allow one to use python with the GPU, you have to specify that you're using cuda, otherwise the functions will work but not use cuda, like numba. Is the same true for cupy, or does it automatically use the GPU?</p>\n"}, {"tags": ["python", "pip", "pypi", "python-wheel", "egg"], "comments": [{"owner": {"reputation": 18194, "user_id": 1513933, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/0ozBK.jpg?s=128&g=1", "display_name": "Laurent LAPORTE", "link": "https://stackoverflow.com/users/1513933/laurent-laporte"}, "edited": false, "score": 0, "creation_date": 1557951852, "post_id": 56157015, "comment_id": 98943239, "body": "Are you re-implementing <a href=\"https://pythonwheels.com/\" rel=\"nofollow noreferrer\">Python Wheels</a>?"}, {"owner": {"reputation": 1660, "user_id": 5501407, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cz29B.jpg?s=128&g=1", "display_name": "R4444", "link": "https://stackoverflow.com/users/5501407/r4444"}, "reply_to_user": {"reputation": 18194, "user_id": 1513933, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/0ozBK.jpg?s=128&g=1", "display_name": "Laurent LAPORTE", "link": "https://stackoverflow.com/users/1513933/laurent-laporte"}, "edited": false, "score": 0, "creation_date": 1557952107, "post_id": 56157015, "comment_id": 98943339, "body": "that project checks few hundred popular packages (300/360) if they have uploaded wheel format files. I want check whole pypi repository in the similar way."}], "answers": [{"comments": [{"owner": {"reputation": 1660, "user_id": 5501407, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cz29B.jpg?s=128&g=1", "display_name": "R4444", "link": "https://stackoverflow.com/users/5501407/r4444"}, "edited": false, "score": 0, "creation_date": 1557952502, "post_id": 56157172, "comment_id": 98943510, "body": "thanks @laurent that&#39;s a good idea but rather time consuming and as you said depends on my own dist/os. But thanks anyways."}], "tags": [], "owner": {"reputation": 18194, "user_id": 1513933, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/0ozBK.jpg?s=128&g=1", "display_name": "Laurent LAPORTE", "link": "https://stackoverflow.com/users/1513933/laurent-laporte"}, "is_accepted": false, "score": 1, "last_activity_date": 1557952165, "creation_date": 1557952165, "answer_id": 56157172, "question_id": 56157015, "link": "https://stackoverflow.com/questions/56157015/pypi-how-to-check-if-the-package-is-using-wheel/56157172#56157172", "title": "pypi: how to check if the package is using wheel", "body": "<p>You can use <a href=\"https://pip.pypa.io/en/stable/reference/pip_download/\" rel=\"nofollow noreferrer\"><code>pip download</code></a> to download the required library, and then check if it is a wheel file or something else. But, that way, you only check the libraries available for your own distribution/OS and Python version. There may be variants\u2026</p>\n"}, {"comments": [{"owner": {"reputation": 1660, "user_id": 5501407, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cz29B.jpg?s=128&g=1", "display_name": "R4444", "link": "https://stackoverflow.com/users/5501407/r4444"}, "edited": false, "score": 0, "creation_date": 1557952534, "post_id": 56157190, "comment_id": 98943529, "body": "Thanks @Triggernometry, this seems like a better way"}, {"owner": {"reputation": 1660, "user_id": 5501407, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cz29B.jpg?s=128&g=1", "display_name": "R4444", "link": "https://stackoverflow.com/users/5501407/r4444"}, "edited": false, "score": 0, "creation_date": 1557953182, "post_id": 56157190, "comment_id": 98943779, "body": "sorry, but I have to select @dustin Ingram&#39;s answer as it seems like way more easier."}, {"owner": {"reputation": 507, "user_id": 6446489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed68268d4de0bb9904dc1b61f77353b5?s=128&d=identicon&r=PG&f=1", "display_name": "Triggernometry", "link": "https://stackoverflow.com/users/6446489/triggernometry"}, "reply_to_user": {"reputation": 1660, "user_id": 5501407, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cz29B.jpg?s=128&g=1", "display_name": "R4444", "link": "https://stackoverflow.com/users/5501407/r4444"}, "edited": false, "score": 1, "creation_date": 1557953625, "post_id": 56157190, "comment_id": 98943934, "body": "@Ruturaj No worries! But just so you know, it&#39;s <a href=\"https://meta.stackexchange.com/questions/38090/discourage-questions-being-marked-as-answered-within-an-hour-or-so-of-being-poste\">recommended you wait for an hour or so</a> before you accept an answer, for just this reason."}], "tags": [], "owner": {"reputation": 507, "user_id": 6446489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed68268d4de0bb9904dc1b61f77353b5?s=128&d=identicon&r=PG&f=1", "display_name": "Triggernometry", "link": "https://stackoverflow.com/users/6446489/triggernometry"}, "is_accepted": false, "score": 1, "last_activity_date": 1557952238, "creation_date": 1557952238, "answer_id": 56157190, "question_id": 56157015, "link": "https://stackoverflow.com/questions/56157015/pypi-how-to-check-if-the-package-is-using-wheel/56157190#56157190", "title": "pypi: how to check if the package is using wheel", "body": "<p>PIP, by default, uses the <a href=\"https://pypi.org/simple/\" rel=\"nofollow noreferrer\">Simple PyPi Repository</a>.</p>\n\n<p>If you open the link, you can see that it has a link for every single available package.</p>\n\n<p>If you open a package link, you can see different packages, versions, and download options available.</p>\n\n<p>Obviously, you'll have to test for edge cases, but I should think checking if the latest version has a <code>.whl</code> extension should be a good starting place.</p>\n"}, {"tags": [], "owner": {"reputation": 15554, "user_id": 328036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db101b3a812b0464c53e5409c12ea94?s=128&d=identicon&r=PG", "display_name": "Dustin Ingram", "link": "https://stackoverflow.com/users/328036/dustin-ingram"}, "is_accepted": true, "score": 3, "last_activity_date": 1557952718, "creation_date": 1557952718, "answer_id": 56157283, "question_id": 56157015, "link": "https://stackoverflow.com/questions/56157015/pypi-how-to-check-if-the-package-is-using-wheel/56157283#56157283", "title": "pypi: how to check if the package is using wheel", "body": "<p>PyPI has a JSON API which will give you all the releases for a given project, and all the files for a given release: <a href=\"https://warehouse.readthedocs.io/api-reference/json/\" rel=\"nofollow noreferrer\">https://warehouse.readthedocs.io/api-reference/json/</a></p>\n"}], "owner": {"reputation": 1660, "user_id": 5501407, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cz29B.jpg?s=128&g=1", "display_name": "R4444", "link": "https://stackoverflow.com/users/5501407/r4444"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1011, "favorite_count": 0, "accepted_answer_id": 56157283, "answer_count": 3, "score": 3, "last_activity_date": 1558642157, "creation_date": 1557951481, "last_edit_date": 1558642157, "question_id": 56157015, "link": "https://stackoverflow.com/questions/56157015/pypi-how-to-check-if-the-package-is-using-wheel", "title": "pypi: how to check if the package is using wheel", "body": "<p>I want to write a script which goes through all the packages on pypi repository, to check whether they are using <code>wheel</code> or <code>egg</code>.</p>\n\n<p>I know that by the new standard, it is mandatory for all the packages to use <code>wheel</code> and not <code>egg</code>. I found this information on <a href=\"https://pythonwheels.com/\" rel=\"nofollow noreferrer\">this</a> website. They also have the list of packages which do and don't use <code>wheel</code>. But, they list only top few packages. But, I would like to check this for all the packages on pypi. I know that on pypi website they show if the types of files available to download e.g. <a href=\"https://pypi.org/project/awscli-cwlogs/#files\" rel=\"nofollow noreferrer\">this</a> shows that there is no wheel file type is available to download, on the contrary <a href=\"https://pypi.org/project/asn1crypto/#files\" rel=\"nofollow noreferrer\">this</a> shows that the wheel format is available to download. Does something like this help me in achieving my goal?</p>\n\n<p>I certainly don't expect someone to write a script for me, but I would like a hint on how to figure if the package is using <code>wheel</code>.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 218, "user_id": 11167741, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-M1lGCae4vAg/AAAAAAAAAAI/AAAAAAAAGxo/_M--1KDieM0/photo.jpg?sz=128", "display_name": "OSainz", "link": "https://stackoverflow.com/users/11167741/osainz"}, "edited": false, "score": 1, "creation_date": 1557951522, "post_id": 56156938, "comment_id": 98943100, "body": "In the <code>get</code> method put whatever you want to print when the value doesn&#39;t found instead of 0"}], "answers": [{"comments": [{"owner": {"reputation": 67098, "user_id": 1235698, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90fd9ad4efef8eb93209f42183c48f3e?s=128&d=identicon&r=PG", "display_name": "Marcin Orlowski", "link": "https://stackoverflow.com/users/1235698/marcin-orlowski"}, "edited": false, "score": 0, "creation_date": 1557951597, "post_id": 56156966, "comment_id": 98943125, "body": "You missed the OP&#39;s real question"}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "reply_to_user": {"reputation": 67098, "user_id": 1235698, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90fd9ad4efef8eb93209f42183c48f3e?s=128&d=identicon&r=PG", "display_name": "Marcin Orlowski", "link": "https://stackoverflow.com/users/1235698/marcin-orlowski"}, "edited": false, "score": 1, "creation_date": 1557952056, "post_id": 56156966, "comment_id": 98943317, "body": "@MarcinOrlowski Avoiding errors is the cleanest way to handle them."}], "tags": [], "owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "is_accepted": true, "score": 2, "last_activity_date": 1557952143, "last_edit_date": 1557952143, "creation_date": 1557951253, "answer_id": 56156966, "question_id": 56156938, "link": "https://stackoverflow.com/questions/56156938/how-to-handle-error-when-object-has-no-attribute/56156966#56156966", "title": "How to handle error when object has no attribute", "body": "<blockquote>\n  <p>Is there a way to elegantly/gracefully handle if the value returned is 0 without using if else clause?</p>\n</blockquote>\n\n<p>The best way to handle this is to provide a default value that allows <code>split()</code>. So this means you can use an empty string instead:</p>\n\n<pre><code>print (test.get(\"name\", \"\").split(\" \")[1]);\n</code></pre>\n\n<p>However, now you get an error with the indexing. You can solve this error by breaking up the long line of code into smaller pieces and assigning intermediate values to variables:</p>\n\n<pre><code>names = test.get(\"name\", \"\").split(\" \")\n</code></pre>\n\n<p>Then use an <code>if</code> statement to check if there is a last name:</p>\n\n<pre><code>if len(names) &gt;= 2:\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 198, "user_id": 7217301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fce02f80369c64b9df01c1ff98c695d0?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Hamby", "link": "https://stackoverflow.com/users/7217301/jack-hamby"}, "is_accepted": false, "score": 0, "last_activity_date": 1557951462, "creation_date": 1557951462, "answer_id": 56157006, "question_id": 56156938, "link": "https://stackoverflow.com/questions/56156938/how-to-handle-error-when-object-has-no-attribute/56157006#56157006", "title": "How to handle error when object has no attribute", "body": "<p>you could use try/except</p>\n\n<pre><code>test = {\"age\": \"John Lennon\"}\ntry:\n   print (test.get(\"name\", 0).split(\" \")[1])\nexcept:\n   print('failed to get name')\n</code></pre>\n\n<p>OR you could change the default return of .get()</p>\n\n<pre><code>test = {\"age\": \"John Lennon\"}\nprint (test.get(\"name\", \" \").split(\" \")[1])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3225, "user_id": 9917694, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eYLrricMNLQ/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3U1NPjt3ei5L4we8FlqCJz7mWBlg/mo/photo.jpg?sz=128", "display_name": "N Chauhan", "link": "https://stackoverflow.com/users/9917694/n-chauhan"}, "is_accepted": false, "score": 1, "last_activity_date": 1557951466, "creation_date": 1557951466, "answer_id": 56157009, "question_id": 56156938, "link": "https://stackoverflow.com/questions/56156938/how-to-handle-error-when-object-has-no-attribute/56157009#56157009", "title": "How to handle error when object has no attribute", "body": "<p>The method I would use is a <code>try-except</code></p>\n\n<pre><code>try:\n    test.get('name', 0).split(' ')[1]\nexcept AttributeError:\n    # do something to handle error\n</code></pre>\n\n<p>Obviously in this case, don\u2019t use a 0 as the default value. Use a valid string that won\u2019t cause an error. </p>\n\n<pre><code>test.get('name', ' ').split(' ')[1]\n</code></pre>\n\n<p>The more likely error is an <code>IndexError</code> which will occur when the name given is only 1 word. </p>\n\n<p>You can stack these <code>except</code> clauses like <code>elif</code>s:</p>\n\n<pre><code>try:\n    test.get('name', 0).split(' ')[1]\nexcept AttributeError:\n    # do something to handle error\nexcept IndexError as e:\n    # you can use \u2018as e\u2019 to use the exception\n    # e.g print(e)\nexcept (ValueError, TypeError):\n    # you can catch multiple exceptions in one clause\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 67098, "user_id": 1235698, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90fd9ad4efef8eb93209f42183c48f3e?s=128&d=identicon&r=PG", "display_name": "Marcin Orlowski", "link": "https://stackoverflow.com/users/1235698/marcin-orlowski"}, "edited": false, "score": 0, "creation_date": 1557951677, "post_id": 56157014, "comment_id": 98943160, "body": "You missed OP&#39;s real question"}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "reply_to_user": {"reputation": 67098, "user_id": 1235698, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90fd9ad4efef8eb93209f42183c48f3e?s=128&d=identicon&r=PG", "display_name": "Marcin Orlowski", "link": "https://stackoverflow.com/users/1235698/marcin-orlowski"}, "edited": false, "score": 0, "creation_date": 1557951803, "post_id": 56157014, "comment_id": 98943218, "body": "@MarcinOrlowski Avoiding the error in the first place is the best solution."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "reply_to_user": {"reputation": 67098, "user_id": 1235698, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90fd9ad4efef8eb93209f42183c48f3e?s=128&d=identicon&r=PG", "display_name": "Marcin Orlowski", "link": "https://stackoverflow.com/users/1235698/marcin-orlowski"}, "edited": false, "score": 1, "creation_date": 1557952137, "post_id": 56157014, "comment_id": 98943353, "body": "@MarcinOrlowski: I really don&#39;t think so. I suggested a better solution than the one (which I assume it&#39;s because lack of <i>Python</i> experience) that got <i>OP</i> into this situation. Returning 0 as a default value to something that is usually a string, doesn&#39;t make very much sense."}], "tags": [], "owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "is_accepted": false, "score": 0, "last_activity_date": 1557952659, "last_edit_date": 1557952659, "creation_date": 1557951479, "answer_id": 56157014, "question_id": 56156938, "link": "https://stackoverflow.com/questions/56156938/how-to-handle-error-when-object-has-no-attribute/56157014#56157014", "title": "How to handle error when object has no attribute", "body": "<ul>\n<li>Since the value corresponding to <em>name</em> is a string, so should be the <em>get</em>'s default value. In this case it should be the empty string</li>\n<li>If you want the last name (which will be last element in the list), use <strong><em>-1</em></strong> index (as it would work even when <em>split</em> will not be able to split the string - and therefore will return a list containing the string)</li>\n</ul>\n\n\n\n<blockquote>\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; test0 = {\"name\": \"John Lennon\"}\n&gt;&gt;&gt; test1 = {\"age\": \"John Lennon\"}\n&gt;&gt;&gt;\n&gt;&gt;&gt; print(test0.get(\"name\", \"\").split(\" \")[-1])\nLennon\n&gt;&gt;&gt; print(test1.get(\"name\", \"\").split(\" \")[-1])\n\n&gt;&gt;&gt;\n</code></pre>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 161, "user_id": 10345434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c94f2b8a5442d764772dce3b51607480?s=128&d=identicon&r=PG&f=1", "display_name": "Bob McCormick", "link": "https://stackoverflow.com/users/10345434/bob-mccormick"}, "is_accepted": false, "score": 0, "last_activity_date": 1557951485, "creation_date": 1557951485, "answer_id": 56157016, "question_id": 56156938, "link": "https://stackoverflow.com/questions/56156938/how-to-handle-error-when-object-has-no-attribute/56157016#56157016", "title": "How to handle error when object has no attribute", "body": "<p>I'm not sure what you mean by \"elegantly handle\".  If you put a space in the default arg for get, you don't get an error:</p>\n\n<pre><code>&gt;&gt;&gt; test = {\"age\": \"John Lennon\"};\n&gt;&gt;&gt; print (test.get(\"name\", \" \").split(\" \")[1]);\n\n&gt;&gt;&gt; \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 58, "user_id": 11495096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d06f01f9392d3416b8167dd6134d153?s=128&d=identicon&r=PG&f=1", "display_name": "Sh3mm", "link": "https://stackoverflow.com/users/11495096/sh3mm"}, "is_accepted": false, "score": 0, "last_activity_date": 1557951517, "creation_date": 1557951517, "answer_id": 56157022, "question_id": 56156938, "link": "https://stackoverflow.com/questions/56156938/how-to-handle-error-when-object-has-no-attribute/56157022#56157022", "title": "How to handle error when object has no attribute", "body": "<p>the <code>try/except</code>:</p>\n\n<pre><code>try:\n    test = {\"age\": \"John Lennon\"}\n    print (test.get(\"name\", 0).split(\" \")[1])\nexcept AttributeError:\n    # doSomething\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3718, "user_id": 11502612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ANy5Q.png?s=128&g=1", "display_name": "milanbalazs", "link": "https://stackoverflow.com/users/11502612/milanbalazs"}, "is_accepted": false, "score": 1, "last_activity_date": 1557951570, "creation_date": 1557951570, "answer_id": 56157037, "question_id": 56156938, "link": "https://stackoverflow.com/questions/56156938/how-to-handle-error-when-object-has-no-attribute/56157037#56157037", "title": "How to handle error when object has no attribute", "body": "<p>There is not \"name\" key in your  {\"age\": \"John Lennon\"} dict. When you want to read the \"name\" member (which does not exist in dict) then \"get\" method gives 0 as default value. And the type of your default value (0) is integer which does not have split method.\nYou should define the default value as string. Like this:</p>\n\n<pre><code>print(test.get(\"name\", \" \").split(\" \")[1])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 585, "user_id": 9801558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hoL84.png?s=128&g=1", "display_name": "nullchimp", "link": "https://stackoverflow.com/users/9801558/nullchimp"}, "is_accepted": false, "score": 0, "last_activity_date": 1557952207, "last_edit_date": 1557952207, "creation_date": 1557951629, "answer_id": 56157045, "question_id": 56156938, "link": "https://stackoverflow.com/questions/56156938/how-to-handle-error-when-object-has-no-attribute/56157045#56157045", "title": "How to handle error when object has no attribute", "body": "<p>In your case <code>test.get</code> will give you the corresponding value to your key. If it cannot find it, it will give you the default value, that you provided as second argument. That is an integer <code>0</code> and therefore has no <code>split</code>, which is why you get this error. Just use:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>test = {\"age\": \"John Lennon\"}\nprint (test.get(\"name\", \" \").split(\" \")[1])\n</code></pre>\n\n<p>I hope that helps!</p>\n"}, {"comments": [{"owner": {"reputation": 3225, "user_id": 9917694, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eYLrricMNLQ/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3U1NPjt3ei5L4we8FlqCJz7mWBlg/mo/photo.jpg?sz=128", "display_name": "N Chauhan", "link": "https://stackoverflow.com/users/9917694/n-chauhan"}, "edited": false, "score": 0, "creation_date": 1557955608, "post_id": 56157051, "comment_id": 98944647, "body": "What if the <code>name</code> isn\u2019t a 2 or more word string?"}, {"owner": {"reputation": 6783, "user_id": 3064538, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b644a108ae9ae0ec2f7402dd235d155c?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/3064538/boris"}, "reply_to_user": {"reputation": 3225, "user_id": 9917694, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eYLrricMNLQ/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3U1NPjt3ei5L4we8FlqCJz7mWBlg/mo/photo.jpg?sz=128", "display_name": "N Chauhan", "link": "https://stackoverflow.com/users/9917694/n-chauhan"}, "edited": false, "score": 0, "creation_date": 1557956756, "post_id": 56157051, "comment_id": 98944999, "body": "@NChauhan then you should probably turn your dictionary into <code>{&quot;first_name&quot;: &quot;John&quot;, &quot;last_name&quot;: None}</code>"}], "tags": [], "owner": {"reputation": 6783, "user_id": 3064538, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b644a108ae9ae0ec2f7402dd235d155c?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/3064538/boris"}, "is_accepted": false, "score": 2, "last_activity_date": 1557951648, "creation_date": 1557951648, "answer_id": 56157051, "question_id": 56156938, "link": "https://stackoverflow.com/questions/56156938/how-to-handle-error-when-object-has-no-attribute/56157051#56157051", "title": "How to handle error when object has no attribute", "body": "<p>In this case you shouldn't use <code>get</code>. Check if the dictionary contains the key you want to access</p>\n\n<pre><code>test = {\"age\": \"John Lennon\"}\nif \"name\" in test:\n    print(test[\"name\"].split(\" \")[1])\nelse:\n    do_something_else()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 1, "creation_date": 1557951874, "post_id": 56157094, "comment_id": 98943251, "body": "The second positional argument is the same as the <code>default</code> keyword argument. You should give one or the other, but not both."}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 1, "creation_date": 1557951940, "post_id": 56157094, "comment_id": 98943275, "body": "You can just as easily do <code>if data == 0</code> using the OP&#39;s original default value."}], "tags": [], "owner": {"reputation": 55, "user_id": 5005332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1da63af3fc4bbbc9bd7e9a870ba6699?s=128&d=identicon&r=PG&f=1", "display_name": "Craig", "link": "https://stackoverflow.com/users/5005332/craig"}, "is_accepted": false, "score": 0, "last_activity_date": 1557951893, "last_edit_date": 1557951893, "creation_date": 1557951805, "answer_id": 56157094, "question_id": 56156938, "link": "https://stackoverflow.com/questions/56156938/how-to-handle-error-when-object-has-no-attribute/56157094#56157094", "title": "How to handle error when object has no attribute", "body": "<p>According to <a href=\"https://www.tutorialspoint.com/python/dictionary_get.htm\" rel=\"nofollow noreferrer\">this website</a>, the <code>dictionary.get()</code> method has a keyword argument <code>default</code>, which can be set to None like so:</p>\n\n<pre><code>test.get(name, default=None)\n</code></pre>\n\n<p>This will return <code>None</code> if the key <code>name</code> does not exist in the dictionary.  Separating your code into two lines would handle this gracefully:</p>\n\n<pre><code>test = {\"name\": \"John Lennon\"};\ndata = test.get(name, default=None)\n\nif data == None:\n    print( data.split(\" \")[1] )\nelse:\n    print( \"Key {0} not found in 'data.'\".format(name) )\n</code></pre>\n"}], "owner": {"reputation": 2230, "user_id": 5437911, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/dfff6f7cbd403b86ed24dbf8f5ad4be2?s=128&d=identicon&r=PG&f=1", "display_name": "AmazingDayToday", "link": "https://stackoverflow.com/users/5437911/amazingdaytoday"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1114, "favorite_count": 0, "accepted_answer_id": 56156966, "answer_count": 10, "score": 1, "last_activity_date": 1557952659, "creation_date": 1557951111, "question_id": 56156938, "link": "https://stackoverflow.com/questions/56156938/how-to-handle-error-when-object-has-no-attribute", "title": "How to handle error when object has no attribute", "body": "<p>I am very new to Python. This is my first ever code in Python! Code that works:</p>\n\n<pre><code>test = {\"name\": \"John Lennon\"};\nprint (test.get(\"name\", 0).split(\" \")[1]);\n</code></pre>\n\n<p>What happens here is that it prints out <code>Lennon</code>, which is expected.</p>\n\n<p>If the code is:</p>\n\n<pre><code>test = {\"age\": \"John Lennon\"};\nprint (test.get(\"name\", 0).split(\" \")[1]);\n</code></pre>\n\n<p><code>AttributeError: 'int' object has no attribute 'split'</code> will get printed. I understand that this is because the <code>0</code> value can't be split.</p>\n\n<p>Is there a way to elegantly/gracefully handle if the value returned is <code>0</code> without using <code>if else</code> clause?</p>\n"}, {"tags": ["python", "pandas", "date"], "comments": [{"owner": {"reputation": 58, "user_id": 11495096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d06f01f9392d3416b8167dd6134d153?s=128&d=identicon&r=PG&f=1", "display_name": "Sh3mm", "link": "https://stackoverflow.com/users/11495096/sh3mm"}, "edited": false, "score": 2, "creation_date": 1557951152, "post_id": 56156895, "comment_id": 98942947, "body": "could you tell us more about your problem? do you have any code? exemple data? exemple output?"}, {"owner": {"reputation": 1415, "user_id": 2314391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b7e52c232ca81d0d7bf28f2609e15d1?s=128&d=identicon&r=PG", "display_name": "Will", "link": "https://stackoverflow.com/users/2314391/will"}, "edited": false, "score": 0, "creation_date": 1557951185, "post_id": 56156895, "comment_id": 98942966, "body": "Just to understand, you want to treat Thurs 7pm as Sunday midnight?"}, {"owner": {"reputation": 41, "user_id": 11396791, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KENkyzQERjM/AAAAAAAAAAI/AAAAAAAAABU/uBIBvH8fvqU/photo.jpg?sz=128", "display_name": "Abhijeet Khandelwal", "link": "https://stackoverflow.com/users/11396791/abhijeet-khandelwal"}, "edited": false, "score": 0, "creation_date": 1557952520, "post_id": 56156895, "comment_id": 98943520, "body": "Yes, I want to treat Thursday 7PM as Sunday midnight"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 9110699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6bc8deffef4fb8aa1dac749deb8fc1a?s=128&d=identicon&r=PG&f=1", "display_name": "Amantux", "link": "https://stackoverflow.com/users/9110699/amantux"}, "is_accepted": false, "score": 0, "last_activity_date": 1557952762, "creation_date": 1557952762, "answer_id": 56157293, "question_id": 56156895, "link": "https://stackoverflow.com/questions/56156895/custom-week-calculation-where-week-starts-from-thursday-7pm-in-pandas/56157293#56157293", "title": "Custom week calculation where week starts from thursday 7PM in pandas;", "body": "<p>Try using an Epoch based date, and then the delta between to calculate</p>\n"}, {"tags": [], "owner": {"reputation": 1323, "user_id": 10642364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca8a8f956df00c66f486e255d846271e?s=128&d=identicon&r=PG", "display_name": "Ethan", "link": "https://stackoverflow.com/users/10642364/ethan"}, "is_accepted": false, "score": 0, "last_activity_date": 1557953360, "creation_date": 1557953360, "answer_id": 56157425, "question_id": 56156895, "link": "https://stackoverflow.com/questions/56156895/custom-week-calculation-where-week-starts-from-thursday-7pm-in-pandas/56157425#56157425", "title": "Custom week calculation where week starts from thursday 7PM in pandas;", "body": "<p>Pandas allows building custom business days and business hours. You should refer to their documentation:\n<a href=\"http://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html\" rel=\"nofollow noreferrer\">http://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html</a></p>\n\n<p>Look in the DataOffset Objects section in Custom Business Days and Business Hours subsections for excellent examples. </p>\n"}], "owner": {"reputation": 41, "user_id": 11396791, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KENkyzQERjM/AAAAAAAAAAI/AAAAAAAAABU/uBIBvH8fvqU/photo.jpg?sz=128", "display_name": "Abhijeet Khandelwal", "link": "https://stackoverflow.com/users/11396791/abhijeet-khandelwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 1, "answer_count": 2, "score": -1, "last_activity_date": 1557953360, "creation_date": 1557950919, "question_id": 56156895, "link": "https://stackoverflow.com/questions/56156895/custom-week-calculation-where-week-starts-from-thursday-7pm-in-pandas", "title": "Custom week calculation where week starts from thursday 7PM in pandas;", "body": "<p>I am trying to write a function for calculating ordinal work week starting from Thursday 7 PM. How should I approach this problem using pandas ?</p>\n"}, {"tags": ["python", "pandas", "jupyter-notebook"], "answers": [{"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 3, "last_activity_date": 1557952024, "last_edit_date": 1557952024, "creation_date": 1557950973, "answer_id": 56156903, "question_id": 56156866, "link": "https://stackoverflow.com/questions/56156866/pandas-select-rows-that-contains-both-values-inclusive/56156903#56156903", "title": "Pandas select rows that contains both values (inclusive)", "body": "<p>I am using <code>filter</code> </p>\n\n<pre><code>df.groupby('name').filter(lambda x : pd.Series(['Right','Left']).isin(x['ear']).all())\nOut[106]: \n   name    ear\n0  Lisa  Right\n1  Lisa   Left\n</code></pre>\n\n<p>Or <code>issubset</code></p>\n\n<pre><code>df.groupby('name').filter(lambda x : {'Right','Left'}.issubset(x['ear'].tolist()))\n</code></pre>\n\n<p>To fix your code need <code>isin</code> (get intersection of two series)</p>\n\n<pre><code>s1=df.loc[df.ear=='Right','name']\ns2=df.loc[df.ear=='Left','name']\ndf.loc[df.name.isin(s1[s1.isin(s2)]),]\nOut[119]: \n   name    ear\n0  Lisa  Right\n1  Lisa   Left\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1415, "user_id": 2314391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b7e52c232ca81d0d7bf28f2609e15d1?s=128&d=identicon&r=PG", "display_name": "Will", "link": "https://stackoverflow.com/users/2314391/will"}, "edited": false, "score": 0, "creation_date": 1557951482, "post_id": 56156904, "comment_id": 98943085, "body": "That&#39;s a clever transform. Just to finalise the reduction after the transform (and to be pedantic) you&#39;d need a df.name.unique()."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 1415, "user_id": 2314391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b7e52c232ca81d0d7bf28f2609e15d1?s=128&d=identicon&r=PG", "display_name": "Will", "link": "https://stackoverflow.com/users/2314391/will"}, "edited": false, "score": 0, "creation_date": 1557952032, "post_id": 56156904, "comment_id": 98943306, "body": "@Will Assuming OP only wants the names of those with two ears (poor van gogh) and not the rows they are present in, you&#39;re right."}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 4, "last_activity_date": 1557950974, "creation_date": 1557950974, "answer_id": 56156904, "question_id": 56156866, "link": "https://stackoverflow.com/questions/56156866/pandas-select-rows-that-contains-both-values-inclusive/56156904#56156904", "title": "Pandas select rows that contains both values (inclusive)", "body": "<p>Your solution actually requires the use of <code>groupby</code> and <code>nunique</code>:</p>\n\n<pre><code>df[df.groupby('name')['ear'].transform('nunique') == df['ear'].nunique()]\n\n   name    ear\n0  Lisa  Right\n1  Lisa   Left\n</code></pre>\n\n<p>You can simplify this assuming humans can only have two ears ;)</p>\n\n<pre><code>df[df.groupby('name')['ear'].transform('nunique').eq(2)]\n\n   name    ear\n0  Lisa  Right\n1  Lisa   Left\n</code></pre>\n\n<hr>\n\n<p><strong>Details</strong><br>\n<code>groupby</code> will compute the number of (unique) ear entries with respect to the name:</p>\n\n<pre><code>df.groupby('name')['ear'].transform('nunique')\n\n0    2\n1    2\n2    1\n3    1\nName: ear, dtype: int64\n</code></pre>\n\n<p>(The first two rows belong to Lisa.) The result is broadcasted to the original frame.</p>\n\n<p>Then check what rows have a unique count of two and select accordingly.</p>\n"}], "owner": {"reputation": 849, "user_id": 3842845, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/51bIs.jpg?s=128&g=1", "display_name": "Java", "link": "https://stackoverflow.com/users/3842845/java"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 56156904, "answer_count": 2, "score": 3, "last_activity_date": 1557964605, "creation_date": 1557950783, "last_edit_date": 1557964605, "question_id": 56156866, "link": "https://stackoverflow.com/questions/56156866/pandas-select-rows-that-contains-both-values-inclusive", "title": "Pandas select rows that contains both values (inclusive)", "body": "<p>I am trying to select only rows that have both values.</p>\n\n<p>For example, I am trying to select only a Patient who has <strong>both</strong> Right and Left on Ear column. </p>\n\n<p>In this case, it would be only <strong>Lisa</strong>.</p>\n\n<p>Here is code that I was trying to get the right data.</p>\n\n<pre><code>import pandas as pd\n\ndata = {'name': ['Lisa', 'Lisa', 'Mac', 'Intosh'],\n    'ear': ['Right','Left','Right','Left']\n   }\n\ndf = pd.DataFrame(data, columns = ['name', 'ear'])\ndf.loc[(df['name'] == 'Right') &amp; (df['ear'] == 'Left')]\ndf\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/S5pFC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/S5pFC.png\" alt=\"enter image description here\"></a></p>\n\n<p>The code retrives everyone, but I am trying to only get row 0 and 1 because Lisa has <strong>both</strong> Right and Left for ear.</p>\n"}, {"tags": ["python", "windows", "turtle-graphics"], "comments": [{"owner": {"reputation": 79883, "user_id": 205608, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/61eE0.png?s=128&g=1", "display_name": "O. Jones", "link": "https://stackoverflow.com/users/205608/o-jones"}, "edited": false, "score": 3, "creation_date": 1557950601, "post_id": 56156794, "comment_id": 98942727, "body": "Please consider providing a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. And, please provide a more descriptive title. Please <a href=\"https://stackoverflow.com/posts/56156794/edit\">edit</a> your question."}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 3, "creation_date": 1557950757, "post_id": 56156794, "comment_id": 98942805, "body": "&quot;it didn&#39;t work&quot; is not specific enough. Please describe the issue as precisely as possible."}], "answers": [{"tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": false, "score": 0, "last_activity_date": 1557956759, "creation_date": 1557956759, "answer_id": 56158059, "question_id": 56156794, "link": "https://stackoverflow.com/questions/56156794/how-do-i-overwrite-and-rewrite-text-in-python-turtle/56158059#56158059", "title": "How do I overwrite and rewrite text in Python Turtle?", "body": "<p>There's a simpler way to go about this.  Rather than overwrite the text with a background-colored rectangle, we can use the <code>.clear()</code> (or <code>.undo()</code>) method of turtle to remove the text for us before we rewrite it anew: </p>\n\n<pre><code>from turtle import Screen, Turtle\nimport time\n\nFONT = ('terminal', 18, 'bold')\n\ndef changeap():\n    ap_pen.clear()\n    ap_pen.write(ap, font=FONT)\n\ndef changehp():\n    hp_pen.clear()\n    hp_pen.write(hp, font=FONT)\n\n# screen\nscreen = Screen()\nscreen.setup(1300, 650)\nscreen.bgcolor(\"green\")\nscreen.title(\"game\")\n\nhp = 100\nap = 10\n\n# menu\nmen_pen = Turtle(visible=False)\nmen_pen.speed('fastest')\nmen_pen.pensize(4)\n\nmen_pen.penup()\nmen_pen.setposition(-650, -200)\nmen_pen.pendown()\nmen_pen.fd(1300)\n\n# num changers\n# AP\nap_pen = Turtle(visible=False)\nap_pen.speed('fastest')\nap_pen.penup()\nap_pen.setposition(-560, -312)\n\n# HP\nhp_pen = Turtle(visible=False)\nhp_pen.speed('fastest')\nhp_pen.penup()\nhp_pen.setposition(-560, -265)\n\n# menu text\nmen_pen.penup()\nmen_pen.setposition(-625, -265)\nmen_pen.write(\"HP=\", True, font=FONT)\n\nhp_pen.write(hp, font=FONT)\n\nmen_pen.setposition(-625, -312)\nmen_pen.write(\"AP=\", True, font=FONT)\n\nap_pen.write(ap, font=FONT)\n\nmen_pen.setposition(-499, -240)\nmen_pen.write(\"William\", True, font=FONT)\n\nhp = 20\nap = 1000\n\ntime.sleep(5)\nchangeap()\ntime.sleep(5)\nchangehp()\n\nscreen.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 11466450, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2KEjswWcCvY/AAAAAAAAAAI/AAAAAAAAADw/o1KiPdBhzn8/photo.jpg?sz=128", "display_name": "bob in the bin", "link": "https://stackoverflow.com/users/11466450/bob-in-the-bin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 477, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1557956987, "creation_date": 1557950478, "last_edit_date": 1557956987, "question_id": 56156794, "link": "https://stackoverflow.com/questions/56156794/how-do-i-overwrite-and-rewrite-text-in-python-turtle", "title": "How do I overwrite and rewrite text in Python Turtle?", "body": "<p>The problem is in the <code>#num</code> comment changes, section.  It is supposed to draw a green box around the number, then write a new one in it's place.  First, I tested <code>#AP</code> and it worked perfectly.  So I added <code>#HP</code> but for some reason it didn't work and <code>#AP</code> stopped as well.  I got no error messages, and I looked though it but I couldn't see a problem.</p>\n\n<pre><code>import turtle\nimport winsound\nimport os\nimport time\n#screen\nwn = turtle.Screen()\nwn.bgcolor(\"green\")\nwn.title(\"game\")\nhp=100\nap=10\n\ndef song1():\n    winsound.PlaySound(\"sound1\", winsound.SND_FILENAME)\n\n\n#menu\ntime.sleep(2)\nmen_pen = turtle.Turtle()\nmen_pen.speed(0)\nmen_pen.color(\"black\")\nmen_pen.penup()\nmen_pen.setposition(-1000,-200)\nmen_pen.pensize(4)\nmen_pen.pendown()\nmen_pen.fd(2500)\n\n#menu text\nmen_pen.penup()\nmen_pen.setposition(-625,-265)\nmen_pen.pendown()\nmen_pen.write(\"HP=\",True,font=('terminal',18, 'bold'))\nmen_pen.penup()\nmen_pen.setposition(-560,-265)\nmen_pen.pendown()\nmen_pen.write(hp ,font=('terminal',18,'bold'))\nmen_pen.penup()\nmen_pen.setposition(-625,-312)\nmen_pen.pendown()\nmen_pen.write(\"AP=\",True,font=('terminal',18,'bold'))\nmen_pen.penup()\nmen_pen.setposition(-560,-312)\nmen_pen.write(ap ,font=('terminal',18,'bold'))\nmen_pen.penup()\nmen_pen.setposition(-499,-240)\nmen_pen.pendown()\nmen_pen.write(\"William\" ,True,font=('terminal',20,'bold'))\n\n#num changers\n#AP\nap1= turtle.Turtle()\nap1.speed(0)\nap1.penup()\nap1.color(\"green\")\nap1.penup()\nap1.setposition(-559,-311)\nap1.pendown()\ndef changeap():\n    ap1.down()\n    ap1.begin_fill()\n    for i in range(4):\n        ap1.penup()\n        ap1.fd(36)\n        ap1.left(90)\n    ap1.color(\"green\")\n    ap1.end_fill()\n    ap1.pendown()\n    men_pen.penup()\n    men_pen.setposition(-560,-312)\n\n    men_pen.write(ap ,font=('terminal',18,'bold'))\n    men_pen.penup()\n\n#HP\nhp2=turtle.Turtle()\nhp2.speed(0)\nhp2.penup()\nhp2.color(\"green\")\nhp2.setposition(-561,-314)\nhp2.pendown()\n\ndef changehp():\n    hp2.down()\n    hp2.begin_fill()\n    for i in range(4):\n        hp2.fd(50)\n        hp2.left(90)\n    hp2.color(\"green\")\n    hp2.end_fill()\n    hp2.pendown()\n    men_pen.penup()\n    men_pen.setposition(-560,-312)\n    men_pen.pendown()\n    men_pen.write(ap , font=('Terminal',18,'bold'))\n\n\n\n\nhp = 20\nap = 1000\ntime.sleep(5)\nchangeap()\ntime.sleep(5)\nchangehp()\n</code></pre>\n"}, {"tags": ["python", "list", "performance"], "comments": [{"owner": {"reputation": 386, "user_id": 1536235, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/ye5mV.jpg?s=128&g=1", "display_name": "blasrodri", "link": "https://stackoverflow.com/users/1536235/blasrodri"}, "edited": false, "score": 2, "creation_date": 1557950499, "post_id": 56156741, "comment_id": 98942695, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/28748520/creating-random-pairs-from-lists\">Creating random pairs from lists</a>"}, {"owner": {"reputation": 743, "user_id": 1902610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8488ba030c54603c82505eb8cad058fa?s=128&d=identicon&r=PG", "display_name": "oezguensi", "link": "https://stackoverflow.com/users/1902610/oezguensi"}, "reply_to_user": {"reputation": 386, "user_id": 1536235, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/ye5mV.jpg?s=128&g=1", "display_name": "blasrodri", "link": "https://stackoverflow.com/users/1536235/blasrodri"}, "edited": false, "score": 0, "creation_date": 1557950952, "post_id": 56156741, "comment_id": 98942872, "body": "I was more interested in the performance part. I will edit the title. Thanks for showing the other question."}, {"owner": {"reputation": 74809, "user_id": 9698684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hj2XY.jpg?s=128&g=1", "display_name": "yatu", "link": "https://stackoverflow.com/users/9698684/yatu"}, "edited": false, "score": 1, "creation_date": 1557951792, "post_id": 56156741, "comment_id": 98943207, "body": "Don&#39;t forget you can upvote all answers here if you found them useful :) @oezguensi"}, {"owner": {"reputation": 743, "user_id": 1902610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8488ba030c54603c82505eb8cad058fa?s=128&d=identicon&r=PG", "display_name": "oezguensi", "link": "https://stackoverflow.com/users/1902610/oezguensi"}, "edited": false, "score": 0, "creation_date": 1557957572, "post_id": 56156741, "comment_id": 98945226, "body": "dont get the upvote though? it isn&#39;t a duplicate regarding the performance side."}], "answers": [{"comments": [{"owner": {"reputation": 743, "user_id": 1902610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8488ba030c54603c82505eb8cad058fa?s=128&d=identicon&r=PG", "display_name": "oezguensi", "link": "https://stackoverflow.com/users/1902610/oezguensi"}, "edited": false, "score": 0, "creation_date": 1557951633, "post_id": 56156807, "comment_id": 98943137, "body": "I was also testing the speed of the answer and can confirm. Thanks for the effort"}, {"owner": {"reputation": 74809, "user_id": 9698684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hj2XY.jpg?s=128&g=1", "display_name": "yatu", "link": "https://stackoverflow.com/users/9698684/yatu"}, "edited": false, "score": 0, "creation_date": 1557951735, "post_id": 56156807, "comment_id": 98943183, "body": "For a seq of length 1e4, running 10 times faster using numpy, compared with d"}], "tags": [], "owner": {"reputation": 1609, "user_id": 9028015, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CsPp0.jpg?s=128&g=1", "display_name": "Mason Caiby", "link": "https://stackoverflow.com/users/9028015/mason-caiby"}, "is_accepted": true, "score": 3, "last_activity_date": 1557951393, "last_edit_date": 1557951393, "creation_date": 1557950550, "answer_id": 56156807, "question_id": 56156741, "link": "https://stackoverflow.com/questions/56156741/efficiently-pair-random-elements-of-list/56156807#56156807", "title": "Efficiently pair random elements of list", "body": "<p>I would say this is the most pythonic way of handling it:</p>\n\n<pre><code>foo = ['a', 'b', 'c', 'd', 'e', 'f']\nrandom.shuffle(foo)\nlength = len(foo)//2\nresult = list(zip(foo[:length], foo[length:]))\n</code></pre>\n\n<p>Zip will combine the elements at the same index of multiple lists and stop when one list runs out of elements. So you're going to to shuffle the list, and take the first and 2nd half of the list, then combine them element wise until the shorter one runs out of elements.</p>\n\n<p>Edit: you said you were interested in the performance of different ways of handling it. I made a function for each of the unique answers here and timed them:</p>\n\n<pre><code>def a(foo):\n    random.shuffle(foo)\n    length = len(foo)//2\n    return list(zip(foo[:length], foo[length:]))\n\ndef b(foo):\n    random.shuffle(foo)\n    return [[foo[i], foo[i+1]] for i in range(0, len(foo)-(len(foo)%2), 2)]\n\ndef c(foo):\n    np.random.shuffle(foo)\n    return foo[:len(foo)-(len(foo)%2)].reshape(2,-1)\n\ndef d(foo):\n    result = []\n    for i in range(1, len(foo), 2):\n        result.append([foo[i-1], foo[i]])\n    return result\n\ndef e(foo):\n    el_pairs = []\n    while len(foo) &gt; 1:\n         pair_idxs = np.sort(np.random.choice(range(len(foo)), 2, replace=False))\n         el_pair = [foo.pop(pair_idxs[0]), foo.pop(pair_idxs[1] - 1)]\n         el_pairs.append(el_pair)\n    return el_pairs\n\ndef f(foo):\n    random.shuffle(foo)\n    length = len(foo)//2\n    return zip(foo[:length], foo[length:])\n</code></pre>\n\n<p>Zip without list:</p>\n\n<pre><code>%timeit f(foo)\n3.96 \u00b5s \u00b1 12.9 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n</code></pre>\n\n<p>Zip:</p>\n\n<pre><code>%timeit a(foo)\n4.36 \u00b5s \u00b1 156 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n</code></pre>\n\n<p>List comprehension:</p>\n\n<pre><code>%timeit b(foo)\n4.38 \u00b5s \u00b1 22.1 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n</code></pre>\n\n<p>For loop:</p>\n\n<pre><code>%timeit d(foo)\n812 ns \u00b1 5.68 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\n</code></pre>\n\n<p>Original:</p>\n\n<pre><code>%timeit e(foo)\n154 ns \u00b1 1.11 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000000 loops each)\n</code></pre>\n\n<p>The numpy answer given didn't run out of box for me.</p>\n"}, {"tags": [], "owner": {"reputation": 7749, "user_id": 4046632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43e6a87a176719c607a2a73ce6728d88?s=128&d=identicon&r=PG&f=1", "display_name": "buran", "link": "https://stackoverflow.com/users/4046632/buran"}, "is_accepted": false, "score": 1, "last_activity_date": 1557950592, "creation_date": 1557950592, "answer_id": 56156815, "question_id": 56156741, "link": "https://stackoverflow.com/questions/56156741/efficiently-pair-random-elements-of-list/56156815#56156815", "title": "Efficiently pair random elements of list", "body": "<pre><code>&gt;&gt;&gt; import random\n&gt;&gt;&gt; foo = ['a', 'b', 'c', 'd', 'e']\n&gt;&gt;&gt; random.shuffle(foo)\n&gt;&gt;&gt; bar = list(zip(foo[::2], foo[1::2]))\n&gt;&gt;&gt; bar\n[('e', 'd'), ('c', 'a')]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5994, "user_id": 5710637, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TAM5l.jpg?s=128&g=1", "display_name": "fafl", "link": "https://stackoverflow.com/users/5710637/fafl"}, "is_accepted": false, "score": 1, "last_activity_date": 1557950662, "creation_date": 1557950662, "answer_id": 56156835, "question_id": 56156741, "link": "https://stackoverflow.com/questions/56156741/efficiently-pair-random-elements-of-list/56156835#56156835", "title": "Efficiently pair random elements of list", "body": "<p>Try this:</p>\n\n<pre><code>from random import shuffle\n\nfoo = ['a', 'b', 'c', 'd', 'e']\nshuffle(foo)\n\nresult = []\nfor i in range(1, len(foo), 2):\n  result.append([foo[i-1], foo[i]])\n\nprint(result)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 187400, "user_id": 43089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cbdcba7870660c048cf9d6db74a3ef29?s=128&d=identicon&r=PG", "display_name": "Triptych", "link": "https://stackoverflow.com/users/43089/triptych"}, "is_accepted": false, "score": 1, "last_activity_date": 1557951476, "creation_date": 1557951476, "answer_id": 56157013, "question_id": 56156741, "link": "https://stackoverflow.com/questions/56156741/efficiently-pair-random-elements-of-list/56157013#56157013", "title": "Efficiently pair random elements of list", "body": "<pre><code>import random\nimport string\n\ndef random_pairs(x):\n  random.shuffle(x)\n  return zip(*(2 * [iter(x)]))\n\n# Shuffling in place.\narray = list(string.lowercase) # a-z\nprint list(random_pairs(array))\n\n# Not Shuffling in place.\narray = list(string.uppercase) # A-Z\npairs = random_pairs(range(len(array)))\nprint map(lambda pair: map (lambda i: array[i], pair), pairs)\n</code></pre>\n"}], "owner": {"reputation": 743, "user_id": 1902610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8488ba030c54603c82505eb8cad058fa?s=128&d=identicon&r=PG", "display_name": "oezguensi", "link": "https://stackoverflow.com/users/1902610/oezguensi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 56156807, "answer_count": 4, "score": -1, "last_activity_date": 1557952076, "creation_date": 1557950227, "last_edit_date": 1557950981, "question_id": 56156741, "link": "https://stackoverflow.com/questions/56156741/efficiently-pair-random-elements-of-list", "title": "Efficiently pair random elements of list", "body": "<p>I have a list of <code>n</code> elements say: <code>foo = ['a', 'b', 'c', 'd', 'e']</code>\nI would like to randomly pair elements of this list to receive for example:\n<code>bar = [['a', 'c'], ['b', 'e']]</code> where the last element will be discarded if the length of the list is not even.</p>\n\n<p>Right now, I have a brute force function:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def rnd_pair(foo):\n    while len(foo) &gt; 1:\n         pair_idxs = np.sort(np.random.choice(range(len(foo)), 2, replace=False))\n         el_pair = [foo.pop(pair_idxs[0]), foo.pop(pair_idxs[1] - 1)]\n\n         el_pairs.append(el_pair)\n\n</code></pre>\n\n<p>This is not really efficient. Also I don't like changing the list in-place. Any ideas on a more efficient way? Thanks in advance.</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1557950679, "post_id": 56156706, "comment_id": 98942769, "body": "Just don&#39;t use a <code>numpy</code> array of objects, use a vanilla Python <code>list</code>, that would be the better way."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1557958281, "post_id": 56156706, "comment_id": 98945405, "body": "I&#39;ve used <code>np.frompyfunc</code> in the same way to create and access object elements.  <code>np.vectorize</code> uses it, but with more overhead.  It returns an array of objects.  Object dtype arrays contain pointers to the objects, much like lists.  Most of the fast compile numpy methods don&#39;t apply."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1557960400, "post_id": 56156706, "comment_id": 98945889, "body": "<code>np.frompyfunc(lambda x,y: x.calculate(y), 2,1)(inA, inB)</code> might work for the pairwise.  You can even get a cartesian application if <code>inA</code> and <code>inB</code> broadcast appropriately (one is (n,1) the other (m,) shaped)."}], "answers": [{"tags": [], "owner": {"reputation": 1459, "user_id": 2302262, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/Z6iVa.jpg?s=128&g=1", "display_name": "ElRudi", "link": "https://stackoverflow.com/users/2302262/elrudi"}, "is_accepted": true, "score": 1, "last_activity_date": 1558863043, "creation_date": 1558863043, "answer_id": 56312288, "question_id": 56156706, "link": "https://stackoverflow.com/questions/56156706/efficiently-elegantly-apply-a-method-to-or-get-property-from-numpy-ndarray-of/56312288#56312288", "title": "Efficiently/elegantly apply a method to, or get property from, numpy ndarray of objects", "body": "<p>For applying a method, I found I can do</p>\n\n<pre><code>outA = np.vectorize(className.calculate)(inA)\n</code></pre>\n\n<p>and for the paiwise application of a method, I found that I can do</p>\n\n<pre><code>out = np.vectorize(className.calculate)(inA, inB)\n</code></pre>\n\n<p>as the first argument of the methods is <code>self</code>.</p>\n\n<p>Especially for the latter, this is <em>a lot</em> cleaner.</p>\n\n<p>I haven't found a way to ge the property without a <code>lambda</code> function, I guess this</p>\n\n<pre><code>outA = np.vectorize(lambda x: x.size)(inA)\n</code></pre>\n\n<p>is the easiest/best way to do it in a oneliner.</p>\n"}], "owner": {"reputation": 1459, "user_id": 2302262, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/Z6iVa.jpg?s=128&g=1", "display_name": "ElRudi", "link": "https://stackoverflow.com/users/2302262/elrudi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 1, "accepted_answer_id": 56312288, "answer_count": 1, "score": 2, "last_activity_date": 1558863043, "creation_date": 1557950012, "last_edit_date": 1557951130, "question_id": 56156706, "link": "https://stackoverflow.com/questions/56156706/efficiently-elegantly-apply-a-method-to-or-get-property-from-numpy-ndarray-of", "title": "Efficiently/elegantly apply a method to, or get property from, numpy ndarray of objects", "body": "<p>In a <code>python</code> script, have 2 <code>numpy</code> ndarrays filled with objects, let's call them <code>inA</code> and <code>inB</code> (same <code>shape</code>). The objects are all of the same type and have a method <code>calculate()</code> and a property <code>size</code>. </p>\n\n<p><strong>I'd like to apply the method to each, and save the result in a new array, and I'd also like to get the property from each element and save the result in a new array.</strong></p>\n\n<p><em>Note: I have found ways to achieve all of this, but I think they could be improved. I just don't know how.</em></p>\n\n<h3>Getting property or applying method without arguments</h3>\n\n<p>If the method takes no arguments, or non-array arguments, I have found a way to apply it to each element, like so:</p>\n\n<pre><code>f = lambda x: x.calculate()\noutA = np.vectorize(f)(inA)\n</code></pre>\n\n<p>The same goes for getting the property:</p>\n\n<pre><code>f = lambda x: x.size\noutA = np.vectorize(f)(inA)\n</code></pre>\n\n<p>This is working, but it's ugly (imho), and the fact that <code>x</code> in the lambda function is unknown to the IDE makes me having to write the function 'blindly', without help from intellisense (or it's Spyder equivalent).</p>\n\n<h3>Pairwise application of method</h3>\n\n<p>If the method takes another object as its argument, and I'd like to apply it to each element in <code>inA</code> and use the corresponding element in <code>inB</code> as its argument, the only thing I can come up with is a dreaded loop:</p>\n\n<pre><code>out = np.ndarray(inA.shape)\nfor index, iA in np.ndenumerate(inA):\n    out[index] = iA.calculate(inB[index])\n</code></pre>\n\n<p>I refuse to believe there is no better way to achieve this.</p>\n\n<p>Hence my question: <strong>is there a way to improve on these two methods</strong> (no pun intended) <strong>of applying a method to elements or pairs of elements in an ndarray?</strong></p>\n"}, {"tags": ["python", "numpy", "installation", "pip"], "comments": [{"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1557964123, "post_id": 56156677, "comment_id": 98946593, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/52138069/cmd-pip-displaying-errors-whenever-i-try-to-install-pygame\">cmd pip displaying errors whenever I try to install pygame</a>"}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1557964139, "post_id": 56156677, "comment_id": 98946597, "body": "<a href=\"https://stackoverflow.com/search?q=%5Bpip%5D+EnvironmentError%3A+WinError+5+Access+is+denied\">stackoverflow.com/&hellip;</a>"}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1557964175, "post_id": 56156677, "comment_id": 98946609, "body": "Either open a cmd line with Adminstrator permissions, or use Python virtual environments, or run <code>pip install --user</code>."}], "answers": [{"tags": [], "owner": {"reputation": 777, "user_id": 5268612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GJ6Xb.png?s=128&g=1", "display_name": "Aly Hosny", "link": "https://stackoverflow.com/users/5268612/aly-hosny"}, "is_accepted": false, "score": 1, "last_activity_date": 1557953026, "creation_date": 1557953026, "answer_id": 56157351, "question_id": 56156677, "link": "https://stackoverflow.com/questions/56156677/i-cant-install-numpy-in-win-10/56157351#56157351", "title": "i can&#39;t install numpy in win 10", "body": "<p>Try running cmd as administrator</p>\n"}], "owner": {"reputation": 1, "user_id": 11506230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38c494dd0f8594f78c9c9258557ab639?s=128&d=identicon&r=PG&f=1", "display_name": "Hamed", "link": "https://stackoverflow.com/users/11506230/hamed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1600551817, "creation_date": 1557949907, "last_edit_date": 1600551817, "question_id": 56156677, "link": "https://stackoverflow.com/questions/56156677/i-cant-install-numpy-in-win-10", "title": "i can&#39;t install numpy in win 10", "body": "<p>when I install numpy (pip install numpy) with CMD I encounter with this error!</p>\n\n<p>My win is 10. version of pyyhon is 3.7.3</p>\n\n<pre><code>pip install numpy\n\nC:\\Users\\Hamed&gt;pip3 install numpy\nCollecting numpy\n  Using cached https://files.pythonhosted.org/packages/4e/9d/c129d78e6b942303b762ccfdf1f8339de80c5e6021b14ef0c99ec5bdc6aa/numpy-1.16.3-cp37-cp37m-win_amd64.whl\nInstalling collected packages: numpy\nCould not install packages due to an EnvironmentError: [WinError 5] Access is denied: 'c:\\\\program files\\\\python37\\\\Lib\\\\site-packages\\\\numpy'\nConsider using the `--user` option or check the permissions.\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "list", "dictionary"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1557950347, "post_id": 56156674, "comment_id": 98942636, "body": "This is not quite clear.  Are you guaranteed that all <code>n!</code> possibilities will be included?  If not, what are the necessary conditions for removing a combination, as you&#39;ve done with 2-3.  If the cluster is 1234, what is the desired output?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1557950390, "post_id": 56156674, "comment_id": 98942651, "body": "Why is this being handled in a dict format?  I would think that the easy solution would be to makes sets of the cluster closures, and then simply generate the MST (minimum spanning tree) from that."}, {"owner": {"reputation": 524, "user_id": 7565335, "user_type": "registered", "profile_image": "https://graph.facebook.com/10202817259030121/picture?type=large", "display_name": "Ond\u0159ej \u0160ev\u010d&#237;k", "link": "https://stackoverflow.com/users/7565335/ond%c5%99ej-%c5%a0ev%c4%8d%c3%adk"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1557951099, "post_id": 56156674, "comment_id": 98942926, "body": "@Prune if it is all combination of 1234 then desired output is 12, 13, 14 Unfortunately, I am just working with the data that were passed in the script. I can control the format but only if I convert it manually."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1557952417, "post_id": 56156674, "comment_id": 98943470, "body": "I still have an open question on the completeness.  For example, if 7-8-9 is a cluster, will we have all 6 pairs in the given dict?"}, {"owner": {"reputation": 524, "user_id": 7565335, "user_type": "registered", "profile_image": "https://graph.facebook.com/10202817259030121/picture?type=large", "display_name": "Ond\u0159ej \u0160ev\u010d&#237;k", "link": "https://stackoverflow.com/users/7565335/ond%c5%99ej-%c5%a0ev%c4%8d%c3%adk"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1557953606, "post_id": 56156674, "comment_id": 98943927, "body": "@Prune yes, 78, 79, 87, 89, 97, 98 and the result should be 78, 79 (or 87, 89 or 97, 98, it really doesn&#39;t matter which one is selected as the &#39;main&#39;)"}], "answers": [{"comments": [{"owner": {"reputation": 524, "user_id": 7565335, "user_type": "registered", "profile_image": "https://graph.facebook.com/10202817259030121/picture?type=large", "display_name": "Ond\u0159ej \u0160ev\u010d&#237;k", "link": "https://stackoverflow.com/users/7565335/ond%c5%99ej-%c5%a0ev%c4%8d%c3%adk"}, "edited": false, "score": 0, "creation_date": 1557952209, "post_id": 56156865, "comment_id": 98943385, "body": "Yes it is right, but there is still extra 3-2 in results."}, {"owner": {"reputation": 18194, "user_id": 1513933, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/0ozBK.jpg?s=128&g=1", "display_name": "Laurent LAPORTE", "link": "https://stackoverflow.com/users/1513933/laurent-laporte"}, "reply_to_user": {"reputation": 524, "user_id": 7565335, "user_type": "registered", "profile_image": "https://graph.facebook.com/10202817259030121/picture?type=large", "display_name": "Ond\u0159ej \u0160ev\u010d&#237;k", "link": "https://stackoverflow.com/users/7565335/ond%c5%99ej-%c5%a0ev%c4%8d%c3%adk"}, "edited": false, "score": 0, "creation_date": 1557952263, "post_id": 56156865, "comment_id": 98943406, "body": "@Ond\u0159ej\u0160ev\u010d&#237;k, can you explain further? I don&#39;t understand why."}, {"owner": {"reputation": 524, "user_id": 7565335, "user_type": "registered", "profile_image": "https://graph.facebook.com/10202817259030121/picture?type=large", "display_name": "Ond\u0159ej \u0160ev\u010d&#237;k", "link": "https://stackoverflow.com/users/7565335/ond%c5%99ej-%c5%a0ev%c4%8d%c3%adk"}, "edited": false, "score": 0, "creation_date": 1557952508, "post_id": 56156865, "comment_id": 98943515, "body": "@LaurentLAPORTE because I pass this data to visualisation script that I can&#39;t change and it makes visualisation wrong if it is in there."}], "tags": [], "owner": {"reputation": 18194, "user_id": 1513933, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/0ozBK.jpg?s=128&g=1", "display_name": "Laurent LAPORTE", "link": "https://stackoverflow.com/users/1513933/laurent-laporte"}, "is_accepted": false, "score": 0, "last_activity_date": 1557950782, "creation_date": 1557950782, "answer_id": 56156865, "question_id": 56156674, "link": "https://stackoverflow.com/questions/56156674/filter-unique-combination-in-the-list-of-dictionaries/56156865#56156865", "title": "Filter unique combination in the list of dictionaries", "body": "<p>Not sure, but here is what I understood:</p>\n\n<p>two items <em>i</em> and <em>j</em> from <em>results</em> are considered equal if:</p>\n\n<ul>\n<li>(<code>i['name00'] == j['name00']</code> and <code>i['name01'] == j['name01']</code>) or</li>\n<li>(<code>i['name01'] == j['name00']</code> and <code>i['name00'] == j['name01']</code>).</li>\n</ul>\n\n<p>Is it right?</p>\n\n<p>In that case, you can define a key which compares the values 'name00'/'name01' by sorting them, then use that key to store all the items in a dictionary to eliminate duplicates.</p>\n\n<p>For instance:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def key(item):\n    return frozenset([item['name00'], item['name01']])\n\n\nby_key = {key(item): item for item in results}\n\npprint.pprint(sorted(by_key.values()))\n</code></pre>\n\n<p>You get:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>[{'name00': 'test2', 'name01': 'test1'},\n {'name00': 'test3', 'name01': 'test1'},\n {'name00': 'test3', 'name01': 'test2'},\n {'name00': 'test5', 'name01': 'test4'}]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 1, "last_activity_date": 1557958523, "creation_date": 1557958523, "answer_id": 56158347, "question_id": 56156674, "link": "https://stackoverflow.com/questions/56156674/filter-unique-combination-in-the-list-of-dictionaries/56158347#56158347", "title": "Filter unique combination in the list of dictionaries", "body": "<p>With all of the pairs appearing in the list, the implementation should be simple enough.</p>\n\n<p>Sort the list.  The \"lower\" labels will come to the front.  In particular, the first entry will be a viable main element.  Put every such link into the results list, keeping track of the second elements.  Then pass over the links starting with \"other\" names.  Repeat this until you've covered the entire original list.  Here's a painfully detailed version:</p>\n\n<pre><code>start = [\n    { 'name00': 'test1', 'name01': 'test2' },\n    { 'name00': 'test1', 'name01': 'test3' },\n    { 'name00': 'test2', 'name01': 'test1' },\n    { 'name00': 'test2', 'name01': 'test3' },\n    { 'name00': 'test3', 'name01': 'test1' },\n    { 'name00': 'test3', 'name01': 'test2' },\n    { 'name00': 'test4', 'name01': 'test5' },\n    { 'name00': 'test5', 'name01': 'test4' }\n]\n\nresult = []\n\nstart.sort(key=lambda link: link[\"name00\"]+link[\"name01\"]) \n\nfor link in start:\n    print(link)\n\nlink_key = None\npos = 0\nwhile pos &lt; len(start):\n\n    other_name = []\n\n    link = start[pos]\n    if not link_key:\n        link_key = link['name00']\n\n    # Gather all of the links that start with the lowest name.\n    # Keep track of the other names for later use.\n    while start[pos]['name00'] == link_key:\n        link = start[pos]\n        result.append(link)\n        other_name.append(link[\"name01\"])\n        pos += 1\n\n    # Now is \"later\" ... ignore all links that start with other names.\n    while pos &lt; len(start) and              \\\n          start[pos]['name00'] in other_name:\n        link = start[pos]\n        pos += 1\n\n    link_key = None\n\n\n# Print the resulting pairs\nfor link in result:\n    print(link[\"name00\"], link[\"name01\"])\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>test1 test2\ntest1 test3\ntest4 test5\n</code></pre>\n"}], "owner": {"reputation": 524, "user_id": 7565335, "user_type": "registered", "profile_image": "https://graph.facebook.com/10202817259030121/picture?type=large", "display_name": "Ond\u0159ej \u0160ev\u010d&#237;k", "link": "https://stackoverflow.com/users/7565335/ond%c5%99ej-%c5%a0ev%c4%8d%c3%adk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1557958523, "creation_date": 1557949883, "last_edit_date": 1557953619, "question_id": 56156674, "link": "https://stackoverflow.com/questions/56156674/filter-unique-combination-in-the-list-of-dictionaries", "title": "Filter unique combination in the list of dictionaries", "body": "<p>So, I got list full of dictionaries where I have two names (name00 and name01). These are names of linked clusters and there are always all combinations available. Combinations can be created from 2 or more clusters and there can be more combinations available in results variable.</p>\n\n<p>In this example I have linked cluster with 3 different names (1,2,3) and with 2 different names (4,5) but it can be much more.</p>\n\n<p>I need to filter the results so I get only unique combination (of name00 and name01 both ways) and only for one of the clusters. For example, we can throw away combination of test2-test3 in the example if test1 is selected as main.</p>\n\n<p>I hope the example will make it clear.</p>\n\n<pre><code>results = [\n{ 'name00': 'test1', 'name01': 'test2' },\n{ 'name00': 'test1', 'name01': 'test3' },\n{ 'name00': 'test2', 'name01': 'test1' },\n{ 'name00': 'test2', 'name01': 'test3' },\n{ 'name00': 'test3', 'name01': 'test1' },\n{ 'name00': 'test3', 'name01': 'test2' },\n{ 'name00': 'test4', 'name01': 'test5' },\n{ 'name00': 'test5', 'name01': 'test4' }\n]\n\n# Desired result\n\nresults = [\n{ 'name00': 'test1', 'name01': 'test2' },\n{ 'name00': 'test1', 'name01': 'test3' },\n{ 'name00': 'test4', 'name01': 'test5' }\n]\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "keras", "tensorflow-model-analysis"], "answers": [{"tags": [], "owner": {"reputation": 3400, "user_id": 6901690, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/d9QRH.png?s=128&g=1", "display_name": "razimbres", "link": "https://stackoverflow.com/users/6901690/razimbres"}, "is_accepted": true, "score": 0, "last_activity_date": 1558035075, "creation_date": 1558035075, "answer_id": 56175439, "question_id": 56156646, "link": "https://stackoverflow.com/questions/56156646/keras-tensorflow-model-optimization-typeerror-clone-model-got-an-unexpecte/56175439#56175439", "title": "Keras + Tensorflow Model Optimization: TypeError: clone_model() got an unexpected keyword argument &#39;clone_function&#39;", "body": "<p>I found the answer. There is a tricky workaround: besides fixing the code to:</p>\n\n<pre><code>from tensorflow_model_optimization.sparsity import keras as sparsity\n\npruning_params = {\n      'pruning_schedule': sparsity.PolynomialDecay(initial_sparsity=0.50,\n                                                   final_sparsity=0.90,\n                                                   begin_step=3,\n                                                   end_step=end_step,\n                                                   frequency=100)\n}\n\npruned_model = tf.keras.Sequential([\n    sparsity.prune_low_magnitude(\n        l.Conv2D(32, 5, padding='same', activation='relu'),\n        input_shape=input_shape,\n        **pruning_params),\n    l.MaxPooling2D((2, 2), (2, 2), padding='same'),\n    l.BatchNormalization(),\n    sparsity.prune_low_magnitude(\n        l.Conv2D(64, 5, padding='same', activation='relu'), **pruning_params),\n    l.MaxPooling2D((2, 2), (2, 2), padding='same'),\n    l.Flatten(),\n    sparsity.prune_low_magnitude(l.Dense(1024, activation='relu'),\n                                 **pruning_params),\n    l.Dropout(0.4),\n    sparsity.prune_low_magnitude(l.Dense(num_classes, activation='softmax'),\n                                 **pruning_params)\n])\n</code></pre>\n\n<p>... I had to restart Jupyter kernel to get rid of further errors, like <code>Conv2D has no attribute 'kernel'</code>, as seen at GitHub:</p>\n\n<p><a href=\"https://github.com/tensorflow/tensorflow/issues/18304\" rel=\"nofollow noreferrer\">tf.enable_eager_execution must be called at program startup. #18304</a></p>\n"}], "owner": {"reputation": 3400, "user_id": 6901690, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/d9QRH.png?s=128&g=1", "display_name": "razimbres", "link": "https://stackoverflow.com/users/6901690/razimbres"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2174, "favorite_count": 0, "accepted_answer_id": 56175439, "answer_count": 1, "score": 2, "last_activity_date": 1558035075, "creation_date": 1557949757, "question_id": 56156646, "link": "https://stackoverflow.com/questions/56156646/keras-tensorflow-model-optimization-typeerror-clone-model-got-an-unexpecte", "title": "Keras + Tensorflow Model Optimization: TypeError: clone_model() got an unexpected keyword argument &#39;clone_function&#39;", "body": "<p>I'm trying Tensorflow Model Optimization in order to prune a simple Neural Network. Here's my code:</p>\n\n<pre><code>from __future__ import absolute_import, division, print_function, unicode_literals, unicode_literals\nimport tensorflow as tf\nfrom tensorflow import keras\nimport numpy as np\nimport matplotlib.pyplot as plt\n\nfashion_mnist = keras.datasets.fashion_mnist\n\n(train_images, train_labels), (test_images, test_labels) = fashion_mnist.load_data()\n\nclass_names = ['T-shirt/top', 'Trouser', 'Pullover', 'Dress', 'Coat',\n               'Sandal', 'Shirt', 'Sneaker', 'Bag', 'Ankle boot']\n\ntrain_images = train_images / 255.0\ntest_images = test_images / 255.0\n\nmodel = keras.Sequential([\n    keras.layers.Flatten(input_shape=(28, 28)),\n    keras.layers.Dense(128, activation=tf.nn.relu),\n    keras.layers.Dense(10, activation=tf.nn.softmax)\n])\n\nimport tensorflow_model_optimization as tfmot\n\n\npruning_schedule = tfmot.sparsity.keras.PolynomialDecay(\n                        initial_sparsity=0.0, final_sparsity=0.5,\n                        begin_step=2000, end_step=4000)\n\nmodel_for_pruning = tfmot.sparsity.keras.prune_low_magnitude(model, pruning_schedule=pruning_schedule)\n\n\nmodel_for_pruning.compile(optimizer='adam',\n          loss='sparse_categorical_crossentropy',\n          metrics=['accuracy'])\n\nfrom tensorflow.keras.callbacks import TensorBoard\n\n\ntensorboard=TensorBoard(log_dir='D:\\Python\\logs', histogram_freq=0,  \n          write_graph=True, write_images=True)\n\nmodel_for_pruning.fit(train_images, train_labels, epochs=5,callbacks=tensorboard)\n\n\n#tensorboard --logdir D:\\Python\\logs \n</code></pre>\n\n<p>I'm getting the following error:</p>\n\n<pre><code>File \"&lt;ipython-input-1-8f75575649d2&gt;\", line 52, in &lt;module&gt;\n    model_for_pruning = tfmot.sparsity.keras.prune_low_magnitude(model, pruning_schedule=pruning_schedule)\n\n  File \"C:\\Users\\Rubens\\Anaconda3\\lib\\site-packages\\tensorflow_model_optimization\\python\\core\\sparsity\\keras\\prune.py\", line 152, in prune_low_magnitude\n    to_prune, input_tensors=None, clone_function=_add_pruning_wrapper)\n\nTypeError: clone_model() got an unexpected keyword argument 'clone_function'\n</code></pre>\n\n<p>That is, <code>clone function</code> does not belong to Keras' file <code>models.py</code>. I tried to add <code>**kwargs</code> to it, without success:</p>\n\n<pre><code>def clone_model(model, input_tensors=None,**kwargs):\n\"\"\"Clone any `Model` instance.\n\nModel cloning is similar to calling a model on new inputs,\nexcept that it creates new layers (and thus new weights) instead\nof sharing the weights of the existing layers.\n\n# Arguments\n    model: Instance of `Model`\n        (could be a functional model or a Sequential model).\n    input_tensors: optional list of input tensors\n        to build the model upon. If not provided,\n        placeholders will be created.\n\n# Returns\n    An instance of `Model` reproducing the behavior\n    of the original model, on top of new inputs tensors,\n    using newly instantiated weights.\n\n# Raises\n    ValueError: in case of invalid `model` argument value.\n\"\"\"\nif isinstance(model, Sequential):\n    return _clone_sequential_model(model, input_tensors=input_tensors)\nelse:\n    return _clone_functional_model(model, input_tensors=input_tensors)\n</code></pre>\n\n<p>This is the end of file <code>prune.py</code>, belonging to Tensorflow Model Optimization (notice <code>clone_function=_strip_pruning_wrapper</code>):</p>\n\n<pre><code>  def _strip_pruning_wrapper(layer):\n    if isinstance(layer, pruning_wrapper.PruneLowMagnitude):\n      # The _batch_input_shape attribute in the first layer makes a Sequential\n      # model to be built. This makes sure that when we remove the wrapper from\n      # the first layer the model's built state preserves.\n      if not hasattr(layer.layer, '_batch_input_shape') and hasattr(\n          layer, '_batch_input_shape'):\n        layer.layer._batch_input_shape = layer._batch_input_shape\n      return layer.layer\n    return layer\n\n  return keras.models.clone_model(\n      model, input_tensors=None, clone_function=_strip_pruning_wrapper)\n</code></pre>\n\n<p>All libraries included are up-to-date. Any ideas on how to overcome this error ?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["python", "selenium", "selenium-webdriver", "wait", "expected-condition"], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 7431961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b27b65ec8a9ab09281e26a7134e7ceb8?s=128&d=identicon&r=PG&f=1", "display_name": "Nicolas Pray", "link": "https://stackoverflow.com/users/7431961/nicolas-pray"}, "edited": false, "score": 0, "creation_date": 1558029841, "post_id": 56161682, "comment_id": 98975006, "body": "<code>WebDriverWait(driver, timeout).until(EC.presence_of_element_located((by, selector)))</code>  Is this what you mean?"}], "tags": [], "owner": {"reputation": 526, "user_id": 4322148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aq93O.jpg?s=128&g=1", "display_name": "Sparkle", "link": "https://stackoverflow.com/users/4322148/sparkle"}, "is_accepted": false, "score": 0, "last_activity_date": 1557986319, "creation_date": 1557986319, "answer_id": 56161682, "question_id": 56156641, "link": "https://stackoverflow.com/questions/56156641/ec-presence-of-element-located-not-and-webdriverwait-leads-to-other-element-wou/56161682#56161682", "title": "EC.presence_of_element_located not and WebDriverWait leads to &quot;Other element would receive the click: ...&quot; error in selenium for Python", "body": "<p>It looks like inside your waiter function you first look for element, then wait.</p>\n\n<pre><code>element_present = EC.presence_of_element_located((by, selector))\nWebDriverWait(driver, timeout).until(element_present)\n</code></pre>\n\n<p>Try swapping places and wait for element first.</p>\n"}], "owner": {"reputation": 19, "user_id": 7431961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b27b65ec8a9ab09281e26a7134e7ceb8?s=128&d=identicon&r=PG&f=1", "display_name": "Nicolas Pray", "link": "https://stackoverflow.com/users/7431961/nicolas-pray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1146, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557986319, "creation_date": 1557949745, "question_id": 56156641, "link": "https://stackoverflow.com/questions/56156641/ec-presence-of-element-located-not-and-webdriverwait-leads-to-other-element-wou", "title": "EC.presence_of_element_located not and WebDriverWait leads to &quot;Other element would receive the click: ...&quot; error in selenium for Python", "body": "<p>Navigating through web pages (<a href=\"https://www.hertz.com/rentacar/location\" rel=\"nofollow noreferrer\">https://www.hertz.com/rentacar/location</a>) rendered through JS. Putting <code>time.sleep(random.randint(5, 10))</code> leads to successful clicking of element, while my <code>waiter</code> function(shown below) leads to <code>Other element would receive the click:</code> error.</p>\n\n<p>The script scrapes every Hertz location in every city in every state in the United States successfully using the <code>time.sleep</code> before every selection and click but I believe this to be bad practice and because of the sleeps it takes numerous hours to complete.</p>\n\n<p>full error text:</p>\n\n<pre><code>selenium.common.exceptions.WebDriverException: Message: unknown error: \nElement &lt;a href=\"javascript: void(0);\" id=\"CO\" name=\"states\"&gt;...&lt;/a&gt; is not clickable at point (518, 9). Other element would receive the click: &lt;li&gt;...&lt;/li&gt;\n  (Session info: chrome=74.0.3729.157)\n  (Driver info: chromedriver=2.38.552522 (437e6fbedfa8762dec75e2c5b3ddb86763dc9dcb),platform=Windows NT 6.1.7601 SP1 x86_64)\n</code></pre>\n\n<p>element HTML (this happens on other similar elements)</p>\n\n<pre><code>&lt;li&gt;\n    &lt;a href=\"javascript: void(0);\" id=\"CO\" name=\"states\"&gt;\n        &lt;span class=\"icons-ft_arrow_right\"&gt;&lt;/span&gt; \n    Colorado\n    &lt;/a&gt;\n&lt;/li&gt;\n</code></pre>\n\n<p>In my <code>waiter</code> function, I have replaced <code>presence_of_element_located</code> with:\n<code>visibility_of_element_located</code>\n<code>element_to_be_clickable</code></p>\n\n<p>and received the same error.</p>\n\n<p>I have also tried</p>\n\n<p><code>.send_keys(selenium.webdriver.common.keys.Keys.SPACE)</code> </p>\n\n<p>instead of</p>\n\n<p><code>.click()</code></p>\n\n<p>to no avail</p>\n\n<p>here is my <code>waiter</code> function</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def waiter(driver, id=None, class_name=None, link_text=None, name=None, timeout=8):\n    if id is not None:\n        by = By.ID\n        selector = id\n\n    elif class_name is not None:\n        by = By.CLASS_NAME\n        selector = class_name\n\n    elif name is not None:\n        by = By.NAME\n        selector = name\n\n    else:\n        by = By.LINK_TEXT\n        selector = link_text\n    try:\n        element_present = EC.presence_of_element_located((by, selector))\n        WebDriverWait(driver, timeout).until(element_present)\n        return driver\n    except TimeoutException:\n        time.sleep(300)\n        driver.delete_all_cookies()\n        try:\n            element_present = EC.presence_of_element_located((by, selector))\n            WebDriverWait(driver, timeout).until(element_present)\n            return driver\n        except TimeoutException:\n            print(f\"Timed out waiting for {selector} to load\")\n            raise ValueError('Page is fucked?')\n</code></pre>\n\n<p>This works</p>\n\n<pre><code>    time.sleep(random.randint(5, 10))\n    directory_link = driver.find_element_by_class_name('ld-tab')\n    directory_link.click()\n</code></pre>\n\n<p>This does not</p>\n\n<pre><code>    waiter(driver, class_name='ld-tab')\n    directory_link = driver.find_element_by_class_name('ld-tab')\n    directory_link.click()\n</code></pre>\n\n<p>I would expect my waiter function to successfully make sure the element is clickable without the potential time wasting/unreliability of the sleep functions. Alas, no such reality.</p>\n"}, {"tags": ["python", "nfc"], "answers": [{"comments": [{"owner": {"reputation": 581, "user_id": 2622050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ht4WL.png?s=128&g=1", "display_name": "Stephen Tiedemann", "link": "https://stackoverflow.com/users/2622050/stephen-tiedemann"}, "edited": false, "score": 0, "creation_date": 1559903282, "post_id": 56177015, "comment_id": 99573915, "body": "The <code>format_tt?_tag</code> are called after general NDEF formatting was done. They evaluate tag type specific command line options from <code>tagtool.py format {tt1,tt2,tt3,tt4} [options]</code>. A <code>tagtool.py format</code> call only does NDEF formatting."}], "tags": [], "owner": {"reputation": 62, "user_id": 11506157, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-BXBPT3D4nT8/AAAAAAAAAAI/AAAAAAAAAaQ/3TkQSAProfQ/photo.jpg?sz=128", "display_name": "Michael", "link": "https://stackoverflow.com/users/11506157/michael"}, "is_accepted": false, "score": 0, "last_activity_date": 1558043241, "creation_date": 1558043241, "answer_id": 56177015, "question_id": 56156576, "link": "https://stackoverflow.com/questions/56156576/problems-working-with-desfire-ev1-tags-and-nfcpy/56177015#56177015", "title": "Problems working with Desfire EV1 tags and nfcpy", "body": "<p>Upon looking through the tagtool source it appears that only support for formatting type 1 and 3 tags have been added.</p>\n\n<pre><code>def format_tt1_tag(self, tag):\n    if self.options.magic is not None:\n        tag.write_byte(8, self.options.magic)\n    if self.options.ver is not None:\n        tag.write_byte(9, self.options.ver)\n    if self.options.tms is not None:\n        tag.write_byte(10, self.options.tms)\n    if self.options.rwa is not None:\n        tag.write_byte(11, self.options.rwa)\n\ndef format_tt2_tag(self, tag):\n    pass\n\ndef format_tt3_tag(self, tag):\n    attribute_data = tag.read_from_ndef_service(0)\n    if self.options.ver is not None:\n        attribute_data[0] = self.options.ver\n    if self.options.nbr is not None:\n        attribute_data[1] = self.options.nbr\n    if self.options.nbw is not None:\n        attribute_data[2] = self.options.nbw\n    if self.options.max is not None:\n        attribute_data[3:5] = struct.pack(\"&gt;H\", self.options.max)\n    if self.options.rfu is not None:\n        attribute_data[5:9] = 4 * [self.options.rfu]\n    if self.options.wf is not None:\n        attribute_data[9] = self.options.wf\n    if self.options.rw is not None:\n        attribute_data[10] = self.options.rw\n    if self.options.len is not None:\n        attribute_data[11:14] = struct.pack(\"&gt;I\", self.options.len)[1:]\n    if self.options.crc is not None:\n        attribute_data[14:16] = struct.pack(\"&gt;H\", self.options.crc)\n    else:\n        checksum = sum(attribute_data[:14])\n        attribute_data[14:16] = struct.pack(\"&gt;H\", checksum)\n    tag.write_to_ndef_service(attribute_data, 0)\n\ndef format_tt4_tag(self, tag):\n    pass\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 299, "user_id": 10372932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37867c608df841f89ceb4c4049b885e2?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/10372932/james"}, "edited": false, "score": 0, "creation_date": 1598787071, "post_id": 56492496, "comment_id": 112566233, "body": "sorry to bother you but I was wondering if you could tell me how to make a NTAG213 read only? And what the process might be of determining which might be a lock byte. For example if I had a NTAG215, how could I make that tag read only. <a href=\"https://stackoverflow.com/questions/63656816/how-to-make-a-nfc-tag-read-only\" title=\"how to make a nfc tag read only\">stackoverflow.com/questions/63656816/&hellip;</a>"}], "tags": [], "owner": {"reputation": 581, "user_id": 2622050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ht4WL.png?s=128&g=1", "display_name": "Stephen Tiedemann", "link": "https://stackoverflow.com/users/2622050/stephen-tiedemann"}, "is_accepted": true, "score": 0, "last_activity_date": 1559902963, "creation_date": 1559902963, "answer_id": 56492496, "question_id": 56156576, "link": "https://stackoverflow.com/questions/56156576/problems-working-with-desfire-ev1-tags-and-nfcpy/56492496#56492496", "title": "Problems working with Desfire EV1 tags and nfcpy", "body": "<p>The <code>tagtool.py</code> script can format any NFC Forum Type 1/2/3/4 Tag. Those tags are equipped with NDEF management information that is defined by the NFC Forum tag specifications. Mifare Desfire EV1 is a multi-application capable tag with application identifiers (AID) and associated files. For NDEF storage a specific AID must be present with a defined file structure. This is usually done with manufacturer tools.</p>\n"}], "owner": {"reputation": 62, "user_id": 11506157, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-BXBPT3D4nT8/AAAAAAAAAAI/AAAAAAAAAaQ/3TkQSAProfQ/photo.jpg?sz=128", "display_name": "Michael", "link": "https://stackoverflow.com/users/11506157/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "accepted_answer_id": 56492496, "answer_count": 2, "score": 0, "last_activity_date": 1559902963, "creation_date": 1557949424, "question_id": 56156576, "link": "https://stackoverflow.com/questions/56156576/problems-working-with-desfire-ev1-tags-and-nfcpy", "title": "Problems working with Desfire EV1 tags and nfcpy", "body": "<p>Trying to write an ndef record to a Desfire EV1 tag isn't working. I believe this is because the tag isn't formatted, however, when I try to do that (with tagtool.py) I get an error.</p>\n\n<p>I'm using an Adafruit PN532 attached to a Raspberry Pi 3 B+ via mini-UART (S0 instead of AMA0 as I need Bluetooth for something else).</p>\n\n<pre><code>python tagtool.py --device tty:S0 format\nNo handlers could be found for logger \"nfc.llcp.sec\"\n[nfc.clf] searching for reader on path tty:S0\n[nfc.clf] using PN532v1.6 at /dev/ttyS0\n** waiting for a tag **\n[nfc.tag.tt4] no ndef capability file\n[nfc.tag.tt4] format error: no ndef or not writeable\nSorry, I could not format this tag.\n\npython tagtool.py --device tty:S0 -v\nNo handlers could be found for logger \"nfc.llcp.sec\"\n[nfc.clf] searching for reader on path tty:S0\n[nfc.clf] using PN532v1.6 at /dev/ttyS0\n** waiting for a tag **\nType4ATag MIU=63 FWT=0.077329\n[nfc.tag.tt4] no ndef capability file\nMemory Dump:\n[nfc.tag.tt4] no ndef capability file\n\nPython 2.7.13 (default, Sep 26 2018, 18:42:22)\n[GCC 6.3.0 20170516] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import nfc\nNo handlers could be found for logger \"nfc.llcp.sec\"\n&gt;&gt;&gt; clf = nfc.ContactlessFrontend('tty:S0')\n&gt;&gt;&gt; tag = clf.connect(rdwr={'on-connect': lambda tag: False})\n&gt;&gt;&gt; print(tag)\nType4ATag MIU=63 FWT=0.077329\n&gt;&gt;&gt; print(tag.ndef)\nNone\n</code></pre>\n"}, {"tags": ["python", "jira"], "comments": [{"owner": {"reputation": 1, "user_id": 11506144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06ec042197de3bb8d0ce7f403183ac48?s=128&d=identicon&r=PG&f=1", "display_name": "William Sherwin", "link": "https://stackoverflow.com/users/11506144/william-sherwin"}, "edited": false, "score": 0, "creation_date": 1558037875, "post_id": 56156562, "comment_id": 98978562, "body": "I tried changing the return value from a dictionary; removing the parentheses still caused the same error."}], "answers": [{"tags": [], "owner": {"reputation": 18194, "user_id": 1513933, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/0ozBK.jpg?s=128&g=1", "display_name": "Laurent LAPORTE", "link": "https://stackoverflow.com/users/1513933/laurent-laporte"}, "is_accepted": false, "score": 0, "last_activity_date": 1557949734, "creation_date": 1557949734, "answer_id": 56156639, "question_id": 56156562, "link": "https://stackoverflow.com/questions/56156562/keyerror-project-on-submitting-jira-ticket-through-python/56156639#56156639", "title": "KeyError: &#39;project&#39; on Submitting JIra Ticket through Python", "body": "<p>Not sure, but I think your <code>createBody</code> function should only return the fields, not a dictionary with a single entry \"fields\":</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def ticketBody(sprint, uid):\n    return {\n        \"project\": {\"key\": \"DEV\"},\n        \"summary\": \"Search Term: \" + uid,\n        \"description\": \"Some Description\",\n        \"issuetype\": {\"name\": \"Bug\"},\n        \"Epic Link\": \"DEV-1\",\n        \"Sprint\": sprint,\n        \"assignee\": \"awesomeEngr\",\n    }\n</code></pre>\n\n<p><em>note:</em> You ought to follow the <a href=\"https://pep8.org/\" rel=\"nofollow noreferrer\">PEP8 style guide</a> and rename \"ticketBody\" in \"ticket_body\".</p>\n"}], "owner": {"reputation": 1, "user_id": 11506144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06ec042197de3bb8d0ce7f403183ac48?s=128&d=identicon&r=PG&f=1", "display_name": "William Sherwin", "link": "https://stackoverflow.com/users/11506144/william-sherwin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 291, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557949734, "creation_date": 1557949364, "question_id": 56156562, "link": "https://stackoverflow.com/questions/56156562/keyerror-project-on-submitting-jira-ticket-through-python", "title": "KeyError: &#39;project&#39; on Submitting JIra Ticket through Python", "body": "<p>I'm trying to automate the generation of Jira tickets using Python.  Running my script, I keep getting a traceback.</p>\n\n<p>I'm running this on Ubuntu Linux with both Python 3.6 and 3.7 (my IDE points to 3.7).  I have searched the Web extensively for solutions, finding none.</p>\n\n<pre><code>def ticketBody(sprint, uid, [[other stuff]]):\n    return({\n        \"fields\": {\n           \"project\": {\"key\": \"DEV\"},\n           \"summary\": \"Search Term: \" + uid,\n           \"description\": \"Some Description\",\n           \"issuetype\": {\"name\": \"Bug\"},\n           \"Epic Link\": \"DEV-1\",\n           \"Sprint\": sprint,\n           \"assignee\": \"awesomeEngr\",\n        }\n    })\n\nBODY = ticketBody(sprint,uid,[other_params])\nauthd.create_issue(fields=BODY)\n\nTraceback (most recent call last):\n  File \"/home/wsherwin/.../python/dataQuality.py\", line 68, in &lt;module&gt;\n    main()\n  File \"/home/wsherwin/.../python/dataQuality.py\", line 63, in main\n    authd.create_issue(fields=BODY)\n  File \"/home/wsherwin/python-test/lib/python3.7/site-packages/jira/client.py\", line 1095, in create_issue\n    p = data['fields']['project']\nKeyError: 'project'\n</code></pre>\n\n<p>The authd object takes the place of a jira object, and I cannot figure out why python/Jira can't find my project, because I've passed it along.</p>\n\n<p>I would expect to have this return 0 with a successful conclusion - and a bunch of tickets filed.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 8157, "user_id": 500202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c0f8622f992b847d49c77cdbec81c95?s=128&d=identicon&r=PG", "display_name": "Izkata", "link": "https://stackoverflow.com/users/500202/izkata"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1557949396, "post_id": 56156533, "comment_id": 98942242, "body": "@Prune It prints False, but returns True.  Done in a shell instead of a file, you see both values."}], "answers": [{"tags": [], "owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "is_accepted": false, "score": 4, "last_activity_date": 1557949556, "creation_date": 1557949556, "answer_id": 56156605, "question_id": 56156533, "link": "https://stackoverflow.com/questions/56156533/python-else-statement-returns-true-though-its-mentioned-to-return-false/56156605#56156605", "title": "Python: else statement returns True, though it&#39;s mentioned to return False", "body": "<p>You are not returning False if an inner list has a mismatch:</p>\n\n<blockquote>\n<pre><code>def same_structure_as(original,other):\n    if isinstance(original, list) and isinstance(other, list):\n        if len(original) == len(other):\n            for el in original:\n                if isinstance(el, list):\n                    orig_new = original[original.index(el)]\n                    other_new = other[original.index(el)]\n                    same_structure_as(orig_new,other_new) # here - the result is ignored\n            return True\n        else:\n            return False\n    else:\n        print(\"False\")\n        return False\n</code></pre>\n</blockquote>\n\n<p>You need </p>\n\n<pre><code>def same_structure_as(original,other):\n    if isinstance(original, list) and isinstance(other, list):\n        if len(original) == len(other):\n            for el in original:\n                if isinstance(el, list):\n                    orig_new = original[original.index(el)]\n                    other_new = other[original.index(el)]\n                    if not same_structure_as(orig_new,other_new): # early exit if not same \n                        return False\n                     # else continue testing (no else needed - simply not return anything)\n            return True\n        else:\n            return False\n    else:\n        print(\"False\")\n        return False\n</code></pre>\n\n<p>elsewise you \"detect/print\" wrongness but never act upon.</p>\n"}, {"comments": [{"owner": {"reputation": 5007, "user_id": 10924296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483c21a8a3f03bbf92cb99539ec97dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Reedinationer", "link": "https://stackoverflow.com/users/10924296/reedinationer"}, "reply_to_user": {"reputation": 21, "user_id": 11506126, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-siPPkRQoUk0/AAAAAAAAAAI/AAAAAAAAAKY/NvKyWT_fwEc/photo.jpg?sz=128", "display_name": "Saranya Raja", "link": "https://stackoverflow.com/users/11506126/saranya-raja"}, "edited": false, "score": 0, "creation_date": 1557950471, "post_id": 56156651, "comment_id": 98942683, "body": "@SaranyaRaja Glad to hear! If this solved your problem it&#39;s standard to click the green check by the post to accept it as the solution (you can change this too if a better answer comes along) as this signals to posters the problem has been solved and closes the thread. When you get 15 rep you can upvote helpful questions/answers too. Welcome to StackOverflow!"}], "tags": [], "owner": {"reputation": 5007, "user_id": 10924296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483c21a8a3f03bbf92cb99539ec97dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Reedinationer", "link": "https://stackoverflow.com/users/10924296/reedinationer"}, "is_accepted": true, "score": 1, "last_activity_date": 1557949789, "last_edit_date": 1592644375, "creation_date": 1557949789, "answer_id": 56156651, "question_id": 56156533, "link": "https://stackoverflow.com/questions/56156533/python-else-statement-returns-true-though-its-mentioned-to-return-false/56156651#56156651", "title": "Python: else statement returns True, though it&#39;s mentioned to return False", "body": "<p>The easiest way to fix it is to simply <code>return</code> your recursive function (which I'm sure is what your intent was):</p>\n<pre><code>def same_structure_as(original, other):\n    if isinstance(original, list) and isinstance(other, list):\n        if len(original) == len(other):\n            for el in original:\n                if isinstance(el, list):\n                    orig_new = original[original.index(el)]\n                    other_new = other[original.index(el)]\n                    return same_structure_as(orig_new, other_new) # just add a return here\n            return True\n        else:\n            return False\n    else:\n        print(&quot;False&quot;)\n        return False\n\nprint(same_structure_as([1,[1,1]],[[2,2],2]))\n</code></pre>\n<p>Yields the correct:</p>\n<blockquote>\n<p>False</p>\n<p>False</p>\n</blockquote>\n<p>I <a href=\"https://stackoverflow.com/a/56138032/10924296\">drew a diagram</a> explaining this situation on a previous post</p>\n"}], "owner": {"reputation": 21, "user_id": 11506126, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-siPPkRQoUk0/AAAAAAAAAAI/AAAAAAAAAKY/NvKyWT_fwEc/photo.jpg?sz=128", "display_name": "Saranya Raja", "link": "https://stackoverflow.com/users/11506126/saranya-raja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 56156651, "answer_count": 2, "score": 1, "last_activity_date": 1557949789, "creation_date": 1557949210, "question_id": 56156533, "link": "https://stackoverflow.com/questions/56156533/python-else-statement-returns-true-though-its-mentioned-to-return-false", "title": "Python: else statement returns True, though it&#39;s mentioned to return False", "body": "<p>I'm writing a function that validates two lists passed as arguments and returns True if the structure of both the lists are same and returns False otherwise.</p>\n\n<p>Tried with print statements at multiple places of the code and see no issue. Else statement prints \"False\" as expected, for different structure lists, but strangely function returns True, though it should return False.</p>\n\n<pre><code>def same_structure_as(original,other):\n    if isinstance(original, list) and isinstance(other, list):\n        if len(original) == len(other):\n            for el in original:\n                if isinstance(el, list):\n                    orig_new = original[original.index(el)]\n                    other_new = other[original.index(el)]\n                    same_structure_as(orig_new,other_new)\n            return True\n        else:\n            return False\n    else:\n        print(\"False\")\n        return False\n\nsame_structure_as([1,[1,1]],[[2,2],2])\n</code></pre>\n\n<p>Since the structure of both the input lists are different, the code should return False. print statement correctly prints \"False\", but returns \"True\" even though i gave \"return False\"</p>\n"}, {"tags": ["python", "django", "django-queryset"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1557949165, "post_id": 56156484, "comment_id": 98942148, "body": "You use <code>and_</code> as a reducer, so that means that you say: that the postal code should start with 78 and should start with 10. No text can start with both at the same time."}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 3, "last_activity_date": 1557949597, "last_edit_date": 1557949597, "creation_date": 1557949277, "answer_id": 56156543, "question_id": 56156484, "link": "https://stackoverflow.com/questions/56156484/django-query-request-with-startswith-in-an-array/56156543#56156543", "title": "Django query : Request with startswith in an array", "body": "<p>The main problem here is that you use <code>and_</code> as reduce operator, so that means that you specify as condition that the <code>code_postal</code> should start with <code>78</code> and <code>95</code> at the same time. No text/number can start with <code>78</code> and <code>95</code> (and all other values) at the same time.</p>\n\n<p>You can easily fix this by reducing this with <code>or_</code>:</p>\n\n<pre><code>from operator import <b>or_</b>\n\nquery = reduce(<b>or_</b>, (Q(code_postal__startswith=item) for item in q))\nresult = Record14.objects.filter(query)</code></pre>\n\n<p>That being said, it is probably better to use a <a href=\"https://en.wikipedia.org/wiki/Regular_expression\" rel=\"nofollow noreferrer\"><em>regular expression</em> [wiki]</a> here, like:</p>\n\n<pre><code>from re import escape as <b>reescape</b>\n\nresult = Record14.objects.filter(\n    code_postal<b>__regex= '^({})'.format('|'.join(map(reescape, q)))</b>\n)</code></pre>\n\n<p>For your given list <code>q</code>, this will result in a regex:</p>\n\n<pre><code>^(78|95|77|91|92|93|94|75|27|28|45|89|10|51|02|60|27)\n</code></pre>\n\n<p>The <code>^</code> is the start anchor here, and the pipe acts as a \"union\", so this regex looks for columns that start with <code>78</code>, <code>95</code>, <code>77</code>, etc.</p>\n"}, {"tags": [], "owner": {"reputation": 12459, "user_id": 2890724, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/or6PX.jpg?s=128&g=1", "display_name": "Raydel Miranda", "link": "https://stackoverflow.com/users/2890724/raydel-miranda"}, "is_accepted": false, "score": 1, "last_activity_date": 1557976728, "creation_date": 1557976728, "answer_id": 56160319, "question_id": 56156484, "link": "https://stackoverflow.com/questions/56156484/django-query-request-with-startswith-in-an-array/56160319#56160319", "title": "Django query : Request with startswith in an array", "body": "<p>You can also (since Django 2.1) combine an annotation with a database function called <a href=\"https://docs.djangoproject.com/en/2.2/ref/models/database-functions/#left\" rel=\"nofollow noreferrer\">Left</a> and use the <code>__in</code> lookup:</p>\n\n<pre><code>from django.db.models.functions import Left\n\nrecords = Record14.objects.annotate(\n    code_postal_ini=Left('code_postal', 2)   # Take the 2 first characters of code_postal\n).filter(\n    code_postal_ini__in=q  # Filter if those 2 first chars are contained in q\n)\n</code></pre>\n\n<p>simple.</p>\n"}], "owner": {"reputation": 502, "user_id": 462794, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/590ab8e31e515d6d8666c8b81f3a1317?s=128&d=identicon&r=PG", "display_name": "Bussiere", "link": "https://stackoverflow.com/users/462794/bussiere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 686, "favorite_count": 0, "accepted_answer_id": 56156543, "answer_count": 2, "score": 2, "last_activity_date": 1557976728, "creation_date": 1557948936, "question_id": 56156484, "link": "https://stackoverflow.com/questions/56156484/django-query-request-with-startswith-in-an-array", "title": "Django query : Request with startswith in an array", "body": "<p>here is my code :</p>\n\n<pre><code>q =  [\n    \"78\",\n    \"95\",\n    \"77\",\n    \"91\",\n    \"92\",\n    \"93\",\n    \"94\",\n    \"75\",\n    \"27\",\n    \"28\",\n    \"45\",\n    \"89\",\n    \"10\",\n    \"51\",\n    \"02\",\n    \"60\",\n    \"27\",\n]\nquery = reduce(operator.and_, (Q(code_postal__startswith=item) for item in q))\nresult = Record14.objects.filter(query)\nfor r in result :\nprint(r)\n</code></pre>\n\n<p>I want a query with all the objects from Record14 where the code_postal begin with the values in the q array.</p>\n\n<p>I have the data in my database i'am sure, but the query is empty ...</p>\n\n<p>I don't understand why.</p>\n"}, {"tags": ["python", "attributeerror", "exchangelib"], "comments": [{"owner": {"reputation": 143, "user_id": 9873471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DO1Ar.png?s=128&g=1", "display_name": "Column01", "link": "https://stackoverflow.com/users/9873471/column01"}, "edited": false, "score": 0, "creation_date": 1557952204, "post_id": 56156454, "comment_id": 98943381, "body": "Could you please edit your question to include the stacktrace of the error so we can try and debug what&#39;s happening?"}, {"owner": {"reputation": 74, "user_id": 8774020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52078028e95e2076b3d2de7179e15b4d?s=128&d=identicon&r=PG&f=1", "display_name": "kalidurge", "link": "https://stackoverflow.com/users/8774020/kalidurge"}, "reply_to_user": {"reputation": 143, "user_id": 9873471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DO1Ar.png?s=128&g=1", "display_name": "Column01", "link": "https://stackoverflow.com/users/9873471/column01"}, "edited": false, "score": 0, "creation_date": 1557952460, "post_id": 56156454, "comment_id": 98943495, "body": "@Column01 I added an image. Does that work?"}, {"owner": {"reputation": 143, "user_id": 9873471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DO1Ar.png?s=128&g=1", "display_name": "Column01", "link": "https://stackoverflow.com/users/9873471/column01"}, "edited": false, "score": 0, "creation_date": 1557952651, "post_id": 56156454, "comment_id": 98943580, "body": "Would also be helpful if you could add a data sample so we know what we&#39;re looking for. It looks like the error starts here: <code>for item in account.inbox.all().order_by(&#39;-datetime_received&#39;)[:100]:</code> and I have a suspicion it&#39;s from the <code>order_by()</code> section"}, {"owner": {"reputation": 74, "user_id": 8774020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52078028e95e2076b3d2de7179e15b4d?s=128&d=identicon&r=PG&f=1", "display_name": "kalidurge", "link": "https://stackoverflow.com/users/8774020/kalidurge"}, "reply_to_user": {"reputation": 143, "user_id": 9873471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DO1Ar.png?s=128&g=1", "display_name": "Column01", "link": "https://stackoverflow.com/users/9873471/column01"}, "edited": false, "score": 0, "creation_date": 1557953867, "post_id": 56156454, "comment_id": 98944031, "body": "@Column01 Yeah, that&#39;s definitely where the error is coming from. I think it has something to do with how QuerySet works (which I do not understand).  It&#39;s not from the order_by though. If I remove that part, I get the same error. I added some working code using the filter method. Note that if I run the same filter code but filter by something that includes the meeting response, I get the AttributeError :("}, {"owner": {"reputation": 7598, "user_id": 219640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HFl1a.jpg?s=128&g=1", "display_name": "Erik Cederstrand", "link": "https://stackoverflow.com/users/219640/erik-cederstrand"}, "edited": false, "score": 0, "creation_date": 1557990777, "post_id": 56156454, "comment_id": 98952995, "body": "The stack trace indicates that we are failing to parse the XML response when that response contains a meeting response. Can you please post the response XML for a failing query, e.g. <code>account.inbox.filter(subject__contains=&#39;Accepted:&#39;)[:1]</code>? Instructions for capturing the XML response: <a href=\"https://github.com/ecederstrand/exchangelib#troubleshooting\" rel=\"nofollow noreferrer\">github.com/ecederstrand/exchangelib#troubleshooting</a>"}, {"owner": {"reputation": 7598, "user_id": 219640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HFl1a.jpg?s=128&g=1", "display_name": "Erik Cederstrand", "link": "https://stackoverflow.com/users/219640/erik-cederstrand"}, "edited": false, "score": 0, "creation_date": 1557991240, "post_id": 56156454, "comment_id": 98953230, "body": "Also, please post Python and exchangelib versions"}, {"owner": {"reputation": 74, "user_id": 8774020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52078028e95e2076b3d2de7179e15b4d?s=128&d=identicon&r=PG&f=1", "display_name": "kalidurge", "link": "https://stackoverflow.com/users/8774020/kalidurge"}, "reply_to_user": {"reputation": 7598, "user_id": 219640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HFl1a.jpg?s=128&g=1", "display_name": "Erik Cederstrand", "link": "https://stackoverflow.com/users/219640/erik-cederstrand"}, "edited": false, "score": 0, "creation_date": 1558019841, "post_id": 56156454, "comment_id": 98970132, "body": "@ErikCederstrand thank you. I added most of the xml (the whole thing doesn&#39;t fit). I&#39;m using Python 3.6.5 and exhangelib 1.12.4"}, {"owner": {"reputation": 74, "user_id": 8774020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52078028e95e2076b3d2de7179e15b4d?s=128&d=identicon&r=PG&f=1", "display_name": "kalidurge", "link": "https://stackoverflow.com/users/8774020/kalidurge"}, "edited": false, "score": 0, "creation_date": 1558037140, "post_id": 56156454, "comment_id": 98978284, "body": "Here&#39;s what I did to get if working for now...I modified the fetch method in account.py  to ignore the item if validation_folder.item_model_from_tag(i.tag).ELEMENT_NAME != &#39;Message&#39;"}, {"owner": {"reputation": 7598, "user_id": 219640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HFl1a.jpg?s=128&g=1", "display_name": "Erik Cederstrand", "link": "https://stackoverflow.com/users/219640/erik-cederstrand"}, "edited": false, "score": 0, "creation_date": 1558344250, "post_id": 56156454, "comment_id": 99056329, "body": "Thanks for the extra debug output. It helped to reproduce and pinpoint the problem."}], "answers": [{"tags": [], "owner": {"reputation": 7598, "user_id": 219640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HFl1a.jpg?s=128&g=1", "display_name": "Erik Cederstrand", "link": "https://stackoverflow.com/users/219640/erik-cederstrand"}, "is_accepted": true, "score": 0, "last_activity_date": 1558344188, "creation_date": 1558344188, "answer_id": 56217884, "question_id": 56156454, "link": "https://stackoverflow.com/questions/56156454/how-do-i-filter-out-or-skip-meeting-responses-in-my-inbox-using-exchangelib-cur/56217884#56217884", "title": "How do I filter out or skip meeting responses in my inbox using ExchangeLib? Currently getting AttributeError", "body": "<p>This turned out to be a bug in exchangelib caused by duplicated field definitions on the <code>MessageReply</code> class. Fixed in <a href=\"https://github.com/ecederstrand/exchangelib/commit/cc8590b5557585ecbb3319f9391e30ace2f411fa\" rel=\"nofollow noreferrer\">https://github.com/ecederstrand/exchangelib/commit/cc8590b5557585ecbb3319f9391e30ace2f411fa</a></p>\n"}], "owner": {"reputation": 74, "user_id": 8774020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52078028e95e2076b3d2de7179e15b4d?s=128&d=identicon&r=PG&f=1", "display_name": "kalidurge", "link": "https://stackoverflow.com/users/8774020/kalidurge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 775, "favorite_count": 0, "accepted_answer_id": 56217884, "answer_count": 1, "score": 1, "last_activity_date": 1558344188, "creation_date": 1557948729, "last_edit_date": 1558019641, "question_id": 56156454, "link": "https://stackoverflow.com/questions/56156454/how-do-i-filter-out-or-skip-meeting-responses-in-my-inbox-using-exchangelib-cur", "title": "How do I filter out or skip meeting responses in my inbox using ExchangeLib? Currently getting AttributeError", "body": "<p>I need to iterate through emails in my outlook inbox and get attributes like the subject, sender and date. However, I get an AttributeError  (that I am unable to catch using exception handling) whenever I encounter a calendar meeting response in my inbox. The error message is \"'NoneType' object has no attribute 'find'\". I'm using Python version 3.6 and ExchangeLib 1.12.4.</p>\n\n<p>According to <a href=\"https://github.com/ecederstrand/exchangelib/blob/master/README.md\" rel=\"nofollow noreferrer\">https://github.com/ecederstrand/exchangelib/blob/master/README.md</a>, I should be able to do this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>for item in account.inbox.all().order_by('-datetime_received')[:5]:\n    if isinstance(item, MeetingResponse):\n       do_something\n</code></pre>\n\n<p>BUT my code below fails to identify that the item is a MeetingResponse and throws an AttributeError as soon as it gets to a meeting response</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\nfrom exchangelib import DELEGATE, Account, Credentials, Configuration, CalendarItem, EWSDateTime\nfrom exchangelib.items import MeetingRequest, MeetingCancellation, MeetingResponse\n\n...\n\nfor item in account.inbox.all().order_by('-datetime_received')[:100]:\n    if isinstance(item, MeetingResponse):\n        print('its a meeting response')\n        continue\n    else:\n        subj= item.subject\n        senderName = item.sender.name\n        senderEmail = item.sender.email_address\n        year = item.datetime_received.year\n        month = item.datetime_received.month\n        day = item.datetime_received.day\n        df=df.append({'Subject': subj, 'SenderName':senderName, 'SenderEmail':senderEmail,'Year': year, 'Month':month, 'Day': day}, ignore_index=True)\n</code></pre>\n\n<p>Other things I've tried that DO NOT work, include exception handling like this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>       try:\n            subj= item.subject\n            senderName = item.sender.name\n            senderEmail = item.sender.email_address\n            year = item.datetime_received.year\n            month = item.datetime_received.month\n            day = item.datetime_received.day\n            df=df.append({'Subject': subj, 'SenderName':senderName, 'SenderEmail':senderEmail,'Year': year, 'Month':month, 'Day': day}, ignore_index=True)\n            #print(sender)\n        except Exception as e:\n            print(e)\n</code></pre>\n\n<p>And checking the message type, as recommended here: <a href=\"https://stackoverflow.com/questions/49013158/python-exchangelib-check-if-item-is-a-message-or-not\">Python exchangelib: check if item is a message or not</a></p>\n\n<p>However, no matter what, I always get the same error: AttributeError: 'NoneType' object has no attribute 'find'</p>\n\n<p>Here is the traceback:\n<a href=\"https://i.stack.imgur.com/ApShL.png\" rel=\"nofollow noreferrer\">Error traceback image</a></p>\n\n<p>This the inbox message that makes the code fail: <a href=\"https://i.stack.imgur.com/TvI1n.png\" rel=\"nofollow noreferrer\">Meeting response</a></p>\n\n<p>This is a normal inbox message that doesn't make the code fail: <a href=\"https://i.stack.imgur.com/xRuzT.png\" rel=\"nofollow noreferrer\">Normal message - not related to calendar item</a></p>\n\n<p>Other info you might find interesting:\nIf I filter out items that mean calendar items aren't include, I get no errors, see working code below. However, I don't know how to filter out meeting responses, specifically.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>for item in account.inbox.filter(subject__contains='Lexis')[:10]:\n    print(item.subject)\n</code></pre>\n\n<p>The code below, however, DOES NOT work and throws the same AttributeError</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>for item in account.inbox.filter(subject__contains='Accepted:')[:10]:\n    print(item.subject)\n</code></pre>\n\n<p>It doesn't let me filter using ELEMENT_NAME__contains or response_tag__contains</p>\n\n<p>Here's the partial xml that I get when I run \"for item in account.inbox.filter(subject__contains='Accepted:')[:1]:...\"</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>DEBUG:exchangelib.queryset:Initializing cache DEBUG:exchangelib.folders:Finding [Inbox(Root(\r\n&lt;exchangelib.account.Account object at 0x0000000B4EA97278&gt;, \r\n...\r\nResponse time: 0.39099999982863665 Status code: 200 Request headers: {'User-Agent': 'python-requests/2.18.4', 'Accept-Encoding': 'gzip, deflate', 'Accept': '*/*', 'Connection': 'Keep-Alive', 'Content-Type': 'text/xml;\r\n      charset=utf-8', 'Cookie': 'delted'; ClientId=FTNTNFBGUKKHMWERGKW; exchangecookie=deleted', 'Content-Length': '1060', 'Authorization': deleted} Response headers: {'Cache-Control': 'private', 'Transfer-Encoding': 'chunked', 'Content-Type': 'text/xml;\r\n      charset=utf-8', 'Content-Encoding': 'gzip', 'Vary': 'Accept-Encoding', 'Server': 'Microsoft-IIS/8.5', 'request-id': 'ed9787e2-b43e-4df5-bf8b-a2d91a0f4b6c', 'X-CalculatedBETarget': 'ex2.parent_company.local', 'X-DiagInfo': 'EX2', 'X-BEServer': 'EX2',\r\n      'X-AspNet-Version': '4.0.30319', 'Set-Cookie': deleted; expires=Sat, 15-Jun-2019 14:06:36 GMT; path=/EWS; secure; HttpOnly', 'Persistent-Auth': 'true', 'X-Powered-By': 'ASP.NET', 'X-FEServer': 'EX2', 'Date': 'Thu, 16 May 2019 14:06:36 GMT'} Request\r\n      data: b'\r\n      &lt;?xml version=\\'1.0\\' encoding=\\'utf-8\\'?&gt;\\n\r\n      &lt;s:Envelope xmlns:m=\"http://schemas.microsoft.com/exchange/services/2006/messages\" xmlns:s=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:t=\"http://schemas.microsoft.com/exchange/services/2006/types\"&gt;\r\n        &lt;s:Header&gt;\r\n          &lt;t:RequestServerVersion Version=\"Exchange2013_SP1\" /&gt;\r\n          &lt;t:TimeZoneContext&gt;\r\n            &lt;t:TimeZoneDefinition Id=\"Eastern Standard Time\" /&gt;&lt;/t:TimeZoneContext&gt;\r\n        &lt;/s:Header&gt;\r\n        &lt;s:Body&gt;\r\n          &lt;m:FindItem Traversal=\"Shallow\"&gt;\r\n            &lt;m:ItemShape&gt;\r\n              &lt;t:BaseShape&gt;IdOnly&lt;/t:BaseShape&gt;\r\n            &lt;/m:ItemShape&gt;\r\n            &lt;m:IndexedPageItemView BasePoint=\"Beginning\" MaxEntriesReturned=\"1\" Offset=\"0\" /&gt;\r\n            &lt;m:Restriction&gt;\r\n              &lt;t:Contains ContainmentComparison=\"Exact\" ContainmentMode=\"Substring\"&gt;\r\n                &lt;t:FieldURI FieldURI=\"item:Subject\" /&gt;\r\n                &lt;t:Constant Value=\"Accepted:\" /&gt;&lt;/t:Contains&gt;\r\n            &lt;/m:Restriction&gt;\r\n            &lt;m:ParentFolderIds&gt;\r\n              &lt;t:DistinguishedFolderId Id=\"inbox\"&gt;\r\n                &lt;t:Mailbox&gt;\r\n                  &lt;t:EmailAddress&gt;my_user_name@co_name.com&lt;/t:EmailAddress&gt;\r\n                  &lt;t:RoutingType&gt;SMTP&lt;/t:RoutingType&gt;\r\n                  &lt;t:MailboxType&gt;Mailbox&lt;/t:MailboxType&gt;\r\n                &lt;/t:Mailbox&gt;\r\n              &lt;/t:DistinguishedFolderId&gt;\r\n            &lt;/m:ParentFolderIds&gt;\r\n          &lt;/m:FindItem&gt;\r\n        &lt;/s:Body&gt;\r\n      &lt;/s:Envelope&gt;' Response data: b'\r\n      &lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\r\n      &lt;s:Envelope xmlns:s=\"http://schemas.xmlsoap.org/soap/envelope/\"&gt;\r\n        &lt;s:Header&gt;\r\n          &lt;h:ServerVersionInfo MajorVersion=\"15\" MinorVersion=\"0\" MajorBuildNumber=\"1473\" MinorBuildNumber=\"3\" Version=\"V2_23\" xmlns:h=\"http://schemas.microsoft.com/exchange/services/2006/types\" xmlns=\"http://schemas.microsoft.com/exchange/services/2006/types\"\r\n            xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" /&gt;\r\n        &lt;/s:Header&gt;\r\n        &lt;s:Body xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"&gt;\r\n          &lt;m:FindItemResponse xmlns:m=\"http://schemas.microsoft.com/exchange/services/2006/messages\" xmlns:t=\"http://schemas.microsoft.com/exchange/services/2006/types\"&gt;\r\n            &lt;m:ResponseMessages&gt;\r\n              &lt;m:FindItemResponseMessage ResponseClass=\"Success\"&gt;\r\n                &lt;m:ResponseCode&gt;NoError&lt;/m:ResponseCode&gt;\r\n                &lt;m:RootFolder IndexedPagingOffset=\"1\" TotalItemsInView=\"23\" IncludesLastItemInRange=\"false\"&gt;\r\n                  &lt;t:Items&gt;\r\n                    &lt;t:MeetingResponse&gt;\r\n                      &lt;t:ItemId Id=deleted/&gt;&lt;/t:MeetingResponse&gt;\r\n                  &lt;/t:Items&gt;\r\n                &lt;/m:RootFolder&gt;\r\n              &lt;/m:FindItemResponseMessage&gt;\r\n            &lt;/m:ResponseMessages&gt;\r\n          &lt;/m:FindItemResponse&gt;\r\n        &lt;/s:Body&gt;\r\n      &lt;/s:Envelope&gt;' \r\n DEBUG:exchangelib.util:Session 27048 thread 16144: Useful response from https://cloudmail.firm_name.com/EWS/Exchange.asmx \r\n ...\r\n Response time: 0.06199999991804361 Status code: 200 \r\n Request headers: {'User-Agent': 'python-requests/2.18.4', 'Accept-Encoding': 'gzip, deflate', 'Accept': '*/*', 'Connection': 'Keep-Alive', 'Content-Type': 'text/xml;\r\n          charset=utf-8', 'Cookie': delted; ClientId=deleted; exchangecookie=efc27b1d76ad4fea808e577a4e34aa30', 'Content-Length': '5290'} Response headers: {'Cache-Control': 'private', 'Transfer-Encoding': 'chunked', 'Content-Type': 'text/xml; charset=utf-8',\r\n          'Content-Encoding': 'gzip', 'Vary': 'Accept-Encoding', 'Server': 'Microsoft-IIS/8.5', 'request-id': '7bbb3dee-e6f0-42d2-8e0c-dd296e02c27a', 'X-CalculatedBETarget': 'ex2.parent_company.local', 'X-DiagInfo': 'EX2', 'X-BEServer': 'EX2', 'X-AspNet-Version':\r\n          '4.0.30319', 'Set-Cookie': 'exchangecookie=efc27b1d76ad4fea808e577a4e34aa30; path=/, X-BackEndCookie=S-1-5-21-3493326517-1059625486-1703856831-1754=u56Lnp2ejJqBy5nIx5yeyM/Sys/NyNLLy8rL0saczZnSycqZnJ3HzsudyM/MgYHNz87G0s/J0s7Kq87Lxc/JxczI; expires=Sat,\r\n          15-Jun-2019 14:06:37 GMT; path=/EWS; secure; HttpOnly', 'X-Powered-By': 'ASP.NET', 'X-FEServer': 'EX2', 'Date': 'Thu, 16 May 2019 14:06:36 GMT'} Request data: b'\r\n          &lt;?xml version=\\'1.0\\' encoding=\\'utf-8\\'?&gt;\\n\r\n          &lt;s:Envelope xmlns:m=\"http://schemas.microsoft.com/exchange/services/2006/messages\" xmlns:s=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:t=\"http://schemas.microsoft.com/exchange/services/2006/types\"&gt;\r\n            &lt;s:Header&gt;\r\n              &lt;t:RequestServerVersion Version=\"Exchange2013_SP1\" /&gt;\r\n              &lt;t:TimeZoneContext&gt;\r\n                &lt;t:TimeZoneDefinition Id=\"Eastern Standard Time\" /&gt;&lt;/t:TimeZoneContext&gt;\r\n            &lt;/s:Header&gt;\r\n            &lt;s:Body&gt;\r\n              &lt;m:GetItem&gt;\r\n                &lt;m:ItemShape&gt;\r\n                  &lt;t:BaseShape&gt;IdOnly&lt;/t:BaseShape&gt;\r\n                  &lt;t:AdditionalProperties&gt;\r\n                    &lt;t:FieldURI FieldURI=\"calendar:EndTimeZone\" /&gt;\r\n                    &lt;t:FieldURI FieldURI=\"calendar:EndTimeZone\" /&gt;\r\n                    &lt;t:FieldURI FieldURI=\"calendar:StartTimeZone\" /&gt;\r\n                    &lt;t:FieldURI FieldURI=\"calendar:StartTimeZone\" /&gt;\r\n                    &lt;t:FieldURI FieldURI=\"calendar:AdjacentMeetingCount\" /&gt;\r\n                    &lt;t:FieldURI FieldURI=\"calendar:AllowNewTimeProposal\" /&gt;\r\n                    &lt;t:FieldURI FieldURI=\"calendar:AppointmentReplyTime\" /&gt;\r\n                    &lt;t:FieldURI FieldURI=\"calendar:AppointmentSequenceNumber\" /&gt;\r\n                    &lt;t:FieldURI FieldURI=\"meeting:AssociatedCalendarItemId\" /&gt;\r\n                    &lt;t:FieldURI FieldURI=\"item:Attachments\" /&gt;\r\n                    &lt;t:FieldURI FieldURI=\"message:From\" /&gt;\r\n                    &lt;t:FieldURI FieldURI=\"message:BccRecipients\" /&gt;\r\n                    &lt;t:FieldURI FieldURI=\"item:Body\" /&gt;\r\n                    &lt;t:FieldURI FieldURI=\"item:Categories\" /&gt;\r\n                    &lt;t:FieldURI FieldURI=\"message:CcRecipients\" /&gt;\r\n                    &lt;t:FieldURI FieldURI=\"calendar:ConferenceType\" /&gt;\r\n                    &lt;t:FieldURI FieldURI=\"calendar:ConflictingMeetingCount\" /&gt;\r\n                    &lt;t:FieldURI FieldURI=\"item:ConversationId\" /&gt;\r\n                    &lt;t:FieldURI FieldURI=\"message:ConversationIndex\" /&gt;\r\n                    &lt;t:FieldURI FieldURI=\"message:ConversationTopic\" /&gt;\r\n                    deleted remaining\r\n                    /&gt;&lt;/t:AdditionalProperties&gt;\r\n                &lt;/m:ItemShape&gt;\r\n             \r\n              &lt;/m:GetItem&gt;\r\n            &lt;/s:Body&gt;\r\n          &lt;/s:Envelope&gt;' Response data: b'\r\n          &lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\r\n          &lt;s:Envelope xmlns:s=\"http://schemas.xmlsoap.org/soap/envelope/\"&gt;\r\n            &lt;s:Header&gt;\r\n              &lt;h:ServerVersionInfo MajorVersion=\"15\" MinorVersion=\"0\" MajorBuildNumber=\"1473\" MinorBuildNumber=\"3\" Version=\"V2_23\" xmlns:h=\"http://schemas.microsoft.com/exchange/services/2006/types\" xmlns=\"http://schemas.microsoft.com/exchange/services/2006/types\"\r\n                xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" /&gt;\r\n            &lt;/s:Header&gt;\r\n            &lt;s:Body xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"&gt;\r\n              &lt;m:GetItemResponse xmlns:m=\"http://schemas.microsoft.com/exchange/services/2006/messages\" xmlns:t=\"http://schemas.microsoft.com/exchange/services/2006/types\"&gt;\r\n                &lt;m:ResponseMessages&gt;\r\n                  &lt;m:GetItemResponseMessage ResponseClass=\"Success\"&gt;\r\n                    &lt;m:ResponseCode&gt;NoError&lt;/m:ResponseCode&gt;\r\n                    &lt;m:Items&gt;\r\n                      &lt;t:MeetingResponse&gt;\r\n                        &lt;t:MimeContent CharacterSet=\"UTF-8\"&gt;+deleted_to_save_space==&lt;/t:MimeContent&gt;\r\n                        &lt;t:ItemId deleted/&gt;&lt;t:ItemClass&gt;IPM.Schedule.Meeting.Resp.Pos&lt;/t:ItemClass&gt;&lt;t:Subject&gt;Accepted: I need a meeting request response in my inbox for debugging&lt;/t:Subject&gt;&lt;t:Sensitivity&gt;Normal&lt;/t:Sensitivity&gt;&lt;t:Body BodyType=\" HTML\r\n                          \" IsTruncated=\"false \"&gt; deleted &lt;/t:Body&gt;&lt;t:DateTimeReceived&gt;2019-05-15T13:49:30-04:00&lt;/t:DateTimeReceived&gt;&lt;t:Size&gt;10767&lt;/t:Size&gt;&lt;t:Importance&gt;Normal&lt;/t:Importance&gt;&lt;t:IsSubmitted&gt;false&lt;/t:IsSubmitted&gt;&lt;t:IsDraft&gt;false&lt;/t:IsDraft&gt;&lt;t:IsFromMe&gt;false&lt;/t:IsFromMe&gt;&lt;t:IsResend&gt;false&lt;/t:IsResend&gt;&lt;t:IsUnmodified&gt;true&lt;/t:IsUnmodified&gt;&lt;t:InternetMessageHeaders&gt;&lt;t:InternetMessageHeader HeaderName=\"Received\r\n                          \"&gt;from ex1.parent_company.local (10.0.36.13) by ex2.parent_company.local (10.0.36.14) with Microsoft SMTP Server (TLS) id 15.0.1473.3 via Mailbox Transport; Wed, 15 May 2019 13:49:29 -0400&lt;/t:InternetMessageHeader&gt;&lt;t:InternetMessageHeader HeaderName=\"Received\r\n                          \"&gt;from ex2.parent_company.local (10.0.36.14) by EX1.parent_company.local (10.0.36.13) with Microsoft SMTP Server (TLS) id 15.0.1473.3; Wed, 15 May 2019 13:49:29 -0400&lt;/t:InternetMessageHeader&gt;&lt;t:InternetMessageHeader HeaderName=\"Received\r\n                          \"&gt;from ex2.parent_company.local ([fe80::69e0:8dd2:36c7:ee74]) by EX2.parent_company.local ([fe80::69e0:8dd2:36c7:ee74%12]) with mapi id 15.00.1473.003; Wed, 15 May 2019 13:49:29 -0400&lt;/t:InternetMessageHeader&gt;&lt;t:InternetMessageHeader HeaderName=\"Content-Type \"&gt;application/ms-tnef&lt;/t:InternetMessageHeader&gt;&lt;t:InternetMessageHeader HeaderName=\"Content-Transfer-Encoding \"&gt;binary&lt;/t:InternetMessageHeader&gt;&lt;t:InternetMessageHeader HeaderName=\"Subject\r\n                          \"&gt;Accepted: I need a meeting request response in my inbox for debugging&lt;/t:InternetMessageHeader&gt;&lt;t:InternetMessageHeader HeaderName=\"Thread-Topic \"&gt;I need a meeting request response in my inbox for debugging&lt;/t:InternetMessageHeader&gt;&lt;t:InternetMessageHeader HeaderName=\"Thread-Index\r\n                          \"&gt;AdULRnbwosyAOWPxSuSGj1JtvGTLdAAAAliAAAACz/A=&lt;/t:InternetMessageHeader&gt;&lt;t:InternetMessageHeader HeaderName=\"Date \"&gt;Wed, 15 May 2019 13:49:29 -0400&lt;/t:InternetMessageHeader&gt;&lt;t:InternetMessageHeader HeaderName=\"Message-ID\r\n                          \"&gt;&amp;lt;9d0c3918cd1843778df749ee247fe4dd@EX2.parent_company.local&amp;gt;&lt;/t:InternetMessageHeader&gt;&lt;t:InternetMessageHeader HeaderName=\"Accept-Language \"&gt;en-CA, en-US&lt;/t:InternetMessageHeader&gt;&lt;t:InternetMessageHeader HeaderName=\"Content-Language \"&gt;en-US&lt;/t:InternetMessageHeader&gt;&lt;t:InternetMessageHeader HeaderName=\"X-MS-Exchange-Organization-SCL\r\n                          \"&gt;-1&lt;/t:InternetMessageHeader&gt;&lt;t:InternetMessageHeader HeaderName=\"X-MS-TNEF-Correlator \"&gt;&amp;lt;9d0c3918cd1843778df749ee247fe4dd@EX2.parent_company.local&amp;gt;&lt;/t:InternetMessageHeader&gt;&lt;t:InternetMessageHeader HeaderName=\"MIME-Version\r\n                          \"&gt;1.0&lt;/t:InternetMessageHeader&gt;&lt;t:InternetMessageHeader HeaderName=\"X-MS-Exchange-Transport-FromEntityHeader \"&gt;Hosted&lt;/t:InternetMessageHeader&gt;&lt;t:InternetMessageHeader HeaderName=\"X-MS-Exchange-Organization-MessageDirectionality\r\n                          \"&gt;Originating&lt;/t:InternetMessageHeader&gt;&lt;t:InternetMessageHeader HeaderName=\"X-MS-Exchange-Organization-AuthSource \"&gt;EX2.parent_company.local&lt;/t:InternetMessageHeader&gt;&lt;t:InternetMessageHeader HeaderName=\"X-MS-Exchange-Organization-AuthAs\r\n                          \"&gt;Internal&lt;/t:InternetMessageHeader&gt;&lt;t:InternetMessageHeader HeaderName=\"X-MS-Exchange-Organization-AuthMechanism \"&gt;03&lt;/t:InternetMessageHeader&gt;&lt;t:InternetMessageHeader HeaderName=\"X-Originating-IP \"&gt;[10.0.36.38]&lt;/t:InternetMessageHeader&gt;&lt;t:InternetMessageHeader HeaderName=\"X-MS-Exchange-Organization-Network-Message-Id\r\n                          \"&gt;ef6a25be-a08a-4029-28c0-08d6d95dae26&lt;/t:InternetMessageHeader&gt;&lt;t:InternetMessageHeader HeaderName=\"Return-Path \"&gt;SKim@co_name.com&lt;/t:InternetMessageHeader&gt;&lt;t:InternetMessageHeader HeaderName=\"X-MS-Exchange-Organization-AVStamp-Enterprise\r\n                          \"&gt;1.0&lt;/t:InternetMessageHeader&gt;&lt;/t:InternetMessageHeaders&gt;&lt;t:DateTimeSent&gt;2019-05-15T13:49:29-04:00&lt;/t:DateTimeSent&gt;&lt;t:DateTimeCreated&gt;2019-05-15T13:49:30-04:00&lt;/t:DateTimeCreated&gt;deleted...&lt;t:LastModifiedTime&gt;2019-05-15T13:49:34-04:00&lt;/t:LastModifiedTime&gt;&lt;t:IsAssociated&gt;false&lt;/t:IsAssociated&gt;&lt;t:WebClientReadFormQueryString&gt;deleted&lt;/t:WebClientReadFormQueryString&gt;&lt;t:ConversationId Id=deleted/&gt;&lt;t:UniqueBody BodyType=\" HTML \" IsTruncated=\"false \"&gt;&amp;lt;html&amp;gt;&amp;lt;body&amp;gt;&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;&lt;/t:UniqueBody&gt;&lt;t:TextBody BodyType=\"Text\r\n                          \" IsTruncated=\"false\r\n                          \"&gt;&amp;#xD;\\n&lt;/t:TextBody&gt;&lt;t:Sender&gt;&lt;t:Mailbox&gt;&lt;t:Name&gt;Name&lt;/t:Name&gt;&lt;t:EmailAddress&gt;name@co_name.com&lt;/t:EmailAddress&gt;&lt;t:RoutingType&gt;SMTP&lt;/t:RoutingType&gt;&lt;t:MailboxType&gt;Mailbox&lt;/t:MailboxType&gt;&lt;/t:Mailbox&gt;&lt;/t:Sender&gt;&lt;t:ToRecipients&gt;&lt;t:Mailbox&gt;&lt;t:Name&gt;My Full Name&lt;/t:Name&gt;&lt;t:EmailAddress&gt;my_user_name@co_name.com&lt;/t:EmailAddress&gt;&lt;t:RoutingType&gt;SMTP&lt;/t:RoutingType&gt;&lt;t:MailboxType&gt;Mailbox&lt;/t:MailboxType&gt;&lt;/t:Mailbox&gt;&lt;/t:ToRecipients&gt;&lt;t:IsReadReceiptRequested&gt;false&lt;/t:IsReadReceiptRequested&gt;&lt;t:IsDeliveryReceiptRequested&gt;false&lt;/t:IsDeliveryReceiptRequested&gt;&lt;t:ConversationIndex&gt;AdULRnbwosyAOWPxSuSGj1JtvGTLdAAAAliAAAAC6g8=&lt;/t:ConversationIndex&gt;&lt;t:ConversationTopic&gt;I need a meeting request response in my inbox for debugging&lt;/t:ConversationTopic&gt;&lt;t:From&gt;&lt;t:Mailbox&gt;&lt;t:Name&gt;name&lt;/t:Name&gt;&lt;t:EmailAddress&gt;name@co_name.com&lt;/t:EmailAddress&gt;&lt;t:RoutingType&gt;SMTP&lt;/t:RoutingType&gt;&lt;t:MailboxType&gt;Mailbox&lt;/t:MailboxType&gt;&lt;/t:Mailbox&gt;&lt;/t:From&gt;&lt;t:InternetMessageId&gt;delted&lt;/t:InternetMessageId&gt;&lt;t:IsRead&gt;true&lt;/t:IsRead&gt;&lt;t:ReceivedBy&gt;&lt;t:Mailbox&gt;&lt;t:Name&gt;My Full Name&lt;/t:Name&gt;&lt;t:EmailAddress&gt;my_user_name@co_name.com&lt;/t:EmailAddress&gt;&lt;t:RoutingType&gt;SMTP&lt;/t:RoutingType&gt;&lt;t:MailboxType&gt;Mailbox&lt;/t:MailboxType&gt;&lt;/t:Mailbox&gt;&lt;/t:ReceivedBy&gt;&lt;t:ReceivedRepresenting&gt;&lt;t:Mailbox&gt;&lt;t:Name&gt;My Full Name&lt;/t:Name&gt;&lt;t:EmailAddress&gt;my_user_name@co_name.com&lt;/t:EmailAddress&gt;&lt;t:RoutingType&gt;SMTP&lt;/t:RoutingType&gt;&lt;t:MailboxType&gt;Mailbox&lt;/t:MailboxType&gt;&lt;/t:Mailbox&gt;&lt;/t:ReceivedRepresenting&gt;&lt;t:AssociatedCalendarItemId Id=deleted/&gt;&lt;t:IsDelegated&gt;false&lt;/t:IsDelegated&gt;&lt;t:IsOutOfDate&gt;false&lt;/t:IsOutOfDate&gt;&lt;t:HasBeenProcessed&gt;true&lt;/t:HasBeenProcessed&gt;&lt;t:ResponseType&gt;Accept&lt;/t:ResponseType&gt;&lt;t:Start&gt;2019-05-15T14:00:00-04:00&lt;/t:Start&gt;&lt;t:End&gt;2019-05-15T14:30:00-04:00&lt;/t:End&gt;&lt;t:Location/&gt;&lt;t:CalendarItemType&gt;Single&lt;/t:CalendarItemType&gt;&lt;/t:MeetingResponse&gt;&lt;/m:Items&gt;&lt;/m:GetItemResponseMessage&gt;&lt;/m:ResponseMessages&gt;&lt;/m:GetItemResponse&gt;&lt;/s:Body&gt;&lt;/s:Envelope&gt;'\r\n\r\nDEBUG:exchangelib.util:Session 27048 thread 2440: Useful response from https://cloudmail.firm_name.com/EWS/Exchange.asmx\r\nDEBUG:exchangelib.protocol:Server cloudmail.firm_name.com: Releasing session 27048\r\nDEBUG:exchangelib.services:GetItem._get_elements result 1 of 1 is ready</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 1218, "user_id": 5827010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55e80aa4da59920d360f3aafdd3111d5?s=128&d=identicon&r=PG&f=1", "display_name": "9dogs", "link": "https://stackoverflow.com/users/5827010/9dogs"}, "edited": false, "score": 1, "creation_date": 1557948728, "post_id": 56156396, "comment_id": 98941968, "body": "Looks like duplicate to <a href=\"https://stackoverflow.com/questions/22219004/grouping-rows-in-list-in-pandas-groupby\" title=\"grouping rows in list in pandas groupby\">stackoverflow.com/questions/22219004/&hellip;</a>"}, {"owner": {"reputation": 499, "user_id": 8267816, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-z_VU4KF4r-8/AAAAAAAAAAI/AAAAAAAAAfA/JdfdO9JwmVc/photo.jpg?sz=128", "display_name": "Snehaa Ganesan", "link": "https://stackoverflow.com/users/8267816/snehaa-ganesan"}, "edited": false, "score": 0, "creation_date": 1557948870, "post_id": 56156396, "comment_id": 98942034, "body": "default <code>aggfunc</code> of pivot_table is numpy.mean, which is why you&#39;re getting the average."}, {"owner": {"reputation": 1, "user_id": 10428981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/305ea6fc2d8ba1014df4163b0c40220e?s=128&d=identicon&r=PG&f=1", "display_name": "Omegalul ", "link": "https://stackoverflow.com/users/10428981/omegalul"}, "reply_to_user": {"reputation": 1218, "user_id": 5827010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55e80aa4da59920d360f3aafdd3111d5?s=128&d=identicon&r=PG&f=1", "display_name": "9dogs", "link": "https://stackoverflow.com/users/5827010/9dogs"}, "edited": false, "score": 0, "creation_date": 1557950594, "post_id": 56156396, "comment_id": 98942725, "body": "@9dogs In my case I have over 500 names. So applying the solutions described in that post does not seem to be possible. But I could be missing something?"}, {"owner": {"reputation": 2162, "user_id": 3014097, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/47193d2bbe5b654700776fd2a7d14868?s=128&d=identicon&r=PG&f=1", "display_name": "dan_g", "link": "https://stackoverflow.com/users/3014097/dan-g"}, "edited": false, "score": 0, "creation_date": 1557951203, "post_id": 56156396, "comment_id": 98942976, "body": "did you try? you would pass it to to the <code>aggfunc</code> parameter: <code>pd.pivot_table(df, index=&#39;names&#39;, values=&#39;income&#39;, aggfunc=list)</code>"}, {"owner": {"reputation": 1, "user_id": 10428981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/305ea6fc2d8ba1014df4163b0c40220e?s=128&d=identicon&r=PG&f=1", "display_name": "Omegalul ", "link": "https://stackoverflow.com/users/10428981/omegalul"}, "reply_to_user": {"reputation": 2162, "user_id": 3014097, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/47193d2bbe5b654700776fd2a7d14868?s=128&d=identicon&r=PG&f=1", "display_name": "dan_g", "link": "https://stackoverflow.com/users/3014097/dan-g"}, "edited": false, "score": 0, "creation_date": 1557951553, "post_id": 56156396, "comment_id": 98943112, "body": "@dan_g Thank you for your solution. I wasn&#39;t aware of the aggfunc possibilities besides average and sum."}], "owner": {"reputation": 1, "user_id": 10428981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/305ea6fc2d8ba1014df4163b0c40220e?s=128&d=identicon&r=PG&f=1", "display_name": "Omegalul ", "link": "https://stackoverflow.com/users/10428981/omegalul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1557948485, "creation_date": 1557948485, "question_id": 56156396, "link": "https://stackoverflow.com/questions/56156396/merging-data-in-csv-file-using-pandas", "title": "Merging data in csv-file using Pandas", "body": "<p>I got a csv-file containing names and income. Some names are shown multiple times. I wanted to merge these to get only 1 unique name each with the income next to it using Pandas. </p>\n\n<p>I thought pivot would be the solution for my problem. I tried the following: </p>\n\n<pre><code>df = pd.read_csv(\"properties.csv\")\ndf = df.iloc[1:]\ndf = pd.DataFrame(df, columns= ['income', 'names'])\ndf['source'] = df['income'].astype(int)\n\ntest = pd.pivot_table(df, index='names', values='income')\n</code></pre>\n\n<p>What the problem is that I would like to numbers itself rather than the average.</p>\n\n<p>For example:</p>\n\n<p>name1: 2,3,2,3</p>\n\n<p>name2: 1,2,4,1</p>\n\n<p>Instead of:</p>\n\n<p>name1: 2.5</p>\n\n<p>name2: 2</p>\n"}, {"tags": ["javascript", "python", "flask"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1557948401, "post_id": 56156330, "comment_id": 98941824, "body": "Why would you use BeautifulSoup here? What would you be using it for?"}, {"owner": {"reputation": 18299, "user_id": 2648811, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ee5af60b10a2d5fd8c864437a2062f0a?s=128&d=identicon&r=PG", "display_name": "Green Cloak Guy", "link": "https://stackoverflow.com/users/2648811/green-cloak-guy"}, "edited": false, "score": 0, "creation_date": 1557948599, "post_id": 56156330, "comment_id": 98941921, "body": "Problem: Flask runs on the server-side, while Javascript runs on the client-side. The only way to make them interact would be to send requests back and forth. There&#39;s probably some Javascript library you can use for this purpose, if you want to prettify data for the user - or you might need to create a new endpoint in Flask and have the Javascript send requests to it."}, {"owner": {"reputation": 1486, "user_id": 8006854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b39eda71c15822dc215081454968c84e?s=128&d=identicon&r=PG&f=1", "display_name": "Tobin", "link": "https://stackoverflow.com/users/8006854/tobin"}, "edited": false, "score": 0, "creation_date": 1557955048, "post_id": 56156330, "comment_id": 98944467, "body": "You can use AJAX to asynchronously send the data to flask, without having to reload your page. More details <a href=\"https://stackoverflow.com/questions/52870184/get-data-from-html-and-do-some-operation-on-it-and-pass-the-data-back-to-the-f/52883461#52883461\">here</a>"}], "owner": {"reputation": 513, "user_id": 10485625, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217741712717286/picture?type=large", "display_name": "userHG", "link": "https://stackoverflow.com/users/10485625/userhg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1557948226, "creation_date": 1557948226, "question_id": 56156330, "link": "https://stackoverflow.com/questions/56156330/access-javascript-variable-in-python-class-in-flask", "title": "Access Javascript variable in python class in Flask", "body": "<p>I'm trying to access an array I defined in my HTML/Javascript class <code>view.html</code> of a Flask application.</p>\n\n<p><code>view.html</code></p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n    &lt;input type=\"checkbox\" class=\"checks\" value=\"NEWS_AND_MAGAZINES\"&gt; NEWS_AND_MAGAZINES &lt;br/&gt;\n    &lt;input type=\"checkbox\" class=\"checks\" value=\"ART_AND_DESIGN\"&gt; ART_AND_DESIGN &lt;br/&gt;\n    &lt;input type=\"checkbox\" class=\"checks\" value=\"AUTO_AND_VEHICLES\"&gt; AUTO_AND_VEHICLES &lt;br/&gt;&lt;br/&gt;\n\n    &lt;a href=\"#\" onclick=\"getValue();return false;\" class=\"btn btn-success\"&gt;Submit&lt;/a&gt;\n\n&lt;/div&gt;\n\n&lt;script&gt;\n    function getValue() {\n\n        var checks = document.getElementsByClassName('checks')\n        var chosen_categories = []\n\n        for (i = 0; i&lt;3; i++) {\n            if (checks[i].checked === true) {\n                chosen_categories.push(checks[i].value)\n            }\n        }\n        alert(chosen_categories);\n    }\n\n&lt;/script&gt;\n</code></pre>\n\n<p><code>main.py</code> :</p>\n\n<pre><code>@app.route('/view')\ndef view():\n    return render_template(\"GooglePlayStore/view.html\")\n</code></pre>\n\n<p>I want to access  the <code>chosen_categories</code> array to use it with BeautifulSoup and other python libraries that are easier to use with Python. Thank you</p>\n"}]