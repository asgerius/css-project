[{"tags": ["python", "loops", "selenium"], "comments": [{"owner": {"reputation": 4739, "user_id": 5403468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZJ8BE.jpg?s=128&g=1", "display_name": "Tiw", "link": "https://stackoverflow.com/users/5403468/tiw"}, "edited": false, "score": 0, "creation_date": 1563413297, "post_id": 57085374, "comment_id": 100694717, "body": "Please paste code as text here, you can format it with the <code>{}</code> button, don&#39;t paste pure text content as picture here."}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 11800117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/955ec686de27eed8a5221b2d544a589d?s=128&d=identicon&r=PG&f=1", "display_name": "chadlei", "link": "https://stackoverflow.com/users/11800117/chadlei"}, "edited": false, "score": 0, "creation_date": 1563475745, "post_id": 57086888, "comment_id": 100722911, "body": "so im trying to print out the highlighted text in the html: &quot;.com Ownership support&quot;, but in your code you jump from table to tr, dont i have to include the tbody?"}, {"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "reply_to_user": {"reputation": 105, "user_id": 11800117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/955ec686de27eed8a5221b2d544a589d?s=128&d=identicon&r=PG&f=1", "display_name": "chadlei", "link": "https://stackoverflow.com/users/11800117/chadlei"}, "edited": false, "score": 0, "creation_date": 1563480223, "post_id": 57086888, "comment_id": 100724716, "body": "Not required when you are dealing with css."}, {"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "reply_to_user": {"reputation": 105, "user_id": 11800117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/955ec686de27eed8a5221b2d544a589d?s=128&d=identicon&r=PG&f=1", "display_name": "chadlei", "link": "https://stackoverflow.com/users/11800117/chadlei"}, "edited": false, "score": 0, "creation_date": 1563480352, "post_id": 57086888, "comment_id": 100724771, "body": "If you are trying to get the text associated with link, then try <code>column.find_element_by_xpath(&quot;.&#47;&#47;a&quot;).text</code> and <code>link.text</code> respectively in the above answer."}, {"owner": {"reputation": 105, "user_id": 11800117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/955ec686de27eed8a5221b2d544a589d?s=128&d=identicon&r=PG&f=1", "display_name": "chadlei", "link": "https://stackoverflow.com/users/11800117/chadlei"}, "edited": false, "score": 0, "creation_date": 1563480902, "post_id": 57086888, "comment_id": 100724984, "body": "i got the text thank you! would you happen to know how to work off using a html doc instead of a url link as a webdriver? i have to log in each time to test the site so i want to skip it all"}, {"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "reply_to_user": {"reputation": 105, "user_id": 11800117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/955ec686de27eed8a5221b2d544a589d?s=128&d=identicon&r=PG&f=1", "display_name": "chadlei", "link": "https://stackoverflow.com/users/11800117/chadlei"}, "edited": false, "score": 0, "creation_date": 1563481239, "post_id": 57086888, "comment_id": 100725110, "body": "Cool. If you want to load the local html doc then you can use <code>url = r&quot;file:&#47;&#47;&#47;C:&#47;Users&#47;xxx&#47;Desktop&#47;sample.html&quot;</code> and then <code>driver.get(url)</code> should load the local page."}, {"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "reply_to_user": {"reputation": 105, "user_id": 11800117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/955ec686de27eed8a5221b2d544a589d?s=128&d=identicon&r=PG&f=1", "display_name": "chadlei", "link": "https://stackoverflow.com/users/11800117/chadlei"}, "edited": false, "score": 0, "creation_date": 1563481285, "post_id": 57086888, "comment_id": 100725129, "body": "Dont&#39; forget about <code>file:&#47;&#47;&#47;</code> at the beginning of the file path."}, {"owner": {"reputation": 105, "user_id": 11800117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/955ec686de27eed8a5221b2d544a589d?s=128&d=identicon&r=PG&f=1", "display_name": "chadlei", "link": "https://stackoverflow.com/users/11800117/chadlei"}, "edited": false, "score": 0, "creation_date": 1563481984, "post_id": 57086888, "comment_id": 100725394, "body": "if the python file and html file are in the same directory, do still need to specify the whole path or can i just do file:///sample.html?"}, {"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "reply_to_user": {"reputation": 105, "user_id": 11800117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/955ec686de27eed8a5221b2d544a589d?s=128&d=identicon&r=PG&f=1", "display_name": "chadlei", "link": "https://stackoverflow.com/users/11800117/chadlei"}, "edited": false, "score": 0, "creation_date": 1563509204, "post_id": 57086888, "comment_id": 100731127, "body": "you have to provide the entire path as url. Please accept the answer if you feel the issue is resolved."}], "tags": [], "owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "is_accepted": true, "score": 2, "last_activity_date": 1563447717, "last_edit_date": 1563447717, "creation_date": 1563422028, "answer_id": 57086888, "question_id": 57085374, "link": "https://stackoverflow.com/questions/57085374/iterate-through-table-rows-and-print-a-href-text-with-python-selenium/57086888#57086888", "title": "Iterate through table rows and print a href text with Python Selenium", "body": "<p>Reason for the issue is a wrong XPath. The table has <code>class</code> with <code>aui</code> but not <code>id</code>.</p>\n\n<p>Correct the XPath as below.</p>\n\n<pre><code>  //table[@class='aui']//tr\n</code></pre>\n\n<p>This should give you a list of rows and then you can iterate through them.</p>\n\n<p><strong>Script:</strong> if you want to print the text in the cell then use this.</p>\n\n<pre><code>rows = driver.find_element_by_css_selector(\"table.auti  tr\")\nfor row in rows:\n    # get the hrefs\n    columsWithLink = row.find_element_by_xpath(\".//td[a]\")\n    for column in columsWithLink:\n        # print column text\n        print (column.text)\n        # print link href\n        print(column.find_element_by_xpath(\".//a\").get_attribute(\"href\"))\n</code></pre>\n\n<p><strong>Script:</strong> if you just want to print link hrefs then use the below</p>\n\n<pre><code>rows = driver.find_element_by_css_selector(\"table.auti  tr\")\nfor row in rows:\n    # get the hrefs\n    links = row.find_element_by_xpath(\".//td/a\")\n    for link in links:\n        # print link href\n        print(link.get_attribute(\"href\"))\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 11800117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/955ec686de27eed8a5221b2d544a589d?s=128&d=identicon&r=PG&f=1", "display_name": "chadlei", "link": "https://stackoverflow.com/users/11800117/chadlei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 550, "favorite_count": 0, "accepted_answer_id": 57086888, "answer_count": 1, "score": 0, "last_activity_date": 1563447717, "creation_date": 1563407503, "last_edit_date": 1563413297, "question_id": 57085374, "link": "https://stackoverflow.com/questions/57085374/iterate-through-table-rows-and-print-a-href-text-with-python-selenium", "title": "Iterate through table rows and print a href text with Python Selenium", "body": "<p>My overall goal is to iterate through every tr in this table and go through several <code>td</code>'s per <code>tr</code> and print out the text in them. </p>\n\n<p>I've tried going back as far as the body yet still no luck. ideally I would like to just run a <code>for</code>loop through <code>table[@id='aui']/tbody/tr[i]/td[i]</code> where <code>i</code> is the variable in the range(0, sizeOfTable)</p>\n\n<pre><code>ele = driver.find_elements_by_xpath(\"//body/div[@id='page']/section[@id='content']/div[@class='aui-page-panel']/div[@class='aui-page-panel-inner']/section[@class='aui-page-panel-content']/div[@class='aui-page-panel']/div[@class='aui-page-panel-inner']/section[@class='aui-page-panel-content']/div[@class='module']/div[@id='projects']/div[@class='p-list']/table[@id='aui']/tbody/tr[1]/td[1]\")\n</code></pre>\n\n<p>right now when I run <code>print(ele.text)</code> after creating <code>ele</code>, it just prints out an empty list</p>\n\n<p><img src=\"https://i.stack.imgur.com/7nxQi.png\" alt=\"this is the html I&#39;m working off of:\"></p>\n"}, {"tags": ["python", "bash", "jupyter-notebook"], "comments": [{"owner": {"reputation": 573, "user_id": 3911355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac5a661e8c2c34e2e0b0fa6c57bfd513?s=128&d=identicon&r=PG", "display_name": "mgrollins", "link": "https://stackoverflow.com/users/3911355/mgrollins"}, "edited": false, "score": 1, "creation_date": 1563407742, "post_id": 57085373, "comment_id": 100693744, "body": "The double percent sign is a &quot;magic&quot; call to the OS. <code>cat</code> is a unix-style command line utility to echo a file to standard out. The asterisk is a glob wild-card on the command line. So this cell calls the OS to echo some text from multiple files probably into the cell."}, {"owner": {"reputation": 1136, "user_id": 8434189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gawtn.jpg?s=128&g=1", "display_name": "mahmoudafer", "link": "https://stackoverflow.com/users/8434189/mahmoudafer"}, "edited": false, "score": 0, "creation_date": 1563407825, "post_id": 57085373, "comment_id": 100693764, "body": "It&#39;s a linux command, check <a href=\"https://linuxize.com/post/linux-cat-command/\" rel=\"nofollow noreferrer\">linuxize.com/post/linux-cat-command</a>"}], "answers": [{"tags": [], "owner": {"reputation": 8421, "user_id": 4381487, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YNB1x.jpg?s=128&g=1", "display_name": "gilch", "link": "https://stackoverflow.com/users/4381487/gilch"}, "is_accepted": false, "score": 1, "last_activity_date": 1563409495, "last_edit_date": 1563409495, "creation_date": 1563408121, "answer_id": 57085439, "question_id": 57085373, "link": "https://stackoverflow.com/questions/57085373/in-a-jupyter-notebook-in-python-what-does-bash-cat-testtext3-txt-decodes/57085439#57085439", "title": "In a jupyter notebook in Python, what does `%%bash cat Testtext3.txt.*.decodes` do?", "body": "<p>The <code>%%</code> starts a \"cell magic\", which applies to the cell (as opposed to the <code>%</code> \"line magic\" that only affects one line). This particular one changes the language interpreter used for that cell from Python to BASH (the Bourne-Again SHell, used by Unix variants like MacOS and Linux).</p>\n\n<p>You can see documentation for what a magic does by entering it into Jupyter (or IPython) followed by a question mark, like <code>%%bash?</code>. Magic is an IPython thing that's not part of Python proper. You'll see it in notebooks, but not in pure Python modules.</p>\n\n<p>The code</p>\n\n<pre><code>cat file.txt.*.decodes\n</code></pre>\n\n<p>Uses a glob (the <code>*</code>) to get all file names in the current working directory that start with <code>file.txt.</code> and end with <code>.decodes</code> and uses the <code>cat</code> command-line program to print their con<strong>cat</strong>enated contents to stdout. This could certainly have been done in Python, but it would be a bit more verbose.</p>\n"}], "owner": {"reputation": 4079, "user_id": 3259896, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/641c30a7b383022f22b53c8cedb04e3f?s=128&d=identicon&r=PG&f=1", "display_name": "SantoshGupta7", "link": "https://stackoverflow.com/users/3259896/santoshgupta7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1563409495, "creation_date": 1563407498, "question_id": 57085373, "link": "https://stackoverflow.com/questions/57085373/in-a-jupyter-notebook-in-python-what-does-bash-cat-testtext3-txt-decodes", "title": "In a jupyter notebook in Python, what does `%%bash cat Testtext3.txt.*.decodes` do?", "body": "<p>I am wondering what does</p>\n\n<pre><code>%%bash \ncat file.txt.*.decodes\n</code></pre>\n\n<p>do?</p>\n\n<p>I got this line from here</p>\n\n<p><a href=\"https://github.com/GoogleCloudPlatform/training-data-analyst/blob/master/courses/machine_learning/deepdive/09_sequence/poetry.ipynb\" rel=\"nofollow noreferrer\">https://github.com/GoogleCloudPlatform/training-data-analyst/blob/master/courses/machine_learning/deepdive/09_sequence/poetry.ipynb</a></p>\n\n<p>Here is the original text</p>\n\n<pre><code>%%bash  \nDECODE_FILE=data/poetry/rumi_leads.txt\ncat ${DECODE_FILE}.*.decodes\n</code></pre>\n"}, {"tags": ["python", "kivy", "kivy-language"], "answers": [{"tags": [], "owner": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "is_accepted": true, "score": 2, "last_activity_date": 1563413157, "creation_date": 1563413157, "answer_id": 57085877, "question_id": 57085343, "link": "https://stackoverflow.com/questions/57085343/how-can-i-change-a-value-of-pos-hint-after-clicking-on-the-button/57085877#57085877", "title": "How can I change a value of pos_hint after clicking on the button?", "body": "<p>Unfortunately, using <code>self.pic_pos</code> in your code does not set up any bindings, so your <code>pos_hint</code> is set to <code>{'x': -0.8, 'y': 0}</code> and changing <code>self.pic_pos</code> will have no effect. On way to do what you want is to use <code>kv</code> to take advantage of the bindings that <code>kv</code> sets up for you. Another way is to set up the bindings yourself as:</p>\n\n<pre><code>class MainScreen(Screen):\n\n    btns = ObjectProperty(None)\n    img = ObjectProperty(None)\n    pic_pos = NumericProperty(-0.8)\n\n    def __init__(self, **kwargs):\n        super(MainScreen, self).__init__(**kwargs)\n\n        self.pic = Image(source='tester.png', pos_hint={'x': self.pic_pos, 'y': 0})\n        self.bind(pic_pos=self.handle_pos_hint_change)\n\n    def handle_pos_hint_change(self, instance, value):\n        self.pic.pos_hint['x'] = value\n        self.do_layout()\n</code></pre>\n"}], "owner": {"reputation": 353, "user_id": 5916316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oUSvR.jpg?s=128&g=1", "display_name": "Mike Ru", "link": "https://stackoverflow.com/users/5916316/mike-ru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 57085877, "answer_count": 1, "score": 1, "last_activity_date": 1563413157, "creation_date": 1563407277, "last_edit_date": 1563407646, "question_id": 57085343, "link": "https://stackoverflow.com/questions/57085343/how-can-i-change-a-value-of-pos-hint-after-clicking-on-the-button", "title": "How can I change a value of pos_hint after clicking on the button?", "body": "<p>I have MainScreen class. I need to move my picture after clicking on the button in my 'next' funcktion. I am trying to set a new value in the 'next' funcktion, but it doesn't change the value.</p>\n\n<pre><code>class MainScreen(Screen):\n\n    btns = ObjectProperty(None)\n    img = ObjectProperty(None)\n\n    pic_pos = -0.8\n\n    def __init__(self, **kwargs):\n        super(MainScreen, self).__init__(**kwargs)\n\n        self.pic = Image(source='img/icon-back.png', pos_hint={'x': self.pic_pos, 'y': 0})\n        self.img.add_widget(self.pic)\n\n\n    def on_btns(self, *args):\n        for x in word_list:\n            self.btn = Button(text=x)\n            self.btn.bind(on_press=self.next)\n            self.btns.add_widget(self.btn)\n\n    # here I am trying to change the value\n    def next(self, instance):\n        self.pic_pos = 0.3\n</code></pre>\n\n<p>How can I do that ?</p>\n"}, {"tags": ["python", "web-scraping"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1563407712, "post_id": 57085340, "comment_id": 100693736, "body": "<code>soup.find(class_=&#39;items-view.is-grid&#39;)</code> isn&#39;t finding anything."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11800058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/407121e2dee07c4873836d9313694de4?s=128&d=identicon&r=PG&f=1", "display_name": "Curious_soul", "link": "https://stackoverflow.com/users/11800058/curious-soul"}, "edited": false, "score": 0, "creation_date": 1564673655, "post_id": 57085426, "comment_id": 101117120, "body": "How do I extract an image from the brand class, since the text is not available?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 11, "user_id": 11800058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/407121e2dee07c4873836d9313694de4?s=128&d=identicon&r=PG&f=1", "display_name": "Curious_soul", "link": "https://stackoverflow.com/users/11800058/curious-soul"}, "edited": false, "score": 0, "creation_date": 1564678804, "post_id": 57085426, "comment_id": 101119629, "body": "<code>soup.select(&quot;.item-brand img&quot;)</code> will find all the images. Then you can get the <code>title</code> and <code>src</code> attributes from them."}, {"owner": {"reputation": 11, "user_id": 11800058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/407121e2dee07c4873836d9313694de4?s=128&d=identicon&r=PG&f=1", "display_name": "Curious_soul", "link": "https://stackoverflow.com/users/11800058/curious-soul"}, "edited": false, "score": 0, "creation_date": 1564681490, "post_id": 57085426, "comment_id": 101120772, "body": "Do you mind shooting me an email at (yeahtweets@gmail.com) I have some troubling questions to ask?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 11, "user_id": 11800058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/407121e2dee07c4873836d9313694de4?s=128&d=identicon&r=PG&f=1", "display_name": "Curious_soul", "link": "https://stackoverflow.com/users/11800058/curious-soul"}, "edited": false, "score": 0, "creation_date": 1564684782, "post_id": 57085426, "comment_id": 101122218, "body": "Sorry, I don&#39;t provide private consulting, I just answer here in public."}, {"owner": {"reputation": 11, "user_id": 11800058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/407121e2dee07c4873836d9313694de4?s=128&d=identicon&r=PG&f=1", "display_name": "Curious_soul", "link": "https://stackoverflow.com/users/11800058/curious-soul"}, "edited": false, "score": 0, "creation_date": 1564711615, "post_id": 57085426, "comment_id": 101129147, "body": "Here is the link to all the code: <a href=\"https://github.com/elisee10/Web-Scraping-Project-2/tree/master\" rel=\"nofollow noreferrer\">github.com/elisee10/Web-Scraping-Project-2/tree/master</a> |                                                                     The error message is:   line 41     Deals_of_the_day.to_csv(&#39;New_Egg_Deals.csv&#39;) Invalid syntax                    ^"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 11, "user_id": 11800058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/407121e2dee07c4873836d9313694de4?s=128&d=identicon&r=PG&f=1", "display_name": "Curious_soul", "link": "https://stackoverflow.com/users/11800058/curious-soul"}, "edited": false, "score": 0, "creation_date": 1564755957, "post_id": 57085426, "comment_id": 101146930, "body": "You have line 38 commented out. It contains the closing brace and parentheses for <code>Deals_of_the_day = pd.DataFrame(</code>"}, {"owner": {"reputation": 11, "user_id": 11800058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/407121e2dee07c4873836d9313694de4?s=128&d=identicon&r=PG&f=1", "display_name": "Curious_soul", "link": "https://stackoverflow.com/users/11800058/curious-soul"}, "edited": false, "score": 0, "creation_date": 1564871611, "post_id": 57085426, "comment_id": 101173272, "body": "Error: This is the error i am getting, do i need a module for image?  line 19, in &lt;module&gt; maker = [soup.select(&quot;.item-brand img&quot;).get_img()for item in items]  py&quot;, line 19, in &lt;listcomp&gt; | maker [soup.select(&quot;.item-brand img&quot;).get_img()for item in items] AttributeError: &#39;list&#39; object has no attribute &#39;get_img&#39;"}, {"owner": {"reputation": 11, "user_id": 11800058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/407121e2dee07c4873836d9313694de4?s=128&d=identicon&r=PG&f=1", "display_name": "Curious_soul", "link": "https://stackoverflow.com/users/11800058/curious-soul"}, "edited": false, "score": 0, "creation_date": 1564871776, "post_id": 57085426, "comment_id": 101173290, "body": "Also, do you mind telling me what I can improve on my code or change?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 11, "user_id": 11800058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/407121e2dee07c4873836d9313694de4?s=128&d=identicon&r=PG&f=1", "display_name": "Curious_soul", "link": "https://stackoverflow.com/users/11800058/curious-soul"}, "edited": false, "score": 0, "creation_date": 1564876371, "post_id": 57085426, "comment_id": 101173890, "body": "There&#39;s no <code>get_img()</code> method in Beautiful Soup, where did you get that from? What is it supposed to do? If you want to get the title, it would be <code>[img[&#39;title&#39;] for img in soup.select(&quot;.item-brand img&quot;)]</code>"}, {"owner": {"reputation": 11, "user_id": 11800058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/407121e2dee07c4873836d9313694de4?s=128&d=identicon&r=PG&f=1", "display_name": "Curious_soul", "link": "https://stackoverflow.com/users/11800058/curious-soul"}, "edited": false, "score": 0, "creation_date": 1564967163, "post_id": 57085426, "comment_id": 101190305, "body": "Okay, thanks, I got that fixed, but my results are not printing out every appropriate value. It is more like ;                                                 item-title  ...                          price-ship 0   CORSAIR RMx Series RM1000X 1000W 80 PLUS GOLD ...  ...   \\r\\n        Free Shipping\\r\\n    and leaving the model, image, price saved, etc"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 11, "user_id": 11800058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/407121e2dee07c4873836d9313694de4?s=128&d=identicon&r=PG&f=1", "display_name": "Curious_soul", "link": "https://stackoverflow.com/users/11800058/curious-soul"}, "edited": false, "score": 0, "creation_date": 1565030576, "post_id": 57085426, "comment_id": 101215012, "body": "I&#39;m not sure exactly what you&#39;re doing, but you seem to be getting further from the original question."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 11, "user_id": 11800058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/407121e2dee07c4873836d9313694de4?s=128&d=identicon&r=PG&f=1", "display_name": "Curious_soul", "link": "https://stackoverflow.com/users/11800058/curious-soul"}, "edited": false, "score": 0, "creation_date": 1565030792, "post_id": 57085426, "comment_id": 101215104, "body": "Not sure how you&#39;re relating the images returned by <code>soup.select(&quot;.item-brand img&quot;)</code> with the deals in <code>all_deals</code>."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1563408016, "creation_date": 1563408016, "answer_id": 57085426, "question_id": 57085340, "link": "https://stackoverflow.com/questions/57085340/hello-i-am-trying-to-web-scrape-a-website-to-get-their-daily-deals-but-running/57085426#57085426", "title": "Hello, I am trying to web scrape a website to get their daily deals but running into errors with find_all", "body": "<p>You can't match multiple classes with <code>soup.find()</code>; the <code>class_</code> argument is treated as a single class to search for. Use <code>soup.select()</code> instead:</p>\n\n<pre><code>all_deals = soup.select(\".items-view.is-grid\")\n</code></pre>\n\n<p>You can combine this with the <code>.item-container</code> class:</p>\n\n<pre><code>item = soup.select(\".items-view.is-group .item-container\")\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11800058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/407121e2dee07c4873836d9313694de4?s=128&d=identicon&r=PG&f=1", "display_name": "Curious_soul", "link": "https://stackoverflow.com/users/11800058/curious-soul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1563408016, "creation_date": 1563407257, "last_edit_date": 1563407685, "question_id": 57085340, "link": "https://stackoverflow.com/questions/57085340/hello-i-am-trying-to-web-scrape-a-website-to-get-their-daily-deals-but-running", "title": "Hello, I am trying to web scrape a website to get their daily deals but running into errors with find_all", "body": "<p>I am trying to web scrape a website (new Egg) for daily deals but I am encountering an issue with the find_all parameter.</p>\n\n<pre><code>#imported Modules and Libraries\nfrom bs4 import BeautifulSoup\nimport requests\nimport pandas as pd\n\n\n#Website to be scraped\nwebsite = requests.get('https://www.newegg.com/DailyDeal?icid=368517')\nsoup = BeautifulSoup(website.content, 'html.parser')\n\n\n#Getting container with all featured items\nall_deals = soup.find(class_='items-view.is-grid')\n\n#Featured Items in container\nitem = all_deals.find_all(class_= 'item-container')\n\n#putting values in a list\nproduct_title = [item.find(class_= 'item-title').text()for item in item]\nmaker = [item.find(class_='item-brand').text()for item in item]\nprice_before = [item.find(class_= 'price-was').text()for item in item]\nprice_now = [item.find(class_= 'price-current').text()for item in item]\nprice_saved = [item.find(class_= 'price-save').text()for item in item]\nshipping = [item.find(class_= 'price-ship').text()for item in item]\nproduct_link = [item.find('a',['href']) for item in item]\n\nDeals_of_the_day = pd.DataFrame(\n    {\n    'item-title': product_title,\n    'item-brand': maker,\n    'price-was': price_before,\n    'price-current': price_now,\n    'price-save': price_saved,\n    'price-ship': shipping,\n   # 'a',['href']: product_link,\n     })\n\nprint(Deals_of_the_day)\nDeals_of_the_day.to_csv('New_Egg_Daily_Deals.csv')\n</code></pre>\n\n<p>I expect them to be in a csv file. </p>\n\n<pre><code>Error: \nTraceback (most recent call last):\n  File \"C:/Users/elise/PycharmProjectsPython Boring Projects/Web Scraping New_Egg Website .py\", line 16, in &lt;module&gt;\n    item = all_deals.find_all(class_= 'item-container')\nAttributeError: 'NoneType' object has no attribute 'find_all'\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pyqt", "pyqt5"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user11729774"}, "edited": false, "score": 0, "creation_date": 1563447104, "post_id": 57085951, "comment_id": 100707158, "body": "Nice to know, though with quit instruction app will eliminated too. It works, thank you so much :)"}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 1, "last_activity_date": 1563413929, "creation_date": 1563413929, "answer_id": 57085951, "question_id": 57085292, "link": "https://stackoverflow.com/questions/57085292/python-shell-restart-after-while-loop-with-pyqt5/57085951#57085951", "title": "Python Shell restart after while loop with PyQt5", "body": "<p>The problem is that QApplication is not necessarily eliminated and therefore you would be creating more than one QApplication what Qt forbids, a better solution is to rethink it verifying that if it does not exist then create a new one:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import sys\nfrom PyQt5 import QtCore, QtWidgets, QtWebEngineWidgets\n\ncontinuer = True\nwhile continuer:\n    print(\"Application created\")\n    # Create application\n    app = QtWidgets.QApplication.instance()\n    if app is None:\n        app = QtWidgets.QApplication(sys.argv)\n    # Add window\n    win = QtWidgets.QWidget()\n    win.setWindowTitle(\"My first rendering\")\n    # Create QWebEngineView\n    view = QtWebEngineWidgets.QWebEngineView()\n    view.setUrl(QtCore.QUrl(\"https://google.com\"))\n    # Add layout\n    layout = QtWidgets.QVBoxLayout(win)\n    win.setLayout(layout)\n    # Add QWebView to the layout\n    layout.addWidget(view)\n    # Show window, run app\n    win.show()\n    QtCore.QTimer.singleShot(7 * 1000, win.close)\n    QtCore.QTimer.singleShot(7 * 1000, app.quit)\n    print(\"View displayed\")\n    # While loop\n    app.exec_()\n    print(\"Close Application\")\n\nprint(\"End While Loop\")\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11729774"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "accepted_answer_id": 57085951, "answer_count": 1, "score": 1, "last_activity_date": 1563413929, "creation_date": 1563406822, "last_edit_date": 1563413272, "question_id": 57085292, "link": "https://stackoverflow.com/questions/57085292/python-shell-restart-after-while-loop-with-pyqt5", "title": "Python Shell restart after while loop with PyQt5", "body": "<p>actually I try to do a displayer of html page. I have some of list of html that I need to display, each page must stay visible while x secondes. \nBut, after the first page is display, the application crash and the python shell restart in consequence. </p>\n\n<p>On my mind, I would create the window to display the page and close the application because after I will try to display png/jpg, so I need to close app to use Pygame for pictures and re-build the app to display html page after. \nMy list looking for it : \nhtml page/html page/picture/html page/picture/picture</p>\n\n<p>So I have build a sample code to test in while boucle the displayer :</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from PyQt5 import QtWidgets, QtWebEngineWidgets, QtCore\nimport sys\n\ncontinuer = True\nwhile continuer:\n    print(\"Application created\")\n    # Create application\n    app = QtWidgets.QApplication(sys.argv)\n\n    # Add window       \n    win = QtWidgets.QWidget()\n    win.setWindowTitle('My first rendering')\n\n    # Add layout\n    layout = QtWidgets.QVBoxLayout()\n    win.setLayout(layout)\n\n    # Create QWebView\n    view = QtWebEngineWidgets.QWebEngineView()\n\n    view.setUrl(QtCore.QUrl('https://google.com'))\n\n    # Add QWebView to the layout\n    layout.addWidget(view)\n\n    # Show window, run app\n    win.show()\n\n    QtCore.QTimer.singleShot(7*1000, win.close)\n    QtCore.QTimer.singleShot(7*1000, app.quit)\n    print(\"View displayed\")\n\n    # While loop\n    app.exec_()\n    print('Close Application')\n\nprint(\"End While Loop\")\n</code></pre>\n\n<p>Result after executing</p>\n\n<p><img src=\"https://i.stack.imgur.com/IeRQg.png\" alt=\"\"></p>\n\n<p>It's probably sys.argv in app var the mistake, but I'm new in Python so I don't know how to fix the problem.</p>\n"}, {"tags": ["python", "matplotlib", "jupyter-notebook", "anaconda", "ipython"], "comments": [{"owner": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 1, "creation_date": 1563411212, "post_id": 57085287, "comment_id": 100694337, "body": "I don&#39;t think this is special to Anaconda, I think this is built in to matplotlib. For a long time, Matplotlib has detected which backends are available for a particular interpreter to try to pick the most appropriate one. Just out of curiosity, which backend do you get if you do <code>%matplotlib inline</code> or <code>%matplotlib notebook</code> before you <code>import matplotlib</code>?"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 1, "creation_date": 1563411980, "post_id": 57085287, "comment_id": 100694506, "body": "Na na, matplotlib will <b>never</b> select an external backend (in this case <code>ipykernel.pylab.backend_inline</code> by itself). This is clearly something jupyter/IPython is doing."}, {"owner": {"reputation": 3259, "user_id": 1639359, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oJzTJ.jpg?s=128&g=1", "display_name": "Daniel Goldfarb", "link": "https://stackoverflow.com/users/1639359/daniel-goldfarb"}, "reply_to_user": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 0, "creation_date": 1563414433, "post_id": 57085287, "comment_id": 100694926, "body": "To @darthbith -- I have responded to your curiousty in an edit to the question      (because I thought i could not format code     in a comment)"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 2, "creation_date": 1563417418, "post_id": 57085287, "comment_id": 100695478, "body": "So  it looks like <a href=\"https://github.com/ipython/ipykernel/blob/7267f5da77300ab6a46e95f00be0eaddbe9c389a/ipykernel/kernelapp.py#L402\" rel=\"nofollow noreferrer\">it&#39;s hardcoded</a> in ipykernel, which <a href=\"https://github.com/ipython/ipykernel/blob/7267f5da77300ab6a46e95f00be0eaddbe9c389a/ipykernel/kernelapp.py#L489\" rel=\"nofollow noreferrer\">gets called</a> upon initialization. But this may only be half the truth because in principle <code>IPython</code> has a <a href=\"https://ipython.readthedocs.io/en/stable/config/options/kernel.html#configtrait-InteractiveShellApp.matplotlib\" rel=\"nofollow noreferrer\"><code>InteractiveShellApp.matplotlib</code></a> configuration parameter."}, {"owner": {"reputation": 3259, "user_id": 1639359, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oJzTJ.jpg?s=128&g=1", "display_name": "Daniel Goldfarb", "link": "https://stackoverflow.com/users/1639359/daniel-goldfarb"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1563474084, "post_id": 57085287, "comment_id": 100722173, "body": "@ImportanceOfBeingErnest -- Thanks!"}], "owner": {"reputation": 3259, "user_id": 1639359, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oJzTJ.jpg?s=128&g=1", "display_name": "Daniel Goldfarb", "link": "https://stackoverflow.com/users/1639359/daniel-goldfarb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 587, "favorite_count": 2, "answer_count": 0, "score": 4, "last_activity_date": 1563450312, "creation_date": 1563406795, "last_edit_date": 1563450312, "question_id": 57085287, "link": "https://stackoverflow.com/questions/57085287/why-dont-i-need-matplotlib-inline-in-my-jupyter-notebook", "title": "Why don&#39;t I need &quot;%matplotlib inline&quot; in my jupyter notebook?", "body": "<p>I am just trying to understand why my jupyter installation does not require me to run '%matplotlib inline' (which, according to everything I've read, I should have to run that to get my plots inline in my jupyter notebook).  But the fact is, my matplotlib plots appear inline in my notebook whether I run '%matplotlib inline' or not.  I am running an anaconda install of jupyter on ubuntu under WSL, using chrome as the client to my notebook server.  jupyter --version 4.4.0 and jupyter-notebook --version 5.7.8  </p>\n\n<p>I've checked my ~/.jupyter/jupyter_notebook_config.py file and see nothing in there about matplotlib.  </p>\n\n<p>If I run the following in my notbook:</p>\n\n<pre><code>import matplotlib\nmatplotlib.get_backend()\n</code></pre>\n\n<p>This is the output:</p>\n\n<pre><code>'module://ipykernel.pylab.backend_inline'\n</code></pre>\n\n<p>But if I run ipython directly in my WSL ubuntu window, and then run the above I get:</p>\n\n<pre><code>In [1]: import matplotlib\nIn [2]: matplotlib.get_backend()\nOut[2]: 'agg'\n</code></pre>\n\n<p>Any idea how I can determine why this works this way?  Is it perhaps part of the anaconda installation, that the kernal determines when it is running in a notebook and automatically switches the backend to 'backend_inline' ??</p>\n\n<p>Thanks.  Just curious why this is working this way for me.</p>\n\n<hr>\n\n<p>RESPONDING TO COMMENTS:</p>\n\n<p>@darthbith, each of these was done with a fresh restart of the kernel:</p>\n\n<pre><code>%matplotlib inline\nimport matplotlib\nmatplotlib.get_backend()\n'module://ipykernel.pylab.backend_inline'\n</code></pre>\n\n<p>above is same as when I don't run %matplotlib inline</p>\n\n<p>now restart kernel and try %matplotlib notebook:</p>\n\n<pre><code>%matplotlib notebook\nimport matplotlib\nmatplotlib.get_backend()\n'nbAgg'\n</code></pre>\n"}, {"tags": ["python", "file-upload", "google-drive-api", "jupyter-notebook", "google-colaboratory"], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 11364498, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-go-4AyU1RA8/AAAAAAAAAAI/AAAAAAAAAkE/jFj2kRODauM/photo.jpg?sz=128", "display_name": "Damien Desmond", "link": "https://stackoverflow.com/users/11364498/damien-desmond"}, "edited": false, "score": 0, "creation_date": 1563722457, "post_id": 57085369, "comment_id": 100784962, "body": "What if I want to not write a file, but to read one, and not one that is in my root, but one that is within several folders? This method might work fine if the files I wanted to access were in my root, but I would rather keep my current file structure. I&#39;m not sure how to change the code you&#39;ve provided to accommodate those features."}, {"owner": {"reputation": 511, "user_id": 3147395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cde56924a2cfce8a8bfd31cf25150f4e?s=128&d=identicon&r=PG&f=1", "display_name": "user3147395", "link": "https://stackoverflow.com/users/3147395/user3147395"}, "reply_to_user": {"reputation": 55, "user_id": 11364498, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-go-4AyU1RA8/AAAAAAAAAAI/AAAAAAAAAkE/jFj2kRODauM/photo.jpg?sz=128", "display_name": "Damien Desmond", "link": "https://stackoverflow.com/users/11364498/damien-desmond"}, "edited": false, "score": 0, "creation_date": 1563751963, "post_id": 57085369, "comment_id": 100791050, "body": "@DamienDesmond to write to a folder its the same as writing to any other directory in a Unix-based OS. So if you want to write to <code>TestFolder</code> you would modify the above to be  <code>with open(&#39;&#47;content&#47;drive&#47;My Drive&#47;TestFolder&#47;foo.txt&#39;, &#39;w&#39;) as f:</code>"}], "tags": [], "owner": {"reputation": 511, "user_id": 3147395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cde56924a2cfce8a8bfd31cf25150f4e?s=128&d=identicon&r=PG&f=1", "display_name": "user3147395", "link": "https://stackoverflow.com/users/3147395/user3147395"}, "is_accepted": true, "score": 4, "last_activity_date": 1563407480, "creation_date": 1563407480, "answer_id": 57085369, "question_id": 57085245, "link": "https://stackoverflow.com/questions/57085245/how-do-you-import-a-txt-or-other-file-type-into-a-google-colab-notebook-direc/57085369#57085369", "title": "How do you import a .txt (or other file type) into a Google Colab notebook directly from your own Drive?", "body": "<p>If you have a file that you want to write in the root of your Google Drive called <code>foo.txt</code> then the following code should read the file into Colab: </p>\n\n<pre><code>from google.colab import drive\ndrive.mount('/content/drive')\n</code></pre>\n\n<p>The above will ask you to provide your credentials via a link in the cell output. Once you have authorized this access, you can run the following in another cell to write <code>Hello Google Drive!</code> to a text file called <code>foo.txt</code> in your Google Drive:</p>\n\n<pre><code>with open('/content/drive/My Drive/foo.txt', 'w') as f: \n    f.write('Hello Google Drive!')\n</code></pre>\n\n<p>To read a text file from Google Drive called <code>foo.txt</code> in your Google Drive drive you can similarly use: </p>\n\n<pre><code>with open('/content/drive/My Drive/foo.txt', 'r') as f: \n    print(f.read())\n</code></pre>\n\n<p>If one runs this reading code after having written to <code>foo.txt</code> this should output <code>Hello Google Drive!</code></p>\n"}], "owner": {"reputation": 55, "user_id": 11364498, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-go-4AyU1RA8/AAAAAAAAAAI/AAAAAAAAAkE/jFj2kRODauM/photo.jpg?sz=128", "display_name": "Damien Desmond", "link": "https://stackoverflow.com/users/11364498/damien-desmond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8316, "favorite_count": 0, "accepted_answer_id": 57085369, "answer_count": 1, "score": 3, "last_activity_date": 1563407480, "creation_date": 1563406375, "question_id": 57085245, "link": "https://stackoverflow.com/questions/57085245/how-do-you-import-a-txt-or-other-file-type-into-a-google-colab-notebook-direc", "title": "How do you import a .txt (or other file type) into a Google Colab notebook directly from your own Drive?", "body": "<p>I'm trying to import a couple .txt files into Colab from my own Google Drive. The colab notebook I'm using is in the same folder as the files I want to upload within that notebook. While there is documentation on file I/O on <a href=\"https://colab.research.google.com/notebooks/io.ipynb\" rel=\"nofollow noreferrer\">External data: Local Files, Drive, Sheets, and Cloud Storage</a> within Colab, the descriptions do not seem to fit what I'm looking for (e.g. I could upload these files directly from my local directory each time I use the notebook, but instead, I would like to have a cell written that loads them once and keeps them loaded via a connection to my own Drive). Also, the .txt files I want to upload contain samples of plain text to use for training a deep learning algorithm on sentiment analysis, and thus does not appear to be convertable to a .csv for functionally equivalent application (which might be solved by Google Sheets).</p>\n\n<p>From <a href=\"https://colab.research.google.com/notebooks/io.ipynb\" rel=\"nofollow noreferrer\">External data: Local Files, Drive, Sheets, and Cloud Storage</a>, the options are 1) uploading from a local directory, 2) mounting to Drive locally/using an API, or 3) importing from Google Sheets or Google Cloud Storage. Of these, I have tried 1 and some of 2, but because I am still relatively new to Python and Colab, the documentation of 2 and 3 are confusing and do not clearly direct me to a solution. Thus, it is possible that my problem is an interpretation problem, in which case showing how 2/3 could solve it would be quite helpful.</p>\n\n<p>I'm thinking it should be possible to refer to these .txt files within Colab since both the colab notebook and .txt files are in the same Drive folder, but perhaps I'm overly comparing the cell functionality of Colab with navigating files in a directory in your everyday terminal.</p>\n"}, {"tags": ["python", "build", "julia", "conda", "pycall"], "answers": [{"tags": [], "owner": {"reputation": 505, "user_id": 3303504, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5457b2e96ff93bb44af4684a7cdfa262?s=128&d=identicon&r=PG&f=1", "display_name": "user3303504", "link": "https://stackoverflow.com/users/3303504/user3303504"}, "is_accepted": true, "score": 0, "last_activity_date": 1563472871, "creation_date": 1563472871, "answer_id": 57100292, "question_id": 57085221, "link": "https://stackoverflow.com/questions/57085221/pycall-does-not-build-fails-at-downloading-miniconda-installer/57100292#57100292", "title": "PyCall does not build - Fails at &quot;Downloading miniconda installer&quot;", "body": "<p>After trying a bunch more things I finally discovered the solution:</p>\n\n<p><strong>Resolve firewall and anti-virus conflicts</strong></p>\n\n<p>After adding the relevant exceptions PyCall built fine.</p>\n"}], "owner": {"reputation": 505, "user_id": 3303504, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5457b2e96ff93bb44af4684a7cdfa262?s=128&d=identicon&r=PG&f=1", "display_name": "user3303504", "link": "https://stackoverflow.com/users/3303504/user3303504"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 417, "favorite_count": 0, "accepted_answer_id": 57100292, "answer_count": 1, "score": 0, "last_activity_date": 1563472871, "creation_date": 1563406167, "question_id": 57085221, "link": "https://stackoverflow.com/questions/57085221/pycall-does-not-build-fails-at-downloading-miniconda-installer", "title": "PyCall does not build - Fails at &quot;Downloading miniconda installer&quot;", "body": "<p>Using Windows 10, Julia 1.1.1 (2019-05-16).</p>\n\n<p>I've searched around online for various solutions, and have even resorted to totally removing Julia and reinstalling it, only to make no progress. Conda builds inside of Julia perfectly fine.</p>\n\n<p>I'm calling the following code:</p>\n\n<pre><code>julia&gt; import Pkg\njulia&gt; ENV[\"PYTHON\"]=\"\"\njulia&gt; Pkg.build(\"PyCall\")\n</code></pre>\n\n<p>I have tried setting the python environment to a local Conda environment via <code>ENV[\"PYTHON\"]=\"conda activate py37 &amp; python\"</code> which works in a command window to load the correct python environment activated (<strong>Note:</strong> I don't mind whether I use this externally created environment, or the default one that PyCall is meant to make via a standard build). I've also tried running Julia in administrator mode. Every time I keep getting the same response (though with extra path related content when I try specifying the external Conda environment):</p>\n\n<pre><code>julia&gt; Pkg.build(\"PyCall\")\n  Building Conda \u2500\u2192 `C:\\Users\\Student\\.julia\\packages\\Conda\\kLXeC\\deps\\build.log`\n  Building PyCall \u2192 `C:\\Users\\Student\\.julia\\packages\\PyCall\\ttONZ\\deps\\build.log`\n\u250c Error: Error building `PyCall`:\n\u2502 \u250c Info: Using the Python distribution in the Conda package by default.\n\u2502 \u2514 To use a different Python version, set ENV[\"PYTHON\"]=\"pythoncommand\" and re-run Pkg.build(\"PyCall\").\n\u2502 [ Info: Downloading miniconda installer ...\n\u2502 ERROR: LoadError: failed process: Process(`'C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\powershell.exe' -Version 3 -NoProfile -Command \"[System.Net.ServicePointManager]::SecurityProtocol = [System.Net.SecurityProtocolType]::Tls12; (New-Object System.Net.Webclient).DownloadFile('https://repo.continuum.io/miniconda/Miniconda3-4.5.4-Windows-x86_64.exe', 'C:\\Users\\Student\\.julia\\conda\\3\\installer.exe')\"`, ProcessExited(3221225477)) [3221225477]\n\u2502 Stacktrace:\n\u2502  [1] error(::String, ::Base.Process, ::String, ::Int64, ::String) at .\\error.jl:42\n\u2502  [2] pipeline_error at .\\process.jl:785 [inlined]\n\u2502  [3] download(::String, ::String) at .\\download.jl:20\n\u2502  [4] _install_conda(::String, ::Bool) at C:\\Users\\Student\\.julia\\packages\\Conda\\kLXeC\\src\\Conda.jl:160\n\u2502  [5] _install_conda(::String) at C:\\Users\\Student\\.julia\\packages\\Conda\\kLXeC\\src\\Conda.jl:152\n\u2502  [6] runconda(::Cmd, ::String) at C:\\Users\\Student\\.julia\\packages\\Conda\\kLXeC\\src\\Conda.jl:111\n\u2502  [7] #add#1(::String, ::Function, ::String, ::String) at C:\\Users\\Student\\.julia\\packages\\Conda\\kLXeC\\src\\Conda.jl:184\n\u2502  [8] add at C:\\Users\\Student\\.julia\\packages\\Conda\\kLXeC\\src\\Conda.jl:183 [inlined] (repeats 2 times)\n\u2502  [9] top-level scope at C:\\Users\\Student\\.julia\\packages\\PyCall\\ttONZ\\deps\\build.jl:84\n\u2502  [10] include at .\\boot.jl:326 [inlined]\n\u2502  [11] include_relative(::Module, ::String) at .\\loading.jl:1038\n\u2502  [12] include(::Module, ::String) at .\\sysimg.jl:29\n\u2502  [13] include(::String) at .\\client.jl:403\n\u2502  [14] top-level scope at none:0\n\u2502 in expression starting at C:\\Users\\Student\\.julia\\packages\\PyCall\\ttONZ\\deps\\build.jl:43\n\u2514 @ Pkg.Operations C:\\cygwin\\home\\Administrator\\buildbot\\worker\\package_win64\\build\\usr\\share\\julia\\stdlib\\v1.1\\Pkg\\src\\Operations.jl:1075\n</code></pre>\n\n<p>Any thoughts?</p>\n"}, {"tags": ["python", "dlib"], "answers": [{"tags": [], "owner": {"reputation": 4528, "user_id": 310086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71a8c95cf10d5a07bdc7c4d51828c16?s=128&d=identicon&r=PG", "display_name": "Davis King", "link": "https://stackoverflow.com/users/310086/davis-king"}, "is_accepted": false, "score": 0, "last_activity_date": 1563409931, "creation_date": 1563409931, "answer_id": 57085598, "question_id": 57085210, "link": "https://stackoverflow.com/questions/57085210/dlib-functions-to-parse-imglab-files/57085598#57085598", "title": "dlib functions to parse ImgLab files", "body": "<p>The methods for reading those XML files are documented here: <a href=\"http://dlib.net/ml.html#load_image_dataset_metadata\" rel=\"nofollow noreferrer\">http://dlib.net/ml.html#load_image_dataset_metadata</a>. The Python API has the same methods with the same names.</p>\n"}], "owner": {"reputation": 21174, "user_id": 972202, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/k5Gxr.png?s=128&g=1", "display_name": "sazr", "link": "https://stackoverflow.com/users/972202/sazr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 186, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563409931, "creation_date": 1563406101, "question_id": 57085210, "link": "https://stackoverflow.com/questions/57085210/dlib-functions-to-parse-imglab-files", "title": "dlib functions to parse ImgLab files", "body": "<p>I have used <code>dlib</code>'s ImgLab tool to annotate some images, so its produced an XML annotation file. I then used this for <code>dlib</code>'s simple object detector but it did quite bad. So I want to train my own SVM where I have more control over feature extraction. </p>\n\n<p>I want to use the same annotation XML file for my own feature extraction. Does <code>dlib</code> have functions to parse the XML file and extract the boxes/annotations? </p>\n\n<p>I know I can write my own XML parser but I would much prefer to not reinvent the wheel is dlib has functions to extract these. I have searched the dlib site but cannot find dlib python functions for parsing - anyone know a link?</p>\n"}, {"tags": ["python", "node.js", "websocket"], "answers": [{"tags": [], "owner": {"reputation": 574461, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "is_accepted": true, "score": 1, "last_activity_date": 1563407581, "last_edit_date": 1563407581, "creation_date": 1563406660, "answer_id": 57085278, "question_id": 57085197, "link": "https://stackoverflow.com/questions/57085197/websockets-trying-to-convert-phython-code-to-node/57085278#57085278", "title": "Websockets - trying to convert Phython Code to Node", "body": "<p>A webSocket connection cannot be made to a plain TCP socket server.</p>\n\n<p>A plain TCP socket is not the same as a webSocket.  Your Python code appears to be making a plain TCP socket connection.  </p>\n\n<p>Your node.js code is attempting to make a webSocket connection.  A webSocket connection can only be made to a webSocket server that speaks the webSocket protocol (which runs on top of a plain TCP socket).</p>\n\n<p>If your Python code is working, then you apparently need to make just a plain TCP socket connection which you can see how to do in the <a href=\"https://nodejs.org/api/net.html\" rel=\"nofollow noreferrer\">Net module</a>.</p>\n\n<p>For further description of the differences between a plain TCP connection and a webSocket connection see these:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/48999626/computer-refuses-websocket-connections/49000773#49000773\">Computer refuses websocket connections</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/28480575/whats-the-difference-between-websocket-and-plain-socket-communication/28491729#28491729\">What&#39;s the difference between WebSocket and plain socket communication?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/34682481/is-there-a-way-to-do-a-tcp-connection-to-an-ip-with-javascript/34688171#34688171\">Is there a way to do a tcp connection to an IP with javascript?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/38747699/socket-server-not-connect-with-javascript-socket-client/38749538#38749538\">Socket server not connect with JavaScript socket client</a></p>\n"}, {"tags": [], "owner": {"reputation": 328, "user_id": 2225364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AZKku.png?s=128&g=1", "display_name": "bazaars", "link": "https://stackoverflow.com/users/2225364/bazaars"}, "is_accepted": false, "score": 1, "last_activity_date": 1563408392, "creation_date": 1563408392, "answer_id": 57085457, "question_id": 57085197, "link": "https://stackoverflow.com/questions/57085197/websockets-trying-to-convert-phython-code-to-node/57085457#57085457", "title": "Websockets - trying to convert Phython Code to Node", "body": "<p>To connect to a regular TCP socket, use <code>net</code> package instead of a WebSocket. Example Node equivalent code: </p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const net = require('net');\nconst port = 7878\nconst ip = \"192.168.42.1\"\n\nconst socket = net.createConnection(port, ip);\n\nsocket.on('connect', () =&gt; {\n  console.log(\"socket connected\");\n});\n</code></pre>\n"}], "owner": {"reputation": 2620, "user_id": 2884250, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/d880b0bfc6c878de208f1cc98b90e49a?s=128&d=identicon&r=PG&f=1", "display_name": "beek", "link": "https://stackoverflow.com/users/2884250/beek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 57085278, "answer_count": 2, "score": 1, "last_activity_date": 1563408392, "creation_date": 1563406001, "question_id": 57085197, "link": "https://stackoverflow.com/questions/57085197/websockets-trying-to-convert-phython-code-to-node", "title": "Websockets - trying to convert Phython Code to Node", "body": "<p>I'm trying to copy the features of this library <a href=\"https://github.com/rnbguy/pysphere/blob/master/misphere.py\" rel=\"nofollow noreferrer\">https://github.com/rnbguy/pysphere/blob/master/misphere.py</a> which connects via websockets to the Mi Sphere 360 camera. </p>\n\n<p>The important code is here</p>\n\n<pre><code>ms_ip = '192.168.42.1'\nms_tcp_port = 7878\nms_uk_port = 8787\nms_fs_port = 50422\n\ndef init(self):\n    self.socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    self.socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)\n    self.socket.setsockopt(socket.IPPROTO_TCP, socket.TCP_NODELAY, 1)\n    self.socket.connect((self.ms_ip, self.ms_tcp_port))\n    self.socket_1 = socket.socket()\n    self.recv_handle_live = True\n    self.recv_thread = threading.Thread(target=self.recv_handler)\n    self.recv_thread.daemon = True\n    self.session = Session()\n    self.session.conf = {}\n    self.session.locks = {}\n    self.last_send = 0\n</code></pre>\n\n<p>I'm trying to do this with the <code>ws</code> library in Node</p>\n\n<pre><code>const ip = '192.168.42.1'\nconst port = '7878'\nconst url = `ws://${ip}:${port}`\nconst websocket = new WebSocket(url)\n</code></pre>\n\n<p>However I'm not getting a connection to the camera.  (It's connected via Wifi, but the websocket never sends a connection message)</p>\n\n<p>I'm wondering if it's to do with the protocols, which are listed in the Phython code. </p>\n\n<p>I see in the websocket documentation you can define protocols in the connection, but I can't find any documentation about what those protocols are and how you add them. </p>\n\n<p>i.e. </p>\n\n<pre><code>self.socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\nself.socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)\nself.socket.setsockopt(socket.IPPROTO_TCP, socket.TCP_NODELAY, 1)\n</code></pre>\n\n<p>Anyone know how I add something like this in the Node websocket connection? </p>\n"}, {"tags": ["python", "pandas", "dataframe", "subset"], "answers": [{"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 2, "last_activity_date": 1563407681, "creation_date": 1563407681, "answer_id": 57085383, "question_id": 57085178, "link": "https://stackoverflow.com/questions/57085178/how-to-assign-value-to-a-pandas-dataframe-when-subset-by-complex-index-and-bool/57085383#57085383", "title": "How to assign value to a pandas dataframe, when subset by complex index and boolean based conditions?", "body": "<p>You can do with one <code>.loc</code> chain of <code>loc</code> assignment will be not safe</p>\n\n<pre><code>df.loc[df.index.isin(['2019-01-05','2019-01-09'])&amp;df.a.eq('foo'),'b']=np.nan\n</code></pre>\n"}], "owner": {"reputation": 60, "user_id": 9601960, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Betelgeux", "link": "https://stackoverflow.com/users/9601960/betelgeux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "accepted_answer_id": 57085383, "answer_count": 1, "score": 0, "last_activity_date": 1563414052, "creation_date": 1563405860, "last_edit_date": 1563408430, "question_id": 57085178, "link": "https://stackoverflow.com/questions/57085178/how-to-assign-value-to-a-pandas-dataframe-when-subset-by-complex-index-and-bool", "title": "How to assign value to a pandas dataframe, when subset by complex index and boolean based conditions?", "body": "<p>I would like to replace values in a pandas dataframe, with a complex subsetting pattern. </p>\n\n<p>With the .loc accessor, I was only able to subset by chaining multiple conditions, because some of the conditions are index based. But it seems I can not assign values after such a chain of subsetting.\n<strong>UPDATE:</strong> A further problem is caused by the duplicated indicies. I have updated the example accordingly.</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\n\ndf = pd.DataFrame({'a': ['foo'] * 10 + ['bar'] * 10, 'b': range(20)}, index=pd.date_range('2019-01-01','2019-01-10').append(pd.date_range('2019-01-01','2019-01-10')))\n\ndf.loc[df['a'] == 'foo', 'b'].loc[pd.to_datetime(['2019-01-05','2019-01-09'])] = np.nan\n\ndf\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>              a     b\n2019-01-01  foo     0\n2019-01-02  foo     1\n2019-01-03  foo     2\n2019-01-04  foo     3\n2019-01-05  foo     4\n2019-01-06  foo     5\n2019-01-07  foo     6\n2019-01-08  foo     7\n2019-01-09  foo     8\n2019-01-10  foo     9\n2019-01-01  bar     10\n2019-01-02  bar     11\n2019-01-03  bar     12\n2019-01-04  bar     13\n2019-01-05  bar     14\n2019-01-06  bar     15\n2019-01-07  bar     16\n2019-01-08  bar     17\n2019-01-09  bar     18\n2019-01-10  bar     19\n</code></pre>\n\n<p>Expected:</p>\n\n<pre><code>              a     b\n2019-01-01  foo     0\n2019-01-02  foo     1\n2019-01-03  foo     2\n2019-01-04  foo     3\n2019-01-05  foo     NaN\n2019-01-06  foo     5\n2019-01-07  foo     6\n2019-01-08  foo     7\n2019-01-09  foo     NaN\n2019-01-10  foo     9\n2019-01-01  bar     10\n2019-01-02  bar     11\n2019-01-03  bar     12\n2019-01-04  bar     13\n2019-01-05  bar     14\n2019-01-06  bar     15\n2019-01-07  bar     16\n2019-01-08  bar     17\n2019-01-09  bar     18\n2019-01-10  bar     19\n</code></pre>\n\n<p>I have tried alternative approaches like:</p>\n\n<pre><code>df.loc[df['a'] == 'foo' and df.index.isin(['2019-01-05','2019-01-09']), 'b']\n</code></pre>\n\n<p>which drops:</p>\n\n<pre><code>ValueError: The truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().\n</code></pre>\n\n<p>Not even this works, as the isin returns an array without the date based indexing:</p>\n\n<pre><code>df['a'] == 'foo' and pd.Series(df.index.isin(['2019-01-05','2019-01-09']))\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1563405823, "post_id": 57085151, "comment_id": 100693374, "body": "Something like <code>pd.concat([df1, df2], axis=1).sort_index(axis=1)</code>"}, {"owner": {"reputation": 149, "user_id": 11145738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a71395f332ec56eeb789f80bfb40a6?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Rostenkowski", "link": "https://stackoverflow.com/users/11145738/jan-rostenkowski"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1563407166, "post_id": 57085151, "comment_id": 100693624, "body": "This makes the number of rows twice as large, and so half the elements in each column are N/A"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1563407205, "post_id": 57085151, "comment_id": 100693636, "body": "It can happen if your indexes are not the same. What if you do <code>df1.index = df2.index</code> before calling <code>concat</code>?"}, {"owner": {"reputation": 8877, "user_id": 992600, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a07696b9e9f01acc66822c3c4a880b96?s=128&d=identicon&r=PG", "display_name": "adhg", "link": "https://stackoverflow.com/users/992600/adhg"}, "edited": false, "score": 0, "creation_date": 1563408605, "post_id": 57085151, "comment_id": 100693903, "body": "another option (thought not as classic as concat)   pd.merge(df1, df2, left_index=True, right_index=True, how=&#39;outer&#39;)"}], "answers": [{"tags": [], "owner": {"reputation": 720, "user_id": 11715606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wNp2v.jpg?s=128&g=1", "display_name": "johnDanger", "link": "https://stackoverflow.com/users/11715606/johndanger"}, "is_accepted": false, "score": 1, "last_activity_date": 1565105696, "creation_date": 1565105696, "answer_id": 57379521, "question_id": 57085151, "link": "https://stackoverflow.com/questions/57085151/combining-corresponding-columns-between-two-separate-dataframes-into-new-datafra/57379521#57379521", "title": "Combining corresponding columns between two separate dataframes into new dataframe", "body": "<p>To alternate the columns for any dataframe (with any, possibly non-identical column names), first combine the two dataframes and then reorder them by passing a list of column names in the order that you want.</p>\n\n<p>For alternating order, first get lists of the two dataframe column names</p>\n\n<pre><code>l1 = df1.columns\nl2 = df2.columns\n</code></pre>\n\n<p>Then create pairs of column names zipping them the two lists (results in <code>('col1','col1')</code>.... ect.)</p>\n\n<pre><code>colNames = zip(l1, l2)\n</code></pre>\n\n<p>Then combine in an alternating fashion with list comprehension</p>\n\n<pre><code>combinedNames = [name for pair in colNames for name in pair]\n</code></pre>\n\n<p>This will create a list with paired columns names.</p>\n\n<p>Apply this list to your combined dataframe to reorder it:</p>\n\n<pre><code>combinedDf = combinedDf[combinedNames]\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 11145738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a71395f332ec56eeb789f80bfb40a6?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Rostenkowski", "link": "https://stackoverflow.com/users/11145738/jan-rostenkowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565105696, "creation_date": 1563405713, "last_edit_date": 1563410990, "question_id": 57085151, "link": "https://stackoverflow.com/questions/57085151/combining-corresponding-columns-between-two-separate-dataframes-into-new-datafra", "title": "Combining corresponding columns between two separate dataframes into new dataframe", "body": "<p>I have two dataframes looking like below: </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df1\n\nColumn 1   Column 2  Column 3 \n0.2         0.4       0.5 \n0.25        0.44      0.45 \n0.26        0.32      0.33\n\ndf2\n\nColumn 1   Column 2  Column 3 \n340         350       360\n410         400       350\n234         324       450\n</code></pre>\n\n<p>How can I combine <code>df1</code> and <code>df2</code> to make a dataframe <code>df3</code> that has Columns of the same # side-by-side, i.e. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df3 \nColumn 1  Column 1  Column 2  Column 2  Column 3  Column 3\n0.2         340       0.4       350      0.5       360\n0.25        410       0.44      400      0.45      350 \n0.26        234       0.32      324      0.33      450\n</code></pre>\n\n<p>Thank you! </p>\n"}, {"tags": ["python", "data-structures"], "comments": [{"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 1, "creation_date": 1563406291, "post_id": 57085125, "comment_id": 100693460, "body": "By <i>importing</i> you mean <i>opening</i>? You can only import <code>.py</code> files. And, have you tried anything at all? Any piece of code we can help with?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1563407985, "post_id": 57085125, "comment_id": 100693793, "body": "<code>import</code>ing has a special, specific <a href=\"https://docs.python.org/3/reference/simple_stmts.html#the-import-statement\" rel=\"nofollow noreferrer\">meaning</a> in Python that has to do with using code in other libraries/modules, not reading data \u2014 and that <i>doesn&#39;t</i> sound like what you&#39;re asking about."}], "answers": [{"comments": [{"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 2, "creation_date": 1563407176, "post_id": 57085315, "comment_id": 100693627, "body": "To save some space in memory it would be a good idea to loop over the file instead of reading it all at once"}], "tags": [], "owner": {"reputation": 110, "user_id": 10039331, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zrLIR.png?s=128&g=1", "display_name": "Steven", "link": "https://stackoverflow.com/users/10039331/steven"}, "is_accepted": false, "score": 0, "last_activity_date": 1563407020, "creation_date": 1563407020, "answer_id": 57085315, "question_id": 57085125, "link": "https://stackoverflow.com/questions/57085125/reading-a-text-file-with-multiple-keys/57085315#57085315", "title": "Reading a text file with multiple keys", "body": "<p>So just try to open your file and then you need to split on the newline aswell as on the commas in your text. This will give you the \"list of lists\" you wanted. Furthermore I would suggest you to remap everything in a dict so you can access your items by a useful key.</p>\n\n<p>Could be something like this:</p>\n\n<pre><code>with open('test.txt', 'r') as f:\n    data = f.read()\n\n    data = data.split(\"\\n\")\n    list_of_lists = [row.split(\",\") for row in data]\n    final_list = [{\"building_type\": row[0].strip(),\n                   \"material\": row[1].strip(),\n                   \"your_keys\": row[2].strip()} for row in list_of_lists]\n    print(final_list)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[{'building_type': 'house', 'material': 'brick', 'your_keys': '876'},\n {'building_type': 'apartment', 'material': 'wood', 'your_keys': '345'}, \n {'building_type': 'condominium', 'material': 'brick', 'your_keys': '453'}]\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 11800045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c22211a13bcf493660c375655c0ecd1?s=128&d=identicon&r=PG&f=1", "display_name": "beginnerlearner456", "link": "https://stackoverflow.com/users/11800045/beginnerlearner456"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 166, "favorite_count": 0, "closed_date": 1563407551, "answer_count": 1, "score": 1, "last_activity_date": 1563408252, "creation_date": 1563405512, "last_edit_date": 1563408252, "question_id": 57085125, "link": "https://stackoverflow.com/questions/57085125/reading-a-text-file-with-multiple-keys", "closed_reason": "Duplicate", "title": "Reading a text file with multiple keys", "body": "<p>I am trying to open/read a text file with multiple \"sets\" of values, some lists, some integers. </p>\n\n<p>I am struggling to figure out what the best course of action to do this would be. </p>\n\n<p>I have provided an example of the text file I am attempting to import and manipulate below. Basically, each line of the text file holds 6 values, and all these values relate to one another. My end goal is to be able to have almost a \"list of list\" set up so that I can define each set of six values almost as one.</p>\n\n<p>Does anyone have any thoughts on this? </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>house, brick, 876, no, yes, 3\napartment, wood, 345, yes, yes, 1\ncondominium, brick, 453, no, yes, 8\netc... \n</code></pre>\n\n<p>My intended end point is to be able to categorize each variable (for example, <code>building type == house</code>, <code>material == brick</code>, etc. and be able to search through these.</p>\n"}, {"tags": ["python", "matlab", "numpy", "floating-point"], "comments": [{"owner": {"reputation": 445, "user_id": 4772009, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oNcsKM98Mv4/AAAAAAAAAAI/AAAAAAAAAJI/VIL7u98Fte4/photo.jpg?sz=128", "display_name": "Aditya", "link": "https://stackoverflow.com/users/4772009/aditya"}, "edited": false, "score": 1, "creation_date": 1563408466, "post_id": 57085118, "comment_id": 100693879, "body": "From the <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.remainder.html\" rel=\"nofollow noreferrer\">documentation</a>, this computes the remainder complementary to the <code>floor_divide</code> function. <code>np.floor_divide(6, 0.05)=119.0</code>. The value of <code>119.0*.05=5.95</code>. Thus, the value of remainder you get is <code>0.04999999999999967</code>."}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "reply_to_user": {"reputation": 445, "user_id": 4772009, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oNcsKM98Mv4/AAAAAAAAAAI/AAAAAAAAAJI/VIL7u98Fte4/photo.jpg?sz=128", "display_name": "Aditya", "link": "https://stackoverflow.com/users/4772009/aditya"}, "edited": false, "score": 0, "creation_date": 1563409094, "post_id": 57085118, "comment_id": 100693995, "body": "@Aditya but shouldn&#39;t <code>6&#47;&#47;0.05 == 120</code>."}, {"owner": {"reputation": 445, "user_id": 4772009, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oNcsKM98Mv4/AAAAAAAAAAI/AAAAAAAAAJI/VIL7u98Fte4/photo.jpg?sz=128", "display_name": "Aditya", "link": "https://stackoverflow.com/users/4772009/aditya"}, "edited": false, "score": 0, "creation_date": 1563409201, "post_id": 57085118, "comment_id": 100694014, "body": "<code>6&#47;&#47;0.05 == 119.0</code>. It is rounding the number to the lower value."}], "answers": [{"comments": [{"owner": {"reputation": 3329, "user_id": 6814154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b76e235219baaddb83f38d12e6665fbc?s=128&d=identicon&r=PG&f=1", "display_name": "Khalil Al Hooti", "link": "https://stackoverflow.com/users/6814154/khalil-al-hooti"}, "edited": false, "score": 1, "creation_date": 1563464821, "post_id": 57085557, "comment_id": 100717903, "body": "Thanks, I went by your suggestion and rounded the numbers myself. <code>np.round(6&#47;array, decimals=3)*array - 6</code> 3 decimals points is the limit of accuracy in my dataset. to check if there is no remainder i did <code>np.isclose(np.round(6&#47;array, decimals=3)*array - 6, 0)</code>"}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "reply_to_user": {"reputation": 3329, "user_id": 6814154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b76e235219baaddb83f38d12e6665fbc?s=128&d=identicon&r=PG&f=1", "display_name": "Khalil Al Hooti", "link": "https://stackoverflow.com/users/6814154/khalil-al-hooti"}, "edited": false, "score": 1, "creation_date": 1563465251, "post_id": 57085557, "comment_id": 100718153, "body": "@KhalilAlHooti that&#39;s more or less what I&#39;d have done :) Since MATLAB is the one doing something weird you have to mess with something like <code>isclose</code> to reproduce their behaviour. At least the 3 decimal precision you have makes this fairly robust, which would&#39;ve been my main concern."}, {"owner": {"reputation": 3329, "user_id": 6814154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b76e235219baaddb83f38d12e6665fbc?s=128&d=identicon&r=PG&f=1", "display_name": "Khalil Al Hooti", "link": "https://stackoverflow.com/users/6814154/khalil-al-hooti"}, "edited": false, "score": 0, "creation_date": 1563465942, "post_id": 57085557, "comment_id": 100718530, "body": "Thanks again, I believe, developers at <code>numpy</code> should not make the statement that their <code>mod</code> function is equivalent to Matlab&#39;s <code>mod</code> function."}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "reply_to_user": {"reputation": 3329, "user_id": 6814154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b76e235219baaddb83f38d12e6665fbc?s=128&d=identicon&r=PG&f=1", "display_name": "Khalil Al Hooti", "link": "https://stackoverflow.com/users/6814154/khalil-al-hooti"}, "edited": false, "score": 1, "creation_date": 1563467983, "post_id": 57085557, "comment_id": 100719525, "body": "@KhalilAlHooti the exact wording is &quot;<i>The MATLAB function equivalent to np.remainder is mod</i>&quot; which doesn&#39;t explicitly claim that they are exactly the same (i.e. returning the exact same output for the same input), but I can see how it&#39;s suggestive of that. One&#39;s mileage of &quot;equivalent&quot; may vary. You can raise this as <a href=\"https://github.com/numpy/numpy/issues\" rel=\"nofollow noreferrer\">an issue with numpy</a> and it might be changed (not the behaviour, but the phrasing in the docs)."}], "tags": [], "owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "is_accepted": true, "score": 6, "last_activity_date": 1563443346, "last_edit_date": 1563443346, "creation_date": 1563409500, "answer_id": 57085557, "question_id": 57085118, "link": "https://stackoverflow.com/questions/57085118/equivalent-matlab-function-mod-in-numpy-or-python/57085557#57085557", "title": "Equivalent matlab function mod in numpy or python", "body": "<p>This is the core of the problem, in python:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>&gt;&gt;&gt; 6/0.05 == 120\nTrue\n\n&gt;&gt;&gt; 6//0.05 == 120  # this is 119 instead\nFalse\n</code></pre>\n\n<p>The floating-point result of <code>6/0.05</code> is close enough to 120 (i.e. within the resolution of double precision) that it gets rounded to 120.0. However, it's ever so slightly smaller than 120, so explicit floor division will truncate that number to 119 before it could be normalized to 120.0.</p>\n\n<p>Some proof:</p>\n\n<pre><code>&gt;&gt;&gt; from decimal import Decimal\n... print(6/Decimal(0.05))  # exactly approximate\n... print(6/Decimal('0.05'))  # exact\n119.9999999999999933386618522\n1.2E+2\n</code></pre>\n\n<p>The first number is what you'd first get with <code>6/0.05</code>, but the number <code>119.9999999999999933386618522</code> gets rounded to the nearest number representable with double precision, and this is 120. One can easily prove that these two numbers are indeed the same within double precision:</p>\n\n<pre><code>&gt;&gt;&gt; print(6/Decimal('0.05') - 6/Decimal(0.05))\n6.6613381478E-15\n\n&gt;&gt;&gt; 120 - 6.6613381478E-15 == 120\nTrue\n</code></pre>\n\n<p>Now here's <code>help mod</code> from MATLAB:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>    MOD(x,y) returns x - floor(x./y).*y if y ~= 0, carefully computed to\n    avoid rounding error. If y is not an integer and the quotient x./y is\n    within roundoff error of an integer, then n is that integer.\n</code></pre>\n\n<p>This suggests that when <code>x/y</code> is close to an integer then it's rounded first, rather than being truncated like in python. So MATLAB goes out of its way to do some magic with the floating-point results.</p>\n\n<p>The simplest solution would be to round your numbers yourself (unless you can use something like <code>decimal.Decimal</code>, but this means you should forgo native doubles entirely, including literals) and reproduce MATLAB's <code>mod</code> that way, assuming that makes sense for your use cases.</p>\n"}, {"comments": [{"owner": {"reputation": 3329, "user_id": 6814154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b76e235219baaddb83f38d12e6665fbc?s=128&d=identicon&r=PG&f=1", "display_name": "Khalil Al Hooti", "link": "https://stackoverflow.com/users/6814154/khalil-al-hooti"}, "edited": false, "score": 0, "creation_date": 1563464770, "post_id": 57085585, "comment_id": 100717864, "body": "Thank you very much indeed it works like a charm. but i found rounding the numbers is easier and faster operation as suggested by @Andras Deak"}], "tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": false, "score": 2, "last_activity_date": 1563409827, "creation_date": 1563409827, "answer_id": 57085585, "question_id": 57085118, "link": "https://stackoverflow.com/questions/57085118/equivalent-matlab-function-mod-in-numpy-or-python/57085585#57085585", "title": "Equivalent matlab function mod in numpy or python", "body": "<p>Here is a workaround. It basically rounds the denominator to its str representation and from there does integer arithmetic:</p>\n\n<pre><code>import numpy as np\nimport decimal\n\ndef round_divmod(b,a):\n     n,d = np.frompyfunc(lambda x:decimal.Decimal(x).as_integer_ratio(),1,2)(a.astype('U'))\n     n,d = n.astype(int),d.astype(int)\n     q,r = np.divmod(b*d,n)\n     return q,r/d\n\na = np.round(np.linspace(0.05,1,20),2).reshape(4,5)\na\n# array([[0.05, 0.1 , 0.15, 0.2 , 0.25],\n#        [0.3 , 0.35, 0.4 , 0.45, 0.5 ],\n#        [0.55, 0.6 , 0.65, 0.7 , 0.75],\n#        [0.8 , 0.85, 0.9 , 0.95, 1.  ]])\nround_divmod(6,a)\n# (array([[120,  60,  40,  30,  24],\n#        [ 20,  17,  15,  13,  12],\n#        [ 10,  10,   9,   8,   8],\n#        [  7,   7,   6,   6,   6]]), array([[0.  , 0.  , 0.  , 0.  , 0.  ],\n#        [0.  , 0.05, 0.  , 0.15, 0.  ],\n#        [0.5 , 0.  , 0.15, 0.4 , 0.  ],\n#        [0.4 , 0.05, 0.6 , 0.3 , 0.  ]]))\n</code></pre>\n"}], "owner": {"reputation": 3329, "user_id": 6814154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b76e235219baaddb83f38d12e6665fbc?s=128&d=identicon&r=PG&f=1", "display_name": "Khalil Al Hooti", "link": "https://stackoverflow.com/users/6814154/khalil-al-hooti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1714, "favorite_count": 1, "accepted_answer_id": 57085557, "answer_count": 2, "score": 4, "last_activity_date": 1563443346, "creation_date": 1563405425, "last_edit_date": 1563406534, "question_id": 57085118, "link": "https://stackoverflow.com/questions/57085118/equivalent-matlab-function-mod-in-numpy-or-python", "title": "Equivalent matlab function mod in numpy or python", "body": "<p>I was converting some codes from Matlab to Python.</p>\n\n<p>In matlab there is the function <code>mod</code> which gives the modulo operation.</p>\n\n<p>For example the following example shows different results between the matlab <code>mod</code> and the equivalent numpy <code>remainder</code> operation:</p>\n\n<p>Matlab:</p>\n\n<pre><code>&gt;&gt; mod(6, 0.05)\n\nans =\n\n     0\n</code></pre>\n\n<p>Numpy:</p>\n\n<pre><code>np.remainder(6, 0.05) \n0.04999999999999967\n\nnp.mod(6, 0.05)\n0.04999999999999967\n</code></pre>\n\n<p>Python modulus operator gives the same results as numpy.</p>\n\n<pre><code>6%0.05\n0.04999999999999967\n</code></pre>\n\n<p>Is there anything in python which gives the same mod operation as the one in Matlab? preferably can be operated on <code>numpy</code> 2d/3d arrays.</p>\n\n<p><code>numpy</code> <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.remainder.html\" rel=\"nofollow noreferrer\">documentation</a> says that <code>numpy.mod</code> is equivalent to matlab <code>mod</code>.</p>\n"}, {"tags": ["python", "sqlite"], "answers": [{"tags": [], "owner": {"reputation": 4837, "user_id": 9769953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f14a586643a20c8d68010f7a329f5a04?s=128&d=identicon&r=PG", "display_name": "0 0", "link": "https://stackoverflow.com/users/9769953/0-0"}, "is_accepted": false, "score": 1, "last_activity_date": 1563405828, "creation_date": 1563405828, "answer_id": 57085172, "question_id": 57085074, "link": "https://stackoverflow.com/questions/57085074/please-how-do-i-sum-up-all-the-integer-elements-from-a-sqlite3-table-row/57085172#57085172", "title": "Please how do i sum up all the integer elements from a sqlite3 table row", "body": "<p>Use </p>\n\n<pre><code>c = 0\nfor x in result:\n    c += x[0]\n</code></pre>\n\n<p><code>cursor.fetchall()</code> returns a list of tuples, with the tuple containing the column values per row. In your case, there happens to be only one column, but it's still a (one element) tuple.</p>\n"}, {"comments": [{"owner": {"reputation": 4837, "user_id": 9769953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f14a586643a20c8d68010f7a329f5a04?s=128&d=identicon&r=PG", "display_name": "0 0", "link": "https://stackoverflow.com/users/9769953/0-0"}, "edited": false, "score": 1, "creation_date": 1563447002, "post_id": 57085202, "comment_id": 100707101, "body": "&quot;cursor.fetchall() returns a tuple&quot;: actually, it returns a list of tuples."}], "tags": [], "owner": {"reputation": 110, "user_id": 10039331, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zrLIR.png?s=128&g=1", "display_name": "Steven", "link": "https://stackoverflow.com/users/10039331/steven"}, "is_accepted": false, "score": 0, "last_activity_date": 1563406052, "creation_date": 1563406052, "answer_id": 57085202, "question_id": 57085074, "link": "https://stackoverflow.com/questions/57085074/please-how-do-i-sum-up-all-the-integer-elements-from-a-sqlite3-table-row/57085202#57085202", "title": "Please how do i sum up all the integer elements from a sqlite3 table row", "body": "<p>As far as i know cursor.fetchall() returns a tuple (like your error tells you) that means all your selections of the sql query will be pushed into that tuple. </p>\n\n<p>For example if you want to select multiple columns:</p>\n\n<pre><code>'SELECT amount, tax, date FROM expenses' \n</code></pre>\n\n<p>you will retrieve a tuple like this:</p>\n\n<pre><code>(amount, tax, date)\n</code></pre>\n\n<p>This tuple is given for every row. In your case result is an array containing a all rows, where each row itself is a tuple with just the amount in it.</p>\n\n<p>To keep a long story short you either need to rebuild the result as a list with list comprehension for example:</p>\n\n<pre><code>db = sqlite3.connect('test.db')\ncursor = db.cursor()\ncursor.execute('SELECT amount FROM expenses')\nresult = cursor.fetchall()\n\nresult = [amount[0] for amount in result] # Rebuild your result array to contain \n                                          # single values instead of tuples\nc = 0\nfor x in result:\n    c += x\nprint(c)\n</code></pre>\n\n<p>Another solution would be:</p>\n\n<pre><code>db = sqlite3.connect('test.db')\ncursor = db.cursor()\ncursor.execute('SELECT amount FROM expenses')\nresult = cursor.fetchall()\nc = 0\nfor x in result:\n    c += x[0] # This will retrieve the 0th element from the tuple, which is the amount\nprint(c)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "is_accepted": true, "score": 0, "last_activity_date": 1563428175, "creation_date": 1563428175, "answer_id": 57087733, "question_id": 57085074, "link": "https://stackoverflow.com/questions/57085074/please-how-do-i-sum-up-all-the-integer-elements-from-a-sqlite3-table-row/57087733#57087733", "title": "Please how do i sum up all the integer elements from a sqlite3 table row", "body": "<p>Use builtin <code>sum()</code> (<a href=\"https://docs.python.org/3.5/library/functions.html#sum\" rel=\"nofollow noreferrer\">doc</a>) function from Python:</p>\n\n<pre><code>c = sum(i[0] for i in result)\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10995375, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8B6DgRjdF2s/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOxSN-hCbDNbXR5jElPvC-hyeUDww/mo/photo.jpg?sz=128", "display_name": "egbodofo adetayo", "link": "https://stackoverflow.com/users/10995375/egbodofo-adetayo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 392, "favorite_count": 0, "accepted_answer_id": 57087733, "answer_count": 3, "score": -1, "last_activity_date": 1563428175, "creation_date": 1563405041, "last_edit_date": 1563405808, "question_id": 57085074, "link": "https://stackoverflow.com/questions/57085074/please-how-do-i-sum-up-all-the-integer-elements-from-a-sqlite3-table-row", "title": "Please how do i sum up all the integer elements from a sqlite3 table row", "body": "<p>I want to calculate the sum total of the elements of a row using user data from a sqlite3 database table</p>\n\n<p>i used cursor.fetchall() to get the amount row in my database table and tried using the for loop to sum the elements of the table but i am getting an error</p>\n\n<pre><code>db = sqlite3.connect('my.db')\ncursor = db.cursor()\ncursor.execute('SELECT amount FROM expenses')\nresult = cursor.fetchall()\nc = 0\nfor x in result:\n    c += x\nprint(c)\n</code></pre>\n\n<p>i got\nTypeError: unsupported operand type(s) for +=: 'int' and 'tuple'\ni expected to get the sum total of the amount</p>\n\n<p>I am aware of the sqlite3 SUM command. But I would like to learn how to solve this problem using Tkinter</p>\n"}, {"tags": ["python", "sorting", "reverse"], "comments": [{"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 0, "creation_date": 1563405147, "post_id": 57085064, "comment_id": 100693210, "body": "You&#39;re sorting strings, so they will be sorted lexicographically. If you want them in numerical order, convert them to numbers."}], "answers": [{"tags": [], "owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "is_accepted": false, "score": 1, "last_activity_date": 1563405776, "last_edit_date": 1563405776, "creation_date": 1563405230, "answer_id": 57085096, "question_id": 57085064, "link": "https://stackoverflow.com/questions/57085064/struggling-to-see-why-reverse-sort-doesnt-take-into-account-100/57085096#57085096", "title": "Struggling to see why reverse sort doesnt take into account 100", "body": "<p>Strings sort the way words sort: \"taco\" comes before \"tesseract\" even though \"tesseract\" is \"bigger\". You are sorting numbers as if they were strings, so \"100\" comes before \"2\" because \"1\" comes before \"2\":</p>\n\n<pre><code>s = \"1,2,3,110,89,108,160,36,19\"\nsorted(s.split(','))\n# ['1', '108', '110', '160', '19', '2', '3', '36', '89']\n</code></pre>\n\n<p>Turn them into numbers and your sort will look more like you expect:</p>\n\n<pre><code>s = \"1,2,3,110,89,108,160,36,19\"\nn = map(int, s.split(','))    # map to ints\n# now n is an iterator of numbers not strings\nsorted(n)\n# [1, 2, 3, 19, 36, 89, 108, 110, 160]\n# or\nsorted(n, reverse=True)\n# [160, 110, 108, 89, 36, 19, 3, 2, 1]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4057, "user_id": 8285811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C38qo.jpg?s=128&g=1", "display_name": "Akaisteph7", "link": "https://stackoverflow.com/users/8285811/akaisteph7"}, "is_accepted": true, "score": 1, "last_activity_date": 1563405286, "creation_date": 1563405286, "answer_id": 57085107, "question_id": 57085064, "link": "https://stackoverflow.com/questions/57085064/struggling-to-see-why-reverse-sort-doesnt-take-into-account-100/57085107#57085107", "title": "Struggling to see why reverse sort doesnt take into account 100", "body": "<p>Everything you read from a file is read as a string. You need to convert the numbers to ints before using them to compare as you expect. You can accomplish this by just changing the following line:</p>\n\n<pre><code>scores.sort(key=lambda x: int(x[1]))\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11800030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a876cf96e4e98e25811bb86d9f632343?s=128&d=identicon&r=PG&f=1", "display_name": "Kcops", "link": "https://stackoverflow.com/users/11800030/kcops"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 57085107, "answer_count": 2, "score": 0, "last_activity_date": 1563405776, "creation_date": 1563404942, "question_id": 57085064, "link": "https://stackoverflow.com/questions/57085064/struggling-to-see-why-reverse-sort-doesnt-take-into-account-100", "title": "Struggling to see why reverse sort doesnt take into account 100", "body": "<p>I am importing a file into a multidimensional array. I am reverse sorting based on highest score - however when I run the code it currently ignores scores over 100 - can anyone help?</p>\n\n<pre><code>scores = []\nfile = open(\"hScores.txt\",\"r\")\nfor line in file:\n    scores.append(line.strip(\"\\n\").split(\",\"))\nscores.sort(key=lambda x: x[1])\nscores.reverse()\nprint(scores)\n</code></pre>\n"}, {"tags": ["python", "pandas", "pandas-groupby", "contains"], "comments": [{"owner": {"reputation": 6746, "user_id": 11232091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vt9vH.png?s=128&g=1", "display_name": "moys", "link": "https://stackoverflow.com/users/11232091/moys"}, "edited": false, "score": 2, "creation_date": 1563423005, "post_id": 57085063, "comment_id": 100696520, "body": "Can you add the dataframe here? That would be better, you can copy it from an exel or csv &amp; paste it inside HTML portion of the &quot;Code Snippet&quot; (icon next to picture)."}, {"owner": {"reputation": 253, "user_id": 9712631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1eccaba939337a6f4b944930a1cb6926?s=128&d=identicon&r=PG&f=1", "display_name": "KirklandShawty", "link": "https://stackoverflow.com/users/9712631/kirklandshawty"}, "reply_to_user": {"reputation": 6746, "user_id": 11232091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vt9vH.png?s=128&g=1", "display_name": "moys", "link": "https://stackoverflow.com/users/11232091/moys"}, "edited": false, "score": 0, "creation_date": 1563468261, "post_id": 57085063, "comment_id": 100719653, "body": "Edited! @mohanys"}, {"owner": {"reputation": 3426, "user_id": 10818128, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YiTeo4kuZiQ/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYYf6McGCeXvwrDf9sDgLHNO5VGKQ/mo/photo.jpg?sz=128", "display_name": "Derek Eden", "link": "https://stackoverflow.com/users/10818128/derek-eden"}, "edited": false, "score": 0, "creation_date": 1563483277, "post_id": 57085063, "comment_id": 100725913, "body": "wouldn&#39;t Mix Vol 1 also be dropped because the last track doesn&#39;t contain US?"}], "answers": [{"comments": [{"owner": {"reputation": 253, "user_id": 9712631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1eccaba939337a6f4b944930a1cb6926?s=128&d=identicon&r=PG&f=1", "display_name": "KirklandShawty", "link": "https://stackoverflow.com/users/9712631/kirklandshawty"}, "edited": false, "score": 0, "creation_date": 1563408251, "post_id": 57085297, "comment_id": 100693840, "body": "Thank you for your reply @Ben Pap! This is great as it drops the groups that do not contain the US territory, but I hoping to drop the entire &quot;Mix&quot; if it contains any groups that do not have the US territory."}, {"owner": {"reputation": 2424, "user_id": 10286422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8eee83d47bbcbfaf55bb18f7077890?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Pap", "link": "https://stackoverflow.com/users/10286422/ben-pap"}, "reply_to_user": {"reputation": 253, "user_id": 9712631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1eccaba939337a6f4b944930a1cb6926?s=128&d=identicon&r=PG&f=1", "display_name": "KirklandShawty", "link": "https://stackoverflow.com/users/9712631/kirklandshawty"}, "edited": false, "score": 1, "creation_date": 1563476196, "post_id": 57085297, "comment_id": 100723064, "body": "Change <code>any()</code> to <code>all()</code> and it will make sure they all have US."}, {"owner": {"reputation": 253, "user_id": 9712631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1eccaba939337a6f4b944930a1cb6926?s=128&d=identicon&r=PG&f=1", "display_name": "KirklandShawty", "link": "https://stackoverflow.com/users/9712631/kirklandshawty"}, "edited": false, "score": 0, "creation_date": 1563477611, "post_id": 57085297, "comment_id": 100723682, "body": "Apologies, I&#39;m afraid I&#39;m not articulating my goal clearly. Referencing the edited DFs in my original post above, I have two unique IDs and within those two unique IDs, I am grouping rows by &#39;Mix_Name&#39;, &#39;Track&#39;, and &#39;Artist&#39;. If any of these groups do not have &quot;US&quot; territory in the Territories column, then I would drop all mixes with that unique ID. The output df in my example should only contain one Mix_ID (xyz456) because each group has the US territory."}], "tags": [], "owner": {"reputation": 2424, "user_id": 10286422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8eee83d47bbcbfaf55bb18f7077890?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Pap", "link": "https://stackoverflow.com/users/10286422/ben-pap"}, "is_accepted": true, "score": 1, "last_activity_date": 1563482587, "last_edit_date": 1563482587, "creation_date": 1563406840, "answer_id": 57085297, "question_id": 57085063, "link": "https://stackoverflow.com/questions/57085063/python-pandas-dropping-grouped-rows-based-on-missing-territory-code/57085297#57085297", "title": "Python pandas - Dropping grouped rows based on missing territory code", "body": "<pre><code>df.groupby(['Mix_Name', 'Track', 'Artist']).filter(lambda x: (x['Territories'].str.contains('US').any()))\n</code></pre>\n\n<p>You do your groupby, then filter the groups to check if the territories column contains 'US'.</p>\n\n<p><strong>EDIT</strong></p>\n\n<pre><code>notInUS = df.groupby(['Mix_Name','Track_Title','Artist']).filter(lambda x: ~x['Territories'].str.contains('US').any())['Mix_Name'].unique()\ndf[~df['Mix_Name'].isin(notInUS)]\n</code></pre>\n\n<p>We can look for the unique Mix_Name's that doesn't have a track in the US, then filter it out of our main df.</p>\n"}, {"comments": [{"owner": {"reputation": 3426, "user_id": 10818128, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YiTeo4kuZiQ/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYYf6McGCeXvwrDf9sDgLHNO5VGKQ/mo/photo.jpg?sz=128", "display_name": "Derek Eden", "link": "https://stackoverflow.com/users/10818128/derek-eden"}, "edited": false, "score": 0, "creation_date": 1563484322, "post_id": 57102657, "comment_id": 100726319, "body": "looks like I got beat to the punch :D"}], "tags": [], "owner": {"reputation": 3426, "user_id": 10818128, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YiTeo4kuZiQ/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYYf6McGCeXvwrDf9sDgLHNO5VGKQ/mo/photo.jpg?sz=128", "display_name": "Derek Eden", "link": "https://stackoverflow.com/users/10818128/derek-eden"}, "is_accepted": false, "score": 0, "last_activity_date": 1563484195, "creation_date": 1563484195, "answer_id": 57102657, "question_id": 57085063, "link": "https://stackoverflow.com/questions/57085063/python-pandas-dropping-grouped-rows-based-on-missing-territory-code/57102657#57102657", "title": "Python pandas - Dropping grouped rows based on missing territory code", "body": "<p>Please clarify if this is incorrect but, I think you are trying to:</p>\n\n<p>identify any tracks that do not have US in 'Territories', then delete the entire Mix that this track belongs to.</p>\n\n<p>If so, you can achieve this doing the following..</p>\n\n<pre><code>#get list of all Mix_Names that have at least 1 track without US in Territories\nmixes_to_drop=df[~df['Territories'].str.contains('US')]['Mix_Name'].unique().tolist()\n#filter out the mixes that have a 'Mix_Name' that is in the list of mixes to drop\ndf[~df['Mix_Name'].isin(mixes_to_drop)]\n</code></pre>\n\n<p>hope this helps or steers you in the right direction</p>\n"}], "owner": {"reputation": 253, "user_id": 9712631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1eccaba939337a6f4b944930a1cb6926?s=128&d=identicon&r=PG&f=1", "display_name": "KirklandShawty", "link": "https://stackoverflow.com/users/9712631/kirklandshawty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 1, "accepted_answer_id": 57085297, "answer_count": 2, "score": 0, "last_activity_date": 1563484195, "creation_date": 1563404938, "last_edit_date": 1563468234, "question_id": 57085063, "link": "https://stackoverflow.com/questions/57085063/python-pandas-dropping-grouped-rows-based-on-missing-territory-code", "title": "Python pandas - Dropping grouped rows based on missing territory code", "body": "<p>In the df below, we have two \"Mixes\" as indicated by the Mix_Name and Mix_ID columns. And within each of these mixes are multiple tracks with unique Track_ID's that contain different territories (see Territories column).</p>\n\n<pre><code>Mix_Name    Mix_ID  Territories     Track_Title  Artist         Track_ID\nMix Vol 1   abc123  GB | US | MX    Cabala       Prok &amp; Fitch   12345678\nMix Vol 1   abc123  US | CA         Autosave     Fedde          9101112\nMix Vol 1   abc123  US | CA         4 Life       Firebeatz      4151617\nMix Vol 1   abc123  IE | MX         4 Life       Firebeatz      18192021\nMix Vol 2   xyz456  CA              Warrior      My Nu Leng     22232425\nMix Vol 2   xyz456  FR | DE | NE    Warrior      My Nu Leng     27282930\nMix Vol 2   xyz456  US | CA         I'm Madonna  Madonna        31323334\nMix Vol 2   xyz456  CA | US | FR    Trouble      Gregor Salto   35363738\n</code></pre>\n\n<p>What I'm hoping to do here find out which tracks do not have the US territory, and if any of the tracks do not have the US territory, I will want to drop the entire mix from my dataframe. With the resulting dataframe looking like this because \"Mix Vol 2\" is missing the US territory in one of its tracks:</p>\n\n<pre><code>Mix_Name    Mix_ID  Territories     Track_Title  Artist         Track_ID\nMix Vol 1   abc123  GB | US | MX    Cabala       Prok &amp; Fitch   12345678\nMix Vol 1   abc123  US | CA         Autosave     Fedde          9101112\nMix Vol 1   abc123  US | CA         4 Life       Firebeatz      4151617\nMix Vol 1   abc123  IE | MX         4 Life       Firebeatz      18192021\n</code></pre>\n\n<p>I know that I need to Groupby: 'Mix_ID', 'Track_Title', and 'Artist' but I'm unsure of how to search the territories column to see if it contains the \"US\" territory. Any help would be much appreciated!</p>\n"}, {"tags": ["python", "selenium", "for-loop", "assert"], "comments": [{"owner": {"reputation": 3, "user_id": 11637589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a779d9300ec75298fafc614202038a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Ken", "link": "https://stackoverflow.com/users/11637589/ken"}, "edited": false, "score": 0, "creation_date": 1563473933, "post_id": 57085050, "comment_id": 100722104, "body": "Update: I found a solution. I moved the values_filled variable above the for loop. Next, I removed the second IF statement, and the continue and else lines. Code is now working correctly."}], "answers": [{"tags": [], "owner": {"reputation": 3, "user_id": 11637589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a779d9300ec75298fafc614202038a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Ken", "link": "https://stackoverflow.com/users/11637589/ken"}, "is_accepted": false, "score": 0, "last_activity_date": 1563478339, "creation_date": 1563478339, "answer_id": 57101506, "question_id": 57085050, "link": "https://stackoverflow.com/questions/57085050/selenium-python-iterate-through-web-table-columns-stop-after-condition-is-true/57101506#57101506", "title": "Selenium Python Iterate Through Web Table Columns, Stop after condition is True, Throw Error if Condition is False", "body": "<p>Posting a solution that works.</p>\n\n<pre><code>account_balances_table = driver.find_element(By.XPATH, \"/html/body/div[1]/div[3]/div/div/ui-view/div/div/div/div[4]/div[1]/table\")\nrows = account_balances_table.find_elements(By.TAG_NAME, \"tr\")\nvalues_filled = False\nfor row in rows:\n    cols = row.find_elements(By.TAG_NAME, \"td\")\n    for col in cols:\n        text_found = cols[1].text\n        if (\".\" in text_found):\n            values_filled = True\n            break\n\n        try:\n            assert values_filled is True\n        except AssertionError:\n            screenshot_name = \"FAIL\" + \"_\" + test_case_ID + \"_\" + browser + \"_\" + env + \"_\" + time_stamp + \".png\"\n            saved_screenshot_location = str(screenshot_directory / screenshot_name)\n            driver.get_screenshot_as_file(saved_screenshot_location)\n            raise\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11637589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a779d9300ec75298fafc614202038a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Ken", "link": "https://stackoverflow.com/users/11637589/ken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563478339, "creation_date": 1563404811, "question_id": 57085050, "link": "https://stackoverflow.com/questions/57085050/selenium-python-iterate-through-web-table-columns-stop-after-condition-is-true", "title": "Selenium Python Iterate Through Web Table Columns, Stop after condition is True, Throw Error if Condition is False", "body": "<p>I am trying to validate whether or not data values (which include dollars and cents amounts) are being populated in certain columns of an HTML table. I have written a Selenium Python Script that uses a For Loop to iterate through the HTML table. I have added an IF / ELSE in the For Loop to check if a decimal point is found in any of the text in the columns on the table. If a values with a decimal point is found, then variable \"values_filled\" is set to True (if not, then \"values_filled\" is set to False). My thinking is that if a value with a decimal point is found, then the column is being populated successfully with dollars and cents values. If no decimal point is found, then the column is NOT being populated and this should trigger a \"FAIL\".</p>\n\n<p>The code that I have written successfully iterates through the rows and columns of the HTML table. Further, the IF / ELSE section is correctly flagging \"values_filled\" = True if there is a value with a decimal point and values_filled = False if no values found. Last, I have a TRY / EXCEPT section where an exception is thrown if the values_filled is \"False\".</p>\n\n<p>What I would like to do next is when the first instance of the \"values_filled\" = True is found, I want to end the loop. However, the loop continues even when the values_filled value is true.</p>\n\n<pre><code>account_balances_table = driver.find_element(By.XPATH, \"/html/body/div[1]/div[3]/div/div/ui-view/div/div/div/div[4]/div[1]/table\")\nrows = account_balances_table.find_elements(By.TAG_NAME, \"tr\")\nfor row in rows:\n    cols = row.find_elements(By.TAG_NAME, \"td\")\n    for col in cols:\n        text_found = cols[1].text\n        if (\".\" in text_found):\n            values_filled = True\n            if values_filled == True:\n                break\n            else:\n                continue\n        else:\n            values_filled = False\n\n        try:\n            assert values_filled is True\n        except AssertionError:\n            screenshot_name = \"FAIL\" + \"_\" + test_case_ID + \"_\" + browser + \"_\" + env + \"_\" + time_stamp + \".png\"\n            saved_screenshot_location = str(screenshot_directory / screenshot_name)\n            driver.get_screenshot_as_file(saved_screenshot_location)\n            raise\n</code></pre>\n\n<p>The problem I am encountering is that the For Loop continues even when values_filled is \"true\". I inserted a break but the loop does not stop. This is a problem as the script continues and falsely flags an exception for blank values found in other cells. I would like the loop to end after finding the first instance of values_filled = true.</p>\n"}, {"tags": ["python", "machine-learning", "linear-regression"], "answers": [{"tags": [], "owner": {"reputation": 312, "user_id": 11579705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73bed681d2cdd5132556ba2c64fe400c?s=128&d=identicon&r=PG&f=1", "display_name": "zfabian", "link": "https://stackoverflow.com/users/11579705/zfabian"}, "is_accepted": false, "score": 0, "last_activity_date": 1563405108, "creation_date": 1563405108, "answer_id": 57085080, "question_id": 57085013, "link": "https://stackoverflow.com/questions/57085013/linear-regression-unexpected-results-python/57085080#57085080", "title": "Linear Regression - Unexpected Results (Python)", "body": "<p>Your learning rate is too large and GD does not converge. Try changing it to 0.01 and run it for more epochs, it worked for me.</p>\n"}], "owner": {"reputation": 21, "user_id": 4992750, "user_type": "registered", "profile_image": "https://graph.facebook.com/1143354832357094/picture?type=large", "display_name": "Jazz", "link": "https://stackoverflow.com/users/4992750/jazz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1563405108, "creation_date": 1563404439, "last_edit_date": 1563404959, "question_id": 57085013, "link": "https://stackoverflow.com/questions/57085013/linear-regression-unexpected-results-python", "title": "Linear Regression - Unexpected Results (Python)", "body": "<p>I am getting unexpected results for the implementation of linear regression I coded.\nSometimes I get out of memory error, squaring errors, multiplication errors, basically that I've run out of size.</p>\n\n<p>The code seems pretty okay to me, and I'm unable to identify why it fails to work.</p>\n\n<pre><code>X = np.array([ 6.1101,  5.5277,  8.5186,  7.0032,  5.8598,  8.3829, 7.4764,\n        8.5781,  6.4862,  5.0546,  5.7107, 14.164 ,  5.734 ,  8.4084,\n        5.6407,  5.3794,  6.3654,  5.1301,  6.4296,  7.0708,  6.1891,\n       20.27  ,  5.4901,  6.3261,  5.5649, 18.945 , 12.828 , 10.957 ,\n       13.176 , 22.203 ,  5.2524,  6.5894,  9.2482,  5.8918,  8.2111,\n        7.9334,  8.0959,  5.6063, 12.836 ,  6.3534,  5.4069,  6.8825,\n       11.708 ,  5.7737,  7.8247,  7.0931,  5.0702,  5.8014, 11.7   ,\n        5.5416,  7.5402,  5.3077,  7.4239,  7.6031,  6.3328,  6.3589,\n        6.2742,  5.6397,  9.3102,  9.4536,  8.8254,  5.1793, 21.279 ,\n       14.908 , 18.959 ,  7.2182,  8.2951, 10.236 ,  5.4994, 20.341 ,\n       10.136 ,  7.3345,  6.0062,  7.2259,  5.0269,  6.5479,  7.5386,\n        5.0365, 10.274 ,  5.1077,  5.7292,  5.1884,  6.3557,  9.7687,\n        6.5159,  8.5172,  9.1802,  6.002 ,  5.5204,  5.0594,  5.7077,\n        7.6366,  5.8707,  5.3054,  8.2934, 13.394 ,  5.4369])\ny = np.array([17.592  ,  9.1302 , 13.662  , 11.854  ,  6.8233 , 11.886  ,\n        4.3483 , 12.     ,  6.5987 ,  3.8166 ,  3.2522 , 15.505  ,\n        3.1551 ,  7.2258 ,  0.71618,  3.5129 ,  5.3048 ,  0.56077,\n        3.6518 ,  5.3893 ,  3.1386 , 21.767  ,  4.263  ,  5.1875 ,\n        3.0825 , 22.638  , 13.501  ,  7.0467 , 14.692  , 24.147  ,\n       -1.22   ,  5.9966 , 12.134  ,  1.8495 ,  6.5426 ,  4.5623 ,\n        4.1164 ,  3.3928 , 10.117  ,  5.4974 ,  0.55657,  3.9115 ,\n        5.3854 ,  2.4406 ,  6.7318 ,  1.0463 ,  5.1337 ,  1.844  ,\n        8.0043 ,  1.0179 ,  6.7504 ,  1.8396 ,  4.2885 ,  4.9981 ,\n        1.4233 , -1.4211 ,  2.4756 ,  4.6042 ,  3.9624 ,  5.4141 ,\n        5.1694 , -0.74279, 17.929  , 12.054  , 17.054  ,  4.8852 ,\n        5.7442 ,  7.7754 ,  1.0173 , 20.992  ,  6.6799 ,  4.0259 ,\n        1.2784 ,  3.3411 , -2.6807 ,  0.29678,  3.8845 ,  5.7014 ,\n        6.7526 ,  2.0576 ,  0.47953,  0.20421,  0.67861,  7.5435 ,\n        5.3436 ,  4.2415 ,  6.7981 ,  0.92695,  0.152  ,  2.8214 ,\n        1.8451 ,  4.2959 ,  7.2029 ,  1.9869 ,  0.14454,  9.0551 ,\n        0.61705])\ntheta = np.array([0,0]) #Initial values of theta_0 and theta_1\n\n#Calculates cost function for given theta\ndef costFunction(X,y,theta):\n    m = y.size\n    hypothesis = (X * theta[1]) + theta[0]\n    return (1/m) * sum((hypothesis - y) ** 2)\n\n#Calculates the partial derivatives of theta_0 and theta_1\ndef slope(X,y,theta):\n    m=y.size\n    hypothesis = (X * theta[1]) + theta[0]\n    theta_0 = 2/(m) * sum(hypothesis - y) \n    theta_1 = 2/(m) * sum((hypothesis - y) * X)\n    return np.array([theta_0,theta_1])\n\n#running the gradient descent with 200 iters with learning rate 0.1\nfor i in range(200):\n    theta = theta - 0.1*slope(X,y,theta)\n\ncostFunction(X,y,theta) # Prints inf\n</code></pre>\n"}, {"tags": ["python", "string", "pandas", "list", "types"], "comments": [{"owner": {"reputation": 8877, "user_id": 992600, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a07696b9e9f01acc66822c3c4a880b96?s=128&d=identicon&r=PG", "display_name": "adhg", "link": "https://stackoverflow.com/users/992600/adhg"}, "edited": false, "score": 0, "creation_date": 1563404555, "post_id": 57085000, "comment_id": 100693091, "body": "it would really help if you can provide your initial table"}, {"owner": {"reputation": 3527, "user_id": 6925185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6bd7821971973c8143f31356c85df3?s=128&d=identicon&r=PG&f=1", "display_name": "jottbe", "link": "https://stackoverflow.com/users/6925185/jottbe"}, "edited": false, "score": 0, "creation_date": 1563404683, "post_id": 57085000, "comment_id": 100693116, "body": "What do you mean by that you want to remove the [] on the <code>c_u</code> column? I don&#39;t see it in the examples. And did I get it right, that you want the ints to be in a separate column each? How many ints can there be at max?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1563404707, "post_id": 57085000, "comment_id": 100693120, "body": "Maybe <code>df[&#39;c_u&#39;] = df[&#39;c_u&#39;][0]</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 10278220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32d52ef20c5ae11cff4cbacbf13900f8?s=128&d=identicon&r=PG&f=1", "display_name": "aesthetics", "link": "https://stackoverflow.com/users/10278220/aesthetics"}, "edited": false, "score": 0, "creation_date": 1563405481, "post_id": 57085094, "comment_id": 100693280, "body": "do you know of a method to do that if &#39;c_u&#39; was not a type string? since strip can only be applied to strings? Is there another function that would work on just a list?"}, {"owner": {"reputation": 8877, "user_id": 992600, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a07696b9e9f01acc66822c3c4a880b96?s=128&d=identicon&r=PG", "display_name": "adhg", "link": "https://stackoverflow.com/users/992600/adhg"}, "reply_to_user": {"reputation": 31, "user_id": 10278220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32d52ef20c5ae11cff4cbacbf13900f8?s=128&d=identicon&r=PG&f=1", "display_name": "aesthetics", "link": "https://stackoverflow.com/users/10278220/aesthetics"}, "edited": false, "score": 0, "creation_date": 1563405558, "post_id": 57085094, "comment_id": 100693308, "body": "when you do df.dtypes what do you see for c_u"}, {"owner": {"reputation": 8877, "user_id": 992600, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a07696b9e9f01acc66822c3c4a880b96?s=128&d=identicon&r=PG", "display_name": "adhg", "link": "https://stackoverflow.com/users/992600/adhg"}, "reply_to_user": {"reputation": 31, "user_id": 10278220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32d52ef20c5ae11cff4cbacbf13900f8?s=128&d=identicon&r=PG&f=1", "display_name": "aesthetics", "link": "https://stackoverflow.com/users/10278220/aesthetics"}, "edited": false, "score": 0, "creation_date": 1563405636, "post_id": 57085094, "comment_id": 100693326, "body": "also - why don&#39;t you simply convert it to a string? df[&quot;c_u&quot;]=df[&quot;c_u&quot;].astype(str)"}, {"owner": {"reputation": 31, "user_id": 10278220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32d52ef20c5ae11cff4cbacbf13900f8?s=128&d=identicon&r=PG&f=1", "display_name": "aesthetics", "link": "https://stackoverflow.com/users/10278220/aesthetics"}, "edited": false, "score": 0, "creation_date": 1563405659, "post_id": 57085094, "comment_id": 100693331, "body": "if i do that before converting c_u to a string I get an error that says series object not callable"}, {"owner": {"reputation": 31, "user_id": 10278220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32d52ef20c5ae11cff4cbacbf13900f8?s=128&d=identicon&r=PG&f=1", "display_name": "aesthetics", "link": "https://stackoverflow.com/users/10278220/aesthetics"}, "edited": false, "score": 0, "creation_date": 1563405719, "post_id": 57085094, "comment_id": 100693348, "body": "I converted it to a string in the output image link, but then the columns output siingle quotes around the urls like &#39;abc.com&#39; when i just want abc.com. but i guess i can just remove the single quotes now?"}, {"owner": {"reputation": 31, "user_id": 10278220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32d52ef20c5ae11cff4cbacbf13900f8?s=128&d=identicon&r=PG&f=1", "display_name": "aesthetics", "link": "https://stackoverflow.com/users/10278220/aesthetics"}, "edited": false, "score": 0, "creation_date": 1563405960, "post_id": 57085094, "comment_id": 100693403, "body": "hmm that didn&#39;t remove the quotes, I tried this as well and it still didn&#39;t work: df[&#39;c_u&#39;].apply(lambda x : x.strip(&quot;[&#39;&quot;).strip(&quot;&#39;]&quot;)) with double quote [ single quote and single quote ] double quote"}, {"owner": {"reputation": 8877, "user_id": 992600, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a07696b9e9f01acc66822c3c4a880b96?s=128&d=identicon&r=PG", "display_name": "adhg", "link": "https://stackoverflow.com/users/992600/adhg"}, "reply_to_user": {"reputation": 31, "user_id": 10278220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32d52ef20c5ae11cff4cbacbf13900f8?s=128&d=identicon&r=PG&f=1", "display_name": "aesthetics", "link": "https://stackoverflow.com/users/10278220/aesthetics"}, "edited": false, "score": 0, "creation_date": 1563406006, "post_id": 57085094, "comment_id": 100693418, "body": "check my improved answer - it should do the trick. x.strip(&quot;[&#39;&quot;) note the &quot; and &#39;"}, {"owner": {"reputation": 31, "user_id": 10278220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32d52ef20c5ae11cff4cbacbf13900f8?s=128&d=identicon&r=PG&f=1", "display_name": "aesthetics", "link": "https://stackoverflow.com/users/10278220/aesthetics"}, "edited": false, "score": 0, "creation_date": 1563406073, "post_id": 57085094, "comment_id": 100693435, "body": "yup worked now, modified mine too from before, thank you very much!"}, {"owner": {"reputation": 8877, "user_id": 992600, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a07696b9e9f01acc66822c3c4a880b96?s=128&d=identicon&r=PG", "display_name": "adhg", "link": "https://stackoverflow.com/users/992600/adhg"}, "reply_to_user": {"reputation": 31, "user_id": 10278220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32d52ef20c5ae11cff4cbacbf13900f8?s=128&d=identicon&r=PG&f=1", "display_name": "aesthetics", "link": "https://stackoverflow.com/users/10278220/aesthetics"}, "edited": false, "score": 0, "creation_date": 1563406147, "post_id": 57085094, "comment_id": 100693442, "body": "anytime. just one comment: next time when you ask a question - always provide the table as text, it will really help us."}], "tags": [], "owner": {"reputation": 8877, "user_id": 992600, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a07696b9e9f01acc66822c3c4a880b96?s=128&d=identicon&r=PG", "display_name": "adhg", "link": "https://stackoverflow.com/users/992600/adhg"}, "is_accepted": true, "score": 1, "last_activity_date": 1563405975, "last_edit_date": 1563405975, "creation_date": 1563405171, "answer_id": 57085094, "question_id": 57085000, "link": "https://stackoverflow.com/questions/57085000/remove-list-type-in-columns-while-preserving-list-structure/57085094#57085094", "title": "Remove list type in columns while preserving list structure", "body": "<p>for the first part, removing the brackets [ ] </p>\n\n<pre><code>df['c_u'].apply(lambda x : x.strip(\"['\").strip(\"']\"))\n</code></pre>\n\n<p>for the second part (assuming you removed your brackets as well), splitting the values across columns:</p>\n\n<pre><code>df['tawgs.db_id'].str.split(',',  expand=True)\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 10278220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32d52ef20c5ae11cff4cbacbf13900f8?s=128&d=identicon&r=PG&f=1", "display_name": "aesthetics", "link": "https://stackoverflow.com/users/10278220/aesthetics"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 57085094, "answer_count": 1, "score": 2, "last_activity_date": 1564175752, "creation_date": 1563404372, "last_edit_date": 1564175752, "question_id": 57085000, "link": "https://stackoverflow.com/questions/57085000/remove-list-type-in-columns-while-preserving-list-structure", "title": "Remove list type in columns while preserving list structure", "body": "<p>I have two columns that from the way my data was pulled are in lists. This may be a really easy question, I just haven't found the exactly correct way to create the result I'm looking for.</p>\n\n<p>I need the \"a\" column to be a string without the [] and the \"a\" column to be integers separated by a column if that's possible. </p>\n\n<p>I've tried this code:</p>\n\n<pre><code>df['a'] = df['a'].astype(str)\n</code></pre>\n\n<p>to convert to a string: but it failed and outputs:</p>\n\n<p>What I need the output to look like is:</p>\n\n<pre><code>a                                           b\nhbhprecision.com         123,1234,12345,123456\nthomsonreuters.com            1234,12345,123456\n</code></pre>\n\n<p>etc.</p>\n\n<p>Please help and thank you very much in advance!</p>\n"}, {"tags": ["python", "if-statement"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1563404604, "post_id": 57084986, "comment_id": 100693107, "body": "Use <code>try&#47;catch</code>"}, {"owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "edited": false, "score": 1, "creation_date": 1563404738, "post_id": 57084986, "comment_id": 100693128, "body": "Testing if <code>int(a)</code> raises an exception is not a good test that <code>a</code> is a letter. Consider <code>int(&quot;=&quot;)</code>. Maybe testing <code>isalpha()</code> is a better approach."}, {"owner": {"reputation": 94146, "user_id": 477420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eb05243292dee6726c128660d31583b?s=128&d=identicon&r=PG", "display_name": "Alexei Levenkov", "link": "https://stackoverflow.com/users/477420/alexei-levenkov"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1563405391, "post_id": 57084986, "comment_id": 100693262, "body": "@Barmar any particular reason you recommend <code>try&#47;catch</code> for &quot; if the input is not a letter&quot;? I would expect python to have functions to check that without an exception \u2026 <a href=\"https://www.bing.com/search?q=python+if+the+input+is+not+a+letter\" rel=\"nofollow noreferrer\">bing.com/search?q=python+if+the+input+is+not+a+letter</a> suggest <code>isalpha</code>..."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 94146, "user_id": 477420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eb05243292dee6726c128660d31583b?s=128&d=identicon&r=PG", "display_name": "Alexei Levenkov", "link": "https://stackoverflow.com/users/477420/alexei-levenkov"}, "edited": false, "score": 1, "creation_date": 1563405456, "post_id": 57084986, "comment_id": 100693276, "body": "@AlexeiLevenkov I was suggesting it for &quot;input is not a number&quot;, not &quot;input is not a letter&quot;."}, {"owner": {"reputation": 94146, "user_id": 477420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eb05243292dee6726c128660d31583b?s=128&d=identicon&r=PG", "display_name": "Alexei Levenkov", "link": "https://stackoverflow.com/users/477420/alexei-levenkov"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1563405664, "post_id": 57084986, "comment_id": 100693332, "body": "@Barmar I see. Good thing OP actually included what they are trying to achieve in addition to what code they have."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 94146, "user_id": 477420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eb05243292dee6726c128660d31583b?s=128&d=identicon&r=PG", "display_name": "Alexei Levenkov", "link": "https://stackoverflow.com/users/477420/alexei-levenkov"}, "edited": false, "score": 0, "creation_date": 1563405787, "post_id": 57084986, "comment_id": 100693362, "body": "@AlexeiLevenkov I was going by &quot;if error occurs while implementing int(a)&quot;. I didn&#39;t notice that he was trying to use this for something different."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11794696, "user_type": "registered", "profile_image": "https://graph.facebook.com/1132606613589558/picture?type=large", "display_name": "Brandon Mitchell", "link": "https://stackoverflow.com/users/11794696/brandon-mitchell"}, "is_accepted": false, "score": 0, "last_activity_date": 1563404642, "creation_date": 1563404642, "answer_id": 57085030, "question_id": 57084986, "link": "https://stackoverflow.com/questions/57084986/how-to-implement-if-error-occurs-do-not-implement-this-code/57085030#57085030", "title": "How to implement &quot;if error occurs do not implement this code&quot;?", "body": "<p>explore try-except designs</p>\n\n<pre><code>try:\n   # do something here\nexcept (ErrorName):\n   # error catching\n   print(\"invalid character\")\n</code></pre>\n\n<p>Please try and include reproducible code, or a code block of pseudo-code so others can follow along easier!</p>\n"}, {"comments": [{"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 0, "creation_date": 1563408989, "post_id": 57085069, "comment_id": 100693977, "body": "I believe you meant to initialize <code>isOk = False</code> and in the except <code>isOk = True</code>?"}, {"owner": {"reputation": 6400, "user_id": 786593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02ca3156e5785370494410fc80f28a79?s=128&d=identicon&r=PG", "display_name": "wp-overwatch.com", "link": "https://stackoverflow.com/users/786593/wp-overwatch-com"}, "reply_to_user": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 1, "creation_date": 1563409965, "post_id": 57085069, "comment_id": 100694148, "body": "Whoops. I shouldn&#39;t have been multitasking while I was testing out the code. Thank you for pointing this out."}], "tags": [], "owner": {"reputation": 6400, "user_id": 786593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02ca3156e5785370494410fc80f28a79?s=128&d=identicon&r=PG", "display_name": "wp-overwatch.com", "link": "https://stackoverflow.com/users/786593/wp-overwatch-com"}, "is_accepted": false, "score": 2, "last_activity_date": 1563409467, "last_edit_date": 1563409467, "creation_date": 1563404963, "answer_id": 57085069, "question_id": 57084986, "link": "https://stackoverflow.com/questions/57084986/how-to-implement-if-error-occurs-do-not-implement-this-code/57085069#57085069", "title": "How to implement &quot;if error occurs do not implement this code&quot;?", "body": "<p>Normally you would use a <a href=\"http://&#39;https://docs.python.org/3/tutorial/errors.html#handling-exceptions&#39;\" rel=\"nofollow noreferrer\">Try, Except clause</a> to handle errors, but because you're not actually getting an error -- you just want to know if the input is an alphabetical character or not, you would use the <a href=\"https://docs.python.org/3/library/stdtypes.html#str.isalpha\" rel=\"nofollow noreferrer\">string.isalpha</a> function.</p>\n\n<pre><code>guess = input()\nif not guess.isalpha():\n    print('You must supply an alphabetical character')\nelse:\n    #the rest of your code would go here\n</code></pre>\n\n<hr>\n\n<hr>\n\n<p>Now to have some fun. This is how you would implement exactly what you where asking, however, please note that this does not catch punctuation characters, emoji characters, and any other random characters that are none-numeric and non-alphabetical.</p>\n\n<pre><code>guess = input()\nisOk = False\n\ntry:\n   int(guess)\nexcept ValueError:\n    isOk = True\n\nif not isOk:\n    print(\"you cannot enter a number\")\n</code></pre>\n\n<p>I don't know if it's a good idea to mention this or not, because it's a pretty quirky feature of Python to add the else here, but you can technically condense the above code to</p>\n\n<pre><code>guess = input()\ntry:\n   int(guess)\nexcept ValueError:\n    # All good\n    pass\nelse:\n    # we where able to cast to an integer = bad\n    print(\"you cannot enter a number\")\n</code></pre>\n\n<p>but I probably wouldn't ever do that in production code. Also, an important note. As you learn about try except clauses. Even though it's possible to just do <code>except:</code> Make sure you always state whatever you are catching. In this case a ValueError <code>except ValueError:</code> . If you don't do this, you suppress all errors, and you risk getting into a situation down the road were an important error gets suppressed, and you have no idea why your program is behaving incorrectly.</p>\n"}], "owner": {"reputation": 1, "user_id": 11782120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/340a71ec84cf1c26ddf99ab5b3cbaf1a?s=128&d=identicon&r=PG&f=1", "display_name": "Sulaiman", "link": "https://stackoverflow.com/users/11782120/sulaiman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 2, "score": -7, "last_activity_date": 1563409956, "creation_date": 1563404286, "last_edit_date": 1563409956, "question_id": 57084986, "link": "https://stackoverflow.com/questions/57084986/how-to-implement-if-error-occurs-do-not-implement-this-code", "title": "How to implement &quot;if error occurs do not implement this code&quot;?", "body": "<p>I want to write a code in python that basically does something like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>if error occurs while implementing int(a) print('valid character')\nelif no error occurs while implementing int(a)  print('invalid character')\n</code></pre>\n\n<p><code>a</code> is an input.</p>\n\n<p>I want to make a simple hangman game and if the input is not a letter I want a certain message to be displayed. I tried using <code>if a==int()</code>, but inputs are always a string.</p>\n"}, {"tags": ["python", "tensorflow", "keras", "semantic-segmentation", "tensorrt"], "comments": [{"owner": {"reputation": 7041, "user_id": 314290, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5ffde821f0f9670e601b19f1731a6849?s=128&d=identicon&r=PG", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/314290/mikhail"}, "edited": false, "score": 0, "creation_date": 1563653140, "post_id": 57084975, "comment_id": 100772828, "body": "Can you link the network?"}, {"owner": {"reputation": 73682, "user_id": 2097240, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/JskU5.jpg?s=128&g=1", "display_name": "Daniel M&#246;ller", "link": "https://stackoverflow.com/users/2097240/daniel-m%c3%b6ller"}, "edited": false, "score": 0, "creation_date": 1563662643, "post_id": 57084975, "comment_id": 100774673, "body": "It seems there are <code>ResizeNearestNeighbor</code> layers, which seem to be custom layers."}, {"owner": {"reputation": 5759, "user_id": 997378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a11366bc2dfe133e16a89898fa33b24f?s=128&d=identicon&r=PG", "display_name": "mdaoust", "link": "https://stackoverflow.com/users/997378/mdaoust"}, "edited": false, "score": 0, "creation_date": 1564060338, "post_id": 57084975, "comment_id": 100913099, "body": "&gt; transpose convolution  TransposedConvolution2D is in the list of supported ops for TensorFlow."}], "answers": [{"comments": [{"owner": {"reputation": 7041, "user_id": 314290, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5ffde821f0f9670e601b19f1731a6849?s=128&d=identicon&r=PG", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/314290/mikhail"}, "edited": false, "score": 0, "creation_date": 1563869448, "post_id": 57156482, "comment_id": 100833347, "body": "Yeah, building it is pretty easy but one of the questions I&#39;ve had deploying TensorFlow versus TensorRT is operating directly on GPU arrays. Seems like vanilla TensorFlow won&#39;t directly load GPU mapped pointers. For my application this will mess stuff up."}, {"owner": {"reputation": 324, "user_id": 3674532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14461bfff01bea1026d00334cfba6f9c?s=128&d=identicon&r=PG&f=1", "display_name": "Xenon", "link": "https://stackoverflow.com/users/3674532/xenon"}, "reply_to_user": {"reputation": 7041, "user_id": 314290, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5ffde821f0f9670e601b19f1731a6849?s=128&d=identicon&r=PG", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/314290/mikhail"}, "edited": false, "score": 0, "creation_date": 1563942517, "post_id": 57156482, "comment_id": 100862639, "body": "I think TensorFlow supports direct GPU memory access <a href=\"https://github.com/tensorflow/tensorflow/blob/5912f51d580551e5cee2cfde4cb882594b4d3e60/tensorflow/core/common_runtime/direct_session_test.cc#L1946\" rel=\"nofollow noreferrer\">like here</a> !"}], "tags": [], "owner": {"reputation": 324, "user_id": 3674532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14461bfff01bea1026d00334cfba6f9c?s=128&d=identicon&r=PG&f=1", "display_name": "Xenon", "link": "https://stackoverflow.com/users/3674532/xenon"}, "is_accepted": false, "score": 2, "last_activity_date": 1563854214, "creation_date": 1563854214, "answer_id": 57156482, "question_id": 57084975, "link": "https://stackoverflow.com/questions/57084975/deploy-semantic-segmentation-network-u-net-with-tensorrt-no-upsampling-suppor/57156482#57156482", "title": "Deploy Semantic Segmentation Network (U-Net) with TensorRT (no upsampling support)", "body": "<p>The warnings are because these operations are <a href=\"https://docs.nvidia.com/deeplearning/sdk/tensorrt-support-matrix/index.html\" rel=\"nofollow noreferrer\">not supported yet</a> by TensorRT, as you already mentioned.\nUnfortunately there is no easy way to fix this. You either have to modify the graph (even <a href=\"https://docs.nvidia.com/deeplearning/sdk/tensorrt-api/python_api/graphsurgeon/graphsurgeon.html\" rel=\"nofollow noreferrer\">after training</a>) to use a combination supported operation only; or write these operation yourself as <a href=\"https://docs.nvidia.com/deeplearning/sdk/tensorrt-sample-support-guide/index.html#plugin_sample\" rel=\"nofollow noreferrer\">custom layer</a>.  </p>\n\n<p>However, there is a better way to run inference on other devices in C++. You can use <a href=\"https://devblogs.nvidia.com/tensorrt-integration-speeds-tensorflow-inference/\" rel=\"nofollow noreferrer\">TensorFlow mixed with TensorRT together</a>. TensorRT will analyze the graph for ops that it supports and convert them to TensorRT nodes, and the remaining of the graph will be handled by TensorFlow as usual. More information <a href=\"https://docs.nvidia.com/deeplearning/frameworks/tf-trt-user-guide/index.html\" rel=\"nofollow noreferrer\">here</a>. This solution is much faster than rewriting the operations yourself. The only complicated part is to build TensorFlow from sources on your target device and <a href=\"https://medium.com/@fanzongshaoxing/use-tensorflow-c-api-with-opencv3-bacb83ca5683\" rel=\"nofollow noreferrer\">generating the dynamic library</a> <code>tensorflow_cc</code>. Recently there are many guides and support for TensorFlow ports to various architectures e.g. <a href=\"https://jkjung-avt.github.io/build-tensorflow-1.8.0/\" rel=\"nofollow noreferrer\">ARM</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 519, "user_id": 3411080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kPS7j.jpg?s=128&g=1", "display_name": "bpinaya", "link": "https://stackoverflow.com/users/3411080/bpinaya"}, "edited": false, "score": 0, "creation_date": 1564147103, "post_id": 57220897, "comment_id": 100946062, "body": "ps. maybe you can post your model once you convert it to onnx and I can parse it to trt for you :)"}, {"owner": {"reputation": 301, "user_id": 7645863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9LdtS.png?s=128&g=1", "display_name": "Yayuchen", "link": "https://stackoverflow.com/users/7645863/yayuchen"}, "edited": false, "score": 0, "creation_date": 1564348241, "post_id": 57220897, "comment_id": 100990596, "body": "Hi, thank you for answering. I just had a quick question. TensorRT documentation said that the tensorRT engine is device-specific (<a href=\"https://devtalk.nvidia.com/default/topic/1030042/jetson-tx1/loading-of-the-tensorrt-engine-in-c-api/\" rel=\"nofollow noreferrer\">devtalk.nvidia.com/default/topic/1030042/jetson-tx1/&hellip;</a>). So for it to work, I will have to run this script on the deployment platform as well? Thank you!"}, {"owner": {"reputation": 519, "user_id": 3411080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kPS7j.jpg?s=128&g=1", "display_name": "bpinaya", "link": "https://stackoverflow.com/users/3411080/bpinaya"}, "reply_to_user": {"reputation": 301, "user_id": 7645863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9LdtS.png?s=128&g=1", "display_name": "Yayuchen", "link": "https://stackoverflow.com/users/7645863/yayuchen"}, "edited": false, "score": 0, "creation_date": 1564387650, "post_id": 57220897, "comment_id": 100999273, "body": "Yes, you need to serialize it in the platform you will end up using. But onnx-trt builds on jetson and xavier."}], "tags": [], "owner": {"reputation": 519, "user_id": 3411080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kPS7j.jpg?s=128&g=1", "display_name": "bpinaya", "link": "https://stackoverflow.com/users/3411080/bpinaya"}, "is_accepted": false, "score": 1, "last_activity_date": 1564147071, "creation_date": 1564147071, "answer_id": 57220897, "question_id": 57084975, "link": "https://stackoverflow.com/questions/57084975/deploy-semantic-segmentation-network-u-net-with-tensorrt-no-upsampling-suppor/57220897#57220897", "title": "Deploy Semantic Segmentation Network (U-Net) with TensorRT (no upsampling support)", "body": "<p>Hey I've done something similar, I'd say the best way to tackle the issue is to export your model to <code>.onnx</code> with a good like <a href=\"https://github.com/onnx/tensorflow-onnx\" rel=\"nofollow noreferrer\">this one</a>, if you check the <a href=\"https://docs.nvidia.com/deeplearning/sdk/tensorrt-support-matrix/index.html\" rel=\"nofollow noreferrer\">support matrix for onnx</a>, upsample is supported:\n<a href=\"https://i.stack.imgur.com/rcrMA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rcrMA.png\" alt=\"enter image description here\"></a></p>\n\n<p>Then you can use <a href=\"https://github.com/onnx/onnx-tensorrt\" rel=\"nofollow noreferrer\">https://github.com/onnx/onnx-tensorrt</a> to convert the onnx-model to tensorrt, I've this to convert a network that I trained in pytorch and that had upsample. The repo for <code>onnx-tensorrt</code> is a bit more active, and if you check the pr tab you can check other people writing custom layers and fork from there.</p>\n"}, {"comments": [{"owner": {"reputation": 519, "user_id": 3411080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kPS7j.jpg?s=128&g=1", "display_name": "bpinaya", "link": "https://stackoverflow.com/users/3411080/bpinaya"}, "edited": false, "score": 1, "creation_date": 1566913842, "post_id": 57629924, "comment_id": 101799432, "body": "Heeey just adding a comment here, you can use <code>ConvTranspose2D</code> with fixed weights and no bias learned to simulate bilinear interpolation, I did this for onnx, and compared it with a bilinear interpolation custom layer and the deconv worked better, also faster."}], "tags": [], "owner": {"reputation": 301, "user_id": 7645863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9LdtS.png?s=128&g=1", "display_name": "Yayuchen", "link": "https://stackoverflow.com/users/7645863/yayuchen"}, "is_accepted": false, "score": 2, "last_activity_date": 1569707575, "last_edit_date": 1569707575, "creation_date": 1566577299, "answer_id": 57629924, "question_id": 57084975, "link": "https://stackoverflow.com/questions/57084975/deploy-semantic-segmentation-network-u-net-with-tensorrt-no-upsampling-suppor/57629924#57629924", "title": "Deploy Semantic Segmentation Network (U-Net) with TensorRT (no upsampling support)", "body": "<p><strong>Update 09/28/2019</strong></p>\n\n<p>Nvidia released <a href=\"https://docs.nvidia.com/deeplearning/sdk/tensorrt-release-notes/tensorrt-6.html#rel_6-0-1\" rel=\"nofollow noreferrer\">TensorRT 6.0.1</a> about two weeks ago and added a new API called \"IResizeLayer\". This layer supports \"Nearest\" interpolation and can thus be used to implement upsampling. No need to use custom layers/plugins any more!</p>\n\n<p><strong>Original answer:</strong></p>\n\n<p>thanks for all the answers and suggestions posted here! </p>\n\n<p>In the end, we implemented the network in TensorRT C++ API directly and loaded the weights from the .h5 model file. We haven't got the time to profile and polish the solution yet, but the inference seems to be working according to the test images we fed in.</p>\n\n<p>Here's the workflow we've adopted:</p>\n\n<p><em>Step 1: Code the upsampling layer.</em> </p>\n\n<p>In our U-Net model, all the upsampling layer has a scaling factor of (2, 2) and they all use ResizeNearestNeighbor interpolation. Essentially, pixel value at (x,y) in the original tensor will go to four pixels: (2x, 2y), (2x+1, 2y), (2x, 2y+1) and (2x+1, 2y+1) in the new tensor. This can be easily coded up into a CUDA kernel function. </p>\n\n<p>Once we got the upsampling kernel we need to wrap it with TensorRT API, specifically the <a href=\"https://docs.nvidia.com/deeplearning/sdk/tensorrt-api/c_api/classnvinfer1_1_1_i_plugin_v2_ext.html\" rel=\"nofollow noreferrer\">IPluginV2Ext class</a>. The developer reference has some descriptions of what functions need to be implemented. I'd say enqueue() is the most important function because the CUDA kernel gets executed there. </p>\n\n<p>There are also examples in the TensorRT Samples folder. For my version, these resources are helpful:</p>\n\n<ul>\n<li><a href=\"https://github.com/LitLeo/TensorRT_Tutorial/blob/master/blogs/TensorRT%20Plugin%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F%E7%AE%80%E4%BB%8B-%E4%BB%A5leaky%20relu%E5%B1%82%E4%B8%BA%E4%BE%8B.md\" rel=\"nofollow noreferrer\">Github: Leaky Relu as custom layer</a></li>\n<li>TensorRT-5.1.2.2/samples/sampleUffSSD</li>\n<li>TensorRT-5.1.2.2/samples/sampleSSD</li>\n</ul>\n\n<p><em>Step 2: Code the rest of the network using TensorRT API</em></p>\n\n<p>The rest of the network should be quite straightforward. Just find call different \"addxxxLayer\" function from <a href=\"https://docs.nvidia.com/deeplearning/sdk/tensorrt-api/c_api/classnvinfer1_1_1_i_network_definition.html\" rel=\"nofollow noreferrer\">TensorRT network definitions</a>. </p>\n\n<p>One thing to keep in mind:\ndepending on which version of TRT you are using, the way to add padding can be different. I think the newest version (5.1.5) allows developers to add parameters in <code>addConvolution()</code> so that the proper padding mode can be selected. </p>\n\n<p>My model was trained using Keras, the default padding mode is that the right and bottom get more padding if the total number of padding is not even. Check this <a href=\"https://stackoverflow.com/questions/53819528/how-does-tf-keras-layers-conv2d-with-padding-same-and-strides-1-behave\">Stack Overflow link</a> for details. There's a <a href=\"https://docs.nvidia.com/deeplearning/sdk/tensorrt-api/c_api/classnvinfer1_1_1_i_convolution_layer.html#a55b28cb09af34d6c4645455f8861ae34\" rel=\"nofollow noreferrer\">mode</a> in 5.1.5 that represents this padding scheme. </p>\n\n<p>If you are on an older version (5.1.2.2), you will need to add the padding as <a href=\"https://docs.nvidia.com/deeplearning/sdk/tensorrt-api/c_api/classnvinfer1_1_1_i_network_definition.html#a334d849cb8720a8a66a95fc84487b132\" rel=\"nofollow noreferrer\">a separate layer</a> before the convolution layer, which has two parameters: pre-padding and post-padding.</p>\n\n<p>Also, all things are NCHW in TensorRT</p>\n\n<p>Helpful sample:</p>\n\n<ul>\n<li>TensorRT-5.1.2.2/samples/sampleMNISTAP</li>\n</ul>\n\n<p><em>Step 3: Load the weights</em></p>\n\n<p>TensorRT wants weights in format [out_c, in_c, filter_h, filter_w], which is mentioned in an <a href=\"https://docs.nvidia.com/deeplearning/sdk/tensorrt-archived/tensorrt_210/tensorrt-user-guide/index.html#reshapedata\" rel=\"nofollow noreferrer\">archived documentation</a>. Keras has weights in format [filter_h, filter_w, c_in, c_out].</p>\n\n<p>We got a pure weights file by calling <code>model.save_weights('weight.h5')</code> in Python. Then we can read the weights into a Numpy array using h5py, performed transposing and saved the transposed weights as a new file. We also figured out the Group and Dataset name using h5py. This info was used when loading weights into C++ code using <a href=\"https://portal.hdfgroup.org/pages/viewpage.action?pageId=50073884\" rel=\"nofollow noreferrer\">HDF5 C++ API</a>.</p>\n\n<p>We compared the output layer by layer between C++ code and Python code. For our U-Net, all the activation maps are the same till maybe the third block (after 2 pooling). After that, there is a tiny difference between pixel values. The absolute percentage error is 10^-8 so we don't think it's that bad. We are still in the process of polishing the C++ implementation.</p>\n\n<p>Again, thanks for all the suggestions and answers we got in this post. Hope our solution can be helpful as well!</p>\n"}], "owner": {"reputation": 301, "user_id": 7645863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9LdtS.png?s=128&g=1", "display_name": "Yayuchen", "link": "https://stackoverflow.com/users/7645863/yayuchen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2860, "favorite_count": 4, "answer_count": 3, "score": 18, "last_activity_date": 1602255129, "creation_date": 1563404225, "last_edit_date": 1563746631, "question_id": 57084975, "link": "https://stackoverflow.com/questions/57084975/deploy-semantic-segmentation-network-u-net-with-tensorrt-no-upsampling-suppor", "title": "Deploy Semantic Segmentation Network (U-Net) with TensorRT (no upsampling support)", "body": "<p>I am trying to deploy a trained U-Net with TensorRT. The model was trained using Keras (with Tensorflow as backend). The code is very similar to this one: <a href=\"https://github.com/zhixuhao/unet/blob/master/model.py\" rel=\"noreferrer\">https://github.com/zhixuhao/unet/blob/master/model.py</a> </p>\n\n<p>When I converted the model to UFF format, using some code like this:</p>\n\n<pre><code>import uff\nimport os\nuff_fname = os.path.join(\"./models/\", \"model_\" + idx + \".uff\")\nuff_model = uff.from_tensorflow_frozen_model(\n    frozen_file = os.path.join('./models', trt_fname), output_nodes = output_names, \n    output_filename = uff_fname\n)\n</code></pre>\n\n<p>I will get the following warning: </p>\n\n<pre><code>Warning: No conversion function registered for layer: ResizeNearestNeighbor yet.\nConverting up_sampling2d_32_12/ResizeNearestNeighbor as custom op: ResizeNearestNeighbor\nWarning: No conversion function registered for layer: DataFormatVecPermute yet.\nConverting up_sampling2d_32_12/Shape-0-0-VecPermuteNCHWToNHWC-LayoutOptimizer as custom op: DataFormatVecPermute\n</code></pre>\n\n<p>I tried to avoid this by replacing the upsampling layer with upsampling(bilinear interpolation) and transpose convolution. But the converter would throw me similar errors. I checked <a href=\"https://docs.nvidia.com/deeplearning/sdk/tensorrt-support-matrix/index.html\" rel=\"noreferrer\">https://docs.nvidia.com/deeplearning/sdk/tensorrt-support-matrix/index.html</a> and it seemed all these operations are not supported yet. </p>\n\n<p>I am wondering if there is any workaround to this problem? Is there any other format/framework that TensorRT likes and has upsampling supported? Or is it possible to replace it with some other supported operations?</p>\n\n<p>I also saw somewhere that one can add customized operations to replace those unsupported ones for TensorRT. Though I am not so sure how the workflow would be. It would also be really helpful if someone could point out an example of custom layers. </p>\n\n<p>Thank you in advance!</p>\n"}, {"tags": ["python", "python-3.x", "odoo", "odoo-11"], "comments": [{"owner": {"reputation": 3322, "user_id": 6766457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b32dab91c17be7b8a4b0796836b2d27?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/6766457/nathan"}, "edited": false, "score": 0, "creation_date": 1563404086, "post_id": 57084929, "comment_id": 100692964, "body": "Hacve you tried removing the brackets at fm =?"}, {"owner": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "edited": false, "score": 0, "creation_date": 1563404246, "post_id": 57084929, "comment_id": 100693004, "body": "That missing ending apostrophe in <code>_name = &#39;itriplee.garantias</code>, is that in your code too?"}, {"owner": {"reputation": 469147, "user_id": 476, "user_type": "moderator", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a235706e3d81b614acaec3368edfea4b?s=128&d=identicon&r=PG", "display_name": "deceze", "link": "https://stackoverflow.com/users/476/deceze"}, "edited": false, "score": 0, "creation_date": 1563404283, "post_id": 57084929, "comment_id": 100693016, "body": "So apparently <code>obj.fecha_de_venta</code> is a bool, not a date string."}, {"owner": {"reputation": 584, "user_id": 9432281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kw16b.jpg?s=128&g=1", "display_name": "Terrence Poe", "link": "https://stackoverflow.com/users/9432281/terrence-poe"}, "edited": false, "score": 0, "creation_date": 1563410595, "post_id": 57084929, "comment_id": 100694246, "body": "you nedd to add this <code>if obj.fecha_de_venta:</code> to assure you can get date value.To Prevent none value cause that error."}, {"owner": {"reputation": 793, "user_id": 11508560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZwfUb.jpg?s=128&g=1", "display_name": "Ajmal JK", "link": "https://stackoverflow.com/users/11508560/ajmal-jk"}, "edited": false, "score": 0, "creation_date": 1563434258, "post_id": 57084929, "comment_id": 100700224, "body": "The field &#39;fecha_de_venta&#39; is related to &#39;equipo.venta&#39; ,  are you sure the field &#39;venta&#39; in the model &#39;itriplee.equipos&#39; , is a date field ?"}, {"owner": {"reputation": 1, "user_id": 11799844, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tPGQGwsqGPQ/AAAAAAAAAAI/AAAAAAAAOhk/W6W6CsHjPEE/photo.jpg?sz=128", "display_name": "Miguel Zamora Garcia", "link": "https://stackoverflow.com/users/11799844/miguel-zamora-garcia"}, "edited": false, "score": 0, "creation_date": 1563465041, "post_id": 57084929, "comment_id": 100718040, "body": "Thanks for your help. but the problem persist:  Nathan I tried but it does not make a difference. Ipaleka there&#39;s the apostrophe. Deceze: i know but in theory is a date string. Ajmal JK: try to change the field to one where I enter the value directly but I still give the same error. Terrence Poe: i tried put the &quot;if&quot; after while but the problem persist."}], "answers": [{"tags": [], "owner": {"reputation": 685, "user_id": 11699057, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UHwrR.jpg?s=128&g=1", "display_name": "Thayif kabir", "link": "https://stackoverflow.com/users/11699057/thayif-kabir"}, "is_accepted": false, "score": 1, "last_activity_date": 1563422135, "last_edit_date": 1563422135, "creation_date": 1563421511, "answer_id": 57086820, "question_id": 57084929, "link": "https://stackoverflow.com/questions/57084929/i-try-to-update-odoo-code-but-i-get-strptime-argument-1-must-be-str-not-bool/57086820#57086820", "title": "i try to update odoo code but i get strptime() argument 1 must be str, not bool", "body": "<p>This error occurs when that field is not date string or it contains null value, so it returns False value when it is called.So first make sure that field contains date str when function is called.strptime method requires date string value.</p>\n\n<p>You can use if condition to check whether data is present in field continue strptime method or if you're using pycharm you can add breakpoint to check values</p>\n"}], "owner": {"reputation": 1, "user_id": 11799844, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tPGQGwsqGPQ/AAAAAAAAAAI/AAAAAAAAOhk/W6W6CsHjPEE/photo.jpg?sz=128", "display_name": "Miguel Zamora Garcia", "link": "https://stackoverflow.com/users/11799844/miguel-zamora-garcia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1563422135, "creation_date": 1563403741, "last_edit_date": 1563404213, "question_id": 57084929, "link": "https://stackoverflow.com/questions/57084929/i-try-to-update-odoo-code-but-i-get-strptime-argument-1-must-be-str-not-bool", "title": "i try to update odoo code but i get strptime() argument 1 must be str, not bool", "body": "<p>The objective is to take the sale date and create a plan for automatic visits, 2 visits per year for three years, and i can do it in older version of odoo but now i get this error.</p>\n\n<p>that worked in openerp 7, but now i want to do it in Odoo 11.0 Python 3, really i don't get it what i missed</p>\n\n<pre><code>\n    class garantias(models.Model):\n        _name = 'itriplee.garantias'\n\n        equipo = fields.Many2one('itriplee.equipos', 'Equipo')\n        fecha_de_venta = fields.Date('Fecha de Venta', related='equipo.venta', readonly=True)\n\n     @api.model\n        def create(self, vals):\n            obj_visita = self.pool.get('itriplee.servicio')\n            obj = self.env['itriplee.garantias']\n            cliente = obj.cliente.id\n            fecha_compra = obj.fecha_de_venta\n            fm = ('%Y-%m-%d')\n            cantidad_meses = 6\n            ind = 0\n            now = datetime.now()\n            now_str = now.strftime(fm)\n            now_int = datetime.strptime(now_str, fm)\n            # fecha_compra_original = datetime.strptime(fecha_compra, fm)\n            fecha_compra_inicial = datetime.strptime(fecha_compra, fm)\n            while ind &lt; cantidad_meses:\n                fecha_6_meses = fecha_compra_inicial + relativedelta(months=6)\n                if fecha_6_meses &gt;= now_int:\n                    obj_visita.create({'cliente':cliente,'visita':fecha_6_meses,'estado':'confirmar','visitas':obj.id},context=None)\n                ind = ind + 1\n                fecha_compra_inicial = fecha_6_meses\n            return True\n\n</code></pre>\n\n<p>and get this error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/home/openerp/odoo-dev/odoo/odoo/http.py\", line 651, in _handle_exception\n    return super(JsonRequest, self)._handle_exception(exception)\n  File \"/home/openerp/odoo-dev/odoo/odoo/http.py\", line 310, in _handle_exception\n    raise pycompat.reraise(type(exception), exception, sys.exc_info()[2])\n  File \"/home/openerp/odoo-dev/odoo/odoo/tools/pycompat.py\", line 87, in reraise\n    raise value\n  File \"/home/openerp/odoo-dev/odoo/odoo/http.py\", line 693, in dispatch\n    result = self._call_function(**self.params)\n  File \"/home/openerp/odoo-dev/odoo/odoo/http.py\", line 342, in _call_function\n    return checked_call(self.db, *args, **kwargs)\n  File \"/home/openerp/odoo-dev/odoo/odoo/service/model.py\", line 97, in wrapper\n    return f(dbname, *args, **kwargs)\n  File \"/home/openerp/odoo-dev/odoo/odoo/http.py\", line 335, in checked_call\n    result = self.endpoint(*a, **kw)\n  File \"/home/openerp/odoo-dev/odoo/odoo/http.py\", line 937, in __call__\n    return self.method(*args, **kw)\n  File \"/home/openerp/odoo-dev/odoo/odoo/http.py\", line 515, in response_wrap\n    response = f(*args, **kw)\n  File \"/home/openerp/odoo-dev/odoo/addons/web/controllers/main.py\", line 934, in call_kw\n    return self._call_kw(model, method, args, kwargs)\n  File \"/home/openerp/odoo-dev/odoo/addons/web/controllers/main.py\", line 926, in _call_kw\n    return call_kw(request.env[model], method, args, kwargs)\n  File \"/home/openerp/odoo-dev/odoo/odoo/api.py\", line 687, in call_kw\n    return call_kw_model(method, model, args, kwargs)\n  File \"/home/openerp/odoo-dev/odoo/odoo/api.py\", line 672, in call_kw_model\n    result = method(recs, *args, **kwargs)\n  File \"/home/openerp/odoo-dev/odoo/addons/itriplee/models/garantias.py\", line 53, in create\n    fecha_compra_inicial = datetime.strptime(fecha_compra, fm).date()\nTypeError: strptime() argument 1 must be str, not bool\n</code></pre>\n"}, {"tags": ["python", "warnings", "bots", "telegram"], "comments": [{"owner": {"reputation": 1174, "user_id": 4686871, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/888524107876859/picture?type=large", "display_name": "Sergei Sirik", "link": "https://stackoverflow.com/users/4686871/sergei-sirik"}, "edited": false, "score": 0, "creation_date": 1563403931, "post_id": 57084901, "comment_id": 100692928, "body": "How this is connected to java? Please, remove misleading tag."}, {"owner": {"reputation": 33, "user_id": 11799984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/485fd2bd977f27edf4f335bfaa81e447?s=128&d=identicon&r=PG&f=1", "display_name": "richarderik", "link": "https://stackoverflow.com/users/11799984/richarderik"}, "reply_to_user": {"reputation": 1174, "user_id": 4686871, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/888524107876859/picture?type=large", "display_name": "Sergei Sirik", "link": "https://stackoverflow.com/users/4686871/sergei-sirik"}, "edited": false, "score": 0, "creation_date": 1563404130, "post_id": 57084901, "comment_id": 100692980, "body": "Sorry my mistake"}], "answers": [{"tags": [], "owner": {"reputation": 1512, "user_id": 446043, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fe5b32e6bdc4414d12f6060d9e4c46e8?s=128&d=identicon&r=PG", "display_name": "gvanto", "link": "https://stackoverflow.com/users/446043/gvanto"}, "is_accepted": false, "score": 0, "last_activity_date": 1565770800, "creation_date": 1565770800, "answer_id": 57490824, "question_id": 57084901, "link": "https://stackoverflow.com/questions/57084901/telethon-issue-need-to-read-messages-from-channels/57490824#57490824", "title": "Telethon issue, need to read messages from channels", "body": "<p><a href=\"https://telethon.readthedocs.io/en/latest/basic/quick-start.html\" rel=\"nofollow noreferrer\">https://telethon.readthedocs.io/en/latest/basic/quick-start.html</a> This is very helpful it goes through from start to finish</p>\n"}], "owner": {"reputation": 33, "user_id": 11799984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/485fd2bd977f27edf4f335bfaa81e447?s=128&d=identicon&r=PG&f=1", "display_name": "richarderik", "link": "https://stackoverflow.com/users/11799984/richarderik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1340, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1565770800, "creation_date": 1563403538, "last_edit_date": 1563404214, "question_id": 57084901, "link": "https://stackoverflow.com/questions/57084901/telethon-issue-need-to-read-messages-from-channels", "title": "Telethon issue, need to read messages from channels", "body": "<p>I've read a lot of answers here and tried their code, but I cannot get the examples to work for me and I don't understand why.</p>\n\n<p>I want to capture messages from telegram channels but noone of telehon methods works for me...</p>\n\n<p>I'm using telethon but it is not important how. I just need to capture these messages.</p>\n\n<pre><code>from telethon import TelegramClient, events,utils\nfrom telethon.tl.functions.messages import GetFullChatRequest\nfrom telethon.tl.functions.messages import GetHistoryRequest\nfrom telethon.tl.functions.channels import GetChannelsRequest\nfrom telethon.tl.functions.contacts import ResolveUsernameRequest\nfrom telethon.tl.types import PeerUser, PeerChat, PeerChannel , sync\nimport re\n\n\nclient = TelegramClient('session_name', api id, api hash )\nclient.start()\nmy_self=client.get_me()\nprint(myself)\n</code></pre>\n\n<p>This is the output I get:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code> C:/Users/Riccardo/Desktop/yobitpumpR.py:15: RuntimeWarning: coroutine \n 'AuthMethods._start' was never awaited\n\n C:/Users/Riccardo/Desktop/yobitpumpR.py:19: RuntimeWarning: coroutine \n 'get_me' was never awaited\n &lt;coroutine object get_me at 0x00000083F93E9410&gt;\n</code></pre>\n\n<p>How should I proceed?</p>\n"}, {"tags": ["python", "numpy", "array-broadcasting"], "answers": [{"tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": true, "score": 2, "last_activity_date": 1563407077, "creation_date": 1563407077, "answer_id": 57085324, "question_id": 57084899, "link": "https://stackoverflow.com/questions/57084899/how-to-modify-np-array-by-slicing-through-the-broadcast-of-an-index-vector/57085324#57085324", "title": "How to modify np array by slicing through the broadcast of an index vector?", "body": "<p>Here are two related ways which turn out to be roughly equally fast:</p>\n\n<pre><code>import numpy as np\nfrom timeit import timeit\n\nM = [[ 1, 2, 3, 4, 5],\n     [ 6, 7, 8, 9,10]]\n\nx = [2, 3]\n\ndef f():\n    MM = np.array(M)\n    xx = np.array(x)\n    MM[np.arange(5)&lt;xx[:,None]] *= 2\n    return MM\n\ndef g():\n    MM = np.array(M)\n    xx = np.array(x)\n    MM *= 1 + (np.arange(5)&lt;xx[:,None])\n    return MM\n\nprint(f())\nprint(g())\nM = 1000*M\nx = 1000*x\nprint(timeit(f,number=1000))\nprint(timeit(g,number=1000))\n</code></pre>\n\n<p>Sample run:</p>\n\n<pre><code>[[ 2  4  3  4  5]\n [12 14 16  9 10]]\n[[ 2  4  3  4  5]\n [12 14 16  9 10]]\n1.1994759310036898\n1.1547658089984907\n</code></pre>\n"}], "owner": {"reputation": 1009, "user_id": 6423074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3Jjf3.png?s=128&g=1", "display_name": "Pedro", "link": "https://stackoverflow.com/users/6423074/pedro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 57085324, "answer_count": 1, "score": 0, "last_activity_date": 1563407077, "creation_date": 1563403529, "question_id": 57084899, "link": "https://stackoverflow.com/questions/57084899/how-to-modify-np-array-by-slicing-through-the-broadcast-of-an-index-vector", "title": "How to modify np array by slicing through the broadcast of an index vector?", "body": "<p>I have this m x n numpy array which I want to apply certain operation over the row elements. Although, it must be cast only on those elements whose index is prior to those specified by the entries on a vector of indexes.</p>\n\n<p>I've already gone through the classic for-loop way, but I was expecting something more NumPythonic.</p>\n\n<p>The following code would complete the job:</p>\n\n<pre><code>for i,j in enumerate(x):\n    M[i, 0:j] = 2*M[i, 0:j]\n</code></pre>\n\n<p>But I was look for a broadcast, no-for approach. Any Ideas?</p>\n\n<p>For example, lets say that</p>\n\n<pre><code>M = [[ 1, 2, 3, 4, 5],\n     [ 6, 7, 8, 9,10]]\n\nx = [2, 3]\n</code></pre>\n\n<p>and our application is to double certain element. According to the indexes specified in x we should have the resulting array:</p>\n\n<pre><code>M = [[ 2, 4, 3, 4, 5],\n     [12,14,16, 9,10]]\n</code></pre>\n"}, {"tags": ["python", "memory", "aws-lambda", "boto3"], "comments": [{"owner": {"reputation": 234, "user_id": 5724723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5006cd461794cf947b99a2a7d33827c0?s=128&d=identicon&r=PG&f=1", "display_name": "AndrewH", "link": "https://stackoverflow.com/users/5724723/andrewh"}, "edited": false, "score": 0, "creation_date": 1563404514, "post_id": 57084884, "comment_id": 100693083, "body": "What is your concurrency set to? The memory allocation is for all running lambdas, so if you are trying to process &gt;2 files at once this may be your problem."}, {"owner": {"reputation": 3322, "user_id": 6766457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b32dab91c17be7b8a4b0796836b2d27?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/6766457/nathan"}, "edited": false, "score": 0, "creation_date": 1563404616, "post_id": 57084884, "comment_id": 100693111, "body": "This may be better in place over at the guys in code review <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a>"}, {"owner": {"reputation": 234, "user_id": 5724723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5006cd461794cf947b99a2a7d33827c0?s=128&d=identicon&r=PG&f=1", "display_name": "AndrewH", "link": "https://stackoverflow.com/users/5724723/andrewh"}, "edited": false, "score": 0, "creation_date": 1563404870, "post_id": 57084884, "comment_id": 100693157, "body": "Or, read the file byte by byte from s3 instead of all at once into memory: <a href=\"https://stackoverflow.com/a/40661459/5724723\">stackoverflow.com/a/40661459/5724723</a>, i.e. iterate through <code>_raw_stream</code>"}, {"owner": {"reputation": 76206, "user_id": 108205, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ef459127edc89cc575d80a73cd8c567a?s=128&d=identicon&r=PG", "display_name": "jsbueno", "link": "https://stackoverflow.com/users/108205/jsbueno"}, "edited": false, "score": 0, "creation_date": 1563409192, "post_id": 57084884, "comment_id": 100694011, "body": "&quot;I put the whole function&quot; - no, you did not.. Please, do that. Put all the code that seens like &quot;boiler plate&quot; - without that these are a bunch of lines that are hard to refactor in any way meaningful.  The fix for this will be to refactor things into lazy generators, but I can&#39;t take lines to outside a function I am not seeing!"}, {"owner": {"reputation": 137816, "user_id": 13070, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/pio3A.jpg?s=128&g=1", "display_name": "Mark B", "link": "https://stackoverflow.com/users/13070/mark-b"}, "reply_to_user": {"reputation": 234, "user_id": 5724723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5006cd461794cf947b99a2a7d33827c0?s=128&d=identicon&r=PG&f=1", "display_name": "AndrewH", "link": "https://stackoverflow.com/users/5724723/andrewh"}, "edited": false, "score": 1, "creation_date": 1563461290, "post_id": 57084884, "comment_id": 100715769, "body": "@AndrewH the AWS Lambda memory limit setting is not for &quot;all running lambdas&quot;. It applies to each Lambda instance separately. <a href=\"https://docs.aws.amazon.com/lambda/latest/dg/resource-model.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/lambda/latest/dg/resource-model.html</a> &quot;Memory \u2013 The amount of memory available to the function during execution.&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 2716300, "user_type": "registered", "profile_image": "https://graph.facebook.com/770804992/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/2716300/alex"}, "edited": false, "score": 0, "creation_date": 1563482921, "post_id": 57085590, "comment_id": 100725784, "body": "These are some really good suggestions, thank you. I&#39;m still learning python so stuff like eager load and the specific syntax of python is new to me also. I appreciate the advice"}], "tags": [], "owner": {"reputation": 76206, "user_id": 108205, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ef459127edc89cc575d80a73cd8c567a?s=128&d=identicon&r=PG", "display_name": "jsbueno", "link": "https://stackoverflow.com/users/108205/jsbueno"}, "is_accepted": false, "score": 0, "last_activity_date": 1563409869, "creation_date": 1563409869, "answer_id": 57085590, "question_id": 57084884, "link": "https://stackoverflow.com/questions/57084884/how-can-i-improve-my-function-to-be-more-memory-efficient/57085590#57085590", "title": "How can I improve my function to be more memory efficient?", "body": "<p>Try to check yor logs or traceback for the exact line of the the error - the point you point to in the code really will read one line at a time (with the OS behind the scenes casing stuff, but that would be a couple hundred KB at most).</p>\n\n<p>It is more likely that methods such as  <code>s3Client.get_object(Bucket=inputBucketName, Key=item)</code> or attribute accesses like <code>long_file = s3_object['Body']._raw_stream.data</code> are eagerly bringing the file actual contents in to memory,. </p>\n\n<p>You have to check the docs for those, and how to stream data from the S3 and dump it to disk, instead of having it all in memory. The fact that the attribute is named <code>._raw_stream</code>, beggining with an <code>_</code> indicate it is a private attribute, and it is not advised to make use of it directly. </p>\n\n<p>Also, you are using <code>pass</code> which does nothing, the remaining of the loop will run the sameway - you might want to use <code>continue</code> there. And an empty <code>except</code> clause , without logging the error, is among the worst mistakes possible in Python code - if there is an error there, you have to log it, not just \"pretend it did not happen\". (It is even ilegal syntax in Python 3)</p>\n"}, {"comments": [{"owner": {"reputation": 85, "user_id": 2716300, "user_type": "registered", "profile_image": "https://graph.facebook.com/770804992/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/2716300/alex"}, "edited": false, "score": 1, "creation_date": 1563482790, "post_id": 57086019, "comment_id": 100725724, "body": "Awesome feedback monkut, thanks! It never occurred to me to just write the lambda to handle a single file and call it repeatedly. I&#39;ll also take a look at zappa, thank you for the suggestion :)"}, {"owner": {"reputation": 35977, "user_id": 24718, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/0kiYe.jpg?s=128&g=1", "display_name": "monkut", "link": "https://stackoverflow.com/users/24718/monkut"}, "reply_to_user": {"reputation": 85, "user_id": 2716300, "user_type": "registered", "profile_image": "https://graph.facebook.com/770804992/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/2716300/alex"}, "edited": false, "score": 0, "creation_date": 1563499463, "post_id": 57086019, "comment_id": 100729537, "body": "Also, handling 1 file per lambda call allows you to process all files in parallel. ;)"}], "tags": [], "owner": {"reputation": 35977, "user_id": 24718, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/0kiYe.jpg?s=128&g=1", "display_name": "monkut", "link": "https://stackoverflow.com/users/24718/monkut"}, "is_accepted": true, "score": 1, "last_activity_date": 1563499571, "last_edit_date": 1563499571, "creation_date": 1563414706, "answer_id": 57086019, "question_id": 57084884, "link": "https://stackoverflow.com/questions/57084884/how-can-i-improve-my-function-to-be-more-memory-efficient/57086019#57086019", "title": "How can I improve my function to be more memory efficient?", "body": "<p>Think more simply.</p>\n\n<p>I suggest just handling a single file per lambda call, then you should be within your 3GB easily.  In anycase, with an increase in the number of files to process eventually your lambda function will hit the max <em>15 minute</em> execution limit, so it's better to think of lambda processing in roughly consistently sized chunks.</p>\n\n<p>If necessary you can introduce an intermediate chunker lambda function to chunk out the processing.</p>\n\n<p>If your files are really only 800MB I would think that your processing should be ok in terms of memory.  The input file may still be streaming in, you may want to try deleting it (<code>del s3_object['Body']</code>?)</p>\n\n<pre><code>from io import StringIO\n\ndef handle_file(key_name):\n    # Check if the object exists, and skip it\n    try:\n        head_object_response = s3Client.head_object(\n            Bucket=target_bucket_name, \n            Key=item\n        )\n        logger.info(f'{item} - Key already exists.')   \n        return None, 0\n    except ClientError as e:\n        logger.exception(e)\n        logger.info(f'{item} - Does Not exist.')           \n\n    # If the file doesn't exist, get the full object\n    s3_object = s3Client.get_object(Bucket=inputBucketName, Key=item)\n    long_file = StringIO(s3_object['Body'])\n\n    max_lines = 1000\n    lines = []\n    for n, line in enumerate(long_file):\n        lines.append(line)\n        if len(lines) == max_lines:\n            break\n\n    output = StringIO()\n    output.writelines(lines)    \n    output.seek(0)\n    response = s3Client.put_object(Body=output, Bucket=outputBucketName, Key=item)\n    return item, len(lines)\n</code></pre>\n\n<p>As a side note I really recommend <a href=\"https://github.com/Miserlou/Zappa\" rel=\"nofollow noreferrer\">zappa</a> if your using lambda, it makes lambda development fun. (and it would make chunking out code sections easy in the same code using <a href=\"https://github.com/Miserlou/Zappa#asynchronous-task-execution\" rel=\"nofollow noreferrer\">Asynchronous Task Execution</a>)</p>\n"}], "owner": {"reputation": 85, "user_id": 2716300, "user_type": "registered", "profile_image": "https://graph.facebook.com/770804992/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/2716300/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 0, "accepted_answer_id": 57086019, "answer_count": 2, "score": 0, "last_activity_date": 1563499571, "creation_date": 1563403482, "question_id": 57084884, "link": "https://stackoverflow.com/questions/57084884/how-can-i-improve-my-function-to-be-more-memory-efficient", "title": "How can I improve my function to be more memory efficient?", "body": "<p>I'm writing an AWS Lambda in Python 3.6\nI have a large amount of large space separated text files and I need to loop through these files and pull out the first N (in this case 1000) lines of text. Once I have those lines I need to put them in to a new file and upload that to S3.</p>\n\n<p>I'm also not a python developer, so the language and environment is new to me.</p>\n\n<p>Right now I'm collecting the S3 object summaries, and for each of those, I'm running a check on them and then getting the object's data, opening that as a file-like object and also opening the output variable as a file-like object, and then doing my processing.</p>\n\n<p>I've given my Lambda 3GB RAM but the lambda is running out of memory before it can process any files (Each file is about 800MB and there are about 210 of them).</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>    for item in object_summary:\n        # Check if the object exists, and skip it if so\n        try:\n            head_object_response = s3Client.head_object(Bucket=target_bucket_name, Key=item)\n            logger.info('%s: Key alredy exists.' % item)\n        except:\n            # if the key does not exist, we need to swallow the 404 that comes from boto3\n            pass\n\n        # and then do our logic to headify the files\n        logger.info('Key does not exist in target, headifying: %s' % item)\n\n        # If the file doesn't exist, get the full object\n        s3_object = s3Client.get_object(Bucket=inputBucketName, Key=item)\n        long_file = s3_object['Body']._raw_stream.data\n        file_name = item\n        logger.info('%s: Processing 1000 lines of input.' % file_name)\n\n        '''\n        Looks like the Lambda hits a memory limit on the line below.\n        It crashes with 2500MB of memory used, the file it's trying \n        to open at that stage is 800MB large which puts it over the \n        max allocation of 3GB\n        '''\n        try:\n            with open(long_file, 'r') as input_file, open(file_name, 'w') as output_file:\n                for i in range(1000):\n                    output_file.write(input_file.readline())\n        except OSError as exception:\n            if exception.errno ==36:\n                logger.error('File name: %s' %exception.filename)\n                logger.error(exception.__traceback__)\n</code></pre>\n\n<p>I put the whole function for completeness above, but I think that the specific area I can improve it is the <code>try: while:</code> block that handles the file processing. </p>\n\n<p>Have I got that right? Is there anywhere else I can improve it?</p>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 3322, "user_id": 6766457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b32dab91c17be7b8a4b0796836b2d27?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/6766457/nathan"}, "edited": false, "score": 0, "creation_date": 1563404800, "post_id": 57084861, "comment_id": 100693143, "body": "Is the indentation around the for loop over Z correct?"}, {"owner": {"reputation": 21, "user_id": 11799960, "user_type": "registered", "profile_image": "https://graph.facebook.com/1340318986134755/picture?type=large", "display_name": "Jose Maria Herrera", "link": "https://stackoverflow.com/users/11799960/jose-maria-herrera"}, "reply_to_user": {"reputation": 3322, "user_id": 6766457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b32dab91c17be7b8a4b0796836b2d27?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/6766457/nathan"}, "edited": false, "score": 0, "creation_date": 1563469782, "post_id": 57084861, "comment_id": 100720327, "body": "Yes! It seems to work properly when i checked it out"}], "answers": [{"tags": [], "owner": {"reputation": 3322, "user_id": 6766457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b32dab91c17be7b8a4b0796836b2d27?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/6766457/nathan"}, "is_accepted": false, "score": 0, "last_activity_date": 1563820051, "creation_date": 1563820051, "answer_id": 57151803, "question_id": 57084861, "link": "https://stackoverflow.com/questions/57084861/4d-plot-in-python-matplotlib/57151803#57151803", "title": "4D plot in python matplotlib", "body": "<p>I've gone over your code, and changed a couple things.</p>\n\n<p>Firstly, I've added the imports I guessed you wanted to use:</p>\n\n<pre><code>import matplotlib\nmatplotlib.use('Agg')\n\nimport numpy as np\nimport matplotlib.pyplot as plt\nfrom mpl_toolkits.mplot3d import Axes3D\n</code></pre>\n\n<p>I've also added some variables to make everything slightly easier to read and less likely to cause bugs:</p>\n\n<pre><code>x = np.linspace(0, 15, 15)\ny = np.linspace(0, 30, 15)\nz = np.linspace(5, 45, 15)\n\nX, Y, Z = np.meshgrid(x, y, z)\n\nlenX = len(X[0, :, 0])\nlenY = len(Y[:, 0, 0])\nlenZ = len(Z[0, 0, :])\n</code></pre>\n\n<p>And implemented these variables in the code:</p>\n\n<pre><code>sumatorio = np.zeros(shape=(lenX, lenY))\nsumatorio_1 = np.zeros(shape=(lenY, lenZ))\nsum_total = np. zeros(shape=(lenX, lenY, lenZ))\nc = np.array([])\n\nfor i in range(lenX):\n    for j in range(lenY):\n       sum_1 = X[0, i, 0] + Y[j, 0, 0]\n       sumatorio[i, j] = sum_1\n       sum_1_2 = sum_1 * sum_1\n</code></pre>\n\n<p>I changed the indentation of the 'k for loop':</p>\n\n<pre><code>        for k in range(lenZ):\n            sum_2 = sum_1_2 + Z[0, 0, k] + X[0, i, 0]\n            sum_total[i, j, k] = sumatorio[i, j] + sumatorio_1[j, k]\n\nfig = plt.figure(figsize=(50.0, 50.0))\nax = fig.add_subplot(111, projection='3d')\n\nax.scatter3D(X, Y, Z, c=sum_total, cmap='coolwarm', depthshade=0)\n</code></pre>\n\n<p>The fig.colorbar didn't really make sense to me, I'm not quite sure what you're hoping to achieve with this, so I commented it out.</p>\n\n<pre><code>#fig.colorbar(sum_total)\n\nplt.title(\"DV at departure from Earth\")\nax.set_xlabel(\"Beginning\")\nax.set_ylabel(\"Time of flight\")\nax.set_zlabel(\"Time of flight 2\")\n\nplt.show()\n</code></pre>\n\n<p>This code runs fine for me. I don't really understand what it does, but I'm sure you know more about that.</p>\n"}], "owner": {"reputation": 21, "user_id": 11799960, "user_type": "registered", "profile_image": "https://graph.facebook.com/1340318986134755/picture?type=large", "display_name": "Jose Maria Herrera", "link": "https://stackoverflow.com/users/11799960/jose-maria-herrera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1563820051, "creation_date": 1563403227, "last_edit_date": 1563408919, "question_id": 57084861, "link": "https://stackoverflow.com/questions/57084861/4d-plot-in-python-matplotlib", "title": "4D plot in python matplotlib", "body": "<p>I am quite new with python programming so I am a bit lost with it. </p>\n\n<p>I am trying to create a scatter3D plot which plots X, Y, Z coordinates for time position and use the color as 4 dimension to plot the value. </p>\n\n<p>The problem I am facing is that... it seems impossible to me to add the variable as colour and add a colorbar for help. </p>\n\n<p>I explain the background here: I have created a meshgrid for X, Y, Z and an array for computing the value in each position for X, Y, Z coordinates (which is an trimensional array). </p>\n\n<p>It follows an loop for filling the array with the values for each X,Y,Z combination and then i try to create the graph. </p>\n\n<pre><code>x = np.linspace(0, 15, 15)\ny = np.linspace(0, 30, 15)\nz = np.linspace(5, 45, 15)\n\nX, Y, Z = np.meshgrid(x, y, z)\n\nsumatorio = np.zeros(shape=(len(X[0, :, 0]), len(Y[:, 0, 0])))\n\nsumatorio_1 = np.zeros(shape=(len(Y[:, 0, 0]), len(Z[0, 0, :])))\n\nsum_total = np.zeros(shape=(len(X[:, 0, 0]), len(Y[0, :, 0]), len(Z[0, 0, \n:])))\n\nc = np.array([])\n\nfor i in range(len(X[0, :, 0])):\n    for j in range(len(Y[:, 0, 0])):\n        sum_1 = X[0, i, 0] + Y[j, 0, 0]\n        sumatorio[i, j] = sum_1\n            for k in range(len(Z[0, 0, :])):\n            sum_2 = sum_1 ** 2.0 + Z[0, 0, k] + X[0, i, 0]\n            sumatorio_1[j, k] = sum_2\n            sum_total[i, j, k] = sumatorio[i, j] + sumatorio_1[j, k]\nfig = plt.figure(figsize=(50.0, 50.0))\nax = fig.add_subplot(111, projection='3d')\n\nax.scatter3D(X, Y, Z, c=sum_total, cmap='coolwarm', depthshade=0)\nfig.colorbar(sum_total)\n\nplt.title(\"DV at departure from Earth\")\nax.set_xlabel(\"Beginning\")\nax.set_ylabel(\"Time of flight\")\nax.set_zlabel(\"Time of flight 2\")\n\nplt.show()\n</code></pre>\n\n<p>When I execute the code, the following error comes into view: </p>\n\n<blockquote>\n  <p>'c' argument has 15 elements, which is not acceptable for use with 'x' with size 3375, 'y' with size 3375.</p>\n</blockquote>\n\n<p>It seems when I put the array sum_total here, it did not recognize the shape of it.</p>\n\n<p>I try to add the color as <code>c=np.ravel(sum_total)</code> which returns me the graphic with color, but I think it is not given the appropiate color to each point.</p>\n\n<p>Also, when I create the graphic with <code>np.ravel(sum_total)</code>, the colorbar gives the following error: </p>\n\n<blockquote>\n  <p>'numpy.ndarray' object has no attribute 'get_array'</p>\n</blockquote>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 16538, "user_id": 1227152, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4hr5l.jpg?s=128&g=1", "display_name": "mustaccio", "link": "https://stackoverflow.com/users/1227152/mustaccio"}, "edited": false, "score": 1, "creation_date": 1563403564, "post_id": 57084842, "comment_id": 100692841, "body": "It appears that you did not install the <a href=\"https://pypi.org/project/mysqlclient/\" rel=\"nofollow noreferrer\">MySQL prerequisites</a>."}, {"owner": {"reputation": 61, "user_id": 1149027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31b9a54ce70ce67af34de83450a773bd?s=128&d=identicon&r=PG", "display_name": "J. Beltran", "link": "https://stackoverflow.com/users/1149027/j-beltran"}, "edited": false, "score": 0, "creation_date": 1563403647, "post_id": 57084842, "comment_id": 100692856, "body": "MAybe you have an issue like this one: <a href=\"https://stackoverflow.com/questions/51118963/issues-installing-mysqldb-with-python-3-6-5-cant-open-mysql-h-and-cant-op/51119092\" title=\"issues installing mysqldb with python 3 6 5 cant open mysql h and cant op\">stackoverflow.com/questions/51118963/&hellip;</a>"}, {"owner": {"reputation": 13, "user_id": 10500845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9414455811972e52146d80f1332e9a?s=128&d=identicon&r=PG&f=1", "display_name": "juan ponce", "link": "https://stackoverflow.com/users/10500845/juan-ponce"}, "edited": false, "score": 0, "creation_date": 1563423158, "post_id": 57084842, "comment_id": 100696545, "body": "Thanks the problem was that I installed a python 32 bits version... I changed to 64 and works!"}], "owner": {"reputation": 13, "user_id": 10500845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9414455811972e52146d80f1332e9a?s=128&d=identicon&r=PG&f=1", "display_name": "juan ponce", "link": "https://stackoverflow.com/users/10500845/juan-ponce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 154, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563403112, "creation_date": 1563403112, "question_id": 57084842, "link": "https://stackoverflow.com/questions/57084842/how-to-install-mysqlclient", "title": "How to install mysqlclient?", "body": "<p>I try to install mysqlclient on Windows 10 with \npip install mysqlclient</p>\n\n<p>I have visual studio 2019 and python 3.7.4 also the build tools the last one and I update the pip</p>\n\n<p>But I get this error:</p>\n\n<pre><code>ERROR: Complete output from command 'c:\\users\\ponce\\appdata\\local\\programs\\python\\python37-32\\python.exe' -u -c 'import setuptools, tokenize;__file__='\"'\"'C:\\\\Users\\\\ponce\\\\AppData\\\\Local\\\\Temp\\\\pip-install-yg2gzqfi\\\\mysqlclient\\\\setup.py'\"'\"';f=getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__);code=f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' install --record 'C:\\Users\\ponce\\AppData\\Local\\Temp\\pip-record-34g102m_\\install-record.txt' --single-version-externally-managed --compile:\n    ERROR: running install\n    running build\n    running build_py\n    creating build\n    creating build\\lib.win32-3.7\n    creating build\\lib.win32-3.7\\MySQLdb\n    copying MySQLdb\\__init__.py -&gt; build\\lib.win32-3.7\\MySQLdb\n    copying MySQLdb\\_exceptions.py -&gt; build\\lib.win32-3.7\\MySQLdb\n    copying MySQLdb\\compat.py -&gt; build\\lib.win32-3.7\\MySQLdb\n    copying MySQLdb\\connections.py -&gt; build\\lib.win32-3.7\\MySQLdb\n    copying MySQLdb\\converters.py -&gt; build\\lib.win32-3.7\\MySQLdb\n    copying MySQLdb\\cursors.py -&gt; build\\lib.win32-3.7\\MySQLdb\n    copying MySQLdb\\release.py -&gt; build\\lib.win32-3.7\\MySQLdb\n    copying MySQLdb\\times.py -&gt; build\\lib.win32-3.7\\MySQLdb\n    creating build\\lib.win32-3.7\\MySQLdb\\constants\n    copying MySQLdb\\constants\\__init__.py -&gt; build\\lib.win32-3.7\\MySQLdb\\constants\n    copying MySQLdb\\constants\\CLIENT.py -&gt; build\\lib.win32-3.7\\MySQLdb\\constants\n    copying MySQLdb\\constants\\CR.py -&gt; build\\lib.win32-3.7\\MySQLdb\\constants\n    copying MySQLdb\\constants\\ER.py -&gt; build\\lib.win32-3.7\\MySQLdb\\constants\n    copying MySQLdb\\constants\\FIELD_TYPE.py -&gt; build\\lib.win32-3.7\\MySQLdb\\constants\n    copying MySQLdb\\constants\\FLAG.py -&gt; build\\lib.win32-3.7\\MySQLdb\\constants\n    running build_ext\n    building 'MySQLdb._mysql' extension\n    creating build\\temp.win32-3.7\n    creating build\\temp.win32-3.7\\Release\n    creating build\\temp.win32-3.7\\Release\\MySQLdb\n    C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\BuildTools\\VC\\Tools\\MSVC\\14.21.27702\\bin\\HostX86\\x86\\cl.exe /c /nologo /Ox /W3 /GL /DNDEBUG /MD -Dversion_info=(1,4,2,'post',1) -D__version__=1.4.2.post1 \"-IC:\\Program Files (x86)\\MySQL\\MySQL Connector C 6.1\\include\\mariadb\" -Ic:\\users\\ponce\\appdata\\local\\programs\\python\\python37-32\\include -Ic:\\users\\ponce\\appdata\\local\\programs\\python\\python37-32\\include \"-IC:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\BuildTools\\VC\\Tools\\MSVC\\14.21.27702\\include\" \"-IC:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.6.1\\include\\um\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\ucrt\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\shared\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\um\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\winrt\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\cppwinrt\" /TcMySQLdb/_mysql.c /Fobuild\\temp.win32-3.7\\Release\\MySQLdb/_mysql.obj /Zl /D_CRT_SECURE_NO_WARNINGS\n    _mysql.c\n    MySQLdb/_mysql.c(29): fatal error C1083: Cannot open include file: 'mysql.h': No such file or directory\n    error: command 'C:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\2019\\\\BuildTools\\\\VC\\\\Tools\\\\MSVC\\\\14.21.27702\\\\bin\\\\HostX86\\\\x86\\\\cl.exe' failed with exit status 2\n    ----------------------------------------\nERROR: Command \"'c:\\users\\ponce\\appdata\\local\\programs\\python\\python37-32\\python.exe' -u -c 'import setuptools, tokenize;__file__='\"'\"'C:\\\\Users\\\\ponce\\\\AppData\\\\Local\\\\Temp\\\\pip-install-yg2gzqfi\\\\mysqlclient\\\\setup.py'\"'\"';f=getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__);code=f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' install --record 'C:\\Users\\ponce\\AppData\\Local\\Temp\\pip-record-34g102m_\\install-record.txt' --single-version-externally-managed --compile\" failed with error code 1 in C:\\Users\\ponce\\AppData\\Local\\Temp\\pip-install-yg2gzqfi\\mysqlclient\\\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "edited": false, "score": 2, "creation_date": 1563402984, "post_id": 57084817, "comment_id": 100692695, "body": "Your <code>return</code> is indented too far. You&#39;re returning after one iteration of your loop. Move the return out of the for loop ( i.e. indent to the same level as <code>for</code>)."}, {"owner": {"reputation": 13, "user_id": 11799967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf7877789a4975ed085d24c425602800?s=128&d=identicon&r=PG&f=1", "display_name": "Mr_M1k3l", "link": "https://stackoverflow.com/users/11799967/mr-m1k3l"}, "reply_to_user": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "edited": false, "score": 1, "creation_date": 1563403128, "post_id": 57084817, "comment_id": 100692740, "body": "No stinking way, I feel like an idiot; thanks, solved."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1563403143, "post_id": 57084817, "comment_id": 100692746, "body": "Don&#39;t feel bad, we see it all the time."}, {"owner": {"reputation": 13, "user_id": 11799967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf7877789a4975ed085d24c425602800?s=128&d=identicon&r=PG&f=1", "display_name": "Mr_M1k3l", "link": "https://stackoverflow.com/users/11799967/mr-m1k3l"}, "edited": false, "score": 0, "creation_date": 1563403196, "post_id": 57084817, "comment_id": 100692765, "body": "Thanks, man. Say, how do I tag this as solved?"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1563403596, "post_id": 57084817, "comment_id": 100692850, "body": "Click the checkbox next to an answer to mark the question solved. If there are no good answers, you can add one yourself. (That said, in this case, you might just delete the question, since it turned out to be caused by an issue that isn&#39;t likely to apply to others; note that that&#39;s only possible as long as none of the answers are upvoted -- as soon as one gets a positive score, the question would require a vote or moderator intervention to delete)."}], "answers": [{"tags": [], "owner": {"reputation": 131, "user_id": 6811674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76b1bbd38e08f28c51ae3873c9b886e2?s=128&d=identicon&r=PG&f=1", "display_name": "Wubin", "link": "https://stackoverflow.com/users/6811674/wubin"}, "is_accepted": false, "score": 1, "last_activity_date": 1563403140, "creation_date": 1563403140, "answer_id": 57084851, "question_id": 57084817, "link": "https://stackoverflow.com/questions/57084817/how-to-fix-a-i-in-rangen-when-it-refuses-to-repeat/57084851#57084851", "title": "How to fix a &quot;i in range(n)&quot; when it refuses to repeat", "body": "<p>Your <code>return</code> statement has a wrong intent, and you have to delete some blanks before it. Below is the correct code, and be careful of the last line.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import random\n\ndef random_walk(n):\n    \"\"\"Return coodrinates after 'n' block random walk.\"\"\"\n    x = 0\n    y = 0\n    for i in range(n):\n        step = random.choice(['N','S','E','W'])\n        if step == 'N':\n            y = y + 1\n        elif step == 'S':\n            y = y - 1\n        elif step == 'E':\n            x = x + 1\n        elif step == 'W':\n            x = x - 1\n\n    return (x, y)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 34, "user_id": 11724465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46d9aeeb24591d91184b89edb5095927?s=128&d=identicon&r=PG&f=1", "display_name": "killtheverse", "link": "https://stackoverflow.com/users/11724465/killtheverse"}, "is_accepted": true, "score": 1, "last_activity_date": 1563403205, "creation_date": 1563403205, "answer_id": 57084859, "question_id": 57084817, "link": "https://stackoverflow.com/questions/57084817/how-to-fix-a-i-in-rangen-when-it-refuses-to-repeat/57084859#57084859", "title": "How to fix a &quot;i in range(n)&quot; when it refuses to repeat", "body": "<p>You are returning (x,y) in the for loop. Just indent it properly.</p>\n"}], "owner": {"reputation": 13, "user_id": 11799967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf7877789a4975ed085d24c425602800?s=128&d=identicon&r=PG&f=1", "display_name": "Mr_M1k3l", "link": "https://stackoverflow.com/users/11799967/mr-m1k3l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 57084859, "answer_count": 2, "score": 1, "last_activity_date": 1563403205, "creation_date": 1563402875, "last_edit_date": 1563403030, "question_id": 57084817, "link": "https://stackoverflow.com/questions/57084817/how-to-fix-a-i-in-rangen-when-it-refuses-to-repeat", "title": "How to fix a &quot;i in range(n)&quot; when it refuses to repeat", "body": "<p>I am trying to copy the code from a Python tutorial <a href=\"https://youtu.be/BfS2H1y6tzQ?t=156\" rel=\"nofollow noreferrer\">https://youtu.be/BfS2H1y6tzQ?t=156</a> and copied it word for word, but it isn't working like in the video.</p>\n\n<pre><code>import random\n\ndef random_walk(n):\n    \"\"\"Return coodrinates after 'n' block random walk.\"\"\"\n    x = 0\n    y = 0\n    for i in range(n):\n        step = random.choice(['N','S','E','W'])\n        if step == 'N':\n            y = y + 1\n        elif step == 'S':\n            y = y - 1\n        elif step == 'E':\n            x = x + 1\n        elif step == 'W':\n            x = x - 1\n        return (x, y)\n</code></pre>\n\n<p>I expected the \"for i in range(n):\" to repeat the next line for the n amount of times, but it seems to only try it once, thus diving the new coordinates a one number difference.  I was expecting a result more like the one at <a href=\"https://youtu.be/BfS2H1y6tzQ?t=176\" rel=\"nofollow noreferrer\">https://youtu.be/BfS2H1y6tzQ?t=176</a>. For reference, I'm using Python 3.7.3.</p>\n"}, {"tags": ["python", "pyqt5", "pyside2"], "comments": [{"owner": {"reputation": 5378, "user_id": 2110683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33179a1918a5d90f47cde062fab10ff4?s=128&d=identicon&r=PG", "display_name": "Dimitry Ernot", "link": "https://stackoverflow.com/users/2110683/dimitry-ernot"}, "edited": false, "score": 1, "creation_date": 1563439825, "post_id": 57084762, "comment_id": 100703125, "body": "Could you be more specific? Could you provide an example of what do you want to get and how do you want to display the data?"}, {"owner": {"reputation": 137, "user_id": 8049643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a753aef4d5b850435908a318c28d167e?s=128&d=identicon&r=PG&f=1", "display_name": "MOHAMMED SALEH", "link": "https://stackoverflow.com/users/8049643/mohammed-saleh"}, "reply_to_user": {"reputation": 5378, "user_id": 2110683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33179a1918a5d90f47cde062fab10ff4?s=128&d=identicon&r=PG", "display_name": "Dimitry Ernot", "link": "https://stackoverflow.com/users/2110683/dimitry-ernot"}, "edited": false, "score": 0, "creation_date": 1563470740, "post_id": 57084762, "comment_id": 100720762, "body": "@RomhaKorev I have edited the post."}], "owner": {"reputation": 137, "user_id": 8049643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a753aef4d5b850435908a318c28d167e?s=128&d=identicon&r=PG&f=1", "display_name": "MOHAMMED SALEH", "link": "https://stackoverflow.com/users/8049643/mohammed-saleh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563470718, "creation_date": 1563402420, "last_edit_date": 1563470718, "question_id": 57084762, "link": "https://stackoverflow.com/questions/57084762/have-a-string-and-trying-to-input-that-input-a-tableview", "title": "Have a string and trying to input that input a tableview", "body": "<p>So here's the problem that I am having, I have to read from multiple different files and each file has a different format of how it represents the data, so for example one file could be:</p>\n\n<p>1 2 3 4 5</p>\n\n<p>and another could be:</p>\n\n<p>0</p>\n\n<p>and another from the file can be is:</p>\n\n<pre><code>col1 col2 col3\n\n0    2     1\n</code></pre>\n\n<p>how can I use a tableview to output this type of data.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Here are a couple of examples from actually data, for each of these examples the whole data is one big string with \\n and \\t where the tabs and newlines are located</p>\n\n<p>Example 1:</p>\n\n<pre><code>address 1         address 2                   size     id     flag\n0000000000000000 0000000000000000            16384     1 --w--pY--\n0000000000000000 0000000000000000            16384     2 --w--pY--\n0000000000000000 0000000000000000            16384     3 --w--pY--\n0000000000000000 0000000000000000            16384     4 --w--pY--\n0000000000000000 0000000000000000            16384     5 --w--pY--\n0000000000000000 0000000000000000            16384     6 --w--pY--\n</code></pre>\n\n<p>For this example I would want the data to outputted like how it looks like in the tableview</p>\n\n<p>Example 2:</p>\n\n<pre><code>2135300000 45400000 894600000\n</code></pre>\n\n<p>For this example I would want the data to outputted like how it looks like in the tableview</p>\n\n<p>Example 3:</p>\n\n<pre><code>5\n</code></pre>\n\n<p>As you can see for each of these examples the way the data is stored is completely different, so is there a way to input each type of format into a tableview without having to know how the data is represented? </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 100768, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 3, "creation_date": 1563402652, "post_id": 57084757, "comment_id": 100692622, "body": "<code>not</code> inverts the condition. <code>while not name != &#39;&#39;</code> is the same as <code>while name == &#39;&#39;</code>"}, {"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1563403100, "post_id": 57084757, "comment_id": 100692733, "body": "It may be useful to understand that <code>not</code> is an operator in Python (a unary operator, like the <code>-</code> in <code>-5</code>). It can be part of the condition in a <code>while</code> loop, but it is not part of the loop syntax directly."}, {"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1563403313, "post_id": 57084757, "comment_id": 100692789, "body": "To be clear, his example says <code>while not name:</code> and says that&#39;s equivalent (in this case) to <code>while not name != &#39;&#39;:</code>"}, {"owner": {"reputation": 469147, "user_id": 476, "user_type": "moderator", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a235706e3d81b614acaec3368edfea4b?s=128&d=identicon&r=PG", "display_name": "deceze", "link": "https://stackoverflow.com/users/476/deceze"}, "edited": false, "score": 1, "creation_date": 1563406840, "post_id": 57084757, "comment_id": 100693565, "body": "FWIW, that is a terrible way to write that condition. Even if you understand it, the double negation takes thrice as long to correctly comprehend at best and leads to new Stack Overflow posts at worst."}, {"owner": {"reputation": 2575, "user_id": 10669875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ae3bf8ded4da2254e5aa66d54167613?s=128&d=identicon&r=PG&f=1", "display_name": "wovano", "link": "https://stackoverflow.com/users/10669875/wovano"}, "edited": false, "score": 0, "creation_date": 1563898846, "post_id": 57084757, "comment_id": 100850372, "body": "Double negatives <i>are</i> confusing. If this is the exact example code, I think it&#39;s a bad example. <code>while name == &#39;&#39;</code> is much more understandable indeed."}], "answers": [{"tags": [], "owner": {"reputation": 2142, "user_id": 3308951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iUOnA.png?s=128&g=1", "display_name": "SyntaxVoid supports Monica", "link": "https://stackoverflow.com/users/3308951/syntaxvoid-supports-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1563402910, "creation_date": 1563402910, "answer_id": 57084820, "question_id": 57084757, "link": "https://stackoverflow.com/questions/57084757/dont-understand-how-a-while-not-loop-works/57084820#57084820", "title": "Don&#39;t understand how a &quot;while not&quot; loop works", "body": "<p>The while loop will only loop as long as the condition after it remains true. Putting a <code>not</code> before the condition inverts it. <code>not True == False</code>, <code>not False == True</code></p>\n\n<p><code>while not name != ''</code> will loop as long as <code>(not (name != ''))</code> is True.</p>\n"}, {"tags": [], "owner": {"reputation": 43, "user_id": 11742221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b743a31209e604e14f8ae2b685b2b5d1?s=128&d=identicon&r=PG&f=1", "display_name": "nullptr", "link": "https://stackoverflow.com/users/11742221/nullptr"}, "is_accepted": false, "score": 0, "last_activity_date": 1563404322, "creation_date": 1563404322, "answer_id": 57084990, "question_id": 57084757, "link": "https://stackoverflow.com/questions/57084757/dont-understand-how-a-while-not-loop-works/57084990#57084990", "title": "Don&#39;t understand how a &quot;while not&quot; loop works", "body": "<p>The not operator will invert your condition so the while loop condition is logically equivalent to saying, while name is equal to the empty string ''. This is because you have the statement, <code>name != ''</code>, and then you use the <code>not</code> operator on it which inverts it. This is so the while loop will continue to request the user for an input name that does not equal ''.</p>\n"}], "owner": {"reputation": 11, "user_id": 8017664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3313ac7ed507286745e0a9b40200bfe7?s=128&d=identicon&r=PG&f=1", "display_name": "Ranvijay", "link": "https://stackoverflow.com/users/8017664/ranvijay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 254, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1563422884, "creation_date": 1563402382, "last_edit_date": 1563422884, "question_id": 57084757, "link": "https://stackoverflow.com/questions/57084757/dont-understand-how-a-while-not-loop-works", "title": "Don&#39;t understand how a &quot;while not&quot; loop works", "body": "<p>I am currently trying to learn python. I was going through Al Sweigart's <em>Automate the Boring stuff with Python</em>. In his example of <code>while</code> loops, he uses a <code>not</code> condition with his <code>while</code> loop (as shown in the code below).</p>\n\n<pre><code>name = ''\nwhile not name != '':\n    print('Enter your name:')\n    name = input()\nprint('How many guests will you have?')\nnumOfGuests = int(input())\nif numOfGuests !=0:\n    print('Be sure to have enough room for all your guests.')\nprint('Done')\n</code></pre>\n\n<p>This code works fine. I am confused about how this works though. We set name to <code>''</code> (blank value) and then in the <code>while</code> loop we have <code>while not name !=''</code>. Why does this not work with <code>while name != ''</code>?</p>\n"}, {"tags": ["python", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 133, "user_id": 7381375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/187723ee115be713721f6a7f7ae96cbc?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelCG8", "link": "https://stackoverflow.com/users/7381375/michaelcg8"}, "is_accepted": false, "score": 0, "last_activity_date": 1563405452, "last_edit_date": 1563405452, "creation_date": 1563404885, "answer_id": 57085058, "question_id": 57084723, "link": "https://stackoverflow.com/questions/57084723/enumerating-columns-of-large-data-using-numpy/57085058#57085058", "title": "Enumerating columns of large data using NumPy", "body": "<p>Pandas would make a good job of this, so if your only reason to avoid it is so you don't need to get to grips with another library, it may be worth your time learning Pandas so you can use it in future.</p>\n\n<p>An alternative is xarray, which handles n-dimensional data.<br>\n<a href=\"http://xarray.pydata.org/en/stable/\" rel=\"nofollow noreferrer\">http://xarray.pydata.org/en/stable/</a></p>\n\n<p>You can name both the axes (e.g. calling one \"time\") and the values in them (e.g. calling a particular point on the time axis \"start\").  You could then slice out all the data that has value \"start\" on the \"time\" axis.</p>\n"}, {"comments": [{"owner": {"reputation": 4057, "user_id": 8285811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C38qo.jpg?s=128&g=1", "display_name": "Akaisteph7", "link": "https://stackoverflow.com/users/8285811/akaisteph7"}, "reply_to_user": {"reputation": 544, "user_id": 6651940, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IQku7.jpg?s=128&g=1", "display_name": "Blade", "link": "https://stackoverflow.com/users/6651940/blade"}, "edited": false, "score": 1, "creation_date": 1563413118, "post_id": 57085083, "comment_id": 100694680, "body": "@Blade. You are right. I did, should have earlier, my bad."}], "tags": [], "owner": {"reputation": 4057, "user_id": 8285811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C38qo.jpg?s=128&g=1", "display_name": "Akaisteph7", "link": "https://stackoverflow.com/users/8285811/akaisteph7"}, "is_accepted": true, "score": 4, "last_activity_date": 1563405124, "creation_date": 1563405124, "answer_id": 57085083, "question_id": 57084723, "link": "https://stackoverflow.com/questions/57084723/enumerating-columns-of-large-data-using-numpy/57085083#57085083", "title": "Enumerating columns of large data using NumPy", "body": "<p>Extending from your work, you can use a list comprehension to accomplish this. It will automatically create the required number of columns with the proper labels:</p>\n\n<pre><code>A = np.random.randint(5, size=(10, 10))\nB = A.ravel().view([ (str(x),'i4') for x in range(1, len(A[0])+1) ])\n</code></pre>\n\n<p>Then you can do <code>print(A['2'])</code> from 1 to 10 in this case.</p>\n"}], "owner": {"reputation": 544, "user_id": 6651940, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IQku7.jpg?s=128&g=1", "display_name": "Blade", "link": "https://stackoverflow.com/users/6651940/blade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 1, "accepted_answer_id": 57085083, "answer_count": 2, "score": 1, "last_activity_date": 1563405452, "creation_date": 1563402107, "last_edit_date": 1563404351, "question_id": 57084723, "link": "https://stackoverflow.com/questions/57084723/enumerating-columns-of-large-data-using-numpy", "title": "Enumerating columns of large data using NumPy", "body": "<p>I have a large data, and I want to name the columns, for instance '1', '2', ... . For a small data, I can do</p>\n\n<pre><code>np.random.randint(5, size=(50, 2))   # synthesis data\nA = A.ravel().view([('1','i8'),('2','i8'),]).astype([('1','i4'),('2','i8'),])\n</code></pre>\n\n<p>and then call an individual column using</p>\n\n<pre><code>print(A['2'])\n</code></pre>\n\n<p>I was wondering if there is a way to automate this for any random size and column numbers. My preference is to use NumPy, not Pandas. Thanks!</p>\n"}, {"tags": ["javascript", "python", "html", "android-studio", "raspberry-pi3"], "answers": [{"tags": [], "owner": {"reputation": 157, "user_id": 8992926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95173106c384a531c1e1feca6d3aa310?s=128&d=identicon&r=PG&f=1", "display_name": "Nisarg Jani", "link": "https://stackoverflow.com/users/8992926/nisarg-jani"}, "is_accepted": false, "score": 1, "last_activity_date": 1577037362, "last_edit_date": 1577037362, "creation_date": 1577035739, "answer_id": 59446512, "question_id": 57084664, "link": "https://stackoverflow.com/questions/57084664/capturing-picture-of-webview-display-of-raspberry-pi-camera-using-html/59446512#59446512", "title": "Capturing Picture of webview display of raspberry pi camera using HTML", "body": "<p>Please Add Following Function to your script, which uses the camera instance that you have already created.</p>\n\n<pre><code>def takePhoto():\n    camera.capture(\"1.png\")       \n</code></pre>\n\n<p>You can call the above function according to your preferences.</p>\n"}], "owner": {"reputation": 11, "user_id": 11799910, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RCaQTlKLXYw/AAAAAAAAAAI/AAAAAAAAAC4/t7NXj4HWt24/photo.jpg?sz=128", "display_name": "Mihir Kadiwala", "link": "https://stackoverflow.com/users/11799910/mihir-kadiwala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1577037362, "creation_date": 1563401708, "question_id": 57084664, "link": "https://stackoverflow.com/questions/57084664/capturing-picture-of-webview-display-of-raspberry-pi-camera-using-html", "title": "Capturing Picture of webview display of raspberry pi camera using HTML", "body": "<p>I am live-streaming my raspberry pi camera with some python code, and I created an app to access the webview of the stream with android studio. I want to be able to take a picture using the raspberry pi camera with the click of a button.</p>\n\n<pre><code>import io\nimport picamera\nimport logging\nimport socketserver\nfrom threading import Condition\nfrom http import server\n\nPAGE=\"\"\"\\\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;Raspberry Pi - Surveillance Camera&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;center&gt;&lt;h1&gt;Raspberry Pi - Surveillance Camera&lt;/h1&gt;&lt;/center&gt;\n&lt;center&gt;&lt;img src=\"stream.mjpg\" width=\"640\" height=\"480\"&gt;&lt;/center&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n\"\"\"\n\nclass StreamingOutput(object):\n    def __init__(self):\n        self.frame = None\n        self.buffer = io.BytesIO()\n        self.condition = Condition()\n\n    def write(self, buf):\n        if buf.startswith(b'\\xff\\xd8'):\n            # New frame, copy the existing buffer's content and notify all\n            # clients it's available\n            self.buffer.truncate()\n            with self.condition:\n                self.frame = self.buffer.getvalue()\n                self.condition.notify_all()\n            self.buffer.seek(0)\n        return self.buffer.write(buf)\n\nclass StreamingHandler(server.BaseHTTPRequestHandler):\n    def do_GET(self):\n        if self.path == '/':\n            self.send_response(301)\n            self.send_header('Location', '/index.html')\n            self.end_headers()\n        elif self.path == '/index.html':\n            content = PAGE.encode('utf-8')\n            self.send_response(200)\n            self.send_header('Content-Type', 'text/html')\n            self.send_header('Content-Length', len(content))\n            self.end_headers()\n            self.wfile.write(content)\n        elif self.path == '/stream.mjpg':\n            self.send_response(200)\n            self.send_header('Age', 0)\n            self.send_header('Cache-Control', 'no-cache, private')\n            self.send_header('Pragma', 'no-cache')\n            self.send_header('Content-Type', 'multipart/x-mixed-replace; boundary=FRAME')\n            self.end_headers()\n            try:\n                while True:\n                    with output.condition:\n                        output.condition.wait()\n                        frame = output.frame\n                    self.wfile.write(b'--FRAME\\r\\n')\n                    self.send_header('Content-Type', 'image/jpeg')\n                    self.send_header('Content-Length', len(frame))\n                    self.end_headers()\n                    self.wfile.write(frame)\n                    self.wfile.write(b'\\r\\n')\n            except Exception as e:\n                logging.warning(\n                    'Removed streaming client %s: %s',\n                    self.client_address, str(e))\n        else:\n            self.send_error(404)\n            self.end_headers()\n\nclass StreamingServer(socketserver.ThreadingMixIn, server.HTTPServer):\n    allow_reuse_address = True\n    daemon_threads = True\n\nwith picamera.PiCamera(resolution='640x480', framerate=24) as camera:\n    output = StreamingOutput()\n    #Uncomment the next line to change your Pi's Camera rotation (in degrees)\n    #camera.rotation = 90\n    camera.start_recording(output, format='mjpeg')\n    try:\n        address = ('', 8000)\n        server = StreamingServer(address, StreamingHandler)\n        server.serve_forever()\n    finally:\n        camera.stop_recording()\n</code></pre>\n\n<p>I want to be able to take a picture with the raspberry pi and be able to access it on either my phone gallery or in the web view itself.</p>\n"}, {"tags": ["python", "python-3.x", "dataframe", "data-cleaning"], "answers": [{"tags": [], "owner": {"reputation": 93, "user_id": 9942397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M1hvC.jpg?s=128&g=1", "display_name": "Hannah Morgan", "link": "https://stackoverflow.com/users/9942397/hannah-morgan"}, "is_accepted": false, "score": 0, "last_activity_date": 1580422059, "creation_date": 1580422059, "answer_id": 59995243, "question_id": 57084632, "link": "https://stackoverflow.com/questions/57084632/how-to-remove-unnecessary-variables-of-a-dataframe-to-predict-a-binary-output/59995243#59995243", "title": "How to remove unnecessary variables of a dataframe to predict a binary output?", "body": "<p>I think recursive feature elimination (RFE) might be what you're looking for. It is a feature selection method that fits a model and removes the weakest feature(s). Features are ranked by the model\u2019s coef_ or feature_importances_ attributes. By recursively eliminating a few features features per loop, RFE tries to eliminate dependencies and collinearity that may exist in the model. I implemented cross validated RFE, which also attempts to select the best number of features to use. </p>\n\n<p>Below is similar to code I've used, although I haven't tried it on your specific data (Lending Club is trying to make me create an account and I'm not going to do that). Obviously, you can change any of the parameters to suit your needs.</p>\n\n<pre><code>from sklearn.feature_selection import RFECV, RFE\nfrom sklearn.ensemble import RandomForestClassifier\nimport numpy as np\n\n# Recursive Feature Elimination with Cross Validation\n# Define parameters \nsample_size = 5000\nfolds = 5\nelim_step = 1\nmin_features = 10\nmax_features = 50\nSEED = 101\n\n# Use a sample of the data for speed\nstatus_map = {\"Fully Paid\": 1, \"Charged Off\": 0}\nselect_df = (result.sample(n=sample_size, replace=True, random_state=SEED)\n                   .replace({\"loan_status\": status_map}))\nselect_y = select_df.pop(\"loan_status\")\n\n# Fit a random forest classifier using RFECV                  \nestimator = RandomForestClassifier(n_estimators=50, \n                                   max_depth=5, \n                                   n_jobs=-1, \n                                   random_state=SEED)\nselector = RFECV(estimator, step=elim_step, cv=folds,\n                 min_features_to_select=min_features, \n                 scoring=\"roc_auc\", n_jobs=-1, verbose=0)\nselector = selector.fit(select_df, select_y)\n\n# If there are still too many features, use RFE with set number of features\nif selector.n_features_ &lt;= max_features:\n    n = selector.n_features_\nelse:\n    selector = RFE(estimator, max_features, step=elim_step)\n    selector = selector.fit(select_df, select_y)\n    n = max_features\n\n\n\n# Create a dataframe with the reduced set of columns\nfeatures = np.array(select_df.columns[selector.support_].tolist())\nsubset = result[features]\nprint(f\"Using {n} features\")\nprint(subset.head())\n</code></pre>\n\n<p>You can also check out the docs for <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.feature_selection.RFE.html\" rel=\"nofollow noreferrer\">RFE</a> and <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.feature_selection.RFECV.html\" rel=\"nofollow noreferrer\">RFECV</a> for a bit more info on recursive feature elimination and to understand the parameters passed above. </p>\n"}], "owner": {"reputation": 1775, "user_id": 4764604, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qCcfH.jpg?s=128&g=1", "display_name": "Revolucion for Monica", "link": "https://stackoverflow.com/users/4764604/revolucion-for-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1580422059, "creation_date": 1563401459, "last_edit_date": 1592644375, "question_id": 57084632, "link": "https://stackoverflow.com/questions/57084632/how-to-remove-unnecessary-variables-of-a-dataframe-to-predict-a-binary-output", "title": "How to remove unnecessary variables of a dataframe to predict a binary output?", "body": "<p>I have a data set with a huge amount of variables for an output that can either be <code>A</code> or <code>not A</code>. How can I remove the variables that are useless to predict the output.</p>\n<h1>Example</h1>\n<p>I have a data set of loans which status <code>loan_status</code> are currently <code>Fully Paid</code> or <code>Charged Off</code>Since the data set is very large, I would like to keep only the essential variables that would help me predicting the output.</p>\n<pre><code>&gt;&gt;&gt; subset.head()\n\n    id  member_id   loan_amnt   funded_amnt funded_amnt_inv term    int_rate    installment grade   sub_grade   emp_title   emp_length  home_ownership  annual_inc  verification_status issue_d loan_status pymnt_plan  url desc    purpose title   zip_code    addr_state  dti delinq_2yrs earliest_cr_line    inq_last_6mths  mths_since_last_delinq  mths_since_last_record  open_acc    pub_rec revol_bal   revol_util  total_acc   initial_list_status out_prncp   out_prncp_inv   total_pymnt total_pymnt_inv total_rec_prncp total_rec_int   total_rec_late_fee  recoveries  collection_recovery_fee last_pymnt_d    last_pymnt_amnt next_pymnt_d    last_credit_pull_d  collections_12_mths_ex_med  mths_since_last_major_derog policy_code application_type    annual_inc_joint    dti_joint   verification_status_joint   acc_now_delinq  tot_coll_amt    tot_cur_bal open_acc_6m open_act_il open_il_12m open_il_24m mths_since_rcnt_il  total_bal_il    il_util open_rv_12m open_rv_24m max_bal_bc  all_util    total_rev_hi_lim    inq_fi  total_cu_tl inq_last_12m    acc_open_past_24mths    avg_cur_bal bc_open_to_buy  bc_util chargeoff_within_12_mths    delinq_amnt mo_sin_old_il_acct  mo_sin_old_rev_tl_op    mo_sin_rcnt_rev_tl_op   mo_sin_rcnt_tl  mort_acc    mths_since_recent_bc    mths_since_recent_bc_dlq    mths_since_recent_inq   mths_since_recent_revol_delinq  num_accts_ever_120_pd   num_actv_bc_tl  num_actv_rev_tl num_bc_sats num_bc_tl   num_il_tl   num_op_rev_tl   num_rev_accts   num_rev_tl_bal_gt_0 num_sats    num_tl_120dpd_2m    num_tl_30dpd    num_tl_90g_dpd_24m  num_tl_op_past_12m  pct_tl_nvr_dlq  percent_bc_gt_75    pub_rec_bankruptcies    tax_liens   tot_hi_cred_lim total_bal_ex_mort   total_bc_limit  total_il_high_credit_limit  revol_bal_joint sec_app_earliest_cr_line    sec_app_inq_last_6mths  sec_app_mort_acc    sec_app_open_acc    sec_app_revol_util  sec_app_open_act_il sec_app_num_rev_accts   sec_app_chargeoff_within_12_mths    sec_app_collections_12_mths_ex_med  sec_app_mths_since_last_major_derog hardship_flag   hardship_type   hardship_reason hardship_status deferral_term   hardship_amount hardship_start_date hardship_end_date   payment_plan_start_date hardship_length hardship_dpd    hardship_loan_status    orig_projected_additional_accrued_interest  hardship_payoff_balance_amount  hardship_last_payment_amount    debt_settlement_flag    debt_settlement_flag_date   settlement_status   settlement_date settlement_amount   settlement_percentage   settlement_term\n11  NaN NaN 10000   10000   10000.0 60 months   14.07%  233.05  C   C3  Teacher 4 years RENT    42000.0 Source Verified Mar-2018    Fully Paid  n   NaN NaN major_purchase  Major purchase  341xx   FL  24.69   0   Oct-2004    0   32.0    NaN 17  0   707 15.7%   34  w   0.0 0.0 11153.669505    11153.67    10000.00    1153.67 0.0 0.0 0.0 Mar-2019    10.38   NaN Jun-2019    0   40.0    1   Individual  NaN NaN NaN 0   0   93913   0   15  0   0   54.0    93206   116.0   0   1   707 111.0   4500    0   0   0   1   5524.0  3793.0  15.7    0   0   161.0   88  18  18  0   18.0    32.0    18.0    32.0    14  1   1   2   4   30  2   4   1   17  0.0 0   0   0   43.8    0.0 0   0   84930   93913   4500    80430   NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN N   NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN N   NaN NaN NaN NaN NaN NaN\n16  NaN NaN 7000    7000    7000.0  36 months   11.98%  232.44  B   B5  Parole  &lt; 1 year    MORTGAGE    40000.0 Verified    Mar-2018    Fully Paid  n   NaN NaN home_improvement    Home improvement    797xx   TX  20.25   0   Mar-2007    0   60.0    NaN 13  0   5004    36% 29  w   0.0 0.0 7693.314943 7693.31 7000.00 693.31  0.0 0.0 0.0 Mar-2019    5364.25 NaN Mar-2019    0   60.0    1   Individual  NaN NaN NaN 0   0   131726  1   6   0   2   16.0    126722  102.0   2   2   3944    90.0    13900   2   1   4   4   10977.0 4996.0  50.0    0   0   122.0   132 1   1   0   10.0    64.0    5.0 60.0    3   2   2   3   4   19  7   10  2   13  0.0 0   0   2   89.7    33.3    0   0   132817  131726  10000   118917  NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN N   NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN N   NaN NaN NaN NaN NaN NaN\n17  NaN NaN 20000   20000   20000.0 60 months   26.77%  607.97  E   E5  Mental Health Provider  3 years RENT    33500.0 Not Verified    Mar-2018    Charged Off n   NaN NaN house   Home buying 604xx   IL  24.40   0   Aug-2008    1   NaN NaN 27  0   7364    46% 34  w   0.0 0.0 7236.150000 7236.15 2195.37 5040.78 0.0 0.0 0.0 Apr-2019    607.97  NaN Jun-2019    0   NaN 1   Individual  NaN NaN NaN 0   308 160804  0   21  0   0   29.0    153440  118.0   0   2   2607    110.0   16000   0   0   2   2   5956.0  2767.0  68.6    0   0   115.0   115 20  20  0   26.0    NaN 5.0 NaN 0   3   6   3   3   27  6   7   6   27  0.0 0   0   0   100.0   33.3    0   0   146514  160804  8800    130514  NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN N   NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN N   NaN NaN NaN NaN NaN NaN\n20  NaN NaN 21000   21000   21000.0 60 months   20.39%  560.94  D   D4  Machine operator    10+ years   OWN 85000.0 Source Verified Mar-2018    Fully Paid  n   NaN NaN house   Home buying 135xx   NY  15.76   1   Nov-2008    0   2.0 NaN 15  0   14591   34.2%   27  w   0.0 0.0 24217.170915    24217.17    21000.00    3217.17 0.0 0.0 0.0 Feb-2019    183.26  NaN May-2019    0   NaN 1   Individual  NaN NaN NaN 0   0   128270  1   1   2   2   7.0 37076   NaN 2   5   5354    34.0    42700   6   4   13  8   8551.0  16684.0 38.4    0   0   67.0    112 4   4   3   4.0 NaN 0.0 2.0 0   5   7   6   10  3   12  21  7   15  0.0 0   0   4   92.6    16.7    0   0   172433  51667   27100   39733   NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN N   NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN N   NaN NaN NaN NaN NaN NaN\n...\n</code></pre>\n<h1>My attempt</h1>\n<p>I wasn't able to find a way to reduce the number of useless variables. I only used <code>dataframe.describe()</code> to know  a bit more about them. But even if you try to summarize all the loans, first, I'm not sure it helps me summarize, since I still have many variables, and, second, I'm not sure I do the calculation correctly. In fact, as you can read there :</p>\n<pre><code>    id  member_id   loan_amnt   funded_amnt funded_amnt_inv term    int_rate    installment grade   sub_grade   emp_title   emp_length  home_ownership  annual_inc  verification_status issue_d loan_status pymnt_plan  url desc    purpose title   zip_code    addr_state  dti delinq_2yrs earliest_cr_line    inq_last_6mths  mths_since_last_delinq  mths_since_last_record  open_acc    pub_rec revol_bal   revol_util  total_acc   initial_list_status out_prncp   out_prncp_inv   total_pymnt total_pymnt_inv total_rec_prncp total_rec_int   total_rec_late_fee  recoveries  collection_recovery_fee last_pymnt_d    last_pymnt_amnt next_pymnt_d    last_credit_pull_d  collections_12_mths_ex_med  mths_since_last_major_derog policy_code application_type    annual_inc_joint    dti_joint   verification_status_joint   acc_now_delinq  tot_coll_amt    tot_cur_bal open_acc_6m open_act_il open_il_12m open_il_24m mths_since_rcnt_il  total_bal_il    il_util open_rv_12m open_rv_24m max_bal_bc  all_util    total_rev_hi_lim    inq_fi  total_cu_tl inq_last_12m    acc_open_past_24mths    avg_cur_bal bc_open_to_buy  bc_util chargeoff_within_12_mths    delinq_amnt mo_sin_old_il_acct  mo_sin_old_rev_tl_op    mo_sin_rcnt_rev_tl_op   mo_sin_rcnt_tl  mort_acc    mths_since_recent_bc    mths_since_recent_bc_dlq    mths_since_recent_inq   mths_since_recent_revol_delinq  num_accts_ever_120_pd   num_actv_bc_tl  num_actv_rev_tl num_bc_sats num_bc_tl   num_il_tl   num_op_rev_tl   num_rev_accts   num_rev_tl_bal_gt_0 num_sats    num_tl_120dpd_2m    num_tl_30dpd    num_tl_90g_dpd_24m  num_tl_op_past_12m  pct_tl_nvr_dlq  percent_bc_gt_75    pub_rec_bankruptcies    tax_liens   tot_hi_cred_lim total_bal_ex_mort   total_bc_limit  total_il_high_credit_limit  revol_bal_joint sec_app_earliest_cr_line    sec_app_inq_last_6mths  sec_app_mort_acc    sec_app_open_acc    sec_app_revol_util  sec_app_open_act_il sec_app_num_rev_accts   sec_app_chargeoff_within_12_mths    sec_app_collections_12_mths_ex_med  sec_app_mths_since_last_major_derog hardship_flag   hardship_type   hardship_reason hardship_status deferral_term   hardship_amount hardship_start_date hardship_end_date   payment_plan_start_date hardship_length hardship_dpd    hardship_loan_status    orig_projected_additional_accrued_interest  hardship_payoff_balance_amount  hardship_last_payment_amount    debt_settlement_flag    debt_settlement_flag_date   settlement_status   settlement_date settlement_amount   settlement_percentage   settlement_term\ncount   0.0 0.0 110909.000000   110909.000000   110909.000000   110909  110909  110909.000000   110909  110909  101148  101310  110909  1.109090e+05    110909  110909  110909  110909  0.0 0.0 110909  110909  110909  110909  110616.000000   110909.000000   110909  110909.000000   50074.000000    16811.000000    110909.000000   110909.000000   1.109090e+05    110739  110909.000000   110909  110909.0    110909.0    110909.000000   110909.000000   110909.000000   110909.000000   110909.000000   110909.000000   110909.000000   110201  110909.000000   0.0 110909  110909.000000   27474.000000    110909.0    110909  14193.000000    14193.000000    13876   110909.000000   1.109090e+05    1.109090e+05    110909.000000   110909.000000   110909.000000   110909.000000   106966.000000   1.109090e+05    92546.000000    110909.000000   110909.000000   110909.000000   110877.000000   1.109090e+05    110909.000000   110909.000000   110909.000000   110909.000000   110903.000000   109104.000000   109017.000000   110909.000000   110909.000000   106966.000000   110909.000000   110909.000000   110909.000000   110909.000000   109225.000000   23011.000000    101505.000000   32915.000000    110909.000000   110909.000000   110909.000000   110909.000000   110909.000000   110909.000000   110909.000000   110909.000000   110909.000000   110909.000000   107934.0    110909.000000   110909.000000   110909.000000   110908.000000   109104.000000   110909.000000   110909.000000   1.109090e+05    1.109090e+05    110909.000000   1.109090e+05    14193.000000    14193   14193.000000    14193.000000    14193.000000    13921.000000    14193.000000    14193.000000    14193.000000    14193.000000    5062.000000 110909  131 131 131 131.0   131.000000  131 131 131 131.0   131.000000  131 26.000000   131.000000  131.000000  110909  1470    1470    1470    1470.000000 1470.000000 1470.000000\nunique  NaN NaN NaN NaN NaN 2   74  NaN 7   34  22652   11  4   NaN 3   6   2   1   NaN NaN 13  12  867 50  NaN NaN 614 NaN NaN NaN NaN NaN NaN 1042    NaN 2   NaN NaN NaN NaN NaN NaN NaN NaN NaN 18  NaN 0.0 20  NaN NaN NaN 2   NaN NaN 3   NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN 510 NaN NaN NaN NaN NaN NaN NaN NaN NaN 1   1   8   2   NaN NaN 11  9   9   NaN NaN 4   NaN NaN NaN 2   12  3   13  NaN NaN NaN\ntop NaN NaN NaN NaN NaN 36 months   11.98%  NaN B   B5  Manager 10+ years   MORTGAGE    NaN Source Verified Apr-2018    Fully Paid  n   NaN NaN debt_consolidation  Debt consolidation  945xx   CA  NaN NaN Aug-2005    NaN NaN NaN NaN NaN NaN 0%  NaN w   NaN NaN NaN NaN NaN NaN NaN NaN NaN Jan-2019    NaN NaN Jun-2019    NaN NaN NaN Individual  NaN NaN Not Verified    NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN Aug-2005    NaN NaN NaN NaN NaN NaN NaN NaN NaN N   INTEREST ONLY-3 MONTHS DEFERRAL UNEMPLOYMENT    BROKEN  NaN NaN Mar-2019    Apr-2019    Mar-2019    NaN NaN Late (16-30 days)   NaN NaN NaN N   Jun-2019    ACTIVE  May-2019    NaN NaN NaN\nfreq    NaN NaN NaN NaN NaN 81370   3485    NaN 30833   6964    2030    36774   54812   NaN 44735   29655   87515   110909  NaN NaN 56217   56217   1223    15847   NaN NaN 987 NaN NaN NaN NaN NaN NaN 1843    NaN 92893   NaN NaN NaN NaN NaN NaN NaN NaN NaN 9952    NaN NaN 47569   NaN NaN NaN 96716   NaN NaN 6353    NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN 164 NaN NaN NaN NaN NaN NaN NaN NaN NaN 110909  131 55  105 NaN NaN 27  27  34  NaN NaN 68  NaN NaN NaN 109439  374 1182    320 NaN NaN NaN\nmean    NaN NaN 15133.124228    15133.124228    15129.913485    NaN NaN 451.703280  NaN NaN NaN NaN NaN 7.866525e+04    NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN 18.658485   0.240945    NaN 0.543842    36.703838   82.156683   11.373595   0.162151    1.414609e+04    NaN 23.704154   NaN 0.0 0.0 13093.720734    13090.819511    11834.579108    1065.864157 1.193620    192.083862  34.107295   NaN 8988.970489 NaN NaN 0.018060    45.958725   1.0 NaN 123220.229856   19.046298   NaN 0.000045    3.007498e+02    1.487752e+05    1.048427    2.624494    0.845035    1.801720    18.464428   3.570383e+04    71.071878   1.399805    2.941727    5191.785689 53.011716   3.665310e+04    1.330749    1.696274    2.404187    5.083699    14573.002065    15451.859776    45.630734   0.008728    3.745034    121.109044  171.096953  13.539704   7.627740    1.476652    23.266752   40.444831   6.617723    37.548321   0.499932    3.305349    4.951492    4.712936    7.286199    8.664689    8.084673    13.359015   4.904345    11.346311   0.0 0.000045    0.066108    2.404593    94.636698   29.690390   0.145534    0.016464    1.886942e+05    5.006460e+04    25196.060734    4.486298e+04    32620.767914    NaN 0.753047    1.609244    11.366589   55.994512   2.893328    12.913619   0.052913    0.083492    36.830304   NaN NaN NaN NaN 3.0 194.040611  NaN NaN NaN 3.0 15.007634   NaN 677.778462  14977.221908    197.404962  NaN NaN NaN NaN 7235.872456 51.259034   18.638776\nstd NaN NaN 10063.626492    10063.626492    10062.605730    NaN NaN 291.529754  NaN NaN NaN NaN NaN 8.273838e+04    NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN 20.105508   0.759381    NaN 0.791792    21.864945   23.731842   5.938104    0.445418    2.109029e+04    NaN 12.636174   NaN 0.0 0.0 10677.374875    10675.875613    10274.588973    1127.992027 8.430334    844.626003  150.986459  NaN 9417.206405 NaN NaN 0.149077    21.220192   0.0 NaN 61899.006621    8.171933    NaN 0.006714    2.447485e+04    1.670928e+05    1.212451    2.877455    1.041107    1.708049    23.830165   4.476172e+04    22.776782   1.595896    2.734340    5728.066547 22.057862   3.675638e+04    1.715969    2.911280    2.682558    3.482714    17992.870300    20176.943227    29.912941   0.107913    340.178661  54.487416   97.531613   17.183313   8.446866    1.798038    32.073651   22.185204   5.688223    22.098123   1.393569    2.312572    3.307021    3.167090    4.704991    7.612502    4.949893    8.197814    3.218891    5.928676    0.0 0.006714    0.438064    2.050780    8.906956    34.368549   0.359703    0.254046    1.863843e+05    5.154504e+04    25322.554746    4.691188e+04    28067.364794    NaN 1.108586    1.836520    6.574821    26.571334   3.085046    8.499611    0.510133    0.386138    24.069226   NaN NaN NaN NaN 0.0 144.144733  NaN NaN NaN 0.0 8.734103    NaN 445.752949  9097.533521 207.337176  NaN NaN NaN NaN 5009.981486 8.231359    6.806635\nmin NaN NaN 1000.000000 1000.000000 1000.000000 NaN NaN 30.120000   NaN NaN NaN NaN NaN 0.000000e+00    NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN 0.000000    0.000000    NaN 0.000000    0.000000    3.000000    0.000000    0.000000    0.000000e+00    NaN 2.000000    NaN 0.0 0.0 0.000000    0.000000    0.000000    0.000000    0.000000    0.000000    0.000000    NaN 0.000000    NaN NaN 0.000000    0.000000    1.0 NaN 15400.000000    0.190000    NaN 0.000000    0.000000e+00    0.000000e+00    0.000000    0.000000    0.000000    0.000000    0.000000    0.000000e+00    0.000000    0.000000    0.000000    0.000000    0.000000    0.000000e+00    0.000000    0.000000    0.000000    0.000000    0.000000    0.000000    0.000000    0.000000    0.000000    1.000000    2.000000    0.000000    0.000000    0.000000    0.000000    0.000000    0.000000    0.000000    0.000000    0.000000    0.000000    0.000000    0.000000    0.000000    0.000000    2.000000    0.000000    0.000000    0.0 0.000000    0.000000    0.000000    12.500000   0.000000    0.000000    0.000000    0.000000e+00    0.000000e+00    0.000000    0.000000e+00    0.000000    NaN 0.000000    0.000000    0.000000    0.000000    0.000000    0.000000    0.000000    0.000000    0.000000    NaN NaN NaN NaN 3.0 5.950000    NaN NaN NaN 3.0 0.000000    NaN 151.860000  424.110000  0.070000    NaN NaN NaN NaN 413.930000  29.920000   1.000000\n25% NaN NaN 7200.000000 7200.000000 7200.000000 NaN NaN 232.750000  NaN NaN NaN NaN NaN 4.595300e+04    NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN 10.400000   0.000000    NaN 0.000000    18.000000   67.000000   7.000000    0.000000    4.085000e+03    NaN 15.000000   NaN 0.0 0.0 5007.935312 5007.250000 3500.000000 292.490000  0.000000    0.000000    0.000000    NaN 823.590000  NaN NaN 0.000000    29.000000   1.0 NaN 83862.000000    13.000000   NaN 0.000000    0.000000e+00    2.739200e+04    0.000000    1.000000    0.000000    1.000000    6.000000    8.377000e+03    58.000000   0.000000    1.000000    1747.000000 38.000000   1.530000e+04    0.000000    0.000000    1.000000    3.000000    2958.000000 2983.000000 19.900000   0.000000    0.000000    83.000000   104.000000  4.000000    3.000000    0.000000    6.000000    23.000000   2.000000    20.000000   0.000000    2.000000    3.000000    3.000000    4.000000    4.000000    5.000000    8.000000    3.000000    7.000000    0.0 0.000000    0.000000    1.000000    92.300000   0.000000    0.000000    0.000000    5.299800e+04    1.849600e+04    8900.000000 1.466100e+04    14026.000000    NaN 0.000000    0.000000    7.000000    36.500000   1.000000    7.000000    0.000000    0.000000    15.000000   NaN NaN NaN NaN 3.0 90.360000   NaN NaN NaN 3.0 7.000000    NaN 338.100000  7428.245000 40.040000   NaN NaN NaN NaN 3466.597500 45.000000   18.000000\n50% NaN NaN 12000.000000    12000.000000    12000.000000    NaN NaN 368.690000  NaN NaN NaN NaN NaN 6.500000e+04    NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN 16.780000   0.000000    NaN 0.000000    34.000000   86.000000   10.000000   0.000000    9.061000e+03    NaN 22.000000   NaN 0.0 0.0 10297.070860    10294.240000    10000.000000    696.570000  0.000000    0.000000    0.000000    NaN 6119.670000 NaN NaN 0.000000    46.000000   1.0 NaN 110000.000000   18.560000   NaN 0.000000    0.000000e+00    8.415200e+04    1.000000    2.000000    1.000000    1.000000    11.000000   2.329500e+04    74.000000   1.000000    2.000000    3859.000000 54.000000   2.710000e+04    1.000000    0.000000    2.000000    4.000000    7869.000000 8439.000000 43.100000   0.000000    0.000000    128.000000  154.000000  8.000000    5.000000    1.000000    13.000000   39.000000   5.000000    35.000000   0.000000    3.000000    4.000000    4.000000    6.000000    7.000000    7.000000    12.000000   4.000000    10.000000   0.0 0.000000    0.000000    2.000000    100.000000  18.200000   0.000000    0.000000    1.248450e+05    3.653800e+04    17800.000000    3.328500e+04    25326.000000    NaN 0.000000    1.000000    10.000000   57.800000   2.000000    11.000000   0.000000    0.000000    35.000000   NaN NaN NaN NaN 3.0 146.390000  NaN NaN NaN 3.0 17.000000   NaN 367.950000  15652.360000    146.070000  NaN NaN NaN NaN 5891.670000 45.230000   20.000000\n75% NaN NaN 20000.000000    20000.000000    20000.000000    NaN NaN 620.660000  NaN NaN NaN NaN NaN 9.500000e+04    NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN 24.122500   0.000000    NaN 1.000000    53.000000   101.000000  14.000000   0.000000    1.725500e+04    NaN 31.000000   NaN 0.0 0.0 18766.242514    18755.060000    17500.000000    1443.380000 0.000000    0.000000    0.000000    NaN 13912.100000    NaN NaN 0.000000    63.000000   1.0 NaN 148000.000000   24.650000   NaN 0.000000    0.000000e+00    2.285040e+05    2.000000    3.000000    1.000000    3.000000    21.000000   4.672800e+04    87.000000   2.000000    4.000000    6943.000000 69.000000   4.640000e+04    2.000000    2.000000    3.000000    7.000000    20477.000000    19997.000000    70.500000   0.000000    0.000000    152.000000  220.000000  17.000000   10.000000   2.000000    27.000000   57.000000   10.000000   53.000000   0.000000    4.000000    6.000000    6.000000    9.000000    11.000000   10.000000   17.000000   6.000000    14.000000   0.0 0.000000    0.000000    3.000000    100.000000  50.000000   0.000000    0.000000    2.771000e+05    6.409300e+04    33000.000000    6.074100e+04    41986.000000    NaN 1.000000    3.000000    15.000000   77.300000   4.000000    17.000000   0.000000    0.000000    57.000000   NaN NaN NaN NaN 3.0 279.065000  NaN NaN NaN 3.0 23.000000   NaN 1193.032500 22114.265000    291.190000  NaN NaN NaN NaN 10090.202500    60.000000   24.000000\nmax NaN NaN 40000.000000    40000.000000    40000.000000    NaN NaN 1628.080000 NaN NaN NaN NaN NaN 9.300000e+06    NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN 999.000000  19.000000   NaN 5.000000    226.000000  126.000000  86.000000   52.000000   1.113293e+06    NaN 129.000000  NaN 0.0 0.0 51653.389338    51653.390000    40000.000000    13842.210000    320.700000  33122.070000    5961.972600 NaN 41353.670000    NaN NaN 8.000000    226.000000  1.0 NaN 1000000.000000  39.980000   NaN 1.000000    6.214661e+06    4.151547e+06    13.000000   49.000000   6.000000    16.000000   383.000000  1.378570e+06    309.000000  22.000000   28.000000   389468.000000   175.000000  1.680300e+06    32.000000   40.000000   67.000000   33.000000   393082.000000   331957.000000   146.600000  9.000000    65000.000000    518.000000  806.000000  368.000000  260.000000  24.000000   551.000000  152.000000  24.000000   152.000000  36.000000   50.000000   72.000000   59.000000   66.000000   105.000000  72.000000   94.000000   65.000000   82.000000   0.0 1.000000    17.000000   23.000000   100.000000  100.000000  5.000000    52.000000   4.358152e+06    1.394335e+06    460900.000000   1.380346e+06    280272.000000   NaN 6.000000    17.000000   58.000000   212.600000  35.000000   75.000000   20.000000   11.000000   117.000000  NaN NaN NaN NaN 3.0 649.970000  NaN NaN NaN 3.0 29.000000   NaN 1369.860000 32300.260000    1072.990000 NaN NaN NaN NaN 28503.000000    80.000000   24.000000\n</code></pre>\n<p>It seems unlikely that the loan_amnt count is 110909.000000 when you see the first 4 lines (and there are many).</p>\n<h1>Annex : how to recreate the dataset</h1>\n<p>I used a csv file that I downloaded <a href=\"https://www.lendingclub.com/info/download-data.action\" rel=\"nofollow noreferrer\">here</a> (bank loans for 2018. They are divided into four quarters). Using Python 3 can be obtained by doing:</p>\n<pre><code>import pandas as pd \n# Control delimiters, rows, column names with read_csv (see later) \ndata_Q1 = pd.read_csv(&quot;LoanStats_2018Q1.csv&quot;, skiprows=1, skipfooter=2, engine='python')\ndata_Q2 = pd.read_csv(&quot;LoanStats_2018Q2.csv&quot;, skiprows=1, skipfooter=2, engine='python')\ndata_Q3 = pd.read_csv(&quot;LoanStats_2018Q2.csv&quot;, skiprows=1, skipfooter=2, engine='python')\ndata_Q4 = pd.read_csv(&quot;LoanStats_2018Q2.csv&quot;, skiprows=1, skipfooter=2, engine='python')\nframes = [data_Q1,data_Q2,data_Q3,data_Q4]\n\nresult = pd.concat(frames)\nsubset = result.loc[result[&quot;loan_status&quot;].isin(['Charged Off','Fully Paid'])]\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 1, "creation_date": 1563401956, "post_id": 57084629, "comment_id": 100692460, "body": "Welcome to StackOverflow. Unfortunately, your question is not clear. If the <code>tutto</code> function has many <code>print</code> commands, they will not be executed until <code>tutto</code> is begun by being called. Please explain further. It would help if you show us a minimal <code>tutto</code> function that demonstrates your problem and tell us the desired output and the actual output and how they differ. Also, are you able to edit the <code>tutto</code> function?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1563405708, "post_id": 57084629, "comment_id": 100693344, "body": "If you&#39;re using Python 3.4+, the <a href=\"https://docs.python.org/3/library/contextlib.html#contextlib.redirect_stdout\" rel=\"nofollow noreferrer\"><code>contextlib.redirect_stdout()</code></a> function would allow you to do what (I think) you want. Note the examples. If you&#39;re using an earlier version, it would be fairly simple to write your own version of something like \u2014 let us know if you need help doing that when you <a href=\"https://stackoverflow.com/posts/57084629/edit\">edit</a> your question to clarify what you want to do."}], "answers": [{"comments": [{"owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 3, "creation_date": 1563403098, "post_id": 57084774, "comment_id": 100692730, "body": "How did you interpret the question, which is unclear? Did you interpret it that the questioner wants all the printing in the <code>tutto</code> function to end up in the file? What if the function also returns a value, as seems the case in the sample code--is that to go in the file also?"}, {"owner": {"reputation": 2142, "user_id": 3308951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iUOnA.png?s=128&g=1", "display_name": "SyntaxVoid supports Monica", "link": "https://stackoverflow.com/users/3308951/syntaxvoid-supports-monica"}, "reply_to_user": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 0, "creation_date": 1563403581, "post_id": 57084774, "comment_id": 100692846, "body": "I interpreted it like they want anything <code>print</code>ed in tutto to appear in a file instead of the terminal. If they also want to write the return value, then they could change the call to <code>tutto</code> to be <code>f.write(tutto(f))</code> which will write the return value after <code>tutto</code> has finished executing."}, {"owner": {"reputation": 1, "user_id": 11594464, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TX_0tuW9KiM/AAAAAAAAAAI/AAAAAAAAABE/ojgJQvODMtw/photo.jpg?sz=128", "display_name": "Pingu-Io", "link": "https://stackoverflow.com/users/11594464/pingu-io"}, "edited": false, "score": 0, "creation_date": 1563439353, "post_id": 57084774, "comment_id": 100702896, "body": "I have a def (tutto) with inside a lot of print command, in the terminal this def start only after a button pression make with tkinter, but the txt file don&#39;t wait the button pression to write so in the txt is blank"}, {"owner": {"reputation": 2142, "user_id": 3308951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iUOnA.png?s=128&g=1", "display_name": "SyntaxVoid supports Monica", "link": "https://stackoverflow.com/users/3308951/syntaxvoid-supports-monica"}, "edited": false, "score": 0, "creation_date": 1563472227, "post_id": 57084774, "comment_id": 100721419, "body": "@pingu-lo If you&#39;re still having problems, I suggest you make a new question and define your requirements more clearly. A minimal example using tkinter, your button, and the behavior you expect vs. the behavior you are getting."}], "tags": [], "owner": {"reputation": 2142, "user_id": 3308951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iUOnA.png?s=128&g=1", "display_name": "SyntaxVoid supports Monica", "link": "https://stackoverflow.com/users/3308951/syntaxvoid-supports-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1563469858, "last_edit_date": 1563469858, "creation_date": 1563402518, "answer_id": 57084774, "question_id": 57084629, "link": "https://stackoverflow.com/questions/57084629/printing-into-a-txt-file/57084774#57084774", "title": "Printing into a txt file", "body": "<p><code>print</code> accepts a file parameter that designates where the output will be printed to. By default, the location is sys.stdout (which is normally your terminal). You can modify the definition of tutto so that it uses a special print function. <code>functools.partial</code> is used to help you create your own print function so that you don't have to type <code>print(\"...\", file = fout)</code> everywhere. Once tutto ends, <code>print</code> will return to its normal behavior since you are only changing its definition in the scope of <code>tutto</code>. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import sys\nfrom functools import partial\n\ndef tutto(fout = sys.stdout):\n    print = partial(__builtins__.print, file = fout)\n    print(\"Here are all\")\n    print(\"my print statements\")\n    print(\"They will automatically show up in\")\n    print(\"The file designated by fout...\")\n    return\n\nwith open(\"Sample.txt\", \"w\") as f:\n    print(\"Calling tutto\")\n    tutto(f)\n    print(\"Tutto is finished, and I'll appear in your terminal.\")\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>Terminal:\nCalling tutto\nTutto is finished, and I'll appear in your terminal.\n</code></pre>\n\n<pre><code>Sample.txt:\nHere are all\nmy print statements\nThey will automatically show up in\nThe file designated by fout...\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11594464, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TX_0tuW9KiM/AAAAAAAAAAI/AAAAAAAAABE/ojgJQvODMtw/photo.jpg?sz=128", "display_name": "Pingu-Io", "link": "https://stackoverflow.com/users/11594464/pingu-io"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1563469858, "creation_date": 1563401435, "last_edit_date": 1563405090, "question_id": 57084629, "link": "https://stackoverflow.com/questions/57084629/printing-into-a-txt-file", "title": "Printing into a txt file", "body": "<p>I want to print in a txt file only then a specific event, that is my code:</p>\n\n<pre><code>txt = tutto()\nfile = open(\"psw.txt\", \"w\")\nfile.write(str(txt))\nfile.close()\n</code></pre>\n\n<p><code>tutto()</code> is a <code>def</code> ( <code>def tutto():</code> ). In <code>tutto</code> there are a lot of <code>print</code> commands. How can I redirect all these print commands only after <code>tutto()</code> is started?</p>\n"}, {"tags": ["python", "data-visualization"], "comments": [{"owner": {"reputation": 3446, "user_id": 11016588, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-F6RcLML2H6o/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQO0WVT35BZ4DGhtU0gK3nG_5sC3Ww/mo/photo.jpg?sz=128", "display_name": "Chrisvin Jem", "link": "https://stackoverflow.com/users/11016588/chrisvin-jem"}, "edited": false, "score": 1, "creation_date": 1563404421, "post_id": 57084556, "comment_id": 100693050, "body": "Hi, welcom to stackoverflow, add the code directly in your question rather than adding a link to the code."}, {"owner": {"reputation": 3, "user_id": 11799696, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156496065186009/picture?type=large", "display_name": "Isaac Hocker", "link": "https://stackoverflow.com/users/11799696/isaac-hocker"}, "reply_to_user": {"reputation": 3446, "user_id": 11016588, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-F6RcLML2H6o/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQO0WVT35BZ4DGhtU0gK3nG_5sC3Ww/mo/photo.jpg?sz=128", "display_name": "Chrisvin Jem", "link": "https://stackoverflow.com/users/11016588/chrisvin-jem"}, "edited": false, "score": 1, "creation_date": 1563411108, "post_id": 57084556, "comment_id": 100694323, "body": "I&#39;ll be sure to try and do that again next time."}], "answers": [{"tags": [], "owner": {"reputation": 3446, "user_id": 11016588, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-F6RcLML2H6o/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQO0WVT35BZ4DGhtU0gK3nG_5sC3Ww/mo/photo.jpg?sz=128", "display_name": "Chrisvin Jem", "link": "https://stackoverflow.com/users/11016588/chrisvin-jem"}, "is_accepted": true, "score": 0, "last_activity_date": 1563405380, "creation_date": 1563405380, "answer_id": 57085115, "question_id": 57084556, "link": "https://stackoverflow.com/questions/57084556/when-i-submit-this-for-grading-in-zybooks-it-doesnt-seem-to-work-but-it-does/57085115#57085115", "title": "When I submit this for grading in zyBooks, it doesn&#39;t seem to work. But, it does on the develop side", "body": "<p>Try the refactoring your <code>main</code> code as follows,</p>\n\n<pre><code>  title = input('Enter a title for the data:\\n')\n  print ('You entered:', title)\n  print(\"\\n\".rstrip(\"\\n\"))\n  clm1 = input('Enter the column 1 header:\\n')\n  print ('You entered:', clm1)\n  print(\"\\n\".rstrip(\"\\n\"))\n  clm2 = input('Enter the column 2 header:\\n')\n  print ('You entered:', clm2)\n  #title, clm1, clm2 = head(title, clm1, clm2)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11799696, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156496065186009/picture?type=large", "display_name": "Isaac Hocker", "link": "https://stackoverflow.com/users/11799696/isaac-hocker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 398, "favorite_count": 0, "accepted_answer_id": 57085115, "answer_count": 1, "score": 0, "last_activity_date": 1563619247, "creation_date": 1563400843, "last_edit_date": 1563619247, "question_id": 57084556, "link": "https://stackoverflow.com/questions/57084556/when-i-submit-this-for-grading-in-zybooks-it-doesnt-seem-to-work-but-it-does", "title": "When I submit this for grading in zyBooks, it doesn&#39;t seem to work. But, it does on the develop side", "body": "<p>My output does not match the expected output.</p>\n\n<p>I have tried rearranging the code to try and get things to match up with the expected output.  But, that didn't work either.</p>\n\n<pre><code>def head(title, clm1, clm2):\n  print ('You entered:', title)\n  print(\"\\n\".rstrip(\"\\n\"))\n  print ('You entered:', clm1)\n  print(\"\\n\".rstrip(\"\\n\"))\n  print ('You entered:', clm2)\n  return title, clm1, clm2\ndef print_data_point(data_point):\n\n  while True:\n    if data_point == '-1':\n      break\n    elif ',' not in data_point:\n      print('Error: No comma in string.')\n      print(\"\\n\".rstrip(\"\\n\"))\n    else:\n      if len(data_point.split(',')) &gt; 2:\n        print ('Error: Too many commas in input.')\n        print(\"\\n\".rstrip(\"\\n\"))\n      else:\n        if not(data_point.split()[-1].isnumeric()):\n          print('Error: Comma not followed by an integer')\n          print(\"\\n\".rstrip(\"\\n\"))\n        else:\n          list=data_point.split(',') \n          print('Data string:',list[0])\n          print('Data integer:',list[1])\n    return data_point\nif __name__ == '__main__':\n  title = input('Enter a title for the data:\\n')\n  clm1 = input('Enter the column 1 header:\\n')\n  clm2 = input('Enter the column 2 header:\\n')\n  title, clm1, clm2 = head(title, clm1, clm2)\n  data_point = input('Enter a data point (-1 to stop input):\\n')\n  data_point = print_data_point(data_point)\n  print('%33s'%title)\n  print('%-*s|%-*s'%(20,clm1,23,clm2))\n  print('--------------------------------------------')\n  list=data_point.split(',')\n  print('%-*s|%*s'%(20,list[0],23,list[1]))\n</code></pre>\n\n<p>Number of Novels Authored\nblank\nblank\n-1</p>\n\n<p><strong>Current Output</strong></p>\n\n<pre><code>Enter a title for the data:\nEnter the column 1 header:\nEnter the column 2 header:\nYou entered: Number of Novels Authored\n</code></pre>\n\n<p><strong>Expected Output</strong></p>\n\n<pre><code>Enter a title for the data:\nYou entered: Number of Novels Authored\n</code></pre>\n"}, {"tags": ["python", "heroku", "sqlalchemy", "apscheduler"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 11678383, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1czX43DO4nk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd6E50Gl9F6_MH4f4KSxtlI1szPqw/mo/photo.jpg?sz=128", "display_name": "Drew Loughran", "link": "https://stackoverflow.com/users/11678383/drew-loughran"}, "edited": false, "score": 0, "creation_date": 1563469697, "post_id": 57084770, "comment_id": 100720289, "body": "Thank you for the help. I was wondering if you had an example or something because Im not quite sure how to connect the database with the scheduler."}], "tags": [], "owner": {"reputation": 91789, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "is_accepted": true, "score": 0, "last_activity_date": 1563402489, "creation_date": 1563402489, "answer_id": 57084770, "question_id": 57084554, "link": "https://stackoverflow.com/questions/57084554/apscheduler-not-remembering-jobs-after-heroku-sleeps/57084770#57084770", "title": "APScheduler not remembering jobs after Heroku sleeps", "body": "<p>You are using an SQLite database to store your jobs. This doesn't play nicely with Heroku's <a href=\"https://devcenter.heroku.com/articles/dynos#ephemeral-filesystem\" rel=\"nofollow noreferrer\">ephemeral filesystem</a>, which loses all changes every time your dyno restarts. This <a href=\"https://devcenter.heroku.com/articles/dynos#automatic-dyno-restarts\" rel=\"nofollow noreferrer\">happens frequently</a> (at least once per day) and likely occurs when your app sleeps and then wakes back up.</p>\n\n<p>You should use a client-server database instead. Heroku's <a href=\"https://devcenter.heroku.com/articles/heroku-postgresql\" rel=\"nofollow noreferrer\">Postgres service</a> might be a better choice. It's supported out of the box and the base plan is free.</p>\n"}], "owner": {"reputation": 43, "user_id": 11678383, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1czX43DO4nk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd6E50Gl9F6_MH4f4KSxtlI1szPqw/mo/photo.jpg?sz=128", "display_name": "Drew Loughran", "link": "https://stackoverflow.com/users/11678383/drew-loughran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 427, "favorite_count": 0, "accepted_answer_id": 57084770, "answer_count": 1, "score": 1, "last_activity_date": 1563402604, "creation_date": 1563400824, "last_edit_date": 1563402604, "question_id": 57084554, "link": "https://stackoverflow.com/questions/57084554/apscheduler-not-remembering-jobs-after-heroku-sleeps", "title": "APScheduler not remembering jobs after Heroku sleeps", "body": "<p>I am currently trying to implement APScheduler through Heroku. I have the scheduler working through Heroku with Python just as expected when the Heroku is running. The issue I am running into is when the Heroku dyno goes to sleep after 30 minutes of inactivity. I want to be able to make Heroku active again and have the scheduler remember all of the jobs that were not triggered before it went to sleep. I am using the <code>SQLAlchemyJobStore</code> which is supposed to remember jobs after the scheduler is shut down.</p>\n\n<p>Here is the code that I am using currently:</p>\n\n<pre><code>from apscheduler.schedulers.blocking import BlockingScheduler\nfrom apscheduler.jobstores.sqlalchemy import SQLAlchemyJobStore\n\njobstores = {\n    'default': SQLAlchemyJobStore(url='sqlite:///jobs.sqlite')\n}\njob_defaults = {\n    'coalesce': False,\n    'max_instances': 1\n}\n\nsched = BlockingScheduler()\nsched.configure(jobstores=jobstores, job_defaults=job_defaults, timezone='America/New_York')\n\ndef my_job(text):\n    print(text)\n\ndef add_jobs():\n    print(\"scheduling\")\n    sched.add_job(my_job, 'date', run_date='2019-7-17 15:25:00', args=['date job firing'], id = \"Job1\", misfire_grace_time = 18000)\n    sched.add_job(my_job, 'date', run_date='2019-7-17 15:30:00', args=['date to run'], id = \"Job2\", misfire_grace_time=18000)\n    sched.add_job(my_job, 'date', run_date='2019-7-17 16:30:00', args=['job after shutdown'], id = 'Job3', misfire_grace_time = 18000)\n\nif __name__ == '__main__':\n    add_jobs()\n    #sched.print_jobs()\n    sched.start()\n</code></pre>\n\n<p>In this case, I commit and push the code to heroku, which runs this file in heroku. The results I get are as followed:</p>\n\n<pre><code>2019-07-17T19:24:38.000000+00:00 app[api]: Build started by user\n2019-07-17T19:25:03.445241+00:00 heroku[clock.1]: State changed from down to starting\n2019-07-17T19:25:03.227462+00:00 app[api]: Release v268 created by user \n2019-07-17T19:25:03.227462+00:00 app[api]: Deploy 6d599479 by user\n2019-07-17T19:25:09.364735+00:00 heroku[clock.1]: Starting process with command `python clock.py`\n2019-07-17T19:25:10.118949+00:00 heroku[clock.1]: State changed from starting to up\n2019-07-17T19:25:13.928223+00:00 app[clock.1]: scheduling\n2019-07-17T19:25:14.142912+00:00 app[clock.1]: date job firing\n2019-07-17T19:25:14.000000+00:00 app[api]: Build succeeded\n2019-07-17T19:30:00.051064+00:00 app[clock.1]: date to run\n</code></pre>\n\n<p>30 minutes after the the previous job triggered, Heroku sleeps. This is when I ping Heroku to wake up and then the last job at 16:30:00 does not trigger at the time it should. </p>\n\n<p>I believe the issue might have to do with the database. I am not sure what is in the database at any certain time or if the scheduler is pulling the non executed jobs every time Heroku goes to sleep. </p>\n\n<p>If anyone knows why this is happening that would be very helpful.</p>\n"}, {"tags": ["python", "django", "django-2.0"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1563400911, "post_id": 57084552, "comment_id": 100692238, "body": "Yes, the <code>on_delete=</code> field on a <code>ForeignKey</code> and <code>OneToOneField</code> are now requires. You should fix the migration files."}, {"owner": {"reputation": 1055, "user_id": 6317608, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c38e6a15ad519a4a887cb319e50be186?s=128&d=identicon&r=PG&f=1", "display_name": "Taylor", "link": "https://stackoverflow.com/users/6317608/taylor"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1563401389, "post_id": 57084552, "comment_id": 100692340, "body": "Isn&#39;t that the point of making migrations so that they are added to the migrations? If I add them to previously ran migrations files such as 0002, how would that work?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1563401469, "post_id": 57084552, "comment_id": 100692357, "body": "but you say you upgraded the Django version. So now you let a Django-2.0 framework interpret code written by a Django-1.x framework. Django is not 100% backwards compatible. The exceptions are listed in the release notes. In the previous versions of Django, these were not required."}, {"owner": {"reputation": 1055, "user_id": 6317608, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c38e6a15ad519a4a887cb319e50be186?s=128&d=identicon&r=PG&f=1", "display_name": "Taylor", "link": "https://stackoverflow.com/users/6317608/taylor"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1563401789, "post_id": 57084552, "comment_id": 100692426, "body": "I did upgrade versions and I also added the necessary field to the my models.py. Correct me if I am wrong but from what I understand 1) it should ignore 0002 file since it has already been ran and 2) when I update the models.py file make migrations should make the corresponding changes so they are documented for others to use."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1563401885, "post_id": 57084552, "comment_id": 100692446, "body": "no the migration files are each time interpreted. Since the migration file calls the <code>ForeignKey</code> constructor it will error. The fact that you already applied them is irrelevant. Since Django will interpret these to make a <i>directed acyclic graph</i> that it will topologically sort to run migrations it might not have run yet."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1563401939, "post_id": 57084552, "comment_id": 100692458, "body": "the release notes even specify that you should update the migration files. They advice to squash the files, such that you can more easily perform a search-and-replace."}, {"owner": {"reputation": 1055, "user_id": 6317608, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c38e6a15ad519a4a887cb319e50be186?s=128&d=identicon&r=PG&f=1", "display_name": "Taylor", "link": "https://stackoverflow.com/users/6317608/taylor"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1563402664, "post_id": 57084552, "comment_id": 100692627, "body": "Your correct, thanks for the info. The actual informational part is in the release notes for 1.9 and not 2.0 you may want to add that to your answer."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1563402882, "post_id": 57084552, "comment_id": 100692671, "body": "If I recall correctly it was marked &quot;deprecated&quot; since 1.9. But usually in Django something is deprecated for two released until it is actually removed, to give developers some time to adapt :)."}], "answers": [{"comments": [{"owner": {"reputation": 1133, "user_id": 5921548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4509b3b039ef1b38ae52ea58f45f78b?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Kyu Peblik", "link": "https://stackoverflow.com/users/5921548/jan-kyu-peblik"}, "edited": false, "score": 0, "creation_date": 1579205378, "post_id": 57084616, "comment_id": 105698183, "body": "I had no luck with <code>django.db.models.deletion.CASCADE</code> (django-2.2.9), but plain <code>models.CASCADE</code> worked fine. This also seems to be what is suggested at <a href=\"https://docs.djangoproject.com/en/2.1/releases/1.9/#foreignkey-and-onetoonefield-on-delete-argument\" rel=\"nofollow noreferrer\">docs.djangoproject.com/en/2.1/releases/1.9/&hellip;</a>"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 5, "last_activity_date": 1579205485, "last_edit_date": 1579205485, "creation_date": 1563401345, "answer_id": 57084616, "question_id": 57084552, "link": "https://stackoverflow.com/questions/57084552/migrating-problems-when-porting-django-project-to-python-3-and-django-2/57084616#57084616", "title": "Migrating problems when porting Django project to Python 3 and Django 2", "body": "<p>Since <a href=\"/questions/tagged/django-2.0\" class=\"post-tag\" title=\"show questions tagged &#39;django-2.0&#39;\" rel=\"tag\">django-2.0</a> <a href=\"https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey\" rel=\"nofollow noreferrer\"><strong><code>ForeignKey</code></strong> fields [Django-doc]</a> and <a href=\"https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.OneToOneField\" rel=\"nofollow noreferrer\"><strong><code>OneToOneField</code></strong> fields fields</a> now have a required <a href=\"https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey.on_delete\" rel=\"nofollow noreferrer\"><strong><code>on_delete</code></strong> parameter</a>.</p>\n\n<p>This is specified in the <a href=\"https://docs.djangoproject.com/en/2.2/releases/2.0/#features-removed-in-2-0\" rel=\"nofollow noreferrer\">release notes of Django-2.0 under <em>Features removed in 2.0</em></a>:</p>\n\n<blockquote>\n  <p>The <strong><code>on_delete</code> argument</strong> for <code>ForeignKey</code> and <code>OneToOneField</code> is <strong>now required</strong> in models and migrations. Consider squashing <strong>migrations</strong> so that you have fewer of them <strong>to update</strong>.</p>\n</blockquote>\n\n<p>You thus should inspect your migration files for <code>ForeignKey</code>s and <code>OneToOneField</code>s, and add an <code>on_delete</code> parameter, like:</p>\n\n<pre><code>class Migration(migrations.Migration):\n\n    initial = False\n\n    dependencies = [\n        ('app', '0001_initial'),\n    ]\n\n    operations = [\n        migrations.CreateModel(\n            name='Model',\n            fields=[\n                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('some_foreignkey', models.ForeignKey(<b>on_delete=django.db.models.deletion.CASCADE</b>, to='app.OtherModel')),\n            ],\n        ),\n    ]</code></pre>\n\n<p>You should inspect the <a href=\"https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey.on_delete\" rel=\"nofollow noreferrer\">documentation on the <code>on_delete</code> parameter</a> to see what deletion strategy is the best for each situation. The options are, at the time of writing <code>CASCADE</code>, <code>PROTECT</code>, <code>SET_NULL</code>, <code>SET_DEFAULT</code>, <code>SET(..)</code>, <code>DO_NOTHING</code>.</p>\n\n<p>If you did not specify the <code>on_delete</code> in the pre-<a href=\"/questions/tagged/django-2.0\" class=\"post-tag\" title=\"show questions tagged &#39;django-2.0&#39;\" rel=\"tag\">django-2.0</a> versions, it made a default to <code>CASCADE</code>. So if you want the same behavior, you should add <code>on_delete=models.CASCADE</code>. This is noted in the <a href=\"https://docs.djangoproject.com/en/1.11/ref/models/fields/#django.db.models.ForeignKey.on_delete\" rel=\"nofollow noreferrer\">1.11 version of the documentation on <code>on_delete</code></a>:</p>\n\n<blockquote>\n  <p>Deprecated since version 1.9: on_delete will become a required argument in Django 2.0. In <strong>older versions it defaults to <code>CASCADE</code></strong>.</p>\n</blockquote>\n"}], "owner": {"reputation": 1055, "user_id": 6317608, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c38e6a15ad519a4a887cb319e50be186?s=128&d=identicon&r=PG&f=1", "display_name": "Taylor", "link": "https://stackoverflow.com/users/6317608/taylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 711, "favorite_count": 0, "accepted_answer_id": 57084616, "answer_count": 1, "score": 3, "last_activity_date": 1588178989, "creation_date": 1563400802, "last_edit_date": 1588178989, "question_id": 57084552, "link": "https://stackoverflow.com/questions/57084552/migrating-problems-when-porting-django-project-to-python-3-and-django-2", "title": "Migrating problems when porting Django project to Python 3 and Django 2", "body": "<p>I've been porting a Django project to Python 3 and Django 2. I have had to add on_delete to all my models with foreign keys as required in Django 2. Now I have tried to make migrations for those changes have been getting <code>TypeError: __init__() missing 1 required positional argument: 'on_delete'</code>.</p>\n\n<p>The file it references is the 0002 migration file not the models file which has been updated. I am not sure how to go about fixing this. I have tried faking the migrations and I still get the same error.</p>\n\n<p>I am not sure why it thinks the database doesn't exist, I have checked and everything is intact and working in Postgres. Any ideas?</p>\n"}, {"tags": ["python", "memory", "profiling", "python-import"], "comments": [{"owner": {"reputation": 96714, "user_id": 198633, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5b9c04999233026354268c2ee4237e04?s=128&d=identicon&r=PG", "display_name": "inspectorG4dget", "link": "https://stackoverflow.com/users/198633/inspectorg4dget"}, "edited": false, "score": 0, "creation_date": 1563401141, "post_id": 57084532, "comment_id": 100692284, "body": "You might consider importing specific functions from these large libraries. Perhaps that would help reduce your memory footprint?"}, {"owner": {"reputation": 615, "user_id": 5575869, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/85c3540f51b070bd74d0f67002a547b1?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelRazum", "link": "https://stackoverflow.com/users/5575869/michaelrazum"}, "reply_to_user": {"reputation": 96714, "user_id": 198633, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5b9c04999233026354268c2ee4237e04?s=128&d=identicon&r=PG", "display_name": "inspectorG4dget", "link": "https://stackoverflow.com/users/198633/inspectorg4dget"}, "edited": false, "score": 0, "creation_date": 1563401476, "post_id": 57084532, "comment_id": 100692358, "body": "Yes, I thought about it as well. Guess could optimize it a bit. Actually was a bit surprised that just the imports consumed so much memory. I think I could bring it to 100mb but for some usescases, even that is a bit too much."}], "owner": {"reputation": 615, "user_id": 5575869, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/85c3540f51b070bd74d0f67002a547b1?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelRazum", "link": "https://stackoverflow.com/users/5575869/michaelrazum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563405839, "creation_date": 1563400668, "last_edit_date": 1563405839, "question_id": 57084532, "link": "https://stackoverflow.com/questions/57084532/importing-modules-is-consuming-too-much-memory", "title": "Importing modules is consuming too much memory", "body": "<p>I have a pretty big application, that uses a lot of different libraries.\nThe result is that memory consumption is a bit high. Just an import of python pandas consumes over 50mb on my system. In total, the process needs more than 200mb to run. That's too much, especially if multiple processes are started. </p>\n\n<p>Is there some way to optimize memory consumption? Or is it normal that just an import of python pandas already needs more than 50 MB?</p>\n"}, {"tags": ["python", "pandas", "function", "dataframe", "subset"], "answers": [{"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 0, "last_activity_date": 1563401126, "creation_date": 1563401126, "answer_id": 57084578, "question_id": 57084530, "link": "https://stackoverflow.com/questions/57084530/creating-multiple-dataframes-2-based-off-value-in-one-column-and-stop-when-ano/57084578#57084578", "title": "Creating multiple dataframes (2) based off value in one column and stop when another value is observed", "body": "<p>You can do with <code>idxmax</code> and <code>.iloc</code> </p>\n\n<pre><code>df1=df.loc[df.Amount3.eq('thing2').idxmax():df.Date.eq('Total').idxmax()-1].copy()\ndf2=df.loc[df.Date.eq('Total').idxmax():]\ndf2=df2.loc[:df2.Date.isnull().idxmax()-1]\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 8067883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0da7cafc6b3800865c00a0d77906baf1?s=128&d=identicon&r=PG&f=1", "display_name": "brodo80", "link": "https://stackoverflow.com/users/8067883/brodo80"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563401126, "creation_date": 1563400653, "last_edit_date": 1563400836, "question_id": 57084530, "link": "https://stackoverflow.com/questions/57084530/creating-multiple-dataframes-2-based-off-value-in-one-column-and-stop-when-ano", "title": "Creating multiple dataframes (2) based off value in one column and stop when another value is observed", "body": "<p>A dataframe structure looks like so:</p>\n\n<pre><code>Date   Amount1     Amount2     Amount3\n\nNaN     Port        NaN        thing1\n1/1/17     2         3           3\n2/1/17     2         3           3  \n2/1/17     2         3           3  \n4/1/17     2         3           3  \n5/1/17     2         3           3  \n6/1/17     2         3           3  \n7/1/17     2         3           3  \n8/1/17     2         3           3 \n9/1/17     2         3           3\n10/1/17    2         3           3\n11/1/17    2         3           3 \n12/1/17    2         3           3      \nNaN     Port        NaN        thing2\n1/1/17     2         3           3\n2/1/17     2         3           3  \n2/1/17     2         3           3  \n4/1/17     2         3           3  \n5/1/17     2         3           3  \n6/1/17     2         3           3  \n7/1/17     2         3           3  \n8/1/17     2         3           3 \n9/1/17     2         3           3\n10/1/17    2         3           3\n11/1/17    2         3           3 \n12/1/17    2         3           3  \nTotal     Nan        NaN        NaN\n1/1/17     2         3           3\n2/1/17     2         3           3  \n2/1/17     2         3           3  \n4/1/17     2         3           3  \n5/1/17     2         3           3  \n6/1/17     2         3           3  \n7/1/17     2         3           3  \n8/1/17     2         3           3 \n9/1/17     2         3           3\n10/1/17    2         3           3\n11/1/17    2         3           3 \n12/1/17    2         3           3  \nNaN        Nan       Nan         Nan\n</code></pre>\n\n<p>I am interested in creating 2 dataframes.</p>\n\n<p>1.One dataframe collects the rows after thing2 is observed in the amount3 column and stops the row before total is observed in the date column.</p>\n\n<p>2.The 2nd dataframe will start on the row after total is observed and stop when a NaN (null) value is observed. </p>\n"}, {"tags": ["python", "scrapy"], "answers": [{"comments": [{"owner": {"reputation": 2916, "user_id": 939364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cceb4bd730bda5e8464b76de4d1d6dc5?s=128&d=identicon&r=PG", "display_name": "Gallaecio", "link": "https://stackoverflow.com/users/939364/gallaecio"}, "edited": false, "score": 0, "creation_date": 1564657847, "post_id": 57084593, "comment_id": 101107810, "body": "Consider opening a feature request in <a href=\"https://github.com/scrapy/scrapy/issues/\" rel=\"nofollow noreferrer\">github.com/scrapy/scrapy/issues</a> to ask for a better error message in this scenario."}], "tags": [], "owner": {"reputation": 43, "user_id": 9676835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pkjRS.png?s=128&g=1", "display_name": "kaws", "link": "https://stackoverflow.com/users/9676835/kaws"}, "is_accepted": false, "score": 0, "last_activity_date": 1563401193, "creation_date": 1563401193, "answer_id": 57084593, "question_id": 57084508, "link": "https://stackoverflow.com/questions/57084508/scrapy-robotstxt-obey-true-gives-an-error/57084593#57084593", "title": "Scrapy: ROBOTSTXT_OBEY=True gives an error", "body": "<p>Found out the issue.  When USER_AGENT is set I get the error.  If no USER_AGENT is set then ROBOTSTXT_OBEY=True works without error.</p>\n"}], "owner": {"reputation": 43, "user_id": 9676835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pkjRS.png?s=128&g=1", "display_name": "kaws", "link": "https://stackoverflow.com/users/9676835/kaws"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1563401193, "creation_date": 1563400429, "question_id": 57084508, "link": "https://stackoverflow.com/questions/57084508/scrapy-robotstxt-obey-true-gives-an-error", "title": "Scrapy: ROBOTSTXT_OBEY=True gives an error", "body": "<p>When setting ROBOTSTXT_OBEY=True in scrapy settings I get the following error: \n    <code>TypeError: to_bytes must receive a unicode, str or bytes object, got list</code>.</p>\n\n<p>I've tried multiple websites to see if it was an issue with the robots.txt file, but i get the same error for all websites.  Even for google \n    <code>scrapy shell https://www.google.com/ --set=\"ROBOTSTXT_OBEY=True\"</code></p>\n\n<pre><code>TypeError: to_bytes must receive a unicode, str or bytes object, got list\n</code></pre>\n\n<p>How can I respect robots.txt and crawl using scrapy?</p>\n"}, {"tags": ["python", "pandas", "csv", "max", "min"], "answers": [{"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 2, "last_activity_date": 1563400373, "creation_date": 1563400373, "answer_id": 57084499, "question_id": 57084473, "link": "https://stackoverflow.com/questions/57084473/return-rows-with-max-min-values-at-bottom-of-dataframe-python-pandas/57084499#57084499", "title": "Return rows with max/min values at bottom of dataframe (python/pandas)", "body": "<p>You can do this in oneliner:</p>\n\n<pre><code>df.append(df.loc[df['col2'].idxmin()])\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>     col1  col2  col3\n0    blue     2   dog\n1  orange    18   cat\n2   black     6  fish\n0    blue     2   dog\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 2, "last_activity_date": 1563400394, "creation_date": 1563400394, "answer_id": 57084502, "question_id": 57084473, "link": "https://stackoverflow.com/questions/57084473/return-rows-with-max-min-values-at-bottom-of-dataframe-python-pandas/57084502#57084502", "title": "Return rows with max/min values at bottom of dataframe (python/pandas)", "body": "<p>So <code>sort_values</code></p>\n\n<pre><code>df.append(df.sort_values('col2').iloc[[0]])\nOut[764]: \n     col1  col2  col3\n0    blue     2   dog\n1  orange    18   cat\n2   black     6  fish\n0    blue     2   dog\n</code></pre>\n\n<p>If need <code>max</code> </p>\n\n<pre><code>df.append(df.sort_values('col2').iloc[[-1]])\n</code></pre>\n\n<p>adding both <code>min</code> and <code>max</code> </p>\n\n<pre><code>df.append(df.sort_values('col2').iloc[[0,-1]])\nOut[765]: \n     col1  col2  col3\n0    blue     2   dog\n1  orange    18   cat\n2   black     6  fish\n0    blue     2   dog\n1  orange    18   cat\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 22982, "user_id": 10189214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oTTBaX3HSZQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ohHVatc4khqXgYvNrBM40bMFj71Q/mo/photo.jpg?sz=128", "display_name": "Andy L.", "link": "https://stackoverflow.com/users/10189214/andy-l"}, "edited": false, "score": 2, "creation_date": 1563402088, "post_id": 57084507, "comment_id": 100692489, "body": "<code>idxmax</code> and <code>idxmin</code> return index, not the integer index. The question doesn&#39;t specify the index. Therefore, if the index is not <code>rangeindex</code>, this will fail. I think using <code>loc</code> as in other answer is safer."}, {"owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "reply_to_user": {"reputation": 22982, "user_id": 10189214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oTTBaX3HSZQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ohHVatc4khqXgYvNrBM40bMFj71Q/mo/photo.jpg?sz=128", "display_name": "Andy L.", "link": "https://stackoverflow.com/users/10189214/andy-l"}, "edited": false, "score": 1, "creation_date": 1563440169, "post_id": 57084507, "comment_id": 100703305, "body": "Good point, edited and noted your comment in the answer @AndyL."}], "tags": [], "owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "is_accepted": true, "score": 4, "last_activity_date": 1563440156, "last_edit_date": 1563440156, "creation_date": 1563400426, "answer_id": 57084507, "question_id": 57084473, "link": "https://stackoverflow.com/questions/57084473/return-rows-with-max-min-values-at-bottom-of-dataframe-python-pandas/57084507#57084507", "title": "Return rows with max/min values at bottom of dataframe (python/pandas)", "body": "<p>Use <code>idxmin</code> or <code>idxmax</code>:</p>\n\n<p><em>edited to <code>.loc</code> after AndyL's comment</em></p>\n\n<pre><code>df.append(df.loc[df['col2'].idxmin()], ignore_index=True)\n\n     col1  col2  col3\n0    blue     2   dog\n1  orange    18   cat\n2   black     6  fish\n3    blue     2   dog\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4057, "user_id": 8285811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C38qo.jpg?s=128&g=1", "display_name": "Akaisteph7", "link": "https://stackoverflow.com/users/8285811/akaisteph7"}, "is_accepted": false, "score": 1, "last_activity_date": 1563400483, "creation_date": 1563400483, "answer_id": 57084513, "question_id": 57084473, "link": "https://stackoverflow.com/questions/57084473/return-rows-with-max-min-values-at-bottom-of-dataframe-python-pandas/57084513#57084513", "title": "Return rows with max/min values at bottom of dataframe (python/pandas)", "body": "<p>You can do it various ways. Here is one:</p>\n\n<pre><code>def findAggregate(df, transType, columnName=None):\n\n    if transType == 'max1Column':\n        return df.append(df.loc[df['col2'].idxmax()])\n\n    elif transType == 'min1Column':\n        return df.append(df.loc[df['col2'].idxmin()])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 6, "last_activity_date": 1563401988, "last_edit_date": 1563401988, "creation_date": 1563401136, "answer_id": 57084581, "question_id": 57084473, "link": "https://stackoverflow.com/questions/57084473/return-rows-with-max-min-values-at-bottom-of-dataframe-python-pandas/57084581#57084581", "title": "Return rows with max/min values at bottom of dataframe (python/pandas)", "body": "<h3>Focus on the index values</h3>\n\n<p>And use one <code>loc</code></p>\n\n<pre><code>i = df.col2.idxmin()\ndf.loc[[*df.index] + [i]]\n\n     col1  col2  col3\n0    blue     2   dog\n1  orange    18   cat\n2   black     6  fish\n0    blue     2   dog\n</code></pre>\n\n<hr>\n\n<p>Same idea but with Numpy and <code>iloc</code></p>\n\n<pre><code>i = np.arange(len(df))\na = df.col2.to_numpy().argmin()\ndf.iloc[np.append(i, a)]\n\n     col1  col2  col3\n0    blue     2   dog\n1  orange    18   cat\n2   black     6  fish\n0    blue     2   dog\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4159, "user_id": 8212173, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5ApXfoDEeNA/AAAAAAAAAAI/AAAAAAAAADc/9wpTVfHMarU/photo.jpg?sz=128", "display_name": "amanb", "link": "https://stackoverflow.com/users/8212173/amanb"}, "is_accepted": false, "score": 0, "last_activity_date": 1563774617, "last_edit_date": 1563774617, "creation_date": 1563401181, "answer_id": 57084590, "question_id": 57084473, "link": "https://stackoverflow.com/questions/57084473/return-rows-with-max-min-values-at-bottom-of-dataframe-python-pandas/57084590#57084590", "title": "Return rows with max/min values at bottom of dataframe (python/pandas)", "body": "<p>Here is another way:</p>\n\n<pre><code>In [30]: df.append(df.loc[lambda x:x.col2 == x.col2.min()]).reset_index(drop=True)\nOut[30]:\n     col1  col2  col3\n0    blue     2   dog\n1  orange    18   cat\n2   black     6  fish\n3    blue     2   dog\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 10631559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57a38500cd182a45dbaea8d6aca79af8?s=128&d=identicon&r=PG&f=1", "display_name": "BeansMama", "link": "https://stackoverflow.com/users/10631559/beansmama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 0, "accepted_answer_id": 57084507, "answer_count": 6, "score": 4, "last_activity_date": 1563774617, "creation_date": 1563400176, "question_id": 57084473, "link": "https://stackoverflow.com/questions/57084473/return-rows-with-max-min-values-at-bottom-of-dataframe-python-pandas", "title": "Return rows with max/min values at bottom of dataframe (python/pandas)", "body": "<p>I want to write a function that can look at a dataframe, find the max or min value in a specified column, then return the entire datafrane with the row(s) containing the max or min value at the bottom.</p>\n\n<p>I have made it so that the rows with the max or min value alone get returned.</p>\n\n<pre><code>def findAggregate(df, transType, columnName=None):\n\n    if transType == 'max1Column':\n        return df[df[columnName] == df[columnName].max()]\n\n    elif transType == 'min1Column':\n        return df[df[columnName] == df[columnName].min()]\n</code></pre>\n\n<p>Given the dataframe below, I want to check col2 for the MIN value</p>\n\n<p>Original Dataframe:</p>\n\n<pre><code>col1     col2     col3\nblue     2        dog\norange   18       cat\nblack    6        fish\n</code></pre>\n\n<p>Expected output:</p>\n\n<pre><code>col1     col2     col3\nblue     2        dog\norange   18       cat\nblack    6        fish\nblue     2        dog\n</code></pre>\n\n<p>Actual output:</p>\n\n<pre><code>col1     col2     col3\nblue     2        dog\n</code></pre>\n"}, {"tags": ["python", "spacy"], "answers": [{"tags": [], "owner": {"reputation": 11172, "user_id": 74243, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ddcb67dc4378c7d82d4ea8de932f541e?s=128&d=identicon&r=PG", "display_name": "Martin Peck", "link": "https://stackoverflow.com/users/74243/martin-peck"}, "is_accepted": false, "score": 1, "last_activity_date": 1563402539, "creation_date": 1563402539, "answer_id": 57084781, "question_id": 57084413, "link": "https://stackoverflow.com/questions/57084413/how-to-reduce-the-install-size-of-a-spacy-based-python-application/57084781#57084781", "title": "How to Reduce the Install Size of a Spacy based Python Application", "body": "<p>I raised this as an issue against the spacy project on GitHub, and it looks like this is a known issue, and that there are plans to address the size of spacy installs.</p>\n\n<p><a href=\"https://github.com/explosion/spaCy/issues/3983\" rel=\"nofollow noreferrer\">https://github.com/explosion/spaCy/issues/3983</a></p>\n\n<p>So, at this time, there isn't a supported/recommended way to reduce the size of the package install.</p>\n"}, {"comments": [{"owner": {"reputation": 11172, "user_id": 74243, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ddcb67dc4378c7d82d4ea8de932f541e?s=128&d=identicon&r=PG", "display_name": "Martin Peck", "link": "https://stackoverflow.com/users/74243/martin-peck"}, "edited": false, "score": 0, "creation_date": 1563405775, "post_id": 57085004, "comment_id": 100693360, "body": "Yep. I&#39;m going to try this, but as you say...not 100% sure I&#39;d have a working install after that."}], "tags": [], "owner": {"reputation": 2068, "user_id": 402891, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3ba541a3204f4ea4b274049a152489c5?s=128&d=identicon&r=PG", "display_name": "interfect", "link": "https://stackoverflow.com/users/402891/interfect"}, "is_accepted": false, "score": 1, "last_activity_date": 1563404391, "creation_date": 1563404391, "answer_id": 57085004, "question_id": 57084413, "link": "https://stackoverflow.com/questions/57084413/how-to-reduce-the-install-size-of-a-spacy-based-python-application/57085004#57085004", "title": "How to Reduce the Install Size of a Spacy based Python Application", "body": "<p>If you tack an <code>&amp;&amp; rm -Rf foo1/.venv/lib/python3.7/site-packages/spacy/lang/tr</code> onto the end of the <code>RUN pip install spacy</code> command that I presume you have in your <code>Dockerfile</code>, you can delete all the files for that language without letting them get saved into a layer in the Docker container.</p>\n\n<p>I'm not sure if you would still have a working <code>spacy</code> after just ripping out the languages you didn't want, and you'd have to basically repeat the command for each language you <em>don't</em> want to keep, but it might work as a workaround until spacy makes itself smaller or more modular.</p>\n"}], "owner": {"reputation": 11172, "user_id": 74243, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ddcb67dc4378c7d82d4ea8de932f541e?s=128&d=identicon&r=PG", "display_name": "Martin Peck", "link": "https://stackoverflow.com/users/74243/martin-peck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 564, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1563404391, "creation_date": 1563399813, "last_edit_date": 1563400813, "question_id": 57084413, "link": "https://stackoverflow.com/questions/57084413/how-to-reduce-the-install-size-of-a-spacy-based-python-application", "title": "How to Reduce the Install Size of a Spacy based Python Application", "body": "<p>I'm building a docker container that contains a the Python library <a href=\"https://spacy.io/\" rel=\"nofollow noreferrer\">spacy</a>. I'm now trying to reduce the size of this container, and spacy appears to be the main contributor to the disk size.</p>\n\n<p>Without any models installed, and without any other code/dependencies etc, spacy consumes around 500MB of disk when installed! Does anyone have any useful hints/tips on installing spacy in a disk-space-friendly manner. </p>\n\n<p>My repro steps are:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>mkdir foo1                  # create a folder \ncd foo1                     # change directory\npython3 -m venv .venv       # create virtual environment\nsource .venv/bin/activate   # activate virtual environment\npip install --upgrade pip   # upgrade pip\npip install spacy           # install spacy\n</code></pre>\n\n<p>After doing this, I then navigate into the following folder...</p>\n\n<p><code>foo1/.venv/lib/python3.7/site-packages</code></p>\n\n<p>... and can see that the spacy folder is very large:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ du -sh spacy\n425M    spacy\n</code></pre>\n\n<p>Specifically, it's the language folder that's large:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ du -sh spacy/lang\n401M spacy/lang\n</code></pre>\n\n<p>There are 52 languages in that folder, and for many situations I only care about one or two languages. Specifically, for my current situation, that's English.</p>\n\n<p>When I look at the sizes, English is the 14th largest (only showing the top 14 in this list)...</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ du -sH spacy/lang/* | sort -n -r \n\n142024 spacy/lang/tr\n86608 spacy/lang/pt\n78368 spacy/lang/nb\n76592 spacy/lang/da\n74840 spacy/lang/sv\n60672 spacy/lang/ca\n50880 spacy/lang/es\n48296 spacy/lang/fr\n41688 spacy/lang/de\n36960 spacy/lang/nl\n34008 spacy/lang/it\n32632 spacy/lang/ro\n24160 spacy/lang/lt\n8712 spacy/lang/en  &lt;--- THE ONLY ONE I WANT\n</code></pre>\n\n<p>Is there a spacy-specifc way of installing <code>spacy</code> without all of these languages?</p>\n\n<p>I can hack around post-install, but is there a safer way to install fewer languages?</p>\n\n<p>Versions installed, on MacOS, by the above steps are as follows:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ pip freeze\nblis==0.2.4\ncertifi==2019.6.16\nchardet==3.0.4\ncymem==2.0.2\nidna==2.8\nmurmurhash==1.0.2\nnumpy==1.16.4\nplac==0.9.6\npreshed==2.0.1\nrequests==2.22.0\nspacy==2.1.6\nsrsly==0.0.7\nthinc==7.0.8\ntqdm==4.32.2\nurllib3==1.25.3\nwasabi==0.2.2\n\n$ python --version\nPython 3.7.4\n</code></pre>\n"}, {"tags": ["python", "cassandra", "gremlin", "tinkerpop", "janusgraph"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 11799529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HxEHW.png?s=128&g=1", "display_name": "robin214", "link": "https://stackoverflow.com/users/11799529/robin214"}, "edited": false, "score": 0, "creation_date": 1565437203, "post_id": 57114362, "comment_id": 101359925, "body": "Thank you Stephen for your answer! I am using a relatively new, well equipped machine, so I think there can be no issue regarding this. I will regardless try to increase the time as you suggest (although I think the issue is elsewhere). Thanks again for your elaborate answer!"}], "tags": [], "owner": {"reputation": 39402, "user_id": 1831717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd9d045ca36173a4db8c870cd8ab7eb6?s=128&d=identicon&r=PG", "display_name": "stephen mallette", "link": "https://stackoverflow.com/users/1831717/stephen-mallette"}, "is_accepted": true, "score": 1, "last_activity_date": 1563545720, "creation_date": 1563545720, "answer_id": 57114362, "question_id": 57084389, "link": "https://stackoverflow.com/questions/57084389/unable-to-list-all-vertices-present-in-janusgraph-with-tolist-using-gremlin/57114362#57114362", "title": "Unable to list all vertices present in Janusgraph with &quot;.toList()&quot; using Gremlinpython", "body": "<p>Well, the error is indicating the problem:</p>\n\n<pre><code>A timeout occurred during traversal evaluation of [RequestMessage\n    {, requestId=d56cce63-77f3-4c1f-9c14-3f5f33d4a67b, op='bytecode', processor='traversal', args={gremlin=[[], [V(), has(val, 2)]], aliases={g=g}}}]\n     - consider increasing the limit given to scriptEvaluationTimeout\n</code></pre>\n\n<p>Of course, assuming the default <code>scriptEvaluationTimeout</code> of 30 seconds, it should not take that long to return a result of the query you are executing unless you have a significant amount of vertices and you do not have an index on \"val\". So given that your graph is really small, I don't see why such an execution would take so long.</p>\n\n<p>I don't know what you're environment is like that you're testing on, but if you're running all of JanusGraph/Cassandra on a highly underpowered machine I guess something highly resource starved could take a long time to execute. I think that I would try to increase the <code>scriptEvaluationTimeout</code> as suggested in the error to see just how high you have to increase it to get the result back. If you don't have indices on <code>val</code> you probably should add those anyway (though I don't think that's your problem unless that vertex count is bigger than your code is indicating).</p>\n"}], "owner": {"reputation": 15, "user_id": 11799529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HxEHW.png?s=128&g=1", "display_name": "robin214", "link": "https://stackoverflow.com/users/11799529/robin214"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 494, "favorite_count": 0, "accepted_answer_id": 57114362, "answer_count": 1, "score": 0, "last_activity_date": 1563545720, "creation_date": 1563399661, "last_edit_date": 1563430390, "question_id": 57084389, "link": "https://stackoverflow.com/questions/57084389/unable-to-list-all-vertices-present-in-janusgraph-with-tolist-using-gremlin", "title": "Unable to list all vertices present in Janusgraph with &quot;.toList()&quot; using Gremlinpython", "body": "<p>I have tried testing what is in a graph that I created to see whether nodes were indeed created.</p>\n\n<p>The code to create a small graph for testing:</p>\n\n<pre><code>from gremlin_python import statics\nfrom gremlin_python.structure.graph import Graph\nfrom gremlin_python.process.graph_traversal import __\nfrom gremlin_python.process.strategies import *\nfrom gremlin_python.driver.driver_remote_connection import DriverRemoteConnection\n\ngraph = Graph()\ng = graph.traversal().withRemote(DriverRemoteConnection('ws://localhost:8182/gremlin','g'))\n\n# in a loop add nodes and properties to get a small graph for testing\nt = g.addV('testnode').property('val',1)\n    for i in range(2,11):\n    t = g.addV('testnode').property('val', i)\n    t.iterate()\n\n# proceed to create edge (as_ and from_ contain an underscore because as &amp; from are python's reserved words)\ng.V().has(\"val\", 2).as_(\"a\").V().has(\"val\", 4).as_(\"b\").addE(\"link\").property(\"someproperty\", \"abc\").from_(\"a\").to(\"b\").iterate()\n\nlist1 = []\nlist1 = g.V().has(\"val\", 2).toList()\nprint(len(list1))\n</code></pre>\n\n<p>to which I would expect to have the value \"1\" returned in the terminal, which happened correctly while testing previously (and now fails).\nHowever, this returns an error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"test_addingVEs.py\", line 47, in &lt;module&gt;\n    list1 = g.V().has(\"val_i\", 2).toList()\n  File \"/home/user/.local/lib/python3.5/site-packages/gremlin_python/process/traversal.py\", line 52, in toList\n    return list(iter(self))\n  File \"/home/user/.local/lib/python3.5/site-packages/gremlin_python/process/traversal.py\", line 43, in __next__\n    self.traversal_strategies.apply_strategies(self)\n  File \"/home/user/.local/lib/python3.5/site-packages/gremlin_python/process/traversal.py\", line 346, in apply_strategies\n    traversal_strategy.apply(traversal)\n  File \"/home/user/.local/lib/python3.5/site-packages/gremlin_python/driver/remote_connection.py\", line 143, in apply\n    remote_traversal = self.remote_connection.submit(traversal.bytecode)\n  File \"/home/user/.local/lib/python3.5/site-packages/gremlin_python/driver/driver_remote_connection.py\", line 54, in submit\n    results = result_set.all().result()\n  File \"/usr/lib/python3.5/concurrent/futures/_base.py\", line 405, in result\n    return self.__get_result()\n  File \"/usr/lib/python3.5/concurrent/futures/_base.py\", line 357, in __get_result\n    raise self._exception\n  File \"/home/user/.local/lib/python3.5/site-packages/gremlin_python/driver/resultset.py\", line 81, in cb\n    f.result()\n  File \"/usr/lib/python3.5/concurrent/futures/_base.py\", line 398, in result\n    return self.__get_result()\n  File \"/usr/lib/python3.5/concurrent/futures/_base.py\", line 357, in __get_result\n    raise self._exception\n  File \"/usr/lib/python3.5/concurrent/futures/thread.py\", line 55, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/home/user/.local/lib/python3.5/site-packages/gremlin_python/driver/connection.py\", line 77, in _receive\n    self._protocol.data_received(data, self._results)\n  File \"/home/user/.local/lib/python3.5/site-packages/gremlin_python/driver/protocol.py\", line 98, in data_received\n    \"{0}: {1}\".format(status_code, message[\"status\"][\"message\"]))\ngremlin_python.driver.protocol.GremlinServerError: 598: \n    A timeout occurred during traversal evaluation of [RequestMessage\n    {, requestId=d56cce63-77f3-4c1f-9c14-3f5f33d4a67b, op='bytecode', processor='traversal', args={gremlin=[[], [V(), has(val, 2)]], aliases={g=g}}}]\n     - consider increasing the limit given to scriptEvaluationTimeout\n</code></pre>\n\n<p>The .toList() function did work previously, but not anymore. \nIs there anything wrong in my code, or should I look elsewhere for a possible cause?</p>\n"}, {"tags": ["python", "pointers", "annotations", "ctypes"], "comments": [{"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1563403162, "post_id": 57084381, "comment_id": 100692756, "body": "<code>char_buffer: POINTER(c_char)</code> or <code>char_buffer: c_char_p</code>?"}, {"owner": {"reputation": 750, "user_id": 11163122, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xq3vi.png?s=128&g=1", "display_name": "Intrastellar Explorer", "link": "https://stackoverflow.com/users/11163122/intrastellar-explorer"}, "reply_to_user": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1563551891, "post_id": 57084381, "comment_id": 100750576, "body": "@CristiFati using <code>ipython</code> I tried the following: <code>isinstance(create_string_buffer(16), POINTER(c_char))</code> --&gt; output is <code>False</code>, and <code>isinstance(create_string_buffer(16), c_char_p)</code> --&gt; output is <code>False</code>.  Am I off base?  I think those two may not work"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1563553140, "post_id": 57084381, "comment_id": 100751184, "body": "Sorry, I was wrong. It&#39;s <code>ctypes.c_char * 16</code>. <code>isinstance(ctypes.create_string_buffer(16), ctypes.c_char * 16)</code> will return <i>True</i>."}], "answers": [{"tags": [], "owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "is_accepted": true, "score": 1, "last_activity_date": 1563570207, "creation_date": 1563570207, "answer_id": 57119571, "question_id": 57084381, "link": "https://stackoverflow.com/questions/57084381/how-to-annotate-pointer-to-c-character-array-in-method-signature/57119571#57119571", "title": "How to annotate pointer to C character array in method signature?", "body": "<p>According to <a href=\"https://docs.python.org/3/library/ctypes.html#ctypes.create_string_buffer\" rel=\"nofollow noreferrer\">[Python 3.Docs]: ctypes.<strong>create_string_buffer</strong>(<em>init_or_size, size=None</em>)</a>:</p>\n\n<blockquote>\n  <p>This function creates a mutable character buffer. The returned object is a ctypes array of <a href=\"https://docs.python.org/3/library/ctypes.html#ctypes.c_char\" rel=\"nofollow noreferrer\">c_char</a>.</p>\n</blockquote>\n\n<p>Example:</p>\n\n\n\n<blockquote>\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; import ctypes\n&gt;&gt;&gt;\n&gt;&gt;&gt; CharArr16 = ctypes.c_char * 16\n&gt;&gt;&gt; s = ctypes.create_string_buffer(16)\n&gt;&gt;&gt;\n&gt;&gt;&gt; isinstance(s, CharArr16)\nTrue\n&gt;&gt;&gt; isinstance(s, ctypes.c_char * 15)\nFalse\n&gt;&gt;&gt; isinstance(s, ctypes.c_char * 17)\nFalse\n&gt;&gt;&gt;\n&gt;&gt;&gt; # A more general form, but it WILL FAIL for non array instances\n...\n&gt;&gt;&gt; isinstance(s, s._type_ * s._length_)\nTrue\n&gt;&gt;&gt;\n&gt;&gt;&gt; # A more general form that WILL WORK\n...\n&gt;&gt;&gt; issubclass(CharArr16, ctypes.Array)\nTrue\n&gt;&gt;&gt; isinstance(s, ctypes.Array)\nTrue\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 750, "user_id": 11163122, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xq3vi.png?s=128&g=1", "display_name": "Intrastellar Explorer", "link": "https://stackoverflow.com/users/11163122/intrastellar-explorer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "accepted_answer_id": 57119571, "answer_count": 1, "score": 1, "last_activity_date": 1563570207, "creation_date": 1563399629, "last_edit_date": 1563498779, "question_id": 57084381, "link": "https://stackoverflow.com/questions/57084381/how-to-annotate-pointer-to-c-character-array-in-method-signature", "title": "How to annotate pointer to C character array in method signature?", "body": "<p>I am writing a wrapper for a C library in Python.  I am trying to properly annotate all of the methods, so my IDE can help me catch errors.  I am stuck annotating one method, can you help me figure out the proper annotation?</p>\n\n<p>One of the methods in the C library works as follows:</p>\n\n<ol>\n<li><p>Takes one arg: pointer to a character buffer</p>\n\n<ul>\n<li>Buffer is made via: <code>char_buffer = ctypes.create_string_buffer(16)</code></li>\n</ul></li>\n<li><p>Populates the char buffer with the output value</p>\n\n<ul>\n<li>Done via <code>CMethod(char_buffer)</code></li>\n</ul></li>\n</ol>\n\n<p>One then parses the buffer by doing something like <code>char_buffer.value</code>.</p>\n\n<p>How can I annotate the wrapper method to look for a pointer to a character buffer?  Currently, I have the below, but I think this is incorrect, since <code>POINTER</code> seems to be just a function in <code>_ctypes.py</code>.</p>\n\n<pre><code>from ctypes import POINTER\n\ndef wrapped_method(char_buffer: POINTER):\n    CMethod(char_buffer)\n</code></pre>\n"}, {"tags": ["python", "pandas", "numpy", "data-manipulation"], "comments": [{"owner": {"reputation": 4521, "user_id": 10041823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gJ8EW.jpg?s=128&g=1", "display_name": "Alexandre B.", "link": "https://stackoverflow.com/users/10041823/alexandre-b"}, "edited": false, "score": 0, "creation_date": 1563487288, "post_id": 57084371, "comment_id": 100727317, "body": "Why the value of <code>Col_Z</code> in the last row of the desired output is <code>0.67</code> ? The first row of df2 meets the condition"}, {"owner": {"reputation": 65, "user_id": 11014461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3e78ce142034d27c4f82f12041fb7a2?s=128&d=identicon&r=PG&f=1", "display_name": "Rawss24", "link": "https://stackoverflow.com/users/11014461/rawss24"}, "reply_to_user": {"reputation": 4521, "user_id": 10041823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gJ8EW.jpg?s=128&g=1", "display_name": "Alexandre B.", "link": "https://stackoverflow.com/users/10041823/alexandre-b"}, "edited": false, "score": 0, "creation_date": 1563487626, "post_id": 57084371, "comment_id": 100727416, "body": "Ohh yeah. I am sorry, That&#39;s my mistake. I have corrected it."}], "answers": [{"comments": [{"owner": {"reputation": 4521, "user_id": 10041823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gJ8EW.jpg?s=128&g=1", "display_name": "Alexandre B.", "link": "https://stackoverflow.com/users/10041823/alexandre-b"}, "reply_to_user": {"reputation": 65, "user_id": 11014461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3e78ce142034d27c4f82f12041fb7a2?s=128&d=identicon&r=PG&f=1", "display_name": "Rawss24", "link": "https://stackoverflow.com/users/11014461/rawss24"}, "edited": false, "score": 0, "creation_date": 1563465070, "post_id": 57084747, "comment_id": 100718054, "body": "Good to know. Can you update the question with a more relevant example (number of rows different). Not sure to understand how the condition is computed, can you explain it ?"}, {"owner": {"reputation": 65, "user_id": 11014461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3e78ce142034d27c4f82f12041fb7a2?s=128&d=identicon&r=PG&f=1", "display_name": "Rawss24", "link": "https://stackoverflow.com/users/11014461/rawss24"}, "edited": false, "score": 0, "creation_date": 1563466367, "post_id": 57084747, "comment_id": 100718733, "body": "Sorry I accidentally deleted the last comment. I have updated the dataframe 2 table in my explanation."}, {"owner": {"reputation": 65, "user_id": 11014461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3e78ce142034d27c4f82f12041fb7a2?s=128&d=identicon&r=PG&f=1", "display_name": "Rawss24", "link": "https://stackoverflow.com/users/11014461/rawss24"}, "edited": false, "score": 0, "creation_date": 1563466398, "post_id": 57084747, "comment_id": 100718747, "body": "I can&#39;t concatenate and apply condition because firstly, the size of the two dataframes is not equal and that will generate huge number of unrequired NaN values plus the dataframe 2 is like a lookup table, the value from dataframe 1 Col_B or Col_D, not necessarily be in the same index of dataframe 2 Col&#39;s and hence it needs to scan the whole dataframe 2 before finalizing which Col_A and Col_C and Col_Z needs to be returned."}, {"owner": {"reputation": 65, "user_id": 11014461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3e78ce142034d27c4f82f12041fb7a2?s=128&d=identicon&r=PG&f=1", "display_name": "Rawss24", "link": "https://stackoverflow.com/users/11014461/rawss24"}, "edited": false, "score": 0, "creation_date": 1563466519, "post_id": 57084747, "comment_id": 100718803, "body": "I meant to say was that the rows in dataframe 2 can be in any row and vale of dataframe 1 table needs to search where it is and pull out the corresponding values of Col_A, Col_C, Col_Z"}, {"owner": {"reputation": 4521, "user_id": 10041823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gJ8EW.jpg?s=128&g=1", "display_name": "Alexandre B.", "link": "https://stackoverflow.com/users/10041823/alexandre-b"}, "reply_to_user": {"reputation": 65, "user_id": 11014461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3e78ce142034d27c4f82f12041fb7a2?s=128&d=identicon&r=PG&f=1", "display_name": "Rawss24", "link": "https://stackoverflow.com/users/11014461/rawss24"}, "edited": false, "score": 0, "creation_date": 1563483117, "post_id": 57084747, "comment_id": 100725851, "body": "So the question is how are you joining the both dataframe ?"}, {"owner": {"reputation": 65, "user_id": 11014461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3e78ce142034d27c4f82f12041fb7a2?s=128&d=identicon&r=PG&f=1", "display_name": "Rawss24", "link": "https://stackoverflow.com/users/11014461/rawss24"}, "edited": false, "score": 0, "creation_date": 1563484290, "post_id": 57084747, "comment_id": 100726305, "body": "No. I can definitely concatenate the two dataframes. Firstl, it would not make sense to join them, my point is that both dataframes have unequal number of rows and value of Col_B, say in this example is 11, so it should look in dataframe 2 in the Col_X and Col_Y, if the 11 is between the value of Col_X and Col_Y then it should return the values of Col_A, Col_C and Col_Z.&lt;br/&gt; Note:-It is not necessary that the both dataframes have same index."}, {"owner": {"reputation": 4521, "user_id": 10041823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gJ8EW.jpg?s=128&g=1", "display_name": "Alexandre B.", "link": "https://stackoverflow.com/users/10041823/alexandre-b"}, "reply_to_user": {"reputation": 65, "user_id": 11014461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3e78ce142034d27c4f82f12041fb7a2?s=128&d=identicon&r=PG&f=1", "display_name": "Rawss24", "link": "https://stackoverflow.com/users/11014461/rawss24"}, "edited": false, "score": 0, "creation_date": 1563484562, "post_id": 57084747, "comment_id": 100726399, "body": "<i>if the 11 is between the value of Col_X and Col_Y</i> not make sense. 11 is a number while <code>Col_X</code> and <code>Col_Y</code> are <code>list</code>. If you want to compare a number with a list, you should either define an aggragation rule (min, max, mean) or look at <a href=\"https://stackoverflow.com/questions/19389490/how-do-pythons-any-and-all-functions-work\"><code>any</code> and <code>all</code></a>."}, {"owner": {"reputation": 65, "user_id": 11014461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3e78ce142034d27c4f82f12041fb7a2?s=128&d=identicon&r=PG&f=1", "display_name": "Rawss24", "link": "https://stackoverflow.com/users/11014461/rawss24"}, "edited": false, "score": 0, "creation_date": 1563484849, "post_id": 57084747, "comment_id": 100726501, "body": "Okay just consider one row of dataframe 1 and one row of dataframe 2, that is the first row in each case. when we look in the condition, it says that value of Col_B should be in between the values present in Col_X and Col_Y. 11 in this case is value in Col_B and that is exactly in between the 10 and 15 which is the value of Col_X and Col_Y. Hence return corresponding value of Col_A, Col_C, Col_Z where this condition matched. This was pretty easy case where everything was in first row but imagine if the value of Col_X and Col_Y was not present in 1st row and instead it was present in, say 100"}, {"owner": {"reputation": 65, "user_id": 11014461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3e78ce142034d27c4f82f12041fb7a2?s=128&d=identicon&r=PG&f=1", "display_name": "Rawss24", "link": "https://stackoverflow.com/users/11014461/rawss24"}, "edited": false, "score": 0, "creation_date": 1563484903, "post_id": 57084747, "comment_id": 100726525, "body": "So, I want that value of Col_B, that is 11, should lookup all the values of dataframe 2&#39;s Col_X and Col_Y, till it meets the criteria"}, {"owner": {"reputation": 4521, "user_id": 10041823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gJ8EW.jpg?s=128&g=1", "display_name": "Alexandre B.", "link": "https://stackoverflow.com/users/10041823/alexandre-b"}, "reply_to_user": {"reputation": 65, "user_id": 11014461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3e78ce142034d27c4f82f12041fb7a2?s=128&d=identicon&r=PG&f=1", "display_name": "Rawss24", "link": "https://stackoverflow.com/users/11014461/rawss24"}, "edited": false, "score": 0, "creation_date": 1563485066, "post_id": 57084747, "comment_id": 100726590, "body": "So you select the first row that meets the condition ?"}, {"owner": {"reputation": 65, "user_id": 11014461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3e78ce142034d27c4f82f12041fb7a2?s=128&d=identicon&r=PG&f=1", "display_name": "Rawss24", "link": "https://stackoverflow.com/users/11014461/rawss24"}, "edited": false, "score": 1, "creation_date": 1563485143, "post_id": 57084747, "comment_id": 100726617, "body": "Yes, but as per my case, there would be always one such row only everytime"}, {"owner": {"reputation": 65, "user_id": 11014461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3e78ce142034d27c4f82f12041fb7a2?s=128&d=identicon&r=PG&f=1", "display_name": "Rawss24", "link": "https://stackoverflow.com/users/11014461/rawss24"}, "edited": false, "score": 0, "creation_date": 1563551370, "post_id": 57084747, "comment_id": 100750311, "body": "Thank you for your new answer. In your new answer, you have mentioned one of the argument as df2=df2. I don&#39;t think that will work and I believe it will give <code>TypeError</code>."}, {"owner": {"reputation": 4521, "user_id": 10041823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gJ8EW.jpg?s=128&g=1", "display_name": "Alexandre B.", "link": "https://stackoverflow.com/users/10041823/alexandre-b"}, "reply_to_user": {"reputation": 65, "user_id": 11014461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3e78ce142034d27c4f82f12041fb7a2?s=128&d=identicon&r=PG&f=1", "display_name": "Rawss24", "link": "https://stackoverflow.com/users/11014461/rawss24"}, "edited": false, "score": 0, "creation_date": 1563551899, "post_id": 57084747, "comment_id": 100750580, "body": "I use <code>df2=df2</code> to pass <code>df2</code> as 2nd argument of <code>getCondition</code> and <code>getCondition2</code>. You&#39;re right, the documentation suggests using <code>args=[...]</code>. It&#39;s done in the update. Thank you !"}, {"owner": {"reputation": 65, "user_id": 11014461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3e78ce142034d27c4f82f12041fb7a2?s=128&d=identicon&r=PG&f=1", "display_name": "Rawss24", "link": "https://stackoverflow.com/users/11014461/rawss24"}, "edited": false, "score": 0, "creation_date": 1563554536, "post_id": 57084747, "comment_id": 100751736, "body": "I tried your new answer with getcondition2 function, it is working fine with small datasets. Thank you for that. It is much more smaller in code than my new answer. But unfortunately, it sure does taking a lot amount of time- same as mine- as I have to run it over 400 million records"}], "tags": [], "owner": {"reputation": 4521, "user_id": 10041823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gJ8EW.jpg?s=128&g=1", "display_name": "Alexandre B.", "link": "https://stackoverflow.com/users/10041823/alexandre-b"}, "is_accepted": false, "score": 2, "last_activity_date": 1563551814, "last_edit_date": 1563551814, "creation_date": 1563402324, "answer_id": 57084747, "question_id": 57084371, "link": "https://stackoverflow.com/questions/57084371/how-to-generate-a-new-dataframe-in-python-by-considering-conditions-from-other-d/57084747#57084747", "title": "How to generate a new dataframe in python by considering conditions from other dataframes?", "body": "<p><strong>New answer</strong>:</p>\n\n<p>You have two embbeded loops. The first one is always a full loop. But not the second. So the question is how to improve the efficiency of the sub partial loop. </p>\n\n<p>Here, I give you two ways to perform the second loop:</p>\n\n<ul>\n<li>The first considers the dataset as a whole, processing all the data and select the interesting values</li>\n<li>The second iterates the rows till matching the condition. </li>\n</ul>\n\n<p>This <a href=\"https://stackoverflow.com/questions/16476924/how-to-iterate-over-rows-in-a-dataframe-in-pandas\">discussion</a> might give you some insights on how to perform the iterations.</p>\n\n<pre><code># Import module\nimport numpy as np\n\ndf1 = pd.DataFrame([[\"A\", 11,  \"B\", 20],\n                    [\"A\", 11,  \"C\", 24],\n                    [\"B\", 14,  \"R\", 32]],\n                   columns=[\"Col_A\", \"Col_B\", \"Col_C\", \"Col_D\"])\ndf2 = pd.DataFrame([[10, 15,  16, 21, 0.99],\n                    [10, 15,  17, 22, 0.89],\n                    [11, 15,  30, 35, 0.67]],\n                   columns=[\"Col_X\", \"Col_Y\", \"Col_P\", \"Col_Q\", \"Col_Z\"])\n\ndef getCondition(row, df2):\n    # Iterate df2 till a row meets the condition\n    for _, row_df2 in df2.iterrows():\n        if row_df2.Col_X &lt;= row.Col_B and row.Col_B &lt; row_df2.Col_Y \\\n            and row_df2.Col_P &lt;= row.Col_D and row.Col_D &lt; row_df2.Col_Q:\n            return pd.Series([row.Col_A, row.Col_C, row_df2.Col_Z])\n    return np.NaN\n\n\ndef getCondition2(row, df2):\n    # Find all rows matching the condition and select the first\n    condition = ((df2.Col_X &lt;= row.Col_B) &amp; (row.Col_B &lt; df2.Col_Y)\\\n        &amp; (df2.Col_P &lt;= row.Col_D) &amp; (row.Col_D &lt; df2.Col_Q))\n    if sum(condition) &gt; 0:\n        return pd.Series([row.Col_A, row.Col_C, df2.Col_Z[condition].iloc[0]])\n    return np.NaN\n\n\n# Apply the condition\noutput = df1.apply(getCondition2, args=[df2], axis=1)\nprint(output)\n#      0    1     2\n# 0    A    B  0.99\n# 1  NaN  NaN   NaN\n# 2    B    R  0.67\n</code></pre>\n\n<p><strong>Old answer</strong>:</p>\n\n<p>You can do this by considering the data set as a whole.</p>\n\n<ul>\n<li>Firstly, for more convenience, I suggest you to <strong>join</strong> your two dataset as one dataset. You can do it with the <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.merge.html\" rel=\"nofollow noreferrer\"><code>merge</code></a> function or just <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.concat.html\" rel=\"nofollow noreferrer\"><code>concat</code></a>. Here, I use <code>concat</code> since another solution uses <code>merge</code>. To be clear with what there performing, you can have a look at <a href=\"https://pandas.pydata.org/pandas-docs/stable/user_guide/merging.html\" rel=\"nofollow noreferrer\">this</a>.</li>\n<li>Then, you can define you condition on the whole columns. Take care of the <code>and</code> operator that becomes <code>&amp;</code>.</li>\n<li><p>Finally, you can call the <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.where.html\" rel=\"nofollow noreferrer\"><code>where</code></a> function that returns <code>Nan</code> when the condition isn't satisfied.</p></li>\n<li><p>To fit the desired output, you can filter the columns using <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.iloc.html\" rel=\"nofollow noreferrer\"><code>iloc</code></a> or just calling the columns name.</p></li>\n</ul>\n\n<p>Here the code:</p>\n\n<pre><code># Import module\nimport pandas as pd\n\ndf1 = pd.DataFrame([[\"A\", 11,  \"B\", 20],\n                    [\"A\", 11,  \"C\", 24],\n                    [\"B\", 14,  \"R\", 19]],\n                   columns=[\"Col_A\", \"Col_B\", \"Col_C\", \"Col_D\"])\ndf2 = pd.DataFrame([[10, 15,  16, 21, 0.99],\n                    [10, 15,  17, 22, 0.89],\n                    [11, 15,  16, 20, 0.67]],\n                   columns=[\"Col_X\", \"Col_Y\", \"Col_P\", \"Col_Q\", \"Col_Z\"])\n\n# Concat the dataframe\ndf = pd.concat([df1, df2], axis=1)\nprint(df)\n\n# Define the conditions\ncondition_col_b = ((df.Col_X &lt;= df.Col_B) &amp; (df.Col_B &lt; df.Col_Y))\ncondition_col_d = ((df.Col_P &lt;= df.Col_D) &amp; (df.Col_D &lt; df.Col_Q))\n\nprint(condition_col_b &amp; condition_col_d)\n# 0     True\n# 1    False\n# 2     True\n\n# Apply the condition\noutput = df.where(condition_col_b &amp; condition_col_d)\nprint(output)\n#   Col_A  Col_B Col_C  Col_D  Col_X  Col_Y  Col_P  Col_Q  Col_Z\n# 0     A   11.0     B   20.0   10.0   15.0   16.0   21.0   0.99\n# 1   NaN    NaN   NaN    NaN    NaN    NaN    NaN    NaN    NaN\n# 2     B   14.0     R   19.0   11.0   15.0   16.0   20.0   0.67\n\n# Filter output\nprint(output[['Col_A', 'Col_C', 'Col_Z']])\n#   Col_A Col_C  Col_Z\n# 0     A     B   0.99\n# 1   NaN   NaN    NaN\n# 2     B     R   0.67\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 65, "user_id": 11014461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3e78ce142034d27c4f82f12041fb7a2?s=128&d=identicon&r=PG&f=1", "display_name": "Rawss24", "link": "https://stackoverflow.com/users/11014461/rawss24"}, "is_accepted": true, "score": 0, "last_activity_date": 1564772837, "last_edit_date": 1564772837, "creation_date": 1563554198, "answer_id": 57116508, "question_id": 57084371, "link": "https://stackoverflow.com/questions/57084371/how-to-generate-a-new-dataframe-in-python-by-considering-conditions-from-other-d/57116508#57116508", "title": "How to generate a new dataframe in python by considering conditions from other dataframes?", "body": "<p>After a few trials, I was able to solve my own code. Here it is - the rectified one:</p>\n\n<pre><code>df3 = {}\nCol_A = []\nCol_C = []\nCol_Z = []\nfor i in df1.iterrows():    \n    value = df2[(i[1][1] &gt; df2['Col_X'].values) &amp;\n      (i[1][1] &lt; df2['Col_Y'].values) &amp;\n      (i[1][3] &gt; df2['Col_P'].values) &amp;\n      (i[1][3] &lt; df2['Col_Q'].values)]['Col_Z']\n\n    if value.empty:\n        continue\n    else:\n        Col_Z.append(value)\n        Col_A.append(i[1][0])\n        Col_C.append(i[1][2])\n\ndf3['A'] = Col_A\ndf3['C'] = Col_C\ndf3['Z'] = Col_Z\ndf3 = pd.DataFrame(df3)\n</code></pre>\n\n<p>However, due to the <code>for</code> loop that is iterating over all the rows, this method may not be efficient for large datasets, say for 100-200 million.\nHoping to find some more efficient way!</p>\n"}], "owner": {"reputation": 65, "user_id": 11014461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3e78ce142034d27c4f82f12041fb7a2?s=128&d=identicon&r=PG&f=1", "display_name": "Rawss24", "link": "https://stackoverflow.com/users/11014461/rawss24"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "accepted_answer_id": 57116508, "answer_count": 2, "score": 0, "last_activity_date": 1564772837, "creation_date": 1563399545, "last_edit_date": 1563487667, "question_id": 57084371, "link": "https://stackoverflow.com/questions/57084371/how-to-generate-a-new-dataframe-in-python-by-considering-conditions-from-other-d", "title": "How to generate a new dataframe in python by considering conditions from other dataframes?", "body": "<p>I am performing data manipulation in <code>python</code> using <code>pandas</code> on a very large dataset, say 100 million rows. I have two dataframes and wish to generate third dataframe as per the conditions mentioned, the scenario is explained below:<br/><br/>\ndataframe 1:<br/>\nCol_B and Col_D are of <code>int64</code> type</p>\n\n<pre><code>Col_A   Col_B   Col_C   Col_D\n A       11      B       20\n A       11      C       24\n B       14      R       32\n...      ...    ...      ...\n</code></pre>\n\n<p>dataframe 2:<br/>\nCol_Z is of type <code>float64</code> and remaining columns are of <code>int64</code></p>\n\n<pre><code>Col_X   Col_Y   Col_P   Col_Q   Col_Z\n 10      15      16      21      0.99\n 10      15      17      22      0.89\n...     ...     ...     ...      ...\n...     ...     ...     ...      ...\n 11      15      30      35      0.67\n...     ...     ...     ...      ...\n</code></pre>\n\n<p>Condition to be applied:\nConsider only first row of both the dataframe, for the sake of understanding conditions:<br/></p>\n\n<blockquote>\n  <p>if the value of (Col_B is between the value of Col_X and Col_Y) and value of (Col_D is between the value of Col_P and Col_Q) then return the corresponding value of Col_A, Col_C and Col_Z, otherwise return NaN</p>\n</blockquote>\n\n<p>Expected Output (Dataframe 3):</p>\n\n<pre><code>Col_A   Col_C   Col_Z\n A       B       0.99\nNaN     NaN      NaN\n B       R       0.67\n</code></pre>\n\n<p><strong>Note:</strong> This output is generated merely considering if there are only these three rows in dataframes but in actual each value of Dataframe 1 has to scan all of the values in Dataframe 2 until desired conditions is achieved. <br/><br/>\nMy Code:</p>\n\n<pre><code>df3 = {}\nCol_A = []\nCol_C = []\nCol_Z = []\nfor i in df1.iterrows():    \n    value = float(df2[(i[1][1] &gt; df2['Col_X'].values) &amp;\n      (i[1][1] &lt; df2['Col_Y'].values) &amp;\n      (i[1][3] &gt; df2['Col_P'].values) &amp;\n      (i[1][3] &lt; df2['Col_Q'].values)]['Col_Z'])\n\n    if bool(value):\n        Col_Z.append(value)\n        Col_A.append(i[1][0])\n        Col_C.append(i[1][2])\n    else:\n        Col_Z.append(float('NaN'))\n        Col_A.append(float('NaN'))\n        Col_C.append(float('NaN'))\n</code></pre>\n\n<p>This code is working fine uptill the condition is met, as soon as condition does'nt met, it throws a <code>TypeError</code>. Please can any rectify this.<br/><br/>\nAlso, I wanted to know if there is any alternate and efficient way to perform it. Please let me know.  </p>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1563399700, "post_id": 57084349, "comment_id": 100691912, "body": "1) Compare the pandas version in use. Theirs might be newer than yours."}, {"owner": {"reputation": 2427, "user_id": 4044400, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/66e0ff17a11f74087ee15055ce6ab367?s=128&d=identicon&r=PG", "display_name": "Jonathan Bechtel", "link": "https://stackoverflow.com/users/4044400/jonathan-bechtel"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1563400012, "post_id": 57084349, "comment_id": 100692015, "body": "@ImportanceOfBeingErnest - mine is <code>0.23.4</code>"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1563400043, "post_id": 57084349, "comment_id": 100692027, "body": "2) I cannot reproduce this. The <code>color=[&#39;red&#39;, &#39;green&#39;, &#39;blue&#39;]</code> should work as expected, and it does for me on <code>0.24.2</code>."}], "owner": {"reputation": 2427, "user_id": 4044400, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/66e0ff17a11f74087ee15055ce6ab367?s=128&d=identicon&r=PG", "display_name": "Jonathan Bechtel", "link": "https://stackoverflow.com/users/4044400/jonathan-bechtel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 347, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1563399415, "creation_date": 1563399415, "question_id": 57084349, "link": "https://stackoverflow.com/questions/57084349/default-display-of-colors-on-bar-chart-in-matplotlib", "title": "Default Display of Colors on Bar Chart in Matplotlib", "body": "<p>I have an issue with Matplotlib that I can't quite figure out.</p>\n\n<p>If I make a bar chart like so:</p>\n\n<pre><code>df['Embarked'].value_counts().plot(kind='barh');\n</code></pre>\n\n<p>I get this chart as a result:</p>\n\n<p><a href=\"https://i.stack.imgur.com/XHCZC.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XHCZC.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Notice the different colors of each bar.  </p>\n\n<p>Apparently for some of my co-workers, they get different appearances than mine and I'm not sure why it's the case.  </p>\n\n<p>In their case, the bar colors are mono-chromatic.  </p>\n\n<p>Now, on my chart, I can modify bar colors in the following way:</p>\n\n<pre><code>df['Embarked'].value_counts().plot(kind='barh', color=['red', 'green', 'blue']);\n</code></pre>\n\n<p>Which gives me this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/9ndni.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9ndni.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>However, the same people who have monochromatic bar charts also can't use multiple colors in the <code>color</code> argument to any effect.  </p>\n\n<p>Two questions:</p>\n\n<p>1).  What is causing this basic discrepancy in appearance?</p>\n\n<p>2).  For people who have the one-color default, how do they modify the colors of their bar chart?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["python", "xml", "csv"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1563400022, "post_id": 57084319, "comment_id": 100692019, "body": "Is <code>xml_data_to_csv.close()</code> really indented inside the <code>for</code> loop?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1563400105, "post_id": 57084319, "comment_id": 100692043, "body": "The only reason I can think of for the file being empty is that <code>root.findall(&quot;AuditRecord&quot;)</code> is not finding anything."}, {"owner": {"reputation": 1603, "user_id": 5879698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/564d578a2912894d68ed1f822ab5c9c4?s=128&d=identicon&r=PG&f=1", "display_name": "William D. Irons", "link": "https://stackoverflow.com/users/5879698/william-d-irons"}, "edited": false, "score": 2, "creation_date": 1563400146, "post_id": 57084319, "comment_id": 100692058, "body": "The variable &quot;csv_writer&quot; is declared, but then never used. &quot;csvwriter&quot; is used instead. Does this code run without error? If you provide a sample response.xml, others can run it."}, {"owner": {"reputation": 1, "user_id": 11799811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b9373fbde2cba106ad25c93e8dff9ac?s=128&d=identicon&r=PG&f=1", "display_name": "BAndy44", "link": "https://stackoverflow.com/users/11799811/bandy44"}, "edited": false, "score": 0, "creation_date": 1563400725, "post_id": 57084319, "comment_id": 100692195, "body": "I made a couple edits - xml_data_to_csv.close is not indented in my actual code. I also updated my code to change csv_writer to csvwriter, but still same result."}, {"owner": {"reputation": 1, "user_id": 11799811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b9373fbde2cba106ad25c93e8dff9ac?s=128&d=identicon&r=PG&f=1", "display_name": "BAndy44", "link": "https://stackoverflow.com/users/11799811/bandy44"}, "edited": false, "score": 0, "creation_date": 1563401138, "post_id": 57084319, "comment_id": 100692283, "body": "Just added some sample lines from the xml file"}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1563401503, "post_id": 57084319, "comment_id": 100692365, "body": "Read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a> for tips on how to debug your code."}, {"owner": {"reputation": 137436, "user_id": 415448, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/P2vVZ.png?s=128&g=1", "display_name": "Michael Kay", "link": "https://stackoverflow.com/users/415448/michael-kay"}, "edited": false, "score": 0, "creation_date": 1563433527, "post_id": 57084319, "comment_id": 100699901, "body": "The XML you&#39;ve shown us is a complete mess, with unmatched end tags."}, {"owner": {"reputation": 1, "user_id": 11799811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b9373fbde2cba106ad25c93e8dff9ac?s=128&d=identicon&r=PG&f=1", "display_name": "BAndy44", "link": "https://stackoverflow.com/users/11799811/bandy44"}, "edited": false, "score": 0, "creation_date": 1563488282, "post_id": 57084319, "comment_id": 100727575, "body": "The actual document is not like that, I was trying to shorten it down for posting."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11799811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b9373fbde2cba106ad25c93e8dff9ac?s=128&d=identicon&r=PG&f=1", "display_name": "BAndy44", "link": "https://stackoverflow.com/users/11799811/bandy44"}, "edited": false, "score": 0, "creation_date": 1563404958, "post_id": 57085024, "comment_id": 100693173, "body": "Thanks - I realize I was not clear. There are multiple subjectkeys in the xml, but only some have an &quot;AuditRecord&quot;. I only want to pull ones with an audit record, and then for those, I want to pull their info from &quot;SubjectData&quot;, &quot;FormData&quot; and &quot;AuditRecord&quot;."}], "tags": [], "owner": {"reputation": 100, "user_id": 11730402, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3t_Kdw07amg/AAAAAAAAAAI/AAAAAAAAAAc/2aDogfbLlmE/photo.jpg?sz=128", "display_name": "sudohumberto", "link": "https://stackoverflow.com/users/11730402/sudohumberto"}, "is_accepted": false, "score": 0, "last_activity_date": 1563404552, "creation_date": 1563404552, "answer_id": 57085024, "question_id": 57084319, "link": "https://stackoverflow.com/questions/57084319/need-help-figuring-out-why-my-csv-output-is-blank/57085024#57085024", "title": "Need help figuring out why my csv output is blank?", "body": "<p>First of all your xml file has a lot of errors, to me it has to look like:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;root xmlns:p1=\"http://some-url.com\"&gt;\n    &lt;ClinicalData StudyOID=\"SMK-869-002\" MetaDataVersionOID=\"2.0\"&gt;&lt;/ClinicalData&gt;\n    &lt;SubjectData SubjectKey=\"865-015\"&gt;&lt;/SubjectData&gt;\n    &lt;AuditRecord&gt;\n        &lt;FormData p1:Name=\"Medical History\" p1:Started=\"Y\" FormOID=\"mh\" FormRepeatKey=\"0\"/&gt;\n        &lt;FormData p1:Name=\"Medical History\" p1:Started=\"Y\" FormOID=\"mh\" FormRepeatKey=\"1\"/&gt;\n        &lt;p1:QueryAction InitialComment=\"Please enter start date for condition\" UserType=\"User\" UserOID=\"bailey@protocolfirst.com\" Action=\"query\" DateTimeStamp=\"2019-07-12T14:08:43.893Z\"/&gt;\n    &lt;/AuditRecord&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>ElementTree always expects only a single root node, and a well-formed document.</p>\n\n<p>I do not understand very well what your trying to do, but I hope this could help you:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import xml.etree.cElementTree as ET\n\ntree = ET.parse(\"response.xml\")\nroot = tree.getroot()\n\nxml_data_to_csv = open(\"query.csv\", 'w')\n\nlist_head=[]\n\ncount=0\nfor member in root.findall(\"AuditRecord\"):\n    AuditRecord = []\n    Subjectdata = []\n    FormData = []\n    if count == 0:\n        Subjectdata.append(root.find('./SubjectData').attrib['SubjectKey'])\n\n        for formData in root.findall('./AuditRecord/FormData'):\n            #print(formData.attrib['{http://some-url.com}Name'])\n            FormData.append(formData.attrib['{http://some-url.com}Name'])\n\n        AuditRecord.append(root.find('./AuditRecord/{http://some-url.com}QueryAction').attrib['Action'])\n\n        xml_data_to_csv.write(Subjectdata[0] + \",\" + FormData[0] + \",\" + FormData[1] + \",\" + AuditRecord[0])\n        count = count + 1\n\nxml_data_to_csv.close()\n</code></pre>\n\n<p>This will produce a csv file with the following content: </p>\n\n<pre><code>865-015,Medical History,Medical History,query\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11799811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b9373fbde2cba106ad25c93e8dff9ac?s=128&d=identicon&r=PG&f=1", "display_name": "BAndy44", "link": "https://stackoverflow.com/users/11799811/bandy44"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563405695, "creation_date": 1563399189, "last_edit_date": 1563405695, "question_id": 57084319, "link": "https://stackoverflow.com/questions/57084319/need-help-figuring-out-why-my-csv-output-is-blank", "title": "Need help figuring out why my csv output is blank?", "body": "<p>I wrote this code to create a .csv report from an .xml file, but when I open the .csv that's generated it's blank. Feel free to rip my code apart, by the way, I'm super new to this and want to learn!</p>\n\n<p>There are multiple \"Subjectkeys\" in the xml, but only some have an \"AuditRecord\". I only want to pull ones with an audit record, and then for those, I want to pull their info from \"SubjectData\", \"FormData\" and \"AuditRecord\"</p>\n\n<pre><code>import csv\nimport xml.etree.cElementTree as ET\n\ntree = ET.parse(\"response.xml\")\nroot = tree.getroot()\n\nxml_data_to_csv =open(\"query.csv\", 'w')\n\n\n\nAuditRecord_head = []\nSubjectData_head = []\nFormData_head = []\n\ncsvwriter=csv.writer(xml_data_to_csv)\ncount=0\nfor member in root.findall(\"AuditRecord\"):\n    AuditRecord = []\n    Subjectdata = []\n    FormData = []\n    if count == 0:\n        Subject = member.find(\"SubjectKey\").tag\n        Subjectdata_head.append(Subject)\n        Form = member.find(\"p1Name\").tag\n        FormData_head.append(Form)\n        Action = member.find(\"Action\").tag\n        AuditRecord_head.append(Action)\n        csvwriter.writerow(Auditrecord_head)\n        count = count + 1\n    Subject = member.find('SubjectKey').text\n    Subjectdata.append(Subject)\n    Form = member.find('p1Name').text\n    FormData.append(Form)\n    Action = member.find(\"Action\").text\n    AuditRecord.append(Action)\n\n    csvwriter.writerow(Subjectdata)\nxml_data_to_csv.close()\n</code></pre>\n\n<p>I expect the output to be a table with column headings: Subject, Form, Action.</p>\n\n<p>Here is sample .xml:</p>\n\n<pre><code> &lt;/ClinicalData&gt;\n    &lt;ClinicalData StudyOID=\"SMK-869-002\" MetaDataVersionOID=\"2.0\"&gt;\n    &lt;SubjectData SubjectKey=\"865-015\"&gt;\n&lt;/AuditRecord&gt;\n&lt;/FormData&gt;\n&lt;FormData p1:Name=\"Medical History\" p1:Started=\"Y\" FormOID=\"mh\" FormRepeatKey=\"0\"/&gt;\n&lt;FormData p1:Name=\"Medical History\" p1:Started=\"Y\" FormOID=\"mh\" FormRepeatKey=\"1\"&gt;\n&lt;p1:QueryAction InitialComment=\"Please enter start date for condition\" UserType=\"User\" UserOID=\"bailey@protocolfirst.com\" Action=\"query\" DateTimeStamp=\"2019-07-12T14:08:43.893Z\"/&gt;\n&lt;/AuditRecord&gt;\n</code></pre>\n"}, {"tags": ["python", "json", "python-3.x"], "comments": [{"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 0, "creation_date": 1563398911, "post_id": 57084270, "comment_id": 100691671, "body": "What did you actually try?"}, {"owner": {"reputation": 13, "user_id": 11636172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d43b6d0891226181d920ea69495b6c53?s=128&d=identicon&r=PG&f=1", "display_name": "J&#246;rg Lang", "link": "https://stackoverflow.com/users/11636172/j%c3%b6rg-lang"}, "reply_to_user": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 0, "creation_date": 1563399249, "post_id": 57084270, "comment_id": 100691783, "body": "I have split it into several &quot;phases&quot; So I have a method to build the attachment array and then I try to concat String 1, static text ( ,  &quot;attachments&quot;:[ ), the array elements, closing brackets ( ] } )"}, {"owner": {"reputation": 333, "user_id": 9722265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BB29N.png?s=128&g=1", "display_name": "pypalms", "link": "https://stackoverflow.com/users/9722265/pypalms"}, "edited": false, "score": 1, "creation_date": 1563399482, "post_id": 57084270, "comment_id": 100691844, "body": "Without any tangible code that you have attempted yourself, it&#39;s impossible to actually debug what error you are actually getting."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11636172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d43b6d0891226181d920ea69495b6c53?s=128&d=identicon&r=PG&f=1", "display_name": "J&#246;rg Lang", "link": "https://stackoverflow.com/users/11636172/j%c3%b6rg-lang"}, "edited": false, "score": 1, "creation_date": 1563400470, "post_id": 57084334, "comment_id": 100692128, "body": "Thanks @MarkMeyer, I&#39;m updateing my code accordingly and will test it asap"}, {"owner": {"reputation": 13, "user_id": 11636172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d43b6d0891226181d920ea69495b6c53?s=128&d=identicon&r=PG&f=1", "display_name": "J&#246;rg Lang", "link": "https://stackoverflow.com/users/11636172/j%c3%b6rg-lang"}, "edited": false, "score": 0, "creation_date": 1563436668, "post_id": 57084334, "comment_id": 100701447, "body": "In general your solution works, but I still have a problem with the s2 as this is getting still escaped. The array is getting build in a dedicated method. The rest of s2 is getting added in another method. I will need to make some more investigations on that"}], "tags": [], "owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "is_accepted": true, "score": 0, "last_activity_date": 1563399289, "creation_date": 1563399289, "answer_id": 57084334, "question_id": 57084270, "link": "https://stackoverflow.com/questions/57084270/combining-two-json-strings-without-or/57084334#57084334", "title": "combining two json strings without &quot; or &#39;", "body": "<p>You shouldn't try to manipulate them as strings \u2013 this will be fragile and very specific to the strings. Instead, parse the strings into dictionaries, do whatever manipulations you want, and then dump them back to JSON strings:</p>\n\n<pre><code>import json\n\ns1 = '{\"step\":\"example step\", \"data\":\"example data\", \"result\":\"example result\"}'\ns2 = '{\"attachments\":[ { \"data\":\"gsddfgdsfg...(base64) \", \"filename\":\"example1.txt\", \"contentType\":\"plain/text\" } ] }'\n\nd1 = json.loads(s1)\nd2 = json.loads(s2)\n\nd1.update(d2)\n\njson.dumps(d1)\n</code></pre>\n\n<p>This will give you a clean json string:</p>\n\n<pre><code>'{\"step\": \"example step\", \"data\": \"example data\", \"result\": \"example result\", \"attachments\": [{\"data\": \"gsddfgdsfg...(base64) \", \"filename\": \"example1.txt\", \"contentType\": \"plain/text\"}]}'\n</code></pre>\n\n<p>of if you want the object rather than the string, <code>d1</code> is now:</p>\n\n<pre><code>{'step': 'example step',\n 'data': 'example data',\n 'result': 'example result',\n 'attachments': [{'data': 'gsddfgdsfg...(base64) ',\n   'filename': 'example1.txt',\n   'contentType': 'plain/text'}]}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11636172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d43b6d0891226181d920ea69495b6c53?s=128&d=identicon&r=PG&f=1", "display_name": "J&#246;rg Lang", "link": "https://stackoverflow.com/users/11636172/j%c3%b6rg-lang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 57084334, "answer_count": 1, "score": -6, "last_activity_date": 1563399289, "creation_date": 1563398809, "question_id": 57084270, "link": "https://stackoverflow.com/questions/57084270/combining-two-json-strings-without-or", "title": "combining two json strings without &quot; or &#39;", "body": "<p>I have two JSON strings</p>\n\n<p>String 1:</p>\n\n<pre><code>{\"step\":\"example step\", \"data\":\"example data\", \"result\":\"example result\"}\n</code></pre>\n\n<p>String 2:</p>\n\n<pre><code>{\"attachments\":[ { \"data\":\"gsddfgdsfg...(base64) \", \"filename\":\"example1.txt\", \"contentType\":\"plain/text\" } ] }\n</code></pre>\n\n<p>I need both combined to that:\nExpected Object:</p>\n\n<pre><code>{\n   \"step\":\"example step\",\n   \"data\":\"example data\",\n   \"result\":\"example result\",\n   \"attachments\":[\n      {\n         \"data\":\"gsddfgdsfg...(base64) \",\n         \"filename\":\"example1.txt\",\n         \"contentType\":\"plain/text\"\n      },\n      {\n         \"data\":\"gsddfgdsfg...(base64) \",\n         \"filename\":\"example2.txt\",\n         \"contentType\":\"plain/text\"\n      }\n   ]\n}\n</code></pre>\n\n<p>In every try the second string is getting ' or \" around the array which will not work.</p>\n"}, {"tags": ["python", "json", "python-3.x", "dictionary"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1563399137, "post_id": 57084268, "comment_id": 100691746, "body": "This is invalid JSON/Python: it contains a <code>}}{</code>, without a comma (<code>,</code>)"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 10278220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32d52ef20c5ae11cff4cbacbf13900f8?s=128&d=identicon&r=PG&f=1", "display_name": "aesthetics", "link": "https://stackoverflow.com/users/10278220/aesthetics"}, "edited": false, "score": 0, "creation_date": 1563399186, "post_id": 57084307, "comment_id": 100691767, "body": "I thought instead of 3 dictionaries it was just multiple json objects, which should be convertible to a dictionary?"}, {"owner": {"reputation": 31, "user_id": 10278220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32d52ef20c5ae11cff4cbacbf13900f8?s=128&d=identicon&r=PG&f=1", "display_name": "aesthetics", "link": "https://stackoverflow.com/users/10278220/aesthetics"}, "edited": false, "score": 0, "creation_date": 1563399223, "post_id": 57084307, "comment_id": 100691778, "body": "Even if that is the case is there any work around I would be able to do to just take the string and correctly normalize it and convert it to a pandas dataframe?"}, {"owner": {"reputation": 31, "user_id": 10278220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32d52ef20c5ae11cff4cbacbf13900f8?s=128&d=identicon&r=PG&f=1", "display_name": "aesthetics", "link": "https://stackoverflow.com/users/10278220/aesthetics"}, "edited": false, "score": 0, "creation_date": 1563399799, "post_id": 57084307, "comment_id": 100691945, "body": "ahh got it, not sure if you would be willing to supplement, but one more question would be how would I convert that tuple to a correctly flattened dataframe? when I do pd.DataFrame(data) it doesn&#39;t parse the tuple correctly. I&#39;m also semi-unfamiliar with how tuples work for converting to dataframes."}, {"owner": {"reputation": 4057, "user_id": 8285811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C38qo.jpg?s=128&g=1", "display_name": "Akaisteph7", "link": "https://stackoverflow.com/users/8285811/akaisteph7"}, "reply_to_user": {"reputation": 31, "user_id": 10278220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32d52ef20c5ae11cff4cbacbf13900f8?s=128&d=identicon&r=PG&f=1", "display_name": "aesthetics", "link": "https://stackoverflow.com/users/10278220/aesthetics"}, "edited": false, "score": 0, "creation_date": 1563400030, "post_id": 57084307, "comment_id": 100692022, "body": "@aesthetics I would recommend opening new questions for issues like this as it is getting further and further away from the original question. Here is an example: do <code>ans = ast.literal_eval(data)</code>, then <code>pd.DataFrame(ans[0])</code> creates a DataFrame. You need to do it for each dictionary."}], "tags": [], "owner": {"reputation": 4057, "user_id": 8285811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C38qo.jpg?s=128&g=1", "display_name": "Akaisteph7", "link": "https://stackoverflow.com/users/8285811/akaisteph7"}, "is_accepted": true, "score": 0, "last_activity_date": 1563399410, "last_edit_date": 1563399410, "creation_date": 1563399112, "answer_id": 57084307, "question_id": 57084268, "link": "https://stackoverflow.com/questions/57084268/convert-a-string-representation-of-dictionaries-to-actual-dictionaries/57084307#57084307", "title": "Convert a string representation of dictionaries to actual dictionaries", "body": "<p>This string</p>\n\n<pre><code>data = '{\"_index\": \"11_20190714_184325_01\", \"_type\": \"11\", \"_id\": \"1feb78aff16852ed\", \"_score\": 0.0, \"fields\": {\"c_u\": [\"hvhprecision.com\"], \"tawgs.id\": [\"p10813\", \"p449\", \"p6426\", \"p6427\"]}}{\"_index\": \"11_20190714_184325_01\", \"_type\": \"11\", \"_id\": \"786fd4ad2415aa7b\", \"_score\": 0.0, \"fields\": {\"c_u\": [\"thomsonreuters.com\"], \"tawgs.id\": [\"p12519\", \"p510\", \"p6426\"]}}{\"_index\": \"11_20190714_184325_01\", \"_type\": \"11\", \"_id\": \"5826e7cbd92d951a\", \"_score\": 0.0, \"fields\": {\"tawgs.id\": [\"p12505\", \"p18053\", \"p6426\", \"p816\", \"p826\", \"p8453\", \"p8458\"]}}'\n</code></pre>\n\n<p>contains three separate JSON objects. You can't create one dictionary from the three of them. </p>\n\n<p>You will need to separate them first, then run them through <code>ast</code>. You can do that by using <code>replace</code>:</p>\n\n<pre><code>data = data.replace(\"}{\", \"},{\")\nast.literal_eval(data)\n</code></pre>\n\n<p>This returns a tuple with your various dictionaries:</p>\n\n<pre><code>({'_index': '11_20190714_184325_01', '_type': '11', '_id': '1feb78aff16852ed', '_score': 0.0, 'fields': {'c_u': ['hvhprecision.com'], 'tawgs.id': ['p10813', 'p449', 'p6426', 'p6427']}}, {'_index': '11_20190714_184325_01', '_type': '11', '_id': '786fd4ad2415aa7b', '_score': 0.0, 'fields': {'c_u': ['thomsonreuters.com'], 'tawgs.id': ['p12519', 'p510', 'p6426']}}, {'_index': '11_20190714_184325_01', '_type': '11', '_id': '5826e7cbd92d951a', '_score': 0.0, 'fields': {'tawgs.id': ['p12505', 'p18053', 'p6426', 'p816', 'p826', 'p8453', 'p8458']}})\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 10278220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32d52ef20c5ae11cff4cbacbf13900f8?s=128&d=identicon&r=PG&f=1", "display_name": "aesthetics", "link": "https://stackoverflow.com/users/10278220/aesthetics"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 57084307, "answer_count": 1, "score": 0, "last_activity_date": 1563407018, "creation_date": 1563398804, "last_edit_date": 1563407018, "question_id": 57084268, "link": "https://stackoverflow.com/questions/57084268/convert-a-string-representation-of-dictionaries-to-actual-dictionaries", "title": "Convert a string representation of dictionaries to actual dictionaries", "body": "<p>I have a very large json file that I opened and stored in a variable called <code>data</code>. A snippet of printing <code>data</code> gives me this output of type string:</p>\n\n<pre><code>'{\"_index\": \"11_20190714_184325_01\", \"_type\": \"11\", \"_id\": \"1feb78aff16852ed\", \"_score\": 0.0, \"fields\": {\"c_u\": [\"hvhprecision.com\"], \"tawgs.id\": [\"p10813\", \"p449\", \"p6426\", \"p6427\"]}}{\"_index\": \"11_20190714_184325_01\", \"_type\": \"11\", \"_id\": \"786fd4ad2415aa7b\", \"_score\": 0.0, \"fields\": {\"c_u\": [\"thomsonreuters.com\"], \"tawgs.id\": [\"p12519\", \"p510\", \"p6426\"]}}{\"_index\": \"11_20190714_184325_01\", \"_type\": \"11\", \"_id\": \"5826e7cbd92d951a\", \"_score\": 0.0, \"fields\": {\"tawgs.id\": [\"p12505\", \"p18053\", \"p6426\", \"p816\", \"p826\", \"p8453\", \"p8458\"]}}'\n</code></pre>\n\n<p>I need to convert this string representation of a dictionary to an actual dictionary in order to flatten it and create a dataframe.</p>\n\n<p>However, when I try:</p>\n\n<pre><code>import ast\nast.literal_eval(data)\n</code></pre>\n\n<p>I get an <strong>\"Invalid Syntax\"</strong> error.</p>\n\n<p>Trying this code:</p>\n\n<pre><code>with open(\"es-output.json\", \"r\") as f\n    dictionary =  json.loads(f.read())\n</code></pre>\n\n<p>gives me this error:</p>\n\n<pre><code>JSONDecodeError: Extra data: line 1 column 184 (char 183)\n</code></pre>\n\n<p>Doing a simple:</p>\n\n<pre><code>json.loads(data)\n</code></pre>\n\n<p>also outputs the same error as above: <code>JSONDecodeError: Extra data: line 1 column 184 (char 183)</code>.</p>\n\n<p>I have no idea why it's not working to convert a string to a dictionary, especially with the <strong>ast</strong> library. </p>\n\n<p>Please help and thank you in advance!</p>\n"}, {"tags": ["python", "tensorflow", "tensorflow-datasets"], "answers": [{"tags": [], "owner": {"reputation": 1290, "user_id": 3088888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50b7e0846120d52a1322e4b9ad743bb8?s=128&d=identicon&r=PG&f=1", "display_name": "mjarosie", "link": "https://stackoverflow.com/users/3088888/mjarosie"}, "is_accepted": true, "score": 0, "last_activity_date": 1563625888, "creation_date": 1563625888, "answer_id": 57124759, "question_id": 57084245, "link": "https://stackoverflow.com/questions/57084245/reading-dataset-from-files-where-some-might-be-missing/57124759#57124759", "title": "Reading Dataset from files where some might be missing", "body": "<p>I managed to solve the problem, sharing the solution just in case someone else will be struggling with it as well. I had to use additional list of booleans specifying whether the file actually exist and pass it into the mapper. Then using <code>tf.cond()</code> function we decide whether to read the file or mock the data with zeroes (or any other logic).</p>\n\n<pre><code>import os\nimport tensorflow as tf\n\ntf.enable_eager_execution()\n\ndata_root_dir = \"data\"\n\nmodalities_to_use = [\"sensor_A\", \"sensor_B\"]\ntimestamps = [1, 2, 3]\n\nfor mod_idx, modality in enumerate(modalities_to_use):\n    # Will produce: ['data/sensor_A/1.dat', 'data/sensor_A/2.dat', 'data/sensor_A/3.dat']\n    filenames = [os.path.join(data_root_dir, modality, str(timestamp) + \".dat\") for timestamp in timestamps]\n    files_exist = [os.path.isfile(filename) for filename in filenames]\n\n    dataset = tf.data.Dataset.from_tensor_slices((filenames, files_exist))\n\n\n    def _parse_function_internal(filename, file_exist):\n        number_of_columns = 4\n        single_observation = tf.cond(file_exist, lambda: tf.read_file(filename), lambda: ' '.join(['0.0'] * number_of_columns))\n        # Tokenise every value so we can cast these to floats later.\n        single_observation = tf.string_split([single_observation], sep='\\r\\n ').values\n        single_observation = tf.reshape(single_observation, (-1, number_of_columns))\n        single_observation = tf.strings.to_number(single_observation, tf.float32)\n        return filename, single_observation\n\n    dataset = dataset.map(_parse_function_internal)\n\n    print('Result:')\n    for el in dataset:\n        try:\n            # Filename\n            print(el[0])\n            # Parsed file content\n            print(el[1])\n        except tf.errors.OutOfRangeError:\n            break\n</code></pre>\n"}], "owner": {"reputation": 1290, "user_id": 3088888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50b7e0846120d52a1322e4b9ad743bb8?s=128&d=identicon&r=PG&f=1", "display_name": "mjarosie", "link": "https://stackoverflow.com/users/3088888/mjarosie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 0, "accepted_answer_id": 57124759, "answer_count": 1, "score": 0, "last_activity_date": 1563625888, "creation_date": 1563398686, "question_id": 57084245, "link": "https://stackoverflow.com/questions/57084245/reading-dataset-from-files-where-some-might-be-missing", "title": "Reading Dataset from files where some might be missing", "body": "<p>I'm trying to load files to TensorFlow Dataset where some files might be missing (in which case I want to replace these with zeroes).</p>\n\n<p>The structure of directories that I'm trying to read data from is as follows:</p>\n\n<pre><code>   |-data\n   |---sensor_A\n   |-----1.dat\n   |-----2.dat\n   |-----3.dat\n   |---sensor_B\n   |-----1.dat\n   |-----2.dat\n   |-----3.dat\n</code></pre>\n\n<p><code>.dat</code> files are .csv files with spacebar as a separator. The content of every file is a single, multi-row observation where the number of columns is constant (say 4) and the number of rows is unknown (timeseries data).</p>\n\n<p>I've successfully managed to read every sensor data to a separate TensorFlow Dataset with the following code:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import os\nimport tensorflow as tf\n\ntf.enable_eager_execution()\n\ndata_root_dir = \"data\"\n\nmodalities_to_use = [\"sensor_A\", \"sensor_B\"]\ntimestamps = [1, 2, 3]\n\nfor mod_idx, modality in enumerate(modalities_to_use):\n    # Will produce: ['data/sensor_A/1.dat', 'data/sensor_A/2.dat', 'data/sensor_A/3.dat']\n    filenames = [os.path.join(data_root_dir, modality, str(timestamp) + \".dat\") for timestamp in timestamps]\n\n    dataset = tf.data.Dataset.from_tensor_slices((filenames,))\n\n\n    def _parse_function_internal(filename):\n        number_of_columns = 4\n        single_observation = tf.read_file(filename)\n        # Tokenise every value so we can cast these to floats later.\n        single_observation = tf.string_split([single_observation], sep='\\r\\n ').values\n        single_observation = tf.reshape(single_observation, (-1, number_of_columns))\n        single_observation = tf.strings.to_number(single_observation, tf.float32)\n        return filename, single_observation\n\n    dataset = dataset.map(_parse_function_internal)\n\n    print('Result:')\n    for el in dataset:\n        try:\n            # Filename\n            print(el[0])\n            # Parsed file content\n            print(el[1])\n        except tf.errors.OutOfRangeError:\n            break\n\n</code></pre>\n\n<p>which successfully prints out content of all three files for every sensor.</p>\n\n<p>My problem is that some timestamps in the dataset might be missing. For instance if file <code>1.dat</code> in <code>sensor_A</code> directory will be missing I'm getting this error:</p>\n\n<pre><code>tensorflow.python.framework.errors_impl.NotFoundError: NewRandomAccessFile failed to Create/Open: mock_data\\sensor_A\\1.dat : The system cannot find the file specified.\n; No such file or directory\n     [[{{node ReadFile}}]] [Op:IteratorGetNextSync]\n</code></pre>\n\n<p>which is thrown in this line:</p>\n\n<pre><code>for el in dataset:\n</code></pre>\n\n<p>What I've tried to do is to surround the call to <code>tf.read_file()</code> function with try block but obviously it doesn't work as the error is not thrown when <code>tf.read_file()</code> is called, but when the value is fetched from the dataset. Later I want to pass this dataset to a Keras model so I can't just surround it with try block. Is there any workaround? Is that even supported? </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "list", "iteration"], "answers": [{"tags": [], "owner": {"reputation": 449, "user_id": 5075269, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--iBQlspvqeQ/AAAAAAAAAAI/AAAAAAAAAJg/5QUKuWNGSt4/photo.jpg?sz=128", "display_name": "Dallan", "link": "https://stackoverflow.com/users/5075269/dallan"}, "is_accepted": false, "score": 1, "last_activity_date": 1563399117, "last_edit_date": 1563399117, "creation_date": 1563398787, "answer_id": 57084261, "question_id": 57084242, "link": "https://stackoverflow.com/questions/57084242/how-to-stop-iterating-over-a-list-once-a-certain-value-is-reached/57084261#57084261", "title": "How to stop iterating over a list once a certain value is reached", "body": "<p>Use <code>break</code> inside inside the <code>if</code> block to exit the loop early.</p>\n\n<p>Something like</p>\n\n<pre><code>def average_rainfall(listInts):\n    newList = []\n    count = 0\n    for num in listInts:\n        if num &lt; 0:\n            newList.append(num)\n            count += 1\n            break\n        else:\n            newList.append(num)\n            count += 1\n\n    summ = sum(newList)\n    avg = summ/count\n\n    return avg   \n</code></pre>\n\n<p>Edit: There is a bug in your <code>append</code> statements. You need to append the <code>num</code> you are currently iterating on, not the whole list.</p>\n"}, {"tags": [], "owner": {"reputation": 2682, "user_id": 4848801, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/700003af13fc16520eeff211d66e2c84?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Schaefer", "link": "https://stackoverflow.com/users/4848801/ryan-schaefer"}, "is_accepted": false, "score": 0, "last_activity_date": 1563398896, "creation_date": 1563398896, "answer_id": 57084280, "question_id": 57084242, "link": "https://stackoverflow.com/questions/57084242/how-to-stop-iterating-over-a-list-once-a-certain-value-is-reached/57084280#57084280", "title": "How to stop iterating over a list once a certain value is reached", "body": "<p>This is a classic use case for <code>continue</code> or <code>break</code>. To determine which one that you want you have to decide whether or not you want to skip over negative numbers or stop execution entirely.</p>\n\n<p><code>continue</code> skips one iteration of the loop while <code>break</code> stops execution of the loop entirely.</p>\n"}, {"comments": [{"owner": {"reputation": 47633, "user_id": 3889449, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/eb07e0f09deb982a1a0deedca7a5c002?s=128&d=identicon&r=PG", "display_name": "Marco Bonelli", "link": "https://stackoverflow.com/users/3889449/marco-bonelli"}, "edited": false, "score": 1, "creation_date": 1563399614, "post_id": 57084313, "comment_id": 100691885, "body": "So Python has a &quot;pythonic&quot; way to break a loop too... LOL. I love it."}], "tags": [], "owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "is_accepted": true, "score": 2, "last_activity_date": 1563399151, "creation_date": 1563399151, "answer_id": 57084313, "question_id": 57084242, "link": "https://stackoverflow.com/questions/57084242/how-to-stop-iterating-over-a-list-once-a-certain-value-is-reached/57084313#57084313", "title": "How to stop iterating over a list once a certain value is reached", "body": "<p>You could use <code>itertools.takewhile</code> (<a href=\"https://docs.python.org/3.5/library/itertools.html#itertools.takewhile\" rel=\"nofollow noreferrer\">doc</a>):</p>\n\n<pre><code>from itertools import takewhile\n\na_list = [1, 2, 3, 4, 5, -1, 6, 7]\n\ndef average_rainfall(listInts):\n    l = [*takewhile(lambda k: k &gt;=0, listInts)]\n    return sum(l) / len(l)\n\nprint(average_rainfall(a_list))\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>3.0\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11799820, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qOH7cu_Xow0/AAAAAAAAAAI/AAAAAAAAAGY/mmcRqEM9Rwk/photo.jpg?sz=128", "display_name": "Philip Adams", "link": "https://stackoverflow.com/users/11799820/philip-adams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 285, "favorite_count": 0, "accepted_answer_id": 57084313, "answer_count": 3, "score": 0, "last_activity_date": 1563400416, "creation_date": 1563398673, "last_edit_date": 1563400416, "question_id": 57084242, "link": "https://stackoverflow.com/questions/57084242/how-to-stop-iterating-over-a-list-once-a-certain-value-is-reached", "title": "How to stop iterating over a list once a certain value is reached", "body": "<p>For this problem, a list of integers is given. I need to find the average  of the list. The only problem is, once you reach a negative number, you aren't supposed to factor in any of the numbers after that into the calculations. This is what I have so far:</p>\n\n<pre><code>def average_rainfall(listInts):\n    newList = []\n    count = 0\n    for num in listInts:\n        if num &lt; 0:\n            newList.append(listInts[:num])\n            count += (1*len(newList))\n        else:\n            newList.append(listInts)\n            count += (1*len(newList))\n\n    summ = sum(newList)\n    avg = summ/count\n\n    return avg   \n</code></pre>\n\n<p>The list and function call are below:</p>\n\n<pre><code>a_list = [1, 2, 3, 4, 5, -1, 6, 7]\nprint(average_rainfall(a_list))\n</code></pre>\n\n<p>I've been working on this for a while and am stuck. Any tips?</p>\n"}, {"tags": ["python", "azure", "speech-to-text"], "comments": [{"owner": {"reputation": 20458, "user_id": 8198946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oRGKD.png?s=128&g=1", "display_name": "Jay Gong", "link": "https://stackoverflow.com/users/8198946/jay-gong"}, "edited": false, "score": 0, "creation_date": 1563419695, "post_id": 57084223, "comment_id": 100695891, "body": "Not sure what&#39;s your meaning. The output only displays <code>result.text</code>, no other cumbersome content like your said. What&#39;s output you want to get?"}, {"owner": {"reputation": 63, "user_id": 10636802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1dfd10ac66cd334771f1ffe5002b944?s=128&d=identicon&r=PG&f=1", "display_name": "liam", "link": "https://stackoverflow.com/users/10636802/liam"}, "reply_to_user": {"reputation": 20458, "user_id": 8198946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oRGKD.png?s=128&g=1", "display_name": "Jay Gong", "link": "https://stackoverflow.com/users/8198946/jay-gong"}, "edited": false, "score": 0, "creation_date": 1563426870, "post_id": 57084223, "comment_id": 100697443, "body": "I&#39;ve edited the question to include an image of the output and more of the code that is provided by azure. I&#39;ve tried throwing &#39;result.text&#39; around in the file a few different places but it always seems to provide an error."}, {"owner": {"reputation": 20458, "user_id": 8198946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oRGKD.png?s=128&g=1", "display_name": "Jay Gong", "link": "https://stackoverflow.com/users/8198946/jay-gong"}, "edited": false, "score": 0, "creation_date": 1563428907, "post_id": 57084223, "comment_id": 100698081, "body": "please hide your privacy key immediately! That&#39;s a risk for you."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 10636802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1dfd10ac66cd334771f1ffe5002b944?s=128&d=identicon&r=PG&f=1", "display_name": "liam", "link": "https://stackoverflow.com/users/10636802/liam"}, "edited": false, "score": 0, "creation_date": 1563481691, "post_id": 57086697, "comment_id": 100725275, "body": "Thank-you! That worked perfectly. and also thanks for the hiding my privacy key for me! oops."}, {"owner": {"reputation": 20458, "user_id": 8198946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oRGKD.png?s=128&g=1", "display_name": "Jay Gong", "link": "https://stackoverflow.com/users/8198946/jay-gong"}, "reply_to_user": {"reputation": 63, "user_id": 10636802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1dfd10ac66cd334771f1ffe5002b944?s=128&d=identicon&r=PG&f=1", "display_name": "liam", "link": "https://stackoverflow.com/users/10636802/liam"}, "edited": false, "score": 0, "creation_date": 1563500663, "post_id": 57086697, "comment_id": 100729735, "body": "@liam You&#39;re welcome.BTW,you could mark my answer for others&#39; reference,thank you!"}], "tags": [], "owner": {"reputation": 20458, "user_id": 8198946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oRGKD.png?s=128&g=1", "display_name": "Jay Gong", "link": "https://stackoverflow.com/users/8198946/jay-gong"}, "is_accepted": true, "score": 1, "last_activity_date": 1563430762, "last_edit_date": 1563430762, "creation_date": 1563420412, "answer_id": 57086697, "question_id": 57084223, "link": "https://stackoverflow.com/questions/57084223/edit-azure-python-code-to-clean-up-speech-to-text-output/57086697#57086697", "title": "Edit Azure Python code to clean up Speech-to-Text output", "body": "<p><code>result.text</code> in the sample code is the simplest output of recognized speech.</p>\n\n<p>My test with default microphone:</p>\n\n<p><a href=\"https://i.stack.imgur.com/iSQGN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iSQGN.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p>Please refer to below fragment of code which works for me.</p>\n\n<pre><code>import azure.cognitiveservices.speech as speechsdk\nimport time\n# Creates an instance of a speech config with specified subscription key and service region.\n# Replace with your own subscription key and service region (e.g., \"westus\").\nspeech_key, service_region = \"***\", \"***\"\n\nweatherfilename = \"D:\\\\whatstheweatherlike.wav\"\n\nspeech_config = speechsdk.SpeechConfig(subscription=speech_key, region=service_region)\naudio_config = speechsdk.audio.AudioConfig(filename=weatherfilename)\n\n# Creates a recognizer with the given settings\nspeech_recognizer = speechsdk.SpeechRecognizer(speech_config=speech_config, audio_config=audio_config)\n\nspeech_recognizer.session_started.connect(lambda evt: print('SESSION STARTED: {}'.format(evt)))\nspeech_recognizer.session_stopped.connect(lambda evt: print('\\nSESSION STOPPED {}'.format(evt)))\nspeech_recognizer.recognized.connect(lambda evt: print('\\n{}'.format(evt.result.text)))\n\n# print('Say a few words\\n\\n')\nspeech_recognizer.start_continuous_recognition()\ntime.sleep(10)\nspeech_recognizer.stop_continuous_recognition()\n\nspeech_recognizer.session_started.disconnect_all()\nspeech_recognizer.recognized.disconnect_all()\nspeech_recognizer.session_stopped.disconnect_all()\n</code></pre>\n\n<p>And the output looks like:</p>\n\n<p><a href=\"https://i.stack.imgur.com/v2oyY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/v2oyY.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 63, "user_id": 10636802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1dfd10ac66cd334771f1ffe5002b944?s=128&d=identicon&r=PG&f=1", "display_name": "liam", "link": "https://stackoverflow.com/users/10636802/liam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 57086697, "answer_count": 1, "score": 1, "last_activity_date": 1563430762, "creation_date": 1563398565, "last_edit_date": 1563428927, "question_id": 57084223, "link": "https://stackoverflow.com/questions/57084223/edit-azure-python-code-to-clean-up-speech-to-text-output", "title": "Edit Azure Python code to clean up Speech-to-Text output", "body": "<p>I'm using Microsoft Azure's speech-to-text API and it's working well but the output is cumbersome and I'd like to clean it up so that only the recognized speech is displayed.</p>\n\n<p><a href=\"https://i.stack.imgur.com/GJ72K.png\" rel=\"nofollow noreferrer\">this is what the output looks like</a></p>\n\n<p>The python snippet that azure provides is:</p>\n\n<pre><code>try:\n    import azure.cognitiveservices.speech as speechsdk\nimport sys\nsys.exit(1)\n\nspeech_key, service_region = \"***\", \"***\"\n\nweatherfilename = os.path.join(\n    os.path.dirname(__file__),\n    'orf_audio_2',\n    '716_anton.wav')\n# def speech_recognize_once_from_file():\n    \"\"\"performs one-shot speech recognition with input from an audio     file\"\"\"\n# &lt;SpeechRecognitionWithFile&gt;\nspeech_config = speechsdk.SpeechConfig(subscription=speech_key,     region=service_region)\naudio_config = speechsdk.audio.AudioConfig(filename=weatherfilename)\n# Creates a speech recognizer using a file as audio input.\n# The default language is \"en-us\".\nspeech_recognizer =     speechsdk.SpeechRecognizer(speech_config=speech_config,     audio_config=audio_config)\n\nstart_continuous_recognition() instead.\nresult = speech_recognizer.recognize_once()\n\n# Check the result\nif result.reason == speechsdk.ResultReason.RecognizedSpeech:\n    print(\"Recognized: {}\".format(result.text))\nelif result.reason == speechsdk.ResultReason.NoMatch:\n    print(\"No speech could be recognized: {}\".format(result.no_match_details))\nelif result.reason == speechsdk.ResultReason.Canceled:\n    cancellation_details = result.cancellation_details\n    print(\"Speech Recognition canceled: {}\".format(cancellation_details.reason))\n    if cancellation_details.reason == speechsdk.CancellationReason.Error:\n        print(\"Error details: {}\".format(cancellation_details.error_details))\n# &lt;/SpeechRecognitionWithFile&gt;\n</code></pre>\n"}, {"tags": ["python", "html", "django", "forms", "date"], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 0, "last_activity_date": 1563400158, "last_edit_date": 1563400158, "creation_date": 1563399758, "answer_id": 57084401, "question_id": 57084218, "link": "https://stackoverflow.com/questions/57084218/django-forms-how-to-make-a-form-inputs-type-equal-to-date/57084401#57084401", "title": "Django Forms - How to make a form inputs type equal to &quot;date&quot;", "body": "<p>You can patch the type in the <code>attrs</code> of the widget, like:</p>\n\n<pre><code>class searchForm(forms.Form):\n    datestart = forms.DateField(\n        widget=forms.DateInput(<b>attrs={'type': 'date'}</b>),\n        label='Date Start'\n    )\n    dateend = forms.DateField(\n        widget=forms.DateInput(<b>attrs={'type': 'date'}</b>),\n        label='Date end'\n    )</code></pre>\n\n<p>If you want to use this more often, you can make your own widget, like:</p>\n\n<pre><code>class DateDateField(forms.DateField):\n    <b>input_type = 'date'</b></code></pre>\n\n<p>You can then use this as:</p>\n\n<pre><code>class searchForm(forms.Form):\n    datestart = forms.DateField(widget=<b>DateDateInput</b>, label='Date Start')\n    dateend = forms.DateField(widget=<b>DateDateInput</b>, label='Date end')</code></pre>\n\n<p>This will render the form like:</p>\n\n<pre><code>&gt;&gt;&gt; print(searchForm())\n&lt;tr&gt;&lt;th&gt;&lt;label for=\"id_datestart\"&gt;Date Start:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=\"date\" name=\"datestart\" required id=\"id_datestart\"&gt;&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;th&gt;&lt;label for=\"id_dateend\"&gt;Date end:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=\"date\" name=\"dateend\" required id=\"id_dateend\"&gt;&lt;/td&gt;&lt;/tr&gt;\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11030639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15c77a5d9c1bb8f0379bc402c208cd90?s=128&d=identicon&r=PG&f=1", "display_name": "Billy1s", "link": "https://stackoverflow.com/users/11030639/billy1s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 0, "accepted_answer_id": 57084401, "answer_count": 1, "score": 1, "last_activity_date": 1563400158, "creation_date": 1563398535, "question_id": 57084218, "link": "https://stackoverflow.com/questions/57084218/django-forms-how-to-make-a-form-inputs-type-equal-to-date", "title": "Django Forms - How to make a form inputs type equal to &quot;date&quot;", "body": "<p>I am using a django form to create two inputs for date. When created in html the input types are set to type=\"text\". How can I make theses be created with type=\"date\". </p>\n\n<p>forms.py</p>\n\n<pre><code>class searchForm(forms.Form):\n    datestart = forms.DateField(label=\"Date Start\")\n    dateend = forms.DateField(label='Date end')\n</code></pre>\n\n<p>views.py</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def search(request):\n    if request.method == 'POST':\n        form = searchForm(request.POST)\n        if form.is_valid():\n            print(form)\n    else:\n        form = searchForm()\n    return render(request, 'next_launch/search.html',{'form': form})\n</code></pre>\n\n<p>search.html</p>\n\n<pre><code>    &lt;form action=\"search\" method=\"post\"&gt;\n        {% csrf_token %}}\n        {{ form }}\n    &lt;input type=\"submit\" value=\"Submit\"&gt;\n    &lt;/form&gt;\n</code></pre>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "edited": false, "score": 2, "creation_date": 1563398655, "post_id": 57084214, "comment_id": 100691581, "body": "and if there would be 4 tabs, which match is required?"}, {"owner": {"reputation": 4837, "user_id": 9769953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f14a586643a20c8d68010f7a329f5a04?s=128&d=identicon&r=PG", "display_name": "0 0", "link": "https://stackoverflow.com/users/9769953/0-0"}, "edited": false, "score": 1, "creation_date": 1563398715, "post_id": 57084214, "comment_id": 100691602, "body": "Or put the pattern in twice, with a set excluding the pattern in between (<code>[^\\t]+</code>); or use a non-greedy match in between, as you already do now."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 4837, "user_id": 9769953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f14a586643a20c8d68010f7a329f5a04?s=128&d=identicon&r=PG", "display_name": "0 0", "link": "https://stackoverflow.com/users/9769953/0-0"}, "edited": false, "score": 1, "creation_date": 1563398825, "post_id": 57084214, "comment_id": 100691638, "body": "@00 Non-greedy doesn&#39;t help. That shortens the match on the right, not the left."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 2, "creation_date": 1563400308, "post_id": 57084214, "comment_id": 100692083, "body": "There is only one solution for greater than the &quot;second&quot; tab. That is <code>^(?:[^\\t]*\\t){2}(.*?)\\n</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1563401820, "post_id": 57084214, "comment_id": 100692433, "body": "@sln Post that as an answer"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6553328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/omcAX.jpg?s=128&g=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/6553328/emma"}, "is_accepted": false, "score": 1, "last_activity_date": 1563402820, "creation_date": 1563402820, "answer_id": 57084809, "question_id": 57084214, "link": "https://stackoverflow.com/questions/57084214/when-using-re-search-how-do-i-search-for-the-second-instance-rather-than-the/57084809#57084809", "title": "When using &quot;re.search&quot;, how do I search for the second instance rather than the first?", "body": "<p>This modified version of your expression does return the desired output:</p>\n\n<pre><code>import re\n\ncode = '69.22\\t82.62\\t134.549\\n'\nprint(re.findall(r'.*\\t(.+?)\\n', code))\n</code></pre>\n\n<h3>Output</h3>\n\n<pre><code>['134.549']\n</code></pre>\n\n<p>I'm though guessing that maybe you'd like to design an expression, somewhat similar to:</p>\n\n<pre><code>(?&lt;=[\\t])(.+?)(?=[\\n])\n</code></pre>\n\n<h3><a href=\"https://regex101.com/r/eTUWRB/1/\" rel=\"nofollow noreferrer\">DEMO</a></h3>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": false, "score": 2, "last_activity_date": 1563406111, "creation_date": 1563406111, "answer_id": 57085214, "question_id": 57084214, "link": "https://stackoverflow.com/questions/57084214/when-using-re-search-how-do-i-search-for-the-second-instance-rather-than-the/57085214#57085214", "title": "When using &quot;re.search&quot;, how do I search for the second instance rather than the first?", "body": "<p>There is only one solution for greater than the \"second\" tab.<br>\nYou can do it like this  :</p>\n\n<p><code>^(?:[^\\t]*\\t){2}(.*?)\\n</code></p>\n\n<p>Explained  </p>\n\n<pre><code> ^                     # BOS\n (?:                   # Cluster\n      [^\\t]*                # Many not tab characters\n      \\t                    # A tab\n ){2}                  # End cluster, do 2 times\n ( .*? )               # (1), anything up to\n \\n                    # first newline\n</code></pre>\n\n<p>Python code  </p>\n\n<pre><code>&gt;&gt;&gt; import re\n&gt;&gt;&gt; text = '69.22\\t82.62\\t134.549\\n'\n&gt;&gt;&gt; m = re.search('^(?:[^\\t]*\\t){2}(.*?)\\n', text)\n&gt;&gt;&gt; if m:\n&gt;&gt;&gt;     print( m.group(1) )\n...\n134.549\n&gt;&gt;&gt;\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 11673007, "user_type": "registered", "profile_image": "https://graph.facebook.com/10219953803700487/picture?type=large", "display_name": "Jason Reed", "link": "https://stackoverflow.com/users/11673007/jason-reed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1563406111, "creation_date": 1563398502, "last_edit_date": 1563398667, "question_id": 57084214, "link": "https://stackoverflow.com/questions/57084214/when-using-re-search-how-do-i-search-for-the-second-instance-rather-than-the", "title": "When using &quot;re.search&quot;, how do I search for the second instance rather than the first?", "body": "<p>re.search looks for the first instance of something. In the following code, \"\\t\" appears twice. Is there a way to make it skip forward to the second instance?</p>\n\n<pre><code>code = ['69.22\\t82.62\\t134.549\\n']\nlist = []\ntext = code\nm = re.search('\\t(.+?)\\n', text)\nif m:\n    found = m.group(1)\n    list.append(found)\n</code></pre>\n\n<p>result: </p>\n\n<pre><code>list = ['82.62\\t134.549']\n</code></pre>\n\n<p>expected: </p>\n\n<pre><code>list = ['134.549']\n</code></pre>\n"}, {"tags": ["python", "dictionary", "join"], "comments": [{"owner": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "edited": false, "score": 5, "creation_date": 1563398427, "post_id": 57084186, "comment_id": 100691505, "body": "<code>d1.update(d2)</code> ?"}, {"owner": {"reputation": 335, "user_id": 11639518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oHyIi.jpg?s=128&g=1", "display_name": "jhelphenstine", "link": "https://stackoverflow.com/users/11639518/jhelphenstine"}, "edited": false, "score": 2, "creation_date": 1563398716, "post_id": 57084186, "comment_id": 100691603, "body": "@marco-bonelli I don&#39;t think it&#39;s a dupe, because the poster doesn&#39;t look like he&#39;s trying to merge dictionaries, but rather preserve his primary key (&#39;id&#39;). That&#39;s different from the answer you&#39;ve referenced as duplicate."}], "answers": [{"comments": [{"owner": {"reputation": 47633, "user_id": 3889449, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/eb07e0f09deb982a1a0deedca7a5c002?s=128&d=identicon&r=PG", "display_name": "Marco Bonelli", "link": "https://stackoverflow.com/users/3889449/marco-bonelli"}, "edited": false, "score": 0, "creation_date": 1563398781, "post_id": 57084237, "comment_id": 100691624, "body": "What part of the question makes you assume that this is what OP wants? It is clearly not."}, {"owner": {"reputation": 335, "user_id": 11639518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oHyIi.jpg?s=128&g=1", "display_name": "jhelphenstine", "link": "https://stackoverflow.com/users/11639518/jhelphenstine"}, "reply_to_user": {"reputation": 47633, "user_id": 3889449, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/eb07e0f09deb982a1a0deedca7a5c002?s=128&d=identicon&r=PG", "display_name": "Marco Bonelli", "link": "https://stackoverflow.com/users/3889449/marco-bonelli"}, "edited": false, "score": 0, "creation_date": 1563398845, "post_id": 57084237, "comment_id": 100691648, "body": "He&#39;s trying to merge dictionaries and preserve the primary key, &quot;id&quot;, near as I can tell, so I&#39;ve offered a way that preserves the unique ID as well as his values."}, {"owner": {"reputation": 47633, "user_id": 3889449, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/eb07e0f09deb982a1a0deedca7a5c002?s=128&d=identicon&r=PG", "display_name": "Marco Bonelli", "link": "https://stackoverflow.com/users/3889449/marco-bonelli"}, "edited": false, "score": 0, "creation_date": 1563398939, "post_id": 57084237, "comment_id": 100691682, "body": "I&#39;d rather say that he is assuming having two dictionaries with the same <code>id</code> key and value, and other different keys. That looks more plausible IMHO."}, {"owner": {"reputation": 335, "user_id": 11639518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oHyIi.jpg?s=128&g=1", "display_name": "jhelphenstine", "link": "https://stackoverflow.com/users/11639518/jhelphenstine"}, "reply_to_user": {"reputation": 47633, "user_id": 3889449, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/eb07e0f09deb982a1a0deedca7a5c002?s=128&d=identicon&r=PG", "display_name": "Marco Bonelli", "link": "https://stackoverflow.com/users/3889449/marco-bonelli"}, "edited": false, "score": 0, "creation_date": 1563399067, "post_id": 57084237, "comment_id": 100691720, "body": "I see a primary key of id=&#39;centos7&#39;, and a dictionary with remoteVersion and one with localVersion. I&#39;d offer a better solution might be a class of nodes defined with members &#39;id&#39;, &#39;localVersion&#39;, and &#39;remoteVersion&#39;, than using dictionaries. Either way, it doesn&#39;t look like an attempt to merge dictionaries as referenced with the answer you&#39;ve linked."}, {"owner": {"reputation": 47633, "user_id": 3889449, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/eb07e0f09deb982a1a0deedca7a5c002?s=128&d=identicon&r=PG", "display_name": "Marco Bonelli", "link": "https://stackoverflow.com/users/3889449/marco-bonelli"}, "edited": false, "score": 0, "creation_date": 1563399301, "post_id": 57084237, "comment_id": 100691797, "body": "Okay, I can see that the question can be intended both ways, you&#39;re right. OP should have made it clearer."}], "tags": [], "owner": {"reputation": 335, "user_id": 11639518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oHyIi.jpg?s=128&g=1", "display_name": "jhelphenstine", "link": "https://stackoverflow.com/users/11639518/jhelphenstine"}, "is_accepted": false, "score": 0, "last_activity_date": 1563399196, "last_edit_date": 1563399196, "creation_date": 1563398653, "answer_id": 57084237, "question_id": 57084186, "link": "https://stackoverflow.com/questions/57084186/how-do-i-join-two-dictionaries-based-on-a-common-key/57084237#57084237", "title": "How do I join two dictionaries based on a common key?", "body": "<p>Python dictionaries can only have one value per key. You could use a list comprehension to generate a dictionary with values as a list containing the values from your two dictionaries, if you want to avoid writing out an iterator over all the items. An example of a resulting data structure:</p>\n\n<pre><code>{'centos':[{'remoteVersion':'7.6', 'localVersion':'7.5'}]}\n</code></pre>\n\n<p>That said, I think another solution for you may be using a class:</p>\n\n<pre><code>class myNode:\n    def __init__(self, id, remoteVersion, localVersion):\n        self.id = id\n        self.remoteVersion = remoteVersion\n        self.localVersion = localVersion\n</code></pre>\n\n<p>This allows you to generate myNode objects:</p>\n\n<pre><code>node1 = myNode('centos7', '7.6', '7.5')\n</code></pre>\n"}], "owner": {"reputation": 345, "user_id": 10795189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KoG0O.jpg?s=128&g=1", "display_name": "Chef Tony", "link": "https://stackoverflow.com/users/10795189/chef-tony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1563424747, "creation_date": 1563398353, "question_id": 57084186, "link": "https://stackoverflow.com/questions/57084186/how-do-i-join-two-dictionaries-based-on-a-common-key", "title": "How do I join two dictionaries based on a common key?", "body": "<p>I have this dictionary:</p>\n\n<pre><code>{'id': 'centos7', 'remoteVersion': '7.6'}\n</code></pre>\n\n<p>and this one:</p>\n\n<pre><code>{'id': 'centos7', 'localVersion': '7.5'}\n</code></pre>\n\n<p>I'd like to get:</p>\n\n<pre><code>{'id': 'centos7', 'remoteVersion': '7.6', 'localVersion': '7.5'}\n</code></pre>\n\n<p>Is there a pythonic way to do it without having to iterate over all the items?</p>\n"}, {"tags": ["python", "ruamel.yaml"], "answers": [{"tags": [], "owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "is_accepted": true, "score": 0, "last_activity_date": 1563447333, "creation_date": 1563447333, "answer_id": 57092903, "question_id": 57084158, "link": "https://stackoverflow.com/questions/57084158/how-to-avoid-an-error-when-applying-comments-eol-and-before-a-key-to-yaml-using/57092903#57092903", "title": "How to avoid an error when applying comments eol and before a key to yaml using ruamel.yaml?", "body": "<p>Your pseudo-code hides what you are doing wrong. If you would take the time to\nmake a minimal non-working example, that generates that error, you'll notice that it will just work.\nFrom that you can work back to determine where in your code the error lies.</p>\n\n<p>Working with the same classes and methods that you used:</p>\n\n<pre><code>import sys\nimport ruamel.yaml\nfrom ruamel.yaml.comments import CommentedMap, CommentedSeq\n\ndata = CommentedMap(dict(name=\"hydrated-cluster\"))\ndata.yaml_set_start_comment(\"TOP_LEVEL_COMMENT\")\ntemp_list = CommentedSeq()\n\nd2 = CommentedMap(data=\"elasticsearch-fluentd-kibana\")\nd2.yaml_add_eol_comment(comment=\"# inline comment\", key='data')\ndata['subcomponents'] = l3 = CommentedSeq([d2])\nl3.yaml_set_comment_before_after_key(key=0, before=\"top comment\", indent=2)\n\nyaml = ruamel.yaml.YAML()\nyaml.indent(sequence=4, offset=2)\nyaml.dump(data, sys.stdout)\n</code></pre>\n\n<p>and the above gives what you expect:</p>\n\n<pre><code># TOP_LEVEL_COMMENT\nname: hydrated-cluster\nsubcomponents:\n  # top comment\n  - data: elasticsearch-fluentd-kibana  # inline comment\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 11726139, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Aw4orD0bfLY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcfAeiMB5O56ycqdQzrlql01lhIUQ/photo.jpg?sz=128", "display_name": "Andrew", "link": "https://stackoverflow.com/users/11726139/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 57092903, "answer_count": 1, "score": 0, "last_activity_date": 1563447333, "creation_date": 1563398187, "last_edit_date": 1563399653, "question_id": 57084158, "link": "https://stackoverflow.com/questions/57084158/how-to-avoid-an-error-when-applying-comments-eol-and-before-a-key-to-yaml-using", "title": "How to avoid an error when applying comments eol and before a key to yaml using ruamel.yaml?", "body": "<p>I'm constructing a yaml file from data and adding comments to sections that need manual user editing. For each category of data, I'm including a top level comment, but I also want to include end of line (eol) comments on the list items. I'm encountering an error internal to ruamel code when attempting this.</p>\n\n<p>I'm using ruamel.yaml 0.15.96. This is the error: </p>\n\n<pre><code>AttributeError: 'NoneType' object has no attribute 'append'\n</code></pre>\n\n<p>It occurs in <code>comments.py</code>, line 261, in <code>yaml_set_comment_before_after_key</code>.</p>\n\n<p>I think because I'm setting an eol comment, the data structure is different, so when I add a before comment, this line executes: <code>c[1].append(comment_token(com, start_mark))</code>\nand fails because <code>c[1]</code> is <code>None</code> instead of <code>[]</code>.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># Pseudocode, removed irrelevant details\ndata = CommentedMap(TopLevelData)\ndata.yaml_set_start_comment(TOP_LEVEL_COMMENT)\ntemp_list = CommentedSeq()\n\nfor top_comment, start_index, matches in match_categories:\n    components = self._matches_to_components(matches)\n    for idx, subcomponent in enumerate(components):\n         temp_list.append(data)\n         temp_list.yaml_add_eol_comment(comment=inline_comment,\n                                        key=idx)\n    temp_list.yaml_set_comment_before_after_key(key=start_index,\n                                                before=top_comment,\n                                                indent=OFFSET)\ndata['subcomponents'] = temp_list\n</code></pre>\n\n<p>I expect the output to look something like this:</p>\n\n<pre><code># TOP_LEVEL_COMMENT\nname: hydrated-cluster\nsubcomponents:\n  # top_comment\n  - data: elasticsearch-fluentd-kibana # inline comment\n</code></pre>\n"}, {"tags": ["python", "pandas", "bokeh"], "comments": [{"owner": {"reputation": 4159, "user_id": 8212173, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5ApXfoDEeNA/AAAAAAAAAAI/AAAAAAAAADc/9wpTVfHMarU/photo.jpg?sz=128", "display_name": "amanb", "link": "https://stackoverflow.com/users/8212173/amanb"}, "edited": false, "score": 0, "creation_date": 1563399136, "post_id": 57084145, "comment_id": 100691745, "body": "Error: <code>NameError: name &#39;latlonrange&#39; is not defined</code>"}, {"owner": {"reputation": 731, "user_id": 4670408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d1c16454540ac9d57ae95a6aab0e650?s=128&d=identicon&r=PG&f=1", "display_name": "Vinay", "link": "https://stackoverflow.com/users/4670408/vinay"}, "reply_to_user": {"reputation": 4159, "user_id": 8212173, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5ApXfoDEeNA/AAAAAAAAAAI/AAAAAAAAADc/9wpTVfHMarU/photo.jpg?sz=128", "display_name": "amanb", "link": "https://stackoverflow.com/users/8212173/amanb"}, "edited": false, "score": 0, "creation_date": 1563399437, "post_id": 57084145, "comment_id": 100691830, "body": "Added the function. Please try now."}], "answers": [{"comments": [{"owner": {"reputation": 731, "user_id": 4670408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d1c16454540ac9d57ae95a6aab0e650?s=128&d=identicon&r=PG&f=1", "display_name": "Vinay", "link": "https://stackoverflow.com/users/4670408/vinay"}, "edited": false, "score": 0, "creation_date": 1563421100, "post_id": 57086757, "comment_id": 100696163, "body": "Must be because of bokeh version 1.2.0? The same code worked fine in 1.0.4."}, {"owner": {"reputation": 29976, "user_id": 3406693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwfWQ.png?s=128&g=1", "display_name": "bigreddot", "link": "https://stackoverflow.com/users/3406693/bigreddot"}, "edited": false, "score": 0, "creation_date": 1563432240, "post_id": 57086757, "comment_id": 100699325, "body": "I can guarantee we&#39;ve never tested <code>LabelSet</code> with <code>level=&#39;glyph&#39;</code>. It&#39;s definitely not anything we would have imagined or intended. The default level <code>annotation</code> was chosen specifically to make sure that the labels rendered on top of everything else. I would generally consider <code>level</code> to be an implementation detail accidentally and unfortunately leaked in to the public API and would advise against tinkering with it in any case."}], "tags": [], "owner": {"reputation": 83262, "user_id": 772649, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/03ad01df45fef92e267641197ad00e36?s=128&d=identicon&r=PG", "display_name": "HYRY", "link": "https://stackoverflow.com/users/772649/hyry"}, "is_accepted": true, "score": 2, "last_activity_date": 1563420909, "creation_date": 1563420909, "answer_id": 57086757, "question_id": 57084145, "link": "https://stackoverflow.com/questions/57084145/bokeh-doesnt-show-labels/57086757#57086757", "title": "Bokeh doesn&#39;t show labels?", "body": "<p>remove the argument  <code>level='glyph'</code>.</p>\n"}], "owner": {"reputation": 731, "user_id": 4670408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d1c16454540ac9d57ae95a6aab0e650?s=128&d=identicon&r=PG&f=1", "display_name": "Vinay", "link": "https://stackoverflow.com/users/4670408/vinay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 708, "favorite_count": 0, "accepted_answer_id": 57086757, "answer_count": 1, "score": 0, "last_activity_date": 1563420909, "creation_date": 1563398089, "last_edit_date": 1563399407, "question_id": 57084145, "link": "https://stackoverflow.com/questions/57084145/bokeh-doesnt-show-labels", "title": "Bokeh doesn&#39;t show labels?", "body": "<p>I am trying to put labels in some circles. I have used the following code which worked fine for a similar example but not working here.</p>\n\n<pre><code>from bokeh.plotting import figure, show, save\nfrom bokeh.tile_providers import CARTODBPOSITRON_RETINA\nfrom bokeh.io import curdoc, output_notebook, output_file, export_png\nfrom pyproj import Proj, transform\nfrom bokeh.transform import linear_cmap, log_cmap\nimport pandas as pd\nfrom bokeh.models import (\n  GeoJSONDataSource, ColumnDataSource, Circle,CircleX,Hex, Square, Patches, LabelSet, HoverTool,Legend, LegendItem, Plot, LinearAxis, Grid, LogColorMapper, LinearColorMapper, ColorBar, BasicTicker,\n  TapTool,Range1d, PanTool, WheelZoomTool, BoxSelectTool,OpenURL, ZoomInTool, ZoomOutTool, Arrow, OpenHead, NormalHead, VeeHead, LabelSet, Label\n)\nfrom bokeh.palettes import *\nfrom haversine import haversine   \n\ndef latlonrange(lat1,lon1,lat2,lon2):\n    p1 = Proj(init='epsg:4326')\n    p2 = Proj(init='epsg:3857')    \n    x1, y1 = transform(p1,p2,lon1,lat1)\n    x2, y2 = transform(p1,p2,lon2,lat2)\n    return {\"x_range\":(x1, x2), \"y_range\":(y1,y2)}   \n\ndf = pd.DataFrame({'daily_cartons': [478,378,763,859], \n                   'daily_cartonsPercent': [19,15,31,35],\n                   'clong': [42.259387,42.235110,42.136309,41.874587],\n                   'clat': [-71.689145,-71.182045,-71.045608,-71.405451],          \n                   'cx_merc': [-7.980399e+06,-7.923949e+06,-7.908761e+06,-7.948818e+06],\n                   'cy_merc': [5.199914e+06,5.196263e+06,5.181420e+06,5.142212e+06]\n                  })\n\ncurdoc().clear()\noutput_notebook()\n\nlatlonbox = latlonrange(43, -74, 41, -69)\n\np = figure(title=\"XXXX\",\n           x_range=latlonbox[\"x_range\"], y_range=latlonbox[\"y_range\"],\n           x_axis_type=\"mercator\", y_axis_type=\"mercator\",\n           plot_width=1200, plot_height=750,\n           tools=\"pan,wheel_zoom,box_zoom,reset,zoom_in,zoom_out,save\")\np.add_tile(CARTODBPOSITRON_RETINA)\n\n\nksource = ColumnDataSource(dict(x=df['cx_merc'], y=df['cy_merc'], daily_cartons = df['daily_cartons'],\n                                daily_cartons_perc = df['daily_cartonsPercent'].astype(str) + '%', lcolor=viridis(4)))\n\nkcircle = Circle(x=\"x\", y=\"y\", size=30, line_color=\"#de2d26\", fill_color=\"white\", line_width=2, fill_alpha=1)\nkc1 = p.add_glyph(ksource, kcircle)\n\nklabels = LabelSet(x='x', y='y', text='daily_cartons_perc', level='glyph', source=ksource, render_mode='canvas',\n                   x_offset=-7, text_font_size = '8pt',text_font_style='bold', text_color = 'black', text_baseline ='middle' )\np.add_layout(klabels)\n\nkc1_hover = HoverTool(renderers=[kc1], tooltips=[('Daily_cartons: ', '@daily_cartons{00,000}')])\np.add_tools(kc1_hover)\n# #----------------------------------------------------------------------------------------------------------------------------------\n\nshow(p)\n</code></pre>\n\n<p>The above code is showing the circles but not the labels. Can't figure out why?</p>\n\n<p><a href=\"https://i.stack.imgur.com/SRu5V.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SRu5V.png\" alt=\"enter image description here\"></a></p>\n\n<p>Python:3.7.3, Bokeh:1.2.0</p>\n"}, {"tags": ["python", "django", ".htaccess", "url", "apache2"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 1, "creation_date": 1563398056, "post_id": 57084127, "comment_id": 100691371, "body": "That is the way django normally works. Just write a URL pattern."}, {"owner": {"reputation": 1809, "user_id": 11098471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cGStL.png?s=128&g=1", "display_name": "Keimeno", "link": "https://stackoverflow.com/users/11098471/keimeno"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1563398553, "post_id": 57084127, "comment_id": 100691543, "body": "But how? It doesn&#39;t automatically rewrite it you if you enter ?id=3737332 or something else as the query. Do you know a source where I can learn how to do that?"}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 1, "creation_date": 1563398898, "post_id": 57084127, "comment_id": 100691664, "body": "But &quot;rewriting&quot; is not a relevant concept here. You design the URLs however you want. If you want the URL to be just the ID, then put that in the urls.py."}], "answers": [{"comments": [{"owner": {"reputation": 1809, "user_id": 11098471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cGStL.png?s=128&g=1", "display_name": "Keimeno", "link": "https://stackoverflow.com/users/11098471/keimeno"}, "edited": false, "score": 1, "creation_date": 1563399330, "post_id": 57084236, "comment_id": 100691810, "body": "Hey, thanks for the answer! But how can I then get the int in my views? Can I just get it as another parameter, in e.g. <code>def myView(request, id):</code>? Or would I split the URI and read it from there? Or is there a better way to do that?"}, {"owner": {"reputation": 40, "user_id": 10549363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e77d2fe3f1f438241be4f48684beb0e4?s=128&d=identicon&r=PG&f=1", "display_name": "BrudZ", "link": "https://stackoverflow.com/users/10549363/brudz"}, "reply_to_user": {"reputation": 1809, "user_id": 11098471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cGStL.png?s=128&g=1", "display_name": "Keimeno", "link": "https://stackoverflow.com/users/11098471/keimeno"}, "edited": false, "score": 0, "creation_date": 1563399723, "post_id": 57084236, "comment_id": 100691917, "body": "Yes, @GeorgeWalt. Here&#39;s the explanation from the Django tutorial: <a href=\"https://docs.djangoproject.com/en/2.2/intro/tutorial03/\" rel=\"nofollow noreferrer\">docs.djangoproject.com/en/2.2/intro/tutorial03</a>."}], "tags": [], "owner": {"reputation": 40, "user_id": 10549363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e77d2fe3f1f438241be4f48684beb0e4?s=128&d=identicon&r=PG&f=1", "display_name": "BrudZ", "link": "https://stackoverflow.com/users/10549363/brudz"}, "is_accepted": true, "score": 2, "last_activity_date": 1563398646, "creation_date": 1563398646, "answer_id": 57084236, "question_id": 57084127, "link": "https://stackoverflow.com/questions/57084127/url-rewriting-with-django/57084236#57084236", "title": "URL rewriting with Django", "body": "<p>In Django, in your <code>urls.py</code>, define in <code>url_patterns</code>:</p>\n\n<pre><code>url_patterns = [\n    path('/&lt;int:id&gt;', view_name_goes_here),\n]\n</code></pre>\n\n<p>Then, configure the corresponding functions in your <code>views.py</code> to accept the <code>id</code> parameter and get the corresponding object.</p>\n\n<p>You don't need to modify your Apache config beyond adding in the <code>WGSI</code> setup for Django.</p>\n"}], "owner": {"reputation": 1809, "user_id": 11098471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cGStL.png?s=128&g=1", "display_name": "Keimeno", "link": "https://stackoverflow.com/users/11098471/keimeno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 741, "favorite_count": 0, "accepted_answer_id": 57084236, "answer_count": 1, "score": 0, "last_activity_date": 1563398646, "creation_date": 1563397967, "question_id": 57084127, "link": "https://stackoverflow.com/questions/57084127/url-rewriting-with-django", "title": "URL rewriting with Django", "body": "<p>The Problem I want to solve is the following: \nE.g. we have <a href=\"https://example.com/?id=e46Hd3cDe\" rel=\"nofollow noreferrer\">https://example.com/?id=e46Hd3cDe</a>. But I want to make it look nicer so I want users to be able to go to this link: <a href=\"https://example.com/e46Hd3cDe\" rel=\"nofollow noreferrer\">https://example.com/e46Hd3cDe</a> and get the same HTML file returned.</p>\n\n<p>How could I achieve this in Django?\nIf I would have to change something in the Apache config, how could I do that while testing Django locally? Currently, I test my Django website by calling <code>python manage.py runserver</code> and opening it at localhost:8000.</p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 2703, "user_id": 11745557, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WJRbH.jpg?s=128&g=1", "display_name": "Shizzen83", "link": "https://stackoverflow.com/users/11745557/shizzen83"}, "edited": false, "score": 2, "creation_date": 1563398644, "post_id": 57084177, "comment_id": 100691574, "body": "There is a missing <code>else</code> in case of password fail which wouldn&#39;t trigger the last <code>else</code>. And the OP may learn to simplify the loop with a <code>for singleUser in user1</code> instead of <code>for i in range(len(user1))</code>"}, {"owner": {"reputation": 1, "user_id": 11799723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d116369e17f936d1df562a12e7d722?s=128&d=identicon&r=PG&f=1", "display_name": "sssNN", "link": "https://stackoverflow.com/users/11799723/sssnn"}, "edited": false, "score": 0, "creation_date": 1563418949, "post_id": 57084177, "comment_id": 100695746, "body": "else:         print(&quot;Account not exist, input new one&quot;)   I tried this, but now work well. When I enter first unexist account, it will show 3 times out put &quot;Accout not exist... and after that, enter a correct input will also tell me the account not exist....  I think maybe the first time enter unexist account name, the for loop only check first index, and compare it is not exist, then print account not exist, It not loop all the index if I put a wrong user name at first time..."}, {"owner": {"reputation": 1, "user_id": 11799723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d116369e17f936d1df562a12e7d722?s=128&d=identicon&r=PG&f=1", "display_name": "sssNN", "link": "https://stackoverflow.com/users/11799723/sssnn"}, "edited": false, "score": 0, "creation_date": 1563491649, "post_id": 57084177, "comment_id": 100728251, "body": "I change the indentation, still have a small problem which is I put wrong account name, it does not have any out put. just ask you to input a new user name...I have no idea why it happened,"}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 2, "last_activity_date": 1563465751, "last_edit_date": 1563465751, "creation_date": 1563398286, "answer_id": 57084177, "question_id": 57084123, "link": "https://stackoverflow.com/questions/57084123/why-my-for-looping-an-index-in-python-not-give-me-correct-output/57084177#57084177", "title": "Why my for looping an index in python not give me correct output", "body": "<p>Look at the logic of your loop body:</p>\n\n<pre><code>for i in range(len(user1)):\n    if name == user1[i]['name']:  \n        password = input('Password\uff1a')\n        if password == user1[i]['password']:  \n            print(\"Success login\")\n    continue\n    if name != user1[i]['name']:\n        print(\"Account not exist, input new one\")\n</code></pre>\n\n<p>Regardless of the input, you will <em>never</em> get to the second <code>if</code> statement: any time your program gets to that point, you tell it to <code>continue</code> with the next loop iteration.  Try this instead:</p>\n\n<pre><code>for i in range(len(user1)):\n    if name == user1[i]['name']:  \n        password = input('Password\uff1a')\n        if password == user1[i]['password']:  \n            print(\"Success login\")\n        else:\n            print(\"Account not exist, input new one\")\n</code></pre>\n\n<p>Note that this will work better if you put the all of the accounts into a single dict, so you can access them directly:</p>\n\n<pre><code>user1 = {\n   '123': {'id':'0001', 'password':'a123', 'balance':0.00},\n   '456': {'id':'0002', 'password':'a456', 'balance':0.00},  \n   '789': {'id':'0003', 'password':'a789', 'balance':0.00}\n}\n</code></pre>\n\n<p>This allows you to directly access each account by name, rather than searching the entire list for the user trying to log in.</p>\n"}], "owner": {"reputation": 1, "user_id": 11799723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d116369e17f936d1df562a12e7d722?s=128&d=identicon&r=PG&f=1", "display_name": "sssNN", "link": "https://stackoverflow.com/users/11799723/sssnn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1563465751, "creation_date": 1563397950, "last_edit_date": 1563398162, "question_id": 57084123, "link": "https://stackoverflow.com/questions/57084123/why-my-for-looping-an-index-in-python-not-give-me-correct-output", "title": "Why my for looping an index in python not give me correct output", "body": "<p>I am new learner for python.I am trying to make a basic login accout check, and somehow, my code is not showing what I want. I have defined three user name, and when I run my code, if the first time I put an incorrect user name, the code show account not exit,but it is not shoing. I do not know why</p>\n\n<p>I believe it is my for loop problem, because when I input a wrong account, my i index start at 0 and keep loop until the end index and compare the input username and the exist username in the list. Then after compare all the index if not found user name, then print account not exist, I try to fix this issue, but not find a correct way. </p>\n\n<pre><code>user1=[  \n   {'id':'0001','name':'123','password':'a123', 'balance':0.00},\n   {'id':'0002','name':'456','password':'a456', 'balance':0.00},  \n   {'id':'0003','name':'789','password':'a789', 'balance':0.00}\n]\n\nfor x in range(0,4):\n\n    name = input('User Name\uff1a')\n    for i in range(len(user1)):\n        if name == user1[i]['name']:  \n            password = input('Password\uff1a')\n            if password == user1[i]['password']:  \n                print(\"Success login\")\n        continue\n        if name != user1[i]['name']:\n            print(\"Account not exist, input new one\")\n</code></pre>\n\n<p>If I input wrong user name; it should show account not exist input new one, then I put user name 456 then will ask the correct password.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 1, "creation_date": 1563398306, "post_id": 57084120, "comment_id": 100691464, "body": "so you want to know how many counties each state  has? if so, do <code>counties.reset_index().groupby(&#39;State&#39;).size()</code>"}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "reply_to_user": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 0, "creation_date": 1563402980, "post_id": 57084120, "comment_id": 100692693, "body": "@Yuca do you really need <code>reset_index()</code>?"}, {"owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 0, "creation_date": 1563404020, "post_id": 57084120, "comment_id": 100692950, "body": "not sure actually how groupby behaves with multtiindex, so I took the safety route"}], "answers": [{"tags": [], "owner": {"reputation": 602, "user_id": 8094885, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155247411868190/picture?type=large", "display_name": "Gustavo Gradvohl", "link": "https://stackoverflow.com/users/8094885/gustavo-gradvohl"}, "is_accepted": false, "score": 0, "last_activity_date": 1563398784, "creation_date": 1563398784, "answer_id": 57084260, "question_id": 57084120, "link": "https://stackoverflow.com/questions/57084120/how-to-count-the-element-with-the-same-index/57084260#57084260", "title": "how to count the element with the same index?", "body": "<h1>try:</h1>\n\n<pre><code>counties.groupby(['State','County']).agg('count')\n</code></pre>\n\n<h1>instead of:</h1>\n\n<pre><code>counties = counties.set_index(['State', 'County']).count()\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 11766005, "user_type": "registered", "profile_image": "https://graph.facebook.com/1398331410307950/picture?type=large", "display_name": "Ra&#250;l Santamar&#237;a", "link": "https://stackoverflow.com/users/11766005/ra%c3%bal-santamar%c3%ada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1563431480, "creation_date": 1563397928, "last_edit_date": 1563431480, "question_id": 57084120, "link": "https://stackoverflow.com/questions/57084120/how-to-count-the-element-with-the-same-index", "title": "how to count the element with the same index?", "body": "<p>I have to get the numbers of counties of every state from a CSV file and then return which state has the most counties. But I don't know how to count the element that is under the de same index</p>\n\n<p>csv file:\n<a href=\"https://i.stack.imgur.com/WItqn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WItqn.png\" alt=\"enter image description here\"></a></p>\n\n<p>I tried to use .count() and numerate() but returns me an error key error: \"Alabama\" </p>\n\n<p>this is the code I used to create the actual data frame from the CSV file</p>\n\n<pre><code>import pandas as PD\n\ncensus = pd.read_csv('census.csv')\ncounties = pd.DataFrame({'State':census['STNAME'],'County':census['CTYNAME'],\n         'populations':census['CENSUS2010POP'],'population 2010': census['POPESTIMATE2010'], \n         'population 2015': census['POPESTIMATE2015']})\ncounties = counties.set_index(['State', 'County'])\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "windows", "oracle", "docker"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 11799703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78a49e2dd6d278e8e028f5ceb3a639a9?s=128&d=identicon&r=PG&f=1", "display_name": "chirag1404", "link": "https://stackoverflow.com/users/11799703/chirag1404"}, "edited": false, "score": 0, "creation_date": 1563817817, "post_id": 57120124, "comment_id": 100817689, "body": "No, this doesn&#39;t help"}], "tags": [], "owner": {"reputation": 1, "user_id": 11810344, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/fbc1bed91e3d01e3938bf21e0ebf2783?s=128&d=identicon&r=PG", "display_name": "Norman", "link": "https://stackoverflow.com/users/11810344/norman"}, "is_accepted": false, "score": 0, "last_activity_date": 1563574555, "creation_date": 1563574555, "answer_id": 57120124, "question_id": 57084112, "link": "https://stackoverflow.com/questions/57084112/how-can-a-python-code-in-a-docker-container-access-external-oracle-database/57120124#57120124", "title": "How can a python code in a docker container access external oracle database?", "body": "<p>According to Docker documentation, option to use the host network is <em>--network=\"host\"</em>.  See if that can resolve your problem.</p>\n"}], "owner": {"reputation": 35, "user_id": 11799703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78a49e2dd6d278e8e028f5ceb3a639a9?s=128&d=identicon&r=PG&f=1", "display_name": "chirag1404", "link": "https://stackoverflow.com/users/11799703/chirag1404"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 631, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1563574555, "creation_date": 1563397899, "last_edit_date": 1563399469, "question_id": 57084112, "link": "https://stackoverflow.com/questions/57084112/how-can-a-python-code-in-a-docker-container-access-external-oracle-database", "title": "How can a python code in a docker container access external oracle database?", "body": "<p>I am able to connect/ ping to my external database on my Windows host machine.\nAlso, I am able to ping the same network from my docker Quickstart terminal.</p>\n\n<p>The external database is on another server probably behind the company's firewall.</p>\n\n<p>However, when I try to run the container, which has a python file that connects to an Oracle database, I get this error: </p>\n\n<blockquote>\n  <p>ORA-12170: TNS:Connect timeout occurred</p>\n</blockquote>\n\n<p>However, I can run the python file independently without the containers. </p>\n\n<p>It seems like, the container is configured on another network and might not have access to the oracle database.</p>\n\n<p>I have tried using</p>\n\n<pre><code>docker run -it -net=host image_name\n</code></pre>\n\n<p>But this does not solve the problem.</p>\n\n<p>Here is my docker file-</p>\n\n<pre><code># INSTALL PYTHON IMAGE\nFROM python:3.7.2-slim\nRUN apt-get update \\\n    &amp;&amp; apt-get -y install unzip \\\n    &amp;&amp; apt-get -y install libaio-dev \\\n    &amp;&amp; apt-get install -y iputils-ping \\\n    &amp;&amp; apt-get -y install sudo \\\n    &amp;&amp; mkdir -p /opt/data/app\n\nADD ./oracle-instantclient/ /opt/data\nADD ./requirements.txt /opt/data\nADD ./app/ /opt/data/app\nWORKDIR /opt/data\nENV ORACLE_HOME=/opt/data/oracle-instantclient/instantclient-basic-linux.x64-12.1.0.2.0/instantclient_12_1\nENV LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$ORACLE_HOME\nENV OCI_HOME=/opt/data/oracle-instantclient/instantclient-basic-linux.x64-12.1.0.2.0/instantclient_12_1\nENV OCI_LIB_DIR=/opt/data/oracle-instantclient/instantclient-basic-linux.x64-12.1.0.2.0/instantclient_12_1\nENV OCI_INCLUDE_DIR=/opt/data/oracle-instantclient/instantclient-basic-linux.x64-12.1.0.2.0/instantclient_12_1\n\nRUN pip install --upgrade pip\nRUN pip install -r requirements.txt\nCOPY . .\nEXPOSE 5000\nCMD [\"python\",\"./app/Oracle_ETL.py\"]\n</code></pre>\n\n<p>Here is an extract from my python file:</p>\n\n<pre><code>import cx_Oracle\nimport pandas as pd\ndb = cx_Oracle.connect('Username/Password@host:port/db_name')\nselect_sql = 'Select * from temp_table'\ndf_temp = pd.read_sql(select_sql, con=db)\n.\n.\n.\n</code></pre>\n\n<p>I would like to know how do we run this python file from inside the container.</p>\n"}, {"tags": ["python", "virtualenv", "conda"], "comments": [{"owner": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 1, "creation_date": 1563411253, "post_id": 57084104, "comment_id": 100694348, "body": "What is the output of <code>conda list -n gcloud</code> (or just <code>conda list</code> with the environment activated)?"}, {"owner": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "reply_to_user": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 0, "creation_date": 1563463997, "post_id": 57084104, "comment_id": 100717413, "body": "Added the output. I&#39;m guessing it might have to do with environment.yml prefix listing ..\\envs\\gcloud\\envs\\gcloud instead of just ..\\envs\\gcloud"}, {"owner": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 2, "creation_date": 1563464549, "post_id": 57084104, "comment_id": 100717715, "body": "Yes, that&#39;s very strange. Can you try <code>conda env export -n gcloud -f gcloudenv.yml</code>?"}, {"owner": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "reply_to_user": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 0, "creation_date": 1563465654, "post_id": 57084104, "comment_id": 100718387, "body": "Woah, that worked, but the formatting of the file was odd. Changed it to <code>conda env export -n gcloud &gt;  gcloudenv.yml</code> and the format was fixed. Do you have any ideas of what was happening?"}, {"owner": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 1, "creation_date": 1563541059, "post_id": 57084104, "comment_id": 100744740, "body": "Nope, sorry! It might be a bug in conda :-)"}], "owner": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1563463937, "creation_date": 1563397859, "last_edit_date": 1563463937, "question_id": 57084104, "link": "https://stackoverflow.com/questions/57084104/conda-export-giving-useless-yml-file", "title": "Conda export giving useless .yml file", "body": "<p>I'm working with an environment named <code>gcloud</code>, with many google APIs packages installed. I wanted to export said environment to install it elsewhere, but when I do that I get a very useless .yml file. I run:</p>\n\n<pre><code>conda activate gcloud\nconda env export &gt; gcloudenv.yml\n</code></pre>\n\n<p>Which brings this:</p>\n\n<pre><code>name: gcloud\nchannels:\n  - defaults\nprefix: C:\\Users\\usr\\Anaconda3\\envs\\gcloud\\envs\\gcloud\n</code></pre>\n\n<p>So there's no libraries listed, even though I have installed many. What could be happening?</p>\n\n<p>This is <code>conda list</code>'s output:</p>\n\n<pre><code># packages in environment at C:\\Users\\jeco_\\Anaconda3\\envs\\gcloud:\n#\n# Name                    Version                   Build  Channel\nalabaster                 0.7.12                   py37_0\nasn1crypto                0.24.0                   py37_0\nastroid                   2.2.5                    py37_0\nattrs                     19.1.0                   py37_1\nbabel                     2.7.0                      py_0\nbackcall                  0.1.0                    py37_0\nbeautifulsoup4            4.7.1                    py37_1\nbleach                    3.1.0                    py37_0\nbzip2                     1.0.7                he774522_0\nca-certificates           2019.6.16            hecc5488_0    conda-forge\ncachetools                2.1.0                      py_0    conda-forge\ncertifi                   2019.6.16                py37_1    conda-forge\ncffi                      1.12.3           py37h7a1dbc1_0\nchardet                   3.0.4                    py37_1\ncloudpickle               1.2.1                      py_0\ncolorama                  0.4.1                    py37_0\nconda                     4.7.5                    py37_0    conda-forge\nconda-build               3.18.7                   py37_0\nconda-package-handling    1.3.11                   py37_0\ncryptography              2.7              py37h7a1dbc1_0\ndecorator                 4.4.0                    py37_1\ndefusedxml                0.6.0                      py_0\ndocutils                  0.14                     py37_0\nentrypoints               0.3                      py37_0\nfilelock                  3.0.12                     py_0\nglob2                     0.7                        py_0\ngoogle-api-core           1.13.0           py37h21ff451_0    conda-forge\ngoogle-api-python-client  1.7.9                      py_0    conda-forge\ngoogle-auth               1.6.3                      py_0    conda-forge\ngoogle-auth-httplib2      0.0.3                      py_2    conda-forge\ngoogle-cloud-core         1.0.2                      py_0    conda-forge\ngoogle-cloud-storage      1.16.1                     py_0    conda-forge\ngoogle-resumable-media    0.3.2                      py_0    conda-forge\ngoogleapis-common-protos  1.6.0            py37h21ff451_0    conda-forge\nhttplib2                  0.13.0                   py37_0    conda-forge\nicu                       58.2                 ha66f8fd_1\nidna                      2.8                      py37_0\nimagesize                 1.1.0                    py37_0\nipykernel                 5.1.1            py37h39e3cac_0\nipython                   7.6.1            py37h39e3cac_0\nipython_genutils          0.2.0                    py37_0\nisort                     4.3.21                   py37_0\njedi                      0.13.3                   py37_0\njinja2                    2.10.1                   py37_0\njpeg                      9b                   hb83a4c4_2\njsonschema                3.0.1                    py37_0\njupyter_client            5.2.4                    py37_0\njupyter_core              4.5.0                      py_0\nkeyring                   18.0.0                   py37_0\nlazy-object-proxy         1.4.1            py37he774522_0\nlibarchive                3.3.3                h0643e63_5\nlibiconv                  1.15                 h1df5818_7\nliblief                   0.9.0                ha925a31_2\nlibpng                    1.6.37               h2a8f88b_0\nlibprotobuf               3.9.0                h1a1b453_0    conda-forge\nlibsodium                 1.0.16               h9d3ae62_0\nlibxml2                   2.9.9                h464c3ec_0\nlz4-c                     1.8.1.2              h2fa13f4_0\nlzo                       2.10                 h6df0209_2\nmarkupsafe                1.1.1            py37he774522_0\nmccabe                    0.6.1                    py37_1\nmenuinst                  1.4.16           py37he774522_0\nmistune                   0.8.4            py37he774522_0\nnbconvert                 5.5.0                      py_0\nnbformat                  4.4.0                    py37_0\nnumpydoc                  0.9.1                      py_0\nopenssl                   1.1.1c               hfa6e2cd_0    conda-forge\npackaging                 19.0                     py37_0\npandoc                    2.2.3.2                       0\npandocfilters             1.4.2                    py37_1\nparso                     0.5.0                      py_0\npickleshare               0.7.5                    py37_0\npip                       19.1.1                   py37_0\npkginfo                   1.5.0.1                  py37_0\nprompt_toolkit            2.0.9                    py37_0\nprotobuf                  3.9.0            py37he025d50_0    conda-forge\npsutil                    5.6.3            py37he774522_0\npy-lief                   0.9.0            py37ha925a31_2\npyasn1                    0.4.5                      py_0    conda-forge\npyasn1-modules            0.2.5                      py_0    conda-forge\npycodestyle               2.5.0                    py37_0\npycosat                   0.6.3            py37hfa6e2cd_0\npycparser                 2.19                     py37_0\npyflakes                  2.1.1                    py37_0\npygments                  2.4.2                      py_0\npylint                    2.3.1                    py37_0\npyopenssl                 19.0.0                   py37_0\npyparsing                 2.4.0                      py_0\npyqt                      5.9.2            py37h6538335_2\npyrsistent                0.14.11          py37he774522_0\npysocks                   1.7.0                    py37_0\npython                    3.7.3                h8c8aaf0_1\npython-dateutil           2.8.0                    py37_0\npython-libarchive-c       2.8                     py37_10\npytz                      2019.1                     py_0\npywin32                   223              py37hfa6e2cd_1\npyyaml                    5.1.1            py37he774522_0\npyzmq                     18.0.0           py37ha925a31_0\nqt                        5.9.7            vc14h73c81de_0\nqtawesome                 0.5.7                    py37_1\nqtconsole                 4.5.1                      py_0\nqtpy                      1.8.0                      py_0\nrequests                  2.22.0                   py37_0\nrope                      0.14.0                     py_0\nrsa                       3.4.2                      py_1    conda-forge\nruamel_yaml               0.15.46          py37hfa6e2cd_0\nsetuptools                41.0.1                   py37_0\nsimplejson                3.16.0           py37hfa6e2cd_0\nsip                       4.19.8           py37h6538335_0\nsix                       1.12.0                   py37_0\nsnowballstemmer           1.9.0                      py_0\nsoupsieve                 1.8                      py37_0\nsphinx                    2.1.2                      py_0\nsphinxcontrib-applehelp   1.0.1                      py_0\nsphinxcontrib-devhelp     1.0.1                      py_0\nsphinxcontrib-htmlhelp    1.0.2                      py_0\nsphinxcontrib-jsmath      1.0.1                      py_0\nsphinxcontrib-qthelp      1.0.2                      py_0\nsphinxcontrib-serializinghtml 1.1.3                      py_0\nspyder                    3.3.4                    py37_0\nspyder-kernels            0.5.0                    py37_0\nsqlite                    3.28.0               he774522_0\ntestpath                  0.4.2                    py37_0\ntornado                   6.0.3            py37he774522_0\ntqdm                      4.32.1                     py_0\ntraitlets                 4.3.2                    py37_0\nuritemplate               3.0.0                      py_1    conda-forge\nurllib3                   1.24.2                   py37_0\nvc                        14.1                 h0510ff6_4\nvs2015_runtime            14.15.26706          h3a45250_4\nwcwidth                   0.1.7                    py37_0\nwebencodings              0.5.1                    py37_1\nwheel                     0.33.4                   py37_0\nwin_inet_pton             1.1.0                    py37_0\nwincertstore              0.2                      py37_0\nwrapt                     1.11.2           py37he774522_0\nxz                        5.2.4                h2fa13f4_4\nyaml                      0.1.7                hc54c509_2\nzeromq                    4.3.1                h33f27b4_3\nzlib                      1.2.11               h62dcd97_3\nzstd                      1.3.7                h508b16e_0\n</code></pre>\n"}, {"tags": ["python", "email", "flask", "celery"], "comments": [{"owner": {"reputation": 71156, "user_id": 1190388, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5391819cc4abe0cb43587c9ef1808dbd?s=128&d=identicon&r=PG", "display_name": "hjpotter92", "link": "https://stackoverflow.com/users/1190388/hjpotter92"}, "edited": false, "score": 0, "creation_date": 1563398041, "post_id": 57084087, "comment_id": 100691366, "body": "please fix indentation"}, {"owner": {"reputation": 33, "user_id": 9089430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bec7a2253291c8839d7ac6acb4625b0c?s=128&d=identicon&r=PG&f=1", "display_name": "lmoore", "link": "https://stackoverflow.com/users/9089430/lmoore"}, "reply_to_user": {"reputation": 71156, "user_id": 1190388, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5391819cc4abe0cb43587c9ef1808dbd?s=128&d=identicon&r=PG", "display_name": "hjpotter92", "link": "https://stackoverflow.com/users/1190388/hjpotter92"}, "edited": false, "score": 0, "creation_date": 1563399083, "post_id": 57084087, "comment_id": 100691725, "body": "thats a stack overflow thing. Assume its correct"}, {"owner": {"reputation": 71156, "user_id": 1190388, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5391819cc4abe0cb43587c9ef1808dbd?s=128&d=identicon&r=PG", "display_name": "hjpotter92", "link": "https://stackoverflow.com/users/1190388/hjpotter92"}, "edited": false, "score": 0, "creation_date": 1563402480, "post_id": 57084087, "comment_id": 100692576, "body": "<a href=\"https://flask.palletsprojects.com/en/1.1.x/patterns/celery/\" rel=\"nofollow noreferrer\">flask.palletsprojects.com/en/1.1.x/patterns/celery</a>"}], "answers": [{"tags": [], "owner": {"reputation": 15566, "user_id": 876497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2713233cc2e49a4db53ff08d6c114255?s=128&d=identicon&r=PG", "display_name": "DejanLekic", "link": "https://stackoverflow.com/users/876497/dejanlekic"}, "is_accepted": false, "score": 0, "last_activity_date": 1563466861, "creation_date": 1563466861, "answer_id": 57098906, "question_id": 57084087, "link": "https://stackoverflow.com/questions/57084087/sending-an-email-in-celery-while-running-the-rest-of-the-method/57098906#57098906", "title": "Sending an email in celery while running the rest of the method", "body": "<p>Imagine <code>send_email</code> is a Celery task. - It would be sufficient to have</p>\n\n<pre><code>send_email.apply_async()\n</code></pre>\n\n<p>in your code to put that task on the default Celery queue, and it will be picked and executed by Celery, while the rest of the code continues working.</p>\n"}], "owner": {"reputation": 33, "user_id": 9089430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bec7a2253291c8839d7ac6acb4625b0c?s=128&d=identicon&r=PG&f=1", "display_name": "lmoore", "link": "https://stackoverflow.com/users/9089430/lmoore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563466861, "creation_date": 1563397732, "last_edit_date": 1563402347, "question_id": 57084087, "link": "https://stackoverflow.com/questions/57084087/sending-an-email-in-celery-while-running-the-rest-of-the-method", "title": "Sending an email in celery while running the rest of the method", "body": "<p>Im trying to make my request to a page faster by having the send email part done through celery so that way the rest of the method can run and finish without having to wait for the email to be sent. </p>\n\n<p>Ive tried using async and making a celery call before but I am unskilled and need a little help in that department</p>\n\n<pre><code>def checkout():\n    if request.method == 'POST':\n        username = User.get_username(session['email'])\n\n        #todo: do the next line in celery\n\n        send_email(username, session['email_to'])\n        session['email_to'] = None\n        flash('Youre request has been sent')\n        return redirect(url_for('home'))\n\n    return render_template('transaction/checkout.html')\n</code></pre>\n\n<p>send_email.py</p>\n\n<pre><code>def send_email(username_from, email):\n    from_email = os.get('email')\n    from_password = 'rnmmhgtlcaqsxows'\n    to_email = os.get('email')\n\n    subject = f'New Request from {username_from}'\n    message = f\"You have a request from {username_from}\"\n\n    msg = MIMEText(message, 'html')\n    msg['subject'] = subject\n    msg['To'] = to_email\n    msg['From'] = from_email\n\n    gmail = smtplib.SMTP('smtp.gmail.com',587)\n    gmail.ehlo()\n    gmail.starttls()\n    gmail.login(from_email, from_password)\n    gmail.send_message(msg)\n</code></pre>\n"}, {"tags": ["python", "machine-learning", "cluster-analysis", "data-analysis"], "comments": [{"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 1, "creation_date": 1563398697, "post_id": 57084064, "comment_id": 100691599, "body": "Do you have a rough guess on how much &quot;clustered&quot; vs &quot;standard&quot; data there is? Does the clustered data make up the majority, or is there mostly standard data with only a little bit clustered? If the majority is clustered, then probably any clustering algorithms that are robust to noise would be fine."}, {"owner": {"reputation": 1, "user_id": 10720358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4184090c0b68720be215cf28859711cc?s=128&d=identicon&r=PG&f=1", "display_name": "jackthestudent", "link": "https://stackoverflow.com/users/10720358/jackthestudent"}, "reply_to_user": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1563400310, "post_id": 57084064, "comment_id": 100692085, "body": "There are about 300 standard points and around 300 points in each cluster?"}, {"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1563400967, "post_id": 57084064, "comment_id": 100692248, "body": "Great! As long as the outliers don&#39;t dominate the data, then you should be good with any robust clustering algorithms, including DBSCAN as the selected answer states."}, {"owner": {"reputation": 1, "user_id": 10720358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4184090c0b68720be215cf28859711cc?s=128&d=identicon&r=PG&f=1", "display_name": "jackthestudent", "link": "https://stackoverflow.com/users/10720358/jackthestudent"}, "reply_to_user": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1563401175, "post_id": 57084064, "comment_id": 100692292, "body": "Ok great, thank you!"}, {"owner": {"reputation": 70452, "user_id": 1060350, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/XCkw7.jpg?s=128&g=1", "display_name": "Has QUIT--Anony-Mousse", "link": "https://stackoverflow.com/users/1060350/has-quit-anony-mousse"}, "edited": false, "score": 0, "creation_date": 1563414231, "post_id": 57084064, "comment_id": 100694880, "body": "You could have done a little bit of research yourself... Such as checking the list of clustering algorithms in sklearn."}], "answers": [{"comments": [{"owner": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "reply_to_user": {"reputation": 1, "user_id": 10720358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4184090c0b68720be215cf28859711cc?s=128&d=identicon&r=PG&f=1", "display_name": "jackthestudent", "link": "https://stackoverflow.com/users/10720358/jackthestudent"}, "edited": false, "score": 0, "creation_date": 1563399813, "post_id": 57084220, "comment_id": 100691951, "body": "the <a href=\"https://arxiv.org/pdf/1705.07321.pdf\" rel=\"nofollow noreferrer\">hdbscan paper</a> has them clustering 200k points in &lt;10 seconds (figure 4)"}], "tags": [], "owner": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "is_accepted": true, "score": 1, "last_activity_date": 1563398552, "creation_date": 1563398552, "answer_id": 57084220, "question_id": 57084064, "link": "https://stackoverflow.com/questions/57084064/is-there-a-way-to-partially-cluster-data-which-contains-clusters-but-does-not-wh/57084220#57084220", "title": "Is there a way to partially cluster data which contains clusters but does not wholly consist of clusters?", "body": "<p>You could try something like <a href=\"https://en.wikipedia.org/wiki/DBSCAN\" rel=\"nofollow noreferrer\">DBSCAN</a> which allows classification of points as \"noise\", and seems to be what you're after.  There's a hierarchical version of this affiliated with the scikit project known as <a href=\"https://pypi.org/project/hdbscan/\" rel=\"nofollow noreferrer\"><code>hdbscan</code></a></p>\n\n<p>Google finds are various <a href=\"https://www.datascience.com/blog/k-means-alternatives\" rel=\"nofollow noreferrer\">documents</a> describing alternatives to k-means clustering. \n The <code>hdbscan</code> docs also have a good description of <a href=\"https://hdbscan.readthedocs.io/en/latest/comparing_clustering_algorithms.html\" rel=\"nofollow noreferrer\">comparing alternatives</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 10720358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4184090c0b68720be215cf28859711cc?s=128&d=identicon&r=PG&f=1", "display_name": "jackthestudent", "link": "https://stackoverflow.com/users/10720358/jackthestudent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 57084220, "answer_count": 1, "score": -1, "last_activity_date": 1563398552, "creation_date": 1563397599, "question_id": 57084064, "link": "https://stackoverflow.com/questions/57084064/is-there-a-way-to-partially-cluster-data-which-contains-clusters-but-does-not-wh", "title": "Is there a way to partially cluster data which contains clusters but does not wholly consist of clusters?", "body": "<p>I have some 2D data (x,y) and I need to identify where there are many data points all close to each other in the x direction. There are 3 obvious clusters where all the x points are close together and the rest of the data does not fall into them. I was going to use a k-means clustering algorithm but that seems to be for clustering ALL of the data whereas I just want to label the 3 clusters data in the data that are obviously clusters and label the rest as normal data. </p>\n\n<p>The data is in separate csv files which I process and then read into one big dataframe. So far while processing the data, I have filtered out files where processed data exceeds a certain length but this obviously means that sometimes part of the cluster is left out of the file or normal data is left out.</p>\n"}, {"tags": ["python", "pandas", "date"], "comments": [{"owner": {"reputation": 2424, "user_id": 10286422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8eee83d47bbcbfaf55bb18f7077890?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Pap", "link": "https://stackoverflow.com/users/10286422/ben-pap"}, "edited": false, "score": 2, "creation_date": 1563398224, "post_id": 57084055, "comment_id": 100691441, "body": "<code>df[&#39;date+hour&#39;].str.split(&#39; &#39;, expand = True)</code> You can split it on the space, then expand it to new columns, which you can then rename."}], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 11772897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e59f2251c89500a61630525c3f6e9fe?s=128&d=identicon&r=PG&f=1", "display_name": "JDenman6", "link": "https://stackoverflow.com/users/11772897/jdenman6"}, "is_accepted": true, "score": 0, "last_activity_date": 1563398499, "creation_date": 1563398499, "answer_id": 57084213, "question_id": 57084055, "link": "https://stackoverflow.com/questions/57084055/divide-datehour-column-into-two-colums-format-date-number-with-pandas-pyth/57084213#57084213", "title": "Divide date+hour column into two colums (format date, number) with Pandas - Python", "body": "<p>I think the discussion here will help a lot:\n<a href=\"https://stackoverflow.com/questions/14745022/how-to-split-a-column-into-two-columns\">How to split a column into two columns?</a></p>\n\n<p>Basically, you want to use pandas.Series.str.split (<a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.str.split.html\" rel=\"nofollow noreferrer\">https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.str.split.html</a>) to split the string in your Date &amp; Hour column into a list and then assign the two halves of that list into new columns.</p>\n"}], "owner": {"reputation": 15, "user_id": 11148913, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9py2uus7DGY/AAAAAAAAAAI/AAAAAAAAAMA/6jfVRftOmMM/photo.jpg?sz=128", "display_name": "Daniel Rivas", "link": "https://stackoverflow.com/users/11148913/daniel-rivas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 57084213, "answer_count": 1, "score": 0, "last_activity_date": 1563398499, "creation_date": 1563397528, "question_id": 57084055, "link": "https://stackoverflow.com/questions/57084055/divide-datehour-column-into-two-colums-format-date-number-with-pandas-pyth", "title": "Divide date+hour column into two colums (format date, number) with Pandas - Python", "body": "<p>I want to separate these column into two, since Excel extract function just takes way too much I figured I could do it in Python with Jupyter Notebook, using Pandas. But I haven't really do this before, normally I would have data already treated so I am having difficulties.</p>\n\n<p>I tried using excel but it takes forever.</p>\n\n<pre><code>+---------------------+----------------------+-----------------+\n|        date + hour  |        date only     |    hour only    |\n+---------------------+----------------------+-----------------+\n| 01/01/19 01         | 01/01/2019 (formated)|   1 (number)    |\n+---------------------+----------------------+-----------------+\n\n\n+---------------------+----------------------+-----------------+\n|        date + hour  |        date only     |    hour only    |\n+---------------------+----------------------+-----------------+\n| 01/01/19 01         | 01/01/2019 (formated)|   1 (number)    |\n+---------------------+----------------------+-----------------+\n</code></pre>\n"}, {"tags": ["python", "sqlalchemy", "alembic", "sqlalchemy-migrate"], "owner": {"reputation": 21, "user_id": 11799749, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9iBrz0IRReI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re_B5UOhgA-Yoxheu30kgz23_Q1Ug/photo.jpg?sz=128", "display_name": "Isaiah Duck", "link": "https://stackoverflow.com/users/11799749/isaiah-duck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1563397300, "creation_date": 1563397300, "question_id": 57084019, "link": "https://stackoverflow.com/questions/57084019/is-it-possible-to-connect-to-another-database-during-an-alembic-migration-upgrad", "title": "Is it possible to connect to another database during an alembic migration upgrade?", "body": "<p>I am performing a standard alembic migration on <code>Database A</code>, however, there is a table in <code>Database B</code> I will need to query during my upgrade. Is it possible to connect to <code>Database B</code> to query and retrieve the result during the upgrade on <code>Database A</code>? db <code>A</code> does not live on the same server as <code>B</code>.</p>\n"}, {"tags": ["python", "dataframe", "datetime"], "comments": [{"owner": {"reputation": 323, "user_id": 10509565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0140b1ceaabb35670dea56dcb2159cf1?s=128&d=identicon&r=PG&f=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/10509565/robin"}, "edited": false, "score": 0, "creation_date": 1563397565, "post_id": 57083983, "comment_id": 100691172, "body": "Please provide any code producing the dataframe so code to provide the yyyy-mm-dd format can be added."}, {"owner": {"reputation": 629, "user_id": 10637736, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "realkes", "link": "https://stackoverflow.com/users/10637736/realkes"}, "reply_to_user": {"reputation": 323, "user_id": 10509565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0140b1ceaabb35670dea56dcb2159cf1?s=128&d=identicon&r=PG&f=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/10509565/robin"}, "edited": false, "score": 0, "creation_date": 1563397620, "post_id": 57083983, "comment_id": 100691199, "body": "Unfortunately, this is the initial format that I have. I didn&#39;t write the code to separate it"}, {"owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 0, "creation_date": 1563397628, "post_id": 57083983, "comment_id": 100691202, "body": "The <code>month</code> column seems superfluous. What should be done if the other columns conflict with <code>month</code>?"}, {"owner": {"reputation": 629, "user_id": 10637736, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "realkes", "link": "https://stackoverflow.com/users/10637736/realkes"}, "edited": false, "score": 0, "creation_date": 1563397750, "post_id": 57083983, "comment_id": 100691258, "body": "You are right. <code>week_num</code> includes the information of <code>month</code>"}], "answers": [{"comments": [{"owner": {"reputation": 629, "user_id": 10637736, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "realkes", "link": "https://stackoverflow.com/users/10637736/realkes"}, "edited": false, "score": 0, "creation_date": 1563403716, "post_id": 57084504, "comment_id": 100692877, "body": "Thanks @Alexandre, the error that I get: <code>ValueError: (&quot;time data &#39;2019-W30-7&#39; does not match format &#39;%Y-W%W-%w&#39;&quot;, &#39;occurred at index 108&#39;)</code>"}, {"owner": {"reputation": 4521, "user_id": 10041823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gJ8EW.jpg?s=128&g=1", "display_name": "Alexandre B.", "link": "https://stackoverflow.com/users/10041823/alexandre-b"}, "reply_to_user": {"reputation": 629, "user_id": 10637736, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "realkes", "link": "https://stackoverflow.com/users/10637736/realkes"}, "edited": false, "score": 0, "creation_date": 1563403793, "post_id": 57084504, "comment_id": 100692894, "body": "Do you know which date is rising this error ? The first date ? You can add <code>print(str_date)</code> after creating <code>str_date</code> in <code>getDate()</code>"}, {"owner": {"reputation": 629, "user_id": 10637736, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "realkes", "link": "https://stackoverflow.com/users/10637736/realkes"}, "edited": false, "score": 1, "creation_date": 1563403899, "post_id": 57084504, "comment_id": 100692918, "body": "The index 108 has the year 2019, month 8, week_num 31 and day Sun."}, {"owner": {"reputation": 629, "user_id": 10637736, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "realkes", "link": "https://stackoverflow.com/users/10637736/realkes"}, "edited": false, "score": 0, "creation_date": 1563404708, "post_id": 57084504, "comment_id": 100693121, "body": "<code>AttributeError: (&quot;&#39;Series&#39; object has no attribute &#39;day&#39;&quot;, &#39;occurred at index 0&#39;)</code>"}, {"owner": {"reputation": 4521, "user_id": 10041823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gJ8EW.jpg?s=128&g=1", "display_name": "Alexandre B.", "link": "https://stackoverflow.com/users/10041823/alexandre-b"}, "reply_to_user": {"reputation": 629, "user_id": 10637736, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "realkes", "link": "https://stackoverflow.com/users/10637736/realkes"}, "edited": false, "score": 0, "creation_date": 1563404789, "post_id": 57084504, "comment_id": 100693138, "body": "Are you sure to have a column named <code>day</code> in your dataframe ?"}, {"owner": {"reputation": 629, "user_id": 10637736, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "realkes", "link": "https://stackoverflow.com/users/10637736/realkes"}, "edited": false, "score": 1, "creation_date": 1563405007, "post_id": 57084504, "comment_id": 100693183, "body": "Sorry, forgot to change that. Now it generates all the dates like <code>2019-W31-1</code>"}, {"owner": {"reputation": 629, "user_id": 10637736, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "realkes", "link": "https://stackoverflow.com/users/10637736/realkes"}, "edited": false, "score": 0, "creation_date": 1563405510, "post_id": 57084504, "comment_id": 100693292, "body": "Actually it always generates one day later than it supposed to. For instance year 2019, week_num 31 and Thurs supposed to generate 2019-08-01 but it is 2019-08-02. How can I substract one day from all?"}, {"owner": {"reputation": 4521, "user_id": 10041823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gJ8EW.jpg?s=128&g=1", "display_name": "Alexandre B.", "link": "https://stackoverflow.com/users/10041823/alexandre-b"}, "reply_to_user": {"reputation": 629, "user_id": 10637736, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "realkes", "link": "https://stackoverflow.com/users/10637736/realkes"}, "edited": false, "score": 0, "creation_date": 1563405565, "post_id": 57084504, "comment_id": 100693311, "body": "Are you running the last answer ? (with values for <code>Monday:0</code>, <code>Tuesday:1</code> ...)"}], "tags": [], "owner": {"reputation": 4521, "user_id": 10041823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gJ8EW.jpg?s=128&g=1", "display_name": "Alexandre B.", "link": "https://stackoverflow.com/users/10041823/alexandre-b"}, "is_accepted": true, "score": 2, "last_activity_date": 1563404916, "last_edit_date": 1563404916, "creation_date": 1563400395, "answer_id": 57084504, "question_id": 57083983, "link": "https://stackoverflow.com/questions/57083983/combining-year-month-week-number-and-day-to-date/57084504#57084504", "title": "Combining year, month, week number and day to date", "body": "<p>The module <a href=\"https://docs.python.org/2/library/datetime.html\" rel=\"nofollow noreferrer\"><code>datetime</code></a> gives you this opportunity. <a href=\"https://stackoverflow.com/questions/17087314/get-date-from-week-number\">This discussion</a> explains how to get the date from the week number. </p>\n\n<p>Then, you can define a function to get the date and apply it to you dataframe.</p>\n\n<p>Here the code:</p>\n\n<pre><code># Import modules\nimport datetime\n\n# Your data\ndf = pd.DataFrame([\n                   [2019, 8, 29, \"Fri\"],\n                    [2019, 8, 31, \"Sun\"],\n                   [2019, 8, 29, \"Tues\"]],\n                  columns=[\"year\", \"month\", \"week_num\", \"day\"])\n\n# A value per day\nval_day = {\"Mon\": 0, \"Tues\": 1, \"Weds\": 2, \"Thurs\": 3,\n           \"Fri\": 4, \"Sat\": 5, \"Sun\": 6}\n\n# Get the date from the year, number of week and the day\n\n\ndef getDate(row):\n    # Create string format\n    str_date = \"{0}-W{1}-1\".format(row.year,\n                                     row.week_num - 1)\n    print(str_date)\n    # Get the date\n    date = datetime.datetime.strptime(\n        str_date, \"%Y-W%W-%w\") + datetime.timedelta(days=val_day[row.day])\n    # Update date field\n    row[\"date\"] = date.strftime(\"%Y-%m-%d\")\n    return row\n\n\n# apply the function to each row\ndf = df.apply(getDate, axis=1)\nprint(df)\n#    year  month  week_num    day        date\n# 0  2019      8         1  Thurs  2019-01-03\n# 1  2019      8        29    Fri  2019-07-19\n# 2  2019      8        29   Tues  2019-07-16\n</code></pre>\n"}], "owner": {"reputation": 629, "user_id": 10637736, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "realkes", "link": "https://stackoverflow.com/users/10637736/realkes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 57084504, "answer_count": 1, "score": 1, "last_activity_date": 1563404916, "creation_date": 1563397076, "last_edit_date": 1563397542, "question_id": 57083983, "link": "https://stackoverflow.com/questions/57083983/combining-year-month-week-number-and-day-to-date", "title": "Combining year, month, week number and day to date", "body": "<p>I have the below dataframe:</p>\n\n<pre><code>year  month  week_num    day\n2019   8       31       Thurs\n2019   8       31        Fri\n2019   8       32        Tues\n</code></pre>\n\n<p>The day abbreviations are <code>Mon</code>, <code>Tues</code>, <code>Weds</code>, <code>Thurs</code>, <code>Fri</code>, <code>Sat</code>, <code>Sun</code>.</p>\n\n<p>I want to generate another column which will provide me the date in yyyy-mm-dd format. How can I do that? Thanks in advance!</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1563397496, "post_id": 57083982, "comment_id": 100691144, "body": "Where do you have years in these dataframes?"}, {"owner": {"reputation": 607, "user_id": 7679796, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/zN1DX.jpg?s=128&g=1", "display_name": "OptimusPrime", "link": "https://stackoverflow.com/users/7679796/optimusprime"}, "reply_to_user": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1563401352, "post_id": 57083982, "comment_id": 100692334, "body": "every dataframe is a year"}], "answers": [{"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 0, "last_activity_date": 1563455187, "creation_date": 1563455187, "answer_id": 57095201, "question_id": 57083982, "link": "https://stackoverflow.com/questions/57083982/extrapolating-between-two-dataframes-rounding-issues/57095201#57095201", "title": "Extrapolating between two dataframes (rounding issues)", "body": "<p>IIUC, this may be a start:</p>\n\n<pre><code>df1 = pd.DataFrame([(50,100),(150,250),(250,300)], columns=['a','b'])\ndf2 = pd.DataFrame([(100,200),(300,400),(500,600)], columns=['a','b']) \n\npd.concat([df1, df2], keys=[2016,2021])\\ #concat the datafrmaes using keys to define year\n  .unstack()\\                            #reshape dataframe\n  .reindex(np.arange(2016,2022,1))\\      #reindex adding years to interpolate to\n  .interpolate(method='index')\\          #interpolate using method index\n  .stack(0)\\                             #reshape dataframe to desired format\n  .T\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>    2016          2017          2018          2019          2020          2021       \n       a      b      a      b      a      b      a      b      a      b      a      b\n0   50.0  100.0   60.0  120.0   70.0  140.0   80.0  160.0   90.0  180.0  100.0  200.0\n1  150.0  250.0  180.0  280.0  210.0  310.0  240.0  340.0  270.0  370.0  300.0  400.0\n2  250.0  300.0  300.0  360.0  350.0  420.0  400.0  480.0  450.0  540.0  500.0  600.0\n</code></pre>\n"}], "owner": {"reputation": 607, "user_id": 7679796, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/zN1DX.jpg?s=128&g=1", "display_name": "OptimusPrime", "link": "https://stackoverflow.com/users/7679796/optimusprime"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1563455187, "creation_date": 1563397069, "last_edit_date": 1563401398, "question_id": 57083982, "link": "https://stackoverflow.com/questions/57083982/extrapolating-between-two-dataframes-rounding-issues", "title": "Extrapolating between two dataframes (rounding issues)", "body": "<p>I am having issues trying to extrapolate between two dataframes</p>\n\n<pre><code> df1 = pd.DataFrame([(50,100),(150,250),(250,300)], columns=['a','b'])\n df2 = pd.DataFrame([(100,200),(300,400),(500,600)], columns=['a','b']) \n</code></pre>\n\n<p>I tried</p>\n\n<pre><code>cagr_7 = (df2/df1)**(1/5) - 1\nf = lambda c: c + c*cagr_7\n</code></pre>\n\n<p>But often times the inbetween years don't make sense due to having report every year.  Is there another extrapolation option, maybe taking the difference and applying it across the years?</p>\n\n<p>I am trying to extrapolate between 5 different years.  Example 2016 to 2021.  Each dataframe is a year.</p>\n\n<p>I need help please.   </p>\n"}, {"tags": ["python", "multithreading", "pyside2"], "comments": [{"owner": {"reputation": 1331, "user_id": 7475772, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ePUNaGaixPg/AAAAAAAAAAI/AAAAAAAAFPU/zPq1QOEsjRg/photo.jpg?sz=128", "display_name": "Grzegorz Bokota", "link": "https://stackoverflow.com/users/7475772/grzegorz-bokota"}, "edited": false, "score": 0, "creation_date": 1563401039, "post_id": 57083973, "comment_id": 100692270, "body": "Which system did you test?"}, {"owner": {"reputation": 674, "user_id": 3551604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/660b8994e7b681b2ce4cf4da9ab6e0e7?s=128&d=identicon&r=PG", "display_name": "c-x-berger", "link": "https://stackoverflow.com/users/3551604/c-x-berger"}, "reply_to_user": {"reputation": 1331, "user_id": 7475772, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ePUNaGaixPg/AAAAAAAAAAI/AAAAAAAAFPU/zPq1QOEsjRg/photo.jpg?sz=128", "display_name": "Grzegorz Bokota", "link": "https://stackoverflow.com/users/7475772/grzegorz-bokota"}, "edited": false, "score": 0, "creation_date": 1563401124, "post_id": 57083973, "comment_id": 100692281, "body": "This was on a Linux box. I can try testing on other machines later (don&#39;t have as easy access.)"}, {"owner": {"reputation": 1331, "user_id": 7475772, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ePUNaGaixPg/AAAAAAAAAAI/AAAAAAAAFPU/zPq1QOEsjRg/photo.jpg?sz=128", "display_name": "Grzegorz Bokota", "link": "https://stackoverflow.com/users/7475772/grzegorz-bokota"}, "edited": false, "score": 1, "creation_date": 1563444966, "post_id": 57083973, "comment_id": 100706063, "body": "I do not know what is exact problem but it may be problem with GIL (<a href=\"https://wiki.python.org/moin/GlobalInterpreterLock\" rel=\"nofollow noreferrer\">wiki.python.org/moin/GlobalInterpreterLock</a>). The swig documentation marks that GIL is not released by default when calling C/C++ function, but you need to configure it. <a href=\"http://www.swig.org/Doc4.0/Python.html\" rel=\"nofollow noreferrer\">swig.org/Doc4.0/Python.html</a>  Maybe You need to contact with author of Attys to fix it."}], "answers": [{"tags": [], "owner": {"reputation": 674, "user_id": 3551604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/660b8994e7b681b2ce4cf4da9ab6e0e7?s=128&d=identicon&r=PG", "display_name": "c-x-berger", "link": "https://stackoverflow.com/users/3551604/c-x-berger"}, "is_accepted": true, "score": 0, "last_activity_date": 1563550131, "last_edit_date": 1563550131, "creation_date": 1563458986, "answer_id": 57096522, "question_id": 57083973, "link": "https://stackoverflow.com/questions/57083973/pyside2-qthread-is-freezing-the-ui/57096522#57096522", "title": "PySide2 QThread is freezing the UI", "body": "<p>Thanks to the help of <a href=\"https://stackoverflow.com/users/7475772/grzegorz-bokota\">Grzegorz Bokota</a>, I learned that the C++ libraries weren't releasing the GIL (unlike other C/C++ bindings like OpenCV and NumPy.)</p>\n\n<p>To fix this, I added <code>'-threads'</code> to the <code>swig_opts</code> array in <code>setup.py</code>and <a href=\"https://github.com/glasgowneuro/AttysComm/pull/1\" rel=\"nofollow noreferrer\">submitted the patch to upstream.</a></p>\n\n<p>This patch was released as <a href=\"https://github.com/glasgowneuro/AttysComm/commit/cf64a76414533ac0979be2178949788ce0a804a6\" rel=\"nofollow noreferrer\">version 1.3.3.2 of pyattyscomm.</a></p>\n"}], "owner": {"reputation": 674, "user_id": 3551604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/660b8994e7b681b2ce4cf4da9ab6e0e7?s=128&d=identicon&r=PG", "display_name": "c-x-berger", "link": "https://stackoverflow.com/users/3551604/c-x-berger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "accepted_answer_id": 57096522, "answer_count": 1, "score": 0, "last_activity_date": 1563550131, "creation_date": 1563397022, "question_id": 57083973, "link": "https://stackoverflow.com/questions/57083973/pyside2-qthread-is-freezing-the-ui", "title": "PySide2 QThread is freezing the UI", "body": "<p>I'm trying to run a long, blocking call in the background with Qt. (To be exact, the <code>scan</code> method for <a href=\"https://github.com/glasgowneuro/AttysComm\" rel=\"nofollow noreferrer\"><code>pyattyscomm.AttysScan</code></a>.) I thought I should use <code>QThread</code>, and came up with the following:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pyattyscomm\nfrom PySide2.QtCore import QThread, Signal\n\n\nclass DataCollectionThread(QThread):\n    attys_ready = Signal()\n\n    def __init__(self, parent=None):\n        super().__init__(parent)\n        self.scanner = pyattyscomm.AttysScan()\n\n    def run(self):\n        self.scanner.scan() # this is a long, blocking call\n        self.attys_ready.emit()\n</code></pre>\n\n<p>However, when I <code>start</code> the thread (from some logic in a widget), the GUI hangs until the <code>scan</code> method finishes (i.e. a while.)</p>\n\n<p>I replaced the call to <code>scan</code> with <code>time.sleep(10)</code>, which strangely did not freeze the UI. Is there something I need to/can change to avoid <code>scan</code> blocking?</p>\n"}, {"tags": ["python", "json", "dictionary"], "answers": [{"tags": [], "owner": {"reputation": 116, "user_id": 11786400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/042a4223b90e3360855f14adcaa67225?s=128&d=identicon&r=PG&f=1", "display_name": "Bruno Santos", "link": "https://stackoverflow.com/users/11786400/bruno-santos"}, "is_accepted": false, "score": 0, "last_activity_date": 1563398458, "last_edit_date": 1563398458, "creation_date": 1563398005, "answer_id": 57084132, "question_id": 57083971, "link": "https://stackoverflow.com/questions/57083971/coinmarketcap-data-nested-dictionary/57084132#57084132", "title": "Coinmarketcap data nested dictionary", "body": "<p>Despite similarity it isn't a dictionary as the built-in of Python. Is a JSON. You can parse by the 'key' values. Example:</p>\n\n<pre><code>import json\n\na = '{\"status\": {\"timestamp\": \"2019-07-17T20:54:40.829Z\", \"error_code\": 0, \"error_message\": null, \"elapsed\": 7}}'\nb = json.loads(a)\nprint(b[\"status\"][\"elapsed\"])\n</code></pre>\n\n<p>See that once you're already using requests you don't have to import json module.\nEx:</p>\n\n<pre><code>requests.get(url).json()[0][\"your_target\"]) \n</code></pre>\n\n<p>Analyse the response you get, maybe the index '0' does not apply.</p>\n"}, {"tags": [], "owner": {"reputation": 74, "user_id": 2160373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b5c1df089e9d66705ca6fb5f2a69e2?s=128&d=identicon&r=PG", "display_name": "akshayk", "link": "https://stackoverflow.com/users/2160373/akshayk"}, "is_accepted": true, "score": 1, "last_activity_date": 1563398112, "creation_date": 1563398112, "answer_id": 57084147, "question_id": 57083971, "link": "https://stackoverflow.com/questions/57083971/coinmarketcap-data-nested-dictionary/57084147#57084147", "title": "Coinmarketcap data nested dictionary", "body": "<p>In Python, you can access the value of the dictionary by simply doing</p>\n\n<pre><code>value = dict[key]\n</code></pre>\n\n<p>In your case, you have a nested JSON. You can access the values by chaining the keys. </p>\n\n<p>Your JSON looks like</p>\n\n<pre><code>{\n\"status\": {\n    \"timestamp\": \"2019-07-17T20:54:40.829Z\",\n    \"error_code\": 0,\n    \"error_message\": null,\n    \"elapsed\": 7,\n    \"credit_count\": 1\n},\n\"data\": {\n    \"ADA\": {\n        \"id\": 2010,\n        \"name\": \"Cardano\",\n        \"symbol\": \"ADA\",\n        \"slug\": \"cardano\",\n        \"num_market_pairs\": 90,\n        \"date_added\": \"2017-10-01T00:00:00.000Z\",\n        \"tags\": [\"mineable\"],\n        \"max_supply\": 45000000000,\n        \"circulating_supply\": 25927070538,\n        \"total_supply\": 31112483745,\n        \"platform\": null,\n        \"cmc_rank\": 12,\n        \"last_updated\": \"2019-07-17T20:54:04.000Z\",\n        \"quote\": {\n            \"USD\": {\n                \"price\": 0.056165857414,\n                \"volume_24h\": 102375843.427606,\n                \"percent_change_1h\": -0.816068,\n                \"percent_change_24h\": 5.42849,\n                \"percent_change_7d\": -21.8139,\n                \"market_cap\": 1456216147.0000284,\n                \"last_updated\": \"2019-07-17T20:54:04.000Z\"\n            }\n        }\n    }\n}\n}\n</code></pre>\n\n<p>You can access the price as</p>\n\n<pre><code>price = data['data']['ADA']['quote']['USD']['price']\n</code></pre>\n\n<p>Hope it helps</p>\n"}], "owner": {"reputation": 43, "user_id": 10480545, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WxRDcqc7cPg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXzDgpIUGstwB7-qClkwgKAv0ScJA/mo/photo.jpg?sz=128", "display_name": "Zach Cook", "link": "https://stackoverflow.com/users/10480545/zach-cook"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 57084147, "answer_count": 2, "score": 0, "last_activity_date": 1563398458, "creation_date": 1563397017, "last_edit_date": 1563397330, "question_id": 57083971, "link": "https://stackoverflow.com/questions/57083971/coinmarketcap-data-nested-dictionary", "title": "Coinmarketcap data nested dictionary", "body": "<p>Hi I am still in the beginner stages of learning python. I am trying to extract data from Coinmarketcap.com using their api system. I am able to get an output with one large dictionary but can't seem to figure out how to pull specific data. I would like to receive just the'price': and 'last updated'. </p>\n\n<p>I have tried referencing .loads and slicing the data into list. I have also tried to index in the dictionaries, but the nested dictionaries in the output is making it difficult for me to understand. I have watched many youtube tutorials and googled for help, but am unable to find a solution. Any help would be greatly appreciated!</p>\n\n<pre><code>import requests\n\nimport json\n\n\nurl ='https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest'\n\napi_key = 'xxxxxxxxxxxxxxxxxxxxxxxxxxxx'\n\nheaders = {'Accepts': 'application/json', 'X-CMC_PRO_API_KEY': api_key}\n\nparameters = {'symbol': 'ADA'}\n\nresponse = requests.get(url, headers = headers, params = parameters)\n\ndata = response.json()\n\ndata_str = json.dumps(data, indent = 2)\n\nprint(data_str)\n</code></pre>\n\n<p>Here is the output of the dictionary:</p>\n\n<blockquote>\n  <p>{\"status\": {\"timestamp\": \"2019-07-17T20:54:40.829Z\", \"error_code\": 0, \"error_message\": null, \"elapsed\": 7, \"credit_count\": 1}, \"data\": {\"ADA\": {\"id\": 2010, \"name\": \"Cardano\", \"symbol\": \"ADA\", \"slug\": \"cardano\", \"num_market_pairs\": 90, \"date_added\": \"2017-10-01T00:00:00.000Z\", \"tags\": [\"mineable\"], \"max_supply\": 45000000000, \"circulating_supply\": 25927070538, \"total_supply\": 31112483745, \"platform\": null, \"cmc_rank\": 12, \"last_updated\": \"2019-07-17T20:54:04.000Z\", \"quote\": {\"USD\": {\"price\": 0.056165857414, \"volume_24h\": 102375843.427606, \"percent_change_1h\": -0.816068, \"percent_change_24h\": 5.42849, \"percent_change_7d\": -21.8139, \"market_cap\": 1456216147.0000284, \"last_updated\": \"2019-07-17T20:54:04.000Z\"}}}}}</p>\n</blockquote>\n"}, {"tags": ["python", "pandas", "dataframe", "group-by", "pandas-groupby"], "answers": [{"tags": [], "owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "is_accepted": true, "score": 1, "last_activity_date": 1563398567, "last_edit_date": 1563398567, "creation_date": 1563398256, "answer_id": 57084172, "question_id": 57083914, "link": "https://stackoverflow.com/questions/57083914/using-pandas-to-compute-shares-of-columns-that-have-particular-values/57084172#57084172", "title": "Using pandas to compute shares of columns that have particular values", "body": "<p>You can't <code>transform</code> <code>pd.Series.value_counts</code>, so instead you can use two transforms with <code>size</code>:</p>\n\n<pre><code>m = df['values'].notnull()\n\ndf.loc[m, 'per'] = (df.loc[m].groupby(['keys', 'values'])['values'].transform('size')\n                     / df.groupby('keys')['values'].transform('size'))\n\ndf['per'] = df['per'].fillna(0)\n\n#  keys values       per\n#0    1      a  0.333333\n#1    1      b  0.666667\n#2    1      b  0.666667\n#3    2      c  1.000000\n#4    3    NaN  0.000000\n</code></pre>\n\n<hr>\n\n<p>Alteratively, with a merge:</p>\n\n<pre><code>df1 = (df.groupby('keys')['values']\n         .apply(pd.Series.value_counts, normalize=True)\n         .to_frame('per'))\ndf1.index.names=['keys', 'values']\n\ndf = df.merge(df1.reset_index(), how='left')\ndf['per'] = df['per'].fillna(0)\n</code></pre>\n"}], "owner": {"reputation": 2989, "user_id": 6204900, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4c88f41c450074eebb6fe844184601fe?s=128&d=identicon&r=PG&f=1", "display_name": "splinter", "link": "https://stackoverflow.com/users/6204900/splinter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 57084172, "answer_count": 1, "score": 0, "last_activity_date": 1563398567, "creation_date": 1563396709, "last_edit_date": 1563397593, "question_id": 57083914, "link": "https://stackoverflow.com/questions/57083914/using-pandas-to-compute-shares-of-columns-that-have-particular-values", "title": "Using pandas to compute shares of columns that have particular values", "body": "<p>I have a DataFrame with two columns: keys and values. I want to construct a new column as follows. For each key, compute the frequency of each value, out of the total values for this key.</p>\n\n<p>I have code that achieves it, but I suspect that there must be a much simpler way to do this in pandas. Here is an example:</p>\n\n<pre><code>def fun(sd):\n    uniqueValuesList = list(sd.drop_duplicates().dropna())\n    if len(uniqueValuesList)==0:\n        return pd.Series([0]*sd.shape[0], index=sd.index)\n    elif len(uniqueValuesList)==1:\n        return pd.Series([1]*sd.shape[0], index=sd.index)\n    else:\n        valuesList = list(sd)\n        valuesArr = np.array(valuesList)        \n        stackedValuesDf = pd.DataFrame([valuesArr]*len(valuesArr))\n        boolDf = stackedValuesDf==valuesList\n        frac = boolDf.sum() / boolDf.shape[0]\n        return frac\n\nkeys =   ['1', '1', '1', '2', '3']\nvalues = ['a', 'b', 'b', 'c', np.nan]\ndf = pd.DataFrame([keys, values]).T\ndf.columns = ['keys', 'values']\nprint(df.groupby('keys').values.apply(fun))\n</code></pre>\n\n<p>This gives the desired output:</p>\n\n<pre><code>0    0.333333\n1    0.666667\n2    0.666667\n3    1.000000\n4    0.000000\n</code></pre>\n\n<p>That is, for the key <code>'1'</code>, <code>'a'</code> appears once  and <code>'b'</code> appears twice, so they get 0.33 and 0.67, respectively. For <code>'2'</code> there is a singleton key so it get 1. For <code>'3'</code> there are no keys, so it gets 0.</p>\n\n<p>What is simpler pandas way to acheive this?</p>\n"}, {"tags": ["python", "python-3.x", "macos", "psycopg2"], "comments": [{"owner": {"reputation": 336, "user_id": 6523756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a472dd3d7c8943de1480ee6c7de4a299?s=128&d=identicon&r=PG&f=1", "display_name": "Damien Baldy", "link": "https://stackoverflow.com/users/6523756/damien-baldy"}, "edited": false, "score": 0, "creation_date": 1563397604, "post_id": 57083897, "comment_id": 100691187, "body": "I was not able to reproduce the error with a mac book running on OSX 10.13.6, python 3.7.2. I did pip install psycopg2 and the installation was successful."}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 1, "creation_date": 1563397962, "post_id": 57083897, "comment_id": 100691340, "body": "Why would using pip3 not be a &quot;prod solution&quot;?"}, {"owner": {"reputation": 8390, "user_id": 1404049, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/vkpuK.png?s=128&g=1", "display_name": "Fallenreaper", "link": "https://stackoverflow.com/users/1404049/fallenreaper"}, "edited": false, "score": 0, "creation_date": 1563455091, "post_id": 57083897, "comment_id": 100711642, "body": "no, its not the use of pip3 vs pip, as much as using the <code>psycopg2-binary</code>.  That is weird that you got it to work.  I am on 10.14.5.  I am going to edit the question with the error log"}, {"owner": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "edited": false, "score": 0, "creation_date": 1563470470, "post_id": 57083897, "comment_id": 100720644, "body": "<code>ld: library not found for -lssl</code> -&gt; <code>brew install openssl</code>. There&#39;s nothing wrong with Python, you&#39;re missing libraries to compile C extensions in the <code>psycopg2</code> package."}, {"owner": {"reputation": 8390, "user_id": 1404049, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/vkpuK.png?s=128&g=1", "display_name": "Fallenreaper", "link": "https://stackoverflow.com/users/1404049/fallenreaper"}, "edited": false, "score": 0, "creation_date": 1563480750, "post_id": 57083897, "comment_id": 100724929, "body": "odd.  I did <code>brew install openssl</code> and it said it was already installed."}, {"owner": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "edited": false, "score": 0, "creation_date": 1563543531, "post_id": 57083897, "comment_id": 100746116, "body": "Then you have an issue with your current MacOS version and Homebrew, most probably due to an upgrade from High Sierra to Mojave; <a href=\"https://stackoverflow.com/questions/54068035/linking-not-working-in-homebrews-cmake-since-mojave\">Linking not working in homebrew&#39;s cmake since Mojave</a> might be helpful to start with. I&#39;d say XY problem, not related to Python..."}, {"owner": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "edited": false, "score": 0, "creation_date": 1563543807, "post_id": 57083897, "comment_id": 100746293, "body": "Esp. <a href=\"https://stackoverflow.com/a/57014480/2650249\">this answer</a> in the question should provide you with some helpful info. I don&#39;t work with MacOS since Mojave anymore so can&#39;t say for sure whether a perm change is a good idea, but the flag adjustment looks promising, smth like <code>LDFLAGS=&quot;-L&#47;usr&#47;local&#47;opt&#47;openssl&#47;lib&quot; CPPFLAGS=&quot;-I&#47;usr&#47;local&#47;opt&#47;openssl&#47;include&quot; LD_LIBRARY_PATH=&quot;$LD_LIBRARY_PATH:&#47;usr&#47;local&#47;lib&quot; pip install psycopg2 --no-binary=psycopg2</code>"}], "owner": {"reputation": 8390, "user_id": 1404049, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/vkpuK.png?s=128&g=1", "display_name": "Fallenreaper", "link": "https://stackoverflow.com/users/1404049/fallenreaper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563455380, "creation_date": 1563396624, "last_edit_date": 1563455380, "question_id": 57083897, "link": "https://stackoverflow.com/questions/57083897/psycopg2-for-python3-mac-wont-install-the-wheel", "title": "psycopg2 for python3? Mac wont install the wheel", "body": "<p>Machine: Mac OSX\nPython Version: 3.X, specifically 3.7.3</p>\n\n<p>I was looking at the psycopg2 documentation, it said it was Python3 friendly.  <a href=\"https://pypi.org/project/psycopg2/\" rel=\"nofollow noreferrer\">https://pypi.org/project/psycopg2/</a></p>\n\n<p>It was saying that all i would need to do is to do something akin to: <code>pip install psycopg2</code> but when I do it, setup.py install will give an error.</p>\n\n<blockquote>\n  <p>ERROR: Command \"/usr/local/bin/python3.7 -u -c 'import setuptools, tokenize;<strong>file</strong>='\"'\"'/private/var/folders/r3/lv90w0yx6xq9t2p4qgb7yb1r0000gn/T/pip-install-66v9kpqs/psycopg2/setup.py'\"'\"';f=getattr(tokenize, '\"'\"'open'\"'\"', open)(<strong>file</strong>);code=f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, <strong>file</strong>, '\"'\"'exec'\"'\"'))' install --record /private/var/folders/r3/lv90w0yx6xq9t2p4qgb7yb1r0000gn/T/pip-record-8anshmva/install-record.txt --single-version-externally-managed --compile\" failed with error code 1 in /private/var/folders/r3/lv90w0yx6xq9t2p4qgb7yb1r0000gn/T/pip-install-66v9kpqs/psycopg2/</p>\n</blockquote>\n\n<p>I was trying to figure out how to progress with this, in order to have psycopg2 be easily used within Python3.</p>\n\n<p>I dont think i should be downloading the source and building it and likewise their website says I shouldnt use binaries for production.</p>\n\n<p>The following gives the insight to use the binary on my mac, but not to use it for production.  <a href=\"https://stackoverflow.com/questions/56275454/i-cant-install-psycopg2-with-python3-on-mac-ive-installed-python3-and-pip3\">I can&#39;t install Psycopg2 with Python3 on Mac. I&#39;ve installed Python3 and pip3</a> This gives me one caveat, I am not sure what my prod server will be.  Usually it is unix, but i was thinking \"wait, does mac have a prod server? How would i do it for there then?\"</p>\n\n<p>It wanted me to just implement: <code>pip3 install psycopg2-binary</code> but like what the psycopg2 website said, that should not be a prod solution.  Me personally, I dont like writing custom scripts for custom OS.  I think that to give the best experience, the application should be cross-platform compatible, ESPECIALLY since this is python.</p>\n\n<p>I cant seem to figure it out, has anyone figured out how to do this?</p>\n\n<p><strong><em>EDIT:</em></strong> Pip3 install seems to cause an error with GCC when compiling.  The issue I saw was as follows:</p>\n\n<blockquote>\n<pre><code>ld: library not found for -lssl\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nerror: command 'gcc' failed with exit status 1\n</code></pre>\n</blockquote>\n\n<p>I tested it and gcc is in my path, so it seems that it doesnt know what lssl is.  why would that not be a valid statement.  I figured pip3 would have tested against this?</p>\n"}, {"tags": ["python", "tensorflow"], "owner": {"reputation": 11, "user_id": 11799681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cba97ef1b0a54737bb79fd9f66c244cd?s=128&d=identicon&r=PG&f=1", "display_name": "Rishabh", "link": "https://stackoverflow.com/users/11799681/rishabh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 139, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1563396551, "creation_date": 1563396551, "question_id": 57083881, "link": "https://stackoverflow.com/questions/57083881/tensorflow-2-0-saving-trained-parameters-to-be-restored-in-a-new-file", "title": "Tensorflow 2.0 Saving trained parameters to be restored in a new file", "body": "<p>I need to save trained variables of a TensorFlow 2.0 model using one of TF's built in functions like tf.train.Checkpoint or any other, and want to call them in a new file. I am not using tf.Keras.Sequantial and don't want to use something like model.save_weights()</p>\n\n<p>I have tried tf.train.Checkpoint to save variables, but not sure how to restore them. I used to work with tf.train.Saver() in TF 1.0 to save variables using sessions and restore them using tf.train.import_meta_graph and tf.train.latest_checkpoint. However, I haven't been able to find equivalent functionalities in TF 2.0 documentation so far. </p>\n\n<h1>try checkpoint saver in tensorflow 2.0 format to save trained parameters W, b_v, b_h</h1>\n\n<p>saver = tf.train.Checkpoint()</p>\n\n<p>saver.listed = [W, b_v, b_h]</p>\n\n<p>saver.mapped = {'W':saver.listed[0],'b_v':saver.listed[1],\n 'b_h':saver.listed[2]}</p>\n\n<p>save_path = saver.save('trained_parameters')</p>\n\n<h1>in a new file:</h1>\n\n<p>restorer = tf.train.Checkpoint()</p>\n\n<p>restorer.restore('trained_parameters')</p>\n\n<h1>calling the parameters by their previously mapped names doesn't work, not sure how to go about this</h1>\n"}, {"tags": ["python", "dataframe"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1563396724, "post_id": 57083848, "comment_id": 100690886, "body": "Welcome to StackOverflow. Please read and follow the posting guidelines in the help documentation, as suggested when you created this account. <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimal, complete, verifiable example</a> applies here. We cannot effectively help you until you post your MCVE code and accurately specify the problem. We should be able to paste your posted code into a text file and reproduce the problem you specified. &quot;did not work&quot; is not a problem specification."}], "answers": [{"tags": [], "owner": {"reputation": 1247, "user_id": 5822776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rasLi.png?s=128&g=1", "display_name": "Jim Todd", "link": "https://stackoverflow.com/users/5822776/jim-todd"}, "is_accepted": false, "score": 0, "last_activity_date": 1563397053, "creation_date": 1563397053, "answer_id": 57083977, "question_id": 57083848, "link": "https://stackoverflow.com/questions/57083848/if-not-in-a-list-returns-the-entire-list/57083977#57083977", "title": "&#39;if not&#39; in a list returns the entire list", "body": "<p>You can better handle this with <code>set</code> difference. Finally convert the result to <code>list</code>, if needed.</p>\n\n<pre><code>&gt;&gt;&gt; mylist=list(set(df['DATE']) - set(df1['DATE']))\n</code></pre>\n\n<p>Now, mylist will have what you need.</p>\n"}, {"tags": [], "owner": {"reputation": 5677, "user_id": 1592364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9fRvr.jpg?s=128&g=1", "display_name": "Ankur Sinha", "link": "https://stackoverflow.com/users/1592364/ankur-sinha"}, "is_accepted": false, "score": 1, "last_activity_date": 1563397098, "creation_date": 1563397098, "answer_id": 57083985, "question_id": 57083848, "link": "https://stackoverflow.com/questions/57083848/if-not-in-a-list-returns-the-entire-list/57083985#57083985", "title": "&#39;if not&#39; in a list returns the entire list", "body": "<p>You do not need to go through if-else conditions. You can do this using:</p>\n\n<pre><code>df1[~df1['Date'].isin(df['Date'].tolist())]\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11677713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6419e66988ad95784b98da142397ddf6?s=128&d=identicon&r=PG&f=1", "display_name": "lynn W.", "link": "https://stackoverflow.com/users/11677713/lynn-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1563397746, "creation_date": 1563396400, "last_edit_date": 1563397746, "question_id": 57083848, "link": "https://stackoverflow.com/questions/57083848/if-not-in-a-list-returns-the-entire-list", "title": "&#39;if not&#39; in a list returns the entire list", "body": "<p>I have two lists of dates, one is complete, say df['Date'] and the other one has missing dates, say df1['Date']. I want the if statement to return the dates that are not listed in df['Date'] from df1['Date'] </p>\n\n<p>I have tried to convert it to a timestamp as well, but that did not work. </p>\n\n<pre><code>mylist = []\nfor elem in df['Date']:    \n    if elem in df1['Date']:\n        pass\n    else:\n        mylist.append(elem)\n</code></pre>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 3209, "user_id": 8289095, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aIiQ6lodE94/AAAAAAAAAAI/AAAAAAAAACY/o_5Sl1VNeDA/photo.jpg?sz=128", "display_name": "Chris", "link": "https://stackoverflow.com/users/8289095/chris"}, "edited": false, "score": 0, "creation_date": 1563396599, "post_id": 57083843, "comment_id": 100690847, "body": "You need classes - their attributes can be of any type you want, including nested dictionaries or lists. Attributes could be instances of other custom classes too. Much easier than the dictionary you have where the values are lists of tuples."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1563396881, "post_id": 57083843, "comment_id": 100690950, "body": "General design questions like this are not really appropriate for <a href=\"https://stackoverflow.com\">Stack Overflow</a>. It&#39;s closer to the subject matter of <a href=\"https://softwareengineering.stackexchange.com\">Software Engineering</a>, but you&#39;d probably have to ask more specific questions about why one design is better than another, rather than broad recommendations."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 1, "creation_date": 1563397014, "post_id": 57083843, "comment_id": 100690987, "body": "@run_the_race, let me introduce you to <a href=\"https://docs.python.org/3/library/collections.html#collections.namedtuple\" rel=\"nofollow noreferrer\"><code>namedtuple</code></a>, your new best friend."}, {"owner": {"reputation": 1600, "user_id": 5506400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9698364f8ae6505bacf677d7fed75fe?s=128&d=identicon&r=PG&f=1", "display_name": "run_the_race", "link": "https://stackoverflow.com/users/5506400/run-the-race"}, "edited": false, "score": 0, "creation_date": 1563519143, "post_id": 57083843, "comment_id": 100733907, "body": "I had learnt about named tuples now, and they are great for code readilbility. However, the downside with them is searching through a list of them. E.g. a list of named tuples and trying to find the tuples whose column is a specific value."}], "answers": [{"tags": [], "owner": {"reputation": 3209, "user_id": 8289095, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aIiQ6lodE94/AAAAAAAAAAI/AAAAAAAAACY/o_5Sl1VNeDA/photo.jpg?sz=128", "display_name": "Chris", "link": "https://stackoverflow.com/users/8289095/chris"}, "is_accepted": false, "score": 0, "last_activity_date": 1563397298, "creation_date": 1563397298, "answer_id": 57084018, "question_id": 57083843, "link": "https://stackoverflow.com/questions/57083843/python-how-to-organise-data-instead-of-nested-dictionaries-and-lists/57084018#57084018", "title": "Python how to organise data instead of nested dictionaries and lists", "body": "<p>Your complex dictionary containing lists of tuples can be replaced by objects.</p>\n\n<pre><code>dict = {\n    heading1 : [\n        (value1, id1), (value2, id2)\n    ],\n    heading2 : [\n        (value3, id3), (value4, id4)\n    ],\n}\n</code></pre>\n\n<p>Instead, you can try the following. It\u2019s not a great example, but gives an idea of how it might work.</p>\n\n<pre><code>class Thing:\n    headings = [] # This will be a list of Headings\n\nclass Heading:\n    values = [] # This will be a list of values, of whatever type you need (e.g. string)\n</code></pre>\n\n<p>Use it like this:</p>\n\n<pre><code>heading = Heading()\nheading.values.append(\"Test value\")\n\nthing = Thing()\nthing.headings.append(heading)\n\nprint(thing.headings[0].values[0]) # Prints \"Test value\"\n</code></pre>\n"}], "owner": {"reputation": 1600, "user_id": 5506400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9698364f8ae6505bacf677d7fed75fe?s=128&d=identicon&r=PG&f=1", "display_name": "run_the_race", "link": "https://stackoverflow.com/users/5506400/run-the-race"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563397298, "creation_date": 1563396347, "question_id": 57083843, "link": "https://stackoverflow.com/questions/57083843/python-how-to-organise-data-instead-of-nested-dictionaries-and-lists", "title": "Python how to organise data instead of nested dictionaries and lists", "body": "<p>I have read quite a few SO posts on nested dictionaries and lists (e.g. <a href=\"https://stackoverflow.com/questions/6397246/object-vs-dictionary-how-to-organise-a-data-tree\">Object vs. Dictionary: how to organise a data tree?</a>), but I still don't understand when to choose different data structures.</p>\n\n<p>I often find myself start programming with for example a dictionary of lists, and then oh, I need to add something else, lets make each value in the list a tuple, and then there something else... Soon its a deep frankenstein of nested lists and dicts.</p>\n\n<p>And then I try and spend more time trying to document the data structure with comments, then actually coding it. I also still think it's hard for the next programmer to pick up and use. Seems like I just make everything complicated. At which point I think about making classes to handle it. Classes with just attributes seems none ideal.</p>\n\n<p>Here is a basic example:</p>\n\n<pre><code>dict = {\n    heading1 : [\n        (value1, id1), (value2, id2)\n    ],\n    heading2 : [\n        (value3, id3), (value4, id4)\n    ],\n}\n</code></pre>\n\n<p>How can one code the above data structure to be more easily understood and maintainable?</p>\n"}, {"tags": ["python", "jupyter-notebook", "google-cloud-storage", "jupyter"], "comments": [{"owner": {"reputation": 1040, "user_id": 11135159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcb3b536ae330b4e19e8359824aef583?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel Czuczwara", "link": "https://stackoverflow.com/users/11135159/pawel-czuczwara"}, "edited": false, "score": 0, "creation_date": 1563441736, "post_id": 57083831, "comment_id": 100704168, "body": "Hi @Firestarter can you share minimal reproducible code sample to better understand what do you want to achieve? Why you do want not use <a href=\"https://github.com/GoogleCloudPlatform/python-docs-samples/tree/master/storage\" rel=\"nofollow noreferrer\">google-cloud-storage that is well documented here</a>?"}, {"owner": {"reputation": 86, "user_id": 11599550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab67444d1b57f5bc86596a79c9a70795?s=128&d=identicon&r=PG&f=1", "display_name": "Firestarter", "link": "https://stackoverflow.com/users/11599550/firestarter"}, "reply_to_user": {"reputation": 1040, "user_id": 11135159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcb3b536ae330b4e19e8359824aef583?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel Czuczwara", "link": "https://stackoverflow.com/users/11135159/pawel-czuczwara"}, "edited": false, "score": 0, "creation_date": 1563456650, "post_id": 57083831, "comment_id": 100712716, "body": "google-cloud-storage doesn&#39;t allow me to run basic python scripts without using their storage client code. I added the code I&#39;m trying to run."}, {"owner": {"reputation": 489, "user_id": 4018047, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MxksJ.png?s=128&g=1", "display_name": "Alessandro", "link": "https://stackoverflow.com/users/4018047/alessandro"}, "edited": false, "score": 0, "creation_date": 1563457333, "post_id": 57083831, "comment_id": 100713125, "body": "Files on GCS are not local to your VM instance so you have to download them first."}, {"owner": {"reputation": 86, "user_id": 11599550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab67444d1b57f5bc86596a79c9a70795?s=128&d=identicon&r=PG&f=1", "display_name": "Firestarter", "link": "https://stackoverflow.com/users/11599550/firestarter"}, "edited": false, "score": 0, "creation_date": 1563457393, "post_id": 57083831, "comment_id": 100713172, "body": "Okay. That&#39;s what I was trying to avoid doing. Guess I&#39;ll have to find another way."}], "answers": [{"tags": [], "owner": {"reputation": 489, "user_id": 4018047, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MxksJ.png?s=128&g=1", "display_name": "Alessandro", "link": "https://stackoverflow.com/users/4018047/alessandro"}, "is_accepted": true, "score": 2, "last_activity_date": 1563457675, "creation_date": 1563457675, "answer_id": 57096056, "question_id": 57083831, "link": "https://stackoverflow.com/questions/57083831/how-to-run-python-script-on-google-cloud-storage/57096056#57096056", "title": "How to run Python script on Google Cloud storage?", "body": "<p>After the last comment, I might know what you can do. At the end, it comes to what you want to try to do. To \"see\" a bucket as a local volume, you could use <a href=\"https://github.com/GoogleCloudPlatform/gcsfuse\" rel=\"nofollow noreferrer\">gcsfue</a> to mount GCS as volume on your VM. At that point you will see files as local.\nHowever they are not really local file gcsfue manages downlaod, upload, and update for you.</p>\n"}], "owner": {"reputation": 86, "user_id": 11599550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab67444d1b57f5bc86596a79c9a70795?s=128&d=identicon&r=PG&f=1", "display_name": "Firestarter", "link": "https://stackoverflow.com/users/11599550/firestarter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1377, "favorite_count": 0, "accepted_answer_id": 57096056, "answer_count": 1, "score": 0, "last_activity_date": 1563457675, "creation_date": 1563396275, "last_edit_date": 1563456693, "question_id": 57083831, "link": "https://stackoverflow.com/questions/57083831/how-to-run-python-script-on-google-cloud-storage", "title": "How to run Python script on Google Cloud storage?", "body": "<p>I am trying to run a Python script on files in Google Cloud Storage (without using the google-cloud-storage package). I have Jupyter running on a VM instance. How can I access my files from Jupyter?\nthis is an example of the code I'm trying to run:</p>\n\n<pre><code>    fileName = 'OUTCAR'\n\n    with open(fileName) as file:\n        for line in file:\n            if 'free  energy   TOTEN' in line:\n                print(line)\n</code></pre>\n"}, {"tags": ["python", "json"], "comments": [{"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1563396837, "post_id": 57083829, "comment_id": 100690938, "body": "As StackOverflow is not a code-writing service, please edit the code you have written to try solve this poblem into your question."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 9947296, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9BCbg1cZZE0/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3EDBiWr3Clt7xK7nHaxO4uivO3Eg/mo/photo.jpg?sz=128", "display_name": "John Monte", "link": "https://stackoverflow.com/users/9947296/john-monte"}, "edited": false, "score": 1, "creation_date": 1563397232, "post_id": 57083979, "comment_id": 100691065, "body": "This is exactly what I was looking for. Do you have a link to any documentation to see how this works to gain a better understanding?"}, {"owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "reply_to_user": {"reputation": 27, "user_id": 9947296, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9BCbg1cZZE0/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3EDBiWr3Clt7xK7nHaxO4uivO3Eg/mo/photo.jpg?sz=128", "display_name": "John Monte", "link": "https://stackoverflow.com/users/9947296/john-monte"}, "edited": false, "score": 0, "creation_date": 1563397323, "post_id": 57083979, "comment_id": 100691094, "body": "@JohnMonte Official documentation for <code>defaultdict</code> <a href=\"https://docs.python.org/3.6/library/collections.html#collections.defaultdict\" rel=\"nofollow noreferrer\">docs.python.org/3.6/library/&hellip;</a> and <code>re</code> module <a href=\"https://docs.python.org/3.6/library/re.html\" rel=\"nofollow noreferrer\">docs.python.org/3.6/library/re.html</a> is good start"}], "tags": [], "owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "is_accepted": true, "score": 1, "last_activity_date": 1563397055, "creation_date": 1563397055, "answer_id": 57083979, "question_id": 57083829, "link": "https://stackoverflow.com/questions/57083829/make-text-file-with-inconsistent-structure-into-json-object-with-inconsistent-nu/57083979#57083979", "title": "Make text file with inconsistent structure into JSON object with inconsistent number of items", "body": "<p>The JSON you provided in example isn't valid JSON, but this script produces something similar:</p>\n\n<pre><code>line = 'RHSA-2019:1797 CVE-2017-17485,CVE-2018-12022,CVE-2018-12023,CVE-2018-14718,CVE-2018-14719,CVE-2018-19360,CVE-2018-19361,CVE-2018-19362 cpe:/a:redhat:jboss_bpms:6.4'\n\nimport re\nfrom collections import defaultdict\nimport json\n\nd = defaultdict(list)\n\nfor i in line.split():\n    d[re.findall(r'^(\\w+)', i)[0].upper()].extend(i.split(','))\n\nprint(json.dumps(d, indent=4))\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>{\n    \"RHSA\": [\n        \"RHSA-2019:1797\"\n    ],\n    \"CVE\": [\n        \"CVE-2017-17485\",\n        \"CVE-2018-12022\",\n        \"CVE-2018-12023\",\n        \"CVE-2018-14718\",\n        \"CVE-2018-14719\",\n        \"CVE-2018-19360\",\n        \"CVE-2018-19361\",\n        \"CVE-2018-19362\"\n    ],\n    \"CPE\": [\n        \"cpe:/a:redhat:jboss_bpms:6.4\"\n    ]\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 9947296, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9BCbg1cZZE0/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3EDBiWr3Clt7xK7nHaxO4uivO3Eg/mo/photo.jpg?sz=128", "display_name": "John Monte", "link": "https://stackoverflow.com/users/9947296/john-monte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 57083979, "answer_count": 1, "score": 0, "last_activity_date": 1563397055, "creation_date": 1563396273, "last_edit_date": 1563396596, "question_id": 57083829, "link": "https://stackoverflow.com/questions/57083829/make-text-file-with-inconsistent-structure-into-json-object-with-inconsistent-nu", "title": "Make text file with inconsistent structure into JSON object with inconsistent number of items", "body": "<p>I have a file structure this way with hundreds of lines of data: </p>\n\n<pre><code>RHSA-2019:1797 CVE-2017-17485,CVE-2018-12022,CVE-2018-12023,CVE-2018-14718,CVE-2018-14719,CVE-2018-19360,CVE-2018-19361,CVE-2018-19362 cpe:/a:redhat:jboss_bpms:6.4\n</code></pre>\n\n<p>The only consistencies in the data is the space between the 3 fields i want to separate and the commas for the data that's in the middle. The number of items for the first data type labeled RHSA is always one, the data labeled CVE varies from 1 to 20 items  as well as the data labeled CPE. </p>\n\n<p>I have tried to split the strings up using split() but im sure this can be done in one step with python as the data set is inconsistent in number of items but not structure.</p>\n\n<p>I split the data by space using</p>\n\n<pre><code>data = rh.split()\nfor temp in data:\n    print(temp)\n</code></pre>\n\n<p>so now I have </p>\n\n<pre><code>RHSA-2019:1797 \n\nCVE-2017-17485,CVE-2018-12022,CVE-2018-12023,CVE-2018-14718,CVE-201814719,CVE-2018-19360,CVE-2018-19361,CVE-2018-19362 \n\n\ncpe:/a:redhat:jboss_bpms:6.4\n</code></pre>\n\n<p>where each data set is on a separate line so ideally i would like to loop every 3 lines and throw the data inso a json like below:</p>\n\n<pre><code>[{\"RHSA\":{ \"RHSA-2019:1797},\n {\"CVE\" :{ \"CVE-2017-17485\",\n           \"CVE-2018-12022\",\n           \"CVE-2018-12023\",\n           \"CVE-2018-14718\",\n           \"CVE-2018-14719\",\n           \"CVE-2018-19360\",\n           \"CVE-2018-19361\",\n           \"CVE-2018-19362\" },\n {\"CPE\" :{ \"cpe:/a:redhat:jboss_bpms:6.4\"}]\n</code></pre>\n"}, {"tags": ["python", "apache-spark", "pyspark", "pyspark-sql"], "comments": [{"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1563396493, "post_id": 57083814, "comment_id": 100690814, "body": "There is no way around passing each statistic to the <code>agg</code> function. That is the proper (and only) way."}, {"owner": {"reputation": 354, "user_id": 6909299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sx1jb.jpg?s=128&g=1", "display_name": "Dinesh Kumar", "link": "https://stackoverflow.com/users/6909299/dinesh-kumar"}, "edited": false, "score": 0, "creation_date": 1563396623, "post_id": 57083814, "comment_id": 100690859, "body": "val df = myDataFrame.describe();                                                                          df: org.apache.spark.sql.DataFrame = [summary: string, count: string] ;                      df.show()"}], "answers": [{"comments": [{"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 2, "creation_date": 1563396835, "post_id": 57083913, "comment_id": 100690936, "body": "<code>AttributeError: &#39;GroupedData&#39; object has no attribute &#39;describe&#39;</code> normally I would think it&#39;s a pandas vs. spark mix up, but this doesn&#39;t work in pandas either AFAIK."}], "tags": [], "owner": {"reputation": 400, "user_id": 11385784, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jpmRuVr9aVw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re7QOXLOb-a4_0O_DchJcNR16kZwQ/mo/photo.jpg?sz=128", "display_name": "Rob", "link": "https://stackoverflow.com/users/11385784/rob"}, "is_accepted": false, "score": -4, "last_activity_date": 1563396708, "creation_date": 1563396708, "answer_id": 57083913, "question_id": 57083814, "link": "https://stackoverflow.com/questions/57083814/how-to-apply-the-describe-function-after-grouping-a-pyspark-dataframe/57083913#57083913", "title": "How to apply the describe function after grouping a PySpark DataFrame?", "body": "<p>You would run this:</p>\n\n<pre><code>df.groupby(\"id\").describe('uniform', 'normal').show()\n</code></pre>\n\n<p>It's fairly self-explanatory.</p>\n"}, {"comments": [{"owner": {"reputation": 160, "user_id": 4984225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VDk79.png?s=128&g=1", "display_name": "Favio V&#225;zquez", "link": "https://stackoverflow.com/users/4984225/favio-v%c3%a1zquez"}, "edited": false, "score": 1, "creation_date": 1563496930, "post_id": 57090614, "comment_id": 100729116, "body": "This works, but I would like a cleaner way of doing it. Thanks for the help."}], "tags": [], "owner": {"reputation": 2120, "user_id": 7592064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f1189982c395149dfd2a86dc99efb78?s=128&d=identicon&r=PG&f=1", "display_name": "Ala Tarighati", "link": "https://stackoverflow.com/users/7592064/ala-tarighati"}, "is_accepted": false, "score": 2, "last_activity_date": 1563441463, "last_edit_date": 1563441463, "creation_date": 1563439991, "answer_id": 57090614, "question_id": 57083814, "link": "https://stackoverflow.com/questions/57083814/how-to-apply-the-describe-function-after-grouping-a-pyspark-dataframe/57090614#57090614", "title": "How to apply the describe function after grouping a PySpark DataFrame?", "body": "<p>Try this:</p>\n\n<pre><code>df.groupby(\"id\").agg(F.count('v').alias('count'), F.mean('v').alias('mean'), F.stddev('v').alias('std'), F.min('v').alias('min'), F.expr('percentile(v, array(0.25))')[0].alias('%25'),  F.expr('percentile(v, array(0.5))')[0].alias('%50'), F.expr('percentile(v, array(0.75))')[0].alias('%75'), F.max('v').alias('max')).show()\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>+---+-----+----+------------------+---+----+---+----+----+\n| id|count|mean|               std|min| %25|%50| %75| max|\n+---+-----+----+------------------+---+----+---+----+----+\n|  1|    2| 1.5|0.7071067811865476|1.0|1.25|1.5|1.75| 2.0|\n|  2|    3| 6.0| 3.605551275463989|3.0| 4.0|5.0| 7.5|10.0|\n+---+-----+----+------------------+---+----+---+----+----+\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 764, "user_id": 2737477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sPVHZ.jpg?s=128&g=1", "display_name": "Michael Hoffman", "link": "https://stackoverflow.com/users/2737477/michael-hoffman"}, "is_accepted": false, "score": 0, "last_activity_date": 1599582503, "creation_date": 1599582503, "answer_id": 63798005, "question_id": 57083814, "link": "https://stackoverflow.com/questions/57083814/how-to-apply-the-describe-function-after-grouping-a-pyspark-dataframe/63798005#63798005", "title": "How to apply the describe function after grouping a PySpark DataFrame?", "body": "<p>If you have a utility function module you could put something like this in it and call a one liner afterwards.</p>\n<pre><code>import pyspark.sql.functions as F\n\ndef groupby_apply_describe(df, groupby_col, stat_col):\n    &quot;&quot;&quot;From a grouby df object provide the stats\n    of describe for each key in the groupby object.\n\n    Parameters\n    ----------\n    df : spark dataframe groupby object\n    col : column to compute statistics on\n    \n    &quot;&quot;&quot;\n    output = df.groupby(groupby_col).agg(\n        F.count(stat_col).alias(&quot;count&quot;),\n        F.mean(stat_col).alias(&quot;mean&quot;),\n        F.stddev(stat_col).alias(&quot;std&quot;),\n        F.min(stat_col).alias(&quot;min&quot;),\n        F.expr(f&quot;percentile({stat_col}, array(0.25))&quot;)[0].alias(&quot;%25&quot;),\n        F.expr(f&quot;percentile({stat_col}, array(0.5))&quot;)[0].alias(&quot;%50&quot;),\n        F.expr(f&quot;percentile({stat_col}, array(0.75))&quot;)[0].alias(&quot;%75&quot;),\n        F.max(stat_col).alias(&quot;max&quot;),\n    )\n    print(output.orderBy(groupby_col).show())\n    return output\n</code></pre>\n<p>In your case you would call <code>groupby_apply_describe(df, 'id', 'v')</code>. The output should match your requirements.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 1322446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22186410b77eb151261ac4d1f42a1cf5?s=128&d=identicon&r=PG", "display_name": "Canimus", "link": "https://stackoverflow.com/users/1322446/canimus"}, "is_accepted": false, "score": 0, "last_activity_date": 1608159143, "creation_date": 1608159143, "answer_id": 65332279, "question_id": 57083814, "link": "https://stackoverflow.com/questions/57083814/how-to-apply-the-describe-function-after-grouping-a-pyspark-dataframe/65332279#65332279", "title": "How to apply the describe function after grouping a PySpark DataFrame?", "body": "<h2>Describe multiple columns...</h2>\n<p>Inspired by the answer before, but tested in <code>spark/3.0.1</code></p>\n<pre class=\"lang-py prettyprint-override\"><code>import pyspark.sql.functions as F\nfrom functools import reduce\n\ngroup_column = 'id'\nmetric_columns = ['v','v1','v2']\n\n# You will have a dataframe with df variable\n\ndef spark_describe(group_col, stat_col):\n    return df.groupby(group_col).agg(\n        F.count(stat_col).alias(f&quot;{stat_col}_count&quot;),\n        F.mean(stat_col).alias(f&quot;{stat_col}_mean&quot;),\n        F.stddev(stat_col).alias(f&quot;{stat_col}_std&quot;),\n        F.min(stat_col).alias(f&quot;{stat_col}_min&quot;),\n        F.max(stat_col).alias(&quot;{stat_col}_max&quot;),\n        F.expr(f&quot;percentile({stat_col}, array(0.25))&quot;)[0].alias(f&quot;{stat_col}_25pct&quot;),\n        F.expr(f&quot;percentile({stat_col}, array(0.5))&quot;)[0].alias(f&quot;{stat_col}_50pct&quot;),\n        F.expr(f&quot;percentile({stat_col}, array(0.75))&quot;)[0].alias(f&quot;{stat_col}_75pct&quot;),   \n    )\n\n_join = lambda a,b: a.join(b, group_column, 'inner')\ndff = reduce(_join, list(map(lambda x: spark_describe(*x), zip(it.repeat(group_column, len(metric_columns)), metric_columns))))\n\n</code></pre>\n"}], "owner": {"reputation": 160, "user_id": 4984225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VDk79.png?s=128&g=1", "display_name": "Favio V&#225;zquez", "link": "https://stackoverflow.com/users/4984225/favio-v%c3%a1zquez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1973, "favorite_count": 2, "answer_count": 4, "score": 3, "last_activity_date": 1608159143, "creation_date": 1563396207, "question_id": 57083814, "link": "https://stackoverflow.com/questions/57083814/how-to-apply-the-describe-function-after-grouping-a-pyspark-dataframe", "title": "How to apply the describe function after grouping a PySpark DataFrame?", "body": "<p>I want to find the cleanest way to apply the <code>describe</code> function to a grouped DataFrame (this question can also grow to apply any DF function to a grouped DF)</p>\n\n<p>I tested grouped aggregate pandas UDF with no luck. There's always a way of doing it by passing each statistics inside the <code>agg</code> function but that's not the proper way.</p>\n\n<p>If we have a sample dataframe: </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df = spark.createDataFrame(\n    [(1, 1.0), (1, 2.0), (2, 3.0), (2, 5.0), (2, 10.0)],\n    (\"id\", \"v\"))\n</code></pre>\n\n<p>The idea would be to do something similar to Pandas:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df.groupby(\"id\").describe()\n</code></pre>\n\n<p>where the result would be:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>                                                   v\n    count mean     std    min   25%    50%  75%   max\nid                              \n1   2.0   1.5   0.707107  1.0   1.25   1.5  1.75  2.0\n2   3.0   6.0   3.605551  3.0   4.00   5.0  7.50  10.0\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "python-2.7", "difflib"], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 3624717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1487eef99c20a0096d95c54d4a8c137?s=128&d=identicon&r=PG", "display_name": "equant", "link": "https://stackoverflow.com/users/3624717/equant"}, "edited": false, "score": 0, "creation_date": 1580524249, "post_id": 57090939, "comment_id": 106136871, "body": "This worked for me trying to find bits of two different disk images that differed.  Thanks!"}], "tags": [], "owner": {"reputation": 91, "user_id": 7909255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9574f93e165103ace52adbed7dd6641a?s=128&d=identicon&r=PG&f=1", "display_name": "gsr", "link": "https://stackoverflow.com/users/7909255/gsr"}, "is_accepted": true, "score": 1, "last_activity_date": 1563440942, "creation_date": 1563440942, "answer_id": 57090939, "question_id": 57083813, "link": "https://stackoverflow.com/questions/57083813/invert-get-matching-blocks-results-from-difflib-in-python-2-7-and-get-mismatched/57090939#57090939", "title": "Invert get_matching_blocks results from difflib in python 2.7 and get MISMATCHED blocks", "body": "<p>It seems to me that it should be possible to walk thru the matched blocks to compute the unmatched portions. A quick solution (read as \"tested only with the input in the question\") is pasted below. See if it helps you work out the final solution.</p>\n\n<p><em>Note</em>: I only have access to a Python3 interpreter right now but as this question is not version-specific, I'm posting this solution. </p>\n\n<pre><code>import difflib\n\nstring1 = \"This is a test\"\nstring2 = \"This ain't a testament\"\n\ns = difflib.SequenceMatcher(lambda x: x == \" \", string1, string2)\n\ns1_miss = list()\ns2_miss = list()\ns1_cur_off = 0\ns2_cur_off = 0\nfor block in s.get_matching_blocks():\n    a,b,size = block\n    print(\"string1[%s] and string2[%s] match for %s characters\" % block)\n    if a &gt; s1_cur_off:\n        s1_miss.append((s1_cur_off, a-1, a-1-s1_cur_off + 1))\n    s1_cur_off = a + size\n    if b &gt; s2_cur_off:\n        s2_miss.append((s2_cur_off, b-1, b-1-s2_cur_off + 1))\n    s2_cur_off = b + size\nprint(s1_miss)\nprint(s2_miss)\n</code></pre>\n\n<p>Output: \nA list of mismatches is dumped for each string. Each element of the list has three-tuples: the start and end offsets of the mismatch and the length (mostly for debugging).</p>\n\n<pre><code>string1[0] and string2[0] match for 5 characters\nstring1[5] and string2[6] match for 1 characters\nstring1[7] and string2[10] match for 7 characters\nstring1[14] and string2[22] match for 0 characters\n[(6, 6, 1)]\n[(5, 5, 1), (7, 9, 3), (17, 21, 5)]\n</code></pre>\n"}], "owner": {"reputation": 6472, "user_id": 259538, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8zSjE.png?s=128&g=1", "display_name": "panofish", "link": "https://stackoverflow.com/users/259538/panofish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 57090939, "answer_count": 1, "score": 1, "last_activity_date": 1563440942, "creation_date": 1563396204, "last_edit_date": 1563397778, "question_id": 57083813, "link": "https://stackoverflow.com/questions/57083813/invert-get-matching-blocks-results-from-difflib-in-python-2-7-and-get-mismatched", "title": "Invert get_matching_blocks results from difflib in python 2.7 and get MISMATCHED blocks", "body": "<p>The following python 2.7 example returns the matching blocks between string1 and string2:</p>\n\n<pre><code>import difflib    \n\nstring1 = \"This is a test\"\nstring2 = \"This ain't a testament\"\n\ns = difflib.SequenceMatcher(lambda x: x == \" \", string1, string2)\n\nfor block in s.get_matching_blocks():\n    a,b,size = block\n    print \"string1[%s] and string2[%s] match for %s characters\" % block\n</code></pre>\n\n<p>Here are the results from above program:</p>\n\n<pre><code>string1[0] and string2[0] match for 5 characters\nstring1[5] and string2[6] match for 1 characters\nstring1[7] and string2[10] match for 7 characters\nstring1[14] and string2[22] match for 0 characters\n</code></pre>\n\n<p>I want to invert the results and return the mismatched blocks for string1 and string2 as follows:</p>\n\n<pre><code>string1[6] mismatch for 1 characters\n\nstring2[5] mismatch for 1 characters\nstring2[7] mismatch for 3 characters\nstring2[17] mismatch for 5 characters\n</code></pre>\n\n<p>Note: the total matching blocks is the same for both strings, but the mismatched blocks will vary depending on the strings.</p>\n\n<p>Here is color coded representation of the strings where black=matched and red=mismatched.</p>\n\n<p><a href=\"https://i.stack.imgur.com/VRO5Q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VRO5Q.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "multithreading", "multiprocessing", "python-3.7"], "comments": [{"owner": {"reputation": 13858, "user_id": 9059420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qaO9g.jpg?s=128&g=1", "display_name": "Darkonaut", "link": "https://stackoverflow.com/users/9059420/darkonaut"}, "edited": false, "score": 0, "creation_date": 1563408434, "post_id": 57083787, "comment_id": 100693875, "body": "<code>Pool.map()</code> is blocking, so your understanding here was indeed wrong and the observed behaviour is what you should expect. Only the work <i>within</i> the <code>.map()</code> call gets parallelized. If you need <b>two different</b> functions parallelized, you need to use <a href=\"https://docs.python.org/3.7/library/multiprocessing.html#multiprocessing.pool.Pool.apply_async\" rel=\"nofollow noreferrer\">Pool.apply_async()</a> instead (<a href=\"https://stackoverflow.com/a/56076681/9059420\">example</a>)."}, {"owner": {"reputation": 13858, "user_id": 9059420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qaO9g.jpg?s=128&g=1", "display_name": "Darkonaut", "link": "https://stackoverflow.com/users/9059420/darkonaut"}, "edited": false, "score": 0, "creation_date": 1563408488, "post_id": 57083787, "comment_id": 100693882, "body": "The other mystery, about unexpected ordering, is caused by chunking. You can read about this topic <a href=\"https://stackoverflow.com/q/53751050/9059420\">here</a>."}, {"owner": {"reputation": 1, "user_id": 8749380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57e6c8887214863ede948f63879ed3cb?s=128&d=identicon&r=PG&f=1", "display_name": "shobinthomas", "link": "https://stackoverflow.com/users/8749380/shobinthomas"}, "reply_to_user": {"reputation": 13858, "user_id": 9059420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qaO9g.jpg?s=128&g=1", "display_name": "Darkonaut", "link": "https://stackoverflow.com/users/9059420/darkonaut"}, "edited": false, "score": 0, "creation_date": 1563465775, "post_id": 57083787, "comment_id": 100718446, "body": "thanks @Darkonaut this was really helpful .."}], "owner": {"reputation": 1, "user_id": 8749380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57e6c8887214863ede948f63879ed3cb?s=128&d=identicon&r=PG&f=1", "display_name": "shobinthomas", "link": "https://stackoverflow.com/users/8749380/shobinthomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563396555, "creation_date": 1563396044, "last_edit_date": 1563396555, "question_id": 57083787, "link": "https://stackoverflow.com/questions/57083787/2-methods-running-in-pool-with-same-input-values-shows-no-multiprocessing", "title": "2 methods running in Pool with same Input Values shows no multiprocessing", "body": "<p>I am trying to understand how 2 methods can be executed in parallel using a simple and dumbed down example.  The issue is with respect to the execution results.  I observe that the execution happens in sequential order where the method <code>threeCheck()</code> is executed in its entirety before <code>sevenCheck()</code> is even called.\nBut my understanding was that both the methods would be executed in parallel.</p>\n\n<ul>\n<li><code>threeCheck()</code> is a method that checks if a number is divisible by 3</li>\n<li><code>sevenCheck()</code> is a method that checks if a number is divisible by 7</li>\n<li>I have added a random sleep duration in the method calls to mimic\nlatency.</li>\n</ul>\n\n<p>I see that the inputs passed into <code>threeCheck()</code> Method are being processed in parallel.  If we follow sequence, the numbers in the array divisible by 3 are : \n<code>84, 66, 60, 66, 87, 99, 42, .......</code>\nBut when we observe the execution results, the sequence shows otherwise for these first results</p>\n\n<pre><code>import multiprocessing as mp\nimport time\nimport random\n\ndef threeCheck(inputParam):\n    if inputParam % 3 == 0:\n        duration = random.randint(0,6)\n        print(\"3 INPUT = {0} and Sleep = {1}\".format(inputParam, duration))\n        time.sleep(duration)\n        return inputParam\n\ndef sevenCheck(inputParam):\n    if inputParam % 7 == 0:\n        duration = random.randint(0,6)\n        print(\"7 INPUT = {0} and Sleep = {1}\".format(inputParam, duration))\n        time.sleep(duration)\n        return inputParam\n\ndef main():\n    cpuCount = mp.cpu_count()\n    pool = mp.Pool(cpuCount)\n    inputValues = []\n    for i in range(50):\n        inputValues.append(random.randint(0,100))\n\n    resultThree = pool.map(threeCheck, inputValues)\n    resultSeven = pool.map(sevenCheck, inputValues)\n\n    print(\"INPUT = \", inputValues)\n    print(\"CPU = \", cpuCount)\n    print(\"RESULT 3 = \", resultThree)\n    print(\"RESULT 7 = \", resultSeven)\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>\n\n<pre><code>OUTPUT:\n3 INPUT = 84 and Sleep = 5\n3 INPUT = 66 and Sleep = 2\n3 INPUT = 60 and Sleep = 1\n3 INPUT = 99 and Sleep = 3\n3 INPUT = 66 and Sleep = 3\n3 INPUT = 42 and Sleep = 5\n3 INPUT = 12 and Sleep = 1\n3 INPUT = 87 and Sleep = 6\n3 INPUT = 57 and Sleep = 5\n3 INPUT = 42 and Sleep = 3\n3 INPUT = 30 and Sleep = 2\n3 INPUT = 63 and Sleep = 0\n3 INPUT = 42 and Sleep = 6\n3 INPUT = 24 and Sleep = 2\n3 INPUT = 21 and Sleep = 6\n3 INPUT = 30 and Sleep = 4\n3 INPUT = 27 and Sleep = 0\n7 INPUT = 7 and Sleep = 1\n7 INPUT = 84 and Sleep = 6\n7 INPUT = 42 and Sleep = 6\n7 INPUT = 28 and Sleep = 1\n7 INPUT = 21 and Sleep = 6\n7 INPUT = 42 and Sleep = 5\n7 INPUT = 63 and Sleep = 3\n7 INPUT = 91 and Sleep = 5\n7 INPUT = 42 and Sleep = 6\nINPUT =  [7, 95, 25, 19, 59, 82, 47, 68, 20, 76, 84, 8, 88, 29, 1, 66, 60, 66, 87, 25, 23, 80, 52, 99, 65, 65, 25, 42, 12, 38, 28, 88, 57, 21, 27, 40, 42, 38, 31, 91, 30, 68, 22, 24, 63, 42, 64, 17, 65, 30]\nCPU =  4\nRESULT 3 =  [None, None, None, None, None, None, None, None, None, None, 84, None, None, None, None, 66, 60, 66, 87, None, None, None, None, 99, None, None, None, 42, 12, None, None, None, 57, 21, 27, None, 42, None, None, None, 30, None, None, 24, 63, 42, None, None, None, 30]\n...\n</code></pre>\n\n<p>I am sure that I am missing something here .. </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 573, "user_id": 3911355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac5a661e8c2c34e2e0b0fa6c57bfd513?s=128&d=identicon&r=PG", "display_name": "mgrollins", "link": "https://stackoverflow.com/users/3911355/mgrollins"}, "edited": false, "score": 0, "creation_date": 1563396182, "post_id": 57083729, "comment_id": 100690711, "body": "Everything (just about) in Python is an object, so even if x is a method of obj, obj.x is also an object, so you can use &quot;.y&quot; to access the &quot;y&quot; property of the &quot;obj.x&quot; property. A specific example would be   `  &quot;Hello World&quot;.lower().capitalize()  `"}, {"owner": {"reputation": 141, "user_id": 6238275, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206484800173745/picture?type=large", "display_name": "AAA", "link": "https://stackoverflow.com/users/6238275/aaa"}, "edited": false, "score": 0, "creation_date": 1563396268, "post_id": 57083729, "comment_id": 100690749, "body": "Thanks for the help guys"}, {"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1563396755, "post_id": 57083729, "comment_id": 100690901, "body": "<code>dog.eye.color = brown</code> &amp; <code>dog.tail.wag()</code> are good examples. <code>x</code> is part of <code>obj</code>, <code>y</code> is part of <code>x</code>."}], "answers": [{"tags": [], "owner": {"reputation": 6315, "user_id": 1555990, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a743aed2f5b809958ebb17d4d952b7b2?s=128&d=identicon&r=PG", "display_name": "That1Guy", "link": "https://stackoverflow.com/users/1555990/that1guy"}, "is_accepted": false, "score": 1, "last_activity_date": 1563396596, "last_edit_date": 1563396596, "creation_date": 1563395786, "answer_id": 57083745, "question_id": 57083729, "link": "https://stackoverflow.com/questions/57083729/dot-notation-in-the-form-of-obj-x-y-z/57083745#57083745", "title": "Dot notation in the form of obj.x.y.z", "body": "<p><code>obj.x.y</code> simply accesses the <code>y</code> attribute of the <code>x</code> attribute of <code>obj</code></p>\n\n<pre><code>class O1:\n    def __init__(self, some_object):\n        self.y = some_object\n\nclass O2:\n    def __init__(self, some_object):\n        self.x = some_object\n\no1 = O1('foo')\no2 = O2(o1)\n\nprint(o2.x.y)\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>foo\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 66, "user_id": 11680696, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LOcpM1OT1n8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reckPVGbbAqRrmICPk1P1MIbMmYKg/mo/photo.jpg?sz=128", "display_name": "Rahul Hindocha", "link": "https://stackoverflow.com/users/11680696/rahul-hindocha"}, "is_accepted": false, "score": 0, "last_activity_date": 1563396244, "creation_date": 1563396244, "answer_id": 57083823, "question_id": 57083729, "link": "https://stackoverflow.com/questions/57083729/dot-notation-in-the-form-of-obj-x-y-z/57083823#57083823", "title": "Dot notation in the form of obj.x.y.z", "body": "<p><code>obj.x.y</code> means we are accessing the <code>y</code> attribute or function of <code>obj.x</code>. <code>obj.x</code> might be a class, some instance of a class or any other variable.</p>\n"}], "owner": {"reputation": 141, "user_id": 6238275, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206484800173745/picture?type=large", "display_name": "AAA", "link": "https://stackoverflow.com/users/6238275/aaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1563396596, "creation_date": 1563395727, "question_id": 57083729, "link": "https://stackoverflow.com/questions/57083729/dot-notation-in-the-form-of-obj-x-y-z", "title": "Dot notation in the form of obj.x.y.z", "body": "<p>I am trying to learn python and in many codes i see the many codes of the form  </p>\n\n<pre><code>obj.x.y  \n</code></pre>\n\n<p>I know that \n    obj.x\naccesses the method x of the object obj , but I can't understand the mentioned form , I need a simple example to understand it. Thanks</p>\n\n<p>I have done my searches but with no result to understand it.</p>\n"}, {"tags": ["python", "python-3.x", "concurrency", "multiprocessing", "python-internals"], "owner": {"reputation": 11, "user_id": 11799221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29418a2284886ea4ec69be57b7ebc071?s=128&d=identicon&r=PG&f=1", "display_name": "0xd34db33f", "link": "https://stackoverflow.com/users/11799221/0xd34db33f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1563395726, "creation_date": 1563395726, "question_id": 57083728, "link": "https://stackoverflow.com/questions/57083728/processpoolexecutor-read-only-variable-speed-discrepancy", "title": "ProcessPoolExecutor read-only variable speed discrepancy", "body": "<p>I have two versions of a multiprocessing program using <code>concurrent.futures.ProcessPoolExecutor</code> (Python 3.6, Linux) with surprising speed discrepancies despite seemingly minor changes (one is ~3x slower than the other). </p>\n\n<p>Each child process executes a simple function that reads from a large dict (it does not alter it) and returns a result. </p>\n\n<ol>\n<li>The first version of the function passes the dict into <code>executor.submit()</code> as an argument. </li>\n<li>The second version of the function reads from the global dict directly.</li>\n</ol>\n\n<h2>Code samples</h2>\n\n<p><strong>Variable passed in</strong>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#!/usr/bin/env python3\nimport concurrent.futures, pstats, sys, cProfile\n\nBIG_DICT = {i: 2*i for i in range(10000)}\ndef foo(d):\n    return d[0]\n\nwith concurrent.futures.ProcessPoolExecutor(max_workers=10) as executor:\n    tasks = [executor.submit(foo, BIG_DICT) for _ in range(100000)]\n\n    for task in concurrent.futures.as_completed(tasks):\n        task.result()\n</code></pre>\n\n<p><strong>Global variable read from</strong>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#!/usr/bin/env python3\nimport concurrent.futures, pstats, sys, cProfile\n\nBIG_DICT = {i: 2*i for i in range(10000)}\ndef foo():\n    return BIG_DICT[0]\n\nwith concurrent.futures.ProcessPoolExecutor(max_workers=10) as executor:\n    tasks = [executor.submit(foo) for _ in range(100000)]\n\n    for task in concurrent.futures.as_completed(tasks):\n        task.result()\n</code></pre>\n\n<h2>Ideas</h2>\n\n<p>I've profiled both versions of the program using cProfile and the majority of execution time seems to be spent waiting for locks. The global version only waits for about 10 seconds, while the pass-in version waits for almost 80 seconds! </p>\n\n<p>From what I understand, when a process is forked it should make a copy of its parent's memory. As the program is multiprocessed and <code>BIG_DICT</code> is never actually modified after creation, there shouldn't be any need for locking to maintain state consistency between submitting each process. </p>\n\n<p>Since <code>BIG_DICT</code> needs to be copied into the memory space of each child process in both versions, why is there so much discrepancy in execution time? </p>\n\n<p>A couple of ideas I have floating around:</p>\n\n<ul>\n<li>Implementation detail of <code>ProcessPoolExecutor</code></li>\n<li>GIL quirk</li>\n<li>Some sort of Python runtime/OS optimisation</li>\n</ul>\n\n<h2>Profiling results</h2>\n\n<p><strong>Variable passed in</strong>:</p>\n\n<pre><code>         7672287 function calls in 92.434 seconds\n\n   Ordered by: internal time, cumulative time\n   List reduced from 247 to 12 due to restriction &lt;0.05&gt;\n\n   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\n   460133   75.428    0.000   75.428    0.000 {method 'acquire' of '_thread.lock' objects}\n   100001    7.034    0.000    7.034    0.000 {built-in method posix.write}\n   100001    2.490    0.000    2.490    0.000 {method '__enter__' of '_multiprocessing.SemLock' objects}\n   100001    0.686    0.000   78.344    0.001 _base.py:196(as_completed)\n    90033    0.553    0.000   75.879    0.001 threading.py:263(wait)\n   100000    0.548    0.000   13.639    0.000 process.py:449(submit)\n   190033    0.366    0.000    0.713    0.000 _base.py:174(_yield_finished_futures)\n   100000    0.351    0.000    0.598    0.000 _base.py:312(__init__)\n    90033    0.327    0.000   76.335    0.001 threading.py:533(wait)\n   100001    0.261    0.000    7.617    0.000 connection.py:181(send_bytes)\n   480065    0.260    0.000    0.382    0.000 threading.py:239(__enter__)\n   100001    0.258    0.000   11.329    0.000 queues.py:339(put)\n\n\n   Ordered by: internal time, cumulative time\n   List reduced from 247 to 12 due to restriction &lt;0.05&gt;\n\nFunction                                                    was called by...\n                                                                ncalls  tottime  cumtime\n{method 'acquire' of '_thread.lock' objects}                &lt;-   90033    0.078    0.078  threading.py:251(_acquire_restore)\n                                                                190033    0.391    0.391  threading.py:254(_is_owned)\n                                                                180066   74.956   74.956  threading.py:263(wait)\n                                                                     1    0.003    0.003  threading.py:1062(_wait_for_tstate_lock)\n{built-in method posix.write}                               &lt;-  100001    7.034    7.034  connection.py:365(_send)\n{method '__enter__' of '_multiprocessing.SemLock' objects}  &lt;-  100001    2.490    2.490  synchronize.py:95(__enter__)\n_base.py:196(as_completed)                                  &lt;-\nthreading.py:263(wait)                                      &lt;-   90033    0.553   75.879  threading.py:533(wait)\nprocess.py:449(submit)                                      &lt;-  100000    0.548   13.639  local.py:13(&lt;listcomp&gt;)\n_base.py:174(_yield_finished_futures)                       &lt;-  190033    0.366    0.713  _base.py:196(as_completed)\n_base.py:312(__init__)                                      &lt;-  100000    0.351    0.598  process.py:449(submit)\nthreading.py:533(wait)                                      &lt;-   90032    0.327   76.334  _base.py:196(as_completed)\n                                                                     1    0.000    0.001  threading.py:828(start)\nconnection.py:181(send_bytes)                               &lt;-  100001    0.261    7.617  queues.py:339(put)\nthreading.py:239(__enter__)                                 &lt;-  100000    0.070    0.116  _base.py:174(_yield_finished_futures)\n                                                                100000    0.033    0.051  _base.py:405(result)\n                                                                100000    0.083    0.108  queue.py:115(put)\n                                                                 90032    0.040    0.058  threading.py:523(clear)\n                                                                 90033    0.034    0.050  threading.py:533(wait)\nqueues.py:339(put)                                          &lt;-  100000    0.258   11.329  process.py:449(submit)\n                                                                     1    0.000    0.000  process.py:499(shutdown)\n</code></pre>\n\n<p><strong>Global variable read from</strong>:</p>\n\n<pre><code>         5949819 function calls in 27.158 seconds\n\n   Ordered by: internal time, cumulative time\n   List reduced from 247 to 12 due to restriction &lt;0.05&gt;\n\n   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\n   160569   10.072    0.000   10.072    0.000 {method 'acquire' of '_thread.lock' objects}\n   100001    5.453    0.000    5.453    0.000 {method '__enter__' of '_multiprocessing.SemLock' objects}\n   100001    5.338    0.000    5.338    0.000 {built-in method posix.write}\n   100000    0.883    0.000    1.163    0.000 _base.py:312(__init__)\n   100000    0.477    0.000   15.671    0.000 process.py:449(submit)\n   100001    0.438    0.000    6.133    0.000 connection.py:181(send_bytes)\n   100001    0.304    0.000   12.921    0.000 queues.py:339(put)\n   100000    0.304    0.000    0.304    0.000 process.py:116(__init__)\n   100001    0.277    0.000    0.432    0.000 reduction.py:38(__init__)\n   100000    0.267    0.000    0.333    0.000 threading.py:334(notify)\n   100000    0.240    0.000    0.747    0.000 queue.py:115(put)\n   100006    0.238    0.000    0.280    0.000 threading.py:215(__init__)\n\n\n   Ordered by: internal time, cumulative time\n   List reduced from 247 to 12 due to restriction &lt;0.05&gt;\n\nFunction                                                    was called by...\n                                                                ncalls  tottime  cumtime\n{method 'acquire' of '_thread.lock' objects}                &lt;-   15142    0.007    0.007  threading.py:251(_acquire_restore)\n                                                                115142    0.038    0.038  threading.py:254(_is_owned)\n                                                                 30284   10.022   10.022  threading.py:263(wait)\n                                                                     1    0.004    0.004  threading.py:1062(_wait_for_tstate_lock)\n{method '__enter__' of '_multiprocessing.SemLock' objects}  &lt;-  100001    5.453    5.453  synchronize.py:95(__enter__)\n{built-in method posix.write}                               &lt;-  100001    5.338    5.338  connection.py:365(_send)\n_base.py:312(__init__)                                      &lt;-  100000    0.883    1.163  process.py:449(submit)\nprocess.py:449(submit)                                      &lt;-  100000    0.477   15.671  global.py:13(&lt;listcomp&gt;)\nconnection.py:181(send_bytes)                               &lt;-  100001    0.438    6.133  queues.py:339(put)\nqueues.py:339(put)                                          &lt;-  100000    0.304   12.921  process.py:449(submit)\n                                                                     1    0.000    0.000  process.py:499(shutdown)\nprocess.py:116(__init__)                                    &lt;-  100000    0.304    0.304  process.py:449(submit)\nreduction.py:38(__init__)                                   &lt;-  100001    0.277    0.432  reduction.py:48(dumps)\nthreading.py:334(notify)                                    &lt;-  100000    0.267    0.333  queue.py:115(put)\nqueue.py:115(put)                                           &lt;-  100000    0.240    0.747  process.py:449(submit)\nthreading.py:215(__init__)                                  &lt;-  100000    0.238    0.280  _base.py:312(__init__)\n                                                                     3    0.000    0.000  queue.py:27(__init__)\n                                                                     1    0.000    0.000  queues.py:67(_after_fork)\n                                                                     2    0.000    0.000  threading.py:498(__init__)\n</code></pre>\n"}, {"tags": ["python", "pandas", "numpy"], "comments": [{"owner": {"reputation": 3255, "user_id": 4895877, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FZ0F1.jpg?s=128&g=1", "display_name": "Brendan", "link": "https://stackoverflow.com/users/4895877/brendan"}, "edited": false, "score": 1, "creation_date": 1563395967, "post_id": 57083727, "comment_id": 100690623, "body": "Do you need to <i>show</i> the results to export them to html?"}, {"owner": {"reputation": 2311, "user_id": 5847854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2232315d77a11d67d885bf592226fe12?s=128&d=identicon&r=PG&f=1", "display_name": "Terry", "link": "https://stackoverflow.com/users/5847854/terry"}, "edited": false, "score": 1, "creation_date": 1563396362, "post_id": 57083727, "comment_id": 100690778, "body": "you try <code>df.to_html(&#39;nameFile.html&#39;)</code> to save as html?"}, {"owner": {"reputation": 33, "user_id": 11798841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/170619cfd6b3611da917d5a0c5be8a42?s=128&d=identicon&r=PG&f=1", "display_name": "Taner", "link": "https://stackoverflow.com/users/11798841/taner"}, "edited": false, "score": 0, "creation_date": 1563481128, "post_id": 57083727, "comment_id": 100725066, "body": "My problem is that the entire dataframe doesnt display, when i print out the dataframe only some of the rows show when i need 57623 of them to show."}, {"owner": {"reputation": 231, "user_id": 11788678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YaSed.png?s=128&g=1", "display_name": "DeepBlue", "link": "https://stackoverflow.com/users/11788678/deepblue"}, "edited": false, "score": 0, "creation_date": 1564088343, "post_id": 57083727, "comment_id": 100926452, "body": "This is not as good idea to have an html file with 57623 rows. if you need to view all these data, either use JavaScript to load dynamically or divide the view into several pages which is easier."}], "answers": [{"tags": [], "owner": {"reputation": 1272, "user_id": 3508427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6a80d4e89e47d90ab07ba87f1162fee?s=128&d=identicon&r=PG&f=1", "display_name": "niuer", "link": "https://stackoverflow.com/users/3508427/niuer"}, "is_accepted": false, "score": 1, "last_activity_date": 1564087731, "creation_date": 1564087731, "answer_id": 57209941, "question_id": 57083727, "link": "https://stackoverflow.com/questions/57083727/how-to-display-a-dataframe-without-jupyter-notebook-crashing/57209941#57209941", "title": "How to display a DataFrame without Jupyter Notebook crashing?", "body": "<p>I think your machine is not powerful enough to handle so much data. I can <code>display</code> 57623 rows for my data (with 16 columns) without any problem. But my machine has 252GB memory, and it still took about 1 minute to display these data in jupyter notebook. </p>\n\n<p>If I tried to scroll through the data, it's slow, and sometimes stuck for a while.</p>\n\n<p>On the other hand, what do you want to achieve by displaying all data here? There's definitely another way to achieve the same thing as you are doing now. </p>\n"}], "owner": {"reputation": 33, "user_id": 11798841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/170619cfd6b3611da917d5a0c5be8a42?s=128&d=identicon&r=PG&f=1", "display_name": "Taner", "link": "https://stackoverflow.com/users/11798841/taner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564087731, "creation_date": 1563395723, "question_id": 57083727, "link": "https://stackoverflow.com/questions/57083727/how-to-display-a-dataframe-without-jupyter-notebook-crashing", "title": "How to display a DataFrame without Jupyter Notebook crashing?", "body": "<p>Everytime I try to display a complete DataFrame in my jupyter notebook, the note book crashes. The file wont start up so I had to make a new jupyter notebook file. When i do display(df) it only shows a couple of the rows, when I need to show 57623 rows. I need to show results for all of these rows and put them into an html file.</p>\n\n<p>I tried setting the max rows and max columns, but the entire dataframe would not print out without the notebook crashing</p>\n\n<p>''' python\npd.set_option('display.max_columns', 24)\n    \"pd.set_option('display.max_rows', 57623)\n'''</p>\n\n<p>The expected results were for the entire DataFrame to print out, but instead the notebook would have an hourglass next to it and nothing would load.</p>\n"}, {"tags": ["python", "pandas", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 248, "user_id": 6353522, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/b3d0c77c0601ede6bb14e353ed51daf0?s=128&d=identicon&r=PG&f=1", "display_name": "tomoc4", "link": "https://stackoverflow.com/users/6353522/tomoc4"}, "edited": false, "score": 0, "creation_date": 1563481464, "post_id": 57086139, "comment_id": 100725193, "body": "Thanks so much for your answer. This has worked a treat! Thanks again!"}, {"owner": {"reputation": 248, "user_id": 6353522, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/b3d0c77c0601ede6bb14e353ed51daf0?s=128&d=identicon&r=PG&f=1", "display_name": "tomoc4", "link": "https://stackoverflow.com/users/6353522/tomoc4"}, "edited": false, "score": 0, "creation_date": 1564094845, "post_id": 57086139, "comment_id": 100928216, "body": "thanks for your answer it did exactly the job I wanted to do. I am however trying to replicate this exact function on two small datasets and do a conditional lookup like the function you wrote but I&#39;m getting an error <code>IndexError: (&#39;single positional indexer is out-of-bounds&#39;, &#39;occurred at index 0&#39;)</code>  It&#39;s really strange but the data is of the same size index wise"}, {"owner": {"reputation": 6583, "user_id": 10426037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6723e3123b9a13d6360d1ee755f8728?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/10426037/valentino"}, "reply_to_user": {"reputation": 248, "user_id": 6353522, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/b3d0c77c0601ede6bb14e353ed51daf0?s=128&d=identicon&r=PG&f=1", "display_name": "tomoc4", "link": "https://stackoverflow.com/users/6353522/tomoc4"}, "edited": false, "score": 0, "creation_date": 1564095131, "post_id": 57086139, "comment_id": 100928275, "body": "My guess is that you have a case where the first <code>loc</code> is empty, so when you do <code>.iloc[-1]</code> it raises that error. Cannot say anything more specific without looking at the real data."}, {"owner": {"reputation": 248, "user_id": 6353522, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/b3d0c77c0601ede6bb14e353ed51daf0?s=128&d=identicon&r=PG&f=1", "display_name": "tomoc4", "link": "https://stackoverflow.com/users/6353522/tomoc4"}, "edited": false, "score": 0, "creation_date": 1564132649, "post_id": 57086139, "comment_id": 100938203, "body": "I&#39;ve made another stackoverflow question here with the data if that helps <a href=\"https://stackoverflow.com/questions/57199390/conditional-merge-single-indexer-out-of-bounds-occured-at-zero-error-with-pan\" title=\"conditional merge single indexer out of bounds occured at zero error with pan\">stackoverflow.com/questions/57199390/&hellip;</a>"}], "tags": [], "owner": {"reputation": 6583, "user_id": 10426037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6723e3123b9a13d6360d1ee755f8728?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/10426037/valentino"}, "is_accepted": true, "score": 0, "last_activity_date": 1563415644, "creation_date": 1563415644, "answer_id": 57086139, "question_id": 57083724, "link": "https://stackoverflow.com/questions/57083724/how-to-lookup-two-different-ranges-based-on-rows-value-pandas-dataframe/57086139#57086139", "title": "How to lookup two different ranges based on row&#39;s value Pandas dataframe", "body": "<p>You can define your custom function to extract the data from the two dataframes and use it with <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.apply.html\" rel=\"nofollow noreferrer\">apply</a>.</p>\n\n<p>If I understood correctly what you want, the code below shoud do the job.<br>\nI called <code>age_map</code> the resulting dataframe (those with the <code>score</code> column to be populated and <code>collector</code> the function which extract the data from <code>n_age_scores</code> and <code>e_age_scores</code>.</p>\n\n<pre><code>def collector(row):\n    if row['type'] == 'new':\n        return n_age_scores.loc[n_age_scores['mini_n'] &lt; row['age']].iloc[-1]['percent_n']\n    elif row['type'] == 'expansion':\n        return e_age_scores.loc[e_age_scores['mini_e'] &lt; row['age']].iloc[-1]['percent_e']\n\nage_map['score'] = age_map.apply(collector, axis=1)\n</code></pre>\n\n<p>Using the sample dataframes you provide, <code>age_map</code> is:</p>\n\n<pre><code>        type  age    score\n0        new   33  0.64460\n1        new   12  0.55430\n2  expansion    3  0.33543\n3        new    4  0.55430\n4  expansion  100  0.61340\n</code></pre>\n"}], "owner": {"reputation": 248, "user_id": 6353522, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/b3d0c77c0601ede6bb14e353ed51daf0?s=128&d=identicon&r=PG&f=1", "display_name": "tomoc4", "link": "https://stackoverflow.com/users/6353522/tomoc4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 57086139, "answer_count": 1, "score": 0, "last_activity_date": 1563415644, "creation_date": 1563395707, "question_id": 57083724, "link": "https://stackoverflow.com/questions/57083724/how-to-lookup-two-different-ranges-based-on-rows-value-pandas-dataframe", "title": "How to lookup two different ranges based on row&#39;s value Pandas dataframe", "body": "<p>I'm trying to do a conditional vlookup but with pandas. Here's the data i'm using</p>\n\n<p><strong>n_age_scores</strong></p>\n\n<pre><code>type n     aging_n     mini_n   percent_n\nnew        &lt;30 days       0       0.5543\nnew        31-50 days     31      0.6446\nnew        51-100 days    51      0.3134\n</code></pre>\n\n<p><strong>e_age_scores</strong></p>\n\n<pre><code>type e           aging_e      mini_e   percent_e\nexpansion        &lt;30 days       0       0.33543\nexpansion        31-50 days     31      0.4446\nexpansion        51-100 days    51      0.6134\n</code></pre>\n\n<p><strong>Dataframe</strong></p>\n\n<pre><code>type        age    score\nnew          33\nnew          12\nexpansion    3\nnew          4\nexpansion    100\n</code></pre>\n\n<p>What I want to do is populate score with the percent column of either dataframe based on if the row <code>type</code> is new or expansion, an approximate match of value percent. </p>\n\n<p>How do I do this with Pandas?</p>\n\n<pre><code>n_age_scores = aging_score_mapping.iloc[:,0:4] \ne_age_scores = aging_score_mapping.iloc[:,-4:9]\n\n\n    if df['deal_type'] == 'Expansion':\n       df = merge.e_age_scores(df, on='age_score')\n       if df['deal_type'] == 'new':\n          df = merge.n_age_scores(df, on='age_score')\n</code></pre>\n\n<p>I'm not sure how to do this but I think i need to loop and merge with a approximate match and populate age_score with percent_n depending on the type.</p>\n\n<p>Is this possible with pandas?</p>\n"}, {"tags": ["python", "bioinformatics", "biopython", "blast", "ncbi"], "comments": [{"owner": {"reputation": 30387, "user_id": 6260170, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0caf9a0d28be362618ffc0223b301d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chris_Rands", "link": "https://stackoverflow.com/users/6260170/chris-rands"}, "edited": false, "score": 0, "creation_date": 1563805625, "post_id": 57083721, "comment_id": 100811719, "body": "in short no, and the ncbi cloud query does not appear to either <a href=\"http://ncbi.github.io/blast-cloud/dev/api.html-\" rel=\"nofollow noreferrer\">ncbi.github.io/blast-cloud/dev/api.html-</a> you may have to build your own custom blast db for this"}, {"owner": {"reputation": 11, "user_id": 11799570, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m5eE2.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/11799570/barry"}, "reply_to_user": {"reputation": 30387, "user_id": 6260170, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0caf9a0d28be362618ffc0223b301d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chris_Rands", "link": "https://stackoverflow.com/users/6260170/chris-rands"}, "edited": false, "score": 0, "creation_date": 1563903224, "post_id": 57083721, "comment_id": 100852306, "body": "Thank you for your response! That is what I was afraid of. I have the Targeted Loci Project (TLP) database for 16S as well as Greengenes database. What Blast like tool would you suggest I plug these into?"}, {"owner": {"reputation": 30387, "user_id": 6260170, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0caf9a0d28be362618ffc0223b301d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chris_Rands", "link": "https://stackoverflow.com/users/6260170/chris-rands"}, "edited": false, "score": 0, "creation_date": 1563954225, "post_id": 57083721, "comment_id": 100867142, "body": "I&#39;m not familiar with those databases, but you can build a local blast database from any collection of FASTA sequences <a href=\"https://www.ncbi.nlm.nih.gov/books/NBK279688/\" rel=\"nofollow noreferrer\">ncbi.nlm.nih.gov/books/NBK279688</a>"}, {"owner": {"reputation": 11, "user_id": 11799570, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m5eE2.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/11799570/barry"}, "reply_to_user": {"reputation": 30387, "user_id": 6260170, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0caf9a0d28be362618ffc0223b301d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chris_Rands", "link": "https://stackoverflow.com/users/6260170/chris-rands"}, "edited": false, "score": 0, "creation_date": 1563975500, "post_id": 57083721, "comment_id": 100879053, "body": "Thank you for the direction! I will give this a shot later this week and let you know how it works out."}], "owner": {"reputation": 11, "user_id": 11799570, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m5eE2.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/11799570/barry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1563396032, "creation_date": 1563395682, "last_edit_date": 1563396032, "question_id": 57083721, "link": "https://stackoverflow.com/questions/57083721/does-biopython-have-an-argument-to-exclude-uncultured-samples-and-sequences-f", "title": "Does Biopython have an argument to &quot;Exclude Uncultured samples&quot; and &quot;Sequences from type material&quot;?", "body": "<p>I am using biopython to do blast searches on bacterial strains, !HOWEVER! a normal blast search provides me with ALL strains, but I only want the well annotated strains (not all the data dump that comes with a normal query).</p>\n\n<p>Normal Solution:\nThe browser version of blast allows you to exclude \"Uncultured/environmental sample sequences\" as well as \" limit to \"Sequences from type material\" by checking off two checkboxes.</p>\n\n<p>Is there a way to implement these options using Biopython?</p>\n\n<p>Basically, I was wondering if there are additional arguments I may be able to use that would give me the effect the browser version gives using checkboxes.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#What I am Doing (and works)\nfrom Bio.Blast import NCBIWWW\nmy_query = NCBIWWW.qblast(\"blastn\", \"nt\", query_sequence)\n#I want something like\nfrom Bio.Blast import NCBIWWW\nmy_query = NCBIWWW.qblast(\"blastn\", \"nt\", query_sequence, exclude = 'uncultured', limit_seqs_from_type_material = True)\n</code></pre>\n"}, {"tags": ["python", "pandas", "group-by", "rank"], "comments": [{"owner": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "edited": false, "score": 0, "creation_date": 1563395903, "post_id": 57083683, "comment_id": 100690594, "body": "the <code>grouping</code> is the occurrence number?"}, {"owner": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "edited": false, "score": 0, "creation_date": 1563396258, "post_id": 57083683, "comment_id": 100690744, "body": "see my answer and let me know if it helps"}, {"owner": {"reputation": 167, "user_id": 3022585, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000531533989/picture?type=large", "display_name": "BobcatBlitz", "link": "https://stackoverflow.com/users/3022585/bobcatblitz"}, "reply_to_user": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "edited": false, "score": 1, "creation_date": 1563396423, "post_id": 57083683, "comment_id": 100690797, "body": "Thank you @serafeim ! This is what I was looking for."}], "answers": [{"tags": [], "owner": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "is_accepted": false, "score": 1, "last_activity_date": 1563396073, "last_edit_date": 1563396073, "creation_date": 1563395766, "answer_id": 57083739, "question_id": 57083683, "link": "https://stackoverflow.com/questions/57083683/assign-group-number-based-on-row-criteria-python/57083739#57083739", "title": "Assign group number based on row criteria [Python]", "body": "<p>It is not clear how you define the grouping but your desired output can be achieved by using <code>cumsum</code> and <code>eq</code>:</p>\n\n<pre><code>df['grouping']=df['type'].eq('a').cumsum()\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>   type  grouping\n0     a         1\n1     b         1\n2     a         2\n3     b         2\n4     b         2\n5     a         3\n6     b         3\n7     b         3\n8     b         3\n9     b         3\n10    b         3\n11    b         3\n</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 3022585, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000531533989/picture?type=large", "display_name": "BobcatBlitz", "link": "https://stackoverflow.com/users/3022585/bobcatblitz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "closed_date": 1563396041, "answer_count": 1, "score": 1, "last_activity_date": 1563396073, "creation_date": 1563395470, "question_id": 57083683, "link": "https://stackoverflow.com/questions/57083683/assign-group-number-based-on-row-criteria-python", "closed_reason": "Duplicate", "title": "Assign group number based on row criteria [Python]", "body": "<p>I have a dataframe with column 'type' and want to create a column 'group' that assigns a group number when type = 'a'. </p>\n\n<p>Starting data (ignore index, copied from jupyter notebook): </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df = pd.DataFrame ({'type':\n['a','b','a','b','b','a','b','b','b','b','b','b']})\n</code></pre>\n\n<pre class=\"lang-py prettyprint-override\"><code>Index   type\n0   a\n1   b\n2   a\n3   b\n4   b\n5   a\n6   b\n7   b\n8   b\n9   b\n10  b\n11  b\n</code></pre>\n\n<p>output should be:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\ntype    grouping\na   1\nb   1\na   2\nb   2\nb   2\na   3\nb   3\nb   3\nb   3\nb   3\nb   3\nb   3\n\n\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "list", "tuples"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1563395622, "post_id": 57083682, "comment_id": 100690499, "body": "Welcome to StackOverflow. Please read and follow the posting guidelines in the help documentation, as suggested when you created this account. <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimal, complete, verifiable example</a> applies here. We cannot effectively help you until you post your MCVE code and accurately specify the problem. We should be able to paste your posted code into a text file and reproduce the problem you specified. There is no way your posted code could produce the output you claim, as those words do not appear in the input lists."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 11799591, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vfyq1CFGsJE/AAAAAAAAAAI/AAAAAAAAAc4/yU-TKMyW1FE/photo.jpg?sz=128", "display_name": "Joyce", "link": "https://stackoverflow.com/users/11799591/joyce"}, "edited": false, "score": 0, "creation_date": 1563396030, "post_id": 57083716, "comment_id": 100690646, "body": "Okay, thank you, however, rather than using itertools would you know of any possible way of completing it without that? Rather quite basic code, as the tutorials I have been following recommend I don&#39;t use them until further on into it. If not I hopefully can make it work."}], "tags": [], "owner": {"reputation": 2192, "user_id": 3106565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/59de4b3d6299b5b375e072efd690870d?s=128&d=identicon&r=PG&f=1", "display_name": "Osman Mamun", "link": "https://stackoverflow.com/users/3106565/osman-mamun"}, "is_accepted": false, "score": 1, "last_activity_date": 1563395633, "creation_date": 1563395633, "answer_id": 57083716, "question_id": 57083682, "link": "https://stackoverflow.com/questions/57083682/taking-two-lists-as-input-that-contain-words-to-form-a-tuple-with-two-words-on/57083716#57083716", "title": "Taking two lists as input that contain words, to form a tuple with two words, one from each list that have the same starting letter of each word", "body": "<p>Use <code>itertools.product</code> to get all the pairs and then filter them out:</p>\n\n<pre><code>In [1]: from itertools import product\n\nIn [2]: a =  ['Jack', 'Tim', 'John', 'Ahmed']\n\nIn [3]: b = ['Julie', 'Tom', 'Henry', 'Harper']\n\nIn [4]: out = [i for i in product(a, b) if i[0][0] == i[1][0]]\n\nIn [5]: out\nOut[5]: [('Jack', 'Julie'), ('Tim', 'Tom'), ('John', 'Julie')]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 11799591, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vfyq1CFGsJE/AAAAAAAAAAI/AAAAAAAAAc4/yU-TKMyW1FE/photo.jpg?sz=128", "display_name": "Joyce", "link": "https://stackoverflow.com/users/11799591/joyce"}, "edited": false, "score": 0, "creation_date": 1563396386, "post_id": 57083772, "comment_id": 100690784, "body": "Yes that works, thank you very much, I appreciate the help."}], "tags": [], "owner": {"reputation": 4159, "user_id": 8212173, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5ApXfoDEeNA/AAAAAAAAAAI/AAAAAAAAADc/9wpTVfHMarU/photo.jpg?sz=128", "display_name": "amanb", "link": "https://stackoverflow.com/users/8212173/amanb"}, "is_accepted": false, "score": 1, "last_activity_date": 1563395955, "creation_date": 1563395955, "answer_id": 57083772, "question_id": 57083682, "link": "https://stackoverflow.com/questions/57083682/taking-two-lists-as-input-that-contain-words-to-form-a-tuple-with-two-words-on/57083772#57083772", "title": "Taking two lists as input that contain words, to form a tuple with two words, one from each list that have the same starting letter of each word", "body": "<p>With list comprehensions:</p>\n\n<pre><code>In [50]: a = ['Jack', 'Tim', 'John', 'Ahmed']\n\nIn [51]: b = ['Julie', 'Tom', 'Henry', 'Harper']\n\nIn [55]: c = [(x,y) for x in a for y in b if x.lower()[0]==y.lower()[0]]\n\nIn [56]: c\nOut[56]: [('Jack', 'Julie'), ('Tim', 'Tom'), ('John', 'Julie')]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 11799591, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vfyq1CFGsJE/AAAAAAAAAAI/AAAAAAAAAc4/yU-TKMyW1FE/photo.jpg?sz=128", "display_name": "Joyce", "link": "https://stackoverflow.com/users/11799591/joyce"}, "edited": false, "score": 0, "creation_date": 1563396657, "post_id": 57083796, "comment_id": 100690865, "body": "Thank you, amanb demonstrated that in his answer, cheers for the input though."}], "tags": [], "owner": {"reputation": 589, "user_id": 1928104, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-L6uW2yYpFWs/AAAAAAAAAAI/AAAAAAAAAD0/g8tpfaSavgo/photo.jpg?sz=128", "display_name": "Abdelhamid Belarbi", "link": "https://stackoverflow.com/users/1928104/abdelhamid-belarbi"}, "is_accepted": false, "score": 0, "last_activity_date": 1563396114, "creation_date": 1563396114, "answer_id": 57083796, "question_id": 57083682, "link": "https://stackoverflow.com/questions/57083682/taking-two-lists-as-input-that-contain-words-to-form-a-tuple-with-two-words-on/57083796#57083796", "title": "Taking two lists as input that contain words, to form a tuple with two words, one from each list that have the same starting letter of each word", "body": "<p>You can try this</p>\n\n<pre><code>[(x, y) for x in A for y in B if x[0] == y[0]]\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 11799591, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vfyq1CFGsJE/AAAAAAAAAAI/AAAAAAAAAc4/yU-TKMyW1FE/photo.jpg?sz=128", "display_name": "Joyce", "link": "https://stackoverflow.com/users/11799591/joyce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1563396114, "creation_date": 1563395462, "last_edit_date": 1563395756, "question_id": 57083682, "link": "https://stackoverflow.com/questions/57083682/taking-two-lists-as-input-that-contain-words-to-form-a-tuple-with-two-words-on", "title": "Taking two lists as input that contain words, to form a tuple with two words, one from each list that have the same starting letter of each word", "body": "<p>I've to take two lists as an input which contain words. Using those words I form a tuple using two words, one from each list that contain the same first letter of each word. Then creating a list of those tuples and printing them.</p>\n\n<p>I have a solution, however, I cannot seem to produce the same item twice. Here's an example of what I mean in words. </p>\n\n<p>List A: <code>['Jack', 'Tim', 'John', 'Ahmed']</code></p>\n\n<p>List B: <code>['Julie', 'Tom', 'Henry', 'Harper']</code></p>\n\n<pre><code>c = input().lower()\nd = input().lower()\n\na = c.split()\nb = d.split()\n\nx = []\nfor i in range(len(a)):\n    if a[i][0] == b[i][0]:\n        x.append((a[i], b[i]))\n\nprint(x)\n</code></pre>\n\n<p>My Output: <code>[('joy', 'juggle'), ('troy', 'trim')]</code></p>\n\n<p>Expected Output: <code>[('Jack', 'Julie'), ('John', 'Julie'), ('Tim', 'Tom')]</code></p>\n\n<p>I'm quite new to learning the language and wasn't quite able to find any similarities to my previous work to find out how I could reiterate through a / b without reproducing the same output.</p>\n"}, {"tags": ["python", "julia", "ddmlib"], "comments": [{"owner": {"reputation": 39524, "user_id": 1269567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tLzFU.png?s=128&g=1", "display_name": "Bogumi\u0142 Kami\u0144ski", "link": "https://stackoverflow.com/users/1269567/bogumi%c5%82-kami%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1563399907, "post_id": 57083670, "comment_id": 100691980, "body": "<code>-one(c)</code> is a negation of multiplicative identity of <code>typeof(c)</code> is <code>c</code> is not a <code>Type</code> and if <code>c</code> is a <code>Type</code> then a negation of multiplicative identity of <code>c</code> if it is a <code>Type</code>."}, {"owner": {"reputation": 18197, "user_id": 4183191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8ce0d78cc78f51ee79cec5088effe3ed?s=128&d=identicon&r=PG", "display_name": "Tasos Papastylianou", "link": "https://stackoverflow.com/users/4183191/tasos-papastylianou"}, "edited": false, "score": 0, "creation_date": 1563400208, "post_id": 57083670, "comment_id": 100692064, "body": "What are you trying to do? What is &#39;c&#39; in your case? We know from this code that c is not an array, otherwise it would be an error here. If c is a &#39;number&#39;, then this is simply checking if &#39;c&#39; is set to either &#39;1&#39; or &#39;-1&#39; (for the appropriate numerical type)."}, {"owner": {"reputation": 39524, "user_id": 1269567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tLzFU.png?s=128&g=1", "display_name": "Bogumi\u0142 Kami\u0144ski", "link": "https://stackoverflow.com/users/1269567/bogumi%c5%82-kami%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1563400855, "post_id": 57083670, "comment_id": 100692229, "body": "<code>c</code> could be an array in general, as e.g. <code>one(rand(2,2))</code> is a valid operation."}], "owner": {"reputation": 21, "user_id": 11799037, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZpdMoe_92Oo/AAAAAAAAAAI/AAAAAAAAAeY/TdT6xtgOUTQ/photo.jpg?sz=128", "display_name": "Katharine Chase Emery", "link": "https://stackoverflow.com/users/11799037/katharine-chase-emery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563395963, "creation_date": 1563395365, "last_edit_date": 1563395963, "question_id": 57083670, "link": "https://stackoverflow.com/questions/57083670/onec-vs-onec-in-julia", "title": "one(c) vs -one(c) in Julia", "body": "<p>What is the meaning of -one(c)? </p>\n\n<p>one(c) is a one-dimensional array of c</p>\n\n<pre><code>function DDM_cdf( a, v, w,  t0, rt, c )\n@assert c == one(c) || c == -one(c)\n</code></pre>\n\n<p>verification</p>\n"}, {"tags": ["python", "python-fire"], "comments": [{"owner": {"reputation": 1342, "user_id": 2607426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76460ddfdfe1c0797474dd37deeb80e0?s=128&d=identicon&r=PG&f=1", "display_name": "michcio1234", "link": "https://stackoverflow.com/users/2607426/michcio1234"}, "edited": false, "score": 0, "creation_date": 1563396220, "post_id": 57083657, "comment_id": 100690729, "body": "Hi and welcome to SO. Please post the <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">MRE</a>, then someone may be able to help."}, {"owner": {"reputation": 1, "user_id": 11799634, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CZPih9CzK7I/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcb80z1-cP_iycrBh6RLd-u2CnP1Q/photo.jpg?sz=128", "display_name": "Utkarsh K", "link": "https://stackoverflow.com/users/11799634/utkarsh-k"}, "reply_to_user": {"reputation": 1342, "user_id": 2607426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76460ddfdfe1c0797474dd37deeb80e0?s=128&d=identicon&r=PG&f=1", "display_name": "michcio1234", "link": "https://stackoverflow.com/users/2607426/michcio1234"}, "edited": false, "score": 0, "creation_date": 1563396991, "post_id": 57083657, "comment_id": 100690979, "body": "Hey, thank you. I added more code to help understand how the cli was built."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11799634, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CZPih9CzK7I/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcb80z1-cP_iycrBh6RLd-u2CnP1Q/photo.jpg?sz=128", "display_name": "Utkarsh K", "link": "https://stackoverflow.com/users/11799634/utkarsh-k"}, "is_accepted": true, "score": 0, "last_activity_date": 1564079658, "creation_date": 1564079658, "answer_id": 57208244, "question_id": 57083657, "link": "https://stackoverflow.com/questions/57083657/suppress-output-to-show-only-usage-and-docstring/57208244#57208244", "title": "Suppress output to show only Usage and Docstring", "body": "<p>You can achieve this by editing core.py in the python-fire library by commenting/deleting out the printing of the trace in the following if condition:</p>\n\n<pre><code>if component_trace.HasError():\n</code></pre>\n\n<p>It's hacky but it works for now. </p>\n"}, {"tags": [], "owner": {"reputation": 68, "user_id": 4055714, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-00TENqJqOvw/AAAAAAAAAAI/AAAAAAAAABM/lEpKkKHQtes/photo.jpg?sz=128", "display_name": "David Bieber", "link": "https://stackoverflow.com/users/4055714/david-bieber"}, "is_accepted": false, "score": 0, "last_activity_date": 1565716142, "creation_date": 1565716142, "answer_id": 57482397, "question_id": 57083657, "link": "https://stackoverflow.com/questions/57083657/suppress-output-to-show-only-usage-and-docstring/57482397#57482397", "title": "Suppress output to show only Usage and Docstring", "body": "<p>The Fire trace is no longer shown by default in the latest version of Fire, starting with version v0.2.0. I think you'll find the output is much cleaner than it was in earlier versions.</p>\n\n<p><code>pip install -U fire</code> to upgrade.</p>\n"}], "owner": {"reputation": 1, "user_id": 11799634, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CZPih9CzK7I/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcb80z1-cP_iycrBh6RLd-u2CnP1Q/photo.jpg?sz=128", "display_name": "Utkarsh K", "link": "https://stackoverflow.com/users/11799634/utkarsh-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "accepted_answer_id": 57208244, "answer_count": 2, "score": 0, "last_activity_date": 1565716142, "creation_date": 1563395296, "last_edit_date": 1563396958, "question_id": 57083657, "link": "https://stackoverflow.com/questions/57083657/suppress-output-to-show-only-usage-and-docstring", "title": "Suppress output to show only Usage and Docstring", "body": "<p>I would like to suppress the output when using python-fire, for a given command line option.</p>\n\n<p>The fire trace and everything apart from the docstring and usage is essentially useless to me and clutters up the terminal. Any way I can get rid of it ?</p>\n\n<p>I'm creating the cli using python-fire like this, where \"command\" is a function defined earlier :</p>\n\n<pre><code>if __name__ == \"__main__\":\n\n\n    fire.Fire(\n        {\n            \"command\": command\n        }\n)\n</code></pre>\n\n<pre><code>$ python cli.py command\nFire trace:\n1. Initial component\n2. Accessed property \"command\"\n3. ('The function received no value for the required argument:)\n\nType:        function\nString form: &lt;function list_property_versions at 0x10de5d840&gt;\nFile:        ./cli.py\nLine:        171\nDocstring:   Does something\n\nUsage:       cli.py command arg1 \n             cli.py command --first-arg arg1\n</code></pre>\n\n<p>Expected Output:</p>\n\n<pre><code>$ python cli.py command1\n\nDocstring:   Does something\n\nUsage:       cli.py command1 arg1 \n             cli.py command1 --first-arg arg1\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "dictionary"], "answers": [{"comments": [{"owner": {"reputation": 779, "user_id": 10007302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc46e5434cc4cc2b904a82620b44c063?s=128&d=identicon&r=PG&f=1", "display_name": "novawaly", "link": "https://stackoverflow.com/users/10007302/novawaly"}, "edited": false, "score": 0, "creation_date": 1563395698, "post_id": 57083647, "comment_id": 100690524, "body": "I get this error when I try that:AttributeError: &#39;dict&#39; object has no attribute &#39;append&#39;"}, {"owner": {"reputation": 23980, "user_id": 1735756, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SloZJ.jpg?s=128&g=1", "display_name": "Haifeng Zhang", "link": "https://stackoverflow.com/users/1735756/haifeng-zhang"}, "reply_to_user": {"reputation": 779, "user_id": 10007302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc46e5434cc4cc2b904a82620b44c063?s=128&d=identicon&r=PG&f=1", "display_name": "novawaly", "link": "https://stackoverflow.com/users/10007302/novawaly"}, "edited": false, "score": 0, "creation_date": 1563396138, "post_id": 57083647, "comment_id": 100690690, "body": "<code>mydict.setdefault(&#39;a&#39;, []).append(&#39;b&#39;)</code>  make sure you invoke append() properly"}, {"owner": {"reputation": 779, "user_id": 10007302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc46e5434cc4cc2b904a82620b44c063?s=128&d=identicon&r=PG&f=1", "display_name": "novawaly", "link": "https://stackoverflow.com/users/10007302/novawaly"}, "edited": false, "score": 0, "creation_date": 1563396181, "post_id": 57083647, "comment_id": 100690710, "body": "self.closes.setdefault(bar.Timestamp, []).append(bar.Close)"}, {"owner": {"reputation": 779, "user_id": 10007302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc46e5434cc4cc2b904a82620b44c063?s=128&d=identicon&r=PG&f=1", "display_name": "novawaly", "link": "https://stackoverflow.com/users/10007302/novawaly"}, "edited": false, "score": 0, "creation_date": 1563457870, "post_id": 57083647, "comment_id": 100713529, "body": "you mind taking one more look at this? still giving me an error @HaifengZhang"}], "tags": [], "owner": {"reputation": 23980, "user_id": 1735756, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SloZJ.jpg?s=128&g=1", "display_name": "Haifeng Zhang", "link": "https://stackoverflow.com/users/1735756/haifeng-zhang"}, "is_accepted": false, "score": 0, "last_activity_date": 1563395238, "creation_date": 1563395238, "answer_id": 57083647, "question_id": 57083614, "link": "https://stackoverflow.com/questions/57083614/how-to-append-a-2nd-value-to-an-existing-key-in-a-dictionary-in-python-in-a-loop/57083647#57083647", "title": "How to Append a 2nd value to an existing key in a dictionary in Python in a Loop", "body": "<p>What you can do is make the value a list like:</p>\n\n<pre><code>self.bars.setdefault('mykey', []).append('first_value') #  {'mykey': ['first_value']}\nself.bars.setdefault('mykey', []).append('other_value') #  {'mykey': ['first_value', 'other_value']}\n</code></pre>\n\n<p><strong>Explanation:</strong></p>\n\n<pre><code>dictionary.setdefault(keyname, value)\n</code></pre>\n\n<blockquote>\n  <p>value: Optional.\n  If the key exist, this parameter has no effect.\n  If the key does not exist, this value becomes the key's value\n  Default value None</p>\n</blockquote>\n"}], "owner": {"reputation": 779, "user_id": 10007302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc46e5434cc4cc2b904a82620b44c063?s=128&d=identicon&r=PG&f=1", "display_name": "novawaly", "link": "https://stackoverflow.com/users/10007302/novawaly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563395367, "creation_date": 1563395066, "last_edit_date": 1563395367, "question_id": 57083614, "link": "https://stackoverflow.com/questions/57083614/how-to-append-a-2nd-value-to-an-existing-key-in-a-dictionary-in-python-in-a-loop", "title": "How to Append a 2nd value to an existing key in a dictionary in Python in a Loop", "body": "<p>I'm working with an API in finance that will automatically update every time a specific time interval ends (ie every 30 minutes). It'll output a Timestamp as well as an Open, High, Low, and Close value.  What's happening behind the scenes of that API is a little above my paygrade so I'm trying my best to finesse the data to fit my needs. </p>\n\n<p>Currently, when we are having it update 2 different markets (which would produce 2 different Close values, it seems to only have access to one markets values at a time. </p>\n\n<p>Here is my code, every time a new bar is added, it'll print the close value with the Timestamp as the key. </p>\n\n<pre><code>def append(self, bar):\n    symbols = symbol = ['CLE', 'RBE']\n    bar_keys = ['Open', 'High', 'Low', 'Close']\n    self.newest_bar = {key: getattr(bar, key) for key in bar_keys}\n    self.bars[bar.Timestamp] = self.newest_bar\n\n    # this is the line that i'd edit to append to the dictionary self.closes\n    self.closes[bar.Timestamp] = bar.Close\n\n\n    print(self.closes)\n</code></pre>\n\n<p>The problem is i'd like to have everything in one place. So:</p>\n\n<p>How can i get the output from this:</p>\n\n<pre><code>{2019-07-17 15:11:00+00:00: 56.3}\n{2019-07-17 15:11:00+00:00: 1.8719}\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>{2019-07-17 15:11:00+00:00: 56.3, 1.8719}\n</code></pre>\n\n<p>or better yet if I could nest each symbol as key with the value for each timestep:</p>\n\n<pre><code>{2019-07-17 15:11:00+00:00: 'CLE':56.3, 'RBE':1.8719}\n</code></pre>\n"}, {"tags": ["python", "numpy", "numpy-ndarray"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 6173507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c19295603bd2eda36337ba95a10740c?s=128&d=identicon&r=PG&f=1", "display_name": "L. Young", "link": "https://stackoverflow.com/users/6173507/l-young"}, "edited": false, "score": 0, "creation_date": 1563405495, "post_id": 57084517, "comment_id": 100693286, "body": "As I mentioned, I could not recreate the problem in the shell. So are you saying the results I was expecting are the correct results. There must be something else going on which causes the problem. Could this be a compiler bug?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 83, "user_id": 6173507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c19295603bd2eda36337ba95a10740c?s=128&d=identicon&r=PG&f=1", "display_name": "L. Young", "link": "https://stackoverflow.com/users/6173507/l-young"}, "edited": false, "score": 0, "creation_date": 1563406278, "post_id": 57084517, "comment_id": 100693459, "body": "Can you duplicate it in a script?"}, {"owner": {"reputation": 83, "user_id": 6173507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c19295603bd2eda36337ba95a10740c?s=128&d=identicon&r=PG&f=1", "display_name": "L. Young", "link": "https://stackoverflow.com/users/6173507/l-young"}, "edited": false, "score": 0, "creation_date": 1563407518, "post_id": 57084517, "comment_id": 100693692, "body": "No. If there is nothing wrong with the piece of code in the original post, then it looks like I need to work with my original code to generate an example. I replaced the code with a loop and at the end got an array of shape (5,1). Crazy. I&#39;ll try whittling down the code, to get a small example which demonstrates the problem."}, {"owner": {"reputation": 83, "user_id": 6173507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c19295603bd2eda36337ba95a10740c?s=128&d=identicon&r=PG&f=1", "display_name": "L. Young", "link": "https://stackoverflow.com/users/6173507/l-young"}, "edited": false, "score": 0, "creation_date": 1563494356, "post_id": 57084517, "comment_id": 100728698, "body": "See additions to post on July 18, 2019"}, {"owner": {"reputation": 83, "user_id": 6173507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c19295603bd2eda36337ba95a10740c?s=128&d=identicon&r=PG&f=1", "display_name": "L. Young", "link": "https://stackoverflow.com/users/6173507/l-young"}, "edited": false, "score": 0, "creation_date": 1563545928, "post_id": 57084517, "comment_id": 100747428, "body": "Thanks, for the information. It is good to know the differences between shape and reshape. It&#39;s nice that Python gives both alternatives as opposed to rigid languages like Fortran. Thanks also for the link discussing argument passing. This is one of those subtleties not discussed in most descriptions. It looks like this topic has been well covered."}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 0, "last_activity_date": 1563496239, "last_edit_date": 1563496239, "creation_date": 1563400512, "answer_id": 57084517, "question_id": 57083609, "link": "https://stackoverflow.com/questions/57083609/numpy-vector-vector-multiply-with-an-array-slice/57084517#57084517", "title": "Numpy vector-vector multiply with an array slice", "body": "<p>Trying to recreate your example:</p>\n\n<pre><code>In [104]: dpx=np.arange(5); dpx.shape                                                                        \nOut[104]: (5,)\nIn [105]: dx = np.zeros((1,5)); dx.shape                                                                     \nOut[105]: (1, 5)\nIn [106]: dpx*dx[0,:]                                                                                        \nOut[106]: array([0., 0., 0., 0., 0.])\nIn [107]: _.shape                                                                                            \nOut[107]: (5,)\n</code></pre>\n\n<hr>\n\n<p>Regarding your new info.</p>\n\n<pre><code>a.shape = (n,1)\n</code></pre>\n\n<p>this action changes the shape of <code>a</code> itself, where as <code>np.reshape(a, (n,1))</code> or <code>a.reshape(n1,1)</code> makes a new array with the new shape (but usually a <code>view</code>, shared data buffer).</p>\n\n<p>When passed to a function:</p>\n\n<pre><code>def foo(a, b):\n    a.shape = (n,1)\n    b = b.reshape(n,1)\n\nfoo(A,B)\n</code></pre>\n\n<p><code>A</code> and <code>B</code> are both passed to <code>foo</code> by reference.  That is the object referenced by <code>A</code> in the outer namespace is referenced by <code>a</code> in the inner one.  The <code>a.shape</code> changes that object in-place, and this change then appears in the same object referenced by <code>A</code>.</p>\n\n<p>But <code>B</code> is not changed.  <code>b</code> gets a new object assignment, and becomes <code>local</code>.  The link between <code>B</code> and <code>b</code> is broken.</p>\n\n<p>In general Python does not make automatic copies of objects, at least not by simply passing them to functions (and back).  You have to make them yourself, or use functions that make new objects.</p>\n\n<p>I'm not sure the terminology is exactly right, but this answer fits my understanding:</p>\n\n<p><a href=\"https://stackoverflow.com/a/33066581/901925\">https://stackoverflow.com/a/33066581/901925</a></p>\n"}], "owner": {"reputation": 83, "user_id": 6173507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c19295603bd2eda36337ba95a10740c?s=128&d=identicon&r=PG&f=1", "display_name": "L. Young", "link": "https://stackoverflow.com/users/6173507/l-young"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 134, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563496239, "creation_date": 1563395042, "last_edit_date": 1563494132, "question_id": 57083609, "link": "https://stackoverflow.com/questions/57083609/numpy-vector-vector-multiply-with-an-array-slice", "title": "Numpy vector-vector multiply with an array slice", "body": "<p>I have a simple problem. The numerous tutorials I've looked at show everything but this common situation. I want to do an element by element vector-vector multiply, where one of the vectors is a slice of a matrix.</p>\n\n<p>I have not been able to duplicate this problem interactively with the shell, so I don't understand it. The following is just the portion of code which illustrates the problem.</p>\n\n<pre><code>    Ordr = 2  # these values set higher up in the code\n    nx = 5\n    dx = np.empty((Ordr-1,nx),dtype=float)\n    # vector dpx and dx calculated in other code here\n    print('shapes dpx,dx',dpx.shape,dx.shape)\n    ap.arrayprint('root calc:',dpx,np.transpose(dx)) # not shown originally\n    dtmp = dpx*dx[0,:]\n    print('shape dtmp',dtmp.shape)\nresults are:\n  shapes dpx,dx (5,) (1, 5)\n  shape dtmp (5,5)\n</code></pre>\n\n<p>I expected dtmp to be shape (5,)\nIt seems an outer product is being calculated, although I have not checked the actual numbers. It doesn't make any difference if I reverse the order, i.e. dpx[0,:]*dx\nAs I say, I haven't been able to replicate the problem in the shell, so I'm wondering what gives. I am running version 3.6.8 on Cygwin. The same result occurs under Windows version 3.7.3rc1.</p>\n\n<p><strong>New addition to post on July 18,2019:</strong>\nFurther checks revealed that a call to a function to do tabular printing was causing the problem. The function prints vectors as columns together with two dimensional arrays. This is accomplished by reshaping the vectors by something like:<code>\n      a.shape = (n,1)</code><br>\nAfter the function call, this reshape is passed back to the calling routine. Since dp is then (5,1) the multiply is a (5,1) matrix by a (5,) vector. Broadcasting is invoked resulting in a (5,5) result. </p>\n\n<p>I am a new python programmer and I thought (erroneously) that this modification to the inputs would not pass back to the caller. Is it an error to modify the function inputs in this way? Should this have been flagged as an error in the function? I understand C pass by value and Fortran pass by reference, but do not understand how Python passes parameters to functions. Can someone point me to an explanation of calling conventions in Python? </p>\n\n<p>Based on this discovery, the title of the post is completely wrong. My question now is - Why does Python allow me to change the inputs to the function? Would it be worth posting this under a different title?</p>\n"}, {"tags": ["python", "shutil"], "answers": [{"tags": [], "owner": {"reputation": 378, "user_id": 2620017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517078d0e5e19b98b4b8c7228da5aadf?s=128&d=identicon&r=PG", "display_name": "hko", "link": "https://stackoverflow.com/users/2620017/hko"}, "is_accepted": false, "score": 1, "last_activity_date": 1607722306, "creation_date": 1607722306, "answer_id": 65258906, "question_id": 57083594, "link": "https://stackoverflow.com/questions/57083594/disable-samefileerror-exception-in-shutil-copy/65258906#65258906", "title": "Disable SameFileError exception in shutil.copy", "body": "<p>You can just separate the copy calls:</p>\n<pre><code>try:\n   shutil.copy('filea','fileb')\nexcept shutil.SameFileError:\n   pass\n\ntry:\n   shutil.copy('filec','filed')\nexcept shutil.SameFileError:\n   pass\n</code></pre>\n<p>Or put these four lines in a function.</p>\n"}, {"tags": [], "owner": {"reputation": 3718, "user_id": 11502612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ANy5Q.png?s=128&g=1", "display_name": "milanbalazs", "link": "https://stackoverflow.com/users/11502612/milanbalazs"}, "is_accepted": false, "score": 0, "last_activity_date": 1612190620, "creation_date": 1612190620, "answer_id": 65994667, "question_id": 57083594, "link": "https://stackoverflow.com/questions/57083594/disable-samefileerror-exception-in-shutil-copy/65994667#65994667", "title": "Disable SameFileError exception in shutil.copy", "body": "<p>There is a not very elegant solution for it. I don't really recommend this solution. But it's up to you :)</p>\n<p>The <code>shutil._samefile</code> function check if the source and destination files are the same (It will be called always, so the copy doesn't have any option to deactivate it). If the return value is <code>True</code> (So the files are the same), the <code>SameFileError</code> exception will be raised (As you can see below).</p>\n<pre><code>if _samefile(src, dst):\n    raise SameFileError(&quot;{!r} and {!r} are the same file&quot;.format(src, dst))\n</code></pre>\n<p>You can force <code>_samefile</code> function to return <code>False</code> in every case.</p>\n<pre><code>import shutil\n\n\ndef my_same_file_diff_checker(*args, **kwargs):\n    return False\n\n\nshutil._samefile = my_same_file_diff_checker\n\n\nshutil.copy(&quot;test.ini&quot;, &quot;test.ini&quot;)\n</code></pre>\n<p><strong>Important:</strong></p>\n<p>With this solution the <code>SameFileError</code> won't be raised but the copy function other parts will be ran. It means eg. the time-stamp of the file will be updated. As you can see below, the content of file will be re-written in file.</p>\n<pre><code>with open(src, 'rb') as fsrc:\n    with open(dst, 'wb') as fdst:\n        copyfileobj(fsrc, fdst)\n</code></pre>\n<p>Other (perhaps more elegant) solutions:</p>\n<ul>\n<li>I recommend to use 2 separated try-except (As @hko has written)</li>\n<li>Check the paths of files before the copy (Probably most Pythonic solution).</li>\n<li>Write own copy function/method</li>\n</ul>\n"}], "owner": {"reputation": 2801, "user_id": 4360746, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/1daf5b4cd599a49ba6464490ee2a7dd1?s=128&d=identicon&r=PG", "display_name": "Ray Salemi", "link": "https://stackoverflow.com/users/4360746/ray-salemi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3737, "favorite_count": 1, "answer_count": 2, "score": 7, "last_activity_date": 1612190620, "creation_date": 1563394957, "last_edit_date": 1563396119, "question_id": 57083594, "link": "https://stackoverflow.com/questions/57083594/disable-samefileerror-exception-in-shutil-copy", "title": "Disable SameFileError exception in shutil.copy", "body": "<p>I have the following code because sometimes these files will be the same and sometimes they won't.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import shutil\ntry:\n   shutil.copy('filea','fileb')\n   shutil.copy('filec','filed')\nexcept shutil.SameFileError\n   pass\n</code></pre>\n\n<p>The problem is that the second copy won't happen if the first copy has the same file.</p>\n\n<p>Any suggestions on how to work around this?  I don't see an argument in the <a href=\"https://docs.python.org/3.6/library/shutil.html#shutil.copy\" rel=\"noreferrer\"><code>shutil</code> documentation</a> that disables this check.</p>\n"}, {"tags": ["python", "python-3.x", "python-requests", "python-imaging-library", "google-colaboratory"], "comments": [{"owner": {"reputation": 4159, "user_id": 8212173, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5ApXfoDEeNA/AAAAAAAAAAI/AAAAAAAAADc/9wpTVfHMarU/photo.jpg?sz=128", "display_name": "amanb", "link": "https://stackoverflow.com/users/8212173/amanb"}, "edited": false, "score": 0, "creation_date": 1563394939, "post_id": 57083480, "comment_id": 100690191, "body": "Works on Pillow 6.0.0 &amp; Python 3.7. Consider updating the package: <code>pip install Pillow -U</code>"}, {"owner": {"reputation": 21, "user_id": 10887503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67a2431491398d623cb6498929704780?s=128&d=identicon&r=PG&f=1", "display_name": "seanpmcn", "link": "https://stackoverflow.com/users/10887503/seanpmcn"}, "reply_to_user": {"reputation": 4159, "user_id": 8212173, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5ApXfoDEeNA/AAAAAAAAAAI/AAAAAAAAADc/9wpTVfHMarU/photo.jpg?sz=128", "display_name": "amanb", "link": "https://stackoverflow.com/users/8212173/amanb"}, "edited": false, "score": 0, "creation_date": 1563395227, "post_id": 57083480, "comment_id": 100690318, "body": "Where would I insert the package update?"}, {"owner": {"reputation": 4159, "user_id": 8212173, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5ApXfoDEeNA/AAAAAAAAAAI/AAAAAAAAADc/9wpTVfHMarU/photo.jpg?sz=128", "display_name": "amanb", "link": "https://stackoverflow.com/users/8212173/amanb"}, "edited": false, "score": 0, "creation_date": 1563395342, "post_id": 57083480, "comment_id": 100690367, "body": "Your code starts with a <code>pip</code> statement, try replacing that with mine and run it. Make sure it starts with <code>!</code>"}, {"owner": {"reputation": 21, "user_id": 10887503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67a2431491398d623cb6498929704780?s=128&d=identicon&r=PG&f=1", "display_name": "seanpmcn", "link": "https://stackoverflow.com/users/10887503/seanpmcn"}, "reply_to_user": {"reputation": 4159, "user_id": 8212173, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5ApXfoDEeNA/AAAAAAAAAAI/AAAAAAAAADc/9wpTVfHMarU/photo.jpg?sz=128", "display_name": "amanb", "link": "https://stackoverflow.com/users/8212173/amanb"}, "edited": false, "score": 0, "creation_date": 1563396928, "post_id": 57083480, "comment_id": 100690958, "body": "It worked. I tried updating it before, but I ignored the &quot;restart runtime message&quot;. This time I didn&#39;t and it worked"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 10183392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26f40bfde44c3de3f1487ec4f9c25d0f?s=128&d=identicon&r=PG&f=1", "display_name": "pyxai", "link": "https://stackoverflow.com/users/10183392/pyxai"}, "is_accepted": false, "score": 1, "last_activity_date": 1587642452, "creation_date": 1587642452, "answer_id": 61386502, "question_id": 57083480, "link": "https://stackoverflow.com/questions/57083480/image-wont-open-from-response-object-using-pil-in-google-colaboratory/61386502#61386502", "title": "Image won&#39;t open from response object using PIL in google Colaboratory", "body": "<p>Upgrading pillow solved this for me</p>\n\n<pre><code>pip install pillow --upgrade\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10887503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67a2431491398d623cb6498929704780?s=128&d=identicon&r=PG&f=1", "display_name": "seanpmcn", "link": "https://stackoverflow.com/users/10887503/seanpmcn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 548, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1587642452, "creation_date": 1563394490, "question_id": 57083480, "link": "https://stackoverflow.com/questions/57083480/image-wont-open-from-response-object-using-pil-in-google-colaboratory", "title": "Image won&#39;t open from response object using PIL in google Colaboratory", "body": "<p>I am going through the \"PyTorch for Deep Learning and Computer Vision\" course on Udemy and inputting the code into Google Colaboratory as instructed.</p>\n\n<p>However, there a part of the code where PIL is meant to read an image from a response object, but I have an error \"AttributeError: can't set attribute\"</p>\n\n<p>I am using pillow 4.0.0 on python 3.6\nI have tried changing resonse.raw to response.content, response.text, and just response. I have tried removing the stream = True attribute and I have tried inputting the url directly into the Image.open method</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>!pip3 install pillow==4.0.0\n\nimport PIL.ImageOps\n\nimport requests\nfrom PIL import Image\n\nurl = 'https://c8.alamy.com/comp/DYC06A/hornless-reindeer-at-zoo-DYC06A.jpg'\nresponse = requests.get(url, stream = True)\nimg = Image.open(response.raw)\nplt.imshow(img)\n</code></pre>\n\n<p>I expect a plot with an image of a deer with the url in the url variable.</p>\n\n<p>Instead I receive this error message:</p>\n\n<pre><code>---------------------------------------------------------------------------\n\nAttributeError                            Traceback (most recent call last)\n\n&lt;ipython-input-85-059526041234&gt; in &lt;module&gt;()\n      4 url = 'https://c8.alamy.com/comp/DYC06A/hornless-reindeer-at-zoo-DYC06A.jpg'\n      5 response = requests.get(url, stream = True)\n----&gt; 6 img = Image.open(response.raw)\n      7 plt.imshow(img)\n\n5 frames\n\n/usr/local/lib/python3.6/dist-packages/PIL/Image.py in open(fp, mode)\n\n/usr/local/lib/python3.6/dist-packages/PIL/Image.py in _open_core(fp, filename, prefix)\n\n/usr/local/lib/python3.6/dist-packages/PIL/JpegImagePlugin.py in jpeg_factory(fp, filename)\n    750 # Factory for making JPEG and MPO instances\n    751 def jpeg_factory(fp=None, filename=None):\n--&gt; 752     im = JpegImageFile(fp, filename)\n    753     try:\n    754         mpheader = im._getmp()\n\n/usr/local/lib/python3.6/dist-packages/PIL/ImageFile.py in __init__(self, fp, filename)\n     95 \n     96         try:\n---&gt; 97             self._open()\n     98         except (IndexError,  # end of data\n     99                 TypeError,  # end of data (ord)\n\n/usr/local/lib/python3.6/dist-packages/PIL/JpegImagePlugin.py in _open(self)\n    321                 # print(hex(i), name, description)\n    322                 if handler is not None:\n--&gt; 323                     handler(self, i)\n    324                 if i == 0xFFDA:  # start of scan\n    325                     rawmode = self.mode\n\n/usr/local/lib/python3.6/dist-packages/PIL/JpegImagePlugin.py in SOF(self, marker)\n    144     n = i16(self.fp.read(2))-2\n    145     s = ImageFile._safe_read(self.fp, n)\n--&gt; 146     self.size = i16(s[3:]), i16(s[1:])\n    147 \n    148     self.bits = i8(s[0])\n\nAttributeError: can't set attribute\n</code></pre>\n"}, {"tags": ["python", "priority-queue"], "comments": [{"owner": {"reputation": 18299, "user_id": 2648811, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ee5af60b10a2d5fd8c864437a2062f0a?s=128&d=identicon&r=PG", "display_name": "Green Cloak Guy", "link": "https://stackoverflow.com/users/2648811/green-cloak-guy"}, "edited": false, "score": 2, "creation_date": 1563394802, "post_id": 57083479, "comment_id": 100690138, "body": "In your Data Structures class, they&#39;ll talk all about &quot;Priority queue&quot; this and &quot;priority queue&quot; that, without ever mentioning that a &quot;priority queue&quot; is basically just a list that is always sorted (such that if you pop an element from it, you always get the element with the highest priority in the list). This is a fairly easy thing for you to design yourself; <a href=\"https://en.wikipedia.org/wiki/Priority_queue\" rel=\"nofollow noreferrer\">see the Wikipedia article on Priority Queues</a> for some ideas."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10557353, "user_type": "registered", "profile_image": "https://graph.facebook.com/2205308496148232/picture?type=large", "display_name": "Oded Ben-Noon", "link": "https://stackoverflow.com/users/10557353/oded-ben-noon"}, "edited": false, "score": 0, "creation_date": 1563395072, "post_id": 57083557, "comment_id": 100690242, "body": "My class contains priority number. Do I need to implement comparable function inside my class?"}, {"owner": {"reputation": 487, "user_id": 3192400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0af0d28bde7af4e2ddaa3cb9899a8d4c?s=128&d=identicon&r=PG&f=1", "display_name": "hysoftwareeng", "link": "https://stackoverflow.com/users/3192400/hysoftwareeng"}, "reply_to_user": {"reputation": 23, "user_id": 10557353, "user_type": "registered", "profile_image": "https://graph.facebook.com/2205308496148232/picture?type=large", "display_name": "Oded Ben-Noon", "link": "https://stackoverflow.com/users/10557353/oded-ben-noon"}, "edited": false, "score": 0, "creation_date": 1563395112, "post_id": 57083557, "comment_id": 100690264, "body": "You shouldn&#39;t need to, just insert the priority number and the object into the queue. Like in the above example, the integer values are the priority numbers"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1563395147, "post_id": 57083557, "comment_id": 100690284, "body": "Not sure, but I think the OP&#39;s question is more about making his class instances comparable wrt to the priorities in the queue."}, {"owner": {"reputation": 487, "user_id": 3192400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0af0d28bde7af4e2ddaa3cb9899a8d4c?s=128&d=identicon&r=PG&f=1", "display_name": "hysoftwareeng", "link": "https://stackoverflow.com/users/3192400/hysoftwareeng"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1563395372, "post_id": 57083557, "comment_id": 100690381, "body": "@martineau, he mentioned he has a priority number attribute in his class, so perhaps he doesn&#39;t need to. But then he mentioned &quot;in each class&quot;..., I am more assuming in each instance of the same object"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1563395772, "post_id": 57083557, "comment_id": 100690550, "body": "Perhaps you&#39;re right, since he did say &quot;each class got priority number&quot;  which would mean that attribute could be used in conjunction with the <code>PriorityQueue</code> built-in."}, {"owner": {"reputation": 23, "user_id": 10557353, "user_type": "registered", "profile_image": "https://graph.facebook.com/2205308496148232/picture?type=large", "display_name": "Oded Ben-Noon", "link": "https://stackoverflow.com/users/10557353/oded-ben-noon"}, "edited": false, "score": 0, "creation_date": 1563396859, "post_id": 57083557, "comment_id": 100690944, "body": "Actually this solution works almost well for me. But I have noticed that I can not insert to &quot;tasks&quot; that have the same priority, what can I do in that case?"}, {"owner": {"reputation": 487, "user_id": 3192400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0af0d28bde7af4e2ddaa3cb9899a8d4c?s=128&d=identicon&r=PG&f=1", "display_name": "hysoftwareeng", "link": "https://stackoverflow.com/users/3192400/hysoftwareeng"}, "edited": false, "score": 0, "creation_date": 1563454560, "post_id": 57083557, "comment_id": 100711304, "body": "not sure what you mean by &quot;tasks&quot;....but usually priority queues will treat objects with the same priority in the order they were inserted in"}], "tags": [], "owner": {"reputation": 487, "user_id": 3192400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0af0d28bde7af4e2ddaa3cb9899a8d4c?s=128&d=identicon&r=PG&f=1", "display_name": "hysoftwareeng", "link": "https://stackoverflow.com/users/3192400/hysoftwareeng"}, "is_accepted": true, "score": 1, "last_activity_date": 1563394786, "creation_date": 1563394786, "answer_id": 57083557, "question_id": 57083479, "link": "https://stackoverflow.com/questions/57083479/how-can-i-create-priority-queue-that-contains-my-class-implementation/57083557#57083557", "title": "How can I create priority queue that contains my class implementation?", "body": "<p>There is indeed a priority queue in Python, see here: <a href=\"https://docs.python.org/3/library/queue.html#Queue.PriorityQueue\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/queue.html#Queue.PriorityQueue</a></p>\n\n<p>Here is a simple example:</p>\n\n<pre><code>from queue import PriorityQueue\n\nq = PriorityQueue()\n\nq.put((2, 'code'))\nq.put((1, 'eat'))\nq.put((3, 'sleep'))\n\nwhile not q.empty():\n    next_item = q.get()\n    print(next_item)\n\n# Result:\n#   (1, 'eat')\n#   (2, 'code')\n#   (3, 'sleep')\n</code></pre>\n\n<p>You can also use heapq as well. </p>\n\n<p>Can't comment on your implementation without knowing more information...</p>\n"}], "owner": {"reputation": 23, "user_id": 10557353, "user_type": "registered", "profile_image": "https://graph.facebook.com/2205308496148232/picture?type=large", "display_name": "Oded Ben-Noon", "link": "https://stackoverflow.com/users/10557353/oded-ben-noon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 57083557, "answer_count": 1, "score": 0, "last_activity_date": 1563394952, "creation_date": 1563394490, "last_edit_date": 1563394952, "question_id": 57083479, "link": "https://stackoverflow.com/questions/57083479/how-can-i-create-priority-queue-that-contains-my-class-implementation", "title": "How can I create priority queue that contains my class implementation?", "body": "<p>I got task class that I implemented, I want to insert all my tasks into priority queue, there is one in python? Do I need to implement some func inside my class to make it comparable?</p>\n\n<p>Each class got priority number.</p>\n"}, {"tags": ["python", "pandas", "beautifulsoup"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11744435, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JgM7wtBbCLY/AAAAAAAAAAI/AAAAAAAAAoo/37WJNjeiG34/photo.jpg?sz=128", "display_name": "Mohammed Mahfuz", "link": "https://stackoverflow.com/users/11744435/mohammed-mahfuz"}, "edited": false, "score": 0, "creation_date": 1563397818, "post_id": 57083621, "comment_id": 100691285, "body": "Thanks! Steps 1 and 2 make sense, and in step 3 everything up until the last comma makes sense. It is locating instances where the &#39;Player_Name&#39; column is not equal to &#39;Reserves&#39; and making that subset the new dataframe. What do the final comma and colon do?"}, {"owner": {"reputation": 471, "user_id": 6801991, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MGoA91yGouk/AAAAAAAAAAI/AAAAAAAABmQ/XdaNdU--HxE/photo.jpg?sz=128", "display_name": "hilton92", "link": "https://stackoverflow.com/users/6801991/hilton92"}, "reply_to_user": {"reputation": 3, "user_id": 11744435, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JgM7wtBbCLY/AAAAAAAAAAI/AAAAAAAAAoo/37WJNjeiG34/photo.jpg?sz=128", "display_name": "Mohammed Mahfuz", "link": "https://stackoverflow.com/users/11744435/mohammed-mahfuz"}, "edited": false, "score": 0, "creation_date": 1563404592, "post_id": 57083621, "comment_id": 100693100, "body": "Thats right, when you do call <code>df.loc[x,y]</code> the <code>x</code> condition tells the <code>loc</code> which rows to get and the y condition tells the <code>loc</code> which columns to get. The final colon means return all columns in this case, and in the <code>iloc</code> case in step 2 means return all rows up until the xth row."}, {"owner": {"reputation": 3, "user_id": 11744435, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JgM7wtBbCLY/AAAAAAAAAAI/AAAAAAAAAoo/37WJNjeiG34/photo.jpg?sz=128", "display_name": "Mohammed Mahfuz", "link": "https://stackoverflow.com/users/11744435/mohammed-mahfuz"}, "edited": false, "score": 0, "creation_date": 1563456907, "post_id": 57083621, "comment_id": 100712874, "body": "Gotcha, that makes sense! I am running into another issue, I don&#39;t know if it makes sense to get another thread but the data appears to have two header rows and I want to try and remove the first header which doesn&#39;t provide any important information. I&#39;ve updated the question and table accordingly."}, {"owner": {"reputation": 471, "user_id": 6801991, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MGoA91yGouk/AAAAAAAAAAI/AAAAAAAABmQ/XdaNdU--HxE/photo.jpg?sz=128", "display_name": "hilton92", "link": "https://stackoverflow.com/users/6801991/hilton92"}, "reply_to_user": {"reputation": 3, "user_id": 11744435, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JgM7wtBbCLY/AAAAAAAAAAI/AAAAAAAAAoo/37WJNjeiG34/photo.jpg?sz=128", "display_name": "Mohammed Mahfuz", "link": "https://stackoverflow.com/users/11744435/mohammed-mahfuz"}, "edited": false, "score": 0, "creation_date": 1563468615, "post_id": 57083621, "comment_id": 100719815, "body": "That is caused by your columns having a multiindex, i.e. there are two levels to classify the columns. see (<a href=\"https://stackoverflow.com/questions/22233488/pandas-drop-a-level-from-a-multi-level-column-index\" title=\"pandas drop a level from a multi level column index\">stackoverflow.com/questions/22233488/&hellip;</a>) for how to drop the level"}, {"owner": {"reputation": 3, "user_id": 11744435, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JgM7wtBbCLY/AAAAAAAAAAI/AAAAAAAAAoo/37WJNjeiG34/photo.jpg?sz=128", "display_name": "Mohammed Mahfuz", "link": "https://stackoverflow.com/users/11744435/mohammed-mahfuz"}, "edited": false, "score": 0, "creation_date": 1563482327, "post_id": 57083621, "comment_id": 100725518, "body": "Ah perfect thank you so much! Can&#39;t upvote but I appreciate the help!"}, {"owner": {"reputation": 471, "user_id": 6801991, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MGoA91yGouk/AAAAAAAAAAI/AAAAAAAABmQ/XdaNdU--HxE/photo.jpg?sz=128", "display_name": "hilton92", "link": "https://stackoverflow.com/users/6801991/hilton92"}, "reply_to_user": {"reputation": 3, "user_id": 11744435, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JgM7wtBbCLY/AAAAAAAAAAI/AAAAAAAAAoo/37WJNjeiG34/photo.jpg?sz=128", "display_name": "Mohammed Mahfuz", "link": "https://stackoverflow.com/users/11744435/mohammed-mahfuz"}, "edited": false, "score": 0, "creation_date": 1563489188, "post_id": 57083621, "comment_id": 100727777, "body": "Thats ok, you can accept the answer if you cant upvote yet <a href=\"https://stackoverflow.com/help/someone-answers\">stackoverflow.com/help/someone-answers</a>"}], "tags": [], "owner": {"reputation": 471, "user_id": 6801991, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MGoA91yGouk/AAAAAAAAAAI/AAAAAAAABmQ/XdaNdU--HxE/photo.jpg?sz=128", "display_name": "hilton92", "link": "https://stackoverflow.com/users/6801991/hilton92"}, "is_accepted": true, "score": 0, "last_activity_date": 1563395108, "creation_date": 1563395108, "answer_id": 57083621, "question_id": 57083474, "link": "https://stackoverflow.com/questions/57083474/when-adding-a-dataframe-column-default-value-how-do-i-limit-it-to-specific-rows/57083621#57083621", "title": "When adding a DataFrame column default value, how do I limit it to specific rows?", "body": "<p>You can do this in three steps:</p>\n\n<ol>\n<li>Set the default value 'N' for the entire column using <code>away_team_stats['Starter']='N'</code></li>\n<li>Set the value for the first x rows to be 'Y' using the <code>iloc</code> method with <code>away_team_stats.iloc[:x, 2]='Y'</code>\n(I believe the 'Starter' column will be in position 2 if appending to your example data but you may need to edit this)</li>\n<li>Remove the row with <code>'Player_Name' == 'Reserves'</code> by using the <code>loc</code> method with <code>away_team_stats = away_team_stats.loc[away_team_stats['Player_Name']!='Reserves', :]</code></li>\n</ol>\n\n<p>The <code>iloc</code> method will slice your dataframe by numerical index/column and the <code>loc</code> method will slice your dataframe by index/column label</p>\n\n<p><a href=\"https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html\" rel=\"nofollow noreferrer\">https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 11744435, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JgM7wtBbCLY/AAAAAAAAAAI/AAAAAAAAAoo/37WJNjeiG34/photo.jpg?sz=128", "display_name": "Mohammed Mahfuz", "link": "https://stackoverflow.com/users/11744435/mohammed-mahfuz"}, "edited": false, "score": 0, "creation_date": 1563397794, "post_id": 57083807, "comment_id": 100691278, "body": "I like this method of finding where the first instance of &#39;Reserve&#39; is in case there is ever an instance where it isn&#39;t exactly X rows down, however I am running into another issue that seems to prevent me from trying this, please see edit above."}], "tags": [], "owner": {"reputation": 5677, "user_id": 1592364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9fRvr.jpg?s=128&g=1", "display_name": "Ankur Sinha", "link": "https://stackoverflow.com/users/1592364/ankur-sinha"}, "is_accepted": false, "score": 0, "last_activity_date": 1563396164, "creation_date": 1563396164, "answer_id": 57083807, "question_id": 57083474, "link": "https://stackoverflow.com/questions/57083474/when-adding-a-dataframe-column-default-value-how-do-i-limit-it-to-specific-rows/57083807#57083807", "title": "When adding a DataFrame column default value, how do I limit it to specific rows?", "body": "<p>You can do, if you know the index already where your 'Reserve' value appears, let's say in this case it appears in the 10th record. I initially set everything to 'N', and then turn the first 10 rows to 'Y'.</p>\n\n<pre><code>away_team_stats['Starter'] = 'N'\naway_team_stats.loc[:9, 'Starter'] = 'Y'\n</code></pre>\n\n<p><hr>\nOr you can do:</p>\n\n<pre><code>idx = away_team_stats.loc[away_team_stats['Starter'] == 'Reserve'].index[0]\n</code></pre>\n\n<p>This gives you in which index 'Reserve' appears for the first time. </p>\n\n<p>You can now do it as above:</p>\n\n<pre><code>away_team_stats.loc[:idx, 'Starter'] = 'Y'\naway_team_stats.loc[idx+1:, 'Starter'] = 'N'\n</code></pre>\n\n<p>Sets the first few rows until the word 'Reserve' appeared for the first time to 'Y', and then sets the remaining to 'N'.</p>\n"}], "owner": {"reputation": 3, "user_id": 11744435, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JgM7wtBbCLY/AAAAAAAAAAI/AAAAAAAAAoo/37WJNjeiG34/photo.jpg?sz=128", "display_name": "Mohammed Mahfuz", "link": "https://stackoverflow.com/users/11744435/mohammed-mahfuz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 986, "favorite_count": 0, "accepted_answer_id": 57083621, "answer_count": 2, "score": 0, "last_activity_date": 1563397728, "creation_date": 1563394473, "last_edit_date": 1563397728, "question_id": 57083474, "link": "https://stackoverflow.com/questions/57083474/when-adding-a-dataframe-column-default-value-how-do-i-limit-it-to-specific-rows", "title": "When adding a DataFrame column default value, how do I limit it to specific rows?", "body": "<p>I am using a combination of beautifulsoup and pandas to try and get sports reference data by looping through boxscore pages, obtaining the dataframes for each team and concatenating them all together. I noticed that the way the table is formatted on each page, there are row dividers separating the starters from the reserves, and this row divider has the value \"Reserves\" in the 'Starter' column (which I later rename to 'Player_Name'), with the remaining column headers repeated for the rest of its values. When this data is input into the dataframe, the row dividers are brought in as a normal row. I would like to add a separate column that holds a Y/N value for whether or not that player started the game and remove all records where the 'Starters' column is equal to \"Reserves\".</p>\n\n<p>I have tried adding a column but I'm struggling with a method to get the default values to be \"Y\" for the first x number of rows and \"N\" for the remaining rows.</p>\n\n<p>Here is a brief example of the table followed by the code I am using. Let me know if you have any thoughts!</p>\n\n<p>EDIT: I may have oversimplified this, as there are actually two header columns and it appears this is causing an issue when trying the solutions presented. How can I remove the first header column that just states 'Basic Box Score Stats' and 'Advanced Box Score Stats'?</p>\n\n<pre><code>Basic Box Score Stats            Advanced Box Score Stats\nStarters              MP    FG   +/-  xyz%\nPlayer1               20:00 17   5    12\nPlayer2               15:00 8    4    10\nPlayer3               10:00 9    3    8\nPlayer4               9:00  3    2    6\nPlayer5               8:00  1    1    4\nReserves              MP    FG   +/-  xyz%\nPlayer4               7:00  1    1    2\nPlayer5               4:00  1    1    2\nPlayer6               3:30  1    1    2\n</code></pre>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pandas as pd\nfrom bs4 import BeautifulSoup\n#performed steps in bs4 to get the links to individual boxscores\n    for boxscore_link in boxscore_links:\n        basketball_ref_dfs=pd.read_html(MainURL + boxscore_link)\n        if len(basketball_ref_dfs) = 4:\n            away_team_stats = pd.concat([basketball_ref_dfs[0],basketball_ref_dfs[1]])\n            home_team_stats = pd.concat([basketball_ref_dfs[2],basketball_ref_dfs[3]])\n        else:\n            away_team_stats = basketball_ref_dfs[0]\n            home_team_stats = basketball_ref_dfs[1]\n#new code to be added here to fix 'reserve' row header for away/home_team_stats        \nfull_game_stats = pd.concat([away_team_stats,home_team_stats])\n        full_season_stats = full_season_stats.append(full_game_stats,ignore_index=True)\n    full_season_stats\n\n#what I want:\naway_team_stats['Starter']='Y' # + some condition to only set this value for the first x occurrences or set to 'Y' until row value equals Reserve, then set remaining to 'N'\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "installation"], "answers": [{"tags": [], "owner": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "is_accepted": true, "score": 9, "last_activity_date": 1563402972, "creation_date": 1563402972, "answer_id": 57084827, "question_id": 57083464, "link": "https://stackoverflow.com/questions/57083464/why-doesnt-the-tensorflow-whl-file-contain-all-required-dependencies/57084827#57084827", "title": "Why doesn&#39;t the TensorFlow WHL file contain all required dependencies?", "body": "<blockquote>\n  <p>I thought that the WHL package has all the necessary dependencies</p>\n</blockquote>\n\n<p>No. Wheels don't contain all dependencies and they shouldn't, otherwise each wheel would be extremely bloated up. If you have to install <code>tensorflow-gpu</code> (or any other wheel) on a machine with no internet access, do the following steps:</p>\n\n<ol>\n<li><p>On a machine <em>with</em> internet access, run:</p>\n\n<pre><code>\\&gt; pip download tensorflow-gpu --dest some\\dir\n</code></pre>\n\n<p>(you can run this command with passing as <code>--dest</code> the directory that contains the downloaded <code>tensorflow_gpu-1.14.0-cp36-cp36m-win_amd64.whl</code> so you don't have to download it again)</p>\n\n<p>This will download <code>tensorflow-gpu</code> and all its dependency tree.</p></li>\n<li><p>Now transfer the directory (with all the files downloaded) to the machine <em>without</em> internet access and run:</p>\n\n<pre><code>\\&gt; pip install tensorflow-gpu --no-index --find-links some\\dir\n</code></pre>\n\n<p><code>--no-index</code> will instruct <code>pip</code> not to look up online for packages, <code>--find-links</code> will point to local directory where the packages can be found for installation.</p></li>\n</ol>\n"}], "owner": {"reputation": 159, "user_id": 3661584, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/StLSK.jpg?s=128&g=1", "display_name": "Sleeeper", "link": "https://stackoverflow.com/users/3661584/sleeeper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1045, "favorite_count": 2, "accepted_answer_id": 57084827, "answer_count": 1, "score": 3, "last_activity_date": 1563407084, "creation_date": 1563394392, "last_edit_date": 1563407084, "question_id": 57083464, "link": "https://stackoverflow.com/questions/57083464/why-doesnt-the-tensorflow-whl-file-contain-all-required-dependencies", "title": "Why doesn&#39;t the TensorFlow WHL file contain all required dependencies?", "body": "<p>system: windows 10 64 bit,python 3.6.5 64 bit. Use Anaconda. CUDA 10.0, cuddn installed. </p>\n\n<p>good day. For security reasons, our company has denied access to the Internet. I downloaded from the official website TF tensorFlow whl package: </p>\n\n<pre><code>https: //storage.googleapis.com/tensorflow/windows/gpu/tensorflow_gpu-1.14.0-cp36-cp36m-win_amd64.whl\n</code></pre>\n\n<p>I try to install it using pip:</p>\n\n<pre><code>pip install --upgrade D:\\tensorflow_gpu-1.14.0-cp36-cp36m-win_amd64.whl\n</code></pre>\n\n<p>I get the following message:</p>\n\n<pre><code>collecting keras-preprocessing&gt;=1.0.5 (from tensorflow-gpu==1.14.0)\nRetrying ....after connection broken by 'NewConnectionError'\n......\ncould not find a version that satifies the requirement keras-preprocessing=&gt;1.0.5.....\nno matching distribution found for keras-preprocessing=&gt;1.0.5 (from tensorflow-gpu==1.14.0)\n</code></pre>\n\n<p>When restarting, some other TensorFlow dependency will not be found, as I understand it, pip does not see any dependencies at all</p>\n\n<p>I thought that the WHL package has all the necessary dependencies, but when installing pip it tries to download something from the Internet. Tell me what am I doing wrong?</p>\n\n<p>pip check tensorflow result:</p>\n\n<pre><code>(base) C:\\Windows\\system32&gt;pip check tensorflow\n\ntensorflow 1.10.0 requires absl-py, which is not installed.\ntensorflow 1.10.0 requires astor, which is not installed.\ntensorflow 1.10.0 requires gast, which is not installed.\ntensorflow 1.10.0 requires grpcio, which is not installed.\ntensorflow 1.10.0 requires protobuf, which is not installed.\ntensorflow 1.10.0 requires tensorboard, which is not installed.\ntensorflow 1.10.0 requires termcolor, which is not installed.\ntensorflow-gpu 1.14.0 requires absl-py, which is not installed.\ntensorflow-gpu 1.14.0 requires astor, which is not installed.\ntensorflow-gpu 1.14.0 requires gast, which is not installed.\ntensorflow-gpu 1.14.0 requires google-pasta, which is not installed.\ntensorflow-gpu 1.14.0 requires grpcio, which is not installed.\ntensorflow-gpu 1.14.0 requires keras-applications, which is not installed.\ntensorflow-gpu 1.14.0 requires keras-preprocessing, which is not installed.\ntensorflow-gpu 1.14.0 requires protobuf, which is not installed.\ntensorflow-gpu 1.14.0 requires tensorboard, which is not installed.\ntensorflow-gpu 1.14.0 requires tensorflow-estimator, which is not installed.\ntensorflow-gpu 1.14.0 requires termcolor, which is not installed.\ndistributed 1.21.8 requires msgpack, which is not installed.\ntensorflow-gpu 1.14.0 has requirement numpy&lt;2.0,&gt;=1.14.5, but you have numpy 1.14.3.\ntensorflow-gpu 1.14.0 has requirement wrapt&gt;=1.11.1, but you have wrapt 1.10.11.\n</code></pre>\n"}, {"tags": ["python", "selenium", "webdriver"], "answers": [{"tags": [], "owner": {"reputation": 355, "user_id": 7118245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74fd1ebfb88f634f6db3502ace48434e?s=128&d=identicon&r=PG&f=1", "display_name": "CMMCD", "link": "https://stackoverflow.com/users/7118245/cmmcd"}, "is_accepted": false, "score": 0, "last_activity_date": 1563394659, "creation_date": 1563394659, "answer_id": 57083528, "question_id": 57083460, "link": "https://stackoverflow.com/questions/57083460/how-to-strip-replace-text-in-with-selenium-python/57083528#57083528", "title": "How to strip/replace text in with selenium python?", "body": "<p>The function find_elements_by_xpath returns a WebElement object, you will need to convert this to a string in order to use the replace function.</p>\n\n<p>Depending on your use case you may want to reconsider using excel as your storage medium, unless this is the final step of your process.</p>\n"}, {"tags": [], "owner": {"reputation": 344, "user_id": 9064159, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VNEat.jpg?s=128&g=1", "display_name": "Amir Almusawi", "link": "https://stackoverflow.com/users/9064159/amir-almusawi"}, "is_accepted": false, "score": 0, "last_activity_date": 1563397609, "creation_date": 1563397609, "answer_id": 57084067, "question_id": 57083460, "link": "https://stackoverflow.com/questions/57083460/how-to-strip-replace-text-in-with-selenium-python/57084067#57084067", "title": "How to strip/replace text in with selenium python?", "body": "<p>The portion of your code that you've included in your question isn't the portion that's relevant to the issue you're experiencing.</p>\n\n<p>As CMMCD mentioned, I would also recommend skipping the binary excel format for the sake of simplicity, and use the built-in csv library instead. This will prevent unintended separators from splitting your cells</p>\n\n<pre><code>from csv import writer\n\n# your data should be a list of lists\ndata = [['product1', 8.0], ['product2', 12.25]]  # etc, as an example\n\nwith open('your_output_file.csv', 'w') as file:\n    mywriter = writer(file)\n    for line in data:\n        mywriter.writerow(line)\n</code></pre>\n\n<p>The docs: <a href=\"https://docs.python.org/3/library/csv.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/csv.html</a></p>\n"}], "owner": {"reputation": 1, "user_id": 7760961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cf275eea5dd10f378c4d14b2bac6c78?s=128&d=identicon&r=PG&f=1", "display_name": "Naem Jin", "link": "https://stackoverflow.com/users/7760961/naem-jin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 675, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1563397609, "creation_date": 1563394382, "question_id": 57083460, "link": "https://stackoverflow.com/questions/57083460/how-to-strip-replace-text-in-with-selenium-python", "title": "How to strip/replace text in with selenium python?", "body": "<p>I'm learning to do web scraping and i managed to pull data out of a webpage into excel file. But, it might be because of the item names that contain \",\" and this made the item names in the excel file to multiple columns.</p>\n\n<p>I have tried using strip and replace elements in the list but it returns an error saying: AttributeError: 'WebElement' object has no attribute 'replace'.</p>\n\n<pre><code>item = driver.find_elements_by_xpath('//h2[@class=\"list_title\"]')\nitem = [i.replace(\",\",\"\") for i in item]\nprice = driver.find_elements_by_xpath('//div[@class=\"ads_price\"]')\nprice = [p.replace(\"rm\",\"\") for p in price]\n</code></pre>\n\n<p><strong>expected result in excel file file:</strong>\n<a href=\"https://i.stack.imgur.com/K2XdP.png\" rel=\"nofollow noreferrer\">expected</a> <br>\n<strong>actual result in excel file file:</strong>\n<a href=\"https://i.stack.imgur.com/CPQjN.png\" rel=\"nofollow noreferrer\">actual</a></p>\n"}, {"tags": ["python", "pandas", "matplotlib"], "comments": [{"owner": {"reputation": 3255, "user_id": 4895877, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FZ0F1.jpg?s=128&g=1", "display_name": "Brendan", "link": "https://stackoverflow.com/users/4895877/brendan"}, "edited": false, "score": 1, "creation_date": 1563394630, "post_id": 57083452, "comment_id": 100690061, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">mcve</a> and what code you have attempted."}, {"owner": {"reputation": 522, "user_id": 3447158, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/VD8MJ.jpg?s=128&g=1", "display_name": "rosstripi", "link": "https://stackoverflow.com/users/3447158/rosstripi"}, "reply_to_user": {"reputation": 3255, "user_id": 4895877, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FZ0F1.jpg?s=128&g=1", "display_name": "Brendan", "link": "https://stackoverflow.com/users/4895877/brendan"}, "edited": false, "score": 0, "creation_date": 1563456054, "post_id": 57083452, "comment_id": 100712283, "body": "@Brendan I posted the code I wrote that does what I want, but I&#39;m just not certain if there isn&#39;t a more idiomatic way to do it"}, {"owner": {"reputation": 3255, "user_id": 4895877, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FZ0F1.jpg?s=128&g=1", "display_name": "Brendan", "link": "https://stackoverflow.com/users/4895877/brendan"}, "edited": false, "score": 0, "creation_date": 1563458206, "post_id": 57083452, "comment_id": 100713774, "body": "@rosstripi Your sample code has <code>counts_df = df.groupby(col)[&#39;grey?&#39;].value_counts()</code> -- what data is going into <code>df</code>? Your question should ideally include a block of code anyone can simply copy, paste, and run to replicate your results. Use <code>df.to_dict()</code> to output your sample data."}], "answers": [{"tags": [], "owner": {"reputation": 522, "user_id": 3447158, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/VD8MJ.jpg?s=128&g=1", "display_name": "rosstripi", "link": "https://stackoverflow.com/users/3447158/rosstripi"}, "is_accepted": true, "score": 0, "last_activity_date": 1563396802, "creation_date": 1563396802, "answer_id": 57083932, "question_id": 57083452, "link": "https://stackoverflow.com/questions/57083452/plot-bar-chart-of-counts-of-where-dummy-variables-1-and-a-separate-variable-i/57083932#57083932", "title": "Plot bar chart of counts of where dummy variables == 1 AND a separate variable in the Series == 1", "body": "<p>I ended up figuring out <em>a</em> way to do it, but it might not be <em>the best</em> way to do it.</p>\n\n<pre><code>counts_list = []\n\nfor col in ['&lt;35', '35-44', '45-54', '55-64', '65+']:\n    counts_df = df.groupby(col)['grey?'].value_counts()\n    try:\n        counts_list.append(counts_df[1][1] / (counts_df[1][1] + counts_df[1][0]) * 1000)\n    except:\n        counts_list.append(0)\n%matplotlib inline\nimport matplotlib.pyplot as plt; plt.rc(\"font\", size=14)\ny_pos = np.arange(len(['&lt;35', '35-44', '45-54', '55-64', '65+']))\n\nplt.bar(y_pos, counts_list, align='center', alpha=0.5)\nplt.xticks(y_pos, ['&lt;35', '35-44', '45-54', '55-64', '65+'])\nplt.ylabel('Grey/1k')\nplt.title('Grey by Age')\n\nplt.show()\n</code></pre>\n"}], "owner": {"reputation": 522, "user_id": 3447158, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/VD8MJ.jpg?s=128&g=1", "display_name": "rosstripi", "link": "https://stackoverflow.com/users/3447158/rosstripi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "accepted_answer_id": 57083932, "answer_count": 1, "score": -1, "last_activity_date": 1563456012, "creation_date": 1563394341, "last_edit_date": 1563456012, "question_id": 57083452, "link": "https://stackoverflow.com/questions/57083452/plot-bar-chart-of-counts-of-where-dummy-variables-1-and-a-separate-variable-i", "title": "Plot bar chart of counts of where dummy variables == 1 AND a separate variable in the Series == 1", "body": "<p>I have a pandas DataFrame with dummy variables for age ranges, specifically '&lt;35', '35-44', '45-54', '55-64', and '65+'. I have another dummy variable that represents if someone's hair has gone grey yet, 'grey?'.</p>\n\n<p>I would like to plot a bar chart of how many people have grey hair per 1,000 people by age group. So basically, for each age group dummy where dummy == 1, (count of grey dummy == 1 / people where age group dummy == 1) * 1000, and plot as bar chart.</p>\n\n<p>What is the best way to do this?</p>\n\n<p>EDIT:\nI ended up figuring out <em>a</em> way to do it, but it might not be <em>the best</em> way to do it.</p>\n\n<pre><code>counts_list = []\n\nfor col in ['&lt;35', '35-44', '45-54', '55-64', '65+']:\n    counts_df = df.groupby(col)['grey?'].value_counts()\n    try:\n        counts_list.append(counts_df[1][1] / (counts_df[1][1] + counts_df[1][0]) * 1000)\n    except:\n        counts_list.append(0)\n%matplotlib inline\nimport matplotlib.pyplot as plt; plt.rc(\"font\", size=14)\ny_pos = np.arange(len(['&lt;35', '35-44', '45-54', '55-64', '65+']))\n\nplt.bar(y_pos, counts_list, align='center', alpha=0.5)\nplt.xticks(y_pos, ['&lt;35', '35-44', '45-54', '55-64', '65+'])\nplt.ylabel('Grey/1k')\nplt.title('Grey by Age')\n\nplt.show()\n</code></pre>\n\n<p>Is there a more idiomatic/pythonic way to do this same thing?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 19276, "user_id": 8591431, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-AqHwnjWu2tM/AAAAAAAAAAI/AAAAAAAAFrE/DVc4w4e1pDc/photo.jpg?sz=128", "display_name": "Devesh Kumar Singh", "link": "https://stackoverflow.com/users/8591431/devesh-kumar-singh"}, "edited": false, "score": 0, "creation_date": 1563394377, "post_id": 57083440, "comment_id": 100689944, "body": "<code>lst_compr</code> works and gives me <code>[&#39;Lauren&#39;, &#39;Ayo&#39;, &#39;Kathryn&#39;, &#39;Nick&#39;, &#39;Gladys&#39;, &#39;Adam&#39;]</code>, What&#39;s the question here?"}, {"owner": {"reputation": 19276, "user_id": 8591431, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-AqHwnjWu2tM/AAAAAAAAAAI/AAAAAAAAFrE/DVc4w4e1pDc/photo.jpg?sz=128", "display_name": "Devesh Kumar Singh", "link": "https://stackoverflow.com/users/8591431/devesh-kumar-singh"}, "edited": false, "score": 0, "creation_date": 1563394518, "post_id": 57083440, "comment_id": 100690003, "body": "You want to do <code>lst.append(x[&#39;name&#39;])</code> in the for loop"}], "answers": [{"tags": [], "owner": {"reputation": 96714, "user_id": 198633, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5b9c04999233026354268c2ee4237e04?s=128&d=identicon&r=PG", "display_name": "inspectorG4dget", "link": "https://stackoverflow.com/users/198633/inspectorg4dget"}, "is_accepted": true, "score": 1, "last_activity_date": 1563394389, "creation_date": 1563394389, "answer_id": 57083463, "question_id": 57083440, "link": "https://stackoverflow.com/questions/57083440/nested-dictionary-iteration/57083463#57083463", "title": "Nested Dictionary Iteration", "body": "<pre><code>lst = []\nfor x in tester[\"info\"]:\n  lst.append(x[\"name\"])\n\nprint(lst)\n</code></pre>\n\n<p>The problem in your code is that <code>x</code> referred to each <code>dict</code> item that you iterated over. You simply appended <code>x</code>, instead of the value of \"name\" within <code>x</code>. Appending <code>x['name']</code> fixes that</p>\n"}], "owner": {"reputation": 63, "user_id": 11737463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77564b5f78a531422bfc32810e4531c4?s=128&d=identicon&r=PG&f=1", "display_name": "EverythingZen", "link": "https://stackoverflow.com/users/11737463/everythingzen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 57083463, "answer_count": 1, "score": -1, "last_activity_date": 1563394389, "creation_date": 1563394289, "question_id": 57083440, "link": "https://stackoverflow.com/questions/57083440/nested-dictionary-iteration", "title": "Nested Dictionary Iteration", "body": "<p>This dictionary has one key and its value is a list of dictionaries. I'm just learning list comprehension and have figured out how to extract the list of names using the below code but I can't figure out how to get a list of names using for loop iteration. Can someone please help?</p>\n\n<p>I understand list comprehension is easier and this is just for me to develop my skills with nested iteration.</p>\n\n<pre><code>lst_compr = [d[\"name\"] for d in tester[\"info\"]]\n\ntester = {'info': [{\"name\": \"Lauren\", 'class standing': 'Junior', 'major': \"Information Science\"},{'name': 'Ayo', 'class standing': \"Bachelor's\", 'major': 'Information Science'}, {'name': 'Kathryn', 'class standing': 'Senior', 'major': 'Sociology'}, {'name': 'Nick', 'class standing': 'Junior', 'major': 'Computer Science'}, {'name': 'Gladys', 'class standing': 'Sophomore', 'major': 'History'}, {'name': 'Adam', 'major': 'Violin Performance', 'class standing': 'Senior'}]}\n\nimport json\n\nprint(json.dumps(tester, indent = 2))\n\nlst = []\nfor x in tester[\"info\"]:\n  lst.append(x)\n\nprint(lst)\n</code></pre>\n\n<p>Tester Output</p>\n\n<pre><code>{\n  \"info\": [\n    {\n      \"name\": \"Lauren\",\n      \"class standing\": \"Junior\",\n      \"major\": \"Information Science\"\n    },\n    {\n      \"name\": \"Ayo\",\n      \"class standing\": \"Bachelor's\",\n      \"major\": \"Information Science\"\n    },\n    {\n      \"name\": \"Kathryn\",\n      \"class standing\": \"Senior\",\n      \"major\": \"Sociology\"\n    },\n    {\n      \"name\": \"Nick\",\n      \"class standing\": \"Junior\",\n      \"major\": \"Computer Science\"\n    },\n    {\n      \"name\": \"Gladys\",\n      \"class standing\": \"Sophomore\",\n      \"major\": \"History\"\n    },\n    {\n      \"name\": \"Adam\",\n      \"major\": \"Violin Performance\",\n      \"class standing\": \"Senior\"\n    }\n  ]\n}\n</code></pre>\n\n<p>Current Output</p>\n\n<pre><code>[{'name': 'Lauren', 'class standing': 'Junior', 'major': 'Information Science'}, {'name': 'Ayo', 'class standing': \"Bachelor's\", 'major': 'Information Science'}, {'name': 'Kathryn', 'class standing': 'Senior', 'major': 'Sociology'}, {'name': 'Nick', 'class standing': 'Junior', 'major': 'Computer Science'}, {'name': 'Gladys', 'class standing': 'Sophomore', 'major': 'History'}, {'name': 'Adam', 'major': 'Violin Performance', 'class standing': 'Senior'}]\n</code></pre>\n\n<p>Expected Output</p>\n\n<pre><code>['Lauren', 'Ayo', 'Kathryn', 'Nick', 'Gladys', 'Adam']\n</code></pre>\n"}]