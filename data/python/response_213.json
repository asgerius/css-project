[{"tags": ["python", "file"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 5, "creation_date": 1549497409, "post_id": 54564368, "comment_id": 95927585, "body": "You never call <code>.close()</code> on <code>file</code>. Presumably the buffer doesn&#39;t get flushed to the file and, what&#39;s more, you go on to redefine <code>file</code>"}, {"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1549497499, "post_id": 54564368, "comment_id": 95927608, "body": "@roganjosh: spot on. Interesting observation"}, {"owner": {"reputation": 1, "user_id": 11025759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8788dae0aec2478638af0e041ef78479?s=128&d=identicon&r=PG&f=1", "display_name": "panagiotis", "link": "https://stackoverflow.com/users/11025759/panagiotis"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1549539840, "post_id": 54564368, "comment_id": 95942827, "body": "@roganjosh thanks for the answer.. The .Close() command was only for testing if that was the problem and I forgot tou remove it. What do you mean redefine the file. I already used file.flush() and it didn&#39;t solve the problem."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1549549894, "post_id": 54564368, "comment_id": 95948808, "body": "You&#39;ve misinterpreted both of my points. Firstly I am saying that you <i>need</i> <code>file.close()</code>, but you never do it. Second, I am saying that you have <code>file = codecs.open(filepathtemp, &quot;w&quot;, &quot;utf-8&quot;)</code> <i>and</i> <code>file = codecs.open(filepathtemptwo, &quot;w&quot;, &quot;utf-8&quot;)</code> (redefining <code>file</code>). Both of these mean that you never flush the contents to the file. Python may have a file buffer that you flush, but there&#39;s also an OS one."}], "owner": {"reputation": 1, "user_id": 11025759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8788dae0aec2478638af0e041ef78479?s=128&d=identicon&r=PG&f=1", "display_name": "panagiotis", "link": "https://stackoverflow.com/users/11025759/panagiotis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1549540048, "creation_date": 1549497229, "last_edit_date": 1549540048, "question_id": 54564368, "link": "https://stackoverflow.com/questions/54564368/python-why-i-cannot-read-from-file-i-just-created", "title": "python why i cannot read from file i just created?", "body": "<p>I am trying to create a program that sorts some words.\nwhen i try to reopen a file that i just created nothing happens.\nif i copy paste the file under different name and try to open it everything is OK.</p>\n\n<pre><code>    import itertools\n    import codecs\n    filepath = 'greekdic.txt'\n    filepathtemp= 'temp.txt'\n    filepathtemptwo = 'final.txt'\n    filepathtempread = 'greekdic2.txt'\n    ######################## INPUT #################################################\n    chars = str(input(\"Enter letters: \"))\n    chars2=chars\n    count = int(input(\"Enter lenght of word: \"))\n    count2=count\n    x=0\n    ######################## CREATE TEMP FILE WITH INTEREST WORDS #################\n    file = codecs.open(filepathtemp, \"w\", \"utf-8\")\n    with codecs.open(filepath, \"r\", \"utf-8\") as fp:  \n       line = fp.readline().splitlines()\n       cnt = 1\n       while line:\n        a=len(line[0])\n        if a == count:\n            print(line)\n            file.write(line[0])\n            file.write(\"\\n\")\n        line = fp.readline().splitlines()\n        cnt += 1\n    ###########################################################################\n    file = codecs.open(filepathtemptwo, \"w\", \"utf-8\")\n    with codecs.open(filepathtemp, \"r\", \"utf-8\") as fp:  \n       line = fp.readline().splitlines()\n       cnt = 1\n       while line:\n        for x in range(count):\n            if chars[x] == line[0][0]:\n                print (\"***********************************\")\n                print(line)\n                file.write(line[0])\n                file.write(\"\\n\")       \n        line = fp.readline().splitlines()\n        cnt += 1\n    ########################## SEARCH ########################################\n    print(chars)\n    if __name__ == \"__main__\":\n        for item in itertools.product(chars2, repeat=count2):\n            ppp = \"\".join(item)\n            #print(ppp)\n----------&gt;&gt;&gt;&gt;&gt;&gt; ***with codecs.open(filepathtemptwo, \"r\", \"utf-8\") as fp2:***\n                line1 = fp2.readline().splitlines()\n                #print(line1[0])\n                #print(ppp)\n                cnt = 1\n                while line1:\n                    if str(ppp) == str(line1[0]):\n                        print(\"--------------------------------------------\")\n                        print(\"value of line1 is: \")\n                        print(line1[0])\n                        print(id(line1[0]))\n                        print(\"value of ppp is: \")\n                        print(ppp)\n                        print(id(ppp))\n                    line1 = fp2.readline().splitlines()\n                    cnt += 1\n</code></pre>\n\n<p>the problem lies on \"filepathtemptwo\" that is just created. if i copy paste the contents in other file is ok. i even change the variable names using new ones.\ncan anyone help.</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 1184, "user_id": 6817428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b26df0a53595c7097a8eaa1df1c50d4?s=128&d=identicon&r=PG", "display_name": "bonidjukic", "link": "https://stackoverflow.com/users/6817428/bonidjukic"}, "edited": false, "score": 1, "creation_date": 1549498273, "post_id": 54564333, "comment_id": 95927806, "body": "Did you trying passing the <code>pk</code> explicitly: <code>{% url &#39;forum:thread-create&#39; pk=thread.id %}</code>?"}, {"owner": {"reputation": 1130, "user_id": 8966274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g6t6A.jpg?s=128&g=1", "display_name": "Bidhan Majhi", "link": "https://stackoverflow.com/users/8966274/bidhan-majhi"}, "edited": false, "score": 0, "creation_date": 1549519798, "post_id": 54564333, "comment_id": 95932688, "body": "You are passing thread_id here {% url &#39;forum:thread-create&#39; thread.id %}. That is the problem."}, {"owner": {"reputation": 56, "user_id": 11025700, "user_type": "registered", "profile_image": "https://graph.facebook.com/2042891182414801/picture?type=large", "display_name": "Peter Kipper", "link": "https://stackoverflow.com/users/11025700/peter-kipper"}, "edited": false, "score": 0, "creation_date": 1549530960, "post_id": 54564333, "comment_id": 95937590, "body": "So i figured out it has to be thema.id in the first place. Was still not working. But then - after some tinkering around - I set the ThreadView up to:      class ThreadView(DetailView):     model = Thema     context_object_name = &#39;all_themen&#39;     template_name = &#39;forum/thread.html&#39;  So I changed model from Thread -&gt; Thema and changed the context_name.  It was still not working. After that, I only changed ListView -&gt; DetailView and now it is working perfectly. I still don&#39;t know why this was important and would love if someone could explain this to me so I understand in the future :)"}], "owner": {"reputation": 56, "user_id": 11025700, "user_type": "registered", "profile_image": "https://graph.facebook.com/2042891182414801/picture?type=large", "display_name": "Peter Kipper", "link": "https://stackoverflow.com/users/11025700/peter-kipper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1549529099, "creation_date": 1549497063, "last_edit_date": 1549529099, "question_id": 54564333, "link": "https://stackoverflow.com/questions/54564333/class-views-and-noreversematch", "title": "Class Views and NoReverseMatch", "body": "<p>I am new to coding and especially new to working with Django. I want to build a small \"forum\" for me and the other students and it works pretty fine.</p>\n\n<p>There is just one error I encounter over and over:</p>\n\n<pre><code>Exception Type: NoReverseMatch\nException Value: Reverse for 'thread-create' with \n  arguments '('',)' not found. 1 pattern(s) tried: ['forum/(?P&lt;pk&gt;[0-9]+)/add/$']\n</code></pre>\n\n<p>I can work around it using functions instead of class based Views, but I doubt that's how it's supposed to be done.</p>\n\n<p>I have the feeling I am missing something very important while working with class views. </p>\n\n<p>I really would appreciate if someone could help me out :-)</p>\n\n<p>It's the links that are not working:</p>\n\n<pre><code>{% url 'user-posts' thread.author.username %}\n</code></pre>\n\n<p>and more importantly:</p>\n\n<pre><code>{% url 'forum:thread-create' thread.id %}\n</code></pre>\n\n<p>What's also not working while using classes is:</p>\n\n<pre><code>{% for thread in thema.thread_set %} (works with the functions)\n</code></pre>\n\n<p>(I only want to see the threads that are bind to a certain thema. That also works pretty well with functions).</p>\n\n<p>And you might also be asking why I don't just use the function based views:</p>\n\n<ul>\n<li>I want to know what am I doing wrong</li>\n<li>I want to be able to easy paginate my site.</li>\n</ul>\n\n<p>Code:</p>\n\n<pre><code># models.py\n\nfrom django.db import models\nfrom django.urls import reverse\nfrom PIL import Image\nfrom django.utils import timezone\nfrom django.contrib.auth.models import User\n\n\nclass Thema(models.Model):\n    themengebiet = models.CharField(max_length=350)\n    beschreibung = models.TextField()\n    themen_logo = models.FileField(max_length=350, upload_to=\"logos\",        default='default.jpg')\n    erstellt_am = models.DateTimeField(default=timezone.now)\n\n    def __str__(self):\n        return self.themengebiet\n\n    def save(self, *args, **kwargs):\n        super().save(*args, **kwargs)\n\n       img = Image.open(self.themen_logo.path)\n\n       if img.height &gt; 300 or img.width &gt; 300:\n           output_size = (300, 300)\n           img.thumbnail(output_size)\n           img.save(self.themen_logo.path)\n\n\nclass Thread(models.Model):\n    thema = models.ForeignKey(Thema, on_delete=models.CASCADE)\n    titel = models.CharField(max_length=350)\n    author = models.ForeignKey(User, on_delete=models.CASCADE, null=True, blank=True)\n    erstellt_am = models.DateTimeField(default=timezone.now)\n    thread_logo = models.ImageField(upload_to=\"logos\", d  efault='default.jpg')\n\n    def get_absolute_url(self):\n        return reverse('forum:thread-page', kwargs={'pk': self.thema.id})\n\n   def __str__(self):\n        return self.titel\n\n\nclass Posting(models.Model):\n    thread = models.ForeignKey(Thread, on_delete=models.CASCADE)\n    titel = models.CharField(max_length=350)\n    erstellt_am = models.DateTimeField(default=timezone.now)\n    author = models.ForeignKey(User, on_delete=models.CASCADE)\n    inhalt = models.TextField()\n\n    def __str__(self):\n        return self.titel\n\nviews.py\n\nfrom django.views import generic\nfrom django.views.generic import CreateView, UpdateView, DeleteView, ListView\nfrom .models import Thema, Thread, Posting\nfrom django.shortcuts import render, get_object_or_404\nfrom django.urls import reverse_lazy\nfrom django.contrib.auth.mixins import LoginRequiredMixin\nfrom django.contrib.auth.decorators import login_required\nfrom django.http import Http404\nfrom django.core.paginator import Paginator\n\n\nclass ThemenView(ListView):\n     template_name = 'forum/posts_original.html'\n     context_object_name = 'all_themen'\n\n     def get_queryset(self):\n         return Thema.objects.all()\n\n\nclass ThemaCreate(CreateView):\n    model = Thema\n    fields = ['themengebiet', 'beschreibung', 'themen_logo']\n    success_url = \"/forum/\"\n\n\nclass ThreadCreate(CreateView):\n    model = Thread\n    fields = ['thema', 'titel', 'erstellt_am']\n    success_url = reverse_lazy('forum:posts_original')\n\n    def get_object(self):\n        return Thread.objects.get(pk=self.kwargs['pk'])\n\n    def form_valid(self, form):\n        form.instance.author = self.request.user\n        return super().form_valid(form)\n\n\nclass PostCreate(CreateView):\n    model = Posting\n    fields = ['thread', 'titel', 'inhalt', 'erstellt_am']\n    success_url = \"/forum/\"\n\n    def form_valid(self, form):\n        form.instance.author = self.request.user\n        return super().form_valid(form)\n\n\nclass ThreadView(ListView):\n    model = Thread\n    context_object_name = 'threads'\n    template_name = 'forum/thread.html'\n    success_url = reverse_lazy('forum:posts_original')\n\n    def get_object(self):\n        return Thread.objects.get(pk=self.kwargs['pk'])\n\n\nclass PostView(ListView):\n    model = Posting\n    context_object_name = 'posts'\n    template_name = 'forum/posts.html'\n\n\nurls.py\n\nfrom django.urls import path\nfrom . import views\n\n\napp_name = 'forum'\n\nurlpatterns = [\n    # /forum/\n    path('', views.ThemenView.as_view(), name='posts_original'),\n    # forum/id/\n    path('&lt;int:pk&gt;/', views.ThreadView.as_view(), name='thread-page'),\n    # forum/thread/add\n    #path('&lt;int:pk&gt;/add/', views.thread_create, name='thread-create'),\n    # forum/id//id\n    path('thread/&lt;int:pk&gt;/', views.PostView.as_view(), name='post-page'),\n    path('add/', views.ThemaCreate.as_view(), name='thema-create'),\n    path('&lt;int:pk&gt;/add/', views.ThreadCreate.as_view(), name='thread-create'),\n    path('thread/&lt;int:pk&gt;/add/', views.PostCreate.as_view(), name='post-create'),\n\n]\n\n'''\n\ndef thread(request, pk):\n    try:\n       thema = get_object_or_404(Thema, pk=pk)\n    except Thema.DoesNotExist:\n       raise Http404(\"Thema existitiert nicht\")\n    return render(request, 'forum/thread.html', {'thema': thema})\n\n\ndef post(request, pk):\n    try:\n        thread = get_object_or_404(Thread, pk=pk)\n    except Thread.DoesNotExist:\n        raise Http404(\"Thema existitiert nicht!\")\n    return render(request, 'forum/posts.html', {'thread': thread})\n'''\n\n{% extends \"blog/base.html\" %}\n{{ threads }}\n{% block content %}\n    &lt;a href=\"{% url 'forum:posts_original'  %}\"&gt;Zur\u00fcck zur Themen\u00fcbersicht&lt;/a&gt;\n    {% for thread in threads %}\n         &lt;article class=\"media content-section\"&gt;\n          &lt;img class=\"rounded-circle article-img\" src= \"{{ thread.thread_logo.url }}\"&gt;\n          &lt;div class=\"media-body\"&gt;\n            &lt;div class=\"article-metadata\"&gt;\n               &lt;a class=\"mr-2\" href=\"{% url 'user-posts' thread.author.username %}\"&gt;{{ thread.author }}&lt;/a&gt;\n              &lt;small class=\"text-muted\"&gt;{{ thread.erstellt_am|date:\"d. F Y\" }}&lt;/small&gt;\n            &lt;/div&gt;\n             &lt;h2&gt;&lt;a class=\"article-title\" href=\" {% url 'forum:post-page' thread.id %}\"&gt;{{ thread.titel }}&lt;/a&gt;&lt;/h2&gt;\n\n            &lt;p class=\"article-content\"&gt;Thema: {{ thread.thema }}&lt;/p&gt;\n          &lt;/div&gt;\n        &lt;/article&gt;\n    {% endfor %}\n\n    &lt;form action=\"{% url 'forum:thread-create' thread.id %}\" method=\"post\" enctype=\"multipart/form-data\" style=\"display: inline;\"&gt;\n    {% csrf_token %}\n    &lt;a href=\"{% url 'forum:thread-create' thread.id %\"&gt;Thread hinzuf\u00fcgen&lt;/a&gt;\n    &lt;/form&gt;\n    {% endif %}\n{% endblock content %}\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "marshmallow"], "answers": [{"tags": [], "owner": {"reputation": 345, "user_id": 6454901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfd182be3a2aa9d571d21b62ab0ae74a?s=128&d=identicon&r=PG&f=1", "display_name": "DevBot", "link": "https://stackoverflow.com/users/6454901/devbot"}, "is_accepted": false, "score": 0, "last_activity_date": 1549592703, "last_edit_date": 1549592703, "creation_date": 1549570434, "answer_id": 54581546, "question_id": 54564331, "link": "https://stackoverflow.com/questions/54564331/marshmallow-parent-schema-how-to-share-a-validation-decorator-between-child-sc/54581546#54581546", "title": "Marshmallow Parent Schema - How to share a validation decorator between child schemas?", "body": "<p>A solution I found is creating a separate class to host the shared validation functions:</p>\n\n<pre><code>def validate_common_field(self, common_field):\n    try:\n        # Exact Same Validation logic as common_field from ChildSchema1\n    except:\n        raise ValidationError('common_field is not valid')\n</code></pre>\n\n<p>And consume that from ChildSchema1 and ChildSchema2 by removing the @validates decorator and using the <code>validate</code> parameter in the schema field like this.</p>\n\n<p><strong>ChildSchema1.py</strong></p>\n\n<pre><code>from marshmallow import Schema, pprint, post_load\nfrom marshmallow import fields, ValidationError, validates, validates_schema\nfrom validators import *\n\nclass ChildSchema1(Schema):\n    field1 = fields.String()\n    field2 = fields.String()\n    common_field = fields.String(validate=validate_common_field)\n</code></pre>\n\n<p><strong>validators.py</strong>\n    from marshmallow import ValidationError, validates</p>\n\n<pre><code>def validate_common_field(self, common_field):\n        try:\n            # Validation logic\n        except:\n            raise ValidationError('common_field is not valid')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9282, "user_id": 4653485, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a28879e28d6950aeed15712534f35a8d?s=128&d=identicon&r=PG&f=1", "display_name": "J&#233;r&#244;me", "link": "https://stackoverflow.com/users/4653485/j%c3%a9r%c3%b4me"}, "is_accepted": false, "score": 0, "last_activity_date": 1549829356, "creation_date": 1549829356, "answer_id": 54620529, "question_id": 54564331, "link": "https://stackoverflow.com/questions/54564331/marshmallow-parent-schema-how-to-share-a-validation-decorator-between-child-sc/54620529#54620529", "title": "Marshmallow Parent Schema - How to share a validation decorator between child schemas?", "body": "<p>Your approach with a separate function is fine.</p>\n\n<p>If the common field is shared by both children, you could also use inheritance to reflect that and factorize the field and the logic.</p>\n\n<pre><code>class ChildSchema(Schema):\n    common_field = fields.String()\n\n    @validates(\"common_field\")\n    def validate_common_field(self, common_field):\n        try:\n            # Validation logic\n        except:\n            raise ValidationError('common_field is not valid')\n\nclass ChildSchema1(ChildSchema):\n    field1 = fields.String()\n    field2 = fields.String()\n\nclass ChildSchema2(ChildSchema):\n    field3 = fields.String()\n</code></pre>\n"}], "owner": {"reputation": 345, "user_id": 6454901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfd182be3a2aa9d571d21b62ab0ae74a?s=128&d=identicon&r=PG&f=1", "display_name": "DevBot", "link": "https://stackoverflow.com/users/6454901/devbot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 885, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1549829396, "creation_date": 1549497057, "last_edit_date": 1549829396, "question_id": 54564331, "link": "https://stackoverflow.com/questions/54564331/marshmallow-parent-schema-how-to-share-a-validation-decorator-between-child-sc", "title": "Marshmallow Parent Schema - How to share a validation decorator between child schemas?", "body": "<p>I have a parent marshmallow schema \"ParentSchema\" and 2 nested children schemas \"ChildSchema1\" and \"ChildSchema2\". Both nested children schemas are taking advantage of the <a href=\"https://marshmallow.readthedocs.io/en/3.0/api_reference.html#module-marshmallow.decorators\" rel=\"nofollow noreferrer\">@validates_schema</a> decorator for field validation from marshmallow. They look like this:</p>\n\n<p><strong>ParenSchema.py</strong></p>\n\n<pre><code>from marshmallow import Schema, fields\nfrom schemas.childSchema1 import ChildSchema1\nfrom schemas.childSchema2 import ChildSchema2\n\n    class ParentSchema(Schema):\n        child1 = fields.Nested(ChildSchema1)\n        child2 = fields.Nested(ChildSchema2)\n        foo = fields.String()\n        bar = fields.String()\n</code></pre>\n\n<p><strong>ChildSchema1.py</strong></p>\n\n<pre><code>from marshmallow import Schema, pprint, post_load\nfrom marshmallow import fields, ValidationError, validates, validates_schema\n\nclass ChildSchema1(Schema):\n    field1 = fields.String()\n    field2 = fields.String()\n    common_field = fields.String()\n\n    @validates(\"common_field\")\n    def validate_common_field(self, common_field):\n        try:\n            # Validation logic\n        except:\n            raise ValidationError('common_field is not valid')\n</code></pre>\n\n<p><strong>ChildSchema2.py</strong></p>\n\n<pre><code>from marshmallow import Schema, pprint, post_load\nfrom marshmallow import fields, ValidationError, validates, validates_schema\n\nclass ChildSchema2(Schema):\n    common_field = fields.String()\n    field3 = fields.String()\n\n    @validates(\"common_field\")\n    def validate_common_field(self, common_field):\n        try:\n            # Exact Same Validation logic as common_field from ChildSchema1\n        except:\n            raise ValidationError('common_field is not valid')\n</code></pre>\n\n<p>Given that both ChildSchema1 and ChildSchema2 have a field of the same name, with the same validator function, I'd love to follow <a href=\"https://en.wikipedia.org/wiki/Don%27t_repeat_yourself\" rel=\"nofollow noreferrer\">DRY Principle</a> and pull that function out to ParentSchema.py.</p>\n"}, {"tags": ["python", "pandas", "quantitative-finance"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 1, "creation_date": 1549497103, "post_id": 54564253, "comment_id": 95927499, "body": "How do you define &#39;cumulative return&#39;? How do you want to handle the gaps? (Presumably caused by weekends.) Are they included in the window size?"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1549497265, "post_id": 54564253, "comment_id": 95927546, "body": "<a href=\"https://stackoverflow.com/questions/15295434/how-to-calculate-rolling-cumulative-product-on-pandas-dataframe\">Possible dupe</a>."}, {"owner": {"reputation": 1500, "user_id": 1715271, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1e45624e383f9144014999dfb03f1b13?s=128&d=identicon&r=PG", "display_name": "mpjan", "link": "https://stackoverflow.com/users/1715271/mpjan"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1549551684, "post_id": 54564253, "comment_id": 95949962, "body": "Thanks @DYZ, I added an example to illustrate what I&#39;m trying to accomplish."}], "answers": [{"comments": [{"owner": {"reputation": 1500, "user_id": 1715271, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1e45624e383f9144014999dfb03f1b13?s=128&d=identicon&r=PG", "display_name": "mpjan", "link": "https://stackoverflow.com/users/1715271/mpjan"}, "edited": false, "score": 0, "creation_date": 1549551972, "post_id": 54564426, "comment_id": 95950139, "body": "Thanks, this will work if the DataFrame contains stock prices. My DataFrame, <code>df</code>, however, contains stock returns. How could I do it in <i>this</i> case?"}], "tags": [], "owner": {"reputation": 95, "user_id": 2500045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0cb13d292cac79983949b2d16ef76d5a?s=128&d=identicon&r=PG", "display_name": "mbass", "link": "https://stackoverflow.com/users/2500045/mbass"}, "is_accepted": false, "score": 1, "last_activity_date": 1549497635, "creation_date": 1549497635, "answer_id": 54564426, "question_id": 54564253, "link": "https://stackoverflow.com/questions/54564253/how-to-calculate-the-cumulative-product-of-a-rolling-window-in-pandas/54564426#54564426", "title": "How to calculate the cumulative product of a rolling window in Pandas?", "body": "<p>Your question is not well defined but assuming the reference date is the first row index <code>2019-01-30</code>, you can use <code>df.pct_change(30)</code>. </p>\n"}, {"comments": [{"owner": {"reputation": 938, "user_id": 7648578, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p3zKg.jpg?s=128&g=1", "display_name": "nocibambi", "link": "https://stackoverflow.com/users/7648578/nocibambi"}, "edited": false, "score": 0, "creation_date": 1558986577, "post_id": 54581484, "comment_id": 99270210, "body": "How to apply the log transform on returns less than -1?"}, {"owner": {"reputation": 451, "user_id": 7494844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d147cc95cd88ea9938d7f95dd7d7e32?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Khachatryan", "link": "https://stackoverflow.com/users/7494844/edward-khachatryan"}, "reply_to_user": {"reputation": 938, "user_id": 7648578, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p3zKg.jpg?s=128&g=1", "display_name": "nocibambi", "link": "https://stackoverflow.com/users/7648578/nocibambi"}, "edited": false, "score": 2, "creation_date": 1559320043, "post_id": 54581484, "comment_id": 99395819, "body": "Stock price returns can&#39;t be less than -1: a return of -1 means that the price is exactly 0, and a return less than -1 results a negative price. Generally, you can&#39;t log transform negative numbers and a common technique to ensure all the values are positive is adding a constant to them."}], "tags": [], "owner": {"reputation": 451, "user_id": 7494844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d147cc95cd88ea9938d7f95dd7d7e32?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Khachatryan", "link": "https://stackoverflow.com/users/7494844/edward-khachatryan"}, "is_accepted": true, "score": 8, "last_activity_date": 1549570158, "creation_date": 1549570158, "answer_id": 54581484, "question_id": 54564253, "link": "https://stackoverflow.com/questions/54564253/how-to-calculate-the-cumulative-product-of-a-rolling-window-in-pandas/54581484#54581484", "title": "How to calculate the cumulative product of a rolling window in Pandas?", "body": "<p>For some reason <code>pandas</code> <code>rolling</code> objects don't have a <code>prod</code> method, but you can apply <code>NumPy</code> <code>prod</code> to them. Also, you need to add <code>1</code> to your <code>DataFrame</code> and later subtract it, so the most straightforward one-liner approach would be</p>\n\n<pre><code>import numpy as np\n...\ncumulative_returns_df = (df+1).rolling(5).apply(np.prod)-1\n</code></pre>\n\n<p>Arguably, it's more computationally efficient and numerically stable to log-transform, calculate rolling sums and then reverse the transformation:</p>\n\n<pre><code>cumulative_returns_df = np.exp(np.log(df+1).rolling(5).sum())-1\n</code></pre>\n"}], "owner": {"reputation": 1500, "user_id": 1715271, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1e45624e383f9144014999dfb03f1b13?s=128&d=identicon&r=PG", "display_name": "mpjan", "link": "https://stackoverflow.com/users/1715271/mpjan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2959, "favorite_count": 2, "accepted_answer_id": 54581484, "answer_count": 2, "score": 2, "last_activity_date": 1567477021, "creation_date": 1549496480, "last_edit_date": 1549551487, "question_id": 54564253, "link": "https://stackoverflow.com/questions/54564253/how-to-calculate-the-cumulative-product-of-a-rolling-window-in-pandas", "title": "How to calculate the cumulative product of a rolling window in Pandas?", "body": "<p>I have a DataFrame, <code>df</code> with daily stock returns as such:</p>\n\n<pre><code>Date         Stock A    Stock B     Stock C\n2018-12-26  -0.018207   0.083554   -0.006546\n2018-12-27   0.004223   0.000698    0.003806\n2018-12-28   0.024847  -0.008717    0.028399\n2018-12-31   0.000000   0.010904    0.000000\n2019-01-02   0.036554   0.002436    0.035557\n2019-01-03   0.043541  -0.028462    0.006065\n2019-01-04  -0.036207   0.070025    0.003025\n2019-01-07  -0.005367   0.046411   -0.001546\n2019-01-08   0.002878   0.014678    0.003631\n2019-01-09   0.004663   0.014151    0.017179\n2019-01-10   0.009282   0.026047    0.002062\n2019-01-11   0.021224  -0.006649   -0.001578\n2019-01-14   0.022168  -0.015211    0.008713\n2019-01-15  -0.009827   0.020080   -0.004424\n2019-01-16   0.021561  -0.016657    0.003583\n2019-01-17   0.005025   0.011703    0.010149\n2019-01-18   0.013333   0.012785    0.007824\n2019-01-21   0.003289   0.000000   -0.000905\n2019-01-22  -0.023934  -0.030658   -0.009447\n2019-01-23   0.031911  -0.039690    0.015299\n2019-01-24   0.030273   0.020665    0.011589\n2019-01-25   0.000000   0.040810    0.000000\n2019-01-28   0.018325   0.006991   -0.022861\n2019-01-29  -0.021098  -0.044974    0.002043\n2019-01-30  -0.002536   0.019595    0.014189\n2019-01-31   0.000000   0.040298    0.004103\n2019-02-01   0.014935  -0.011025    0.004795\n2019-02-04   0.010332   0.022597    0.007439\n2019-02-05   0.022002   0.012669   -0.002820\n2019-02-06  -0.023651  -0.006110   -0.037381\n</code></pre>\n\n<p>How do I compute the cumulative returns in a rolling window on each stock?</p>\n\n<p>For example, if the rolling window is of 5 days:</p>\n\n<ul>\n<li>The first element in the cumulative returns Series for <code>Stock A</code> should be <code>(1 + df.loc[\"2018-12-26\":\"2019-01-02\", \"Stock A\"]).cumprod() - 1</code> which computes to <code>(1 + -0.018207)*(1 + 0.004223)*(1 + 0.024847)*(1 + 0.000000)*(1 + 0.036554) - 1</code> or <code>0.047372</code>.</li>\n<li>The second element should be <code>(1 + df.loc[\"2018-12-27\":\"2019-01-03\", \"Stock A\"]).cumprod() - 1</code> which computes to <code>(1 + 0.004223)*(1 + 0.024847)*(1 + 0.000000)*(1 + 0.036554)*(1 + 0.043541) - 1</code> or <code>0.113245</code>.</li>\n<li>And so on...</li>\n</ul>\n\n<p>Gaps in the <code>Date</code> index (like for weekends, for example) don't matter, the rolling window should only take into consideration the dates included in the index.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 1484, "user_id": 7410383, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211966226936527/picture?type=large", "display_name": "Edeki Okoh", "link": "https://stackoverflow.com/users/7410383/edeki-okoh"}, "edited": false, "score": 0, "creation_date": 1549497039, "post_id": 54564251, "comment_id": 95927478, "body": "Will the value always be (index - 1)*10? Or is there some other convention you are using to interpolate those values?"}, {"owner": {"reputation": 3891, "user_id": 4585713, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0163e6ba41d9dfd2c9d13c528c87e1f5?s=128&d=identicon&r=PG&f=1", "display_name": "PMende", "link": "https://stackoverflow.com/users/4585713/pmende"}, "edited": false, "score": 0, "creation_date": 1549497530, "post_id": 54564251, "comment_id": 95927617, "body": "is <code>posR</code> meant to be unique? Also, why does the row with <code>posR=31.0, posF=20</code> turn into a row with <code>posR=31.0, posF=**30**</code>?"}, {"owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "edited": false, "score": 0, "creation_date": 1549503768, "post_id": 54564251, "comment_id": 95928965, "body": "Sorry, the values will not always be base10, they are positions output by another program that point to text in a long string. Pmende posR is missing a value between 20 and 30 so the value of 20 is inserted and 31 is shifted down."}], "answers": [{"tags": [], "owner": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "is_accepted": true, "score": 1, "last_activity_date": 1549522931, "creation_date": 1549522931, "answer_id": 54567919, "question_id": 54564251, "link": "https://stackoverflow.com/questions/54564251/python-pandas-retrieving-values-in-one-column-while-they-are-less-than-the-value/54567919#54567919", "title": "Python Pandas-retrieving values in one column while they are less than the value of a second column", "body": "<p>My first thought was to retrieve the new indices for the entries in <code>posR</code> by interpolating with <code>posF</code> and then put the values to their new positions - but as you want to have <code>81</code> one row later than here, I'm afraid this is not exactly what you're searching for and I still don't really get the logic behind your task.<br>\nHowever, perhaps this is a starting point, let's see...</p>\n\n<p>This approach would work like the following:</p>\n\n<p>Retrieve the new index positions of the values in <code>posR</code> according to their order in <code>posF</code>:</p>\n\n<pre><code>import numpy as np\nidx = np.interp(df.posR, df.posF, df.index).round()\n</code></pre>\n\n<p>Get rid of <code>nan</code> entries and cast to int:    </p>\n\n<pre><code>idx = idx[np.isfinite(idx)].astype(int)\n</code></pre>\n\n<p>Create a new column by copying <code>posF</code> in the first step, and set <code>newrfreq</code> to <code>nan</code> respectively:</p>\n\n<pre><code>df['newposR'] = df.posF\ndf['newrfreq'] = np.nan\n</code></pre>\n\n<p>Then overwrite with the values from <code>posR</code> and <code>rfreq</code>, but now at the updated positions:</p>\n\n<pre><code>df.loc[idx, 'newposR'] = df.posR[:len(idx)].values\ndf.loc[idx, 'newrfreq'] = df.rfreq[:len(idx)].values\n</code></pre>\n\n<p>Result:    </p>\n\n<pre><code>   posF  ffreq  posR  rfreq  newposR  newrfreq\n0    10   0.50  11.0   0.08     11.0      0.08\n1    20   0.20  31.0   0.90     20.0       NaN\n2    30   0.03  41.0   0.70     31.0      0.90\n3    40   0.72  51.0   0.08     41.0      0.70\n4    50   0.09  81.0   0.78     51.0      0.08\n5    60   0.09   NaN    NaN     60.0       NaN\n6    70   0.01   NaN    NaN     70.0       NaN\n7    80   0.09   NaN    NaN     81.0      0.78\n8    90   0.08   NaN    NaN     90.0       NaN\n9   100   0.02   NaN    NaN    100.0       NaN\n</code></pre>\n"}], "owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 54567919, "answer_count": 1, "score": 1, "last_activity_date": 1549522931, "creation_date": 1549496466, "question_id": 54564251, "link": "https://stackoverflow.com/questions/54564251/python-pandas-retrieving-values-in-one-column-while-they-are-less-than-the-value", "title": "Python Pandas-retrieving values in one column while they are less than the value of a second column", "body": "<p>Suppose I have a df that looks like this:</p>\n\n<pre><code>   posF  ffreq  posR  rfreq\n0    10   0.50  11.0   0.08\n1    20   0.20  31.0   0.90\n2    30   0.03  41.0   0.70\n3    40   0.72  51.0   0.08\n4    50   0.09  81.0   0.78\n5    60   0.09   NaN    NaN\n6    70   0.01   NaN    NaN\n7    80   0.09   NaN    NaN\n8    90   0.08   NaN    NaN\n9   100   0.02   NaN    NaN\n</code></pre>\n\n<p>In the posR column, we see that it jumps from 11 to 31, and there is not a value in the \"20's\". I want to insert a value to fill that space, which would essentially just be the <code>posF</code> value, and <code>NA</code>, so my resulting df would look like this:</p>\n\n<pre><code>   posF  ffreq  posR  rfreq\n0    10   0.50  11.0   0.08\n1    20   0.20  20     NaN\n2    30   0.03  31.0   0.90\n3    40   0.72  41.0   0.70\n4    50   0.09  50     NaN\n5    60   0.09  60     NaN\n6    70   0.01  70     NaN\n7    80   0.09  80     NaN\n8    90   0.08  81.0   0.78\n9   100   0.02  100    NaN\n</code></pre>\n\n<p>So I want to fill the NaN values in the position with the values from <code>posF</code> that are in between the values in <code>posR</code>.</p>\n\n<p>What I have tried to do is just make a dummy list and add values to the list based on if they were less than a (I see the flaw here but I don't know how to fix it).  </p>\n\n<pre><code>insert_rows = []\nfor x in df['posF']:\n    for a,b in zip(df['posR'], df['rfreq']):\n        if x&lt;a:\n            insert_rows.append([x, 'NA'])\nprint(len(insert_rows))#21, should be 5\n</code></pre>\n\n<p>I realize that it is appending x several times until it reaches the condition of being >a.</p>\n\n<p>After this I will just create a new df and add these values to the original 2 columns so they are the same length.</p>\n\n<p>If you can think of a better title, feel free to edit.</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "is_accepted": false, "score": 1, "last_activity_date": 1549496535, "creation_date": 1549496535, "answer_id": 54564258, "question_id": 54564179, "link": "https://stackoverflow.com/questions/54564179/how-to-iterate-through-matrix-array-to-count-the-number-of-similar-elements-surr/54564258#54564258", "title": "how to iterate through matrix array to count the number of similar elements surrounding a particular element inside the matrix", "body": "<p>Your code should be</p>\n\n<pre><code>result[i][j] += matrix[i+x][j+y]\n</code></pre>\n\n<p>(note <code>+=</code> instead of <code>=</code>)</p>\n"}, {"tags": [], "owner": {"reputation": 11552, "user_id": 8112138, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3b1ddf31abbf37d5fe71ad387e2772c?s=128&d=identicon&r=PG&f=1", "display_name": "Primusa", "link": "https://stackoverflow.com/users/8112138/primusa"}, "is_accepted": true, "score": 2, "last_activity_date": 1549496572, "creation_date": 1549496572, "answer_id": 54564262, "question_id": 54564179, "link": "https://stackoverflow.com/questions/54564179/how-to-iterate-through-matrix-array-to-count-the-number-of-similar-elements-surr/54564262#54564262", "title": "how to iterate through matrix array to count the number of similar elements surrounding a particular element inside the matrix", "body": "<p>Two issues. The first happens in your for loop. You don't want to count the current index and only want to sample it's neighbors, so you want to throw out cases where <code>x == y == 0</code>. Do this by adding an if statement like <code>if x == y == 0: continue</code></p>\n\n<p>The second issue is that you're setting the value not incrementing it. This here: <code>result[i][j]= matrix[i+x][j+y]</code> only sets the value to <code>True</code> and doesn't increase it when further neighbors are detected. Instead add like: <code>result[i][j] += matrix[i+x][j+y]</code></p>\n\n<p>With both these fixes you get the correct output:</p>\n\n<pre><code>true = True\nfalse = False\n\nmatrix = [[true, false, false],\n      [false, true, false],\n      [false, false, false]]\n\n\nresult = [[0 for x in range(len(matrix[0]))] for y in range(len(matrix))]\nfor i in range(len(matrix)):\n    for j in range(len(matrix[0])):\n        for x in [1,0,-1]:\n            for y in [1,0,-1]:\n                if x == y == 0: continue\n                if 0&lt;=i+x&lt;len(matrix) and 0&lt;=j+y&lt;len(matrix[0]):\n                    result[i][j] += matrix[i+x][j+y]\nfor i in result:\n    print(i)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[1, 2, 1]\n[2, 1, 1]\n[1, 1, 1]\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 11014413, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k9yU8Z_NoRQ/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPDd7_mXV11H-F9F2ecu_ZTMqmiJg/mo/photo.jpg?sz=128", "display_name": "Puneeth Gopi", "link": "https://stackoverflow.com/users/11014413/puneeth-gopi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 54564262, "answer_count": 2, "score": 6, "last_activity_date": 1549496572, "creation_date": 1549495909, "question_id": 54564179, "link": "https://stackoverflow.com/questions/54564179/how-to-iterate-through-matrix-array-to-count-the-number-of-similar-elements-surr", "title": "how to iterate through matrix array to count the number of similar elements surrounding a particular element inside the matrix", "body": "<pre><code>matrix = [[true, false, false],\n      [false, true, false],\n      [false, false, false]]\n</code></pre>\n\n<p>the [1][2]and[2][1] both have 2 true's surrounding them. so the count for that element place is 2. The remaining places are 1, since they are surrounded by 1 element.</p>\n\n<pre><code>result = [[0 for x in range(len(matrix[0]))] for y in range(len(matrix))]\nfor i in range(len(matrix)):\n    for j in range(len(matrix[0])):\n        for x in [1,0,-1]:\n            for y in [1,0,-1]:\n                if 0&lt;=i+x&lt;len(matrix) and 0&lt;=j+y&lt;len(matrix[0]):\n                    result[i][j]= matrix[i+x][j+y]\nreturn result\n</code></pre>\n\n<p>This is the expected output </p>\n\n<pre><code>   output=  [[1, 2, 1],\n[2, 1, 1],\n[1, 1, 1]]\n</code></pre>\n\n<p>But i am getting the output as </p>\n\n<pre><code> [[true,true,false], \n [true,true,false], \n [false,false,true]]\n</code></pre>\n"}, {"tags": ["python", "excel", "pandas", "openpyxl"], "comments": [{"owner": {"reputation": 117, "user_id": 5875357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d0622427985402bc6df2aa36a69e0ba?s=128&d=identicon&r=PG&f=1", "display_name": "Anoplexian", "link": "https://stackoverflow.com/users/5875357/anoplexian"}, "edited": false, "score": 0, "creation_date": 1549496988, "post_id": 54564149, "comment_id": 95927466, "body": "Is it absolutely necessary to use Python for this? You could do this with an Excel formula pretty easily (Vlookup, Index/Match, etc.)"}, {"owner": {"reputation": 95, "user_id": 7723242, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d0bf8ddbef8709402f103b44596f841c?s=128&d=identicon&r=PG&f=1", "display_name": "Philalethes", "link": "https://stackoverflow.com/users/7723242/philalethes"}, "reply_to_user": {"reputation": 117, "user_id": 5875357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d0622427985402bc6df2aa36a69e0ba?s=128&d=identicon&r=PG&f=1", "display_name": "Anoplexian", "link": "https://stackoverflow.com/users/5875357/anoplexian"}, "edited": false, "score": 0, "creation_date": 1549497459, "post_id": 54564149, "comment_id": 95927601, "body": "I guess I didn&#39;t even consider this.  I will need to look into this next.  Thaks for the suggestion."}, {"owner": {"reputation": 117, "user_id": 5875357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d0622427985402bc6df2aa36a69e0ba?s=128&d=identicon&r=PG&f=1", "display_name": "Anoplexian", "link": "https://stackoverflow.com/users/5875357/anoplexian"}, "edited": false, "score": 0, "creation_date": 1549497663, "post_id": 54564149, "comment_id": 95927656, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/10193978/how-to-compare-two-columns-in-excel-from-different-sheets-and-copy-values-from\">How to compare two columns in Excel (from different sheets) and copy values from a corresponding column if the first two columns match?</a>"}], "owner": {"reputation": 95, "user_id": 7723242, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d0bf8ddbef8709402f103b44596f841c?s=128&d=identicon&r=PG&f=1", "display_name": "Philalethes", "link": "https://stackoverflow.com/users/7723242/philalethes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 460, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1549496892, "creation_date": 1549495725, "last_edit_date": 1549496892, "question_id": 54564149, "link": "https://stackoverflow.com/questions/54564149/how-to-search-columns-in-two-workbooks-for-matching-value-and-write-a-value-from", "title": "How to search columns in two workbooks for matching value and write a value from different column from same matching row to one of workbooks?", "body": "<p>I would like to to be able to open two Excel workbooks and compare a column from each that may have matching values.  Upon discovering a matching value, I would like to grab another value from the same row in workbook 1 and write it to the same matching value row in workbook 2.</p>\n\n<p>For my output file, I am simply trying to add one column of data that will match up where the values matched in the other columns I am comparing between the two workbooks.</p>\n\n<p>In the example below, I would like to compare Column A between the two workbooks.  Upon finding a matching value, I would like to write the value in the same row from column C in workbook 1 to Column C in Workbook 2.</p>\n\n<pre><code>Input workbook 1:\nA      B    C\ndog    1    red\ncat    2    green\nbird   3    blue\n\nInput workbook 2:\nA      B       C     D       E\npig    house         stuff   stuff\ncat    car           stuff   stuff\nhorse  train         stuff   stuff\n\nOutput Workbook 2\nA       B      C       D       E\npig     house          stuff  stuff\ncat     car    green   stuff  stuff\nhorse   trian          stuff  stuff\n</code></pre>\n\n<p>I have tried many iterations of code with openpyxl and pandas, and have not had any success.  I feel like I was closest using merge, join, concat in pandas, but the values never ended up printing anywhere that made sense.</p>\n\n<p>For example, things like this ended up copying data from one workbook to the other, but it didn't match up anywhere it was supposed to.</p>\n\n<pre><code>df2 = df1.merge(df2, 'A', 'C')\ndf2 = pd.merge(df2,df1, on=['A'], how='left')\ndf2 = pd.concat([df1.set_index('A') for d in [df1, df2]], axis=1).reset_index()\n</code></pre>\n\n<p>If it helps, my actual data has several hundred rows in each workbook.  There are only two columns that actually match by header name.  One is the column I am comparing, and the other is the data I am trying to write from one workbook to other.  </p>\n\n<p>I am open to using any method that can easily compare two excel workbooks and write data from one to other based on matching values in specified columns.\nAny help would be greatly appreciated.</p>\n"}, {"tags": ["python", "pandas", "numpy"], "comments": [{"owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 1, "creation_date": 1549496126, "post_id": 54564110, "comment_id": 95927227, "body": "What does the sum-product function does? Do you have a window of size 8?"}, {"owner": {"reputation": 99, "user_id": 11015000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2f28fa082903798f06ada12f1e09274?s=128&d=identicon&r=PG&f=1", "display_name": "user11015000", "link": "https://stackoverflow.com/users/11015000/user11015000"}, "reply_to_user": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 0, "creation_date": 1549496246, "post_id": 54564110, "comment_id": 95927269, "body": "<code>SUMPRODUCT(B2:B8,E2:E8)</code> <code>=</code> <code>B2*E2 + ... + B8*E8</code> And yes I have a window is size 8"}], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 11015000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2f28fa082903798f06ada12f1e09274?s=128&d=identicon&r=PG&f=1", "display_name": "user11015000", "link": "https://stackoverflow.com/users/11015000/user11015000"}, "edited": false, "score": 0, "creation_date": 1549498393, "post_id": 54564299, "comment_id": 95927832, "body": "That works great thank you. I have a few follow up questions: Firstly how do I adjust the amount of decimal points it rounds the answer to, and secondly as seen in my question is there a way to do <code>sumproduct &#47; sum</code> ? Thanks!"}, {"owner": {"reputation": 786, "user_id": 7604434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5724873872a17fd0b8e0bf25b9a2acdf?s=128&d=identicon&r=PG&f=1", "display_name": "Crivella", "link": "https://stackoverflow.com/users/7604434/crivella"}, "reply_to_user": {"reputation": 99, "user_id": 11015000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2f28fa082903798f06ada12f1e09274?s=128&d=identicon&r=PG&f=1", "display_name": "user11015000", "link": "https://stackoverflow.com/users/11015000/user11015000"}, "edited": false, "score": 0, "creation_date": 1549498610, "post_id": 54564299, "comment_id": 95927902, "body": "I think it is only a warning which in my case does not seems to be affecting the data. I&#39;ve edited the answer to do an averaged weight and to take the new columns as float"}, {"owner": {"reputation": 99, "user_id": 11015000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2f28fa082903798f06ada12f1e09274?s=128&d=identicon&r=PG&f=1", "display_name": "user11015000", "link": "https://stackoverflow.com/users/11015000/user11015000"}, "edited": false, "score": 0, "creation_date": 1549498872, "post_id": 54564299, "comment_id": 95927963, "body": "Thanks, getting this error now: <code>ValueError: Length of values does not match length of index </code> from this line: <code>df[e] = np.empty(max_size)</code>"}, {"owner": {"reputation": 786, "user_id": 7604434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5724873872a17fd0b8e0bf25b9a2acdf?s=128&d=identicon&r=PG&f=1", "display_name": "Crivella", "link": "https://stackoverflow.com/users/7604434/crivella"}, "reply_to_user": {"reputation": 99, "user_id": 11015000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2f28fa082903798f06ada12f1e09274?s=128&d=identicon&r=PG&f=1", "display_name": "user11015000", "link": "https://stackoverflow.com/users/11015000/user11015000"}, "edited": false, "score": 0, "creation_date": 1549499062, "post_id": 54564299, "comment_id": 95928006, "body": "Probably the shape of your dataframe is different I&#39;ve updated the code to automatically take the data form your shape. One note, the last 8 rows will be left with random empty number as i didn&#39;t know what behavior you wanted"}], "tags": [], "owner": {"reputation": 786, "user_id": 7604434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5724873872a17fd0b8e0bf25b9a2acdf?s=128&d=identicon&r=PG&f=1", "display_name": "Crivella", "link": "https://stackoverflow.com/users/7604434/crivella"}, "is_accepted": true, "score": 1, "last_activity_date": 1549499043, "last_edit_date": 1549499043, "creation_date": 1549496845, "answer_id": 54564299, "question_id": 54564110, "link": "https://stackoverflow.com/questions/54564110/creating-a-new-sumproduct-column-in-time-series-data/54564299#54564299", "title": "Creating a new sumproduct column in time series data", "body": "<p>This should do the trick</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\nsize = 8\n\n#This is to generate a random set, you can use your data instead of this\ndf = pd.DataFrame(\n    data=np.random.randint(1,10,(20,5)),\n    index=np.arange(20),\n    columns=['Time', 'GenA', 'GenB', 'GenC', 'Price']\n    )\n\nmax_size = df.shape[0]\n\nfor a in ['A','B','C']:\n    e = 'Gen' + a + '_W'\n    df[e] = np.empty(max_size)\n    for i in range(max_size-size):\n        df[e][i] = np.average(df['Price'][i:i+size], weights=df['Gen'+a][i:i+size])\n</code></pre>\n\n<p>Maybe there is a more 'pandas native' way of doing this but i'm used to the numpy way. Hope it helps anyway</p>\n"}], "owner": {"reputation": 99, "user_id": 11015000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2f28fa082903798f06ada12f1e09274?s=128&d=identicon&r=PG&f=1", "display_name": "user11015000", "link": "https://stackoverflow.com/users/11015000/user11015000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 54564299, "answer_count": 1, "score": 1, "last_activity_date": 1560014567, "creation_date": 1549495527, "last_edit_date": 1560014567, "question_id": 54564110, "link": "https://stackoverflow.com/questions/54564110/creating-a-new-sumproduct-column-in-time-series-data", "title": "Creating a new sumproduct column in time series data", "body": "<p>I am looking for the python equivalent to perform a certain calculation on a couple of columns of data.</p>\n\n<p>This is what the head of my data set looks like.</p>\n\n<pre><code>          Time  GenA  GenB  GenC  Price\n0    1/01/2011   702   367  1355     58\n1    2/01/2011   742     0  1013     59\n2    3/01/2011   763   322   887     43\n3    4/01/2011   558   356   851     50\n4    5/01/2011   519   358   677     32\n5    6/01/2011   697   154   352     35\n6    7/01/2011   782     2   999     52\n7    8/01/2011   579    10   493     47\n8    9/01/2011   678   313   931     63\n9   10/01/2011   595   314   434     34\n10  11/01/2011   748   326  1338     72\n11  12/01/2011   782   229   503     36\n12  13/01/2011   645     3   410     53\n13  14/01/2011   800    53   365     40\n14  15/01/2011   639    11   123     62\n15  16/01/2011   749    75   629     53\n16  17/01/2011   625   223   537     38\n17  18/01/2011   529    10    47     45\n18  19/01/2011   687   192   542     55\n19  20/01/2011   727    85   122     31\n20  21/01/2011   674   183  1067     67\n</code></pre>\n\n<p>I want to add three columns for the weighted price for <code>genA, genB &amp; genC</code>, I can do this in excel as follows:</p>\n\n<p><a href=\"https://i.stack.imgur.com/7MbE7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7MbE7.png\" alt=\"excel\"></a></p>\n\n<p>Is there any way of doing this in python? I have quite a large data set so it would be great if it is possible.</p>\n"}, {"tags": ["python", "audio", "pygame"], "answers": [{"comments": [{"owner": {"reputation": 5709, "user_id": 640694, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a15bc522697439dbdf2e58e4d98ee22b?s=128&d=identicon&r=PG", "display_name": "Passiday", "link": "https://stackoverflow.com/users/640694/passiday"}, "edited": false, "score": 0, "creation_date": 1558383616, "post_id": 56210122, "comment_id": 99075613, "body": "I am now avoiding using mixer.music at all. Apparently that&#39;s what messes up the memory. If the sounds are short (not sure if compression level matters), then most needs can be satisfied with mixer.Sound objects."}], "tags": [], "owner": {"reputation": 11, "user_id": 10889458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a24601327b934bd34023851b2193c022?s=128&d=identicon&r=PG", "display_name": "Rafael", "link": "https://stackoverflow.com/users/10889458/rafael"}, "is_accepted": false, "score": 1, "last_activity_date": 1558290435, "last_edit_date": 1558290435, "creation_date": 1558285404, "answer_id": 56210122, "question_id": 54564107, "link": "https://stackoverflow.com/questions/54564107/pygame-mixer-music-ogg-playback-distorted-after-long-period-of-idling/56210122#56210122", "title": "pygame mixer music ogg playback distorted after long period of idling", "body": "<p>I had the same issue and fixed it using a thread that, when the program stops playing music it quits the mixer and init it again</p>\n\n<pre><code>def player_handler(self):\n    if self.player.mixer.music.get_busy() == False: #music ended\n        self.player.mixer.quit()            \n        self.player.mixer.init()\n</code></pre>\n\n<p>My handler runs every second and that fixed for me. Not very elegant though...</p>\n"}], "owner": {"reputation": 5709, "user_id": 640694, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a15bc522697439dbdf2e58e4d98ee22b?s=128&d=identicon&r=PG", "display_name": "Passiday", "link": "https://stackoverflow.com/users/640694/passiday"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 370, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1558290435, "creation_date": 1549495516, "last_edit_date": 1549806694, "question_id": 54564107, "link": "https://stackoverflow.com/questions/54564107/pygame-mixer-music-ogg-playback-distorted-after-long-period-of-idling", "title": "pygame mixer music ogg playback distorted after long period of idling", "body": "<p>I have a python program that runs on the device (Raspberry Pi Zero W, Raspbian Stretch Lite), and when user pushes certain button, plays an audio file. To do this, I use pygame mixer.music.play() function. One command starts looped playback, another command stops it. And this all works wonderfully without any problem, when the program has been just launched . However, if the system is left running for many hours (or days), something  happens to the sound playback: it does not start immediately, and after certain pause a weird, choppy playback starts: apparently a tiny piece (like 1/8th or 1/10th of a second) of the original sound is rapidly looped, and that tiny piece somewhat changes with time. I have experienced something like this a very long time ago, when DOS game is hindered due to floppy disk reading, and the music playback on Sound Blaster get's stuck into tiny loop of whatever was the last bit of audio data left in the buffer.</p>\n\n<p>I tried to replicate the problem in plain Python console:</p>\n\n<pre><code>from pygame import mixer\nmixer.init()\nmixer.music.load('file.ogg')\nmixer.music.play(-1) # Normal playback\nmixer.music.stop()\n# Much later\nmixer.music.play(-1) # Glitchy playback\n# Then stop\nmixer.music.stop() # Even though the command returns immediately, the audio stops only after some time\n</code></pre>\n\n<p>The code initializes the pygame mixer <code>mixer.init()</code> once at the beginning, and reuses the same mixer object all the time. I checked if things would be different if the mixer object would be re-initialized:</p>\n\n<pre><code>mixer.quit()\nmixer.init()\n</code></pre>\n\n<p>And, indeed, that fixes the problem, and the playback is normal again. Interestingly, it took quite long time for the <code>mixer.quit()</code> call to return. Apparently, the mixer destructor had a lot of cleaning to do. I was hoping I could initialize the mixer just once when the program is launched, but now it seems there's a problem with this approach.</p>\n\n<p>Is there any way a single mixer object could be kept live for long time?</p>\n"}, {"tags": ["python", "json", "pandas", "lda", "topic-modeling"], "comments": [{"owner": {"reputation": 2335, "user_id": 6657098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/571d38df0ecf7797079379672cb75612?s=128&d=identicon&r=PG&f=1", "display_name": "cullzie", "link": "https://stackoverflow.com/users/6657098/cullzie"}, "edited": false, "score": 0, "creation_date": 1549495551, "post_id": 54564068, "comment_id": 95927063, "body": "Can you give a sample of what your json looks like please?"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1549495573, "post_id": 54564068, "comment_id": 95927071, "body": "It seems like the file is empty"}, {"owner": {"reputation": 11, "user_id": 7276662, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SBXF48kDoR8/AAAAAAAAAAI/AAAAAAAACHo/TgwiXpRs4wU/photo.jpg?sz=128", "display_name": "Hasan", "link": "https://stackoverflow.com/users/7276662/hasan"}, "edited": false, "score": 0, "creation_date": 1549538080, "post_id": 54564068, "comment_id": 95941739, "body": "actually, I was doing something wrong that in my file there was no attribute called target_names.  now the code looks like :  <code>df = pd.read_json(&quot;E:\\\\aug17.json&quot;) print(df.content.unique()) df.head()</code>  got the desired output- Thanks"}], "owner": {"reputation": 11, "user_id": 7276662, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SBXF48kDoR8/AAAAAAAAAAI/AAAAAAAACHo/TgwiXpRs4wU/photo.jpg?sz=128", "display_name": "Hasan", "link": "https://stackoverflow.com/users/7276662/hasan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1549495300, "creation_date": 1549495300, "question_id": 54564068, "link": "https://stackoverflow.com/questions/54564068/reading-a-json-file-error-in-pandas-for-text-extraction", "title": "Reading a JSON file error in Pandas for text extraction", "body": "<p>Doing topic modeling to extract the hidden topic from JSON file using LDA where I am getting the following error</p>\n\n<pre><code>ValueError                                Traceback (most recent call last)\n&lt;ipython-input-11-ff05500d50e8&gt; in &lt;module&gt;()\n----&gt; 1 df = pd.read_json(\"E:\\Andias-Alam\\aug17.json\")\n      2 print(df.target_names.unique())\n      3 df.head()\n\nC:\\Program Files\\Anaconda3\\lib\\site-packages\\pandas\\io\\json.py in read_json(path_or_buf, orient, typ, dtype, convert_axes, convert_dates, keep_default_dates, numpy, precise_float, date_unit)\n\nC:\\Program Files\\Anaconda3\\lib\\site-packages\\pandas\\io\\json.py in parse(self)\n\nC:\\Program Files\\Anaconda3\\lib\\site-packages\\pandas\\io\\json.py in _parse_no_numpy(self)\n\nValueError: Expected object or value\n</code></pre>\n\n<p>while importing the data using pandas.read_json I am facing the error</p>\n\n<pre><code>df = pd.read_json(\"E:\\Andias-Alam\\aug17.json\")\nprint(df.target_names.unique())\ndf.head() \n</code></pre>\n"}, {"tags": ["python", "python-3.x", "syntax"], "comments": [{"owner": {"reputation": 6893, "user_id": 5997596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46e957a1791225fee518cc14ff5553a5?s=128&d=identicon&r=PG", "display_name": "Azat Ibrakov", "link": "https://stackoverflow.com/users/5997596/azat-ibrakov"}, "edited": false, "score": 2, "creation_date": 1549495507, "post_id": 54564063, "comment_id": 95927049, "body": "you have cyclic dependency, which looks like a poor design to me"}, {"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "edited": false, "score": 0, "creation_date": 1549495651, "post_id": 54564063, "comment_id": 95927092, "body": "In what way is the working code &quot;not very elegant&quot;? Looks fine to me."}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 1, "creation_date": 1549526425, "post_id": 54564063, "comment_id": 95935326, "body": "I would probably get ActionRunner to instantiate the FileSupport in is own init, passing self as the parameter."}], "owner": {"reputation": 346, "user_id": 2117288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eebf83fef8b0802dd87053f6a2209e2?s=128&d=identicon&r=PG", "display_name": "Brad Root", "link": "https://stackoverflow.com/users/2117288/brad-root"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1549495254, "creation_date": 1549495254, "question_id": 54564063, "link": "https://stackoverflow.com/questions/54564063/can-you-reference-an-instance-of-class-inside-its-own-initializer", "title": "Can you reference an instance of class inside its own initializer?", "body": "<p>I have a class that is being initialized with another class as one of its args, and that class needs to be initialized with a reference to the class being initialized. I've found a method that works, but it's not very elegant. Wondering if there's another way to handle this case?</p>\n\n<p><strong>Example Working Code</strong></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>runner = ActionRunner(\n    file_support=None\n)\nrunner.file_support = FileSupport(\n    action_runner=runner\n)\n</code></pre>\n\n<p><strong>Example Idea (Non-working)</strong></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>runner = ActionRunner(\n    file_support=FileSupport(\n        action_runner=runner\n    )\n)\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 1, "creation_date": 1549494639, "post_id": 54563957, "comment_id": 95926787, "body": "What have you tried and where are you stuck? Show your code."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1549494677, "post_id": 54563957, "comment_id": 95926791, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation, as suggested when you created this account.  <a href=\"http://stackoverflow.com/help/on-topic\">On topic</a>, <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask</a>, and <a href=\"https://codeblog.jonskeet.uk/2010/08/29/writing-the-perfect-question/\" rel=\"nofollow noreferrer\">... the perfect question</a> apply here. StackOverflow is not a design, coding, research, or tutorial resource. Until you have a demonstrable problem, you do not have a Stack Overflow posting."}, {"owner": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "edited": false, "score": 0, "creation_date": 1549494683, "post_id": 54563957, "comment_id": 95926794, "body": "&quot;the actuall value which needs to be submitted for every different run&quot; What values? What do you actually need help with?"}, {"owner": {"reputation": 51, "user_id": 9243414, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oWNf7OUNlXQ/AAAAAAAAAAI/AAAAAAAAA2Q/kEUZBmttwTE/photo.jpg?sz=128", "display_name": "kaushik km", "link": "https://stackoverflow.com/users/9243414/kaushik-km"}, "edited": false, "score": 0, "creation_date": 1549494865, "post_id": 54563957, "comment_id": 95926851, "body": "i am reading a file and getting the names for the servers and storing in the variable with comma sapeated values. now i want to invoke the above command and in place of variable i want all those server names to be submitted while invoking the command"}, {"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1549494989, "post_id": 54563957, "comment_id": 95926882, "body": "You should use the <a href=\"https://docs.python.org/3/library/subprocess.html\" rel=\"nofollow noreferrer\">subprocess</a> module and pass the command and its arguments as a list. Then the quotes won&#39;t be much of an issue."}, {"owner": {"reputation": 51, "user_id": 9243414, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oWNf7OUNlXQ/AAAAAAAAAAI/AAAAAAAAA2Q/kEUZBmttwTE/photo.jpg?sz=128", "display_name": "kaushik km", "link": "https://stackoverflow.com/users/9243414/kaushik-km"}, "edited": false, "score": 0, "creation_date": 1549495279, "post_id": 54563957, "comment_id": 95926969, "body": "<code>command = [&quot;msend&quot;, &quot;-n&quot;, &quot;NORD02&quot;, &quot;-a&quot;, &quot;PATROL_EV&quot;, &quot;-b&quot;, &quot;mc_object=&quot;, PA_down_list , &quot;One or more Patrol Agents are down&quot; ] returned_value = subprocess.call(command, shell=True)</code>  here i want the PA_down_list value to be submitted with in single quots"}], "answers": [{"tags": [], "owner": {"reputation": 675, "user_id": 7356109, "user_type": "registered", "profile_image": "https://graph.facebook.com/1288890557800389/picture?type=large", "display_name": "Jose Angel Sanchez", "link": "https://stackoverflow.com/users/7356109/jose-angel-sanchez"}, "is_accepted": false, "score": -1, "last_activity_date": 1549506743, "creation_date": 1549506743, "answer_id": 54565474, "question_id": 54563957, "link": "https://stackoverflow.com/questions/54563957/using-double-and-single-quots-in-calling-a-system-command-using-python/54565474#54565474", "title": "using double and single quots in calling a system command using python", "body": "<pre><code>import os \nos.system(\"msend -v -n CELL -a CLASS -b \\\"slot1= 'variable' \\\" -m \\\"my message\\\"\")\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 9243414, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oWNf7OUNlXQ/AAAAAAAAAAI/AAAAAAAAA2Q/kEUZBmttwTE/photo.jpg?sz=128", "display_name": "kaushik km", "link": "https://stackoverflow.com/users/9243414/kaushik-km"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1549506743, "creation_date": 1549494565, "question_id": 54563957, "link": "https://stackoverflow.com/questions/54563957/using-double-and-single-quots-in-calling-a-system-command-using-python", "title": "using double and single quots in calling a system command using python", "body": "<p>can some one quickly help me to run the below system command using python?</p>\n\n<p>command i want to run:\n(msend -v -n CELL -a CLASS -b \"slot1= 'variable' \" -m \"my message\")</p>\n\n<p>all the single and double quots has to be there. and variable will contain the actuall value which needs to be submitted for every different run.</p>\n\n<p>Thanks in advance,\nKaushik KM</p>\n"}, {"tags": ["python", "pandas", "python-2.7"], "answers": [{"tags": [], "owner": {"reputation": 153, "user_id": 10458864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72bf1bb9dc6a29c468a09bd3d45ff8eb?s=128&d=identicon&r=PG&f=1", "display_name": "ilearn", "link": "https://stackoverflow.com/users/10458864/ilearn"}, "is_accepted": false, "score": 1, "last_activity_date": 1549494798, "creation_date": 1549494798, "answer_id": 54563992, "question_id": 54563954, "link": "https://stackoverflow.com/questions/54563954/how-to-isolate-the-first-value-of-every-multi-index-using-pandas/54563992#54563992", "title": "How to isolate the first value of every multi index using pandas?", "body": "<pre><code>df=df.groupby(['Time'],sort= True).max()\n</code></pre>\n\n<p>Something like this will work and keeps the maximum value - is there a reason that you want to keep the first value? </p>\n"}, {"tags": [], "owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "is_accepted": false, "score": 0, "last_activity_date": 1549503276, "creation_date": 1549503276, "answer_id": 54565094, "question_id": 54563954, "link": "https://stackoverflow.com/questions/54563954/how-to-isolate-the-first-value-of-every-multi-index-using-pandas/54565094#54565094", "title": "How to isolate the first value of every multi index using pandas?", "body": "<p>Slice by negating where the first level of the index is duplicated.</p>\n\n<pre><code>df[~df.index.get_level_values(0).duplicated()]\n</code></pre>\n\n<h3>Sample Data</h3>\n\n<pre><code>import pandas as pd\ndf = pd.DataFrame({'A': list('aaabbbcccdd'), 'B': list('12345672345'),\n                   'C': [1,12,13,14,15,1,16,16,17,2,23]}).set_index(['A', 'B'])\n\n      C\nA B    \na 1   1\n  2  12\n  3  13\nb 4  14\n  5  15\n  6   1\nc 7  16\n  2  16\n  3  17\nd 4   2\n  5  23\n\ndf[~df.index.get_level_values(0).duplicated()]\n\n      C\nA B    \na 1   1\nb 4  14\nc 7  16\nd 4   2\n</code></pre>\n"}], "owner": {"reputation": 716, "user_id": 5487719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c13222ec55741a745468165dd471315?s=128&d=identicon&r=PG&f=1", "display_name": "Zmann3000", "link": "https://stackoverflow.com/users/5487719/zmann3000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1549503276, "creation_date": 1549494533, "question_id": 54563954, "link": "https://stackoverflow.com/questions/54563954/how-to-isolate-the-first-value-of-every-multi-index-using-pandas", "title": "How to isolate the first value of every multi index using pandas?", "body": "<p>If I have a Pandas Dataframe like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/xFuez.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xFuez.png\" alt=\"enter image description here\"></a></p>\n\n<p>How do I isolate each time's first value such that I get a Pandas Dataframe like this:<a href=\"https://i.stack.imgur.com/j3ZiC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/j3ZiC.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "sql", "loops", "pyodbc"], "comments": [{"owner": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "edited": false, "score": 0, "creation_date": 1549496664, "post_id": 54563939, "comment_id": 95927374, "body": "I don&#39;t see how your code can even run since you are assigning the value to <code>sql</code> before the loop in which <code>item</code> is defined so I would expect it to throw &quot;NameError: name &#39;item&#39; is not defined&quot;. Even if it doesn&#39;t throw an error I would expect the value of <code>sql</code> to be the same for each iteration of the loop. You could verify that by simply doing <code>print(sql)</code> immediately before <code>row = cur.execute(sql).fetchall()</code>."}, {"owner": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "edited": false, "score": 0, "creation_date": 1549499889, "post_id": 54563939, "comment_id": 95928166, "body": "Note also that an IN clause with discrete values expects a list of values in parentheses, even if that list only contains one element, e.g., <code>... WHERE columnname IN (123)</code> not <code>... WHERE columnname IN 123</code>"}, {"owner": {"reputation": 23, "user_id": 9795358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a512a900def005ab5052a9c646b7d1f0?s=128&d=identicon&r=PG&f=1", "display_name": "Stephanie", "link": "https://stackoverflow.com/users/9795358/stephanie"}, "reply_to_user": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "edited": false, "score": 0, "creation_date": 1549556178, "post_id": 54563939, "comment_id": 95952795, "body": "@GordThompson - That was my mistake. I try to re-define my variables when I posts questions to make it as clear as possible and I didn&#39;t update one of them.  my for loop under #Make Data Readable for SQL Query should be &#39;item&#39; instead of &#39;info&#39;."}, {"owner": {"reputation": 23, "user_id": 9795358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a512a900def005ab5052a9c646b7d1f0?s=128&d=identicon&r=PG&f=1", "display_name": "Stephanie", "link": "https://stackoverflow.com/users/9795358/stephanie"}, "reply_to_user": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "edited": false, "score": 0, "creation_date": 1549556408, "post_id": 54563939, "comment_id": 95952935, "body": "@GordThompson - Thanks for the print(sql) tip!  This makes it so easy to identify the error.  You&#39;re absolutely right - my error is because right after my IN statement, the array is feeding in the row number (which I don&#39;t want included) followed by the IDs and there&#39;s no formatting (parenthesis, single quotes and comma separators).  If it&#39;s not too much to ask, would you know a way to get python to format a file to make it SQL readable?  Thanks for all your advice!"}, {"owner": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "edited": false, "score": 0, "creation_date": 1549629838, "post_id": 54563939, "comment_id": 95981560, "body": "re: &quot;a way to get python to format a file to make it SQL readable&quot; - Not sure precisely what you mean. Connecting to a CSV or Excel file so you can pull values from it using SQL statements? The Access Database Engine has ODBC drivers for that. Do a bit of searching and ask a new question of you require further assistance."}, {"owner": {"reputation": 23, "user_id": 9795358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a512a900def005ab5052a9c646b7d1f0?s=128&d=identicon&r=PG&f=1", "display_name": "Stephanie", "link": "https://stackoverflow.com/users/9795358/stephanie"}, "reply_to_user": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "edited": false, "score": 0, "creation_date": 1549640412, "post_id": 54563939, "comment_id": 95987644, "body": "@GordThompson - By SQL ready, I mean to have all each element in single quotes and comma separated (excluding the last value) just as they would be if I were working directly in SQL.  I&#39;ll check out the Access Database Engine you recommend and see what I can find.  Thanks so much for all of your input!"}], "owner": {"reputation": 23, "user_id": 9795358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a512a900def005ab5052a9c646b7d1f0?s=128&d=identicon&r=PG&f=1", "display_name": "Stephanie", "link": "https://stackoverflow.com/users/9795358/stephanie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 232, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1549494445, "creation_date": 1549494445, "question_id": 54563939, "link": "https://stackoverflow.com/questions/54563939/iterate-over-array-columns-in-sql-for-loop", "title": "Iterate over Array Columns in SQL For Loop", "body": "<p>I'm trying to use a for loop to iterate over a file that contains my WHERE clause inputs.  I think there is some sort of format change I need to specify, because I'm getting an error after the last row of the first column.  (the same inputs are used for 2 different SQL Table Columns) </p>\n\n<p>I've tried running my inputs as a list, array and file, but nothing seems to be doing the trick.  Any thoughts on how I can fix this in Python? I can tell I'm so close to finally getting it to work!</p>\n\n<pre><code>import numpy as np\nimport pyodbc\ncon = pyodbc.connect('DSN=*;UID=*;PWD=*')\ncur=con.cursor()\n\n#User Inputs:\ndf = pd.read_csv('file.csv')\nlevel1 = 'SQL Column Name 1'\nlevel2 = 'SQL Column Name 2'\n\n#Make Data Readable for SQL Query:\ndata = []\nfor i in df:\n    info = df[i]\n    data.append(info)\n\n#Make SQL Query:\nsql = \"\"\"select count(IDS) from MY_TABLE \nwhere {col1} in {val1} \nor {col2} in    \n{val2}\"\"\".format(col1=level1,val1=item,col2=level2,val2=item)\n\nfor item in data:\n    row = cur.execute(sql).fetchall()\n    counts.append(row)\nprint(counts)\n</code></pre>\n\n<p>I would like for this to run over every column in my CSV file (in this case, there are 8) and return a list of 8 counts that were pulled.  This is the error I'm getting:               </p>\n\n<p>\\'1232671\\']\\'\\nerror<br>\n(\"1232671\" is the value of the last row in my first column)    </p>\n\n<p>^ found \"\\'\" (at char 95) expecting `\\'(\\'\\' (27) (SQLExecDirectW)')</p>\n\n<p>Any help would be much appreciated!  Thank you!</p>\n"}, {"tags": ["python", "pip", "conda"], "comments": [{"owner": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 1, "creation_date": 1549504115, "post_id": 54563932, "comment_id": 95929032, "body": "It will be installed in the environment. See: <a href=\"https://docs.conda.io/projects/conda/en/4.6.1/user-guide/tasks/manage-pkgs.html#installing-non-conda-packages\" rel=\"nofollow noreferrer\">docs.conda.io/projects/conda/en/4.6.1/user-guide/tasks/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 11063709, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Mr8mm0Pfmfo/AAAAAAAAAAI/AAAAAAAAf6s/6nf2YxSBMU4/photo.jpg?sz=128", "display_name": "user_11063709", "link": "https://stackoverflow.com/users/11063709/user-11063709"}, "is_accepted": false, "score": 2, "last_activity_date": 1559934503, "last_edit_date": 1559934503, "creation_date": 1559928692, "answer_id": 56498896, "question_id": 54563932, "link": "https://stackoverflow.com/questions/54563932/does-pip-install-packages-into-my-conda-environment/56498896#56498896", "title": "Does pip install packages into my conda environment?", "body": "<p>Yes, it should be installed in myEnv.</p>\n\n<p>You can use <code>which pip</code> in Linux to check whether your environment's pip is called or the one from outside.</p>\n\n<p>For the pip in your environment, it will be a path similar to <code>&lt;path to anaconda environment&gt;/bin/pip</code>.</p>\n"}], "owner": {"reputation": 8385, "user_id": 697911, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/bbc3caf3ef84b005f839e2392cb4eafd?s=128&d=identicon&r=PG&f=1", "display_name": "user697911", "link": "https://stackoverflow.com/users/697911/user697911"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2064, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1559934503, "creation_date": 1549494397, "last_edit_date": 1550014664, "question_id": 54563932, "link": "https://stackoverflow.com/questions/54563932/does-pip-install-packages-into-my-conda-environment", "title": "Does pip install packages into my conda environment?", "body": "<p>If I have created an environment with the 'conda create' command, then I activated it:</p>\n\n<pre><code>conda activate myEnv\n</code></pre>\n\n<p>Now if I want to install a package with 'conda install' to 'myEnv', but this package isn't in the conda repository. So I have to install it with the 'pip' command:</p>\n\n<pre><code>pip install newPackage\n</code></pre>\n\n<p>In this case, is the newPackage installed into 'myEnv', or it will be installed outside of the conda environment. </p>\n"}, {"tags": ["python", "plotly"], "comments": [{"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1549495727, "post_id": 54563927, "comment_id": 95927117, "body": "<code>{&#39;name&#39; = &#39;somename&#39;}</code> should be <code>{name: &#39;somename&#39;}</code>."}, {"owner": {"reputation": 483, "user_id": 10961338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3899d1f6a1d365ab3ffd3ee38a0d6f26?s=128&d=identicon&r=PG&f=1", "display_name": "CroatiaHR", "link": "https://stackoverflow.com/users/10961338/croatiahr"}, "reply_to_user": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1549496625, "post_id": 54563927, "comment_id": 95927365, "body": "no, still not working. Have you tried it?"}, {"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1549496813, "post_id": 54563927, "comment_id": 95927412, "body": "Did you read <a href=\"https://plot.ly/python/axes/\" rel=\"nofollow noreferrer\">plot.ly/python/axes</a>? I think it&#39;s explained there."}], "answers": [{"comments": [{"owner": {"reputation": 483, "user_id": 10961338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3899d1f6a1d365ab3ffd3ee38a0d6f26?s=128&d=identicon&r=PG&f=1", "display_name": "CroatiaHR", "link": "https://stackoverflow.com/users/10961338/croatiahr"}, "edited": false, "score": 0, "creation_date": 1549536872, "post_id": 54566031, "comment_id": 95941056, "body": "thanks for the comment, I have found it myself last night, but I was too tired to update the post."}], "tags": [], "owner": {"reputation": 12368, "user_id": 5924562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lCWoZ.jpg?s=128&g=1", "display_name": "Naren Murali", "link": "https://stackoverflow.com/users/5924562/naren-murali"}, "is_accepted": true, "score": 0, "last_activity_date": 1549511426, "creation_date": 1549511426, "answer_id": 54566031, "question_id": 54563927, "link": "https://stackoverflow.com/questions/54563927/cant-get-a-lable-on-the-y-achse/54566031#54566031", "title": "Can&#39;t get a lable on the y-achse", "body": "<p>Sounds like the problem is adding labels to the <code>y-axis</code> well you can make the axis containing labels, by setting the below properties.</p>\n\n<pre><code>{\n    'data': [\n            {'y': arrayValues} #Important part\n        ],\n    'layout': {\n        'yaxis':{\n            'ticktext': ['label-1', 'label-2', 'label-3', 'label-4', 'label-5'], \n            'tickmode': 'array', \n            'tickvals': arrayValues\n        }\n    }\n}\n</code></pre>\n\n<p>So we have added the <code>layout</code> object which contains the property <code>yaxis</code> which configures the y-axis. When we set the <code>tickmode</code> to <code>array</code>, <code>ticktext</code> array will accept a list of strings as input. This <code>ticktext</code> should have their corresponding numeric values as a list assigned to another array <code>tickvals</code>, please go through the below modified code and let me know if this solves your issue.</p>\n\n<pre><code>import dash\nimport dash_core_components as dcc\nimport dash_html_components as html\nfrom dash.dependencies import Input, Output, State\nimport plotly.graph_objs as go\n\narrayValues = ['28.687', '29.687', '24.687', '21.687', '25.687', '28.687']\n\napp = dash.Dash()\napp.layout = html.Div([\n    html.H1('Title'),\n    dcc.Dropdown(\n        id='my-dropdown',\n        options=[\n            {'label': 'Fruit', 'value': 'FRUIT'}\n           # {'label': 'Tesla', 'value': 'TSLA'},\n           # {'label': 'Apple', 'value': 'AAPL'}\n        ],\n        value='TEMPERATUR'\n    ),\n    dcc.Slider(\n    min=-5,\n    max=10,\n    step=0.5,\n    value=-3,\n    ),\n    dcc.Graph(id='my-graph', animate=True),\n])\n\n\n@app.callback(Output('my-graph', 'figure'), [Input('my-dropdown', 'value')])\ndef update_graph(selected_dropdown_value):\n\n    return {\n        'data': [\n                {'y': arrayValues} #Important part\n            ],\n        'layout': {\n            'yaxis':{\n                'ticktext': ['label-1', 'label-2', 'label-3', 'label-4', 'label-5'], \n                'tickmode': 'array', \n                'tickvals': arrayValues\n            }\n        }\n    }\n\nif __name__ == '__main__':\n    app.run_server()\n</code></pre>\n\n<p>To read more visit <a href=\"https://plot.ly/python/reference/#layout-yaxis-ticktext\" rel=\"nofollow noreferrer\">Plotly official documentation</a></p>\n"}], "owner": {"reputation": 483, "user_id": 10961338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3899d1f6a1d365ab3ffd3ee38a0d6f26?s=128&d=identicon&r=PG&f=1", "display_name": "CroatiaHR", "link": "https://stackoverflow.com/users/10961338/croatiahr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 54566031, "answer_count": 1, "score": 0, "last_activity_date": 1549511426, "creation_date": 1549494355, "question_id": 54563927, "link": "https://stackoverflow.com/questions/54563927/cant-get-a-lable-on-the-y-achse", "title": "Can&#39;t get a lable on the y-achse", "body": "<p>I am trying to put labels on the y-Achse on my Dash-Code but it is not working, according to some example code I found online. </p>\n\n<p>My code:</p>\n\n<pre><code>    import dash\nimport dash_core_components as dcc\nimport dash_html_components as html\nfrom dash.dependencies import Input, Output, State\nimport plotly.graph_objs as go\n\narrayValues = ['28.687', '29.687', '24.687', '21.687', '25.687', '28.687']\n\napp = dash.Dash()\napp.layout = html.Div([\n    html.H1('Title'),\n    dcc.Dropdown(\n        id='my-dropdown',\n        options=[\n            {'label': 'Fruit', 'value': 'FRUIT'}\n           # {'label': 'Tesla', 'value': 'TSLA'},\n           # {'label': 'Apple', 'value': 'AAPL'}\n        ],\n        value='TEMPERATUR'\n    ),\n    dcc.Slider(\n    min=-5,\n    max=10,\n    step=0.5,\n    value=-3,\n    ),\n    dcc.Graph(id='my-graph', animate=True),\n])\n\n\n@app.callback(Output('my-graph', 'figure'), [Input('my-dropdown', 'value')])\ndef update_graph(selected_dropdown_value):\n\n    return {\n        'data': [\n                {'y': arrayValues} #Important part\n            ]\n    }\n\nif __name__ == '__main__':\n    app.run_server(\n    )\n</code></pre>\n\n<p>I have tried adding <em>'name' = 'somename'</em> or <em>name = 'somename'</em>, but it is not working, eventhough it should work.<br>\nExample: </p>\n\n<pre><code> {'y': arrayValues, 'name' = 'somename'} #Important part\n</code></pre>\n\n<p>I don't get any error or sth, it just doesn't show any results.</p>\n"}, {"tags": ["python", "matplotlib", "scipy"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1549494453, "post_id": 54563902, "comment_id": 95926733, "body": "Your code will throw an error. So fix the errors first. Then provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 0, "creation_date": 1549504523, "post_id": 54563902, "comment_id": 95929109, "body": "what do you mean by a &quot;blank line&quot;? can you post an image of the plot that you are seeing?"}], "owner": {"reputation": 177, "user_id": 7395251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-dIMjjna0SSY/AAAAAAAAAAI/AAAAAAAADj8/k3wGYjWLdH4/photo.jpg?sz=128", "display_name": "BikeControl", "link": "https://stackoverflow.com/users/7395251/bikecontrol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "closed_date": 1549676414, "answer_count": 0, "score": 0, "last_activity_date": 1549494138, "creation_date": 1549494138, "question_id": 54563902, "link": "https://stackoverflow.com/questions/54563902/plot-a-timebased-line-plot-over-a-spectrogram", "closed_reason": "Duplicate", "title": "Plot a timebased line plot over a spectrogram", "body": "<p>I'd like to display my spectrogram data accompanied with a line graph depicting  some relevant data. Spectrogram was made with scipy and data is in a Pandas dataframe. </p>\n\n<p>I tried referencing a matplotlib example but it just sticks a blank line graph in the second plot. </p>\n\n<p><a href=\"https://matplotlib.org/gallery/lines_bars_and_markers/csd_demo.html#sphx-glr-gallery-lines-bars-and-markers-csd-demo-py\" rel=\"nofollow noreferrer\">https://matplotlib.org/gallery/lines_bars_and_markers/csd_demo.html#sphx-glr-gallery-lines-bars-and-markers-csd-demo-py</a></p>\n\n<pre><code>import pandas as pd\nfrom scipy import signal\nimport matplotlib.pyplot as plt\n\n\n#Import data file\ndf = pd.read_csv(\"C:\\Phoenix Test Logs\\TorqueTest\\Hartford Testing\\HartfordTest_2019-01-31_12,15,37.csv\")\n\n\nst = 0.3 #Set start time of spectrum analysis\ndur = 10.1 #Set duration of spectrum analysis\nsi = df[df['Time [s]']&gt;=st].index.values.astype(int)[0]\nei = df[df['Time [s]']&gt;=st+dur].index.values.astype(int)[0]\n\ndf = df[si:ei] #Isolate the desired section of interest\nfs = 1/(df['Time [s]'][si+1]-df['Time [s]'][si])#Find the frequency\ndata = df['Torque [lb-in]'].values #Get torque values as a numpy array\nf, t, Sxx = signal.spectrogram(data, fs) #Run spectrogram analysis\n\nfig, (ax1, ax2) = plt.subplots(2,1)\nfig.subplots_adjust(hspace=0.5)\n\nax1.plot(df['Time [s]'],df['ESC_RPM_1 [RPM]'],df['Time [s]'],df['ESC_Command_1 [usec]'])\nax1.xlabel('Time [s]')\nax1.ylabel('RPM &amp; Cmd')\n\nax2.pcolormesh(t, f, Sxx)\nax2.ylabel('Frequency [Hz]')\nax2.ylim(0,200)\nax2.xlabel('Time [sec]')\n\nplt.show()\n</code></pre>\n\n<p>I was hoping I would get a nice line plot on the top and the spectrogram below but no dice!  Instead I got the expected line plot up top and a blank line plot below. </p>\n"}, {"tags": ["python", "ios", "swift", "raspberry-pi", "pusher"], "answers": [{"comments": [{"owner": {"reputation": 38783, "user_id": 41283, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/62af4c828e18a91dc60832fb1465f0cf?s=128&d=identicon&r=PG", "display_name": "Hosam Aly", "link": "https://stackoverflow.com/users/41283/hosam-aly"}, "edited": false, "score": 0, "creation_date": 1549540173, "post_id": 54572708, "comment_id": 95943048, "body": "Disclaimer: I haven&#39;t used <code>Pysher</code> myself. I don&#39;t know whether it would work on a Raspberry Pi."}, {"owner": {"reputation": 15293, "user_id": 2837412, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/e3799ff084fe44182f5d8b1d22e49c9a?s=128&d=identicon&r=PG", "display_name": "Nishchit", "link": "https://stackoverflow.com/users/2837412/nishchit"}, "edited": false, "score": 0, "creation_date": 1551352318, "post_id": 54572708, "comment_id": 96613368, "body": "This might help you in Pusher event debugger... <a href=\"https://twitter.com/FirecampHQ/status/1101028779311460353\" rel=\"nofollow noreferrer\">twitter.com/FirecampHQ/status/1101028779311460353</a>"}], "tags": [], "owner": {"reputation": 38783, "user_id": 41283, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/62af4c828e18a91dc60832fb1465f0cf?s=128&d=identicon&r=PG", "display_name": "Hosam Aly", "link": "https://stackoverflow.com/users/41283/hosam-aly"}, "is_accepted": true, "score": 0, "last_activity_date": 1549540144, "creation_date": 1549540144, "answer_id": 54572708, "question_id": 54563894, "link": "https://stackoverflow.com/questions/54563894/pusher-swift-ios-publisher-server-to-raspberry-python-subsriber-client/54572708#54572708", "title": "Pusher: Swift (iOS) publisher/server to Raspberry Python subsriber/client", "body": "<p>Pusher Channels are bidirectional (or omnidirectional). You can trigger events on a channel and all active subscribed clients should receive the event.</p>\n\n<p>The tutorial mentioned doesn't show a subscription on the Raspberry Pi. You'll need to add that functionality. You may be able to use <a href=\"https://github.com/nlsdfnbch/Pysher\" rel=\"nofollow noreferrer\">Pysher</a> to subscribe to the channel and listen to incoming events that your mobile would send.</p>\n\n<p>If you do this then you may wish to use <a href=\"https://pusher.com/docs/client_api_guide/client_events#trigger-events\" rel=\"nofollow noreferrer\">client events</a> to send events between both devices over the same channel subscription.</p>\n"}], "owner": {"reputation": 13, "user_id": 10952771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bb59c2b26e9903c54a6f685478af1f6?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan M", "link": "https://stackoverflow.com/users/10952771/jonathan-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 54572708, "answer_count": 1, "score": 1, "last_activity_date": 1549540144, "creation_date": 1549494099, "question_id": 54563894, "link": "https://stackoverflow.com/questions/54563894/pusher-swift-ios-publisher-server-to-raspberry-python-subsriber-client", "title": "Pusher: Swift (iOS) publisher/server to Raspberry Python subsriber/client", "body": "<p>In Pusher, is there a way to setup Python (Raspberry Pi) as the client and iOS (Swift) as the server?</p>\n\n<p>This is the client/server setup page:\n<a href=\"https://i.stack.imgur.com/KUOfh.png\" rel=\"nofollow noreferrer\">Setting up a channel in pusher</a>.</p>\n\n<p>The reason I am asking is because I followed the photo-feed tutorial in which a Raspberry Pi sends images to an iOS App: <a href=\"https://pusher.com/tutorials/photo-feed-swift-raspberrypi/\" rel=\"nofollow noreferrer\">https://pusher.com/tutorials/photo-feed-swift-raspberrypi/</a>.\nI setup ngrok as the server on the Pi.</p>\n\n<p>Now I would like to make an iOS app that sends command data to the Raspberry \nto turn a stepper motor. </p>\n\n<p>Can this be done with the current setup from the photo-feed? Are channels bi-directional that I can send/receive from both ends or do I need two channels: one to send and one to receive?</p>\n"}, {"tags": ["python", "csv", "export-to-csv"], "answers": [{"tags": [], "owner": {"reputation": 474, "user_id": 10671481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kaOJ9.jpg?s=128&g=1", "display_name": "M. S.", "link": "https://stackoverflow.com/users/10671481/m-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1549495280, "creation_date": 1549495280, "answer_id": 54564067, "question_id": 54563861, "link": "https://stackoverflow.com/questions/54563861/exporting-python-scraping-results-to-csv/54564067#54564067", "title": "Exporting Python Scraping Results to CSV", "body": "<p>The original answer has been deleted unfortunately - please find below the code for everyone else interested in the situation. Thanks to the user who has posted the solution in the first place:</p>\n\n<pre><code>with open('eggs.csv', 'w', newline='') as csvfile:\n    spamwriter = csv.writer(csvfile, delimiter=' ',\n                        quotechar='|', quoting=csv.QUOTE_MINIMAL)\n    spamwriter.writerow(['query', 'resultStats'])\n    for query in desired_google_queries:\n        ...\n        spamwriter.writerow([query, resultStats])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3428, "user_id": 176410, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/oH799.jpg?s=128&g=1", "display_name": "J. Taylor", "link": "https://stackoverflow.com/users/176410/j-taylor"}, "is_accepted": true, "score": 2, "last_activity_date": 1549495802, "last_edit_date": 1549495802, "creation_date": 1549495454, "answer_id": 54564090, "question_id": 54563861, "link": "https://stackoverflow.com/questions/54563861/exporting-python-scraping-results-to-csv/54564090#54564090", "title": "Exporting Python Scraping Results to CSV", "body": "<p>I took the liberty of rewriting this to use the <a href=\"http://docs.python-requests.org/\" rel=\"nofollow noreferrer\">Requests</a> library instead of urllib, but this shows how to do the CSV writing which is what I think you were more interested in:</p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport requests\nimport csv\n\ndesired_google_queries = ['Elon Musk' , 'Tesla', 'Microsoft']\nresult_stats = dict()\n\nfor query in desired_google_queries:\n    url = 'http://google.com/search?q=' + query\n    response = requests.get(url)\n    html = response.text\n    soup = BeautifulSoup(html, 'html.parser')\n    result_stats[query] = soup.find(id=\"resultStats\").string\n\nwith open ('searchstats.csv', 'w', newline='') as fout:\n    cw = csv.writer(fout)\n    for q in desired_google_queries:\n        cw.writerow([q, result_stats[q]])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 743, "user_id": 7799677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d2ddfaaa31f041f9e01657e29cae1ff?s=128&d=identicon&r=PG&f=1", "display_name": "billydh", "link": "https://stackoverflow.com/users/7799677/billydh"}, "is_accepted": false, "score": 1, "last_activity_date": 1549496876, "creation_date": 1549496876, "answer_id": 54564304, "question_id": 54563861, "link": "https://stackoverflow.com/questions/54563861/exporting-python-scraping-results-to-csv/54564304#54564304", "title": "Exporting Python Scraping Results to CSV", "body": "<p>instead of writing it line by line, you can write it all in one go by storing the result in a pandas dataframe first. See below code</p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport urllib.request\nimport pandas as pd\n\ndata_dict = {'desired_google_queries': [],\n             'resultStats': []}\n\ndesired_google_queries = ['Elon Musk' , 'Tesla', 'Microsoft']\n\nfor query in desired_google_queries:\n\n    url = 'http://google.com/search?q=' + query\n\n    req = urllib.request.Request(url, headers={'User-Agent' : \"Magic Browser\"})\n    response = urllib.request.urlopen( req )\n    html = response.read()\n\n    soup = BeautifulSoup(html, 'html.parser')\n\n    resultStats = soup.find(id=\"resultStats\").string\n\n    data_dict['desired_google_queries'].append(query)\n    data_dict['resultStats'].append(resultStats)\n\ndf = pd.DataFrame(data=data_dict)\ndf.to_csv(path_or_buf='path/where/you/want/to/save/thisfile.csv', index=None)\n</code></pre>\n"}], "owner": {"reputation": 474, "user_id": 10671481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kaOJ9.jpg?s=128&g=1", "display_name": "M. S.", "link": "https://stackoverflow.com/users/10671481/m-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 594, "favorite_count": 1, "accepted_answer_id": 54564090, "answer_count": 3, "score": 1, "last_activity_date": 1549496876, "creation_date": 1549493956, "question_id": 54563861, "link": "https://stackoverflow.com/questions/54563861/exporting-python-scraping-results-to-csv", "title": "Exporting Python Scraping Results to CSV", "body": "<p>The code below is yielding a value for the \"resultStats\" ID, which I would like to save in a CSV file. Is there any smart way to have the \" desired_google_queries\" (i.e. the search terms) in column A and the \"resultStats\" values in column B of the CSV?</p>\n\n<p>I saw that there are a number of threads on this topic but none of the solutions I have read through worked for the specific situation.</p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport urllib.request\nimport csv\n\n    desired_google_queries = ['Elon Musk' , 'Tesla', 'Microsoft']\n\nfor query in desired_google_queries:\n\n    url = 'http://google.com/search?q=' + query\n\n    req = urllib.request.Request(url, headers={'User-Agent' : \"Magic Browser\"})\n    response = urllib.request.urlopen( req )\n    html = response.read()\n\n    soup = BeautifulSoup(html, 'html.parser')\n\n    resultStats = soup.find(id=\"resultStats\").string\n    print(resultStats)\n</code></pre>\n"}, {"tags": ["python", "pandas", "csv", "dictionary", "file-writing"], "comments": [{"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 4, "creation_date": 1549493625, "post_id": 54563792, "comment_id": 95926463, "body": "Why ask us? Try it out. Nothing will explode if you do. If you observe behaviour that you can not fix yourself, ask."}, {"owner": {"reputation": 131, "user_id": 8138398, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-g5LTuRad0KA/AAAAAAAAAAI/AAAAAAABDXc/d3o-aBjO1EE/photo.jpg?sz=128", "display_name": "hsayya", "link": "https://stackoverflow.com/users/8138398/hsayya"}, "reply_to_user": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 0, "creation_date": 1549493734, "post_id": 54563792, "comment_id": 95926502, "body": "I already tried... and it didn&#39;t work. that&#39;s why I&#39;m asking. thanks.. @PatrickArtner"}, {"owner": {"reputation": 3428, "user_id": 176410, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/oH799.jpg?s=128&g=1", "display_name": "J. Taylor", "link": "https://stackoverflow.com/users/176410/j-taylor"}, "edited": false, "score": 0, "creation_date": 1549493740, "post_id": 54563792, "comment_id": 95926505, "body": "^ what Patrick said ... but one thing to keep in mind is that dictionaries are unordered internally, so you are going to need to think of how you are mapping keys in yin to keys in BL."}, {"owner": {"reputation": 131, "user_id": 8138398, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-g5LTuRad0KA/AAAAAAAAAAI/AAAAAAABDXc/d3o-aBjO1EE/photo.jpg?sz=128", "display_name": "hsayya", "link": "https://stackoverflow.com/users/8138398/hsayya"}, "reply_to_user": {"reputation": 3428, "user_id": 176410, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/oH799.jpg?s=128&g=1", "display_name": "J. Taylor", "link": "https://stackoverflow.com/users/176410/j-taylor"}, "edited": false, "score": 0, "creation_date": 1549493787, "post_id": 54563792, "comment_id": 95926517, "body": "@J.Taylor How can I do that? That was the second part of my question."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "reply_to_user": {"reputation": 3428, "user_id": 176410, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/oH799.jpg?s=128&g=1", "display_name": "J. Taylor", "link": "https://stackoverflow.com/users/176410/j-taylor"}, "edited": false, "score": 1, "creation_date": 1549493796, "post_id": 54563792, "comment_id": 95926519, "body": "@J.Taylor dictionaries, <i>prior to Python 3.6</i>, are unordered."}, {"owner": {"reputation": 3428, "user_id": 176410, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/oH799.jpg?s=128&g=1", "display_name": "J. Taylor", "link": "https://stackoverflow.com/users/176410/j-taylor"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1549493835, "post_id": 54563792, "comment_id": 95926538, "body": "Thanks @roganjosh - I didn&#39;t realize that had changed since 3.6!"}, {"owner": {"reputation": 131, "user_id": 8138398, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-g5LTuRad0KA/AAAAAAAAAAI/AAAAAAABDXc/d3o-aBjO1EE/photo.jpg?sz=128", "display_name": "hsayya", "link": "https://stackoverflow.com/users/8138398/hsayya"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1549493851, "post_id": 54563792, "comment_id": 95926543, "body": "@roganjosh Would you happen to know if there&#39;s some way I could order it?"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "reply_to_user": {"reputation": 3428, "user_id": 176410, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/oH799.jpg?s=128&g=1", "display_name": "J. Taylor", "link": "https://stackoverflow.com/users/176410/j-taylor"}, "edited": false, "score": 1, "creation_date": 1549493860, "post_id": 54563792, "comment_id": 95926548, "body": "@J.Taylor in 3.6 it is an implementation detail. In 3.7 it is guaranteed"}, {"owner": {"reputation": 3428, "user_id": 176410, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/oH799.jpg?s=128&g=1", "display_name": "J. Taylor", "link": "https://stackoverflow.com/users/176410/j-taylor"}, "edited": false, "score": 0, "creation_date": 1549493901, "post_id": 54563792, "comment_id": 95926557, "body": "Are you generating the dict yourself @hsayya? If so, and order is important then, create lists of tuples or use something like collections.OrderedDict instead of storing the values in a dictionary."}, {"owner": {"reputation": 131, "user_id": 8138398, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-g5LTuRad0KA/AAAAAAAAAAI/AAAAAAABDXc/d3o-aBjO1EE/photo.jpg?sz=128", "display_name": "hsayya", "link": "https://stackoverflow.com/users/8138398/hsayya"}, "reply_to_user": {"reputation": 3428, "user_id": 176410, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/oH799.jpg?s=128&g=1", "display_name": "J. Taylor", "link": "https://stackoverflow.com/users/176410/j-taylor"}, "edited": false, "score": 0, "creation_date": 1549493949, "post_id": 54563792, "comment_id": 95926573, "body": "Yes, I&#39;m generating them myself.  I could try to look into orderedDict @J.Taylor"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1549494005, "post_id": 54563792, "comment_id": 95926595, "body": "If you are generating these yourself then the dictionary was potentially a bad choice. Why do you end up with 2 dicts where you rely on order to marry them together? This problem would probably be better addressed upstream where you create the data structures."}, {"owner": {"reputation": 131, "user_id": 8138398, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-g5LTuRad0KA/AAAAAAAAAAI/AAAAAAABDXc/d3o-aBjO1EE/photo.jpg?sz=128", "display_name": "hsayya", "link": "https://stackoverflow.com/users/8138398/hsayya"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1549494358, "post_id": 54563792, "comment_id": 95926704, "body": "@roganjosh I added the code I used to generate the dictionaries, if you could please take a look at it."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1549494629, "post_id": 54563792, "comment_id": 95926783, "body": "That code can&#39;t generate tthe example dictionaries you&#39;ve given because they would share keys. In your example, the keys are different."}, {"owner": {"reputation": 131, "user_id": 8138398, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-g5LTuRad0KA/AAAAAAAAAAI/AAAAAAABDXc/d3o-aBjO1EE/photo.jpg?sz=128", "display_name": "hsayya", "link": "https://stackoverflow.com/users/8138398/hsayya"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1549494867, "post_id": 54563792, "comment_id": 95926853, "body": "@roganjosh my bad, I realized that was a mistake.  You&#39;re right the keys would be the same."}, {"owner": {"reputation": 131, "user_id": 8138398, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-g5LTuRad0KA/AAAAAAAAAAI/AAAAAAABDXc/d3o-aBjO1EE/photo.jpg?sz=128", "display_name": "hsayya", "link": "https://stackoverflow.com/users/8138398/hsayya"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1549494959, "post_id": 54563792, "comment_id": 95926873, "body": "@roganjosh In that case, since the keys are the same, how could I accomplish what I&#39;m trying to do? Any help would be greatly appreciated"}], "answers": [{"tags": [], "owner": {"reputation": 3428, "user_id": 176410, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/oH799.jpg?s=128&g=1", "display_name": "J. Taylor", "link": "https://stackoverflow.com/users/176410/j-taylor"}, "is_accepted": true, "score": 1, "last_activity_date": 1549506554, "last_edit_date": 1549506554, "creation_date": 1549506234, "answer_id": 54565422, "question_id": 54563792, "link": "https://stackoverflow.com/questions/54563792/how-to-write-two-dictionaries-to-csv/54565422#54565422", "title": "How to write two dictionaries to CSV?", "body": "<p>If you have two dictionaries <code>yin</code> and <code>bl</code>, this would be how you would combine the dictionaries in the manner you described and write them to a CSV file:</p>\n\n<pre><code>import csv \n\nyin = {'a': 2248433.0, 'b': 280955.0, 'c': 0.0}\nbl = {'a': 27.2, 'b': 57.6, 'c': 0.0}\n\nwith open('output.csv', 'w') as output:\n    cw = csv.writer(output)\n\n    for k in yin.keys():\n      cw.writerow([k, yin[k], bl[k]])\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 8138398, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-g5LTuRad0KA/AAAAAAAAAAI/AAAAAAABDXc/d3o-aBjO1EE/photo.jpg?sz=128", "display_name": "hsayya", "link": "https://stackoverflow.com/users/8138398/hsayya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 551, "favorite_count": 1, "accepted_answer_id": 54565422, "answer_count": 1, "score": 0, "last_activity_date": 1549565045, "creation_date": 1549493495, "last_edit_date": 1549565045, "question_id": 54563792, "link": "https://stackoverflow.com/questions/54563792/how-to-write-two-dictionaries-to-csv", "title": "How to write two dictionaries to CSV?", "body": "<p>I was wondering how I could iterate over two dictionaries: <code>yin</code> and <code>BL</code>.</p>\n\n<p>I have the following code so far to iterate over <code>yin</code> only: </p>\n\n<pre><code>with open('output.csv', 'wb') as output:\n  writer = csv.writer(output)\n  for key, value in yin.iteritems():\n    writer.writerow([key, value])\n</code></pre>\n\n<p><code>yin</code> has values in a dictionary:</p>\n\n<pre><code>{'a': 2248433.0, 'b': 280955.0, 'c': 0.0}\n</code></pre>\n\n<p><code>BL</code> has values in a dictionary:</p>\n\n<pre><code>{'a': 27.2, 'b': 57.6, 'c': 0.0}\n</code></pre>\n\n<p>I want to save it to an excel file so it looks like: </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>a  2248433.0    27.2     \nb  280955.0     57.6   \nc  0.0           0.0\n</code></pre>\n\n<p>Should I do the following?</p>\n\n<pre><code>with open('output.csv', 'wb') as output:\n  writer = csv.writer(output)\n  for key, value, valye in yin.iteritems(), BL.iteritems:\n    writer.writerow([key, value, value])\n</code></pre>\n\n<p>I also want the dictionaries to be listed in the same corresponding order in the CSV file. As shown in the table, I want <code>row1: 2248433.0</code> to correspond to <code>27.2</code>. </p>\n\n<p>This was the code used to generate dictionaries: </p>\n\n<pre><code>yin = {}\nBL = {}\n  for asdf in glob.glob(ay):\n    poregn = numpy.genfromtxt(asdf)\n    btwnROIs = poregn[2:size+2, 0:size] \n    BLu = poregn[(size*5)+2:(size*5)+size+2, 0:size]\n    for upmatSC in (list(combinations(range(size_FC),2))):\n      yin[FC_path1 + '_' + FC_path2 + '_' + str(upmatSC)] = btwnROIs[tuple(upmatSC)]\n      BL[FC_path1 + '_' + FC_path2 + '_' + str(upmatSC)] = BLu[tuple(upmatSC)]\n</code></pre>\n\n<p>To explain the code: basically I'm taking two separate matrices and extracting the upper half of each of the matrix and storing these values in two separate dictionaries. </p>\n"}, {"tags": ["python", "arrays"], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 1, "last_activity_date": 1549494028, "creation_date": 1549494028, "answer_id": 54563880, "question_id": 54563784, "link": "https://stackoverflow.com/questions/54563784/how-to-append-randomized-float-values-into-array-within-loop/54563880#54563880", "title": "How to append randomized float values into array within loop", "body": "<p>Your \"append here\" logic should append the coordinate list and then clear that list for the next iteration of the outer loop:</p>\n\n<pre><code>funcs.append(coord[:])    # The slice notation makes a copy of the list\ncoord.clear()             # or simply coord = []\n</code></pre>\n\n<p>You should learn to use a <code>for</code> loop.  This will simplify your looping: you don't have to maintain the counts yourself.  For instance:</p>\n\n<pre><code>for funcAmt in range(64):\n    for coordAmt in range(67):\n        ...\n</code></pre>\n\n<p>You might also look up how to make a \"list comprehension\", which can reduce your process to a single line of code -- a long, involved line, but readable with proper white space.</p>\n\n<p>Does that get you moving?</p>\n"}, {"tags": [], "owner": {"reputation": 1198, "user_id": 10643988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mg2mD.jpg?s=128&g=1", "display_name": "Bill M.", "link": "https://stackoverflow.com/users/10643988/bill-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1549494645, "creation_date": 1549494645, "answer_id": 54563973, "question_id": 54563784, "link": "https://stackoverflow.com/questions/54563784/how-to-append-randomized-float-values-into-array-within-loop/54563973#54563973", "title": "How to append randomized float values into array within loop", "body": "<p>There are a couple of ways around this.  Instead of using <code>while</code> lists and counters, you could just use <code>for</code> loops.  Or at least do that for the outer loop, since it looks like you still want to check for repeats.  Here's an example using your original dimensions of 3 and 4:</p>\n\n<pre><code>from math import pi\nimport random\n\ncoord_sets = 3\ncoords = 4\n\nbiglist = []\nfor i in range(coord_sets):\n\n    coords_set = []\n    non_repeating_coords = 0\n    while non_repeating_coords &lt; coords:\n        new_coord = round(random.uniform(-1.0*pi, pi), 2)\n        if new_coord not in coords_set:\n            coords_set.append(new_coord)\n            non_repeating_coords += 1\n\n    biglist.append(coords_set)\n\nprint(biglist)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 189, "user_id": 10898526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XV76tGqrBMc/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcaEc9_K-EQi4o9OEHN68apEDP8Gzg/mo/photo.jpg?sz=128", "display_name": "Lawrence", "link": "https://stackoverflow.com/users/10898526/lawrence"}, "is_accepted": false, "score": 0, "last_activity_date": 1549495077, "creation_date": 1549495077, "answer_id": 54564032, "question_id": 54563784, "link": "https://stackoverflow.com/questions/54563784/how-to-append-randomized-float-values-into-array-within-loop/54564032#54564032", "title": "How to append randomized float values into array within loop", "body": "<p>You can use sets because they don't allow duplicate values:</p>\n\n<pre><code>from math import pi\nimport random\n\nfuncs = []\nfuncAmt = 0\n\nwhile funcAmt &lt; 64:  # This is the number of loops\n    myset = set()\n    while len(myset) &lt; 67:  # This is the length of each set\n        uniform = round(random.uniform(-pi, pi), 2)\n        myset.add(uniform)\n    funcs.append(list(myset))  # Append randomly generated set as a list\n    funcAmt += 1\n\nprint(funcs)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3862, "user_id": 2991872, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9bc4382fe0c117be6b29768c66439be7?s=128&d=identicon&r=PG", "display_name": "Mehdi", "link": "https://stackoverflow.com/users/2991872/mehdi"}, "is_accepted": false, "score": 0, "last_activity_date": 1549495848, "last_edit_date": 1549495848, "creation_date": 1549495344, "answer_id": 54564080, "question_id": 54563784, "link": "https://stackoverflow.com/questions/54563784/how-to-append-randomized-float-values-into-array-within-loop/54564080#54564080", "title": "How to append randomized float values into array within loop", "body": "<p>maybe you can benefit from arrays in <code>numpy</code>:</p>\n\n<pre><code>import numpy as np\n\nfuncs = np.random.uniform(-np.pi, np.pi, [63, 67])\n</code></pre>\n\n<p>This creates an array of shape (63, 67) from uniform random between -pi to pi.</p>\n"}], "owner": {"reputation": 3, "user_id": 11025510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5TZp2m6edQM/AAAAAAAAAAI/AAAAAAAAAAo/iro_skdj_bs/photo.jpg?sz=128", "display_name": "Vince Trehan", "link": "https://stackoverflow.com/users/11025510/vince-trehan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "accepted_answer_id": 54563880, "answer_count": 4, "score": 0, "last_activity_date": 1549495848, "creation_date": 1549493427, "question_id": 54563784, "link": "https://stackoverflow.com/questions/54563784/how-to-append-randomized-float-values-into-array-within-loop", "title": "How to append randomized float values into array within loop", "body": "<p>I have a set of randomized float values that are to be arranged into an array at the end of each loop that produces 67 of them, however, there are 64 total loops.\nAs an example, if I had 4 values per loop and 3 total loops of integers, I would like it to be like this:\nvalues = [[0, 4, 5, 1],[6, 6, 5, 3],[0,0,0,7]]\nsuch that I could identify them as separate arrays, however, I am unsure of the best way to append the values after they are created, but am aware of how to return them. Forgive me as I am unskilled with the logic.</p>\n\n<pre><code>import math\nimport random\n\nfuncs = []\ncoord = []\n\npi = math.pi\n\nfuncAmt = 0\ncoordAmt = 0\nrepeatAmt = 0\ncoordPass = 0\n\nwhile funcAmt &lt; 64:\n    while coordAmt &lt; 67:\n        coordAmt += 1\n        uniform = round(random.uniform(-pi, pi), 2)\n        print(\"Coord [\",coordAmt,\"] {\",uniform,\"} Func:\", funcAmt + 1)\n        if uniform in coord:\n            repeatAmt += 1\n            print(\"Repeat Found!\")\n            coordAmt -= 1\n            print(\"Repeat [\",repeatAmt,\"] Resolved\")\n            pass\n        else:\n            coordPass += 1\n            coord.append(uniform)\n    #&lt;&lt;&lt;Append Here&gt;&gt;&gt;\n    funcAmt += 1\n    coord.clear()\n    coordAmt = 0\n</code></pre>\n\n<p>In my given code above, it would be similar to:\nfunc = [\n[&lt;67 items>],\n...63 more times\n]</p>\n"}, {"tags": ["python", "numpy", "numpy-ndarray"], "answers": [{"tags": [], "owner": {"reputation": 16300, "user_id": 11015427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JsY7F.jpg?s=128&g=1", "display_name": "gmds", "link": "https://stackoverflow.com/users/11015427/gmds"}, "is_accepted": true, "score": 1, "last_activity_date": 1549495672, "last_edit_date": 1549495672, "creation_date": 1549494268, "answer_id": 54563913, "question_id": 54563775, "link": "https://stackoverflow.com/questions/54563775/numpy-arrays-replacing-elements/54563913#54563913", "title": "Numpy Arrays - Replacing Elements", "body": "<p>Say you have stored your array in <code>data</code>; this should work:</p>\n\n<pre><code>data[(data == 0).all(axis=2)] = [255, 255, 255]\n</code></pre>\n\n<p>This is due to <code>numpy</code>'s broadcasting rules, which compare each value to 0, resulting in a boolean array with <code>True</code> values where they compare equal and <code>False</code> elsewhere. </p>\n\n<p>The next step is to take only those sub-arrays where all of the individual values do compare equal, with <code>.all(axis=2)</code> - the last axis, which is the one you want.</p>\n\n<p>Then, with the resulting boolean array, you can index back into <code>data</code>, which will give you only those sub-arrays equal to <code>[0, 0, 0]</code>, and set those to <code>[255, 255, 255]</code>.</p>\n"}], "owner": {"reputation": 91, "user_id": 10891904, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SocZ3a0wzf0/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwca9szJfDLLYQq_E3v98ni87WiaIyQ/mo/photo.jpg?sz=128", "display_name": "Adi Koch", "link": "https://stackoverflow.com/users/10891904/adi-koch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 54563913, "answer_count": 1, "score": 1, "last_activity_date": 1549495672, "creation_date": 1549493370, "question_id": 54563775, "link": "https://stackoverflow.com/questions/54563775/numpy-arrays-replacing-elements", "title": "Numpy Arrays - Replacing Elements", "body": "<p>I am new to numpy and I want to replace specefic elements in a 3D numpy array. My 3D numpy array represents an image. The shape of the array is: \n(1080, 1920, 3). The number 3 represents RGB of each pixel in the image.</p>\n\n<p>All I want to know is how to change all the elements that are equal to [0,0,0] into [255,255,255]\nWhich means i want all black pixels in the image to be white.. How can i do it?\nThanks!</p>\n"}, {"tags": ["python", "python-3.x", "list", "beautifulsoup"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 11020547, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HLYPb.png?s=128&g=1", "display_name": "Vantagilt", "link": "https://stackoverflow.com/users/11020547/vantagilt"}, "edited": false, "score": 0, "creation_date": 1549566712, "post_id": 54563807, "comment_id": 95958385, "body": "Sorry, yes, the type &#39;span&#39; rather than &#39;time&#39; was a mix-up on my end. I had actually had that running previously with correctly returned results. The revelation here for me was the last -for- loop where date and title were called and then explicitly stated in the print command. Thanks for the code correction. Very helpful."}], "tags": [], "owner": {"reputation": 10314, "user_id": 6124411, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4E3zE.jpg?s=128&g=1", "display_name": "cody", "link": "https://stackoverflow.com/users/6124411/cody"}, "is_accepted": true, "score": 1, "last_activity_date": 1549493891, "last_edit_date": 1549493891, "creation_date": 1549493558, "answer_id": 54563807, "question_id": 54563749, "link": "https://stackoverflow.com/questions/54563749/python-combine-two-single-column-lists-into-one-dual-column-list-and-print/54563807#54563807", "title": "Python - Combine two, single column lists into one dual column list and print", "body": "<p>The problem is your query for dates is returning an empty list, so the <code>zip</code>ped result will also be empty. To extract the date from that page, you want to look for tags of type <code>time</code>, not <code>span</code>, with class <code>entry-date published</code>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/iryED.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iryED.png\" alt=\"enter image description here\"></a></p>\n\n<p>like this:</p>\n\n<pre><code>date_box = soup.find_all(\"time\", attrs={\"class\": \"entry-date published\"})\n</code></pre>\n\n<p>So with the following code:</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\n\nquote_page = \"https://blog.playstaxel.com\"\npage = requests.get(quote_page)\nsoup = BeautifulSoup(page.content, \"lxml\")\n\ntitle_box = soup.find_all(\"h1\", attrs={\"class\": \"entry-title\"})\ndate_box = soup.find_all(\"time\", attrs={\"class\": \"entry-date published\"})\ntitles = [title.text.strip() for title in title_box]\ndates = [date.text.strip() for date in date_box]\n\nfor date, title in zip(dates, titles):\n    print(f\"{date}: {title}\")\n</code></pre>\n\n<p>The result becomes:</p>\n\n<pre>\n2019-01-10: Magic update \u2013 feature preview\n2019-01-06: New Years\n2018-11-30: Staxel Changelog for 1.3.52\n2018-11-13: Staxel Changelog for 1.3.49\n2018-10-21: Staxel Changelog for 1.3.48\n2018-10-12: Halloween Update & GOG\n</pre>\n"}], "owner": {"reputation": 15, "user_id": 11020547, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HLYPb.png?s=128&g=1", "display_name": "Vantagilt", "link": "https://stackoverflow.com/users/11020547/vantagilt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 54563807, "answer_count": 1, "score": 0, "last_activity_date": 1549493891, "creation_date": 1549493260, "question_id": 54563749, "link": "https://stackoverflow.com/questions/54563749/python-combine-two-single-column-lists-into-one-dual-column-list-and-print", "title": "Python - Combine two, single column lists into one dual column list and print", "body": "<p>I'm just beginning to dabble with Python, and as many have done I am starting with a web-scraping example to try the language. \nI have seen many examples of using zip and map to combine lists, but I am having issues attempting to have that list print. \nAgain, I am new so please be gentle.</p>\n\n<p>The code gathers everything from 2 certain tag types (the date and title of a post) and returns them as 2 lists. For this I am using BeautifulSoup and requests. \nThe site I am practicing on for this test is the blog for a small game called 'Staxel'</p>\n\n<p>I can get my code to print a full list of one tag using [soup.find] and [print] in a for loop, but when I attempt to add a 2nd list to print I am simply getting a termination with no error. \nAny tips on how to correctly print the 2 lists?</p>\n\n<p>I am looking for output like</p>\n\n<p><em>Entry 2019-01-06 New Years</em></p>\n\n<p><em>Entry 2018-11-30 Staxel Changelog for 1.3.52</em></p>\n\n<pre><code># import libraries\nimport requests\nimport ssl\nfrom bs4 import BeautifulSoup\n\n# set the URL string\nquote_page = 'https://blog.playstaxel.com'\n\n# query the website and return the html to give us a 'page' variable\npage = requests.get(quote_page)\n\n\n# parse the html using beautiful soup and store in a variable ... 'soup'\nsoup = BeautifulSoup(page.content, 'lxml')\n\n# Remove the 'div' of name and get it's value\ntitle_box = soup.find_all('h1',attrs={'class':'entry-title'})\ndate_box = soup.find_all('span',attrs={'class':'entry-date published'})\ntitles = [title.text.strip() for title in title_box]\ndates = [date.text.strip()for date in date_box]\ndate_list = zip(dates, titles)\nfor heading in date_list:\n    print (\"Entry {}\")\n</code></pre>\n"}, {"tags": ["python", "typeerror"], "comments": [{"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 1, "creation_date": 1549493324, "post_id": 54563707, "comment_id": 95926352, "body": "Sounds like the original code came from the old python 2 when <code>dict.keys()</code> returned a list.  Try <code>list(output_blobs.keys())[1]</code> for python 3 (untested)."}], "answers": [{"comments": [{"owner": {"reputation": 5007, "user_id": 10924296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483c21a8a3f03bbf92cb99539ec97dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Reedinationer", "link": "https://stackoverflow.com/users/10924296/reedinationer"}, "edited": false, "score": 0, "creation_date": 1549493622, "post_id": 54563806, "comment_id": 95926462, "body": "This will loop through all the keys though, so if there are keys you want to skip you would have to specify them with logic using this method..."}], "tags": [], "owner": {"reputation": 5007, "user_id": 10924296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483c21a8a3f03bbf92cb99539ec97dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Reedinationer", "link": "https://stackoverflow.com/users/10924296/reedinationer"}, "is_accepted": false, "score": 0, "last_activity_date": 1549493551, "creation_date": 1549493551, "answer_id": 54563806, "question_id": 54563707, "link": "https://stackoverflow.com/questions/54563707/dict-keys-object-does-not-support-indexing/54563806#54563806", "title": "dict_keys object does not support indexing", "body": "<p>You could try looping through the keys of the dictionary:</p>\n\n<pre><code>for key in output_blobs.keys():\n    heatmap = np.transpose(np.squeeze(net.blobs[output_blobs[key].data), (1,2,0))\n</code></pre>\n\n<p>I cannot test that this will work for you though, and there may be a better way than looping available.</p>\n"}], "owner": {"reputation": 1, "user_id": 11025568, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-viRolI8yAAY/AAAAAAAAAAI/AAAAAAAADv8/PMDGOboLY5w/photo.jpg?sz=128", "display_name": "Moons eat Stars", "link": "https://stackoverflow.com/users/11025568/moons-eat-stars"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 448, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549493551, "creation_date": 1549493074, "question_id": 54563707, "link": "https://stackoverflow.com/questions/54563707/dict-keys-object-does-not-support-indexing", "title": "dict_keys object does not support indexing", "body": "<p>I have no idea what is the problem here:</p>\n\n<pre><code>net.blobs['data'].reshape(*(1, 3, imageToTest_padded.shape[0], imageToTest_padded.shape[1]))\n#net.forward() # dry run\nnet.blobs['data'].data[...] = np.transpose(np.float32(imageToTest_padded[:,:,:,np.newaxis]), (3,2,0,1))/256 - 0.5;\nstart_time = time.time()\noutput_blobs = net.forward()\nprint('At scale %d, The CNN took %.2f ms.' % (m, 1000 * (time.time() - start_time)))\n\n# extract outputs, resize, and remove padding\nheatmap = np.transpose(np.squeeze(net.blobs[output_blobs.keys()[1]].data), (1,2,0))  # output 1 is heatmaps\nheatmap = cv.resize(heatmap, (0,0), fx=model['stride'], fy=model['stride'], interpolation=cv.INTER_CUBIC)\nheatmap = heatmap[:imageToTest_padded.shape[0]-pad[2], :imageToTest_padded.shape[1]-pad[3], :]\nheatmap = cv.resize(heatmap, (oriImg.shape[1], oriImg.shape[0]), interpolation=cv.INTER_CUBIC)\n</code></pre>\n\n<p>Getting an error TypeError: 'dict_keys' object does not support indexing in line</p>\n\n<pre><code>heatmap = np.transpose(np.squeeze(net.blobs[output_blobs.keys()[1]].data), (1,2,0))  # output 1 is heatmaps\n</code></pre>\n\n<p>Original code: <a href=\"https://github.com/ZheC/Realtime_Multi-Person_Pose_Estimation\" rel=\"nofollow noreferrer\">https://github.com/ZheC/Realtime_Multi-Person_Pose_Estimation</a></p>\n\n<p>Any suggestions? Thanks.</p>\n"}, {"tags": ["python", "string", "list", "python-3.6"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1549493277, "post_id": 54563665, "comment_id": 95926335, "body": "<a href=\"https://meta.stackoverflow.com/questions/284236/why-is-can-someone-help-me-not-an-actual-question\">&quot;Can Someone Help Me?&quot; is not a valid SO question</a>.  This usually suggests that what you need is time with a local tutor or walk through a tutorial, rather than Stack Overflow."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 10807453, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YevY2gfXcjk/AAAAAAAAAAI/AAAAAAAAADA/LIKmYYW3Gcw/photo.jpg?sz=128", "display_name": "Anand Pandey", "link": "https://stackoverflow.com/users/10807453/anand-pandey"}, "edited": false, "score": 0, "creation_date": 1549494687, "post_id": 54563901, "comment_id": 95926796, "body": "You have done the Diff from B to A, Is there a way to do it from List A to B?"}, {"owner": {"reputation": 61, "user_id": 11014413, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k9yU8Z_NoRQ/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPDd7_mXV11H-F9F2ecu_ZTMqmiJg/mo/photo.jpg?sz=128", "display_name": "Puneeth Gopi", "link": "https://stackoverflow.com/users/11014413/puneeth-gopi"}, "reply_to_user": {"reputation": 15, "user_id": 10807453, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YevY2gfXcjk/AAAAAAAAAAI/AAAAAAAAADA/LIKmYYW3Gcw/photo.jpg?sz=128", "display_name": "Anand Pandey", "link": "https://stackoverflow.com/users/10807453/anand-pandey"}, "edited": false, "score": 0, "creation_date": 1549495062, "post_id": 54563901, "comment_id": 95926905, "body": "just interchange the for loop , from aa to bb and bb to aa."}, {"owner": {"reputation": 15, "user_id": 10807453, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YevY2gfXcjk/AAAAAAAAAAI/AAAAAAAAADA/LIKmYYW3Gcw/photo.jpg?sz=128", "display_name": "Anand Pandey", "link": "https://stackoverflow.com/users/10807453/anand-pandey"}, "edited": false, "score": 0, "creation_date": 1549495792, "post_id": 54563901, "comment_id": 95927135, "body": "Will it look something like this: a = &#39;The quick brown fox did jump over a log&#39; aa = a.split(&quot; &quot;) b = &#39;The brown rabbit quickly did outjump the fox&#39; bb = b.split(&quot; &quot;) common = [] for i in bb:     for j in aa:         if (i == j):             common.append(i)             break print(common)"}, {"owner": {"reputation": 61, "user_id": 11014413, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k9yU8Z_NoRQ/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPDd7_mXV11H-F9F2ecu_ZTMqmiJg/mo/photo.jpg?sz=128", "display_name": "Puneeth Gopi", "link": "https://stackoverflow.com/users/11014413/puneeth-gopi"}, "reply_to_user": {"reputation": 15, "user_id": 10807453, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YevY2gfXcjk/AAAAAAAAAAI/AAAAAAAAADA/LIKmYYW3Gcw/photo.jpg?sz=128", "display_name": "Anand Pandey", "link": "https://stackoverflow.com/users/10807453/anand-pandey"}, "edited": false, "score": 0, "creation_date": 1549496240, "post_id": 54563901, "comment_id": 95927268, "body": "yup, That will give you the diff A to B"}, {"owner": {"reputation": 15, "user_id": 10807453, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YevY2gfXcjk/AAAAAAAAAAI/AAAAAAAAADA/LIKmYYW3Gcw/photo.jpg?sz=128", "display_name": "Anand Pandey", "link": "https://stackoverflow.com/users/10807453/anand-pandey"}, "edited": false, "score": 0, "creation_date": 1549496595, "post_id": 54563901, "comment_id": 95927360, "body": "It gives me the same output, even after interchanging"}, {"owner": {"reputation": 61, "user_id": 11014413, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k9yU8Z_NoRQ/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPDd7_mXV11H-F9F2ecu_ZTMqmiJg/mo/photo.jpg?sz=128", "display_name": "Puneeth Gopi", "link": "https://stackoverflow.com/users/11014413/puneeth-gopi"}, "reply_to_user": {"reputation": 15, "user_id": 10807453, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YevY2gfXcjk/AAAAAAAAAAI/AAAAAAAAADA/LIKmYYW3Gcw/photo.jpg?sz=128", "display_name": "Anand Pandey", "link": "https://stackoverflow.com/users/10807453/anand-pandey"}, "edited": false, "score": 0, "creation_date": 1549496935, "post_id": 54563901, "comment_id": 95927449, "body": "you should probably try different input string to differentiate better"}], "tags": [], "owner": {"reputation": 61, "user_id": 11014413, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k9yU8Z_NoRQ/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPDd7_mXV11H-F9F2ecu_ZTMqmiJg/mo/photo.jpg?sz=128", "display_name": "Puneeth Gopi", "link": "https://stackoverflow.com/users/11014413/puneeth-gopi"}, "is_accepted": false, "score": -1, "last_activity_date": 1549496872, "last_edit_date": 1549496872, "creation_date": 1549494136, "answer_id": 54563901, "question_id": 54563665, "link": "https://stackoverflow.com/questions/54563665/compare-list-of-words-similar-words-deleted-and-added-into-new-string/54563901#54563901", "title": "compare list of words, similar words deleted and added into new string", "body": "<pre><code>a = 'The quick brown fox did jump over a log'\naa = a.split(\" \")\nb = 'The brown rabbit quickly did outjump the fox'\nbb = b.split(\" \")\ncommon = []\nfor i in aa:\n    for j in bb:\n        if (i == j):\n            common.append(j)\n            break\nprint(\" \".join(common))\n</code></pre>\n\n<p>The output for this will be \"The brown fox did\"</p>\n\n<pre><code>a = 'The quick brown fox did jump over a log'\naa = a.split(\" \")\nb = 'The brown rabbit quickly did outjump the fox'\nbb = b.split(\" \")\ncommon = []\nfor i in bb:\n    for j in aa:\n        if (i == j):\n            common.append(j)\n            break\nprint(\" \".join(common))\n</code></pre>\n\n<p>The output is \"The brown did fox\"</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 10807453, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YevY2gfXcjk/AAAAAAAAAAI/AAAAAAAAADA/LIKmYYW3Gcw/photo.jpg?sz=128", "display_name": "Anand Pandey", "link": "https://stackoverflow.com/users/10807453/anand-pandey"}, "edited": false, "score": 0, "creation_date": 1549497751, "post_id": 54564057, "comment_id": 95927686, "body": "This did work but, this diff&#39;ed from B to A, Is there a way I can Diff from A to B? The outcome from A to B should be &quot;The quick brown fox did jump a&quot;"}, {"owner": {"reputation": 1262, "user_id": 5597037, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/eaab5b288caf39e6cbd4387c0c3cf344?s=128&d=identicon&r=PG", "display_name": "Mike C.", "link": "https://stackoverflow.com/users/5597037/mike-c"}, "reply_to_user": {"reputation": 15, "user_id": 10807453, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YevY2gfXcjk/AAAAAAAAAAI/AAAAAAAAADA/LIKmYYW3Gcw/photo.jpg?sz=128", "display_name": "Anand Pandey", "link": "https://stackoverflow.com/users/10807453/anand-pandey"}, "edited": false, "score": 0, "creation_date": 1549498017, "post_id": 54564057, "comment_id": 95927747, "body": "I just edited the code. It should do that now. If it works could you please upvote and accept my answer."}, {"owner": {"reputation": 15, "user_id": 10807453, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YevY2gfXcjk/AAAAAAAAAAI/AAAAAAAAADA/LIKmYYW3Gcw/photo.jpg?sz=128", "display_name": "Anand Pandey", "link": "https://stackoverflow.com/users/10807453/anand-pandey"}, "edited": false, "score": 0, "creation_date": 1549498450, "post_id": 54564057, "comment_id": 95927861, "body": "Previously the output was&quot; The brown fox did&quot; and now it is &quot;the brown did fox&quot;. The only thing that changed was the last 2 words in the output"}], "tags": [], "owner": {"reputation": 1262, "user_id": 5597037, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/eaab5b288caf39e6cbd4387c0c3cf344?s=128&d=identicon&r=PG", "display_name": "Mike C.", "link": "https://stackoverflow.com/users/5597037/mike-c"}, "is_accepted": true, "score": 0, "last_activity_date": 1549497939, "last_edit_date": 1549497939, "creation_date": 1549495193, "answer_id": 54564057, "question_id": 54563665, "link": "https://stackoverflow.com/questions/54563665/compare-list-of-words-similar-words-deleted-and-added-into-new-string/54564057#54564057", "title": "compare list of words, similar words deleted and added into new string", "body": "<p>This could work</p>\n\n<pre><code>common_str = \"\"\n\na =  \" The quick brown fox did jump over a log\"\nb = \" The brown rabbit quickly did outjump the fox\"\nalist = a.split(\" \")\nblist = b.split(\" \")\nfor item in blist:\n    if item in alist:\n        #add word to common string\n        common_str += item + \" \"\n        #remove from second string\n        i = item + \" \" #item plus trailing space\n        a.replace(i, \"\")\nprint(common_str)\nprint(a)\nprint(b)\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 10807453, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YevY2gfXcjk/AAAAAAAAAAI/AAAAAAAAADA/LIKmYYW3Gcw/photo.jpg?sz=128", "display_name": "Anand Pandey", "link": "https://stackoverflow.com/users/10807453/anand-pandey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 54564057, "answer_count": 2, "score": -3, "last_activity_date": 1549497939, "creation_date": 1549492891, "last_edit_date": 1549493477, "question_id": 54563665, "link": "https://stackoverflow.com/questions/54563665/compare-list-of-words-similar-words-deleted-and-added-into-new-string", "title": "compare list of words, similar words deleted and added into new string", "body": "<p>I have 2 strings which I have converted into a list of words A and B. I am trying to make an algorithm that selects a word starting from the left. If that word appears as a word or part of a word in the second string then add that word to a new common string and delete the entire first occurrence of the word where it was found in the second string. Upper and lowercase letters are considered different letters. I call this algorithm Diff.</p>\n\n<p>Example:</p>\n\n<pre><code>List A: \" The quick brown fox did jump over a log\"\nList B: \" The brown rabbit quickly did outjump the fox\"\n</code></pre>\n\n<p>If I were to Diff A to B, I would get \" The quick brown fox did jump a\"</p>\n\n<p>If I were to Diff B to A, I would get \" the brown did fox\"</p>\n\n<p>The code I have so far:</p>\n\n<pre><code>import re\n\na = 'The quick brown fox did jump over a log'\naa = re.sub(\"[^\\w]\", \" \",  a).split()\nb = 'The brown rabbit quickly did outjump the fox'\nbb = re.sub(\"[^\\w]\", \" \",  b).split()\nprint (aa)\nprint (bb)\n</code></pre>\n\n<p>The code above is what I used to change the string to a list of words.</p>\n"}, {"tags": ["python", "serialization", "pickle"], "comments": [{"owner": {"reputation": 11, "user_id": 11025358, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PsMy6OO8ENo/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQO8ayJL0_0bOH0Fd4QfhlkO9RRTZA/mo/photo.jpg?sz=128", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041a\u0443\u0440\u0430\u043a\u0438\u043d", "link": "https://stackoverflow.com/users/11025358/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9a%d1%83%d1%80%d0%b0%d0%ba%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1549492726, "post_id": 54563637, "comment_id": 95926135, "body": "sorry about code n = 0 // f = open(&#39;comics&#39;, &#39;rb&#39;) // while pickle.load(f): n+=1"}, {"owner": {"reputation": 1803, "user_id": 10957844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d71bcaa11950c4881a16b908e5e1d333?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/10957844/tim"}, "edited": false, "score": 0, "creation_date": 1549493805, "post_id": 54563637, "comment_id": 95926524, "body": "I assume you are getting EOFError. Is that right?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11025358, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PsMy6OO8ENo/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQO8ayJL0_0bOH0Fd4QfhlkO9RRTZA/mo/photo.jpg?sz=128", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041a\u0443\u0440\u0430\u043a\u0438\u043d", "link": "https://stackoverflow.com/users/11025358/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9a%d1%83%d1%80%d0%b0%d0%ba%d0%b8%d0%bd"}, "edited": false, "score": 1, "creation_date": 1549559951, "post_id": 54563835, "comment_id": 95955077, "body": "Tim I did not even hope that someone would find a solution. I was allowed to write my course project in python, when all my classmates write in c ++. None of the teachers could not help me, because they are not familiar with python. I am very grateful for your help!  I hope you can read it. My English is bad, but I wanted to thank you at least a word."}, {"owner": {"reputation": 1803, "user_id": 10957844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d71bcaa11950c4881a16b908e5e1d333?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/10957844/tim"}, "reply_to_user": {"reputation": 11, "user_id": 11025358, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PsMy6OO8ENo/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQO8ayJL0_0bOH0Fd4QfhlkO9RRTZA/mo/photo.jpg?sz=128", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041a\u0443\u0440\u0430\u043a\u0438\u043d", "link": "https://stackoverflow.com/users/11025358/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9a%d1%83%d1%80%d0%b0%d0%ba%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1549560102, "post_id": 54563835, "comment_id": 95955158, "body": "@\u0410\u043b\u0435\u043a\u0441\u0435\u0439\u041a\u0443\u0440\u0430\u043a\u0438\u043d Glad to help. Good luck!"}], "tags": [], "owner": {"reputation": 1803, "user_id": 10957844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d71bcaa11950c4881a16b908e5e1d333?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/10957844/tim"}, "is_accepted": true, "score": 0, "last_activity_date": 1549493757, "creation_date": 1549493757, "answer_id": 54563835, "question_id": 54563637, "link": "https://stackoverflow.com/questions/54563637/i-need-to-know-the-number-of-serialized-lists-in-the-file-help-me-please/54563835#54563835", "title": "I need to know the number of serialized lists in the file. help me please", "body": "<p>You want to catch \"EOFError\" since you will run out of pickled lists. It's also better to use with statement for opening files since you don't have to worry about closing the open files.</p>\n\n<pre><code>n = 0\nwith open('comics', 'rb') as f:\n    while True:\n        try:\n            pickle.load(f):\n            n+=1\n        except EOFError:\n            break\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11025358, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PsMy6OO8ENo/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQO8ayJL0_0bOH0Fd4QfhlkO9RRTZA/mo/photo.jpg?sz=128", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041a\u0443\u0440\u0430\u043a\u0438\u043d", "link": "https://stackoverflow.com/users/11025358/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9a%d1%83%d1%80%d0%b0%d0%ba%d0%b8%d0%bd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "closed_date": 1549494342, "accepted_answer_id": 54563835, "answer_count": 1, "score": -4, "last_activity_date": 1549493757, "creation_date": 1549492691, "last_edit_date": 1549493091, "question_id": 54563637, "link": "https://stackoverflow.com/questions/54563637/i-need-to-know-the-number-of-serialized-lists-in-the-file-help-me-please", "closed_reason": "Needs more focus", "title": "I need to know the number of serialized lists in the file. help me please", "body": "<p>I need to know the number of serialized lists in the file.</p>\n\n<pre><code>n = 0\nf = open('comics', 'rb')\nwhile pickle.load(f):\n    n+=1\n</code></pre>\n"}, {"tags": ["python", "post", "flask", "null"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10491824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42764b739a5e7a2c1a41b027f12da612?s=128&d=identicon&r=PG&f=1", "display_name": "Neaco", "link": "https://stackoverflow.com/users/10491824/neaco"}, "edited": false, "score": 0, "creation_date": 1549496230, "post_id": 54563867, "comment_id": 95927264, "body": "I&#39;ve just copy-pasted your ajax code and this way the <code>request.form</code> i get has no values at all. Shouldn&#39;t I be using <code>request.get_json()</code> instead?"}, {"owner": {"reputation": 13, "user_id": 10491824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42764b739a5e7a2c1a41b027f12da612?s=128&d=identicon&r=PG&f=1", "display_name": "Neaco", "link": "https://stackoverflow.com/users/10491824/neaco"}, "edited": false, "score": 0, "creation_date": 1549530256, "post_id": 54563867, "comment_id": 95937184, "body": "To address the issue with None values in WTForms validation, one would probably need to resort to something like this: <a href=\"https://stackoverflow.com/questions/28508228/wtforms-json-not-working-with-formfields\">question about WTForms-JSON</a>"}], "tags": [], "owner": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "is_accepted": true, "score": 1, "last_activity_date": 1549497020, "last_edit_date": 1549497020, "creation_date": 1549493967, "answer_id": 54563867, "question_id": 54563595, "link": "https://stackoverflow.com/questions/54563595/how-to-send-and-receive-explicit-null-values-via-post-with-to-a-flask-app/54563867#54563867", "title": "How to send and receive explicit null values via POST with to a Flask app", "body": "<p>The problem is in your ajax call. By default, <a href=\"http://api.jquery.com/jquery.ajax/\" rel=\"nofollow noreferrer\"><code>$.ajax</code></a> is sent as <code>application/x-www-form-urlencoded</code> data. For example:</p>\n\n\n\n<pre class=\"lang-js prettyprint-override\"><code>{\n    a: 'foo',\n    b: 'bar',\n    c: 'baz',\n    d: null,\n    e: ''\n}\n</code></pre>\n\n<p>gets transformed by jQuery into:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>a=foo&amp;b=bar&amp;c=baz&amp;d=&amp;e=\n</code></pre>\n\n<p>jQuery seems to coerce <code>null</code> into an empty string, so it does literally send an empty string. There is no JSON.</p>\n\n<p>To make jQuery not do that, stringify it yourself:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>$.ajax({\n    type: 'POST',\n    url: SOME_URL,\n    // Send a JSON string (NOT an object)\n    data: JSON.stringify({\n        foo: null\n    }),\n    // Tell Flask that it is a JSON string, so Flask parses as JSON\n    contentType: 'application/json; charset=utf-8',  \n    success: function() {\n        // process response\n    }\n});\n</code></pre>\n\n<p>As a side note, you should be doing this in Python:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>data = request.get_json()\n\nif 'foo' not in data:\n    # 'foo' does not exist\nelif data['foo'] is None:\n    # 'foo' exists and is (js) null (python) None\nelif data['foo'] == '':\n    # it is the empty string\n</code></pre>\n\n<p>Or probably something like this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>try:\n    foo = data['foo']\nexcept KeyError:\n    # Handle no 'foo' key\nelse:\n    if foo is None:\n         # Handle None case\n    elif isinstance(foo, str):\n         # Handle string case\n    else:\n         logger.warn('[%s] foo is not a string or None, and instead %s', flask_session_info(), type(foo).__name__)\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10491824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42764b739a5e7a2c1a41b027f12da612?s=128&d=identicon&r=PG&f=1", "display_name": "Neaco", "link": "https://stackoverflow.com/users/10491824/neaco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 695, "favorite_count": 0, "accepted_answer_id": 54563867, "answer_count": 1, "score": 1, "last_activity_date": 1549497020, "creation_date": 1549492475, "question_id": 54563595, "link": "https://stackoverflow.com/questions/54563595/how-to-send-and-receive-explicit-null-values-via-post-with-to-a-flask-app", "title": "How to send and receive explicit null values via POST with to a Flask app", "body": "<p>I am trying to find a way to send fields with explicit null values (as opposed to empty string value or the absence of the field itself in the request) via POST method from my UI to my Flask app backend. The latter seems to interpret null values I sent via AJAX as empty strings.</p>\n\n<p>So far I'm sending my AJAX requests from the UI like this:\n</p>\n\n<pre><code>$.ajax({\n    type: 'POST',\n    url: SOME_URL,\n    data: {\n        foo: null\n    },\n    success: function() {\n        // process response\n    }\n});\n</code></pre>\n\n<p>And here's what happens in Flask:\n</p>\n\n<pre><code>if request.form.get('foo') is None:\n    # Happens only if 'foo' field was not included in the request\n    return response('Got None')\nelif request.form.get('foo') == '':\n    # Happens for empty string or null sent as value of 'foo'\n    return response('Got empty string')\n</code></pre>\n\n<p>Apparently, it is possible to JSONencode the POST data and subsequently decode it on the server, preserving null values as such. Is there a more elegant way to do that though? For one, using WTForms for validation would become much harder I imagine. And it would seem inconsistent to send some requests JSONencoded and others unencoded.</p>\n"}, {"tags": ["python", "pandas", "python-newspaper"], "comments": [{"owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "edited": false, "score": 0, "creation_date": 1549492809, "post_id": 54563511, "comment_id": 95926169, "body": "Are all the url&#39;s in the same column? You seem to also be missing some python fundamentals here with your code.. you never call index or row in your script. Just because you tell python to enter a for loop doesn&#39;t mean it will do anything with the variables."}, {"owner": {"reputation": 23, "user_id": 11020226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27142e884268b91dcc82c6bc81df3218?s=128&d=identicon&r=PG&f=1", "display_name": "Alex F", "link": "https://stackoverflow.com/users/11020226/alex-f"}, "reply_to_user": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "edited": false, "score": 0, "creation_date": 1549493256, "post_id": 54563511, "comment_id": 95926326, "body": "Yes, all the url&#39;s are in the same column titled &quot;link&quot;. And ah, thanks for the pointer. This is one of my first real forays into python so I&#39;m not familiar with the fundamentals still, trying to learn as much intro stuff as I can though."}], "answers": [{"tags": [], "owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "is_accepted": true, "score": 1, "last_activity_date": 1549494801, "creation_date": 1549494801, "answer_id": 54563994, "question_id": 54563511, "link": "https://stackoverflow.com/questions/54563511/how-to-iterate-over-csv-rows-to-extract-text-from-urls-using-pandas/54563994#54563994", "title": "How to iterate over csv rows to extract text from URLS using pandas", "body": "<p>Since all the url's are in the same column, it is easier to access that column directly with a for loop. I will go over some explanation here:</p>\n\n<pre><code># to access your specific url column\nfrom newspaper import Article\nimport sys as sys\nimport pandas as pd\n\ndata = pd.read_csv('/Users/alexfrandsen14/Desktop/Projects/newspaper3k-scraper/candidate_coverage.csv')\n\nfor x in data['url_column_name']: #replace 'url_column_name' with the actual name in your df \n    article_name = Article(x, language='en') # x is the url in each row of the column\n    article.download()\n    article.parse()\n    f=open(article.title, 'w') # open a file named the title of the article (could be long)   \n    f.write(article.text)\n    f.close()\n</code></pre>\n\n<p>I have not tried this package before, but reading the tutorial posted this seems like it should work. Generally, you are accessing the url column in your dataframe by the line:\n<code>for x in data['url_column_name']:</code> you will replace the 'url_column_name' with the actual name of the column.</p>\n\n<p>Then, x will be the url in the first row so you will pass that to Article (you don't need brackets around x judging by the tutorial). It will download this first x and parse it, then open a file with the name of the title of the article, write the text to that file, then close that file. </p>\n\n<p>It will then do this same thing for the second x, and third x, all the way until you run out of urls.</p>\n\n<p>I hope this helps!</p>\n"}], "owner": {"reputation": 23, "user_id": 11020226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27142e884268b91dcc82c6bc81df3218?s=128&d=identicon&r=PG&f=1", "display_name": "Alex F", "link": "https://stackoverflow.com/users/11020226/alex-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 780, "favorite_count": 0, "protected_date": 1577625599, "accepted_answer_id": 54563994, "answer_count": 1, "score": 0, "last_activity_date": 1577614632, "creation_date": 1549491890, "question_id": 54563511, "link": "https://stackoverflow.com/questions/54563511/how-to-iterate-over-csv-rows-to-extract-text-from-urls-using-pandas", "title": "How to iterate over csv rows to extract text from URLS using pandas", "body": "<p>I have a csv of a bunch of news articles, and I'm hoping to use the newspaper3k package to extract the body text from those articles and save them as txt files. I want to create a script that iterates over every row in the csv, extracts the URL, extracts the text from the URL, and then saves that as a uniquely named txt file. Does anyone know how I might do this? I'm a journalist who is new to Python, sorry if this is straightforward. </p>\n\n<p>I only have the code below. Before figuring out how to save each body text as a txt file, I figured I should try and just get the script to print the text from each row in the csv.</p>\n\n<pre><code>import newspaper as newspaper\nfrom newspaper import Article\nimport sys as sys\nimport pandas as pd\n\ndata = pd.read_csv('/Users/alexfrandsen14/Desktop/Projects/newspaper3k- \n scraper/candidate_coverage.csv')\n\ndata.head()\n\nfor index,row in data.iterrows():\n    article_name = Article(url=['link'], language='en')\n    article_name.download()\n    article_name.parse()\n    print(article_name.text)\n</code></pre>\n"}, {"tags": ["python", "pip", "cairo", "google-cloud-ml", "pycairo"], "answers": [{"tags": [], "owner": {"reputation": 462, "user_id": 7438427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b5e95f9a643b662a40238b8bc2fea7?s=128&d=identicon&r=PG&f=1", "display_name": "Guoqing Xu", "link": "https://stackoverflow.com/users/7438427/guoqing-xu"}, "is_accepted": true, "score": 1, "last_activity_date": 1549843530, "creation_date": 1549843530, "answer_id": 54622420, "question_id": 54563489, "link": "https://stackoverflow.com/questions/54563489/ml-engine-package-libffi-was-not-found/54622420#54622420", "title": "ML Engine: Package libffi was not found", "body": "<p>For dependencies that can't be installed by pip, you can package them in a container and run it on Cloud ML Engine. How to run custom containers is documented <a href=\"https://cloud.google.com/ml-engine/docs/custom-containers-training\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 3849, "user_id": 310385, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e48c7c86d513fd6268d46ef5b8bca4d6?s=128&d=identicon&r=PG", "display_name": "rob", "link": "https://stackoverflow.com/users/310385/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 1, "accepted_answer_id": 54622420, "answer_count": 1, "score": 0, "last_activity_date": 1549843530, "creation_date": 1549491795, "question_id": 54563489, "link": "https://stackoverflow.com/questions/54563489/ml-engine-package-libffi-was-not-found", "title": "ML Engine: Package libffi was not found", "body": "<p>I'm trying to train a model in ML Engine that uses the <code>cairocffi</code> python module, which has a dependency on something called <code>libffi</code>. In the logs I get the message <code>No package 'libffi' found</code>. Others who've had this problem solve it by executing <code>apt-get install libffi-dev</code> on their machine before running <code>pip install cairocffi</code>. Is there a way to install such a dependency for a ML Engine job?</p>\n"}, {"tags": ["python", "matplotlib", "plot"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 1, "creation_date": 1549492780, "post_id": 54563477, "comment_id": 95926160, "body": "So first of all, a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would be helpful to understand what you&#39;re doing. Then I don&#39;t understand what &quot;include a point&quot; means in terms of the resulting plot. How would a plot look like where I have &quot;included a point&quot;? Concerning the error, this is surely because you should call the <code>.set_xlim</code> method of the axes <i>instance</i> you plot to, i.e. the <code>ax</code> you may have somewhere in your code."}], "answers": [{"tags": [], "owner": {"reputation": 189, "user_id": 10898526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XV76tGqrBMc/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcaEc9_K-EQi4o9OEHN68apEDP8Gzg/mo/photo.jpg?sz=128", "display_name": "Lawrence", "link": "https://stackoverflow.com/users/10898526/lawrence"}, "is_accepted": false, "score": 0, "last_activity_date": 1549493754, "last_edit_date": 1549493754, "creation_date": 1549492855, "answer_id": 54563659, "question_id": 54563477, "link": "https://stackoverflow.com/questions/54563477/how-to-add-axes-numbers-to-matplotlib-plot/54563659#54563659", "title": "How to add axes numbers to matplotlib plot?", "body": "<p>Try this:</p>\n\n<pre><code>import matplotlib.pyplot as as plt\nfig, ax = plt.subplots()    \nax.set_xlim(-93.86, 22.5)\nax.set_ylim(-29.05, 20)\n</code></pre>\n"}], "owner": {"reputation": 313, "user_id": 9829108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6619edf0517ba7c7c33c1555e125e542?s=128&d=identicon&r=PG&f=1", "display_name": "MAJ", "link": "https://stackoverflow.com/users/9829108/maj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1549493754, "creation_date": 1549491741, "question_id": 54563477, "link": "https://stackoverflow.com/questions/54563477/how-to-add-axes-numbers-to-matplotlib-plot", "title": "How to add axes numbers to matplotlib plot?", "body": "<p>If I have this plot below, how do I add the coordinates (29.05,-93.68) next to the (0,0)? So i would like to include the coordinates with the (0,0) and the bottom left corner. I have tried:</p>\n\n<pre><code>import matplotlib.axes as axes\naxes.Axes.set_xlim(left=-93.86,right=None)\naxes.Axes.set_ylim(bottom=-29.05,top=None)\n</code></pre>\n\n<p>But I keep getting an error. I also don't think that is the correct method to include both points. Any suggestions?\n<a href=\"https://i.stack.imgur.com/5TDq3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5TDq3.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "maya"], "answers": [{"tags": [], "owner": {"reputation": 126, "user_id": 5978489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dwhCe.jpg?s=128&g=1", "display_name": "gdas", "link": "https://stackoverflow.com/users/5978489/gdas"}, "is_accepted": true, "score": 1, "last_activity_date": 1549522357, "creation_date": 1549522357, "answer_id": 54567799, "question_id": 54563468, "link": "https://stackoverflow.com/questions/54563468/i-would-like-to-create-docs-for-a-shelf-button-in-maya-when-the-mouse-hovers-ove/54567799#54567799", "title": "I would like to create docs for a shelf button in Maya when the mouse hovers over the button", "body": "<p><code>shelfButton</code> command inside Maya has no flag for the desired behavior. Any string passed with the <code>annotation</code> flag will be displayed on Maya's native help box (At the buttom of the Maya UI). If you really want the behavior you may have to look into Qt.</p>\n"}], "owner": {"reputation": 407, "user_id": 8540947, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/839cf09f981b4262451e605fe759d381?s=128&d=identicon&r=PG&f=1", "display_name": "winteralfs", "link": "https://stackoverflow.com/users/8540947/winteralfs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 54567799, "answer_count": 1, "score": 1, "last_activity_date": 1549522357, "creation_date": 1549491684, "question_id": 54563468, "link": "https://stackoverflow.com/questions/54563468/i-would-like-to-create-docs-for-a-shelf-button-in-maya-when-the-mouse-hovers-ove", "title": "I would like to create docs for a shelf button in Maya when the mouse hovers over the button", "body": "<p>I have a custom shelf in Maya with buttons built using the 'shelfButton' command. I would like to include short descriptions of what the button does when the mouse cursor hovers over the button. I have tried a couple of the available flags, like 'annotation,' but so far I have not gotten anything useful. </p>\n"}, {"tags": ["python", "python-2.7", "ansible", "ansible-inventory"], "comments": [{"owner": {"reputation": 26502, "user_id": 6482561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cd2b0768a40f668d90cf6f2b8b17caa?s=128&d=identicon&r=PG", "display_name": "Vladimir Botka", "link": "https://stackoverflow.com/users/6482561/vladimir-botka"}, "edited": false, "score": 0, "creation_date": 1549494104, "post_id": 54563459, "comment_id": 95926633, "body": "Why would they need <i>ansible_python_interpreter</i> then?"}, {"owner": {"reputation": 25, "user_id": 7888329, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hiV4MD-Qcls/AAAAAAAAAAI/AAAAAAAAACQ/JywaOphj934/photo.jpg?sz=128", "display_name": "Know Your Tech", "link": "https://stackoverflow.com/users/7888329/know-your-tech"}, "reply_to_user": {"reputation": 26502, "user_id": 6482561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cd2b0768a40f668d90cf6f2b8b17caa?s=128&d=identicon&r=PG", "display_name": "Vladimir Botka", "link": "https://stackoverflow.com/users/6482561/vladimir-botka"}, "edited": false, "score": 0, "creation_date": 1549513957, "post_id": 54563459, "comment_id": 95930941, "body": "My question is different. I wish ansible_python_interpreter to choose from a list of python. If we could provide multiple python to the ansible_python_interpreter and it chooses the one that connects successfully is something on the lines i m looking for. There could be other solutions as well."}], "answers": [{"tags": [], "owner": {"reputation": 22353, "user_id": 225016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d3c3ab5ddcf93a8ca1bfe1b481be1c?s=128&d=identicon&r=PG", "display_name": "mdaniel", "link": "https://stackoverflow.com/users/225016/mdaniel"}, "is_accepted": false, "score": 1, "last_activity_date": 1549520588, "creation_date": 1549520588, "answer_id": 54567439, "question_id": 54563459, "link": "https://stackoverflow.com/questions/54563459/query-regarding-ansible-python-interpreter/54567439#54567439", "title": "Query regarding ansible_python_interpreter", "body": "<blockquote>\n  <p>Is there a clever way to have ansible figure out where the desired python is?</p>\n</blockquote>\n\n<pre><code>- hosts: all\n  # since we have no working python yet, don't bother\n  gather_facts: no\n  vars:\n     possible_pythons:\n     - /usr/bin/python\n     - /opt/apps/xerto/tools/ansible/bin/python2.7\n     - /opt/atlassian/tools/ansible/bin/python2.7\n     - /opt/wsp/apps/ansible/python2.7/bin/python2.7\n  tasks:\n  - raw: if [ -x \"{{ item }}\" ]; then echo \"{{ item }}\"; fi\n    with_items: \"{{ possible_pythons }}\"\n    register: pystat\n    when: pystat is not defined or (pystat.stdout|length) == 0\n  - set_fact:\n      ansible_python_interpreter: '{{ pystat.results | selectattr(\"stdout\") | map(attribute=\"stdout\") | first }}'\n  # NOW we can run the fact gathering step\n  - setup:\n  - debug:\n      msg: and now we are off to the races!\n</code></pre>\n\n<p>I think it's certainly possible to use shell iteration to do that, too, but I didn't test it or think through all the edge cases:</p>\n\n<pre><code>- raw: |\n     PYTHONS='{{ possible_pythons | join(\" \") }}'\n     for p in $PYTHONS; do\n       if [ -x \"$p\" ]; then echo \"$p\"; break; fi\n     done\n  register: the_python\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 7888329, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hiV4MD-Qcls/AAAAAAAAAAI/AAAAAAAAACQ/JywaOphj934/photo.jpg?sz=128", "display_name": "Know Your Tech", "link": "https://stackoverflow.com/users/7888329/know-your-tech"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549520588, "creation_date": 1549491607, "last_edit_date": 1592644375, "question_id": 54563459, "link": "https://stackoverflow.com/questions/54563459/query-regarding-ansible-python-interpreter", "title": "Query regarding ansible_python_interpreter", "body": "<p>i have 500+ target servers that have a ansible compatible <code>python version 2.7</code>\ninstalled at different locations like shown below.</p>\n<blockquote>\n<p>/usr/bin/python /opt/apps/xerto/tools/ansible/bin/python2.7</p>\n<p>/opt/atlassian/tools/ansible/bin/python2.7</p>\n<p>/opt/wsp/apps/ansible/python2.7/bin/python2.7</p>\n<p>/opt/wsp/apps/tools/ansible/python2.7/bin/python2.7</p>\n<p>/opt/docs/python/bin/python2.7</p>\n<p>/home/admin/ansible/bin/python2.7</p>\n<p>/opt/operations/Python-2.7.8/bin/python</p>\n<p>/opt/ora/python/bin/python2.7</p>\n<p>/opt/tomcat/tools/ansible/bin/python2.7</p>\n</blockquote>\n<p>Everytime i have to set one the above python paths for  <code>ansible_python_interpreter</code> in the ansible host file depending on which target server my ansible is going to connect.</p>\n<p>My intention is to make little or no changes on the target servers instead deal with this issue at the ansible end.</p>\n<p>Is there a clever way to have ansible figure out where the desired python is?</p>\n<p>Please suggest.</p>\n<pre><code>Ansible version: 2.7.1\n</code></pre>\n"}, {"tags": ["python", "selenium", "xpath", "css-selectors", "webdriverwait"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11025469, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jwco_7LTuUc/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMPw3UXqQQSTsq0T0S3vGOJk4sEmw/mo/photo.jpg?sz=128", "display_name": "Matt", "link": "https://stackoverflow.com/users/11025469/matt"}, "edited": false, "score": 0, "creation_date": 1549493145, "post_id": 54563673, "comment_id": 95926278, "body": "Getting about the same error: Message: Unable to locate element: //input[@class=&#39;crtordbtn&#39;]"}, {"owner": {"reputation": 26505, "user_id": 10885684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b93ef11f20d07cf796af83ae1ffe83?s=128&d=identicon&r=PG&f=1", "display_name": "KunduK", "link": "https://stackoverflow.com/users/10885684/kunduk"}, "reply_to_user": {"reputation": 11, "user_id": 11025469, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jwco_7LTuUc/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMPw3UXqQQSTsq0T0S3vGOJk4sEmw/mo/photo.jpg?sz=128", "display_name": "Matt", "link": "https://stackoverflow.com/users/11025469/matt"}, "edited": false, "score": 0, "creation_date": 1549493272, "post_id": 54563673, "comment_id": 95926334, "body": "Then it must be under any frame or table could please check the input tag present inside any frame"}, {"owner": {"reputation": 11, "user_id": 11025469, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jwco_7LTuUc/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMPw3UXqQQSTsq0T0S3vGOJk4sEmw/mo/photo.jpg?sz=128", "display_name": "Matt", "link": "https://stackoverflow.com/users/11025469/matt"}, "edited": false, "score": 0, "creation_date": 1549493836, "post_id": 54563673, "comment_id": 95926539, "body": "I&#39;m sorry but how do I check the input tag present inside any frame?"}, {"owner": {"reputation": 26505, "user_id": 10885684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b93ef11f20d07cf796af83ae1ffe83?s=128&d=identicon&r=PG&f=1", "display_name": "KunduK", "link": "https://stackoverflow.com/users/10885684/kunduk"}, "reply_to_user": {"reputation": 11, "user_id": 11025469, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jwco_7LTuUc/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMPw3UXqQQSTsq0T0S3vGOJk4sEmw/mo/photo.jpg?sz=128", "display_name": "Matt", "link": "https://stackoverflow.com/users/11025469/matt"}, "edited": false, "score": 0, "creation_date": 1549494075, "post_id": 54563673, "comment_id": 95926621, "body": "If you go to your html source code just search iframe."}, {"owner": {"reputation": 26505, "user_id": 10885684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b93ef11f20d07cf796af83ae1ffe83?s=128&d=identicon&r=PG&f=1", "display_name": "KunduK", "link": "https://stackoverflow.com/users/10885684/kunduk"}, "reply_to_user": {"reputation": 11, "user_id": 11025469, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jwco_7LTuUc/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMPw3UXqQQSTsq0T0S3vGOJk4sEmw/mo/photo.jpg?sz=128", "display_name": "Matt", "link": "https://stackoverflow.com/users/11025469/matt"}, "edited": false, "score": 0, "creation_date": 1549494176, "post_id": 54563673, "comment_id": 95926657, "body": "However I have tested your html input on my machine and it is working with my code.That is why I am wondering any iframe is there."}, {"owner": {"reputation": 11, "user_id": 11025469, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jwco_7LTuUc/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMPw3UXqQQSTsq0T0S3vGOJk4sEmw/mo/photo.jpg?sz=128", "display_name": "Matt", "link": "https://stackoverflow.com/users/11025469/matt"}, "edited": false, "score": 0, "creation_date": 1549494401, "post_id": 54563673, "comment_id": 95926714, "body": "There are no matches for &quot;iframe&quot;"}, {"owner": {"reputation": 11, "user_id": 11025469, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jwco_7LTuUc/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMPw3UXqQQSTsq0T0S3vGOJk4sEmw/mo/photo.jpg?sz=128", "display_name": "Matt", "link": "https://stackoverflow.com/users/11025469/matt"}, "edited": false, "score": 0, "creation_date": 1549494492, "post_id": 54563673, "comment_id": 95926747, "body": "The button might be inside this frame but this id didn&#39;t work either:   &lt;tr align=&quot;center&quot;&gt;  &lt;td style=&quot;padding: 5px 40px 0px 40px;&quot;&gt;    &lt;input class=&quot;crtordbtn&quot; type=&quot;button&quot; value=&quot;eSysco Express&quot; id=&quot;esyscoExpress&quot; onClick=&quot;parent.location.href=&#39;<a href=\"http://flex2.esysco.net&#39;\" rel=\"nofollow noreferrer\">flex2.esysco.net&#39;</a>;&quot; /&gt;  &lt;/td&gt;  &lt;/tr&gt;  &lt;tr &gt;  &lt;td style=&quot;padding: 5px 40px 0px 40px;text-align:left&quot;&gt;  &lt;p&gt;Our latest order management application with improved performance and enhanced usability&lt;/p&gt; &lt;/td&gt; &lt;/tr&gt;"}, {"owner": {"reputation": 26505, "user_id": 10885684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b93ef11f20d07cf796af83ae1ffe83?s=128&d=identicon&r=PG&f=1", "display_name": "KunduK", "link": "https://stackoverflow.com/users/10885684/kunduk"}, "reply_to_user": {"reputation": 11, "user_id": 11025469, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jwco_7LTuUc/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMPw3UXqQQSTsq0T0S3vGOJk4sEmw/mo/photo.jpg?sz=128", "display_name": "Matt", "link": "https://stackoverflow.com/users/11025469/matt"}, "edited": false, "score": 0, "creation_date": 1549494815, "post_id": 54563673, "comment_id": 95926835, "body": "If button is there inside frame then you have to switch to frame first and then only above code will work."}, {"owner": {"reputation": 11, "user_id": 11025469, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jwco_7LTuUc/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMPw3UXqQQSTsq0T0S3vGOJk4sEmw/mo/photo.jpg?sz=128", "display_name": "Matt", "link": "https://stackoverflow.com/users/11025469/matt"}, "edited": false, "score": 0, "creation_date": 1549495066, "post_id": 54563673, "comment_id": 95926907, "body": "How do I switch to the frame first? I have never done that."}, {"owner": {"reputation": 26505, "user_id": 10885684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b93ef11f20d07cf796af83ae1ffe83?s=128&d=identicon&r=PG&f=1", "display_name": "KunduK", "link": "https://stackoverflow.com/users/10885684/kunduk"}, "reply_to_user": {"reputation": 11, "user_id": 11025469, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jwco_7LTuUc/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMPw3UXqQQSTsq0T0S3vGOJk4sEmw/mo/photo.jpg?sz=128", "display_name": "Matt", "link": "https://stackoverflow.com/users/11025469/matt"}, "edited": false, "score": 0, "creation_date": 1549495075, "post_id": 54563673, "comment_id": 95926914, "body": "Can you please post the table id which &lt;tr&gt; you have posted in previous comment"}, {"owner": {"reputation": 11, "user_id": 11025469, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jwco_7LTuUc/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMPw3UXqQQSTsq0T0S3vGOJk4sEmw/mo/photo.jpg?sz=128", "display_name": "Matt", "link": "https://stackoverflow.com/users/11025469/matt"}, "edited": false, "score": 0, "creation_date": 1549495325, "post_id": 54563673, "comment_id": 95926990, "body": "It looks like its id = &quot;esyscoExpress&quot;"}, {"owner": {"reputation": 26505, "user_id": 10885684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b93ef11f20d07cf796af83ae1ffe83?s=128&d=identicon&r=PG&f=1", "display_name": "KunduK", "link": "https://stackoverflow.com/users/10885684/kunduk"}, "reply_to_user": {"reputation": 11, "user_id": 11025469, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jwco_7LTuUc/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMPw3UXqQQSTsq0T0S3vGOJk4sEmw/mo/photo.jpg?sz=128", "display_name": "Matt", "link": "https://stackoverflow.com/users/11025469/matt"}, "edited": false, "score": 0, "creation_date": 1549495632, "post_id": 54563673, "comment_id": 95927084, "body": "I am editing my answer please confirm whether it worked."}, {"owner": {"reputation": 11, "user_id": 11025469, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jwco_7LTuUc/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMPw3UXqQQSTsq0T0S3vGOJk4sEmw/mo/photo.jpg?sz=128", "display_name": "Matt", "link": "https://stackoverflow.com/users/11025469/matt"}, "edited": false, "score": 0, "creation_date": 1549495890, "post_id": 54563673, "comment_id": 95927162, "body": "Same error: &quot;Message: Unable to locate element: //table[@id=&#39;esyscoExpress&#39;]/tbody/tr//input[@class=&#39;crtordb&zwnj;&#8203;tn&#39;]&quot;"}, {"owner": {"reputation": 26505, "user_id": 10885684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b93ef11f20d07cf796af83ae1ffe83?s=128&d=identicon&r=PG&f=1", "display_name": "KunduK", "link": "https://stackoverflow.com/users/10885684/kunduk"}, "reply_to_user": {"reputation": 11, "user_id": 11025469, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jwco_7LTuUc/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMPw3UXqQQSTsq0T0S3vGOJk4sEmw/mo/photo.jpg?sz=128", "display_name": "Matt", "link": "https://stackoverflow.com/users/11025469/matt"}, "edited": false, "score": 0, "creation_date": 1549496057, "post_id": 54563673, "comment_id": 95927211, "body": "Strange.Are you sure the table id = &quot;esyscoExpress&quot; ?"}, {"owner": {"reputation": 26505, "user_id": 10885684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b93ef11f20d07cf796af83ae1ffe83?s=128&d=identicon&r=PG&f=1", "display_name": "KunduK", "link": "https://stackoverflow.com/users/10885684/kunduk"}, "reply_to_user": {"reputation": 11, "user_id": 11025469, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jwco_7LTuUc/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMPw3UXqQQSTsq0T0S3vGOJk4sEmw/mo/photo.jpg?sz=128", "display_name": "Matt", "link": "https://stackoverflow.com/users/11025469/matt"}, "edited": false, "score": 0, "creation_date": 1549496796, "post_id": 54563673, "comment_id": 95927407, "body": "can you please paste the table here before I go to bed?"}, {"owner": {"reputation": 11, "user_id": 11025469, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jwco_7LTuUc/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMPw3UXqQQSTsq0T0S3vGOJk4sEmw/mo/photo.jpg?sz=128", "display_name": "Matt", "link": "https://stackoverflow.com/users/11025469/matt"}, "edited": false, "score": 0, "creation_date": 1549497147, "post_id": 54563673, "comment_id": 95927510, "body": "I added it to the bottom of my original post. I believe that is what you&#39;re looking for"}], "tags": [], "owner": {"reputation": 26505, "user_id": 10885684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b93ef11f20d07cf796af83ae1ffe83?s=128&d=identicon&r=PG&f=1", "display_name": "KunduK", "link": "https://stackoverflow.com/users/10885684/kunduk"}, "is_accepted": false, "score": 0, "last_activity_date": 1549495671, "last_edit_date": 1549495671, "creation_date": 1549492922, "answer_id": 54563673, "question_id": 54563453, "link": "https://stackoverflow.com/questions/54563453/script-cannot-find-button-using-xpath-or-id-or-anything-else-through-selenium-an/54563673#54563673", "title": "Script cannot find button using xpath or id or anything else through Selenium and Python", "body": "<p>Try this.It should work.</p>\n\n<pre><code>driver.find_element_by_xpath(\"//table[@id='esyscoExpress']/tbody/tr//input[@class='crtordbtn']\").click()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 11025469, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jwco_7LTuUc/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMPw3UXqQQSTsq0T0S3vGOJk4sEmw/mo/photo.jpg?sz=128", "display_name": "Matt", "link": "https://stackoverflow.com/users/11025469/matt"}, "edited": false, "score": 0, "creation_date": 1549557525, "post_id": 54566518, "comment_id": 95953643, "body": "Unfortunately it cannot find the ID either."}], "tags": [], "owner": {"reputation": 758, "user_id": 10317656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AQTdI.jpg?s=128&g=1", "display_name": "TavoGLC", "link": "https://stackoverflow.com/users/10317656/tavoglc"}, "is_accepted": false, "score": 0, "last_activity_date": 1549515278, "creation_date": 1549515278, "answer_id": 54566518, "question_id": 54563453, "link": "https://stackoverflow.com/questions/54563453/script-cannot-find-button-using-xpath-or-id-or-anything-else-through-selenium-an/54566518#54566518", "title": "Script cannot find button using xpath or id or anything else through Selenium and Python", "body": "<p>Perhaps trying with the id will work. Hope it helps</p>\n\n<pre><code>driver.find_element_by_id(\"MarketExpress\").click()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4651, "user_id": 6845383, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4PKMR3Y4-Fg/AAAAAAAAAAI/AAAAAAAAAAk/GQn04TEMI4c/photo.jpg?sz=128", "display_name": "Moshe Slavin", "link": "https://stackoverflow.com/users/6845383/moshe-slavin"}, "edited": false, "score": 0, "creation_date": 1549538525, "post_id": 54567954, "comment_id": 95942025, "body": "The best way for dynamic elements is <code>WebDriverWait</code>!"}, {"owner": {"reputation": 11, "user_id": 11025469, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jwco_7LTuUc/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMPw3UXqQQSTsq0T0S3vGOJk4sEmw/mo/photo.jpg?sz=128", "display_name": "Matt", "link": "https://stackoverflow.com/users/11025469/matt"}, "edited": false, "score": 0, "creation_date": 1549582026, "post_id": 54567954, "comment_id": 95964745, "body": "Thanks for the response. I received an error when trying the CSS_SELECTOR method: selenium.common.exceptions.WebDriverException: Message: Failed to decode response from marionette, getting the same error for XPATH as well."}], "tags": [], "owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "is_accepted": false, "score": 1, "last_activity_date": 1549523095, "creation_date": 1549523095, "answer_id": 54567954, "question_id": 54563453, "link": "https://stackoverflow.com/questions/54563453/script-cannot-find-button-using-xpath-or-id-or-anything-else-through-selenium-an/54567954#54567954", "title": "Script cannot find button using xpath or id or anything else through Selenium and Python", "body": "<p>The desired element is a dynamic element so to locate the element you have to induce <em>WebDriverWait</em> for the <em>element to be clickable</em> and you can use either of the following solutions:</p>\n\n<ul>\n<li><p>Using <code>CSS_SELECTOR</code>:</p>\n\n<pre><code>WebDriverWait(driver, 20).until(EC.element_to_be_clickable((By.CSS_SELECTOR, \"input.crtordbtn#MarketExpress[onclick*='OMAPX?userId']\"))).click()\n</code></pre></li>\n<li><p>Using <code>XPATH</code>:</p>\n\n<pre><code>WebDriverWait(driver, 20).until(EC.element_to_be_clickable((By.XPATH, \"//input[@class='crtordbtn' and @id='MarketExpress'][contains(@onclick, 'OMAPX?userId')]\"))).click()\n</code></pre></li>\n<li><p><strong>Note</strong> : You have to add the following imports :</p>\n\n<pre><code>from selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support import expected_conditions as EC\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 11, "user_id": 11025469, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jwco_7LTuUc/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMPw3UXqQQSTsq0T0S3vGOJk4sEmw/mo/photo.jpg?sz=128", "display_name": "Matt", "link": "https://stackoverflow.com/users/11025469/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 417, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1549523095, "creation_date": 1549491570, "last_edit_date": 1549523072, "question_id": 54563453, "link": "https://stackoverflow.com/questions/54563453/script-cannot-find-button-using-xpath-or-id-or-anything-else-through-selenium-an", "title": "Script cannot find button using xpath or id or anything else through Selenium and Python", "body": "<p>I'm pretty new at using Python but this seems like a pretty straight forward script I'm trying to write. I have been able to log-in to the website properly, but to get to the next step I am trying to click on a button that says \"Market Express\". </p>\n\n<p>I am able to see the xpath (//<em>[@id=\"MarketExpress\"]) as well as the button's id (MarketExpress). When I run the module I receive this error: \"Unable to locate element: //</em>[@id=\"MarketExpress\"]\"</p>\n\n<p>I have even double checked the xpath using Firefox's addon \"xpath finder\" to make sure I have the right code.</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom selenium.webdriver.common.keys import Keys\nfrom selenium.webdriver import ActionChains\n\nusernameStr = '***'\npasswordStr = '***'\n\ndriver = webdriver.Firefox()\ndriver.get(('https://www.myurl.com'))\n\nusername = driver.find_element_by_id('USERID')\nusername.send_keys(usernameStr)\npassword = WebDriverWait(driver, 10).until(\n    EC.presence_of_element_located((By.ID, 'currentPassword')))\npassword.send_keys(passwordStr)\nnextButton = driver.find_element_by_id('submit-button')\nnextButton.click()\n\npassword = driver.find_element_by_name('currentPassword')\npassword.send_keys(passwordStr)\nnextButton = driver.find_element_by_name('Submit')\nnextButton.click()\n\nmarketExpress = driver.find_element_by_xpath('//*[@id=\"MarketExpress\"]').click();\n</code></pre>\n\n<p>I have tried so many different things but cannot get the script to click this button, I would appreciate any help!</p>\n\n<p>Below is the html where the button is:</p>\n\n<pre><code>&lt;input class=\"crtordbtn\" type=\"button\" value=\"Market Express\" `id=\"MarketExpress\" onclick=\"parent.location.href='/OMAPX?userId=051220665&amp;amp;clientId=8&amp;amp;UserType=null&amp;amp;BuyerCookie=null';\"&gt;`\n</code></pre>\n\n<p>Below is the table where I believe the button is in:</p>\n\n<pre><code> &lt;div id=\"sidebar-left\" height=\"50%\" style=\"margin-right:10px\"&gt;\n&lt;div id=\"bar\" style=\"margin-right:-3px\"&gt;&lt;h1&gt;Select To Order&lt;/h1&gt;&lt;/div&gt;\n\n&lt;div style=\"width:100%; height:50%; border-left:1px solid #cccccc;border-right:1px solid #cccccc;border-bottom:1px solid #cccccc;margin-bottom:10px;\"&gt; \n\n &lt;table width=\"235px\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\"&gt;\n\n &lt;!--  &lt;tr align=\"center\"&gt;\n &lt;td style=\"padding: 5px 40px 0px 40px;\"&gt;\n\n\n &lt;input class=\"crtordbtn\" type=\"button\" value=\"eSysco Express\" id=\"esyscoExpress\" onClick=\"parent.location.href='http://flex2.esysco.net';\" /&gt;\n &lt;/td&gt;\n &lt;/tr&gt;\n &lt;tr &gt;\n &lt;td style=\"padding: 5px 40px 0px 40px;text-align:left\"&gt;\n &lt;p&gt;Our latest order management application with improved performance and enhanced usability&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;--&gt;\n\n&lt;tbody&gt;&lt;tr align=\"center\"&gt;\n\n    &lt;td style=\"padding: 5px 40px 0px 40px;\"&gt;\n\n            &lt;input class=\"crtordbtn\" type=\"button\" value=\"Market Express\" id=\"MarketExpress\" onclick=\"parent.location.href='/OMAPX?userId=051220665&amp;amp;clientId=8&amp;amp;UserType=null&amp;amp;BuyerCookie=null';\"&gt;\n\n\n    &lt;/td&gt;&lt;/tr&gt;\n    &lt;tr&gt;\n    &lt;td style=\"padding: 5px 40px 0px 40px;text-align:left\"&gt;\n        &lt;p&gt;Our latest order management application with improved performance and enhanced usability&lt;/p&gt;\n    &lt;/td&gt;&lt;/tr&gt;\n    &lt;tr&gt;\n\n\n\n&lt;/tr&gt;\n\n&lt;/tbody&gt;&lt;/table&gt;\n &lt;/div&gt;\n\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "tkinter"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 10054183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f673547d67673192e9cef6867b78a4b?s=128&d=identicon&r=PG&f=1", "display_name": "K. Hess", "link": "https://stackoverflow.com/users/10054183/k-hess"}, "edited": false, "score": 0, "creation_date": 1549493421, "post_id": 54563519, "comment_id": 95926385, "body": "Hmmm.... I changed my tuple definition from <code>Files_to_Delete = (V1, V2)</code> to <code>Files_to_Delete = (V1.get()), V2.get())</code> thinking that was brilliant! When I ran my script, it just cleared the entire folder instead of just the files with the extensions defined by the tk.Checkbutton. Maybe I&#39;m not fully understanding how to <code>str</code>-ify my tk.Checkbutton variables....  EDIT: After posting, I saw your message updated with OOP example. Unfortunately it is late and I must leave work, but I&#39;ll check back in on this first thing in the morning!"}, {"owner": {"reputation": 5007, "user_id": 10924296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483c21a8a3f03bbf92cb99539ec97dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Reedinationer", "link": "https://stackoverflow.com/users/10924296/reedinationer"}, "reply_to_user": {"reputation": 15, "user_id": 10054183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f673547d67673192e9cef6867b78a4b?s=128&d=identicon&r=PG&f=1", "display_name": "K. Hess", "link": "https://stackoverflow.com/users/10054183/k-hess"}, "edited": false, "score": 0, "creation_date": 1549493752, "post_id": 54563519, "comment_id": 95926508, "body": "@K.Hess sounds good! When I ran the code it output &quot;.com&quot; or &quot;0&quot; to the terminal, but you can configure the outputs as well. You may even want a <code>tk.BooleranVar()</code> depending on the situation."}, {"owner": {"reputation": 15, "user_id": 10054183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f673547d67673192e9cef6867b78a4b?s=128&d=identicon&r=PG&f=1", "display_name": "K. Hess", "link": "https://stackoverflow.com/users/10054183/k-hess"}, "edited": false, "score": 0, "creation_date": 1549550151, "post_id": 54563519, "comment_id": 95948966, "body": "After fiddling around, this does indeed work! I&#39;ve now begun using OOP myself. Thanks!"}], "tags": [], "owner": {"reputation": 5007, "user_id": 10924296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483c21a8a3f03bbf92cb99539ec97dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Reedinationer", "link": "https://stackoverflow.com/users/10924296/reedinationer"}, "is_accepted": true, "score": 1, "last_activity_date": 1549492716, "last_edit_date": 1549492716, "creation_date": 1549491942, "answer_id": 54563519, "question_id": 54563441, "link": "https://stackoverflow.com/questions/54563441/can-i-use-tk-checkbutton-to-add-variables-into-a-tuple/54563519#54563519", "title": "Can I use tk.Checkbutton to add variables into a tuple?", "body": "<p>tkinter variables must have their <code>.get()</code> method called if you want to find what the value has been set to. Here is an example you can mess around with. I prefer GUIs to be made with OOP, and I hope that doesn't confuse you</p>\n\n<pre><code>import tkinter as tk\n\n\nclass OOP:\n    def __init__(self):\n        self.win = tk.Tk()\n        self.com = tk.StringVar()\n        self.create_widgets()\n\n    def print_value(self):\n        print(self.com)\n        print(self.com.get())\n\n    def create_widgets(self):\n        tk.Checkbutton(self.win, text=\".com\", variable=self.com, onvalue=\".com\").pack()\n        tk.Button(self.win, text=\"Print value\", command=self.print_value).pack()\n\n\napp = OOP()\napp.win.mainloop()\n</code></pre>\n\n<p>You can also call <code>V1.set(\".com\")</code> (<code>self.com.set()</code> in my example) if you would like to initialize the variable to some value, or just change it's value at all during execution! This example shows that if you omit the <code>.get()</code> you will get some weird output like \"PY_VAR0\" instead of the actual value of the checkbutton</p>\n"}], "owner": {"reputation": 15, "user_id": 10054183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f673547d67673192e9cef6867b78a4b?s=128&d=identicon&r=PG&f=1", "display_name": "K. Hess", "link": "https://stackoverflow.com/users/10054183/k-hess"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 54563519, "answer_count": 1, "score": 0, "last_activity_date": 1549492716, "creation_date": 1549491516, "question_id": 54563441, "link": "https://stackoverflow.com/questions/54563441/can-i-use-tk-checkbutton-to-add-variables-into-a-tuple", "title": "Can I use tk.Checkbutton to add variables into a tuple?", "body": "<p>I have a python script to delete files by extension (i.e. delete all files that end with <code>.com</code>, <code>.html</code>, etc.). Currently, I have a tuple and the user must comment out or delete the files he or she wishes to NOT delete. If they want to keep <code>.com</code> files for instance, they must comment it out of my script. I would like to create a GUI with tkinter that allows the user to check which extensions they wish to delete.</p>\n\n<p>My objective is to place checked variables into a tuple where I can use the <code>.endswith()</code> command to <code>os.remove()</code> the files that end with the extensions listed in the tuple.</p>\n\n<p>Without a GUI, this is easy as I just define my tuple in a series of <code>str</code> strings. I could just say:</p>\n\n<p><code>Files_to_Delete = (\".com\", \".html\")</code></p>\n\n<p>But with my attempt at using <code>tk.Checkbutton()</code>, I get the error:</p>\n\n<p><em>tuple for endswith must only contain str, not StringVar</em></p>\n\n<p>I think I'm having a brain fart on how to fix that issue. My button is defined as below:</p>\n\n<pre><code>V1 = tk.StringVar()\nc1=tk.Checkbutton(root, text=\".com\", variable=V1, onvalue=\".com\")\n</code></pre>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1549492800, "post_id": 54563419, "comment_id": 95926164, "body": "The closest thing you can get to transparency with arbitrary Canvas shapes is to set a stipple pattern - but that&#39;s really a grid of completely opaque/completely transparent pixels, which is probably not quite the effect that you&#39;re looking for.  Also, it&#39;s not fully supported on all platforms - ovals can&#39;t be stippled on Windows, apparently it doesn&#39;t work at all on current Macs."}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1549495578, "post_id": 54563419, "comment_id": 95927074, "body": "No, there is no transparency option."}, {"owner": {"reputation": 165, "user_id": 10981522, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-n6SIDI2TDco/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQObx9Jnn_L_lm-M7N9iIcjARIXGcg/mo/photo.jpg?sz=128", "display_name": "John Liu", "link": "https://stackoverflow.com/users/10981522/john-liu"}, "edited": false, "score": 0, "creation_date": 1549503252, "post_id": 54563419, "comment_id": 95928852, "body": "so I just mix the colours to a decently accurate ratio?"}, {"owner": {"reputation": 381, "user_id": 10857478, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KjfXBs7ygwY/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbeUGanMpbSBAJcfKtQX8IXMWa3Rw/mo/photo.jpg?sz=128", "display_name": "Aivaras Kazakevi\u010dius", "link": "https://stackoverflow.com/users/10857478/aivaras-kazakevi%c4%8dius"}, "edited": false, "score": 0, "creation_date": 1549537359, "post_id": 54563419, "comment_id": 95941342, "body": "Maybe you can use tif images with no background (transparent) instead of creating canvas objects?"}, {"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1549540442, "post_id": 54563419, "comment_id": 95943221, "body": "Relevant <a href=\"https://stackoverflow.com/questions/tagged/python+tkinter+transparency\">tkinter+transparency</a>"}, {"owner": {"reputation": 165, "user_id": 10981522, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-n6SIDI2TDco/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQObx9Jnn_L_lm-M7N9iIcjARIXGcg/mo/photo.jpg?sz=128", "display_name": "John Liu", "link": "https://stackoverflow.com/users/10981522/john-liu"}, "edited": false, "score": 0, "creation_date": 1549578246, "post_id": 54563419, "comment_id": 95963461, "body": "Relevant but doesn&#39;t help much - looking for object properties not widgets"}], "owner": {"reputation": 165, "user_id": 10981522, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-n6SIDI2TDco/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQObx9Jnn_L_lm-M7N9iIcjARIXGcg/mo/photo.jpg?sz=128", "display_name": "John Liu", "link": "https://stackoverflow.com/users/10981522/john-liu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1549491429, "creation_date": 1549491429, "question_id": 54563419, "link": "https://stackoverflow.com/questions/54563419/tkinter-canvas-object-transparency-option", "title": "Tkinter Canvas Object Transparency Option?", "body": "<p>I was wondering if there is a transparency option for tkinter canvas objects. </p>\n\n<p>i.e </p>\n\n<pre><code>canvas.create_oval(x1, x2, y1, y2, transparency...)\n</code></pre>\n\n<p>If not, is there a non-pythonic way of doing the same thing?</p>\n"}, {"tags": ["python", "python-3.x", "process"], "answers": [{"comments": [{"owner": {"reputation": 462, "user_id": 1806124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zOf8n.png?s=128&g=1", "display_name": "Endogen", "link": "https://stackoverflow.com/users/1806124/endogen"}, "edited": false, "score": 0, "creation_date": 1549492885, "post_id": 54563572, "comment_id": 95926194, "body": "Thanks for this Martijn and sorry for wasting your time with this but it doesn&#39;t work. There is no error but the script will not be started again. The script just exits and i&#39;m back at the command line."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 462, "user_id": 1806124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zOf8n.png?s=128&g=1", "display_name": "Endogen", "link": "https://stackoverflow.com/users/1806124/endogen"}, "edited": false, "score": 0, "creation_date": 1549493070, "post_id": 54563572, "comment_id": 95926253, "body": "@Endogen: we already have a weird situation here, as your claim that <code>START</code> is a <i>class</i>, not a module. Can you please, in your question, add a clear illustration of what files you have and minimal contents of those files to help me reproduce your issue here?"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 462, "user_id": 1806124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zOf8n.png?s=128&g=1", "display_name": "Endogen", "link": "https://stackoverflow.com/users/1806124/endogen"}, "edited": false, "score": 0, "creation_date": 1549493260, "post_id": 54563572, "comment_id": 95926330, "body": "@Endogen: I have no issue making this work with <code>START.py</code> being a file inside an otherwise empty <code>opencryptobot</code> directory (Python 3 treats that as a namespace package, you shouldn&#39;t really use it that way)."}, {"owner": {"reputation": 462, "user_id": 1806124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zOf8n.png?s=128&g=1", "display_name": "Endogen", "link": "https://stackoverflow.com/users/1806124/endogen"}, "edited": false, "score": 0, "creation_date": 1549493562, "post_id": 54563572, "comment_id": 95926443, "body": "Ah ok, so it works if i add the Python extension? I will try that. Please see the link in my edited question for the current folder structure"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 462, "user_id": 1806124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zOf8n.png?s=128&g=1", "display_name": "Endogen", "link": "https://stackoverflow.com/users/1806124/endogen"}, "edited": false, "score": 0, "creation_date": 1549493645, "post_id": 54563572, "comment_id": 95926474, "body": "@Endogen: no, put that tree <i>in your question</i>, and make it a minimal example."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 462, "user_id": 1806124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zOf8n.png?s=128&g=1", "display_name": "Endogen", "link": "https://stackoverflow.com/users/1806124/endogen"}, "edited": false, "score": 0, "creation_date": 1549493707, "post_id": 54563572, "comment_id": 95926491, "body": "@Endogen: and you do have the extension, I see a <code>START.py</code> file in that tree under the <code>opencryptobot</code> directory."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 462, "user_id": 1806124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zOf8n.png?s=128&g=1", "display_name": "Endogen", "link": "https://stackoverflow.com/users/1806124/endogen"}, "edited": false, "score": 0, "creation_date": 1549493765, "post_id": 54563572, "comment_id": 95926514, "body": "@Endogen: you <b>really</b> don&#39;t want to make that an implicit namespace package, add a <code>__init__.py</code> file to the directory. It can be empty. Same for the subdirectories inside that package."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 462, "user_id": 1806124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zOf8n.png?s=128&g=1", "display_name": "Endogen", "link": "https://stackoverflow.com/users/1806124/endogen"}, "edited": false, "score": 0, "creation_date": 1549493956, "post_id": 54563572, "comment_id": 95926576, "body": "@Endogen: just to illustrate, you could just show that you have <a href=\"https://hastebin.com/tolapezeyu.css\" rel=\"nofollow noreferrer\">this layout</a>, that suffices to show me that you have an actual module named <code>START</code>."}, {"owner": {"reputation": 462, "user_id": 1806124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zOf8n.png?s=128&g=1", "display_name": "Endogen", "link": "https://stackoverflow.com/users/1806124/endogen"}, "edited": false, "score": 0, "creation_date": 1549494614, "post_id": 54563572, "comment_id": 95926781, "body": "I added the <code>__init.py__</code> files. Had them already at some point and didn&#39;t see any difference so i removed them again. After trying to execute the script without <code>-m</code> i see the following error: <code>Python: can&#39;t open file &#39;opencryptobot.START&#39;: [Errno 2] No such file or directory</code>. I&#39;m running this from the root dir of the tree"}, {"owner": {"reputation": 462, "user_id": 1806124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zOf8n.png?s=128&g=1", "display_name": "Endogen", "link": "https://stackoverflow.com/users/1806124/endogen"}, "edited": false, "score": 0, "creation_date": 1549494734, "post_id": 54563572, "comment_id": 95926809, "body": "This would then be <code>python3.7 opencryptobot.START -lvl 20</code>"}, {"owner": {"reputation": 462, "user_id": 1806124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zOf8n.png?s=128&g=1", "display_name": "Endogen", "link": "https://stackoverflow.com/users/1806124/endogen"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1549495378, "post_id": 54563572, "comment_id": 95927002, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/188025/discussion-between-endogen-and-martijn-pieters\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 3, "last_activity_date": 1549494013, "last_edit_date": 1549494013, "creation_date": 1549492333, "answer_id": 54563572, "question_id": 54563405, "link": "https://stackoverflow.com/questions/54563405/how-to-restart-my-python-script-if-i-run-it-with-python-m/54563572#54563572", "title": "How to restart my Python script if I run it with &quot;python -m&quot;?", "body": "<p><code>sys.argv</code> does <strong>not</strong> start with <code>-m opencryptobot.START</code>. The module name is removed from the <code>sys.argv</code> list altogether while resolving the <code>opencryptobot.START</code> module filename (<code>sys.argv</code> is set to <code>['-m', '-lvl', '20']</code> until there is a filename) and then <code>'-m'</code> is replaced with the full filename of the module.</p>\n\n<p>From the <a href=\"https://docs.python.org/3/using/cmdline.html#cmdoption-m\" rel=\"nofollow noreferrer\"><code>-m</code> switch documentation</a>:</p>\n\n<blockquote>\n  <p>If this option is given, the first element of <code>sys.argv</code> will be the full path to the module file (while the module file is being located, the first element will be set to <code>\"-m\"</code>).</p>\n</blockquote>\n\n<p>In effect, Python is simulating running a script, as if you ran <code>python /path/to/opencrytobot/START.py ...</code>; only the <code>__package__</code> context is kept so you can still use package-relative imports such as <code>from . import ...</code>.</p>\n\n<p>So to <em>recreate</em> your original command-line, use <code>'-m', __spec__.name, *sys.argv[1:]</code> as the argument list beyond <code>sys.executable</code>:</p>\n\n<pre><code>os.execl(sys.executable, sys.executable, '-m', __spec__.name, *sys.argv[1:])\n</code></pre>\n\n<p>You can't use <code>__name__</code>, unfortunately, as that has been set to <code>'__main__'</code> when using <code>-m</code>. However, the <a href=\"https://docs.python.org/3/reference/import.html#main-spec\" rel=\"nofollow noreferrer\"><code>__spec__</code> object set on your module</a> does know what the full qualified name is for the current module, so we can re-use that here.</p>\n\n<p>Note that even though there is no <code>__init__.py</code> file in <code>opencryptobot</code>, by using <code>-m</code> you are telling Python that <code>opencryptobot</code> is really an <a href=\"https://docs.python.org/3/whatsnew/3.3.html#pep-420-implicit-namespace-packages\" rel=\"nofollow noreferrer\">implicit namespace package</a>. If that wasn't the intention here, then <em>don't use <code>-m</code> to load your script</em>.</p>\n\n<p>Demo:</p>\n\n<pre><code>$ ls -1 opencryptobot/\nSTART.py\n$ cat opencryptobot/START.py\nimport sys\nimport os\n\nif __name__ == '__main__':\n    print('Running as the __main__ script')\n    print('sys.argv:', sys.argv)\n    print('__spec__.name:', __spec__.name)\n\n    if 'restarted' not in sys.argv:\n        print('Respawning:')\n        # add an extra command-line option to stop respawning a second time\n        os.execl(sys.executable, sys.executable, '-m', __spec__.name, *sys.argv[1:], 'restarted')\n$ python3.7 -m opencryptobot.START -lvl 20\nRunning as the __main__ script\nsys.argv: ['/.../opencryptobot/START.py', '-lvl', '20']\n__spec__.name: opencryptobot.START\nRespawning:\nRunning as the __main__ script\nsys.argv: ['/.../opencryptobot/START.py', '-lvl', '20', 'restarted']\n__spec__.name: opencryptobot.START\n</code></pre>\n"}], "owner": {"reputation": 462, "user_id": 1806124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zOf8n.png?s=128&g=1", "display_name": "Endogen", "link": "https://stackoverflow.com/users/1806124/endogen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 54563572, "answer_count": 1, "score": 0, "last_activity_date": 1549497123, "creation_date": 1549491337, "last_edit_date": 1549497123, "question_id": 54563405, "link": "https://stackoverflow.com/questions/54563405/how-to-restart-my-python-script-if-i-run-it-with-python-m", "title": "How to restart my Python script if I run it with &quot;python -m&quot;?", "body": "<p>I run my Python script with</p>\n\n<pre><code>python3.7 -m opencryptobot.START -lvl 20\n</code></pre>\n\n<p><code>opencryptobot</code> is a folder here and <code>START</code> is a module. At some point I'd like to restart the script with this code:</p>\n\n<pre><code>os.execl(sys.executable, sys.executable, *sys.argv)\n</code></pre>\n\n<p>I use this code because it worked perfectly for my other scripts that I don't execute with the <code>-m</code> argument. So the above code will be executed at some point and then I get this error:</p>\n\n<pre><code>ModuleNotFoundError: No module named 'opencryptobot'\n</code></pre>\n\n<p>Which sounds correct since <code>opencryptobot</code> is just a folder and not a module. I played around with various versions of <code>os.exec</code> to see if I\u2019m able to restart it but nothing really works.</p>\n\n<p>So my question is, how can I restart my script if I run it the way I do?</p>\n\n<p>This is a minimal version of my folder structure:</p>\n\n<pre><code>.\n\u251c\u2500\u2500 LICENSE\n\u251c\u2500\u2500 Pipfile\n\u251c\u2500\u2500 Pipfile.lock\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 opencryptobot\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 START.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 config.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 constants.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 database.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 emoji.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 plugin.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 plugins\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 about.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 admin.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 alltimehigh.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 ratelimit.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 telegrambot.py\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 utils.py\n\u2514\u2500\u2500 start.sh\n</code></pre>\n\n<p>I execute <code>START</code> from the root folder.</p>\n"}, {"tags": ["python", "pandas", "python-2.7"], "answers": [{"tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": false, "score": 5, "last_activity_date": 1549491435, "creation_date": 1549491435, "answer_id": 54563421, "question_id": 54563388, "link": "https://stackoverflow.com/questions/54563388/how-to-repeat-a-pandas-data-frame-column-x-amount-of-times/54563421#54563421", "title": "How to repeat a pandas data frame column x amount of times?", "body": "<p>Use <code>concat</code>:</p>\n\n<pre><code>n = 3\npd.concat([df] * (n+1), axis=1, ignore_index=True)\n\n   0  1  2  3\n1  8  8  8  8\n2  9  9  9  9\n3  7  7  7  7\n4  2  2  2  2\n</code></pre>\n\n<hr>\n\n<p>If you want the columns renamed, use <code>rename</code>:</p>\n\n<pre><code>(pd.concat([df] * (n+1), axis=1, ignore_index=True)\n   .rename(lambda x: chr(ord('A')+x), axis=1))\n\n   A  B  C  D\n1  8  8  8  8\n2  9  9  9  9\n3  7  7  7  7\n4  2  2  2  2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "is_accepted": false, "score": 0, "last_activity_date": 1549491679, "creation_date": 1549491679, "answer_id": 54563466, "question_id": 54563388, "link": "https://stackoverflow.com/questions/54563388/how-to-repeat-a-pandas-data-frame-column-x-amount-of-times/54563466#54563466", "title": "How to repeat a pandas data frame column x amount of times?", "body": "<p>You can use <code>concat</code> like @coldspeed <a href=\"https://stackoverflow.com/a/54563421/225020\">did</a>.</p>\n\n<p>Or you can set them manually.</p>\n\n<pre><code>df['B'] = df.A\ndf['C'] = df.A\ndf['D'] = df.A\nprint(df)\n\n   A  B  C  D\n1  8  8  8  8\n2  9  9  9  9\n3  7  7  7  7\n4  2  2  2  2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "is_accepted": false, "score": 1, "last_activity_date": 1549492429, "creation_date": 1549492429, "answer_id": 54563591, "question_id": 54563388, "link": "https://stackoverflow.com/questions/54563388/how-to-repeat-a-pandas-data-frame-column-x-amount-of-times/54563591#54563591", "title": "How to repeat a pandas data frame column x amount of times?", "body": "<p>You can use Numpy to repeat the values and reconstruct the dataframe.</p>\n\n<pre><code>n = 3\npd.DataFrame(np.tile(df.values, n + 1), columns = df.columns.tolist()+list('BCD'))\n\n    A   B   C   D\n0   8   8   8   8\n1   9   9   9   9\n2   7   7   7   7\n3   2   2   2   2\n</code></pre>\n"}], "owner": {"reputation": 716, "user_id": 5487719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c13222ec55741a745468165dd471315?s=128&d=identicon&r=PG&f=1", "display_name": "Zmann3000", "link": "https://stackoverflow.com/users/5487719/zmann3000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 931, "favorite_count": 1, "answer_count": 3, "score": 2, "last_activity_date": 1549492429, "creation_date": 1549491267, "question_id": 54563388, "link": "https://stackoverflow.com/questions/54563388/how-to-repeat-a-pandas-data-frame-column-x-amount-of-times", "title": "How to repeat a pandas data frame column x amount of times?", "body": "<p>If I have a Pandas Dataframe like this:</p>\n\n<pre><code>    A\n 1  8\n 2  9\n 3  7\n 4  2\n</code></pre>\n\n<p>How do I repeat it x number of times? For example, if I wanted to repeat it 3 times I would get something like this:</p>\n\n<pre><code>    A  B  C  D\n 1  8  8  8  8\n 2  9  9  9  9\n 3  7  7  7  7\n 4  2  2  2  2\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "keras", "neural-network", "montecarlo"], "answers": [{"comments": [{"owner": {"reputation": 473, "user_id": 7582019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfdf8b3079c178801be08bb89c223595?s=128&d=identicon&r=PG&f=1", "display_name": "A555h55", "link": "https://stackoverflow.com/users/7582019/a555h55"}, "edited": false, "score": 0, "creation_date": 1554371451, "post_id": 54589016, "comment_id": 97730586, "body": "Hi @gasperdb, This is interesting stuff. Would you mind posting your keras network architecture including compilation stage so I can take a look at the network and loss you used - I&#39;m guessing you used KL divergence somehow to generate mu and sigma (much like in a variational autoencoder) and then MSE to compare your output? Thanks!"}, {"owner": {"reputation": 1, "user_id": 11025405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b2669c6752944c781f5950388ce5080?s=128&d=identicon&r=PG&f=1", "display_name": "gaspardb", "link": "https://stackoverflow.com/users/11025405/gaspardb"}, "reply_to_user": {"reputation": 473, "user_id": 7582019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfdf8b3079c178801be08bb89c223595?s=128&d=identicon&r=PG&f=1", "display_name": "A555h55", "link": "https://stackoverflow.com/users/7582019/a555h55"}, "edited": false, "score": 0, "creation_date": 1554473033, "post_id": 54589016, "comment_id": 97777819, "body": "Hi @A555h55. In fact, I tried to tweak the code from <a href=\"https://github.com/voxelmorph/voxelmorph\" rel=\"nofollow noreferrer\">github.com/voxelmorph/voxelmorph</a> ; my contribution only add to this modified loss function, plus a modification on the generator : <code>yield ([X, atlas_vol_bs], [np.stack([atlas_vol_bs] * mc_samples, axis=-2), zeros])</code> The author isn&#39;t using a VAE, but it is indeed very close to that. You can look at their implementation of a KL loss. Let me know if that&#39;s not clear!"}], "tags": [], "owner": {"reputation": 1, "user_id": 11025405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b2669c6752944c781f5950388ce5080?s=128&d=identicon&r=PG&f=1", "display_name": "gaspardb", "link": "https://stackoverflow.com/users/11025405/gaspardb"}, "is_accepted": true, "score": 0, "last_activity_date": 1549616847, "creation_date": 1549616847, "answer_id": 54589016, "question_id": 54563387, "link": "https://stackoverflow.com/questions/54563387/loop-over-a-layer-to-do-a-monte-carlo-from-a-neural-net-output/54589016#54589016", "title": "Loop over a layer to do a Monte Carlo from a neural net output", "body": "<p>Ok, my question was a bit stupid. So as not to duplicate layers, I created multiple slice layers, and then I simply propagated them through the net with previously declared layers. Here's my code :</p>\n\n<pre><code># First declare layers\na = layer_A()\nb = layer_B()\n# And so on ...\n# Generate samples\nsamples = generate_samples()([mu, sigma])\n# for all the monte carlo samples, do : \nfor i in range(mc_samples):\n    cur_sample = Lambda(lambda x: K.slice(x, (0, 0, 0, 2*i), (-1, -1, -1, 2)), name=\"slice-%i\" % i)(samples)\n    cur_output = a(cur_sample)\n    cur_output = b(cur_output)\n    all_output.append(output)\noutput_of_net = keras.layers.concatenate(all_output)\nreturn Model(inputs=inputs, outputs=output_of_net)\n</code></pre>\n\n<p>Simply loop over the last dimension in the loss function, average, and you're done ! A glimpse at my loss :</p>\n\n<pre><code>loss = 0\nfor i in range(mc_samples):\n    loss += f(y_true[..., i], y_pred[..., i])\nreturn loss/mc_samples\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11025405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b2669c6752944c781f5950388ce5080?s=128&d=identicon&r=PG&f=1", "display_name": "gaspardb", "link": "https://stackoverflow.com/users/11025405/gaspardb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 54589016, "answer_count": 1, "score": 0, "last_activity_date": 1549616847, "creation_date": 1549491261, "last_edit_date": 1549616232, "question_id": 54563387, "link": "https://stackoverflow.com/questions/54563387/loop-over-a-layer-to-do-a-monte-carlo-from-a-neural-net-output", "title": "Loop over a layer to do a Monte Carlo from a neural net output", "body": "<p>I've recently had to tweak a neural network. Here's how it works:</p>\n\n<ul>\n<li>Given an image as input, several layer turns it into a mean matrix <code>mu</code> and a covariance matrix <code>sigma</code>. </li>\n<li>Then, a sample <code>z</code> is taken from the Gaussian distribution of parameters <code>mu</code>, <code>sigma</code>.</li>\n<li>Several layer turns this sample into an output</li>\n<li>this output is compared to a given image, which gives a cost</li>\n</ul>\n\n<p>What I want to do is to keep <code>mu</code> and <code>sigma</code>, take <em>multiple</em> samples <code>z</code>, propagate them through the rest of the NN, and compare the <em>multiple</em> images I get to a given image.  </p>\n\n<p>Note that the step <code>z</code> -> image output calls other package, I'd like not having to dig into these... </p>\n\n<p>What I did so far : </p>\n\n<ul>\n<li>At first, I thought I did not need to go through all this hassle : I take a <code>batch_size</code> of one, it is as if I'm doing a Monte Carlo by running the NN multiple times. But I actually <em>need</em> the neural net to try several image before updating the weights, and thus changing <code>mu</code> and <code>sigma</code>. </li>\n<li>I simply sampled multiple <code>z</code> then propagated them through the net. But I soon discovered that I was duplicating all the layers, making the code <strong>terribly</strong> slow, and above all preventing me from taking many samples to achieve the MC I'm aiming at.</li>\n</ul>\n\n<p>Of course, I updated the loss and data input classes to take that into account. </p>\n\n<p>Do you have any ideas ? Basically, I'd like an efficient way to make <code>z</code> -> <code>output</code> multiple time, in a cost-efficient manner. I've still a lot to learn from tensorflow and keras, so I'm a little bit lost on how to do that. As usual, please apologized if an answer already exists somewhere, I did my best to look for one by myself! </p>\n"}, {"tags": ["python", "flask"], "comments": [{"owner": {"reputation": 2967, "user_id": 4828815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/--CqgH2V98Jg/AAAAAAAAAAI/AAAAAAAAABY/lilOgpMEIEs/photo.jpg?sz=128", "display_name": "Poojan", "link": "https://stackoverflow.com/users/4828815/poojan"}, "edited": false, "score": 0, "creation_date": 1549491301, "post_id": 54563358, "comment_id": 95925667, "body": "can you also please post your error stacktrace.?"}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1549491315, "post_id": 54563358, "comment_id": 95925669, "body": "Show the full traceback."}, {"owner": {"reputation": 11, "user_id": 10885344, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ds7EWS2_m-s/AAAAAAAAAAI/AAAAAAAAABc/Ht142fiBbZo/photo.jpg?sz=128", "display_name": "Carl", "link": "https://stackoverflow.com/users/10885344/carl"}, "edited": false, "score": 0, "creation_date": 1549493515, "post_id": 54563358, "comment_id": 95926427, "body": "i have added it"}], "answers": [{"tags": [], "owner": {"reputation": 1311, "user_id": 3749058, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/vzrdA.jpg?s=128&g=1", "display_name": "kellymandem", "link": "https://stackoverflow.com/users/3749058/kellymandem"}, "is_accepted": false, "score": -1, "last_activity_date": 1549533406, "creation_date": 1549533406, "answer_id": 54570637, "question_id": 54563358, "link": "https://stackoverflow.com/questions/54563358/flask-valueerror-dictionary-update-sequence-element-0-has-length-1-2-is-req/54570637#54570637", "title": "FLASK - ValueError: dictionary update sequence element #0 has length 1; 2 is required", "body": "<p>From the looks of things you need to change this line</p>\n\n<pre><code>flight = NewFlight(\n    flight_number=form.flight_number.data, \n    data=form.date.data, \n    image=form.picture.data, \n    destination=form.destination.data, \n    fly_from=form.fly_from.data, \n    price=form.price.data)\n</code></pre>\n\n<p>to this</p>\n\n<pre><code>flight = CurrentFlights(\n    flight_number=form.flight_number.data, \n    data=form.date.data, \n    image=form.picture.data, \n    destination=form.destination.data, \n    fly_from=form.fly_from.data, \n    price=form.price.data)\n</code></pre>\n\n<p>Because <code>NewFlight</code> is for initialising the form and <code>CurrentFlights</code> is for initialising the database model</p>\n"}], "owner": {"reputation": 11, "user_id": 10885344, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ds7EWS2_m-s/AAAAAAAAAAI/AAAAAAAAABc/Ht142fiBbZo/photo.jpg?sz=128", "display_name": "Carl", "link": "https://stackoverflow.com/users/10885344/carl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 280, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1549533406, "creation_date": 1549491099, "last_edit_date": 1549493483, "question_id": 54563358, "link": "https://stackoverflow.com/questions/54563358/flask-valueerror-dictionary-update-sequence-element-0-has-length-1-2-is-req", "title": "FLASK - ValueError: dictionary update sequence element #0 has length 1; 2 is required", "body": "<p>i dont know what i am doing wrong as this as worked with other examples, but i am trying to use a form to add new flights to a sql database and show them on a html page, now when i try to post the form, i get this error ValueError: dictionary update sequence element #0 has length 1; 2 is required</p>\n\n<p>Here is the form class:</p>\n\n<pre><code>class NewFlight(FlaskForm):\n\n    flight_number = IntegerField('Flight Number', validators=[DataRequired()])\n\n    date = StringField('Departure date', validators=[DataRequired()])\n\n    picture = FileField('Upload Cover Image', validators=[FileAllowed(['jpg', 'png'])])\n\n    destination = StringField('Destination Airport', validators=[DataRequired()])\n\n    fly_from = StringField('Departure Location', validators=[DataRequired()])\n\n    price = IntegerField('Price', validators=[DataRequired()])\n\n    submit = SubmitField('Add Flight')\n</code></pre>\n\n<p>and the models class for SQL:</p>\n\n<pre><code>class CurrentFlights(db.Model):\n    id = db.Column(db.Integer, primary_key=True)\n    flight_number = db.Column(db.Integer, unique=True, nullable=False)\n    date = db.Column(db.String(100), nullable=False)\n    image = db.Column(db.String(20), nullable=False, default='plane.jpg')\n    destination = db.Column(db.String(100), nullable=False)\n    fly_from = db.Column(db.String(100), nullable=False)\n    price = db.Column(db.Integer, nullable=False)\n</code></pre>\n\n<p>and the routes section:</p>\n\n<pre><code>@app.route('/add_flight', methods=['GET', 'POST'])\ndef add_flight():\n    form = NewFlight()\n    if form.validate_on_submit():\n        flight = NewFlight(flight_number=form.flight_number.data, data=form.date.data, image=form.picture.data, destination=form.destination.data, fly_from=form.fly_from.data, price=form.price.data)\n        db.session.add(flight)\n        db.session.commit()\n        flash('New Flight added to database!', 'success')\n        return redirect(url_for('home'))\n    return render_template('admin_AddFlights.html', title='Add New Flight', form=form)\n</code></pre>\n\n<p>it may be a silly mistake but any help will be appreciated,</p>\n\n<p>Thanks!</p>\n\n<p>traceback:</p>\n\n<pre><code>C:\\Users\\CarlSecondAccount\\PycharmProjects\\flight_tracker\\pythonmain\\lib\\site-packages\\flask_sqlalchemy\\__init__.py:794: FSADeprecationWarning: SQLALCHEMY_TRACK_MODIFICATIONS adds significant overhead and will be disabled by default in the future.  Set it to True or False to suppress this warning.\n  'SQLALCHEMY_TRACK_MODIFICATIONS adds significant overhead and '\n * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)\n127.0.0.1 - - [06/Feb/2019 22:49:12] \"GET / HTTP/1.1\" 200 -\n127.0.0.1 - - [06/Feb/2019 22:49:15] \"GET /login HTTP/1.1\" 200 -\n127.0.0.1 - - [06/Feb/2019 22:49:16] \"GET /admin_menu HTTP/1.1\" 200 -\n127.0.0.1 - - [06/Feb/2019 22:49:20] \"GET /admin_menu HTTP/1.1\" 200 -\n127.0.0.1 - - [06/Feb/2019 22:49:38] \"POST /admin_menu HTTP/1.1\" 302 -\n127.0.0.1 - - [06/Feb/2019 22:49:38] \"GET /admin_home HTTP/1.1\" 200 -\n127.0.0.1 - - [06/Feb/2019 22:49:58] \"GET /add_flight HTTP/1.1\" 200 -\n[2019-02-06 22:50:15,100] ERROR in app: Exception on /add_flight [POST]\nTraceback (most recent call last):\n  File \"C:\\Users\\CarlSecondAccount\\PycharmProjects\\flight_tracker\\pythonmain\\lib\\site-packages\\flask\\app.py\", line 2292, in wsgi_app\n    response = self.full_dispatch_request()\n  File \"C:\\Users\\CarlSecondAccount\\PycharmProjects\\flight_tracker\\pythonmain\\lib\\site-packages\\flask\\app.py\", line 1815, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n  File \"C:\\Users\\CarlSecondAccount\\PycharmProjects\\flight_tracker\\pythonmain\\lib\\site-packages\\flask\\app.py\", line 1718, in handle_user_exception\n    reraise(exc_type, exc_value, tb)\n  File \"C:\\Users\\CarlSecondAccount\\PycharmProjects\\flight_tracker\\pythonmain\\lib\\site-packages\\flask\\_compat.py\", line 35, in reraise\n    raise value\n  File \"C:\\Users\\CarlSecondAccount\\PycharmProjects\\flight_tracker\\pythonmain\\lib\\site-packages\\flask\\app.py\", line 1813, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"C:\\Users\\CarlSecondAccount\\PycharmProjects\\flight_tracker\\pythonmain\\lib\\site-packages\\flask\\app.py\", line 1799, in dispatch_request\n    return self.view_functions[rule.endpoint](**req.view_args)\n  File \"C:\\Users\\CarlSecondAccount\\PycharmProjects\\flight_tracker\\flight\\routes.py\", line 118, in add_flight\n    flight = NewFlight(flight_number=form.flight_number.data, data=form.date.data, image=form.picture.data, destination=form.destination.data, fly_from=form.fly_from.data, price=form.price.data)\n  File \"C:\\Users\\CarlSecondAccount\\PycharmProjects\\flight_tracker\\pythonmain\\lib\\site-packages\\wtforms\\form.py\", line 212, in __call__\n    return type.__call__(cls, *args, **kwargs)\n  File \"C:\\Users\\CarlSecondAccount\\PycharmProjects\\flight_tracker\\pythonmain\\lib\\site-packages\\flask_wtf\\form.py\", line 88, in __init__\n    super(FlaskForm, self).__init__(formdata=formdata, **kwargs)\n  File \"C:\\Users\\CarlSecondAccount\\PycharmProjects\\flight_tracker\\pythonmain\\lib\\site-packages\\wtforms\\form.py\", line 278, in __init__\n    self.process(formdata, obj, data=data, **kwargs)\n  File \"C:\\Users\\CarlSecondAccount\\PycharmProjects\\flight_tracker\\pythonmain\\lib\\site-packages\\wtforms\\form.py\", line 124, in process\n    kwargs = dict(data, **kwargs)\nValueError: dictionary update sequence element #0 has length 1; 2 is required\n127.0.0.1 - - [06/Feb/2019 22:50:15] \"POST /add_flight HTTP/1.1\" 500 \n</code></pre>\n"}, {"tags": ["python", "flask", "smtp", "zoho", "flask-mail"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1549491253, "post_id": 54563348, "comment_id": 95925650, "body": "Why the combined <code>app.app_context()</code> and <code>app.test_request_context()</code>? Are you calling that function from some non-request context elsewhere? You don&#39;t need that when calling this from a view, the context is already set up. Only set up the context in the code that uses <code>send_password_reset_email()</code> outside of a view. (No, this isn&#39;t the issue with your email sending)."}, {"owner": {"reputation": 11, "user_id": 10577232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c8d2aa7fab839181b3e846c5750c3ee?s=128&d=identicon&r=PG&f=1", "display_name": "sim00", "link": "https://stackoverflow.com/users/10577232/sim00"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1549519951, "post_id": 54563348, "comment_id": 95932739, "body": "Yes, for testing purposes I called that function from an interpreter outside of the app itself. Anyways, thank you for pointing it out."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1549543042, "post_id": 54563348, "comment_id": 95944708, "body": "Looking at this again, the error happens <i>at context exit</i>. Either the email successfully was sent already, and the remote connection closed early (and so sending <code>quit</code> fails) or there was an exception while sending <i>and</i> then the <code>quit</code> command also fails and the original exception is lost. You could put a <code>try...except smtplib.SMTPException: pass</code> around <a href=\"https://github.com/mattupstate/flask-mail/blob/master/flask_mail.py#L152\" rel=\"nofollow noreferrer\">line 152 of <code>home&#47;user&#47;.local&#47;lib&#47;python2.7&#47;site-packages&#47;flask_mail.py</code></a> (temporarily) to figure out which one of the two this is."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1549543074, "post_id": 54563348, "comment_id": 95944737, "body": "(I&#39;d make a pull request with the project to handle that failure mode better, but the project has clearly been dead for 4 years now)."}, {"owner": {"reputation": 11, "user_id": 10577232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c8d2aa7fab839181b3e846c5750c3ee?s=128&d=identicon&r=PG&f=1", "display_name": "sim00", "link": "https://stackoverflow.com/users/10577232/sim00"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1549632208, "post_id": 54563348, "comment_id": 95982781, "body": "It worked. After wraping the quit command in try-except I receive following error:  <code>File &quot;&#47;usr&#47;lib&#47;python2.7&#47;smtplib.py&quot;, line 750, in sendmail     self.rset()   File &quot;&#47;usr&#47;lib&#47;python2.7&#47;smtplib.py&quot;, line 469, in rset     return self.docmd(&quot;rset&quot;)   File &quot;&#47;usr&#47;lib&#47;python2.7&#47;smtplib.py&quot;, line 394, in docmd     return self.getreply()   File &quot;&#47;usr&#47;lib&#47;python2.7&#47;smtplib.py&quot;, line 368, in getreply     raise SMTPServerDisconnected(&quot;Connection unexpectedly closed&quot;)</code>   I found some solved issues here with this error, but no solution seems to work. Any ideas?"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1549633884, "post_id": 54563348, "comment_id": 95983751, "body": "Sorry, no ideas there. Do add that traceback to your question for others with more experience with this to be able to help."}], "owner": {"reputation": 11, "user_id": 10577232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c8d2aa7fab839181b3e846c5750c3ee?s=128&d=identicon&r=PG&f=1", "display_name": "sim00", "link": "https://stackoverflow.com/users/10577232/sim00"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1007, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1549663266, "creation_date": 1549491052, "last_edit_date": 1549663266, "question_id": 54563348, "link": "https://stackoverflow.com/questions/54563348/flask-with-zoho-smtpserverdisconnected-please-run-connect-first", "title": "Flask with Zoho - SMTPServerDisconnected: please run connect() first", "body": "<p>In development environment I tested Flask mailer successfully connecting to personal Gmail account. I switched to Zoho with the same structure of config but it produces following error:</p>\n\n<pre><code>&gt;&gt;&gt; send_password_reset_email(user)\n&gt;&gt;&gt; Exception in thread Thread-1:\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/threading.py\", line 801, in __bootstrap_inner\n    self.run()\n  File \"/usr/lib/python2.7/threading.py\", line 754, in run\n    self.__target(*self.__args, **self.__kwargs)\n  File \"app/email.py\", line 8, in send_async_email\n    mail.send(msg)\n  File \"/home/user/.local/lib/python2.7/site-packages/flask_mail.py\", line 492, in send\n    message.send(connection)\n  File \"/home/user/.local/lib/python2.7/site-packages/flask_mail.py\", line 152, in __exit__\n    self.host.quit()\n  File \"/usr/lib/python2.7/smtplib.py\", line 772, in quit\n    res = self.docmd(\"quit\")\n  File \"/usr/lib/python2.7/smtplib.py\", line 393, in docmd\n    self.putcmd(cmd, args)\n  File \"/usr/lib/python2.7/smtplib.py\", line 341, in putcmd\n    self.send(str)\n  File \"/usr/lib/python2.7/smtplib.py\", line 333, in send\n    raise SMTPServerDisconnected('please run connect() first')\nSMTPServerDisconnected: please run connect() first\n</code></pre>\n\n<p><em>config.py</em></p>\n\n<pre><code>class Config(object):\n    MAIL_SERVER = 'smtp.zoho.com'\n    MAIL_PORT = '587'\n    MAIL_USE_TLS = '1'\n    MAIL_DEFAULT_SENDER = 'admin@mydomain.com'\n    MAIL_USERNAME = 'admin@mydomain.com'\n    MAIL_PASSWORD = 'mypassword'\n    ADMINS = 'admin@mydomain.com'\n</code></pre>\n\n<p><em>routes.py</em></p>\n\n<pre><code>@app.route('/recover', methods=['GET', 'POST'])\ndef reset_password_request():\n    if current_user.is_authenticated:\n        return redirect(url_for('manage'))\n    form = ResetPasswordRequestForm()\n    if form.validate_on_submit():\n        user = User.query.filter_by(email=form.email.data).first()\n        if user:\n            send_password_reset_email(user)\n        flash('Check your email for the instructions to reset your password')\n        return redirect(url_for('login'))\n    return render_template('recover.html', form=form)\n</code></pre>\n\n<p><em>email.py</em></p>\n\n<pre><code>def send_async_email(app, msg):\n    with app.app_context():\n        mail.send(msg)\n\ndef send_email(subject, sender, recipients, text_body, html_body):\n    msg = Message(subject, sender=sender, recipients=recipients)\n    msg.body = text_body\n    msg.html = html_body\n    Thread(target=send_async_email, args=(app, msg)).start()\n\n   def send_password_reset_email(user):\n        with app.app_context(), app.test_request_context(base_url='https://example.com'):\n            token = user.get_reset_password_token()\n            send_email('[MyDomain] Reset Your Password',\n                   sender=app.config['ADMINS'][0],\n                   recipients=[user.email],\n                   text_body=render_template('email/reset_password.txt', user=user, token=token),\n                   html_body=render_template('email/reset_password.html', user=user, token=token))\n</code></pre>\n\n<p>Zoho account seems to be configured well (no blacklisted IP's etc.). After my first attempt with this config I received an e-mail from Zoho support alerting me that a <strong>new login</strong> was made from a new IP address. However, the reset password email has never been sent. </p>\n\n<p>I tried lots of tweking of config file but the issue might be somewhere else. Any help would be very appreciated. </p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>After wraping the quit function in try-except block, I finally came to a real error that causes the e-mail not to be sent. The complete traceback now looks like:</p>\n\n<pre><code>  File \"/usr/lib/python2.7/threading.py\", line 801, in __bootstrap_inner\n    self.run()\n  File \"/usr/lib/python2.7/threading.py\", line 754, in run\n    self.__target(*self.__args, **self.__kwargs)\n  File \"app/custom_mailer.py\", line 11, in send_async_email\n    mail.send(msg)\n  File \"/home/user/.local/lib/python2.7/site-packages/flask_mail.py\", line 495, in send\n    message.send(connection)\n  File \"/home/user/.local/lib/python2.7/site-packages/flask_mail.py\", line 430, in send\n    connection.send(self)\n  File \"/home/user/.local/lib/python2.7/site-packages/flask_mail.py\", line 195, in send\n    message.rcpt_options)\n  File \"/usr/lib/python2.7/smtplib.py\", line 750, in sendmail\n    self.rset()\n  File \"/usr/lib/python2.7/smtplib.py\", line 469, in rset\n    return self.docmd(\"rset\")\n  File \"/usr/lib/python2.7/smtplib.py\", line 394, in docmd\n    return self.getreply()\n  File \"/usr/lib/python2.7/smtplib.py\", line 368, in getreply\n    raise SMTPServerDisconnected(\"Connection unexpectedly closed\")\nSMTPServerDisconnected: Connection unexpectedly closed\n</code></pre>\n\n<p>Although this error appeared to be solved in some of closed questions here on Stackoverflow, I cannot make this piece of code work ..</p>\n"}, {"tags": ["python", "google-api", "google-drive-api", "google-oauth"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 8032832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c21e2d6b60f2d71adaae89234aa5f8a4?s=128&d=identicon&r=PG&f=1", "display_name": "biocompamateur", "link": "https://stackoverflow.com/users/8032832/biocompamateur"}, "edited": false, "score": 0, "creation_date": 1549496407, "post_id": 54563919, "comment_id": 95927320, "body": "Thank you! Just to confirm, would this require <i>any</i> sort of authentication when the script is run on a new device? We&#39;re not too concerned about about refresh token expiration (running out of tokens/changing password) given the scope of our project. It will most certainly be running on fewer than 50 machines. Unless, of course, I misunderstand what counts as a refresh token/when a new one is issued."}, {"owner": {"reputation": 18863, "user_id": 1000753, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/23634e7a38e353cca12bb72a4205615b?s=128&d=identicon&r=PG", "display_name": "pinoyyid", "link": "https://stackoverflow.com/users/1000753/pinoyyid"}, "reply_to_user": {"reputation": 35, "user_id": 8032832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c21e2d6b60f2d71adaae89234aa5f8a4?s=128&d=identicon&r=PG&f=1", "display_name": "biocompamateur", "link": "https://stackoverflow.com/users/8032832/biocompamateur"}, "edited": false, "score": 0, "creation_date": 1549496884, "post_id": 54563919, "comment_id": 95927430, "body": "No. You&#39;ll authenticate once only on the oauth playground. After that, the refresh token works without any user involvement at all."}, {"owner": {"reputation": 35, "user_id": 8032832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c21e2d6b60f2d71adaae89234aa5f8a4?s=128&d=identicon&r=PG&f=1", "display_name": "biocompamateur", "link": "https://stackoverflow.com/users/8032832/biocompamateur"}, "edited": false, "score": 0, "creation_date": 1549566725, "post_id": 54563919, "comment_id": 95958394, "body": "Got it, thank you. I will probably go the basic refresh token route. What is the benefit of the service account (the OAuth proxy justification makes sense to me, but it&#39;s probably unnecessarily complicated for our needs)."}, {"owner": {"reputation": 18863, "user_id": 1000753, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/23634e7a38e353cca12bb72a4205615b?s=128&d=identicon&r=PG", "display_name": "pinoyyid", "link": "https://stackoverflow.com/users/1000753/pinoyyid"}, "reply_to_user": {"reputation": 35, "user_id": 8032832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c21e2d6b60f2d71adaae89234aa5f8a4?s=128&d=identicon&r=PG&f=1", "display_name": "biocompamateur", "link": "https://stackoverflow.com/users/8032832/biocompamateur"}, "edited": false, "score": 0, "creation_date": 1549584832, "post_id": 54563919, "comment_id": 95965465, "body": "A regular Google account is supposed to be owned by a person whereas a service account is owned by an application."}], "tags": [], "owner": {"reputation": 18863, "user_id": 1000753, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/23634e7a38e353cca12bb72a4205615b?s=128&d=identicon&r=PG", "display_name": "pinoyyid", "link": "https://stackoverflow.com/users/1000753/pinoyyid"}, "is_accepted": false, "score": 0, "last_activity_date": 1549494329, "creation_date": 1549494329, "answer_id": 54563919, "question_id": 54563346, "link": "https://stackoverflow.com/questions/54563346/google-drive-api-avoiding-manual-authentication/54563919#54563919", "title": "Google Drive API: Avoiding Manual Authentication", "body": "<p>Yes it can be done - see <a href=\"https://stackoverflow.com/questions/19766912/how-do-i-authorise-an-app-web-or-installed-without-user-intervention\">How do I authorise an app (web or installed) without user intervention?</a></p>\n\n<p>However, it's probably a bad idea for two reasons. if you distribute code with embedded secrets (technically the secret is a Refresh Token), they tend not to stay secret for long. Secondly, there is the chance that the Refresh Token will expire and your users will be dead in the water.</p>\n\n<p>I would suggest that you consider:-</p>\n\n<ul>\n<li>A Service Account</li>\n<li>Writing an OAuth proxy, which you can host for free on Google AppEngine, which puts all of the secret stuff on a server and from which your app can fetch Access Tokens as they are needed.</li>\n</ul>\n"}], "owner": {"reputation": 35, "user_id": 8032832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c21e2d6b60f2d71adaae89234aa5f8a4?s=128&d=identicon&r=PG&f=1", "display_name": "biocompamateur", "link": "https://stackoverflow.com/users/8032832/biocompamateur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 366, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1549494329, "creation_date": 1549491036, "last_edit_date": 1549494092, "question_id": 54563346, "link": "https://stackoverflow.com/questions/54563346/google-drive-api-avoiding-manual-authentication", "title": "Google Drive API: Avoiding Manual Authentication", "body": "<p>I want to write a python script that can connect to Google Drive API without having to manually authenticate on every device the script is run on.</p>\n\n<p>I am writing some python code for a research study that is going to be run at various study locations. For data privacy reasons, we cannot store data locally and need to write it to the cloud (ideally Google Drive). A member of our team will not present at all locations the software is being run, and thus any sort of initial manual authentication (entering username and password at the different sites for OAuth) is really off of the table for us.</p>\n\n<p>I've looked into the Google Drive API (Python), and am wondering if there is a way for a device running my script to get a Refresh token (and subsequent Access tokens) to modify a Google Sheet without needling to manually authenticate on each device. </p>\n\n<p>Is there any way to make this possible with the Google Drive API (by having some sort of 'secret' that the code could store)? If not, are there any other cloud services that may be able to accommodate this? </p>\n\n<p>Additionally, the python script is being run as part of an executable (produced from Vizard, probably irrelevant but mentioning it just in case)</p>\n"}, {"tags": ["python", "scikit-learn", "random-forest"], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 7838093, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/df82254611deac7d18d7a858dae35039?s=128&d=identicon&r=PG&f=1", "display_name": "Man", "link": "https://stackoverflow.com/users/7838093/man"}, "edited": false, "score": 0, "creation_date": 1549554619, "post_id": 54570073, "comment_id": 95951871, "body": "Thank you! Yes I didn&#39;t mention it but I did try logistic regression and similarly had some problems with low precision (while the FPR is low, 5%, the total number of FP overwhelm the TP). This pipeline helps a ton and I&#39;ll try all of your suggestions!"}], "tags": [], "owner": {"reputation": 176, "user_id": 10460258, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBWzf.jpg?s=128&g=1", "display_name": "jimkoons", "link": "https://stackoverflow.com/users/10460258/jimkoons"}, "is_accepted": true, "score": 4, "last_activity_date": 1549533323, "last_edit_date": 1549533323, "creation_date": 1549531632, "answer_id": 54570073, "question_id": 54563327, "link": "https://stackoverflow.com/questions/54563327/random-forest-with-unbalanced-class-positive-is-minority-class-low-precision/54570073#54570073", "title": "Random forest with unbalanced class (positive is minority class), low precision and weird score distributions", "body": "<ul>\n<li>Upsampling with SMOTE and SMOTEENN : I am far from being an expert with those but by upsampling your dataset you might amplify existing noise which induce overfitting. This could explain the fact that your algorithm cannot correctly classify, thus giving the results in the first graph.</li>\n</ul>\n\n<p>I found a little bit more info here and maybe how to improve your results:\n<a href=\"https://sci2s.ugr.es/sites/default/files/ficherosPublicaciones/1773_ver14_ASOC_SMOTE_FRPS.pdf\" rel=\"nofollow noreferrer\">https://sci2s.ugr.es/sites/default/files/ficherosPublicaciones/1773_ver14_ASOC_SMOTE_FRPS.pdf</a></p>\n\n<ul>\n<li><p>When you downsample you seem to encounter the same overfitting problem as I understand it (at least for the target result of the previous year). It is hard to deduce the reason behind it without a view on the data though. </p></li>\n<li><p>Your overfitting problem might come from the number of features you use that could add unnecessary noise. You might try to reduce the number of features you use and gradually increase it (using a RFE model). More info here:</p></li>\n</ul>\n\n<p><a href=\"https://machinelearningmastery.com/feature-selection-in-python-with-scikit-learn/\" rel=\"nofollow noreferrer\">https://machinelearningmastery.com/feature-selection-in-python-with-scikit-learn/</a></p>\n\n<p>For the models you used, you mention Random Forest and XGBoost, but you did not mention having used simpler model. You could try simpler model and focus on you data engineering. \nIf you have not try it yet, maybe you could:</p>\n\n<ul>\n<li>Downsample your data</li>\n<li>Normalize all your data with a StandardScaler</li>\n<li><p>Test \"brute force\" tuning of simple models such as Naive Bayes and Logistic Regression</p>\n\n<pre><code># Define steps of the pipeline\nsteps = [('scaler', StandardScaler()),\n         ('log_reg', LogisticRegression())]\n\npipeline = Pipeline(steps)\n\n# Specify the hyperparameters\nparameters = {'C':[1, 10, 100],\n              'penalty':['l1', 'l2']}\n\n# Create train and test sets\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.33, \nrandom_state=42)\n\n# Instantiate a GridSearchCV object: cv\ncv = GridSearchCV(pipeline, param_grid=parameters)\n\n# Fit to the training set\ncv.fit(X_train, y_train)\n</code></pre></li>\n</ul>\n\n<p>Anyway, for your example the pipeline could be (I made it with Logistic Regression but you can change it with another ML algorithm and change the parameters grid consequently):</p>\n\n<pre><code>from sklearn.linear_model import LogisticRegression\nfrom sklearn.preprocessing import StandardScaler\nfrom sklearn.model_selection import GridSearchCV, StratifiedKFold, cross_val_score\n\nfrom imblearn.combine import SMOTEENN\nfrom imblearn.over_sampling import SMOTE\nfrom imblearn.pipeline import Pipeline\n\nparam_grid = {'C': [1, 10, 100]}\n\nclf = LogisticRegression(solver='lbfgs', multi_class = 'auto')\nsme = SMOTEENN(smote = SMOTE(k_neighbors = 2), random_state=42)\ngrid = GridSearchCV(estimator=clf, param_grid = param_grid, score = \"f1\")\n\npipeline = Pipeline([('scale', StandardScaler()),\n                     ('SMOTEENN', sme),\n                     ('grid', grid)])\n\ncv = StratifiedKFold(n_splits = 4, random_state=42)\nscore = cross_val_score(pipeline, X, y, cv=cv)\n</code></pre>\n\n<p>I hope this may help you.</p>\n\n<p>(edit: I added score = \"f1\" in the GridSearchCV)</p>\n"}], "owner": {"reputation": 181, "user_id": 7838093, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/df82254611deac7d18d7a858dae35039?s=128&d=identicon&r=PG&f=1", "display_name": "Man", "link": "https://stackoverflow.com/users/7838093/man"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 933, "favorite_count": 1, "accepted_answer_id": 54570073, "answer_count": 1, "score": 3, "last_activity_date": 1549533323, "creation_date": 1549490934, "question_id": 54563327, "link": "https://stackoverflow.com/questions/54563327/random-forest-with-unbalanced-class-positive-is-minority-class-low-precision", "title": "Random forest with unbalanced class (positive is minority class), low precision and weird score distributions", "body": "<p>I have a very unbalanced dataset (5000 positive, 300000 negative). I am using sklearn RandomForestClassifier to try and predict the probability of the positive class. I have data for multiple years and one of the features I've engineered is the class in the previous year, so I am withholding the last year of the dataset to test on in addition to my test set from within the years I'm training on. </p>\n\n<p>Here is what I've tried (and the result): </p>\n\n<p>Upsampling with SMOTE and SMOTEENN (weird score distributions, see first pic, predicted probabilities for positive and negative class are both the same, i.e., the model predicts a very low probability for most of the positive class) </p>\n\n<p>Downsampling to a balanced dataset (recall is ~0.80 for the test set, but 0.07 for the out-of-year test set from sheer number of total negatives in the unbalanced out of year test set, see second pic)</p>\n\n<p>Leave it unbalanced (weird scoring distribution again, precision goes up to ~0.60 and recall falls to 0.05 and 0.10 for test and out-of-year test set)</p>\n\n<p>XGBoost (slightly better recall on the out-of-year test set, 0.11) </p>\n\n<p>What should I try next? I'd like to optimize for F1, as both false positives and false negatives are equally bad in my case. I would like to incorporate k-fold cross validation and have read I should do this before upsampling, a) should I do this/is it likely to help and b) how can I incorporate this into a pipeline similar to this: </p>\n\n<pre><code>from imblearn.pipeline import make_pipeline, Pipeline\n\nclf_rf = RandomForestClassifier(n_estimators=25, random_state=1)\nsmote_enn = SMOTEENN(smote = sm)\nkf = StratifiedKFold(n_splits=5)\n\npipeline = make_pipeline(??)\n\npipeline.fit(X_train, ytrain)\nypred = pipeline.predict(Xtest)\nypredooy = pipeline.predict(Xtestooy)\n</code></pre>\n\n<p><img src=\"https://i.imgur.com/3DA1JlY.png\" alt=\"score_dist\"><img src=\"https://i.imgur.com/DPpSYaO.png\" alt=\"score_dist\"></p>\n"}, {"tags": ["python", "conways-game-of-life"], "comments": [{"owner": {"reputation": 1351, "user_id": 2514354, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/PiwJY.png?s=128&g=1", "display_name": "loxaxs", "link": "https://stackoverflow.com/users/2514354/loxaxs"}, "edited": false, "score": 0, "creation_date": 1549491844, "post_id": 54563274, "comment_id": 95925842, "body": "goto <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a> ;-)"}, {"owner": {"reputation": 3552, "user_id": 4240413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54298e0142978d385309d265b585c818?s=128&d=identicon&r=PG&f=1", "display_name": "Davide Fiocco", "link": "https://stackoverflow.com/users/4240413/davide-fiocco"}, "reply_to_user": {"reputation": 1351, "user_id": 2514354, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/PiwJY.png?s=128&g=1", "display_name": "loxaxs", "link": "https://stackoverflow.com/users/2514354/loxaxs"}, "edited": false, "score": 1, "creation_date": 1549494094, "post_id": 54563274, "comment_id": 95926628, "body": "@loxaxs this probably belongs to StackOverflow instead: <a href=\"https://codereview.stackexchange.com/help/on-topic\">codereview.stackexchange.com/help/on-topic</a>"}, {"owner": {"reputation": 7441, "user_id": 1575353, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rvz3i.png?s=128&g=1", "display_name": "S\u1d00\u1d0d On\u1d07\u1d0c\u1d00", "link": "https://stackoverflow.com/users/1575353/s%e1%b4%80%e1%b4%8d-on%e1%b4%87%e1%b4%8c%e1%b4%80"}, "reply_to_user": {"reputation": 1351, "user_id": 2514354, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/PiwJY.png?s=128&g=1", "display_name": "loxaxs", "link": "https://stackoverflow.com/users/2514354/loxaxs"}, "edited": false, "score": 1, "creation_date": 1549494221, "post_id": 54563274, "comment_id": 95926668, "body": "@loxaxs this is <a href=\"https://codereview.stackexchange.com/q/213002/120114\">already posted on CR</a> but is off-topic because it isn&#39;t working (as Davide was alluding to)."}], "answers": [{"comments": [{"owner": {"reputation": 400, "user_id": 6480819, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f35e7dfa3a7489c7ffd7a97307872f12?s=128&d=identicon&r=PG&f=1", "display_name": "dannyxn", "link": "https://stackoverflow.com/users/6480819/dannyxn"}, "edited": false, "score": 0, "creation_date": 1549493430, "post_id": 54563542, "comment_id": 95926388, "body": "Thanks, it was really perceptive that yo saw  it, perhaps after rewriting couple of times, I&#39;ve made a mistake, but it dosen&#39;t really change anything. Problem is some where else."}, {"owner": {"reputation": 1803, "user_id": 10957844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d71bcaa11950c4881a16b908e5e1d333?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/10957844/tim"}, "reply_to_user": {"reputation": 400, "user_id": 6480819, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f35e7dfa3a7489c7ffd7a97307872f12?s=128&d=identicon&r=PG&f=1", "display_name": "dannyxn", "link": "https://stackoverflow.com/users/6480819/dannyxn"}, "edited": false, "score": 0, "creation_date": 1549496192, "post_id": 54563542, "comment_id": 95927251, "body": "@dannyxn Think I may have found the issue. Answer updated above. Let me know if it works."}, {"owner": {"reputation": 1803, "user_id": 10957844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d71bcaa11950c4881a16b908e5e1d333?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/10957844/tim"}, "reply_to_user": {"reputation": 400, "user_id": 6480819, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f35e7dfa3a7489c7ffd7a97307872f12?s=128&d=identicon&r=PG&f=1", "display_name": "dannyxn", "link": "https://stackoverflow.com/users/6480819/dannyxn"}, "edited": false, "score": 0, "creation_date": 1549501019, "post_id": 54563542, "comment_id": 95928397, "body": "Added i and j to the take functions"}], "tags": [], "owner": {"reputation": 1803, "user_id": 10957844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d71bcaa11950c4881a16b908e5e1d333?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/10957844/tim"}, "is_accepted": false, "score": 0, "last_activity_date": 1549500978, "last_edit_date": 1549500978, "creation_date": 1549492107, "answer_id": 54563542, "question_id": 54563274, "link": "https://stackoverflow.com/questions/54563274/python-implementation-of-conways-game-of-life/54563542#54563542", "title": "Python implementation of Conway&#39;s Game of Life", "body": "<p>Possibly the else clause in the newGrid loop is over-indented? Because as of now, the grid only goes from 1 to 0 and never from 0 to 1. And it's probably because of the array slicing: [(i-1) % n : (i+1) % n]. There are 2 issues:</p>\n\n<ol>\n<li>this only counts to the index before (i+1) % n, so it doesn't include (i+1) % n. </li>\n<li>it doesn't wrap around as you would expect, so e.g. [9:1] doesn't go from 9 to 10 to 0 and stops before 1. It simply returns empty list.</li>\n</ol>\n\n<p>Here's a trick</p>\n\n<pre><code>a.take(range(-1,2),mode='wrap', axis=0).take(range(-1,2),mode='wrap',axis=1)\n</code></pre>\n\n<p>from this post <a href=\"https://stackoverflow.com/questions/21396121/wrap-slice-around-edges-of-a-2d-array-in-numpy\">Wrap slice around edges of a 2D array in numpy</a>. I've modified code below with this trick.</p>\n\n<pre><code>import pygame\nimport numpy as np\n\nBLACK = (0, 0, 0)\nGREEN = (0, 255, 0)\nN = 195\nWIDTH = 10\nHEIGHT = 10\n\ngrid = np.zeros(shape=(N, N), dtype=np.int32)\nglider = np.array([[0, 0, 1],\n                       [1, 0, 1],\n                       [0, 1, 1]])\ngrid[3:6, 3:6] = glider\n\npygame.init()\n\nWINDOW_SIZE = [980, 980]\nscreen = pygame.display.set_mode(WINDOW_SIZE)\n\npygame.display.set_caption(\"GAME OF LIFE\")\n\ndone = False\n\nclock = pygame.time.Clock()\n\nwhile not done:\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            done = True\n    for row in range(N):\n        for column in range(N):\n            color = BLACK\n            if grid[row][column] == 1:\n                color = GREEN\n            pygame.draw.rect(screen, color,\n                             [WIDTH * column,\n                              HEIGHT * row,\n                              WIDTH,\n                              HEIGHT])\n\n    newGrid = grid.copy()\n    for i in range(N):\n        for j in range(N):\n            total = grid.take(range(i-1,i+2),mode='wrap', axis=0).take(range(j-1,j+2),mode='wrap',axis=1).sum() - grid[i, j]\n            if grid[i, j] == 1:\n                if(total &lt; 2) or (total &gt; 3):\n                    newGrid[i, j] = 0\n            else:\n                if total == 3:\n                    newGrid[i, j] = 1\n    grid = newGrid\n\n    clock.tick(60)\n    pygame.display.flip()\n\npygame.quit()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3552, "user_id": 4240413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54298e0142978d385309d265b585c818?s=128&d=identicon&r=PG&f=1", "display_name": "Davide Fiocco", "link": "https://stackoverflow.com/users/4240413/davide-fiocco"}, "is_accepted": true, "score": 1, "last_activity_date": 1549495723, "last_edit_date": 1549495723, "creation_date": 1549493948, "answer_id": 54563859, "question_id": 54563274, "link": "https://stackoverflow.com/questions/54563274/python-implementation-of-conways-game-of-life/54563859#54563859", "title": "Python implementation of Conway&#39;s Game of Life", "body": "<p>I think you have a couple of subtle bugs in the way you implement <a href=\"https://en.wikipedia.org/wiki/Conway&#39;s_Game_of_Life#Rules\" rel=\"nofollow noreferrer\">Conway's rules</a>.\nSee my comments in the code for details:</p>\n\n<pre><code>for i in range(N):\n    for j in range(N):\n        # I changed the range of the extent of the sum, note +2 rather than +1 !\n        total = grid[(i-1) % N:(i+2) % N, (j-1) % N:(j+2) % N].sum() - grid[i, j]\n        if grid[i, j] == 1:\n            if(total &lt; 2) or (total &gt; 3):\n                newGrid[i, j] = 0\n            # allow for survival in case of total = 2 or 3 (this could be dropped though)\n            else:\n                newGrid[i, j] = 1\n        # allow for reproduction if cell is empty\n        else:\n            if total == 3:\n                newGrid[i, j] = 1\n</code></pre>\n\n<p>With these edits the glider should glide :)</p>\n"}], "owner": {"reputation": 400, "user_id": 6480819, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f35e7dfa3a7489c7ffd7a97307872f12?s=128&d=identicon&r=PG&f=1", "display_name": "dannyxn", "link": "https://stackoverflow.com/users/6480819/dannyxn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 627, "favorite_count": 1, "accepted_answer_id": 54563859, "answer_count": 2, "score": 0, "last_activity_date": 1549500978, "creation_date": 1549490644, "question_id": 54563274, "link": "https://stackoverflow.com/questions/54563274/python-implementation-of-conways-game-of-life", "title": "Python implementation of Conway&#39;s Game of Life", "body": "<p>For learning purpose I've started creating my implementation of Conway's Game of Life. I've used numpy to store big array, contating dead and alive cells, then I've apllied Conway's rules, to create mechanics of cells life. To manage grid, and graphics I used pygame module.\nAfter many reviews, and rewriting code in many ways, I can't find out what's wrong with it, so I decided to ask you. For example I've tried to make a glider, (as code shows), but he dies after 3 loop cycles. I'd be appreciate for help and tips. Can you help me find out why the cells aren't reproducing? Thanks in advance.\nCode:</p>\n\n<pre><code>import pygame\nimport numpy as np\n\nBLACK = (0, 0, 0)\nGREEN = (0, 255, 0)\nN = 195\nWIDTH = 10\nHEIGHT = 10\n\ngrid = np.zeros(shape=(N, N), dtype=np.int32)\nglider = np.array([[0, 0, 1],\n                       [1, 0, 1],\n                       [0, 1, 1]])\ngrid[3:6, 3:6] = glider\n\npygame.init()\n\nWINDOW_SIZE = [980, 980]\nscreen = pygame.display.set_mode(WINDOW_SIZE)\n\npygame.display.set_caption(\"GAME OF LIFE\")\n\ndone = False\n\nclock = pygame.time.Clock()\n\nwhile not done:\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            done = True\n    for row in range(N):\n        for column in range(N):\n            color = BLACK\n            if grid[row][column] == 1:\n                color = GREEN\n            pygame.draw.rect(screen, color,\n                             [WIDTH * column,\n                              HEIGHT * row,\n                              WIDTH,\n                              HEIGHT])\n\n    newGrid = grid.copy()\n    for i in range(N):\n        for j in range(N):\n            total = grid[(i-1) % N:(i+1) % N, (j-1) % N:(j+1) % N].sum() - grid[i, j]\n            if grid[i, j] == 1:\n                if(total &lt; 2) or (total &gt; 3):\n                    newGrid[i, j] = 0\n                else:\n                    if total == 3:\n                        newGrid[i, j] = 1\n    grid = newGrid\n\n    clock.tick(60)\n    pygame.display.flip()\n\npygame.quit()\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "dictionary"], "comments": [{"owner": {"reputation": 1803, "user_id": 10957844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d71bcaa11950c4881a16b908e5e1d333?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/10957844/tim"}, "edited": false, "score": 1, "creation_date": 1549491329, "post_id": 54563242, "comment_id": 95925673, "body": "You want to be careful when enumerating a dictionary, since dictionary is not ordered before python 3.6. And what do you need enumerate for since you never used &quot;i&quot;?"}, {"owner": {"reputation": 472, "user_id": 10614373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PNFbw.jpg?s=128&g=1", "display_name": "Trollsors", "link": "https://stackoverflow.com/users/10614373/trollsors"}, "reply_to_user": {"reputation": 1803, "user_id": 10957844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d71bcaa11950c4881a16b908e5e1d333?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/10957844/tim"}, "edited": false, "score": 0, "creation_date": 1549513874, "post_id": 54563242, "comment_id": 95930920, "body": "I did use \u2018i\u2019, just didn\u2019t mention the use in the example here."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1549571925, "post_id": 54563242, "comment_id": 95960752, "body": "Are the dictionary and the list the same size?"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1549571995, "post_id": 54563242, "comment_id": 95960783, "body": "Can you give a concrete example of toy inputs and the expected output?"}], "answers": [{"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1549490887, "post_id": 54563268, "comment_id": 95925517, "body": "<code>{k:v for k,v in &lt;whatever&gt;}</code> should probably just be <code>dict(&lt;whatever&gt;)</code>"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1549490933, "post_id": 54563268, "comment_id": 95925530, "body": "@juanpa.arrivillaga Thanks. I wanted it to be explicit, but I&#39;ve added the shorter version as well."}, {"owner": {"reputation": 1803, "user_id": 10957844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d71bcaa11950c4881a16b908e5e1d333?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/10957844/tim"}, "edited": false, "score": 0, "creation_date": 1549491425, "post_id": 54563268, "comment_id": 95925696, "body": "@coldspeed not sure this is what OP is looking for. Based on code, OP wants to have old keys mapped to items in list. But it&#39;s not that clear in OP."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 1803, "user_id": 10957844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d71bcaa11950c4881a16b908e5e1d333?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/10957844/tim"}, "edited": false, "score": 0, "creation_date": 1549491527, "post_id": 54563268, "comment_id": 95925739, "body": "@Tim The problem with that is that dictionaries aren&#39;t ordered. So unless its clear how the list maps to the dictionary, I&#39;m hesitant to change my answer."}, {"owner": {"reputation": 1803, "user_id": 10957844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d71bcaa11950c4881a16b908e5e1d333?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/10957844/tim"}, "edited": false, "score": 0, "creation_date": 1549492761, "post_id": 54563268, "comment_id": 95926153, "body": "@coldspeed I agree, it&#39;s not clear how the map should work. Maybe dict is not the right structure for this job at all. But I just read that dict are ordered in python 3.6+. <a href=\"https://stackoverflow.com/questions/39980323/are-dictionaries-ordered-in-python-3-6\" title=\"are dictionaries ordered in python 3 6\">stackoverflow.com/questions/39980323/&hellip;</a>"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 1803, "user_id": 10957844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d71bcaa11950c4881a16b908e5e1d333?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/10957844/tim"}, "edited": false, "score": 0, "creation_date": 1549492906, "post_id": 54563268, "comment_id": 95926204, "body": "@Tim Thanks. I am aware, but the question is tagged &quot;python&quot;, so there&#39;s nothing to suggest that OP is working with ordered dictionaries. I feel like it would be wrong to assume unless they say so."}, {"owner": {"reputation": 1803, "user_id": 10957844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d71bcaa11950c4881a16b908e5e1d333?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/10957844/tim"}, "edited": false, "score": 0, "creation_date": 1549496325, "post_id": 54563268, "comment_id": 95927291, "body": "@coldspeed agreed"}, {"owner": {"reputation": 472, "user_id": 10614373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PNFbw.jpg?s=128&g=1", "display_name": "Trollsors", "link": "https://stackoverflow.com/users/10614373/trollsors"}, "edited": false, "score": 0, "creation_date": 1549514472, "post_id": 54563268, "comment_id": 95931063, "body": "@coldspeed Ok so what I want to do is I\u2019ve got a list with both odd and even numbers, and I want to sort all odd numbers without changing the position of even numbers. I update a dictionary with the index and value as a key-value pair and add all the odd numbers to a different list and sort them."}, {"owner": {"reputation": 472, "user_id": 10614373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PNFbw.jpg?s=128&g=1", "display_name": "Trollsors", "link": "https://stackoverflow.com/users/10614373/trollsors"}, "edited": false, "score": 0, "creation_date": 1549514668, "post_id": 54563268, "comment_id": 95931108, "body": "[Contd.] now I want to iterate over both the dictionary and list and update the indices with corresponding values in the list. I hope you understand."}, {"owner": {"reputation": 472, "user_id": 10614373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PNFbw.jpg?s=128&g=1", "display_name": "Trollsors", "link": "https://stackoverflow.com/users/10614373/trollsors"}, "edited": false, "score": 0, "creation_date": 1549514798, "post_id": 54563268, "comment_id": 95931140, "body": "I know there are better approaches to this but I wanted to understand how do(can) we do this. Also, Thanks for the help."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 472, "user_id": 10614373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PNFbw.jpg?s=128&g=1", "display_name": "Trollsors", "link": "https://stackoverflow.com/users/10614373/trollsors"}, "edited": false, "score": 0, "creation_date": 1549519456, "post_id": 54563268, "comment_id": 95932568, "body": "@Trollsors You can check this: <a href=\"https://stackoverflow.com/questions/44461172/sort-the-odd-numbers-in-the-list\" title=\"sort the odd numbers in the list\">stackoverflow.com/questions/44461172/&hellip;</a>"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 472, "user_id": 10614373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PNFbw.jpg?s=128&g=1", "display_name": "Trollsors", "link": "https://stackoverflow.com/users/10614373/trollsors"}, "edited": false, "score": 0, "creation_date": 1549519476, "post_id": 54563268, "comment_id": 95932571, "body": "@Trollsors Also, can you please update your question so it is more clear what you want to do?"}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 9, "last_activity_date": 1549571757, "last_edit_date": 1549571757, "creation_date": 1549490608, "answer_id": 54563268, "question_id": 54563242, "link": "https://stackoverflow.com/questions/54563242/assign-list-values-to-dictionary-keys/54563268#54563268", "title": "Assign list values to dictionary keys", "body": "<p>IIUC, you are trying to reassign existing keys to list values. This is something you can only do from python-3.7 onwards (or 3.6 if you use CPython). This can be done either through direct reassignment, </p>\n\n<pre><code>dictionary = dict(zip(dictionary, lst))\n</code></pre>\n\n<p>Or, if they are not the same length, and there are keys you want to preserve, use <code>dict.update</code>:</p>\n\n<pre><code>dictionary.update(dict(zip(dictionary, lst)))\n</code></pre>\n\n<p>Additionally, it is unwise to name variables after builtin objects (such as <code>list</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 7186, "user_id": 5741460, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oxgS1vLh9Co/AAAAAAAAAAI/AAAAAAAAAAA/5hRLB7BLWWA/photo.jpg?sz=128", "display_name": "Yoav Glazner", "link": "https://stackoverflow.com/users/5741460/yoav-glazner"}, "is_accepted": false, "score": 4, "last_activity_date": 1549490728, "creation_date": 1549490728, "answer_id": 54563286, "question_id": 54563242, "link": "https://stackoverflow.com/questions/54563242/assign-list-values-to-dictionary-keys/54563286#54563286", "title": "Assign list values to dictionary keys", "body": "<p><code>zip</code> is your friend</p>\n\n<pre><code>dictionary.update(zip(dictionary, lst))\n</code></pre>\n"}], "owner": {"reputation": 472, "user_id": 10614373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PNFbw.jpg?s=128&g=1", "display_name": "Trollsors", "link": "https://stackoverflow.com/users/10614373/trollsors"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2123, "favorite_count": 0, "accepted_answer_id": 54563268, "answer_count": 2, "score": 1, "last_activity_date": 1594893978, "creation_date": 1549490508, "last_edit_date": 1594893978, "question_id": 54563242, "link": "https://stackoverflow.com/questions/54563242/assign-list-values-to-dictionary-keys", "title": "Assign list values to dictionary keys", "body": "<p>So I want to loop over a dictionary and a list simultaneously without them being nested.\nWhat I really mean is: </p>\n\n<pre><code>for i,c in enumerate(dictionary) and for k in range(len(list)):\n       dictionary[c] = list[k]\n</code></pre>\n\n<p>So it basically loops over one dictionary and I can assign values to the dictionary with a list.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 5007, "user_id": 10924296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483c21a8a3f03bbf92cb99539ec97dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Reedinationer", "link": "https://stackoverflow.com/users/10924296/reedinationer"}, "edited": false, "score": 0, "creation_date": 1549491102, "post_id": 54563235, "comment_id": 95925591, "body": "are the latitudes and longitudes ordered to be along the coast, or could say position1 be at the top, position2 at the bottom, and position3 at the top again?"}, {"owner": {"reputation": 31, "user_id": 10924741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3924504796ee4c16cde4fb0e815d4cf?s=128&d=identicon&r=PG&f=1", "display_name": "bpozo27", "link": "https://stackoverflow.com/users/10924741/bpozo27"}, "reply_to_user": {"reputation": 5007, "user_id": 10924296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483c21a8a3f03bbf92cb99539ec97dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Reedinationer", "link": "https://stackoverflow.com/users/10924296/reedinationer"}, "edited": false, "score": 0, "creation_date": 1549492024, "post_id": 54563235, "comment_id": 95925904, "body": "It would be the latter. The way the latitudes and longitudes for each corresponding point are organized in the dataframe is that they are random non-ordered geographical points. For example (without looking into the exact locations), the 1st point in the dataframe could be located at a more northern location relative to the 2nd point in the dataframe, but the 3rd point in the dataframe could be located north of the 2nd point but south of the 1st point and not necessarily south of both the 1st and 2nd dataframe points."}], "answers": [{"tags": [], "owner": {"reputation": 5007, "user_id": 10924296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483c21a8a3f03bbf92cb99539ec97dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Reedinationer", "link": "https://stackoverflow.com/users/10924296/reedinationer"}, "is_accepted": false, "score": 0, "last_activity_date": 1549491384, "creation_date": 1549491384, "answer_id": 54563413, "question_id": 54563235, "link": "https://stackoverflow.com/questions/54563235/want-to-compare-value-at-one-geographic-location-to-another-location/54563413#54563413", "title": "Want to compare value at one geographic location to another location", "body": "<p>I believe that a distance function would be useful for part 1). Here is one that I made/found most of online:</p>\n\n<pre><code>def calculate_distance(latitude1, longitude1, latitude2, longitude2):\n    import math\n    latitude1 = math.radians(latitude1)\n    longitude1 = math.radians(longitude1)\n    latitude2 = math.radians(latitude2)\n    longitude2 = math.radians(longitude2)\n    delta_lon = abs(longitude1 - longitude2)\n    delta_lat = abs(latitude1 - latitude2)\n    term1 = math.sin(delta_lat / 2) ** 2\n    term2 = math.cos(latitude1) * math.cos(latitude2) * math.sin(delta_lon / 2) ** 2\n    a = term1 + term2\n    c = 2 * math.atan2(math.sqrt(a), math.sqrt(1 - a))\n    distance = c * 6378100 # c * radius of Earth in meters\n    return distance\n</code></pre>\n\n<p>You could use this function to determine the \"300 ft\" part of it. I should note this returns the distance in meters, and I'm not sure of the accuracy. I believe when I tested it the function was like 99.8% accurate, but if you're measuring down to the foot that may not be accurate enough</p>\n\n<p>To credit where I found the math: <a href=\"https://www.movable-type.co.uk/scripts/latlong.html\" rel=\"nofollow noreferrer\">https://www.movable-type.co.uk/scripts/latlong.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8900654, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-trDM4SSW_Ic/AAAAAAAAAAI/AAAAAAAAAB8/9zzVOl46LJQ/photo.jpg?sz=128", "display_name": "ohmaj", "link": "https://stackoverflow.com/users/8900654/ohmaj"}, "is_accepted": false, "score": 0, "last_activity_date": 1549491844, "creation_date": 1549491844, "answer_id": 54563501, "question_id": 54563235, "link": "https://stackoverflow.com/questions/54563235/want-to-compare-value-at-one-geographic-location-to-another-location/54563501#54563501", "title": "Want to compare value at one geographic location to another location", "body": "<p>You have coordinates and you want to give a radius in feet. You will make things a lot easier on your self if you convert feet to your coordinates unit of measure, longitude and latitude is usually in degrees, minutes and seconds and 1 second is approx 90 ft. 300ft = 3.3 seconds = 0.055 minutes = .00092 degress. I rounded the numbers because it would appear you don't need to be super precise on the distance, but it still should be accurate down to &lt;10 feet.</p>\n\n<p>Then the math for figuring out if one coordinate is within range of another can be found <a href=\"https://stackoverflow.com/questions/3681236/calculate-whether-one-coordinate-is-within-range-of-another\">Here</a></p>\n"}], "owner": {"reputation": 31, "user_id": 10924741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3924504796ee4c16cde4fb0e815d4cf?s=128&d=identicon&r=PG&f=1", "display_name": "bpozo27", "link": "https://stackoverflow.com/users/10924741/bpozo27"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1549491844, "creation_date": 1549490487, "last_edit_date": 1549491363, "question_id": 54563235, "link": "https://stackoverflow.com/questions/54563235/want-to-compare-value-at-one-geographic-location-to-another-location", "title": "Want to compare value at one geographic location to another location", "body": "<p>I have a dataframe with columns for latitude, longitude, hwmQualityName, elevation, description, and other non-essential information. Shown below is the dataframe for only latitude, longitude, hwmQualityName, elevation, and description. There are additional columns with values in the dataframe before the latitude column, after the description column, and in between the latitude, longitude, hwmQualityName, elev_ft, and hwm_locationdescription columns:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nimport netCDF4 as nc4\nimport os\nimport sys\nfrom plotly.offline import download_plotlyjs, init_notebook_mode, plot, iplot\ninit_notebook_mode(connected=True)\nimport plotly.offline as po\nimport plotly.graph_objs as go\nfrom mpl_toolkits.basemap import Basemap\nimport pathlib as pl\nimport matplotlib as mpl\nimport pandas as pd\nimport sys;sys.path.append('../ncsurge')\nfrom importlib import reload\nimport geopandas as gpd\nfrom shapely.geometry import Point, MultiPoint\nfrom shapely.ops import nearest_points\nfrom hwm import *\n\nroot_hwm = pl.Path(r'P:\\Temp\\bpozo\\Scripts\\HWM')\nA = pd.read_csv(str(root_hwm / 'FilteredHWMs.csv'))\nhwm_m = gpd.GeoDataFrame(A)\nhwm_m\n\nlatitude       longitude        hwmQualityName           elev_ft     hwm_locationdescription\n35.281050926   -76.6625853795   'Excellent: +/- 0.05 ft'  7.288     'side of left garage'\n34.676933      -77.080633       'Poor: +/- 0.40 ft'      12.241     'outside marked with pen'\n...\n34.94107586    -76.6507665736   'Good: +/- 0.10 ft'       6.025     'side of post'\n</code></pre>\n\n<p>There a certain number of these points (say 100) that are located along the coastline and are relatively near each other when seen on a map. What I want to do are a couple things:</p>\n\n<p>1) I want to compare the elev_ft value at each location to the elev_ft values in  surrounding locations given a radius of say 300 ft to determine if the elev_ft value at the location I am looking at is an outlier.</p>\n\n<p>2) After identifying the locations that have an elev_ft value that is an outlier, I want to use the strings in the hwmQualityName column and the hwm_locationdescription column to remove all points (i.e. remove the entire row from the dataframe) that contain the word \"Poor\" in the hwmQualityName column or that contain the word \"waves\" or any additional words related to waves in the hwm_locationdescription column.</p>\n\n<p>What I hope to have in the end is a dataframe that has removed points based on the conditions described above.</p>\n\n<p>I am new to Python and I don't know the best way to tackle this task.</p>\n\n<p>Any and all help would be appreciated.</p>\n"}, {"tags": ["python", "matplotlib", "intervals", "cumulative-sum"], "answers": [{"tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 1, "last_activity_date": 1549492547, "creation_date": 1549492547, "answer_id": 54563615, "question_id": 54563225, "link": "https://stackoverflow.com/questions/54563225/step-chart-with-cumulative-sum-based-on-new-intervals-given-on-x-axis/54563615#54563615", "title": "Step-chart with cumulative sum based on new intervals given on x axis", "body": "<p>I might misunderstand the question or the desired outcome. What I think you're looking for is this:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\ndata=[[0.05, 3200], [0.1, 2000], [0.12, 1200], [0.13, 2000], [0.21, 1800], [0.25, 2800], [0.27, 1500]]\ngiven_x_axis=[0.05, 0.07, 0.09, 0.11, 0.13, 0.15, 0.17, 0.19, 0.21, 0.23, 0.25, 0.27, 0.29, 0.31, 0.33, 0.35]\n\nx,y = np.array(data).T\nind = np.searchsorted(x, given_x_axis, side=\"left\")\nind[ind == 0] = 1\nres = np.cumsum(y)[ind-1]\n</code></pre>\n\n<p>res is now</p>\n\n<pre><code>[ 3200.  3200.  3200.  5200.  6400.  8400.  8400.  8400.  8400. 10200.\n 10200. 13000. 14500. 14500. 14500. 14500.]\n</code></pre>\n\n<p>Then plotting, </p>\n\n<pre><code>fig, ax = plt.subplots()\nax.plot(x,np.cumsum(y), marker=\"o\", ls=\"\")\nax.step(given_x_axis, res)\n\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/RwmiD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RwmiD.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 205, "user_id": 8618545, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gUlR4.jpg?s=128&g=1", "display_name": "xiaoshir", "link": "https://stackoverflow.com/users/8618545/xiaoshir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 346, "favorite_count": 0, "accepted_answer_id": 54563615, "answer_count": 1, "score": 0, "last_activity_date": 1549492547, "creation_date": 1549490426, "last_edit_date": 1549490773, "question_id": 54563225, "link": "https://stackoverflow.com/questions/54563225/step-chart-with-cumulative-sum-based-on-new-intervals-given-on-x-axis", "title": "Step-chart with cumulative sum based on new intervals given on x axis", "body": "<p>I have two lists: data and given_x_axis</p>\n\n<pre><code>data=[[0.05, 3200], [0.1, 2000], [0.12, 1200], [0.13, 2000], [0.21, 1800], [0.25, 2800], [0.27, 1500]]\ngiven_x_axis=[0.05, 0.07, 0.09, 0.11, 0.13, 0.15, 0.17, 0.19, 0.21, 0.23, 0.25, 0.27, 0.29, 0.31, 0.33, 0.35]\n</code></pre>\n\n<p>I want to plot a step chart with cumulative-sum like this, </p>\n\n<pre><code>x,y=map(list, zip(*np.cumsum(data, axis=0)))\nplt.step(x,y)\n</code></pre>\n\n<p>but using given_x_axis instead as the steps on x axis</p>\n\n<p>I have tried to define a function that recreates a new list of cumulative values based on the given_x_axis</p>\n\n<pre><code>def update_x_axis(data, given_x_axis):\n cumulated_values=[]\n value_each_step=0\n for n,x in enumerate(given_x_axis):\n  for d in data:\n   if d[0]&lt;=x:\n    value_each_step=value_each_step+d[1]\n  cumulated_values.append(value_each_step)\n return [given_x_axis,cumulated_values]\n</code></pre>\n\n<p>But the new list of cumulative values on y axis does not seem to be correct.\nI expect update_x_axis(data, given_x_axis) will return</p>\n\n<pre><code>[0.05, 0.07, 0.09, 0.11, 0.13, 0.15, 0.17, 0.19, 0.21, 0.23, 0.25, 0.27, 0.29, 0.31, 0.33, 0.35], \n[3200, 3200, 3200, 5200, 6400, 8400....]]\n</code></pre>\n\n<p>How can I modify my defined function to do this?</p>\n"}, {"tags": ["python", "pandas", "pyspark", "user-defined-functions"], "answers": [{"comments": [{"owner": {"reputation": 821, "user_id": 2347491, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/NL4Xd.png?s=128&g=1", "display_name": "Carleto", "link": "https://stackoverflow.com/users/2347491/carleto"}, "edited": false, "score": 1, "creation_date": 1549526371, "post_id": 54563539, "comment_id": 95935304, "body": "Thanks, @Psidom. Testing in Databricks, if I run the udf_interpolate 3 times using GROUPED_MAP, I have three different results (sometimes, the right one). Do you know why?"}, {"owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "reply_to_user": {"reputation": 821, "user_id": 2347491, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/NL4Xd.png?s=128&g=1", "display_name": "Carleto", "link": "https://stackoverflow.com/users/2347491/carleto"}, "edited": false, "score": 0, "creation_date": 1549550455, "post_id": 54563539, "comment_id": 95949150, "body": "Very likely because your data frame doesn&#39;t have an inherent order. In practice you should have a column like a timestamp to order by."}], "tags": [], "owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "is_accepted": false, "score": 1, "last_activity_date": 1549492405, "last_edit_date": 1549492405, "creation_date": 1549492088, "answer_id": 54563539, "question_id": 54563222, "link": "https://stackoverflow.com/questions/54563222/pyspark-error-calling-pandas-udf-returning-a-series-interpolate-as-result/54563539#54563539", "title": "Pyspark - Error calling pandas_udf returning a Series.interpolate() as result", "body": "<p><a href=\"https://spark.apache.org/docs/latest/api/python/pyspark.sql.html#pyspark.sql.functions.pandas_udf\" rel=\"nofollow noreferrer\"><code>GROUPED_AGG</code> requires the UDF to return a scalar</a>; In your case, better to use a <code>GROUPED_MAP</code> since you are returning a Series and need to perform the calculation by group; Essentially you pass a sub data frame for each name to the <code>pandas_udf</code>, transform it with pandas API and return the transformed data frame back:</p>\n\n<pre><code>@F.pandas_udf(df.schema, F.PandasUDFType.GROUPED_MAP)\ndef udf_interpolate(g):\n    return g.assign(value=g.value.interpolate('linear'))\n\ndf.groupby('name').apply(udf_interpolate).show()\n+-------+-----+                                                                 \n|   name|value|\n+-------+-----+\n|charles|    1|\n|charles|    2|\n|charles|    3|\n+-------+-----+\n</code></pre>\n"}], "owner": {"reputation": 821, "user_id": 2347491, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/NL4Xd.png?s=128&g=1", "display_name": "Carleto", "link": "https://stackoverflow.com/users/2347491/carleto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 678, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1549492405, "creation_date": 1549490417, "question_id": 54563222, "link": "https://stackoverflow.com/questions/54563222/pyspark-error-calling-pandas-udf-returning-a-series-interpolate-as-result", "title": "Pyspark - Error calling pandas_udf returning a Series.interpolate() as result", "body": "<p>I'm trying to create a UDF returning an <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.interpolate.html?highlight=interpolation\" rel=\"nofollow noreferrer\">interpolation</a> function, but the function is returning a Series, with index and throwing an exception.</p>\n\n<pre><code>from pyspark.sql.types import FloatType\n\n@F.pandas_udf(FloatType(), F.PandasUDFType.GROUPED_AGG)\ndef udf_interpolate(v):\n  return v.interpolate('linear')\n\n## Test data\ndf = spark.createDataFrame([\n    (\"charles\", 1),\n    (\"charles\", None),\n    (\"charles\", 3),\n], [\"name\", \"value\"])\n\nwindow = Window.partitionBy('name').rowsBetween(Window.unboundedPreceding, Window.unboundedFollowing)\ndf.withColumn('test_interp', udf_interpolate(df.value).over(window)).show()\n</code></pre>\n\n<p>The error message:</p>\n\n<pre><code>pyarrow.lib.ArrowInvalid: Could not convert 0    3.0\n1    2.0\n2    1.0\nName: _0, dtype: float64 with type Series: tried to convert to float32\n</code></pre>\n\n<p>I tried to force the conversion to float32, but the error persists. My initial idea is because I'm returning a Series with multiple values in a 'one value expected' but I don't know exactly how to solve this problem.</p>\n\n<p>If I change my function, for example, to return a <code>v.mean()</code>, works well.</p>\n\n<p>Appreciate any help. </p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "oop"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1549490341, "post_id": 54563172, "comment_id": 95925297, "body": "Based on super-limited info, I think you want to look into inheritance."}], "answers": [{"tags": [], "owner": {"reputation": 5007, "user_id": 10924296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483c21a8a3f03bbf92cb99539ec97dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Reedinationer", "link": "https://stackoverflow.com/users/10924296/reedinationer"}, "is_accepted": false, "score": 0, "last_activity_date": 1549490855, "creation_date": 1549490855, "answer_id": 54563315, "question_id": 54563172, "link": "https://stackoverflow.com/questions/54563172/how-to-move-object-instance-to-another-class/54563315#54563315", "title": "How to move object instance to another class?", "body": "<p>Inheritance sounds useful here:</p>\n\n<pre><code>class Trades:\n    ...\n\nclass HistoricalTrades(Trades): # This will make HistoricalTrades inherit characteristics from Trades\n    ...\n\nh = HistoricalTrades(price=123, amount=10, sell_date=\"Some data not provided\")\n</code></pre>\n\n<p>But I think more information would be needed for us to provide you with a more appropriate answer...</p>\n"}, {"comments": [{"owner": {"reputation": 155, "user_id": 10398158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd2f879599ed0389533ddc131d50e1d?s=128&d=identicon&r=PG&f=1", "display_name": "tookas92", "link": "https://stackoverflow.com/users/10398158/tookas92"}, "edited": false, "score": 0, "creation_date": 1549491754, "post_id": 54563409, "comment_id": 95925813, "body": "Thanks the second method is exactly what I was looking for"}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 2, "last_activity_date": 1549491370, "creation_date": 1549491370, "answer_id": 54563409, "question_id": 54563172, "link": "https://stackoverflow.com/questions/54563172/how-to-move-object-instance-to-another-class/54563409#54563409", "title": "How to move object instance to another class?", "body": "<p>For this specific case, assuming no use of <code>__slots__</code>, and that the three attributes used are in fact the sole attributes of <code>Trade</code>, you could get away with a small cheat, changing:</p>\n\n<pre><code>h = HistoricalTrades(price=k.price, amount=k.amount, sell_date=k.sell_date)\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>h = HistoricalTrades(**vars(k))\n</code></pre>\n\n<p><a href=\"https://docs.python.org/3/library/functions.html#vars\" rel=\"nofollow noreferrer\"><code>vars(k)</code> returns the <code>__dict__</code> of <code>k</code> itself</a>, which we then unpack with <code>**</code> into the name/value pairs as the keyword arguments to initialize <code>HistoricalTrades</code> with.</p>\n\n<p>That solution is a little kludgy (as noted, it depends on not using <code>__slots__</code> and not having any other attributes). Really, the nice way to do this is to define an alternate constructor for <code>HistoricalTrades</code> that does the slog work for you, simplifying use for the caller:</p>\n\n<pre><code>class HistoricalTrades:\n    ...\n    @classmethod\n    def from_trade(cls, trade):\n        return cls(price=trade.price, amount=trade.amount, sell_date=trade.sell_date)\n</code></pre>\n\n<p>Yeah, it's the same code, but it's written once, and every call site can simplify to:</p>\n\n<pre><code>h = HistoricalTrades.from_trade(k)\n</code></pre>\n\n<p>which is both concise <em>and</em> self-documenting.</p>\n"}], "owner": {"reputation": 155, "user_id": 10398158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd2f879599ed0389533ddc131d50e1d?s=128&d=identicon&r=PG&f=1", "display_name": "tookas92", "link": "https://stackoverflow.com/users/10398158/tookas92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 54563409, "answer_count": 2, "score": 0, "last_activity_date": 1549491370, "creation_date": 1549490235, "question_id": 54563172, "link": "https://stackoverflow.com/questions/54563172/how-to-move-object-instance-to-another-class", "title": "How to move object instance to another class?", "body": "<p>Basically I want to have two classes <code>Trades</code> and <code>HistoricalTrades</code>. The second  one would be a copy of the first with few more attributes. The <code>Trades</code> instances would be deleted after I get copies on <code>HistoricalTrades</code></p>\n\n<p>I have solved this by passing attributes manually.</p>\n\n<pre><code>class Trades:\n    ...\n\nclass HistoricalTrades:\n    ...\n\nk = Trades(price=123, amount=10)\nh = HistoricalTrades(price=k.price, amount=k.amount, sell_date=k.sell_date)\nk.delete()\n</code></pre>\n\n<p>It kinda works as expected but I feel it is not elegant. Is there any other (better) way to move class instance to other class?</p>\n"}, {"tags": ["python", "numpy", "matplotlib", "astropy"], "comments": [{"owner": {"reputation": 4509, "user_id": 1435475, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bb5adb94461a2b72be1a84655487be80?s=128&d=identicon&r=PG", "display_name": "guidot", "link": "https://stackoverflow.com/users/1435475/guidot"}, "edited": false, "score": 0, "creation_date": 1549490835, "post_id": 54563163, "comment_id": 95925497, "body": "What about providing a high-level description of what your are trying to do? Reverse engineering low-level code is not really fun. (You will have noticed lots of copied lines, and in case you attempted a loop-unrolling optimisation: I fear it is too early for that.)"}, {"owner": {"reputation": 25, "user_id": 11010173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb45cd1d9a3ec1ffadcf585b1cfbd94f?s=128&d=identicon&r=PG&f=1", "display_name": "Mckenzie", "link": "https://stackoverflow.com/users/11010173/mckenzie"}, "reply_to_user": {"reputation": 4509, "user_id": 1435475, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bb5adb94461a2b72be1a84655487be80?s=128&d=identicon&r=PG", "display_name": "guidot", "link": "https://stackoverflow.com/users/1435475/guidot"}, "edited": false, "score": 0, "creation_date": 1549491112, "post_id": 54563163, "comment_id": 95925597, "body": "Sure, will do.."}, {"owner": {"reputation": 698, "user_id": 1905324, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/GAgC4.png?s=128&g=1", "display_name": "J_mie6", "link": "https://stackoverflow.com/users/1905324/j-mie6"}, "edited": false, "score": 0, "creation_date": 1549492905, "post_id": 54563163, "comment_id": 95926203, "body": "Immediately I see that at least two of those loops can be fused into a single one: if you iterate over the same values and then don&#39;t access any indices other than the current <code>xn</code>, then you can fuse the two loops (there is no data dependency on other values in the array). Furthermore, use <code>xrange</code> instead of <code>range</code> that should provide an improvement."}, {"owner": {"reputation": 698, "user_id": 1905324, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/GAgC4.png?s=128&g=1", "display_name": "J_mie6", "link": "https://stackoverflow.com/users/1905324/j-mie6"}, "edited": false, "score": 0, "creation_date": 1549493066, "post_id": 54563163, "comment_id": 95926250, "body": "In addition, when you fuse the last three loops together, you can then eliminate the intermediate lists (as an aside, it&#39;s much better to use a list-comprehension vs list.append when performance is concerned, even better to use generators when they are only used one but I think this is harder to do here). This will provide a speedup as well"}, {"owner": {"reputation": 25, "user_id": 11010173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb45cd1d9a3ec1ffadcf585b1cfbd94f?s=128&d=identicon&r=PG&f=1", "display_name": "Mckenzie", "link": "https://stackoverflow.com/users/11010173/mckenzie"}, "reply_to_user": {"reputation": 698, "user_id": 1905324, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/GAgC4.png?s=128&g=1", "display_name": "J_mie6", "link": "https://stackoverflow.com/users/1905324/j-mie6"}, "edited": false, "score": 0, "creation_date": 1549502503, "post_id": 54563163, "comment_id": 95928688, "body": "@J_mie6 Yes, this sped things up tremendously. I didn&#39;t know you could fuse loops, but I looked up how to do it and sure enough, it worked! That was amazing. Thank you!"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 11010173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb45cd1d9a3ec1ffadcf585b1cfbd94f?s=128&d=identicon&r=PG&f=1", "display_name": "Mckenzie", "link": "https://stackoverflow.com/users/11010173/mckenzie"}, "edited": false, "score": 0, "creation_date": 1549502548, "post_id": 54563766, "comment_id": 95928698, "body": "This did make a small difference, but ultimately what really changed things was fusing my two for-loops together. But anyway, thanks for your help and comments!"}], "tags": [], "owner": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "is_accepted": true, "score": 0, "last_activity_date": 1549493738, "last_edit_date": 1549493738, "creation_date": 1549493344, "answer_id": 54563766, "question_id": 54563163, "link": "https://stackoverflow.com/questions/54563163/how-to-speed-up-a-python-2-program-with-multiple-nested-for-loops/54563766#54563766", "title": "How to speed up a python 2 program with multiple nested for-loops", "body": "<p>It's only a small speed-up, but the code seems to be doing a lot of <code>x**2</code> (x squared).  </p>\n\n<p>In python3, generally it's slower to execute <code>x**2</code> rather than <code>x*x</code>.  Consider a simple test program:</p>\n\n<pre><code>import time\n\niteration_count=99999999\n\n# Do a lot of squaring with the ** operator\nstart1 = time.time()\nsum = 0\nfor i in range( iteration_count ):\n    sum += i ** 2\nend1 = time.time()\n\n\n# Do a lot of squaring with i * i\nstart2 = time.time()\nsum = 0\nfor i in range( iteration_count ):\n    sum += i * i\nend2 = time.time()\n\nprint(\"x**2 =&gt; %f seconds\" % (end1-start1))\nprint(\"x*x  =&gt; %f seconds\" % (end2-start2))\n</code></pre>\n\n<p>Which gives me the results:</p>\n\n<pre><code>$ python3 ./squared.py \nx**2 =&gt; 21.347830 seconds\nx*x  =&gt; 8.983334 seconds\n</code></pre>\n\n<p>I did run it a bunch of times, it doesn't vary much.</p>\n\n<p>The code in the question is doing a lot of calculations to make <code>fx</code>, <code>fy</code> and <code>fz</code> (This seems to be the same for each? is this correct?)  If there is any commonality in these computations, intermediate results should be removed and only calculated once.</p>\n\n<p>For example, instead of:</p>\n\n<pre><code>fx=((G*mass1[xn]*mass1[step+1]*((x1[step+1]**2.+y1[step+1]**2.+z1[step+1]**2.) ...\nfy=((G*mass1[xn]*mass1[step+1]*((x1[step+1]**2.+y1[step+1]**2.+z1[step+1]**2.) ...\nfz=((G*mass1[xn]*mass1[step+1]*((x1[step+1]**2.+y1[step+1]**2.+z1[step+1]**2.) ...\n</code></pre>\n\n<p>The first part should be computed only once:</p>\n\n<pre><code>g_mass = G*mass1[xn]*mass1[step+1]\nfx=((g_mass * ((x1[step+1]**2.+y1[step+1]**2.+z1[step+1]**2.) ...\nfy=((g_mass * ((x1[step+1]**2.+y1[step+1]**2.+z1[step+1]**2.) ...\nfz=((g_mass * ((x1[step+1]**2.+y1[step+1]**2.+z1[step+1]**2.) ...\n</code></pre>\n\n<p>And similarly for any parts of these formulae with common components.</p>\n"}, {"tags": [], "owner": {"reputation": 1183, "user_id": 1862861, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0ab2dbf246bd94ac4d398961cbd25c63?s=128&d=identicon&r=PG", "display_name": "Matt Pitkin", "link": "https://stackoverflow.com/users/1862861/matt-pitkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1550160285, "creation_date": 1550160285, "answer_id": 54694530, "question_id": 54563163, "link": "https://stackoverflow.com/questions/54563163/how-to-speed-up-a-python-2-program-with-multiple-nested-for-loops/54694530#54694530", "title": "How to speed up a python 2 program with multiple nested for-loops", "body": "<p>I think you should be able to get a big speed-up (maybe of order a factor 1000) if you convert you inputs to numpy arrays, do operations on the numpy arrays, and preallocate numpy arrays to their required size, rather than using lists and appending them as you go.</p>\n\n<p>For example, just taking the start of your example, you could do something like the following (although I can't guarantee it's doing exactly what you want, but is just guidance)</p>\n\n<pre><code>with open('homo_sph_N1000_R3_v1.dat') as f:\n    for row in f.readlines():  \n        if not row.startswith(\"#\"):\n            spaces=row.split('   ')\n            n1.append(float(spaces[0]))\n            mass1.append(float(spaces[1]))\n            x1.append(float(spaces[2]))\n            y1.append(float(spaces[3]))\n            z1.append(float(spaces[4]))\n            vx1.append(float(spaces[5]))\n            vy1.append(float(spaces[6]))\n            vz1.append(float(spaces[7]))\n\n# convert to numpy arrays\nn1 = np.array(n1)\nmass1 = np.array(mass1)\n# KEEP DOING THIS FOR THE OTHER INPUTS\n\nfor n in range(2):\n    # PREALLOCATE\n    fx = np.zeros(npoints, npoints-1)\n    fy = np.zeros(npoints, npoints-1)\n    fz = np.zeros(npoints, npoints-1)\n\n    #changes the particle on which the forces are acting\n    for xn in range(0,npoints):\n        #changes the forces from other particles acting on the particle\n\n        # REMOVE THE INNER FOR LOOP AND JUST USE THE ARRAYS\n        #for step in range(0,npoints):\n        #Here we find the accelearation for every particle\n        fx[xn] = ((G*mass1[xn]*mass1[1:]*((x1[1:]**2.+y1[1:]**2.+z1[1:]**2.)-(x1[xn]**2.+y1[xn]**2.+z1[xn]**2.)))/  (  abs((x1[1:]**2.+y1[1:]**2.+z1[1:]**2.)-(x1[xn]**2.+y1[xn]**2.+z1[xn]**2.))**2.+(.2)**2  )**(3./2.))\n\n        fy[xn] = ((G*mass1[xn]*mass1[1:]*((x1[1:]**2.+y1[1:]**2.+z1[1:]**2.)-(x1[xn]**2.+y1[xn]**2.+z1[xn]**2.)))/  (    abs((x1[1:]**2.+y1[1:]**2.+z1[1:]**2.)-(x1[xn]**2.+y1[xn]**2.+z1[xn]**2.))**2+(.2)**2 )**(3./2.))\n\n        fz[xn] = ((G*mass1[xn]*mass1[1:]*((x1[1:]**2.+y1[1:]**2.+z1[1:]**2.)-(x1[xn]**2.+y1[xn]**2.+z1[xn]**2.)))/  (    abs((x1[1:]**2.+y1[1:]**2.+z1[1:]**2.)-(x1[xn]**2.+y1[xn]**2.+z1[xn]**2.))**2+(.2)**2 )**(3./2.))\n\n      #Now, I need to split that array up by npoints, each particle has npoints forces acting on it. \n      fxx= np.array_split(fx,npoints)\n      fyy= np.array_split(fy,npoints)\n      fzz= np.array_split(fz,npoints)\n\n      #since the force on a particle is the sum of all forces acting on it, I'm summing each variable in each array together. e.g. [1,2,3]=[6] \n      fxxx= np.sum(fxx[xn], axis=1)\n      fyyy= np.sum(fyy[xn], axis=1)\n      fzzz= np.sum(fzz[xn], axis=1) \n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 11010173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb45cd1d9a3ec1ffadcf585b1cfbd94f?s=128&d=identicon&r=PG&f=1", "display_name": "Mckenzie", "link": "https://stackoverflow.com/users/11010173/mckenzie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 54563766, "answer_count": 2, "score": 0, "last_activity_date": 1550160285, "creation_date": 1549490203, "last_edit_date": 1549592140, "question_id": 54563163, "link": "https://stackoverflow.com/questions/54563163/how-to-speed-up-a-python-2-program-with-multiple-nested-for-loops", "title": "How to speed up a python 2 program with multiple nested for-loops", "body": "<p>This code has multiple for-loops and the lists I read in have 999 points each. I want to iterate this up to 10,000 times. However, even iterating it only 2 times takes nearly 10 minutes. </p>\n\n<p>Even though I'm posting this specific code, I think an answer to my question can help others run their codes with a lot of data more quickly.</p>\n\n<p>Any of your advice is appreciated. Thanks a lot. </p>\n\n<p><strong>What this code does:</strong> Basically, I'm reading in arrays from textfile as lists. Each list (e.g. x1,y1,z1... etc) has 999 elements each. I operate on each element in the list based on the other elements (the two inner loops). The end result is a totally new list which I've called x2. This code is then supposed to repeat the operations \"n # of times\" (the outer loop).</p>\n\n<p>My issue is that I can only repeat this a for a few iterations before it just takes to long to execute. </p>\n\n<pre><code>import matplotlib.pyplot as plt\nfrom astropy.table import Table\nfrom astropy.io import ascii\nimport numpy as np\nimport argparse\nimport time\n#for 200\nstart_time = time.time()\n\nnpoints=999\nn1, mass1, x1, y1,z1,vx1,vy1,vz1,fx_list,fy_list,fz_list= [],[],[],[],[],[],[],[],[],[],[]\nAngL_list=[]\nEtot0_list=[]\nG=1\ndt=.01\n\nwith open('homo_sph_N1000_R3_v1.dat') as f:\n     for row in f.readlines():  \n        if not row.startswith(\"#\"):\n            spaces=row.split('   ')\n            n1.append(float(spaces[0]))\n            mass1.append(float(spaces[1]))\n            x1.append(float(spaces[2]))\n            y1.append(float(spaces[3]))\n            z1.append(float(spaces[4]))\n            vx1.append(float(spaces[5]))\n            vy1.append(float(spaces[6]))\n            vz1.append(float(spaces[7]))\n\nfor n in range(2):\n#changes the particle on which the forces are acting\n     for xn in range(0,npoints):\n     #changes the forces from other particles acting on the particle\n          for step in range(0,npoints):\n          #Here we find the accelearation for every particle\n               fx=((G*mass1[xn]*mass1[step+1]*((x1[step+1]**2.+y1[step+1]**2.+z1[step+1]**2.)-(x1[xn]**2.+y1[xn]**2.+z1[xn]**2.)))/  (  abs((x1[step+1]**2.+y1[step+1]**2.+z1[step+1]**2.)-(x1[xn]**2.+y1[xn]**2.+z1[xn]**2.))**2.+(.2)**2  )**(3./2.))\n\n               fy=((G*mass1[xn]*mass1[step+1]*((x1[step+1]**2.+y1[step+1]**2.+z1[step+1]**2.)-(x1[xn]**2.+y1[xn]**2.+z1[xn]**2.)))/  (    abs((x1[step+1]**2.+y1[step+1]**2.+z1[step+1]**2.)-(x1[xn]**2.+y1[xn]**2.+z1[xn]**2.))**2+(.2)**2 )**(3./2.))\n\n               fz=((G*mass1[xn]*mass1[step+1]*((x1[step+1]**2.+y1[step+1]**2.+z1[step+1]**2.)-(x1[xn]**2.+y1[xn]**2.+z1[xn]**2.)))/  (    abs((x1[step+1]**2.+y1[step+1]**2.+z1[step+1]**2.)-(x1[xn]**2.+y1[xn]**2.+z1[xn]**2.))**2+(.2)**2 )**(3./2.))\n\n               #Then put store it in an array\n               fx_list.append(fx)\n               fy_list.append(fy)\n               fz_list.append(fz)\n\n\n          #Now, I need to split that array up by npoints, each particle has npoints forces acting on it. \n          fxx= np.array_split(fx_list,npoints)\n          fyy= np.array_split(fy_list,npoints)\n          fzz= np.array_split(fz_list,npoints)\n\n          #since the force on a particle is the sum of all forces acting on it, I'm summing each variable in each array together. e.g. [1,2,3]=[6] \n          fxxx_list=[]\n          fyyy_list=[]\n          fzzz_list=[]\n          for xn in range(0,npoints):\n               fxxx= np.sum(fxx[xn])\n               fyyy= np.sum(fyy[xn])\n               fzzz= np.sum(fzz[xn]) \n\n               #and save that in array. Now I have the accelearation on each particle. \n               fxxx_list.append(fxxx)\n               fyyy_list.append(fyyy)\n               fzzz_list.append(fzzz) \n\n          #This is where i begin the integration\n\n          vx2=[]\n          vy2=[]\n          vz2=[] \n          for xn in range(0,npoints):\n\n               vx11=vx1[xn]+.5*(fxxx_list[xn]+fxxx_list[xn])*dt\n               vy11=vy1[xn]+.5*(fyyy_list[xn]+fyyy_list[xn])*dt\n               vz11=vz1[xn]+.5*(fzzz_list[xn]+fyyy_list[xn])*dt \n\n               vx2.append(vx11)\n               vy2.append(vy11)\n               vz2.append(vz11) \n\n          x2=[]\n          y2=[]\n          z2=[]\n          for xn in range(0,npoints):\n               x11=(x1[xn]+vx2[xn]*dt)+(.5*fxxx_list[xn]*(dt**2))\n               y11=(y1[xn]+vy2[xn]*dt)+(.5*fyyy_list[xn]*(dt**2))\n               z11=(z1[xn]+vz2[xn]*dt)+(.5*fzzz_list[xn]*(dt**2)) \n\n               x2.append(x11)\n               y2.append(y11)\n               z2.append(z11)\n\nx1,y1,z1,vx1,vy1,vz1 = x2,y2,z2,vx2,vy2,vz2\n\nprint x2,y2 \nplt.scatter(x2,y2)\n\nprint(\"--- %s seconds ---\" % (time.time() - start_time))    \n\nplt.show()\n</code></pre>\n"}, {"tags": ["python", "loops", "iterator"], "comments": [{"owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "edited": false, "score": 0, "creation_date": 1549490295, "post_id": 54563121, "comment_id": 95925277, "body": "The loop in <code>__iter__</code> will raise <code>ValueError: Not enough arguments to unpack</code>. Looping over <code>self.data</code> will give you just the keys unless you say <code>for k, v in self.data.items()</code>"}, {"owner": {"reputation": 403, "user_id": 6037143, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2fdfb6bc13be9e0e471d29125f70612f?s=128&d=identicon&r=PG&f=1", "display_name": "user6037143", "link": "https://stackoverflow.com/users/6037143/user6037143"}, "reply_to_user": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "edited": false, "score": 0, "creation_date": 1549490567, "post_id": 54563121, "comment_id": 95925384, "body": "My bad, I meant <code>for key,val in self.data.items()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 11552, "user_id": 8112138, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3b1ddf31abbf37d5fe71ad387e2772c?s=128&d=identicon&r=PG&f=1", "display_name": "Primusa", "link": "https://stackoverflow.com/users/8112138/primusa"}, "is_accepted": true, "score": 0, "last_activity_date": 1549490850, "creation_date": 1549490850, "answer_id": 54563313, "question_id": 54563121, "link": "https://stackoverflow.com/questions/54563121/is-iterating-over-self-a-bad-practice/54563313#54563313", "title": "Is iterating over self a bad practice?", "body": "<p>No. Why would it be? The reason you define <code>__iter__</code> is so that you can iterate over your object. I'd argue that it's bad practice to reimplement it when it's already there.</p>\n\n<p>Here's an example of the behavior you describe being used in a <a href=\"https://svn.python.org/projects/python/trunk/Lib/collections.py\" rel=\"nofollow noreferrer\">standard library python object</a> (<code>OrderedDict</code>).</p>\n\n<pre><code>def __reduce__(self):\n    'Return state information for pickling'\n    items = [[k, self[k]] for k in self]\n    tmp = self.__map, self.__root\n    del self.__map, self.__root\n    inst_dict = vars(self).copy()\n    self.__map, self.__root = tmp\n    if inst_dict:\n        return (self.__class__, (items,), inst_dict)\n    return self.__class__, (items,)\n</code></pre>\n"}], "owner": {"reputation": 403, "user_id": 6037143, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2fdfb6bc13be9e0e471d29125f70612f?s=128&d=identicon&r=PG&f=1", "display_name": "user6037143", "link": "https://stackoverflow.com/users/6037143/user6037143"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 54563313, "answer_count": 1, "score": 1, "last_activity_date": 1549491067, "creation_date": 1549490054, "last_edit_date": 1549491067, "question_id": 54563121, "link": "https://stackoverflow.com/questions/54563121/is-iterating-over-self-a-bad-practice", "title": "Is iterating over self a bad practice?", "body": "<pre><code>class Data:\n    def __init__(self, dictionary):\n        self.data = dictionary\n\n    def __iter__(self):\n        for key,val in self.data.items():\n            yield (key, val)\n\n    def iter_on_self(self):\n        for i in self:\n            yield i\n</code></pre>\n\n<p>I understand that <code>iter_on_self</code> above is redundant, but I wanted to know if <code>for i in self: #do something</code> is considered a bad practice. If it is a bad practice and I have a need loop over self from another method in the same class, then how would I implement that. </p>\n"}, {"tags": ["python", "visual-studio-code"], "comments": [{"owner": {"reputation": 9571, "user_id": 236574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8600d16ba667cc8d7f00ddc9f254340?s=128&d=identicon&r=PG", "display_name": "Brett Cannon", "link": "https://stackoverflow.com/users/236574/brett-cannon"}, "edited": false, "score": 0, "creation_date": 1550193664, "post_id": 54563117, "comment_id": 96189402, "body": "Make sure that the interpreter you used to run your test script is the same one you have set in VS Code."}], "owner": {"reputation": 51, "user_id": 3577558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e567428c35372c9bba1b8ca4f16df52?s=128&d=identicon&r=PG&f=1", "display_name": "ASB2", "link": "https://stackoverflow.com/users/3577558/asb2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3295, "favorite_count": 1, "answer_count": 0, "score": 5, "last_activity_date": 1549490028, "creation_date": 1549490028, "question_id": 54563117, "link": "https://stackoverflow.com/questions/54563117/importerror-no-module-named-bluetooth-when-using-pybluez-in-visual-studio-cod", "title": "&quot;ImportError: No module named bluetooth&quot; when using Pybluez in Visual Studio Code", "body": "<p>OS:Linux Mint</p>\n\n<p>I am attempting to setup a development environment for a python project using Pybluez. I installed Visual Studio Code via the package manager and then installed the Python extension by Microsoft.</p>\n\n<p>I then installed followed the pybluez installation instructions by running in the terminal</p>\n\n<pre><code>sudo apt-get install libbluetooth-dev\nsudo apt-get install python-dev\nsudo pip install PyBluez\n</code></pre>\n\n<p>This seemed to work and I was able to run a simple test script on command line</p>\n\n<pre><code>from bluetooth import *\n\nnearby_devices = discover_devices()\n\nprint(nearby_devices)\n</code></pre>\n\n<p>However when trying to run this file in Visual Studio Code I continue to get a ImportError</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/bluesniffer.py\", line 1, in &lt;module&gt;\n    from bluetooth import *\nImportError: No module named bluetooth\n</code></pre>\n\n<p>Ive attempted to run pip install pybluez in the visual studio code terminal however I get this error.</p>\n\n<pre><code>sh-4.4$ pip install pybluez\nCollecting pybluez\n  Cache entry deserialization failed, entry ignored\n  Using cached https://files.pythonhosted.org/packages/c1/98/3149481d508bee174335be6725880f00d297afebe75c15e917af8f6fe169/PyBluez-0.22.zip\nBuilding wheels for collected packages: pybluez\n  Running setup.py bdist_wheel for pybluez ... error\n  Complete output from command /usr/bin/python2.7 -u -c \"import setuptools, tokenize;__file__='/tmp/pip-build-4ccFdE/pybluez/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" bdist_wheel -d /tmp/tmpmLzN2Cpip-wheel- --python-tag cp27:\n  running bdist_wheel\n  running build\n  running build_py\n  creating build\n  creating build/lib.linux-x86_64-2.7\n  creating build/lib.linux-x86_64-2.7/bluetooth\n  copying bluetooth/__init__.py -&gt; build/lib.linux-x86_64-2.7/bluetooth\n  copying bluetooth/widcomm.py -&gt; build/lib.linux-x86_64-2.7/bluetooth\n  copying bluetooth/osx.py -&gt; build/lib.linux-x86_64-2.7/bluetooth\n  copying bluetooth/msbt.py -&gt; build/lib.linux-x86_64-2.7/bluetooth\n  copying bluetooth/btcommon.py -&gt; build/lib.linux-x86_64-2.7/bluetooth\n  copying bluetooth/bluez.py -&gt; build/lib.linux-x86_64-2.7/bluetooth\n  copying bluetooth/ble.py -&gt; build/lib.linux-x86_64-2.7/bluetooth\n  running build_ext\n  building 'bluetooth._bluetooth' extension\n  creating build/temp.linux-x86_64-2.7\n  creating build/temp.linux-x86_64-2.7/bluez\n  x86_64-unknown-linux-gnu-gcc -pthread -fno-strict-aliasing -march=x86-64 -mtune=generic -O2 -g -pipe -Wp,-D_FORTIFY_SOURCE=2 -Wp,-D_GLIBCXX_ASSERTIONS -fexceptions -fstack-protector-strong-grecord-gcc-switches -fasynchronous-unwind-tables -fstack-clash-protection -fcf-protection -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I./port3 -I/usr/include/python2.7 -c bluez/btmodule.c -o build/temp.linux-x86_64-2.7/bluez/btmodule.o\n  In file included from bluez/btmodule.c:20:\n  bluez/btmodule.h:5:10: fatal error: bluetooth/bluetooth.h: No such file or directory\n   #include &lt;bluetooth/bluetooth.h&gt;\n            ^~~~~~~~~~~~~~~~~~~~~~~\n  compilation terminated.\n  error: command 'x86_64-unknown-linux-gnu-gcc' failed with exit status 1\n\n  ----------------------------------------\n  Failed building wheel for pybluez\n  Running setup.py clean for pybluez\nFailed to build pybluez\nInstalling collected packages: pybluez\n  Running setup.py install for pybluez ... error\n    Complete output from command /usr/bin/python2.7 -u -c \"import setuptools, tokenize;__file__='/tmp/pip-build-4ccFdE/pybluez/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record /tmp/pip-9O19sX-record/install-record.txt --single-version-externally-managed --compile:\n    running install\n    running build\n    running build_py\n    creating build\n    creating build/lib.linux-x86_64-2.7\n    creating build/lib.linux-x86_64-2.7/bluetooth\n    copying bluetooth/__init__.py -&gt; build/lib.linux-x86_64-2.7/bluetooth\n    copying bluetooth/widcomm.py -&gt; build/lib.linux-x86_64-2.7/bluetooth\n    copying bluetooth/osx.py -&gt; build/lib.linux-x86_64-2.7/bluetooth\n    copying bluetooth/msbt.py -&gt; build/lib.linux-x86_64-2.7/bluetooth\n    copying bluetooth/btcommon.py -&gt; build/lib.linux-x86_64-2.7/bluetooth\n    copying bluetooth/bluez.py -&gt; build/lib.linux-x86_64-2.7/bluetooth\n    copying bluetooth/ble.py -&gt; build/lib.linux-x86_64-2.7/bluetooth\n    running build_ext\n    building 'bluetooth._bluetooth' extension\n    creating build/temp.linux-x86_64-2.7\n    creating build/temp.linux-x86_64-2.7/bluez\n    x86_64-unknown-linux-gnu-gcc -pthread -fno-strict-aliasing -march=x86-64 -mtune=generic -O2 -g -pipe -Wp,-D_FORTIFY_SOURCE=2 -Wp,-D_GLIBCXX_ASSERTIONS -fexceptions -fstack-protector-strong -grecord-gcc-switches -fasynchronous-unwind-tables -fstack-clash-protection -fcf-protection -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I./port3 -I/usr/include/python2.7 -c bluez/btmodule.c -o build/temp.linux-x86_64-2.7/bluez/btmodule.o\n    In file included from bluez/btmodule.c:20:\n    bluez/btmodule.h:5:10: fatal error: bluetooth/bluetooth.h: No such file or directory\n     #include &lt;bluetooth/bluetooth.h&gt;\n              ^~~~~~~~~~~~~~~~~~~~~~~\n    compilation terminated.\n    error: command 'x86_64-unknown-linux-gnu-gcc' failed with exit status 1\n\n    ----------------------------------------\nCommand \"/usr/bin/python2.7 -u -c \"import setuptools, tokenize;__file__='/tmp/pip-build-4ccFdE/pybluez/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record /tmp/pip-9O19sX-record/install-record.txt --single-version-externally-managed --compile\" failed with error code 1 in /tmp/pip-build-4ccFdE/pybluez/\nYou are using pip version 9.0.3, however version 19.0.1 is available.\nYou should consider upgrading via the 'pip install --upgrade pip' command.\n</code></pre>\n\n<p>I previously encountered this error and it was fixed by running </p>\n\n<pre><code>sudo apt-get install libbluetooth-dev\n</code></pre>\n\n<p>However this has already been done and the program compiles perfectly fine when i run it in the normal terminal. Im unsure as to why it doesnt run correctly in Visual Studio Code</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 7729, "user_id": 4718350, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-CxgNhC_5nUE/AAAAAAAAAAI/AAAAAAAAP78/9FTapxcd2dY/photo.jpg?sz=128", "display_name": "Chris", "link": "https://stackoverflow.com/users/4718350/chris"}, "edited": false, "score": 0, "creation_date": 1549490042, "post_id": 54563095, "comment_id": 95925171, "body": "move your function definition above your try statement."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11014541, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cUBgwt8Pb2E/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMt4jm8l67lzTWUnHnpBrfiTQzEjQ/mo/photo.jpg?sz=128", "display_name": "Eric", "link": "https://stackoverflow.com/users/11014541/eric"}, "edited": false, "score": 0, "creation_date": 1549492410, "post_id": 54563130, "comment_id": 95926050, "body": "Thank you so much! That worked! Appreciate all the help. I&#39;m really new into this thing and honestly was hesitant to ask at first because it might just be a simple question but I&#39;m still happy that I did! All the best!"}], "tags": [], "owner": {"reputation": 1034, "user_id": 7078425, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-m2HT-afuPlM/AAAAAAAAAAI/AAAAAAAAADs/5LsAwrzS704/photo.jpg?sz=128", "display_name": "Kevin He", "link": "https://stackoverflow.com/users/7078425/kevin-he"}, "is_accepted": false, "score": 2, "last_activity_date": 1549490075, "creation_date": 1549490075, "answer_id": 54563130, "question_id": 54563095, "link": "https://stackoverflow.com/questions/54563095/nameerror-is-not-defined/54563130#54563130", "title": "NameError is not defined", "body": "<p>You should put the definition of <code>getFaultyHardware</code> before the <code>try</code> statements. Python is interpreted line by line so at the point of <code>try</code>, <code>getFaultyHardware</code> is not yet defined.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 11014541, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cUBgwt8Pb2E/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMt4jm8l67lzTWUnHnpBrfiTQzEjQ/mo/photo.jpg?sz=128", "display_name": "Eric", "link": "https://stackoverflow.com/users/11014541/eric"}, "edited": false, "score": 0, "creation_date": 1549492439, "post_id": 54563180, "comment_id": 95926058, "body": "Thank you so much! That worked! Appreciate all the help. I&#39;m really new into this thing and honestly was hesitant to ask at first because it might just be a simple question but I&#39;m still happy that I did! All the best!"}, {"owner": {"reputation": 3487, "user_id": 6843153, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/10207079768572690/picture?type=large", "display_name": "HuLu ViCa", "link": "https://stackoverflow.com/users/6843153/hulu-vica"}, "reply_to_user": {"reputation": 13, "user_id": 11014541, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cUBgwt8Pb2E/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMt4jm8l67lzTWUnHnpBrfiTQzEjQ/mo/photo.jpg?sz=128", "display_name": "Eric", "link": "https://stackoverflow.com/users/11014541/eric"}, "edited": false, "score": 0, "creation_date": 1549560307, "post_id": 54563180, "comment_id": 95955283, "body": "Great! I am glad I could help you. Keep on studying, trying, asking and learning...and happy coding!"}], "tags": [], "owner": {"reputation": 3487, "user_id": 6843153, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/10207079768572690/picture?type=large", "display_name": "HuLu ViCa", "link": "https://stackoverflow.com/users/6843153/hulu-vica"}, "is_accepted": true, "score": 0, "last_activity_date": 1549490277, "creation_date": 1549490277, "answer_id": 54563180, "question_id": 54563095, "link": "https://stackoverflow.com/questions/54563095/nameerror-is-not-defined/54563180#54563180", "title": "NameError is not defined", "body": "<p>You have to declare the function before you use it:</p>\n\n<pre><code>#!/usr/bin/python\n\nimport pxssh\nimport getpass\n\ndef getFaultyHardware(contents):\n\n    faulty = []\n     content_list = contents.split(':')\n     for x in range(len(content_list))\n        is_exist = 'Location' in content_list[x]\n        if is_exist == True:\n          start = content_list[x+1].find(\"/\")\n          output = content_list[x+1][start:][:14]\n          print(output)\n          faulty.append(output)\n    return faulty\n\ntry:\n\ns = pxssh.pxssh()\nhostname = raw_input('hostname: ')\nusername = raw_input('username: ')\npassword = getpass.getpass('password: ')\ns.login (hostname, username, password)\ns.sendline ('cat /home/ubuntu/output.txt')  \ns.prompt()             \nfaultyhardware = getFaultyHardware(s.before)\nfor faulty in faultyhardware:\n   print(faulty)\nprint s.before          \ns.logout()\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11014541, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cUBgwt8Pb2E/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMt4jm8l67lzTWUnHnpBrfiTQzEjQ/mo/photo.jpg?sz=128", "display_name": "Eric", "link": "https://stackoverflow.com/users/11014541/eric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 54563180, "answer_count": 2, "score": 1, "last_activity_date": 1549490277, "creation_date": 1549489929, "question_id": 54563095, "link": "https://stackoverflow.com/questions/54563095/nameerror-is-not-defined", "title": "NameError is not defined", "body": "<p>Please bear with me as I'm still very new to programming. I am writing a python script that will login to a remote server and capture a string/text from a text file. I'm using pxssh as my module to achieve that. I tried running the script put it gives me an error that says <strong>faultyhardware = getFaultyHardware()\nNameError: name 'getFaultyHardware' is not defined</strong>. I tried reading other issues in this site and I can't seem to get it at all. Can someone point me to the right direction on how to fix? Appreciate all the help.</p>\n\n<pre><code>#!/usr/bin/python\n\nimport pxssh\nimport getpass\n\ntry:\n\ns = pxssh.pxssh()\nhostname = raw_input('hostname: ')\nusername = raw_input('username: ')\npassword = getpass.getpass('password: ')\ns.login (hostname, username, password)\ns.sendline ('cat /home/ubuntu/output.txt')  \ns.prompt()             \nfaultyhardware = getFaultyHardware(s.before)\nfor faulty in faultyhardware:\n   print(faulty)\nprint s.before          \ns.logout()\n\ndef getFaultyHardware(contents):\n\nfaulty = []\n content_list = contents.split(':')\n for x in range(len(content_list))\n    is_exist = 'Location' in content_list[x]\n    if is_exist == True:\n      start = content_list[x+1].find(\"/\")\n      output = content_list[x+1][start:][:14]\n      print(output)\n      faulty.append(output)\nreturn faulty\n</code></pre>\n"}, {"tags": ["python", "docker", "canvas", "tkinter", "export"], "comments": [{"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1549490196, "post_id": 54563077, "comment_id": 95925238, "body": "docker doesnt do great with GUI stuff .... best case senario you solve your issue with black magic and hackery and have a super fragile container that only you can help trouble shoot ... at least thats my experience with it"}, {"owner": {"reputation": 83, "user_id": 8090105, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vH_2-jMry00/AAAAAAAAAAI/AAAAAAAAAK8/BK6T95WGWYk/photo.jpg?sz=128", "display_name": "Martin Reguly", "link": "https://stackoverflow.com/users/8090105/martin-reguly"}, "reply_to_user": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1549553202, "post_id": 54563077, "comment_id": 95950940, "body": "This container will just execute code and save IMG from tkinter canvas. There isn&#39;t greater purpose for the container just to be fast. That&#39;s why I don&#39;t want install additional software inside container. Have you experienced with such a magic that can help me?"}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 8090105, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vH_2-jMry00/AAAAAAAAAAI/AAAAAAAAAK8/BK6T95WGWYk/photo.jpg?sz=128", "display_name": "Martin Reguly", "link": "https://stackoverflow.com/users/8090105/martin-reguly"}, "edited": false, "score": 0, "creation_date": 1549553339, "post_id": 54563266, "comment_id": 95951037, "body": "As you see in docker script I am adding part of X server that handles display but still no luck."}, {"owner": {"reputation": 51, "user_id": 9246720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43c7e8c71265fc951755c7997f3ed5e1?s=128&d=identicon&r=PG", "display_name": "dvtkrlbs", "link": "https://stackoverflow.com/users/9246720/dvtkrlbs"}, "reply_to_user": {"reputation": 83, "user_id": 8090105, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vH_2-jMry00/AAAAAAAAAAI/AAAAAAAAAK8/BK6T95WGWYk/photo.jpg?sz=128", "display_name": "Martin Reguly", "link": "https://stackoverflow.com/users/8090105/martin-reguly"}, "edited": false, "score": 0, "creation_date": 1549558954, "post_id": 54563266, "comment_id": 95954510, "body": "The x server needs a display device you can give docker access to all divices with docker run ..... \u2014unpriviledged but i wouldnt use it"}], "tags": [], "owner": {"reputation": 51, "user_id": 9246720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43c7e8c71265fc951755c7997f3ed5e1?s=128&d=identicon&r=PG", "display_name": "dvtkrlbs", "link": "https://stackoverflow.com/users/9246720/dvtkrlbs"}, "is_accepted": false, "score": 0, "last_activity_date": 1549490603, "creation_date": 1549490603, "answer_id": 54563266, "question_id": 54563077, "link": "https://stackoverflow.com/questions/54563077/run-tkinter-inside-docker-container-and-export-canvas-as-img/54563266#54563266", "title": "Run tkinter inside docker container and export canvas as img", "body": "<p>You need a display server for tkinter so i dont think there is any other way than installing a x server on the container itself (i am not sure if it is possible)</p>\n"}], "owner": {"reputation": 83, "user_id": 8090105, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vH_2-jMry00/AAAAAAAAAAI/AAAAAAAAAK8/BK6T95WGWYk/photo.jpg?sz=128", "display_name": "Martin Reguly", "link": "https://stackoverflow.com/users/8090105/martin-reguly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 675, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549490603, "creation_date": 1549489853, "question_id": 54563077, "link": "https://stackoverflow.com/questions/54563077/run-tkinter-inside-docker-container-and-export-canvas-as-img", "title": "Run tkinter inside docker container and export canvas as img", "body": "<p>I want to run python script that only generates image from tkinter canvas. The error I am having is </p>\n\n<pre><code>_tkinter.TclError: couldn't connect to display \":0\"\n</code></pre>\n\n<p>I have find some simmilar problems <a href=\"https://stackoverflow.com/questions/25281992/alternatives-to-ssh-x11-forwarding-for-docker-containers\">here</a> so my attempt is:</p>\n\n<p>running test.py</p>\n\n<pre><code>import tkinter\nimport random\n\ncanvas = tkinter.Canvas()  # &lt;-- error occurs here\ncanvas.pack()\n\nx = random.randrange(380)\ny = random.randrange(260)\ncanvas.create_text(x, y, text='PYTHON')\ncanvas.postscript(file=\"my_drawing.ps\", colormode='color')\n</code></pre>\n\n<p>inside docker</p>\n\n<pre><code>docker run --rm \n-e DISPLAY=$DISPLAY \n-v /tmp/.X11-unix:/tmp/.X11-unix \n-v $PWD:/app \npython:3.5.2-alpine python /app/test.py\n</code></pre>\n\n<p>However I have xvfb on my machine and it's also inside container after docker add so I don't really understand how to run tkinter without touching env $DISPLAY </p>\n\n<p>Does anybody experienced similar problem?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "machine-learning", "logic", "data-science", "data-modeling"], "owner": {"reputation": 1063, "user_id": 10214220, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216051991748009/picture?type=large", "display_name": "Kshitij Yadav", "link": "https://stackoverflow.com/users/10214220/kshitij-yadav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1549489712, "creation_date": 1549489712, "question_id": 54563046, "link": "https://stackoverflow.com/questions/54563046/discussion-on-churn-prediction-logic-building-for-monthly-renewals", "title": "Discussion on Churn prediction logic building for monthly renewals", "body": "<p>I have a subscription based business dataset which looks like this:</p>\n\n<pre><code>Company    RenewalMonth    Year   Month  Metrics\n ABC          10           2018    1     ...\n DEF           1           2018    1     ...\n GHI           7           2018    1     ...\n ABC          10           2018    2     ...\n DEF           1           2018    2     ...\n GHI           7           2018    2     ...\n ABC          10           2018    3     ...\n DEF           1           2018    3     ...\n GHI           7           2018    3     ...\n ABC          10           2018    4     ...\n DEF           1           2018    4     ...\n GHI           7           2018    4     ...\n ABC          10           2018    5     ...\n DEF           1           2018    5     ...\n GHI           7           2018    5     ...\n</code></pre>\n\n<p>and so on, there around 10k accounts and I have their data usage per month for the last 5 years.</p>\n\n<p>Here the <strong>RenewalMonth</strong> represents the month each year the renewal takes place for that account.\n<strong>Year and Month</strong> represents the aggregated usage parameters in that year and month, <strong>usage metrics</strong> consists of parameters such as sessions, content, region, products etc.</p>\n\n<p>I am building a Churn model, but since renewal month of each account is not same, this posses a unique problem. If I aggregate the measures in year 2017, and use that as a train data to predict on 2018, it takes in assumption that the renewal of each account happens on 1st of January 2018 as I am predicting taking in to account last 12 months of data.</p>\n\n<p>But since the renewal happens in different months, the other way is to find rolling 12 months usage of each account and then map it for prediction. \nFor example, there is an account 'xyz' whose renewal happens in November, I will map its data for the last 12 months of usage, use that as test data, and my train data would contain the rolling 12 months of data for all those accounts for which renewal has already happen, that means any account whose renewal falls before November. \nBut this is a very big task as there are about 10000 accounts and finding individual rolling means of those accounts is very difficult. </p>\n\n<p>Could someone help me map this logic to create a rolling 12 months churn prediction model?</p>\n"}, {"tags": ["python", "mysql", "pandas", "utf-8", "sqlalchemy"], "comments": [{"owner": {"reputation": 4539, "user_id": 1698431, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/lpYwg.png?s=128&g=1", "display_name": "lenz", "link": "https://stackoverflow.com/users/1698431/lenz"}, "edited": false, "score": 0, "creation_date": 1549493705, "post_id": 54563008, "comment_id": 95926490, "body": "What do you mean by &quot;non-Unicode text&quot;? You&#39;d have to be using <i>very</i> rare characters if they still haven&#39;t been considered by Unicode. (And you would have had to invent your own encoding for them.)"}, {"owner": {"reputation": 59, "user_id": 9217197, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214626514873891/picture?type=large", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/9217197/jonathan"}, "reply_to_user": {"reputation": 4539, "user_id": 1698431, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/lpYwg.png?s=128&g=1", "display_name": "lenz", "link": "https://stackoverflow.com/users/1698431/lenz"}, "edited": false, "score": 0, "creation_date": 1549501687, "post_id": 54563008, "comment_id": 95928535, "body": "Yep, you&#39;re right -- that was a typo. I meant ASCII. Essentially, I need my Python connection to MySQL to encode in UTF-8 but haven&#39;t been able to have it do so"}], "answers": [{"comments": [{"owner": {"reputation": 4539, "user_id": 1698431, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/lpYwg.png?s=128&g=1", "display_name": "lenz", "link": "https://stackoverflow.com/users/1698431/lenz"}, "edited": false, "score": 0, "creation_date": 1549527566, "post_id": 54565361, "comment_id": 95935811, "body": "Technically, <code>E5</code> is a valid UTF-8 start byte for code points U+5000 through U+5FFF. But given that these are CJK ideographs and that the first 142 characters of the OP&#39;s text are ASCII, I also think it&#39;s more likely that the data are encoded with an ISO-8859 encoding or some Windows Western code page."}], "tags": [], "owner": {"reputation": 105038, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "is_accepted": false, "score": 0, "last_activity_date": 1549558774, "last_edit_date": 1549558774, "creation_date": 1549505788, "answer_id": 54565361, "question_id": 54563008, "link": "https://stackoverflow.com/questions/54563008/utf-8-encoding-pandas-dataframe-to-mysql/54565361#54565361", "title": "UTF-8 Encoding Pandas DataFrame to MySQL", "body": "<p><code>e5</code> is not ascii, nor is it UTF-8.  With <code>CHARACTER SET latin1</code> it is <code>\u00e5</code>; does that make sense?  So, I suggest you have 2 errors:  One place is asking for ascii, one is providing latin1, and one is expecting utf8.</p>\n\n<p>However, as @lenz points out, <code>E5</code> could also be the first byte of a CJK character.  The error message, since it is looking for ascii, only shows the first offending byte.  Seeing the next two bytes would confirm this.</p>\n\n<p>I think you are missing <code>use_unicode=True</code>.</p>\n\n<p>See <a href=\"http://mysql.rjweb.org/doc.php/charcoll#python\" rel=\"nofollow noreferrer\"><em>python</em></a> and Panda notes farther down that page.</p>\n"}], "owner": {"reputation": 59, "user_id": 9217197, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214626514873891/picture?type=large", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/9217197/jonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2407, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549558774, "creation_date": 1549489489, "last_edit_date": 1549501632, "question_id": 54563008, "link": "https://stackoverflow.com/questions/54563008/utf-8-encoding-pandas-dataframe-to-mysql", "title": "UTF-8 Encoding Pandas DataFrame to MySQL", "body": "<p>I am using Pandas, MySQL, and SQLAlchemy.</p>\n\n<p>I am currently using pandas.to_sql() to submit my pandas DataFrame -- that contains non-ASCII text -- to my MySQL database. Note that with other DataFrames I've used, my process works perfectly</p>\n\n<p>However, with non-ascii text, the following call raises an error:</p>\n\n<pre><code>df.to_sql(\n        name='tableOne',\n        con=engine,\n        index=False,\n        if_exists='replace')\n</code></pre>\n\n<p>Resulting Error (Last line):</p>\n\n<pre><code>UnicodeEncodeError: 'ascii' codec can't encode character '\\xe5' in position 143: ordinal not in range(128)\n</code></pre>\n\n<p>After reading similar posts, I've found the answer is to specify 'utf8' in the engine, as below:</p>\n\n<pre><code>engine = create_engine(f'mysql+mysqldb://{MYSQL_USER}:{MYSQL_PASSWORD}@{MYSQL_HOST}:{MYSQL_PORT}/{MYSQL_DATABASE}?charset=utf8', encoding=\"utf8\")\n</code></pre>\n\n<p>I have tried everything I could think of and everything I could find online. I changed my engine to include every comination of 'utf8', 'utf-8', etc. I've tried manually encoding each text column of my DF to UTF-8. None of this works</p>\n\n<p>I've worked off the following other, similar SO posts, which seem to have similar issues and, therefore, similar solutions, yet nothing has worked for me:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/33442332/another-unicodeencodeerror-when-using-pandas-method-to-sql-with-mysql\">Another UnicodeEncodeError when using pandas method to_sql with MySQL</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/42091578/how-to-handle-encoding-in-python-2-7-and-sqlalchemy-%EF%B8%8F\">How to handle encoding in Python 2.7 and SQLAlchemy &#127988;\u200d\u2620\ufe0f</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/9155264/how-do-i-get-sqlalchemy-to-correctly-insert-a-unicode-ellipsis-into-a-mysql-tabl/9157305\">How do I get SQLAlchemy to correctly insert a unicode ellipsis into a mySQL table?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/42456867/convert-pandas-dataframe-to-utf8\">convert pandas dataframe to utf8</a></p>\n\n<p>Thanks for any help!</p>\n\n<p>Edit: fixed brainfart: 'Unicode' -> 'ascii'</p>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 11552, "user_id": 8112138, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3b1ddf31abbf37d5fe71ad387e2772c?s=128&d=identicon&r=PG&f=1", "display_name": "Primusa", "link": "https://stackoverflow.com/users/8112138/primusa"}, "edited": false, "score": 0, "creation_date": 1549489536, "post_id": 54562972, "comment_id": 95924945, "body": "<code>[2, 1, 3] in [1, 2, 3, 4]</code>, do you want this operation to return true or false? It contains the numbers but they aren&#39;t in the right order. does order matter?"}, {"owner": {"reputation": 57, "user_id": 8524418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa5d90aca0ec52722b4585c64fa3cca5?s=128&d=identicon&r=PG&f=1", "display_name": "Miray", "link": "https://stackoverflow.com/users/8524418/miray"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1549489602, "post_id": 54562972, "comment_id": 95924980, "body": "@roganjosh but I want it to print out True. By adding a break it won&#39;t print out anything"}, {"owner": {"reputation": 39811, "user_id": 1322401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JlaPg.jpg?s=128&g=1", "display_name": "Steven Rumbalski", "link": "https://stackoverflow.com/users/1322401/steven-rumbalski"}, "edited": false, "score": 0, "creation_date": 1549489658, "post_id": 54562972, "comment_id": 95925009, "body": "This statement is incorrect: &quot;For example if <code>list1 = [4,5,6,7]</code> is in <code>list2= [[1,2,3],[4,5,6]]</code> it should print out <code>True</code>, because the numbers of <code>list1</code> are a list from <code>list2</code>.&quot; <code>list1</code> contains a <code>7</code> whereas all of the lists in <code>list2</code> do not."}, {"owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "edited": false, "score": 0, "creation_date": 1549489697, "post_id": 54562972, "comment_id": 95925032, "body": "So you want to know if any of the numbers in list1 occur in any of the lists in list2?"}, {"owner": {"reputation": 57, "user_id": 8524418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa5d90aca0ec52722b4585c64fa3cca5?s=128&d=identicon&r=PG&f=1", "display_name": "Miray", "link": "https://stackoverflow.com/users/8524418/miray"}, "reply_to_user": {"reputation": 39811, "user_id": 1322401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JlaPg.jpg?s=128&g=1", "display_name": "Steven Rumbalski", "link": "https://stackoverflow.com/users/1322401/steven-rumbalski"}, "edited": false, "score": 0, "creation_date": 1549489821, "post_id": 54562972, "comment_id": 95925084, "body": "@stevenrumbalski sry I meant it should print out True if a list of list from list2 contains the numbers that are in list1"}, {"owner": {"reputation": 57, "user_id": 8524418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa5d90aca0ec52722b4585c64fa3cca5?s=128&d=identicon&r=PG&f=1", "display_name": "Miray", "link": "https://stackoverflow.com/users/8524418/miray"}, "reply_to_user": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "edited": false, "score": 0, "creation_date": 1549489858, "post_id": 54562972, "comment_id": 95925104, "body": "@markmeyer exactly"}, {"owner": {"reputation": 39811, "user_id": 1322401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JlaPg.jpg?s=128&g=1", "display_name": "Steven Rumbalski", "link": "https://stackoverflow.com/users/1322401/steven-rumbalski"}, "edited": false, "score": 0, "creation_date": 1549489859, "post_id": 54562972, "comment_id": 95925106, "body": "@Miray.  And none of them do."}, {"owner": {"reputation": 39811, "user_id": 1322401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JlaPg.jpg?s=128&g=1", "display_name": "Steven Rumbalski", "link": "https://stackoverflow.com/users/1322401/steven-rumbalski"}, "edited": false, "score": 1, "creation_date": 1549490681, "post_id": 54562972, "comment_id": 95925430, "body": "<code>print(&#39;True&#39; if any(s1.intersection(sublist) for s1 in [set(list1)] for sublist in list2) else &#39;False&#39;)</code> <code>.intersection()</code> is for overlap.  Change to <code>.issuperset()</code> if it needs to contain all elements."}], "answers": [{"comments": [{"owner": {"reputation": 39811, "user_id": 1322401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JlaPg.jpg?s=128&g=1", "display_name": "Steven Rumbalski", "link": "https://stackoverflow.com/users/1322401/steven-rumbalski"}, "edited": false, "score": 1, "creation_date": 1549491180, "post_id": 54563193, "comment_id": 95925621, "body": "Reverse the order and python casts the list to set for you: <code>list1_as_set.issuperset(l)</code>."}, {"owner": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "reply_to_user": {"reputation": 39811, "user_id": 1322401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JlaPg.jpg?s=128&g=1", "display_name": "Steven Rumbalski", "link": "https://stackoverflow.com/users/1322401/steven-rumbalski"}, "edited": false, "score": 1, "creation_date": 1549497958, "post_id": 54563193, "comment_id": 95927739, "body": "@StevenRumbalski Nice improvement"}], "tags": [], "owner": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "is_accepted": true, "score": 2, "last_activity_date": 1549503750, "last_edit_date": 1549503750, "creation_date": 1549490321, "answer_id": 54563193, "question_id": 54562972, "link": "https://stackoverflow.com/questions/54562972/python-check-if-a-2-dimensional-list-contains-numbers-of-another-list/54563193#54563193", "title": "Python Check if a 2-dimensional list contains numbers of another list", "body": "<p>Finding if a collection of items is a subset of another is more efficiently handled by a <code>set</code> than a <code>list</code>. Casting your list to a set allow quick lookup with the <code>set.issuperset</code> method.</p>\n\n<pre><code>list_of_lists = [[1,2,3],[4,5,6]]\nlist1 = [4, 5, 6, 7]\n\nlist1_as_set = set(list1)\n\nresult = any(list1_as_set.issuperset(l) for l in list_of_lists) # True\n</code></pre>\n\n<p>The above code using <code>any</code> is equivalent to this solution using a for-loop.</p>\n\n<pre><code>for l in list_of_lists:\n    if list1_as_set.issuperset(l):\n        result = True\n        break\nelse:\n    result = False\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 8524418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa5d90aca0ec52722b4585c64fa3cca5?s=128&d=identicon&r=PG&f=1", "display_name": "Miray", "link": "https://stackoverflow.com/users/8524418/miray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 54563193, "answer_count": 1, "score": 3, "last_activity_date": 1549503750, "creation_date": 1549489262, "last_edit_date": 1549489961, "question_id": 54562972, "link": "https://stackoverflow.com/questions/54562972/python-check-if-a-2-dimensional-list-contains-numbers-of-another-list", "title": "Python Check if a 2-dimensional list contains numbers of another list", "body": "<p>I want to know if a list contains numbers from a list of a list, but nothing I tried worked as I wanted. For example if a list of a list in list2 = [[1,2,3],[4,5,6]] is in list1 = [4, 5, 6, 7] it should print out True, because the numbers of list1 are a whole list from list2. So because list1 contains the numbers 4, 5, 6 the output should be True.</p>\n\n<p>Here is what I tried</p>\n\n<pre><code>for i in range(len(list2)):\n    if list1 in list2[i]:\n        print('True')\n    else:\n        print('False')\n</code></pre>\n\n<p>It prints out False two times (but I need it to print out True) and I get why </p>\n\n<pre><code>[1, 2, 3] in [1, 2, 3, 4]\n&gt;&gt;&gt; False\n</code></pre>\n\n<p>Is there a way to avoid this?\nOr should I just use strings since it works with them just fine?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 21, "user_id": 10699184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b97aa881cbd0e2d8fe2eebb52d8f3c5c?s=128&d=identicon&r=PG&f=1", "display_name": "cribb", "link": "https://stackoverflow.com/users/10699184/cribb"}, "edited": false, "score": 0, "creation_date": 1549491023, "post_id": 54562961, "comment_id": 95925565, "body": "can this help? <a href=\"https://stackoverflow.com/questions/35423928/how-do-i-convert-a-complex-number\" title=\"how do i convert a complex number\">stackoverflow.com/questions/35423928/&hellip;</a>"}, {"owner": {"reputation": 1434, "user_id": 7212665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KrLoI.jpg?s=128&g=1", "display_name": "Demi-Lune", "link": "https://stackoverflow.com/users/7212665/demi-lune"}, "edited": false, "score": 0, "creation_date": 1549491895, "post_id": 54562961, "comment_id": 95925860, "body": "well, this polynomial has complex roots, so how do you want to &quot;avoid&quot; complex? Pick a polynomial with only real roots? Take its real part or its modulus?"}, {"owner": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "edited": false, "score": 0, "creation_date": 1549553348, "post_id": 54562961, "comment_id": 95951044, "body": "The first call to <code>solve</code> is superfluous. You do not use the result and the variable name is reused, which delegates the previous result to the garbage collector."}], "answers": [{"tags": [], "owner": {"reputation": 2288, "user_id": 8408080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b487ee532f07476aea6610f459b3fdaf?s=128&d=identicon&r=PG&f=1", "display_name": "user8408080", "link": "https://stackoverflow.com/users/8408080/user8408080"}, "is_accepted": false, "score": 0, "last_activity_date": 1549491698, "creation_date": 1549491698, "answer_id": 54563471, "question_id": 54562961, "link": "https://stackoverflow.com/questions/54562961/how-to-avoid-complex-numbers-and-get-floats/54563471#54563471", "title": "How to avoid complex numbers and get floats?", "body": "<p>You can just check if the result is real:</p>\n\n<pre><code>from sympy import *\n\nx = symbol.Symbol(\"x\")\n\nfunction = input(\"function =\")  #x^5+x^4+x^3+x^2+x+1 for example\n\nn1 = solve(function,x)\n\nfor n1 in solve(function,x): \n    if n1.is_real:\n        print(\"n1 :\",(N(n1)))\n</code></pre>\n\n<p>The other roots are still there, but now you only see the ones in real space.</p>\n"}, {"tags": [], "owner": {"reputation": 8438, "user_id": 3511819, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7fac02ad0909ae0411a642e72a1b41d8?s=128&d=identicon&r=PG", "display_name": "AlexG", "link": "https://stackoverflow.com/users/3511819/alexg"}, "is_accepted": false, "score": 0, "last_activity_date": 1549491769, "creation_date": 1549491769, "answer_id": 54563481, "question_id": 54562961, "link": "https://stackoverflow.com/questions/54562961/how-to-avoid-complex-numbers-and-get-floats/54563481#54563481", "title": "How to avoid complex numbers and get floats?", "body": "<p>Your example (<code>x**5 + x**4 + x**3 + x**2 + x + 1</code>) is a 5th order polynomial so it can have up to 5 roots. In this case <a href=\"https://www.wolframalpha.com/input/?i=x%5E5%2Bx%5E4%2Bx%5E3%2Bx%5E2%2Bx%2B1%3D0\" rel=\"nofollow noreferrer\">there is only one real root, and the rest are complex</a>.</p>\n\n<p>Hence the output is exactly what you would expect</p>\n\n<pre><code>n1 : -1.00000000000000\nn1 : -0.5 - 0.866025403784439*I\nn1 : -0.5 + 0.866025403784439*I\nn1 : 0.5 - 0.866025403784439*I\nn1 : 0.5 + 0.866025403784439*I\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11025267, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9gni3.jpg?s=128&g=1", "display_name": "ChriPhi", "link": "https://stackoverflow.com/users/11025267/chriphi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1549491769, "creation_date": 1549489213, "last_edit_date": 1549490784, "question_id": 54562961, "link": "https://stackoverflow.com/questions/54562961/how-to-avoid-complex-numbers-and-get-floats", "title": "How to avoid complex numbers and get floats?", "body": "<p>this our first Homework and we struggle a problem.We try to create a code for a curve sketching, but Our problem is that we have to put some results in another function to get to our goal. We just get complex numbers for result but need floats. </p>\n\n<p>How can we avoid getting complex numbers in the first place?</p>\n\n<pre><code>from sympy import *\n\nfunction = input(\"function =\")  #x^5+x^4+x^3+x^2+x+1 for example\n\nn1 = solve(function,x)\n\nfor n1 in solve(function,x): \n   print(\"n1 :\",(N(n1)))\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1549489506, "post_id": 54562924, "comment_id": 95924934, "body": "Please indicate your expected output."}, {"owner": {"reputation": 2352, "user_id": 157931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/986d255e94481d2249bae7911e7845e8?s=128&d=identicon&r=PG", "display_name": "Danilo Cabello", "link": "https://stackoverflow.com/users/157931/danilo-cabello"}, "edited": false, "score": 0, "creation_date": 1549507884, "post_id": 54562924, "comment_id": 95929729, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/50376983/convert-nested-json-response-to-dataframe-in-python-pandas\">Convert nested json response to dataframe in Python pandas</a>"}], "answers": [{"tags": [], "owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "is_accepted": false, "score": 0, "last_activity_date": 1549489852, "last_edit_date": 1549489852, "creation_date": 1549489509, "answer_id": 54563011, "question_id": 54562924, "link": "https://stackoverflow.com/questions/54562924/create-dataframe-from-a-list-of-nested-dictionary-objects/54563011#54563011", "title": "Create DataFrame from a list of nested dictionary objects", "body": "<p>It looks like this is data you could flatten using a for loop:</p>\n\n<pre><code>new_data = []\n\nfor item in data:\n    new_entry = {}\n    for k,v in item.items():\n        # a dictionary will return True for isinstance(v, dict)\n        if not isinstance(v, dict):\n            # v is not a dictionary here\n            new_entry[k] = v\n        else:\n            # v is a dictionary, so we flatten it\n            for a,b in v.items():\n                new_entry[a] = b\n\n    new_data.append(new_entry)\n\ndf = pd.DataFrame(new_data)\n</code></pre>\n\n<p>The inner loop is a more generalized approach to using something like <code>if k=='Fields'</code>, which would be more specific to your problem</p>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 9566461, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1RXiL.png?s=128&g=1", "display_name": "Rodrigo Hern&#225;ndez Mota", "link": "https://stackoverflow.com/users/9566461/rodrigo-hern%c3%a1ndez-mota"}, "is_accepted": false, "score": 0, "last_activity_date": 1549522509, "creation_date": 1549522509, "answer_id": 54567838, "question_id": 54562924, "link": "https://stackoverflow.com/questions/54562924/create-dataframe-from-a-list-of-nested-dictionary-objects/54567838#54567838", "title": "Create DataFrame from a list of nested dictionary objects", "body": "<p>Assuming you only have 1 level of nested dictionaries and you know the key name:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>for d in data:\n    d.update(d.pop('fields'))\n</code></pre>\n\n<p>You only need to \"pop\" the element out of the dictionary and add the inner key-value data in the base level. The <code>update</code> method will do the latter as an inplace operation. </p>\n\n<p>Now you can create your pandas dataframe with the columns you were expecting: </p>\n\n<pre><code>In [5]: pd.DataFrame(data)\nOut[5]: \n   follower_count  model  name  pk profile_image         unique_key\n0            2395  class  john  48                 9f030ed1d5e56523\n1             264  class  dais  49                0e8256ad7f27270eb\n\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10910137, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JbghWPL72a8/AAAAAAAAAAI/AAAAAAAAACo/rEsKzVlNvcE/photo.jpg?sz=128", "display_name": "mayona Al-Harbi", "link": "https://stackoverflow.com/users/10910137/mayona-al-harbi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1549522509, "creation_date": 1549489059, "last_edit_date": 1549521257, "question_id": 54562924, "link": "https://stackoverflow.com/questions/54562924/create-dataframe-from-a-list-of-nested-dictionary-objects", "title": "Create DataFrame from a list of nested dictionary objects", "body": "<p>I have list of nested dictionary objects in a JSON file. I am trying to  create a DataFrame of this file.</p>\n\n<p>Here are the first 2 objects:</p>\n\n<pre><code>data= [ {\n    \"model\": \"class\",\n    \"pk\": 48,\n    \"fields\": {\n        \"unique_key\": \"9f030ed1d5e56523\",\n        \"name\": \"john\",\n        \"follower_count\": 2395,\n        \"profile_image\": \"  \"\n}  }  ,{ \n    \"model\": \"class\",\n    \"pk\": 49,\n    \"fields\": {\n        \"unique_key\": \"0e8256ad7f27270eb\",\n        \"name\": \"dais\",\n        \"follower_count\": 264,\n        \"profile_image\": \"   \"\n} }, .....]\n</code></pre>\n\n<p>If I try something like:</p>\n\n<pre><code>df = pd.DataFrame(data)\n</code></pre>\n\n<p>This is what I get.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Qpg8l.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Qpg8l.png\" alt=\"https://d.top4top.net/p_1132pfebn1.png\"></a></p>\n\n<p>I was looking for help and I found <a href=\"https://stackoverflow.com/a/13581730/10910137\">this</a>, but the problem is the list does not have a keys() function.</p>\n"}, {"tags": ["python", "anaconda"], "answers": [{"tags": [], "owner": {"reputation": 1262, "user_id": 5597037, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/eaab5b288caf39e6cbd4387c0c3cf344?s=128&d=identicon&r=PG", "display_name": "Mike C.", "link": "https://stackoverflow.com/users/5597037/mike-c"}, "is_accepted": true, "score": 2, "last_activity_date": 1549558340, "creation_date": 1549558340, "answer_id": 54578392, "question_id": 54562916, "link": "https://stackoverflow.com/questions/54562916/anaconda-prompt-instead-of-ps-in-microsoft-visual-code/54578392#54578392", "title": "Anaconda Prompt Instead of PS in Microsoft Visual Code", "body": "<p>I didn't find the exact answer I was looking for but I believe my solution may help others so I'm posting my workaround:</p>\n\n<p>Conveniently the Windows CMD or Powershell terminal opens in the same directory as the folder loaded into the Visual Code editor so I wanted to maintain this functionality. Here is how I did it without changing any Environmental Variables. </p>\n\n<p>First change the default terminal from within Visual Code to the CMD terminal instead of Powershell. Add the following code to a batch file. </p>\n\n<pre><code>call \"c:\\anaconda3\\Scripts\\activate\"\n</code></pre>\n\n<p>Then I named the batch file and saved it to my root directory. In my case <code>snake.bat</code>. Now when I launch my CMD terminal I just type <code>c:\\snake.bat</code>and the CMD prompt changes into an Anaconda prompt. </p>\n\n<p>The Visual Code Editor attempts to do this already, but has errors. I believe this is because it opens with Powershell instead of the CMD terminal by default. </p>\n"}], "owner": {"reputation": 1262, "user_id": 5597037, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/eaab5b288caf39e6cbd4387c0c3cf344?s=128&d=identicon&r=PG", "display_name": "Mike C.", "link": "https://stackoverflow.com/users/5597037/mike-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "accepted_answer_id": 54578392, "answer_count": 1, "score": 0, "last_activity_date": 1549558340, "creation_date": 1549489023, "question_id": 54562916, "link": "https://stackoverflow.com/questions/54562916/anaconda-prompt-instead-of-ps-in-microsoft-visual-code", "title": "Anaconda Prompt Instead of PS in Microsoft Visual Code", "body": "<p>Just installed Anaconda3. It came with the Microsoft Visual Code editor. I would like to use the Anaconda Prompt instead of Powershell or the CMD window from within the editor. Is there a way to change the default?</p>\n"}, {"tags": ["python", "xml", "soap"], "answers": [{"tags": [], "owner": {"reputation": 506, "user_id": 7342859, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A2yso.png?s=128&g=1", "display_name": "Shadowchaser", "link": "https://stackoverflow.com/users/7342859/shadowchaser"}, "is_accepted": false, "score": 0, "last_activity_date": 1549533889, "creation_date": 1549533889, "answer_id": 54570786, "question_id": 54562908, "link": "https://stackoverflow.com/questions/54562908/passing-to-soap-arguments-from-the-command-line/54570786#54570786", "title": "Passing to SOAP arguments from the command line", "body": "<p>You need to read a little about how to create strings in Python, below is how it could look like in your code. Sorry it's hard to say more without seeing your actual code. And you actually shouldn't create XMLs like that, you should use for instance xml module from standard library.</p>\n\n<pre><code>test = \"&lt;d4p1:Address&gt;\" + sys.argv[1] + \"&lt;/d4p1:Address&gt;\"\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11025321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e3e44d388c17d425ebad553ed4f92aa?s=128&d=identicon&r=PG&f=1", "display_name": "mzstack", "link": "https://stackoverflow.com/users/11025321/mzstack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549533889, "creation_date": 1549489005, "question_id": 54562908, "link": "https://stackoverflow.com/questions/54562908/passing-to-soap-arguments-from-the-command-line", "title": "Passing to SOAP arguments from the command line", "body": "<p>I have a python script that successfully sends SOAP to insert a record into a system.  The values are static in the test.  I need to make the value dynamic/argument that is passed through the command line or other stored value.</p>\n\n<p>execute: python myscript.py</p>\n\n<p><code>&lt;d4p1:Address&gt;MainStreet&lt;/d4p1:Address&gt;</code> ....this works to add hard coded \"MainStreet\"</p>\n\n<p>execute:  python myscript.py MainStreet </p>\n\n<p>...this is now trying to pass the argument MainStreet</p>\n\n<p><code>&lt;d4p1:Address&gt;sys.argv[1]&lt;/d4p1:Address&gt;</code>  ....this does not work</p>\n\n<p>It saves the literal text address as \"sys.argv[1]\" ... I have imported sys ..I have tried %, {}, etc from web searches, what syntax am I missing??</p>\n"}, {"tags": ["python", "reflection", "annotations"], "answers": [{"tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 1, "last_activity_date": 1549488873, "creation_date": 1549488873, "answer_id": 54562873, "question_id": 54562827, "link": "https://stackoverflow.com/questions/54562827/get-function-annotations-in-the-readable-format/54562873#54562873", "title": "Get function annotations in the &#39;readable&#39; format", "body": "<p>Use the <code>annotations</code> feature from the <code>__future__</code> module.</p>\n\n<pre><code>&gt;&gt;&gt; from __future__ import annotations\n&gt;&gt;&gt; def f(x:int): pass\n...\n&gt;&gt;&gt; f.__annotations__\n{'x': 'int'}\n</code></pre>\n\n<p>This, however, was not introduced until Python 3.7.  See <a href=\"https://www.python.org/dev/peps/pep-0563/\" rel=\"nofollow noreferrer\">PEP-563</a> for more information.</p>\n"}, {"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1549489038, "post_id": 54562898, "comment_id": 95924741, "body": "An annotation is <i>usually</i>, but not guaranteed to be, a type. It might be a forward reference, in which case it is already a string."}, {"owner": {"reputation": 11251, "user_id": 3284878, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/d324c610856d2626e9b719eb4135b3cb?s=128&d=identicon&r=PG&f=1", "display_name": "Aviv Cohn", "link": "https://stackoverflow.com/users/3284878/aviv-cohn"}, "edited": false, "score": 1, "creation_date": 1549489144, "post_id": 54562898, "comment_id": 95924791, "body": "You are my hero. Was looking exactly for that but couldn&#39;t find it, because I was searching in <code>dir(int)</code> and it wasn&#39;t there. Is this because <code>__name__</code> belongs to a superclass of <code>int</code>? Do you have advice of a better way of looking in the future?"}, {"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "reply_to_user": {"reputation": 11251, "user_id": 3284878, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/d324c610856d2626e9b719eb4135b3cb?s=128&d=identicon&r=PG&f=1", "display_name": "Aviv Cohn", "link": "https://stackoverflow.com/users/3284878/aviv-cohn"}, "edited": false, "score": 0, "creation_date": 1549489285, "post_id": 54562898, "comment_id": 95924855, "body": "@AvivCohn Yes, this is because the <code>__name__</code> attribute belongs to the <code>object</code> class, the super-class of all classes in Python 3."}], "tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": true, "score": 2, "last_activity_date": 1549490334, "last_edit_date": 1549490334, "creation_date": 1549488968, "answer_id": 54562898, "question_id": 54562827, "link": "https://stackoverflow.com/questions/54562827/get-function-annotations-in-the-readable-format/54562898#54562898", "title": "Get function annotations in the &#39;readable&#39; format", "body": "<p>The <code>annotation</code> attribute of each parameter object is a class object, so you can simply use the <code>__name__</code> attribute of the class object to obtain the class name as a string:</p>\n\n<pre><code>import inspect\n\ndef f(a: int):\n    pass\n\nprint(inspect.signature(f).parameters['a'].annotation.__name__)\n</code></pre>\n\n<p>This outputs:</p>\n\n<pre><code>int\n</code></pre>\n\n<p>But as @chepner pointed out, the <code>annotation</code> attribute can be a string if it's a forward reference, so if you want your code to be generic, you would have to take that into account. For example:</p>\n\n<pre><code>class A:\n    def f(self, a: 'A'):\n        pass\n\nannotation = inspect.signature(A.f).parameters['a'].annotation\nprint(annotation.__name__ if isinstance(annotation, type) else annotation)\n</code></pre>\n\n<p>This outputs:</p>\n\n<pre><code>A\n</code></pre>\n"}], "owner": {"reputation": 11251, "user_id": 3284878, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/d324c610856d2626e9b719eb4135b3cb?s=128&d=identicon&r=PG&f=1", "display_name": "Aviv Cohn", "link": "https://stackoverflow.com/users/3284878/aviv-cohn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 54562898, "answer_count": 2, "score": 1, "last_activity_date": 1549490334, "creation_date": 1549488667, "question_id": 54562827, "link": "https://stackoverflow.com/questions/54562827/get-function-annotations-in-the-readable-format", "title": "Get function annotations in the &#39;readable&#39; format", "body": "<p>When inspecting at runtime the annotations of a function, one can get the <code>class</code> annotated for a given argument. For example:</p>\n\n<pre><code>&gt;&gt;&gt; import inspect\n&gt;&gt;&gt; inspect.signature(f).parameters['a'].annotation\n&lt;class 'int'&gt;\n</code></pre>\n\n<p>The same can be achieved by doing <code>f.__annotations__</code>.</p>\n\n<p>However, for reasons I will spare the reader, I would like to get the annotation in readable text format. For example: <code>a: int</code> will be retrieved as <code>int</code>, not as <code>&lt;class 'int'&gt;</code>.\nAssume the text should be legal as input to <code>eval</code>.</p>\n\n<p>I know I can do:</p>\n\n<pre><code>&gt;&gt;&gt; str(inspect.signature(f).parameters['a'])\n'a:int'\n</code></pre>\n\n<p>And then process this string using <code>.split</code> and such. But I'm wondering if there's a better way.</p>\n"}, {"tags": ["python", "machine-learning", "scikit-learn"], "answers": [{"tags": [], "owner": {"reputation": 1709, "user_id": 9651974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ed2fe77cdd5ebb3dfcd1f7bec8c2805?s=128&d=identicon&r=PG&f=1", "display_name": "Proyag", "link": "https://stackoverflow.com/users/9651974/proyag"}, "is_accepted": true, "score": 1, "last_activity_date": 1549529915, "creation_date": 1549529915, "answer_id": 54569583, "question_id": 54562820, "link": "https://stackoverflow.com/questions/54562820/meaning-of-tfidfvectorizer-toarray-and-hashingvectorizer/54569583#54569583", "title": "Meaning of TfidfVectorizer toarray() and HashingVectorizer", "body": "<ul>\n<li>You see duplicate numbers in the first case because you have multiple words in your \"corpus\" that have identical IDF (inverse document frequency). For example, the words <em>dog</em> and <em>fox</em> have the exact same pattern of occurrence in your text, so they have the same IDF; these two are represented by the  1.28768207 values. The word <em>the</em> occurs in every text, so it's represented by the 1. The rest of the words in the vocabulary occur once in the first text and not in the other two, so they all have the exact same IDF. You can see which feature corresponds to which word with <code>vectorizer.get_feature_names()</code>.</li>\n<li>With HashingVectorizer, you have chosen the number of features to be 20, but the total number of unique words in your text is less than 20, so you will have a lot of features which are 0. You get less than 8 non-zero elements because there are some hash collisions - that's because 20 is way too few features to avoid collisions (consider that the default is 2^20). If you choose a higher <code>n_features</code>, you will get exactly 8 non-zero elements. You have duplicate values because, once again, almost all the features have identical frequencies in that text.</li>\n<li>And for the question in your title, the <a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.csr_matrix.toarray.html\" rel=\"nofollow noreferrer\"><code>toarray()</code> method</a> converts the efficient representation of a sparse matrix that sklearn uses to your ordinary readable dense ndarray representation.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 1606, "user_id": 8884381, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WRNLHm93hTI/AAAAAAAAAAI/AAAAAAAAATA/6LF5hhHs_S8/photo.jpg?sz=128", "display_name": "Amit Gupta", "link": "https://stackoverflow.com/users/8884381/amit-gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1549531978, "creation_date": 1549531978, "answer_id": 54570189, "question_id": 54562820, "link": "https://stackoverflow.com/questions/54562820/meaning-of-tfidfvectorizer-toarray-and-hashingvectorizer/54570189#54570189", "title": "Meaning of TfidfVectorizer toarray() and HashingVectorizer", "body": "<blockquote>\n  <p>TfidfVectorizer()</p>\n</blockquote>\n\n<p>converts a collection of raw documents to a matrix of TF-IDF features.\nyou are running </p>\n\n<blockquote>\n  <p>vectorizer.fit(text)</p>\n</blockquote>\n\n<p>only\ni suggest you run</p>\n\n<blockquote>\n  <p>vectorizer.fit_transform(text)</p>\n</blockquote>\n\n<p>then it tokenized your text created a features for your text. since your text have 8 features (<strong>{'the': 7, 'quick': 6, 'brown': 0, 'fox': 2, 'jumped': 3, 'over': 5, \n'lazy': 4, 'dog': 1}</strong>\nit returned you 8 frequencies corresponding to them. you can also cross verify it by running</p>\n\n<blockquote>\n  <p>print(vectorizer.get_feature_names())</p>\n</blockquote>\n\n<p>which will give you\n<strong>['brown', 'dog', 'fox', 'jumped', 'lazy', 'over', 'quick', 'the']</strong></p>\n\n<blockquote>\n  <p>print(vectorizer.fit_transform(text).shape)</p>\n</blockquote>\n\n<p>will give you </p>\n\n<blockquote>\n  <p>(3, 8)</p>\n</blockquote>\n"}], "owner": {"reputation": 181, "user_id": 10407349, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oNxxUOVUesM/AAAAAAAAAAI/AAAAAAAABf8/YIRllh-RRTI/photo.jpg?sz=128", "display_name": "Nicola", "link": "https://stackoverflow.com/users/10407349/nicola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 660, "favorite_count": 0, "accepted_answer_id": 54569583, "answer_count": 2, "score": 0, "last_activity_date": 1549535106, "creation_date": 1549488647, "last_edit_date": 1549535106, "question_id": 54562820, "link": "https://stackoverflow.com/questions/54562820/meaning-of-tfidfvectorizer-toarray-and-hashingvectorizer", "title": "Meaning of TfidfVectorizer toarray() and HashingVectorizer", "body": "<p>I'm trying to understand vectorizer in python..\nI'm using this example code:</p>\n\n<pre><code>from sklearn.feature_extraction.text import TfidfVectorizer\n# list of text documents\ntext = [\"The quick brown fox jumped over the lazy dog.\", \"The dog.\", \"The fox\"]\nprint(text)\n# create the transform\nvectorizer = TfidfVectorizer()\n# tokenize and build vocab\nvectorizer.fit(text)\n# summarize\nprint(vectorizer.idf_)\n# encode document\nvector = vectorizer.transform([text[0]])\n# summarize encoded vector\nprint(vector.shape)\nprint(vector.toarray())\nprint(vectorizer.vocabulary_)\n</code></pre>\n\n<p>The output is this:</p>\n\n<pre><code>['The quick brown fox jumped over the lazy dog.', 'The dog.', 'The fox']\n[1.69314718 1.28768207 1.28768207 1.69314718 1.69314718 1.69314718\n1.69314718 1.        ]\n(1, 8)\n[[0.36388646 0.27674503 0.27674503 0.36388646 0.36388646 0.36388646\n0.36388646 0.42983441]]\n{'the': 7, 'quick': 6, 'brown': 0, 'fox': 2, 'jumped': 3, 'over': 5, \n'lazy': 4, 'dog': 1}\n</code></pre>\n\n<p>I don't understand why vector.toarray() produce duplicate number for different word..for example there are 0.36388646 four times..and 0.27674503 two times..what does rapresent this number?\nThe number that the neural network use to train it self are those printed with vectorizer.vocabulary_?</p>\n\n<p>With hashing vectorizer instead I have this code:</p>\n\n<pre><code>from sklearn.feature_extraction.text import HashingVectorizer\n# list of text documents\ntext = [\"The quick brown fox jumped over the lazy dog.\"]\n# create the transform\nvectorizer = HashingVectorizer(n_features=20)\n# encode document\nvector = vectorizer.fit_transform(text)\n# summarize encoded vector\nprint(vector.shape)\nprint(vector.toarray())\n</code></pre>\n\n<p>And that's the output:</p>\n\n<pre><code>(1, 20)\n[[ 0.          0.          0.          0.          0.          0.33333333\n 0.         -0.33333333  0.33333333  0.          0.          0.33333333\n 0.          0.          0.         -0.33333333  0.          0.\n-0.66666667  0.        ]]\n</code></pre>\n\n<p>Is the 0. value used? What rapresent? And why even there it prints duplicate values? (0.3333333 and -0.33333333)</p>\n"}, {"tags": ["python", "pandas", "matplotlib"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 1, "creation_date": 1549488749, "post_id": 54562810, "comment_id": 95924616, "body": "It seems you only consider integers as possible outcomes. Hence you need to specify the histogram bins accordingly."}, {"owner": {"reputation": 4110, "user_id": 3810748, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/H7MEA.png?s=128&g=1", "display_name": "AlanSTACK", "link": "https://stackoverflow.com/users/3810748/alanstack"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1549488875, "post_id": 54562810, "comment_id": 95924669, "body": "@ImportanceOfBeingErnest Thats not my question. Even after specifying bins <code>[1, 2, 3, 4, 5]</code> the graph is still unaligned. Some bars are to the right of the axis, some to the left."}, {"owner": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "edited": false, "score": 0, "creation_date": 1549489003, "post_id": 54562810, "comment_id": 95924728, "body": "how about <code>result[&quot;rating&quot;].hist(bins=5)</code>? if you provide a list, it takes those as the bin edges, and you need to make sure the integer ratings fall in-between the bin edges like so: <code>bins=[.5, 1.5, 2.5, 3.5, 4.5, 5.5]</code>"}], "owner": {"reputation": 4110, "user_id": 3810748, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/H7MEA.png?s=128&g=1", "display_name": "AlanSTACK", "link": "https://stackoverflow.com/users/3810748/alanstack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "closed_date": 1549488940, "answer_count": 0, "score": 0, "last_activity_date": 1549488590, "creation_date": 1549488590, "last_edit_date": 1592644375, "question_id": 54562810, "link": "https://stackoverflow.com/questions/54562810/how-to-center-histogram-bars", "closed_reason": "Duplicate", "title": "How to center histogram bars?", "body": "<p>I am currently doing some analysis on Amazon's item ratings using pandas and matplotlib.</p>\n<p>I am using the following code to generate a plot</p>\n<pre><code>result = ratings.copy()\n\nresult[&quot;rating&quot;].plot(kind=&quot;hist&quot;)\n\nfname = os.path.join(&quot;..&quot;, &quot;figs&quot;, &quot;my_figure.png&quot;)\nplt.savefig(fname)\n</code></pre>\n<p>Where <code>ratings</code> is a dataframe that looks like this</p>\n<pre><code>0       A2VNYWOPJ13AFP  0981850006     5.0  1259798400\n1       A20DWVV8HML3AW  0981850006     5.0  1371081600\n2       A3RVP3YBYYOPRH  0981850006     5.0  1257984000\n3       A28XY55TP3Q90O  0981850006     3.0  1314144000\n4       A3VZW1BGUQO0V3  0981850006     3.0  1308268800\n5       A2R9T5D7UVQZB0  0981850006     5.0  1253577600\n6       A2MH49GAEWEI95  0981850006     5.0  1395532800\n7        AR5DPX4ZU3D4Z  144072007X     1.0  1360886400\n</code></pre>\n<p>Unfortunately, my generated plot looks like this (notice how the bars are not all lined up)</p>\n<p><a href=\"https://i.stack.imgur.com/S9f4Om.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/S9f4Om.png\" alt=\"enter image description here\" /></a></p>\n<h3>How do I make it so that all the bars are centered (e.g. like 4.0 and 2.0)</h3>\n"}, {"tags": ["python", "rest", "jenkins"], "answers": [{"tags": [], "owner": {"reputation": 540, "user_id": 1329542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24431864b28597f0e604c5db3f5f0547?s=128&d=identicon&r=PG", "display_name": "Morten", "link": "https://stackoverflow.com/users/1329542/morten"}, "is_accepted": true, "score": 0, "last_activity_date": 1549492729, "creation_date": 1549492729, "answer_id": 54563642, "question_id": 54562795, "link": "https://stackoverflow.com/questions/54562795/is-there-a-way-to-authenticate-a-remote-session-to-scrape-data-and-remain-authen/54563642#54563642", "title": "Is there a way to authenticate a remote session to scrape data and remain authenticated instead of authenticate in each request?", "body": "<p>Yes, you'll need to get a cookie. Make sure you use the same session object throughout the run, and just make your first request a login request. Not sure exactly what Jenkins requires to do a login, but you could probably get some good ideas from the <a href=\"https://github.com/pycontribs/jenkinsapi/blob/master/jenkinsapi/jenkins.py\" rel=\"nofollow noreferrer\">jenkinsapi</a> project or other software doing the same thing. Code copied from them:</p>\n\n<pre><code>login_url = 'j_acegi_security_check'\njenkins_url = '{0}/{1}'.format(self.baseurl, login_url)\ndata = urlencode({'j_username': self.username,\n                  'j_password': self.password}).encode(\"utf-8\")\n</code></pre>\n\n<p>Note that they do some things that may not be strictly needed in your use case. Also consider actually using that library, or a similar one, instead of writing your own code from scratch.</p>\n"}], "owner": {"reputation": 3, "user_id": 10858049, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dxpazGJ0R7U/AAAAAAAAAAI/AAAAAAAAAH8/EsgwGNBjXd0/photo.jpg?sz=128", "display_name": "Cesar Cabral", "link": "https://stackoverflow.com/users/10858049/cesar-cabral"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 54563642, "answer_count": 1, "score": 0, "last_activity_date": 1549499510, "creation_date": 1549488505, "last_edit_date": 1549499510, "question_id": 54562795, "link": "https://stackoverflow.com/questions/54562795/is-there-a-way-to-authenticate-a-remote-session-to-scrape-data-and-remain-authen", "title": "Is there a way to authenticate a remote session to scrape data and remain authenticated instead of authenticate in each request?", "body": "<p>I have a python script to scrape data from the jenkins api. The issue is that the script authenticates at each request and that is not performant. I would like to authenticate once and be able to query data as much as I like.</p>\n\n<p>Is that possible? </p>\n\n<pre><code>import requests\nfrom basicauth import encode\nfrom pprint import pprint\nimport json\n\n\nclass JenkinsInfo(object):\n\n    defaultHeader = {\n    'Accept': 'application/json, */*',\n    'content-type': 'application/json',\n    'Authorization': ''\n    }\n\n    def __init__(self, url, user, password):\n        self.jenkins_url = url.rstrip(\"/\")\n        self.jenkins_user = user\n        self.jenkins_password = password\n        self.s = requests.Session()\n        self.ssl_verify = ssl_verify\n        self.defaultHeader['Authorization'] = encode(user, password)\n\n#### the script below is the one that call previous class ###  \n\nfrom prometheus_client import start_http_server,Counter\nfrom conf_example import JENKINS_URL, JENKINS_USER, \nJENKINS_PASSWORD\nfrom jenkins_metrics import JenkinsInfo\nimport time\nfrom sys import exit\n\n\ndef main():\n    print(\"Starting Jenkins Metrics\")\n    jenkins = JenkinsInfo(JENKINS_URL, JENKINS_USER, JENKINS_PASSWORD)\n</code></pre>\n"}, {"tags": ["python", "flask", "werkzeug"], "comments": [{"owner": {"reputation": 3334, "user_id": 4765864, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/2M2eC.jpg?s=128&g=1", "display_name": "gonczor", "link": "https://stackoverflow.com/users/4765864/gonczor"}, "edited": false, "score": 0, "creation_date": 1549488902, "post_id": 54562779, "comment_id": 95924682, "body": "The first thing that came to my mind are some daeomn-like threads. Have you considered this?"}, {"owner": {"reputation": 1245, "user_id": 4847176, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/MOVQW.jpg?s=128&g=1", "display_name": "Sir Neuman", "link": "https://stackoverflow.com/users/4847176/sir-neuman"}, "edited": false, "score": 1, "creation_date": 1549489306, "post_id": 54562779, "comment_id": 95924861, "body": "does <code>flask.request.url_rule.endpoint</code> get you what you need?"}, {"owner": {"reputation": 13896, "user_id": 593487, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/dfe859f5e7f4dbb7c66da27ceb06b92b?s=128&d=identicon&r=PG", "display_name": "johndodo", "link": "https://stackoverflow.com/users/593487/johndodo"}, "reply_to_user": {"reputation": 1245, "user_id": 4847176, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/MOVQW.jpg?s=128&g=1", "display_name": "Sir Neuman", "link": "https://stackoverflow.com/users/4847176/sir-neuman"}, "edited": false, "score": 0, "creation_date": 1549521934, "post_id": 54562779, "comment_id": 95933481, "body": "@SirNeuman I have edited the answer - unfortunately it doesn&#39;t work outside of request context."}, {"owner": {"reputation": 13896, "user_id": 593487, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/dfe859f5e7f4dbb7c66da27ceb06b92b?s=128&d=identicon&r=PG", "display_name": "johndodo", "link": "https://stackoverflow.com/users/593487/johndodo"}, "reply_to_user": {"reputation": 3334, "user_id": 4765864, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/2M2eC.jpg?s=128&g=1", "display_name": "gonczor", "link": "https://stackoverflow.com/users/4765864/gonczor"}, "edited": false, "score": 0, "creation_date": 1549539938, "post_id": 54562779, "comment_id": 95942890, "body": "@gonczor I would prefer it I could avoid threads (I have edited the answer to reflect that, thanks!). The solution with WSGI Middleware is actually perfect for what I need, I just need to be able to pass parameters to my handler (which I am almost sure can be done somehow, but my WSGI-foo is lacking :) )."}, {"owner": {"reputation": 1245, "user_id": 4847176, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/MOVQW.jpg?s=128&g=1", "display_name": "Sir Neuman", "link": "https://stackoverflow.com/users/4847176/sir-neuman"}, "edited": false, "score": 1, "creation_date": 1549549384, "post_id": 54562779, "comment_id": 95948510, "body": "@johndodo If it&#39;s outside of the request context could you add <code>@copy_current_request_context</code> decorator to your <code>say_hi</code> function? <a href=\"http://flask.pocoo.org/docs/1.0/api/#flask.copy_current_request_context\" rel=\"nofollow noreferrer\">flask.pocoo.org/docs/1.0/api/&hellip;</a>"}, {"owner": {"reputation": 13896, "user_id": 593487, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/dfe859f5e7f4dbb7c66da27ceb06b92b?s=128&d=identicon&r=PG", "display_name": "johndodo", "link": "https://stackoverflow.com/users/593487/johndodo"}, "reply_to_user": {"reputation": 1245, "user_id": 4847176, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/MOVQW.jpg?s=128&g=1", "display_name": "Sir Neuman", "link": "https://stackoverflow.com/users/4847176/sir-neuman"}, "edited": false, "score": 0, "creation_date": 1549554572, "post_id": 54562779, "comment_id": 95951842, "body": "@SirNeuman Yes, thank you, that works! But only if I use <code>@after_this_response</code>. Do you maybe know how I could get the current request context in case of <a href=\"https://stackoverflow.com/a/51013358/593487\"><code>@after_response</code></a> too?"}, {"owner": {"reputation": 13896, "user_id": 593487, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/dfe859f5e7f4dbb7c66da27ceb06b92b?s=128&d=identicon&r=PG", "display_name": "johndodo", "link": "https://stackoverflow.com/users/593487/johndodo"}, "reply_to_user": {"reputation": 1245, "user_id": 4847176, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/MOVQW.jpg?s=128&g=1", "display_name": "Sir Neuman", "link": "https://stackoverflow.com/users/4847176/sir-neuman"}, "edited": false, "score": 0, "creation_date": 1549626518, "post_id": 54562779, "comment_id": 95979700, "body": "@SirNeuman If you care to post an answer, I would be happy to accept it. And thank you again!"}], "answers": [{"comments": [{"owner": {"reputation": 2196, "user_id": 78903, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/31b0e7df40a7e327e7908f61a314fe47?s=128&d=identicon&r=PG", "display_name": "Kiran Jonnalagadda", "link": "https://stackoverflow.com/users/78903/kiran-jonnalagadda"}, "edited": false, "score": 0, "creation_date": 1596805258, "post_id": 54594428, "comment_id": 111936571, "body": "<code>after_this_response</code> does not seem to exist -- only <code>after_this_request</code>, which adds a temporary <code>after_request</code> handler and still runs before returning to the browser. However, there is a <code>response.call_on_close</code> decorator that does the job and can be paired with <code>copy_current_request_context</code>."}, {"owner": {"reputation": 2196, "user_id": 78903, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/31b0e7df40a7e327e7908f61a314fe47?s=128&d=identicon&r=PG", "display_name": "Kiran Jonnalagadda", "link": "https://stackoverflow.com/users/78903/kiran-jonnalagadda"}, "edited": false, "score": 0, "creation_date": 1596805541, "post_id": 54594428, "comment_id": 111936688, "body": "I should have read more carefully for where that method is coming from. In any case, I found a simpler way to do this without creating new middleware: <a href=\"https://stackoverflow.com/a/63080968/78903\">stackoverflow.com/a/63080968/78903</a>"}], "tags": [], "owner": {"reputation": 1245, "user_id": 4847176, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/MOVQW.jpg?s=128&g=1", "display_name": "Sir Neuman", "link": "https://stackoverflow.com/users/4847176/sir-neuman"}, "is_accepted": true, "score": 1, "last_activity_date": 1549635771, "creation_date": 1549635771, "answer_id": 54594428, "question_id": 54562779, "link": "https://stackoverflow.com/questions/54562779/how-to-determine-endpoint-in-after-response-handler/54594428#54594428", "title": "How to determine endpoint in &quot;after response&quot; handler?", "body": "<p>To get the endpoint of the original request inside <code>@app.after_this_response</code> you can do the following:</p>\n\n<pre><code>@app.route('/api/status/info', methods=['GET'])\ndef get_status_info():\n\n    @app.after_this_response('get_status_info')\n    @flask.copy_current_request_context\n    def say_hi():\n        print('hi, %s', % (flask.request.url_rule.endpoint))\n\n    return 'ok', 200\n</code></pre>\n\n<p><code>flask.request.url_rule.endpoint</code> gives you the endpoint's name, however you lose the request context by default when it passes onto the <code>say_hi</code> function, which is why you need the <code>@copy_current_request_context</code> decorator to pass on the context. Reference to that decorator is here: <a href=\"http://flask.pocoo.org/docs/1.0/api/#flask.copy_current_request_context\" rel=\"nofollow noreferrer\">http://flask.pocoo.org/docs/1.0/api/#flask.copy_current_request_context</a></p>\n"}], "owner": {"reputation": 13896, "user_id": 593487, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/dfe859f5e7f4dbb7c66da27ceb06b92b?s=128&d=identicon&r=PG", "display_name": "johndodo", "link": "https://stackoverflow.com/users/593487/johndodo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 325, "favorite_count": 0, "accepted_answer_id": 54594428, "answer_count": 1, "score": 0, "last_activity_date": 1549635771, "creation_date": 1549488409, "last_edit_date": 1549540097, "question_id": 54562779, "link": "https://stackoverflow.com/questions/54562779/how-to-determine-endpoint-in-after-response-handler", "title": "How to determine endpoint in &quot;after response&quot; handler?", "body": "<p>I am developing a REST API in Flask. Some endpoints need to perform additional duties after the response is handled, but I would like to avoid using external processing queue or threads. One very convenient solution seems to be with WSGI Middleware and ClosingIterator, as outlined in <a href=\"https://stackoverflow.com/a/51027874/593487\">this answer</a>. However the handler of each point needs to know which endpoint handled the request, in order to perform their post-mortem duties.</p>\n\n<p>One idea is to decorate my endpoints like this:</p>\n\n<pre><code>@app.route('/api/status/info', methods=['GET'])\ndef get_status_info():\n    @app.after_this_response('get_status_info')\n    def say_hi():\n        print('hi, unknown endpoint!')\n\n    return 'ok', 200\n</code></pre>\n\n<p>Instead of <code>unknown endpoint</code> I would like to print <code>get_status_info</code>. Is this possible?</p>\n\n<p>Even better, if I write a generic <code>@app.after_response</code> handler (as in <a href=\"https://stackoverflow.com/a/51013358/593487\">another answer</a> by the same author), can I determine in it which endpoint was used for handling the request?</p>\n\n<p><strong>EDIT:</strong> Trying to use <code>flask.request.url_rule.endpoint</code> throws an exception:</p>\n\n<pre><code>RuntimeError: Working outside of request context.\n</code></pre>\n"}, {"tags": ["python", "string", "comparison", "string-comparison"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1549489251, "post_id": 54562774, "comment_id": 95924838, "body": "The <a href=\"https://docs.python.org/2/howto/sorting.html\" rel=\"nofollow noreferrer\">documentation</a>, <a href=\"https://thispointer.com/python-how-to-sort-a-list-of-strings-list-sort-tutorial-examples/\" rel=\"nofollow noreferrer\">how to sort</a> and other sites, define and demonstrate string ordering.  As the posting guidelines tell you, we expect you to do this search before posting a question."}], "answers": [{"tags": [], "owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "is_accepted": false, "score": 1, "last_activity_date": 1549488506, "creation_date": 1549488506, "answer_id": 54562796, "question_id": 54562774, "link": "https://stackoverflow.com/questions/54562774/why-does-aa-z-evaluate-to-true-in-python/54562796#54562796", "title": "Why does &#39;aa&#39; &lt; &#39;z&#39; evaluate to True in Python?", "body": "<p>They're in dictionary order. Alphabetical order first, length as a tie breaker. Just like in a dictionary, <code>a</code> precedes <code>aa</code> which precedes <code>z</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 214708, "user_id": 201359, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7odj.jpg?s=128&g=1", "display_name": "&#211;scar L&#243;pez", "link": "https://stackoverflow.com/users/201359/%c3%93scar-l%c3%b3pez"}, "is_accepted": false, "score": 4, "last_activity_date": 1549489025, "last_edit_date": 1549489025, "creation_date": 1549488514, "answer_id": 54562797, "question_id": 54562774, "link": "https://stackoverflow.com/questions/54562774/why-does-aa-z-evaluate-to-true-in-python/54562797#54562797", "title": "Why does &#39;aa&#39; &lt; &#39;z&#39; evaluate to True in Python?", "body": "<p>String comparisons use <a href=\"https://en.wikipedia.org/wiki/Lexicographical_order\" rel=\"nofollow noreferrer\">lexicographical</a> order. To put it in simple terms, it's the order in which words would appear in a dictionary. Your examples would look like this:</p>\n\n<pre><code>a\naa\nz\n</code></pre>\n\n<p>And clearly <code>'a' &lt; 'aa'</code> is <code>True</code> as well as <code>'aa' &lt; 'z'</code>. If two words consist of the same character repeated several times, the shortest word would go first. For the rest, it's just the order of the alphabet.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 14533427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aba03f1e5655899ae1ee226edc5bd269?s=128&d=identicon&r=PG&f=1", "display_name": "Klimentiy Sorokin", "link": "https://stackoverflow.com/users/14533427/klimentiy-sorokin"}, "is_accepted": false, "score": 0, "last_activity_date": 1603864928, "creation_date": 1603864928, "answer_id": 64567244, "question_id": 54562774, "link": "https://stackoverflow.com/questions/54562774/why-does-aa-z-evaluate-to-true-in-python/64567244#64567244", "title": "Why does &#39;aa&#39; &lt; &#39;z&#39; evaluate to True in Python?", "body": "<p>I think,  you can help the function ord() to understand it.\n<a href=\"https://www.programiz.com/python-programming/methods/built-in/ord\" rel=\"nofollow noreferrer\">https://www.programiz.com/python-programming/methods/built-in/ord</a></p>\n<p>If see your example 'aa' &lt; 'a' =&gt; False first symbol from 'aa' have <strong>an integer representing the Unicode character</strong> <strong>97</strong> and result <strong>97 &lt; 97 =&gt; False</strong>. If we see next your example 'aa' &lt; 'z' =&gt; True. <strong>Python see only first symbol</strong> like this <strong>'a' &lt; 'z' == 97 &lt; 122 =&gt; True</strong>.</p>\n<p>I hope I can help you!</p>\n"}], "owner": {"reputation": 75, "user_id": 7806143, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8b8519221e79c2b0bbd2bf5a5bdef332?s=128&d=identicon&r=PG&f=1", "display_name": "user152945", "link": "https://stackoverflow.com/users/7806143/user152945"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 847, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1603864928, "creation_date": 1549488366, "last_edit_date": 1549488778, "question_id": 54562774, "link": "https://stackoverflow.com/questions/54562774/why-does-aa-z-evaluate-to-true-in-python", "title": "Why does &#39;aa&#39; &lt; &#39;z&#39; evaluate to True in Python?", "body": "<p>I am working with string comparison in Python. Why does <code>'aa' &lt; 'z'</code> evaluate to True.\nFurther, why does <code>'aa' &lt; 'a'</code> evaluate to False. I tried explaining 'aa' is of a longer length than 'a' so it would be greater. But this reasoning does not work for the initial case 'aa' &lt; 'z'</p>\n\n<p><code>'aa' &lt; 'z' =&gt; True</code>\n<code>'aa' &lt; 'a' =&gt; False</code></p>\n"}, {"tags": ["python", "numpy", "transformation"], "comments": [{"owner": {"reputation": 786, "user_id": 7604434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5724873872a17fd0b8e0bf25b9a2acdf?s=128&d=identicon&r=PG&f=1", "display_name": "Crivella", "link": "https://stackoverflow.com/users/7604434/crivella"}, "edited": false, "score": 0, "creation_date": 1549488366, "post_id": 54562725, "comment_id": 95924471, "body": "I don&#39;t understand what this scale parameter is supposed to be. If it is an X value after which you want the behavior of the function to change, you need to use splices and np where to apply 2 different functions to the portions of the array. If it is just a multiplicative constant than just multiply by it."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 9499611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a181b542e66e0c940a6ceee69c8edbe?s=128&d=identicon&r=PG&f=1", "display_name": "Jessica", "link": "https://stackoverflow.com/users/9499611/jessica"}, "edited": false, "score": 0, "creation_date": 1549576931, "post_id": 54562788, "comment_id": 95962950, "body": "Yes, I just figured that out today. Thank you so much for putting in all this effort to help me."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1549488457, "creation_date": 1549488457, "answer_id": 54562788, "question_id": 54562725, "link": "https://stackoverflow.com/questions/54562725/scale-parameter-for-numpy-arcsinh-np-arcsinh-tranformation-function/54562788#54562788", "title": "Scale parameter for Numpy arcsinh np.arcsinh() tranformation function", "body": "<p>NumPy's <code>numpy.arcsinh</code> is not a specialized display scaling function. It's the hyperbolic arc-sine. The hyperbolic arc-sine doesn't have a scale parameter. (The same seems to be true for R's <code>asinh</code>; I don't see a scale parameter in the <a href=\"https://stat.ethz.ch/R-manual/R-patched/library/base/html/Hyperbolic.html\" rel=\"nofollow noreferrer\">docs</a>.)</p>\n\n<p>From the <a href=\"https://support.cytobank.org/hc/en-us/articles/206148057-About-the-Arcsinh-transform\" rel=\"nofollow noreferrer\">google results</a> for arcsinh transforms in cytometry data display, it looks like the computation you want is</p>\n\n<pre><code>numpy.arcsinh(data_frame[column_list] / scale)\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 9499611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a181b542e66e0c940a6ceee69c8edbe?s=128&d=identicon&r=PG&f=1", "display_name": "Jessica", "link": "https://stackoverflow.com/users/9499611/jessica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 165, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549488457, "creation_date": 1549488071, "question_id": 54562725, "link": "https://stackoverflow.com/questions/54562725/scale-parameter-for-numpy-arcsinh-np-arcsinh-tranformation-function", "title": "Scale parameter for Numpy arcsinh np.arcsinh() tranformation function", "body": "<p>I am trying to apply an arcsinh transformation to certain columns of a data frame using numpy.arcsinh(). Here is my line of code:</p>\n\n<p>data_frame[column_list] = np.arcsinh(data_frame[column_list])</p>\n\n<p>It appears to work great, and seems to be doing what I want it to do. </p>\n\n<p>There's only one problem: there is no option to change the scale parameter of the arcsinh transformation.</p>\n\n<p>The standard we use for cytometry data (which is what I work on) is 5. That's the point on the x-axis where the graph goes from being linear to log scaled, if you plot the data.</p>\n\n<p>I have used this in R, the 'asinh' function, but there is an option to specify the scale parameter, which I believe the default is 5.</p>\n\n<p>For this numpy arcsinh method, I can find no information on how to change the scale parameter, or even what the default is. I have read the documentation on this page: <a href=\"https://docs.scipy.org/doc/numpy-1.15.0/reference/generated/numpy.arcsinh.html\" rel=\"nofollow noreferrer\">https://docs.scipy.org/doc/numpy-1.15.0/reference/generated/numpy.arcsinh.html</a> and I have been googling for several hours, but I cannot find the answer to this.</p>\n\n<p>Any help would be much appreciated, even if it's just how to go about finding the answer.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "pandas", "group-by", "pandas-groupby"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1549487682, "post_id": 54562644, "comment_id": 95924175, "body": "Please provide the <i>FULL</i> traceback (which also includes the line that causes the error). Thanks."}, {"owner": {"reputation": 349, "user_id": 10071648, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UjLDS6i9wr8/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7phs0TNo6Hr-POEN-vdsY4cFpJrOg/mo/photo.jpg?sz=128", "display_name": "FPL", "link": "https://stackoverflow.com/users/10071648/fpl"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1549487950, "post_id": 54562644, "comment_id": 95924277, "body": "Thanks @coldspeed, I have done so."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1549488033, "post_id": 54562644, "comment_id": 95924311, "body": "It&#39;s <code>df.groupby([&quot;source&quot;, &quot;day&quot;])</code>, not <code>(df.groupby[&quot;day&quot;,  &quot;source&quot;])</code>. You fixed the typo in your post but didn&#39;t realise it was in your code."}, {"owner": {"reputation": 349, "user_id": 10071648, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UjLDS6i9wr8/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7phs0TNo6Hr-POEN-vdsY4cFpJrOg/mo/photo.jpg?sz=128", "display_name": "FPL", "link": "https://stackoverflow.com/users/10071648/fpl"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1549488238, "post_id": 54562644, "comment_id": 95924420, "body": "Good catch! Fixed now. @coldspeed"}], "answers": [{"comments": [{"owner": {"reputation": 349, "user_id": 10071648, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UjLDS6i9wr8/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7phs0TNo6Hr-POEN-vdsY4cFpJrOg/mo/photo.jpg?sz=128", "display_name": "FPL", "link": "https://stackoverflow.com/users/10071648/fpl"}, "edited": false, "score": 0, "creation_date": 1549488715, "post_id": 54562768, "comment_id": 95924604, "body": "Thank you! I am getting the new timestamp_count column as a datetime object, any tips for turning it into an integer?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 349, "user_id": 10071648, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UjLDS6i9wr8/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7phs0TNo6Hr-POEN-vdsY4cFpJrOg/mo/photo.jpg?sz=128", "display_name": "FPL", "link": "https://stackoverflow.com/users/10071648/fpl"}, "edited": false, "score": 0, "creation_date": 1549488784, "post_id": 54562768, "comment_id": 95924631, "body": "@FPL <code>df.groupby([&quot;source&quot;, &quot;day&quot;])[&#39;timestamp&#39;].transform(&#39;nunique&#39;)</code> returns a column of integers. Please check once more."}, {"owner": {"reputation": 349, "user_id": 10071648, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UjLDS6i9wr8/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7phs0TNo6Hr-POEN-vdsY4cFpJrOg/mo/photo.jpg?sz=128", "display_name": "FPL", "link": "https://stackoverflow.com/users/10071648/fpl"}, "edited": false, "score": 0, "creation_date": 1549488907, "post_id": 54562768, "comment_id": 95924688, "body": "I have checked and run everything again, and still getting datetimes :-(  (df.info() returns &quot;timestamp_count               143375 non-null datetime64[ns]&quot;)"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 349, "user_id": 10071648, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UjLDS6i9wr8/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7phs0TNo6Hr-POEN-vdsY4cFpJrOg/mo/photo.jpg?sz=128", "display_name": "FPL", "link": "https://stackoverflow.com/users/10071648/fpl"}, "edited": false, "score": 0, "creation_date": 1549488997, "post_id": 54562768, "comment_id": 95924723, "body": "@FPL What if you do <code>df[&#39;timestamp_count&#39;] = df.groupby([&quot;source&quot;, &quot;day&quot;])[&#39;timestamp&#39;].transform(&#39;nunique&#39;).astype(int)</code>? Can you print <code>df[&#39;timestamp_count&#39;].head().tolist()</code> for me?"}, {"owner": {"reputation": 349, "user_id": 10071648, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UjLDS6i9wr8/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7phs0TNo6Hr-POEN-vdsY4cFpJrOg/mo/photo.jpg?sz=128", "display_name": "FPL", "link": "https://stackoverflow.com/users/10071648/fpl"}, "edited": false, "score": 0, "creation_date": 1549489166, "post_id": 54562768, "comment_id": 95924806, "body": "That worked! Many thanks for your help! I wasn&#39;t sure where to add the function... still new to all this."}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 6, "last_activity_date": 1549488336, "creation_date": 1549488336, "answer_id": 54562768, "question_id": 54562644, "link": "https://stackoverflow.com/questions/54562644/pandas-groupby-and-add-count-of-unique-values-as-a-new-column/54562768#54562768", "title": "Pandas GroupBy and add count of unique values as a new column", "body": "<p>Use <code>transform</code> to broadcast the result:</p>\n\n<pre><code>df['timestamp_count'] = (\n    df.groupby([\"source\", \"day\"])['timestamp'].transform('nunique'))\ndf\n\n   day    source                timestamp  timestamp_count\n0    1  facebook  2018-08-04 11:16:32.416                2\n1    1  facebook  2019-01-03 10:25:38.216                2\n2    1   twitter  2018-10-14 13:26:22.123                1\n3    2  facebook  2019-01-30 12:16:32.416                1\n</code></pre>\n"}], "owner": {"reputation": 349, "user_id": 10071648, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UjLDS6i9wr8/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7phs0TNo6Hr-POEN-vdsY4cFpJrOg/mo/photo.jpg?sz=128", "display_name": "FPL", "link": "https://stackoverflow.com/users/10071648/fpl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3308, "favorite_count": 0, "accepted_answer_id": 54562768, "answer_count": 1, "score": 2, "last_activity_date": 1549489277, "creation_date": 1549487608, "last_edit_date": 1592644375, "question_id": 54562644, "link": "https://stackoverflow.com/questions/54562644/pandas-groupby-and-add-count-of-unique-values-as-a-new-column", "title": "Pandas GroupBy and add count of unique values as a new column", "body": "<h3>Problem</h3>\n<p>I'm trying to group a Pandas DataFrame by columns <code>day</code> and <code>source</code>, and then count unique instances of a 3rd (<code>timestamp</code>) for each group (to find out how many hits each source got per day), but I get this error (full traceback below):\n<code>TypeError: 'method' object is not subscriptable</code></p>\n<h3>Attempts</h3>\n<p>My code is:</p>\n<pre><code>df['timestamp_count'] = df.groupby([&quot;source&quot;, &quot;day&quot;]).agg({&quot;timestamp&quot;: &quot;nunique&quot;})\n</code></pre>\n<p>And ideally I'd like to get a result like this (including the new column, <code>timestamp_count</code>:</p>\n<pre><code>day    source    timestamp                timestamp_count\n1      facebook  2018-08-04 11:16:32.416  2\n1      facebook  2019-01-03 10:25:38.216  2\n1      twitter   2018-10-14 13:26:22.123  1\n2      facebook  2019-01-30 12:16:32.416  1\n</code></pre>\n<p>When I run <code>df.describe()</code>, I see that <code>source</code> is an object but <code>day</code> is an integer. Could this be part of the problem? Having looked at other questions, it seems probable that it is along those lines, yet none of them seem to throw the same input/error combination.</p>\n<p>Can anyone help a Python newbie? Many thanks!</p>\n<h3>Traceback</h3>\n<pre><code>---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n&lt;ipython-input-90-db5a002137ca&gt; in &lt;module&gt;\n----&gt; 1 df['timestamp_count'] = (df.groupby[&quot;source&quot;, \n&quot;day&quot;]).agg({&quot;timestamp&quot;: &quot;nunique&quot;})\n\nTypeError: 'method' object is not subscriptable\n</code></pre>\n"}, {"tags": ["python", "opencv", "raspberry-pi3", "h.264", "rtsp"], "answers": [{"comments": [{"owner": {"reputation": 150, "user_id": 8032148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5afcde81a457e4ac100b320214a3a0e?s=128&d=identicon&r=PG&f=1", "display_name": "FarNorth", "link": "https://stackoverflow.com/users/8032148/farnorth"}, "edited": false, "score": 0, "creation_date": 1549564894, "post_id": 54562762, "comment_id": 95957591, "body": "I am aware of how H.264 compresses data, however I forgot the spacing of I-frames can be significant and need to be mindful of. Thanks for raising this point."}], "tags": [], "owner": {"reputation": 1326, "user_id": 638752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20b5bb18f2c79784069a3d72408266b4?s=128&d=identicon&r=PG", "display_name": "theamk", "link": "https://stackoverflow.com/users/638752/theamk"}, "is_accepted": false, "score": 2, "last_activity_date": 1549488322, "creation_date": 1549488322, "answer_id": 54562762, "question_id": 54562640, "link": "https://stackoverflow.com/questions/54562640/capturing-a-single-image-from-an-rtsp-h-264-video-stream/54562762#54562762", "title": "Capturing a SINGLE image from an rtsp H.264 video stream", "body": "<p>The reason you have to read the stream is because H.264 has multiple kinds of frames (see <a href=\"https://en.wikipedia.org/wiki/Video_compression_picture_types\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Video_compression_picture_types</a>) and P and B frames need context to be decoded. Only I-frames (also known as key-frames) can be decoded standalone.</p>\n\n<p>If you want to read truly arbitrary frames, you can parse (not decode) stream, and keep everything since the last I-frame. When your trigger comes, you decode stream since the last I-frame and until current point. </p>\n\n<p>If you do not need to be very precise, you can just store the last I-frame, and decode it on demand. This will be very fast, but this means that you may get picture at the wrong time.</p>\n\n<p>Finally, how often do those keyframes come? This depends on the source. For example, C920 webcam generates them about every 5 seconds by default, but this interval can be changed from 1 to 30 seconds (I think, this was a while ago)</p>\n"}, {"comments": [{"owner": {"reputation": 150, "user_id": 8032148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5afcde81a457e4ac100b320214a3a0e?s=128&d=identicon&r=PG&f=1", "display_name": "FarNorth", "link": "https://stackoverflow.com/users/8032148/farnorth"}, "edited": false, "score": 0, "creation_date": 1549565050, "post_id": 54566774, "comment_id": 95957671, "body": "This looks promising, however I wasn&#39;t able to figure out how to do it with an rtsp (rather than http) video stream. Any thoughts?"}, {"owner": {"reputation": 150, "user_id": 8032148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5afcde81a457e4ac100b320214a3a0e?s=128&d=identicon&r=PG&f=1", "display_name": "FarNorth", "link": "https://stackoverflow.com/users/8032148/farnorth"}, "edited": false, "score": 0, "creation_date": 1549640858, "post_id": 54566774, "comment_id": 95987879, "body": "Your link refers to using cv2.VideoCapture() to read rtsp streams, which is how I&#39;m doing it now.  The problem is read() consumes a ton of processing power and yields an image I don&#39;t need 99% of the time.  Ideally I want it to ingest the byte stream and only construct the image when required."}, {"owner": {"reputation": 456, "user_id": 2127451, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iP2yJ.png?s=128&g=1", "display_name": "Koxo", "link": "https://stackoverflow.com/users/2127451/koxo"}, "reply_to_user": {"reputation": 150, "user_id": 8032148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5afcde81a457e4ac100b320214a3a0e?s=128&d=identicon&r=PG&f=1", "display_name": "FarNorth", "link": "https://stackoverflow.com/users/8032148/farnorth"}, "edited": false, "score": 0, "creation_date": 1549865728, "post_id": 54566774, "comment_id": 96041951, "body": "Sorry I can&#39;t help you more. I am pretty newbie in image processing. Hope, you will find solution."}], "tags": [], "owner": {"reputation": 456, "user_id": 2127451, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iP2yJ.png?s=128&g=1", "display_name": "Koxo", "link": "https://stackoverflow.com/users/2127451/koxo"}, "is_accepted": false, "score": 2, "last_activity_date": 1549516885, "creation_date": 1549516885, "answer_id": 54566774, "question_id": 54562640, "link": "https://stackoverflow.com/questions/54562640/capturing-a-single-image-from-an-rtsp-h-264-video-stream/54566774#54566774", "title": "Capturing a SINGLE image from an rtsp H.264 video stream", "body": "<p>I was doing something similar.\nHere is my code:</p>\n\n<pre><code>def CaptureFrontCamera():\n    _bytes = bytes()\n    stream = urllib.request.urlopen('http://192.168.0.51/video.cgi?resolution=1920x1080')\n    while True:\n        _bytes += stream.read(1024)\n        a = _bytes.find(b'\\xff\\xd8')\n        b = _bytes.find(b'\\xff\\xd9')\n        if a != -1 and b != -1:\n            jpg = _bytes[a:b+2]\n            _bytes = _bytes[b+2:]\n            filename = '/home/pi/capture.jpeg'\n            i = cv2.imdecode(np.fromstring(jpg, dtype=np.uint8), cv2.IMREAD_COLOR)\n            cv2.imwrite(filename, i)\n            return filename\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150, "user_id": 8032148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5afcde81a457e4ac100b320214a3a0e?s=128&d=identicon&r=PG&f=1", "display_name": "FarNorth", "link": "https://stackoverflow.com/users/8032148/farnorth"}, "is_accepted": true, "score": 0, "last_activity_date": 1551632451, "creation_date": 1551632451, "answer_id": 54971357, "question_id": 54562640, "link": "https://stackoverflow.com/questions/54562640/capturing-a-single-image-from-an-rtsp-h-264-video-stream/54971357#54971357", "title": "Capturing a SINGLE image from an rtsp H.264 video stream", "body": "<p>To answer my own question. Instead of using read():</p>\n\n<pre><code>cap = cv2.VideoCapture('rtsp_url')\n\ndef captureimages():\n    while True:\n        image = cap.read()\n\ns = threading.Thread(target=captureimages)\ns.start()\n\nif takepic == True:\n    picture = image.copy()\n</code></pre>\n\n<p>It is more efficient to break it up in to grab() and retrieve().  Not a perfect solution, but better:</p>\n\n<pre><code>cap = cv2.VideoCapture('rtsp_url')\n\ndef captureimages():\n    while True:\n        cap.grab()\n\ns = threading.Thread(target=captureimages)\ns.start()\n\nif takepic == True:\n    picture = cap.retrieve()\n</code></pre>\n"}], "owner": {"reputation": 150, "user_id": 8032148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5afcde81a457e4ac100b320214a3a0e?s=128&d=identicon&r=PG&f=1", "display_name": "FarNorth", "link": "https://stackoverflow.com/users/8032148/farnorth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2558, "favorite_count": 0, "accepted_answer_id": 54971357, "answer_count": 3, "score": 2, "last_activity_date": 1551632451, "creation_date": 1549487581, "question_id": 54562640, "link": "https://stackoverflow.com/questions/54562640/capturing-a-single-image-from-an-rtsp-h-264-video-stream", "title": "Capturing a SINGLE image from an rtsp H.264 video stream", "body": "<p>I'm trying to capture a single image on demand from an RTSP H.264 video frame.  I'm using OpenCV with Python running on a Raspberry Pi.  </p>\n\n<p>My understanding is that you can't simply capture an image, but rather must constantly read the stream of images from the video and discard all but the occasional one you want.  This is very computationally expensive and consumes about 25% of the CPU on a Pi to do nothing but read and discard 1280x720 15 fps H.264 rtsp video frames.</p>\n\n<p>Is there another way?  I'm flexible and can also use GStreamer, FFMPEG or anything else that is more computationally efficient.</p>\n"}, {"tags": ["python", "atom-editor"], "comments": [{"owner": {"reputation": 3334, "user_id": 4765864, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/2M2eC.jpg?s=128&g=1", "display_name": "gonczor", "link": "https://stackoverflow.com/users/4765864/gonczor"}, "edited": false, "score": 0, "creation_date": 1549488479, "post_id": 54562635, "comment_id": 95924515, "body": "Do you have any plugins for atom installed?"}, {"owner": {"reputation": 13, "user_id": 4335777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28fadb1a7f208e1dc44f276983aabaec?s=128&d=identicon&r=PG&f=1", "display_name": "TPC4589", "link": "https://stackoverflow.com/users/4335777/tpc4589"}, "reply_to_user": {"reputation": 3334, "user_id": 4765864, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/2M2eC.jpg?s=128&g=1", "display_name": "gonczor", "link": "https://stackoverflow.com/users/4765864/gonczor"}, "edited": false, "score": 0, "creation_date": 1549494109, "post_id": 54562635, "comment_id": 95926636, "body": "a few - I have atom-ide, hydrogen and some others. Any in particular that might be causing issues?"}, {"owner": {"reputation": 3334, "user_id": 4765864, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/2M2eC.jpg?s=128&g=1", "display_name": "gonczor", "link": "https://stackoverflow.com/users/4765864/gonczor"}, "edited": false, "score": 0, "creation_date": 1549532939, "post_id": 54562635, "comment_id": 95938668, "body": "Rather lack of one. I haven&#39;t used atom for a while, but as far as I remember it does not recognize symbols properly. I&#39;d try to find some decent python plugin."}], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 4335777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28fadb1a7f208e1dc44f276983aabaec?s=128&d=identicon&r=PG&f=1", "display_name": "TPC4589", "link": "https://stackoverflow.com/users/4335777/tpc4589"}, "is_accepted": false, "score": 0, "last_activity_date": 1549495136, "creation_date": 1549495136, "answer_id": 54564044, "question_id": 54562635, "link": "https://stackoverflow.com/questions/54562635/atom-doesnt-recognize-classes-imported-from-another-file-python/54564044#54564044", "title": "Atom doesn&#39;t recognize classes imported from another file -- python", "body": "<p>I think the issue has something to do with the fact I have hydrogen installed, once I ran the code like a hydrogen notebook it seems to have worked. </p>\n"}], "owner": {"reputation": 13, "user_id": 4335777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28fadb1a7f208e1dc44f276983aabaec?s=128&d=identicon&r=PG&f=1", "display_name": "TPC4589", "link": "https://stackoverflow.com/users/4335777/tpc4589"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1549495136, "creation_date": 1549487571, "question_id": 54562635, "link": "https://stackoverflow.com/questions/54562635/atom-doesnt-recognize-classes-imported-from-another-file-python", "title": "Atom doesn&#39;t recognize classes imported from another file -- python", "body": "<p>This is a beginner question but I am using Atom and when I create classes in one file and then import those classes using <code>import file_containing_classes</code> to use them in another file it only sees one of the classes? Does it have something to do with <code>__pycache__</code>. Even after I run the file save the file, the python script that imports the file with classes doesn't recognize it.</p>\n\n<p>Suggestions?\nThanks!</p>\n"}, {"tags": ["python", "sqlalchemy", "flask-sqlalchemy"], "comments": [{"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1549523370, "post_id": 54562628, "comment_id": 95934047, "body": "Probably very much related, if not a dupe of: <a href=\"https://stackoverflow.com/questions/8561470/sqlalchemy-filtering-by-relationship-attribute\" title=\"sqlalchemy filtering by relationship attribute\">stackoverflow.com/questions/8561470/&hellip;</a>. In short, do <code>filters.add(Alert.event.has(Event.name.contains(request.args&zwnj;&#8203;.get(&#39;event&#39;))))</code>. You could do the same with the <code>type</code> as well, removing the need to do a separate query."}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1549523525, "post_id": 54562628, "comment_id": 95934115, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/8561470/sqlalchemy-filtering-by-relationship-attribute\">SqlAlchemy - Filtering by Relationship Attribute</a>"}, {"owner": {"reputation": 1, "user_id": 10648305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d52aaad2cde8745b9dd6b073b7c279d1?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Wilson", "link": "https://stackoverflow.com/users/10648305/matthew-wilson"}, "reply_to_user": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1549541962, "post_id": 54562628, "comment_id": 95944063, "body": "@IljaEveril&#228; Funny thing is that I looked at that exact post yesterday thinking it was what I needed, but for some reason it didn&#39;t click due to the &quot;Event.name.contains&quot; bit. Anyway, you&#39;re right, and that worked perfectly! Thanks!"}], "owner": {"reputation": 1, "user_id": 10648305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d52aaad2cde8745b9dd6b073b7c279d1?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Wilson", "link": "https://stackoverflow.com/users/10648305/matthew-wilson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 299, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1549544547, "creation_date": 1549487550, "last_edit_date": 1549544547, "question_id": 54562628, "link": "https://stackoverflow.com/questions/54562628/sqlalchemy-using-like-on-relationship-within-a-filter", "title": "SQLAlchemy using like on relationship within a filter", "body": "<p>EDIT: This is very similiar to <a href=\"https://stackoverflow.com/questions/8561470/sqlalchemy-filtering-by-relationship-attribute\">SqlAlchemy - Filtering by Relationship Attribute</a> in that we are both trying to filter on relationship attributes. However, they are filtering on matching an exact value, whereas I am filtering by using like/contains. Because of this, as pointed out in the comments, my solution requires an extra step that was not apparent in the other post.</p>\n\n<p>Let me preface this with: I'm still quite new to SQLAlchemy, so it's entirely possible I'm going about this in the exact wrong way.</p>\n\n<p>I have a Flask API that has defined \"alerts\" and \"events\". An alert can only belong to a single event, and an event can have multiple alerts. The schema for the alerts is as follows:</p>\n\n<pre><code>class Alert(PaginatedAPIMixin, db.Model):\n    __tablename__ = 'alert'\n\n    id = db.Column(db.Integer, primary_key=True, nullable=False)\n    type = db.relationship('AlertType')\n    type_id = db.Column(db.Integer, db.ForeignKey('alert_type.id'), nullable=False)\n    url = db.Column(db.String(512), unique=True, nullable=False)\n    event_id = db.Column(db.Integer, db.ForeignKey('event.id'), nullable=False)\n    event = db.relationship('Event')\n\n    def __str__(self):\n        return str(self.url)\n\n    def to_dict(self):\n        return {'id': self.id,\n                'event': self.event.name,\n                'type': self.type.value,\n                'url': self.url}\n</code></pre>\n\n<p>One of the API endpoints lets me get a list of alerts based on various filter criteria. For example, get all alerts of alert_type X, or get all alerts with X inside their alert_url. However, the one that is stumping me is that I want to be able to get all alerts with X inside their associated event name.</p>\n\n<p>Here is the API endpoint function (the commented out events bit is my initial \"naive\" approach that does not work due to event being a relationship), but you can get the idea what I'm trying to do with the filtering.</p>\n\n<pre><code>def read_alerts():\n    \"\"\" Gets a list of all the alerts. \"\"\"\n\n    filters = set()\n\n    # Event filter\n    #if 'event' in request.args:\n    #    filters.add(Alert.event.name.like('%{}%'.format(request.args.get('event'))))\n\n    # URL filter\n    if 'url' in request.args:\n        filters.add(Alert.url.like('%{}%'.format(request.args.get('url'))))\n\n    # Type filter\n    if 'type' in request.args:\n        type_ = AlertType.query.filter_by(value=request.args.get('type')).first()\n        if type_:\n            type_id = type_.id\n        else:\n            type_id = -1\n        filters.add(Alert.type_id == type_id)\n\n    data = Alert.to_collection_dict(Alert.query.filter(*filters), 'api.read_alerts', **request.args)\n    return jsonify(data)\n</code></pre>\n\n<p>The filters set that is built gets fed to the to_collection_dict() function, which essentially returns a paginated list  of the query with all of the filters.</p>\n\n<pre><code>def to_collection_dict(query, endpoint, **kwargs):\n    \"\"\" Returns a paginated dictionary of a query. \"\"\"\n\n    # Create a copy of the request arguments so that we can modify them.\n    args = kwargs.copy()\n\n    # Read the page and per_page values or use the defaults.\n    page = int(args.get('page', 1))\n    per_page = min(int(args.get('per_page', 10)), 100)\n\n    # Now that we have the page and per_page values, remove them\n    # from the arguments so that the url_for function does not\n    # receive duplicates of them.\n    try:\n        del args['page']\n    except KeyError:\n        pass\n    try:\n        del args['per_page']\n    except KeyError:\n        pass\n\n    # Paginate the query.\n    resources = query.paginate(page, per_page, False)\n\n    # Generate the response dictionary.\n    data = {\n        'items': [item.to_dict() for item in resources.items],\n        '_meta': {\n            'page': page,\n            'per_page': per_page,\n            'total_pages': resources.pages,\n            'total_items': resources.total\n        },\n        '_links': {\n            'self': url_for(endpoint, page=page, per_page=per_page, **args),\n            'next': url_for(endpoint, page=page + 1, per_page=per_page, **args) if resources.has_next else None,\n            'prev': url_for(endpoint, page=page - 1, per_page=per_page, **args) if resources.has_prev else None\n        }\n    }\n    return data\n</code></pre>\n\n<p>I understand that I can get the filtered list of alerts by their associated event name doing something along these lines with options and contains_eager:</p>\n\n<pre><code>alerts = db.session.query(Alert).join(Alert.event).options(contains_eager(Alert.event)).filter(Event.name.like('%{}%'.format(request.args.get('event')))).all()\n</code></pre>\n\n<p>But I have not gotten something similar to that to work when added to the filters set.</p>\n"}, {"tags": ["python", "flask", "flask-sqlalchemy"], "comments": [{"owner": {"reputation": 977, "user_id": 6160682, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh5.googleusercontent.com/-MBmfHL7MhKk/AAAAAAAAAAI/AAAAAAAAADY/wC_5dDlnARw/photo.jpg?sz=128", "display_name": "Sakthi Panneerselvam", "link": "https://stackoverflow.com/users/6160682/sakthi-panneerselvam"}, "edited": false, "score": 0, "creation_date": 1549530360, "post_id": 54562595, "comment_id": 95937247, "body": "error is because you don&#39;t hava file called co."}, {"owner": {"reputation": 173, "user_id": 827454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b5aced1b2512d00fc44eb3a33b64043?s=128&d=identicon&r=PG", "display_name": "ryentzer", "link": "https://stackoverflow.com/users/827454/ryentzer"}, "edited": false, "score": 0, "creation_date": 1549572241, "post_id": 54562595, "comment_id": 95960904, "body": "Is the db = ... in the <code>__init__.py</code> file or in the <code>co.py</code> file? Have you tried moving the db assignment to the` co.py` file?"}], "answers": [{"tags": [], "owner": {"reputation": 141, "user_id": 10653974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0648a986948afee4e062d11ff78213c6?s=128&d=identicon&r=PG&f=1", "display_name": "br0cky", "link": "https://stackoverflow.com/users/10653974/br0cky"}, "is_accepted": false, "score": 0, "last_activity_date": 1549611049, "creation_date": 1549611049, "answer_id": 54587799, "question_id": 54562595, "link": "https://stackoverflow.com/questions/54562595/flask-sqlalchemy-attributeerror-module-db-has-no-attribute-model/54587799#54587799", "title": "Flask-SQLAlchemy. AttributeError: module &#39;&lt;...&gt;.db&#39; has no attribute &#39;Model&#39;", "body": "<p>This would imply you have the following folder structure</p>\n\n<pre><code>root\n - co\n   - __init__.py\n   - models.py\n   - routes.py\n - myapp.py\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11025234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8f2c839de0cae9f87c57511ef3f60e3?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Dementev", "link": "https://stackoverflow.com/users/11025234/nikita-dementev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 731, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549611049, "creation_date": 1549487412, "question_id": 54562595, "link": "https://stackoverflow.com/questions/54562595/flask-sqlalchemy-attributeerror-module-db-has-no-attribute-model", "title": "Flask-SQLAlchemy. AttributeError: module &#39;&lt;...&gt;.db&#39; has no attribute &#39;Model&#39;", "body": "<p>so I have one module called 'co'.</p>\n\n<p>Here is it's __init__.py</p>\n\n<pre><code>...\ndb = SQLAlchemy(app)\n...\n</code></pre>\n\n<p>And models.py</p>\n\n<pre><code>...\nfrom co import db\nclass BaseModel(db.Model):\n    id = db.Column(db.Integer, primary_key=True)\n...\n</code></pre>\n\n<p>Running <code>flask db init</code> is giving me </p>\n\n<blockquote>\n  <p>AttributeError: module 'co.db' has no attribute 'Model'</p>\n</blockquote>\n\n<p>What am I doing wrong here?</p>\n"}, {"tags": ["python", "python-dateutil"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 11025228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20332a752426bbdd4fa45b25a1b96d40?s=128&d=identicon&r=PG&f=1", "display_name": "P.py", "link": "https://stackoverflow.com/users/11025228/p-py"}, "edited": false, "score": 0, "creation_date": 1549578123, "post_id": 54563021, "comment_id": 95963419, "body": "Thanks tshimkus ! It worked. Its coming as Enable Date in EST: 2019-02-07 17:20:13 Eastern Standard Time. Instead of Enable Date in EST: 2019-02-07 17:20:13 EST. Let me try if I am able to get EST.  Once again thanks."}, {"owner": {"reputation": 238, "user_id": 5050606, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f661a9f4702e5d500129bf07bca6fed6?s=128&d=identicon&r=PG&f=1", "display_name": "alexshchep", "link": "https://stackoverflow.com/users/5050606/alexshchep"}, "reply_to_user": {"reputation": 31, "user_id": 11025228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20332a752426bbdd4fa45b25a1b96d40?s=128&d=identicon&r=PG&f=1", "display_name": "P.py", "link": "https://stackoverflow.com/users/11025228/p-py"}, "edited": false, "score": 0, "creation_date": 1549580315, "post_id": 54563021, "comment_id": 95964158, "body": "this post seems relevant - <a href=\"https://stackoverflow.com/questions/39237889/getting-abbreviated-timezone-using-strftime-using-c\" title=\"getting abbreviated timezone using strftime using c\">stackoverflow.com/questions/39237889/&hellip;</a>. You could always just change to <code>central.strftime(&#39;%Y-%m-%d %H:%M:%S EST&#39;)</code>"}, {"owner": {"reputation": 31, "user_id": 11025228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20332a752426bbdd4fa45b25a1b96d40?s=128&d=identicon&r=PG&f=1", "display_name": "P.py", "link": "https://stackoverflow.com/users/11025228/p-py"}, "edited": false, "score": 0, "creation_date": 1549661027, "post_id": 54563021, "comment_id": 95997198, "body": "Thanks @alexshchep. I but just putting EST, will create issue in daylight at that time EDT will not get populated. I am using below alternate way. Thank you."}], "tags": [], "owner": {"reputation": 238, "user_id": 5050606, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f661a9f4702e5d500129bf07bca6fed6?s=128&d=identicon&r=PG&f=1", "display_name": "alexshchep", "link": "https://stackoverflow.com/users/5050606/alexshchep"}, "is_accepted": false, "score": 0, "last_activity_date": 1549489567, "creation_date": 1549489567, "answer_id": 54563021, "question_id": 54562555, "link": "https://stackoverflow.com/questions/54562555/python-code-to-convert-wed-06-feb-2019-204746-gmt-to-2019-02-06-154746-est/54563021#54563021", "title": "Python Code to convert Wed, 06 Feb 2019 20:47:46 GMT to 2019-02-06 15:47:46 EST or EDT", "body": "<p>Last line should be </p>\n\n<pre><code>print \"Enable Date in EST: {0}\".format(central.strftime('%Y-%m-%d %H:%M:%S %Z'))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 11025228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20332a752426bbdd4fa45b25a1b96d40?s=128&d=identicon&r=PG&f=1", "display_name": "P.py", "link": "https://stackoverflow.com/users/11025228/p-py"}, "is_accepted": true, "score": 2, "last_activity_date": 1549660833, "creation_date": 1549660833, "answer_id": 54600387, "question_id": 54562555, "link": "https://stackoverflow.com/questions/54562555/python-code-to-convert-wed-06-feb-2019-204746-gmt-to-2019-02-06-154746-est/54600387#54600387", "title": "Python Code to convert Wed, 06 Feb 2019 20:47:46 GMT to 2019-02-06 15:47:46 EST or EDT", "body": "<pre><code>gmt_date = \"Thu, 07 Feb 2019 15:33:28 GMT\"\n\ndef date_convert():\nprint \"Date in GMT: {0}\".format(gmt_date)\n# Hardcode from and to time zones\nfrom_zone = tz.gettz('GMT')\nto_zone = tz.gettz('US/Eastern')\n# gmt = datetime.gmtnow()\ngmt = datetime.strptime(gmt_date, '%a, %d %b %Y %H:%M:%S GMT')\n# Tell the datetime object that it's in GMT time zone\ngmt = gmt.replace(tzinfo=from_zone)\n# Convert time zone\neastern_time = str(gmt.astimezone(to_zone))\n# Check if its EST or EDT        \nif eastern_time[-6:] == \"-05:00\":\n    print \"Date in US/Eastern: \" +eastern_time.replace(\"-05:00\",\" EST\")\nelif eastern_time[-6:] == \"-04:00\":\n    print \"Date in US/Eastern: \" +eastern_time.replace(\"-04:00\",\" EDT\")\nreturn\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 11025228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20332a752426bbdd4fa45b25a1b96d40?s=128&d=identicon&r=PG&f=1", "display_name": "P.py", "link": "https://stackoverflow.com/users/11025228/p-py"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1321, "favorite_count": 0, "accepted_answer_id": 54600387, "answer_count": 2, "score": 1, "last_activity_date": 1549660833, "creation_date": 1549487197, "last_edit_date": 1549508230, "question_id": 54562555, "link": "https://stackoverflow.com/questions/54562555/python-code-to-convert-wed-06-feb-2019-204746-gmt-to-2019-02-06-154746-est", "title": "Python Code to convert Wed, 06 Feb 2019 20:47:46 GMT to 2019-02-06 15:47:46 EST or EDT", "body": "<p>I am trying to convert GMT time to EST/EDT format in Python.</p>\n\n<p>GMT Format: Wed, 06 Feb 2019 20:47:46 GMT<br>\nRequired Format: 2019-02-06 15:47:46 EST (when daylight time starts it should be EDT)</p>\n\n<p>I need this without doing any additional pip install.\nCurrently, I am using below code which is giving EST time as : 2019-02-06 15:47:46-05:00</p>\n\n<pre><code>import datetime\nfrom datetime import datetime\nfrom dateutil import tz\n\nenable_date = response[\"ResponseMetadata\"][\"HTTPHeaders\"][\"date\"]\nprint \"Enable Date in GMT: {0}\".format(enable_date)\nfrom_zone = tz.gettz('UTC')\nto_zone = tz.gettz('US/Eastern')\nutc = datetime.strptime(enable_date, '%a, %d %b %Y %H:%M:%S GMT')\nutc = utc.replace(tzinfo=from_zone)\ncentral = utc.astimezone(to_zone)\nprint \"Enable Date in EST: {0}\".format(central)\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>Enable Date in GMT: Wed, 06 Feb 2019 20:47:46 GMT\nEnable Date in EST: 2019-02-06 15:47:46-05:00\n</code></pre>\n\n<p>desired output: </p>\n\n<pre><code>Enable Date in EST: 2019-02-06 15:47:46 EST\n</code></pre>\n\n<p>Variable enable_date has value Wed, 06 Feb 2019 20:47:46 GMT</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1549487386, "post_id": 54562539, "comment_id": 95924058, "body": "What does <code>(bdf.index == dftest.index).all()</code> print? If it&#39;s False, then the problem is that the index is not the same, so you could try <code>bdf.index = dftest.index</code> and try again."}, {"owner": {"reputation": 414, "user_id": 10816754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0gUNf.jpg?s=128&g=1", "display_name": "ahh_real_numbers", "link": "https://stackoverflow.com/users/10816754/ahh-real-numbers"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1549487677, "post_id": 54562539, "comment_id": 95924172, "body": "It gave me an error originally. After I tried bdf.index = dftest.index it printed False."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1549487712, "post_id": 54562539, "comment_id": 95924183, "body": "<code>(bdf.index == dftest.index).all()</code> gave an error? What was it?"}, {"owner": {"reputation": 414, "user_id": 10816754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0gUNf.jpg?s=128&g=1", "display_name": "ahh_real_numbers", "link": "https://stackoverflow.com/users/10816754/ahh-real-numbers"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1549489114, "post_id": 54562539, "comment_id": 95924779, "body": "Sorry, my mistake. It initially printed False."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1549489144, "post_id": 54562539, "comment_id": 95924792, "body": "Ok, then isn&#39;t that good news? It means the comparison didn&#39;t work because the index wasn&#39;t the same."}, {"owner": {"reputation": 414, "user_id": 10816754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0gUNf.jpg?s=128&g=1", "display_name": "ahh_real_numbers", "link": "https://stackoverflow.com/users/10816754/ahh-real-numbers"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1549489568, "post_id": 54562539, "comment_id": 95924957, "body": "Hmm, right. But after I tried <code>bdf.index = dftest.index</code> <code>(bdf.index == dftest.index).all()</code> printed True but I still have the same issue. <code>print(bdf.equals(dftest))</code> yields False for instance.   It&#39;s strange because <code>(bdf.CUST== dftest.CUST).all()</code> is now True but <code>(bdf.ORDER_DATE == dftest.ORDER_DATE).all()</code> is False."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1549489628, "post_id": 54562539, "comment_id": 95924995, "body": "Perhaps there are leading/trailing whitespaces, NaNs, or something else. Anything could be the reason. Can&#39;t help you further without your data, sorry."}], "answers": [{"comments": [{"owner": {"reputation": 414, "user_id": 10816754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0gUNf.jpg?s=128&g=1", "display_name": "ahh_real_numbers", "link": "https://stackoverflow.com/users/10816754/ahh-real-numbers"}, "edited": false, "score": 0, "creation_date": 1549490091, "post_id": 54563042, "comment_id": 95925200, "body": "I don&#39;t have any null values."}], "tags": [], "owner": {"reputation": 193, "user_id": 4674706, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8-DiDIUwRBo/AAAAAAAAAAI/AAAAAAAAADE/UDs3RCeer3I/photo.jpg?sz=128", "display_name": "Azmy Rajab", "link": "https://stackoverflow.com/users/4674706/azmy-rajab"}, "is_accepted": false, "score": 0, "last_activity_date": 1549489686, "creation_date": 1549489686, "answer_id": 54563042, "question_id": 54562539, "link": "https://stackoverflow.com/questions/54562539/dataframes-are-not-equal-after-applying-groupby-but-i-cant-tell-why/54563042#54563042", "title": "DataFrames are not equal after applying groupby but I can&#39;t tell why", "body": "<p>Do you have any nan / null / missing values in your data? </p>\n\n<p>If so groupby.sum() can replace such values with e.g. 0. in case of numeric dtypes</p>\n\n<p>If the above is the culprit, groupby.first() result would be identical to your original input</p>\n"}], "owner": {"reputation": 414, "user_id": 10816754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0gUNf.jpg?s=128&g=1", "display_name": "ahh_real_numbers", "link": "https://stackoverflow.com/users/10816754/ahh-real-numbers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549489686, "creation_date": 1549487130, "question_id": 54562539, "link": "https://stackoverflow.com/questions/54562539/dataframes-are-not-equal-after-applying-groupby-but-i-cant-tell-why", "title": "DataFrames are not equal after applying groupby but I can&#39;t tell why", "body": "<p>I apologize for the wall of code that follows, and for the poor formatting. I tried as many ways as I could think of to find what was causing these dataframes to return False when I applied either DataFrame.equals() or later df1 == df2. I can't find any discrepancies between them. </p>\n\n<p>I got the second dataframe (dftest) by applying groupby to the first (bdf) on all columns except ORDER_QTY. Since the number of rows is the same for both these dataframes I assumed nothing changed (which didn't surprise me.) However, to be sure I compared them using bdf.equals(dftest) and it returned false. This was after I had made sure that the columns were in the correct order. The only other thing I noticed is that the dataframes are not the same size. Otherwise I'm lost...</p>\n\n<pre><code>In:\ndftest = bdf.groupby(['SITE', 'CUST', 'ORDER_NUMBER', 'ORDER_DATE', 'PURCHASE_ORDER', 'CHANNEL', 'SHIP_TO', 'PROD_LINE', 'GROUP_NUMBER', 'DESCRIPTION', 'ITEM', 'FW_END_DT', 'BPS_INCLUDE']).sum().reset_index()\ndftest = dftest[['SITE', 'CUST', 'ORDER_NUMBER', 'ORDER_DATE', 'PURCHASE_ORDER', 'CHANNEL', 'SHIP_TO', 'PROD_LINE', 'GROUP_NUMBER', 'DESCRIPTION', 'ITEM', 'ORDER_QTY', 'FW_END_DT', 'BPS_INCLUDE']]\n\nprint(bdf.equals(dftest))\nprint(bdf.columns)\nprint(dftest.columns)\n\n\nOut:\nFalse\nIndex(['SITE', 'CUST', 'ORDER_NUMBER', 'ORDER_DATE', 'PURCHASE_ORDER',\n       'CHANNEL', 'SHIP_TO', 'PROD_LINE', 'GROUP_NUMBER', 'DESCRIPTION',\n       'ITEM', 'ORDER_QTY', 'FW_END_DT', 'BPS_INCLUDE'],\n      dtype='object')\nIndex(['SITE', 'CUST', 'ORDER_NUMBER', 'ORDER_DATE', 'PURCHASE_ORDER',\n       'CHANNEL', 'SHIP_TO', 'PROD_LINE', 'GROUP_NUMBER', 'DESCRIPTION',\n       'ITEM', 'ORDER_QTY', 'FW_END_DT', 'BPS_INCLUDE'],\n      dtype='object')\n</code></pre>\n\n<p>^Columns seem to be the same, but <code>bdf.equals(dftest)</code> yields False</p>\n\n<pre><code>In:\nbdf.info()\ndftest.info()\n\n\nOut:\n&lt;class 'pandas.core.frame.DataFrame'&gt;\nIndex: 53025 entries, 0 to 53024\nData columns (total 14 columns):\nSITE              53025 non-null object\nCUST              53025 non-null object\nORDER_NUMBER      53025 non-null object\nORDER_DATE        53025 non-null datetime64[ns]\nPURCHASE_ORDER    53025 non-null object\nCHANNEL           53025 non-null object\nSHIP_TO           53025 non-null object\nPROD_LINE         53025 non-null object\nGROUP_NUMBER      53025 non-null object\nDESCRIPTION       53025 non-null object\nITEM              53025 non-null object\nORDER_QTY         53025 non-null int64\nFW_END_DT     53025 non-null datetime64[ns]\nBPS_INCLUDE       53025 non-null int64\ndtypes: datetime64[ns](2), int64(2), object(10)\nmemory usage: 6.1+ MB\n&lt;class 'pandas.core.frame.DataFrame'&gt;\nRangeIndex: 53025 entries, 0 to 53024\nData columns (total 14 columns):\nSITE              53025 non-null object\nCUST              53025 non-null object\nORDER_NUMBER      53025 non-null object\nORDER_DATE        53025 non-null datetime64[ns]\nPURCHASE_ORDER    53025 non-null object\nCHANNEL           53025 non-null object\nSHIP_TO           53025 non-null object\nPROD_LINE         53025 non-null object\nGROUP_NUMBER      53025 non-null object\nDESCRIPTION       53025 non-null object\nITEM              53025 non-null object\nORDER_QTY         53025 non-null int64\nFW_END_DT     53025 non-null datetime64[ns]\nBPS_INCLUDE       53025 non-null int64\ndtypes: datetime64[ns](2), int64(2), object(10)\nmemory usage: 5.7+ MB\n</code></pre>\n\n<p>^Everything looks the same except the size, as I mentioned.</p>\n\n<pre><code>In:\ncommon = bdf.merge(dftest,on=['SITE', 'CUST', 'ORDER_NUMBER', 'ORDER_DATE', 'PURCHASE_ORDER', 'CHANNEL', 'SHIP_TO', 'PROD_LINE', 'GROUP_NUMBER', 'DESCRIPTION', 'ITEM', 'ORDER_QTY', 'FW_END_DT', 'BPS_INCLUDE'], how='outer', indicator=True)\nprint(common[common['_merge'] != 'both'])\n\n\n\nOut:\nEmpty DataFrame\nColumns: [SITE, CUST, ORDER_NUMBER, ORDER_DATE, PURCHASE_ORDER, CHANNEL, SHIP_TO, PROD_LINE, GROUP_NUMBER, DESCRIPTION, ITEM, ORDER_QTY, FW_END_DT, BPS_INCLUDE, _merge]\nIndex: []\n</code></pre>\n\n<p>Tried merging and selecting rows not in both df</p>\n\n<pre><code>In:\nbdf[(~bdf.SITE.isin(common.SITE))&amp;(~bdf.CUST.isin(common.CUST))&amp;(~bdf.ORDER_NUMBER.isin(common.ORDER_NUMBER))&amp;(~bdf.ORDER_DATE.isin(common.ORDER_DATE))&amp;(~bdf.PURCHASE_ORDER.isin(common.PURCHASE_ORDER))&amp;(~bdf.CHANNEL.isin(common.CHANNEL))&amp;(~bdf.SHIP_TO.isin(common.SHIP_TO))&amp;(~bdf.PROD_LINE.isin(common.PROD_LINE))&amp;(~bdf.GROUP_NUMBER.isin(common.GROUP_NUMBER))&amp;(~bdf.DESCRIPTION.isin(common.DESCRIPTION))&amp;(~bdf.ITEM.isin(common.ITEM))&amp;(~bdf.ORDER_QTY.isin(common.ORDER_QTY))&amp;(~bdf.FW_END_DT.isin(common.FW_END_DT))&amp;(~bdf.BPS_INCLUDE.isin(common.BPS_INCLUDE))]\n\n\n\nOut:\nSITE    CUST    ORDER_NUMBER    ORDER_DATE  PURCHASE_ORDER  CHANNEL SHIP_TO PROD_LINE   GROUP_NUMBER    DESCRIPTION ITEM    ORDER_QTY   FW_END_DT   BPS_INCLUDE\n</code></pre>\n\n<p>Nothing doing</p>\n\n<pre><code>In:\n(bdf == dftest).all().all()\n\n\n\n\nOut:\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n&lt;ipython-input-34-6c2f52f55e60&gt; in &lt;module&gt;()\n----&gt; 1 (bdf == dftest).all().all()\n\nC:\\ProgramData\\Anaconda3\\lib\\site-packages\\pandas\\core\\ops.py in f(self, other)\n   1611             # Another DataFrame\n   1612             if not self._indexed_same(other):\n-&gt; 1613                 raise ValueError('Can only compare identically-labeled '\n   1614                                  'DataFrame objects')\n   1615             return self._compare_frame(other, func, str_rep)\n\nValueError: Can only compare identically-labeled DataFrame objects\n</code></pre>\n\n<p>They're not identically labelled? </p>\n\n<p>When I tried searching around for the following I was suggested to try:</p>\n\n<pre><code>In:\nbdf.eq(dftest)\n\n\nOut:\n    SITE    CUST    ORDER_NUMBER    ORDER_DATE  PURCHASE_ORDER  CHANNEL SHIP_TO PROD_LINE   GROUP_NUMBER    DESCRIPTION ITEM    ORDER_QTY   FW_END_DT   BPS_INCLUDE\n0   False   False   False   False   False   False   False   False   False   False   False   False   False   False\n1   False   False   False   False   False   False   False   False   False   False   False   False   False   False\n2   False   False   False   False   False   False   False   False   False   False   False   False   False   False\n3   False   False   False   False   False   False   False   False   False   False   False   False   False   False\n4   False   False   False   False   False   False   False   False   False   False   False   False   False   False\n5   False   False   False   False   False   False   False   False   False   False   False   False   False   False\n... ... ... ... ... ... ... ... ... ... ... ... ... ... ...\n52995   False   False   False   False   False   False   False   False   False   False   False   False   False   False\n106050 rows \u00d7 14 columns\n</code></pre>\n\n<p>And in this case it looks like each pair of cells doesn't match... :(</p>\n\n<p>Am I missing something totally obvious?</p>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 786, "user_id": 7604434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5724873872a17fd0b8e0bf25b9a2acdf?s=128&d=identicon&r=PG&f=1", "display_name": "Crivella", "link": "https://stackoverflow.com/users/7604434/crivella"}, "edited": false, "score": 1, "creation_date": 1549487207, "post_id": 54562494, "comment_id": 95923971, "body": "You might want to show the error you are getting. Please look <a href=\"https://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>, Make sure we are able to give all the code that will allow us to reproduce the error so that we can actually help you. Also wrong indentation in the code"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1549489968, "post_id": 54562494, "comment_id": 95925144, "body": "What do you mean by &quot;a total of 1000 iterations&quot;? What&#39;s an iteration? What&#39;s range should the x axis have?"}], "answers": [{"tags": [], "owner": {"reputation": 2557, "user_id": 6688801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45ca691d8f8dbd1db658fadff05127ad?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/6688801/martin"}, "is_accepted": false, "score": 0, "last_activity_date": 1549487577, "last_edit_date": 1549487577, "creation_date": 1549487256, "answer_id": 54562571, "question_id": 54562494, "link": "https://stackoverflow.com/questions/54562494/plotting-a-graph-given-function-definition/54562571#54562571", "title": "Plotting a graph given function definition", "body": "<p>I dont understand much what you are saying concerning x being number ofiteration while you are showing us function <strong>logistic(4, 0.7)</strong>. As far as I know, iterations is integer, whole number. You cant iterate just halfly or partially</p>\n\n<pre><code>def logistic(A, x):\n    y = A * x * (1 - x)\n    return y\n\nA = 1\n\nx_vals = []\ny_vals = []\n\nfor x in range(1,1000):\n    x_vals.append(x)\n    y_vals.append(logistic(A,x))\n    #plt.plot(x_vals,y_vals) # See every iteration\n    #plt.show()\nplt.plot(x_vals,y_vals) # See all iterations at once\nplt.show()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1614, "user_id": 10852841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe7a38cc20a4dc6159ee347bf6c19fdf?s=128&d=identicon&r=PG&f=1", "display_name": "HS-nebula", "link": "https://stackoverflow.com/users/10852841/hs-nebula"}, "is_accepted": false, "score": 0, "last_activity_date": 1549505764, "creation_date": 1549505764, "answer_id": 54565360, "question_id": 54562494, "link": "https://stackoverflow.com/questions/54562494/plotting-a-graph-given-function-definition/54565360#54565360", "title": "Plotting a graph given function definition", "body": "<p>Ah, the logistic map. Are you trying to make a cobweb plot? If so, your error may be elsewhere. As others have mentioned, you should post the error message and your code, so we can better help you. However, based on what you've given us, you can use <code>numpy.arrays</code> to achieve your desired result.</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\nstart = 0\nend = 1\nnum = 1000\n\n# Create array of 'num' evenly spaced values between 'start' and 'end'\nx = np.linspace(start, end, num)\n\n# Initialize y array\ny = np.zeros(len(x))\n\n# Logistic function\ndef logistic(A, x):\n    y = A * x * (1 - x)\n    return y\n\n# Add values to y array\nfor i in range(len(x)):\n    y[i] = logistic(4, x[i])\n\nplt.plot(x,y)\nplt.show()\n</code></pre>\n\n<p>However, with <code>numpy.arrays</code>, you can omit the <code>for</code> loop and just do </p>\n\n<pre><code>x = np.linspace(start, end, num)\ny = logistic(4, x)\n</code></pre>\n\n<p>and you'll get the same result, but faster. </p>\n"}], "owner": {"reputation": 111, "user_id": 5806723, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c7232a0f85114edc3c4eff2a1ba449b?s=128&d=identicon&r=PG", "display_name": "May", "link": "https://stackoverflow.com/users/5806723/may"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1549505764, "creation_date": 1549486900, "last_edit_date": 1549489668, "question_id": 54562494, "link": "https://stackoverflow.com/questions/54562494/plotting-a-graph-given-function-definition", "title": "Plotting a graph given function definition", "body": "<p>I'm currently trying to plot a graph of iterations of a certain function in python. I have defined the function as stated below but I am unsure on how to plot the graph such that the y value is on the y axis and the iteration number is on the x axis.</p>\n\n<p>So, I have tried using the <code>plt.plot</code> function with different values in as my x values but using <code>logistic(4, 0.7)</code> as the y value for the y axis.</p>\n\n<pre><code>def logistic(A, x):\n    y = A * x * (1 - x)\n    return y\n</code></pre>\n\n<p>But each return an error. Can anyone shed any light on this, I want to do a total of 1000 iterations.</p>\n"}, {"tags": ["python", "regex"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11025207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4076f7b5fe7a3feb582280c60d21eb0a?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/11025207/alexander"}, "edited": false, "score": 0, "creation_date": 1549492384, "post_id": 54562645, "comment_id": 95926037, "body": "Thank you blhsing. It is highly appreciated."}], "tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": false, "score": 0, "last_activity_date": 1549487611, "creation_date": 1549487611, "answer_id": 54562645, "question_id": 54562472, "link": "https://stackoverflow.com/questions/54562472/i-need-a-python-regex-to-split-a-file-by-delimiters-begin-end-that-can-have-m/54562645#54562645", "title": "I need a python REGEX to split a file by delimiters (begin, end) that can have multiple occurences", "body": "<p>You can use <code>re.findall</code> with the <code>re.DOTALL</code> flag to allow <code>.</code> to match newlines and with the <code>re.MULTILINE</code> flag to allow <code>^</code> and <code>$</code> to match the beginning and the end of a line, assuming the content of the input file is stored in the variable <code>content</code>:</p>\n\n<pre><code>re.findall('^BEGIN$.*?^END$', content, flags=re.DOTALL | re.MULTILINE)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "edited": false, "score": 0, "creation_date": 1549489935, "post_id": 54563071, "comment_id": 95925131, "body": "Care to comment the down vote?"}, {"owner": {"reputation": 13, "user_id": 11025207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4076f7b5fe7a3feb582280c60d21eb0a?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/11025207/alexander"}, "edited": false, "score": 1, "creation_date": 1549492522, "post_id": 54563071, "comment_id": 95926080, "body": "This solution is also good. Thank you Pedro Lobito. It is highly appreciated."}, {"owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "reply_to_user": {"reputation": 13, "user_id": 11025207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4076f7b5fe7a3feb582280c60d21eb0a?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/11025207/alexander"}, "edited": false, "score": 0, "creation_date": 1549550602, "post_id": 54563071, "comment_id": 95949254, "body": "You&#39;re welcome!"}], "tags": [], "owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "is_accepted": true, "score": -1, "last_activity_date": 1549550705, "last_edit_date": 1549550705, "creation_date": 1549489831, "answer_id": 54563071, "question_id": 54562472, "link": "https://stackoverflow.com/questions/54562472/i-need-a-python-regex-to-split-a-file-by-delimiters-begin-end-that-can-have-m/54563071#54563071", "title": "I need a python REGEX to split a file by delimiters (begin, end) that can have multiple occurences", "body": "<p>You can use something like:</p>\n\n<pre><code>import re\nwith open('original.txt') as f:\n    s = f.read()\n\nm = re.findall(\"BEGIN.*?END\", s, re.DOTALL)\n\nn = 1\nfor x in m:\n    with open(f\"{n}.txt\", \"w\", encoding='utf8' ) as f:\n        f.write(x)\n    n+=1\n</code></pre>\n\n<hr>\n\n<p>The above will create 3 files</p>\n\n<pre><code>1.txt\n2.txt\n3.txt\n</code></pre>\n\n<p>Containing the text <code>BEGIN ... END</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 11025207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4076f7b5fe7a3feb582280c60d21eb0a?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/11025207/alexander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "closed_date": 1549528170, "accepted_answer_id": 54563071, "answer_count": 2, "score": 0, "last_activity_date": 1549550705, "creation_date": 1549486776, "last_edit_date": 1549487008, "question_id": 54562472, "link": "https://stackoverflow.com/questions/54562472/i-need-a-python-regex-to-split-a-file-by-delimiters-begin-end-that-can-have-m", "closed_reason": "Needs more focus", "title": "I need a python REGEX to split a file by delimiters (begin, end) that can have multiple occurences", "body": "<p>I am using Python. I would like to split a file that contains n sections by using the delimiters \"BEGIN\" and \"END\".</p>\n\n<p>The file contains:</p>\n\n<pre><code>BEGIN\nABC ABC ABC\nEND\nBEGIN\nXYZ\nXYZ\nEND\nBEGIN\nA B C\nEND\n</code></pre>\n\n<p>With the file above, I would like to have as output:</p>\n\n<p>file 1:</p>\n\n<pre><code>BEGIN\nABC ABC ABC\nEND\n</code></pre>\n\n<p>file 2:</p>\n\n<pre><code>BEGIN\nXYZ\nXYZ\nEND\n</code></pre>\n\n<p>file 3:</p>\n\n<pre><code>BEGIN\nA B C\nEND\n</code></pre>\n\n<p>I think this can be done with a REGEX but I haven't been able to find the pattern that will identify the 3 groups (BEGIN ... END) in the example above.</p>\n\n<p>I would be very grateful if you could help me.</p>\n\n<p>Thank you</p>\n"}, {"tags": ["python", "scikit-learn", "random-forest"], "answers": [{"tags": [], "owner": {"reputation": 1181, "user_id": 8628758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WOsKE.jpg?s=128&g=1", "display_name": "James Dellinger", "link": "https://stackoverflow.com/users/8628758/james-dellinger"}, "is_accepted": true, "score": 6, "last_activity_date": 1549518058, "creation_date": 1549518058, "answer_id": 54566985, "question_id": 54562464, "link": "https://stackoverflow.com/questions/54562464/can-i-show-feature-importance-for-multioutputclassifier/54566985#54566985", "title": "Can I show feature importance for MultiOutputClassifier?", "body": "<p>Indeed, it doesn't appear that Sklearn's <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.multioutput.MultiOutputClassifier.html\" rel=\"noreferrer\">MultiOutputClassifier</a> has an attribute that contains some sort of amalgamation of the feature importances of all the estimators (in your case, all the RandomForest classifiers) used in the model.</p>\n\n<p>However, it is possible to access the feature importances of each RandomForest classifier, and then average them all together to give you each feature's average importance, across all RandomForest classifiers.</p>\n\n<p>MultiOutputClassifier objects have an attribute called <code>estimators_</code>. If you run <code>multi_forest.estimators_</code>, you will get a list containing an object for each of your RandomForest classifiers. </p>\n\n<p>For each of these RandomForest classifier objects, you can access its feature importances through the <code>feature_importances_</code> attribute. </p>\n\n<p>To put it all together, this was my approach:</p>\n\n<pre><code>feat_impts = [] \nfor clf in multi_forest.estimators_:\n    feat_impts.append(clf.feature_importances_)\n\nnp.mean(feat_impts, axis=0)\n</code></pre>\n\n<p>I ran the example code you pasted into your question, and then ran the above block of code to output a list of the following 15 averages:</p>\n\n<pre><code>array([0.09830467, 0.0912088 , 0.05738045, 0.1211305 , 0.03901933,\n       0.05429491, 0.06929378, 0.06404416, 0.05676634, 0.04919717,\n       0.05244265, 0.0509295 , 0.05615341, 0.09202444, 0.04780991])\n</code></pre>\n\n<p>Which contains the average importance of each of your 15 features, across each of the 3 random forest classifiers used in your MultiOutputClassifier.</p>\n\n<p>This should at least help you to see which features, on the whole, tended to be more important in making predictions for each of your 3 classes.</p>\n"}], "owner": {"reputation": 157, "user_id": 9405212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4759cbdee6d7fc5683a6aaa684975537?s=128&d=identicon&r=PG&f=1", "display_name": "PaulH", "link": "https://stackoverflow.com/users/9405212/paulh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1053, "favorite_count": 1, "accepted_answer_id": 54566985, "answer_count": 1, "score": 4, "last_activity_date": 1549518058, "creation_date": 1549486753, "question_id": 54562464, "link": "https://stackoverflow.com/questions/54562464/can-i-show-feature-importance-for-multioutputclassifier", "title": "Can I show feature importance for MultiOutputClassifier?", "body": "<p>I'm trying to recover the feature importance of a multioutput Classifier using a RandomForest.</p>\n\n<p>The MultiOutput model does not show any problems:</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\nimport sklearn\nfrom sklearn.datasets import make_multilabel_classification\nfrom sklearn.datasets import make_classification\nfrom sklearn.multioutput import MultiOutputClassifier\nfrom sklearn.ensemble import RandomForestClassifier\n\n## Generate data\nx, y = make_multilabel_classification(n_samples=1000, \n                                      n_features=15, \n                                      n_labels = 5, \n                                      n_classes=3, \n                                      random_state=12, \n                                      allow_unlabeled = True)\nx_train = x[:700,:]\nx_test  = x[701:,:]\ny_train = y[:700,:]\ny_test  = y[701:,:]\n\n## Generate model\nforest = RandomForestClassifier(n_estimators = 100, random_state = 1)\nmulti_forest = MultiOutputClassifier(forest, n_jobs = -1).fit(x_train, y_train)\n\n## Make prediction\ndfOutput_multi_forest = multi_forest.predict_proba(x_test)\n</code></pre>\n\n<p>The prediction <code>dfOutput_multi_forest</code> does not show any problems, but I want to recover the feature importance of the multi_forest for interpretation of the output.</p>\n\n<p>Using <code>multi_forest.feature_importance_</code> throws the following error message:\n    <code>AttributeError: 'MultiOutputClassifier' object has no attribute 'feature_importance_'</code></p>\n\n<p>Does anyone know how to retrieve the feature importance?\nI'm using scikit v0.20.2 </p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"tags": [], "owner": {"reputation": 1383, "user_id": 4107770, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/84cd102ae268671aa55a8869094210fd?s=128&d=identicon&r=PG&f=1", "display_name": "Vladimir Vargas", "link": "https://stackoverflow.com/users/4107770/vladimir-vargas"}, "is_accepted": false, "score": 1, "last_activity_date": 1549486915, "creation_date": 1549486915, "answer_id": 54562499, "question_id": 54562439, "link": "https://stackoverflow.com/questions/54562439/splitting-csv-into-files/54562499#54562499", "title": "Splitting CSV into files", "body": "<p>I guess you just need to load the file and read line by line (not loading it as a csv file). Each line goes to a file.</p>\n\n<pre><code>index = 0\nwith open('testcsv.csv', 'r') as f:\n    for line in f.readlines():\n        index += 1\n        with open('new_textfile_{}.csv'.format(index), 'w') as f2:\n            f2.write(line)\n</code></pre>\n\n<p>If you want to save the files in some directory X, then the path in the second <code>with open...</code> should be <code>\"X/whatever_name_{}.csv\".format(index)</code></p>\n"}, {"comments": [{"owner": {"reputation": 405, "user_id": 4830458, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/dc026b82ce745c12e6dd32abf805f9d4?s=128&d=identicon&r=PG&f=1", "display_name": "dwb", "link": "https://stackoverflow.com/users/4830458/dwb"}, "edited": false, "score": 0, "creation_date": 1549487682, "post_id": 54562582, "comment_id": 95924176, "body": "This worked perfect. One semi-off-topic question... is there a way to exclude the very first index when writing that file? (remove the Store1 and Store2)"}, {"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "reply_to_user": {"reputation": 405, "user_id": 4830458, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/dc026b82ce745c12e6dd32abf805f9d4?s=128&d=identicon&r=PG&f=1", "display_name": "dwb", "link": "https://stackoverflow.com/users/4830458/dwb"}, "edited": false, "score": 1, "creation_date": 1549487747, "post_id": 54562582, "comment_id": 95924196, "body": "Glad to be of help. I&#39;ve updated my answer to exclude the first item of each row in the output."}, {"owner": {"reputation": 405, "user_id": 4830458, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/dc026b82ce745c12e6dd32abf805f9d4?s=128&d=identicon&r=PG&f=1", "display_name": "dwb", "link": "https://stackoverflow.com/users/4830458/dwb"}, "edited": false, "score": 1, "creation_date": 1549487795, "post_id": 54562582, "comment_id": 95924209, "body": "Works like a charm. Thanks again sir."}], "tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": true, "score": 1, "last_activity_date": 1549487720, "last_edit_date": 1549487720, "creation_date": 1549487336, "answer_id": 54562582, "question_id": 54562439, "link": "https://stackoverflow.com/questions/54562439/splitting-csv-into-files/54562582#54562582", "title": "Splitting CSV into files", "body": "<p>Since each <code>item</code> is a list of values representing a row in the CSV, you should write it as a CSV with <code>csv.writer</code>:</p>\n\n<pre><code>for item in csvList:\n    os.mkdir(r\"C:\\Users\\user\\Desktop\\Test Path\\\\\" + item[0])\n    with open(r\"C:\\Users\\user\\Desktop\\Test Path\\\\\" + item[0] + r\"\\prm.263\",\"w+\") as f:\n        csv.writer(f).writerow(item[1:])\n</code></pre>\n"}], "owner": {"reputation": 405, "user_id": 4830458, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/dc026b82ce745c12e6dd32abf805f9d4?s=128&d=identicon&r=PG&f=1", "display_name": "dwb", "link": "https://stackoverflow.com/users/4830458/dwb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 54562582, "answer_count": 2, "score": 1, "last_activity_date": 1549487720, "creation_date": 1549486659, "question_id": 54562439, "link": "https://stackoverflow.com/questions/54562439/splitting-csv-into-files", "title": "Splitting CSV into files", "body": "<p>I am looking for some guidance with what I am trying to do. </p>\n\n<p>I have a .csv file, and in this file I want to break down each line and save it into its own text file. </p>\n\n<p>I have that part working, however, when it runs I am losing the commas. I am assuming this is happening because I am converting a .csv file into a list then into a text file.</p>\n\n<p>I feel there has to be a better way!</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>def createParam():\n    with open('testcsv.csv', 'r') as f:\n        reader = csv.reader(f)\n        csvList = list(reader)\n\n    for item in csvList:\n        os.mkdir(r\"C:\\Users\\user\\Desktop\\Test Path\\\\\" + item[0])\n        f=open(r\"C:\\Users\\user\\Desktop\\Test Path\\\\\" + item[0] + r\"\\prm.263\",\"w+\")\n        f.writelines(item)\n        f.close\n</code></pre>\n\n<p><strong>CSV</strong> </p>\n\n<blockquote>\n  <p>Store1,1080,SafehavenHumaneSociety,2904,LuckyPaws,3156,StMartinsDogRescue,4051,SalemFriendsofFelines,4088,HeartlandHumaneSociety,4118,Fortheloveofacat,6329,PeacefulPack,7710,OneVoice4Paws,7981,KeithasKittieRescue,7984,InternationalReptileRescueInc,9304,SeniorDogRescueOfOregon,9309,LovedAgainPets\n  Store2,0028,ArizonaAnimalWelfareLeague,0039,HelpingAnimalsLiveOnHALO,1468,MaricopaCountyAnimalCareandControlMCACC,4250,BuckeyeAnimalRescueKennel,5112,MASH,5957,FeathersFoundationInc,6725,ValleyHumaneSociety,7172,KitKatRescue,7627,LuckyDogRscu,7761,AZSmallDog,8114,WhoSavedWhoRescue,9160,DestinationHome,9248,AllAboutAnimals</p>\n</blockquote>\n\n<p><strong>Clarification</strong>: When it creates the file(s), it has all the data, but all the commas are removed so its just all 1 long line. </p>\n"}, {"tags": ["python", "numpy", "binary"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1549486762, "post_id": 54562428, "comment_id": 95923769, "body": "I&#39;ve seen a lot of <code>bumpy</code> questions, but now it&#39;s a <code>lumpy</code> one?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1549486920, "post_id": 54562428, "comment_id": 95923843, "body": "Do you have documentation about how this binary file was created?  Your <code>dtype</code> loads, if I read it right, 6 bytes as <code>uint</code> (i.e. one byte per field), 8 bytes as the <code>float</code>, and 4 bytes as the <code>float32</code>.  Is that consistent with the creation documentation?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1549490359, "post_id": 54562428, "comment_id": 95925300, "body": "Oops <code>uint</code> is 8 bytes per unsigned integer, so that&#39;s 60 bytes per record."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1549497305, "post_id": 54562428, "comment_id": 95927555, "body": "Is the resulting size (<code>shape</code>) reaonable, what you&#39;d expect?"}, {"owner": {"reputation": 3, "user_id": 5839130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06f5a98fdb199401a111d3f37e6b4141?s=128&d=identicon&r=PG&f=1", "display_name": "Pshank007", "link": "https://stackoverflow.com/users/5839130/pshank007"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1549512916, "post_id": 54562428, "comment_id": 95930726, "body": "lumpy is incorrect. numpy is what i typed but it auto corrected to lumpy!"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5839130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06f5a98fdb199401a111d3f37e6b4141?s=128&d=identicon&r=PG&f=1", "display_name": "Pshank007", "link": "https://stackoverflow.com/users/5839130/pshank007"}, "edited": false, "score": 0, "creation_date": 1549512869, "post_id": 54562535, "comment_id": 95930714, "body": "Incorporated your suggestion of changing &#39;uint&#39; to &#39;uint8&#39; ; it is still not right.  I don&#39;t know how the binary file was created except they are in little-endian byte order and except the last two fields &#39;g&#39; and &#39;h&#39; everything else is unsigned integer with 4 bytes each. &#39;g&#39; is float with 4 bytes and &#39;h&#39; is a float array such that it is 4*g bytes long."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 3, "user_id": 5839130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06f5a98fdb199401a111d3f37e6b4141?s=128&d=identicon&r=PG&f=1", "display_name": "Pshank007", "link": "https://stackoverflow.com/users/5839130/pshank007"}, "edited": false, "score": 0, "creation_date": 1549515722, "post_id": 54562535, "comment_id": 95931369, "body": "I&#39;ve made a suggestion based on this latest description."}, {"owner": {"reputation": 3, "user_id": 5839130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06f5a98fdb199401a111d3f37e6b4141?s=128&d=identicon&r=PG&f=1", "display_name": "Pshank007", "link": "https://stackoverflow.com/users/5839130/pshank007"}, "edited": false, "score": 0, "creation_date": 1549558308, "post_id": 54562535, "comment_id": 95954084, "body": "It didn&#39;t work either. However, writing np.ones and reading it worked. I queries the data type it returned me numpy.int32 from a to f and for &#39;g&#39; it returned numpy.float32.   Yes, you are right, the first six seems to be header. Also, what is the logic behind writing 1s and reading it? The file &#39;fn&#39; is already open and it contains all datatypes. so, I am not clear what is the point in writing 1s and reading it."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 3, "user_id": 5839130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06f5a98fdb199401a111d3f37e6b4141?s=128&d=identicon&r=PG&f=1", "display_name": "Pshank007", "link": "https://stackoverflow.com/users/5839130/pshank007"}, "edited": false, "score": 0, "creation_date": 1549558535, "post_id": 54562535, "comment_id": 95954231, "body": "I&#39;m just illustrating the dtype action.  I  can&#39;t test my suggestions on your file!"}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 0, "last_activity_date": 1549515702, "last_edit_date": 1549515702, "creation_date": 1549487093, "answer_id": 54562535, "question_id": 54562428, "link": "https://stackoverflow.com/questions/54562428/float-array-data-from-a-binary-file-using-np-fromfile/54562535#54562535", "title": "Float array data from a binary file using np.fromfile()", "body": "<p>Here's an example using your dtype, with an in memory bytestring instead of a file:</p>\n\n<pre><code>In [279]: dt=np.dtype([('a','uint'),('b','uint'),('c','uint'),('d','uint'),('e','uint'),('f','\n     ...: uint'),('g',float),('h',np.float32)])\nIn [280]: \nIn [280]: x = np.ones((3,),dt)\nIn [281]: x\nOut[281]: \narray([(1, 1, 1, 1, 1, 1, 1., 1.), (1, 1, 1, 1, 1, 1, 1., 1.),\n       (1, 1, 1, 1, 1, 1, 1., 1.)],\n      dtype=[('a', '&lt;u8'), ('b', '&lt;u8'), ('c', '&lt;u8'), ('d', '&lt;u8'), ('e', '&lt;u8'), ('f', '&lt;u8'), ('g', '&lt;f8'), ('h', '&lt;f4')])\nIn [282]: x.tostring()\nOut[282]: b'\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\xf0?\\x00\\x00\\x80?\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\xf0?\\x00\\x00\\x80?\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\xf0?\\x00\\x00\\x80?'\nIn [283]: np.frombuffer(x.tostring(), dtype=dt)\nOut[283]: \narray([(1, 1, 1, 1, 1, 1, 1., 1.), (1, 1, 1, 1, 1, 1, 1., 1.),\n       (1, 1, 1, 1, 1, 1, 1., 1.)],\n      dtype=[('a', '&lt;u8'), ('b', '&lt;u8'), ('c', '&lt;u8'), ('d', '&lt;u8'), ('e', '&lt;u8'), ('f', '&lt;u8'), ('g', '&lt;f8'), ('h', '&lt;f4')])\n</code></pre>\n\n<hr>\n\n<p>What <code>uint</code> really should be <code>uint8</code> - 1 byte unsigned integer rather than the full 8 byte version?</p>\n\n<pre><code>In [300]: dt1=np.dtype([('a','uint8'),('b','uint8'),('c','uint8'),('d','uint8'),('e','uint8'),\n     ...: ('f','uint8'),('g',float),('h',np.float32)])\nIn [301]: y = np.ones((10,),dt1)\n</code></pre>\n\n<p><code>itemsize</code> for the 2 arrays is quite different:</p>\n\n<pre><code>In [302]: x.itemsize\nOut[302]: 60\nIn [303]: y.itemsize\nOut[303]: 18\n</code></pre>\n\n<p>But if the total size was right, either could be read with the other (10*18 == 3*60):</p>\n\n<pre><code>In [304]: np.frombuffer(y.tostring(), dtype=dt1)\nOut[304]: \narray([(1, 1, 1, 1, 1, 1, 1., 1.), (1, 1, 1, 1, 1, 1, 1., 1.),\n       (1, 1, 1, 1, 1, 1, 1., 1.), (1, 1, 1, 1, 1, 1, 1., 1.),\n       (1, 1, 1, 1, 1, 1, 1., 1.), (1, 1, 1, 1, 1, 1, 1., 1.),\n       (1, 1, 1, 1, 1, 1, 1., 1.), (1, 1, 1, 1, 1, 1, 1., 1.),\n       (1, 1, 1, 1, 1, 1, 1., 1.), (1, 1, 1, 1, 1, 1, 1., 1.)],\n      dtype=[('a', 'u1'), ('b', 'u1'), ('c', 'u1'), ('d', 'u1'), ('e', 'u1'), ('f', 'u1'), ('g', '&lt;f8'), ('h', '&lt;f4')])\n</code></pre>\n\n<p>A mismatch is dtypes:</p>\n\n<pre><code>In [305]: np.frombuffer(y.tostring(), dtype=dt)\nOut[305]: \narray([(      1103823438081,    70300024700928,   72340172838092672, 4607182418800017408, 72340173886586880,                 257, 7.8598509e-304, 2.3694278e-38),\n       (4607182418800017408, 72340173886586880,                 257,   72408888003018736,          16843009, 4575657222481117184, 5.4536124e-312, 0.0000000e+00),\n       (  72408888003018736,          16843009, 4575657222481117184,       1103823438081,    70300024700928,   72340172838092672, 1.0000000e+000, 1.0000000e+00)],\n      dtype=[('a', '&lt;u8'), ('b', '&lt;u8'), ('c', '&lt;u8'), ('d', '&lt;u8'), ('e', '&lt;u8'), ('f', '&lt;u8'), ('g', '&lt;f8'), ('h', '&lt;f4')])\n</code></pre>\n\n<p>With a mismatch in dtypes we are likely to hit an error:</p>\n\n<pre><code>ValueError: buffer size must be a multiple of element size\n</code></pre>\n\n<p>Still a fortuitous mismatch in dtypes could explain a <code>fromfile</code> read that runs but produces wrong values, especially ones that look way off.</p>\n\n<hr>\n\n<p>Based on your comment I wrote:</p>\n\n<pre><code>In [347]: dt1=np.dtype([('a','u4'),('b','u4'),('c','u4'),('d','u4'),('e','u4'),('f','u4'),('g','f4')])\n</code></pre>\n\n<p>I'm skipping <code>h</code> for the moment.</p>\n\n<p>Now make an array with several records:</p>\n\n<pre><code>In [351]: x=np.ones((3,),dt1); x['g'][0]=10\nIn [352]: x\nOut[352]: \narray([(1, 1, 1, 1, 1, 1, 10.), (1, 1, 1, 1, 1, 1,  1.),\n       (1, 1, 1, 1, 1, 1,  1.)],\n      dtype=[('a', '&lt;u4'), ('b', '&lt;u4'), ('c', '&lt;u4'), ('d', '&lt;u4'), ('e', '&lt;u4'), ('f', '&lt;u4'), ('g', '&lt;f4')])\n</code></pre>\n\n<p>Write it, and then load just one count:</p>\n\n<pre><code>In [353]: np.frombuffer(x.tostring(), count=1,dtype=dt1)\nOut[353]: \narray([(1, 1, 1, 1, 1, 1, 10.)],\n      dtype=[('a', '&lt;u4'), ('b', '&lt;u4'), ('c', '&lt;u4'), ('d', '&lt;u4'), ('e', '&lt;u4'), ('f', '&lt;u4'), ('g', '&lt;f4')])\n</code></pre>\n\n<p>I'd suggest using this <code>dt1</code>, and using it to load just one record.  See if the values look reasonable.</p>\n\n<p>I skipped the <code>h</code> because you describe it as <code>'h' is a float array such that it is 4*g bytes long</code>.  If 'g' is float this length is poorly defined; it should be an int of some sort.  </p>\n\n<p>If you have left <code>fn</code> open at this point, then <code>np.fromfile(fn, '&lt;f4', count=n)</code> might work to load that 'h' array.  I would start with a small <code>n</code> just to see if this is promising, and later try a larger value or the open ended <code>-1</code>.</p>\n\n<p>In other words, you description sounds like the file contains a header of fixed size, and then a variable size block of floats.</p>\n"}], "owner": {"reputation": 3, "user_id": 5839130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06f5a98fdb199401a111d3f37e6b4141?s=128&d=identicon&r=PG&f=1", "display_name": "Pshank007", "link": "https://stackoverflow.com/users/5839130/pshank007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 698, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549515702, "creation_date": 1549486624, "question_id": 54562428, "link": "https://stackoverflow.com/questions/54562428/float-array-data-from-a-binary-file-using-np-fromfile", "title": "Float array data from a binary file using np.fromfile()", "body": "<p>Language: Python 3.6/\nOS: Mac OS High Sierra/\nEnvironment: Xcode </p>\n\n<p>I have a binary file with different data types. I read it using the following command:</p>\n\n<pre><code>fn=open(filePathname,mode='rb')\n</code></pre>\n\n<p>I create a datatype as shown below:</p>\n\n<pre><code>dt=np.dtype([('a','uint'),('b','uint'),('c','uint'),('d','uint'),('e','uint'),('f','uint'),('g',float),('h',np.float32)])\n</code></pre>\n\n<p>I converted from binary using np.fromfile() as shown:</p>\n\n<pre><code>numpy_data = np.fromfile(fn, dtype = dt)\n</code></pre>\n\n<p>My expectation is I will have an array showing the 'actual' values in the array, but what I get is a bunch of bytes with appropriate types in numpy_data array. </p>\n\n<p>Output</p>\n\n<pre><code>print(numpy_data['h'])\n</code></pre>\n\n<p>Result</p>\n\n<pre><code>[ 5.8315540e-39  6.0152250e-39  6.0582729e-39 ... -4.2051079e-07\n</code></pre>\n\n<p>8.4560821e+17  3.0060693e-10]</p>\n\n<p>Problem - I know the numbers are not correct; I think it shows bytes data. If so, what is the right way to convert into their 'actual' value? I am using lumpy for speed and I don't prefer struct.unpack() method. </p>\n"}, {"tags": ["python", "pandas", "dataframe", "matplotlib", "sentiment-analysis"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1549488603, "post_id": 54562397, "comment_id": 95924565, "body": "<code>fig, ax = plt.subplots()</code> creates a new figure and axes each time it&#39;s called. <code>ax.clear()</code> clears the axes."}, {"owner": {"reputation": 103, "user_id": 9570248, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-E70SDL0DF_s/AAAAAAAAAAI/AAAAAAAAAhs/kqFGi9ZYHZ4/photo.jpg?sz=128", "display_name": "Nakul Sharma", "link": "https://stackoverflow.com/users/9570248/nakul-sharma"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1549557500, "post_id": 54562397, "comment_id": 95953627, "body": "hi @ImportanceOfBeingErnest: thanks for your comment. I moved out fig, ax = plt.subplots() of the class and placed it right before the class is executed. Similarly, i commented out ax.clear() . the only difference this has caused in the output is that the first graph image is getting printed with one dot, which is data for that instance, rest of the graphical images are being printed without any data. I still can&#39;t get the desired output which is one dynamic graph printing the data as it comes and gets processed. Please advise."}], "owner": {"reputation": 103, "user_id": 9570248, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-E70SDL0DF_s/AAAAAAAAAAI/AAAAAAAAAhs/kqFGi9ZYHZ4/photo.jpg?sz=128", "display_name": "Nakul Sharma", "link": "https://stackoverflow.com/users/9570248/nakul-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 280, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1549486403, "creation_date": 1549486403, "question_id": 54562397, "link": "https://stackoverflow.com/questions/54562397/real-time-plotting-of-two-columns-of-a-dynamic-dataframe", "title": "Real-time plotting of two columns of a dynamic DataFrame", "body": "<p>I am trying to plot a real-time data getting loaded in dataframe. But the attempts have led to printing of multiple blank graph frames in response to dynamic data feed, instead of plotting the data in single frame of graph.</p>\n\n<p>I am implementing a solution to perform sentiment analysis on live twitter stream. I am able to stream the tweets, put them into a DataFrame and apply the required sentiment analysis algorithm on them one by one. I created a column in the DataFrame which holds the compound value generated by that algorithm for an individual tweet.</p>\n\n<p>This DataFrame is getting dynamically updated as the tweets stream and the intent is to plot this real time updated compound value against time.</p>\n\n<p>I have tried plotting the graph as per mentioned advises of using plt.ion(), plt.draw() instead of plt.show() functions etc. But instead of plotting one frame which gets updated with the values, the program starts printing multiple frames one after another as the data gets updated in the DataFrame.</p>\n\n<pre><code>import pandas as pd\nimport csv\nfrom bs4 import BeautifulSoup\nimport re\nimport tweepy\nimport ast\nfrom pytz import timezone\nfrom datetime import datetime\nimport matplotlib.pyplot as plt\nimport time\nfrom tweepy import Stream\nfrom tweepy import OAuthHandler\nfrom tweepy.streaming import StreamListener\nimport json\nfrom textblob import TextBlob\nfrom unidecode import unidecode\nimport nltk\nfrom nltk.sentiment.vader import SentimentIntensityAnalyzer \n\nckey= '#######'\ncsecret= '#######'\natoken= '#########'\nasecret= '#########'\n\nclass listener(StreamListener):\n\ndef on_data(self,data):\n    try:\n        global df\n        data=json.loads(data)\n        time = data[\"created_at\"]\n        tweet = unidecode(data[\"text\"])\n        tweet1 = BeautifulSoup(tweet,\"lxml\").get_text()\n        df = pd.DataFrame(columns = ['time','tweet'])\n        df['time'] = pd.Series(time)\n        df['tweet'] = pd.Series(tweet1)\n\n        def convert_time(time):\n            eastern = timezone('US/Eastern')\n            utc = timezone('UTC')\n            created_at = datetime.strptime(time, '%a %b %d %H:%M:%S %z %Y')\n            est_created_at = created_at.astimezone(eastern)\n            return (est_created_at)\n\n        df['time'] = df['time'].apply(convert_time)\n\n        def hour(time):\n            hour = pd.DatetimeIndex(time).hour\n            return hour\n\n        df['hour'] = df['time'].apply(hour)\n\n        def sentiment_analysis(tweet):\n            sid = SentimentIntensityAnalyzer()\n            return (sid.polarity_scores(tweet)['compound'])\n\n        df['compound'] = df['tweet'].apply(sentiment_analysis)\n\n        #print(df['compound'])\n        #print(df['time'])\n\n        plt.ion()\n        fig, ax = plt.subplots()\n\n        df.plot(y=df'compound', ax=ax)\n        ax.clear()\n\n        ax.axis([ 0, 24, -5,5])\n        plt.xlabel('Time')\n        plt.ylabel('Sentiment')\n        plt.draw()\n        plt.pause(0.2)\n\n\n    except KeyError as e:\n        print(str(e))\n    return (True)\n\n\nauth=OAuthHandler(ckey,csecret)\nauth.set_access_token(atoken,asecret)\n\ntwitterStream =  Stream(auth, listener())\ntwitterStream.filter(track=[\"######\"])\n</code></pre>\n\n<p>Expected Result - One frame of graph getting updated and plotting the real-time data.</p>\n\n<p>Actual Result - Multiple blank graphs</p>\n\n<p>I apologize if i have missed on any information/point. </p>\n"}, {"tags": ["python", "list", "tuples"], "comments": [{"owner": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "edited": false, "score": 0, "creation_date": 1549486243, "post_id": 54562318, "comment_id": 95923550, "body": "<code>tuple</code> are not mutable so you can&#39;t change the list in the tuple, you will need to recreate a new tuple. You don&#39;t need the for loop (you aren&#39;t using <code>i</code>). e.g. <code>tuple(Stack[0], Stack[1][0].split()</code>"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1549486736, "post_id": 54562318, "comment_id": 95923756, "body": "This feels like an XY problem."}], "answers": [{"tags": [], "owner": {"reputation": 2557, "user_id": 6688801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45ca691d8f8dbd1db658fadff05127ad?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/6688801/martin"}, "is_accepted": false, "score": 0, "last_activity_date": 1549487021, "last_edit_date": 1549487021, "creation_date": 1549486217, "answer_id": 54562357, "question_id": 54562318, "link": "https://stackoverflow.com/questions/54562318/how-to-split-list-in-a-tuple/54562357#54562357", "title": "How to split list in a tuple?", "body": "<p>Just hint, not full answer - maybe its full answer, because your main problem seems you cant split the string.... : You are trying to split list, you need to split string.\nTuple is immutable, so you need to transform to list and back to tuple, or make new tuple from original tuple elements</p>\n\n<pre><code>splitted_list = ('_stack_', ['data inside the stack'])[1][0].split()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 214708, "user_id": 201359, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7odj.jpg?s=128&g=1", "display_name": "&#211;scar L&#243;pez", "link": "https://stackoverflow.com/users/201359/%c3%93scar-l%c3%b3pez"}, "is_accepted": true, "score": 1, "last_activity_date": 1549486499, "creation_date": 1549486499, "answer_id": 54562411, "question_id": 54562318, "link": "https://stackoverflow.com/questions/54562318/how-to-split-list-in-a-tuple/54562411#54562411", "title": "How to split list in a tuple?", "body": "<p>Just create a new tuple with the required values, like this:</p>\n\n<pre><code>t  = ('_stack_', ['data inside the stack'])\nnt = (t[0], t[1][0].split())\n</code></pre>\n\n<p>Now <code>nt</code> is as expected:</p>\n\n<pre><code>nt\n=&gt; ('_stack_', ['data', 'inside', 'the', 'stack'])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "is_accepted": false, "score": 0, "last_activity_date": 1549486861, "creation_date": 1549486861, "answer_id": 54562486, "question_id": 54562318, "link": "https://stackoverflow.com/questions/54562318/how-to-split-list-in-a-tuple/54562486#54562486", "title": "How to split list in a tuple?", "body": "<p>One liner to create a new tuple using list comprehension</p>\n\n<pre><code>tuple([i[0].split() if isinstance(i,list) else i for i in your_tuple])\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>('_stack_', ['data', 'inside', 'the', 'stack'])\n</code></pre>\n"}], "owner": {"reputation": 729, "user_id": 10541940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27b27664e2738f269f925ae0e984ae22?s=128&d=identicon&r=PG&f=1", "display_name": "Landon G", "link": "https://stackoverflow.com/users/10541940/landon-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 54562411, "answer_count": 3, "score": 0, "last_activity_date": 1549487021, "creation_date": 1549486059, "question_id": 54562318, "link": "https://stackoverflow.com/questions/54562318/how-to-split-list-in-a-tuple", "title": "How to split list in a tuple?", "body": "<p>I'm working with stacks, and I want to split the 'push' value. As a whole, this happens to just be a list in a tuple. I got (as output):</p>\n\n<pre><code>('_stack_', ['data inside the stack'])\n</code></pre>\n\n<p>and I'm looking to get this:</p>\n\n<pre><code>('_stack_',['data','inside','the','stack])\n</code></pre>\n\n<p>I gave this a try but it threw an error (note: 'Stack' is the variable that refers to the output above):</p>\n\n<pre><code>for i in Stack: \n    Stack[1].split()\n</code></pre>\n\n<p>If anyone could give me a hand, I assume even though this is a stack the same fundamentals of iterating through a tuple and lists should still hold true? Thanks for the help!</p>\n"}, {"tags": ["python", "pandas", "lxml"], "comments": [{"owner": {"reputation": 1181, "user_id": 8628758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WOsKE.jpg?s=128&g=1", "display_name": "James Dellinger", "link": "https://stackoverflow.com/users/8628758/james-dellinger"}, "edited": false, "score": 1, "creation_date": 1549492878, "post_id": 54562261, "comment_id": 95926190, "body": "Could you provide an example of your desired output? What columns would you like  the attributes contained in <code>foo</code> and <code>bar</code> to appear in? And supposing you were able to retrieve the attributes of <code>item</code> and <code>item2</code>, how should they be stored in these items&#39; columns?"}, {"owner": {"reputation": 333, "user_id": 6927944, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5158cc2a85144a0a845043056d3183fe?s=128&d=identicon&r=PG&f=1", "display_name": "Vini", "link": "https://stackoverflow.com/users/6927944/vini"}, "reply_to_user": {"reputation": 1181, "user_id": 8628758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WOsKE.jpg?s=128&g=1", "display_name": "James Dellinger", "link": "https://stackoverflow.com/users/8628758/james-dellinger"}, "edited": false, "score": 0, "creation_date": 1549543239, "post_id": 54562261, "comment_id": 95944842, "body": "For attributes contained in <code>foo</code> and <code>bar</code>, the values could be repeated in its columns through the entire DataFrame. For <code>baz</code>, the values could be repeated through its entire level. Same for <code>item1</code> and <code>item2</code>. The columns could be generated with names <code>foo_bar1</code> or <code>item1_a</code>, for example - it&#39;s not a problem because I only have a few columns."}, {"owner": {"reputation": 1181, "user_id": 8628758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WOsKE.jpg?s=128&g=1", "display_name": "James Dellinger", "link": "https://stackoverflow.com/users/8628758/james-dellinger"}, "edited": false, "score": 1, "creation_date": 1549575285, "post_id": 54562261, "comment_id": 95962294, "body": "Thanks for following up @Vini. I believe you&#39;ll increase your chances of receiving an answer to your question if you include a visual example that is a <i>precise</i> representation of the desired output you described in your comment above. Reviewing these <a href=\"https://stackoverflow.com/help/mcve\">guidelines</a> may be helpful."}], "owner": {"reputation": 333, "user_id": 6927944, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5158cc2a85144a0a845043056d3183fe?s=128&d=identicon&r=PG&f=1", "display_name": "Vini", "link": "https://stackoverflow.com/users/6927944/vini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1549485831, "creation_date": 1549485831, "question_id": 54562261, "link": "https://stackoverflow.com/questions/54562261/retrieving-xml-attributes-to-a-dataframe", "title": "Retrieving XML attributes to a DataFrame", "body": "<p>My XML looks like this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"ISO-8859-1\" standalone=\"yes\"?&gt;\n&lt;foo bar1=\"1\" bar2=\"2\" bar3=\"23\" bar4=\"4\"&gt;\n    &lt;baz abc1=\"xxx\" abc2=\"yyy\"&gt;\n        &lt;item1 a=\"0\" b=\"123\"/&gt;\n        &lt;item2 a=\"0\" b=\"124\"/&gt;\n        &lt;item3&gt;blue&lt;/item3&gt;\n        &lt;item4&gt;green&lt;/item4&gt;\n        &lt;item5&gt;yellow&lt;/item5&gt;\n        &lt;item6&gt;red&lt;/item6&gt;\n        &lt;item7&gt;white&lt;/item7&gt;\n</code></pre>\n\n<p>I'm able to retrieve items contained in <code>item1</code>, <code>item2</code>, etc. Now I want to retrieve the attributes contained in <code>foo</code> or <code>baz</code>, like <code>bar1</code> or <code>abc1</code>.</p>\n\n<p>Everything will be sent to a pandas DataFrame. Code below. Notice that <code>col1</code> and <code>col2</code> are returning <code>None</code>.</p>\n\n<pre><code>from lxml import objectify\nimport pandas as pd\n\nxml = objectify.parse('file.xml')\nroot = xml.getroot()\n\ndata = []\n\nfor i in range(len(root.getchildren())):\n    data.append([child.text for child in root.getchildren()[i].getchildren()])\n\ndf = pd.DataFrame(data)\ndf.columns = ['item1', 'item2', 'item3', 'item4', 'item5', 'item6', 'item7']\n\ndf.head()\n\n   item1  item2 item3     item4    item5   item6   item7\n0  None    None   blue    green   yellow    red    white\n1  None    None   blue    green   yellow    red    white\n2  None    None   blue    green   yellow    red    white\n3  None    None   blue    green   yellow    red    white\n4  None    None   blue    green   yellow    red    white\n</code></pre>\n\n<p>How can I get these attributes? Thanks in advance.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1549485858, "post_id": 54562224, "comment_id": 95923367, "body": "Other way around - <code>+</code> is the slow one."}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1549485871, "post_id": 54562224, "comment_id": 95923376, "body": "Don&#39;t your results show the opposite?  You&#39;re calling <code>appended_list</code> first in your code."}, {"owner": {"reputation": 43, "user_id": 11025107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Wwas.jpg?s=128&g=1", "display_name": "Grimm", "link": "https://stackoverflow.com/users/11025107/grimm"}, "reply_to_user": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1549486642, "post_id": 54562224, "comment_id": 95923726, "body": "@PatrickHaugh dang it, sorry about this. I&#39;ll try editing my question in a minute I mean&#39;t the opposite aswell."}, {"owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "edited": false, "score": 1, "creation_date": 1549487369, "post_id": 54562224, "comment_id": 95924050, "body": "Not an answer, but you an also do <code>wordlist = list(map(str.strip, fin))</code>"}, {"owner": {"reputation": 43, "user_id": 11025107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Wwas.jpg?s=128&g=1", "display_name": "Grimm", "link": "https://stackoverflow.com/users/11025107/grimm"}, "reply_to_user": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "edited": false, "score": 0, "creation_date": 1549488230, "post_id": 54562224, "comment_id": 95924417, "body": "@tobias_k thanks. Never come across map function before ill look into more. but the result is much faster."}], "answers": [{"comments": [{"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1549486933, "post_id": 54562484, "comment_id": 95923849, "body": "What do you mean by &quot;adds the array elements to the original array&quot;?  That makes it sound like the original list is modified by the operation."}], "tags": [], "owner": {"reputation": 107, "user_id": 9159002, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oNwwyzaaWTw/AAAAAAAAAAI/AAAAAAAAABI/ggkmjMEimvE/photo.jpg?sz=128", "display_name": "byal", "link": "https://stackoverflow.com/users/9159002/byal"}, "is_accepted": false, "score": -1, "last_activity_date": 1549522956, "last_edit_date": 1549522956, "creation_date": 1549486841, "answer_id": 54562484, "question_id": 54562224, "link": "https://stackoverflow.com/questions/54562224/why-is-operator-much-slower-than-append-when-creating-a-list/54562484#54562484", "title": "Why is + operator much slower than append() when creating a list?", "body": "<p>The <strong>+</strong> operation adds another element to the original array. The <strong>append</strong> operation inserts the array or object into the end of the original array, which results the append uses less memory.</p>\n"}, {"comments": [{"owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "edited": false, "score": 0, "creation_date": 1549487177, "post_id": 54562502, "comment_id": 95923958, "body": "In fact, with <code>x = x + [y]</code> you are even creating <i>two</i> new lists. <code>x += [y]</code> o.t.o.h. should act like <code>extend</code>, but you still create a one-elemented list around <code>[y]</code>."}, {"owner": {"reputation": 214708, "user_id": 201359, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7odj.jpg?s=128&g=1", "display_name": "&#211;scar L&#243;pez", "link": "https://stackoverflow.com/users/201359/%c3%93scar-l%c3%b3pez"}, "reply_to_user": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "edited": false, "score": 0, "creation_date": 1549487291, "post_id": 54562502, "comment_id": 95924014, "body": "Yup, that&#39;s a good point. Added it to my answer, thanks @tobias_k !"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "edited": false, "score": 0, "creation_date": 1549487305, "post_id": 54562502, "comment_id": 95924017, "body": "@tobias_k although that by itself doesn&#39;t contribute to algorithmic complexity, and I would expect it to have only a minor runtime effect (the CPython private heap is <i>very</i> good at allocating small lists/dicts etc, and re-uses a lot of memory)"}, {"owner": {"reputation": 43, "user_id": 11025107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Wwas.jpg?s=128&g=1", "display_name": "Grimm", "link": "https://stackoverflow.com/users/11025107/grimm"}, "edited": false, "score": 0, "creation_date": 1549487313, "post_id": 54562502, "comment_id": 95924020, "body": "Thanks so much! that makes so much sense."}, {"owner": {"reputation": 214708, "user_id": 201359, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7odj.jpg?s=128&g=1", "display_name": "&#211;scar L&#243;pez", "link": "https://stackoverflow.com/users/201359/%c3%93scar-l%c3%b3pez"}, "edited": false, "score": 0, "creation_date": 1549487542, "post_id": 54562502, "comment_id": 95924110, "body": "Yup, that sounds better :)"}], "tags": [], "owner": {"reputation": 214708, "user_id": 201359, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7odj.jpg?s=128&g=1", "display_name": "&#211;scar L&#243;pez", "link": "https://stackoverflow.com/users/201359/%c3%93scar-l%c3%b3pez"}, "is_accepted": true, "score": 5, "last_activity_date": 1549487849, "last_edit_date": 1549487849, "creation_date": 1549486924, "answer_id": 54562502, "question_id": 54562224, "link": "https://stackoverflow.com/questions/54562224/why-is-operator-much-slower-than-append-when-creating-a-list/54562502#54562502", "title": "Why is + operator much slower than append() when creating a list?", "body": "<p>When you use the <code>+</code> operator, you're creating a <em>new</em> list by concatenating the original list plus <em>another</em> one-element list (<code>[word]</code> in your case), and there's also the extra effort of copying all the elements from the original lists to the freshly allocated list. Inside a loop, this ends up being <code>O(n^2)</code> time complexity!</p>\n\n<p>By comparison, <code>append()</code> <em>modifies</em> the existing list by adding a new element to it, this is much cheaper and uses les memory, because under the hood the list had already allocated more space than needed to accommodate the current number of elements, and only when it's full will it actually grow to a new size, again with room to spare. Inside a loop, this is <code>O(n)</code> amortized time complexity, way better than the <code>O(n^2)</code> we obtain by using <code>+</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "is_accepted": false, "score": 2, "last_activity_date": 1549488130, "creation_date": 1549488130, "answer_id": 54562737, "question_id": 54562224, "link": "https://stackoverflow.com/questions/54562224/why-is-operator-much-slower-than-append-when-creating-a-list/54562737#54562737", "title": "Why is + operator much slower than append() when creating a list?", "body": "<p>When invoking <code>__add__</code> which is what <code>+</code> uses, the two objects being added need to be of the same <code>type</code>. Think <code>'a' + 1</code>, that would raise a <code>TypeError</code> because they are not the same thing.</p>\n\n<p>With <code>list</code>, <code>__add__</code> will need to ensure that whatever you are adding to the <code>list</code> is <em>also</em> of <code>list</code> type. By doing so, <code>cls.__add__(obj)</code> will force <code>obj = [obj]</code> to occur to facilitate the addition of two like objects. This creates a new list, and there is memory overhead attached to it.</p>\n\n<p>However, <code>append</code> effectively calls <code>self[len(self):] = obj</code>. This only modifies the original class and doesn't get any penalty for instantiation of a new <code>list</code>. </p>\n"}], "owner": {"reputation": 43, "user_id": 11025107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Wwas.jpg?s=128&g=1", "display_name": "Grimm", "link": "https://stackoverflow.com/users/11025107/grimm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 54562502, "answer_count": 3, "score": 4, "last_activity_date": 1549522956, "creation_date": 1549485643, "last_edit_date": 1549490505, "question_id": 54562224, "link": "https://stackoverflow.com/questions/54562224/why-is-operator-much-slower-than-append-when-creating-a-list", "title": "Why is + operator much slower than append() when creating a list?", "body": "<p>(I muddled up the question in the beginning, sorry lol long day.)\nI'm pretty much a beginner learning to code in python using the <em>thinkpython</em> pdf. One of the questions asked is to write a function to build a word list using <code>append</code> and <code>t = t+[x]</code>. According to my results, append is significantly faster, but I don't have a clue why.</p>\n\n<pre><code>import time\n\ndef appended_list():\n    fin = open('C:\\\\Users\\\\Grim\\\\Documents\\\\Python\\\\\\Docs\\\\words.txt','r')\n    wordlist=[]\n    for line in fin:\n        word = line.strip()\n        wordlist.append(word)\n    return wordlist\n\n\ndef added_list():\n    fin = open('C:\\\\Users\\\\Grim\\\\Documents\\\\Python\\\\\\Docs\\\\words.txt','r')\n    wordlist=[]\n    for line in fin:\n        word = line.strip()\n        wordlist= wordlist + [word]\n    return wordlist\n\nstart_t = time.time()\nprint(len(appended_list()))\nend_t = time.time() - start_t\nprint(end_t)\n\nstart_t = time.time()\nprint(len(added_list()))\nend_t = time.time() - start_t\nprint(end_t)\n</code></pre>\n\n<p>This is what gets printed:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>113809\n0.1512610912322998\n113809\n40.448301792144775\n</code></pre>\n"}, {"tags": ["python", "openssl", "certificate"], "answers": [{"comments": [{"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1549557158, "post_id": 54562897, "comment_id": 95953425, "body": "Did this answer your question?"}, {"owner": {"reputation": 21, "user_id": 8038826, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TEiBeO-YeSw/AAAAAAAAAAI/AAAAAAAAAPg/ICeH9z7tors/photo.jpg?sz=128", "display_name": "Michael Landeros", "link": "https://stackoverflow.com/users/8038826/michael-landeros"}, "edited": false, "score": 0, "creation_date": 1549557549, "post_id": 54562897, "comment_id": 95953659, "body": "I attempted to run your code to see if it works and I get back an error - &quot;AttributeError: &#39;module&#39; object has no attribute &#39;load_certificate&#39;. Can you tell me what version of your OpenSSL library is? I am thinking maybe I have an outdated or corrupted installation."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "reply_to_user": {"reputation": 21, "user_id": 8038826, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TEiBeO-YeSw/AAAAAAAAAAI/AAAAAAAAAPg/ICeH9z7tors/photo.jpg?sz=128", "display_name": "Michael Landeros", "link": "https://stackoverflow.com/users/8038826/michael-landeros"}, "edited": false, "score": 0, "creation_date": 1549557645, "post_id": 54562897, "comment_id": 95953719, "body": "Could you be more specific? What is the error? what is the certificate used?"}, {"owner": {"reputation": 21, "user_id": 8038826, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TEiBeO-YeSw/AAAAAAAAAAI/AAAAAAAAAPg/ICeH9z7tors/photo.jpg?sz=128", "display_name": "Michael Landeros", "link": "https://stackoverflow.com/users/8038826/michael-landeros"}, "edited": false, "score": 0, "creation_date": 1549558146, "post_id": 54562897, "comment_id": 95953993, "body": "I began running your code line by line and once I attempt to run this line: &quot;cert = crypto.load_certficate(crypto.FILETYPE_PEM, pem_text)&quot;, it errors with - \\cryptography\\utils.py&quot;, line 124, in <b>getattr</b>     obj = getattr(self._module, attr) AttributeError: &#39;module&#39; object has no attribute &#39;load_certficate&#39;"}, {"owner": {"reputation": 21, "user_id": 8038826, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TEiBeO-YeSw/AAAAAAAAAAI/AAAAAAAAAPg/ICeH9z7tors/photo.jpg?sz=128", "display_name": "Michael Landeros", "link": "https://stackoverflow.com/users/8038826/michael-landeros"}, "edited": false, "score": 0, "creation_date": 1549558205, "post_id": 54562897, "comment_id": 95954031, "body": "I am passing in the the content of my .crt file into the pem_text variable."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "reply_to_user": {"reputation": 21, "user_id": 8038826, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TEiBeO-YeSw/AAAAAAAAAAI/AAAAAAAAAPg/ICeH9z7tors/photo.jpg?sz=128", "display_name": "Michael Landeros", "link": "https://stackoverflow.com/users/8038826/michael-landeros"}, "edited": false, "score": 0, "creation_date": 1549559133, "post_id": 54562897, "comment_id": 95954629, "body": "What does <code>import cryptography;cryptography.__version__</code> output? I have <i>2.4.2</i>.. What <i>Python</i> version and <i>OS</i> are you using (these should have been specified in the question)?"}], "tags": [], "owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "is_accepted": false, "score": 0, "last_activity_date": 1549489393, "last_edit_date": 1549489393, "creation_date": 1549488967, "answer_id": 54562897, "question_id": 54562125, "link": "https://stackoverflow.com/questions/54562125/convert-pem-to-pfx-cert-type-using-a-python-library/54562897#54562897", "title": "Convert pem to pfx cert type using a python library", "body": "<p>You can use <a href=\"https://pypi.org/project/pyOpenSSL\" rel=\"nofollow noreferrer\">[PyPI]: pyOpenSSL</a>.</p>\n\n<p>I'll base my example on the certificate from <a href=\"https://stackoverflow.com/questions/16899247/how-can-i-decode-a-ssl-certificate-using-python\">[SO]: How can I decode a SSL certificate using python?</a>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/tjE5Y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tjE5Y.png\" alt=\"Img0\"></a></p>\n\n<p><em>code.py</em>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#!/usr/bin/env python3\n\nimport sys\nfrom OpenSSL import crypto\n\n\nIN_FILE = \"./in.crt\"\nOUT_FILE = \"./out.pfx\"\n\n\ndef main():\n    with open(IN_FILE, \"rb\") as fin:\n        pem_text = fin.read()\n    print(\"Input length: {:d}\".format(len(pem_text)))\n    cert = crypto.load_certificate(crypto.FILETYPE_PEM, pem_text)\n\n    print(\"CERTIFICATE DATA\\n    Serial: 0x{:X}\\n    Issuer: {:}\\n    Subject: {:}\\n    Not before: {:}\\n    Not after: {:}\".format(\n            cert.get_serial_number(), cert.get_issuer(), cert.get_subject(), cert.get_notBefore(), cert.get_notAfter()))\n    p12 = crypto.PKCS12()\n    p12.set_certificate(cert)\n    p12_text = p12.export()\n    print(\"Output length: {:d}\".format(len(p12_text)))\n    with open(OUT_FILE, \"wb\") as fout:\n        fout.write(p12_text)\n    print(\"Done.\")\n\n\nif __name__ == \"__main__\":\n    print(\"Python {:s} on {:s}\\n\".format(sys.version, sys.platform))\n    main()\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<blockquote>\n<pre><code>e:\\Work\\Dev\\StackOverflow\\q054562125&gt;\"e:\\Work\\Dev\\VEnvs\\py_064_03.06.08_test0\\Scripts\\python.exe\"  code.py\nPython 3.6.8 (tags/v3.6.8:3c6b436a57, Dec 24 2018, 00:16:47) [MSC v.1916 64 bit (AMD64)] on win32\n\nInput length: 2544\nCERTIFICATE DATA\n    Serial: 0xE77768A5D07F0E57959CA2A9D5082B5\n    Issuer: &lt;X509Name object '/C=US/O=DigiCert Inc/OU=www.digicert.com/CN=DigiCert High Assurance EV CA-1'&gt;\n    Subject: &lt;X509Name object '/businessCategory=Private Organization/jurisdictionC=US/jurisdictionST=California/serialNumber=C3268102/C=US/ST=California/L=San Francisco/O=GitHub, Inc./CN=github.com'&gt;\n    Not before: b'20110527000000Z'\n    Not after: b'20130729120000Z'\nOutput length: 2044\nDone.\n</code></pre>\n</blockquote>\n\n<p>And the <em>PFX</em> test (in <em>Cygwin</em> console):</p>\n\n<blockquote>\n<pre><code>[cfati@cfati-5510-0:/cygdrive/e/Work/Dev/StackOverflow/q054562125]&gt; ls\ncode.py  in.crt  out.pfx\n[cfati@cfati-5510-0:/cygdrive/e/Work/Dev/StackOverflow/q054562125]&gt; certutil -dumpPFX out.pfx\nVersion: 3\n    1.2.840.113549.1.7.1 PKCS 7 Data\n\nauthSafe count: 1\n----------------------------------------------------------------\nauthSafe[0]:\n    1.2.840.113549.1.7.6 PKCS 7 Encrypted\n    Version: 0\n    Content Type: 1.2.840.113549.1.7.1 PKCS 7 Data\n    Content Encryption Algorithm: 1.2.840.113549.1.12.1.3 szOID_PKCS_12_pbeWithSHA1And3KeyTripleDES\nAlgorithm Parameters:\n0000: 30 0e                                     ; SEQUENCE (e Bytes)\n0002:    04 08                                  ; OCTET_STRING (8 Bytes)\n0004:    |  d3 21 37 37 7a 70 e7 08                           ; .!77zp..\n000c:    02 02                                  ; INTEGER (2 Bytes)\n000e:       08 00\nDecrypted content:\n    bagId: 1.2.840.113549.1.12.10.1.3 szOID_PKCS_12_CERT_BAG\n    1.2.840.113549.1.9.22.1 szOID_PKCS_12_CERT_TYPE_X509\n================ Begin Nesting Level 1 ================\nSerial Number: 0e77768a5d07f0e57959ca2a9d5082b5\nIssuer: CN=DigiCert High Assurance EV CA-1, OU=www.digicert.com, O=DigiCert Inc, C=US\n NotBefore: 2011-05-27 02:00\n NotAfter: 2013-07-29 14:00\nSubject: CN=github.com, O=GitHub, Inc., L=San Francisco, S=California, C=US, SERIALNUMBER=C3268102, OID.1.3.6.1.4.1.311.60.2.1.2=California, OID.1.3.6.1.4.1.311.60.2.1.3=US, OID.2.5.4.15=Private Organization\nNon-root Certificate\nCert Hash(sha1): ce6799252cac78127d94b5622c31c516a6347353\n----------------  End Nesting Level 1  ----------------\n\n----------------------------------------------------------------\nHash Algorithm: 1.3.14.3.2.26 sha1 (sha1NoSign)\nMac:\n    8fe6e58f236fa353ff5c7375a35c0aab062ccee9\nSalt:\n    034c9198964b2ed2\nIteration count (Default): 1\nComputed Mac:\n    8fe6e58f236fa353ff5c7375a35c0aab062ccee9\nCertUtil: -dumpPFX command completed successfully.\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 21, "user_id": 8038826, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TEiBeO-YeSw/AAAAAAAAAAI/AAAAAAAAAPg/ICeH9z7tors/photo.jpg?sz=128", "display_name": "Michael Landeros", "link": "https://stackoverflow.com/users/8038826/michael-landeros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1222, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549489393, "creation_date": 1549485204, "question_id": 54562125, "link": "https://stackoverflow.com/questions/54562125/convert-pem-to-pfx-cert-type-using-a-python-library", "title": "Convert pem to pfx cert type using a python library", "body": "<p>I am still very new when it comes to python and I need a way to convert .pem certificate to a .pfx type.</p>\n\n<p>I found that there is an OpenSSL library for python and looked at the documentation but I did not see anything that showed me how to convert a certificate from type A to type B (let alone to a pfx type.) </p>\n\n<p>I did see how you can access the properties of a certificate, but that is not helping me. </p>\n\n<p>Does anyone have a good link or an example showing how this is done in python they can share? </p>\n"}, {"tags": ["python", "ssl-certificate"], "comments": [{"owner": {"reputation": 19728, "user_id": 929999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e38b941717ff6f519095ee81fcd09a7?s=128&d=identicon&r=PG", "display_name": "Torxed", "link": "https://stackoverflow.com/users/929999/torxed"}, "edited": false, "score": 0, "creation_date": 1549485260, "post_id": 54562113, "comment_id": 95923134, "body": "Sounds like you have a self signed certificate? Either get a proper one or accept self signed certificates in your request. Strangely enough tho, I don&#39;t get any certificate errors going towards that site o0"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10597469"}, "edited": false, "score": 0, "creation_date": 1549485577, "post_id": 54562113, "comment_id": 95923253, "body": "I had this same issue pop up some time ago regarding get requests to library repos using conda.  The problem turned out to be a corrupted install.  I had moved a file into another folder that I shouldn&#39;t have moved.  I uninstalled and reinstalled anaconda and my get requests went off without a hitch afterward.  Not saying it will work for sure but you might just try reinstalling your python distro.  It worked for me."}, {"owner": {"reputation": 29, "user_id": 5904896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c24d77299875d8d88609bd81416672bd?s=128&d=identicon&r=PG&f=1", "display_name": "ChzChz", "link": "https://stackoverflow.com/users/5904896/chzchz"}, "edited": false, "score": 0, "creation_date": 1549497857, "post_id": 54562113, "comment_id": 95927716, "body": "I&#39;ve just completely reinstalled python3.7.2 and I had same issue. I&#39;ve already had installation of last version of certifi. in venv folder."}], "answers": [{"tags": [], "owner": {"reputation": 307, "user_id": 9874536, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/97o6b.png?s=128&g=1", "display_name": "0x78f1935", "link": "https://stackoverflow.com/users/9874536/0x78f1935"}, "is_accepted": false, "score": 0, "last_activity_date": 1549487262, "creation_date": 1549487262, "answer_id": 54562574, "question_id": 54562113, "link": "https://stackoverflow.com/questions/54562113/cant-receive-data-from-particular-website-via-python-ssl-error/54562574#54562574", "title": "Can&#39;t receive data from particular website via python, SSL error", "body": "<p>You are trying to connect to a website which uses SSL. You can recognize this from the url.\n\"https\", Note the s at the end. This is a indication the website uses a certificate.</p>\n\n<p>Most likely when you send a <code>user agent</code> with your request you are good to go.\nMore information can be found <a href=\"https://stackoverflow.com/questions/10606133/sending-user-agent-using-requests-library-in-python\">here</a>. This could fix your problem.</p>\n"}], "owner": {"reputation": 29, "user_id": 5904896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c24d77299875d8d88609bd81416672bd?s=128&d=identicon&r=PG&f=1", "display_name": "ChzChz", "link": "https://stackoverflow.com/users/5904896/chzchz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549487262, "creation_date": 1549485156, "last_edit_date": 1549485226, "question_id": 54562113, "link": "https://stackoverflow.com/questions/54562113/cant-receive-data-from-particular-website-via-python-ssl-error", "title": "Can&#39;t receive data from particular website via python, SSL error", "body": "<p>I try to make response using a particular link. <code>https://www.fastwin.io:9873/getEnvelopeRank</code>\nBut got bogged down with problem. </p>\n\n<p>When I try to make request through the browser I get normal response. But if I try to make request through <code>requests</code> lib I will get </p>\n\n<pre><code>ssl.SSLCertVerificationError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:1056)\n</code></pre>\n\n<p>requests to other sites work fine.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import requests\n\nresponse = requests.get(\"https://www.fastwin.io:9873/getEnvelopeRank\")\n\nprint(response.text)\n\n</code></pre>\n"}, {"tags": ["python", "tkinter", "listbox", "window", "python-2.x"], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 4131446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b57f30ad85f5af3432cdb583504d3f64?s=128&d=identicon&r=PG&f=1", "display_name": "Fred", "link": "https://stackoverflow.com/users/4131446/fred"}, "edited": false, "score": 0, "creation_date": 1549572191, "post_id": 54564615, "comment_id": 95960878, "body": "martineau thanks for your response.  In looking at the import of &quot;T&quot;kinter versus &quot;t&quot;kinter, &quot;Tkinter&quot; is python 2, &quot;tkinter is python 3.  Not using python 2.  That might be a problem if python 3 doesn&#39;t function the same as python 2.  Otherwise I replicated your code but the same problem presists with one exception. Placing the root.withdraw() statement at the bottom prevents the window with the data from presented.  Further ideas?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 39, "user_id": 4131446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b57f30ad85f5af3432cdb583504d3f64?s=128&d=identicon&r=PG&f=1", "display_name": "Fred", "link": "https://stackoverflow.com/users/4131446/fred"}, "edited": false, "score": 0, "creation_date": 1549573090, "post_id": 54564615, "comment_id": 95961272, "body": "Doubt it&#39;s a Python 2 vs 3 issue because other than how things are <code>import</code>ed there are virtually no differences in using the module or what it does. Note however that I also made modifications to the <code>ListBoxChoice</code> class\u2014in other words more was done than simply adding a <code>root.withdraw()</code>."}, {"owner": {"reputation": 39, "user_id": 4131446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b57f30ad85f5af3432cdb583504d3f64?s=128&d=identicon&r=PG&f=1", "display_name": "Fred", "link": "https://stackoverflow.com/users/4131446/fred"}, "edited": false, "score": 0, "creation_date": 1549656616, "post_id": 54564615, "comment_id": 95995379, "body": "martineau - yes, I saw and implemented the changes you refer to within the class.  There are still 2 windows presented initially.  The window providing the listbox (data) is closed after the value is selected. However, the root window (I believe) is still there (nothing on it).  Once that closes (close the window), the program resumes and does what its supposed to do."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 39, "user_id": 4131446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b57f30ad85f5af3432cdb583504d3f64?s=128&d=identicon&r=PG&f=1", "display_name": "Fred", "link": "https://stackoverflow.com/users/4131446/fred"}, "edited": false, "score": 0, "creation_date": 1549656930, "post_id": 54564615, "comment_id": 95995517, "body": "Hmm, well, it sounds like it&#39;s either an OS difference (I&#39;m using Windows) or it&#39;s because I&#39;m running the code standalone\u2014not as part of some other processing as you appear to doing."}, {"owner": {"reputation": 39, "user_id": 4131446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b57f30ad85f5af3432cdb583504d3f64?s=128&d=identicon&r=PG&f=1", "display_name": "Fred", "link": "https://stackoverflow.com/users/4131446/fred"}, "edited": false, "score": 0, "creation_date": 1549668057, "post_id": 54564615, "comment_id": 95999332, "body": "Yeah I think so.  I&#39;m using Linux (red hat 7.5) and I&#39;m interfacing to it importing the class then calling it.  When I run it in stand-alone it does as you indicated.  Unfortunately, I need to interface with it from may places I was hoping this could be a basic tool that others could use. Not sure now.  If you have other ideas I would be most interested."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 39, "user_id": 4131446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b57f30ad85f5af3432cdb583504d3f64?s=128&d=identicon&r=PG&f=1", "display_name": "Fred", "link": "https://stackoverflow.com/users/4131446/fred"}, "edited": false, "score": 0, "creation_date": 1549671725, "post_id": 54564615, "comment_id": 96000138, "body": "Have modified my answer a bit so it could be used in a manner similar to that and it still works for me\u2014but take a look and see if there&#39;s some difference I missing. Note there&#39;s was a typo in how the the Tkinter <code>import</code>ing was being done, which I didn&#39;t notice before, but I doubt that was the cause of the different behavior you&#39;re describing."}, {"owner": {"reputation": 39, "user_id": 4131446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b57f30ad85f5af3432cdb583504d3f64?s=128&d=identicon&r=PG&f=1", "display_name": "Fred", "link": "https://stackoverflow.com/users/4131446/fred"}, "edited": false, "score": 0, "creation_date": 1549749862, "post_id": 54564615, "comment_id": 96016840, "body": "Martineau, I took the changes and reviewed my code and tweaked it some but yes now its working as planned.  1 window, select an item from the list and the box closes after the choice is made and code is returned to the calling program.  It seems the root window {root = tk.Tk()} followed by {root.withdraw()} before calling theListBoxChoice and the {root.wait_window()} is not necessary."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 39, "user_id": 4131446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b57f30ad85f5af3432cdb583504d3f64?s=128&d=identicon&r=PG&f=1", "display_name": "Fred", "link": "https://stackoverflow.com/users/4131446/fred"}, "edited": false, "score": 0, "creation_date": 1549752364, "post_id": 54564615, "comment_id": 96017383, "body": "That&#39;s good to hear. If used from another tkinter app with its own window, you shouldn&#39;t call <code>Tk()</code> again (more than once is a no-no), nor would you generally need (or want) to do a <code>root.withdraw()</code>."}], "tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": true, "score": 0, "last_activity_date": 1549671300, "last_edit_date": 1549671300, "creation_date": 1549499034, "answer_id": 54564615, "question_id": 54562100, "link": "https://stackoverflow.com/questions/54562100/cant-close-tkinter-root-window-after-modalpane-closed/54564615#54564615", "title": "Can&#39;t close tkinter root window after modalPane closed", "body": "<p>Slightly updated</p>\n\n<p>Here's a version of the <code>ListBoxChoice</code> class which I think works the way you desire. I've updated my previous answer slightly so the class is now defined in a separate module named <code>listboxchoice.py</code>. This didn't change anything I could see when I tested\u2014it other words it still seems to work\u2014but I wanted to more closely simulate the way you said you're using it the comments.</p>\n\n<p>It still uses <code>wait_window()</code> because doing so is <em>required</em> to give tkinter's mandatory event-processing-loop the opportunity to run (since <code>mainloop()</code> isn't called anywhere). There's some good background material in the article <a href=\"http://effbot.org/tkinterbook/tkinter-dialog-windows.htm\" rel=\"nofollow noreferrer\">Dialog Windows</a> about programming tkiner dialogs you might find useful. The added <code>root.withdraw()</code> call eliminates the issue of not being able to close it because it's not there. This is fine since there's no need to have the empty window being displayed anyway.</p>\n\n<h3><code>test_lbc.py</code></h3>\n\n<pre><code>import random\ntry:\n    import Tkinter as tk  # Python 2\nexcept ModuleNotFoundError:\n    import tkinter as tk  # Python 3\nfrom listboxchoice import ListBoxChoice\n\n\nroot = tk.Tk()\nroot.withdraw()  # Hide root window.\n\nvalues = [random.randint(1, 100) for _ in range(50)]\nchoice = None\n\nwhile choice is None:\n    choice = ListBoxChoice(root, \"Number Picking\",\n                           \"Pick one of these crazy random numbers\",\n                           values).returnValue()\nprint('choice: {}'.format(choice))\n</code></pre>\n\n<h3><code>listboxchoice.py</code></h3>\n\n<pre><code>\"\"\" ListBoxChoice widget to display a list of values and allow user to\n    choose one of them.\n\"\"\"\ntry:\n    import Tkinter as tk  # Python 2\nexcept ModuleNotFoundError:\n    import tkinter as tk  # Python 3\n\n\nclass ListBoxChoice(object):\n    def __init__(self, master=None, title=None, message=None, values=None):\n        self.master = master\n        self.value = None\n        if values is None:  # Avoid use of mutable default argument value.\n            raise RuntimeError('No values argument provided.')\n        self.values = values[:]  # Create copy.\n\n        self.modalPane = tk.Toplevel(self.master, takefocus=True)\n        self.modalPane.bind(\"&lt;Return&gt;\", self._choose)\n        self.modalPane.bind(\"&lt;Escape&gt;\", self._cancel)\n\n        if title:\n            self.modalPane.title(title)\n\n        if message:\n            tk.Label(self.modalPane, text=message).pack(padx=5, pady=5)\n\n        listFrame = tk.Frame(self.modalPane)\n        listFrame.pack(side=tk.TOP, padx=5, pady=5)\n\n        scrollBar = tk.Scrollbar(listFrame)\n        scrollBar.pack(side=tk.RIGHT, fill=tk.Y)\n\n        # Get length the largest value in 'values'.\n        widthOfList = max(len(str(value)) for value in values)\n        widthOfList += 2  # Add some padding.\n\n        self.listBox = tk.Listbox(listFrame, selectmode=tk.SINGLE, width=widthOfList)\n\n        self.listBox.pack(side=tk.LEFT, fill=tk.Y)\n        scrollBar.config(command=self.listBox.yview)\n\n        self.listBox.config(yscrollcommand=scrollBar.set)\n        self.values.sort()\n\n        for item in self.values:\n            self.listBox.insert(tk.END, item)\n\n        buttonFrame = tk.Frame(self.modalPane)\n        buttonFrame.pack(side=tk.BOTTOM)\n\n        chooseButton = tk.Button(buttonFrame, text=\"Choose\", command=self._choose)\n        chooseButton.pack()\n\n        cancelButton = tk.Button(buttonFrame, text=\"Cancel\", command=self._cancel)\n        cancelButton.pack(side=tk.RIGHT)\n\n    def _choose(self, event=None):\n        try:\n            firstIndex = self.listBox.curselection()[0]\n            self.value = self.values[int(firstIndex)]\n        except IndexError:\n            self.value = None\n        self.modalPane.destroy()\n\n    def _cancel(self, event=None):\n        self.modalPane.destroy()\n\n    def returnValue(self):\n        self.master.wait_window(self.modalPane)\n        return self.value\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 4131446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b57f30ad85f5af3432cdb583504d3f64?s=128&d=identicon&r=PG&f=1", "display_name": "Fred", "link": "https://stackoverflow.com/users/4131446/fred"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 54564615, "answer_count": 1, "score": 1, "last_activity_date": 1549671300, "creation_date": 1549485107, "last_edit_date": 1549492111, "question_id": 54562100, "link": "https://stackoverflow.com/questions/54562100/cant-close-tkinter-root-window-after-modalpane-closed", "title": "Can&#39;t close tkinter root window after modalPane closed", "body": "<p>I've cloned a class called <code>ListBoxChoice</code> found on the web found (adding some needed features) below:</p>\n\n<pre><code>from Tkinter import *\n\nclass ListBoxChoice(object):\n    def __init__(self, master=None, title=None, message=None,\\\n                 list=[]):\n    self.master = master\n    self.value = None\n    self.list = list[:]\n\n    self.modalPane = Toplevel(self.master)\n\n    self.modalPane.transient(self.master)\n    self.modalPane.grab_set()\n\n    self.modalPane.bind(\"&lt;Return&gt;\", self._choose)\n    self.modalPane.bind(\"&lt;Escape&gt;\", self._cancel)\n\n    if title:\n        self.modalPane.title(title)\n\n    if message:\n        Label(self.modalPane, text=message).pack(padx=5, pady=5)\n\n    listFrame = Frame(self.modalPane)\n    listFrame.pack(side=TOP, padx=5, pady=5)\n\n    scrollBar = Scrollbar(listFrame)\n    scrollBar.pack(side=RIGHT, fill=Y)\n\n    # get the largest value of the 'list' to set the width\n    widthOfList = 0\n    for k in list:\n        if len(str(k)) &gt; widthOfList:\n            widthOfList = len(str(k))\n\n    # now pad some space to back of the widthOfList\n    widthOfList = widthOfList + 2\n\n    self.listBox = Listbox(listFrame, selectmode=SINGLE,\\\n                   width=widthOfList)\n\n    self.listBox.pack(side=LEFT, fill=Y)\n    scrollBar.config(command=self.listBox.yview)\n\n    self.listBox.config(yscrollcommand=scrollBar.set)\n    self.list.sort()\n\n    for item in self.list:\n        self.listBox.insert(END, item)\n\n    buttonFrame = Frame(self.modalPane)\n    buttonFrame.pack(side=BOTTOM)\n\n    chooseButton = Button(buttonFrame, text=\"Choose\",\\\n                   command=self._choose)\n    chooseButton.pack()\n\n    cancelButton = Button(buttonFrame, text=\"Cancel\",\\\n                   command=self._cancel)\n    cancelButton.pack(side=RIGHT)\n\n    def _choose(self, event=None):\n        try:\n            firstIndex = self.listBox.curselection()[0]\n            self.value = self.list[int(firstIndex)]\n        except IndexError:\n            self.value = None\n        self.modalPane.destroy()\n\n    def _cancel(self, event=None):\n        self.modalPane.destroy()\n\n    def returnValue(self):\n        self.master.wait_window(self.modalPane)\n        return self.value\n\nif __name__ == '__main__':\n    import random\n    root = Tk()\n\n    returnValue = True\n    list = [random.randint(1,100) for x in range(50)]\n    while returnValue:\n        returnValue = ListBoxChoice(root, \"Number Picking\",\\\n                     \"Pick one of these crazy random numbers\",\\\n                     list).returnValue()\n        print returnValue\n</code></pre>\n\n<p>Now this example says to do something like this:<br />\n<code>results = ListBoxChoice(root, list=listOfItems).returnValue()</code>.</p>\n\n<p>What I'm trying to do is provide a list of values from which the user selects a single value.  The window should close before I use the results from the selected value. Here is that code:</p>\n\n<pre><code>from tkinter import Tk, Label\nform ListBoxChoice import ListBoxChoice\n...\neventList = [\"20190120\",\"20190127\",\"20190203\"]\nroot = Tk()\nroot.withdraw() # This causes the ListBoxChoice object not to appear\nselectValue = ListBoxChoice(root, title=\"Event\",\\\n              message=\"Pick Event\", list=eventList).returnValue()\nroot.wait_window() # Modal Pane/window closes but not the root\nprint(\"selectValue:\", selectValue)\n</code></pre>\n\n<p>A <code>root</code> window is placed behind the <code>modalPane</code> (<code>Toplevel</code>).  I have to close that window before the calling process continues.  So there is a block in place.</p>\n\n<p>I've tried to put a <code>sleep(1.01)</code> command above but had no impact.\nHow do I get the <code>ListBoxChoice</code> to close once the selection has been made\nbefore my <code>print</code> statement of the <code>selectValue</code>?  For it is at that point I want to use the results to plot data.</p>\n\n<p>If I don't use <code>root.wait_winow()</code>, it is only when the plot is closed (end of the process) that the <code>ListBoxChoice</code> box close as well.</p>\n\n<p>Suggestions?</p>\n"}, {"tags": ["python", "xml", "lxml"], "comments": [{"owner": {"reputation": 2341, "user_id": 2188467, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/68085543cab0d93a5955c41b551754ed?s=128&d=identicon&r=PG&f=1", "display_name": "Christos Papoulas", "link": "https://stackoverflow.com/users/2188467/christos-papoulas"}, "edited": false, "score": 0, "creation_date": 1550063795, "post_id": 54562097, "comment_id": 96132004, "body": "You can process the file as a <i>data file</i> and not an xml file, then you can remove the tag you want and finally store the new file."}], "owner": {"reputation": 2801, "user_id": 2489914, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/jJ44e.png?s=128&g=1", "display_name": "funky-future", "link": "https://stackoverflow.com/users/2489914/funky-future"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1549522616, "creation_date": 1549485099, "last_edit_date": 1549522616, "question_id": 54562097, "link": "https://stackoverflow.com/questions/54562097/can-one-remove-lxml-libxml2-elements-that-appear-before-the-root-of-a-document", "title": "Can one remove lxml / libxml2 elements that appear before the root of a document without copying the whole tree?", "body": "<p>With lxml's API it's possible to access preliminary elements before the root such as processing instructions and comments by querying the sibling (and its siblings in turn) of the root element:</p>\n\n<pre><code>&gt;&gt;&gt; buffer = StringIO('&lt;?xml version=\"1.0\" ?&gt;&lt;?PI foo?&gt;&lt;root/&gt;')\n&gt;&gt;&gt; doc = etree.parse(buffer)\n&gt;&gt;&gt; root = doc.getroot()\n&gt;&gt;&gt; pi = root.getprevious()\n&gt;&gt;&gt; str(pi)\n'&lt;?PI foo?&gt;'\n</code></pre>\n\n<p>In order to remove an element from a document however there must be a parent element involved:</p>\n\n<pre><code>parent.remove(child)\n</code></pre>\n\n<p>Apparently there's no parent available for that processing instruction element. I could deepcopy the root to get another tree without the previous siblings, but this is obviously not a preferable solution. Does anyone know a solution to achieve such removal that doesn't require an explaining comment in the code? (Shifting the explanation to a function name wouldn't count as an answer.)</p>\n"}, {"tags": ["python", "gis", "geopandas"], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 10924879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bfd392d76de584ce8869bea9e737768?s=128&d=identicon&r=PG&f=1", "display_name": "pngbrianb", "link": "https://stackoverflow.com/users/10924879/pngbrianb"}, "edited": false, "score": 0, "creation_date": 1549563815, "post_id": 54563846, "comment_id": 95957011, "body": "Thanks! This will give me a good start. I&#39;ve run into other issues that merit their own Questions, but once I get things rolling this will be a much better path forward than what I was doing."}, {"owner": {"reputation": 123, "user_id": 10924879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bfd392d76de584ce8869bea9e737768?s=128&d=identicon&r=PG&f=1", "display_name": "pngbrianb", "link": "https://stackoverflow.com/users/10924879/pngbrianb"}, "edited": false, "score": 0, "creation_date": 1549755849, "post_id": 54563846, "comment_id": 96018144, "body": "Follow-up: now I&#39;m trying to do stuff from GeoDataFrames with lots of <i>rows</i> instead of layers... things got complicated. That question&#39;s over here <a href=\"https://gis.stackexchange.com/questions/311646/how-to-make-a-map-based-on-how-many-layers-overlap-at-each-point-in-python\" title=\"how to make a map based on how many layers overlap at each point in python\">gis.stackexchange.com/questions/311646/&hellip;</a> if you have any ideas for it... Thanks again!"}], "tags": [], "owner": {"reputation": 3413, "user_id": 9978945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4931863323a8c30fa086d61604053db8?s=128&d=identicon&r=PG&f=1", "display_name": "martinfleis", "link": "https://stackoverflow.com/users/9978945/martinfleis"}, "is_accepted": true, "score": 11, "last_activity_date": 1549494372, "last_edit_date": 1549494372, "creation_date": 1549493863, "answer_id": 54563846, "question_id": 54562069, "link": "https://stackoverflow.com/questions/54562069/multi-layer-gdb-files-in-python/54563846#54563846", "title": "Multi-Layer .gdb files in Python?", "body": "<p>Yes, GeoPandas support layers. As names of your layers are terribly long, I recommend using the order of layers.</p>\n\n<pre><code>mallard_0 = gpd.read_file('./bird-species/E00039600_mallard.gdb/', layer=0)\nmallard_1 = gpd.read_file('./bird-species/E00039600_mallard.gdb/', layer=1)\n\n# geopandas included map, filtered to just this hemisphere\nworld = gpd.read_file(gpd.datasets.get_path('naturalearth_lowres'))\nwesthem = world[(world['continent'] == 'North America') | \n                (world['continent'] == 'South America')]\n\n# making sure the coordinates line up:\nmallard_0 = mallard_0.to_crs(world.crs)\nmallard_1 = mallard_1.to_crs(world.crs)\n\n# establishing figure axes\nbase = westhem.plot(color='white', edgecolor='black', figsize=(11, 11))\n\n# cmap because I'd LIKE the multiple layers to exist\nmallard_0.plot(ax=base, color='red', alpha=.5)\nmallard_1.plot(ax=base, color='blue', alpha=.5)\n</code></pre>\n\n<p>If you have more of them you can then make a loop to go plot them all at once easily.\n<a href=\"https://i.stack.imgur.com/z4sIm.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/z4sIm.png\" alt=\"result of the script above\"></a></p>\n\n<p>Edit: Geopandas is using Fiona under the hood for file handling, so if you want to see the list of your layers use </p>\n\n<pre><code>import fiona\nfiona.listlayers('./bird-species/E00039600_mallard.gdb')\n</code></pre>\n\n<p>Edit2: Loop over all layers will then look like this:</p>\n\n<pre><code>import fiona\n\n# geopandas included map, filtered to just this hemisphere\nworld = gpd.read_file(gpd.datasets.get_path('naturalearth_lowres'))\nwesthem = world[(world['continent'] == 'North America') | \n                (world['continent'] == 'South America')]\nbase = westhem.plot(color='white', edgecolor='black', figsize=(11, 11))\n\nlayers = fiona.listlayers('./bird-species/E00039600_mallard.gdb')\n\nfor l in layers:\n    mallard = gpd.read_file('./bird-species/E00039600_mallard.gdb', layer=l)\n    mallard = mallard.to_crs(world.crs)\n    mallard.plot(ax=base, color='red', alpha=.1)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/0FaDR.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/0FaDR.png\" alt=\"second example using loop\"></a></p>\n"}], "owner": {"reputation": 123, "user_id": 10924879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bfd392d76de584ce8869bea9e737768?s=128&d=identicon&r=PG&f=1", "display_name": "pngbrianb", "link": "https://stackoverflow.com/users/10924879/pngbrianb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2893, "favorite_count": 2, "accepted_answer_id": 54563846, "answer_count": 1, "score": 10, "last_activity_date": 1549494372, "creation_date": 1549485005, "question_id": 54562069, "link": "https://stackoverflow.com/questions/54562069/multi-layer-gdb-files-in-python", "title": "Multi-Layer .gdb files in Python?", "body": "<p>I'm trying to read in some .gdb files(folders?) from <a href=\"https://www.sciencebase.gov/catalog/item/55897deae4b0b6d21dd61c9d\" rel=\"noreferrer\">here</a>: .</p>\n\n<p>I use GeoPandas and do the following:</p>\n\n<pre><code># file from local path\nmallard = gpd.read_file('./bird-species/E00039600_mallard.gdb/')\n# geopandas included map, filtered to just this hemisphere\nworld = gpd.read_file(gpd.datasets.get_path('naturalearth_lowres'))\nwesthem = world[(world['continent'] == 'North America') | \n                (world['continent'] == 'South America')]\n\n# making sure the coordinates line up:\nmallard = mallard.to_crs(world.crs)\n\n#establishing figure axes\nbase = westhem.plot(color='white', edgecolor='black',figsize=(11,11))\n\n# cmap because I'd LIKE the multiple layers to exist\nbbw_duck.plot(ax=base, cmap = 'Reds');\n</code></pre>\n\n<p>The output looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/XKTWI.png\" rel=\"noreferrer\">lousy map - one color</a></p>\n\n<p>Is there a way in GeoPandas, or Python (Jupyter Notebook) in general to see all the layers?</p>\n"}, {"tags": ["python", "pandas", "jython-2.7"], "answers": [{"comments": [{"owner": {"reputation": 104, "user_id": 8865538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/567d2ea5100aa63bdc6384aa9bbba72b?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Trivedi", "link": "https://stackoverflow.com/users/8865538/rahul-trivedi"}, "edited": false, "score": 0, "creation_date": 1549493592, "post_id": 54562415, "comment_id": 95926454, "body": "Thanks a lot @Scott for your prompt help :)"}, {"owner": {"reputation": 104, "user_id": 8865538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/567d2ea5100aa63bdc6384aa9bbba72b?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Trivedi", "link": "https://stackoverflow.com/users/8865538/rahul-trivedi"}, "edited": false, "score": 0, "creation_date": 1549493691, "post_id": 54562415, "comment_id": 95926485, "body": "only I used list comprehension for <code>list</code> type data <code>result=[{&#39;cluster_name&#39;:row[&#39;cluster_name&#39;],&#39;pool_name&#39;:row[&zwnj;&#8203;&#39;pool_name&#39;]} for index, row in s.iterrows()]</code>"}], "tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 1, "last_activity_date": 1549486527, "creation_date": 1549486527, "answer_id": 54562415, "question_id": 54562066, "link": "https://stackoverflow.com/questions/54562066/python-csv-grouped-columns-to-list-of-dict-of-mixed-elements/54562415#54562415", "title": "Python CSV Grouped Columns to list of dict of mixed elements", "body": "<p>Try:</p>\n\n<pre><code>from io import StringIO\nimport pandas as pd\n\ncsvfile = StringIO(\"\"\"cluster_name,pool_name,min,max,inactive_time,description,action\nClst1,WebContainer,25,25,60000,Revisit,modify\nClst3,WebContainer,50,50,60000,revisit,modify\nClst6,WebContainer,50,50,60000,revisit,modify\nClst1,ORB.thread.pool,,,,,delete\nClst3,ORB.thread.pool,,,,,delete\"\"\")\n\ndf = pd.read_csv(csvfile)\n\ns = df.set_index(['cluster_name']).apply(tuple, axis=1).rename('pool_name').groupby(level=0).agg(list).reset_index()\n\ns.to_json(orient='records')\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[{\"cluster_name\":\"Clst1\",\"pool_name\":[[\"WebContainer\",25.0,25.0,60000.0,\"Revisit\",\"modify\"],[\"ORB.thread.pool\",null,null,null,null,\"delete\"]]},{\"cluster_name\":\"Clst3\",\"pool_name\":[[\"WebContainer\",50.0,50.0,60000.0,\"revisit\",\"modify\"],[\"ORB.thread.pool\",null,null,null,null,\"delete\"]]},{\"cluster_name\":\"Clst6\",\"pool_name\":[[\"WebContainer\",50.0,50.0,60000.0,\"revisit\",\"modify\"]]}]\n</code></pre>\n"}], "owner": {"reputation": 104, "user_id": 8865538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/567d2ea5100aa63bdc6384aa9bbba72b?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Trivedi", "link": "https://stackoverflow.com/users/8865538/rahul-trivedi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 54562415, "answer_count": 1, "score": 0, "last_activity_date": 1549486527, "creation_date": 1549484996, "question_id": 54562066, "link": "https://stackoverflow.com/questions/54562066/python-csv-grouped-columns-to-list-of-dict-of-mixed-elements", "title": "Python CSV Grouped Columns to list of dict of mixed elements", "body": "<p>I am working on one jython script for websphere which would accept <code>sys.argv</code> as <code>list of dict</code> to perform further process-</p>\n\n<p>I need help in converting CSV data to list of dictionary mixed of list of tuples as below-</p>\n\n<p>Input CSV-</p>\n\n<pre><code>cluster_name,pool_name,min,max,inactive_time,description,action\nClst1,WebContainer,25,25,60000,Revisit,modify\nClst3,WebContainer,50,50,60000,revisit,modify\nClst6,WebContainer,50,50,60000,revisit,modify\nClst1,ORB.thread.pool,,,,,delete\nClst3,ORB.thread.pool,,,,,delete`\n</code></pre>\n\n<p>I am trying to achieve using pandas to group columns but unable to create mixed  element dict</p>\n\n<p>Need below object (list of dict of mixed elements)</p>\n\n<pre><code>[\n {cluster_name:'Clst1',\n  pool_name:[\n         (WebContainer,25,25,60000,Revisit,modify),\n         (ORB.thread.pool,,,,,delete)]},\n {cluster_name:'Clst3',\n  pool_name:[\n         (WebContainer,50,50,60000,revisit,modify), \n         (ORB.thread.pool,,,,,delete)]},\n {cluster_name:'Clst6',\n  pool_name:[\n         (WebContainer,50,50,60000,revisit,modify)\n        ]}\n]\n</code></pre>\n\n<p>So that I can use this object as sys.argv to jython script.</p>\n"}, {"tags": ["python", "multithreading", "daemon", "freeze"], "comments": [{"owner": {"reputation": 2557, "user_id": 6688801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45ca691d8f8dbd1db658fadff05127ad?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/6688801/martin"}, "edited": false, "score": 0, "creation_date": 1549489508, "post_id": 54561988, "comment_id": 95924935, "body": "If your question has been answered, please make sure to accept an answer for further references."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10370752, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ogHJ9eIn-Wg/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNFYGNwEsw6fLLUGNhOlDSLRhJo1g/mo/photo.jpg?sz=128", "display_name": "Mrky", "link": "https://stackoverflow.com/users/10370752/mrky"}, "edited": false, "score": 0, "creation_date": 1549488602, "post_id": 54562112, "comment_id": 95924564, "body": "Ohh, thanks for the clarification. What do you use for testing py scripts on Windows? Win command prompt?"}, {"owner": {"reputation": 2557, "user_id": 6688801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45ca691d8f8dbd1db658fadff05127ad?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/6688801/martin"}, "reply_to_user": {"reputation": 3, "user_id": 10370752, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ogHJ9eIn-Wg/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNFYGNwEsw6fLLUGNhOlDSLRhJo1g/mo/photo.jpg?sz=128", "display_name": "Mrky", "link": "https://stackoverflow.com/users/10370752/mrky"}, "edited": false, "score": 0, "creation_date": 1549488823, "post_id": 54562112, "comment_id": 95924648, "body": "Depends on application. for scripting IDLE, for GUI (kivy) command prompt. Both can be done in PyCharm or Visual Code IDE."}], "tags": [], "owner": {"reputation": 2557, "user_id": 6688801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45ca691d8f8dbd1db658fadff05127ad?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/6688801/martin"}, "is_accepted": true, "score": 0, "last_activity_date": 1549485476, "last_edit_date": 1549485476, "creation_date": 1549485154, "answer_id": 54562112, "question_id": 54561988, "link": "https://stackoverflow.com/questions/54561988/why-dont-these-daemon-threads-get-killed/54562112#54562112", "title": "Why don&#39;t these daemon threads get killed?", "body": "<p>They do, but not in your IDLE.</p>\n\n<p>Running things in your IDLE is not something you should rely on. What matters is your command prompt. For example, you cant really use Multiprocessing library with your IDLE. </p>\n\n<p>As far as your IDLE is concerned, I believe the threads continiue, because in shell(IDLE), you dont actually finish your script/program. The very fact you can add new commands, shows, your program is still running - in a form of waiting for your next input.</p>\n\n<p><strong>Shell is like program with (see below) at the end of your script</strong></p>\n\n<pre><code>while True:\n    exec(raw_input('&gt;&gt;&gt; '))\n</code></pre>\n\n<p>That means, your main thread is still running and so whether you set daemon true or false doesnt matter</p>\n\n<p>If you want to see for yourself, add after your print</p>\n\n<pre><code>exit(0)\n</code></pre>\n\n<p>and see what happens</p>\n\n<p><a href=\"https://i.stack.imgur.com/DwodF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DwodF.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 3, "user_id": 10370752, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ogHJ9eIn-Wg/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNFYGNwEsw6fLLUGNhOlDSLRhJo1g/mo/photo.jpg?sz=128", "display_name": "Mrky", "link": "https://stackoverflow.com/users/10370752/mrky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 54562112, "answer_count": 1, "score": 0, "last_activity_date": 1549485476, "creation_date": 1549484691, "question_id": 54561988, "link": "https://stackoverflow.com/questions/54561988/why-dont-these-daemon-threads-get-killed", "title": "Why don&#39;t these daemon threads get killed?", "body": "<p>I was learning about sharing data between threads and I stumbled upon this different problem. As far as I understand, daemon threads are killed upon completion of main thread. The simple code is below:</p>\n\n<pre><code>import threading\nfrom time import sleep\n\ndef thread(Nr):\n    global x\n    lock.acquire()\n    x = Nr\n    print(x)\n    sleep(4)\n    print(x)\n    lock.release()\n\n    return 0\n\n#################################################################################\n\nx = 2\nlock = threading.Lock()\n\nfor i in range(6):\n    #print(\"Thread Nr: \", i)\n    arg1 = i\n    t = threading.Thread(target = thread, args = (arg1,), name = arg1)\n    t.setDaemon(True)\n    print(\"new thread started : %s\" % (str(threading.current_thread().ident)))    \n    t.start()\n    sleep(1)\n\nprint(\"Main thread end\")\n</code></pre>\n\n<p>I'm starting 6 threads and this is my output in IDLE python 3.7.2:</p>\n\n<pre><code>new thread started : 940\n0\nnew thread started : 940\nnew thread started : 940\nnew thread started : 940\nnew thread started : 9400\n\n1\nnew thread started : 940\nMain thread end\n&gt;&gt;&gt; 1\n2\n2\n3\n3\n4\n4\n5\n5\n</code></pre>\n\n<p>So, as you can see the threads continue to run after the main thread even if they are deamonic. One interesting thing I discovered is that <strong>they dont print anything after \"Main thread end\" if they are run from windows cmd instead of IDLE.</strong></p>\n\n<p>Does anyone know what is happening here? </p>\n\n<p>Thanks :)</p>\n"}, {"tags": ["python", "numpy", "python-imaging-library"], "comments": [{"owner": {"reputation": 5007, "user_id": 10924296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483c21a8a3f03bbf92cb99539ec97dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Reedinationer", "link": "https://stackoverflow.com/users/10924296/reedinationer"}, "edited": false, "score": 0, "creation_date": 1549484723, "post_id": 54561953, "comment_id": 95922879, "body": "try doing a <code>print(type(printscreen))</code> right above <code>printscreen = Image.fromarray(printscreen)</code> to ensure it is the correct type"}, {"owner": {"reputation": 31, "user_id": 10107705, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4dlAxC76wbE/AAAAAAAAAAI/AAAAAAAAAAo/e9PYZLvUz6g/photo.jpg?sz=128", "display_name": "dokasov", "link": "https://stackoverflow.com/users/10107705/dokasov"}, "reply_to_user": {"reputation": 5007, "user_id": 10924296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483c21a8a3f03bbf92cb99539ec97dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Reedinationer", "link": "https://stackoverflow.com/users/10924296/reedinationer"}, "edited": false, "score": 0, "creation_date": 1549484935, "post_id": 54561953, "comment_id": 95922984, "body": "@Reedinationer It just prints <code>&lt;class &#39;numpy.ndarray&#39;&gt;</code>"}, {"owner": {"reputation": 1100, "user_id": 3247017, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c3cbdcfae88fe1e0f4005c08ecfffd59?s=128&d=identicon&r=PG&f=1", "display_name": "pazitos10", "link": "https://stackoverflow.com/users/3247017/pazitos10"}, "edited": false, "score": 0, "creation_date": 1549485095, "post_id": 54561953, "comment_id": 95923055, "body": "You can set the type when creating the array by doing <code>np.array(printscreen, dtype=np.uint8)</code>. Also, to check the type of a numpy array you can use the <code>dtype</code> attribute. For example: <code>print(printscreen.dtype)</code>"}, {"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1549486575, "post_id": 54561953, "comment_id": 95923696, "body": "So if your original image was 512x512 pixels of greyscale, it would become 512,512,3 when you make it RGB. Then you expand it to 1,512,512,3 and hope PIL can make an image of that? It can&#39;t, it can only do 2-d images in up to 3 or 4 colours, not 4-d."}, {"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1549486712, "post_id": 54561953, "comment_id": 95923748, "body": "You <b>can</b> make an image from the first in the list with <code>i=Image.fromarray(printscreen[0])</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2557, "user_id": 6688801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45ca691d8f8dbd1db658fadff05127ad?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/6688801/martin"}, "edited": false, "score": 1, "creation_date": 1549488517, "post_id": 54562212, "comment_id": 95924532, "body": "This one will take ages to be processed. Image processing should avoid loops"}, {"owner": {"reputation": 5007, "user_id": 10924296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483c21a8a3f03bbf92cb99539ec97dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Reedinationer", "link": "https://stackoverflow.com/users/10924296/reedinationer"}, "reply_to_user": {"reputation": 2557, "user_id": 6688801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45ca691d8f8dbd1db658fadff05127ad?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/6688801/martin"}, "edited": false, "score": 0, "creation_date": 1549488851, "post_id": 54562212, "comment_id": 95924660, "body": "I figured, hence my &quot;I&#39;m not sure if it is the best method&quot;, but hey it got the job done for me!"}], "tags": [], "owner": {"reputation": 5007, "user_id": 10924296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483c21a8a3f03bbf92cb99539ec97dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Reedinationer", "link": "https://stackoverflow.com/users/10924296/reedinationer"}, "is_accepted": false, "score": 0, "last_activity_date": 1549485572, "creation_date": 1549485572, "answer_id": 54562212, "question_id": 54561953, "link": "https://stackoverflow.com/questions/54561953/cant-turn-back-to-pil-image-after-expanding-dimensions-with-numpy/54562212#54562212", "title": "Can&#39;t turn back to PIL Image after expanding dimensions with numpy", "body": "<p>Here is an adaptation of some image processing code I've used previously. I'm not sure if it is the best method, or what you are looking for, but it worked for me in converting from a PIL image to an array and back</p>\n\n<pre><code>import numpy as np\nfrom PIL import Image\n\nprint_screen = Image.open('datasets/custom/spaceship.jpg').convert('RGB')\nx, y = print_screen.size\nprint('Converting from Image to Array')\ncolor = np.zeros((x, y, 3), dtype=np.uint8) # initialize zeros array\nfor i in range(0, x): # fill the array\n    for j in range(0, y):\n        color[i][j] = print_screen.getpixel((i, j)) #input RGB to array\nprint_screen = Image.fromarray(color)\n</code></pre>\n\n<p>Hopefully this will help you out!</p>\n"}, {"comments": [{"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1549488760, "post_id": 54562664, "comment_id": 95924624, "body": "You may be right but I&#39;m not sure OP is trying to add an alpha layer. He is possibly trying to pass a list of images, with just one element, to his library. We&#39;ll see! \ud83d\ude04"}, {"owner": {"reputation": 2557, "user_id": 6688801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45ca691d8f8dbd1db658fadff05127ad?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/6688801/martin"}, "reply_to_user": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1549489099, "post_id": 54562664, "comment_id": 95924770, "body": "well doesnt it solution 2 express it? For you, I added edit"}, {"owner": {"reputation": 31, "user_id": 10107705, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4dlAxC76wbE/AAAAAAAAAAI/AAAAAAAAAAo/e9PYZLvUz6g/photo.jpg?sz=128", "display_name": "dokasov", "link": "https://stackoverflow.com/users/10107705/dokasov"}, "edited": false, "score": 0, "creation_date": 1549491672, "post_id": 54562664, "comment_id": 95925792, "body": "Yes, I probably should have clarified that. All I want to do is wrap the array inside another one, because usually it is intended to be an array of images, but I just have one. I believed it was possible to just add a dimension and turn the array into a PIL Image, because that&#39;s the type of input it accepts."}, {"owner": {"reputation": 2557, "user_id": 6688801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45ca691d8f8dbd1db658fadff05127ad?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/6688801/martin"}, "edited": false, "score": 0, "creation_date": 1549492747, "post_id": 54562664, "comment_id": 95926145, "body": "Now I dont really know what you want to do. But I putted edit 3 which expands dimension with possibility to add new images to array. I think I have exhausted all possibilites :)"}], "tags": [], "owner": {"reputation": 2557, "user_id": 6688801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45ca691d8f8dbd1db658fadff05127ad?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/6688801/martin"}, "is_accepted": false, "score": 1, "last_activity_date": 1549492648, "last_edit_date": 1549492648, "creation_date": 1549487716, "answer_id": 54562664, "question_id": 54561953, "link": "https://stackoverflow.com/questions/54561953/cant-turn-back-to-pil-image-after-expanding-dimensions-with-numpy/54562664#54562664", "title": "Can&#39;t turn back to PIL Image after expanding dimensions with numpy", "body": "<p><strong>2 solutions:</strong></p>\n\n<p><strong>Number 1: (You just want alpha channel) Just convert it as RGBA (you will get 4th channel)</strong></p>\n\n<pre><code>printscreen = Image.open('some_image.jpg').convert('RGBA')\n</code></pre>\n\n<p><strong>Number 2: More flexible and general attitude towards expanding dimension</strong></p>\n\n<p>1) Inquire 2D size of image </p>\n\n<p>2) create 2D 'grayscale' image filled with zeros</p>\n\n<p>3) concatenate your original 3D image with 'grayscale' image</p>\n\n<p>4) result is 4 channeled image, with one channel being set to 0</p>\n\n<pre><code>import numpy as np\nfrom PIL import Image\n\nprintscreen = Image.open('some_image.jpg').convert('RGB')\ntemp = np.asarray(printscreen)\nshp = temp.shape\nprintscreen = np.concatenate((temp,np.zeros(shape=[shp[0],shp[1],1])),axis=2)\n\nprintscreen = Image.fromarray(printscreen.astype(np.uint8))\n</code></pre>\n\n<hr>\n\n<pre><code>&gt;&gt;&gt; printscreen.shape # before transformed with Image.fromarray\n(397, 397, 4)\n</code></pre>\n\n<p><strong>Edit - General attitude to put matrixes upon themselves:</strong> </p>\n\n<p>In case you want more images upon themsels:</p>\n\n<p><em>(its the same as solution 2, but more expressive)</em></p>\n\n<pre><code>img1 = np.zeros(shape = [10,10,3])\nimg2 = np.zeros(shape = [10,10,3])\nimg_1_2 = np.concatenate((img1,img2),axis = 2)\n\n&gt;&gt;&gt; img_1_2.shape\n(10, 10, 6)\n</code></pre>\n\n<p><strong>Edit 2:</strong></p>\n\n<p>Just for your information, the reason why you are getting error is because you are trying to transform numpy array into PIL Image in non-image format. The shape is the problem - you had something like (x,y,3,1). The function np.expand_dims does exactly what it says - it add new dimension, that means, you are are actually doing from image a movie/video. Grayscale image is 2 dimensional, RGB or RGBA is 3 dimensional and movie is 4 dimensional, where 4th dimension is time(or better to say sequences of images). Doing transformation between RGB to RGBA doesnt expand dimension but 'volume', or in more clear words, it expands the color dimension from length 3 to length 4</p>\n\n<p><strong>EDIT 3: You really want to expand to 4th dimension where the extra dimension will be filled with new images</strong></p>\n\n<p>This solution doesnt count with PIL, because PIL has nothing to do with this</p>\n\n<pre><code>import numpy as np\n\n\nclass ImageContainer(object):\n    def __init__(self,first_image):\n        self.container =  np.uint8(np.expand_dims(np.array(first_image), axis=0))\n\n    def add_image(self,image):\n        print(image.shape)\n        temp = np.uint8(np.expand_dims(np.array(image), axis=0))\n        print(temp.shape)\n        self.container  = np.concatenate((self.container,temp),axis = 0)\n        print(self.container.shape)\n\n    def save_all(self,name):\n        np.save(name,self.container)\n\n\nimg1 = np.zeros(shape = [10,10,3]) # RGB\nimg2 = np.zeros(shape = [10,10,3]) # RGB\n\ncont = ImageContainer(img1)\ncont.add_image(img2)\n\n&gt;&gt;\n(1, 10, 10, 3) # 1 image\n(2, 10, 10, 3) # 2 images\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 10107705, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4dlAxC76wbE/AAAAAAAAAAI/AAAAAAAAAAo/e9PYZLvUz6g/photo.jpg?sz=128", "display_name": "dokasov", "link": "https://stackoverflow.com/users/10107705/dokasov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 678, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1549492648, "creation_date": 1549484586, "question_id": 54561953, "link": "https://stackoverflow.com/questions/54561953/cant-turn-back-to-pil-image-after-expanding-dimensions-with-numpy", "title": "Can&#39;t turn back to PIL Image after expanding dimensions with numpy", "body": "<p>I need to add a dimension to a PIL image so it is accepted as input by a library I'm using, but it gives me an error. This is the code:</p>\n\n<pre><code>import numpy as np\nfrom PIL import Image\n\nprintscreen = Image.open('datasets/custom/spaceship.jpg').convert('RGB')\nprintscreen = np.uint8(np.expand_dims(np.array(printscreen), axis=0))\nprintscreen = Image.fromarray(printscreen)\n</code></pre>\n\n<p>It says this: 'TypeError: Cannot handle this data type' in the last line.</p>\n"}, {"tags": ["python", "sdk", "aapt"], "comments": [{"owner": {"reputation": 1100, "user_id": 3247017, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c3cbdcfae88fe1e0f4005c08ecfffd59?s=128&d=identicon&r=PG&f=1", "display_name": "pazitos10", "link": "https://stackoverflow.com/users/3247017/pazitos10"}, "edited": false, "score": 2, "creation_date": 1549484987, "post_id": 54561937, "comment_id": 95923005, "body": "According to <a href=\"https://docs.python.org/3/library/subprocess.html#older-high-level-api\" rel=\"nofollow noreferrer\">this</a>, there are some differences when trying to use <code>run</code> depending on the Python version. Which version are you running in both platforms?"}, {"owner": {"reputation": 1100, "user_id": 3247017, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c3cbdcfae88fe1e0f4005c08ecfffd59?s=128&d=identicon&r=PG&f=1", "display_name": "pazitos10", "link": "https://stackoverflow.com/users/3247017/pazitos10"}, "edited": false, "score": 0, "creation_date": 1549485872, "post_id": 54561937, "comment_id": 95923377, "body": "Also, according to <a href=\"https://docs.python.org/3/library/subprocess.html#using-the-subprocess-module\" rel=\"nofollow noreferrer\">this</a>, <code>run</code> was added in Python 3.5 so in order to use it you will need to have Python &gt;= 3.5 installed."}], "owner": {"reputation": 513, "user_id": 10485625, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217741712717286/picture?type=large", "display_name": "userHG", "link": "https://stackoverflow.com/users/10485625/userhg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1221, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1549484535, "creation_date": 1549484535, "question_id": 54561937, "link": "https://stackoverflow.com/questions/54561937/importerror-with-subprocess-run-and-pipe-in-python", "title": "ImportError with subprocess, run and PIPE in python", "body": "<p>I'm using subprocess in python with this code :</p>\n\n<pre><code>from subprocess import run, PIPE\nresult = run(['/Users/{PATH-TO-SDK}/28.0.3/aapt','dump', 'badging', 'com.squareup.cash.apk'], stdout=PIPE, stderr=PIPE, check=True,\n    universal_newlines=True)\nversion = result.stdout.split(\"versionName='\")[1].split(\"'\")[0]\n</code></pre>\n\n<p>This code used to work with Mac but when I'm using it on ubuntu I've got an error :</p>\n\n<blockquote>\n  <p>Traceback (most recent call last):\n    File \"ScrapInfos.py\", line 11, in \n      from subprocess import run, PIPE\n  ImportError: cannot import name run</p>\n</blockquote>\n\n<p>How can I fix this ? Thank you</p>\n"}, {"tags": ["python", "inheritance"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1549486002, "post_id": 54561889, "comment_id": 95923439, "body": "The biggest misunderstanding about <code>super().foo()</code> is that it isn&#39;t just a shortcut for <code>for cls in parent_classes: cls.foo(self)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 403, "user_id": 6037143, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2fdfb6bc13be9e0e471d29125f70612f?s=128&d=identicon&r=PG&f=1", "display_name": "user6037143", "link": "https://stackoverflow.com/users/6037143/user6037143"}, "edited": false, "score": 0, "creation_date": 1549484629, "post_id": 54561940, "comment_id": 95922844, "body": "Thanks Philip, but I am trying to figure how would I achieve this with <code>super()</code>"}, {"owner": {"reputation": 4510, "user_id": 2644759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f291980e5706c49b03f3fa3d74951d02?s=128&d=identicon&r=PG", "display_name": "Philip Tzou", "link": "https://stackoverflow.com/users/2644759/philip-tzou"}, "reply_to_user": {"reputation": 403, "user_id": 6037143, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2fdfb6bc13be9e0e471d29125f70612f?s=128&d=identicon&r=PG&f=1", "display_name": "user6037143", "link": "https://stackoverflow.com/users/6037143/user6037143"}, "edited": false, "score": 1, "creation_date": 1549484882, "post_id": 54561940, "comment_id": 95922955, "body": "<a href=\"https://docs.python.org/3/library/functions.html#super\" rel=\"nofollow noreferrer\"><code>super()</code> returns a proxy object</a> that allows you to make method calls to the parent classes by the order defined in <code>__mro__</code> attribute. Since you want to explicitly initialize <code>class A</code> and <code>class B</code>, the only way is to call each initializer method explicitly - you need to tell Python which initializer you want to call."}], "tags": [], "owner": {"reputation": 4510, "user_id": 2644759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f291980e5706c49b03f3fa3d74951d02?s=128&d=identicon&r=PG", "display_name": "Philip Tzou", "link": "https://stackoverflow.com/users/2644759/philip-tzou"}, "is_accepted": false, "score": 0, "last_activity_date": 1549484545, "creation_date": 1549484545, "answer_id": 54561940, "question_id": 54561889, "link": "https://stackoverflow.com/questions/54561889/python-initializing-parent-classes/54561940#54561940", "title": "Python - Initializing parent classes", "body": "<p>You can actually refer the base classes explicitly:</p>\n\n<pre><code>class A:\n    def __init__(self, foo):\n        self.foo = foo\n\nclass B:\n    def __init__(self, bar):\n        self.bar == bar\n\nclass C(A,B):\n    def __init__(self):\n        A.__init__(self, 'foovalue')\n        # Do some calculation\n        B.__init__(self, 'barvalue')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 2, "last_activity_date": 1549486557, "last_edit_date": 1549486557, "creation_date": 1549485857, "answer_id": 54562270, "question_id": 54561889, "link": "https://stackoverflow.com/questions/54561889/python-initializing-parent-classes/54562270#54562270", "title": "Python - Initializing parent classes", "body": "<p>You cannot do what you ask for in <code>C.__init__</code>, as <code>super</code> doesn't give you any control over which specific inherited methods get called, only the order in which they are called, and that is controlled entirely by the order in which the parent classes are listed.</p>\n\n<p>If you use <code>super</code>, you need to use it consistently in <em>all</em> the classes. (That's why it's called <em>cooperative</em> inheritance.) Note this means that <code>C</code> cannot inject any code between the calls to <code>A.__init__</code> and <code>B.__init__</code>.</p>\n\n<p><code>__init__</code> is particularly tricky to implement correctly when using <code>super</code>, because a rule of <code>super</code> is that you have to expected arbitrary arguments to be passed, yet <code>object.__init__()</code> doesn't take any arguments. You need each additional argument to be \"owned\" by a particular root class that is responsible for removing it from the argument list.</p>\n\n<pre><code>class A:\n    def __init__(self, foo, **kwargs):\n        # A \"owns\" foo; pass everything else on\n        super().__init__(**kwargs)\n        self.foo = foo\n\nclass B:\n    def __init__(self, bar, **kwargs):\n        # B \"owns\" bar; pass everything else on\n        super().__init__(**kwargs)\n        self.bar = bar\n\nclass C(A,B):\n    def __init__(self):\n        # Must pass arguments expected by A and B\n        super().__init__(foo=3, bar=9)\n</code></pre>\n\n<p>The MRO for <code>C</code> is <code>[A, B, object]</code>, so the call tree looks something like this:</p>\n\n<ol>\n<li><code>C.__init__</code> is called with no arguments</li>\n<li><code>super()</code> resolves to <code>A</code>, so <code>A.__init__</code> is called with <code>foo=3</code> and <code>bar=9</code>.</li>\n<li>In <code>A.__init__</code>, <code>super()</code> resolves to <code>B</code>, so <code>B.__init__</code> is called with <code>bar=9</code>.</li>\n<li>In <code>B.__init__</code>, <code>super()</code> resolves to <code>object</code>, so <code>object.__init__</code> is called with no arguments (<code>kwargs</code> being empty)</li>\n<li>Once <code>object.__init__</code> returns, <code>self.bar</code> is set to <code>bar</code></li>\n<li>Once <code>B.__init__</code> returns, <code>self.foo</code> is set to <code>foo</code></li>\n<li>Once <code>A.__init__</code> returns, <code>C.__init__</code> finishes up</li>\n</ol>\n\n<hr>\n\n<p>OK, the first sentence isn't entirely true. Since neither <code>A</code> nor <code>B</code>, as currently written, use <code>super</code>, you <em>might</em> be able to assume that an appropriate use of <code>super</code> will simply call one parent function and immediately return.</p>\n\n<pre><code>class A:\n    def __init__(self, foo):\n        self.foo = foo\n\nclass B:\n    def __init__(self, bar):\n        self.bar == bar\n\nclass C(A,B):\n    def __init__(self):\n        super(A, self).__init__(foo=3)\n        # Do some calculation\n        super(B, self).__init__(bar=9)\n</code></pre>\n\n<p>I'm not entirely certain, though, that this doesn't introduce some hard-to-predict bugs that could manifest with other subclasses of <code>A</code>, <code>B</code>, and/or <code>C</code> that attempt to use <code>super</code> properly.</p>\n"}], "owner": {"reputation": 403, "user_id": 6037143, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2fdfb6bc13be9e0e471d29125f70612f?s=128&d=identicon&r=PG&f=1", "display_name": "user6037143", "link": "https://stackoverflow.com/users/6037143/user6037143"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1549486557, "creation_date": 1549484332, "question_id": 54561889, "link": "https://stackoverflow.com/questions/54561889/python-initializing-parent-classes", "title": "Python - Initializing parent classes", "body": "<p>I am trying to figure how to use super() to initialize the parent class one by one based on condition. </p>\n\n<pre><code>class A:\n    def __init__(self, foo):\n        self.foo = foo\n\nclass B:\n    def __init__(self, bar):\n        self.bar == bar\n\nclass C(A,B):\n    def __init__(self):\n        #Initialize class A first.\n        #Do some calculation and then initialize class B \n</code></pre>\n\n<p>How do I use super() in <code>class C</code> such that it only initializes <code>class A</code> first, then I do some calc and call super() to initialize <code>class B</code></p>\n"}, {"tags": ["python", "google-cloud-platform", "google-bigquery", "google-cloud-dataflow"], "comments": [{"owner": {"reputation": 12372, "user_id": 2877278, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/jO6Hj.jpg?s=128&g=1", "display_name": "Graham Polley", "link": "https://stackoverflow.com/users/2877278/graham-polley"}, "edited": false, "score": 0, "creation_date": 1549497502, "post_id": 54561856, "comment_id": 95927610, "body": "Use a smaller dataset size, and use the Direct/Local Runner on your own machine to debug, Would this be possible?"}], "answers": [{"comments": [{"owner": {"reputation": 2522, "user_id": 2965599, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/4f1II.jpg?s=128&g=1", "display_name": "Andrew Cassidy", "link": "https://stackoverflow.com/users/2965599/andrew-cassidy"}, "edited": false, "score": 0, "creation_date": 1549644715, "post_id": 54565201, "comment_id": 95990017, "body": "Yeah so I ended up doing 1) by accident. In my process of doing &quot;write the PCollection to GCS in a non-temp location in JSON format and try to ingest it myself&quot;, the following python code exposed None Types in my PCollection rows:         json_formatted = extracted_text | &#39;convertToJSON&#39; &gt;&gt; beam.Map(json.dumps). 2) wasn&#39;t really possible since there were only a few edge cases in a massive dataset that took 5 hours to process on 1000 CPUs. thanks for your input"}], "tags": [], "owner": {"reputation": 43265, "user_id": 8016720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXsod.png?s=128&g=1", "display_name": "John Hanley", "link": "https://stackoverflow.com/users/8016720/john-hanley"}, "is_accepted": true, "score": 2, "last_activity_date": 1549504387, "creation_date": 1549504387, "answer_id": 54565201, "question_id": 54561856, "link": "https://stackoverflow.com/questions/54561856/how-to-debug-python-dataflow-beam-io-writetobigquery/54565201#54565201", "title": "How to debug python dataflow beam.io.WriteToBigQuery", "body": "<p>For your type of error, I do the following:</p>\n\n<ol>\n<li>Use a Json check tool to list records with errors.</li>\n<li>Run Cloud Dataflow locally.</li>\n<li>Add a pipeline step to validate each Json record and remove the bad entries from the pipeline. Use a dead letter file using side output OR log the bad records for debugging.</li>\n</ol>\n\n<p>This article might give you some ideas for handling invalid inputs.</p>\n\n<p><a href=\"https://cloud.google.com/blog/products/gcp/handling-invalid-inputs-in-dataflow\" rel=\"nofollow noreferrer\">Handling Invalid Inputs in Dataflow</a></p>\n"}], "owner": {"reputation": 2522, "user_id": 2965599, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/4f1II.jpg?s=128&g=1", "display_name": "Andrew Cassidy", "link": "https://stackoverflow.com/users/2965599/andrew-cassidy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 705, "favorite_count": 0, "accepted_answer_id": 54565201, "answer_count": 1, "score": 1, "last_activity_date": 1552603022, "creation_date": 1549484167, "last_edit_date": 1552603022, "question_id": 54561856, "link": "https://stackoverflow.com/questions/54561856/how-to-debug-python-dataflow-beam-io-writetobigquery", "title": "How to debug python dataflow beam.io.WriteToBigQuery", "body": "<p>I currently have a python dataflow job whose end sink is a PCollection write to BigQuery. It's failing with the following error:</p>\n\n<pre><code>Workflow failed. Causes: S01:XXXX+XXX+Write/WriteToBigQuery/NativeWrite failed., BigQuery import job \"dataflow_job_XXXXXX\" failed., BigQuery job \"dataflow_job_XXXXXX\" in project \"XXXXXX\" finished with error(s): errorResult: Error while reading data, error message: JSON table encountered too many errors, giving up. Rows: 19; errors: 1\n</code></pre>\n\n<p>To get a more detailed error report I'm then running:</p>\n\n<pre><code>bq --format=prettyjson show -j dataflow_job_XXXXXX\n</code></pre>\n\n<p>which displays something like (there are a bunch of errors this is just one of them):</p>\n\n<pre><code>{\n\n    \"location\": \"gs://XXXXX/XXXXXX/tmp/XXXXX/10002237702794672370/dax-tmp-2019-02-05_20_14_50-18341731408970037725-S01-0-5144bb700f6a9f0b/-shard--try-00d3c2c24d5b0371-endshard.json\",\n\n    \"message\": \"Error while reading data, error message: JSON table encountered too many errors, giving up. Rows: 11; errors: 1. Please look into the errors[] collection for more details.\",                                          \n\n    \"reason\": \"invalid\"\n\n  },\n</code></pre>\n\n<p>I then go looking for the particular shard to see what PCollection row is in error and what I need to do to either filter these rows or fix a bug of mine:</p>\n\n<pre><code>gsutil ls gs://XXXXX/XXXXXX/tmp/XXXXX/10002237702794672370/dax-tmp-2019-02-05_20_14_50-18341731408970037725-S01-0-5144bb700f6a9f0b/-shard--try-00d3c2c24d5b0371-endshard.json\n</code></pre>\n\n<p>But that command returns:</p>\n\n<pre><code>CommandException: One or more URLs matched no objects.\n</code></pre>\n\n<p>What are the best practices for debugging jobs (which takes multiple hours btw)? My thought right now is to write the PCollection to GCS in a non-temp location in JSON format and try to ingest it myself. </p>\n"}, {"tags": ["python", "scipy", "spatial"], "answers": [{"tags": [], "owner": {"reputation": 166, "user_id": 3656109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/456e9cd7dd8028bdcd5214ae41f12dd2?s=128&d=identicon&r=PG&f=1", "display_name": "vaz", "link": "https://stackoverflow.com/users/3656109/vaz"}, "is_accepted": false, "score": 0, "last_activity_date": 1549489671, "creation_date": 1549489671, "answer_id": 54563035, "question_id": 54561853, "link": "https://stackoverflow.com/questions/54561853/get-the-distances-to-nearest-neighbours-in-ckttree/54563035#54563035", "title": "Get the distances to nearest neighbours in cktTree", "body": "<p>You just need to give <code>distance.cdit()</code> the points you just computed by evaluating your <code>coord_list</code> in those indexes:</p>\n\n<p><code>dist = distance.cdist(coord_list, coord_list[ind], 'euclidean')</code></p>\n"}], "owner": {"reputation": 1, "user_id": 11023669, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LYOMiJcE_3o/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMvqoWwZlbbwom89pP0vw92RQacag/mo/photo.jpg?sz=128", "display_name": "Erik Nylander", "link": "https://stackoverflow.com/users/11023669/erik-nylander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549489671, "creation_date": 1549484161, "last_edit_date": 1549486871, "question_id": 54561853, "link": "https://stackoverflow.com/questions/54561853/get-the-distances-to-nearest-neighbours-in-ckttree", "title": "Get the distances to nearest neighbours in cktTree", "body": "<p>coord_list is a numpyarray with x and y coordinates for some cities. Now I want to find both the indexes for all the nearest neighbours for each city within, but also the distance to all nearest neighbours within the radius in two separate numpyarrays. I get the indexes, but I can't find any way to get the distances. I tried to use <strong>distance.cdist(coord_list, coord_list, 'euclidean')</strong>, but I don't know how to use <strong>ind</strong> to get the right distances from <strong>dist</strong>. I've just started programming in Python.</p>\n\n<pre><code>def construct_graph_connections(coord_list, radius):\n\nmytree = spatial.cKDTree(coord_list)\nind = mytree.query_ball_point(coord_list, radius)\ndist = distance.cdist(coord_list, coord_list, 'euclidean')\nreturn ind, distance\n</code></pre>\n"}, {"tags": ["python", "django", "python-requests"], "comments": [{"owner": {"reputation": 1918, "user_id": 8961316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YzXbi.jpg?s=128&g=1", "display_name": "0xInfection", "link": "https://stackoverflow.com/users/8961316/0xinfection"}, "edited": false, "score": 0, "creation_date": 1549609361, "post_id": 54561830, "comment_id": 95971292, "body": "You might try HTTP Verb Tampering here. Try converting the <code>POST</code> type request to <code>GET</code> and see if that works maybe."}, {"owner": {"reputation": 89, "user_id": 3219069, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004364520915/picture?type=large", "display_name": "kybrdbnd", "link": "https://stackoverflow.com/users/3219069/kybrdbnd"}, "edited": false, "score": 0, "creation_date": 1609934043, "post_id": 54561830, "comment_id": 115974164, "body": "Your request is wrong. This is the correct one  streamlabs_response = requests.request(&quot;POST&quot;, url, query=querydict)"}], "owner": {"reputation": 11, "user_id": 11024787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d5af0e0b05e3cfc78ceba19cd04553?s=128&d=identicon&r=PG&f=1", "display_name": "Caldwell", "link": "https://stackoverflow.com/users/11024787/caldwell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1549622672, "creation_date": 1549484071, "last_edit_date": 1549622672, "question_id": 54561830, "link": "https://stackoverflow.com/questions/54561830/how-do-i-properly-format-data-in-a-python-post-request-to-streamlabs-api", "title": "How do I properly format data in a Python POST request to Streamlabs API?", "body": "<p>I'm trying to connect our application to Streamlabs' API so we can post donation alerts. To do that, I need to get an access token for the user whose channel we want to alert on. It's a normal OAuth2 thing. We hit the /authorize endpoint and get a code back, which we're then supposed to able to use to get an access token from the /token endpoint (<a href=\"https://dev.streamlabs.com/v1.0/reference#token-1\" rel=\"nofollow noreferrer\">https://dev.streamlabs.com/v1.0/reference#token-1</a>). </p>\n\n<p>But when we send the POST request for the token, we get an error saying the request is missing the \"grant_type\" parameter. </p>\n\n<p>We're using the normal requests library. I've tried changing the format of the request to requests.post. I've tried altering the data by wrapping it in urlencode and json.dumps. Still no luck. </p>\n\n<pre><code>    streamlabs_client_id = config('STREAMLABS_CLIENT_ID')\n    streamlabs_client_secret = config('STREAMLABS_CLIENT_SECRET')\n    streamlabs_redirect_uri = config('STREAMLABS_REDIRECT_URI')\n    grant_type = 'authorization_code'\n    querydict = {\n        \"grant_type\":\"authorization_code\",\n        \"client_id\":streamlabs_client_id,\n        \"client_secret\":streamlabs_client_secret,\n        \"redirect_uri\":streamlabs_redirect_uri, \n        \"code\":code\n    }\n    url = \"https://streamlabs.com/api/v1.0/token\"\n    streamlabs_response = requests.request(\"POST\", url, data=querydict)\n</code></pre>\n\n<p>This is the json I get back every time:</p>\n\n<blockquote>\n  <p>{\"error\":\"invalid_request\",\"error_description\":\"The request is missing a required parameter, includes an invalid parameter value, includes a parameter more than once, or is otherwise malformed. Check the \\\"grant_type\\\" parameter.\"}</p>\n</blockquote>\n\n<p>Any ideas what I'm doing wrong with the data?</p>\n"}, {"tags": ["python", "python-3.x", "if-statement"], "comments": [{"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 2, "creation_date": 1549484295, "post_id": 54561817, "comment_id": 95922696, "body": "<code>for n in user</code> will loop through each character in the input <code>user</code>."}, {"owner": {"reputation": 14830, "user_id": 3757232, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kLzML.jpg?s=128&g=1", "display_name": "Jared Smith", "link": "https://stackoverflow.com/users/3757232/jared-smith"}, "edited": false, "score": 1, "creation_date": 1549484297, "post_id": 54561817, "comment_id": 95922697, "body": "It&#39;s not clear what you&#39;re actually trying to do here. Please post a description of what you&#39;re trying to accomplish along with your code."}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 1, "creation_date": 1549484357, "post_id": 54561817, "comment_id": 95922722, "body": "This can&#39;t be the actual code as Python doesn&#39;t use semicolons to mark the start of code blocks, it uses colons."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1549484387, "post_id": 54561817, "comment_id": 95922736, "body": "What is <code>if user == input(user)</code> supposed to do?  Are you trying to ask the user for more input, and comparing that against the first input?"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1549484874, "post_id": 54561817, "comment_id": 95922953, "body": "You got the input, in the first line, and saved it in the variable <code>user</code>. What exactly are you trying to check <code>user</code> against?"}, {"owner": {"reputation": 15601, "user_id": 5173426, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/9tQ1B.png?s=128&g=1", "display_name": "DirtyBit", "link": "https://stackoverflow.com/users/5173426/dirtybit"}, "edited": false, "score": 0, "creation_date": 1549485245, "post_id": 54561817, "comment_id": 95923130, "body": "What do you want the check for? Whether the user has entered a name? Or against any specific name? What is your desired output?"}], "answers": [{"comments": [{"owner": {"reputation": 18299, "user_id": 2648811, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ee5af60b10a2d5fd8c864437a2062f0a?s=128&d=identicon&r=PG", "display_name": "Green Cloak Guy", "link": "https://stackoverflow.com/users/2648811/green-cloak-guy"}, "edited": false, "score": 2, "creation_date": 1549484488, "post_id": 54561891, "comment_id": 95922775, "body": "As a further explanation to OP: this works because <code>user</code> will be equal to <code>&#39;&#39;</code>, or the  empty string. The empty string is <i>falsey</i>, which means that in a boolean check it will behave as though it is the boolean value <code>False</code>. Non-empty strings are <i>truthy</i>, which is the opposite - if treated as booleans, they behave as <code>True</code>. You could substitute the condition <code>if user:</code> with <code>if len(user) &gt; 0:</code> to get a similar effect - checking if the string is non-empty, by checking how many characters it contains."}, {"owner": {"reputation": 21, "user_id": 11025022, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xjLe2ql6cmM/AAAAAAAAAAI/AAAAAAAAADc/PqaYMyYQiJg/photo.jpg?sz=128", "display_name": "OutofRhythm", "link": "https://stackoverflow.com/users/11025022/outofrhythm"}, "edited": false, "score": 0, "creation_date": 1549493449, "post_id": 54561891, "comment_id": 95926397, "body": "Hi, thank you for the solution. It worked!"}], "tags": [], "owner": {"reputation": 289, "user_id": 6623341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dwM0S.jpg?s=128&g=1", "display_name": "Rakib", "link": "https://stackoverflow.com/users/6623341/rakib"}, "is_accepted": true, "score": 1, "last_activity_date": 1549484336, "creation_date": 1549484336, "answer_id": 54561891, "question_id": 54561817, "link": "https://stackoverflow.com/questions/54561817/new-to-programming-need-help-regarding-if-elif-input-in-python/54561891#54561891", "title": "New to programming, need help regarding if - elif input in python", "body": "<p>Check if the user has typed any text as input. In python 3.x:</p>\n\n<pre><code>user = input(\"Enter your name: \")\n\nif user:\n    print ('Name Entered')\nelse:\n    print('Enter a name.')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 289, "user_id": 6623341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dwM0S.jpg?s=128&g=1", "display_name": "Rakib", "link": "https://stackoverflow.com/users/6623341/rakib"}, "edited": false, "score": 0, "creation_date": 1549484962, "post_id": 54561945, "comment_id": 95922997, "body": "<code>while len(user) &gt;= 0</code> will get you an infinite loop. It should be <code>while len(user) == 0</code>."}, {"owner": {"reputation": 23, "user_id": 7088160, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9AbjzwSYeDc/AAAAAAAAAAI/AAAAAAAABCo/2ymxyyJzJ7o/photo.jpg?sz=128", "display_name": "A Webster", "link": "https://stackoverflow.com/users/7088160/a-webster"}, "reply_to_user": {"reputation": 289, "user_id": 6623341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dwM0S.jpg?s=128&g=1", "display_name": "Rakib", "link": "https://stackoverflow.com/users/6623341/rakib"}, "edited": false, "score": 0, "creation_date": 1549485018, "post_id": 54561945, "comment_id": 95923017, "body": "ah yes or &lt;=, I made the edit, thank you."}, {"owner": {"reputation": 117, "user_id": 2169862, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YXVnn.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/2169862/victor"}, "edited": false, "score": 1, "creation_date": 1549485479, "post_id": 54561945, "comment_id": 95923220, "body": "@A Webster, I think <code>while not user</code> looks a little nicer than <code>while len(user) &lt;= 0</code> just because the exact length doesn&#39;t matter, just whether the string is null or not, plus the length couldn&#39;t be less than 0 anyway."}, {"owner": {"reputation": 21, "user_id": 11025022, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xjLe2ql6cmM/AAAAAAAAAAI/AAAAAAAAADc/PqaYMyYQiJg/photo.jpg?sz=128", "display_name": "OutofRhythm", "link": "https://stackoverflow.com/users/11025022/outofrhythm"}, "edited": false, "score": 0, "creation_date": 1549494398, "post_id": 54561945, "comment_id": 95926712, "body": "Hey guys sorry for not being too clear. I have changed my question to further explain what is needed. However, I got the solution. All I had to do was <code>if user:</code>"}], "tags": [], "owner": {"reputation": 23, "user_id": 7088160, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9AbjzwSYeDc/AAAAAAAAAAI/AAAAAAAABCo/2ymxyyJzJ7o/photo.jpg?sz=128", "display_name": "A Webster", "link": "https://stackoverflow.com/users/7088160/a-webster"}, "is_accepted": false, "score": 0, "last_activity_date": 1549485025, "last_edit_date": 1549485025, "creation_date": 1549484566, "answer_id": 54561945, "question_id": 54561817, "link": "https://stackoverflow.com/questions/54561817/new-to-programming-need-help-regarding-if-elif-input-in-python/54561945#54561945", "title": "New to programming, need help regarding if - elif input in python", "body": "<p>Before I delve into the coding side, I would like to call some attention the logic in your code. It seems to me that you would like to:</p>\n\n<ol>\n<li>Take some form of user input</li>\n<li>Verify that the user has provided an input ( this is what I am unsure about)</li>\n<li>If they have, print their name to the console</li>\n<li>If they haven't, prompt them to enter a name again</li>\n</ol>\n\n<p>This can be done a multitude of ways. I will illustrate an example of using a while loop. This will make such that the program will continue to prompt the user for a name until they enter one.</p>\n\n<pre><code>user = ''\n\nwhile len(user) &lt;= 0:\n    user = input(\"Enter your name: \")\n\nprint (str(user))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 11025022, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xjLe2ql6cmM/AAAAAAAAAAI/AAAAAAAAADc/PqaYMyYQiJg/photo.jpg?sz=128", "display_name": "OutofRhythm", "link": "https://stackoverflow.com/users/11025022/outofrhythm"}, "edited": false, "score": 0, "creation_date": 1549493647, "post_id": 54562021, "comment_id": 95926476, "body": "Hi, thank you for taking your time out, turns out I was unclear with my question. I have corrected my question and also got the solution above. Thank you and I apologize for the incomplete question."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10597469"}, "is_accepted": false, "score": 0, "last_activity_date": 1549484827, "creation_date": 1549484827, "answer_id": 54562021, "question_id": 54561817, "link": "https://stackoverflow.com/questions/54561817/new-to-programming-need-help-regarding-if-elif-input-in-python/54562021#54562021", "title": "New to programming, need help regarding if - elif input in python", "body": "<p>There are a couple of syntax errors here and this will work fine if you fix them.  You don't need a for loop in this case since you only have one statement you are working through.  You also should use a colon, rather than a semi-colon after an if statement.  Additionally, indentation matters in python so you need to make sure your print statement is indented another level if you want it to be dependent on the if statement.  Something like this will work for receiving a user input and printing it if they provide one.  The following is sufficient for the task this code is accomplishing.</p>\n\n<pre><code>user = input(\"Enter your name: \")\n\nif user == input(user):\n    print ('Name Entered')\n\nelse:\n    print('Enter a name.')\n</code></pre>\n\n<p>The for loop is only necessary if you need to iterate through a collection of values.  For example:</p>\n\n<pre><code>users=[\"Bob\", \"Sarah\", \"Anne\", \"\"]\n\nfor user in users:\n    if len(user) &gt; 0:\n        print (user)\n\n    else:\n        print('Enter a name.')\n\nOutput&gt;&gt;&gt;Bob\n         Sarah\n         Anne\n         Enter a name.\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 11025022, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xjLe2ql6cmM/AAAAAAAAAAI/AAAAAAAAADc/PqaYMyYQiJg/photo.jpg?sz=128", "display_name": "OutofRhythm", "link": "https://stackoverflow.com/users/11025022/outofrhythm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 348, "favorite_count": 0, "closed_date": 1549486705, "accepted_answer_id": 54561891, "answer_count": 3, "score": 1, "last_activity_date": 1549493209, "creation_date": 1549483983, "last_edit_date": 1549493209, "question_id": 54561817, "link": "https://stackoverflow.com/questions/54561817/new-to-programming-need-help-regarding-if-elif-input-in-python", "closed_reason": "Needs details or clarity", "title": "New to programming, need help regarding if - elif input in python", "body": "<p>I'm new here and I'm self teaching python to myself. Here's a code I've written so far. I'm trying to get a random input from the user. However, I don't understand which command to pass in if statement.</p>\n\n<pre><code>user = input(\"Enter your name: \")\n\nfor n in user:\n    if user == input(user);\n    print ('Name Entered')\n\nelse:\n    print('Enter a name.')\n</code></pre>\n\n<p>Thanks.</p>\n\n<p>[Edit]: Sorry for the trouble. So I've basically seen examples where we type names in the list and then carry on with if statement. I'm trying to make a code where a user inputs a random name and upon entering the name the result comes out as ' Name Entered ' else ' Enter a name' if there is no input provided by the user.</p>\n"}, {"tags": ["python", "generator"], "comments": [{"owner": {"reputation": 18299, "user_id": 2648811, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ee5af60b10a2d5fd8c864437a2062f0a?s=128&d=identicon&r=PG", "display_name": "Green Cloak Guy", "link": "https://stackoverflow.com/users/2648811/green-cloak-guy"}, "edited": false, "score": 0, "creation_date": 1549484288, "post_id": 54561808, "comment_id": 95922690, "body": "I&#39;m a bit confused about your indentation - the inner <code>for</code> loop seems indented one level too far, as the <code>data_index_window</code> line in front of it doesn&#39;t start a new code block. Is that how it&#39;s supposed to be?"}, {"owner": {"reputation": 1432, "user_id": 458661, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/034d4f917134c83ddccfb3dc0b8699c2?s=128&d=identicon&r=PG", "display_name": "Chrisvdberge", "link": "https://stackoverflow.com/users/458661/chrisvdberge"}, "reply_to_user": {"reputation": 18299, "user_id": 2648811, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ee5af60b10a2d5fd8c864437a2062f0a?s=128&d=identicon&r=PG", "display_name": "Green Cloak Guy", "link": "https://stackoverflow.com/users/2648811/green-cloak-guy"}, "edited": false, "score": 1, "creation_date": 1549484494, "post_id": 54561808, "comment_id": 95922782, "body": "you are correct. mistake I made when trying to get the code formatted properly here"}], "answers": [{"tags": [], "owner": {"reputation": 25901, "user_id": 493928, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ce109c88210d5c36c957082ddfe92d16?s=128&d=identicon&r=PG", "display_name": "khachik", "link": "https://stackoverflow.com/users/493928/khachik"}, "is_accepted": true, "score": 1, "last_activity_date": 1549484281, "creation_date": 1549484281, "answer_id": 54561878, "question_id": 54561808, "link": "https://stackoverflow.com/questions/54561808/how-to-nest-generators/54561878#54561878", "title": "How to nest generators", "body": "<p><code>max</code> doesn't need a sequence, it can be used with generators as well, something like:</p>\n\n<pre><code>def define_max_values(data, indexes):\n    for iter in range(len(indexes)):\n        data_index_window = data[index[iter] - 5:index[iter] + 50]\n        yield max(np.linalg.norm(\n                          data_index_window.iloc[i, 0:3].values) \\\n                  for i in range(len(data_index_window)))\n</code></pre>\n"}], "owner": {"reputation": 1432, "user_id": 458661, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/034d4f917134c83ddccfb3dc0b8699c2?s=128&d=identicon&r=PG", "display_name": "Chrisvdberge", "link": "https://stackoverflow.com/users/458661/chrisvdberge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 54561878, "answer_count": 1, "score": 0, "last_activity_date": 1549484461, "creation_date": 1549483954, "last_edit_date": 1549484461, "question_id": 54561808, "link": "https://stackoverflow.com/questions/54561808/how-to-nest-generators", "title": "How to nest generators", "body": "<p>I'm looking into generators to make some of my code more efficient. Currently wondering how I can/should handle nested for loops that each create a list. The nested loop re-generates a list of values for every step of the for loop. These values are a vector normalization of 3 columns of the fed data.  From this list a max value is taken and added to the list that is returned by the function. \nSeems this could be made much more efficient by using generators. I'm not sure however how to handle the nested for loop as the function will stop on the first yield. </p>\n\n<p>Code as it is currently; </p>\n\n<pre><code>def define_max_values(data, indexes):\n\n    max_values = []\n\n    for iter in range(len(indexes)):\n        data_index_window = data[index[iter] - 5:index[iter] + 50]\n        for i in range(len(data_index_window)):\n            sub_list = []   \n            sub_list.append(np.linalg.norm(data_index_window.iloc[i, 0:3].values))\n\n        max_values.append(max(sub_list))\n    return max_values\n</code></pre>\n\n<p>I think this could be turned into this, using 1 generator</p>\n\n<pre><code>def define_max_values(data, indexes):\n     for iter in range(len(indexes)):\n            data_index_window = data[index[iter] - 5:index[iter] + 50]\n            for i in range(len(data_index_window)):\n                sub_list = []\n                sub_list.append(np.linalg.norm(data_index_window.iloc[i, 0:3].values))\n\n            yield(max(sub_list)\n</code></pre>\n\n<p>This seems more readable/efficient code already, but wondering if/how I could replace the inner list.append with another yield.  </p>\n"}, {"tags": ["python", "numpy", "ode", "approximation"], "answers": [{"tags": [], "owner": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "is_accepted": true, "score": 2, "last_activity_date": 1549498307, "creation_date": 1549498307, "answer_id": 54564521, "question_id": 54561801, "link": "https://stackoverflow.com/questions/54561801/approximating-sin-wave-with-euler-method-in-python/54564521#54564521", "title": "Approximating Sin wave with euler method in python", "body": "<p>You are solving the ODE</p>\n\n<pre><code>y'(t) = cos(y(t))\n</code></pre>\n\n<p>which has an attracting stable point at <code>y=pi/2</code> which you reach for <code>t=10</code> for all graphical purposes, after that the solution is constant. As you got in your graph.</p>\n\n<p>You need either a system</p>\n\n<pre><code>x' = -y\ny' =  x\n</code></pre>\n\n<p>or on a limited interval</p>\n\n<pre><code>y' = sqrt(1-y^2)\n</code></pre>\n\n<p>Or in a simple integration</p>\n\n<pre><code>y'(t) = cos(t).\n</code></pre>\n"}], "owner": {"reputation": 159, "user_id": 2216916, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5cd50c4469d3fdbb2fad28584bf6a884?s=128&d=identicon&r=PG", "display_name": "Bobby M", "link": "https://stackoverflow.com/users/2216916/bobby-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 392, "favorite_count": 0, "accepted_answer_id": 54564521, "answer_count": 1, "score": 0, "last_activity_date": 1549498307, "creation_date": 1549483930, "last_edit_date": 1549484283, "question_id": 54561801, "link": "https://stackoverflow.com/questions/54561801/approximating-sin-wave-with-euler-method-in-python", "title": "Approximating Sin wave with euler method in python", "body": "<p>Hi I'm trying to use euler method in python to plot a sin wave function sin(A). </p>\n\n<p>Using the following algorithm:</p>\n\n<ol>\n<li><p>define f(t,y)</p></li>\n<li><p>input t0 and y0\n.</p></li>\n<li>input step size, h and the number of steps, n\n.</li>\n<li><p>for j from 1 to n do:</p>\n\n<p>4a. m=f(t0,y0)</p>\n\n<p>4b. y1=y0+h\u2217m</p>\n\n<p>4c. t1=t0+h</p>\n\n<p>4d. Print t1 and y1</p>\n\n<p>4e. t0=t1</p>\n\n<p>4f. y0=y1</p>\n\n<p>4g. end</p></li>\n</ol>\n\n<p>in my case I am approximating the function sin(A) so my function is the deriviative of sin(A) which is cos(A).</p>\n\n<p>I've implemented it in the code as below</p>\n\n<pre><code>def dSindt(A): \n    dSindt = cos(A) ;\n    return dSindt; \n\n\n\n%matplotlib inline\nimport matplotlib.pyplot as plt\n\nA0 = 0 \nt0 = 0; \ntf = 3600\ndel_t = .1; \nnum_steps = int((tf - t0)/del_t); \nA_mesh = [0]*(num_steps + 1);\ntime_mesh = [0]*(num_steps + 1); \n\nA_mesh[0] = A0;\ntime_mesh[0] = t0;\n\nfor i in range(num_steps):\n    A_mesh[i+1] = A_mesh[i] + dTindt(A_mesh[i])*del_t \n    time_mesh[i+1] = time_mesh[i] + del_t; \n\nplt.plot(time_mesh,A_mesh,color='b');\nplt.title('Approx. Sin Wave');\nplt.xlabel('Time (min)');\nplt.ylabel('A')\n</code></pre>\n\n<p>It seems like no matter what i do to the step size the derivative cos(A) heads towards zero but never gets to be negative. It has to be negative to make the sine wave function go down. so it can oscillate.  My erroneuos results are pictures here: <a href=\"https://i.stack.imgur.com/Us5Qn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Us5Qn.png\" alt=\"enter image description here\"></a></p>\n\n<p>I must be doing something really dumb, but i can't figure it out.</p>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["python", "django", "django-rest-framework"], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 9005223, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-s8igEytqSoc/AAAAAAAAAAI/AAAAAAAAMYY/BuMnDdVkD2E/photo.jpg?sz=128", "display_name": "Joaquin Roca", "link": "https://stackoverflow.com/users/9005223/joaquin-roca"}, "edited": false, "score": 0, "creation_date": 1549486008, "post_id": 54562058, "comment_id": 95923445, "body": "Perfect! Thank you very much."}], "tags": [], "owner": {"reputation": 553, "user_id": 7955772, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MDvIkq7e8f0/AAAAAAAAAAI/AAAAAAAAAKQ/MyHh08osV64/photo.jpg?sz=128", "display_name": "paras chauhan", "link": "https://stackoverflow.com/users/7955772/paras-chauhan"}, "is_accepted": true, "score": 1, "last_activity_date": 1549498368, "last_edit_date": 1549498368, "creation_date": 1549484973, "answer_id": 54562058, "question_id": 54561782, "link": "https://stackoverflow.com/questions/54561782/django-rest-framework-is-owner/54562058#54562058", "title": "Django Rest Framework is owner", "body": "<pre><code>def get_is_owner(self, obj):\n    \"\"\"\n    you can pass request in context\n    \"\"\"\n    return self.context['request'].user.id == obj.user.id\n</code></pre>\n\n<p>when you call the <code>serializer</code> pass <code>request</code> in <code>context</code> like following code;</p>\n\n<p><code>serializer = SomeSerializer(instance, context={'request': request, ...})</code></p>\n"}], "owner": {"reputation": 121, "user_id": 9005223, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-s8igEytqSoc/AAAAAAAAAAI/AAAAAAAAMYY/BuMnDdVkD2E/photo.jpg?sz=128", "display_name": "Joaquin Roca", "link": "https://stackoverflow.com/users/9005223/joaquin-roca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "accepted_answer_id": 54562058, "answer_count": 1, "score": 0, "last_activity_date": 1549498368, "creation_date": 1549483863, "last_edit_date": 1549486131, "question_id": 54561782, "link": "https://stackoverflow.com/questions/54561782/django-rest-framework-is-owner", "title": "Django Rest Framework is owner", "body": "<p>I'd like to create a field <code>is_owner</code> for my serializer which would return whether or not the object being serialized is owned by the user making the request. Something like:</p>\n\n<pre><code>\"\"\"Defines Some serializer with an owner\"\"\"\nfrom rest_framework import serializers\n\nclass SomeSerializer(serializers.ModelSerializer):\n    \"\"\"Returns the is_owner field as a boolean\"\"\"\n    is_owner = serializers.SerializerMethodField()\n\n    class Meta:\n        model = SomeModel\n        fields = ('is_owner',)\n\n def get_is_owner(self, obj):\n    \"\"\"Will return True if the requesting user is the owner, else false\"\"\"\n    return request.user.id == obj.user.id\n</code></pre>\n\n<p>Is this the way to do it? Should I be passing the <code>request</code> object to the serializer to make this work? Should I be testing this at the view level?</p>\n\n<p>Thank you!</p>\n"}]