[{"tags": ["python", "image", "tensorflow", "keras", "classification"], "comments": [{"owner": {"reputation": 47115, "user_id": 235354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/097d761861529df52a6800744f1074d2?s=128&d=identicon&r=PG", "display_name": "jspcal", "link": "https://stackoverflow.com/users/235354/jspcal"}, "edited": false, "score": 1, "creation_date": 1560384084, "post_id": 56571746, "comment_id": 99722174, "body": "Hi it might be this issue <a href=\"https://github.com/tensorflow/tfjs/issues/798\" rel=\"nofollow noreferrer\">github.com/tensorflow/tfjs/issues/798</a>"}], "answers": [{"tags": [], "owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "is_accepted": false, "score": 1, "last_activity_date": 1560410931, "creation_date": 1560410931, "answer_id": 56575400, "question_id": 56571746, "link": "https://stackoverflow.com/questions/56571746/i-need-some-help-for-a-keras-image-classifier-project/56575400#56575400", "title": "I need some help for a keras image classifier project", "body": "<p>You are mixing <code>keras</code> and <code>tf.keras</code> by training your model using <code>tf.keras</code> and then loading it in <code>keras</code>. This won't work because both frameworks are not compatible in that way.</p>\n\n<p>Choose one implementation and use it completely, do not mix them.</p>\n"}, {"tags": [], "owner": {"reputation": 206, "user_id": 11725556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34c1ca11a711222bac6b21d4c68c3e13?s=128&d=identicon&r=PG&f=1", "display_name": "Javiers", "link": "https://stackoverflow.com/users/11725556/javiers"}, "is_accepted": false, "score": 0, "last_activity_date": 1563033481, "last_edit_date": 1563033481, "creation_date": 1563032168, "answer_id": 57020547, "question_id": 56571746, "link": "https://stackoverflow.com/questions/56571746/i-need-some-help-for-a-keras-image-classifier-project/57020547#57020547", "title": "I need some help for a keras image classifier project", "body": "<p>Change:</p>\n\n<pre><code>from keras.models import load_model\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>from tensorflow.keras.models import load_model\n</code></pre>\n\n<p>That works for me. You can find additional information <a href=\"https://github.com/puigalex/AMP-Tech/issues?q=is%3Aissue+is%3Aclosed\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 10034722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sbkq4.jpg?s=128&g=1", "display_name": "Albert99", "link": "https://stackoverflow.com/users/10034722/albert99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1563033481, "creation_date": 1560383944, "last_edit_date": 1560412100, "question_id": 56571746, "link": "https://stackoverflow.com/questions/56571746/i-need-some-help-for-a-keras-image-classifier-project", "title": "I need some help for a keras image classifier project", "body": "<p>I've been doing this imager and it does not compile. The document of training if it works well but the document to predict the image does not.</p>\n\n<p>It consists of an image classifier based on these videos.</p>\n\n<p><a href=\"https://www.youtube.com/watch?v=EAqb20_4Rdg&amp;t=450s\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=EAqb20_4Rdg&amp;t=450s</a></p>\n\n<p><a href=\"https://www.youtube.com/watch?v=FWz0N4FFL0U&amp;t=53s\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=FWz0N4FFL0U&amp;t=53s</a></p>\n\n<p>THIS IS THE TRAINING CODE (IT WORKS PERFECTLY)</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import sys                                                                         # Lo vamos a hacer con TensorFLow pero dentro de este tenemos la posibilidad de usar Keras.\nimport os                                                                          # Vamos a importar las librerias que nos van a permitir movernos entre los directorios de nuestro sistema.\nimport tensorflow as tf\nfrom tensorflow.python.keras.preprocessing.image import ImageDataGenerator         # Libreria que nos va a pre-procesar las imagenes para entrenar a nuestro algoritmo:\nfrom tensorflow.python.keras import optimizers                                     # Importo los optimizadores:\nfrom tensorflow.python.keras.models import Sequential                              # Importo la libreria que nos permite hacer redes neurnales secueniales (Cada una de las capas est\u00e1 ordenada):\nfrom tensorflow.python.keras.layers import Dropout, Flatten, Dense, Activation\nfrom tensorflow.python.keras.layers import Convolution2D, MaxPooling2D             # Importo las capas en las cuales vamos a estar haciendo nuestras convoluciones y max-pooling:\nfrom tensorflow.python.keras import backend as K                                   # Importo la libreria que nos va a ayudar a que si hay una sesi\u00f3n de queras que est\u00e1 corriendo en segundo plano, matarlo y empezar de 0:\n\nK.clear_session()                                                                  # Empiezo una sesi\u00f3n nueva:\n\ndata_entrenamiento = r'C:\\Users\\JOSEA\\Downloads\\data\\train'                           # La \"r\" al principio de la string la va a transformar en uns RAW string para que no detecte el comando especial \"\\\".\ndata_validacion = r'C:\\Users\\JOSEA\\Downloads\\data\\validation'\n\n\n##Parametros:\n\nepocas = 20                                                                        # Veces que vamos a iterar nuestro DataSet.\naltura, longitud = 100, 100                                                        # Tama\u00f1o al que vamos a procesar nuestras im\u00e1genes.\nbatch_size = 32                                                                    # N\u00famero de im\u00e1genes que vamos a enviar para procesar en cada uno de las iteraciones. (Evitar sobrecarga de RAM).\npasos = 1000                                                                       # N\u00famero de veces que se va a procesar la informaci\u00f3n en cada una de las \u00e9pocas.\npasos_validacion = 200                                                             # Al final de cada \u00e9poca se van a ejecutar 200 pasos con nuestro DataSet de validaci\u00f3n (Comprobaci\u00f3n).\nfiltrosConv1 = 32\nfiltrosConv2 = 64                                                                  # N\u00famero de filtros que va a haber en cada convoluci\u00f3n. Profundidad de las capas ocultas.\ntamano_filtro1 = (3,3)\ntamano_filtro2 = (2,2)                                                             # Filtro(altura x longitud)\ntamano_pool = (2,2)                                                                # Tama\u00f1o del filtro en MaxPooling\nclases = 2                                                                         # \"gato\", \"perro\", \"gorila\"\nlr = 0.0005                                                                        # Learning rate. Que tan grande va a ser el ajuste para acercarse a una soluci\u00f3n \u00f3ptima (numero peque\u00f1o)\n\n##Pre-procesamiento de imagenes:\n\n# Creo un generador al que le voy a indicar como preprocesar la informaci\u00f3n y despu\u00e9s voy a hacer la transformaci\u00f3n de las im\u00e1genenes.\n# ----------------------------------------------------------------------------------------------------------------------\n\nentrenamiento_datagen = ImageDataGenerator(\n    rescale = 1./255,                          # Transforma cada pixel de un RANGO de 0-255 a un rango de 0-1 (Downnscale)\n    shear_range = 0.3,                         # Va a INCLINAR y rotar cada imagen para que el algoritmo aprenda como es el objeto desde todas las perspectivas\n    zoom_range = 0.3,                          # Va a hacer ZOOM a cada imagen para entrenar al algoritmo de forma alterna.\n    horizontal_flip = True                     # Va a INVERTIR la imagen.\n)\n\nvalidacion_datagen = ImageDataGenerator(\n    rescale = 1./255                           # Solo REESCALO estas im\u00e1genes de test para comparar con los resultados de entrenamiento.\n)\n\n# Creo las dos variables que van a contener a las im\u00e1genes procesadas de Training y Testing.\n# ----------------------------------------------------------------------------------------------------------------------\n\nimagen_entrenamiento = entrenamiento_datagen.flow_from_directory(\n    data_entrenamiento,                        # Va a entrar al directorio \"data\".\n    target_size = (altura, longitud),          # Va a preprocesar todas las im\u00e1genes que se encuentre a una altura y longitud (definidas arriba).\n    batch_size = batch_size,                   # Va a tomar una cantidad de 32 im\u00e1genes para cada iteraci\u00f3n.\n    class_mode = 'categorical'                 # La clasificaci\u00f3n va a ser categ\u00f3rica [\"perro\",\"gato\",\"gorila\"]\n)\n\nimagen_validacion = validacion_datagen.flow_from_directory(\n    data_validacion,\n    target_size = (altura, longitud),\n    batch_size = batch_size,\n    class_mode = 'categorical'\n)\n\n# Creo nuestra red neuronal convolucional:\n#-----------------------------------------------------------------------------------------------------------------------\n\ncnn = Sequential()                                                                                                      # Le vamos a decir que la Red sea seuencial, es decir, varias capas apiladas entre ellas.\n\ncnn.add(Convolution2D(filtrosConv1, tamano_filtro1, padding='same', input_shape=(altura, longitud,3), activation='relu')) # Convoluci\u00f3n(Filtros, Tama\u00f1o_Filtro, Filtro_esquinas, Tama\u00f1o_Imagen, Funci\u00f3n_de_activaci\u00f3n=RELU).\ncnn.add(MaxPooling2D(pool_size = tamano_pool))                                                                          # Despu\u00e9s de la capa de Convoluci\u00f3n vamos a tener una capa de MaxPooling que va a tener un tama\u00f1o de (2,2) pixels.\n\ncnn.add(Convolution2D(filtrosConv2, tamano_filtro2, padding='same', activation='relu'))                                 # Convoluci\u00f3n(Filtros, Tama\u00f1o_Filtro, Filtro_esquinas, Funci\u00f3n_de_activaci\u00f3n=RELU).\ncnn.add(MaxPooling2D(pool_size = tamano_pool))                                                                          # Despu\u00e9s de la capa de Convoluci\u00f3n vamos a tener una capa de MaxPooling que va a tener un tama\u00f1o de (2,2) pixels.\n\ncnn.add(Flatten())                                                                                                      # Vamos a transformar la imagen que es muy profunda y peque\u00f1a a una muy grando plana de una sola dimensi\u00f3n.\ncnn.add(Dense(256, activation = 'relu'))                                                                                # A\u00f1ade una capa de 256 neuronas donde van a estar todas las neuronas de las capas anteriores. Funci\u00f3n de activaci\u00f3n es relu.\ncnn.add(Dropout(0.5))                                                                                                   # Le voy a \"apagar\" el 50% de las neuronas para que no est\u00e9 demasiado ajustado. No quiero que encuentre un \u00fanico camino para \"perros\" sino que encuentre varios.\ncnn.add(Dense(clases, activation = 'softmax'))\n\ncnn.compile(loss='categorical_crossentropy', optimizer=optimizers.Adam(lr=lr), metrics=['accuracy'])\n\ncnn.fit_generator(imagen_entrenamiento, steps_per_epoch=pasos, epochs=epocas, validation_data=imagen_validacion, validation_steps=pasos_validacion)\n\ndir = r'C:\\Users\\JOSEA\\Downloads\\data\\modelos'\n\nif not os.path.exists(dir):\n    os.mkdir(dir)\ncnn.save(r'C:\\Users\\JOSEA\\Downloads\\data\\modelos\\modelo.h5')\ncnn.save_weights(r'C:\\Users\\JOSEA\\Downloads\\data\\modelos\\pesos.h5')\n\n\n</code></pre>\n\n<p>THIS IS THE CALIDATION CODE (IT DOESNT COMPILE)</p>\n\n<p>ERROR ON THE BOTTOM</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import os\nimport sys\nimport tensorflow as tf\nimport numpy as np\nimport keras\nfrom keras.preprocessing.image import load_img, img_to_array\nfrom keras.models import load_model\n\nlongitud, altura = 150, 150\nmodelo=r'C:\\Users\\JOSEA\\Downloads\\data\\modelos\\modelo.h5'\npesos=r'C:\\Users\\JOSEA\\Downloads\\data\\modelos\\pesos.h5'\ncnn = load_model(modelo)\ncnn.load_weights(pesos)\n\ndef predict(file):\n    x = load_img(file, target_size=(longitud, altura))                           # Le paso a la x nuestro valor de longitud y altura de la imagen.\n    x = img_to_array(x)                                                          # Convierto la imagen en un array de valores.\n    x = np.expand_dims(x, axis=0)                                                # En el eje 0 (primera dimensi\u00f3n del array) quiero que me a\u00f1ada otra dimensi\u00f3n para procesar la imagen sin problema.\n    arreglo = cnn.predict(x)                 ## [[1, 0, 0]]                      # Llamo a la red neuronal para haga una predicci\u00f3n y nos da un array de dos dimensiones tal que #[[1, 0, 0]] de la que solo se va a tomar el 1 como acierto.\n    resultado = arreglo[0]                   ## [[0, 0, 1]]                      # Solo me interesa la primera dimensi\u00f3n como resultado.\n    respuesta = np.argmax(resultado)         ## 2                                # Va a tomar como output la posici\u00f3n en el vector del valor mas alto.\n    if respuesta == 0:\n        print('perro')\n    if respuesta == 1:\n        print('gato')\n    return respuesta\n\npredict(r'C:\\Users\\JOSEA\\Downloads\\data\\Extra_Dataset\\cat.1440')\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>C:\\Users\\JOSEA\\Anaconda3\\envs\\Ajedrez\\python.exe C:/Users/JOSEA/PycharmProjects/Image_Classifier_TF/predicciones.py\nUsing TensorFlow backend.\nTraceback (most recent call last):\n  File \"C:/Users/JOSEA/PycharmProjects/Image_Classifier_TF/predicciones.py\", line 12, in &lt;module&gt;\n    cnn = load_model(modelo)\n  File \"C:\\Users\\JOSEA\\Anaconda3\\envs\\Ajedrez\\lib\\site-packages\\keras\\engine\\saving.py\", line 419, in load_model\n    model = _deserialize_model(f, custom_objects, compile)\n  File \"C:\\Users\\JOSEA\\Anaconda3\\envs\\Ajedrez\\lib\\site-packages\\keras\\engine\\saving.py\", line 225, in _deserialize_model\n    model = model_from_config(model_config, custom_objects=custom_objects)\n  File \"C:\\Users\\JOSEA\\Anaconda3\\envs\\Ajedrez\\lib\\site-packages\\keras\\engine\\saving.py\", line 458, in model_from_config\n    return deserialize(config, custom_objects=custom_objects)\n  File \"C:\\Users\\JOSEA\\Anaconda3\\envs\\Ajedrez\\lib\\site-packages\\keras\\layers\\__init__.py\", line 55, in deserialize\n    printable_module_name='layer')\n  File \"C:\\Users\\JOSEA\\Anaconda3\\envs\\Ajedrez\\lib\\site-packages\\keras\\utils\\generic_utils.py\", line 145, in deserialize_keras_object\n    list(custom_objects.items())))\n  File \"C:\\Users\\JOSEA\\Anaconda3\\envs\\Ajedrez\\lib\\site-packages\\keras\\engine\\sequential.py\", line 300, in from_config\n    custom_objects=custom_objects)\n  File \"C:\\Users\\JOSEA\\Anaconda3\\envs\\Ajedrez\\lib\\site-packages\\keras\\layers\\__init__.py\", line 55, in deserialize\n    printable_module_name='layer')\n  File \"C:\\Users\\JOSEA\\Anaconda3\\envs\\Ajedrez\\lib\\site-packages\\keras\\utils\\generic_utils.py\", line 147, in deserialize_keras_object\n    return cls.from_config(config['config'])\n  File \"C:\\Users\\JOSEA\\Anaconda3\\envs\\Ajedrez\\lib\\site-packages\\keras\\engine\\base_layer.py\", line 1109, in from_config\n    return cls(**config)\n  File \"C:\\Users\\JOSEA\\Anaconda3\\envs\\Ajedrez\\lib\\site-packages\\keras\\legacy\\interfaces.py\", line 91, in wrapper\n    return func(*args, **kwargs)\n  File \"C:\\Users\\JOSEA\\Anaconda3\\envs\\Ajedrez\\lib\\site-packages\\keras\\layers\\convolutional.py\", line 490, in __init__\n    **kwargs)\n  File \"C:\\Users\\JOSEA\\Anaconda3\\envs\\Ajedrez\\lib\\site-packages\\keras\\layers\\convolutional.py\", line 117, in __init__\n    self.kernel_initializer = initializers.get(kernel_initializer)\n  File \"C:\\Users\\JOSEA\\Anaconda3\\envs\\Ajedrez\\lib\\site-packages\\keras\\initializers.py\", line 508, in get\n    return deserialize(identifier)\n  File \"C:\\Users\\JOSEA\\Anaconda3\\envs\\Ajedrez\\lib\\site-packages\\keras\\initializers.py\", line 503, in deserialize\n    printable_module_name='initializer')\n  File \"C:\\Users\\JOSEA\\Anaconda3\\envs\\Ajedrez\\lib\\site-packages\\keras\\utils\\generic_utils.py\", line 138, in deserialize_keras_object\n    ': ' + class_name)\nValueError: Unknown initializer: GlorotUniform\n\nProcess finished with exit code 1\n</code></pre>\n"}, {"tags": ["python", "amazon-web-services", "amazon-s3", "scikit-learn", "joblib"], "comments": [{"owner": {"reputation": 4076, "user_id": 1806763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GXLjI.png?s=128&g=1", "display_name": "JD D", "link": "https://stackoverflow.com/users/1806763/jd-d"}, "edited": false, "score": 0, "creation_date": 1560387699, "post_id": 56571731, "comment_id": 99722745, "body": "does this result in an error? what is the behavior you are seeing?"}, {"owner": {"reputation": 4076, "user_id": 1806763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GXLjI.png?s=128&g=1", "display_name": "JD D", "link": "https://stackoverflow.com/users/1806763/jd-d"}, "edited": false, "score": 0, "creation_date": 1560387966, "post_id": 56571731, "comment_id": 99722783, "body": "joblib.dump returns a list of filenames... <code>Body</code> needs to be a bytes or a file-like object that can be read."}], "answers": [{"tags": [], "owner": {"reputation": 336, "user_id": 163668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/655035a55b549d3abfb34e962a59985d?s=128&d=identicon&r=PG", "display_name": "Alexei Andreev", "link": "https://stackoverflow.com/users/163668/alexei-andreev"}, "is_accepted": false, "score": 5, "last_activity_date": 1616424397, "last_edit_date": 1616424397, "creation_date": 1569338093, "answer_id": 58083405, "question_id": 56571731, "link": "https://stackoverflow.com/questions/56571731/how-to-save-sklearn-model-on-s3-using-joblib-dump/58083405#58083405", "title": "How to save sklearn model on s3 using joblib.dump?", "body": "<p>Here's a way that worked for me. Pretty straight forward and easy. I'm using <code>joblib</code> (it's better for storing large sklearn models) but you could use <code>pickle</code> too.<br />\nAlso, I'm using temporary files for transferring to/from S3. But if you want, you could store the file in a more permanent location.</p>\n<pre><code>import tempfile\nimport boto3\nimport joblib\n\ns3_resource = boto3.resource('s3')\nbucket_name = &quot;my-bucket&quot;\nkey = &quot;model.pkl&quot;\n\n# WRITE\nwith tempfile.TemporaryFile() as fp:\n    joblib.dump(model, fp)\n    fp.seek(0)\n    s3_resource.put_object(Body=fp.read(), Bucket=bucket_name, Key=key)\n\n# READ\nwith tempfile.TemporaryFile() as fp:\n    s3_resource.download_fileobj(Fileobj=fp, Bucket=bucket_name, Key=key)\n    fp.seek(0)\n    model = joblib.load(fp)\n\n# DELETE\ns3_resource.delete_object(Bucket=bucket_name, Key=key)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 611, "user_id": 4361766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cfd5bb28d0abb6fdce1ff3158d9f62e?s=128&d=identicon&r=PG&f=1", "display_name": "oldmonk", "link": "https://stackoverflow.com/users/4361766/oldmonk"}, "edited": false, "score": 1, "creation_date": 1588747787, "post_id": 60211154, "comment_id": 109013707, "body": "I think location should contain just the folder name inside the bucket i.e <code>location = &#39;folder_name&#47;&#39;</code>. That is what worked for me"}], "tags": [], "owner": {"reputation": 10141, "user_id": 6633975, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_Ta3cjF1uhk/AAAAAAAAAAI/AAAAAAAAAk8/V1id8gyx0PE/photo.jpg?sz=128", "display_name": "Sayali Sonawane", "link": "https://stackoverflow.com/users/6633975/sayali-sonawane"}, "is_accepted": false, "score": 3, "last_activity_date": 1581607335, "creation_date": 1581607335, "answer_id": 60211154, "question_id": 56571731, "link": "https://stackoverflow.com/questions/56571731/how-to-save-sklearn-model-on-s3-using-joblib-dump/60211154#60211154", "title": "How to save sklearn model on s3 using joblib.dump?", "body": "<p>Use following code to dump your model to s3 location in .pkl or .sav format: </p>\n\n<pre><code>import tempfile\nimport boto3\ns3 = boto3.resource('s3')\n\n# you can dump it in .sav or .pkl format \nlocation = 's3://bucket_name/folder_name/'\nmodel_filename = 'model.sav'  # use any extension you want (.pkl or .sav)\nOutputFile = location + model_filename\n\n# WRITE\nwith tempfile.TemporaryFile() as fp:\n    joblib.dump(scikit_learn_model, fp)\n    fp.seek(0)\n    # use bucket_name and OutputFile - s3 location path in string format.\n    s3.Bucket('bucket_name').put_object(Key= OutputFile, Body=fp.read())\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 5087999, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0laPz2h3zcE/AAAAAAAAAAI/AAAAAAAAAiI/D3p-s9rzLRM/photo.jpg?sz=128", "display_name": "Abhi", "link": "https://stackoverflow.com/users/5087999/abhi"}, "is_accepted": false, "score": 0, "last_activity_date": 1612274164, "last_edit_date": 1612274164, "creation_date": 1596011156, "answer_id": 63149415, "question_id": 56571731, "link": "https://stackoverflow.com/questions/56571731/how-to-save-sklearn-model-on-s3-using-joblib-dump/63149415#63149415", "title": "How to save sklearn model on s3 using joblib.dump?", "body": "<p>Just correcting Sayali Sonawane's answer:</p>\n<pre><code>import tempfile\nimport boto3\ns3 = boto3.resource('s3')\n\n# you can dump it in .sav or .pkl format \nlocation = 'folder_name/' # THIS is the change to make the code work\nmodel_filename = 'model.sav'  # use any extension you want (.pkl or .sav)\nOutputFile = location + model_filename\n\n# WRITE\nwith tempfile.TemporaryFile() as fp:\n    joblib.dump(scikit_learn_model, fp)\n    fp.seek(0)\n    # use bucket_name and OutputFile - s3 location path in string format.\n    s3.Bucket('bucket_name').put_object(Key= OutputFile, Body=fp.read())\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 4909831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b150961155b217d427427ea6892e950?s=128&d=identicon&r=PG&f=1", "display_name": "the_dummy", "link": "https://stackoverflow.com/users/4909831/the-dummy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4469, "favorite_count": 4, "answer_count": 3, "score": 10, "last_activity_date": 1616424397, "creation_date": 1560383736, "question_id": 56571731, "link": "https://stackoverflow.com/questions/56571731/how-to-save-sklearn-model-on-s3-using-joblib-dump", "title": "How to save sklearn model on s3 using joblib.dump?", "body": "<p>I have a sklearn model and I want to save the pickle file on my s3 bucket using joblib.dump</p>\n\n<p>I used <code>joblib.dump(model, 'model.pkl')</code> to save the model locally, but I do not know how to save it to s3 bucket.</p>\n\n<pre><code>s3_resource = boto3.resource('s3')\ns3_resource.Bucket('my-bucket').Object(\"model.pkl\").put(Body=joblib.dump(model, 'model.pkl'))\n</code></pre>\n\n<p>I expect the pickled file to be on my s3 bucket.</p>\n"}, {"tags": ["python", "python-3.x", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 4446, "user_id": 576448, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/hVxvC.jpg?s=128&g=1", "display_name": "peterk", "link": "https://stackoverflow.com/users/576448/peterk"}, "is_accepted": false, "score": 0, "last_activity_date": 1560430064, "creation_date": 1560430064, "answer_id": 56580865, "question_id": 56571730, "link": "https://stackoverflow.com/questions/56571730/how-to-simply-map-cells-from-one-csv-matrix-to-another-csv-matrix-with-pandas/56580865#56580865", "title": "How to simply map cells from one csv &quot;matrix&quot; to another csv matrix with pandas data frames preserving row/column order", "body": "<p>Ok - man official Pandas docs are poor.</p>\n\n<p>This is a pretty good one when you don't know the system already.</p>\n\n<p><a href=\"https://www.tutorialspoint.com/python_pandas\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/python_pandas</a></p>\n\n<p>Anyway here is a first pass that works.</p>\n\n<pre><code>#!/usr/bin/python3\n\nimport os\nimport sys\nimport pandas as pd\n\nfileToMapTo = 'SourceValues.csv'\nfileToCorrectFrom = './correctedValues.csv'\noutputFile = 'SourceValues-corrected.csv'\n\n\n#  read in the source files\nprint(\"mapping \\\"\" + fileToCorrectFrom + \"\\\" over \" + fileToMapTo);\n\ntry:\n    subject_df = pd.read_csv(fileToMapTo) # load with default positional index\n    fixer_df = pd.read_csv(fileToCorrectFrom) # load with default positional index\nexcept:\n    sys.err.write(\"Pandas Unable to load: \\\"\" + fileToValidate + \"\\\"\\n\")\n    sys.exit(1)\n\n# create new frame with same column headers as source frame (sets 'x' size of columns)\n# and same \"index\" ( sets Y size of matrix and fills with empty rows )\noutput_df = pd.DataFrame( index = subject_df.index, columns = subject_df.columns.values );\n\n#iterate over rows (In index order)\nfor index, row in subject_df.iterrows():\n    row['AccNumber'] = 1234  # replace a value for a specific column\n    output_df.iloc[index] = row  # set item in output to item in (copy of) input\n\n#write output .csv file from output data frame\n\n# create output folder for results if not present\noutputDir = os.path.abspath(os.path.join(outputFile, os.pardir))\nif not os.path.isdir(outputDir):\n    os.makedirs(outputDir)\n\nprint(\"writing mapped file to: \\\"\" + outputFile + \"\\\"\")\n\n# write without (generated integer, ordered) index names\noutput_df.to_csv(outputFile, index=False)\n</code></pre>\n"}], "owner": {"reputation": 4446, "user_id": 576448, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/hVxvC.jpg?s=128&g=1", "display_name": "peterk", "link": "https://stackoverflow.com/users/576448/peterk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560430064, "creation_date": 1560383736, "last_edit_date": 1560384043, "question_id": 56571730, "link": "https://stackoverflow.com/questions/56571730/how-to-simply-map-cells-from-one-csv-matrix-to-another-csv-matrix-with-pandas", "title": "How to simply map cells from one csv &quot;matrix&quot; to another csv matrix with pandas data frames preserving row/column order", "body": "<p>I want to create a csv file as a copy one csv to another replacing values in the original also mapping columns with different \"header name keys\" from another file and replacing columns in the origial. Each file has the same number of rows. The row order needs to be maintained from input to output, and the column order needs to be maintained in the order of the original file being altered. in sort of C++ java like pseudo code I want to do:</p>\n\n<pre><code>newValues = pandas.read_csv('newValues.csv')\nsourceMatrix = pandas.read_csv('sourceFile.csv')\n\n# note index is positional from row 0 to max\n\nfor( rowIndex = 0; rowIndex &lt; rowCount; ++rowIndex) {\n   newRow = newValues.rows[rowIndex];\n   destRow = sourceMatrix.rows[rowIndex];\n   # modify original row columns \"sparsely\" with other \"newValues\" columns\n   destRow['destKey1'] = newValues['sourceKey1'] \n   ...\n   sourceMatrix.rows[rowIndex] = destRow # replace original row with changed row\n}\n\n# write output of altered source \nsourceMatrix.to_csv('outputFile.csv')\n</code></pre>\n\n<p>Lots of bits and pieces out there in partial and barely described contexts but not easy to grok how to do the above when everything is dynamic lookup and potentially not preserving key/value order. In this case data type is not relevant just whether strings or not strings in the fields.</p>\n"}, {"tags": ["python", "pandas", "dataframe", "merge"], "answers": [{"tags": [], "owner": {"reputation": 145, "user_id": 8438955, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jNtcO.jpg?s=128&g=1", "display_name": "leo", "link": "https://stackoverflow.com/users/8438955/leo"}, "is_accepted": false, "score": 2, "last_activity_date": 1560384291, "creation_date": 1560384291, "answer_id": 56571786, "question_id": 56571706, "link": "https://stackoverflow.com/questions/56571706/is-there-a-way-to-do-a-merge-using-pandas-where-one-column-is-a-list-and-another/56571786#56571786", "title": "Is there a way to do a merge using pandas where one column is a list and another column might contain an element in that list?", "body": "<p>I think you actually described the most efficient way to do this: <code>expanding the first dataframe into multiple rows per value then doing the join</code>.</p>\n\n<p>The other option I could see is iterating through the second one. Say</p>\n\n<pre><code>df1 =\\\nid features\n0   ['a', 'b']\n1   ['c', 'd', 'e']\n2   ['f']\n\ndf2 =\\\nid features other\n0   'a'      3\n1   'z'      3\n2   'f'      3\n</code></pre>\n\n<p>Do something like:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>features_in_df1 = set(np.flatten(df1.feature.values))\n\noutput = []\nfor _, row in df2.iterrows():\n    if row['feature'] in features_in_df1:\n        output.append(row)\n\ndf_merge = pd.concat(output)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 183, "user_id": 6144021, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5GbVD.jpg?s=128&g=1", "display_name": "D00dood", "link": "https://stackoverflow.com/users/6144021/d00dood"}, "edited": false, "score": 0, "creation_date": 1560384682, "post_id": 56571799, "comment_id": 99722271, "body": "Sorry, I should have made the clarification that their ids cannot be shared.  I will update the question, my mistake!"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 1, "last_activity_date": 1560385121, "last_edit_date": 1560385121, "creation_date": 1560384421, "answer_id": 56571799, "question_id": 56571706, "link": "https://stackoverflow.com/questions/56571706/is-there-a-way-to-do-a-merge-using-pandas-where-one-column-is-a-list-and-another/56571799#56571799", "title": "Is there a way to do a merge using pandas where one column is a list and another column might contain an element in that list?", "body": "<p>IIUC</p>\n\n<pre><code>s=df1.merge(df2,on='id')\ndf2[[y in x for x , y in zip(s.features_x,s.features_y)]]\n   id features  other\n0   0        a      3\n2   2        f      3\n</code></pre>\n\n<hr>\n\n<p>Update </p>\n\n<pre><code>df2[df2.features.isin(df1.features.sum())]\n   id features  other\n0   0        a      3\n2   2        f      3\n</code></pre>\n"}], "owner": {"reputation": 183, "user_id": 6144021, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5GbVD.jpg?s=128&g=1", "display_name": "D00dood", "link": "https://stackoverflow.com/users/6144021/d00dood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1560385121, "creation_date": 1560383494, "last_edit_date": 1560384763, "question_id": 56571706, "link": "https://stackoverflow.com/questions/56571706/is-there-a-way-to-do-a-merge-using-pandas-where-one-column-is-a-list-and-another", "title": "Is there a way to do a merge using pandas where one column is a list and another column might contain an element in that list?", "body": "<p>Right now I have a two pandas dataframes:</p>\n\n<p>The first one looks like this:</p>\n\n<pre><code>id1 features\n0   ['a', 'b']\n1   ['c', 'd', 'e']\n2   ['f']\n</code></pre>\n\n<p>and the second looks like this:</p>\n\n<pre><code>id2 features other\n224   'a'      3\n264   'z'      3\n277   'f'      3\n</code></pre>\n\n<p>and I want to use the pandas <code>.merge()</code> function to combine both of the two. The output should look something like this:</p>\n\n<pre><code>id1 features other\n0    'a'       3 \n2    'f'       3\n</code></pre>\n\n<p>I know there might be a way to do it by expanding the first dataframe into multiple rows per value then doing the join, but I am wondering if there is any way to do it without doing this, or what the cleanest way of doing this would be.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1560384609, "post_id": 56571694, "comment_id": 99722263, "body": "I do not think they have different"}, {"owner": {"reputation": 850, "user_id": 10711194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa9a6231db582eeca285c2b4074dc0ca?s=128&d=identicon&r=PG&f=1", "display_name": "BeforeFlight", "link": "https://stackoverflow.com/users/10711194/beforeflight"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1560448205, "post_id": 56571694, "comment_id": 99749993, "body": "I&#39;m agree on 0.99. But I wonder is someone using 1-level MI instead of RI. Maybe when some general processing which should span MI as well as RI..?"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1561672995, "post_id": 56571694, "comment_id": 100152525, "body": "~sure done :-) ~"}], "answers": [{"comments": [{"owner": {"reputation": 850, "user_id": 10711194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa9a6231db582eeca285c2b4074dc0ca?s=128&d=identicon&r=PG&f=1", "display_name": "BeforeFlight", "link": "https://stackoverflow.com/users/10711194/beforeflight"}, "edited": false, "score": 0, "creation_date": 1560448114, "post_id": 56571829, "comment_id": 99749965, "body": "If talking for regular index - one may add that it is more familiar for users. And in general working with regular index is simpler than with 1-level MultiIndex."}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 1, "last_activity_date": 1560384813, "creation_date": 1560384813, "answer_id": 56571829, "question_id": 56571694, "link": "https://stackoverflow.com/questions/56571694/pandas-single-level-multiindex-vs-plain-index/56571829#56571829", "title": "Pandas single level multiindex vs plain index", "body": "<p>I can only think of the memory usage , if you only have one single level you should using plain index . </p>\n\n<pre><code>df.index.memory_usage()\n123\ndf.index=[1,2,3]\ndf.index.memory_usage()\n24\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 14826425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/062fd9f9dabe954c13bb801add1dd950?s=128&d=identicon&r=PG&f=1", "display_name": "LogZ", "link": "https://stackoverflow.com/users/14826425/logz"}, "is_accepted": false, "score": 0, "last_activity_date": 1608461918, "creation_date": 1608461918, "answer_id": 65379165, "question_id": 56571694, "link": "https://stackoverflow.com/questions/56571694/pandas-single-level-multiindex-vs-plain-index/65379165#65379165", "title": "Pandas single level multiindex vs plain index", "body": "<p>I think the behavior <em>should</em> be the same, but there appear to be subtle differences.</p>\n<p>For example, the single-level MultiIndex causes problems with indexing.\nSee this question: <a href=\"https://stackoverflow.com/questions/65379153/pandas-indexing-error-with-1-non-unique-query-and-2-single-level-multiindex\">Pandas indexing error with (1) non-unique query, and (2) single-level MultiIndex</a></p>\n"}], "owner": {"reputation": 850, "user_id": 10711194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa9a6231db582eeca285c2b4074dc0ca?s=128&d=identicon&r=PG&f=1", "display_name": "BeforeFlight", "link": "https://stackoverflow.com/users/10711194/beforeflight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 56571829, "answer_count": 2, "score": 0, "last_activity_date": 1608461918, "creation_date": 1560383330, "question_id": 56571694, "link": "https://stackoverflow.com/questions/56571694/pandas-single-level-multiindex-vs-plain-index", "title": "Pandas single level multiindex vs plain index", "body": "<p>One may produce single level MultiIndex in pandas like so:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>index = pd.MultiIndex.from_arrays([[1,2,3]])\nindex\nprint ('Number of levels = %d' % index.nlevels)\n</code></pre>\n\n<pre class=\"lang-py prettyprint-override\"><code>MultiIndex(levels=[[1, 2, 3]],\n           codes=[[0, 1, 2]])\nNumber of levels = 1\n</code></pre>\n\n<p>And then use it as simple index, for example in order to init DataFrame:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df = pd.DataFrame([0,0,15], index=index, columns=['d'])\ndf\n</code></pre>\n\n<p>But is there any 'special' use cases of single level multiindex instead of simple index? I mean the cases where simple index 'less comfortable' or even won't work.</p>\n"}, {"tags": ["python", "scipy", "statsmodels"], "owner": {"reputation": 577, "user_id": 11639529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afd3b01d35a209bfcb7b6c1d7839e223?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah", "link": "https://stackoverflow.com/users/11639529/sarah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1096, "favorite_count": 0, "closed_date": 1560384917, "answer_count": 0, "score": 0, "last_activity_date": 1560383311, "creation_date": 1560383311, "question_id": 56571691, "link": "https://stackoverflow.com/questions/56571691/statsmodel-importing-error-with-factorial-in-scipy-misc", "closed_reason": "Duplicate", "title": "statsmodel importing error with &#39;factorial&#39; in scipy.misc", "body": "<p>I am trying to import the following, and I am getting importError:</p>\n\n<p><code>import statsmodels.api as sm</code></p>\n\n<p><code>cannot import name 'factorial' from 'scipy.misc'</code></p>\n\n<p>From my research, it looks like 'factorial' is removed from scipy.misc, and to scipy.special. I read this from another post, but all of my libraries are up to date.</p>\n\n<pre><code>ImportError                               Traceback (most recent call last)\n&lt;ipython-input-7-085740203b77&gt; in &lt;module&gt;\n----&gt; 1 import statsmodels.api as sm\n\n~\\Anaconda3\\lib\\site-packages\\statsmodels\\api.py in &lt;module&gt;\n     14 from . import robust\n     15 from .robust.robust_linear_model import RLM\n---&gt; 16 from .discrete.discrete_model import (Poisson, Logit, Probit,\n     17                                       MNLogit, NegativeBinomial,\n     18                                       GeneralizedPoisson,\n\n~\\Anaconda3\\lib\\site-packages\\statsmodels\\discrete\\discrete_model.py in &lt;module&gt;\n     43 \n     44 from statsmodels.base.l1_slsqp import fit_l1_slsqp\n---&gt; 45 from statsmodels.distributions import genpoisson_p\n     46 \n     47 try:\n\n~\\Anaconda3\\lib\\site-packages\\statsmodels\\distributions\\__init__.py in &lt;module&gt;\n      1 from .empirical_distribution import ECDF, monotone_fn_inverter, StepFunction\n----&gt; 2 from .edgeworth import ExpandedNormal\n      3 from .discrete import genpoisson_p, zipoisson, zigenpoisson, zinegbin\n\n~\\Anaconda3\\lib\\site-packages\\statsmodels\\distributions\\edgeworth.py in &lt;module&gt;\n      5 import numpy as np\n      6 from numpy.polynomial.hermite_e import HermiteE\n----&gt; 7 from scipy.misc import factorial\n      8 from scipy.stats import rv_continuous\n      9 import scipy.special as special\n</code></pre>\n\n<p>And at line 9, it's importing scipy.special as special so from the post I read I should be able to import it without error... I'm not sure what is the problem here.</p>\n"}, {"tags": ["python", "preprocessor"], "answers": [{"tags": [], "owner": {"reputation": 351, "user_id": 11639533, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Q0wHvIwXif8/AAAAAAAAAAI/AAAAAAAARuU/G8jY9kkwM-A/photo.jpg?sz=128", "display_name": "Michael Noguera", "link": "https://stackoverflow.com/users/11639533/michael-noguera"}, "is_accepted": false, "score": 0, "last_activity_date": 1560385959, "last_edit_date": 1592644375, "creation_date": 1560385959, "answer_id": 56571939, "question_id": 56571684, "link": "https://stackoverflow.com/questions/56571684/how-to-remove-the-stranger-word-from-text/56571939#56571939", "title": "How to remove the stranger word from text", "body": "<p><strong>It is possible to do what you are asking using <a href=\"https://www.regular-expressions.info/quickstart.html\" rel=\"nofollow noreferrer\">regular expressions</a></strong>, through the <code>re</code> library in python. You can think of regular expressions as a sort of advanced find-and-replace function.</p>\n<p>User <a href=\"https://stackoverflow.com/users/977038/abhijit\">@Abijit</a> provides a regular expression that will do the task in question in <a href=\"https://stackoverflow.com/a/8377440/11639533\">this answer</a>.</p>\n<blockquote>\n<p>...The following regex just strips of an URL (not just http), any punctuations, User Names or Any non alphanumeric characters. It also separates the word with a single space....</p>\n<p>Here is what I am proposing.</p>\n<pre class=\"lang-py prettyprint-override\"><code>' '.join(re.sub(&quot;(@[A-Za-z0-9]+)|([^0-9A-Za-z \\t])|(\\w+:\\/\\/\\S+)&quot;,&quot; &quot;,x).split())\n</code></pre>\n</blockquote>\n<p>Testing this out on your sample strings, it appears to work in your case as well. Here is my code.</p>\n<pre class=\"lang-py prettyprint-override\"><code>import re  # Python regex library\noriginal: str = input()\n# This following line uses @Abijit's regex\ncleaned: str = ' '.join(re.sub(&quot;(@[A-Za-z0-9]+)|([^0-9A-Za-z \\t])|(\\w+:\\/\\/\\S+)&quot;,&quot; &quot;,original).split())\nprint(cleaned)\n</code></pre>\n<p>The output for each one is as follows:</p>\n<ul>\n<li><code>KFC must be out chicken This guy it s losing his shit</code></li>\n<li><code>Aye babe Why is Pizza hut calling you at 10 PM</code></li>\n<li><code>The team will be in tomorrow from 2 30 5 30pm Providing HIV STI tests amp free condoms along with information amp advice on PrEP contraception amp other sexualhealth issues</code></li>\n</ul>\n"}], "owner": {"reputation": 5, "user_id": 11294750, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uzdrNIEr6uU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfE6jFryI2AkUmuMX1b1KJr1E_xeA/mo/photo.jpg?sz=128", "display_name": "AsmaaS", "link": "https://stackoverflow.com/users/11294750/asmaas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1560385959, "creation_date": 1560383260, "question_id": 56571684, "link": "https://stackoverflow.com/questions/56571684/how-to-remove-the-stranger-word-from-text", "title": "How to remove the stranger word from text", "body": "<p>I'm setting up a new project in sentiment analysis , and want to remove any stranger word,character,emails,or any names with @ ,or any ling space ,clean any noise from text </p>\n\n<pre><code>input text =\"@maggieNYT KFC must be out chicken.  This guy it\u0623?\u0622?\u0623?\u0622?\u0623?\u0622?s losing his shit.\"\n</code></pre>\n\n<p><strong>or</strong></p>\n\n<pre><code>input text =\"\u2030??Aye babe. Why is Pizza hut calling you at 10 PM?\u2030?? \"\n</code></pre>\n\n<p><strong>or</strong></p>\n\n<pre><code>input text =\"The team will be in @KingstonLibrary tomorrow from 2:30 - 5:30pm. Providing\u0623?\u0622\u067e#HIV\u0623?\u0622\u067e/ #STI tests &amp;amp;\u0623?\u0622\u067e#free\u0623?\u0622\u067econdoms, along with information &amp;amp; advice on\u0623?\u0622\u067e#PrEP #contraception\u0623?\u0622\u067e&amp;amp; other\u0623?\u0622\u067e#sexualhealth\u0623?\u0622\u067eissues.\n</code></pre>\n"}, {"tags": ["python", "kivy"], "answers": [{"tags": [], "owner": {"reputation": 564, "user_id": 8324477, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RSH2VfHXERo/AAAAAAAAAAI/AAAAAAAAABk/rBzS6zg4dRY/photo.jpg?sz=128", "display_name": "me2 beats", "link": "https://stackoverflow.com/users/8324477/me2-beats"}, "is_accepted": false, "score": 0, "last_activity_date": 1560427349, "last_edit_date": 1560427349, "creation_date": 1560386313, "answer_id": 56571970, "question_id": 56571630, "link": "https://stackoverflow.com/questions/56571630/getting-rid-of-magic-numbers-in-boundednumericproperty-errorhandler/56571970#56571970", "title": "Getting rid of magic numbers in BoundedNumericProperty errorhandler", "body": "<p>This seems to work</p>\n\n<pre><code>class MyProperty(BoundedNumericProperty):\n    def __init__(self, *largs, **kw):\n        my_min = kw.get('min', 0)  # 0 is default\n        my_max = kw.get('max', 1)  # 1 is default\n        kw['min'] = my_min\n        kw['max'] = my_max\n        kw['errorhandler'] = lambda x: min(max(x, my_min), my_max)\n        super().__init__(*largs, **kw)\n</code></pre>\n\n<p>another example (without using lambda):</p>\n\n<pre><code>class MyProperty(BoundedNumericProperty):\n    def __init__(self, *largs, **kw):\n        self._my_min = kw.get('min', 0)  # 0 is default\n        self._my_max = kw.get('max', 1)  # 1 is default\n        kw['min'] = self._my_min\n        kw['max'] = self._my_max\n        kw['errorhandler'] = self._my_errorhandler\n        super().__init__(*largs, **kw)\n\n    def _my_errorhandler(self, x):\n        return min(max(x, self._my_min), self._my_max)\n</code></pre>\n"}], "owner": {"reputation": 564, "user_id": 8324477, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RSH2VfHXERo/AAAAAAAAAAI/AAAAAAAAABk/rBzS6zg4dRY/photo.jpg?sz=128", "display_name": "me2 beats", "link": "https://stackoverflow.com/users/8324477/me2-beats"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560427349, "creation_date": 1560382764, "question_id": 56571630, "link": "https://stackoverflow.com/questions/56571630/getting-rid-of-magic-numbers-in-boundednumericproperty-errorhandler", "title": "Getting rid of magic numbers in BoundedNumericProperty errorhandler", "body": "<p>I am new to using BoundedNumericProperty.\nI need to limit the value of a variable, let's say named \"saturation\", from 0 to 1, so that if I try to set a value greater than 1, I will get 1, if less than 0, then 0.</p>\n\n<p>I learned that it can be done like this:</p>\n\n<pre><code>saturation = BoundedNumericProperty (\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00.1,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0min = 0,\n \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0max = 1.,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0errorhandler = lambda x: min (max (x, 0), 1))\n</code></pre>\n\n<p>This code works correctly but it is not convenient enough because of errorhandler.</p>\n\n<p>As you can see the problem is that I have unnecessary magic numbers in errorhandler (0 and 1), which duplicate min and max arguments values.</p>\n\n<p>I looked at different examples of using BoundedNumericProperty on Github, and I see this thing in almost all examples.</p>\n\n<p>Instead, I would like to simply write something like:</p>\n\n<pre><code>saturation = MyProperty (\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00.1,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0min = 0,\n \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0max = 1.,)\n</code></pre>\n\n<p>and I would like this property to work this way:</p>\n\n<pre><code>class MyProperty(BoundedNumericProperty): \n    def __init__(*args, min=0, max=1, **kwargs):\n         super().__init__(*args, min=min, max=max, errorhandler=lambda x: min(max(x, min), max), **kwargs)\n</code></pre>\n\n<p>But here I get</p>\n\n<pre><code>super().__init__(*args, min=min, max=max, errorhandler=lambda x: min(max(x, min), max), **kwargs)\n RuntimeError: super(): no arguments\n</code></pre>\n\n<p>(python3)</p>\n\n<p>How to implement this?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1560383077, "post_id": 56571617, "comment_id": 99722009, "body": "Don&#39;t use <code>int</code> as a variable name. It&#39;s already the name of a built-in function."}], "answers": [{"tags": [], "owner": {"reputation": 556, "user_id": 10671246, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RGCjZMD-Fno/AAAAAAAAAAI/AAAAAAAAPdQ/adV6fj4Rs8U/photo.jpg?sz=128", "display_name": "Prachiti Prakash Prabhu", "link": "https://stackoverflow.com/users/10671246/prachiti-prakash-prabhu"}, "is_accepted": true, "score": 1, "last_activity_date": 1560383146, "creation_date": 1560383146, "answer_id": 56571669, "question_id": 56571617, "link": "https://stackoverflow.com/questions/56571617/creating-a-file-with-a-list/56571669#56571669", "title": "Creating a file with a list", "body": "<pre><code>f = open(\"data.txt\",\"w\")\nfor i in range (0,5):\n    f.write(str(i))\n    f.write(str(i+1))\n    f.write(\"\\n\")\nf.close()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 86, "user_id": 6947748, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YBaCTXIW3dQ/AAAAAAAAAAI/AAAAAAAAAVA/BwotqmngVmc/photo.jpg?sz=128", "display_name": "Nikolaj Kiel", "link": "https://stackoverflow.com/users/6947748/nikolaj-kiel"}, "is_accepted": false, "score": 0, "last_activity_date": 1560383744, "creation_date": 1560383744, "answer_id": 56571733, "question_id": 56571617, "link": "https://stackoverflow.com/questions/56571617/creating-a-file-with-a-list/56571733#56571733", "title": "Creating a file with a list", "body": "<p>Use str(i) or:</p>\n\n<pre><code>with open('data.txt','w') as fout:\n    for i in range(0,5):\n        fout.write(f'{i} {i+1}\\n')\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 11606767, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jh8P8Ebd9mE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reH-Dl3siCxbN6yljlsVgjW_1huwA/mo/photo.jpg?sz=128", "display_name": "Wilgens Metelus", "link": "https://stackoverflow.com/users/11606767/wilgens-metelus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 696, "favorite_count": 0, "accepted_answer_id": 56571669, "answer_count": 2, "score": 0, "last_activity_date": 1560383744, "creation_date": 1560382659, "question_id": 56571617, "link": "https://stackoverflow.com/questions/56571617/creating-a-file-with-a-list", "title": "Creating a file with a list", "body": "<p>so for my code, I am trying to create a program that creates a file, and enters this into the file.</p>\n\n<pre><code>0 1\n1 2\n2 3\n3 4\n4 5\n</code></pre>\n\n<p>I was trying to get a for loop to obtain this, but I am getting an error with using an int in a string. How would you tell the program to also print the first number in the row plus one without using the +1 in the write?</p>\n\n<pre><code>f = open(\"data.txt\",\"w\")\nfor int in range(0,4):\n    f.write(int)\n    f.write(int+1)\n    f.write(\"\\n\")\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "numpy", "random", "probability"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1560388334, "post_id": 56571609, "comment_id": 99722844, "body": "The argument for <code>np.zeros</code> is supposed to be a shape - an integer, or tuple of integers, e.g <code>np.zeros((2,3))</code>.  Your <code>a&#47;A</code> is an array of floats, so the <code>sum</code> will also be a float."}, {"owner": {"reputation": 772, "user_id": 6150310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb499bc6f5987c406bdb42908a73b666?s=128&d=identicon&r=PG&f=1", "display_name": "mlenthusiast", "link": "https://stackoverflow.com/users/6150310/mlenthusiast"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1560442310, "post_id": 56571609, "comment_id": 99747239, "body": "So how do I fix this? I tried changing the argument to <code>np.zeros(sum(A.shape))</code> but it&#39;s still the same error"}], "answers": [{"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 1, "last_activity_date": 1560445967, "creation_date": 1560445967, "answer_id": 56585537, "question_id": 56571609, "link": "https://stackoverflow.com/questions/56571609/downsample-numpy-array-while-preserving-distribution/56585537#56585537", "title": "Downsample numpy array while preserving distribution", "body": "<pre><code>In [67]: a = np.array([1.94, 5.68, 2.77, 7.39, 2.51])                                                  \nIn [68]: np.zeros(sum(a))                                                                              \n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n&lt;ipython-input-68-263779bc977b&gt; in &lt;module&gt;\n----&gt; 1 np.zeros(sum(a))\n\nTypeError: 'numpy.float64' object cannot be interpreted as an integer\n</code></pre>\n\n<p>sum on the shape does not produce this error:</p>\n\n<pre><code>In [69]: np.zeros(sum(a.shape))                                                                        \nOut[69]: array([0., 0., 0., 0., 0.])\n</code></pre>\n\n<p>But you shouldn't need to use sum:</p>\n\n<pre><code>In [70]: a.shape                                                                                       \nOut[70]: (5,)\nIn [71]: np.zeros(a.shape)                                                                             \nOut[71]: array([0., 0., 0., 0., 0.])\n</code></pre>\n\n<p>In fact if <code>a</code> is 2d, and you want a 1d array with the same number of items, you want the product of the shape, not the sum.</p>\n\n<p>But do you want to return an array exactly the same size as <code>A</code>? I thought you were trying to downsize.</p>\n"}], "owner": {"reputation": 772, "user_id": 6150310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb499bc6f5987c406bdb42908a73b666?s=128&d=identicon&r=PG&f=1", "display_name": "mlenthusiast", "link": "https://stackoverflow.com/users/6150310/mlenthusiast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1174, "favorite_count": 0, "accepted_answer_id": 56585537, "answer_count": 1, "score": 0, "last_activity_date": 1560445967, "creation_date": 1560382566, "question_id": 56571609, "link": "https://stackoverflow.com/questions/56571609/downsample-numpy-array-while-preserving-distribution", "title": "Downsample numpy array while preserving distribution", "body": "<p>I'm trying to write a function that can randomly sample a <code>numpy.ndarray</code> that has floating point numbers while preserving the distribution of the numbers in the array. I have this function for now:</p>\n\n<pre><code>import random\nfrom collections import Counter\n\ndef sample(A, N):\n    population = np.zeros(sum(A))\n    counter = 0\n    for i, x in enumerate(A):\n            for j in range(x):\n                    population[counter] = i\n                    counter += 1\n\n    sampling = population[np.random.choice(0, len(population), N)]\n    return np.histogram(sampling, bins = np.arange(len(A)+1))[0]\n</code></pre>\n\n<p>So I would like the function to work something like this(doesn't include accounting for distribution for this example):</p>\n\n<pre><code>a = np.array([1.94, 5.68, 2.77, 7.39, 2.51])\nnew_a = sample(a,3)\n\nnew_a\narray([1.94, 2.77, 7.39])\n</code></pre>\n\n<p>However, when I apply the function to an array like this I'm getting:</p>\n\n<pre><code>TypeError                                 Traceback (most recent call last)\n&lt;ipython-input-74-07e3aa976da4&gt; in &lt;module&gt;\n----&gt; 1 sample(a, 3)\n\n&lt;ipython-input-63-2d69398e2a22&gt; in sample(A, N)\n      3 \n      4 def sample(A, N):\n----&gt; 5     population = np.zeros(sum(A))\n      6     counter = 0\n      7     for i, x in enumerate(A):\n\nTypeError: 'numpy.float64' object cannot be interpreted as an integer\n</code></pre>\n\n<p>Any help on modifying or create a function that would work for this would be really appreciated!</p>\n"}, {"tags": ["python", "django", "django-rest-framework"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8882651, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gkMrfLlEglo/AAAAAAAAAAI/AAAAAAAAGVY/TEVRyARIB9o/photo.jpg?sz=128", "display_name": "joannarch", "link": "https://stackoverflow.com/users/8882651/joannarch"}, "edited": false, "score": 0, "creation_date": 1560440015, "post_id": 56573982, "comment_id": 99746009, "body": "That didn&#39;t change anything; I still get a  <code>RecursionError:</code> . Even setting  <code>depth = 0</code>  didn&#39;t affect it either."}, {"owner": {"reputation": 39590, "user_id": 2696165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dd17c045c8c39de4f41c3f3ded5d0ca?s=128&d=identicon&r=PG&f=1", "display_name": "ruddra", "link": "https://stackoverflow.com/users/2696165/ruddra"}, "reply_to_user": {"reputation": 23, "user_id": 8882651, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gkMrfLlEglo/AAAAAAAAAAI/AAAAAAAAGVY/TEVRyARIB9o/photo.jpg?sz=128", "display_name": "joannarch", "link": "https://stackoverflow.com/users/8882651/joannarch"}, "edited": false, "score": 0, "creation_date": 1560442828, "post_id": 56573982, "comment_id": 99747480, "body": "Did you remov RecursiveField?"}], "tags": [], "owner": {"reputation": 39590, "user_id": 2696165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dd17c045c8c39de4f41c3f3ded5d0ca?s=128&d=identicon&r=PG&f=1", "display_name": "ruddra", "link": "https://stackoverflow.com/users/2696165/ruddra"}, "is_accepted": true, "score": 0, "last_activity_date": 1560404356, "creation_date": 1560404356, "answer_id": 56573982, "question_id": 56571581, "link": "https://stackoverflow.com/questions/56571581/how-to-serialize-a-django-model-with-several-self-referenceing-fields-with-a-dep/56573982#56573982", "title": "How to serialize a django model with several self referenceing fields with a depth of 1", "body": "<p>Just use <a href=\"https://www.django-rest-framework.org/api-guide/serializers/#specifying-nested-serialization\" rel=\"nofollow noreferrer\"><strong><code>depth = 1</code></strong></a> in Serializer's Meta class:</p>\n\n<pre><code>class ClientSerializerWithFriends(serializers.ModelSerializer):\n    class Meta:\n        model = Client\n        fields = (\n            \"my_id\",\n            \"name\",\n            \"days_since_last_review\",\n            \"friend_1\",\n            \"friend_2\",\n            \"friend_3\",\n        )\n        depth = 1\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 8882651, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gkMrfLlEglo/AAAAAAAAAAI/AAAAAAAAGVY/TEVRyARIB9o/photo.jpg?sz=128", "display_name": "joannarch", "link": "https://stackoverflow.com/users/8882651/joannarch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 56573982, "answer_count": 1, "score": 0, "last_activity_date": 1560404356, "creation_date": 1560382211, "question_id": 56571581, "link": "https://stackoverflow.com/questions/56571581/how-to-serialize-a-django-model-with-several-self-referenceing-fields-with-a-dep", "title": "How to serialize a django model with several self referenceing fields with a depth of 1", "body": "<p>How do I serialize my model without an endless recursion? I only want to replace foreign keys with one row deep of information.</p>\n\n<p>Currently I have this:</p>\n\n<pre><code>class Client(models.Model):\n    my_id = models.CharField(max_length=500, unique=True)\n    name = models.CharField(max_length=500)\n    last_update = models.DateField(null=True, blank=True)\n\n    friend_1  = models.ForeignKey(\n        \"self\",\n        related_name=\"friend_1a\",\n        on_delete=models.CASCADE,\n        to_field=\"my_id\",\n        null=True,\n        blank=True,\n    )\n    friend_2 = models.ForeignKey(\n        \"self\",\n        related_name=\"friend_2a\",\n        on_delete=models.CASCADE,\n        to_field=\"my_id\",\n        null=True,\n        blank=True,\n    )\n    friend_3 = models.ForeignKey(\n        \"self\",\n        related_name=\"friend_3a\",\n        on_delete=models.CASCADE,\n        to_field=\"my_id\",\n        null=True,\n        blank=True,\n    )\n\n    def _get_days_since_last_review(self):\n        today = date.today()\n        if self.last_update is None:\n            self.last_update = today\n        return str((today - self.last_update).days)\n\n    days_since_last_review = property(_get_days_since_last_review)\n\n    def __str__(self):\n        return self.name\n\n\nclass ClientSerializer(serializers.Serializer):\n    my_id = serializers.CharField(max_length=500)\n    name = serializers.CharField(max_length=500)\n    days_since_last_review = serializers.CharField(max_length=500)\n    friend_1 = serializers.CharField()\n    friend_2 = serializers.CharField()\n    friend_3 = serializers.CharField()\n\n\nclass ClientSerializerWithFriends(serializers.ModelSerializer):\n    \"\"\" this is a recursive infinite loop. TODO: Fix Me! \"\"\"\n    friend_1 = RecursiveField(allow_null=True)\n    friend_2 = RecursiveField(allow_null=True)\n    friend_3 = RecursiveField(allow_null=True)\n\n    class Meta:\n        model = Client\n        fields = (\n            \"my_id\",\n            \"name\",\n            \"days_since_last_review\",\n            \"competitor_1\",\n            \"competitor_2\",\n            \"competitor_3\",\n        )\n\n</code></pre>\n\n<p>but I can't seem to find a way to limit the <code>RecursiveField()</code> to one level of depth. Currently it reaches the max depth of recursion because friends are reciprocal. </p>\n\n<p>Basically JSON of it would be:</p>\n\n<pre><code>[{\n    \"my_id\": \"LH7K_T\",\n    \"name\": \"Jack\",\n    \"last_update\": \"2019-06-03\",\n    \"days_since_last_review\": \"9\",\n    \"friend_1\": {\n        \"id\": 6,\n        \"my_id\": \"4YR0_T\",\n        \"name\": \"Austin\",\n        \"last_update\": \"2019-06-03\",\n        \"friend_1\": \"LH7K_T\",\n        \"friend_2\": \"M5XQ2o\",\n        \"friend_3\": null\n    },\n    \"competitor_2\": {\n        \"id\": 8,\n        \"my_id\": \"C3ogRZ\",\n        \"name\": \"Flo\",\n        \"last_update\": \"2019-06-04\",\n        \"friend_1\": \"LH7K_T\",\n        \"friend_2\": \"0vYgr4\",\n        \"friend_3\": \"M5XQ2o\"\n    },\n    \"competitor_3\": {\n        \"id\": 7,\n        \"my_id\": \"M5XQ2o\",\n        \"name\": \"Charlotte\",\n        \"last_update\": \"2019-06-02\",\n        \"friend_1\": \"LH7K_T\",\n        \"friend_2\": null,\n        \"friend_3\": null\n    }\n}]\n</code></pre>\n"}, {"tags": ["python", "matplotlib", "line-plot", "data-representation"], "comments": [{"owner": {"reputation": 497, "user_id": 11547056, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WH8IRrFLmic/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd5XYkUMzJKSICt7ewlw34CQrft2Q/mo/photo.jpg?sz=128", "display_name": "pnovotnyq", "link": "https://stackoverflow.com/users/11547056/pnovotnyq"}, "edited": false, "score": 0, "creation_date": 1560386281, "post_id": 56571566, "comment_id": 99722517, "body": "Difficult to answer. Could you be more specific in your question? You could start with a <a href=\"https://matplotlib.org/3.1.0/api/_as_gen/matplotlib.pyplot.hist.html\" rel=\"nofollow noreferrer\">histogram</a> and a <a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.spectrogram.html\" rel=\"nofollow noreferrer\">spectrogram</a>. <code>matplotlib.pyplot.hist</code> <code>scipy.signal.spectrogram</code>"}, {"owner": {"reputation": 2445, "user_id": 5020803, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-w1adMH7HR84/AAAAAAAAAAI/AAAAAAAAAC8/fUhQfhwg4SQ/photo.jpg?sz=128", "display_name": "BenT", "link": "https://stackoverflow.com/users/5020803/bent"}, "edited": false, "score": 0, "creation_date": 1560402540, "post_id": 56571566, "comment_id": 99725496, "body": "Why not make it a scatter plot and use points instead of lines?"}, {"owner": {"reputation": 1, "user_id": 7449109, "user_type": "registered", "profile_image": "https://graph.facebook.com/10158039402450034/picture?type=large", "display_name": "Abdelrahman Elbashandy", "link": "https://stackoverflow.com/users/7449109/abdelrahman-elbashandy"}, "reply_to_user": {"reputation": 497, "user_id": 11547056, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WH8IRrFLmic/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd5XYkUMzJKSICt7ewlw34CQrft2Q/mo/photo.jpg?sz=128", "display_name": "pnovotnyq", "link": "https://stackoverflow.com/users/11547056/pnovotnyq"}, "edited": false, "score": 0, "creation_date": 1560466506, "post_id": 56571566, "comment_id": 99756520, "body": "@PetrNovotn&#253; The graph is showing throughput in one second range. The numbers oscillating between 2 and 5 units per seconds. I will edit the question clarify it more."}, {"owner": {"reputation": 1, "user_id": 7449109, "user_type": "registered", "profile_image": "https://graph.facebook.com/10158039402450034/picture?type=large", "display_name": "Abdelrahman Elbashandy", "link": "https://stackoverflow.com/users/7449109/abdelrahman-elbashandy"}, "reply_to_user": {"reputation": 2445, "user_id": 5020803, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-w1adMH7HR84/AAAAAAAAAAI/AAAAAAAAAC8/fUhQfhwg4SQ/photo.jpg?sz=128", "display_name": "BenT", "link": "https://stackoverflow.com/users/5020803/bent"}, "edited": false, "score": 0, "creation_date": 1560466511, "post_id": 56571566, "comment_id": 99756523, "body": "@BenT scatter could work by showing the thickness of a line. Thanks."}], "owner": {"reputation": 1, "user_id": 7449109, "user_type": "registered", "profile_image": "https://graph.facebook.com/10158039402450034/picture?type=large", "display_name": "Abdelrahman Elbashandy", "link": "https://stackoverflow.com/users/7449109/abdelrahman-elbashandy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560467611, "creation_date": 1560382127, "last_edit_date": 1560467611, "question_id": 56571566, "link": "https://stackoverflow.com/questions/56571566/how-to-plot-consistent-discrete-data-point-in-a-graph-that-falls-within-a-limite", "title": "How to plot consistent discrete data point in a graph that falls within a limited range?", "body": "<p>The data points in the graph are consistent discrete values that are within these values <code>[1, 2, 3, 4, 5, 6]</code> but as you can see in the graph below it's mainly <code>[3,4,5]</code>. What is the best way to represent this data?</p>\n\n<p>I tried setting different values of y-limit.</p>\n\n<pre><code>ax.plot(a, b)\nax.set_ylim(bottom=0)\nax.grid()\n</code></pre>\n\n<p>edit: The graph is showing throughput in one second range. The numbers are oscillating between 2 and 5 units per seconds. The graph is showing this information already but I was wondering what is the cleanest way to present this?</p>\n\n<p><a href=\"https://i.stack.imgur.com/scOAg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/scOAg.png\" alt=\"Example\"></a></p>\n"}, {"tags": ["python", "plotly", "plotly-dash"], "comments": [{"owner": {"reputation": 517, "user_id": 10988123, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5Gw0UI_qK9Q/AAAAAAAAAAI/AAAAAAAAAKA/VRhwKR3xJ5k/photo.jpg?sz=128", "display_name": "Nick", "link": "https://stackoverflow.com/users/10988123/nick"}, "edited": false, "score": 0, "creation_date": 1570714803, "post_id": 56571560, "comment_id": 103007197, "body": "don&#39;t know about callback issues but to show legend entries you just add <code>showlegend=True</code> to your graphs layout property"}], "owner": {"reputation": 53, "user_id": 11638352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7625bff4b9e5389ad456e428baced30?s=128&d=identicon&r=PG&f=1", "display_name": "WBraszkiewicz", "link": "https://stackoverflow.com/users/11638352/wbraszkiewicz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 277, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1560382069, "creation_date": 1560382069, "question_id": 56571560, "link": "https://stackoverflow.com/questions/56571560/python-dash-graph-not-updating-upon-selecting-new-dropdown-value", "title": "Python Dash - Graph not updating upon selecting new dropdown value", "body": "<p><strong>Hey guys,</strong></p>\n\n<p>I\u2019m an intern python developer and I just found out about dash and Plotly, its amazing!\nFor my app I\u2019m using a dataset containing info about fortune 500\u2019s revenue in 1955-2005 period.</p>\n\n<p>The problem I have is that the graph won\u2019t update itself upon selecting additional company from the dropdown list, however, if I select a new company and delete a previous one - then the graph updates. It seems like something prevents the graph to show multiple lines at once. Also, is there any way I could add the legend telling which color is what company? Below is my code:</p>\n\n<pre><code>import dash\nimport dash_html_components as html\nimport dash_core_components as dcc\nimport pandas as pd\nimport plotly.graph_objs as go\nfrom dash.dependencies import Input, Output\n\n#Read CSV and change col. names\ndf = pd.read_csv('fortune500-full.csv')\ndf.columns = ['Year', 'Rank', 'Company', 'Revenue', 'Profit']\n\n#Get a list of unique company names\nCompanies = df['Company'].unique()\n\n#Stylesheet\nexternal_stylesheets = ['https://codepen.io/chriddyp/pen/bWLwgP.css']\napp = dash.Dash(__name__, external_stylesheets=external_stylesheets)\n\n#App layout\napp.layout = html.Div([\n#Dropdown\nhtml.Div([\nhtml.Label('Dropdown'),\n    dcc.Dropdown(\n        id = 'Dropdown',\n        options=[{'label': i, 'value': i} for i in Companies],\n        value=[\"General Motors\"],\n        multi = True\n    ),]),\n\n#Graph\n    dcc.Graph(\n        id='Graph',\n        figure={\n            'data': [\n                go.Scatter(\n                    x=df.loc[df['Company'] == i, 'Year'],\n                    y=df.loc[df['Company'] == i, 'Revenue'],\n                    text =df.loc[df['Company'] == i, 'Company'],\n                    mode='lines',\n                    name=i\n                ) for i in df.Company.unique()],\n\n            'layout': go.Layout(\n                xaxis={'title': 'Year'},\n                yaxis={'title': 'Revenue'},\n                margin={'l': 50, 'b': 30, 't': 10, 'r': 0},\n                legend={'x': 1, 'y': 1},\n                hovermode='closest'\n            )}),\n\n    html.Div(dcc.RangeSlider(\n        id='Slider',\n        min=df['Year'].min(),\n        max=df['Year'].max(),\n        value=[1955, 2005],\n        marks={str(year): str(year) for year in df['Year'].unique()}\n    ), style={'width': '98%', 'padding': '0px 20px 20px 20px'}),\n\n    html.Div(id='Output_slider',\n             style={'textAlign': 'center', 'color': ['#7FDBFF']}\n             )])\n\n@app.callback(\n    dash.dependencies.Output('Graph', 'figure'),\n    [dash.dependencies.Input('Dropdown', 'value')])\n\ndef callback_a(dropdown_value):\n    trace = []\n    for val in dropdown_value:\n        trace.append(\n            go.Scatter(\n                x=df.loc[df['Company'] == val, 'Year'],\n                y=df.loc[df['Company'] == val, 'Revenue'],\n                text =df.loc[df['Company'] == val, 'Company'],\n                mode='lines',\n                name=val\n            ),)\n        layout = go.Layout(\n            xaxis={'title': 'Year'},\n            yaxis={'title': 'Revenue'},\n            margin={'l': 50, 'b': 30, 't': 10, 'r': 0},\n            legend={'x': 1, 'y': 1},\n            hovermode='closest'\n        )\n        figure = {'data': trace, 'layout': layout}\n        return figure\n\n\n@app.callback(\n    dash.dependencies.Output('Output_slider', 'children'),\n    [dash.dependencies.Input('Slider', 'value')])\ndef update_output(value):\n    return 'Wybrane lata:  \"{}\"'.format(value)\n#App\nif __name__ == '__main__':\n    app.run_server(debug=True)\n</code></pre>\n\n<p>Could any of you please take a look at this and help me find root of this problem?</p>\n\n<p>Kind regards.</p>\n"}, {"tags": ["python", "regex", "excel"], "answers": [{"comments": [{"owner": {"reputation": 367, "user_id": 4803084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0x9y0.png?s=128&g=1", "display_name": "user_dhrn", "link": "https://stackoverflow.com/users/4803084/user-dhrn"}, "edited": false, "score": 1, "creation_date": 1560383894, "post_id": 56571596, "comment_id": 99722134, "body": "Hi @Emma. Yes. That works perfectly. This regex stuff makes me blind sometimes. Thanks. And thanks to GSD for editing the question."}], "tags": [], "owner": {"reputation": 1, "user_id": 6553328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/omcAX.jpg?s=128&g=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/6553328/emma"}, "is_accepted": false, "score": 1, "last_activity_date": 1560382364, "last_edit_date": 1592644375, "creation_date": 1560382364, "answer_id": 56571596, "question_id": 56571543, "link": "https://stackoverflow.com/questions/56571543/regex-to-split-a-string-in-python-3-7/56571596#56571596", "title": "Regex to split a string in Python 3.7", "body": "<p>My guess is that this expression might likely work:</p>\n<pre><code>(.*)\\sDaily Prod\\.(\\s*[-=w\\/]+\\s*)?(.*)\n</code></pre>\n<p>Here, we have an optional group:</p>\n<pre><code>(\\s*[-=w\\/]+\\s*)?\n</code></pre>\n<p>which we collect our undesired chars and spaces, then we make a replacement with $1 and $3.</p>\n<h3><a href=\"https://regex101.com/r/trZvzU/1/\" rel=\"nofollow noreferrer\">Demo</a></h3>\n<h3>Test</h3>\n<pre><code># coding=utf8\n# the above tag defines encoding for this document and is for Python 2.x compatibility\n\nimport re\n\nregex = r&quot;(.*)\\sDaily Prod\\.(\\s*[-=w\\/]+\\s*)?(.*)&quot;\n\ntest_str = (&quot;Barber #1-1 Daily Prod. - Pumping unit\\n&quot;\n    &quot;Barbee #1-3 Daily Prod. - Plunger Lift\\n&quot;\n    &quot;Barbee #1-5 Daily Prod. = Coil Tubing\\n&quot;\n    &quot;Barbee #1-3 Daily Prod. - Plunger\\n&quot;\n    &quot;Barbee #1-5 Daily Prod.w/ coil tubing\\n&quot;\n    &quot;Porter GU #1 Well #2 Daily Prod.\\n&quot;\n    &quot;Barber GU #1 Well #1 Daily Prod.\\n&quot;\n    &quot;Bogel #1-2 Daily Prod. w/ plunger&quot;)\n\nsubst = &quot;\\\\1 \\\\3&quot;\n\n# You can manually specify the number of replacements by changing the 4th argument\nresult = re.sub(regex, subst, test_str, 0, re.MULTILINE)\n\nif result:\n    print (result)\n\n# Note: for Python 2.7 compatibility, use ur&quot;&quot; to prefix the regex and u&quot;&quot; to prefix the test string and substitution.\n</code></pre>\n<h3>RegEx Circuit</h3>\n<p><a href=\"https://jex.im/regulex/#!flags=&amp;re=%5E(a%7Cb)*%3F%24\" rel=\"nofollow noreferrer\">jex.im</a> visualizes regular expressions:</p>\n<p><a href=\"https://i.stack.imgur.com/mEUHR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mEUHR.png\" alt=\"enter image description here\" /></a></p>\n"}, {"tags": [], "owner": {"reputation": 91458, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "is_accepted": false, "score": 0, "last_activity_date": 1560416911, "creation_date": 1560416911, "answer_id": 56577098, "question_id": 56571543, "link": "https://stackoverflow.com/questions/56571543/regex-to-split-a-string-in-python-3-7/56577098#56577098", "title": "Regex to split a string in Python 3.7", "body": "<p>You could also match what you want to remove and replace with an empty string:</p>\n\n<pre><code>\\sDaily Prod\\.(?:\\s*(?:[-=]|w/))?\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<ul>\n<li><code>\\sDaily Prod\\.</code> Match whitespace char, Daily Prod and dot</li>\n<li><code>(?:</code> Non capturing group\n\n<ul>\n<li><code>\\s*</code> Match 0+ whitespace chars</li>\n<li><code>(?:</code> Non capturing group\n\n<ul>\n<li><code>[-=]</code> Match <code>-</code> or <code>=</code></li>\n<li><code>|</code> Or</li>\n<li><code>w/</code> Match literally</li>\n</ul></li>\n<li><code>)</code> Close non capturing group</li>\n</ul></li>\n<li><code>)?</code> Close non capturing group and make it optional</li>\n</ul>\n\n<p><a href=\"https://regex101.com/r/XBkKE2/1\" rel=\"nofollow noreferrer\">Regex demo</a></p>\n"}], "owner": {"reputation": 367, "user_id": 4803084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0x9y0.png?s=128&g=1", "display_name": "user_dhrn", "link": "https://stackoverflow.com/users/4803084/user-dhrn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1560416911, "creation_date": 1560381915, "last_edit_date": 1560382251, "question_id": 56571543, "link": "https://stackoverflow.com/questions/56571543/regex-to-split-a-string-in-python-3-7", "title": "Regex to split a string in Python 3.7", "body": "<p>I'm trying to split a sequence of non-regular strings that I read in a python program from excel files. I am using Regex101.com for testing and I partially have succeeded in doing it:<br>\nMy sample:  </p>\n\n<pre><code>Barber #1-1 Daily Prod. - Pumping unit  \nBarbee #1-3 Daily Prod. - Plunger Lift  \nBarbee #1-5 Daily Prod. = Coil Tubing  \nBarbee #1-3 Daily Prod. - Plunger  \nBarbee #1-5 Daily Prod.w/ coil tubing  \nPorter GU #1 Well #2 Daily Prod.  \nBarber GU #1 Well #1 Daily Prod.  \nBogel #1-2 Daily Prod. w/ plunger  \n</code></pre>\n\n<p>My regex:<br>\n<code>(.*)\\sDaily Prod\\.(.*$)</code>  </p>\n\n<p>I am getting this answer select group1 and group2:  </p>\n\n<pre><code>Barber #1-1 - Pumping unit  \nBarbee #1-3 - Plunger Lift  \nBarbee #1-5 = Coil Tubing  \nBarbee #1-3 - Plunger  \nBarbee #1-5w/ coil tubing  \nPorter GU #1 Well #2  \nBarber GU #1 Well #1  \nBogel #1-2 w/ plunger  \n</code></pre>\n\n<p>and I would like to have:  </p>\n\n<pre><code>Barber #1-1 Pumping unit  \nBarbee #1-3 Plunger Lift  \nBarbee #1-5 Coil Tubing  \nBarbee #1-3 Plunger  \nBarbee #1-5 coil tubing  \nPorter GU #1 Well #2  \nBarber GU #1 Well #1  \nBogel #1-2 plunger  \n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "matplotlib", "plot"], "answers": [{"tags": [], "owner": {"reputation": 125, "user_id": 9643227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eab0d3faeb782cf63da1381ef629f4ed?s=128&d=identicon&r=PG&f=1", "display_name": "Davide", "link": "https://stackoverflow.com/users/9643227/davide"}, "is_accepted": false, "score": 0, "last_activity_date": 1560382797, "creation_date": 1560382797, "answer_id": 56571636, "question_id": 56571532, "link": "https://stackoverflow.com/questions/56571532/how-can-i-round-the-values-thick-plots/56571636#56571636", "title": "How Can I round the values thick plots?", "body": "<p>I solved the problem in this way:</p>\n\n<pre><code>from matplotlib.ticker import StrMethodFormatter\n\n    plt.plot(loss_test3)\n    plt.plot(loss)\n    plt.legend(['loss_test3','loss_test4'], loc='upper left')\n    #t = [loss.min(), loss.max()]\n    t = np.linspace(loss.min(), loss_test3.max(), 5)\n    plt.yticks(t, t)\n    plt.gca().yaxis.set_major_formatter(StrMethodFormatter('{x:,.3f}'))\n    plt.xlim(0, 200)\n    plt.title('test 4 loss')\n    plt.ylabel('loss')\n    plt.xlabel('epoch')\n    plt.savefig('test_4_loss.png', dpi=100)\n    plt.show()\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 9643227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eab0d3faeb782cf63da1381ef629f4ed?s=128&d=identicon&r=PG&f=1", "display_name": "Davide", "link": "https://stackoverflow.com/users/9643227/davide"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560382797, "creation_date": 1560381861, "question_id": 56571532, "link": "https://stackoverflow.com/questions/56571532/how-can-i-round-the-values-thick-plots", "title": "How Can I round the values thick plots?", "body": "<p>I have this small script for produce a plot: </p>\n\n<pre><code>plt.plot(loss_test3)\nplt.plot(loss)\nplt.legend(['loss_test3','loss_test4'], loc='upper left')\nt = np.linspace(loss.min(), loss_test3.max(), 5)\nplt.yticks(t, t)\nplt.xlim(0, 200)\nplt.title('test 4 loss')\nplt.ylabel('loss')\nplt.xlabel('epoch')\nplt.savefig('test_4_loss.png', dpi=100)\nplt.show()\n</code></pre>\n\n<p>The output that I get is this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/YT1Dv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YT1Dv.png\" alt=\"enter image description here\"></a></p>\n\n<p>How can i round the values on the Y axis? </p>\n"}, {"tags": ["python", "sqlite", "chatterbot", "repl.it"], "answers": [{"tags": [], "owner": {"reputation": 96, "user_id": 4992188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8635072707259811b1015f7b2051f89?s=128&d=identicon&r=PG&f=1", "display_name": "Thanasis Saxanidis", "link": "https://stackoverflow.com/users/4992188/thanasis-saxanidis"}, "is_accepted": false, "score": 0, "last_activity_date": 1561214025, "last_edit_date": 1561214025, "creation_date": 1560425522, "answer_id": 56579507, "question_id": 56571509, "link": "https://stackoverflow.com/questions/56571509/chatterbot-sqlite-store-in-repl-it/56579507#56579507", "title": "Chatterbot sqlite store in repl.it", "body": "<p>I am not familiar with repl.it, but for all the answers you have asked the answer is yes. For example, I have made a simple web page that uses the chatterbot library. Then I used my own computer as a server using <code>ngrok</code> and gather training data from users.</p>\n"}], "owner": {"reputation": 311, "user_id": 9259147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10941d9a17cf906e2afcb0e7ce664746?s=128&d=identicon&r=PG&f=1", "display_name": "Will", "link": "https://stackoverflow.com/users/9259147/will"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 155, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1561214025, "creation_date": 1560381649, "question_id": 56571509, "link": "https://stackoverflow.com/questions/56571509/chatterbot-sqlite-store-in-repl-it", "title": "Chatterbot sqlite store in repl.it", "body": "<p>I'm wondering how sqlite3 works when working in something like repl.it? I've been working on learning chatterbot on my own computer through Jupiter notebook. I'm a pretty amateur coder, and I have never worked with databases or SQL. When working from my own computer, I pretty much get the concept that when setting up a new bot with chatterbot, it creates a sqlite3 file, and then saves conversations to it to improve the chatbot. However, if I create a chatbot the same way only through repl.it and give lots of people the link, is the sqlite3 file saved online somewhere? Is it big enough to save lots of conversations from many people to really improve the bot well?</p>\n"}, {"tags": ["python", "pyinstaller"], "comments": [{"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1560381483, "post_id": 56571436, "comment_id": 99721727, "body": "You need to use <code>--hidden-import</code> <a href=\"https://pyinstaller.readthedocs.io/en/v3.3.1/usage.html#what-to-bundle-where-to-search\" rel=\"nofollow noreferrer\">pyinstaller.readthedocs.io/en/v3.3.1/&hellip;</a>"}, {"owner": {"reputation": 11727, "user_id": 3987854, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OV64v.jpg?s=128&g=1", "display_name": "squareskittles", "link": "https://stackoverflow.com/users/3987854/squareskittles"}, "edited": false, "score": 1, "creation_date": 1560383412, "post_id": 56571436, "comment_id": 99722049, "body": "Please post the specific error you are encountering, and consider posting a minimal, complete example of your issue. <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a>"}], "owner": {"reputation": 1, "user_id": 7330058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da07731db8289313f4f4dcb060e18bc0?s=128&d=identicon&r=PG&f=1", "display_name": "Habib Ahmad", "link": "https://stackoverflow.com/users/7330058/habib-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560384512, "creation_date": 1560381012, "last_edit_date": 1560384512, "question_id": 56571436, "link": "https://stackoverflow.com/questions/56571436/python-create-exe-from-pyinstaller-return-error", "title": "Python create .exe from pyinstaller return error", "body": "<p>Hi guys we have an issue while creating the .exe file from the python script, We have issue when we include the sklern and other packages, It's work fine in the pychram but when we try to create the .exe file from the pyinstaller then it creates file but that file did not executed, When we debug the issue we find that its not be able to import the packages, Because each line that import the external package that returns error, If anyone can help us in it that will be great.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 400, "user_id": 6530413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bFwml.png?s=128&g=1", "display_name": "lolsky", "link": "https://stackoverflow.com/users/6530413/lolsky"}, "edited": false, "score": 0, "creation_date": 1560381226, "post_id": 56571416, "comment_id": 99721679, "body": "Are spaces guaranteed to be the delimiter for input into your script?"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1560381419, "post_id": 56571416, "comment_id": 99721708, "body": "This kind of exercise is typically one of the very first things that&#39;s taught when covering parsers in a formal computer science compiler-design class. There&#39;s no shortage of online examples; look for the ones where you&#39;re building and evaluating an abstract syntax tree to be going down the right path."}, {"owner": {"reputation": 1102, "user_id": 6336042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/054ea2f04b5592b91f8223796cc53979?s=128&d=identicon&r=PG", "display_name": "Brendon Whateley", "link": "https://stackoverflow.com/users/6336042/brendon-whateley"}, "edited": false, "score": 1, "creation_date": 1560381465, "post_id": 56571416, "comment_id": 99721723, "body": "I suspect that the question isn&#39;t the correct one you should be asking. This smells like a programming exercise and it doesn&#39;t appear you have thought through how you plan to &quot;do some basic calculations&quot; because, in the context of math equations, the parenthesis has no numerical equivalent."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1560381700, "post_id": 56571416, "comment_id": 99721771, "body": "(To be clear -- many, if not most, of the answers to the linked duplicate questions <i>do</i> correctly handle parentheses)."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 1, "creation_date": 1560381723, "post_id": 56571416, "comment_id": 99721776, "body": "I would use <a href=\"http://www.dabeaz.com/ply/ply.html\" rel=\"nofollow noreferrer\">Python Lex-Yacc</a> to build parser. Or I would convert to <a href=\"https://en.wikipedia.org/wiki/Polish_notation\" rel=\"nofollow noreferrer\">Polish notation</a> - <code>&quot;* + 2 3 5&quot;</code> - which doesn&#39;t need parentheses."}, {"owner": {"reputation": 13, "user_id": 11639429, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-C9ujr_VBYF0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcYhK9XPh3CRX0nEOy8ORfH7T8bPw/mo/photo.jpg?sz=128", "display_name": "andrep porte", "link": "https://stackoverflow.com/users/11639429/andrep-porte"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1560389439, "post_id": 56571416, "comment_id": 99723035, "body": "Found my answer, Thank you all! and @CharlesDuffy for the links!"}], "answers": [{"comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1560381506, "post_id": 56571467, "comment_id": 99721734, "body": "If <code>eval</code> is an adequate answer, the question is already in our knowledgebase. Note the &quot;Answer Well-Asked Questions&quot; section of <a href=\"https://stackoverflow.com/help/how-to-answer\">How to Answer</a>, and the bullet point therein regarding questions which &quot;have been asked and answered many times before&quot;."}, {"owner": {"reputation": 13, "user_id": 11639429, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-C9ujr_VBYF0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcYhK9XPh3CRX0nEOy8ORfH7T8bPw/mo/photo.jpg?sz=128", "display_name": "andrep porte", "link": "https://stackoverflow.com/users/11639429/andrep-porte"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1560389390, "post_id": 56571467, "comment_id": 99723031, "body": "Thank you , Eval is a great start and also the links provided by @CharlesDuffy help greatly! Thank you!"}], "tags": [], "owner": {"reputation": 1484, "user_id": 7410383, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211966226936527/picture?type=large", "display_name": "Edeki Okoh", "link": "https://stackoverflow.com/users/7410383/edeki-okoh"}, "is_accepted": true, "score": 0, "last_activity_date": 1560381303, "creation_date": 1560381303, "answer_id": 56571467, "question_id": 56571416, "link": "https://stackoverflow.com/questions/56571416/how-can-i-honor-parentheses-in-evaluating-arithmetic-expressions/56571467#56571467", "title": "How can I honor parentheses in evaluating arithmetic expressions?", "body": "<p>You can use the <a href=\"https://www.programiz.com/python-programming/methods/built-in/eval\" rel=\"nofollow noreferrer\">eval</a> method to do such a thing.</p>\n\n<p>Example:</p>\n\n<pre><code>print(eval('(2+3)*5'))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>25\n</code></pre>\n\n<p>And if you really wanted to put it in a function:</p>\n\n<pre><code>def evaluation_string(input):\n    print(eval(input))\n</code></pre>\n\n<p>Example </p>\n\n<pre><code>def evaluation_string(input):\n    print(eval(input))\n\nstring_equation = '(2+3)*5'\nevaluation_string(string_equation)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>25\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11639429, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-C9ujr_VBYF0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcYhK9XPh3CRX0nEOy8ORfH7T8bPw/mo/photo.jpg?sz=128", "display_name": "andrep porte", "link": "https://stackoverflow.com/users/11639429/andrep-porte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 370, "favorite_count": 0, "closed_date": 1560381465, "accepted_answer_id": 56571467, "answer_count": 1, "score": 0, "last_activity_date": 1560381539, "creation_date": 1560380820, "last_edit_date": 1560381362, "question_id": 56571416, "link": "https://stackoverflow.com/questions/56571416/how-can-i-honor-parentheses-in-evaluating-arithmetic-expressions", "closed_reason": "Duplicate", "title": "How can I honor parentheses in evaluating arithmetic expressions?", "body": "<p>I am fairly new to python/ programming in general and i am trying to write a function that will convert an equation passed in as a string to its numeric representation and do some basic calculations. I am having some trouble with the parenthesis as i am not sure how to represent them for order of operations.</p>\n\n<p>Any help of tips would be greatly appreciated. Thank you!</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>EquationAsString =\"( 2 + 3 ) * 5\"\n\ndef toEquation(EquationAsString):\n     Equation = EquationAsString.split(' ')\n     #store info in list and use it like a stack, check the type etc.\n     answer = 25\n     return answer\n</code></pre>\n"}, {"tags": ["python", "c++", "multithreading", "tensorflow"], "comments": [{"owner": {"reputation": 534, "user_id": 8550160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6bbfb0b370c147dd9c1ad1c6320e586?s=128&d=identicon&r=PG&f=1", "display_name": "jman", "link": "https://stackoverflow.com/users/8550160/jman"}, "edited": false, "score": 0, "creation_date": 1560391718, "post_id": 56571368, "comment_id": 99723407, "body": "Unless you specify the resources Tensorflow will use multi-threading when available.  Also, why are you periodically training?  Might be best to export the model and use infrencers in the C++ app."}, {"owner": {"reputation": 413, "user_id": 4582142, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GYIY6.jpg?s=128&g=1", "display_name": "mauriii", "link": "https://stackoverflow.com/users/4582142/mauriii"}, "reply_to_user": {"reputation": 534, "user_id": 8550160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6bbfb0b370c147dd9c1ad1c6320e586?s=128&d=identicon&r=PG&f=1", "display_name": "jman", "link": "https://stackoverflow.com/users/8550160/jman"}, "edited": false, "score": 0, "creation_date": 1560395662, "post_id": 56571368, "comment_id": 99724114, "body": "@jman, Sorry, no not periodically training, just predicting and evaluating. And I know TF will use multi-threading, that&#39;s not really the problem.."}], "owner": {"reputation": 413, "user_id": 4582142, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GYIY6.jpg?s=128&g=1", "display_name": "mauriii", "link": "https://stackoverflow.com/users/4582142/mauriii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 370, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560534260, "creation_date": 1560380507, "last_edit_date": 1560534260, "question_id": 56571368, "link": "https://stackoverflow.com/questions/56571368/embedding-tensorflow-python-program-in-c", "title": "Embedding TensorFlow Python program in C++", "body": "<p>I'm stressing out and really need help at this point. I have a Python3.6 program that imports csv, tensorflow, numpy, and \"from tensorflow import keras\". This program (which I can't post) uses Estimators and its  eval and predict methods, which  makes use of multiple threads.</p>\n\n<p>I'm trying to embed Python into a C++ program that would then call the mentioned script multiple times at different points in the single threaded code. I got the Python program to run, but the problem comes when calling <code>Py_Finalize();</code>, which is causing this error:</p>\n\n<blockquote>\n  <p>Exception ignored in: Traceback (most recent call last):\n    File \"/usr/lib/python3.6/threading.py\", line 1289, in _shutdown\n      assert tlock.locked()</p>\n  \n  <p>SystemError: (built-in method locked of _thread.lock object at 0x7fa340764f08) returned a result with an error set</p>\n</blockquote>\n\n<p>Stepping through the code, I noticed when <code>PyRun_File()</code> returned, my single threaded C++ program added ~10 threads related to TensorFlow. Here's all the embeded python logic in my C++ code with commented out code of things I've tried/messed around with.</p>\n\n<pre><code>void run_python_script(string mode, string model, std::vector&lt;int&gt;* y_test = nullptr) {\nconst char* SCRIPT_PATH = \"../PATH\";\n\n/* Setup embedded Python*/\nPy_SetProgramName(Py_DecodeLocale(SCRIPT_PATH, NULL));\n\nPy_Initialize();\nPyEval_InitThreads();\n//  Py_DECREF(PyImport_ImportModule(\"tensorflow\"));\n//  PyThreadState* threadState = PyEval_SaveThread();\n//  PyGILState_STATE gstate = PyGILState_Ensure();\n//  PyObject* pGlobals = PyDict_New();\n//  PyDict_SetItemString(pGlobals, \"__builtins__\", PyEval_GetBuiltins());\n\nPyObject* m_pMainModule = PyImport_AddModule(\"__main__\");\nPyObject* pGlobals = PyModule_GetDict(m_pMainModule);\n\nconst wchar_t *script_args[] = { L\"REMOVED FROM SNIPPET\", NULL };\nconst wchar_t **_argv = script_args;\nint _argc = sizeof(script_args) / sizeof(script_args[0]) - 1;\nPySys_SetArgv(_argc, const_cast&lt;wchar_t **&gt;(_argv));\n\nFILE *file = _Py_fopen(SCRIPT_PATH, \"r+\");\nif (file != NULL) {\n    cout &lt;&lt; \"Running script...\" &lt;&lt; endl;\n    PyRun_File(file, SCRIPT_PATH, Py_file_input, pGlobals, pGlobals);\n    assert(!PyErr_Occurred());\n} else\n    cerr &lt;&lt; \"Couldn't find a python script to run\";\nfclose(file);\n//  PyGILState_Release(gstate);\n//  PyEval_RestoreThread(threadState);\nPy_Finalize();      //@TODO WHY DOES PROGRAM CRASH HERE ON SCRIPT COMPLETION\n/* End embedded Python*/\ncout &lt;&lt; \"Script and file closed.\" &lt;&lt; endl;\n</code></pre>\n\n<p>Thanks for the help! :)</p>\n"}, {"tags": ["python", "amazon-web-services", "amazon-s3", "ftp"], "comments": [{"owner": {"reputation": 164, "user_id": 4700847, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f928c1644cf028876fa19b19eb060334?s=128&d=identicon&r=PG&f=1", "display_name": "user4700847", "link": "https://stackoverflow.com/users/4700847/user4700847"}, "edited": false, "score": 0, "creation_date": 1560380922, "post_id": 56571360, "comment_id": 99721614, "body": "You should visit this and look at third most upvoted answer: <a href=\"https://stackoverflow.com/questions/30249069/listing-contents-of-a-bucket-with-boto3\" title=\"listing contents of a bucket with boto3\">stackoverflow.com/questions/30249069/&hellip;</a>"}, {"owner": {"reputation": 162605, "user_id": 174777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6PnNW.jpg?s=128&g=1", "display_name": "John Rotenstein", "link": "https://stackoverflow.com/users/174777/john-rotenstein"}, "edited": false, "score": 2, "creation_date": 1560384993, "post_id": 56571360, "comment_id": 99722324, "body": "What is your <i>actual</i> requirement? That is, what type of &quot;analysis&quot; do you wish to perform on the files? What is the format of the files inside the zip files? I ask this because Amazon Athena could be a very easy way to process the files, but it depends on the format. Feel free to edit your question to provide more information."}, {"owner": {"reputation": 49, "user_id": 10837702, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mPmamT8aKnk/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYoCxOHyryKLFvs4i9Y1FYCvUy-RQ/mo/photo.jpg?sz=128", "display_name": "GBL_DO", "link": "https://stackoverflow.com/users/10837702/gbl-do"}, "reply_to_user": {"reputation": 162605, "user_id": 174777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6PnNW.jpg?s=128&g=1", "display_name": "John Rotenstein", "link": "https://stackoverflow.com/users/174777/john-rotenstein"}, "edited": false, "score": 0, "creation_date": 1560406264, "post_id": 56571360, "comment_id": 99726651, "body": "@JohnRotenstein Athena looks like a great solution. The files are gzip format in each folder. Will this be an issue?"}, {"owner": {"reputation": 162605, "user_id": 174777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6PnNW.jpg?s=128&g=1", "display_name": "John Rotenstein", "link": "https://stackoverflow.com/users/174777/john-rotenstein"}, "edited": false, "score": 0, "creation_date": 1560409946, "post_id": 56571360, "comment_id": 99728338, "body": "Athena loves reading gzip files. It makes things faster and cheaper! Please answer my above questions and we will be able to assist further."}, {"owner": {"reputation": 49, "user_id": 10837702, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mPmamT8aKnk/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYoCxOHyryKLFvs4i9Y1FYCvUy-RQ/mo/photo.jpg?sz=128", "display_name": "GBL_DO", "link": "https://stackoverflow.com/users/10837702/gbl-do"}, "reply_to_user": {"reputation": 162605, "user_id": 174777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6PnNW.jpg?s=128&g=1", "display_name": "John Rotenstein", "link": "https://stackoverflow.com/users/174777/john-rotenstein"}, "edited": false, "score": 0, "creation_date": 1560452652, "post_id": 56571360, "comment_id": 99752037, "body": "@JohnRotenstein Awesome to hear that. Requirement is to count distinct values of a customer_id and group them by item_id across all files."}], "answers": [{"comments": [{"owner": {"reputation": 163, "user_id": 3024254, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/14432a1a96c460a868890105fa263eda?s=128&d=identicon&r=PG&f=1", "display_name": "karan arora", "link": "https://stackoverflow.com/users/3024254/karan-arora"}, "edited": false, "score": 0, "creation_date": 1581944542, "post_id": 56589657, "comment_id": 106595030, "body": "Watch this video. It might help you . Please check one.<a href=\"https://youtu.be/fStDrddmi5Y\" rel=\"nofollow noreferrer\">youtu.be/fStDrddmi5Y</a>"}], "tags": [], "owner": {"reputation": 162605, "user_id": 174777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6PnNW.jpg?s=128&g=1", "display_name": "John Rotenstein", "link": "https://stackoverflow.com/users/174777/john-rotenstein"}, "is_accepted": true, "score": 1, "last_activity_date": 1560468131, "creation_date": 1560468131, "answer_id": 56589657, "question_id": 56571360, "link": "https://stackoverflow.com/questions/56571360/reading-multiple-files-from-aws-s3/56589657#56589657", "title": "Reading Multiple Files From AWS S3", "body": "<p>Amazon Athena can <strong>run SQL-like queries across multiple files</strong> stored in Amazon S3.</p>\n\n<p>The files can be <strong>compressed with gzip</strong>. In fact, Athena will run faster and cheaper on compressed files because you are only charged for the amount of data scanned from disk.</p>\n\n<p>All files in a given folder (path) in Amazon S3 <strong>must be in the same format</strong>. For example, if they are CSV files in gzip format, all the files must have the same number of columns in the same order.</p>\n\n<p>You can then use <a href=\"https://docs.aws.amazon.com/athena/latest/ug/create-table.html\" rel=\"nofollow noreferrer\">CREATE TABLE</a> in Amazon Athena, which defines the columns in the data files and the location of the data. This is the hardest part, because you have to get the format correctly defined.</p>\n\n<p>Then, you can run SQL <a href=\"https://docs.aws.amazon.com/athena/latest/ug/select.html\" rel=\"nofollow noreferrer\">SELECT</a> commands to <strong>query the data</strong>, which will apply to all files in the designated folder.</p>\n\n<p>In future, if you want to <strong>add or remove data</strong>, simply update the contents of the folder. The <code>SELECT</code> command always looks at the files in the folder at the time that the command is run.</p>\n\n<p>Given your requirement of \"count distinct values of a customer_id and group them by item_id across all files\", it would be something like:</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT\n  item_id,\n  COUNT(DISTINCT customer_id)\nFROM table\nGROUP BY 1\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 10837702, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mPmamT8aKnk/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYoCxOHyryKLFvs4i9Y1FYCvUy-RQ/mo/photo.jpg?sz=128", "display_name": "GBL_DO", "link": "https://stackoverflow.com/users/10837702/gbl-do"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2010, "favorite_count": 0, "accepted_answer_id": 56589657, "answer_count": 1, "score": 1, "last_activity_date": 1560468131, "creation_date": 1560380399, "question_id": 56571360, "link": "https://stackoverflow.com/questions/56571360/reading-multiple-files-from-aws-s3", "title": "Reading Multiple Files From AWS S3", "body": "<p>I need a system to read a S3 bucket for analysis. The bucket is broken down to Year/Month/Day/Hour where each Hour folder has a lot of zipped files that amount to over 2GBs. </p>\n\n<p>Is this something to be scripting in Python with boto3? Looking for any general direction.</p>\n"}, {"tags": ["python", "pandas", "categories", "crosstab"], "comments": [{"owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 0, "creation_date": 1560380273, "post_id": 56571306, "comment_id": 99721481, "body": "What&#39;s your aggfunc?"}], "answers": [{"comments": [{"owner": {"reputation": 6358, "user_id": 1978817, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/abda118ddd8cc914f9091a6c41cfea47?s=128&d=identicon&r=PG", "display_name": "Gene Burinsky", "link": "https://stackoverflow.com/users/1978817/gene-burinsky"}, "edited": false, "score": 0, "creation_date": 1560381000, "post_id": 56571354, "comment_id": 99721626, "body": "That&#39;s interesting, so even though according to <code>kyle.fooCut.dtype</code>, <code>footCut</code> is <code>CategoricalDtype</code> it isn&#39;t quite treated as such? Seems like a head scratcher"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 6358, "user_id": 1978817, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/abda118ddd8cc914f9091a6c41cfea47?s=128&d=identicon&r=PG", "display_name": "Gene Burinsky", "link": "https://stackoverflow.com/users/1978817/gene-burinsky"}, "edited": false, "score": 1, "creation_date": 1560381109, "post_id": 56571354, "comment_id": 99721650, "body": "@GeneBurinsky I said the reason is possibly due to a change in the implementation, but that does not mean it is expected behaviour. It could very well be a bug. Would need to do some digging. Thankfully, the workaround is obvious and not as hack-ish as it could&#39;ve been."}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 1, "last_activity_date": 1561136281, "last_edit_date": 1561136281, "creation_date": 1560380323, "answer_id": 56571354, "question_id": 56571306, "link": "https://stackoverflow.com/questions/56571306/pandas-crosstab-on-categoricaldtype-columns-throws-typeerror/56571354#56571354", "title": "Pandas crosstab on CategoricalDType columns throws TypeError", "body": "<p>As <a href=\"https://stackoverflow.com/q/56571306/4909087\">uncovered by OP</a>, this is an <a href=\"https://github.com/pandas-dev/pandas/issues/25814\" rel=\"nofollow noreferrer\">issue</a> relating to pivoting (<code>crosstab</code> is an optimised version of <code>pivot_table</code> under the hood) Interval columns and is currently being fixed for v0.25.  </p>\n\n<p>Here's a workaround involving crosstabulating the integer codes:</p>\n\n<pre><code>cstab = pd.crosstab(kyle.fooCut.cat.codes, kyle.booCut.cat.codes)\ncstab\n\n\ncol_0  0  1  2  3  4  5  6  7  8  9\nrow_0                              \n0      0  2  0  1  3  1  2  1  1  1\n1      1  1  0  1  1  2  1  0  1  2\n2      2  1  1  0  1  1  2  0  0  0\n3      2  1  3  1  2  0  0  0  0  1\n4      1  2  1  0  0  2  0  1  1  2\n5      0  2  0  1  0  1  0  3  3  0\n6      2  0  1  2  0  2  1  1  1  1\n7      1  0  0  2  2  0  1  1  2  0\n8      0  1  1  0  1  1  3  1  1  1\n9      1  1  2  2  0  0  2  1  0  1\n</code></pre>\n\n<p>If you want to, you can always assign the index and columns of the result to the actual categories:</p>\n\n<pre><code>cstab.index = kyle.fooCut.cat.categories\ncstab.columns = kyle.booCut.cat.categories\n</code></pre>\n"}], "owner": {"reputation": 6358, "user_id": 1978817, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/abda118ddd8cc914f9091a6c41cfea47?s=128&d=identicon&r=PG", "display_name": "Gene Burinsky", "link": "https://stackoverflow.com/users/1978817/gene-burinsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "accepted_answer_id": 56571354, "answer_count": 1, "score": 1, "last_activity_date": 1561136281, "creation_date": 1560379956, "last_edit_date": 1560468529, "question_id": 56571306, "link": "https://stackoverflow.com/questions/56571306/pandas-crosstab-on-categoricaldtype-columns-throws-typeerror", "title": "Pandas crosstab on CategoricalDType columns throws TypeError", "body": "<p>Consider this simple data set whose columns are cut by quantiles.</p>\n\n<pre><code>kyle = pd.DataFrame({'foo':np.random.randint(0,100,100),'boo':np.random.randint(0,100,100)})\nkyle.loc[:,'fooCut'] = pd.qcut(kyle.loc[:,'foo'], np.arange(0,1.1,.1))\nkyle.loc[:,'booCut'] = pd.qcut(kyle.loc[:,'boo'], np.arange(0,1.1,.1))\n</code></pre>\n\n<p>Previous versions of <code>Pandas</code> handled the below as expected...</p>\n\n<pre><code>pd.crosstab(kyle.fooCut,kyle.booCut)\n</code></pre>\n\n<p>After updating to version '0.24.2', the above is throwing me a <code>TypeError: Cannot cast array data from dtype('float64') to dtype('&lt;U32') according to the rule 'safe'\n</code></p>\n\n<p>Does anyone know why and how to solve this? <strong>Note</strong> that here, <code>kyle.boocut.dtype</code> returns <code>CategoricalDtype</code>, a type that is the same as in the <code>pd.crosstab</code> <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.crosstab.html\" rel=\"nofollow noreferrer\">documentation and example</a> for categorical variables.</p>\n\n<h1>[Update]</h1>\n\n<p>This is a known <a href=\"https://github.com/pandas-dev/pandas/issues/25814\" rel=\"nofollow noreferrer\">bug</a> in pandas and is being fixed</p>\n"}, {"tags": ["python", "opencv", "image-translation"], "comments": [{"owner": {"reputation": 1484, "user_id": 7410383, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211966226936527/picture?type=large", "display_name": "Edeki Okoh", "link": "https://stackoverflow.com/users/7410383/edeki-okoh"}, "edited": false, "score": 0, "creation_date": 1560381716, "post_id": 56571299, "comment_id": 99721775, "body": "Can you share some data with how it is mismatching?"}, {"owner": {"reputation": 29, "user_id": 8083714, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-j9Ft_vwGBpM/AAAAAAAAAAI/AAAAAAAAAZU/JHk6fQQiTko/photo.jpg?sz=128", "display_name": "Long Shangguan", "link": "https://stackoverflow.com/users/8083714/long-shangguan"}, "reply_to_user": {"reputation": 1484, "user_id": 7410383, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211966226936527/picture?type=large", "display_name": "Edeki Okoh", "link": "https://stackoverflow.com/users/7410383/edeki-okoh"}, "edited": false, "score": 0, "creation_date": 1560450838, "post_id": 56571299, "comment_id": 99751220, "body": "Sure, here&#39;s the image when I overlaying the transformed location on the registered image. Each point is expected to be overlaid on a car. [link]: <a href=\"https://drive.google.com/open?id=1_VCJ-9fAOq7WhW7a5RpznMC6R-aFpj-h\" rel=\"nofollow noreferrer\">drive.google.com/open?id=1_VCJ-9fAOq7WhW7a5RpznMC6R-aFpj-h</a>"}], "answers": [{"tags": [], "owner": {"reputation": 29, "user_id": 8083714, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-j9Ft_vwGBpM/AAAAAAAAAAI/AAAAAAAAAZU/JHk6fQQiTko/photo.jpg?sz=128", "display_name": "Long Shangguan", "link": "https://stackoverflow.com/users/8083714/long-shangguan"}, "is_accepted": false, "score": 0, "last_activity_date": 1560450918, "creation_date": 1560450918, "answer_id": 56586699, "question_id": 56571299, "link": "https://stackoverflow.com/questions/56571299/how-does-cv2-warpperspective-works/56586699#56586699", "title": "how does cv2.warpPerspective works?", "body": "<p>Here's the image when I overlaying the transformed location on the registered image. Each point is expected to be overlaid on a car. [link]: <a href=\"https://drive.google.com/open?id=1_VCJ-9fAOq7WhW7a5RpznMC6R-aFpj-h\" rel=\"nofollow noreferrer\">https://drive.google.com/open?id=1_VCJ-9fAOq7WhW7a5RpznMC6R-aFpj-h</a></p>\n"}], "owner": {"reputation": 29, "user_id": 8083714, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-j9Ft_vwGBpM/AAAAAAAAAAI/AAAAAAAAAZU/JHk6fQQiTko/photo.jpg?sz=128", "display_name": "Long Shangguan", "link": "https://stackoverflow.com/users/8083714/long-shangguan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 195, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1560450918, "creation_date": 1560379859, "question_id": 56571299, "link": "https://stackoverflow.com/questions/56571299/how-does-cv2-warpperspective-works", "title": "how does cv2.warpPerspective works?", "body": "<p>I did image registration between two images (img_source, img_ref) using the following code.</p>\n\n<pre><code># Find homography\nh, mask = cv2.findHomography(points1, points2, cv2.RANSAC)\n# Use homography\nheight, width, channels = im2.shape\nim1Reg = cv2.warpPerspective(img_source, h, (width, height))\n</code></pre>\n\n<p>It works perfectly. Then I want to know the location of some specific point (say point (x,y) on img_source) on registered_image (say, (x,y) on im1Reg). Following the explanation of warPerspective on the OpenCV website, I apply the following equation:</p>\n\n<p>x=(M11x0+M12y0+M13)/(M31x0+M32y0+M33)\ny=(M21x0+M22y0+M23)/(M31x0+M32y0+M33)</p>\n\n<p>where M_{i,j} is the entry of the transformation matrix h.</p>\n\n<p>However, the resulting (x,y) is incorrect (mismatching). Any suggestions here?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["php", "python", "ubuntu", "virtualenv", "exec"], "answers": [{"tags": [], "owner": {"reputation": 467, "user_id": 1844222, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3423e4317faeef516f152094773abbbd?s=128&d=identicon&r=PG", "display_name": "j_allen_morris", "link": "https://stackoverflow.com/users/1844222/j-allen-morris"}, "is_accepted": false, "score": 0, "last_activity_date": 1561432285, "creation_date": 1561432285, "answer_id": 56746342, "question_id": 56571292, "link": "https://stackoverflow.com/questions/56571292/python-virtual-environment-php-exec-command-does-not-work/56746342#56746342", "title": "Python Virtual Environment - PHP Exec Command does not work", "body": "<p>Here's what I use for both crontabs and calling a .py file via PHP shell_exce() or exec().  I'm not expert, but I fumble around long enough to get things to work.</p>\n\n<pre><code>$exec_str = \"cd /home/dockethound/public_html/layout/pydocx &amp;&amp; /home/flohosting/PythonTest/PythonTest/bin/python create-docx.py \\\"\".$GET['email'].\"\\\" \\\"\".$GET['doc_id'].\"\\\" &gt;2&amp;1\";\nexec($exec_str);\n</code></pre>\n\n<p>I'm using a GoDaddy VPS with some Python modules installed (python-docx).  </p>\n\n<p>My understanding of the command is that it cd to the directory where the script is (even though I'm then calling it from the absolute path on the server, which seems unneccessary), and then calling my <code>virtualenv</code> for python3.6.  I installed it in PythonTest and it's working so I never changed it.</p>\n\n<p>Oh, the &amp;&amp; was very important.  I had that in the crontab but not in my shell_exec() command and it wasn't working.  I checked my crontab again, saw that there and added it and BOOM, my shell_exec() / exec() started working.</p>\n\n<p>Hope this helps</p>\n\n<p>PS - The variables at the end are passing arguments (or parameters) into the script.  I use the following to access them:</p>\n\n<pre><code>import sys\n#declare the variable\nvar_1 = sys.argv[1]\nvar_2 = sys.argv[2]\n</code></pre>\n\n<p>argv[0] is always the first part of the script, i.e., from <code>cd</code> to the name of the script.</p>\n"}], "owner": {"reputation": 1077, "user_id": 2951230, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5e5ed2337f2342d885fbc20528886313?s=128&d=identicon&r=PG&f=1", "display_name": "Brana", "link": "https://stackoverflow.com/users/2951230/brana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1561432285, "creation_date": 1560379770, "question_id": 56571292, "link": "https://stackoverflow.com/questions/56571292/python-virtual-environment-php-exec-command-does-not-work", "title": "Python Virtual Environment - PHP Exec Command does not work", "body": "<p>I have to call python from PHP in Ubuntu. I do that this way:</p>\n\n<pre><code>$command = 'usr/bin/python3.6 /var/www/vhosts/domain.com/python/test.py';\nexec($command, $output, $r);\n</code></pre>\n\n<p>However when I create a virtual environment and do the same the command does not work at all:</p>\n\n<pre><code>$command = '/root/venv/bin/python3.6 /var/www/vhosts/domain.com/python/test.py';\nexec($command, $output, $r);\n</code></pre>\n\n<p>Venv and original python are the same. The python file  test.py chmod-ed to 777.</p>\n\n<p>When I execute:</p>\n\n<pre><code>/root/venv/bin/python3.6 /var/www/vhosts/domain.com/python/test.py\n</code></pre>\n\n<p>from command like (terminal) - it works without any problem. So i guess this has something to do with activating the Environment.</p>\n\n<p>What do you think the problem could be?</p>\n\n<p>Or how can I debug it, not sure where can I find the log files for python. I do not see any error for php.</p>\n"}, {"tags": ["python", "software-distribution"], "comments": [{"owner": {"reputation": 4972, "user_id": 10824407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32862a03314e434224acf280c38e6e68?s=128&d=identicon&r=PG&f=1", "display_name": "Olvin Roght", "link": "https://stackoverflow.com/users/10824407/olvin-roght"}, "edited": false, "score": 0, "creation_date": 1560379813, "post_id": 56571278, "comment_id": 99721376, "body": "Have you checked <a href=\"https://docs.python.org/3/distutils/setupscript.html\" rel=\"nofollow noreferrer\">docs</a> before asking question? :)"}, {"owner": {"reputation": 474, "user_id": 4833056, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/z80oz.png?s=128&g=1", "display_name": "BlueRine S", "link": "https://stackoverflow.com/users/4833056/bluerine-s"}, "edited": false, "score": 0, "creation_date": 1560380113, "post_id": 56571278, "comment_id": 99721448, "body": "Perhaps look at pyinstaller"}, {"owner": {"reputation": 35, "user_id": 9315659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X9C0V.png?s=128&g=1", "display_name": "Lumiobyte", "link": "https://stackoverflow.com/users/9315659/lumiobyte"}, "reply_to_user": {"reputation": 474, "user_id": 4833056, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/z80oz.png?s=128&g=1", "display_name": "BlueRine S", "link": "https://stackoverflow.com/users/4833056/bluerine-s"}, "edited": false, "score": 0, "creation_date": 1560380549, "post_id": 56571278, "comment_id": 99721537, "body": "@BlueRineS i literally said &quot;<b>i tried pyinstaller, but...</b>&quot;"}, {"owner": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "edited": false, "score": 0, "creation_date": 1560382221, "post_id": 56571278, "comment_id": 99721864, "body": "If <code>Pyinstaller</code> is not including everything, then you need to specify what it should include by using a <code>.spec</code> file."}], "owner": {"reputation": 35, "user_id": 9315659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X9C0V.png?s=128&g=1", "display_name": "Lumiobyte", "link": "https://stackoverflow.com/users/9315659/lumiobyte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1560379706, "creation_date": 1560379706, "question_id": 56571278, "link": "https://stackoverflow.com/questions/56571278/is-it-possible-to-bundle-a-python-version-dependencies-and-my-program-in-one-fo", "title": "Is it possible to bundle a python version, dependencies and my program in one folder for distribution", "body": "<p>I have finished my program and I need to send it to beta testers but they aren't very tech-savvy and won't know how to install python and pip install dependencies. and especially when i want to distribute to an even wider audience, i can't have them all have to set everything up.</p>\n\n<p>I tried pyinstaller, but it doesn't include all or my image files, or my save database.</p>\n\n<p>my issue is i don't know how to bundle everything together and make the program know wherethe python install is, where te dependencies are... etc</p>\n\n<p>any help would be excellent. thanks!</p>\n"}, {"tags": ["python", "django", "django-models", "django-rest-framework"], "answers": [{"comments": [{"owner": {"reputation": 958, "user_id": 8107977, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qZYi6.jpg?s=128&g=1", "display_name": "imsaiful", "link": "https://stackoverflow.com/users/8107977/imsaiful"}, "edited": false, "score": 0, "creation_date": 1560435843, "post_id": 56572176, "comment_id": 99743302, "body": "Hey It&#39;s filter out all the spam  but I want a filter for a specific number as NumberList.objects.filter(Q(spam=True) &amp; Q(number=number)).count(). How to get a number here. I have tried using kwargs but could not help."}, {"owner": {"reputation": 54482, "user_id": 8283848, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/YiHgN.jpg?s=128&g=1", "display_name": "JPG", "link": "https://stackoverflow.com/users/8283848/jpg"}, "reply_to_user": {"reputation": 958, "user_id": 8107977, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qZYi6.jpg?s=128&g=1", "display_name": "imsaiful", "link": "https://stackoverflow.com/users/8107977/imsaiful"}, "edited": false, "score": 0, "creation_date": 1560486043, "post_id": 56572176, "comment_id": 99759840, "body": "@imsaiful I&#39;ve updated the answer. You can fetch the <code>view</code> object from <code>self.context</code> in serializer."}], "tags": [], "owner": {"reputation": 54482, "user_id": 8283848, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/YiHgN.jpg?s=128&g=1", "display_name": "JPG", "link": "https://stackoverflow.com/users/8283848/jpg"}, "is_accepted": true, "score": 1, "last_activity_date": 1560486003, "last_edit_date": 1560486003, "creation_date": 1560388598, "answer_id": 56572176, "question_id": 56571262, "link": "https://stackoverflow.com/questions/56571262/how-to-add-extra-key-value-in-django-rest-framework-api-view/56572176#56572176", "title": "How to add extra key value in django rest framework api view?", "body": "<p>You can use <a href=\"https://www.django-rest-framework.org/api-guide/fields/#serializermethodfield\" rel=\"nofollow noreferrer\"><strong><code>SerializerMethodField()</code>--[DRF Doc]</strong></a> here as,</p>\n\n<pre><code>class FindNameSerializer(serializers.ModelSerializer):\n    <b>spam = serializers.SerializerMethodField()\n\n    def get_spam(self, instance):\n        return NumberList.objects.filter(spam=True, number=self.context['view'].kwargs['number']).count()</b>\n\n    class Meta:\n        model = NumberList\n        fields = ('name', 'number', <b>'spam'</b>)</code></pre>\n"}], "owner": {"reputation": 958, "user_id": 8107977, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qZYi6.jpg?s=128&g=1", "display_name": "imsaiful", "link": "https://stackoverflow.com/users/8107977/imsaiful"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 541, "favorite_count": 0, "accepted_answer_id": 56572176, "answer_count": 1, "score": 0, "last_activity_date": 1560486003, "creation_date": 1560379490, "question_id": 56571262, "link": "https://stackoverflow.com/questions/56571262/how-to-add-extra-key-value-in-django-rest-framework-api-view", "title": "How to add extra key value in django rest framework api view?", "body": "<p>This is my models</p>\n\n<pre><code>class NumberList(models.Model):\n    userId = models.ForeignKey(User, on_delete=models.CASCADE)\n    name = models.CharField(max_length=50)\n    number = models.PositiveIntegerField()\n    spam = models.BooleanField(default=False)\n\n    def __str__(self):\n        return str(self.number)\n</code></pre>\n\n<p>This is my serializer class</p>\n\n<pre><code>class FindNameSerializer(serializers.ModelSerializer):\n    class Meta:\n        model= NumberList\n        fields = ('name','number')\n</code></pre>\n\n<p>This is my views </p>\n\n<pre><code>\nclass FindName(ListAPIView):\n    print(\"server error hai\")\n    serializer_class = FindNameSerializer\n    def get_queryset(self, *args, **kwargs):\n        number = self.kwargs.get(\"number\")\n        queryset = NumberList.objects.filter(number=number)\n        return queryset\n\n</code></pre>\n\n<p>which filter the number and return name and number on following url</p>\n\n<pre><code>path('find/&lt;slug:number&gt;/',FindName.as_view(), name='number'),\n</code></pre>\n\n<p>I am getting following result in my api </p>\n\n<pre><code>\n[\n    {\n        \"name\": \"Saiful Hasan\",\n        \"number\": 8888888888\n    }\n]\n</code></pre>\n\n<p>However my target is also to return the total number of spam reported to the user in my API and final API should look like this</p>\n\n<pre><code>[\n    {\n        \"name\": \"Saiful Hasan\",\n        \"number\": 8826478938\n        \"spam\": 3\n    }\n]\n</code></pre>\n\n<p>Number of spam can be calculated as </p>\n\n<pre><code>spam=NumberList.objects.filter(spam=True).count()\n</code></pre>\n\n<p>How should add spam in result queryset</p>\n"}, {"tags": ["python", "json", "mlab", "pymongo-3.x"], "comments": [{"owner": {"reputation": 474, "user_id": 4833056, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/z80oz.png?s=128&g=1", "display_name": "BlueRine S", "link": "https://stackoverflow.com/users/4833056/bluerine-s"}, "edited": false, "score": 1, "creation_date": 1560379227, "post_id": 56571165, "comment_id": 99721260, "body": "Which line causes the error?"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 2, "creation_date": 1560379239, "post_id": 56571165, "comment_id": 99721263, "body": "Why are you closing the client inside the <code>for</code> loop? What is the full traceback?"}], "owner": {"reputation": 75, "user_id": 11574689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y5atp.jpg?s=128&g=1", "display_name": "Lawrence_matei", "link": "https://stackoverflow.com/users/11574689/lawrence-matei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560378686, "creation_date": 1560378686, "question_id": 56571165, "link": "https://stackoverflow.com/questions/56571165/typeerror-collection-object-is-not-callable-when-trying-to-upload-several-f", "title": "TypeError: &#39;collection&#39; object is not callable.&#39; when trying to upload several files to mlab collection", "body": "<p>I am trying to iterate through a list of files in a folder. As iterate through them I would like to add each and everyone of them. however, I receive TypeError: 'collection' object is not callable.</p>\n\n<p>ive tried changing the directories and how I access mlab to no avail. I not sure if the file names having spaces in them is an issue. ive tried altering a couple of files but its still the same issue.</p>\n\n<pre><code>URI = 'mongodb://test:fake_pass@ds149984.mlab.com:49984/try2'\n\nclient = MongoClient(URI)\ncollection_sudo_freedom = client['sudo_freedom']\n\n\n\ndirectory = os.listdir('C:/Users/Maximvs/Documents/Scraper_Plans')\nprint(len(directory))\n\nfor file in directory:\n    # print(type)file)\n    folder = 'C:/Users/Maximvs/Documents/Scraper_Plans/'\n    Datafile = file\n    fullDirectory = folder + Datafile\n    # print(fullDirectory)\n\n    with open(fullDirectory) as f:\n\n        file_data = json.load(f)\n\n        collection_sudo_freedom.insert_one(file_data)\n\n    client.close()\n</code></pre>\n\n<p>I would like to upload all 312 files in my folder to mlabs(sudo_freedom collection).</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 135, "user_id": 2569354, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b6a28be41db74fa35384a470fa7ab688?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/2569354/alex"}, "edited": false, "score": 0, "creation_date": 1560381275, "post_id": 56571142, "comment_id": 99721686, "body": "If you view the source of the login page, do you see the CSRF token?"}, {"owner": {"reputation": 11, "user_id": 7056311, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZFmCzBSVqeA/AAAAAAAAAAI/AAAAAAAAADU/BPUKXIocOTE/photo.jpg?sz=128", "display_name": "Michail Golunyatnikov", "link": "https://stackoverflow.com/users/7056311/michail-golunyatnikov"}, "reply_to_user": {"reputation": 135, "user_id": 2569354, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b6a28be41db74fa35384a470fa7ab688?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/2569354/alex"}, "edited": false, "score": 0, "creation_date": 1560420547, "post_id": 56571142, "comment_id": 99734083, "body": "Yes, i see it. Moreover it is sent correctly via POST."}], "owner": {"reputation": 11, "user_id": 7056311, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZFmCzBSVqeA/AAAAAAAAAAI/AAAAAAAAADU/BPUKXIocOTE/photo.jpg?sz=128", "display_name": "Michail Golunyatnikov", "link": "https://stackoverflow.com/users/7056311/michail-golunyatnikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1560378848, "creation_date": 1560378484, "last_edit_date": 1560378848, "question_id": 56571142, "link": "https://stackoverflow.com/questions/56571142/csrf-verification-failed-in-standart-vs-django-project-template", "title": "CSRF verification failed in standart VS Django Project template", "body": "<p>I have a CSRF verification failed error after login in standard VS2019 Django project template</p>\n\n<p>In standard Django project I have a login form</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;form action=\".\" method=\"post\" class=\"form-horizontal\"&gt;{% csrf_token %}\n&lt;h4&gt;Use a local account to log in.&lt;/h4&gt;\n&lt;hr /&gt;\n&lt;div class=\"form-group\"&gt;\n&lt;label for=\"id_username\" class=\"col-md-2 control-label\"&gt;User name&lt;/label&gt;\n&lt;div class=\"col-md-10\"&gt;{{ form.username }}\n&lt;/div&gt;\n&lt;/div&gt;\ndiv class=\"form-group\"&gt;\n&lt;label for=\"id_password\" class=\"col-md-2 control-label\"&gt;Password&lt;/label&gt;\n&lt;div class=\"col-md-10\"&gt;{{ form.password }}\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"form-group\"&gt;\n&lt;div class=\"col-md-offset-2 col-md-10\"&gt;\n&lt;input type=\"hidden\" name=\"next\" value=\"/\" /&gt;\n&lt;input type=\"submit\" value=\"Log in\" class=\"btn btn-default\" /&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n{% if form.errors %}\n&lt;p class=\"validation-summary-errors\"&gt;Please enter a correct user name and password.&lt;/p&gt;\n{% endif %}\n&lt;/form&gt;\n</code></pre>\n\n<p>urls.py</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>    path('login/',\n         LoginView.as_view\n         (\n             template_name='app/login.html',\n             authentication_form=forms.BootstrapAuthenticationForm,\n             extra_context=\n             {\n                 'title': 'Log in',\n                 'year' : datetime.now().year,\n             }\n         ),\n         name='login'),\n</code></pre>\n\n<p>and forms.py</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from django import forms\nfrom django.contrib.auth.forms import AuthenticationForm\nfrom django.utils.translation import ugettext_lazy as _\n\nclass BootstrapAuthenticationForm(AuthenticationForm):\n    \"\"\"Authentication form which uses boostrap CSS.\"\"\"\n    username = forms.CharField(max_length=254,\n                               widget=forms.TextInput({\n                                   'class': 'form-control',\n                                   'placeholder': 'User name'}))\n\n    password = forms.CharField(label=_(\"Password\"),\n                               widget=forms.PasswordInput({\n                                   'class': 'form-control',\n                                   'placeholder':'Password'}))\n\n</code></pre>\n\n<p>After i try login i gave Forbidden <code>(403) CSRF verification failed. Request aborted.</code> Although the value of <code>csrfmiddlewaretoken</code> is sent.</p>\n\n<p>I also wonder where exactly <code>BootstrapAuthenticationForm</code> is embedded in <code>login.html</code>? I see no any mention <code>BootstrapAuthenticationForm</code> in <code>login.html</code>.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1560378151, "post_id": 56571091, "comment_id": 99721005, "body": "You can&#39;t have colons in the file name. Use an underscore (<code>_</code>) or something"}, {"owner": {"reputation": 153, "user_id": 7748421, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k_DLGy2CsDA/AAAAAAAAAAI/AAAAAAAAGVA/eb95HsMnxYY/photo.jpg?sz=128", "display_name": "rmcknst2", "link": "https://stackoverflow.com/users/7748421/rmcknst2"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1560378235, "post_id": 56571091, "comment_id": 99721026, "body": "The colons come from the asctime() function. How would i change that and still keep inputting the time and date into the file name"}, {"owner": {"reputation": 2336, "user_id": 7389264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160900497f0373247800b2ad89798e32?s=128&d=identicon&r=PG&f=1", "display_name": "jirassimok", "link": "https://stackoverflow.com/users/7389264/jirassimok"}, "edited": false, "score": 0, "creation_date": 1560378404, "post_id": 56571091, "comment_id": 99721062, "body": "Usually, you would use a time function that returns something that can be used in a file name, like <a href=\"https://docs.python.org/3/library/time.html#time.time\" rel=\"nofollow noreferrer\"><code>time.time</code></a>. If you want it to be readable, you could use, for example, <a href=\"https://docs.python.org/3/library/stdtypes.html#str.replace\" rel=\"nofollow noreferrer\"><code>str.replace</code></a> to remove the colon."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1560378504, "post_id": 56571091, "comment_id": 99721090, "body": "The <code>time</code> module is mostly superseded by the <code>datetime</code> module. Something like <code>datetime.datetime.now().strftime(&#39;%Y_%m_%d_%H_%M_%S&#39;)</code> or <code>iso</code> shortcuts"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1560378674, "post_id": 56571091, "comment_id": 99721139, "body": "@roganjosh: Was about to suggest the same thing. Advantage to that over stuff like <code>asctime</code> is that that date format will sort ASCIIbetically in order by date string, so sorting by filename gets them in the correct order."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "reply_to_user": {"reputation": 2336, "user_id": 7389264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160900497f0373247800b2ad89798e32?s=128&d=identicon&r=PG&f=1", "display_name": "jirassimok", "link": "https://stackoverflow.com/users/7389264/jirassimok"}, "edited": false, "score": 0, "creation_date": 1560379054, "post_id": 56571091, "comment_id": 99721231, "body": "@jirassimok don&#39;t use <code>replace</code> when converting a <code>time</code>/<code>datetime</code> object to a string. That&#39;s wasteful. Both modules give you full control of their format when converting to string with <code>strftime</code>"}], "answers": [{"tags": [], "owner": {"reputation": 3021, "user_id": 11606193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXr7w.jpg?s=128&g=1", "display_name": "Deepstop", "link": "https://stackoverflow.com/users/11606193/deepstop"}, "is_accepted": false, "score": 0, "last_activity_date": 1560378631, "creation_date": 1560378631, "answer_id": 56571157, "question_id": 56571091, "link": "https://stackoverflow.com/questions/56571091/oserror-errno-22-invalid-argument-when-trying-to-create-a-file/56571157#56571157", "title": "OSError: [Errno 22] Invalid argument when trying to create a file", "body": "<p>time.asctime returns this format 'Sun Jun 20 23:21:05 1993'. As you're on windows and it doesn't accept /:*?\"&lt;> or |,  you are specifying a filename which is not legal.</p>\n\n<p>Try time.strftime, it will let you format the date/time any way you want.</p>\n"}, {"comments": [{"owner": {"reputation": 153, "user_id": 7748421, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k_DLGy2CsDA/AAAAAAAAAAI/AAAAAAAAGVA/eb95HsMnxYY/photo.jpg?sz=128", "display_name": "rmcknst2", "link": "https://stackoverflow.com/users/7748421/rmcknst2"}, "edited": false, "score": 0, "creation_date": 1560380154, "post_id": 56571166, "comment_id": 99721457, "body": "For this between the year month and date could i put &quot;/&quot; between them? @Roshan"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "reply_to_user": {"reputation": 153, "user_id": 7748421, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k_DLGy2CsDA/AAAAAAAAAAI/AAAAAAAAGVA/eb95HsMnxYY/photo.jpg?sz=128", "display_name": "rmcknst2", "link": "https://stackoverflow.com/users/7748421/rmcknst2"}, "edited": false, "score": 0, "creation_date": 1560380252, "post_id": 56571166, "comment_id": 99721477, "body": "@rmcknst2 why don&#39;t you just try rename a new file in that format and find out? You don&#39;t need Python for that --&gt; right click, new file, give it a name with <code>&#47;</code> in it. See what happens"}, {"owner": {"reputation": 595, "user_id": 8104378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PmeTl.jpg?s=128&g=1", "display_name": "Roshan", "link": "https://stackoverflow.com/users/8104378/roshan"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1560380516, "post_id": 56571166, "comment_id": 99721530, "body": "&quot;/&quot; is a reserved character in windows and you might need to escape it. You could just try it out as @roganjosh suggested or do you mean something else?"}], "tags": [], "owner": {"reputation": 595, "user_id": 8104378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PmeTl.jpg?s=128&g=1", "display_name": "Roshan", "link": "https://stackoverflow.com/users/8104378/roshan"}, "is_accepted": false, "score": 0, "last_activity_date": 1560378691, "creation_date": 1560378691, "answer_id": 56571166, "question_id": 56571091, "link": "https://stackoverflow.com/questions/56571091/oserror-errno-22-invalid-argument-when-trying-to-create-a-file/56571166#56571166", "title": "OSError: [Errno 22] Invalid argument when trying to create a file", "body": "<p>The timestamp in the filename contains invalid characters. Use the following to create a time stamp that can be appended to the filename:</p>\n\n<pre><code>import time\ntimestr = time.strftime(\"%Y%m%d-%H%M%S\")\n</code></pre>\n\n<p>The output from this can be used to create filenames. </p>\n"}, {"tags": [], "owner": {"reputation": 810, "user_id": 1161132, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/gNKM0.jpg?s=128&g=1", "display_name": "bgura", "link": "https://stackoverflow.com/users/1161132/bgura"}, "is_accepted": false, "score": 0, "last_activity_date": 1560378748, "creation_date": 1560378748, "answer_id": 56571174, "question_id": 56571091, "link": "https://stackoverflow.com/questions/56571091/oserror-errno-22-invalid-argument-when-trying-to-create-a-file/56571174#56571174", "title": "OSError: [Errno 22] Invalid argument when trying to create a file", "body": "<p>The output contains invalid characters for a filepath on windows.</p>\n\n<p>Try the <a href=\"https://docs.python.org/2/library/time.html#time.strftime\" rel=\"nofollow noreferrer\">strftime</a> method to get a format that only contains acceptable path characters.</p>\n\n<pre><code>import time\n\nbasename = \"C:\\\\Users\\\\User\\\\Desktop\\\\VendSend Log \"\nlogname = \"%s %s.txt\" % (basename, time.strftime(\"%a %b %d %H %M %S %Y\", time.localtime()))\n</code></pre>\n\n<p>I would also encourage you not to use spaces in the path (<strong>this includes the filename</strong>).</p>\n"}], "owner": {"reputation": 153, "user_id": 7748421, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k_DLGy2CsDA/AAAAAAAAAAI/AAAAAAAAGVA/eb95HsMnxYY/photo.jpg?sz=128", "display_name": "rmcknst2", "link": "https://stackoverflow.com/users/7748421/rmcknst2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2735, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1560378748, "creation_date": 1560378064, "question_id": 56571091, "link": "https://stackoverflow.com/questions/56571091/oserror-errno-22-invalid-argument-when-trying-to-create-a-file", "title": "OSError: [Errno 22] Invalid argument when trying to create a file", "body": "<p>I am trying to create a log system which writes to a new file all the exceptions that the program encountered. To achieve this i used the asctime() function in my string creation. However when I trun to run I get the this error: </p>\n\n<p>OSError: [Errno 22] Invalid argument: 'C:\\Users\\User\\Desktop\\VendSend Log Wed Jun 12 17:16:56 2019.txt'</p>\n\n<p>This is the code that I have:</p>\n\n<pre><code>reporter_name='C:\\\\Users\\\\User\\\\Desktop\\\\VendSend Log '+time.asctime()+'.txt'\n\nfh = open(reporter_name,'w')\n\nfh.write('-----VENDORS WITH NO EMAILS-----')\nf_len = len(vendor_removed)\nfcount = 0\nwhile fcount &lt; f_len:\n    fh.write(vendor_removed[fcount])\n    fh.write()\n    fcount += 1\n</code></pre>\n"}, {"tags": ["python", "mocking", "patch"], "comments": [{"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1560377874, "post_id": 56571054, "comment_id": 99720940, "body": "Show us the code you are testing."}, {"owner": {"reputation": 11845, "user_id": 3280538, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pYuGC.jpg?s=128&g=1", "display_name": "flakes", "link": "https://stackoverflow.com/users/3280538/flakes"}, "edited": false, "score": 0, "creation_date": 1560378259, "post_id": 56571054, "comment_id": 99721036, "body": "Maybe an issue with importing the value before patching? Is there any change if you import after the <code>patch</code>, or maybe just import the module and not the value directly. ie <code>results=app.api.commands.ip_addresses(&quot;stage&quot;)</code>"}, {"owner": {"reputation": 21, "user_id": 11584035, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tPNyPqQdksc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcme9mhif5_y1b6EfcH4P41744atQ/mo/photo.jpg?sz=128", "display_name": "Sam Greinert", "link": "https://stackoverflow.com/users/11584035/sam-greinert"}, "edited": false, "score": 0, "creation_date": 1560378267, "post_id": 56571054, "comment_id": 99721039, "body": "I cleaned it up and updated the post. Thanks!"}, {"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1560378488, "post_id": 56571054, "comment_id": 99721081, "body": "I see the problem now: you have to patch where you are using the function, here it is your test module: <code>@patch(ip_addresses)</code>. But what are you testing then? The mock?"}, {"owner": {"reputation": 21, "user_id": 11584035, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tPNyPqQdksc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcme9mhif5_y1b6EfcH4P41744atQ/mo/photo.jpg?sz=128", "display_name": "Sam Greinert", "link": "https://stackoverflow.com/users/11584035/sam-greinert"}, "reply_to_user": {"reputation": 11845, "user_id": 3280538, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pYuGC.jpg?s=128&g=1", "display_name": "flakes", "link": "https://stackoverflow.com/users/3280538/flakes"}, "edited": false, "score": 0, "creation_date": 1560378578, "post_id": 56571054, "comment_id": 99721114, "body": "@flakes I tried calling it with the whole path and no luck. Just an undefined error. And moving the import to after the <code>patch</code> just causes it to fail. <code>patch</code> should be looking for the memory location of an existing path and redirecting it, so it has to already be called before you can call <code>patch</code>"}, {"owner": {"reputation": 21, "user_id": 11584035, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tPNyPqQdksc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcme9mhif5_y1b6EfcH4P41744atQ/mo/photo.jpg?sz=128", "display_name": "Sam Greinert", "link": "https://stackoverflow.com/users/11584035/sam-greinert"}, "reply_to_user": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1560378677, "post_id": 56571054, "comment_id": 99721140, "body": "@KlausD. I&#39;m planning to test a function that calls ip_addresses but I need to be able to mock out that call so I can prevent it from trying to call aws when we test."}, {"owner": {"reputation": 393, "user_id": 8287997, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KZT31.jpg?s=128&g=1", "display_name": "nikhilesh_koshti", "link": "https://stackoverflow.com/users/8287997/nikhilesh-koshti"}, "edited": false, "score": 0, "creation_date": 1560421375, "post_id": 56571054, "comment_id": 99734541, "body": "Have you used the full path of your unittests in mock.patch decorator?"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 11584035, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tPNyPqQdksc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcme9mhif5_y1b6EfcH4P41744atQ/mo/photo.jpg?sz=128", "display_name": "Sam Greinert", "link": "https://stackoverflow.com/users/11584035/sam-greinert"}, "is_accepted": false, "score": 0, "last_activity_date": 1560433003, "creation_date": 1560433003, "answer_id": 56581770, "question_id": 56571054, "link": "https://stackoverflow.com/questions/56571054/python-unit-test-ignoring-mocked-response/56581770#56581770", "title": "Python unit test ignoring mocked response", "body": "<p>I got it working so I'll make sure to post the answer here. It has to do with how I was calling <code>ip_addresses</code> inside my test function.</p>\n\n<p>Instead of calling </p>\n\n<p><code>results=ip_addresses</code></p>\n\n<p>I just needed change that to:</p>\n\n<p><code>results=commands.ip_addresses</code></p>\n"}], "owner": {"reputation": 21, "user_id": 11584035, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tPNyPqQdksc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcme9mhif5_y1b6EfcH4P41744atQ/mo/photo.jpg?sz=128", "display_name": "Sam Greinert", "link": "https://stackoverflow.com/users/11584035/sam-greinert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 267, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560433003, "creation_date": 1560377754, "last_edit_date": 1560378231, "question_id": 56571054, "link": "https://stackoverflow.com/questions/56571054/python-unit-test-ignoring-mocked-response", "title": "Python unit test ignoring mocked response", "body": "<p>I'm trying to make a simple mock for a custom function in python. This function calls out to aws, and returns a list of ip addresses for all instances in an environment. Since I'm writing unit tests, I want to be able to mock the response from that function so I don't need to hit AWS in order to test.</p>\n\n<p>The issue I think, comes from the target I'm using. I've tried everything I can thing of but haven't had any luck.</p>\n\n<p>I've tried using patch this way:</p>\n\n<pre><code>def test_mock_ip_response(self):\n    with patch(\"app.api.commands.ip_addresses\", return_value=[\"10.10.10.10\"]):\n    results=ip_addresses(\"stage\")\n    print (results)\n    assert False\n</code></pre>\n\n<p>and with a decorator:</p>\n\n<pre><code>@patch(\"app.api.commands.ip_addresses\")\ndef test_mock_bash_response(self, mock_ip_addresses):\n    mock_ip_addresses.return_value=[\"10.10.10.10\"]\n    results=ip_addresses(\"stage\")\n    print (results)\n    assert False\n</code></pre>\n\n<p>Either way, the function ip_addresses always tried to call out to AWS, so the call isn' getting caught.</p>\n\n<p>Oh and I know the asserts are set to false, that's just so pytest will show me the stdout for my testing.</p>\n\n<p>Update:\nIncluding the code for ip_addresses:</p>\n\n<pre><code>def ip_addresses(environment: str) -&gt; List[str]:\n    client = get_client(\"ec2\")\n\n    filters = #removed since they contain naming conventions\n    response = client.describe_instances(Filters=filters)\n\n    return [\n        i[\"PrivateIpAddress\"] for r in response[\"Reservations\"] for i in r[\"Instances\"]\n    ]\n</code></pre>\n"}, {"tags": ["python", "django", "python-3.x", "pip", "pycurl"], "comments": [{"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 1, "creation_date": 1560377950, "post_id": 56571032, "comment_id": 99720958, "body": "Do you have curl, libcurl and its development files installed?"}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1560422708, "post_id": 56571032, "comment_id": 99735267, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/31481849/python-pip-install-failing-with-error-code-1\">Python pip install failing with error code 1</a>"}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1560422748, "post_id": 56571032, "comment_id": 99735281, "body": "<a href=\"https://stackoverflow.com/search?q=%5Bcentos%5D+%5Bpycurl%5D+No+such+file+or+directory+curl-config\">stackoverflow.com/&hellip;</a>"}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "reply_to_user": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1560444605, "post_id": 56571032, "comment_id": 99748343, "body": "@KlausD, when I run &quot;sudo yum install python-devel&quot; I get a message &quot;Package python-devel-2.7.5-77.el7_6.x86_64 already installed and latest version&quot;.  However, I&#39;m using Python 3.7."}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 6126415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebb6a9ffddb1eedb3fdbe5429f230f1b?s=128&d=identicon&r=PG", "display_name": "lennhv", "link": "https://stackoverflow.com/users/6126415/lennhv"}, "edited": false, "score": 0, "creation_date": 1560378192, "post_id": 56571084, "comment_id": 99721016, "body": "Sorry python37-devel"}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 2, "creation_date": 1560384754, "post_id": 56571084, "comment_id": 99722287, "body": "I get a message &quot;No package python37-devel available&quot;"}], "tags": [], "owner": {"reputation": 103, "user_id": 6126415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebb6a9ffddb1eedb3fdbe5429f230f1b?s=128&d=identicon&r=PG", "display_name": "lennhv", "link": "https://stackoverflow.com/users/6126415/lennhv"}, "is_accepted": false, "score": 0, "last_activity_date": 1560377994, "creation_date": 1560377994, "answer_id": 56571084, "question_id": 56571032, "link": "https://stackoverflow.com/questions/56571032/how-do-you-install-pycurl-with-python-3-7/56571084#56571084", "title": "How do you install PyCurl with Python 3.7?", "body": "<p>Install python36-devel and gcc and try again.</p>\n\n<blockquote>\n  <p>yum install python36-devel gcc</p>\n</blockquote>\n"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1560, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560377994, "creation_date": 1560377585, "question_id": 56571032, "link": "https://stackoverflow.com/questions/56571032/how-do-you-install-pycurl-with-python-3-7", "title": "How do you install PyCurl with Python 3.7?", "body": "<p>I'm using Python 3.7 on CentOS.  I would like to install the pycurl library, but I'm having some trouble ...</p>\n\n<pre><code>(venv) [myuser@server html]$ pip install pycurl 7.19.5\nCollecting pycurl\n  Using cached https://files.pythonhosted.org/packages/e8/e4/0dbb8735407189f00b33d84122b9be52c790c7c3b25286826f4e1bdb7bde/pycurl-7.43.0.2.tar.gz\n    ERROR: Complete output from command python setup.py egg_info:\n    ERROR: Traceback (most recent call last):\n      File \"/tmp/pip-install-3cmwrpw6/pycurl/setup.py\", line 223, in configure_unix\n        stdout=subprocess.PIPE, stderr=subprocess.PIPE)\n      File \"/usr/local/lib/python3.7/subprocess.py\", line 756, in __init__\n        restore_signals, start_new_session)\n      File \"/usr/local/lib/python3.7/subprocess.py\", line 1499, in _execute_child\n        raise child_exception_type(errno_num, err_msg, err_filename)\n    FileNotFoundError: [Errno 2] No such file or directory: 'curl-config': 'curl-config'\n\n    During handling of the above exception, another exception occurred:\n\n    Traceback (most recent call last):\n      File \"&lt;string&gt;\", line 1, in &lt;module&gt;\n      File \"/tmp/pip-install-3cmwrpw6/pycurl/setup.py\", line 913, in &lt;module&gt;\n        ext = get_extension(sys.argv, split_extension_source=split_extension_source)\n      File \"/tmp/pip-install-3cmwrpw6/pycurl/setup.py\", line 582, in get_extension\n        ext_config = ExtensionConfiguration(argv)\n      File \"/tmp/pip-install-3cmwrpw6/pycurl/setup.py\", line 99, in __init__\n        self.configure()\n      File \"/tmp/pip-install-3cmwrpw6/pycurl/setup.py\", line 227, in configure_unix\n        raise ConfigurationError(msg)\n    __main__.ConfigurationError: Could not run curl-config: [Errno 2] No such file or directory: 'curl-config': 'curl-config'\n    ----------------------------------------\nERROR: Command \"python setup.py egg_info\" failed with error code 1 in /tmp/pip-install-3cmwrpw6/pycurl/\n</code></pre>\n\n<p>What version of PyCurl is compatible with Python 3.7?  Is there something else I'm missing?</p>\n"}, {"tags": ["python", "pandas", "numpy-ndarray"], "answers": [{"tags": [], "owner": {"reputation": 364, "user_id": 6610244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c41bac2c84babe046c144b327c2aab6d?s=128&d=identicon&r=PG&f=1", "display_name": "drxl", "link": "https://stackoverflow.com/users/6610244/drxl"}, "is_accepted": false, "score": 0, "last_activity_date": 1560381164, "creation_date": 1560381164, "answer_id": 56571454, "question_id": 56571015, "link": "https://stackoverflow.com/questions/56571015/how-to-convert-string-from-pandas-dataframe-to-3-dimensional-array-in-numpy/56571454#56571454", "title": "How to convert string from pandas dataframe to 3-dimensional array in numpy", "body": "<p>By default, the asarray method will infer the data type from the data itself. Because you're reading in from a csv file, they are all strings.</p>\n\n<p>You can use the dtype parameter of the np.asarray method to set the data type.</p>\n\n<pre><code>import numpy as np\ndata = [['3','4'],['45','75']]\nnum_array = np.asarray(data, dtype=np.int)\nprint(num_array.dtype)\n</code></pre>\n\n<p>So your code would just need to change to:</p>\n\n<pre><code>train = pd.read_csv(os.path.join(data_dir, 'trainset.csv'))\ntrain['image'] = train['image'].map(lambda x: x.replace('\\n',','))\ntrain['image'] = train['image'].map(lambda x: np.asarray(x, dtype=np.int))\n</code></pre>\n\n<p>Where you can change the dtype=int to np.whatever datatype you want.</p>\n"}], "owner": {"reputation": 21, "user_id": 8032640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/899725665bc6b15b284a298f186825ec?s=128&d=identicon&r=PG&f=1", "display_name": "R.Gon", "link": "https://stackoverflow.com/users/8032640/r-gon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560381164, "creation_date": 1560377492, "question_id": 56571015, "link": "https://stackoverflow.com/questions/56571015/how-to-convert-string-from-pandas-dataframe-to-3-dimensional-array-in-numpy", "title": "How to convert string from pandas dataframe to 3-dimensional array in numpy", "body": "<p>I've exported a pandas data frame containing a numpy array of shape (75, 100, 3) to csv. When I import this csv file to get my dataframe, my numpy array is a string. I'm having so much problem trying to convert this string to numpy array of shape (75, 100, 3). </p>\n\n<p>My string is like:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>[[[198 113 144],  [212 137 157],  [213 133 158]\n</code></pre>\n\n<p>I've tried several ways to convert this to 3d-NUmpy array without success. In the snippet code, for example, I continue to got an array of string. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\ntrain = pd.read_csv(os.path.join(data_dir, 'trainset.csv'))\ntrain['image'] = train['image'].map(lambda x: x.replace('\\n',','))\ntrain['image'] = train['image'].map(lambda x: np.asarray(x))\n</code></pre>\n\n<p>Does someone know a simple way to handle this?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 3, "creation_date": 1560377740, "post_id": 56571005, "comment_id": 99720908, "body": "The <code>import</code> statement is where the content of that file is loaded. You don&#39;t need to worry about it after that."}, {"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 0, "creation_date": 1560377816, "post_id": 56571005, "comment_id": 99720928, "body": "Are you running into memory errors with <i>this</i> code?"}, {"owner": {"reputation": 75, "user_id": 11198872, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OLv61mUzujA/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iij6m-nOyTHYmlREq-IlitrgGM0A/mo/photo.jpg?sz=128", "display_name": "Joseph", "link": "https://stackoverflow.com/users/11198872/joseph"}, "reply_to_user": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 0, "creation_date": 1560377943, "post_id": 56571005, "comment_id": 99720956, "body": "@Blorgbeard No, this is just an example to illustrate the concept."}, {"owner": {"reputation": 75, "user_id": 11198872, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OLv61mUzujA/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iij6m-nOyTHYmlREq-IlitrgGM0A/mo/photo.jpg?sz=128", "display_name": "Joseph", "link": "https://stackoverflow.com/users/11198872/joseph"}, "reply_to_user": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 0, "creation_date": 1560378059, "post_id": 56571005, "comment_id": 99720984, "body": "@Blorgbeard I guess I want to know whether the &#39;import requests&#39; line is processed in any way with each iteration of main_loop(). Or does get_data() get pulled into main.py while it is running?"}, {"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 0, "creation_date": 1560378059, "post_id": 56571005, "comment_id": 99720985, "body": "Well, a call to an imported function is not going to cause memory errors by itself. The problem must be something else. Can you construct a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that demonstrates your problem?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 4, "creation_date": 1560378076, "post_id": 56571005, "comment_id": 99720989, "body": "I&#39;m not sure exactly what your concerns are, but this is normal practice, if that makes you feel better. Note, it is important to understand, <i>functions aren&#39;t located in the .py file, source code is</i>. Once the source code has been executed, the function exists in the memory of the python process."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1560378140, "post_id": 56571005, "comment_id": 99721003, "body": "@Joseph no, the <code>import requests</code> gets run exactly once."}, {"owner": {"reputation": 75, "user_id": 11198872, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OLv61mUzujA/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iij6m-nOyTHYmlREq-IlitrgGM0A/mo/photo.jpg?sz=128", "display_name": "Joseph", "link": "https://stackoverflow.com/users/11198872/joseph"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1560378237, "post_id": 56571005, "comment_id": 99721027, "body": "@juanpa.arrivillaga This answers a lot of my questions. Thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "is_accepted": false, "score": 1, "last_activity_date": 1560379697, "creation_date": 1560379697, "answer_id": 56571276, "question_id": 56571005, "link": "https://stackoverflow.com/questions/56571005/is-it-okay-for-tight-loops-to-make-calls-to-other-files/56571276#56571276", "title": "Is it okay for tight loops to make calls to other files?", "body": "<p>Python caches the contents of a module when you <code>import</code> it the first time. The interpreter runs the module's code (including the definitions of classes and functions), and keeps the global namespace around for you to access later. So it's not excessively costly to keep looking up a function or variable from another module. It is pretty much like looking up a global variable in the current module.</p>\n\n<p>That's not to say that it's free, however. Looking up an attribute or global variable needs to do some dictionary lookups, and that could theoretically be the slowest part of some high performance code. In such a case, you might want to cache the lookup in a local variable (which can be accessed very quickly).</p>\n\n<pre><code>def example(data):\n    lookup = foo.bar  # cache an attribute lookup in a local variable\n\n    for x in data:\n        do_something(lookup, x)  # use local variable rather than do_something(foo.bar, x)\n</code></pre>\n\n<p>This is rarely necessary though, as usually the other parts of the code (e.g. the iteration over <code>data</code> or the body of <code>do_something</code>) will take so much time that the cost of a repeated attribute lookup would get lost in the noise if you left it in. In your example code, the web request and HTML parsing will be orders of magnitude slower than looking up the functions, so you probably shouldn't worry about it at all.</p>\n"}], "owner": {"reputation": 75, "user_id": 11198872, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OLv61mUzujA/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iij6m-nOyTHYmlREq-IlitrgGM0A/mo/photo.jpg?sz=128", "display_name": "Joseph", "link": "https://stackoverflow.com/users/11198872/joseph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560379748, "creation_date": 1560377440, "last_edit_date": 1560379748, "question_id": 56571005, "link": "https://stackoverflow.com/questions/56571005/is-it-okay-for-tight-loops-to-make-calls-to-other-files", "title": "Is it okay for tight loops to make calls to other files?", "body": "<p>I'm wondering whether it is bad practice for a loop to repeatedly make calls to other files in python, or does python handle this better than I'm thinking?</p>\n\n<p>I have a package that looks like:</p>\n\n<pre><code>__init__.py\nmain.py\nutils.py\n</code></pre>\n\n<p>main.py</p>\n\n<pre><code>import utils\n\ndef main_loop():\n    urls = [list_with_many_strings]\n    for url in urls:\n        data = utils.get_data(url)\n        print(data)\n</code></pre>\n\n<p>utils.py</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\n\ndef get_data(url):\n    page = requests.get(url)\n    soup = BeautifulSoup(page.text)\n    data = soup.find(id='spam')\n    return data\n</code></pre>\n\n<p>My question is whether it is wrong to make calls to other files like this in general. Does python have to reference utils.py with each iteration through the loop? Or does it just need to cache the get_data() function a single time?</p>\n\n<p>This is a pretty basic example, but I am running into memory errors with functions that make calls to other files repeatedly, and I'm wondering if this is the reason why.</p>\n"}, {"tags": ["python", "pandas", "numpy", "cumsum"], "comments": [{"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 0, "creation_date": 1560377883, "post_id": 56571000, "comment_id": 99720944, "body": "Can you use numpy?"}, {"owner": {"reputation": 535, "user_id": 3862109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27127dd6d7b0b3d971f7637f002bb52e?s=128&d=identicon&r=PG&f=1", "display_name": "AAA", "link": "https://stackoverflow.com/users/3862109/aaa"}, "reply_to_user": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 0, "creation_date": 1560378154, "post_id": 56571000, "comment_id": 99721006, "body": "yes, do numpy and pandas have any function related?"}], "answers": [{"comments": [{"owner": {"reputation": 535, "user_id": 3862109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27127dd6d7b0b3d971f7637f002bb52e?s=128&d=identicon&r=PG&f=1", "display_name": "AAA", "link": "https://stackoverflow.com/users/3862109/aaa"}, "edited": false, "score": 0, "creation_date": 1560378445, "post_id": 56571075, "comment_id": 99721073, "body": "thanks for your quick response. perfect! btw, can accumulate function be used on dataframe? Say, I have a matrix, where each column is a numeric series. I would like to calculate the cumsum for each column."}, {"owner": {"reputation": 12321, "user_id": 9958942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbfa5b660283a00f1c8b9a6ce8d67e1d?s=128&d=identicon&r=PG&f=1", "display_name": "benvc", "link": "https://stackoverflow.com/users/9958942/benvc"}, "reply_to_user": {"reputation": 535, "user_id": 3862109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27127dd6d7b0b3d971f7637f002bb52e?s=128&d=identicon&r=PG&f=1", "display_name": "AAA", "link": "https://stackoverflow.com/users/3862109/aaa"}, "edited": false, "score": 0, "creation_date": 1560378562, "post_id": 56571075, "comment_id": 99721108, "body": "@AAA sure, <code>itertools.accumulate</code> will accept any iterable, so lots of ways to use with a dataframe, series, etc."}], "tags": [], "owner": {"reputation": 12321, "user_id": 9958942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbfa5b660283a00f1c8b9a6ce8d67e1d?s=128&d=identicon&r=PG&f=1", "display_name": "benvc", "link": "https://stackoverflow.com/users/9958942/benvc"}, "is_accepted": false, "score": 8, "last_activity_date": 1560377927, "creation_date": 1560377927, "answer_id": 56571075, "question_id": 56571000, "link": "https://stackoverflow.com/questions/56571000/calculate-cumulative-sum-from-last-non-zero-entry-in-python/56571075#56571075", "title": "Calculate cumulative sum from last non-zero entry in python", "body": "<p>You can do it with <a href=\"https://docs.python.org/3/library/itertools.html#itertools.accumulate\" rel=\"noreferrer\"><code>itertools.accumulate</code></a>. It accepts a 2 argument function where the first argument is the accumulated result and the second argument is the current element from the iterable, so you can use a fairly simple lambda to calculate the running total unless the current element is zero. </p>\n\n<pre><code>from itertools import accumulate\n\nnums = [0,0,0,0,1,1,1,0,0,1,1,0]\n\nresult = accumulate(nums, lambda acc, elem: acc + elem if elem else 0)\nprint(list(result))\n# [0, 0, 0, 0, 1, 2, 3, 0, 0, 1, 2, 0]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 1, "last_activity_date": 1560380808, "creation_date": 1560380808, "answer_id": 56571414, "question_id": 56571000, "link": "https://stackoverflow.com/questions/56571000/calculate-cumulative-sum-from-last-non-zero-entry-in-python/56571414#56571414", "title": "Calculate cumulative sum from last non-zero entry in python", "body": "<p>We can do this in numpy with two passes of <code>np.cumsum(..)</code>. First we calculate the <code>cumsum</code> of the array:</p>\n\n<pre><code>a = np.array([0,0,0,0,1,1,1,0,0,1,1,0])\nc = np.cumsum(a)\n</code></pre>\n\n<p>This gives us:</p>\n\n<pre><code>&gt;&gt;&gt; c\narray([0, 0, 0, 0, 1, 2, 3, 3, 3, 4, 5, 5])\n</code></pre>\n\n<p>Next we filter <code>a</code> on elements where the value is <code>0</code> and we elementwise calculate the difference between that element and its predecessor:</p>\n\n<pre><code>corr = np.diff(np.hstack(((0,), c[a == 0])))\n</code></pre>\n\n<p>then this is the correction we need to apply on those elements:</p>\n\n<pre><code>&gt;&gt;&gt; corr\narray([0, 0, 0, 0, 3, 0, 2])\n</code></pre>\n\n<p>We can then make a copy of <code>a</code> (or do this inplace), and subtract the correction:</p>\n\n<pre><code>a2 = a.copy()\na2[a == 0] -= corr\n</code></pre>\n\n<p>this gives us:</p>\n\n<pre><code>&gt;&gt;&gt; a2\narray([ 0,  0,  0,  0,  1,  1,  1, -3,  0,  1,  1, -2])\n</code></pre>\n\n<p>and now we can calculate the cummulative sum of <code>a2</code> that will reset to <code>0</code> for an <code>0</code>, since the correction keeps track of the increments in between:</p>\n\n<pre><code>&gt;&gt;&gt; a2.cumsum()\narray([0, 0, 0, 0, 1, 2, 3, 0, 0, 1, 2, 0])\n</code></pre>\n\n<p>or as a function:</p>\n\n<pre><code>import numpy as np\n\ndef cumsumreset(iterable, reset=0):\n    a = np.array(iterable)\n    c = a.cumsum()\n    a2 = a.copy()\n    filter = a == reset\n    a2[filter] -= np.diff(np.hstack(((0,), c[filter])))\n    return a2.cumsum()\n</code></pre>\n\n<p>this then gives us:</p>\n\n<pre><code>&gt;&gt;&gt; cumsumreset([0,0,0,0,1,1,1,0,0,1,1,0])\narray([0, 0, 0, 0, 1, 2, 3, 0, 0, 1, 2, 0])\n</code></pre>\n"}], "owner": {"reputation": 535, "user_id": 3862109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27127dd6d7b0b3d971f7637f002bb52e?s=128&d=identicon&r=PG&f=1", "display_name": "AAA", "link": "https://stackoverflow.com/users/3862109/aaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 684, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1560406389, "creation_date": 1560377418, "last_edit_date": 1560406389, "question_id": 56571000, "link": "https://stackoverflow.com/questions/56571000/calculate-cumulative-sum-from-last-non-zero-entry-in-python", "title": "Calculate cumulative sum from last non-zero entry in python", "body": "<p>I have a numeric series like [0,0,0,0,1,1,1,0,0,1,1,0]. I would like to calculate the numeric sum from the last non-zero values. i.e the cumsum will be reset to zero once a zero entry occurs.</p>\n\n<pre><code>input: [0,0,0,0,1,1,1,0,0,1,1,0]\noutput:[0,0,0,0,1,2,3,0,0,1,2,0] \n</code></pre>\n\n<p>Is there a built-in python function able to achieve this? Or better way to calculate it without loop?</p>\n"}, {"tags": ["python", "django", "python-3.x", "django-models"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 4268211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a707456d7018d8ad10bcc4155e2f7922?s=128&d=identicon&r=PG&f=1", "display_name": "CNRP", "link": "https://stackoverflow.com/users/4268211/cnrp"}, "edited": false, "score": 0, "creation_date": 1560378672, "post_id": 56571056, "comment_id": 99721138, "body": "This makes a lot of sense! I knew there were better ways, just not sure exactly what was best so stuck to what I could understand.I do however get a error &quot;Exception Value: name &#39;get_object_for_this_type&#39; is not defined&quot; but I get the principle of what is happening so I&#39;ll have a go at fixing it. I did add the import so that shouldn&#39;t be the issue."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 0, "last_activity_date": 1560378705, "last_edit_date": 1560378705, "creation_date": 1560377776, "answer_id": 56571056, "question_id": 56570958, "link": "https://stackoverflow.com/questions/56570958/remove-duplicates-where-content-id-and-ip-address-are-the-same-in-python-django/56571056#56571056", "title": "Remove duplicates where content_id and ip_address are the same In python django module", "body": "<p>I think you make things too hard here, and you probably do too much work yourself.</p>\n\n<p>You can count the number of <em>distinct</em> <code>ip_address</code>es, with the <code>distinct=True</code> parameter of the <a href=\"https://docs.djangoproject.com/en/2.2/ref/models/querysets/#id8\" rel=\"nofollow noreferrer\"><strong><code>Count</code></strong> object [Django-doc]</a>, like:</p>\n\n<pre><code>from django.db.models import Count\n\nObjectViewed.objects.values('object_id', 'content_type').annotate(\n    c=Count(<b>'ip_address', distinct=True</b>)\n).order_by('-c')</code></pre>\n\n<p>We can use that to effectively order our <code>NewsPost</code>s like:</p>\n\n<pre><code>from django.contrib.contenttypes.models import ContentType\nfrom django.db.models import Count\n\nviews = <b>dict(</b>ObjectViewed.objects.filter(\n    content_type=get_object_for_this_type(NewsPost)\n).values_list('object_id').annotate(\n    c=Count(<b>'ip_address', distinct=True</b>)\n).order_by('object_id')<b>)</b></code></pre>\n\n<p>then we can order the elements at the Django/Python level like:</p>\n\n<pre><code><b>my_newsposts = sorted(</b>NewsPost.objects.all()<b>, key=views.get, reverse=True)</b></code></pre>\n\n<p>We here thus first filter to only retrieve the <em>distinct</em> views on <code>NewsPost</code> objects, we put these in a dictionary named <code>views</code>, then we sort the <code>NewsPost</code> objects with that views in reversed order.</p>\n"}], "owner": {"reputation": 15, "user_id": 4268211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a707456d7018d8ad10bcc4155e2f7922?s=128&d=identicon&r=PG&f=1", "display_name": "CNRP", "link": "https://stackoverflow.com/users/4268211/cnrp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 56571056, "answer_count": 1, "score": 1, "last_activity_date": 1560378705, "creation_date": 1560377144, "question_id": 56570958, "link": "https://stackoverflow.com/questions/56570958/remove-duplicates-where-content-id-and-ip-address-are-the-same-in-python-django", "title": "Remove duplicates where content_id and ip_address are the same In python django module", "body": "<p>I've got some code setup to count page clicks, the data is stored in ObjectViewed model every time a page is clicked. \nI'm currently counting how many times each page has been clicked but I would like to make it unique page clicks, so only show 1 click per page, per IP. </p>\n\n<p>I'm attempting to filter out where ip_address and content_object appear together ina row, more than once. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class ObjectViewed(models.Model):\n    object_id       = models.PositiveIntegerField()\n    content_type    = models.ForeignKey(ContentType, on_delete=models.SET_NULL, null=True)\n\n#where these are together i want to only count once below\n    content_object  = GenericForeignKey('content_type', 'object_id')\n    ip_address      = models.CharField(max_length=120, blank=True, null=True)\n\n\ndef analytics(request):\n    objects = ObjectViewed.objects.all()\n    q = NewsPost.objects.values('id').distinct()\n    dict = {}\n\n    for object in q:\n        dict.update({list(object.values())[0]: 0})\n        count = ObjectViewed.objects.values('object_id').annotate(c=Count('object_id')).order_by('-c')\n</code></pre>\n\n<p>Tried a few things, but new to python and django so I'm not quite sure what the best way is. \nAny help/guidance would be appreciated, thanks!</p>\n"}, {"tags": ["python", "selenium"], "answers": [{"tags": [], "owner": {"reputation": 1071, "user_id": 3358202, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/HgtiE.jpg?s=128&g=1", "display_name": "RKelley", "link": "https://stackoverflow.com/users/3358202/rkelley"}, "is_accepted": true, "score": 2, "last_activity_date": 1560378563, "last_edit_date": 1560378563, "creation_date": 1560378214, "answer_id": 56571110, "question_id": 56570957, "link": "https://stackoverflow.com/questions/56570957/selenium-click-by-id/56571110#56571110", "title": "Selenium click by ID", "body": "<p>It's timing out because the elements can't be found.  If you manually look at the html, you can see that the id's are different than what you're using.</p>\n\n<p>For example you have:</p>\n\n<pre><code>stock_code = WebDriverWait(driver, 5).until(ec.element_to_be_clickable((By.ID, \"ct100_txt_stock_code\")))\n</code></pre>\n\n<p>which should be:</p>\n\n<pre><code>stock_code = WebDriverWait(driver, 5).until(ec.element_to_be_clickable((By.ID, \"ctl00_txt_stock_code\")))\n</code></pre>\n\n<p>Look at the ID value.  It's a lower case L instead of a 1 at the 'ctl100' part of the ID.  Check the others and just do a copy and paste from the html ID's to your code.</p>\n\n<p>This works for the first 3 steps, but for step 4 use this:</p>\n\n<pre><code>driver.find_element_by_xpath(\"/html//form[@id='aspnetForm']/table//a[@href='javascript: if (preprocessMainForm() == true )  document.forms[0].submit();']\").click()  # click on search buttom\n</code></pre>\n"}], "owner": {"reputation": 1975, "user_id": 1744744, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0ea2850ef9a0500fa0ea5de1a528107a?s=128&d=identicon&r=PG&f=1", "display_name": "jason", "link": "https://stackoverflow.com/users/1744744/jason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 56571110, "answer_count": 1, "score": 1, "last_activity_date": 1560378563, "creation_date": 1560377142, "question_id": 56570957, "link": "https://stackoverflow.com/questions/56570957/selenium-click-by-id", "title": "Selenium click by ID", "body": "<p>I've followed the code here: <a href=\"https://stackoverflow.com/questions/51577185/selenium-python-get-element-by-id-failing\">Selenium Python get_element by ID failing</a> </p>\n\n<p>but it's still not working</p>\n\n<p>Here is my code</p>\n\n<pre><code>from selenium.webdriver.support import expected_conditions as ec\nfrom selenium.webdriver.support.wait import WebDriverWait\nfrom selenium.webdriver.common.by import By\nfrom selenium import webdriver\nfrom selenium.webdriver.chrome.options import Options\n\nBLACKBERRY_UA = \"Mozilla/5.0 (BlackBerry; U; BlackBerry 9900; en) AppleWebKit/534.11+ (KHTML, like Gecko) Version/7.1.0.346 Mobile Safari/534.11+\"\nopts = Options()\nopts.add_argument(\"user-agent={0}\".format(BLACKBERRY_UA))\n\nroot_url = 'http://www3.hkexnews.hk/listedco/listconews/advancedsearch/search_active_main.aspx'\nticker = '700'\n\ndriver = webdriver.Chrome(chrome_options=opts)\ndriver.get(root_url)\n\n# 1 enter ticker\nstock_code = WebDriverWait(driver, 5).until(ec.element_to_be_clickable((By.ID, \"ct100_txt_stock_code\")))\nstock_code.click()\nstock_code.send_keys(ticker)\n\n#2 click on \"Headline Category\" radio button\nbutton = WebDriverWait(driver, 5).until(ec.element_to_be_clickable((By.ID, \"ct100_rbAfter2006\")))\nbutton.click()\n\n#3 choose \"Announcements and Notices\" from drop down\ndriver.find_element_by_xpath(\"//select[@id='ct100_sel_tier_1']/option[text()='Announcements and Notices']\").click()\n\n# 4 click on \"Search\"\ndriver.find_element_by_xpath('//a[@href = \\\\\"javascript: if (preprocessMainForm() == true )  document.forms[0].submit()\"\\\\]').click()  # click on search buttom\n</code></pre>\n\n<p>I've tested each one of these 4 steps and none of them work. I've also tried <code>By.NAME</code> and it still doesn't work. I'm getting a <code>TimeoutException</code>. Not sure if selenium is finding the element or not, why the time out?</p>\n"}, {"tags": ["python", "sql", "psycopg2"], "comments": [{"owner": {"reputation": 45, "user_id": 9546309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a380927d85f6b475d84beb062e4ee0d?s=128&d=identicon&r=PG&f=1", "display_name": "Dan C", "link": "https://stackoverflow.com/users/9546309/dan-c"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1560442884, "post_id": 56570952, "comment_id": 99747509, "body": "@juanpa.arrivillaga could you please elaborate? In the psycopg2 guide (<a href=\"http://initd.org/psycopg/docs/usage.html\" rel=\"nofollow noreferrer\">initd.org/psycopg/docs/usage.html</a>), the following code (containing .format) is listed as proper use:  <code>cur.execute(SQL(&quot;INSERT INTO {} VALUES (%s)&quot;).format(Identifier(&#39;numbers&#39;)), (10,))</code>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1560444555, "post_id": 56570952, "comment_id": 99748320, "body": "You are correct"}, {"owner": {"reputation": 45, "user_id": 9546309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a380927d85f6b475d84beb062e4ee0d?s=128&d=identicon&r=PG&f=1", "display_name": "Dan C", "link": "https://stackoverflow.com/users/9546309/dan-c"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1560445034, "post_id": 56570952, "comment_id": 99748552, "body": "@juanpa.arrivillaga ok, thanks for the clarification. Do you have any further insight into my original question? I&#39;m really at a loss here and could use any ideas. Thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 1050, "user_id": 3020535, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6139f6541f6c19ed6ef99f19c7b2ff69?s=128&d=identicon&r=PG&f=1", "display_name": "SuaveSouris", "link": "https://stackoverflow.com/users/3020535/suavesouris"}, "is_accepted": false, "score": 1, "last_activity_date": 1612981233, "last_edit_date": 1612981233, "creation_date": 1612972949, "answer_id": 66140465, "question_id": 56570952, "link": "https://stackoverflow.com/questions/56570952/creating-dynamically-typed-tables-using-psycopg2s-built-in-formatting/66140465#66140465", "title": "Creating dynamically-typed tables using psycopg2&#39;s built-in formatting", "body": "<p>I was also having so much trouble with this aspect. <code>sql.Identifier</code> is for double-quoted, well, SQL Identifiers which the datatypes (<code>INTEGER</code>, <code>TEXT</code>, etc.) are <em>not</em>. Looks like just making it plain SQL does the trick.</p>\n<p><strong>N.B.</strong> In your code, you should have pre-defined <code>columns</code> tuples and not expose their definition to the front-end. This is also why tuples are useful here as they are immutable.</p>\n<pre class=\"lang-py prettyprint-override\"><code>import psycopg2.sql as sql\n\ndef create_table( name, columns ):\n    # name = &quot;mytable&quot;\n    # columns = ((&quot;col1&quot;, &quot;TEXT&quot;), (&quot;col2&quot;, &quot;INTEGER&quot;), ...)\n    fields = []\n    for col in columns:\n        fields.append( sql.SQL( &quot;{} {}&quot; ).format( sql.Identifier( col[0] ), sql.SQL( col[1] ) ) )\n\n    query = sql.SQL( &quot;CREATE TABLE {tbl_name} ( {fields} );&quot; ).format(\n        tbl_name = sql.Identifier( name ),\n        fields = sql.SQL( ', ' ).join( fields )\n    )\n    print( query.as_string(conn) ) # CREATE TABLE &quot;mytable&quot; ( &quot;col1&quot; TEXT, &quot;col2&quot; INTEGER );\n    # Get cursor and execute...\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 9546309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a380927d85f6b475d84beb062e4ee0d?s=128&d=identicon&r=PG&f=1", "display_name": "Dan C", "link": "https://stackoverflow.com/users/9546309/dan-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1612981233, "creation_date": 1560377124, "question_id": 56570952, "link": "https://stackoverflow.com/questions/56570952/creating-dynamically-typed-tables-using-psycopg2s-built-in-formatting", "title": "Creating dynamically-typed tables using psycopg2&#39;s built-in formatting", "body": "<p>I'm working on a project in Python that interacts with a PostgreSQL data warehouse, and I'm using the psycopg2 API. I am looking to create dynamically-typed tables.</p>\n\n<p>For example: I would like to be able to execute the following code:</p>\n\n<pre><code>from psycopg2 import connect, sql\n\nconnection = connect(host=\"host\", port=\"port\", database=\"database\", user=\"user\", password=\"pw\")\n\ndef create_table(tbl_name, col_name, col_type):\n    query = sql.SQL(\"CREATE TABLE {} ({} {})\".format(sql.Identifier(tbl_name), sql.Identifier(col_name), sql.Identifier(column_type)))\n    connection.execute(query)\n\ncreate_table('animals', 'name', 'VARCHAR')\n</code></pre>\n\n<p>and end up with a table named \"animals\" that contains a column \"name\" of type VARCHAR. However, when I attempt to run this, I get an error: 'type \"VARCHAR\" does not exist'. I assume psycopg2's built-in formatter is putting double quotes around the VARCHAR type when there should not be any. Normally, I would just work around this myself, but the documentation is <em>very</em> clear that Python string concatenation should never be used for fear of SQL injection attacks. Security is a concern for this project, so I would like to know if it's possible to create dynamically-typed tables in this fashion using pyscopg2, and if not, whether there exists another third-party API that can do so securely. Thank you!</p>\n\n<p>Danny </p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7700754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee195af793c766efc2834a09daf0481f?s=128&d=identicon&r=PG&f=1", "display_name": "xiao pan", "link": "https://stackoverflow.com/users/7700754/xiao-pan"}, "is_accepted": false, "score": 0, "last_activity_date": 1560378585, "creation_date": 1560378585, "answer_id": 56571150, "question_id": 56570951, "link": "https://stackoverflow.com/questions/56570951/incorporating-a-string-to-a-file-reader/56571150#56571150", "title": "Incorporating a string to a file reader", "body": "<p>are you wondering something like below?</p>\n\n<pre><code>input_str = \"python is cool\"\ninput_str_list = input_str.split() \nfor word in input_str_list:\n    print(word) \n</code></pre>\n\n<p>in which the <code>split</code> method will split the string by space as default, and return a list as result</p>\n"}, {"tags": [], "owner": {"reputation": 343, "user_id": 9321739, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c8d9d1cf9f2eb844b8a04478e99a6792?s=128&d=identicon&r=PG&f=1", "display_name": "Ironstone1_", "link": "https://stackoverflow.com/users/9321739/ironstone1"}, "is_accepted": false, "score": 0, "last_activity_date": 1560378771, "creation_date": 1560378771, "answer_id": 56571177, "question_id": 56570951, "link": "https://stackoverflow.com/questions/56570951/incorporating-a-string-to-a-file-reader/56571177#56571177", "title": "Incorporating a string to a file reader", "body": "<pre><code>[print(i) for i in \"python is cool\".split(\" \")]\n</code></pre>\n\n<p>you can use the split method to separate each word in the string into a list, then use a for loop to iterate through and print each item in the list.</p>\n"}], "owner": {"reputation": 25, "user_id": 11606767, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jh8P8Ebd9mE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reH-Dl3siCxbN6yljlsVgjW_1huwA/mo/photo.jpg?sz=128", "display_name": "Wilgens Metelus", "link": "https://stackoverflow.com/users/11606767/wilgens-metelus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1560378771, "creation_date": 1560377118, "question_id": 56570951, "link": "https://stackoverflow.com/questions/56570951/incorporating-a-string-to-a-file-reader", "title": "Incorporating a string to a file reader", "body": "<p>I was just messing around with the file creating in python and got a program to print the words in the code each on a seperate line. What I was wondering and trying is doing this by using a string. I was trying to use a string called </p>\n\n<pre><code>input_str = \"python is cool\"\n</code></pre>\n\n<p>I wanted the program to print that statement with each word on a new line, but I had no idea where to start. Would I use a for loop and the split method? </p>\n\n<pre><code>f = open(\"file1.txt\",\"w\")\nf.write(\"python\\nis\\ncool\")\nf.close()\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "tensorflow2.0"], "comments": [{"owner": {"reputation": 8295, "user_id": 1699075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37a9c6b631a073149ec7200f8cd6378b?s=128&d=identicon&r=PG&f=1", "display_name": "thushv89", "link": "https://stackoverflow.com/users/1699075/thushv89"}, "edited": false, "score": 0, "creation_date": 1560386161, "post_id": 56570918, "comment_id": 99722500, "body": "Can you please post the full code with the CNN function/model ? It&#39;s hard to know what&#39;s going wrong without the full code."}], "answers": [{"tags": [], "owner": {"reputation": 7144, "user_id": 9393102, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wUL3bBGSRcw/AAAAAAAAAAI/AAAAAAAAABQ/Zxo_yZ-Khsw/photo.jpg?sz=128", "display_name": "xdurch0", "link": "https://stackoverflow.com/users/9393102/xdurch0"}, "is_accepted": false, "score": 2, "last_activity_date": 1560414591, "creation_date": 1560414591, "answer_id": 56576428, "question_id": 56570918, "link": "https://stackoverflow.com/questions/56570918/tensorflow-2-0-tf-gradienttape-returns-none-results/56576428#56576428", "title": "TensorFlow 2.0: tf.GradientTape() returns None results", "body": "<p>I think you want <code>tf.keras.losses.CategoricalCrossentropy</code> as your loss, not the <code>metrics</code> version. These are actually different functions, not aliases.</p>\n"}], "owner": {"reputation": 1289, "user_id": 10202729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3708cf8f9c00d58c94ad94ff69e46184?s=128&d=identicon&r=PG&f=1", "display_name": "Leevo", "link": "https://stackoverflow.com/users/10202729/leevo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 356, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1560414591, "creation_date": 1560376823, "question_id": 56570918, "link": "https://stackoverflow.com/questions/56570918/tensorflow-2-0-tf-gradienttape-returns-none-results", "title": "TensorFlow 2.0: tf.GradientTape() returns None results", "body": "<p>I am trying to train a <code>CNN</code> model in TensorFlow 2.0. It's a multiclass classification task. I am simplifying the code to make it more readable:</p>\n\n<pre><code># Loss function\nloss = tf.keras.metrics.CategoricalCrossentropy()\n\n# Optimizer\noptimizer = tf.optimizers.Adam(learning_rate = 0.0005)\n\n\n# Training:\n\nfor epoch in range(1000):\n\n    # fetch mini batch of data\n    X_batch, y_batch = fetch_batch( [...] )\n\n    with tf.GradientTape() as tape:\n        current_loss = loss(y_batch, CNN(X_batch))  # take current loss\n\n    # get the gradient of the loss function\n    gradients = tape.gradient(current_loss, CNN.trainable_variables)\n\n    # update weights\n    optimizer.apply_gradients(zip(gradients, CNN.trainable_variables))\n\n    [ ... ]\n</code></pre>\n\n<p>At this point, I get an error:</p>\n\n<blockquote>\n  <p>ValueError: No gradients provided for any variable ...</p>\n</blockquote>\n\n<p>I know where the problem is: something goes wrong when I call <code>tape.gradient()</code>. If I check the object <code>gradient</code> this is what I get:</p>\n\n<pre><code>print(gradients)\n</code></pre>\n\n<blockquote>\n  <p>[None, None, None, None, None, None, None, None, None, None, None,\n  None, None, None, None, None, None, None, None, None, None, None]</p>\n</blockquote>\n\n<p>I don't understand why <code>gradients</code> is returned like this. I have literally copy-pasted the code for training other (non-CNN) models in TF 2.0, and they always worked out very well. All the others element of my model seem to behave as they should.</p>\n\n<p>--</p>\n\n<p>PS: this question is different from <a href=\"https://stackoverflow.com/questions/51994043/tf-gradienttape-return-none\">this one</a>, which is based on TF 1.x.</p>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1560377049, "post_id": 56570909, "comment_id": 99720729, "body": "You need to unindent the slider definitions so that they are no longer part of the print_value function."}], "answers": [{"tags": [], "owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "is_accepted": true, "score": 0, "last_activity_date": 1560376988, "creation_date": 1560376988, "answer_id": 56570938, "question_id": 56570909, "link": "https://stackoverflow.com/questions/56570909/why-do-my-sliders-disappear-in-python-tkinter/56570938#56570938", "title": "why do my sliders disappear in python tkinter?", "body": "<p>The code that creates the sliders is inside the function <code>print_value</code>, and you never call <code>print_value</code>.</p>\n"}], "owner": {"reputation": 61, "user_id": 11639037, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HVbQnIoHZ4Q/AAAAAAAAAAI/AAAAAAAADWI/MXfuDRbqU4E/photo.jpg?sz=128", "display_name": "Luke Redwine", "link": "https://stackoverflow.com/users/11639037/luke-redwine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 56570938, "answer_count": 1, "score": 0, "last_activity_date": 1560376988, "creation_date": 1560376741, "question_id": 56570909, "link": "https://stackoverflow.com/questions/56570909/why-do-my-sliders-disappear-in-python-tkinter", "title": "why do my sliders disappear in python tkinter?", "body": "<p>I've been working on a tkinter project that uses three sliders to customize an RGB output. The code bellow works just fine:  </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from tkinter import*\n\n\nWindow = Tk()\nWindow.title(\"Edit Color\")\nWindow.geometry('1270x680')\nWindow.configure(background = \"black\")\n\n#sliders\nSlider_1 = Scale(activebackground='pink',\n                 orient=HORIZONTAL,\n                 relief=GROOVE,\n                 length = 500,\n                 from_=0,to_=255,\n                 bg='red',\n                 tickinterval=51,\n                 troughcolor='pink')\nSlider_1.grid(row=0, column=0,padx=60, pady=70)\n\n\nSlider_2 = Scale(activebackground='lightGreen',\n                 orient=HORIZONTAL,\n                 relief=GROOVE,\n                 length = 500,\n                 from_=0,to_=255,\n                 bg='Green',\n                 tickinterval=51,\n                 troughcolor='lightGreen')\nSlider_2.grid(row=2,  column=0, pady=70)\n\n\nSlider_3 = Scale(activebackground= 'light blue',\n                 orient=HORIZONTAL,relief=GROOVE,\n                 length = 500, from_=0, to_=255,\n                 bg='blue',\n                 tickinterval=51,\n                 troughcolor= 'light blue')\nSlider_3.grid(row=4, column=0, pady=70)\n\n\nWindow.mainloop()\n\n</code></pre>\n\n<p>Then I added two things in order to be able to print the values of the sliders. The first is near the top. It is a function which is associated with a parameter called \u201dcommand\u201d, that can be found at the end of the parentheses of each slider function:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from tkinter import*\n\n\nWindow = Tk()\nWindow.title(\"Edit Color\")\nWindow.geometry('1270x680')\nWindow.configure(background = \"black\")\n\ndef print_value(val):\n    print val\n\n#sliders\n    Slider_1 = Scale(activebackground='pink',\n                 orient=HORIZONTAL,\n                 relief=GROOVE,\n                 length = 500,\n                 from_=0,to_=255,\n                 bg='red',\n                 tickinterval=51,\n                 troughcolor='pink',command=print_value)\n    Slider_1.grid(row=0, column=0,padx=60, pady=70)\n\n\n    Slider_2 = Scale(activebackground='lightGreen',\n                 orient=HORIZONTAL,\n                 relief=GROOVE,\n                 length = 500,\n                 from_=0,to_=255,\n                 bg='Green',\n                 tickinterval=51,\n                 troughcolor='lightGreen',command=print_value)\n    Slider_2.grid(row=2,  column=0, pady=70)\n\n\n    Slider_3 = Scale(activebackground= 'light blue',\n                 orient=HORIZONTAL,relief=GROOVE,\n                 length = 500, from_=0, to_=255,\n                 bg='blue',\n                 tickinterval=51,\n                 troughcolor= 'light blue',command=print_value)\n    Slider_3.grid(row=4, column=0, pady=70)\n\n\nWindow.mainloop()\n\n\n</code></pre>\n\n<p>When I added this and executed the program the screen was black and I had no Sliders.</p>\n\n<p>what do I do?</p>\n"}, {"tags": ["python", "opencv", "rabbitmq"], "comments": [{"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 1, "creation_date": 1560377387, "post_id": 56570903, "comment_id": 99720824, "body": "While RabbitMQ is able to distribute messages with pretty much any payload, it is not designed for large amounts of binary data. You should expect a substantial use of system ressource and performance loss when trying to &quot;stream&quot; video over it."}, {"owner": {"reputation": 1582, "user_id": 6506040, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/hX3vM.jpg?s=128&g=1", "display_name": "bumblebee", "link": "https://stackoverflow.com/users/6506040/bumblebee"}, "edited": false, "score": 0, "creation_date": 1560408033, "post_id": 56570903, "comment_id": 99727384, "body": "<a href=\"https://stackoverflow.com/questions/46072174/send-images-using-rabbitmq\" title=\"send images using rabbitmq\">stackoverflow.com/questions/46072174/send-images-using-rabbi&zwnj;&#8203;tmq</a>"}], "owner": {"reputation": 964, "user_id": 5223992, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7e63cfce03f3f0d51b058eaef8ecb329?s=128&d=identicon&r=PG&f=1", "display_name": "Hossein", "link": "https://stackoverflow.com/users/5223992/hossein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 534, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560379057, "creation_date": 1560376682, "last_edit_date": 1560379057, "question_id": 56570903, "link": "https://stackoverflow.com/questions/56570903/send-an-image-to-rabbitmq", "title": "Send an image to RabbitMQ", "body": "<p>I need to send/receive OpenCV images through RabbitMQ, apparently I'm running into problems with serialization. The error that I'm getting is: </p>\n\n<blockquote>\n  <p>ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()</p>\n</blockquote>\n\n<p>Does RabbitMQ allow sending images in this form? </p>\n\n<p>on the client side I have:</p>\n\n<pre><code>from imutils.video import VideoStream\nimport argparse\nimport socket\nimport time\nimport pika\nimport numpy as npfrom imutils.video import VideoStream\nimport argparse\nimport socket\nimport time\nimport pika\nimport numpy as np\nimport sys\n\nconnection = pika.BlockingConnection(\n            pika.ConnectionParameters(host='localhost'))\nchannel = connection.channel()\n\nchannel.exchange_declare(exchange='logs', exchange_type='fanout')\n\n\nvs = VideoStream(src=0).start()\ntime.sleep(2.0)\n\n\nwhile True:\n        frame = vs.ref\n        channel.basic_publish(exchange='vids', routing_key='', body=frame)\n</code></pre>\n\n<p>and on the receive side I have:</p>\n\n<pre><code>from imutils import build_montages\nfrom datetime import datetime\nimport numpy as np\nimport argparse\nimport imutils\nimport cv2\nimport pika\n\nconnection = pika.BlockingConnection(\n            pika.ConnectionParameters(host='localhost'))\nchannel = connection.channel()\n\nchannel.exchange_declare(exchange='vids', exchange_type='fanout')\n\nresult = channel.queue_declare(queue='', exclusive=True)\nqueue_name = result.method.queue\n\nchannel.queue_bind(exchange='vids', queue=queue_name)\n\ndef callback(ch, method, properties, body):\n\n    thresh = 127\n    body = cv2.threshold(body, thresh, 255, cv2.THRESH_BINARY)[1]\n    cv2.imshow(\"Home pet location monitor ({})\".format(1),body)\n\nchannel.basic_consume(\n    queue=queue_name, on_message_callback=callback, auto_ack=True)\n\nchannel.start_consuming()\n</code></pre>\n"}, {"tags": ["python", "selenium", "try-catch", "assertion", "webpage-screenshot"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11637589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a779d9300ec75298fafc614202038a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Ken", "link": "https://stackoverflow.com/users/11637589/ken"}, "edited": false, "score": 0, "creation_date": 1560436619, "post_id": 56572594, "comment_id": 99743825, "body": "Thanks. I will try your recommendation."}, {"owner": {"reputation": 3, "user_id": 11637589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a779d9300ec75298fafc614202038a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Ken", "link": "https://stackoverflow.com/users/11637589/ken"}, "edited": false, "score": 0, "creation_date": 1560448891, "post_id": 56572594, "comment_id": 99750279, "body": "Using your suggestion, I modified code as follows          errorDisplays = False          if driver.find_element_by_id(&quot;errorShowMore&quot;).is_displayed():             errorDisplays = True         else:             pass \t\t\t \t\ttry:             assert errorDisplays is False         except AssertionError:             screenshot_name = &quot;FAIL&quot; + &quot;<i>&quot; + test_case_ID + &quot;</i>&quot; + browser + &quot;<i>&quot; + env + &quot;</i>&quot; + time_stamp + &quot;.png&quot;             saved_screenshot_location = str(screenshot_directory / screenshot_name)             driver.get_screenshot_as_file(saved_screenshot_location)             raise"}], "tags": [], "owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "is_accepted": true, "score": 0, "last_activity_date": 1560392896, "creation_date": 1560392896, "answer_id": 56572594, "question_id": 56570859, "link": "https://stackoverflow.com/questions/56570859/try-except-statement-to-test-for-presence-of-error-button-throw-exception-if-el/56572594#56572594", "title": "Try Except Statement to Test for Presence of Error Button, Throw Exception if Element Found", "body": "<p>You can simply use <code>find_elements_by_id</code> and get the count.</p>\n\n<pre><code>errEleCount = len(driver.find_elements_by_id(\"errorShowMore\"))\nif errEleCount&gt;0:\n  # implement the logic here.\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11637589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a779d9300ec75298fafc614202038a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Ken", "link": "https://stackoverflow.com/users/11637589/ken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 56572594, "answer_count": 1, "score": 0, "last_activity_date": 1560392896, "creation_date": 1560376406, "question_id": 56570859, "link": "https://stackoverflow.com/questions/56570859/try-except-statement-to-test-for-presence-of-error-button-throw-exception-if-el", "title": "Try Except Statement to Test for Presence of Error Button, Throw Exception if Element Found", "body": "<p>I have written a Python / Selenium Script to automate a work flow on a financial site.</p>\n\n<p>One of the tests involves checking for the presence of error text on one of the screens.</p>\n\n<p>Attached is a Try / Except block that checks for the presence of a button (id = errorShowMore). If the button displays, I want the script to Fail and I want to take a screenshot of the page.</p>\n\n<p>I wrote code that identifies the error button. I then put this code into a Try / Except Block.</p>\n\n<p>However, I have questions on how to improve this error handling structure (if it can be improved).</p>\n\n<pre><code>try:\n    showMoreButton = driver.find_element_by_id(\"errorShowMore\")\n    assert showMoreButton.click() except AssertionError:\n    screenshot_name = \"FAIL\" + \"_\" + test_case_ID + \"_\" + browser + \"_\" + env + \"_\" + time_stamp + \".png\"\n    saved_screenshot_location = str(screenshot_directory / screenshot_name)\n    driver.get_screenshot_as_file(saved_screenshot_location)\n    raise\n</code></pre>\n\n<p>When I run the code and the error exists, I get an \"AssertionError\" (expected), screenshot is taken (expected) and script stops (expected).</p>\n\n<p>However, I feel like I am missing something.</p>\n\n<p>Is there a better way to check for the presence of the error button?</p>\n"}, {"tags": ["python", "matplotlib", "plot"], "comments": [{"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1560376759, "post_id": 56570857, "comment_id": 99720657, "body": "Do you have an example to show?"}, {"owner": {"reputation": 199, "user_id": 7146153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3b269f169aad2fdeb363b5a398ad232?s=128&d=identicon&r=PG&f=1", "display_name": "lbf_1994", "link": "https://stackoverflow.com/users/7146153/lbf-1994"}, "reply_to_user": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1560377310, "post_id": 56570857, "comment_id": 99720802, "body": "<a href=\"https://matplotlib.org/3.1.0/gallery/lines_bars_and_markers/xcorr_acorr_demo.html#sphx-glr-gallery-lines-bars-and-markers-xcorr-acorr-demo-py\" rel=\"nofollow noreferrer\">matplotlib.org/3.1.0/gallery/lines_bars_and_markers/&hellip;</a> it should look like this"}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1560377527, "post_id": 56570857, "comment_id": 99720861, "body": "Because your initial question is a little unclear, what about your use case is different enough that it doesn&#39;t allow you to use the sample code in the given example? Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 199, "user_id": 7146153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3b269f169aad2fdeb363b5a398ad232?s=128&d=identicon&r=PG&f=1", "display_name": "lbf_1994", "link": "https://stackoverflow.com/users/7146153/lbf-1994"}, "reply_to_user": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1560377692, "post_id": 56570857, "comment_id": 99720897, "body": "The example given computes the autocorrelation function and then plots it in that specific style. I, however, only want to have the same plotting style but do NOT want to compute the autocorrelation before. As I do not know how to do it I do not know what could be provided in a sample code."}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1560378079, "post_id": 56570857, "comment_id": 99720991, "body": "That helped clarify your question, thank you. In this case, you will likely have to set all of the style elements individually, as there doesn&#39;t seem to be a preset <a href=\"https://matplotlib.org/3.1.0/gallery/style_sheets/style_sheets_reference.html\" rel=\"nofollow noreferrer\">style sheet</a> in matplotlib for that plot style"}, {"owner": {"reputation": 199, "user_id": 7146153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3b269f169aad2fdeb363b5a398ad232?s=128&d=identicon&r=PG&f=1", "display_name": "lbf_1994", "link": "https://stackoverflow.com/users/7146153/lbf-1994"}, "reply_to_user": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1560378261, "post_id": 56570857, "comment_id": 99721038, "body": "Thank you! I think I have found a work around now: I can use the errorbar function and define the upper and lower intervals accordingly."}], "answers": [{"tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 2, "last_activity_date": 1560409876, "creation_date": 1560409876, "answer_id": 56575127, "question_id": 56570857, "link": "https://stackoverflow.com/questions/56570857/finding-certain-plotting-style/56575127#56575127", "title": "Finding certain plotting style", "body": "<p>You could use <a href=\"https://matplotlib.org/3.1.0/api/_as_gen/matplotlib.pyplot.stem.html\" rel=\"nofollow noreferrer\"><code>stem</code></a></p>\n\n<pre><code>import numpy as np; np.random.seed(21)\nimport matplotlib.pyplot as plt\n\nx = np.linspace(5,75)\ny = np.random.randn(len(x))\n\nplt.stem(x,y, linefmt=\"k\", markerfmt=\"none\", basefmt=\"C0\", use_line_collection=True)\n\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/8joGy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8joGy.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 199, "user_id": 7146153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3b269f169aad2fdeb363b5a398ad232?s=128&d=identicon&r=PG&f=1", "display_name": "lbf_1994", "link": "https://stackoverflow.com/users/7146153/lbf-1994"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 56575127, "answer_count": 1, "score": 0, "last_activity_date": 1560409876, "creation_date": 1560376404, "question_id": 56570857, "link": "https://stackoverflow.com/questions/56570857/finding-certain-plotting-style", "title": "Finding certain plotting style", "body": "<p>I am looking for a plotting function in matplotlib that plots the y-values as bars just like in an autocorrelogram but for a general function. Is there a method to do this in matplotlib or do I have to write my own function?</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "edited": false, "score": 3, "creation_date": 1560376673, "post_id": 56570844, "comment_id": 99720636, "body": "Matrix multiplication isn&#39;t defined unless the number of columns of the first operand is the same as the number of row as the second. Shape <code>(2,3)</code> and <code>(1,2)</code> can&#39;t be multiplied in that order, but they can in the opposite order. So maybe you want <code>np.matmul(w1, X)</code>?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 1, "creation_date": 1560385250, "post_id": 56570844, "comment_id": 99722376, "body": "<code>X*w1</code> is element wise product.  <code>matmul</code> is matrix product, but needs 2 arguments.  The error is in the * operation."}], "answers": [{"tags": [], "owner": {"reputation": 4057, "user_id": 8285811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C38qo.jpg?s=128&g=1", "display_name": "Akaisteph7", "link": "https://stackoverflow.com/users/8285811/akaisteph7"}, "is_accepted": false, "score": 0, "last_activity_date": 1563548847, "creation_date": 1563548847, "answer_id": 57115216, "question_id": 56570844, "link": "https://stackoverflow.com/questions/56570844/how-to-solve-numpy-matrix-multiplication-error/57115216#57115216", "title": "How to solve numpy matrix multiplication error", "body": "<p>Matrix multiplication is not your problem here. It is the multiplication you are trying to do: <code>X*w1</code>. This is not possible. If you want to multiply two arrays, they have to have the same shape or you can use broadcasting. But for broadcasting to work, all the axes, except one, have to have the same length. So that would not be possible in this case.</p>\n\n<p>It seems what you are actually trying to do is matrix multiplication. This needs two matrices, so you cannot multiply them first. Also, for two matrices to be multiplied this way, the number of columns of the first matrix needs to equal the number of rows of the second. So, the following would work and is probably what you are trying to do:</p>\n\n<pre><code>np.matmul(w1, X)\n</code></pre>\n"}], "owner": {"reputation": 192, "user_id": 11122879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17b010728963dd6cc71da76ba5ee9e09?s=128&d=identicon&r=PG&f=1", "display_name": "Rashida", "link": "https://stackoverflow.com/users/11122879/rashida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 223, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563555259, "creation_date": 1560376341, "last_edit_date": 1563555259, "question_id": 56570844, "link": "https://stackoverflow.com/questions/56570844/how-to-solve-numpy-matrix-multiplication-error", "title": "How to solve numpy matrix multiplication error", "body": "<pre><code>w, b, X, Y = np.array([[1.],[2.]]), 2., np.array([[1.,2.,-1.],[3.,4.,-3.2]]), np.array([[1,0,1]])\nw1 = w.T\nprint(np.matmul(X*w1))\n</code></pre>\n\n<p>This code gives the following error:</p>\n\n<pre><code>ValueError: operands could not be broadcast together with shapes (2,3) (1,2) \n</code></pre>\n\n<p>How can I solve it?</p>\n"}, {"tags": ["python", "recursion"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 10575899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf9e6c894bffb01c8cc77b132aa5f62a?s=128&d=identicon&r=PG&f=1", "display_name": "Ask Sejsbo", "link": "https://stackoverflow.com/users/10575899/ask-sejsbo"}, "edited": false, "score": 0, "creation_date": 1560377159, "post_id": 56570861, "comment_id": 99720769, "body": "hmm.. it still seems to return None-type"}, {"owner": {"reputation": 41, "user_id": 10575899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf9e6c894bffb01c8cc77b132aa5f62a?s=128&d=identicon&r=PG&f=1", "display_name": "Ask Sejsbo", "link": "https://stackoverflow.com/users/10575899/ask-sejsbo"}, "edited": false, "score": 0, "creation_date": 1560377646, "post_id": 56570861, "comment_id": 99720888, "body": "never mind :D im being stupid, i was using another method to acces the recursion which was void. lol"}], "tags": [], "owner": {"reputation": 2336, "user_id": 7389264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160900497f0373247800b2ad89798e32?s=128&d=identicon&r=PG&f=1", "display_name": "jirassimok", "link": "https://stackoverflow.com/users/7389264/jirassimok"}, "is_accepted": false, "score": 2, "last_activity_date": 1561040516, "last_edit_date": 1561040516, "creation_date": 1560376410, "answer_id": 56570861, "question_id": 56570840, "link": "https://stackoverflow.com/questions/56570840/python-recursive-function-not-returning-true-or-false/56570861#56570861", "title": "python: recursive function not returning true or false", "body": "<p>Your guess was correct; you just need to return the results of the recursive calls.</p>\n\n<pre><code>        return self.traverseSearch(ID, current.Child)\n</code></pre>\n\n<p>Don't worry; we all get lost on something that is obvious in hindsight at some point.</p>\n"}], "owner": {"reputation": 41, "user_id": 10575899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf9e6c894bffb01c8cc77b132aa5f62a?s=128&d=identicon&r=PG&f=1", "display_name": "Ask Sejsbo", "link": "https://stackoverflow.com/users/10575899/ask-sejsbo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 393, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1561040516, "creation_date": 1560376320, "last_edit_date": 1560377377, "question_id": 56570840, "link": "https://stackoverflow.com/questions/56570840/python-recursive-function-not-returning-true-or-false", "title": "python: recursive function not returning true or false", "body": "<p>I have implemented i unbalanced binary tree i python, and would now like to make a searching method for it that can return True and False.\nHowever, i have now made this recursive function, which works in terms of printing results, but it only returns 'None'. </p>\n\n<p>I'm guessing that this is because it is only the last recursive call that returns something, and the outer ones do not. </p>\n\n<p>How do i fix this? i feel that this should be fairly trivial, i bothers me that i am so lost.</p>\n\n<pre><code>def traverseSearch(self, ID, current):\n\n    if current == None: # if we have not found our goal, the current node is null\n        print(\"not found\")\n        return False\n\n    if current.ID == ID: # succes statement\n        print(\"found\")\n        return True\n    if ID &gt; current.ID: # call recursive on left children if data is bigger\n        self.traverseSearch(ID, current.rightChild)\n\n    if ID &lt; current.ID: # call recursive on Right children if data is bigger\n        self.traverseSearch(ID, current.leftChild)\n</code></pre>\n\n<p>it is now changed to the following, but still seems to return nonetype</p>\n\n<pre><code>def traverseSearch(self, ID, current):\n\n    if current == None: # if we have not found our goal, the current node is null\n        print(\"not found\")\n        return False\n\n    if current.ID == ID: # succes statement\n        print(\"found\")\n        return True\n    if ID &gt; current.ID: # call recursive on left children if data is bigger\n        self.traverseSearch(ID, current.rightChild)\n\n    if ID &lt; current.ID: # call recursive on Right children if data is bigger\n        self.traverseSearch(ID, current.leftChild)\n</code></pre>\n"}, {"tags": ["python", "uml", "document"], "answers": [{"tags": [], "owner": {"reputation": 2081, "user_id": 9724750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ab06fab3d1d9317889437631ef0ccce?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/9724750/neil"}, "is_accepted": true, "score": 3, "last_activity_date": 1560376852, "creation_date": 1560376852, "answer_id": 56570923, "question_id": 56570818, "link": "https://stackoverflow.com/questions/56570818/whats-the-proper-way-to-diagram-a-django-application-file-in-uml/56570923#56570923", "title": "What&#39;s the proper way to diagram a Django application file in UML?", "body": "<p>UML is a collection of many different diagram types and many of them can be applied to less 'object orientated' type code. See the second answer here: <a href=\"https://softwareengineering.stackexchange.com/questions/302811/what-are-functional-programmers-using-in-place-of-uml\">https://softwareengineering.stackexchange.com/questions/302811/what-are-functional-programmers-using-in-place-of-uml</a></p>\n\n<p>However, in truth, UML is mainly focused on Object Oriented software. If you want to use it in this sort of situation you can. But I doubt there's any sort of 'standard' for it. Just use the parts of UML that make sense for what you're modelling.</p>\n"}], "owner": {"reputation": 1693, "user_id": 906740, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c70b356f36fcf277427a8d0c92afa25?s=128&d=identicon&r=PG", "display_name": "Jon Mitten", "link": "https://stackoverflow.com/users/906740/jon-mitten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 56570923, "answer_count": 1, "score": 0, "last_activity_date": 1560376852, "creation_date": 1560376163, "question_id": 56570818, "link": "https://stackoverflow.com/questions/56570818/whats-the-proper-way-to-diagram-a-django-application-file-in-uml", "title": "What&#39;s the proper way to diagram a Django application file in UML?", "body": "<p>I have a python file, <code>rules.py</code>, that's a lot of functional utilities used through the application. Functions aren't contained within classes, and functions are called as needed from external files, classes and functions. </p>\n\n<p>I started creating a UML class diagram (in Lucidcharts) with an empty attribute block and filling in the methods block (lower half) with the functions. </p>\n\n<p>Is there a standardized non-class UML diagram standard that I should use or can use for documenting / diagramming long files full of functions? What is the standard I should use to document files full of functions?</p>\n"}, {"tags": ["python", "django"], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 1, "last_activity_date": 1560376376, "creation_date": 1560376376, "answer_id": 56570853, "question_id": 56570796, "link": "https://stackoverflow.com/questions/56570796/how-to-perform-a-nested-reverse-query-set-in-django/56570853#56570853", "title": "how to perform a nested reverse query set in django", "body": "<p>In that case, you usually query from the <code>Book</code> object itself, like:</p>\n\n<pre><code>Book.objects.filter(<b>vippricelist__book_client__vIPsellinvoice=current_vip_invoice</b>)</code></pre>\n\n<p>So here we query for <code>Book</code>s for which there exists a <code>VipPriceList</code> object which has a <code>book_client</code> field that refers to a <code>VipClient</code> that is related to the <code>current_vip_invoice</code>).</p>\n"}], "owner": {"reputation": 1972, "user_id": 9494140, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-RiQCuWECqiE/AAAAAAAAAAI/AAAAAAAAEsI/GLtd18UG8w8/photo.jpg?sz=128", "display_name": "Ahmed Wagdi", "link": "https://stackoverflow.com/users/9494140/ahmed-wagdi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 56570853, "answer_count": 1, "score": 1, "last_activity_date": 1560376376, "creation_date": 1560376029, "question_id": 56570796, "link": "https://stackoverflow.com/questions/56570796/how-to-perform-a-nested-reverse-query-set-in-django", "title": "how to perform a nested reverse query set in django", "body": "<p>I need to create double reverse <code>queryset</code> in Django, explained more in  the code:</p>\n\n<p><strong>The models</strong></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class Book(models.Model):\n    date = models.DateTimeField(auto_now=True)\n    book_name = models.CharField(max_length=150)\n    book_level = models.ForeignKey(Level, on_delete=CASCADE)\n    book_subject = models.ForeignKey(Subject, on_delete=CASCADE)\n    book_teacher = models.ForeignKey(Teacher, on_delete=CASCADE, null=True, blank=True)\n    book_comission = models.DecimalField(max_digits=19, decimal_places=5, null=True, blank=True)\n    book_black_papers = models.IntegerField()\n    book_color_papers = models.IntegerField()\n    book_paper_cost = models.DecimalField(max_digits=19, decimal_places=5)\n    book_ink_cost = models.DecimalField(max_digits=19, decimal_places=5)\n    book_color_ink_cost = models.DecimalField(max_digits=19, decimal_places=5)\n    book_cover_cost = models.DecimalField(max_digits=19, decimal_places=5)\n    supplier = models.ForeignKey(Supplier, on_delete=CASCADE, null=True, blank=True)\n    book_total_cost = models.DecimalField(max_digits=19, decimal_places=5)\n    book_sell_price = models.DecimalField(max_digits=19, decimal_places=5)\n    viewed_by = models.ManyToManyField(User)\n    is_double_pages = models.BooleanField(default=False)\n    is_hidden = models.BooleanField(default=False)\n    image1 = ProcessedImageField(upload_to='book_image',\n                                 processors=[ResizeToFill(440, 262)],\n                                 format='JPEG',\n                                 options={'quality': 60}, blank=True, null=True)\n    image2 = ProcessedImageField(upload_to='book_image',\n                                 processors=[ResizeToFill(440, 262)],\n                                 format='JPEG',\n                                 options={'quality': 60}, blank=True, null=True)\n    image3 = ProcessedImageField(upload_to='book_image',\n                                 processors=[ResizeToFill(440, 262)],\n                                 format='JPEG',\n                                 options={'quality': 60}, blank=True, null=True)\n    image4 = ProcessedImageField(upload_to='book_image',\n                                 processors=[ResizeToFill(440, 262)],\n                                 format='JPEG',\n                                 options={'quality': 60}, blank=True, null=True)\n    published_online = models.BooleanField(default=False)\n\n\nclass VIPSellInvoice(models.Model):\n    ordered = '\u062a\u062d\u062a \u0627\u0644\u062a\u0646\u0641\u064a\u0630'\n    delivered = '\u0645\u0646\u062a\u0647\u064a\u0629'\n    canceled = '\u0645\u0644\u063a\u0627\u0629'\n    invoice_choices = (\n        (ordered, '\u062a\u062d\u062a \u0627\u0644\u062a\u0646\u0641\u064a\u0630'),\n        (delivered, '\u0645\u0646\u062a\u0647\u064a\u0629'),\n        (canceled, '\u0645\u0644\u063a\u0627\u0629'),\n    )\n\n    date = models.DateTimeField(auto_now=True)\n    user = models.ForeignKey(User, on_delete=PROTECT)\n    client = models.ForeignKey(VipClient, on_delete=PROTECT)\n    total = models.DecimalField(max_digits=19, decimal_places=5, default=0)\n    status = models.CharField(max_length=160, choices=invoice_choices)\n    delivery = models.ForeignKey(Delivery, on_delete=PROTECT, null=True, blank=True)\n    delivery_price = models.DecimalField(max_digits=19, decimal_places=5, default=0, null=True, blank=True)\n    delivery_notes = models.CharField(max_length=500, null=True, blank=True)\n    is_done = models.BooleanField(default=False)\n\nclass VipPriceList(models.Model):\n    book_name = models.ForeignKey(Book, on_delete=CASCADE)\n    book_price = models.DecimalField(max_digits=19, decimal_places=5)\n    book_client = models.ForeignKey(VipClient, on_delete=CASCADE)\n    book_client_comission = models.DecimalField(max_digits=19, decimal_places=5)\n\n\nclass VipClient(models.Model):\n    client_name = models.CharField(max_length=150)\n    client_address = models.CharField(max_length=150)\n    client_phone1 = models.CharField(max_length=20)\n    client_phone2 = models.CharField(max_length=20)\n    client_note = models.CharField(max_length=500, null=True, blank=True)\n    client_balance = models.DecimalField(max_digits=19, decimal_places=5, default=0)\n    client_commission = models.DecimalField(max_digits=19, decimal_places=5, default=0)\n\n</code></pre>\n\n<p>Am trying to get the <code>VIPpricelists`` that belong to the</code>client<code>that belongs to the current</code>Vip Invoice<code>then get the</code>Book_set` in the final queryset so that I can deal with it.</p>\n\n<p>here is howw i tried to call it  in  my <strong>views</strong>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def vip_sellinvoice_add_books(request, pk):\n    current_vip_invoice = get_object_or_404(models.VIPSellInvoice, pk=pk)\n    test = current_vip_invoice.client.vippricelist_set.all().book_set.all()\n    context = {\n        'test': test,\n    }\n    return render(request, 'vip/vip_sell_invoice_add_books.html', context)\n</code></pre>\n\n<p>I get the error:</p>\n\n<p>'QuerySet' object has no attribute 'book_set'</p>\n\n<p>so, is it possible to create such a nested reverse querysets in Django or there is a simpler way to do it?</p>\n"}, {"tags": ["python", "html", "pyqt5", "editor", "qtextedit"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1560376920, "post_id": 56570794, "comment_id": 99720685, "body": "I did not understand your question, could you explain me better"}, {"owner": {"reputation": 99, "user_id": 7308476, "user_type": "registered", "profile_image": "https://graph.facebook.com/1261661520549401/picture?type=large", "display_name": "Scott Ulmer", "link": "https://stackoverflow.com/users/7308476/scott-ulmer"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1560377021, "post_id": 56570794, "comment_id": 99720720, "body": "Of course I can try. So you see in the 2nd object where the text is bold and also red? I want my input object the (the bottom box that has the &lt;b&gt; and other HTML tags in it) to look like the 2nd object. Instead of SHOWING &lt;b&gt; I just want the text to be bold for example. Does that make more sense?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1560377171, "post_id": 56570794, "comment_id": 99720771, "body": "That is, you want that there is only one view, and if that view is typed <code>&lt;b&gt;Bold&lt;&#47;b&gt;</code> in the same view it should show the word &quot;Bold&quot; in bold, am I right?"}, {"owner": {"reputation": 99, "user_id": 7308476, "user_type": "registered", "profile_image": "https://graph.facebook.com/1261661520549401/picture?type=large", "display_name": "Scott Ulmer", "link": "https://stackoverflow.com/users/7308476/scott-ulmer"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1560377340, "post_id": 56570794, "comment_id": 99720810, "body": "Correct that is what I want. Is that possible?"}], "owner": {"reputation": 99, "user_id": 7308476, "user_type": "registered", "profile_image": "https://graph.facebook.com/1261661520549401/picture?type=large", "display_name": "Scott Ulmer", "link": "https://stackoverflow.com/users/7308476/scott-ulmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 713, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1593550811, "creation_date": 1560376016, "last_edit_date": 1560376694, "question_id": 56570794, "link": "https://stackoverflow.com/questions/56570794/pyqt5-qtextedit-live-html-preview-while-editing", "title": "PyQt5 QTextEdit live HTML preview while editing", "body": "<p>I am trying to edit a QTextEdit named self.chatTextField to display the HTML preview in a live format. For example if I do \"\" I want it to not show the tag, but bold the text. I am able to have this work if I use textBrowswer as a previewer, but I would like it all to be in one widget.</p>\n\n<p><a href=\"https://i.stack.imgur.com/rQkAC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rQkAC.png\" alt=\"enter image description here\"></a></p>\n\n<p>As you can see in the image above, I want match the part the displays the HTML as final product and not the tags. Is this possible? </p>\n\n<p>I have tried various ways to convert .toPlainText() and then adding an HTML header and footer. I have tried to .insertHtml() and .setHtml(). I have tried to do tricks with open and close carrots, but nothing seems to be working. I am either getting it to simply remove all HTML (anything with carrots/tags) or it is causing recursion errors. </p>\n\n<p>This is the only section of code that is dealing with updating the HTML. If you need further code please let me know. I can provide UI file as well.</p>\n\n<pre><code>def printMaster(self):\n    global my_text\n\n    if self.chatTextField.toPlainText() != \"\":\n        oldText = self.chatTextField.toPlainText()\n        newText = self.textBrowser.toPlainText()\n        if oldText != newText and oldText != my_text:\n            self.textBrowser.setText(self.chatTextField.toPlainText())\n            my_text = self.chatTextField.toPlainText()\n            if my_text.endswith('&gt;'):\n                #my_text = self.chatTextField.toHtml()\n\n                # self.chatTextField.clear()\n                print(my_text)\n                # self.chatTextField.setHtml(my_text)\n                QCoreApplication.processEvents()\n\n\n\n            # cursor = self.chatTextField.textCursor()\n            # pos = cursor.selectionEnd()\n            #\n            # print(self.chatTextField.toHtml())\n            #\n            # my_text = self.chatTextField.toHtml()\n            #\n            # self.chatTextField.clear()\n            # # self.chatTextField.insertHtml(str(my_text))\n            #\n            # if my_text.endswith('&lt;'):\n            #     my_text = my_text + \"&lt;\"\n            #     self.chatTextField.setHtml(my_text)\n            #     print(True)\n            # else:\n            #     self.chatTextField.insertHtml(my_text)\n            #\n            #\n            # cursor.setPosition(pos)\n            #\n            # self.chatTextField.setTextCursor(cursor)\n            #\n            #\n            # QCoreApplication.processEvents()\n            #\n            # # self.chatTextField.show()\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pandas", "pandas-groupby"], "answers": [{"comments": [{"owner": {"reputation": 846, "user_id": 5001432, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/339eb215bfff2a8bd0c1ec6827a7e26f?s=128&d=identicon&r=PG&f=1", "display_name": "cadams", "link": "https://stackoverflow.com/users/5001432/cadams"}, "edited": false, "score": 0, "creation_date": 1560376665, "post_id": 56570875, "comment_id": 99720633, "body": "Well, that was quite easy. Thanks! Do you know if it&#39;s possible to query the result using  a datetime object? Or will I have to <code>.strftime()</code> it?"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 2, "last_activity_date": 1560439551, "last_edit_date": 1560439551, "creation_date": 1560376521, "answer_id": 56570875, "question_id": 56570767, "link": "https://stackoverflow.com/questions/56570767/use-result-of-pandas-groupby-to-query-date-from-columns-pandas-cut-date-range/56570875#56570875", "title": "Use result of pandas groupby to query date from column&#39;s pandas cut date range", "body": "<p>You can use <code>.loc</code> </p>\n\n<pre><code>s=df1.groupby(pd.cut(df1['date'], df2['bin_dates'])).agg({'value':np.nanmean})\ns.loc['2012-10-11 3:00:00']\nOut[94]: \nvalue    5.53283\nName: (2012-10-10 14:00:00, 2012-10-14 14:00:00], dtype: float64\n</code></pre>\n"}], "owner": {"reputation": 846, "user_id": 5001432, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/339eb215bfff2a8bd0c1ec6827a7e26f?s=128&d=identicon&r=PG&f=1", "display_name": "cadams", "link": "https://stackoverflow.com/users/5001432/cadams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 56570875, "answer_count": 1, "score": 1, "last_activity_date": 1560439551, "creation_date": 1560375857, "question_id": 56570767, "link": "https://stackoverflow.com/questions/56570767/use-result-of-pandas-groupby-to-query-date-from-columns-pandas-cut-date-range", "title": "Use result of pandas groupby to query date from column&#39;s pandas cut date range", "body": "<p>So I've got the result of a <code>pandas.groupby()</code> call, and I'm wanting to query the result in a mysql <code>select</code> style query. Here is a MWE of the code I'm trying to work from:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nfrom datetime import datetime as dt\n\ndates = np.array([dt(2012, 9, 27, 8, 52, 21),\n       dt(2012, 10, 6, 5, 4, 15),\n       dt(2012, 10, 7, 4, 53, 4),\n       dt(2012, 10, 9, 7, 21, 18),\n       dt(2012, 10, 10, 5, 4, 8),\n       dt(2012, 10, 11, 4, 58, 43),\n       dt(2012, 10, 12, 11, 15, 25),\n       dt(2012, 10, 13, 10, 45, 23),\n       dt(2012, 10, 20, 6, 0, 25),\n       dt(2012, 10, 22, 7, 41, 38)])\n\nvalues = np.array([5.61006523, 5.39632183, 5.49317193, 5.42327983, 5.4623386, \n                   5.42444747, 5.60362929, 5.57041331, 5.34893575, 5.48222005])\n\ndate_bins = np.array([dt(2012, 9, 29, 14),\n                      dt(2012, 10, 10, 14),\n                      dt(2012, 10, 14, 14),\n                      dt(2012, 10, 23, 14)])\n\ndf1 = pd.DataFrame({'date':dates, 'value': values})\ndf2 = pd.DataFrame({'bin_dates':date_bins})\n\nprint(df1.groupby(pd.cut(df1['date'], df2['bin_dates'])).agg({'value':np.nanmean}))\n</code></pre>\n\n<p>Yielding:</p>\n\n<pre><code>                                               value\ndate                                                \n(2012-09-29 14:00:00, 2012-10-10 14:00:00]  5.443778\n(2012-10-10 14:00:00, 2012-10-14 14:00:00]  5.532830\n(2012-10-14 14:00:00, 2012-10-23 14:00:00]  5.415578\n</code></pre>\n\n<p>What I am essentially doing is creating the data representation of a profile histogram with custom time binning. The question I have now is that I am trying to use the result of this to query new times (say <code>2012-10-11 3:00:00</code>) and be able to get back the mean value from that associated bin (<code>5.532830</code>). Can anyone advise me on how to do this? Is it possible within the pandas framework? Or do I need to move the data over to something like mysql?</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1560376940, "creation_date": 1560376940, "answer_id": 56570933, "question_id": 56570743, "link": "https://stackoverflow.com/questions/56570743/check-to-see-if-value-is-in-dataframe-series-the-truth-value-of-a-series-is-am/56570933#56570933", "title": "Check to see if value is in DataFrame series (&quot;The truth value of a Series is ambiguous&quot; error)", "body": "<p>a little list comprehension magic should work : </p>\n\n<pre><code>df['in_series (desired return column'] = ([df.id[i].astype(str) in df.id_list[i] \n                                          for i in range(len(df))])\n\n\n\n   print(df)\n        index   id  id_list in_series (desired return column)\n0   1   23  [1,2,34,56,75]  False\n1   2   14  [1,5,14,23,45]  True\n2   3   2   [1,2,4,25,37]   True\n3   4   14  [2,4,34,26,77]  False\n4   5   27  [1,6,19,27,50]  True\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "is_accepted": false, "score": 1, "last_activity_date": 1560378387, "creation_date": 1560378387, "answer_id": 56571131, "question_id": 56570743, "link": "https://stackoverflow.com/questions/56570743/check-to-see-if-value-is-in-dataframe-series-the-truth-value-of-a-series-is-am/56571131#56571131", "title": "Check to see if value is in DataFrame series (&quot;The truth value of a Series is ambiguous&quot; error)", "body": "<p>One of the few cases we can use <code>apply</code> to check presence of <code>id</code> in <code>id_list</code>:</p>\n\n<pre><code>df['in_series'] = df.apply(lambda x: str(x['id']) in ', '.join(str(y) for y in x['id_list']),axis=1)\n\n   id             id_list  in_series\n0  23  [1, 2, 34, 56, 75]      False\n1  14  [1, 5, 14, 23, 45]       True\n2   2   [1, 2, 4, 25, 37]       True\n3  14  [2, 4, 34, 26, 77]      False\n4  27  [1, 6, 19, 27, 50]       True\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1103, "user_id": 5502866, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg=k-s128", "display_name": "Kingindanord", "link": "https://stackoverflow.com/users/5502866/kingindanord"}, "is_accepted": false, "score": 1, "last_activity_date": 1560380294, "creation_date": 1560380294, "answer_id": 56571345, "question_id": 56570743, "link": "https://stackoverflow.com/questions/56570743/check-to-see-if-value-is-in-dataframe-series-the-truth-value-of-a-series-is-am/56571345#56571345", "title": "Check to see if value is in DataFrame series (&quot;The truth value of a Series is ambiguous&quot; error)", "body": "<p>you still can use a loop</p>\n\n<pre><code>id_list=[[1,2,34,56,75],[1,5,14,23,45],[1,2,4,25,37],[2,4,34,26,77],[1,6,19,27,50]]\nid=[23,14,2,14,27]\ndf=pd.DataFrame([id,id_list]).T\ndf.columns=[\"id\",\"id_list\"]\n\nboo=list()\nfor i in range(len(df)):\n    boo.append(df.iloc[i,0] in df.iloc[i,1])\n\ndf[\"in_series (desired return column]\"]=boo\n</code></pre>\n\n<p>in this case you don't change the type of your data</p>\n"}], "owner": {"reputation": 37, "user_id": 10931756, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oBKznnJSRQo/AAAAAAAAAAI/AAAAAAAAABo/AwsjMjRrzcQ/photo.jpg?sz=128", "display_name": "John Nann", "link": "https://stackoverflow.com/users/10931756/john-nann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1560380294, "creation_date": 1560375742, "question_id": 56570743, "link": "https://stackoverflow.com/questions/56570743/check-to-see-if-value-is-in-dataframe-series-the-truth-value-of-a-series-is-am", "title": "Check to see if value is in DataFrame series (&quot;The truth value of a Series is ambiguous&quot; error)", "body": "<p>I'm trying to check to see if the value in a DataFrame column is contained in a series in a separate column. I'm receiving the \"ValueError: The truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().\" </p>\n\n<p>I've researched this, but do not quite understand why I'm receiving this error in this specific instance. </p>\n\n<p>I've tried using both the .contains functions. </p>\n\n<p>A simplified version of the DataFrame structure is as follows:</p>\n\n<pre><code>df\n\nindex     id       id_list           in_series (desired return column]\n1         23       [1,2,34,56,75]    False\n2         14       [1,5,14,23,45]    True\n3         2        [1,2,4,25,37]     True\n4         14       [2,4,34,26,77]    False\n5         27       [1,6,19,27,50]    True\n\na = df['id']\nb = df['id_list]\ndf['in_series'] = b.str.contains(a, regex=False)\n</code></pre>\n\n<p>Is there a better way of going about this?</p>\n"}, {"tags": ["python", "python-3.x", "matplotlib", "matplotlib-basemap"], "answers": [{"tags": [], "owner": {"reputation": 44, "user_id": 1721430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75380fec657cdc95a8c213ceb88d5c32?s=128&d=identicon&r=PG", "display_name": "mcchran", "link": "https://stackoverflow.com/users/1721430/mcchran"}, "is_accepted": true, "score": 1, "last_activity_date": 1560376522, "creation_date": 1560376522, "answer_id": 56570877, "question_id": 56570734, "link": "https://stackoverflow.com/questions/56570734/code-is-not-finding-the-matplotlib-pyplot-module/56570877#56570877", "title": "Code is not finding the matplotlib.pyplot module", "body": "<p>Probably you have multiple python versions or you somehow are using a virtual environment (what is the \"(base)\" thing at the beginning of the prompt? ). Try checking the python version that you are using:</p>\n\n<pre><code>&gt; which python\n&gt; which python3\n</code></pre>\n\n<p>and next lookup if you have any virtual environment enabled.</p>\n"}], "owner": {"reputation": 83, "user_id": 11314605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e601c07c40f664043b1daea5cd7b548?s=128&d=identicon&r=PG&f=1", "display_name": "Anthony Crespo", "link": "https://stackoverflow.com/users/11314605/anthony-crespo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 247, "favorite_count": 0, "accepted_answer_id": 56570877, "answer_count": 1, "score": 0, "last_activity_date": 1560376522, "creation_date": 1560375698, "question_id": 56570734, "link": "https://stackoverflow.com/questions/56570734/code-is-not-finding-the-matplotlib-pyplot-module", "title": "Code is not finding the matplotlib.pyplot module", "body": "<p>Im trying to run a program to reproject satellite images. Im running the code on my command and the code is as follows:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nfrom mpl_toolkits.basemap import Basemap\nimport numpy as np # Import the Numpy package\nfrom remap import remap # Import the Remap function\nfrom cpt_convert import loadCPT # Import the CPT convert function\nfrom matplotlib.colors import LinearSegmentedColormap \nfrom netCDF4 import Dataset\n\n# Load the Data\n# Path to the GOES-16 image file\n\n#path = '/Volumes/Anthonys_backup/Masters_Thesis/Satellite_Data/new2/C13/OR_ABI-L2-CMIPF-M3C13_G16_s20180400500385_e20180400511163_c20180400511242.nc'\npath = '/home/alighezzolo/Casos/ANTHONY/OR_ABI-L2-CMIPF-M3C13_G16_s20180010000387_e20180010011165_c20180010011246.nc'\n\nnc = Dataset(path)\nH = nc.variables['goes_imager_projection'].perspective_point_height\n\n# Choose the visualization extent (min lon, min lat, max lon, max lat)\nextent = [-90.0, -40.0, -20.0, 10.0]\n\n# Choose the image resolution (the higher the number the faster the processing is)\nresolution = 1.0\n\n# Call the reprojection funcion\ngrid = remap(path, extent, resolution, 'HDF5')\n\n# Read the data returned by the function\ndata = grid.ReadAsArray()\n\n# Plot the Data \n# Create the basemap reference for the Rectangular Projection\nbmap = Basemap(resolution='h', llcrnrlon=extent[0], llcrnrlat=extent[1], urcrnrlon=extent[2], urcrnrlat=extent[3], epsg=4326)\n\n# Draw the countries and Argentinian states shapefiles\nbmap.readshapefile('/home/alighezzolo/BTCH13/SHAPES/008_limites_provinciales_LL','008_limites_provinciales_LL',linewidth=.5,color='black')\n#bmap.readshapefile('/Users/anthonycrespo/Desktop/Satelite/arg_adm1/ARG_adm1','ARG_adm1',linewidth=.5,color='black')\n#bmap.readshapefile('/Users/anthonycrespo/Desktop/Satelite/Countries_Shape/ne_10m_admin_0_countries','ne_10m_admin_0_countries',linewidth=.7,color='black')\n\n# Draw parallels and meridians\nbmap.drawcoastlines(linewidth=1., linestyle='solid', color='black')\nbmap.drawparallels(np.arange(-90.0, 90.0, 10.0), linewidth=0.25, color='white', labels=[True,False,False,True])\nbmap.drawmeridians(np.arange(-180.0, 180.0, 10.0), linewidth=0.25, color='white', labels=[True,False,False,True])\n\n# Converts a CPT file to be used in Python\n#cpt = loadCPT('/Users/anthonycrespo/Desktop/Satelite/IR4AVHRR6.cpt')\ncpt = loadCPT('/home/alighezzolo/BTCH13/CPT/IR4AVHRR6.cpt')\n# Makes a linear interpolation\ncpt_convert = LinearSegmentedColormap('cpt', cpt)\n\n# Plot the GOES-16 channel with the converted CPT colors\nbmap.imshow(data, origin='upper', cmap=cpt_convert, vmin=170, vmax=378)\n\n# Date and time\nimport datetime\n\ntime_var = nc.time_coverage_start\niyear = time_var[0:4]\nimonth = time_var[5:7]\n\nimport calendar\n\ncmonth = calendar.month_abbr[int(imonth)]\niday = time_var[8:10]\nitime = time_var[11:19]\nitimehr = time_var[11:13]\nitimemn = time_var[14:16]\n\nctime_string = iyear +' '+cmonth+' '+iday+'  '+itime+' GMT'\nctime_file_string = iyear + imonth + iday + itimehr + itimemn\n\nfilestring = \"C13_\" + iyear + imonth + iday + \"_\" + itimehr + itimemn + \".jpg\"\nfilestring = \"C13_\" + iyear + imonth + iday + \"_\" + itimehr + itimemn + \".png\"\ntime_string = 'GOES-16 ABI Band 13\\n\"Clean\" LW IR Window\\n%s '%ctime_string\n\n\n# Add a title to the plot\nplt.title('GOES-16 Band 13\\n\"Clean\" LW IR Window\\n%s '%ctime_string)\n\n# Insert the legend at the bottom\nbmap.colorbar(location='right', label='Brightness Temperature [K]')\n\n# Show the plot\n#plt.show()\nDPI = 150\nplt.savefig(filestring, dpi=DPI, bbox_inches='tight', pad_inches=0)\n</code></pre>\n\n<p>But is returning the following error:</p>\n\n<pre><code>(base) Anthonys-MacBook-Pro:New_code_for_plotting anthonycrespo$ python Reprojection.py\nTraceback (most recent call last):\n  File \"Reprojection.py\", line 4, in &lt;module&gt;\n    import matplotlib.pyplot as plt # Import the Matplotlib package\nModuleNotFoundError: No module named 'matplotlib.pyplot'\n</code></pre>\n\n<p>I already doubled checked \"conda list\" and it has the latest matplotlib version, i tried \"pip install matplotlib\" and the system is telling me that I have the latest version. </p>\n\n<p>The environment Im running the code is:</p>\n\n<pre><code>Mac OS Mojave 10.14.5\nPython 3.7.3 (default, Mar 27 2019, 16:54:48) \n[Clang 4.0.1 (tags/RELEASE_401/final)] :: Anaconda, Inc. on darwin\n</code></pre>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["python", "dictionary", "indexing"], "answers": [{"comments": [{"owner": {"reputation": 842, "user_id": 6631196, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FrpVamcXlKg/AAAAAAAAAAI/AAAAAAAAAAA/JgmRFocK8CY/photo.jpg?sz=128", "display_name": "Ilia Gilmijarow", "link": "https://stackoverflow.com/users/6631196/ilia-gilmijarow"}, "edited": false, "score": 1, "creation_date": 1560378130, "post_id": 56570699, "comment_id": 99720999, "body": "Great answer. And you can have a custom sort when you extract data or iterate over your dict. Look up additional parameters for <code>sorted()</code> function"}, {"owner": {"reputation": 174, "user_id": 11529866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f33f5926b08212db27d7583b7a2c3726?s=128&d=identicon&r=PG&f=1", "display_name": "totalMongot", "link": "https://stackoverflow.com/users/11529866/totalmongot"}, "edited": false, "score": 0, "creation_date": 1560452269, "post_id": 56570699, "comment_id": 99751863, "body": "Thanks that is exactly the  method I needed"}], "tags": [], "owner": {"reputation": 1113, "user_id": 7588528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c324db55440fa76ec00cbcff6ae019ae?s=128&d=identicon&r=PG&f=1", "display_name": "DSC", "link": "https://stackoverflow.com/users/7588528/dsc"}, "is_accepted": true, "score": 0, "last_activity_date": 1560378297, "last_edit_date": 1560378297, "creation_date": 1560375502, "answer_id": 56570699, "question_id": 56570667, "link": "https://stackoverflow.com/questions/56570667/hash-a-set-of-three-indexes-in-a-key-for-dictionary/56570699#56570699", "title": "Hash a set of three indexes in a key for dictionary?", "body": "<blockquote>\n  <p>Only immutable elements can be used as dictionary keys</p>\n</blockquote>\n\n<p>This mean you can't use a list (mutable data type) but you can use a tuple as the key of your dictionary: <code>dict_name[(i, j, k)] = data</code></p>\n"}], "owner": {"reputation": 174, "user_id": 11529866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f33f5926b08212db27d7583b7a2c3726?s=128&d=identicon&r=PG&f=1", "display_name": "totalMongot", "link": "https://stackoverflow.com/users/11529866/totalmongot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 56570699, "answer_count": 1, "score": 0, "last_activity_date": 1570867957, "creation_date": 1560375240, "last_edit_date": 1570867957, "question_id": 56570667, "link": "https://stackoverflow.com/questions/56570667/hash-a-set-of-three-indexes-in-a-key-for-dictionary", "title": "Hash a set of three indexes in a key for dictionary?", "body": "<p>I have a matrix of data with three indexes: i, j and k</p>\n\n<p>I want to enter some of the data in this matrix into a dictionary, and be able to find them afterwards in the dictionary.</p>\n\n<p>The data itself can not be the key for the dict.</p>\n\n<p>I would like the i,j,k set of indexes to be the key.</p>\n\n<p>I think I need to \"hash\" (some sort of hash) in one number from which I can get back the i,j,k. I need the result key to be ordered so that:</p>\n\n<ul>\n<li>key1 for 1,2,3 is greater than</li>\n<li>key2 for 2,1,3 is greater than</li>\n<li>key3 for 2,3,1</li>\n</ul>\n\n<p>Do you know any algorithms to get the keys from this set of indexes? Or is there a better structure in python to do what I want to do?</p>\n\n<p>I can't know before I store the data how much I will get, so I think I cannot just append the data with its indexes.</p>\n"}, {"tags": ["python", "c++"], "answers": [{"tags": [], "owner": {"reputation": 6260, "user_id": 10933809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IR53l.jpg?s=128&g=1", "display_name": "Oblivion", "link": "https://stackoverflow.com/users/10933809/oblivion"}, "is_accepted": false, "score": 2, "last_activity_date": 1560375223, "creation_date": 1560375223, "answer_id": 56570662, "question_id": 56570622, "link": "https://stackoverflow.com/questions/56570622/is-it-possible-to-access-c-headers-libraries-and-run-a-c-script-within-a-pyt/56570662#56570662", "title": "Is it possible to access C++ headers/libraries and run a C++ script within a python console?", "body": "<p>Check out <a href=\"https://www.boost.org/doc/libs/1_49_0/libs/python/doc/\" rel=\"nofollow noreferrer\">boost.python</a>\nHere is an intro:</p>\n\n<blockquote>\n  <p>The Boost Python Library is a framework for interfacing Python and\n  C++. It allows you to quickly and seamlessly expose C++ classes\n  functions and objects to Python, and vice-versa, using no special\n  tools -- just your C++ compiler. It is designed to wrap C++ interfaces\n  non-intrusively, so that you should not have to change the C++ code at\n  all in order to wrap it, making Boost.Python ideal for exposing\n  3rd-party libraries to Python. The library's use of advanced\n  metaprogramming techniques simplifies its syntax for users, so that\n  wrapping code takes on the look of a kind of declarative interface\n  definition language (IDL).</p>\n</blockquote>\n\n<p>It includes support for:</p>\n\n<ul>\n<li><p>References and Pointers</p>\n\n<p>Globally Registered Type Coercions</p>\n\n<p>Automatic Cross-Module Type Conversions</p>\n\n<p>Efficient Function Overloading</p>\n\n<p>C++ to Python Exception Translation</p>\n\n<p>Default Arguments</p>\n\n<p>Keyword Arguments</p>\n\n<p>Manipulating Python objects in C++</p>\n\n<p>Exporting C++ Iterators as Python Iterators</p>\n\n<p>Documentation Strings\nand many more.</p></li>\n</ul>\n"}], "owner": {"reputation": 55, "user_id": 11627529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8347e32e99a05c79d20520dd2ef1ff4b?s=128&d=identicon&r=PG&f=1", "display_name": "prpowers", "link": "https://stackoverflow.com/users/11627529/prpowers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1560375223, "creation_date": 1560375004, "question_id": 56570622, "link": "https://stackoverflow.com/questions/56570622/is-it-possible-to-access-c-headers-libraries-and-run-a-c-script-within-a-pyt", "title": "Is it possible to access C++ headers/libraries and run a C++ script within a python console?", "body": "<p>I need to access data via USB from a beam profiler. I've tried using the USB module in python to access it, but unfortunately the company who makes this device \"does not support development in Python\". The project I am working on is to eventually create a GUI (via Python) to automate a motor and pull data from the device. So it has to be done in Python, or I'm going to have to scrap the first half of the code and redo it in C++.</p>\n\n<p>I think the reason the device can only interface with C/C++ is because of the header and library files that come with the driver download.</p>\n\n<p>I've looked at Cython but am still very unsure how it can help me. I'm just trying to access the header files for the driver in python and somehow execute the C commands in python.</p>\n\n<p>BTW I am using Anaconda (if that matters).</p>\n\n<p>Thank-you for any clarification and help!</p>\n"}, {"tags": ["python", "python-3.x", "yaml", "pyyaml"], "comments": [{"owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "edited": false, "score": 0, "creation_date": 1560525208, "post_id": 56570617, "comment_id": 99777821, "body": "Please make a minimal code example that reproduces your issue, and make sure your post is formatted correctly."}], "answers": [{"comments": [{"owner": {"reputation": 50, "user_id": 4403812, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/35bc969d37e7025e69acc572f8abd28e?s=128&d=identicon&r=PG", "display_name": "jwg88", "link": "https://stackoverflow.com/users/4403812/jwg88"}, "edited": false, "score": 0, "creation_date": 1560516819, "post_id": 56573217, "comment_id": 99773141, "body": "Thank you.. It works but not exactly what I am looking for.. Updated my above post to show the new output."}, {"owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "reply_to_user": {"reputation": 50, "user_id": 4403812, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/35bc969d37e7025e69acc572f8abd28e?s=128&d=identicon&r=PG", "display_name": "jwg88", "link": "https://stackoverflow.com/users/4403812/jwg88"}, "edited": false, "score": 0, "creation_date": 1560525142, "post_id": 56573217, "comment_id": 99777781, "body": "&quot;above&quot; functions only as a preposition or an adverb, neither of which can take the determiner &quot;my&quot;. The same holds for &quot;below&quot; and the definite article &quot;the&quot;. So please use  &quot;my post above&quot; resp. &quot;the suggestion below&quot;."}, {"owner": {"reputation": 50, "user_id": 4403812, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/35bc969d37e7025e69acc572f8abd28e?s=128&d=identicon&r=PG", "display_name": "jwg88", "link": "https://stackoverflow.com/users/4403812/jwg88"}, "edited": false, "score": 0, "creation_date": 1560533717, "post_id": 56573217, "comment_id": 99781698, "body": "That did what i was looking for!  Thank you for the assistance."}], "tags": [], "owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "is_accepted": true, "score": 1, "last_activity_date": 1560529440, "last_edit_date": 1560529440, "creation_date": 1560398571, "answer_id": 56573217, "question_id": 56570617, "link": "https://stackoverflow.com/questions/56570617/how-to-sort-through-a-yaml-file-and-provide-values-for-each-tree/56573217#56573217", "title": "How to sort through a yaml file and provide values for each tree", "body": "<p>I am not 100% sure, but I don't think a function call within an f-string is evaluated, so try and do:</p>\n\n<pre><code>    print(\"KEY: {} - VALUE: {}\".format(key, value[0].items()))\n</code></pre>\n\n<p>instead.</p>\n\n<p>Additionally the value for the <code>key</code> config is a sequence (i.e. loaded as a Python list) that has only <strong>one</strong> element, so you cannot index further in that sequence then <code>0</code>. </p>\n\n<p>You'd better try and do something like:</p>\n\n<pre><code>for key, values in dataMap.items():\n    for idx, value in enumerate(values):\n        print(\"KEY: {} - VALUE[{}]: {}\".format(key, idx, value.items()))\n        print(\"====\")\n</code></pre>\n"}], "owner": {"reputation": 50, "user_id": 4403812, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/35bc969d37e7025e69acc572f8abd28e?s=128&d=identicon&r=PG", "display_name": "jwg88", "link": "https://stackoverflow.com/users/4403812/jwg88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 56573217, "answer_count": 1, "score": 0, "last_activity_date": 1560529440, "creation_date": 1560374984, "last_edit_date": 1560525940, "question_id": 56570617, "link": "https://stackoverflow.com/questions/56570617/how-to-sort-through-a-yaml-file-and-provide-values-for-each-tree", "title": "How to sort through a yaml file and provide values for each tree", "body": "<p>I am working on a script to read through a YAML config and am having some problems with the logic with the for loops and dictionary. I can get it to print each value when done static, but this throws off the purpose of my script.  As I would like to dynamically call functions using the YAML config file.</p>\n\n<p>So far I can only get the first key and value from my for script.  Anytime I try to go further by using dataMap[key][0][value] I cannot go further then 1.  </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import yaml\n\nwith open('design.yaml') as f:\n    dataMap = yaml.safe_load(f)\nprint(\"================================\")\nprint(\"Topo #1\")\nprint(\"================================\")\nprint(f\"Topo Name: {dataMap['topology'][0]['name']}\")\nprint(f\"vPort: {dataMap['topology'][0]['vport']}\")\nprint(f\"DG Name: {dataMap['topology'][1]['devicegroup']}\")\nprint(f\"Multiplier: {dataMap['topology'][1]['multiplier']}\")\nprint(f\"Eth Name: {dataMap['topology'][1]['eth']['name']}\")\nprint(\"Auto Output - To look just like above\")\nprint(\"================================\")\nfor key, value in dataMap.items():\n    #Updated\n    print(\"KEY: {} - VALUE: {}\".format(key, value[0].items()))\n    print(\"====\")\nprint(\"================================\")\n#print(\"Recursive Function Test\")\n#print(\"================================\")\n#myprint(dataMap)\n</code></pre>\n\n<pre><code>config:\n -name: Test\ntopology:\n - name: DC1\n   vport: Port1\n - devicegroup: DC1 DG1\n   multiplier: 50\n   eth:\n     name: ETH1\n     macStart: 00:01:01:01:00:01\n     macStep: 00:00:00:00:00:01\n     enableVLAN: True\n     vlanID: 100\n     vlanStep: 0\n   ipv4:\n     name: DC1 DG1 IPv4\n     startIP: 10.1.1.10\n     stepIP: 0.0.0.1\n     netmask: 255.255.255.0\n     gateway: 10.1.1.1\n     gwStep: 0.0.0.0\n - name: TEST2\n   vport: Port2\n - devicegroup: TEST DG2\n</code></pre>\n\n<pre><code>Output:\nKEY: config - VALUE: dict_items([('apiServer', '10.255.251.105'), ('apiServerPort', 443), ('osPlatform', 'linux'), ('username', 'admin'), ('password', 'admin'), ('chassisIP', '10.253.0.82'), ('licenseserver', '10.253.0.82'), ('licensemode', 'subscription'), ('licensetier', 'tier3'), ('POCName', 'XXXXX'), ('POCNumber', 'XXXXX')])\n====\nKEY: topology - VALUE: dict_items([('name', 'DC1'), ('vport', 'Port1')])\n</code></pre>\n\n<p>My problem is now, how do I pull in the devicegroup information from the YAML file?  Changing value[0] to value[1] causes an index issue.</p>\n\n<pre><code>print(\"KEY: {} - VALUE: {}\".format(key, value[1].items()))\nIndexError: list index out of range\n</code></pre>\n\n<p>So how do I step further into the YAML file with this?</p>\n"}, {"tags": ["python", "html", "django", "recaptcha"], "comments": [{"owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "edited": false, "score": 0, "creation_date": 1560376300, "post_id": 56570603, "comment_id": 99720542, "body": "How are you checking that the recaptcha is valid in the view/form?"}], "answers": [{"tags": [], "owner": {"reputation": 618, "user_id": 1137508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SFqIu.png?s=128&g=1", "display_name": "CJ Nimes", "link": "https://stackoverflow.com/users/1137508/cj-nimes"}, "is_accepted": false, "score": 0, "last_activity_date": 1560376771, "last_edit_date": 1560376771, "creation_date": 1560376388, "answer_id": 56570856, "question_id": 56570603, "link": "https://stackoverflow.com/questions/56570603/recaptcha-not-stopping-users-logging-in/56570856#56570856", "title": "reCAPTCHA not stopping users logging in", "body": "<p>When you use the captcha, a textarea is added dynamically inside <code>&lt;div class=\"g-recaptcha\"&gt;</code>.\nThat textarea is not visible and by default has <code>id=\"g-recaptcha-response\"</code>.</p>\n\n<p>You can get it with:</p>\n\n<pre><code>document.getElementById('g-recaptcha-response').value\n</code></pre>\n\n<p>In your login form you have to check if that textarea has a value or not. If it has a value then user has used successfully the captcha and can continue with the login process.</p>\n\n<p>Something like this:</p>\n\n<pre><code>&lt;form onsubmit=\"return check_form()\"&gt;\n...\n&lt;/form&gt;\n\n&lt;script&gt;\nfunction check_form()\n{\n   return document.getElementById('g-recaptcha-response').value != '';\n}\n&lt;/script&gt;\n</code></pre>\n\n<p>If <code>check_form()</code> returns FALSE, then the form is not submitted.</p>\n"}], "owner": {"reputation": 330, "user_id": 7355857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c88203da4ee7e6f4f9458a0795c63b?s=128&d=identicon&r=PG&f=1", "display_name": "Max Loyd", "link": "https://stackoverflow.com/users/7355857/max-loyd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560376771, "creation_date": 1560374898, "question_id": 56570603, "link": "https://stackoverflow.com/questions/56570603/recaptcha-not-stopping-users-logging-in", "title": "reCAPTCHA not stopping users logging in", "body": "<p>I am trying to use Google reCAPTCHA for my login form to prevent spam. After following the necessary steps to get it all working, users can still login. They can fill out there details and login with out ticking the checkbox which isn't correct.</p>\n\n<p>I think it might be the placement in the DOM so I tried moving it around and that didn't work.</p>\n\n<p>CODE:</p>\n\n<pre><code>{% extends 'public/base.html' %}\n{% load staticfiles %}\n{% load crispy_forms_tags %}\n\n{% block head %}\n    &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"{% static \"public/css/auth.css\" %}\" /&gt;\n{% endblock %}\n\n{% block content %}\n    &lt;div class=\"container mt-5 mb-5 login-container\"&gt;\n        &lt;form method=\"POST\"&gt;\n            {% csrf_token %}\n            &lt;fieldset class=\"form-group mt-4\"&gt;\n                &lt;legend class=\"border-bottom mb-4\"&gt;Log In&lt;/legend&gt;\n                {{ form|crispy }}\n                &lt;script src=\"https://www.google.com/recaptcha/api.js\" async defer&gt;&lt;/script&gt;\n                &lt;div class=\"g-recaptcha\" data-sitekey=\"################################\n                \"&gt;&lt;/div&gt;\n            &lt;/fieldset&gt;\n            &lt;div class=\"form-group\"&gt;\n                &lt;button class=\"btn btn-success\" type=\"submit\"&gt;Login&lt;/button&gt;\n                &lt;small class=\"text-muted ml-2\"&gt;\n                    &lt;a href=\"{% url 'password_reset' %}\"&gt;Forgot Password?&lt;/a&gt;\n                &lt;/small&gt;\n            &lt;/div&gt;\n        &lt;/form&gt;\n        &lt;div class=\"border-top pt-3 mb-4\"&gt;\n            &lt;small class=\"text-muted\"&gt;\n                Need An Account? &lt;a class=\"ml-2\" href=\"{% url 'register' %}\"&gt;Sign Up Now&lt;/a&gt;\n            &lt;/small&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n{% endblock %}```\n\nThanks.\n\n</code></pre>\n"}, {"tags": ["python", "visual-studio", "pip", "python-requests", "intellisense"], "comments": [{"owner": {"reputation": 17879, "user_id": 10910450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9aPLn.jpg?s=128&g=1", "display_name": "Lance Li-MSFT", "link": "https://stackoverflow.com/users/10910450/lance-li-msft"}, "edited": false, "score": 0, "creation_date": 1561513465, "post_id": 56570598, "comment_id": 100084786, "body": "Hi friend, any update for this issue? Feel free to let me know if the issue still exists :)"}, {"owner": {"reputation": 152, "user_id": 5133239, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A9DKa.jpg?s=128&g=1", "display_name": "Isaiah Baker", "link": "https://stackoverflow.com/users/5133239/isaiah-baker"}, "reply_to_user": {"reputation": 17879, "user_id": 10910450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9aPLn.jpg?s=128&g=1", "display_name": "Lance Li-MSFT", "link": "https://stackoverflow.com/users/10910450/lance-li-msft"}, "edited": false, "score": 0, "creation_date": 1561579668, "post_id": 56570598, "comment_id": 100115334, "body": "@LanceLi-MSFT it started working for me all the sudden, not sure what I did/didn&#39;t do. Thanks for the help regardless! I&#39;ll keep the question up in case your solution helps someone else with the same problem."}, {"owner": {"reputation": 17879, "user_id": 10910450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9aPLn.jpg?s=128&g=1", "display_name": "Lance Li-MSFT", "link": "https://stackoverflow.com/users/10910450/lance-li-msft"}, "edited": false, "score": 0, "creation_date": 1561599086, "post_id": 56570598, "comment_id": 100120254, "body": "Thanks for your reply. Maybe your situation is something like the issue2 in my answer. Sometimes when you install a <b>new</b> package, the intellisense won&#39;t work immediately in <b>current</b> project. But if you <code>reload the project, or create a new project, or restart the VS</code>, the intellisense will always work for this package cause after a reload(VS restart will reload the project automatically). And this issue will only occur one time when you install the package for the first time, if you install a new package which you haven&#39;t installed, you would find this issue."}], "answers": [{"tags": [], "owner": {"reputation": 17879, "user_id": 10910450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9aPLn.jpg?s=128&g=1", "display_name": "Lance Li-MSFT", "link": "https://stackoverflow.com/users/10910450/lance-li-msft"}, "is_accepted": true, "score": 3, "last_activity_date": 1561357208, "creation_date": 1561357208, "answer_id": 56730802, "question_id": 56570598, "link": "https://stackoverflow.com/questions/56570598/unable-to-resolve-requests-intellisense-may-be-missing-for-this-module-visua/56730802#56730802", "title": "Unable to resolve &#39;requests&#39;. IntelliSense may be missing for this module. Visual Studio/Python", "body": "<p>1.Maybe it's something similar to <a href=\"https://github.com/Microsoft/PTVS/issues/2596\" rel=\"nofollow noreferrer\">this issue</a>. Deleting the <em>init</em>.py in top-level of your project can help resolve this issue.</p>\n\n<p>2.If the above not helps, please try <strong>reloading the project</strong>. </p>\n\n<p>After my test, sometimes in a python application, after the first time we install a python package, the <strong>intellisense</strong> for the new package in <strong>current project</strong> won't work until we <strong>reload the project file</strong> to recognize the new package.</p>\n\n<p>For this situation, the easy workaround is: <code>Right-click the project</code> in <code>Solution Explorer</code>=>choose <code>unload the project</code>=>Right-click it again and <code>choose reload the project</code>. Then the intellisense for the new package would work well.</p>\n\n<p>Hope it helps and sorry for the delay!</p>\n"}], "owner": {"reputation": 152, "user_id": 5133239, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A9DKa.jpg?s=128&g=1", "display_name": "Isaiah Baker", "link": "https://stackoverflow.com/users/5133239/isaiah-baker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1824, "favorite_count": 0, "accepted_answer_id": 56730802, "answer_count": 1, "score": 3, "last_activity_date": 1561357208, "creation_date": 1560374873, "last_edit_date": 1560707089, "question_id": 56570598, "link": "https://stackoverflow.com/questions/56570598/unable-to-resolve-requests-intellisense-may-be-missing-for-this-module-visua", "title": "Unable to resolve &#39;requests&#39;. IntelliSense may be missing for this module. Visual Studio/Python", "body": "<p>Using Visual Studio with Python. I'm getting this warning when importing requests.</p>\n\n<h2><a href=\"https://i.stack.imgur.com/NNmtN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NNmtN.png\" alt=\"enter image description here\"></a></h2>\n\n<pre><code>Unable to resolve 'requests'. IntelliSense may be missing for this module.\n</code></pre>\n\n<p>In the Python Environments tab, you can see that I have requests installed down in my packages.</p>\n\n<h2><a href=\"https://i.stack.imgur.com/QJK5E.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QJK5E.png\" alt=\"enter image description here\"></a></h2>\n\n<p>I'd like to have IntelliSense while working with 'requests'. Is there something I may have overlooked?</p>\n"}, {"tags": ["python", "pyqt", "pyqt5", "qscrollarea", "qsizepolicy"], "answers": [{"comments": [{"owner": {"reputation": 351, "user_id": 2905124, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Q5HZk.jpg?s=128&g=1", "display_name": "Punchki", "link": "https://stackoverflow.com/users/2905124/punchki"}, "edited": false, "score": 0, "creation_date": 1560436901, "post_id": 56570782, "comment_id": 99744005, "body": "Thanks so much!  This worked great :)  Is there any reason why I didn&#39;t have to use the setLayout() method to set the layout for the whole window?  Is it inferred?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 351, "user_id": 2905124, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Q5HZk.jpg?s=128&g=1", "display_name": "Punchki", "link": "https://stackoverflow.com/users/2905124/punchki"}, "edited": false, "score": 0, "creation_date": 1560450521, "post_id": 56570782, "comment_id": 99751056, "body": "@Punchki No, <code>lay = FooLayout()</code> <code>w.setLayout(lay)</code> is equivalent to <code>lay = FooLayout(w)</code>, so for reasons of personal taste I like to have few lines of code"}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 2, "last_activity_date": 1560375938, "creation_date": 1560375938, "answer_id": 56570782, "question_id": 56570567, "link": "https://stackoverflow.com/questions/56570567/looking-to-fix-size-policy-and-how-scrollarea-shows-in-a-tab/56570782#56570782", "title": "Looking to fix size policy and how scrollArea shows in a tab", "body": "<p>The problem has nothing to do with the QSizePolicy, they are not really necessary. The problem is that you are not using layouts. I think that using the following instruction:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>self.tab1.layout = QVBoxLayout()\nself.tab2.layout = QVBoxLayout()\n</code></pre>\n\n<p>add a layout to each tab, but it is only pointing out that there is a new property called layout that takes the value of the QVBoxLayout and that deletes the reference to the layout method of the tab, ie it only deletes the access to the tab1.layout() method, and doing it is a bad practice.</p>\n\n<p>Considering the above I have used the following code:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># ...\nclass LayoutWidgets(QWidget):\n    def __init__(self, parent=None):\n        super(QWidget, self).__init__(parent)\n\n        layout = QVBoxLayout(self)\n        self.thisthat = 0\n\n        self.tabs = QTabWidget()\n        layout.addWidget(self.tabs)\n\n        self.tab1 = QWidget()\n        self.tab2 = QWidget()\n\n        self.tabs.addTab(self.tab1, \"Serial CANFD Interface\")\n        self.tabs.addTab(self.tab2, \"Data Visualizer\")\n\n        lay = QVBoxLayout(self.tab1)\n        self.scrollArea = QScrollArea(widgetResizable=True)\n        self.scrollArea.setStyleSheet(\"background-color:'#d3f3c8'\")\n        lay.addWidget(self.scrollArea)\n\n        layout_SArea = QVBoxLayout(self.scrollArea)\n        self.qtextbig = QPlainTextEdit(readOnly=False)\n        layout_SArea.addWidget(self.qtextbig)\n\n    def add_row(self, row):\n        self.this = str(row)\n        self.this2 = str(datetime.datetime.now().time())\n        self.thisthat = self.thisthat + 1\n        self.qtextbig.appendPlainText(self.this)\n        self.qtextbig.appendPlainText(self.this2)\n        self.qtextbig.appendPlainText(str(self.thisthat))\n# ...\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/H20L3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/H20L3.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 351, "user_id": 2905124, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Q5HZk.jpg?s=128&g=1", "display_name": "Punchki", "link": "https://stackoverflow.com/users/2905124/punchki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 1, "accepted_answer_id": 56570782, "answer_count": 1, "score": 1, "last_activity_date": 1560376029, "creation_date": 1560374714, "last_edit_date": 1560376029, "question_id": 56570567, "link": "https://stackoverflow.com/questions/56570567/looking-to-fix-size-policy-and-how-scrollarea-shows-in-a-tab", "title": "Looking to fix size policy and how scrollArea shows in a tab", "body": "<p>so I am trying to use PyQt5 to put a scroll area inside of a tab.  Just playing around with a system that reads the serial port.</p>\n\n<p>The issue I am having is that although I set a QVBoxLayout, the size does not seem to adjust to what I want it to be.  It seems to be taking its minimum size and not adjusting.</p>\n\n<p>I tried looking at the documentation on QSizePolicy on the website provided, but unfortunately it is all labeled as TODO.</p>\n\n<p><a href=\"https://www.riverbankcomputing.com/static/Docs/PyQt5/api/qtwidgets/qsizepolicy.html\" rel=\"nofollow noreferrer\">https://www.riverbankcomputing.com/static/Docs/PyQt5/api/qtwidgets/qsizepolicy.html</a></p>\n\n<p>I was wondering if anyone had some experience with this?</p>\n\n<pre><code>import sys\nfrom PyQt5.QtWidgets import QMainWindow, QSizePolicy, QLabel, QGridLayout, QToolTip, QPlainTextEdit, QScrollArea, QApplication, QPushButton, QWidget, QAction, QTabWidget, QHBoxLayout, QVBoxLayout\nfrom PyQt5.QtGui import *\nfrom PyQt5.QtCore import pyqtSlot, QDateTime, Qt, pyqtSignal, QObject, QSize\nimport datetime\nimport serial\nimport serial.tools.list_ports\n\nimport threading\n\n\nclass FDSerial(QMainWindow):\n\n    def __init__(self):\n\n        super().__init__()\n\n        self.initUI()\n\n    def initUI(self):\n\n        self.connected = False\n        self.fd_line = \"\"\n\n        newAct = QAction(QIcon('icn/001-file.png'), 'New', self)\n        newAct.triggered.connect(self.init_sc)\n\n        self.toolbar = self.addToolBar('New')\n        self.toolbar.addAction(newAct)\n\n        openAct = QAction(QIcon('icn/002-folder.png'), 'Open', self)\n        self.toolbar.addAction(openAct)\n\n        connectAct = QAction(QIcon('icn/003-pendrive.png'), 'Connect', self)\n        connectAct.triggered.connect(self.find_port)\n        self.toolbar.addAction(connectAct)\n\n        menubar = self.menuBar()\n        fileMenu = menubar.addMenu('&amp;File')\n        editMenu = menubar.addMenu('&amp;Settings')\n        toolsMenu = menubar.addMenu('&amp;Tools')\n        sessionMenu = menubar.addMenu('&amp;Session')\n        helpMenu = menubar.addMenu('&amp;Help')\n\n        self.statusBar().showMessage('Ready')\n\n        self.table_widget = LayoutWidgets(self)\n        self.setCentralWidget(self.table_widget)\n\n        self.setGeometry(400, 400, 800, 600)\n        self.setWindowTitle('FD Serial Demo')\n        self.show()\n\n        self.c = Communicate()\n        self.c.serialStuff.connect(lambda: self.table_widget.add_row(self.fd_line))\n\n    def init_sc(self):\n        self.ser = serial.Serial()\n        self.ser.baudrate = 115200\n        self.is_connected = False\n        self.tests_run = 0\n        self.port_found = False\n\n    def find_port(self):\n        if self.is_connected is False:\n            self.is_connected = True\n        else:\n            self.is_connected = False\n        for port in serial.tools.list_ports.comports():\n            if port.vid == 5824 and port.pid == 1155:\n                self.ser.port = str(port.device)\n                self.port_found = True\n                print(\"Found\")\n        if self.port_found is False:\n            print(\"Not found\")\n        x = threading.Thread(target=self.talk_module)\n        x.start()\n\n    def talk_module(self):\n        self.ser.open()\n        while self.is_connected is True:\n            self.fd_line = self.ser.readline().decode()\n            print(self.fd_line)\n            self.c.serialStuff.emit()\n        self.ser.close()\n\n\nclass Communicate(QObject):\n\n    serialStuff = pyqtSignal()\n\n\nclass LayoutWidgets(QWidget):\n\n    def __init__(self, parent):\n        super(QWidget, self).__init__(parent)\n\n        self.layout = QVBoxLayout(self)\n        self.thisthat = 0\n\n        self.mySizePolicy = QSizePolicy()\n        self.mySizePolicy.setHorizontalStretch(1)\n        self.mySizePolicy.setVerticalStretch(1)\n        # self.mySizePolicy.setHeightForWidth(False)\n        # self.mySizePolicy.setHorizontalPolicy(QSizePolicy.Maximum)\n        # self.mySizePolicy.setVerticalPolicy(QSizePolicy.Maximum)\n\n        self.tabs = QTabWidget()\n        self.tab1 = QWidget()\n        self.tab2 = QWidget()\n\n        self.tabs.addTab(self.tab1, \"Serial CANFD Interface\")\n        self.tabs.addTab(self.tab2, \"Data Visualizer\")\n        self.tab1.layout = QVBoxLayout()\n        self.tab2.layout = QVBoxLayout()\n\n        self.scrollArea = QScrollArea(self.tab1)\n\n        self.scrollArea.setWidgetResizable(True)\n\n        # self.widget = QWidget()\n        # self.scrollArea.setWidget(self.widget)\n\n        self.layout_SArea = QVBoxLayout(self.scrollArea)\n        self.layout_SArea.setSpacing(0)\n\n        self.tab1.layout.addWidget(self.scrollArea)\n\n        self.scrollArea.setSizePolicy(self.mySizePolicy)\n        self.scrollArea.setStyleSheet(\"background-color:'#d3f3c8'\")\n\n        self.layout.addWidget(self.tabs)\n\n        self.setLayout(self.layout)\n\n        self.qtextbig = QPlainTextEdit()\n\n        self.qtextbig.setSizePolicy(self.mySizePolicy)\n\n        self.qtextbig.setReadOnly(False)\n        self.layout_SArea.addWidget(self.qtextbig)\n\n    def add_row(self, row):\n        self.this = str(row)\n        self.this2 = str(datetime.datetime.now().time())\n        self.thisthat = self.thisthat + 1\n        self.qtextbig.appendPlainText(self.this)\n        self.qtextbig.appendPlainText(self.this2)\n        self.qtextbig.appendPlainText(str(self.thisthat))\n\n\nif __name__ == '__main__':\n\n    app = QApplication(sys.argv)\n\n    ex = FDSerial()\n\n    sys.exit(app.exec_())\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/mzCxI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mzCxI.png\" alt=\"Here is how the GUI looks right now.  The scroll are is way too small!  It is in green.\"></a></p>\n\n<p>Here is how the GUI looks right now.  The scroll are is way too small!  It is in green.</p>\n\n<p>I am looking for the scroll area to take the whole tab size, and then adjust as I adjust the window size.  Would appreciate any pointers.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "python-multiprocessing", "python-multithreading"], "comments": [{"owner": {"reputation": 1290, "user_id": 4180176, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1022787394506806/picture?type=large", "display_name": "Joshua Nixon", "link": "https://stackoverflow.com/users/4180176/joshua-nixon"}, "edited": false, "score": 0, "creation_date": 1560374974, "post_id": 56570564, "comment_id": 99720134, "body": "if the workload is completely independent and the tasks don&#39;t return any input then I think it&#39;s down to preference"}, {"owner": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "edited": false, "score": 0, "creation_date": 1560375046, "post_id": 56570564, "comment_id": 99720151, "body": "What if I move (or just change name) the <code>task.py</code> script? (not to mention Windows dependency) At the moment you won&#39;t even know that it doesn&#39;t work. What if I run your code on system that has <code>sys.executable</code> as <code>None</code>?"}, {"owner": {"reputation": 5416, "user_id": 360826, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/7CZNr.png?s=128&g=1", "display_name": "jason m", "link": "https://stackoverflow.com/users/360826/jason-m"}, "reply_to_user": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "edited": false, "score": 0, "creation_date": 1560375714, "post_id": 56570564, "comment_id": 99720377, "body": "@freakish - I appreciate the input, but the question is more about thread-leakage and potentially issues that are lower-level."}, {"owner": {"reputation": 1290, "user_id": 4180176, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1022787394506806/picture?type=large", "display_name": "Joshua Nixon", "link": "https://stackoverflow.com/users/4180176/joshua-nixon"}, "edited": false, "score": 0, "creation_date": 1560375899, "post_id": 56570564, "comment_id": 99720437, "body": "I think we could answer better if we knew what the task is."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1560376703, "post_id": 56570564, "comment_id": 99720644, "body": "Using <code>subprocess</code> (or <code>multiprocessing</code>) is going to launch that many separate processes each running their own instance of the Python interpreter to execute <code>task.py</code> all at once \u2014 which is a pretty heavy load to put on the OS and may actually slow things down overall. Multithreading wouldn&#39;t do that, so might be preferable, but will still use up a lot of system resources. I suggest you use a <code>concurrent.futures.Executor</code> which can do either (multithreading or multiprocessing), but more importantly, makes it easy to limit the number of them than can run concurrently."}, {"owner": {"reputation": 5416, "user_id": 360826, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/7CZNr.png?s=128&g=1", "display_name": "jason m", "link": "https://stackoverflow.com/users/360826/jason-m"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1560467742, "post_id": 56570564, "comment_id": 99756787, "body": "@martineau Yes I think this the most reasonable answer. Without doing more testing, it is obviously a function of memory and cores."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1560469101, "post_id": 56570564, "comment_id": 99757056, "body": "jason: It&#39;s also easy to configure the maximum number of &quot;workers&quot; (aka <code>max_workers</code>) when using a <code>concurrent.futures.Executor</code> subclass like <code>ThreadPoolExecutor</code> or <code>ProcessPoolExecutor</code> \u2014 making it relatively easy to limit how many resources they&#39;ll consume cpu and memory-wise  at runtime based on what&#39;s available on the system they&#39;re being run on."}], "owner": {"reputation": 5416, "user_id": 360826, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/7CZNr.png?s=128&g=1", "display_name": "jason m", "link": "https://stackoverflow.com/users/360826/jason-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560376064, "creation_date": 1560374700, "last_edit_date": 1560376064, "question_id": 56570564, "link": "https://stackoverflow.com/questions/56570564/how-to-implement-lazy-multiprocessing", "title": "How to implement &quot;lazy&quot; multiprocessing?", "body": "<p>Let's say I have some <code>task.py</code> that takes 5 minutes to run.</p>\n\n<p>I need to run <code>task.py</code> with 1,000 different inputs. Each run of <code>task.py</code> is completely independent and low memory. I don't care that they all finish at the same time, just that they finish.</p>\n\n<p>I know I could use <a href=\"https://docs.python.org/2/library/multiprocessing.html\" rel=\"nofollow noreferrer\">multi-processing</a> or <a href=\"https://stackoverflow.com/questions/2846653/how-to-use-threading-in-python\">multithreading</a>, but is there any <strong>good</strong> reason to not do the folloiwng:</p>\n\n<pre><code>import subprocess\nimport sys\nimport numpy as np\n\nfor arg in np.arange(0, 1.01, .1):  \n    print(contrib)\n    pid = subprocess.Popen(\n        [sys.executable, \"C:/task.py\", \"--arg\", str(arg)])\n</code></pre>\n"}, {"tags": ["python", "python-asyncio", "aiohttp"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1560374768, "post_id": 56570552, "comment_id": 99720080, "body": "What? You&#39;re getting rate-limited, so you want to keep hitting the API with more requests?"}, {"owner": {"reputation": 1, "user_id": 3623016, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001136890439/picture?type=large", "display_name": "user3623016", "link": "https://stackoverflow.com/users/3623016/user3623016"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1560379340, "post_id": 56570552, "comment_id": 99721288, "body": "In fact, after receiving the 429 I would sleep a certain amount of time and try again, if it returns 429 again then i would wait a little more and do it again to check if it is already 200 status code"}], "owner": {"reputation": 1, "user_id": 3623016, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001136890439/picture?type=large", "display_name": "user3623016", "link": "https://stackoverflow.com/users/3623016/user3623016"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 344, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560393377, "creation_date": 1560374643, "last_edit_date": 1560393377, "question_id": 56570552, "link": "https://stackoverflow.com/questions/56570552/how-to-make-async-api-requests-in-python-properly", "title": "How to make Async Api Requests in Python, properly?", "body": "<p>I am not an expert in python so I am having trouble trying to make async api requests, it's throwing \"RuntimeError: Event loop is closed\".</p>\n\n<p>I make lots of requests to an API and sometimes it returns status code 429 (too many requests), so what I want is when it happens I want to keep trying the request until it returns status code 200 and continue the process. </p>\n\n<pre><code>import requests\nimport asyncio\nimport aiohttp\n\nCONCURRENCY = 3\nTIMEOUT = 40000\n\nasync def fetch(session, sem, obj):\n    async with sem:\n        async with session.get(obj['url'], headers={}, params={}) as resp:\n            #print(await response.json())\n\n            if resp.status == 429: # too many consecutive requests\n                print('Too many requests. Waiting some seconds to continue...')\n                await sleep(5)\n\n                while True:\n                    r = await requests.get(obj['url'], auth=('xxxxx',''))\n                    if r.status != 429:\n                        break\n                    await sleep(6)\n\n                return await r\n\n\nasync def call_api(list_obj):\n    try:\n        sem = asyncio.Semaphore(CONCURRENCY)\n        async with aiohttp.ClientSession(\n            auth=aiohttp.BasicAuth(login='xxxxx', password='')) as session:\n                responses = await asyncio.gather(*(\n                    asyncio.wait_for(fetch(session, sem, i), TIMEOUT)\n                    for i in list_obj\n        ))\n\n        return responses\n    except :\n        logger.critical('API request problem: ' + traceback.format_exc())\n\n\n\nloop = asyncio.get_event_loop()\nfuture = asyncio.ensure_future(call_api(array))\ndata = loop.run_until_complete(future)\nloop.close()\n</code></pre>\n\n<p>It throws \"RuntimeError: Event loop is closed\".</p>\n"}, {"tags": ["python", "arrays", "rotation"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1560374761, "post_id": 56570545, "comment_id": 99720079, "body": "<code>arr = b</code> will not set the <code>a</code> variable, since <code>arr</code> is a local variable, that is a reference. Note that Python does <i>not</i> perform a <i>call-by-reference</i>, but a <i>call-by-value</i>."}, {"owner": {"reputation": 3, "user_id": 11639191, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-g0ZHARn_xy0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfS2ptF4PRjscWP94dfeyai6hHDXA/mo/photo.jpg?sz=128", "display_name": "Lelouch Brittania", "link": "https://stackoverflow.com/users/11639191/lelouch-brittania"}, "edited": false, "score": 0, "creation_date": 1560374940, "post_id": 56570545, "comment_id": 99720123, "body": "Expected output is [9,1,3,4,5,5,7,8]"}], "answers": [{"tags": [], "owner": {"reputation": 855, "user_id": 1209380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7785507ef757e5f6cbacec52a606971e?s=128&d=identicon&r=PG", "display_name": "Heinrich Hartmann", "link": "https://stackoverflow.com/users/1209380/heinrich-hartmann"}, "is_accepted": true, "score": 1, "last_activity_date": 1560374829, "creation_date": 1560374829, "answer_id": 56570592, "question_id": 56570545, "link": "https://stackoverflow.com/questions/56570545/can-someone-see-whats-wrong-with-my-code-array-rotations/56570592#56570592", "title": "Can someone see what&#39;s wrong with my code (ARRAY rotations)?", "body": "<p>Well, one issue is here:</p>\n\n<blockquote>\n  <p>arr = b</p>\n</blockquote>\n\n<p>You are assigning to a local variable here. That will have no effect.\nReplace that with <code>return b</code>\nAnd use like so: </p>\n\n<pre><code>print('array after rotation: ', rotate(a,n))\n</code></pre>\n\n<p>Possibly more issues, but this is the first thing that hits the eye.</p>\n"}, {"tags": [], "owner": {"reputation": 1113, "user_id": 7588528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c324db55440fa76ec00cbcff6ae019ae?s=128&d=identicon&r=PG&f=1", "display_name": "DSC", "link": "https://stackoverflow.com/users/7588528/dsc"}, "is_accepted": false, "score": 1, "last_activity_date": 1560375045, "creation_date": 1560375045, "answer_id": 56570632, "question_id": 56570545, "link": "https://stackoverflow.com/questions/56570545/can-someone-see-whats-wrong-with-my-code-array-rotations/56570632#56570632", "title": "Can someone see what&#39;s wrong with my code (ARRAY rotations)?", "body": "<pre><code>def rotate(arr, n):\n    return arr[n:] + arr[:n]\n</code></pre>\n\n<p>To get <code>[9, 1, 3, 4, 5, 5, 7, 8]</code> from <code>a = [1, 3, 4, 5, 5, 7, 8, 9]</code>, </p>\n\n<p>you need to do <code>rotate(a, len(a) - 1)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 0, "last_activity_date": 1560375147, "creation_date": 1560375147, "answer_id": 56570651, "question_id": 56570545, "link": "https://stackoverflow.com/questions/56570545/can-someone-see-whats-wrong-with-my-code-array-rotations/56570651#56570651", "title": "Can someone see what&#39;s wrong with my code (ARRAY rotations)?", "body": "<p>The line:</p>\n\n<pre><code>def rotate(arr, n):\n    # ...\n    <b>arr = b</b></code></pre>\n\n<p>does not do much. <code>arr</code> is a local variable, so setting it to a different value has no effect on the variable with which you called that. Python does not perform <em>call-by-reference</em>, it does <em>call-by-value</em>. If the object is mutable, you can change the state of that object, but you can not change the reference of the variable pointing to that object (or at least not without some tricks).</p>\n\n<p>The most elegant way to solve this is probably to <em>return</em> the new object, and set it at the caller level:</p>\n\n<pre><code>def rotate(arr, n):\n    return arr[n:] + arr[:n]\n</code></pre>\n\n<p>and make a call like:</p>\n\n<pre><code>arr = rotate(arr, len(n)-1)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11639191, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-g0ZHARn_xy0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfS2ptF4PRjscWP94dfeyai6hHDXA/mo/photo.jpg?sz=128", "display_name": "Lelouch Brittania", "link": "https://stackoverflow.com/users/11639191/lelouch-brittania"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 56570592, "answer_count": 3, "score": 0, "last_activity_date": 1560379951, "creation_date": 1560374598, "last_edit_date": 1560379951, "question_id": 56570545, "link": "https://stackoverflow.com/questions/56570545/can-someone-see-whats-wrong-with-my-code-array-rotations", "title": "Can someone see what&#39;s wrong with my code (ARRAY rotations)?", "body": "<p>I'm sure the mistake is in the rotate function but I can't find what it is.\ncode is in python3</p>\n\n<pre><code>def rotate(arr, n):\n    x = arr[n - 1]\n    b = list()\n    b.append(x)\n    for i in range(0,len(arr) - 1):\n        b.append(arr[i]);\n\n    arr = b\n\na = [1,3,4,5,5,7,8,9]\n\n\nprint('array before is: ',a)\nn=len(a)\nrotate(a, n)\n\n\n\n\nprint('array after rotation: ',a)\n</code></pre>\n\n<p>Edit: I just want to know whats wrong with the existing code. Please don't give an alternate solution.</p>\n"}, {"tags": ["python", "python-3.x", "time"], "comments": [{"owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "edited": false, "score": 0, "creation_date": 1560374321, "post_id": 56570474, "comment_id": 99719953, "body": "You need to fix the indenting if you want anyone to understand what you&#39;re trying to do."}, {"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 1, "creation_date": 1560374392, "post_id": 56570474, "comment_id": 99719976, "body": "The indentation of your example code is all over the place. Can you elaborate a bit more about what you mean by &quot;without delaying the complete program&quot;? Are you wanting your counter (it it counting up or down?) to run in a separate thread? Does the rest of the program have a main loop that your counter code could be called from?"}, {"owner": {"reputation": 984, "user_id": 8121719, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XIPYf.jpg?s=128&g=1", "display_name": "0xPrateek", "link": "https://stackoverflow.com/users/8121719/0xprateek"}, "edited": false, "score": 0, "creation_date": 1560374432, "post_id": 56570474, "comment_id": 99719990, "body": "question is unclear. Try adding sample output :\\"}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1560374823, "post_id": 56570474, "comment_id": 99720088, "body": "It sounds simple, but one way is to redesign around multiple threads, one of which can be dedicated to generating these &quot;timer&quot; events."}], "answers": [{"tags": [], "owner": {"reputation": 17500, "user_id": 3113477, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/TWIEk.jpg?s=128&g=1", "display_name": "A.J. Uppal", "link": "https://stackoverflow.com/users/3113477/a-j-uppal"}, "is_accepted": false, "score": 2, "last_activity_date": 1560374490, "creation_date": 1560374490, "answer_id": 56570526, "question_id": 56570474, "link": "https://stackoverflow.com/questions/56570474/python-call-a-function-every-x-minutes/56570526#56570526", "title": "Python call a function every x minutes", "body": "<p>Use something like this:</p>\n\n<pre><code>wait = 10\nstartTime = time.time()\nwhile wait &gt; 0:\n    if time.time()-startTime &gt;= 1:\n        startTime = time.time()\n        print(wait)\n        wait-=1\n    #do other things\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 386, "user_id": 11563863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R7zKe.png?s=128&g=1", "display_name": "surftijmen", "link": "https://stackoverflow.com/users/11563863/surftijmen"}, "edited": false, "score": 0, "creation_date": 1560375143, "post_id": 56570627, "comment_id": 99720180, "body": "no it doesn&#39;t because there is no time delay, so it all counts in 0.0001 second...  try it yourself"}, {"owner": {"reputation": 36, "user_id": 8717975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2ba99fc08267164a888f5d131324164?s=128&d=identicon&r=PG", "display_name": "Snuggle", "link": "https://stackoverflow.com/users/8717975/snuggle"}, "reply_to_user": {"reputation": 386, "user_id": 11563863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R7zKe.png?s=128&g=1", "display_name": "surftijmen", "link": "https://stackoverflow.com/users/11563863/surftijmen"}, "edited": false, "score": 0, "creation_date": 1560375414, "post_id": 56570627, "comment_id": 99720278, "body": "Ah, you&#39;re looking for a countdown every second that goes 10, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0 and repeats?  I&#39;ve updated my answer for you! c:"}, {"owner": {"reputation": 386, "user_id": 11563863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R7zKe.png?s=128&g=1", "display_name": "surftijmen", "link": "https://stackoverflow.com/users/11563863/surftijmen"}, "edited": false, "score": 0, "creation_date": 1560375594, "post_id": 56570627, "comment_id": 99720333, "body": "@ Snuggle That doesn&#39;t work either..."}, {"owner": {"reputation": 36, "user_id": 8717975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2ba99fc08267164a888f5d131324164?s=128&d=identicon&r=PG", "display_name": "Snuggle", "link": "https://stackoverflow.com/users/8717975/snuggle"}, "reply_to_user": {"reputation": 386, "user_id": 11563863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R7zKe.png?s=128&g=1", "display_name": "surftijmen", "link": "https://stackoverflow.com/users/11563863/surftijmen"}, "edited": false, "score": 0, "creation_date": 1560375984, "post_id": 56570627, "comment_id": 99720454, "body": "@TijmenMeijer Could I please ask for more clarification? How does it not work? What would you like the code to do that it&#39;s not currently doing? \ud83d\udc95"}, {"owner": {"reputation": 386, "user_id": 11563863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R7zKe.png?s=128&g=1", "display_name": "surftijmen", "link": "https://stackoverflow.com/users/11563863/surftijmen"}, "edited": false, "score": 0, "creation_date": 1560376095, "post_id": 56570627, "comment_id": 99720486, "body": "@ Snuggle I want my while loop to keep running without any time delays, but during this loop, I want to set a timer which doesn&#39;t involve my regular loop. Hope you can help me."}, {"owner": {"reputation": 36, "user_id": 8717975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2ba99fc08267164a888f5d131324164?s=128&d=identicon&r=PG", "display_name": "Snuggle", "link": "https://stackoverflow.com/users/8717975/snuggle"}, "reply_to_user": {"reputation": 386, "user_id": 11563863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R7zKe.png?s=128&g=1", "display_name": "surftijmen", "link": "https://stackoverflow.com/users/11563863/surftijmen"}, "edited": false, "score": 0, "creation_date": 1560378618, "post_id": 56570627, "comment_id": 99721126, "body": "@TijmenMeijer Oh, I see! This makes sense! I have updated my answer. :)"}], "tags": [], "owner": {"reputation": 36, "user_id": 8717975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2ba99fc08267164a888f5d131324164?s=128&d=identicon&r=PG", "display_name": "Snuggle", "link": "https://stackoverflow.com/users/8717975/snuggle"}, "is_accepted": true, "score": 2, "last_activity_date": 1560379489, "last_edit_date": 1560379489, "creation_date": 1560375023, "answer_id": 56570627, "question_id": 56570474, "link": "https://stackoverflow.com/questions/56570474/python-call-a-function-every-x-minutes/56570627#56570627", "title": "Python call a function every x minutes", "body": "<p>I can't be 100% sure what you're trying to ask since your sample code currently has incorrect indentation.</p>\n\n<p>I am assuming you mean something like this:</p>\n\n<pre><code>import time\nwait = 10\nfor i in range(wait):\n    wait -= 1\n    time.sleep(1)\n    print(wait)\n</code></pre>\n\n<p>If you simply remove the time.sleep(1), the delay will no-longer occur while counting down. This should work:</p>\n\n<pre><code>wait = 10\nfor i in range(wait):\n    wait -= 1\n    print(wait)\n</code></pre>\n\n<p><strong>[Edit]</strong>\nAh, thank you so much for the clarification! I believe this is what you're looking for: </p>\n\n<pre><code>import time\nwhile True: # Here is your while loop!\n    wait = 10 # Change this to 900 (seconds) to get 15 minutes.\n    for i in range(wait+1):\n        print(wait)\n        wait -= 1\n        time.sleep(1) # Delay for one second.\n\n    print(\"Send email here!\")\n</code></pre>\n\n<p><strong>[Double-edit]</strong>\nOh, you would like to have sending emails not block the main section of your program! What @kenny-ostrom said would be correct here, then, you'd like to use threading in some way. Here's an example of sending an email every 15 minutes or 900 seconds. This happens in the background and whatever the while loop is doing is <strong>NOT</strong> blocked or delayed. This should be what you're looking for. c:</p>\n\n<pre><code>import threading, time\ndef send_my_email():\n    while True:\n        time.sleep(3) # Every 15 minutes is 900.\n        print(\"Send email now saying: {}\".format(email_content))\n\nthread = threading.Thread(target=send_my_email)\nthread.start()\n# Make a background thread and use the function: send_my_email\n\nwhile True:\n    # Do anything here. No delays will happen.\n    for number in range(10, 0, -1):\n        print(number)\n        email_content = number*3 # You can modify email content here.\n        time.sleep(1)\n</code></pre>\n"}], "owner": {"reputation": 386, "user_id": 11563863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R7zKe.png?s=128&g=1", "display_name": "surftijmen", "link": "https://stackoverflow.com/users/11563863/surftijmen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "closed_date": 1560458863, "accepted_answer_id": 56570627, "answer_count": 2, "score": -3, "last_activity_date": 1607930113, "creation_date": 1560374237, "last_edit_date": 1607930113, "question_id": 56570474, "link": "https://stackoverflow.com/questions/56570474/python-call-a-function-every-x-minutes", "closed_reason": "Needs details or clarity", "title": "Python call a function every x minutes", "body": "<p>How to create a timer in python which calls a function every 15 minutes?\nI tried using the time import but I don't know how to use that, or should I use <code>Threadings</code>?</p>\n"}, {"tags": ["python", "pandas", "dataframe", "pandas-groupby"], "comments": [{"owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 0, "creation_date": 1560375914, "post_id": 56570453, "comment_id": 99720440, "body": "can you show your intended result for the above ?"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 6316052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc588ec2a0e923f25959183f7d7d2218?s=128&d=identicon&r=PG&f=1", "display_name": "Roger Luo", "link": "https://stackoverflow.com/users/6316052/roger-luo"}, "edited": false, "score": 0, "creation_date": 1560433451, "post_id": 56570956, "comment_id": 99741673, "body": "Wow thank you for the help! This is exactly what I was looking for, may I ask what the reset_index() is achieving here? Also, if I was to insert the result back into the original dataframe to replace the records that were used for the calculation, would I do a join or is there an easier way? I think I would have to somehow retain column B for me to join the records back, since now there&#39;s no information from column B to indicate what date period these records belong to now. Thank you so much!!"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 19, "user_id": 6316052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc588ec2a0e923f25959183f7d7d2218?s=128&d=identicon&r=PG&f=1", "display_name": "Roger Luo", "link": "https://stackoverflow.com/users/6316052/roger-luo"}, "edited": false, "score": 0, "creation_date": 1560434151, "post_id": 56570956, "comment_id": 99742142, "body": "<code>reset_index</code> causes the group dataframe to get a range(4) index instead of the original row indices. This is required to allow the operation with <code>df[iloc[:-4]</code> (ie the 4 first rows of df) because Series must have same index."}, {"owner": {"reputation": 19, "user_id": 6316052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc588ec2a0e923f25959183f7d7d2218?s=128&d=identicon&r=PG&f=1", "display_name": "Roger Luo", "link": "https://stackoverflow.com/users/6316052/roger-luo"}, "edited": false, "score": 0, "creation_date": 1560434848, "post_id": 56570956, "comment_id": 99742650, "body": "That make sense! Any idea how I might be able to try and bring the result back into the original dataframe, and replace the numerator rows used for the calculation?"}, {"owner": {"reputation": 19, "user_id": 6316052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc588ec2a0e923f25959183f7d7d2218?s=128&d=identicon&r=PG&f=1", "display_name": "Roger Luo", "link": "https://stackoverflow.com/users/6316052/roger-luo"}, "edited": false, "score": 0, "creation_date": 1560439640, "post_id": 56570956, "comment_id": 99745797, "body": "wow that looks super complicated but awesome at the same time, totally ready to try it and digest all of it! But what is actual? It&#39;s returning unassigned for me, since I don&#39;t see anywhere that the variable actual gets an assignment."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 19, "user_id": 6316052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc588ec2a0e923f25959183f7d7d2218?s=128&d=identicon&r=PG&f=1", "display_name": "Roger Luo", "link": "https://stackoverflow.com/users/6316052/roger-luo"}, "edited": false, "score": 0, "creation_date": 1560442209, "post_id": 56570956, "comment_id": 99747190, "body": "@RogerLuo: My bad. I forgot to write it in the answer. Post edited"}, {"owner": {"reputation": 19, "user_id": 6316052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc588ec2a0e923f25959183f7d7d2218?s=128&d=identicon&r=PG&f=1", "display_name": "Roger Luo", "link": "https://stackoverflow.com/users/6316052/roger-luo"}, "edited": false, "score": 0, "creation_date": 1560448326, "post_id": 56570956, "comment_id": 99750039, "body": "Dang dude you are awesome, thank you! That&#39;s what I was looking for, have a good day!"}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": true, "score": 0, "last_activity_date": 1560442454, "last_edit_date": 1560442454, "creation_date": 1560377137, "answer_id": 56570956, "question_id": 56570453, "link": "https://stackoverflow.com/questions/56570453/how-to-utilize-groupby-perform-calculation-on-only-certain-rows-and-keep-all-co/56570956#56570956", "title": "How to utilize groupby, perform calculation on only certain rows and keep all column", "body": "<p>You were not that far.</p>\n\n<pre><code>df[df.A != 'ACTUAL'].groupby('A').apply(lambda x: pd.DataFrame(\n                                 (x.iloc[:4].reset_index()['C']/df.iloc[:4]['C'] - 1) * 100))\n</code></pre>\n\n<p>gives:</p>\n\n<pre><code>                  C\nA                  \nTDA_D5  0  1.561400\n        1  1.272354\n        2  1.100867\n        3  0.896263\nTDA_U5  0  1.561400\n        1  1.890936\n        2  2.541661\n        3  3.310748\nTD_BASE 0  1.561400\n        1  1.587185\n        2  1.817297\n        3  2.068107\n</code></pre>\n\n<p>Or it you prefere to have the labels from column A as columns:</p>\n\n<pre><code>df[df.A != 'ACTUAL'].groupby('A').apply(lambda x: (x.iloc[:4].reset_index()['C']\n                                                   /df.iloc[:4]['C'] - 1) * 100).T\n</code></pre>\n\n<p>which gives:</p>\n\n<pre><code>A    TDA_D5    TDA_U5   TD_BASE\nC                              \n0  1.561400  1.561400  1.561400\n1  1.272354  1.890936  1.587185\n2  1.100867  2.541661  1.817297\n3  0.896263  3.310748  2.068107\n</code></pre>\n\n<hr>\n\n<p>If you want to bring that back into the original dataframe, it is slightly more complex because you will have to keep the original indices. You can do:</p>\n\n<pre><code>actual = df[df.A == 'ACTUAL']\n\nout = df[df.A != 'ACTUAL'].groupby('A').apply(\n    lambda x: x.iloc[:len(actual)].assign(\n        resul=((x.iloc[:len(actual)].reset_index()['C']/\n                actual.reset_index()['C'] -1)*100).values)).reset_index(\n                    level=0, drop=True)\n</code></pre>\n\n<p>It gives:</p>\n\n<pre><code>          A           B           C         D     resul\n5    TDA_D5  2019-03-01  253.393661  0.038667  1.561400\n6    TDA_D5  2019-06-01  254.329314  0.038229  1.272354\n7    TDA_D5  2019-09-01  254.784295  0.038974  1.100867\n8    TDA_D5  2019-12-01  254.988064  0.040149  0.896263\n9    TDA_D5  2020-03-01  255.158740  0.041696  0.397697\n19   TDA_U5  2019-03-01  253.393661  0.038667  1.561400\n20   TDA_U5  2019-06-01  255.882782  0.036118  1.890936\n21   TDA_U5  2019-09-01  258.415239  0.034246  2.541661\n22   TDA_U5  2019-12-01  261.090022  0.032766  3.310748\n23   TDA_U5  2020-03-01  264.033754  0.031713  3.889763\n33  TD_BASE  2019-03-01  253.393661  0.038667  1.561400\n34  TD_BASE  2019-06-01  255.119961  0.037143  1.587185\n35  TD_BASE  2019-09-01  256.589769  0.036490  1.817297\n36  TD_BASE  2019-12-01  257.949582  0.036184  2.068107\n37  TD_BASE  2020-03-01  259.351461  0.036187  2.047414\n</code></pre>\n\n<p>And you can now put that back into the original dataframe thanks to the index:</p>\n\n<pre><code>df.loc[out.index, 'resul'] = out['resul']\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 6316052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc588ec2a0e923f25959183f7d7d2218?s=128&d=identicon&r=PG&f=1", "display_name": "Roger Luo", "link": "https://stackoverflow.com/users/6316052/roger-luo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 56570956, "answer_count": 1, "score": 0, "last_activity_date": 1560442454, "creation_date": 1560374141, "last_edit_date": 1560379096, "question_id": 56570453, "link": "https://stackoverflow.com/questions/56570453/how-to-utilize-groupby-perform-calculation-on-only-certain-rows-and-keep-all-co", "title": "How to utilize groupby, perform calculation on only certain rows and keep all column", "body": "<p>I'm trying to calculate some percent change of time series data in python pandas. But i'm having trouble doing it via groupby and applying the calculations correctly on the right time period data.\nHere is the dataframe I currently have:</p>\n\n<pre><code>     A      B           C           D\n0    ACTUAL 2018-03-01  249.498000  0.040000\n1    ACTUAL 2018-06-01  251.134000  0.040000\n2    ACTUAL 2018-09-01  252.010000  0.037000\n3    ACTUAL 2018-12-01  252.723000  0.039000\n4    ACTUAL 2019-03-01  254.148000  0.038000\n5    TDA_D5 2019-03-01  253.393661  0.038667\n6    TDA_D5 2019-06-01  254.329314  0.038229\n7    TDA_D5 2019-09-01  254.784295  0.038974\n8    TDA_D5 2019-12-01  254.988064  0.040149\n9    TDA_D5 2020-03-01  255.158740  0.041696\n10   TDA_D5 2020-06-01  255.243512  0.043405\n11   TDA_D5 2020-09-01  255.360638  0.045753\n12   TDA_D5 2020-12-01  255.445890  0.047833\n13   TDA_D5 2021-03-01  255.700028  0.051772\n14   TDA_D5 2021-06-01  256.001398  0.054357\n15   TDA_D5 2021-09-01  256.347487  0.056077\n16   TDA_D5 2021-12-01  256.792392  0.056796\n17   TDA_D5 2022-03-01  257.314624  0.057218\n18   TDA_D5 2022-06-01  257.922474  0.057385\n19   TDA_U5 2019-03-01  253.393661  0.038667\n20   TDA_U5 2019-06-01  255.882782  0.036118\n21   TDA_U5 2019-09-01  258.415239  0.034246\n22   TDA_U5 2019-12-01  261.090022  0.032766\n23   TDA_U5 2020-03-01  264.033754  0.031713\n24   TDA_U5 2020-06-01  267.157258  0.030939\n25   TDA_U5 2020-09-01  270.563024  0.030997\n26   TDA_U5 2020-12-01  274.090429  0.031201\n27   TDA_U5 2021-03-01  277.877144  0.032869\n28   TDA_U5 2021-06-01  281.790593  0.033901\n29   TDA_U5 2021-09-01  285.838634  0.034656\n30   TDA_U5 2021-12-01  289.992294  0.035058\n31   TDA_U5 2022-03-01  294.235605  0.035529\n32   TDA_U5 2022-06-01  298.547907  0.036048\n33  TD_BASE 2019-03-01  253.393661  0.038667\n34  TD_BASE 2019-06-01  255.119961  0.037143\n35  TD_BASE 2019-09-01  256.589769  0.036490\n36  TD_BASE 2019-12-01  257.949582  0.036184\n37  TD_BASE 2020-03-01  259.351461  0.036187\n38  TD_BASE 2020-06-01  260.702463  0.036312\n39  TD_BASE 2020-09-01  262.093917  0.037062\n40  TD_BASE 2020-12-01  263.422911  0.037667\n41  TD_BASE 2021-03-01  264.883181  0.039809\n42  TD_BASE 2021-06-01  266.351643  0.041000\n43  TD_BASE 2021-09-01  267.828346  0.041699\n44  TD_BASE 2021-12-01  269.313336  0.041867\n45  TD_BASE 2022-03-01  270.806660  0.042033\n46  TD_BASE 2022-06-01  272.308363  0.042199\n</code></pre>\n\n<p>What I'm trying to achieve is to take groupby on column A, if it's not equal to 'ACTUAL', take the first 4 rows of every group (would be 'TDA_D5','TDA_U5', and 'TD_BASE' in this case, since i don't want 'ACTUAL' from column A), and use every row of these 4 rows for each group's column C value in an equation with the column C value of 'ACTUAL' from column A.</p>\n\n<p>This means that I would have the equation </p>\n\n<pre><code>y = index-5.column-C / index-0.column-C - 1 * 100\n</code></pre>\n\n<p>this equation would repeat for index 6, index 7, and index 8 for the numerator, but the denominator would be index 1, 2, and 3 respectively for the group TDA_D5. This would also then apply to index 19 to 22 as the numerator for group TDA_U5, with denominator still being index 0 to 3, and index 33 to 36 as the numerator for group TD_BASE, and the denominator still as index 0 to 3.</p>\n\n<p>So far I've tried the code</p>\n\n<pre><code>a.groupby('A')['C'].apply(lambda x: (x.iloc[0:4] / 100)).reset_index()\n</code></pre>\n\n<p>I'm using / 100 because i'm just first trying to test if I could apply the first 4 records of every group to a simple divide by 100 formula, as I have yet to figure out how to apply it against the actual group's first 4 records in the equation i've mentioned above. I was able to use this piece of code to obtain a series object and have the first four records of every group, including 'ACTUAL' group, to divide by 100, but this is where i'm now stuck. I don't know how I would go about implementing the eventual formula i'm trying to achieve, on the subset of 4 records from every group in A except the 'ACTUAL' group.\nThanks in advance!</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1560374472, "post_id": 56570448, "comment_id": 99720001, "body": "This isn&#39;t something you can do yourself. It requires a whole lot of complex JavaScript."}, {"owner": {"reputation": 397, "user_id": 11105842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3552c46501a8b31c45c0bf11c35167dd?s=128&d=identicon&r=PG&f=1", "display_name": "A. Atiyah", "link": "https://stackoverflow.com/users/11105842/a-atiyah"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1560375765, "post_id": 56570448, "comment_id": 99720392, "body": "okay, then what&#39;s the best package to do this? also is there&#39;s a way I can do something on adding something new on admin panel?"}], "answers": [{"tags": [], "owner": {"reputation": 30, "user_id": 11265159, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xvQmi.jpg?s=128&g=1", "display_name": "Vicki Langer", "link": "https://stackoverflow.com/users/11265159/vicki-langer"}, "is_accepted": true, "score": 1, "last_activity_date": 1561987661, "creation_date": 1561987661, "answer_id": 56836558, "question_id": 56570448, "link": "https://stackoverflow.com/questions/56570448/making-a-wysiwyg-form-field-in-django/56836558#56836558", "title": "Making a WYSIWYG form field in Django", "body": "<p>Check out <a href=\"https://tutorial.djangogirls.org/\" rel=\"nofollow noreferrer\">https://tutorial.djangogirls.org/</a></p>\n\n<p>This tutorial will show you how to get the blogs on your admin panel</p>\n"}], "owner": {"reputation": 397, "user_id": 11105842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3552c46501a8b31c45c0bf11c35167dd?s=128&d=identicon&r=PG&f=1", "display_name": "A. Atiyah", "link": "https://stackoverflow.com/users/11105842/a-atiyah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 56836558, "answer_count": 1, "score": 0, "last_activity_date": 1561987661, "creation_date": 1560374080, "question_id": 56570448, "link": "https://stackoverflow.com/questions/56570448/making-a-wysiwyg-form-field-in-django", "title": "Making a WYSIWYG form field in Django", "body": "<p>I'm currently practicing making a blog in Django and I'd love to have WYSIWYG form field in Django but obviously it's not pre-built in Django and I know for a fact that I can create custom fields I just can't seem to find the right way to do it.</p>\n\n<p>Any tutorials or tips would be appreciated. I don't want to use a package I want to do it myself just for the sake of learning. </p>\n"}, {"tags": ["python", "api", "python-2.x", "zoho"], "comments": [{"owner": {"reputation": 1418, "user_id": 5946921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa6d24b5cd68697ac3f92d8b7e608ea7?s=128&d=identicon&r=PG&f=1", "display_name": "Will Da Silva", "link": "https://stackoverflow.com/users/5946921/will-da-silva"}, "edited": false, "score": 0, "creation_date": 1560373842, "post_id": 56570383, "comment_id": 99719803, "body": "What error are you getting? You mention that you want to make <code>from ReportClient import ReportClient</code> work, but you haven&#39;t said what&#39;s wrong with it."}, {"owner": {"reputation": 188, "user_id": 9548702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff50fd01a870037f33a36ad2928e647?s=128&d=identicon&r=PG&f=1", "display_name": "Alice_inwonderland", "link": "https://stackoverflow.com/users/9548702/alice-inwonderland"}, "reply_to_user": {"reputation": 1418, "user_id": 5946921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa6d24b5cd68697ac3f92d8b7e608ea7?s=128&d=identicon&r=PG&f=1", "display_name": "Will Da Silva", "link": "https://stackoverflow.com/users/5946921/will-da-silva"}, "edited": false, "score": 0, "creation_date": 1560376924, "post_id": 56570383, "comment_id": 99720686, "body": "Hi the error is &quot;no module named ReportClient&quot;. Where am I supposed to store the client library folder?"}], "answers": [{"comments": [{"owner": {"reputation": 188, "user_id": 9548702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff50fd01a870037f33a36ad2928e647?s=128&d=identicon&r=PG&f=1", "display_name": "Alice_inwonderland", "link": "https://stackoverflow.com/users/9548702/alice-inwonderland"}, "edited": false, "score": 0, "creation_date": 1560520530, "post_id": 56581077, "comment_id": 99775206, "body": "Hi Will, thank you for your response. I will check your solution now and hopefully will get it figured out :)"}, {"owner": {"reputation": 371, "user_id": 797374, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f6d1192c19f02f60d244fa1fa446f248?s=128&d=identicon&r=PG", "display_name": "Gopipuli", "link": "https://stackoverflow.com/users/797374/gopipuli"}, "edited": false, "score": 0, "creation_date": 1606197339, "post_id": 56581077, "comment_id": 114882249, "body": "This answer helped me a lot.. just place ReportClient.py in python lib folder and it works."}], "tags": [], "owner": {"reputation": 1418, "user_id": 5946921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa6d24b5cd68697ac3f92d8b7e608ea7?s=128&d=identicon&r=PG&f=1", "display_name": "Will Da Silva", "link": "https://stackoverflow.com/users/5946921/will-da-silva"}, "is_accepted": true, "score": 2, "last_activity_date": 1560430693, "creation_date": 1560430693, "answer_id": 56581077, "question_id": 56570383, "link": "https://stackoverflow.com/questions/56570383/import-data-from-zoho-analytics-to-python/56581077#56581077", "title": "Import data from Zoho Analytics to Python", "body": "<p>On the site you linked, you can download a zip file containing the file <code>Zoho/ZohoReportPythonClient/com/adventnet/zoho/client/report/python/ReportClient.py</code>. I'm not sure why it's so deeply nested, or why most of the folders contain an <code>__init__.py</code> file which only has <code>#$Id$</code> in it.</p>\n\n<p>You'll need to extract that file, and place it somewhere where your Python interpreter can find it. For more information about where Python will look for the module (ReportClient.py), see this question: <a href=\"https://stackoverflow.com/questions/15252040\">How does python find a module file if the import statement only contains the filename?</a></p>\n\n<p>Please note that the file is Python 2 code. You'll need to use a Python 2 interpreter, or convert it to Python 3 code. Once you've got it importing properly, you can use their API reference to start writing code with it: <a href=\"https://css.zohostatic.com/db/api/v7_m2/docs/python/\" rel=\"nofollow noreferrer\">https://css.zohostatic.com/db/api/v7_m2/docs/python/</a></p>\n"}], "owner": {"reputation": 188, "user_id": 9548702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff50fd01a870037f33a36ad2928e647?s=128&d=identicon&r=PG&f=1", "display_name": "Alice_inwonderland", "link": "https://stackoverflow.com/users/9548702/alice-inwonderland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 404, "favorite_count": 0, "accepted_answer_id": 56581077, "answer_count": 1, "score": 1, "last_activity_date": 1560430693, "creation_date": 1560373677, "last_edit_date": 1560391882, "question_id": 56570383, "link": "https://stackoverflow.com/questions/56570383/import-data-from-zoho-analytics-to-python", "title": "Import data from Zoho Analytics to Python", "body": "<p>I'm trying to connect Zoho Analytics and Python via Zoho client library here: <a href=\"https://www.zoho.com/analytics/api/#python-library\" rel=\"nofollow noreferrer\">https://www.zoho.com/analytics/api/#python-library</a> </p>\n\n<p>I downloaded the client library file but now have no idea how to use it. What I want to do is importing data from Zoho Analytics to Python and the suggested code on Zoho is:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from __future__ import with_statement\nfrom ReportClient import ReportClient\nimport sys\n\nfrom __future__ import with_statement\nfrom ReportClient import ReportClient\nimport sys\n\nclass Sample:\n\n    LOGINEMAILID=\"abc@zoho.com\"\n    AUTHTOKEN=\"************\"\n    DATABASENAME=\"Workspace Name\"\n    TABLENAME=\"Table Name\"\n    rc = None\n    rc = ReportClient(self.AUTHTOKEN)\n\n    def importData(self,rc):\n        uri = rc.getURI(self.LOGINEMAILID,self.DATABASENAME,self.TABLENAME)\n        try:\n            with open('StoreSales.csv', 'r') as f:\n            importContent = f.read()\n        except Exception,e:\n            print \"Error Check if file StoreSales.csv exists in\n                                        the current directory\"\n            print \"(\" + str(e) + \")\"\n            return\n        impResult = rc.importData(uri,\"APPEND\",importContent,None)\n        print \"Added Rows :\" +str(impResult.successRowCount) + \" and Columns :\"\n                    + str(impResult.selectedColCount)\n\nobj = Sample()\nobj.importData(obj.rc)\n</code></pre>\n\n<p>How do I make <code>from ReportClient import ReportClient</code> work? </p>\n\n<p>Also, how does <code>rc = ReportClient(self.AUTHTOKEN)</code> work if self wasn't predefined?</p>\n"}, {"tags": ["python", "selenium", "selenium-webdriver"], "answers": [{"tags": [], "owner": {"reputation": 333, "user_id": 9722265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BB29N.png?s=128&g=1", "display_name": "pypalms", "link": "https://stackoverflow.com/users/9722265/pypalms"}, "is_accepted": false, "score": 1, "last_activity_date": 1560373872, "creation_date": 1560373872, "answer_id": 56570414, "question_id": 56570333, "link": "https://stackoverflow.com/questions/56570333/selecting-from-the-menu-after-clicking-selenium-python/56570414#56570414", "title": "Selecting from the menu after clicking selenium python", "body": "<p>Try having the element scroll into view:</p>\n\n<pre><code>xml_item = self.driver.find_element_by_name('//*[@id=\"iform_ausweisung_szm\"]/table/tbody/tr/td[3]/div/select')\ndriver.execute_script(\"arguments[0].scrollIntoView(false);\", xml_item)\nxml_item.click() # Or any other action item.\n</code></pre>\n\n<p>In most cases, the issue is that the element is on the page somewhere, but it is not in the active window for selenium to take any action against it.</p>\n"}, {"comments": [{"owner": {"reputation": 1592, "user_id": 7403752, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/07d8fe28ab264b0de19240d36d64e2cd?s=128&d=identicon&r=PG&f=1", "display_name": "edyvedy13", "link": "https://stackoverflow.com/users/7403752/edyvedy13"}, "edited": false, "score": 0, "creation_date": 1560374566, "post_id": 56570463, "comment_id": 99720033, "body": "No, for some reason, it does not load the new page after clicking"}, {"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "reply_to_user": {"reputation": 1592, "user_id": 7403752, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/07d8fe28ab264b0de19240d36d64e2cd?s=128&d=identicon&r=PG&f=1", "display_name": "edyvedy13", "link": "https://stackoverflow.com/users/7403752/edyvedy13"}, "edited": false, "score": 0, "creation_date": 1560374644, "post_id": 56570463, "comment_id": 99720050, "body": "Are you still getting <code>ElementClickInterceptedException</code> when clicked using one of the above options?"}, {"owner": {"reputation": 1592, "user_id": 7403752, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/07d8fe28ab264b0de19240d36d64e2cd?s=128&d=identicon&r=PG&f=1", "display_name": "edyvedy13", "link": "https://stackoverflow.com/users/7403752/edyvedy13"}, "edited": false, "score": 0, "creation_date": 1560375521, "post_id": 56570463, "comment_id": 99720316, "body": "Basically, it skips that line, where it suppose to click"}, {"owner": {"reputation": 1592, "user_id": 7403752, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/07d8fe28ab264b0de19240d36d64e2cd?s=128&d=identicon&r=PG&f=1", "display_name": "edyvedy13", "link": "https://stackoverflow.com/users/7403752/edyvedy13"}, "edited": false, "score": 0, "creation_date": 1560375636, "post_id": 56570463, "comment_id": 99720351, "body": "If add click to the first line I get ElementClickInterceptedException: element click intercepted: Element &lt;select name=&quot;a&quot; class=&quot;inaktiv&quot; onchange=&quot;document.getElementById(&#39;iform_ausweisung_szm&#39;).su&zwnj;&#8203;bmit();&quot;&gt;...&lt;/select&zwnj;&#8203;&gt; is not clickable at point (875, 31). Other element would receive the click: &lt;div class=&quot;bread&quot;&gt;...&lt;/div&gt;"}, {"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "reply_to_user": {"reputation": 1592, "user_id": 7403752, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/07d8fe28ab264b0de19240d36d64e2cd?s=128&d=identicon&r=PG&f=1", "display_name": "edyvedy13", "link": "https://stackoverflow.com/users/7403752/edyvedy13"}, "edited": false, "score": 0, "creation_date": 1560375673, "post_id": 56570463, "comment_id": 99720369, "body": "Are you using option 1 or 2. Can you print(listEle) before clicking and make sure you are pointing to the right element."}, {"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "reply_to_user": {"reputation": 1592, "user_id": 7403752, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/07d8fe28ab264b0de19240d36d64e2cd?s=128&d=identicon&r=PG&f=1", "display_name": "edyvedy13", "link": "https://stackoverflow.com/users/7403752/edyvedy13"}, "edited": false, "score": 0, "creation_date": 1560375725, "post_id": 56570463, "comment_id": 99720385, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/194840/discussion-between-supputuri-and-edyvedy13\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "is_accepted": true, "score": 2, "last_activity_date": 1560374182, "creation_date": 1560374182, "answer_id": 56570463, "question_id": 56570333, "link": "https://stackoverflow.com/questions/56570333/selecting-from-the-menu-after-clicking-selenium-python/56570463#56570463", "title": "Selecting from the menu after clicking selenium python", "body": "<p>Here are 2 options to handle this issue.</p>\n\n<p>Option 1: scroll to the select and then click</p>\n\n<pre><code> listEle = driver.find_element_by_xpath('//*[@id=\"iform_ausweisung_szm\"]/table/tbody/tr/td[3]/div/select')\n listEle.location_once_scrolled_into_view # this will scroll to the element\n #click on the element\n listEle.click()\n</code></pre>\n\n<p>Option 2: using javascript</p>\n\n<pre><code> listEle = driver.find_element_by_xpath('//*[@id=\"iform_ausweisung_szm\"]/table/tbody/tr/td[3]/div/select')\n #click using javascript\n driver.execute_script(\"arguments[0].click()\",listEle)\n</code></pre>\n"}], "owner": {"reputation": 1592, "user_id": 7403752, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/07d8fe28ab264b0de19240d36d64e2cd?s=128&d=identicon&r=PG&f=1", "display_name": "edyvedy13", "link": "https://stackoverflow.com/users/7403752/edyvedy13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 56570463, "answer_count": 2, "score": 1, "last_activity_date": 1560376046, "creation_date": 1560373444, "last_edit_date": 1560376046, "question_id": 56570333, "link": "https://stackoverflow.com/questions/56570333/selecting-from-the-menu-after-clicking-selenium-python", "title": "Selecting from the menu after clicking selenium python", "body": "<p>I am trying to select the latest available date after clicking on the menu from the following website:</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.support.ui import Select\nfrom _datetime import datetime\nfrom selenium.common.exceptions import NoSuchElementException\nfrom selenium.webdriver.common.keys import Keys\n\nurl = \"http://ausweisung.ivw-online.de/index.php?i=1161&amp;a=o52802\"\ndriver = webdriver.Chrome(executable_path = driver_path, chrome_options=chromeOptions)\ndriver.get(\"http://ausweisung.ivw-online.de/\" + Link)\ntime.sleep(random.randint(7, 10))\ndriver.find_element_by_xpath('//*[@id=\"iform_ausweisung_szm\"]/table/tbody/tr/td[3]/div/select').click()\n</code></pre>\n\n<p>However, even at the first step I get the following error:</p>\n\n<pre><code>ElementClickInterceptedException: element click intercepted: Element &lt;select name=\"a\" class=\"inaktiv\" onchange=\"document.getElementById('iform_ausweisung_szm').submit();\"&gt;...&lt;/select&gt; is not clickable at point (875, 31). Other element would receive the click: &lt;div class=\"bread\"&gt;...&lt;/div&gt;\n</code></pre>\n\n<p>How to get rid of the error ?</p>\n"}, {"tags": ["python", "email", "smtp"], "comments": [{"owner": {"reputation": 103, "user_id": 6126415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebb6a9ffddb1eedb3fdbe5429f230f1b?s=128&d=identicon&r=PG", "display_name": "lennhv", "link": "https://stackoverflow.com/users/6126415/lennhv"}, "edited": false, "score": 0, "creation_date": 1560375546, "post_id": 56570303, "comment_id": 99720322, "body": "Try to figure if is a temporary failure of your gateway or DNS, you could use ping and telnet tools.  Test gmail.com, smtp.gmail.com, stmp.office365.com and some others. If the issues is only in gmail, check with your network and firewall rules"}], "owner": {"reputation": 309, "user_id": 11575409, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MYGv2z2J5Aw/AAAAAAAAAAI/AAAAAAAAF50/I64monajDZo/photo.jpg?sz=128", "display_name": "PhantomQuest", "link": "https://stackoverflow.com/users/11575409/phantomquest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2086, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1560373237, "creation_date": 1560373237, "question_id": 56570303, "link": "https://stackoverflow.com/questions/56570303/python-smtp-error-socket-gaierror-errno-2-name-or-service-not-known-smtp", "title": "Python, SMTP Error, socket.gaierror: [Errno -2] Name or service not known, smtp.gmail.com", "body": "<pre><code>server = smtplib.SMTP('smtp.gmail.com', 587)\nserver.starttls()\nserver.login('email@gmail.com','password')\n\nmsg = 'Hello World'\nserver.sendmail('email@gmail.com','email@gmail.com',msg)\nserver.quit()\n</code></pre>\n\n<p>I'm getting a <code>socket.gaierror: [Errno -2] Name or service not known</code> for the first line <code>server = smtplib.SMTP('smtp.google.com', 587)</code>. Trying <code>stmp.office365.com</code> seems to go through fine but gmail is not recognized. </p>\n"}, {"tags": ["python", "pandas", "security", "logging"], "comments": [{"owner": {"reputation": 1892, "user_id": 10067043, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155990840858271/picture?type=large", "display_name": "Ricky Kim", "link": "https://stackoverflow.com/users/10067043/ricky-kim"}, "edited": false, "score": 1, "creation_date": 1560374000, "post_id": 56570282, "comment_id": 99719852, "body": "Only call that function when you&#39;re logging, and for everything else, just use the original dataframe."}, {"owner": {"reputation": 69, "user_id": 4335643, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-HphcSR3AzM0/AAAAAAAAAAI/AAAAAAAAALk/JqyTi1yRbsg/photo.jpg?sz=128", "display_name": "Thomas Cannon", "link": "https://stackoverflow.com/users/4335643/thomas-cannon"}, "reply_to_user": {"reputation": 1892, "user_id": 10067043, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155990840858271/picture?type=large", "display_name": "Ricky Kim", "link": "https://stackoverflow.com/users/10067043/ricky-kim"}, "edited": false, "score": 0, "creation_date": 1560374421, "post_id": 56570282, "comment_id": 99719986, "body": "Thanks @Ricky Kim I tried that. I also tried creating a new &#39;display only&#39; variable form the original data frame and then calling the function on that. For some reason, if I call the function on the dataframe at any point in the code, it changes the dataframe everywhere, even in places where I print or log BEFORE I call it."}, {"owner": {"reputation": 1892, "user_id": 10067043, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155990840858271/picture?type=large", "display_name": "Ricky Kim", "link": "https://stackoverflow.com/users/10067043/ricky-kim"}, "edited": false, "score": 1, "creation_date": 1560374755, "post_id": 56570282, "comment_id": 99720078, "body": "Make sure you called <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.copy.html\" rel=\"nofollow noreferrer\">df.copy</a> when making &#39;display only&#39; variable"}, {"owner": {"reputation": 69, "user_id": 4335643, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-HphcSR3AzM0/AAAAAAAAAAI/AAAAAAAAALk/JqyTi1yRbsg/photo.jpg?sz=128", "display_name": "Thomas Cannon", "link": "https://stackoverflow.com/users/4335643/thomas-cannon"}, "reply_to_user": {"reputation": 1892, "user_id": 10067043, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155990840858271/picture?type=large", "display_name": "Ricky Kim", "link": "https://stackoverflow.com/users/10067043/ricky-kim"}, "edited": false, "score": 0, "creation_date": 1560375174, "post_id": 56570282, "comment_id": 99720193, "body": "geez. That was it! Thank you! Make it an answer and I can select it."}], "answers": [{"tags": [], "owner": {"reputation": 1892, "user_id": 10067043, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155990840858271/picture?type=large", "display_name": "Ricky Kim", "link": "https://stackoverflow.com/users/10067043/ricky-kim"}, "is_accepted": true, "score": 1, "last_activity_date": 1560375173, "creation_date": 1560375173, "answer_id": 56570654, "question_id": 56570282, "link": "https://stackoverflow.com/questions/56570282/how-can-i-mask-a-pandas-dataframe-column-in-logging-output/56570654#56570654", "title": "How can I mask a pandas dataframe column in logging output?", "body": "<p>Make sure to <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.copy.html\" rel=\"nofollow noreferrer\">df.copy</a> the dataframe if you want to leave the original df as is:</p>\n\n<pre><code>def hide_by_pd_df_columns(dataframe,columns,replacement=None):\n    '''hides/replaces a pandas dataframe column with a replacement'''\n    df=dataframe.copy()\n    for column in columns:\n        replacement = '*****' if replacement is None else replacement\n        df[column] = replacement\n    return df\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 4335643, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-HphcSR3AzM0/AAAAAAAAAAI/AAAAAAAAALk/JqyTi1yRbsg/photo.jpg?sz=128", "display_name": "Thomas Cannon", "link": "https://stackoverflow.com/users/4335643/thomas-cannon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 56570654, "answer_count": 1, "score": 1, "last_activity_date": 1560375173, "creation_date": 1560373135, "question_id": 56570282, "link": "https://stackoverflow.com/questions/56570282/how-can-i-mask-a-pandas-dataframe-column-in-logging-output", "title": "How can I mask a pandas dataframe column in logging output?", "body": "<p>I am having to log some pandas dataframe outputs that contain sensitive information. I would rather not have this info in the logs or print in the terminal. </p>\n\n<p>I normally write a little function that can take a string and mask it with a regex, but I am having trouble doing that with a dataframe. Is there anyway to mask a column(s) of sensitive info in a data frame just for logging? The method I have tried below changes the dataframe, making the column unusable down the line.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def hide_by_pd_df_columns(dataframe,columns,replacement=None):\n    '''hides/replaces a pandas dataframe column with a replacement'''\n    for column in columns:\n        replacement = '*****' if replacement is None else replacement\n        dataframe[column] = replacement\n    return dataframe\n</code></pre>\n\n<p>What I want to happen is the ***** mask to only exist in logging and not in the rest of the operations.</p>\n"}, {"tags": ["python", "matplotlib", "graph", "interactive"], "comments": [{"owner": {"reputation": 1, "user_id": 11638610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_h6XTwtVMUw/AAAAAAAAAAI/AAAAAAAAAC4/ggDP08pV-Uc/photo.jpg?sz=128", "display_name": "frubix13", "link": "https://stackoverflow.com/users/11638610/frubix13"}, "reply_to_user": {"reputation": 2445, "user_id": 5020803, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-w1adMH7HR84/AAAAAAAAAAI/AAAAAAAAAC8/fUhQfhwg4SQ/photo.jpg?sz=128", "display_name": "BenT", "link": "https://stackoverflow.com/users/5020803/bent"}, "edited": false, "score": 0, "creation_date": 1560414031, "post_id": 56570276, "comment_id": 99730440, "body": "It&#39;s interactive in the sense that you can zoom in, not more than that, and what I&#39;m having trouble with are the ticks. Should I still use Bokeh for this purpose?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11638610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_h6XTwtVMUw/AAAAAAAAAAI/AAAAAAAAAC4/ggDP08pV-Uc/photo.jpg?sz=128", "display_name": "frubix13", "link": "https://stackoverflow.com/users/11638610/frubix13"}, "edited": false, "score": 0, "creation_date": 1560413598, "post_id": 56574655, "comment_id": 99730227, "body": "I tried this and it shows all ticks at the same time; what I need is for most to be hidden until you zoom in more."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "reply_to_user": {"reputation": 1, "user_id": 11638610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_h6XTwtVMUw/AAAAAAAAAAI/AAAAAAAAAC4/ggDP08pV-Uc/photo.jpg?sz=128", "display_name": "frubix13", "link": "https://stackoverflow.com/users/11638610/frubix13"}, "edited": false, "score": 0, "creation_date": 1560413730, "post_id": 56574655, "comment_id": 99730295, "body": "No it doesn&#39;t show all at the same time. At any zoomlevel it shows a useful number of ticks."}, {"owner": {"reputation": 1, "user_id": 11638610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_h6XTwtVMUw/AAAAAAAAAAI/AAAAAAAAAC4/ggDP08pV-Uc/photo.jpg?sz=128", "display_name": "frubix13", "link": "https://stackoverflow.com/users/11638610/frubix13"}, "edited": false, "score": 0, "creation_date": 1560414303, "post_id": 56574655, "comment_id": 99730599, "body": "Never mind, I didn&#39;t edit the &quot;return new&quot; part. This is definitely a big improvement, thanks!"}, {"owner": {"reputation": 1, "user_id": 11638610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_h6XTwtVMUw/AAAAAAAAAAI/AAAAAAAAAC4/ggDP08pV-Uc/photo.jpg?sz=128", "display_name": "frubix13", "link": "https://stackoverflow.com/users/11638610/frubix13"}, "edited": false, "score": 0, "creation_date": 1560421762, "post_id": 56574655, "comment_id": 99734755, "body": "I am not able to fully implement it into my code because there are parts where I add a straight horizontal line that depends on the x value, but in this case it gets plotted close to the year 0"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "reply_to_user": {"reputation": 1, "user_id": 11638610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_h6XTwtVMUw/AAAAAAAAAAI/AAAAAAAAAC4/ggDP08pV-Uc/photo.jpg?sz=128", "display_name": "frubix13", "link": "https://stackoverflow.com/users/11638610/frubix13"}, "edited": false, "score": 0, "creation_date": 1560422064, "post_id": 56574655, "comment_id": 99734907, "body": "It gets plotted at the coordinates you give it."}], "tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": false, "score": 0, "last_activity_date": 1560407969, "creation_date": 1560407969, "answer_id": 56574655, "question_id": 56570276, "link": "https://stackoverflow.com/questions/56570276/how-to-define-different-functions-for-ticks-based-on-zoom-level/56574655#56574655", "title": "How to define different functions for ticks based on zoom level", "body": "<p>The exact specified zooming behaviour is maybe a bit hard to accomplish, but the defaults are pretty close to it. </p>\n\n<pre><code>import datetime\nimport matplotlib.pyplot as plt\n\ndef dateticks(dayssince00):\n    start=datetime.date(2000,1,1)\n    new= start+datetime.timedelta(days=dayssince00)\n    return new\n\ndef graph():\n    fig, ax = plt.subplots(1)\n\n    day_num = list(range(1000))\n    days = [dateticks(x) for x in day_num]\n    func = [x**2 for x in day_num]\n    plt.plot(days,func)\n\n    fig.autofmt_xdate() #rotates strings\n\n    plt.grid()\n    plt.show()\n\ngraph()\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11638610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_h6XTwtVMUw/AAAAAAAAAAI/AAAAAAAAAC4/ggDP08pV-Uc/photo.jpg?sz=128", "display_name": "frubix13", "link": "https://stackoverflow.com/users/11638610/frubix13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560407969, "creation_date": 1560373110, "last_edit_date": 1560373814, "question_id": 56570276, "link": "https://stackoverflow.com/questions/56570276/how-to-define-different-functions-for-ticks-based-on-zoom-level", "title": "How to define different functions for ticks based on zoom level", "body": "<p>I have a data analysis plot where the x-axis contains dates. The plot is supposed to be interactive, and what I want to do is the following:\nAs you zoom in more and more, I want the graph to (each point at a greater zoom)</p>\n\n<ul>\n<li>Show only year ticks</li>\n<li>Show only month ticks</li>\n<li>Show only day ticks</li>\n<li>Limit the resolution at days</li>\n</ul>\n\n<p>The best solution I have found so far to my problem is using</p>\n\n<pre><code>ax.xaxis.set_major_formatter(FuncFormatter(dateticks))\nax.xaxis.set_major_locator(MaxNLocator(12)) #limits ticks\nfig.autofmt_xdate() #rotates strings\n</code></pre>\n\n<p>Where \"dateticks\" is a function that returns the date string based on the x value (e.g. \"18-3-2018\")</p>\n\n<p>This solution limits the total ticks on screen at a time, and makes new ones appear when you zoom in, but it shows \"random\" dates, and when the plot is zoomed out, you don't know where the year intervals are. Moreover if you zoom in past the day resolution, it will add extra ticks with the same day.</p>\n\n<p>I only started coding in September 2018 but I love it! Can someone help?</p>\n\n<p><a href=\"https://i.stack.imgur.com/7fHGQ.png\" rel=\"nofollow noreferrer\">Here is a plot of my real code</a>\n, and here is a code that reproduces my current situation:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import datetime\nimport matplotlib.pyplot as plt\nfrom matplotlib.ticker import FuncFormatter,MaxNLocator\n\ndef dateticks(dayssince00,pos):\n    start=datetime.date(2000,1,1)\n    new= start+datetime.timedelta(days=dayssince00)\n    return \"{}-{}-{}\".format(new.day, new.month, new.year)\n\ndef graph():\n    fig, ax = plt.subplots(1)\n\n    days=[x for x in range(1000)]\n    func=[x**2 for x in days]\n    plt.plot(days,func)\n\n    ax.xaxis.set_major_formatter(FuncFormatter(dateticks))\n    ax.xaxis.set_major_locator(MaxNLocator(12)) #limits ticks\n    fig.autofmt_xdate() #rotates strings\n\n    plt.grid()\n    plt.show()\n\ngraph()\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1560372773, "post_id": 56570192, "comment_id": 99719458, "body": "I would ask &quot;What is <code>averages</code>&quot; but I assume you have a good reason for not showing it or explaining what it is and what you&#39;re trying to do. Or am I mistaken?"}, {"owner": {"reputation": 19276, "user_id": 8591431, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-AqHwnjWu2tM/AAAAAAAAAAI/AAAAAAAAFrE/DVc4w4e1pDc/photo.jpg?sz=128", "display_name": "Devesh Kumar Singh", "link": "https://stackoverflow.com/users/8591431/devesh-kumar-singh"}, "edited": false, "score": 0, "creation_date": 1560372776, "post_id": 56570192, "comment_id": 99719460, "body": "which line is the error ?"}, {"owner": {"reputation": 1189, "user_id": 10638232, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2CQwwMqP-hM/AAAAAAAAAAI/AAAAAAAACQA/5LiuWqD4TlQ/photo.jpg?sz=128", "display_name": "GeeTransit", "link": "https://stackoverflow.com/users/10638232/geetransit"}, "edited": false, "score": 0, "creation_date": 1560372905, "post_id": 56570192, "comment_id": 99719506, "body": "Looks like you have a dictionary of dictionaries, but the code isn&#39;t saying so. Please show us what <code>averages</code> is, or even just with the values changed."}, {"owner": {"reputation": 470, "user_id": 7828662, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ecb7e6431c6842ef843ca682707d11e0?s=128&d=identicon&r=PG&f=1", "display_name": "Sander bakker", "link": "https://stackoverflow.com/users/7828662/sander-bakker"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1560372968, "post_id": 56570192, "comment_id": 99719536, "body": "@cs95 Added averages"}, {"owner": {"reputation": 470, "user_id": 7828662, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ecb7e6431c6842ef843ca682707d11e0?s=128&d=identicon&r=PG&f=1", "display_name": "Sander bakker", "link": "https://stackoverflow.com/users/7828662/sander-bakker"}, "reply_to_user": {"reputation": 1189, "user_id": 10638232, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2CQwwMqP-hM/AAAAAAAAAAI/AAAAAAAACQA/5LiuWqD4TlQ/photo.jpg?sz=128", "display_name": "GeeTransit", "link": "https://stackoverflow.com/users/10638232/geetransit"}, "edited": false, "score": 0, "creation_date": 1560372980, "post_id": 56570192, "comment_id": 99719540, "body": "@GeeTransit Added the variable output"}, {"owner": {"reputation": 19276, "user_id": 8591431, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-AqHwnjWu2tM/AAAAAAAAAAI/AAAAAAAAFrE/DVc4w4e1pDc/photo.jpg?sz=128", "display_name": "Devesh Kumar Singh", "link": "https://stackoverflow.com/users/8591431/devesh-kumar-singh"}, "edited": false, "score": 2, "creation_date": 1560373413, "post_id": 56570192, "comment_id": 99719692, "body": "Don&#39;t use <code>averages</code> to create your average dict, use another dictionary and the code will work"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1560379615, "post_id": 56570192, "comment_id": 99721340, "body": "<a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1549, "user_id": 11394329, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WmL18_5TbK8/AAAAAAAAAAI/AAAAAAAAAMI/vYk8yTm4Cjs/photo.jpg?sz=128", "display_name": "Richard Nemeth", "link": "https://stackoverflow.com/users/11394329/richard-nemeth"}, "is_accepted": true, "score": 6, "last_activity_date": 1560373591, "last_edit_date": 1560373591, "creation_date": 1560373477, "answer_id": 56570340, "question_id": 56570192, "link": "https://stackoverflow.com/questions/56570192/how-to-use-the-sum-function-in-python3/56570340#56570340", "title": "How to use the sum function in Python3", "body": "<p>The first line will work just fine, but the failing will start on the second line and continues onwards. The reason is that you have included a new entry in the <code>averages</code> dictionary after the first line. Hence your <code>averages</code> dictionary has a new key <code>\"averages_home_goals\"</code> with a single float value.</p>\n\n<p>When you execute the second line, you iterate through all the values of the dictionary <code>averages</code>, which now has an additional value of the sum of all home goals in the key <code>\"averages_home_goals\"</code>, which is going to be a float. And you cannot subscript a float. Basically what it means that you are trying to execute an example of a code (on the second line) of these sorts:</p>\n\n<pre><code>12.3242[\"away_goals\"]\n</code></pre>\n\n<p>which will always fail.</p>\n\n<p>As a solution I'd suggest to store the results into a new dictionary, f.e.</p>\n\n<pre><code>res = {}\n\nres[\"averages_home_goals\"] = sum(d['home_goals'] for d in averages.values() if d)\nres[\"averages_away_goals\"] = sum(d['away_goals'] for d in averages.values() if d)\nres[\"averages_home_conceded\"] = sum(d['home_conceded'] for d in averages.values() if d)\nres[\"averages_away_conceded\"] = sum(d['away_conceded'] for d in averages.values() if d)\n\nprint(res)\n</code></pre>\n"}], "owner": {"reputation": 470, "user_id": 7828662, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ecb7e6431c6842ef843ca682707d11e0?s=128&d=identicon&r=PG&f=1", "display_name": "Sander bakker", "link": "https://stackoverflow.com/users/7828662/sander-bakker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 56570340, "answer_count": 1, "score": 0, "last_activity_date": 1560373613, "creation_date": 1560372693, "last_edit_date": 1560373516, "question_id": 56570192, "link": "https://stackoverflow.com/questions/56570192/how-to-use-the-sum-function-in-python3", "title": "How to use the sum function in Python3", "body": "<p>I'm trying to use the sum function multiple times after one another but I keep getting a error message. I wrote the following code:</p>\n\n<pre><code>averages[\"averages_home_goals\"] = sum(d['home_goals'] for d in averages.values() if d)\naverages[\"averages_away_goals\"] = sum(d['away_goals'] for d in averages.values() if d)\naverages[\"averages_home_conceded\"] = sum(d['home_conceded'] for d in averages.values() if d)\naverages[\"averages_away_conceded\"] = sum(d['away_conceded'] for d in averages.values() if d)\n\nprint(averages)\n</code></pre>\n\n<p>The averages variable looks like the following: </p>\n\n<pre><code>{\n    'Belconnen%20United': {\n        'home_goals': 4.0,\n        'away_goals': 1.0,\n        'home_conceded': 0.0,\n        'away_conceded': 2.1666666666666665,\n    },\n    'Canberra%20FC': {\n        'home_goals': 1.75,\n        'away_goals': 1.8,\n        'home_conceded': 2.0,\n        'away_conceded': 2.0,\n    },\n    # More data of a similar structure\n}\n</code></pre>\n\n<p>When I run this I get the following error: </p>\n\n<pre><code>TypeError: 'float' object is not subscriptable\n</code></pre>\n\n<p>The weird thing is; when I run only one of these 4 lines the code executes fine (I doesn't matter which line). I'm getting the error upon executing the <code>averages[\"averages_away_goals\"] = ...</code> statement</p>\n\n<p>Could anyone help me out? Giving variable d another name also doesn't work </p>\n"}, {"tags": ["python", "string", "list"], "comments": [{"owner": {"reputation": 2773, "user_id": 3220769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/36f8c4918c0be6de21e7f0f9c5a67068?s=128&d=identicon&r=PG&f=1", "display_name": "TomNash", "link": "https://stackoverflow.com/users/3220769/tomnash"}, "edited": false, "score": 1, "creation_date": 1560372753, "post_id": 56570177, "comment_id": 99719452, "body": "I would suggest switching to a dictionary data type for this, key would be the company name and value would be the list of provided emails."}], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 7748421, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k_DLGy2CsDA/AAAAAAAAAAI/AAAAAAAAGVA/eb95HsMnxYY/photo.jpg?sz=128", "display_name": "rmcknst2", "link": "https://stackoverflow.com/users/7748421/rmcknst2"}, "edited": false, "score": 0, "creation_date": 1560373058, "post_id": 56570247, "comment_id": 99719572, "body": "Is that company_contacts a list?"}, {"owner": {"reputation": 2773, "user_id": 3220769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/36f8c4918c0be6de21e7f0f9c5a67068?s=128&d=identicon&r=PG&f=1", "display_name": "TomNash", "link": "https://stackoverflow.com/users/3220769/tomnash"}, "reply_to_user": {"reputation": 153, "user_id": 7748421, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k_DLGy2CsDA/AAAAAAAAAAI/AAAAAAAAGVA/eb95HsMnxYY/photo.jpg?sz=128", "display_name": "rmcknst2", "link": "https://stackoverflow.com/users/7748421/rmcknst2"}, "edited": false, "score": 0, "creation_date": 1560373164, "post_id": 56570247, "comment_id": 99719607, "body": "<code>company_contacts</code> is a dictionary, <code>missing_emails</code> is a list"}, {"owner": {"reputation": 153, "user_id": 7748421, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k_DLGy2CsDA/AAAAAAAAAAI/AAAAAAAAGVA/eb95HsMnxYY/photo.jpg?sz=128", "display_name": "rmcknst2", "link": "https://stackoverflow.com/users/7748421/rmcknst2"}, "edited": false, "score": 0, "creation_date": 1560373199, "post_id": 56570247, "comment_id": 99719621, "body": "Is there a way to do this with company_contacts as a list?"}, {"owner": {"reputation": 2773, "user_id": 3220769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/36f8c4918c0be6de21e7f0f9c5a67068?s=128&d=identicon&r=PG&f=1", "display_name": "TomNash", "link": "https://stackoverflow.com/users/3220769/tomnash"}, "reply_to_user": {"reputation": 153, "user_id": 7748421, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k_DLGy2CsDA/AAAAAAAAAAI/AAAAAAAAGVA/eb95HsMnxYY/photo.jpg?sz=128", "display_name": "rmcknst2", "link": "https://stackoverflow.com/users/7748421/rmcknst2"}, "edited": false, "score": 1, "creation_date": 1560373390, "post_id": 56570247, "comment_id": 99719680, "body": "Added that solution"}, {"owner": {"reputation": 153, "user_id": 7748421, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k_DLGy2CsDA/AAAAAAAAAAI/AAAAAAAAGVA/eb95HsMnxYY/photo.jpg?sz=128", "display_name": "rmcknst2", "link": "https://stackoverflow.com/users/7748421/rmcknst2"}, "edited": false, "score": 0, "creation_date": 1560373475, "post_id": 56570247, "comment_id": 99719713, "body": "Thank you. And one last question. Does this remove those items from company_contacts or is it just copied to flagged?"}, {"owner": {"reputation": 2773, "user_id": 3220769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/36f8c4918c0be6de21e7f0f9c5a67068?s=128&d=identicon&r=PG&f=1", "display_name": "TomNash", "link": "https://stackoverflow.com/users/3220769/tomnash"}, "reply_to_user": {"reputation": 153, "user_id": 7748421, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k_DLGy2CsDA/AAAAAAAAAAI/AAAAAAAAGVA/eb95HsMnxYY/photo.jpg?sz=128", "display_name": "rmcknst2", "link": "https://stackoverflow.com/users/7748421/rmcknst2"}, "edited": false, "score": 0, "creation_date": 1560432055, "post_id": 56570247, "comment_id": 99740726, "body": "Updated to have them removed"}], "tags": [], "owner": {"reputation": 2773, "user_id": 3220769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/36f8c4918c0be6de21e7f0f9c5a67068?s=128&d=identicon&r=PG&f=1", "display_name": "TomNash", "link": "https://stackoverflow.com/users/3220769/tomnash"}, "is_accepted": true, "score": 1, "last_activity_date": 1560432042, "last_edit_date": 1560432042, "creation_date": 1560372963, "answer_id": 56570247, "question_id": 56570177, "link": "https://stackoverflow.com/questions/56570177/how-to-append-certain-items-to-a-new-list-if-a-specific-index-is-empty/56570247#56570247", "title": "How to append certain items to a new list if a specific index is empty", "body": "<p>Not sure what output you're going for, but this will return a list of company names with no emails</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>company_contacts = {'Company A': ['email1@companyA.com'],\n                   'Company B': ['email1@companyB.com', 'email2@companyB.com'],\n                   'Company C': []}\n\nmissing_emails = [company for company, emails in company_contacts.items() if not emails]\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>['Company C']\n</code></pre>\n\n<p>Using a list input:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>company_contacts = [['Company A', ['companyemail@email.com']],\n['Company B', ['companyemail@email.com','companyemail@email.com']],\n['Company C', []]]\n\nmissing_emails = [contact[0] for contact in company_contacts if not contact[1]]\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>['Company C']\n</code></pre>\n\n<p>If you want to remove, I'd do it without popping but create two lists: one that's the list of company with contacts (in essence pop) and one that's the list without contacts.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>company_with_contacts = []\ncompany_without_contacts = []\n[company_without_contacts.append(contact[0]) if not contact[1] else company_with_contacts.append(contact) for contact in company_contacts]\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>company_without_contacts = ['Company C']\ncompany_with_contacts = [['Company A', ['companyemail@email.com']],\n ['Company B', ['companyemail@email.com', 'companyemail@email.com']]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 45, "user_id": 8190203, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sanai.jpg?s=128&g=1", "display_name": "gagandeep", "link": "https://stackoverflow.com/users/8190203/gagandeep"}, "is_accepted": false, "score": 1, "last_activity_date": 1560375725, "creation_date": 1560375725, "answer_id": 56570739, "question_id": 56570177, "link": "https://stackoverflow.com/questions/56570177/how-to-append-certain-items-to-a-new-list-if-a-specific-index-is-empty/56570739#56570739", "title": "How to append certain items to a new list if a specific index is empty", "body": "<pre><code>company_details = [\n    ['Company Name A',['Company Email A']],\n    ['Company Name B',['Company Email B']],\n    ['Company Name C',['Company Email C']],\n    ['Company Name D',[]],\n    ['Company Name E',[]]\n]\n</code></pre>\n\n<p><strong>Using List Comprehension</strong></p>\n\n<pre><code>no_emails = [company[0] for company in company_details if not company[1]]\n\nprint(no_emails)\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>['Company Name D', 'Company Name E']\n</code></pre>\n\n<p><strong>Using Function</strong></p>\n\n<pre><code>def companies_without_emails(company_details):\n    '''\n    This will return a list of companies\n    without emails\n    '''\n    names = list()\n\n    for company in company_details:\n        if not company[1]:\n            names.append(company[0])\n    return names\n\nprint(companies_without_emails(company_details))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>['Company Name D', 'Company Name E']\n</code></pre>\n\n<p><strong>Using Inline Lambda Functions</strong></p>\n\n<p>We could remove companies without emails using this.</p>\n\n<pre><code>company_details = list(filter(lambda x: x[1],company_details))\n\nprint(company_details) \n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[['Company Name A', ['Company Email A']], ['Company Name B', ['Company Email B']], ['Company Name C', ['Company Email C']]]\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 7748421, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k_DLGy2CsDA/AAAAAAAAAAI/AAAAAAAAGVA/eb95HsMnxYY/photo.jpg?sz=128", "display_name": "rmcknst2", "link": "https://stackoverflow.com/users/7748421/rmcknst2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 56570247, "answer_count": 2, "score": 0, "last_activity_date": 1560432042, "creation_date": 1560372650, "last_edit_date": 1560373120, "question_id": 56570177, "link": "https://stackoverflow.com/questions/56570177/how-to-append-certain-items-to-a-new-list-if-a-specific-index-is-empty", "title": "How to append certain items to a new list if a specific index is empty", "body": "<p>I have a list of vendors and their emails. The emails are in their own list because some vendors have more than one point of contact. However some vendors haven't responded with a email contact so that field for that item is empty. It looks like this:</p>\n\n<pre><code>list1 = [['Company Name', ['companyemail@email.com']]\n['Company Name', ['companyemail@email.com','companyemail@email.com']]\n['Company Name', []]\n['Company Name', []]]\n</code></pre>\n\n<p>I already have an email filter function which detects the items that have no email and pops them:</p>\n\n<pre><code>for k in range(len(list1) -1, 0, -1):\n    if not list1[k][1]:\n        list1.pop(k)\n    return list1\n</code></pre>\n\n<p>However I want to copy those items to a new list for a reporter tool before I remove them. So I tried this but flagged always =[] when it shouldn't.</p>\n\n<pre><code>flagged=[]\nfor k in range(len(list1) -1, 0, -1):\n    if not list1[k][1]:\n        flagged.append(k)\n        list1.pop(k)\n    print(flagged)\n    return list1\n</code></pre>\n\n<p>My desired results would be having all the items that had no emails copied to the flagged list.</p>\n"}, {"tags": ["python", "optimization"], "comments": [{"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1560373016, "post_id": 56570166, "comment_id": 99719555, "body": "This can probably be done with NumPy."}, {"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 1, "creation_date": 1560373196, "post_id": 56570166, "comment_id": 99719619, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/35234680/weighted-smoothing-of-a-1d-array-python\">Weighted smoothing of a 1D array - Python</a>"}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1560373203, "post_id": 56570166, "comment_id": 99719622, "body": "How big is the list and how much is \u201csignificantly increased\u201d?"}], "answers": [{"tags": [], "owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "is_accepted": false, "score": 0, "last_activity_date": 1560373697, "creation_date": 1560373697, "answer_id": 56570392, "question_id": 56570166, "link": "https://stackoverflow.com/questions/56570166/is-there-a-way-to-speed-up-this-smoothing-operation-in-python/56570392#56570392", "title": "Is there a way to speed up this smoothing operation in python?", "body": "<p>You can avoid all slicing and copying by adding and subtracting 1/3 of each value. (Floating point error makes this not exactly equivalent to your original, but it should be close enough in normal cases.) I don\u2019t know if it ends up faster, but it seems worth a shot:</p>\n\n<pre><code>window_mean = mean(nums[:3])\nsmoothednums = [mean(nums[:2]), window_mean]\n\nfor i in range(2, len(nums) - 1):\n    window_mean -= nums[i - 2] / 3\n    window_mean += nums[i + 1] / 3\n    smoothednums.append(window_mean)\n\nsmoothednums.append(mean(nums[-2:]))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8467, "user_id": 251276, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8a4c6e3d9ac6754616e728de1069d32e?s=128&d=identicon&r=PG", "display_name": "Colin", "link": "https://stackoverflow.com/users/251276/colin"}, "edited": false, "score": 0, "creation_date": 1560375161, "post_id": 56570483, "comment_id": 99720188, "body": "Thanks. For future readers, the mode=&#39;same&#39; parameter is required to get the same result as my original code. The default parameter will give different results."}], "tags": [], "owner": {"reputation": 1257, "user_id": 2221270, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/9Ce1H.jpg?s=128&g=1", "display_name": "Alex Taylor", "link": "https://stackoverflow.com/users/2221270/alex-taylor"}, "is_accepted": true, "score": 2, "last_activity_date": 1560374266, "creation_date": 1560374266, "answer_id": 56570483, "question_id": 56570166, "link": "https://stackoverflow.com/questions/56570166/is-there-a-way-to-speed-up-this-smoothing-operation-in-python/56570483#56570483", "title": "Is there a way to speed up this smoothing operation in python?", "body": "<p><a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.convolve.html\" rel=\"nofollow noreferrer\">https://docs.scipy.org/doc/numpy/reference/generated/numpy.convolve.html</a></p>\n\n<p>You are describing convolution with a uniform (box) filter:</p>\n\n<pre><code>smoothednums = np.convolve(nums, [1/3, 1/3, 1/3]);\n</code></pre>\n\n<p>For larger windows, you might consider looking at the summed area table algorithm which is O(1) in window size:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/25557973/efficient-summed-area-table-calculation-with-numpy\">Efficient summed Area Table Calculation with Numpy</a></p>\n"}], "owner": {"reputation": 8467, "user_id": 251276, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8a4c6e3d9ac6754616e728de1069d32e?s=128&d=identicon&r=PG", "display_name": "Colin", "link": "https://stackoverflow.com/users/251276/colin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 56570483, "answer_count": 2, "score": 0, "last_activity_date": 1560374266, "creation_date": 1560372578, "question_id": 56570166, "link": "https://stackoverflow.com/questions/56570166/is-there-a-way-to-speed-up-this-smoothing-operation-in-python", "title": "Is there a way to speed up this smoothing operation in python?", "body": "<p>I'm doing smoothing of some sequential integer data that I have in a list. My smoothing method is to replace each number with the mean of that number and its neighbors. I'm currently doing that with this code:</p>\n\n<pre><code>from statistics import mean\nsmoothednums = [mean(nums[:2])] + [mean(nums[i-1:i+2]) for i in range(1,len(nums))]\n</code></pre>\n\n<p>This has significantly increased the runtime of my script. Is there a better way to do this operation?</p>\n"}, {"tags": ["python", "docker", "presto"], "answers": [{"tags": [], "owner": {"reputation": 5535, "user_id": 639256, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/0e94071b1690780ee56ee7bd8fdb6805?s=128&d=identicon&r=PG", "display_name": "Ashish", "link": "https://stackoverflow.com/users/639256/ashish"}, "is_accepted": true, "score": 0, "last_activity_date": 1560759820, "creation_date": 1560759820, "answer_id": 56627443, "question_id": 56570146, "link": "https://stackoverflow.com/questions/56570146/how-to-access-presto-database-within-dockerized-python-script/56627443#56627443", "title": "How to access presto database within dockerized python script", "body": "<p>It looks like a networking issue. You can review your docker setting and this problem can be resolved.</p>\n\n<pre><code>The host has a changing IP address (or none if you have no network access). \nFrom 18.03 onwards our recommendation is to connect to the special DNS name host.docker.internal, which resolves to the internal IP address used by the host.\nThe gateway is also reachable as gateway.docker.internal\n</code></pre>\n\n<p>Reference links:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/28056522/access-host-database-from-a-docker-container\">Access host database from a docker container</a></p>\n\n<p><a href=\"https://docs.docker.com/engine/reference/commandline/run/\" rel=\"nofollow noreferrer\">https://docs.docker.com/engine/reference/commandline/run/</a></p>\n"}], "owner": {"reputation": 45, "user_id": 11639070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KCnTK.jpg?s=128&g=1", "display_name": "Chris Combs", "link": "https://stackoverflow.com/users/11639070/chris-combs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 56627443, "answer_count": 1, "score": 0, "last_activity_date": 1560759820, "creation_date": 1560372451, "question_id": 56570146, "link": "https://stackoverflow.com/questions/56570146/how-to-access-presto-database-within-dockerized-python-script", "title": "How to access presto database within dockerized python script", "body": "<p>I'm attempting to dockerize a python script someone at my workplace wrote, but it makes several calls to our presto database. When I call the script locally, I simply have to entire my password and it works, however running the script once it has been dockerized results in a 401 Error, invalid credentials. What do I need to do to make sure the dockerized script can access the certificate?</p>\n\n<p>I checked to make sure the presto.pem file is in the directory of the dockerized script, and I know that the script is clearly accessing the presto database since it's a credential issue. I changed to a different wifi that shouldn't have access to the database and it started giving me a different error, so I know that's not the problem.</p>\n\n<p>Here is my Dockerfile:</p>\n\n<p>FROM python:3.7</p>\n\n<p>WORKDIR /app</p>\n\n<p>COPY . /app</p>\n\n<p>RUN pip install -r requirements.txt</p>\n\n<p>ENTRYPOINT [\"python\", \"app.py\", \"--website-id=556f210de4b00a3ed267bc91\"]</p>\n"}, {"tags": ["python", "inheritance", "python-2.x"], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 234826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/000d87e58fbfca0c0ae888e9e0d81508?s=128&d=identicon&r=PG", "display_name": "The Altruist", "link": "https://stackoverflow.com/users/234826/the-altruist"}, "edited": false, "score": 0, "creation_date": 1560400541, "post_id": 56570396, "comment_id": 99724995, "body": "Not what I was looking for, but I guess simpler is better."}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": true, "score": 3, "last_activity_date": 1560373739, "creation_date": 1560373739, "answer_id": 56570396, "question_id": 56570119, "link": "https://stackoverflow.com/questions/56570119/in-python2-how-to-force-a-child-class-method-to-call-a-parent-method-without-ex/56570396#56570396", "title": "In Python2, how to force a child class method to call a parent method without explicitly requiring the end user to include it?", "body": "<p>Rather than override the method, defer the real work to a callback method called from <code>do_something</code>. Then there is no reason to override <code>do_something</code>, and you can just put the call to <code>_important_method</code> directly in its body.</p>\n\n<pre><code>class ParentClass(object):\n    def __init__(self, *args, **kwargs):\n        self._personal_message = \"Parent class says:\"\n        self._important_message = \"I'm important!\"\n\n    # The method that NEEDS to be run in all instances\n    # of ParentClass and its subclasses\n    def _important_method(self):\n        print(self._important_message)\n\n    # This doesn't get overriden; it's a fixed entry point to do_body\n    def do_something(self):\n        self.do_body()\n        self._important_method()\n\n    # This shouldn't (need to) be called directly\n    def do_body(self):\n        print(self._personal_message)\n\n\nclass ChildClass(ParentClass):\n    def do_body(self):\n        print(self._personal_message)  # or super().do_body()\n        self.do_something_else()\n\n    def do_something_else(self):\n        print(\"I am blissfully naive.\")\n</code></pre>\n\n<p>Then the following still works</p>\n\n<pre><code>child = ChildClass()\nchild.do_something()\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 234826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/000d87e58fbfca0c0ae888e9e0d81508?s=128&d=identicon&r=PG", "display_name": "The Altruist", "link": "https://stackoverflow.com/users/234826/the-altruist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 56570396, "answer_count": 1, "score": 1, "last_activity_date": 1560376044, "creation_date": 1560372347, "last_edit_date": 1560376044, "question_id": 56570119, "link": "https://stackoverflow.com/questions/56570119/in-python2-how-to-force-a-child-class-method-to-call-a-parent-method-without-ex", "title": "In Python2, how to force a child class method to call a parent method without explicitly requiring the end user to include it?", "body": "<p>A parent class I'm writing requires some specific internal cleanup after usage. The child class has its own cleanup to do, but the parent's cleanup function must be run afterward. Obviously, a call to super would solve this, but I'd like this to be as simple as possible on the child class's side.</p>\n\n<p>I tried decorating the parent method. This did not work.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># The parent class whose inner-workings I don't expect the end user to understand\nclass ParentClass(object):\n    def __init__(self, *args, **kwargs):\n        self._personal_message = \"Parent class says:\"\n        self._important_message = \"I'm important!\"\n\n    # The method that NEEDS to be run in all instances of ParentClass and its subclasses\n    def _important_method(self):\n        print(self._important_message)\n\n    # The decorator I thought would work\n    def _pretty_decoration(func):\n        def func_wrapper(self):\n            func_self = func(self)\n            self._important_method()\n            return func_self\n        return func_wrapper\n\n    # The decorated function that will be overridden by the child class\n    @_pretty_decoration\n    def do_something(self):\n        print(self._personal_message)\n\n    # Make the decorator static\n    _pretty_decoration = staticmethod(_pretty_decoration)\n\n\n# The blissfully naive Child class\nclass ChildClass(ParentClass):\n    def __init__(self, *args, **kwargs):\n        super(ChildClass, self).__init__(*args, **kwargs)\n        self._personal_message = \"Child class says:\"\n\n    # The overriding method\n    def do_something(self):\n        print(self._personal_message)\n        self.do_something_else()\n\n    def do_something_else(self):\n        print(\"I am blissfully naive.\")\n\n\n# The test drive\nparent = ParentClass()\nparent.do_something()\nchild = ChildClass()\nchild.do_something()\n</code></pre>\n\n<p>In this example, I'm getting:</p>\n\n<pre><code>Parent class says:\nI'm important!\nChild class says:\nI am blissfully naive.\n</code></pre>\n\n<p>whereas I was hoping to get:</p>\n\n<pre><code>Parent class says:\nI'm important!\nChild class says:\nI am blissfully naive.\nI'm important!\n</code></pre>\n\n<p>What should I be doing for the expected result?</p>\n"}, {"tags": ["python", "numpy", "opencv", "image-processing"], "comments": [{"owner": {"reputation": 454, "user_id": 4901345, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PifSu8T4ie0/AAAAAAAAAAI/AAAAAAAAAFo/lNFxKlR3yuw/photo.jpg?sz=128", "display_name": "Charles Parr", "link": "https://stackoverflow.com/users/4901345/charles-parr"}, "edited": false, "score": 1, "creation_date": 1560372600, "post_id": 56570106, "comment_id": 99719391, "body": "Are you trying to ultimately trying to achieve a grayscale image? If so try <code>gray_image = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)</code>"}, {"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1560373386, "post_id": 56570106, "comment_id": 99719679, "body": "If the image you have included in your question is the starting image, you should be aware that it has 790 unique colours in it..."}, {"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1560374342, "post_id": 56570106, "comment_id": 99719958, "body": "Maybe start another question about the way you create this image... has it been saved as a JPEG at some stage in its life? Why does it have an unused alpha channel?"}, {"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1560406565, "post_id": 56570106, "comment_id": 99726775, "body": "That seems very unlikely. Did you count the number of greys with <code>np.unique()</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 3, "user_id": 8186456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c2e18b2d73324be1ebe96496c0bdcd2?s=128&d=identicon&r=PG&f=1", "display_name": "Code_Buddy9000", "link": "https://stackoverflow.com/users/8186456/code-buddy9000"}, "is_accepted": false, "score": 0, "last_activity_date": 1560373683, "creation_date": 1560373683, "answer_id": 56570386, "question_id": 56570106, "link": "https://stackoverflow.com/questions/56570106/pixel-intensity-of-rgb-images-and-how-to-multiply-it-with-integers-to-view-shade/56570386#56570386", "title": "Pixel intensity of RGB images and how to multiply it with integers to view shades of gray", "body": "<p>I think the edges are throwing it off. Try writing a function to set the pixels that make up the edges of your shapes into the exact color of that shape.</p>\n"}, {"tags": [], "owner": {"reputation": 25800, "user_id": 11162165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5kgh.png?s=128&g=1", "display_name": "nathancy", "link": "https://stackoverflow.com/users/11162165/nathancy"}, "is_accepted": false, "score": 0, "last_activity_date": 1560388182, "creation_date": 1560388182, "answer_id": 56572139, "question_id": 56570106, "link": "https://stackoverflow.com/questions/56570106/pixel-intensity-of-rgb-images-and-how-to-multiply-it-with-integers-to-view-shade/56572139#56572139", "title": "Pixel intensity of RGB images and how to multiply it with integers to view shades of gray", "body": "<p>I'm not completely sure what you're asking for here but to determine the RGB pixel intensity of images, you can isolate each <code>R</code>, <code>G</code>, and <code>B</code> channel while setting the other channels to 0.</p>\n\n<p>Original image</p>\n\n<p><a href=\"https://i.stack.imgur.com/SGBMq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SGBMq.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>import cv2\n\nimage = cv2.imread('pikachu_smile.png')\n\nblue = image.copy()\n# Set green and red channels to 0\nblue[:, :, 1] = 0\nblue[:, :, 2] = 0\n\ngreen = image.copy() \n# Set blue and red channels to 0\ngreen[:, :, 0] = 0\ngreen[:, :, 2] = 0\n\nred = image.copy()\n# Set blue and green channels to 0\nred[:, :, 0] = 0\nred[:, :, 1] = 0\n\ncv2.imshow('blue', blue)\ncv2.imshow('green', green)\ncv2.imshow('red', red)\n\ncv2.waitKey(0)\n</code></pre>\n\n<p>Isolated blue (left), green (middle), and red (right) channels</p>\n\n<p><a href=\"https://i.stack.imgur.com/hT6lS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hT6lS.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/cO398.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cO398.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/CLP6D.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CLP6D.png\" alt=\"enter image description here\"></a></p>\n\n<p>To increase the intensity of a specific channel, you can add a fixed value to the entire channel. For example, with the green channel</p>\n\n<pre><code>green[:, :, 1] += 40\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/xmIzK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xmIzK.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 11635123, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G9iQR.png?s=128&g=1", "display_name": "BOT-Singh", "link": "https://stackoverflow.com/users/11635123/bot-singh"}, "edited": false, "score": 0, "creation_date": 1560495795, "post_id": 56576159, "comment_id": 99762961, "body": "You got me the result, but I had a different approach towards it. I used cv2.inrange() to swap green with rgb(1,1,1), brown with rgb(2,2,2) and blue with rgb(3,3,3). This gave me a black image and when I multiplied it with 85, I got a similar image as your output.  I love your solution and would try it too."}], "tags": [], "owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "is_accepted": true, "score": 1, "last_activity_date": 1560447210, "last_edit_date": 1560447210, "creation_date": 1560413622, "answer_id": 56576159, "question_id": 56570106, "link": "https://stackoverflow.com/questions/56570106/pixel-intensity-of-rgb-images-and-how-to-multiply-it-with-integers-to-view-shade/56576159#56576159", "title": "Pixel intensity of RGB images and how to multiply it with integers to view shades of gray", "body": "<p>There are a number of issues with your question and assumptions. </p>\n\n<hr>\n\n<h1>You cannot count colours with <code>np.unique(image)</code></h1>\n\n<p>You cannot count the colours in an image with <code>np.unique(im)</code>. Let's see why by making a random image with just 4 intensities: 0,1,2 and 3.</p>\n\n<pre><code>import numpy as np\nimport cv2\n\n# Ensure repeatable, deterministic randomness!\nnp.random.seed(42)\n\n# Make a random image\nim = np.random.randint(0,4,(480,640,3), dtype=np.uint8)\n</code></pre>\n\n<p>That looks like this where each row is the RGB triplet for one pixel:</p>\n\n<pre><code>array([[[2, 2, 3],\n    [3, 2, 1],\n    [2, 2, 0],\n    ...,\n    [3, 3, 2],\n    [0, 0, 1],\n    [1, 1, 1]],\n    ...,\n    [3, 3, 1],\n    [2, 3, 0],\n    [0, 1, 3]]], dtype=uint8)\n</code></pre>\n\n<p>Now, if you try and get the unique colours like this, it will not work, because each colour is a <strong>combination</strong> of 3 intensities:</p>\n\n<pre><code>np.unique(im)    # prints: array([0, 1, 2, 3], dtype=uint8)\n</code></pre>\n\n<p>Whereas, if you want the number of unique colours, you need to look for the number of unique combinations of three RGB/BGR values:</p>\n\n<pre><code>np.unique(im.reshape(-1, im.shape[2]), axis=0)\n</code></pre>\n\n<p>which gives a vector of the unique RGB/BGR triplets in the image - each row is a unique colour combination:</p>\n\n<pre><code>array([[0, 0, 0],\n       [0, 0, 1],\n       [0, 0, 2],\n       [0, 0, 3],\n       [0, 1, 0],\n       [0, 1, 1],\n       [0, 1, 2],\n       [0, 1, 3],\n       [0, 2, 0],\n       [0, 2, 1],\n       [0, 2, 2],\n       [0, 2, 3],\n       [0, 3, 0],\n       [0, 3, 1],\n       [0, 3, 2],\n       [0, 3, 3],\n       [1, 0, 0],\n       [1, 0, 1],\n       [1, 0, 2],\n       [1, 0, 3],\n       [1, 1, 0],\n       [1, 1, 1],\n       [1, 1, 2],\n       [1, 1, 3],\n       [1, 2, 0],\n       [1, 2, 1],\n       [1, 2, 2],\n       [1, 2, 3],\n       [1, 3, 0],\n       [1, 3, 1],\n       [1, 3, 2],\n       [1, 3, 3],\n       [2, 0, 0],\n       [2, 0, 1],\n       [2, 0, 2],\n       [2, 0, 3],\n       [2, 1, 0],\n       [2, 1, 1],\n       [2, 1, 2],\n       [2, 1, 3],\n       [2, 2, 0],\n       [2, 2, 1],\n       [2, 2, 2],\n       [2, 2, 3],\n       [2, 3, 0],\n       [2, 3, 1],\n       [2, 3, 2],\n       [2, 3, 3],\n       [3, 0, 0],\n       [3, 0, 1],\n       [3, 0, 2],\n       [3, 0, 3],\n       [3, 1, 0],\n       [3, 1, 1],\n       [3, 1, 2],\n       [3, 1, 3],\n       [3, 2, 0],\n       [3, 2, 1],\n       [3, 2, 2],\n       [3, 2, 3],\n       [3, 3, 0],\n       [3, 3, 1],\n       [3, 3, 2],\n       [3, 3, 3]], dtype=uint8)\n</code></pre>\n\n<p>Or, as a simple number of unique colours:</p>\n\n<pre><code>len(np.unique(im.reshape(-1, im.shape[2]), axis=0))    # prints 64\n</code></pre>\n\n<p>So, for your image:</p>\n\n<pre><code># Open image\nim = cv2.imread('image.png',cv2.IMREAD_UNCHANGED)\n\n# Count unique colours\nlen(np.unique(im.reshape(-1, im.shape[2]), axis=0)    # prints 790\n</code></pre>\n\n<hr>\n\n<h1>There are more colours than you expect</h1>\n\n<p>Why do I have more colours than I expect? The two most common reasons are:</p>\n\n<ul>\n<li>the image was saved as a JPEG</li>\n<li>there is text or drawn shapes that were anti-aliased</li>\n</ul>\n\n<p>Let's look at how saving as a JPEG messes you up!</p>\n\n<pre><code># Load image and count colours\nim = cv2.imread('image.png',cv2.IMREAD_UNCHANGED)\nlen(np.unique(im.reshape(-1, im.shape[2]), axis=0))    # prints 790\n\n# Save as JPEG\ncv2.imwrite('temp.jpg',im)\n\n# Reload and recount just the same\nim = cv2.imread('temp.jpg',cv2.IMREAD_UNCHANGED)\nlen(np.unique(im.reshape(-1, im.shape[2]), axis=0))    # prints 4666 !!!\n</code></pre>\n\n<hr>\n\n<h1>How can I palettise an image - (reduce colours to a fixed palette)?</h1>\n\n<p>If you want to palettise your image to your own specific palette, firstly you need to specify your palette in BGR order (<code>!</code>) to match OpenCV's ordering:</p>\n\n<pre><code>palette = np.array([\n   [0,0,0],                # Black\n   [93,136,106],           # Green\n   [208,224,64],           # Blue\n   [85,124,168]],          # Brown\n   dtype=np.uint8)\n</code></pre>\n\n<p>Then read your image discarding the completely pointless alpha channel:</p>\n\n<pre><code>test = cv2.imread(\"image.png\",cv2.IMREAD_COLOR)\n</code></pre>\n\n<p>Then calculate the distance to each palette entry from each pixel:</p>\n\n<pre><code>distance = np.linalg.norm(test[:,:,None] - palette[None,None,:], axis=3)\n</code></pre>\n\n<p>Then choose whichever one of the palette colours is nearest for each pixel:</p>\n\n<pre><code>palettised = np.argmin(distance, axis=2).astype(np.uint8)\n</code></pre>\n\n<p>Your image is now in the array <code>palettised</code> and stored at each pixel location is the index of the nearest colour in your palette - so, as your palette has 4 entries (0..3), all elements of your image are 0, 1, 2 or 3.</p>\n\n<p>So, now you can multiply by 85 with:</p>\n\n<pre><code>result = palettised * 85\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Z8uQO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Z8uQO.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 43, "user_id": 11635123, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G9iQR.png?s=128&g=1", "display_name": "BOT-Singh", "link": "https://stackoverflow.com/users/11635123/bot-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 799, "favorite_count": 0, "accepted_answer_id": 56576159, "answer_count": 3, "score": 4, "last_activity_date": 1560447210, "creation_date": 1560372271, "last_edit_date": 1560372464, "question_id": 56570106, "link": "https://stackoverflow.com/questions/56570106/pixel-intensity-of-rgb-images-and-how-to-multiply-it-with-integers-to-view-shade", "title": "Pixel intensity of RGB images and how to multiply it with integers to view shades of gray", "body": "<p>I have an RGB image that has 4 distinct colors Black(0,0,0) as background, Green(106,136,93) Blue(64,224,208) &amp; Brown(168,124,85). when I read the image as a grayscale and use np.unique() it returns a huge list of pixel intensities.\nBut in reality, there are just 4 intensities i.e[0,1,2,3] Black, Green, Blue &amp; Brown.</p>\n\n<pre><code>import cv2\nimport numpy as np\n\ntest = cv2.imread(\"test-BlackBG.png\",0) #test image \n\nresults = np.unique(test)     #returns [0,1,2,3,4,5,6,7,8...........132]\nprint(test.shape)             #returns (480, 640)\nprint(results)\ncv2.imshow(\"image\",test)\ncv2.waitKey()\ncv2.destroyAllWindows()\n</code></pre>\n\n<p>Expected Result: when I multiply the image with 85, it should show me all the 3 intensities in different shades of gray.</p>\n\n<p><img src=\"https://i.stack.imgur.com/lvRx2.png\" alt=\"This is the Input image-&quot;test-BlackBG.png&quot;, Stackoverflow wont let me post an image in the question maybe because I&#39;m new to it.\"></p>\n"}, {"tags": ["python", "pandas", "nlp", "chat"], "comments": [{"owner": {"reputation": 175, "user_id": 7370689, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/e18da19640dcfd1575df84cb5c89b009?s=128&d=identicon&r=PG&f=1", "display_name": "Maiia S.", "link": "https://stackoverflow.com/users/7370689/maiia-s"}, "edited": false, "score": 0, "creation_date": 1560373404, "post_id": 56570060, "comment_id": 99719689, "body": "Yes, basically splitting overall transcript into two parts based on origination - bot or chatter."}, {"owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 0, "creation_date": 1560373407, "post_id": 56570060, "comment_id": 99719690, "body": "can you print <code>df.to_dict</code> and post the values above? your data structure is not clear to me."}, {"owner": {"reputation": 175, "user_id": 7370689, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/e18da19640dcfd1575df84cb5c89b009?s=128&d=identicon&r=PG&f=1", "display_name": "Maiia S.", "link": "https://stackoverflow.com/users/7370689/maiia-s"}, "reply_to_user": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 0, "creation_date": 1560373598, "post_id": 56570060, "comment_id": 99719747, "body": "I&#39;m not sure what you mean, I&#39;m sorry. To clarify, currently the entire conversation for each of the instances is stored as one long string with pointers to BOT or CHATTER, and I would like to have two columns instead - one with all BOT messages, and the other with all CHATTER messages. Thus, the output should now contain three columns instead of two"}, {"owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 0, "creation_date": 1560373716, "post_id": 56570060, "comment_id": 99719776, "body": "Ah okay, that&#39;s quite doable, is &#39;abcdef |&#39; a row or column ?"}, {"owner": {"reputation": 175, "user_id": 7370689, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/e18da19640dcfd1575df84cb5c89b009?s=128&d=identicon&r=PG&f=1", "display_name": "Maiia S.", "link": "https://stackoverflow.com/users/7370689/maiia-s"}, "reply_to_user": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 0, "creation_date": 1560373861, "post_id": 56570060, "comment_id": 99719814, "body": "abcdef is a Conversation_ID for the first observation here"}, {"owner": {"reputation": 175, "user_id": 7370689, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/e18da19640dcfd1575df84cb5c89b009?s=128&d=identicon&r=PG&f=1", "display_name": "Maiia S.", "link": "https://stackoverflow.com/users/7370689/maiia-s"}, "reply_to_user": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 0, "creation_date": 1560374009, "post_id": 56570060, "comment_id": 99719856, "body": "I provided a simplified example of how the data structure looks like. Here it is separated with pipes, but in my code it is a Pandas dataframe with two series - one for Conversation_ID, and the other for Transcript (both are strings)"}], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 7370689, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/e18da19640dcfd1575df84cb5c89b009?s=128&d=identicon&r=PG&f=1", "display_name": "Maiia S.", "link": "https://stackoverflow.com/users/7370689/maiia-s"}, "edited": false, "score": 0, "creation_date": 1560384153, "post_id": 56570656, "comment_id": 99722181, "body": "Thank for you help! Apparently, I needed to be more clear. Please find my edited question above."}, {"owner": {"reputation": 175, "user_id": 7370689, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/e18da19640dcfd1575df84cb5c89b009?s=128&d=identicon&r=PG&f=1", "display_name": "Maiia S.", "link": "https://stackoverflow.com/users/7370689/maiia-s"}, "edited": false, "score": 0, "creation_date": 1560384524, "post_id": 56570656, "comment_id": 99722244, "body": "There are only two rows and two columns in my sample dataframe. First row is column names, and the second row is the only observation here -&gt; conversation id followed by a very long string that contains entire conversation script."}, {"owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "reply_to_user": {"reputation": 175, "user_id": 7370689, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/e18da19640dcfd1575df84cb5c89b009?s=128&d=identicon&r=PG&f=1", "display_name": "Maiia S.", "link": "https://stackoverflow.com/users/7370689/maiia-s"}, "edited": false, "score": 0, "creation_date": 1560385355, "post_id": 56570656, "comment_id": 99722395, "body": "Ah got it! I will do it first thing tomorrow morning, wife&#39;s banned me from the laptop!"}], "tags": [], "owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1560375194, "creation_date": 1560375194, "answer_id": 56570656, "question_id": 56570060, "link": "https://stackoverflow.com/questions/56570060/splitting-bot-records-from-chatter-records/56570656#56570656", "title": "Splitting Bot Records from Chatter Records", "body": "<p>If i understand correctly, </p>\n\n<pre><code>df = pd.read_clipboard(sep='|')\ndf['Transcript'] = df['Conversation_ID'].str.split(':',expand=True)[1] # split by delim.\ndf['Conversation_ID'] = df['Conversation_ID'].str.split(':',expand=True)[0]\nprint(df)\n    Conversation_ID Transcript\n0   abcdef  None\n1   BOT Some text.\n2   CHATTER Some text.\n3   BOT Some text.\n4   BOT Some text.\n5   CHATTER Some text.\n6   BOT Some text.\n7   BOT Some text.\n</code></pre>\n\n<p>and for your intended result : </p>\n\n<pre><code>new_df = (pd.crosstab(df['Conversation_ID'].iloc[0],\n         df['Conversation_ID'].iloc[1:],\n         values=df['Transcript']\n        ,aggfunc='sum')).rename_axis('')\nprint(new_df)\n\n\nConversation_ID     BOT          CHATTER\nabcdef              Some text. Some text. Some text. Some text. S...    Some text. Some text.\n</code></pre>\n"}], "owner": {"reputation": 175, "user_id": 7370689, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/e18da19640dcfd1575df84cb5c89b009?s=128&d=identicon&r=PG&f=1", "display_name": "Maiia S.", "link": "https://stackoverflow.com/users/7370689/maiia-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560384076, "creation_date": 1560371999, "last_edit_date": 1560384076, "question_id": 56570060, "link": "https://stackoverflow.com/questions/56570060/splitting-bot-records-from-chatter-records", "title": "Splitting Bot Records from Chatter Records", "body": "<p>I have raw chat bot transcripts, and before doing any sentiment analysis, I would like to separate Bot records from Chatter records.  </p>\n\n<p>Data is already in a dataframe, and looks like the following:</p>\n\n<pre><code>Conversation_ID | Transcript\nabcdef | BOT: Some text. CHATTER: Some text. BOT: Some text. BOT: Some text. CHATTER: Some text. BOT: Some text. BOT: Some text.\n</code></pre>\n\n<p>The result should look like:</p>\n\n<pre><code>Conversation_ID | Transcript_BOT | Transcript_CHATTER\nabcdef | Some text. Some text. Some text. Some text. Some text. | Some text. Some text.\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 7729, "user_id": 4718350, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-CxgNhC_5nUE/AAAAAAAAAAI/AAAAAAAAP78/9FTapxcd2dY/photo.jpg?sz=128", "display_name": "Chris", "link": "https://stackoverflow.com/users/4718350/chris"}, "edited": false, "score": 1, "creation_date": 1560371929, "post_id": 56570033, "comment_id": 99719141, "body": "you could try converting it to a string"}, {"owner": {"reputation": 6583, "user_id": 10426037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6723e3123b9a13d6360d1ee755f8728?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/10426037/valentino"}, "edited": false, "score": 1, "creation_date": 1560372885, "post_id": 56570033, "comment_id": 99719500, "body": "I flagged the wrong duplicate, so I retracted and cannot raise a new duplicate flag. This one is the real dupe: <a href=\"https://stackoverflow.com/questions/12877189/float64-with-pandas-to-csv\" title=\"float64 with pandas to csv\">stackoverflow.com/questions/12877189/float64-with-pandas-to-&zwnj;&#8203;csv</a>"}], "owner": {"reputation": 11, "user_id": 10855572, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212895502172229/picture?type=large", "display_name": "Erik Gutierrez", "link": "https://stackoverflow.com/users/10855572/erik-gutierrez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "closed_date": 1561589929, "answer_count": 0, "score": 0, "last_activity_date": 1560371872, "creation_date": 1560371872, "question_id": 56570033, "link": "https://stackoverflow.com/questions/56570033/how-do-i-export-pandas-df-to-csv-but-keep-column-rounded-to-2-decimal-places", "closed_reason": "Duplicate", "title": "How do I export Pandas DF to CSV but keep column rounded to 2 decimal places?", "body": "<p>Currently I have a daily process where I have to  open a csv file via excel and make 1 column 2 decimal places and another column I must fill in with leading zeroes to meet an 8 character requirement.  I've written code to edit this in Pandas DF. The issue I have is when I go to export. It does not keep the edits (2 decimal place and leading zeroes). </p>\n\n<p>Below is the code I've written to complete this. </p>\n\n<pre><code>import pandas as pd\nfile = r\"C:\\Users\\O34639\\Desktop\\scripts\\2018.19 P10_Gift_Card.csv\"\n\ncol_names = ['A','B','C','D','E','F']\ndf = pd.read_csv(file, names = col_names, header = None)\n\n# I need to make col D equal to 2 decimal places and col C 8 \n#characters by filling 0's up front\n\nprint(df)\n\nA        B        C            D          E            F \n5145.0   Vendor   12345678.0   419.85     vendorpmt    100.0\n2015.0   Vendor   12356.0      600.5      vendorpmt    100.0 \n\ndf[['A','C']] = df[['A','C']].astype(str)\ndf['C'] = df.C.str.zfill(10)\ndf['A'] = df['A'].str[:-2]\ndf['C'] = df['C'].str[:-2]\ndf['F'] = df['F'].astype('str').str[:-2]\n\nprint(df)\n\nA       B         C           D         E            F  \n5145    Vendor    12345678    419.85    vendorpmt    100\n2015    Vendor    00123456    600.5     vendorpmt    100\n\n\ndf.dtypes\nA   object\nB   object\nC   object\nD   float64\nE   object\nF   object\n\n\ndf['D'] = df['D'].round(2)\n\nprint(df)\n\n  A       B         C           D         E            F  \n5145    Vendor    12345678    419.85    vendorpmt    100\n2015    Vendor    00123456    600.50     vendorpmt    100\n\n# the df above looks good, so now I will export back to csv \n\n df.to_csv('testcsv.csv', header = False, index = False, float_format = '%.2f')\n</code></pre>\n\n<p>when I go to open the file, it does not keep the leading zeroes or the two decimal place for the value in column D '600.50'. </p>\n\n<p>I've searched online but can't figure out where I am going wrong. </p>\n"}, {"tags": ["python", "plotly", "plotly-dash"], "comments": [{"owner": {"reputation": 853, "user_id": 6655150, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3poXy.png?s=128&g=1", "display_name": "Kostas Mouratidis", "link": "https://stackoverflow.com/users/6655150/kostas-mouratidis"}, "edited": false, "score": 0, "creation_date": 1560372331, "post_id": 56569959, "comment_id": 99719287, "body": "How exactly do you want your dropdown to work? What data do you want it to hide/show based on what choices? Can you share some data or use something that we can test on?"}, {"owner": {"reputation": 2015, "user_id": 8372455, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7937214051961aa38cd1b42a16a599d0?s=128&d=identicon&r=PG&f=1", "display_name": "HenryHub", "link": "https://stackoverflow.com/users/8372455/henryhub"}, "reply_to_user": {"reputation": 853, "user_id": 6655150, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3poXy.png?s=128&g=1", "display_name": "Kostas Mouratidis", "link": "https://stackoverflow.com/users/6655150/kostas-mouratidis"}, "edited": false, "score": 0, "creation_date": 1560372961, "post_id": 56569959, "comment_id": 99719530, "body": "I was hoping in the drop down the person could select between the points <code>HWST, HWRT, OAT</code> whether they want to see all 3 on a plot or just one/two.."}, {"owner": {"reputation": 2015, "user_id": 8372455, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7937214051961aa38cd1b42a16a599d0?s=128&d=identicon&r=PG&f=1", "display_name": "HenryHub", "link": "https://stackoverflow.com/users/8372455/henryhub"}, "reply_to_user": {"reputation": 853, "user_id": 6655150, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3poXy.png?s=128&g=1", "display_name": "Kostas Mouratidis", "link": "https://stackoverflow.com/users/6655150/kostas-mouratidis"}, "edited": false, "score": 0, "creation_date": 1560373056, "post_id": 56569959, "comment_id": 99719571, "body": "I have the data in this github repo, thank you for any help you can give me. <a href=\"https://github.com/bbartling/Heating-Plant-Analysis\" rel=\"nofollow noreferrer\">github.com/bbartling/Heating-Plant-Analysis</a>"}, {"owner": {"reputation": 2015, "user_id": 8372455, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7937214051961aa38cd1b42a16a599d0?s=128&d=identicon&r=PG&f=1", "display_name": "HenryHub", "link": "https://stackoverflow.com/users/8372455/henryhub"}, "reply_to_user": {"reputation": 853, "user_id": 6655150, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3poXy.png?s=128&g=1", "display_name": "Kostas Mouratidis", "link": "https://stackoverflow.com/users/6655150/kostas-mouratidis"}, "edited": false, "score": 0, "creation_date": 1560373080, "post_id": 56569959, "comment_id": 99719576, "body": "boilerData.csv file"}, {"owner": {"reputation": 853, "user_id": 6655150, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3poXy.png?s=128&g=1", "display_name": "Kostas Mouratidis", "link": "https://stackoverflow.com/users/6655150/kostas-mouratidis"}, "edited": false, "score": 0, "creation_date": 1560374218, "post_id": 56569959, "comment_id": 99719930, "body": "I updated it with your data. Does it work?"}], "answers": [{"comments": [{"owner": {"reputation": 2015, "user_id": 8372455, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7937214051961aa38cd1b42a16a599d0?s=128&d=identicon&r=PG&f=1", "display_name": "HenryHub", "link": "https://stackoverflow.com/users/8372455/henryhub"}, "edited": false, "score": 0, "creation_date": 1560393660, "post_id": 56570346, "comment_id": 99723774, "body": "Cool thanks for the response, I&#39;m AFK but will be back soon."}, {"owner": {"reputation": 2015, "user_id": 8372455, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7937214051961aa38cd1b42a16a599d0?s=128&d=identicon&r=PG&f=1", "display_name": "HenryHub", "link": "https://stackoverflow.com/users/8372455/henryhub"}, "edited": false, "score": 0, "creation_date": 1560432437, "post_id": 56570346, "comment_id": 99740971, "body": "It appears to be working.. If I select or deselect different points (<code>HWST, HWRT, OAT</code>) to be visible I have to hit the small icon in the bottom right hand corner <code>Callback graph</code> and it will update..  :) Thank you"}, {"owner": {"reputation": 2015, "user_id": 8372455, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7937214051961aa38cd1b42a16a599d0?s=128&d=identicon&r=PG&f=1", "display_name": "HenryHub", "link": "https://stackoverflow.com/users/8372455/henryhub"}, "edited": false, "score": 0, "creation_date": 1560432589, "post_id": 56570346, "comment_id": 99741069, "body": "One other question I have is it possible with dash to bring a calculated parameter up to the front end? I think I could this with Flask &amp; Jinja... For example in dash maybe between an HTML div, would it be possible to show something like correlation between two points? IE, <code>correlation = df[&#39;HWST&#39;].corr(df[&#39;OAT&#39;])</code>"}, {"owner": {"reputation": 853, "user_id": 6655150, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3poXy.png?s=128&g=1", "display_name": "Kostas Mouratidis", "link": "https://stackoverflow.com/users/6655150/kostas-mouratidis"}, "reply_to_user": {"reputation": 2015, "user_id": 8372455, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7937214051961aa38cd1b42a16a599d0?s=128&d=identicon&r=PG&f=1", "display_name": "HenryHub", "link": "https://stackoverflow.com/users/8372455/henryhub"}, "edited": false, "score": 0, "creation_date": 1560488341, "post_id": 56570346, "comment_id": 99760329, "body": "I&#39;m not entirely sure what you mean &quot;correlation between two points&quot; (you mean arrays?) and &quot;bring [...] to the front end&quot; but if you want to have details about specific points appear on hover, there is a parameter (I think <code>description</code>) for that in plotly/dash graphs. If you want something to appear in another element (say the correlation you calculated with a few comments) you can create another <code>html.P</code> element (or other) in your <code>app.layout</code> and then modify the callback to have 2 outputs: <code>[Output(&#39;hws&#39;, &#39;figure&#39;), Output(&#39;myP&#39;, &#39;children&#39;)], [Input(...)]</code>"}], "tags": [], "owner": {"reputation": 853, "user_id": 6655150, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3poXy.png?s=128&g=1", "display_name": "Kostas Mouratidis", "link": "https://stackoverflow.com/users/6655150/kostas-mouratidis"}, "is_accepted": true, "score": 0, "last_activity_date": 1560374618, "last_edit_date": 1560374618, "creation_date": 1560373513, "answer_id": 56570346, "question_id": 56569959, "link": "https://stackoverflow.com/questions/56569959/python-dash-call-back-function/56570346#56570346", "title": "Python dash call back function", "body": "<p>What you need to know is that the callback takes <code>Input</code> from some Dash element (here the <code>value</code> of the dropdown) and returns to <code>Output</code> for some property of another Dash element (here the <code>figure</code> from the graph; notice we only change the <code>data</code> property).</p>\n\n<pre><code>import dash\nimport dash_core_components as dcc\nimport dash_html_components as html\nimport pandas as pd\nimport plotly.graph_objs as go\nimport numpy as np\n\nexternal_stylesheets = ['https://codepen.io/chriddyp/pen/bWLwgP.css']\n\napp = dash.Dash(__name__, external_stylesheets=external_stylesheets)\n\n\n\ndf = pd.read_csv('boilerData.csv', index_col='Date', parse_dates=True)\ndf = df.fillna(method = 'ffill').fillna(method = 'bfill')\n\napp.layout = html.Div([\n\n    dcc.Dropdown(\n        id='my-dropdown',\n        options=[\n            {'label': 'Outdoor Temp', 'value': 'OAT'},\n            {'label': 'Hot Water Supply Temp', 'value': 'HWST'},\n            {'label': 'Hot Water Return Temp', 'value': 'HWRT'}\n        ],\n        value=['OAT','HWST','HWRT'],\n        multi=True\n    ),\n\n    dcc.Graph(\n        id='hws',\n        figure={\n            'data': [\n                {'x': df.index, 'y': df.HWST, 'type': 'line', 'name': 'hwst'},\n                {'x': df.index, 'y': df.HWRT, 'type': 'line', 'name': 'hwrt'},\n                {'x': df.index, 'y': df.OAT, 'type': 'line', 'name': 'oat'},\n            ],\n            'layout': {\n                'title': 'Heating System Data Visualization'\n            }\n        }\n    )\n])\n\n\n@app.callback(\n    dash.dependencies.Output('hws', 'figure'),\n    [dash.dependencies.Input('my-dropdown', 'value')])\ndef update_output(columns):\n    return {\"data\": [{'x': df.index, 'y': df[col], 'type':'line', 'name': col}\n                     for col in columns]}\n\n\nif __name__ == '__main__':\n    app.run_server(debug=True)\n</code></pre>\n"}], "owner": {"reputation": 2015, "user_id": 8372455, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7937214051961aa38cd1b42a16a599d0?s=128&d=identicon&r=PG&f=1", "display_name": "HenryHub", "link": "https://stackoverflow.com/users/8372455/henryhub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3054, "favorite_count": 1, "accepted_answer_id": 56570346, "answer_count": 1, "score": 0, "last_activity_date": 1560374618, "creation_date": 1560371461, "last_edit_date": 1560371972, "question_id": 56569959, "link": "https://stackoverflow.com/questions/56569959/python-dash-call-back-function", "title": "Python dash call back function", "body": "<p>This maybe asking alot, but I was curious if anyone had any tips for combining these two dash scripts. The purpose would be to incorporate the drop down menu to remove/add data points on the visualization plots.</p>\n\n<p>The first script will visualize my data nicely and the second script with the callback function is for creating a drop down menu from the <a href=\"https://dash.plot.ly/dash-core-components/dropdown\" rel=\"nofollow noreferrer\">plotly tutorials</a>.</p>\n\n<pre><code>import dash\nimport dash_core_components as dcc\nimport dash_html_components as html\nimport pandas as pd\nimport plotly.graph_objs as go\n\n\nexternal_stylesheets = ['https://codepen.io/chriddyp/pen/bWLwgP.css']\n\napp = dash.Dash(__name__, external_stylesheets=external_stylesheets)\n\n\n\ndf = pd.read_csv('boilerData.csv', index_col='Date', parse_dates=True)\ndf = df.fillna(method = 'ffill').fillna(method = 'bfill')\n\n\n\n\napp.layout = html.Div([\n    dcc.Graph(\n        id='hws',\n        figure={\n            'data': [\n                {'x': df.index, 'y': df.HWST, 'type': 'line', 'name': 'hwst'},\n                {'x': df.index, 'y': df.HWRT, 'type': 'line', 'name': 'hwrt'},\n                {'x': df.index, 'y': df.OAT, 'type': 'line', 'name': 'oat'},\n            ],\n            'layout': {\n                'title': 'Heating System Data Visualization'\n            }\n        }\n    )\n])\n\nif __name__ == '__main__':\n    app.run_server(debug=True)\n</code></pre>\n\n<p>dropdown script:</p>\n\n<pre><code>import dash\nimport dash_html_components as html\nimport dash_core_components as dcc\n\nexternal_stylesheets = ['https://codepen.io/chriddyp/pen/bWLwgP.css']\n\napp = dash.Dash(__name__, external_stylesheets=external_stylesheets)\napp.layout = html.Div([\n    dcc.Dropdown(\n        id='my-dropdown',\n        options=[\n            {'label': 'Outdoor Temp', 'value': 'OAT'},\n            {'label': 'Hot Water Supply Temp', 'value': 'HWST'},\n            {'label': 'Hot Water Return Temp', 'value': 'HWRT'}\n        ],\n        value=['OAT','HWST','HWRT'],\n        multi=True\n    ),\n    html.Div(id='output-container')\n])\n\n\n@app.callback(\n    dash.dependencies.Output('output-container', 'children'),\n    [dash.dependencies.Input('my-dropdown', 'value')])\ndef update_output(value):\n    return 'You have selected \"{}\"'.format(value)\n\n\nif __name__ == '__main__':\n    app.run_server(debug=True)\n</code></pre>\n\n<p>Any tips help, still learning...</p>\n"}, {"tags": ["python", "python-3.x", "class", "oop"], "comments": [{"owner": {"reputation": 2246, "user_id": 3451555, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/n34Rw.png?s=128&g=1", "display_name": "Julian Camilleri", "link": "https://stackoverflow.com/users/3451555/julian-camilleri"}, "edited": false, "score": 2, "creation_date": 1560371556, "post_id": 56569923, "comment_id": 99719030, "body": "Why not create children from inside the child? Also you can call the parent using <code>super()</code>"}, {"owner": {"reputation": 1, "user_id": 11638954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a088ab1ff7675944ef6b14e9ab3479?s=128&d=identicon&r=PG&f=1", "display_name": "anonymouspb", "link": "https://stackoverflow.com/users/11638954/anonymouspb"}, "reply_to_user": {"reputation": 2246, "user_id": 3451555, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/n34Rw.png?s=128&g=1", "display_name": "Julian Camilleri", "link": "https://stackoverflow.com/users/3451555/julian-camilleri"}, "edited": false, "score": 1, "creation_date": 1560374886, "post_id": 56569923, "comment_id": 99720107, "body": "Why not create children from inside the child? I am not sure of what you are proposing. If you propose to create multiple childs one at a time, I dislike this proposition. I would rather create a single parent object that automatically creates his children all in a single line of code. I think it makes sense.  Also you can call the parent using super(). I probably don&#39;t understand super(), but from my point of view, calling super() won&#39;t give me access to number unless I init parent inside the child&#39;s init function which I don&#39;t want to do. You probably can provide me with an example..."}, {"owner": {"reputation": 1, "user_id": 11638954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a088ab1ff7675944ef6b14e9ab3479?s=128&d=identicon&r=PG&f=1", "display_name": "anonymouspb", "link": "https://stackoverflow.com/users/11638954/anonymouspb"}, "reply_to_user": {"reputation": 2246, "user_id": 3451555, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/n34Rw.png?s=128&g=1", "display_name": "Julian Camilleri", "link": "https://stackoverflow.com/users/3451555/julian-camilleri"}, "edited": false, "score": 0, "creation_date": 1560390559, "post_id": 56569923, "comment_id": 99723193, "body": "I feel like there&#39;s no pythonic way to do it.... I&#39;m suprised as this would be possible  in C++ and makes a lot of sense to me"}, {"owner": {"reputation": 2246, "user_id": 3451555, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/n34Rw.png?s=128&g=1", "display_name": "Julian Camilleri", "link": "https://stackoverflow.com/users/3451555/julian-camilleri"}, "edited": false, "score": 0, "creation_date": 1560406541, "post_id": 56569923, "comment_id": 99726766, "body": "You can do it, but; you&#39;ve overridden the init from the parent; hence you need to call it. <code>super().__init__</code> in your child init - or, define <code>__new__</code> in your parent, which creates the class. - Either way, you cant override a function in python and expect it to run on its own."}, {"owner": {"reputation": 1, "user_id": 11638954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a088ab1ff7675944ef6b14e9ab3479?s=128&d=identicon&r=PG&f=1", "display_name": "anonymouspb", "link": "https://stackoverflow.com/users/11638954/anonymouspb"}, "reply_to_user": {"reputation": 2246, "user_id": 3451555, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/n34Rw.png?s=128&g=1", "display_name": "Julian Camilleri", "link": "https://stackoverflow.com/users/3451555/julian-camilleri"}, "edited": false, "score": 0, "creation_date": 1560429991, "post_id": 56569923, "comment_id": 99739394, "body": "Adding <code>super().__init__</code> inside my child init will call the parent init function when i init a child which I don&#39;t want to do. I want to init the parent which in turns init a child that has access to its parent attributes. @JulianCamilleri"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11638954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a088ab1ff7675944ef6b14e9ab3479?s=128&d=identicon&r=PG&f=1", "display_name": "anonymouspb", "link": "https://stackoverflow.com/users/11638954/anonymouspb"}, "edited": false, "score": 0, "creation_date": 1560433763, "post_id": 56581451, "comment_id": 99741865, "body": "First, thanks for your answer! Obviously, I dislike your first method because of the class variable. I agree with: &quot;Inheritance should be used... with things in common.&quot;  That&#39;s what I&#39;m looking for. number is common to Child(0) and Child(2) and we already know they exist if a parent is created. Inheritance is probably still not appropriate though... Finally, your last method won&#39;t work. In this situation, self.number does not exist inside the child init. We could pass the parent in argument to the child init though and it would work, BUT there would be two different number."}, {"owner": {"reputation": 1373, "user_id": 2806632, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/267a981276e38408eb0d30219602bc2f?s=128&d=identicon&r=PG", "display_name": "jaumebonet", "link": "https://stackoverflow.com/users/2806632/jaumebonet"}, "reply_to_user": {"reputation": 1, "user_id": 11638954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a088ab1ff7675944ef6b14e9ab3479?s=128&d=identicon&r=PG&f=1", "display_name": "anonymouspb", "link": "https://stackoverflow.com/users/11638954/anonymouspb"}, "edited": false, "score": 0, "creation_date": 1560494303, "post_id": 56581451, "comment_id": 99762330, "body": "So, the second option does work (I did run it). <code>self.number</code> is still a class attribute, so it does exist in the <code>Child</code>.  If you want to provide the two numbers to the <code>Child</code> during the <code>Parent</code> instantiation, then <code>Child</code> does not need to be a child of <code>Parent</code>. Finally, I don&#39;t understand what you mean by &quot;BUT there would be two different number&quot;, but if you are thinking memory wise, you should consider that same numbers do use <a href=\"https://stackoverflow.com/questions/49218730/can-i-make-different-variables-of-same-values-point-to-diffrent-objects/49219042\">the same memory position</a>."}, {"owner": {"reputation": 1, "user_id": 11638954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a088ab1ff7675944ef6b14e9ab3479?s=128&d=identicon&r=PG&f=1", "display_name": "anonymouspb", "link": "https://stackoverflow.com/users/11638954/anonymouspb"}, "edited": false, "score": 0, "creation_date": 1560515924, "post_id": 56581451, "comment_id": 99772644, "body": "Pasting your Child class with my Parent class and creating a Parent object pops me an AttributeError: &quot;Child has no attribute number&quot;... I agree with: &quot;...Child does not need to be a child of Parent&quot;. I mean if you change the child number it won&#39;t change the parent number. @jaumebonet"}, {"owner": {"reputation": 1373, "user_id": 2806632, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/267a981276e38408eb0d30219602bc2f?s=128&d=identicon&r=PG", "display_name": "jaumebonet", "link": "https://stackoverflow.com/users/2806632/jaumebonet"}, "reply_to_user": {"reputation": 1, "user_id": 11638954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a088ab1ff7675944ef6b14e9ab3479?s=128&d=identicon&r=PG&f=1", "display_name": "anonymouspb", "link": "https://stackoverflow.com/users/11638954/anonymouspb"}, "edited": false, "score": 0, "creation_date": 1560516866, "post_id": 56581451, "comment_id": 99773166, "body": "sure... not with your <code>Parent</code> class.. but with the one I&#39;m proposing in my answer."}], "tags": [], "owner": {"reputation": 1373, "user_id": 2806632, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/267a981276e38408eb0d30219602bc2f?s=128&d=identicon&r=PG", "display_name": "jaumebonet", "link": "https://stackoverflow.com/users/2806632/jaumebonet"}, "is_accepted": false, "score": 0, "last_activity_date": 1560431961, "creation_date": 1560431961, "answer_id": 56581451, "question_id": 56569923, "link": "https://stackoverflow.com/questions/56569923/python-create-child-objects-in-parent-init-with-access-to-parent-attributes/56581451#56581451", "title": "Python Create Child objects in parent init with access to parent attributes", "body": "<p>Ok, I have to say that this does not seem an appropriate use of inheritance. Inheritance should be used to provide a multiple set of attributes and methods to different classes with things in common. Calling a child from a parent on initialization seems, a bit doubtful.</p>\n\n<p>Still, I'm guessing there is a wider reason for this than this example. As such, I can offer a solution that does not require <code>Child</code> to use <code>super()</code> (as specified in the comments). </p>\n\n<p>This solution has a caveat, though, and a big one. <code>self.number</code> becomes a class method and, as such, if a new <code>Parent</code> is instantiated with a diferent <code>number</code> value, it would change previously instantiated <code>Parent</code>s.</p>\n\n<p>So here it goes:</p>\n\n<pre><code>class Parent():\n    number = 0\n    def __init__(self, number):\n        self._change_number(number)\n        self.children = [Child(0), Child(2)]\n\n    @classmethod\n    def _change_number(cls, number):\n        cls.number = number\n\nclass Child(Parent):\n    def __init__(self, number2):\n        self.number2 = number2\n    def printNumber(self):\n        print(self.number+self.number2)\n\npar = Parent(3)\npar.children[0].printNumber()\n# 3\npar.children[1].printNumber()\n# 5\n</code></pre>\n\n<p>Again <strong>be aware that number is a class variable!!</strong>. Then, continuing the script with:</p>\n\n<pre><code>pir = Parent(5)  # Different instance\n# changes the values in the previous instance par\npar.children[0].printNumber()\n# 5\npar.children[1].printNumber()\n# 7\n</code></pre>\n\n<p>I cannot see any other solution for this to work, as, without calling <code>super</code> from the <code>Child</code> there is no other way to initialize the <code>self.number</code> attribute if it is not a class one.</p>\n\n<p>If you don't want this to happen, one option would be to calculate <code>self.number2</code> at <code>__init__</code> time. Then the value would be safely stored without more problem. In this case, <code>Child</code> would look like:</p>\n\n<pre><code>class Child(Parent):\n    def __init__(self, number2):\n        self.number2 = self.number+number2\n    def printNumber(self):\n        print(self.number2)\n</code></pre>\n\n<p>And a new instance would not affect the previous one:</p>\n\n<pre><code>par = Parent(3)\npar.children[0].printNumber()\n# 3\npar.children[1].printNumber()\n# 5\npir = Parent(5)  # Different instance\n# DOES NOT change the values in the previous instance par\npar.children[0].printNumber()\n# 3\npar.children[1].printNumber()\n# 5\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11638954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a088ab1ff7675944ef6b14e9ab3479?s=128&d=identicon&r=PG&f=1", "display_name": "anonymouspb", "link": "https://stackoverflow.com/users/11638954/anonymouspb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1663, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1560431961, "creation_date": 1560371309, "last_edit_date": 1560430586, "question_id": 56569923, "link": "https://stackoverflow.com/questions/56569923/python-create-child-objects-in-parent-init-with-access-to-parent-attributes", "title": "Python Create Child objects in parent init with access to parent attributes", "body": "<p>I want to create a parent object which creates its children and its children need to have access to one of the parent attributes.</p>\n\n<p>I have found ways to create children inside a parent and ways to have access to one of the parent attributes, but no way to do both at the same time. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class Parent():\n    def __init__(self,number):\n        self.number = number\n        self.children = [Child(0), Child(2)]\nclass Child(Parent):\n    def __init__(self, number2):\n        self.number2 = number2\n    def printNumber(self):\n        print(self.number+self.number2)\n</code></pre>\n\n<p>I expect:</p>\n\n<pre><code>par = Parent(3)\npar.children[0].printNumber()\n&lt;3&gt;\npar.children[1].printNumber()\n&lt;5&gt;\n</code></pre>\n\n<p>But, this will crash because par.children[0].number does not exist.</p>\n"}, {"tags": ["python", "python-2.x"], "comments": [{"owner": {"reputation": 1459, "user_id": 11605335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e369436fb7719d6cadedbbdd36d92637?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Kearns", "link": "https://stackoverflow.com/users/11605335/robert-kearns"}, "edited": false, "score": 0, "creation_date": 1560371683, "post_id": 56569918, "comment_id": 99721466, "body": "Bit unclear what your asking but to call a function from a string use <code>eval(yourstring)</code>"}, {"owner": {"reputation": 19276, "user_id": 8591431, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-AqHwnjWu2tM/AAAAAAAAAAI/AAAAAAAAFrE/DVc4w4e1pDc/photo.jpg?sz=128", "display_name": "Devesh Kumar Singh", "link": "https://stackoverflow.com/users/8591431/devesh-kumar-singh"}, "edited": false, "score": 1, "creation_date": 1560371727, "post_id": 56569918, "comment_id": 99719090, "body": "Why not do <code>actions.goto(114)</code> that&#39;s how you call the function"}, {"owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "reply_to_user": {"reputation": 19276, "user_id": 8591431, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-AqHwnjWu2tM/AAAAAAAAAAI/AAAAAAAAFrE/DVc4w4e1pDc/photo.jpg?sz=128", "display_name": "Devesh Kumar Singh", "link": "https://stackoverflow.com/users/8591431/devesh-kumar-singh"}, "edited": false, "score": 0, "creation_date": 1560372940, "post_id": 56569918, "comment_id": 99719521, "body": "@DeveshKumarSingh maybe there are lots of different functions being called, not just <code>goto</code>, listed in the file that was described which would make manually calling <code>actions.goto(somearg)</code> inconvenient at best"}, {"owner": {"reputation": 3, "user_id": 11614381, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210660112218429/picture?type=large", "display_name": "Beatriz Couto de Carvalho", "link": "https://stackoverflow.com/users/11614381/beatriz-couto-de-carvalho"}, "reply_to_user": {"reputation": 19276, "user_id": 8591431, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-AqHwnjWu2tM/AAAAAAAAAAI/AAAAAAAAFrE/DVc4w4e1pDc/photo.jpg?sz=128", "display_name": "Devesh Kumar Singh", "link": "https://stackoverflow.com/users/8591431/devesh-kumar-singh"}, "edited": false, "score": 0, "creation_date": 1560389017, "post_id": 56569918, "comment_id": 99722981, "body": "@DeveshKumarSingh because im not the one that gets the function name. The getc would come from a .txt file that another program wrote. I just presented it as a normal string because it was easier to show."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11614381, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210660112218429/picture?type=large", "display_name": "Beatriz Couto de Carvalho", "link": "https://stackoverflow.com/users/11614381/beatriz-couto-de-carvalho"}, "edited": false, "score": 0, "creation_date": 1560389794, "post_id": 56570145, "comment_id": 99723087, "body": "Thanks for your help! Im thinking that since this is quite a simple program the eval method would be perfect, the only problem is that im currently using python 2.7. Are there any workarounds for the fstring?"}, {"owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "reply_to_user": {"reputation": 3, "user_id": 11614381, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210660112218429/picture?type=large", "display_name": "Beatriz Couto de Carvalho", "link": "https://stackoverflow.com/users/11614381/beatriz-couto-de-carvalho"}, "edited": false, "score": 0, "creation_date": 1560475970, "post_id": 56570145, "comment_id": 99758191, "body": "@BeatrizCoutodeCarvalho yep, sorry didn&#39;t see you were on 2.7, see latest edit!"}], "tags": [], "owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "is_accepted": true, "score": 0, "last_activity_date": 1560522644, "last_edit_date": 1560522644, "creation_date": 1560372443, "answer_id": 56570145, "question_id": 56569918, "link": "https://stackoverflow.com/questions/56569918/calling-function-through-string/56570145#56570145", "title": "Calling function through string", "body": "<p>One option you could use is <code>__getattribute__</code> on the <code>action</code> class to get the function <code>goto</code>, then call it with the encompassing argument. You'd need to parse it like so:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import re\nimport action\n\ngetc = 'goto(114)'\nfunc, arg = re.search('(\\w+)\\((\\d+)\\)', 'goto(114)').groups()\n\n# f is the function action.goto with the argument 114 supplied as an int\n# __getattribute__ allows you to look up a class method by a string name\nf = action.__getattribute__(func)\n\n# now you can just call it with the arg converted to int\nresult = f(int(arg))\n\n</code></pre>\n\n<p>The regex might need to be refined a bit, but it's looking for the name of the calling function, and the arguments wrapped in parentheses. The <code>__getattribute__</code> will get the function object from <code>action</code> and return it uncalled so you can call it later. </p>\n\n<p>For multiple arguments you can leverage the <a href=\"https://docs.python.org/3/library/ast.html\" rel=\"nofollow noreferrer\"><code>ast</code></a> library:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import re\nimport ast\n\n# I'm going to use a sample class as a stand-in\n# for action\nclass action:\n    def goto(*args):\n        print(args)\n\ngetc = 'goto(114, \"abc\", [1,2,3])'\nfunc, args = re.search('(\\w+)\\((.*)\\)', getc).groups()\n\n# will convert this into python data structures\n# safely, and will fail if the argument to literal_eval\n# is not a python structure\nargs = ast.literal_eval('(%s)' % args)\n\nf = getattr(action, func)\nf(*args)\n# 114, \"abc\", [1,2,3]\n</code></pre>\n\n<p>The easier option (proceed with caution) would be to use <code>eval</code>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>cmd = 'action.%s' % getc\nresult = eval(cmd)\n</code></pre>\n\n<p>Note that this is considered bad practice in the python community, though there are examples in the standard library that use it. This is not safe for un-validated code, and is easily exploited if you don't monitor your source file</p>\n"}], "owner": {"reputation": 3, "user_id": 11614381, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210660112218429/picture?type=large", "display_name": "Beatriz Couto de Carvalho", "link": "https://stackoverflow.com/users/11614381/beatriz-couto-de-carvalho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 56570145, "answer_count": 1, "score": -1, "last_activity_date": 1560522644, "creation_date": 1560371297, "last_edit_date": 1560373053, "question_id": 56569918, "link": "https://stackoverflow.com/questions/56569918/calling-function-through-string", "title": "Calling function through string", "body": "<p>I have a Python main program that imports another module (called actions) with multiple functions. The main program should run some things, get a string (ie. goto(114)) and then run actions.goto(114), in wich 114 is the argument to the function goto(x) in actions.</p>\n\n<p>I've tried the obvious which was just trying to run the string but that did not work. I've also find the globals() method which would work if the goto(x) was inside my main module and i've also found the getattr method but in this case i havent found any example in which I pass the function name and argument so im kind of lost here.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#main.py\nimport actions\ndef main():\n    getc = 'goto(114)'\n    result = actions.getc #this would be actions.goto(114)\n    print result\n\n#actions.py\ndef goto(x):\n    #code\n    return something\n</code></pre>\n\n<p>The actual program gets the string from a .txt file that another program wrote, I just made the example that way so that its simple to understand.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 51, "user_id": 7306332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pkmu4.jpg?s=128&g=1", "display_name": "MMizani", "link": "https://stackoverflow.com/users/7306332/mmizani"}, "edited": false, "score": 1, "creation_date": 1560371180, "post_id": 56569851, "comment_id": 99718860, "body": "What is the content of &quot;input.txt&quot;?"}, {"owner": {"reputation": 5380, "user_id": 10618540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Od4aq.jpg?s=128&g=1", "display_name": "Paritosh Singh", "link": "https://stackoverflow.com/users/10618540/paritosh-singh"}, "edited": false, "score": 0, "creation_date": 1560371183, "post_id": 56569851, "comment_id": 99718863, "body": "file can only be iterated over once. it gets consumed. try running <code>file.read()</code> twice."}, {"owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 0, "creation_date": 1560371211, "post_id": 56569851, "comment_id": 99718878, "body": "<i>Only loop 1 will be executed the loop 2 is gone</i>. That&#39;s false. <code>loop2</code> <b>is</b> executed. However <code>file.readline()</code> will always return the empty string. Please describe your problem accurately. The issue is that the first loop is going to iterate over the file object until the end, so no content remains for the <code>readline</code> method to return."}, {"owner": {"reputation": 1189, "user_id": 10638232, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2CQwwMqP-hM/AAAAAAAAAAI/AAAAAAAACQA/5LiuWqD4TlQ/photo.jpg?sz=128", "display_name": "GeeTransit", "link": "https://stackoverflow.com/users/10638232/geetransit"}, "edited": false, "score": 0, "creation_date": 1560371212, "post_id": 56569851, "comment_id": 99718880, "body": "When iterating over a file directly, such as using <code>for line in file</code>, it will read through the whole file. If you use <code>file.readline()</code> instead, it will only give one line and you can control the amount you want to read."}], "answers": [{"tags": [], "owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "is_accepted": true, "score": 2, "last_activity_date": 1560371224, "creation_date": 1560371224, "answer_id": 56569904, "question_id": 56569851, "link": "https://stackoverflow.com/questions/56569851/the-order-of-the-for-loops-affect-the-outcome/56569904#56569904", "title": "The order of the for loops affect the outcome", "body": "<p>It's because you've consumed the file handle already in the first loop. A simple example might be:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>with open('afile.txt') as fh:\n    # this will consume fh\n    for line in fh:\n        print(line)\n\n    print(fh.readline()) # prints empty string, because there's nothing left to read\n\n    for line in fh:\n        print(line) # won't do anything because you've already read everything\n</code></pre>\n\n<p>If you want to read a file twice, you can use <code>fh.seek(0)</code> to go back to the beginning:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>with open('afile.txt') as fh:\n    for line in fh:\n        print(line)\n\n    fh.seek(0)\n    # now this works\n    for line in fh:\n        print(line)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11200132"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 56569904, "answer_count": 1, "score": 0, "last_activity_date": 1560371224, "creation_date": 1560370996, "question_id": 56569851, "link": "https://stackoverflow.com/questions/56569851/the-order-of-the-for-loops-affect-the-outcome", "title": "The order of the for loops affect the outcome", "body": "<p>When running the following codes. Only loop 1 will be executed the loop 2 is gone. However if i move loop 1 behind loop2, both of the loops will be executed. Why is that ?\nThank you </p>\n\n<pre><code>from Bio.Blast import NCBIWWW\nfrom Bio.Blast import NCBIXML\n\nwith open('input.txt', 'r') as file:\n\n    count = 1\n\n    #loop 1\n    for i in file:\n        print(\"Sequence {} :{}  Length: {}\".format(count, i[:20], len(i)))\n        count += 1\n    count -= 1\n    print(\"There are %d sequences.\" % count)  # count = 10\n\n    #loop2\n    for i in range(count):\n        seq = file.readline()\n        print(seq)\n        # try:\n        #     with open('dna_lab5_%d.xml' % i, 'r') as f:\n        #         print(\"Using saved file\")\n        # except FileNotFoundError:\n        #     print(\"Performing online BLAST search\")\n        #     with open('dna_lab5_%d.xml' % i, 'w') as f:\n        #         print(seq)\n        #         # handle = NCBIWWW.qblast(\"blastn\", \"nt\", seq)\n        #         # result = handle.read()\n        #         # f.write(result)\n</code></pre>\n"}, {"tags": ["python", "spyder"], "answers": [{"tags": [], "owner": {"reputation": 1206, "user_id": 4039619, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh3.googleusercontent.com/-TD1WY5pcbCc/AAAAAAAAAAI/AAAAAAAAAFE/mxlKAxe_A2Q/photo.jpg?sz=128", "display_name": "Sigve Karolius", "link": "https://stackoverflow.com/users/4039619/sigve-karolius"}, "is_accepted": true, "score": 1, "last_activity_date": 1560374530, "creation_date": 1560374530, "answer_id": 56570531, "question_id": 56569846, "link": "https://stackoverflow.com/questions/56569846/programming-a-function-with-a-latex-output/56570531#56570531", "title": "Programming a function with a latex output", "body": "<p>What you want is to parse a string in the sympy context, a facility that is provided by any decent computer algebra system (CAS). Take a look at the <a href=\"https://docs.sympy.org/latest/modules/core.html\" rel=\"nofollow noreferrer\">sympify</a> function. A rough example (py 2.7) is shown below:</p>\n\n<pre><code>import sympy as sp\n\npol = raw_input(\"Enter polynomial: \")\np = sp.sympify(pol)\ndpdx = p.diff()\n\nprint \"f(x) : \" + sp.latex(p)\nprint \"f'(x): \" + sp.latex(dpdx)\nprint \"g(x) : \" + sp.latex(p + dpdx)\n# Enter polynomial: x**2\n# f(x) : x^{2}\n# f'(x) : 2 x\n# g(x) : x^{2} + 2 x\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 6896310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7404dfc56933e0966c3d736586176cf8?s=128&d=identicon&r=PG&f=1", "display_name": "EnlightenedFunky", "link": "https://stackoverflow.com/users/6896310/enlightenedfunky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 56570531, "answer_count": 1, "score": 0, "last_activity_date": 1560374530, "creation_date": 1560370975, "last_edit_date": 1560373016, "question_id": 56569846, "link": "https://stackoverflow.com/questions/56569846/programming-a-function-with-a-latex-output", "title": "Programming a function with a latex output", "body": "<p>I was trying to write a code which requires in input of a polynomial function and then would take that input and render it into Latex, this is my problem.  Here is my code any suggestions?</p>\n\n<pre><code>#%%\nimport sympy as sp\ndef f():\n       f= eval(input(\"Enter your polynominal based function: \"))\n       return f\nx = sp.Symbol('x')\nf = f()\nderivative = sp.diff(f,x)\nstatement = 'This is the derivative of '\nstatement1 = str(f) \nstatement2 = ' which is '\nstatement3 = str(derivative)\noverallStatement = statement + statement1 + statement2 + statement3\nsp.latex(overallStatement)\n#%%\n</code></pre>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 11568144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf1dfdb19376e2be030d1742a94cdd0e?s=128&d=identicon&r=PG&f=1", "display_name": "AHayser", "link": "https://stackoverflow.com/users/11568144/ahayser"}, "edited": false, "score": 0, "creation_date": 1560371177, "post_id": 56569837, "comment_id": 99718857, "body": "Great, thanks! Worked like a charm. Appreciate the quick answer."}], "tags": [], "owner": {"reputation": 18299, "user_id": 2648811, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ee5af60b10a2d5fd8c864437a2062f0a?s=128&d=identicon&r=PG", "display_name": "Green Cloak Guy", "link": "https://stackoverflow.com/users/2648811/green-cloak-guy"}, "is_accepted": true, "score": 1, "last_activity_date": 1560370929, "creation_date": 1560370929, "answer_id": 56569837, "question_id": 56569789, "link": "https://stackoverflow.com/questions/56569789/extracting-csvs-from-each-subdirectory-and-placing-at-same-level-as-subdirectory/56569837#56569837", "title": "Extracting CSVs from each subdirectory and placing at same level as subdirectory - OS Module", "body": "<p>You can find the name of the directory the file in question is in, and then find the directory of <em>that</em>, and put it in that:</p>\n\n<pre><code>for root, dirs, files in os.walk(rootdir):\n    for f in files:\n        if f.endswith('.csv'):\n            fullpath = os.path.join(root, f)\n            shutil.copy(fullpath, os.path.dirname(os.path.dirname(fullpath)))\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 11568144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf1dfdb19376e2be030d1742a94cdd0e?s=128&d=identicon&r=PG&f=1", "display_name": "AHayser", "link": "https://stackoverflow.com/users/11568144/ahayser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16, "favorite_count": 0, "accepted_answer_id": 56569837, "answer_count": 1, "score": 0, "last_activity_date": 1560370929, "creation_date": 1560370700, "question_id": 56569789, "link": "https://stackoverflow.com/questions/56569789/extracting-csvs-from-each-subdirectory-and-placing-at-same-level-as-subdirectory", "title": "Extracting CSVs from each subdirectory and placing at same level as subdirectory - OS Module", "body": "<p>I have a directory like below that contains about 50 'SubDir' but each SubDir only contains 2 SubSubDirs (what I am calling them):</p>\n\n<pre><code>Parent Directory\n |\n +-- SubDir #1\n |   |  \n |   +-- SubSubDir #1\n |       |\n |       +-- file1.csv\n |       \n |   +-- SubSubDir #2\n |       |\n |       +-- file2.csv\n |\n +-- SubDir #2\n |   |  \n |   +-- SubSubDir #1\n |       |\n |       +-- file1.csv\n |       \n |   +-- SubSubDir #2\n |       |\n |       +-- file2.csv\n .\n .\n .\n</code></pre>\n\n<p>I need to extract each csv and place at the same level as SubSubDir #1 and #2. I have a script working that walks through each, but all CSVs are being placed right under the Parent Directory, because I cannot figure out how to incorporate a moving destination with os module.</p>\n\n<pre><code>rootdir = \"/Users/Downloads/Test\"\nfor root, dirs, files in os.walk(rootdir):\n    for f in files:\n        if f.endswith('.csv'):\n            shutil.copy(os.path.join(root,f), rootdir)\n</code></pre>\n\n<p>I know I have rootdir in the code above, which is why the CSVs are being placed right under the rootdir.</p>\n\n<p>Anyone have any insight how to change destination of CSV copy. I am assuming some way to incorporate a moving destination with os module. So far I have been unsuccessful. Thanks in advance.</p>\n"}, {"tags": ["python", "pandas", "dataframe", "web-scraping"], "comments": [{"owner": {"reputation": 3527, "user_id": 6925185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6bd7821971973c8143f31356c85df3?s=128&d=identicon&r=PG&f=1", "display_name": "jottbe", "link": "https://stackoverflow.com/users/6925185/jottbe"}, "edited": false, "score": 0, "creation_date": 1560371477, "post_id": 56569773, "comment_id": 99718998, "body": "Are you sure the site allows scraping according it&#39;s policy? Haven&#39;t checked that. So generally speaking, I know that pandas can already extract tables from an url, but to me it seems this functionality has it&#39;s limits, so I guess you will have to implement some scraping logic. Maybe it helps you to give beautiful soup a try (imported by bs4 in python) and insert the scraped content in a dataframe. BS4 it is quite powerfull!"}, {"owner": {"reputation": 3527, "user_id": 6925185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6bd7821971973c8143f31356c85df3?s=128&d=identicon&r=PG&f=1", "display_name": "jottbe", "link": "https://stackoverflow.com/users/6925185/jottbe"}, "edited": false, "score": 0, "creation_date": 1560371603, "post_id": 56569773, "comment_id": 99719046, "body": "Beautiful soup expects to get the html (or xml) code and only is for parsing, where it is very powerfull. you need to retrieve the code yourself. You can use the &quot;requests&quot; library for that."}], "answers": [{"tags": [], "owner": {"reputation": 76, "user_id": 8206519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fee310a3731f0945795a70990fab6b6?s=128&d=identicon&r=PG&f=1", "display_name": "sharder", "link": "https://stackoverflow.com/users/8206519/sharder"}, "is_accepted": false, "score": 0, "last_activity_date": 1560371979, "creation_date": 1560371979, "answer_id": 56570056, "question_id": 56569773, "link": "https://stackoverflow.com/questions/56569773/how-to-scrape-all-url-inside-a-columns-in-a-dataframe/56570056#56570056", "title": "How to scrape all url inside a columns in a dataframe", "body": "<p>Looks like there is a url in the data snapshot on <a href=\"https://www.kaggle.com/jtrofe/beer-recipes\" rel=\"nofollow noreferrer\">https://www.kaggle.com/jtrofe/beer-recipes</a>. The actual url you want to scrape from is <a href=\"https://www.brewersfriend.com/\" rel=\"nofollow noreferrer\">https://www.brewersfriend.com/</a> . Then for each line you would append the url from the dataset. </p>\n\n<p>For example the first one to scrape would be: \n <a href=\"https://www.brewersfriend.com/homebrew/recipe/view/1633/vanilla-cream-ale\" rel=\"nofollow noreferrer\">https://www.brewersfriend.com/homebrew/recipe/view/1633/vanilla-cream-ale</a></p>\n\n<p>In order to scrape this you could do something simple like: </p>\n\n<pre><code>from urllib.request import urlopen\nurl='https://www.brewersfriend.com/homebrew/recipe/view/1633/vanilla-cream-ale'\nhtml = urlopen(url)\nprint(html.read())\n#Then extract the rating from the html\n</code></pre>\n\n<p>Only issue is when I try and scrape it, I am getting a 403 Forbidden Error... but that would be a separate issue. </p>\n\n<p>Once you get the scrape working you can loop through every datapoint and scrape the ratings. Hopefully this helps you get going!</p>\n"}, {"comments": [{"owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "edited": false, "score": 0, "creation_date": 1560767763, "post_id": 56573384, "comment_id": 99830924, "body": "Did you try this?"}], "tags": [], "owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "is_accepted": false, "score": 0, "last_activity_date": 1560528538, "last_edit_date": 1560528538, "creation_date": 1560400134, "answer_id": 56573384, "question_id": 56569773, "link": "https://stackoverflow.com/questions/56569773/how-to-scrape-all-url-inside-a-columns-in-a-dataframe/56573384#56573384", "title": "How to scrape all url inside a columns in a dataframe", "body": "<p>You can mimic the POST request the page does to add additional rows and instead alter the records to be returned parameter to retrieve the total number of rows. You could either scrape the total number from the original page or hard code it in (given it is a fixed dataset). You can parse the json returned for all the links for the entire dataset and simply concatenate the domain and protocol onto the relative url as shown below.</p>\n\n<p>Do check the T&amp;Cs regarding using this endpoint/scraping.</p>\n\n<pre><code>import requests, re\n\np = re.compile(r'dataviewToken\":\"(.*?)\"')\np1 = re.compile(r'\"rowCount\":(\\d+)')\n\nwith requests.Session() as s:\n    r = s.get('https://www.kaggle.com/jtrofe/beer-recipes')   \n    token = p.findall(r.text)[0]\n    rows = int(p1.findall(r.text)[0])\n    data = {\"jwe\":{\"encryptedToken\": token},\"source\":{\"type\":3,\"dataset\":{\"url\":\"jtrofe/beer-recipes\",\"tableType\":1,\"csv\":{\"fileName\":\"recipeData.csv\",\"delimiter\":\",\",\"headerRows\":1}}},\"select\":[\"BeerID\",\"Name\",\"URL\",\"Style\",\"StyleID\",\"Size(L)\",\"OG\",\"FG\",\"ABV\",\"IBU\",\"Color\",\"BoilSize\",\"BoilTime\",\"BoilGravity\",\"Efficiency\",\"MashThickness\",\"SugarScale\",\"BrewMethod\",\"PitchRate\",\"PrimaryTemp\"],\"skip\":0,\"take\": rows}\n    base = 'https://www.brewersfriend.com'\n    r = s.post('https://www.kaggleusercontent.com/services/datasets/kaggle.dataview.v1.DataViewer/GetDataView', json = data).json()\n    links = [base + row['text'][2] for row in r['dataView']['rows']]]['rows']]\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 11637743, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bTBiYoUSr7U/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdCh9ijj2cPgwbA2h9mJUENNjrSew/mo/photo.jpg?sz=128", "display_name": "PythonStarter", "link": "https://stackoverflow.com/users/11637743/pythonstarter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 318, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1594218227, "creation_date": 1560370612, "last_edit_date": 1594218227, "question_id": 56569773, "link": "https://stackoverflow.com/questions/56569773/how-to-scrape-all-url-inside-a-columns-in-a-dataframe", "title": "How to scrape all url inside a columns in a dataframe", "body": "<p>Sorry for the question, but I'm new to python and for me this problem is very difficult.</p>\n<p>I'm working on this csv (<a href=\"https://www.kaggle.com/jtrofe/beer-recipes\" rel=\"nofollow noreferrer\">https://www.kaggle.com/jtrofe/beer-recipes</a>) and I need to do scraping.</p>\n<p>The problem is that in the column (URL) of data frame there is a part of a link and the main part (<a href=\"https://www.brewersfriend.com\" rel=\"nofollow noreferrer\">https://www.brewersfriend.com</a>) is not declared. I want to scrape the rating of various beers from every url.</p>\n<p>For me this is very complicated.</p>\n<p>I hope that someone can help me! Thanks a lot.</p>\n"}, {"tags": ["python", "xml", "csv", "for-loop", "rename"], "answers": [{"comments": [{"owner": {"reputation": 3527, "user_id": 6925185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6bd7821971973c8143f31356c85df3?s=128&d=identicon&r=PG&f=1", "display_name": "jottbe", "link": "https://stackoverflow.com/users/6925185/jottbe"}, "edited": false, "score": 1, "creation_date": 1560372189, "post_id": 56569964, "comment_id": 99719237, "body": "Just a small comment (because the original poster probably doesn&#39;t know that): we should use a with clause to open the file (with open(....) as Shot_30AA:) to ensure the file is closed in each case (also in case of an exception). Then we also do not need to call close ourselfes."}, {"owner": {"reputation": 432, "user_id": 8915326, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dvYlU.jpg?s=128&g=1", "display_name": "Inspi", "link": "https://stackoverflow.com/users/8915326/inspi"}, "reply_to_user": {"reputation": 3527, "user_id": 6925185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6bd7821971973c8143f31356c85df3?s=128&d=identicon&r=PG&f=1", "display_name": "jottbe", "link": "https://stackoverflow.com/users/6925185/jottbe"}, "edited": false, "score": 0, "creation_date": 1560437731, "post_id": 56569964, "comment_id": 99744568, "body": "@jottbe yes I agree with you but I didn&#39;t want to introduce too many new things to the OP"}], "tags": [], "owner": {"reputation": 432, "user_id": 8915326, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dvYlU.jpg?s=128&g=1", "display_name": "Inspi", "link": "https://stackoverflow.com/users/8915326/inspi"}, "is_accepted": true, "score": 0, "last_activity_date": 1560438486, "last_edit_date": 1560438486, "creation_date": 1560371486, "answer_id": 56569964, "question_id": 56569763, "link": "https://stackoverflow.com/questions/56569763/how-convert-multiple-xml-files-in-a-folder-in-csv-files-with-python/56569964#56569964", "title": "How convert multiple xml files in a folder in csv files with python?", "body": "<p>Here's what could work based on your code</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def make_csv(folderpath, xmlfilename):\n    tree = ET.parse(os.path.join(folderpath, xmlfilename))\n    root = tree.getroot()\n    filename, _ = xmlfilename.rsplit('.', 1)\n    Shot_30AA = open(filename+'.csv', 'w', newline='')\n    csvwriter = csv.writer(Shot_30AA)\n    head = []\n\n    ShotCode = root.attrib['ShotCode']\n    csvwriter.writerow(['ShotCode', ShotCode])\n    head.append(ShotCode)\n\n    for member in root.getchildren():\n        submembers = member.getchildren()\n        keys = submembers[0].attrib.keys()\n        csvwriter.writerow(\"\\n\")\n        csvwriter.writerow(keys)\n        for submember in submembers:\n            row_data = [submember.attrib[k] for k in keys]\n            csvwriter.writerow(row_data)\n    Shot_30AA.close()\n\npath = 'C:/Users/Desktop/Program'\nfor filename in os.listdir(path):\n    if filename.endswith('.xml'):\n        make_csv(path, filename)\n</code></pre>\n\n<p>EDIT 1: As the comments pointed out, you should also take a look at the <a href=\"https://www.pythonforbeginners.com/files/with-statement-in-python\" rel=\"nofollow noreferrer\">with open() as clause</a> when dealing with files</p>\n"}], "owner": {"reputation": 25, "user_id": 11632404, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Ecmuglug-kg/AAAAAAAAAAI/AAAAAAAAAB4/IILud_wyP1w/photo.jpg?sz=128", "display_name": "user11632404", "link": "https://stackoverflow.com/users/11632404/user11632404"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2073, "favorite_count": 1, "accepted_answer_id": 56569964, "answer_count": 1, "score": 1, "last_activity_date": 1560438486, "creation_date": 1560370587, "last_edit_date": 1560373243, "question_id": 56569763, "link": "https://stackoverflow.com/questions/56569763/how-convert-multiple-xml-files-in-a-folder-in-csv-files-with-python", "title": "How convert multiple xml files in a folder in csv files with python?", "body": "<p>1-I ready have a code than convert de xml file to csv. But actually I need to do this operation a lot times and then a need to change the name of the xml file in my program each time.I want to do a loop to read each '.xml' file in the folder location and do for all file. there is my original code</p>\n\n<pre><code>import xml.etree.ElementTree as ET\nimport csv\n\ntree = ET.parse(\"Shot_30AA.xml\")\nroot = tree.getroot()\n\nShot_30AA = open('Shot_30AA.csv', 'w', newline='')\ncsvwriter = csv.writer(Shot_30AA)\nhead = []\n\nShotCode = root.attrib['ShotCode']\ncsvwriter.writerow(['ShotCode', ShotCode])\nhead.append(ShotCode)\n\nfor member in root.getchildren():\n  submembers = member.getchildren()\n  keys = submembers[0].attrib.keys()\n  csvwriter.writerow (\"\\n\")\n  csvwriter.writerow(keys)\n  for submember in submembers:\n    row_data = [submember.attrib[k] for k in keys]\n    csvwriter.writerow(row_data )\nShot_30AA.close()\n</code></pre>\n\n<p>I tried to do this operation in my file folder adding the fallowing code to do only one time </p>\n\n<pre><code>path = 'C:/Users/Desktop/Program'\nfor filename in os.listdir(path):\n   if not filename.endswith('.xml'): continue\n     ShotFile = os.path.join(path, filename)\n     tree = ET.parse(ShotFile)\n     root = tree.getroot()\n\n     filename = open( filename'.csv', 'w', newline='')\n     csvwriter = csv.writer(filename)\n     head = [] \n\n     ShotFile = open('ShotFile.csv', 'w', newline='')\n     csvwriter = csv.writer(Shot_30AA)\n     head = []\n\n     ShotCode = root.attrib['ShotCode']\n     csvwriter.writerow(['ShotCode', ShotCode])\n     head.append(ShotCode)\n\n     for member in root.getchildren():\n       submembers = member.getchildren()\n       keys = submembers[0].attrib.keys()\n       csvwriter.writerow (\"\\n\")\n       csvwriter.writerow(keys)\n       for submember in submembers:\n         row_data = [submember.attrib[k] for k in keys]\n         csvwriter.writerow(row_data )\n  ShotFile.close()\n</code></pre>\n\n<p>I expect to obtain all my files in csv format with one run.</p>\n"}, {"tags": ["python", "numpy", "sharepoint", "site-packages"], "comments": [{"owner": {"reputation": 1488, "user_id": 1698346, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/cQykZ.jpg?s=128&g=1", "display_name": "MoMo", "link": "https://stackoverflow.com/users/1698346/momo"}, "edited": false, "score": 1, "creation_date": 1560373309, "post_id": 56569758, "comment_id": 99719657, "body": "Welcome to Stack Overflow. Please include a snippet of your code. This will help get assistance from others."}, {"owner": {"reputation": 1069, "user_id": 3283333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2363a3623beb1efba518c1896bc92e66?s=128&d=identicon&r=PG&f=1", "display_name": "Christian", "link": "https://stackoverflow.com/users/3283333/christian"}, "edited": false, "score": 0, "creation_date": 1560429299, "post_id": 56569758, "comment_id": 99738939, "body": "Hello, could you also specify the error you get ?"}, {"owner": {"reputation": 1, "user_id": 11638858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a03cd3100344799e5fa229e665c550ac?s=128&d=identicon&r=PG&f=1", "display_name": "mPayne", "link": "https://stackoverflow.com/users/11638858/mpayne"}, "edited": false, "score": 0, "creation_date": 1560430735, "post_id": 56569758, "comment_id": 99739890, "body": "Error added to edit. Depeneding on machine and numpy version i get different errors and all occur during import. Code does not start."}], "owner": {"reputation": 1, "user_id": 11638858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a03cd3100344799e5fa229e665c550ac?s=128&d=identicon&r=PG&f=1", "display_name": "mPayne", "link": "https://stackoverflow.com/users/11638858/mpayne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 454, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560434513, "creation_date": 1560370549, "last_edit_date": 1560434513, "question_id": 56569758, "link": "https://stackoverflow.com/questions/56569758/include-python-site-package-in-project-folder", "title": "Include Python Site-package in project folder", "body": "<p>I've copied some site-packages to my projects subfolder. I want to force python to import numpy from project directory with:</p>\n\n<p><code>from project_packages import numpy as np</code></p>\n\n<p>Unfortunately during compilation i get error that refers to main site-packages path:</p>\n\n<p><code>C:\\Users\\user\\AppData\\Local\\Programs\\Python\\Python37\\Lib\\site-packages\\numpy</code></p>\n\n<p>I'm deploying this program for multiple location within company. Unfortunately in some locations there is different Windows environment. They have one virtual machine with software installed that has multiple users that use the same software. They have already some old Anaconda with old packages installed and their versions do not match with site-packages versions used in my project. IT says it needs to stay as it is. My code is stored on sharepoint and launched from excel file. I thought i could include (Copy>Paste) required site-packages within project folder. I've managed to do so with pandas and i have no errors. Unfortunately I get error with numpy. What should I do to make numpy work from project's folder.</p>\n\n<p>It doesn't seem to be the cleanest solution but we are not allowed to distribute any executable or code files within company. Code needs to stay on sharepoint.</p>\n\n<p>Best solution is where the only requirement for the user was to have python 3 installed and the rest of the code could be launched from sharepoint.</p>\n\n<p>I believe my main mistake is copying numpy from site-packages to project folder with it's dependencies to old location? I don't know hot to move these packages differently. When using:</p>\n\n<p><code>pip install numpy==1.15.1 my/project/path</code></p>\n\n<p>i get:\n<code>* directory is not installable</code></p>\n\n<p>error code below:</p>\n\n<pre><code>data type not understood\n  File \"C:\\Users\\MM\\Desktop\\Python\\test\\p\\numpy\\core\\arrayprint.py\", line 1336, in dtype_is_implied\n    dtype = np.dtype(dtype)\n  File \"C:\\Users\\MM\\Desktop\\Python\\test\\p\\numpy\\core\\arrayprint.py\", line 1421, in array_repr\n    skipdtype = dtype_is_implied(arr.dtype) and arr.size &gt; 0\n  File \"C:\\Users\\MM\\Desktop\\Python\\test\\p\\numpy\\core\\getlimits.py\", line 81, in __init__\n    self.precision = int(-log10(self.eps))\n  File \"C:\\Users\\MM\\Desktop\\Python\\test\\p\\numpy\\core\\getlimits.py\", line 125, in &lt;module&gt;\n    tiny=_f16(2 ** -14))\n  File \"C:\\Users\\MM\\Desktop\\Python\\test\\p\\numpy\\core\\__init__.py\", line 51, in &lt;module&gt;\n    from . import getlimits\n  File \"C:\\Users\\MM\\Desktop\\Python\\test\\p\\numpy\\__init__.py\", line 152, in &lt;module&gt;\n    from . import core\n  File \"C:\\Users\\MM\\Desktop\\Python\\test\\test.py\", line 1, in &lt;module&gt;\n    from p import numpy as pd```\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "keras", "deep-learning"], "comments": [{"owner": {"reputation": 27093, "user_id": 5189811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FzPWr.png?s=128&g=1", "display_name": "Oluwafemi Sule", "link": "https://stackoverflow.com/users/5189811/oluwafemi-sule"}, "edited": false, "score": 0, "creation_date": 1560370744, "post_id": 56569755, "comment_id": 99718698, "body": "Please included the redacted traceback"}, {"owner": {"reputation": 375, "user_id": 11579387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a4113e9e29d15a58d3d602cd1be829a?s=128&d=identicon&r=PG&f=1", "display_name": "mimus", "link": "https://stackoverflow.com/users/11579387/mimus"}, "reply_to_user": {"reputation": 27093, "user_id": 5189811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FzPWr.png?s=128&g=1", "display_name": "Oluwafemi Sule", "link": "https://stackoverflow.com/users/5189811/oluwafemi-sule"}, "edited": false, "score": 0, "creation_date": 1560370924, "post_id": 56569755, "comment_id": 99718768, "body": "srry i already done it, thank you"}], "answers": [{"tags": [], "owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "is_accepted": true, "score": 4, "last_activity_date": 1560378183, "creation_date": 1560378183, "answer_id": 56571104, "question_id": 56569755, "link": "https://stackoverflow.com/questions/56569755/invalidargumenterror-on-keras-and-python/56571104#56571104", "title": "InvalidArgumentError on keras and python", "body": "<p>In both of your embeddings:</p>\n\n<pre><code>embedded_text = layers.Embedding(64, text_vocabulary_size)(text_input)\nembedded_question = layers.Embedding(32, question_vocabulary_size)(question_input)\n</code></pre>\n\n<p>I think you have put the parameters in the reverse order, the first parameter is the vocabulary size, and the second is the output embedding size, so it should be:</p>\n\n<pre><code>embedded_text = layers.Embedding(text_vocabulary_size, 64)(text_input)\nembedded_question = layers.Embedding(question_vocabulary_size, 32)(question_input)\n</code></pre>\n\n<p>You can always check this in the <a href=\"https://keras.io/layers/embeddings/\" rel=\"nofollow noreferrer\">keras documentation</a>.</p>\n"}], "owner": {"reputation": 375, "user_id": 11579387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a4113e9e29d15a58d3d602cd1be829a?s=128&d=identicon&r=PG&f=1", "display_name": "mimus", "link": "https://stackoverflow.com/users/11579387/mimus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 56571104, "answer_count": 1, "score": 1, "last_activity_date": 1560378183, "creation_date": 1560370534, "last_edit_date": 1560370877, "question_id": 56569755, "link": "https://stackoverflow.com/questions/56569755/invalidargumenterror-on-keras-and-python", "title": "InvalidArgumentError on keras and python", "body": "<p>im getting this error when i try to train a net (in python 3.7), i get this exercise from the book deep learning in python(chollet's book page 261, 7th chapter). i tried to put +1 on the text_vocabulary_size but it does not work U.U here is my code and the error</p>\n\n<p>code:</p>\n\n<pre><code>from keras.models import Model\nfrom keras import layers\nfrom keras import Input\ntext_vocabulary_size = 10000\nquestion_vocabulary_size = 10000\nanswer_vocabulary_size = 500\ntext_input = Input(shape=(None,), dtype='int32', name='text')\nembedded_text = layers.Embedding(64, text_vocabulary_size)(text_input)\nencoded_text = layers.LSTM(32)(embedded_text)\nquestion_input = Input(shape=(None,), dtype='int32', name='question')\nembedded_question = layers.Embedding(32, question_vocabulary_size)(question_input)\nencoded_question = layers.LSTM(16)(embedded_question)\nconcatenated = layers.concatenate([encoded_text, encoded_question], axis=-1)\nanswer = layers.Dense(answer_vocabulary_size, activation='softmax')(concatenated)\nmodel = Model([text_input, question_input], answer)\nmodel.compile(optimizer='rmsprop', loss='categorical_crossentropy', metrics=['acc'])\n\n\nimport numpy as np\nnum_samples = 1000\nmax_length = 100\ntext = np.random.randint(1, text_vocabulary_size, size=(num_samples, max_length))\n\nquestion = np.random.randint(1, question_vocabulary_size, size=(num_samples, max_length))\nanswers = np.random.randint(0, 1, size=(num_samples, answer_vocabulary_size))\nmodel.fit([text, question], answers, epochs=10, batch_size=128)\nmodel.fit({'text': text, 'question': question}, answers, epochs=10, batch_size=128)\n</code></pre>\n\n<p>error:</p>\n\n<pre><code>InvalidArgumentError: indices[124,0] = 190 is not in [0, 64)\n     [[{{node embedding_33/embedding_lookup}}]]\n</code></pre>\n\n<p>and here is the summary of the net, i hope it helps</p>\n\n<pre><code>__________________________________________________________________________________________________\nLayer (type)                    Output Shape         Param #     Connected to                     \n==================================================================================================\ntext (InputLayer)               (None, None)         0                                            \n__________________________________________________________________________________________________\nquestion (InputLayer)           (None, None)         0                                            \n__________________________________________________________________________________________________\nembedding_33 (Embedding)        (None, None, 10000)  640000      text[0][0]                       \n__________________________________________________________________________________________________\nembedding_34 (Embedding)        (None, None, 10000)  320000      question[0][0]                   \n__________________________________________________________________________________________________\nlstm_33 (LSTM)                  (None, 32)           1284224     embedding_33[0][0]               \n__________________________________________________________________________________________________\nlstm_34 (LSTM)                  (None, 16)           641088      embedding_34[0][0]               \n__________________________________________________________________________________________________\nconcatenate_17 (Concatenate)    (None, 48)           0           lstm_33[0][0]                    \n                                                                 lstm_34[0][0]                    \n__________________________________________________________________________________________________\ndense_17 (Dense)                (None, 500)          24500       concatenate_17[0][0]             \n==================================================================================================\nTotal params: 2,909,812\nTrainable params: 2,909,812\nNon-trainable params: 0\n</code></pre>\n\n<p>and the traceback</p>\n\n<pre><code>InvalidArgumentError                      Traceback (most recent call last)\n&lt;ipython-input-52-556d838d7025&gt; in &lt;module&gt;\n      6 question = np.random.randint(1, question_vocabulary_size, size=(num_samples, max_length))\n      7 answers = np.random.randint(0, 1, size=(num_samples, answer_vocabulary_size))\n----&gt; 8 model.fit([text, question], answers, epochs=10, batch_size=128)\n      9 model.fit({'text': text, 'question': question}, answers, epochs=10, batch_size=128)\n\n~\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\keras\\engine\\training.py in fit(self, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, steps_per_epoch, validation_steps, **kwargs)\n   1037                                         initial_epoch=initial_epoch,\n   1038                                         steps_per_epoch=steps_per_epoch,\n-&gt; 1039                                         validation_steps=validation_steps)\n   1040 \n   1041     def evaluate(self, x=None, y=None,\n\n~\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\keras\\engine\\training_arrays.py in fit_loop(model, f, ins, out_labels, batch_size, epochs, verbose, callbacks, val_f, val_ins, shuffle, callback_metrics, initial_epoch, steps_per_epoch, validation_steps)\n    197                     ins_batch[i] = ins_batch[i].toarray()\n    198 \n--&gt; 199                 outs = f(ins_batch)\n    200                 outs = to_list(outs)\n    201                 for l, o in zip(out_labels, outs):\n\n~\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\keras\\backend\\tensorflow_backend.py in __call__(self, inputs)\n   2713                 return self._legacy_call(inputs)\n   2714 \n-&gt; 2715             return self._call(inputs)\n   2716         else:\n   2717             if py_any(is_tensor(x) for x in inputs):\n\n~\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\keras\\backend\\tensorflow_backend.py in _call(self, inputs)\n   2673             fetched = self._callable_fn(*array_vals, run_metadata=self.run_metadata)\n   2674         else:\n-&gt; 2675             fetched = self._callable_fn(*array_vals)\n   2676         return fetched[:len(self.outputs)]\n   2677 \n\n~\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\client\\session.py in __call__(self, *args, **kwargs)\n   1437           ret = tf_session.TF_SessionRunCallable(\n   1438               self._session._session, self._handle, args, status,\n-&gt; 1439               run_metadata_ptr)\n   1440         if run_metadata:\n   1441           proto_data = tf_session.TF_GetBuffer(run_metadata_ptr)\n\n~\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\framework\\errors_impl.py in __exit__(self, type_arg, value_arg, traceback_arg)\n    526             None, None,\n    527             compat.as_text(c_api.TF_Message(self.status.status)),\n--&gt; 528             c_api.TF_GetCode(self.status.status))\n    529     # Delete the underlying status object from memory otherwise it stays alive\n    530     # as there is a reference to status from this from the traceback due to\n\nInvalidArgumentError: indices[124,0] = 190 is not in [0, 64)\n     [[{{node embedding_33/embedding_lookup}}]]\n</code></pre>\n\n<p>thank u all in advance</p>\n"}, {"tags": ["python", "pandas", "datetime", "matplotlib"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 11232643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c62d6445eee2f92c3ae22835f9da053?s=128&d=identicon&r=PG&f=1", "display_name": "francescab", "link": "https://stackoverflow.com/users/11232643/francescab"}, "edited": false, "score": 0, "creation_date": 1560419465, "post_id": 56571780, "comment_id": 99733453, "body": "Thank you very much! This worked. If anyone knows the reason it could be useful information to add. Changing the order of the plots worked perfectly. Sorry about the data not being reproducible. I will do better next time."}], "tags": [], "owner": {"reputation": 497, "user_id": 11547056, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WH8IRrFLmic/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd5XYkUMzJKSICt7ewlw34CQrft2Q/mo/photo.jpg?sz=128", "display_name": "pnovotnyq", "link": "https://stackoverflow.com/users/11547056/pnovotnyq"}, "is_accepted": true, "score": 1, "last_activity_date": 1560384568, "last_edit_date": 1560384568, "creation_date": 1560384203, "answer_id": 56571780, "question_id": 56569712, "link": "https://stackoverflow.com/questions/56569712/can-i-plot-pandas-dataframe-and-normal-line-from-function-or-array-in-the-same-s/56571780#56571780", "title": "Can I plot pandas.DataFrame and normal line from function or array in the same subplot?", "body": "<p>I used your data as much as possible. Your example is not fully reproducible as it is. Anyway, changing the order in which to plot the line, set limits and plot the DataFrame solved it for me. The DataFrame has to go last. Sorry, no idea why...<br>\nThe data I used:</p>\n\n<pre><code>Task           1020     1021     1022      1023     7141\n2019-03-31      NaN      NaN      NaN   32930.0      NaN\n2019-04-30  28845.0  16695.0  27427.5  127476.0      NaN\n2019-05-31  57465.0  85745.0      NaN  142561.0  3515.61\n2019-06-30      NaN  90515.0      NaN       NaN      NaN\n</code></pre>\n\n<p>Parsing the data:</p>\n\n<pre><code>import pandas as pd\nfrom datetime import datetime\nimport matplotlib.pyplot as plt\ndf = pd.read_clipboard(sep='\\s\\s+')\ndf['Task'] = pd.to_datetime(df['Task'])\ndf = df.set_index('Task')\nstart_month = datetime.strptime('2019-03', \"%Y-%m\")\nend_month = datetime.strptime('2022-03', \"%Y-%m\")\nbudget = [0, 1000000]\n</code></pre>\n\n<p>And the plotting part. Note that the df goes last:</p>\n\n<pre><code>fig, ax1 = plt.subplots()\nax1.plot([start_month, end_month], budget, '-', label='budget')\ndf.groupby(df.index).cumsum().plot(ax=ax1, style='.-', xlim=(start_month, end_month))\nax1.legend()\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 11232643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c62d6445eee2f92c3ae22835f9da053?s=128&d=identicon&r=PG&f=1", "display_name": "francescab", "link": "https://stackoverflow.com/users/11232643/francescab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 56571780, "answer_count": 1, "score": 1, "last_activity_date": 1560394763, "creation_date": 1560370298, "last_edit_date": 1560394763, "question_id": 56569712, "link": "https://stackoverflow.com/questions/56569712/can-i-plot-pandas-dataframe-and-normal-line-from-function-or-array-in-the-same-s", "title": "Can I plot pandas.DataFrame and normal line from function or array in the same subplot?", "body": "<p>I have a pandas <code>DataFrame</code> that is stacked and reorganized as I wish and looks like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>print(df.unstack(level=0).cumsum())\nTask           1020     1021     1022      1023     7141\nEntry Date                                              \n2019-03-31      NaN      NaN      NaN   32930.0      NaN\n2019-04-30  28845.0  16695.0  27427.5  127476.0      NaN\n2019-05-31  57465.0  85745.0      NaN  142561.0  3515.61\n2019-06-30      NaN  90515.0      NaN       NaN      NaN\n</code></pre>\n\n<p>This I plot with the following lines:</p>\n\n<pre><code>fig, ax1 = plt.subplots(1)\ngrouped_by_task.unstack(level=0).cumsum().plot(ax=ax1, style = '.-')\n</code></pre>\n\n<p>Now, I want to add another graph (for the case of simplicity a straight line between two points).</p>\n\n<p>These endpoints of this line is given by:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>startmonth = '2019-03'\nendmonth = '2022-03'\nstart_month = datetime.strptime(startmonth, \"%Y-%m\")\nend_month = datetime.strptime(endmonth, \"%Y-%m\")\nbudget = [0, 1000000]\ntimes = [start_month, end_month]\n</code></pre>\n\n<p>I am struggling with getting the line subplot on the same plot.</p>\n\n<p>I have found several discussions on how to add data from several <code>DataFrame</code>s in the same subplot, but not a pandas <code>DataFrame</code> together with values not in a <code>DataFrame</code>.</p>\n\n<p>I try plotting with the following lines:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>grouped_by_task.unstack(level=0).cumsum().plot(ax=ax1, style = '.-') # (1)\nax1.plot(times, budget, '-')                                         # (2)\nplt.xlim(datetime.strptime(startmonth, \"%Y-%m\"), \n         datetime.strptime(endmonth, \"%Y-%m\")                        # (3)\n</code></pre>\n\n<p>With only line (1) I get a plot where both x and y axis are determined by the data in the <code>DataFrame</code>. </p>\n\n<p><a href=\"https://i.stack.imgur.com/OMuZl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OMuZl.png\" alt=\"Only DataFrame\"></a></p>\n\n<p>With line (3) as well the x-axis is determined correctly (longer than the data available in the <code>DataFrame</code>).</p>\n\n<p><a href=\"https://i.stack.imgur.com/Wv7bB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Wv7bB.png\" alt=\"DataFrame plotted with x-axis redefined\"></a></p>\n\n<p>With all 3 lines I get the y-axis adjusted to values according to the data in line (2), but without the line.</p>\n\n<p><a href=\"https://i.stack.imgur.com/z9txE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/z9txE.png\" alt=\"Y-axis readjusted according to line, but line not plotted\"></a></p>\n\n<p>If I comment out line (1) I get the line plotted correctly.</p>\n\n<p><a href=\"https://i.stack.imgur.com/0Vgn4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0Vgn4.png\" alt=\"Line shows up when DataFrame not plotted\"></a></p>\n\n<p>The only difference is that the values at the tics of the x-axis are written differently.</p>\n\n<p>Any suggestions on what I am doing wrong? </p>\n"}, {"tags": ["python", "printing", "precision"], "comments": [{"owner": {"reputation": 1113, "user_id": 7588528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c324db55440fa76ec00cbcff6ae019ae?s=128&d=identicon&r=PG&f=1", "display_name": "DSC", "link": "https://stackoverflow.com/users/7588528/dsc"}, "edited": false, "score": 0, "creation_date": 1560370580, "post_id": 56569690, "comment_id": 99718636, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/15619096/add-zeros-to-a-float-after-the-decimal-point-in-python\">Add zeros to a float after the decimal point in Python</a>"}, {"owner": {"reputation": 84, "user_id": 10593130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcc36714ad18c4140a1034c2f66b6877?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Hadjigeorgiou", "link": "https://stackoverflow.com/users/10593130/andreas-hadjigeorgiou"}, "reply_to_user": {"reputation": 1113, "user_id": 7588528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c324db55440fa76ec00cbcff6ae019ae?s=128&d=identicon&r=PG&f=1", "display_name": "DSC", "link": "https://stackoverflow.com/users/7588528/dsc"}, "edited": false, "score": 0, "creation_date": 1560371026, "post_id": 56569690, "comment_id": 99718795, "body": "Indeed the question is answered in the link above, however I could not find it because of the way the question is formulated. Also, the the question is about writing in files (it is slightly different)"}, {"owner": {"reputation": 1113, "user_id": 7588528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c324db55440fa76ec00cbcff6ae019ae?s=128&d=identicon&r=PG&f=1", "display_name": "DSC", "link": "https://stackoverflow.com/users/7588528/dsc"}, "edited": false, "score": 0, "creation_date": 1560371135, "post_id": 56569690, "comment_id": 99718844, "body": "Aren&#39;t you also writing in files?"}, {"owner": {"reputation": 5879, "user_id": 8150685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WV7OV.jpg?s=128&g=1", "display_name": "Error - Syntactical Remorse", "link": "https://stackoverflow.com/users/8150685/error-syntactical-remorse"}, "edited": false, "score": 0, "creation_date": 1560371178, "post_id": 56569690, "comment_id": 99718859, "body": "@AndreasHadjigeorgiou A <code>str</code> is a <code>str</code> it will all act the same whether printed or written."}, {"owner": {"reputation": 84, "user_id": 10593130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcc36714ad18c4140a1034c2f66b6877?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Hadjigeorgiou", "link": "https://stackoverflow.com/users/10593130/andreas-hadjigeorgiou"}, "reply_to_user": {"reputation": 5879, "user_id": 8150685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WV7OV.jpg?s=128&g=1", "display_name": "Error - Syntactical Remorse", "link": "https://stackoverflow.com/users/8150685/error-syntactical-remorse"}, "edited": false, "score": 0, "creation_date": 1560371344, "post_id": 56569690, "comment_id": 99718940, "body": "@Error-SyntacticalRemorse Yes indeed, you are right. At least, I think is easier now to detect the question for that type of problem, as I when I searched for my problem I could not find the older one."}], "answers": [{"tags": [], "owner": {"reputation": 5879, "user_id": 8150685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WV7OV.jpg?s=128&g=1", "display_name": "Error - Syntactical Remorse", "link": "https://stackoverflow.com/users/8150685/error-syntactical-remorse"}, "is_accepted": true, "score": 0, "last_activity_date": 1560371071, "creation_date": 1560371071, "answer_id": 56569871, "question_id": 56569690, "link": "https://stackoverflow.com/questions/56569690/in-python-how-can-i-write-floating-point-numbers-in-a-file-using-a-specified-nu/56569871#56569871", "title": "In Python: How can I write floating point numbers in a file using a specified number of figures?", "body": "<p>You can do this several ways:</p>\n\n<pre><code>print(\"%.3f \" % my_float_value) # Using formatting for Python2.7\n</code></pre>\n\n<p>or</p>\n\n<pre><code>print(\"{0:.3f} \".format(my_float_value)) # Using modern string formatting\n</code></pre>\n\n<p>or</p>\n\n<pre><code>print(f\"{my_float_value:.3f}\") # A newer form of string formatting\n</code></pre>\n"}], "owner": {"reputation": 84, "user_id": 10593130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcc36714ad18c4140a1034c2f66b6877?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Hadjigeorgiou", "link": "https://stackoverflow.com/users/10593130/andreas-hadjigeorgiou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 56569871, "answer_count": 1, "score": 0, "last_activity_date": 1560371071, "creation_date": 1560370198, "question_id": 56569690, "link": "https://stackoverflow.com/questions/56569690/in-python-how-can-i-write-floating-point-numbers-in-a-file-using-a-specified-nu", "title": "In Python: How can I write floating point numbers in a file using a specified number of figures?", "body": "<p>I am trying to write in a file floating point values but I want always to have the numbers represented with 4 figures/numbers.</p>\n\n<p>I already did this for <strong>integers</strong> using the command:</p>\n\n<pre><code>f.write(\"%04d \" % my_int_value)\n</code></pre>\n\n<p>In that case if <em>my_int_value</em> is <strong>25</strong> it will print in the file:</p>\n\n<pre><code>0025\n</code></pre>\n\n<p>if <em>my_int_value</em> = <strong>2</strong> it will print in the file:</p>\n\n<pre><code>0002\n</code></pre>\n\n<p><em>which is exactly what I am looking for!</em></p>\n\n<p><strong>Then</strong>, I tried to do the same for floating point numbers using the command:</p>\n\n<pre><code>f.write(\"%04f \" % my_float_value)\n</code></pre>\n\n<p>but now it does not work.</p>\n\n<p>For example if <em>my_float_value</em> = <strong>0.03</strong> I would like to print in the file <strong>0.030</strong></p>\n\n<p>Is this possible? \nand if it is how could someone do it?</p>\n"}, {"tags": ["python", "pyqt", "pyqt5"], "comments": [{"owner": {"reputation": 4599, "user_id": 2055064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/815c89ab1784fd780fe7faf44ebfc79f?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/2055064/thomas"}, "edited": false, "score": 0, "creation_date": 1560372114, "post_id": 56569678, "comment_id": 99719201, "body": "buffer maintains a position, how can that work?"}, {"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "reply_to_user": {"reputation": 4599, "user_id": 2055064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/815c89ab1784fd780fe7faf44ebfc79f?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/2055064/thomas"}, "edited": false, "score": 0, "creation_date": 1560372457, "post_id": 56569678, "comment_id": 99719341, "body": "@Thomas <code>self.buffer.seek(0)</code> rewinds it when the audio output runs out of audio samples."}, {"owner": {"reputation": 4599, "user_id": 2055064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/815c89ab1784fd780fe7faf44ebfc79f?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/2055064/thomas"}, "reply_to_user": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 0, "creation_date": 1560372637, "post_id": 56569678, "comment_id": 99719403, "body": "@NikosC. I understood &quot; continuously read and write&quot; to mean more or less concurrently. then reading and writing to the same buffer would interfere with each other."}, {"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "reply_to_user": {"reputation": 4599, "user_id": 2055064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/815c89ab1784fd780fe7faf44ebfc79f?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/2055064/thomas"}, "edited": false, "score": 0, "creation_date": 1560372883, "post_id": 56569678, "comment_id": 99719497, "body": "@Thomas Correct. The question was whether doing something like that would solve the gap in each loop."}, {"owner": {"reputation": 4599, "user_id": 2055064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/815c89ab1784fd780fe7faf44ebfc79f?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/2055064/thomas"}, "reply_to_user": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 0, "creation_date": 1560373092, "post_id": 56569678, "comment_id": 99719581, "body": "@NikosC. actually, that wasn&#39;t the question ..."}], "answers": [{"comments": [{"owner": {"reputation": 18847, "user_id": 2001654, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/yERLj.jpg?s=128&g=1", "display_name": "musicamante", "link": "https://stackoverflow.com/users/2001654/musicamante"}, "edited": false, "score": 0, "creation_date": 1560377732, "post_id": 56570178, "comment_id": 99720906, "body": "This will work only in the situation for which the buffer exactly contains a full sine wave cycle (or multiple complete cycles) and it also matches the audio buffer the audio device usually requests. As soon as you change the frequency to a different value (excluding harmonic multiples or divisions) you&#39;ll have issues with the buffer being restarted outside the 0 y-point of the sine function, also due to the fact that the notify signal is not always precise."}], "tags": [], "owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1560372651, "creation_date": 1560372651, "answer_id": 56570178, "question_id": 56569678, "link": "https://stackoverflow.com/questions/56569678/is-it-possible-to-write-to-a-qbuffer-thats-currently-being-read/56570178#56570178", "title": "Is it possible to write to a QBuffer that&#39;s currently being read?", "body": "<p>I don't currently have PyQt set up to test it myself, but try the following:</p>\n\n<p>Use the <a href=\"https://doc.qt.io/qt-5/qaudiooutput.html#notify\" rel=\"nofollow noreferrer\">QAudioOutput::notify()</a> signal. Calculate the duration of the buffer's audio in milliseconds. Use that as the interval with <code>setNotifyInterval()</code>. Connect <code>notify</code> instead of <code>stateChanged</code> to your <code>replay</code> method. Do not check for <code>QAudio.IdleState</code>, just rewind the buffer.</p>\n"}, {"tags": [], "owner": {"reputation": 18847, "user_id": 2001654, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/yERLj.jpg?s=128&g=1", "display_name": "musicamante", "link": "https://stackoverflow.com/users/2001654/musicamante"}, "is_accepted": false, "score": 1, "last_activity_date": 1560375956, "last_edit_date": 1560375956, "creation_date": 1560375017, "answer_id": 56570625, "question_id": 56569678, "link": "https://stackoverflow.com/questions/56569678/is-it-possible-to-write-to-a-qbuffer-thats-currently-being-read/56570625#56570625", "title": "Is it possible to write to a QBuffer that&#39;s currently being read?", "body": "<p>I think you've slightly misunderstood how QAudioOutput (and audio device objects in general) behaves, reads and plays audio data.</p>\n\n<p>When you <code>play()</code> a QIODevice, the QAudioOutput instance reads a chunk of data according to the audio device buffer setting (but it's <em>not</em> always the same as <code>bufferSize()</code>) and \"sends\" it to the hardware device which actually plays it: reading data and \"playing\" are asynchronous. What <code>play()</code> does is to call QIODevice.readData(maxLen), where maxLen is some data length the audio device needs in order to ensure that the audio buffer is continuously filled, otherwise you'll get a buffer underrun, meaning that the device is trying to play but has no data to do it.</p>\n\n<p>In your case it also means that at a certain point the audio device could request some data to the data buffer <em>over</em> its length, so you'll need to add more data to return.</p>\n\n<p>Also, if you wait for the stateChanged signal, it means that there is no more data to read from the data buffer (which is <em>not</em> the audio device buffer); at this point, QAudioDevice stops the audio device and clears its buffer, so if you \"replay\", you will obviously hear a gap, as the device is being \"restarted\".</p>\n\n<p>If you want to play some data in loop, you will need to implement your own QIODevice, as it has to continuously feed the audio device once it's reached its end.\nPlease note that this is a minimal example, you might want to further implement writing to the data buffer (and update its seek position)</p>\n\n<pre><code>class AudioBuffer(QIODevice):\n    def __init__(self):\n        QIODevice.__init__(self)\n        self.bytePos = 0\n        self.data = QByteArray()\n        for i in range(round(1 * sample_rate)):\n            t = i / sample_rate\n            value = int(volume * sin(2 * pi * frequency * t))\n            self.data.append(struct.pack(\"&lt;h\", value))\n\n    def seek(self, pos):\n        self.bytePos = pos\n        return True\n\n    def readData(self, maxLen):\n        data = self.data[self.bytePos:self.bytePos + maxLen]\n        if len(data) &lt; maxLen:\n            # we've reached the end of the data, restart from 0\n            # so the wave is continuing from its beginning\n            self.bytePos = maxLen - len(data)\n            data += self.data[:self.bytePos]\n        else:\n            self.bytePos += maxLen\n        return data.data()\n\n\nclass Window(QWidget):\n    def __init__(self, parent=None):\n        QWidget.__init__(self, parent)\n\n        layout = QHBoxLayout()\n        self.setLayout(layout)\n        self.playButton = QPushButton('Play')\n        self.playButton.setCheckable(True)\n        self.playButton.toggled.connect(self.togglePlay)\n        layout.addWidget(self.playButton)\n\n        format = QAudioFormat()\n        format.setChannelCount(1)\n        format.setSampleRate(sample_rate)\n        format.setSampleSize(sample_size)\n        format.setCodec(\"audio/pcm\")\n        format.setByteOrder(QAudioFormat.LittleEndian)\n        format.setSampleType(QAudioFormat.SignedInt)\n\n        self.output = QAudioOutput(format, self)\n        self.output.stateChanged.connect(self.stateChanged)\n\n        self.buffer = AudioBuffer()\n        self.buffer.open(QIODevice.ReadWrite)\n\n    def togglePlay(self, state):\n        self.buffer.seek(0)\n        if state:\n            self.output.start(self.buffer)\n        else:\n            self.output.reset()\n\n    def stateChanged(self, state):\n        self.playButton.blockSignals(True)\n        self.playButton.setChecked(state == QAudio.ActiveState)\n        self.playButton.blockSignals(False)\n</code></pre>\n\n<p>That said, I've played a bit with QAudioDevice and I'm afraid it's not very reliable, at least under PyQt/PySide. While it works fine for small examples and simple cases, it becomes unreliable if you need to do something else that require some processing while playing audio (for example complex widget/QGraphics paintings), and using QThreads won't help you as you would think: for example, under MacOS you cannot <code>moveToThread()</code> a QAudioOutput.<br>\nI strongly suggest you to use PyAudio, which has classes that behave in a similar way as QAudioOutput but can work in a different thread. Obviously, if you still need continuous playing, the \"readData\" issue remains the same, as you'll need some data object that can cycle itself.</p>\n\n<p>PS: The title of this question is a bit off the topic at hand, you might think about changing it. Btw, the answer is no, as reading and writing of a IODevice cannot be concurring: reading should \"lock\" from writing (but not from further reading) and viceversa, and both operations internally move the seek <code>pos</code> of the IODevice, but since you're not dealing with threads that's not the point at all, also because in your example you've already finished writing data to the buffer before even starting to read from it, and you don't write anything after.</p>\n"}], "owner": {"reputation": 385, "user_id": 1637894, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cf88687e01c21b5cd0fd0c7f5d5fe2c5?s=128&d=identicon&r=PG", "display_name": "sammosummo", "link": "https://stackoverflow.com/users/1637894/sammosummo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1560375956, "creation_date": 1560370133, "last_edit_date": 1560373510, "question_id": 56569678, "link": "https://stackoverflow.com/questions/56569678/is-it-possible-to-write-to-a-qbuffer-thats-currently-being-read", "title": "Is it possible to write to a QBuffer that&#39;s currently being read?", "body": "<p>I'm writing a PyQt5 application, but I think this question is valid for PySide2 and Qt as well. I'm trying to write sound data (sinuosids) to a buffer, then play it on a seamless loop. However, there is always a break when I get to the end of the buffer and seek back to the beginning.</p>\n\n<p>I think I want to continuously read and write to the same buffer, is this possible?</p>\n\n<p>Below is a minimal version of my code:</p>\n\n<pre><code>import struct\nimport sys\n\nfrom PyQt5.QtCore import QBuffer, QByteArray, QIODevice\nfrom PyQt5.QtWidgets import QApplication, QWidget\nfrom PyQt5.QtMultimedia import QAudio, QAudioFormat, QAudioOutput\n\nsample_rate = 44100\nsample_size = 16\nfrequency = 1000\nvolume = 3276\n\n\nclass Window(QWidget):\n    def __init__(self, parent=None):\n\n        QWidget.__init__(self, parent)\n\n        format = QAudioFormat()\n        format.setChannelCount(1)\n        format.setSampleRate(sample_rate)\n        format.setSampleSize(sample_size)\n        format.setCodec(\"audio/pcm\")\n        format.setByteOrder(QAudioFormat.LittleEndian)\n        format.setSampleType(QAudioFormat.SignedInt)\n\n        self.output = QAudioOutput(format, self)\n        self.output.stateChanged.connect(self.replay)\n\n        self.buffer = QBuffer()\n        self.buffer.open(QIODevice.ReadWrite)\n        self.createData()\n        self.buffer.seek(0)\n        self.output.start(self.buffer)\n\n    def createData(self):\n        print(\"writing\")\n        data = QByteArray()\n        for i in range(round(1 * sample_rate)):\n            t = i / sample_rate\n            value = int(volume * sin(2 * pi * frequency * t))\n            data.append(struct.pack(\"&lt;h\", value))\n        self.buffer.write(data)\n\n    def replay(self):\n        print(\"replaying\", self.output.state(), QAudio.IdleState)\n        if self.output.state() == QAudio.IdleState:\n            self.buffer.seek(0)\n\n\nif __name__ == \"__main__\":\n\n    app = QApplication(sys.argv)\n    window = Window()\n    window.show()\n    sys.exit(app.exec_())\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 1, "creation_date": 1560370158, "post_id": 56569653, "comment_id": 99718458, "body": "split the pattern list and join by <code>|</code>?"}, {"owner": {"reputation": 455, "user_id": 8261605, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/nY7TU.png?s=128&g=1", "display_name": "Ghoti", "link": "https://stackoverflow.com/users/8261605/ghoti"}, "edited": false, "score": 0, "creation_date": 1560370251, "post_id": 56569653, "comment_id": 99718498, "body": "pattern = &quot;|&quot;.join([&quot;%(&quot;+x.replace(&quot; &quot;, &quot;|&quot;)+&quot;)%&quot; for x in list]) could work."}], "answers": [{"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 1, "last_activity_date": 1560372874, "last_edit_date": 1560372874, "creation_date": 1560371810, "answer_id": 56570025, "question_id": 56569653, "link": "https://stackoverflow.com/questions/56569653/pandas-string-search-partial-string/56570025#56570025", "title": "Pandas string search partial string", "body": "<h3>Custom Metric</h3>\n\n<p>Write a crude fuzzy match metric.  You can probably adjust this metric by removing high frequency words and stemming appropriately.</p>\n\n<pre><code>def fuzz(a, b):\n    a = np.asarray(a)\n    b = np.asarray(b)\n    c = a[:, None] == b[None, :]\n    return min(c.max(0).mean(), c.max(1).mean())\n</code></pre>\n\n<p>This calculates how many words from one list matches how many words from another.</p>\n\n<p>We build a dataframe to help illustrate.</p>\n\n<pre><code>d = pd.DataFrame([\n    [fuzz(a, b) for b in map(str.split, lst)]\n                for a in df.column.str.split()\n], df.index, lst)\n\nd\n\n   good dog  bad cat\n0       0.0      1.0\n1       1.0      0.0\n2       0.0      0.5\n3       0.5      0.0\n</code></pre>\n\n<p>We can see that we get a metric of <code>1.0</code> for the first row and <code>'bad cat'</code> and the second row and <code>'good dog'</code>.  For the third and fourth rows, we get measures of <code>0.5</code> meaning half the words matched.</p>\n\n<p>Now you set a threshold and find if any in a row exceed the threshold:</p>\n\n<p>For a threshold of <code>.5</code></p>\n\n<pre><code>df[d.ge(.5).any(1)]\n\n     column\n0   bad cat\n1  good dog\n2       cat\n3       dog\n</code></pre>\n\n<p>For a threshold of <code>.6</code></p>\n\n<pre><code>df[d.ge(.6).any(1)]\n\n     column\n0   bad cat\n1  good dog\n</code></pre>\n\n<hr>\n\n<h3>Levenshtein</h3>\n\n<p>Use Levenshtein's distance ratio</p>\n\n<pre><code>import Levenshtein\n\nc = pd.DataFrame([\n    [Levenshtein.ratio(a, b) for b in lst]\n    for a in df.column\n], df.index, lst)\n\nc\n\n   good dog   bad cat\n0  0.266667  1.000000\n1  1.000000  0.266667\n2  0.000000  0.600000\n3  0.545455  0.200000\n</code></pre>\n\n<p>And you can do the same threshold analysis as above.</p>\n"}], "owner": {"reputation": 478, "user_id": 9683621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/664aa0a25ca29505ded990d5d9c8e94b?s=128&d=identicon&r=PG&f=1", "display_name": "Samira Kumar", "link": "https://stackoverflow.com/users/9683621/samira-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 56570025, "answer_count": 1, "score": 1, "last_activity_date": 1560372874, "creation_date": 1560370011, "question_id": 56569653, "link": "https://stackoverflow.com/questions/56569653/pandas-string-search-partial-string", "title": "Pandas string search partial string", "body": "<p>I've the following data</p>\n\n<p><code>list = ['good dog','bad cat']</code></p>\n\n<p><code>pattern = '|'.join(list)</code></p>\n\n<pre><code>|column|\n|---|\n|bad cat|\n|good dog|\n|cat|\n|dog|\n\n</code></pre>\n\n<p>When I do the string contains in pandas, only the fully matched string gets True output as below </p>\n\n<p><code>df[column].str.contains(pattern,regex=True)</code></p>\n\n<pre><code>|column|\n|---|\n|True|\n|True|\n|False|\n|False|\n\n</code></pre>\n\n<p>Would it be possible to do something like fuzzy match where partial strings within a pattern are also checked for? So that output would all be true since \"Cat\" and \"Dog\" are partially present?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "kivy"], "comments": [{"owner": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "edited": false, "score": 0, "creation_date": 1560371498, "post_id": 56569619, "comment_id": 99719007, "body": "Unfortunately, the <code>id</code> used in the <code>ids</code> dictionary can only be created in <code>kv</code> language. Setting <code>id=str(x)</code> will not add it to the <code>ids</code> dictionary."}, {"owner": {"reputation": 197, "user_id": 11402640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11727b58f6383c73175702b9e46581d?s=128&d=identicon&r=PG&f=1", "display_name": "yemi.JUMP", "link": "https://stackoverflow.com/users/11402640/yemi-jump"}, "reply_to_user": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "edited": false, "score": 0, "creation_date": 1560371593, "post_id": 56569619, "comment_id": 99719043, "body": "@JohnAnderson is there a way around needing the id to draw on the canvas?"}, {"owner": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "edited": false, "score": 0, "creation_date": 1560372014, "post_id": 56569619, "comment_id": 99719168, "body": "What is your <code>with can.ids.my_box.ids.x.canvas:</code> intended to do when x is not a multiple of 10? For example, when x is -1 and a new <code>GridLayout</code> is not created?"}, {"owner": {"reputation": 197, "user_id": 11402640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11727b58f6383c73175702b9e46581d?s=128&d=identicon&r=PG&f=1", "display_name": "yemi.JUMP", "link": "https://stackoverflow.com/users/11402640/yemi-jump"}, "reply_to_user": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "edited": false, "score": 0, "creation_date": 1560372155, "post_id": 56569619, "comment_id": 99719218, "body": "Shapes will be drawn on a new column. I planned to have there be a column for every 10 rectangles. @JohnAnderson"}, {"owner": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "edited": false, "score": 0, "creation_date": 1560372269, "post_id": 56569619, "comment_id": 99719268, "body": "Except for the fact that <code>layout</code> will be undefined for x&lt;10, you can just use <code>with layout.canvas:</code>."}, {"owner": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "edited": false, "score": 0, "creation_date": 1560381881, "post_id": 56569619, "comment_id": 99721811, "body": "Actually, <code>layout</code> will only be undefined for x at -1."}], "owner": {"reputation": 197, "user_id": 11402640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11727b58f6383c73175702b9e46581d?s=128&d=identicon&r=PG&f=1", "display_name": "yemi.JUMP", "link": "https://stackoverflow.com/users/11402640/yemi-jump"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560369820, "creation_date": 1560369820, "question_id": 56569619, "link": "https://stackoverflow.com/questions/56569619/access-a-dynamic-layout-id-kivy", "title": "Access a dynamic layout id kivy", "body": "<p>I need to be able to access a layouts id in order to add shapes to it. The problem is that the id of the layout is always changing. How would I get the id so that I can change that specific layout? </p>\n\n<p>code:</p>\n\n<pre><code>can = self.root.get_screen(\"three\")\n...\n        get_score = data.get(key, {}).get('score')\n\n        new_pos = can.pos\n        for x in range(-1, get_score): # had to use -1 to get correct amount of shapes\n            if x % 10 == 0:\n                layout = GridLayout(id=str(x), cols=1, size_hint= (None,None))\n                can.ids.my_box.add_widget(layout)\n\n            with can.ids.my_box.ids.x.canvas:\n                Color(0, 1, 0, .75, mode='rgba')\n                rect = Rectangle(pos=new_pos, size=(30, 30))\n            new_pos[0] += rect.size[1]\n            new_pos[0] += rect.size[0]\n\n        for child in can.ids.my_box.children: #used to check how many cols are added\n            print(child.id)\n\n</code></pre>\n\n<p>error: <code>AttributeError: 'super' object has no attribute '__getattr__'</code></p>\n"}, {"tags": ["python", "pandas", "csv", "multiple-columns"], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 5282820, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c2c314615279cb709a1300714431632b?s=128&d=identicon&r=PG&f=1", "display_name": "Dave", "link": "https://stackoverflow.com/users/5282820/dave"}, "edited": false, "score": 0, "creation_date": 1560371619, "post_id": 56569887, "comment_id": 99719053, "body": "That did it! Thanks!"}], "tags": [], "owner": {"reputation": 497, "user_id": 11547056, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WH8IRrFLmic/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd5XYkUMzJKSICt7ewlw34CQrft2Q/mo/photo.jpg?sz=128", "display_name": "pnovotnyq", "link": "https://stackoverflow.com/users/11547056/pnovotnyq"}, "is_accepted": true, "score": 0, "last_activity_date": 1560371144, "creation_date": 1560371144, "answer_id": 56569887, "question_id": 56569587, "link": "https://stackoverflow.com/questions/56569587/how-to-get-only-the-colums-i-want-to-move-to-new-dataframe-with-this-code/56569887#56569887", "title": "How to get only the colums I want to move to new dataframe with this code?", "body": "<p>There are many options for <a href=\"https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html\" rel=\"nofollow noreferrer\">indexing a dataframe</a>. This particular one can be done on a single line.</p>\n\n<pre><code>import pandas as pd\n# read the csv into df\ndf = pd.read_csv(\"file.csv\")\n# take only the rows where 'Body' has a value and only columns ['Body', 'CreatedDate']\ndf = df.loc[df['Body'].notnull(),['Body', 'CreatedDate']]\nprint(df)\n</code></pre>\n\n<p>You may also want to read up on <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.dropna.html\" rel=\"nofollow noreferrer\">pandas.DataFrame.dropna</a>.</p>\n"}], "owner": {"reputation": 95, "user_id": 5282820, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c2c314615279cb709a1300714431632b?s=128&d=identicon&r=PG&f=1", "display_name": "Dave", "link": "https://stackoverflow.com/users/5282820/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "closed_date": 1561589940, "accepted_answer_id": 56569887, "answer_count": 1, "score": 0, "last_activity_date": 1560371144, "creation_date": 1560369656, "last_edit_date": 1560369999, "question_id": 56569587, "link": "https://stackoverflow.com/questions/56569587/how-to-get-only-the-colums-i-want-to-move-to-new-dataframe-with-this-code", "closed_reason": "Duplicate", "title": "How to get only the colums I want to move to new dataframe with this code?", "body": "<p>I am trying to select only 2 columns from a csv file: <code>Body</code> and <code>CreatedDate</code>.\n<code>CreatedDate</code> looks like this: <code>2018-08-07T12:36:11.000Z</code>.\n<code>Body</code> is just text of work being done. Some <code>Body</code> cells are empty so I only want the ones with data in it.</p>\n\n<p>I have tried using the code below to just get only the 2 desired columns:</p>\n\n<pre><code>import pandas as pd\ndf = pd.read_csv(\"file.csv\")\ndf1= df['CreatedDate'].map(str) + ' ' + df['Body'].map(str)\nprint(df1)\n</code></pre>\n\n<p>I am getting the entire <code>df</code> printed twice. I see this:</p>\n\n<blockquote>\n  <p>[10 rows x 15 columns] &amp; [15 rows x 10 columns] </p>\n</blockquote>\n\n<p>at the bottom of each print. I am expecting to only see my 2 chosen columns. Why am I seeing all of <code>df</code> twice on the console?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 4168, "user_id": 6273251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fCGXep-7snc/AAAAAAAAAAI/AAAAAAAAADk/nk_YDFGfkc0/photo.jpg?sz=128", "display_name": "Random Davis", "link": "https://stackoverflow.com/users/6273251/random-davis"}, "edited": false, "score": 1, "creation_date": 1560369745, "post_id": 56569579, "comment_id": 99718289, "body": "What do you expect that line of code to do? It&#39;s like you have code that expects an object <code>Stock</code> to be defined, but there&#39;s no definition for it in your code. Did you copy and paste the code from elsewhere without knowing how it worked or something like that? Also, the indentation is totally off."}, {"owner": {"reputation": 97, "user_id": 11038974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af51d6ff01ac2684b34e5d1e6be9d98e?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/11038974/john-smith"}, "reply_to_user": {"reputation": 4168, "user_id": 6273251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fCGXep-7snc/AAAAAAAAAAI/AAAAAAAAADk/nk_YDFGfkc0/photo.jpg?sz=128", "display_name": "Random Davis", "link": "https://stackoverflow.com/users/6273251/random-davis"}, "edited": false, "score": 0, "creation_date": 1560369977, "post_id": 56569579, "comment_id": 99718372, "body": "it should append each stock to the list(). I suppose I could do it individually for each stock to make it less complex."}, {"owner": {"reputation": 97, "user_id": 11038974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af51d6ff01ac2684b34e5d1e6be9d98e?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/11038974/john-smith"}, "reply_to_user": {"reputation": 4168, "user_id": 6273251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fCGXep-7snc/AAAAAAAAAAI/AAAAAAAAADk/nk_YDFGfkc0/photo.jpg?sz=128", "display_name": "Random Davis", "link": "https://stackoverflow.com/users/6273251/random-davis"}, "edited": false, "score": 0, "creation_date": 1560370091, "post_id": 56569579, "comment_id": 99718429, "body": "Stock is a IB function, I believe that is part of the ib_sync import. I will double check that though"}, {"owner": {"reputation": 4168, "user_id": 6273251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fCGXep-7snc/AAAAAAAAAAI/AAAAAAAAADk/nk_YDFGfkc0/photo.jpg?sz=128", "display_name": "Random Davis", "link": "https://stackoverflow.com/users/6273251/random-davis"}, "edited": false, "score": 0, "creation_date": 1560370184, "post_id": 56569579, "comment_id": 99718467, "body": "In that case it should just work. Maybe you have the wrong version of that library installed?"}, {"owner": {"reputation": 97, "user_id": 11038974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af51d6ff01ac2684b34e5d1e6be9d98e?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/11038974/john-smith"}, "reply_to_user": {"reputation": 4168, "user_id": 6273251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fCGXep-7snc/AAAAAAAAAAI/AAAAAAAAADk/nk_YDFGfkc0/photo.jpg?sz=128", "display_name": "Random Davis", "link": "https://stackoverflow.com/users/6273251/random-davis"}, "edited": false, "score": 0, "creation_date": 1560370490, "post_id": 56569579, "comment_id": 99718598, "body": "Stock(&#39;MSFT&#39;, &#39;SMART&#39;, &#39;USD&#39;, primaryExchange=&#39;NASDAQ&#39;)  should get MSFT stock. <a href=\"https://groups.io/g/insync/topic/6061586\" rel=\"nofollow noreferrer\">groups.io/g/insync/topic/6061586</a>"}, {"owner": {"reputation": 97, "user_id": 11038974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af51d6ff01ac2684b34e5d1e6be9d98e?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/11038974/john-smith"}, "reply_to_user": {"reputation": 4168, "user_id": 6273251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fCGXep-7snc/AAAAAAAAAAI/AAAAAAAAADk/nk_YDFGfkc0/photo.jpg?sz=128", "display_name": "Random Davis", "link": "https://stackoverflow.com/users/6273251/random-davis"}, "edited": false, "score": 0, "creation_date": 1560370523, "post_id": 56569579, "comment_id": 99718608, "body": "yes there&#39;s a chance it could be a version issue. I suppose, I will try on a different computer that has different versions installed"}], "owner": {"reputation": 97, "user_id": 11038974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af51d6ff01ac2684b34e5d1e6be9d98e?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/11038974/john-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 196, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1560370013, "creation_date": 1560369625, "last_edit_date": 1560370013, "question_id": 56569579, "link": "https://stackoverflow.com/questions/56569579/using-ib-sync-to-get-many-live-stock-quotes-using-python", "title": "Using ib_sync to get many live stock quotes using Python", "body": "<p>I am trying to use a list to get a bunch of live stock quotes from Interactive Brokers. Here is my full code:</p>\n\n<pre><code>from ib_insync import * #Import all classes\nutil.startLoop() #Use when using jupyter notebooks\nib = IB()\nib.connect('127.0.0.1', 7496)\n\nstocks = ['SPY','ANGL','GDX','TMV']\n\ntest = list()\nfor stock in stocks:\n\nstock = Stock(stock, 'SMART','USD')\ncontract = ib.qualifyContracts(stock)\ntest.append(ib.reqMktData(contract[0],snapshot=True))\nib.sleep(1)\nfor stock in test:\nprint(stock.last)\n</code></pre>\n\n<p>I get this error:</p>\n\n<blockquote>\n  <p>NameError: name 'Stock' is not defined</p>\n</blockquote>\n"}, {"tags": ["python", "selenium", "nosuchelementexception"], "answers": [{"comments": [{"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "edited": false, "score": 0, "creation_date": 1560371511, "post_id": 56569720, "comment_id": 99719010, "body": "if you feel the issue is resolved, please accept the answer by clicking on the hallow check mark below the downvote button in my answer on the left hand side."}, {"owner": {"reputation": 31, "user_id": 4929640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/890a557ac3f6e791c92866b243c45dd1?s=128&d=identicon&r=PG&f=1", "display_name": "Python_new", "link": "https://stackoverflow.com/users/4929640/python-new"}, "edited": false, "score": 0, "creation_date": 1560385929, "post_id": 56569720, "comment_id": 99722465, "body": "i tried your suggestion but got same exception error &quot;NoSuchElementException&quot;"}, {"owner": {"reputation": 31, "user_id": 4929640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/890a557ac3f6e791c92866b243c45dd1?s=128&d=identicon&r=PG&f=1", "display_name": "Python_new", "link": "https://stackoverflow.com/users/4929640/python-new"}, "edited": false, "score": 0, "creation_date": 1560388600, "post_id": 56569720, "comment_id": 99722904, "body": "Updated suggestion didn&#39;t work. My code is here:  <a href=\"https://drive.google.com/file/d/1Zqb2MrimYb_gV2YmyBEc2AM8IKxNdHWO/view?usp=sharing\" rel=\"nofollow noreferrer\">drive.google.com/file/d/1Zqb2MrimYb_gV2YmyBEc2AM8IKxNdHWO/&hellip;</a>"}, {"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "reply_to_user": {"reputation": 31, "user_id": 4929640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/890a557ac3f6e791c92866b243c45dd1?s=128&d=identicon&r=PG&f=1", "display_name": "Python_new", "link": "https://stackoverflow.com/users/4929640/python-new"}, "edited": false, "score": 0, "creation_date": 1560391855, "post_id": 56569720, "comment_id": 99723428, "body": "You have to change the <code>questionEle</code> line code to match with my answer. The problem with your current approach is, when <code>name of first employer?</code> is not part of the 2 questions (out of 6) then you will get NoSuchElement exception. That&#39;s the reason why you should get the question by getting <code>aria-label</code> based on <code>name</code>"}], "tags": [], "owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "is_accepted": true, "score": 1, "last_activity_date": 1560387256, "last_edit_date": 1560387256, "creation_date": 1560370359, "answer_id": 56569720, "question_id": 56569497, "link": "https://stackoverflow.com/questions/56569497/unable-to-locate-text-element-in-aria-label-with-the-xpath-expression/56569720#56569720", "title": "Unable to locate text element in aria-label with the XPath expression", "body": "<p>If you want to get the question then do the following.</p>\n\n<pre><code># get the question 1 element\nquestionEle=browser.find_element_by_xpath(\"//input[@name='first_security_question']\")\n# get the question\nquestion_1 = questionEle.get_attribute(\"aria-label\")\n</code></pre>\n\n<p>Then get the answer for the question and send the input to question.</p>\n"}], "owner": {"reputation": 31, "user_id": 4929640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/890a557ac3f6e791c92866b243c45dd1?s=128&d=identicon&r=PG&f=1", "display_name": "Python_new", "link": "https://stackoverflow.com/users/4929640/python-new"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 359, "favorite_count": 0, "accepted_answer_id": 56569720, "answer_count": 1, "score": 0, "last_activity_date": 1560387256, "creation_date": 1560369171, "last_edit_date": 1560371046, "question_id": 56569497, "link": "https://stackoverflow.com/questions/56569497/unable-to-locate-text-element-in-aria-label-with-the-xpath-expression", "title": "Unable to locate text element in aria-label with the XPath expression", "body": "<p>I'm trying to automate process of filling website security questions presented after login. Two questions are randomly presented from a pool of 6 questions I've already answered. </p>\n\n<p>Every Xpath option I've tried to identify the specific security  question asked found in the 'aria-label' element returns <code>NoSuchElementException</code>.</p>\n\n<p>I've tried many methods down the google rabbit hole including: </p>\n\n<pre><code>#First Attempt\nquestion_1=browser.find_element_by_xpath('//div[@label=\"name of first employer?\"]')\n\n#Second Attempt \nquestion_1=browser.find_element_by_xpath('//form[@label=\"name of first employer?\"]/label[text()=\"name of first employer?\"]')\n</code></pre>\n\n<p>I've included html of inspected element for two security questions below:</p>\n\n<pre><code>&lt;input type=\"password\" name=\"first_security_question\" aria-label=\"Unique pin #4\" value=\"\"&gt;\n\n&lt;input type=\"password\" name=\"second_security_question\" aria-label=\"Model of first car?\" value=\"\"&gt;\n</code></pre>\n\n<p>I expect to identify the specific question in the aria-label so I can send appropriate keys to fill the form question but instead all I get is <code>NoSuchElementException</code>.</p>\n"}, {"tags": ["python", "unit-testing", "mocking"], "answers": [{"tags": [], "owner": {"reputation": 17759, "user_id": 2091925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cdc96737b990c24e08de6174eed0b0f?s=128&d=identicon&r=PG", "display_name": "Will Keeling", "link": "https://stackoverflow.com/users/2091925/will-keeling"}, "is_accepted": true, "score": 1, "last_activity_date": 1560370274, "creation_date": 1560370274, "answer_id": 56569703, "question_id": 56569493, "link": "https://stackoverflow.com/questions/56569493/how-to-define-arbitrary-attributes-on-a-mocked-classs-objects/56569703#56569703", "title": "How to define arbitrary attributes on a mocked class&#39;s objects?", "body": "<p>Objects of <code>MyClass</code> are created when <code>MyClass</code> is called. Therefore you just need to ensure that you set <code>a_value</code> on the return value of <code>MyClass</code>:</p>\n\n<pre><code>@patch('abc.myModule.MyClass', a_value=True) \ndef test_something(self, mock_myclass):\n    mock_myclass.return_value.a_value = True  # Ensure a_value is set for objects\n</code></pre>\n"}], "owner": {"reputation": 2109, "user_id": 1008636, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ccc21c214b56f40fa518bedf7dd02819?s=128&d=identicon&r=PG", "display_name": "user1008636", "link": "https://stackoverflow.com/users/1008636/user1008636"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "accepted_answer_id": 56569703, "answer_count": 1, "score": 1, "last_activity_date": 1560370274, "creation_date": 1560369158, "question_id": 56569493, "link": "https://stackoverflow.com/questions/56569493/how-to-define-arbitrary-attributes-on-a-mocked-classs-objects", "title": "How to define arbitrary attributes on a mocked class&#39;s objects?", "body": "<p>I have a class defined in a module <code>abc.myModule</code>:</p>\n\n<pre><code>Class MyClass:\n  def __init__(self, a):\n     self.a_value = a\n</code></pre>\n\n<p>Now I have script that does:</p>\n\n<pre><code>c = MyClass('a')\nprint c.a_value\n</code></pre>\n\n<p>Now in my unit test for the above, I want to patch <code>MyClass</code> so any object of <code>MyClass</code> will return '<code>XYZ</code>' for its  <code>a._value()</code>.  So I do:</p>\n\n<pre><code>@patch('abc.myModule.MyClass, a_value=True) \n</code></pre>\n\n<p>This patch will cause <code>MyClass</code> to have <code>.a_value()</code> return True, but any object of <code>MyClass</code> still does not have a_value defined. What can I do to correct this ?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1560369492, "post_id": 56569458, "comment_id": 99718178, "body": "Still, you must have some sort of category in hand?"}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1560369648, "post_id": 56569458, "comment_id": 99718252, "body": "aslo, it helps if you can reduce your sample to, say 4-10 rows."}], "answers": [{"tags": [], "owner": {"reputation": 7907, "user_id": 9609447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9FDax.jpg?s=128&g=1", "display_name": "harvpan", "link": "https://stackoverflow.com/users/9609447/harvpan"}, "is_accepted": false, "score": 1, "last_activity_date": 1560371042, "creation_date": 1560371042, "answer_id": 56569865, "question_id": 56569458, "link": "https://stackoverflow.com/questions/56569458/colouring-by-category-in-a-pandas-plot/56569865#56569865", "title": "Colouring by category in a pandas plot", "body": "<p>You can define a dictionary of your color mappings. </p>\n\n<pre><code>color_map = {\n    0:'k',\n    1:'r',\n    2:'g'\n}\n</code></pre>\n\n<p>Then, use <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.map.html\" rel=\"nofollow noreferrer\"><code>.map()</code></a></p>\n\n<pre><code>df['colour'] = df['quartile'].map(color_map).fillna('b')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "is_accepted": true, "score": 1, "last_activity_date": 1560371979, "creation_date": 1560371979, "answer_id": 56570057, "question_id": 56569458, "link": "https://stackoverflow.com/questions/56569458/colouring-by-category-in-a-pandas-plot/56570057#56570057", "title": "Colouring by category in a pandas plot", "body": "<p>If you don't particularly care about the colors, create a mapping with one of the seaborn color palettes. This way you just need to specify the column, not the number of categories or colors. If you have many ordered categories, consider switching to a sequential palette. </p>\n\n<pre><code>import seaborn as sns\nimport matplotlib.pyplot as plt\n\ndef map_color(df, col):\n    color_d = dict(zip(df[col].unique(), sns.color_palette(\"hls\", df[col].nunique())))\n    df['color'] = df[col].map(color_d)\n    return df\n\ndf  = map_color(df, 'quartile')\n\nfig, ax = plt.subplots(figsize=(10, 5))\ndf.assign(y=df[0].cumsum()).plot(kind='bar', y='y', ax=ax, color=df.color.tolist(),\n                                 legend=False)\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/bxVe5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bxVe5.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 2105, "user_id": 755671, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0d0ae5cfa33f08d4c4ac386c0507273c?s=128&d=identicon&r=PG", "display_name": "Tom Kealy", "link": "https://stackoverflow.com/users/755671/tom-kealy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 56570057, "answer_count": 2, "score": 0, "last_activity_date": 1560371979, "creation_date": 1560368982, "last_edit_date": 1560370662, "question_id": 56569458, "link": "https://stackoverflow.com/questions/56569458/colouring-by-category-in-a-pandas-plot", "title": "Colouring by category in a pandas plot", "body": "<p>I have a DataFrame containing a continuous number for  the cumulative sum in a column called <code>cont_col</code> and a category column:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\ncont = np.random.rand(100)\n\ndf = pd.DataFrame(data=cont)\n\ndf = df.sort_values(by=0)\n\ndf['quartile'] = pd.qcut(df[0], 4, labels=False)\n\ncumsum = df[0].cumsum()\ncumsum = cumsum.to_frame()\ncumsum[0].plot(kind='bar', color='k')\n</code></pre>\n\n<p>I would like to plot the same data, but this time coloured by the quartile column. </p>\n\n<p>I can do it with the following code:</p>\n\n<pre><code>def colourise(x):\n    if x == 0:\n        return 'k'\n    elif x == 1:\n        return 'r'\n    elif x == 2:\n        return 'g'\n    else:\n        return 'b'\n\ndf['colour'] = df['quartile'].apply(colourise)\ncumsum = df[0].cumsum()\ncumsum = cumsum.to_frame()\ncumsum[0].plot(kind='bar', color=df['colour'].tolist())\n</code></pre>\n\n<p>I just wonder if there is a more general way - in particular, one which didn't depend on the number of qtiles I create.</p>\n"}, {"tags": ["python", "pandas", "dataframe", "series", "percentage"], "comments": [{"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 1, "creation_date": 1560368952, "post_id": 56569445, "comment_id": 99717914, "body": "<code>df[[&#39;a&#39;,&#39;b&#39;]].pct_change(axis=1)</code>?"}, {"owner": {"reputation": 115, "user_id": 5914902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55ca170bf0a4d5754cdb635fe92a3254?s=128&d=identicon&r=PG&f=1", "display_name": "Loyal_Burrito", "link": "https://stackoverflow.com/users/5914902/loyal-burrito"}, "reply_to_user": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1560369178, "post_id": 56569445, "comment_id": 99718033, "body": "That works! Thanks!"}, {"owner": {"reputation": 115, "user_id": 5914902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55ca170bf0a4d5754cdb635fe92a3254?s=128&d=identicon&r=PG&f=1", "display_name": "Loyal_Burrito", "link": "https://stackoverflow.com/users/5914902/loyal-burrito"}, "reply_to_user": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1560449894, "post_id": 56569445, "comment_id": 99750749, "body": "@QuangHoang This however doesn&#39;t return a negative number for when the percent change goes down. This only shows absolute. How would I be able to get both the negative and positive percent change?"}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1560450018, "post_id": 56569445, "comment_id": 99750804, "body": "See <a href=\"https://stackoverflow.com/a/56138777/4238408\">this answer</a> in that question."}], "owner": {"reputation": 115, "user_id": 5914902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55ca170bf0a4d5754cdb635fe92a3254?s=128&d=identicon&r=PG&f=1", "display_name": "Loyal_Burrito", "link": "https://stackoverflow.com/users/5914902/loyal-burrito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "closed_date": 1560369039, "answer_count": 0, "score": 0, "last_activity_date": 1560368907, "creation_date": 1560368907, "question_id": 56569445, "link": "https://stackoverflow.com/questions/56569445/how-do-i-perform-percent-increase-calculations-to-two-columns-side-by-side", "closed_reason": "Duplicate", "title": "How do I perform percent increase calculations to two columns side by side?", "body": "<p>I want to perform a percent increase calculations between every pair of variables in the two columns in my dataframe.</p>\n\n<p>Something around the sense of </p>\n\n<pre><code>   a  b  \n0  5  10  \n1  1  2  \n2  3  6  \n</code></pre>\n\n<p>And I'd like something like this</p>\n\n<p>1 being 100% increase</p>\n\n<pre><code>   a  b  %  \n0  5  10 1  \n1  1  2  1  \n2  2  3  .5\n</code></pre>\n"}, {"tags": ["python", "pygame", "joystick", "logitech"], "owner": {"reputation": 11, "user_id": 11638887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88a72c1e196d72fa41db9d8e5adc0b85?s=128&d=identicon&r=PG", "display_name": "Prajwol Subedi", "link": "https://stackoverflow.com/users/11638887/prajwol-subedi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 352, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1582504621, "creation_date": 1560368899, "last_edit_date": 1582504621, "question_id": 56569442, "link": "https://stackoverflow.com/questions/56569442/getting-the-number-of-axes-for-logitech-g920", "title": "Getting the number of axes for Logitech G920", "body": "<p>I am having an issue with <code>pygame</code> and my Logitech G920 driving force steering wheel. When I ask for the number of axes, it returns <code>0</code>. </p>\n\n<p>I have tried using events and simple <code>pygame.joystick</code> codes:</p>\n\n<pre><code>import pygame\n\npygame.init()\n\npygame.display.init()\npygame.joystick.init()\n\nprint \"Number of joystick:\",pygame.joystick.get_count()\n\nunh_joy=pygame.joystick.Joystick(0)\n\nunh_joy.init()\n\n\nname =unh_joy.get_name()\n\nprint (\"Name of Joystick: {}\".format(name))\npygame.event.pump()\n\naxes=unh_joy.get_numaxes()\nprint(\"Number of axes: {}\".format(axes))\n</code></pre>\n\n<p>The result I am getting is:</p>\n\n<pre><code>Number of joystick: 1\nName of Joystick: Logitech G920 Driving Force Racing Wheel USB\nNumber of axes: 0\n</code></pre>\n\n<p>Can anyone let me know how to deal with this? My main objective is to detect any changes in steering wheel or get the change in values for the pedals.</p>\n"}, {"tags": ["python", "python-3.x", "discord", "discord.py", "discord.py-rewrite"], "comments": [{"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 2, "creation_date": 1560369578, "post_id": 56569432, "comment_id": 99718218, "body": "What is it that you&#39;re trying to do?  <a href=\"https://discordpy.readthedocs.io/en/latest/api.html#discord.Message.reactions\" rel=\"nofollow noreferrer\"><code>message.reactions</code></a> will be the list of reactions on the message, what are you trying to do with that list?"}], "answers": [{"comments": [{"owner": {"reputation": 50872, "user_id": 523612, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ae512dd708a619496d36b1f681f95e0?s=128&d=identicon&r=PG", "display_name": "Karl Knechtel", "link": "https://stackoverflow.com/users/523612/karl-knechtel"}, "edited": false, "score": 1, "creation_date": 1560369999, "post_id": 56569620, "comment_id": 99718383, "body": "Reviewing the documentation: <code>ctx.message.reactions</code> is a list of <code>Reaction</code>s; it&#39;s the individual underlying <code>Reaction</code>s that have a <code>.users</code> method - so you&#39;ll need to do the iteration yourself."}], "tags": [], "owner": {"reputation": 50872, "user_id": 523612, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ae512dd708a619496d36b1f681f95e0?s=128&d=identicon&r=PG", "display_name": "Karl Knechtel", "link": "https://stackoverflow.com/users/523612/karl-knechtel"}, "is_accepted": false, "score": 2, "last_activity_date": 1560369821, "creation_date": 1560369821, "answer_id": 56569620, "question_id": 56569432, "link": "https://stackoverflow.com/questions/56569432/how-do-i-get-a-list-of-reactions-from-a-message-on-discord-py-rewrite/56569620#56569620", "title": "How do I get a list of reactions from a message on discord.py rewrite?", "body": "<pre><code>reaction = reaction.append(ctx.message.reactions)\n</code></pre>\n\n<p>This line is wrong; <code>reaction.append</code> already modifies the <code>reaction</code> list <em>in-place</em> and returns <code>None</code>, so the assignment replaces your list with <code>None</code>. But it's really not clear how you're expecting this to work anyway; <code>ctx.message.reactions</code> is already a list, so you probably don't really want to <code>append</code> it to another list (as a nested list), and either way a list doesn't have a <code>.users</code> method.</p>\n"}], "owner": {"reputation": 1, "user_id": 11628069, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GgTfk.jpg?s=128&g=1", "display_name": "aionzeraaa", "link": "https://stackoverflow.com/users/11628069/aionzeraaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3519, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560376095, "creation_date": 1560368883, "last_edit_date": 1560376095, "question_id": 56569432, "link": "https://stackoverflow.com/questions/56569432/how-do-i-get-a-list-of-reactions-from-a-message-on-discord-py-rewrite", "title": "How do I get a list of reactions from a message on discord.py rewrite?", "body": "<p>I'm making a giveaway bot and I'm stuck at trying to get the reaction list of a message. How do I do that?</p>\n\n<p>I've already tried <code>ctx.message.reactions</code> and <code>message.reactions</code>(message in this case is a variable that contains a <code>await channel.fetch_message(messageID)</code>).</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>async def stopgiveaway(ctx, messageID):\n    reaction = []\n    guild = bot.get_guild(g_id) #    g_id is the guild id\n    channel = guild.get_channel(channel_id) #    same as g_id but for channel \n    message = await channel.fetch_message(messageID)\n    reaction = reaction.append(ctx.message.reactions)\n    users = reaction.users(limit=None, after=None)\n</code></pre>\n\n<p>I'm not an expert in python or discord.py, I'm still learning, so sorry if this is a stupid question.</p>\n"}, {"tags": ["python", "image-processing", "python-imaging-library"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 1, "creation_date": 1560368979, "post_id": 56569418, "comment_id": 99717924, "body": "The &quot;greenness&quot; of a color could be determined by something like <code>g &#47; (r + b)</code>; with the assumption that more of the other two primaries makes the color appear less green. Then just determine some threshold that decides if a color is considered green enough or not."}, {"owner": {"reputation": 50872, "user_id": 523612, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ae512dd708a619496d36b1f681f95e0?s=128&d=identicon&r=PG", "display_name": "Karl Knechtel", "link": "https://stackoverflow.com/users/523612/karl-knechtel"}, "edited": false, "score": 2, "creation_date": 1560369017, "post_id": 56569418, "comment_id": 99717946, "body": "&quot;I would ideally like some way to rank the &quot;greenness&quot; of a colour.&quot; This is really a colour-theory question, not a programming question. You might want to start here: <a href=\"https://en.wikipedia.org/wiki/Colorimetry\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Colorimetry</a>"}], "answers": [{"comments": [{"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1607546806, "post_id": 56569890, "comment_id": 115310480, "body": "@dnobl <code>mask[]</code> is an array the same size as the original image. All pixels that are green in the original image are <code>1</code> in <code>mask[]</code> all others are zero. So if every single pixel in the original image <code>mask.mean()</code> will be <code>1</code>. If the original image has no green pixels, it will be zero. If half the pixels are green it will be 0.5."}, {"owner": {"reputation": 4910, "user_id": 3782161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bIAr4.jpg?s=128&g=1", "display_name": "Pablo EM", "link": "https://stackoverflow.com/users/3782161/pablo-em"}, "edited": false, "score": 0, "creation_date": 1607610944, "post_id": 56569890, "comment_id": 115331622, "body": "So, if 50% of the pixels are green, and the image has a size of 1M pixels, you are computing the percentage as <code>(mask.mean() * mask.size) &#47; 100 = (0.5*1M)&#47;100 = 5000</code>? I&#39;m missing something? Anyway, thanks for the detailed response :)"}, {"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "reply_to_user": {"reputation": 4910, "user_id": 3782161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bIAr4.jpg?s=128&g=1", "display_name": "Pablo EM", "link": "https://stackoverflow.com/users/3782161/pablo-em"}, "edited": false, "score": 0, "creation_date": 1607617702, "post_id": 56569890, "comment_id": 115335113, "body": "@PabloEM Mmmm... I am thinking it should be simply <code>mask.mean() * 100</code>"}, {"owner": {"reputation": 4910, "user_id": 3782161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bIAr4.jpg?s=128&g=1", "display_name": "Pablo EM", "link": "https://stackoverflow.com/users/3782161/pablo-em"}, "edited": false, "score": 0, "creation_date": 1607674465, "post_id": 56569890, "comment_id": 115351569, "body": "Yes, I think so!"}], "tags": [], "owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "is_accepted": true, "score": 5, "last_activity_date": 1607676823, "last_edit_date": 1607676823, "creation_date": 1560371158, "answer_id": 56569890, "question_id": 56569418, "link": "https://stackoverflow.com/questions/56569418/estimating-the-percentage-of-green-in-an-image/56569890#56569890", "title": "Estimating the percentage of green in an image", "body": "<p>One potential way is to look at the image in <strong>&quot;Hue Saturation and Value&quot;</strong> colourspace <a href=\"https://en.wikipedia.org/wiki/HSL_and_HSV\" rel=\"nofollow noreferrer\">HSV colourspace</a>. Then you can look at the Hue and see if it corresponds to the range of greens you want to identify.</p>\n<p>On the linked HSV colour wheel, you can see Reds have a Hue of 0, Greens are 120 and Blues are 240. However, PIL wants to save those values in an unsigned 8-bit number with a range 0..255 rather than 0..360, so all the values are scaled by 255/360. So, in PIL, Reds come out around 0, Greens come out at around 85 and Blues come out at around 170.</p>\n<p>So you could count all pixels that fall between 80..90 as green with the code below. Note that it is generally a really bad idea to iterate over pixels in Python - it is dog slow - so I use Numpy. If you don't want to use Numpy, just get the Hue channel like I do below and iterate over the pixels counting the ones in the range you want in regular Python:</p>\n<pre><code>from PIL import Image\nimport numpy as np\n\n# Load image and convert to HSV\nim = Image.open('bp-1.jpg').convert('HSV')\n\n# Extract Hue channel and make Numpy array for fast processing\nHue = np.array(im.getchannel('H'))\n\n# Make mask of zeroes in which we will set greens to 1\nmask = np.zeros_like(Hue, dtype=np.uint8) \n\n# Set all green pixels to 1\nmask[(Hue&gt;80) &amp; (Hue&lt;90)] = 1 \n\n# Now print percentage of green pixels\nprint((mask.mean()*100)\n</code></pre>\n<p>If I run that on his image, I get 4%</p>\n<p><a href=\"https://i.stack.imgur.com/Om7Yp.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Om7Yp.jpg\" alt=\"enter image description here\" /></a></p>\n<p>Whereas with this image I get 31%</p>\n<p><a href=\"https://i.stack.imgur.com/UL6Ks.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UL6Ks.jpg\" alt=\"enter image description here\" /></a></p>\n<p>You could extract and consider the Saturation too, if you wanted to only count highly saturated colours.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 15552694, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HY7SrAXgqZY/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucm_5DXuNLgKd8O_fwKLEoE7k01Rxg/s96-c/photo.jpg?sz=128", "display_name": "Omar Khan", "link": "https://stackoverflow.com/users/15552694/omar-khan"}, "is_accepted": false, "score": 1, "last_activity_date": 1618918335, "last_edit_date": 1618918335, "creation_date": 1618354013, "answer_id": 67083322, "question_id": 56569418, "link": "https://stackoverflow.com/questions/56569418/estimating-the-percentage-of-green-in-an-image/67083322#67083322", "title": "Estimating the percentage of green in an image", "body": "<p>I had the exact same problem today.  Here is it without using numpy.  Instead I use list comprehension,lambdas,zip.  You have to convert RGB to HSL color space.</p>\n<pre><code>#call it\nprint(\n   is_img_hue_green(\n     Image.open(img_file_path)\n   )\n)\n\ndef is_img_hue_green(pil_img):\n    #if greater than threshold of 18%\n    #green 120 +- 60; values from pillow 0-255\n    minvalue = int(60 * 0.708333333)\n    maxvalue = int(180 * 0.708333333)\n    if img_return_threshold_hsv(pil_img, minvalue,maxvalue) &gt; 0.40 :\n        return True\n    else:\n        return False\n\ndef img_return_threshold_hsv(pil_img, min_hue, max_hue):\n    hue_band_iterable = list(pil_img.convert( 'HSV' ).getdata(0)) #convert getdata to list\n    sat_band_iterable = list(pil_img.convert( 'HSV' ).getdata(1))\n\n    #fill all with 1s, if all 1s Bitwise AND returns 1; if any 0=0\n    bitlist = [1 for i in range( pil_img.width * pil_img.height )] #fill with 1s\n    func_hue = lambda hue : 1 if hue &gt;= min_hue and hue &lt;= max_hue else 0\n    func_sat = lambda sat : 1 if sat &gt;= 50 else 0\n    green_mask_h = [func_hue(hue)  for hue in hue_band_iterable ] #1 if True\n    green_mask_s = [func_sat(sat) for sat in sat_band_iterable ]\n\n    bitlist = [x &amp; y &amp; z for x, y, z in zip(bitlist, green_mask_h, green_mask_s)]\n    #zip returns a tuple (x,y,z) of elements side by side, if all 1 return 1\n    return sum(bitlist) / (pil_img.width * pil_img.height)\n\n</code></pre>\n<p>Play around with the threshold(0.4=40%) and saturation level(50 vs 0-255)</p>\n"}], "owner": {"reputation": 214, "user_id": 7658990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/780c6842578f259d9d98b2d937ff0c54?s=128&d=identicon&r=PG&f=1", "display_name": "dwmyfriend", "link": "https://stackoverflow.com/users/7658990/dwmyfriend"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 443, "favorite_count": 0, "accepted_answer_id": 56569890, "answer_count": 2, "score": 3, "last_activity_date": 1618918335, "creation_date": 1560368821, "last_edit_date": 1560369832, "question_id": 56569418, "link": "https://stackoverflow.com/questions/56569418/estimating-the-percentage-of-green-in-an-image", "title": "Estimating the percentage of green in an image", "body": "<p>I'm trying to come up with an algorithm to give images a score for the amount of green that they contain by iterating through the pixels using PIL. I have come up with a few different methods so far but they all seem flawed.</p>\n\n<p>The first one sums all of the values of g in rgb and divides it but the total of all 3 colours.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def percent_green(img_file):\n    red = 0\n    green = 0\n    blue = 0\n\n    img = Image.open(img_file)\n    pixels = img.load()\n    width, height = img.size\n    for x in range(width):\n        for y in range(height):\n            rgb = pixels[x, y]\n            red += rgb[0]\n            green += rgb[1]\n            blue += rgb[2]\n\n    percent = green / (red + blue + green)\n    return percent * 100\n</code></pre>\n\n<p>This method succeeds at ranking images by how green they are but an image composed of just rgb(100, 200, 100) for example would only score 50% despite being very green.</p>\n\n<p>The other method I have thought of is simply determining what percentage of pixels contain more green than red or blue.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def percent_green(img_file):\n    img = Image.open(img_file)\n    pixels = img.load()\n    width, height = img.size\n    total_green = 0\n    for x in range(width):\n        for y in range(height):\n            rgb = pixels[x, y]\n            if rgb[1] &gt; rgb[0] and rgb[1] &gt; rgb[2]: #if green predominant colour\n                total_green += 1\n\n\n    percent = total_green /(width * height)\n    return percent * 100\n</code></pre>\n\n<p>The problem with this option is that colours like rgb(0, 1, 0) or rgb(244, 255, 244) would be counted as green. I would ideally like some way to rank the \"greenness\" of a colour.</p>\n\n<p>I would be very grateful for any suggestions of algorithms which can give a better percentage of how green an image is. Any suggestions on which of my current algorithms is better or how to improve them are also welcome.</p>\n"}, {"tags": ["python", "png", "jpeg", "image-conversion"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10937233, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-r41u8JJMzCg/AAAAAAAAAAI/AAAAAAAALhQ/v2EQt_vb7IA/photo.jpg?sz=128", "display_name": "Sbr", "link": "https://stackoverflow.com/users/10937233/sbr"}, "edited": false, "score": 0, "creation_date": 1560371230, "post_id": 56569754, "comment_id": 99718887, "body": "Well, I don&#39;t understand why I need to write &lt;&lt;i.split(&#39;.&#39;)[0]+&#39;.png&#39;&gt;&gt; in order to work"}, {"owner": {"reputation": 6288, "user_id": 5810950, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/YxiOJ.jpg?s=128&g=1", "display_name": "Anubhav Singh", "link": "https://stackoverflow.com/users/5810950/anubhav-singh"}, "reply_to_user": {"reputation": 1, "user_id": 10937233, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-r41u8JJMzCg/AAAAAAAAAAI/AAAAAAAALhQ/v2EQt_vb7IA/photo.jpg?sz=128", "display_name": "Sbr", "link": "https://stackoverflow.com/users/10937233/sbr"}, "edited": false, "score": 0, "creation_date": 1560371384, "post_id": 56569754, "comment_id": 99718962, "body": "Welcome. i.split(&#39;.&#39;)[0]+&#39;.png&#39;  has nothing to do with your solution. I just used it to create an image of the same name but with png format."}, {"owner": {"reputation": 6288, "user_id": 5810950, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/YxiOJ.jpg?s=128&g=1", "display_name": "Anubhav Singh", "link": "https://stackoverflow.com/users/5810950/anubhav-singh"}, "reply_to_user": {"reputation": 1, "user_id": 10937233, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-r41u8JJMzCg/AAAAAAAAAAI/AAAAAAAALhQ/v2EQt_vb7IA/photo.jpg?sz=128", "display_name": "Sbr", "link": "https://stackoverflow.com/users/10937233/sbr"}, "edited": false, "score": 0, "creation_date": 1560371459, "post_id": 56569754, "comment_id": 99718991, "body": "You can add any name you want. It&#39;s solely up to you."}, {"owner": {"reputation": 1, "user_id": 10937233, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-r41u8JJMzCg/AAAAAAAAAAI/AAAAAAAALhQ/v2EQt_vb7IA/photo.jpg?sz=128", "display_name": "Sbr", "link": "https://stackoverflow.com/users/10937233/sbr"}, "edited": false, "score": 0, "creation_date": 1560371658, "post_id": 56569754, "comment_id": 99719065, "body": "Thanks! How do I search for docs online about cv2? Maybe I&#39;m searching the wrong way..."}, {"owner": {"reputation": 6288, "user_id": 5810950, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/YxiOJ.jpg?s=128&g=1", "display_name": "Anubhav Singh", "link": "https://stackoverflow.com/users/5810950/anubhav-singh"}, "reply_to_user": {"reputation": 1, "user_id": 10937233, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-r41u8JJMzCg/AAAAAAAAAAI/AAAAAAAALhQ/v2EQt_vb7IA/photo.jpg?sz=128", "display_name": "Sbr", "link": "https://stackoverflow.com/users/10937233/sbr"}, "edited": false, "score": 0, "creation_date": 1560371723, "post_id": 56569754, "comment_id": 99719088, "body": "check this out: <a href=\"https://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_tutorials.html\" rel=\"nofollow noreferrer\">opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials&zwnj;&#8203;/&hellip;</a>"}], "tags": [], "owner": {"reputation": 6288, "user_id": 5810950, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/YxiOJ.jpg?s=128&g=1", "display_name": "Anubhav Singh", "link": "https://stackoverflow.com/users/5810950/anubhav-singh"}, "is_accepted": true, "score": 0, "last_activity_date": 1560370835, "last_edit_date": 1560370835, "creation_date": 1560370530, "answer_id": 56569754, "question_id": 56569404, "link": "https://stackoverflow.com/questions/56569404/convert-plenty-of-jpeg-images-to-png-in-batch/56569754#56569754", "title": "Convert plenty of jpeg images to png in batch", "body": "<p>You are passing list of images to <code>cv2.imread()</code> and also there is an error in <code>cv2.imwrite()</code>.</p>\n\n<p>Try this:</p>\n\n<pre><code>import cv2\nimport glob\ni=0\n\nimages = glob.glob(\"*.jpg\")\n\nfor i in images:\n    print(\"start\")\n    img = cv2.imread(i, 1)  \n    cv2.imwrite(i.split('.')[0]+'.png', img, [cv2.IMWRITE_PNG_COMPRESSION, 1])\n    print(\"end\")\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10937233, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-r41u8JJMzCg/AAAAAAAAAAI/AAAAAAAALhQ/v2EQt_vb7IA/photo.jpg?sz=128", "display_name": "Sbr", "link": "https://stackoverflow.com/users/10937233/sbr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 56569754, "answer_count": 1, "score": 0, "last_activity_date": 1560376055, "creation_date": 1560368774, "last_edit_date": 1560376055, "question_id": 56569404, "link": "https://stackoverflow.com/questions/56569404/convert-plenty-of-jpeg-images-to-png-in-batch", "title": "Convert plenty of jpeg images to png in batch", "body": "<p>For work, I need to convert about 200 jpeg images to png. I've tried PIL but I've no idea how to solve this problem. Any ideas?</p>\n\n<pre><code>import cv2\nimport glob\ni=0\n\nimages = glob.glob(\"*.jpg\")\n\nfor i in images:\n    print(\"start\")\n    img = cv2.imread(images, 1)  \n    cv2.imwrite(images, img, [cv2.IMWRITE_PNG_COMPRESSION, 1])\n    print(\"end\")\n</code></pre>\n"}]