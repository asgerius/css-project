[{"tags": ["python", "keras", "clone", "conda"], "comments": [{"owner": {"reputation": 41290, "user_id": 570918, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/27ce5101af57acecf9a5fe563b6192b1?s=128&d=identicon&r=PG", "display_name": "merv", "link": "https://stackoverflow.com/users/570918/merv"}, "edited": false, "score": 0, "creation_date": 1576166242, "post_id": 59295853, "comment_id": 104819080, "body": "I&#39;d file on <a href=\"https://github.com/conda/conda/issues\" rel=\"nofollow noreferrer\">Conda&#39;s GitHub Issues</a>. I think v4.7 introduced some changes to solving that have many kinks that need to be worked out."}, {"owner": {"reputation": 313, "user_id": 4930744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/452338f07595404fd270ed139c732750?s=128&d=identicon&r=PG&f=1", "display_name": "David Wasserman", "link": "https://stackoverflow.com/users/4930744/david-wasserman"}, "reply_to_user": {"reputation": 41290, "user_id": 570918, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/27ce5101af57acecf9a5fe563b6192b1?s=128&d=identicon&r=PG", "display_name": "merv", "link": "https://stackoverflow.com/users/570918/merv"}, "edited": false, "score": 1, "creation_date": 1576777953, "post_id": 59295853, "comment_id": 105016732, "body": "Done. <a href=\"https://github.com/conda/conda/issues/9535\" rel=\"nofollow noreferrer\">github.com/conda/conda/issues/9535</a>"}], "owner": {"reputation": 313, "user_id": 4930744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/452338f07595404fd270ed139c732750?s=128&d=identicon&r=PG&f=1", "display_name": "David Wasserman", "link": "https://stackoverflow.com/users/4930744/david-wasserman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1576108553, "creation_date": 1576108553, "question_id": 59295853, "link": "https://stackoverflow.com/questions/59295853/why-does-conda-upgrade-behave-differently-on-a-cloned-environment", "title": "Why does &quot;conda upgrade&quot; behave differently on a cloned environment?", "body": "<p>Using conda on Linux, I wanted to update keras, so I typed <code>conda upgrade -c conda-forge keras</code>, and got a huge Package Plan that included </p>\n\n<blockquote>\n  <p>keras                            pkgs/main::keras-2.2.4-0 --> conda-forge::keras-2.3.1-py37_0</p>\n</blockquote>\n\n<p>I got nervous about making a huge change to my Python environment, so I said no the \"Proceed\" prompt. Then I cloned the environment, activated the clone, and again typed <code>conda upgrade -c conda-forge keras</code>. This time a got a much shorter Package Plan that included</p>\n\n<blockquote>\n  <p>keras                            pkgs/main::keras-2.2.4-0 --> conda-forge::keras-2.2.4-py37_1</p>\n</blockquote>\n\n<p>I'm confused. Is the cloned environment different from the environment it's cloned from? If not, why does <code>conda upgrade</code> give a different result?</p>\n\n<p>The complete inputs and outputs are below:</p>\n\n<pre><code>(myenv) [myname@ourserver ~]$ conda upgrade -c conda-forge keras\nCollecting package metadata (repodata.json): done\nSolving environment: done\n\n## Package Plan ##\n\n  environment location: /home/myname/.conda/envs/myenv\n\n  added / updated specs:\n    - keras\n\n\nThe following packages will be downloaded:\n\n    package                    |            build\n    ---------------------------|-----------------\n    _libgcc_mutex-0.1          |             main           2 KB  conda-forge\n    absl-py-0.8.1              |           py37_0         158 KB  conda-forge\n    astor-0.7.1                |             py_0          22 KB  conda-forge\n    attrs-19.3.0               |             py_0          35 KB  conda-forge\n    backcall-0.1.0             |             py_0          13 KB  conda-forge\n    binutils_impl_linux-64-2.33.1|       he1b5a44_7         8.6 MB  conda-forge\n    binutils_linux-64-2.33.1   |      h9595d00_15          21 KB  conda-forge\n    bleach-3.1.0               |             py_0         110 KB  conda-forge\n    bzip2-1.0.8                |       h516909a_2         396 KB  conda-forge\n    c-ares-1.15.0              |    h516909a_1001         100 KB  conda-forge\n    ca-certificates-2019.11.28 |       hecc5488_0         145 KB  conda-forge\n    certifi-2019.11.28         |           py37_0         148 KB  conda-forge\n    cycler-0.10.0              |             py_2           9 KB  conda-forge\n    dbus-1.13.6                |       he372182_0         602 KB  conda-forge\n    decorator-4.4.1            |             py_0          11 KB  conda-forge\n    defusedxml-0.6.0           |             py_0          22 KB  conda-forge\n    entrypoints-0.3            |        py37_1000          11 KB  conda-forge\n    expat-2.2.5                |    he1b5a44_1004         191 KB  conda-forge\n    fontconfig-2.13.1          |    he4413a7_1000         327 KB  conda-forge\n    freetype-2.10.0            |       he983fc9_1         884 KB  conda-forge\n    gast-0.3.2                 |             py_0          11 KB  conda-forge\n    gcc_impl_linux-64-7.3.0    |       habb00fd_2        70.5 MB  conda-forge\n    gcc_linux-64-7.3.0         |      h553295d_15          22 KB  conda-forge\n    gettext-0.19.8.1           |    hc5be6a0_1002         3.6 MB  conda-forge\n    glib-2.58.3                |py37h6f030ca_1002         3.3 MB  conda-forge\n    grpcio-1.23.0              |   py37he9ae1f9_0         1.1 MB  conda-forge\n    gst-plugins-base-1.14.5    |       h0935bb2_0         6.8 MB  conda-forge\n    gstreamer-1.14.5           |       h36ae1b5_0         4.5 MB  conda-forge\n    gxx_impl_linux-64-7.3.0    |       hdf63c60_2        19.1 MB  conda-forge\n    gxx_linux-64-7.3.0         |      h553295d_15          21 KB  conda-forge\n    h5py-2.10.0                |nompi_py37h513d04c_100         1.2 MB  conda-forge\n    hdf5-1.10.5                |nompi_h3c11f04_1104         3.1 MB  conda-forge\n    icu-58.2                   |    hf484d3e_1000        22.6 MB  conda-forge\n    importlib_metadata-1.2.0   |           py37_0          40 KB  conda-forge\n    ipykernel-5.1.3            |   py37h5ca1d4c_0         160 KB  conda-forge\n    ipython-7.10.1             |   py37h5ca1d4c_0         1.1 MB  conda-forge\n    ipython_genutils-0.2.0     |             py_1          21 KB  conda-forge\n    ipywidgets-7.5.1           |             py_0         101 KB  conda-forge\n    jedi-0.15.1                |           py37_0         718 KB  conda-forge\n    jinja2-2.10.3              |             py_0          91 KB  conda-forge\n    joblib-0.14.0              |             py_0         197 KB  conda-forge\n    jpeg-9c                    |    h14c3975_1001         251 KB  conda-forge\n    jsonschema-3.2.0           |           py37_0          89 KB  conda-forge\n    jupyter_client-5.3.3       |           py37_1         132 KB  conda-forge\n    jupyter_console-6.0.0      |             py_0          19 KB  conda-forge\n    jupyter_core-4.6.1         |           py37_0          70 KB  conda-forge\n    keras-2.3.1                |           py37_0         591 KB  conda-forge\n    keras-applications-1.0.8   |             py_1          30 KB  conda-forge\n    keras-preprocessing-1.1.0  |             py_0          33 KB  conda-forge\n    kiwisolver-1.1.0           |   py37hc9558a2_0          86 KB  conda-forge\n    ld_impl_linux-64-2.33.1    |       h53a641e_7         653 KB  conda-forge\n    libffi-3.2.1               |    he1b5a44_1006          46 KB  conda-forge\n    libgcc-ng-9.2.0            |       hdf63c60_0         8.6 MB  conda-forge\n    libgfortran-ng-7.3.0       |       hdf63c60_2         1.7 MB  conda-forge\n    libgpuarray-0.7.6          |    h14c3975_1003         263 KB  conda-forge\n    libiconv-1.15              |    h516909a_1005         2.0 MB  conda-forge\n    libpng-1.6.37              |       hed695b0_0         343 KB  conda-forge\n    libprotobuf-3.11.1         |       h8b12597_0         4.8 MB  conda-forge\n    libsodium-1.0.17           |       h516909a_0         330 KB  conda-forge\n    libstdcxx-ng-9.2.0         |       hdf63c60_0         4.5 MB  conda-forge\n    libuuid-2.32.1             |    h14c3975_1000          26 KB  conda-forge\n    libxcb-1.13                |    h14c3975_1002         396 KB  conda-forge\n    libxml2-2.9.9              |       h13577e0_2         1.3 MB  conda-forge\n    mako-1.1.0                 |             py_0          57 KB  conda-forge\n    markdown-3.1.1             |             py_0          60 KB  conda-forge\n    markupsafe-1.1.1           |   py37h516909a_0          26 KB  conda-forge\n    mistune-0.8.4              |py37h516909a_1000          53 KB  conda-forge\n    mkl-service-2.3.0          |   py37h516909a_0          64 KB  conda-forge\n    mkl_fft-1.0.15             |   py37h516909a_1         169 KB  conda-forge\n    mkl_random-1.1.0           |   py37hb3f55d8_0         372 KB  conda-forge\n    mock-3.0.5                 |           py37_0          44 KB  conda-forge\n    more-itertools-8.0.2       |             py_0          33 KB  conda-forge\n    nbconvert-5.6.1            |           py37_0         487 KB  conda-forge\n    nbformat-4.4.0             |             py_1          91 KB  conda-forge\n    ncurses-6.1                |    hf484d3e_1002         1.3 MB  conda-forge\n    notebook-6.0.1             |           py37_0         6.0 MB  conda-forge\n    openssl-1.1.1d             |       h516909a_0         2.1 MB  conda-forge\n    pandoc-2.8.1               |                0        16.5 MB  conda-forge\n    pandocfilters-1.4.2        |             py_1           9 KB  conda-forge\n    parso-0.5.1                |             py_0          65 KB  conda-forge\n    pcre-8.43                  |       he1b5a44_0         257 KB  conda-forge\n    pexpect-4.7.0              |           py37_0          78 KB  conda-forge\n    pickleshare-0.7.5          |        py37_1000          12 KB  conda-forge\n    pip-19.3.1                 |           py37_0         1.9 MB  conda-forge\n    prometheus_client-0.7.1    |             py_0          38 KB  conda-forge\n    prompt_toolkit-2.0.10      |             py_0         221 KB  conda-forge\n    protobuf-3.11.1            |   py37he1b5a44_0         697 KB  conda-forge\n    pthread-stubs-0.4          |    h14c3975_1001           5 KB  conda-forge\n    ptyprocess-0.6.0           |          py_1001          15 KB  conda-forge\n    pygments-2.5.2             |             py_0         669 KB  conda-forge\n    pygpu-0.7.6                |py37hc1659b7_1000         680 KB  conda-forge\n    pyparsing-2.4.5            |             py_0          58 KB  conda-forge\n    pyqt-5.9.2                 |   py37hcca6a23_4         5.7 MB  conda-forge\n    pyrsistent-0.15.6          |   py37h516909a_0          89 KB  conda-forge\n    python-3.7.3               |       h357f687_2        35.3 MB  conda-forge\n    python-dateutil-2.8.1      |             py_0         220 KB  conda-forge\n    pytz-2019.3                |             py_0         237 KB  conda-forge\n    pyyaml-5.2                 |   py37h516909a_0         184 KB  conda-forge\n    pyzmq-18.1.1               |   py37h1768529_0         517 KB  conda-forge\n    qt-5.9.7                   |       h52cfd70_2        85.9 MB  conda-forge\n    qtconsole-4.6.0            |             py_0          90 KB  conda-forge\n    readline-8.0               |       hf8c457e_0         441 KB  conda-forge\n    send2trash-1.5.0           |             py_0          12 KB  conda-forge\n    setuptools-42.0.2          |           py37_0         636 KB  conda-forge\n    sip-4.19.8                 |py37hf484d3e_1000         290 KB  conda-forge\n    six-1.13.0                 |           py37_0          22 KB  conda-forge\n    sqlite-3.30.1              |       hcee41ef_0         2.0 MB  conda-forge\n    tensorboard-1.13.1         |           py37_0         3.3 MB  conda-forge\n    tensorflow-1.13.1          |   py37h90a7d86_1        75.5 MB  conda-forge\n    tensorflow-estimator-1.13.0|             py_0         205 KB\n    termcolor-1.1.0            |             py_2           6 KB  conda-forge\n    terminado-0.8.3            |           py37_0          23 KB  conda-forge\n    testpath-0.4.4             |             py_0          85 KB  conda-forge\n    theano-1.0.4               |py37hf484d3e_1000         3.6 MB  conda-forge\n    tk-8.6.10                  |       hed695b0_0         3.2 MB  conda-forge\n    tornado-6.0.3              |   py37h516909a_0         637 KB  conda-forge\n    traitlets-4.3.3            |           py37_0         133 KB  conda-forge\n    wcwidth-0.1.7              |             py_1          17 KB  conda-forge\n    webencodings-0.5.1         |             py_1          12 KB  conda-forge\n    werkzeug-0.16.0            |             py_0         259 KB  conda-forge\n    wheel-0.33.6               |           py37_0          35 KB  conda-forge\n    widgetsnbextension-3.5.1   |           py37_0         1.8 MB  conda-forge\n    xorg-libxau-1.0.9          |       h14c3975_0          13 KB  conda-forge\n    xorg-libxdmcp-1.1.3        |       h516909a_0          18 KB  conda-forge\n    xz-5.2.4                   |    h14c3975_1001         366 KB  conda-forge\n    yaml-0.2.2                 |       h516909a_1          82 KB  conda-forge\n    zeromq-4.3.2               |       he1b5a44_2         668 KB  conda-forge\n    zipp-0.6.0                 |             py_0           7 KB  conda-forge\n    zlib-1.2.11                |    h516909a_1006         105 KB  conda-forge\n    ------------------------------------------------------------\n                                           Total:       429.6 MB\n\nThe following NEW packages will be INSTALLED:\n\n  binutils_impl_lin~ conda-forge/linux-64::binutils_impl_linux-64-2.33.1-he1b5a44_7\n  binutils_linux-64  conda-forge/linux-64::binutils_linux-64-2.33.1-h9595d00_15\n  bzip2              conda-forge/linux-64::bzip2-1.0.8-h516909a_2\n  gcc_impl_linux-64  conda-forge/linux-64::gcc_impl_linux-64-7.3.0-habb00fd_2\n  gcc_linux-64       conda-forge/linux-64::gcc_linux-64-7.3.0-h553295d_15\n  gettext            conda-forge/linux-64::gettext-0.19.8.1-hc5be6a0_1002\n  gxx_impl_linux-64  conda-forge/linux-64::gxx_impl_linux-64-7.3.0-hdf63c60_2\n  gxx_linux-64       conda-forge/linux-64::gxx_linux-64-7.3.0-h553295d_15\n  ld_impl_linux-64   conda-forge/linux-64::ld_impl_linux-64-2.33.1-h53a641e_7\n  libgpuarray        conda-forge/linux-64::libgpuarray-0.7.6-h14c3975_1003\n  libiconv           conda-forge/linux-64::libiconv-1.15-h516909a_1005\n  mako               conda-forge/noarch::mako-1.1.0-py_0\n  mock               conda-forge/linux-64::mock-3.0.5-py37_0\n  pthread-stubs      conda-forge/linux-64::pthread-stubs-0.4-h14c3975_1001\n  pygpu              conda-forge/linux-64::pygpu-0.7.6-py37hc1659b7_1000\n  theano             conda-forge/linux-64::theano-1.0.4-py37hf484d3e_1000\n  xorg-libxau        conda-forge/linux-64::xorg-libxau-1.0.9-h14c3975_0\n  xorg-libxdmcp      conda-forge/linux-64::xorg-libxdmcp-1.1.3-h516909a_0\n\nThe following packages will be REMOVED:\n\n  _tflow_select-2.3.0-mkl\n  gmp-6.1.2-h6c8ec71_1\n  google-pasta-0.1.8-py_0\n  keras-base-2.2.4-py37_0\n  libedit-3.1.20181209-hc058e9b_0\n  opt_einsum-3.1.0-py_0\n  tensorflow-base-1.15.0-mkl_py37he1670d9_0\n  wrapt-1.11.2-py37h7b6447c_0\n\nThe following packages will be UPDATED:\n\n  ca-certificates    pkgs/main::ca-certificates-2019.11.27~ --&gt; conda-forge::ca-certificates-2019.11.28-hecc5488_0\n  cycler             pkgs/main/linux-64::cycler-0.10.0-py3~ --&gt; conda-forge/noarch::cycler-0.10.0-py_2\n  entrypoints             pkgs/main::entrypoints-0.3-py37_0 --&gt; conda-forge::entrypoints-0.3-py37_1000\n  fontconfig         pkgs/main::fontconfig-2.13.0-h9420a91~ --&gt; conda-forge::fontconfig-2.13.1-he4413a7_1000\n  freetype             pkgs/main::freetype-2.9.1-h8a8886c_1 --&gt; conda-forge::freetype-2.10.0-he983fc9_1\n  gast                pkgs/main/linux-64::gast-0.2.2-py37_0 --&gt; conda-forge/noarch::gast-0.3.2-py_0\n  grpcio             pkgs/main::grpcio-1.16.1-py37hf8bcb03~ --&gt; conda-forge::grpcio-1.23.0-py37he9ae1f9_0\n  gst-plugins-base   pkgs/main::gst-plugins-base-1.14.0-hb~ --&gt; conda-forge::gst-plugins-base-1.14.5-h0935bb2_0\n  gstreamer          pkgs/main::gstreamer-1.14.0-hb453b48_1 --&gt; conda-forge::gstreamer-1.14.5-h36ae1b5_0\n  h5py                 pkgs/main::h5py-2.9.0-py37h7918eee_0 --&gt; conda-forge::h5py-2.10.0-nompi_py37h513d04c_100\n  hdf5                    pkgs/main::hdf5-1.10.4-hb1b8bf9_0 --&gt; conda-forge::hdf5-1.10.5-nompi_h3c11f04_1104\n  icu                        pkgs/main::icu-58.2-h9c2bf20_1 --&gt; conda-forge::icu-58.2-hf484d3e_1000\n  ipython_genutils   pkgs/main/linux-64::ipython_genutils-~ --&gt; conda-forge/noarch::ipython_genutils-0.2.0-py_1\n  jpeg                        pkgs/main::jpeg-9b-h024ee3a_2 --&gt; conda-forge::jpeg-9c-h14c3975_1001\n  jupyter_console    pkgs/main/linux-64::jupyter_console-5~ --&gt; conda-forge/noarch::jupyter_console-6.0.0-py_0\n  keras                            pkgs/main::keras-2.2.4-0 --&gt; conda-forge::keras-2.3.1-py37_0\n  keras-applications pkgs/main::keras-applications-1.0.8-p~ --&gt; conda-forge::keras-applications-1.0.8-py_1\n  libffi                 pkgs/main::libffi-3.2.1-hd88cf55_4 --&gt; conda-forge::libffi-3.2.1-he1b5a44_1006\n  libgcc-ng           pkgs/main::libgcc-ng-9.1.0-hdf63c60_0 --&gt; conda-forge::libgcc-ng-9.2.0-hdf63c60_0\n  libgfortran-ng     pkgs/main::libgfortran-ng-7.3.0-hdf63~ --&gt; conda-forge::libgfortran-ng-7.3.0-hdf63c60_2\n  libprotobuf        pkgs/main::libprotobuf-3.10.1-hd40887~ --&gt; conda-forge::libprotobuf-3.11.1-h8b12597_0\n  libsodium          pkgs/main::libsodium-1.0.16-h1bed415_0 --&gt; conda-forge::libsodium-1.0.17-h516909a_0\n  libstdcxx-ng       pkgs/main::libstdcxx-ng-9.1.0-hdf63c6~ --&gt; conda-forge::libstdcxx-ng-9.2.0-hdf63c60_0\n  libuuid               pkgs/main::libuuid-1.0.3-h1bed415_2 --&gt; conda-forge::libuuid-2.32.1-h14c3975_1000\n  libxcb                  pkgs/main::libxcb-1.13-h1bed415_1 --&gt; conda-forge::libxcb-1.13-h14c3975_1002\n  libxml2               pkgs/main::libxml2-2.9.9-hea5a465_1 --&gt; conda-forge::libxml2-2.9.9-h13577e0_2\n  mistune            pkgs/main::mistune-0.8.4-py37h7b6447c~ --&gt; conda-forge::mistune-0.8.4-py37h516909a_1000\n  mkl_fft            pkgs/main::mkl_fft-1.0.15-py37ha843d7~ --&gt; conda-forge::mkl_fft-1.0.15-py37h516909a_1\n  more-itertools     pkgs/main/linux-64::more-itertools-7.~ --&gt; conda-forge/noarch::more-itertools-8.0.2-py_0\n  nbformat           pkgs/main/linux-64::nbformat-4.4.0-py~ --&gt; conda-forge/noarch::nbformat-4.4.0-py_1\n  ncurses                 pkgs/main::ncurses-6.1-he6710b0_1 --&gt; conda-forge::ncurses-6.1-hf484d3e_1002\n  pandoc                        pkgs/main::pandoc-2.2.3.2-0 --&gt; conda-forge::pandoc-2.8.1-0\n  pickleshare           pkgs/main::pickleshare-0.7.5-py37_0 --&gt; conda-forge::pickleshare-0.7.5-py37_1000\n  protobuf           pkgs/main::protobuf-3.10.1-py37he6710~ --&gt; conda-forge::protobuf-3.11.1-py37he1b5a44_0\n  ptyprocess         pkgs/main/linux-64::ptyprocess-0.6.0-~ --&gt; conda-forge/noarch::ptyprocess-0.6.0-py_1001\n  pyqt                 pkgs/main::pyqt-5.9.2-py37h05f1152_2 --&gt; conda-forge::pyqt-5.9.2-py37hcca6a23_4\n  pyyaml             pkgs/main::pyyaml-5.1.2-py37h7b6447c_0 --&gt; conda-forge::pyyaml-5.2-py37h516909a_0\n  pyzmq              pkgs/main::pyzmq-18.1.0-py37he6710b0_0 --&gt; conda-forge::pyzmq-18.1.1-py37h1768529_0\n  qt                         pkgs/main::qt-5.9.7-h5867ecd_1 --&gt; conda-forge::qt-5.9.7-h52cfd70_2\n  readline               pkgs/main::readline-7.0-h7b6447c_5 --&gt; conda-forge::readline-8.0-hf8c457e_0\n  sip                  pkgs/main::sip-4.19.8-py37hf484d3e_0 --&gt; conda-forge::sip-4.19.8-py37hf484d3e_1000\n  termcolor          pkgs/main/linux-64::termcolor-1.1.0-p~ --&gt; conda-forge/noarch::termcolor-1.1.0-py_2\n  tk                         pkgs/main::tk-8.6.8-hbc83047_0 --&gt; conda-forge::tk-8.6.10-hed695b0_0\n  wcwidth            pkgs/main/linux-64::wcwidth-0.1.7-py3~ --&gt; conda-forge/noarch::wcwidth-0.1.7-py_1\n  xz                         pkgs/main::xz-5.2.4-h14c3975_4 --&gt; conda-forge::xz-5.2.4-h14c3975_1001\n  yaml                     pkgs/main::yaml-0.1.7-had09818_2 --&gt; conda-forge::yaml-0.2.2-h516909a_1\n  zeromq                 pkgs/main::zeromq-4.3.1-he6710b0_3 --&gt; conda-forge::zeromq-4.3.2-he1b5a44_2\n  zlib                    pkgs/main::zlib-1.2.11-h7b6447c_3 --&gt; conda-forge::zlib-1.2.11-h516909a_1006\n\nThe following packages will be SUPERSEDED by a higher-priority channel:\n\n  _libgcc_mutex                                   pkgs/main --&gt; conda-forge\n  absl-py                                         pkgs/main --&gt; conda-forge\n  astor              pkgs/main/linux-64::astor-0.8.0-py37_0 --&gt; conda-forge/noarch::astor-0.7.1-py_0\n  attrs                                           pkgs/main --&gt; conda-forge\n  backcall           pkgs/main/linux-64::backcall-0.1.0-py~ --&gt; conda-forge/noarch::backcall-0.1.0-py_0\n  bleach             pkgs/main/linux-64::bleach-3.1.0-py37~ --&gt; conda-forge/noarch::bleach-3.1.0-py_0\n  c-ares             pkgs/main::c-ares-1.15.0-h7b6447c_1001 --&gt; conda-forge::c-ares-1.15.0-h516909a_1001\n  certifi                                         pkgs/main --&gt; conda-forge\n  dbus                   pkgs/main::dbus-1.13.12-h746ee38_0 --&gt; conda-forge::dbus-1.13.6-he372182_0\n  decorator                                       pkgs/main --&gt; conda-forge\n  defusedxml                                      pkgs/main --&gt; conda-forge\n  expat                   pkgs/main::expat-2.2.6-he6710b0_0 --&gt; conda-forge::expat-2.2.5-he1b5a44_1004\n  glib                    pkgs/main::glib-2.63.1-h5a9c865_0 --&gt; conda-forge::glib-2.58.3-py37h6f030ca_1002\n  importlib_metadata                              pkgs/main --&gt; conda-forge\n  ipykernel          pkgs/main::ipykernel-5.1.3-py37h39e3c~ --&gt; conda-forge::ipykernel-5.1.3-py37h5ca1d4c_0\n  ipython            pkgs/main::ipython-7.10.1-py37h39e3ca~ --&gt; conda-forge::ipython-7.10.1-py37h5ca1d4c_0\n  ipywidgets                                      pkgs/main --&gt; conda-forge\n  jedi                                            pkgs/main --&gt; conda-forge\n  jinja2                                          pkgs/main --&gt; conda-forge\n  joblib                                          pkgs/main --&gt; conda-forge\n  jsonschema                                      pkgs/main --&gt; conda-forge\n  jupyter_client     pkgs/main::jupyter_client-5.3.4-py37_0 --&gt; conda-forge::jupyter_client-5.3.3-py37_1\n  jupyter_core                                    pkgs/main --&gt; conda-forge\n  keras-preprocessi~ pkgs/main::keras-preprocessing-1.1.0-~ --&gt; conda-forge::keras-preprocessing-1.1.0-py_0\n  kiwisolver         pkgs/main::kiwisolver-1.1.0-py37he671~ --&gt; conda-forge::kiwisolver-1.1.0-py37hc9558a2_0\n  libpng                pkgs/main::libpng-1.6.37-hbc83047_0 --&gt; conda-forge::libpng-1.6.37-hed695b0_0\n  markdown           pkgs/main/linux-64::markdown-3.1.1-py~ --&gt; conda-forge/noarch::markdown-3.1.1-py_0\n  markupsafe         pkgs/main::markupsafe-1.1.1-py37h7b64~ --&gt; conda-forge::markupsafe-1.1.1-py37h516909a_0\n  mkl-service        pkgs/main::mkl-service-2.3.0-py37he90~ --&gt; conda-forge::mkl-service-2.3.0-py37h516909a_0\n  mkl_random         pkgs/main::mkl_random-1.1.0-py37hd6b4~ --&gt; conda-forge::mkl_random-1.1.0-py37hb3f55d8_0\n  nbconvert                                       pkgs/main --&gt; conda-forge\n  notebook                 pkgs/main::notebook-6.0.2-py37_0 --&gt; conda-forge::notebook-6.0.1-py37_0\n  openssl              pkgs/main::openssl-1.1.1d-h7b6447c_3 --&gt; conda-forge::openssl-1.1.1d-h516909a_0\n  pandocfilters      pkgs/main/linux-64::pandocfilters-1.4~ --&gt; conda-forge/noarch::pandocfilters-1.4.2-py_1\n  parso                                           pkgs/main --&gt; conda-forge\n  pcre                      pkgs/main::pcre-8.43-he6710b0_0 --&gt; conda-forge::pcre-8.43-he1b5a44_0\n  pexpect                                         pkgs/main --&gt; conda-forge\n  pip                                             pkgs/main --&gt; conda-forge\n  prometheus_client                               pkgs/main --&gt; conda-forge\n  prompt_toolkit       pkgs/main::prompt_toolkit-3.0.2-py_0 --&gt; conda-forge::prompt_toolkit-2.0.10-py_0\n  pygments                                        pkgs/main --&gt; conda-forge\n  pyparsing                                       pkgs/main --&gt; conda-forge\n  pyrsistent         pkgs/main::pyrsistent-0.15.6-py37h7b6~ --&gt; conda-forge::pyrsistent-0.15.6-py37h516909a_0\n  python                 pkgs/main::python-3.7.5-h0371630_0 --&gt; conda-forge::python-3.7.3-h357f687_2\n  python-dateutil                                 pkgs/main --&gt; conda-forge\n  pytz                                            pkgs/main --&gt; conda-forge\n  qtconsole                                       pkgs/main --&gt; conda-forge\n  send2trash         pkgs/main/linux-64::send2trash-1.5.0-~ --&gt; conda-forge/noarch::send2trash-1.5.0-py_0\n  setuptools                                      pkgs/main --&gt; conda-forge\n  six                                             pkgs/main --&gt; conda-forge\n  sqlite                pkgs/main::sqlite-3.30.1-h7b6447c_0 --&gt; conda-forge::sqlite-3.30.1-hcee41ef_0\n  tensorboard        pkgs/main/noarch::tensorboard-1.15.0-~ --&gt; conda-forge/linux-64::tensorboard-1.13.1-py37_0\n  tensorflow         pkgs/main::tensorflow-1.15.0-mkl_py37~ --&gt; conda-forge::tensorflow-1.13.1-py37h90a7d86_1\n  terminado                                       pkgs/main --&gt; conda-forge\n  testpath                                        pkgs/main --&gt; conda-forge\n  tornado            pkgs/main::tornado-6.0.3-py37h7b6447c~ --&gt; conda-forge::tornado-6.0.3-py37h516909a_0\n  traitlets                                       pkgs/main --&gt; conda-forge\n  webencodings       pkgs/main/linux-64::webencodings-0.5.~ --&gt; conda-forge/noarch::webencodings-0.5.1-py_1\n  werkzeug                                        pkgs/main --&gt; conda-forge\n  wheel                                           pkgs/main --&gt; conda-forge\n  widgetsnbextension                              pkgs/main --&gt; conda-forge\n  zipp                                            pkgs/main --&gt; conda-forge\n\nThe following packages will be DOWNGRADED:\n\n  tensorflow-estima~                    1.15.1-pyh2649769_0 --&gt; 1.13.0-py_0\n\n\nProceed ([y]/n)? n\n\n\nCondaSystemExit: Exiting.\n\n(myenv) [myname@ourserver ~]$ conda create --name myenv2 --clone myenv\nSource:      /home/myname/.conda/envs/myenv\nDestination: /home/myname/.conda/envs/myenv2\nPackages: 130\nFiles: 5\nPreparing transaction: done\nVerifying transaction: done\nExecuting transaction: done\n#\n# To activate this environment, use\n#\n#     $ conda activate myenv2\n#\n# To deactivate an active environment, use\n#\n#     $ conda deactivate\n\n(myenv) [myname@ourserver ~]$ conda activate myenv2\n(myenv2) [myname@ourserver ~]$ conda upgrade -c conda-forge keras\nCollecting package metadata (repodata.json): done\nSolving environment: done\n\n## Package Plan ##\n\n  environment location: /home/myname/.conda/envs/myenv2\n\n  added / updated specs:\n    - keras\n\n\nThe following packages will be downloaded:\n\n    package                    |            build\n    ---------------------------|-----------------\n    binutils_impl_linux-64-2.33.1|       he1b5a44_7         8.6 MB  conda-forge\n    binutils_linux-64-2.33.1   |      h9595d00_15          21 KB  conda-forge\n    ca-certificates-2019.11.28 |       hecc5488_0         145 KB  conda-forge\n    certifi-2019.11.28         |           py37_0         148 KB  conda-forge\n    gcc_impl_linux-64-7.3.0    |       habb00fd_2        70.5 MB  conda-forge\n    gcc_linux-64-7.3.0         |      h553295d_15          22 KB  conda-forge\n    gxx_impl_linux-64-7.3.0    |       hdf63c60_2        19.1 MB  conda-forge\n    gxx_linux-64-7.3.0         |      h553295d_15          21 KB  conda-forge\n    keras-2.2.4                |           py37_1         492 KB  conda-forge\n    ld_impl_linux-64-2.33.1    |       h53a641e_7         653 KB  conda-forge\n    libgpuarray-0.7.6          |    h14c3975_1003         263 KB  conda-forge\n    mako-1.1.0                 |             py_0          57 KB  conda-forge\n    openssl-1.1.1d             |       h516909a_0         2.1 MB  conda-forge\n    pygpu-0.7.6                |py37hc1659b7_1000         680 KB  conda-forge\n    theano-1.0.4               |py37hf484d3e_1000         3.6 MB  conda-forge\n    ------------------------------------------------------------\n                                           Total:       106.3 MB\n\nThe following NEW packages will be INSTALLED:\n\n  binutils_impl_lin~ conda-forge/linux-64::binutils_impl_linux-64-2.33.1-he1b5a44_7\n  binutils_linux-64  conda-forge/linux-64::binutils_linux-64-2.33.1-h9595d00_15\n  gcc_impl_linux-64  conda-forge/linux-64::gcc_impl_linux-64-7.3.0-habb00fd_2\n  gcc_linux-64       conda-forge/linux-64::gcc_linux-64-7.3.0-h553295d_15\n  gxx_impl_linux-64  conda-forge/linux-64::gxx_impl_linux-64-7.3.0-hdf63c60_2\n  gxx_linux-64       conda-forge/linux-64::gxx_linux-64-7.3.0-h553295d_15\n  ld_impl_linux-64   conda-forge/linux-64::ld_impl_linux-64-2.33.1-h53a641e_7\n  libgpuarray        conda-forge/linux-64::libgpuarray-0.7.6-h14c3975_1003\n  mako               conda-forge/noarch::mako-1.1.0-py_0\n  pygpu              conda-forge/linux-64::pygpu-0.7.6-py37hc1659b7_1000\n  theano             conda-forge/linux-64::theano-1.0.4-py37hf484d3e_1000\n\nThe following packages will be UPDATED:\n\n  ca-certificates    pkgs/main::ca-certificates-2019.11.27~ --&gt; conda-forge::ca-certificates-2019.11.28-hecc5488_0\n  keras                            pkgs/main::keras-2.2.4-0 --&gt; conda-forge::keras-2.2.4-py37_1\n\nThe following packages will be SUPERSEDED by a higher-priority channel:\n\n  certifi                                         pkgs/main --&gt; conda-forge\n  openssl              pkgs/main::openssl-1.1.1d-h7b6447c_3 --&gt; conda-forge::openssl-1.1.1d-h516909a_0\n\n\nProceed ([y]/n)? n\n</code></pre>\n"}, {"tags": ["python", "logging"], "answers": [{"tags": [], "owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "is_accepted": true, "score": 2, "last_activity_date": 1576109036, "creation_date": 1576109036, "answer_id": 59295897, "question_id": 59295769, "link": "https://stackoverflow.com/questions/59295769/getting-the-log-level-in-python/59295897#59295897", "title": "Getting the log level in python", "body": "<p>You can do it this way:</p>\n\n<pre><code>&gt;&gt;&gt; logging.getLevelName(logging.getLogger().getEffectiveLevel())\n'INFO'\n</code></pre>\n\n<p>The call to <code>.getEffectiveLevel()</code> returns the numeric code of the level, and from there you get the level name via the appropriately named <code>.getLevelName()</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 6712, "user_id": 1870832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/4zazd.png?s=128&g=1", "display_name": "Max Power", "link": "https://stackoverflow.com/users/1870832/max-power"}, "is_accepted": false, "score": 0, "last_activity_date": 1576109113, "creation_date": 1576109113, "answer_id": 59295903, "question_id": 59295769, "link": "https://stackoverflow.com/questions/59295769/getting-the-log-level-in-python/59295903#59295903", "title": "Getting the log level in python", "body": "<p>Would this work for you?</p>\n\n<pre><code>import logging\nlvl = logging.INFO\n\nlogging.basicConfig(filename='example.log',level=lvl)    \nprint(logging.getLevelName(lvl))\n&gt;&gt;&gt;INFO\n</code></pre>\n"}], "owner": {"reputation": 96308, "user_id": 651174, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2e2d79b9350ef4ebf04ac0ad5816a5c3?s=128&d=identicon&r=PG", "display_name": "David542", "link": "https://stackoverflow.com/users/651174/david542"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 59295897, "answer_count": 2, "score": 1, "last_activity_date": 1576134464, "creation_date": 1576107981, "last_edit_date": 1576134464, "question_id": 59295769, "link": "https://stackoverflow.com/questions/59295769/getting-the-log-level-in-python", "title": "Getting the log level in python", "body": "<p>After setting the level to <code>info</code>:</p>\n\n<pre><code>import logging\nlogging.basicConfig(filename='example.log',level=logging.INFO)\n</code></pre>\n\n<p>Is there a way I can print the <code>level</code> to confirm it's set to <code>logging.INFO</code> ? I was hoping <code>logging.__dict__</code> would show it, but I can't find it from that dict.</p>\n"}, {"tags": ["python", "heroku", "syntax-error", "heroku-postgres"], "answers": [{"tags": [], "owner": {"reputation": 121, "user_id": 12364376, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDLAuTstTwYa6IN-a4UT6vNDpE9biHzZDdbfwwsfhg=k-s128", "display_name": "Austin Zhao", "link": "https://stackoverflow.com/users/12364376/austin-zhao"}, "is_accepted": false, "score": 12, "last_activity_date": 1582427480, "last_edit_date": 1582427480, "creation_date": 1577654349, "answer_id": 59523387, "question_id": 59295714, "link": "https://stackoverflow.com/questions/59295714/templatesyntaxerror-while-following-heroku-python-tutorial/59523387#59523387", "title": "TemplateSyntaxError while following Heroku Python tutorial", "body": "<p>Had the same problem here as well. It seems like the staticfiles template tag libraries were <a href=\"https://docs.djangoproject.com/en/dev/internals/deprecation/\" rel=\"noreferrer\">updated recently</a> in Django 3.0.0 (in which staticfiles was deprecated), and Heroku probably didn't update the tutorial files. </p>\n\n<p>Go to your local app directory (created from <code>cd python-getting-started</code>) and find settings.py (python-getting-started\\gettingstarted\\settings.py). Scroll to the bottom and change <code>STATIC_ROOT = os.path.join(BASE_DIR, 'staticfiles')</code> to <code>STATIC_ROOT = os.path.join(BASE_DIR, 'static')</code>. </p>\n\n<p>Go to the template database html file found in <code>python-getting-started\\hello\\templates\\db.html</code> and change <code>{% load staticfiles %}</code> to <code>{% load static %}</code></p>\n\n<p>Go to the root folder and rename the static files folder from <code>staticfiles</code> to <code>static</code></p>\n\n<p>Hope this helps. Make sure to <a href=\"https://devcenter.heroku.com/articles/getting-started-with-python#push-local-changes\" rel=\"noreferrer\">update your changes</a>.</p>\n"}], "owner": {"reputation": 167, "user_id": 9398947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93ee12325563a8da5816b88c1774f9bf?s=128&d=identicon&r=PG&f=1", "display_name": "dylosaur", "link": "https://stackoverflow.com/users/9398947/dylosaur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 296, "favorite_count": 3, "answer_count": 1, "score": 8, "last_activity_date": 1582427480, "creation_date": 1576107530, "question_id": 59295714, "link": "https://stackoverflow.com/questions/59295714/templatesyntaxerror-while-following-heroku-python-tutorial", "title": "TemplateSyntaxError while following Heroku Python tutorial", "body": "<p>Brand new to using Heroku and I've already hit a roadblock while following the Python tutorial.  Every step was pretty straightforward up until <a href=\"https://devcenter.heroku.com/articles/getting-started-with-python#provision-a-database\" rel=\"noreferrer\">provisioning a database.</a>  After performing <code>heroku run python manage.py migrate</code> I should be able to see the database after adding <code>/db</code> to the end of the URL, but instead I'm sent to an error page, which looks like this:</p>\n\n<pre><code>TemplateSyntaxError at /db/\n'staticfiles' is not a registered tag library. Must be one of:\nadmin_list\nadmin_modify\nadmin_urls\ncache\ni18n\nl10n\nlog\nstatic\ntz\nRequest Method: GET\nRequest URL:    https://morning-oasis-00207.herokuapp.com/db/\nDjango Version: 3.0\nException Type: TemplateSyntaxError\nException Value:    \n'staticfiles' is not a registered tag library. Must be one of:\nadmin_list\nadmin_modify\nadmin_urls\ncache\ni18n\nl10n\nlog\nstatic\ntz\nException Location: /app/.heroku/python/lib/python3.7/site-packages/django/template/defaulttags.py in find_library, line 1025\nPython Executable:  /app/.heroku/python/bin/python\nPython Version: 3.7.3\nPython Path:    \n['/app/.heroku/python/bin',\n '/app',\n '/app/.heroku/python/lib/python37.zip',\n '/app/.heroku/python/lib/python3.7',\n '/app/.heroku/python/lib/python3.7/lib-dynload',\n '/app/.heroku/python/lib/python3.7/site-packages']\nServer time:    Wed, 11 Dec 2019 23:17:58 +0000\n</code></pre>\n\n<p>I've literally followed the steps exactly, one after another, so I'm kind of at a loss here.  I'd skip past this, but I need to use a database for a project I'm going to be working on and I'd like to know how to avoid this in the future.  I've looked at several other similar discussions here, but didn't see anything specific to the tutorial.  Any help would be appreciated.</p>\n"}, {"tags": ["python", "python-3.x", "numpy", "vectorization", "sympy"], "comments": [{"owner": {"reputation": 11909, "user_id": 2476444, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/czrJP.png?s=128&g=1", "display_name": "Oliver W.", "link": "https://stackoverflow.com/users/2476444/oliver-w"}, "edited": false, "score": 5, "creation_date": 1576107612, "post_id": 59295699, "comment_id": 104795785, "body": "WHat does <code>function</code> do? It\u2019s fairly essential to see if this can be vectorized."}, {"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 2, "creation_date": 1576107792, "post_id": 59295699, "comment_id": 104795839, "body": "should <code>count += 1</code> be indented to the inner loop? right now it is only in the outer loop which means most of your assignments are overriding themselves and not all of <code>ff</code> is initialized."}, {"owner": {"reputation": 75, "user_id": 5565575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2be270717ba49399545f9dd516bd747e?s=128&d=identicon&r=PG&f=1", "display_name": "AA10", "link": "https://stackoverflow.com/users/5565575/aa10"}, "edited": false, "score": 1, "creation_date": 1576107803, "post_id": 59295699, "comment_id": 104795843, "body": "The function is relatively complex. It involves symbolic calculations with dot products and matrix multiplications."}, {"owner": {"reputation": 75, "user_id": 5565575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2be270717ba49399545f9dd516bd747e?s=128&d=identicon&r=PG&f=1", "display_name": "AA10", "link": "https://stackoverflow.com/users/5565575/aa10"}, "reply_to_user": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1576107901, "post_id": 59295699, "comment_id": 104795866, "body": "@TadhgMcDonald-Jensen, yes it should. I have edited it."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 1, "creation_date": 1576108068, "post_id": 59295699, "comment_id": 104795900, "body": "<code>symbolic calculations</code>?  as with <code>sympy</code>?  if so, adjust the tags and example."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1576108122, "post_id": 59295699, "comment_id": 104795916, "body": "@AA10. Matrix multiplication and division product can be vectorized easily. Symbolic stuff not so much probably"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1576108198, "post_id": 59295699, "comment_id": 104795937, "body": "To apply conditions in a &#39;vectorized&#39; fashion you have to construct a mask or masks, which is True where you want the assignment or action,and False where not.  The whole point to <code>numpy</code> vectorization is to think in terms of whole-array operations.  Often that requires stepping back from the element-by-element focus."}, {"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 1, "creation_date": 1576108206, "post_id": 59295699, "comment_id": 104795939, "body": "everyone, <code>function</code> only depends on the <b>size</b> of the input. all that is needed here is a cache of the functions results for a given size, then reuse that for different values of <code>x</code> of same size."}, {"owner": {"reputation": 75, "user_id": 5565575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2be270717ba49399545f9dd516bd747e?s=128&d=identicon&r=PG&f=1", "display_name": "AA10", "link": "https://stackoverflow.com/users/5565575/aa10"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1576108339, "post_id": 59295699, "comment_id": 104795968, "body": "@hpaulj <code>sympy</code>, yes.  For example one of the first lines is <code>v = vx*N.x + vy*N.y</code> where vx and vy are determined by <code>i</code> and <code>j</code>."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1576108858, "post_id": 59295699, "comment_id": 104796079, "body": "IN <a href=\"https://stackoverflow.com/questions/59242194/attributeerror-mul-object-has-no-attribute-sqrt\" title=\"attributeerror mul object has no attribute sqrt\">stackoverflow.com/questions/59242194/&hellip;</a>, I demonstrate how <code>sympy</code> and <code>numpy</code> can play together; it isn&#39;t trivial."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1576108977, "post_id": 59295699, "comment_id": 104796113, "body": "Does the function return a scalar?"}, {"owner": {"reputation": 75, "user_id": 5565575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2be270717ba49399545f9dd516bd747e?s=128&d=identicon&r=PG&f=1", "display_name": "AA10", "link": "https://stackoverflow.com/users/5565575/aa10"}, "reply_to_user": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1576109144, "post_id": 59295699, "comment_id": 104796147, "body": "@wwii yes, it returns a float."}, {"owner": {"reputation": 75, "user_id": 5565575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2be270717ba49399545f9dd516bd747e?s=128&d=identicon&r=PG&f=1", "display_name": "AA10", "link": "https://stackoverflow.com/users/5565575/aa10"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1576109218, "post_id": 59295699, "comment_id": 104796164, "body": "@hpaulj but is it problematic if the functions returns a float?"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1576109439, "post_id": 59295699, "comment_id": 104796212, "body": "<code>x[c]*...</code> - where does the <code>c</code> come from?"}, {"owner": {"reputation": 75, "user_id": 5565575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2be270717ba49399545f9dd516bd747e?s=128&d=identicon&r=PG&f=1", "display_name": "AA10", "link": "https://stackoverflow.com/users/5565575/aa10"}, "reply_to_user": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1576109628, "post_id": 59295699, "comment_id": 104796255, "body": "@wwii  Sorry, c is count. I have edited it."}, {"owner": {"reputation": 5598, "user_id": 9450991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85d8fa060feb1d11913814710f4ee352?s=128&d=identicon&r=PG&f=1", "display_name": "Oscar Benjamin", "link": "https://stackoverflow.com/users/9450991/oscar-benjamin"}, "edited": false, "score": 0, "creation_date": 1576110708, "post_id": 59295699, "comment_id": 104796480, "body": "If <code>function</code> involves symbolic calculations with SymPy then there will not be any <i>performance</i> benefit from vectorisations."}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 5565575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2be270717ba49399545f9dd516bd747e?s=128&d=identicon&r=PG&f=1", "display_name": "AA10", "link": "https://stackoverflow.com/users/5565575/aa10"}, "edited": false, "score": 0, "creation_date": 1576111197, "post_id": 59295983, "comment_id": 104796574, "body": "I cannot do this operation: <code>(xsize,ysize) = dims</code>. It gives me an error : not enough values to unpack (expected 2, got 1)"}, {"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "reply_to_user": {"reputation": 75, "user_id": 5565575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2be270717ba49399545f9dd516bd747e?s=128&d=identicon&r=PG&f=1", "display_name": "AA10", "link": "https://stackoverflow.com/users/5565575/aa10"}, "edited": false, "score": 0, "creation_date": 1576111692, "post_id": 59295983, "comment_id": 104796663, "body": "you didn&#39;t show how you are getting <code>xsize</code> and <code>ysize</code> so I assumed it was by taking it directly from the <code>x.shape</code>, if your data is only 1 dimensional then is <code>ysize</code> = 1 ?"}, {"owner": {"reputation": 75, "user_id": 5565575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2be270717ba49399545f9dd516bd747e?s=128&d=identicon&r=PG&f=1", "display_name": "AA10", "link": "https://stackoverflow.com/users/5565575/aa10"}, "edited": false, "score": 0, "creation_date": 1576111998, "post_id": 59295983, "comment_id": 104796702, "body": "My explanation was poor.  My vector x is always one dimensional.  Its size will depend on xsize and ysize that are just two integers.  If ysize = 2 and xsize =3   then the size of the one dimensional array will be ysize*xsize.     The problem here is that for x[0] we have (i=0, j=0)   x[1]  (i=0, j=1).   This is the reason why I have a nested loop.   If I could get the <code>i</code> and <code>j</code> from c in a direct way, I wouldnt need the loop."}, {"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "reply_to_user": {"reputation": 75, "user_id": 5565575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2be270717ba49399545f9dd516bd747e?s=128&d=identicon&r=PG&f=1", "display_name": "AA10", "link": "https://stackoverflow.com/users/5565575/aa10"}, "edited": false, "score": 1, "creation_date": 1576112453, "post_id": 59295983, "comment_id": 104796794, "body": "as written you can just pass <code>F(x.reshape((xsize, ysize))</code> to get what you want.  I want to pull attention to where I&#39;m using <code>np.meshgrid</code> since that gives me a vectorized indices to use in calculations, although it works a lot better when your input matches the shape of the loops."}, {"owner": {"reputation": 75, "user_id": 5565575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2be270717ba49399545f9dd516bd747e?s=128&d=identicon&r=PG&f=1", "display_name": "AA10", "link": "https://stackoverflow.com/users/5565575/aa10"}, "edited": false, "score": 0, "creation_date": 1576115368, "post_id": 59295983, "comment_id": 104797364, "body": "It works. It is slower than first code but I think it is scaling in a better way. For a certain size it will get faster than the first code I guess. But can you explain to me what do you mean by reuse?"}, {"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "reply_to_user": {"reputation": 75, "user_id": 5565575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2be270717ba49399545f9dd516bd747e?s=128&d=identicon&r=PG&f=1", "display_name": "AA10", "link": "https://stackoverflow.com/users/5565575/aa10"}, "edited": false, "score": 0, "creation_date": 1576118409, "post_id": 59295983, "comment_id": 104797945, "body": "hey @AA10, I&#39;ve completely restructured the answer after realizing there was more content than just &quot;caching is good!&quot;.  You were asking about vectorizing so I&#39;m now demonstrating how to vectorize the parts that can be vectorized.  I&#39;m not sure how to measure the point where making a bunch of numpy arrays gets more efficient than a python loop."}], "tags": [], "owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "is_accepted": true, "score": 1, "last_activity_date": 1576118028, "last_edit_date": 1576118028, "creation_date": 1576109752, "answer_id": 59295983, "question_id": 59295699, "link": "https://stackoverflow.com/questions/59295699/vectorizing-nested-loop-with-conditionals-and-functions/59295983#59295983", "title": "Vectorizing nested loop with conditionals and functions", "body": "<p>The first thing to note is that your function <code>F(x)</code> can be described as <code>x(idx) * weight(idx)</code> for each index, where weight is only dependent on the dimensions of <code>x</code>. So lets structure our code in terms of a function <code>get_weights_for_shape</code> so that <code>F</code> is fairly simple. For sake of simplicity <code>weights</code> will be a <code>(xsize by size)</code> matrix but we can let <code>F</code> work for flat inputs too:</p>\n\n<pre><code>def F(x, xsize=None, ysize=None):\n    if len(x.shape) == 2:\n        # based on how you have put together your question this seems like the most reasonable representation.\n        weights = get_weights_for_shape(*x.shape)\n        return x * weights\n    elif len(x.shape) == 1 and xsize * ysize == x.shape[0]:\n        # single dimensional input with explicit size, use flattened weights.\n        weights = get_weights_for_shape(xsize, ysize)\n        return x * weights.flatten()\n    else:\n        raise TypeError(\"must take 2D input or 1d input with valid xsize and ysize\")\n\n\n# note that get_one_weight=function can be replaced with your actual function.\ndef get_weights_for_shape(xsize, ysize, get_one_weight=function):\n    \"\"\"returns weights matrix for F for given input shape\"\"\"\n    # will use (xsize, ysize) shape for these calculations.\n    weights = np.zeros((xsize,ysize))\n    #TODO: will fill in calculations here\n    return weights\n</code></pre>\n\n<p>So first we want to run your <code>function</code> (which I have aliased <code>get_one_weight</code> inside the parameters) for each element, you have said that this function can't be vectorized so we can just use list comprehension. We want a matrix <code>a</code> that has the same shape <code>(xsize,ysize)</code> so the comprehension is a bit backwards for a nested list:</p>\n\n<pre><code># notice that the nested list makes the loops in opposite order:\n# [ROW for i in Xs]\n#  ROW = [f() for j in Ys]\na = np.array([[get_one_weight(i,j,xsize,ysize)\n                    for j in range(ysize)\n              ] for i in range(xsize)])\n</code></pre>\n\n<p>With this matrix <code>a &gt; xsize</code> will give a boolean array for conditional assignment:</p>\n\n<pre><code>case1 = a &gt; xsize\nweights[case1] = a[case1]\n</code></pre>\n\n<p>For the other case, we use the index <code>i</code> and <code>j</code>. To vectorize a 2D index we can use <code>np.meshgrid</code> </p>\n\n<pre><code>[i,j] = np.meshgrid(range(xsize), range(ysize), indexing='ij')\ncase2 = ~case1 # could have other cases, in this case it's just the rest.\nweights[case2] = i[case2] * j[case2]\n\nreturn weights #that covers all the calculations\n</code></pre>\n\n<p>Putting it all together gives this as the fully vectorized function:</p>\n\n<pre><code># note that get_one_weight=function can be replaced with your actual function.\ndef get_weights_for_shape(xsize, ysize, get_one_weight=function):\n    \"\"\"returns weights matrix for F for given input shape\"\"\"\n    # will use (xsize, ysize) shape for these calculations.\n    weights = np.zeros((xsize,ysize))\n\n    # notice that the nested list makes the loop order confusing:\n    # [ROW for i in Xs]\n    #  ROW = [f() for j in Ys]\n    a = np.array([[get_one_weight(i,j,xsize,ysize)\n                        for j in range(ysize)\n                  ] for i in range(xsize)])\n\n    case1 = (a &gt; xsize)\n    weights[case1] = a[case1]\n\n    # meshgrid lets us use indices i and j as vectorized matrices.\n    [i,j] = np.meshgrid(range(xsize), range(ysize), indexing='ij')\n    case2 = ~case1\n    weights[case2] = i[case2] * j[case2]\n    #could have more than 2 cases if applicable.\n\n    return weights\n</code></pre>\n\n<p>And that covers most of it. For your specific case since this heavy calculation only relies on the shape of the input, if you expect to call this function repeatedly with similarly sized input you can cache all previously calculated weights:</p>\n\n<pre><code>def get_weights_for_shape(xsize, ysize, _cached_weights={}):\n    if (xsize, ysize) not in _cached_weights:\n        #assume we added an underscore to real function written above\n        _cached_weights[xsize,ysize] = _get_weights_for_shape(xsize, ysize)\n    return _cached_weights[xsize,ysize]\n</code></pre>\n\n<p>As far as I can tell this seems like the most optimized you are going to get.  The only improvements would be to vectorize <code>function</code> (even if that means just calling it in several threads in parallel) or possibly if <code>.flatten()</code> makes an expensive copy that could be improved but I'm not totally sure how.</p>\n"}], "owner": {"reputation": 75, "user_id": 5565575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2be270717ba49399545f9dd516bd747e?s=128&d=identicon&r=PG&f=1", "display_name": "AA10", "link": "https://stackoverflow.com/users/5565575/aa10"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "accepted_answer_id": 59295983, "answer_count": 1, "score": 1, "last_activity_date": 1576118028, "creation_date": 1576107421, "last_edit_date": 1576109579, "question_id": 59295699, "link": "https://stackoverflow.com/questions/59295699/vectorizing-nested-loop-with-conditionals-and-functions", "title": "Vectorizing nested loop with conditionals and functions", "body": "<p>I have the following function:</p>\n\n<pre><code>def F(x):    #F receives a numpy vector (x) with size (xsize*ysize)\n\n    ff = np.zeros(xsize*ysize)\n\n    count=0 \n\n    for i in range(xsize):\n       for j in range(ysize):\n\n           a=function(i,j,xsize,ysize)\n\n           if (a&gt;xsize):\n               ff[count] = x[count]*a\n           else\n               ff[count] = x[count]*i*j\n\n           count = count +1\n\n    return ff      \n</code></pre>\n\n<p>There is one nuance here which is the fact that (example for xsize =4, ysize=3) </p>\n\n<pre><code>c=count\nx[c=0] corresponds to x00 i=0,j=0\nx[c=1]   x01   i=0, j=1\nx[c=2]   x02   i=0, j=2   (i=0,  j = ysize-1)\nx[c=3]   x10   i=1, j=0\n...   ...  ...\nx[c=n]   x32    i=3 j=2  (i=xsize-1, j=ysize-1)  \n</code></pre>\n\n<p>My code is simply </p>\n\n<pre><code>ff[c] = F[x[c]*a (condition 1)\nff[c] = F[x[c]*i*j (condition 2)\n</code></pre>\n\n<p>I could avoid the nested loop using broadcasting as explained in this link:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/59270410/python3-vectorizing-nested-loops\">Python3: vectorizing nested loops</a></p>\n\n<p>But in this case I have to call the function(i,j,xsize,ysize) and then I have conditionals. \nI really need to know the value of i and j. </p>\n\n<p>Is it possible to vectorize this function?</p>\n\n<p>Edit: the <code>function(i,j,xsize,ysize)</code> will use sympy to perform symbolic calculations to return a float.  So  <code>a</code> is a float, not a symbolic expression.  </p>\n"}, {"tags": ["python", "django", "validation", "contact-form"], "comments": [{"owner": {"reputation": 3517, "user_id": 785400, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/6c07d8b5af42f5c4d21b169dcfd1bda0?s=128&d=identicon&r=PG", "display_name": "Brian Dant", "link": "https://stackoverflow.com/users/785400/brian-dant"}, "edited": false, "score": 0, "creation_date": 1576268470, "post_id": 59295679, "comment_id": 104857975, "body": "Possible duplicate: <a href=\"https://stackoverflow.com/questions/58006706/how-to-validate-phone-number-in-django\" title=\"how to validate phone number in django\">stackoverflow.com/questions/58006706/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 12521450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ff3163a77f1fa31ca700bb974dc1b29?s=128&d=identicon&r=PG&f=1", "display_name": "meknajirta", "link": "https://stackoverflow.com/users/12521450/meknajirta"}, "edited": false, "score": 0, "creation_date": 1576112444, "post_id": 59296070, "comment_id": 104796793, "body": "Can you show me how to implement EmailValidator and the phone numbers github link in my code? That is what I am having trouble with."}], "tags": [], "owner": {"reputation": 1290, "user_id": 11203006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90ce586ce00e49e2de25d1c0e1b00251?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Bailey", "link": "https://stackoverflow.com/users/11203006/mark-bailey"}, "is_accepted": false, "score": 1, "last_activity_date": 1576154251, "last_edit_date": 1576154251, "creation_date": 1576110624, "answer_id": 59296070, "question_id": 59295679, "link": "https://stackoverflow.com/questions/59295679/django-forms-py-email-and-phone-validation/59296070#59296070", "title": "Django Forms.py Email And Phone Validation", "body": "<p>You can use <code>EmailValidator</code> instead of <code>RegexValidator</code>.  That way you don't need to write a regex that can reliably test email addresses (which is hard to get right).</p>\n\n<p>And to validate a phone number I would use the phonenumbers library.  <a href=\"https://github.com/daviddrysdale/python-phonenumbers\" rel=\"nofollow noreferrer\">https://github.com/daviddrysdale/python-phonenumbers</a></p>\n\n<p><strong>Update</strong></p>\n\n<p>The Djano forms documentation is very good.  The answers are here <a href=\"https://docs.djangoproject.com/en/3.0/ref/forms/\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/3.0/ref/forms/</a></p>\n\n<p>I'll give you some pointers.</p>\n\n<p>The example for form handling with class-based views is a contact form. </p>\n\n<p><a href=\"https://docs.djangoproject.com/en/3.0/topics/class-based-views/generic-editing/\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/3.0/topics/class-based-views/generic-editing/</a></p>\n\n<p>and this reference is excellent:</p>\n\n<p><a href=\"https://ccbv.co.uk/projects/Django/2.2/django.views.generic.edit/FormView/\" rel=\"nofollow noreferrer\">https://ccbv.co.uk/projects/Django/2.2/django.views.generic.edit/FormView/</a></p>\n\n<p>For the email field everything you are trying to do is handled by defualt.  This is enough:</p>\n\n<pre><code>class ContactForm(forms.Form):\n    contact_email = forms.EmailField()\n</code></pre>\n\n<p>For the phone number, you can write your own validator, referring to <a href=\"https://docs.djangoproject.com/en/3.0/ref/forms/validation/\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/3.0/ref/forms/validation/</a> and the phonenumbers documentation.  Something like:</p>\n\n<pre><code>from django.core.exceptions import ValidationError\nimport phonenumbers\n\ndef validate_phone_number(value):\n    z = phonenumbers.parse(value, None)\n    if not phonenumbers.is_valid_number(z):\n        raise ValidationError(\n            _('%(value) is not a valid phone number'),\n            params={'value': value},\n        )\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>contact_phone = models.CharField(validators=[validate_phone_number])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3517, "user_id": 785400, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/6c07d8b5af42f5c4d21b169dcfd1bda0?s=128&d=identicon&r=PG", "display_name": "Brian Dant", "link": "https://stackoverflow.com/users/785400/brian-dant"}, "edited": false, "score": 0, "creation_date": 1576269159, "post_id": 59329453, "comment_id": 104858226, "body": "@meknajirta: Funnily enough, we&#39;re back to your original question: how do I implement the <code>django-phonenumbers</code> package? :)"}], "tags": [], "owner": {"reputation": 3517, "user_id": 785400, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/6c07d8b5af42f5c4d21b169dcfd1bda0?s=128&d=identicon&r=PG", "display_name": "Brian Dant", "link": "https://stackoverflow.com/users/785400/brian-dant"}, "is_accepted": false, "score": 0, "last_activity_date": 1576269066, "creation_date": 1576269066, "answer_id": 59329453, "question_id": 59295679, "link": "https://stackoverflow.com/questions/59295679/django-forms-py-email-and-phone-validation/59329453#59329453", "title": "Django Forms.py Email And Phone Validation", "body": "<p>A third-party package (<a href=\"https://github.com/stefanfoulis/django-phonenumber-field\" rel=\"nofollow noreferrer\">here</a>) will contain the phone number validation you seek. </p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>pip install django-phonenumber-field\npip install phonenumbers\n</code></pre>\n\n<pre class=\"lang-py prettyprint-override\"><code># forms.py\n...\nfrom phonenumber_field.formfields import PhoneNumberField\n...\n\nclass ContactForm(forms.Form):\n    ... \n    contact_email = forms.EmailField(\n        error_messages={'invalid': 'This is my email error msg.'}, \n        widget=forms.TextInput(attrs={'class':'form-control', 'autocomplete':'off'}), \n        required=True)\n    ...\n    contact_phone = PhoneNumberField(required=True)\n    ...\n</code></pre>\n\n<p>Note also the comment in the project's README: </p>\n\n<blockquote>\n  <p>Representation can be set by PHONENUMBER_DB_FORMAT variable in django\n  settings module. This variable must be one of 'E164', 'INTERNATIONAL',\n  'NATIONAL' or 'RFC3966'. Recommended is one of the globally meaningful\n  formats 'E164', 'INTERNATIONAL' or 'RFC3966'. 'NATIONAL' format\n  require to set up PHONENUMBER_DEFAULT_REGION variable.</p>\n  \n  <p>The object returned is a PhoneNumber instance, not a string. If\n  strings are used to initialize it, e.g. via\n  MyModel(phone_number='+41524204242') or form handling, it has to be a\n  phone number with country code.</p>\n</blockquote>\n\n<p>So, you can (presumably, I have not tested this) via these settings configure the form widget to validate phone numbers according to your particular standards. (See the configuration options in the underlying package, <a href=\"https://github.com/daviddrysdale/python-phonenumbers#example-usage\" rel=\"nofollow noreferrer\"><code>phonenumbers</code></a>.</p>\n"}], "owner": {"reputation": 65, "user_id": 12521450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ff3163a77f1fa31ca700bb974dc1b29?s=128&d=identicon&r=PG&f=1", "display_name": "meknajirta", "link": "https://stackoverflow.com/users/12521450/meknajirta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1631, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1576269066, "creation_date": 1576107250, "last_edit_date": 1576114918, "question_id": 59295679, "link": "https://stackoverflow.com/questions/59295679/django-forms-py-email-and-phone-validation", "title": "Django Forms.py Email And Phone Validation", "body": "<p>I have a contact form created with forms.py that I would like to add validation with regular expressions or any built in Django validators for the email and phone fields. The only files I am using are forms.py, views.py, and the html template (there is no models.py for this contact form). If the user enters an incorrect phone number or email, I want to show them a message saying their format is incorrect and that they need to correct their input. The form should not be able to be submitted until the user enters valid data.</p>\n\n<p>Right now entering fake data into the form and then submitting it causes the form to not do anything (it goes to # in the url) but the user has no idea if the email sent or not. </p>\n\n<p>What I have tried below:</p>\n\n<h3>Forms.py:</h3>\n\n<pre class=\"lang-py prettyprint-override\"><code>from django import forms\nfrom django.core.validators import EmailValidator\nfrom django.core.exceptions import ValidationError\nfrom django.core.validators import validate_email\n\u200b\nclass ContactForm(forms.Form):\n    contact_name = forms.CharField(widget=forms.TextInput(attrs={'class':'form-control', 'autocomplete':'off'}), required=True)\n    contact_email = forms.EmailField(error_messages={'invalid': 'This is my email error msg.'}, widget=forms.TextInput(attrs={'class':'form-control', 'autocomplete':'off'}), required=True)\n    contact_subject = forms.CharField(widget=forms.TextInput(attrs={'class':'form-control', 'autocomplete':'off'}), required=True)\n    contact_phone = forms.CharField(widget=forms.TextInput(attrs={'class':'form-control', 'autocomplete':'off'}), required=True)\n    content = forms.CharField(\n    required=True,\n    widget=forms.Textarea(attrs={'class':'form-control', 'autocomplete':'off'})\n    )\n\u200b\n    # the new bit we're adding\n    def __init__(self, *args, **kwargs):\n        super(ContactForm, self).__init__(*args, **kwargs)\n        self.fields['contact_name'].label = \"Full Name:\"\n        self.fields['contact_email'].label = \"Email:\"\n        self.fields['contact_subject'].label = \"Subject:\"\n        self.fields['contact_phone'].label = \"Phone:\"\n        self.fields['content'].label = \"Message:\"\n\u200b\n    def clean_email(self):\n        email = self.cleaned_data['contact_email']\n        validator = RegexValidator(\"^[a-zA-Z0-9.!#$%&amp;'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$\")\n        validator(email)\n        return email\n</code></pre>\n\n<h3>Views.py:</h3>\n\n<pre class=\"lang-py prettyprint-override\"><code>def contact(request):\n    form_class = ContactForm\n\u200b\n    # new logic!\n    if request.method == 'POST':\n        form = form_class(data=request.POST)\n\u200b\n        if form.is_valid():\n\u200b\n            recaptcha_response = request.POST.get('g-recaptcha-response')\n            url = 'https://www.google.com/recaptcha/api/siteverify'\n            payload = {\n                'secret': settings.GOOGLE_RECAPTCHA_SECRET_KEY,\n                'response': recaptcha_response\n            }\n            data = urllib.parse.urlencode(payload).encode()\n            req = urllib.request.Request(url, data=data)\n\n            response = urllib.request.urlopen(req)\n            result = json.loads(response.read().decode())\n\n            print('result:' + str(result))\n\u200b\n            print('recaptcha_response:' + str(recaptcha_response))\n\u200b\n            print('result_success:' + str(result['success']))\n\n\u200b\n\u200b\n            if (not result['success']) or (not result['action'] == 'contact'):\n                messages.error(request, 'Invalid reCAPTCHA. Please try again.')\n\u200b\n            contact_name = request.POST.get(\n                'contact_name'\n            , '')\n            contact_subject = request.POST.get(\n                'contact_subject'\n            , '')\n            contact_email = request.POST.get(\n                'contact_email'\n            , '')\n            contact_phone = request.POST.get(\n                'contact_phone'\n            , '')\n            form_content = request.POST.get('content', '')\n\u200b\n            # Email the profile with the\n            # contact information\n            template = get_template('contact_template.txt')\n            context = {\n                'contact_name': contact_name,\n                'contact_email': contact_email,\n                'contact_subject': contact_subject,\n                'contact_phone': contact_phone,\n                'form_content': form_content,\n            }\n            content = template.render(context)\n\u200b\n            email = EmailMessage(\n                contact_subject,\n                content,\n                \"Your website\" +'',\n                ['email@gmail.com'],\n                headers = {'Reply-To': contact_email }\n            )\n            email.send()\n            messages.info(request, \"Your message was sent successfully. Thank you for reaching out.\")\n\u200b\n    return render(request, 'contact.html', {\n        'form': form_class,\n    })\n</code></pre>\n\n<h3>Html template:</h3>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;form id='cform' action=\"#\" method=\"post\"&gt;\n    {% csrf_token %}\n    {{ form.as_p }}\n\n    &lt;script src='https://www.google.com/recaptcha/api.js?render=&lt;KEY&gt;'&gt;&lt;/script&gt;\n    &lt;div class=\"g-recaptcha\" data-sitekey=\"&lt;KEY&gt;\"&gt;&lt;/div&gt;\n    &lt;script&gt;\n        grecaptcha.ready(function() {\n            grecaptcha.execute('&lt;KEY&gt;', {action: 'contact'})\n            .then(function(token) {\n                ginput = document.createElement('input');\n                ginput.type = \"hidden\";\n                ginput.name = \"g-recaptcha-response\";\n                ginput.value = token;\n                document.getElementById(\"cform\").appendChild(ginput);\n            });\n        });\n    &lt;/script&gt;\n    &lt;button type=\"submit\" class=\"btn btn-primary form-control\"&gt;Submit&lt;/button&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>How would I do this using Django only and without JavaScript?</p>\n"}, {"tags": ["python", "image", "button", "tkinter"], "comments": [{"owner": {"reputation": 907, "user_id": 1558604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b97af9fb78006cf022f9e60b0d9b428?s=128&d=identicon&r=PG", "display_name": "user1558604", "link": "https://stackoverflow.com/users/1558604/user1558604"}, "edited": false, "score": 0, "creation_date": 1576106626, "post_id": 59295585, "comment_id": 104795522, "body": "<code>global</code> is probably causing issues here, but I didn&#39;t do a deep dive into troubleshooting."}, {"owner": {"reputation": 1, "user_id": 12521391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58faedc550b70b05eaca8226e8e80411?s=128&d=identicon&r=PG&f=1", "display_name": "safaripants", "link": "https://stackoverflow.com/users/12521391/safaripants"}, "reply_to_user": {"reputation": 907, "user_id": 1558604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b97af9fb78006cf022f9e60b0d9b428?s=128&d=identicon&r=PG", "display_name": "user1558604", "link": "https://stackoverflow.com/users/1558604/user1558604"}, "edited": false, "score": 0, "creation_date": 1576107132, "post_id": 59295585, "comment_id": 104795643, "body": "I updated the original post since I had issues posting the question at first. Could you check out the new post and see if you think global is still an issue?"}, {"owner": {"reputation": 907, "user_id": 1558604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b97af9fb78006cf022f9e60b0d9b428?s=128&d=identicon&r=PG", "display_name": "user1558604", "link": "https://stackoverflow.com/users/1558604/user1558604"}, "edited": false, "score": 0, "creation_date": 1576107319, "post_id": 59295585, "comment_id": 104795698, "body": "Probably. What I think is happening is you are updating the <code>photo</code> to a different location which moves it instead of adds another one. I think if you just take <code>global photo</code> out of the <code>call</code> function that would go away. No promise that fixes the issue though."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1576107616, "post_id": 59295585, "comment_id": 104795787, "body": "if you have many images then you should keep them on global list. You can&#39;t keep many images using only <code>photo = ...</code> because it removes previous image from variable and system removes it from memory and image doesn&#39;t exist."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 1, "creation_date": 1576107770, "post_id": 59295585, "comment_id": 104795829, "body": "maybe instead of loading the same imaga many times you should load it only once at start and later assign to different buttons."}, {"owner": {"reputation": 17763, "user_id": 5317403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8TwWN.png?s=128&g=1", "display_name": "acw1668", "link": "https://stackoverflow.com/users/5317403/acw1668"}, "edited": false, "score": 2, "creation_date": 1576107789, "post_id": 59295585, "comment_id": 104795837, "body": "You recreate <code>photo</code> everytime you click a button, so the last image will be garbaged.  You only need create the <code>photo</code> once."}], "answers": [{"tags": [], "owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "is_accepted": false, "score": 0, "last_activity_date": 1576112741, "last_edit_date": 1576112741, "creation_date": 1576110437, "answer_id": 59296051, "question_id": 59295585, "link": "https://stackoverflow.com/questions/59295585/tic-tac-toe-button-images-dissapearing-after-clicking-another-button/59296051#59296051", "title": "Tic-Tac-Toe button images dissapearing after clicking another button", "body": "<p>If you load many images then you would have to keep them in many variables or on one list.</p>\n\n<p>But you could load iamge only once and later assign the same images to many buttons</p>\n\n<p>At start</p>\n\n<pre><code>photo = PhotoImage(file=\"\").subsample(15)\nphoto_x = PhotoImage(file=\"X.png\").subsample(15)\nphoto_o = PhotoImage(file=\"O.png\").subsample(15)\n</code></pre>\n\n<p>and later without loading</p>\n\n<pre><code>def call(button):\n    global turn\n    global photo\n    if turn == 1: #turn%2 == 1:\n        button.config(image=photo_x)\n</code></pre>\n\n<hr>\n\n<p>Full code</p>\n\n<pre><code>from tkinter import *\n\ndef openGame():\n    root.deiconify()\n    menu.withdraw()\n    e1txt.set(\"X Player 1: \" + e1.get())\n    e2txt.set(\"O Player 2: \" + e2.get())\n    turnlabeltxt.set(e1.get() + \"'s turn\")\n\nturn = 1\ndef call(button):\n    global turn\n    if turn == 1: #turn%2 == 1:\n        button.config(image=photo_x)\n\n        #turn += 1\n\n#     if (turn%2) == 0:\n#         button.config(image=photo_o)\n#         turn += 1\n#Not messing with turn switching until I can get these darned images to work correctly\n\nroot = Tk()\nroot.title(\"Tic Tac Toe\")\nroot.geometry(\"500x350\")\nroot.resizable(True, True)\nroot.withdraw()\n\nphoto = PhotoImage(file=\"\").subsample(15)\nphoto_x = PhotoImage(file=\"X.png\").subsample(15)\nphoto_o = PhotoImage(file=\"Circle.png\").subsample(15)\n\nsquare = 85\ne1txt = StringVar()\ne2txt = StringVar()\n\nb1 = Button(root, image=photo, compound=CENTER, height=square, width=square, command=lambda: call(b1))\nb1.grid(row=0, column=0, padx=2, pady=2)\nb2 = Button(root, image=photo, compound=CENTER, height=square, width=square, command=lambda: call(b2))\nb2.grid(row=0, column=1, padx=2, pady=2)\nb3 = Button(root, image=photo, compound=CENTER, height=square, width=square, command=lambda: call(b3))\nb3.grid(row=0, column=2, padx=2, pady=2)\n\nb4 = Button(root, image=photo, compound=CENTER, height=square, width=square, command=lambda: call(b4))\nb4.grid(row=1, column=0, padx=2, pady=2)\nb5 = Button(root, image=photo, compound=CENTER, height=square, width=square, command=lambda: call(b5))\nb5.grid(row=1, column=1, padx=2, pady=2)\nb6 = Button(root, image=photo, compound=CENTER, height=square, width=square, command=lambda: call(b6))\nb6.grid(row=1, column=2, padx=2, pady=2)\n\nb7 = Button(root, image=photo, compound=CENTER, height=square, width=square, command=lambda: call(b7))\nb7.grid(row=2, column=0, padx=2, pady=2)\nb8 = Button(root, image=photo, compound=CENTER, height=square, width=square, command=lambda: call(b8))\nb8.grid(row=2, column=1, padx=2, pady=2)\nb9 = Button(root, image=photo, compound=CENTER, height=square, width=square, command=lambda: call(b9))\nb9.grid(row=2, column=2, padx=2, pady=2)\n\n\nP1 = Label(root, textvariable=e1txt)\nP1.grid(row=0, column=3, sticky=W)\n\nP2 = Label(root, textvariable=e2txt)\nP2.grid(row=1, column=3, sticky=W)\n\nmenu = Toplevel()\nmenu.title(\"Player names\")\nmenu.geometry(\"265x80\")\nmenu.resizable(False, False)\n\np1 = Label(menu, text=\"X Player 1:\")\np1.grid(row = 0, column = 0)\np2 = Label(menu, text=\"O Player 2:\")\np2.grid(row = 2, column = 0)\n\ne1 = Entry(menu)\ne1.grid(row=0, column=1)\ne2 = Entry(menu)\ne2.grid(row=2, column=1)\nbutton = Button(menu, text=\"Start Game\", command=openGame)\nbutton.grid(row=9, column=9)\n\nturnlabeltxt = StringVar()\nturnlabel = Label(root, textvariable=turnlabeltxt)\nturnlabel.grid(row=3, column=3)\n\nroot.mainloop()\n</code></pre>\n\n<hr>\n\n<p><strong>EDIT:</strong> code with other changes:</p>\n\n<pre><code>#from tkinter import * # not preferred\nimport tkinter as tk\n\n# --- function --- \ndef open_game():\n    root.deiconify()\n    menu.withdraw()\n    turn_name_var.set( name1_var.get() )\n\ndef call(button):\n    global turn\n\n    if turn%2 == 1:\n        button.config(image=photo_x)\n        turn_name_var.set( name2_var.get() )\n    else:\n        button.config(image=photo_o)\n        turn_name_var.set( name1_var.get() )\n\n    turn += 1\n\n# --- main ---\n\n# --- constants --- (UPPER_CASE_NAMES)\n\nSQUARE = 85\n\n# --- variables ---\n\nturn = 1\n\n# ---\n\nroot = tk.Tk()\nroot.title(\"Tic Tac Toe\")\n#root.geometry(\"500x350\")\n#root.resizable(False, False)\nroot.withdraw()\n\n# ---\n\nname1_var = tk.StringVar()\nname2_var = tk.StringVar()\nturn_name_var = tk.StringVar()\n\n# ---\n\nphoto = tk.PhotoImage(file=\"\").subsample(15)\n#photo_x = tk.PhotoImage(file=\"X.png\").subsample(15)\n#photo_o = tk.PhotoImage(file=\"O.png\").subsample(15)\nphoto_x = tk.PhotoImage(file=\"square-1.png\")#.subsample(15)\nphoto_o = tk.PhotoImage(file=\"square-2.png\")#.subsample(15)\n\n# ---\n\nframe = tk.Frame(root)\nframe.pack(padx=10, pady=10)\n\n#buttons = []\nfor x in range(3):\n    for y in range(3):\n       b = tk.Button(frame, image=photo, compound='center', height=SQUARE, width=SQUARE)\n       b['command'] = lambda c=b:call(c)\n       b.grid(row=y*2, column=x, padx=2, pady=2, rowspan=2)\n       #buttons.append(b)\n\ntk.Label(frame, text=\"X Player 1:\").grid(row=0, column=3)\ntk.Label(frame, textvar=name1_var).grid(row=1, column=3)\n\ntk.Label(frame, text=\"O Player 2:\").grid(row=2, column=3)\ntk.Label(frame, textvar=name2_var).grid(row=3, column=3)\n\ntk.Label(frame, text=\"Turn:\").grid(row=4, column=3)\ntk.Label(frame, textvar=turn_name_var).grid(row=5, column=3)\n\n# ---\n\nmenu = tk.Toplevel()\nmenu.title(\"Player names\")\n#menu.geometry(\"265x80\")\nmenu.resizable(False, False)\n\ntk.Label(menu, text=\"X Player 1:\").grid(row=0, column=0)\ntk.Label(menu, text=\"O Player 2:\").grid(row=1, column=0)\n\ntk.Entry(menu, textvar=name1_var).grid(row=0, column=1)\ntk.Entry(menu, textvar=name2_var).grid(row=1, column=1)\n\ntk.Button(menu, text=\"Start Game\", command=open_game).grid(row=2, column=0, columnspan=2)\n\n# ---\n\nroot.mainloop()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/U4Pw5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/U4Pw5.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/3xPkd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3xPkd.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/qApRq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qApRq.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/jRCtj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jRCtj.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/rvwuG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rvwuG.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/4UsB1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4UsB1.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/9wx3k.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9wx3k.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1, "user_id": 12521391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58faedc550b70b05eaca8226e8e80411?s=128&d=identicon&r=PG&f=1", "display_name": "safaripants", "link": "https://stackoverflow.com/users/12521391/safaripants"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576112741, "creation_date": 1576106502, "last_edit_date": 1576106927, "question_id": 59295585, "link": "https://stackoverflow.com/questions/59295585/tic-tac-toe-button-images-dissapearing-after-clicking-another-button", "title": "Tic-Tac-Toe button images dissapearing after clicking another button", "body": "<p>When a button is clicked X appears as intended but once another button is clicked the x moves to that button and the previous button goes blank and can no longer be clicked. </p>\n\n<p>I want the X image to remain after I click on a new button. I have no idea why the previous button's X image disappears. Also don't mind the commented out part in my function. I was working on a way to switch between player 1 and player 2, but I first need to get the images to actually appear properly on the buttons.</p>\n\n<p><a href=\"https://i.stack.imgur.com/zoci2.png\" rel=\"nofollow noreferrer\">X</a></p>\n\n<pre><code> from tkinter import *\n\ndef openGame():\n    root.deiconify()\n    menu.withdraw()\n    e1txt.set(\"X Player 1: \" + e1.get())\n    e2txt.set(\"O Player 2: \" + e2.get())\n    turnlabeltxt.set(e1.get() + \"'s turn\")\n\nturn = 1\ndef call(button):\n    global turn\n    global photo\n    if turn == 1: #turn%2 == 1:\n        photo = PhotoImage(file=\"X.png\").subsample(15)\n        button.config(image=photo)\n\n        #turn += 1\n\n#     if (turn%2) == 0:\n#         photo = PhotoImage(file=\"Circle.png\")\n#         button.config(image=photo)\n#         turn += 1\n#Not messing with turn switching until I can get these darned images to work correctly\n\nroot = Tk()\nroot.title(\"Tic Tac Toe\")\nroot.geometry(\"500x350\")\nroot.resizable(True, True)\nroot.withdraw()\n\nphoto = PhotoImage(file=\"\").subsample(15)\nsquare = 85\ne1txt = StringVar()\ne2txt = StringVar()\n\nb1 = Button(root, image=photo, compound=CENTER, height=square, width=square, command=lambda: call(b1))\nb1.grid(row=0, column=0, padx=2, pady=2)\nb2 = Button(root, image=photo, compound=CENTER, height=square, width=square, command=lambda: call(b2))\nb2.grid(row=0, column=1, padx=2, pady=2)\nb3 = Button(root, image=photo, compound=CENTER, height=square, width=square, command=lambda: call(b3))\nb3.grid(row=0, column=2, padx=2, pady=2)\n\nb4 = Button(root, image=photo, compound=CENTER, height=square, width=square, command=lambda: call(b4))\nb4.grid(row=1, column=0, padx=2, pady=2)\nb5 = Button(root, image=photo, compound=CENTER, height=square, width=square, command=lambda: call(b5))\nb5.grid(row=1, column=1, padx=2, pady=2)\nb6 = Button(root, image=photo, compound=CENTER, height=square, width=square, command=lambda: call(b6))\nb6.grid(row=1, column=2, padx=2, pady=2)\n\nb7 = Button(root, image=photo, compound=CENTER, height=square, width=square, command=lambda: call(b7))\nb7.grid(row=2, column=0, padx=2, pady=2)\nb8 = Button(root, image=photo, compound=CENTER, height=square, width=square, command=lambda: call(b8))\nb8.grid(row=2, column=1, padx=2, pady=2)\nb9 = Button(root, image=photo, compound=CENTER, height=square, width=square, command=lambda: call(b9))\nb9.grid(row=2, column=2, padx=2, pady=2)\n\n\nP1 = Label(root, textvariable=e1txt)\nP1.grid(row=0, column=3, sticky=W)\n\nP2 = Label(root, textvariable=e2txt)\nP2.grid(row=1, column=3, sticky=W)\n\nmenu = Toplevel()\nmenu.title(\"Player names\")\nmenu.geometry(\"265x80\")\nmenu.resizable(False, False)\n\np1 = Label(menu, text=\"X Player 1:\")\np1.grid(row = 0, column = 0)\np2 = Label(menu, text=\"O Player 2:\")\np2.grid(row = 2, column = 0)\n\n\ne1 = Entry(menu)\ne1.grid(row=0, column=1)\ne2 = Entry(menu)\ne2.grid(row=2, column=1)\nbutton = Button(menu, text=\"Start Game\", command=openGame)\nbutton.grid(row=9, column=9)\n\nturnlabeltxt = StringVar()\nturnlabel = Label(root, textvariable=turnlabeltxt)\nturnlabel.grid(row=3, column=3)\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 3, "creation_date": 1576105999, "post_id": 59295511, "comment_id": 104795360, "body": "This appears to be a direct DF merge, no?"}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1576106003, "post_id": 59295511, "comment_id": 104795362, "body": "Welcome to stack overflow! Please <a href=\"https://stackoverflow.com/posts/59295511/edit\">edit</a> your question to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for your issue, including sample input and output so that we can better understand the problem. Take a look at <a href=\"https://stackoverflow.com/questions/20109391/how-to-make-good-reproducible-pandas-examples\">How to make good pandas examples</a>"}, {"owner": {"reputation": 1, "user_id": 12521224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c797fb35a90337777e624a7e41cb6553?s=128&d=identicon&r=PG&f=1", "display_name": "Sheyda", "link": "https://stackoverflow.com/users/12521224/sheyda"}, "edited": false, "score": 0, "creation_date": 1576106573, "post_id": 59295511, "comment_id": 104795505, "body": "no, the fit DF has the &#39;CATAID&#39; values in the mass DF and some more that aren&#39;t in the mass DF. I&#39;m not merging them, I&#39;m selecting the &#39;CATAID&#39; values in the fit DM that are the same as the &#39;CATAID&#39; column in the mass DF and storing the rows for the selected &#39;CATAID&#39; values in a new Dataframe."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12521224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c797fb35a90337777e624a7e41cb6553?s=128&d=identicon&r=PG&f=1", "display_name": "Sheyda", "link": "https://stackoverflow.com/users/12521224/sheyda"}, "edited": false, "score": 0, "creation_date": 1576106804, "post_id": 59295570, "comment_id": 104795567, "body": "Thanks very much. It is the easiest way to do it."}, {"owner": {"reputation": 2646, "user_id": 6308685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73d4e8cd4bfec537fda6e26c9ea2d430?s=128&d=identicon&r=PG&f=1", "display_name": "alex067", "link": "https://stackoverflow.com/users/6308685/alex067"}, "reply_to_user": {"reputation": 1, "user_id": 12521224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c797fb35a90337777e624a7e41cb6553?s=128&d=identicon&r=PG&f=1", "display_name": "Sheyda", "link": "https://stackoverflow.com/users/12521224/sheyda"}, "edited": false, "score": 0, "creation_date": 1576106840, "post_id": 59295570, "comment_id": 104795582, "body": "Glad it works. Please mark it as the answer, so others may also be helped"}], "tags": [], "owner": {"reputation": 2646, "user_id": 6308685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73d4e8cd4bfec537fda6e26c9ea2d430?s=128&d=identicon&r=PG&f=1", "display_name": "alex067", "link": "https://stackoverflow.com/users/6308685/alex067"}, "is_accepted": true, "score": 0, "last_activity_date": 1576106856, "last_edit_date": 1576106856, "creation_date": 1576106408, "answer_id": 59295570, "question_id": 59295511, "link": "https://stackoverflow.com/questions/59295511/2-pandas-dataframes-with-different-columns/59295570#59295570", "title": "2 pandas Dataframes with different columns", "body": "<p>You can do this by first getting the ids in the mass dataframe</p>\n\n<pre><code>mass_id = mass_df['CATAID'].unique().tolist()\n</code></pre>\n\n<p>Then you can get the rows from your main dataframe, where the CATAID is inside mass_id:</p>\n\n<pre><code>relevant_df = fit_df.loc[fit_df['CATAID'].isin(mass_id)]\n</code></pre>\n\n<p>I don't think a merge works here as Prune comments, because we aren't trying to join these two dataframes. We are just trying to extract the ids from one dataframe, and get the rows which match those ids.</p>\n"}], "owner": {"reputation": 1, "user_id": 12521224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c797fb35a90337777e624a7e41cb6553?s=128&d=identicon&r=PG&f=1", "display_name": "Sheyda", "link": "https://stackoverflow.com/users/12521224/sheyda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 59295570, "answer_count": 1, "score": -3, "last_activity_date": 1576106856, "creation_date": 1576105827, "last_edit_date": 1576106061, "question_id": 59295511, "link": "https://stackoverflow.com/questions/59295511/2-pandas-dataframes-with-different-columns", "title": "2 pandas Dataframes with different columns", "body": "<p>I have 2 Dataframes, fit and mass. They only have one similar column, 'CATAID'. The fit Dataframe contains information about the whole experiment. The mass one, however, only contains a small population of the experiment.</p>\n\n<p>For my work, I need the information in the fit DataFrame, but for the 'CATAID' values in the mass Dataframe. I need to loop over the column values in fit and pick rows that match with CATAID values in mass.</p>\n\n<p>I'm using the following loop,</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>file=pd.DataFrame()\nfor i in mass.index:\n    cataid_m=mass.loc[i,'CATAID']\n    for j in fit.index:\n        cataid_f=fit.loc[j,'CATAID']\n        if cataid_m==cataid_f:\n            file[j]=fit.iloc[j]\n</code></pre>\n\n<p>My only concern is the amount of time this loop takes. I was wondering if anyone has any suggestions on how to improve this loop?</p>\n"}, {"tags": ["python", "scikit-learn", "nlp", "countvectorizer"], "comments": [{"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1576106210, "post_id": 59295506, "comment_id": 104795405, "body": "You can call the vectorizer outside of the pipeline on a known subset of your data and compare the actual output with the expected output"}, {"owner": {"reputation": 87, "user_id": 6842402, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-feoEqdDCx70/AAAAAAAAAAI/AAAAAAAAAIc/pSAThg3W1H8/photo.jpg?sz=128", "display_name": "Tegar D Pratama", "link": "https://stackoverflow.com/users/6842402/tegar-d-pratama"}, "reply_to_user": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1576106631, "post_id": 59295506, "comment_id": 104795523, "body": "i did that and the vectorizer is working correctly. So, i can assume that the pipeline is working correctly?"}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1576106813, "post_id": 59295506, "comment_id": 104795570, "body": "If you&#39;re still concerned, You can also use the <code>named_steps</code> attribute of the fitted pipeline, or alternately you could use each step individually outside the pipeline and see if the end result agrees with the result of using it within the pipeline."}], "owner": {"reputation": 87, "user_id": 6842402, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-feoEqdDCx70/AAAAAAAAAAI/AAAAAAAAAIc/pSAThg3W1H8/photo.jpg?sz=128", "display_name": "Tegar D Pratama", "link": "https://stackoverflow.com/users/6842402/tegar-d-pratama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1576105797, "creation_date": 1576105797, "question_id": 59295506, "link": "https://stackoverflow.com/questions/59295506/scikit-learn-how-to-check-if-analyzer-parameter-from-countvectorize-is-workin", "title": "scikit learn: How to check if analyzer parameter from CountVectorize() is working correctly", "body": "<p>This is my analyzer function</p>\n\n<pre><code>def text_processing(text):\n    text = denoise_text(text) #noise removal\n    text = word_tokenize(text) #tokenization\n    text = normalize(text) #normalization\n    text = lemmas(text) #lemmatization\n    return text\n</code></pre>\n\n<p>This is one of my pipeline function</p>\n\n<pre><code>pipeline = Pipeline([\n    ('bow', CountVectorizer(analyzer=text_processing)), # strings to token integer counts\n    ('tfidf', TfidfTransformer()), # integer counts to weighted TF-IDF scores\n    ('classifier', linear_model.SGDClassifier(max_iter=1000, tol=1e-3)) # train on TF-IDF vectors w/ Naive Bayes classifier\n])\n\npipeline.fit(x_train, y_train)\n</code></pre>\n\n<p>The result is</p>\n\n<pre><code>---------------------------------------\nStochastic Gradient Descent Result\n---------------------------------------\n              precision    recall  f1-score   support\n\n    not spam       0.96      0.94      0.95       142\n        spam       0.93      0.95      0.94       118\n\n    accuracy                           0.95       260\n   macro avg       0.95      0.95      0.95       260\nweighted avg       0.95      0.95      0.95       260\n</code></pre>\n\n<p>If  i remove the analyzer parameter function from the pipeline </p>\n\n<pre><code>pipeline = Pipeline([\n    ('bow', CountVectorizer()), # strings to token integer counts\n    ('tfidf', TfidfTransformer()), # integer counts to weighted TF-IDF scores\n    ('classifier', linear_model.SGDClassifier(max_iter=1000, tol=1e-3)) # train on TF-IDF vectors w/ Naive Bayes classifier\n])\n</code></pre>\n\n<p>It gives me almost the same accuracy. I'm wondering if the <code>text_processing</code> function working correctly or not, how to check this?</p>\n"}, {"tags": ["python", "opencv"], "owner": {"reputation": 31, "user_id": 12483079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cf0da588ebd1f9782be6d959d575ad9?s=128&d=identicon&r=PG&f=1", "display_name": "mapex", "link": "https://stackoverflow.com/users/12483079/mapex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1576128376, "creation_date": 1576105698, "last_edit_date": 1576128376, "question_id": 59295495, "link": "https://stackoverflow.com/questions/59295495/cv2-seamlessclone-with-opencv-error-215assertion-failed-dims-2-step", "title": "cv2.seamlessClone() with OpenCV error: (-215:Assertion failed) dims &lt;= 2 &amp;&amp; step[0] &gt; 0 in function &#39;locateROI&#39;", "body": "<p>Thanks for every answer:\nI meet a error about </p>\n\n<blockquote>\n  <p>cv2.seamlessClone(), cv2.error: OpenCV(4.0.1) </p>\n  \n  <blockquote>\n    <p>/io/opencv/modules/core/src/matrix.cpp:757: error: (-215:Assertion\n    failed) dims &lt;= 2 &amp;&amp; step[0] > 0 in function 'locateROI'</p>\n  </blockquote>\n</blockquote>\n\n<p>my code is here:</p>\n\n<pre><code> ret = []\n    for i in range(num_samples):\n        dstimg = transforms.functional.to_pil_image(x[i])\n        dstimg = np.array(dstimg)#[:, :, [2, 1, 0]]\n        #print(dstimg.shape)\n        #print(type(dstimg))\n        #print(dstimg.bit_length())\n        srcimg = transforms.functional.to_pil_image(output[i])\n        srcimg = np.array(srcimg)#[:, :, [2, 1, 0]]\n        #print(srcimg.shape)\n        #print(type(srcimg))\n        #print(srcimg.bit_length())\n\n        msk = transforms.functional.to_pil_image(mask[i])\n        msk = np.array(msk)#[:, :, [2, 1, 0]]\n        #print(msk.shape)\n        #print(type(msk))\n        #print(msk.bit_length())\n        #compute mask's center\n        xs, ys = [], []\n        for i in range(msk.shape[0]):\n            for j in range(msk.shape[1]):\n                if msk[i,j] == 255:\n                    ys.append(i)\n                    xs.append(j)\n        xmin, xmax = min(xs), max(xs)\n        ymin, ymax = min(ys), max(ys)\n        center = ((xmax + xmin) // 2, (ymax + ymin) // 2)\n        out = cv2.seamlessClone(srcimg, dstimg, msk, center, cv2.NORMAL_CLONE)\n        out = out[:, :, [2, 1, 0]]\n        #print(out)\n        #print(out.shape)\n        out = transforms.functional.to_tensor(out)\n        #print(out)\n        #print(out.shape)\n        out = torch.unsqueeze(out, dim=0)\n        #print(out)\n        #print(out.shape)\n        ret.append(out)\n    ret = torch.cat(ret, dim=0)\n    return ret\n</code></pre>\n"}, {"tags": ["python", "tkinter", "tkinter-canvas", "tkinter-layout"], "comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1576110212, "post_id": 59295469, "comment_id": 104796377, "body": "This code won&#39;t run. When I add just enough code to make it work I get <code>AttributeError: type object &#39;Table&#39; has no attribute &#39;ColumnHeaders&#39;</code>"}, {"owner": {"reputation": 2076, "user_id": 2860193, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0793dc8385ef6af35cebe31c1ecc10ba?s=128&d=identicon&r=PG&f=1", "display_name": "deathismyfriend", "link": "https://stackoverflow.com/users/2860193/deathismyfriend"}, "edited": false, "score": 0, "creation_date": 1576110704, "post_id": 59295469, "comment_id": 104796479, "body": "I didn\u2019t post all the code but I can when I get home.  I only posted the section of code that controls the layout. The others just populate with either button or entry from tkinter."}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1576111491, "post_id": 59295469, "comment_id": 104796625, "body": "We don&#39;t need &quot;all the code&quot;, we need just enough to duplicate the problem. If the <code>ColumnHeaders</code> isn&#39;t necessary to reproduce the layout problem, just remove it."}, {"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1576112480, "post_id": 59295469, "comment_id": 104796804, "body": "@deathismyfriend: You need to bind event <code>&quot;&lt;Configure&gt;&quot;</code>, because the <code>Canvas</code> does not follow the size of the <code>Frame</code>. Something like this: <a href=\"https://stackoverflow.com/a/58219385/7414759\">use canvas to create dynamically window with scroll bar</a>"}, {"owner": {"reputation": 2076, "user_id": 2860193, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0793dc8385ef6af35cebe31c1ecc10ba?s=128&d=identicon&r=PG&f=1", "display_name": "deathismyfriend", "link": "https://stackoverflow.com/users/2860193/deathismyfriend"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1576119348, "post_id": 59295469, "comment_id": 104798119, "body": "@BryanOakley I updated the code above with all needed code to produce the problem."}, {"owner": {"reputation": 2076, "user_id": 2860193, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0793dc8385ef6af35cebe31c1ecc10ba?s=128&d=identicon&r=PG&f=1", "display_name": "deathismyfriend", "link": "https://stackoverflow.com/users/2860193/deathismyfriend"}, "reply_to_user": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1576186312, "post_id": 59295469, "comment_id": 104827851, "body": "@stovfl The scrolling works perfectly as is. It&#39;s the display which is messed up. I say that above in description."}, {"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1576186795, "post_id": 59295469, "comment_id": 104828034, "body": "@deathismyfriend <b><i>&quot;scrolling works perfectly as is&quot;</i></b>: As i wrote: <i>somthing</i> like the given link. Focus at the event <code>&lt;Configure&gt;</code>. What you get displayed is the <b>default</b> <code>height</code> of a <code>Canvas</code>. You have to set the <code>height</code> explicit to the <code>height</code> of the <code>header_frame</code>."}, {"owner": {"reputation": 2076, "user_id": 2860193, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0793dc8385ef6af35cebe31c1ecc10ba?s=128&d=identicon&r=PG&f=1", "display_name": "deathismyfriend", "link": "https://stackoverflow.com/users/2860193/deathismyfriend"}, "reply_to_user": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1576194154, "post_id": 59295469, "comment_id": 104830179, "body": "@stovfl I tried bind(&quot;&lt;Configure&gt;&quot;) it does the exact same thing as above. If you are sure this will work can you show me a piece of code that will ?"}], "answers": [{"comments": [{"owner": {"reputation": 2076, "user_id": 2860193, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0793dc8385ef6af35cebe31c1ecc10ba?s=128&d=identicon&r=PG&f=1", "display_name": "deathismyfriend", "link": "https://stackoverflow.com/users/2860193/deathismyfriend"}, "edited": false, "score": 0, "creation_date": 1576253916, "post_id": 59325824, "comment_id": 104851826, "body": "Thanks. Your method 2 works great. But for some reason your method 1. using bind creates a weird bar underneath the header. I added the new pic to my question and put red lines to show the error. Can you tell me why this is happening."}, {"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "reply_to_user": {"reputation": 2076, "user_id": 2860193, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0793dc8385ef6af35cebe31c1ecc10ba?s=128&d=identicon&r=PG&f=1", "display_name": "deathismyfriend", "link": "https://stackoverflow.com/users/2860193/deathismyfriend"}, "edited": false, "score": 0, "creation_date": 1576255533, "post_id": 59325824, "comment_id": 104852611, "body": "@deathismyfriend: Different <code>height</code> value? Compare the output of <code>w.winfo_height()</code> with <code>header_frame.winfo_height()</code>. The value depends at which code line you are calling <code>.update_idletasks()</code> and <code>._headerCanvas.configure(...</code>. You are using <code>pady=1</code> but this sould for both the same."}, {"owner": {"reputation": 2076, "user_id": 2860193, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0793dc8385ef6af35cebe31c1ecc10ba?s=128&d=identicon&r=PG&f=1", "display_name": "deathismyfriend", "link": "https://stackoverflow.com/users/2860193/deathismyfriend"}, "edited": false, "score": 0, "creation_date": 1576255941, "post_id": 59325824, "comment_id": 104852804, "body": "I have tried the height. It seems to be something else as it is actually in both methods. When maximizing it shows up with a border almost. I have updated the last picture you can see it there. I have changed all backgrounds to blue but that still shows up."}, {"owner": {"reputation": 2076, "user_id": 2860193, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0793dc8385ef6af35cebe31c1ecc10ba?s=128&d=identicon&r=PG&f=1", "display_name": "deathismyfriend", "link": "https://stackoverflow.com/users/2860193/deathismyfriend"}, "edited": false, "score": 0, "creation_date": 1576256325, "post_id": 59325824, "comment_id": 104852967, "body": "I fixed it it was a problem with the borders showing up. Thanks a lot for your help."}], "tags": [], "owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "is_accepted": true, "score": 1, "last_activity_date": 1585258026, "last_edit_date": 1585258026, "creation_date": 1576252132, "answer_id": 59325824, "question_id": 59295469, "link": "https://stackoverflow.com/questions/59295469/tkinter-frame-grid-sizing-not-displaying-correctly/59325824#59325824", "title": "tkinter.Frame.Grid sizing not displaying correctly", "body": "<blockquote>\n  <p><strong>Question</strong>: <code>Frame</code> Grid sizing not displaying correctly</p>\n</blockquote>\n\n<p>You are misguided, the <code>header_frame</code> <strong>is not</strong> layouted using <code>.grid(...)</code>.<br>\nUsing <code>.create_window(...</code> add the widget to the <code>Canvas</code> at the fixed position <code>0, 0, anchor='nw'</code>. Therefore, <strong>no</strong> <em>\"Grid Layout Manager\"</em> magic, like auto resizing, happens.  </p>\n\n<hr>\n\n<p><strong>Why do you get this Layout?</strong><br>\n<strong>Note</strong>: <code>main_frame == 'blue'</code>, <code>_headerCanvas == 'lightgreen'</code>, <code>_cellCanvas == 'red'</code>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/nONH9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nONH9.png\" alt=\"A\"></a><a href=\"https://i.stack.imgur.com/iD5n5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iD5n5.png\" alt=\"B\"></a><a href=\"https://i.stack.imgur.com/MHD0c.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MHD0c.png\" alt=\"C\"></a><a href=\"https://i.stack.imgur.com/F33J1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/F33J1.png\" alt=\"D\"></a><br>\nLayout: A &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Layout: B &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Layout: C&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Layout: D</p>\n\n<pre><code>        self._headerCanvas = tk.Canvas(main_frame, bg='lightgreen')\n        self._headerCanvas.grid(row=0, column=0, pady=1, sticky='ew')\n\n        main_frame.grid_rowconfigure(1, weight=1)\n\n        self._cellCanvas = tk.Canvas(main_frame, bg='red')\n        self._cellCanvas.grid(row=1, column=0, sticky='ew')\n</code></pre>\n\n<p><strong>Layout: A</strong>: \nYou create both <code>Canvas</code> with the default <code>height</code>. Therefore you get a similar layout using <em>\"The Grid Layout Manager\"</em>.  </p>\n\n<p><strong>Layout: B</strong>: \nAdding itmes to a <code>Canvas</code>, here the Cells <code>Frame</code>, does not change anything at the Layout.  </p>\n\n<hr>\n\n<p><strong>Layout: C</strong>: \nSync the <code>Canvas height</code> with the <code>header_frame height</code> results in.  </p>\n\n<ol>\n<li><p>Using <code>.bind('&lt;Configure&gt;'</code>  </p>\n\n<pre><code>header_frame = tk.Frame(self._headerCanvas)\nheader_frame.bind('&lt;Configure&gt;', self.on_configure)\n\ndef on_configure(self, event):\n    # Sync _headerCanvas height with header_frame height\n    w = event.widget\n    self._headerCanvas.configure(height=w.winfo_height())\n</code></pre></li>\n<li><p>Using <code>.update_idletask()</code></p>\n\n<pre><code>    header_frame = tk.Frame(self._headerCanvas)\n    self._headers = Table.ColumnHeaders(header_frame, self._columnCount)\n    root.update_idletasks()\n    self._headerCanvas.configure(height=header_frame.winfo_height())\n</code></pre></li>\n</ol>\n\n<hr>\n\n<p><strong>Still not what you want?</strong><br>\n<strong>Layout: D</strong>: \nYou have allowed the <code>.grid(row=1</code> to grow as much as possible by doing:</p>\n\n<pre><code>    main_frame.grid_rowconfigure(1, weight=1)\n</code></pre>\n\n<p>But you don't allow the <code>Canvas</code> to grow using <code>sticky='ns'</code>. This result in the <code>'blue'</code> space above/bottom. Change to <code>sticky='nsew'</code>.  </p>\n"}], "owner": {"reputation": 2076, "user_id": 2860193, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0793dc8385ef6af35cebe31c1ecc10ba?s=128&d=identicon&r=PG&f=1", "display_name": "deathismyfriend", "link": "https://stackoverflow.com/users/2860193/deathismyfriend"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 59325824, "answer_count": 1, "score": 0, "last_activity_date": 1585258026, "creation_date": 1576105578, "last_edit_date": 1576259684, "question_id": 59295469, "link": "https://stackoverflow.com/questions/59295469/tkinter-frame-grid-sizing-not-displaying-correctly", "title": "tkinter.Frame.Grid sizing not displaying correctly", "body": "<p>Hello I am making a table with a header for text to name the columns, cells to store data, and scrolling. </p>\n\n<p>The problem I'm having is that my Table is not displaying correctly. What should happen is the Headers should display above with no other space below them. (other than the small padding I added) The cells display correctly right below the headers.  </p>\n\n<p>The scrolling works for the cells in the y direction. The scrolling also works in the x direction for both the cells and headers. </p>\n\n<p>The function the adds the cells to the frame simply does a create then add using grid(row, column)\nThe header only has 1 row so the blank space should not be there.</p>\n\n<pre><code>import tkinter as tk\nimport collections\nfrom enum import Enum\n\nwindow = tk.Tk() # Root (main) window\n\ndef main():\n    window.title('Table')\n    window.geometry(\"1024x600\")\n    window.update_idletasks()\n    table_frame = tk.Frame(window, background='black')\n    table_frame.pack(fill='x')\n    table = Table(table_frame, 30, 15)\n    print(id(table))\n\n    window.mainloop()\n\nclass Table:\n\n    def __init__(self, frame, rowCount, columnCount):\n        self._rowCount = rowCount\n        self._columnCount = columnCount\n\n        main_frame = tk.Frame(frame, bg='blue')\n        main_frame.pack(fill='both')\n\n        self._headerCanvas = tk.Canvas(main_frame)\n        self._headerCanvas.grid(row=0, column=0, pady=1, sticky='ew')\n\n        self._cellCanvas = tk.Canvas(main_frame)\n        self._cellCanvas.grid(row=1, column=0, sticky='ew')\n\n        scroll_bar_y = tk.Scrollbar(main_frame, orient=tk.VERTICAL, command=self._cellCanvas.yview)\n        scroll_bar_y.grid(row=1, column=1, padx=1, sticky='ns')\n\n        scroll_bar_x = tk.Scrollbar(main_frame, orient=tk.HORIZONTAL, command=self.xViewScroll)\n        scroll_bar_x.grid(row=2, column=0, pady=1, sticky='ew')\n\n        main_frame.grid_columnconfigure(0, weight=1)\n        main_frame.grid_rowconfigure(1, weight=1)\n\n        self._cellCanvas.configure(xscrollcommand=scroll_bar_x.set, yscrollcommand=scroll_bar_y.set) #, width=(main_frame.winfo_width()-scroll_bar_y.winfo_width()))\n\n        header_frame = tk.Frame(self._headerCanvas)\n        self._headers = Table.ColumnHeaders(header_frame, self._columnCount)\n        cell_frame = tk.Frame(self._cellCanvas)\n        self._cells = Table.Cells(cell_frame, self._rowCount, self._columnCount)\n\n        self._headerCanvas.create_window(0, 0, window=header_frame, anchor='nw')\n        self._headerCanvas.update_idletasks()\n        self._cellCanvas.create_window(0, 0, window=cell_frame, anchor='nw')\n        self._cellCanvas.update_idletasks()\n        self._headerCanvas.configure(scrollregion=self._cellCanvas.bbox(\"all\"))\n        self._cellCanvas.configure(scrollregion=self._cellCanvas.bbox(\"all\"))\n\n    def xViewScroll(self, *args):\n        self._headerCanvas.xview(*args)\n        self._cellCanvas.xview(*args)\n\n\n    class Cells:\n\n        class Types(Enum):\n            Entry = 0\n            Button = 1\n\n        class Cell:\n            def __init__(self, widget, text=''):\n                self._text = text\n                self._widget = widget\n\n\n            def getWidget(self):\n                return self._widget\n\n            def setWidget(self, widget):\n                self._widget = widget\n\n            widget = property(getWidget, setWidget, \"Get and set the widget of a cell.\")\n\n\n        def __init__(self, frame, rows, columns, cellTypes=Types.Entry):\n            self._cells = [[],[]]\n\n            for r in range(rows):\n                self._cells.append([])\n                for c in range(columns):\n                    self._cells[r].append(c)\n                    if cellTypes == Table.Cells.Types.Entry:\n                        self._cells[r][c] = Table.Cells.Cell(tk.Entry(frame, width=15))\n                    elif cellTypes == Table.Cells.Types.Button:\n                        self._cells[r][c] = Table.Cells.Cell(tk.Button(frame, width=12))\n\n                    self._cells[r][c].widget.grid(row=r, column=c)\n\n\n        def getCell(self, row, column):\n            return self._cells[row][column]\n\n        def setCell(self, row, column, cell):\n            self._cells[row][column] = cell\n\n        cells = property(getCell, setCell, \"Get and set a cell in the table.\")\n\n\n    class ColumnHeaders:\n        def __init__(self, widget, columnCount):\n            self._widget = widget\n            self._columnCount = columnCount\n            self._headers = Table.Cells(self._widget, 1, self._columnCount, cellTypes=Table.Cells.Types.Button)\nmain()\n</code></pre>\n\n<p>This is how they are currently showing up.\n<a href=\"https://i.stack.imgur.com/XWiFe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XWiFe.png\" alt=\"Table not re-sized\"></a></p>\n\n<p>After re sizing the screen this is what the original should look like. With the headers just above the cells below with only the padding space.\n<a href=\"https://i.stack.imgur.com/jUXYC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jUXYC.png\" alt=\"Table re-sized\"></a></p>\n\n<p>If I shrink it a little more it causes another problem the scrollbar and the headers disappear from view.\nThe scrollbar on the right never disappears however. ( I'm guessing this is because I can't shrink the screen anymore.\n<a href=\"https://i.stack.imgur.com/C3rzB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/C3rzB.png\" alt=\"Table shrunk even more.\"></a></p>\n\n<p>This is what happens with  main_frame.grid_rowconfigure(1, weight=1)\nIt causes this after resizes to a smaller window.\n<a href=\"https://i.stack.imgur.com/qR6qg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qR6qg.png\" alt=\"Table with main_frame.grid_rowconfigure(1, weight=1)\"></a></p>\n"}, {"tags": ["python", "dependencies", "anaconda", "spyder"], "comments": [{"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576113683, "post_id": 59295458, "comment_id": 104797031, "body": "Can you share the full list of packages and their versions?"}, {"owner": {"reputation": 51, "user_id": 12328097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3901d55606957a3f96978e96fa526cc0?s=128&d=identicon&r=PG&f=1", "display_name": "CodeBabylon", "link": "https://stackoverflow.com/users/12328097/codebabylon"}, "reply_to_user": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576114356, "post_id": 59295458, "comment_id": 104797176, "body": "@AlexanderC&#233;cile How do I do that? Apologies, I&#39;m new to Spyder."}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576114551, "post_id": 59295458, "comment_id": 104797221, "body": "The output of <a href=\"https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-pkgs.html#viewing-a-list-of-installed-packages\" rel=\"nofollow noreferrer\"><code>conda list</code></a> should be good."}, {"owner": {"reputation": 51, "user_id": 12328097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3901d55606957a3f96978e96fa526cc0?s=128&d=identicon&r=PG&f=1", "display_name": "CodeBabylon", "link": "https://stackoverflow.com/users/12328097/codebabylon"}, "reply_to_user": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576115388, "post_id": 59295458, "comment_id": 104797367, "body": "@AlexanderC&#233;cile IPython &gt;=4.0     :  7.6.1 (OK) cython &gt;=0.21     :  0.29.14 (OK) jedi &gt;=0.9.0      :  0.14.1 (OK) matplotlib &gt;=2.0.0:  3.1.1 (OK) nbconvert &gt;=4.0   :  5.5.0 (OK) numpy &gt;=1.7       :  1.17.4 (OK) pandas &gt;=0.13.1   :  0.25.0 (OK) pycodestyle &gt;=2.3 :  2.5.0 (OK) pyflakes &gt;=0.6.0  :  2.1.1 (OK) pygments &gt;=2.0    :  2.5.2 (OK) pylint &gt;=0.25     :  2.3.1 (OK) qtconsole &gt;=4.2.0 :  4.5.1 (OK) rope &gt;=0.9.4      :  0.14.0 (OK) sphinx &gt;=0.6.6    :  2.2.2 (OK) sympy &gt;=0.7.3     :  1.4 (OK) Sorry for the weird list. I don&#39;t know how to format without it saving. Does it work?"}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576118417, "post_id": 59295458, "comment_id": 104797948, "body": "Are you using Anaconda Navigator (<a href=\"https://docs.anaconda.com/anaconda/navigator/\" rel=\"nofollow noreferrer\">docs.anaconda.com/anaconda/navigator</a>)? I would suggest giving it a try, I find it makes things much clearer. You can easily tell which packages are in need of an upgrade, and have conda do so."}, {"owner": {"reputation": 51, "user_id": 12328097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3901d55606957a3f96978e96fa526cc0?s=128&d=identicon&r=PG&f=1", "display_name": "CodeBabylon", "link": "https://stackoverflow.com/users/12328097/codebabylon"}, "reply_to_user": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576121734, "post_id": 59295458, "comment_id": 104798608, "body": "@AlexanderC&#233;cile I am using Anaconda navigator. And I know I need to upgrade qtconsole, but it says the requirements for it are satisfied."}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576122183, "post_id": 59295458, "comment_id": 104798677, "body": "I\u2019m not sure I understand what you mean by <i>it says the requirements for it are satisfied</i>, could you elaborate?"}, {"owner": {"reputation": 51, "user_id": 12328097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3901d55606957a3f96978e96fa526cc0?s=128&d=identicon&r=PG&f=1", "display_name": "CodeBabylon", "link": "https://stackoverflow.com/users/12328097/codebabylon"}, "reply_to_user": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576123146, "post_id": 59295458, "comment_id": 104798876, "body": "@AlexanderC&#233;cile I go into Anaconda Prompt, type in <code>conda install qtconsole</code> or <code>conda upgrade qtconsole</code>, and it says the install/upgrade requirements are met, but qtconsole is still 4.5.1., not 4.6.0"}, {"owner": {"reputation": 51, "user_id": 12328097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3901d55606957a3f96978e96fa526cc0?s=128&d=identicon&r=PG&f=1", "display_name": "CodeBabylon", "link": "https://stackoverflow.com/users/12328097/codebabylon"}, "reply_to_user": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576124606, "post_id": 59295458, "comment_id": 104799200, "body": "@AlexanderC&#233;cile I just looked at the environments, and qtconsole is at 4.6.0 for Jupyter, but not Spyder"}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576126173, "post_id": 59295458, "comment_id": 104799513, "body": "That\u2019s strange..."}, {"owner": {"reputation": 51, "user_id": 12328097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3901d55606957a3f96978e96fa526cc0?s=128&d=identicon&r=PG&f=1", "display_name": "CodeBabylon", "link": "https://stackoverflow.com/users/12328097/codebabylon"}, "reply_to_user": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576126973, "post_id": 59295458, "comment_id": 104799721, "body": "@AlexanderC&#233;cile It is."}, {"owner": {"reputation": 12229, "user_id": 12366110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8d357302df47fd4307d331001e90ef5?s=128&d=identicon&r=PG&f=1", "display_name": "CDJB", "link": "https://stackoverflow.com/users/12366110/cdjb"}, "edited": false, "score": 0, "creation_date": 1576140907, "post_id": 59295458, "comment_id": 104804617, "body": "@CodeBabylon what happens if you run <code>conda install qtconsole=4.6.0</code> ? If that fails, try <code>conda install --force-reinstall qtconsole=4.6.0</code>."}, {"owner": {"reputation": 51, "user_id": 12328097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3901d55606957a3f96978e96fa526cc0?s=128&d=identicon&r=PG&f=1", "display_name": "CodeBabylon", "link": "https://stackoverflow.com/users/12328097/codebabylon"}, "reply_to_user": {"reputation": 12229, "user_id": 12366110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8d357302df47fd4307d331001e90ef5?s=128&d=identicon&r=PG&f=1", "display_name": "CDJB", "link": "https://stackoverflow.com/users/12366110/cdjb"}, "edited": false, "score": 0, "creation_date": 1576165895, "post_id": 59295458, "comment_id": 104818865, "body": "@CDJB Still says I have missing dependencies."}, {"owner": {"reputation": 12229, "user_id": 12366110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8d357302df47fd4307d331001e90ef5?s=128&d=identicon&r=PG&f=1", "display_name": "CDJB", "link": "https://stackoverflow.com/users/12366110/cdjb"}, "edited": false, "score": 0, "creation_date": 1576165926, "post_id": 59295458, "comment_id": 104818886, "body": "@CodeBabylon can you post the full error message"}, {"owner": {"reputation": 51, "user_id": 12328097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3901d55606957a3f96978e96fa526cc0?s=128&d=identicon&r=PG&f=1", "display_name": "CodeBabylon", "link": "https://stackoverflow.com/users/12328097/codebabylon"}, "reply_to_user": {"reputation": 12229, "user_id": 12366110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8d357302df47fd4307d331001e90ef5?s=128&d=identicon&r=PG&f=1", "display_name": "CDJB", "link": "https://stackoverflow.com/users/12366110/cdjb"}, "edited": false, "score": 0, "creation_date": 1576166276, "post_id": 59295458, "comment_id": 104819106, "body": "@CDJB You have missing dependencies! <code>qtconsole &gt;= 4.6.0: 4.5.1</code> Please install them to avoid this message! <i>Note</i>: Spyder could work without some of these dependencies, however to have a smooth experience when using Spyder we <i>strongly</i> recommend you install all the listed missing dependencies. Failing to install these dependencies might result in bugs. Please be sure that any found bugs are not the direct result of missing dependencies, prior to reporting a new issue. (This pops up when I open Spyder)."}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576173135, "post_id": 59295458, "comment_id": 104822636, "body": "@CodeBabylon Argh that sucks. It installed 4.6.0 just fine?"}, {"owner": {"reputation": 51, "user_id": 12328097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3901d55606957a3f96978e96fa526cc0?s=128&d=identicon&r=PG&f=1", "display_name": "CodeBabylon", "link": "https://stackoverflow.com/users/12328097/codebabylon"}, "reply_to_user": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576173539, "post_id": 59295458, "comment_id": 104822841, "body": "@AlexanderC&#233;cile It did. Ananconda says it&#39;s installed and that I can&#39;t update it anymore."}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576174360, "post_id": 59295458, "comment_id": 104823147, "body": "@CodeBabylon All all the packages in the environment are up to date, right?"}, {"owner": {"reputation": 51, "user_id": 12328097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3901d55606957a3f96978e96fa526cc0?s=128&d=identicon&r=PG&f=1", "display_name": "CodeBabylon", "link": "https://stackoverflow.com/users/12328097/codebabylon"}, "reply_to_user": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576184039, "post_id": 59295458, "comment_id": 104826978, "body": "@AlexanderC&#233;cile Yes, they are"}], "answers": [{"tags": [], "owner": {"reputation": 101, "user_id": 5258879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b7df175407431342ee586945729f7ac?s=128&d=identicon&r=PG", "display_name": "megamillions", "link": "https://stackoverflow.com/users/5258879/megamillions"}, "is_accepted": false, "score": 0, "last_activity_date": 1612398933, "creation_date": 1612398933, "answer_id": 66037783, "question_id": 59295458, "link": "https://stackoverflow.com/questions/59295458/missing-spyder-dependencies-qtconsole-4-6-0-4-5-1/66037783#66037783", "title": "Missing Spyder Dependencies qtconsole &gt;= 4.6.0: 4.5.1", "body": "<p>It is possible that the update broke something within Spyder.</p>\n<p>You can uninstall Spyder through the Anaconda Navigator, then click the gear on Anaconda Navigator to install Spyder again using the previous version.</p>\n"}], "owner": {"reputation": 51, "user_id": 12328097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3901d55606957a3f96978e96fa526cc0?s=128&d=identicon&r=PG&f=1", "display_name": "CodeBabylon", "link": "https://stackoverflow.com/users/12328097/codebabylon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1616, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1612450080, "creation_date": 1576105517, "question_id": 59295458, "link": "https://stackoverflow.com/questions/59295458/missing-spyder-dependencies-qtconsole-4-6-0-4-5-1", "title": "Missing Spyder Dependencies qtconsole &gt;= 4.6.0: 4.5.1", "body": "<p>I upgraded to Spyder 4 using Anaconda today, but I got an error saying \"You have missing dependencies! qtconsole >=4.6.0: 4.5.1. (NOK).</p>\n\n<p>I tried upgrading qtconsole and Spyder using conda, but neither of these solved the problem.</p>\n\n<p>Note: I'm on Python 3.7</p>\n"}, {"tags": ["python", "anaconda"], "comments": [{"owner": {"reputation": 50872, "user_id": 523612, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ae512dd708a619496d36b1f681f95e0?s=128&d=identicon&r=PG", "display_name": "Karl Knechtel", "link": "https://stackoverflow.com/users/523612/karl-knechtel"}, "edited": false, "score": 0, "creation_date": 1576105622, "post_id": 59295454, "comment_id": 104795242, "body": "They are already strings; there is no conversion to do."}, {"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 0, "creation_date": 1576105848, "post_id": 59295454, "comment_id": 104795315, "body": "please see the <a href=\"https://docs.python.org/3/library/os.path.html#module-os.path\" rel=\"nofollow noreferrer\"><code>os.path</code></a> module. You will find everything you need there. Also, try to focus your questions: the whole <code>tkinter</code> part is irrelevant for your actual question"}, {"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 0, "creation_date": 1576105963, "post_id": 59295454, "comment_id": 104795351, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/8384737/extract-file-name-from-path-no-matter-what-the-os-path-format\">Extract file name from path, no matter what the os/path format</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5059, "user_id": 1428102, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OEl5y.jpg?s=128&g=1", "display_name": "abhilb", "link": "https://stackoverflow.com/users/1428102/abhilb"}, "is_accepted": true, "score": 0, "last_activity_date": 1576105834, "creation_date": 1576105834, "answer_id": 59295512, "question_id": 59295454, "link": "https://stackoverflow.com/questions/59295454/python-get-file-names-after-user-selects-multiple-files/59295512#59295512", "title": "Python, get file names after user selects multiple files", "body": "<p>Use <code>pathlib</code> to get the name of the file from the path</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; from pathlib import Path\n&gt;&gt;&gt; [Path(x).name for x in files]\n['DN1.xls', 'DN2.xls']\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 4104708, "user_type": "registered", "profile_image": "https://graph.facebook.com/1514392097/picture?type=large", "display_name": "Jhangir Awan", "link": "https://stackoverflow.com/users/4104708/jhangir-awan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 59295512, "answer_count": 1, "score": -1, "last_activity_date": 1579645609, "creation_date": 1576105499, "last_edit_date": 1579645609, "question_id": 59295454, "link": "https://stackoverflow.com/questions/59295454/python-get-file-names-after-user-selects-multiple-files", "title": "Python, get file names after user selects multiple files", "body": "<p>I am currently writing a program where the user is asked to select multiple files.</p>\n\n<p>After selection I want to be able to get just the file name with the extension.</p>\n\n<p>Below is what I have currently.</p>\n\n<pre><code>import tkinter as tk\nfrom tkinter import filedialog\n\nroot = tk.Tk()\nroot.withdraw()\n\nfiles = filedialog.askopenfilenames()\n\nprint(files)\n</code></pre>\n\n<p>I am still a beginner and trying to learn the language. Right now what is returning is the whole file directory for each file. </p>\n\n<pre><code>('C:/Users/60068533/Downloads/webscrape/DN1.xls', 'C:/Users/60068533/Downloads/webscrape/DN2.xls')\n</code></pre>\n\n<p>I just want to get the file name with the extension, for example DN1.xls and DN2.xls.</p>\n\n<p>What code can I use to achieve this? Is there a way to also convert it to a string?</p>\n"}, {"tags": ["python", "python-3.x", "ssl", "ssl-certificate", "mechanicalsoup"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 8067080, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ILLDKaEWh8/AAAAAAAAAAI/AAAAAAAAHxo/5sTKcxQ1yec/photo.jpg?sz=128", "display_name": "Andreas Weigl", "link": "https://stackoverflow.com/users/8067080/andreas-weigl"}, "edited": false, "score": 1, "creation_date": 1576117199, "post_id": 59295654, "comment_id": 104797738, "body": "GAH! I had tried that before and it didn&#39;t work. Just tried it again and now it does. Guess I had a typo somewhere. Just as an extra reference for others: verify=&quot;certfile&quot; works as well."}], "tags": [], "owner": {"reputation": 152, "user_id": 3224454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/66de0bb929e2d653161fab8262244538?s=128&d=identicon&r=PG&f=1", "display_name": "user3224454", "link": "https://stackoverflow.com/users/3224454/user3224454"}, "is_accepted": true, "score": 1, "last_activity_date": 1576107037, "creation_date": 1576107037, "answer_id": 59295654, "question_id": 59295401, "link": "https://stackoverflow.com/questions/59295401/certificate-verify-failed-with-mechanicalsoup/59295654#59295654", "title": "certificate verify failed with MechanicalSoup", "body": "<p>Maybe you could use: <code>browser.open(\"https://\" + args.server + \":\" + args.port, verify=False)</code></p>\n"}, {"tags": [], "owner": {"reputation": 10958, "user_id": 4830165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sss6o.jpg?s=128&g=1", "display_name": "Matthieu Moy", "link": "https://stackoverflow.com/users/4830165/matthieu-moy"}, "is_accepted": false, "score": 0, "last_activity_date": 1576254729, "creation_date": 1576254729, "answer_id": 59326477, "question_id": 59295401, "link": "https://stackoverflow.com/questions/59295401/certificate-verify-failed-with-mechanicalsoup/59326477#59326477", "title": "certificate verify failed with MechanicalSoup", "body": "<p>MechanicalSoup doesn't do anything specific with SSL certificates, but <code>browser.open</code> forwards its arguments to <a href=\"https://2.python-requests.org//en/master/api/#requests.Session.request\" rel=\"nofollow noreferrer\">requests.Session.request</a>'s constructor, which exposes among others:</p>\n\n<blockquote>\n  <p><strong>verify</strong> \u2013 (optional) Either a boolean, in which case it controls whether we verify the server\u2019s TLS certificate, or a string, in which case it must be a path to a CA bundle to use. Defaults to True.</p>\n  \n  <p><strong>cert</strong> \u2013 (optional) if String, path to ssl client cert file (.pem). If Tuple, (\u2018cert\u2019, \u2018key\u2019) pair.</p>\n</blockquote>\n\n<p>So, you may use <code>verify=False</code> as the other answer suggests (unsafe), or <a href=\"https://serverfault.com/questions/139728/how-to-download-the-ssl-certificate-from-a-website\">download the certificate from the website</a> and use <code>cert=\"/path/to/certificate.pem</code>.</p>\n"}], "owner": {"reputation": 31, "user_id": 8067080, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ILLDKaEWh8/AAAAAAAAAAI/AAAAAAAAHxo/5sTKcxQ1yec/photo.jpg?sz=128", "display_name": "Andreas Weigl", "link": "https://stackoverflow.com/users/8067080/andreas-weigl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 395, "favorite_count": 0, "accepted_answer_id": 59295654, "answer_count": 2, "score": 2, "last_activity_date": 1576254729, "creation_date": 1576105099, "question_id": 59295401, "link": "https://stackoverflow.com/questions/59295401/certificate-verify-failed-with-mechanicalsoup", "title": "certificate verify failed with MechanicalSoup", "body": "<p>I want to retrieve some data from my router using MechanicalSoup. However when I try I get \"certificate verify failed\". As I see it I have two options</p>\n\n<ol>\n<li>Find a way to disable SSL verification</li>\n<li>Tell MechanicalSoup where it can find the pem file (I created it using \"openssl s_connect ....\")</li>\n</ol>\n\n<p>My code looks like this so far:</p>\n\n<pre><code>import argparse\nimport mechanicalsoup\nfrom getpass import getpass\n\nparser = argparse.ArgumentParser(description=\"Get data from router\")\nparser.add_argument(\"-u\", \"--username\", help=\"User\", type=str,\n                    required=True)\nparser.add_argument(\"-s\", \"--server\", help=\"server\", type=str,\n                    required=True)\nparser.add_argument(\"-p\", \"--port\", help=\"Port\", type=str,\n                    required=False, default=\"8443\")\nparser.add_argument(\"-v\", \"--verbose\", help=\"Verbose output. Add \" +\n                    \"additional v to increase level.\",\n                    action=\"count\", default=0)\nargs = parser.parse_args()\n\nargs.password = getpass(\"Password:\")\n\nbrowser = mechanicalsoup.StatefulBrowser(\n    soup_config={'features': 'lxml'},\n    raise_on_404=True,\n    user_agent='getdata.py/0.1',\n)\n\nbrowser.set_verbose(args.verbose)\n\nbrowser.open(\"https://\" + args.server + \":\" + args.port)\n</code></pre>\n\n<p>Full error message from end of stack:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"perfcreate.py\", line 33, in &lt;module&gt;\n    browser.open(\"https://\" + args.server + \":\" + args.port)\n  File \"/home/andyw/mypy_env/lib/python3.6/site-packages/mechanicalsoup/stateful_browser.py\", line 133, in open\n    resp = self.get(url, *args, **kwargs)\n  File \"/home/andyw/mypy_env/lib/python3.6/site-packages/mechanicalsoup/browser.py\", line 124, in get\n    response = self.session.get(*args, **kwargs)\n  File \"/home/andyw/mypy_env/lib/python3.6/site-packages/requests/sessions.py\", line 546, in get\n    return self.request('GET', url, **kwargs)\n  File \"/home/andyw/mypy_env/lib/python3.6/site-packages/requests/sessions.py\", line 533, in request\n    resp = self.send(prep, **send_kwargs)\n  File \"/home/andyw/mypy_env/lib/python3.6/site-packages/requests/sessions.py\", line 646, in send\n    r = adapter.send(request, **kwargs)\n  File \"/home/andyw/mypy_env/lib/python3.6/site-packages/requests/adapters.py\", line 514, in send\n    raise SSLError(e, request=request)\nrequests.exceptions.SSLError: HTTPSConnectionPool(host='192.168.1.1', port=8443): Max retries exceeded with url: / (Caused by SSLError(SSLError(\"bad handshake: Error([('SSL routines', 'tls_process_server_certificate', 'certificate verify failed')],)\",),))\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "edited": false, "score": 4, "creation_date": 1576105096, "post_id": 59295325, "comment_id": 104795080, "body": "What do you mean by &quot;without repeat&quot;? Keys in dictionary are unique..."}, {"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 0, "creation_date": 1576105635, "post_id": 59295325, "comment_id": 104795249, "body": "duplicate: <a href=\"https://stackoverflow.com/questions/10895567/find-longest-string-key-in-dictionary\" title=\"find longest string key in dictionary\">stackoverflow.com/questions/10895567/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 12521371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648c259846cf8b41e92a418385975415?s=128&d=identicon&r=PG&f=1", "display_name": "Mit Patel", "link": "https://stackoverflow.com/users/12521371/mit-patel"}, "is_accepted": false, "score": 1, "last_activity_date": 1576104977, "creation_date": 1576104977, "answer_id": 59295379, "question_id": 59295325, "link": "https://stackoverflow.com/questions/59295325/finding-max-key-length-without-repeat-in-dictionary/59295379#59295379", "title": "finding max key length without repeat in dictionary", "body": "<p>If you are looking to find the maximum length of the key itself refer to the following code. </p>\n\n<pre><code>key_list = input_dict.keys()\nmax_length = 0\nfor key in key_list:\n    if len(key) &gt; max_length:\n        max_length = len(key)\nprint(max_length)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 0, "creation_date": 1576105387, "post_id": 59295411, "comment_id": 104795173, "body": "a fun alternative would be: <code>max_len = max(map(len, names))</code>"}], "tags": [], "owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "is_accepted": false, "score": 1, "last_activity_date": 1576105426, "last_edit_date": 1576105426, "creation_date": 1576105171, "answer_id": 59295411, "question_id": 59295325, "link": "https://stackoverflow.com/questions/59295325/finding-max-key-length-without-repeat-in-dictionary/59295411#59295411", "title": "finding max key length without repeat in dictionary", "body": "<p>If you want to find the maximum length of a key in a dictionary you can just pass the dict to max using the key len, that will return you the longest, then just count its length with len </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>names = {\n    'chris': 1,\n    'adam': 1,\n    'charleston': 1,\n    'al': 1\n}\n\nmax_len = len(max(names, key=len))\nfor name in names:\n    print(f'#{name:{max_len}s}#')\n</code></pre>\n\n<p><strong>OUTPUT</strong></p>\n\n<pre><code>#chris     #\n#adam      #\n#charleston#\n#al        #\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12361699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0fc59d8fe61637f0ce9cddc8c1e4727?s=128&d=identicon&r=PG&f=1", "display_name": "Honey", "link": "https://stackoverflow.com/users/12361699/honey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "closed_date": 1576106436, "answer_count": 2, "score": -4, "last_activity_date": 1576105426, "creation_date": 1576104609, "last_edit_date": 1576105008, "question_id": 59295325, "link": "https://stackoverflow.com/questions/59295325/finding-max-key-length-without-repeat-in-dictionary", "closed_reason": "Needs details or clarity", "title": "finding max key length without repeat in dictionary", "body": "<pre><code>n = int(input())\nnames = {}\nnames[\"name\"]=\"len\"\ns=0\nfor n in range(1,n+1):\n    name=str(input())\n    for k in names.keys():\n        s= len(name)\n        print(s)\n</code></pre>\n\n<p>I am new to python and I know my code has lots of issues. but please help me find the max length of key in a dictionary. </p>\n"}, {"tags": ["python", "pandas", "regression", "statsmodels", "linearmodels"], "comments": [{"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1576106228, "post_id": 59295323, "comment_id": 104795411, "body": "Please show sample data and your <i>long way</i> attempt of regression. It is unclear how your data looks and what variables need to run in linear model."}, {"owner": {"reputation": 1, "user_id": 12521322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7d9bed7dbdcf43d4f85250da8860dbb?s=128&d=identicon&r=PG&f=1", "display_name": "scox", "link": "https://stackoverflow.com/users/12521322/scox"}, "reply_to_user": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1576161297, "post_id": 59295323, "comment_id": 104815989, "body": "Here are snippets of three data files. I haven&#39;t done it the long way yet. I was hoping to avoid having to do that."}, {"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1576163329, "post_id": 59295323, "comment_id": 104817221, "body": "And what is your regression model (i.e., dependent and independent variable(s))? Specifically you say <i>regression of each measurement position versus start time</i>."}], "owner": {"reputation": 1, "user_id": 12521322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7d9bed7dbdcf43d4f85250da8860dbb?s=128&d=identicon&r=PG&f=1", "display_name": "scox", "link": "https://stackoverflow.com/users/12521322/scox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1576166271, "creation_date": 1576104564, "last_edit_date": 1576166271, "question_id": 59295323, "link": "https://stackoverflow.com/questions/59295323/regressing-along-time-in-a-three-dimensional-pandas-dataframe", "title": "Regressing along time in a three-dimensional Pandas dataframe", "body": "<p>I have a dataset that consists of five signals measured over time. In a given data file, each timestamp corresponds to a unique measurement position. The positions repeat in each file, but the time spacing is irregular. I would like to calculate a linear regression for the signal at each position over time.</p>\n\n<p>Right now I have been importing each data file as a Pandas dataframe and then assembling them as a 3-d dataframe like so: </p>\n\n<pre><code>peak1 = pd.read_csv('peak/scan1.txt', skiprows=[i for i in [0, 2]], index_col=False)\npeak2 = pd.read_csv('peak/scan2.txt', skiprows=[i for i in [0, 2]], index_col=False)\npeak3 = pd.read_csv('peak/scan3.txt', skiprows=[i for i in [0, 2]], index_col=False)\npeak4 = pd.read_csv('peak/scan4.txt', skiprows=[i for i in [0, 2]], index_col=False)\npeak5 = pd.read_csv('peak/scan5.txt', skiprows=[i for i in [0, 2]], index_col=False)\npeak6 = pd.read_csv('peak/scan6.txt', skiprows=[i for i in [0, 2]], index_col=False)\n\npeaks = pd.concat([peak1, peak2, peak3, peak4, peak5, peak6], keys=('Scan1', 'Scan2', 'Scan3', 'Scan4', 'Scan5', 'Scan6'))\npeaks['Start'] = pd.to_datetime(peaks['Start'], format='%H:%M:%S.%f')\npeaks['End'] = pd.to_datetime(peaks['End'], format='%H:%M:%S.%f')\n</code></pre>\n\n<p>Is there an easy way to create an array that contains the slope of a regression of each measurement position versus start time? I can do this by pulling every position out of each file and creating a bunch of 2-d arrays of signal vs. time for each, calculating the regression, then reassembling into a new dataframe and tacking it onto the original, but it seems like there is probably a more efficient way.</p>\n\n<p>Edit: examples</p>\n\n<pre><code>Scan1\nIDTag,Index,Position,LastInteg,Start,End,Sig1,Sig2,Sig3,Sig4,Sig5,Sig2B,Sig3B,Sig4B,Sig5B\n\n1,1,37.8450,False,02:13:59.893,02:14:00.106, 5, -0.0000183, 0.0000225, -0.0000168, 0.0000605, -0.0000183, 0.0000225, -0.0000168, 0.0000605, \n2,1,37.8448,False,02:14:00.174,02:14:00.387, 0, -0.0000124, 0.0000081, 0.0000095, -0.0000370, -0.0000124, 0.0000081, 0.0000095, -0.0000370, \n3,1,37.8446,False,02:14:00.439,02:14:00.652, 0, -0.0000079, 0.0000163, 0.0000214, -0.0000670, -0.0000079, 0.0000163, 0.0000214, -0.0000670, \n4,1,37.8444,False,02:14:00.704,02:14:00.918, 0, -0.0000313, -0.0000238, 0.0000211, 0.0000086, -0.0000313, -0.0000238, 0.0000211, 0.0000086, \n5,1,37.8442,False,02:14:00.969,02:14:01.182, 0, 0.0000376, -0.0000149, -0.0000246, -0.0000273, 0.0000376, -0.0000149, -0.0000246, -0.0000273, \n6,1,37.8440,False,02:14:01.234,02:14:01.448, 0, -0.0000171, 0.0000318, -0.0000517, -0.0000144, -0.0000171, 0.0000318, -0.0000517, -0.0000144, \n7,1,37.8438,False,02:14:01.500,02:14:01.713, 0, 0.0000494, -0.0000132, 0.0000169, 0.0000398, 0.0000494, -0.0000132, 0.0000169, 0.0000398, \n8,1,37.8436,False,02:14:01.765,02:14:01.978, 0, -0.0000162, 0.0000721, 0.0000450, -0.0000324, -0.0000162, 0.0000721, 0.0000450, -0.0000324, \n9,1,37.8434,False,02:14:02.030,02:14:02.242, 0, 0.0000210, 0.0000141, -0.0000450, -0.0000436, 0.0000210, 0.0000141, -0.0000450, -0.0000436, \n10,1,37.8432,False,02:14:02.295,02:14:02.508, 0, -0.0000420, -0.0000070, -0.0000197, -0.0000195, -0.0000420, -0.0000070, -0.0000197, -0.0000195, \n\nScan2\nIDTag,Index,Position,LastInteg,Start,End,Sig1,Sig2,Sig3,Sig4,Sig5,Sig2B,Sig3B,Sig4B,Sig5B\n\n1,1,37.6950,False,02:19:25.980,02:19:26.192, 0, -0.0000127, 0.0000533, -0.0000101, -0.0000177, -0.0000127, 0.0000533, -0.0000101, -0.0000177, \n2,1,37.6952,False,02:19:26.245,02:19:26.460, 0, -0.0000500, -0.0000029, 0.0000109, -0.0000493, -0.0000500, -0.0000029, 0.0000109, -0.0000493, \n3,1,37.6954,False,02:19:26.511,02:19:26.723, 0, -0.0000545, -0.0000235, -0.0000488, 0.0000353, -0.0000545, -0.0000235, -0.0000488, 0.0000353, \n4,1,37.6956,False,02:19:26.776,02:19:26.989, 0, 0.0000221, -0.0000147, 0.0000139, 0.0000607, 0.0000221, -0.0000147, 0.0000139, 0.0000607, \n5,1,37.6958,False,02:19:27.041,02:19:27.254, 5, 0.0000016, -0.0000153, -0.0000305, 0.0000076, 0.0000016, -0.0000153, -0.0000305, 0.0000076, \n6,1,37.6960,False,02:19:27.306,02:19:27.518, 0, 0.0000076, 0.0000069, 0.0000244, 0.0000302, 0.0000076, 0.0000069, 0.0000244, 0.0000302, \n7,1,37.6962,False,02:19:27.571,02:19:27.784, 5, 0.0000141, 0.0000519, 0.0000095, -0.0000292, 0.0000141, 0.0000519, 0.0000095, -0.0000292, \n8,1,37.6964,False,02:19:27.837,02:19:28.051, 0, -0.0000167, -0.0000878, -0.0000292, 0.0000934, -0.0000167, -0.0000878, -0.0000292, 0.0000934, \n9,1,37.6966,False,02:19:28.102,02:19:28.316, 0, 0.0000353, 0.0000206, 0.0000289, -0.0000510, 0.0000353, 0.0000206, 0.0000289, -0.0000510, \n10,1,37.6968,False,02:19:28.367,02:19:28.581, 5, 0.0000103, 0.0000374, -0.0000351, -0.0000124, 0.0000103, 0.0000374, -0.0000351, -0.0000124, \n\nScan3\nIDTag,Index,Position,LastInteg,Start,End,Sig1,Sig2,Sig3,Sig4,Sig5,Sig2B,Sig3B,Sig4B,Sig5B\n\n1,1,37.8450,False,02:23:06.767,02:23:06.979, 5, -0.0000075, 0.0000574, -0.0000014, 0.0000523, -0.0000075, 0.0000574, -0.0000014, 0.0000523, \n2,1,37.8448,False,02:23:07.048,02:23:07.261, 0, -0.0000019, 0.0000010, -0.0000090, -0.0000107, -0.0000019, 0.0000010, -0.0000090, -0.0000107, \n3,1,37.8446,False,02:23:07.313,02:23:07.526, 5, 0.0000316, 0.0000154, 0.0000086, -0.0000582, 0.0000316, 0.0000154, 0.0000086, -0.0000582, \n4,1,37.8444,False,02:23:07.579,02:23:07.791, 5, -0.0000320, 0.0000014, -0.0000194, 0.0000081, -0.0000320, 0.0000014, -0.0000194, 0.0000081, \n5,1,37.8442,False,02:23:07.844,02:23:08.057, 0, 0.0000227, -0.0000326, 0.0000124, -0.0000078, 0.0000227, -0.0000326, 0.0000124, -0.0000078, \n6,1,37.8440,False,02:23:08.109,02:23:08.321, 0, -0.0000037, -0.0000201, -0.0000247, -0.0000361, -0.0000037, -0.0000201, -0.0000247, -0.0000361, \n7,1,37.8438,False,02:23:08.374,02:23:08.587, 10, 0.0000048, -0.0000790, -0.0000260, 0.0000352, 0.0000048, -0.0000790, -0.0000260, 0.0000352, \n8,1,37.8436,False,02:23:08.639,02:23:08.853, 0, 0.0000499, 0.0000047, -0.0000064, -0.0000554, 0.0000499, 0.0000047, -0.0000064, -0.0000554, \n9,1,37.8434,False,02:23:08.905,02:23:09.117, 0, -0.0000475, -0.0000130, -0.0000116, 0.0000996, -0.0000475, -0.0000130, -0.0000116, 0.0000996, \n10,1,37.8432,False,02:23:09.170,02:23:09.384, 0, 0.0000206, -0.0000171, 0.0000280, 0.0000349, 0.0000206, -0.0000171, 0.0000280, 0.0000349, \n</code></pre>\n\n<p>Edit 2: The following does what I want, but it seems like I could have done this more easily taking advantage of the dataframe structure.</p>\n\n<pre><code>unique_positions = peaks['Position'].unique()\nsignal_list = ['Sig1', 'Sig2', 'Sig3', 'Sig4', 'Sig5', 'Sig2B', 'Sig3B', 'Sig4B', 'Sig5B']\nregs = pd.DataFrame(columns=['Position'] + signal_list)\nregs.set_index('Position', inplace=True)\n\nfor pos in unique_positions:\n    time_series_at_pos = peaks[peaks['Position'] == pos]\n    for sig in signal_list:\n        linear_regressor = LinearRegression()\n        linear_regressor.fit(time_series_at_pos['Start'].values.reshape(-1, 1), time_series_at_pos[sig].values.reshape(-1, 1))\n        regs.ix[pos, sig] = linear_regressor.coef_[0][0]\n</code></pre>\n"}, {"tags": ["python", "google-cloud-firestore"], "comments": [{"owner": {"reputation": 1533, "user_id": 10569027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dPPb9.jpg?s=128&g=1", "display_name": "GiovaniSalazar", "link": "https://stackoverflow.com/users/10569027/giovanisalazar"}, "edited": false, "score": 0, "creation_date": 1576107375, "post_id": 59295283, "comment_id": 104795710, "body": "Have you read this doc <a href=\"https://github.com/GoogleCloudPlatform/python-docs-samples/blob/2329466637798630851fb70f7a157b8d5edecb6c/firestore/cloud-client/snippets.py#L469-L471\" rel=\"nofollow noreferrer\">github.com/GoogleCloudPlatform/python-docs-samples/blob/&hellip;</a> ?"}, {"owner": {"reputation": 255, "user_id": 10137324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a42e0c2285b02690c496c2e7fd703d7?s=128&d=identicon&r=PG&f=1", "display_name": "learncodes123", "link": "https://stackoverflow.com/users/10137324/learncodes123"}, "reply_to_user": {"reputation": 1533, "user_id": 10569027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dPPb9.jpg?s=128&g=1", "display_name": "GiovaniSalazar", "link": "https://stackoverflow.com/users/10569027/giovanisalazar"}, "edited": false, "score": 0, "creation_date": 1576108034, "post_id": 59295283, "comment_id": 104795891, "body": "I have read that but it played poorly with Flask"}], "answers": [{"comments": [{"owner": {"reputation": 255, "user_id": 10137324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a42e0c2285b02690c496c2e7fd703d7?s=128&d=identicon&r=PG&f=1", "display_name": "learncodes123", "link": "https://stackoverflow.com/users/10137324/learncodes123"}, "edited": false, "score": 0, "creation_date": 1576107617, "post_id": 59295712, "comment_id": 104795789, "body": "Thanks. Is there a way to .where on the name or id of the document though? So search for a document name? I know i can use doc.id. So .where() document name == &#39;name&#39;"}, {"owner": {"reputation": 4765, "user_id": 3945408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0jXTc.jpg?s=128&g=1", "display_name": "Juan Lara", "link": "https://stackoverflow.com/users/3945408/juan-lara"}, "reply_to_user": {"reputation": 255, "user_id": 10137324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a42e0c2285b02690c496c2e7fd703d7?s=128&d=identicon&r=PG&f=1", "display_name": "learncodes123", "link": "https://stackoverflow.com/users/10137324/learncodes123"}, "edited": false, "score": 1, "creation_date": 1576107945, "post_id": 59295712, "comment_id": 104795871, "body": "<a href=\"https://googleapis.dev/python/firestore/latest/document.html#google.cloud.firestore_v1.document.DocumentSnapshot\" rel=\"nofollow noreferrer\">Reference for document snapshot.</a>"}], "tags": [], "owner": {"reputation": 4765, "user_id": 3945408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0jXTc.jpg?s=128&g=1", "display_name": "Juan Lara", "link": "https://stackoverflow.com/users/3945408/juan-lara"}, "is_accepted": true, "score": 2, "last_activity_date": 1576107495, "creation_date": 1576107495, "answer_id": 59295712, "question_id": 59295283, "link": "https://stackoverflow.com/questions/59295283/how-to-query-the-firestore-db-properly-in-python/59295712#59295712", "title": "How to query the Firestore DB properly in Python", "body": "<p>Use the <code>.stream()</code> method to <a href=\"https://cloud.google.com/firestore/docs/query-data/queries#execute_a_query\" rel=\"nofollow noreferrer\">execute the query</a>:</p>\n\n<pre><code>doc_reffer = db.collection(u'test')\nemails = doc_reffer.where(u'adminEmail', u'==', 'x@x.com').stream()\n\nfor doc in emails:\n    print(u'{} =&gt; {}'.format(doc.id, doc.to_dict()))\n</code></pre>\n\n<p>Note that <code>stream()</code> returns an iterator and won't fetch the documents until you start iterating through the results.</p>\n\n<p>You can fetch all the docs, and put them into a dict like this:</p>\n\n<pre><code>doc_reffer = db.collection(u'test').where(u'adminEmail', u'==', 'x@x.com')\nemails = [snapshot for snapshot in doc_reffer.stream()]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 255, "user_id": 10137324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a42e0c2285b02690c496c2e7fd703d7?s=128&d=identicon&r=PG&f=1", "display_name": "learncodes123", "link": "https://stackoverflow.com/users/10137324/learncodes123"}, "is_accepted": false, "score": 0, "last_activity_date": 1576108897, "last_edit_date": 1576108897, "creation_date": 1576108371, "answer_id": 59295827, "question_id": 59295283, "link": "https://stackoverflow.com/questions/59295283/how-to-query-the-firestore-db-properly-in-python/59295827#59295827", "title": "How to query the Firestore DB properly in Python", "body": "<p>Using Juan Laras answer i was able to successfully get all documents within a collection where this admin email would exist. Which is what i wanted to achieve. There's pretty much no documentation (simple docs) that i could find for this.   </p>\n\n<pre><code> doc_reffer = db.collection(u'test')\n    responseUserEmail = 'x@x.com'\n    query = doc_reffer.where(u'adminEmail', u'==', responseUserEmail)\n    docs = [snapshot.id for snapshot in query.stream()]\n    if responseUserEmail in docs:\n        return f'found {responseUserEmail}'\n    else:\n        return f'did not find {responseUserEmail}'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12082117, "user_type": "registered", "profile_image": "https://graph.facebook.com/2483262648562342/picture?type=large", "display_name": "Bill Rao", "link": "https://stackoverflow.com/users/12082117/bill-rao"}, "is_accepted": false, "score": 0, "last_activity_date": 1576738962, "creation_date": 1576738962, "answer_id": 59404707, "question_id": 59295283, "link": "https://stackoverflow.com/questions/59295283/how-to-query-the-firestore-db-properly-in-python/59404707#59404707", "title": "How to query the Firestore DB properly in Python", "body": "<p>The other answers seem correct. You mentioned that the docs are not easy to understand with python client libraries. This is one of the problems I am trying to solve with <a href=\"https://github.com/billyrrr/flask-boiler\" rel=\"nofollow noreferrer\">flask-boiler</a>. With flask-boiler, you will be able to query your objects like this: </p>\n\n<pre><code>emails = [x for x in Test.where(admin_email='x@x.com')]\nfor email in emails:\n    print(u'{} =&gt; {}'.format(email.doc_id, email.to_dict()))\n</code></pre>\n\n<p>Thanks. </p>\n"}], "owner": {"reputation": 255, "user_id": 10137324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a42e0c2285b02690c496c2e7fd703d7?s=128&d=identicon&r=PG&f=1", "display_name": "learncodes123", "link": "https://stackoverflow.com/users/10137324/learncodes123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "accepted_answer_id": 59295712, "answer_count": 3, "score": 0, "last_activity_date": 1576738962, "creation_date": 1576104375, "last_edit_date": 1576104432, "question_id": 59295283, "link": "https://stackoverflow.com/questions/59295283/how-to-query-the-firestore-db-properly-in-python", "title": "How to query the Firestore DB properly in Python", "body": "<p>I have tried multiple ways to use .where() with firestore, in the end i just by passed .where() and used .get() then if/else statements to check data. With Javascript it is fairly simple. Python the docs are not easy to understand.</p>\n\n<pre><code>doc_reffer = db.collection(u'test')\nemails = doc_reffer.where(u'adminEmail', u'==', 'x@x.com') \\\n    .get()\nif(emails == True):\n    return \"is true\"\nelse:\n    return \"false\"\n</code></pre>\n\n<p>Neither of these work properly, i get a reponse but then cannot check anything on that object. What methods can be used on .where() and how is it used properly?</p>\n\n<pre><code>doc_reffer = db.collection(u'test')\nemails = doc_reffer.where(u'adminEmail', u'==', 'x@x.com')\n    return str(emails)\n</code></pre>\n"}, {"tags": ["python", "encoding", "utf-8", "locale", "setlocale"], "comments": [{"owner": {"reputation": 696, "user_id": 3700414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/280cc7f614a4aba6211500b20f87064a?s=128&d=identicon&r=PG&f=1", "display_name": "Rusi", "link": "https://stackoverflow.com/users/3700414/rusi"}, "edited": false, "score": 0, "creation_date": 1578406074, "post_id": 59295250, "comment_id": 105421884, "body": "I don&#39;t think C.UTF-8 is a valid locale. C (synonym POSIX) is and is intended to be strictly a byte=char fall back [On phone so can&#39;t check]"}, {"owner": {"reputation": 696, "user_id": 3700414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/280cc7f614a4aba6211500b20f87064a?s=128&d=identicon&r=PG&f=1", "display_name": "Rusi", "link": "https://stackoverflow.com/users/3700414/rusi"}, "edited": false, "score": 0, "creation_date": 1578641133, "post_id": 59295250, "comment_id": 105512008, "body": "It&#39;s a bit more complicated\ud83d\ude08  Followup of above comment in answer below"}], "answers": [{"comments": [{"owner": {"reputation": 2987, "user_id": 482425, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8128e22eb5f48bab391841dcd80b399d?s=128&d=identicon&r=PG", "display_name": "Hoopes", "link": "https://stackoverflow.com/users/482425/hoopes"}, "edited": false, "score": 0, "creation_date": 1576163186, "post_id": 59305150, "comment_id": 104817130, "body": "It&#39;s crazy, same result : (&#39;en_US&#39;, &#39;UTF-8&#39;) ... and same error..."}, {"owner": {"reputation": 5450, "user_id": 2758823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Nxaq.jpg?s=128&g=1", "display_name": "Giacomo Catenazzi", "link": "https://stackoverflow.com/users/2758823/giacomo-catenazzi"}, "reply_to_user": {"reputation": 2987, "user_id": 482425, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8128e22eb5f48bab391841dcd80b399d?s=128&d=identicon&r=PG", "display_name": "Hoopes", "link": "https://stackoverflow.com/users/482425/hoopes"}, "edited": false, "score": 0, "creation_date": 1576163442, "post_id": 59305150, "comment_id": 104817274, "body": "But it doesn&#39;t crash. Note: I&#39;m not sure if there are testable differences (with outputs), of just <code>C.utf-8</code> includes <code>en-US.utf-8</code>. [Python 3.7.3 here, with ` LC_ALL=&#39;C.utf8&#39; python3 /tmp/b.py`]"}, {"owner": {"reputation": 696, "user_id": 3700414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/280cc7f614a4aba6211500b20f87064a?s=128&d=identicon&r=PG&f=1", "display_name": "Rusi", "link": "https://stackoverflow.com/users/3700414/rusi"}, "edited": false, "score": 0, "creation_date": 1578673620, "post_id": 59305150, "comment_id": 105527797, "body": "Well whether the bug is python, debian, docker or libc is arguable. C.UTF-8 sure is a bug-magnet \u2014 see my answer below, particularly the Haskell and Redhat bug-reports."}, {"owner": {"reputation": 5450, "user_id": 2758823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Nxaq.jpg?s=128&g=1", "display_name": "Giacomo Catenazzi", "link": "https://stackoverflow.com/users/2758823/giacomo-catenazzi"}, "reply_to_user": {"reputation": 696, "user_id": 3700414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/280cc7f614a4aba6211500b20f87064a?s=128&d=identicon&r=PG&f=1", "display_name": "Rusi", "link": "https://stackoverflow.com/users/3700414/rusi"}, "edited": false, "score": 0, "creation_date": 1578730572, "post_id": 59305150, "comment_id": 105541120, "body": "@Rusi: but your answer is not an answer. <code>C.UTF-8</code> may be bad (but I looked the std and it should be correct, also because the two parts are different: one about how program should prepare things [user dependent], the second how to display [terminal dependent]. But the problem here is that the OP used the wrong function: he asked a string for locale which cannot be used to set locale. The string is an interpretation of locale string (useful for other purpose), but it is not a system locale, so it cannot be used safely. <code>C.UTF-8</code> is one case, but there are much more [locale semantic is complex]"}], "tags": [], "owner": {"reputation": 5450, "user_id": 2758823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Nxaq.jpg?s=128&g=1", "display_name": "Giacomo Catenazzi", "link": "https://stackoverflow.com/users/2758823/giacomo-catenazzi"}, "is_accepted": false, "score": 1, "last_activity_date": 1576155498, "creation_date": 1576155498, "answer_id": 59305150, "question_id": 59295250, "link": "https://stackoverflow.com/questions/59295250/python-default-locale-unsupported-locale-setting/59305150#59305150", "title": "Python default locale (unsupported locale setting)", "body": "<p>For the first part: Does it matter? As far I know, I never see differences until you call <code>setlocale()</code>, so we are on the second part:</p>\n\n<p>You should use:</p>\n\n<pre><code>import locale\ncurr = locale.getdefaultlocale()\nlocale.setlocale(locale.LC_ALL, curr)\n</code></pre>\n\n<p>so <code>getdefaultlocale()</code> and not just <code>getlocale()</code>.  I also do not fully understand the reason to have both.  Is it possible that it is a Python bug that fail to recognize <code>C.xxx</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 137098, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1578737652, "post_id": 59676852, "comment_id": 105542311, "body": "<code>en_DK</code> Is a crazy aberration which would perhaps be defensible if <i>it</i> was available everywhere by default; but, alas, it is not. Also IIRC it has less than ideal values for dates and currency. Perhaps see also <a href=\"https://unix.stackexchange.com/questions/62316/why-is-there-no-euro-english-locale\" title=\"why is there no euro english locale\">unix.stackexchange.com/questions/62316/&hellip;</a>"}, {"owner": {"reputation": 696, "user_id": 3700414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/280cc7f614a4aba6211500b20f87064a?s=128&d=identicon&r=PG&f=1", "display_name": "Rusi", "link": "https://stackoverflow.com/users/3700414/rusi"}, "reply_to_user": {"reputation": 137098, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 1, "creation_date": 1578763504, "post_id": 59676852, "comment_id": 105548349, "body": "@tripleee I&#39;ve weakened the en_DK reference. Can remove it if you prefer (It&#39;s hardly relevant to the q or a!)"}], "tags": [], "owner": {"reputation": 696, "user_id": 3700414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/280cc7f614a4aba6211500b20f87064a?s=128&d=identicon&r=PG&f=1", "display_name": "Rusi", "link": "https://stackoverflow.com/users/3700414/rusi"}, "is_accepted": false, "score": 0, "last_activity_date": 1578764030, "last_edit_date": 1592644375, "creation_date": 1578639679, "answer_id": 59676852, "question_id": 59295250, "link": "https://stackoverflow.com/questions/59295250/python-default-locale-unsupported-locale-setting/59676852#59676852", "title": "Python default locale (unsupported locale setting)", "body": "<h1>C.UTF-8 \u2014 A recent non-portable debianism</h1>\n<p>The <em>intention</em> of C.UTF-8 is good but the <em>implementation</em> not quite yet. For now avoid till it stabilizes.</p>\n<h2>Some discussion of context</h2>\n<p>A <a href=\"https://bugzilla.redhat.com/show_bug.cgi?id=902094\" rel=\"nofollow noreferrer\">redhat</a> discussion around including it. Which means it's not quite there (at time of writing at least). Note particularly, Nick Coghlan, a core python-dev, suggests that python doesn't get locales right in some contexts like this one.</p>\n<p>A <a href=\"https://github.com/commercialhaskell/stack/issues/856\" rel=\"nofollow noreferrer\">haskell</a> discussion showing that portable cross-platform stuff \u2014 in this case haskell-stack but by implication also docker \u2014 becomes harder and less reliable with C.UTF-8 usage.</p>\n<h2>The Intention</h2>\n<p><a href=\"https://bugs.debian.org/cgi-bin/%3Ca%20href=%22bugreport.cgi?bug=636086%22%3E636086%3C/a%3E\" rel=\"nofollow noreferrer\">Debian</a> (<a href=\"https://web.open-infrastructure.net/software/locales-c.utf-8/\" rel=\"nofollow noreferrer\">also</a>) initiated C.UTF-8 and the intention is correct.</p>\n<p>Today's Linux systems are intensively localized \u2014 a slew of locales, fine-grained choice of LC_* choices etc etc. But all this is not on by default: if the locale system is broken the system is broken. The reason a broken locale-system is not as drastic in effects as say a broken kernel or fstab or grub etc is...</p>\n<h2>The C locale</h2>\n<p>The <a href=\"https://docs.oracle.com/cd/E36784_01/html/E36823/glmar.html\" rel=\"nofollow noreferrer\">C locale</a> (synonym POSIX) is guaranteed to always be available as a fallback if other things break. So for example you won't see localized errors but English \u2014 not mojibake or empty rectangles or question-marks!</p>\n<p>By and large you get these kind of <a href=\"https://askubuntu.com/q/162391/358822\">warnings</a> <em>not errors</em> and otherwise things keep working.</p>\n<p>But C = POSIX implies the legacy ASCII not <a href=\"http://utf8everywhere.org/\" rel=\"nofollow noreferrer\">UTF-8 everywhere</a> \u2014 an undesired side-effect of legacy.</p>\n<p>Towards making that legacy less and less necessary even as a fallback, Debian introduced the always available C.UTF-8 locale.</p>\n<p>The catch? It's always available...</p>\n<h2>Only in Debian</h2>\n<p>Which means <em>recent</em> Debian, derivatives like Ubuntu also recent. But not (yet) other systems.</p>\n<p>In short C.UTF-8 is not universal, not portable, fragile and therefore avoidable... at least for now, at least on client-server, virtualized (containerized) etc systems like docker. The....</p>\n<h2>Practical Upshot</h2>\n<p>You need to <strong>explicitly</strong> install old-fashioned locales like en_US.UTF-8. (People wanting a reasonable international English locale and not wanting en_US may wish to check out <a href=\"http://www.ivoras.net/blog/tree/2010-12-20.the-wonderful-en_dk-locale.html\" rel=\"nofollow noreferrer\">en_DK.UTF-8</a>).</p>\n<p>Yeah that involves some amount of</p>\n<h1>Getting your hands dirty</h1>\n<p>Here is a collection of references on docker oriented locale setup</p>\n<ul>\n<li><p><a href=\"https://askubuntu.com/questions/581458/how-to-configure-locales-to-unicode-in-a-docker-ubuntu-14-04-container/582197\">Docker not quite a desktop</a></p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/28405902/how-to-set-the-locale-inside-a-debian-ubuntu-docker-container\">Various suggestions</a></p>\n</li>\n<li><p><a href=\"https://serverfault.com/a/662037/554579\">Debian</a></p>\n</li>\n<li><p><a href=\"https://unix.stackexchange.com/a/247019/323121\">Locales: Ubuntu vs Debian</a></p>\n</li>\n</ul>\n<p>I don't approve of one anti-pattern that repeats in the above but\nIt's going too far afield (from this question) to expand on this, so in v short:</p>\n<p>Setting locale should usually <strong>only</strong> involve setting <code>LANG</code>.  Setting <code>LC_ALL</code> ,  especially along with <code>LANG</code> is a no-no.</p>\n<p>From <a href=\"https://wiki.debian.org/Locale#Configuration\" rel=\"nofollow noreferrer\">Debian wiki</a></p>\n<blockquote>\n<p>\u26a0\ufe0f      <strong>WARNING</strong></p>\n<p>Using LC_ALL is strongly discouraged as it overrides everything. Please use it only when testing and never set it in a startup file.</p>\n</blockquote>\n"}], "owner": {"reputation": 2987, "user_id": 482425, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8128e22eb5f48bab391841dcd80b399d?s=128&d=identicon&r=PG", "display_name": "Hoopes", "link": "https://stackoverflow.com/users/482425/hoopes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 967, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1578764030, "creation_date": 1576104197, "last_edit_date": 1576105034, "question_id": 59295250, "link": "https://stackoverflow.com/questions/59295250/python-default-locale-unsupported-locale-setting", "title": "Python default locale (unsupported locale setting)", "body": "<p>This seems like a weird problem, and it's causing my some heartburn, because i'm using a library that stashes the current locale, and tries to set it back to what it stashed.</p>\n\n<pre><code>$ docker run --rm -it python:3.6 bash\nroot@bcee8785c2e1:/# locale\nLANG=C.UTF-8\nLANGUAGE=\nLC_CTYPE=\"C.UTF-8\"\nLC_NUMERIC=\"C.UTF-8\"\nLC_TIME=\"C.UTF-8\"\nLC_COLLATE=\"C.UTF-8\"\nLC_MONETARY=\"C.UTF-8\"\nLC_MESSAGES=\"C.UTF-8\"\nLC_PAPER=\"C.UTF-8\"\nLC_NAME=\"C.UTF-8\"\nLC_ADDRESS=\"C.UTF-8\"\nLC_TELEPHONE=\"C.UTF-8\"\nLC_MEASUREMENT=\"C.UTF-8\"\nLC_IDENTIFICATION=\"C.UTF-8\"\nLC_ALL=\n</code></pre>\n\n<pre><code>root@bcee8785c2e1:/# locale -a\nC\nC.UTF-8\nPOSIX\n</code></pre>\n\n<pre><code>root@bcee8785c2e1:/# python\nPython 3.6.9 (default, Jul 13 2019, 14:51:44) \n[GCC 8.3.0] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import locale\n&gt;&gt;&gt; curr = locale.getlocale()\n&gt;&gt;&gt; curr\n('en_US', 'UTF-8')\n&gt;&gt;&gt; locale.setlocale(locale.LC_ALL, curr)\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"/usr/local/lib/python3.6/locale.py\", line 598, in setlocale\n    return _setlocale(category, locale)\nlocale.Error: unsupported locale setting\n&gt;&gt;&gt;\n</code></pre>\n\n<p>I'm not sure why <code>getlocale</code> is returning <code>en_US</code>? It's not anywhere in my environment vars (and I'm not sure where else it could be in my shell?). </p>\n\n<p>In any case, I can't <code>setlocale</code> with the value from <code>getlocale</code>, which seems weird to me.</p>\n\n<p>Does anyone have any guidance here? </p>\n\n<p>Much appreciated!</p>\n"}, {"tags": ["python", "python-3.x", "dictionary"], "comments": [{"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1576103831, "post_id": 59295157, "comment_id": 104794702, "body": "<code>if (i in d1) and (i in d2):</code>. What is wrong with the code you have provided?"}], "answers": [{"comments": [{"owner": {"reputation": 1021, "user_id": 1733823, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a76ed49769b056df6083cf7c93fbd2e6?s=128&d=identicon&r=PG", "display_name": "Afaq", "link": "https://stackoverflow.com/users/1733823/afaq"}, "edited": false, "score": 0, "creation_date": 1576104260, "post_id": 59295190, "comment_id": 104794832, "body": "The defaults can be set to 0 if we don&#39;t want the key to be present in final dictionary if not present in both dictionaries."}, {"owner": {"reputation": 30153, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "edited": false, "score": 0, "creation_date": 1576104369, "post_id": 59295190, "comment_id": 104794861, "body": "If you want only keys present in both dictionaries, use the intersection: <code>{ k: d1[k] * d2[k] for k in d1.keys() &amp; d2.keys() }</code>. Using a default of 0 would make those keys present with a value of 0."}], "tags": [], "owner": {"reputation": 30153, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "is_accepted": false, "score": 6, "last_activity_date": 1576103876, "creation_date": 1576103876, "answer_id": 59295190, "question_id": 59295157, "link": "https://stackoverflow.com/questions/59295157/can-you-multiply-two-separate-dictionaries-of-different-lengths-together-to-crea/59295190#59295190", "title": "Can you multiply two separate dictionaries of different lengths together to create a third?", "body": "<p>One way to do this is using a dict comprehension over the union of the sets of keys, using <code>get</code> with a default of 1 for the multiplication:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; { k: d1.get(k, 1) * d2.get(k, 1) for k in d1.keys() | d2.keys() }\n{'pears': 10, 'bananas': 32, 'oranges': 18, 'apples': 8}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 30153, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "edited": false, "score": 0, "creation_date": 1576104480, "post_id": 59295260, "comment_id": 104794901, "body": "I like this solution, +1. As a certified nitpicker I have to point out that this isn&#39;t technically in-place, since it does create a new data structure and the changes aren&#39;t visible via other references to the original dictionary."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 30153, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "edited": false, "score": 1, "creation_date": 1576104615, "post_id": 59295260, "comment_id": 104794936, "body": "@kaya3 Sure! the <code>defaultdict(lambda : 1, d1)</code> can be reassigned to something different."}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": false, "score": 3, "last_activity_date": 1576104247, "creation_date": 1576104247, "answer_id": 59295260, "question_id": 59295157, "link": "https://stackoverflow.com/questions/59295157/can-you-multiply-two-separate-dictionaries-of-different-lengths-together-to-crea/59295260#59295260", "title": "Can you multiply two separate dictionaries of different lengths together to create a third?", "body": "<p>How about a <code>defaultdict</code> solution? This updates one of the dictionaries in-place.</p>\n\n<pre><code>from collections import defaultdict\n\nd1 = defaultdict(lambda : 1, d1)\nfor k in d2:\n    d1[k] *= d2[k]\n</code></pre>\n\n<p></p>\n\n<pre><code>dict(d1)\n# {'apples': 8, 'bananas': 32, 'oranges': 18, 'pears': 10}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6295, "user_id": 11938023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca4cf2bdd1880354bec8cbcd73f8189?s=128&d=identicon&r=PG&f=1", "display_name": "oppressionslayer", "link": "https://stackoverflow.com/users/11938023/oppressionslayer"}, "is_accepted": false, "score": 0, "last_activity_date": 1576105462, "creation_date": 1576105462, "answer_id": 59295449, "question_id": 59295157, "link": "https://stackoverflow.com/questions/59295157/can-you-multiply-two-separate-dictionaries-of-different-lengths-together-to-crea/59295449#59295449", "title": "Can you multiply two separate dictionaries of different lengths together to create a third?", "body": "<p>Here's a pandas one liner:</p>\n\n<pre><code>import pandas as pd\npd.merge(pd.DataFrame(d1,[0]),pd.DataFrame(d2,[0]), 'outer').fillna(1).astype(int).groupby(np.arange(len(df))//2).cumprod().drop(0).to_dict(orient='records')[0]  \n\n# {'apples': 8, 'oranges': 18, 'bananas': 32, 'pears': 10}\n</code></pre>\n"}], "owner": {"reputation": 249, "user_id": 3637405, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/9f6344055cff36934b57af7b8c9875cc?s=128&d=identicon&r=PG&f=1", "display_name": "UserBRy", "link": "https://stackoverflow.com/users/3637405/userbry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1576105462, "creation_date": 1576103666, "last_edit_date": 1576104326, "question_id": 59295157, "link": "https://stackoverflow.com/questions/59295157/can-you-multiply-two-separate-dictionaries-of-different-lengths-together-to-crea", "title": "Can you multiply two separate dictionaries of different lengths together to create a third?", "body": "<p>Is it possible two multiply two separate dictionaries to update the the first / create a third?</p>\n\n<p>Something like...</p>\n\n<pre><code>d1 = {'apples':2, 'oranges':3, 'bananas':4}\nd2 = {'apples':4, 'oranges':6, 'bananas':8, 'pears':10}\nupdate_d1 = {}\n\nfor i in d1:\n    update_d1[i] = d1[i] * d2[i]\n\nprint(update_d1)\n</code></pre>\n"}, {"tags": ["python", "loops", "for-loop", "pyqt", "pyqt5"], "comments": [{"owner": {"reputation": 196, "user_id": 12513994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5db57ea76f9f18ddbd7e2defae26eca?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Habel", "link": "https://stackoverflow.com/users/12513994/joe-habel"}, "edited": false, "score": 0, "creation_date": 1576105050, "post_id": 59295132, "comment_id": 104795068, "body": "If you want to see the AI vs AI results, why even have the overhead of spawning a Qt App at all? Why not just isolate the AI game logic and observe that? The only reason I imagine it would be worth the resources to generate a GUI like this is to be able to have human interaction."}, {"owner": {"reputation": 73, "user_id": 8929855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb7fef37c673b1fef141da7646bc6987?s=128&d=identicon&r=PG&f=1", "display_name": "Ignacio", "link": "https://stackoverflow.com/users/8929855/ignacio"}, "reply_to_user": {"reputation": 196, "user_id": 12513994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5db57ea76f9f18ddbd7e2defae26eca?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Habel", "link": "https://stackoverflow.com/users/12513994/joe-habel"}, "edited": false, "score": 0, "creation_date": 1576157674, "post_id": 59295132, "comment_id": 104813781, "body": "@JoeHabel Currently the logic is intertwined with PyQt objects. For example, it is the class &#39;tile&#39; that stores its own game data on whether it&#39;s been hit already/has a boat/boat is hit/boat is sunk etc. I agree that it would be possible to use a list of lists / numpy array as a board and test the AI separately, but this comes at the expense of re-creating the game logic without PyQt. I&#39;d be interested to avoid this"}], "answers": [{"comments": [{"owner": {"reputation": 196, "user_id": 12513994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5db57ea76f9f18ddbd7e2defae26eca?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Habel", "link": "https://stackoverflow.com/users/12513994/joe-habel"}, "edited": false, "score": 0, "creation_date": 1576105463, "post_id": 59295363, "comment_id": 104795191, "body": "Just a couple of notes on using multiprocessing, if you&#39;re using Windows, which based on your screenshot looks like the case, you might need to make use of multiprocessing&#39;s freeze_support (I know I had to back when I was using Windows, but it&#39;s been a while, so I&#39;m not sure what&#39;s changed). This is as simple as adding the following import <code>from multiprocessing import freeze_support</code>, and then above the <code>main()</code> call, adding a <code>freeze_support()</code> call. Also note, that the number of processes in the <code>Pool(processes=8)</code>, depends on your available cpu cores."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 196, "user_id": 12513994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5db57ea76f9f18ddbd7e2defae26eca?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Habel", "link": "https://stackoverflow.com/users/12513994/joe-habel"}, "edited": false, "score": 2, "creation_date": 1576105857, "post_id": 59295363, "comment_id": 104795318, "body": "@JoeHabel Thanks for the information, mmm, the screenshot is not mine (I hate Windows, I am Linux lover), on the other hand my answer does not try to explain the limitations of the implementation of multiprocessing in each OS, it is only an attempt of a basic approach because if I wanted to do what seems like you are trying to get a problem: the small space provided by SO is not suitable for this unless a precise question is asked."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 196, "user_id": 12513994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5db57ea76f9f18ddbd7e2defae26eca?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Habel", "link": "https://stackoverflow.com/users/12513994/joe-habel"}, "edited": false, "score": 1, "creation_date": 1576105863, "post_id": 59295363, "comment_id": 104795321, "body": "@JoeHabel  I know the points that you point out but my little explanation of the limitations is intentional for the OP to investigate. I think the comment you should point to the OP."}, {"owner": {"reputation": 196, "user_id": 12513994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5db57ea76f9f18ddbd7e2defae26eca?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Habel", "link": "https://stackoverflow.com/users/12513994/joe-habel"}, "edited": false, "score": 0, "creation_date": 1576106663, "post_id": 59295363, "comment_id": 104795533, "body": "You&#39;re right, that comment wasn&#39;t meant to be directed towards you but rather @AverageBoy. I just saw the OP&#39;s Windows screenshot, and had flashbacks to the horrors of Windows and multiprocessing."}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": false, "score": 2, "last_activity_date": 1576104867, "creation_date": 1576104867, "answer_id": 59295363, "question_id": 59295132, "link": "https://stackoverflow.com/questions/59295132/running-and-exiting-pyqt-application-multiple-times/59295363#59295363", "title": "Running and exiting PyQt application multiple times", "body": "<p>You should not use <code>sys.exit()</code> since that instruction serves to terminate the execution of the program, if you want to terminate the Qt application you must use <code>QCoreApplication::quit()</code> (or <code>QCoreApplication::exit(0)</code>). In addition, another improvement would be to use multiprocessing:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import random\nfrom multiprocessing import Pool\n\nfrom PyQt5 import QtCore, QtWidgets\n\n\ndef create_app(i):\n    app = QtWidgets.QApplication([])\n    w = QtWidgets.QMainWindow()\n    w.setWindowTitle(\"Game-{}\".format(i))\n    w.show()\n\n    # emulate end-game\n    def end_game():\n        QtCore.QCoreApplication.quit()\n\n    timeout = random.randint(1000, 2000)  # 1000-2000 milliseconds\n    QtCore.QTimer.singleShot(timeout, end_game)\n    app.exec_()\n\n    # emulate results\n    o = {\"victory\": random.randint(0, 101), \"average\": random.randint(0, 101)}\n    return o\n\n\ndef main():\n    results = []\n    pool = Pool(processes=8)\n    for i in range(1000):\n        r = pool.apply_async(create_app, args=(i,))\n        results.append(r)\n    pool.close()\n    pool.join()\n    print([result.get() for result in results])\n\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18847, "user_id": 2001654, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/yERLj.jpg?s=128&g=1", "display_name": "musicamante", "link": "https://stackoverflow.com/users/2001654/musicamante"}, "is_accepted": false, "score": 0, "last_activity_date": 1576111711, "creation_date": 1576111711, "answer_id": 59296183, "question_id": 59295132, "link": "https://stackoverflow.com/questions/59295132/running-and-exiting-pyqt-application-multiple-times/59296183#59296183", "title": "Running and exiting PyQt application multiple times", "body": "<p>I've to tell you, your question is dangerously near the level of a \"too-broad\" flag. The real problem is: how do you want to keep track of the gathered data, and what do you want to do with that data? This question may have <em>a lot</em> of answers.</p>\n\n<p>As you already found out, you can't use <code>sys.exit</code>, but you could gather your data in different ways.<br>\nIf you're going to run your application within a controlled environment, a possible solution is to serialize your gathered data while controlling the whole \"gathering\" process from the application</p>\n\n<p>Semi-pseudo-code:</p>\n\n<pre><code>from PyQt5 import QtCore, QtWidgets\nimport json\n\nclass BattleShipWindow(QtWidgets.QMainWindow):\n    restart = QtCore.pyqtSignal()\n\n    # ...\n\n    def storeData(self, data):\n        # get the app data location\n        appDir = QtWidgets.QStandardPath.standardLocations(\n            QtCore.QStandardaPaths.AppDataLocation)[0]\n        # if it doesn't exists, create it\n        if not QtCore.QFile.exists(appDir):\n            QtCore.QDir().mkpath(appDir)\n        now = QtCore.QDateTime.currentDateTime()\n        fileName = str(now.toMSecsSinceEpoch() // 1000)\n        # write down the data\n        with open(os.path.join(appDir, fileName), 'w') as df:\n            df.write(json.dumps(data))\n\n    def getGameData(self):\n        # gather your own data here, this is just an example\n        return {'gameData': [1, 2, 3]}\n\n    def closeEvent(self, event):\n        if QtWidgets.QMessageBox.question(\n            self, 'Play again?',\n            'Play another game?', \n            QtWidgets.QMessageBox.Yes|QtWidgets.QMessageBox.No\n            ) == QtWidgets.QMessageBox.Yes:\n                self.storeData(self.getGameData())\n                self.restart.emit()\n\n\nclass BattleShipApp(QtWidgets.QApplication):\n    def restart(self):\n        self.currentGame = BattleShipWindow()\n        self.currentGame.restart.connect(self.restart)\n        self.currentGame.show()\n\n    def exec_(self):\n        self.currentGame = BattleShipWindow()\n        self.currentGame.restart.connect(self.restart)\n        self.currentGame.show()\n        super(BattleShipApp, self).exec_()\n\n\nif __name__ == '__main__':\n    import sys\n    app = BattleShipApp(sys.argv)\n    sys.exit(app.exec_())\n\n</code></pre>\n\n<p>Note: this is a [semi]pseudo code, I obviously didn't test it. Its purpose is to show how it could behave, so don't expect it to work as it is.</p>\n"}], "owner": {"reputation": 73, "user_id": 8929855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb7fef37c673b1fef141da7646bc6987?s=128&d=identicon&r=PG&f=1", "display_name": "Ignacio", "link": "https://stackoverflow.com/users/8929855/ignacio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1576111711, "creation_date": 1576103552, "question_id": 59295132, "link": "https://stackoverflow.com/questions/59295132/running-and-exiting-pyqt-application-multiple-times", "title": "Running and exiting PyQt application multiple times", "body": "<h2>The context</h2>\n\n<p>I am creating my own version of the board game <a href=\"https://en.wikipedia.org/wiki/Battleship_(game)\" rel=\"nofollow noreferrer\">Battleship</a> using PyQt. A PyQt main window contains both own and enemy boards. Boards are made up of clickable tiles that players 'fire at'. The implementation supports HUMANvsAI and AIvsAI games. I would like to test the strength of my AI algorithms through simulation. For example, I would like to run in a loop 1,000 AIvsAI games and get stats on % victory, average accuracy, etc. <a href=\"https://i.stack.imgur.com/2aeEJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2aeEJ.png\" alt=\"Screenshot of the game\"></a></p>\n\n<h2>The main issue</h2>\n\n<p>I am struggling to run the PyQt app multiple times to gather game data, e.g. in a for loop. Specifically, I cannot find a way to run the application, exit it, and re-run it again. Conceptually speaking I am looking for something like this:</p>\n\n<blockquote>\n<pre><code># conceptual snippet\n  for i in range(n):\n    app = QApplication([])\n    window = MainWindow(b_size, boat_dict, players)\n    app.exec_()\n</code></pre>\n</blockquote>\n\n<p>With the call to exit the app somewhere else and called each time the game is over:</p>\n\n<blockquote>\n<pre><code># conceptual snippet\n  if is_game_over():\n    sys.exit(app.exec_())\n</code></pre>\n</blockquote>\n\n<p>But this simple solution breaks the for loop. Any feedback would be welcome on how to run and exit a PyQt application multiple times, either sequentially (e.g. for loop approach) or in parallel threads.</p>\n"}, {"tags": ["python", "csv", "apache-spark", "pyspark"], "comments": [{"owner": {"reputation": 445, "user_id": 2569634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fd183ecf48e0f763352b323f29651d4?s=128&d=identicon&r=PG", "display_name": "Seb", "link": "https://stackoverflow.com/users/2569634/seb"}, "edited": false, "score": 4, "creation_date": 1576105337, "post_id": 59295127, "comment_id": 104795151, "body": "why not use spark&#39;s builtin CSV reader: <a href=\"https://spark.apache.org/docs/2.4.4/api/python/pyspark.sql.html#pyspark.sql.DataFrameReader.csv\" rel=\"nofollow noreferrer\">spark.apache.org/docs/2.4.4/api/python/&hellip;</a>."}, {"owner": {"reputation": 907, "user_id": 1558604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b97af9fb78006cf022f9e60b0d9b428?s=128&d=identicon&r=PG", "display_name": "user1558604", "link": "https://stackoverflow.com/users/1558604/user1558604"}, "edited": false, "score": 1, "creation_date": 1576106828, "post_id": 59295127, "comment_id": 104795579, "body": "There may be issues since you are splitting on <code>,</code>, and there are <code>,</code> in your description."}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "reply_to_user": {"reputation": 445, "user_id": 2569634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fd183ecf48e0f763352b323f29651d4?s=128&d=identicon&r=PG", "display_name": "Seb", "link": "https://stackoverflow.com/users/2569634/seb"}, "edited": false, "score": 0, "creation_date": 1576113809, "post_id": 59295127, "comment_id": 104797067, "body": "I agree with @DrChess, why not use a proper csv library for this?"}], "answers": [{"tags": [], "owner": {"reputation": 657, "user_id": 10729035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a6071d250c633a1411b8fdffdde5d9?s=128&d=identicon&r=PG&f=1", "display_name": "Kumar", "link": "https://stackoverflow.com/users/10729035/kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1576120275, "creation_date": 1576120275, "answer_id": 59297178, "question_id": 59295127, "link": "https://stackoverflow.com/questions/59295127/splitting-fields-from-a-csv-file-using-pyspark/59297178#59297178", "title": "Splitting fields from a CSV file using pyspark", "body": "<p>I would recommend using Spark built-in CSV data source as it provides many options including <strong>quotes</strong> which is used to read delimiter from columns, Ofcourse the column with delimiter should have quoted with some character. </p>\n\n<p><strong>quotes</strong></p>\n\n<p>When you have a column with a delimiter that used to split the columns, use quotes option to specify the quote character, by default it is \u201d and delimiters inside quotes are ignored. but using this option you can set any character.</p>\n\n<p>If you wanted to read other options Spark CSV provides along with examples, I would suggest reading the following articles.</p>\n\n<p><a href=\"https://sparkbyexamples.com/spark/spark-read-csv-file-into-dataframe/\" rel=\"nofollow noreferrer\">spark-read-csv-file-into-dataframe</a></p>\n\n<p><a href=\"https://docs.databricks.com/data/data-sources/read-csv.html\" rel=\"nofollow noreferrer\">read-csv</a></p>\n\n<p>Happy Learning !!</p>\n"}, {"tags": [], "owner": {"reputation": 96, "user_id": 6505742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3962e339abc0fc9c6f16ec95f5c8cb82?s=128&d=identicon&r=PG&f=1", "display_name": "roizaig", "link": "https://stackoverflow.com/users/6505742/roizaig"}, "is_accepted": false, "score": 0, "last_activity_date": 1576398303, "creation_date": 1576398303, "answer_id": 59342292, "question_id": 59295127, "link": "https://stackoverflow.com/questions/59295127/splitting-fields-from-a-csv-file-using-pyspark/59342292#59342292", "title": "Splitting fields from a CSV file using pyspark", "body": "<p>See this code:</p>\n\n<pre><code>df = spark.read\\\n    .csv('data.csv')\n\ndf.printSchema()\ndf.show()\n</code></pre>\n\n<p>The resulting df is a DataFrame with the columns just like the CSV.\nSee more advance features <a href=\"https://roizaig.blogspot.com/2019/10/spark-read-csv-file.html\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 57, "user_id": 12521267, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAK5PjrD-DZgIeguVqYsBTziagqzAd_v9HA8ITb=k-s128", "display_name": "Luis Guillermo", "link": "https://stackoverflow.com/users/12521267/luis-guillermo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 299, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1576398303, "creation_date": 1576103543, "last_edit_date": 1592644375, "question_id": 59295127, "link": "https://stackoverflow.com/questions/59295127/splitting-fields-from-a-csv-file-using-pyspark", "title": "Splitting fields from a CSV file using pyspark", "body": "<p>I'm having issues splitting a CSV file through PySpark. I'm trying to output the country and name of the wine (this is just to prove the parsing is working), but I get an error.</p>\n<p>This is how the CSV file looks:</p>\n<blockquote>\n<p>,country,description,designation,points,price,province,region_1,region_2,variety,winery</p>\n<p>20,US,&quot;Heitz has made this stellar ros\u00e9 from the rare Grignolino grape since 1961. Ruby grapefruit-red, it's sultry with strawberry, watermelon, orange zest and salty spice flavor, highlighted with vibrant floral aromas.&quot;,Grignolino,95,24.0,California,Napa Valley,Napa,Ros\u00e9,Heitz</p>\n</blockquote>\n<p>and here is my code</p>\n<pre><code>from pyspark import SparkConf, SparkContext\n\nconf = SparkConf().setMaster(&quot;local&quot;).setAppName(&quot;SQLProject&quot;)\nsc = SparkContext(conf = conf)\n\n\ndef parseLine(line):\n    fields = line.split(',')\n    country = fields[1]\n    points = fields[4]\n    return country, points\n\n\nlines = sc.textFile(&quot;file:///Users/luisguillermo/IE/Spark/Final Project/wine-reviews/winemag-data-130k-v2.csv&quot;)\nrdd = lines.map(parseLine)\n\nresults = rdd.collect()\n\nfor result in results:\n    print(result)\n</code></pre>\n<p>And get this error:</p>\n<pre><code>  File &quot;/Users/luisguillermo/IE/Spark/Final Project/wine-reviews/country_and_points.py&quot;, line 10, in parseLine\n    points = fields[4]\nIndexError: list index out of range\n</code></pre>\n<p>It appears that the program gets confused as there are commas in the description. Any ideas on how to fix this?</p>\n"}, {"tags": ["python", "opencv", "video", "video-processing"], "answers": [{"tags": [], "owner": {"reputation": 106, "user_id": 8716910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a0566fa46ae6a918a111f405e151df3?s=128&d=identicon&r=PG&f=1", "display_name": "NoodleBeard", "link": "https://stackoverflow.com/users/8716910/noodlebeard"}, "is_accepted": true, "score": 1, "last_activity_date": 1576104123, "creation_date": 1576104123, "answer_id": 59295233, "question_id": 59295112, "link": "https://stackoverflow.com/questions/59295112/how-does-fps-affect-on-video-processing/59295233#59295233", "title": "how does FPS affect on video processing", "body": "<p>File size is indeed affected by the frame rate. The higher the frame rate the more images that are packed into each second of video, so the file size goes up. More images is more data which also means higher processing times as well.</p>\n\n<p>The standard fps used for tv is 30 or 29.97 fps. Cinematic standards are 24 or 23.97 fps. If I were recording a video game I would want to keep that at least in the 30 fps range but 60 would be better. Depending on the source though.</p>\n\n<p>This is tough to answer because the answer really depends on the video source. You should try and stay true to that if you can to maintain the same quality and user experience of the original. Doing 24 or 30 if you are not sure what the source is should be fine.</p>\n\n<p>Reducing the frame rate for your videos from whatever they defaulted to can affect them greatly. Anything from how smooth the video plays to the style you are going for.</p>\n"}], "owner": {"reputation": 35, "user_id": 9940788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66a1ce07703984ec33c90c0bda37c654?s=128&d=identicon&r=PG", "display_name": "user184551", "link": "https://stackoverflow.com/users/9940788/user184551"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 2, "accepted_answer_id": 59295233, "answer_count": 1, "score": -1, "last_activity_date": 1576104123, "creation_date": 1576103482, "question_id": 59295112, "link": "https://stackoverflow.com/questions/59295112/how-does-fps-affect-on-video-processing", "title": "how does FPS affect on video processing", "body": "<p>I am new to video processing. I am using Opencv and python to process videos and save them. \nfor saving a video I used this line of code:</p>\n\n<pre><code>out = cv2.VideoWriter(name,fourcc, 20,(320,180),False)\n</code></pre>\n\n<p>this code gives me a 20 fps output, My question how fps parameter affects on video processing and what is important to know about it?\nIs it about the size of output or what?\nThanks</p>\n"}, {"tags": ["python", "asynchronous", "ffmpeg", "subprocess", "python-3.6"], "comments": [{"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576114090, "post_id": 59295101, "comment_id": 104797122, "body": "Can you share the part of your code which calls this function? See: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 1, "user_id": 8927760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/394ae6c7baa561320e06ab6d47ecdf7f?s=128&d=identicon&r=PG&f=1", "display_name": "almosthero", "link": "https://stackoverflow.com/users/8927760/almosthero"}, "reply_to_user": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576148029, "post_id": 59295101, "comment_id": 104808639, "body": "I added full sequence to show the async part, maybe it&#39;ll help"}], "owner": {"reputation": 1, "user_id": 8927760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/394ae6c7baa561320e06ab6d47ecdf7f?s=128&d=identicon&r=PG&f=1", "display_name": "almosthero", "link": "https://stackoverflow.com/users/8927760/almosthero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1576146747, "creation_date": 1576103430, "last_edit_date": 1576146747, "question_id": 59295101, "link": "https://stackoverflow.com/questions/59295101/ffmpeg-as-subprocess-takes-too-long", "title": "ffmpeg as subprocess takes too long", "body": "<p>One part of my program requires FFMPEG to transcode files using GPU.</p>\n\n<p>When I execute the FFMPEG command alone in terminal, without Python, it takes aproximetly 0.7 second. Running 50 simultaneous commands doesn't affect the results. The time is always around 0.7 sec (thanks to a powerful GPU that can handle that amount of requests).</p>\n\n<p>Putting this command to subprocess increases the time to 1.7 second and raises up to 20 seconds when I run multiple instance even though this command should work asynchronously.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def run_ffmpeg(filename, gop, representation, output_filename=None):\n    process_result = subprocess.run(\n        args=[\n            'sudo', FFMPEG_PATH,\n            '-vsync', '0',\n            '-hwaccel', 'cuvid', # transport decoded file through GPU without touching CPU\n            '-hwaccel_device', '0',\n            '-c:v', 'h264_cuvid', # Decoding using GPU\n            '-i', filename,\n            # ...\n            '-c:v', 'hevc_nvenc', # Encoding using GPU\n            # ...more filters...\n            output_filename\n        ]\n    )\n    log_process_result(process_result)\n    return output_filename\n</code></pre>\n\n<p>The sequence is way more complex:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def transcode_file(media_id, target_repr, target_nr):\n    # ... variables definitions\n    run_ffmpeg(target_segment_path, gop='120', representation=target_repr, output_filename=result)\n\ndef prepare_file(media_id, representation_id, file_name):\n    # ... variables definitions\n        path = transcode_file(media_id, target_repr, target_nr)\n\nasync def download_media_handler(request):\n    # ... variables definitions\n    file_info = await loop.run_in_executor(\n        executor, prepare_file, media_dir_name, representation_id, file_name)\n\n</code></pre>\n\n<p>Neither GPU or CPU is fully used so this is not the case.</p>\n\n<p>Do you know why? Does <code>subprocess</code> really takes so much time to run? </p>\n\n<p>How can I rewrite this to minimize the time? Are there any quicker alternatives?</p>\n"}, {"tags": ["python", "pandas", "dataframe", "for-loop", "request"], "comments": [{"owner": {"reputation": 1533, "user_id": 10569027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dPPb9.jpg?s=128&g=1", "display_name": "GiovaniSalazar", "link": "https://stackoverflow.com/users/10569027/giovanisalazar"}, "edited": false, "score": 0, "creation_date": 1576103563, "post_id": 59295095, "comment_id": 104794616, "body": "can you add the url complet? I mean in which case x ....101...102...?"}, {"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 2, "creation_date": 1576103569, "post_id": 59295095, "comment_id": 104794619, "body": "First of all, fix your indentation. Second, it looks like you override your file after each loop."}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576114146, "post_id": 59295095, "comment_id": 104797135, "body": "Variable and function names should follow the <code>lower_case_with_underscores</code> style."}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 12521225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4de28d7e05c061ae3ecd76d274a29d1d?s=128&d=identicon&r=PG&f=1", "display_name": "istanbul34", "link": "https://stackoverflow.com/users/12521225/istanbul34"}, "edited": false, "score": 0, "creation_date": 1576139536, "post_id": 59295164, "comment_id": 104803962, "body": "thank you vey much ,I&#39;m new to python so I&#39;m missing so much."}], "tags": [], "owner": {"reputation": 614, "user_id": 11968227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f56719c77ab7e0c014eb670e524136ee?s=128&d=identicon&r=PG&f=1", "display_name": "Denver", "link": "https://stackoverflow.com/users/11968227/denver"}, "is_accepted": true, "score": 3, "last_activity_date": 1576103688, "creation_date": 1576103688, "answer_id": 59295164, "question_id": 59295095, "link": "https://stackoverflow.com/questions/59295095/how-do-i-save-data-in-pythonpandas/59295164#59295164", "title": "How do I save data in python(pandas)", "body": "<p>You need to concatenate the data before saving. For example:</p>\n\n<pre><code>import pandas as pd\nimport requests as rq\n\ntemp = pd.DataFrame()\ndf = pd.DataFrame()\n\nfor vehicleList in range(101, 103):\n    vehicleList = vehicleList + 1\n    x = str(vehicleList)\n    r = rq.get('https://api.tfl.gov.uk/vehicle/' + x + '/arrivals')\n    r = r.text\n    temp = pd.read_json(r)\n\n    # some identifier here  \n    temp['Type'] = x\n\n    # concat\n    df = pd.concat([df, temp]).reset_index(drop=True)\n\ndf.to_csv('filename.csv')\n</code></pre>\n\n<p>You assign to a temporary DataFrame each loop <code>temp</code> and then add a unique id to denote the group <code>temp['Type']</code> and then concatenate to <code>df</code>. Once the loop is complete you save df with all iterations included.</p>\n"}], "owner": {"reputation": 93, "user_id": 12521225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4de28d7e05c061ae3ecd76d274a29d1d?s=128&d=identicon&r=PG&f=1", "display_name": "istanbul34", "link": "https://stackoverflow.com/users/12521225/istanbul34"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 471, "favorite_count": 0, "accepted_answer_id": 59295164, "answer_count": 1, "score": 1, "last_activity_date": 1576109556, "creation_date": 1576103366, "last_edit_date": 1576109556, "question_id": 59295095, "link": "https://stackoverflow.com/questions/59295095/how-do-i-save-data-in-pythonpandas", "title": "How do I save data in python(pandas)", "body": "<p>When I save the data to csv file only records with id 103 are saved and records having ids 101 and 102 are not available.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pandas as pd\nimport requests as rq\n\nfor vehicleList in range(101, 103):\n    vehicleList = vehicleList + 1\n    x = str(vehicleList)\n\n    r = rq.get('https://api.tfl.gov.uk/vehicle/' + x + '/arrivals')\n    r = r.text\n    df = pd.read_json(r)\n\n    df.to_csv('filename.csv')\n</code></pre>\n"}, {"tags": ["python", "glob"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 12348076, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-p9-0e6wk2bA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfUC6YFS2HHnii2BrFxZGQ-EZC8cQ/photo.jpg?sz=128", "display_name": "Lin Lin", "link": "https://stackoverflow.com/users/12348076/lin-lin"}, "edited": false, "score": 0, "creation_date": 1576285940, "post_id": 59295126, "comment_id": 104862244, "body": "Thanks! I didn&#39;t know this simple + before."}, {"owner": {"reputation": 25463, "user_id": 5003756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8BUMb.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/5003756/james"}, "reply_to_user": {"reputation": 5, "user_id": 12348076, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-p9-0e6wk2bA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfUC6YFS2HHnii2BrFxZGQ-EZC8cQ/photo.jpg?sz=128", "display_name": "Lin Lin", "link": "https://stackoverflow.com/users/12348076/lin-lin"}, "edited": false, "score": 0, "creation_date": 1576363302, "post_id": 59295126, "comment_id": 104877115, "body": "No problem.  Remember to mark the question as answered (the little check mark)."}], "tags": [], "owner": {"reputation": 25463, "user_id": 5003756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8BUMb.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/5003756/james"}, "is_accepted": false, "score": 0, "last_activity_date": 1576103541, "creation_date": 1576103541, "answer_id": 59295126, "question_id": 59295079, "link": "https://stackoverflow.com/questions/59295079/using-glob-to-exclude-time-series-files/59295126#59295126", "title": "using glob to exclude time series files", "body": "<p>Just add two globs together.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>files = glob.glob(mydirectory/filename-000[!1]*) + glob.glob(mydirectory/filename-0010*)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 12348076, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-p9-0e6wk2bA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfUC6YFS2HHnii2BrFxZGQ-EZC8cQ/photo.jpg?sz=128", "display_name": "Lin Lin", "link": "https://stackoverflow.com/users/12348076/lin-lin"}, "edited": false, "score": 0, "creation_date": 1576113853, "post_id": 59295161, "comment_id": 104797077, "body": "Hi, thank you very much for your solution! However, this method ???[!1]* will also get rid of the 0011 files."}, {"owner": {"reputation": 3671, "user_id": 2826937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmIdz.png?s=128&g=1", "display_name": "Alexandr Shurigin", "link": "https://stackoverflow.com/users/2826937/alexandr-shurigin"}, "reply_to_user": {"reputation": 5, "user_id": 12348076, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-p9-0e6wk2bA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfUC6YFS2HHnii2BrFxZGQ-EZC8cQ/photo.jpg?sz=128", "display_name": "Lin Lin", "link": "https://stackoverflow.com/users/12348076/lin-lin"}, "edited": false, "score": 0, "creation_date": 1576114779, "post_id": 59295161, "comment_id": 104797263, "body": "oh, you are right :( so I don&#39;t think you can do it in a one glob call."}], "tags": [], "owner": {"reputation": 3671, "user_id": 2826937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmIdz.png?s=128&g=1", "display_name": "Alexandr Shurigin", "link": "https://stackoverflow.com/users/2826937/alexandr-shurigin"}, "is_accepted": false, "score": 0, "last_activity_date": 1576104668, "last_edit_date": 1576104668, "creation_date": 1576103685, "answer_id": 59295161, "question_id": 59295079, "link": "https://stackoverflow.com/questions/59295079/using-glob-to-exclude-time-series-files/59295161#59295161", "title": "using glob to exclude time series files", "body": "<p>Do it like this</p>\n\n<pre><code>import glob\nfrom pprint import pprint\n\npprint(sorted(glob.glob(\"filename-???[!1]*\")))\n\n</code></pre>\n\n<p>Where <code>?</code> is \"any character\", like <code>*</code> is for \"any characters string\"</p>\n\n<p>For me, this works pretty well.</p>\n\n<pre><code>(stackoverflow)  ~/PycharmProjects/stackoverflow \ue0b0 ls -la filename-00*\n-rw-r--r--  1 dude  staff  0 Dec 11 23:31 filename-0001\n-rw-r--r--  1 dude  staff  0 Dec 11 23:31 filename-0002\n-rw-r--r--  1 dude  staff  0 Dec 11 23:31 filename-0003\n-rw-r--r--  1 dude  staff  0 Dec 11 23:31 filename-0004\n-rw-r--r--  1 dude  staff  0 Dec 11 23:31 filename-0005\n-rw-r--r--  1 dude  staff  0 Dec 11 23:31 filename-0006\n-rw-r--r--  1 dude  staff  0 Dec 11 23:31 filename-0007\n-rw-r--r--  1 dude  staff  0 Dec 11 23:31 filename-0008\n-rw-r--r--  1 dude  staff  0 Dec 11 23:31 filename-0009\n-rw-r--r--  1 dude  staff  0 Dec 11 23:31 filename-0010\n(stackoverflow)  ~/PycharmProjects/stackoverflow # python test123.py\n['filename-0002',\n 'filename-0003',\n 'filename-0004',\n 'filename-0005',\n 'filename-0006',\n 'filename-0007',\n 'filename-0008',\n 'filename-0009',\n 'filename-0010']\n(stackoverflow)  ~/PycharmProjects/stackoverflow #\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 12348076, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-p9-0e6wk2bA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfUC6YFS2HHnii2BrFxZGQ-EZC8cQ/photo.jpg?sz=128", "display_name": "Lin Lin", "link": "https://stackoverflow.com/users/12348076/lin-lin"}, "edited": false, "score": 0, "creation_date": 1576285905, "post_id": 59295439, "comment_id": 104862240, "body": "I think this works in a more convenient and flexible way."}], "tags": [], "owner": {"reputation": 872, "user_id": 1705163, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/75de30ee00608f26eec979eaa14126fd?s=128&d=identicon&r=PG&f=1", "display_name": "gens", "link": "https://stackoverflow.com/users/1705163/gens"}, "is_accepted": true, "score": 0, "last_activity_date": 1576105386, "creation_date": 1576105386, "answer_id": 59295439, "question_id": 59295079, "link": "https://stackoverflow.com/questions/59295079/using-glob-to-exclude-time-series-files/59295439#59295439", "title": "using glob to exclude time series files", "body": "<p><code>glob</code> supports Unix shell pattern rules, but not more complex expressions. But, while you are in Python, you can use lots of filtering techniques, including regular expressions. If my directory looks like this:</p>\n\n<pre><code>$ find\n.\n./mydirectory\n./mydirectory/filename-0001-01-01\n./mydirectory/filename-0001-02-01\n./mydirectory/filename-0010-12-01\n./mydirectory/filename-0005-01-01\n\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>[f for f in glob.glob(r\"mydirectory/filename-*\") if \"0001\" not in f]\n</code></pre>\n\n<p>will return:</p>\n\n<pre><code>['mydirectory/filename-0010-12-01', 'mydirectory/filename-0005-01-01']\n</code></pre>\n\n<p>This is further explained in <a href=\"https://stackoverflow.com/a/13032338/1705163\">this SO answer</a></p>\n"}], "owner": {"reputation": 5, "user_id": 12348076, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-p9-0e6wk2bA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfUC6YFS2HHnii2BrFxZGQ-EZC8cQ/photo.jpg?sz=128", "display_name": "Lin Lin", "link": "https://stackoverflow.com/users/12348076/lin-lin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 59295439, "answer_count": 3, "score": 0, "last_activity_date": 1576105386, "creation_date": 1576103287, "last_edit_date": 1576103417, "question_id": 59295079, "link": "https://stackoverflow.com/questions/59295079/using-glob-to-exclude-time-series-files", "title": "using glob to exclude time series files", "body": "<p>My files in a directory are monthly data spanning several years, with characters like 0001-01-01, 0001-02-01, ..., 0005-01-01, ..., 0010-12-01 (yyyy-mm-dd) in the middle of each file name.</p>\n\n<p>Now, I would like to exclude say the 0001* files.\nIf I wrote <code>sorted(glob.glob(mydirectory/filename-000[!1]*))</code> only gives me 0002 ~~ 0009 files, while the 0010 files are not included.</p>\n\n<p>What should I do to only exclude the 0001* files?</p>\n\n<p>If I wrote <code>sorted(glob.glob(mydirectory/filename-000[2-9]*))</code> also only gives me 0002-0009 files, what should I do to include the 0010* files?</p>\n\n<p>I also tried <code>filename-{000[2-9],00[10-12]}*</code>, which does not work.</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["python", "data-science", "google-distancematrix-api"], "comments": [{"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 2, "creation_date": 1576107169, "post_id": 59295077, "comment_id": 104795658, "body": "Sounds like a very useful education in the value (cost/benefit-wise) of web APIs. What research have you done into alternative methods? Is Python the issue (is some other language notably faster?), or is the API the main consumer of your application execution time?"}, {"owner": {"reputation": 196, "user_id": 12513994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5db57ea76f9f18ddbd7e2defae26eca?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Habel", "link": "https://stackoverflow.com/users/12513994/joe-habel"}, "edited": false, "score": 2, "creation_date": 1576107696, "post_id": 59295077, "comment_id": 104795813, "body": "What you&#39;re asking for here is going to be way beyond what you can expect to get from a free API. I&#39;d recommend looking at the different routing engines that have been developed for <a href=\"https://wiki.openstreetmap.org/wiki/Routing\" rel=\"nofollow noreferrer\">OpenStreetMap</a>. You should be able to set some of these up to run locally, as opposed to having to rely on an external server."}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 1, "creation_date": 1576114274, "post_id": 59295077, "comment_id": 104797166, "body": "It\u2019s difficult to comment on the efficiency of your use of the API with practically no information on how you\u2019re using it."}, {"owner": {"reputation": 11, "user_id": 12521280, "user_type": "registered", "profile_image": "https://graph.facebook.com/777055786103273/picture?type=large", "display_name": "Will F", "link": "https://stackoverflow.com/users/12521280/will-f"}, "edited": false, "score": 0, "creation_date": 1576125802, "post_id": 59295077, "comment_id": 104799440, "body": "I believe the issue is the with google distance matrix api, though it may have been in the fact that i was running a loop instead of applying a function. As I said, when I changed the loop to instead use Euclidean geometry to calculate &#39;as the crow flies&#39; distance, it completed all 300K rows in the blink of an eye.  I did look into other APIs but free/open source ones seem to be limited in usage (anywhere from 5K to 10K requests daily or monthly... not enough.) So for this project I may just have to be content with a less ideal solution."}], "answers": [{"tags": [], "owner": {"reputation": 795, "user_id": 3184950, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Y2wK.jpg?s=128&g=1", "display_name": "user3184950", "link": "https://stackoverflow.com/users/3184950/user3184950"}, "is_accepted": false, "score": 2, "last_activity_date": 1593516597, "creation_date": 1593516597, "answer_id": 62656444, "question_id": 59295077, "link": "https://stackoverflow.com/questions/59295077/google-distance-matrix-api-very-slow-on-python/62656444#62656444", "title": "Google Distance Matrix API very slow on Python", "body": "<p>You could approximate the distance in KM with the haversine distance.</p>\n<p>Here I have my distances as lat/long pairs as <code>random_distances</code> with shape <code>(300000, 2)</code> as a <code>numpy</code> array:</p>\n<pre><code>import numpy as np\nfrom sklearn.neighbors import DistanceMetric\n\n\ndist = DistanceMetric.get_metric('haversine')\n\nrandom_distances = np.random.random( (300000,2) )\n</code></pre>\n<p>Than we can approximate the distances with</p>\n<pre><code>distances = np.zeros( random_distances.shape[0] - 2 )\n\nfor idx in range(random_distances.shape[0]-2):\n    distances[idx] = dist.pairwise(np.radians(random_distances[idx:idx+2]), np.radians(random_distances[idx:idx+2]) )[0][1]\n\ndistances *= 6371000/1000  # to get output as KM\n</code></pre>\n<p><code>distances</code> now contains the distances.</p>\n<ul>\n<li>It is 'allright' in speed, but can be improved. We could get rid of the for loop for instance, also 2x2 distances are returned and only 1 is used.</li>\n<li>The haversine distance is an good approximation, but not exact which I imagine the API is:</li>\n</ul>\n<p>From <code>sklearn</code>:</p>\n<blockquote>\n<p>As the Earth is nearly spherical, the haversine formula provides a good approximation of the distance between two points of the Earth surface, with a less than 1% error on average.</p>\n</blockquote>\n"}], "owner": {"reputation": 11, "user_id": 12521280, "user_type": "registered", "profile_image": "https://graph.facebook.com/777055786103273/picture?type=large", "display_name": "Will F", "link": "https://stackoverflow.com/users/12521280/will-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1593516597, "creation_date": 1576103261, "last_edit_date": 1576115651, "question_id": 59295077, "link": "https://stackoverflow.com/questions/59295077/google-distance-matrix-api-very-slow-on-python", "title": "Google Distance Matrix API very slow on Python", "body": "<p>I was using the Google Maps Distance matrix API in python to calculate distances on bicycle between two points, using latitude and longitude. I was using a loop to calculate almost 300,000 rows of data for a student project (I am studying Data Science with Python). I added a debug line to output the row# and distance every 10,000 rows, but after humming away for a while with no results, I stopped the kernel and changed it to every 1000 rows. With that, after about 5 minutes it finally got to row 1000. After over an hour, it was only on row 70,000. Unbelievable. I stopped execution and later that day got an email from Google saying I had used up my free trial. so not only did it work incredibly slowly, I can't even use it at all anymore for a student project without incurring enormous fees. </p>\n\n<p>So I rewrote the code to use geometry and just calculate \"as the crow flies\" distance. Not really what I want, but short of any alternatives, that's my only option. </p>\n\n<p>Does anyone know of another (open-source, free) way to calculate distance to get what I want, or how to use the google distance matrix API more efficiently?</p>\n\n<p>thanks,</p>\n\n<p>so here is some more information, as suggested I post a bit more. I am trying to calculate distances between \"stations\", and am given lat's and long's for about 300K pairs. I was going to set up a function and then apply that function to the dataframe (bear with me, I'm still new at python and dataframes) -- but for now I was using a loop to go through all the pairs. Here is my code:</p>\n\n<pre><code>i = 0\nwhile i &lt; len(trip):\n    from_coords = str(result.loc[i, 'from_lat']) + \" \" + str(result.loc[i, 'from_long'])\n    to_coords =  str(result.loc[i, 'to_lat']) + \" \" + str(result.loc[i, 'to_long'])\n    # now to get distances!!!\n    distance = gmaps.distance_matrix([from_coords], #origin lat &amp; long, formatted for gmaps\n                                 [to_coords], #destination lat &amp; long, formatted for gmaps\n                                 mode='bicycling')['rows'][0]['elements'][0]  #mode=bicycling to use streets for cycling\n    result['distance'] = distance['distance']['value']\n\n    # added this bit to see how quickly/slowly the code is running\n    # ... and btw it's running very slowly. had the debug line at 10000 and changed it to 1000 \n    # ... and i am running on a with i9-9900K with 48GB ram\n    # ... why so slow?\n    if i % 1000 == 0:\n        print(distance['distance']['value'])\n    i += 1\n</code></pre>\n"}, {"tags": ["python", "postgresql", "sqlalchemy"], "comments": [{"owner": {"reputation": 1533, "user_id": 10569027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dPPb9.jpg?s=128&g=1", "display_name": "GiovaniSalazar", "link": "https://stackoverflow.com/users/10569027/giovanisalazar"}, "edited": false, "score": 0, "creation_date": 1576106609, "post_id": 59295009, "comment_id": 104795514, "body": "look this <a href=\"https://stackoverflow.com/questions/41724658/how-to-do-a-proper-upsert-using-sqlalchemy-on-postgresql/43527774\" title=\"how to do a proper upsert using sqlalchemy on postgresql\">stackoverflow.com/questions/41724658/&hellip;</a>   when he is trying insert use insert_ignore"}, {"owner": {"reputation": 550, "user_id": 3316406, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/KqEUO.jpg?s=128&g=1", "display_name": "srjjio", "link": "https://stackoverflow.com/users/3316406/srjjio"}, "reply_to_user": {"reputation": 1533, "user_id": 10569027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dPPb9.jpg?s=128&g=1", "display_name": "GiovaniSalazar", "link": "https://stackoverflow.com/users/10569027/giovanisalazar"}, "edited": false, "score": 0, "creation_date": 1576144657, "post_id": 59295009, "comment_id": 104806627, "body": "Thank your for helping, but I didn&#39;t see the relation between the issues except he is also encountered a <code>binparam</code> error. I have finally found the solution of mine."}], "answers": [{"tags": [], "owner": {"reputation": 550, "user_id": 3316406, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/KqEUO.jpg?s=128&g=1", "display_name": "srjjio", "link": "https://stackoverflow.com/users/3316406/srjjio"}, "is_accepted": true, "score": 1, "last_activity_date": 1576152899, "last_edit_date": 1576152899, "creation_date": 1576144327, "answer_id": 59301816, "question_id": 59295009, "link": "https://stackoverflow.com/questions/59295009/sqlalchemy-insert-from-select-raises-bindparam-error/59301816#59301816", "title": "SQLAlchemy insert from select raises bindparam error", "body": "<p>I have finally figured out where <code>bindparam</code> was implicitly used by SQLAlchemy to solve my issue: in the node queries and not the edge query as I was first thinking.</p>\n\n<p>But I am still not sure if this is the proper way to perform nested insert queries with SQLAlchemy and if it will improve execution time.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>e1_source = insert(node).values(name=bindparam('source_name')).returning(node.c.id).cte('source')\ne1_target = insert(node).values(name=bindparam('target_name')).returning(node.c.id).cte('target')\ne1 = insert(edge).from_select(\n  ['source_id', 'target_id', 'name'],\n  select([\n    e1_source.c.id,\n    e1_target.c.id,\n    literal('e1'),\n  ])\n)\nengine.execute(e1, {\n    'source_name': 'e1_source',\n    'target_name': 'e1_target',\n})\n</code></pre>\n"}], "owner": {"reputation": 550, "user_id": 3316406, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/KqEUO.jpg?s=128&g=1", "display_name": "srjjio", "link": "https://stackoverflow.com/users/3316406/srjjio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "accepted_answer_id": 59301816, "answer_count": 1, "score": 0, "last_activity_date": 1576152899, "creation_date": 1576102945, "last_edit_date": 1576143915, "question_id": 59295009, "link": "https://stackoverflow.com/questions/59295009/sqlalchemy-insert-from-select-raises-bindparam-error", "title": "SQLAlchemy insert from select raises bindparam error", "body": "<p>Using SQLAlchemy on PostgreSQL, I try to improve performance at insertion (about 100k egdes to insert), executing \"nested inserts\" in a single query for one edge and its nodes.</p>\n\n<p>Using <code>Insert.from_select</code>, I get following error and I don't really understand why.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>CompileError: bindparam() name 'name' is reserved for automatic usage in the VALUES or SET clause of this insert/update statement.   Please use a name other than column name when using bindparam() with insert() or update() (for example, 'b_name').\n</code></pre>\n\n<pre class=\"lang-py prettyprint-override\"><code>from sqlalchemy import *\n\nmetadata = MetaData()\n\nnode = Table('node', metadata,\n    Column('id', Integer, primary_key=True),\n    Column('name', String),\n)\n\nedge = Table('edge', metadata,\n    Column('id', Integer, primary_key=True),\n    Column('name', String),\n    Column('source_id', Integer(), ForeignKey(node.c.id)),\n    Column('target_id', Integer(), ForeignKey(node.c.id)),\n)\n\nengine = create_engine('postgres://postgres:postgres@db:5432')\nmetadata.create_all(engine)\n\ne1_source = insert(node).values(name='e1_source').returning(node.c.id).cte('source')\ne1_target = insert(node).values(name='e1_target').returning(node.c.id).cte('target')\ne1 = insert(edge).from_select(\n  ['source_id', 'target_id', 'name'],  # bindparam error\n  # ['source_id', 'target_id', 'b_name'],  # key error\n  # [edge.c.source_id, edge.c.target_id, edge.c.name],  # bindparam error\n  select([\n    e1_source.c.id,\n    e1_target.c.id,\n    literal('e1'),\n  ])\n)\nengine.execute(e1)\n</code></pre>\n\n<p>EDIT: Below, the SQL query I was expected to produces. I remain open to any suggestions to achieve my purpose though.</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE TABLE node (\n   id SERIAL PRIMARY KEY,\n   name VARCHAR\n);\n\nCREATE TABLE edge (\n   id SERIAL PRIMARY KEY,\n   source_id INTEGER REFERENCES node (id),\n   target_id INTEGER REFERENCES node (id),\n   name VARCHAR\n);\n\nWITH source AS (\n  INSERT INTO node (name)\n  VALUES ('e1_source')\n  RETURNING id\n), target as (\n  INSERT INTO node (name)\n  VALUES ('e1_target')\n  RETURNING id\n)\nINSERT INTO edge (source_id, target_id, name)\nSELECT source.id, target.id, 'e1'\nFROM source, target;\n</code></pre>\n"}, {"tags": ["javascript", "python", "django", "angular", "typescript"], "comments": [{"owner": {"reputation": 498, "user_id": 6693443, "user_type": "registered", "profile_image": "https://graph.facebook.com/1157346497649699/picture?type=large", "display_name": "Geancarlo Murillo", "link": "https://stackoverflow.com/users/6693443/geancarlo-murillo"}, "edited": false, "score": 1, "creation_date": 1576102877, "post_id": 59294970, "comment_id": 104794397, "body": "share the view please"}, {"owner": {"reputation": 1030, "user_id": 9244138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39148e76ae32cbb7711a7ca476a8a608?s=128&d=identicon&r=PG&f=1", "display_name": "Colin Ragnar&#246;k", "link": "https://stackoverflow.com/users/9244138/colin-ragnar%c3%b6k"}, "reply_to_user": {"reputation": 498, "user_id": 6693443, "user_type": "registered", "profile_image": "https://graph.facebook.com/1157346497649699/picture?type=large", "display_name": "Geancarlo Murillo", "link": "https://stackoverflow.com/users/6693443/geancarlo-murillo"}, "edited": false, "score": 0, "creation_date": 1576104465, "post_id": 59294970, "comment_id": 104794898, "body": "@GeancarloMurillo Ive added if you need more, tell me."}, {"owner": {"reputation": 3517, "user_id": 785400, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/6c07d8b5af42f5c4d21b169dcfd1bda0?s=128&d=identicon&r=PG", "display_name": "Brian Dant", "link": "https://stackoverflow.com/users/785400/brian-dant"}, "edited": false, "score": 1, "creation_date": 1576105097, "post_id": 59294970, "comment_id": 104795081, "body": "I gather that you&#39;re using Django Rest Framework? It looks like this error is being raised: <a href=\"https://github.com/encode/django-rest-framework/blob/335054a5d36b352a58286b303b608b6bf48152f8/rest_framework/exceptions.py#L208\" rel=\"nofollow noreferrer\">github.com/encode/django-rest-framework/blob/&hellip;</a>. If so, the solution is probably to use a different parser: <a href=\"https://www.django-rest-framework.org/api-guide/parsers/#multipartparser\" rel=\"nofollow noreferrer\">django-rest-framework.org/api-guide/parsers/#multipartparser</a>&zwnj;&#8203;."}, {"owner": {"reputation": 1030, "user_id": 9244138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39148e76ae32cbb7711a7ca476a8a608?s=128&d=identicon&r=PG&f=1", "display_name": "Colin Ragnar&#246;k", "link": "https://stackoverflow.com/users/9244138/colin-ragnar%c3%b6k"}, "edited": false, "score": 0, "creation_date": 1576105894, "post_id": 59294970, "comment_id": 104795330, "body": "Yes its Django rest framework. Where in my code would I have to put the different parser?"}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576114377, "post_id": 59294970, "comment_id": 104797181, "body": "@ColinRagnar&#246;k Did you read the section entitled \u201csetting the parsers\u201d in that link?"}, {"owner": {"reputation": 13, "user_id": 9640094, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Usama Haider", "link": "https://stackoverflow.com/users/9640094/usama-haider"}, "edited": false, "score": 0, "creation_date": 1602017618, "post_id": 59294970, "comment_id": 113590678, "body": "If you you are using django rest and passing through html form than try passing through raw using json it worked for me"}], "owner": {"reputation": 1030, "user_id": 9244138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39148e76ae32cbb7711a7ca476a8a608?s=128&d=identicon&r=PG&f=1", "display_name": "Colin Ragnar&#246;k", "link": "https://stackoverflow.com/users/9244138/colin-ragnar%c3%b6k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1346, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1602017618, "creation_date": 1576102721, "last_edit_date": 1576104424, "question_id": 59294970, "link": "https://stackoverflow.com/questions/59294970/unsupported-media-type-multipart-form-data-boundary-webkitformboundaryabc", "title": "Unsupported media type &quot;multipart/form-data; boundary=----WebKitFormBoundaryABC&quot; when requesting to Django server", "body": "<p>I'm uploading a set of data (file, string, number, bool) to an Django api. The docs says <code>Note: the schema is not json it's multipart</code> so I made use of formData which is multipart. But when I upload this form I get this error </p>\n\n<blockquote>\n  <p>\"Unsupported media type \"multipart/form-data;\n  boundary=----WebKitFormBoundaryABC\" in request\"</p>\n</blockquote>\n\n<p>so I tried to add the content type multipart httpheader but this also resulted in an error: </p>\n\n<blockquote>\n  <p>unsupported mediative \"multipart\" in request</p>\n</blockquote>\n\n<p>I actually don't know where the error lies. Either in the api or in my front end code, so I'll add the essential parts of both down here:</p>\n\n<p>Django:</p>\n\n<p>models.py</p>\n\n<pre><code>class Post(models.Model):\n    user = models.ForeignKey(settings.AUTH_USER_MODEL, related_name='posts', on_delete=models.CASCADE)\n\n    src = models.ImageField(blank=False, null=False, editable=False, upload_to=utils.get_file_path,)\n    date_posted = models.DateTimeField(auto_now_add=True, editable=False)\n    last_modified = models.DateTimeField(auto_now=True)\n    when = models.FloatField(blank=True, null=True)\n    lock = models.BooleanField(default=False)\n    des = models.CharField(\n        max_length=100,\n        validators=[\n            RegexValidator(\n                regex='^[-_a-zA-Z0-9\\.]+$',\n                message='only 1 to 20 characters and only letters, numbers, point, minus and underscore are allowed',\n            ),\n        ])\n</code></pre>\n\n<p>view.py</p>\n\n<pre><code>  @swagger_auto_schema(request_body=doc_serializer.CreatePostDummy, responses={201: PostSerializer})\n        def create(self, request, *args, **kwargs):\n            \"\"\"permission required: authenticated. Note: the schema is not json it's multipart\"\"\"\n            return super().create(request, *args, **kwargs)\n</code></pre>\n\n<p>doc_serializers.py</p>\n\n<pre><code>class CreatePostDummy(serializers.HyperlinkedModelSerializer):\n    user = serializers.HyperlinkedRelatedField(required=False, read_only=True, view_name='user-detail')\n    src = serializers.CharField(required=True, help_text='Not Char but image upload field')\n</code></pre>\n\n<p>frontend</p>\n\n<p>upload.ts</p>\n\n<pre><code>  ngOnInit() {\n\n    this.categoryForm = new FormGroup({\n\n\n      'lock': new FormControl(true),\n\n      'des': new FormControl('', Validators.compose([\n        Validators.maxLength(25),\n        Validators.minLength(1),\n        Validators.required\n      ])),\n\n      'image': new FormControl(null),\n      'when': new FormControl(null),\n    });\n\n}\n\napiSubmit() {\n  const formData = new FormData();\n  formData.append('lock', this.categoryForm.get('lock').value);\n  formData.append('des', this.categoryForm.get('des').value);\n  formData.append('image', this.categoryForm.get('image').value);\n  formData.append('when', this.categoryForm.get('when').value);\n\n\n  this.http.post&lt;any&gt;(`{this.url}`, formData).subscribe(\n    (res) =&gt; console.log(res),\n    (err) =&gt; console.log(err)\n  );\n}\n</code></pre>\n"}, {"tags": ["python", "image", "selenium", "svg", "click"], "comments": [{"owner": {"reputation": 3517, "user_id": 785400, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/6c07d8b5af42f5c4d21b169dcfd1bda0?s=128&d=identicon&r=PG", "display_name": "Brian Dant", "link": "https://stackoverflow.com/users/785400/brian-dant"}, "edited": false, "score": 0, "creation_date": 1576103762, "post_id": 59294968, "comment_id": 104794681, "body": "Perhaps you can drill down to see the precise issue: can you prove (to yourself) that you can select a basic SVG? If so, can you then select the SVG with the <code>starts-with</code> part of your string? If you can do that, then add back in your more complex SVG and see if you can select it with your refined code. If any of these steps works but a subsequent step does not, post the status of your testing in the question."}, {"owner": {"reputation": 3517, "user_id": 785400, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/6c07d8b5af42f5c4d21b169dcfd1bda0?s=128&d=identicon&r=PG", "display_name": "Brian Dant", "link": "https://stackoverflow.com/users/785400/brian-dant"}, "edited": false, "score": 0, "creation_date": 1576103917, "post_id": 59294968, "comment_id": 104794732, "body": "Does the answer to this question help? <a href=\"https://stackoverflow.com/questions/41829000/how-to-click-on-svg-elements-using-xpath-and-selenium-webdriver-through-java\" title=\"how to click on svg elements using xpath and selenium webdriver through java\">stackoverflow.com/questions/41829000/&hellip;</a>"}], "owner": {"reputation": 19, "user_id": 12521203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/840e6e0c291bfa8ca17927bd73834d51?s=128&d=identicon&r=PG&f=1", "display_name": "Thehog", "link": "https://stackoverflow.com/users/12521203/thehog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "closed_date": 1576103686, "answer_count": 0, "score": 1, "last_activity_date": 1576103261, "creation_date": 1576102705, "last_edit_date": 1576103261, "question_id": 59294968, "link": "https://stackoverflow.com/questions/59294968/click-on-svg-image-in-python-selenium", "closed_reason": "Duplicate", "title": "Click on svg image in python selenium", "body": "<p>I want to click on an svg image with this tag below:</p>\n\n<pre><code>&lt;svg class=\"Offer__rowIcon___I2EwO \" width=\"18px\" height=\"14px\" viewBox=\"0 0 18 14\" version=\"1.1\"&gt;\n    &lt;defs&gt;&lt;/defs&gt;\n    &lt;g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\"&gt;\n        &lt;g id=\"Icons\" transform=\"translate(-267.000000, -971.000000)\" fill=\"#FFFFFF\"&gt;\n            &lt;g id=\"check\" transform=\"translate(267.000000, 971.000000)\"&gt;&lt;g id=\"Livello_1\"&gt;\n                &lt;g id=\"Livello_1\"&gt;\n                &lt;polygon id=\"Shape\" points=\"6.36363636 13.2618182 0 6.89818182 1.79454545 5.10363636 6.36363636 9.66 16.0236364 0 17.8181818 1.80727273\"&gt;\n                &lt;/polygon&gt;\n                &lt;/g&gt;\n            &lt;/g&gt;\n        &lt;/g&gt;\n    &lt;/g&gt;\n&lt;/svg&gt;\n</code></pre>\n\n<p>I have tried the following code:</p>\n\n<pre><code>WebDriverWait(browser, 20).until(EC.element_to_be_clickable((By.XPATH, \"//*[name()='svg:image' and starts-with(@class, 'Offer__rowIcon___I2EwO ')]\"))).click()\n</code></pre>\n\n<p>However I get the following message:</p>\n\n<blockquote>\n  <p>raise TimeoutException(message, screen, stacktrace)\n  TimeoutException</p>\n</blockquote>\n\n<p>Can anyone advise how to click on this element?</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 7, "creation_date": 1576102761, "post_id": 59294948, "comment_id": 104794357, "body": "Sample and expected output please :)"}, {"owner": {"reputation": 907, "user_id": 1558604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b97af9fb78006cf022f9e60b0d9b428?s=128&d=identicon&r=PG", "display_name": "user1558604", "link": "https://stackoverflow.com/users/1558604/user1558604"}, "edited": false, "score": 0, "creation_date": 1576106968, "post_id": 59294948, "comment_id": 104795614, "body": "Do you want one nighttime average and one daytime average, or one average for each day and night?"}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576114679, "post_id": 59294948, "comment_id": 104797240, "body": "What\u2019s the exact issue you\u2019re facing? Stack Overflow is not the place to dump off your work for others to do."}], "owner": {"reputation": 27, "user_id": 12521216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/076f8ca6fcfab8450fcf47e59f10f14a?s=128&d=identicon&r=PG&f=1", "display_name": "Dariush Faghani", "link": "https://stackoverflow.com/users/12521216/dariush-faghani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1576248330, "creation_date": 1576102629, "last_edit_date": 1576248330, "question_id": 59294948, "link": "https://stackoverflow.com/questions/59294948/groupby-nightime-with-varying-hours", "title": "groupby nightime with varying hours", "body": "<p>I am trying to calculate night-time averages of a dataframe except that what I need is a mix between daily average and hour range average.\nMore specifically, I have a dataframe storing day and night hours and I want to use it as a boolean key to calculate night-time averages of another dataframe.\nI cannot use daily averages because each night spreads over two calendar days, and I cannot use by hour range either because hours change by season.</p>\n\n<p>Thanks for your help!\nDariush.</p>\n\n<p>Based on comments received here is what I am looking for - see spreadsheet below. I need to calculate the average of 'Value' during nighttime using the Nighttime flag, and then repeat the average value for all time stamps until the following night, at which time the average is updated and repeated until the next nighttime flag.\n<a href=\"https://i.stack.imgur.com/GU8y4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GU8y4.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "asp.net-core", ".net-core", "grpc", "grpc-python"], "comments": [{"owner": {"reputation": 849, "user_id": 4481855, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Z1q2vlzuJtk/AAAAAAAAAAI/AAAAAAAAAFU/VlAxU6jBJ-M/photo.jpg?sz=128", "display_name": "hdnn", "link": "https://stackoverflow.com/users/4481855/hdnn"}, "edited": false, "score": 2, "creation_date": 1576162608, "post_id": 59294931, "comment_id": 104816797, "body": "Did you try to create channel without &quot;https://&quot;? <code>channel = grpc.secure_channel(&quot;192.168.1.230:5001&quot;, credentials)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 5735373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61adebc05bd4d9bbe2f11af24f0b8514?s=128&d=identicon&r=PG&f=1", "display_name": "Kanhaiya P. Baranwal", "link": "https://stackoverflow.com/users/5735373/kanhaiya-p-baranwal"}, "is_accepted": false, "score": 1, "last_activity_date": 1614760172, "last_edit_date": 1614760172, "creation_date": 1614758779, "answer_id": 66452959, "question_id": 59294931, "link": "https://stackoverflow.com/questions/59294931/grpc-client-dns-resolution-failed-when-trying-to-access-grpc-server-on-same-netw/66452959#66452959", "title": "grpc client dns resolution failed when trying to access grpc server on same network", "body": "<p>In Python gRPC client, calling channel without protocol (<code>https:</code>) is required. So, I called gRPC service in dotnet core framework with following and it worked. Note, dotnet gRPC server was listening on <code>https://localhost:5001</code>.</p>\n<pre><code>with open('localhost.crt', 'rb') as f:\n    credentials = grpc.ssl_channel_credentials(f.read())\nwith grpc.secure_channel('localhost:5001', credentials) as channel:\n    stub = pb2_grpc.GreeterStub(channel)\n    request = pb2.HelloRequest(name = &quot;GreeterPythonClient&quot;)\n    response = stub.SayHello(request)\n</code></pre>\n"}], "owner": {"reputation": 463, "user_id": 4470188, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/9ab9ce55bd91c50297c49f8d4d0f56dc?s=128&d=identicon&r=PG&f=1", "display_name": "Gurkmeja101", "link": "https://stackoverflow.com/users/4470188/gurkmeja101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4617, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1614760172, "creation_date": 1576102466, "question_id": 59294931, "link": "https://stackoverflow.com/questions/59294931/grpc-client-dns-resolution-failed-when-trying-to-access-grpc-server-on-same-netw", "title": "grpc client dns resolution failed when trying to access grpc server on same network", "body": "<p>I'm trying to call a GRPC server running on a .Net Core project from a Python client.</p>\n\n<p>When running against <code>localhost:5001</code> it works fine, but running against the actual IP of the machine from within the same network like <code>192.168.1.230:5001</code> it doesn't work and I get an error <code>DNS resolution failed</code>.</p>\n\n<p>I've downloaded the SSL cert and am at the moment reading it as a file from the client. It works when running against <code>localhost</code> so I don't think that is the problem.</p>\n\n<p>Is there a better way to do this kind of testing of having clients run on separate devices but on the same network as the server? Hosting the GRPC server outside during development doesn't really seem like the best solution.</p>\n\n<p>Python code:</p>\n\n<pre><code>import grpc\nimport datamessage_pb2 as datamessage\nimport datamessage_pb2_grpc as datamessageService\n\n\ndef main():\n    print(\"Calling grpc server\")\n    with open(\"localhost.cer\", \"rb\") as file:\n        cert = file.read()\n    credentials = grpc.ssl_channel_credentials(cert)\n    channel = grpc.secure_channel(\"https://192.168.1.230:5001\", credentials)\n    # channel = grpc.secure_channel(\"localhost:5001\", credentials)\n    stub = datamessageService.StationDataHandlerStub(channel)\n    request = datamessage.StationDataModel(\n        temperature=22.3, humidity=13.3, soilMoisture=35.0)\n\n    result = stub.RegisterNewStationData(request)\n    print(result)\n\n\nmain()\n</code></pre>\n\n<p>Server settings in <code>Program.cs</code>:</p>\n\n<pre><code>public static IHostBuilder CreateHostBuilder(string[] args) =&gt;\n            Host.CreateDefaultBuilder(args)\n                .ConfigureWebHostDefaults(webBuilder =&gt;\n                {\n                    webBuilder.UseUrls(\"https://*:5001\");\n                    webBuilder.UseStartup&lt;Startup&gt;();\n                });\n</code></pre>\n\n<p>Settings in firewall:\n<a href=\"https://i.stack.imgur.com/5T5WV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5T5WV.png\" alt=\"enter image description here\"></a></p>\n\n<p>Traceback:</p>\n\n<pre><code>grpc._channel._Rendezvous: &lt;_Rendezvous of RPC that terminated with:\n        status = StatusCode.UNAVAILABLE\n        details = \"DNS resolution failed\"\n        debug_error_string = \"{\"created\":\"@1576101634.549000000\",\"description\":\"Failed to pick subchannel\",\"file\":\"src/core/ext/filters/client_channel/client_channel.cc\",\"file_line\":3934,\"referenced_errors\":[{\"created\":\"@1576101634.549000000\",\"description\":\"Resolver transient failure\",\"file\":\"src/core/ext/filters/client_channel/resolving_lb_policy.cc\",\"file_line\":262,\"referenced_errors\":[{\"created\":\"@1576101634.549000000\",\"description\":\"DNS resolution failed\",\"file\":\"src/core/ext/filters/client_channel/resolver/dns/native/dns_resolver.cc\",\"file_line\":202,\"grpc_status\":14,\"referenced_errors\":[{\"created\":\"@1576101634.549000000\",\"description\":\"OS Error\",\"file\":\"src/core/lib/iomgr/resolve_address_windows.cc\",\"file_line\":96,\"os_error\":\"No such host is known.\\r\\n\",\"syscall\":\"getaddrinfo\",\"wsa_error\":11001}]}]}]}\"\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "matplotlib", "keras"], "comments": [{"owner": {"reputation": 1022, "user_id": 12240283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qohx0.jpg?s=128&g=1", "display_name": "APhillips", "link": "https://stackoverflow.com/users/12240283/aphillips"}, "edited": false, "score": 0, "creation_date": 1576102748, "post_id": 59294907, "comment_id": 104794346, "body": "<code>bbox = kwargs.pop(&quot;bbox&quot;, sentinel)</code> you&#39;re trying to call <code>pop()</code> on a String, but <code>pop()</code> is a List method. Running on Windows command prompt will not change the output."}, {"owner": {"reputation": 21, "user_id": 12461934, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gW51etsq9gw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reIVGzalouN-mHHVUe2uXZPykbd4g/photo.jpg?sz=128", "display_name": "Egemen &#199;&#252;&#231;en", "link": "https://stackoverflow.com/users/12461934/egemen-%c3%87%c3%bc%c3%a7en"}, "reply_to_user": {"reputation": 1022, "user_id": 12240283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qohx0.jpg?s=128&g=1", "display_name": "APhillips", "link": "https://stackoverflow.com/users/12240283/aphillips"}, "edited": false, "score": 0, "creation_date": 1576103017, "post_id": 59294907, "comment_id": 104794448, "body": "thanks for your answer."}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576114703, "post_id": 59294907, "comment_id": 104797246, "body": "What don\u2019t you understand from the error message?"}], "answers": [{"tags": [], "owner": {"reputation": 2020, "user_id": 3279603, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9zp3k.jpg?s=128&g=1", "display_name": "aminrd", "link": "https://stackoverflow.com/users/3279603/aminrd"}, "is_accepted": false, "score": 2, "last_activity_date": 1576102951, "creation_date": 1576102951, "answer_id": 59295010, "question_id": 59294907, "link": "https://stackoverflow.com/questions/59294907/attributeerror-str-object-has-no-attribute-pop-in-matplotlib/59295010#59295010", "title": "AttributeError: &#39;str&#39; object has no attribute &#39;pop&#39; in matplotlib", "body": "<p>In function, <code>matplotlib.pyplot.xlabel(xlabel, fontdict=None, labelpad=None, **kwargs)</code> the first argument should be string. However, you are passing </p>\n\n<pre><code>    plt.xlabel(\"Actual: \", class_names[test_labels[i]])\n    plt.title(\"Prediction : \", class_names[np.argmax(prediction[i])])\n</code></pre>\n\n<p>which is not a string. You should call </p>\n\n<pre><code>    plt.xlabel(\"Actual: \" + class_names[test_labels[i]])\n    plt.title(\"Prediction : \" + class_names[np.argmax(prediction[i])])\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 12461934, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gW51etsq9gw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reIVGzalouN-mHHVUe2uXZPykbd4g/photo.jpg?sz=128", "display_name": "Egemen &#199;&#252;&#231;en", "link": "https://stackoverflow.com/users/12461934/egemen-%c3%87%c3%bc%c3%a7en"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1025, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1576102951, "creation_date": 1576102389, "question_id": 59294907, "link": "https://stackoverflow.com/questions/59294907/attributeerror-str-object-has-no-attribute-pop-in-matplotlib", "title": "AttributeError: &#39;str&#39; object has no attribute &#39;pop&#39; in matplotlib", "body": "<p>I am trying to learn Tensorflow and Deep Neural Networks. This error came up and i couldn't find an explanation. I am working on Pycharm and i tried on Anaconda command prompt also . Should i try on windows command prompt?</p>\n\n<pre><code>import tensorflow as tf\nfrom tensorflow import keras\nimport numpy as np\nimport matplotlib.pyplot as plt\ndata = keras.datasets.fashion_mnist\n(train_images, train_labels), (test_images, test_labels) = data.load_data()\n\nclass_names = ['T-shirt/top', 'Trouser', 'Pullover', 'Dress', 'Coat',\n           'Sandal', 'Shirt', 'Sneaker', 'Bag', 'Ankle boot']\n\n train_images = train_images/255\n test_images = test_images/255\n model = keras.Sequential([\nkeras.layers.Flatten(input_shape=(28, 28)), # First layer\nkeras.layers.Dense(128, activation='relu'), #Second layer\nkeras.layers.Dense(10, activation='softmax') # Third layer\n])\n\n\n model.compile(optimizer='adam',\n          loss='sparse_categorical_crossentropy',\n          metrics=['accuracy'])\n model.fit(train_images, train_labels, epochs=5)\n\n # test_loss, test_acc = model.evaluate(test_images,  test_labels, verbose=2)\n\n # print('\\nTest accuracy:', test_acc)\n\n  prediction = model.predict(test_images)\n # print(class_names[np.argmax(prediction[1])])\n\n for i in range(5):\n    plt.grid(False)\n    plt.imshow(test_images[i], cmap=plt.cm.binary)\n    plt.xlabel(\"Actual: \", class_names[test_labels[i]])\n    plt.title(\"Prediction : \", class_names[np.argmax(prediction[i])])\n    plt.show()\n</code></pre>\n\n<p>'''\n       And I get this error\n'''</p>\n\n<pre><code> Traceback (most recent call last):\n   File \"C:/Users/Kullanici/Desktop/MachineLearningProjects/neuralNetworkTutorial/TensorDeepNN.py\", \n     line 40, in &lt;module&gt;\n    plt.xlabel(\"Actual: \", class_names[test_labels[i]])\n    File \"C:\\Users\\Kullanici\\Anaconda3\\envs\\tensor\\lib\\site-packages\\matplotlib\\pyplot.py\", line \n    3063, in xlabel\n    xlabel, fontdict=fontdict, labelpad=labelpad, **kwargs)\n    File \"C:\\Users\\Kullanici\\Anaconda3\\envs\\tensor\\lib\\site-packages\\matplotlib\\axes\\_axes.py\", line \n    247, in set_xlabel\n     return self.xaxis.set_label_text(xlabel, fontdict, **kwargs)\n     File \"C:\\Users\\Kullanici\\Anaconda3\\envs\\tensor\\lib\\site-packages\\matplotlib\\axis.py\", line \n     1598, in set_label_text\n    self.label.update(fontdict)\n    File \"C:\\Users\\Kullanici\\Anaconda3\\envs\\tensor\\lib\\site-packages\\matplotlib\\text.py\", line 176, \n     in update\n    bbox = kwargs.pop(\"bbox\", sentinel)\n   **AttributeError: 'str' object has no attribute 'pop'**\n</code></pre>\n\n<p>I couldn't find a solution.</p>\n"}, {"tags": ["python", "pandas", "machine-learning", "scikit-learn", "data-science"], "comments": [{"owner": {"reputation": 5059, "user_id": 1428102, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OEl5y.jpg?s=128&g=1", "display_name": "abhilb", "link": "https://stackoverflow.com/users/1428102/abhilb"}, "edited": false, "score": 0, "creation_date": 1576103440, "post_id": 59294900, "comment_id": 104794580, "body": "where did you create the variables <code>X</code> and <code>y</code>"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 12521150, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCl6QOoQpSMWCyL3RfcMjSrbPgdJmPYMLPaaUoFKA=k-s128", "display_name": "lmaki", "link": "https://stackoverflow.com/users/12521150/lmaki"}, "edited": false, "score": 0, "creation_date": 1576129223, "post_id": 59296781, "comment_id": 104800304, "body": "Hi Rajith. Thanks so much for the response &amp; tips. The key seems to be the line: ar = img.flatten(). Got it working thanks to you! Appreciate your help!"}, {"owner": {"reputation": 3053, "user_id": 5828160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f1bce66871c9b17ac7d152e59e8f3a7?s=128&d=identicon&r=PG", "display_name": "Rajith Thennakoon", "link": "https://stackoverflow.com/users/5828160/rajith-thennakoon"}, "reply_to_user": {"reputation": 23, "user_id": 12521150, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCl6QOoQpSMWCyL3RfcMjSrbPgdJmPYMLPaaUoFKA=k-s128", "display_name": "lmaki", "link": "https://stackoverflow.com/users/12521150/lmaki"}, "edited": false, "score": 0, "creation_date": 1576130099, "post_id": 59296781, "comment_id": 104800550, "body": "great..happy coding!!"}], "tags": [], "owner": {"reputation": 3053, "user_id": 5828160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f1bce66871c9b17ac7d152e59e8f3a7?s=128&d=identicon&r=PG", "display_name": "Rajith Thennakoon", "link": "https://stackoverflow.com/users/5828160/rajith-thennakoon"}, "is_accepted": true, "score": 3, "last_activity_date": 1576117146, "creation_date": 1576117146, "answer_id": 59296781, "question_id": 59294900, "link": "https://stackoverflow.com/questions/59294900/how-to-prepare-training-data-for-image-classification/59296781#59296781", "title": "How to prepare training data for image classification", "body": "<p>If you don`t use deep learning for image classification,you have to prepare your data that fit to the supervised learning classification.</p>\n\n<p>steps</p>\n\n<p>1) Resize all images to same size.You can loop over each image and resize and save.</p>\n\n<p>2) get the pixel vector of each image and create the dataset.As a example if your cat images are in \"Cat\" folder and Dog images are in \"Dog\" folder,iterate over all images inside the folder and get the pixel values.same time label the data as \"cat\"(cat=1) and \"non-cat\"(non-cat=0)</p>\n\n<pre><code>import os\nimport  imageio\nimport pandas as pd\n\ncatimages = os.listdir(\"Cat\")\ndogimages = os.listdir(\"Dog\")\ncatVec = []\ndogVec = []\nfor img in catimages:\n       img = imageio.imread(f\"Cat/{img}\")\n       ar = img.flatten()\n       catVec.append(ar)    \ncatdf = pd.DataFrame(catVec)    \ncatdf.insert(loc=0,column =\"label\",value=1)\n\nfor img in dogimages:\n       img = imageio.imread(f\"Dog/{img}\")\n       ar = img.flatten()\n       dogVec.append(ar)    \ndogdf = pd.DataFrame(dogVec)    \ndogdf.insert(loc=0,column =\"label\",value=0)\n</code></pre>\n\n<p>3) concat catdf and dogdf and shuffle the dataframe</p>\n\n<pre><code>data = pd.concat([catdf,dogdf])      \ndata = data.sample(frac=1)\n</code></pre>\n\n<p>now you have dataset with lable for your images.</p>\n\n<p>4) split dataset to train and test and fit to the model.</p>\n"}, {"tags": [], "owner": {"reputation": 494, "user_id": 12407899, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBoUbNasImOVujX-Y8aFN75AoQweo0Paa16VCzDXw=k-s128", "display_name": "Aditya Bhattacharya", "link": "https://stackoverflow.com/users/12407899/aditya-bhattacharya"}, "is_accepted": false, "score": 1, "last_activity_date": 1576122624, "creation_date": 1576122624, "answer_id": 59297449, "question_id": 59294900, "link": "https://stackoverflow.com/questions/59294900/how-to-prepare-training-data-for-image-classification/59297449#59297449", "title": "How to prepare training data for image classification", "body": "<p>For using classical machine learning for image classification, as mentioned earlier, you would need transform the raw images in vectors or numpy arrays and extract features from it.</p>\n\n<p>As suggested, often the preprocessing steps includes:</p>\n\n<ul>\n<li>Rescaling the images and normalizating it</li>\n<li>Converting the images to grayscale if colour does not play a vital role in classification</li>\n<li>Doing feature extraction, like creating feature vectors by applying varies computer vision filters for edge detection, pixel\ndensity detection etc.</li>\n<li>Finally dividing in to train-test split, before feeding  into the model.</li>\n</ul>\n\n<p>I found the following link that might be helpful to you,\n<a href=\"https://medium.com/@dataturks/understanding-svms-for-image-classification-cf4f01232700\" rel=\"nofollow noreferrer\">https://medium.com/@dataturks/understanding-svms-for-image-classification-cf4f01232700</a></p>\n\n<p>From the issue that you had posted, I feel you should check the dimensions of X_train, y_train and X_test, y_test. The training data is probably not matching with your training labels.</p>\n\n<p>Do, a quick X_train.shape and y_train.shape to see what are the dimensions coming.</p>\n"}], "owner": {"reputation": 23, "user_id": 12521150, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCl6QOoQpSMWCyL3RfcMjSrbPgdJmPYMLPaaUoFKA=k-s128", "display_name": "lmaki", "link": "https://stackoverflow.com/users/12521150/lmaki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 566, "favorite_count": 3, "accepted_answer_id": 59296781, "answer_count": 2, "score": 2, "last_activity_date": 1576122624, "creation_date": 1576102361, "question_id": 59294900, "link": "https://stackoverflow.com/questions/59294900/how-to-prepare-training-data-for-image-classification", "title": "How to prepare training data for image classification", "body": "<p>I'm new to Machine Learning and have some problems with image classification. Using a simple classifier technique K Nearest Neighbours I'm trying to distinguish Cats from Dogs. </p>\n\n<p>My code so far:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\n%matplotlib inline\n\nDATADIR = \"/Users/me/Desktop/ds2/ML_image_classification/kagglecatsanddogs_3367a/PetImages\"\nCATEGORIES = ['Dog', 'Cat']\n\nIMG_SIZE = 30\ndata = []\ncategories = []\n\nfor category in CATEGORIES:\n    path = os.path.join(DATADIR, category) \n    categ_id = CATEGORIES.index(category)\n    for img in os.listdir(path):\n        try:\n            img_array = cv2.imread(os.path.join(path,img), 0)\n            new_array = cv2.resize(img_array, (IMG_SIZE, IMG_SIZE))\n            data.append(new_array)\n            categories.append(categ_id)\n        except Exception as e:\n            # print(e)\n            pass\n\nprint(data[0])\n\n\ns1 = pd.Series(data)\ns2 = pd.Series(categories)\nframe = {'Img array': s1, 'category': s2}\ndf = pd.DataFrame(frame) \n\n\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.neighbors import KNeighborsClassifier\n\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.3)\n\nknn = KNeighborsClassifier()\nknn.fit(X_train, y_train)\n</code></pre>\n\n<p>And here I get an error when trying to fit the data:</p>\n\n<pre><code>   ---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n&lt;ipython-input-76-9d98d7b11202&gt; in &lt;module&gt;\n      2 from sklearn.neighbors import KNeighborsClassifier\n      3 \n----&gt; 4 X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.3)\n      5 \n      6 print(X_train)\n\n~/opt/anaconda3/lib/python3.7/site-packages/sklearn/model_selection/_split.py in train_test_split(*arrays, **options)\n   2094         raise TypeError(\"Invalid parameters passed: %s\" % str(options))\n   2095 \n-&gt; 2096     arrays = indexable(*arrays)\n   2097 \n   2098     n_samples = _num_samples(arrays[0])\n\n~/opt/anaconda3/lib/python3.7/site-packages/sklearn/utils/validation.py in indexable(*iterables)\n    228         else:\n    229             result.append(np.array(X))\n--&gt; 230     check_consistent_length(*result)\n    231     return result\n    232 \n\n~/opt/anaconda3/lib/python3.7/site-packages/sklearn/utils/validation.py in check_consistent_length(*arrays)\n    203     if len(uniques) &gt; 1:\n    204         raise ValueError(\"Found input variables with inconsistent numbers of\"\n--&gt; 205                          \" samples: %r\" % [int(l) for l in lengths])\n    206 \n    207 \n\nValueError: Found input variables with inconsistent numbers of samples: [24946, 22451400]\n</code></pre>\n\n<p>How to prepare the training the data properly?\nBtw. I don't want to use deep learning. This will be the next step for me.</p>\n\n<p>Would appreciate any help here..</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 3517, "user_id": 785400, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/6c07d8b5af42f5c4d21b169dcfd1bda0?s=128&d=identicon&r=PG", "display_name": "Brian Dant", "link": "https://stackoverflow.com/users/785400/brian-dant"}, "edited": false, "score": 1, "creation_date": 1576105841, "post_id": 59294857, "comment_id": 104795311, "body": "The error in the title of your question indicates that you&#39;re somewhere trying to call <code>reverse</code> without any <code>pk</code>. Where is the <code>AvailabiltyList</code> view? Can you post it along with your other views? (Also, I don&#39;t see you using the <code>staff_list</code> view, which is on your model.)"}, {"owner": {"reputation": 1922, "user_id": 4934984, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8c959e6ff4a1b49733025dfa53bafcb6?s=128&d=identicon&r=PG", "display_name": "Tushortz", "link": "https://stackoverflow.com/users/4934984/tushortz"}, "edited": false, "score": 0, "creation_date": 1576112834, "post_id": 59294857, "comment_id": 104796868, "body": "you need to use <code>re_path</code> instead of <code>path</code>"}, {"owner": {"reputation": 309, "user_id": 12501197, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Nq9g3a89IRY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfCkMgk85C0Q_Z9eIeiZq5-75NgZg/photo.jpg?sz=128", "display_name": "Maxim Vallee", "link": "https://stackoverflow.com/users/12501197/maxim-vallee"}, "edited": false, "score": 0, "creation_date": 1576173720, "post_id": 59294857, "comment_id": 104822913, "body": "Thank you for your feedback! Yes, I just updated the question with the AvailabiltyList view. I spent some time and realized that both the Update and Delete templates called the AvailabiltyList view, but did not have pk assigned to it. For some reason, I thought that the error had to do with the current template, but it had to do with Update and Delete templates. My bad."}, {"owner": {"reputation": 309, "user_id": 12501197, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Nq9g3a89IRY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfCkMgk85C0Q_Z9eIeiZq5-75NgZg/photo.jpg?sz=128", "display_name": "Maxim Vallee", "link": "https://stackoverflow.com/users/12501197/maxim-vallee"}, "edited": false, "score": 0, "creation_date": 1576174204, "post_id": 59294857, "comment_id": 104823088, "body": "Just to be more clear for other people in similar situation: the Update and Delete templates called the AvailabiltyList view (like so: {% url &#39;availability_list&#39; %}}), but did not have pk assigned to it  (like so: {% url &#39;availability_list&#39; pk=availability.pk %}}). My confusion came from the fact that generally a &quot;list&quot; does not require pk assignment. But here, I&#39;m using &quot;list&quot; in the name of the view AvailabiltyList to refer to a specific user&#39;s availability list (which is in fact a detail view). It thus requires pk assignment."}], "owner": {"reputation": 309, "user_id": 12501197, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Nq9g3a89IRY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfCkMgk85C0Q_Z9eIeiZq5-75NgZg/photo.jpg?sz=128", "display_name": "Maxim Vallee", "link": "https://stackoverflow.com/users/12501197/maxim-vallee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1576173317, "creation_date": 1576102147, "last_edit_date": 1576173317, "question_id": 59294857, "link": "https://stackoverflow.com/questions/59294857/noreversematch-at-availability-1-edit-reverse-for-availability-list-with-no", "title": "NoReverseMatch at /availability/1/edit/ Reverse for &#39;availability_list&#39; with no arguments not found. Tried: [&#39;availability\\\\/(?P&lt;pk&gt;[0-9]+)\\\\/list$&#39;]", "body": "<p>I'm getting this error using Django 3 when trying to either 1) create a new object (CreateView), or 2) edit an existing one (UpdateView). Using CBVs and ModelForms. </p>\n\n<p>I explored similar questions on Stackoverflow. Very often, it's about the template missing pk reference, but I triple-checked that and it doesn't seem to be the case.</p>\n\n<p>Any idea?</p>\n\n<p>Here are my codes:</p>\n\n<p><strong>URLs</strong></p>\n\n<pre><code>path('availability/&lt;int:pk&gt;/list', views.AvailabilityListView.as_view(), name='availability_list'),\npath('availability/new/', views.AvailabilityCreateView.as_view(), name='availability_new'),\npath('availability/&lt;int:pk&gt;/edit/', views.AvailabilityUpdateView.as_view(), name='availability_edit'),\n</code></pre>\n\n<p><strong>Views</strong></p>\n\n<pre><code>class AvailabilityUpdateView(UpdateView):\n    template_name = 'crm/availability_form.html'\n    form_class = AvailabilityForm\n    model = Availability\n\nclass AvailabilityUpdateView(UpdateView):\n    template_name = 'crm/availability_form.html'\n    form_class = AvailabilityForm\n    model = Availability\n\nclass AvailabilityListView(TemplateView):\n    template_name = 'crm/availability_list.html'\n\n    def get_context_data(self, **kwargs):\n        user = self.request.user\n        kwargs['availabilities'] = Availability.objects.filter(staff__manager=Manager.objects.get(user=user)).filter(staff=self.kwargs['pk'])\n        return super().get_context_data(**kwargs)\n</code></pre>\n\n<p><strong>Forms</strong></p>\n\n<pre><code>class AvailabilityForm(forms.ModelForm):\n\n    class Meta():\n        model = Availability\n        exclude = []\n</code></pre>\n\n<p><strong>Models</strong></p>\n\n<pre><code>class Availability(models.Model):\n    staff = models.ForeignKey(Staff, on_delete=models.CASCADE)\n    start = models.DateTimeField()\n    end = models.DateTimeField()\n\n    class Meta:\n        verbose_name_plural = \"Availabilities\"\n\n    def get_absolute_url(self):\n        return reverse('staff_list')\n</code></pre>\n\n<p><strong>Template</strong></p>\n\n<pre><code>{% block body_block %}\n  &lt;div class=\"container\"&gt;\n    &lt;div class=\"heading\"&gt;\n      &lt;h1&gt;Availability&lt;/h1&gt;\n      &lt;a class = 'btn btn-primary' href=\"{% url 'availability_new' %}\"&gt;+Create new availability&lt;/a&gt;\n    &lt;/div&gt;\n    &lt;hr/&gt;\n    {% if availabilities %}\n    &lt;table class=\"table\"&gt;\n      &lt;tbody&gt;\n        {% for availability in availabilities %}\n        &lt;tr&gt;\n          &lt;td&gt;{{availability.pk}}&lt;/td&gt;\n          &lt;td&gt;{{availability.staff}}&lt;/td&gt;\n          &lt;td&gt;{{availability.start}}&lt;/td&gt;\n          &lt;td&gt;{{availability.end}}&lt;/td&gt;\n          &lt;td&gt;\n            &lt;a href=\"{% url 'availability_edit' pk=availability.pk %}\"&gt;Edit&lt;/a&gt;\n          &lt;/td&gt;\n        &lt;/tr&gt;\n        {% endfor %}\n      &lt;/tbody&gt;\n    &lt;/table&gt;\n    {% else %}\n    &lt;p class='empty'&gt;Staff does not have any availability&lt;/p&gt;\n  {% endif %}\n  &lt;/div&gt;\n{% endblock %}\n</code></pre>\n"}, {"tags": ["python", "aws-lambda", "logstash", "structlog"], "comments": [{"owner": {"reputation": 2388, "user_id": 476759, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/174e7b0ff60963f821d0b9a4f1a3ef52?s=128&d=identicon&r=PG", "display_name": "hynek", "link": "https://stackoverflow.com/users/476759/hynek"}, "edited": false, "score": 1, "creation_date": 1576142546, "post_id": 59294839, "comment_id": 104805431, "body": "That seems to be less of structlog and more of a logging/logstash question? Do yoou have the same problems if you take structlog out of the equation anmd user logging directly?"}, {"owner": {"reputation": 5449, "user_id": 183362, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/22fe5ae8af7189ac8276be26f5d9e1f2?s=128&d=identicon&r=PG", "display_name": "Tim Clemons", "link": "https://stackoverflow.com/users/183362/tim-clemons"}, "reply_to_user": {"reputation": 2388, "user_id": 476759, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/174e7b0ff60963f821d0b9a4f1a3ef52?s=128&d=identicon&r=PG", "display_name": "hynek", "link": "https://stackoverflow.com/users/476759/hynek"}, "edited": false, "score": 0, "creation_date": 1576254261, "post_id": 59294839, "comment_id": 104851982, "body": "Independently, structlog and logstash-async work.  I just need them integrated."}, {"owner": {"reputation": 7035, "user_id": 860421, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/iSRRn.jpg?s=128&g=1", "display_name": "0xc0de", "link": "https://stackoverflow.com/users/860421/0xc0de"}, "edited": false, "score": 0, "creation_date": 1604321512, "post_id": 59294839, "comment_id": 114303438, "body": "I have been facing this problem as well. I believe you have the security groups fixed for this, but bringing that up if that helps anyone. It&#39;s not yet solved for me, did you get it working?"}], "owner": {"reputation": 5449, "user_id": 183362, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/22fe5ae8af7189ac8276be26f5d9e1f2?s=128&d=identicon&r=PG", "display_name": "Tim Clemons", "link": "https://stackoverflow.com/users/183362/tim-clemons"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 205, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1576102084, "creation_date": 1576102084, "question_id": 59294839, "link": "https://stackoverflow.com/questions/59294839/streaming-structlog-events-to-logstash", "title": "Streaming structlog events to Logstash", "body": "<p>I'm attempting to use structlog in an AWS Lambda function and directly stream log events to our Logstash server.  To this end, I'm using the logstash-async library using the beats transport layer.</p>\n\n<p>The code:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from constants import LOGSTASH_HOST, LOGSTASH_PORT\nfrom logstash_async.handler import AsynchronousLogstashHandler\nfrom logstash_async.transport import BeatsTransport\nfrom s4utils.exceptions import CatConfigNotFoundException\nimport structlog\nfrom structlog.stdlib import LoggerFactory, BoundLogger\n\ndef get_log():\n    logstash_handler = AsynchronousLogstashHandler(\n        LOGSTASH_HOST,\n        LOGSTASH_PORT,\n        database_path=None,\n        transport=BeatsTransport)\n    logging.basicConfig(\n        level=logging.INFO,\n        format='%(message)s',\n        handlers=[logstash_handler, logging.StreamHandler(sys.stdout)])\n    structlog.configure(\n        wrapper_class=BoundLogger,\n        logger_factory=LoggerFactory(),\n        processors=[structlog.processors.TimeStamper(fmt='iso', utc=True),\n                    structlog.processors.JSONRenderer()])\n    return structlog.get_logger().new(fields={'type': 'aws-lambda'})\n\n</code></pre>\n\n<p>I find that while I can see the stdout logging in CloudWatch, the Logstash server doesn't appear to be receiving events.</p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"comments": [{"owner": {"reputation": 12091, "user_id": 1391717, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/oSSdx.jpg?s=128&g=1", "display_name": "Matthew Moisen", "link": "https://stackoverflow.com/users/1391717/matthew-moisen"}, "edited": false, "score": 0, "creation_date": 1576103882, "post_id": 59294875, "comment_id": 104794720, "body": "Regarding the OverflowError, I ran this on both 64 and 32 bit, and you are right I only saw it on 32 bit."}, {"owner": {"reputation": 12091, "user_id": 1391717, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/oSSdx.jpg?s=128&g=1", "display_name": "Matthew Moisen", "link": "https://stackoverflow.com/users/1391717/matthew-moisen"}, "edited": false, "score": 0, "creation_date": 1576103948, "post_id": 59294875, "comment_id": 104794740, "body": "Do you happen to know of the documentation that explains this? I would like to read up on why this implementation was decided."}, {"owner": {"reputation": 15430, "user_id": 4518341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVuAv.png?s=128&g=1", "display_name": "wjandrea", "link": "https://stackoverflow.com/users/4518341/wjandrea"}, "reply_to_user": {"reputation": 12091, "user_id": 1391717, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/oSSdx.jpg?s=128&g=1", "display_name": "Matthew Moisen", "link": "https://stackoverflow.com/users/1391717/matthew-moisen"}, "edited": false, "score": 3, "creation_date": 1576104004, "post_id": 59294875, "comment_id": 104794758, "body": "@Matthew <a href=\"https://docs.python.org/3/reference/expressions.html#membership-test-details\" rel=\"nofollow noreferrer\">Expressions &gt; Membership test operations</a>, also <a href=\"https://docs.python.org/3/reference/datamodel.html#object.__contains__\" rel=\"nofollow noreferrer\">object.__contains__</a> and the paragraph right above it"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 12091, "user_id": 1391717, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/oSSdx.jpg?s=128&g=1", "display_name": "Matthew Moisen", "link": "https://stackoverflow.com/users/1391717/matthew-moisen"}, "edited": false, "score": 4, "creation_date": 1576104159, "post_id": 59294875, "comment_id": 104794805, "body": "@MatthewMoisen: These defaults were the original behavior of <code>for</code> and <code>in</code>, predating the introduction of <code>__iter__</code> and <code>__contains__</code>. See the Python 1.4 documentation <a href=\"https://docs.python.org/release/1.4/ref/ref5.html#HDR16\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://docs.python.org/release/1.4/ref/ref7.html#HDR2\" rel=\"nofollow noreferrer\">here</a>."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 45, "last_activity_date": 1576103838, "last_edit_date": 1576103838, "creation_date": 1576102225, "answer_id": 59294875, "question_id": 59294781, "link": "https://stackoverflow.com/questions/59294781/python-getitem-and-in-operator-result-in-strange-behavior/59294875#59294875", "title": "Python __getitem__ and in operator result in strange behavior", "body": "<p>If an object doesn't have a <code>__contains__</code> implementation, <code>in</code> falls back on a default that basically works like this:</p>\n\n<pre><code>def default__contains__(self, element):\n    for thing in self:\n        if thing == element:\n            return True\n    return False\n</code></pre>\n\n<p>And if an object doesn't have an <code>__iter__</code> implementation, <code>for</code> falls back on a default that basically works like this:</p>\n\n<pre><code>def default__iter__(self):\n    i = 0\n    try:\n        while True:\n            yield self[i]\n            i += 1\n    except IndexError:\n        pass\n</code></pre>\n\n<p>These defaults are used even if the object is not intended to be a sequence.</p>\n\n<p>Your <code>1 in f</code> and <code>5 in f</code> tests are using the default fallbacks for <code>in</code> and <code>for</code>, leading to the observed behavior. <code>1 in f</code> finds <code>1</code> immediately, but your <code>__getitem__</code> never returns <code>5</code>, so <code>5 in f</code> runs forever.</p>\n\n<p>(Well, actually, on the reference implementation of Python, the default <code>__iter__</code> fallback stores the index in a C-level variable of type <code>Py_ssize_t</code>, so if you wait long enough, that variable maxes out and <a href=\"https://github.com/python/cpython/blob/v3.8.0/Objects/iterobject.c#L60\" rel=\"noreferrer\">Python raises an OverflowError</a>. If you saw that, you must be on a 32-bit Python build. Computers haven't existed long enough for anyone to hit that on a 64-bit Python.)</p>\n"}], "owner": {"reputation": 12091, "user_id": 1391717, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/oSSdx.jpg?s=128&g=1", "display_name": "Matthew Moisen", "link": "https://stackoverflow.com/users/1391717/matthew-moisen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1009, "favorite_count": 6, "accepted_answer_id": 59294875, "answer_count": 1, "score": 34, "last_activity_date": 1576103838, "creation_date": 1576101790, "last_edit_date": 1576103441, "question_id": 59294781, "link": "https://stackoverflow.com/questions/59294781/python-getitem-and-in-operator-result-in-strange-behavior", "title": "Python __getitem__ and in operator result in strange behavior", "body": "<p>What explains the following behavior:</p>\n\n<pre><code>class Foo:\n    def __getitem__(self, item):\n        print(\"?\")\n        return 1\n\nf = Foo()\n\n1 in f  # prints one ? and returns True\n\n5 in f  # prints ? forever until you raise a Keyboard Exception\n\n# Edit: eventually this fails with OverflowError: iter index too large\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1576102090, "post_id": 59294770, "comment_id": 104794136, "body": "what is your expected output ? and your <i>original df</i>"}, {"owner": {"reputation": 1048, "user_id": 6301394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07107ec4f2aa8d9f1d5d7819aaf545ba?s=128&d=identicon&r=PG&f=1", "display_name": "misantroop", "link": "https://stackoverflow.com/users/6301394/misantroop"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1576102437, "post_id": 59294770, "comment_id": 104794256, "body": "Original df is the intraday without Col1. Expected output being the &quot;desired result&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 1048, "user_id": 6301394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07107ec4f2aa8d9f1d5d7819aaf545ba?s=128&d=identicon&r=PG&f=1", "display_name": "misantroop", "link": "https://stackoverflow.com/users/6301394/misantroop"}, "edited": false, "score": 0, "creation_date": 1576103098, "post_id": 59294925, "comment_id": 104794475, "body": "Amazing. I spent three hours and never thought of this."}], "tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": true, "score": 1, "last_activity_date": 1576103207, "last_edit_date": 1576103207, "creation_date": 1576102444, "answer_id": 59294925, "question_id": 59294770, "link": "https://stackoverflow.com/questions/59294770/trouble-upsampling-daily-data-to-intraday-df/59294925#59294925", "title": "Trouble upsampling daily data to intraday df", "body": "<p>IIUC:</p>\n\n<pre><code>idx = pd.MultiIndex.from_arrays(\n          [df2.index.get_level_values(level=0).normalize(),\n           df2.index.get_level_values(level=1)\n          ])\n\ndf2['Col1_'] = df1.loc[idx, 'Col1'].values\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>                          Col1  Col1_\nDateTime            Name             \n2019-12-12 09:10:00 DDD      5      5\n2019-12-12 09:15:00 DDD      5      5\n2019-12-13 09:10:00 DDD      6      6\n2019-12-13 09:15:00 DDD      6      6\n2019-12-13 09:20:00 DDD      6      6\n</code></pre>\n"}], "owner": {"reputation": 1048, "user_id": 6301394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07107ec4f2aa8d9f1d5d7819aaf545ba?s=128&d=identicon&r=PG&f=1", "display_name": "misantroop", "link": "https://stackoverflow.com/users/6301394/misantroop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 59294925, "answer_count": 1, "score": 0, "last_activity_date": 1576103207, "creation_date": 1576101680, "last_edit_date": 1576102527, "question_id": 59294770, "link": "https://stackoverflow.com/questions/59294770/trouble-upsampling-daily-data-to-intraday-df", "title": "Trouble upsampling daily data to intraday df", "body": "<p>I have a multiindex data set where I'm creating a column on daily data that that is based on intraday data. This works fine and I have the daily results. However when I want to add the result to the original df, the column is NaN.</p>\n\n<p>As I understand this is because the original has <code>DateTimeIndex</code> as date <strong>and</strong> time and the daily has a <code>DateTimeIndex</code> with just the date, so they never overlap which means I'm unable to merge. Upsampling is also not an option (<code>ValueError: Upsampling from level= or on= selection is not supported, use .set_index(...) to explicitly set index to datetime-like</code>). How would I go about this by using set_index or correspond each DateTime from daily with the intraday date.</p>\n\n<p>Example of daily:</p>\n\n<pre><code>                              Col1\nDateTime         Name\n2019-12-12       ABC          1\n2019-12-12       DDD          5\n2019-12-13       ABC          2\n2019-12-13       DDD          6\n2019-12-13       WWW          0\n</code></pre>\n\n<p>Desired result in intraday:</p>\n\n<pre><code>                                       Col1\nDateTime                  Name\n2019-12-12 09:10:00       DDD          5\n2019-12-12 09:15:00       DDD          5\n2019-12-13 09:10:00       DDD          6\n2019-12-13 09:15:00       DDD          6\n2019-12-13 09:20:00       DDD          6\n</code></pre>\n"}, {"tags": ["python", "audio", "wave", "spectrogram"], "answers": [{"tags": [], "owner": {"reputation": 5059, "user_id": 1428102, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OEl5y.jpg?s=128&g=1", "display_name": "abhilb", "link": "https://stackoverflow.com/users/1428102/abhilb"}, "is_accepted": false, "score": 0, "last_activity_date": 1576104431, "creation_date": 1576104431, "answer_id": 59295295, "question_id": 59294748, "link": "https://stackoverflow.com/questions/59294748/plot-audio-waveform-and-spectrogram-overlap/59295295#59295295", "title": "Plot audio waveform and spectrogram overlap", "body": "<p>Instead of using subplots use the same axes of a single plot to display both the graphs. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>fig = plt.figure(figsize=(14, 9))\nax = librosa.display.specshow(stft_db, x_axis='time', y_axis='log')\nlibrosa.display.waveplot(y, sr=sr, ax=ax)\nplt.show()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 12521087, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/374d15d4398266e84fb9774a0f24519e?s=128&d=identicon&r=PG&f=1", "display_name": "Ari", "link": "https://stackoverflow.com/users/12521087/ari"}, "edited": false, "score": 0, "creation_date": 1576159032, "post_id": 59295315, "comment_id": 104814568, "body": "Thanks Joe for the quick response! That worked perfectly!"}], "tags": [], "owner": {"reputation": 196, "user_id": 12513994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5db57ea76f9f18ddbd7e2defae26eca?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Habel", "link": "https://stackoverflow.com/users/12513994/joe-habel"}, "is_accepted": false, "score": 1, "last_activity_date": 1576104526, "creation_date": 1576104526, "answer_id": 59295315, "question_id": 59294748, "link": "https://stackoverflow.com/questions/59294748/plot-audio-waveform-and-spectrogram-overlap/59295315#59295315", "title": "Plot audio waveform and spectrogram overlap", "body": "<p>According to librosa, you're able to provide the display methods with an axes to draw the item on, <a href=\"https://librosa.github.io/librosa/generated/librosa.display.specshow.html#librosa.display.specshow\" rel=\"nofollow noreferrer\">specshow</a>, <a href=\"https://librosa.github.io/librosa/generated/librosa.display.waveplot.html\" rel=\"nofollow noreferrer\">waveplot</a>. I'd recommend defining your matplotlib figure and subplots outright, and then giving librosa the axes to plot them on.</p>\n\n<pre><code>fig = plt.figure(figsize=(14, 9)) #This setups the figure\nax1 = fig.subplots() #Creates the Axes object to display one of the plots\nax2 = ax1.twinx() #Creates a second Axes object that shares the x-axis\n\nlibrosa.display.specshow(stft_db, x_axis='time', y_axis='log', ax=ax1)\nlibrosa.display.waveplot(y, sr=sr, ax=ax2)\nplt.show()\n</code></pre>\n\n<p>There might be some more formatting to be done to get the desired look, I'd recommend taking a look at <a href=\"https://matplotlib.org/gallery/api/two_scales.html\" rel=\"nofollow noreferrer\">this example</a> from matplotlib, for a similar shared axes plot.</p>\n"}], "owner": {"reputation": 11, "user_id": 12521087, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/374d15d4398266e84fb9774a0f24519e?s=128&d=identicon&r=PG&f=1", "display_name": "Ari", "link": "https://stackoverflow.com/users/12521087/ari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1380, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1576106197, "creation_date": 1576101584, "last_edit_date": 1576106197, "question_id": 59294748, "link": "https://stackoverflow.com/questions/59294748/plot-audio-waveform-and-spectrogram-overlap", "title": "Plot audio waveform and spectrogram overlap", "body": "<p>I am working with audio using librosa, and I need to plot the spectrogram and waveform in the same display.</p>\n\n<p>My code:</p>\n\n<pre><code>plt.figure(figsize=(14, 9))\n\nplt.figure(1)\n\nplt.subplot(211)\nplt.title('Spectrogram')\nlibrosa.display.specshow(stft_db, x_axis='time', y_axis='log')\n\nplt.subplot(212)\nplt.title('Audioform')\nlibrosa.display.waveplot(y, sr=sr)\n</code></pre>\n\n<p>Using this code I get this plot</p>\n\n<p><img src=\"https://i.stack.imgur.com/MD4JU.png\" alt=\"\"></p>\n\n<p>But I need something like this</p>\n\n<p><img src=\"https://i.stack.imgur.com/RAM2O.png\" alt=\"\"></p>\n"}, {"tags": ["python", "json", "pandas"], "comments": [{"owner": {"reputation": 144, "user_id": 9201100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6ede669acd2f4fec29a210459c9f4de?s=128&d=identicon&r=PG&f=1", "display_name": "Rach Odwyer", "link": "https://stackoverflow.com/users/9201100/rach-odwyer"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1576102032, "post_id": 59294729, "comment_id": 104794121, "body": "I actually think the screenshots help explain the problem a lot better then trying to reconstruct in markdown. I mentioned flask becuase that was the framework I was using and ok i missed one tag. Must of had a rough day to downvote with out giving the poster a chance to modify"}, {"owner": {"reputation": 1533, "user_id": 10569027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dPPb9.jpg?s=128&g=1", "display_name": "GiovaniSalazar", "link": "https://stackoverflow.com/users/10569027/giovanisalazar"}, "edited": false, "score": 0, "creation_date": 1576102165, "post_id": 59294729, "comment_id": 104794166, "body": "can you share us a few example fo your dataframe in a csv file  ? <a href=\"https://www.transferbigfiles.com/\" rel=\"nofollow noreferrer\">transferbigfiles.com</a>"}, {"owner": {"reputation": 8411, "user_id": 2399775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a2523b23d09e0bfc15d3a77e505271?s=128&d=identicon&r=PG", "display_name": "wpercy", "link": "https://stackoverflow.com/users/2399775/wpercy"}, "edited": false, "score": 2, "creation_date": 1576102443, "post_id": 59294729, "comment_id": 104794261, "body": "you&#39;re incorrect in that the screenshots explain the problem better. it makes it significantly more difficult for us to help you if we have to open your code in another window to look at it and don&#39;t have the ability to copy/paste into our own shell. screenshots can add additional context but do not take the place of code."}, {"owner": {"reputation": 144, "user_id": 9201100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6ede669acd2f4fec29a210459c9f4de?s=128&d=identicon&r=PG&f=1", "display_name": "Rach Odwyer", "link": "https://stackoverflow.com/users/9201100/rach-odwyer"}, "edited": false, "score": 0, "creation_date": 1576102618, "post_id": 59294729, "comment_id": 104794311, "body": "added simple example"}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576115191, "post_id": 59294729, "comment_id": 104797324, "body": "Those backslashes serve a purpose, no?"}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576115852, "post_id": 59294729, "comment_id": 104797465, "body": "Also, can you share the data? I\u2019m curious to try something."}], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 12239501, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-oGJGq0o99oo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdTdC8Id_jbtVa2tdkiU_wDFmLOtg/photo.jpg?sz=128", "display_name": "Giuseppe Saraceno", "link": "https://stackoverflow.com/users/12239501/giuseppe-saraceno"}, "is_accepted": true, "score": 2, "last_activity_date": 1576104389, "creation_date": 1576104389, "answer_id": 59295285, "question_id": 59294729, "link": "https://stackoverflow.com/questions/59294729/creating-json-from-multiple-dataframes-python/59295285#59295285", "title": "Creating JSON from multiple dataframes python", "body": "<p>Hi I think that you are on the right way.\nMy advice is to use also json.loads to decode json and create a list of dictionary.</p>\n\n<p>As you said before we can create a pandas dataframe and then use <strong>df.to_json</strong> to convert itself.\nThen use <strong>json.loads</strong> to json format data and create a dictionary to insert into a list e.g. :</p>\n\n<pre><code>data = {}\njsdf = df.to_json(orient = \"records\")\ndata[\"result\"] = json.loads(jsdf)\n</code></pre>\n\n<p>Adding elements to dictionary as below you will find a situation like this:</p>\n\n<blockquote>\n  <p>{\"result1\": [{...}], \"result2\": [{...}]}</p>\n</blockquote>\n\n<p><strong>PS:</strong>\nIf you want to generate random values for different dataframe you can use faker library from python.\ne.g.:</p>\n\n<pre><code>from faker import Faker\n\nfaker = Faker()\n\nfor n in range(5):\n    df.append(list(faker.profile().values()))\ndf = pd.DataFrame(df, columns=faker.profile().keys())\n</code></pre>\n"}], "owner": {"reputation": 144, "user_id": 9201100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6ede669acd2f4fec29a210459c9f4de?s=128&d=identicon&r=PG&f=1", "display_name": "Rach Odwyer", "link": "https://stackoverflow.com/users/9201100/rach-odwyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 540, "favorite_count": 0, "accepted_answer_id": 59295285, "answer_count": 1, "score": 0, "last_activity_date": 1576104389, "creation_date": 1576101495, "last_edit_date": 1576102528, "question_id": 59294729, "link": "https://stackoverflow.com/questions/59294729/creating-json-from-multiple-dataframes-python", "title": "Creating JSON from multiple dataframes python", "body": "<p>My code works perfect fine for 1 dataframe using the <code>to_json</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/YWM4j.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YWM4j.png\" alt=\"enter image description here\"></a></p>\n\n<p>However now i would like to have a 2nd dataframe in this result.</p>\n\n<p>So I thought creating a dictionary would be the answer.</p>\n\n<p>However it produces the result below which is not practical.</p>\n\n<p>Any help please</p>\n\n<p>I was hoping to produce something a lot prettier without all the \"\\\"</p>\n\n<p><a href=\"https://i.stack.imgur.com/7Lxh9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7Lxh9.png\" alt=\"enter image description here\"></a></p>\n\n<p>A simple good example </p>\n\n<pre><code>import pandas as pd\ndata = {'Name':['Tom', 'Jack', 'Steve', 'Ricky'],'Age':[28,34,29,42]}\ndf = pd.DataFrame(data)\ndf.to_json(orient='records')\n</code></pre>\n\n<p>A simple bad example </p>\n\n<pre><code>import pandas as pd\ndata = {'Name':['Tom', 'Jack', 'Steve', 'Ricky'],'Age':[28,34,29,42]}\ndf = pd.DataFrame(data)\n{\"result_1\": df.to_json(orient='records')}\n</code></pre>\n\n<p>I also tried</p>\n\n<pre><code>jsonify({\"result_1\": df.to_json(orient='records')})\n</code></pre>\n\n<p>and </p>\n\n<pre><code>{\"result_1\": [df.to_json(orient='records')]}\n</code></pre>\n"}, {"tags": ["python", "django", "ajax", "cookies"], "answers": [{"tags": [], "owner": {"reputation": 101, "user_id": 7558991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mMpGw.jpg?s=128&g=1", "display_name": "Ryan Marvin", "link": "https://stackoverflow.com/users/7558991/ryan-marvin"}, "is_accepted": true, "score": 1, "last_activity_date": 1576112584, "creation_date": 1576112584, "answer_id": 59296283, "question_id": 59294721, "link": "https://stackoverflow.com/questions/59294721/cannot-access-cookies-after-redirect-in-django/59296283#59296283", "title": "Cannot access cookies after redirect in django", "body": "<p>Because of the <a href=\"https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy\" rel=\"nofollow noreferrer\">Same-origin Policy</a>, you cannot access the cookies for a different domain.</p>\n\n<blockquote>\n  <p>Access to data stored in the browser such as localStorage and\n  IndexedDB are separated by origin. Each origin gets its own separate\n  storage, and JavaScript in one origin cannot read from or write to the\n  storage belonging to another origin.</p>\n</blockquote>\n\n<p>However, if domain B is a subdomain of A, it will automatically have visibility into the cookies for domain A. If you cannot change the domains, you should redirect to site B with the cookies in the request headers/body.</p>\n"}], "owner": {"reputation": 15, "user_id": 9922660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00384707951303f26dfc211a063aec5e?s=128&d=identicon&r=PG&f=1", "display_name": "Jay", "link": "https://stackoverflow.com/users/9922660/jay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 396, "favorite_count": 0, "accepted_answer_id": 59296283, "answer_count": 1, "score": 1, "last_activity_date": 1576112584, "creation_date": 1576101458, "question_id": 59294721, "link": "https://stackoverflow.com/questions/59294721/cannot-access-cookies-after-redirect-in-django", "title": "Cannot access cookies after redirect in django", "body": "<p>Here is situation I've dealt with. I will try to explain as much as easier to understand.</p>\n\n<p>I want user to click on a button in the website (let's name this site A) which fires an ajax post request to django view. Within this view I have <code>response.set_cookie</code> to set cookie with data that is passed along with ajax post request.</p>\n\n<p>After success response, then I quickly redirect page to different website (let say this site is B). When page loads, I want to access cookies what I've set from site A but cannot access.</p>\n\n<p>Below is my code.</p>\n\n<p><strong>index.html (in site A, where the ajax post request is made)</strong></p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n\n&lt;head&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n    &lt;button onclick=setCookies()&gt;Create Invoice&lt;/button&gt;\n&lt;/body&gt;\n&lt;script src=\"https://code.jquery.com/jquery-3.4.1.min.js\"\n    integrity=\"sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=\" crossorigin=\"anonymous\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\"&gt;\n    const setCookies = () =&gt; {\n\n        ...some codes...\n\n        const xhr = new XMLHttpRequest()\n\n        const data = {\n            'HTTP_LOGIN_TYPE': 'admin',\n        }\n\n        $.ajax(\n            {\n                type: 'POST',\n                url: url, // hits endpoint where sets cookies.\n                crossDomain: true,\n                data: data,\n                success: () =&gt; {\n                    window.location.href = to site B\n                },\n                error: xhr =&gt; {\n                    console.log(xhr.responseText)\n                }\n            }\n        )\n    }\n&lt;/script&gt;\n\n&lt;/html&gt;\n</code></pre>\n\n<p><strong>views.py (in site B, where sets the cookies)</strong></p>\n\n<pre><code>from django.http import HttpResponse\nfrom django.conf import settings\nfrom rest_framework.views import APIView\n\nclass AuthenticateUser(APIView):\n\n    def post(self, request):\n\n        data = request.POST\n        login_type = data['HTTP_LOGIN_TYPE']\n\n        if login_type == 'admin':\n            response = HttpResponse(\n                'Setting login_type to %s' % login_type)\n            response.set_cookie(\n                'login_type', login_type, max_age=604800, domain=settings.SESSION_COOKIE_DOMAIN)\n\n            return response\n</code></pre>\n\n<p><strong>views.py (in site B, redirected from ajax call in index.html, where I want to access cookies)</strong></p>\n\n<pre><code>import re\nfrom django.db import DatabaseError\nfrom rest_framework.response import Response\nfrom rest_framework.renderers import TemplateHTMLRenderer\nfrom rest_framework.views import APIView\n\n\nclass GetInvoice(APIView):\n    renderer_classes = [TemplateHTMLRenderer]\n    template_name = 'student/base.html'\n\n    def get(self, request, student_id):\n\n        login_type = 'hello'\n\n        if 'login_type' in request.COOKIES:\n            login_type = request.COOKIES['login_type'] # Can't access cookies\n\n       ... more code ...\n</code></pre>\n\n<p>FYI, <code>url</code> in <code>index.html</code> and site B's domain are same, though site A and B's domains are different.</p>\n\n<p>I am not sure what am I missing. I've been searching articles, posts, etc for last couple days and tried based on them but no luck.</p>\n\n<p>Correct me if I missed anything.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "tensorflow", "keras", "google-colaboratory"], "comments": [{"owner": {"reputation": 152, "user_id": 3224454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/66de0bb929e2d653161fab8262244538?s=128&d=identicon&r=PG&f=1", "display_name": "user3224454", "link": "https://stackoverflow.com/users/3224454/user3224454"}, "edited": false, "score": 0, "creation_date": 1576106396, "post_id": 59294702, "comment_id": 104795457, "body": "I believe &#39;mae&#39; is not included in the history, have you initialized the variable properly as the docs suggest?"}, {"owner": {"reputation": 33, "user_id": 4725438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abecb2bb86a2a08d3a2a3ef603dc8a58?s=128&d=identicon&r=PG&f=1", "display_name": "lv2311", "link": "https://stackoverflow.com/users/4725438/lv2311"}, "reply_to_user": {"reputation": 152, "user_id": 3224454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/66de0bb929e2d653161fab8262244538?s=128&d=identicon&r=PG&f=1", "display_name": "user3224454", "link": "https://stackoverflow.com/users/3224454/user3224454"}, "edited": false, "score": 0, "creation_date": 1576790028, "post_id": 59294702, "comment_id": 105021212, "body": "Thank you. @tharina11 suggestion fixed the issue."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 4725438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abecb2bb86a2a08d3a2a3ef603dc8a58?s=128&d=identicon&r=PG&f=1", "display_name": "lv2311", "link": "https://stackoverflow.com/users/4725438/lv2311"}, "edited": false, "score": 0, "creation_date": 1576789945, "post_id": 59399305, "comment_id": 105021180, "body": "Thanks, @tharina11! That worked! Could you elaborate more on why <code>mae</code> doesn&#39;t work? Is it a keras version issue?"}, {"owner": {"reputation": 11, "user_id": 12560940, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB9e8YDgB83xnIKy2DV3GwiMG-pq2kWPon6S0ZIpQ=k-s128", "display_name": "tharina11", "link": "https://stackoverflow.com/users/12560940/tharina11"}, "reply_to_user": {"reputation": 33, "user_id": 4725438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abecb2bb86a2a08d3a2a3ef603dc8a58?s=128&d=identicon&r=PG&f=1", "display_name": "lv2311", "link": "https://stackoverflow.com/users/4725438/lv2311"}, "edited": false, "score": 0, "creation_date": 1576816771, "post_id": 59399305, "comment_id": 105026735, "body": "It is not a keras error. I ran the exact code provided in the colab notebook (<a href=\"https://www.tensorflow.org/tutorials/keras/regression\" rel=\"nofollow noreferrer\">tensorflow.org/tutorials/keras/regression</a>) provided in the video description. Two cells before you plot this graph, there is an output table which is the data source of your plotting code. There I saw  &#39;mean_absolute_error&#39; instead of &#39;mae&#39; (that is the parameter you are plotting in the graph). :)"}], "tags": [], "owner": {"reputation": 11, "user_id": 12560940, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB9e8YDgB83xnIKy2DV3GwiMG-pq2kWPon6S0ZIpQ=k-s128", "display_name": "tharina11", "link": "https://stackoverflow.com/users/12560940/tharina11"}, "is_accepted": false, "score": 1, "last_activity_date": 1576699576, "creation_date": 1576699576, "answer_id": 59399305, "question_id": 59294702, "link": "https://stackoverflow.com/questions/59294702/keyerror-mae-when-plotting-keras-model-training-progress/59399305#59399305", "title": "KeyError: &#39;mae&#39; when plotting Keras model training progress", "body": "<p>replace 'mae' in your code with 'mean_absolute_error'.</p>\n"}], "owner": {"reputation": 33, "user_id": 4725438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abecb2bb86a2a08d3a2a3ef603dc8a58?s=128&d=identicon&r=PG&f=1", "display_name": "lv2311", "link": "https://stackoverflow.com/users/4725438/lv2311"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1273, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1576699576, "creation_date": 1576101344, "question_id": 59294702, "link": "https://stackoverflow.com/questions/59294702/keyerror-mae-when-plotting-keras-model-training-progress", "title": "KeyError: &#39;mae&#39; when plotting Keras model training progress", "body": "<p>I'm following the exact same code as shown on the <a href=\"https://www.tensorflow.org/tutorials/keras/regression\" rel=\"nofollow noreferrer\">Kearas regression models</a> tutorial but am unable to access the <code>tfdocs.plots.HistoryPlotter()</code> method. (New to Google Colab and TensorFlow). The rest of the cells work beside the training progress plots. </p>\n\n<p>Code snippet triggering the error:</p>\n\n<pre><code>plotter.plot({'Basic': history}, metric = 'mae') plt.ylim([0, 10])\nplt.ylabel('MAE [MPG]')\n</code></pre>\n\n<p>And the error:</p>\n\n<pre><code>KeyError                                  Traceback (most recent call last)\n&lt;ipython-input-25-deee24f0bc59&gt; in &lt;module&gt;()\n----&gt; 1 plotter.plot({'Basic': history}, metric = 'mae')\n      2 plt.ylim([0, 10])\n      3 plt.ylabel('MAE [MPG]')\n\n/usr/local/lib/python3.6/dist-packages/tensorflow_docs/plots/__init__.py in plot(self, histories, metric, smoothing_std)\n     86         self.color_table[name] = color\n     87 \n---&gt; 88       train_value = history.history[metric]\n     89       val_value = history.history['val_' + metric]\n     90       if smoothing_std is not None:\n\nKeyError: 'mae'\n</code></pre>\n\n<p>And also importing the necessary functions from tensorflow_docs (as showed on tutorial page) without any errors:</p>\n\n<pre><code>!pip install -q git+https://github.com/tensorflow/docs\n</code></pre>\n\n<p>Any help is very appreciated!</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 4, "creation_date": 1576101608, "post_id": 59294699, "comment_id": 104793981, "body": "what is the name of script?"}], "answers": [{"comments": [{"owner": {"reputation": 687, "user_id": 6775809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBqjI.jpg?s=128&g=1", "display_name": "GTA.sprx", "link": "https://stackoverflow.com/users/6775809/gta-sprx"}, "edited": false, "score": 0, "creation_date": 1576102781, "post_id": 59294810, "comment_id": 104794367, "body": "I did infact have my test file named progressbar.py which I can&#39;t believe I did. However after fixing that and even trying a new file in a new directory I am still getting this error"}], "tags": [], "owner": {"reputation": 3671, "user_id": 2826937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmIdz.png?s=128&g=1", "display_name": "Alexandr Shurigin", "link": "https://stackoverflow.com/users/2826937/alexandr-shurigin"}, "is_accepted": true, "score": 3, "last_activity_date": 1576103101, "last_edit_date": 1576103101, "creation_date": 1576101939, "answer_id": 59294810, "question_id": 59294699, "link": "https://stackoverflow.com/questions/59294699/progressbar-typeerror-module-object-is-not-callable/59294810#59294810", "title": "progressbar - TypeError: &#39;module&#39; object is not callable", "body": "<p>It seems like you have the script name <code>progressbar.py</code> as well :) or a folder with the example. Try to rename the folder where you have your test script and the script file if it is named <code>progressbar</code>.</p>\n\n<p>One more idea: you are trying to run example for <code>progressbar2</code> library but have installed <code>progressbar</code> (which is a different package) instead.</p>\n\n<p>Please check packages:\n* <a href=\"https://pypi.org/project/progressbar2/\" rel=\"nofollow noreferrer\">https://pypi.org/project/progressbar2/</a>\n* <a href=\"https://pypi.org/project/progressbar/\" rel=\"nofollow noreferrer\">https://pypi.org/project/progressbar/</a></p>\n\n<blockquote>\n  <p>I've just tried your example with installed <code>progressbar</code>, it failed with the same error as you have, after that I installed <code>progressbar2</code> instead and it works well ;)</p>\n\n<pre><code>100% (100 of 100) &gt; |############################################################################| Elapsed Time: 0:00:02 Time:  0:00:02```\n</code></pre>\n</blockquote>\n\n<p>You can list your installed packages and versions using <code>pip freeze</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 39, "user_id": 12248373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0d026bd43a891b03f86dd6806bb5c13?s=128&d=identicon&r=PG&f=1", "display_name": "Balive13", "link": "https://stackoverflow.com/users/12248373/balive13"}, "is_accepted": false, "score": 0, "last_activity_date": 1618338089, "creation_date": 1618338089, "answer_id": 67080385, "question_id": 59294699, "link": "https://stackoverflow.com/questions/59294699/progressbar-typeerror-module-object-is-not-callable/67080385#67080385", "title": "progressbar - TypeError: &#39;module&#39; object is not callable", "body": "<p>I had the same error. You should install both <a href=\"https://pypi.org/project/progressbar/\" rel=\"nofollow noreferrer\">progressbar</a> and <a href=\"https://pypi.org/project/progressbar2/\" rel=\"nofollow noreferrer\">progressbar2</a>, and then try to execute your code by <a href=\"https://pypi.org/project/progressbar/\" rel=\"nofollow noreferrer\">progressbar</a> library.</p>\n"}], "owner": {"reputation": 687, "user_id": 6775809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBqjI.jpg?s=128&g=1", "display_name": "GTA.sprx", "link": "https://stackoverflow.com/users/6775809/gta-sprx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2246, "favorite_count": 0, "accepted_answer_id": 59294810, "answer_count": 2, "score": 1, "last_activity_date": 1618338089, "creation_date": 1576101326, "last_edit_date": 1576101874, "question_id": 59294699, "link": "https://stackoverflow.com/questions/59294699/progressbar-typeerror-module-object-is-not-callable", "title": "progressbar - TypeError: &#39;module&#39; object is not callable", "body": "<p>I'm trying to use the progressbar module but am getting the following error. <code>TypeError: 'module' object is not callable</code> I am testing the exact snippet from the documentation.</p>\n\n<pre><code>import time\nimport progressbar\n\nfor i in progressbar.progressbar(range(100)):\n    time.sleep(0.02)\n</code></pre>\n"}, {"tags": ["python", "selenium", "xpath", "css-selectors", "webdriverwait"], "comments": [{"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576116537, "post_id": 59294649, "comment_id": 104797598, "body": "What have you done to try to solve this?"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 12448330, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAmQ0H9IMSlOGptugrW2R8xmrHFO756FlbkIVsLgA=k-s128", "display_name": "perzsa", "link": "https://stackoverflow.com/users/12448330/perzsa"}, "edited": false, "score": 1, "creation_date": 1576102632, "post_id": 59294783, "comment_id": 104794315, "body": "Thank you so much,Worked"}], "tags": [], "owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "is_accepted": true, "score": 2, "last_activity_date": 1576102169, "last_edit_date": 1576102169, "creation_date": 1576101802, "answer_id": 59294783, "question_id": 59294649, "link": "https://stackoverflow.com/questions/59294649/trying-to-find-submit-button-in-elements/59294783#59294783", "title": "Trying to find submit button in elements", "body": "<p>To identify the <em>submit</em> button with text as <strong>Post Discussion</strong> you can use either of the following <a href=\"https://stackoverflow.com/questions/48369043/official-locator-strategies-for-the-webdriver/48376890#48376890\">Locator Strategies</a>:</p>\n\n<ul>\n<li><p>Using <code>CSS_SELECTOR</code>:</p>\n\n<pre><code>element = driver.find_element_by_css_selector(\"button.btn_green_white_innerfade.btn_medium[id^='commentthread_General_'][id$='_submit']&gt;span\")\n</code></pre></li>\n<li><p>Using <code>XPATH</code>:</p>\n\n<pre><code>element = driver.find_element_by_xpath(\"//button[@class='btn_green_white_innerfade btn_medium' and starts-with(@id, 'commentthread_General_')]/span[text()='Post Discussion']\")\n</code></pre></li>\n</ul>\n\n<hr>\n\n<p>However, as it is a <em>submit</em> button so moving ahead you will invoke <code>click()</code> on it, so you have to induce <em>WebDriverWait</em> for the <code>element_to_be_clickable()</code> and you can use either of the following solutions:</p>\n\n<ul>\n<li><p>Using <code>CSS_SELECTOR</code>:</p>\n\n<pre><code>WebDriverWait(driver, 20).until(EC.element_to_be_clickable((By.CSS_SELECTOR, \"button.btn_green_white_innerfade.btn_medium[id^='commentthread_General_'][id$='_submit']&gt;span\"))).click()\n</code></pre></li>\n<li><p>Using <code>XPATH</code>:</p>\n\n<pre><code>WebDriverWait(driver, 20).until(EC.element_to_be_clickable((By.XPATH, \"//button[@class='btn_green_white_innerfade btn_medium' and starts-with(@id, 'commentthread_General_')]/span[text()='Post Discussion']\"))).click()\n</code></pre></li>\n<li><p><strong>Note</strong> : You have to add the following imports :</p>\n\n<pre><code>from selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support import expected_conditions as EC\n</code></pre></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 5497, "user_id": 11019743, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R8NmK.png?s=128&g=1", "display_name": "Christine", "link": "https://stackoverflow.com/users/11019743/christine"}, "edited": false, "score": 2, "creation_date": 1576101915, "post_id": 59294793, "comment_id": 104794084, "body": "What do you mean, you checked it locally? Pasting HTML into an XPath helper tool and testing against it is great, but there&#39;s no way to guarantee 100% that this works without seeing the whole page. There may be multiple <code>button</code> elements with <code>submit</code> type, or the button may be hidden in an <code>iframe</code> in which case this would not work at all."}, {"owner": {"reputation": 450, "user_id": 9150392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FUfDH.jpg?s=128&g=1", "display_name": "IPolnik", "link": "https://stackoverflow.com/users/9150392/ipolnik"}, "reply_to_user": {"reputation": 5497, "user_id": 11019743, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R8NmK.png?s=128&g=1", "display_name": "Christine", "link": "https://stackoverflow.com/users/11019743/christine"}, "edited": false, "score": 0, "creation_date": 1576165305, "post_id": 59294793, "comment_id": 104818513, "body": "Yes, u r right. I&#39;m always checking that Xpath is working using helper tool. When I&#39;m saying 100% I mean, that Xpath is correct. I agree that, I can&#39;t guarantee, that its gonna work if there is other elements on the page with same attributes or iframes, but since in questions we have only this HTML, it,s should work. Thank u."}, {"owner": {"reputation": 5497, "user_id": 11019743, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R8NmK.png?s=128&g=1", "display_name": "Christine", "link": "https://stackoverflow.com/users/11019743/christine"}, "edited": false, "score": 0, "creation_date": 1576165522, "post_id": 59294793, "comment_id": 104818644, "body": "Your XPath also won&#39;t compile because you have <code>&#39;submit&#39;</code> in single quotes, and your XPath is also enclosed in single quotes. It should be changed to <code>&quot;&#47;&#47;button[@type=&#39;submit&#39;]&quot;</code>."}], "tags": [], "owner": {"reputation": 450, "user_id": 9150392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FUfDH.jpg?s=128&g=1", "display_name": "IPolnik", "link": "https://stackoverflow.com/users/9150392/ipolnik"}, "is_accepted": false, "score": 1, "last_activity_date": 1576166418, "last_edit_date": 1576166418, "creation_date": 1576101844, "answer_id": 59294793, "question_id": 59294649, "link": "https://stackoverflow.com/questions/59294649/trying-to-find-submit-button-in-elements/59294793#59294793", "title": "Trying to find submit button in elements", "body": "<p>Here is your button, works 100%. I checked it locally.</p>\n\n<pre><code>driver.find_element(By.XPATH, \"//button[@type='submit']\")\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 12448330, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAmQ0H9IMSlOGptugrW2R8xmrHFO756FlbkIVsLgA=k-s128", "display_name": "perzsa", "link": "https://stackoverflow.com/users/12448330/perzsa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 59294783, "answer_count": 2, "score": 0, "last_activity_date": 1576247590, "creation_date": 1576101098, "last_edit_date": 1576247590, "question_id": 59294649, "link": "https://stackoverflow.com/questions/59294649/trying-to-find-submit-button-in-elements", "title": "Trying to find submit button in elements", "body": "<p>im trying to code a steambot in python that will post in steamgroup;Im having problem with last step,\ni cant find the sumbit button</p>\n\n<pre><code>&lt;button type=\"submit\" class=\"btn_green_white_innerfade btn_medium\" id=\"commentthread_General_34191408_submit\"&gt;\n                                            &lt;span&gt;Post Discussion&lt;/span&gt;\n                                        &lt;/button&gt;\n</code></pre>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1576100764, "post_id": 59294517, "comment_id": 104793708, "body": "<code>askopenfilename</code> gives you file name which you have to <code>open()</code> and <code>read()</code> and put text to <code>Text</code>. Function executed by button sends <code>return</code> to nowhere and you have to do it all inside <code>openfile()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "is_accepted": true, "score": 1, "last_activity_date": 1576101120, "creation_date": 1576101120, "answer_id": 59294653, "question_id": 59294517, "link": "https://stackoverflow.com/questions/59294517/get-filedialouge-into-tk-text/59294653#59294653", "title": "get filedialouge into tk.text", "body": "<p>It's up to you to do something with the return value of <code>askopenfilename</code>. Returning it from a button callback is pointless because nothing will see the returned value.</p>\n\n<p>For example, you could save it as a global variable used by some other part of your program:</p>\n\n<pre><code>def openfile():\n    global current_file\n    current_file = filedialog.askopenfilename()\n</code></pre>\n\n<p>Another thing you might do is actually open the file and insert the contents into your text widget:</p>\n\n<pre><code>def openfile():\n    global current_file\n    current_file = filedialog.askopenfilename()\n    if current_file:\n        with open(current_file, \"r\") as f:\n            data = f.read()\n            T.insert(\"end\", data)\n</code></pre>\n\n<p>Though, if you're going to immediately open the file you might want to consider using <code>askopenfile</code> rather than <code>askopenfilename</code>. The former opens the file and returns a handle, the later simply returns the filename.</p>\n"}, {"comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1576110434, "post_id": 59294686, "comment_id": 104796417, "body": "text indexes are strings, not floating point numbers. A floating point will work, but only for certain values (eg: the floating point <code>1.10</code> and the string <code>&quot;1.10&quot;</code> represent two different characters)"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1576113008, "post_id": 59294686, "comment_id": 104796911, "body": "@BryanOakley I added in code infomation about your comment."}], "tags": [], "owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "is_accepted": false, "score": 0, "last_activity_date": 1576112920, "last_edit_date": 1576112920, "creation_date": 1576101252, "answer_id": 59294686, "question_id": 59294517, "link": "https://stackoverflow.com/questions/59294517/get-filedialouge-into-tk-text/59294686#59294686", "title": "get filedialouge into tk.text", "body": "<p>Button can't get value returned from function. You may have to do all inside <code>openfile</code> - open file, read it and put text in <code>Text</code></p>\n\n<pre><code># from tkinter import * # not preferred\nimport tkinter as tk\nfrom tkinter import ttk\nfrom tkinter import filedialog\n\n# --- functions ---\n\ndef openfile():\n    filename = filedialog.askopenfilename()\n    if filename:\n        data = open(filename).read()\n        text.delete('1.0', 'end') # see Bryan Oakley comment why it is better to use string instead of float (but in this situation float 1.0 would work as expected)\n        text.insert('end', data)\n\n# --- main ---\n\ninterface = tk.Tk()\ninterface.geometry(\"500x500\")\ninterface.title(\"Text display\")\n\nbutton = ttk.Button(interface, text=\"Open text File\", command=openfile)\nbutton.grid(column=1, row=1)\n\ntext = tk.Text(interface, height=2, width=30)\ntext.grid(column=1, row=2)\n\ntext.insert('end', \"text file contents here\")\n\ninterface.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 9587239, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8PFk5osoaqs/AAAAAAAAAAI/AAAAAAAAAD0/6gcXlvaeAFM/photo.jpg?sz=128", "display_name": "Johann Davel De Beer", "link": "https://stackoverflow.com/users/9587239/johann-davel-de-beer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 59294653, "answer_count": 2, "score": -1, "last_activity_date": 1576112920, "creation_date": 1576100391, "question_id": 59294517, "link": "https://stackoverflow.com/questions/59294517/get-filedialouge-into-tk-text", "title": "get filedialouge into tk.text", "body": "<p>im trying to get text from a loaded file into a ktinker .text, here is the code i have so far, i dont quite understand where a file goes once you have opened it with filedialouge</p>\n\n<pre><code>from tkinter import *\nfrom tkinter import ttk\nfrom tkinter import filedialog\nimport tkinter as tk\n\ninterface = tk.Tk()\ninterface.geometry(\"500x500\")\ninterface.title(\"Text display\")\n\ndef openfile():\n    return filedialog.askopenfilename()\n\nbutton = ttk.Button(interface, text=\"Open text File\", command=openfile)  # &lt;------\nbutton.grid(column=1, row=1)\n\nT = tk.Text(interface, height=2, width=30)\n\nT.insert(tk.END, \"text file contents here\")\nT.grid(column=1, row=2)\n\ninterface.mainloop()\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe", "conditional-statements"], "comments": [{"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1576102172, "post_id": 59294509, "comment_id": 104794169, "body": "(4, 9) equals 600 not greater than 600.  Should that be <code>&gt;= 600</code>?"}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576116603, "post_id": 59294509, "comment_id": 104797617, "body": "What have you done to try to solve this?"}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 12518848, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBVitsGSW2iVoJ2MSm8zJZa732PGE94nPhYtd7Mvg=k-s128", "display_name": "Labeeb Nazim", "link": "https://stackoverflow.com/users/12518848/labeeb-nazim"}, "edited": false, "score": 1, "creation_date": 1576102140, "post_id": 59294773, "comment_id": 104794152, "body": "SyntaxError: EOL while scanning string literal"}], "tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": false, "score": 0, "last_activity_date": 1576101720, "creation_date": 1576101720, "answer_id": 59294773, "question_id": 59294509, "link": "https://stackoverflow.com/questions/59294509/running-multiple-conditions-on-two-dataframes-using-the-merge-function-to-create/59294773#59294773", "title": "Running multiple conditions on two dataframes using the merge function to create pairs", "body": "<p><code>dt.days</code> is not supported by <code>query</code>. So maybe this:</p>\n\n<pre><code>(df1.merge(df2, left_on='Currency_a', right_on='Currency_b')\n    .assign(date_diff=lambda x: x.Date_a.sub(x.Date_b).dt.days.abs())\n    .query('date_diff &lt; 10 &amp; Amount_a + Amount_b &gt; 600')\n    .filter(like='ID')\n    .values\n)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 0, "last_activity_date": 1576102296, "creation_date": 1576102296, "answer_id": 59294888, "question_id": 59294509, "link": "https://stackoverflow.com/questions/59294509/running-multiple-conditions-on-two-dataframes-using-the-merge-function-to-create/59294888#59294888", "title": "Running multiple conditions on two dataframes using the merge function to create pairs", "body": "<p>Try:</p>\n\n<pre><code>df1['Date_a'] = pd.to_datetime(df1['Date_a'], format='%d-%b')\ndf2['Date_b'] = pd.to_datetime(df2['Date_b'], format='%d-%b')\n\ndf_out = pd.merge_asof(df1.sort_values('Date_a'), \n              df2.sort_values('Date_b'), \n              left_on='Date_a', \n              right_on='Date_b', \n              left_by='Currency_a', \n              right_by='Currency_b', \n              tolerance=pd.Timedelta(days=10), \n              direction='nearest')\n\ndf_out.query('Amount_a+Amount_b &gt;= 600')[['ID_x','ID_y']].apply(tuple, axis=1).tolist()\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[(4.0, 9.0), (2.0, 7.0)]\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 12518848, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBVitsGSW2iVoJ2MSm8zJZa732PGE94nPhYtd7Mvg=k-s128", "display_name": "Labeeb Nazim", "link": "https://stackoverflow.com/users/12518848/labeeb-nazim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 59294888, "answer_count": 2, "score": -2, "last_activity_date": 1576102296, "creation_date": 1576100366, "last_edit_date": 1576100974, "question_id": 59294509, "link": "https://stackoverflow.com/questions/59294509/running-multiple-conditions-on-two-dataframes-using-the-merge-function-to-create", "title": "Running multiple conditions on two dataframes using the merge function to create pairs", "body": "<p>I have two dataframes -</p>\n\n<pre><code>ID  Currency_a  Amount_a    Date_a\n1   CAD         100         12-Jan\n2   CAD         200         12-Feb\n3   USD         200         15-Aug\n4   USD         200         12-Jan\n5   EUR         200         12-Feb\n</code></pre>\n\n<pre><code>ID  Currency_b  Amount_b    Date_b\n6   CAD         500         25-Jan\n7   CAD         600         13-Feb\n8   USD         200         15-Aug\n9   USD         400         20-Jan\n10  EUR         200         12-Feb\n</code></pre>\n\n<p>The task is to create a pair of <code>(ID,ID)</code> from the 2 respective data frames if -</p>\n\n<p>The currencies are the same</p>\n\n<p><code>Amount_a + Amount_b &gt; 600</code></p>\n\n<p>Time period between Date_a and Date_b is less than 10 days</p>\n\n<p>So the output in this case should be </p>\n\n<p><code>(2,7), (4,9)</code></p>\n\n<p>I am using (but it doesnt seem work :( )-</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>a.merge(b, on='Currency).query('Amount_a + Amount_b &gt; 600' and 'abs((Date_a - Date_b).dt.days) &gt; 10').filter(like='ID').values.tolist()\n</code></pre>\n"}, {"tags": ["python", "pandas", "datetime"], "answers": [{"tags": [], "owner": {"reputation": 120, "user_id": 7717825, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154590174147809/picture?type=large", "display_name": "Sam Maule", "link": "https://stackoverflow.com/users/7717825/sam-maule"}, "is_accepted": true, "score": 5, "last_activity_date": 1576100831, "creation_date": 1576100831, "answer_id": 59294598, "question_id": 59294501, "link": "https://stackoverflow.com/questions/59294501/having-datetime-only-go-up-to-minutes-in-my-time-column/59294598#59294598", "title": "Having datetime only go up to minutes in my time column", "body": "<p>You can use the round() method on Timestamps to convert the column to the resolution you wish.</p>\n\n<p>For example</p>\n\n<pre><code>import pandas as pd\nimport datetime\npd.to_datetime(datetime.datetime.now()).round('H')\n</code></pre>\n\n<p>Returns </p>\n\n<pre><code>Timestamp('2019-12-11 22:00:00')\n</code></pre>\n\n<p>as it converts the current time (to nanosecond frequency) to the nearest hour.</p>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 9324103, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155632508412885/picture?type=large", "display_name": "Norberto Reyes", "link": "https://stackoverflow.com/users/9324103/norberto-reyes"}, "is_accepted": false, "score": 0, "last_activity_date": 1576101035, "creation_date": 1576101035, "answer_id": 59294637, "question_id": 59294501, "link": "https://stackoverflow.com/questions/59294501/having-datetime-only-go-up-to-minutes-in-my-time-column/59294637#59294637", "title": "Having datetime only go up to minutes in my time column", "body": "<p>You can try this: </p>\n\n<pre><code>df = df.assign(Time=df.loc[:, 'Time'].apply(lambda x: datetime.strptime(x, \"%d-%m-%y %H:%M\")))\n</code></pre>\n\n<p>Replace your first dataframe with one that has df['Time'] with datetime values, based on the current values and format of the Time column</p>\n"}], "owner": {"reputation": 25, "user_id": 11121831, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Zb6Pd0pBQdk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfG09kOOKM2_vq7eGPkIfHFjd5Ssw/mo/photo.jpg?sz=128", "display_name": "vincenzo Scotto Di Uccio", "link": "https://stackoverflow.com/users/11121831/vincenzo-scotto-di-uccio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 59294598, "answer_count": 2, "score": -1, "last_activity_date": 1576101035, "creation_date": 1576100334, "question_id": 59294501, "link": "https://stackoverflow.com/questions/59294501/having-datetime-only-go-up-to-minutes-in-my-time-column", "title": "Having datetime only go up to minutes in my time column", "body": "<p>I am pulling information from our server and the time column goes all the way to nanoseconds. I need to merge multiple dfs and this specificity is causing my script to return an empty df.</p>\n\n<p>I tried using:</p>\n\n<pre><code>df['Time'] = pd.to_datetime(df['Time'], format=\"%d-%m-%y %H:%M\")\n</code></pre>\n\n<p>but I do not believe that what I am trying to do is done through the \"format\" parameter.</p>\n\n<p>I was going to convert the time column to strings and then parse to the correct number of characters but I really want to avoid converting to strings and then back to datetime.</p>\n\n<p>Can what I am looking to do be done using to_datetime() or must I convert to strings, parse and convert back to datetime?</p>\n"}, {"tags": ["python", "sqlite", "flask"], "comments": [{"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576116699, "post_id": 59294469, "comment_id": 104797633, "body": "What don\u2019t you understand from that error message? Can you explain what you\u2019re trying to do a bit more? Also, variable and function names should follow the <code>lower_case_with_underscores</code> style."}], "answers": [{"tags": [], "owner": {"reputation": 666, "user_id": 12518779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ead743ab13e9bbadc841e4e12cf3957d?s=128&d=identicon&r=PG&f=1", "display_name": "maestro.inc", "link": "https://stackoverflow.com/users/12518779/maestro-inc"}, "is_accepted": true, "score": 0, "last_activity_date": 1576103035, "creation_date": 1576103035, "answer_id": 59295032, "question_id": 59294469, "link": "https://stackoverflow.com/questions/59294469/how-to-write-except-no-row-found-do-something-in-sqlite-python/59295032#59295032", "title": "How to write except no row found do something in sqlite Python", "body": "<p>you should consider changing that try except block to an if/else statement </p>\n\n<pre><code> def showPost(car_id, menu_id):    \n        car = session.query(Car).filter_by(id=car_id).one()\n        slectedItem = session.query(CarType).filter_by(id=menu_id).one()\n        creator = getUserInfo(car.user_id)\n\n        getUser = login_session['username']\n        if getUser is None:\n            pass\n</code></pre>\n\n<p>Also if this is for a web app you are building with flask you should consider using flask-sqlalchemy instead, it is a little easier to read and has some nice functionality like get_or_404 which will throw a 404 error if the item was not found in the database</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12521230, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cXx2GaA-skk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdujQdEn1jCKo1Tl7yM3g3hOy4PaA/photo.jpg?sz=128", "display_name": "Matthias Liedtke", "link": "https://stackoverflow.com/users/12521230/matthias-liedtke"}, "is_accepted": false, "score": 0, "last_activity_date": 1576103084, "creation_date": 1576103084, "answer_id": 59295043, "question_id": 59294469, "link": "https://stackoverflow.com/questions/59294469/how-to-write-except-no-row-found-do-something-in-sqlite-python/59295043#59295043", "title": "How to write except no row found do something in sqlite Python", "body": "<p>If login_session is a dict, it should be 'except KeyError' or use 'login_session.get(\"username\")' which returns None if 'username' is not in the dict.</p>\n"}], "owner": {"reputation": 105, "user_id": 11686674, "user_type": "registered", "profile_image": "https://graph.facebook.com/2066062866838178/picture?type=large", "display_name": "Mahmoud Magdy", "link": "https://stackoverflow.com/users/11686674/mahmoud-magdy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 59295032, "answer_count": 2, "score": -1, "last_activity_date": 1576103084, "creation_date": 1576100218, "question_id": 59294469, "link": "https://stackoverflow.com/questions/59294469/how-to-write-except-no-row-found-do-something-in-sqlite-python", "title": "How to write except no row found do something in sqlite Python", "body": "<pre><code> def showPost(car_id, menu_id):\n\n    car = session.query(Car).filter_by(id=car_id).one()\n    slectedItem = session.query(CarType).filter_by(id=menu_id).one()\n    creator = getUserInfo(car.user_id)\n\n    try:\n        getUser = login_session['username']\n    except:\n        pass\n</code></pre>\n\n<p>this code runs normal but I tried to test it with pycodestyle tool it returns that error:  </p>\n\n<p>Error: \nmine.py:460:5: E722 do not use bare 'except'</p>\n\n<p>when catching the exception, mention specific exception when possible </p>\n\n<p>What do I need?\n        try:\n         getUser = login_session['username']</p>\n\n<pre><code>    except ???:\n            pass \n</code></pre>\n\n<p>I need if user Not Login so the getUser Function can't get the user name,\nif  getUser return nothing pass  </p>\n"}, {"tags": ["python", "logging"], "comments": [{"owner": {"reputation": 1382, "user_id": 11332797, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v2uLb.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/11332797/aaron"}, "edited": false, "score": 4, "creation_date": 1576100331, "post_id": 59294453, "comment_id": 104793539, "body": "Welcome to SO! Could you maybe provide a short example of the log? Shouldnt be too hard to help you out then :) PS: maybe try to use pandas datframe for reading the log file. It might give you your desired output"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 2, "creation_date": 1576101165, "post_id": 59294453, "comment_id": 104793834, "body": "If you search in your browser for &quot;Python read write file tutorial&quot;, you&#39;ll find references that can explain this much better than we can manage here.  Stack Overflow is not intended as a tutorial site; your questions here are better answered by existing resources."}, {"owner": {"reputation": 1, "user_id": 11908510, "user_type": "registered", "profile_image": "https://graph.facebook.com/2613253868693192/picture?type=large", "display_name": "tnjs", "link": "https://stackoverflow.com/users/11908510/tnjs"}, "reply_to_user": {"reputation": 1382, "user_id": 11332797, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v2uLb.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/11332797/aaron"}, "edited": false, "score": 0, "creation_date": 1576102717, "post_id": 59294453, "comment_id": 104794340, "body": "@Aaron: The log file looks like this (after some first lines with general information), I entered /// to indicate new lines:  Durchgang1\t1\tPulse\t1\t641466\t631301\t1    /// Durchgang1\t1\tPulse\t1\t660866\t650701\t1   /// Durchgang1\t1\tPulse\t1\t680266\t670101\t1   ///"}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1576116979, "post_id": 59294453, "comment_id": 104797688, "body": "I agree with @Prune, this is off topic IMO. See: <a href=\"https://stackoverflow.com/help/on-topic\">help center</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11908510, "user_type": "registered", "profile_image": "https://graph.facebook.com/2613253868693192/picture?type=large", "display_name": "tnjs", "link": "https://stackoverflow.com/users/11908510/tnjs"}, "edited": false, "score": 0, "creation_date": 1576102476, "post_id": 59294818, "comment_id": 104794273, "body": "This makes sense! But I&#39;m getting the message &quot;Error tokenizing data. C error: Expected 1 fields in line 4, saw 13&quot;..."}, {"owner": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "reply_to_user": {"reputation": 1, "user_id": 11908510, "user_type": "registered", "profile_image": "https://graph.facebook.com/2613253868693192/picture?type=large", "display_name": "tnjs", "link": "https://stackoverflow.com/users/11908510/tnjs"}, "edited": false, "score": 0, "creation_date": 1576105004, "post_id": 59294818, "comment_id": 104795052, "body": "@TatjanaSchmidt For your log files it should be <code>&#39;\\t&#39;</code> as <code>delimiter</code>, if I understand the according comment in your code right... And you&#39;ll need to skip some number of rows iiuc, or are your header rows starting all with a comment signaling character like <code>#</code>? You can choose that or define sth like that, too... Simply check the kwargs of <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html\" rel=\"nofollow noreferrer\">read_csv</a>"}, {"owner": {"reputation": 81, "user_id": 12239501, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-oGJGq0o99oo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdTdC8Id_jbtVa2tdkiU_wDFmLOtg/photo.jpg?sz=128", "display_name": "Giuseppe Saraceno", "link": "https://stackoverflow.com/users/12239501/giuseppe-saraceno"}, "reply_to_user": {"reputation": 1, "user_id": 11908510, "user_type": "registered", "profile_image": "https://graph.facebook.com/2613253868693192/picture?type=large", "display_name": "tnjs", "link": "https://stackoverflow.com/users/11908510/tnjs"}, "edited": false, "score": 0, "creation_date": 1576192755, "post_id": 59294818, "comment_id": 104829895, "body": "@TatjanaSchmidt that error can happen when is not set the right delimiter. Can you post some example line of your log ? So we can better understand and help you, thanks"}], "tags": [], "owner": {"reputation": 81, "user_id": 12239501, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-oGJGq0o99oo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdTdC8Id_jbtVa2tdkiU_wDFmLOtg/photo.jpg?sz=128", "display_name": "Giuseppe Saraceno", "link": "https://stackoverflow.com/users/12239501/giuseppe-saraceno"}, "is_accepted": false, "score": 0, "last_activity_date": 1576101978, "creation_date": 1576101978, "answer_id": 59294818, "question_id": 59294453, "link": "https://stackoverflow.com/questions/59294453/python-create-table-from-log-file/59294818#59294818", "title": "Python create table from log file", "body": "<p>You should think to log file as an usual delimited file.\nI suggest you to use <em>pandas</em> with <strong>read_csv</strong> specifiyng which delimiter you want to define the data in log  file.</p>\n\n<p>For example the following text is my log:</p>\n\n<pre><code>2019-12-11 22:56:19,467 - INFO - test\n2019-12-11 22:58:10,228 - INFO - test\n2019-12-11 22:58:23,968 - INFO - test\n2019-12-11 22:58:34,459 - INFO - test\n</code></pre>\n\n<p>If you want to define a column for every value between dash (<strong>-</strong>) you can use the following code:</p>\n\n<pre><code>import pandas as pd\ndata = pd.read_csv(\"test.log\", delimiter = \"-\", header = None)\nprint(data)\nprint(data.head())\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11930, "user_id": 1356062, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/T53Hy.jpg?s=128&g=1", "display_name": "Igwe Kalu", "link": "https://stackoverflow.com/users/1356062/igwe-kalu"}, "is_accepted": false, "score": 0, "last_activity_date": 1576105738, "last_edit_date": 1576105738, "creation_date": 1576105385, "answer_id": 59295438, "question_id": 59294453, "link": "https://stackoverflow.com/questions/59294453/python-create-table-from-log-file/59295438#59295438", "title": "Python create table from log file", "body": "<p>Working with the assumption that your log looks like the following</p>\n\n<pre><code>24    378    58\n6     49     1\n</code></pre>\n\n<p>And you wish to get the means of the columns, as in</p>\n\n<pre><code>15    213.5    29.5\n</code></pre>\n\n<p>Then the following implementation could suffice:</p>\n\n<pre><code>import functools\nimport re\n\n\ndef sum(columnTotals, line):\n    cells = re.split(r'\\t+', line)\n\n    for cell in enumerate(cells):\n        columnTotals[cell[0]] = columnTotals.get(cell[0], 0) + float(cell[1])\n\n    return columnTotals\n\n\ndef main():\n\n    with open('/path/to/log') as log:\n        rows = [line.strip() for line in log if line.strip() != '']\n        columnTotals = functools.reduce(sum, enumerate(rows), {})\n        numberOfRows = len(rows)\n\n    means = [columnTotal/numberOfRows for columnTotal in columnTotals.values()]\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>Disclaimers:</p>\n\n<ul>\n<li>Log size has not been put in to consideration, and this solution is NOT space efficient</li>\n<li>It's assumed that the input is correctly formatted according to specification (e.g. cells are separated by tabs and cell are numbers only)</li>\n<li>I've not tested the script, but I'm confident it should lead you to the idea you're looking</li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 11908510, "user_type": "registered", "profile_image": "https://graph.facebook.com/2613253868693192/picture?type=large", "display_name": "tnjs", "link": "https://stackoverflow.com/users/11908510/tnjs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 661, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1576105738, "creation_date": 1576100147, "last_edit_date": 1576104614, "question_id": 59294453, "link": "https://stackoverflow.com/questions/59294453/python-create-table-from-log-file", "title": "Python create table from log file", "body": "<p>The input is a log file that basically contains reaction times and other data from participants in an experiment. What I want as output is a table where each piece of information is in one field of its own so that I can then calculate means over columns etc.\nI'm having some difficulties here and there and hoped that someone could help since I'm new to Python. What I have so far is:</p>\n\n<pre><code># loading file and reading it character by character:\nwith open(\"......log\") as characters:\n\n    while True:\n        character = characters.read(1)\n        if not character:\n            break\n        print(character)\n\n# the idea here is: if the character is a tab, go to the next column. If it is the end of a line, go to a new row. Otherwise print the character. This should fill each table field with one string/number.\n\nfor character in range(???):   #what do I enter in \"range\"? I want the for loop   \n                             to run over all characters in the file \n    if character == '\\t':\n        #go to next column. My idea: create an empty table first, with \n         variables c = number of columns and r = number of rows, \n         so at this point I can enter \"c = c + 1\"\n    elif character == '\\n':\n        #go to next row -&gt; r = r + 1\n    else\n        print(character)\n</code></pre>\n\n<p>So to sum up, my questions are:<br>\n1) What do I enter in <code>range</code>? <br>\n2) How do I implement adding columns and rows? Can I just literally type <code>c = c+1</code> and it will work if I defined c before?\n<br>3) ...How do I define <code>c</code> before, i.e. how do I go about initializing an empty table? Or is there another elegant way?</p>\n\n<p>Thank you in advance and apologies if I cannot verbalize certain things in a way that makes perfect sense, I'm still new to this and only have experience in Matlab which is quite different</p>\n"}, {"tags": ["python", "django", "django-rest-framework", "django-serializer"], "answers": [{"tags": [], "owner": {"reputation": 1313, "user_id": 5527679, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-RjAHr-Tz2HE/AAAAAAAAAAI/AAAAAAAAABc/vVLnSE3nlG8/photo.jpg?sz=128", "display_name": "Ashraful Islam", "link": "https://stackoverflow.com/users/5527679/ashraful-islam"}, "is_accepted": true, "score": 0, "last_activity_date": 1576122092, "creation_date": 1576122092, "answer_id": 59297391, "question_id": 59294446, "link": "https://stackoverflow.com/questions/59294446/how-to-serialize-multiple-files-in-django/59297391#59297391", "title": "How to serialize multiple files in Django", "body": "<p>Iterate over the files where you can see the request.  </p>\n\n<pre><code>def save_to_model(files):\n  for f in files:\n    m = PrtFiles()\n    m.file_name = f\n    m.save()\n</code></pre>\n\n<p><strong>This is the idea what you can do it. I hope you'll implement a better way.</strong></p>\n"}], "owner": {"reputation": 3, "user_id": 12520803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cebe72b177049394a67f0ffd44efdd7?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas", "link": "https://stackoverflow.com/users/12520803/lucas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 59297391, "answer_count": 1, "score": 0, "last_activity_date": 1576122092, "creation_date": 1576100098, "question_id": 59294446, "link": "https://stackoverflow.com/questions/59294446/how-to-serialize-multiple-files-in-django", "title": "How to serialize multiple files in Django", "body": "<p>I am trying to serialize multiple files, send the files using 'Postman' and have tried several ways to save several files at once.</p>\n\n<p>This is the model:</p>\n\n<pre><code>class PrtFiles(models.Model):\n    file_name = models.FileField(null=True, blank=True)\n</code></pre>\n\n<p>And I getting this request in my view in Django:</p>\n\n<pre><code>&lt;MultiValueDict: {'file_name[0]': [&lt;InMemoryUploadedFile: Inventario Personal_Users [SHORT].xlsx (application/vnd.openxmlformats-officedocument.spreadsheetml.sheet)&gt;], 'file_name[1]': [&lt;InMemoryUploadedFile: Planilla_de_Usuarios_MEL [NEW][SHORT].xlsx (application/vnd.openxmlformats-officedocument.spreadsheetml.sheet)&gt;]}&gt;\n</code></pre>\n\n<p>Whit this Request in Postman:\n<a href=\"https://i.stack.imgur.com/WxZr9.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>Any method that to do that?</p>\n\n<p>P.S. I'm beginner with Django, thanks beforehand.</p>\n"}, {"tags": ["python", "pytest", "python-click"], "comments": [{"owner": {"reputation": 40221, "user_id": 7311767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/13Fpq.png?s=128&g=1", "display_name": "Stephen Rauch", "link": "https://stackoverflow.com/users/7311767/stephen-rauch"}, "edited": false, "score": 1, "creation_date": 1576116319, "post_id": 59294401, "comment_id": 104797551, "body": "A signal is asynchronous.  So you need someway to trigger it from a different thread. <a href=\"https://stackoverflow.com/questions/49474435/unit-test-python-signal-handler\" title=\"unit test python signal handler\">stackoverflow.com/questions/49474435/&hellip;</a>."}, {"owner": {"reputation": 2672, "user_id": 1288818, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7CfkE.jpg?s=128&g=1", "display_name": "Oleg Butuzov", "link": "https://stackoverflow.com/users/1288818/oleg-butuzov"}, "reply_to_user": {"reputation": 40221, "user_id": 7311767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/13Fpq.png?s=128&g=1", "display_name": "Stephen Rauch", "link": "https://stackoverflow.com/users/7311767/stephen-rauch"}, "edited": false, "score": 0, "creation_date": 1576150586, "post_id": 59294401, "comment_id": 104809978, "body": "Yeah, same thoughts."}], "answers": [{"tags": [], "owner": {"reputation": 2672, "user_id": 1288818, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7CfkE.jpg?s=128&g=1", "display_name": "Oleg Butuzov", "link": "https://stackoverflow.com/users/1288818/oleg-butuzov"}, "is_accepted": false, "score": 2, "last_activity_date": 1576150961, "creation_date": 1576150961, "answer_id": 59303823, "question_id": 59294401, "link": "https://stackoverflow.com/questions/59294401/click-testing-clirunner-and-handling-sigint-sigterm-signals/59303823#59303823", "title": "click.testing.CliRunner and handling SIGINT/SIGTERM signals", "body": "<p>So, if you want to test your click powered application for handling different signals, you can do next procedure.</p>\n\n<pre><code>def test_breaking_process(server, runner):\n\n    from multiprocessing import Queue, Process\n    from threading import Timer\n    from time import sleep\n    from os import kill, getpid\n    from signal import SIGINT\n\n    url = server.router({'^/$': Page(\"\").slow().exists()})\n    args = [url, '--no-colors', '--no-progress']\n\n    q = Queue()\n\n    # Running out app in SubProcess and after a while using signal sending \n    # SIGINT, results passed back via channel/queue  \n    def background():\n        Timer(0.2, lambda: kill(getpid(), SIGINT)).start()\n        result = runner.invoke(main, args)\n        q.put(('exit_code', result.exit_code))\n        q.put(('output', result.output))\n\n    p = Process(target=background)\n    p.start()\n\n    results = {}\n\n    while p.is_alive():\n        sleep(0.1)\n    else:\n        while not q.empty():\n            key, value = q.get()\n            results[key] = value\n\n    assert results['exit_code'] == 0\n    assert \"Results can be inconsistent, as execution was terminated\" in results['output']\n</code></pre>\n"}], "owner": {"reputation": 2672, "user_id": 1288818, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7CfkE.jpg?s=128&g=1", "display_name": "Oleg Butuzov", "link": "https://stackoverflow.com/users/1288818/oleg-butuzov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1576168057, "creation_date": 1576099888, "last_edit_date": 1576168057, "question_id": 59294401, "link": "https://stackoverflow.com/questions/59294401/click-testing-clirunner-and-handling-sigint-sigterm-signals", "title": "click.testing.CliRunner and handling SIGINT/SIGTERM signals", "body": "<p>I want to add few tests on how my cli app handles different signals (<code>SIGTERM</code>, etc). And I am using native testing solution <code>click.testing.CliRunner</code> alongside of pytest.</p>\n\n<p>Test looks pretty standard and simple </p>\n\n<pre><code>def test_breaking_process(server, runner):\n\n    address = server.router({'^/$': Page(\"\").exists().slow()})\n\n    runner = CliRunner(mix_stderr=True)\n    args = [address, '--no-colors', '--no-progress']\n    result = runner.invoke(main, args)\n    assert result.exit_code == 0\n</code></pre>\n\n<p>And here I am stuck, how could I send <code>SIGTERM</code> to process in <code>runner.invoke</code>? I see no problem to do it if I use e2e tests (calling executable and not CLIrunner), but I would like to try to implement this (at least able to send os.kill)</p>\n\n<p>is there a way to do it?</p>\n"}, {"tags": ["python", "python-3.x", "list", "csv", "export-to-csv"], "comments": [{"owner": {"reputation": 3277, "user_id": 557022, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/3fa98831cef96f8b9fb7530160338da7?s=128&d=identicon&r=PG", "display_name": "picmate \u6d85", "link": "https://stackoverflow.com/users/557022/picmate-%e6%b6%85"}, "edited": false, "score": 1, "creation_date": 1576099646, "post_id": 59294292, "comment_id": 104793255, "body": "Why are you printing the line inside a write?"}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 1, "creation_date": 1576099660, "post_id": 59294292, "comment_id": 104793260, "body": "Ask yourself: what are you writing with <code>f.writelines(print(line))</code>? What does <code>print</code> do? What does it return?  What kind of argument does <code>writelines</code> expect? Also, try writing only <code>f.writelines(&#39;=== Info Duplications to Delete ===\\n&#39;)</code>; does it produce the result you expect?"}], "answers": [{"comments": [{"owner": {"reputation": 986, "user_id": 5268504, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-XJa8BjcCPLg/AAAAAAAAAAI/AAAAAAAAArg/W73CD58RJsQ/photo.jpg?sz=128", "display_name": "Jan Sr\u0161e\u0148", "link": "https://stackoverflow.com/users/5268504/jan-sr%c5%a1e%c5%88"}, "edited": false, "score": 1, "creation_date": 1576101796, "post_id": 59294361, "comment_id": 104794040, "body": "Hi, I change it, but the result still return an error, please check my update"}], "tags": [], "owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "is_accepted": false, "score": 3, "last_activity_date": 1576102228, "last_edit_date": 1576102228, "creation_date": 1576099707, "answer_id": 59294361, "question_id": 59294292, "link": "https://stackoverflow.com/questions/59294292/nonetype-object-is-not-iterable-when-write-into-csv-file/59294361#59294361", "title": "NoneType object is not Iterable when write into CSV file", "body": "<p>Here:</p>\n\n<pre><code>for line in results:\n    f.writelines(print(line))\n</code></pre>\n\n<p><code>print</code> returns None, so you are passing None to <code>writelines</code>. But <code>writelines</code> doesn't want None. It wants a sequence of strings. </p>\n\n<p>If you have a sequence of strings to write to your file, you can just use</p>\n\n<pre><code>f.writelines(results)\n</code></pre>\n\n<p>If your <code>results</code> are not strings, but you want them converted to strings, you could use something like:</p>\n\n<pre><code>f.writelines(map(str, results))\n</code></pre>\n\n<p>But you might find it easier to use <a href=\"https://docs.python.org/3/library/csv.html\" rel=\"nofollow noreferrer\">the <code>csv</code> module</a> if you're trying to write a csv file. </p>\n"}, {"tags": [], "owner": {"reputation": 986, "user_id": 5268504, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-XJa8BjcCPLg/AAAAAAAAAAI/AAAAAAAAArg/W73CD58RJsQ/photo.jpg?sz=128", "display_name": "Jan Sr\u0161e\u0148", "link": "https://stackoverflow.com/users/5268504/jan-sr%c5%a1e%c5%88"}, "is_accepted": true, "score": -1, "last_activity_date": 1576103375, "creation_date": 1576103375, "answer_id": 59295096, "question_id": 59294292, "link": "https://stackoverflow.com/questions/59294292/nonetype-object-is-not-iterable-when-write-into-csv-file/59295096#59295096", "title": "NoneType object is not Iterable when write into CSV file", "body": "<p>Ok, the solution was simple, I only <strong>change:</strong></p>\n\n<pre><code>f.writelines(print(line))\n</code></pre>\n\n<p><strong>to:</strong></p>\n\n<pre><code>f.writelines(str(line)) \n</code></pre>\n\n<p>Now everything works fine</p>\n"}], "owner": {"reputation": 986, "user_id": 5268504, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-XJa8BjcCPLg/AAAAAAAAAAI/AAAAAAAAArg/W73CD58RJsQ/photo.jpg?sz=128", "display_name": "Jan Sr\u0161e\u0148", "link": "https://stackoverflow.com/users/5268504/jan-sr%c5%a1e%c5%88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 474, "favorite_count": 0, "accepted_answer_id": 59295096, "answer_count": 2, "score": -2, "last_activity_date": 1576103375, "creation_date": 1576099373, "last_edit_date": 1576101709, "question_id": 59294292, "link": "https://stackoverflow.com/questions/59294292/nonetype-object-is-not-iterable-when-write-into-csv-file", "title": "NoneType object is not Iterable when write into CSV file", "body": "<p>in my first Python program I try to find duplicate values in my list which is loaded from CSV file (over 98+ k (98 000 lines) of rows in CSV file each with 5 columns) and save into list like Object (I use only 2 columns and in CNT column I save number of duplicates values):</p>\n\n<pre><code>class Duplication:\n  def __init__(self, pn, comp, cnt):\n    self.pn = pn\n    self.comp = comp\n    self.cnt = cnt\n\n  def __str__(self):\n    return f'{self.pn};{self.comp};{self.cnt}\\n'\n\n  def __repr__(self):\n    return str(self)\n\n  def __hash__(self):\n    return hash(('pn', self.pn,\n             'competitor', self.comp))\n  def __eq__(self, other):\n    return self.pn == other.pn and self.comp == other.comp\n</code></pre>\n\n<p>After that I select only files which I had more times in list and try it to save duplicate object into new CSV file:</p>\n\n<pre><code>  results = [d for d in duplicates if d.cnt &gt; 1]\n  results = set(results) \n\n  with open(f'fileName.csv', 'a') as f:\n        f.writelines('=== Info Duplications to Delete ===\\n')\n        for line in results:\n            f.writelines(print(line))\n        f.close()    \n    print(results)\n</code></pre>\n\n<p>I got this error, but in results are over 7+ k values, which I want to save into CSV file when I have a smaller list under 100 values, data will be saved, but with this file with large data row. </p>\n\n<p>I had this problem and I check data in the file and also in the debugger, and there is no None value or something which looks like a problem or invalid data\n<a href=\"https://i.stack.imgur.com/gs2As.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gs2As.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p><strong>UPDATE</strong></p>\n\n<p>After change to:</p>\n\n<pre><code>  with open(f'file.csv', 'a') as f:\n        f.writelines('===Info ===\\n')\n        f.writelines(results)\n        #for line in results:\n        #    f.writelines(print(line))\n        f.close()    \n    print(results)\n</code></pre>\n\n<p>I got this error:\n<a href=\"https://i.stack.imgur.com/HPx7L.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HPx7L.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Run this script take over 20 minutes</p>\n"}, {"tags": ["python", "pytorch"], "comments": [{"owner": {"reputation": 6042, "user_id": 3607203, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/pfnRx.jpg?s=128&g=1", "display_name": "dennlinger", "link": "https://stackoverflow.com/users/3607203/dennlinger"}, "edited": false, "score": 0, "creation_date": 1576145695, "post_id": 59294274, "comment_id": 104807242, "body": "If I understand you correctly, you might want to split up your question into separate parts (initializing with the <code>numpy.array</code>, and then also a different question about the constant tensor). Otherwise, you can generally look for answers on how to initialize embeddings with other values, see <a href=\"https://stackoverflow.com/questions/49710537/pytorch-gensim-how-to-load-pre-trained-word-embeddings\">here</a>"}], "answers": [{"comments": [{"owner": {"reputation": 531, "user_id": 7879074, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6071be03ed47b64a9e348082cc9494f?s=128&d=identicon&r=PG&f=1", "display_name": "Abrar", "link": "https://stackoverflow.com/users/7879074/abrar"}, "edited": false, "score": 0, "creation_date": 1576100119, "post_id": 59294357, "comment_id": 104793448, "body": "I need to initialize the tensor not convert it"}, {"owner": {"reputation": 450, "user_id": 7723544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb49845d9d7230acadf01972fc346ead?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Marchand", "link": "https://stackoverflow.com/users/7723544/daniel-marchand"}, "reply_to_user": {"reputation": 531, "user_id": 7879074, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6071be03ed47b64a9e348082cc9494f?s=128&d=identicon&r=PG&f=1", "display_name": "Abrar", "link": "https://stackoverflow.com/users/7879074/abrar"}, "edited": false, "score": 0, "creation_date": 1576100562, "post_id": 59294357, "comment_id": 104793642, "body": "I don&#39;t think it should matter, see <a href=\"https://pytorch.org/tutorials/beginner/nn_tutorial.html\" rel=\"nofollow noreferrer\">pytorch.org/tutorials/beginner/nn_tutorial.html</a>"}], "tags": [], "owner": {"reputation": 450, "user_id": 7723544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb49845d9d7230acadf01972fc346ead?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Marchand", "link": "https://stackoverflow.com/users/7723544/daniel-marchand"}, "is_accepted": false, "score": 0, "last_activity_date": 1576099693, "creation_date": 1576099693, "answer_id": 59294357, "question_id": 59294274, "link": "https://stackoverflow.com/questions/59294274/pytorch-initializing-weight-with-numpy-array-create-a-constant-tensor/59294357#59294357", "title": "PyTorch: initializing weight with numpy array + create a constant tensor", "body": "<p>You may wish to look at converting a numpy array into a torch tensor <a href=\"https://stackoverflow.com/questions/44340848/how-to-convert-pytorch-autograd-variable-to-numpy\">How to convert Pytorch autograd.Variable to Numpy?</a></p>\n"}, {"tags": [], "owner": {"reputation": 6042, "user_id": 3607203, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/pfnRx.jpg?s=128&g=1", "display_name": "dennlinger", "link": "https://stackoverflow.com/users/3607203/dennlinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1576146093, "creation_date": 1576146093, "answer_id": 59302378, "question_id": 59294274, "link": "https://stackoverflow.com/questions/59294274/pytorch-initializing-weight-with-numpy-array-create-a-constant-tensor/59302378#59302378", "title": "PyTorch: initializing weight with numpy array + create a constant tensor", "body": "<p>You can initialize embedding layers with the function <code>nn.Embedding.from_pretrained()</code>.</p>\n\n<p>In your specific case, you would still have to firstly convert the <code>numpy.array</code> to a <code>torch.Tensor</code>, but otherwise it is very straightforward:</p>\n\n<pre><code>import torch as t\nimport torch.nn as nn\nimport numpy as np\n\n# This can be whatever initialization you want to have\ninit_array = np.zeros([num_embeddings, embedding_dims])\n\n# As @Daniel Marchand mentioned in his answer, \n# you do have to cast it explicitly as a tensor, otherwise it won't work.\nwi = nn.Embedding.from_pretrained(t.tensor(init_array), freeze=False)\n</code></pre>\n\n<p>The parameter <code>freeze=False</code> is important if you still want to train your network afterwards, as otherwise you would keep the embeddings at the same constant values.\nGenerally, <code>.from_pretrained</code> is used to \"transfer\" learned embeddings, but it does work for your case, too.</p>\n"}], "owner": {"reputation": 531, "user_id": 7879074, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6071be03ed47b64a9e348082cc9494f?s=128&d=identicon&r=PG&f=1", "display_name": "Abrar", "link": "https://stackoverflow.com/users/7879074/abrar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 668, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1576146093, "creation_date": 1576099255, "last_edit_date": 1576099880, "question_id": 59294274, "link": "https://stackoverflow.com/questions/59294274/pytorch-initializing-weight-with-numpy-array-create-a-constant-tensor", "title": "PyTorch: initializing weight with numpy array + create a constant tensor", "body": "<p>I have the following code :</p>\n\n<pre><code>self.wi = nn.Embedding(num_embeddings, embedding_dim)\nself.wj = nn.Embedding(num_embeddings1, embedding_dim)\nself.bi = nn.Embedding(num_embeddings, 1)\nself.bj = nn.Embedding(num_embeddings1, 1)\n\nself.wi.weight.data.uniform_(-1, 1)\nself.wj.weight.data.uniform_(-1, 1)\nself.bi.weight.data.zero_()\nself.bj.weight.data.zero_()\n</code></pre>\n\n<p>I want to initialize the weights with numpy array, and I want to create a constant tensor, which is also a numpy array.\nI am new to PyTorch, and I appreciate any help.  </p>\n"}, {"tags": ["python", "loops", "validation"], "comments": [{"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 1, "creation_date": 1576099769, "post_id": 59294258, "comment_id": 104793299, "body": "Please <a href=\"https://stackoverflow.com/posts/59294258/edit\">edit</a> your question to include the full error traceback, as that can help figure out where and why the error is occurring"}, {"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 0, "creation_date": 1576099931, "post_id": 59294258, "comment_id": 104793370, "body": "add <code>print(charNum, char)</code> and see why"}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576117652, "post_id": 59294258, "comment_id": 104797811, "body": "Variable and function names should follow the <code>lower_case_with_underscores</code> style. The parentheses surrounding the condition in a for/while loop are unnecessary, this isn\u2019t Java ;) It looks like there are some design issues, too. <code>char_to_word</code> seems to be converting the input before checking whether or not it\u2019s valid, no?"}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576118048, "post_id": 59294258, "comment_id": 104797883, "body": "If you could elaborate just a touch on what your program is meant to do, I should be able to produce a fully refactored version tonight."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user12185419"}, "edited": false, "score": 0, "creation_date": 1576100585, "post_id": 59294413, "comment_id": 104793652, "body": "Sorry  Alexander it is still doing it. Look at my edit with output now. I think it has something to do with my main."}, {"owner": {"reputation": 3671, "user_id": 2826937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmIdz.png?s=128&g=1", "display_name": "Alexandr Shurigin", "link": "https://stackoverflow.com/users/2826937/alexandr-shurigin"}, "edited": false, "score": 0, "creation_date": 1576100663, "post_id": 59294413, "comment_id": 104793685, "body": "@JustinSwartz have you tried my source code? Because I&#39;ve added a few patches there"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12185419"}, "edited": false, "score": 0, "creation_date": 1576101004, "post_id": 59294413, "comment_id": 104793783, "body": "Sorry I&#39;m new to python and don&#39;t know what that means. When you enter a invalid character like $. Then enter a valid one like f. It comes up a index error. I&#39;m trying to figure out to fix that."}, {"owner": {"reputation": 3671, "user_id": 2826937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmIdz.png?s=128&g=1", "display_name": "Alexandr Shurigin", "link": "https://stackoverflow.com/users/2826937/alexandr-shurigin"}, "edited": false, "score": 0, "creation_date": 1576101096, "post_id": 59294413, "comment_id": 104793811, "body": "Just create a new file with my source code provided in the answer and run it. It works as expected, after that you can compare your and my codes :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12185419"}, "edited": false, "score": 0, "creation_date": 1576101503, "post_id": 59294413, "comment_id": 104793942, "body": "yeah sorry it still doesn&#39;t work for me. Try putting the $ in first and when it asks to reenter try putting in the letter f. I get an error."}, {"owner": {"reputation": 3671, "user_id": 2826937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmIdz.png?s=128&g=1", "display_name": "Alexandr Shurigin", "link": "https://stackoverflow.com/users/2826937/alexandr-shurigin"}, "edited": false, "score": 0, "creation_date": 1576101720, "post_id": 59294413, "comment_id": 104794014, "body": "got it, @JustinSwartz check my answer now. fixed the <code>main()</code> function code. Now I believe it behaves as expected"}], "tags": [], "owner": {"reputation": 3671, "user_id": 2826937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmIdz.png?s=128&g=1", "display_name": "Alexandr Shurigin", "link": "https://stackoverflow.com/users/2826937/alexandr-shurigin"}, "is_accepted": false, "score": 0, "last_activity_date": 1576101690, "last_edit_date": 1576101690, "creation_date": 1576099963, "answer_id": 59294413, "question_id": 59294258, "link": "https://stackoverflow.com/questions/59294258/python-validation-issue/59294413#59294413", "title": "Python Validation issue", "body": "<p>Because you were checking against upper-cased characters but was trying with lowercased.</p>\n\n<p>Fixed it for you, now it works with <code>fg</code> and <code>FG</code> as well ;)</p>\n\n<pre><code>def main():\n    while True:\n        userInput = input(\"Enter license plate tag: \")\n        if not rSeriesValidate(userInput):\n            print(\"TAG INVALID. Please enter a new tag.\")\n            continue\n\n        for char in userInput:\n            charToWord(char)\n\n        break\n\n\ndef charToWord(char):\n    nato = [\"Alpha\", \"Beta\", \"Charlie\", \"Delta\", \"Echo\", \"Foxtrot\", \"Golf\", \"Hotel\", \"India\", \"Juliett\", \"Kilo\", \"Lima\",\n            \"Mike\", \"November\", \"Oscar\", \"Papa\", \"Quebec\", \"Romeo\", \"Sierra\", \"Tango\", \"Uniform\", \"Victor\", \"Whiskey\",\n            \"X-Ray\", \"Yankee\", \"Zulu\"]\n\n    charNum = ord(char.upper()) - 65\n    word = nato[charNum]\n\n    if char.isalpha():\n        print(word)\n    elif char == \"9\":\n        print(\"Niner\")\n    elif char == \"-\":\n        print(\"Dash\")\n    else:\n        print(char)\n\n    return word\n\n\ndef rSeriesValidate(userInput):\n    isValid = True\n\n    for currChar in userInput:\n        if not currChar.isalpha() and currChar != \"-\":\n            isValid = False\n        if (len(userInput) &lt; 1 or len(userInput) &gt; 9):\n            isValid = False\n\n    return isValid\n\n\nmain()\n\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>python test123.py\nEnter license plate tag: fGaDD\nFoxtrot\nGolf\nAlpha\nDelta\nDelta\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user12185419"}, "edited": false, "score": 0, "creation_date": 1576105542, "post_id": 59294832, "comment_id": 104795222, "body": "yep this is what it is! Thank you!"}], "tags": [], "owner": {"reputation": 87, "user_id": 8077820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f55076540096ce71b7f87d0d5251fb9?s=128&d=identicon&r=PG&f=1", "display_name": "Philippe Dixon", "link": "https://stackoverflow.com/users/8077820/philippe-dixon"}, "is_accepted": false, "score": 1, "last_activity_date": 1576102056, "creation_date": 1576102056, "answer_id": 59294832, "question_id": 59294258, "link": "https://stackoverflow.com/questions/59294258/python-validation-issue/59294832#59294832", "title": "Python Validation issue", "body": "<p>@alexandr-shurigin hit on one issue with the lowercase letters but the other issue is scope.  I think Python is not updating the <code>userInput</code> var in main(), instead I think it's re-declaring another <code>userInput</code> variable that only is scoped to the <code>while</code> loop.  </p>\n\n<p>Keep alexandr-shurigin's changes and try this for your <code>main()</code>:</p>\n\n<pre><code>def main():\n    userInput = input(\"Enter license plate tag: \")\n    while(not rSeriesValidate(userInput)):\n        print(\"TAG INVALID. Please enter a new tag.\")\n        userInput = input(\"Enter license plate tag: \")\n    else:\n        for char in userInput:\n            charToWord(char)\n</code></pre>\n\n<p>This solves the '$' input followed by a legal input.  The while-else is kind of a strange construct but legal, I'd consider separating the string validation from gathering the input.  I used it for minimal change to your code.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12185419"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1576102056, "creation_date": 1576099196, "last_edit_date": 1576101069, "question_id": 59294258, "link": "https://stackoverflow.com/questions/59294258/python-validation-issue", "title": "Python Validation issue", "body": "<p>This validation will correctly mark a character invalid if it doesn't meet the function's criteria the first time. Such as if I enter <code>$</code> it will kick it out and ask for new input. But then when I enter a correct input after that such as <code>fg</code> to get <code>FoxTrot, Golf</code>. It will say IndexError: list index out of range</p>\n\n<p>Why is that? How can I get it to not do that? </p>\n\n<pre><code>def main():\n    userInput = input(\"Enter license plate tag: \")\n    for char in userInput:\n        while(not rSeriesValidate(userInput)):\n            print(\"TAG INVALID. Please enter a new tag.\")\n            userInput = input(\"Enter license plate tag: \")\n        charToWord(char)\n\ndef charToWord(char):    \n    nato = [\"Alpha\",\"Beta\",\"Charlie\",\"Delta\",\"Echo\",\"Foxtrot\",\"Golf\",\"Hotel\",\"India\",\"Juliett\",\"Kilo\",\"Lima\",\"Mike\",\"November\",\"Oscar\",\"Papa\",\"Quebec\",\"Romeo\",\"Sierra\",\"Tango\",\"Uniform\",\"Victor\",\"Whiskey\",\"X-Ray\",\"Yankee\",\"Zulu\" ]\n    word =''\n\n    charNum = ord(char.upper()) - 65\n    word = nato[charNum]\n\n    if char.isalpha():\n        print(word)\n    elif char == \"9\":\n        print(\"Niner\")\n    elif char == \"-\":\n        print(\"Dash\")\n    else:\n        print(char)\n\n\n    return word\n\ndef rSeriesValidate(userInput):\n    isValid = True\n\n    for currChar in userInput:\n        if not currChar.isalnum() and currChar != \"-\":\n            isValid = False\n        if(len(userInput)&lt;1 or len(userInput)&gt; 9):\n            isValid = False\n\n    return isValid\n\nmain()\n</code></pre>\n\n<p>Here is the output:</p>\n\n<pre><code>Enter license plate tag: $                                                                                                                                    \nTAG INVALID. Please enter a new tag.                                                                                                                          \nEnter license plate tag: fg                                                                                                                                   \nTraceback (most recent call last):                                                                                                                            \n  File \"main.py\", line 40, in &lt;module&gt;                                                                                                                        \n    main()                                                                                                                                                    \n  File \"main.py\", line 8, in main                                                                                                                             \n    charToWord(char)                                                                                                                                          \n  File \"main.py\", line 15, in charToWord                                                                                                                      \n    word = nato[charNum]                                                                                                                                      \nIndexError: list index out of range  \n</code></pre>\n"}, {"tags": ["python", "selenium"], "comments": [{"owner": {"reputation": 1202, "user_id": 2314347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CqPgA.jpg?s=128&g=1", "display_name": "Kurohige", "link": "https://stackoverflow.com/users/2314347/kurohige"}, "edited": false, "score": 2, "creation_date": 1576100012, "post_id": 59294243, "comment_id": 104793401, "body": "what inside response?"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 1, "creation_date": 1576101379, "post_id": 59294243, "comment_id": 104793901, "body": "what is <code>driver</code>? Scrapy doesn&#39;t have <code>driver</code>. Maybe you mean module <code>Selenium</code> which often uses name <code>driver</code>. But then you get HTML with <code>driver.page_source</code> and you have to use <code>BeautifulSoup</code>. In <code>Scrapy</code> you get <code>response</code> in <code>def parse(response):</code> and you use it drectly without any <code>current_url</code>"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 2, "creation_date": 1576101557, "post_id": 59294243, "comment_id": 104793965, "body": "your code makes no sense. It looks like you mix code from different modules - <code>scrapy</code>  and <code>Selenium</code>. You should edit question or it should be closed."}, {"owner": {"reputation": 124, "user_id": 12334227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UcnzX.jpg?s=128&g=1", "display_name": "SublimizeD", "link": "https://stackoverflow.com/users/12334227/sublimized"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1576102577, "post_id": 59294243, "comment_id": 104794294, "body": "@furas - Apologies, I had haphazardly pasted code that wasn&#39;t complete at all. I made the changes to the post. I am using selenium now but its come to my attention that this portion of the script cannot be done using selenium, as i am trying  to pull a text field and it doesn&#39;t allow for that to be done."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1576103038, "post_id": 59294243, "comment_id": 104794453, "body": "last <code>.text</code> is not function but variable so remove <code>()</code> and remove <code>&#47;text()</code> from <code>xpath</code>"}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576118498, "post_id": 59294243, "comment_id": 104797967, "body": "This is honestly just a mess. Are you still having any problems?"}], "answers": [{"comments": [{"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "edited": false, "score": 1, "creation_date": 1576137301, "post_id": 59295049, "comment_id": 104803071, "body": "I have replaced the word <i>variable</i> with <i>attribute</i>. Let me know if it&#39;s okay with you."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "reply_to_user": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "edited": false, "score": 1, "creation_date": 1576139778, "post_id": 59295049, "comment_id": 104804063, "body": "@DebanjanB you are right. It sound better.  Maybe I should also replace <code>function</code> with <code>method</code>"}, {"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "edited": false, "score": 1, "creation_date": 1576139949, "post_id": 59295049, "comment_id": 104804123, "body": "That would sound more canonical."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "reply_to_user": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "edited": false, "score": 1, "creation_date": 1576140894, "post_id": 59295049, "comment_id": 104804613, "body": "@DebanjanB so I changed it"}, {"owner": {"reputation": 124, "user_id": 12334227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UcnzX.jpg?s=128&g=1", "display_name": "SublimizeD", "link": "https://stackoverflow.com/users/12334227/sublimized"}, "edited": false, "score": 0, "creation_date": 1576165147, "post_id": 59295049, "comment_id": 104818402, "body": "Thank you so much! Works great now!"}], "tags": [], "owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "is_accepted": true, "score": 3, "last_activity_date": 1576140520, "last_edit_date": 1576140520, "creation_date": 1576103129, "answer_id": 59295049, "question_id": 59294243, "link": "https://stackoverflow.com/questions/59294243/parsing-out-text-from-webpage/59295049#59295049", "title": "Parsing out text from webpage", "body": "<ul>\n<li><p><code>.text</code> is an <em>attribute</em> not method so remove <code>()</code>  </p></li>\n<li><p>remove <code>/text()</code> from <code>xpath</code> because <code>Selenium</code> can't return text (or attribute like <code>@href</code>) and you have to use <code>.text</code> for this (and <code>.get_attribute('href')</code> for attribute).</p></li>\n</ul>\n\n<hr>\n\n<pre><code>date = driver.find_element_by_xpath('//[@id=\"General\"]/fieldset/dl/dd[5]').text\nprint(date)\n</code></pre>\n"}], "owner": {"reputation": 124, "user_id": 12334227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UcnzX.jpg?s=128&g=1", "display_name": "SublimizeD", "link": "https://stackoverflow.com/users/12334227/sublimized"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 59295049, "answer_count": 1, "score": -2, "last_activity_date": 1576140520, "creation_date": 1576099136, "last_edit_date": 1576118644, "question_id": 59294243, "link": "https://stackoverflow.com/questions/59294243/parsing-out-text-from-webpage", "title": "Parsing out text from webpage", "body": "<p>I am attempting to parse out the text from the below xpath using Selenium. I am getting the below traceback error</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>date = driver.find_element_by_xpath('//[@id=\"General\"]/fieldset/dl/dd[5]/text()').text()\nprint(date)\n</code></pre>\n\n<p>traceback:</p>\n\n<pre><code>InvalidSelectorException: invalid selector: The result of the xpath expression \"//*[@id=\"General\"]/fieldset/dl/dd[5]/text()\" is: [object Text]. It should be an element.\n</code></pre>\n\n<p>I believe that Selenium doesn't allow you to parse out the text nodes (my end goal) what library should I use here?</p>\n"}, {"tags": ["python", "matplotlib"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 12520959, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206544377843962/picture?type=large", "display_name": "Otakar Kucha\u0159", "link": "https://stackoverflow.com/users/12520959/otakar-kucha%c5%99"}, "is_accepted": false, "score": 0, "last_activity_date": 1576099400, "creation_date": 1576099400, "answer_id": 59294299, "question_id": 59294236, "link": "https://stackoverflow.com/questions/59294236/missing-tools-community-version-vs-pro-version-pycharm/59294299#59294299", "title": "Missing tools community version vs pro version Pycharm", "body": "<p>Ohhh someone had the same problem overhere:\n<a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/115000736584-SciView-in-PyCharm-2017-3-reduces-functionality-of-Matplotlib\" rel=\"nofollow noreferrer\">https://intellij-support.jetbrains.com/hc/en-us/community/posts/115000736584-SciView-in-PyCharm-2017-3-reduces-functionality-of-Matplotlib</a></p>\n\n<p>You have to manually write this:\nmatplotlib.use('Qt5Agg')</p>\n"}], "owner": {"reputation": 1, "user_id": 12520959, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206544377843962/picture?type=large", "display_name": "Otakar Kucha\u0159", "link": "https://stackoverflow.com/users/12520959/otakar-kucha%c5%99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1576099400, "creation_date": 1576099110, "last_edit_date": 1576099155, "question_id": 59294236, "link": "https://stackoverflow.com/questions/59294236/missing-tools-community-version-vs-pro-version-pycharm", "title": "Missing tools community version vs pro version Pycharm", "body": "<p>I used community version of Pycharm. If i will imshow image in matlibplot i will see this image. </p>\n\n<p><a href=\"https://i.stack.imgur.com/GtRMK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GtRMK.png\" alt=\"enter image description here\"></a></p>\n\n<p>In left bottom conner you can see pixs information (position and RBG color) Also handy tools such as paning the view, zoom box, and accessing axes settings directly from the plot. </p>\n\n<p>But now i upgrade to profesional version of Pycharm. And the same code but this tools all gone. Can you help me plz how to get in? </p>\n\n<p><a href=\"https://i.stack.imgur.com/n1QGC.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/n1QGC.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Thank you so much!</p>\n"}, {"tags": ["python", "string", "pycharm"], "comments": [{"owner": {"reputation": 4089, "user_id": 2457483, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b32cc314ac87932457e71c98ff8d140e?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2457483/daniel"}, "edited": false, "score": 0, "creation_date": 1576099116, "post_id": 59294216, "comment_id": 104793025, "body": "myfile.txt.replace(&quot;.txt&quot;,&quot;&quot;)"}, {"owner": {"reputation": 1051, "user_id": 8678978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FFZS4.gif?s=128&g=1", "display_name": "chrisbyte", "link": "https://stackoverflow.com/users/8678978/chrisbyte"}, "edited": false, "score": 1, "creation_date": 1576099140, "post_id": 59294216, "comment_id": 104793039, "body": "There are some answers here <a href=\"https://stackoverflow.com/questions/678236/how-to-get-the-filename-without-the-extension-from-a-path-in-python\" title=\"how to get the filename without the extension from a path in python\">stackoverflow.com/questions/678236/&hellip;</a>"}, {"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 2, "creation_date": 1576099222, "post_id": 59294216, "comment_id": 104793072, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/678236/how-to-get-the-filename-without-the-extension-from-a-path-in-python\">How to get the filename without the extension from a path in Python?</a>"}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576118631, "post_id": 59294216, "comment_id": 104797993, "body": "In the future, please find a better title for your post. See: <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1051, "user_id": 8678978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FFZS4.gif?s=128&g=1", "display_name": "chrisbyte", "link": "https://stackoverflow.com/users/8678978/chrisbyte"}, "edited": false, "score": 2, "creation_date": 1576099199, "post_id": 59294249, "comment_id": 104793066, "body": "What if the file does not end with <code>.txt</code>?"}, {"owner": {"reputation": 317, "user_id": 1817001, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8bJze.png?s=128&g=1", "display_name": "J_C", "link": "https://stackoverflow.com/users/1817001/j-c"}, "reply_to_user": {"reputation": 1051, "user_id": 8678978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FFZS4.gif?s=128&g=1", "display_name": "chrisbyte", "link": "https://stackoverflow.com/users/8678978/chrisbyte"}, "edited": false, "score": 0, "creation_date": 1576099293, "post_id": 59294249, "comment_id": 104793107, "body": "@chrisbyte you could also split on the &quot;.&quot; and just print the 1st result in the list it returns"}, {"owner": {"reputation": 1051, "user_id": 8678978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FFZS4.gif?s=128&g=1", "display_name": "chrisbyte", "link": "https://stackoverflow.com/users/8678978/chrisbyte"}, "edited": false, "score": 1, "creation_date": 1576099417, "post_id": 59294249, "comment_id": 104793163, "body": "Periods are legal in file names, and some files can be called <code>my.file.txt</code>. It would only return the <code>my</code>"}, {"owner": {"reputation": 317, "user_id": 1817001, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8bJze.png?s=128&g=1", "display_name": "J_C", "link": "https://stackoverflow.com/users/1817001/j-c"}, "reply_to_user": {"reputation": 1051, "user_id": 8678978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FFZS4.gif?s=128&g=1", "display_name": "chrisbyte", "link": "https://stackoverflow.com/users/8678978/chrisbyte"}, "edited": false, "score": 0, "creation_date": 1576183617, "post_id": 59294249, "comment_id": 104826810, "body": "@chrisbyte the split method returns a list so in that case you can remove the last item in the list and reconstruct the remaining items with a .join()"}], "tags": [], "owner": {"reputation": 317, "user_id": 1817001, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8bJze.png?s=128&g=1", "display_name": "J_C", "link": "https://stackoverflow.com/users/1817001/j-c"}, "is_accepted": true, "score": 0, "last_activity_date": 1576099222, "last_edit_date": 1576099222, "creation_date": 1576099173, "answer_id": 59294249, "question_id": 59294216, "link": "https://stackoverflow.com/questions/59294216/python-string-alphabet-removal/59294249#59294249", "title": "Python string alphabet removal?", "body": "<p>Well if you only have .txt files you can do this </p>\n\n<pre><code>file_name = \"myfile.txt\"\nfile_name.replace('.txt', '')\n</code></pre>\n\n<p>This uses the built in replace functionality. You can find more info on it <a href=\"https://www.geeksforgeeks.org/python-string-replace/\" rel=\"nofollow noreferrer\">here</a>!</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 11115958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d34fb6818da3bf02001a74d76fb4d314?s=128&d=identicon&r=PG&f=1", "display_name": "TwinDream", "link": "https://stackoverflow.com/users/11115958/twindream"}, "edited": false, "score": 0, "creation_date": 1576099420, "post_id": 59294265, "comment_id": 104793165, "body": "Thanks for your input, but since I am not using os. I used the one below."}], "tags": [], "owner": {"reputation": 3671, "user_id": 2826937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmIdz.png?s=128&g=1", "display_name": "Alexandr Shurigin", "link": "https://stackoverflow.com/users/2826937/alexandr-shurigin"}, "is_accepted": false, "score": 2, "last_activity_date": 1576099218, "creation_date": 1576099218, "answer_id": 59294265, "question_id": 59294216, "link": "https://stackoverflow.com/questions/59294216/python-string-alphabet-removal/59294265#59294265", "title": "Python string alphabet removal?", "body": "<p>The best way to do it is in the example</p>\n\n<pre><code>import os\n\nfilename = 'myfile.txt'\n\nprint(filename)\nprint(os.path.splitext(filename))\nprint(os.path.splitext(filename)[0])\n</code></pre>\n\n<p>More info about this very useful builtin module</p>\n\n<p><a href=\"https://docs.python.org/3.8/library/os.path.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3.8/library/os.path.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 585, "user_id": 11297958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iBWI7.png?s=128&g=1", "display_name": "Kalma", "link": "https://stackoverflow.com/users/11297958/kalma"}, "is_accepted": false, "score": 2, "last_activity_date": 1576099326, "creation_date": 1576099326, "answer_id": 59294285, "question_id": 59294216, "link": "https://stackoverflow.com/questions/59294216/python-string-alphabet-removal/59294285#59294285", "title": "Python string alphabet removal?", "body": "<p>The answers given are totally right, but if you have other possible extensions, or don't want to import anything, try this:</p>\n\n<pre><code>name = file_name.rsplit(\".\", 1)[0]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "is_accepted": false, "score": 1, "last_activity_date": 1576100520, "creation_date": 1576100520, "answer_id": 59294543, "question_id": 59294216, "link": "https://stackoverflow.com/questions/59294216/python-string-alphabet-removal/59294543#59294543", "title": "Python string alphabet removal?", "body": "<p>You can use <code>pathlib.Path</code> which has a <code>stem</code> attribute that returns the filename without the suffix.</p>\n\n<pre><code>&gt;&gt;&gt; from pathlib import Path\n&gt;&gt;&gt; Path('myfile.txt').stem\n'myfile'\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11115958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d34fb6818da3bf02001a74d76fb4d314?s=128&d=identicon&r=PG&f=1", "display_name": "TwinDream", "link": "https://stackoverflow.com/users/11115958/twindream"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 59294249, "answer_count": 4, "score": -3, "last_activity_date": 1576101867, "creation_date": 1576099003, "last_edit_date": 1576101867, "question_id": 59294216, "link": "https://stackoverflow.com/questions/59294216/python-string-alphabet-removal", "title": "Python string alphabet removal?", "body": "<p>So in my program, I am reading in files and processing them. </p>\n\n<p>My output should say just the file name and then display some data</p>\n\n<p>When I am looping through files and printing output by their name and data,</p>\n\n<p>it displays for example: <code>myfile.txt</code>. I don't want the <code>.txt</code> part. just <code>myfile</code>.</p>\n\n<p>how can I remove the <code>.txt</code> from the end of this string?</p>\n"}, {"tags": ["python", "variables", "qgis"], "comments": [{"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1576101067, "post_id": 59294213, "comment_id": 104793801, "body": "That semicolon needs to be a colon instead.  Also, the next three lines should be indented one level further."}, {"owner": {"reputation": 1, "user_id": 12520944, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WLenbIPzCg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rftGs27grGjsFD_bNtUojPc5f2sDQ/photo.jpg?sz=128", "display_name": "Damon Breen", "link": "https://stackoverflow.com/users/12520944/damon-breen"}, "reply_to_user": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1576158646, "post_id": 59294213, "comment_id": 104814317, "body": "Okay, I made those changes, and now I get error &quot;File &quot;&lt;input&gt;&quot;, line 1, in &lt;module&gt;&quot;, and &quot;File &quot;&lt;string&gt;&quot;, Line 24 , in &lt;module&gt;&quot;"}, {"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1576166989, "post_id": 59294213, "comment_id": 104819547, "body": "That&#39;s clearly not the full error message.  It&#39;s only the part that tells you <i>where</i> the error occurred (and only the &quot;Line 24&quot; part is referring to your code), not the part that tells you what actually went wrong."}, {"owner": {"reputation": 1, "user_id": 12520944, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WLenbIPzCg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rftGs27grGjsFD_bNtUojPc5f2sDQ/photo.jpg?sz=128", "display_name": "Damon Breen", "link": "https://stackoverflow.com/users/12520944/damon-breen"}, "reply_to_user": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1576170243, "post_id": 59294213, "comment_id": 104821275, "body": "I tried to post what I thought was important. I missed the actual error message somehow. I&#39;ve updated the post to reflect the new error message. I really appreciate you helping with this."}, {"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1576170954, "post_id": 59294213, "comment_id": 104821577, "body": "<code>setSelectedFeatures()</code> was apparently a QGIS 2.x method name.  It&#39;s now called <code>selectByIds()</code>.  (Source: <a href=\"https://qgis.org/api/api_break.html\" rel=\"nofollow noreferrer\">qgis.org/api/api_break.html</a>)"}, {"owner": {"reputation": 1, "user_id": 12520944, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WLenbIPzCg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rftGs27grGjsFD_bNtUojPc5f2sDQ/photo.jpg?sz=128", "display_name": "Damon Breen", "link": "https://stackoverflow.com/users/12520944/damon-breen"}, "reply_to_user": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1576174593, "post_id": 59294213, "comment_id": 104823240, "body": "Okay, so I no replaced setSelectedFeatures with selectByIds and I no longer get the error message. However, it deselects whatever feature I have selected as opposed to selecting all other features that it has essentially filtered. I understand a lot of the code, but I&#39;ll be honest some of it I do not understand. I am assuming the last line actually selects the other features based on the selection defined in the line above. Not sure if the problem is in the &quot;selecting&quot; portion or the filtering portion. I have used other compilers that have allowed me to &quot;step-into&quot; the code. That&#39;s helpful."}], "owner": {"reputation": 1, "user_id": 12520944, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WLenbIPzCg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rftGs27grGjsFD_bNtUojPc5f2sDQ/photo.jpg?sz=128", "display_name": "Damon Breen", "link": "https://stackoverflow.com/users/12520944/damon-breen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 271, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1576170189, "creation_date": 1576098987, "last_edit_date": 1576170189, "question_id": 59294213, "link": "https://stackoverflow.com/questions/59294213/code-error-with-variable-storage-from-selected-feature", "title": "Code error with variable storage from selected feature", "body": "<p>I'm using QGIS 3.6 with the built in Python text editor. I have found a snippet of code that I'm trying to make work, and I've modified it to the best of my abilities to fit my specific needs. I have a point layer called \"Regulators\" and it contains a field called \"Town\". The idea of the code is that when I select a single feature on the \"Regulators\" layer, the code will look at the \"Town\" field, and select all other features that match that field's value. I select a feature, run this code:</p>\n\n<pre><code>layer = iface.activeLayer()\nfield_name = 'Town'\n\nvalues = []\nfor feat in layer.selectedFeatures():\n    tmp_value = feat[field_name]\n    if tmp_value not in values:\n        values.append(str(tmp_value))\n\nstrings = []\nfor val in values:\n    if val != values[-1]:\n        string = field_name + ' = ' + val +  ' or '\n        strings.append(string)\n    else:\n        last_string = field_name + ' = ' + val\n        strings.append(last_string)\nquery = ''.join(strings)\n\nrequest = QgsFeatureRequest().setFlags(QgsFeatureRequest.NoGeometry)\nrequest.setSubsetOfAttributes([]).setFilterExpression(query)\n\nselection = layer.getFeatures(request)\nlayer.setSelectedFeatures([k.id() for k in selection])\n</code></pre>\n\n<p>and I get this error: </p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\PROGRA~1\\QGIS3~1.6\\apps\\Python37\\lib\\code.py\", line 90, in runcode\n    exec(code, self.locals)\n  File \"&lt;input&gt;\", line 1, in &lt;module&gt;\n  File \"&lt;string&gt;\", line 24, in &lt;module&gt;\nAttributeError: 'QgsVectorLayer' object has no attribute 'setSelectedFeatures'\n</code></pre>\n\n<p>I'm very much new to python, and see nothing wrong with line 1 or 5. I have found some other codes that do what I'm attempting here, but they also return errors, so I'm wondering if there is some method or function that has changed since this code was posted. The integrated compiler with QGIS is also much different than I am used to.</p>\n\n<p>EDIT: I've updated the code and the error message based on feedback I've received on the post so far. I assume that QgsVectorLayer is the generic term for a vector layer being referenced, in this case the \"Regulators\" layer. but I don't understand why it's trying to use the setSelectedFeatures method as an attribute. </p>\n"}, {"tags": ["python", "flask", "postman", "text-to-speech", "gtts"], "comments": [{"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1576101277, "post_id": 59294202, "comment_id": 104793871, "body": "(You really need a better explanation of what goes wrong than &quot;doesn&#39;t work&quot;!)  What does your JSON data look like?  It could quite easily be something that isn&#39;t appropriate as the <code>text=</code> parameter to <code>gTTS()</code>."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1576101797, "post_id": 59294202, "comment_id": 104794041, "body": "what means <code>doesn&#39;t work</code>? We can&#39;t read in your mind and don&#39;t expect that we will run code to see how it works. Besides it can works correctly on our computers."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1576101801, "post_id": 59294202, "comment_id": 104794044, "body": "always put full error message (starting at word &quot;Traceback&quot;) in question (not comment) as text (not screenshot). There are other useful information."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1576102101, "post_id": 59294202, "comment_id": 104794140, "body": "if you want to send <code>POST</code> to this Flask then you have to use <code>@app.route(&quot;&#47;&quot;, methods=[&#39;POST&#39;, &#39;GET&#39;])</code> to get it."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12067537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/07OSa.png?s=128&g=1", "display_name": "smath", "link": "https://stackoverflow.com/users/12067537/smath"}, "edited": false, "score": 0, "creation_date": 1576103910, "post_id": 59294920, "comment_id": 104794731, "body": "this works, sorry for the hazing in the question, next time i will be more specific"}], "tags": [], "owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "is_accepted": true, "score": 1, "last_activity_date": 1576102432, "creation_date": 1576102432, "answer_id": 59294920, "question_id": 59294202, "link": "https://stackoverflow.com/questions/59294202/using-flask-to-reproduce-an-audio-using-json/59294920#59294920", "title": "Using Flask to reproduce an audio using json", "body": "<p><code>Flask</code> as default doesn't get <code>POST</code> requests and you have to use <code>methods=['POST', 'GET']</code></p>\n\n<pre><code>from gtts import gTTS\nfrom flask import Flask, send_file, request\n\napp = Flask(__name__)\n\n@app.route(\"/\", methods=['POST', 'GET'])\ndef t2s():\n    text = request.get_json()\n    print(text)\n    obj = gTTS(text = text, slow = False, lang = 'en')    \n    obj.save('audio.wav')\n    return send_file('audio.wav')\n\nif __name__ == \"__main__\":\n    app.run(host='0.0.0.0', port=3000) \n</code></pre>\n\n<p>And test (using <code>mplayer</code> on Linux):</p>\n\n<pre><code>import requests\nimport os\n\ndata = 'Hello World'\n\nr = requests.post('http://127.0.0.1:3000/', json=data)\n\nopen('output.wav', 'wb').write(r.content)\n\nos.system('mplayer output.wav')\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12067537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/07OSa.png?s=128&g=1", "display_name": "smath", "link": "https://stackoverflow.com/users/12067537/smath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 305, "favorite_count": 0, "accepted_answer_id": 59294920, "answer_count": 1, "score": -1, "last_activity_date": 1576102432, "creation_date": 1576098934, "question_id": 59294202, "link": "https://stackoverflow.com/questions/59294202/using-flask-to-reproduce-an-audio-using-json", "title": "Using Flask to reproduce an audio using json", "body": "<p>i'm trying to make an app in flask-python that using a json post send an audio using the gtts google library as the answer, but my method doesn't work. My code is the following.</p>\n\n<pre><code>from gtts import gTTS\nfrom flask import Flask, send_file, request\n\n\n\napp = Flask(__name__)\n\n@app.route(\"/\")\ndef t2s():\n    text = request.get_json()\n    obj = gTTS(text = text, slow = False, lang = 'en')    \n    obj.save('audio.wav')\n    return send_file('audio.wav')\n\n\nif __name__ == \"__main__\":\n    app.run(port=3000  , debug=True, use_reloader=True, host='0.0.0.0') \n</code></pre>\n\n<p>any suggestions?, i'm using postman.</p>\n\n<p>Thanks a lot for the possible help</p>\n"}, {"tags": ["python", "arrays", "image"], "answers": [{"tags": [], "owner": {"reputation": 720, "user_id": 7558835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73408df29ba6f9748367f2ba821ae9ac?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Palacios", "link": "https://stackoverflow.com/users/7558835/diego-palacios"}, "is_accepted": false, "score": 1, "last_activity_date": 1576099633, "creation_date": 1576099633, "answer_id": 59294346, "question_id": 59294201, "link": "https://stackoverflow.com/questions/59294201/understand-python-image-arrays/59294346#59294346", "title": "Understand python image arrays", "body": "<p>Usually in numpy and matplotlib the rgb channels are in the last axis. This is just a convention, so you can do little about this. If you use a program that uses the other convention (channels first), you can transform the image with:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>channels_first_im = np.moveaxis(channels_last_im, 0, 1)\n</code></pre>\n\n<p>and the other way:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>channels_last_im = np.moveaxis(channels_first_im, 0, -1)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 39, "user_id": 10311049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89284bd12e190abf670e95edba7c9915?s=128&d=identicon&r=PG", "display_name": "Paulo Praca", "link": "https://stackoverflow.com/users/10311049/paulo-praca"}, "edited": false, "score": 0, "creation_date": 1576176361, "post_id": 59294505, "comment_id": 104824025, "body": "Thanks four your clarification"}], "tags": [], "owner": {"reputation": 196, "user_id": 12513994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5db57ea76f9f18ddbd7e2defae26eca?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Habel", "link": "https://stackoverflow.com/users/12513994/joe-habel"}, "is_accepted": false, "score": 0, "last_activity_date": 1576100347, "creation_date": 1576100347, "answer_id": 59294505, "question_id": 59294201, "link": "https://stackoverflow.com/questions/59294201/understand-python-image-arrays/59294505#59294505", "title": "Understand python image arrays", "body": "<p>If you're confused about why the convention image arrays would be of shape <code>(N, M, 3)</code> instead of <code>(3, N, M)</code>, let's look at how indexing would work in both of those scenarios.</p>\n\n<p>Let's assume we have an image called <code>image_array</code>, that represents a random colored with a width and height of 100 pixels, and let's try to index it to access the value of the pixel at index <code>(50, 50)</code>.</p>\n\n<h3>Channels First</h3>\n\n<pre><code>import numpy as np\n\nimage = np.random.random((3, 100, 100)) #image.shape == (3, 100, 100)\npixel = image[:, 50, 50] #pixel.shape == (3,)\n</code></pre>\n\n<h3>Channels Last</h3>\n\n<pre><code>import numpy as np\n\nimage = np.random.random((100, 100, 3)) #image.shape == (100, 100, 3)\npixel = image[50, 50] #pixel.shape == (3,)\n</code></pre>\n\n<p>Having the channels as the last dimension of the array, means that the individual pixel information is easier to index to find. Where as in the first case, we need to specify that we want the entire first dimension every time. These are inherently the same thing, but leaving the channels last allows us to be less verbose as to how we index the array.</p>\n"}], "owner": {"reputation": 39, "user_id": 10311049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89284bd12e190abf670e95edba7c9915?s=128&d=identicon&r=PG", "display_name": "Paulo Praca", "link": "https://stackoverflow.com/users/10311049/paulo-praca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1576100347, "creation_date": 1576098931, "last_edit_date": 1576099195, "question_id": 59294201, "link": "https://stackoverflow.com/questions/59294201/understand-python-image-arrays", "title": "Understand python image arrays", "body": "<p>I can declare a 3D array like this:</p>\n\n<h1>a 3D array, shape-(2, 2, 2)</h1>\n\n<pre><code>3D_array = np.array([[[0, 1],[2, 3]], [[4, 5],[6, 7]]])\n</code></pre>\n\n<p>So if I have an image <code>10*10(pixels) 3 rgb</code> channels,  image.shape would be <code>(3x10x10)</code>.\nBut i see all the time image.shape equal to <code>(10x10x3)</code>, i don't understand why?</p>\n\n<p>Thanks for you attention.</p>\n"}, {"tags": ["python", "pandas", "hadoop", "mapreduce"], "comments": [{"owner": {"reputation": 907, "user_id": 1558604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b97af9fb78006cf022f9e60b0d9b428?s=128&d=identicon&r=PG", "display_name": "user1558604", "link": "https://stackoverflow.com/users/1558604/user1558604"}, "edited": false, "score": 0, "creation_date": 1576107444, "post_id": 59294200, "comment_id": 104795737, "body": "Does this help? <a href=\"https://stackoverflow.com/questions/17037300/running-a-job-using-hadoop-streaming-and-mrjob-pipemapred-waitoutputthreads\" title=\"running a job using hadoop streaming and mrjob pipemapred waitoutputthreads\">stackoverflow.com/questions/17037300/&hellip;</a>"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1576118780, "post_id": 59294200, "comment_id": 104798024, "body": "You need to go to the actual container logs in YARN to see the real error.   Chances are, pandas is not installed on every machine that your job runs on."}, {"owner": {"reputation": 59, "user_id": 11022851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5825ba0c053fa63c99737c73fc851591?s=128&d=identicon&r=PG&f=1", "display_name": "st_bones", "link": "https://stackoverflow.com/users/11022851/st-bones"}, "edited": false, "score": 0, "creation_date": 1576153434, "post_id": 59294200, "comment_id": 104811446, "body": "It works fine when I remove below code from the script.  I believe there is syntex error which doesn\u2019t support with mapReduce.. please advice df_notnull = df[df[column].notnull()].copy()"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1576208373, "post_id": 59294200, "comment_id": 104832945, "body": "Mapreduce just runs the code on a remote machine as is. If there is a syntax issue, script fails locally as well. If pandas isn&#39;t available on the other server, obviously it would fail... But again, you must open the yarn UI to see real errors"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1576208495, "post_id": 59294200, "comment_id": 104832978, "body": "In any case, you really shouldn&#39;t be using pandas here, but rather Spark if you want dataframes on Hadoop"}], "owner": {"reputation": 59, "user_id": 11022851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5825ba0c053fa63c99737c73fc851591?s=128&d=identicon&r=PG&f=1", "display_name": "st_bones", "link": "https://stackoverflow.com/users/11022851/st-bones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1580233888, "creation_date": 1576098930, "last_edit_date": 1576179230, "question_id": 59294200, "link": "https://stackoverflow.com/questions/59294200/error-when-python-script-executed-using-map-reduce", "title": "Error when Python script executed using Map Reduce", "body": "<p>I am getting below error when my python script executed using Hadoop Map Reduce. But it works fine when the script is executed locally (not using Mapreduce). </p>\n\n<p>When I remove below code from the script, MapReduce works fine. \n<code>df_notnull = df[df[column].notnull()].copy()</code></p>\n\n<p>please advise what i am doing wrong?</p>\n\n<p>Script:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#!/usr/local/bin/python3\n\nimport os\nimport sys\nimport pandas as pd\nimport string\n\ncolumn='first_name'\nseperator_in='|'\nseperator_out='|'\ncompression_in=None\ncompression_out=None\nencrypted_value_list = []\n\ndf = pd.read_csv(sys.stdin, compression=compression_in, sep=seperator_in, low_memory=False, encoding='utf-8-sig')\ndf_notnull = df[df[column].notnull()].copy()\ndf_notnull.to_csv(sys.stdout, compression=compression_out, index=False, sep=seperator_out)\n</code></pre>\n\n<p>Submit Command:</p>\n\n<pre><code>hadoop jar /usr/env/hadoop-mapreduce-client/hadoop-streaming.jar -D mapreduce.job.queuename=QueueName -D mapreduce.job.reduces=1 -file /file/path/pythonScript.py -mapper 'python3 pythonScript.py' -input /file/path/python_test.csv -output /file/path/ouput001/out_17\n</code></pre>\n\n<p>Error:</p>\n\n<blockquote>\n  <p>Error: java.lang.RuntimeException: PipeMapRed.waitOutputThreads(): subprocess failed with code 1\n      at org.apache.hadoop.streaming.PipeMapRed.waitOutputThreads(PipeMapRed.java:322)\n      at org.apache.hadoop.streaming.PipeMapRed.mapRedFinished(PipeMapRed.java:535)\n      at org.apache.hadoop.streaming.PipeMapper.close(PipeMapper.java:130)\n      at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:61)\n      at org.apache.hadoop.streaming.PipeMapRunner.run(PipeMapRunner.java:34)\n      at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:453)\n      at org.apache.hadoop.mapred.MapTask.run(MapTask.java:343)\n      at org.apache.hadoop.mapred.YarnChild$2.run(YarnChild.java:170)\n      at java.security.AccessController.doPrivileged(Native Method)\n      at javax.security.auth.Subject.doAs(Subject.java:422)\n      at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1869)\n      at org.apache.hadoop.mapred.YarnChild.main(YarnChild.java:164)</p>\n</blockquote>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "edited": false, "score": 0, "creation_date": 1576099287, "post_id": 59294198, "comment_id": 104793105, "body": "So do you want to group by the ID and Deposit/Withdrawal? Just to print the count of deposit and count of withdrawal for each ID?"}, {"owner": {"reputation": 15, "user_id": 6273728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ebdd1b1e4fe5ea8999cd51c67aa1e42?s=128&d=identicon&r=PG&f=1", "display_name": "stackflower10", "link": "https://stackoverflow.com/users/6273728/stackflower10"}, "reply_to_user": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "edited": false, "score": 0, "creation_date": 1576099430, "post_id": 59294198, "comment_id": 104793168, "body": "Not exactly, if I groupby ID and Type, then it wouldn&#39;t account for if an id has a deposit before and after a withdrawal. I want it counted in order so the same id can have multiple counts for deposits or withdrawals"}, {"owner": {"reputation": 15, "user_id": 6273728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ebdd1b1e4fe5ea8999cd51c67aa1e42?s=128&d=identicon&r=PG&f=1", "display_name": "stackflower10", "link": "https://stackoverflow.com/users/6273728/stackflower10"}, "reply_to_user": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "edited": false, "score": 0, "creation_date": 1576099593, "post_id": 59294198, "comment_id": 104793238, "body": "I think this can be achieved using a while loop and a counter but I was wondering if there is a way to do it more efficiently using groupby"}, {"owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "edited": false, "score": 0, "creation_date": 1576100186, "post_id": 59294198, "comment_id": 104793471, "body": "Is your output correct? Shouldn&#39;t  <code>2   2019-12-06 20:07:11.122+00  Withdrawal 1</code> be <i>after</i> <code>2   2019-12-03 23:21:33.465+00  Deposit 2</code> (if time is correct)?"}, {"owner": {"reputation": 15, "user_id": 6273728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ebdd1b1e4fe5ea8999cd51c67aa1e42?s=128&d=identicon&r=PG&f=1", "display_name": "stackflower10", "link": "https://stackoverflow.com/users/6273728/stackflower10"}, "reply_to_user": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "edited": false, "score": 0, "creation_date": 1576100417, "post_id": 59294198, "comment_id": 104793572, "body": "ah sorry yes you are correct editing original message"}], "answers": [{"tags": [], "owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "is_accepted": true, "score": 0, "last_activity_date": 1576100700, "creation_date": 1576100700, "answer_id": 59294574, "question_id": 59294198, "link": "https://stackoverflow.com/questions/59294198/rolling-groupby-function-based-on-a-column-in-python/59294574#59294574", "title": "Rolling Groupby function based on a column in Python", "body": "<p>You can use <code>itertools.groupby</code> (<a href=\"https://docs.python.org/3.5/library/itertools.html#itertools.groupby\" rel=\"nofollow noreferrer\">doc</a>) to group your data according ID and Type.</p>\n\n<p>For example:</p>\n\n<pre><code>data = [\n['1', '2016-05-13 22:21:02.625+00', 'Deposit'],\n['1', '2016-05-13 22:29:26.402+00', 'Deposit'],\n['1', '2016-05-16 00:51:22.835+00', 'Withdrawal'],\n['1', '2019-03-21 21:01:28.528+00', 'Withdrawal'],\n['1', '2019-03-21 21:02:10.509+00', 'Withdrawal'],\n['1', '2019-12-06 23:34:15.194+00', 'Deposit'],\n['2', '2019-12-03 23:21:33.465+00', 'Withdrawal'],\n['2', '2019-12-05 00:51:01.136+00', 'Deposit'],\n['2', '2019-12-06 20:07:11.122+00', 'Deposit']\n]\n\nfrom itertools import groupby\n\ndata = sorted(data, key=lambda k: (int(k[0]), k[1]))    # &lt;-- if your data is sorted by (ID, Time), you may skip this\n\nfor v, g in groupby(data, lambda k: (k[0], k[2])):\n    g = list(g)\n    print(v[0], g[-1][1], g[-1][2], len(g))\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>1 2016-05-13 22:29:26.402+00 Deposit 2\n1 2019-03-21 21:02:10.509+00 Withdrawal 3\n1 2019-12-06 23:34:15.194+00 Deposit 1\n2 2019-12-03 23:21:33.465+00 Withdrawal 1\n2 2019-12-06 20:07:11.122+00 Deposit 2\n</code></pre>\n\n<p>Note: You can sort the time as string. It's in format that allows this.</p>\n"}], "owner": {"reputation": 15, "user_id": 6273728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ebdd1b1e4fe5ea8999cd51c67aa1e42?s=128&d=identicon&r=PG&f=1", "display_name": "stackflower10", "link": "https://stackoverflow.com/users/6273728/stackflower10"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 59294574, "answer_count": 1, "score": 0, "last_activity_date": 1576101419, "creation_date": 1576098923, "last_edit_date": 1576101419, "question_id": 59294198, "link": "https://stackoverflow.com/questions/59294198/rolling-groupby-function-based-on-a-column-in-python", "title": "Rolling Groupby function based on a column in Python", "body": "<p>I have data that is ordered by id, timestamp:</p>\n\n<pre><code>1   2016-05-13 22:21:02.625+00  Deposit \n1   2016-05-13 22:29:26.402+00  Deposit \n1   2016-05-16 00:51:22.835+00  Withdrawal  \n1   2019-03-21 21:01:28.528+00  Withdrawal  \n1   2019-03-21 21:02:10.509+00  Withdrawal  \n1   2019-12-06 23:34:15.194+00  Deposit \n2   2019-12-03 23:21:33.465+00  Withdrawal  \n2   2019-12-05 00:51:01.136+00  Deposit \n2   2019-12-06 20:07:11.122+00  Deposit \n</code></pre>\n\n<p>The desire output is below which is just grouped by Deposit/Withdrawal but stops everytime it changes from deposit to withdrawal or vice versa:</p>\n\n<pre><code>1   2016-05-13 22:29:26.402+00  Deposit 2\n1   2019-03-21 21:02:10.509+00  Withdrawal 3\n1   2019-12-06 23:34:15.194+00  Deposit 1\n2   2019-12-03 23:21:33.465+00  Withdrawal 1\n2   2019-12-06 20:07:11.122+00  Deposit 2\n</code></pre>\n\n<p>Is there a clean way to do this?</p>\n"}, {"tags": ["python", "python-3.x", "linux", "python-2.7", "fedora"], "comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1576108685, "post_id": 59294197, "comment_id": 104796047, "body": "Why are you custom installing Python, rather than using the packages provided by your distribution?"}, {"owner": {"reputation": 13306, "user_id": 162698, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HnjBG.png?s=128&g=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/162698/rob"}, "edited": false, "score": 1, "creation_date": 1576111912, "post_id": 59294197, "comment_id": 104796694, "body": "<a href=\"https://stackoverflow.com/help/how-to-ask\">How to ask</a> and <a href=\"https://stackoverflow.com/help/on-topic\">Is This On Topic?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 30613, "user_id": 8705432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14e0f95975d80525786e419222821ff4?s=128&d=identicon&r=PG&f=1", "display_name": "bk2204", "link": "https://stackoverflow.com/users/8705432/bk2204"}, "is_accepted": true, "score": 2, "last_activity_date": 1576108289, "creation_date": 1576108289, "answer_id": 59295812, "question_id": 59294197, "link": "https://stackoverflow.com/questions/59294197/fedora-system-python3-interpreter-and-making-altinstall/59295812#59295812", "title": "Fedora system python3 interpreter and making altinstall", "body": "<p>Fedora, like most other Linux distros, ships software written in a wide variety of languages, including Python.  One needs a Python interpreter if one wants to run Python programs, so Fedora ships one.</p>\n\n<p>Typically, the Filesystem Hierarchy Standard implies that vendors (such as Linux distros) should ship their interpreters in <code>/usr/bin</code>, so <code>dnf install python3</code> installs the standard Fedora <code>python3</code> package, which provides <code>/usr/bin/python3</code>.  It's already installed because some program (possibly <code>dnf</code> itself) requires it.</p>\n\n<p>In general, distros specify the shebang of their scripts as an absolute path to the interpreter, not using <code>/usr/bin/env</code>, so you should be fine if you choose to install a version of Python into some place like <code>/usr/local/bin</code>.  You may run into problems if you use scripts from other sources that do use <code>/usr/bin/env</code> but expect the system interpreter.</p>\n\n<p>If you're looking to find the necessary dependencies to build Python 3 on your system, the easiest way to find that is to look at the source package (in this case, the Fedora source RPM) and see what dependencies it has.  Installing those dependencies should be sufficient to compile Python unless you choose to compile it with different or nonstandard options.</p>\n"}], "owner": {"reputation": 39, "user_id": 10598524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e7c9873cd0ec468dd652686a68e6f5f?s=128&d=identicon&r=PG&f=1", "display_name": "jnt", "link": "https://stackoverflow.com/users/10598524/jnt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "closed_date": 1576116534, "accepted_answer_id": 59295812, "answer_count": 1, "score": -1, "last_activity_date": 1576108289, "creation_date": 1576098922, "last_edit_date": 1576099369, "question_id": 59294197, "link": "https://stackoverflow.com/questions/59294197/fedora-system-python3-interpreter-and-making-altinstall", "closed_reason": "Not suitable for this site", "title": "Fedora system python3 interpreter and making altinstall", "body": "<p>I am setting up fedora 31, as I am making the switch from windows, finally. I installed python2.7 via the</p>\n\n<p><code>./configure --enable-optimizations\nmake altinstall</code></p>\n\n<p>way. <a href=\"https://tecadmin.net/install-python-2-7-on-centos-rhel/\" rel=\"nofollow noreferrer\">This</a> descriped that we have to use <code>altinstall</code> in order to not override / destroy the python interpreter the system (fedora) ships with. Everything went fine and the custom python2.7 install. It is located in <code>/usr/local/bin/python2.7</code> and therefore different to system's python which is probably the one in <code>/usr/bin/python</code>.</p>\n\n<p>Now I wanted to install a custom python3 as well. I googled and found the quickest way would be dnf install python3 but to my surprise it returned that Package python3-3.7.5-1.fc31.x86_64 is already installed. And I cannot remember installing it (if it isn't included inside \"Development Tools\") </p>\n\n<p>First question: Why does Fedora come with system python interpreter? What are they for? Will another python interpreter that is named exactly the same as the sys py but found earlier due to it's PATH position break things? Or is sys py just used to run some python scripts containing a shebang to the system python?</p>\n\n<p>Second:\nAs the already is located inside <code>/usr/bin/python3</code> I wondered if Fedora is also shipped with a system python3 (as python2.7 is deprecating in a few weeks) that shouldn't be touched.</p>\n\n<p>If yes, I probably should compile another python3 that should be in <code>/usr/local/bin/</code> like my custom python2.7. However, <a href=\"https://docs.python.org/3/using/unix.html\" rel=\"nofollow noreferrer\">doc</a> seems like it would install it in <code>/usr/bin/</code>, but I don't understand what they write about the prefix.</p>\n\n<p>Third question: Are there any other dependencies required to compile python3 as <a href=\"https://devguide.python.org/setup/\" rel=\"nofollow noreferrer\">this</a> mentions <code>builddep</code> (zlib e.g.) but <a href=\"https://docs.python.org/3/using/unix.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3/using/unix.html</a> doesnt.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "n-gram"], "answers": [{"tags": [], "owner": {"reputation": 2134, "user_id": 6107054, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5d3d2798d6e68fa3d2b0c3af524d9345?s=128&d=identicon&r=PG&f=1", "display_name": "aberger", "link": "https://stackoverflow.com/users/6107054/aberger"}, "is_accepted": false, "score": 1, "last_activity_date": 1576683886, "creation_date": 1576683886, "answer_id": 59395550, "question_id": 59294196, "link": "https://stackoverflow.com/questions/59294196/python-using-ngram-sentiment-analysis-cannot-get-top-5-words/59395550#59395550", "title": "Python; Using NGram sentiment analysis - cannot get top 5 words", "body": "<p>It looks like you did a little too much copy/paste when you implemented your Logistic Regression model trained on ngrams. When you get <code>feature_names</code> from this model you're using the binary CountVectorizer, <code>cv</code>, instead of <code>ngram_vectorizer</code>. I think you need to change the line</p>\n\n<p><code>feature_names = zip(cv.get_feature_names(), final_ngram.coef_[0])</code></p>\n\n<p>to</p>\n\n<p><code>feature_names = zip(ngram_vectorizer.get_feature_names(), final_ngram.coef_[0])</code></p>\n"}, {"tags": [], "owner": {"reputation": 275, "user_id": 12444582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y44aw.jpg?s=128&g=1", "display_name": "Paul Denoyes", "link": "https://stackoverflow.com/users/12444582/paul-denoyes"}, "is_accepted": true, "score": 1, "last_activity_date": 1576686025, "last_edit_date": 1576686025, "creation_date": 1576685038, "answer_id": 59395900, "question_id": 59294196, "link": "https://stackoverflow.com/questions/59294196/python-using-ngram-sentiment-analysis-cannot-get-top-5-words/59395900#59395900", "title": "Python; Using NGram sentiment analysis - cannot get top 5 words", "body": "<p>Already answered by <a href=\"https://stackoverflow.com/users/6107054/aberger\">aberger</a>, maybe you should replace :</p>\n\n<ul>\n<li>\"feature_names = zip(<strong>cv</strong>.get_feature_names(), final_ngram.coef_[0])\"\nby</li>\n<li>\"feature_names = zip(<strong>ngram_vectorizer</strong>.get_feature_names(), final_ngram.coef_[0])\"</li>\n</ul>\n\n<hr>\n\n<p><strong>A couple of additional considerations</strong></p>\n\n<p>In NLP, NGrams is the fact of considering N contiguous words as a single word. It will be used to \"tokenize\" your text corpus, in order to make this corpus usable by a machine algorithm, but it doesn't have to do with the algorithm itself.</p>\n\n<p>SVM and Logistic regression are two distinct algorithm mostly used for classification (logistic regression is a regression used to separate classes, it's the way we use it that makes this regression a classification algorithm).</p>\n\n<p>I tried to illustrate this with meaningless data (you can replace with yours) so that you can directly run this code and observe results.</p>\n\n<p>As you can see, using NGrams will give almost the same top words, except a bigram and a trigram in my own run :</p>\n\n<ul>\n<li>Logistic regression without NGrams : [('the', 0.22492305532420143), ('boxing', 0.22366726197682427), ('jump', 0.22366726197682427), ('wizards', 0.22366726197682427), ('five', 0.21116962061694416)]</li>\n<li>Logistic regression with NGrams : [('the', 0.1549468448457053), ('five', 0.15263348614045338), ('boxing', 0.12657434061922093), ('boxing wizards', 0.12657434061922093), ('boxing wizards jump', 0.12657434061922093)]</li>\n<li>Logistic regression with NGrams but sorting only unigrams : [('the', 0.1549468448457053), ('five', 0.15263348614045338), ('boxing', 0.12657434061922093), ('jump', 0.12657434061922093), ('wizards', 0.12657434061922093)] &lt;- Give almost the same thing than \"Logistic regression without NGrams\" (not exactly the same as the model has learned with different tokens, i.e. the additional NGrams here)</li>\n</ul>\n\n<pre class=\"lang-py prettyprint-override\"><code>from sklearn.feature_extraction.text import CountVectorizer\nfrom sklearn.svm import LinearSVC\nfrom sklearn.metrics import accuracy_score\nfrom sklearn.linear_model import LogisticRegression\n\ntext_train = [\"The quick brown fox jumps over a lazy dog\",\n        \"Pack my box with five dozen liquor jugs\",\n        \"How quickly daft jumping zebras vex\",\n        \"The five boxing wizards jump quickly\",\n        \"the fox of my friend it the most lazy one I have seen in the past five years\"]\n\ntext_test = [\"just for a test\"]\n\ntarget_train = [1, 1, 0, 1, 0]\n\ntarget_test = [1]\n\n#######################################################################\n##       OBSERVING TOKENIZATION OF DATA WITH AND WITOUT NGRAMS       ##\n#######################################################################\n\n## WITHOUT NGRAMS\n\ncv = CountVectorizer()\ncount_vector = cv.fit_transform(text_train)\n#Display the dictionary pairing each single word and it's position in the\n#\"vectorized\" version of our text corpus, without any count.\nprint(\"\")\nprint(cv.vocabulary_)\nprint(\"\")\nprint(\"\")\nprint(dict(zip(cv.get_feature_names(), count_vector.toarray().sum(axis=0))))\n\n##  WITH NGRAMS\n\n#Now let's also add as meaningfull entities all pair and all trios of words\n#using NGrams\ncv = CountVectorizer(ngram_range=(1,3))\ncount_vector = cv.fit_transform(text_train)\n#Observe that now, \"jump quickly\" and \"large fawn jumped\" for instance are \n#considered as sort of meaningful unique \"words\" composed of several unique\n#words.\nprint(\"\")\nprint(\"\")\nprint(cv.vocabulary_)\nprint(\"\")\nprint(\"\")\n#List of all words and counts their occurences\nprint(dict(zip(cv.get_feature_names(), count_vector.toarray().sum(axis=0))))\n\n#######################################################################\n##                    YOUR ATTEMPT WITH LINEARSVC                    ##\n#######################################################################\ncv1 = CountVectorizer(binary=True)\ncount_vector_train = cv1.fit_transform(text_train)\ncount_vector_test = cv1.transform(text_test)\n\nfinal_svm  = LinearSVC(C=1.0)\nfinal_svm.fit(count_vector_train, target_train)\nfinal_accuracy = final_svm.predict(count_vector_test)\nfinal_accuracy_score = accuracy_score(target_test, final_accuracy)\nprint(\"\")\nprint(\"\")\nprint (\"Final SVM without NGrams Accuracy: %s\" % final_accuracy_score)\nfeature_names = zip(cv1.get_feature_names(), final_svm.coef_[0])\nfeature_to_coef = {\n    word: coef for word, coef in feature_names\n}\nitemz = feature_to_coef.items()\nlist_positive = sorted(\n    itemz, \n    key=lambda x: x[1], \n    reverse=True)[:5] #Here you can choose the top 5\nprint(\"\")\nprint(\"SVM without NGrams\")\nprint(list_positive)\n\n#######################################################################\n##              YOUR ATTEMPT WITH LOGISTIC REGRESSION                ##\n#######################################################################\ncv2 = CountVectorizer(binary=True)\ncount_vector_train = cv2.fit_transform(text_train)\ncount_vector_test = cv2.transform(text_test)\n\nfinal_lr  = LogisticRegression(C=1.0)\nfinal_lr.fit(count_vector_train, target_train)\nfinal_accuracy = final_lr.predict(count_vector_test)\nfinal_accuracy_score = accuracy_score(target_test, final_accuracy)\nprint(\"\")\nprint(\"\")\nprint (\"Final Logistic regression without NGrams Accuracy: %s\" % final_accuracy_score)\nfeature_names = zip(cv2.get_feature_names(), final_lr.coef_[0])\nfeature_to_coef = {\n    word: coef for word, coef in feature_names\n}\nitemz = feature_to_coef.items()\nlist_positive = sorted(\n    itemz, \n    key=lambda x: x[1], \n    reverse=True)[:5] #Here you can choose the top 5\nprint(\"\")\nprint(\"Logistic regression without NGrams\")\nprint(list_positive)\n\n#######################################################################\n##         YOUR ATTEMPT WITH LOGISTIC REGRESSION AND NGRAMS          ##\n#######################################################################\ncv3 = CountVectorizer(binary=True, ngram_range=(1,3))\ncount_vector_train = cv3.fit_transform(text_train)\ncount_vector_test = cv3.transform(text_test)\n\nfinal_lr  = LogisticRegression(C=1.0)\nfinal_lr.fit(count_vector_train, target_train)\nfinal_accuracy = final_lr.predict(count_vector_test)\nfinal_accuracy_score = accuracy_score(target_test, final_accuracy)\nprint(\"\")\nprint(\"\")\nprint (\"Final Logistic regression with NGrams Accuracy: %s\" % final_accuracy_score)\nfeature_names = zip(cv3.get_feature_names(), final_lr.coef_[0])\nfeature_to_coef = {\n    word: coef for word, coef in feature_names\n}\nitemz = feature_to_coef.items()\nlist_positive = sorted(\n    itemz, \n    key=lambda x: x[1], \n    reverse=True)[:5] #Here you can choose the top 5\nprint(\"\")\nprint(\"Logistic regression with NGrams\")\nprint(list_positive)\n\n#######################################################################\n##         YOUR ATTEMPT WITH LOGISTIC REGRESSION AND NGRAMS          ##\n##                BUT EXTRACTS ONLY REAL UNIQUE WORDS                ##\n#######################################################################\ncv4 = CountVectorizer(binary=True, ngram_range=(1,3))\ncount_vector_train = cv4.fit_transform(text_train)\ncount_vector_test = cv4.transform(text_test)\n\nfinal_lr  = LogisticRegression(C=1.0)\nfinal_lr.fit(count_vector_train, target_train)\nfinal_accuracy = final_lr.predict(count_vector_test)\nfinal_accuracy_score = accuracy_score(target_test, final_accuracy)\nprint(\"\")\nprint(\"\")\nprint (\"Final Logistic regression with NGrams Accuracy: %s\" % final_accuracy_score)\nfeature_names = zip(cv4.get_feature_names(), final_lr.coef_[0])\nfeature_names_unigrams = [(a, b) for a, b in feature_names if len(a.split()) &lt; 2]\nfeature_to_coef = {\n    word: coef for word, coef in feature_names_unigrams\n}\nitemz = feature_to_coef.items()\n\nlist_positive = sorted(\n    itemz,\n    key=lambda x: x[1], \n    reverse=True)[:5] #Here you can choose the top 5\nprint(\"\")\nprint(\"Logistic regression with NGrams but only getting unigrams\")\nprint(list_positive)\n</code></pre>\n"}], "owner": {"reputation": 8905, "user_id": 125673, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/82a60bb38342f8f84da434535183e21b?s=128&d=identicon&r=PG", "display_name": "arame3333", "link": "https://stackoverflow.com/users/125673/arame3333"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 290, "favorite_count": 0, "accepted_answer_id": 59395900, "answer_count": 2, "score": 1, "last_activity_date": 1576686025, "creation_date": 1576098910, "question_id": 59294196, "link": "https://stackoverflow.com/questions/59294196/python-using-ngram-sentiment-analysis-cannot-get-top-5-words", "title": "Python; Using NGram sentiment analysis - cannot get top 5 words", "body": "<p>I set up my CountVectorizer as follows;</p>\n\n<pre><code>cv = CountVectorizer(binary=True)\nX = cv.fit_transform(train_text)\nX_test = cv.transform(test_text)\n</code></pre>\n\n<p>And when I use SVM I can print off the top 5 words in my Sentiment Analysis;</p>\n\n<pre><code>final_svm  = LinearSVC(C=best_c)\nfinal_svm.fit(X, target)\nfinal_accuracy = final_svm.predict(X_test)\nfinal_accuracy_score = accuracy_score(target_test, final_accuracy)\nprint (\"Final SVM Accuracy: %s\" % final_accuracy_score)\nReport_Matricies.accuracy(target_test, final_accuracy)\nfeature_names = zip(cv.get_feature_names(), final_model.coef_[0])\nfeature_to_coef = {\n    word: coef for word, coef in feature_names\n}\nitemz = feature_to_coef.items()\nlist_positive = sorted(\n    itemz, \n    key=lambda x: x[1], \n    reverse=True)[:number_we_are_interested_in]\n</code></pre>\n\n<p>So that works. But when I try similar code for NGram, I get random words instead;</p>\n\n<pre><code>   ngram_vectorizer = CountVectorizer(binary=True, ngram_range=(1, no_of_words))\n    X = ngram_vectorizer.fit_transform(train_text)\n    X_test = ngram_vectorizer.transform(test_text)\n    best_c = Logistic_Regression.get_best_hyperparameter(X_train, y_train, y_val, X_val)\n    final_ngram = LogisticRegression(C=best_c)\n    final_ngram.fit(X, target)\n    final_accuracy = final_ngram.predict(X_test)\n    final_accuracy_score = accuracy_score(target_test, final_accuracy)\n    print (\"Final NGram Accuracy: %s\" % final_accuracy_score)\n    Report_Matricies.accuracy(target_test, final_accuracy)\n    feature_names = zip(cv.get_feature_names(), final_ngram.coef_[0])\n    feature_to_coef = {\n        word: coef for word, coef in feature_names\n    }\n    itemz = feature_to_coef.items()\n    list_positive = sorted(\n        itemz, \n        key=lambda x: x[1], \n        reverse=True)\n</code></pre>\n\n<p>The accuracy ratings between my NGram analysis and SVM are similar, so the code I am using for NGramm does not seem to be correct for extracting the kind of words I want, that is they are random words rather than positive words. What code should I be using instead?\nSimilar code can be found on this reference, but the example in part 2 does not print the top 5 words for NGram.\n<a href=\"https://towardsdatascience.com/sentiment-analysis-with-python-part-1-5ce197074184\" rel=\"nofollow noreferrer\">https://towardsdatascience.com/sentiment-analysis-with-python-part-1-5ce197074184</a></p>\n"}, {"tags": ["python", "pandas", "unicode", "decode"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1576098929, "post_id": 59294150, "comment_id": 104792947, "body": "See <a href=\"https://stackoverflow.com/a/56231664/4909087\">this answer</a> under the &quot;Fix UnicodeDecodeError while reading&quot; scenario. TLDR; it was saved using a different encoding that isn&#39;t compatible with utf-8."}, {"owner": {"reputation": 111, "user_id": 12242085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/799a53bf25c597e941cca1fe0bc3aa88?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/12242085/adrian"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1576099044, "post_id": 59294150, "comment_id": 104792993, "body": "it still does not work"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1576099083, "post_id": 59294150, "comment_id": 104793006, "body": "&quot;it still does not work&quot; what exactly did you try?"}, {"owner": {"reputation": 111, "user_id": 12242085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/799a53bf25c597e941cca1fe0bc3aa88?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/12242085/adrian"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1576099192, "post_id": 59294150, "comment_id": 104793062, "body": "df = pd.read_csv(&quot;datasets/myfile.csv&quot;, encoding=&#39;latin-1&#39;)"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1576099276, "post_id": 59294150, "comment_id": 104793100, "body": "Here&#39;s a relevant thread: <a href=\"https://stackoverflow.com/questions/18171739/unicodedecodeerror-when-reading-csv-file-in-pandas-with-python\" title=\"unicodedecodeerror when reading csv file in pandas with python\">stackoverflow.com/questions/18171739/&hellip;</a>"}], "owner": {"reputation": 111, "user_id": 12242085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/799a53bf25c597e941cca1fe0bc3aa88?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/12242085/adrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "closed_date": 1576098884, "answer_count": 0, "score": 0, "last_activity_date": 1576099282, "creation_date": 1576098735, "question_id": 59294150, "link": "https://stackoverflow.com/questions/59294150/unicode-pandas", "closed_reason": "Duplicate", "title": "Unicode Pandas?", "body": "<p>I have this kind of Error when I want to read csv in Jupyter Notebook in Pandas: <code>UnicodeDecodeError: 'utf-8' codec can't decode byte 0xf3 in position 37: invalid continuation byte</code> what should I do?, use encoding argument ? </p>\n"}, {"tags": ["python", "hdf5"], "comments": [{"owner": {"reputation": 3036, "user_id": 10462884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/09Tg9.jpg?s=128&g=1", "display_name": "kcw78", "link": "https://stackoverflow.com/users/10462884/kcw78"}, "edited": false, "score": 1, "creation_date": 1576101122, "post_id": 59294144, "comment_id": 104793818, "body": "Have you considered creating an &quot;Object or Region Reference&quot;? Object references point to an object in the file (a dataset in your case). Region references always point to a dataset, and may be limited to a selection (aka a slice).  Details here:<a href=\"http://docs.h5py.org/en/stable/refs.html#refs\" rel=\"nofollow noreferrer\">h5py Object/Region Refs</a>"}, {"owner": {"reputation": 119, "user_id": 11736303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea2efd2e59401a4315e89ff9c76e5cd1?s=128&d=identicon&r=PG&f=1", "display_name": "J.Hirsch", "link": "https://stackoverflow.com/users/11736303/j-hirsch"}, "reply_to_user": {"reputation": 3036, "user_id": 10462884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/09Tg9.jpg?s=128&g=1", "display_name": "kcw78", "link": "https://stackoverflow.com/users/10462884/kcw78"}, "edited": false, "score": 0, "creation_date": 1576160009, "post_id": 59294144, "comment_id": 104815173, "body": "No, I hadn&#39;t even known that was a thing. Does that work across files too ? (Data is embedded in different files as well). Still learning a lot about HDF."}, {"owner": {"reputation": 3036, "user_id": 10462884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/09Tg9.jpg?s=128&g=1", "display_name": "kcw78", "link": "https://stackoverflow.com/users/10462884/kcw78"}, "edited": false, "score": 1, "creation_date": 1576187465, "post_id": 59294144, "comment_id": 104828273, "body": "Yes, HDF5 has lots beyond simple tables and arrays. :-) If you have data in different files, you should also investigate external links. With external links, you can have a single file (w/ the links) and use the links to access data in the linked files . I posted an answer that explains how to create external links for both h5py and pytables. See this Q&amp;A <a href=\"https://stackoverflow.com/q/58187004/10462884\">SO 58187004</a>"}], "owner": {"reputation": 119, "user_id": 11736303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea2efd2e59401a4315e89ff9c76e5cd1?s=128&d=identicon&r=PG&f=1", "display_name": "J.Hirsch", "link": "https://stackoverflow.com/users/11736303/j-hirsch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1576098698, "creation_date": 1576098698, "question_id": 59294144, "link": "https://stackoverflow.com/questions/59294144/pythonic-way-to-access-hdf5-data-structures-similar-to-pointers", "title": "Pythonic way to access HDF5 data structures similar to pointers", "body": "<p>I've a project that is utilizing HDF5. There are file structures as well as HDF5 data structures for each dataset.</p>\n\n<p>Think of a large video. Each frame is divided up equally and written to multiple files as well as multiple HDF5 data chunks. A single 'video' may have 20+ files (representing temporal and slices), and then more files to represent additional slices. The datasets aren't very large- under 30gb- but are still cumbersome.</p>\n\n<p>My initial dive to associate (stitch) the pieces back together was to put together an array of pointers to the individual frames, and then stack them for the temporal aspect of the video. This would be (fairly) small since I would be pointing to the locations on disk where everything was. This would also limit the amount of data I'd have to hold into memory- always a bonus- for when I scale to the 'larger' datasets.</p>\n\n<p>However the way to accomplish this in Python eludes me- especially when considering I want to tie in the metadata for each frame (pixels, their locations, etc).</p>\n\n<hr>\n\n<p>Is there a method I should be following to better reference the data and 'stitch' it back together? My current method was to create numpy arrays of the raw data. This has the detriment of reading all of the data in and storing it in memory (and disk).</p>\n"}, {"tags": ["python", "matplotlib", "graph"], "comments": [{"owner": {"reputation": 29479, "user_id": 1356000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ef54c2101a4c23ea2441ce2b346ffb75?s=128&d=identicon&r=PG", "display_name": "Diziet Asahi", "link": "https://stackoverflow.com/users/1356000/diziet-asahi"}, "edited": false, "score": 0, "creation_date": 1576099183, "post_id": 59294141, "comment_id": 104793058, "body": "When there is only 2 prices, is it always the same product that is missing?"}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1576099523, "post_id": 59294141, "comment_id": 104793209, "body": "Which price didn&#39;t register?  Is product1, product2, or product3?  How can you tell?"}, {"owner": {"reputation": 13, "user_id": 11574438, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0sAVIFRlI1o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3resW_8YFCQPMbcnIg4P-VLN6ujmQw/mo/photo.jpg?sz=128", "display_name": "Joao Felipe Andrade Carrera", "link": "https://stackoverflow.com/users/11574438/joao-felipe-andrade-carrera"}, "edited": false, "score": 0, "creation_date": 1576100227, "post_id": 59294141, "comment_id": 104793489, "body": "Not necessarily, each of the inside list might have a missing product. But it is complete more often than not"}], "answers": [{"tags": [], "owner": {"reputation": 6155, "user_id": 6817245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5e8c2d05056411966127e92c337fbd?s=128&d=identicon&r=PG&f=1", "display_name": "warped", "link": "https://stackoverflow.com/users/6817245/warped"}, "is_accepted": false, "score": 1, "last_activity_date": 1576138045, "creation_date": 1576138045, "answer_id": 59300131, "question_id": 59294141, "link": "https://stackoverflow.com/questions/59294141/multi-line-graph-with-matplotlib/59300131#59300131", "title": "Multi line graph with matplotlib", "body": "<p>Let me start pointing out that this is not a good way to store your data.\nIf one of the prices is not registered, it is impossible to tell which one, which renders the whole entry unusable. It would be better to use a placeholder like <code>None</code> to remember which value was not measured. For instance:</p>\n\n<pre><code>[5, 6, None] --&gt; The entry for the third product is missing\n[5, None, 5] --&gt; The entry for the second product is missing\n[None, 3, 5] --&gt; The entry for the first product is missing\n</code></pre>\n\n<p>That said, I am going to share a method that assumes that it is always the last product that is missing. By re-recording your data with placeholder, it should give you the correct result.</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\n\ntotal_dates = 10\n\n# create dummy list\nA = []\nfor a in range(total_dates):\n    A.append([np.random.randint(10) for a in range(np.random.randint(2,4))])\n\n# create dummy dates with same length\nB = range(total_dates)\n\n# make all inside lists the same length\nfor sublist in A:\n    while len(sublist) &lt; 3:\n        sublist += [None]\n\n# plot as lineplot\nfor prices in list(zip(*A)):\n    plt.plot(B, A)\n\nplt.show()\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11574438, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0sAVIFRlI1o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3resW_8YFCQPMbcnIg4P-VLN6ujmQw/mo/photo.jpg?sz=128", "display_name": "Joao Felipe Andrade Carrera", "link": "https://stackoverflow.com/users/11574438/joao-felipe-andrade-carrera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1576138045, "creation_date": 1576098669, "last_edit_date": 1576132581, "question_id": 59294141, "link": "https://stackoverflow.com/questions/59294141/multi-line-graph-with-matplotlib", "title": "Multi line graph with matplotlib", "body": "<p>Let's suppose:</p>\n\n<p><code>A=[[1,4,2], [2,3,5],[2,4,5]]...</code>(there are \u03c6 lists in this list)</p>\n\n<p><code>B=[date1, date2, date3,...]</code>(\u03c6 dates)</p>\n\n<p>Basically <code>A[I]</code> corresponds to the date in <code>B[I]</code>, and inside of <code>A</code> there is a list with the prices of <code>product1, product2, product3</code> for that date <code>B[I]</code>.</p>\n\n<p>I would like to make a multi-line graph with the date as the X-axis and price as the Y-axis. So There would be 3 points in each date (price of product1, price of product2, price of product3).</p>\n\n<p>There's an additional problem, in some lists of <code>A</code>, the 'inside' list does not contain 3 products, just 2. Because the other one didnt register</p>\n\n<p>For example:  <code>A= [[1,4,2],[2,7], [2,4,5]]</code></p>\n\n<p>How can I do said multi-line graph?</p>\n"}, {"tags": ["python", "selenium"], "comments": [{"owner": {"reputation": 1533, "user_id": 10569027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dPPb9.jpg?s=128&g=1", "display_name": "GiovaniSalazar", "link": "https://stackoverflow.com/users/10569027/giovanisalazar"}, "edited": false, "score": 0, "creation_date": 1576099667, "post_id": 59294125, "comment_id": 104793266, "body": "is necessary to use selenium ? ..can be BeautifulSoup?"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1576100569, "post_id": 59294125, "comment_id": 104793647, "body": "get all elements and later use index - ie. <code>all_items[2]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "edited": false, "score": 0, "creation_date": 1576101388, "post_id": 59294534, "comment_id": 104793906, "body": "For the <i>all rows</i> case, you may like to replace <code>cells = driver.find_element</code> with <code>cells = driver.find_elements</code>"}, {"owner": {"reputation": 5497, "user_id": 11019743, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R8NmK.png?s=128&g=1", "display_name": "Christine", "link": "https://stackoverflow.com/users/11019743/christine"}, "reply_to_user": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "edited": false, "score": 1, "creation_date": 1576101435, "post_id": 59294534, "comment_id": 104793918, "body": "Correct :) I had missed the extra <code>find_elements</code> while pasting the line from previous sample."}, {"owner": {"reputation": 41, "user_id": 12471379, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NgnU2HlIs24/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re5VCKcjyHZz7dovlXeqFxKrYDAfA/photo.jpg?sz=128", "display_name": "Shin euichul", "link": "https://stackoverflow.com/users/12471379/shin-euichul"}, "edited": false, "score": 0, "creation_date": 1576112224, "post_id": 59294534, "comment_id": 104796749, "body": "I think I make bad explanation. what I need is find text first, than collect numbers (both of two). but there is tons of text. I just screenshot little bit. so I can locate texts by it&#39;s specific ids(lot&#39;s of it). but how can I get numbers that is beside text. this is my question. sorry for bad explanation"}, {"owner": {"reputation": 5497, "user_id": 11019743, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R8NmK.png?s=128&g=1", "display_name": "Christine", "link": "https://stackoverflow.com/users/11019743/christine"}, "reply_to_user": {"reputation": 41, "user_id": 12471379, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NgnU2HlIs24/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re5VCKcjyHZz7dovlXeqFxKrYDAfA/photo.jpg?sz=128", "display_name": "Shin euichul", "link": "https://stackoverflow.com/users/12471379/shin-euichul"}, "edited": false, "score": 0, "creation_date": 1576166066, "post_id": 59294534, "comment_id": 104818967, "body": "@Shineuichul Updated my answer based on the new information."}], "tags": [], "owner": {"reputation": 5497, "user_id": 11019743, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R8NmK.png?s=128&g=1", "display_name": "Christine", "link": "https://stackoverflow.com/users/11019743/christine"}, "is_accepted": true, "score": 3, "last_activity_date": 1576166027, "last_edit_date": 1576166027, "creation_date": 1576100459, "answer_id": 59294534, "question_id": 59294125, "link": "https://stackoverflow.com/questions/59294125/is-there-any-way-to-select-element-through-html-by-selenium-python/59294534#59294534", "title": "Is there any way to select element through HTML, by selenium, python", "body": "<p>You can use an XPath index to accomplish selecting first <code>td</code> element. Given the screenshot, you can select the first <code>td</code> containing <code>2,.167</code> as such:</p>\n\n<pre><code>cell = driver.find_element_by_xpath(\"//tr[td/a[text()='TEXT']]/td[@class='txt-r'][1]\")\nprint(cell.text)\n</code></pre>\n\n<p>You should replace <code>TEXT</code> with the characters you underlined in your screenshot -- I do not have this keyboard so I cannot type the text for you.</p>\n\n<p>The above XPath will query on all table rows, pick the row with your desired text, then query on table cells with class <code>txt-r</code> within a row. Because the two <code>td</code> elements both have class <code>txt-r</code>, you only want to pick one of them, using an index indicated by <code>[1]</code>. The <code>[1]</code> will pick the first <code>td</code>, with text <code>2,167</code>.</p>\n\n<p>Full sample as requested by the user:</p>\n\n<pre><code># first get all text on the page\nall_text_elements = driver.find_elements_by_xpath(\"//a[contains(@class, 'link-resource')]\")\n\n# iterate text elements and print both numbers that are next to text\nfor text_element in all_text_elements:\n\n    # get the text from web element\n    text = text_element.text\n\n    # find the first number next to it (2,167 from sample HTML)\n    first_number = driver.find_element_by_xpath(\"//tr[td/a[text()='\" + text + \"']]/td[@class='txt-r'][1]\")\n    print(first_number.text)\n\n    # find 2nd number (0 from sample HTML)\n    second_number = driver.find_element_by_xpath(\"//tr[td/a[text()='\" + text + \"']]/td[@class='txt-r'][2]\")\n    print(second_number.text)\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 12471379, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NgnU2HlIs24/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re5VCKcjyHZz7dovlXeqFxKrYDAfA/photo.jpg?sz=128", "display_name": "Shin euichul", "link": "https://stackoverflow.com/users/12471379/shin-euichul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 59294534, "answer_count": 1, "score": -4, "last_activity_date": 1616781044, "creation_date": 1576098605, "last_edit_date": 1616781044, "question_id": 59294125, "link": "https://stackoverflow.com/questions/59294125/is-there-any-way-to-select-element-through-html-by-selenium-python", "title": "Is there any way to select element through HTML, by selenium, python", "body": "<p>I am making crawling app through selenium, python and I am stuck. </p>\n\n<p><a href=\"https://i.stack.imgur.com/HrsDS.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>as in picture I can select text(with underline).\nbut what I need is numbers next to text.</p>\n\n<p>but in F12 in chrome</p>\n\n<p><a href=\"https://i.stack.imgur.com/YIIi4.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>numbers(red cricle) has class name, but that class names are all same. \nthere is no indicator that I can use to select numbers through selenium.(as far as I know)</p>\n\n<p>so I tried to find any way to select element through HTML by selenium.\nbut I couldn't find any. Is there any way to do? </p>\n\n<p>If I am looking for something does not exist, I am very sorry. \nI only know python and selenium.. so If I cannot handle this, please let me know. </p>\n\n<p>---edit </p>\n\n<p>I think I make bad explanation. \nwhat I need is find text first, than collect numbers (both of two). \nbut there is tons of text. I just screenshot little bit. \nso I can locate texts by it's specific ids(lot's of it). \nbut how can I get numbers that is nest to text. \nthis is my question. sorry for bad explanation</p>\n\n<p>and if BeautifulSoup can handle this please let me know. Thanks for your help.</p>\n\n<hr>\n\n<p>special thanks to Christine</p>\n\n<p>her code solved my problem. </p>\n"}, {"tags": ["python", "pandas", "loops", "pandas-apply"], "comments": [{"owner": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "edited": false, "score": 0, "creation_date": 1576098581, "post_id": 59294105, "comment_id": 104792823, "body": "What would your expected output look like? It&#39;s not totally clear to me what your final dataframe would look like"}, {"owner": {"reputation": 299, "user_id": 10963057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7c4c3c80e9cefbc212e60addf1e712f?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/10963057/alex"}, "reply_to_user": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "edited": false, "score": 0, "creation_date": 1576098673, "post_id": 59294105, "comment_id": 104792854, "body": "the final dataframe should look like my (slow) code!"}, {"owner": {"reputation": 274, "user_id": 6745154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ce100c66c188fd7e2775b9f53f7ea22?s=128&d=identicon&r=PG&f=1", "display_name": "user6745154", "link": "https://stackoverflow.com/users/6745154/user6745154"}, "edited": false, "score": 0, "creation_date": 1576100286, "post_id": 59294105, "comment_id": 104793514, "body": "The result doesn&#39;t seem to match the logic you described. For instance in row 7 there are 4 values in col2 that are &gt;= 50 but the output is 3. Can you be more specific on the question."}, {"owner": {"reputation": 299, "user_id": 10963057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7c4c3c80e9cefbc212e60addf1e712f?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/10963057/alex"}, "edited": false, "score": 0, "creation_date": 1576101187, "post_id": 59294105, "comment_id": 104793842, "body": "print((df[&quot;col2&quot;].loc[4:6] &gt;=(df[&quot;col1&quot;].loc[7])).sum())   output 3 is correct, because 63,68 and 68 of row 4,5,6 are greater than 50 of row 7. the output sum the trues. yes i described it not correct. thank you"}], "answers": [{"comments": [{"owner": {"reputation": 299, "user_id": 10963057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7c4c3c80e9cefbc212e60addf1e712f?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/10963057/alex"}, "edited": false, "score": 0, "creation_date": 1576168901, "post_id": 59294461, "comment_id": 104820602, "body": "Hi quang hoang i have a variation, maby you have a good idea?! <a href=\"https://stackoverflow.com/questions/59301947/pandas-interate-over-row-and-compare-previous-values-faster/59306822#59306822\" title=\"pandas interate over row and compare previous values faster\">stackoverflow.com/questions/59301947/&hellip;</a>"}], "tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": true, "score": 2, "last_activity_date": 1576100187, "creation_date": 1576100187, "answer_id": 59294461, "question_id": 59294105, "link": "https://stackoverflow.com/questions/59294105/pandas-iterate-over-rows-and-calculate-faster/59294461#59294461", "title": "pandas - iterate over rows and calculate - faster", "body": "<p>IIUC, you can do:</p>\n\n<pre><code>df['overlap_count'] = 0\nfor i in range(1,start_at_nr+1):\n    df['overlap_count'] += df['col1'].le(df['col2'].shift(i))\n\n# mask the first few rows\ndf.iloc[:start_at_nr, -1] = np.nan\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>   col1  col2  overlap_count\n0    20    39            NaN\n1    23    32            NaN\n2    40    42            NaN\n3    41    50            1.0\n4    48    63            1.0\n5    49    68            2.0\n6    50    68            3.0\n7    50    69            3.0\n</code></pre>\n\n<p>Takes about 11ms on for 800 rows and <code>start_at_nr=3</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 22982, "user_id": 10189214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oTTBaX3HSZQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ohHVatc4khqXgYvNrBM40bMFj71Q/mo/photo.jpg?sz=128", "display_name": "Andy L.", "link": "https://stackoverflow.com/users/10189214/andy-l"}, "is_accepted": false, "score": 1, "last_activity_date": 1576101585, "last_edit_date": 1576101585, "creation_date": 1576100688, "answer_id": 59294573, "question_id": 59294105, "link": "https://stackoverflow.com/questions/59294105/pandas-iterate-over-rows-and-calculate-faster/59294573#59294573", "title": "pandas - iterate over rows and calculate - faster", "body": "<p>You basically compare the current value of <code>col1</code> to previous 3 rows of <code>col2</code> and starting the compare from row 3. You may use shift as follow</p>\n\n<pre><code>n = 3\ns = ((pd.concat([df.col2.shift(x) for x in range(1,n+1)], axis=1) &gt;= df.col1.values[:,None])\n        .sum(1)[3:])\n</code></pre>\n\n<p>or</p>\n\n<pre><code>s = (pd.concat([df.col2.shift(x) for x in range(1,n+1)], axis=1).ge(df.col1,axis=0)\n                                                                .sum(1)[3:])\n\n\nOut[65]:\n3    1\n4    1\n5    2\n6    3\n7    3\ndtype: int64\n</code></pre>\n\n<p>To get your desired output, assign it back to <code>df</code> and <code>fillna</code></p>\n\n<pre><code>n = 3\ns = (pd.concat([df.col2.shift(x) for x in range(1,n+1)], axis=1).ge(df.col1,axis=0)\n                                                                .sum(1)[3:])\ndf_final = df.assign(overlap_count=s).fillna('x')\n\nOut[68]:\n   col1  col2 overlap_count\n0    20    39             x\n1    23    32             x\n2    40    42             x\n3    41    50             1\n4    48    63             1\n5    49    68             2\n6    50    68             3\n7    50    69             3\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4746, "user_id": 8474894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3480af9d214a7d6f6a8cb9ef821b1f24?s=128&d=identicon&r=PG&f=1", "display_name": "CypherX", "link": "https://stackoverflow.com/users/8474894/cypherx"}, "edited": false, "score": 0, "creation_date": 1576108327, "post_id": 59295803, "comment_id": 104795966, "body": "@Alex Here&#39;s another way of how you could use <code>.apply()</code> to do it."}], "tags": [], "owner": {"reputation": 4746, "user_id": 8474894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3480af9d214a7d6f6a8cb9ef821b1f24?s=128&d=identicon&r=PG&f=1", "display_name": "CypherX", "link": "https://stackoverflow.com/users/8474894/cypherx"}, "is_accepted": false, "score": 1, "last_activity_date": 1576108653, "last_edit_date": 1576108653, "creation_date": 1576108248, "answer_id": 59295803, "question_id": 59294105, "link": "https://stackoverflow.com/questions/59294105/pandas-iterate-over-rows-and-calculate-faster/59295803#59295803", "title": "pandas - iterate over rows and calculate - faster", "body": "<p>You could do it with <code>.apply()</code> in a single statement as follows. I have used a convenience function <strong><code>process_row()</code></strong>, which is also included below.   </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df.assign(OVERLAP_COUNT = (df.reset_index(drop=False).rename(\n                                columns={'index': 'ID'})).apply(\n                                    lambda x: process_row(x, df, offset=3), axis=1))\n</code></pre>\n\n<blockquote>\n  <p><strong>For More Speed:</strong>\n  In case you need more speed and are processing a lot of rows, you may consider using <code>swifter</code> library. All you have to do is:  </p>\n  \n  <ul>\n  <li>install swifter: <code>pip install swifter</code>.  </li>\n  <li>import the library as <code>import swifter</code>.</li>\n  <li>replace any <code>.apply()</code> with <code>.swifter.apply()</code> in the code-block above.  </li>\n  </ul>\n</blockquote>\n\n<h3>Solution in Detail</h3>\n\n<pre class=\"lang-py prettyprint-override\"><code>#!pip install -U swifter\n#import swifter \nimport numpy as np\nimport pandas as pd\n\nd = {'col1': [20,23,40,41,48,49,50,50], 'col2': [39,32,42,50,63,68,68,69]}\ndf = pd.DataFrame(data=d)\n\ndef process_row(x, df, offset=3):\n    value = (df.loc[x.ID - offset:x.ID - 1, 'col2'] &gt;= df.loc[x.ID, 'col1']).sum() if (x.ID &gt;= offset) else 'x'\n    return value\n\n# Use df.swifter.apply() for faster processing, instead of df.apply()\ndf.assign(OVERLAP_COUNT = (df.reset_index(drop=False, inplace=False).rename(\n                                columns={'index': 'ID'}, inplace=False)).apply(\n                                    lambda x: process_row(x, df, offset=3), axis=1))\n</code></pre>\n\n<p><strong>Output</strong>:  </p>\n\n<pre><code>   col1  col2 OVERLAP_COUNT\n0    20    39             x\n1    23    32             x\n2    40    42             x\n3    41    50             1\n4    48    63             1\n5    49    68             2\n6    50    68             3\n7    50    69             3\n</code></pre>\n"}], "owner": {"reputation": 299, "user_id": 10963057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7c4c3c80e9cefbc212e60addf1e712f?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/10963057/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 59294461, "answer_count": 3, "score": 0, "last_activity_date": 1576108876, "creation_date": 1576098529, "last_edit_date": 1576108876, "question_id": 59294105, "link": "https://stackoverflow.com/questions/59294105/pandas-iterate-over-rows-and-calculate-faster", "title": "pandas - iterate over rows and calculate - faster", "body": "<p>I already have a solution -but it is very slow (13 minutes for 800 rows). here is an example of the dataframe:</p>\n\n<pre><code>import pandas as pd\nd = {'col1': [20,23,40,41,48,49,50,50], 'col2': [39,32,42,50,63,68,68,69]}\ndf = pd.DataFrame(data=d)\ndf\n</code></pre>\n\n<p>In a new column, I want to calculate how many of the previous values (for example three)of col2 are greater or equal than row-value of col1. i also continue the first rows.</p>\n\n<p>this is my slow code:</p>\n\n<pre><code>start_at_nr = 3 #variable in which row start to calculate\ndf[\"overlap_count\"] = \"\" #create new column\n\nfor row in range(len(df)):\n    if row &lt;= start_at_nr - 1:\n       df[\"overlap_count\"].loc[row] = \"x\"\n    else:\n       df[\"overlap_count\"].loc[row] = (\n           df[\"col2\"].loc[row - start_at_nr:row - 1] &gt;=\n           (df[\"col1\"].loc[row])).sum()\n\ndf\n</code></pre>\n\n<p>i obtain a faster solution - thank you for your time!</p>\n\n<p>this is the result i obtain:</p>\n\n<pre><code>col1    col2    overlap_count\n0   20  39  x\n1   23  32  x\n2   40  42  x\n3   41  50  1\n4   48  63  1\n5   49  68  2\n6   50  68  3\n7   50  69  3\n</code></pre>\n"}, {"tags": ["python", "macos", "attributeerror", "voice", "assistant"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1576100066, "post_id": 59294102, "comment_id": 104793418, "body": "always put full error message (starting at word &quot;Traceback&quot;) in question (not comment) as text (not screenshot). There are other useful information."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 1, "creation_date": 1576100100, "post_id": 59294102, "comment_id": 104793435, "body": "I will quess - you forgot char <code>&#39;n&#39;</code> in name <code>&#39;recognize_google&#39;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "is_accepted": false, "score": 0, "last_activity_date": 1576100230, "creation_date": 1576100230, "answer_id": 59294471, "question_id": 59294102, "link": "https://stackoverflow.com/questions/59294102/attributeerror-recognizer-object-has-no-attribute-recogize-google/59294471#59294471", "title": "AttributeError: &#39;Recognizer&#39; object has no attribute &#39;recogize_google&#39;", "body": "<p>You forgot char <code>'n'</code> in name <code>'recognize_google'</code></p>\n\n<pre><code> command = r.recognize_google(audio).lower()\n</code></pre>\n\n<hr>\n\n<p><strong>BTW:</strong> you can see all functions and variables avaliable in <code>r</code> using <code>print( dir(r) )</code> or you can use <code>help(r)</code> to see documentation hidden in source code.</p>\n"}], "owner": {"reputation": 1, "user_id": 12515288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d1c468c3ef94597f10a14a4d1ad501a?s=128&d=identicon&r=PG&f=1", "display_name": "help", "link": "https://stackoverflow.com/users/12515288/help"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 299, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576100230, "creation_date": 1576098520, "last_edit_date": 1576100034, "question_id": 59294102, "link": "https://stackoverflow.com/questions/59294102/attributeerror-recognizer-object-has-no-attribute-recogize-google", "title": "AttributeError: &#39;Recognizer&#39; object has no attribute &#39;recogize_google&#39;", "body": "<p>Every single time I run my program (on Spyder python 3.7) the following error comes:</p>\n\n<pre><code>  command = r.recogize_google(audio).lower()\n\nAttributeError: 'Recognizer' object has no attribute 'recogize_google'\n</code></pre>\n\n<p>Also I am on macOS. </p>\n\n<p>And here is my code:</p>\n\n<pre><code>import speech_recognition as sr\nimport os\nimport re\nimport webbrowser\nimport smtplib\nimport requests\nimport subprocess\nimport wikipedia\nfrom time import strftime \n\ndef sofiaResponse(audio):\n    \"speakes audio passed as argument\"\n    print(audio)\n    for line in audio.splitlines():\n        os.system(\"say\" + audio)\n\ndef myCommand():\n    \"listens for commands\"\n    r = sr.Recognizer()\n    with sr.Microphone() as source:\n        print('Say something...')\n        r.pause_threshold = 1\n        r.adjust_for_ambient_noise(source, duration=1)\n        audio = r.listen(source)\n    try:\n        command = r.recogize_google(audio).lower()\n        print('You said: ' + command + '\\n')\n    except sr.UnknownValueError:\n        print('Speech not understood')\n        command = myCommand();\n    return command\n\ndef assistant(command):\n    \"if statements for exectuting commands\"\n\n    if 'open' in command:\n        reg_ex = re.search('open (.+)', command)\n        if reg_ex:\n            domain = reg_ex.group(1)\n            print(domain)\n            url = 'https://www.' + domain \n            webbrowser.open(url)\n            sofiaResponse('The website has been opened')\n        else:\n            pass\n\n    if 'hello' in command:\n        day_time = int(strftime('%H'))\n        if day_time &lt; 12:\n            sofiaResponse('Good morning')\n        if 12 &lt;= day_time &lt; 18:\n            sofiaResponse('Good afternoon')\n        else:\n            sofiaResponse('Good evening')\n\n    if 'help me' in command:\n        sofiaResponse(\"\"\"\"\n                     You can use these commands and I'll help you out:\n                         1. Open xyz.com : replace xyz with any website name\n                         2. Send email : Follow up questions such as recipient name, content will be asked in order.\n                         3. time : Current system time\n                         4. tell me about xyz : tells you about xyz\n                         5. Joke : tells you a joke\n                         6. launch : will launch any application\n                         \"\"\")\n\n    if 'joke' in command:\n        res = requests.get(\n                'https://icanhazdadjoke.com/',\n                headers = {\"Accept\":\"application/json\"})\n        if res.status_code == requests.code.ok:\n            sofiaResponse(str(res.json()['joke']))\n        else:\n            sofiaResponse('oops! I ran out of jokes')\n\n    if 'email' in command:\n        sofiaResponse('Who is the recipient?')\n        recipient = myCommand()\n\n        if 'Taran' in recipient:\n            sofiaResponse('What should I say?')\n            content = myCommand()\n            mail = smtplib.SMTP('smtp.gmail.com', 587)\n            mail.ehlo()\n            mail.starttls()\n            mail.login(\u2018my_email\u2019, \u2018my_password\u2019)\n            mail.sendmail(\u2018reciever_email\u2019, \u2018my_email\u2019, content)\n            mail.close()\n            sofiaResponse('Email has been sent successfuly. You can check your inbox.')\n        else:\n            sofiaResponse('I don\\'t know what you mean!')\n\n    if 'launch' in command:\n        reg_ex = re.search('launch (.*)', command)\n        if reg_ex:\n            appname = reg_ex.group(1)\n            appname1 = appname+\".app\"\n            subprocess.Popen([\"open\", \"-n\", \"/Applications/\" + appname1], stdout=subprocess.PIPE)\n\n    sofiaResponse('I have launched the application')\n\n    if 'shutdown' in command:\n        sofiaResponse('Alright. Have a nice day')\n\n    if 'tell me about' in command:\n         reg_ex = re.search('tell me about (.*)', command)\n    try:\n            if reg_ex:\n                topic = reg_ex.group(1)\n                ny = wikipedia.page(topic)\n                sofiaResponse(ny.content[:500].encode('utf-8'))\n    except Exception as e:\n                print(e)\n                sofiaResponse(e)\n\nsofiaResponse('Hi I am Sofia, your personal voice assistant, what can I do for you? Or say \"help me\" and I will tell you everything I can do for you.')\n\n#loop to continue executing multiple commands\nwhile True:\n    assistant(myCommand())\n</code></pre>\n"}, {"tags": ["python", "django", "google-api", "google-calendar-api", "google-oauth"], "comments": [{"owner": {"reputation": 54482, "user_id": 8283848, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/YiHgN.jpg?s=128&g=1", "display_name": "JPG", "link": "https://stackoverflow.com/users/8283848/jpg"}, "edited": false, "score": 0, "creation_date": 1576542298, "post_id": 59294054, "comment_id": 104925887, "body": "Are you able to send requests to the end-point directly? (to <code>GoogleAPIWatchView</code> view?)"}], "answers": [{"comments": [{"owner": {"reputation": 10962, "user_id": 214225, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/beaac18d7e70306ddfe931e6a7ae5ccd?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/214225/andrew"}, "edited": false, "score": 0, "creation_date": 1576160878, "post_id": 59300153, "comment_id": 104815734, "body": "Thanks for the reply! I had already completed those steps, the service account has domain-wide delegation and API client access. I&#39;m able to create events and poll users calendars to detect changes using the service account, but I still get the 403 error when receiving the push notifications."}, {"owner": {"reputation": 2097, "user_id": 4739209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yQmVL.jpg?s=128&g=1", "display_name": "yuri", "link": "https://stackoverflow.com/users/4739209/yuri"}, "reply_to_user": {"reputation": 10962, "user_id": 214225, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/beaac18d7e70306ddfe931e6a7ae5ccd?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/214225/andrew"}, "edited": false, "score": 0, "creation_date": 1576161542, "post_id": 59300153, "comment_id": 104816132, "body": "I&#39;ve read it more carefully, there was no need to do the previous, because you are not acting on behalf of any user. My bad.  Regarding the thing, does your domain have SSL certificates?"}, {"owner": {"reputation": 10962, "user_id": 214225, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/beaac18d7e70306ddfe931e6a7ae5ccd?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/214225/andrew"}, "edited": false, "score": 0, "creation_date": 1576161739, "post_id": 59300153, "comment_id": 104816240, "body": "Yes, I have SSL certificates and it&#39;s connecting via HTTPS."}, {"owner": {"reputation": 2097, "user_id": 4739209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yQmVL.jpg?s=128&g=1", "display_name": "yuri", "link": "https://stackoverflow.com/users/4739209/yuri"}, "reply_to_user": {"reputation": 10962, "user_id": 214225, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/beaac18d7e70306ddfe931e6a7ae5ccd?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/214225/andrew"}, "edited": false, "score": 0, "creation_date": 1576161800, "post_id": 59300153, "comment_id": 104816273, "body": "Guess valid ones: not expired and not self signed?"}, {"owner": {"reputation": 10962, "user_id": 214225, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/beaac18d7e70306ddfe931e6a7ae5ccd?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/214225/andrew"}, "edited": false, "score": 0, "creation_date": 1576162012, "post_id": 59300153, "comment_id": 104816412, "body": "I don&#39;t believe they&#39;re self signed, I use cerbot/Let&#39;s Encrypt. I did run a SSL Server Test here: <a href=\"https://www.ssllabs.com/ssltest/analyze.html\" rel=\"nofollow noreferrer\">ssllabs.com/ssltest/analyze.html</a>, and the results were: TLS 1.3\tNo, TLS 1.2\tYes, TLS 1.1\tYes, TLS 1.0\tYes, SSL 3\tNo SSL 2\tNo, - so I guess that may be the problem?"}, {"owner": {"reputation": 2097, "user_id": 4739209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yQmVL.jpg?s=128&g=1", "display_name": "yuri", "link": "https://stackoverflow.com/users/4739209/yuri"}, "reply_to_user": {"reputation": 10962, "user_id": 214225, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/beaac18d7e70306ddfe931e6a7ae5ccd?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/214225/andrew"}, "edited": false, "score": 0, "creation_date": 1576162514, "post_id": 59300153, "comment_id": 104816732, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/204133/discussion-between-yuri-and-andrew\">continue this discussion in chat</a>."}, {"owner": {"reputation": 10962, "user_id": 214225, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/beaac18d7e70306ddfe931e6a7ae5ccd?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/214225/andrew"}, "edited": false, "score": 0, "creation_date": 1576162521, "post_id": 59300153, "comment_id": 104816739, "body": "&quot;The certificate was issued by Let&#39;s Encrypt.&quot;"}], "tags": [], "owner": {"reputation": 2097, "user_id": 4739209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yQmVL.jpg?s=128&g=1", "display_name": "yuri", "link": "https://stackoverflow.com/users/4739209/yuri"}, "is_accepted": false, "score": 1, "last_activity_date": 1576138151, "creation_date": 1576138151, "answer_id": 59300153, "question_id": 59294054, "link": "https://stackoverflow.com/questions/59294054/403-error-when-receiving-google-calendar-api-notification/59300153#59300153", "title": "403 error when receiving Google Calendar API notification", "body": "<p>Your application is trying to access user data using a service account, this is right and it is intended to do it so, but because you did not granted this rights to do it you are receiving 403 server responses. </p>\n\n<p>To be able to run your application using a service account as you are trying the service account has to have the following rights granted:</p>\n\n<p><strong>Domain wide delegation authority:</strong></p>\n\n<p>If the service account does not have delegation authority over the domain the applications using a service account can not access data on behalf of the users of the domain.</p>\n\n<p>To enable it go to <a href=\"https://console.developers.google.com/iam-admin/serviceaccounts\" rel=\"nofollow noreferrer\">here</a>:</p>\n\n<ol>\n<li>Select your project</li>\n<li>Select your service account or create a new one</li>\n<li>Click on 'Edit' to edit parameters of the service account</li>\n<li>Select 'Enable G Suite Domain-Wide Delegation</li>\n</ol>\n\n<p>Your service account now has domain-wide delegation.</p>\n\n<p>Next you'll need to set the scopes of your service account.</p>\n\n<p><strong>Service account scopes:</strong></p>\n\n<p>The administrator of the G Suite domain must follow this steps:</p>\n\n<ol>\n<li>Go to your G Suite domain <a href=\"http://admin.google.com\" rel=\"nofollow noreferrer\">admin console</a>: </li>\n<li>Select Security from the list of controls</li>\n<li>Select Advanced settings from the list of options</li>\n<li>Select Manage API client access in the Authentication section</li>\n<li>In the Client Name field enter the service account's Client ID. You can find your service account's client ID in the Service accounts page</li>\n<li>In the One or More API Scopes field enter the list of scopes that your application should be granted access to. In this case: <a href=\"https://www.googleapis.com/auth/calendar\" rel=\"nofollow noreferrer\">https://www.googleapis.com/auth/calendar</a></li>\n<li>Authorize</li>\n</ol>\n\n<p>Google Documentation on domain-wide authority delegation and creation of service accounts:</p>\n\n<p><a href=\"https://developers.google.com/identity/protocols/OAuth2ServiceAccount\" rel=\"nofollow noreferrer\">https://developers.google.com/identity/protocols/OAuth2ServiceAccount</a></p>\n"}, {"tags": [], "owner": {"reputation": 54482, "user_id": 8283848, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/YiHgN.jpg?s=128&g=1", "display_name": "JPG", "link": "https://stackoverflow.com/users/8283848/jpg"}, "is_accepted": true, "score": 0, "last_activity_date": 1576546129, "creation_date": 1576546129, "answer_id": 59366421, "question_id": 59294054, "link": "https://stackoverflow.com/questions/59294054/403-error-when-receiving-google-calendar-api-notification/59366421#59366421", "title": "403 error when receiving Google Calendar API notification", "body": "<p>It seems like this <strong><em><code>HTTP 403</code></em></strong> raised because of <strong><em>failed verification of CSRF token</em></strong>. So, use <a href=\"https://docs.djangoproject.com/en/3.0/ref/csrf/#django.views.decorators.csrf.csrf_exempt\" rel=\"nofollow noreferrer\"><strong><code>csrf_exempt</code></strong>--Django doc</a> decorator to <strong>skip the verification process</strong></p>\n\n<pre><code>#views.py\n<b>from django.views.decorators.csrf import csrf_exempt\n\n\n@csrf_exempt  # This skips csrf validation.</b>\ndef GoogleAPIWatchView(request):\n    ...\n    # do something useful</code></pre>\n"}, {"comments": [{"owner": {"reputation": 54482, "user_id": 8283848, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/YiHgN.jpg?s=128&g=1", "display_name": "JPG", "link": "https://stackoverflow.com/users/8283848/jpg"}, "edited": false, "score": 0, "creation_date": 1576591803, "post_id": 59371926, "comment_id": 104944334, "body": "personally, I won&#39;t recommend using DRF <b>only for this purpose</b>"}], "tags": [], "owner": {"reputation": 3416, "user_id": 12520350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c3970ebd2aa30e9d059f2e7a4c8143?s=128&d=identicon&r=PG&f=1", "display_name": "Oleg Russkin", "link": "https://stackoverflow.com/users/12520350/oleg-russkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1576591327, "last_edit_date": 1576591327, "creation_date": 1576577564, "answer_id": 59371926, "question_id": 59294054, "link": "https://stackoverflow.com/questions/59294054/403-error-when-receiving-google-calendar-api-notification/59371926#59371926", "title": "403 error when receiving Google Calendar API notification", "body": "<p>As @JPG rightly pointed out, your <strong>api is rejecting non-authorized request</strong> - push notification from Google. And <strong>CSRF</strong> is most probable cause - unsafe operations (POST, PUT, DELETE) require csrf token to be present in request.</p>\n\n<p>Of course, api clients from other domains cannot provide one, as it is mainly designed to protect cross-domain ajax requests from web-pages rather than non-interactive api calls.</p>\n\n<p>As Google API cannot authorize as regular user while accessing view, we need the view to be open to everyone, and to <strong>allow <code>POST</code> requests from everyone</strong> we remove <code>GoogleAPIWatchView</code> from csrf check.</p>\n\n<p><strong>It still requires protection though.</strong></p>\n\n<p>To make sure request was actually made by Google API, wee can check presence / value of some headers Google API adds to requests:</p>\n\n<ul>\n<li><strong>X-Goog-Channel-Id</strong> - <a href=\"https://developers.google.com/calendar/v3/push#understanding-the-notification-message-format\" rel=\"nofollow noreferrer\">Always present in notification messages posted by the Google Calendar API</a></li>\n<li><a href=\"https://developers.google.com/calendar/v3/push#receiving-notifications\" rel=\"nofollow noreferrer\">User Agent contains <strong><code>APIs-Google</code></strong> string</a></li>\n</ul>\n\n<p>Note: all these headers can be spoofed by malicious party.\nFor additional check <a href=\"https://developers.google.com/calendar/v3/push#making-watch-requests\" rel=\"nofollow noreferrer\">you can define custom token while subscribing to watch notifications</a>. The token is included in the <strong>X-Goog-Channel-Token</strong> HTTP header in every notification message that your application receives for this channel.</p>\n\n<pre><code>...\nCHANNEL_TOKEN = \"mysecrettoken\"\nwatch_body = {\n    'id': event['id'],\n    'type': 'web_hook',\n    'address': 'https://example.com/googleapi',\n    'token': CHANNEL_TOKEN\n}\n...\n</code></pre>\n\n<p>And in the view we can perform necessary checks to make sure request is from Google:</p>\n\n<pre><code>from django.http import HttpResponseForbidden\n\n@csrf_exempt  # This skips csrf validation.\ndef GoogleAPIWatchView(request):\n    # Validate request came from Google\n    if not 'APIs-Google' in request.META.get('HTTP_USER_AGENT', ''):\n        return HttpResponseForbidden()\n    if not request.META.get('HTTP_X_GOOG_CHANNEL_ID'):\n        return HttpResponseForbidden()\n    if not request.META.get('HTTP_X_GOOG_CHANNEL_TOKEN') == CHANNEL_TOKEN:\n        return HttpResponseForbidden()\n\n    ...\n</code></pre>\n\n<hr>\n\n<p>In case of <a href=\"https://www.django-rest-framework.org/\" rel=\"nofollow noreferrer\">Django Rest Framework</a>, you also need view available to everyone without authentication. If <code>SessionAuthentication</code> is not present in <code>AUTHENTICATION_CLASSES</code> - we can skip <code>@csrf_extempt</code> decorator as csrf check is <a href=\"https://www.django-rest-framework.org/topics/ajax-csrf-cors/#csrf-protection\" rel=\"nofollow noreferrer\">not performed</a> in that case.</p>\n\n<pre><code>@api_view(['POST'])\ndef google_push_notification(request):\n    authentication_classes = []\n    permission_classes = [AllowAny]  # or empty []\n    # check google headers\n    ...\n</code></pre>\n"}], "owner": {"reputation": 10962, "user_id": 214225, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/beaac18d7e70306ddfe931e6a7ae5ccd?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/214225/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "accepted_answer_id": 59366421, "answer_count": 3, "score": 1, "last_activity_date": 1576591327, "creation_date": 1576098281, "question_id": 59294054, "link": "https://stackoverflow.com/questions/59294054/403-error-when-receiving-google-calendar-api-notification", "title": "403 error when receiving Google Calendar API notification", "body": "<p>I have calendar events being created successfully for various GSuite users, then I'd like to set a watch event. I'm able to do that successfully:</p>\n\n<pre><code>SCOPES = ['https://www.googleapis.com/auth/calendar']\nSERVICE_ACCOUNT_FILE = BASE_DIR + 'path_to_json'\n\ncredentials = service_account.Credentials.from_service_account_file(\n    SERVICE_ACCOUNT_FILE, scopes=SCOPES)\n\ndelegated_user = credentials.with_subject(user)\ndelegated_service = googleapiclient.discovery.build('calendar', 'v3', credentials=delegated_user)\n\n\nevent = {\n        'summary': '%s at %s' % (event_name, event_location),\n        'description': 'description',\n        'location': event_address,\n        'extendedProperties': {\n            \"private\": {\n                'briefType': event_name,\n            }\n        },\n        'start': {\n            'dateTime': event_start_time.astimezone().isoformat(),\n        },\n        'end': {\n            'dateTime': event_end_time.astimezone().isoformat(),\n        }\n\n    }\n\n\nevent = delegated_service.events().insert(calendarId='primary', body=event).execute()\n\nwatch_body = {\n    'id': event['id'],\n    'type': 'web_hook',\n    'address': 'https://example.com/googleapi'\n}\n\nwatch = delegated_service.events().watch(calendarId='primary', body=watch_body).execute()\n</code></pre>\n\n<p>I'm not quite sure how to receive the push notification. I've registered/added my domain (per <a href=\"https://developers.google.com/calendar/v3/push\" rel=\"nofollow noreferrer\">https://developers.google.com/calendar/v3/push</a>), and when I change the event in Google Calendar I'm getting an API Push notification, but I'm receiving a 403 error:</p>\n\n<pre><code>Dec 11 20:58:38 ip-xxx gunicorn[3104]:  - - [11/Dec/2019:20:58:38 +0000] \"POST /googleapi HTTP/1.0\" 403 1889 \"-\" \"APIs-Google; (+https://developers.google.com/webmasters/APIs-Google.html)\"\n</code></pre>\n\n<p>How do I authenticate in the <code>view</code> that process <code>/googleapi</code> to be able to actually receive the API notification from Google?</p>\n\n<p>I've tried the following just to try to debug what I'm receiving from Google, but I get nothing besides the 403 error:</p>\n\n<pre><code>def GoogleAPIWatchView(request):\n\n    SCOPES = ['https://www.googleapis.com/auth/calendar']\n    SERVICE_ACCOUNT_FILE = BASE_DIR + 'path_to_json'\n\n    credentials = service_account.Credentials.from_service_account_file(\n            SERVICE_ACCOUNT_FILE, scopes=SCOPES)\n\n    regex = re.compile('^HTTP_')\n    headers = dict((regex.sub('', header), value) for (header, value) \n           in request.META.items() if header.startswith('HTTP_'))\n\n    print(headers)\n    print(request)\n\n    return JsonResponse('success', status=200, safe=False)\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1576099142, "post_id": 59294048, "comment_id": 104793040, "body": "Welcome to stack overflow! Unfortunately, this question is not detailed enough to give you any meaningful help. Please <a href=\"https://stackoverflow.com/posts/59294048/edit\">edit</a> your question to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for the issue, including sample input, preferred output, and <i>code</i> for what you&#39;ve tried so far. Also, since you have an error, please include the full error traceback in the text of the question"}], "answers": [{"tags": [], "owner": {"reputation": 120, "user_id": 7717825, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154590174147809/picture?type=large", "display_name": "Sam Maule", "link": "https://stackoverflow.com/users/7717825/sam-maule"}, "is_accepted": true, "score": 0, "last_activity_date": 1576102567, "creation_date": 1576102567, "answer_id": 59294944, "question_id": 59294048, "link": "https://stackoverflow.com/questions/59294048/concatenate-append-a-single-string-in-python-pandas/59294944#59294944", "title": "Concatenate/append a single string in Python Pandas", "body": "<p>You can use .iloc to locate the cell and += to append a string onto the end. </p>\n\n<p>For example</p>\n\n<pre><code>df = pd.DataFrame(['a', 'b', 'c'])\ndf.iloc[0][0] += 'b'\n</code></pre>\n\n<p>Adds the letter 'b' to the first 'cell' in the dataframe. </p>\n"}], "owner": {"reputation": 113, "user_id": 12493859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5aef0c8ea1fcf766de7a3322031729?s=128&d=identicon&r=PG&f=1", "display_name": "Lazerhorse", "link": "https://stackoverflow.com/users/12493859/lazerhorse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 59294944, "answer_count": 1, "score": 0, "last_activity_date": 1576102567, "creation_date": 1576098254, "question_id": 59294048, "link": "https://stackoverflow.com/questions/59294048/concatenate-append-a-single-string-in-python-pandas", "title": "Concatenate/append a single string in Python Pandas", "body": "<p>How do I add a single string to one 'cell' on a dataframe in pandas?</p>\n\n<p>I get the following error when I try the append command </p>\n\n<p>\"cannot concatenate object of type ''; only Series and DataFrame objs are valid\"</p>\n"}, {"tags": ["python", "moving-average", "ta-lib"], "answers": [{"comments": [{"owner": {"reputation": 661, "user_id": 5948056, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208535833893814/picture?type=large", "display_name": "programandoconro", "link": "https://stackoverflow.com/users/5948056/programandoconro"}, "edited": false, "score": 0, "creation_date": 1576163265, "post_id": 59294205, "comment_id": 104817169, "body": "Maybe using <code>map</code> instead of the <code>for</code> loop could improve speed ?"}, {"owner": {"reputation": 720, "user_id": 7558835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73408df29ba6f9748367f2ba821ae9ac?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Palacios", "link": "https://stackoverflow.com/users/7558835/diego-palacios"}, "reply_to_user": {"reputation": 661, "user_id": 5948056, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208535833893814/picture?type=large", "display_name": "programandoconro", "link": "https://stackoverflow.com/users/5948056/programandoconro"}, "edited": false, "score": 0, "creation_date": 1576166317, "post_id": 59294205, "comment_id": 104819135, "body": "I don&#39;t see how to use <code>map</code>, because the value of each element to be computed depends on the previous element. If you want speed, you can use <code>numba</code>, I have updated the answer."}, {"owner": {"reputation": 661, "user_id": 5948056, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208535833893814/picture?type=large", "display_name": "programandoconro", "link": "https://stackoverflow.com/users/5948056/programandoconro"}, "edited": false, "score": 0, "creation_date": 1576170735, "post_id": 59294205, "comment_id": 104821470, "body": "Great, I was thinking of some way of applying concurrency  and avoid the <code>for</code> loop. But maybe the <code>loop</code> is inevitable for the calculation as you said."}], "tags": [], "owner": {"reputation": 720, "user_id": 7558835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73408df29ba6f9748367f2ba821ae9ac?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Palacios", "link": "https://stackoverflow.com/users/7558835/diego-palacios"}, "is_accepted": true, "score": 1, "last_activity_date": 1576166381, "last_edit_date": 1576166381, "creation_date": 1576098957, "answer_id": 59294205, "question_id": 59294024, "link": "https://stackoverflow.com/questions/59294024/in-python-what-is-the-faster-way-to-calculate-an-ema-by-reusing-the-previous-ca/59294205#59294205", "title": "In Python, what is the faster way to calculate an EMA by reusing the previous calculations?", "body": "<p>Let <code>x</code> be the vector of length <code>n</code> containing your samples, that is <code>x[0]</code>, ..., <code>x[n-1]</code>. Let <code>y</code> be the vector containing the EMA. Then <code>y</code> is given by the equation:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>y[k] = y[k-1] * a + x[k] * (1-a)\n</code></pre>\n\n<p>Where <code>a</code> is the EMA parameter, which is between 0 and 1. The closer to 1, the smoother the curve.</p>\n\n<p>Therefore, to compute the EMA you just need:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>a = 0.9\ny[0] = x[0]\nfor k in range(1, n):\n    y[k] = y[k-1]*a + x[k]*(1-a)\n</code></pre>\n\n<p>Then if you get another sample, that is <code>x[n]</code>, you can compute the EMA <code>y[n]</code> without doing the full calculation with:</p>\n\n<pre><code>y[n] = y[n-1]*a + x[n]*(1-a)\n</code></pre>\n\n<p>This is pseudocode, so if you use lists, it should be something like this:</p>\n\n<pre><code>y.append(y[-1]*a + x[-1]*(1-a))\n</code></pre>\n\n<p><strong>Edit:</strong></p>\n\n<p>If you really want to improve speed for the computation of the EMA (the whole EMA at a time), you can use <a href=\"http://numba.pydata.org/\" rel=\"nofollow noreferrer\">numba</a> and numpy:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\nfrom numba import njit\nfrom timeit import timeit\n\nn=1000000\nx_np = np.random.randn(n) # your data\nx_list = list(x_np)\na = 0.9\n\ndef ema_list(x, a):\n     y = [x[0]]\n     for k in range(1, n):\n          y.append(y[-1]*a + x[k]*(1-a))\n     return y\n\n\n@njit(\"float64[:](float64[:], float64)\")\ndef ema_np(x, a):\n     y = np.empty_like(x)\n     y[0] = x[0]\n     for k in range(1, n):\n          y[k] = y[k-1]*a + x[k]*(1-a)\n     return y\n\n\nprint(timeit(lambda: ema_list(x_list, a), number=1)) # 0.7080 seconds\nprint(timeit(lambda: ema_np(x_np, a), number=1)) # 0.008015 seconds\n</code></pre>\n\n<p>The list implementation takes about 708 ms whereas the numba and numpy takes 8 ms, that is about 88 times faster. The numpy implementation without numba takes similar time to the list implementation.</p>\n"}, {"tags": [], "owner": {"reputation": 2053, "user_id": 841424, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ad3d6458e6133a1d3d305b4962af3110?s=128&d=identicon&r=PG", "display_name": "truf", "link": "https://stackoverflow.com/users/841424/truf"}, "is_accepted": false, "score": 0, "last_activity_date": 1576162859, "creation_date": 1576162859, "answer_id": 59307395, "question_id": 59294024, "link": "https://stackoverflow.com/questions/59294024/in-python-what-is-the-faster-way-to-calculate-an-ema-by-reusing-the-previous-ca/59307395#59307395", "title": "In Python, what is the faster way to calculate an EMA by reusing the previous calculations?", "body": "<p>There is a fork of <code>TA-Lib</code> named <code>TA-Lib RT</code> that can be used for data that coming in a real time without recalculation of whole dataset.  </p>\n\n<p><a href=\"https://github.com/trufanov-nok/ta-lib-rt\" rel=\"nofollow noreferrer\">https://github.com/trufanov-nok/ta-lib-rt</a>  </p>\n\n<p>It contains additional variants of TA functions that are designed to work in a loops and process single data value per call instead of array. These functions accept <code>state</code> arguments to keep internal state between calls.</p>\n\n<p>Unfortunately it lacks python bindings yet. I'm currently trying to make such binding by forking original TA-Lib python bindings.</p>\n"}], "owner": {"reputation": 7660, "user_id": 695498, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ee7dba0113ba15076c79d0e9043d7718?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/695498/thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 594, "favorite_count": 0, "accepted_answer_id": 59294205, "answer_count": 2, "score": 2, "last_activity_date": 1576166381, "creation_date": 1576098149, "question_id": 59294024, "link": "https://stackoverflow.com/questions/59294024/in-python-what-is-the-faster-way-to-calculate-an-ema-by-reusing-the-previous-ca", "title": "In Python, what is the faster way to calculate an EMA by reusing the previous calculations?", "body": "<p>I have been using TA-Lib to calculate EMAs but each time I add a new number to the array, TA-Lib performs the calculation from scratch again.</p>\n\n<p>I am doing analysis on a rather large set of data (> 1M rows) and this is quite slow.</p>\n\n<p>What would be the fastest way to calculate the new EMA when a new value is added?</p>\n"}, {"tags": ["python", "pandas", "dataframe", "pivot-table"], "comments": [{"owner": {"reputation": 464, "user_id": 8334724, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h6m6i.png?s=128&g=1", "display_name": "Dasphillipbrau", "link": "https://stackoverflow.com/users/8334724/dasphillipbrau"}, "edited": false, "score": 0, "creation_date": 1576099017, "post_id": 59293984, "comment_id": 104792981, "body": "The link does not cover how to sort the pivots at all"}], "answers": [{"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 0, "last_activity_date": 1576098336, "creation_date": 1576098336, "answer_id": 59294060, "question_id": 59293984, "link": "https://stackoverflow.com/questions/59293984/sort-pivot-table-by-groups/59294060#59294060", "title": "Sort pivot table by groups", "body": "<p>Try:</p>\n\n<pre><code>df_out = df.pivot('name','date')['orders']\ndf_out = df_out.assign(sortkey = df_out.sum(axis=1))\\\n               .sort_values('sortkey', ascending=False)\\\n               .drop('sortkey', axis=1)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>date  2017  2018  2019\nname                  \nMary    50    50  1000\nJohn   100   200   300\n</code></pre>\n"}], "owner": {"reputation": 464, "user_id": 8334724, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h6m6i.png?s=128&g=1", "display_name": "Dasphillipbrau", "link": "https://stackoverflow.com/users/8334724/dasphillipbrau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576100219, "creation_date": 1576097989, "last_edit_date": 1576098064, "question_id": 59293984, "link": "https://stackoverflow.com/questions/59293984/sort-pivot-table-by-groups", "title": "Sort pivot table by groups", "body": "<p>I'm struggling with the usage of pivot tables for pandas.</p>\n\n<p>I have a dataframe with 3 columns: Company name, date and number of orders.</p>\n\n<p>I'm trying to pivot the dataframe in such a way that I'd be able to see top 10 biggest customers.</p>\n\n<p>So for example, lets say I have</p>\n\n<pre><code>name | date | orders\nJohn | 2017 | 100\nJohn | 2018 | 200\nJohn | 2019 | 300\nMary | 2017 | 50\nMary | 2018 | 50\nMary | 2019 | 1000\n</code></pre>\n\n<p>I want to pivot this in a way where I'd be able to see it like this</p>\n\n<pre><code>name\ndate  2017 | 2018 | 2019\nJohn  100  | 200  | 300\nMary  50   | 50   | 1000\n</code></pre>\n\n<p>And sorted by total amount of orders, so in this case, Mary should go first because she has 1100 orders in total.</p>\n\n<p>I cannot do the sorting in groups, it's outputting Mary 1000 1st, John 300 2nd and John 200 3rd (to give an example)</p>\n\n<p>Also, maybe a bit unrelated but I also noticed that when pivoting, it's throwing the results in scientfic notation (despite the df displaying the numbers without it) and if I disable SciNot, it's converting the values to floats, any ideas as to why that is?</p>\n"}, {"tags": ["python", "tqdm"], "comments": [{"owner": {"reputation": 1406, "user_id": 6265630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QG6X.jpg?s=128&g=1", "display_name": "Nakor", "link": "https://stackoverflow.com/users/6265630/nakor"}, "reply_to_user": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 0, "creation_date": 1576098778, "post_id": 59293977, "comment_id": 104792885, "body": "I tried to install the same versions of your packages (<code>tqdm</code> and <code>ipython</code>), same error for me."}, {"owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 0, "creation_date": 1576099142, "post_id": 59293977, "comment_id": 104793041, "body": "Then could you provide more information about your installation of Python / environment (virtualenv, conda, ...)?"}, {"owner": {"reputation": 1406, "user_id": 6265630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QG6X.jpg?s=128&g=1", "display_name": "Nakor", "link": "https://stackoverflow.com/users/6265630/nakor"}, "reply_to_user": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 0, "creation_date": 1576099572, "post_id": 59293977, "comment_id": 104793229, "body": "I&#39;m using a virtualenv on a MacOS Mojave. I just tried on a Ubuntu machine with Python 3.7.4, and it worked. So I guess the problem probably comes either from the python version or the OS"}, {"owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 1, "creation_date": 1576099849, "post_id": 59293977, "comment_id": 104793339, "body": "Can you check the <code>PATH</code> and <code>PYTHONPATH</code> environment variables when the error occurs?"}, {"owner": {"reputation": 1406, "user_id": 6265630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QG6X.jpg?s=128&g=1", "display_name": "Nakor", "link": "https://stackoverflow.com/users/6265630/nakor"}, "reply_to_user": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 1, "creation_date": 1576100293, "post_id": 59293977, "comment_id": 104793518, "body": "Hmm, so my PYTHONPATH was empty, and I tried setting my PATH to simply my virtualenv bin directory but it was still not working. Then, I deleted all tqdm related files in my virtualenv, and to reinstall the package with pip, and this time it worked."}], "owner": {"reputation": 1406, "user_id": 6265630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QG6X.jpg?s=128&g=1", "display_name": "Nakor", "link": "https://stackoverflow.com/users/6265630/nakor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 387, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1576100478, "creation_date": 1576097939, "last_edit_date": 1576100478, "question_id": 59293977, "link": "https://stackoverflow.com/questions/59293977/cant-find-object-method-in-interactive-session", "title": "Can&#39;t find object method in interactive session", "body": "<p>I am trying to reuse the same <code>tqdm</code> progress bar for multiple purposes. The tqdm object has a <code>reset()</code> method that clears the bar, so that's what I'm trying to use. \nI made a simple example to try it out:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import time\nfrom tqdm import tqdm\n\ns = tqdm(range(50))\nfor _ in s:\n    time.sleep(.01)\n\ns.reset()\n\nfor _ in s:\n    time.sleep(.05)\n</code></pre>\n\n<p>When I run that in my interactive ipython console, I get the error:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>AttributeError: 'tqdm' object has no attribute 'reset'\n</code></pre>\n\n<p>However, when I put this code in a script and run it from the terminal (i.e. <code>python test.py</code>), this works just fine.\nI'm not sure if this problem is specific to the <code>tqdm</code> package or if it's a more general issue linked to python's way of importing modules/objects. </p>\n\n<p>Any hint would be very helpful!</p>\n\n<p>EDIT:</p>\n\n<ul>\n<li>Python 3.7.3</li>\n<li>IPython 7.6.1</li>\n<li>tqdm==4.40.2</li>\n</ul>\n\n<p>SOLVED:</p>\n\n<p>I had to manually remove all tqdm files inside my virtualenv directory (<code>lib/python3.7/site-packages</code>, <code>bin/</code>) and then reinstall tqdm</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 3773, "user_id": 1838257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540386102f92985c85ced9c6b237dd60?s=128&d=identicon&r=PG", "display_name": "jorijnsmit", "link": "https://stackoverflow.com/users/1838257/jorijnsmit"}, "edited": false, "score": 0, "creation_date": 1576097964, "post_id": 59293923, "comment_id": 104792579, "body": "What have you tried so far? What went well and what didn&#39;t you understand?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12097764"}, "edited": false, "score": 0, "creation_date": 1576098287, "post_id": 59293923, "comment_id": 104792700, "body": "Regex doesn&#39;t have  datatype values. Is that what you&#39;re asking ?"}], "answers": [{"tags": [], "owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "is_accepted": false, "score": 1, "last_activity_date": 1576103651, "last_edit_date": 1576103651, "creation_date": 1576103218, "answer_id": 59295071, "question_id": 59293923, "link": "https://stackoverflow.com/questions/59293923/how-to-differentiate-string-and-alphanumeric/59295071#59295071", "title": "How to differentiate string and Alphanumeric?", "body": "<p>For columns that cannot contain numbers, you can find the <strong>exceptions</strong> with:</p>\n\n<pre><code>In [5]: df['product'].str.contains(r'[0-9]')\nOut[5]: \n0    False\n1     True\n2    False\n3    False\n4     True\n5    False\nName: product, dtype: bool\n</code></pre>\n\n<p>For <em>Alpha-Numeric</em> columns identify <strong>compliance</strong> with:</p>\n\n<pre><code>In [7]: df['Id'].str.contains(r'(?:\\d\\D)|(?:\\D\\d)')\nOut[7]: \n0     True\n1     True\n2     True\n3     True\n4    False\n5    False\nName: Id, dtype: bool\n</code></pre>\n\n<p>For <em>int</em> or <em>float</em> columns find <strong>exceptions</strong> with</p>\n\n<pre><code>In [8]: df['rating'].str.contains(r'[^0-9.+-]')\nOut[8]: \n0    False\n1    False\n2    False\n3     True\n4    False\n5    False\n</code></pre>\n\n<p>That may be problematic, it won't catch things with multiple or misplaced plus,minus, or dot characters, like <code>9.4.1</code> or <code>6+3.-12</code>.  But you could use</p>\n\n<pre><code>In [11]: def check(thing):\n    ...:     try:\n    ...:         return bool(float(thing)) or thing==0\n    ...:     except ValueError:\n    ...:         return False\n    ...:     \n\nIn [12]: df['rating'].apply(check)\nOut[12]: \n0     True\n1     True\n2     True\n3    False\n4     True\n5     True\nName: rating, dtype: bool\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 12033864, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XWUQ6-lgo6Q/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcNfXrzRgbJdc_vPAekU5_icjn4AA/photo.jpg?sz=128", "display_name": "Sam Vamsi", "link": "https://stackoverflow.com/users/12033864/sam-vamsi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1576120047, "creation_date": 1576097694, "last_edit_date": 1576120047, "question_id": 59293923, "link": "https://stackoverflow.com/questions/59293923/how-to-differentiate-string-and-alphanumeric", "title": "How to differentiate string and Alphanumeric?", "body": "<p>df:</p>\n\n<pre><code>  company_name   product    Id     rating\n0   matrix       mobile    Id456     2.5\n1   ins-faq      alpha1    Id956     3.5\n2   metric5      sounds-B  Id-356    2.5\n3   ingsaf       digital   Id856     4star\n4   matrix       win11p    Idklm     2.0\n5   4567         mobile    596       3.5\n</code></pre>\n\n<p>df2:</p>\n\n<pre><code>  Col_name       Datatype\n0 company_name   String        #(pure string)\n1 Product        String        #(pure string)\n2 Id             Alpha-Numeric #(must contain atleast 1 number and 1 alphabet)\n3 rating         Float or int\n</code></pre>\n\n<p>df is the main dataframe and df2 is the expected datatype information of main dataframe.</p>\n\n<p>how to check every column values extract wrong datatype values.</p>\n\n<p>output:</p>\n\n<pre><code>  row_num   col_name      current_value  expected_dtype\n0    2     company_name    metric5         string\n1    5     company_name    4567            string\n2    1     Product         alpha1          string\n3    4     Product         win11p          string\n4    4     Id              Idklm      Alpha-Numeric\n5    5     Id              596        Alpha-Numeric\n6    3    rating           4star      Float or int\n</code></pre>\n"}, {"tags": ["python", "range"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1576097762, "post_id": 59293905, "comment_id": 104792497, "body": "just a nested list comprehension that could be written really way more simply <code>[range(r) for r in range(3)]</code>"}, {"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 0, "creation_date": 1576097884, "post_id": 59293905, "comment_id": 104792553, "body": "this is a <a href=\"https://www.programiz.com/python-programming/list-comprehension\" rel=\"nofollow noreferrer\">list comprehension</a> (the first line). Try to add prints to understand better what&#39;s going on, or use <a href=\"http://www.pythontutor.com/visualize.html#mode=edit\" rel=\"nofollow noreferrer\">this visualizer</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12520850"}, "edited": false, "score": 0, "creation_date": 1576097909, "post_id": 59293905, "comment_id": 104792560, "body": "It&#39;s not a real-world example of code. It&#39;s just an exam question, so I try to get a better understanding of it."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 1, "creation_date": 1576097941, "post_id": 59293905, "comment_id": 104792569, "body": "<code>r</code> is set to 0,1, and 2.  For each <code>r</code> value it makes a list with the length of <code>r</code>, the values of <code>range(r)</code>.  It&#39;s best to test this in an interactive session.  Try <code>[c for c in range(3)]</code>, etc"}], "answers": [{"tags": [], "owner": {"reputation": 1011, "user_id": 3727550, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rTGjg.jpg?s=128&g=1", "display_name": "sjc", "link": "https://stackoverflow.com/users/3727550/sjc"}, "is_accepted": false, "score": 0, "last_activity_date": 1576098001, "creation_date": 1576098001, "answer_id": 59293989, "question_id": 59293905, "link": "https://stackoverflow.com/questions/59293905/python-snippet-with-a-nested-range-function/59293989#59293989", "title": "Python snippet with a nested range() function", "body": "<p>In that nested list comprehension, r begins with a value of 0, so the inside list evaluates to <code>[c for c in range(0)]</code>, which is [].  When r is 1, it evaluates to <code>[c for c in range(1)]</code>, which is [0]. When c is 2, you have <code>[c for c in range(2)]</code>, which is [0,1]. When these are generated within the outer list comprehension, these are returned as list elements of the list. So you have a list of lists in <code>lst</code>.</p>\n\n<p>The for loop then iterates over each of these lists in line 2. Line 3 then iterates over the integer elements within each list.</p>\n"}, {"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 0, "last_activity_date": 1576098019, "creation_date": 1576098019, "answer_id": 59293996, "question_id": 59293905, "link": "https://stackoverflow.com/questions/59293905/python-snippet-with-a-nested-range-function/59293996#59293996", "title": "Python snippet with a nested range() function", "body": "<pre><code>lst = [[c for c in range(r)] for r in range(3)]\n</code></pre>\n\n<p>this is a nested list comprehension.</p>\n\n<p>But here it could be simplified as we don't need a list of lists, just a list of <code>range</code> objects so we can iterate on them. So</p>\n\n<pre><code>lst = [range(r) for r in range(3)]\n</code></pre>\n\n<p>is way simpler.</p>\n\n<p>And while we're at it, why creating a list comprehension at all? Just remove it, and use a classic loop</p>\n\n<pre><code>for r in range(3):\n    for y in range(r):\n        if y &lt; 2:\n            print('*', end='')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3671, "user_id": 2826937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmIdz.png?s=128&g=1", "display_name": "Alexandr Shurigin", "link": "https://stackoverflow.com/users/2826937/alexandr-shurigin"}, "is_accepted": false, "score": 0, "last_activity_date": 1576098070, "creation_date": 1576098070, "answer_id": 59294007, "question_id": 59293905, "link": "https://stackoverflow.com/questions/59293905/python-snippet-with-a-nested-range-function/59294007#59294007", "title": "Python snippet with a nested range() function", "body": "<p>The snippet creates a LIST of LISTS where size (and item's value actually) depends on the index in the first level list.</p>\n\n<p>The snippet is the same as</p>\n\n<pre><code>result = []\nfor k in range(3):\n    result.append([])\n    for v in range(k):\n        result[k].append(v)\n\nprint(result)\n=&gt;&gt;&gt;\n[[], [0], [0, 1]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 720, "user_id": 7558835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73408df29ba6f9748367f2ba821ae9ac?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Palacios", "link": "https://stackoverflow.com/users/7558835/diego-palacios"}, "is_accepted": false, "score": 0, "last_activity_date": 1576098077, "creation_date": 1576098077, "answer_id": 59294009, "question_id": 59293905, "link": "https://stackoverflow.com/questions/59293905/python-snippet-with-a-nested-range-function/59294009#59294009", "title": "Python snippet with a nested range() function", "body": "<p>The first line is equivalent to</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>lst = [list(range(r)) for r in range(3)]\n</code></pre>\n\n<p>It is a list comprehension which generates a list containing list up to <code>r-1</code>. <code>list(range(r))</code> generates <code>[0, 1, 2, ..., r-1]</code>, and because the r variable gets the values 0, 1 and 2 in the list comprehension, it means it will generate a list with the lists [] (r=0), [0], (r=1) and [0, 1] (r=2).</p>\n\n<p>Line 2 iterates over the lists of <code>lst</code>, and line 3 iterates over the values of each list. Therefore, these two lines jointly iterate over all the numbers in <code>lst</code>.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user12520850"}, "edited": false, "score": 0, "creation_date": 1576098172, "post_id": 59294011, "comment_id": 104792655, "body": "Thank you very much! I got it :)"}, {"owner": {"reputation": 6712, "user_id": 1870832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/4zazd.png?s=128&g=1", "display_name": "Max Power", "link": "https://stackoverflow.com/users/1870832/max-power"}, "edited": false, "score": 1, "creation_date": 1576098194, "post_id": 59294011, "comment_id": 104792664, "body": "Awesome! Glad to hear it!"}], "tags": [], "owner": {"reputation": 6712, "user_id": 1870832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/4zazd.png?s=128&g=1", "display_name": "Max Power", "link": "https://stackoverflow.com/users/1870832/max-power"}, "is_accepted": true, "score": 1, "last_activity_date": 1576098285, "last_edit_date": 1576098285, "creation_date": 1576098084, "answer_id": 59294011, "question_id": 59293905, "link": "https://stackoverflow.com/questions/59293905/python-snippet-with-a-nested-range-function/59294011#59294011", "title": "Python snippet with a nested range() function", "body": "<p>Re </p>\n\n<blockquote>\n  <p>\"The first line with the 'lst' is most confusing.\":</p>\n</blockquote>\n\n<p>Wherever you see <code>[ ...for...]</code> you have what's called a \"list comprehension.\" This is a way to build up a list based on a one-line-loop description of the elements. For example:</p>\n\n<pre><code>list1 = [letter for letter in 'abcd'] \n</code></pre>\n\n<p>and</p>\n\n<pre><code>list2 = []\nfor letter in 'abcd':\n    list2.append(letter)\n</code></pre>\n\n<p>yield identical lists <code>list1</code> and <code>list2</code>    </p>\n\n<p>In your case, you have two sets of <code>[]</code> and two <code>for</code> statements, so you have a list comprehension inside a list comprehension: so the result is not just a list but a nested list. </p>\n\n<p>Re </p>\n\n<blockquote>\n  <p>\"and how does line2 and line3 works together?\"</p>\n</blockquote>\n\n<p>Line2 iterates through all the items in your list <code>lst</code>.\nBut each of those items is also a list, because you have a nested list. So line3 iterates through each item in that inner list.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12520850"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 59294011, "answer_count": 5, "score": 2, "last_activity_date": 1576098285, "creation_date": 1576097573, "last_edit_date": 1576097650, "question_id": 59293905, "link": "https://stackoverflow.com/questions/59293905/python-snippet-with-a-nested-range-function", "title": "Python snippet with a nested range() function", "body": "<p>I'm trying to understand the following snippet of python code:</p>\n\n<pre><code>lst = [[c for c in range(r)] for r in range(3)] #line1\nfor x in lst:                                   #line2\n    for y in x:                                 #line3\n        if y &lt; 2:                               #line4\n            print('*', end='')                  #line5\n</code></pre>\n\n<p>I know what the functions like range(3) mean by its own, but I don't get the context. It's a bit complicated to see this nested piece of code. The first line with the 'lst' is most confusing. Why is the first line producing the following output:</p>\n\n<pre><code>[[], [0], [0, 1]]\n</code></pre>\n\n<p>and how does line2 and line3 works together? Thanks in advance for your answer. Every idea is welcome!</p>\n"}, {"tags": ["python", "statsmodels"], "answers": [{"tags": [], "owner": {"reputation": 11558, "user_id": 11897007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IoZiJ.png?s=128&g=1", "display_name": "Celius Stingher", "link": "https://stackoverflow.com/users/11897007/celius-stingher"}, "is_accepted": false, "score": 1, "last_activity_date": 1576097718, "creation_date": 1576097718, "answer_id": 59293932, "question_id": 59293865, "link": "https://stackoverflow.com/questions/59293865/python-statsmodels-what-does-predictx-actually-predict/59293932#59293932", "title": "Python: statsmodels - what does .predict(X) actually predict?", "body": "<p>You are fitting an OLS model from your data, which is most likely interpreted as an array. The <code>predict</code> method will returns an array of fitted values given the trained model.</p>\n\n<p>In other words, from <code>statsmodels</code> <a href=\"https://www.statsmodels.org/dev/generated/generated/statsmodels.regression.linear_model.OLS.predict.html#statsmodels.regression.linear_model.OLS.predict\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n\n<blockquote>\n  <p>Return linear predicted values from a design matrix.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 317, "user_id": 7307684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d020d946ae862bb3f3fb79fc50337189?s=128&d=identicon&r=PG&f=1", "display_name": "cget", "link": "https://stackoverflow.com/users/7307684/cget"}, "edited": false, "score": 0, "creation_date": 1576098510, "post_id": 59294005, "comment_id": 104792791, "body": "I&#39;m missing something fundamental here. I get that you split your dataset 70/30: 70 to train, 30 to test, and then you select the best model. But what&#39;s the point of <code>predictions = model.predict(X)</code>? Can I pass in some random &#39;X&#39; value and it will return a prediction, or is it giving me a separate set of X values to use for training (that are very close to the original X value)?"}, {"owner": {"reputation": 1437, "user_id": 3633891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/stGNM.png?s=128&g=1", "display_name": "Bill Chen", "link": "https://stackoverflow.com/users/3633891/bill-chen"}, "reply_to_user": {"reputation": 317, "user_id": 7307684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d020d946ae862bb3f3fb79fc50337189?s=128&d=identicon&r=PG&f=1", "display_name": "cget", "link": "https://stackoverflow.com/users/7307684/cget"}, "edited": false, "score": 0, "creation_date": 1576100755, "post_id": 59294005, "comment_id": 104793704, "body": "After your training, you pass in the <code>X</code> into the model for retrospective analysis. For example, you want to compare whether the model is underfitting or overfitting, you can use the training data output an error, and compare with the testing error. Hope this helps"}], "tags": [], "owner": {"reputation": 1437, "user_id": 3633891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/stGNM.png?s=128&g=1", "display_name": "Bill Chen", "link": "https://stackoverflow.com/users/3633891/bill-chen"}, "is_accepted": false, "score": 1, "last_activity_date": 1576098053, "creation_date": 1576098053, "answer_id": 59294005, "question_id": 59293865, "link": "https://stackoverflow.com/questions/59293865/python-statsmodels-what-does-predictx-actually-predict/59294005#59294005", "title": "Python: statsmodels - what does .predict(X) actually predict?", "body": "<p>Similar to the <code>sk-learn</code>. After <code>model = sm.OLS(y, X).fit()</code>, you will have a model, then <code>predictions = model.predict(X)</code> is not predict <strong>next</strong> x amount of rows, it will predict from your <code>X</code>, the training dataset. The model using ordinary least squares will be a function of \"x\" and the output should be:</p>\n\n<p>$$ \\hat{y}=f(x) $$</p>\n\n<p>If you want to predict the new <code>X</code>, you need to split <code>X</code> into <code>training</code> and <code>testing</code> dataset.</p>\n"}, {"comments": [{"owner": {"reputation": 317, "user_id": 7307684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d020d946ae862bb3f3fb79fc50337189?s=128&d=identicon&r=PG&f=1", "display_name": "cget", "link": "https://stackoverflow.com/users/7307684/cget"}, "edited": false, "score": 0, "creation_date": 1576099274, "post_id": 59294156, "comment_id": 104793099, "body": "This is what I thought. The predict function surely should be taking  a target/y/independent variable?"}, {"owner": {"reputation": 11, "user_id": 11728147, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1ZmeNKYeQGg/AAAAAAAAAAI/AAAAAAAAAKM/MlZcaSUI4N8/photo.jpg?sz=128", "display_name": "sourabh pathak", "link": "https://stackoverflow.com/users/11728147/sourabh-pathak"}, "reply_to_user": {"reputation": 317, "user_id": 7307684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d020d946ae862bb3f3fb79fc50337189?s=128&d=identicon&r=PG&f=1", "display_name": "cget", "link": "https://stackoverflow.com/users/7307684/cget"}, "edited": false, "score": 0, "creation_date": 1576099423, "post_id": 59294156, "comment_id": 104793167, "body": "No the predict method will take you independent variable as input and will try to give you your dependent variable as output"}, {"owner": {"reputation": 11, "user_id": 11728147, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1ZmeNKYeQGg/AAAAAAAAAAI/AAAAAAAAAKM/MlZcaSUI4N8/photo.jpg?sz=128", "display_name": "sourabh pathak", "link": "https://stackoverflow.com/users/11728147/sourabh-pathak"}, "reply_to_user": {"reputation": 317, "user_id": 7307684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d020d946ae862bb3f3fb79fc50337189?s=128&d=identicon&r=PG&f=1", "display_name": "cget", "link": "https://stackoverflow.com/users/7307684/cget"}, "edited": false, "score": 0, "creation_date": 1576099554, "post_id": 59294156, "comment_id": 104793221, "body": "In simple after training your model with known dependent data you start passing only independent data in your model via predict method to get the dependent variable for which is unknown for that set of dependent variable"}], "tags": [], "owner": {"reputation": 11, "user_id": 11728147, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1ZmeNKYeQGg/AAAAAAAAAAI/AAAAAAAAAKM/MlZcaSUI4N8/photo.jpg?sz=128", "display_name": "sourabh pathak", "link": "https://stackoverflow.com/users/11728147/sourabh-pathak"}, "is_accepted": false, "score": 1, "last_activity_date": 1576098749, "creation_date": 1576098749, "answer_id": 59294156, "question_id": 59293865, "link": "https://stackoverflow.com/questions/59293865/python-statsmodels-what-does-predictx-actually-predict/59294156#59294156", "title": "Python: statsmodels - what does .predict(X) actually predict?", "body": "<p>Actually you are doing it wrong</p>\n\n<p>The predict method is use to predict next values </p>\n\n<p>After separating dependent and I dependent values </p>\n\n<p>You can split the data in two part train and test </p>\n\n<p>From sklearn.model_selection import train_test_split\nX_train,X_test,Y_train,Y_test = train_test_split(X,Y,0.2)</p>\n\n<p>This will make X_train ur 80% of total data with only independent variable </p>\n\n<p>And you can put your y_test in predict method to check how well the model is performing</p>\n"}], "owner": {"reputation": 317, "user_id": 7307684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d020d946ae862bb3f3fb79fc50337189?s=128&d=identicon&r=PG&f=1", "display_name": "cget", "link": "https://stackoverflow.com/users/7307684/cget"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1576098749, "creation_date": 1576097428, "question_id": 59293865, "link": "https://stackoverflow.com/questions/59293865/python-statsmodels-what-does-predictx-actually-predict", "title": "Python: statsmodels - what does .predict(X) actually predict?", "body": "<p>I'm a bit confused as to what the line <code>model.predict(X)</code> actually predicts. I can't find anything on it with a Google search. </p>\n\n<pre><code>import statsmodels.api as sm\n\n# Step 1) Load data into dataframe \ndf = pd.read_csv('my_data.csv')\n\n# Step 2) Separate dependent and independent variables \n\nX = df['independent_variable']\ny = df[\"dependent_variable\"]\n\n# Step 3) using OLS -fit a linear regression\nmodel = sm.OLS(y, X).fit()\npredictions = model.predict(X) # make predictions\npredictions\n</code></pre>\n\n<p>I'm not sure what <code>predictions</code> is showing? Is it predicting the next <em>x</em> amount of rows or something? Aren't I just passing in my independent variables?</p>\n"}, {"tags": ["python", "list", "dictionary"], "comments": [{"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 2, "creation_date": 1576097769, "post_id": 59293840, "comment_id": 104792502, "body": "both your &quot;lists&quot; have only 1 element which is a dictionary with sequential integer keys starting from 0 (so they are indexed very similarly to a list) is this intended? You have very clear logic outlined, I assume you have code that doesn&#39;t work the way you want? could you share what you have so far and explain where it is going wrong?"}, {"owner": {"reputation": 717, "user_id": 11666502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f056cec5dda28937249f50f207ed8c15?s=128&d=identicon&r=PG&f=1", "display_name": "connor449", "link": "https://stackoverflow.com/users/11666502/connor449"}, "reply_to_user": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1576104124, "post_id": 59293840, "comment_id": 104794793, "body": "Thanks for your feedback. I see how each is a 1 element list. For simplicity, I can convert to list of dictionaries by removing the sequential integer keys if you would be more efficient. In terms of code, I&#39;m unsure where to start."}], "answers": [{"tags": [], "owner": {"reputation": 3457, "user_id": 2284490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba571b7d2f77a33c9b92af6c767677bb?s=128&d=identicon&r=PG", "display_name": "Cireo", "link": "https://stackoverflow.com/users/2284490/cireo"}, "is_accepted": true, "score": 1, "last_activity_date": 1576107178, "last_edit_date": 1576107178, "creation_date": 1576106415, "answer_id": 59295571, "question_id": 59293840, "link": "https://stackoverflow.com/questions/59293840/looping-through-multiple-dictionaries-to-create-new-dictionary-from-values-in-py/59295571#59295571", "title": "Looping through multiple dictionaries to create new dictionary from values in python", "body": "<p>Your original algorithm says \"the NEXT\" one, are you sure it is what you want?  I tried to implement what you said, but it isn't clear what should happen when a phrase overlaps more than 2 speakers.</p>\n\n<p>A few design notes:</p>\n\n<ul>\n<li>your data would make more sense if the boundaries were <code>[a, b)</code> instead of <code>[a, b]</code> - where should 3.65 go?</li>\n<li>it might be more re-usable to storing the values as a list (or determining the order of injection by start time) instead of flattening them to a string with spaces here.  You can always flatten them afterwards</li>\n</ul>\n\n<pre><code>START, END = 's1', 's2'\n\ndef require_speaker(start, end):\n    ''' Return the latest speaker in start &lt;= time &lt;= end '''\n    # This should be an interval tree if your data is large\n    # https://en.wikipedia.org/wiki/Interval_tree\n\n    # Exactly one of the first 3 is true, so we could use an `else`,\n    # listing all for clarity.\n    after = lambda v: v[END] &lt; start\n    overlaps = lambda v: start &lt;= v[END] and v[START] &lt;= end\n    before = lambda v: end &lt; v[START]\n    contained = lambda v: v[START] &lt;= start and end &lt;= v[END]\n\n    take_next = False\n    for speaker in list_2:\n        if take_next:\n            return speaker\n        if after(speaker):\n            continue\n        elif contained(speaker):\n            return speaker\n        elif overlaps(speaker):\n            take_next = True\n        elif after(speaker):\n            break  # Missed it somehow (can't happen if full coverage)\n    raise LookupError('no speaker in range %s - %s' % (start, end))\n\n# Prepare a list for phrases\nfor speakers in list_2:\n    speakers['words'] = []\n# Populate phrases for each speaker\nfor phrase in list_1:\n    speaker = require_speaker(phrase[START], phrase[END])\n    speaker['words'].append(phrase['word'])\n# Convert back to string\nfor speakers in list_2:\n    speakers['words'] = ' '.join(speakers['words'])\n</code></pre>\n\n<p>With your data</p>\n\n<pre><code>list_1 = [\n      {'word': 'hey hows it going?', 's1': 1.2, 's2': 3.6},\n      {'word': 'um', 's1': 3.7, 's2': 4.2},\n      {'word': 'its raining outside today', 's1': 4.3, 's2': 5.0},\n      {'word': 'and its really cold', 's1': 5.1, 's2': 6.6},\n      {'word': 'dont you think?', 's1': 6.7, 's2': 8.1},\n      {'word': 'its awful', 's1': 7.7, 's2': 9.0}\n    ]\n\nlist_2 = [\n  {'category': 0, 's1': 0.0, 's2': 3.8},\n  {'category': 1, 's1': 3.9, 's2': 4.9},\n  {'category': 1, 's1': 5.0, 's2': 7.2},\n  {'category': 0, 's1': 7.3, 's2': 7.6},\n  {'category': 1, 's1': 7.7, 's2': 9.0}\n]\n</code></pre>\n\n<p>You get</p>\n\n<pre><code>&gt;&gt;&gt; import pprint\n&gt;&gt;&gt; pprint.pprint(list_2)\n[{'category': 0, 's1': 0.0, 's2': 3.8, 'words': 'hey hows it going?'},\n {'category': 1, 's1': 3.9, 's2': 4.9, 'words': 'um'},\n {'category': 1,\n  's1': 5.0,\n  's2': 7.2,\n  'words': 'its raining outside today and its really cold'},\n {'category': 0, 's1': 7.3, 's2': 7.6, 'words': 'dont you think?'},\n {'category': 1, 's1': 7.7, 's2': 9.0, 'words': 'its awful'}]\n</code></pre>\n\n<p>Note that your expected output doesn't match your algorithm:</p>\n\n<ul>\n<li>\"um\" (3.7-4.2) should be placed in the 3.9-4.9 range</li>\n<li>\"its raining outside today\" (4.3-5.0) should be placed in the 5.0-7.2 range</li>\n<li>\"dont you think\" (6.7-8.1) should be placed in the 7.7-9.0 range</li>\n</ul>\n"}], "owner": {"reputation": 717, "user_id": 11666502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f056cec5dda28937249f50f207ed8c15?s=128&d=identicon&r=PG&f=1", "display_name": "connor449", "link": "https://stackoverflow.com/users/11666502/connor449"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 1, "accepted_answer_id": 59295571, "answer_count": 1, "score": 0, "last_activity_date": 1576107687, "creation_date": 1576097305, "last_edit_date": 1576107687, "question_id": 59293840, "link": "https://stackoverflow.com/questions/59293840/looping-through-multiple-dictionaries-to-create-new-dictionary-from-values-in-py", "title": "Looping through multiple dictionaries to create new dictionary from values in python", "body": "<p>I have two lists of dictionaries. Both contain an item of data as well as a start and stop timestamp. The first list contains dictionaries representing observations of sequences of text with a start and stop time. It looks like this:</p>\n\n<pre><code>list_1 = [\n      {'word': 'hey hows it going?', 's1': 1.2, 's2': 3.6},\n      {'word': 'um', 's1': 3.7, 's2': 4.2},\n      {'word': 'its raining outside today', 's1': 4.3, 's2': 5.0},\n      {'word': 'and its really cold', 's1': 5.1, 's2': 6.6},\n      {'word': 'dont you think?', 's1': 6.7, 's2': 8.1},\n      {'word': 'its awful', 's1': 7.7, 's2': 9.0}\n    ]\n</code></pre>\n\n<p>The second list contains dictionaries representing observations of categories with a start and stop time. It looks like this:</p>\n\n<pre><code>list_2 = [\n  {'category': 0, 's1': 0.0, 's2': 3.8},\n  {'category': 1, 's1': 3.9, 's2': 4.9},\n  {'category': 1, 's1': 5.0, 's2': 7.2},\n  {'category': 0, 's1': 7.3, 's2': 7.6},\n  {'category': 1, 's1': 7.7, 's2': 9.0}\n]\n</code></pre>\n\n<p>I want to create a new item in the dictionaries for <code>list_2</code> using <code>list_1['word']</code> values according to the following logic:</p>\n\n<ul>\n<li><p>If a value from <code>list_1['s1']</code> is greater than a value from <code>list_2['s1']</code> AND less than a value from <code>list_2['s2']</code>, append all values from <code>list_1['word']</code> into the new item, <code>list_2['word']</code>.</p></li>\n<li><p>If a value from <code>list_1['s1']</code> is greater than a value from <code>list_2['s1']</code> AND less than a value from <code>list_2['s2']</code>, BUT <code>list_1['s2']</code> is greater than a value from <code>list_2['s1']</code>, append all values from <code>list_1['word']</code> into the new item, <code>list_2['word']</code> for the NEXT dictionary.</p></li>\n</ul>\n\n<p>Another way to think about it is as you're looping through list_1 and list_2:</p>\n\n<ul>\n<li><p>if the timestamps from <code>list_1</code> items fall within the timestamps for a <code>list_2</code> item, add the <code>list_1</code> words to a new key value pair in <code>list_2</code>.</p></li>\n<li><p>if timestamps from <code>list_1</code> items do not fall within the timestamps for a <code>list_2</code> item, for example the words 'start' in <code>list_2[0]</code> but 'end' in <code>list_2[1]</code> then add the <code>list_1['words']</code> from <code>list_1[0]</code> to <code>list_2[1]</code>.</p></li>\n</ul>\n\n<p>It should look this this:</p>\n\n<pre><code>expected_output =[\n   {'category': 0,\n      's1': 0.0,\n      's2': 3.8,\n      'words': 'hey hows it going? um'},\n   {'category': 1,\n      's1': 3.9,\n      's2': 4.9,\n      'words': 'its raining outside today'},\n   {'category': 1,\n      's1': 5.0,\n     's2': 7.2,\n     'words': 'and its really cold'},\n   {'category': 0,\n      's1': 7.3,\n      's2': 9.0,\n      'words': 'dont you think? its awful'}\n  ]\n</code></pre>\n"}, {"tags": ["python", "memory", "concurrency", "multiprocessing"], "comments": [{"owner": {"reputation": 50179, "user_id": 594589, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0f9d5953607841d6a50b843a1107e51e?s=128&d=identicon&r=PG", "display_name": "dm03514", "link": "https://stackoverflow.com/users/594589/dm03514"}, "edited": false, "score": 1, "creation_date": 1576528408, "post_id": 59293828, "comment_id": 104921591, "body": "<a href=\"https://docs.python.org/3/library/multiprocessing.shared_memory.html\" rel=\"nofollow noreferrer\">docs.python.org/3/library/multiprocessing.shared_memory.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 50179, "user_id": 594589, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0f9d5953607841d6a50b843a1107e51e?s=128&d=identicon&r=PG", "display_name": "dm03514", "link": "https://stackoverflow.com/users/594589/dm03514"}, "is_accepted": true, "score": 1, "last_activity_date": 1576528668, "creation_date": 1576528668, "answer_id": 59363977, "question_id": 59293828, "link": "https://stackoverflow.com/questions/59293828/why-does-pythons-multiprocessing-module-only-support-two-data-types/59363977#59363977", "title": "Why does Python&#39;s multiprocessing module only support two data types?", "body": "<p>I'm not remotely an expert on this, so def not a complete answer.  There are a couple of things I think this considers:</p>\n\n<ul>\n<li>Processes have their own memory space, so if we share \"normal\" variables between  processes and try to write each process will have its own copy (perhaps using copy on write semantics).</li>\n<li>Shared memory needs some sort of abstraction or primitive as it exists outside of process memory (<a href=\"https://docs.python.org/3/library/multiprocessing.shared_memory.html\" rel=\"nofollow noreferrer\">SOURCE</a>)</li>\n<li><code>Value</code> and <code>Array</code>, by default, are thread/process safe for concurrent use by guarding access with locks, handling allocations to shared memory AND protecting it :)</li>\n</ul>\n\n<p>The attached documentation is able to answer, <strong>yes</strong> to:</p>\n\n<p><em>is shared memory treated differently than memory that is typically allocated to a process?</em></p>\n\n<hr>\n"}], "owner": {"reputation": 165, "user_id": 2062369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea88504626f9208644cee973ac215666?s=128&d=identicon&r=PG", "display_name": "SWV", "link": "https://stackoverflow.com/users/2062369/swv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 59363977, "answer_count": 1, "score": 2, "last_activity_date": 1576528668, "creation_date": 1576097258, "last_edit_date": 1576528268, "question_id": 59293828, "link": "https://stackoverflow.com/questions/59293828/why-does-pythons-multiprocessing-module-only-support-two-data-types", "title": "Why does Python&#39;s multiprocessing module only support two data types?", "body": "<p>According to Python's <a href=\"https://docs.python.org/3.4/library/multiprocessing.html?highlight=process\" rel=\"nofollow noreferrer\">multiprocessing documentation</a>:</p>\n\n<blockquote>\n  <p>Data can be stored in a shared memory map using Value or Array.</p>\n</blockquote>\n\n<p>Is shared memory treated differently than memory that is typically allocated to a process? Why does Python only support two data structures?</p>\n\n<p>I'm guessing it has to do with garbage collection and is perhaps along the same reasons GIL exists. If this is the case, how/why are <a href=\"https://docs.python.org/3.4/library/multiprocessing.html?highlight=process#multiprocessing.Value\" rel=\"nofollow noreferrer\">Value</a> and <a href=\"https://docs.python.org/3.4/library/multiprocessing.html?highlight=process#multiprocessing.Array\" rel=\"nofollow noreferrer\">Array</a> implemented to be an exception to this?</p>\n"}, {"tags": ["python", "image", "rgb"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 2, "creation_date": 1576097235, "post_id": 59293800, "comment_id": 104792263, "body": "Can you explain what &quot;invert the Green channel&quot; means?"}, {"owner": {"reputation": 101, "user_id": 11021508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blP7j.png?s=128&g=1", "display_name": "NoobCat", "link": "https://stackoverflow.com/users/11021508/noobcat"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1576097629, "post_id": 59293800, "comment_id": 104792432, "body": "I added a little detail to the question"}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 1, "creation_date": 1576097755, "post_id": 59293800, "comment_id": 104792492, "body": "The new detail doesn&#39;t even try to explain what &quot;invert the Green channel&quot; means."}, {"owner": {"reputation": 101, "user_id": 11021508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blP7j.png?s=128&g=1", "display_name": "NoobCat", "link": "https://stackoverflow.com/users/11021508/noobcat"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1576098044, "post_id": 59293800, "comment_id": 104792611, "body": "I regret not being able to explain, since I don&#39;t have the appropriate skills to go into detail, this is a classic terminology in a 3D environment, I don&#39;t know the exact procedure of this, but I need an answer from those who probably know this terminology. Basically instead of inverting the colors of the whole image, I would like to invert only the green channel, I think this is the detail that is missing"}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 11021508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blP7j.png?s=128&g=1", "display_name": "NoobCat", "link": "https://stackoverflow.com/users/11021508/noobcat"}, "edited": false, "score": 0, "creation_date": 1576097534, "post_id": 59293821, "comment_id": 104792402, "body": "I added a detail to the question, which I had not specified, I apologize, the images in question are Normal maps for 3D graphic engines"}], "tags": [], "owner": {"reputation": 6356, "user_id": 5030164, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/11b6c08b9d6554e51280244985e3022d?s=128&d=identicon&r=PG&f=1", "display_name": "modesitt", "link": "https://stackoverflow.com/users/5030164/modesitt"}, "is_accepted": false, "score": 1, "last_activity_date": 1602412817, "last_edit_date": 1602412817, "creation_date": 1576097219, "answer_id": 59293821, "question_id": 59293800, "link": "https://stackoverflow.com/questions/59293800/how-to-invert-the-green-channel-of-an-image-in-python/59293821#59293821", "title": "How to invert the green channel of an image in Python?", "body": "<p>I assume you have a numpy (or torch tensor) image - you can index on the green channel (assuming channels are your last dimension)</p>\n<pre><code>img[:, :, 1] = 255 - img[:, :, 1]\n</code></pre>\n<p>I am assuming by invert you want <code>0 -&gt; 255</code> and <code>255 -&gt; 0</code></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11759026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40bc6db55cb1904b975c6ea237cf8441?s=128&d=identicon&r=PG&f=1", "display_name": "Fahim Aslam", "link": "https://stackoverflow.com/users/11759026/fahim-aslam"}, "is_accepted": false, "score": -1, "last_activity_date": 1618015691, "last_edit_date": 1618015691, "creation_date": 1617975792, "answer_id": 67022258, "question_id": 59293800, "link": "https://stackoverflow.com/questions/59293800/how-to-invert-the-green-channel-of-an-image-in-python/67022258#67022258", "title": "How to invert the green channel of an image in Python?", "body": "<pre><code>T(r) = L \u2013 1 \u2013 r\n\nL=256\n\nL-1=255(Max)\n\nr=Each pixel of the image\n\ns=255-r\n\ns= T(r) =255-r\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 101, "user_id": 11021508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blP7j.png?s=128&g=1", "display_name": "NoobCat", "link": "https://stackoverflow.com/users/11021508/noobcat"}, "edited": false, "score": 0, "creation_date": 1619269362, "post_id": 67238734, "comment_id": 118856723, "body": "I think that to check how many channels the image has it is possible to check the depth bits? That is usually 24bit are 3 channels, 32 are 4 channels (RGBA). I don&#39;t know much about GDP, but I think it can be controlled. In any case, I really appreciate this answer."}, {"owner": {"reputation": 1441, "user_id": 12975140, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7HxBs.jpg?s=128&g=1", "display_name": "CrazyChucky", "link": "https://stackoverflow.com/users/12975140/crazychucky"}, "reply_to_user": {"reputation": 101, "user_id": 11021508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blP7j.png?s=128&g=1", "display_name": "NoobCat", "link": "https://stackoverflow.com/users/11021508/noobcat"}, "edited": false, "score": 0, "creation_date": 1619274781, "post_id": 67238734, "comment_id": 118858143, "body": "@NoobCat You can always check programmatically how many channels the image has, but it&#39;s not going to vary from image to image as long as you know what format you&#39;re saving your maps as. (I&#39;m not familiar with GDP, other than gross domestic product.)"}], "tags": [], "owner": {"reputation": 1441, "user_id": 12975140, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7HxBs.jpg?s=128&g=1", "display_name": "CrazyChucky", "link": "https://stackoverflow.com/users/12975140/crazychucky"}, "is_accepted": true, "score": 1, "last_activity_date": 1619282727, "last_edit_date": 1619282727, "creation_date": 1619230344, "answer_id": 67238734, "question_id": 59293800, "link": "https://stackoverflow.com/questions/59293800/how-to-invert-the-green-channel-of-an-image-in-python/67238734#67238734", "title": "How to invert the green channel of an image in Python?", "body": "<p>You can accomplish this by installing and using <a href=\"https://pillow.readthedocs.io/en/stable/index.html\" rel=\"nofollow noreferrer\">Pillow</a>, which can work with most image formats (JPEG, PNG, TIFF, etc.).</p>\n<pre class=\"lang-py prettyprint-override\"><code>from PIL import Image\nfrom PIL.ImageChops import invert\n\nimage = Image.open('test.tif')\nred, green, blue = image.split()\nimage_with_inverted_green = Image.merge('RGB', (red, invert(green), blue))\nimage_with_inverted_green.save('test_inverted_green.tif')\n</code></pre>\n<p>After loading the image from your file, split into its channels with <a href=\"https://pillow.readthedocs.io/en/stable/reference/Image.html#PIL.Image.Image.split\" rel=\"nofollow noreferrer\"><code>Image.split</code></a>, invert the green channel/image with <a href=\"https://pillow.readthedocs.io/en/stable/reference/ImageChops.html#PIL.ImageChops.invert\" rel=\"nofollow noreferrer\"><code>ImageChops.invert</code></a>, and then join it together with the original red and blue bands into a new image with <a href=\"https://pillow.readthedocs.io/en/stable/reference/Image.html#PIL.Image.merge\" rel=\"nofollow noreferrer\"><code>Image.merge</code></a>.</p>\n<p>If using a format that's encoded in something other than RGB (such as PNG, which has an additional transparency channel), the image-opening line can be amended to:</p>\n<pre class=\"lang-py prettyprint-override\"><code>image = Image.open('test.png').convert('RGB')\n</code></pre>\n<p>Testing with this image:</p>\n<p><a href=\"https://i.stack.imgur.com/NeTir.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NeTir.png\" alt=\"test.tif\" /></a></p>\n<p>Produces this:</p>\n<p><a href=\"https://i.stack.imgur.com/Osunl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Osunl.png\" alt=\"test_with_inverted_green.tif\" /></a></p>\n<p>(<code>ImageChops</code>, by the way, looks like a very odd term, but it's short for &quot;image channel operations&quot;.)</p>\n"}], "owner": {"reputation": 101, "user_id": 11021508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blP7j.png?s=128&g=1", "display_name": "NoobCat", "link": "https://stackoverflow.com/users/11021508/noobcat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 392, "favorite_count": 0, "accepted_answer_id": 67238734, "answer_count": 3, "score": -1, "last_activity_date": 1619282727, "creation_date": 1576097111, "last_edit_date": 1619282575, "question_id": 59293800, "link": "https://stackoverflow.com/questions/59293800/how-to-invert-the-green-channel-of-an-image-in-python", "title": "How to invert the green channel of an image in Python?", "body": "<p>How do I invert one channel of an RGB image? In this case my image is a normal map for a 3D engine, saved in an image format like JPEG or TIFF, and I want to invert the green channel \u2014 that is, completely reverse the highs and lows in the green band.</p>\n"}, {"tags": ["python", "r", "regex", "string", "replace"], "comments": [{"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1576096971, "post_id": 59293688, "comment_id": 104792168, "body": "What regex engine do you plan to use with the regex?"}, {"owner": {"reputation": 18705, "user_id": 6461462, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BlsdV.jpg?s=128&g=1", "display_name": "M--", "link": "https://stackoverflow.com/users/6461462/m"}, "reply_to_user": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1576097463, "post_id": 59293688, "comment_id": 104792373, "body": "@WiktorStribi\u017cew <code>r</code> is the preferred one. <code>Python</code> or <code>PHP</code> work as well."}, {"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1576097464, "post_id": 59293688, "comment_id": 104792374, "body": "You can only do that with a regex that supports infinite width lookbehind, so your only option is Python PyPi regex module then. Use it with <code>(.)(?&lt;=^(?:(?:(?!\\1).)*\\1){2,}(?:(?!\\1).)*\\1)</code> regex. <a href=\"http://regexstorm.net/tester?p=%28.%29%28%3f%3c%3d%5e%28%3f%3a%28%3f%3a%28%3f!%5c1%29.%29%2A%5c1%29%7b2%2c%7d%28%3f%3a%28%3f!%5c1%29.%29%2A%5c1%29&amp;i=111aabbccxccybbzaa1&amp;r=-\" rel=\"nofollow noreferrer\">Demo</a>."}, {"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1576097854, "post_id": 59293688, "comment_id": 104792543, "body": "See <a href=\"https://rextester.com/ANLC41094\" rel=\"nofollow noreferrer\">rextester.com/ANLC41094</a>, install PyPi regex using <code>pip install regex</code>."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "reply_to_user": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 3, "creation_date": 1576098185, "post_id": 59293688, "comment_id": 104792661, "body": "@WiktorStribi\u017cew Is that better than <code>(.)(?&lt;=(.*\\1){3})</code>?"}, {"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 2, "creation_date": 1576098459, "post_id": 59293688, "comment_id": 104792766, "body": "@StefanPochmann Well, <code>(.)(?&lt;=(?:.*\\1){3})</code> will do the job, too, but all these are not good since excessive backtracking may cause issues with longer strings. I&#39;d rather write a non-regex method to solve the problem."}, {"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 1, "creation_date": 1576099178, "post_id": 59293688, "comment_id": 104793054, "body": "@StefanPochmann If by &quot;better&quot; you meant  peformance, my regex will perform faster if the matches are close to the start of string and there are a lot of no matches at the end of the string and your variant will perform better if there are matches close to the end of the string, and the length of the string is considerable. My regex has &quot;linear&quot; logic, matching subpattern sequences that are mutually exclusive, and in the <code>(.*\\1)</code> pattern, <code>.</code> can match what <code>\\1</code> matches, which adds to the overall complexity."}, {"owner": {"reputation": 11918, "user_id": 5527985, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CfG3C.png?s=128&g=1", "display_name": "bobble bubble", "link": "https://stackoverflow.com/users/5527985/bobble-bubble"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 1, "creation_date": 1576099490, "post_id": 59293688, "comment_id": 104793191, "body": "@StefanPochmann Yours can probably be improved to <code>(.)(?&lt;=(?:\\1.*?){2}\\1)</code>"}, {"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 11918, "user_id": 5527985, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CfG3C.png?s=128&g=1", "display_name": "bobble bubble", "link": "https://stackoverflow.com/users/5527985/bobble-bubble"}, "edited": false, "score": 1, "creation_date": 1576099590, "post_id": 59293688, "comment_id": 104793235, "body": "@bobblebubble Lazy and greedy <code>.</code> in real life are the same as far as performance is concerned unless you are sure where matches will occur (closer to the end or start of the string), but we usually are not."}, {"owner": {"reputation": 11918, "user_id": 5527985, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CfG3C.png?s=128&g=1", "display_name": "bobble bubble", "link": "https://stackoverflow.com/users/5527985/bobble-bubble"}, "reply_to_user": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 2, "creation_date": 1576100063, "post_id": 59293688, "comment_id": 104793417, "body": "@WiktorStribi\u017cew If I copy the teststring into regexstorm several times, making it a huge string, I get performance difference eg your pattern 750ms, <code>(.)(?&lt;=(?:.*\\1){3})</code> 25ms, <code>(.)(?&lt;=(?:\\1.*?){2}\\1)</code> 3ms. You can just test yourself. Yours seem to be the least efficient pattern and it&#39;s hardest to read."}, {"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 11918, "user_id": 5527985, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CfG3C.png?s=128&g=1", "display_name": "bobble bubble", "link": "https://stackoverflow.com/users/5527985/bobble-bubble"}, "edited": false, "score": 1, "creation_date": 1576100264, "post_id": 59293688, "comment_id": 104793505, "body": "@bobblebubble My regex was work in progress. You both took it from there. Next, copying the same string is a wrong test case. You need to test with strings where matches occur within different distance between matches."}], "answers": [{"tags": [], "owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "is_accepted": false, "score": 4, "last_activity_date": 1576100889, "last_edit_date": 1576100889, "creation_date": 1576100436, "answer_id": 59294528, "question_id": 59293688, "link": "https://stackoverflow.com/questions/59293688/match-and-remove-duplicated-characters-replace-multiple-3-non-consecutive-oc/59294528#59294528", "title": "Match and remove duplicated characters: Replace multiple (3+) non-consecutive occurrences", "body": "<p>You can easily accomplish this without regex:</p>\n\n<p><a href=\"https://tio.run/##PY1NCsMgEIXX8RSzM0G6sN0JnkRmMYppB4oJTgJNL291093je3/7dby28mhNwIO21hLFmNInpSvGL5HVSq1bhRO4gORjlsWpaRAeJDD8daXyzPM7l55ZgFeQwOj9ieHusJemcSHBMRp906a7xjpUaq9cxm5rPw\" rel=\"nofollow noreferrer\">See code in use here</a></p>\n\n<pre><code>s = '111aabbccxccybbzaa1'\n\nfor u in set(s):\n    for i in [i for i in range(len(s)) if s[i]==u][2:]:\n        s = s[:i]+'-'+s[i+1:]\n\nprint(s)\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>11-aabbccx--y--z---\n</code></pre>\n\n<hr>\n\n<p>How this works:</p>\n\n<ol>\n<li><code>for u in set(s)</code> gets a list of unique characters in the string: <code>{'c','a','b','y','1','z','x'}</code></li>\n<li><code>for i in ...</code> loops over the indices that we gather in 3.</li>\n<li><code>[i for i in range(len(s)) if s[i]==u][2:]</code> loops over each character in the string and checks if it matches <code>u</code> (from step 1.), then it slices the array from the 2nd element to the end (dropping the first two elements if they exist)</li>\n<li>Set the string to <code>s[:i]+'-'+s[i+1:]</code> - concatenate the substring up to the index with <code>-</code> and then the substring after the index, effectively omitting the original character.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 23370, "user_id": 6762755, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/RjWGL.jpg?s=128&g=1", "display_name": "IceCreamToucan", "link": "https://stackoverflow.com/users/6762755/icecreamtoucan"}, "is_accepted": true, "score": 9, "last_activity_date": 1576101322, "last_edit_date": 1576101322, "creation_date": 1576100745, "answer_id": 59294583, "question_id": 59293688, "link": "https://stackoverflow.com/questions/59293688/match-and-remove-duplicated-characters-replace-multiple-3-non-consecutive-oc/59294583#59294583", "title": "Match and remove duplicated characters: Replace multiple (3+) non-consecutive occurrences", "body": "<p>Non-regex R solution. Split string. Replace elements of this vector having rowid >= 3 * with <code>'-'</code>. Paste it back together.</p>\n\n<pre><code>x &lt;- '111aabbccxccybbzaa1'\n\nxsplit &lt;- strsplit(x, '')[[1]]\nxsplit[data.table::rowid(xsplit) &gt;= 3] &lt;- '-'\npaste(xsplit, collapse = '')\n\n# [1] \"11-aabbccx--y--z---\"\n</code></pre>\n\n<p>* <code>rowid(x)</code> is an integer vector with each element representing the number of times the value from the corresponding element of <code>x</code> has been realized. So if the last element of <code>x</code> is <code>1</code>, and that's the fourth time <code>1</code> has occurred in <code>x</code>, the last element of <code>rowid(x)</code> is <code>4</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 661312, "user_id": 3732271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee6e12042dc31b1ef27471482f9ff91f?s=128&d=identicon&r=PG&f=1", "display_name": "akrun", "link": "https://stackoverflow.com/users/3732271/akrun"}, "is_accepted": false, "score": 3, "last_activity_date": 1576102024, "creation_date": 1576102024, "answer_id": 59294827, "question_id": 59293688, "link": "https://stackoverflow.com/questions/59293688/match-and-remove-duplicated-characters-replace-multiple-3-non-consecutive-oc/59294827#59294827", "title": "Match and remove duplicated characters: Replace multiple (3+) non-consecutive occurrences", "body": "<p>An option with <code>gsubfn</code></p>\n\n<pre><code>library(gsubfn)\np &lt;- proto(fun = function(this, x) if (count &gt;=3) '-' else x)\nfor(i in c(0:9, letters)) x &lt;- gsubfn(i, p, x)\nx\n#[1] \"11-aabbccx--y--z---\"\n</code></pre>\n\n<h3>data</h3>\n\n<pre><code>x &lt;- '111aabbccxccybbzaa1'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4746, "user_id": 8474894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3480af9d214a7d6f6a8cb9ef821b1f24?s=128&d=identicon&r=PG&f=1", "display_name": "CypherX", "link": "https://stackoverflow.com/users/8474894/cypherx"}, "is_accepted": false, "score": 1, "last_activity_date": 1576111289, "creation_date": 1576111289, "answer_id": 59296140, "question_id": 59293688, "link": "https://stackoverflow.com/questions/59293688/match-and-remove-duplicated-characters-replace-multiple-3-non-consecutive-oc/59296140#59296140", "title": "Match and remove duplicated characters: Replace multiple (3+) non-consecutive occurrences", "body": "<p>Another way of doing it with <code>pandas</code>.  </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pandas as pd\n\ns = '111aabbccxccybbzaa1'\n# 11-aabbccx--y--z---\n\ndf = pd.DataFrame({'Data': list(s)})\ndf['Count'] = 1\ndf['cumsum'] = df[['Data', 'Count']].groupby('Data').cumsum()\ndf.loc[df['cumsum']&gt;=3, 'Data'] = '-'\n''.join(df.Data.to_list())\n</code></pre>\n\n<p><strong>Output</strong>:  </p>\n\n<pre><code>11-aabbccx--y--z---\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 755, "user_id": 6922497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf7f44917e6e202fd8a99cc6380867a3?s=128&d=identicon&r=PG&f=1", "display_name": "ParkerD", "link": "https://stackoverflow.com/users/6922497/parkerd"}, "is_accepted": false, "score": 2, "last_activity_date": 1576198437, "creation_date": 1576198437, "answer_id": 59314738, "question_id": 59293688, "link": "https://stackoverflow.com/questions/59293688/match-and-remove-duplicated-characters-replace-multiple-3-non-consecutive-oc/59314738#59314738", "title": "Match and remove duplicated characters: Replace multiple (3+) non-consecutive occurrences", "body": "<p>No regex python one-liner:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>s = \"111aabbccxccybbzaa1\"\n\nprint(\"\".join(char if s.count(char, 0, i) &lt; 2 else \"-\" for i, char in enumerate(s)))\n# ==&gt; \"11-aabbccx--y--z---\"\n</code></pre>\n\n<p>This enumerates through the string, counting occurrences of the current character behind it and only putting the character if it is one of the first 2, otherwise dash.</p>\n"}, {"tags": [], "owner": {"reputation": 18705, "user_id": 6461462, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BlsdV.jpg?s=128&g=1", "display_name": "M--", "link": "https://stackoverflow.com/users/6461462/m"}, "is_accepted": false, "score": 0, "last_activity_date": 1592584836, "last_edit_date": 1592584836, "creation_date": 1579046701, "answer_id": 59743499, "question_id": 59293688, "link": "https://stackoverflow.com/questions/59293688/match-and-remove-duplicated-characters-replace-multiple-3-non-consecutive-oc/59743499#59743499", "title": "Match and remove duplicated characters: Replace multiple (3+) non-consecutive occurrences", "body": "<p><sub>Thanks to <em>Wiktor Stribi\u017cew</em>, <em>Stefan Pochmann</em>, and <em>bobble bubble</em>. For the sake of completion, I am posting possible <code>regex</code> solutions discussed in the comments; </sub></p>\n\n<p>This is only doable with a regex that supports infinite width lookbehind. Using Python PyPi regex module we can do the followings:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#python 2.7.12\nimport regex\n\ns = \"111aabbccxccybbzaa1\"\n</code></pre>\n\n<pre><code>print(regex.sub(r'(.)(?&lt;=^(?:(?:(?!\\1).)*\\1){2,}(?:(?!\\1).)*\\1)', '-', s)) #Wiktor Stribizew\n     ## 11-aabbccx--y--z---\n</code></pre>\n\n<pre><code>print(regex.sub(r'(.)(?&lt;=(.*\\1){3})', '-', s)) #Stefan Pochmann\n     ## 11-aabbccx--y--z---\n</code></pre>\n\n<pre><code>print(regex.sub(r'(.)(?&lt;=(?:.*\\1){3})', '-', s)) #Wiktor Stribizew\n     ## 11-aabbccx--y--z---\n</code></pre>\n\n<pre><code>print(regex.sub(r'(.)(?&lt;=(?:\\1.*?){2}\\1)', '-', s)) #bobble bubble\n     ## 11-aabbccx--y--z---\n</code></pre>\n\n<p><a href=\"https://rextester.com/SLX49603\" rel=\"nofollow noreferrer\">See code in use.</a>.</p>\n"}], "owner": {"reputation": 18705, "user_id": 6461462, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BlsdV.jpg?s=128&g=1", "display_name": "M--", "link": "https://stackoverflow.com/users/6461462/m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 550, "favorite_count": 3, "accepted_answer_id": 59294583, "answer_count": 6, "score": 8, "last_activity_date": 1594401720, "creation_date": 1576096566, "last_edit_date": 1594401720, "question_id": 59293688, "link": "https://stackoverflow.com/questions/59293688/match-and-remove-duplicated-characters-replace-multiple-3-non-consecutive-oc", "title": "Match and remove duplicated characters: Replace multiple (3+) non-consecutive occurrences", "body": "<p>I am looking for a <code>regex</code> pattern that will match third, fourth, ... occurrence of each character. Look below for clarification:</p>\n\n<p>For example I have the following string:</p>\n\n<pre><code>111aabbccxccybbzaa1\n</code></pre>\n\n<p>I want to replace all the duplicated characters after the second occurrence. The output will be:</p>\n\n<pre><code>11-aabbccx--y--z---\n</code></pre>\n\n<p><strong><em>Some regex patterns that I tried so far:</em></strong></p>\n\n<p>Using the following regex I can find the last occurrence of each character:</p>\n\n<p><a href=\"https://regex101.com/r/zdajMW/2\" rel=\"nofollow noreferrer\"><code>(.)(?=.*\\1)</code></a></p>\n\n<p>Or using this one I can do it for consecutive duplicates but not for any duplicates: </p>\n\n<p><a href=\"https://regex101.com/r/zdajMW/6/\" rel=\"nofollow noreferrer\"><code>([a-zA-Z1-9])\\1{2,}</code></a></p>\n"}, {"tags": ["python", "matplotlib", "word-cloud"], "answers": [{"tags": [], "owner": {"reputation": 907, "user_id": 1558604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b97af9fb78006cf022f9e60b0d9b428?s=128&d=identicon&r=PG", "display_name": "user1558604", "link": "https://stackoverflow.com/users/1558604/user1558604"}, "is_accepted": false, "score": 2, "last_activity_date": 1576096946, "creation_date": 1576096946, "answer_id": 59293765, "question_id": 59293686, "link": "https://stackoverflow.com/questions/59293686/my-word-cloud-is-missing-three-out-of-the-four-words-in-my-string-how-do-i-add/59293765#59293765", "title": "My word cloud is missing three out of the four words in my string. How do I add the words it&#39;s missing?", "body": "<p>In the OP code above, <code>stopwords</code> argument is set to the module <code>STOPWORDS</code> list. In this list, <code>how</code>, <code>are</code>, <code>you</code> are all included. This restricts these words from showing in the wordcloud.</p>\n\n<p>Note, if this argument is not given, it will also default to this list, so you will need to load in an empty list if you want all words included.</p>\n"}, {"tags": [], "owner": {"reputation": 931, "user_id": 2751621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QOZRK.jpg?s=128&g=1", "display_name": "emartinelli", "link": "https://stackoverflow.com/users/2751621/emartinelli"}, "is_accepted": true, "score": 0, "last_activity_date": 1576097611, "creation_date": 1576097611, "answer_id": 59293912, "question_id": 59293686, "link": "https://stackoverflow.com/questions/59293686/my-word-cloud-is-missing-three-out-of-the-four-words-in-my-string-how-do-i-add/59293912#59293912", "title": "My word cloud is missing three out of the four words in my string. How do I add the words it&#39;s missing?", "body": "<p><code>hi</code>, <code>are</code> and <code>you</code> are contained in <code>STOPWORDS</code>.</p>\n\n<p>If you want to keep these specific words you need to filter out them from <code>STOPWORDS</code></p>\n\n<p>Like:</p>\n\n<pre><code>from wordcloud import WordCloud, STOPWORDS\n\nstopwords = {word for word in STOPWORDS if word not in {'how', 'are', 'you'}}\nwordcloud = WordCloud(\n    width=800,height=800,\n    stopwords = stopwords,\n    min_font_size = 10,\n    background_color='white'\n).generate(\"hi how are you\")\n\n# plot the WordCloud image           \nplt.figure(figsize = (8, 8), facecolor=None)\nplt.imshow(wordcloud,interpolation=\"bilinear\")\nplt.axis(\"off\")\nplt.tight_layout(pad = 0)\n\nplt.show()\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 10083113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/626efa0e3d4d76083e67ae8e5d439c89?s=128&d=identicon&r=PG&f=1", "display_name": "Montana Burr", "link": "https://stackoverflow.com/users/10083113/montana-burr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 419, "favorite_count": 1, "accepted_answer_id": 59293912, "answer_count": 2, "score": 2, "last_activity_date": 1576097611, "creation_date": 1576096561, "question_id": 59293686, "link": "https://stackoverflow.com/questions/59293686/my-word-cloud-is-missing-three-out-of-the-four-words-in-my-string-how-do-i-add", "title": "My word cloud is missing three out of the four words in my string. How do I add the words it&#39;s missing?", "body": "<p>I am trying to create a word cloud from the sentence, \"hi how are you\". But I only get the first word. Why?</p>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>#@title Bar plot of most frequent words.\nfrom wordcloud import WordCloud,STOPWORDS\nstopwords = set(STOPWORDS)\nwordcloud = WordCloud(\n    width=800,height=800,\n    stopwords = stopwords,\n    min_font_size = 10,\n    background_color='white'\n).generate(\"hi how are you\") \n# plot the WordCloud image                        \nplt.figure(figsize = (8, 8), facecolor = None) \nplt.imshow(wordcloud,interpolation=\"bilinear\") \nplt.axis(\"off\") \nplt.tight_layout(pad = 0) \n\nplt.show()\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/2WiBV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2WiBV.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "docker"], "comments": [{"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 2, "creation_date": 1576097242, "post_id": 59293679, "comment_id": 104792265, "body": "How did you determine that the container is stuck and how did you check the output?"}], "answers": [{"tags": [], "owner": {"reputation": 933, "user_id": 8390382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/awyRS.jpg?s=128&g=1", "display_name": "lainatnavi", "link": "https://stackoverflow.com/users/8390382/lainatnavi"}, "is_accepted": false, "score": 0, "last_activity_date": 1576100532, "last_edit_date": 1576100532, "creation_date": 1576097842, "answer_id": 59293964, "question_id": 59293679, "link": "https://stackoverflow.com/questions/59293679/docker-container-stuck-running-from-python-sdk/59293964#59293964", "title": "Docker container stuck running from Python SDK", "body": "<p><strong>EDIT 2:<br></strong>\nI don't know why the first time it did not progress even after <code>strace</code> showing a <code>download image complete</code> message. I killed the process and retried, this time it worked. I am running everything on a virtual machine. It seems there are some related issues with docker itself, don't think this could be an SDK issue. See for example <a href=\"https://github.com/docker/for-mac/issues/2083\" rel=\"nofollow noreferrer\">this</a>. The second time I also had disabled the host antivirus (Win7 security essentials, but I'm not sure it did the trick).<br>\n<strong>EDIT:</strong><br>Actually it is taking too long to complete also in my case. I guess it is because the first time the python process has to download the <code>ubuntu</code> image which is around 180MB in size.<br><br><strong>Original answer:<br></strong>\nOpen another session and find the process id using the <code>ps</code> command. Then do <code>strace -p &lt;pid&gt;</code>. You'll see the that actually the process is doing something:<br></p>\n\n<pre><code>recvfrom(4, \"bd\\r\\n{\\\"status\\\":\\\"Downloading\\\",\\\"pro\"..., 8192, 0, NULL, NULL) = 195\nrecvfrom(4, \"bd\\r\\n{\\\"status\\\":\\\"Downloading\\\",\\\"pro\"..., 8192, 0, NULL, NULL) = 195\nrecvfrom(4, \"bd\\r\\n{\\\"status\\\":\\\"Downloading\\\",\\\"pro\"..., 8192, 0, NULL, NULL) = 195\nrecvfrom(4, \"bd\\r\\n{\\\"status\\\":\\\"Downloading\\\",\\\"pro\"..., 8192, 0, NULL, NULL) = 195\nrecvfrom(4, \"bd\\r\\n{\\\"status\\\":\\\"Downloading\\\",\\\"pro\"..., 8192, 0, NULL, NULL) = 195\nrecvfrom(4, \"bd\\r\\n{\\\"status\\\":\\\"Downloading\\\",\\\"pro\"..., 8192, 0, NULL, NULL) = 195\nrecvfrom(4, \"bd\\r\\n{\\\"status\\\":\\\"Downloading\\\",\\\"pro\"..., 8192, 0, NULL, NULL) = 195\nrecvfrom(4, \"bd\\r\\n{\\\"status\\\":\\\"Downloading\\\",\\\"pro\"..., 8192, 0, NULL, NULL) = 19\n</code></pre>\n\n<p>Just wait until it completes.</p>\n"}], "owner": {"reputation": 907, "user_id": 84652, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/32d802ece0c27a4ac8af4f617ac4e24b?s=128&d=identicon&r=PG", "display_name": "GarudaReiga", "link": "https://stackoverflow.com/users/84652/garudareiga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 279, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576100532, "creation_date": 1576096534, "question_id": 59293679, "link": "https://stackoverflow.com/questions/59293679/docker-container-stuck-running-from-python-sdk", "title": "Docker container stuck running from Python SDK", "body": "<p>I am following the example in Docker SDK for Python: <a href=\"https://docker-py.readthedocs.io/en/stable/containers.html\" rel=\"nofollow noreferrer\">https://docker-py.readthedocs.io/en/stable/containers.html</a>. But the container seems to be stuck after running and do not output anything:</p>\n\n<pre><code>Python 3.6.9 (default, Nov  7 2019, 10:44:02)\n[GCC 8.3.0] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import docker\n&gt;&gt;&gt; client = docker.from_env()\n&gt;&gt;&gt; client.containers.run(\"ubuntu\", \"echo hello world\")\n</code></pre>\n\n<p>Does anyone have the same issue?</p>\n"}, {"tags": ["python", "python-2to3"], "comments": [{"owner": {"reputation": 14624, "user_id": 5588279, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/31a5c0b08beca9ebc2c1d5e60ba691d7?s=128&d=identicon&r=PG&f=1", "display_name": "Sraw", "link": "https://stackoverflow.com/users/5588279/sraw"}, "edited": false, "score": 0, "creation_date": 1576097069, "post_id": 59293633, "comment_id": 104792196, "body": "Couldn&#39;t you copy code from <code>six</code>?"}, {"owner": {"reputation": 6356, "user_id": 5030164, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/11b6c08b9d6554e51280244985e3022d?s=128&d=identicon&r=PG&f=1", "display_name": "modesitt", "link": "https://stackoverflow.com/users/5030164/modesitt"}, "edited": false, "score": 0, "creation_date": 1576097078, "post_id": 59293633, "comment_id": 104792201, "body": "What behavior are you expecting out of <code>str.encode</code> and <code>str.decode</code> - would you like <code>str</code> always returned"}, {"owner": {"reputation": 89, "user_id": 5673299, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/9368b98e5a958869415c4b9fa856ff73?s=128&d=identicon&r=PG&f=1", "display_name": "GoyaKing", "link": "https://stackoverflow.com/users/5673299/goyaking"}, "edited": false, "score": 0, "creation_date": 1576097330, "post_id": 59293633, "comment_id": 104792306, "body": "The most reliable translation tool would be to leverage six. You could try converting to byte literals then decode?"}, {"owner": {"reputation": 20965, "user_id": 191246, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/zRo29.png?s=128&g=1", "display_name": "ccpizza", "link": "https://stackoverflow.com/users/191246/ccpizza"}, "reply_to_user": {"reputation": 6356, "user_id": 5030164, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/11b6c08b9d6554e51280244985e3022d?s=128&d=identicon&r=PG&f=1", "display_name": "modesitt", "link": "https://stackoverflow.com/users/5030164/modesitt"}, "edited": false, "score": 0, "creation_date": 1576098173, "post_id": 59293633, "comment_id": 104792657, "body": "@modesitt: yes, assuming only strings are required and they will always be utf8/ascii."}], "answers": [{"tags": [], "owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "is_accepted": true, "score": 4, "last_activity_date": 1576097074, "creation_date": 1576097074, "answer_id": 59293791, "question_id": 59293633, "link": "https://stackoverflow.com/questions/59293633/how-to-handle-strings-transparently-across-pythons-2-and-3-without-external-modu/59293791#59293791", "title": "How to handle strings transparently across pythons 2 and 3 without external modules?", "body": "<p>The <a href=\"https://github.com/benjaminp/six/blob/master/six.py\" rel=\"nofollow noreferrer\">six source code</a> is not too complicated so why not just copy the string parts to your code base? That way you have a well established approach for uniform string handling. I.e. the following code should do:</p>\n\n<pre><code>import sys\n\nPY2 = sys.version_info[0] == 2\nPY3 = sys.version_info[0] == 3\n\nif PY3:\n    text_type = str\n    binary_type = bytes\nelse:\n    text_type = unicode\n    binary_type = str\n\n\ndef ensure_binary(s, encoding='utf-8', errors='strict'):\n    if isinstance(s, text_type):\n        return s.encode(encoding, errors)\n    elif isinstance(s, binary_type):\n        return s\n    else:\n        raise TypeError(\"not expecting type '%s'\" % type(s))\n\n\ndef ensure_str(s, encoding='utf-8', errors='strict'):\n    if not isinstance(s, (text_type, binary_type)):\n        raise TypeError(\"not expecting type '%s'\" % type(s))\n    if PY2 and isinstance(s, text_type):\n        s = s.encode(encoding, errors)\n    elif PY3 and isinstance(s, binary_type):\n        s = s.decode(encoding, errors)\n    return s\n\n\ndef ensure_text(s, encoding='utf-8', errors='strict'):\n    if isinstance(s, binary_type):\n        return s.decode(encoding, errors)\n    elif isinstance(s, text_type):\n        return s\n    else:\n        raise TypeError(\"not expecting type '%s'\" % type(s))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 89, "user_id": 5673299, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/9368b98e5a958869415c4b9fa856ff73?s=128&d=identicon&r=PG&f=1", "display_name": "GoyaKing", "link": "https://stackoverflow.com/users/5673299/goyaking"}, "is_accepted": false, "score": 1, "last_activity_date": 1576098000, "creation_date": 1576098000, "answer_id": 59293987, "question_id": 59293633, "link": "https://stackoverflow.com/questions/59293633/how-to-handle-strings-transparently-across-pythons-2-and-3-without-external-modu/59293987#59293987", "title": "How to handle strings transparently across pythons 2 and 3 without external modules?", "body": "<p>Within each file add this line to the top of each file</p>\n\n<pre><code>PY3 = sys.version_info[0] == 3\nif PY3:\n    from builtins import str as unicode\n</code></pre>\n"}], "owner": {"reputation": 20965, "user_id": 191246, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/zRo29.png?s=128&g=1", "display_name": "ccpizza", "link": "https://stackoverflow.com/users/191246/ccpizza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 59293791, "answer_count": 2, "score": 3, "last_activity_date": 1576098000, "creation_date": 1576096352, "question_id": 59293633, "link": "https://stackoverflow.com/questions/59293633/how-to-handle-strings-transparently-across-pythons-2-and-3-without-external-modu", "title": "How to handle strings transparently across pythons 2 and 3 without external modules?", "body": "<p>What would be the simplest approach to universal string handling that would work in both python2 and python3 without having to use third-party modules like <a href=\"https://six.readthedocs.io/\" rel=\"nofollow noreferrer\">six</a>?</p>\n\n<p>I am ok with using <code>if sys.version_info &gt; (3, 0)...</code> but can't come up with a way to cleanly overlay the string methods to make encoding/decoding to and from bytes transparent?</p>\n\n<p>The goal is to find the minimum possible code that would allow writing self-contained version-agnostic scripts (without dependencies).</p>\n"}, {"tags": ["python", "pandas", "dataframe", "merge", "series"], "answers": [{"comments": [{"owner": {"reputation": 402, "user_id": 4637060, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SP2T5k0GrP8/AAAAAAAAAAI/AAAAAAAAACM/OmNQqb0TDE0/photo.jpg?sz=128", "display_name": "Hendrikto", "link": "https://stackoverflow.com/users/4637060/hendrikto"}, "edited": false, "score": 0, "creation_date": 1576098542, "post_id": 59293712, "comment_id": 104792805, "body": "Thanks for the answer, but the index is not always equal to range(len(s)). I should have been more clear about that. See the edit to my question."}, {"owner": {"reputation": 6295, "user_id": 11938023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca4cf2bdd1880354bec8cbcd73f8189?s=128&d=identicon&r=PG&f=1", "display_name": "oppressionslayer", "link": "https://stackoverflow.com/users/11938023/oppressionslayer"}, "reply_to_user": {"reputation": 402, "user_id": 4637060, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SP2T5k0GrP8/AAAAAAAAAAI/AAAAAAAAACM/OmNQqb0TDE0/photo.jpg?sz=128", "display_name": "Hendrikto", "link": "https://stackoverflow.com/users/4637060/hendrikto"}, "edited": false, "score": 1, "creation_date": 1576100608, "post_id": 59293712, "comment_id": 104793663, "body": "I updated to make that change so the answer is right"}], "tags": [], "owner": {"reputation": 6295, "user_id": 11938023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca4cf2bdd1880354bec8cbcd73f8189?s=128&d=identicon&r=PG&f=1", "display_name": "oppressionslayer", "link": "https://stackoverflow.com/users/11938023/oppressionslayer"}, "is_accepted": false, "score": 2, "last_activity_date": 1576100572, "last_edit_date": 1576100572, "creation_date": 1576096654, "answer_id": 59293712, "question_id": 59293626, "link": "https://stackoverflow.com/questions/59293626/setting-the-index-after-merging-with-pandas/59293712#59293712", "title": "Setting the index after merging with pandas?", "body": "<p>You can do this with reset_index:</p>\n\n<pre><code>df = pd.merge(s,df, 'left', left_index=True, right_on='id').reset_index(drop=True).set_index('id').rename_axis(index=None)\ndf.insert(1, 'id', df.index)\n\n    score  id value\n10      5  10   NaN\n11      6  11     a\n12      7  12   NaN\n13      8  13     b\n14      9  14   NaN\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 402, "user_id": 4637060, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SP2T5k0GrP8/AAAAAAAAAAI/AAAAAAAAACM/OmNQqb0TDE0/photo.jpg?sz=128", "display_name": "Hendrikto", "link": "https://stackoverflow.com/users/4637060/hendrikto"}, "edited": false, "score": 0, "creation_date": 1576098387, "post_id": 59293738, "comment_id": 104792738, "body": "Thanks for your answer, but it does not really fit my usecase. I want to preserve the index from the series, which is not always equal to range(len(s)). I edited my question to clarify this point."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 402, "user_id": 4637060, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SP2T5k0GrP8/AAAAAAAAAAI/AAAAAAAAACM/OmNQqb0TDE0/photo.jpg?sz=128", "display_name": "Hendrikto", "link": "https://stackoverflow.com/users/4637060/hendrikto"}, "edited": false, "score": 1, "creation_date": 1576098594, "post_id": 59293738, "comment_id": 104792828, "body": "@Hendrikto Should&#39;ve just said so, you can set the index post-merge; see my edit."}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 2, "last_activity_date": 1576098581, "last_edit_date": 1576098581, "creation_date": 1576096769, "answer_id": 59293738, "question_id": 59293626, "link": "https://stackoverflow.com/questions/59293626/setting-the-index-after-merging-with-pandas/59293738#59293738", "title": "Setting the index after merging with pandas?", "body": "<p>Here's what happens:  </p>\n\n<ol>\n<li>the output index is the intersection of the index/column merge keys <code>[0, 1]</code>. </li>\n<li>missing keys are replaced with NaN</li>\n<li>NaNs result in the index type being upcasted to <code>float</code></li>\n</ol>\n\n<p>To set the index, just assign to it:</p>\n\n<pre><code>s2 = pd.merge(s, df, how='left', left_index=True, right_on='id')\ns2.index = s.index\n\n    score  id value\n10      5  10   NaN\n11      6  11     a\n12      7  12   NaN\n13      8  13     b\n14      9  14   NaN\n</code></pre>\n\n<p>You can also merge on <code>s</code> (just because I dislike calling <code>pd.merge</code> directly):</p>\n\n<pre><code>(s.to_frame()\n  .merge(df, how='left', left_index=True, right_on='id')\n  .set_axis(s.index, axis=0, inplace=False))\n\n    score  id value\n10      5  10   NaN\n11      6  11     a\n12      7  12   NaN\n13      8  13     b\n14      9  14   NaN\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 402, "user_id": 4637060, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SP2T5k0GrP8/AAAAAAAAAAI/AAAAAAAAACM/OmNQqb0TDE0/photo.jpg?sz=128", "display_name": "Hendrikto", "link": "https://stackoverflow.com/users/4637060/hendrikto"}, "is_accepted": false, "score": 0, "last_activity_date": 1576187510, "creation_date": 1576187510, "answer_id": 59313225, "question_id": 59293626, "link": "https://stackoverflow.com/questions/59293626/setting-the-index-after-merging-with-pandas/59313225#59313225", "title": "Setting the index after merging with pandas?", "body": "<p>Since I do not need the duplicated information in both the <code>id</code> column and the index, I went with a combination of the answers from cs95 and oppressionslayer, and did the following:</p>\n\n<pre><code>pd.merge(s, df, 'left', left_index=True, right_on='id').set_index('id')\n</code></pre>\n\n<p>Which results in this data frame:</p>\n\n<pre><code>    score value\nid             \n10      5   NaN\n11      6     a\n12      7   NaN\n13      8     b\n14      9   NaN\n</code></pre>\n\n<p>Since this is different from what I initially asked for, I am leaving the answer from cs95 as the accepted answer, but I think this use case needs to be documented as well.</p>\n"}], "owner": {"reputation": 402, "user_id": 4637060, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SP2T5k0GrP8/AAAAAAAAAAI/AAAAAAAAACM/OmNQqb0TDE0/photo.jpg?sz=128", "display_name": "Hendrikto", "link": "https://stackoverflow.com/users/4637060/hendrikto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 299, "favorite_count": 2, "accepted_answer_id": 59293738, "answer_count": 3, "score": 5, "last_activity_date": 1576187510, "creation_date": 1576096297, "last_edit_date": 1576099524, "question_id": 59293626, "link": "https://stackoverflow.com/questions/59293626/setting-the-index-after-merging-with-pandas", "title": "Setting the index after merging with pandas?", "body": "<p>Executing the following merge</p>\n\n<pre><code>import pandas as pd\ns = pd.Series(range(5, 10), index=range(10, 15), name='score')\ndf = pd.DataFrame({'id': (11, 13), 'value': ('a', 'b')})\npd.merge(s, df, 'left', left_index=True, right_on='id')\n</code></pre>\n\n<p>results in this data frame:</p>\n\n<pre><code>     score  id value\nNaN      5  10   NaN\n0.0      6  11     a\nNaN      7  12   NaN\n1.0      8  13     b\nNaN      9  14   NaN\n</code></pre>\n\n<p>Why does Pandas take the index from the right data frame as the index for the result, instead of the index from the left series, even though I specified both a left merge and <code>left_index=True</code>? The <a href=\"https://pandas.pydata.org/pandas-docs/version/0.23.4/generated/pandas.merge.html\" rel=\"nofollow noreferrer\">documentation</a> says</p>\n\n<blockquote>\n  <p>left: use only keys from left frame</p>\n</blockquote>\n\n<p>which I interpreted differently from the result I am actually getting. What I expected was the following data frame.</p>\n\n<pre><code>    score  id value\n10      5  10   NaN\n11      6  11     a\n12      7  12   NaN\n13      8  13     b\n14      9  14   NaN\n</code></pre>\n\n<p>I am using Python 3.7.5 with Pandas 0.25.3.</p>\n"}, {"tags": ["python", "django"], "answers": [{"comments": [{"owner": {"reputation": 1633, "user_id": 12001122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ec161ec6ec2ddb3c5ea5989f03fe053?s=128&d=identicon&r=PG&f=1", "display_name": "Jonas", "link": "https://stackoverflow.com/users/12001122/jonas"}, "edited": false, "score": 0, "creation_date": 1576097098, "post_id": 59293705, "comment_id": 104792209, "body": "Works, thank you + upvoted, although the other answer is a bit more extensive, thats why I accept this one."}, {"owner": {"reputation": 160, "user_id": 12519195, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBBNt_8f9T-ptlrhJyE4Kzo-YV8Njhc4yKEoBuTBg=k-s128", "display_name": "Guilherme Fran&#231;a de Oliveira", "link": "https://stackoverflow.com/users/12519195/guilherme-fran%c3%a7a-de-oliveira"}, "reply_to_user": {"reputation": 1633, "user_id": 12001122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ec161ec6ec2ddb3c5ea5989f03fe053?s=128&d=identicon&r=PG&f=1", "display_name": "Jonas", "link": "https://stackoverflow.com/users/12001122/jonas"}, "edited": false, "score": 1, "creation_date": 1576097843, "post_id": 59293705, "comment_id": 104792537, "body": "I am looking for help but I do not know what may be the reason for its use, so above have some options and hope you understand how django works to have the best use and if you have any questions feel free to ask."}], "tags": [], "owner": {"reputation": 160, "user_id": 12519195, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBBNt_8f9T-ptlrhJyE4Kzo-YV8Njhc4yKEoBuTBg=k-s128", "display_name": "Guilherme Fran&#231;a de Oliveira", "link": "https://stackoverflow.com/users/12519195/guilherme-fran%c3%a7a-de-oliveira"}, "is_accepted": false, "score": -1, "last_activity_date": 1576097979, "last_edit_date": 1576097979, "creation_date": 1576096631, "answer_id": 59293705, "question_id": 59293611, "link": "https://stackoverflow.com/questions/59293611/cant-use-python-dict-in-django-template-tag/59293705#59293705", "title": "Can&#39;t use Python dict in Django template tag", "body": "<p>Do like this</p>\n\n<pre><code>def render_Terminal(request, template=\"Terminal.html\"):\n    account_information = AccountInformation.objects.all()\n    account_information_dict = {\n        'account_information': [a for a in account_information]\n    }\n    return render(request, template, (account_information_dict))\n</code></pre>\n\n<p>and</p>\n\n<pre><code>&lt;div id=\"oneTwo\" class=\"columnsOne\"&gt;\n   {{ account_information.0.pk }}\n&lt;/div&gt;\n</code></pre>\n\n<p>however you can only recover the first item that comes</p>\n\n<hr>\n\n<p>a better solution might be</p>\n\n<pre><code>account_information = AccountInformation.objects.get(pk=`you id`)\nreturn render(request, template, (account_information_dict))\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>&lt;div id=\"oneTwo\" class=\"columnsOne\"&gt;\n   {{ account_information.pk }}\n&lt;/div&gt;\n</code></pre>\n\n<hr>\n\n<p><code>Using just account_information within the tag, I get:</code></p>\n\n<p>inside the html code you have to put the item in \"for\" if you take the integer value</p>\n\n<pre><code> {% for a in account_information %}\n      &lt;div&gt;\n            {{ a.pk }}\n      &lt;/div&gt;\n {% endfor %}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2020, "user_id": 3279603, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9zp3k.jpg?s=128&g=1", "display_name": "aminrd", "link": "https://stackoverflow.com/users/3279603/aminrd"}, "is_accepted": true, "score": 4, "last_activity_date": 1576096787, "creation_date": 1576096787, "answer_id": 59293744, "question_id": 59293611, "link": "https://stackoverflow.com/questions/59293611/cant-use-python-dict-in-django-template-tag/59293744#59293744", "title": "Can&#39;t use Python dict in Django template tag", "body": "<p><code>AccountInformation.objects.all()</code> is a <code>QuerySet</code> with a <code>all()</code> filter. A QuerySet is iterable, and it executes its database query the first time you iterate over it. You can show the id for all items in your list using: </p>\n\n<pre class=\"lang-html prettyprint-override\"><code>{% for item in account_information %}\n  &lt;div id=\"some-id-{{ forloop.counter }}\" class=\"some-class\"&gt;\n     {{ item.pk }}\n  &lt;/div&gt;\n{% endfor %}\n</code></pre>\n"}], "owner": {"reputation": 1633, "user_id": 12001122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ec161ec6ec2ddb3c5ea5989f03fe053?s=128&d=identicon&r=PG&f=1", "display_name": "Jonas", "link": "https://stackoverflow.com/users/12001122/jonas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 59293744, "answer_count": 2, "score": 1, "last_activity_date": 1576097979, "creation_date": 1576096194, "question_id": 59293611, "link": "https://stackoverflow.com/questions/59293611/cant-use-python-dict-in-django-template-tag", "title": "Can&#39;t use Python dict in Django template tag", "body": "<p>I checked multiple posts and solutions but can't make it happen.</p>\n\n<p>I have a Python object returned within a view. I now want to use data from that dict to render it using Django template tags.</p>\n\n<p>Somehow nothing shows up though...</p>\n\n<p><strong>View:</strong></p>\n\n<pre><code>def render_Terminal(request, template=\"Terminal.html\"):\n    account_information = AccountInformation.objects.all()\n    account_information_dict = {\n        'account_information': account_information\n    }\n    return render(request, template, (account_information_dict))\n</code></pre>\n\n<p><strong>HTML</strong></p>\n\n<pre><code>     &lt;div id=\"oneTwo\" class=\"columnsOne\"&gt;\n       {{ account_information.pk }}\n     &lt;/div&gt;\n</code></pre>\n\n<p><strong>Using just <code>account_information</code> within the tag, I get:</strong></p>\n\n<pre><code>&lt;QuerySet [&lt;AccountInformation: AccountInformation object (30e61aec-0f6e-4fa0-8c1b-eb07f9347c1f)&gt;]&gt;\n</code></pre>\n\n<p>Where is the issue?</p>\n"}, {"tags": ["python", "numpy", "scikit-learn", "nan"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 12520768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/646329240f61f20727fef52dc592a747?s=128&d=identicon&r=PG&f=1", "display_name": "tpandas", "link": "https://stackoverflow.com/users/12520768/tpandas"}, "edited": false, "score": 0, "creation_date": 1576096668, "post_id": 59293669, "comment_id": 104792049, "body": "I separately tested for <code>inf </code> using <code>np.all(np.isfinite(train_features))</code> I just didn&#39;t put it in, my bad.  Unfortunately I can&#39;t use the pandas function since they are all made into arrays for the purposes of the random forest."}, {"owner": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "reply_to_user": {"reputation": 61, "user_id": 12520768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/646329240f61f20727fef52dc592a747?s=128&d=identicon&r=PG&f=1", "display_name": "tpandas", "link": "https://stackoverflow.com/users/12520768/tpandas"}, "edited": false, "score": 0, "creation_date": 1576096861, "post_id": 59293669, "comment_id": 104792123, "body": "But you can turn an array into a dataframe using <code>pd.DataFrame()</code> as stated in the answer. What else are we missing from your code? maybe some posterior transformation? Are you turning values into logs?"}, {"owner": {"reputation": 61, "user_id": 12520768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/646329240f61f20727fef52dc592a747?s=128&d=identicon&r=PG&f=1", "display_name": "tpandas", "link": "https://stackoverflow.com/users/12520768/tpandas"}, "edited": false, "score": 0, "creation_date": 1576097415, "post_id": 59293669, "comment_id": 104792351, "body": "Oh sorry, I didn&#39;t see that. I put in the code you provided but I&#39;m still having the nan error when I run the training. I&#39;ve updated the post with my full relevant code."}, {"owner": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "reply_to_user": {"reputation": 61, "user_id": 12520768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/646329240f61f20727fef52dc592a747?s=128&d=identicon&r=PG&f=1", "display_name": "tpandas", "link": "https://stackoverflow.com/users/12520768/tpandas"}, "edited": false, "score": 0, "creation_date": 1576098392, "post_id": 59293669, "comment_id": 104792739, "body": "if you add <code>print(features.isnull().sum().sum())</code> on your second line in your relevant code, do you get a zero? If you do it using the <code>with</code> statement in my answer, is it still zero ?"}, {"owner": {"reputation": 61, "user_id": 12520768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/646329240f61f20727fef52dc592a747?s=128&d=identicon&r=PG&f=1", "display_name": "tpandas", "link": "https://stackoverflow.com/users/12520768/tpandas"}, "edited": false, "score": 0, "creation_date": 1576099114, "post_id": 59293669, "comment_id": 104793023, "body": "I got 11 running before changing to an array, running after gets <code>&#39;numpy.ndarray&#39; object has no attribute &#39;isnull&#39;</code>"}, {"owner": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "reply_to_user": {"reputation": 61, "user_id": 12520768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/646329240f61f20727fef52dc592a747?s=128&d=identicon&r=PG&f=1", "display_name": "tpandas", "link": "https://stackoverflow.com/users/12520768/tpandas"}, "edited": false, "score": 0, "creation_date": 1576099230, "post_id": 59293669, "comment_id": 104793076, "body": "Ok, so there are null values. Now if you <code>print(features.isnull()</code> you&#39;ll know which columns have <code>nan</code> values. Then, you can do, for example if column &quot;col1&quot; has nan values, <code>features[&#39;col1&#39;] =  features[&#39;col1&#39;].fillna(features[&#39;col1&#39;].median())</code>"}, {"owner": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "reply_to_user": {"reputation": 61, "user_id": 12520768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/646329240f61f20727fef52dc592a747?s=128&d=identicon&r=PG&f=1", "display_name": "tpandas", "link": "https://stackoverflow.com/users/12520768/tpandas"}, "edited": false, "score": 0, "creation_date": 1576160446, "post_id": 59293669, "comment_id": 104815432, "body": "i&#39;m glad I could help you !"}], "tags": [], "owner": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "is_accepted": true, "score": 0, "last_activity_date": 1576096481, "creation_date": 1576096481, "answer_id": 59293669, "question_id": 59293576, "link": "https://stackoverflow.com/questions/59293576/cant-figure-out-how-to-clear-nans-in-random-forest/59293669#59293669", "title": "Can&#39;t figure out how to clear NaNs in Random Forest", "body": "<p>From what I see in your code, you're only checking for <code>nan</code>, not <code>inf</code>. Probably there's a better way using <code>numpy</code>, but the <code>pandas</code> approach should work:</p>\n\n<pre><code>with pd.option_context('mode.use_inf_as_na', True):\n    pd.DataFrame(train_features).isnull().sum() #Will show you which columns have nan or inf values\n    pd.DataFrame(train_labels).isnull().sum()\n</code></pre>\n\n<p>With this you can be sure if there's <code>nan</code> or <code>inf</code> values. Then you could <code>fillna</code>.</p>\n"}], "owner": {"reputation": 61, "user_id": 12520768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/646329240f61f20727fef52dc592a747?s=128&d=identicon&r=PG&f=1", "display_name": "tpandas", "link": "https://stackoverflow.com/users/12520768/tpandas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 59293669, "answer_count": 1, "score": 1, "last_activity_date": 1576097602, "creation_date": 1576096081, "last_edit_date": 1576097602, "question_id": 59293576, "link": "https://stackoverflow.com/questions/59293576/cant-figure-out-how-to-clear-nans-in-random-forest", "title": "Can&#39;t figure out how to clear NaNs in Random Forest", "body": "<p>Getting a ValueError: Input contains NaN when I run the below code</p>\n\n<pre><code>from sklearn.ensemble import RandomForestRegressor\nrf = RandomForestRegressor(n_estimators = 1000, random_state = 42)\nrf.fit(train_features, train_labels);\n</code></pre>\n\n<p>I have ran the following and got results saying there were no NaNs or infinite values, but a different loop shows them under the train_features array</p>\n\n<pre><code>np.any(np.isnan(train_features))\n</code></pre>\n\n<p>I've ran below but it hasn't changed the error I'm receiving</p>\n\n<pre><code>train_features = np.nan_to_num(train_features)\ntrain_labels = np.nan_to_num(train_labels)\n</code></pre>\n\n<p>Please help! </p>\n\n<p>edit: adding the full relevant code: </p>\n\n<pre><code>features = pd.read_csv(x)\nlabels = np.array(features['Actuals'])\nfeatures = features.drop('Actuals', axis = 1)\nfeature_list = list(features.columns)\nfeatures = np.array(features)\n\nfrom sklearn.model_selection import train_test_split\ntrain_features, test_features, train_labels, test_labels = train_test_split(features, labels, test_size = 0.25, random_state = 42)\n\nfrom sklearn.ensemble import RandomForestRegressor\nrf = RandomForestRegressor(n_estimators = 1000, random_state = 42)\nrf.fit(train_features, train_labels);\n</code></pre>\n"}, {"tags": ["python", "c++"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1576205696, "post_id": 59293567, "comment_id": 104832425, "body": "What is <code>o</code>? I don&#39;t see enough information here to diagnose the problem."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1576205885, "post_id": 59293567, "comment_id": 104832469, "body": "There&#39;s stuff here that doesn&#39;t make sense, and stuff that&#39;s missing, and overall, it looks like you tried to simplify things (which is good) but didn&#39;t know how to do so properly (which is a skill you should try to learn), leaving us with something that only bears a vague resemblance to your code, and not in the ways it needs to. When building a simplified version of your code, the result needs to be <i>runnable</i> and needs to <i>reproduce the error when run</i>, without needing any hidden context."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1576206150, "post_id": 59293567, "comment_id": 104832526, "body": "Looking at what you posted on SourceForge, I suspect you may be on Python 2, where classes behave differently by default and 0-argument <code>super</code> isn&#39;t a thing. The code you posted on SourceForge used 0-argument <code>super</code>."}, {"owner": {"reputation": 149, "user_id": 10492521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8afa6fa7fe93d1e7ea1bf0d104c43c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Danny", "link": "https://stackoverflow.com/users/10492521/danny"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1576207383, "post_id": 59293567, "comment_id": 104832755, "body": "Hi @user2357112 supports Monica, I did put this question together a bit too haphazardly, sorry about that.  I was a bit more extensive in my other forum post, but I&#39;ve edited this question so my process should be more clear.  Additionally, I am using python 3.8, and am now making explicit calls to the parent class instead of using super().  Still no dice."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1576207565, "post_id": 59293567, "comment_id": 104832796, "body": "Well, the new version still isn&#39;t runnable, but it suggests its own entirely new set of problems. The module handling in what you&#39;ve posted makes no sense. It looks like you&#39;re running everything in the context of <code>__main__</code> instead of actually importing modules. Do you know you can import modules in the Python C API? <a href=\"https://docs.python.org/3.8/c-api/import.html\" rel=\"nofollow noreferrer\">docs.python.org/3.8/c-api/import.html</a>"}, {"owner": {"reputation": 149, "user_id": 10492521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8afa6fa7fe93d1e7ea1bf0d104c43c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Danny", "link": "https://stackoverflow.com/users/10492521/danny"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1576207965, "post_id": 59293567, "comment_id": 104832867, "body": "Yes, unfortunately, I can&#39;t duplicate too much of the code due to the proprietary nature of the source, so I can only give snippets that provide the gist.  I&#39;m thinking that my module handling might be a major problem, given that I didn&#39;t think there were any problems with running everything in the context of <b>main</b>.  Is this bad practice?  What is the alternative?  I&#39;m not really familiar with what the usage of PyImport_ImportModule is supposed to be, or how it differs from defining and instantiating classes in <b>main</b>."}, {"owner": {"reputation": 149, "user_id": 10492521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8afa6fa7fe93d1e7ea1bf0d104c43c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Danny", "link": "https://stackoverflow.com/users/10492521/danny"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1576208717, "post_id": 59293567, "comment_id": 104833007, "body": "Sorry @user2357112 supports Monica, forgot to tag you."}, {"owner": {"reputation": 149, "user_id": 10492521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8afa6fa7fe93d1e7ea1bf0d104c43c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Danny", "link": "https://stackoverflow.com/users/10492521/danny"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1576208828, "post_id": 59293567, "comment_id": 104833034, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/204162/discussion-between-danny-and-user2357112-supports-monica\">continue this discussion in chat</a>."}], "owner": {"reputation": 149, "user_id": 10492521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8afa6fa7fe93d1e7ea1bf0d104c43c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Danny", "link": "https://stackoverflow.com/users/10492521/danny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1576207772, "creation_date": 1576096042, "last_edit_date": 1576207772, "question_id": 59293567, "link": "https://stackoverflow.com/questions/59293567/why-isnt-inheritance-working-properly-when-embedding-python-in-a-c-applicatio", "title": "Why isn&#39;t inheritance working properly when embedding python in a C++ application?", "body": "<p>I'd asked this question <a href=\"https://sourceforge.net/p/pythonqt/discussion/631393/thread/862ff73f88/?limit=25#aaf7\" rel=\"nofollow noreferrer\">on another forum</a>, but apparently this issue is more generically python-related than I'd thought.  Weirdly enough, I haven't been able to find too many topics on this particular issue.</p>\n\n<p>Essentially, I have a base class in base.py:</p>\n\n<pre><code>class B:\n   def __init__(self):\n       ...\n   def func(self):\n       ...\n</code></pre>\n\n<p>And a child class in child.py:</p>\n\n<pre><code>from base import B\n\nclass C(B):\n   def __init__(self):\n       B.__init__(self)\n       ...\n   def func(self):\n       B.func(self)\n       ...\n</code></pre>\n\n<p>If I make these classes and call them purely through Python, everything works fine.  However, when I try to do so through the C API, C.func() fails to call B.func(). It's almost as if C.func() is ignoring the line where I call <code>B.func(self)</code> entirely.  </p>\n\n<p>I am defining these classes via the C API by loading the contents of base.py and child.py into strings. This is done via Qt through a loadFromFile routine, and I am confident that this is working correctly. I am then calling the code that I've loaded for each class through a function that wraps <code>PyRun_SimpleString</code>:</p>\n\n<pre><code>bool PythonAPI::runCode(const std::string&amp; code)\n{\n    int ran = PyRun_SimpleString(code.c_str());\n    if (ran &lt; 0) {\n        printErrors();\n        return false;\n    }\n    return true;\n}\n</code></pre>\n\n<p>So my routine to instantiate a Child instance and run a method if it is essentially:</p>\n\n<pre><code>// Initialize interpreter\nPy_Initialize();\n\n// Initialize main module\nPyObject* mainModule = PyImport_AddModule(\"__main__\");\n\n// Load in code frombase.py and child.py\nstd::string baseCode = loadFromFile(base.py);\nstd::string childCode = loadFromFile(child.py);\n\n// Define classes by running code\nrunCode(baseCode);\nrunCode(childCode);\n\n// Obtain Child class from python and instantiate\nPyObject* cls = PyObject_GetAttrString(mainModule, \"Child\");\nPyObject* instance= PyObject_CallObject(cls, argList);\n\n// Call routine of child instance\nPyObject* result = call(instance, func, NULL);\n\n</code></pre>\n\n<p>Is there any strangeness with how the API works that could cause this to be the case? My routine to call methods of a class instance (minus the error handling) looks like this:</p>\n\n<pre><code>PyObject * PythonAPI::call(PyObject * instance, const std::string&amp; methodName, PyObject * args)\n{\n    // Obtain pointer to function\n    PyObject* method = PyObject_GetAttrString(instance, methodName.c_str());\n\n    // Call function\n    PyObject* output = PyObject_CallObject(method, args);\n\n    // Decrement count for function, ignoring if it is null\n    Py_XDECREF(method);\n\n    return output;\n}\n</code></pre>\n\n<p>I'd like for users of my application to interface purely through Python, which is why I want to pack everything they would need into the class B, from which they could inherit. Thanks!</p>\n\n<p>Edit:  After much investigation, it seems that inheritance works just fine when class B and C are in the same file.  However, I need class B to be in its own file due to the constraints of the project, so I can't use this workaround.  I'm not sure why this would cause problems.</p>\n"}, {"tags": ["python", "selenium", "email", "bots"], "comments": [{"owner": {"reputation": 855, "user_id": 4744568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/125cdb7d43927756913b920de016f420?s=128&d=identicon&r=PG", "display_name": "pcalkins", "link": "https://stackoverflow.com/users/4744568/pcalkins"}, "edited": false, "score": 2, "creation_date": 1576096931, "post_id": 59293559, "comment_id": 104792155, "body": "you might consider using a webmail interface for this... (if you can)  That way you can still use the Selenium framework to check... run a loop that checks for date greater than the time you clicked the button to send confirmation and then checks for a (hopefully) unique subject line.  You can just catch no such element and re-run the method from the catch. (with a sanity count to determine if sending failed.) Hopefully the page you are testing also provides some feedback if the e-mail send fails or succeeds."}, {"owner": {"reputation": 98, "user_id": 5180819, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HpTnf5rxDzI/AAAAAAAAAAI/AAAAAAAAAK4/Sm06LfL3Gcg/photo.jpg?sz=128", "display_name": "drstuggels", "link": "https://stackoverflow.com/users/5180819/drstuggels"}, "reply_to_user": {"reputation": 855, "user_id": 4744568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/125cdb7d43927756913b920de016f420?s=128&d=identicon&r=PG", "display_name": "pcalkins", "link": "https://stackoverflow.com/users/4744568/pcalkins"}, "edited": false, "score": 0, "creation_date": 1576137529, "post_id": 59293559, "comment_id": 104803156, "body": "I have no idea where to begin coding. What libraries should I use? An you reffer me to any docs?"}, {"owner": {"reputation": 855, "user_id": 4744568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/125cdb7d43927756913b920de016f420?s=128&d=identicon&r=PG", "display_name": "pcalkins", "link": "https://stackoverflow.com/users/4744568/pcalkins"}, "edited": false, "score": 0, "creation_date": 1576174946, "post_id": 59293559, "comment_id": 104823426, "body": "Selenium is all you will need and you&#39;ll need to tailor it to fit each each site and webmail client.  I would avoid gmail, btw, as I think it will detect you as a bot and not allow you to login."}], "owner": {"reputation": 98, "user_id": 5180819, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HpTnf5rxDzI/AAAAAAAAAAI/AAAAAAAAAK4/Sm06LfL3Gcg/photo.jpg?sz=128", "display_name": "drstuggels", "link": "https://stackoverflow.com/users/5180819/drstuggels"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 227, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1576095993, "creation_date": 1576095993, "question_id": 59293559, "link": "https://stackoverflow.com/questions/59293559/how-to-check-for-a-confirmation-email-and-then-reading-it-in-python", "title": "How to check for a confirmation email and then reading it in python", "body": "<p>I want to check for new emails and then opening it when it arrives in my python script. I'm new to python. This would be a part of a bot that signs up and then clicks the confirmation link in the email. There is no need to check if the sender is right, because I am sure there will be no other emails coming. I know how to search for the link in the email and opening it. The problem is waiting for the email and when it arrives, continuing with the script. Thank you in advance.</p>\n\n<p>This is how my code looked like before. (Without the waiting)</p>\n\n<pre><code>import poplib\nimport re\nimport webbrowser\n\n\ndef getmail():\n    M = poplib.POP3(\"server\")\n    M.user(\"user\")\n    M.pass_(\"password\")\n\n    numMessages = len(M.list()[1])\n    whole = \"\"\n    for i in range(numMessages):\n        for j in M.retr(i+1)[1]:\n            whole += j\n\n    result = re.search(\"(?P&lt;url&gt;https?://[^\\s]+)\", whole).group(\"url\")\n    result = result[:-1]\n\n    chrome_path = 'open -a /Applications/Google\\ Chrome.app %s'\n    webbrowser.get(chrome_path).open(result)\n\n</code></pre>\n\n<p>I know this code is ugly and messy and probably stupid, so if you have any suggestions about that too, I would be thankfull.</p>\n"}, {"tags": ["python", "python-3.x", "exception"], "comments": [{"owner": {"reputation": 907, "user_id": 1558604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b97af9fb78006cf022f9e60b0d9b428?s=128&d=identicon&r=PG", "display_name": "user1558604", "link": "https://stackoverflow.com/users/1558604/user1558604"}, "edited": false, "score": 0, "creation_date": 1576096113, "post_id": 59293548, "comment_id": 104791833, "body": "The first one is closer to what you want.  Don&#39;t raise a second error, you want to reraise the same error. I think it would be `except ZeroDivisionError as err: raise err(&quot;Don&#39;t Do ...&quot;)"}, {"owner": {"reputation": 11919, "user_id": 9183344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7r5r.png?s=128&g=1", "display_name": "r.ook", "link": "https://stackoverflow.com/users/9183344/r-ook"}, "reply_to_user": {"reputation": 907, "user_id": 1558604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b97af9fb78006cf022f9e60b0d9b428?s=128&d=identicon&r=PG", "display_name": "user1558604", "link": "https://stackoverflow.com/users/1558604/user1558604"}, "edited": false, "score": 0, "creation_date": 1576096211, "post_id": 59293548, "comment_id": 104791866, "body": "As mentioned in my question, it doesn&#39;t meet my &quot;shortest traceback&quot; requirement.  Anything above the &quot;During handling...&quot; line is unnecessary and pollutes the output."}, {"owner": {"reputation": 907, "user_id": 1558604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b97af9fb78006cf022f9e60b0d9b428?s=128&d=identicon&r=PG", "display_name": "user1558604", "link": "https://stackoverflow.com/users/1558604/user1558604"}, "edited": false, "score": 0, "creation_date": 1576096248, "post_id": 59293548, "comment_id": 104791878, "body": "That is because you are returning the error rather than re raising it."}, {"owner": {"reputation": 11919, "user_id": 9183344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7r5r.png?s=128&g=1", "display_name": "r.ook", "link": "https://stackoverflow.com/users/9183344/r-ook"}, "reply_to_user": {"reputation": 907, "user_id": 1558604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b97af9fb78006cf022f9e60b0d9b428?s=128&d=identicon&r=PG", "display_name": "user1558604", "link": "https://stackoverflow.com/users/1558604/user1558604"}, "edited": false, "score": 0, "creation_date": 1576096325, "post_id": 59293548, "comment_id": 104791902, "body": "In my first attempt, I&#39;m &quot;re-raising&quot; it though? Unless you&#39;re talking about the second attempt, which I already said is close to what I want in behaviour but feels unpythonic in code."}, {"owner": {"reputation": 907, "user_id": 1558604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b97af9fb78006cf022f9e60b0d9b428?s=128&d=identicon&r=PG", "display_name": "user1558604", "link": "https://stackoverflow.com/users/1558604/user1558604"}, "edited": false, "score": 0, "creation_date": 1576096382, "post_id": 59293548, "comment_id": 104791922, "body": "no, you are raising a second exception, not the same exception."}, {"owner": {"reputation": 11919, "user_id": 9183344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7r5r.png?s=128&g=1", "display_name": "r.ook", "link": "https://stackoverflow.com/users/9183344/r-ook"}, "reply_to_user": {"reputation": 907, "user_id": 1558604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b97af9fb78006cf022f9e60b0d9b428?s=128&d=identicon&r=PG", "display_name": "user1558604", "link": "https://stackoverflow.com/users/1558604/user1558604"}, "edited": false, "score": 0, "creation_date": 1576096635, "post_id": 59293548, "comment_id": 104792036, "body": "Ah, I missed the <code>... as err: raise err(...)</code> part.  However, that doesn&#39;t seem to work.  It gives a <code>TypeError: &#39;ZeroDivisionError&#39; object is not callable</code>."}, {"owner": {"reputation": 907, "user_id": 1558604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b97af9fb78006cf022f9e60b0d9b428?s=128&d=identicon&r=PG", "display_name": "user1558604", "link": "https://stackoverflow.com/users/1558604/user1558604"}, "edited": false, "score": 0, "creation_date": 1576096744, "post_id": 59293548, "comment_id": 104792082, "body": "yeah, I realized that doesn&#39;t work after I commented. Not an expert on exceptions, but the form is something like that. Not quite sure"}], "answers": [{"tags": [], "owner": {"reputation": 6356, "user_id": 5030164, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/11b6c08b9d6554e51280244985e3022d?s=128&d=identicon&r=PG&f=1", "display_name": "modesitt", "link": "https://stackoverflow.com/users/5030164/modesitt"}, "is_accepted": false, "score": 2, "last_activity_date": 1576096379, "creation_date": 1576096379, "answer_id": 59293638, "question_id": 59293548, "link": "https://stackoverflow.com/questions/59293548/how-to-change-the-default-message-to-a-custom-message-in-an-exception/59293638#59293638", "title": "How to change the default message to a custom message in an Exception?", "body": "<p>This all seems quite unpythonic to me to begin with - but if it is really what you want why not raise <code>from None</code> in your first example in order not to get a larger traceback.</p>\n\n<pre><code>def func():\n    try:\n        1/0\n    except ZeroDivisionError:\n        raise ZeroDivisionError(\"Don't do that you numbnut!\") from None\n\n\nfunc()\n</code></pre>\n\n<p>Giving </p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/Users/dmodesitt/Dev/the.py\", line 9, in &lt;module&gt;\n    func()\n  File \"/Users/dmodesitt/Dev/the.py\", line 6, in func\n    raise ZeroDivisionError(\"Don't do that you numbnut!\") from None\nZeroDivisionError: Don't do that you numbnut!\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3671, "user_id": 2826937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmIdz.png?s=128&g=1", "display_name": "Alexandr Shurigin", "link": "https://stackoverflow.com/users/2826937/alexandr-shurigin"}, "is_accepted": false, "score": 2, "last_activity_date": 1576096441, "creation_date": 1576096441, "answer_id": 59293653, "question_id": 59293548, "link": "https://stackoverflow.com/questions/59293548/how-to-change-the-default-message-to-a-custom-message-in-an-exception/59293653#59293653", "title": "How to change the default message to a custom message in an Exception?", "body": "<p>This feature is called \"chained exceptions\" and was added in Python 3.</p>\n\n<p>This block</p>\n\n<pre><code>try:\n    1 / 0\nexcept ZeroDivisionError:\n    raise ZeroDivisionError(\"Don't do that you numbnut!\")\n\n&gt;&gt;&gt;&gt;\n\nTraceback (most recent call last):\n  File \"test123.py\", line 2, in &lt;module&gt;\n    1 / 0\nZeroDivisionError: division by zero\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"test123.py\", line 4, in &lt;module&gt;\n    raise ZeroDivisionError(\"Don't do that you numbnut!\")\nZeroDivisionError: Don't do that you numbnut!\n</code></pre>\n\n<p>Is similar to</p>\n\n<pre><code>try:\n    1 / 0\nexcept ZeroDivisionError as e:\n    raise ZeroDivisionError(\"Don't do that you numbnut!\") from e\n=&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\nraceback (most recent call last):\n  File \"test123.py\", line 2, in &lt;module&gt;\n    1 / 0\nZeroDivisionError: division by zero\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"test123.py\", line 4, in &lt;module&gt;\n    raise ZeroDivisionError(\"Don't do that you numbnut!\") from e\nZeroDivisionError: Don't do that you numbnut!\n</code></pre>\n\n<p>But you can disable exceptions chaining using <code>from None</code> statement.</p>\n\n<pre><code>try:\n    1 / 0\nexcept ZeroDivisionError:\n    raise ZeroDivisionError(\"Don't do that you numbnut!\") from None\n=&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\nTraceback (most recent call last):\n  File \"test123.py\", line 4, in &lt;module&gt;\n    raise ZeroDivisionError(\"Don't do that you numbnut!\") from None\nZeroDivisionError: Don't do that you numbnut!\n</code></pre>\n\n<p>More information about the feature at <a href=\"https://www.python.org/dev/peps/pep-3134/\" rel=\"nofollow noreferrer\">https://www.python.org/dev/peps/pep-3134/</a></p>\n"}, {"tags": [], "owner": {"reputation": 11919, "user_id": 9183344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7r5r.png?s=128&g=1", "display_name": "r.ook", "link": "https://stackoverflow.com/users/9183344/r-ook"}, "is_accepted": false, "score": 0, "last_activity_date": 1576245466, "creation_date": 1576245466, "answer_id": 59324026, "question_id": 59293548, "link": "https://stackoverflow.com/questions/59293548/how-to-change-the-default-message-to-a-custom-message-in-an-exception/59324026#59324026", "title": "How to change the default message to a custom message in an Exception?", "body": "<p>I was able to also use <code>exit(...)</code> to replicate very similar to what I want, but again it feels rather unpythonic:</p>\n\n<pre><code>def func():\n    try:\n        1/0\n    except ZeroDivisionError as err:\n        exit(f\"{err.__class__.__name__}: Don't do that you numbnut!\")\n</code></pre>\n\n<p>Result: </p>\n\n<pre><code>ZeroDivisionError: Don't do that you numbnut!\n\n[Done] exited with code=1 in 3.433 seconds\n</code></pre>\n\n<p>For the purpose of my script, I think this might be the simplest solution.  But from a wider stand point, I believe the other answers are better.</p>\n"}], "owner": {"reputation": 11919, "user_id": 9183344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7r5r.png?s=128&g=1", "display_name": "r.ook", "link": "https://stackoverflow.com/users/9183344/r-ook"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 399, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1576245466, "creation_date": 1576095957, "last_edit_date": 1576096259, "question_id": 59293548, "link": "https://stackoverflow.com/questions/59293548/how-to-change-the-default-message-to-a-custom-message-in-an-exception", "title": "How to change the default message to a custom message in an Exception?", "body": "<p>This might be a silly question, so I did some research on these questions:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/9157210/how-do-i-raise-the-same-exception-with-a-custom-message-in-python/29442282#29442282\">How do I raise the same Exception with a custom message in Python?</a><br>\n<a href=\"http://%20https://stackoverflow.com/questions/1319615/proper-way-to-declare-custom-exceptions-in-modern-python\" rel=\"nofollow noreferrer\">Proper way to declare custom exceptions in modern Python?</a></p>\n\n<p>But none of these are matches what I'm trying to do for my CLI script, namely:</p>\n\n<p>1.) If a certain <code>Exception</code> is raised, I want to re-raise the same <code>Exception</code>, with a tailored message instead of the default one.<br>\n2.) I <em>am not</em> looking to redefine a custom <code>Exception</code> type, just the same <code>Exception</code>.<br>\n3.) I <em>am not</em> looking to <code>print</code> a console text.  I want to actually <code>raise Exception</code> because I need the exit code to be as close as possible as if the original <code>Exception</code> was raised since another process relies on this code.<br>\n4.) I want the error to be as short as possible, straight and to the point.  A full trace back is not necessary.</p>\n\n<p>So for example, these are what I've tried:</p>\n\n<p><strong>Attempt 1:</strong></p>\n\n<pre><code>def func():    \n    try:\n        1/0\n    except ZeroDivisionError:\n        raise ZeroDivisionError(\"Don't do that you numbnut!\")\n</code></pre>\n\n<p><strong>Result 1:</strong></p>\n\n<pre><code>Traceback (most recent call last):\n  File \"c:\\Users\\Dude\\test.py\", line 3, in &lt;module&gt;\n    1/0\nZeroDivisionError: division by zero\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"c:\\Users\\Dude\\test.py\", line 5, in &lt;module&gt;\n    raise ZeroDivisionError(\"Don't do that you numbnut!\")\nZeroDivisionError: Don't do that you numbnut!\n\n[Done] exited with code=1 in 2.454 seconds\n</code></pre>\n\n<p>This meets my goal of #1, 2 and 3 are met, but the trace back is way too long... I don't need the original <code>Exception</code> at all, just the custom message.</p>\n\n<p><strong>Attempt 2:</strong></p>\n\n<pre><code>def catch():\n    try:\n        1/0\n        return None\n    except ZeroDivisionError:\n        return ZeroDivisionError(\"Don't do that you numbnut!\")\n\nerror = catch()\nif error:\n    raise error\n</code></pre>\n\n<p><strong>Result 2:</strong></p>\n\n<pre><code>Traceback (most recent call last):\n  File \"c:\\Users\\Dude\\test.py\", line 10, in &lt;module&gt;\n    raise error\nZeroDivisionError: Don't do that you numbnut!\n\n[Done] exited with code=1 in 2.458 seconds\n</code></pre>\n\n<p>This gets me very close to what I want and is what I'm doing, however it feels quite unpythonic and <code>pylint</code> complains about the <code>raise error</code> line:</p>\n\n<blockquote>\n  <p>Raising <code>NoneType</code> while only classes or instances are allowed\n  <code>pylint(raising-bad-type)</code></p>\n</blockquote>\n\n<p>I also tried the methods in my linked questions, but they are unsatisfactory to all of my requirements as well.  For the purpose of succinctness I have not included my attempts of those here.</p>\n\n<p><strong>My question is thus:</strong> is there a better, more obvious way to catch an <code>Exception</code> and re-raise it with a custom message that I'm simply missing?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 3891, "user_id": 4585713, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0163e6ba41d9dfd2c9d13c528c87e1f5?s=128&d=identicon&r=PG&f=1", "display_name": "PMende", "link": "https://stackoverflow.com/users/4585713/pmende"}, "edited": false, "score": 2, "creation_date": 1576096142, "post_id": 59293522, "comment_id": 104791842, "body": "<code>(rng == &quot;2019-11-06&quot;).astype(&quot;int&quot;)</code>?"}, {"owner": {"reputation": 237, "user_id": 429170, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/11d1aec74f460848ee5f5111826c2cf0?s=128&d=identicon&r=PG", "display_name": "MBguitarburst", "link": "https://stackoverflow.com/users/429170/mbguitarburst"}, "reply_to_user": {"reputation": 3891, "user_id": 4585713, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0163e6ba41d9dfd2c9d13c528c87e1f5?s=128&d=identicon&r=PG&f=1", "display_name": "PMende", "link": "https://stackoverflow.com/users/4585713/pmende"}, "edited": false, "score": 0, "creation_date": 1576097805, "post_id": 59293522, "comment_id": 104792520, "body": "This also works."}], "answers": [{"tags": [], "owner": {"reputation": 6356, "user_id": 5030164, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/11b6c08b9d6554e51280244985e3022d?s=128&d=identicon&r=PG&f=1", "display_name": "modesitt", "link": "https://stackoverflow.com/users/5030164/modesitt"}, "is_accepted": false, "score": 0, "last_activity_date": 1576095961, "creation_date": 1576095961, "answer_id": 59293550, "question_id": 59293522, "link": "https://stackoverflow.com/questions/59293522/pandas-evaluate-condition-and-convert-to-0-1-int/59293550#59293550", "title": "Pandas evaluate condition and convert to 0/1 int", "body": "<p>You can simply compare with <code>dt.datetime</code> objects.</p>\n\n<pre><code>import datetime as dt\n\nsplit = series &gt; dt.datetime(2019, 11, 6)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 1, "last_activity_date": 1576096139, "creation_date": 1576096139, "answer_id": 59293594, "question_id": 59293522, "link": "https://stackoverflow.com/questions/59293522/pandas-evaluate-condition-and-convert-to-0-1-int/59293594#59293594", "title": "Pandas evaluate condition and convert to 0/1 int", "body": "<p>Compare the index with your \"eval criteria\", then convert the bool result to an Int64Index:</p>\n\n<pre><code>pd.Int64Index(rng == '2019-11-06')\n# Int64Index([0, 0, 1, 0, 0, 0, 0, 0, 0], dtype='int64')\n</code></pre>\n"}], "owner": {"reputation": 237, "user_id": 429170, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/11d1aec74f460848ee5f5111826c2cf0?s=128&d=identicon&r=PG", "display_name": "MBguitarburst", "link": "https://stackoverflow.com/users/429170/mbguitarburst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 59293594, "answer_count": 2, "score": 1, "last_activity_date": 1576099505, "creation_date": 1576095843, "last_edit_date": 1576099505, "question_id": 59293522, "link": "https://stackoverflow.com/questions/59293522/pandas-evaluate-condition-and-convert-to-0-1-int", "title": "Pandas evaluate condition and convert to 0/1 int", "body": "<p>I'm trying to evaluate a dateTimeIndex to determine if a date is equivalent to a specific date and return a new series as a result containing the results of the conditional as 0/1.</p>\n\n<p>My sample in:</p>\n\n<pre><code>rng = pd.period_range('2019-11-04', '2019-11-12', freq='D',name=\"Active_Date\").to_timestamp()\n</code></pre>\n\n<p>out:</p>\n\n<pre><code>DatetimeIndex(['2019-11-04', '2019-11-05', '2019-11-06', '2019-11-07',\n           '2019-11-08', '2019-11-09', '2019-11-10', '2019-11-11',\n           '2019-11-12'],\n          dtype='datetime64[ns]', name='Active_Date', freq='D')\n</code></pre>\n\n<p>For example, if my eval criteria is '2019-11-06', I'm looking to return the following:</p>\n\n<pre><code>Int64Index([0,0,1,0,0,0,0,0,0],\n           dtype='int64', name='Active_Date')\n</code></pre>\n\n<p>Can someone point me in the right direction?</p>\n"}, {"tags": ["python", "tensorflow", "keras", "gpu"], "comments": [{"owner": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "edited": false, "score": 0, "creation_date": 1576102002, "post_id": 59293521, "comment_id": 104794113, "body": "Did you try <code>from tf.keras import backend as K</code>?"}, {"owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1576162922, "post_id": 59293521, "comment_id": 104816989, "body": "What problem do you have that it led you to import stuff directly from tensorflow_backend? That makes no sense, if tensorflow detects your GPU, so will Keras, don&#39;t mess with the internals of Keras."}, {"owner": {"reputation": 4947, "user_id": 4139143, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/J8cH3.png?s=128&g=1", "display_name": "PyRsquared", "link": "https://stackoverflow.com/users/4139143/pyrsquared"}, "reply_to_user": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1576176196, "post_id": 59293521, "comment_id": 104823963, "body": "@MatiasValdenegro It seems I am getting this error: <code>E tensorflow&#47;stream_executor&#47;cuda&#47;cuda_blas.cc:238] failed to create cublas handle: CUBLAS_STATUS_INTERNAL_ERROR</code>"}], "owner": {"reputation": 4947, "user_id": 4139143, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/J8cH3.png?s=128&g=1", "display_name": "PyRsquared", "link": "https://stackoverflow.com/users/4139143/pyrsquared"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 139, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1576095838, "creation_date": 1576095838, "question_id": 59293521, "link": "https://stackoverflow.com/questions/59293521/keras-backend-and-tensorflow-showing-conflicting-gpu-devices", "title": "Keras backend and tensorflow showing conflicting GPU devices", "body": "<p>I know there have been <a href=\"https://stackoverflow.com/questions/45068243/how-to-check-if-keras-tensorflow-backend-is-gpu-or-cpu-version\">multiple</a> different <a href=\"https://stackoverflow.com/questions/44544766/how-do-i-check-if-keras-is-using-gpu-version-of-tensorflow\">posts</a> regarding this matter, but it seems every time a new keras / tensorflow version is released, there's conflict with package versions and inevtibly the version I have doesn't use my GPU.</p>\n\n<p>I have a single conda environment where I have installed all my packages (there is nothing in the <code>base</code> environment to avoid package conflict)</p>\n\n<p>Packages:</p>\n\n<ul>\n<li>keras 2.3.1</li>\n<li>tensorflow-gpu 1.14.0</li>\n</ul>\n\n<p>and no other tensorflow / keras versions (although I do have related packages like <code>keras-applications</code> and <code>tensorboard</code>).</p>\n\n<p>When I try the following, I get conflicting results</p>\n\n<pre><code># picks up the GPU it seems\nfrom tensorflow.python.client import device_lib\nprint(device_lib.list_local_devices())\n&gt;&gt;&gt; [name: \"/device:CPU:0\"\ndevice_type: \"CPU\"\nmemory_limit: 268435456\nlocality {\n}\nincarnation: 4346857393168915334\n, name: \"/device:XLA_CPU:0\"\ndevice_type: \"XLA_CPU\"\nmemory_limit: 17179869184\nlocality {\n}\nincarnation: 15716071101553989809\nphysical_device_desc: \"device: XLA_CPU device\"\n, name: \"/device:XLA_GPU:0\"\ndevice_type: \"XLA_GPU\"\nmemory_limit: 17179869184\nlocality {\n}\nincarnation: 6257014534476475142\nphysical_device_desc: \"device: XLA_GPU device\"\n]\n\n# but then Keras doesn't pick up the GPU?\nfrom keras import backend as K\nK.tensorflow_backend._get_available_gpus()\n&gt;&gt;&gt; []\n</code></pre>\n\n<p>So tensorflow seems to pick up the GPU, but then Keras doesn't? This doesn't make sense, as Keras is using Tensorflow backend.</p>\n\n<p>Am I doing something wrong here? Why is TF picking up the GPU but Keras isn't? Will Keras still use the GPU even though the <code>_get_available_gpus()</code> method returns an empty list?</p>\n"}, {"tags": ["python", "datetime", "matplotlib", "histogram"], "comments": [{"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1576097070, "post_id": 59293473, "comment_id": 104792197, "body": "<code>matplotlib.dates.DateLocator()</code>?"}, {"owner": {"reputation": 35, "user_id": 11429735, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qzy3tfbQtuQ/AAAAAAAAAAI/AAAAAAAAABA/KcumJBvCK-U/photo.jpg?sz=128", "display_name": "Tong Liu", "link": "https://stackoverflow.com/users/11429735/tong-liu"}, "reply_to_user": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1576097754, "post_id": 59293473, "comment_id": 104792491, "body": "I will try. Still looking for answers, thank you!"}, {"owner": {"reputation": 29479, "user_id": 1356000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ef54c2101a4c23ea2441ce2b346ffb75?s=128&d=identicon&r=PG", "display_name": "Diziet Asahi", "link": "https://stackoverflow.com/users/1356000/diziet-asahi"}, "edited": false, "score": 0, "creation_date": 1576100798, "post_id": 59293473, "comment_id": 104793720, "body": "not an answer, but these do not look like unix_timestamps. <code>1575254280000</code> corresponds to sometime in the year 51887. Are you from the future?"}, {"owner": {"reputation": 35, "user_id": 11429735, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qzy3tfbQtuQ/AAAAAAAAAAI/AAAAAAAAABA/KcumJBvCK-U/photo.jpg?sz=128", "display_name": "Tong Liu", "link": "https://stackoverflow.com/users/11429735/tong-liu"}, "reply_to_user": {"reputation": 29479, "user_id": 1356000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ef54c2101a4c23ea2441ce2b346ffb75?s=128&d=identicon&r=PG", "display_name": "Diziet Asahi", "link": "https://stackoverflow.com/users/1356000/diziet-asahi"}, "edited": false, "score": 0, "creation_date": 1576112746, "post_id": 59293473, "comment_id": 104796849, "body": "@DizietAsahi Lol. Sorry, I forgot to mention that this is the unix_time in milliseconds."}], "answers": [{"tags": [], "owner": {"reputation": 29479, "user_id": 1356000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ef54c2101a4c23ea2441ce2b346ffb75?s=128&d=identicon&r=PG", "display_name": "Diziet Asahi", "link": "https://stackoverflow.com/users/1356000/diziet-asahi"}, "is_accepted": true, "score": 1, "last_activity_date": 1576103216, "creation_date": 1576103216, "answer_id": 59295070, "question_id": 59293473, "link": "https://stackoverflow.com/questions/59293473/how-to-make-hist2d-xaxis-ticks-as-datetime-format/59295070#59295070", "title": "How to make hist2d xaxis ticks as datetime format?", "body": "<p>My feeling is that you would need to use <code>numpy.histogram2d</code> to compute the histogram, then convert the edges in <code>datetime</code> format, and finally plot the histogram vs. the converted coordinates.</p>\n\n<pre><code># Test data\nN = 2*24*60\ndf = pd.DataFrame({'unix_time':pd.date_range(start='2018-02-01', freq='1min', periods=N).strftime('%s').astype(int),\n                   'value':np.random.normal(size=(N,))})\n\n# compute the 2D histogram using numpy\nH,xedges,yedges = np.histogram2d(df['unix_time'], df['value'], bins=[24,10])\n# convert the x-edges into datetime format\nto_datetime = np.vectorize(datetime.datetime.fromtimestamp)\nxedges_datetime = to_datetime(xedges)\n\n# plot the two cases side by side\nfig, (ax1, ax2) = plt.subplots(1, 2, figsize=(8,3))\nax1.hist2d(df['unix_time'],df['value'], bins=[24,10])\nax1.set_title('unix_time')\n\nax2.pcolor(xedges_datetime, yedges, H.T)\nax2.set_title('datetime')\n# pretty up the xaxis labels\nax2.xaxis.set_major_locator(loc)\nax2.xaxis.set_major_formatter(fmt)\n\n\nfig.autofmt_xdate()\nfig.tight_layout()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/LQ5Fy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LQ5Fy.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 35, "user_id": 11429735, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qzy3tfbQtuQ/AAAAAAAAAAI/AAAAAAAAABA/KcumJBvCK-U/photo.jpg?sz=128", "display_name": "Tong Liu", "link": "https://stackoverflow.com/users/11429735/tong-liu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "accepted_answer_id": 59295070, "answer_count": 1, "score": 0, "last_activity_date": 1576103216, "creation_date": 1576095625, "question_id": 59293473, "link": "https://stackoverflow.com/questions/59293473/how-to-make-hist2d-xaxis-ticks-as-datetime-format", "title": "How to make hist2d xaxis ticks as datetime format?", "body": "<p>I want to convert unixtime to datetime format to display the following data with hist2d.\nHowever, everytime I convert unixtime to datetime</p>\n\n<p>I got \"TypeError: ufunc 'isfinite' not supported for the input types, and the inputs could not be safely coerced to any supported types according to the casting rule ''safe''\"</p>\n\n<p>The data I want to plot:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ETEt5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ETEt5.png\" alt=\"The data I want to display\"></a></p>\n\n<p>This is what I plotted if I put unixtime as xsticks:</p>\n\n<p><a href=\"https://i.stack.imgur.com/bLREy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bLREy.png\" alt=\"This is what I plotted if I put unixtime as xsticks\"></a></p>\n\n<p>This is the plot supposed to be\n<a href=\"https://i.stack.imgur.com/sA64m.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sA64m.png\" alt=\"This is supposed to be\"></a></p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom matplotlib.colors import LinearSegmentedColormap\n\n# example data\nx = df_1['unix_time']\ny = df_1['bid_ask_spread']\n\n# Set up x_ticks\ntime_frame = np.linspace(1575254259187, 1575513459187, 73)\nx_ticks = []\nfor i in time_frame:\n    x_ticks.append(to_datetime(i))\n\n# make a custom colormap with transparency\nncolors = 256\ncolor_array = plt.get_cmap('YlOrRd')(range(ncolors))\ncolor_array[:, -1] = np.linspace(0, 1, ncolors)\ncmap = LinearSegmentedColormap.from_list(name='YlOrRd_alpha', colors=color_array)\n\nfig, ax1 = plt.subplots(1, 1, figsize=(16,9), dpi=80)\n\nax1.hist2d(x, y, bins=[71, 81], cmap=cmap, edgecolor='white')\n\n# ax1.set_xticks(x_ticks[::5])\nax1.set_ylim(bottom=0)\n\nplt.show()\n</code></pre>\n"}, {"tags": ["python", "tcp"], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 11374998, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-o3aAOKDsmpQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdIBjQw9PtbGgK4bnmg4ETXmAEOEA/mo/photo.jpg?sz=128", "display_name": "Jan Vodenka", "link": "https://stackoverflow.com/users/11374998/jan-vodenka"}, "edited": false, "score": 0, "creation_date": 1576098947, "post_id": 59293931, "comment_id": 104792957, "body": "Ahh, I did not read the function of <code>os.path.splitext()</code> properly. Thanks for reminding me!"}], "tags": [], "owner": {"reputation": 872, "user_id": 1705163, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/75de30ee00608f26eec979eaa14126fd?s=128&d=identicon&r=PG&f=1", "display_name": "gens", "link": "https://stackoverflow.com/users/1705163/gens"}, "is_accepted": true, "score": 1, "last_activity_date": 1576097716, "creation_date": 1576097716, "answer_id": 59293931, "question_id": 59293462, "link": "https://stackoverflow.com/questions/59293462/trying-to-write-script-that-would-download-all-subfolders-inside-folder/59293931#59293931", "title": "Trying to write script, that would download all subfolders inside folder", "body": "<p>To deal with filenames in a cross-platform way, you should use the <code>os</code> module.\nGetting the extension from a filename is supported by the <code>os.path.splitext</code> function:</p>\n\n<pre><code># '.file' extension\nfilepath = \"this/is/a.file\"\n_, ext = os.path.splitext(filepath)\nprint(len(ext))\n\n# No extension\nfilepath = \"this/is/afile\"\n_, ext = os.path.splitext(filepath)\nprint(len(ext))\n</code></pre>\n\n<p>will output:</p>\n\n<pre><code>5\n0\n</code></pre>\n\n<p><code>5</code> for the extension of <code>.file</code> and <code>0</code> for there not being an extension. Thus you can check if a filename has an extension with a function like:</p>\n\n<pre><code>def has_ext(filepath):\n    _, ext = os.path.splitext(filepath)\n    return len(ext) &gt; 0\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 11374998, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-o3aAOKDsmpQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdIBjQw9PtbGgK4bnmg4ETXmAEOEA/mo/photo.jpg?sz=128", "display_name": "Jan Vodenka", "link": "https://stackoverflow.com/users/11374998/jan-vodenka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "closed_date": 1576102855, "accepted_answer_id": 59293931, "answer_count": 1, "score": -1, "last_activity_date": 1576097716, "creation_date": 1576095574, "last_edit_date": 1576097070, "question_id": 59293462, "link": "https://stackoverflow.com/questions/59293462/trying-to-write-script-that-would-download-all-subfolders-inside-folder", "closed_reason": "Needs more focus", "title": "Trying to write script, that would download all subfolders inside folder", "body": "<p>so I'm here again with my handsome script, that should download data from <em>my</em> second computer using TCP sockets. I've got a couple of questions, that I was not able to find on google.</p>\n\n<p><strong>Question n.1:</strong>\nFirst of all, is there a way, to check if a string is ending without extension? I found, that I can use <code>.endswith()</code>, but it doesn't work the way I would like to, because I would have to define every extension that exists in the World, and that wouldn't be so practical.</p>\n\n<p><strong>EDIT: I just found the solution for that second question, right away when I was reading this post.</strong></p>\n"}, {"tags": ["python", "amazon-web-services", "aws-lambda", "python-asyncio"], "answers": [{"tags": [], "owner": {"reputation": 10420, "user_id": 299462, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/1239668b80debd03fef129775ff3f065?s=128&d=identicon&r=PG", "display_name": "Kannaiyan", "link": "https://stackoverflow.com/users/299462/kannaiyan"}, "is_accepted": false, "score": 1, "last_activity_date": 1576095974, "creation_date": 1576095974, "answer_id": 59293554, "question_id": 59293415, "link": "https://stackoverflow.com/questions/59293415/aws-lambda-with-python-asyncio-event-loop-closed-problem/59293554#59293554", "title": "AWS lambda with python asyncio. Event loop closed problem?", "body": "<p>Add this line of the top of the code,</p>\n\n<blockquote>\n  <p>asyncio.set_event_loop(asyncio.new_event_loop())</p>\n</blockquote>\n\n<p>so that it is global.</p>\n\n<p>Alternatively,</p>\n\n<p>Replace,</p>\n\n<blockquote>\n  <p>loop = asyncio.get_event_loop()</p>\n</blockquote>\n\n<p>with,</p>\n\n<blockquote>\n  <p>loop = asyncio.new_event_loop()</p>\n</blockquote>\n\n<p>It is happening since you already closed the loop. </p>\n\n<p>That should work.</p>\n"}, {"tags": [], "owner": {"reputation": 755, "user_id": 6922497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf7f44917e6e202fd8a99cc6380867a3?s=128&d=identicon&r=PG&f=1", "display_name": "ParkerD", "link": "https://stackoverflow.com/users/6922497/parkerd"}, "is_accepted": true, "score": 2, "last_activity_date": 1576170191, "last_edit_date": 1592644375, "creation_date": 1576170191, "answer_id": 59309521, "question_id": 59293415, "link": "https://stackoverflow.com/questions/59293415/aws-lambda-with-python-asyncio-event-loop-closed-problem/59309521#59309521", "title": "AWS lambda with python asyncio. Event loop closed problem?", "body": "<blockquote>\n<p>After all lambda is supposed to be <strong>stateless</strong></p>\n</blockquote>\n<p><strong>Your function</strong> is supposed to be stateless.</p>\n<p>From <a href=\"https://aws.amazon.com/lambda/faqs/\" rel=\"nofollow noreferrer\">https://aws.amazon.com/lambda/faqs/</a>:</p>\n<blockquote>\n<p><strong>Q: What is an AWS Lambda function?</strong></p>\n<p>...</p>\n<p>The code must be written in a \u201cstateless\u201d style i.e. it should assume there is no affinity to the underlying compute infrastructure.</p>\n<p>...</p>\n<p><strong>Q: Will AWS Lambda reuse function instances?</strong></p>\n<p>To improve performance, AWS Lambda may choose to retain an instance of your function and reuse it to serve a subsequent request, rather than creating a new copy. To learn more about how Lambda reuses function instances, visit our documentation. Your code should not assume that this will always happen.</p>\n</blockquote>\n<p>The current python instance is reused for performance reasons, but its reuse or non-reuse must never be relied on. So while AWS Lambda is not itself always stateless, your programming methodology should be. Hopefully that clears up your confusion as to why that is happening!</p>\n"}, {"comments": [{"owner": {"reputation": 696, "user_id": 9869695, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hxwPH.png?s=128&g=1", "display_name": "Arran Duff", "link": "https://stackoverflow.com/users/9869695/arran-duff"}, "edited": false, "score": 1, "creation_date": 1579252618, "post_id": 59784269, "comment_id": 105711873, "body": "Good answer. Although, unfortunately I am using python 3.6 - asyncio.run() isn&#39;t available until python 3.7"}, {"owner": {"reputation": 561, "user_id": 2470346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rkbr4.png?s=128&g=1", "display_name": "Anatolii Bivol", "link": "https://stackoverflow.com/users/2470346/anatolii-bivol"}, "reply_to_user": {"reputation": 696, "user_id": 9869695, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hxwPH.png?s=128&g=1", "display_name": "Arran Duff", "link": "https://stackoverflow.com/users/9869695/arran-duff"}, "edited": false, "score": 1, "creation_date": 1579253745, "post_id": 59784269, "comment_id": 105712425, "body": "@ArranDuff indeed. I edit my answer to reflect that."}], "tags": [], "owner": {"reputation": 561, "user_id": 2470346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rkbr4.png?s=128&g=1", "display_name": "Anatolii Bivol", "link": "https://stackoverflow.com/users/2470346/anatolii-bivol"}, "is_accepted": false, "score": 3, "last_activity_date": 1579253683, "last_edit_date": 1579253683, "creation_date": 1579252419, "answer_id": 59784269, "question_id": 59293415, "link": "https://stackoverflow.com/questions/59293415/aws-lambda-with-python-asyncio-event-loop-closed-problem/59784269#59784269", "title": "AWS lambda with python asyncio. Event loop closed problem?", "body": "<h3>Python 3.7+</h3>\n\n<p>You can use the higher level <code>asyncio.run()</code> that will take care of things. </p>\n\n<pre><code>def handler(event, context):\n    asyncio.run(main())\n\nasync def main():\n    # your async code here\n</code></pre>\n\n<p>This will close the loop at the end and open a new one one running lambda again. <code>.run()</code> is also recommended by asyncio maintainers.</p>\n"}], "owner": {"reputation": 696, "user_id": 9869695, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hxwPH.png?s=128&g=1", "display_name": "Arran Duff", "link": "https://stackoverflow.com/users/9869695/arran-duff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 904, "favorite_count": 0, "accepted_answer_id": 59309521, "answer_count": 3, "score": 1, "last_activity_date": 1579253683, "creation_date": 1576095395, "question_id": 59293415, "link": "https://stackoverflow.com/questions/59293415/aws-lambda-with-python-asyncio-event-loop-closed-problem", "title": "AWS lambda with python asyncio. Event loop closed problem?", "body": "<h2>Closing the event loop in aws lambda affects future lambda runs??</h2>\n\n<ul>\n<li><p>I have some aysncio python code running within an aws lambda service. The logic of the code is as follows</p>\n\n<pre><code>def lambda_handler(event,context):\n    loop = asyncio.get_event_loop()\n    # perform all operations with the loop\n    loop.close()\n    return results\n</code></pre></li>\n<li><p>If I run this once, it appears to work fine. However, if I rerun it immediately afterwards, I get an error saying <strong>Event loop closed</strong></p></li>\n<li>Why is this happening? Shouldn't each lambda run be independent of the last? After all lambda is supposed to be <strong>stateless</strong></li>\n</ul>\n"}, {"tags": ["python", "google-colaboratory", "torch"], "comments": [{"owner": {"reputation": 312, "user_id": 1905229, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c8e05170c62320345d0be15050ac693f?s=128&d=identicon&r=PG", "display_name": "krivar", "link": "https://stackoverflow.com/users/1905229/krivar"}, "edited": false, "score": 0, "creation_date": 1594818774, "post_id": 59293407, "comment_id": 111259628, "body": "did you ever find a solution?"}, {"owner": {"reputation": 25, "user_id": 11496531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c466a08899b68405600991fc4955725?s=128&d=identicon&r=PG&f=1", "display_name": "Tabriz", "link": "https://stackoverflow.com/users/11496531/tabriz"}, "reply_to_user": {"reputation": 312, "user_id": 1905229, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c8e05170c62320345d0be15050ac693f?s=128&d=identicon&r=PG", "display_name": "krivar", "link": "https://stackoverflow.com/users/1905229/krivar"}, "edited": false, "score": 0, "creation_date": 1597742203, "post_id": 59293407, "comment_id": 112226216, "body": "@krivar I posted it"}], "answers": [{"comments": [{"owner": {"reputation": 4777, "user_id": 5740428, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/955c329acc7388992f247b0b64c4e270?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Schultke", "link": "https://stackoverflow.com/users/5740428/jan-schultke"}, "edited": false, "score": 0, "creation_date": 1597747694, "post_id": 63465511, "comment_id": 112228762, "body": "Could you please explain what this code does and how it solves the problem?"}, {"owner": {"reputation": 25, "user_id": 11496531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c466a08899b68405600991fc4955725?s=128&d=identicon&r=PG&f=1", "display_name": "Tabriz", "link": "https://stackoverflow.com/users/11496531/tabriz"}, "reply_to_user": {"reputation": 4777, "user_id": 5740428, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/955c329acc7388992f247b0b64c4e270?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Schultke", "link": "https://stackoverflow.com/users/5740428/jan-schultke"}, "edited": false, "score": 0, "creation_date": 1597755515, "post_id": 63465511, "comment_id": 112232511, "body": "So in the root directory there are 2 text files &quot;train.txt&quot; and &quot;test.txt&quot; which was provided to split the data, structured in this way:  accordion/image_0001.jpg airplanes/image_0150.jpg   . &quot;filep&quot; above is path to those files and &quot;splitp&quot; is an argument that takes values &quot;train&quot; or &quot;test&quot;. Rest is reading those files and discarding &quot;BACKGROUND_Google&quot;"}, {"owner": {"reputation": 4777, "user_id": 5740428, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/955c329acc7388992f247b0b64c4e270?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Schultke", "link": "https://stackoverflow.com/users/5740428/jan-schultke"}, "edited": false, "score": 0, "creation_date": 1597756464, "post_id": 63465511, "comment_id": 112233054, "body": "It would be more helpful if you included the explanation in the answer itself where your code can be properly formatted etc."}], "tags": [], "owner": {"reputation": 25, "user_id": 11496531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c466a08899b68405600991fc4955725?s=128&d=identicon&r=PG&f=1", "display_name": "Tabriz", "link": "https://stackoverflow.com/users/11496531/tabriz"}, "is_accepted": false, "score": 0, "last_activity_date": 1597742179, "creation_date": 1597742179, "answer_id": 63465511, "question_id": 59293407, "link": "https://stackoverflow.com/questions/59293407/how-can-i-dismiss-some-classes-when-creating-dataset-in-pytorch/63465511#63465511", "title": "How can I dismiss some classes when creating dataset in pytorch?", "body": "<p>Here is sample code</p>\n<pre><code>filep= os.path.join(root, splitp)\n\nwith open(filep, 'r') as splitfile:\n  for line in splitfile:\n    textlabel=line.split('/')[0].rstrip()\n    if textlabel != 'BACKGROUND_Google':\n      self.labels.append(textlabel)\n      self.labels_idx.append(class_to_idx[textlabel])\n      self.images.append(pil_loader(os.path.join(root, line.rstrip())))\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 11496531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c466a08899b68405600991fc4955725?s=128&d=identicon&r=PG&f=1", "display_name": "Tabriz", "link": "https://stackoverflow.com/users/11496531/tabriz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1597742179, "creation_date": 1576095356, "last_edit_date": 1576095956, "question_id": 59293407, "link": "https://stackoverflow.com/questions/59293407/how-can-i-dismiss-some-classes-when-creating-dataset-in-pytorch", "title": "How can I dismiss some classes when creating dataset in pytorch?", "body": "<p>It is my first experience with PyTorch. I cloned the repository to google colab. There are some classes (image folders) in the repository that I want to dismiss (let's say folder cat). How can I achieve that? I do not want to simply remove that class from the directory.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>dataaddress = 'blah/blah' # address where all the classes resides\ntrain_dataset = torchvision.datasets.ImageFolder(dataaddress, transform=train_transform)\ntest_dataset = torchvision.datasets.ImageFolder(dataaddress, transform=eval_transform)\n\ntrain_indexes = [idx for idx in range(len(train_dataset)) if idx % 5] \ntest_indexes = [idx for idx in range(len(test_dataset)) if not idx % 5]\n\n\ntrain_dataset = Subset(train_dataset, train_indexes)\ntest_dataset = Subset(test_dataset, test_indexes)\n</code></pre>\n"}, {"tags": ["python", "scikit-learn", "artificial-intelligence", "decision-tree"], "comments": [{"owner": {"reputation": 339, "user_id": 9083843, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9c84VNHHk8Q/AAAAAAAAAAI/AAAAAAAAhCA/21kOJzD6Tv4/photo.jpg?sz=128", "display_name": "saravanan saminathan", "link": "https://stackoverflow.com/users/9083843/saravanan-saminathan"}, "edited": false, "score": 0, "creation_date": 1576114188, "post_id": 59293402, "comment_id": 104797146, "body": "Install all these packages with latest versionnumpy, scipy, joblib, scikit-learn, sklearn,cython by ignoring the cache(--no-cache-dir). It is due to package missing ,Sometimes due to low version"}], "answers": [{"tags": [], "owner": {"reputation": 979, "user_id": 6808714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d15b3cab88d9d5a4c25e71ba08a9af4a?s=128&d=identicon&r=PG", "display_name": "Mahrez BenHamad", "link": "https://stackoverflow.com/users/6808714/mahrez-benhamad"}, "is_accepted": true, "score": 1, "last_activity_date": 1576096484, "creation_date": 1576096484, "answer_id": 59293671, "question_id": 59293402, "link": "https://stackoverflow.com/questions/59293402/attributeerror-type-object-sklearn-tree-criterion-array-has-no-attribute/59293671#59293671", "title": "AttributeError: type object &#39;sklearn.tree._criterion.array&#39; has no attribute &#39;__reduce_cython__&#39;", "body": "<p>Try to update Cython :</p>\n\n<pre><code>pip install cython\n</code></pre>\n"}], "owner": {"reputation": 162, "user_id": 10498671, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GbYvCVR4zLw/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXHsJopbyrR_Dj2caXQS2wIC_cVEw/mo/photo.jpg?sz=128", "display_name": "Maede", "link": "https://stackoverflow.com/users/10498671/maede"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 701, "favorite_count": 0, "accepted_answer_id": 59293671, "answer_count": 1, "score": 1, "last_activity_date": 1576096484, "creation_date": 1576095329, "question_id": 59293402, "link": "https://stackoverflow.com/questions/59293402/attributeerror-type-object-sklearn-tree-criterion-array-has-no-attribute", "title": "AttributeError: type object &#39;sklearn.tree._criterion.array&#39; has no attribute &#39;__reduce_cython__&#39;", "body": "<p>I want to import \n<code>from sklearn.tree import DecisionTreeRegressor</code> in jupyter.\nbut when I run just the line contains above import, I got this error.</p>\n\n<pre><code>&lt;ipython-input-16-28b3e81cd98d&gt; in &lt;module&gt;\n----&gt; 1 from sklearn.tree import DecisionTreeRegressor\n\n~/.local/lib/python3.6/site-packages/sklearn/tree/__init__.py in &lt;module&gt;\n      4 \"\"\"\n      5 \n----&gt; 6 from ._classes import BaseDecisionTree\n      7 from ._classes import DecisionTreeClassifier\n      8 from ._classes import DecisionTreeRegressor\n\n~/.local/lib/python3.6/site-packages/sklearn/tree/_classes.py in &lt;module&gt;\n     38 from ..utils.validation import check_is_fitted\n     39 \n---&gt; 40 from ._criterion import Criterion\n     41 from ._splitter import Splitter\n     42 from ._tree import DepthFirstTreeBuilder\n\n~/.local/lib/python3.6/site-packages/sklearn/tree/_criterion.cpython-36m-x86_64-linux-gnu.so in init sklearn.tree._criterion()\n\nAttributeError: type object 'sklearn.tree._criterion.array' has no attribute '__reduce_cython__'\n</code></pre>\n\n<p>I tried to install scipy and update scikit-learn by conda but it didn't solved.</p>\n"}, {"tags": ["python", "scrapy"], "comments": [{"owner": {"reputation": 2916, "user_id": 939364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cceb4bd730bda5e8464b76de4d1d6dc5?s=128&d=identicon&r=PG", "display_name": "Gallaecio", "link": "https://stackoverflow.com/users/939364/gallaecio"}, "edited": false, "score": 0, "creation_date": 1576147532, "post_id": 59293394, "comment_id": 104808365, "body": "Could you clarify what you mean by \u201cBut that didn&#39;t work\u201d? Did you get an exception? Did you get <code>None</code>? Did you get a value that was unexpected? If so, what did you expect? What was the input?"}, {"owner": {"reputation": 1135, "user_id": 1860768, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eHx0y.jpg?s=128&g=1", "display_name": "Ann Kilzer", "link": "https://stackoverflow.com/users/1860768/ann-kilzer"}, "edited": false, "score": 0, "creation_date": 1576293578, "post_id": 59293394, "comment_id": 104862998, "body": "I notice you&#39;re missing a closing <code>&quot;</code> in your response.css statement."}], "answers": [{"tags": [], "owner": {"reputation": 666, "user_id": 12518779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ead743ab13e9bbadc841e4e12cf3957d?s=128&d=identicon&r=PG&f=1", "display_name": "maestro.inc", "link": "https://stackoverflow.com/users/12518779/maestro-inc"}, "is_accepted": false, "score": 0, "last_activity_date": 1576101466, "creation_date": 1576101466, "answer_id": 59294724, "question_id": 59293394, "link": "https://stackoverflow.com/questions/59293394/getting-a-list-of-multiple-elements-with-same-class-name-using-scrapy/59294724#59294724", "title": "Getting a list of multiple elements with same class name using Scrapy", "body": "<p>get the div first, by name, this will render a list type data structure</p>\n\n<pre><code>articles = response.css('div.name')\n</code></pre>\n\n<p>you can then loop through this list with </p>\n\n<pre><code>for article in articles:\n    article.css('.article-container::text').extract\n</code></pre>\n\n<p>which also means you should be able to use indexes on the list and also get and extract the text of the class if you so desire with the </p>\n\n<blockquote>\n  <p>.extract() function. exclude it if you do not want to extract</p>\n</blockquote>\n"}], "owner": {"reputation": 11, "user_id": 11511616, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--NZwvm4wdYA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdmY51-c1ukz734fcM9YGJyb_pGYw/mo/photo.jpg?sz=128", "display_name": "Bernardo Garc&#237;a", "link": "https://stackoverflow.com/users/11511616/bernardo-garc%c3%ada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 253, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1576308949, "creation_date": 1576095303, "last_edit_date": 1576308949, "question_id": 59293394, "link": "https://stackoverflow.com/questions/59293394/getting-a-list-of-multiple-elements-with-same-class-name-using-scrapy", "title": "Getting a list of multiple elements with same class name using Scrapy", "body": "<p>There's a website I want to scrape that has numerous divs with the same class name.</p>\n\n<p>For example, let's say this class name is <code>article-container</code>\nThere are 12 divs holding this class name in the site. I tried to retrieve them all like this:</p>\n\n<pre><code>articles = response.css('[class^=\"article-container]')\n</code></pre>\n\n<p>And then call them individually using something like:</p>\n\n<pre><code>print(article[2])\n</code></pre>\n\n<p>But that didn't work. What's the best approach to solve this?</p>\n"}, {"tags": ["python", "jupyter-notebook", "google-colaboratory"], "comments": [{"owner": {"reputation": 347, "user_id": 5952615, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ic2atvNhra0/AAAAAAAAAAI/AAAAAAAAOrM/gfHX8Aw8sJk/photo.jpg?sz=128", "display_name": "Rafael Neves", "link": "https://stackoverflow.com/users/5952615/rafael-neves"}, "edited": false, "score": 0, "creation_date": 1576095316, "post_id": 59293345, "comment_id": 104791506, "body": "can you give a reproducible example?"}], "answers": [{"tags": [], "owner": {"reputation": 347, "user_id": 5952615, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ic2atvNhra0/AAAAAAAAAAI/AAAAAAAAOrM/gfHX8Aw8sJk/photo.jpg?sz=128", "display_name": "Rafael Neves", "link": "https://stackoverflow.com/users/5952615/rafael-neves"}, "is_accepted": false, "score": 0, "last_activity_date": 1576095459, "creation_date": 1576095459, "answer_id": 59293427, "question_id": 59293345, "link": "https://stackoverflow.com/questions/59293345/how-to-find-the-amount-of-a-transition-from-each-row-in-a-column/59293427#59293427", "title": "How to find the amount of a transition from each row in a column?", "body": "<p>It would help if you gave a reproducible example, but something on the line of:</p>\n\n<p>import pandas as pd\nimport numpy as np</p>\n\n<pre><code>yourtable.groupby(['yourcolumA', 'yourcolumnB']).sum()\n</code></pre>\n\n<p>would do the job.</p>\n"}], "owner": {"reputation": 1, "user_id": 12520671, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6g0-bDeUpBc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reIFo551bqx6sj7Pus10avDnOF7Mw/photo.jpg?sz=128", "display_name": "Achmad Faiz Siraj", "link": "https://stackoverflow.com/users/12520671/achmad-faiz-siraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 18, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576095459, "creation_date": 1576095074, "question_id": 59293345, "link": "https://stackoverflow.com/questions/59293345/how-to-find-the-amount-of-a-transition-from-each-row-in-a-column", "title": "How to find the amount of a transition from each row in a column?", "body": "<p>I am currently analyzing a data in python from NBA stats which contains a data pretty much like <a href=\"https://i.stack.imgur.com/e6Jbv.png\" rel=\"nofollow noreferrer\">this</a></p>\n\n<p>The expected result would be something like:<br><br>\nMissed Shot -> Missed Shot = A, <br>\nMissed Shot -> Made Shot = B,<br>\nMade Shot -> Missed Shot = C,<br>\nMade Shot -> Made Shot =D <br></p>\n\n<p>With A, B, C,and D is the amount of each transition from the data. Is there any way to count the amount of A,B,C and D?</p>\n"}, {"tags": ["python", "python-3.x", "generator"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1576095544, "post_id": 59293333, "comment_id": 104791588, "body": "can you print <code>len(generators)</code> in your function?"}, {"owner": {"reputation": 495, "user_id": 4869792, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/97269adaf355d196b914c8c6215f2798?s=128&d=identicon&r=PG&f=1", "display_name": "lakier", "link": "https://stackoverflow.com/users/4869792/lakier"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1576096283, "post_id": 59293333, "comment_id": 104791890, "body": "It&#39;s <code>1</code>, why should it be different?"}], "answers": [{"comments": [{"owner": {"reputation": 495, "user_id": 4869792, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/97269adaf355d196b914c8c6215f2798?s=128&d=identicon&r=PG&f=1", "display_name": "lakier", "link": "https://stackoverflow.com/users/4869792/lakier"}, "edited": false, "score": 0, "creation_date": 1576095898, "post_id": 59293458, "comment_id": 104791733, "body": "Yes the <code>yield from</code> works. But why <code>return generators[0]</code> also works when there is no <code>elif...</code> part?"}], "tags": [], "owner": {"reputation": 53404, "user_id": 2096752, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/B8PLE.jpg?s=128&g=1", "display_name": "shx2", "link": "https://stackoverflow.com/users/2096752/shx2"}, "is_accepted": false, "score": 2, "last_activity_date": 1576095564, "creation_date": 1576095564, "answer_id": 59293458, "question_id": 59293333, "link": "https://stackoverflow.com/questions/59293333/generator-returned-from-function-completes-prematurely/59293458#59293458", "title": "Generator returned from function completes prematurely", "body": "<p>The problem is you're <em>returning</em> a generator, instead of iterating over it.</p>\n\n<p>Replace</p>\n\n<pre><code>return generators[0]\n</code></pre>\n\n<p>with</p>\n\n<pre><code>yield from generators[0]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 495, "user_id": 4869792, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/97269adaf355d196b914c8c6215f2798?s=128&d=identicon&r=PG&f=1", "display_name": "lakier", "link": "https://stackoverflow.com/users/4869792/lakier"}, "edited": false, "score": 0, "creation_date": 1576096233, "post_id": 59293466, "comment_id": 104791872, "body": "Thank you but I have the same comment, why cutting the elif part also makes it work ?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1576096391, "post_id": 59293466, "comment_id": 104791929, "body": "yes! python parser decides if a function is a generator or not by just parsing it, even if the statements aren&#39;t reached. This answer explains why (and provides a fix, like the other answer but at least this answer explains why :))"}, {"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 1, "creation_date": 1576096883, "post_id": 59293466, "comment_id": 104792134, "body": "If you cut the body of the <code>elif</code> block, you&#39;re cutting the only <code>yield</code> statement, so the function gets compiled as a normal function rather than a generator function."}], "tags": [], "owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "is_accepted": true, "score": 3, "last_activity_date": 1576096913, "last_edit_date": 1576096913, "creation_date": 1576095586, "answer_id": 59293466, "question_id": 59293333, "link": "https://stackoverflow.com/questions/59293333/generator-returned-from-function-completes-prematurely/59293466#59293466", "title": "Generator returned from function completes prematurely", "body": "<p>You can't (usefully) return a value from a function that also does a <code>yield</code> anywhere in its body (even if <code>return</code> and <code>yield</code>s occur in separate blocks of code that can never run during the same execution of the function). If you have a <code>yield</code> anywhere in the function, you are making a generator function rather than a normal one.</p>\n\n<p>A good fix for this is to <code>yield from</code> your lone generator if you're only given one:</p>\n\n<pre><code>def multiplex(generators):\n    if len(generators) == 1:\n        yield from generators[0] # because this is a generator function, we need to yield here\n    elif len(generators) &gt; 1:\n        ... # there's a yield in here causing the whole thing to be a generator function!\n</code></pre>\n"}], "owner": {"reputation": 495, "user_id": 4869792, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/97269adaf355d196b914c8c6215f2798?s=128&d=identicon&r=PG&f=1", "display_name": "lakier", "link": "https://stackoverflow.com/users/4869792/lakier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 59293466, "answer_count": 2, "score": 0, "last_activity_date": 1576096913, "creation_date": 1576095014, "question_id": 59293333, "link": "https://stackoverflow.com/questions/59293333/generator-returned-from-function-completes-prematurely", "title": "Generator returned from function completes prematurely", "body": "<p>I have following piece of code to multiplex blocking generators:</p>\n\n<pre><code>import datetime\nimport time\nimport queue\nimport threading\n\n\ndef blocking1():\n    while True:\n        time.sleep(1)\n        result = \"Block1: {}\".format(datetime.datetime.now())\n        yield result\n\n\ndef blocking2():\n    while True:\n        time.sleep(2)\n        result = \"Block2: {}\".format(datetime.datetime.now())\n        yield result\n\n\ndef multiplex(generators):\n    if len(generators) == 1:\n        return generators[0]\n    elif len(generators) &gt; 1:\n        q = queue.Queue()\n\n        def run_one(src):\n            for e in src: q.put(e)\n\n        def run_all():\n            threads = []\n            for src in generators:\n                t = threading.Thread(target=run_one, args=(src,))\n                t.start()\n                threads.append(t)\n            for t in threads: t.join()\n            q.put(StopIteration)\n\n        threading.Thread(target=run_all).start()\n        while True:\n            e = q.get()\n            if e is StopIteration:\n                return\n            yield e\n    else:\n        return []\n\n\nif __name__ == \"__main__\":\n    # tasks = [(\"map1: {}\".format(e) for e in blocking1()), (\"map2: {}\".format(e) for e in blocking2())]\n    tasks = [(\"map1: {}\".format(e) for e in blocking1())]\n    for e in multiplex(tasks):\n        print(e)\n\n\n</code></pre>\n\n<p>I wanted to be clever and in case there is only one generator, don't do any thread spawning. Just return this single generator (after all the types still match)</p>\n\n<p>However it doesn't work like that.<br>\nThe program immediately terminates (like this is empty generator)</p>\n\n<p>What's funny is that following works (the <code>map1...</code> output is displayed):</p>\n\n<pre><code>import datetime\nimport time\nimport queue\nimport threading\n\n\ndef blocking1():\n    while True:\n        time.sleep(1)\n        result = \"Block1: {}\".format(datetime.datetime.now())\n        yield result\n\n\ndef blocking2():\n    while True:\n        time.sleep(2)\n        result = \"Block2: {}\".format(datetime.datetime.now())\n        yield result\n\n\ndef multiplex(generators):\n    if len(generators) == 1:\n        return generators[0]\n    else:\n        return []\n\n\nif __name__ == \"__main__\":\n    # tasks = [(\"map1: {}\".format(e) for e in blocking1()), (\"map2: {}\".format(e) for e in blocking2())]\n    tasks = [(\"map1: {}\".format(e) for e in blocking1())]\n    for e in multiplex(tasks):\n        print(e)\n\n</code></pre>\n\n<p>Where the difference is only in removal of <code>elif</code> part...</p>\n\n<p>Could someone help me understand what is going on please?\nI'm using Python 3.5.3</p>\n"}, {"tags": ["python", "numpy", "matrix"], "comments": [{"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 1, "creation_date": 1576095287, "post_id": 59293328, "comment_id": 104791488, "body": "<code>def multivariate_lr(X,Y): return np.linalg.inv(X.T @ X) @ X.T @ Y</code>"}], "owner": {"reputation": 39, "user_id": 12518620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8594ffe18d6b0e2b312813ff850237fe?s=128&d=identicon&r=PG&f=1", "display_name": "drako", "link": "https://stackoverflow.com/users/12518620/drako"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1576094993, "creation_date": 1576094993, "question_id": 59293328, "link": "https://stackoverflow.com/questions/59293328/multivariate-function-for-two-matrix-arguments", "title": "Multivariate function for two matrix arguments", "body": "<p>I am busy practicing numpy and one of the questions, I got stuck at. This is the question:<br>\nDefine function <code>multivariate_lr</code> which implements multivariate linear regression. The function takes two arguments: a matrix MxN (M rows, N predictors), and matrix MxK (M rows, K targets). The function should return a matrix of coefficients NxK: so the kth column contains the vector of coefficients for the kth target.</p>\n\n<p>For this task you should not fit the intercept. The OLS estimator for multivariate linear regression with predictor matrix X and target matrix Y is given by the following formula defining the matrix of coefficients B:\n    $$\n    B = (X^T X)^{-1} X^T Y\n    $$\n    This is how the function should work:</p>\n\n<pre><code># Example input data\nX = numpy.array([[1, -2.9,  1.5], \n                 [1, -0.4,  2.8], \n                 [1, -4.2,  0.9], \n                 [1, -0.7,  2.6], \n                 [1, -1.5,  2.8], \n                 [1,  2.0,  3.6]])\nY = numpy.array([[1.6, -1.6, 1], \n                 [3.2, -3.2, 3],\n                 [5.2, -5.2, 5],\n                 [2.7, -2.7, 2],\n                 [4.3, -4.3, 4],\n                 [-2.3, 2.3, -2]])\ncoef = multivariate_lr(X, Y)\nprint(coef)\n\nExample output:\n[[-11.27451756  11.27451756 -10.79724219]\n [ -2.82477335   2.82477335  -2.63993926]\n [  4.26734863  -4.26734863   4.04619161]]\n</code></pre>\n\n<p>I tried using the model :\nfrom sklearn.linear_model import LinearRegression\nbut it did not work</p>\n\n<p>any help would be great</p>\n"}]