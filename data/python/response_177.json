[{"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 2, "creation_date": 1527725008, "post_id": 50614844, "comment_id": 88239586, "body": "As a side note, dynamically creating a bunch of variables like this is almost always a very bad idea, and doing it with <code>exec</code> instead of <code>globals</code> or <code>setattr</code> is an even worse idea. It&#39;s usually be much better to store everything in, e.g., a dict."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1527725465, "post_id": 50614844, "comment_id": 88239710, "body": "Also, notice that you&#39;re doing <code>path = os.path.join(folder1, filename)</code>, and then a few lines later doing <code>folder1 + filename</code> instead of just using <code>path</code> there."}], "answers": [{"comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1527725526, "post_id": 50614910, "comment_id": 88239723, "body": "First, this does the opposite of what the OP is asking for. Second, why use a list instead of a set when the only thing it&#39;s being used for is checking for membership?"}, {"owner": {"reputation": 3029, "user_id": 5430055, "user_type": "registered", "profile_image": "https://graph.facebook.com/904537752944900/picture?type=large", "display_name": "Ishara Madhawa", "link": "https://stackoverflow.com/users/5430055/ishara-madhawa"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1527725675, "post_id": 50614910, "comment_id": 88239760, "body": "What do you mean by this does the opposite? It doesn&#39;t matter it is list or set, it uses just for check duplicate file names."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1527725768, "post_id": 50614910, "comment_id": 88239780, "body": "&quot;a rule that if a file exists in folder2 than don&#39;t read the file with the same name from folder1&quot;. Your code will read the file in folder1, but then skip the one in folder2."}, {"owner": {"reputation": 3029, "user_id": 5430055, "user_type": "registered", "profile_image": "https://graph.facebook.com/904537752944900/picture?type=large", "display_name": "Ishara Madhawa", "link": "https://stackoverflow.com/users/5430055/ishara-madhawa"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1527725857, "post_id": 50614910, "comment_id": 88239802, "body": "Yes that is what OP asked for. He wants to avoid duplicate files."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1527726179, "post_id": 50614910, "comment_id": 88239861, "body": "The OP asked to not read the file with the same name from folder1, and only read the one in folder 2. Your code reads the file in folder1, but then doesn&#39;t read the one in folder2. That&#39;s not the same thing, it&#39;s the opposite."}, {"owner": {"reputation": 3029, "user_id": 5430055, "user_type": "registered", "profile_image": "https://graph.facebook.com/904537752944900/picture?type=large", "display_name": "Ishara Madhawa", "link": "https://stackoverflow.com/users/5430055/ishara-madhawa"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1527726445, "post_id": 50614910, "comment_id": 88239913, "body": "I think it is something OP should clarify, I understood it in the other way as &quot; if a file exists in folder2 then don&#39;t read the file&quot;. In any case I will modify the code then It will work either way."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1527726625, "post_id": 50614910, "comment_id": 88239950, "body": "What the OP wrote is perfectly clear. You can\u2019t just stop reading in the middle of the sentence and then complain that the half a sentence you read is ambiguous."}, {"owner": {"reputation": 1571, "user_id": 7692921, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5166b1f22d8a56de3e2918a271066460?s=128&d=identicon&r=PG&f=1", "display_name": "sprogissd", "link": "https://stackoverflow.com/users/7692921/sprogissd"}, "edited": false, "score": 0, "creation_date": 1527727683, "post_id": 50614910, "comment_id": 88240210, "body": "When I said &quot;with a rule that if a file exists in folder2 then don&#39;t read the file with the same name from folder1&quot;, I meant that if a file exists in folder2, use it and don&#39;t use the file with the same name from folder1."}, {"owner": {"reputation": 3029, "user_id": 5430055, "user_type": "registered", "profile_image": "https://graph.facebook.com/904537752944900/picture?type=large", "display_name": "Ishara Madhawa", "link": "https://stackoverflow.com/users/5430055/ishara-madhawa"}, "edited": false, "score": 0, "creation_date": 1527727750, "post_id": 50614910, "comment_id": 88240233, "body": "Yes, I understood now. This code goes along with your rule."}], "tags": [], "owner": {"reputation": 3029, "user_id": 5430055, "user_type": "registered", "profile_image": "https://graph.facebook.com/904537752944900/picture?type=large", "display_name": "Ishara Madhawa", "link": "https://stackoverflow.com/users/5430055/ishara-madhawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1527726470, "last_edit_date": 1527726470, "creation_date": 1527725118, "answer_id": 50614910, "question_id": 50614844, "link": "https://stackoverflow.com/questions/50614844/how-to-read-files-from-two-folders-and-avoid-duplicates-in-python/50614910#50614910", "title": "How to read files from two folders and avoid duplicates in Python", "body": "<p>You can try something like follows:</p>\n\n<pre><code>folders = ['../folder2/','../folder1/']\nchecked =[]\nfor folder in folders:\n    for filename in os.listdir(folder):\n        if filename not in checked:\n            checked.append(filename)\n            path = os.path.join(folder, filename)\n            if os.path.isdir(path):\n                continue\n            with open(folder + filename, 'r') as myfile:\n                data = myfile.read()\n            query_name = filename.replace(\".sql\", \"\")\n            exec (query_name + \" = data\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1571, "user_id": 7692921, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5166b1f22d8a56de3e2918a271066460?s=128&d=identicon&r=PG&f=1", "display_name": "sprogissd", "link": "https://stackoverflow.com/users/7692921/sprogissd"}, "edited": false, "score": 0, "creation_date": 1527726766, "post_id": 50614919, "comment_id": 88239981, "body": "If I keep the initial approach and use the first portion of your suggested code, won&#39;t I need to change line 6 of my initial code? <code>with open(folder1 + filename, &#39;r&#39;) as myfile:</code>"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 1571, "user_id": 7692921, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5166b1f22d8a56de3e2918a271066460?s=128&d=identicon&r=PG&f=1", "display_name": "sprogissd", "link": "https://stackoverflow.com/users/7692921/sprogissd"}, "edited": false, "score": 0, "creation_date": 1527726852, "post_id": 50614919, "comment_id": 88239996, "body": "@sprogissd More simply, just <code>open(path)</code>. As I commented on your question, you\u2019ve already used <code>os.join</code> to create that path, so why not just use the path instead of recreating the same string in a different way?"}, {"owner": {"reputation": 1571, "user_id": 7692921, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5166b1f22d8a56de3e2918a271066460?s=128&d=identicon&r=PG&f=1", "display_name": "sprogissd", "link": "https://stackoverflow.com/users/7692921/sprogissd"}, "edited": false, "score": 0, "creation_date": 1527727053, "post_id": 50614919, "comment_id": 88240047, "body": "So just <code>with open(path, &#39;r&#39;) as myfile:</code>?"}, {"owner": {"reputation": 1571, "user_id": 7692921, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5166b1f22d8a56de3e2918a271066460?s=128&d=identicon&r=PG&f=1", "display_name": "sprogissd", "link": "https://stackoverflow.com/users/7692921/sprogissd"}, "edited": false, "score": 0, "creation_date": 1527728213, "post_id": 50614919, "comment_id": 88240336, "body": "And I assume I should add this line of code before line 8: &#39;filename = path.split(&quot;/&quot;)[-1]. And replace both <code>os.join</code> with <code>os.path.join</code>. Am I correct?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 1571, "user_id": 7692921, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5166b1f22d8a56de3e2918a271066460?s=128&d=identicon&r=PG&f=1", "display_name": "sprogissd", "link": "https://stackoverflow.com/users/7692921/sprogissd"}, "edited": false, "score": 0, "creation_date": 1527728428, "post_id": 50614919, "comment_id": 88240371, "body": "@sprogissd I fixed the <code>os.path.join</code> (thanks for catching that). But meanwhile, you should probably use <code>os.path.split(path)</code> rather than <code>path.split(&#39;&#47;&#39;)</code>, but yeah, that will work. Or, if you prefer, you can store a pair of (path, file) values in the lists instead of just the path."}, {"owner": {"reputation": 1571, "user_id": 7692921, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5166b1f22d8a56de3e2918a271066460?s=128&d=identicon&r=PG&f=1", "display_name": "sprogissd", "link": "https://stackoverflow.com/users/7692921/sprogissd"}, "edited": false, "score": 0, "creation_date": 1527728801, "post_id": 50614919, "comment_id": 88240458, "body": "abarnert Thanks! Why is <code>os.path.split(path)</code> more preferable over <code>path.split(&#39;&#47;&#39;)</code>?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 1571, "user_id": 7692921, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5166b1f22d8a56de3e2918a271066460?s=128&d=identicon&r=PG&f=1", "display_name": "sprogissd", "link": "https://stackoverflow.com/users/7692921/sprogissd"}, "edited": false, "score": 0, "creation_date": 1527728990, "post_id": 50614919, "comment_id": 88240501, "body": "@sprogissd Imagine that you&#39;re later forced to use Windows for some reason (or you give your code to a friend who uses Windows), so now you have a path with backslashes instead of slashes. <code>os.path.split(path)</code> will still work. It&#39;s also conceptually a little clearer: it makes it obvious that what you&#39;re doing here is splitting a path, not splitting some other kind of slash-separated string like a URL or a US-formatted date\u2014although in this case things are simple enough that I doubt any reader would be confused. It&#39;s usually not a big deal, but it&#39;s still a habit worth building."}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": false, "score": 0, "last_activity_date": 1527728359, "last_edit_date": 1527728359, "creation_date": 1527725197, "answer_id": 50614919, "question_id": 50614844, "link": "https://stackoverflow.com/questions/50614844/how-to-read-files-from-two-folders-and-avoid-duplicates-in-python/50614919#50614919", "title": "How to read files from two folders and avoid duplicates in Python", "body": "<p>The answer to this is simple: Do two <code>listdir</code> calls, then skip over the files in folder1 that are also in folder2.</p>\n\n<p>One way to do this is with set operations: the set difference <code>a - b</code> means all elements in <code>a</code> that are not also in <code>b</code>, which is exactly what you want.</p>\n\n<pre><code>files1 = set(os.listdir(folder1))\nfiles2 = set(os.listdir(folder2))\nfiles1 -= files2\n\npaths1 = [os.path.join(folder1, file) for file in files1]\npaths2 = [os.path.join(folder2, file) for file in files2]\nfor path in paths1 + paths2:\n    if os.path.isdir(path):\n        # etc.\n</code></pre>\n\n<hr>\n\n<p>As a side note, dynamically creating a bunch of variables like this is almost always a very bad idea, and doing it with <code>exec</code> instead of <code>globals</code> or <code>setattr</code> is an even worse idea. It's usually be much better to store everything in, e.g., a dict. For example:</p>\n\n<pre><code>queries = {}\nfor path in paths1 + paths2:\n    if os.path.isdir(path):\n        continue\n    name = os.path.splitext(os.path.basename(path))[0]\n    with open(path) as f:\n        queries[name] = f.read()\n</code></pre>\n"}], "owner": {"reputation": 1571, "user_id": 7692921, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5166b1f22d8a56de3e2918a271066460?s=128&d=identicon&r=PG&f=1", "display_name": "sprogissd", "link": "https://stackoverflow.com/users/7692921/sprogissd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1527728359, "creation_date": 1527724574, "question_id": 50614844, "link": "https://stackoverflow.com/questions/50614844/how-to-read-files-from-two-folders-and-avoid-duplicates-in-python", "title": "How to read files from two folders and avoid duplicates in Python", "body": "<p>I have the following folders that I read SQL files from and save them as variables:</p>\n\n<pre><code>++folder1\n  -1.sql\n  -2.sql\n  -3.sql\n++folder2\n  -2.sql\n</code></pre>\n\n<p>The following code does the job well for a single folder. How I can modify this code to read not just from one folder but from two with a rule that if a file exists in folder2 than don't read the file with the same name from folder1?</p>\n\n<pre><code>folder1 = '../folder1/'\nfor filename in os.listdir(folder1):\n    path = os.path.join(folder1, filename)\n    if os.path.isdir(path):\n        continue\n    with open(folder1 + filename, 'r') as myfile:\n        data = myfile.read()\n    query_name = filename.replace(\".sql\", \"\")\n    exec (query_name + \" = data\")\n</code></pre>\n"}, {"tags": ["python", "data-science", "dask", "dask-distributed"], "answers": [{"comments": [{"owner": {"reputation": 21140, "user_id": 3821154, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/RYr9X.jpg?s=128&g=1", "display_name": "mdurant", "link": "https://stackoverflow.com/users/3821154/mdurant"}, "edited": false, "score": 1, "creation_date": 1527775131, "post_id": 50625421, "comment_id": 88262196, "body": "For such a small data-set, you will find that pandas does an excellent job, particularly with a calculation as quick and easy as <code>mean()</code>."}], "tags": [], "owner": {"reputation": 21140, "user_id": 3821154, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/RYr9X.jpg?s=128&g=1", "display_name": "mdurant", "link": "https://stackoverflow.com/users/3821154/mdurant"}, "is_accepted": true, "score": 3, "last_activity_date": 1527773038, "creation_date": 1527773038, "answer_id": 50625421, "question_id": 50614761, "link": "https://stackoverflow.com/questions/50614761/local-use-of-dask-to-client-or-not-to-client/50625421#50625421", "title": "Local use of dask: to Client() or not to Client()?", "body": "<p>Version (2) has two differences compared to version (1): the choice to use the distributed scheduler, and <code>persist</code>. These are separate factors. There is a lot of documentation about both: <a href=\"https://distributed.readthedocs.io/en/latest/quickstart.html\" rel=\"nofollow noreferrer\">https://distributed.readthedocs.io/en/latest/quickstart.html</a>, <a href=\"http://dask.pydata.org/en/latest/dataframe-performance.html#persist-intelligently\" rel=\"nofollow noreferrer\">http://dask.pydata.org/en/latest/dataframe-performance.html#persist-intelligently</a> , so this answer can be kept brief.</p>\n\n<p>1) The distributed scheduler is newer and smarter than the previous threaded and multiprocess schedulers. As the name suggests, it is able to use a cluster, but also works on a single machine. Although the latency when calling <code>.compute()</code> is generally higher, in many ways it is more efficient, has more advanced features such as real-time dynamic programming and more diagnostics such as the dashboard. When created with <code>Client()</code>, you by default get a number of processes equal to the number of cores, but you can choose the number of processes and threads, and get close to the original threads-only situation with <code>Client(processes=False)</code>.</p>\n\n<p>2) Persisting means evaluating a computation and storing it in memory, so that further computations are faster. You can also persist without the distributed client (<code>dask.persist</code>). It effectively offers to trade memory for performance because you don't need to re-evalute the computation each time you use it for anything that depends on it. In the case where you go on to perform only one computation on the intermediate, as in the example, it should make no difference to performance.</p>\n"}], "owner": {"reputation": 859, "user_id": 3768822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6afadb894f1fa76f89c7ce1ecd1be01?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/3768822/jonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1573, "favorite_count": 1, "accepted_answer_id": 50625421, "answer_count": 1, "score": 3, "last_activity_date": 1527773038, "creation_date": 1527723888, "question_id": 50614761, "link": "https://stackoverflow.com/questions/50614761/local-use-of-dask-to-client-or-not-to-client", "title": "Local use of dask: to Client() or not to Client()?", "body": "<p>I am trying to understand the use patterns for Dask on a local machine.</p>\n\n<p>Specifically,</p>\n\n<ul>\n<li>I have a dataset that fits in memory</li>\n<li>I'd like to do some pandas operations\n\n<ul>\n<li>groupby...</li>\n<li>date parsing</li>\n<li>etc.</li>\n</ul></li>\n</ul>\n\n<p>Pandas performs these operations via a single core and these operations are taking hours for me. I have 8 cores on my machine and, as such, I'd like to use Dask to parallelize these operations as best as possible.</p>\n\n<p>My question is as follows: What is the difference between the two way of doing this in Dask:</p>\n\n<pre><code>import pandas as pd\nfrom sklearn.datasets import load_iris\n\niris = load_iris()\n</code></pre>\n\n<p>(1)</p>\n\n<pre><code>import dask.dataframe as dd\n\ndf = dd.from_pandas(\n    pd.DataFrame(iris.data, columns=iris.feature_names),\n    npartitions=2\n)\n\ndf.mean().compute()\n</code></pre>\n\n<p>(2)</p>\n\n<pre><code>import dask.dataframe as dd\nfrom distributed import Client\n\nclient = Client()\n\ndf = client.persist(\n    dd.from_pandas(\n        pd.DataFrame(iris.data, columns=iris.feature_names),\n        npartitions=2\n    )\n)\n\ndf.mean().compute()\n</code></pre>\n\n<p>What is the benefit of one use pattern over the other? Why should I use one over the other?</p>\n"}, {"tags": ["python", "mysql", "sql"], "comments": [{"owner": {"reputation": 32469, "user_id": 1529673, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/O6MQS.jpg?s=128&g=1", "display_name": "Strawberry", "link": "https://stackoverflow.com/users/1529673/strawberry"}, "edited": false, "score": 0, "creation_date": 1527748272, "post_id": 50614758, "comment_id": 88245676, "body": "Which version of MySQL are you using?"}, {"owner": {"reputation": 191, "user_id": 9378561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f347e5b2e8527c2f5e417803a4a350c3?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Silvestri", "link": "https://stackoverflow.com/users/9378561/nick-silvestri"}, "reply_to_user": {"reputation": 32469, "user_id": 1529673, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/O6MQS.jpg?s=128&g=1", "display_name": "Strawberry", "link": "https://stackoverflow.com/users/1529673/strawberry"}, "edited": false, "score": 0, "creation_date": 1527784172, "post_id": 50614758, "comment_id": 88267692, "body": "@Strawberry 8.0.11"}], "answers": [{"tags": [], "owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "is_accepted": true, "score": 2, "last_activity_date": 1527724751, "creation_date": 1527724751, "answer_id": 50614867, "question_id": 50614758, "link": "https://stackoverflow.com/questions/50614758/creating-tables-in-mysql-based-on-the-names-of-the-columns-in-another-table/50614867#50614867", "title": "Creating tables in MySQL based on the names of the columns in another table", "body": "<p>You can create a table from a <code>SELECT</code> like:</p>\n\n<pre><code>CREATE TABLE &lt;other database name&gt;.&lt;column name&gt;\n             AS\n             SELECT &lt;column name&gt;\n                    FROM &lt;original database name&gt;.&lt;table name&gt;;\n</code></pre>\n\n<p>(Replace the <code>&lt;...&gt;</code> with your actual object names or extend it with other columns or a <code>WHERE</code> clause or ...)</p>\n\n<p>That will also insert the data from the query into the new table. And it's probably the fastest way.</p>\n\n<p>You could use dynamic SQL and information from the catalog (namely <a href=\"https://dev.mysql.com/doc/refman/8.0/en/columns-table.html\" rel=\"nofollow noreferrer\"><code>information_schema.columns</code></a>) to create the <code>CREATE</code> statements or create them manually, which is annoying but acceptable for 14 columns I guess.</p>\n"}, {"tags": [], "owner": {"reputation": 3036, "user_id": 5491375, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/acb34dbd1c452d932e5d116561d6ee26?s=128&d=identicon&r=PG&f=1", "display_name": "aydow", "link": "https://stackoverflow.com/users/5491375/aydow"}, "is_accepted": false, "score": 1, "last_activity_date": 1527724966, "creation_date": 1527724966, "answer_id": 50614897, "question_id": 50614758, "link": "https://stackoverflow.com/questions/50614758/creating-tables-in-mysql-based-on-the-names-of-the-columns-in-another-table/50614897#50614897", "title": "Creating tables in MySQL based on the names of the columns in another table", "body": "<p>When using scripts to talk to databases you want to minimise the number of messages that are sent as each message creates a further delay on your execution time. Currently, it looks as if you are sending (by your approximation) 133 million messages, and thus, slowing down your script 133 million times. A simple optimisation would be to parse your spreadsheet and split the data into the tables (either in memory or saving them to disk) and only then send the data to the new DB.</p>\n\n<p>As you hinted, it's much quicker to write an SQL script to redistribute the data.</p>\n"}], "owner": {"reputation": 191, "user_id": 9378561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f347e5b2e8527c2f5e417803a4a350c3?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Silvestri", "link": "https://stackoverflow.com/users/9378561/nick-silvestri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 0, "accepted_answer_id": 50614867, "answer_count": 2, "score": 0, "last_activity_date": 1527724966, "creation_date": 1527723875, "question_id": 50614758, "link": "https://stackoverflow.com/questions/50614758/creating-tables-in-mysql-based-on-the-names-of-the-columns-in-another-table", "title": "Creating tables in MySQL based on the names of the columns in another table", "body": "<p>I have a table with ~133M rows and 16 columns. I want to create 14 tables on another database on the same server for each of columns 3-16 (columns 1 and 2 are <code>`id`</code> and <code>`timestamp`</code> which will be in the final 14 tables as well but won't have their own table), where each table will have the name of the original column. Is this possible to do exclusively with an SQL script? It seems logical to me that this would be the preferred, and fastest way to do it.</p>\n\n<p>Currently, I have a Python script that \"works\" by parsing the CSV dump of the original table (testing with 50 rows), creating new tables, and adding the associated values, but it is very slow (I estimated almost 1 year to transfer all 133M rows, which is obviously not acceptable). This is my first time using SQL in any capacity, and I'm certain that my code can be sped up, but I'm not sure how because of my unfamiliarity with SQL. The big SQL string command in the middle was copied from some other code in our codebase. I've tried using transactions as seen below, but it didn't seem to have any significant effect on the speed.</p>\n\n<pre><code>import re\nimport mysql.connector\nimport time\n\n# option flags\ndebug = False  # prints out information during runtime\ntiming = True  # times the execution time of the program\n\n# save start time for timing. won't be used later if timing is false\nstart_time = time.time()\n\n# open file for reading\npath = 'test_vaisala_sql.csv'\nfile = open(path, 'r')\n\n# read in column values\ncolumn_str = file.readline().strip()\ncolumns = re.split(',vaisala_|,', column_str)  # parse columns with regex to remove commas and vasiala_\nif debug:\n    print(columns)\n\n# open connection to MySQL server\ncnx = mysql.connector.connect(user='root', password='&lt;redacted&gt;',\n                              host='127.0.0.1',\n                              database='measurements')\ncursor = cnx.cursor()\n\n# create the table in the MySQL database if it doesn't already exist\nfor i in range(2, len(columns)):\n    table_name = 'vaisala2_' + columns[i]\n    sql_command = \"CREATE TABLE IF NOT EXISTS \" + \\\n                  table_name + \"(`id` BIGINT(20) NOT NULL AUTO_INCREMENT, \" \\\n                               \"`timestamp` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, \" \\\n                               \"`milliseconds` BIGINT(20) NOT NULL DEFAULT '0', \" \\\n                               \"`value` varchar(255) DEFAULT NULL, \" \\\n                               \"PRIMARY KEY (`id`), \" \\\n                               \"UNIQUE KEY `milliseconds` (`milliseconds`)\" \\\n                               \"COMMENT 'Eliminates duplicate millisecond values', \" \\\n                               \"KEY `timestamp` (`timestamp`)) \" \\\n                               \"ENGINE=InnoDB DEFAULT CHARSET=utf8;\"\n\n    if debug:\n        print(\"Creating table\", table_name, \"in database\")\n\n    cursor.execute(sql_command)\n\n# read in rest of lines in CSV file\nfor line in file.readlines():\n    cursor.execute(\"START TRANSACTION;\")\n    line = line.strip()\n    values = re.split(',\"|\",|,', line)  # regex split along commas, or commas and quotes\n    if debug:\n        print(values)\n\n    # iterate of each data column. Starts at 2 to eliminate `id` and `timestamp`\n    for i in range(2, len(columns)):\n        table_name = \"vaisala2_\" + columns[i]\n        timestamp = values[1]\n\n        # translate timestamp back to epoch time\n        try:\n            pattern = '%Y-%m-%d %H:%M:%S'\n            epoch = int(time.mktime(time.strptime(timestamp, pattern)))\n            milliseconds = epoch * 1000  # convert seconds to ms\n        except ValueError:  # errors default to 0\n            milliseconds = 0\n\n        value = values[i]\n\n        # generate SQL command to insert data into destination table\n        sql_command = \"INSERT IGNORE INTO {} VALUES (NULL,'{}',{},'{}');\".format(table_name, timestamp,\n                                                                                 milliseconds, value)\n        if debug:\n            print(sql_command)\n\n        cursor.execute(sql_command)\ncnx.commit()  # commits changes in destination MySQL server\n\n# print total execution time\nif timing:\n    print(\"Completed in %s seconds\" % (time.time() - start_time))\n</code></pre>\n\n<p>This doesn't need to be incredibly optimized; it's perfectly acceptable if the machine has to run for a few days in order to do it. But 1 year is far too long.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 7907, "user_id": 9609447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9FDax.jpg?s=128&g=1", "display_name": "harvpan", "link": "https://stackoverflow.com/users/9609447/harvpan"}, "edited": false, "score": 0, "creation_date": 1527723869, "post_id": 50614741, "comment_id": 88239317, "body": "Can you post your expected output?"}, {"owner": {"reputation": 381, "user_id": 6526367, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/71213be47aa1020b264126fe29bef5bf?s=128&d=identicon&r=PG&f=1", "display_name": "S_Ymln", "link": "https://stackoverflow.com/users/6526367/s-ymln"}, "reply_to_user": {"reputation": 7907, "user_id": 9609447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9FDax.jpg?s=128&g=1", "display_name": "harvpan", "link": "https://stackoverflow.com/users/9609447/harvpan"}, "edited": false, "score": 0, "creation_date": 1527723920, "post_id": 50614741, "comment_id": 88239332, "body": "df1 is the expected output i&#39;m looking for"}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 1, "creation_date": 1527724050, "post_id": 50614741, "comment_id": 88239354, "body": "I&#39;m confused as to <i>why</i> that should be the desired output.  Yes there are quite a few ways to turn <code>df</code> into <code>df1</code>, but what is the rule you are following?"}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1527724094, "post_id": 50614741, "comment_id": 88239365, "body": "It looks like you are sorting by the number that each string describes and removing rows that are all <code>None</code>"}, {"owner": {"reputation": 381, "user_id": 6526367, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/71213be47aa1020b264126fe29bef5bf?s=128&d=identicon&r=PG&f=1", "display_name": "S_Ymln", "link": "https://stackoverflow.com/users/6526367/s-ymln"}, "edited": false, "score": 0, "creation_date": 1527724287, "post_id": 50614741, "comment_id": 88239403, "body": "There isn&#39;t any rule so as, I have taken a  database schema pivoted the schema with columns = table_name and values = column_name and I got None values for column_names for each table in a column, I just made theabove df for simplicity"}, {"owner": {"reputation": 7907, "user_id": 9609447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9FDax.jpg?s=128&g=1", "display_name": "harvpan", "link": "https://stackoverflow.com/users/9609447/harvpan"}, "edited": false, "score": 1, "creation_date": 1527724288, "post_id": 50614741, "comment_id": 88239404, "body": "<code>df.bfill().iloc[[0,-1]]</code>? @S_Ymln"}, {"owner": {"reputation": 381, "user_id": 6526367, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/71213be47aa1020b264126fe29bef5bf?s=128&d=identicon&r=PG&f=1", "display_name": "S_Ymln", "link": "https://stackoverflow.com/users/6526367/s-ymln"}, "reply_to_user": {"reputation": 7907, "user_id": 9609447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9FDax.jpg?s=128&g=1", "display_name": "harvpan", "link": "https://stackoverflow.com/users/9609447/harvpan"}, "edited": false, "score": 1, "creation_date": 1527724852, "post_id": 50614741, "comment_id": 88239544, "body": "@HarvIpan this might be helpful to achieve specifically for my df but i&#39;m looking for general purpose to work on bigger dataframe. Instead of suggesting what you said i can just simply create a Dataframe if my goal is to achieve that small piece"}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 3, "creation_date": 1527725298, "post_id": 50614741, "comment_id": 88239674, "body": "But you have not provided a general rule to follow.  Please read about how to create an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> before asking future questions, as you are more likely to find help."}, {"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 1, "creation_date": 1527728693, "post_id": 50614741, "comment_id": 88240438, "body": "Its really hard to help you without knowing what you want."}], "answers": [{"tags": [], "owner": {"reputation": 381, "user_id": 6526367, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/71213be47aa1020b264126fe29bef5bf?s=128&d=identicon&r=PG&f=1", "display_name": "S_Ymln", "link": "https://stackoverflow.com/users/6526367/s-ymln"}, "is_accepted": true, "score": 0, "last_activity_date": 1539028509, "last_edit_date": 1539028509, "creation_date": 1527731015, "answer_id": 50615496, "question_id": 50614741, "link": "https://stackoverflow.com/questions/50614741/create-a-dataframe-with-lists-of-different-sizes/50615496#50615496", "title": "Create a Dataframe with lists of different sizes", "body": "<p>Thanks Everyone. Sorry that I'm not clear. I just want to explore PANDAS more. I know this isn't going to be useful in any of the real world situations but i'm curious. Below is the way I'm able to achieve what I was looking for. Please let me know if there are any other efficient ways of achieving the same. </p>\n\n<pre><code>a= df['A'].dropna().unique()\nb= df['B'].dropna().unique()\nc= df['C'].dropna().unique()\ndf_abc = pd.DataFrame({'A' : dict(zip(range(len(a)),a)),\n                       'B': dict(zip(range(len(b)),b)),\n                       'C' :dict(zip(range(len(c)),c))\n                      })\ndf_abc\n\n    A   B   C\n0   one two three\n1   NaN NaN Four\n</code></pre>\n"}], "owner": {"reputation": 381, "user_id": 6526367, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/71213be47aa1020b264126fe29bef5bf?s=128&d=identicon&r=PG&f=1", "display_name": "S_Ymln", "link": "https://stackoverflow.com/users/6526367/s-ymln"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "closed_date": 1527768647, "accepted_answer_id": 50615496, "answer_count": 1, "score": -4, "last_activity_date": 1539029027, "creation_date": 1527723750, "last_edit_date": 1539029027, "question_id": 50614741, "link": "https://stackoverflow.com/questions/50614741/create-a-dataframe-with-lists-of-different-sizes", "closed_reason": "Needs details or clarity", "title": "Create a Dataframe with lists of different sizes", "body": "<p>Changed to explain it better:</p>\n\n<pre><code>A = ['one',None,None,None]\nB = [None,'two',None,None],\nC = [None,None,'three','Four']\n</code></pre>\n\n<p>If i create a Dataframe I would get:</p>\n\n<pre><code>df = pd.DataFrame({'A': A,\n                   'B':B,\n                   'C':C\n})\ndf     \n       A    B       C\n0   one     None    None\n1   None    two     None\n2   None    None    three\n3   None    None    Four\n</code></pre>\n\n<p>But I want a DataFrame similar to the Expected Output below\nExpected Output:</p>\n\n<pre><code>       A    B       C\n0   one     two     three\n1   None    None    four\n</code></pre>\n"}, {"tags": ["python", "visual-foxpro", "dbf"], "comments": [{"owner": {"reputation": 15219, "user_id": 894977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f18198ad9bdf73fa1d90956f7028254?s=128&d=identicon&r=PG", "display_name": "Cetin Basoz", "link": "https://stackoverflow.com/users/894977/cetin-basoz"}, "edited": false, "score": 1, "creation_date": 1527751815, "post_id": 50614727, "comment_id": 88247523, "body": ".idx and .cdx are not the same, and keeps multiple index &quot;tags&quot; within. When the .cdx has the same name as the .dbf file, then it is called &quot;structural index&quot; and automatically updated, used when needed. If your dbf is not doing the things low level then you wouldn&#39;t really need to do something special. Otherwise maybe you can find a library that connects via OleDb (also check Dabo dev, the developers are from VFP community)."}], "answers": [{"tags": [], "owner": {"reputation": 51632, "user_id": 208880, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/de311342220232e618cb27c9936ab9bf?s=128&d=identicon&r=PG", "display_name": "Ethan Furman", "link": "https://stackoverflow.com/users/208880/ethan-furman"}, "is_accepted": true, "score": 2, "last_activity_date": 1527725981, "creation_date": 1527725981, "answer_id": 50615001, "question_id": 50614727, "link": "https://stackoverflow.com/questions/50614727/python-dbf-how-to-associate-a-cdx-index-with-a-dbf-table/50615001#50615001", "title": "Python DBF: How to associate a .cdx index with a .dbf table", "body": "<p><code>.idx</code> and <code>.cdx</code> are not the same, and <code>dbf</code> cannot currently read <code>.cdx</code> files.</p>\n\n<p>If you need the table to be sorted, you can create an in-memory index:</p>\n\n<pre><code>my_index = table.create_index(key=lambda r: r.table_key)\n</code></pre>\n\n<p>You can also create a full-fledged function:</p>\n\n<pre><code>def active(rec):\n    # do not show deleted records\n    if is_deleted(rec):\n        return DoNotIndex\n    return rec.table_key\n\nmy_index = table.create_index(active)\n</code></pre>\n\n<p>and then loop through the index instead of the table:</p>\n\n<pre><code>for record in my_index:\n    ...\n</code></pre>\n"}], "owner": {"reputation": 2763, "user_id": 5065796, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/mxc8r.gif?s=128&g=1", "display_name": "Lorem Ipsum", "link": "https://stackoverflow.com/users/5065796/lorem-ipsum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 988, "favorite_count": 0, "accepted_answer_id": 50615001, "answer_count": 1, "score": 3, "last_activity_date": 1527725981, "creation_date": 1527723652, "question_id": 50614727, "link": "https://stackoverflow.com/questions/50614727/python-dbf-how-to-associate-a-cdx-index-with-a-dbf-table", "title": "Python DBF: How to associate a .cdx index with a .dbf table", "body": "<p>I have been given an ambiguous task of automating a data extraction from various Visual FoxPro tables.</p>\n\n<p>There are several pairs of <code>.DBF</code> and <code>.CDX</code> files.  With the Python <a href=\"https://pypi.org/project/dbf/\" rel=\"nofollow noreferrer\">dbf</a> package, I seem to be able to work with them.  I have two files, an <code>ABC.DBF</code> and an <code>ABC.CDX</code>.  I can load the table file using,</p>\n\n<pre><code>&gt;&gt;&gt; import dbf\n&gt;&gt;&gt; table = dbf.Table('ABC.DBF')\n&gt;&gt;&gt; print(table[3])\n  0 - table_key : '\\x00\\x00\\x04'\n  1 - field_1   : -1\n  2 - field_2   : 0\n  3 - field_3   : 34\n  4 - field_ 4  : 2\n  ...\n\n&gt;&gt;&gt;\n</code></pre>\n\n<p>It's my understanding that <code>.cdx</code> files are indexes.  I suspect that corresponds to the <code>table_key</code> field.  <a href=\"https://stackoverflow.com/questions/37470111/writing-to-foxpro-dbfs-maintaining-indexfiles-idx-or-cdx-with-python\">According to the author</a>, <code>dbf</code> can read indexes:</p>\n\n<blockquote>\n  <p>I can read IDX files, but not update them. My day job changed and dbf\n  files are not a large part of the new one. \u2013 Ethan Furman May 26 '16\n  at 21:05</p>\n</blockquote>\n\n<p>Reading is all I need to do.  I see that four classes exist, <code>Idx</code>, <code>Index</code>, <code>IndexFile</code>, and <code>IndexLocation</code>.  These seem like good candidates.  </p>\n\n<p>The <code>Idx</code> class reads in a table and filename, which is promising.</p>\n\n<pre><code>&gt;&gt;&gt; index = dbf.Idx(table, 'ABC.CDX')\n</code></pre>\n\n<p>I'm not sure how to make use of this object, though.  I see that it has some generators, <code>backward</code> and <code>forward</code>, but when I try to use them I get an error</p>\n\n<pre><code>&gt;&gt;&gt; print(list(index.forward()))\ndbf.NotFoundError: 'Record 67305477 is not in table ABC.DBF'\n</code></pre>\n\n<p>How does one associate the <code>.cdx</code> index file to the <code>.dbf</code> table?</p>\n"}, {"tags": ["python", "python-3.x", "tornado", "macos-high-sierra", "pyspider"], "answers": [{"tags": [], "owner": {"reputation": 20703, "user_id": 2805033, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TasHL.jpg?s=128&g=1", "display_name": "Ben Darnell", "link": "https://stackoverflow.com/users/2805033/ben-darnell"}, "is_accepted": false, "score": 0, "last_activity_date": 1527816387, "creation_date": 1527816387, "answer_id": 50634883, "question_id": 50614711, "link": "https://stackoverflow.com/questions/50614711/getting-importerror-when-starting-pyspider-in-terminal/50634883#50634883", "title": "Getting ImportError when starting pyspider in Terminal", "body": "<p>The class is named <code>CurlAsyncHTTPClient</code>, not <code>Curlasync_HTTPClient</code>. It looks like someone did a search-and-replace for <code>async</code> to <code>async_</code> because in Python 3.7 <code>async</code> is a reserved word (but it doesn't matter here because it's in the middle of a class name). </p>\n"}], "owner": {"reputation": 43, "user_id": 9786842, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "HneryInSH", "link": "https://stackoverflow.com/users/9786842/hneryinsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 136, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1527816387, "creation_date": 1527723528, "last_edit_date": 1527728424, "question_id": 50614711, "link": "https://stackoverflow.com/questions/50614711/getting-importerror-when-starting-pyspider-in-terminal", "title": "Getting ImportError when starting pyspider in Terminal", "body": "<p>When I start pyspider by <code>pyspider all</code> in terminal, it pops out an <code>ImportError</code>:</p>\n\n<pre><code>ImportError: cannot import name 'Curlasync_HTTPClient' from 'tornado.curl_httpclient'\n(/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/tornado/curl_httpclient.py)\n</code></pre>\n\n<p>There's some other texts in the error message, but I think this is the main cause.</p>\n\n<p>I tried to reinstall tornado by reinstalling tornado(4.5.3), but it does not seem to be helpful. So any of you guys ever experienced the same problem? Any tips will be appreciated. Thanks in advance.</p>\n\n<p>Config Info:<br>\nmacOS High Sierra 10.13.4<br>\npython version:3.7.0a2<br>\ntornado version:4.5.3  </p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1527723634, "post_id": 50614701, "comment_id": 88239260, "body": "Just put the code after the for-loop?"}, {"owner": {"reputation": 1568, "user_id": 8793975, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/086643c7f3fafe914727c51882e974bc?s=128&d=identicon&r=PG&f=1", "display_name": "enumaris", "link": "https://stackoverflow.com/users/8793975/enumaris"}, "edited": false, "score": 3, "creation_date": 1527723760, "post_id": 50614701, "comment_id": 88239290, "body": "make sure you un-indent the block of code you want executed after the for-loop. Python uses indentation to figure out what blocks of code belong to a loop or not."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1527727438, "post_id": 50614701, "comment_id": 88240140, "body": "FYI, when the condition in <code>elif</code> is the exact opposite of the <code>if</code> condition, you should use <code>else:</code>."}], "answers": [{"tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 0, "last_activity_date": 1527723584, "creation_date": 1527723584, "answer_id": 50614719, "question_id": 50614701, "link": "https://stackoverflow.com/questions/50614701/python-for-loop-finish/50614719#50614719", "title": "python for loop finish", "body": "<p>Just put it outside the body of the for loop:</p>\n\n<pre><code>for x in y:\n    ... indented block does stuff with x on each loop ...\n... dedented code (outside loop body) run once after loop is finished ...\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 9873084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2791e327085aaf1aae90347fb22252bc?s=128&d=identicon&r=PG&f=1", "display_name": "X-x", "link": "https://stackoverflow.com/users/9873084/x-x"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1454, "favorite_count": 0, "accepted_answer_id": 50614719, "answer_count": 1, "score": 0, "last_activity_date": 1527723584, "creation_date": 1527723456, "last_edit_date": 1527723558, "question_id": 50614701, "link": "https://stackoverflow.com/questions/50614701/python-for-loop-finish", "title": "python for loop finish", "body": "<p>i'm self learning python through out online courses but i ran into a problem .</p>\n\n<blockquote>\n  <p>for loop</p>\n</blockquote>\n\n<p>how do i tell python to do something after the for loops is finished ?</p>\n\n<p>for example :</p>\n\n<pre><code>def mixer(g):\nprint(g)\n\ndef printer(h):\n    print(\"end\")\n\nX = input (\"words :  \") \nvar2 = \"\"\nvar1 = X.split()\n\n\nfor y in var1:\n    if len(y) &gt; 5:\n        y.upper()\n        var2 += y.upper() + \" \"\n        mixer(var2)\n    elif len(y)  &lt;= 5:\n        y.lower()\n        var2 += y.lower() + \" \"\n        mixer(var2)\n</code></pre>\n\n<p>that's what i'm trying to do after for loop is done , i want to call a function after the loop , how can u do this ? ## >>> this method didn't work</p>\n\n<pre><code>    elif y == False:\n        print(\"false\")\n        printer(var2)\n</code></pre>\n"}, {"tags": ["python", "discord.py"], "comments": [{"owner": {"reputation": 6861, "user_id": 1594286, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1c31013ccab64b0efbc9b18236d80ac1?s=128&d=identicon&r=PG", "display_name": "Shadow", "link": "https://stackoverflow.com/users/1594286/shadow"}, "edited": false, "score": 0, "creation_date": 1527723352, "post_id": 50614682, "comment_id": 88239196, "body": "Please include all of your imports so we can tell which libraries you are using."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9605336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a9d9d5af04ad1b17ed2d55476b19537?s=128&d=identicon&r=PG", "display_name": "Web Coder", "link": "https://stackoverflow.com/users/9605336/web-coder"}, "edited": false, "score": 0, "creation_date": 1527723886, "post_id": 50614710, "comment_id": 88239322, "body": "Thank you so much! I wouldn&#39;t have figured that out, to be honest."}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "reply_to_user": {"reputation": 11, "user_id": 9605336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a9d9d5af04ad1b17ed2d55476b19537?s=128&d=identicon&r=PG", "display_name": "Web Coder", "link": "https://stackoverflow.com/users/9605336/web-coder"}, "edited": false, "score": 2, "creation_date": 1527723941, "post_id": 50614710, "comment_id": 88239339, "body": "@WebCoder You&#39;re using version 0.16, but the <a href=\"https://discordpy.readthedocs.io/en/rewrite/index.html\" rel=\"nofollow noreferrer\">1.0 documentation includes documentation for the commands extension</a>, most of which you can use for both versions.  It&#39;s worth reading."}], "tags": [], "owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "is_accepted": true, "score": 0, "last_activity_date": 1527723513, "creation_date": 1527723513, "answer_id": 50614710, "question_id": 50614682, "link": "https://stackoverflow.com/questions/50614682/how-do-i-add-arguments-to-a-discord-py-command/50614710#50614710", "title": "How do I add arguments to a discord.py command?", "body": "<p>You would pass that argument in the function definition, along with a <a href=\"https://discordpy.readthedocs.io/en/rewrite/ext/commands/commands.html#converters\" rel=\"nofollow noreferrer\">converter</a> that lets <code>discord.py</code> know what type you want that value converted to.</p>\n\n<pre><code>@bot.command(pass_context=True)\nasync def weather(ctx, index: int):\n    weather = Weather(unit=Unit.CELSIUS)\n    location = weather.lookup_by_location('toronto')\n    forecasts = location.forecast\n\n    embed = (discord.Embed(title=\"-=-__THE WEATHER__-=-\", color=0x15dbc7))\n    embed.add_field(name=\"Clouds\", value=forecasts[index].text, inline=False) \n    embed.add_field(name=\"Date\", value=forecasts[index].date, inline=False)\n    embed.add_field(name=\"High\", value=forecasts[index].high, inline=False)\n    embed.add_field(name=\"Low\", value=forecasts[index].low, inline=False)\n    await bot.say(embed=embed)\n</code></pre>\n\n<p>You would invoke this from Discord with something like <code>!weather 3</code></p>\n"}], "owner": {"reputation": 11, "user_id": 9605336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a9d9d5af04ad1b17ed2d55476b19537?s=128&d=identicon&r=PG", "display_name": "Web Coder", "link": "https://stackoverflow.com/users/9605336/web-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4448, "favorite_count": 0, "accepted_answer_id": 50614710, "answer_count": 1, "score": 1, "last_activity_date": 1527855422, "creation_date": 1527723231, "last_edit_date": 1527855422, "question_id": 50614682, "link": "https://stackoverflow.com/questions/50614682/how-do-i-add-arguments-to-a-discord-py-command", "title": "How do I add arguments to a discord.py command?", "body": "<p>The code I have is:</p>\n\n<pre><code>weather = Weather(unit=Unit.CELSIUS)\nlocation = weather.lookup_by_location('toronto')\nforecasts = location.forecast\n\nembed = (discord.Embed(title=\"-=-__THE WEATHER__-=-\", color=0x15dbc7))\nembed.add_field(name=\"Clouds\", value=forecasts[0].text, inline=False) \nembed.add_field(name=\"Date\", value=forecasts[0].date, inline=False)\nembed.add_field(name=\"High\", value=forecasts[0].high, inline=False)\nembed.add_field(name=\"Low\", value=forecasts[0].low, inline=False)\nawait bot.say(embed=embed)\n</code></pre>\n\n<p>How do I make it replace 0 with a variable which is put after the command?\nThe code I have which identifies the command is</p>\n\n<pre><code>@bot.command(pass_context=True)\nasync def weather(ctx)\n</code></pre>\n\n<p>The imports Im using are:</p>\n\n<pre><code>import discord\nfrom discord.ext import commands\nfrom discord.ext.commands import Bot\nimport asyncio\nimport random\nimport weather\nfrom weather import Weather, Unit\n</code></pre>\n"}, {"tags": ["python", "twitter", "rate-limiting", "sttwitterapi"], "comments": [{"owner": {"reputation": 309, "user_id": 4053890, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh5.googleusercontent.com/-5Hhkb4vraSk/AAAAAAAAAAI/AAAAAAAAEHQ/YMlFdNBUJDo/photo.jpg?sz=128", "display_name": "Emil Lykke Jensen", "link": "https://stackoverflow.com/users/4053890/emil-lykke-jensen"}, "edited": false, "score": 0, "creation_date": 1527761580, "post_id": 50614671, "comment_id": 88253388, "body": "Got the same problem!"}, {"owner": {"reputation": 7873, "user_id": 2849346, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/f6T7B.jpg?s=128&g=1", "display_name": "MWiesner", "link": "https://stackoverflow.com/users/2849346/mwiesner"}, "edited": false, "score": 0, "creation_date": 1527767713, "post_id": 50614671, "comment_id": 88257170, "body": "Same problem here in an application relying on Twitter4J. Worked fine before the GDPR-related changes went live."}, {"owner": {"reputation": 8279, "user_id": 262478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1526dcb784188b422544c6344ef223c2?s=128&d=identicon&r=PG", "display_name": "Andy Piper", "link": "https://stackoverflow.com/users/262478/andy-piper"}, "edited": false, "score": 0, "creation_date": 1527771081, "post_id": 50614671, "comment_id": 88259413, "body": "This is not related to GDPR. The one API change that related to that was that timezone values are now null in the majority of user objects, and that went live 7 days ago per <a href=\"https://twittercommunity.com/t/upcoming-changes-to-the-developer-platform/104603/4\" rel=\"nofollow noreferrer\">twittercommunity.com/t/&hellip;</a> - this issue is more recent."}], "answers": [{"comments": [{"owner": {"reputation": 7873, "user_id": 2849346, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/f6T7B.jpg?s=128&g=1", "display_name": "MWiesner", "link": "https://stackoverflow.com/users/2849346/mwiesner"}, "edited": false, "score": 1, "creation_date": 1527767906, "post_id": 50622346, "comment_id": 88257317, "body": "I can confirm this &quot;issue&quot; with obtaining &quot;RateLimitStatus&quot; for a Java/Twitter4J application. It&#39;s blocking/confusing many devs atm as apps are failing fast due to this weird behaviour."}, {"owner": {"reputation": 8279, "user_id": 262478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1526dcb784188b422544c6344ef223c2?s=128&d=identicon&r=PG", "display_name": "Andy Piper", "link": "https://stackoverflow.com/users/262478/andy-piper"}, "reply_to_user": {"reputation": 7873, "user_id": 2849346, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/f6T7B.jpg?s=128&g=1", "display_name": "MWiesner", "link": "https://stackoverflow.com/users/2849346/mwiesner"}, "edited": false, "score": 0, "creation_date": 1527770988, "post_id": 50622346, "comment_id": 88259336, "body": "There&#39;s more on this on the Twitter developer forum while we investigate. <a href=\"https://twittercommunity.com/t/application-rate-limit-status-broken/106429\" rel=\"nofollow noreferrer\">twittercommunity.com/t/application-rate-limit-status-broken/&zwnj;&#8203;&hellip;</a>"}, {"owner": {"reputation": 4948, "user_id": 1011513, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/719f59c47685e016d42c59b0e265d621?s=128&d=identicon&r=PG", "display_name": "hackartist", "link": "https://stackoverflow.com/users/1011513/hackartist"}, "edited": false, "score": 2, "creation_date": 1527804196, "post_id": 50622346, "comment_id": 88277114, "body": "I see that it appears to be fixed now. Thank you for the fast response to let me know that I wasn&#39;t doing something wrong and thank you for prioritizing it internally"}], "tags": [], "owner": {"reputation": 8279, "user_id": 262478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1526dcb784188b422544c6344ef223c2?s=128&d=identicon&r=PG", "display_name": "Andy Piper", "link": "https://stackoverflow.com/users/262478/andy-piper"}, "is_accepted": true, "score": 2, "last_activity_date": 1527763123, "creation_date": 1527763123, "answer_id": 50622346, "question_id": 50614671, "link": "https://stackoverflow.com/questions/50614671/twitter-api-in-python-gdpr-update/50622346#50622346", "title": "Twitter API in python GDPR update", "body": "<p>Looks like an issue. Investigating internally. In the meantime, I suggest using the <code>x-rate-limit</code> HTTP headers to track your limits (note that these are only valid with GET requests, and only for standard API endpoints). Note that this is nothing to do with any GDPR related update to the API.</p>\n"}], "owner": {"reputation": 4948, "user_id": 1011513, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/719f59c47685e016d42c59b0e265d621?s=128&d=identicon&r=PG", "display_name": "hackartist", "link": "https://stackoverflow.com/users/1011513/hackartist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 1, "accepted_answer_id": 50622346, "answer_count": 1, "score": 5, "last_activity_date": 1527766393, "creation_date": 1527723132, "last_edit_date": 1527723679, "question_id": 50614671, "link": "https://stackoverflow.com/questions/50614671/twitter-api-in-python-gdpr-update", "title": "Twitter API in python GDPR update", "body": "<p>A few days ago twitter updated some aspects of their API because of the GDPR changes. Starting today some of my applications have been breaking in a very odd way which I didn't expect would be affected by the GDPR changes.  Maybe it has nothing to do with these changes but it is mysterious timing since they changed the API a few days ago and now I'm breaking.  I am getting nothing back from the rate limit end point like I used to even 2-3 days ago.</p>\n\n<p>I am using python and the twitter-application-only-auth==0.3.3 library and specifically I can log in and create client (so my tokens and permissions are still good) but when I do </p>\n\n<pre><code>client = Client(twitter_consumer_key, twitter_consumer_secret)\nurl = \"https://api.twitter.com/1.1/application/rate_limit_status.json?resources=help,users,search,statuses\"\nprint client.request( url)\n</code></pre>\n\n<p>I get back</p>\n\n<pre><code>{u'rate_limit_context': {u'application': u'AZljARxCJ6b4rPtCGJIuk4O'}, u'resources': {}}\n</code></pre>\n\n<p>Where resources is empty.  I can't see how many API calls I have remaining for each end point and this is causing problems in my app. I don't see anything saying this endpoint is supposed to change: <a href=\"https://developer.twitter.com/en/docs/developer-utilities/rate-limit-status/api-reference/get-application-rate_limit_status.html\" rel=\"noreferrer\">https://developer.twitter.com/en/docs/developer-utilities/rate-limit-status/api-reference/get-application-rate_limit_status.html</a>  </p>\n\n<p>I can make other calls just fine. For example </p>\n\n<pre><code>client.request(\"https://api.twitter.com/1.1/users/lookup.json?screen_name=twitter\")\n</code></pre>\n\n<p>works as expected and returns me data.... anyone else having this issue around the rate limit api endpoint? Am I doing something wrong?</p>\n"}, {"tags": ["python", "django", "logging", "airbrake"], "owner": {"reputation": 34200, "user_id": 995862, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d5efb6c1054808f7a79aaefbc64cce76?s=128&d=identicon&r=PG", "display_name": "Kurt Peek", "link": "https://stackoverflow.com/users/995862/kurt-peek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1527723071, "creation_date": 1527723071, "question_id": 50614664, "link": "https://stackoverflow.com/questions/50614664/how-to-use-airbrakes-pybrake-django-integration", "title": "How to use Airbrake&#39;s pybrake Django integration?", "body": "<p>I'm trying to apply the Django integration steps described for <a href=\"https://github.com/airbrake/pybrake\" rel=\"nofollow noreferrer\"><code>pybrake</code></a>, a Python exception notifier for Airbrake. The Django project contains several apps, one of which is called <code>lucy_web</code>. In my setttings, I've defined the <code>AIRBRAKE</code> setting like so:</p>\n\n<pre><code>AIRBRAKE = dict(\n    project_id=os.getenv('AIRBRAKE_API_KEY'),\n    project_key=os.getenv('AIRBRAKE_PROJECT_ID'),\n    environment=os.getenv('AIRBRAKE_ENVIRONMENT', default='production'),\n    root_directory=os.path.dirname(os.getcwd()))\n</code></pre>\n\n<p>The <code>LOGGING</code> setting is:</p>\n\n<pre><code>LOGGING = {\n    'version': 1,\n    'disable_existing_loggers': False,\n    'filters': {\n        'require_debug_true': {\n            '()': 'django.utils.log.RequireDebugTrue',\n        }\n    },\n    'handlers': {\n        'console': {\n            'level': os.environ.get('LOG_LEVEL', 'ERROR'),\n            'filters': ['require_debug_true'],\n            'class': 'logging.StreamHandler',\n        },\n        'airbrake': {\n            'level': 'ERROR',\n            'class': 'pybrake.LoggingHandler',\n        }\n    },\n    'loggers': {\n        'django.db.backends': {\n            'level': os.environ.get('LOG_LEVEL', 'ERROR'),\n            'handlers': ['console'],\n        },\n        'lucy_web': {\n            'handlers': ['airbrake'],\n            'level': 'ERROR',\n            'propagate': True,\n        }\n    }\n}\n</code></pre>\n\n<p>Note that I've replaced the key <code>'app'</code> in the README by <code>'lucy_web'</code>, the name of one of the apps in the project.</p>\n\n<p>Now, as I understand from Python's logging documentation (<a href=\"https://docs.python.org/3/library/logging.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/logging.html</a>), any <code>Logger</code> object with a name like <code>'lucy_web.foo.bar'</code> should propagate to the <code>'lucy_web'</code> logger and get handled by its handler, which is defined above to be the <code>pybrake.LoggingHandler</code>.</p>\n\n<p>To test this, I tried the following test in <code>lucy_web/tests/test_airbrake.py</code>:</p>\n\n<pre><code>import os\nimport logging\nimport pybrake\nfrom django.test import SimpleTestCase\n\nlogger = logging.getLogger(__name__)\n\n\nclass AirbrakeTest(SimpleTestCase):\n    def test_1(self):\n        notifier = pybrake.Notifier(\n            project_id=os.getenv('AIRBRAKE_PROJECT_ID'),\n            project_key=os.getenv('AIRBRAKE_PROJECT_KEY'),\n            environment='production',\n            root_directory=os.path.dirname(os.getcwd()))\n\n        try:\n            raise ValueError(\"Hello\")\n        except Exception as err:\n            notifier.notify(err)\n\n    def test_2(self):\n        logger.error(\"Foobar\")\n</code></pre>\n\n<p>The first test is a more 'verbose' approach in which a <code>pybrake.Notifier</code> is instantiated directly. This succeeds in sending an error to Airbrake, as seen from our Airbrake dashboard:</p>\n\n<p><a href=\"https://i.stack.imgur.com/pRCee.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pRCee.png\" alt=\"enter image description here\"></a></p>\n\n<p>However, the second test, which relies on the logging integration, doesn't appear to send any notification to Airbrake. Is this not supposed to be how it is supposed to work?</p>\n"}, {"tags": ["python", "tensorflow"], "comments": [{"owner": {"reputation": 5452, "user_id": 6824418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Du0yh.jpg?s=128&g=1", "display_name": "Allen Lavoie", "link": "https://stackoverflow.com/users/6824418/allen-lavoie"}, "edited": false, "score": 0, "creation_date": 1528749624, "post_id": 50614652, "comment_id": 88617378, "body": "There are a bunch of graph rewrites implemented in <a href=\"https://github.com/tensorflow/tensorflow/tree/master/tensorflow/core/grappler/optimizers\" rel=\"nofollow noreferrer\">Grappler, TensorFlow&#39;s graph optimizer</a>. That may be a reasonable place to look for graph rewriting examples, although it is possible to do graph rewrites from Python too."}, {"owner": {"reputation": 6538, "user_id": 5154274, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10203597373688739/picture?type=large", "display_name": "Vlad", "link": "https://stackoverflow.com/users/5154274/vlad"}, "reply_to_user": {"reputation": 5452, "user_id": 6824418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Du0yh.jpg?s=128&g=1", "display_name": "Allen Lavoie", "link": "https://stackoverflow.com/users/6824418/allen-lavoie"}, "edited": false, "score": 1, "creation_date": 1528750341, "post_id": 50614652, "comment_id": 88617659, "body": "@AllenLavoie I solved it with tf.contrib.copy_graph. I need to update this question. Thanks."}], "owner": {"reputation": 6538, "user_id": 5154274, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10203597373688739/picture?type=large", "display_name": "Vlad", "link": "https://stackoverflow.com/users/5154274/vlad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1527723007, "creation_date": 1527723007, "question_id": 50614652, "link": "https://stackoverflow.com/questions/50614652/create-a-copy-of-a-tensor-and-all-of-its-dependencies-in-tensorflow", "title": "Create a copy of a tensor and all of its dependencies in Tensorflow", "body": "<p>I want to write a function that receives a logits layer as input and duplicates it and all of its dependent tensors and ops.</p>\n\n<p>In other words, given a logits layer of some graph:\n<a href=\"https://i.stack.imgur.com/LSdI6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LSdI6.png\" alt=\"enter image description here\"></a></p>\n\n<p>I want to turn it to this (without knowing the architecture of the net):\n<a href=\"https://i.stack.imgur.com/oXzsn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oXzsn.png\" alt=\"enter image description here\"></a></p>\n\n<p>Any suggestions?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "pandas", "date", "time"], "comments": [{"owner": {"reputation": 150862, "user_id": 790387, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/450fd2737dd0355700a574bd12842509?s=128&d=identicon&r=PG", "display_name": "Burhan Khalid", "link": "https://stackoverflow.com/users/790387/burhan-khalid"}, "edited": false, "score": 2, "creation_date": 1527723323, "post_id": 50614630, "comment_id": 88239186, "body": "You forgot to include the <code>AM</code> in your time format specification, as stated by the <code>ValueError</code> exception."}], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 9826042, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ann Kriebel", "link": "https://stackoverflow.com/users/9826042/ann-kriebel"}, "edited": false, "score": 0, "creation_date": 1527726545, "post_id": 50614700, "comment_id": 88239931, "body": "Thanks, that helped me alot."}], "tags": [], "owner": {"reputation": 7907, "user_id": 9609447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9FDax.jpg?s=128&g=1", "display_name": "harvpan", "link": "https://stackoverflow.com/users/9609447/harvpan"}, "is_accepted": true, "score": 1, "last_activity_date": 1527723435, "creation_date": 1527723435, "answer_id": 50614700, "question_id": 50614630, "link": "https://stackoverflow.com/questions/50614630/how-to-fix-an-error-converting-a-time-column-in-a-dataframe-with-the-to-datetime/50614700#50614700", "title": "How to fix an error converting a time column in a dataframe with the to_datetime?", "body": "<p>You need:</p>\n\n<pre><code>dropped_col['time'] =pd.to_datetime(dropped_col.time.time,  format='%I:%M:%S %p')\n</code></pre>\n\n<p>Refer to <a href=\"http://strftime.org/\" rel=\"nofollow noreferrer\">docs</a> for more information. </p>\n"}], "owner": {"reputation": 99, "user_id": 9826042, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ann Kriebel", "link": "https://stackoverflow.com/users/9826042/ann-kriebel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20, "favorite_count": 0, "accepted_answer_id": 50614700, "answer_count": 1, "score": 0, "last_activity_date": 1527723435, "creation_date": 1527722887, "question_id": 50614630, "link": "https://stackoverflow.com/questions/50614630/how-to-fix-an-error-converting-a-time-column-in-a-dataframe-with-the-to-datetime", "title": "How to fix an error converting a time column in a dataframe with the to_datetime?", "body": "<p>I am have troubles converting a date column in my dataframe to ensure its a date type.  Here is my dataframe:</p>\n\n<pre><code>    symbol   price    time\n0   MSFT      97.71   9:39:02 AM\n1   GOOG    1067.87   9:39:06 AM\n2   AAPL     187.61   9:39:07 AM\n3   CA        35.39   9:38:15 AM\n4   SAP      110.76   9:38:13 AM\n</code></pre>\n\n<p>The thing is the time column already has AM/PM. </p>\n\n<p>Here is my code:</p>\n\n<pre><code>dropped_col['time'] = pd.to_datetime(dropped_col.time,  format='%I:%M:%S')\n</code></pre>\n\n<p>The error that I get is:</p>\n\n<blockquote>\n  <p>ValueError: unconverted data remains:  AM</p>\n</blockquote>\n\n<p>Basically, I want the time field to be formatted correctly for charting and using any stat functions.</p>\n\n<p>Is there something that I am missing? </p>\n"}, {"tags": ["python", "pygame", "sprite", "collision"], "comments": [{"owner": {"reputation": 61, "user_id": 9161824, "user_type": "registered", "profile_image": "https://graph.facebook.com/955468371273191/picture?type=large", "display_name": "Taavi Raudkivi", "link": "https://stackoverflow.com/users/9161824/taavi-raudkivi"}, "edited": false, "score": 0, "creation_date": 1527722824, "post_id": 50614592, "comment_id": 88239065, "body": "The pictures for the program: <a href=\"https://drive.google.com/drive/folders/1We6RDMs3Cwwprf1OY0ow9WCTHF9MHzne?usp=sharing\" rel=\"nofollow noreferrer\">drive.google.com/drive/folders/&hellip;</a>"}, {"owner": {"reputation": 18103, "user_id": 6220679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK4H1.png?s=128&g=1", "display_name": "skrx", "link": "https://stackoverflow.com/users/6220679/skrx"}, "edited": false, "score": 0, "creation_date": 1527761247, "post_id": 50614592, "comment_id": 88253169, "body": "Please always try to reduce your code to the absolute <a href=\"https://stackoverflow.com/help/mcve\">minimum</a> that is necessary to demonstrate the problem."}], "answers": [{"tags": [], "owner": {"reputation": 18103, "user_id": 6220679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK4H1.png?s=128&g=1", "display_name": "skrx", "link": "https://stackoverflow.com/users/6220679/skrx"}, "is_accepted": true, "score": 1, "last_activity_date": 1527770733, "last_edit_date": 1527770733, "creation_date": 1527766157, "answer_id": 50623256, "question_id": 50614592, "link": "https://stackoverflow.com/questions/50614592/pygame-sprite-sheet-hitbox-broken/50623256#50623256", "title": "Pygame sprite sheet hitbox broken", "body": "<p>The problem is that you use the original image to create the <code>Player.mask</code>. The resulting mask covers all four poses of the character, so even if only one of the sprite sheet frames is visible, the complete original image is used for the collision detection. Your mask looks like the green area in this picture:</p>\n\n<p><img src=\"https://i.stack.imgur.com/sj0t4.jpg\" alt=\"pygame mask\"></p>\n\n<p>You should also use the <code>rect</code> (i.e. the <code>rect.topleft</code> coords) as the blit position, because it is used for the collision detection as well (to find the location of the mask). </p>\n\n<p>I've got a fixed, shortened version of your program in which I've changed a few things to show you how I would solve the problem. First of all, I load the sprite sheet and cut it into several subsurfaces, then I assign the first surface/image to the <code>self.image</code> attribute of the <code>Player</code>. This image can be used to create the <code>rect</code> and the <code>mask</code>. </p>\n\n<p>In the <code>update</code> method I increment the <code>frame_index</code> and assign the current image to <code>self.image</code> in order to animate the sprite. BTW, it would be a good idea to create separate masks for every image and swap them as well during the animation. (I'm just using the first mask here, since the animation frames are so similar.)</p>\n\n<p>Note that if you give your sprites an <code>image</code> and a <code>rect</code> attribute, you can just call <code>all_sprites.update(DS)</code> to blit all sprite images at their corresponding rects. </p>\n\n<pre><code>import random\nimport pygame\n\n\npygame.init()\nFPS = 60\nDS = pygame.display.set_mode((800, 600))\nclock = pygame.time.Clock()\nPLAYER_SHEET = pygame.image.load('karakter.png').convert_alpha()\n# Cut the sprite sheet and append the subsurfaces to this list.\nPLAYER_IMAGES = []\nwidth = PLAYER_SHEET.get_width() / 4\nheight = PLAYER_SHEET.get_height()\nfor x in range(4):\n    PLAYER_IMAGES.append(PLAYER_SHEET.subsurface(x*width, 0, width, height))\n\n\nclass Player(pygame.sprite.Sprite):\n    def __init__(self, x, y, py):\n        super(Player,self).__init__()\n        self.x = x\n        self.y = y\n\n        self.jumping = False\n        self.platform_y = py\n        self.velocity_index = 0\n        self.velocity = list([(i/ 1)-20 for i in range (0,60)])\n\n        self.frame_index = 0\n        self.image = PLAYER_IMAGES[self.frame_index]\n        self.rect = self.image.get_rect()\n        self.mask = pygame.mask.from_surface(self.image)\n\n    def do_jump(self):\n        if self.jumping:\n            self.y += self.velocity[self.velocity_index]\n            self.velocity_index += 1\n            if self.velocity_index &gt;= len(self.velocity) - 1:\n                self.velocity_index = len(self.velocity) - 1\n            if self.y &gt; self.platform_y:\n                self.y = self.platform_y\n                self.jumping = False\n                self.velocity_index = 0\n\n    def update(self):\n        self.rect.center = self.x, self.y\n        self.do_jump()\n        # Update the animation frame.\n        self.frame_index += 1\n        self.frame_index %= len(PLAYER_IMAGES) * 7  # * 7 to slow it down.\n        # Swap the image.\n        self.image = PLAYER_IMAGES[self.frame_index//7]  # // 7 to slow it down.\n\n\ndef keys(player):\n    keys = pygame.key.get_pressed()\n    if keys[pygame.K_SPACE] or keys[pygame.K_UP] and player.jumping == False:\n         player.jumping = True\n\n\nclass Obstacle(pygame.sprite.Sprite):\n    \"\"\"Game Obstacle.\"\"\"\n\n    def __init__(self, x, y):\n        super(Obstacle,self).__init__()\n        self.image = pygame.Surface((90, 90), pygame.SRCALPHA)\n        self.image.fill((100, 150, 0))\n        self.image = pygame.transform.scale(self.image, (90,90))\n        self.rect = self.image.get_rect(center=(x, y))\n        self.x = x\n        self.y = y\n        self.mask = pygame.mask.from_surface(self.image)\n\n    def update(self):\n        if self.x &lt; -64:\n            self.kill()\n\n        self.x += speed\n        self.rect.center = self.x, self.y\n\n\npygame.time.set_timer(pygame.USEREVENT+2, random.choice([2500, 3000, 1500]))\nindex = 3\n\nobstacle = Obstacle(832, 363)\nplayer = Player(190, 359, 359)\n\nall_sprites = pygame.sprite.Group(player, obstacle)\nobstacles = pygame.sprite.Group(obstacle)\nspeed = -5\n\nrunning = True\nwhile running:\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            running = False\n        elif event.type == pygame.USEREVENT+2:\n            r = random.randrange(0, 2)\n            if r == 0:\n                obstacle = Obstacle(832, 363)\n                # Add the obstacle to both groups.\n                obstacles.add(obstacle)\n                all_sprites.add(obstacle)\n\n    keys(player)\n\n    # ---Game logic.---\n    speed += -0.008\n\n    all_sprites.update()\n\n    collided = pygame.sprite.spritecollide(player, obstacles, True,\n        pygame.sprite.collide_mask)\n\n    if collided:\n        print('crash')\n\n    index += 1\n\n    # ---Draw everything.---\n    DS.fill((30, 30, 30))\n    all_sprites.draw(DS)\n\n    # Here I draw the outline (points) of the player's mask.\n    px, py = player.rect.topleft\n    for point in player.mask.outline(8):\n        x, y = point[0] + px, point[1] + py\n        pygame.draw.circle(DS, (250, 250, 0), (x, y), 2)\n\n    pygame.draw.rect(DS, (0, 0, 250), player.rect, 1)\n    # Draw the outlines of the obstacles.\n    for obstac in obstacles:\n        pygame.draw.rect(DS, (150, 250, 0), obstac.rect, 1)\n        ox, oy = obstac.rect.topleft\n        for point in obstac.mask.outline(6):\n            pygame.draw.circle(DS, (250, 0, 0), (point[0]+ox, point[1]+oy), 2)\n\n    pygame.display.update()\n    clock.tick(60)\n\n\npygame.quit()\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 9161824, "user_type": "registered", "profile_image": "https://graph.facebook.com/955468371273191/picture?type=large", "display_name": "Taavi Raudkivi", "link": "https://stackoverflow.com/users/9161824/taavi-raudkivi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 50623256, "answer_count": 1, "score": 1, "last_activity_date": 1527770733, "creation_date": 1527722561, "last_edit_date": 1527722888, "question_id": 50614592, "link": "https://stackoverflow.com/questions/50614592/pygame-sprite-sheet-hitbox-broken", "title": "Pygame sprite sheet hitbox broken", "body": "<p>I made a simple game, where you have to jump over the stones moving towards you. The problem is that one of those sprites hitboxes is broken, even if the sprite mask is used. The player sprite is generated just dividing the player sprite sheet into 4 columns. Maybe there the problem is hiding?\nPictures for the program:\n<a href=\"https://drive.google.com/drive/folders/1We6RDMs3Cwwprf1OY0ow9WCTHF9MHzne?usp=sharing\" rel=\"nofollow noreferrer\">https://drive.google.com/drive/folders/1We6RDMs3Cwwprf1OY0ow9WCTHF9MHzne?usp=sharing</a></p>\n\n<pre><code>import pygame, os, random\n\npygame.init()\n\nW, H = 800,600\nHW, HH = W/2,H/2\nAREA = W * H\n\nWHITE = (255,255,255)\nGREEN = (69,139,0)\n\nFPS = 60\n\nbg = pygame.image.load(os.path.join('Pildid', 'Taust3.png'))\nbg = pygame.transform.scale(bg, (2000, 600))\n\nDS = pygame.display.set_mode((W,H))\nclock = pygame.time.Clock()\n\n\nclass Player(pygame.sprite.Sprite):\n    def __init__(self, x, y, py, player, veerg, rida):\n        super(Player,self).__init__()\n        '''Mangija huppamine'''\n        clock.tick(5)\n        self.x = x\n        self.y = y\n\n        self.jumping = False\n        self.platform_y = py\n        self.velocity_index = 0\n\n        '''Sprite sheet'''\n        self.player = pygame.image.load(os.path.join('Pildid', 'karakter.png')).convert_alpha()#pildi uleslaadimine\n        #self.player = pygame.transform.scale(self.player,(200,100)) \n        self.rect = self.player.get_rect()\n\n        '''Sprite sheeti piltide jaotamine pikslite jargi'''\n        self.veerg = veerg\n        self.rida = rida\n        self.kokku = veerg * rida\n\n        self.rect = self.player.get_rect()\n        L = self.veergL = self.rect.width/veerg\n        K = self.weegK = self.rect.height/rida\n        PL,PK = self.veergKeskel = (L/2,K/2)\n\n        self.veerg = list([(index % veerg * L, int(index/veerg) * K,L,K )for index in range(self.kokku)])\n        self.handle = list([ #pildi paigutamise voimalikud positsioonid\n            (0, 0), (-PL, 0), (-L, 0),\n            (0, -PK), (-PL, -PK), (-L, -PK),\n            (0, -L), (-PL, -K), (-L, -K),])\n\n        self.mask = pygame.mask.from_surface(self.player)\n\n    def do_jumpt(self):\n        '''Huppamine: kiirus, korgus, platvorm'''\n        global velocity\n        if self.jumping:\n            self.y += velocity[self.velocity_index]\n            self.velocity_index += 1\n            if self.velocity_index &gt;= len(velocity) - 1:\n                self.velocity_index = len(velocity) - 1\n            if self.y &gt; self.platform_y:\n                self.y = self.platform_y\n                self.jumping = False\n                self.velocity_index = 0\n\n\n\n    def draw(self, DS,veergindex,x,y,handle=0):\n        DS.blit(self.player,(self.x+self.handle[handle][0], self.y + self.handle[handle][1]),self.veerg[veergindex])\n\n    def do(self):\n        '''Funktsioonide kokkupanek'''\n        self.do_jumpt()\n        p.draw(DS,index%p.kokku,190, 359,4)\n\n    def update(self):\n        self.rect.center = self.x, self.y\n\n\n\ndef keys(player):\n    keys = pygame.key.get_pressed()\n    if keys[pygame.K_SPACE] or keys[pygame.K_UP] and player.jumping == False:\n         player.jumping = True\n\n\n\n\nclass Obsticles(pygame.sprite.Sprite):\n    '''Game obsticles: **'''\n    #img = pygame.image.load(os.path.join('images', 'box.png'))\n    def __init__(self, x, y):\n        super(Obsticles,self).__init__()\n        self.img = pygame.image.load(os.path.join('Pildid', 'kivi.png')).convert_alpha()\n        self.img = pygame.transform.scale(self.img, (90,90))\n        self.rect = self.img.get_rect(center=(x, y))\n        self.x = x\n        self.y = y\n        self.mask = pygame.mask.from_surface(self.img)\n\n    def draw(self, DS):\n        '''Obsticle img blitting and hitbox'''\n        DS.blit(self.img, (self.x, self.y))\n\n    def update(self):\n        if self.x &lt; -64:  # Delete the obstacle.\n            # `kill()` removes this obstacle sprite from all sprite groups.\n            self.kill()\n\n        self.x += speed  # Move the obstacle.\n            # Update the rect because it's used to blit the\n            # sprite and for the collision detection.\n        self.rect.center = self.x, self.y\n\ndef redrawWindow():\n    '''Obsticle loop'''\n    for i in ob:\n        i.draw(DS)\n\ndef text_objects(text, font):\n    textSurface = font.render(text, True, WHITE)\n    return textSurface, textSurface.get_rect()\n\ndef message_display(text):\n    largeText = pygame.font.Font('freesansbold.ttf',60)\n    TextSurf, TextRect = text_objects(text, largeText)\n    TextRect.center = ((W/2),(H/4))\n    DS.blit(TextSurf, TextRect)\n    pygame.display.update()\n    pygame.time.wait(3000)\n\ndef crash():\n    message_display('Failed')\n\n\npygame.time.set_timer(pygame.USEREVENT+2, random.choice([2500, 3000, 1500]))\n\nvelocity = list([(i/ 1)-20 for i in range (0,60)])  #Huppe ulatus\nindex = 3\n\nobsticles = Obsticles(832, 363)\np = Player(190, 359, 359, 'karakter.png', 4, 1)\n\nall_sprites = pygame.sprite.Group(p, obsticles)\nob = pygame.sprite.Group(obsticles)\n\nx = 0\nx -= 1\nspeed = -5\n\nrunning = True\nwhile running:\n\n    # ---Handle the events.---\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            running = False\n        elif event.type == pygame.USEREVENT+2:\n            r = random.randrange(0, 2)\n            if r == 0:\n                obsticles = Obsticles(832, 363)\n                # Add the obstacle to both groups.\n                ob.add(obsticles)\n                all_sprites.add(obsticles)\n\n\n    speed += -0.008\n    # ---Game logic.---\n    all_sprites.update()\n\n    collided = pygame.sprite.spritecollide(p, ob, True, \n    pygame.sprite.collide_mask)\n\n    if collided:\n        crash()\n\n    index += 1\n    # Background movement.\n\n    back_x = x % bg.get_rect().width\n    x -= 2\n    # ---Draw everything.---\n    DS.blit(bg, (back_x - bg.get_rect().width, 0))\n    if back_x &lt; W:\n        DS.blit(bg, (back_x, 0))\n\n\n    keys(p)\n    p.do()\n    redrawWindow()\n\n\n    pygame.display.update()\n    clock.tick(60)\n\n\npygame.quit()\nquit()\n</code></pre>\n"}, {"tags": ["python", "c++", "dll", "swig", "boost-python"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 1, "creation_date": 1527722619, "post_id": 50614576, "comment_id": 88239015, "body": "<code>ctypes</code> <i>can</i> wrap C++ classes, it&#39;s just very ugly. You have to mangle the names manually (or using the appropriate platform API), call constructors and destructors and operators manually, etc."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1527722857, "post_id": 50614576, "comment_id": 88239073, "body": "Anyway: hopefully the DLL comes with a header file? If so: With a bit of work, you can use cffi to parse the headers and access the DLL directly, but it&#39;s probably not worth trying that, especially if you don&#39;t know C++ and don&#39;t know cffi. SWIG may or may not work. If you already know SWIG, just try it. But if it fails, I wouldn&#39;t try too hard to debug it; I&#39;d fall back to a different solution."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 2, "creation_date": 1527722903, "post_id": 50614576, "comment_id": 88239083, "body": "A lot simpler, you can just write your own trivial wrapper around the DLL in C++, and then use Boost.Python or PyCXX or whatever you like best to export a Python module that binds that wrapper, instead of one that binds the original library directly. Or, maybe even simpler, write the wrapper in Cython, which feels a lot more like Python, which you already know."}, {"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1527889167, "post_id": 50614576, "comment_id": 88313491, "body": "With SWIG my answer to: <a href=\"https://stackoverflow.com/a/10531844/168175\">stackoverflow.com/a/10531844/168175</a> pretty much applies here, even though you&#39;re talking Python not Java, because the tricky bit is working out what to write in the .i file."}, {"owner": {"reputation": 454, "user_id": 1093967, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f78a2fffe75752b747bdbc41378e78eb?s=128&d=identicon&r=PG", "display_name": "deepyaman", "link": "https://stackoverflow.com/users/1093967/deepyaman"}, "reply_to_user": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1527890350, "post_id": 50614576, "comment_id": 88313834, "body": "@Flexo I haven&#39;t looked at SWIG in depth yet, but I don&#39;t see reconstructing the headers as being a challenge. At least for my DLL, Dependency Walker looks like it does a great job of unmangling function signatures."}], "owner": {"reputation": 454, "user_id": 1093967, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f78a2fffe75752b747bdbc41378e78eb?s=128&d=identicon&r=PG", "display_name": "deepyaman", "link": "https://stackoverflow.com/users/1093967/deepyaman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 525, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1527722445, "creation_date": 1527722445, "question_id": 50614576, "link": "https://stackoverflow.com/questions/50614576/is-it-possible-to-wrap-a-c-dll-in-python-without-using-the-underlying-source", "title": "Is it possible to wrap a C++ DLL in Python without using the underlying source?", "body": "<p>I have a C++ DLL that is distributed as part of a free utility. While I have found the source code, it is not distributed publicly, and I have not tried building it (not familiar with C++, code is legacy and sits in an old VCS, etc.). Ideally, I would like to use this DLL from Python without relying on header or source files.</p>\n\n<p>Is this possible using Boost.Python or SWIG (or something else)? If so, can you point me to an example or resources that shows how? I initially tried using <code>ctypes</code>, but I learned that it cannot bind C++ classes. Some Googling suggested these alternatives, but I have yet to see how to do it without having to compile the C++ source from their tutorials.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["python", "testing"], "comments": [{"owner": {"reputation": 126353, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1527724212, "post_id": 50614573, "comment_id": 88239390, "body": "When you say &quot;test&quot; do you mean &quot;compare for some business logic reason&quot; or &quot;make sure it works&quot;?"}, {"owner": {"reputation": 2996, "user_id": 3553228, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b48e7a43f7c3cca4a3826be398b8e32a?s=128&d=identicon&r=PG&f=1", "display_name": "Lisa", "link": "https://stackoverflow.com/users/3553228/lisa"}, "reply_to_user": {"reputation": 126353, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1527725161, "post_id": 50614573, "comment_id": 88239637, "body": "The tests includes: 1) comparing data that I got from production database is the same as in the excel 2) comparing the python produces the same results as excel(the logic is the same)"}, {"owner": {"reputation": 126353, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1527731575, "post_id": 50614573, "comment_id": 88240976, "body": "So &quot;make sure it works&quot;? If so, that shouldn&#39;t be in the production code."}], "answers": [{"tags": [], "owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "is_accepted": false, "score": 0, "last_activity_date": 1527723915, "creation_date": 1527723915, "answer_id": 50614762, "question_id": 50614573, "link": "https://stackoverflow.com/questions/50614573/turn-on-off-test-in-the-source-code/50614762#50614762", "title": "turn on/off test in the source code", "body": "<p>It looks like you have a limited number of choices.</p>\n\n<p>You could <a href=\"https://en.wikipedia.org/wiki/Code_refactoring\" rel=\"nofollow noreferrer\">refactor your code</a> to pull the tests together to activate them with fewer <code>if</code> tests. You say that may not be possible, but it seems to me that you should try to do that first. You recognize there is a smell in your code, so you should try some of the refactoring techniques to succeed in separating the test and the source code. Check some of the techniques--there are many books and web sites that discuss some of them.</p>\n\n<p>You could leave your code as is. This will build up <a href=\"https://en.wikipedia.org/wiki/Technical_debt\" rel=\"nofollow noreferrer\">technical debt</a> but that may be necessary. Use the over 20 <code>if</code> statements and comment them well to they can be found and modified later if needed. At least do the date check only once in your code, set a Boolean variable, and test that variable rather than redoing the date check.</p>\n\n<p>Without more detail I do not see how we could offer any other options.</p>\n"}, {"tags": [], "owner": {"reputation": 126353, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 0, "last_activity_date": 1527732745, "last_edit_date": 1592644375, "creation_date": 1527732745, "answer_id": 50615693, "question_id": 50614573, "link": "https://stackoverflow.com/questions/50614573/turn-on-off-test-in-the-source-code/50615693#50615693", "title": "turn on/off test in the source code", "body": "<p>If these are tests in the &quot;make sure it works&quot; sense, they should not be in the production code. They should be wholly separate in a test suite.</p>\n<p>Testing code is a very broad topic, but here's a few resources to get you started.</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/3371255/writing-unit-tests-in-python-how-do-i-start\">Writing unit tests in Python, where do I start?</a></li>\n<li>The <a href=\"https://docs.python.org/2/library/unittest.html\" rel=\"nofollow noreferrer\">Python unittest</a> library.</li>\n<li><a href=\"https://jeffknupp.com/blog/2013/12/09/improve-your-python-understanding-unit-testing/\" rel=\"nofollow noreferrer\">Improve Your Python: Understanding Unit Testing</a></li>\n<li><a href=\"http://pythontesting.net/\" rel=\"nofollow noreferrer\">Python Software Development and Software Testing (posts and podcast)</a></li>\n</ul>\n<blockquote>\n<p><em>I don't think I can separate the test and the source code, since later tests takes inputs from previous processing steps.</em></p>\n</blockquote>\n<p>You absolutely can, every system does, but it may require redesigning your system. This is a common chicken-and-egg problem for legacy code: how do you change it safely if you can't test it? And there are various techniques for dealing with that. <a href=\"https://en.wikipedia.org/wiki/Code_refactoring\" rel=\"nofollow noreferrer\">Refactoring</a>, the process of redesigning code without changing how it works, will feature prominently. But without details I can't say much more.</p>\n<blockquote>\n<p><em>1) comparing data that I got from production database is the same as in the excel</em></p>\n<p><em>2) comparing the python produces the same results as excel(the logic is the same) if the inputs are the same.</em></p>\n</blockquote>\n<p>Rather than testing inside your code, you should be testing its outputs.</p>\n<p>Both of these should be a matter of converting the output of the various processes into a common format which can then be compared. This could be dumping them as JSON, turning them all into Python data structures, CSVs... whatever is easiest for your data. Then compare them to ensure they're the same.</p>\n<p>Again, without more detail about your situation I can't offer much more.</p>\n"}], "owner": {"reputation": 2996, "user_id": 3553228, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b48e7a43f7c3cca4a3826be398b8e32a?s=128&d=identicon&r=PG&f=1", "display_name": "Lisa", "link": "https://stackoverflow.com/users/3553228/lisa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1527732745, "creation_date": 1527722433, "last_edit_date": 1527725172, "question_id": 50614573, "link": "https://stackoverflow.com/questions/50614573/turn-on-off-test-in-the-source-code", "title": "turn on/off test in the source code", "body": "<p>I am reproducing a spreadsheet in python. The spreadsheet contains the data and the processing logic on every Monday not on the rest weekdays.</p>\n\n<p>I want to run the python code on everyday, if it is Monday, I want to compare the python result with the spreadsheet result. I have 20+ tests spread across the python code doing the comparisons.The tests include: 1) comparing data that I got from production database is the same as in the excel 2) comparing the python produces the same results as excel(the logic is the same) if the inputs are the same.</p>\n\n<p>How can I turn on the test for Monday, without inserting 20+ \"if Monday: run test_n\" to the python code?</p>\n\n<p>I don't think I can separate the test and the source code, since later tests takes inputs from previous processing steps.</p>\n"}, {"tags": ["python", "pandas", "csv", "numpy", "jupyter-notebook"], "comments": [{"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1527722416, "post_id": 50614545, "comment_id": 88238976, "body": "Welcome to SO. Please take the time to read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and the other links on that page.  <a href=\"https://meta.stackoverflow.com/questions/285551/why-not-upload-images-of-code-on-so-when-asking-a-question/285557#285557\">Please don&#39;t post images of code or data</a> - copy the text (minimal amout), paste it into the question and <a href=\"https://stackoverflow.com/help/formatting\">format it as code</a>."}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 1, "creation_date": 1527722468, "post_id": 50614545, "comment_id": 88238985, "body": "Also see <a href=\"https://stackoverflow.com/questions/20109391/how-to-make-good-reproducible-pandas-examples\">How to make good reproducible pandas examples</a> for advice on how to create a great pandas question."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1527725768, "post_id": 50614545, "comment_id": 88239779, "body": "Are the quotes in the file?"}, {"owner": {"reputation": 345, "user_id": 9873077, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "NimbleTortoise ", "link": "https://stackoverflow.com/users/9873077/nimbletortoise"}, "edited": false, "score": 0, "creation_date": 1527726762, "post_id": 50614545, "comment_id": 88239979, "body": "Yes the quotes are in the file. I&#39;ll try removing them."}], "answers": [{"comments": [{"owner": {"reputation": 345, "user_id": 9873077, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "NimbleTortoise ", "link": "https://stackoverflow.com/users/9873077/nimbletortoise"}, "edited": false, "score": 0, "creation_date": 1527724244, "post_id": 50614784, "comment_id": 88239398, "body": "Thank you that fixed the header separation issue. But how would I use the separated comma values within each row and place them in individual columns?"}, {"owner": {"reputation": 303, "user_id": 4638182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc6af5c571e3f84c45e4553ee7a92d46?s=128&d=identicon&r=PG&f=1", "display_name": "Logstar", "link": "https://stackoverflow.com/users/4638182/logstar"}, "reply_to_user": {"reputation": 345, "user_id": 9873077, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "NimbleTortoise ", "link": "https://stackoverflow.com/users/9873077/nimbletortoise"}, "edited": false, "score": 0, "creation_date": 1527724646, "post_id": 50614784, "comment_id": 88239482, "body": "@NimbleTortoise Then it&#39;s not the header issue. Could you paste the full csv file content in the question? It would be very helpful to figure out how to separate values into individual columns."}, {"owner": {"reputation": 345, "user_id": 9873077, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "NimbleTortoise ", "link": "https://stackoverflow.com/users/9873077/nimbletortoise"}, "edited": false, "score": 0, "creation_date": 1527725238, "post_id": 50614784, "comment_id": 88239658, "body": "I just added it. Although it&#39;s a big block of text and there&#39;s probably a better way to post this."}, {"owner": {"reputation": 303, "user_id": 4638182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc6af5c571e3f84c45e4553ee7a92d46?s=128&d=identicon&r=PG&f=1", "display_name": "Logstar", "link": "https://stackoverflow.com/users/4638182/logstar"}, "reply_to_user": {"reputation": 345, "user_id": 9873077, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "NimbleTortoise ", "link": "https://stackoverflow.com/users/9873077/nimbletortoise"}, "edited": false, "score": 0, "creation_date": 1527725618, "post_id": 50614784, "comment_id": 88239746, "body": "@NimbleTortoise Thanks. Could you try specifying delimiter=&#39;,&#39; in pd.read_csv. I removed the beginning and tailing quotes and moved each row into a line. Then, I am able to read the text into individual columns without specifying delimiter=&#39;,&#39;."}, {"owner": {"reputation": 303, "user_id": 4638182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc6af5c571e3f84c45e4553ee7a92d46?s=128&d=identicon&r=PG&f=1", "display_name": "Logstar", "link": "https://stackoverflow.com/users/4638182/logstar"}, "reply_to_user": {"reputation": 345, "user_id": 9873077, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "NimbleTortoise ", "link": "https://stackoverflow.com/users/9873077/nimbletortoise"}, "edited": false, "score": 0, "creation_date": 1527726032, "post_id": 50614784, "comment_id": 88239833, "body": "@NimbleTortoise I think removing the beginning and trailing quotes would fix your problem, if they are in your file. I thought they were introduced by copy-and-paste."}, {"owner": {"reputation": 345, "user_id": 9873077, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "NimbleTortoise ", "link": "https://stackoverflow.com/users/9873077/nimbletortoise"}, "edited": false, "score": 0, "creation_date": 1527727360, "post_id": 50614784, "comment_id": 88240121, "body": "Oh I removed all the &quot;&quot; and that does seem to put everything into columns. I wonder why they were there in the first place. Thanks for the big help. Do you think there&#39;s a shortcut to removing these for bigger files?"}, {"owner": {"reputation": 303, "user_id": 4638182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc6af5c571e3f84c45e4553ee7a92d46?s=128&d=identicon&r=PG&f=1", "display_name": "Logstar", "link": "https://stackoverflow.com/users/4638182/logstar"}, "reply_to_user": {"reputation": 345, "user_id": 9873077, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "NimbleTortoise ", "link": "https://stackoverflow.com/users/9873077/nimbletortoise"}, "edited": false, "score": 0, "creation_date": 1527727708, "post_id": 50614784, "comment_id": 88240218, "body": "@NimbleTortoise Thanks for trying that. If you have quotes at the beginning and the end of each line, adding delimiter=&#39;,&#39; will not help, since non-empty text between a pair of quotes is considered as a single column in CSV format."}, {"owner": {"reputation": 303, "user_id": 4638182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc6af5c571e3f84c45e4553ee7a92d46?s=128&d=identicon&r=PG&f=1", "display_name": "Logstar", "link": "https://stackoverflow.com/users/4638182/logstar"}, "reply_to_user": {"reputation": 345, "user_id": 9873077, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "NimbleTortoise ", "link": "https://stackoverflow.com/users/9873077/nimbletortoise"}, "edited": false, "score": 0, "creation_date": 1527727928, "post_id": 50614784, "comment_id": 88240286, "body": "@NimbleTortoise For larger file you could use Python read the file line-by-line into strings, slice the text between the beginning and trailing quotes, and write the sliced strings line-by-line into another file. I will write a snippet in my answer."}], "tags": [], "owner": {"reputation": 303, "user_id": 4638182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc6af5c571e3f84c45e4553ee7a92d46?s=128&d=identicon&r=PG&f=1", "display_name": "Logstar", "link": "https://stackoverflow.com/users/4638182/logstar"}, "is_accepted": false, "score": 2, "last_activity_date": 1527728666, "last_edit_date": 1527728666, "creation_date": 1527724118, "answer_id": 50614784, "question_id": 50614545, "link": "https://stackoverflow.com/questions/50614545/numpy-separating-csv-into-columns/50614784#50614784", "title": "Numpy Separating CSV into columns", "body": "<p>It seems that the first two rows of your CSV file are headers, but the default behavior of <code>pd.read_csv</code> thinks that only the first row is header.</p>\n\n<p>Also, the beginning and trailing quotes make <code>pd.read_csv</code> think the text in between is a single field/column.</p>\n\n<p>You could try the following:</p>\n\n<p>Remove the beginning and trailing quotes, and</p>\n\n<pre><code>bbal = pd.read_csv('some_file.csv', header=[0, 1], delimiter=',')\n</code></pre>\n\n<p>Following is how you could use Python to remove the beginning and trailing quotes:</p>\n\n<pre><code># open 'quotes.csv' in read mode with variable in_file as handle\n# open 'no_quotes.csv' in write mode with variable out_file as handle\nwith open('quotes.csv') as in_file, open('no_quotes.csv', 'w') as out_file:\n    # read in_file line by line\n    # the variable line stores each line as string\n    for line in in_file:\n        # line[1:-1] slices the string to omit the first and last character\n        # append a newline character '\\n' to the sliced line\n        # write the string with newline to out_file\n        out_file.write(line[1:-1] + '\\n')\n\n# read_csv on 'no_quotes.csv'\nbbal = pd.read_csv('no_quotes.csv', header=[0, 1], delimiter=',')\nbbal.head()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "is_accepted": false, "score": 0, "last_activity_date": 1527736679, "creation_date": 1527736679, "answer_id": 50616129, "question_id": 50614545, "link": "https://stackoverflow.com/questions/50614545/numpy-separating-csv-into-columns/50616129#50616129", "title": "Numpy Separating CSV into columns", "body": "<p>Consider reading in csv as a text file to be stripped of the beginning/end quotes per line on a text file read which tell the parser all data between is a singular value. And use built-in <code>StringIO</code> to read text string into dataframe instead of saving to disk for import. </p>\n\n<p>Additionally, skip the first row of repeated <em>Totals</em> and <em>Per Game</em> and even the last row that aggregates since you can do that with pandas.</p>\n\n<pre><code>from io import StringIO\nimport pandas as pd\n\nwith open('BasketballCSVQuotes.csv') as f:\n    csvdata = f.read().replace('\"', '')\n\ndf = pd.read_csv(StringIO(csvdata), skiprows=1, skipfooter=1, engine='python')\n\nprint(df)\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>      Rk                      Player   Age  G   GS    MP   FG  FGA  3P  3PA  ...    PTS    FG%    3P%    FT%   MP.1  PTS.1  TRB.1  AST.1  STL.1  BLK.1\n0    1.0      Kevin Durant\\duranke01  29.0  5  5.0   182   54  107   9   28  ...    139  0.505  0.321  0.815   36.5   27.8    7.4    4.8    1.4    1.2\n1    2.0     Klay Thompson\\thompkl01  27.0  5  5.0   183   38   99  12   43  ...     99  0.384  0.279  1.000   36.7   19.8    6.4    1.8    0.2    0.4\n2    3.0     Stephen Curry\\curryst01  29.0  4  3.0   125   32   67  15   34  ...     98  0.478  0.441  1.000   31.2   24.5    5.3    3.5    2.0    0.5\n3    4.0    Draymond Green\\greendr01  27.0  5  5.0   186   27   55   8   20  ...     74  0.491  0.400  0.800   37.1   14.8   11.8   10.0    2.4    1.6\n4    5.0    Andre Iguodala\\iguodan01  34.0  5  4.0   140   14   29   4   12  ...     39  0.483  0.333  0.583   27.9    7.8    5.0    3.4    2.0    0.4\n5    6.0         Quinn Cook\\cookqu01  24.0  4  0.0    58   12   27   0   10  ...     30  0.444  0.000  0.750   14.4    7.5    2.3    1.0    0.3    0.0\n6    7.0      Kevon Looney\\looneke01  21.0  5  0.0   113   12   17   0    0  ...     28  0.706    NaN  0.500   22.6    5.6    5.8    1.0    0.8    0.2\n7    8.0  Shaun Livingston\\livinsh01  32.0  5  0.0    79   11   27   0    0  ...     26  0.407    NaN  1.000   15.9    5.2    1.2    2.4    0.0    0.2\n8    9.0         David West\\westda01  37.0  5  0.0    40    8   14   0    0  ...     16  0.571    NaN    NaN    7.9    3.2    1.4    2.6    0.4    0.8\n9   10.0        Nick Young\\youngni01  32.0  4  2.0    41    3   11   3   10  ...     11  0.273  0.300  0.667   10.2    2.8    1.0    0.3    0.3    0.0\n10  11.0      JaVale McGee\\mcgeeja01  30.0  3  1.0    19    3    8   0    1  ...      6  0.375  0.000    NaN    6.2    2.0    2.0    0.0    0.0    0.3\n11  12.0     Zaza Pachulia\\pachuza01  33.0  2  0.0     8    1    2   0    0  ...      4  0.500    NaN  0.500    4.2    2.0    3.0    0.0    1.0    0.0\n12  13.0           Jordan Belelljo01  23.0  4  0.0    23    1    4   0    0  ...      3  0.250    NaN  0.500    5.8    0.8    1.5    1.3    0.5    0.5\n13  14.0      Damian Jones\\jonesda03  22.0  1  0.0     3    0    1   0    0  ...      2  0.000    NaN  1.000    3.2    2.0    0.0    0.0    0.0    0.0\n\n[14 rows x 30 columns]\n</code></pre>\n"}], "owner": {"reputation": 345, "user_id": 9873077, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "NimbleTortoise ", "link": "https://stackoverflow.com/users/9873077/nimbletortoise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1527736679, "creation_date": 1527722147, "last_edit_date": 1527725296, "question_id": 50614545, "link": "https://stackoverflow.com/questions/50614545/numpy-separating-csv-into-columns", "title": "Numpy Separating CSV into columns", "body": "<p>I'm trying to use a CSV imported from bballreference.com. But as you can see, the separated values are all in one row rather than separated by columns. On NumPy Pandas, what would be the easiest way to fix this? I've googled to no avail. </p>\n\n<p><a href=\"https://i.stack.imgur.com/oEXHp.png\" rel=\"nofollow noreferrer\">csv on jupyter</a></p>\n\n<p>I don't know how to post CSV file in a clean way but here it is: </p>\n\n<pre><code>\",,,Totals,Totals,Totals,Totals,Totals,Totals,Totals,Totals,Totals,Totals,Totals,Totals,Totals,Totals,Totals,Totals,Totals,Totals,Shooting,Shooting,Shooting,Per Game,Per Game,Per Game,Per Game,Per Game,Per Game\"\n\"Rk,Player,Age,G,GS,MP,FG,FGA,3P,3PA,FT,FTA,ORB,DRB,TRB,AST,STL,BLK,TOV,PF,PTS,FG%,3P%,FT%,MP,PTS,TRB,AST,STL,BLK\"\n\"1,Kevin Durant\\duranke01,29,5,5,182,54,107,9,28,22,27,3,34,37,24,7,6,10,7,139,.505,.321,.815,36.5,27.8,7.4,4.8,1.4,1.2\"\n\"2,Klay Thompson\\thompkl01,27,5,5,183,38,99,12,43,11,11,3,29,32,9,1,2,6,11,99,.384,.279,1.000,36.7,19.8,6.4,1.8,0.2,0.4\"\n\"3,Stephen Curry\\curryst01,29,4,3,125,32,67,15,34,19,19,2,19,21,14,8,2,15,6,98,.478,.441,1.000,31.2,24.5,5.3,3.5,2.0,0.5\"\n\"4,Draymond Green\\greendr01,27,5,5,186,27,55,8,20,12,15,12,47,59,50,12,8,18,16,74,.491,.400,.800,37.1,14.8,11.8,10.0,2.4,1.6\"\n\"5,Andre Iguodala\\iguodan01,34,5,4,140,14,29,4,12,7,12,4,21,25,17,10,2,3,7,39,.483,.333,.583,27.9,7.8,5.0,3.4,2.0,0.4\"\n\"6,Quinn Cook\\cookqu01,24,4,0,58,12,27,0,10,6,8,1,8,9,4,1,0,2,4,30,.444,.000,.750,14.4,7.5,2.3,1.0,0.3,0.0\"\n\"7,Kevon Looney\\looneke01,21,5,0,113,12,17,0,0,4,8,10,19,29,5,4,1,2,17,28,.706,,.500,22.6,5.6,5.8,1.0,0.8,0.2\"\n\"8,Shaun Livingston\\livinsh01,32,5,0,79,11,27,0,0,4,4,0,6,6,12,0,1,3,9,26,.407,,1.000,15.9,5.2,1.2,2.4,0.0,0.2\"\n\"9,David West\\westda01,37,5,0,40,8,14,0,0,0,0,2,5,7,13,2,4,3,4,16,.571,,,7.9,3.2,1.4,2.6,0.4,0.8\"\n\"10,Nick Young\\youngni01,32,4,2,41,3,11,3,10,2,3,0,4,4,1,1,0,1,3,11,.273,.300,.667,10.2,2.8,1.0,0.3,0.3,0.0\"\n\"11,JaVale McGee\\mcgeeja01,30,3,1,19,3,8,0,1,0,0,4,2,6,0,0,1,0,2,6,.375,.000,,6.2,2.0,2.0,0.0,0.0,0.3\"\n\"12,Zaza Pachulia\\pachuza01,33,2,0,8,1,2,0,0,2,4,4,2,6,0,2,0,1,1,4,.500,,.500,4.2,2.0,3.0,0.0,1.0,0.0\"\n\"13,Jordan Bell\\belljo01,23,4,0,23,1,4,0,0,1,2,1,5,6,5,2,2,0,2,3,.250,,.500,5.8,0.8,1.5,1.3,0.5,0.5\"\n\"14,Damian Jones\\jonesda03,22,1,0,3,0,1,0,0,2,2,0,0,0,0,0,0,0,0,2,.000,,1.000,3.2,2.0,0.0,0.0,0.0,0.0\"\n\",Team Totals,26.5,5,,1200,216,468,51,158,92,115,46,201,247,154,50,29,64,89,575,.462,.323,.800,240.0,115.0,49.4,30.8,10.0,5.8\"\n</code></pre>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 1, "creation_date": 1527724182, "post_id": 50614498, "comment_id": 88239383, "body": "This is simply not how variables work. Store your ovals in a list or dictionary."}, {"owner": {"reputation": 1, "user_id": 9517055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1eefeb58cbc42a8c6a392c295c45259f?s=128&d=identicon&r=PG&f=1", "display_name": "Tango", "link": "https://stackoverflow.com/users/9517055/tango"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1527763987, "post_id": 50614498, "comment_id": 88254892, "body": "Thank you Bryan. But why does itemconfigure not accept a formated  string?  Works: b2_oval = bottom_frame.create_oval( 75,180,115,205, fill=&#39;&#39;) bottom_frame.itemconfigure(b2_oval, fill=&#39;goldenrod3&#39;)  Why does this formatted string  not?                     w_oval = &#39;b&#39;+str(i_oval)+&#39;_oval&#39; bottom_frame.itemconfigure(w_oval, fill=&#39;goldenrod3&#39;)"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1527768088, "post_id": 50614498, "comment_id": 88257447, "body": "itemformat <i>does</i> accept a formatted string. The <code>itemconfigure</code> is working, but the string you&#39;re computing isn&#39;t associated with anything in the canvas.  It looks the same as the variable name, but it&#39;s just a string. The canvas has no idea that you&#39;ve stored the id of an object in a variable with a name that matches the string."}], "answers": [{"tags": [], "owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "is_accepted": false, "score": 0, "last_activity_date": 1527777942, "creation_date": 1527777942, "answer_id": 50627023, "question_id": 50614498, "link": "https://stackoverflow.com/questions/50614498/tkinte-loop-through-image-objects-and-set-itemconfigure/50627023#50627023", "title": "Tkinte: loop through image objects and set itemconfigure", "body": "<p>Consider this line of code:</p>\n\n<pre><code>b1_oval = bottom_frame.create_oval( 25,180,65,205, fill='')\n</code></pre>\n\n<p>In the above code, <code>create_oval</code> is returning an integer identifier which represents the object that was created. You are storing this in a variable named <code>b1_oval</code>.</p>\n\n<p>Now consider this code:</p>\n\n<pre><code>for j in ovalLONG:\n    i_oval = i_oval + 1\n    w_oval = str('b'+str(i_oval)+'_oval') # Not flying Wilbur\n    if i == j:\n           bottom_frame.itemconfigure(w_oval, fill='goldenrod3')\n</code></pre>\n\n<p>First, you are creating a <em>string</em> that looks like <code>\"b1_oval\"</code>. You are storing this string in a variable named <code>w_oval</code>. In other words, it's no different than if you did <code>w_oval = \"b1_oval\"</code>. </p>\n\n<p>When you call <code>itemconfigure(w_oval, ...)</code> it is identical to calling `itemconfigure(\"b1_oval\", ...). </p>\n\n<p>That first parameter is taken by the canvas to be a tag or an id. Since it's not an integer it is treated as a tag. You have not created any objects on the canvas with the tag `\"b1_oval\", so nothing has changed. Just to be clear: tags and variable names are two completely different things. </p>\n\n<p>You have one of two options: either give each oval a tag that matches that pattern (via the <code>tag</code> option), or store the ids in a way that you can use in the loop. </p>\n\n<p>The second of those solutions is the best and easiest in my opinion. Instead of creating a bunch of variables that have numbers in the name, store the ids in a list or dictionary. Then it's just a simple lookup, without having to compute the name of a variable.</p>\n\n<p>For example:</p>\n\n<pre><code>ovals = []\novals.append(bottom_frame.create_oval(...))\novals.append(bottom_frame.create_oval(...))\n...\nfor j in ovalLONG:\n    if i == j:\n        bottom_frame.itemconfigure(ovals[i], ...)\n</code></pre>\n\n<p>I doubt the above is exactly what you want, because I don't know where you're computing <code>i</code> -- it's not in the code you provided. Still, the point is that you save the object ids in a list rather than trying to compute a variable name.</p>\n\n<p>The main disadvantage to using lists is that you can't control the indexes. Lists always start counting at zero, so the first oval you create will always be <code>ovals[0]</code> even if you want to start the counting at <code>1</code>. </p>\n\n<p>Another option is to use a dictionary rather than a list, which lets you use any arbitrary names or numbers for the ovals, and doesn't require that they are linear.</p>\n\n<pre><code>ovals = {}\novals[1] = bottom_frame.create_oval(...)\novals[100] = bottom_frame.create_oval(...)\n...\ni = 100\n...\nbottom_frame.itemconfigure(ovals[i], ...)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9517055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1eefeb58cbc42a8c6a392c295c45259f?s=128&d=identicon&r=PG&f=1", "display_name": "Tango", "link": "https://stackoverflow.com/users/9517055/tango"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 15, "favorite_count": 0, "closed_date": 1527778257, "answer_count": 1, "score": 0, "last_activity_date": 1527777942, "creation_date": 1527721765, "question_id": 50614498, "link": "https://stackoverflow.com/questions/50614498/tkinte-loop-through-image-objects-and-set-itemconfigure", "closed_reason": "Duplicate", "title": "Tkinte: loop through image objects and set itemconfigure", "body": "<p>I have created a bunch of OVALS. And have defined a variable (w_oval) to be used in a FOR. Itemconfigure does not accept this variable.  Something about immutable variables? How do I define a variable for the itemconfigure? I know I'm missing some philosophy here.</p>\n\n<pre><code>b1_oval = bottom_frame.create_oval( 25,180,65,205, fill='')\nb2_oval = bottom_frame.create_oval( 25,180,65,205, fill='')\n#... more bn_oval\n\ni_oval = 0\nw_oval = ''\novalLONG = [-90,-75,-60,-45,-30,-15,0,15,30,45,60,75,90]\nfor j in ovalLONG:\n    i_oval = i_oval + 1\n    w_oval = str('b'+str(i_oval)+'_oval') # Not flying Wilbur\n    if i == j:\n           bottom_frame.itemconfigure(w_oval, fill='goldenrod3')\n</code></pre>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": true, "score": 3, "last_activity_date": 1527722021, "creation_date": 1527722021, "answer_id": 50614525, "question_id": 50614482, "link": "https://stackoverflow.com/questions/50614482/how-to-pass-a-keyword-to-the-function-to-use-the-default-argument/50614525#50614525", "title": "how to pass a keyword to the function to use the default argument", "body": "<p>What you probably want here is to make the function a bit more complicated:</p>\n\n<pre><code>def print_name(name=None):\n    if not name:\n        name='lisa'\n    print name\n</code></pre>\n\n<p>\u2026 so you can make calling it a lot simpler:</p>\n\n<pre><code>print_name(name)\n</code></pre>\n\n<p>That <code>if not name:</code> will be true whenever <code>name</code> is anything falsey\u2014whether that's the default value of <code>None</code>, or an empty string. That may not be exactly what you want\u2014maybe you want to explicitly set the default value to <code>''</code> and check <code>if name == '':</code>, for example\u2014but it's usually a good first guess.</p>\n\n<hr>\n\n<p>So:</p>\n\n<pre><code>&gt;&gt;&gt; name = ''\n&gt;&gt;&gt; print_name(name)\nlisa\n&gt;&gt;&gt; name = 'alis'\n&gt;&gt;&gt; print_name(name)\nalis\n</code></pre>\n\n<p>\u2026 but you can still do this:</p>\n\n<pre><code>&gt;&gt;&gt; print_name()\nlisa\n</code></pre>\n\n<p>\u2026 which is presumably the reason you added a default value in the first place.</p>\n"}], "owner": {"reputation": 2996, "user_id": 3553228, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b48e7a43f7c3cca4a3826be398b8e32a?s=128&d=identicon&r=PG&f=1", "display_name": "Lisa", "link": "https://stackoverflow.com/users/3553228/lisa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 50614525, "answer_count": 1, "score": 1, "last_activity_date": 1527722021, "creation_date": 1527721615, "question_id": 50614482, "link": "https://stackoverflow.com/questions/50614482/how-to-pass-a-keyword-to-the-function-to-use-the-default-argument", "title": "how to pass a keyword to the function to use the default argument", "body": "<p>What should I pass to use the default value for \"name\"? I do not want to explicitly pass 'lisa' since it is the default argument and the user might not be aware. But if I pass an variable \"name\", I have to use a if else clause to pass nothing to the function in order to print\"lisa\". </p>\n\n<pre><code>def print_name(name='lisa'):\n    print name\n\nif name != '':\n    print_name(name) \nelse:\n    print_name()  # print lisa\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "unit-testing", "flask"], "answers": [{"tags": [], "owner": {"reputation": 7730, "user_id": 5511849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ggmzY.png?s=128&g=1", "display_name": "Grey Li", "link": "https://stackoverflow.com/users/5511849/grey-li"}, "is_accepted": false, "score": 0, "last_activity_date": 1527728098, "creation_date": 1527728098, "answer_id": 50615210, "question_id": 50614437, "link": "https://stackoverflow.com/questions/50614437/unit-tests-for-flask-api-routes/50615210#50615210", "title": "Unit tests for flask API routes", "body": "<p>You can get the answer for Q1 in <a href=\"http://flask.pocoo.org/docs/1.0/testing\" rel=\"nofollow noreferrer\">Flask's documentation for testing</a>. To be specific, there is a chapter called <a href=\"http://flask.pocoo.org/docs/1.0/testing/#testing-json-apis\" rel=\"nofollow noreferrer\">Testing JSON APIs</a>.</p>\n\n<p>As of Q2, a typical structure may like this:</p>\n\n<pre><code>| my_app_pkg\n| tests\n| setup.py\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10209455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXOfV.jpg?s=128&g=1", "display_name": "Christopher Kaggwa", "link": "https://stackoverflow.com/users/10209455/christopher-kaggwa"}, "is_accepted": false, "score": 0, "last_activity_date": 1537633078, "creation_date": 1537633078, "answer_id": 52458522, "question_id": 50614437, "link": "https://stackoverflow.com/questions/50614437/unit-tests-for-flask-api-routes/52458522#52458522", "title": "Unit tests for flask API routes", "body": "<p>There are many ways you can do that;</p>\n\n<pre><code>one could be creating a models file and include classes to contain all the data and \nlogic you have included in the update route.So in your  unittests file you import \nthose modals and test for the functions....In your routes you could just call for the \nresults from the modals\n</code></pre>\n\n<p>Also you can just import your main into your tsts file and start with something like this</p>\n\n<pre><code> res = self.client().post('/update_account', data={[the json your api takes]}\n    self.assertEqual(res.status_code, 201)\n</code></pre>\n"}], "owner": {"reputation": 1533, "user_id": 2588860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/66c08b30d390176ba34dc80f6f677e23?s=128&d=identicon&r=PG", "display_name": "rodrigocf", "link": "https://stackoverflow.com/users/2588860/rodrigocf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3414, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1583405321, "creation_date": 1527721350, "last_edit_date": 1583405321, "question_id": 50614437, "link": "https://stackoverflow.com/questions/50614437/unit-tests-for-flask-api-routes", "title": "Unit tests for flask API routes", "body": "<p>I'm building a simple flask API and i'm fairly new to it, I already have about 8 routes in <code>/my_app_name/main/controllers.py</code> and I would like to write unit tests for them. Some of these routes use json received in the body of the request to do something:</p>\n\n<pre><code>@main.route('/update_account', methods=['POST'])\ndef update_account():\n\n    \"\"\"Updates an account in the DB.\"\"\"\n\n    ##########################################\n    # gets the item\n\n    item = request.json\n\n    # code to add to the DB\n\n    return \"Success!\"\n</code></pre>\n\n<p>How do I write a unit test for this? Also what would be the right directory to put the tests on?</p>\n"}, {"tags": ["python", "pandas", "loops", "dataframe", "vectorization"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1527723828, "post_id": 50614366, "comment_id": 88239308, "body": "I would consider another data-structure if you are looking for efficiency, although, there are some real <code>pandas</code> wizards around here, and maybe they can suggest something performant in pandas"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1527723877, "post_id": 50614366, "comment_id": 88239319, "body": "Note, you are using <b>the worst possible way</b> to iterate over a dataframe. Use <code>itertuples()</code>, iterating over indices and using <code>.loc</code> based indexing is going to be <b>super slow</b>."}, {"owner": {"reputation": 8406, "user_id": 1505259, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ceaedd957392be22e5683aef65947c9d?s=128&d=identicon&r=PG", "display_name": "marillion", "link": "https://stackoverflow.com/users/1505259/marillion"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1527724506, "post_id": 50614366, "comment_id": 88239456, "body": "@juanpa.arrivillaga I&#39;m well aware of the inefficiency :) I also looked at <code>itertuples()</code> and <code>iterrows()</code>, but I could not figure out how to implement the required nested loop."}, {"owner": {"reputation": 8406, "user_id": 1505259, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ceaedd957392be22e5683aef65947c9d?s=128&d=identicon&r=PG", "display_name": "marillion", "link": "https://stackoverflow.com/users/1505259/marillion"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1527781209, "post_id": 50614366, "comment_id": 88266116, "body": "@juanpa.arrivillaga turns out my inefficient <code>iloc</code> based iteration is not setup correctly anyway. I need to fix that first."}, {"owner": {"reputation": 20427, "user_id": 2570261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e71068b09fc539447a0cee3e99fc419d?s=128&d=identicon&r=PG&f=1", "display_name": "Haleemur Ali", "link": "https://stackoverflow.com/users/2570261/haleemur-ali"}, "edited": false, "score": 0, "creation_date": 1527965136, "post_id": 50614366, "comment_id": 88330200, "body": "in your actual dataset, what is <code>df.ARRIVAL.min()</code> &amp; <code>df.ARRIVAL.max()</code>"}, {"owner": {"reputation": 8406, "user_id": 1505259, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ceaedd957392be22e5683aef65947c9d?s=128&d=identicon&r=PG", "display_name": "marillion", "link": "https://stackoverflow.com/users/1505259/marillion"}, "edited": false, "score": 1, "creation_date": 1527970205, "post_id": 50614366, "comment_id": 88331500, "body": "They range from 0 to 7.7 million. They are seconds for a 3 month period, initialized to 0 seconds at the beginning of the data collection period."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1527978574, "post_id": 50614366, "comment_id": 88333471, "body": "How huge is &quot;huge&quot;? How many rows does the df have? How long is the longest time a plane can stay on a lane?"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1528035057, "post_id": 50614366, "comment_id": 88344414, "body": "Also note that a simple python loop would solve the above example case in some 10 &#181;s or so. Hence you should provide a test case with at least some 1000 elements or so to let people test against."}, {"owner": {"reputation": 20427, "user_id": 2570261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e71068b09fc539447a0cee3e99fc419d?s=128&d=identicon&r=PG&f=1", "display_name": "Haleemur Ali", "link": "https://stackoverflow.com/users/2570261/haleemur-ali"}, "edited": false, "score": 0, "creation_date": 1528036824, "post_id": 50614366, "comment_id": 88344949, "body": "will the dataframe index equal <code>PLANE</code> always?"}, {"owner": {"reputation": 8406, "user_id": 1505259, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ceaedd957392be22e5683aef65947c9d?s=128&d=identicon&r=PG", "display_name": "marillion", "link": "https://stackoverflow.com/users/1505259/marillion"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1528059368, "post_id": 50614366, "comment_id": 88351544, "body": "@ImportanceOfBeingErnest agreed, &quot;huge&quot; is too ambiguous. Depending on the data file, I would say there may be up to 28 million rows. I would say the delta time (<code>DEPARTURE - ARRIVAL</code>) may vary between 2 and 20. I also agree with your recommendation to have a larger data set. I edited the post, and included a short bit of code to generate a DataFrame with 1000 rows (you may increase the parameters in the code for delta time) if you&#39;d like."}, {"owner": {"reputation": 8406, "user_id": 1505259, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ceaedd957392be22e5683aef65947c9d?s=128&d=identicon&r=PG", "display_name": "marillion", "link": "https://stackoverflow.com/users/1505259/marillion"}, "reply_to_user": {"reputation": 20427, "user_id": 2570261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e71068b09fc539447a0cee3e99fc419d?s=128&d=identicon&r=PG&f=1", "display_name": "Haleemur Ali", "link": "https://stackoverflow.com/users/2570261/haleemur-ali"}, "edited": false, "score": 0, "creation_date": 1528059479, "post_id": 50614366, "comment_id": 88351567, "body": "@HaleemurAli Thanks for the code you put together! Yes, the dataframe index will be equal to <code>PLANE</code>. Also please see the edit for a random dataframe generator, to provide a bigger dataset per @ImportanceOfBeingErnest&#39;s recommendation. Also the code should run in Python 2.7.x, but that&#39;s my bad, not mentioning at the beginning."}], "answers": [{"comments": [{"owner": {"reputation": 8406, "user_id": 1505259, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ceaedd957392be22e5683aef65947c9d?s=128&d=identicon&r=PG", "display_name": "marillion", "link": "https://stackoverflow.com/users/1505259/marillion"}, "edited": false, "score": 1, "creation_date": 1528126310, "post_id": 50662062, "comment_id": 88377801, "body": "With the 1000 row dataframe, speed gains are more impressive. On my machine, around 50X for the single events case, and 17X for the multi events case."}, {"owner": {"reputation": 20427, "user_id": 2570261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e71068b09fc539447a0cee3e99fc419d?s=128&d=identicon&r=PG&f=1", "display_name": "Haleemur Ali", "link": "https://stackoverflow.com/users/2570261/haleemur-ali"}, "reply_to_user": {"reputation": 8406, "user_id": 1505259, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ceaedd957392be22e5683aef65947c9d?s=128&d=identicon&r=PG", "display_name": "marillion", "link": "https://stackoverflow.com/users/1505259/marillion"}, "edited": false, "score": 0, "creation_date": 1528126514, "post_id": 50662062, "comment_id": 88377941, "body": "i have made another improvement that improves performance as number of rows increases. will update when the benchmarks finish running."}, {"owner": {"reputation": 20427, "user_id": 2570261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e71068b09fc539447a0cee3e99fc419d?s=128&d=identicon&r=PG&f=1", "display_name": "Haleemur Ali", "link": "https://stackoverflow.com/users/2570261/haleemur-ali"}, "reply_to_user": {"reputation": 8406, "user_id": 1505259, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ceaedd957392be22e5683aef65947c9d?s=128&d=identicon&r=PG", "display_name": "marillion", "link": "https://stackoverflow.com/users/1505259/marillion"}, "edited": false, "score": 0, "creation_date": 1528135626, "post_id": 50662062, "comment_id": 88382450, "body": "@marillion, see updated answer for even faster solution"}, {"owner": {"reputation": 20427, "user_id": 2570261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e71068b09fc539447a0cee3e99fc419d?s=128&d=identicon&r=PG&f=1", "display_name": "Haleemur Ali", "link": "https://stackoverflow.com/users/2570261/haleemur-ali"}, "reply_to_user": {"reputation": 8406, "user_id": 1505259, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ceaedd957392be22e5683aef65947c9d?s=128&d=identicon&r=PG", "display_name": "marillion", "link": "https://stackoverflow.com/users/1505259/marillion"}, "edited": false, "score": 0, "creation_date": 1528135751, "post_id": 50662062, "comment_id": 88382503, "body": "your production dataset should be processed in a few minutes with this update"}, {"owner": {"reputation": 8406, "user_id": 1505259, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ceaedd957392be22e5683aef65947c9d?s=128&d=identicon&r=PG", "display_name": "marillion", "link": "https://stackoverflow.com/users/1505259/marillion"}, "edited": false, "score": 0, "creation_date": 1528142051, "post_id": 50662062, "comment_id": 88385405, "body": "This seems to be a great solution. Currently I am running my own benchmarks, and I will post the results. One thing to be careful here: it looks like the order of the columns in the DataFrame should precisely follow what I generated in the example df (<code>PLANE</code> <code>STRIP</code> <code>ARRIVAL</code> <code>DEPARTURE</code>). My actual data file has numerous other columns, and I had to sort them to make sure the first 4 columns match the example given in this post."}, {"owner": {"reputation": 20427, "user_id": 2570261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e71068b09fc539447a0cee3e99fc419d?s=128&d=identicon&r=PG&f=1", "display_name": "Haleemur Ali", "link": "https://stackoverflow.com/users/2570261/haleemur-ali"}, "reply_to_user": {"reputation": 8406, "user_id": 1505259, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ceaedd957392be22e5683aef65947c9d?s=128&d=identicon&r=PG", "display_name": "marillion", "link": "https://stackoverflow.com/users/1505259/marillion"}, "edited": false, "score": 0, "creation_date": 1528158075, "post_id": 50662062, "comment_id": 88390609, "body": "@marillion, the positional indexing was a small optimization. if you use the <code>sets = d.apply(...)</code> from the earlier implementation, there won&#39;t be much of a performance penalty."}, {"owner": {"reputation": 8406, "user_id": 1505259, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ceaedd957392be22e5683aef65947c9d?s=128&d=identicon&r=PG", "display_name": "marillion", "link": "https://stackoverflow.com/users/1505259/marillion"}, "edited": false, "score": 0, "creation_date": 1528160322, "post_id": 50662062, "comment_id": 88391069, "body": "thanks a lot for your time! This should be the accepted answer. I hope it was a good exercise for you as well."}, {"owner": {"reputation": 8406, "user_id": 1505259, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ceaedd957392be22e5683aef65947c9d?s=128&d=identicon&r=PG", "display_name": "marillion", "link": "https://stackoverflow.com/users/1505259/marillion"}, "edited": false, "score": 0, "creation_date": 1528336198, "post_id": 50662062, "comment_id": 88471617, "body": "just found out that your functions do not comply with the following requirement: <i>do not include subsets of events (e.g. do not show [3,4] if there is a valid [3,4,5] case)</i> . Both [3,4] and [3,4,5] are listed in the output from <code>hal_3</code> and <code>hal_5</code>. I tried fixing it, but haven&#39;t been able to do so yet."}, {"owner": {"reputation": 20427, "user_id": 2570261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e71068b09fc539447a0cee3e99fc419d?s=128&d=identicon&r=PG&f=1", "display_name": "Haleemur Ali", "link": "https://stackoverflow.com/users/2570261/haleemur-ali"}, "reply_to_user": {"reputation": 8406, "user_id": 1505259, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ceaedd957392be22e5683aef65947c9d?s=128&d=identicon&r=PG", "display_name": "marillion", "link": "https://stackoverflow.com/users/1505259/marillion"}, "edited": false, "score": 0, "creation_date": 1528339704, "post_id": 50662062, "comment_id": 88472393, "body": "there was a typo when i first copied the <code>maximal_subsets_2</code> function to the answer. use the current version of the code and try again."}, {"owner": {"reputation": 8406, "user_id": 1505259, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ceaedd957392be22e5683aef65947c9d?s=128&d=identicon&r=PG", "display_name": "marillion", "link": "https://stackoverflow.com/users/1505259/marillion"}, "edited": false, "score": 0, "creation_date": 1528341823, "post_id": 50662062, "comment_id": 88472760, "body": "I don&#39;t think it is about that. When I run my original functions and your updated functions for a random dataframe of 100 elements, the length of resulting lists are: 25, 42 vs. 27, 50 for single and multi cases. As mentioned, your functions include events such as [3,4] and [3,4,5] in the list at the same time, instead of only including [3,4,5]."}, {"owner": {"reputation": 8406, "user_id": 1505259, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ceaedd957392be22e5683aef65947c9d?s=128&d=identicon&r=PG", "display_name": "marillion", "link": "https://stackoverflow.com/users/1505259/marillion"}, "edited": false, "score": 0, "creation_date": 1528387665, "post_id": 50662062, "comment_id": 88499179, "body": "I have posted a modified version of your code (see EDIT3), where the subset removal is implemented. It comes with a big hit to performance though."}, {"owner": {"reputation": 20427, "user_id": 2570261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e71068b09fc539447a0cee3e99fc419d?s=128&d=identicon&r=PG&f=1", "display_name": "Haleemur Ali", "link": "https://stackoverflow.com/users/2570261/haleemur-ali"}, "reply_to_user": {"reputation": 8406, "user_id": 1505259, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ceaedd957392be22e5683aef65947c9d?s=128&d=identicon&r=PG", "display_name": "marillion", "link": "https://stackoverflow.com/users/1505259/marillion"}, "edited": false, "score": 0, "creation_date": 1528398216, "post_id": 50662062, "comment_id": 88504465, "body": "@marillion, i&#39;m travelling for the next few days, so it won&#39;t be possible for me to figure out what&#39;s wrong. but can you try this small example: <code>x = np.array([frozenset([]), frozenset([1]), frozenset([1,2]), frozenset([1,3]), frozenset([1,2,3])])</code> and then <code>maximal_subsets(x)</code> should return only <code>[1,2,3]</code>"}, {"owner": {"reputation": 20427, "user_id": 2570261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e71068b09fc539447a0cee3e99fc419d?s=128&d=identicon&r=PG&f=1", "display_name": "Haleemur Ali", "link": "https://stackoverflow.com/users/2570261/haleemur-ali"}, "reply_to_user": {"reputation": 8406, "user_id": 1505259, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ceaedd957392be22e5683aef65947c9d?s=128&d=identicon&r=PG", "display_name": "marillion", "link": "https://stackoverflow.com/users/1505259/marillion"}, "edited": false, "score": 0, "creation_date": 1528816935, "post_id": 50662062, "comment_id": 88646610, "body": "@marillion, see updated answer for the bug fix. essentially, if the iteration is reversed, then any set that is a subset will be properly omitted from the final result"}, {"owner": {"reputation": 8406, "user_id": 1505259, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ceaedd957392be22e5683aef65947c9d?s=128&d=identicon&r=PG", "display_name": "marillion", "link": "https://stackoverflow.com/users/1505259/marillion"}, "edited": false, "score": 0, "creation_date": 1530745884, "post_id": 50662062, "comment_id": 89345580, "body": "just realized you had posted an update. I tried your bug fix. I hate to say it, but it still does not work. If you are curious about what&#39;s going on, feel free to try the modified functions above (which double up the computation time), and compare the results using the random dataframe genarator provided above. I would never think this would be such a tricky question :)"}], "tags": [], "owner": {"reputation": 20427, "user_id": 2570261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e71068b09fc539447a0cee3e99fc419d?s=128&d=identicon&r=PG&f=1", "display_name": "Haleemur Ali", "link": "https://stackoverflow.com/users/2570261/haleemur-ali"}, "is_accepted": true, "score": 3, "last_activity_date": 1528817130, "last_edit_date": 1528817130, "creation_date": 1527982453, "answer_id": 50662062, "question_id": 50614366, "link": "https://stackoverflow.com/questions/50614366/nested-double-row-by-row-iteration-of-a-pandas-dataframe/50662062#50662062", "title": "Nested (double) row by row iteration of a Pandas DataFrame", "body": "<p>I rewrote the solution using <code>DataFrame.apply</code> instead of iterating, and as optimization used numpy arrays wherever possible. I used <code>frozenset</code> because they are immutable and hashable and thus <code>Series.unique</code> works properly. <code>Series.unique</code> fails on elements of type <code>set</code>.</p>\n\n<p>Also, I found <code>d.loc[list(x), 'STRIP'].nunique()</code> to be slightly faster than <code>d.loc[list(x)].STRIP.nunique()</code>. I'm not sure why, but I used the faster statement in the solution below.</p>\n\n<h2>The algorithm in plain English:</h2>\n\n<p>For each row, create a set of indices lower than (or equals) the index of current index whose Departure is greater than the current Arrival. This results in a list of sets.</p>\n\n<p>Return unique sets that are not subsets of other sets (and for the 2nd algorithm,  additionally filter that both <code>STRIP</code>s are referred to by the sets) </p>\n\n<h2>(Update) 2nd Improvement:</h2>\n\n<p>1 small improvement is made by dropping down to the numpy layer and using <code>np.apply_along_axis</code> instead of using df.apply. This is possible \nsince <code>PLANE</code> always equals the dataframe index and we can access the underlying matrix with <code>df.values</code></p>\n\n<p>I found a major improvement with the list comprehension that returns the maximal subsets</p>\n\n<pre><code>[list(x) for x in sets if ~np.any(sets &gt; x)]\n</code></pre>\n\n<p>The above is an O(n^2) order operation. On small datasets this is very fast. However on bigger datasets this statement becomes the bottle neck. To optimize this, first sort the <code>sets</code>, and loop through the elements once more to find the maximal subsets. Once sorted, it is sufficient to check that elem[n] is not a subset of elem[n+1] to determine if elem[n] is a maximal subset. The sort procedure compares two elements with the <code>&lt;</code> operation</p>\n\n<h2>Timings:</h2>\n\n<p>While my original implementation improved the performance significantly in comparison to the OP's attempt, the algorithm was exponential-ordered, as the following chart shows.</p>\n\n<p>I present only the timings for <code>findMultiEvents</code>, <code>hal_2</code> &amp; <code>hal_5</code>. The relative performance of <code>findSinglEvents</code>, <code>hal_1</code> &amp; <code>hal_3</code> are similarly comparable. </p>\n\n<p><a href=\"https://i.stack.imgur.com/RNkgU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RNkgU.png\" alt=\"algorithm execution time ~ input sizes\"></a></p>\n\n<p>scroll below to see the benchmarking code.</p>\n\n<p><em>note that I stopped benchmarking <code>findMumtiEvents</code> &amp; <code>hal_2</code> earlier when it became evident that they were less efficient by an exponential factor</em></p>\n\n<h2>Implementation</h2>\n\n<hr>\n\n<h3>Improved Implementation:</h3>\n\n<pre><code>def maximal_subsets(sets):\n    sets.sort()\n    maximal_sets = []\n    s0 = frozenset()\n    for s in sets[::-1]:\n        if s0 &gt; s or len(s) &lt; 2:\n            continue\n        maximal_sets.append(list(s))\n        s0 = s\n    return maximal_sets\n\ndef maximal_subsets_2(sets, d):\n    sets.sort()\n    maximal_sets = []\n    s0 = frozenset()\n    for s in sets[::-1]:\n        if s0 &gt; s or len(s) &lt; 2 or d.loc[list(s), 'STRIP'].nunique() &lt; 2:\n            continue\n        maximal_sets.append(list(s))\n        s0 = s\n    return maximal_sets\n\n# single\ndef hal_3(d):\n    sets = np.apply_along_axis(\n        lambda x: frozenset(d.PLANE.values[(d.PLANE.values &lt;= x[0]) &amp; (d.DEPARTURE.values &gt; x[2])]), \n        1, d.values\n    )\n    return maximal_subsets(sets)\n# multi\ndef hal_5(d):\n    sets = np.apply_along_axis(\n        lambda x: frozenset(d.PLANE.values[(d.PLANE.values &lt;= x[0]) &amp; (d.DEPARTURE.values &gt; x[2])]), \n        1, d.values\n    )\n    return maximal_subsets_2(sets, d)\n</code></pre>\n\n<h3>Original Implementation:</h3>\n\n<pre><code># findSingleEvents\ndef hal_1(d):\n    sets = d.apply(\n       lambda x: frozenset(\n           d.index.values[(d.index.values &lt;= x.name) &amp; (d.DEPARTURE.values &gt; x.ARRIVAL)]\n       ),\n       axis=1\n    ).unique()\n    return [list(x) for x in sets if ~np.any(sets &gt; x) and len(x) &gt; 1]\n\n# findMultiEvents\ndef hal_2(d):\n    sets = d.apply(\n        lambda x: frozenset(\n            d.index.values[(d.index.values &lt;= x.name) &amp; (d.DEPARTURE.values &gt; x.ARRIVAL)]\n        ),\n        axis=1\n    ).unique()\n    return [list(x) for x in sets \n            if ~np.any(sets &gt; x) and\n               len(x) &gt; 1 and \n               d.loc[list(x), 'STRIP'].nunique() == 2]\n</code></pre>\n\n<h3>Outputs:</h3>\n\n<p>The outputs are identical to the OP's implementation.</p>\n\n<pre><code>hal_1(df[df.STRIP==1])\n[[1, 3]]\nhal_1(df[df.STRIP==2])\n[[4, 5], [4, 6]]\nhal_2(df)\n[[1, 2, 3], [1, 3, 4, 5], [1, 4, 6]]\nhal_3(df[df.STRIP==1])\n[[1, 3]]\nhal_3(df[df.STRIP==2])\n[[4, 5], [4, 6]]\nhal_5(df)\n[[1, 2, 3], [1, 3, 4, 5], [1, 4, 6]]\n</code></pre>\n\n<h3>Test System Details:</h3>\n\n<pre><code>os: windows 10\npython: 3.6 (Anaconda)\npandas: 0.22.0\nnumpy: 1.14.3\n</code></pre>\n\n<h2>Benchmarking code:</h2>\n\n<hr>\n\n<pre><code>import random\n\ndef mk_random_df(n):\n    data =  []\n    for i in range(n):\n        arrival = random.uniform(0,1000)\n        departure = arrival + random.uniform(2.0, 10.0)\n        data.append({'PLANE':i, 'STRIP':random.randint(1, 2),'ARRIVAL':arrival,'DEPARTURE':departure})\n\n    df = pd.DataFrame(data, columns = ['PLANE','STRIP','ARRIVAL','DEPARTURE'])\n    df = df.sort_values(by=['ARRIVAL'])\n    df = df.reset_index(drop=True)\n    df.PLANE = df.index\n    return df\n\ndfs = {i: mk_random_df(100*(2**i)) for i in range(0, 10)}\ntimes, times_2, times_5 = [], [], []\n\nfor i, v in dfs.items():\n    if i &lt; 5:\n        t = %timeit -o -n 3 -r 3 findMultiEvents(v)\n        times.append({'size(pow. of 2)': i, 'timings': t})\n\nfor i, v in dfs.items():\n    t = %timeit -o -n 3 -r 3 hal_5(v)\n    times_5.append({'size(pow. of 2)': i, 'timings': t})\n\nfor i, v in dfs.items():\n    if i &lt; 9:\n        t = %timeit -o -n 3 -r 3 hal_2(v)\n        times_2.append({'size(pow. of 2)': i, 'timings': t})\n</code></pre>\n"}], "owner": {"reputation": 8406, "user_id": 1505259, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ceaedd957392be22e5683aef65947c9d?s=128&d=identicon&r=PG", "display_name": "marillion", "link": "https://stackoverflow.com/users/1505259/marillion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6259, "favorite_count": 3, "accepted_answer_id": 50662062, "answer_count": 1, "score": 11, "last_activity_date": 1528817130, "creation_date": 1527720844, "last_edit_date": 1528387470, "question_id": 50614366, "link": "https://stackoverflow.com/questions/50614366/nested-double-row-by-row-iteration-of-a-pandas-dataframe", "title": "Nested (double) row by row iteration of a Pandas DataFrame", "body": "<p>Hi I am trying to find a vectorized (or more efficient) solution to an iteration problem, where the only solution I found requires row by row iteration of a DataFrame with multiple loops. The actual data file is huge, so my current solution is practically unfeasible. I included line profiler outputs at the very end, if you'd like to have a look. The real problem is quite complex, so I'll try to explain this with a simple example (took me quite a while to simplify it :)):</p>\n\n<p>Assume we have an airport with two landing strips side by side. Each plane lands (arrival time), taxis on one of the landing strips for a while, then takes off (departure time). Everything is stored in a Pandas DataFrame, which is sorted by the arrival time, as follows (see <strong>EDIT2</strong> for a bigger dataset for testing) :</p>\n\n<pre><code>PLANE   STRIP   ARRIVAL   DEPARTURE\n0       1       85.00     86.00\n1       1       87.87     92.76\n2       2       88.34     89.72\n3       1       88.92     90.88\n4       2       90.03     92.77\n5       2       90.27     91.95\n6       2       92.42     93.58\n7       2       94.42     95.58\n</code></pre>\n\n<p>Looking for solutions to two cases:</p>\n\n<p><strong>1.</strong> Build a list of events where there are more than one plane present on a single strip at a time. Do not include subsets of events (e.g. do not show [3,4] if there is a valid [3,4,5] case). The list should store the indices of the actual DataFrame rows. See function findSingleEvents() for a solution for this case (runs around 5 ms).</p>\n\n<p><strong>2.</strong> Build a list of events where there is at least one plane on each strip at a time. Do not count subsets of an event, only record the event with maximum number of planes. (e.g. do not show [3,4] if there is a [3,4,5] case). Do not count events that fully occur on a single strip. The list should store the indices of the actual DataFrame rows. See function findMultiEvents() for a solution for this case (runs around 15 ms).</p>\n\n<p><strong>Working Code:</strong></p>\n\n<pre><code>import numpy as np\nimport pandas as pd\nimport itertools\nfrom __future__ import division\n\ndata =  [{'PLANE':0, 'STRIP':1, 'ARRIVAL':85.00, 'DEPARTURE':86.00},\n         {'PLANE':1, 'STRIP':1, 'ARRIVAL':87.87, 'DEPARTURE':92.76},\n         {'PLANE':2, 'STRIP':2, 'ARRIVAL':88.34, 'DEPARTURE':89.72},\n         {'PLANE':3, 'STRIP':1, 'ARRIVAL':88.92, 'DEPARTURE':90.88},\n         {'PLANE':4, 'STRIP':2, 'ARRIVAL':90.03, 'DEPARTURE':92.77},\n         {'PLANE':5, 'STRIP':2, 'ARRIVAL':90.27, 'DEPARTURE':91.95},\n         {'PLANE':6, 'STRIP':2, 'ARRIVAL':92.42, 'DEPARTURE':93.58},\n         {'PLANE':7, 'STRIP':2, 'ARRIVAL':94.42, 'DEPARTURE':95.58}]\n\ndf = pd.DataFrame(data, columns = ['PLANE','STRIP','ARRIVAL','DEPARTURE'])\n\ndef findSingleEvents(df):\n    events = []\n    for row in df.itertuples():\n        #Create temporary dataframe for each main iteration\n        dfTemp = df[(row.DEPARTURE&gt;df.ARRIVAL) &amp; (row.ARRIVAL&lt;df.DEPARTURE)]\n        if len(dfTemp)&gt;1:\n            #convert index values to integers from long\n            current_event = [int(v) for v in dfTemp.index.tolist()]\n            #loop backwards to remove elements that do not comply\n            for i in reversed(current_event):\n                if (dfTemp.loc[i].ARRIVAL &gt; dfTemp.DEPARTURE).any():\n                    current_event.remove(i)\n            events.append(current_event)\n    #remove duplicate events\n    events = map(list, set(map(tuple, events)))\n    return events\n\ndef findMultiEvents(df):\n    events = []\n    for row in df.itertuples():\n        #Create temporary dataframe for each main iteration\n        dfTemp = df[(row.DEPARTURE&gt;df.ARRIVAL) &amp; (row.ARRIVAL&lt;df.DEPARTURE)]\n        if len(dfTemp)&gt;1:\n            #convert index values to integers from long\n            current_event = [int(v) for v in dfTemp.index.tolist()]\n            #loop backwards to remove elements that do not comply\n            for i in reversed(current_event):\n                if (dfTemp.loc[i].ARRIVAL &gt; dfTemp.DEPARTURE).any():\n                    current_event.remove(i)\n            #remove elements only on 1 strip\n            if len(df.iloc[current_event].STRIP.unique()) &gt; 1:\n                events.append(current_event)\n    #remove duplicate events\n    events = map(list, set(map(tuple, events)))\n    return events\n\nprint findSingleEvents(df[df.STRIP==1])\nprint findSingleEvents(df[df.STRIP==2])\nprint findMultiEvents(df)\n</code></pre>\n\n<p><strong>Verified Output:</strong></p>\n\n<pre><code>[[1, 3]]\n[[4, 5], [4, 6]]\n[[1, 3, 4, 5], [1, 4, 6], [1, 2, 3]]\n</code></pre>\n\n<p>Obviously, these are neither efficient nor elegant solutions. With the huge DataFrame I have, running this will probably take hours. I thought about a vectorized approach quite a while, but could not come up anything solid. Any pointers/help would be welcome! I am also open to Numpy/Cython/Numba based approches.</p>\n\n<p>Thanks!</p>\n\n<p><strong>PS:</strong> If you wonder what I will do with the lists: I will assign an <code>EVENT</code> number to each <code>EVENT</code>, and build a separate database with merging the data above, and the <code>EVENT</code> numbers as a separate column, to be used for something else. For Case 1, it will look something like this:</p>\n\n<pre><code>EVENT    PLANE   STRIP   ARRIVAL   DEPARTURE\n0        4       2       90.03     92.77\n0        5       2       90.27     91.95\n1        5       2       90.27     91.95\n1        6       2       92.42     95.58\n</code></pre>\n\n<p><strong>EDIT:</strong> Revised the code and the test data set.</p>\n\n<p><strong>EDIT2:</strong> Use the code below to generate a 1000 row (or more) long DataFrame for testing purposes. (per @ImportanceOfBeingErnest 's recommendation)</p>\n\n<pre><code>import random\nimport pandas as pd\nimport numpy as np\n\ndata =  []\nfor i in range(1000):\n    arrival = random.uniform(0,1000)\n    departure = arrival + random.uniform(2.0, 10.0)\n    data.append({'PLANE':i, 'STRIP':random.randint(1, 2),'ARRIVAL':arrival,'DEPARTURE':departure})\n\ndf = pd.DataFrame(data, columns = ['PLANE','STRIP','ARRIVAL','DEPARTURE'])\ndf = df.sort_values(by=['ARRIVAL'])\ndf = df.reset_index(drop=True)\ndf.PLANE  = df.index\n</code></pre>\n\n<p><strong>EDIT3:</strong></p>\n\n<p>Modified version of the accepted answer. The accepted answer was not able to remove subsets of events. Modified version satisfies the rule \"(e.g. do not show [3,4] if there is a valid [3,4,5] case)\"</p>\n\n<pre><code>def maximal_subsets_modified(sets):\n    sets.sort()\n    maximal_sets = []\n    s0 = frozenset()\n    for s in sets:\n        if not (s &gt; s0) and len(s0) &gt; 1:\n            not_in_list = True\n            for x in maximal_sets:\n                if set(x).issubset(set(s0)):\n                    maximal_sets.remove(x)\n                if set(s0).issubset(set(x)):\n                    not_in_list = False\n            if not_in_list:\n                maximal_sets.append(list(s0))\n        s0 = s\n    if len(s0) &gt; 1:\n        not_in_list = True\n        for x in maximal_sets:\n            if set(x).issubset(set(s0)):\n                maximal_sets.remove(x)\n            if set(s0).issubset(set(x)):\n                not_in_list = False\n        if not_in_list:\n            maximal_sets.append(list(s0))\n    return maximal_sets\n\ndef maximal_subsets_2_modified(sets, d):\n    sets.sort()\n    maximal_sets = []\n    s0 = frozenset()\n    for s in sets:\n        if not (s &gt; s0) and len(s0) &gt; 1 and d.loc[list(s0), 'STRIP'].nunique() == 2:\n            not_in_list = True\n            for x in maximal_sets:\n                if set(x).issubset(set(s0)):\n                    maximal_sets.remove(x)\n                if set(s0).issubset(set(x)):\n                    not_in_list = False\n            if not_in_list:\n                maximal_sets.append(list(s0))\n        s0 = s\n    if len(s0) &gt; 1 and d.loc[list(s), 'STRIP'].nunique() == 2:\n        not_in_list = True\n        for x in maximal_sets:\n            if set(x).issubset(set(s0)):\n                maximal_sets.remove(x)\n            if set(s0).issubset(set(x)):\n                not_in_list = False\n        if not_in_list:\n            maximal_sets.append(list(s0))\n    return maximal_sets\n\n# single\n\ndef hal_3_modified(d):\n    sets = np.apply_along_axis(\n        lambda x: frozenset(d.PLANE.values[(d.PLANE.values &lt;= x[0]) &amp; (d.DEPARTURE.values &gt; x[2])]), \n        1, d.values\n    )\n    return maximal_subsets_modified(sets)\n\n# multi\n\ndef hal_5_modified(d):\n    sets = np.apply_along_axis(\n        lambda x: frozenset(d.PLANE.values[(d.PLANE.values &lt;= x[0]) &amp; (d.DEPARTURE.values &gt; x[2])]), \n        1, d.values\n    )\n    return maximal_subsets_2_modified(sets, d)\n</code></pre>\n"}, {"tags": ["python", "c++", "gcc"], "comments": [{"owner": {"reputation": 541, "user_id": 3822038, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/edb32f7a768bcafce4b72dbcf5dacd5a?s=128&d=identicon&r=PG&f=1", "display_name": "echo", "link": "https://stackoverflow.com/users/3822038/echo"}, "edited": false, "score": 1, "creation_date": 1527720535, "post_id": 50614328, "comment_id": 88238492, "body": "I have PhraseSpotter.a and pyOkHound.cpp in the same directory"}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1527723910, "post_id": 50614328, "comment_id": 88239330, "body": "Can you cheat and put another <code>gcc</code> on your <code>PATH</code> that\u2019s just a shell script that shows its arguments?"}], "owner": {"reputation": 541, "user_id": 3822038, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/edb32f7a768bcafce4b72dbcf5dacd5a?s=128&d=identicon&r=PG&f=1", "display_name": "echo", "link": "https://stackoverflow.com/users/3822038/echo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1527721453, "creation_date": 1527720530, "last_edit_date": 1527721453, "question_id": 50614328, "link": "https://stackoverflow.com/questions/50614328/how-to-convert-python-distutils-core-function-call-extension-to-a-gcc-command", "title": "How to convert python distutils.core function call &quot;extension&quot; to a gcc command", "body": "<p>How to convert python distutils.core function call \"extension\" to a gcc command</p>\n\n<p>So I use a third party python library that uses a script that calls distuils to install the library</p>\n\n<pre><code>from distutils.core import setup, Extension\n\nmodule1 = Extension(\"okhound\",\n                    sources = [\"pyOkHound.cpp\"],\n                    libraries = [\"PhraseSpotter\"],\n                    library_dirs = [\".\"])\n\nsetup(name = \"OkHound\",\n      version = \"1.0\",\n      description = \"'Ok Hound' phrase spotter.\",\n      ext_modules = [module1])\n</code></pre>\n\n<p>Upon some investigation I find out that the result of the script is a output.so file. Since we are using a cross-compiler with make files for our target machine, I am trying to find a way to do what the script does in gcc. \nI have access to the PhraseSpotter.a file and pyOkHound.cpp file and was wondering how to get the output.so file like the above script did?</p>\n\n<p>What is setup doing behind the scene?</p>\n\n<p>Update\nThings I have tried: </p>\n\n<pre><code>gcc -o output -l PhraseSpotter main.o\ngcc -c -fPIC pyOkHound.cpp -o pyOkHound.o\ngcc -shared -o output.so -fPIC pyOkHound.cpp\n</code></pre>\n\n<p>But they do not link the libraries with the source like the extension command did. \nI am not sure how the link the static library to the cpp file. </p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1528314847, "post_id": 50614323, "comment_id": 88464994, "body": "Thanks! You can also upvote answers if you found them helpful ;-)"}], "answers": [{"tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 1, "last_activity_date": 1527720857, "creation_date": 1527720857, "answer_id": 50614368, "question_id": 50614323, "link": "https://stackoverflow.com/questions/50614323/rename-column-based-on-other-column-value/50614368#50614368", "title": "Rename column based on other column value", "body": "<p>Both questions are answered by <code>pd.Series.between</code>.</p>\n\n<pre><code>m = df['LA Code'].between(201, 213)\ndf.loc[m, 'Region'] = 'Inner ' + df.loc[m, 'Region']\n# df.loc[m, 'Region'] = df.loc[m, 'Region'].radd('Inner ')\n</code></pre>\n\n<p>And,</p>\n\n<pre><code>m = df['LA Code'].between(301, 320)\ndf.loc[m, 'Region'] = 'Outer ' + df.loc[m, 'Region']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 1, "last_activity_date": 1527721837, "last_edit_date": 1527721837, "creation_date": 1527721508, "answer_id": 50614465, "question_id": 50614323, "link": "https://stackoverflow.com/questions/50614323/rename-column-based-on-other-column-value/50614465#50614465", "title": "Rename column based on other column value", "body": "<p>Using <code>np.select</code>, you can specify a list of conditions and values:</p>\n\n<pre><code>df = pd.DataFrame([['London', 201, 'City of London'],\n                   ['London', 302, 'Barnet']],\n                  columns=['Region', 'LA Code', 'LA Name'])\n\nconditions = [df['LA Code'].between(201, 213), df['LA Code'].between(301, 320)]\n\nvalues = ['Inner ' + df['Region'], 'Outer ' + df['Region']]\n\ndf['Region'] = np.select(conditions, values, df['Region'])\n\nprint(df)\n\n         Region  LA Code         LA Name\n0  Inner London      201  City of London\n1  Outer London      302          Barnet\n</code></pre>\n\n<p>Note that the final argument to <code>np.select</code> is the default argument, used when none of the conditions supplied are applicable.</p>\n"}], "owner": {"reputation": 41, "user_id": 6009386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1cbd8b85a6c7673aa0457f60bb948b4?s=128&d=identicon&r=PG&f=1", "display_name": "Pi-thon", "link": "https://stackoverflow.com/users/6009386/pi-thon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 50614368, "answer_count": 2, "score": 2, "last_activity_date": 1527722604, "creation_date": 1527720506, "last_edit_date": 1527722604, "question_id": 50614323, "link": "https://stackoverflow.com/questions/50614323/rename-column-based-on-other-column-value", "title": "Rename column based on other column value", "body": "<p>I have a dataframe with the following columns:</p>\n\n<pre><code>Region | LA code | LA Name\n-----------------------------------------\nLondon |    201  | City of London\nLondon |    202  | Camden\nLondon |    203  | Greenwich\nLondon |    204  | Hackney\nLondon |    205  | Hammersmith and Fulham\nLondon |    206  | Islington\nLondon |    207  | Kensington and Chelsea\nLondon |    208  | Lambeth\nLondon |    209  | Lewisham\nLondon |    210  | Southwark\nLondon |    211  | Tower Hamlets\nLondon |    212  | Wandsworth\nLondon |    213  | Westminster\nLondon |    301  | Barking and Dagenham\nLondon |    302  | Barnet\nLondon |    303  | Bexley\nLondon |    304  | Brent\nLondon |    305  | Bromley\nLondon |    306  | Croydon\nLondon |    307  | Ealing\nLondon |    308  | Enfield\nLondon |    309  | Haringey\nLondon |    310  | Harrow\nLondon |    311  | Havering\nLondon |    312  | Hillingdon\nLondon |    313  | Hounslow\nLondon |    314  | Kingston upon Thames\nLondon |    315  | Merton\nLondon |    316  | Newham\nLondon |    317  | Redbridge\nLondon |    318  | Richmond upon Thames\nLondon |    319  | Sutton\nLondon |    320  | Waltham Forest\n</code></pre>\n\n<p>My question is what is a quick and simple way of renaming London to Inner London where the LA code falls within the range 201 - 213 and renaming London to Outer London where the LA code falls within the range 301 - 320?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 303, "user_id": 4430375, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/51ee13ebaef0e2d2b136f5f07b5f5249?s=128&d=identicon&r=PG&f=1", "display_name": "twegner", "link": "https://stackoverflow.com/users/4430375/twegner"}, "edited": false, "score": 0, "creation_date": 1527720987, "post_id": 50614340, "comment_id": 88238592, "body": "This looks promising. However, I&#39;m using pandas 0.15.2 which does not have method <code>sort_values</code>. I&#39;m not sure if I can upgrade my pandas version behind my work firewall. Looking into it now..."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 303, "user_id": 4430375, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/51ee13ebaef0e2d2b136f5f07b5f5249?s=128&d=identicon&r=PG&f=1", "display_name": "twegner", "link": "https://stackoverflow.com/users/4430375/twegner"}, "edited": false, "score": 0, "creation_date": 1527721088, "post_id": 50614340, "comment_id": 88238619, "body": "@twegner try replacing <code>sort_values</code> by <code>df.sort(&#39;cid&#39;, axis=1, ascending=False)</code>?"}, {"owner": {"reputation": 303, "user_id": 4430375, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/51ee13ebaef0e2d2b136f5f07b5f5249?s=128&d=identicon&r=PG&f=1", "display_name": "twegner", "link": "https://stackoverflow.com/users/4430375/twegner"}, "edited": false, "score": 0, "creation_date": 1527721678, "post_id": 50614340, "comment_id": 88238784, "body": "<code>raise ValueError(&#39;When sorting by column, axis must be 0 (rows)</code>. So changing to <code>axis=0</code> made it work. Thanks!"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 303, "user_id": 4430375, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/51ee13ebaef0e2d2b136f5f07b5f5249?s=128&d=identicon&r=PG&f=1", "display_name": "twegner", "link": "https://stackoverflow.com/users/4430375/twegner"}, "edited": false, "score": 0, "creation_date": 1527722219, "post_id": 50614340, "comment_id": 88238920, "body": "@twegner That is just so dumb. Now I know why they dropped the API, lol."}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 1, "last_activity_date": 1527720594, "creation_date": 1527720594, "answer_id": 50614340, "question_id": 50614310, "link": "https://stackoverflow.com/questions/50614310/pandas-remove-duplicates-with-condition-from-data-frame/50614340#50614340", "title": "Pandas remove duplicates with condition from data frame", "body": "<p>You'll need <code>sort_values</code> + <code>drop_duplicates</code>:</p>\n\n<pre><code>df.sort_values('cid', ascending=False).drop_duplicates(['case_id', 'elm_id'])\n\n   case_id  cid  elm_id     fx     fy     fz\n2     1050    2     101   98.8  798.3  948.3\n3     1050    2     102  158.5  452.0  523.9\n6     1051    2     101  333.4  526.7  890.7\n7     1051    2     102  104.2  119.4  422.1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1527721181, "post_id": 50614402, "comment_id": 88238642, "body": "Only works because cid takes two values here: 1 and 2. Not a good approach in general."}], "tags": [], "owner": {"reputation": 288, "user_id": 9378176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/400114ba24a284964fe8fe8663b2890b?s=128&d=identicon&r=PG&f=1", "display_name": "Ivanovitch", "link": "https://stackoverflow.com/users/9378176/ivanovitch"}, "is_accepted": false, "score": 0, "last_activity_date": 1527721119, "creation_date": 1527721119, "answer_id": 50614402, "question_id": 50614310, "link": "https://stackoverflow.com/questions/50614310/pandas-remove-duplicates-with-condition-from-data-frame/50614402#50614402", "title": "Pandas remove duplicates with condition from data frame", "body": "<p>Another way to this:</p>\n\n<pre><code>df[(df.duplicated(subset=['subcase','elm_id']))&amp;(df['cid']&gt;1)]\n\n   case_id  cid  elm_id     fx     fy     fz\n2     1050    2     101   98.8  798.3  948.3\n3     1050    2     102  158.5  452.0  523.9\n6     1051    2     101  333.4  526.7  890.7\n7     1051    2     102  104.2  119.4  422.1\n</code></pre>\n"}], "owner": {"reputation": 303, "user_id": 4430375, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/51ee13ebaef0e2d2b136f5f07b5f5249?s=128&d=identicon&r=PG&f=1", "display_name": "twegner", "link": "https://stackoverflow.com/users/4430375/twegner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 50614340, "answer_count": 2, "score": 0, "last_activity_date": 1527721119, "creation_date": 1527720439, "question_id": 50614310, "link": "https://stackoverflow.com/questions/50614310/pandas-remove-duplicates-with-condition-from-data-frame", "title": "Pandas remove duplicates with condition from data frame", "body": "<p>Consider the following data frame:</p>\n\n<pre><code>df = pd.DataFrame({\n    'case_id': [1050, 1050, 1050, 1050, 1051, 1051, 1051, 1051],\n    'elm_id': [101, 102, 101, 102, 101, 102, 101, 102],\n    'cid': [1, 1, 2, 2, 1, 1, 2, 2],\n    'fx': [736.1, 16.5, 98.8, 158.5, 272.5, 750.0, 333.4, 104.2],\n    'fy': [992.0, 261.3, 798.3, 452.0, 535.9, 838.8, 526.7, 119.4],\n    'fz': [428.4, 611.0, 948.3, 523.9, 880.9, 340.3, 890.7, 422.1]})\n</code></pre>\n\n<p>When printed looks like this:</p>\n\n<p><code>---  case_id  cid  elm_id  fx     fy     fz\n0     1050    1     101  736.1  992.0  428.4\n1     1050    1     102   16.5  261.3  611.0\n2     1050    2     101   98.8  798.3  948.3\n3     1050    2     102  158.5  452.0  523.9\n4     1051    1     101  272.5  535.9  880.9\n5     1051    1     102  750.0  838.8  340.3\n6     1051    2     101  333.4  526.7  890.7\n7     1051    2     102  104.2  119.4  422.1\n</code></p>\n\n<p>I need to remove rows where duplicate values exist in the following two columns <code>subcase</code> and <code>elm_id</code> and retain the row with the highest <code>cid</code>. The data should look like this:</p>\n\n<p><code>---  case_id  cid  elm_id  fx     fy     fz\n0     1050    2     101   98.8  798.3  948.3\n1     1050    2     102  158.5  452.0  523.9\n2     1051    2     101  333.4  526.7  890.7\n3     1051    2     102  104.2  119.4  422.1\n</code></p>\n\n<p>I'm new to pandas. Looking at other similar questions, I tried using <code>.groupby()</code> and <code>max()</code> like this: <code>df2 = df.groupby(['case_id', 'elm_id']).max()['cid'].reset_index()</code>. However I lost my columns <code>fx</code>, <code>fy</code> and <code>fz</code>. I feel like I'm close, I just don't know where to look next.</p>\n"}, {"tags": ["python", "amazon-dynamodb"], "comments": [{"owner": {"reputation": 1031, "user_id": 420552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3921f96430d4c9a0fdc01ef2d49d51f9?s=128&d=identicon&r=PG", "display_name": "laika", "link": "https://stackoverflow.com/users/420552/laika"}, "edited": false, "score": 0, "creation_date": 1528890326, "post_id": 50614290, "comment_id": 88676487, "body": "What do you mean by <code>not quite working</code>? Anyway, don&#39;t do this <code>WhateverAttribute(default = {})</code>. Instead, if the type of the <code>default</code> is mutable, then do <code>WhateverAttribute(default=lambda: {})</code>"}], "answers": [{"tags": [], "owner": {"reputation": 583, "user_id": 3634493, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c4aa08e3beed0090211f6af378c0b600?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Taylor", "link": "https://stackoverflow.com/users/3634493/simon-taylor"}, "is_accepted": false, "score": 0, "last_activity_date": 1529008506, "creation_date": 1529008506, "answer_id": 50865532, "question_id": 50614290, "link": "https://stackoverflow.com/questions/50614290/pynamodb-dynamic-json-serialisation/50865532#50865532", "title": "Pynamodb - Dynamic JSON serialisation", "body": "<p>Ultimately this was down to me not passing the right object to the Map. Once i did that it worked fine.</p>\n"}], "owner": {"reputation": 583, "user_id": 3634493, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c4aa08e3beed0090211f6af378c0b600?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Taylor", "link": "https://stackoverflow.com/users/3634493/simon-taylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1283, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1529008506, "creation_date": 1527720231, "question_id": 50614290, "link": "https://stackoverflow.com/questions/50614290/pynamodb-dynamic-json-serialisation", "title": "Pynamodb - Dynamic JSON serialisation", "body": "<p>I have a composite model which looks like this:-</p>\n\n<pre><code>class Parser(MapAttribute):\n    ParserType = UnicodeAttribute()\n    MailBody = UnicodeAttribute()\n    BestTemplate = UnicodeAttribute(null=True)\n    ParseStatus = ParseStatus()\n    ParsedOutput = JSONAttribute()\n\n\nclass OMPStatusModel(Model):\n    \"\"\"\n    PynamoDB Model handling table OMPStatus\n    \"\"\"\n\n\n    class Meta:\n        table_name = 'OMPStatus'\n        region = 'us-east-1'\n    SNSMessageID = UnicodeAttribute(hash_key=True)\n    CreatedDateTime = UTCDateTimeAttribute()\n    UpdatedDateTime = UTCDateTimeAttribute(null=True)\n    CompletedDateTime = UTCDateTimeAttribute(null=True)\n    ProcessStatus = UnicodeAttribute()\n    ErrorDetail = UnicodeAttribute(default=\"Not set\")\n    SES = SES(null=True)\n    SNS = SNS(null=True)\n    Parser = Parser(null=True)\n</code></pre>\n\n<p>This works well except the ParsedOutput is stored as a list of key value pairs in DynamoDB. I want to make it easy to read for the support team and want to break it out into its own list of attributes - assume they can all be UnicodeAttribute() for the sake of discussion.</p>\n\n<p>I was thinking i should be able to do something like:-</p>\n\n<pre><code>class MyMapAttribute(MapAttribute):\n    my_internal_map = MapAttribute()\n\n\nclass Parser(MapAttribute):\n    ParserType = UnicodeAttribute()\n    MailBody = UnicodeAttribute()\n    BestTemplate = UnicodeAttribute(null=True)\n    ParseStatus = ParseStatus()\n    ParsedOutput = MyMapAttribute(default = {})\n</code></pre>\n\n<p>Then do something like:-</p>\n\n<pre><code>OMPStatusModel.update(actions=[OMPStatusModel.SES.set(kwargs[key]),\n                          OMPStatusModel.UpdatedDateTime.set(datetime.now())])\n</code></pre>\n\n<p>Not quite getting it as its not quite working.\nAny pointers?</p>\n"}, {"tags": ["python", "django", "django-models", "django-orm"], "answers": [{"tags": [], "owner": {"reputation": 6952, "user_id": 5644965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J9KaA.jpg?s=128&g=1", "display_name": "Lemayzeur", "link": "https://stackoverflow.com/users/5644965/lemayzeur"}, "is_accepted": false, "score": 3, "last_activity_date": 1527721538, "last_edit_date": 1527721538, "creation_date": 1527721039, "answer_id": 50614386, "question_id": 50614266, "link": "https://stackoverflow.com/questions/50614266/django-many-to-many-relationship-doesnt-return-set-object/50614386#50614386", "title": "Django many-to-many relationship doesn&#39;t return set object", "body": "<p>It's just because you have changed the <strong>related_name</strong> to <code>users</code></p>\n\n<pre><code>users = models.ManyToManyField(User, related_name='users')\n</code></pre>\n\n<p>Instead of <code>rooms = user.room_set.all()</code> try <code>rooms = user.users.all()</code>.</p>\n\n<p>Note that it's more convenient to name the <strong>related_name</strong> with the plural of the <code>class_name</code>, so you would have:</p>\n\n<pre><code>class Room(models.Model)\n    users = models.ManyToManyField(User, <b>related_name='rooms'</b>)</code></pre>\n\n<p>If you want to use the one of django <code>classname_set</code>; Just remove <code>related_name</code>, so <code>user.room_set.all</code> will work</p>\n"}, {"tags": [], "owner": {"reputation": 67, "user_id": 7463115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52df33a84f4d8292a16c79d2eb49e0bb?s=128&d=identicon&r=PG&f=1", "display_name": "Derar", "link": "https://stackoverflow.com/users/7463115/derar"}, "is_accepted": false, "score": 1, "last_activity_date": 1528153226, "last_edit_date": 1528153226, "creation_date": 1527721187, "answer_id": 50614414, "question_id": 50614266, "link": "https://stackoverflow.com/questions/50614266/django-many-to-many-relationship-doesnt-return-set-object/50614414#50614414", "title": "Django many-to-many relationship doesn&#39;t return set object", "body": "<p>Try this</p>\n\n<pre><code>class Room(Model.models):\n    user = models.ForignKey (User,ONCASCADE  = models.delete)\n    name = models.CharField(unique=True, max_length=255)\n    room_type = models.CharField(max_length=50, null=True)\n    users = models.ManyToManyField(User, related_name='users')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2631, "user_id": 7551257, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/cb65191d421d20322e2cc7b64daa8531?s=128&d=identicon&r=PG&f=1", "display_name": "Melissa Stewart", "link": "https://stackoverflow.com/users/7551257/melissa-stewart"}, "edited": false, "score": 1, "creation_date": 1527722209, "post_id": 50614443, "comment_id": 88238915, "body": "I&#39;ve to say this is the simplest answer."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9818446"}, "is_accepted": true, "score": 1, "last_activity_date": 1527723552, "last_edit_date": 1527723552, "creation_date": 1527721385, "answer_id": 50614443, "question_id": 50614266, "link": "https://stackoverflow.com/questions/50614266/django-many-to-many-relationship-doesnt-return-set-object/50614443#50614443", "title": "Django many-to-many relationship doesn&#39;t return set object", "body": "<p>You don't have user attribute in Room model !</p>\n\n<p>Use this in room class :</p>\n\n<pre><code> users= models.ManyToManyField(User)\n</code></pre>\n\n<p>Also see <a href=\"https://docs.djangoproject.com/en/2.0/topics/db/examples/many_to_many/\" rel=\"nofollow noreferrer\">django doc examples</a> .</p>\n"}], "owner": {"reputation": 2631, "user_id": 7551257, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/cb65191d421d20322e2cc7b64daa8531?s=128&d=identicon&r=PG&f=1", "display_name": "Melissa Stewart", "link": "https://stackoverflow.com/users/7551257/melissa-stewart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 50614443, "answer_count": 3, "score": 3, "last_activity_date": 1528153226, "creation_date": 1527720011, "question_id": 50614266, "link": "https://stackoverflow.com/questions/50614266/django-many-to-many-relationship-doesnt-return-set-object", "title": "Django many-to-many relationship doesn&#39;t return set object", "body": "<p>I've the following User model</p>\n\n<pre><code>class User(AbstractBaseUser, PermissionsMixin):\n    email = models.EmailField(unique=True, max_length=255)\n    mobile = PhoneNumberField(null=True)\n    username = models.CharField(null=False, unique=True, max_length=255)\n    is_staff = models.BooleanField(default=False)\n    is_superuser = models.BooleanField(default=False)\n    is_active = models.BooleanField(default=False)\n</code></pre>\n\n<p>Which has a ManyToMany relationship with a Room </p>\n\n<pre><code>class Room(Base):\n    name = models.CharField(unique=True, max_length=255)\n    room_type = models.CharField(max_length=50, null=True)\n    users = models.ManyToManyField(User, related_name='users')\n</code></pre>\n\n<p>When I run the following query,</p>\n\n<pre><code>rooms = user.room_set.all()\n</code></pre>\n\n<p>I get this error,</p>\n\n<pre><code>AttributeError: 'User' object has no attribute 'room_set'\n</code></pre>\n\n<p>What am I doing wrong here?</p>\n"}, {"tags": ["python", "regex", "python-3.x"], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 8849969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d80fd33757bbf4db1b7ea1d0809f235c?s=128&d=identicon&r=PG", "display_name": "schmoozed", "link": "https://stackoverflow.com/users/8849969/schmoozed"}, "edited": false, "score": 0, "creation_date": 1527721921, "post_id": 50614447, "comment_id": 88238859, "body": "Thanks. But am looking for the last link only."}, {"owner": {"reputation": 452, "user_id": 3904619, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vhjdq.jpg?s=128&g=1", "display_name": "Saeed Bolhasani", "link": "https://stackoverflow.com/users/3904619/saeed-bolhasani"}, "reply_to_user": {"reputation": 87, "user_id": 8849969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d80fd33757bbf4db1b7ea1d0809f235c?s=128&d=identicon&r=PG", "display_name": "schmoozed", "link": "https://stackoverflow.com/users/8849969/schmoozed"}, "edited": false, "score": 0, "creation_date": 1527722238, "post_id": 50614447, "comment_id": 88238925, "body": "@schmoozed so you can say the last index of output array."}, {"owner": {"reputation": 87, "user_id": 8849969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d80fd33757bbf4db1b7ea1d0809f235c?s=128&d=identicon&r=PG", "display_name": "schmoozed", "link": "https://stackoverflow.com/users/8849969/schmoozed"}, "edited": false, "score": 0, "creation_date": 1527722502, "post_id": 50614447, "comment_id": 88238991, "body": "I get that. But the text is more than a mb long and I don&#39;t want to capture all the links and the wanted link need not be the last one. So, Indexing doesn&#39;t help. The exact link needs to be captured."}, {"owner": {"reputation": 452, "user_id": 3904619, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vhjdq.jpg?s=128&g=1", "display_name": "Saeed Bolhasani", "link": "https://stackoverflow.com/users/3904619/saeed-bolhasani"}, "reply_to_user": {"reputation": 87, "user_id": 8849969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d80fd33757bbf4db1b7ea1d0809f235c?s=128&d=identicon&r=PG", "display_name": "schmoozed", "link": "https://stackoverflow.com/users/8849969/schmoozed"}, "edited": false, "score": 0, "creation_date": 1527723041, "post_id": 50614447, "comment_id": 88239114, "body": "@schmoozed do you want the latest link always?"}, {"owner": {"reputation": 87, "user_id": 8849969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d80fd33757bbf4db1b7ea1d0809f235c?s=128&d=identicon&r=PG", "display_name": "schmoozed", "link": "https://stackoverflow.com/users/8849969/schmoozed"}, "edited": false, "score": 0, "creation_date": 1527723195, "post_id": 50614447, "comment_id": 88239151, "body": "nope. the link with https, wonder, alerts, feeds in it (such a link with these four strings is unique in the text though)."}, {"owner": {"reputation": 452, "user_id": 3904619, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vhjdq.jpg?s=128&g=1", "display_name": "Saeed Bolhasani", "link": "https://stackoverflow.com/users/3904619/saeed-bolhasani"}, "reply_to_user": {"reputation": 87, "user_id": 8849969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d80fd33757bbf4db1b7ea1d0809f235c?s=128&d=identicon&r=PG", "display_name": "schmoozed", "link": "https://stackoverflow.com/users/8849969/schmoozed"}, "edited": false, "score": 0, "creation_date": 1527723728, "post_id": 50614447, "comment_id": 88239284, "body": "@schmoozed how about this regex?       (.*)&quot;https:.*?wonder.*?alerts.*?feeds.*?(&quot;|&gt;)"}, {"owner": {"reputation": 452, "user_id": 3904619, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vhjdq.jpg?s=128&g=1", "display_name": "Saeed Bolhasani", "link": "https://stackoverflow.com/users/3904619/saeed-bolhasani"}, "reply_to_user": {"reputation": 87, "user_id": 8849969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d80fd33757bbf4db1b7ea1d0809f235c?s=128&d=identicon&r=PG", "display_name": "schmoozed", "link": "https://stackoverflow.com/users/8849969/schmoozed"}, "edited": false, "score": 0, "creation_date": 1527724183, "post_id": 50614447, "comment_id": 88239384, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/172121/discussion-between-saeed-bolhasani-and-schmoozed\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 452, "user_id": 3904619, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vhjdq.jpg?s=128&g=1", "display_name": "Saeed Bolhasani", "link": "https://stackoverflow.com/users/3904619/saeed-bolhasani"}, "is_accepted": false, "score": 0, "last_activity_date": 1527721423, "creation_date": 1527721423, "answer_id": 50614447, "question_id": 50614263, "link": "https://stackoverflow.com/questions/50614263/regex-to-find-the-link-with-all-strings-and-a-character-anywhere-in-between/50614447#50614447", "title": "Regex to find the link with all strings and a character anywhere in between", "body": "<p>Hi use this regex. </p>\n\n<pre><code>    https:(.*?)(&gt;|\")\n</code></pre>\n\n<p>You can test your regex online in this <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">link</a>\nI test your text with my regex and got 4 matchs.</p>\n"}, {"tags": [], "owner": {"reputation": 87, "user_id": 8849969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d80fd33757bbf4db1b7ea1d0809f235c?s=128&d=identicon&r=PG", "display_name": "schmoozed", "link": "https://stackoverflow.com/users/8849969/schmoozed"}, "is_accepted": false, "score": 0, "last_activity_date": 1527962545, "creation_date": 1527962545, "answer_id": 50659723, "question_id": 50614263, "link": "https://stackoverflow.com/questions/50614263/regex-to-find-the-link-with-all-strings-and-a-character-anywhere-in-between/50659723#50659723", "title": "Regex to find the link with all strings and a character anywhere in between", "body": "<p>This worked for me:</p>\n\n<pre><code>(\\\"https([^\\\"])*\\d+\\\")\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 8849969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d80fd33757bbf4db1b7ea1d0809f235c?s=128&d=identicon&r=PG", "display_name": "schmoozed", "link": "https://stackoverflow.com/users/8849969/schmoozed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1527962545, "creation_date": 1527720000, "last_edit_date": 1527722641, "question_id": 50614263, "link": "https://stackoverflow.com/questions/50614263/regex-to-find-the-link-with-all-strings-and-a-character-anywhere-in-between", "title": "Regex to find the link with all strings and a character anywhere in between", "body": "<p>I've a text extract like this (the original text is very long with hyperlinks staggered across):</p>\n\n<pre><code>... &lt;div&gt; &lt;a href=\\n=3D\"https://www.wonder.com/alerts/remove\" style=3D\"text-decoration:none;color:#427fed\"&gt;Unsu=\\nbscribe&lt;/a&gt; &lt;span style=3D\"padding:0px 4px 0px 4px;color:#252525\"&gt;|&lt;a href=3D\"https:=\\n//www.wonder.com/url?rct=3Dj&amp;amp;sa=3Dt&amp;amp;&gt;&lt;/span&gt; =\\n&lt;a href=3D\"https://www.wonder.com/alerts?source=3Dalertsmail&amp;amp;hl=3Den&amp;=\\namp;gl=3DIN&amp;amp;msgid=3DMTA2MzYwOTAxMTQ5NzI4MTc3MTE\" style=3D\"text-decorati=\\non:none;color:#427fed\"&gt; View all your alerts &lt;/a&gt; &lt;/div&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;=\\ntd style=3D\"padding:6px 10px 0px 0px;font-family:Arial\"&gt; &lt;a href=3D\"https:/=\\n/www.wonder.com/alerts/feeds/065638/93686812\" styl=\\ne=3D\"text-decoration:none;color:#427fed\"&gt;...\n</code></pre>\n\n<p>I'm trying to extract this hyperlink (not necessarily the last one): <code>https:/=\\n/www.wonder.com/alerts/feeds/065638/93686812</code>   </p>\n\n<p>I do not know where the '=' will appear in the link. So tried to use a positive lookahead like this:</p>\n\n<p><code>re.match(r'(?=\\=)\\\"https(.*).*\\\"', text)</code></p>\n\n<p>This did not help. Suggestions pls.</p>\n\n<p>Also, is there a way we can define a list where the strings are present and then match a string that has all these strings? I saw couple of posts on matching any in the list, not all. I tried to look for a pattern like <code>(https)&amp;(wonder)&amp;(alerts)&amp;(feeds)</code> but not much luck.  </p>\n"}, {"tags": ["javascript", "python", "flask", "socket.io", "flask-socketio"], "comments": [{"owner": {"reputation": 56149, "user_id": 904393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07759b65c163ee70d802ae9cce9142ec?s=128&d=identicon&r=PG", "display_name": "Miguel", "link": "https://stackoverflow.com/users/904393/miguel"}, "edited": false, "score": 0, "creation_date": 1527728961, "post_id": 50614257, "comment_id": 88240493, "body": "You did not include the server-side code in your question."}, {"owner": {"reputation": 1912, "user_id": 1450312, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/b4d2c938b517dd6409ba7bd4cb6cd461?s=128&d=identicon&r=PG&f=1", "display_name": "nad", "link": "https://stackoverflow.com/users/1450312/nad"}, "reply_to_user": {"reputation": 56149, "user_id": 904393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07759b65c163ee70d802ae9cce9142ec?s=128&d=identicon&r=PG", "display_name": "Miguel", "link": "https://stackoverflow.com/users/904393/miguel"}, "edited": false, "score": 0, "creation_date": 1527736102, "post_id": 50614257, "comment_id": 88242046, "body": "@Miguel added server side code now."}, {"owner": {"reputation": 7730, "user_id": 5511849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ggmzY.png?s=128&g=1", "display_name": "Grey Li", "link": "https://stackoverflow.com/users/5511849/grey-li"}, "edited": false, "score": 0, "creation_date": 1527738652, "post_id": 50614257, "comment_id": 88242584, "body": "Did you see the output for <code>console.log(&quot;connected&quot;)</code>?"}, {"owner": {"reputation": 1912, "user_id": 1450312, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/b4d2c938b517dd6409ba7bd4cb6cd461?s=128&d=identicon&r=PG&f=1", "display_name": "nad", "link": "https://stackoverflow.com/users/1450312/nad"}, "reply_to_user": {"reputation": 7730, "user_id": 5511849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ggmzY.png?s=128&g=1", "display_name": "Grey Li", "link": "https://stackoverflow.com/users/5511849/grey-li"}, "edited": false, "score": 0, "creation_date": 1527738683, "post_id": 50614257, "comment_id": 88242591, "body": "@GreyLi yes I see that"}], "answers": [{"tags": [], "owner": {"reputation": 7730, "user_id": 5511849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ggmzY.png?s=128&g=1", "display_name": "Grey Li", "link": "https://stackoverflow.com/users/5511849/grey-li"}, "is_accepted": true, "score": 2, "last_activity_date": 1527740512, "last_edit_date": 1527740512, "creation_date": 1527739666, "answer_id": 50616500, "question_id": 50614257, "link": "https://stackoverflow.com/questions/50614257/flask-socketio-not-receiving-message/50616500#50616500", "title": "Flask-SocketIO not receiving message", "body": "<p>You use <code>&lt;input name=\"submitmsg\" type=\"submit\" id=\"submitmsg\" value=\"Send\"/&gt;</code> to submit the form, it will generate a <code>POST</code> request, then your page will be reload, that's why your JS function <code>socket.on()</code> in the page will not be called. </p>\n\n<p>Apparently, with Flask-SocketIO, you needn't to use the POST request. So just change it to <code>&lt;button name=\"submitmsg\" id=\"submitmsg\"&gt;Send&lt;/button&gt;</code> and remove <code>&lt;form&gt;</code> tag, i.e.:</p>\n\n<pre><code>&lt;div id=\"wrapper\" display = 'none'&gt;\n    ...\n    &lt;div id=\"chatbox\"&gt;&lt;/div&gt;\n\n    &lt;input name=\"usermsg\" type=\"text\" id=\"usermsg\" size=\"63\"/&gt;\n    &lt;button name=\"submitmsg\" id=\"submitmsg\"&gt;Send&lt;/button&gt;\n&lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 1912, "user_id": 1450312, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/b4d2c938b517dd6409ba7bd4cb6cd461?s=128&d=identicon&r=PG&f=1", "display_name": "nad", "link": "https://stackoverflow.com/users/1450312/nad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1305, "favorite_count": 2, "accepted_answer_id": 50616500, "answer_count": 1, "score": 1, "last_activity_date": 1527770307, "creation_date": 1527719958, "last_edit_date": 1527770307, "question_id": 50614257, "link": "https://stackoverflow.com/questions/50614257/flask-socketio-not-receiving-message", "title": "Flask-SocketIO not receiving message", "body": "<p>SocketIO version 1.3.6</p>\n\n<p>Python 3.6</p>\n\n<p>I am using Flask-SocketIO in my python app to send and receive message. I am able to send message (I see the output in terminal) but the client is not receiving the message (no output in console).</p>\n\n<pre><code>$(document).ready(function() {\n  var socket = io.connect('http://localhost:5000/');\n  socket.on('connect', function() {\n    console.log(\"connected\")\n  });\n  socket.on('message', function(msg) {\n    console.log('Received message');\n  });\n  $('#submitmsg').on('click', function() {\n    socket.send($('#usermsg').val());\n    $('#usermsg').val('');\n  });\n});\n</code></pre>\n\n<p>Chat window HTML:</p>\n\n<pre><code>&lt;div id=\"wrapper\"&gt;\n    &lt;div id=\"menu\"&gt;\n        &lt;p class=\"welcome\"&gt;Welcome&lt;b&gt;&lt;/b&gt;&lt;/p&gt;\n        &lt;p class=\"logout\"&gt;&lt;a id=\"exit\" href=\"#\"&gt;Exit&lt;/a&gt;&lt;/p&gt;\n        &lt;div style=\"clear:both\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;div id=\"chatbox\"&gt;&lt;/div&gt;\n\n    &lt;form name=\"message\" action=\"\"&gt;\n        &lt;input name=\"usermsg\" type=\"text\" id=\"usermsg\" size=\"63\" /&gt;\n        &lt;input name=\"submitmsg\" type=\"submit\" id=\"submitmsg\" value=\"Send\" /&gt;\n    &lt;/form&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>EDIT: Adding server code:</p>\n\n<pre><code>from flask import Flask, render_template\nfrom flask_socketio import SocketIO, send\n\napp = Flask(__name__)\nsocketio = SocketIO(app)\n\n@app.route(\"/\")\ndef index():\n    return render_template('index.html')\n\n@socketio.on('message')\ndef handleMessage(msg):\n    print('Message: ' + msg)\n    send(msg, broadcast=True)\n\nif __name__ == '__main__':\n    socketio.run(app)\n</code></pre>\n\n<p>If the received message works, I should see <code>'Received message'</code> in the browser console but I do not see it. What am I missing? Any suggestion?</p>\n"}, {"tags": ["python", "networkx"], "comments": [{"owner": {"reputation": 5201, "user_id": 3798897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PIR5C.jpg?s=128&g=1", "display_name": "Hans Musgrave", "link": "https://stackoverflow.com/users/3798897/hans-musgrave"}, "edited": false, "score": 1, "creation_date": 1527719970, "post_id": 50614240, "comment_id": 88238347, "body": "What source code did you type? On my machine, when I <code>import networkx</code> and attempt to use <code>networkx.minimum_cycle_basis</code>, I cannot replicated your error. Also, which version of python are you using?"}, {"owner": {"reputation": 1013, "user_id": 5616580, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6d6fac2bd7d0e135af8bbe8363504735?s=128&d=identicon&r=PG&f=1", "display_name": "mateuszb", "link": "https://stackoverflow.com/users/5616580/mateuszb"}, "edited": false, "score": 0, "creation_date": 1527719977, "post_id": 50614240, "comment_id": 88238350, "body": "See <a href=\"https://networkx.github.io/documentation/latest/reference/algorithms/generated/networkx.algorithms.cycles.minimum_cycle_basis.html\" rel=\"nofollow noreferrer\">networkx.github.io/documentation/latest/reference/algorithms&zwnj;&#8203;/&hellip;</a> for example usage"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1527720311, "post_id": 50614240, "comment_id": 88238438, "body": "Please show us a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, with an error traceback and code that reproduces that traceback."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1527720391, "post_id": 50614240, "comment_id": 88238459, "body": "Meanwhile: two possibilities to look at: (1) Do you have a file named <code>networkx.py</code> in your current working directory (or elsewhere on <code>sys.path</code>)? If so, <code>import networkx</code> is just going to import your script rather than the package you wanted, so you&#39;ll get this <code>AttributeError</code> for just about everything. (2) Do you have two Python installations, possibly with networkx 2.1 in one of them, but an older version in the other one?"}], "owner": {"reputation": 1, "user_id": 9872973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ae54f6eeb9d1afc7716e7c9b907ee83?s=128&d=identicon&r=PG&f=1", "display_name": "J.H", "link": "https://stackoverflow.com/users/9872973/j-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1527719843, "creation_date": 1527719843, "question_id": 50614240, "link": "https://stackoverflow.com/questions/50614240/module-networkx-has-no-attribute-minimum-cycle-basis", "title": "module &#39;networkx&#39; has no attribute &#39;minimum_cycle_basis&#39;", "body": "<blockquote>\n  <p>I installed networkx v. 2.1, but when I want to use minimum_cycle_basis, python shows this error\n      module 'networkx' has no attribute 'minimum_cycle_basis'\n  Thanks for helping</p>\n</blockquote>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 612, "user_id": 7064043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xzi00.jpg?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/7064043/tom"}, "edited": false, "score": 1, "creation_date": 1527720342, "post_id": 50614223, "comment_id": 88238448, "body": "Replace &#39;match = title_pattern.match(html)&#39; with &#39;match = title_pattern.search(html)&#39; Maybe?"}, {"owner": {"reputation": 5792, "user_id": 253800, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ec5b97a0a6a730a7b744aa6cf61a9ea3?s=128&d=identicon&r=PG", "display_name": "Yang", "link": "https://stackoverflow.com/users/253800/yang"}, "reply_to_user": {"reputation": 612, "user_id": 7064043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xzi00.jpg?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/7064043/tom"}, "edited": false, "score": 0, "creation_date": 1527720492, "post_id": 50614223, "comment_id": 88238482, "body": "Interesting! It works. Why does that matter?"}, {"owner": {"reputation": 1633, "user_id": 8791722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98WuV.png?s=128&g=1", "display_name": "PixelEinstein", "link": "https://stackoverflow.com/users/8791722/pixeleinstein"}, "edited": false, "score": 2, "creation_date": 1527720664, "post_id": 50614223, "comment_id": 88238513, "body": "I would not recommend parsing <b><i>HTML</i></b> with <i>Regex*</i>, maybe take a look at <a href=\"https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags\">THIS</a>. On a small scale it might not be too bad..... but on anything more than what you have above I would recommend finding another tool for HTML."}, {"owner": {"reputation": 21716, "user_id": 2401769, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/wkEbw.jpg?s=128&g=1", "display_name": "Matias Cicero", "link": "https://stackoverflow.com/users/2401769/matias-cicero"}, "edited": false, "score": 3, "creation_date": 1527720783, "post_id": 50614223, "comment_id": 88238538, "body": "@Yang Because <a href=\"https://docs.python.org/2/library/re.html#re.match\" rel=\"nofollow noreferrer\"><code>re.match</code></a> only matches from the beginning of the provided string. If you want to get matches anywhere on the text (such as your specific use case), you need to use <a href=\"https://docs.python.org/2/library/re.html#re.search\" rel=\"nofollow noreferrer\"><code>re.search</code></a>. Refer to <a href=\"https://docs.python.org/2/library/re.html#search-vs-match\" rel=\"nofollow noreferrer\">search() vs. match()</a> for more information."}, {"owner": {"reputation": 1589, "user_id": 4870915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8163a9b5d6135e177bec139190d6ca47?s=128&d=identicon&r=PG&f=1", "display_name": "Gelineau", "link": "https://stackoverflow.com/users/4870915/gelineau"}, "edited": false, "score": 1, "creation_date": 1527720901, "post_id": 50614223, "comment_id": 88238567, "body": "Or change your regexp to <code>r&#39;.*&lt;title&gt;(.*?)&lt;&#47;title&gt;(.*)&#39;</code>"}, {"owner": {"reputation": 612, "user_id": 7064043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xzi00.jpg?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/7064043/tom"}, "edited": false, "score": 0, "creation_date": 1527721126, "post_id": 50614223, "comment_id": 88238630, "body": "You could also use .findall() which i think returns a list"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 1633, "user_id": 8791722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98WuV.png?s=128&g=1", "display_name": "PixelEinstein", "link": "https://stackoverflow.com/users/8791722/pixeleinstein"}, "edited": false, "score": 2, "creation_date": 1527722459, "post_id": 50614223, "comment_id": 88238983, "body": "To follow up on what @PixelEinstein said: using <code>BeautifulSoup</code>, this whole thing (including parsing the answer out of that mess, of tags which includes part of the head and all of the body, which I assume you were planning to get to once you finished this part?) is <code>return soup.title.text, soup.div.text</code>."}], "answers": [{"tags": [], "owner": {"reputation": 612, "user_id": 7064043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xzi00.jpg?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/7064043/tom"}, "is_accepted": false, "score": 0, "last_activity_date": 1527723434, "creation_date": 1527723434, "answer_id": 50614699, "question_id": 50614223, "link": "https://stackoverflow.com/questions/50614223/python-regex-match-failed/50614699#50614699", "title": "Python Regex Match failed", "body": "<p>In a summary of the comments:</p>\n\n<p><code>title_pattern.search(html)</code> Should be used instead of <code>title_pattern.match(html)</code></p>\n\n<p>As the search function will search anywhere in the provided string instead of just from the beginning. <code>match = title_pattern.findall(html)</code> could be used similarly but would return a list of items instead of just one.</p>\n\n<p>Also as mentioned using <code>BeautifulSoup</code> would pay of more in the long run as Regular Expression is not properly suited for searching HTML</p>\n"}, {"tags": [], "owner": {"reputation": 171, "user_id": 6311483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b43a64e22be5cac04d06bb1f3649a012?s=128&d=identicon&r=PG&f=1", "display_name": "Boergler", "link": "https://stackoverflow.com/users/6311483/boergler"}, "is_accepted": false, "score": 0, "last_activity_date": 1527732202, "creation_date": 1527732202, "answer_id": 50615632, "question_id": 50614223, "link": "https://stackoverflow.com/questions/50614223/python-regex-match-failed/50615632#50615632", "title": "Python Regex Match failed", "body": "<p>The comments are correct, re.match() searches from the beginning. That being said, insert a .* into your regex to search from the beginning:</p>\n\n<pre><code>title_pattern = re.compile(r'.*&lt;title&gt;(.*?)&lt;/title&gt;(.*)') \n</code></pre>\n"}], "owner": {"reputation": 5792, "user_id": 253800, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ec5b97a0a6a730a7b744aa6cf61a9ea3?s=128&d=identicon&r=PG", "display_name": "Yang", "link": "https://stackoverflow.com/users/253800/yang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 414, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1527732202, "creation_date": 1527719727, "question_id": 50614223, "link": "https://stackoverflow.com/questions/50614223/python-regex-match-failed", "title": "Python Regex Match failed", "body": "<p>This passed on <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">https://regex101.com/</a> without any issues. Did I miss anything? The entire string is in one line.</p>\n\n<pre><code>def get_title_and_content(html):\n  html = \"\"\"&lt;!DOCTYPE html&gt;     &lt;html&gt;       &lt;head&gt;       &lt;title&gt;Change delivery date with Deliv&lt;/title&gt;       &lt;/head&gt;       &lt;body&gt;       &lt;div class=\"gkms web\"&gt;The delivery date can be changed up until the package is assigned to a driver.&lt;/div&gt;       &lt;/body&gt;     &lt;/html&gt;  \"\"\"\n  title_pattern = re.compile(r'&lt;title&gt;(.*?)&lt;/title&gt;(.*)')\n  match = title_pattern.match(html)\n  if match:\n    print('successfully extract title and answer')\n      return match.groups()[0].strip(), match.groups()[1].strip()\n    else:\n      print('unable to extract title or answer')\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "scrapy"], "comments": [{"owner": {"reputation": 2933, "user_id": 3434388, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/uZ9Hf.jpg?s=128&g=1", "display_name": "Danielle M.", "link": "https://stackoverflow.com/users/3434388/danielle-m"}, "edited": false, "score": 0, "creation_date": 1527719719, "post_id": 50614206, "comment_id": 88238278, "body": "The error explanation is this greek phrase - can you translate? <code>\u03a4\u03bf \u03bb\u03b5\u03b9\u03c4\u03bf\u03c5\u03c1\u03b3\u03b9\u03ba\u03cc \u03c3\u03cd\u03c3\u03c4\u03b7\u03bc\u03b1 \u03b4\u03b5\u03bd \u03b5\u03af\u03bd\u03b1\u03b9 \u03b4\u03c5\u03bd\u03b1\u03c4\u03cc \u03bd\u03b1 \u03b5\u03ba\u03c4\u03b5\u03bb\u03ad\u03c3 \u03b5\u03b9 %1</code>"}, {"owner": {"reputation": 11, "user_id": 9872968, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dnet Vaggos", "link": "https://stackoverflow.com/users/9872968/dnet-vaggos"}, "reply_to_user": {"reputation": 2933, "user_id": 3434388, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/uZ9Hf.jpg?s=128&g=1", "display_name": "Danielle M.", "link": "https://stackoverflow.com/users/3434388/danielle-m"}, "edited": false, "score": 0, "creation_date": 1527719767, "post_id": 50614206, "comment_id": 88238287, "body": "P.S Im new to python programming language, i want to use it for web scraping."}, {"owner": {"reputation": 11, "user_id": 9872968, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dnet Vaggos", "link": "https://stackoverflow.com/users/9872968/dnet-vaggos"}, "reply_to_user": {"reputation": 2933, "user_id": 3434388, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/uZ9Hf.jpg?s=128&g=1", "display_name": "Danielle M.", "link": "https://stackoverflow.com/users/3434388/danielle-m"}, "edited": false, "score": 0, "creation_date": 1527719943, "post_id": 50614206, "comment_id": 88238337, "body": "@DanielleM.it mean The operating system cannot run %1"}, {"owner": {"reputation": 2446, "user_id": 1532454, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/aNEeA.jpg?s=128&g=1", "display_name": "Jeff Learman", "link": "https://stackoverflow.com/users/1532454/jeff-learman"}, "edited": false, "score": 1, "creation_date": 1527721015, "post_id": 50614206, "comment_id": 88238602, "body": "Welcome to StackOverflow.  Please read <a href=\"https://stackoverflow.com/help/how-to-ask\">How to ask</a>, and post a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, Verifiable Example</a>."}, {"owner": {"reputation": 11, "user_id": 9872968, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dnet Vaggos", "link": "https://stackoverflow.com/users/9872968/dnet-vaggos"}, "edited": false, "score": 0, "creation_date": 1527753698, "post_id": 50614206, "comment_id": 88248584, "body": "does anyone know how to fix it please?"}], "answers": [{"tags": [], "owner": {"reputation": 705, "user_id": 9593060, "user_type": "registered", "profile_image": "https://graph.facebook.com/1892710857405653/picture?type=large", "display_name": "Mattia Surricchio", "link": "https://stackoverflow.com/users/9593060/mattia-surricchio"}, "is_accepted": false, "score": 0, "last_activity_date": 1527799796, "creation_date": 1527799796, "answer_id": 50632579, "question_id": 50614206, "link": "https://stackoverflow.com/questions/50614206/python-scrapy/50632579#50632579", "title": "Python - Scrapy", "body": "<p>You have not installed scrapy properly. I had the same problem, i would suggest to reinstall python using Anaconda, it's a package manager that helps you installing packages, modules ecc...\nAnaconda : <a href=\"https://docs.anaconda.com/anaconda/\" rel=\"nofollow noreferrer\">Link to Anaconda</a></p>\n\n<p>Once you have downloaded it, install it and then run on your prompt this code :</p>\n\n<pre><code>conda install -c conda-forge scrapy\n</code></pre>\n\n<p>You can find the whole documentation here: <a href=\"https://doc.scrapy.org/en/latest/intro/install.html\" rel=\"nofollow noreferrer\">https://doc.scrapy.org/en/latest/intro/install.html</a></p>\n\n<p>Try this and let me know if it solves your problem. </p>\n"}], "owner": {"reputation": 11, "user_id": 9872968, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dnet Vaggos", "link": "https://stackoverflow.com/users/9872968/dnet-vaggos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1527802524, "creation_date": 1527719622, "last_edit_date": 1527726042, "question_id": 50614206, "link": "https://stackoverflow.com/questions/50614206/python-scrapy", "title": "Python - Scrapy", "body": "<p>why I cannot do my project in my python console?</p>\n\n<p>here's is what I'm doing...</p>\n\n<p>C:\\Users\\DnetVaggos\\Python\\WebScraping\\Scrapy\\SCC>Scrapy shell <a href=\"https://spurverbr\" rel=\"nofollow noreferrer\">https://spurverbr</a>\neiterung.de/</p>\n\n<h2>Note: It's because I'm using python 3.6.5?</h2>\n\n<p><strong>and I'm getting this:</strong></p>\n\n<pre><code>2018-05-31 01:12:15 [scrapy.utils.log] INFO: Scrapy 1.5.0 started (bot: scrapybo\nt)\nTraceback (most recent call last):\n  File \"C:\\Users\\DnetVaggos\\Miniconda3\\Scripts\\scrapy-script.py\", line 5, in &lt;mo\ndule&gt;\n    sys.exit(scrapy.cmdline.execute()enter code here)\n  File \"C:\\Users\\DnetVaggos\\Miniconda3\\lib\\site-packages\\scrapy\\cmdline.py\", lin\ne 149, in execute\n    cmd.crawler_process = CrawlerProcess(settings)\n  File \"C:\\Users\\DnetVaggos\\Miniconda3\\lib\\site-packages\\scrapy\\crawler.py\", lin\ne 252, in __init__\n    log_scrapy_info(self.settings)\n  File \"C:\\Users\\DnetVaggos\\Miniconda3\\lib\\site-packages\\scrapy\\utils\\log.py\", l\nine 149, in log_scrapy_info\n    for name, version in scrapy_components_versions()\n  File \"C:\\Users\\DnetVaggos\\Miniconda3\\lib\\site-packages\\scrapy\\utils\\versions.p\ny\", line 35, in scrapy_components_versions\n    (\"pyOpenSSL\", _get_openssl_version()),\n  File \"C:\\Users\\DnetVaggos\\Miniconda3\\lib\\site-packages\\scrapy\\utils\\versions.p\ny\", line 43, in _get_openssl_version\n    import OpenSSL\n  File \"C:\\Users\\DnetVaggos\\Miniconda3\\lib\\site-packages\\OpenSSL\\__init__.py\", l\nine 8, in &lt;module&gt;\n    from OpenSSL import crypto, SSL\n  File \"C:\\Users\\DnetVaggos\\Miniconda3\\lib\\site-packages\\OpenSSL\\crypto.py\", lin\ne 16, in &lt;module&gt;\n    from OpenSSL._util import (\n  File \"C:\\Users\\DnetVaggos\\Miniconda3\\lib\\site-packages\\OpenSSL\\_util.py\", line\n 6, in &lt;module&gt;\n    from cryptography.hazmat.bindings.openssl.binding import Binding\n  File \"C:\\Users\\DnetVaggos\\Miniconda3\\lib\\site-packages\\cryptography\\hazmat\\bin\ndings\\openssl\\binding.py\", line 13, in &lt;module&gt;\n    from cryptography.hazmat.bindings._openssl import ffi, lib\nImportError: DLL load failed: \u03a4\u03bf \u03bb\u03b5\u03b9\u03c4\u03bf\u03c5\u03c1\u03b3\u03b9\u03ba\u03cc \u03c3\u03cd\u03c3\u03c4\u03b7\u03bc\u03b1 \u03b4\u03b5\u03bd \u03b5\u03af\u03bd\u03b1\u03b9 \u03b4\u03c5\u03bd\u03b1\u03c4\u03cc \u03bd\u03b1 \u03b5\u03ba\u03c4\u03b5\u03bb\u03ad\u03c3\n\u03b5\u03b9 %1.\n</code></pre>\n"}, {"tags": ["python", "django", "yaml", "circleci"], "comments": [{"owner": {"reputation": 3192, "user_id": 1195276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/497dec1748b2912be9b7272c4a6ea496?s=128&d=identicon&r=PG", "display_name": "FelicianoTech", "link": "https://stackoverflow.com/users/1195276/felicianotech"}, "edited": false, "score": 0, "creation_date": 1527777594, "post_id": 50614189, "comment_id": 88263810, "body": "Can you try setting the variable at the job level instead of the step level?"}, {"owner": {"reputation": 19007, "user_id": 444646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/996ae88559e4c401582326971c77c75a?s=128&d=identicon&r=PG", "display_name": "dnephin", "link": "https://stackoverflow.com/users/444646/dnephin"}, "edited": false, "score": 0, "creation_date": 1528400574, "post_id": 50614189, "comment_id": 88505610, "body": "I would try adding <code>env</code> as the first line in the command to print out the full environment, and see if <code>ENV_ROLE</code> is being set."}], "answers": [{"tags": [], "owner": {"reputation": 1249, "user_id": 4418293, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/7Re2u.jpg?s=128&g=1", "display_name": "Diane Kaplan", "link": "https://stackoverflow.com/users/4418293/diane-kaplan"}, "is_accepted": false, "score": 0, "last_activity_date": 1538747209, "creation_date": 1538747209, "answer_id": 52667074, "question_id": 50614189, "link": "https://stackoverflow.com/questions/50614189/circleci-not-picking-up-environment-variable-defined-in-run-step/52667074#52667074", "title": "CircleCI not picking up environment variable defined in run step?", "body": "<p>I had a similar issue using circleCI + GAE; the variables I thought I was setting in .circleCI/config.yml never actually make it to the app because the build process run by GAE wasn't transferring them in. Instead I needed to: </p>\n\n<ul>\n<li>make multiple app.yaml files (in my case app-staging.yaml and app-prod.yaml)</li>\n<li><p>update .circleci/config.yml to use those in each command statement, like: </p>\n\n<p>command: gcloud app deploy app-staging.yaml</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 170, "user_id": 4011883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ije4T.jpg?s=128&g=1", "display_name": "Stephen Lester", "link": "https://stackoverflow.com/users/4011883/stephen-lester"}, "is_accepted": false, "score": 0, "last_activity_date": 1569008440, "creation_date": 1569008440, "answer_id": 58034308, "question_id": 50614189, "link": "https://stackoverflow.com/questions/50614189/circleci-not-picking-up-environment-variable-defined-in-run-step/58034308#58034308", "title": "CircleCI not picking up environment variable defined in run step?", "body": "<p>Try specifying the variables in the docker: section.</p>\n\n<pre><code>docker:\n    environment:\n        ENV_ROLE: development\n</code></pre>\n\n<p>This should spin up your container with the environment var. I had to test where to insert my VARs for a few builds before they were accessible by my container.</p>\n\n<p>If you can see either of these vars at the point you need the ENV_ROLE then you might want to add your there as well.</p>\n\n<pre><code>environment:\n          DATABASE_URL: ...\n        environment:\n          POSTGRES_USER: ...\n          POSTGRES_DB: ...\n</code></pre>\n"}], "owner": {"reputation": 34200, "user_id": 995862, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d5efb6c1054808f7a79aaefbc64cce76?s=128&d=identicon&r=PG", "display_name": "Kurt Peek", "link": "https://stackoverflow.com/users/995862/kurt-peek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1066, "favorite_count": 0, "answer_count": 2, "score": 5, "last_activity_date": 1569008440, "creation_date": 1527719483, "question_id": 50614189, "link": "https://stackoverflow.com/questions/50614189/circleci-not-picking-up-environment-variable-defined-in-run-step", "title": "CircleCI not picking up environment variable defined in run step?", "body": "<p>I'm trying to run CircleCI tests for a Django project in which the <code>manage.py</code> determines the version of <code>settings.py</code> to apply (<code>development.py</code>, <code>staging.py</code>, or <code>production.py</code>) from an environment variable, <code>ENV_ROLE</code>. Previously, <code>ENV_ROLE</code> was set to default to <code>development</code> if not defined, but I'm in the process of changing it so that Django instead throws an <code>ImproperlyConfigured</code> error if it is not defined.</p>\n\n<p>In order to make the tests pass, I need to define the <code>ENV_ROLE</code> environment variable in our CircleCI test environment. Following <a href=\"https://circleci.com/docs/2.0/env-vars/#setting-an-environment-variable-in-a-step\" rel=\"noreferrer\">https://circleci.com/docs/2.0/env-vars/#setting-an-environment-variable-in-a-step</a>, I've added the following to the <code>run</code> step:</p>\n\n<pre><code>      - run:\n          environment:\n            ENV_ROLE: development\n</code></pre>\n\n<p>However, I am still getting this error from CircleCI:</p>\n\n<pre><code>#!/bin/bash -eo pipefail\ncd lucy-web\nsource venv/bin/activate\npython manage.py compilescss --verbosity 0\npython manage.py collectstatic --clear --no-input --verbosity 0\nflake8\npython manage.py test\nTraceback (most recent call last):\n  File \"/root/lucy/lucy_web/lucy-web/env.py\", line 5, in &lt;module&gt;\n    ENV_ROLE = os.environ['ENV_ROLE']\n  File \"/usr/local/lib/python3.6/os.py\", line 669, in __getitem__\n    raise KeyError(key) from None\nKeyError: 'ENV_ROLE'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"manage.py\", line 4, in &lt;module&gt;\n    from env import ENV_ROLE\n  File \"/root/lucy/lucy_web/lucy-web/env.py\", line 8, in &lt;module&gt;\n    \"No 'ENV_ROLE' environment variable is defined. \"\ndjango.core.exceptions.ImproperlyConfigured: No 'ENV_ROLE' environment variable is defined. Please define it as 'development', 'staging', or 'production'.\nExited with code 1\n</code></pre>\n\n<p>Here is the complete <code>.circleci/config.yml</code>:</p>\n\n<pre><code>version: 2\njobs:\n  build:\n    working_directory: ~/lucy/lucy_web/\n    docker:\n      - image: python:3.6.5\n        environment:\n          DATABASE_URL: ...\n      - image: jannkleen/docker-postgres-gis-hstore\n        environment:\n          POSTGRES_USER: ...\n          POSTGRES_DB: ...\n      - image: redis:4.0.9-alpine\n    steps:\n      - checkout\n      - restore_cache:\n          key: deps1-{{ .Branch }}-{{ checksum \"lucy-web/requirements.txt\" }}\n      - run:\n          name: Install Python deps in a venv\n          command: |\n            cd lucy-web\n            python3 -m venv venv\n            . venv/bin/activate\n            pip3 install -r requirements.txt\n      - save_cache:\n          key: deps1-{{ .Branch }}-{{ checksum \"lucy-web/requirements.txt\" }}\n          paths:\n            - \"venv\"\n      - run:\n          environment:\n            ENV_ROLE: development\n          command: |\n            cd lucy-web\n            source venv/bin/activate\n            python manage.py compilescss --verbosity 0\n            python manage.py collectstatic --clear --no-input --verbosity 0\n            flake8\n            python manage.py test\n      - store_artifacts:\n          path: test-reports/\n          destination: tr1\n      - store_test_results:\n          path: test-reports/\n  app_test:\n    working_directory: ~/lucy/lucy_app\n    docker:\n      - image: node:8\n    steps:\n      - checkout\n      - run:\n          command: |\n            cd lucy-app\n            yarn install\n            yarn lint\n            yarn jest\nworkflows:\n  version: 2\n  build_and_test:\n    jobs:\n      - build\n      - app_test\n</code></pre>\n\n<p>The Django project has a modified <code>manage.py</code>:</p>\n\n<pre><code>#!/usr/bin/env python\nimport os\nimport sys\nfrom dotenv import load_dotenv, find_dotenv\n\nif __name__ == \"__main__\":\n    # Set environment variables from .env file\n    load_dotenv(find_dotenv())\n\n    # Determine which settings to apply (development, staging, or production)\n    from env import ENV_ROLE\n    os.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", f\"lucy.settings.{ENV_ROLE}\")\n    try:\n        from django.core.management import execute_from_command_line\n    except ImportError:\n        # The above import may fail for some other reason. Ensure that the\n        # issue is really that Django is missing to avoid masking other\n        # exceptions on Python 2.\n        try:\n            import django  # noqa: F401\n        except ImportError:\n            raise ImportError(\n                \"Couldn't import Django. Are you sure it's installed and \"\n                \"available on your PYTHONPATH environment variable? Did you \"\n                \"forget to activate a virtual environment?\"\n            )\n        raise\n    execute_from_command_line(sys.argv)\n</code></pre>\n\n<p>where <code>env.py</code> checks whether the <code>ENV_ROLE</code> environment variable is defined and throws an <code>ImproperlyConfigured</code> error otherwise:</p>\n\n<pre><code>import os\nfrom django.core.exceptions import ImproperlyConfigured\n\ntry:\n    ENV_ROLE = os.environ['ENV_ROLE']\nexcept KeyError:\n    raise ImproperlyConfigured(\n        \"No 'ENV_ROLE' environment variable is defined. \"\n        \"Please define it as 'development', 'staging', or 'production'.\")\n</code></pre>\n\n<p>I don't understand why CircleCI is not 'picking up' the <code>ENV_ROLE</code> environment variable? Is there something wrong with my syntax or understanding of the documentation?</p>\n"}, {"tags": ["python", "string", "syntax", "syntax-error", "user-input"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 2, "creation_date": 1527720069, "post_id": 50614187, "comment_id": 88238381, "body": "Ideally, you should change <code>myconfig</code> to be a dict rather than an object, because dicts are made for looking up values by name: <code>myconfig[name1][&#39;lower_bound&#39;]</code>. If you can&#39;t do that for some reason, you <i>can</i> use the <a href=\"https://docs.python.org/3/library/functions.html#getattr\" rel=\"nofollow noreferrer\"><code>getattr</code></a> function, like <code>getattr(myconfig, name1)[&#39;lower_bound&#39;]</code>. But, as you can see, this is a lot clunkier\u2014when you need <code>getattr</code>, that&#39;s a good sign that you probably wanted a dict."}], "answers": [{"tags": [], "owner": {"reputation": 21716, "user_id": 2401769, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/wkEbw.jpg?s=128&g=1", "display_name": "Matias Cicero", "link": "https://stackoverflow.com/users/2401769/matias-cicero"}, "is_accepted": true, "score": 1, "last_activity_date": 1527722012, "last_edit_date": 1527722012, "creation_date": 1527721449, "answer_id": 50614452, "question_id": 50614187, "link": "https://stackoverflow.com/questions/50614187/python-string-argument-manipulation/50614452#50614452", "title": "Python String/Argument Manipulation", "body": "<p>You can achieve this by using <a href=\"https://docs.python.org/2/library/functions.html#getattr\" rel=\"nofollow noreferrer\"><code>getattr</code></a>:</p>\n\n<pre><code>name1 = sys.argv.pop()\n\n# ...\n\nvalues = getattr(myconfig, name1)\nself.do_x(values['lower_bound'], values['upper_bound'])\n</code></pre>\n\n<p>Please note that <code>getattr</code> is case sensitive, this means that while <code>getattr(myconfig, 'Oink')</code> will yield the correct value, <code>getattr(myconfig, 'oink')</code> will raise an <code>AttributeError</code></p>\n\n<hr>\n\n<p>If you want to handle invalid values, you can use <a href=\"https://docs.python.org/2/library/functions.html#hasattr\" rel=\"nofollow noreferrer\"><code>hasattr</code></a>:</p>\n\n<pre><code>if not hasattr(myconfig, name1):\n    raise ValueError('Invalid value {}'.format(name1))\n\nvalues = getattr(myconfig, name1)\nself.do_x(values['lower_bound'], values['upper_bound'])\n</code></pre>\n\n<hr>\n\n<p>If instead of raising a <code>ValueError</code> you want to use a default value, you can use the <code>default</code> keyword argument for <code>getattr</code>:</p>\n\n<pre><code>default = dict(lower_bound=20, upper_bound=50)\nvalues = getattr(myconfig, name1, default=default)\nself.do_x(values['lower_bound'], values['upper_bound'])\n</code></pre>\n"}], "owner": {"reputation": 159, "user_id": 6673756, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0e9dl.jpg?s=128&g=1", "display_name": "lexalenka", "link": "https://stackoverflow.com/users/6673756/lexalenka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 50614452, "answer_count": 1, "score": 2, "last_activity_date": 1527722012, "creation_date": 1527719474, "last_edit_date": 1527721676, "question_id": 50614187, "link": "https://stackoverflow.com/questions/50614187/python-string-argument-manipulation", "title": "Python String/Argument Manipulation", "body": "<p>I have a function that has a <code>name1</code> value obtained through user input via <code>sys.argv.pop()</code> that dictates which parameter within <code>myconfig.py</code> to use. As someone relatively new to python I was wondering what the proper way to go about doing this was, so that I would be given access to the desired data properly.</p>\n\n<p>when completed I'd like the argument to function as : <code>myconfig.Oink['lower_bound']</code> or <code>myconfig.Woof['lower_bound']</code></p>\n\n<pre><code>&gt; self.do_x(id, myconfig.\"name1\".format(name1)['lower_bound'],\n&gt; myconfig.\"name1\".format(name1)['upper_bound'])\n&gt;                                                  ^ SyntaxError: invalid syntax\n__________________________________________________________________\n\n&gt; myconfig.py\n&gt; \n&gt; Oink = dict(lower_bound = 874,upper_bound = 1983,) \n\n&gt; Woof = dict(lower_bound = 1,upper_bound = 984,)\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 1, "creation_date": 1527724364, "post_id": 50614128, "comment_id": 88239420, "body": "Poor George. Even after &quot;Something&quot;, people still want to grade him for &quot;Don&#39;t Bother Me&quot; and his attempts at American folk-rock."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 9666127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628502910b78675443f472d16038b7df?s=128&d=identicon&r=PG&f=1", "display_name": "DJN", "link": "https://stackoverflow.com/users/9666127/djn"}, "is_accepted": false, "score": 0, "last_activity_date": 1527719482, "creation_date": 1527719482, "answer_id": 50614188, "question_id": 50614128, "link": "https://stackoverflow.com/questions/50614128/print-inputs-if-condition/50614188#50614188", "title": "Print inputs if condition", "body": "<p>You should use a two-dimensional array(a.k.a. matrix) so that you have pairs of names and grades:</p>\n\n<pre><code>[['Student1', grade1],\n ['Student2', grade2],\n ['Student3', grade3],\n ['Student4', grade4]]\n</code></pre>\n\n<p>That's how I would do it.</p>\n"}, {"comments": [{"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1527720033, "post_id": 50614191, "comment_id": 88238370, "body": "The only other thing I&#39;d add is prior to Py3, you have to force it away from integer division to get the expected result."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1527720132, "post_id": 50614191, "comment_id": 88238399, "body": "@TemporalWolf The OP is pretty clearly using Python 3, or his <code>input</code> calls are already wrong, and he&#39;s already getting 82.5. In 2018, I don&#39;t think there&#39;s much point in writing Python 2-compatible answers for people who aren&#39;t asking for them."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1527723625, "post_id": 50614191, "comment_id": 88239257, "body": "@jpp Yeah, I originally wrote this with <code>dict</code>, but then started thinking about what if the order is important and started writing about <code>OrderedDict</code>\u2014and then noticed that the OP mentioned the idea of sorting the grades, at which point I decided that it was going to get too long and verbose even for me, so I scrapped all of that. Meanwhile, I&#39;d probably reach for <code>namedtuple</code> before <code>dataclass</code> for something this trivial, at least while 3.7 is still in beta (and <code>attrs</code> is too overpowered, cute, and unstable to count as a backport for novices), but I didn&#39;t go down that road."}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1527723698, "post_id": 50614191, "comment_id": 88239276, "body": "@abarnert, Yep, noted, I posted a <code>dict</code> version anyway; if it doesn&#39;t help with this specific problem, at least it shows how an unordered solution would work."}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": false, "score": 3, "last_activity_date": 1527724179, "last_edit_date": 1527724179, "creation_date": 1527719513, "answer_id": 50614191, "question_id": 50614128, "link": "https://stackoverflow.com/questions/50614128/print-inputs-if-condition/50614191#50614191", "title": "Print inputs if condition", "body": "<p>First, let me simplify your code a bit to make the rest of this easier. Instead of this:</p>\n\n<pre><code>grade_list = []\n# ...\ngrade_list.append(grade1)\ngrade_list.append(grade2)\ngrade_list.append(grade3)\ngrade_list.append(grade4)\n</code></pre>\n\n<p>\u2026 you can just do this:</p>\n\n<pre><code>grade_list = [grade1, grade2, grade3, grade4`]\n</code></pre>\n\n<p>Now, you build a second list of names:</p>\n\n<pre><code>name_list = [st1, st2, st3, st4]\n</code></pre>\n\n<p>And now you can either loop over the two lists in lock-step using <a href=\"https://docs.python.org/3/library/functions.html#zip\" rel=\"nofollow noreferrer\"><code>zip</code></a>:</p>\n\n<pre><code>for name, grade in zip(name_list, grade_list):\n    if grade &gt; avg:\n        print(name, grade)\n</code></pre>\n\n<p>\u2026 or you can loop over the indexes of <code>grade_list</code> instead of the members:</p>\n\n<pre><code>for i in range(len(grade_list)):\n    if grade_list[i] &gt; avg:\n        print(name_list[i], grade_list[i]))\n</code></pre>\n\n<p>The first one is obviously cleaner and less verbose, so if you can understand how <code>zip</code> works, that's the one you should probably use.</p>\n\n<hr>\n\n<p>But let me show you an even nicer way to solve this:</p>\n\n<pre><code>students, grades = [], []\nfor i in range(4):\n    students = input(f\"Student {i+1}: \")\n    grade = int(input(f\"Grade of {st}: \"))\n    students.append(student)\n    grades.append(grade)\n\navg = sum(grades) / len(grades) # or, even better, statistics.mean(grades)\n\nfor name, grade in zip(names, grades):\n    if grade &gt; avg:\n        print(name, grade)\n</code></pre>\n\n<p>Now, you don't have to repeat yourself four times\u2014and, if you want to change it to handle John, Paul, Ringo, George, and Brian, or even to ask the user how many students to handle, you only need to replace that <code>4</code> with <code>5</code> or <code>int(input(\"How many students? \"))</code>, and the rest of your code still works.</p>\n\n<p>(If you're not using Python 3.6, you can't use \"f-strings\" like <code>f\"Student {i+1}: \"</code>, but you can change those to use <code>%</code>, as you're already used to.)</p>\n\n<hr>\n\n<p>Other ideas to play with once you've got the basics working:</p>\n\n<ul>\n<li>Use a list of pairs (tuples, or lists, with two elements), instead of a pair of lists.</li>\n<li>Use a list of instances of some very simple class (maybe built with <code>namedtuple</code>, <code>@dataclass</code>, or <code>@attr</code>) instead of just pairs.</li>\n<li>Use a <code>dict</code> instead of a list of pairs. Notice that this requires names to be unique (which you might actually want), and abandons any notion of order.\n\n<ul>\n<li>Or use an <code>OrderedDict</code>, which gives you the same benefits without losing ordering.</li>\n<li>Or use a third-party collection class like <code>blist.sorteddict</code> that can keep things sorted by name, or by grade, or whatever you want.</li>\n</ul></li>\n</ul>\n\n<p>These all have different pros and cons, so it's worth working through a bunch of them to compare. <a href=\"https://stackoverflow.com/a/50614716/908494\">jpp's answer</a> demonstrates the <code>dict</code> solution\u2014as you can see, it's cleaner and simpler in some ways, less so in others.</p>\n"}, {"comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 1, "creation_date": 1527723878, "post_id": 50614716, "comment_id": 88239320, "body": "It might be worth mentioning what happens if you have two students with the same name. (Whether that&#39;s a feature or a bug depends on the OP&#39;s problem, of course.)"}], "tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 2, "last_activity_date": 1527725188, "last_edit_date": 1527725188, "creation_date": 1527723543, "answer_id": 50614716, "question_id": 50614128, "link": "https://stackoverflow.com/questions/50614128/print-inputs-if-condition/50614716#50614716", "title": "Print inputs if condition", "body": "<p>This is an extension to <a href=\"https://stackoverflow.com/a/50614191/9209546\">@abarnet's post</a>, showing an alternative way to structure your data.</p>\n\n<p>If the student <em>number</em> is not important, you can use an unordered collection such as a dictionary. If ordering is important, the below solution can be adapted to use <code>collections.OrderedDict</code>.</p>\n\n<p>Note that dictionary keys must be unique; so duplicate names are not permitted with this structure. You can, however, create a dictionary of tuples to map a unique identifying number to (name, score).</p>\n\n<pre><code>from statistics import mean\n\n# initialise dictionary\nname_grade_dict = {}\n\n# iterate number of students    \nfor i in range(4):\n    student = input(f\"Student {i+1}: \")\n    grade = int(input(f\"Grade of {student}: \"))\n    name_grade_dict[student] = grade  # add name -&gt; grade mapping to dict\n\n# calculate average using statistics.mean\navg = mean(name_grade_dict.values())\n\n# iterate dictionary using dict.items view\nfor name, grade in name_grade_dict.items():\n    if grade &gt; avg:\n        print(name, grade)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9872936"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1527725188, "creation_date": 1527719015, "question_id": 50614128, "link": "https://stackoverflow.com/questions/50614128/print-inputs-if-condition", "title": "Print inputs if condition", "body": "<p>I would like to create an application that reads the name and grade of 4 students, prints the average and says which student is above average. For instance:</p>\n\n<ul>\n<li>Student 1: John\n\n<ul>\n<li>Grade of John: 90</li>\n</ul></li>\n<li>Student 2: Paul\n\n<ul>\n<li>Grade of Paul: 85</li>\n</ul></li>\n<li>Student 3: Ringo\n\n<ul>\n<li>Grade of Ringo: 80</li>\n</ul></li>\n<li>Student 4:\n\n<ul>\n<li>Grade of George: 75</li>\n</ul></li>\n</ul>\n\n<p>The average of grades is 82.5 and John and Paul are above average. Here's my code:</p>\n\n<pre><code>grade_list = []\n\nst1 = input(\"Sudent 1: \")\ngrade1 = int(input(\"Grade of %s: \" % (st1)))\nst2 = input(\"Student 2: \")\ngrade2 = int(input(\"Grade of %s: \" % (st2)))\nst3 = input(\"Student 3: \")\ngrade3 = int(input(\"Grade of %s: \" % (st3)))\nst4 = input(\"Student 4: \")\ngrade4= int(input(\"Grade of %s: \" % (st4)))\n\navg = (grade1 + grade2 + grade3 + grade4) / 4\n\ngrade_list.append(grade1)\ngrade_list.append(grade2)\ngrade_list.append(grade3)\ngrade_list.append(grade4)\n\n\nfor x in grade_list:\n    if x &gt; avg:\n        print(x)\n</code></pre>\n\n<p>I'm able to print the grades of the students that are above average, but how can I print their names? I've tried to sort the grades_list and create a new list for the names, but it didn't help me. Any tips? (Sorry for the bad title)</p>\n"}, {"tags": ["python", "logging", "call"], "comments": [{"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1527721434, "post_id": 50614109, "comment_id": 88238726, "body": "Your program could just do <code>subprocess.call([&quot;script&quot;, &quot;logfile.log&quot;, &quot;-c&quot;, &quot;MyRealProgram.py&quot;])</code>, so that your code actually runs under the control of <code>script</code>.  If you insist on doing it all within a single process, you&#39;d have to override <code>sys.stdin</code>, <code>sys.stdout</code>, and <code>sys.stderr</code> so that they write any data to your log file as well as the original STDIO handles."}, {"owner": {"reputation": 49, "user_id": 7355384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc8b42ebf2defe8af50f6432d3b350ab?s=128&d=identicon&r=PG&f=1", "display_name": "user7355384", "link": "https://stackoverflow.com/users/7355384/user7355384"}, "reply_to_user": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1527742180, "post_id": 50614109, "comment_id": 88243430, "body": "@jasonharper would I be needing 2 python scripts for this to work, then? One for the actual code I want to execute and one for this?"}], "owner": {"reputation": 49, "user_id": 7355384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc8b42ebf2defe8af50f6432d3b350ab?s=128&d=identicon&r=PG&f=1", "display_name": "user7355384", "link": "https://stackoverflow.com/users/7355384/user7355384"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1527718908, "creation_date": 1527718908, "question_id": 50614109, "link": "https://stackoverflow.com/questions/50614109/is-there-a-way-to-run-the-command-script-log-file-not-directly-on-the-termin", "title": "Is there a way to run the command &quot;script &lt;log file&gt;&quot; not directly on the terminal but from within my Python script?", "body": "<p>I want to record everything seen (input, output) on the terminal to a file. The problem is that I need to do that without using the command line. I have tried call():</p>\n\n<pre><code>from subprocess import call\ncall([\"script\", \"logfile.log\"])\n\n#My code\n\ncall([\"exit\"])\n</code></pre>\n\n<p>but it just says </p>\n\n<blockquote>\n  <p>Script started, file is logfile.log</p>\n</blockquote>\n\n<p>on the terminal and the rest of my code won't work (there is a lot of user prompts)</p>\n\n<p>Take note that I have also viewed <a href=\"https://stackoverflow.com/questions/50288783/using-bash-command-script-in-python\">this thread</a> already and tried the code from the answers there but it just does the same thing.</p>\n\n<p>EDIT: Oh and also, I've read somewhere that the reason why it doesn't execute the rest of my code is that after calling script logfile, it starts a new shell? Is there any way for me to still do the same thing \"script logfile\" does without having to enter a new shell?</p>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 1865, "user_id": 6275324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47277d15eafc6cef35b1086c81d2e6ad?s=128&d=identicon&r=PG&f=1", "display_name": "Andrii Maletskyi", "link": "https://stackoverflow.com/users/6275324/andrii-maletskyi"}, "edited": false, "score": 0, "creation_date": 1527719175, "post_id": 50614108, "comment_id": 88238122, "body": "do you mean &quot;how to iterate over the words in every even/odd row&quot;?"}, {"owner": {"reputation": 5201, "user_id": 3798897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PIR5C.jpg?s=128&g=1", "display_name": "Hans Musgrave", "link": "https://stackoverflow.com/users/3798897/hans-musgrave"}, "edited": false, "score": 0, "creation_date": 1527719654, "post_id": 50614108, "comment_id": 88238256, "body": "With your example <code>array</code> (which is really a list of lists), what output do you want? Do you have some example keywords you would want to search for and what you would expect in response?"}], "answers": [{"comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1527719493, "post_id": 50614179, "comment_id": 88238214, "body": "OP doesn&#39;t give his requested output, but I would wager it looks more like <code>itertools.chain.from_iterable([[word for word in line if word in keywords] for line in array[::2]])</code>"}, {"owner": {"reputation": 5201, "user_id": 3798897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PIR5C.jpg?s=128&g=1", "display_name": "Hans Musgrave", "link": "https://stackoverflow.com/users/3798897/hans-musgrave"}, "reply_to_user": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 1, "creation_date": 1527719524, "post_id": 50614179, "comment_id": 88238222, "body": "That&#39;s fair. I&#39;ll ask him to clarify."}], "tags": [], "owner": {"reputation": 5201, "user_id": 3798897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PIR5C.jpg?s=128&g=1", "display_name": "Hans Musgrave", "link": "https://stackoverflow.com/users/3798897/hans-musgrave"}, "is_accepted": false, "score": 2, "last_activity_date": 1527719495, "last_edit_date": 1527719495, "creation_date": 1527719399, "answer_id": 50614179, "question_id": 50614108, "link": "https://stackoverflow.com/questions/50614108/accessing-one-row-at-a-time-in-an-array/50614179#50614179", "title": "Accessing one row at a time in an array", "body": "<p>Here's an example. Your question doesn't make it clear what you want to do with matching lines, but the idea is that you skip every other line with a slice <code>[::2]</code>. This does create a copy of your list, so working with indices directly like <code>xrange(0, len(array), 2)</code> may be more efficient (use <code>range()</code> in Python3).</p>\n\n<pre><code>keywords = ['did', 'you']\n\narray = [['hello', 'how', 'are', 'you'],\n         ['I', 'am', 'doing', 'okay'],\n         ['Okay', 'did','you', 'do', 'your', 'hw','?']]\n\nprint [line for line in array[::2] if any(key in line for key in keywords)]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 0, "last_activity_date": 1527720074, "last_edit_date": 1527720074, "creation_date": 1527719542, "answer_id": 50614197, "question_id": 50614108, "link": "https://stackoverflow.com/questions/50614108/accessing-one-row-at-a-time-in-an-array/50614197#50614197", "title": "Accessing one row at a time in an array", "body": "<p>The first issue to clear up is terminology. Technically, what you have is <em>not</em> an array or a matrix. You have a list of lists.</p>\n\n<p>To iterate over every other line, you can use list indexing. For a list <code>A</code>, this takes the format <code>A[start:stop:step]</code>, where <em>start</em>, <em>stop</em> and <em>step</em> are integers (positive or negative) and <em>stop</em> is not included in the range. If you omit an integer, it is assumed to be <code>0</code> for <em>start</em>, <code>None</code> for <em>end</em>, <code>0</code> for <em>step</em>.</p>\n\n<p>Therefore, to iterate over the first person's words, you can use:</p>\n\n<pre><code>for words_a in array[::2]:\n    # do something\n</code></pre>\n\n<p>Or, for the second person's words, use <code>array[1::2]</code>.</p>\n\n<p>Note the above method involves building new lists. A more memory-efficient method is to use an iterator, such as <code>itertools.slice</code>:</p>\n\n<pre><code>from itertools import islice\n\nfor words_a in islice(array, 0, None, 2):\n    # do something\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5201, "user_id": 3798897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PIR5C.jpg?s=128&g=1", "display_name": "Hans Musgrave", "link": "https://stackoverflow.com/users/3798897/hans-musgrave"}, "edited": false, "score": 0, "creation_date": 1527719756, "post_id": 50614213, "comment_id": 88238284, "body": "You could have the best of both worlds with the <code>xrange()</code> generator. <code>[array[i] for i in xrange(0, len(array), 2) if any(key in array[i] for key in keywords)]</code>. Overly complicated comprehensions can ofuscate meaning, but I think this usage is probably fine."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 5201, "user_id": 3798897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PIR5C.jpg?s=128&g=1", "display_name": "Hans Musgrave", "link": "https://stackoverflow.com/users/3798897/hans-musgrave"}, "edited": false, "score": 0, "creation_date": 1527720344, "post_id": 50614213, "comment_id": 88238449, "body": "@HansMusgrave xrange belongs to python2, please do not recommend python2"}, {"owner": {"reputation": 5201, "user_id": 3798897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PIR5C.jpg?s=128&g=1", "display_name": "Hans Musgrave", "link": "https://stackoverflow.com/users/3798897/hans-musgrave"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1527720703, "post_id": 50614213, "comment_id": 88238519, "body": "@coldspeed I was wrong a couple days ago in not checking that OP had a python3.x tag, but Python2 is still the default in many major operating systems, and all recent credible studies indicate that there are more current developers in Python2 than Python3. If OP happens to have Python2, <code>range()</code> will have undesirable performance characteristics. What is the primary argument for recommending Python3 when OP didn&#39;t ask for it and more likely than not doesn&#39;t use it?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 5201, "user_id": 3798897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PIR5C.jpg?s=128&g=1", "display_name": "Hans Musgrave", "link": "https://stackoverflow.com/users/3798897/hans-musgrave"}, "edited": false, "score": 0, "creation_date": 1527720748, "post_id": 50614213, "comment_id": 88238525, "body": "@HansMusgrave The primary argument is that <a href=\"https://pythonclock.org/\" rel=\"nofollow noreferrer\">python2 is being deprecated</a>."}, {"owner": {"reputation": 5201, "user_id": 3798897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PIR5C.jpg?s=128&g=1", "display_name": "Hans Musgrave", "link": "https://stackoverflow.com/users/3798897/hans-musgrave"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1527720907, "post_id": 50614213, "comment_id": 88238569, "body": "@coldspeed Deprecated or not, isn&#39;t it still worth properly answering the most likely interpretation of OP&#39;s question?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 5201, "user_id": 3798897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PIR5C.jpg?s=128&g=1", "display_name": "Hans Musgrave", "link": "https://stackoverflow.com/users/3798897/hans-musgrave"}, "edited": false, "score": 0, "creation_date": 1527721033, "post_id": 50614213, "comment_id": 88238608, "body": "@HansMusgrave Unless otherwise stated or implied by code, <i>all questions are assumed to contain code written in python3</i>. This is an implicit agreement among the regulars here and it isn&#39;t really up for debate. If you feel up for a discussion, come on down to the python chatroom and try arguing your case. Good luck though. Python2 is on its way out."}, {"owner": {"reputation": 5201, "user_id": 3798897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PIR5C.jpg?s=128&g=1", "display_name": "Hans Musgrave", "link": "https://stackoverflow.com/users/3798897/hans-musgrave"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1527721220, "post_id": 50614213, "comment_id": 88238656, "body": "@coldspeed That was all I was curious about. You&#39;ve been around longer than I had, and I was wondering if there were any hard and fast reasons. Is that mentioned in any documentation/guidelines anywhere? If not, is it reasonable to add it? I think the Python2/3 debate was the core of our misunderstanding last time too."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 5201, "user_id": 3798897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PIR5C.jpg?s=128&g=1", "display_name": "Hans Musgrave", "link": "https://stackoverflow.com/users/3798897/hans-musgrave"}, "edited": false, "score": 0, "creation_date": 1527721345, "post_id": 50614213, "comment_id": 88238701, "body": "@HansMusgrave no, but it is generally implied :) Because these questions will stick around, and as they get older, and as python2&#39;s popularity continues to decrease, the answers need to stay current (aka python3) else they will become useless."}, {"owner": {"reputation": 5201, "user_id": 3798897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PIR5C.jpg?s=128&g=1", "display_name": "Hans Musgrave", "link": "https://stackoverflow.com/users/3798897/hans-musgrave"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1527721892, "post_id": 50614213, "comment_id": 88238850, "body": "@coldspeed That&#39;s fair. Thank you for your help :)"}], "tags": [], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "is_accepted": false, "score": 0, "last_activity_date": 1527719652, "creation_date": 1527719652, "answer_id": 50614213, "question_id": 50614108, "link": "https://stackoverflow.com/questions/50614108/accessing-one-row-at-a-time-in-an-array/50614213#50614213", "title": "Accessing one row at a time in an array", "body": "<p>If you don't mind eschewing the often-idiomatic list comprehension, you could use a simple <code>for</code> loop with a manual <code>next</code> call afterwards. This has the advantage of having a smaller memory footprint, but is obviously more verbose.</p>\n\n<pre><code>acc = []\n\narrayiter = iter(array)\n\nfor line in arrayiter:\n    acc.extend([word for word in line if word in keywords])\n    next(arrayiter, None)  # skips the next line\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9872664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60571a033dc703f23dbf4a91fcdbfaa3?s=128&d=identicon&r=PG&f=1", "display_name": "Roberto Guglielmo", "link": "https://stackoverflow.com/users/9872664/roberto-guglielmo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1527720074, "creation_date": 1527718893, "last_edit_date": 1527719278, "question_id": 50614108, "link": "https://stackoverflow.com/questions/50614108/accessing-one-row-at-a-time-in-an-array", "title": "Accessing one row at a time in an array", "body": "<p>Say I have a matrix of strings </p>\n\n<pre><code>array = [['hello', 'how', 'are', 'you'],\n         ['I', 'am', 'doing', 'okay'],\n         ['Okay', 'did','you', 'do', 'your', 'hw','?']]\n</code></pre>\n\n<p>And I want to search every other line for key words since there suppose to be two people in a conversation. </p>\n\n<p>For example this, matrix has 3 rows and every odd line corresponds to person A and every even line corresponds to person B.</p>\n\n<p>However, I just care about what person A writes, since I'm only searching for words person A said. </p>\n"}, {"tags": ["python", "image-processing", "computer-vision", "convolution", "dft"], "comments": [{"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1527727341, "post_id": 50614085, "comment_id": 88240114, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/49317834/analytical-fourier-transform-vs-fft-of-functions-in-matlab\">Analytical Fourier transform vs FFT of functions in Matlab</a>"}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1527727511, "post_id": 50614085, "comment_id": 88240156, "body": "The linked question is not identical, but it explains your problem: the FFT expects the origin of the image (and the kernel) in the top-left corner. Since you have it in the middle, it is shifted. This leads to the effects you are seeing. Use <code>ifftshift</code> on your kernel before <code>fft</code>."}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1527727545, "post_id": 50614085, "comment_id": 88240168, "body": "Also, you don\u2019t need to apply <code>fftshift</code> in the frequency domain unless you want to show it."}, {"owner": {"reputation": 11, "user_id": 9654271, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "ARandAI95", "link": "https://stackoverflow.com/users/9654271/arandai95"}, "reply_to_user": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1527905181, "post_id": 50614085, "comment_id": 88316430, "body": "So, I took your advice and I used the ifftshift on the kernel before before applying the fft. However, I still obtained similar results. So, I removed the LOG filter from the operation and I generated a smooth image without wrap around. I&#39;m guessing that the problem stems from using the LOG filter. Do you have any thoughts?"}], "answers": [{"tags": [], "owner": {"reputation": 4123, "user_id": 195787, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4b9620cb172292493f9c02c8f37c6cc7?s=128&d=identicon&r=PG", "display_name": "Royi", "link": "https://stackoverflow.com/users/195787/royi"}, "is_accepted": false, "score": 0, "last_activity_date": 1527781342, "creation_date": 1527781342, "answer_id": 50628106, "question_id": 50614085, "link": "https://stackoverflow.com/questions/50614085/applying-low-pass-and-laplace-of-gaussian-filter-in-frequency-domain/50628106#50628106", "title": "Applying Low Pass and Laplace of Gaussian Filter in Frequency Domain", "body": "<p>What you need to do is decide the boundary condition you're using.<br>\nThe natural one for the Frequency Domain (For Discrete Data) is <a href=\"https://en.wikipedia.org/wiki/Circular_convolution\" rel=\"nofollow noreferrer\">Circular / Cyclic Convolution</a> which means circular boundary condition.</p>\n\n<p>Once you set that and prepare data accordingly, everything works as required.</p>\n\n<p>I created small MATLAB Script (You will be able to easily replicate it in Python) to show how it should be done.</p>\n\n<p>The main thing is:</p>\n\n<pre><code>numRows = size(mI, 1);\nnumCols = size(mI, 2);\n\n% Convolution in Spatial Domain\n% Padding for Cyclic Convolution\nmOGaussianRef = conv2(PadArrayCircular(mI, kernelRadius), mGaussianKernel, 'valid');\nmOLogRef = conv2(PadArrayCircular(mI, kernelRadius), mLog, 'valid');\n\n% Convolution in Frequency Domain\n% Padding and centering of the Kernel\nmGaussianKernel(numRows, numCols) = 0;\nmGaussianKernel = circshift(mGaussianKernel, [-kernelRadius, -kernelRadius]);\n\nmLog(numRows, numCols) = 0;\nmLog = circshift(mLog, [-kernelRadius, -kernelRadius]);\n\nmOGaussian  = ifft2(fft2(mI) .* fft2(mGaussianKernel), 'symmetric');\nmOLog       = ifft2(fft2(mI) .* fft2(mLog), 'symmetric');\n\nconvErr = norm(mOGaussianRef(:) - mOGaussian(:), 'inf');\ndisp(['Gaussian Kernel - Cyclic Convolution Error (Infinity Norm) - ', num2str(convErr)]);\n\nconvErr = norm(mOLogRef(:) - mOLog(:), 'inf');\ndisp(['LoG Kernel - Convolution Error (Infinity Norm) - ', num2str(convErr)]);\n</code></pre>\n\n<p>Which results in:</p>\n\n<pre><code>Gaussian Kernel - Cyclic Convolution Error (Infinity Norm) - 3.4571e-06\nLoG Kernel - Convolution Error (Infinity Norm) - 5.2154e-08\n</code></pre>\n\n<p>Namely it does what it should do.</p>\n\n<p>The full code in my <a href=\"https://github.com/RoyiAvital/StackExchangeCodes/tree/master/StackOverflow/Q50614085\" rel=\"nofollow noreferrer\">Stack Overflow Q50614085 Github Repository</a>.</p>\n\n<p>If you want to see how it should be done for other Boundary Conditions (Or Linear Convolution), have a look at <code>FreqDomainConv.m</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 9654271, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "ARandAI95", "link": "https://stackoverflow.com/users/9654271/arandai95"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3312, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1559576861, "creation_date": 1527718759, "last_edit_date": 1527781487, "question_id": 50614085, "link": "https://stackoverflow.com/questions/50614085/applying-low-pass-and-laplace-of-gaussian-filter-in-frequency-domain", "title": "Applying Low Pass and Laplace of Gaussian Filter in Frequency Domain", "body": "<p>I am trying to applying these two filters in the frequency domain. First, the low-pass filter, followed by the Laplace of Gaussian filter.  Although my image is being filtered correctly, the output is wrapping around. Also, the output image is shifted ( it looks as if the image has been duplicated).</p>\n\n<p>Here's the input and output:\n<a href=\"https://i.stack.imgur.com/Ycw53.png\" rel=\"nofollow noreferrer\">Before and After filter</a></p>\n\n<p>Here's my code:</p>\n\n<pre><code># Padding the image\nimage = Pad(image)\n\n# The mask for low-pass filter\nrows, cols = image.shape\ncenter = (rows, cols)\ncrow, ccol = rows/2, cols/2\nLow_mask = np.zeros((rows, cols), dtype=np.float32)\nLow_mask[crow-cutoff:crow+cutoff, ccol-cutoff:ccol+cutoff] = 1\n\n# Shifting the mask (low-pass)\nLow_mask_dft = np.fft.fft2(Low_mask)\nLow_mask_dft_shift  = np.fft.fftshift(Low_mask_dft)\n\n# Shifting the image\nimage_dft = np.fft.fft2(image)\nimage_dft_shift = np.fft.fftshift(image_dft)\n\n# Performing the convolution\nimage_fdomain = np.multiply(image_dft_shift, Low_mask_dft_shift)\n\n# Shifting the mask (LOG)\nLOGmask = GaussKernel(center)\nLOGmask_dft = np.fft.fft2(LOGmask)\nLOGmask_dft_shift = np.fft.fftshift(LOGmask_dft)\n\n# Performing the convolution\nfrequency_image = np.multiply(image_fdomain, LOGmask_dft_shift)\n\n# Now, return the image back to it's original form\nresult = np.fft.ifftshift(frequency_image)\nresult = np.fft.ifft2(result)\nresult = np.absolute(result)\n\nreturn result\n</code></pre>\n"}, {"tags": ["python", "numpy", "scikit-learn", "pca"], "answers": [{"comments": [{"owner": {"reputation": 5616, "user_id": 2769240, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1501f510275875ae7ac437f758de28e8?s=128&d=identicon&r=PG", "display_name": "Baktaawar", "link": "https://stackoverflow.com/users/2769240/baktaawar"}, "edited": false, "score": 0, "creation_date": 1527721510, "post_id": 50614299, "comment_id": 88238750, "body": "I checked that it is False. However I found the solution by referring to this GitHub comment.  <a href=\"https://github.com/scikit-learn/scikit-learn/issues/6665\" rel=\"nofollow noreferrer\">github.com/scikit-learn/scikit-learn/issues/6665</a>"}, {"owner": {"reputation": 5201, "user_id": 3798897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PIR5C.jpg?s=128&g=1", "display_name": "Hans Musgrave", "link": "https://stackoverflow.com/users/3798897/hans-musgrave"}, "reply_to_user": {"reputation": 5616, "user_id": 2769240, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1501f510275875ae7ac437f758de28e8?s=128&d=identicon&r=PG", "display_name": "Baktaawar", "link": "https://stackoverflow.com/users/2769240/baktaawar"}, "edited": false, "score": 1, "creation_date": 1527721717, "post_id": 50614299, "comment_id": 88238801, "body": "For future generations coming in from google, were the relevant points from that github link that you were using OSX and that updating to numpy 1.11.1 fixed it?"}, {"owner": {"reputation": 5616, "user_id": 2769240, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1501f510275875ae7ac437f758de28e8?s=128&d=identicon&r=PG", "display_name": "Baktaawar", "link": "https://stackoverflow.com/users/2769240/baktaawar"}, "edited": false, "score": 0, "creation_date": 1527821567, "post_id": 50614299, "comment_id": 88280890, "body": "That gihub link fixed it. You need to uninstall and re-install numpy and sklearn as per the comment"}], "tags": [], "owner": {"reputation": 5201, "user_id": 3798897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PIR5C.jpg?s=128&g=1", "display_name": "Hans Musgrave", "link": "https://stackoverflow.com/users/3798897/hans-musgrave"}, "is_accepted": false, "score": 1, "last_activity_date": 1527720351, "creation_date": 1527720351, "answer_id": 50614299, "question_id": 50614069, "link": "https://stackoverflow.com/questions/50614069/t-sne-in-sklearn-giving-nan-or-inf-data-error/50614299#50614299", "title": "T-SNE in Sklearn giving NaN or Inf data error", "body": "<p>You also need to check with <code>np.isinf()</code> to ensure there are no infinite features.</p>\n"}], "owner": {"reputation": 5616, "user_id": 2769240, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1501f510275875ae7ac437f758de28e8?s=128&d=identicon&r=PG", "display_name": "Baktaawar", "link": "https://stackoverflow.com/users/2769240/baktaawar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 644, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1527720351, "creation_date": 1527718637, "question_id": 50614069, "link": "https://stackoverflow.com/questions/50614069/t-sne-in-sklearn-giving-nan-or-inf-data-error", "title": "T-SNE in Sklearn giving NaN or Inf data error", "body": "<p>I am trying to run t-sne from sklearn on a reduced dimensions data.</p>\n\n<p>To start with I have a tfidf matrix. Here is the code for the same.</p>\n\n<p>def tf_vectorizer(docs):\n    \"\"\" Extract Term frequency vector for each document</p>\n\n<pre><code>\"\"\"\n\nfrom sklearn.feature_extraction.text import TfidfVectorizer\nprint(\"Extracting tfidf features for clustering...\\n\")\ntf_vec = TfidfVectorizer(max_df=0.95, min_df=2,norm='l2').fit(docs)\n\nprint(\"Tf-idf features extracted!!\\n\")\nreturn tf_vec\n</code></pre>\n\n<p>Then I am using TruncatedSVD to reduce the dimensions from 11K to 500. Here it is</p>\n\n<pre><code>def reduce_dimensions(tfidf_data,n_components):\n    \"\"\" This function will reduce the dimension of the dataset\"\"\"\n\n\n    from sklearn.decomposition import TruncatedSVD\n    svd=TruncatedSVD(n_components=n_components,random_state=42)\n\n    svd_reduced_data=svd.fit_transform(tfidf_data)\n    svd_reduced_data=svd_reduced_data.astype('float')\n    #print(\"Explained Variance of all components {}\".format(svd.explained_variance_ratio_))\n    print(\"Total variance explained {}\".format(svd.explained_variance_ratio_.sum()))\n\n    return svd_reduced_data\n</code></pre>\n\n<p>I checked the output of svd_reduced_data to check if there is any NaN or Inf.</p>\n\n<pre><code>np.isnan(svd_reduced_data).sum()\n0\n</code></pre>\n\n<p>So this shows there are no missing values in this data. Now I pass this data of 500 dimensions to tsne to reduce it to 2 dimensions as follows:</p>\n\n<pre><code>  from sklearn.manifold import TSNE\n   tsne=TSNE(n_components=n_components,n_iter=300,random_state=42)\n   tsne_reduced_data=tsne.fit_transform(svd_reduced_data)\n</code></pre>\n\n<p>And I get this error:</p>\n\n<pre><code>/Users/anaconda/envs/dl/lib/python3.5/site-packages/scipy/linalg/misc.py in norm(a, ord, axis, keepdims)\n    127     \"\"\"\n    128     # Differs from numpy only in non-finite handling and the use of blas.\n--&gt; 129     a = np.asarray_chkfinite(a)\n    130 \n    131     # Only use optimized norms if axis and keepdims are not specified.\n\n/Users/anaconda/envs/dl/lib/python3.5/site-packages/numpy/lib/function_base.py in asarray_chkfinite(a, dtype, order)\n   1231     if a.dtype.char in typecodes['AllFloat'] and not np.isfinite(a).all():\n   1232         raise ValueError(\n-&gt; 1233             \"array must not contain infs or NaNs\")\n   1234     return a\n   1235 \n\nValueError: array must not contain infs or NaNs\n</code></pre>\n\n<p>Not sure why it is giving this error when the underlying data has no NaN. Any help?</p>\n"}, {"tags": ["python", "apache-spark", "pyspark", "apache-spark-sql", "pyspark-sql"], "answers": [{"tags": [], "owner": {"reputation": 36454, "user_id": 5880706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/147556055711bd1fa5a938cef92a22b9?s=128&d=identicon&r=PG&f=1", "display_name": "Ramesh Maharjan", "link": "https://stackoverflow.com/users/5880706/ramesh-maharjan"}, "is_accepted": true, "score": 1, "last_activity_date": 1527744561, "creation_date": 1527744561, "answer_id": 50617222, "question_id": 50613977, "link": "https://stackoverflow.com/questions/50613977/unsupported-array-error-when-reading-jdbc-source-in-pyspark/50617222#50617222", "title": "Unsupported Array error when reading JDBC source in (Py)Spark?", "body": "<p>I guess you don't want the table names that belong to internal working of postgres such as <code>pg_type</code>, <code>pg_policies</code> etc whose schema are of type <code>pg_catalog</code> that causes the error </p>\n\n<blockquote>\n  <p>py4j.protocol.Py4JJavaError: An error occurred while calling o34.jdbc.\n  : java.sql.SQLException: Unsupported type ARRAY</p>\n</blockquote>\n\n<p>when you try to read them as </p>\n\n<pre><code>spark.read.jdbc(url=jdbcUrl, table='pg_type', properties=connectionProperties)\n</code></pre>\n\n<p>and there are tables such as <code>applicable_roles</code>, <code>view_table_usage</code> etc whose schema are of type <code>information_schema</code> that causes </p>\n\n<blockquote>\n  <p>py4j.protocol.Py4JJavaError: An error occurred while calling o34.jdbc.\n  : org.postgresql.util.PSQLException: ERROR: relation \"view_table_usage\" does not exist</p>\n</blockquote>\n\n<p>when you try to read them as </p>\n\n<pre><code>spark.read.jdbc(url=jdbcUrl, table='view_table_usage', properties=connectionProperties)\n</code></pre>\n\n<p>The tables whose schema types are public can be read into tables using above jdbc commands. </p>\n\n<blockquote>\n  <blockquote>\n    <p>I checked table_name type and it is String , is this the correct approach ?</p>\n  </blockquote>\n</blockquote>\n\n<p>So you need to <em>filter out</em> those table names and apply your logic as </p>\n\n<pre><code>from pyspark.sql import SparkSession\n\nspark = SparkSession.builder \\\n    .appName(\"Connect to DB\") \\\n    .getOrCreate()\n\njdbcUrl = \"jdbc:postgresql://hostname:post/\" \nconnectionProperties = {\n  \"user\" : \" \",\n  \"password\" : \" \",\n  \"driver\" : \"org.postgresql.Driver\"\n}\n\nquery = \"information_schema.tables\"\ndf = spark.read.jdbc(url=jdbcUrl, table=query, properties=connectionProperties)\n\ntable_name_list = df.filter((df[\"table_schema\"] != 'pg_catalog') &amp; (df[\"table_schema\"] != 'information_schema')).select(\"table_name\").rdd.flatMap(lambda x: x).collect() \n    for table_name in table_name_list:\n          df2 = spark.read.jdbc(url=jdbcUrl, table=table_name, properties=connectionProperties)\n</code></pre>\n\n<p>That should work</p>\n"}], "owner": {"reputation": 576, "user_id": 6679114, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/f79fe06a22f29c07e43cec8bfe9b5da7?s=128&d=identicon&r=PG&f=1", "display_name": "K.Pil", "link": "https://stackoverflow.com/users/6679114/k-pil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1357, "favorite_count": 0, "accepted_answer_id": 50617222, "answer_count": 1, "score": 2, "last_activity_date": 1527744561, "creation_date": 1527717967, "last_edit_date": 1527732191, "question_id": 50613977, "link": "https://stackoverflow.com/questions/50613977/unsupported-array-error-when-reading-jdbc-source-in-pyspark", "title": "Unsupported Array error when reading JDBC source in (Py)Spark?", "body": "<p>Trying to convert postgreSQL DB to Dataframe . Following is my code:</p>\n\n<pre><code>from pyspark.sql import SparkSession\n\nspark = SparkSession.builder \\\n    .appName(\"Connect to DB\") \\\n    .getOrCreate()\n\njdbcUrl = \"jdbc:postgresql://XXXXXX\" \nconnectionProperties = {\n  \"user\" : \" \",\n  \"password\" : \" \",\n  \"driver\" : \"org.postgresql.Driver\"\n}\n\nquery = \"(SELECT table_name FROM information_schema.tables) XXX\"\ndf = spark.read.jdbc(url=jdbcUrl, table=query, properties=connectionProperties)\n\ntable_name_list = df.select(\"table_name\").rdd.flatMap(lambda x: x).collect() \n    for table_name in table_name_list:\n          df2 = spark.read.jdbc(url=jdbcUrl, table=table_name, properties=connectionProperties)\n</code></pre>\n\n<p>Error I am getting : </p>\n\n<blockquote>\n  <p>java.sql.SQLException: Unsupported type ARRAY on generating df2 for table name</p>\n</blockquote>\n\n<p>If I hard code table name value , I do not get the same error</p>\n\n<pre><code>df2 = spark.read.jdbc(jdbcUrl,\"conditions\",properties=connectionProperties) \n</code></pre>\n\n<p>I checked table_name type and it is String , is this the correct approach ? </p>\n"}, {"tags": ["python", "django", "port", "listen"], "comments": [{"owner": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "edited": false, "score": 0, "creation_date": 1527718007, "post_id": 50613957, "comment_id": 88237804, "body": "Just to be sure, the machine where you run <code>runserver</code> and the machine where you open the browser are the same machine, right? Can you post the output of <code>runserver</code>?"}, {"owner": {"reputation": 21, "user_id": 9872864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ali Rachidi", "link": "https://stackoverflow.com/users/9872864/ali-rachidi"}, "reply_to_user": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "edited": false, "score": 0, "creation_date": 1527718281, "post_id": 50613957, "comment_id": 88237886, "body": "I just edited my original post @FamousJameous"}, {"owner": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "edited": false, "score": 2, "creation_date": 1527718339, "post_id": 50613957, "comment_id": 88237903, "body": "Do you have a urls entry for <code>&#47;</code>?"}, {"owner": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "edited": false, "score": 0, "creation_date": 1527719069, "post_id": 50613957, "comment_id": 88238090, "body": "Edit the contents of your site and app <code>urls.py</code> files into your question if you are unsure."}, {"owner": {"reputation": 21, "user_id": 9872864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ali Rachidi", "link": "https://stackoverflow.com/users/9872864/ali-rachidi"}, "reply_to_user": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "edited": false, "score": 0, "creation_date": 1527724575, "post_id": 50613957, "comment_id": 88239465, "body": "I am not sure what you mean. @FamousJameous I have urls entry in my site:  urlpatterns = [     path(&#39;polls/&#39;, include(&#39;polls.urls&#39;)),     path(&#39;admin/&#39;, admin.site.urls), ]"}, {"owner": {"reputation": 3147, "user_id": 3500094, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/60e56d19071e326c8ff64bd50719d4b8?s=128&d=identicon&r=PG", "display_name": "souldeux", "link": "https://stackoverflow.com/users/3500094/souldeux"}, "edited": false, "score": 1, "creation_date": 1527727410, "post_id": 50613957, "comment_id": 88240128, "body": "If those are the only entries in your <code>urls.py</code> file, then the 404 error makes sense - there&#39;s a route for <code>polls&#47;</code> and a route for <code>admin&#47;</code>, but no route for <code>&#47;</code>. Try going to <code>127.0.0.1:8000&#47;admin</code> and see if you&#39;re still getting a 404."}, {"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1527727712, "post_id": 50613957, "comment_id": 88240219, "body": "See <a href=\"https://stackoverflow.com/questions/50425492/django-2-0-tutorial-pt-1-error-404-url-conf-probelm\" title=\"django 2 0 tutorial pt 1 error 404 url conf probelm\">stackoverflow.com/questions/50425492/&hellip;</a>"}, {"owner": {"reputation": 10905, "user_id": 6794568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JQCl8.jpg?s=128&g=1", "display_name": "Astik Anand", "link": "https://stackoverflow.com/users/6794568/astik-anand"}, "edited": false, "score": 1, "creation_date": 1527728100, "post_id": 50613957, "comment_id": 88240319, "body": "add all your urls.py from project"}, {"owner": {"reputation": 21, "user_id": 9872864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ali Rachidi", "link": "https://stackoverflow.com/users/9872864/ali-rachidi"}, "edited": false, "score": 0, "creation_date": 1527777790, "post_id": 50613957, "comment_id": 88263931, "body": "I get it now but Im not sure how to fix it yet. How do I write a route for <code>&#47;</code>? Is it <code>path(&#39;&#47;&#39;)</code> in polls/urls.py?"}], "owner": {"reputation": 21, "user_id": 9872864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ali Rachidi", "link": "https://stackoverflow.com/users/9872864/ali-rachidi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 435, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1527723034, "creation_date": 1527717846, "last_edit_date": 1527723034, "question_id": 50613957, "link": "https://stackoverflow.com/questions/50613957/django-runserver-doesnt-respond-on-browser-despite-port-on-listen", "title": "Django runserver doesn&#39;t respond on browser despite port on &#39;LISTEN&#39;", "body": "<p>I have stumbled on this issue that I have no clue how to resolve. When I run <code>python manage.py runserver</code> I get this:</p>\n\n<p><img src=\"https://i.stack.imgur.com/16IWS.png\" alt=\"enter image description here\"></p>\n\n<p>I open <a href=\"http://127.0.0.1:8000/\" rel=\"nofollow noreferrer\">http://127.0.0.1:8000/</a> (before quitting the server with CONTROL-C) on my browser, which shows the following result:</p>\n\n<p><img src=\"https://i.stack.imgur.com/3VRO1.png\" alt=\"enter image description here\"></p>\n\n<p>I tried all the solutions proposed on StackOverflow for similar problems. </p>\n\n<p>I tried running python manage.py runserver 0.0.0.0:8000 but it didn't change anything. </p>\n\n<p>I checked my port was listening using <code>sudo nmap -sT -O localhost</code> and the result was this:</p>\n\n<p><img src=\"https://i.stack.imgur.com/qnTwN.png\" alt=\"enter image description here\"></p>\n\n<p>but when running <code>netstat -anv</code>, I get this:</p>\n\n<p><img src=\"https://i.stack.imgur.com/UVCag.png\" alt=\"enter image description here\"></p>\n\n<p>I even tried killing it using <code>sudo lsof -t -i tcp:80</code> then <code>kill -9 xxxx</code> (with xxx being the pid).</p>\n\n<p>All my proxies are deactivated (see below) so I have no clue what's going.</p>\n\n<p><img src=\"https://i.stack.imgur.com/PWY34.png\" alt=\"enter image description here\"></p>\n\n<p>I have been trying to resolve this issue for the past two days. I am a beginner in Django and would like to know what is going on. I have been reading all threads on the website but haven't found a solution that suits me.</p>\n\n<p>It was working perfectly the last time I worked on the project, and when I reopened it a couple of days later, the browser stopped working. </p>\n\n<p>I am looking forward to your answer. Thank you!!</p>\n"}, {"tags": ["python", "return", "yield"], "comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 1, "creation_date": 1527717341, "post_id": 50613862, "comment_id": 88237617, "body": "You overwrite your dictionary each time through the loop, so what are you trying to accomplish? Do you want a list of dictionaries?  It seems to me that the keys in your dictionary should be each <code>client_id</code>, and the value is a dictionary containing those other attributes."}, {"owner": {"reputation": 13, "user_id": 8574616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/578f0ec760dedbeff570fa92fb097bb6?s=128&d=identicon&r=PG&f=1", "display_name": "Pauline", "link": "https://stackoverflow.com/users/8574616/pauline"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1527717422, "post_id": 50613862, "comment_id": 88237643, "body": "It only returns the first line from the -txt file"}, {"owner": {"reputation": 13, "user_id": 8574616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/578f0ec760dedbeff570fa92fb097bb6?s=128&d=identicon&r=PG&f=1", "display_name": "Pauline", "link": "https://stackoverflow.com/users/8574616/pauline"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1527718121, "post_id": 50613862, "comment_id": 88237844, "body": "I want a dictionary, with the format like so: {&#39;client_id&#39;: &#39;id: 8914ba03&#39;, &#39;coordinates&#39;: {&#39;lat&#39;: &#39; lat: 51.47100685&#39;, &#39;long&#39;: &#39; long:16.29731236&#39;}}  It doesn&#39;t seem to me that I overwrite it, since I can manage to print out the whole thing? But I won&#39;t say for sure that&#39;s the case. The loop principle with assigning key and values I think is working... I just want to be able to use the dictionary in another function."}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1527718181, "post_id": 50613862, "comment_id": 88237865, "body": "You print it, then you overwrite it your next time through the loop.  You probably want to just append to a list And return that at the end of the loop."}], "answers": [{"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1527720868, "post_id": 50614104, "comment_id": 88238556, "body": "<code>if line</code> will always be true, because <code>line</code> will at least be <code>&#39;\\n&#39;</code> (or else the iterator would have stopped). You want <code>element = line.split(&quot;,&quot;)</code> then <code>if element</code> (which <i>may</i> be empty)"}, {"owner": {"reputation": 13, "user_id": 8574616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/578f0ec760dedbeff570fa92fb097bb6?s=128&d=identicon&r=PG&f=1", "display_name": "Pauline", "link": "https://stackoverflow.com/users/8574616/pauline"}, "edited": false, "score": 0, "creation_date": 1527758035, "post_id": 50614104, "comment_id": 88251107, "body": "Thank you so much Oliver, much appreciated!"}], "tags": [], "owner": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "is_accepted": true, "score": 2, "last_activity_date": 1527721860, "last_edit_date": 1527721860, "creation_date": 1527718866, "answer_id": 50614104, "question_id": 50613862, "link": "https://stackoverflow.com/questions/50613862/how-to-return-python-dictionary-to-use-in-other-function/50614104#50614104", "title": "How to return python dictionary to use in other function?", "body": "<p>There are a few errors in you code.</p>\n\n<ol>\n<li><p>Use a <code>return</code> statement to output the dictionary.</p></li>\n<li><p>The <em>while-loop</em> does not loop as you are breaking on the first iteration. Use an <em>if-statement</em> to check if the line is empty instead.</p></li>\n<li><p>The last entries in the <code>client_details</code> dict are overwritten on each iteration. Create a new entry instead, probably using the <code>client_id</code> as key.</p></li>\n<li><p>It is recommended you use a <code>with</code> context manager to open your file.</p></li>\n<li><p>It is preferable to provide the name of your file to your function and let it open it instead of having a globally opened file.</p></li>\n</ol>\n\n<p>Here is a fixed version of your code.</p>\n\n<pre><code>def get_all_client_id(file):\n    client_details = {}\n\n    with open(file, 'r') as f:\n        for line in f:\n            element = line.strip().split(',')\n            if element:\n                client_id, lat, long, *more = element\n                client_details[client_id] = {'lat': lat, 'long': long}\n\n    return client_details\n\nclients_dict = get_all_client_id(\"C:\\\\Users\\\\clients.txt\")\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8574616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/578f0ec760dedbeff570fa92fb097bb6?s=128&d=identicon&r=PG&f=1", "display_name": "Pauline", "link": "https://stackoverflow.com/users/8574616/pauline"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5989, "favorite_count": 0, "accepted_answer_id": 50614104, "answer_count": 1, "score": -2, "last_activity_date": 1527721860, "creation_date": 1527717256, "last_edit_date": 1527717341, "question_id": 50613862, "link": "https://stackoverflow.com/questions/50613862/how-to-return-python-dictionary-to-use-in-other-function", "title": "How to return python dictionary to use in other function?", "body": "<p>In this function I'm reading from a .txt file, and store the values in a dictionary. I want to be able to pass this dictionary to another function, to do further calculations and sorting.</p>\n\n<p>I can manage to print all rows from the .txt file, but that's it.</p>\n\n<p>Return breaks the loop and only gives the first row.</p>\n\n<p>Global variables and nested functions are bad form.</p>\n\n<p>Have tried to use yield (for the first time), but that only prints \"generator object get_all_client_id at 0x03369A20\"</p>\n\n<pre><code>file_with_client_info = open(\"C:\\\\Users\\\\clients.txt\", \"r\")\n\ndef get_all_client_id():\n    client_details = {}\n\n     for line in file_with_client_info:\n        element = line.split(\",\")\n        while element:\n            client_details['client_id'] = element[0]\n            client_details['coordinates'] = {}\n            client_details['coordinates']['lat'] = element[1]\n            client_details['coordinates']['long'] = element[2]\n            break\n\n        print(client_details)\n</code></pre>\n"}, {"tags": ["python", "bash", "perl", "random", "file-io"], "comments": [{"owner": {"reputation": 4917, "user_id": 2320961, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AdwXN.png?s=128&g=1", "display_name": "Nic3500", "link": "https://stackoverflow.com/users/2320961/nic3500"}, "edited": false, "score": 2, "creation_date": 1527725867, "post_id": 50613848, "comment_id": 88239806, "body": "Hi, I have rewritten bash scripts into Perl many times when bash was to slow.  The performance was greatly improved.  Then I will not comment on the algorithm itself, just the implementation language.  You can look at this <a href=\"https://blog.famzah.net/2016/02/09/cpp-vs-python-vs-perl-vs-php-performance-benchmark-2016/\" rel=\"nofollow noreferrer\">blog.famzah.net/2016/02/09/&hellip;</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1527738256, "post_id": 50613848, "comment_id": 88242508, "body": "Yes, the biggest consumer would be the &quot;random stuff,&quot; and with all those extra processes (pipeline!).  The next consumer would be the I/O, and finally I suspect the choice of shell.  So: try with some dirt simple randomness (important: how good does that need to be?). And use a different tool.  Given what you desire I&#39;d say that a scripting language should do, but of course that C/C++ should be better.  Also: can you precompute a quasi-random sequence? Does this need to run repeatedly, often ...?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1527758193, "post_id": 50613848, "comment_id": 88251205, "body": "I just rewrote it in Perl and it took about 3 seconds to create 100_000_000 lines with 3 and 4."}, {"owner": {"reputation": 1036, "user_id": 6505499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9632fb64ecb7a04e5f65d92a4063288?s=128&d=identicon&r=PG&f=1", "display_name": "bballdave025", "link": "https://stackoverflow.com/users/6505499/bballdave025"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1527885763, "post_id": 50613848, "comment_id": 88312349, "body": "@zdim : Thanks for your helpful comments. I did find a solution using a quasi-random sequence. (I replaced <code>cat</code> with <code>base64</code>, wrote two arrays of 1 million strings, then read them back out.) This worked, but took over 20 minutes. I seem to remember that <code>bash</code> has an array-size limit based on underlying RAM. <a href=\"https://unix.stackexchange.com/a/195215/291375\">This link</a> says 1.3 GB ram leads to a limit of about 18 million. @simbabque has a solution that is much faster, but you&#39;re welcome to post your idea as an answer for completeness."}, {"owner": {"reputation": 1036, "user_id": 6505499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9632fb64ecb7a04e5f65d92a4063288?s=128&d=identicon&r=PG&f=1", "display_name": "bballdave025", "link": "https://stackoverflow.com/users/6505499/bballdave025"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1527885971, "post_id": 50613848, "comment_id": 88312418, "body": "@zdim : I also have a n00b question. What do you mean by &quot;pipeline!&quot;?"}, {"owner": {"reputation": 1036, "user_id": 6505499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9632fb64ecb7a04e5f65d92a4063288?s=128&d=identicon&r=PG&f=1", "display_name": "bballdave025", "link": "https://stackoverflow.com/users/6505499/bballdave025"}, "edited": false, "score": 0, "creation_date": 1528132499, "post_id": 50613848, "comment_id": 88380995, "body": "I think I figured out what is meant by &quot;pipeline!&quot;. As I understand it, each time a pipe is used, a subshell is spawned. Is this correct?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1528132737, "post_id": 50613848, "comment_id": 88381099, "body": "Right. By a &quot;pipeline&quot; one normally refers to a string of  pipes <code>|</code> taking a command&#39;s output and making it another command&#39;s input.  This is a quintessential UNIX approach, of combining tools, each designed to do their thing, for complete processing.  However, for each <code>|</code> a subshell need be spawned and this costs."}, {"owner": {"reputation": 1036, "user_id": 6505499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9632fb64ecb7a04e5f65d92a4063288?s=128&d=identicon&r=PG&f=1", "display_name": "bballdave025", "link": "https://stackoverflow.com/users/6505499/bballdave025"}, "edited": false, "score": 0, "creation_date": 1528134832, "post_id": 50613848, "comment_id": 88382075, "body": "I appreciate you letting me know that I had figured it out correctly. Your help has been great!"}, {"owner": {"reputation": 1036, "user_id": 6505499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9632fb64ecb7a04e5f65d92a4063288?s=128&d=identicon&r=PG&f=1", "display_name": "bballdave025", "link": "https://stackoverflow.com/users/6505499/bballdave025"}, "edited": false, "score": 0, "creation_date": 1576106947, "post_id": 50613848, "comment_id": 104795608, "body": "I&#39;m wondering why this question has been voted down. I&#39;m planning on removing the question, since it seems like it&#39;s not a good question. However, I&#39;d like to know why it got the negative responses."}, {"owner": {"reputation": 1036, "user_id": 6505499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9632fb64ecb7a04e5f65d92a4063288?s=128&d=identicon&r=PG&f=1", "display_name": "bballdave025", "link": "https://stackoverflow.com/users/6505499/bballdave025"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1576191515, "post_id": 50613848, "comment_id": 104829550, "body": "After looking at meta stuff <a href=\"https://meta.stackoverflow.com/q/270586/6505499\">here</a> and <a href=\"https://meta.stackoverflow.com/q/291139/6505499\">here</a> I decided to leave the question here. Considering its reach, it doesn&#39;t seem too consequential whether it stays or not. Also, considering the reputation gained by @simbabque , deleting this wouldn&#39;t hurt...I just hate to get rid of such an awesome answer."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1576193026, "post_id": 50613848, "comment_id": 104829956, "body": "@bballdave025 Yes, please leave it -- it&#39;s a good question!  I&#39;ve no idea why it got downvoted -- perhaps because it&#39;s long, written in proper sentences, with some unneeded statements here or there ... ?  I voted it up back then and i reread it  now and still think that it&#39;s a (very) good question.  It could be simplified and shortened but those are details which don&#39;t make it bad (just harder to read through)."}, {"owner": {"reputation": 1036, "user_id": 6505499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9632fb64ecb7a04e5f65d92a4063288?s=128&d=identicon&r=PG&f=1", "display_name": "bballdave025", "link": "https://stackoverflow.com/users/6505499/bballdave025"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1576193470, "post_id": 50613848, "comment_id": 104830044, "body": "I appreciate you taking the time to comment on this, @zdim. I also appreciate the help you gave when I was facing the issue. Keep up the good work!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1576193831, "post_id": 50613848, "comment_id": 104830115, "body": "You are most welcome :)   Thanks for responding :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1576231506, "post_id": 50613848, "comment_id": 104840628, "body": "Thank you for the nice words. It&#39;s at 0 now. No idea why I didn&#39;t vote at the time."}], "answers": [{"comments": [{"owner": {"reputation": 1036, "user_id": 6505499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9632fb64ecb7a04e5f65d92a4063288?s=128&d=identicon&r=PG&f=1", "display_name": "bballdave025", "link": "https://stackoverflow.com/users/6505499/bballdave025"}, "edited": false, "score": 0, "creation_date": 1527886559, "post_id": 50621063, "comment_id": 88312615, "body": "Verified! I ran it for a million strings to compare with my <code>bash</code> array solution (which couldn&#39;t get to 100 million due to array-size issues.) Input: <code>time perl foo.pl 3 4 1000000 &gt; big_file.out</code> Output: <code>real  0m3.170s</code> <code>user 0m3.135s</code> <code>sys 0m0.015s</code>. My computer is obviously slower that yours, but the solution is excellent!"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 1036, "user_id": 6505499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9632fb64ecb7a04e5f65d92a4063288?s=128&d=identicon&r=PG&f=1", "display_name": "bballdave025", "link": "https://stackoverflow.com/users/6505499/bballdave025"}, "edited": false, "score": 0, "creation_date": 1527957264, "post_id": 50621063, "comment_id": 88327900, "body": "@bballdave025 yeah that&#39;s the problem with benchmarking. ;)"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 4, "last_activity_date": 1527759104, "creation_date": 1527759104, "answer_id": 50621063, "question_id": 50613848, "link": "https://stackoverflow.com/questions/50613848/bash-python-perl-etc-fast-generation-of-file-with-many-pairs-of-random-alphabe/50621063#50621063", "title": "bash/python/perl/etc. Fast generation of file with many pairs of random, alphabetic strings", "body": "<p>You can do this in Perl and it will run in a matter of seconds for 100 million lines.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';\n\n# read command line arguments\nmy ( $first_length, $second_length, $lines, $first_word, $second_word ) = @ARGV;\n$first_word //= 'TRY';\n$second_word //= 'OFTEN';\n\n# define your alphabet of random characters\nmy @alphabet = ( 'a' .. 'z', q{ } );\nmy $max_rand = scalar @alphabet;\n\nforeach my $i ( 1 .. $lines ) {\n    say join(\n        q{ },\n        ( join q{}, map { $alphabet[ int rand $max_rand ] } 1 .. $first_length ),\n        $first_word,\n        ( join q{}, map { $alphabet[ int rand $max_rand ] } 1 .. $second_length ),\n        $second_word,\n    );\n}\n</code></pre>\n\n<p>This program takes three or five arguments:</p>\n\n<pre><code>$ perl foo.pl 3 4 100000000 TRY OFTEN\n</code></pre>\n\n<p>On my machine it took about three seconds to generate the full 100M lines. The output looks like this:</p>\n\n<pre><code>wab TRY mcqb OFTEN\ntdb TRY tobw OFTEN\nrlf TRY lg v OFTEN\nofn TRY oxdf OFTEN\no j TRY vcfp OFTEN\nffv TRY doud OFTEN\nlvl TRY ckci OFTEN\nxqh TRY wnaa OFTEN\nfhj TRY  pmp OFTEN\noxe TRY swyi OFTEN\n</code></pre>\n"}], "owner": {"reputation": 1036, "user_id": 6505499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9632fb64ecb7a04e5f65d92a4063288?s=128&d=identicon&r=PG&f=1", "display_name": "bballdave025", "link": "https://stackoverflow.com/users/6505499/bballdave025"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 1, "accepted_answer_id": 50621063, "answer_count": 1, "score": 0, "last_activity_date": 1576191894, "creation_date": 1527717205, "last_edit_date": 1576191894, "question_id": 50613848, "link": "https://stackoverflow.com/questions/50613848/bash-python-perl-etc-fast-generation-of-file-with-many-pairs-of-random-alphabe", "title": "bash/python/perl/etc. Fast generation of file with many pairs of random, alphabetic strings", "body": "<h3>My Problem</h3>\n\n<p>I was surprised not to find a similar question here. Maybe I need to learn how to search better. Mainly, I'm trying to figure out which part of my algorithm is slow and if there are alternate, faster ways to accomplish my goal.</p>\n\n<p>I am trying to generate a file with 100 million pairs of random, alphabetic strings. These random strings can include spaces. There are some real, fixed words around the random ones. An example of my desired output is</p>\n\n<pre><code>rrn TRY gy q OFTEN\nibh TRY mpdw OFTEN\nbnq TRY nbjw OFTEN\ntky TRY tedr OFTEN\nc r TRY  fdv OFTEN\ncvs TRY dusr OFTEN\nppd TRY qhrc OFTEN\n...\n</code></pre>\n\n<p>I would like to be able to do this in a Linux scripting language (I'm actually using Cygwin), so answers in <code>bash</code>, <code>python</code>, <code>perl</code>, etc. would be preferred. However, if I'm going to get a big increase in speed using <code>C++</code>, <code>Java</code>, or something else, I'm open to that.</p>\n\n<p>Currently, my script is run via</p>\n\n<pre><code>$ ./create_big_file.sh 100000000\n</code></pre>\n\n<p>The <code>bash</code> script is as follows. I have changed things so as not to hard-code the number of pairs.</p>\n\n<p><strong>My Executable Code</strong></p>\n\n<pre><code>#!/bin/bash\n#\n# @file create_big_file.sh\n\nn_lines=$1\nfilename=\"big_file_${n_lines}.out\"\n\nn_lett_rand_str1=3 # originally had 5, tried 3 for speed\nn_lett_rand_str2=4 # originally had 10, tried 4 for speed\n\nbetween=\" TRY \"\nafter=\" OFTEN\"\n\nwhile [ $n -lt $n_lines ]; do\n  n_lett_rand_str1=3\n  n_lett_rand_str2=4\n\n  random_str1=$(cat /dev/urandom | tr -dc 'a-z ' | \\\nfold -w $n_lett_rand_str1 | head -n 1)\n\n  random_str2=$(cat /dev/urandom | tr -dc 'a-z ' | \\\nfold -w $n_lett_rand_str2 | head -n 1)\n\n  echo \"${random_str1}${between}${random_str2}${after}\" &gt;&gt; \"$filename\"\n\n  n=$(($n+1))\n\ndone #endof:  while [ $n -lt $n_lines ]\n</code></pre>\n\n<p>My run-rime scales approximately linearly, as expected, but the time taken for each iteration seems high to me. If I make the estimation of pure linear time, I've calculated that it would take 265.0 days. If I use the complete <code>t=a*exp[x,b]</code> fit, I've calculated 1.016 years. If I only wanted a million lines, it would take about 2-3 days.</p>\n\n<p><strong>The Question</strong></p>\n\n<p>I'm thinking there's got to be a way to do what I'm trying to do, but faster. Does anyone know of a way to create such a file in less time? I'd be willing to settle for 1 million lines if I could get it in less than 4 hours, but I hope to be able to get 100 million lines in less than a day.</p>\n\n<p>P.S. This is not homework; I'm working on some text analysis.</p>\n\n<hr/>\n\n<h3>My Research</h3>\n\n<pre><code>$ time ./create_big_file.sh 10\n\nreal    0m2.487s\nuser    0m1.115s\nsys     0m1.950s\n\n$ time ./create_big_file.sh 100\n\nreal    0m22.356s\nuser    0m11.764s\nsys     0m16.517s\n\n$ tail -2 big_file_100.out\nmri TRY nzeo OFTEN\nhev TRY uqdf OFTEN\n\n$ time ./create_big_file.sh 500\n\nreal    1m52.143s\nuser    0m57.347s\nsys     1m19.405s\n\n$ time ./create_big_file.sh 1000\n\nreal    3m50.129s\nuser    1m58.697s\nsys     2m45.612s\n</code></pre>\n\n<p>The fit for time vs. number of lines, as found at <a href=\"http://www.wolframalpha.com/input/?i=FindFit%5B%7B%7B10.,2.478%7D,%7B100,22.356%7D,%7B500,112.143%7D,%7B1000,230.129%7D%7D,a*x%5Eb,%7Ba,b%7D,x%5D\" rel=\"nofollow noreferrer\">Wolfram|Alpha</a>, is </p>\n\n<p><i>t(x) = 0.11905 x<sup>1.02845</sup></i></p>\n\n<p>I tried replacing</p>\n\n<pre><code>random_str1=$(cat /dev/urandom | tr -dc 'a-z ' | \\\nfold -w $n_lett_rand_str1 | head -n 1)\n</code></pre>\n\n<p>with</p>\n\n<pre><code>random_str1=$(echo $RANDOM | tr '[0-9]' '[a-z ]')\n</code></pre>\n\n<p>and made the same change to <code>random_str2</code>. That gave me two strings of up to 5 letters. However, I got no significant difference in run-time.</p>\n\n<p><strong>Comparison</strong></p>\n\n<p>I ran the script without any random generation of strings. I commented out anything that had to do with the random stuff and ran the while loop with just</p>\n\n<pre><code>echo \"${between}${after}\"\nn=$(($n+1))\n</code></pre>\n\n<p>inside, and my runtime numbers were (format: <code>{n_lines, n_seconds}</code>)</p>\n\n<pre><code>{{10, 0.049},{100, 0.097},{500, 0.157},{1000,0.263}, {10000, 1.996}, {100000, 19.222}}\n</code></pre>\n\n<p>giving an order of growth as (<a href=\"http://www.wolframalpha.com/input/?i=FindFit%5B%7B%7B10,%200.049%7D,%7B100,%200.097%7D,%7B500,%200.157%7D,%7B1000,0.263%7D,%20%7B10000,%201.996%7D,%20%7B100000,%2019.222%7D%7D,a*x%5Eb,%7Ba,b%7D,x%5D\" rel=\"nofollow noreferrer\">source</a>)</p>\n\n<p><i>t(x) = 0.000243745 x<sup>0.979367</sup></i></p>\n\n<p>That makes me pretty sure the random stuff is causing the problems - like 0.2 seconds per random problems.</p>\n\n<p><strong>Edit</strong>\nThe \"random\" doesn't have to be extremely random. I basically want it to not repeat on the order of 10-20 lines (except VERY rarely.) Again, it's for text processing things. Thanks to @zdim for asking for that clarification.</p>\n\n<p>This will likely only be run once or twice in a six-month period.</p>\n"}, {"tags": ["python", "json", "selenium"], "comments": [{"owner": {"reputation": 11632, "user_id": 8582353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa2e22a564c1d0e098316210a2ec4fb1?s=128&d=identicon&r=PG&f=1", "display_name": "yong", "link": "https://stackoverflow.com/users/8582353/yong"}, "edited": false, "score": 0, "creation_date": 1527735995, "post_id": 50613799, "comment_id": 88242010, "body": "In real word,  one page has many elements, if you put all elements need for script in one json file, please show us the json file with multiple elements, i need to know how you will organize the structure in that big JSON object.  In the question, you just only show only one element use case.  After I know the final structure, i can start write the answer code."}, {"owner": {"reputation": 891, "user_id": 8407951, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/22ac0be4f472b5379a2175a668266f83?s=128&d=identicon&r=PG&f=1", "display_name": "Slowat_Kela", "link": "https://stackoverflow.com/users/8407951/slowat-kela"}, "reply_to_user": {"reputation": 11632, "user_id": 8582353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa2e22a564c1d0e098316210a2ec4fb1?s=128&d=identicon&r=PG&f=1", "display_name": "yong", "link": "https://stackoverflow.com/users/8582353/yong"}, "edited": false, "score": 0, "creation_date": 1585062495, "post_id": 50613799, "comment_id": 107630551, "body": "@yong, I think I have a similar question, if you knew help to help I would appreciate it: <a href=\"https://stackoverflow.com/questions/60832771/python-and-selenium-extract-the-information-in-a-div-class-to-a-json-object-or?noredirect=1#comment107629414_60832771\" title=\"python and selenium extract the information in a div class to a json object or\">stackoverflow.com/questions/60832771/&hellip;</a>"}], "owner": {"reputation": 1984, "user_id": 4439019, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ef8889f7e466495157e2527a85930a9c?s=128&d=identicon&r=PG&f=1", "display_name": "JD2775", "link": "https://stackoverflow.com/users/4439019/jd2775"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 633, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1527718485, "creation_date": 1527716928, "last_edit_date": 1527718485, "question_id": 50613799, "link": "https://stackoverflow.com/questions/50613799/accessing-web-element-info-through-a-json-file-python", "title": "Accessing web element info through a JSON file - Python", "body": "<p>I am designing a test framework utilizing Selenium in Python.  I am trying to seperate out web element information into a JSON file and reading from that into my framework.  My Test script will then pull from this script below, so all 3 entities are separate. I just started so I have one web element to test.</p>\n\n<p>Script looks like this:</p>\n\n<pre><code>from selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.wait import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\nimport json\nfrom Values import strings\n\nelements = 'elements.json'\ndata = json.loads(elements)\n\n\nclass HomeScreen:\n\n    def __init__(self, driver):\n        self.driver = driver\n        self.title = WebDriverWait(self.driver.instance, 10).until(\n            EC.visibility_of_element_located((\n                By.CLASS_NAME, data['name'][0])))\n\n\ndef validate_logo_is_present(self):\n    assert self.title.is_displayed()\n</code></pre>\n\n<p>elements.json file looks like this, currently only one entry:</p>\n\n<pre><code>{\n    \"name\": \"LOGO\",\n    \"element\": \"logo img-responsive\",\n    \"type\": \"CLASS_NAME\"\n}\n</code></pre>\n\n<p>What I want to do for this particular case is access \"logo img-responsive\" in the following line of the top script:</p>\n\n<pre><code>By.CLASS_NAME, data['name'][0])))\n</code></pre>\n\n<p>I won't paste my test script because that is irrelevant to this I think, but when I run it I get the following error:</p>\n\n<pre><code>    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\nE   json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n</code></pre>\n\n<p>Any ideas how to fix this?  And in general, is this a bad idea to keep elements in the json file?  Should I just embed them directly into the top script above? I figure using the file I would eliminate possible redundancy, but I know it will get lengthy. </p>\n\n<p><strong>EDIT</strong></p>\n\n<p>If it helps, this is how I am writing to the JSON file:</p>\n\n<pre><code>def write_to_json(lst, fn):\n    with open(fn, 'a', encoding='utf-8') as file:\n        for item in lst:\n            x = json.dumps(item, indent=4)\n            file.write(x + '\\n')\n\n\nwrite_to_json(res, 'elements.json')\n</code></pre>\n"}, {"tags": ["python", "anaconda", "virtualenv"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1527718346, "post_id": 50613798, "comment_id": 88237906, "body": "What 40 modules? No, usually there are about a dozen installed, things like <code>sqlite</code> and <code>tk</code> and <code>readline</code>. And it never automatically installs modules from your base environment. That would sort of defeat the purpose... Are you sure you weren&#39;t cloning from an environment file?"}, {"owner": {"reputation": 2934, "user_id": 3902974, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LpTxC.jpg?s=128&g=1", "display_name": "Natsfan", "link": "https://stackoverflow.com/users/3902974/natsfan"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1527719002, "post_id": 50613798, "comment_id": 88238076, "body": "I don&#39;t think so since I don&#39;t know how to clone. Maybe it&#39;s my mind, I am getting old. lol"}, {"owner": {"reputation": 2934, "user_id": 3902974, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LpTxC.jpg?s=128&g=1", "display_name": "Natsfan", "link": "https://stackoverflow.com/users/3902974/natsfan"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1527719227, "post_id": 50613798, "comment_id": 88238139, "body": "I thought the purposes of virtual environments were to allow user to do things like run python 2.7.15 and python 3.6.5 without getting things confused.  At least in my simple mind!"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1527719429, "post_id": 50613798, "comment_id": 88238193, "body": "Well, there is a <code>-clone</code> option when you use <code>conda</code>, and maybe what you are recalling actually used <code>clone</code> instead of <code>create</code> (easy to mix up). Generally, virtual environments are to cloister your dependancies. So I&#39;m working on one project which has x,y,z requirements, and another project which has h,f,x requirements, I can have two different environments without the two clashing, or without just creating one big mess in your global environment, with <code>h,f,x,y,z</code> installed (what happens when one project requires keeping x static, and the other requires an upgrade)?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1527719545, "post_id": 50613798, "comment_id": 88238227, "body": "<code>conda</code> does make it easy to create environments with different interpreters (I recall this was annoying using <code>virtualenv</code>), though. And I definitely keep just a &quot;latest python version&quot; environment around when I want to play with new features so I can advocate for upgrading :)"}], "owner": {"reputation": 2934, "user_id": 3902974, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LpTxC.jpg?s=128&g=1", "display_name": "Natsfan", "link": "https://stackoverflow.com/users/3902974/natsfan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1527716916, "creation_date": 1527716916, "question_id": 50613798, "link": "https://stackoverflow.com/questions/50613798/modules-not-showing-up-in-newly-created-virtual-environments-using-anaconda", "title": "Modules not showing up in newly created virtual environments using Anaconda", "body": "<p>I have Anaconda installed on my mac running High Sierra. A base environment was created and it has around 200 modules installed. I do <code>conda list</code> and it lists around 200 modules. I feel confident that in the past, whenever I created a new environment using <code>conda create -n py27 python=2.7.15</code>, for example, it would include the same 200 modules. This doesn't happen now. When I use the above command, about 40 modules are included. None of the ones I need are in this list.  Is my human memory the problem or am I doing something wrong?</p>\n"}, {"tags": ["python", "xml", "lxml", "openxml"], "comments": [{"owner": {"reputation": 137436, "user_id": 415448, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/P2vVZ.png?s=128&g=1", "display_name": "Michael Kay", "link": "https://stackoverflow.com/users/415448/michael-kay"}, "edited": false, "score": 1, "creation_date": 1527725481, "post_id": 50613755, "comment_id": 88239713, "body": "That&#39;s not funky XML: it&#39;s not any kind of XML. Where does it come from? No XML-based tools are going to be able to handle this."}, {"owner": {"reputation": 88945, "user_id": 290085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306077a2fb7af6587f470214a1b337ff?s=128&d=identicon&r=PG", "display_name": "kjhughes", "link": "https://stackoverflow.com/users/290085/kjhughes"}, "edited": false, "score": 0, "creation_date": 1527729101, "post_id": 50613755, "comment_id": 88240520, "body": "Remove <code>Content</code> or change it to <code>Content=&quot;&quot;</code> to make that XML well-formed.  (You&#39;ll have to remove it to make it valid OOXML.)  See duplicate link for further advice on parsing markup that resembles XML (but isn&#39;t)."}, {"owner": {"reputation": 465, "user_id": 9872841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07aeef46cbf6242c14920b49279e3996?s=128&d=identicon&r=PG&f=1", "display_name": "Hysii", "link": "https://stackoverflow.com/users/9872841/hysii"}, "reply_to_user": {"reputation": 137436, "user_id": 415448, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/P2vVZ.png?s=128&g=1", "display_name": "Michael Kay", "link": "https://stackoverflow.com/users/415448/michael-kay"}, "edited": false, "score": 0, "creation_date": 1527771365, "post_id": 50613755, "comment_id": 88259622, "body": "@MichaelKay It comes from the xml in a Microsoft Word document"}, {"owner": {"reputation": 465, "user_id": 9872841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07aeef46cbf6242c14920b49279e3996?s=128&d=identicon&r=PG&f=1", "display_name": "Hysii", "link": "https://stackoverflow.com/users/9872841/hysii"}, "edited": false, "score": 0, "creation_date": 1527773351, "post_id": 50613755, "comment_id": 88260962, "body": "My plan is automation, so i can not manually change the tag everytime. The link however, helps solves my problem with the xmlstarlet cmd utility. Thanks :)"}], "owner": {"reputation": 465, "user_id": 9872841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07aeef46cbf6242c14920b49279e3996?s=128&d=identicon&r=PG&f=1", "display_name": "Hysii", "link": "https://stackoverflow.com/users/9872841/hysii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "closed_date": 1527728964, "answer_count": 0, "score": 1, "last_activity_date": 1527716675, "creation_date": 1527716675, "question_id": 50613755, "link": "https://stackoverflow.com/questions/50613755/funky-xml-tag-parse", "closed_reason": "Duplicate", "title": "Funky XML tag parse", "body": "<p>I am trying to parse open office XML. I am doing fine parsing with lxml in Python, but data i need to grab is located within a tag who's structure looks a bit funky to me.</p>\n\n<pre><code>&lt;w:sdt Content&gt; Dataaaaa &lt;/w:sdt&gt;\n</code></pre>\n\n<p>Normally this would be fine, as there are many sdt tags. But the \"Content\" part is throwing me off. This code:</p>\n\n<pre><code>for element in tree.iter('{http://schemas.openxmlformats.org/wordprocessingml/2006/main}sdt'):\n    print(element.tag, element.attrib)\n</code></pre>\n\n<p>returns the below for multiple tags, so i don't know which is which:</p>\n\n<pre><code>{http://schemas.openxmlformats.org/wordprocessingml/2006/main}sdt {}\n</code></pre>\n\n<p>Also, don't worry about the namespacing, as i have this figured out. I am specifically just trying to access the tag above and the data within. :) </p>\n"}, {"tags": ["python", "configuration", "pickle"], "comments": [{"owner": {"reputation": 2872, "user_id": 6805091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6abbb6c8d37d0e91ad6265d68a55bf?s=128&d=identicon&r=PG&f=1", "display_name": "Bubble Bubble Bubble Gut", "link": "https://stackoverflow.com/users/6805091/bubble-bubble-bubble-gut"}, "edited": false, "score": 0, "creation_date": 1527716485, "post_id": 50613665, "comment_id": 88237326, "body": "Try importing <code>Config</code> into the file where your are trying to unpickle it."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1527716647, "post_id": 50613665, "comment_id": 88237377, "body": "I don&#39;t understand what you&#39;re asking here. Is your goal= to switch from Pickle to some kind of JSON-based storage, or is that just something you&#39;re trying to do to get around the problem that your class isn&#39;t pickleable out of the box? If you actually did want to use pickle, have you skimmed <a href=\"https://docs.python.org/3/library/pickle.html#pickling-class-instances\" rel=\"nofollow noreferrer\">Pickling Class Instances</a> in the docs? Or tried just dropping in <a href=\"https://pypi.org/project/dill/\" rel=\"nofollow noreferrer\"><code>dill</code></a> in place of <code>pickle</code> to see if that works?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1527716784, "post_id": 50613665, "comment_id": 88237423, "body": "Anyway, <code>cfg.__dict__</code> doesn&#39;t include attributes from the class(es). The <code>dir</code> function, or various functions in <code>inspect</code>, can get them. But then you need to filter out all kinds of things like methods and special attributes like <code>__module__</code> and so on, and\u2026 that&#39;s all doable if you understand the guts of Python classes well enough to come up with and then implement a suitable rule, but not usually a path worth going down for serialization."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1527716881, "post_id": 50613665, "comment_id": 88237459, "body": "And really, you shouldn&#39;t <i>need</i> to store those attributes. When you unpickle the instance later, that creates a new <code>Config</code> instance, which is missing the same instance attributes, and therefore inherits the class attributes in the same way as the original, so it all just works\u2014unless you&#39;re doing something uncommon and complicated, in which case you probably need to explain what that something is."}, {"owner": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "edited": false, "score": 0, "creation_date": 1527716902, "post_id": 50613665, "comment_id": 88237470, "body": "Do you want to convert a <i>class</i> to a dictionary, or an <i>object</i>?"}, {"owner": {"reputation": 1878, "user_id": 3251207, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/fFPz4.png?s=128&g=1", "display_name": "YW P Kwon", "link": "https://stackoverflow.com/users/3251207/yw-p-kwon"}, "edited": false, "score": 0, "creation_date": 1527731540, "post_id": 50613665, "comment_id": 88240965, "body": "Thanks for answers and advice! Actually, I was going to ask &#39;what is the better data structure for configuration` but I was worried the title is too vague. So I tried asking with my practical use case. I definitely agree that storing attributes may be not a good idea. Thankfully, @evertheylen&#39;s answer perfectly fits me."}], "answers": [{"comments": [{"owner": {"reputation": 1878, "user_id": 3251207, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/fFPz4.png?s=128&g=1", "display_name": "YW P Kwon", "link": "https://stackoverflow.com/users/3251207/yw-p-kwon"}, "edited": false, "score": 0, "creation_date": 1527741052, "post_id": 50613966, "comment_id": 88243115, "body": "Great!! Thanks. It looks so good. One question! When I tried <code>config.copy()</code>, an error returns: <code>__class__ assignment only supported for heap types or ModuleType subclasses</code>. How can I deal with this?"}], "tags": [], "owner": {"reputation": 862, "user_id": 2678118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8c9089c857968dac40943476ff8cbf7?s=128&d=identicon&r=PG", "display_name": "Evert Heylen", "link": "https://stackoverflow.com/users/2678118/evert-heylen"}, "is_accepted": true, "score": 3, "last_activity_date": 1527794725, "last_edit_date": 1527794725, "creation_date": 1527717903, "answer_id": 50613966, "question_id": 50613665, "link": "https://stackoverflow.com/questions/50613665/when-using-python-classes-as-program-configuration-structures-which-includes-in/50613966#50613966", "title": "When using Python classes as program configuration structures (which includes inherited class attributes), a good way to save/restore?", "body": "<p>The question's title is \"how to convert python class to dict\", but I suspect you are really just looking for an easy way to represent (hyper)parameters.</p>\n\n<p>By far the easiest solution is to not use classes for this. I've seen it happen on some machine learning tutorials, but I consider it a pretty ugly hack. It breaks some semantics about classes vs objects, and the difficulty pickling is a result from that. How about you use a simple class like this one:</p>\n\n<pre><code>class Params(dict):\n    __getattr__ = dict.__getitem__\n    __setattr__ = dict.__setitem__\n    __delattr__ = dict.__delitem__\n\n    def __getstate__(self):\n        return self\n\n    def __setstate__(self, state):\n        self.update(state)\n\n    def copy(self, **extra_params):\n        return Params(**self, **extra_params)\n</code></pre>\n\n<p>It can do everything the class approach can. Predefined configs are then just objects you should copy before editing, as follows:</p>\n\n<pre><code>config = Params(\n    GPU_COUNT = 2,\n    NAME='2',\n)\nother_config = config.copy()\nother_config.GPU_COUNT = 4\n</code></pre>\n\n<p>Or alternatively in one step:</p>\n\n<pre><code>other_config = config.copy(\n    GPU_COUNT = 4\n)\n</code></pre>\n\n<p>Works fine with pickle (although you <em>will</em> need to have the <code>Params</code> class somewhere in your source), and you could also easily write <code>load</code> and <code>save</code> methods for the <code>Params</code> class if you want to use JSON.</p>\n\n<p>In short, do not use a class for something that really is just an object.</p>\n"}, {"comments": [{"owner": {"reputation": 862, "user_id": 2678118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8c9089c857968dac40943476ff8cbf7?s=128&d=identicon&r=PG", "display_name": "Evert Heylen", "link": "https://stackoverflow.com/users/2678118/evert-heylen"}, "edited": false, "score": 1, "creation_date": 1527794703, "post_id": 50630841, "comment_id": 88272824, "body": "Good that it works for you :) I was about to do something similar: <code>def copy(self, **extra_params): return Params(**self, **extra_params)</code>"}], "tags": [], "owner": {"reputation": 1878, "user_id": 3251207, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/fFPz4.png?s=128&g=1", "display_name": "YW P Kwon", "link": "https://stackoverflow.com/users/3251207/yw-p-kwon"}, "is_accepted": false, "score": 0, "last_activity_date": 1527792254, "creation_date": 1527792254, "answer_id": 50630841, "question_id": 50613665, "link": "https://stackoverflow.com/questions/50613665/when-using-python-classes-as-program-configuration-structures-which-includes-in/50630841#50630841", "title": "When using Python classes as program configuration structures (which includes inherited class attributes), a good way to save/restore?", "body": "<p>Thankfully, @evertheylen's answer was great to me. However, the code returns error when <code>p.__class__ = Params</code>, so I slightly changed as below. I think it works in the same way.</p>\n\n<pre><code>class Params(dict):\n    __getattr__ = dict.__getitem__\n    __setattr__ = dict.__setitem__\n    __delattr__ = dict.__delitem__\n\n    def __getstate__(self):\n        return self\n\n    def __setstate__(self, state):\n        self.update(state)\n\n    def copy(self, **extra_params):\n        lhs = Params()\n        lhs.update(self)\n        lhs.update(extra_params)\n        return lhs\n</code></pre>\n\n<p>and you can do </p>\n\n<pre><code>config = Params(\n    GPU_COUNT = 2,\n    NAME='2',\n)\nother_config = config.copy()\nother_config.GPU_COUNT = 4\n</code></pre>\n"}], "owner": {"reputation": 1878, "user_id": 3251207, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/fFPz4.png?s=128&g=1", "display_name": "YW P Kwon", "link": "https://stackoverflow.com/users/3251207/yw-p-kwon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 723, "favorite_count": 1, "accepted_answer_id": 50613966, "answer_count": 2, "score": 1, "last_activity_date": 1527794725, "creation_date": 1527716078, "last_edit_date": 1527740527, "question_id": 50613665, "link": "https://stackoverflow.com/questions/50613665/when-using-python-classes-as-program-configuration-structures-which-includes-in", "title": "When using Python classes as program configuration structures (which includes inherited class attributes), a good way to save/restore?", "body": "<p>Let's say I have a (simplified) class as below. I am using it for a program configuration (hyperparameters).</p>\n\n<pre><code># config.py\nclass Config(object):      # default configuration\n    GPU_COUNT = 1\n    IMAGES_PER_GPU = 2\n    MAP = {1:2, 2:3}\n\n    def display(self):\n        pass\n\n# experiment1.py\nfrom config import Config as Default\nclass Config(Default):     # some over-written configuration\n    GPU_COUNT = 2\n    NAME='2'            \n\n# run.py\nfrom experiment1 import Config\ncfg = Config()\n...\ncfg.NAME = 'ABC'            # possible runtime over-writing\n\n# Now I would like to save `cfg` at this moment\n</code></pre>\n\n<p>I'd like to save this configuration and restore later. The member functions must be out of concern when restoring.</p>\n\n<p><strong>1. When I tried pickle:</strong></p>\n\n<pre><code>import pickle\nwith open('cfg.pk', 'rb') as f: cfg = pickle.load(f)\n\n##--&gt; AttributeError: Can't get attribute 'Config' on &lt;module '__main__'&gt;\n</code></pre>\n\n<p>I saw a solution using <code>class_def</code> of <code>Config</code>, but I wish I can restore the configuration without knowing the class definition (eg, export to dict and save as JSON)</p>\n\n<p><strong>2. I tried to convert class to dict</strong> (so that I can export as JSON)</p>\n\n<pre><code>cfg.__dict__     # {'NAME': 'ABC'}\nvars(cfg)        # {'NAME': 'ABC'} \n</code></pre>\n\n<p>In both cases, it was difficult to access attributes. Is it possible?</p>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 1, "creation_date": 1527716234, "post_id": 50613664, "comment_id": 88237234, "body": "What you&#39;re missing isn&#39;t the behavior of lists, but the behavior of variables and values in general. When you do <code>lijst = temp</code>, that just makes <code>lijst</code> into another name for the same value that <code>temp</code> is a name for. So, since they&#39;re both naming the same value, changing that value under one name is obviously changing the same value under a different name. If you want to make a copy in Python, you have to explicitly make a copy (although you can do it a lot more simply with <code>temp[:]</code> or <code>list(temp)</code> instead of <code>[a for a in temp]</code>)."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1527716476, "post_id": 50613664, "comment_id": 88237324, "body": "Also see <a href=\"https://nedbatchelder.com/text/names.html\" rel=\"nofollow noreferrer\">this blog post</a> by Ned Batchelder. (The presentation linked at the top is probably even better, but I haven&#39;t viewed it myself\u2026)"}, {"owner": {"reputation": 1, "user_id": 9872780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vf8us.gif?s=128&g=1", "display_name": "tmfrk", "link": "https://stackoverflow.com/users/9872780/tmfrk"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1527718067, "post_id": 50613664, "comment_id": 88237826, "body": "Thank you for your elaborate response! Will watch the presentation, great link."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1527718348, "post_id": 50613664, "comment_id": 88237907, "body": "While you&#39;re at it, bookmark <a href=\"https://nedbatchelder.com/blog/tag/python.html\" rel=\"nofollow noreferrer\">the blog index</a> and skim it when you have time later; this definitely isn&#39;t the only case where he manages to take something confusing and make it obvious, while our official SO answer is only so-so\u2026"}], "owner": {"reputation": 1, "user_id": 9872780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vf8us.gif?s=128&g=1", "display_name": "tmfrk", "link": "https://stackoverflow.com/users/9872780/tmfrk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "closed_date": 1527716284, "answer_count": 0, "score": 0, "last_activity_date": 1527716321, "creation_date": 1527716076, "question_id": 50613664, "link": "https://stackoverflow.com/questions/50613664/assigning-two-lists-as-each-others-equals", "closed_reason": "Duplicate", "title": "Assigning two lists as each others equals", "body": "<p>I was just trying to write a code in Python for Euler Problem 15 (<a href=\"https://projecteuler.net/problem=15\" rel=\"nofollow noreferrer\">https://projecteuler.net/problem=15</a>), concerning Lattice Paths. </p>\n\n<p>I wanted to write something which would return (1,2,1), (1, 3, 3, 1), (1, 4, 6, 4, 1) etc. I wrote the following:</p>\n\n<pre><code>lijst = [1,1]\ntemp = [1,1]\nfor a in range(2,21):\n    temp.append(1)\n        for b in range(1,a):\n        temp[b] = lijst[b-1] + lijst[b]\n    lijst = temp\n    print a, lijst\n</code></pre>\n\n<p>To my surprise, this didn't work. At the start of the second 'for'-loop, somehow the append doesn't only work on 'temp', but also on 'lijst'. I got the code working by changing:</p>\n\n<pre><code>lijst = temp\n</code></pre>\n\n<p>into:</p>\n\n<pre><code>lijst = [a for a in temp]\n</code></pre>\n\n<p>What's the problem hear? Am I missing something out on the behaviour of lists?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "numpy", "matplotlib"], "comments": [{"owner": {"reputation": 7907, "user_id": 9609447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9FDax.jpg?s=128&g=1", "display_name": "harvpan", "link": "https://stackoverflow.com/users/9609447/harvpan"}, "edited": false, "score": 0, "creation_date": 1527715658, "post_id": 50613528, "comment_id": 88237025, "body": "How do you want to plot it? What should be your x-axis and y-axis?"}, {"owner": {"reputation": 10425, "user_id": 2142055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Stop harming Monica", "link": "https://stackoverflow.com/users/2142055/stop-harming-monica"}, "edited": false, "score": 0, "creation_date": 1527716645, "post_id": 50613528, "comment_id": 88237376, "body": "What is not right about the histogram? Looks correct to me. I don&#39;t understand what it has to do with pmf&#39;s though."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7886633"}, "reply_to_user": {"reputation": 7907, "user_id": 9609447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9FDax.jpg?s=128&g=1", "display_name": "harvpan", "link": "https://stackoverflow.com/users/9609447/harvpan"}, "edited": false, "score": 0, "creation_date": 1527716936, "post_id": 50613528, "comment_id": 88237486, "body": "@HarvIpan the x-values are the values on the left, y-values on the right."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7886633"}, "reply_to_user": {"reputation": 10425, "user_id": 2142055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Stop harming Monica", "link": "https://stackoverflow.com/users/2142055/stop-harming-monica"}, "edited": false, "score": 0, "creation_date": 1527716940, "post_id": 50613528, "comment_id": 88237488, "body": "@Goyo this is a PMF, all values should add up to one"}, {"owner": {"reputation": 7907, "user_id": 9609447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9FDax.jpg?s=128&g=1", "display_name": "harvpan", "link": "https://stackoverflow.com/users/9609447/harvpan"}, "edited": false, "score": 0, "creation_date": 1527717330, "post_id": 50613528, "comment_id": 88237613, "body": "The code that you have provided, does not produce the array that you have printed."}, {"owner": {"reputation": 10425, "user_id": 2142055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Stop harming Monica", "link": "https://stackoverflow.com/users/2142055/stop-harming-monica"}, "edited": false, "score": 0, "creation_date": 1527717583, "post_id": 50613528, "comment_id": 88237696, "body": "@John I do not understand what the histogram has to do with it. The histogram is correct, isn&#39;t it?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7886633"}, "reply_to_user": {"reputation": 10425, "user_id": 2142055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Stop harming Monica", "link": "https://stackoverflow.com/users/2142055/stop-harming-monica"}, "edited": false, "score": 0, "creation_date": 1527723442, "post_id": 50613528, "comment_id": 88239216, "body": "@Goyo the y-values in the histogram are not correct, plus that orange bar is extra. I&#39;ve updated the value on my question above."}], "answers": [{"tags": [], "owner": {"reputation": 303, "user_id": 4638182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc6af5c571e3f84c45e4553ee7a92d46?s=128&d=identicon&r=PG&f=1", "display_name": "Logstar", "link": "https://stackoverflow.com/users/4638182/logstar"}, "is_accepted": false, "score": 0, "last_activity_date": 1527746547, "creation_date": 1527746547, "answer_id": 50617634, "question_id": 50613528, "link": "https://stackoverflow.com/questions/50613528/matplotlib-plot-pmf-from-list-of-2d-numpy-arrays/50617634#50617634", "title": "Matplotlib plot pmf from list of 2D numpy arrays", "body": "<p>Does the following graph look right?</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\n\nX = np.array([[0.00000000e+00, 1.91734780e-01],\n              [1.00000000e+00, 2.94277080e-02],\n              [2.00000000e+00, 3.28276369e-01],\n              [3.00000000e+00, 4.43357154e-01],\n              [4.00000000e+00, 3.54294582e-03],\n              [5.00000000e+00, 1.57306794e-03],\n              [6.00000000e+00, 2.00530733e-03],\n              [7.00000000e+00, 2.95245485e-05],\n              [8.00000000e+00, 2.24386568e-05],\n              [9.00000000e+00, 2.83435665e-05],\n              [1.00000000e+01, 1.18098194e-06],\n              [1.20000000e+01, 1.18098194e-06],])\n\nplt.bar(x=X[:, 0], height=X[:, 1])\nplt.show()\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/guu3x.png\" alt=\"\"></p>\n\n<p>If you already have the first column as the possible values of the random variable, and the second column as the corresponding probability values, you could use a bar plot to visualize the PMF.</p>\n\n<p>The histogram plot function <code>plt.hist</code> is for a vector of observed values. For example,</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\n\n%matplotlib inline\n\nnp.random.seed(0)\nplt.hist(np.random.normal(size=1000))\nplt.show()\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/NYPD5.png\" alt=\"\"></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7886633"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 509, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527746547, "creation_date": 1527715379, "last_edit_date": 1527723373, "question_id": 50613528, "link": "https://stackoverflow.com/questions/50613528/matplotlib-plot-pmf-from-list-of-2d-numpy-arrays", "title": "Matplotlib plot pmf from list of 2D numpy arrays", "body": "<p>I have a dataset from my simulations where I combine the results from each simulation seed into a bigger list using <code>bl.extend(df['column'].tolist())</code>. </p>\n\n<p>I'm also running several simulation scenarios, so I append each scenario to a list of lists.</p>\n\n<p>Finally, I'm computing the Probability Mass Function (PMF) of each list as follows (from <a href=\"https://stackoverflow.com/questions/25273415/how-to-plot-a-pmf-of-a-sample\">How to plot a PMF of a sample?</a>)</p>\n\n<pre><code>for idx,sublist in enumerate(pmf_list):\n        val, cnt = np.unique(sublist, return_counts=True)\n        pmf = cnt / float(len(sublist))\n        plot_pmf.append(np.column_stack((val, pmf)))\n</code></pre>\n\n<p>The issue is that I end up with a list of numpy arrays which I don't know how to plot. The minimum code to reproduce the problem is the following:</p>\n\n<pre><code>import numpy as np\n\nlist1 = np.empty([2, 2])\nlist2 = np.empty([2, 2])\nlist3 = np.empty([2, 2])\nbl = [] # big list\nbl.append(list1)\nbl.append(list2)\nbl.append(list3)\nprint bl\n</code></pre>\n\n<p>I can plot using plt.hist(bl[0]) but it doesn't give me the right results. See plot attached for the following list.</p>\n\n<pre><code>&lt;type 'numpy.ndarray'&gt;\n[[0.00000000e+00 1.91734780e-01]\n [1.00000000e+00 2.94277080e-02]\n [2.00000000e+00 3.28276369e-01]\n [3.00000000e+00 4.43357154e-01]\n [4.00000000e+00 3.54294582e-03]\n [5.00000000e+00 1.57306794e-03]\n [6.00000000e+00 2.00530733e-03]\n [7.00000000e+00 2.95245485e-05]\n [8.00000000e+00 2.24386568e-05]\n [9.00000000e+00 2.83435665e-05]\n [1.00000000e+01 1.18098194e-06]\n [1.20000000e+01 1.18098194e-06]]\n</code></pre>\n\n<hr>\n\n<p>Formatting the y-values I get:</p>\n\n<pre><code>0.1944084241\n0.0415880165\n0.3480178394\n0.4031723062\n0.0050902199\n0.0033411939\n0.0040175705\n0.0001480127\n0.0001031961\n0.0001008373\n0.0000058969\n0.0000011794\n0.0000047175\n0.0000005897\n</code></pre>\n\n<p>very different from the y-values on the histogram plot</p>\n\n<p><a href=\"https://i.stack.imgur.com/FRy4Q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FRy4Q.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "tkinter", "sqlite"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 2, "creation_date": 1527715020, "post_id": 50613392, "comment_id": 88236796, "body": "You don&#39;t seem to be making any queries. You just do an insert."}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 2764891, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ad44e348282f7ac56cf13dfc2e3cc747?s=128&d=identicon&r=PG&f=1", "display_name": "Formula 1", "link": "https://stackoverflow.com/users/2764891/formula-1"}, "edited": false, "score": 0, "creation_date": 1527786997, "post_id": 50613716, "comment_id": 88269082, "body": "Thank you for your advise."}], "tags": [], "owner": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "is_accepted": false, "score": 0, "last_activity_date": 1527716385, "creation_date": 1527716385, "answer_id": 50613716, "question_id": 50613392, "link": "https://stackoverflow.com/questions/50613392/how-to-print-the-results-of-a-sqlite-query-in-python/50613716#50613716", "title": "How to print the results of a SQLite query in python?", "body": "<p>Fetchone will only produce something if it follows a query.  After the INSERT, add</p>\n\n<pre><code>cur.execute(\"SELECT * FROM jetfighter\")\nprint(cur.fetchone())\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 143, "user_id": 2764891, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ad44e348282f7ac56cf13dfc2e3cc747?s=128&d=identicon&r=PG&f=1", "display_name": "Formula 1", "link": "https://stackoverflow.com/users/2764891/formula-1"}, "edited": false, "score": 0, "creation_date": 1527786983, "post_id": 50613885, "comment_id": 88269076, "body": "Thank you for your advise."}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": false, "score": 2, "last_activity_date": 1527717970, "last_edit_date": 1527717970, "creation_date": 1527717359, "answer_id": 50613885, "question_id": 50613392, "link": "https://stackoverflow.com/questions/50613392/how-to-print-the-results-of-a-sqlite-query-in-python/50613885#50613885", "title": "How to print the results of a SQLite query in python?", "body": "<p>Only <code>SELECT</code> queries have row sets.<sup>1</sup> So, if you want to see the row you just inserted, you need to <code>SELECT</code> that row.</p>\n\n<p>One way to select exactly the row you just inserted is by using the <code>rowid</code> pseudo-column. This column has unique values that are automatically generated by the database, and every <code>INSERT</code> statement updates a <a href=\"https://docs.python.org/3/library/sqlite3.html#sqlite3.Cursor.lastrowid\" rel=\"nofollow noreferrer\"><code>lastrowid</code></a> property on the cursor. So:</p>\n\n<pre><code>cur.execute(\"INSERT INTO jetfighter VALUES (?)\", (self.var.get(),))\ncur.execute(\"SELECT * FROM jetfighter WHERE rowid=?\", (cur.lastrowid,))\nprint(cur.fetchone())\n</code></pre>\n\n<p>This will print out something like:</p>\n\n<pre><code>('Starfighter F-104G',)\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 2764891, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ad44e348282f7ac56cf13dfc2e3cc747?s=128&d=identicon&r=PG&f=1", "display_name": "Formula 1", "link": "https://stackoverflow.com/users/2764891/formula-1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6285, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1527717970, "creation_date": 1527714620, "question_id": 50613392, "link": "https://stackoverflow.com/questions/50613392/how-to-print-the-results-of-a-sqlite-query-in-python", "title": "How to print the results of a SQLite query in python?", "body": "<p>I'm trying to print the results of this SQLite query to check whether it has stored the data within the database. At the moment it just prints None. Is there a way to open the database in a program like Microsoft Word or LibreOffice. Just to see whether it has saved the content into the database. </p>\n\n<pre><code>import tkinter as tk\nimport sqlite3 as lite\nimport sys\n\n\nclass GUI(tk.Frame):\n    def __init__(self, master=None, **kwargs):\n        tk.Frame.__init__(self, master, **kwargs)\n\n    self.var = tk.StringVar()\n    entry = tk.Entry(self, textvariable=self.var)\n    entry.pack()\n\n    btn = tk.Button(self, text='read', command=self.read_entry)\n    btn.pack()\n\n    btn = tk.Button(self, text='write', command=self.write_entry)\n    btn.pack()\n\ndef read_entry(self):\n    #print(self.var.get())\n\ndef write_entry(self):\n    self.var.set(self.var.get())\n    con = lite.connect('RandomThings.db')\n    cur = con.cursor()\n    cur.execute(\"CREATE TABLE jetfighter(Name TEXT)\")\n    cur.execute(\"INSERT INTO jetfighter VALUES (?)\", (self.var.get(),))\n    #con.commit()\n    print (cur.fetchone())\n    cur.close()\n\ndef main():\n    root = tk.Tk()\n    root.geometry('200x200')\n    win = GUI(root)\n    win.pack()\n    root.mainloop()\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>Thank you for helping me with my problem.</p>\n"}, {"tags": ["python", "python-2.7", "selenium", "selenium-webdriver"], "comments": [{"owner": {"reputation": 183, "user_id": 6317020, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh4.googleusercontent.com/-Z8aCfSFeyrY/AAAAAAAAAAI/AAAAAAAAC3s/PJ25l9b83jw/photo.jpg?sz=128", "display_name": "Jake Steele", "link": "https://stackoverflow.com/users/6317020/jake-steele"}, "edited": false, "score": 0, "creation_date": 1527714806, "post_id": 50613391, "comment_id": 88236705, "body": "What have you tried? Can you post your code?"}, {"owner": {"reputation": 181, "user_id": 7577248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4472cccc27818774fc7b0c9f181f625?s=128&d=identicon&r=PG&f=1", "display_name": "Sam McC", "link": "https://stackoverflow.com/users/7577248/sam-mcc"}, "reply_to_user": {"reputation": 183, "user_id": 6317020, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh4.googleusercontent.com/-Z8aCfSFeyrY/AAAAAAAAAAI/AAAAAAAAC3s/PJ25l9b83jw/photo.jpg?sz=128", "display_name": "Jake Steele", "link": "https://stackoverflow.com/users/6317020/jake-steele"}, "edited": false, "score": 0, "creation_date": 1527715123, "post_id": 50613391, "comment_id": 88236830, "body": "@JakeSteele I&#39;ve been researching for a couple of hours and haven&#39;t been able to find any good leads, so I haven&#39;t had anything to try yet. It seems like it&#39;s possible in Java versions of Selenium and with other JS tools, but I need to do it in Python. So even if you just have some suggestions on the general direction that I should look that would be great!"}, {"owner": {"reputation": 5041, "user_id": 7305183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/109a1b8acbf5d01c41e8e725b08411ba?s=128&d=identicon&r=PG&f=1", "display_name": "Murthi", "link": "https://stackoverflow.com/users/7305183/murthi"}, "edited": false, "score": 0, "creation_date": 1527744682, "post_id": 50613391, "comment_id": 88244240, "body": "You can try with browser mob proxy to capture outgoing or incoming requests."}], "owner": {"reputation": 181, "user_id": 7577248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4472cccc27818774fc7b0c9f181f625?s=128&d=identicon&r=PG&f=1", "display_name": "Sam McC", "link": "https://stackoverflow.com/users/7577248/sam-mcc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 279, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1527714612, "creation_date": 1527714612, "question_id": 50613391, "link": "https://stackoverflow.com/questions/50613391/how-to-get-ajax-url-with-selenium-python", "title": "How to get AJAX URL with Selenium (Python)?", "body": "<p>Is there a way to get the outgoing AJAX request URL using Selenium? For example, when I click a button, it generates a AJAX request to get some data. How can I use Python to determine that GET request URL?</p>\n"}, {"tags": ["python", "pandas", "outlook"], "answers": [{"comments": [{"owner": {"reputation": 23880, "user_id": 1287812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vw1Wj.jpg?s=128&g=1", "display_name": "brasofilo", "link": "https://stackoverflow.com/users/1287812/brasofilo"}, "edited": false, "score": 0, "creation_date": 1540499826, "post_id": 52997408, "comment_id": 92900214, "body": "Your answer seems to have enough info to be a proper answer. Please check the guide <a href=\"https://stackoverflow.com/questions/how-to-answer\">How to Answer</a> when in doubt"}], "tags": [], "owner": {"reputation": 36, "user_id": 6505251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d645483da2b43cd8708bd1e9db3346d?s=128&d=identicon&r=PG&f=1", "display_name": "Chock Griebel", "link": "https://stackoverflow.com/users/6505251/chock-griebel"}, "is_accepted": true, "score": 1, "last_activity_date": 1540499738, "last_edit_date": 1540499738, "creation_date": 1540498477, "answer_id": 52997408, "question_id": 50613390, "link": "https://stackoverflow.com/questions/50613390/save-win32com-outlook-attachment-directly-to-variable/52997408#52997408", "title": "Save win32com Outlook attachment directly to variable", "body": "<p>I've been trying to find a way to do this as well to no avail. I believe the functions available are limited to what is <a href=\"https://docs.microsoft.com/en-us/office/vba/api/outlook.attachment\" rel=\"nofollow noreferrer\">documented for the Outlook Attachment object type</a>.</p>\n\n<p>Unfortunately, it appears that the only option is SaveAsFile</p>\n"}], "owner": {"reputation": 403, "user_id": 7692763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p00vG.jpg?s=128&g=1", "display_name": "shmicah", "link": "https://stackoverflow.com/users/7692763/shmicah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1548, "favorite_count": 1, "accepted_answer_id": 52997408, "answer_count": 1, "score": 4, "last_activity_date": 1540499738, "creation_date": 1527714612, "last_edit_date": 1527777177, "question_id": 50613390, "link": "https://stackoverflow.com/questions/50613390/save-win32com-outlook-attachment-directly-to-variable", "title": "Save win32com Outlook attachment directly to variable", "body": "<p>Fairly new to Python (using 3.6) and am wondering if it is possible to save an Outlook email attachment (csv file) directly to a pandas dataframe. I'm trying to avoid an interim step of saving to file, then using pandas.read_csv to bring the file contents into Python environment.</p>\n\n<p>I'm curious if something like the \"open attachment\" feature in Outlook can be used to open and assign to variable.</p>\n\n<p>What I have so far (which works)...</p>\n\n<pre><code>import pandas\nimport win32com.client as win32\noutlook = win32.Dispatch('outlook.application')\nmapi=outlook.GetNamespace[\"MAPI\"]\ndatafldr=mapi.Folders['Main'].Folders['Inbox'].Folders['Data']\nmessages=datafldr.Items\nnum_msgs=messages.count\ncurr_email=messages[num_msgs-1]\nattachments=curr_email.Attachments\ncurr_att=attachments.Item(1)\n</code></pre>\n\n<p>Is it possible to take the \"curr_att\" win32 object(?) directly to a pandas dataframe?</p>\n\n<p>Or do I have to continue with...</p>\n\n<pre><code>curr_att.SaveAsFile('enterpathhere\\datafile.csv')\nmydata=pandas.read_csv('enterpathhere\\datafile.csv')\n</code></pre>\n\n<p>Many thanks!</p>\n"}, {"tags": ["python", "python-3.x", "shell", "terminal", "stdout"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1527714586, "post_id": 50613383, "comment_id": 88236629, "body": "Well there are two things here: (a) you write a new line &#39;\\n&#39;` yourself, and (b) you do not return to overwrite."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 1, "creation_date": 1527714810, "post_id": 50613383, "comment_id": 88236706, "body": "To overwrite, you probably wanted <code>end=&quot;\\r&quot;</code>, not <code>end=&quot; &quot;</code>. (And of course you have to not end the actual string with <code>\\n</code>.)"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 1, "creation_date": 1527714885, "post_id": 50613383, "comment_id": 88236740, "body": "It&#39;s also worth noting that, even if you fix that, it won&#39;t overwrite smoothly unless every output line is the same length. For example, try <code>print(&#39;abcde\\r&#39;) then </code>print(&#39;aaa\\r&#39;)<code>\u2014you&#39;ll see </code>aaade<code>, not </code>aaa`."}, {"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 1, "creation_date": 1527715578, "post_id": 50613383, "comment_id": 88236995, "body": "<code>str.ljust()</code> is handy for making sure you overwrite the whole line."}, {"owner": {"reputation": 352, "user_id": 9446757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wIMEr.jpg?s=128&g=1", "display_name": "sun0727", "link": "https://stackoverflow.com/users/9446757/sun0727"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1527717049, "post_id": 50613383, "comment_id": 88237518, "body": "@abarnert  I have seen what you said..  Are there anyway to solve this?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1527718055, "post_id": 50613383, "comment_id": 88237824, "body": "You have all you need in the comments above: get rid of the <code>\\n</code> as Willem Van Onsem explained, use <code>\\r</code> instead of space as I explained, and look into the <code>ljust</code> method as <code>kindall</code> explained. What are you having trouble with?"}, {"owner": {"reputation": 352, "user_id": 9446757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wIMEr.jpg?s=128&g=1", "display_name": "sun0727", "link": "https://stackoverflow.com/users/9446757/sun0727"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1527720364, "post_id": 50613383, "comment_id": 88238452, "body": "@abarnert I have updated my code  and trouble... Thanks for your help. I am noob in python .."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 2, "creation_date": 1527720535, "post_id": 50613383, "comment_id": 88238491, "body": "Your new question is asking for something impossible. There&#39;s no way to print two lines and then overwrite both of them. If you want to get fancier, you <i>can</i> do the equivalent of that by outputting console escape sequences, or by using a library that does that for you, or by going all-out and using the <code>curses</code> library (on *nix) or a third-party <code>conio</code> library (on Windows) to take over the whole terminal display\u2026 but that isn&#39;t as simple as what you were trying to do, and it may not be appropriate depending on your intended use case."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1527720610, "post_id": 50613383, "comment_id": 88238503, "body": "Meanwhile, even for a single line, there are two problems with your code: (1) you need to call <code>ljust</code> on the string you get back from formatting in the value, not from the format string, and (2) you need to call <code>ljust</code> on both halves of the line, not just the first half, or you end up with the same problem you started with."}, {"owner": {"reputation": 1865, "user_id": 6275324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47277d15eafc6cef35b1086c81d2e6ad?s=128&d=identicon&r=PG&f=1", "display_name": "Andrii Maletskyi", "link": "https://stackoverflow.com/users/6275324/andrii-maletskyi"}, "edited": false, "score": 0, "creation_date": 1527720886, "post_id": 50613383, "comment_id": 88238563, "body": "I think escape sequences will be good for it"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 1865, "user_id": 6275324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47277d15eafc6cef35b1086c81d2e6ad?s=128&d=identicon&r=PG&f=1", "display_name": "Andrii Maletskyi", "link": "https://stackoverflow.com/users/6275324/andrii-maletskyi"}, "edited": false, "score": 0, "creation_date": 1527720945, "post_id": 50613383, "comment_id": 88238582, "body": "@AndriyMaletsky If you only want to work on a single terminal type, maybe. But doing it in a way that works on Windows, xterm, vt100, vt52, and oddball terminals you&#39;ve never heard of is not so trivial."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 2, "creation_date": 1527721505, "post_id": 50613383, "comment_id": 88238748, "body": "<a href=\"https://gist.github.com/abarnert/dd68718779ba81b93c31ff8bcbb35153\" rel=\"nofollow noreferrer\">Here&#39;s an example using <code>curses</code></a>. It takes over (and clears) the whole screen, and it doesn&#39;t work on Windows\u2014but, on the other hand, it works on any workable terminal, avoids breaking scrollback and other fancy terminal features, etc."}, {"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1527729938, "post_id": 50613383, "comment_id": 88240669, "body": "@abarnert: Are you specifically meaning in it&#39;s impossible in Python? <a href=\"https://stackoverflow.com/a/43478958/499581\">I&#39;ve done something similar in Bash using nothing more than a little trickery inside a <code>for</code> loop</a>."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 1, "creation_date": 1527730677, "post_id": 50613383, "comment_id": 88240815, "body": "@l&#39;L&#39;l You&#39;re using the <code>tput</code> command. That does exist on macOS and most linux distros, but it was only added to POSIX in 2003, and is optional\u2014and, of course, won&#39;t exist at all on Windows. You can get third-party libraries on PyPI that do the same thing in Python in an even more portable way, but still not for Windows. Or, of course, you can <code>subprocess</code> out to <code>tput</code> and do the exact same thing as your <code>bash</code> script. But, either way, you can&#39;t do it just by printing characters in a portable way, in either bash or python."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 2, "creation_date": 1527731006, "post_id": 50613383, "comment_id": 88240871, "body": "@l&#39;L&#39;l That being said, using <code>tput</code> is much nicer than the usual answer people give of &quot;just stick a <code>\\033[F</code> in your string&quot; (yours checks <code>isatty</code>, does the right thing if <code>$TERM</code> has different termcaps, and of course is a lot more readable). But it&#39;s still not the right answer for someone who hasn&#39;t even told us whether he&#39;s on Windows."}], "owner": {"reputation": 352, "user_id": 9446757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wIMEr.jpg?s=128&g=1", "display_name": "sun0727", "link": "https://stackoverflow.com/users/9446757/sun0727"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1231, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1527754191, "creation_date": 1527714527, "last_edit_date": 1527754191, "question_id": 50613383, "link": "https://stackoverflow.com/questions/50613383/python-3-why-in-my-case-print-end-flush-true-not-working-for-output", "title": "Python 3: Why in my case print (..., end=&quot; &quot;\uff0c flush=True) not working for output-overwriting?", "body": "<p>I tried to update percent on the same line or the same two line by using <code>print</code> , rather than printing over and over again.</p>\n\n<p>I have already found some approaches for flush output on one line\uff0c but no one for multilines.</p>\n\n<p>Below is my code, But they are not working as expected, Could someone help me? </p>\n\n<pre><code># refresh in one line\nfor i in range(10):\n    print(\"Task A complete %d, Task B complete %d \\n\" % (i, i), end=\" \", flush=True)\n\n# refresh in two line\nfor j in range(10):\n    print(\"Task A complete %d \\n\" % j,  end=\" \", flush=True)\n    print(\"Task B complete %d \\n\" % j,  end=\" \", flush=True)\n</code></pre>\n\n<p>Thank you all in advance</p>\n\n<p><strong>Update:</strong> </p>\n\n<p>with code</p>\n\n<pre><code># refresh on one line\nfor i in range(1000000000):\n    print(\"Task A complete %d\" %i, \"Task B complete %d\" %i, end='\\r', flush=True)\n</code></pre>\n\n<p>get output like:</p>\n\n<pre><code>Task A complete 994      Task B complete 993\n</code></pre>\n\n<p>But How can I break this line in two lines like:</p>\n\n<pre><code> Task A complete 994      \n Task B complete 993\n</code></pre>\n"}, {"tags": ["python", "json", "python-3.x", "dictionary"], "answers": [{"tags": [], "owner": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "is_accepted": false, "score": 2, "last_activity_date": 1527716190, "creation_date": 1527716190, "answer_id": 50613682, "question_id": 50613346, "link": "https://stackoverflow.com/questions/50613346/retrieving-an-element-of-each-item-in-an-array/50613682#50613682", "title": "Retrieving an element of each item in an array", "body": "<p>That looks like a valid <a href=\"https://en.wikipedia.org/wiki/JSON\" rel=\"nofollow noreferrer\"><code>JSON</code></a>, so just use the built-in <a href=\"https://docs.python.org/3/library/json.html\" rel=\"nofollow noreferrer\"><code>json</code></a> module to parse it, e.g.:</p>\n\n<pre><code>import json\n\nwith open(\"path/to/your_file.txt\", \"r\") as f:  # open the file for reading\n    data = json.load(f)  # parse it as JSON\n\n# now you can access the data hierarchically, i.e.\nprint(\"The first coin is {} and its symbol is {}\".format(data[0][\"name\"], data[0][\"symbol\"]))\n# The first coin is Bitcoin and its symbol is BTC\n\n# or if you want just a list of all names\ncoin_names = [d[\"name\"] for d in data]  # ['Bitcoin', 'Ethereum', ...] \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 1, "last_activity_date": 1527717926, "creation_date": 1527717926, "answer_id": 50613972, "question_id": 50613346, "link": "https://stackoverflow.com/questions/50613346/retrieving-an-element-of-each-item-in-an-array/50613972#50613972", "title": "Retrieving an element of each item in an array", "body": "<p>If you are comfortable using a 3rd party library, <code>pandas</code> accepts a list of dictionaries directly:</p>\n\n<pre><code>import pandas as pd\nfrom io import StringIO\nimport json\n\nmystr = StringIO(\"\"\"[{\"name\": \"Bitcoin\", \"symbol\": \"BTC\", \"rank\": 1, \n\"slug\": \"bitcoin\", \"tokens\": [\"Bitcoin\", \"bitcoin\", \"BTC\"], \"id\": 1},\n {\"name\": \"Ethereum\", \"symbol\": \"ETH\", \"rank\": 2, \"slug\": \"ethereum\", \n \"tokens\": [\"Ethereum\", \"ethereum\", \"ETH\"], \"id\": 1027}]\"\"\")\n\n# replace mystr with 'file.json'\ndf = pd.read_json(mystr)\n\n# extract names to list\nres = df['name'].tolist()\n\nprint(res)\n\n['Bitcoin', 'Ethereum']\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 9688716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/647d143a09a6949f42ee97e0257784b0?s=128&d=identicon&r=PG&f=1", "display_name": "j.doe", "link": "https://stackoverflow.com/users/9688716/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1527717969, "creation_date": 1527714313, "last_edit_date": 1527717969, "question_id": 50613346, "link": "https://stackoverflow.com/questions/50613346/retrieving-an-element-of-each-item-in-an-array", "title": "Retrieving an element of each item in an array", "body": "<p>This is the content of the textfile I am using:</p>\n\n<pre><code>[{\"name\": \"Bitcoin\", \"symbol\": \"BTC\", \"rank\": 1, \"slug\": \"bitcoin\", \"tokens\": [\"Bitcoin\", \"bitcoin\", \"BTC\"], \"id\": 1},\n {\"name\": \"Ethereum\", \"symbol\": \"ETH\", \"rank\": 2, \"slug\": \"ethereum\", \"tokens\": [\"Ethereum\", \"ethereum\", \"ETH\"], \"id\": 1027}, ... ]\n</code></pre>\n\n<p>How do I retrieve each \"name\" element of each coin and save it into a temporary variable?</p>\n"}, {"tags": ["python", "machine-learning", "cluster-analysis", "pca", "kernel-density"], "answers": [{"tags": [], "owner": {"reputation": 3249, "user_id": 1538049, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/jp5pz.jpg?s=128&g=1", "display_name": "Ufuk Can Bicici", "link": "https://stackoverflow.com/users/1538049/ufuk-can-bicici"}, "is_accepted": false, "score": 0, "last_activity_date": 1527862599, "creation_date": 1527862599, "answer_id": 50645446, "question_id": 50613294, "link": "https://stackoverflow.com/questions/50613294/finding-original-features-effect-to-the-principal-components-used-as-inputs-in/50645446#50645446", "title": "Finding original features&#39; effect to the principal components used as inputs in Kernel PCA", "body": "<p>Since you are applying PCA in the kernel space, there is a strictly nonlinear relation with your original features and the features of the reduced data; the eigenvectors you calculate are in the kernel space to begin with. This obstructs a straightforward approach, but maybe you can do some kind of sensitivity analysis. Apply small perturbations to the original features and measure how the final, reduced features react to them. The Jacobian of the final features with respect to the original features can be also a good place to start.</p>\n"}], "owner": {"reputation": 113, "user_id": 8010873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e599251746683c2ef2e3753f87d0c2f4?s=128&d=identicon&r=PG&f=1", "display_name": "Beg", "link": "https://stackoverflow.com/users/8010873/beg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1527862599, "creation_date": 1527714034, "question_id": 50613294, "link": "https://stackoverflow.com/questions/50613294/finding-original-features-effect-to-the-principal-components-used-as-inputs-in", "title": "Finding original features&#39; effect to the principal components used as inputs in Kernel PCA", "body": "<p>I am trying to implement Kernel PCA to my dataset which has both categorical (encoded with one hot encoder) and numeric features and decreases the number of dimensions from 22 to 3 dimensions in total. After that, I will continue with clustering implementation. I use Spyder as IDE.\nIn order to understand the structure of my yielded clusters from the algorithm, I want to interpret which features affect the derived principal components and how they affect them.\nIs it possible? If so, how can I interpret this, is there any method?</p>\n"}, {"tags": ["python", "dictionary", "graph", "depth-first-search", "defaultdict"], "comments": [{"owner": {"reputation": 15431, "user_id": 3992939, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/JNHZt.jpg?s=128&g=1", "display_name": "c0der", "link": "https://stackoverflow.com/users/3992939/c0der"}, "edited": false, "score": 1, "creation_date": 1527849744, "post_id": 50613281, "comment_id": 88293179, "body": "[dfs] is not the right tag: <b>&quot;DFS is a distributed filesystem from Microsoft. Note: for questions about depth-first search, please use the depth-first-search tag. <i>*NOT to be confused</b> with [depth-first-search]&quot;*</i>"}, {"owner": {"reputation": 1024, "user_id": 7093241, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/4eb62b2878c6b7ef50e772b53e3a4092?s=128&d=identicon&r=PG&f=1", "display_name": "heretoinfinity", "link": "https://stackoverflow.com/users/7093241/heretoinfinity"}, "reply_to_user": {"reputation": 15431, "user_id": 3992939, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/JNHZt.jpg?s=128&g=1", "display_name": "c0der", "link": "https://stackoverflow.com/users/3992939/c0der"}, "edited": false, "score": 0, "creation_date": 1527858367, "post_id": 50613281, "comment_id": 88298523, "body": "I made the change."}], "answers": [{"tags": [], "owner": {"reputation": 1200, "user_id": 2105333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EjpCl.jpg?s=128&g=1", "display_name": "bobrobbob", "link": "https://stackoverflow.com/users/2105333/bobrobbob"}, "is_accepted": true, "score": 1, "last_activity_date": 1527735003, "last_edit_date": 1527735003, "creation_date": 1527725039, "answer_id": 50614901, "question_id": 50613281, "link": "https://stackoverflow.com/questions/50613281/python-graph-dfs-set-defaultdict-error-in-changing-dictionary-size/50614901#50614901", "title": "Python: Graph, DFS, set, defaultdict - error in changing dictionary size", "body": "<p>When you get to the edge of 4 and 5, you go through the neighbors of 5 when the code reaches <code>for neighbor in self.graph[vertex]</code>. The only neighbor of 5 is 4 and you then call the function recursively with 4 as the vertex. In the next call of the <code>DFSHelper</code>,  the defaultdict adds an entry for 4 because it's missing.</p>\n\n<p>Just add your condition <code>if vertex in self.graph</code> before the for-loop to avoid this error.</p>\n"}], "owner": {"reputation": 1024, "user_id": 7093241, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/4eb62b2878c6b7ef50e772b53e3a4092?s=128&d=identicon&r=PG&f=1", "display_name": "heretoinfinity", "link": "https://stackoverflow.com/users/7093241/heretoinfinity"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1126, "favorite_count": 0, "accepted_answer_id": 50614901, "answer_count": 1, "score": 0, "last_activity_date": 1527858350, "creation_date": 1527713969, "last_edit_date": 1527858350, "question_id": 50613281, "link": "https://stackoverflow.com/questions/50613281/python-graph-dfs-set-defaultdict-error-in-changing-dictionary-size", "title": "Python: Graph, DFS, set, defaultdict - error in changing dictionary size", "body": "<p>This problem arose when I was trying a depth-first approach of printing a disconnected graph.</p>\n\n<p>I am using a <code>defaultdict</code> for my adjacency list representation of the graph. I know that if a key isn't in the dictionary, the <code>defaultdict</code> would add it and provide whatever default value you set (in my case a <code>list</code>).</p>\n\n<p>Before you comment this as a duplicate, I have read the posts <a href=\"https://stackoverflow.com/questions/33679669/python-runtimeerror-dictionary-changed-size-during-iteration\">here</a> and <a href=\"https://stackoverflow.com/questions/28257623/dictionary-changed-size-during-iteration\">here</a>. They show that the dictionary is being changed during the iteration but I don't quite get how in my particular case. I am not popping any values from the <code>defaultdict</code>.  </p>\n\n<p>The code is adapted from <a href=\"https://www.geeksforgeeks.org/depth-first-search-or-dfs-for-a-graph/\" rel=\"nofollow noreferrer\">GeeksForGeeks</a> but I decided to use a <code>set</code> instead of a <code>list</code> for visited vertices and I renamed the <code>DFSUtil</code> function, <code>DFSHelper</code>. Moreover, the graph being printed is the same as the one below except that I added a node 5 pointing to node 4. I tried to add this to make the graph truly disconnected. Without this additional entry, no error is produced.\n<a href=\"https://i.stack.imgur.com/pDkIm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pDkIm.png\" alt=\"GeeksForGeeks graph being printed\"></a></p>\n\n<p>Here's my code:</p>\n\n<pre><code>from collections import defaultdict\n\nclass Graph:\n  def __init__(self):\n    self.graph = defaultdict(list)\n\n  def addEdge(self, u, v):\n    self.graph[u].append(v)\n\n  def DFSHelper(self, vertex, visited):\n    # recursively visit adjacent nodes\n    if vertex not in visited:# and vertex in self.graph:\n      visited.add(vertex)\n      print(vertex)\n\n      for neighbor in self.graph[vertex]:\n        self.DFSHelper(neighbor, visited)\n\n  def DFS(self): # for disconnected graph\n    visited = set()\n\n    # print(self.graph.keys())\n    for vertex in self.graph.keys():\n      if vertex not in visited:\n        self.DFSHelper(vertex, visited)\n\n    print('Visited : ', visited)\n\ng = Graph()\ng.addEdge(0, 1)\ng.addEdge(0, 2)\ng.addEdge(1, 2)\ng.addEdge(2, 0)\ng.addEdge(2, 3)\ng.addEdge(3, 3)\ng.addEdge(5, 4) # disconnected graph - I added this edge myself\n\nprint(g.graph)\nprint(\"Following is DFS of a disconnected graph\")\ng.DFS()\n</code></pre>\n\n<p>I noticed that when I changed the first line in DFSHelper from:</p>\n\n<pre><code>if vertex not in visited:\n</code></pre>\n\n<p>to </p>\n\n<pre><code>if vertex not in visited and vertex in self.graph:\n</code></pre>\n\n<p>the error would disappear but I don't get why that is the case. My assumption is that vertex 4 which is not a key is being searched in the <code>defaultdict</code> and since the default action of a <code>defaultdict</code> is to create an entry rather than return a key error, the <code>defaultdict</code> is changed during iteration. However, I don't see how 4 is being passed into the function <code>defaultdict</code>.</p>\n\n<p>Here's the output with the error. </p>\n\n<pre><code>Following is DFS of a disconnected graph\n0\n1\n2\n3\n5\n4\nTraceback (most recent call last):\n  File \"depth-first-search-disconnected_graph.py\", line 41, in &lt;module&gt;\n    g.DFS()\n  File \"depth-first-search-disconnected_graph.py\", line 25, in DFS\n    for vertex in self.graph.keys():\nRuntimeError: dictionary changed size during iteration\n</code></pre>\n\n<p>Note the 4 being printed. </p>\n\n<p>Here's the output with the error resolved. </p>\n\n<pre><code>Following is DFS of a disconnected graph\n0\n1\n2\n3\n5\nVisited :  {0, 1, 2, 3, 5}\n</code></pre>\n"}, {"tags": ["python", "amazon-web-services"], "answers": [{"tags": [], "owner": {"reputation": 1838, "user_id": 1428336, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/87dc2b2f2d1766f4a00170b52d46db2c?s=128&d=identicon&r=PG", "display_name": "Alessandro Oliveira", "link": "https://stackoverflow.com/users/1428336/alessandro-oliveira"}, "is_accepted": false, "score": 0, "last_activity_date": 1535688854, "creation_date": 1535688854, "answer_id": 52108336, "question_id": 50613219, "link": "https://stackoverflow.com/questions/50613219/is-there-a-local-development-mode-for-aws-ssm/52108336#52108336", "title": "Is there a local development mode for AWS SSM?", "body": "<p>Just create a policy like below and grant to your user, than you might keep using the same strategy local or in lambda.</p>\n\n<p>PS: I checked here and it works like a charm!</p>\n\n<p>You also might check my <a href=\"https://github.com/aws-professional/poc-lambda-ssm\" rel=\"nofollow noreferrer\">PoC Lambda SSM</a> project. In this project I use serverless to develop lambda and it works invoking locally by using invoke local -f hello_ssm.</p>\n\n<p><strong>Policy</strong></p>\n\n<pre><code>{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Action\": [\n                \"ssm:GetParameter\"\n            ],\n            \"Resource\": [\n                \"arn:aws:ssm:us-east-1:139486740103:parameter/my-secure-param\"\n            ],\n            \"Effect\": \"Allow\"\n        },\n        {\n            \"Action\": [\n                \"kms:Decrypt\"\n            ],\n            \"Resource\": [\n                \"arn:aws:kms:us-east-1:139486740103:key/alias/aws/ssm\"\n            ],\n            \"Effect\": \"Allow\"\n        }\n    ]\n}\n</code></pre>\n"}], "owner": {"reputation": 19827, "user_id": 342553, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/zjZ6d.jpg?s=128&g=1", "display_name": "James Lin", "link": "https://stackoverflow.com/users/342553/james-lin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 249, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1535688854, "creation_date": 1527713691, "question_id": 50613219, "link": "https://stackoverflow.com/questions/50613219/is-there-a-local-development-mode-for-aws-ssm", "title": "Is there a local development mode for AWS SSM?", "body": "<p>Absolute SSM noob here, currently we use SSM in our lambda function, and to use it we simple import the SSM class and instantiate an instance, the constructor does the env var injections.  </p>\n\n<pre><code>from aws_ssm import SSM\nssm = SSM()\n</code></pre>\n\n<p>While this works as expected when running on AWS Lambda, but it doesn't work well in our local computer, typically our local accounts not setup with SSM.</p>\n\n<p>In order to bypass the SSM and load the vars from actual existing env vars, I will have to add a switch:</p>\n\n<pre><code>if not os.environ.get('NO_SSM'):\n    from aws_ssm import SSM\n    ssm = SSM()\n</code></pre>\n\n<p>And this seems like a hack to me (especially False False condition to make it right), I am just wondering if there is a proper way to do it for local development?</p>\n\n<p>Just thinking again, it would have been better to reverse the situation originally to only use SSM when <code>USE_SSM</code> env is defined:</p>\n\n<pre><code>if os.environ.get('USE_SSM'):\n    from aws_ssm import SSM\n    ssm = SSM()\n</code></pre>\n"}, {"tags": ["python", "json"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1527713958, "post_id": 50613188, "comment_id": 88236396, "body": "Use a datetime in the file name? I&#39;m not sure I understand the question tbh."}, {"owner": {"reputation": 321, "user_id": 9441275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c102bbeb8fa9862c1ae81c0269b9ae?s=128&d=identicon&r=PG&f=1", "display_name": "CDNthe2nd", "link": "https://stackoverflow.com/users/9441275/cdnthe2nd"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1527714137, "post_id": 50613188, "comment_id": 88236464, "body": "What do you mean by datetime? :)"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1527714321, "post_id": 50613188, "comment_id": 88236539, "body": "Exactly that; a datetime. <code>with open(&#39;{}_data.json&#39;.format(datetime.datetime.now().strftime(&zwnj;&#8203;&#39;%Y_%m_%d_%H_%M_%S&#39;)&zwnj;&#8203;), &#39;w&#39;) as outfile:</code> but with some better organisation/PEP8 in the code."}, {"owner": {"reputation": 321, "user_id": 9441275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c102bbeb8fa9862c1ae81c0269b9ae?s=128&d=identicon&r=PG&f=1", "display_name": "CDNthe2nd", "link": "https://stackoverflow.com/users/9441275/cdnthe2nd"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1527714536, "post_id": 50613188, "comment_id": 88236611, "body": "Ohhh. Well that could be but will that create a new file though and how would I be able to open it in the script in that case?"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1527714647, "post_id": 50613188, "comment_id": 88236649, "body": "It will create a new file, unless the code is run more than once per second (you could increase the granularity to microseconds etc. to get over that). As for finding the file, you&#39;d have to read the whole directory file names, sort the file names, and take the last one. Perhaps it would be better to explain what you&#39;re trying to do because I can&#39;t see the application for this approach."}, {"owner": {"reputation": 321, "user_id": 9441275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c102bbeb8fa9862c1ae81c0269b9ae?s=128&d=identicon&r=PG&f=1", "display_name": "CDNthe2nd", "link": "https://stackoverflow.com/users/9441275/cdnthe2nd"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1527714684, "post_id": 50613188, "comment_id": 88236661, "body": "Oh I will update it how the json data I wish to look like maybe instead? Would that be any better?"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1527714746, "post_id": 50613188, "comment_id": 88236680, "body": "The structure of your data <i>within</i> the file seems irrelevant from my understanding of your question. What is the broader problem you&#39;re trying to address?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1527714861, "post_id": 50613188, "comment_id": 88236724, "body": "that file contents doesn&#39;t look like JSON."}, {"owner": {"reputation": 321, "user_id": 9441275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c102bbeb8fa9862c1ae81c0269b9ae?s=128&d=identicon&r=PG&f=1", "display_name": "CDNthe2nd", "link": "https://stackoverflow.com/users/9441275/cdnthe2nd"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1527714871, "post_id": 50613188, "comment_id": 88236729, "body": "@roganjosh My issue right now is that when I run the program at the start, I clean it with <code>with open(&#39;data.json&#39;, &#39;w&#39;) as f:         json.dump(Infotext, f)         f.write(&quot;\\n&quot;)</code> Which will then give me the start in the json file <i>First name : Last name : email</i> - And then when the script is finished with randomized the names and emails the output gonna be more like I added in the edited code."}], "answers": [{"comments": [{"owner": {"reputation": 321, "user_id": 9441275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c102bbeb8fa9862c1ae81c0269b9ae?s=128&d=identicon&r=PG&f=1", "display_name": "CDNthe2nd", "link": "https://stackoverflow.com/users/9441275/cdnthe2nd"}, "edited": false, "score": 0, "creation_date": 1527714197, "post_id": 50613279, "comment_id": 88236498, "body": "Oh I think there might been an missunderstanding here - Basically the Infotext has First name LAst name and so on which is inside my script (Just random names basically and emails)  but what I need and wish to do is basically to create new json file where it saves all the data. So everytime I run the script, it creates new json data file with the latest data used in the script."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9872569"}, "is_accepted": false, "score": 0, "last_activity_date": 1527713958, "creation_date": 1527713958, "answer_id": 50613279, "question_id": 50613188, "link": "https://stackoverflow.com/questions/50613188/how-do-i-create-new-json-data-after-every-script-run/50613279#50613279", "title": "How do I create new JSON data after every script run", "body": "<p>I think what you could do is to use seek() for files and write in the related position of the json file . for example you need to update firstname , you seek for the : after firstname , and update the text there. \nThere are examples here : \n<a href=\"https://www.tutorialspoint.com/python/file_seek.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/python/file_seek.htm</a></p>\n"}, {"comments": [{"owner": {"reputation": 321, "user_id": 9441275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c102bbeb8fa9862c1ae81c0269b9ae?s=128&d=identicon&r=PG&f=1", "display_name": "CDNthe2nd", "link": "https://stackoverflow.com/users/9441275/cdnthe2nd"}, "edited": false, "score": 0, "creation_date": 1527715183, "post_id": 50613475, "comment_id": 88236848, "body": "Oh but that would just be re-written by the same data.json correct? What I wish is that its gonna create a new json file instead of running the same data.json file. So in that case it would be data2.json - data3.json and so on..."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1527715196, "post_id": 50613475, "comment_id": 88236853, "body": "I really doubt this is what they want, though it&#39;s much closer. I think they have a lot of misconceptions here. The relies on the initial JSON having a list structure, but really they probably want a nested dictionary that they <i>update</i> rather than dumping new data"}, {"owner": {"reputation": 321, "user_id": 9441275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c102bbeb8fa9862c1ae81c0269b9ae?s=128&d=identicon&r=PG&f=1", "display_name": "CDNthe2nd", "link": "https://stackoverflow.com/users/9441275/cdnthe2nd"}, "edited": false, "score": 0, "creation_date": 1527715338, "post_id": 50613475, "comment_id": 88236907, "body": "I mean right now I do have a Json file that re-writes and it works flawless - but I wanna learn how it is if you want to create new data.json files for every run you do!"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 321, "user_id": 9441275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c102bbeb8fa9862c1ae81c0269b9ae?s=128&d=identicon&r=PG&f=1", "display_name": "CDNthe2nd", "link": "https://stackoverflow.com/users/9441275/cdnthe2nd"}, "edited": false, "score": 0, "creation_date": 1527715641, "post_id": 50613475, "comment_id": 88237015, "body": "@CDNthe2nd It&#39;s not the same data, because of <code>data.append(...)</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1527715668, "post_id": 50613475, "comment_id": 88237029, "body": "@roganjosh Yes, a dictionary would be even better, but I didn&#39;t want to redesign too much."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 321, "user_id": 9441275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c102bbeb8fa9862c1ae81c0269b9ae?s=128&d=identicon&r=PG&f=1", "display_name": "CDNthe2nd", "link": "https://stackoverflow.com/users/9441275/cdnthe2nd"}, "edited": false, "score": 0, "creation_date": 1527715738, "post_id": 50613475, "comment_id": 88237057, "body": "@CDNthe2nd If you append to a JSON file the way you&#39;re doing it, it&#39;s not valid JSON any more. A JSON file can only contain one object, not multiple objects. If you want multiple items, they need to be in a container like a list."}, {"owner": {"reputation": 321, "user_id": 9441275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c102bbeb8fa9862c1ae81c0269b9ae?s=128&d=identicon&r=PG&f=1", "display_name": "CDNthe2nd", "link": "https://stackoverflow.com/users/9441275/cdnthe2nd"}, "edited": false, "score": 0, "creation_date": 1527715826, "post_id": 50613475, "comment_id": 88237097, "body": "Oh I mean.. It doesn&#39;t need to be beautiful or Json validated. I did Json because I found the code in a tutorial, It could be a txt file aswell. Just as long as it print out a Title and then the data under the titles."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1527715993, "post_id": 50613475, "comment_id": 88237151, "body": "If you just want to write a string, use <code>f.write(Saving + &quot;\\n&quot;)</code>"}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1527715096, "creation_date": 1527715096, "answer_id": 50613475, "question_id": 50613188, "link": "https://stackoverflow.com/questions/50613188/how-do-i-create-new-json-data-after-every-script-run/50613475#50613475", "title": "How do I create new JSON data after every script run", "body": "<p>The JSON file should contain a list of strings. You should read the current contents of the file into a variable, append to the variable, then rewrite the file.</p>\n\n<pre><code>with open(\"data.json\", \"r\") as f:\n    data = json.load(f)\ndata.append(firstname + ' ' + lastname+ ' - ' + email)\nwith open(\"data.json\", \"w\") as f:\n    json.dump(data, f)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 321, "user_id": 9441275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c102bbeb8fa9862c1ae81c0269b9ae?s=128&d=identicon&r=PG&f=1", "display_name": "CDNthe2nd", "link": "https://stackoverflow.com/users/9441275/cdnthe2nd"}, "edited": false, "score": 0, "creation_date": 1527716289, "post_id": 50613637, "comment_id": 88237255, "body": "Yes this is exactly it! What I need now is that I just need it to add the generated names and email inside that code. So I need to somehow use the <code>Saving = fname + &#39; &#39; + lname + &#39; - &#39; + email              with open(&#39;data.json&#39;, &#39;a&#39;) as f:                 json.dump(Saving, f)                 f.write(&quot;\\n&quot;)</code> in that file but how would I be able to save that file name so it adds inside the same json file that was created with your code?"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "reply_to_user": {"reputation": 321, "user_id": 9441275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c102bbeb8fa9862c1ae81c0269b9ae?s=128&d=identicon&r=PG&f=1", "display_name": "CDNthe2nd", "link": "https://stackoverflow.com/users/9441275/cdnthe2nd"}, "edited": false, "score": 0, "creation_date": 1527716636, "post_id": 50613637, "comment_id": 88237373, "body": "@CDNthe2nd You would need to read in the initial data as in barmar&#39;s answer and modify it in some way. Your question and screenshots imply that this is <i>not</i> valid JSON in the first place, so the onus is on you to clarify your question. Please show how a file should look from one iteration of your code, in valid JSON, and I will update my answer (ping me when you&#39;ve done it)."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "reply_to_user": {"reputation": 321, "user_id": 9441275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c102bbeb8fa9862c1ae81c0269b9ae?s=128&d=identicon&r=PG&f=1", "display_name": "CDNthe2nd", "link": "https://stackoverflow.com/users/9441275/cdnthe2nd"}, "edited": false, "score": 0, "creation_date": 1527716715, "post_id": 50613637, "comment_id": 88237400, "body": "@CDNthe2nd Note that this approach will get worse over time. You&#39;ll have a directory that just continues to grow and finding the latest file will take more time. I think you probably want to look at <code>sqlite3</code>"}, {"owner": {"reputation": 321, "user_id": 9441275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c102bbeb8fa9862c1ae81c0269b9ae?s=128&d=identicon&r=PG&f=1", "display_name": "CDNthe2nd", "link": "https://stackoverflow.com/users/9441275/cdnthe2nd"}, "edited": false, "score": 0, "creation_date": 1527716929, "post_id": 50613637, "comment_id": 88237483, "body": "For some reason I cant ping - However I mean the json is not supposed to me valid - Which is not the goal for me. It could be a txt file aswell as I mentioned, I found this piece of code where I just continued since the json file looked easier (Because it automatic"}, {"owner": {"reputation": 321, "user_id": 9441275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c102bbeb8fa9862c1ae81c0269b9ae?s=128&d=identicon&r=PG&f=1", "display_name": "CDNthe2nd", "link": "https://stackoverflow.com/users/9441275/cdnthe2nd"}, "edited": false, "score": 0, "creation_date": 1527716932, "post_id": 50613637, "comment_id": 88237484, "body": "opens with node++ while the textfile opens with notepad which just looks gross) - If you look my picture at the very bottom of my thread - That&#39;s how I want the code to be with your script that you have given - meaning that everytime I run the program, it creates new json file (Which your codes does) and now I just need to add the rest inside my code which is <code>Saving = fname + &#39; &#39; + lname + &#39; - &#39; + email</code> which will be added inside the latest json you created."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "reply_to_user": {"reputation": 321, "user_id": 9441275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c102bbeb8fa9862c1ae81c0269b9ae?s=128&d=identicon&r=PG&f=1", "display_name": "CDNthe2nd", "link": "https://stackoverflow.com/users/9441275/cdnthe2nd"}, "edited": false, "score": 1, "creation_date": 1527717505, "post_id": 50613637, "comment_id": 88237664, "body": "@CDNthe2nd I see it. I&#39;m working on a big edit on the answer."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "reply_to_user": {"reputation": 321, "user_id": 9441275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c102bbeb8fa9862c1ae81c0269b9ae?s=128&d=identicon&r=PG&f=1", "display_name": "CDNthe2nd", "link": "https://stackoverflow.com/users/9441275/cdnthe2nd"}, "edited": false, "score": 0, "creation_date": 1527718453, "post_id": 50613637, "comment_id": 88237941, "body": "@CDNthe2nd I have edited to show a different way. What you&#39;re currently using is not sustainable as the system grows. I think sqlite3 is a better way to go; one database, all the data in once place, and easily query-able."}, {"owner": {"reputation": 321, "user_id": 9441275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c102bbeb8fa9862c1ae81c0269b9ae?s=128&d=identicon&r=PG&f=1", "display_name": "CDNthe2nd", "link": "https://stackoverflow.com/users/9441275/cdnthe2nd"}, "edited": false, "score": 0, "creation_date": 1527718643, "post_id": 50613637, "comment_id": 88237993, "body": "Oh god! This looked beautiful! I think I might start using a database for this, I will go and see how it is with sqlite3 since I dont have big knowledge of it so why not! But I did get alot of help with you so im happy!"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "reply_to_user": {"reputation": 321, "user_id": 9441275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c102bbeb8fa9862c1ae81c0269b9ae?s=128&d=identicon&r=PG&f=1", "display_name": "CDNthe2nd", "link": "https://stackoverflow.com/users/9441275/cdnthe2nd"}, "edited": false, "score": 0, "creation_date": 1527719013, "post_id": 50613637, "comment_id": 88238080, "body": "@CDNthe2nd my code should now be fully runnable on your own system so you can see what every stage does (the first time I edited in the sqlite part it would crash for you). If you feel that this has answered your question, I would be grateful if you would accept it as answered."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "reply_to_user": {"reputation": 321, "user_id": 9441275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c102bbeb8fa9862c1ae81c0269b9ae?s=128&d=identicon&r=PG&f=1", "display_name": "CDNthe2nd", "link": "https://stackoverflow.com/users/9441275/cdnthe2nd"}, "edited": false, "score": 0, "creation_date": 1527719268, "post_id": 50613637, "comment_id": 88238153, "body": "@CDNthe2nd oops, the exception was not correct. Now it will run with copy/paste."}], "tags": [], "owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "is_accepted": true, "score": 1, "last_activity_date": 1527721845, "last_edit_date": 1527721845, "creation_date": 1527715964, "answer_id": 50613637, "question_id": 50613188, "link": "https://stackoverflow.com/questions/50613188/how-do-i-create-new-json-data-after-every-script-run/50613637#50613637", "title": "How do I create new JSON data after every script run", "body": "<p>Just use a datetime in the file name, to create a unique file each time the code is run. In this case, granularity goes down to per-second so, if the code is run more than once per second, you will overwrite the existing contents of a file. In that case, step down to file names with microseconds in their name.</p>\n\n<pre><code>import datetime as dt\nimport json\n\ntime_script_run = dt.datetime.now().strftime('%Y_%m_%d_%H_%M_%S')\nwith open('{}_data.json'.format(time_script_run), 'w') as outfile:\n    json.dump(Infotext, outfile)\n</code></pre>\n\n<p>This has multiple drawbacks:</p>\n\n<ol>\n<li>You'll have an ever-growing number of files</li>\n<li>Even if you load the file with the latest datetime in its name (and finding that file grows in run time), you can only see data as it was in the single time before the last run; the full history is very difficult to look up.</li>\n</ol>\n\n<p>I think you're better using a light-weight database such as <code>sqlite3</code>:</p>\n\n<pre><code>import sqlite3\nimport random\nimport time\n\nimport datetime as dt\n\n# Create DB \nwith sqlite3.connect('some_database.db') as conn:\n    c = conn.cursor()\n\n    # Just for this example, we'll clear the whole table to make it repeatable\n    try:\n        c.execute(\"DROP TABLE user_emails\")\n    except sqlite3.OperationalError: # First time you run this code\n        pass\n\n    c.execute(\"\"\"CREATE TABLE IF NOT EXISTS user_emails(\n                     datetime TEXT,\n                     first_name TEXT,\n                     last_name TEXT,\n                     email TEXT)\n              \"\"\")\n\n    # Now let's create some fake user behaviour\n    for x in range(5):\n        now = dt.datetime.now().strftime('%Y-%m-%d %H:%M:%S')\n        c.execute(\"INSERT INTO user_emails VALUES (?, ?, ?, ?)\", \n                  (now, 'John', 'Smith', random.randint(0, 1000)))\n        time.sleep(1) # so we get new timestamps\n\n\n# Later on, doing some work\nwith sqlite3.connect('some_database.db') as conn:\n    c = conn.cursor()\n\n    # Get whole user history\n    c.execute(\"\"\"SELECT * FROM user_emails \n                 WHERE first_name = ? AND last_name = ?\n                 \"\"\", ('John', 'Smith'))\n    print(\"All data\")\n    for row in c.fetchall():\n        print(row)\n    print('...............................................................')\n\n    # Or, let's get the last email address\n    print(\"Latest data\")\n    c.execute(\"\"\"\n              SELECT * FROM user_emails \n              WHERE first_name = ? AND last_name = ?\n              ORDER BY datetime DESC\n              LIMIT 1;\n              \"\"\", ('John', 'Smith'))\n    print(c.fetchall())\n</code></pre>\n\n<p>Note: the data retrieval runs really quickly in this code, it only takes ~5 secs to run because I use <code>time.sleep(1)</code> in generating the fake user data.</p>\n"}], "owner": {"reputation": 321, "user_id": 9441275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c102bbeb8fa9862c1ae81c0269b9ae?s=128&d=identicon&r=PG&f=1", "display_name": "CDNthe2nd", "link": "https://stackoverflow.com/users/9441275/cdnthe2nd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "accepted_answer_id": 50613637, "answer_count": 3, "score": 1, "last_activity_date": 1527721845, "creation_date": 1527713559, "last_edit_date": 1527714983, "question_id": 50613188, "link": "https://stackoverflow.com/questions/50613188/how-do-i-create-new-json-data-after-every-script-run", "title": "How do I create new JSON data after every script run", "body": "<p>I have JSON data stored in the variable data.</p>\n\n<p>I want to make it write to a text file after every time it runs so I know which data json that is new instead of re-writting the same Json.</p>\n\n<p>Currently, I am trying this:</p>\n\n<pre><code>Saving = firstname + ' ' + lastname+ ' - ' + email\nwith open('data.json', 'a') as f:\n    json.dump(Saving, f)\n    f.write(\"\\n\")\n</code></pre>\n\n<p>which just adds up to the json file and the beginning of the script where the first code starts, I clean it with </p>\n\n<pre><code>Infotext = \"First name : Last name : Email\"\n    with open('data.json', 'w') as f:\n        json.dump(Infotext, f)\n        f.write(\"\\n\")\n</code></pre>\n\n<p>How can I make instead of re-write the same Json, instead create new file with <em>Infotext</em> information and then add up with <em>Saving</em>?</p>\n\n<hr>\n\n<p>Output in Json:</p>\n\n<pre><code>\"First name : Last name : Email\"\nHello        World   - helloworld@test.com\nHello2           World   - helloworld2@test.com\nHello3           World   - helloworld3@test.com\nHello4           World   - helloworld4@test.com\n</code></pre>\n\n<p>Thats the outprint I wish to be. So basically it needs to start with </p>\n\n<p><strong>\"First name : Last name : Email\"</strong></p>\n\n<p>And then the Names, Lastname Email will add up below that until there is no names anymore.</p>\n\n<p><a href=\"https://i.stack.imgur.com/B1f3E.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/B1f3E.png\" alt=\"enter image description here\"></a></p>\n\n<p>So basically easy to say now - What I want is that instead of clearing and add to the same json file which is data.json, I want it to create to a newfile called data1.json - then if I rerun the program again tommorow etc - it gonna be data2.json and so on.</p>\n"}, {"tags": ["python", "multithreading", "timer", "kivy"], "answers": [{"tags": [], "owner": {"reputation": 15, "user_id": 9638417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55fd641dd47a278ad2380c98d8c9bcab?s=128&d=identicon&r=PG&f=1", "display_name": "nikkitikitavi", "link": "https://stackoverflow.com/users/9638417/nikkitikitavi"}, "is_accepted": false, "score": 0, "last_activity_date": 1527723710, "last_edit_date": 1527723710, "creation_date": 1527714856, "answer_id": 50613433, "question_id": 50613187, "link": "https://stackoverflow.com/questions/50613187/how-to-show-label-in-certain-time-using-timer-in-python-kivy/50613433#50613433", "title": "How to show label in certain time using Timer in python kivy?", "body": "<p>I guess I figured it out.. correct me if I am wrong</p>\n\n<pre><code>from kivy.app import App\nfrom kivy.uix.button import Button\nfrom kivy.uix.boxlayout import BoxLayout\nfrom kivy.uix.label import Label\nfrom kivy.uix.popup import Popup\nfrom kivy.config import Config\nfrom threading import Timer\n\nConfig.set(\"graphics\", \"resizable\", 0)\nConfig.set(\"graphics\", \"width\", 400)\nConfig.set(\"graphics\", \"height\", 500)\n\ntime_var = 2\n\n\nclass myLayout(BoxLayout):\n\n    def __init__(self, **kwargs):\n        super().__init__(**kwargs)\n\n        layout = BoxLayout(orientation=\"vertical\",\n                           padding=20,\n                           spacing=10)\n\n        btn = Button(text=\"Click\")\n\n        self.add_widget(layout)\n        layout.add_widget(btn)\n\n        btn.bind(on_press=self.timer)\n\n    def popup(self):\n\n        popup = Popup(content=Label(text=\"timer\"),\n                      size_hint=(None, None),\n                      size=(300, 200))\n        popup.open()\n\n    def timer(self, obj):\n        timer = Timer(time_var, self.popup)\n        timer.start()\n\n\nclass ReminderApp(App):\n    def build(self):\n        return myLayout()\n\n\nif __name__ == \"__main__\":\n    ReminderApp().run()\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9638417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55fd641dd47a278ad2380c98d8c9bcab?s=128&d=identicon&r=PG&f=1", "display_name": "nikkitikitavi", "link": "https://stackoverflow.com/users/9638417/nikkitikitavi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 238, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527723710, "creation_date": 1527713554, "last_edit_date": 1527714172, "question_id": 50613187, "link": "https://stackoverflow.com/questions/50613187/how-to-show-label-in-certain-time-using-timer-in-python-kivy", "title": "How to show label in certain time using Timer in python kivy?", "body": "<p>I'm trying to display some label using kivy framework in specified time with Timer module. Here is what I have and what I want to include into my python kivy:</p>\n\n<pre><code>from threading import Timer \ntime_var = 2\n\ndef time(): \n  print(time_var) \n\nt = Timer(time_var, time) \nt.start() \n</code></pre>\n\n<p>Here is my python kivy code:</p>\n\n<pre><code>from kivy.app import App\nfrom kivy.uix.button import Button\nfrom kivy.uix.boxlayout import BoxLayout\nfrom kivy.uix.label import Label\nfrom kivy.uix.popup import Popup\nfrom kivy.config import Config\nfrom threading import Timer\n\nConfig.set(\"graphics\", \"resizable\", 0)\nConfig.set(\"graphics\", \"width\", 400)\nConfig.set(\"graphics\", \"height\", 500)\n\ntime_var = 2\n\n\nclass myLayout(BoxLayout):\n\n    def __init__(self, **kwargs):\n        super().__init__(**kwargs)\n\n        self.t = Timer(time_var, self.timer)\n\n        layout = BoxLayout(orientation=\"vertical\",\n                           padding=20,\n                           spacing=10)\n\n        btn = Button(text=\"Click\")\n        btn.bind(on_press=self.t.start())\n\n        self.add_widget(layout)\n        layout.add_widget(btn)\n\n    def timer(self, obj):\n\n        popup = Popup(content=Label(text=\"timer\"),\n                      size_hint=(None, None),\n                      size=(300, 200))\n\n        return popup.open()\n\n\nclass ReminderApp(App):\n    def build(self):\n        return myLayout()\n\n\nif __name__ == \"__main__\":\n    ReminderApp().run()\n</code></pre>\n\n<p>But I cannot figure it out how to make it work. \nMaybe there is a way to make it using kivy modules.. Please help me because I am stuck..</p>\n"}, {"tags": ["python", "matrix"], "comments": [{"owner": {"reputation": 1806, "user_id": 8754516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7be49dad417bd035463828d197cfb7c?s=128&d=identicon&r=PG&f=1", "display_name": "natn2323", "link": "https://stackoverflow.com/users/8754516/natn2323"}, "edited": false, "score": 2, "creation_date": 1527713599, "post_id": 50613181, "comment_id": 88236263, "body": "What have you tried so far?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5780947"}, "edited": false, "score": 1, "creation_date": 1527713611, "post_id": 50613181, "comment_id": 88236269, "body": "what you&#39;re asking to do is pretty simple...but why?"}], "answers": [{"tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": false, "score": 0, "last_activity_date": 1527715035, "last_edit_date": 1527715035, "creation_date": 1527713959, "answer_id": 50613280, "question_id": 50613181, "link": "https://stackoverflow.com/questions/50613181/loading-text-data-in-python-and-create-a-matrix/50613280#50613280", "title": "Loading text data in python and create a matrix", "body": "<p>You can use <code>re.split</code>:</p>\n\n<pre><code>import re\nfile_data = open('filename.txt').read()\nresults = filter(None, re.split('A:\\s|Q:\\s', file_data))\nnew_results = [re.findall('\\w+|\\W', i) for i in results]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[['hello', ' ', 'what', ' ', 'is', ' ', 'your', ' ', 'name', '?', ' '], ['Hi', ' ', 'my', ' ', 'name', ' ', 'is', ' ', 'John', ' ', 'Smith']]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 441, "user_id": 6796677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b2565aed73641da138e3de28ccd3598?s=128&d=identicon&r=PG&f=1", "display_name": "cagcoach", "link": "https://stackoverflow.com/users/6796677/cagcoach"}, "is_accepted": false, "score": 0, "last_activity_date": 1570194967, "creation_date": 1570194967, "answer_id": 58237208, "question_id": 50613181, "link": "https://stackoverflow.com/questions/50613181/loading-text-data-in-python-and-create-a-matrix/58237208#58237208", "title": "Loading text data in python and create a matrix", "body": "<p>just split the strings, using the split function:   </p>\n\n<pre><code>with open('txt.txt') as my_file:\n    lines = my_file.readlines()\n#lines[0] = \"Q: hello what is your name?\"\n#lines[1] = \"A: Hi my name is John Smith\"\n</code></pre>\n\n<p>then just use</p>\n\n<pre><code>output = [lines[0].split,lines[1].split]\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9872664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60571a033dc703f23dbf4a91fcdbfaa3?s=128&d=identicon&r=PG&f=1", "display_name": "Roberto Guglielmo", "link": "https://stackoverflow.com/users/9872664/roberto-guglielmo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1570194967, "creation_date": 1527713509, "last_edit_date": 1570194406, "question_id": 50613181, "link": "https://stackoverflow.com/questions/50613181/loading-text-data-in-python-and-create-a-matrix", "title": "Loading text data in python and create a matrix", "body": "<p>say I have a text file with a format similarly to this</p>\n\n<pre><code>Q: hello what is your name?\nA: Hi my name is John Smith\n</code></pre>\n\n<p>and I want to create a matrix such that it is a 2xn in this case</p>\n\n<pre><code>[['hello','what','is',your','name','?', ' '],['hi','my','name','is','John','Smith']]\n</code></pre>\n\n<p>note that the first row has an empty entry because it has 6 strings while second row has 7 strings</p>\n"}, {"tags": ["python", "mysql", "apache-spark", "pyspark", "amazon-rds"], "comments": [{"owner": {"reputation": 1674, "user_id": 2912399, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/qVi3M.jpg?s=128&g=1", "display_name": "Andrew Paes", "link": "https://stackoverflow.com/users/2912399/andrew-paes"}, "edited": false, "score": 0, "creation_date": 1528680736, "post_id": 50613173, "comment_id": 88585196, "body": "Could you please edit and share with us what did you do so far about your MySQL scripts or just your table scripts? And I didnt understand if you need the MySQL upsert script or also the pyspark script."}, {"owner": {"reputation": 1774, "user_id": 4470126, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30c5924d5c914cc8d98254c8c9cea597?s=128&d=identicon&r=PG&f=1", "display_name": "Yuva", "link": "https://stackoverflow.com/users/4470126/yuva"}, "reply_to_user": {"reputation": 1674, "user_id": 2912399, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/qVi3M.jpg?s=128&g=1", "display_name": "Andrew Paes", "link": "https://stackoverflow.com/users/2912399/andrew-paes"}, "edited": false, "score": 0, "creation_date": 1528684056, "post_id": 50613173, "comment_id": 88585695, "body": "Hi Andrew, updated my question with sample scenario, created using AWS Glue context.  Is it possible to run/execute mysql upsert scripts from with Glue-&gt;pyspark environment.  Thanks"}, {"owner": {"reputation": 1674, "user_id": 2912399, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/qVi3M.jpg?s=128&g=1", "display_name": "Andrew Paes", "link": "https://stackoverflow.com/users/2912399/andrew-paes"}, "edited": false, "score": 0, "creation_date": 1528720493, "post_id": 50613173, "comment_id": 88601566, "body": "Before answer it; Did you see Stack showing this link as answer to your question? <a href=\"https://stackoverflow.com/questions/35634853/spark-sql-update-mysql-table-using-dataframes-and-jdbc\" title=\"spark sql update mysql table using dataframes and jdbc\">stackoverflow.com/questions/35634853/&hellip;</a>"}, {"owner": {"reputation": 1774, "user_id": 4470126, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30c5924d5c914cc8d98254c8c9cea597?s=128&d=identicon&r=PG&f=1", "display_name": "Yuva", "link": "https://stackoverflow.com/users/4470126/yuva"}, "reply_to_user": {"reputation": 1674, "user_id": 2912399, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/qVi3M.jpg?s=128&g=1", "display_name": "Andrew Paes", "link": "https://stackoverflow.com/users/2912399/andrew-paes"}, "edited": false, "score": 0, "creation_date": 1528749399, "post_id": 50613173, "comment_id": 88617268, "body": "I did see that Andrew &amp; I had mentioned in my question as well.  There was a solution provided using Java.  I was wondering if we can do this using pyspark, or if it is possible.  I am yet to attempt the java code on a pyspark.  Thanks"}], "owner": {"reputation": 1774, "user_id": 4470126, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30c5924d5c914cc8d98254c8c9cea597?s=128&d=identicon&r=PG&f=1", "display_name": "Yuva", "link": "https://stackoverflow.com/users/4470126/yuva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 416, "favorite_count": 0, "closed_date": 1527749764, "answer_count": 0, "score": 0, "last_activity_date": 1528683921, "creation_date": 1527713461, "last_edit_date": 1528683921, "question_id": 50613173, "link": "https://stackoverflow.com/questions/50613173/pyspark-update-certain-columns-in-mysql-table", "closed_reason": "Duplicate", "title": "Pyspark - Update certain columns in mysql table", "body": "<p>I'm trying to insert and update some data on RDS MySql, I prefer to perform upsert in my pyspark &amp; using a staging table.  Could someone please guide me with the logic for staging table, update column data, and finally mergin with mysql.</p>\n\n<p>Edited my question as suggested:</p>\n\n<p>I know and have seen in other responses that currently it is not directly possible to have a row / record level to a database table.  But I have got a new requirement from our client wherein we need to provide for an UPSERTs implementation in the current ETL which all has been done using pyspark.  </p>\n\n<p>Migrating the whole ETL is not possible / feasible and this is not a decision i can take currently, since all the ETL are in production.  This is just an add-on feature to be provided to the existing code.  </p>\n\n<blockquote>\n  <p>My database is in RDS Aurora, and would need to process the records\n  which has a primary key defined in the table, and then perform a\n  UPDATE or an INSERT.  Insert, I think is not problem since we have the\n  \"Append\" option, I need some suggestions for UPDATE of existing\n  records.</p>\n</blockquote>\n\n<p>Would appreciate if someone can share some ideas / pseudo codes for this.</p>\n\n<p>Ok, please note, due to NDA agreement, I cannot provided exact code snippets/code, but this is what the situation like I have created using sample \ndb, scripts, etc.</p>\n\n<pre><code># Create a Glue context\nglueContext = GlueContext(SparkContext.getOrCreate())\n\n# Create a DynamicFrame using the 'persons_json' table\nzipterr_dynamicframe = glueContext.create_dynamic_frame.from_catalog(database=\"terr_db\", table_name=\"zip_terr_txt\")\n\n# Create a DynamicFrame using the 'persons_json' table\nzipterr_new_dynamicframe = glueContext.create_dynamic_frame.from_catalog(database=\"terr_db\", table_name=\"zip_terr_new_txt\")\n\n# Print out information about this data\nprint \"Count:  \", zipterr_dynamicframe.count()\nzipterr_dynamicframe.count()\n5\nzipterr_dynamicframe.count()\n+--------+--------------+--------------+-----+------------------+-------------------+---------+----------+\n|zip_code|territory_code|territory_name|state|business_unit_code|   field_force_name|is_active|is_deleted|\n+--------+--------------+--------------+-----+------------------+-------------------+---------+----------+\n|    xxx1|         81A01|  TERR NAME 01|   NJ|              BCBU|FIELD FORCE NAME 01|        Y|         N|\n|    xxx2|         81A01|  TERR NAME 01|   NJ|              BCBU|FIELD FORCE NAME 02|        Y|         N|\n|    xxx3|         81A01|  TERR NAME 01|   NJ|              BCBU|FIELD FORCE NAME 03|        Y|         N|\n|    xxx4|         81A01|  TERR NAME 01|   CA|              BCBU|FIELD FORCE NAME 04|        Y|         N|\n|    xxx5|         81A01|  TERR NAME 01|   ME|              BCBU|FIELD FORCE NAME 05|        Y|         N|\n+--------------------------------------------------------------------------------------------------------+\n\n# Print out information about this data\nprint \"Count:  \", zipterr_new_dynamicframe.count()\nzipterr_new_dynamicframe.count()\n3\nzipterr_new_dynamicframe.count()\n+--------+--------------+--------------+-----+------------------+-------------------+---------+----------+\n|zip_code|territory_code|territory_name|state|business_unit_code|   field_force_name|is_active|is_deleted|\n+--------+--------------+--------------+-----+------------------+-------------------+---------+----------+\n|    xxx1|         81A01|  TERR NAME 55|   NY|              BDGA|FIELD FORCE NAME 25|        Y|         N|\n|    xxx2|         81A01|  TERR NAME 55|   NY|              BDGA|FIELD FORCE NAME 25|        Y|         N|\n|    x103|         81A01|  TERR NAME 01|   NJ|              BCBU|FIELD FORCE NAME 03|        Y|         N|\n+--------------------------------------------------------------------------------------------------------+\n</code></pre>\n\n<p>In the above display of zipterr_new_dynamicframe records, if you see there are 2 updates namely to <strong>xxx1 &amp; xxx2</strong>, also there is a new record say, <strong>x103</strong>.  Here, am looking for suggestions for upserts to Aurora RDS tables, with the above scenario.  I saw some reference code here in <a href=\"https://stackoverflow.com/questions/35634853/spark-sql-update-mysql-table-using-dataframes-and-jdbc?noredirect=1&amp;lq=1\">here</a> which is in Java, but would like to see if this approach could be done using pyspark.</p>\n\n<p>Hope am clear.  </p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "xml", "python-2.7", "lxml"], "answers": [{"tags": [], "owner": {"reputation": 15511, "user_id": 1044117, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/70c26ef03afcef7dd3f3418097b38d80?s=128&d=identicon&r=PG", "display_name": "fferri", "link": "https://stackoverflow.com/users/1044117/fferri"}, "is_accepted": true, "score": 2, "last_activity_date": 1527713672, "creation_date": 1527713672, "answer_id": 50613218, "question_id": 50613165, "link": "https://stackoverflow.com/questions/50613165/python-lxml-prevent-less-than-or-greater-from-being-converted-to-lt-and-gt/50613218#50613218", "title": "Python lxml prevent less than &lt; or greater &gt; from being converted to &amp;lt and &amp;gt", "body": "<p>you can use <code>lbd = getattr(E, 'lambda')</code> instead of <code>lbd = E.lambda</code> to overcome the limitation due to the reserved keyword.</p>\n\n<pre><code>&gt;&gt;&gt; import lxml.etree as ETree\n&gt;&gt;&gt; import lxml.builder as lxmlBuilder\n&gt;&gt;&gt; E = lxmlBuilder.ElementMaker()\n&gt;&gt;&gt; root = E.root\n&gt;&gt;&gt; lbd = getattr(E, 'lambda')\n&gt;&gt;&gt; myTree = root(lbd('1'))\n&gt;&gt;&gt; ETree.tostring(myTree, pretty_print=True)\nb'&lt;root&gt;\\n  &lt;lambda&gt;1&lt;/lambda&gt;\\n&lt;/root&gt;\\n'\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 8929477, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gtGDVfnDDoE/AAAAAAAAAAI/AAAAAAAAAVE/XPl0JmxfCr4/photo.jpg?sz=128", "display_name": "Braxvan", "link": "https://stackoverflow.com/users/8929477/braxvan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 468, "favorite_count": 0, "accepted_answer_id": 50613218, "answer_count": 1, "score": 1, "last_activity_date": 1527713672, "creation_date": 1527713435, "question_id": 50613165, "link": "https://stackoverflow.com/questions/50613165/python-lxml-prevent-less-than-or-greater-from-being-converted-to-lt-and-gt", "title": "Python lxml prevent less than &lt; or greater &gt; from being converted to &amp;lt and &amp;gt", "body": "<p>I am using lxml to generate a large XML file.  One of the tags used in the file is \"lambda\" so I cannot define it as I normally would. (and no, I cannot change the name of the tag)</p>\n\n<p>Code:  </p>\n\n<pre><code>import lxml.etree as ETree\nimport lxml.builder as lxmlBuilder\n\nE = lxmlBuilder.ElementMaker()\nroot = E.root\nlbd = E.lambda  #error since lambda is reserved\n\nmyTree = root(\n     lbd('1')\n    )\n\nprint ETree.tostring(myTree, pretty_print=True)\n</code></pre>\n\n<p>Intended Result:</p>\n\n<pre><code>&lt;root&gt;\n    &lt;lambda&gt;1&lt;/lambda&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>Since this is the case, I just wanted to enter the \"lambda\" tags manually.  However, when I try to do this, the \"less than\" or \"greater than\" symbols around \"lambda\" are converted to &amp;lt and &amp;gt.\nCode:</p>\n\n<pre><code>E = lxmlBuilder.ElementMaker()\nroot = E.root\nlbd = \"&lt;lambda&gt;%f&lt;/lambda&gt;\" % 1 #by hand\n\nmyTree = root(\n     lbd\n    )\n\nprint ETree.tostring(myTree, pretty_print=True)\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>&lt;root&gt;\n    &amp;lt;lambda&amp;gt;1.0000&amp;lt;/lambda&amp;gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>How can I prevent the &lt; and > symbols from being converted like this? </p>\n"}, {"tags": ["python", "python-3.x", "pandas", "numpy", "dataframe"], "comments": [{"owner": {"reputation": 2014, "user_id": 7480990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4d77695a75bd92bb2da36de7ae7d917?s=128&d=identicon&r=PG&f=1", "display_name": "tobsecret", "link": "https://stackoverflow.com/users/7480990/tobsecret"}, "edited": false, "score": 0, "creation_date": 1527713654, "post_id": 50613156, "comment_id": 88236289, "body": "Are the rows comments or otherwise would mess up the reading of your csv file?"}, {"owner": {"reputation": 851, "user_id": 6308318, "user_type": "registered", "profile_image": "https://graph.facebook.com/771828312918589/picture?type=large", "display_name": "Venkata Gogu", "link": "https://stackoverflow.com/users/6308318/venkata-gogu"}, "reply_to_user": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 1, "creation_date": 1527714085, "post_id": 50613156, "comment_id": 88236446, "body": "@ScottBoston, yes it worked as expected but, I need this skip rows to store in another file"}], "answers": [{"tags": [], "owner": {"reputation": 4722, "user_id": 1170207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b71f9d5ae0b1574cbd07efb7ae926f8?s=128&d=identicon&r=PG", "display_name": "Jan Christoph Terasa", "link": "https://stackoverflow.com/users/1170207/jan-christoph-terasa"}, "is_accepted": true, "score": 2, "last_activity_date": 1527829592, "last_edit_date": 1527829592, "creation_date": 1527713766, "answer_id": 50613233, "question_id": 50613156, "link": "https://stackoverflow.com/questions/50613156/save-skip-rows-in-pandas-read-csv/50613233#50613233", "title": "Save skip rows in pandas read csv", "body": "<pre><code>def write_skiprows(infile, skiprows, outfile='skiprows.csv')\n    maxrow = max(skiprows)\n    with open(infile, 'r') as f, open(outfile, 'w') as o:\n        for i, line in enumerate(f):\n            if i in skiprows:\n                o.write(line)\n            if i == maxrow:\n                return\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8202, "user_id": 4684861, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/z6Pf7.jpg?s=128&g=1", "display_name": "Mohamed Thasin ah", "link": "https://stackoverflow.com/users/4684861/mohamed-thasin-ah"}, "is_accepted": false, "score": -1, "last_activity_date": 1527722478, "last_edit_date": 1527722478, "creation_date": 1527722158, "answer_id": 50614547, "question_id": 50613156, "link": "https://stackoverflow.com/questions/50613156/save-skip-rows-in-pandas-read-csv/50614547#50614547", "title": "Save skip rows in pandas read csv", "body": "<p>try this,</p>\n\n<pre><code>df=pd.read_csv('input.csv')\nskiprows=[1,3,6]\ndf,df_skiprow=df.drop(skiprows),df.iloc[skiprows]\n#df_skiprow.to_csv('skiprows.csv',index=False)\n</code></pre>\n\n<p>Input:</p>\n\n<pre><code>    a    b\n0   1   c1\n1   2   c2\n2   3   c3\n3   4   c4\n4   5   c5\n5   6   c6\n6   7   c7\n7   8   c8\n8   9   c9\n9  10  c10\n</code></pre>\n\n<p>Output:\ndf</p>\n\n<pre><code>    a    b\n0   1   c1\n2   3   c3\n4   5   c5\n5   6   c6\n7   8   c8\n8   9   c9\n9  10  c10\n</code></pre>\n\n<p>df_skiprow</p>\n\n<pre><code>   a   b\n1  2  c2\n3  4  c4\n6  7  c7\n</code></pre>\n\n<p>Explanation:</p>\n\n<ol>\n<li>read whole file.</li>\n<li>split file by df and skiprow</li>\n<li>convert into seperate csv file.</li>\n</ol>\n"}], "owner": {"reputation": 851, "user_id": 6308318, "user_type": "registered", "profile_image": "https://graph.facebook.com/771828312918589/picture?type=large", "display_name": "Venkata Gogu", "link": "https://stackoverflow.com/users/6308318/venkata-gogu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 634, "favorite_count": 2, "accepted_answer_id": 50613233, "answer_count": 2, "score": 0, "last_activity_date": 1527829592, "creation_date": 1527713399, "last_edit_date": 1527713943, "question_id": 50613156, "link": "https://stackoverflow.com/questions/50613156/save-skip-rows-in-pandas-read-csv", "title": "Save skip rows in pandas read csv", "body": "<p>I have a list of <strong>skip rows</strong> ( say [1,5,10] --> row numbers) and when I passed this to <strong>pandas read_csv</strong>, it ignores those rows. But, I need to save these skipped rows in a different text file. </p>\n\n<p>I went through pandas read_csv documentation and few other articles, but have no idea how to save this into a text file.</p>\n\n<p>Example : </p>\n\n<p>Input file :</p>\n\n<pre><code>a,b,c\n# Some Junk to Skip 1\n4,5,6\n# Some junk to skip 2\n9,20,9\n2,3,4\n5,6,7\n</code></pre>\n\n<p>Code :</p>\n\n<pre><code>skiprows = [1,3]\ndf = pandas.read_csv(file, skip_rows = skiprows)\n</code></pre>\n\n<p>Now output.txt :</p>\n\n<pre><code># Some junk to skip 1\n# Some junk to skip 2\n</code></pre>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "is_accepted": true, "score": 0, "last_activity_date": 1527715754, "last_edit_date": 1527715754, "creation_date": 1527714177, "answer_id": 50613325, "question_id": 50613151, "link": "https://stackoverflow.com/questions/50613151/adding-columns-to-dataframe-from-other-dataframe-without-intersection/50613325#50613325", "title": "Adding columns to DataFrame from other DataFrame without intersection", "body": "<p>Using <strong><code>join</code></strong> with <strong><code>ffill</code></strong>:</p>\n\n<pre><code>df1.join(df2).ffill().astype(int)\n\n   A  B  C  D\n0  1  2  3  4\n1  1  2  3  4\n2  1  2  3  4\n3  1  2  3  4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 1, "last_activity_date": 1527715465, "creation_date": 1527715465, "answer_id": 50613551, "question_id": 50613151, "link": "https://stackoverflow.com/questions/50613151/adding-columns-to-dataframe-from-other-dataframe-without-intersection/50613551#50613551", "title": "Adding columns to DataFrame from other DataFrame without intersection", "body": "<p>You can <code>assign</code> with <code>pd.Series</code></p>\n\n<pre><code>df.assign(**df1.loc[0])\nOut[11]: \n   A  B  C  D\n0  1  2  3  4\n1  1  2  3  4\n2  1  2  3  4\n3  1  2  3  4\n</code></pre>\n"}], "owner": {"reputation": 1516, "user_id": 1066110, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0bad6cae65e50e5b492050132870645c?s=128&d=identicon&r=PG", "display_name": "Agus", "link": "https://stackoverflow.com/users/1066110/agus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 50613325, "answer_count": 2, "score": 1, "last_activity_date": 1527715754, "creation_date": 1527713370, "last_edit_date": 1527714216, "question_id": 50613151, "link": "https://stackoverflow.com/questions/50613151/adding-columns-to-dataframe-from-other-dataframe-without-intersection", "title": "Adding columns to DataFrame from other DataFrame without intersection", "body": "<p>I have on Dataframe with diff size and columns, I require to add the columns from one DataFrame to another, and fulfill with same data all rows.</p>\n\n<p>for instance:\none of them: </p>\n\n<pre><code>   Out[48]: \n       A  B\n    0  1  2\n    1  1  2\n    2  1  2\n    3  1  2\n</code></pre>\n\n<p>and the other</p>\n\n<pre><code>Out[49]: \n   C  D\n0  3  4\n</code></pre>\n\n<p>I want to have a new one as:</p>\n\n<pre><code>   A  B C D\n0  1  2 3 4\n1  1  2 3 4\n2  1  2 3 4\n3  1  2 3 4\n</code></pre>\n\n<p>Is it possible? </p>\n"}, {"tags": ["python", "python-3.x", "tkinter", "drag-and-drop"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1527714063, "post_id": 50613147, "comment_id": 88236432, "body": "Are you trying to allow dragging objects to menu items? Or trying to handle two mice with separate cursors, where one is dragging an object and the other is pulling down a menu? Or trying to do keyboard menu navigation while the mouse is dragging an object? Or\u2026?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1527714492, "post_id": 50613147, "comment_id": 88236600, "body": "Anyway, the answer is probably going to be the same for almost any answer. Tkinter is just a wrapper around Tk, which ultimately relies on your OS/window system for a lot of functionality. Anything that didn&#39;t make sense for a cross-platform abstraction in Tk 8.0 (that is, Classic Mac, Motif, and Windows 95) is probably not going to be there. And back in 1997, 2/3 of those platforms had menus that took over the entire event loop, and the lowest common denominator for drag&amp;drop was very, very low. So I wouldn&#39;t be surprised if whatever it is you want is impossible."}], "owner": {"reputation": 1, "user_id": 9872383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eca2a602bf98eef21cabbf445899722?s=128&d=identicon&r=PG&f=1", "display_name": "A. Regier", "link": "https://stackoverflow.com/users/9872383/a-regier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 134, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570194598, "creation_date": 1527713316, "last_edit_date": 1570194598, "question_id": 50613147, "link": "https://stackoverflow.com/questions/50613147/python-3-x-tkinter-drag-and-drop-preventing-menu-from-being-clickable", "title": "Python 3.x tkinter Drag and Drop preventing menu from being clickable?", "body": "<p>Something about the drop_target_register() method seems to disable clicking the menubar until a file is dropped into the drop target. I would like to have the menubar functional regardless of whether or not there is a file in the drag and drop.</p>\n\n<p>I'm running Python 3.6.4, and this is a simple tidbit of code that displays the problem.</p>\n\n<pre><code>from tkinter import *\nfrom TkinterDnD2 import *\n\ndef drop(event):\n    entry_sv.set(event.data)\n\nroot = TkinterDnD.Tk()\n\nmenubar = Menu(root)\n\nmenu = Menu(menubar, tearoff=0)\nmenu.add_command(label=\"Exit\", command=root.quit)\nmenubar.add_cascade(label=\"File\", menu=menu)\n\nroot.config(menu=menubar)\n\nentry_sv = StringVar()\nentry_sv.set('Drop Here...')\nentry = Entry(root, textvar=entry_sv)\nentry.pack(fill=X)\nentry.drop_target_register(DND_FILES)\nentry.dnd_bind('&lt;&lt;Drop&gt;&gt;', drop)\n\nroot.mainloop()\n</code></pre>\n\n<p>In PyCharm 'drop_target_register' and 'dnd_bind' both display the message:</p>\n\n<blockquote>\n  <p>\"Unresolved attribute reference 'drop_target_register' for class\n  'Entry' This inspection detects names that should resolve but don't.\n  Due to dynamic dispatch and duck typing, this is possible in a limited\n  but useful number of cases. Top-level and class-level items are\n  supported better than instance items.\"</p>\n</blockquote>\n\n<p>That said, the drag and drop works.</p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"tags": [], "owner": {"reputation": 1066, "user_id": 1212526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11badd2a99cfb8290ade0313673b5d5d?s=128&d=identicon&r=PG", "display_name": "Tan&#233; Tachyon", "link": "https://stackoverflow.com/users/1212526/tan%c3%a9-tachyon"}, "is_accepted": true, "score": 1, "last_activity_date": 1527713908, "creation_date": 1527713908, "answer_id": 50613272, "question_id": 50613146, "link": "https://stackoverflow.com/questions/50613146/write-a-program-that-finds-the-largest-element-in-a-list-of-numbers-and-switches/50613272#50613272", "title": "Write a program that finds the largest element in a list of numbers and switches index position with the last element", "body": "<p>Do you mean like this?</p>\n\n<pre><code>my_list = [5, 23, 6, 1, 8]\nmax_num = max(my_list)\nmax_num_idx = my_list.index(max_num)\nmy_list[max_num_idx], my_list[-1] = my_list[-1], my_list[max_num_idx]\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9843104"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21, "favorite_count": 0, "accepted_answer_id": 50613272, "answer_count": 1, "score": 1, "last_activity_date": 1527713908, "creation_date": 1527713315, "question_id": 50613146, "link": "https://stackoverflow.com/questions/50613146/write-a-program-that-finds-the-largest-element-in-a-list-of-numbers-and-switches", "title": "Write a program that finds the largest element in a list of numbers and switches index position with the last element", "body": "<pre><code>my_list = [5,23,6,1,8]\nmax_num = max(my_list)\nmax_num,  my_list[-1] = my_list[-1], max_num\nmy_list\nmy_list.insert(1,8)\nmy_list.remove(23)\nmy_list\n</code></pre>\n\n<p>My code works this way but essentially I'm asking if there's an easier way to write this or a way to write it that works universally for all lists so that I don't need to amend the code based on the numbers in the list or length of the list</p>\n"}, {"tags": ["python", "tensorflow", "pip", "gpu", "google-colaboratory"], "answers": [{"tags": [], "owner": {"reputation": 2194, "user_id": 4561409, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-Fp0Wp5c_Q-U/AAAAAAAAAAI/AAAAAAAABxo/7CH-TCX1kqU/photo.jpg?sz=128", "display_name": "Adnan Y", "link": "https://stackoverflow.com/users/4561409/adnan-y"}, "is_accepted": false, "score": 2, "last_activity_date": 1527741484, "creation_date": 1527741484, "answer_id": 50616738, "question_id": 50613139, "link": "https://stackoverflow.com/questions/50613139/does-google-colabs-gpu-work-with-tensorflow-1-0-0/50616738#50616738", "title": "Does google colab&#39;s GPU work with tensorflow 1.0.0?", "body": "<p>It would work, given it's just a nvidia-docker container (or probably something equivalent).</p>\n\n<p>Only that you will have to manually install the compatible CUDA, cuDNN and other packages.\nIt can be a hectic process and I have not personally tried it. Also, you are installing tensorflow package, which is not gpu enabled. Try the same command but with tensorflow-gpu i.e</p>\n\n<pre><code>!pip install tensorflow-gpu=1.0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11790147, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-RdshHgsFi5M/AAAAAAAAAAI/AAAAAAAAAB4/e-oa9pODBXw/photo.jpg?sz=128", "display_name": "Naitik Joshi", "link": "https://stackoverflow.com/users/11790147/naitik-joshi"}, "is_accepted": false, "score": 0, "last_activity_date": 1563256597, "creation_date": 1563256597, "answer_id": 57050864, "question_id": 50613139, "link": "https://stackoverflow.com/questions/50613139/does-google-colabs-gpu-work-with-tensorflow-1-0-0/57050864#57050864", "title": "Does google colab&#39;s GPU work with tensorflow 1.0.0?", "body": "<p>You need to change the cuda version to 8.... </p>\n\n<p>this removes the current version:</p>\n\n<pre><code>      !apt-get remove cuda\n      !apt-get autoremove cuda\n      !apt-get purge cuda\n      !apt-key del /var/cuda-repo-9-2-local/*.pub\n      !rm -rf /var/cuda-repo-8-0-local-ga2/\n</code></pre>\n\n<p>And now install the version 8:</p>\n\n<pre><code>     !sudo dpkg -i cuda-repo-ubuntu1604-8-0-local-ga2_8.0.61-1_amd64-deb\n     !sudo apt-get update\n     !sudo apt-get -y install cuda-8-0\n</code></pre>\n\n<p>And now install tensorflow gpu:</p>\n\n<pre><code>     !pip install tensorflow-gpu==1.0\n</code></pre>\n\n<p>make sure u have installed tf version 1.0.</p>\n\n<p>check it works:</p>\n\n<pre><code>    import tensorflow as tf\n    tf.test.gpu_device_name()\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 8104572, "user_type": "registered", "profile_image": "https://graph.facebook.com/1477134095677644/picture?type=large", "display_name": "Harkirat Singh", "link": "https://stackoverflow.com/users/8104572/harkirat-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2440, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1563256597, "creation_date": 1527713255, "question_id": 50613139, "link": "https://stackoverflow.com/questions/50613139/does-google-colabs-gpu-work-with-tensorflow-1-0-0", "title": "Does google colab&#39;s GPU work with tensorflow 1.0.0?", "body": "<p>when I checked the version of tensorflow in google colab notebook it was 1.8.0 which is pre-installed I guess.\nI enabled GPU from notebook settings and checked for it through this command</p>\n\n<pre><code>import tensorflow as tf\ndevice_name = tf.test.gpu_device_name()\nif device_name != '/device:GPU:0':\n  raise SystemError('GPU device not found')\nprint('Found GPU at: {}'.format(device_name))\n</code></pre>\n\n<p>it gave the desired output</p>\n\n<p>but I need tensorflow 1.0 for my code so I\n installed it using <code>!pip install tensorflow==1.0</code> it installed successfully but when i restarted the runtime and checked for GPU it gave the following error</p>\n\n<blockquote>\n  <p>SystemError: GPU device not found</p>\n</blockquote>\n\n<p>Did i miss something or is it with colab ?</p>\n"}, {"tags": ["python", "flask"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1527713299, "post_id": 50613119, "comment_id": 88236132, "body": "Well, in theory you could store the results in a session, just not the default Flask session. For example, see <a href=\"https://pythonhosted.org/Flask-Session/\" rel=\"nofollow noreferrer\">Flask-Session</a>. I do something similar and dump the result to a <code>&#39;filesystem&#39;</code> session but you could store pre-computed data in redis to make access fast."}, {"owner": {"reputation": 2951, "user_id": 9335964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/601ca67d53004283e6ee4f893597cfda?s=128&d=identicon&r=PG&f=1", "display_name": "Joost", "link": "https://stackoverflow.com/users/9335964/joost"}, "edited": false, "score": 0, "creation_date": 1527714684, "post_id": 50613119, "comment_id": 88236660, "body": "It kind of depends on what data your storing, but if the data is not changing after calculating it, why not just write it to the hard drive or a database?"}, {"owner": {"reputation": 3, "user_id": 7392234, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sf7a3X--9pw/AAAAAAAAAAI/AAAAAAAAAco/gB-dn0vqPiI/photo.jpg?sz=128", "display_name": "Antonio", "link": "https://stackoverflow.com/users/7392234/antonio"}, "reply_to_user": {"reputation": 2951, "user_id": 9335964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/601ca67d53004283e6ee4f893597cfda?s=128&d=identicon&r=PG&f=1", "display_name": "Joost", "link": "https://stackoverflow.com/users/9335964/joost"}, "edited": false, "score": 0, "creation_date": 1527799410, "post_id": 50613119, "comment_id": 88275198, "body": "@Joost, thanks. The data is the pandas dataframe that is calculated based on different inputs (keywords) and is different in different point of time"}, {"owner": {"reputation": 3, "user_id": 7392234, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sf7a3X--9pw/AAAAAAAAAAI/AAAAAAAAAco/gB-dn0vqPiI/photo.jpg?sz=128", "display_name": "Antonio", "link": "https://stackoverflow.com/users/7392234/antonio"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1527799565, "post_id": 50613119, "comment_id": 88275264, "body": "@roganjosh, thanks! let me try it and get back to you"}, {"owner": {"reputation": 2951, "user_id": 9335964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/601ca67d53004283e6ee4f893597cfda?s=128&d=identicon&r=PG&f=1", "display_name": "Joost", "link": "https://stackoverflow.com/users/9335964/joost"}, "edited": false, "score": 0, "creation_date": 1527803214, "post_id": 50613119, "comment_id": 88276738, "body": "You could just write the df as e.g. a .csv or a pickle, the question remains how do you know the df has to be updated/recalculated. But with either storing the df in the session or on the harddrive, that problem remains the same."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7392234, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sf7a3X--9pw/AAAAAAAAAAI/AAAAAAAAAco/gB-dn0vqPiI/photo.jpg?sz=128", "display_name": "Antonio", "link": "https://stackoverflow.com/users/7392234/antonio"}, "edited": false, "score": 0, "creation_date": 1527799634, "post_id": 50615237, "comment_id": 88275288, "body": "thanks! Let me try it and get back here with results"}, {"owner": {"reputation": 3, "user_id": 7392234, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sf7a3X--9pw/AAAAAAAAAAI/AAAAAAAAAco/gB-dn0vqPiI/photo.jpg?sz=128", "display_name": "Antonio", "link": "https://stackoverflow.com/users/7392234/antonio"}, "edited": false, "score": 0, "creation_date": 1528023765, "post_id": 50615237, "comment_id": 88341224, "body": "Thanks @Grey Li, I went with your suggestion, see the answer below. I can&#39;t upvote your answer since I don&#39;t have enough reputation yet!"}, {"owner": {"reputation": 7730, "user_id": 5511849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ggmzY.png?s=128&g=1", "display_name": "Grey Li", "link": "https://stackoverflow.com/users/5511849/grey-li"}, "reply_to_user": {"reputation": 3, "user_id": 7392234, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sf7a3X--9pw/AAAAAAAAAAI/AAAAAAAAAco/gB-dn0vqPiI/photo.jpg?sz=128", "display_name": "Antonio", "link": "https://stackoverflow.com/users/7392234/antonio"}, "edited": false, "score": 0, "creation_date": 1528071112, "post_id": 50615237, "comment_id": 88353865, "body": "You are welcome! If you think my answer is helpful, you can accept it :)"}], "tags": [], "owner": {"reputation": 7730, "user_id": 5511849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ggmzY.png?s=128&g=1", "display_name": "Grey Li", "link": "https://stackoverflow.com/users/5511849/grey-li"}, "is_accepted": true, "score": 0, "last_activity_date": 1527728432, "creation_date": 1527728432, "answer_id": 50615237, "question_id": 50613119, "link": "https://stackoverflow.com/questions/50613119/how-to-construct-multiple-routes-and-rendered-templates-that-are-using-the-same/50615237#50615237", "title": "How to construct multiple routes and rendered templates that are using the same function in Flask", "body": "<p>In your case, I recommend you to add caching support for the <code>perform_heavy_calculations()</code> function. Check out <a href=\"https://flask-caching.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">Flask-Caching</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 7392234, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sf7a3X--9pw/AAAAAAAAAAI/AAAAAAAAAco/gB-dn0vqPiI/photo.jpg?sz=128", "display_name": "Antonio", "link": "https://stackoverflow.com/users/7392234/antonio"}, "is_accepted": false, "score": 0, "last_activity_date": 1528023698, "creation_date": 1528023698, "answer_id": 50665663, "question_id": 50613119, "link": "https://stackoverflow.com/questions/50613119/how-to-construct-multiple-routes-and-rendered-templates-that-are-using-the-same/50665663#50665663", "title": "How to construct multiple routes and rendered templates that are using the same function in Flask", "body": "<p>I went with using cache vs session since it allowed to store the results for the different users and different keywords. Below is the simplified code that I used. </p>\n\n<pre><code>dataframe = cache.get(keyword)\n    if dataframe is None:\n        dataframe = perform_heavy_calculations (keyword)\n    cache.set(keyword, dataframe, timeout=60 * 60)\n</code></pre>\n\n<p>This can be used across multiple views and functions.<br>\nThanks all a ton for your help!</p>\n\n<p>Anton</p>\n"}], "owner": {"reputation": 3, "user_id": 7392234, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sf7a3X--9pw/AAAAAAAAAAI/AAAAAAAAAco/gB-dn0vqPiI/photo.jpg?sz=128", "display_name": "Antonio", "link": "https://stackoverflow.com/users/7392234/antonio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 496, "favorite_count": 0, "accepted_answer_id": 50615237, "answer_count": 2, "score": 0, "last_activity_date": 1528023698, "creation_date": 1527713174, "question_id": 50613119, "link": "https://stackoverflow.com/questions/50613119/how-to-construct-multiple-routes-and-rendered-templates-that-are-using-the-same", "title": "How to construct multiple routes and rendered templates that are using the same function in Flask", "body": "<p>I'm building a web app using Flask, where multiple routes and templates are using the same function that requires heavy computation. So, the app ends up with repeating these heavy calculations multiple times. Below is the simplified code: </p>\n\n<pre><code>from flask import Flask, render_template, request, session, url_for, Markup, send_from_directory\nfrom AnotherModule import perform_heavy_calculations, convert_dataframe\n\n@application.route('/&lt;string:keyword&gt;', methods=['GET'])\ndef index(keyword):\n    dataframe = perform_heavy_calculations (keyword)\n    session['keyword'] = keyword\n    return render_template (\"index.html\", dataframe = dataframe)\n\n\n@application.route(\"/timeseries.json\", methods=['GET'])\ndef timeseries (keyword):\n     keyword = session.get ('keyword')\n     dataframe = perform_heavy_calculations (keyword)\n     timeseries =  convert_dataframe (dataframe)\n     return render_template (\"timeseries.html\", timeseries = timeseries)\n\nif __name__ == '__main__':\n    application.run(debug=True, threaded=True)\n</code></pre>\n\n<p>As you can see, the function perform_heavy_calculations (keyword) is repeated twice - once in every route. This makes the app very slow. In this case two times slower then if this function were performed once and the results are used in two different routes with rendering different templates. \nI can't pass the results in session since the dataframe is too large. \nAlso, I can't perform the function outside of routes, since the argument (keyword) will be passed only with get request submitted in '/' route. </p>\n\n<p>What would be the best way to avoid performing the function twice, but perform it only once with the result being used in two different templates?</p>\n\n<p>Thank you, </p>\n\n<p>Anton</p>\n"}, {"tags": ["python", "selenium", "web-scraping", "web-crawler"], "comments": [{"owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "edited": false, "score": 0, "creation_date": 1527713425, "post_id": 50613071, "comment_id": 88236186, "body": "<a href=\"https://www.cashpoint.dk/en/site/index.html\" rel=\"nofollow noreferrer\">cashpoint.dk/en/site/index.html</a> has a listing of the games and their odds, but it seems you are also trying to scrape information from pages accessible by clicking an element from the sidebar. If that is so, what pages are those?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2939562"}, "reply_to_user": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "edited": false, "score": 0, "creation_date": 1527713724, "post_id": 50613071, "comment_id": 88236320, "body": "Hey Ajax. Exactly! The pages are looking like the following. There&#39;s a lot. It&#39;s webcrawled with bucky&#39;s spider: <a href=\"https://www.cashpoint.dk/en/bets/xtra.html?group=461392&amp;game=312004790\" rel=\"nofollow noreferrer\">cashpoint.dk/en/bets/xtra.html?group=461392&amp;game=312004790</a>,  <a href=\"https://www.cashpoint.dk/en/bets/xtra.html?group=461392&amp;game=312004791\" rel=\"nofollow noreferrer\">cashpoint.dk/en/bets/xtra.html?group=461392&amp;game=312004791</a>, <a href=\"https://www.cashpoint.dk/en/bets/xtra.html?group=461392&amp;game=312004792\" rel=\"nofollow noreferrer\">cashpoint.dk/en/bets/xtra.html?group=461392&amp;game=312004792</a>, <a href=\"https://www.cashpoint.dk/en/bets/xtra.html?group=461392&amp;game=312004793\" rel=\"nofollow noreferrer\">cashpoint.dk/en/bets/xtra.html?group=461392&amp;game=312004793</a>, <a href=\"https://www.cashpoint.dk/en/bets/xtra.html?group=461392&amp;game=312004794\" rel=\"nofollow noreferrer\">cashpoint.dk/en/bets/xtra.html?group=461392&amp;game=312004794</a>, <a href=\"https://www.cashpoint.dk/en/bets/xtra.html?group=461392&amp;game=312004795\" rel=\"nofollow noreferrer\">cashpoint.dk/en/bets/xtra.html?group=461392&amp;game=312004795</a>"}], "owner": {"user_type": "does_not_exist", "display_name": "user2939562"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 534, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1527743602, "creation_date": 1527712993, "last_edit_date": 1527743602, "question_id": 50613071, "link": "https://stackoverflow.com/questions/50613071/webscrape-soccer-odds-how-would-you-approach-this-project", "title": "Webscrape soccer odds, how would you approach this project?", "body": "<p>How would you as a skilled programmer approach a project on webscraping a site for all it's soccer odds?</p>\n\n<p>I am trying to create a web scraper &amp; crawler for a friend to analyze the odds from all www.cashpoint.com's soccer leagues. </p>\n\n<p>As a new programmer, I now realize this task is bigger than I thought. The site contains javascript and there are more than just one site to scrape. \nI've become semi-familiar with python 3, web scraping and web crawling by following tutorials on youtube and made some small simple webscrapers. \nI'd like to ask a more skilled programmer how you would approach this project on making a program that scrapes all the soccer matches and then saves the info to a database. </p>\n\n<p>I was thinking about web crawling through <a href=\"https://www.cashpoint.com\" rel=\"nofollow noreferrer\">https://www.cashpoint.com</a> and gather the links for the sites that contains the odds. I'd use bucky's spider to do this: <a href=\"https://github.com/buckyroberts/Spider\" rel=\"nofollow noreferrer\">https://github.com/buckyroberts/Spider</a>.\nAfter collecting the links I'd web scrape the pages using Selenium and xpath and store the info to a database. I've been looking at gingeleski's source code (<a href=\"https://github.com/gingeleski/odds-portal-scraper\" rel=\"nofollow noreferrer\">https://github.com/gingeleski/odds-portal-scraper</a>\n) which does exactly this, just from another website. Basically you put links into a document and it'll scrape the odds and extract into a mysql database.\nAnother approach I thought about was to iterate through the leagues through seleniums webdriver:\n<strong><em>example to click the left menu bar.</em></strong></p>\n\n<pre><code>webdriver.Chrome(chromedriver)\ndriver.get('https://www.cashpoint.dk/en/site/index.html')\ndriver.find_element_by_id('left_menu_sports_id1008').click()\n</code></pre>\n\n<p>and then store this information to a database. </p>\n\n<p>I'd love to hear and learn from a programmer how you would approach this project. </p>\n\n<p>Thank you so much for reading this! </p>\n\n<p>Regards from Christian </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1912, "user_id": 4691830, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-lqbwtD6n1nc/AAAAAAAAAAI/AAAAAAAAABg/vE8KR-oSqqE/photo.jpg?sz=128", "display_name": "Joooeey", "link": "https://stackoverflow.com/users/4691830/joooeey"}, "edited": false, "score": 0, "creation_date": 1527715393, "post_id": 50613021, "comment_id": 88236930, "body": "Does <code>plt.plot(x, y)</code> show what you expect? To me it looks like the problem is in the data."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9872565, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "NHToledo", "link": "https://stackoverflow.com/users/9872565/nhtoledo"}, "edited": false, "score": 1, "creation_date": 1527721212, "post_id": 50613335, "comment_id": 88238652, "body": "Thanks. I think my issue is probably more mathematical than technical. I&#39;m leaving too many parameters undefined to get a meaningful fit. But your suggestion helped me see that. Thanks!"}], "tags": [], "owner": {"reputation": 12178, "user_id": 1388292, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/mfJ7p.jpg?s=128&g=1", "display_name": "Jacques Gaudin", "link": "https://stackoverflow.com/users/1388292/jacques-gaudin"}, "is_accepted": false, "score": 1, "last_activity_date": 1527716296, "last_edit_date": 1527716296, "creation_date": 1527714253, "answer_id": 50613335, "question_id": 50613021, "link": "https://stackoverflow.com/questions/50613021/difficulty-with-python-scipy-optimize-curve-fitting-optimal-parameters-not-foun/50613335#50613335", "title": "Difficulty with Python scipy.optimize curve fitting: Optimal parameters not found: Number of calls to function has reached maxfev = 1000", "body": "<p>Why not increasing <code>maxfev</code> to 1e6?</p>\n\n<pre><code>print(curve_fit(powerlaw, x, y, maxfev=1000000))\n</code></pre>\n\n<p>gives:</p>\n\n<pre><code>(array([ 7.56848833e-80,  3.07781530e+01, -4.06201617e+02,  3.43443918e+01]),\n array([[ 7.35597960e-150, -1.37675497e-071,  1.91624708e-070, 4.08767916e-073],\n        [-1.37675497e-071,  2.57675332e+007, -3.58647084e+008, -7.65034124e+005],\n        [ 1.91624707e-070, -3.58647083e+008,  4.99188464e+009, 1.06502882e+007],\n        [ 4.08767868e-073, -7.65034033e+005,  1.06502870e+007, 2.28543208e+004]]))\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9872565, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "NHToledo", "link": "https://stackoverflow.com/users/9872565/nhtoledo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2255, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1527716296, "creation_date": 1527712760, "last_edit_date": 1527713407, "question_id": 50613021, "link": "https://stackoverflow.com/questions/50613021/difficulty-with-python-scipy-optimize-curve-fitting-optimal-parameters-not-foun", "title": "Difficulty with Python scipy.optimize curve fitting: Optimal parameters not found: Number of calls to function has reached maxfev = 1000", "body": "<p>I'm having what I hope is an easy to correct issue with finding the parameters to a power law. I'm getting what looks to be a common error when using curve_fit, but haven't had success circumventing it with suggested solutions.</p>\n\n<p>The error is:</p>\n\n<pre><code>Optimal parameters not found: Number of calls to function has reached maxfev = 1000.\n</code></pre>\n\n<p>Below is the data and powerlaw function I'm using. I was hoping someone might know what direction to point me.</p>\n\n<pre><code>import matplotlib.pyplot as plt\n\nimport numpy as np\n\nfrom scipy.optimize import curve_fit\n\n\ndef powerlaw(x, amp, ex, x0, y0):\n    return (amp * np.power((x-x0),ex) + y0)\n\n\nx = np.array([  2.5       ,   3.51778656,   4.53557312,   4.55335968,\n         5.57114625,   5.58893281,   5.60671937,   5.62450593,\n         5.64229249,   8.66007905,   8.67786561,   9.69565217,\n         9.71343874,   9.7312253 ,  10.74901186,  10.76679842,\n        10.78458498,  11.80237154,  11.8201581 ,  11.83794466,\n        11.85573123,  11.87351779,  12.89130435,   3.5       ,\n         3.48221344,   4.46442688,   4.44664032,   5.42885375,\n         5.41106719,   6.39328063,   6.37549407,   6.35770751,\n         6.33992095,   7.32213439,   8.30434783,   9.28656126,\n        11.2687747 ,  11.25098814,  11.23320158,  11.21541502,\n        11.19762846,  11.1798419 ,  12.16205534,  12.14426877,\n        12.12648221,  13.10869565])\n\ny = np.array([52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68,\n       69, 70, 71, 72, 73, 74, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62,\n       63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74])\n\nprint(curve_fit(powerlaw, x, y, maxfev=1000))\n</code></pre>\n"}, {"tags": ["python", "c++", "swig"], "comments": [{"owner": {"reputation": 183, "user_id": 6317020, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh4.googleusercontent.com/-Z8aCfSFeyrY/AAAAAAAAAAI/AAAAAAAAC3s/PJ25l9b83jw/photo.jpg?sz=128", "display_name": "Jake Steele", "link": "https://stackoverflow.com/users/6317020/jake-steele"}, "edited": false, "score": 0, "creation_date": 1527714962, "post_id": 50613010, "comment_id": 88236771, "body": "Have you thought about serializing it in JSON or xml and then using a constructor to build the object in python?"}, {"owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "reply_to_user": {"reputation": 183, "user_id": 6317020, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh4.googleusercontent.com/-Z8aCfSFeyrY/AAAAAAAAAAI/AAAAAAAAC3s/PJ25l9b83jw/photo.jpg?sz=128", "display_name": "Jake Steele", "link": "https://stackoverflow.com/users/6317020/jake-steele"}, "edited": false, "score": 0, "creation_date": 1527715178, "post_id": 50613010, "comment_id": 88236845, "body": "nope. My goal is to be able to share the memory for the object, so no copying should be needed."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1527778707, "post_id": 50613010, "comment_id": 88264543, "body": "There&#39;s no <code>pFunc</code> object in your snippets. It doesn&#39;t work that way. <code>myObject</code> must be a <b>valid</b> <code>PyObject</code> (which I don&#39;t think it is - I can&#39;t be sure until I see <code>MyObject</code>&#39;s definition). <i>&quot;The C++ class have already been wrapped using swig&quot;</i>: then I don&#39;t think that you should be required to write this  <i>C</i> code."}, {"owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "edited": false, "score": 0, "creation_date": 1527783454, "post_id": 50613010, "comment_id": 88267329, "body": "Thanks CristiFati, In this question, the python interpreter is embedded in a C++ application, and so the python function above is called from C/C++.  The MyObject is an empty &quot;demo&quot; C++ class, and its internals is irrelevant. Its only used for getting the concept right, concept being, as stated in the title, &quot;how to pass a C++ object to Python?&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1527975585, "post_id": 50650532, "comment_id": 88332836, "body": "This is pretty much the answer. You should be able to write <code>SWIG_TypeQuery(&quot;MyClass *&quot;)</code> though if you prefer."}, {"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1527976051, "post_id": 50650532, "comment_id": 88332926, "body": "What I might be tempted to do though would be make <code>execute</code> &#39;find&#39; the <code>obj</code> instance via a wrapped C++ function instead of as an argument though, e.g. it calls <code>api.getInstance()</code>, where <code>api</code> is provided through the <code>PyImport_AppendInittab()</code>."}, {"owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "reply_to_user": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1528394505, "post_id": 50650532, "comment_id": 88502580, "body": "Thanks Flexo, Perhaps inclusion of swig wrapper header not too bad. and the ability to query the type using your sueggestion, with &quot;MyClass *&quot; removes the necessity to having to look inside the swig wrapper code, which is a big improvement, imo. Not sure how to use the AppendInittab technique."}], "tags": [], "owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "is_accepted": false, "score": 9, "last_activity_date": 1527889725, "last_edit_date": 1527889725, "creation_date": 1527884495, "answer_id": 50650532, "question_id": 50613010, "link": "https://stackoverflow.com/questions/50613010/passing-a-c-object-to-python/50650532#50650532", "title": "Passing a C++ object to Python", "body": "<p>This is a partial answer to my own question. I'm saying partial, because I do believe there is a better way.</p>\n\n<p>Building on this post <a href=\"http://swig.10945.n7.nabble.com/Pass-a-Swig-wrapped-C-class-to-embedded-Python-code-td8812.html\" rel=\"noreferrer\">http://swig.10945.n7.nabble.com/Pass-a-Swig-wrapped-C-class-to-embedded-Python-code-td8812.html</a>\nI generated the swig runtime header, as described here, section 15.4: <a href=\"http://www.swig.org/Doc2.0/Modules.html#Modules_external_run_time\" rel=\"noreferrer\">http://www.swig.org/Doc2.0/Modules.html#Modules_external_run_time</a></p>\n\n<p>Including the generated header in the C++ code above, allow the following code to be written:</p>\n\n<pre><code>    PyObject* pObj = SWIG_NewPointerObj((void*)&amp;obj, SWIG_TypeQuery(\"_p_MyClass\"),  0 ); \n</code></pre>\n\n<p>This code is using information from the Swig python wrap source files, namely the \"swig\" name of the type MyClass, i.e. <em>_p_MyClass</em>.</p>\n\n<p>With the above PyObject* as an argument to the  PyObject_CallObject function, the python <strong>execute()</strong> function in the code above executes fine, and the Python code, using the generated python module, do have proper access to the MyClass objects internal data. This is great.</p>\n\n<p>Although the above code illustrate how to pass, and retrieve data between C++ and Python in a quite simple fashion, its not ideal, in my opinion.</p>\n\n<p>The usage of the swig header file in the C++ code is really not that pretty, and in addition, it requires a user to \"manually\" look into swig generated wrapper code in order to find the \"_p_MyClass\" code. </p>\n\n<p>There must be a better way!? Perhaps something should be added to the swig interface file in order to get this looking nicer?</p>\n"}, {"comments": [{"owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "edited": false, "score": 0, "creation_date": 1528394608, "post_id": 50738937, "comment_id": 88502629, "body": "Curious, whats pInstance, x and &quot;add&quot;?"}], "tags": [], "owner": {"reputation": 9, "user_id": 9908265, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/9b17bce13c3f330efb245330a9f0fdf4?s=128&d=identicon&r=PG", "display_name": "PewDie", "link": "https://stackoverflow.com/users/9908265/pewdie"}, "is_accepted": false, "score": -1, "last_activity_date": 1528370121, "last_edit_date": 1528370121, "creation_date": 1528367256, "answer_id": 50738937, "question_id": 50613010, "link": "https://stackoverflow.com/questions/50613010/passing-a-c-object-to-python/50738937#50738937", "title": "Passing a C++ object to Python", "body": "<pre><code>PyObject *pValue;\npValue = PyObject_CallMethod(pInstance, \"add\",\"(i)\",x);\nif (pValue)\n    Py_DECREF(pValue);\nelse\n    PyErr_Print();\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 316, "user_id": 7060174, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Zr5jg8G2l70/AAAAAAAAAAI/AAAAAAAAABQ/kPPYahW1Dxk/photo.jpg?sz=128", "display_name": "Mosolov Sergey", "link": "https://stackoverflow.com/users/7060174/mosolov-sergey"}, "edited": false, "score": 0, "creation_date": 1613468255, "post_id": 65704334, "comment_id": 117077430, "body": "give a try to <code>SWIG_TypeQuery(&quot;MyClass *&quot;)</code> if you want to export a pointer to a class MyClass"}], "tags": [], "owner": {"reputation": 921, "user_id": 2043980, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17e881e92b245bcb71fe579f34acb1b0?s=128&d=identicon&r=PG", "display_name": "Demaunt", "link": "https://stackoverflow.com/users/2043980/demaunt"}, "is_accepted": false, "score": 0, "last_activity_date": 1610549536, "creation_date": 1610549536, "answer_id": 65704334, "question_id": 50613010, "link": "https://stackoverflow.com/questions/50613010/passing-a-c-object-to-python/65704334#65704334", "title": "Passing a C++ object to Python", "body": "<p>Unfortunatle it does not work in my case.\nI get nullptr exception inside <code>SWIG_TypeQuery(&quot;_p_MyClass&quot;)</code> macros.</p>\n<p>Could you please share more details how to do such passing?</p>\n<ol>\n<li>I have MyClass library</li>\n<li>Based on this library I created module using swig</li>\n<li>Next I created swigpyrun.h file using -external-runtime</li>\n<li>I included this file into my main.cpp, and SWIG_TypeQuery(&quot;_p_MyClass&quot;) gives an error</li>\n</ol>\n<p>I even tried to add definitions like SWIG_TYPE_TABLE, but it did not help.</p>\n<p>BTW I am using MSVS compilter</p>\n"}], "owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2954, "favorite_count": 5, "answer_count": 3, "score": 31, "last_activity_date": 1610549536, "creation_date": 1527712699, "last_edit_date": 1529696734, "question_id": 50613010, "link": "https://stackoverflow.com/questions/50613010/passing-a-c-object-to-python", "title": "Passing a C++ object to Python", "body": "<p>This question is about <em>how to pass a C++ object to a python function that is called in a (C++) embedded Python interpreter</em>. </p>\n\n<p>The following C++ class (MyClass.h) is designed for testing:</p>\n\n<pre><code>#ifndef MyClassH\n#define MyClassH\n#include &lt;string&gt;\n\nusing std::string;\nclass MyClass\n{\n    public:\n                        MyClass(const string&amp; lbl): label(lbl) {}\n                        ~MyClass(){}\n        string          getLabel() {return label;}\n\n    private:\n        string          label;\n};\n#endif\n</code></pre>\n\n<p>A python module, exposing the C++ class, can be generated by the following Swig interface file:</p>\n\n<pre><code>%module passmetopython\n\n%{    #include \"MyClass.h\"    %}\n\n%include \"std_string.i\"\n\n//Expose to Python\n%include \"MyClass.h\"\n</code></pre>\n\n<p>Below is a Python script using the python module</p>\n\n<pre><code>import passmetopython as pmtp\n\ndef execute(obj):\n    #This function is to be called from C/C++, with a\n    #MyClass object as an argument\n    print (\"Entering execute function\")\n    lbl = obj.getLabel();\n    print (\"Printing from within python execute function. Object label is: \" + lbl)\n    return True\n\ndef main():\n    c = pmtp.MyClass(\"Test 1\")\n    retValue = execute(c)\n    print(\"Return value: \" + str(retValue))\n\n#Test function from within python\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>This question is about how to get the python <em>execute()</em> function working, when called from c++, with a C++ object as an argument.</p>\n\n<p>The following C++ program was written to test the functions (minimum amount of error checking):</p>\n\n<pre><code>#include \"Python.h\"\n#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include \"MyClass.h\"\n\nusing namespace std;\n\nint main()\n{\n    MyClass obj(\"In C++\");\n    cout &lt;&lt; \"Object label: \\\"\" &lt;&lt; obj.getLabel() &lt;&lt; \"\\\"\" &lt;&lt; endl;\n\n    //Setup the Python interpreter and eventually call the execute function in the\n    //demo python script\n    Py_Initialize();\n\n    //Load python Demo script, \"passmetopythonDemo.py\"\n    string PyModule(\"passmetopythonDemo\");\n    PyObject* pm = PyUnicode_DecodeFSDefault(PyModule.c_str());\n\n    PyRun_SimpleString(\"import sys\");\n    stringstream cmd;\n    cmd &lt;&lt; \"sys.path.append(\\\"\" &lt;&lt; \".\" &lt;&lt; \"\\\")\";\n    PyRun_SimpleString(cmd.str().c_str());\n    PyObject* PyModuleP = PyImport_Import(pm);\n    Py_DECREF(pm);\n\n    //Now create PyObjects for the Python functions that we want to call\n    PyObject* pFunc = PyObject_GetAttrString(PyModuleP, \"execute\");\n\n    if(pFunc)\n    {\n        //Setup argument\n        PyObject* pArgs = PyTuple_New(1);\n\n        //Construct a PyObject* from long\n        PyObject* pObj(NULL);\n\n        /* My current attempt to create avalid argument to Python */\n        pObj = PyLong_FromLong((long) &amp;obj);\n\n\n        PyTuple_SetItem(pArgs, 0, pObj);\n\n        /***** Calling python here *****/\n        cout&lt;&lt;endl&lt;&lt;\"Calling function with an MyClass argument\\n\\n\";\n        PyObject* res = PyObject_CallObject(pFunc, pArgs);\n        if(!res)\n        {\n            cerr &lt;&lt; \"Failed calling function..\";\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>When running the above code, the <strong>execute()</strong> python function, with a MyClass object as an argument, fails and returns NULL. However, the Python function is entered, as I can see the output (<em>Entering execute function</em>) in the console output, indicating that the object passed is not, <strong>indeed</strong>, a valid MyClass object.</p>\n\n<p>There are a lot of examples on how to pass simple types, like ints, doubles or string types to Python from C/C++. But there are very few example showing how to pass a C/C++ object/ pointer, which is kind of puzzling.</p>\n\n<p>The above code, with a CMake file, can be checked out from github: \n<a href=\"https://github.com/TotteKarlsson/miniprojects/tree/master/passMeToPython\" rel=\"nofollow noreferrer\">https://github.com/TotteKarlsson/miniprojects/tree/master/passMeToPython</a></p>\n\n<p>This code is not to use any boost python or other API's. Cython sounds interesting though, and if it can be used to simplify on the C++ side, it could be acceptable.</p>\n"}, {"tags": ["python", "pdf"], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 4459497, "user_type": "registered", "profile_image": "https://graph.facebook.com/1437436748/picture?type=large", "display_name": "Bob Maiers", "link": "https://stackoverflow.com/users/4459497/bob-maiers"}, "edited": false, "score": 0, "creation_date": 1527713097, "post_id": 50613090, "comment_id": 88236061, "body": "Yes  That worked!  Needed to add &#39;import glob&#39; first, but it worked!  Thank you!!!"}, {"owner": {"reputation": 5314, "user_id": 5270581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/leDO2.jpg?s=128&g=1", "display_name": "Laurent H.", "link": "https://stackoverflow.com/users/5270581/laurent-h"}, "reply_to_user": {"reputation": 121, "user_id": 4459497, "user_type": "registered", "profile_image": "https://graph.facebook.com/1437436748/picture?type=large", "display_name": "Bob Maiers", "link": "https://stackoverflow.com/users/4459497/bob-maiers"}, "edited": false, "score": 0, "creation_date": 1527713709, "post_id": 50613090, "comment_id": 88236308, "body": "Cool. I added the <code>import glob</code> in my answer. If OK for you, you can accept it."}], "tags": [], "owner": {"reputation": 5314, "user_id": 5270581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/leDO2.jpg?s=128&g=1", "display_name": "Laurent H.", "link": "https://stackoverflow.com/users/5270581/laurent-h"}, "is_accepted": false, "score": 3, "last_activity_date": 1527713620, "last_edit_date": 1527713620, "creation_date": 1527713044, "answer_id": 50613090, "question_id": 50612962, "link": "https://stackoverflow.com/questions/50612962/separate-all-multipage-pdf-files-inside-a-directory-into-single-page-pdfs-via-py/50613090#50613090", "title": "Separate all multipage PDF files inside a directory into single page PDFs via Python", "body": "<p>I suggest you the following solution:  </p>\n\n<pre><code>import glob\n\nif __name__ == '__main__':\n    paths = glob.glob('*.pdf')\n    for path in paths:\n        pdf_splitter(path)\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 4459497, "user_type": "registered", "profile_image": "https://graph.facebook.com/1437436748/picture?type=large", "display_name": "Bob Maiers", "link": "https://stackoverflow.com/users/4459497/bob-maiers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1527713620, "creation_date": 1527712476, "question_id": 50612962, "link": "https://stackoverflow.com/questions/50612962/separate-all-multipage-pdf-files-inside-a-directory-into-single-page-pdfs-via-py", "title": "Separate all multipage PDF files inside a directory into single page PDFs via Python", "body": "<p>I need to take hundreds of randomly named multipage PDF files and split them into single-page PDF files.  I have been experimenting with Python with some success.  The following code does exactly what I need, but it is written to split a 'specific' PDF file (w9.pdf).  I need to split all PDF files in a directory (*.pdf).  </p>\n\n<p>Can somebody point me in the right direction, please?</p>\n\n<pre><code># pdf_splitter.py\n\nimport os\nfrom PyPDF2 import PdfFileReader, PdfFileWriter\n\ndef pdf_splitter(path):\nfname = os.path.splitext(os.path.basename(path))[0]\n\n\npdf = PdfFileReader(path)\nfor page in range(pdf.getNumPages()):\n    pdf_writer = PdfFileWriter()\n    pdf_writer.addPage(pdf.getPage(page))\n\n    output_filename = '{}_page_{}.pdf'.format(\n        fname, page+1)\n\n\n    with open(output_filename, 'wb') as out:\n        pdf_writer.write(out)\n\n    print('Created: {}'.format(output_filename))\n\n\nif __name__ == '__main__':\n    path = 'w9.pdf'\n    pdf_splitter(path)\n</code></pre>\n"}, {"tags": ["python", "http", "python-requests"], "comments": [{"owner": {"reputation": 2990, "user_id": 1717069, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PoXPz.jpg?s=128&g=1", "display_name": "Ivan Vinogradov", "link": "https://stackoverflow.com/users/1717069/ivan-vinogradov"}, "edited": false, "score": 1, "creation_date": 1527712485, "post_id": 50612940, "comment_id": 88235848, "body": "to submit <code>json</code> you should write<code>r = requests.post(url, json=val)</code>, not <code>data=val</code>"}, {"owner": {"reputation": 79, "user_id": 8519488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/192bb17c3ba13e0aba89555349b33ac4?s=128&d=identicon&r=PG&f=1", "display_name": "Joao Henrique Ferreira", "link": "https://stackoverflow.com/users/8519488/joao-henrique-ferreira"}, "reply_to_user": {"reputation": 2990, "user_id": 1717069, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PoXPz.jpg?s=128&g=1", "display_name": "Ivan Vinogradov", "link": "https://stackoverflow.com/users/1717069/ivan-vinogradov"}, "edited": false, "score": 0, "creation_date": 1527712819, "post_id": 50612940, "comment_id": 88235974, "body": "It works, thank you !"}], "owner": {"reputation": 79, "user_id": 8519488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/192bb17c3ba13e0aba89555349b33ac4?s=128&d=identicon&r=PG&f=1", "display_name": "Joao Henrique Ferreira", "link": "https://stackoverflow.com/users/8519488/joao-henrique-ferreira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1344, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1527713132, "creation_date": 1527712369, "last_edit_date": 1527713132, "question_id": 50612940, "link": "https://stackoverflow.com/questions/50612940/receiving-http-500-with-python-requests", "title": "Receiving HTTP 500 with python requests", "body": "<p>I'm receiving the following error in the code below, when I try to submit the json:</p>\n\n<pre><code>500 Internal Server Error\n{\"code\":\"500\",\"error\":\"invalid character 'o' in literal true (expecting 'r')\",\"message\"\n</code></pre>\n\n<p>I've looked in other sources but did'nt find nothing about. Someone can help me with .</p>\n\n<p>Thanks in advance</p>\n\n<pre><code>import requests\n\nval = {\"token\": \"90467e25e2c5bbf6476310f9aeb1d005a73ecea5\",\n\"email\": \"jaycops@gmail.com\",\n\"answer\": [{\"NU_INSCRICAO\": \"160000000001\", \"NOTA_FINAL\": 623.3},\n{\"NU_INSCRICAO\": \"160000000002\", \"NOTA_FINAL\": 567.2},\n{\"NU_INSCRICAO\": \"160000000003\", \"NOTA_FINAL\": 403.1} ]}\nr = requests.post(\"https://api.codenation.com.br/v1/user/acceleration/data-science/challenge/enem-1/submit\", data=val)\nprint(r.status_code, r.reason)\nprint(r.text)\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "mnist"], "comments": [{"owner": {"reputation": 8912, "user_id": 5904928, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/jwFz9.png?s=128&g=1", "display_name": "Aaditya Ura", "link": "https://stackoverflow.com/users/5904928/aaditya-ura"}, "edited": false, "score": 0, "creation_date": 1536322698, "post_id": 50612923, "comment_id": 91393448, "body": "Here is detailed example with latest tensorflow version 1.7 <a href=\"https://stackoverflow.com/a/52222383/5904928\">stackoverflow.com/a/52222383/5904928</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3118, "user_id": 1808715, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1c57c74e3f92d43340b3218da9427712?s=128&d=identicon&r=PG", "display_name": "hoang tran", "link": "https://stackoverflow.com/users/1808715/hoang-tran"}, "edited": false, "score": 0, "creation_date": 1541782228, "post_id": 50613631, "comment_id": 93346766, "body": "how do I know which key words the prediction has? For example, if I want to get the probabilities instead of classes, can I check if probabilities keyword is given?"}], "tags": [], "owner": {"reputation": 13174, "user_id": 8143158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/prGO7.png?s=128&g=1", "display_name": "vijay m", "link": "https://stackoverflow.com/users/8143158/vijay-m"}, "is_accepted": true, "score": 2, "last_activity_date": 1527715951, "creation_date": 1527715951, "answer_id": 50613631, "question_id": 50612923, "link": "https://stackoverflow.com/questions/50612923/tensorflow-export-estimators-for-prediction/50613631#50613631", "title": "Tensorflow export estimators for prediction", "body": "<p>The <code>Estimator</code> has <code>model_dir</code> args where the model will be saved. So during prediction we use the <code>Estimator</code> and call the <code>predict</code> method which recreates the graph and the checkpoints are loaded.</p>\n\n<p>For the <code>MNIST</code> example, the prediction code would be:</p>\n\n<pre><code>tf.reset_default_graph()\n\n# An input-function to predict the class of new data.\npredict_input_fn = tf.estimator.inputs.numpy_input_fn(\n    x={\"x\": eval_data},\n    num_epochs=1,\n    shuffle=False)\n\nmnist_classifier = tf.estimator.Estimator(\n      model_fn=cnn_model_fn, model_dir=\"/tmp/mnist_convnet_model\")\n\n#Prediction call\npredictions = mnist_classifier.predict(input_fn=predict_input_fn)\n\npred_class = np.array([p['classes'] for p in predictions]).squeeze()\nprint(pred_class)\n\n# Output\n# [7 2 1 ... 4 5 6]\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 8020007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03b01c231fede4bdef0015f617bf72a6?s=128&d=identicon&r=PG&f=1", "display_name": "Razvan", "link": "https://stackoverflow.com/users/8020007/razvan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 726, "favorite_count": 1, "accepted_answer_id": 50613631, "answer_count": 1, "score": 1, "last_activity_date": 1527715951, "creation_date": 1527712265, "question_id": 50612923, "link": "https://stackoverflow.com/questions/50612923/tensorflow-export-estimators-for-prediction", "title": "Tensorflow export estimators for prediction", "body": "<p>I wonder how can I export the estimator and then import it for prediction from MNIST tutorial, <a href=\"https://github.com/tensorflow/tensorflow/blob/r1.8/tensorflow/examples/tutorials/layers/cnn_mnist.py\" rel=\"nofollow noreferrer\">Tensorflow's page</a>.\nThank you!</p>\n"}, {"tags": ["python", "machine-learning", "pytorch", "torch"], "answers": [{"comments": [{"owner": {"reputation": 1250, "user_id": 2970272, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YgBQv.gif?s=128&g=1", "display_name": "mrbTT", "link": "https://stackoverflow.com/users/2970272/mrbtt"}, "edited": false, "score": 0, "creation_date": 1580156057, "post_id": 51520394, "comment_id": 105997971, "body": "This did it for me when installing torch from whl file (server blocks regular pip without artifactory and the steps at pytorch.org). Note: Since I was using <b>conda environment</b>, I had to copy the dll files to a different location (look where i&#39;m typing miniconda, you might have anaconda) <code>c:\\users\\my_user\\AppData\\Local\\Continuum\\**miniconda3**\\envs&zwnj;&#8203;\\my_env\\Lib\\site-pac&zwnj;&#8203;kages\\torch\\lib</code>"}], "tags": [], "owner": {"reputation": 671, "user_id": 13213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ab99a44b51ae24833825112c6604577?s=128&d=identicon&r=PG", "display_name": "billmcc", "link": "https://stackoverflow.com/users/13213/billmcc"}, "is_accepted": false, "score": 7, "last_activity_date": 1532620447, "last_edit_date": 1532620447, "creation_date": 1532525969, "answer_id": 51520394, "question_id": 50612899, "link": "https://stackoverflow.com/questions/50612899/from-torch-c-import-importerror-dll-load-failed-the-specified-module-could/51520394#51520394", "title": "from torch._C import * ImportError: DLL load failed: The specified module could not be found", "body": "<p>I've been encountering the same problem.   Pytorch seems to require openmp, however this is not part of the PIP distribution.    </p>\n\n<p>If you install Pytorch through Anaconda, the Anaconda install includes openmp, so this problem goes away.</p>\n\n<p>To resolve this problem with pip, you can\npip install intel-openmp</p>\n\n<p>but you still have to copy the openmp binaries from Python\\Library\\bin over to\nPython\\Lib\\site-packages\\torch\\lib</p>\n\n<p>Here's a link to the pytorch issue</p>\n\n<p><a href=\"https://github.com/pytorch/pytorch/issues/9818\" rel=\"noreferrer\">pytorch issue</a></p>\n"}, {"tags": [], "owner": {"reputation": 381, "user_id": 7127123, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eFrBQ.png?s=128&g=1", "display_name": "Nusrath", "link": "https://stackoverflow.com/users/7127123/nusrath"}, "is_accepted": false, "score": 2, "last_activity_date": 1541101758, "last_edit_date": 1541101758, "creation_date": 1541099141, "answer_id": 53107795, "question_id": 50612899, "link": "https://stackoverflow.com/questions/50612899/from-torch-c-import-importerror-dll-load-failed-the-specified-module-could/53107795#53107795", "title": "from torch._C import * ImportError: DLL load failed: The specified module could not be found", "body": "<p>I had the same issue for Windows 10. Solved this by running <code>conda install pytorch -c pytorch</code></p>\n"}, {"tags": [], "owner": {"reputation": 25, "user_id": 3359151, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001838560641/picture?type=large", "display_name": "pranavanuom", "link": "https://stackoverflow.com/users/3359151/pranavanuom"}, "is_accepted": false, "score": 0, "last_activity_date": 1557115399, "creation_date": 1557115399, "answer_id": 55998638, "question_id": 50612899, "link": "https://stackoverflow.com/questions/50612899/from-torch-c-import-importerror-dll-load-failed-the-specified-module-could/55998638#55998638", "title": "from torch._C import * ImportError: DLL load failed: The specified module could not be found", "body": "<p>I had the same issue. Use CPU version of pytorch if you are using a machine without GPU. The  following command should work.</p>\n\n<pre><code>conda install -c peterjc123 pytorch-cpu\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 637, "user_id": 1769859, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2MK5X.png?s=128&g=1", "display_name": "qianlei", "link": "https://stackoverflow.com/users/1769859/qianlei"}, "is_accepted": false, "score": 2, "last_activity_date": 1570781166, "creation_date": 1570781166, "answer_id": 58336869, "question_id": 50612899, "link": "https://stackoverflow.com/questions/50612899/from-torch-c-import-importerror-dll-load-failed-the-specified-module-could/58336869#58336869", "title": "from torch._C import * ImportError: DLL load failed: The specified module could not be found", "body": "<p>I had the same issue for Windows 10 machine without CUDA, and in my case it's caused by the pytorch I installed is a CUDA version, then I uninstalled it and installed a CPU version pytorch, the problem solved.\n<a href=\"https://i.stack.imgur.com/YQWG5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YQWG5.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 9819226, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kEMTHfbtHSs/AAAAAAAAAAI/AAAAAAAAAE0/0EZ855ujR9Q/photo.jpg?sz=128", "display_name": "pseudorandomcoder", "link": "https://stackoverflow.com/users/9819226/pseudorandomcoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1572098904, "creation_date": 1572098904, "answer_id": 58571507, "question_id": 50612899, "link": "https://stackoverflow.com/questions/50612899/from-torch-c-import-importerror-dll-load-failed-the-specified-module-could/58571507#58571507", "title": "from torch._C import * ImportError: DLL load failed: The specified module could not be found", "body": "<p>Same issue, but I have cuda GPU. Go to <a href=\"https://developer.nvidia.com/cuda-downloads\" rel=\"nofollow noreferrer\">https://developer.nvidia.com/cuda-downloads</a> and install the version of cuda you selected for pytorch, reboot, and worked for me. Hope it helps you!</p>\n"}], "owner": {"reputation": 724, "user_id": 9871400, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sWW3jDgwV_w/AAAAAAAAAAI/AAAAAAAAAD0/edPrFw6-ABc/photo.jpg?sz=128", "display_name": "Abhishek Singh", "link": "https://stackoverflow.com/users/9871400/abhishek-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7949, "favorite_count": 1, "protected_date": 1547007031, "answer_count": 5, "score": 7, "last_activity_date": 1572098904, "creation_date": 1527712174, "question_id": 50612899, "link": "https://stackoverflow.com/questions/50612899/from-torch-c-import-importerror-dll-load-failed-the-specified-module-could", "title": "from torch._C import * ImportError: DLL load failed: The specified module could not be found", "body": "<p>I am trying to <code>import torch</code> in my windows machine using python 3.5. (CPU only)(pip)\nI have followed the steps given in the <a href=\"https://pytorch.org/\" rel=\"noreferrer\">official website</a>. </p>\n\n<p>When I try to import torch it gives me the error: </p>\n\n<pre><code>from torch._C import *\nImportError: DLL load failed: The specified module could not be found.\n</code></pre>\n\n<p>I have looked up <a href=\"https://github.com/pytorch/pytorch/issues/4518\" rel=\"noreferrer\">from torch._C import * (ImportError: DLL load failed: The specified module could not be found.</a> and <a href=\"https://github.com/pytorch/pytorch/issues/574\" rel=\"noreferrer\">ModuleNotFoundError: No module named 'torch._C'</a> and followed their instructions, still the error persists.</p>\n\n<p>The total traceback:</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"D:\\CFPS.py\", line 1, in &lt;module&gt;\nimport torch\nFile \"C:\\Program Files (x86)\\Python35\\lib\\site-packages\\torch\\__init__.py\", \nline 78, in &lt;module&gt;\nfrom torch._C import *\nImportError: DLL load failed: The specified module could not be found.\n[Finished in 0.6s]\n</code></pre>\n\n<p>Is there a way to get past through this?</p>\n"}, {"tags": ["python", "environment-variables", "python-2.x", "sudo", "rhel"], "comments": [{"owner": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 2, "creation_date": 1527712201, "post_id": 50612898, "comment_id": 88235750, "body": "The root prompt should end with &quot;#&quot;."}, {"owner": {"reputation": 5359, "user_id": 7851115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uyswM.jpg?s=128&g=1", "display_name": "Joshua Detwiler", "link": "https://stackoverflow.com/users/7851115/joshua-detwiler"}, "reply_to_user": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1527712256, "post_id": 50612898, "comment_id": 88235764, "body": "@IgnacioVazquez-Abrams fixed, silly me. Thank you"}, {"owner": {"reputation": 943, "user_id": 2005095, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/vbcjg.jpg?s=128&g=1", "display_name": "ingernet", "link": "https://stackoverflow.com/users/2005095/ingernet"}, "edited": false, "score": 0, "creation_date": 1527712362, "post_id": 50612898, "comment_id": 88235798, "body": "Which OS/version? There are some nuances between *NIX flavors."}, {"owner": {"reputation": 5359, "user_id": 7851115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uyswM.jpg?s=128&g=1", "display_name": "Joshua Detwiler", "link": "https://stackoverflow.com/users/7851115/joshua-detwiler"}, "edited": false, "score": 0, "creation_date": 1527712404, "post_id": 50612898, "comment_id": 88235813, "body": "Multiple versions of RHEL."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 1, "creation_date": 1527713057, "post_id": 50612898, "comment_id": 88236048, "body": "@IgnacioVazquez-Abrams Doesn&#39;t have to. The root prompt ends with whatever the PROMPT variable tells it to end with."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 4, "creation_date": 1527713167, "post_id": 50612898, "comment_id": 88236075, "body": "&quot;but the nature of the script requires root&#39;s environment variables (and not sudo&#39;s)&quot; - then check the environment variables you need?"}, {"owner": {"reputation": 14830, "user_id": 3757232, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kLzML.jpg?s=128&g=1", "display_name": "Jared Smith", "link": "https://stackoverflow.com/users/3757232/jared-smith"}, "edited": false, "score": 0, "creation_date": 1527713307, "post_id": 50612898, "comment_id": 88236135, "body": "Does <a href=\"https://stackoverflow.com/a/25875055/3757232\">this</a> help?"}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1527713423, "post_id": 50612898, "comment_id": 88236183, "body": "Why not just check the username?"}, {"owner": {"reputation": 1865, "user_id": 6275324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47277d15eafc6cef35b1086c81d2e6ad?s=128&d=identicon&r=PG&f=1", "display_name": "Andrii Maletskyi", "link": "https://stackoverflow.com/users/6275324/andrii-maletskyi"}, "edited": false, "score": 0, "creation_date": 1527713424, "post_id": 50612898, "comment_id": 88236184, "body": "I would do something stupid, e.g. check value of HOME variable. Combined with explicit warning in docs that sudo shouldn&#39;t be used"}, {"owner": {"reputation": 5359, "user_id": 7851115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uyswM.jpg?s=128&g=1", "display_name": "Joshua Detwiler", "link": "https://stackoverflow.com/users/7851115/joshua-detwiler"}, "reply_to_user": {"reputation": 14830, "user_id": 3757232, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kLzML.jpg?s=128&g=1", "display_name": "Jared Smith", "link": "https://stackoverflow.com/users/3757232/jared-smith"}, "edited": false, "score": 1, "creation_date": 1527713483, "post_id": 50612898, "comment_id": 88236215, "body": "@JaredSmith Using <code>username = commands.getoutput(&quot;echo $(whoami)&quot;)</code> as <code>sudo</code> returns <code>root</code>"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1527714007, "post_id": 50612898, "comment_id": 88236414, "body": "<code>sudo PATH=$PATH ...</code> doesn&#39;t use root&#39;s PATH, anyway; it uses your own PATH. Do you want root&#39;s environment variables or your own environment variables?"}], "answers": [{"comments": [{"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 2, "creation_date": 1527713666, "post_id": 50613201, "comment_id": 88236294, "body": "Just <code>getpass.getuser()</code>."}], "tags": [], "owner": {"reputation": 802, "user_id": 5673922, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/dbf835b56b5a5dc577080b8452040157?s=128&d=identicon&r=PG&f=1", "display_name": "Nelson", "link": "https://stackoverflow.com/users/5673922/nelson"}, "is_accepted": false, "score": -4, "last_activity_date": 1527714263, "last_edit_date": 1527714263, "creation_date": 1527713603, "answer_id": 50613201, "question_id": 50612898, "link": "https://stackoverflow.com/questions/50612898/can-my-python-script-distinguish-between-if-it-was-run-as-root-or-if-it-was-run/50613201#50613201", "title": "Can my Python script distinguish between if it was run as root or if it was run through sudo?", "body": "<p>Use the subprocess module to run commands and check the output:</p>\n\n<pre><code>from subprocess import check_output\n</code></pre>\n\n<p></p>\n\n<pre><code>uid = check_output(['bash', '-c', 'echo $UID']).decode().strip()\nif uid != '0':\n    sys.exit()  # or return\n</code></pre>\n\n<p>or</p>\n\n<pre><code>user = check_output(['whoami']).decode().strip()\nif user != 'root':\n    sys.exit()  # or return\n</code></pre>\n\n<p>It appears that aside from checking $PATH, root and sudo are indistinguishable.</p>\n"}, {"comments": [{"owner": {"reputation": 5359, "user_id": 7851115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uyswM.jpg?s=128&g=1", "display_name": "Joshua Detwiler", "link": "https://stackoverflow.com/users/7851115/joshua-detwiler"}, "edited": false, "score": 0, "creation_date": 1527771921, "post_id": 50616639, "comment_id": 88259996, "body": "Thank you. I realize now that what I&#39;m asking for is probably not the proper solution, but you and others have helped me better understand what <code>sudo</code> really does. Nevertheless, I think other people could have this question in the future too and maybe could learn from my mistake as I did. I&#39;m choosing @Andriy&#39;s suggestion to document it and leave it be. However, because this is predicated on security, it&#39;s somewhat irksome that I can&#39;t verify that I&#39;m really checking through <code>root</code>&#39;s <code>PATH</code> directories."}], "tags": [], "owner": {"reputation": 5119, "user_id": 4276647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6a929f6537e73d7cc1ec7b533032350?s=128&d=identicon&r=PG&f=1", "display_name": "Kurtis Rader", "link": "https://stackoverflow.com/users/4276647/kurtis-rader"}, "is_accepted": false, "score": 2, "last_activity_date": 1527740759, "creation_date": 1527740759, "answer_id": 50616639, "question_id": 50612898, "link": "https://stackoverflow.com/questions/50612898/can-my-python-script-distinguish-between-if-it-was-run-as-root-or-if-it-was-run/50616639#50616639", "title": "Can my Python script distinguish between if it was run as root or if it was run through sudo?", "body": "<p>You're going to get \"hostile questions\" because the premise of your issue doesn't make much sense. In general if a command can be run as the root user via <code>sudo</code> then it should not matter whether it was run via <code>sudo</code> (or <code>runas</code>, etc.) or by some other mechanism that has the UID set to root such as an interactive login as the root user. You should not require running a program to be predicated on an interactive login as the root user account rather than via a setuid program like <code>sudo</code> or your program if it were setuid root.</p>\n\n<p>A cheap and dirty solution is to ensure the interactive root login sets a unique env var that is unlikely to be set when your program is run via <code>sudo</code>. That is, however, obviously easy to spoof so if you're doing this for security then that approach is not acceptable.</p>\n"}, {"tags": [], "owner": {"reputation": 5359, "user_id": 7851115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uyswM.jpg?s=128&g=1", "display_name": "Joshua Detwiler", "link": "https://stackoverflow.com/users/7851115/joshua-detwiler"}, "is_accepted": true, "score": 1, "last_activity_date": 1527776360, "last_edit_date": 1527776360, "creation_date": 1527773544, "answer_id": 50625575, "question_id": 50612898, "link": "https://stackoverflow.com/questions/50612898/can-my-python-script-distinguish-between-if-it-was-run-as-root-or-if-it-was-run/50625575#50625575", "title": "Can my Python script distinguish between if it was run as root or if it was run through sudo?", "body": "<p>Despite the reasons discussed to not pursue this solution, I actually did find it for others wondering if <a href=\"https://unix.stackexchange.com/a/11471/233770\">it's possible</a>.</p>\n\n<pre><code>[user@hostname ~]$ sudo python\n&gt;&gt;&gt; import os\n&gt;&gt;&gt; os.environ[\"SUDO_UID\"]  # UID of user running sudo\n'uid'\n</code></pre>\n\n<p>And when logged in as root...</p>\n\n<pre><code>[root@hostname ~]# python\n&gt;&gt;&gt; import os\n&gt;&gt;&gt; try:\n...     uid = os.environ[\"SUDO_UID\"]\n        raise AssertionError(\"Ran with sudo\")\n... except KeyError, e:\n...     ...  # SUDO_UID, SUDO_USER, etc. not set without sudo\n</code></pre>\n\n<hr>\n\n<p>I also <a href=\"https://www.systutorials.com/241602/how-to-get-another-users-path-in-bash-on-linux/\" rel=\"nofollow noreferrer\">found</a> a way to access <code>root</code>'s <code>PATH</code> just running with <code>sudo</code>.</p>\n\n<pre><code>path = os.popen(\"su - -c env | grep ^PATH= | cut -d'=' -f2-\").read().strip()\n</code></pre>\n\n<p>I think I like this solution better than relying on how my script is ran.</p>\n"}], "owner": {"reputation": 5359, "user_id": 7851115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uyswM.jpg?s=128&g=1", "display_name": "Joshua Detwiler", "link": "https://stackoverflow.com/users/7851115/joshua-detwiler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 374, "favorite_count": 0, "accepted_answer_id": 50625575, "answer_count": 3, "score": 5, "last_activity_date": 1527776360, "creation_date": 1527712168, "last_edit_date": 1527713785, "question_id": 50612898, "link": "https://stackoverflow.com/questions/50612898/can-my-python-script-distinguish-between-if-it-was-run-as-root-or-if-it-was-run", "title": "Can my Python script distinguish between if it was run as root or if it was run through sudo?", "body": "<pre><code>[root@hostname ~]# python script.py                  # allow this\n\n[user@hostname ~]$ sudo python script.py             # deny this\n[user@hostname ~]$ sudo -E python script.py          # deny this\n[user@hostname ~]$ sudo PATH=$PATH python script.py  # deny this\n[user@hostname ~]$ python script.py                  # kindly refuse this\n</code></pre>\n\n<p><strong>I'm trying to achieve the behavior above.</strong> Read further if you care why or if the example isn't sufficient enough. Sorry for the sharp tongue, but most of my Stack Exchange questions get hostile questions back instead of answers.</p>\n\n<p>This question arises from requiring an admin to run my script, but the nature of the script requires <code>root</code>'s environment variables (and not <code>sudo</code>'s).</p>\n\n<p>I've given this some thorough research... <a href=\"https://stackoverflow.com/a/2806923/7851115\">below is from this answer</a></p>\n\n<pre><code>if os.geteuid() == 0:\n    pass  # sufficient to determine if elevated privileges\n</code></pre>\n\n<p>But then I started needing to access <code>PATH</code> inside of my script. I noticed that</p>\n\n<pre><code>sudo -E env | grep PATH; env | grep PATH\n</code></pre>\n\n<p>prints different <code>PATH</code> values. I found it was because of the security policy on <code>PATH</code>. I also found <a href=\"https://stackoverflow.com/a/8633575/7851115\">the workaround</a> to <code>PATH</code> is <code>sudo PATH=$PATH ...</code></p>\n\n<p>However, it's not the only policy protected environment variable, and at that point, why push this enumeration of environment variables on the script user? It seems that requiring <code>root</code> explicitly is the best approach, and just warn the admin to use <code>root</code> explicitly from within the script otherwise.</p>\n\n<p>Is there such a way to distinguish between <code>root</code> and <code>sudo</code> with Python?</p>\n"}, {"tags": ["python", "beautifulsoup"], "comments": [{"owner": {"reputation": 2275, "user_id": 2175593, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/LXoPR.png?s=128&g=1", "display_name": "WillardSolutions", "link": "https://stackoverflow.com/users/2175593/willardsolutions"}, "edited": false, "score": 0, "creation_date": 1527712327, "post_id": 50612883, "comment_id": 88235789, "body": "There&#39;s really no need to &quot;traverse back&quot; - what kind of filters are you using?  Add your code to your question"}, {"owner": {"reputation": 1107, "user_id": 9872568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487ee4c0bfb5d0fff8f9037e57478e0b?s=128&d=identicon&r=PG&f=1", "display_name": "A. Dandelion", "link": "https://stackoverflow.com/users/9872568/a-dandelion"}, "reply_to_user": {"reputation": 2275, "user_id": 2175593, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/LXoPR.png?s=128&g=1", "display_name": "WillardSolutions", "link": "https://stackoverflow.com/users/2175593/willardsolutions"}, "edited": false, "score": 0, "creation_date": 1527712431, "post_id": 50612883, "comment_id": 88235826, "body": "The filters needed to find yyyy."}, {"owner": {"reputation": 1298, "user_id": 9435107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82e0a5095d1dee0d01c4b5f24f4be428?s=128&d=identicon&r=PG&f=1", "display_name": "W Stokvis", "link": "https://stackoverflow.com/users/9435107/w-stokvis"}, "edited": false, "score": 0, "creation_date": 1527712764, "post_id": 50612883, "comment_id": 88235952, "body": "When you say traverse, are you looking for parents or siblings of that element?"}, {"owner": {"reputation": 1107, "user_id": 9872568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487ee4c0bfb5d0fff8f9037e57478e0b?s=128&d=identicon&r=PG&f=1", "display_name": "A. Dandelion", "link": "https://stackoverflow.com/users/9872568/a-dandelion"}, "edited": false, "score": 0, "creation_date": 1527713100, "post_id": 50612883, "comment_id": 88236062, "body": "Parents, I want to check if xxxx is present before an element that contains yyyy"}], "answers": [{"tags": [], "owner": {"reputation": 25, "user_id": 6934728, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-F68RQeUGJto/AAAAAAAAAAI/AAAAAAAADM8/ifHHQromR0Y/photo.jpg?sz=128", "display_name": "Bharath Bharath", "link": "https://stackoverflow.com/users/6934728/bharath-bharath"}, "is_accepted": false, "score": -2, "last_activity_date": 1527713827, "creation_date": 1527713827, "answer_id": 50613246, "question_id": 50612883, "link": "https://stackoverflow.com/questions/50612883/going-one-element-back-beautifulsoup/50613246#50613246", "title": "Going one element back BeautifulSoup", "body": "<p>findAllPrevious and findPrevious can help you out..Please verify once. </p>\n"}], "owner": {"reputation": 1107, "user_id": 9872568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487ee4c0bfb5d0fff8f9037e57478e0b?s=128&d=identicon&r=PG&f=1", "display_name": "A. Dandelion", "link": "https://stackoverflow.com/users/9872568/a-dandelion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1527713827, "creation_date": 1527712111, "question_id": 50612883, "link": "https://stackoverflow.com/questions/50612883/going-one-element-back-beautifulsoup", "title": "Going one element back BeautifulSoup", "body": "<p>I am trying to check if an element has another element containing a specific attribute (Such as <code>id=xxxxx</code>).</p>\n\n<p>This is roughly the structure:</p>\n\n<pre><code>&gt; &lt;div id=xxxx....\n&gt;&gt; &lt;div id=yyyy.... #\n&gt;&gt;&gt; &lt;div id=yyyy.... # All of those have the same attributes\n&gt;&gt; &lt;div id=yyyy.... #\n&gt;&gt; &lt;div id=yyyy.... #\n.....\n&gt; &lt;/div&gt;\n</code></pre>\n\n<p>I am able to find all yyyy. Is there a way I can traverse back and check if before the element with attribute <code>id=yyyy</code> there is an element with <code>id=xxxx</code>?</p>\n\n<p>If not, what is another solution I could adapt do do this?</p>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1527712310, "post_id": 50612882, "comment_id": 88235784, "body": "How many coins do you have, and how complicated is that <code>collisionDetect</code> function? Your design seems to rely on the functions running every 40ms. If they only take a tiny fraction of 1ms to run, it&#39;ll be close enough\u2014but what happens if they take, say, 15ms to run? Then it runs for 15ms, and waits another 40ms to be run again. So your code is only running 15 times per second instead of 25."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9872569"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1527712434, "post_id": 50612882, "comment_id": 88235827, "body": "@abarnert Hello , ty for replying . It doesn&#39;t matter how many coins I have but when I have lets say 10 it lags . Also the code to the coins detections is just simple detection between 2 rectangles  EDIT : interesting fact about your solution btw that it works ... when I decrease the amount of time it should wait , it lags less the player . Which is interesting ... I come from java and I used to use timers there . very different here having only one main loop ... and needs to be precise .  Anyway , I think my problem fixed . Thank you :)"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1527712948, "post_id": 50612882, "comment_id": 88236017, "body": "By the way, Tkinter is not at all designed for games, and not very good for them. You may want to look at using something like PyGame Zero, which is designed around a frame loop that automatically tries its hardest to run you code exactly N times per second (and that also has much more efficient and also easier-to-use ways to, e.g., update sprites in the display, calculate collisions, etc.)."}], "answers": [{"tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": true, "score": 4, "last_activity_date": 1527713695, "last_edit_date": 1527713695, "creation_date": 1527712832, "answer_id": 50613036, "question_id": 50612882, "link": "https://stackoverflow.com/questions/50612882/python-tkinter-lag/50613036#50613036", "title": "Python : Tkinter lag", "body": "<p>Your design seems to expect your functions to run every 40ms. Maybe +/- a few ms, but averaging 25 times per second.</p>\n\n<p>But that's not what happens.</p>\n\n<hr>\n\n<p>First, how many coins do you have, and how complicated is that <code>collisionDetect</code> function? If it only takes a tiny fraction of 1ms to run through that loop, it's no big deal, but think about what happens if it takes, say, 15ms: You wait 40ms, then do 15ms of work, then wait another 40ms, then do 15ms of work, etc. So your work is running only 15 times per second, instead of 25.</p>\n\n<p>Now imagine each coin takes, say, 0.2ms. At 3 coins, there's a lag of 0.6ms, which is barely noticeably. But at 100 coins, there's a lag of 20ms. That slows the coins down by 50%, which is pretty obviously noticeable.</p>\n\n<hr>\n\n<p>Second, as <a href=\"http://effbot.org/tkinterbook/widget.htm#Tkinter.Widget.after-method\" rel=\"nofollow noreferrer\">the docs</a> say:</p>\n\n<blockquote>\n  <p>Tkinter only guarantees that the callback will not be called earlier than that; if the system is busy, the actual delay may be much longer.</p>\n</blockquote>\n\n<p>Being off a few ms randomly in either direction might be fine; it would all average out in the end. But <code>after</code> is always a few ms late, never a few ms early, so instead of averaging out, it just builds up and you get further and further behind.</p>\n\n<p>And, worse, if one of your functions gets behind, it will tend to make the delay in each <code>after</code> a bit longer\u2014so it won't just be your coin animation slowing down 50%, but the whole game slowing down by some unpredictable amount arbitrarily between 0-50%, but probably enough to be noticeable.</p>\n\n<hr>\n\n<p>To solve both problems, you need to carry around something like the time you expected to run at, then, instead of doing <code>after(40)</code>, you do something like this:</p>\n\n<pre><code>expected_time += 40\ndelay = expected_time - current_time\nafter(max(0, delay), func)\n</code></pre>\n\n<p>To put it in concrete (although untested) terms, using <a href=\"https://docs.python.org/3/library/datetime.html\" rel=\"nofollow noreferrer\">the <code>datetime</code> module</a>:</p>\n\n<pre><code>def __init__(self):\n    self.next_frame_time = datetime.datetime.now()\n    self.schedule()\n\ndef schedule(self):\n    self.next_frame_time += datetime.timedelta(seconds=0.040)\n    now = datetime.datetime.now()\n    delta = max(datetime.timedelta(), now - self.next_frame_time)\n    self.frame.frame.after(delta.total_seconds * 1000, self.coinsUpdateAnimations)\n\ndef coinsUpdateAnimations(self):\n    # all the existing code before the last two lines\n    self.coinsCheckCollision()\n    self.schedule()\n</code></pre>\n\n<hr>\n\n<p>This still won't solve things if the total work you do takes more than 40ms, of course. Imagine that you spend 50ms, then do an <code>after(0, func)</code>, which triggers at least 10ms late, and then spend another 50ms, then the next <code>after(0, func)</code> triggers at least 20ms late, and so on. If you can't do all of your work in something that's usually significantly less than 40ms, you won't be able to keep up. You have to either:</p>\n\n<ul>\n<li>Find a way to optimize your code (e.g., maybe you can use a better algorithm, or use numpy instead of a <code>for</code> loop),</li>\n<li>Redesign your game to do less work, or</li>\n<li>Slow down your frame rate to something you actually can keep up with.</li>\n</ul>\n\n<hr>\n\n<p>A possibly better solution is to stop trying to bend Tkinter into a gaming framework. It's not designed for that, doesn't help you get all the fiddly details right, and doesn't work all that well even once you do get them right.</p>\n\n<p>By contrast, something like <a href=\"https://pygame-zero.readthedocs.io\" rel=\"nofollow noreferrer\">Pygame Zero</a> is, as the name implies, designed for creating games. And designed to make it easy enough that people with a lot less Python experience than you seem to have can use it.</p>\n\n<p>For example, instead of an event loop that runs at whatever speed your OS wants to run it, making it your responsibility to get everything timed right, Pygame Zero runs a frame loop that calls your <code>update</code> function N times per second, as close to evenly as possible. And it has built-in functions for things like collision detection, drawing animated sprites, etc.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9872569"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1486, "favorite_count": 0, "accepted_answer_id": 50613036, "answer_count": 1, "score": 4, "last_activity_date": 1527713695, "creation_date": 1527712108, "question_id": 50612882, "link": "https://stackoverflow.com/questions/50612882/python-tkinter-lag", "title": "Python : Tkinter lag", "body": "<p>I have a question .\nI'm making a platformer game in tkinter and I have an issue :\nI have for now : player , blocks and coins .\nI'm updating the player's move and it's animation and the coin's animation and for some reason when I'm putting too much coins , the player's movement starts lagging. \nNote: I'm using the after function of tkinter for animations for player's movement + animation and same goes for the coins . \nFor other things like gravity and etc I'm using just threads . </p>\n\n<p>code of coins updating :</p>\n\n<pre><code>def coinsCheckCollision(self):\n    cRemove = None\n    indexRemove = -1\n    count = 0\n    for c in self.frame.coins:\n        x, y , width , height = c.getRectangle()\n        xP = self.player.getX; yP = self.player.getY; wP = self.player.getWidth; hP = self.player.getHeight\n        if collisionDetect(xP , x, yP  , y, wP , width, hP , height) or collisionDetect(x , xP , y , yP , width , wP , height , hP):\n            if count not in coinsRemoved:\n                indexRemove = count\n        if indexRemove != -1:\n            if indexRemove not in coinsRemoved:\n                coinsRemoved.append(indexRemove)\n        count +=1\n\ndef coinsUpdateAnimations(self):\n    count = 0\n    for c in self.frame.coins:\n        if count not in coinsRemoved:\n            self.img = c.getAnimation()\n            self.img = ImageTk.PhotoImage(self.img)\n            self.frame.coinsImages[count] = self.img\n        else:\n            if self.frame.coinsImages[count] is not '' :\n                self.frame.coinsImages[count] = ''\n                self.frame.canvas.delete('coinB'+str(count))\n        what = self.frame.canvas.itemconfig('coin' + str(count), image=self.frame.coinsImages[count])\n        count += 1\n    self.coinsCheckCollision()\n    self.frame.frame.after(40 , self.coinsUpdateAnimations)\n</code></pre>\n\n<p>Anyway , the question in short is : why when I'm updating multiple things that aren't really \"related\" to each other , the gui starts lagging ?</p>\n"}, {"tags": ["python", "flask"], "comments": [{"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1527712915, "post_id": 50612866, "comment_id": 88236004, "body": "Are you sure you have an environment variable <code>$PWD</code>? Try checking in terminal by doing <code>echo $PWD</code>. You might need to set it before you run your script, or do <code>os.chdir(path)</code> and see if <code>PWD</code> gets set."}, {"owner": {"reputation": 691, "user_id": 2543982, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5679224a8a4ec76343fa43507e429d4a?s=128&d=identicon&r=PG", "display_name": "Lombax", "link": "https://stackoverflow.com/users/2543982/lombax"}, "reply_to_user": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1527714304, "post_id": 50612866, "comment_id": 88236534, "body": "OK. I added a new route that just returns os.getcwd(), I then also commented out the existing code in my flask_test_runner() and added return os.getcwd() as well. In both instances they return /app [and that is the directory I expected]. I searched my project for use of $PWD/PWD and did not find anything."}, {"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 1, "creation_date": 1527714770, "post_id": 50612866, "comment_id": 88236690, "body": "Since the <code>PWD</code> key is missing you could probably try <code>os.environ[&#39;PWD&#39;] = os.getcwd()</code>. Hopefully that will set the variable and your script can continue."}], "answers": [{"tags": [], "owner": {"reputation": 691, "user_id": 2543982, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5679224a8a4ec76343fa43507e429d4a?s=128&d=identicon&r=PG", "display_name": "Lombax", "link": "https://stackoverflow.com/users/2543982/lombax"}, "is_accepted": false, "score": 1, "last_activity_date": 1527776654, "creation_date": 1527776654, "answer_id": 50626612, "question_id": 50612866, "link": "https://stackoverflow.com/questions/50612866/using-subprocess-to-run-a-command-via-flask-throws-keyerror-pwd/50626612#50626612", "title": "Using subprocess to run a command via Flask throws KeyError: &#39;PWD&#39;", "body": "<p>Your suggestion was spot on </p>\n\n<blockquote>\n  <p>Since the PWD key is missing you could probably try os.environ['PWD']\n  = os.getcwd(). Hopefully that will set the variable and your script can continue.</p>\n</blockquote>\n\n<p>I updated the method to: </p>\n\n<pre><code>def flask_test_runner(test_name):\n\n    # force PWD\n    os.environ['PWD'] = os.getcwd()\n\n    command = subprocess.Popen([\"pytest\", \"-m\", test_name, \"-html=report.html\", \"--self-contained-html\"],\n                               stdout=subprocess.PIPE, stderr=subprocess.PIPE)\n\n    return command.communicate()\n</code></pre>\n\n<p>I can now hit the endpount without error! </p>\n\n<pre><code>$ docker run -p 5000:5000 command_test_cont-1\n\n * Serving Flask app \"webserver\" (lazy loading)\n * Environment: development\n * Debug mode: on\n * Running on http://0.0.0.0:5000/ (Press CTRL+C to quit)\n * Restarting with stat\n * Debugger is active!\n * Debugger PIN: 282-250-075\n172.17.0.1 - - [31/May/2018 13:46:57] \"GET /apitesting/smoke HTTP/1.1\" 0 -\n172.17.0.1 - - [31/May/2018 13:46:59] \"GET /favicon.ico HTTP/1.1\" 200 -\n</code></pre>\n"}], "owner": {"reputation": 691, "user_id": 2543982, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5679224a8a4ec76343fa43507e429d4a?s=128&d=identicon&r=PG", "display_name": "Lombax", "link": "https://stackoverflow.com/users/2543982/lombax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 369, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1527776654, "creation_date": 1527712034, "last_edit_date": 1527713506, "question_id": 50612866, "link": "https://stackoverflow.com/questions/50612866/using-subprocess-to-run-a-command-via-flask-throws-keyerror-pwd", "title": "Using subprocess to run a command via Flask throws KeyError: &#39;PWD&#39;", "body": "<p>I am attempting to use Flask to run a command using subprocess. At a high level what I am trying to do is create a way that a user can hit a URL and pass in a 'test_name' [for PoC I am using smoke].\nThat test name then gets passed along to flask_test_runner().\nIn flask_test_runner I am attempting to run the following pytest command </p>\n\n<pre><code>pytest -m test_name -html=report.html --self-contained-html \n</code></pre>\n\n<p>using subprocess</p>\n\n<pre><code>command = subprocess.Popen([\"pytest\", \"-m\", test_name, \"-html=report.html\", \"--self-contained-html\"],\n                                   stdout=subprocess.PIPE, stderr=subprocess.PIPE)\n</code></pre>\n\n<p>All of this is running inside a docker container. I have done my best to validate that docker is not the root cause. At one point I included a RUN pytest at the end of the dockerfile and it kicked off the tests. </p>\n\n<p>My server starts up as expected: </p>\n\n<pre><code> * Serving Flask app \"webserver\" (lazy loading)\n * Environment: development\n * Debug mode: on\n * Running on http://0.0.0.0:5000/ (Press CTRL+C to quit)\n * Restarting with stat\n * Debugger is active!\n * Debugger PIN: 282-250-075\n</code></pre>\n\n<p>When I hit the URL <a href=\"http://localhost:5000/apitesting/smoke\" rel=\"nofollow noreferrer\">http://localhost:5000/apitesting/smoke</a> I get the following back in the Response: </p>\n\n<pre><code>Content-Type: text/html; charset=utf-8\nContent-Length: 0\nServer: Werkzeug/0.14.1 Python/3.6.4\nDate: Wed, 30 May 2018 20:20:39 GMT\n</code></pre>\n\n<p>and this error in my console: </p>\n\n<pre><code>  File \"/usr/local/lib/python3.6/site-packages/pytest_cloud/plugin.py\", line 77, in pytest_addoption\n    os.path.basename(os.environ['PWD'])\n  File \"/usr/local/lib/python3.6/os.py\", line 669, in __getitem__\n    raise KeyError(key) from None\nKeyError: 'PWD'\n</code></pre>\n\n<p>I do not understand why this is happening, so any help is appreciated. Thank you for your time. </p>\n\n<p>For reference my app route is as follows: </p>\n\n<pre><code>@app.route('/apitesting/&lt;test_name&gt;', methods=['GET', 'POST'])\ndef runsmoketests(test_name):\n    '''\n    :param test_name: test type passed in by the user \n    '''\n    flask_app_cmd = api_flask_test_runner.flask_test_runner(test_name)\n    print(flask_app_cmd[0])\n    print(flask_app_cmd[1])\n    return flask_app_cmd\n</code></pre>\n\n<p>The flask_test_runner that I call is: </p>\n\n<pre><code>import subprocess\n\ndef flask_test_runner(test_name):\n    '''\n    :param test_name: is passed along from the route /apitesting/&lt;test_name&gt;\n    :return: \n    '''\n\n    command = subprocess.Popen([\"pytest\", \"-m\", test_name, \"-html=report.html\", \"--self-contained-html\"],\n                               stdout=subprocess.PIPE, stderr=subprocess.PIPE)\n\n    (out, err) = command.communicate()\n\n    return (out, err)\n</code></pre>\n"}, {"tags": ["python", "django", "templates", "django-templates"], "comments": [{"owner": {"reputation": 1543, "user_id": 3560724, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8405071cb6c766f5842267de9714aa0e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/3560724/alex"}, "reply_to_user": {"reputation": 10604, "user_id": 5230901, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/85fb790721ad6b8004cbcb9c9d35c24c?s=128&d=identicon&r=PG&f=1", "display_name": "Pythonista", "link": "https://stackoverflow.com/users/5230901/pythonista"}, "edited": false, "score": 0, "creation_date": 1527712260, "post_id": 50612834, "comment_id": 88235766, "body": "@Pythonista Thanks! Do you want to put it as an answer, and I&#39;ll accept it?"}], "answers": [{"tags": [], "owner": {"reputation": 10604, "user_id": 5230901, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/85fb790721ad6b8004cbcb9c9d35c24c?s=128&d=identicon&r=PG&f=1", "display_name": "Pythonista", "link": "https://stackoverflow.com/users/5230901/pythonista"}, "is_accepted": true, "score": 5, "last_activity_date": 1527712585, "creation_date": 1527712585, "answer_id": 50612989, "question_id": 50612834, "link": "https://stackoverflow.com/questions/50612834/django-template-language-unpacking-a-dict/50612989#50612989", "title": "Django template language unpacking a dict", "body": "<p>You just iterate the same way you would in python, but in Djangos templating language (DTL) syntax</p>\n\n<pre><code> {% for key, value in dictionary.items %}\n</code></pre>\n\n<p>Your poll.votes is a dict but you're not iterating the items but the keys in your code.</p>\n\n<p>You can find an overview of jinja <a href=\"http://jinja.pocoo.org/docs/2.10/\" rel=\"noreferrer\">here</a>. Its worth noting that jinja isn't what django uses but its handy for a condensed reference since many things are the same (jinja is based upon DTL) instead of digging through djangos docs.</p>\n\n<p>For Djangos tempaltes heres <a href=\"https://docs.djangoproject.com/en/2.0/topics/templates/\" rel=\"noreferrer\">the documentation reference</a></p>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 8502190, "user_type": "registered", "profile_image": "https://graph.facebook.com/1495921083829915/picture?type=large", "display_name": "Tiago Piovesan", "link": "https://stackoverflow.com/users/8502190/tiago-piovesan"}, "is_accepted": false, "score": 1, "last_activity_date": 1536696322, "creation_date": 1536696322, "answer_id": 52283487, "question_id": 50612834, "link": "https://stackoverflow.com/questions/50612834/django-template-language-unpacking-a-dict/52283487#52283487", "title": "Django template language unpacking a dict", "body": "<p>you too can do this:</p>\n\n<pre><code>{% for variable in poll %}\n   {{ variable.name }} - {{ variable.votes }}\n{% endfor %}\n</code></pre>\n"}], "owner": {"reputation": 1543, "user_id": 3560724, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8405071cb6c766f5842267de9714aa0e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/3560724/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1811, "favorite_count": 0, "accepted_answer_id": 50612989, "answer_count": 2, "score": 3, "last_activity_date": 1536696322, "creation_date": 1527711807, "question_id": 50612834, "link": "https://stackoverflow.com/questions/50612834/django-template-language-unpacking-a-dict", "title": "Django template language unpacking a dict", "body": "<p>I have a dictionary passed (as part of another object) to the django template language.\nThe object, called 'poll' has attributes <code>self.text</code> and <code>self.votes</code>, where the former is a string, and the latter is a dict.\nThe dict, looks like this:\n<code>{'a1': 45.92422502870264, 'a2': 53.50172215843857}</code>\nI am trying to list each label, with its accompanying number, using the following:</p>\n\n<pre><code>{% for l, x in poll.votes %}\n&lt;p&gt;{{ l }} {{ x }}&lt;/p&gt;\n{% endfor %}\n</code></pre>\n\n<p>Django responds with</p>\n\n<pre><code>Exception Type: ValueError\nException Value:    Need 2 values to unpack in for loop; got 3.\n</code></pre>\n\n<p>I tried <code>.iteritems</code> - The docs explain that <code>.iteritems</code> is not the correct way to do this, but they don't explain what the correct way <em>is</em>.</p>\n"}, {"tags": ["python", "list", "scope"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1527711532, "post_id": 50612754, "comment_id": 88235457, "body": "Because variable != object. A variable holds a reference. If the reference changes, doesn&#39;t necessarily mean the object is destroyed."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1527711682, "post_id": 50612754, "comment_id": 88235516, "body": "<a href=\"https://nedbatchelder.com/text/names.html\" rel=\"nofollow noreferrer\">Facts and myths about Python names and values</a>."}], "answers": [{"tags": [], "owner": {"reputation": 1042, "user_id": 5874239, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/zKBbr.jpg?s=128&g=1", "display_name": "Alexandru Antochi", "link": "https://stackoverflow.com/users/5874239/alexandru-antochi"}, "is_accepted": false, "score": 1, "last_activity_date": 1527764534, "last_edit_date": 1527764534, "creation_date": 1527713081, "answer_id": 50613100, "question_id": 50612754, "link": "https://stackoverflow.com/questions/50612754/why-does-iteratively-generating-nested-lists-not-delete-the-inner-list/50613100#50613100", "title": "Why does iteratively generating nested lists not delete the inner list", "body": "<p>When you run <code>inner_list=[]</code> it just makes the variable point to another address in the memory. <code>outer_list</code> still points to the old memory address (previous <code>inner_list</code>). While there is a pointer to it, it will not be freed.</p>\n"}, {"tags": [], "owner": {"reputation": 5314, "user_id": 5270581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/leDO2.jpg?s=128&g=1", "display_name": "Laurent H.", "link": "https://stackoverflow.com/users/5270581/laurent-h"}, "is_accepted": false, "score": 1, "last_activity_date": 1527767609, "creation_date": 1527767609, "answer_id": 50623694, "question_id": 50612754, "link": "https://stackoverflow.com/questions/50612754/why-does-iteratively-generating-nested-lists-not-delete-the-inner-list/50623694#50623694", "title": "Why does iteratively generating nested lists not delete the inner list", "body": "<p>I propose you to consider these 2 cases with full explanation in comments:  </p>\n\n<ol>\n<li><p>Case with <code>list = []</code>:</p>\n\n<pre><code>my1stList = [1, 2 ,3, 4, 5]  # my1stList references  the list [1, 2 ,3, 4, 5]\nmy2ndList = my1stList        # my2ndList references the same list as my1stList\nmy1stList = []               # my1stList references another list (which is empty)\nprint(my2ndList)             # it prints: [1, 2, 3, 4, 5]\n</code></pre></li>\n<li><p>Case with <code>list[:] = []</code>:</p>\n\n<pre><code>my1stList = [1, 2 ,3, 4, 5]  # my1stList references the list [1, 2 ,3, 4, 5]\nmy2ndList = my1stList        # my2ndList references the same list as my1stList\nmy1stList[:] = []            # the list referenced by my1stList is emptied\nprint(my2ndList)             # it prints: []\n</code></pre></li>\n</ol>\n\n<p>I hope it is now understood for you: each list you append into <code>outer_list</code> is never overwritten. Only its previous reference <code>inner_list</code> changes.</p>\n"}], "owner": {"reputation": 323, "user_id": 5852964, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0d0a84f2aeec2c00c64a7e71bb8541b2?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Dennis", "link": "https://stackoverflow.com/users/5852964/patrick-dennis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1527767609, "creation_date": 1527711412, "question_id": 50612754, "link": "https://stackoverflow.com/questions/50612754/why-does-iteratively-generating-nested-lists-not-delete-the-inner-list", "title": "Why does iteratively generating nested lists not delete the inner list", "body": "<pre><code>my_list = ['abc', 'def']\n\nouter_list = []\nfor element in my_list:\n    inner_list = []\n    for ch in element:\n        inner_list.append(ch)\n    outer_list.append(inner_list)\nprint(outer_list)\n# output [['a', 'b', 'c'], ['d', 'e', 'f']]\n</code></pre>\n\n<p>My question is, why does this work? i.e., why does the, <code>line inner_list = []</code>, not obliterate prior instances of inner_list?  I think it has to do with the scope of outer_list being outside of the 'for' block. Perhaps once inner_list takes up residence there it is detached from the variable name? Is that close?</p>\n"}, {"tags": ["python", "pipe", "streaming"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1527711559, "post_id": 50612710, "comment_id": 88235471, "body": "What you&#39;ve written doesn&#39;t dump data to <code>destfile</code>. Are you sure you aren&#39;t doing <code>ssh second_com@IP_address &#39;cat &gt;destfile&#39;</code> or something like that?"}, {"owner": {"reputation": 1555, "user_id": 6313007, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/74799df08583d3fffcac5c333ee7bb06?s=128&d=identicon&r=PG&f=1", "display_name": "meow", "link": "https://stackoverflow.com/users/6313007/meow"}, "edited": false, "score": 0, "creation_date": 1527711643, "post_id": 50612710, "comment_id": 88235498, "body": "TCP/ UDP? It also depends a bit on the operating system. One shortcut would be to use something like netcat where one python process writes the data to the respective named pipe or stdout and one reads it respectively on the other side."}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1527711983, "post_id": 50612710, "comment_id": 88235663, "body": "Is this line oriented data? Text or binary? Encoded text like utf-8? On your destination machine you could write a program that does <code>for line in sys.stdin: do your processing</code> then run it the same way you run cat on the destination."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 9263920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/522ba9980635c182cc744bddb303bd52?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/9263920/steve"}, "edited": false, "score": 0, "creation_date": 1527715595, "post_id": 50612859, "comment_id": 88237000, "body": "Thank you so much for your answer abarnert -- I did drop the &gt; sign, so you are right."}, {"owner": {"reputation": 51, "user_id": 9263920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/522ba9980635c182cc744bddb303bd52?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/9263920/steve"}, "edited": false, "score": 0, "creation_date": 1527715701, "post_id": 50612859, "comment_id": 88237042, "body": "I just made the simple python script as you suggested, which receives the data (it&#39;s the binary data): import sys,  in = sys.stdin.read(), print(len(in)).  However, using the line you suggested:  (cat mypipe | ssh second_com@IP_address &#39;python myscript.py&#39;) makes this program to be executed on the second machine (from which I want to send data) and I need to receive and process the data on the first machine."}, {"owner": {"reputation": 51, "user_id": 9263920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/522ba9980635c182cc744bddb303bd52?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/9263920/steve"}, "edited": false, "score": 0, "creation_date": 1527798073, "post_id": 50612859, "comment_id": 88274519, "body": "I&#39;m still struggling with this problem. I need to process the data received from second computer in python on the first computer. I understand in @abarnert solution the processing by python script (on first computer) is seen on the second computer. I just want to send the data from the first computer and then run the python script on the first computer......"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 51, "user_id": 9263920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/522ba9980635c182cc744bddb303bd52?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/9263920/steve"}, "edited": false, "score": 0, "creation_date": 1527798215, "post_id": 50612859, "comment_id": 88274589, "body": "@Steve What is the second computer even doing then? Maybe you&#39;re looking for the <code>tee</code> command? Or maybe you want to put your script into the pipeline between <code>mypipe</code> and the second computer (e.g., <code>python myscript.py &lt; mypipe | ssh second_com@IP_address &#39;\u2026&lt;whatever command you want to run on the second computer, which I can&#39;t guess at&gt;&#39;</code>?"}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": false, "score": 0, "last_activity_date": 1527711988, "creation_date": 1527711988, "answer_id": 50612859, "question_id": 50612710, "link": "https://stackoverflow.com/questions/50612710/read-streaming-data-over-pipe-in-python/50612859#50612859", "title": "read streaming data over pipe in python", "body": "<p>What you've written doesn't dump data to <code>destfile</code>. What it does is:</p>\n\n<ul>\n<li><code>cat mypipe</code>: Dumps the contents of a file named <code>mypipe</code> to its stdout.</li>\n<li><code>|</code>: Takes the stdout from <code>cat mypipe</code> and sends it as the stdin to <code>ssh</code>.</li>\n<li><code>ssh second_com@IP_address</code>: Creates an <code>ssh</code> connection to another system and runs the specified command there, forwarding its stdin along.</li>\n<li><code>'cat destfile'</code>: Runs the command <code>cat destfile</code> on that other system\u2014which ignores the forwarded-in stdin and dumps the contents of a file named <code>destfile</code> to stdout, which goes nowhere useful.</li>\n</ul>\n\n<p>What you probably have is something more like this:</p>\n\n<pre><code>cat mypipe | ssh second_com@IP_address 'cat &gt;destfile'\n</code></pre>\n\n<p>The difference is:</p>\n\n<ul>\n<li><code>'cat destfile'</code>: Runs the command <code>cat &gt;destfile</code> on that other system\u2014so <code>cat</code> just copies the forwarded-in stdin to its stdout, and then <code>&gt;destfile</code> causes that stdout to be stored in the local file <code>destfile</code>.</li>\n</ul>\n\n<p>So the result is exactly what you described as happening.</p>\n\n<hr>\n\n<p>The most obvious way to change this is to just put your Python program in place of <code>cat</code>. Of course you need to put your program on the remote machine, somewhere accessible, like the home directory of that <code>second_com</code> user. Then you can execute it like:</p>\n\n<pre><code>cat mypipe | ssh second_com@IP_address 'python myscript.py'\n</code></pre>\n\n<p>Now, inside <code>myscript.py</code>, it can read from <code>sys.stdin</code>, which will be the stream of data coming from <code>cat mypipe</code> (via <code>|</code> and <code>ssh</code>), and you can do whatever it is you wanted to do with that data, without needing to save it to <code>destfile</code> first.</p>\n"}], "owner": {"reputation": 51, "user_id": 9263920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/522ba9980635c182cc744bddb303bd52?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/9263920/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 611, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527712830, "creation_date": 1527711184, "last_edit_date": 1527712830, "question_id": 50612710, "link": "https://stackoverflow.com/questions/50612710/read-streaming-data-over-pipe-in-python", "title": "read streaming data over pipe in python", "body": "<p>I need to continuously read and process data on one computer that is generated on another computer. </p>\n\n<p>So far, I was able to use <code>mypipe</code> tosend data from the second computer to the first, using the following:</p>\n\n<pre><code>cat mypipe | ssh second_com@IP_address 'cat destfile'\n</code></pre>\n\n<p>This works and the data is now constantly dumped to <code>destfile</code>, but file size increases really fast and this is not the solution I need.</p>\n\n<p><strong>What I would like to do is pipe the data directly into my python script without writing it to a file</strong>. Any suggestions on how to do this? </p>\n"}, {"tags": ["python", "pandas", "apply"], "comments": [{"owner": {"reputation": 2125, "user_id": 2703802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4OvIl.jpg?s=128&g=1", "display_name": "vielkind", "link": "https://stackoverflow.com/users/2703802/vielkind"}, "edited": false, "score": 0, "creation_date": 1527711713, "post_id": 50612708, "comment_id": 88235535, "body": "You never actually set <code>df_trn</code> to be a <code>DataFrame</code>, which is why you are getting the <code>AttributeError</code>."}, {"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1527711788, "post_id": 50612708, "comment_id": 88235571, "body": "<code>file.readlines()</code> doesn&#39;t return a data frame. Use a pandas read function instead, such as <code>pandas.read_csv</code> or <code>pandas.read_table</code>. Alternatively, you can use <code>readlines()</code>, parse the data and create your data frame from there using the constructor <code>pd.DataFrame(args)</code>"}, {"owner": {"reputation": 279, "user_id": 8479607, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/053f1601a6d66d02fcaa2acff2a26532?s=128&d=identicon&r=PG&f=1", "display_name": "Minsky", "link": "https://stackoverflow.com/users/8479607/minsky"}, "edited": false, "score": 0, "creation_date": 1527829124, "post_id": 50612708, "comment_id": 88282527, "body": "Sorry, I forgot to add the code where I read the file chunksize. See above for update. Using pd.read_csv with chunksize returns a TextFileReader."}], "owner": {"reputation": 279, "user_id": 8479607, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/053f1601a6d66d02fcaa2acff2a26532?s=128&d=identicon&r=PG&f=1", "display_name": "Minsky", "link": "https://stackoverflow.com/users/8479607/minsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 911, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1527829207, "creation_date": 1527711173, "last_edit_date": 1527829207, "question_id": 50612708, "link": "https://stackoverflow.com/questions/50612708/pandas-apply-memoryerror-and-textfilereader-object-has-no-attribute-apply", "title": "Pandas .apply MemoryError and &#39;TextFileReader&#39; object has no attribute &#39;apply&#39;", "body": "<p>I'm trying to throw regex at a 500MB text file:</p>\n\n<pre><code>with open(f'{trn_path}text.00') as file:\n       df_trn = file.readlines() \n\nre1 = re.compile(r'  +')\ndef fixup(x):\n    x.replace('&gt;', '').replace('&lt;', '').replace('doc', '').replace(':', \n    '').replace('t_up', '').replace(\n        'fi.wikipedia.org', '').replace('url=\"https', '').replace('\\xa0','')\n       return re1.sub(' ', html.unescape(x))\n\ndf_trn = pd.Series(df_trn)\ndf_trn = df_trn.apply(fixup).values.astype(str)\n</code></pre>\n\n<p>Gives me</p>\n\n<pre><code>MemoryError: \n</code></pre>\n\n<p>If I read the file chunksize</p>\n\n<pre><code>df_trn.to_csv(f'{trn_path}train.csv', header=False, index=False)\ndf_trn = pd.read_csv(f'{trn_path}train.csv', header=None, chunksize=chunksize)\n</code></pre>\n\n<p>I get </p>\n\n<pre><code>AttributeError: 'TextFileReader' object has no attribute 'apply'\n</code></pre>\n\n<p>Any ideas? Thanks!</p>\n"}, {"tags": ["python", "django", "anaconda"], "comments": [{"owner": {"reputation": 22993, "user_id": 1394393, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mSjIL.jpg?s=128&g=1", "display_name": "jpmc26", "link": "https://stackoverflow.com/users/1394393/jpmc26"}, "edited": false, "score": 0, "creation_date": 1527721015, "post_id": 50612695, "comment_id": 88238603, "body": "You can&#39;t do a relative import from a module that&#39;s not inside the same package. It has to be an absolute import. However, your import <i>is</i> absolute, not relative. Learn about the search path (what it does, what it&#39;s default is, how to control it in PyCharm), and don&#39;t modify it at runtime (inside a script). Or just put everything in the same package if it really belongs in one. Also, are any of those packages? You don&#39;t mention any <code>__init__.py</code> files."}], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 1016708, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/61224656acdc8af5e1578367b46e0f20?s=128&d=identicon&r=PG", "display_name": "Jeff", "link": "https://stackoverflow.com/users/1016708/jeff"}, "edited": false, "score": 0, "creation_date": 1527773996, "post_id": 50612807, "comment_id": 88261381, "body": "Although I&#39;m not using setup.py develop, this lead me to find this link: <a href=\"https://stackoverflow.com/questions/19048732/python-setup-py-develop-vs-install\" title=\"python setup py develop vs install\">stackoverflow.com/questions/19048732/&hellip;</a> which lead to the ultimate answer of using pip install -e path/to/package"}, {"owner": {"reputation": 5872, "user_id": 84308, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c27e514504f90a63edaefd74248a461?s=128&d=identicon&r=PG", "display_name": "deets", "link": "https://stackoverflow.com/users/84308/deets"}, "reply_to_user": {"reputation": 181, "user_id": 1016708, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/61224656acdc8af5e1578367b46e0f20?s=128&d=identicon&r=PG", "display_name": "Jeff", "link": "https://stackoverflow.com/users/1016708/jeff"}, "edited": false, "score": 1, "creation_date": 1527797954, "post_id": 50612807, "comment_id": 88274460, "body": "Neat! Didn\u2019t know that existed, will use it myself."}, {"owner": {"reputation": 5872, "user_id": 84308, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c27e514504f90a63edaefd74248a461?s=128&d=identicon&r=PG", "display_name": "deets", "link": "https://stackoverflow.com/users/84308/deets"}, "reply_to_user": {"reputation": 181, "user_id": 1016708, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/61224656acdc8af5e1578367b46e0f20?s=128&d=identicon&r=PG", "display_name": "Jeff", "link": "https://stackoverflow.com/users/1016708/jeff"}, "edited": false, "score": 1, "creation_date": 1527798345, "post_id": 50612807, "comment_id": 88274652, "body": "Augmented my answer so your comment is more visible."}], "tags": [], "owner": {"reputation": 5872, "user_id": 84308, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c27e514504f90a63edaefd74248a461?s=128&d=identicon&r=PG", "display_name": "deets", "link": "https://stackoverflow.com/users/84308/deets"}, "is_accepted": true, "score": 0, "last_activity_date": 1527798060, "last_edit_date": 1527798060, "creation_date": 1527711711, "answer_id": 50612807, "question_id": 50612695, "link": "https://stackoverflow.com/questions/50612695/python-relative-imports-above-top-level/50612807#50612807", "title": "Python Relative Imports &quot;Above Top Level&quot;", "body": "<p>The proper way to do this is to introduce a shared package that you can install into a virtualenv for each webapp. Either from an actual release, or by using </p>\n\n<blockquote>\n  <p>python setup.py develop</p>\n</blockquote>\n\n<p>Form within the shared package you essentially create a symlink in the venv that allows you to just import. </p>\n\n<p>A more modern and simpler version is </p>\n\n<blockquote>\n  <p>pip install -e .</p>\n</blockquote>\n\n<p>inside the library. See <a href=\"https://stackoverflow.com/questions/19048732/python-setup-py-develop-vs-install\">Python setup.py develop vs install</a></p>\n"}, {"tags": [], "owner": {"reputation": 390, "user_id": 9530790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1295a8fc597a4db51284ee9620dbf3d0?s=128&d=identicon&r=PG&f=1", "display_name": "shmuels", "link": "https://stackoverflow.com/users/9530790/shmuels"}, "is_accepted": false, "score": 0, "last_activity_date": 1527734847, "creation_date": 1527734847, "answer_id": 50615920, "question_id": 50612695, "link": "https://stackoverflow.com/questions/50612695/python-relative-imports-above-top-level/50615920#50615920", "title": "Python Relative Imports &quot;Above Top Level&quot;", "body": "<p>I believe you need to set the <code>PYTHONPATH</code> variable, which is used to set the default search path for modules.</p>\n\n<p><a href=\"https://docs.python.org/2/using/cmdline.html#envvar-PYTHONPATH\" rel=\"nofollow noreferrer\">https://docs.python.org/2/using/cmdline.html#envvar-PYTHONPATH</a></p>\n\n<p>As per the python docs the syntax is like so...</p>\n\n<p><a href=\"https://docs.python.org/3.6/using/windows.html#excursus-setting-environment-variables\" rel=\"nofollow noreferrer\">https://docs.python.org/3.6/using/windows.html#excursus-setting-environment-variables</a></p>\n\n<blockquote>\n  <p>To temporarily set environment variables, open Command Prompt and use the set command:</p>\n\n<pre><code>C:\\&gt;set PATH=C:\\Program Files\\Python 3.6;%PATH%\nC:\\&gt;set PYTHONPATH=%PYTHONPATH%;C:\\My_python_lib\nC:\\&gt;python\n</code></pre>\n</blockquote>\n\n<p>Pycharm- in the Run/Debug configuration- sets it when you have it checked off (which is the default).</p>\n\n<p><a href=\"https://i.stack.imgur.com/Lz7aD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Lz7aD.png\" alt=\"pycharm image\"></a></p>\n"}], "owner": {"reputation": 181, "user_id": 1016708, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/61224656acdc8af5e1578367b46e0f20?s=128&d=identicon&r=PG", "display_name": "Jeff", "link": "https://stackoverflow.com/users/1016708/jeff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 1, "accepted_answer_id": 50612807, "answer_count": 2, "score": 0, "last_activity_date": 1527798060, "creation_date": 1527711116, "last_edit_date": 1527711565, "question_id": 50612695, "link": "https://stackoverflow.com/questions/50612695/python-relative-imports-above-top-level", "title": "Python Relative Imports &quot;Above Top Level&quot;", "body": "<p>This is my directory structure</p>\n\n<pre><code>src\\\n  dirCode\\\n    dirSubCode\\\n      test.py\n  Django\\\n    DjangoApp\\\n      Home\\\n       views.py\n</code></pre>\n\n<p>From within views.py I'm trying to import a class (let's call it Main) from test.py.  The line in test.py is simply</p>\n\n<pre><code>from dirCode.dirSubCode.test import Main\n</code></pre>\n\n<p>and I'm getting a ModuleNotFoundError when I try to run the server.  I printed out the os.sys.path and the second entry points to 'src\\' while the first entry is simply ''.  Since this is not the only app from where I'm going to need to call \"external\" code I'm trying to avoid hard-coding</p>\n\n<pre><code>sys.path.insert(0,'path\\to\\src\\dirCode\\dirSubCode\\')\n</code></pre>\n\n<p>if that would even work.  I've tried looking through documentation, looking at other StackOverflow questions (<a href=\"https://stackoverflow.com/questions/8953844/import-module-from-subfolder\">Import module from subfolder</a>), etc. but I'm at a loss as to how to do this.  I've tried going into the src\\Django\\DjangoApp\\Home directory and just running a python console and simply trying to import the class but it's giving me the same error.</p>\n\n<p>One odd development that I'm running into is that when I try to run it from the Anaconda Prompt (yes, I'm running Windows) it doesn't work but when I run the file in PyCharm it does work.  If that helps provide some insight as to what might be going on I'd appreciate the help.</p>\n"}, {"tags": ["python", "docker", "tensorflow", "rnn"], "comments": [{"owner": {"reputation": 4927, "user_id": 7770781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R9JR5.jpg?s=128&g=1", "display_name": "Y. Luo", "link": "https://stackoverflow.com/users/7770781/y-luo"}, "edited": false, "score": 0, "creation_date": 1527744921, "post_id": 50612686, "comment_id": 88244333, "body": "Have you put <code>utils_datagen</code> and other scripts under the &quot;current working directory&quot; of your notebook (os.getcwd())? Can you import <code>utils_datagen</code> from its directory in python interpreter?"}, {"owner": {"reputation": 55, "user_id": 7788664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234a06dbc3cb6c5c6824488c900f55e6?s=128&d=identicon&r=PG", "display_name": "Lew Leibowitz", "link": "https://stackoverflow.com/users/7788664/lew-leibowitz"}, "reply_to_user": {"reputation": 4927, "user_id": 7770781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R9JR5.jpg?s=128&g=1", "display_name": "Y. Luo", "link": "https://stackoverflow.com/users/7770781/y-luo"}, "edited": false, "score": 0, "creation_date": 1527870475, "post_id": 50612686, "comment_id": 88305825, "body": "No, I don&#39;t know how to do what you are asking.  I did the following:"}, {"owner": {"reputation": 55, "user_id": 7788664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234a06dbc3cb6c5c6824488c900f55e6?s=128&d=identicon&r=PG", "display_name": "Lew Leibowitz", "link": "https://stackoverflow.com/users/7788664/lew-leibowitz"}, "reply_to_user": {"reputation": 4927, "user_id": 7770781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R9JR5.jpg?s=128&g=1", "display_name": "Y. Luo", "link": "https://stackoverflow.com/users/7770781/y-luo"}, "edited": false, "score": 0, "creation_date": 1527870689, "post_id": 50612686, "comment_id": 88305924, "body": "I entered $which python. and got /Users/lewleib/anaconda3/bin/python.   Then entered$ python -V. and got Python 3.6.4 : : Anaconda, Inc. However that is on the host. My problem is in a Docker container."}, {"owner": {"reputation": 4927, "user_id": 7770781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R9JR5.jpg?s=128&g=1", "display_name": "Y. Luo", "link": "https://stackoverflow.com/users/7770781/y-luo"}, "edited": false, "score": 0, "creation_date": 1527875857, "post_id": 50612686, "comment_id": 88308213, "body": "I&#39;m not sure how the Docker container will affect your run (like can you <code>mv</code> scripts in your docker)? Here is what I catch for now: <code>utils_datagen</code> is not a installed conda or pip module. It is a script coming together with <code>00_RNN_predictions_playground.ipynb</code>. You need to put <code>utils_datagen</code> <a href=\"https://docs.python.org/3/reference/import.html#searching\" rel=\"nofollow noreferrer\">where python can find</a>."}, {"owner": {"reputation": 55, "user_id": 7788664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234a06dbc3cb6c5c6824488c900f55e6?s=128&d=identicon&r=PG", "display_name": "Lew Leibowitz", "link": "https://stackoverflow.com/users/7788664/lew-leibowitz"}, "reply_to_user": {"reputation": 4927, "user_id": 7770781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R9JR5.jpg?s=128&g=1", "display_name": "Y. Luo", "link": "https://stackoverflow.com/users/7770781/y-luo"}, "edited": false, "score": 0, "creation_date": 1528047312, "post_id": 50612686, "comment_id": 88348080, "body": "Thank you @Y. Luo. In trying to simplify my file string, I only partially cloned the Gorner GitHub file into my host file and missed the utils_datagen file. Now python can find it.  How do I reward you?"}, {"owner": {"reputation": 4927, "user_id": 7770781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R9JR5.jpg?s=128&g=1", "display_name": "Y. Luo", "link": "https://stackoverflow.com/users/7770781/y-luo"}, "edited": false, "score": 0, "creation_date": 1528084142, "post_id": 50612686, "comment_id": 88356049, "body": "Getting your feedback and knowing I&#39;m helpful is good enough for rewarding. Enjoy your coding!"}], "answers": [{"tags": [], "owner": {"reputation": 55, "user_id": 7788664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234a06dbc3cb6c5c6824488c900f55e6?s=128&d=identicon&r=PG", "display_name": "Lew Leibowitz", "link": "https://stackoverflow.com/users/7788664/lew-leibowitz"}, "is_accepted": false, "score": 0, "last_activity_date": 1528136466, "creation_date": 1528136466, "answer_id": 50686586, "question_id": 50612686, "link": "https://stackoverflow.com/questions/50612686/importerror-no-module-named-utils-datagen/50686586#50686586", "title": "ImportError: No module named utils_datagen", "body": "<p>Solved by comment from @Y. Luo. In trying to simplify my file string, I only partially cloned the Gorner GitHub file into my host file and missed the utils_datagen file. Now python can find it.</p>\n\n<p>Close this thread.</p>\n"}], "owner": {"reputation": 55, "user_id": 7788664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234a06dbc3cb6c5c6824488c900f55e6?s=128&d=identicon&r=PG", "display_name": "Lew Leibowitz", "link": "https://stackoverflow.com/users/7788664/lew-leibowitz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 838, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528136466, "creation_date": 1527711070, "last_edit_date": 1527711807, "question_id": 50612686, "link": "https://stackoverflow.com/questions/50612686/importerror-no-module-named-utils-datagen", "title": "ImportError: No module named utils_datagen", "body": "<p>I am trying to run Martin Gorner's <code>GoogleCloudPlatform/tensorflow-without-a-phd 00_RNN_predictions_playground.ipynb</code> and get an <code>ImportError</code> for both <code>import utils_datagen</code> and <code>import utils_display</code>.</p>\n\n<p>I get the same error running <code>tensorflow/tensorflow</code> Python 2 and <code>Jupiter/tensorflow-notebook</code> running Python 3. I am running macOS Sierra 10.13.3 and Docker Client: Version: 18.03.1-ce</p>\n\n<p>How do I access <code>utils_datagen</code> or work around it?\nThanks</p>\n\n<p>Lew</p>\n\n<pre><code>import numpy as np\nimport utils_datagen\nimport utils_display\nfrom matplotlib import pyplot as plt\nimport tensorflow as tf\nprint(\"Tensorflow version: \" + tf.__version__)\nprint(\"Hello World and Lew 30 May\")\n</code></pre>\n\n<p>And get:</p>\n\n<pre><code>ImportError                               Traceback (most recent call last)\n&lt;ipython-input-2-0f00155f1447&gt; in &lt;module&gt;()\n      1 import numpy as np\n----&gt; 2 import utils_datagen\n      3 import utils_display\n      4 from matplotlib import pyplot as plt\n      5 import tensorflow as tf\n\nImportError: No module named utils_datagen\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pandas", "dataframe", "jupyter-notebook"], "comments": [{"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 1, "creation_date": 1527712304, "post_id": 50612682, "comment_id": 88235783, "body": "Seems like you&#39;re trying to access a column that doesn&#39;t exist"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1527725976, "post_id": 50612682, "comment_id": 88239823, "body": "Possibly related: <a href=\"https://stackoverflow.com/questions/27870428/python-pandas-groupby-key-error-in-pandas-hashtable-pyobjecthashtable-get-item\">Python pandas groupby key error</a>"}, {"owner": {"reputation": 29, "user_id": 9872376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39ca75cc5dd78dc5a2253a9e2fc8ed92?s=128&d=identicon&r=PG&f=1", "display_name": "l0rd-r4yden", "link": "https://stackoverflow.com/users/9872376/l0rd-r4yden"}, "edited": false, "score": 0, "creation_date": 1527754563, "post_id": 50612682, "comment_id": 88249065, "body": "Indeed! thanks very much for your help."}], "owner": {"reputation": 29, "user_id": 9872376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39ca75cc5dd78dc5a2253a9e2fc8ed92?s=128&d=identicon&r=PG&f=1", "display_name": "l0rd-r4yden", "link": "https://stackoverflow.com/users/9872376/l0rd-r4yden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 281, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1527711716, "creation_date": 1527711048, "last_edit_date": 1527711716, "question_id": 50612682, "link": "https://stackoverflow.com/questions/50612682/jupyter-notebook-exception", "title": "Jupyter Notebook Exception", "body": "<p>I am currently doing a data analysis course in Coursera and I am having issues with their autograder to deliver my exercises. The code seems to be well written as I get the right solution in the exercise however when the autograder checks the jupyter notebook it seems it get an exception message that I am posting below.</p>\n\n<pre><code>--------------------------------------------------------------------- \n------\nKeyError                                  Traceback (most recent call \nlast)\n/opt/conda/lib/python3.6/site-packages/pandas/indexes/base.py in \nget_loc(self, key, method, tolerance)\n   2133             try:\n-&gt; 2134                 return self._engine.get_loc(key)\n   2135             except KeyError:\n\npandas/index.pyx in pandas.index.IndexEngine.get_loc \n(pandas/index.c:4433)()\n\npandas/index.pyx in pandas.index.IndexEngine.get_loc \n(pandas/index.c:4279)()\n\npandas/src/hashtable_class_helper.pxi in \npandas.hashtable.PyObjectHashTable.get_item \n(pandas/hashtable.c:13742)()\n\npandas/src/hashtable_class_helper.pxi in \npandas.hashtable.PyObjectHashTable.get_item \n(pandas/hashtable.c:13696)()\n\nKeyError: 'STNAME'\n\n\nDuring handling of the above exception, another exception occurred:\n\nKeyError                                  Traceback (most recent call \nlast)\n&lt;ipython-input-12-0bb5f5883245&gt; in &lt;module&gt;()\n----&gt; 1 answer_six()\n\n&lt;ipython-input-9-63797fbac390&gt; in answer_six()\n     23 \n     24        #group table by stname and census, sorting only the 3 \n biggest counties population\n---&gt; 25     ccensus_groupby_state= (ccensus_df.groupby('STNAME') \n['CENSUS2010POP'].nlargest(3) )\n     26     #print (ccensus_groupby_state)\n     27     ft=(ccensus_groupby_state.reset_index())\n\n/opt/conda/lib/python3.6/site-packages/pandas/core/generic.py in \ngroupby(self, by, axis, level, as_index, sort, group_keys, squeeze, \n**kwargs)\n   3989         return groupby(self, by=by, axis=axis, level=level, \nas_index=as_index,\n   3990                        sort=sort, group_keys=group_keys, \nsqueeze=squeeze,\n-&gt; 3991                        **kwargs)\n   3992 \n   3993     def asfreq(self, freq, method=None, how=None, \n normalize=False):\n\n/opt/conda/lib/python3.6/site-packages/pandas/core/groupby.py in \ngroupby(obj, by, **kwds)\n   1509         raise TypeError('invalid type: %s' % type(obj))\n   1510 \n-&gt; 1511     return klass(obj, by, **kwds)\n   1512 \n   1513\n\n/opt/conda/lib/python3.6/site-packages/pandas/core/groupby.py in \n__init__(self, obj, keys, axis, level, grouper, exclusions, \nselection, as_index, sort, group_keys, squeeze, **kwargs)\n    368                                                     \nlevel=level,\n    369                                                     \nsort=sort,\n--&gt; 370                                                     \nmutated=self.mutated)\n    371 \n    372         self.obj = obj\n\n /opt/conda/lib/python3.6/site-packages/pandas/core/groupby.py in \n_get_grouper(obj, key, axis, level, sort, mutated)\n   2460 \n   2461         elif is_in_axis(gpr):  # df.groupby('name')\n-&gt; 2462             in_axis, name, gpr = True, gpr, obj[gpr]\n   2463             exclusions.append(name)\n   2464         elif isinstance(gpr, Grouper) and gpr.key is not \nNone:\n/opt/conda/lib/python3.6/site-packages/pandas/core/frame.py in \n__getitem__(self, key)\n   2057             return self._getitem_multilevel(key)\n   2058         else:\n-&gt; 2059             return self._getitem_column(key)\n   2060 \n   2061     def _getitem_column(self, key):\n\n/opt/conda/lib/python3.6/site-packages/pandas/core/frame.py in \n_getitem_column(self, key)\n   2064         # get column\n   2065         if self.columns.is_unique:\n-&gt; 2066             return self._get_item_cache(key)\n   2067 \n   2068         # duplicate columns &amp; possible reduce dimensionality\n\n/opt/conda/lib/python3.6/site-packages/pandas/core/generic.py in \n_get_item_cache(self, item)\n   1384         res = cache.get(item)\n   1385         if res is None:\n-&gt; 1386             values = self._data.get(item)\n   1387             res = self._box_item_values(item, values)\n   1388             cache[item] = res\n\n/opt/conda/lib/python3.6/site-packages/pandas/core/internals.py in \nget(self, item, fastpath)\n   3541 \n   3542             if not isnull(item):\n-&gt; 3543                 loc = self.items.get_loc(item)\n   3544             else:\n   3545                 indexer = np.arange(len(self.items)) \n[isnull(self.items)]\n\n/opt/conda/lib/python3.6/site-packages/pandas/indexes/base.py in \nget_loc(self, key, method, tolerance)\n   2134                 return self._engine.get_loc(key)\n   2135             except KeyError:\n-&gt; 2136                 return \nself._engine.get_loc(self._maybe_cast_indexer(key))\n   2137 \n   2138         indexer = self.get_indexer([key], method=method, \ntolerance=tolerance)\n\npandas/index.pyx in pandas.index.IndexEngine.get_loc \n(pandas/index.c:4433)()\n\npandas/index.pyx in pandas.index.IndexEngine.get_loc \n(pandas/index.c:4279)()\n\npandas/src/hashtable_class_helper.pxi in \npandas.hashtable.PyObjectHashTable.get_item \n(pandas/hashtable.c:13742)()\n\npandas/src/hashtable_class_helper.pxi in \npandas.hashtable.PyObjectHashTable.get_item \n(pandas/hashtable.c:13696)()\n\nKeyError: 'STNAME'\n</code></pre>\n\n<p>Can someone help with this exception message? how do I fix this error so my exercise can be graded? I do understand that I may be accessing a key that does not exist but it is not the case as the algorithm is providing the right solution. It seems the problem is in the autograder and they way that Jupyter notebooks works.</p>\n"}, {"tags": ["python", "pandas", "numpy", "regression"], "comments": [{"owner": {"reputation": 1663, "user_id": 6321559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sEAjx.png?s=128&g=1", "display_name": "it&#39;s-yer-boy-chet", "link": "https://stackoverflow.com/users/6321559/its-yer-boy-chet"}, "edited": false, "score": 1, "creation_date": 1527711664, "post_id": 50612681, "comment_id": 88235507, "body": "Look at this <a href=\"https://stackoverflow.com/questions/893657/how-do-i-calculate-r-squared-using-python-and-numpy?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa\">question</a>"}], "owner": {"reputation": 626, "user_id": 5041561, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2c5873d78bb33067165b902ef5470c9a?s=128&d=identicon&r=PG&f=1", "display_name": "HeadOverFeet", "link": "https://stackoverflow.com/users/5041561/headoverfeet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 208, "favorite_count": 0, "closed_date": 1527714005, "answer_count": 0, "score": 1, "last_activity_date": 1527711044, "creation_date": 1527711044, "question_id": 50612681, "link": "https://stackoverflow.com/questions/50612681/how-to-calculated-r2-and-r2-adjusted-via-poly-fit-numpy-pandas", "closed_reason": "Duplicate", "title": "How to calculated R2 and R2 adjusted via poly_fit numpy, pandas", "body": "<p>I want to determine if it is better linear or polynom 2nd regression.</p>\n\n<p>I use this function to determine new values:</p>\n\n<pre><code>def poly_fit(id,x, y,z,p,n):\n\n#id- id for matching with orginal table\n# x- sample for polyfit\n# y- sample for polyfit\n# z- all data to get coplete fit , x is subset of best samples to get proper fit, z is entire dataset\n# p- all prices in case of wrong polifit use original data\n# n- polifit determinant\n\n    df_poly = pd.DataFrame() \n    df_poly.empty\n    df_poly['id']=id\n    df_poly=df_poly.set_index('id')\n\n    results = {}\n    coeffs = numpy.polyfit(x, y, n)\n\n    # Polynomial Coefficients\n    results['polynomial'] = coeffs.tolist()\n    # r-squared\n    p = numpy.poly1d(coeffs)\n\n    try:       \n            poly= np.polyfit(x, y,n)\n            df_poly['new_fit']=np.poly1d(poly)(z)\n\n    except Exception as e:\n            df_poly['new_fit']=z\n\n    return df_poly\n</code></pre>\n\n<p>Please, how can be this code adjusted to calculate R2 and R2 adjusted via numpy and pandas?</p>\n\n<p>I tried, bu I dont think p = numpy.poly1d(coeffs) is ok for R2...</p>\n\n<pre><code>def poly_fit_r2(id,x, y,z,p,n):\n\n#id- id for matching with orginal table\n# x- sample for polyfit\n# y- sample for polyfit\n# z- all data to get complete fit , x is subset of best samples to get proper fit, z is entire dataset\n# p- all prices in case of wrong polyfit use original data\n# n- polifit determinant\n\n    df_poly = pd.DataFrame() \n    df_poly.empty\n    df_poly['id']=id\n    df_poly=df_poly.set_index('id')\n\n    results = {}\n\n    try:       \n            poly= np.polyfit(x,y,n)\n            df_poly['new_fit']=np.poly1d(poly)(z)\n            coeffs = numpy.polyfit(x, y, n)\n            # Polynomial Coefficients\n            results['polynomial'] = coeffs.tolist()\n            # r-squared\n            p = numpy.poly1d(coeffs)\n            coefficient_of_dermination = sklearn.r2_score(y, p(x))\n            df['poly'] = coefficient_of_dermination \n\n    except Exception as e:\n            df_poly['new_fit']=z\n            df['poly'] = 0\n\n\n    return df_poly\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "wav"], "comments": [{"owner": {"reputation": 354, "user_id": 1673882, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f08242c50477694351c796def37dd09e?s=128&d=identicon&r=PG", "display_name": "UrhoKarila", "link": "https://stackoverflow.com/users/1673882/urhokarila"}, "edited": false, "score": 1, "creation_date": 1527711140, "post_id": 50612658, "comment_id": 88235314, "body": "Perhaps the clicking noises at the start/end of many of the notes?"}, {"owner": {"reputation": 168, "user_id": 7226638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e317e634e1700018883269b7444e903?s=128&d=identicon&r=PG&f=1", "display_name": "Valeria S.", "link": "https://stackoverflow.com/users/7226638/valeria-s"}, "edited": false, "score": 0, "creation_date": 1527752839, "post_id": 50612658, "comment_id": 88248103, "body": "Yes, I meant clicking."}], "answers": [{"tags": [], "owner": {"reputation": 354, "user_id": 1673882, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f08242c50477694351c796def37dd09e?s=128&d=identicon&r=PG", "display_name": "UrhoKarila", "link": "https://stackoverflow.com/users/1673882/urhokarila"}, "is_accepted": false, "score": 1, "last_activity_date": 1527711717, "creation_date": 1527711717, "answer_id": 50612809, "question_id": 50612658, "link": "https://stackoverflow.com/questions/50612658/writing-wav-file-gives-clicking-sounds/50612809#50612809", "title": "Writing wav file gives clicking sounds", "body": "<p>If I were to guess, I'd think it may be related to the fact that the note lengths are sometimes not even multiples of the note's frequency. As a result, <code>sin(end_time)</code> of the note may sometimes result in a relatively large value: <code>32768</code> in the worst case.\nThe sudden drop in volume at that frequency may be responsible for the clicking/chuckling noise you're hearing.</p>\n\n<p>Terminating notes only when <code>int((volume)*math.sin(freq*math.pi*float(i)/float(SAMPLE_RATE)))</code> evaluates to a value near <code>0</code> would eliminate much of that noise, should this be the case.</p>\n"}, {"comments": [{"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 1, "creation_date": 1527814637, "post_id": 50612855, "comment_id": 88279580, "body": "In addition to the two approaches you mentioned (fading notes out and extending them slightly) you could also calculate the next note&#39;s phase so it starts at the same amplitude as the last note&#39;s end."}], "tags": [], "owner": {"reputation": 38158, "user_id": 2707792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hjDjB.png?s=128&g=1", "display_name": "Andrey Tyukin", "link": "https://stackoverflow.com/users/2707792/andrey-tyukin"}, "is_accepted": true, "score": 5, "last_activity_date": 1527718680, "last_edit_date": 1527718680, "creation_date": 1527711969, "answer_id": 50612855, "question_id": 50612658, "link": "https://stackoverflow.com/questions/50612658/writing-wav-file-gives-clicking-sounds/50612855#50612855", "title": "Writing wav file gives clicking sounds", "body": "<p>If you mean the unpleasant clicking sounds between the notes: that's entirely normal.</p>\n\n<p>Even in programming languages that have been designed specifically for generating music, this effect occurs if you simply juxtapose blocks with (sine) waves that have some fixed amplitude during the entire duration.</p>\n\n<p>Here is a sketch of what it looks like when one note ends, and the next note begins:</p>\n\n<p><a href=\"https://i.stack.imgur.com/HHdm5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HHdm5.png\" alt=\"enter image description here\"></a></p>\n\n<p>Unless the first node ends exactly at zero by accident, you will hear this \"jump\" that is plotted at <code>2</code>.</p>\n\n<p>In order to avoid this, you have to implement better note synthesis.</p>\n\n<p>A simple solution would be to smoothly ramp up the amplitude of each note, and then let it smoothly decay in the end. Here is what a transition between two notes would look like if you do this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/hfxmk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hfxmk.png\" alt=\"enter image description here\"></a></p>\n\n<p>This graph has been generated by the following formula:</p>\n\n<pre><code>  if x &gt; 2:\n    return sin((x-2) * 60) * (1 - exp(-(x-2)**2 / 0.5))\n  else:\n    return sin(x * 30) * (1- exp(-(x-2)**2 / 0.5))\n</code></pre>\n\n<p>Hopefully, you can recognize the <code>(1 - exp(-(x - tClick) ** 2 / smoothness))</code> \"mollifier\" factors that are responsible for the ramp up / decay.</p>\n\n<p>But then again you see that the gaps between the notes appear to become larger, and if you then try to make the intervals of the different notes intersect, it all becomes rather messy and complicated, and you're probably better off taking a programming language or a library that already knows how to do it properly. I think <a href=\"http://chuck.cs.princeton.edu/release/files/chuck_manual.pdf\" rel=\"nofollow noreferrer\">Chuck manual</a> contained a rather detailed explanation of how to get increasingly better sounding notes.</p>\n"}], "owner": {"reputation": 168, "user_id": 7226638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e317e634e1700018883269b7444e903?s=128&d=identicon&r=PG&f=1", "display_name": "Valeria S.", "link": "https://stackoverflow.com/users/7226638/valeria-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "accepted_answer_id": 50612855, "answer_count": 2, "score": 3, "last_activity_date": 1546265857, "creation_date": 1527710939, "last_edit_date": 1546265857, "question_id": 50612658, "link": "https://stackoverflow.com/questions/50612658/writing-wav-file-gives-clicking-sounds", "title": "Writing wav file gives clicking sounds", "body": "<p>I have this code for creating wav file:</p>\n\n<pre><code>class Note:\n    def __init__(self,name,octave,duration):\n        self.name = name\n        self.octave = octave\n        self.duration = duration\n\nSAMPLE_RATE = 44100\n\nwav = wave.open(\"starw.wav\", mode=\"w\")\nwav.setparams((1, 2, SAMPLE_RATE , SAMPLE_RATE*4, 'NONE', 'noncompressed'))\n\ndef generate_sample(note,volume):\n    freq = FREQUENCIES[note.octave][note.name]\n    duration = note.duration\n    total_samples = int(SAMPLE_RATE * duration)\n    for i in range(0,total_samples):\n        s = np.clip(int((volume)*math.sin(freq*math.pi*float(i)/float(SAMPLE_RATE))),-32768,32768)    \n        data = struct.pack('&lt;h',s)\n        wav.writeframes(data)\n\n    return data\n\nfor i,m in enumerate(melody):\n\n    if i&lt;len(melody)/5:\n        generate_sample(m, 100+i*500)\n    elif len(melody)/5&lt;=i&lt;=4*len(melody)/5:\n        generate_sample(m, 8800)\n    else:\n        generate_sample(m, 8800-i*20)\n</code></pre>\n\n<p>Here <code>FREQUENCIES</code> is a dict describing notes and their frequencies. <code>melody</code> is an array of <code>Note</code> objects. Everything works fine except for the fact that strange clicking sounds are produced during pauses. As far as I understood, it has something to do with the sample rate. But I don't know how to change my code in order to avoid pauses. Here is the melody:\n<a href=\"https://drive.google.com/open?id=1e03VC90w5WF4QdU-VxrV906dl_c3UvSQ\" rel=\"nofollow noreferrer\">https://drive.google.com/open?id=1e03VC90w5WF4QdU-VxrV906dl_c3UvSQ</a> </p>\n"}, {"tags": ["python", "fork"], "comments": [{"owner": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1527711067, "post_id": 50612655, "comment_id": 88235295, "body": "The new process is an almost-exact copy of the old one."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1527711294, "post_id": 50612655, "comment_id": 88235369, "body": "What&#39;s interesting is why the child processes aren&#39;t printing from 0 to 4. Something is killing them after the main process exits, but not immediately."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 2, "creation_date": 1527711346, "post_id": 50612655, "comment_id": 88235387, "body": "What you&#39;re asking for is, basically, a tutorial on <code>fork</code>. That&#39;s not something that can be written as a good Stack Overflow answer. And a link to an external tutorial is also not a good Stack Overflow answer. Fortunately, there are definitely some good tutorials out there, although most of them are for C rather than Python, but you&#39;ll need to find a site that&#39;s more discussion-oriented than Q&amp;A-oriented to get some good recommendations to start with."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 1, "creation_date": 1527711487, "post_id": 50612655, "comment_id": 88235440, "body": "I can give you the short version: after <code>fork</code>, you have two processes with the same loaded program, memory heap, file descriptors, etc., but in the child <code>fork</code> has returned 0, while in the parent, it&#39;s returned the child&#39;s PID. There are a few minor differences (most obviously, who the parent of each process is, and whether each process has any children\u2026), but for the most part they don&#39;t matter. One place they <i>do</i> matter is shutdown, for which you have to understand how child reaping and signals and so on all work, which is not trivial, but all well documented."}, {"owner": {"reputation": 31, "user_id": 8995848, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8rm6j.jpg?s=128&g=1", "display_name": "Martin Duiceivic", "link": "https://stackoverflow.com/users/8995848/martin-duiceivic"}, "edited": false, "score": 0, "creation_date": 1527714266, "post_id": 50612655, "comment_id": 88236520, "body": "yes, I am aware  of any fork tutorial outside, but I am trying to understand this code in specific, that was the question, not so much how fork works,."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 8995848, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8rm6j.jpg?s=128&g=1", "display_name": "Martin Duiceivic", "link": "https://stackoverflow.com/users/8995848/martin-duiceivic"}, "edited": false, "score": 0, "creation_date": 1527716431, "post_id": 50613511, "comment_id": 88237309, "body": "yes, I have studied the chapters on threading and their locks, rlocks, queues, conditions, events, barriers, and multiprocessing with pools and maps, and applies,. but the book also had this section on forking and I never skip things lest that I should miss concepts that may come up later. Thank you."}], "tags": [], "owner": {"reputation": 54296, "user_id": 128397, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/22b05e50077230ba919b240af4bc13cd?s=128&d=identicon&r=PG", "display_name": "Daniel Pryden", "link": "https://stackoverflow.com/users/128397/daniel-pryden"}, "is_accepted": true, "score": 0, "last_activity_date": 1527715592, "last_edit_date": 1527715592, "creation_date": 1527715277, "answer_id": 50613511, "question_id": 50612655, "link": "https://stackoverflow.com/questions/50612655/understanding-the-flow-of-this-forked-script/50613511#50613511", "title": "Understanding the flow of this &quot;forked&quot; script", "body": "<p>Responding to your two questions:</p>\n\n<blockquote>\n  <p>what activates the call to counter? are the new processes checking their pid and if this is equal to zero, then call to counter?</p>\n</blockquote>\n\n<p>Yes. <code>os.fork()</code> is an unusual beast, in that it \"violates the laws of physics\": it returns <em>twice</em>, in two separate processes. The two processes are (nearly) identical, so the <em>only</em> way to know which one you are (the parent or the child) is to see what <code>os.fork()</code> returned: if it returned zero, you are the child, otherwise the return value is the pid of the child.</p>\n\n<p>Since both processes execute the <code>if pid != 0</code> line, the one where the pid <em>is</em> zero (that is, the child) will execute the <code>else</code> block, which will call <code>counter</code>.</p>\n\n<blockquote>\n  <p>If I change the sleep time to 1 second (instead of tenths of mils), then no data for child processes is printed. What is going on in the background then ?</p>\n</blockquote>\n\n<p>You are not <code>wait</code>ing for your children. This means that as soon as the parent process exits, it \"orphans\" all its child processes. <code>init</code> will helpfully adopt them, but they may lose access to their controlling terminal in the process, and that alone may be enough to kill them. Also, on a modern Linux system, <code>systemd</code> will likely kill the children if you haven't told it otherwise.</p>\n\n<p>Generally, if you are using <code>fork</code>, you need to also <code>wait</code>. The parent gets the pid of the child that was forked so that it can call <code>wait</code> on that pid. This serves two purposes: first, it actually waits for the child to be done executing, and secondly it will allow the parent to receive the exit code from the child, which will allow you to know if the child exited successfully or if it was killed. If you're not waiting, there's no 100% reliable way to know what happened to the child. (Even if you stash the pid somewhere else, it's possible that the pid could get reused before you get a chance to check again.)</p>\n\n<p>There are a lot of subtleties in the dance of <code>fork</code>/(<code>exec</code>)/<code>wait</code>; there is an elegance in their simplicity but there is a <em>lot</em> of assumed knowledge if you are touching these tools. Do not expect to be able to use <code>fork</code> effectively if you <em>haven't</em> read any tutorials on it. And if you don't want to become an expert on the Unix process model (and things like signal handling, controlling terminals and session leaders, etc.) then you're much better off using a higher-level abstraction to solve the problem rather than mucking about with low-level stuff like this. Python helpfully provides the <code>multiprocessing</code> module to help with this, which is a much better tool for general-purpose use.</p>\n"}], "owner": {"reputation": 31, "user_id": 8995848, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8rm6j.jpg?s=128&g=1", "display_name": "Martin Duiceivic", "link": "https://stackoverflow.com/users/8995848/martin-duiceivic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 50613511, "answer_count": 1, "score": 0, "last_activity_date": 1527721983, "creation_date": 1527710924, "last_edit_date": 1527721983, "question_id": 50612655, "link": "https://stackoverflow.com/questions/50612655/understanding-the-flow-of-this-forked-script", "title": "Understanding the flow of this &quot;forked&quot; script", "body": "<p>I have got this code, and in order to understand it better I added a line to track where the pid is equal to zero:</p>\n\n<pre><code>import os, time\ndef counter(count): # run in new process\n    for i in range(count):\n        time.sleep(0.00001) # simulate real work\n        print('[%s] =&gt; %s' % (os.getpid(), i))\n\nfor i in range(5):\n\n    pid = os.fork()\n    print(\"The pid is: \", pid)# the one I added\n    if pid != 0:\n        print('Process %d spawned' % pid) # in parent: continue\n    else:\n        counter(5) # else in child/new process\n        os._exit(0) # run function and exit\nprint('Main process exiting.')\n</code></pre>\n\n<p>Questions:</p>\n\n<p>1) what activates the call to counter? are the new processes checking their pid and if this is equal to zero, then call to counter?</p>\n\n<p>2) If I change the sleep time to 1 second (instead of tenths of mils), then no data for child processes is printed. What is going on in the background then ?</p>\n\n<p>I got this result:</p>\n\n<pre><code>the pid is:  6                                                                                                                                                                     \nProciss 6 spawned                                                                                                                                                                 \nthe pid is:  7                                                                                                                                                                     \nProciss 7 spawned                                                                                                                                                                 \nthe pid is:  8                                                                                                                                                                     \nProciss 8 spawned                                                                                                                                                                 \nthe pid is:  9                                                                                                                                                                     \nProciss 9 spawned                                                                                                                                                                 \nthe pid is:  10                                                                                                                                                                    \nProciss 10 spawned                                                                                                                                                                \nMain prociss exiting.                                                                                                                                                             \nthe pid is:  0                                                                                                                                                                     \nthe pid is:  0                                                                                                                                                                     \nthe pid is:  0                                                                                                                                                                     \nthe pid is:  0                                                                                                                                                                     \n[6] =&gt; 0                                                                                                                                                                          \n[8] =&gt; 0                                                                                                                                                                          \n[7] =&gt; 0                                                                                                                                                                          \n[6] =&gt; 1                                                                                                                                                                          \nthe pid is:  0                                                                                                                                                                     \n[8] =&gt; 1                                                                                                                                                                          \n[6] =&gt; 2                                                                                                                                                                          \n[7] =&gt; 1                                                                                                                                                                          \n[9] =&gt; 0                                                                                                                                                                          \n[6] =&gt; 3                                                                                                                                                                          \n[8] =&gt; 2                                                                                                                                                                          \n[7] =&gt; 2                                                                                                                                                                          \n[9] =&gt; 1                                                                                                                                                                          \n[8] =&gt; 3                                                                                                                                                                          \n[6] =&gt; 4                                                                                                                                                                          \n[7] =&gt; 3                                                                                                                                                                          \n[8] =&gt; 4                                                                                                                                                                          \n[7] =&gt; 4                                                                                                                                                                          \n[9] =&gt; 2                                                                                                                                                                          \n[10] =&gt; 0                                                                                                                                                                         \n[9] =&gt; 3                                                                                                                                                                          \n[10] =&gt; 1                                                                                                                                                                         \n[9] =&gt; 4                                                                                                                                                                          \n[10] =&gt; 2                                                                                                                                                                         \n[10] =&gt; 3                                                                                                                                                                         \n[10] =&gt; 4                                                                                                                                                                         \n\n\n...Program finished with exit code 0   \n</code></pre>\n"}, {"tags": ["python", "python-3.x", "hug"], "comments": [{"owner": {"reputation": 24080, "user_id": 15770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XEC8x.jpg?s=128&g=1", "display_name": "akaihola", "link": "https://stackoverflow.com/users/15770/akaihola"}, "edited": false, "score": 0, "creation_date": 1552919725, "post_id": 50612559, "comment_id": 97182355, "body": "I just reported this issue in <a href=\"https://github.com/timothycrosley/hug/issues/744\" rel=\"nofollow noreferrer\">github.com/timothycrosley/hug/issues/744</a>"}], "owner": {"reputation": 436, "user_id": 13211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c16d1d798651ae7503330f0571cbe2e?s=128&d=identicon&r=PG", "display_name": "Eduardo Marinho", "link": "https://stackoverflow.com/users/13211/eduardo-marinho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1527710404, "creation_date": 1527710404, "question_id": 50612559, "link": "https://stackoverflow.com/questions/50612559/cli-routing-not-working-with-hug-extend-api", "title": "CLI routing not working with @hug.extend_api()", "body": "<p>I'm trying to use <code>@hug.extend_api()</code> for CLI routes but it's not working. </p>\n\n<p>Calling <code>hug -f run.py -c something</code>, the command list is empty. The same code works fine for HTTP routing.</p>\n\n<p>This is my main script (<code>run.py</code>):</p>\n\n<pre><code>import hug\nfrom apitest import api\n\n\n@hug.extend_api()\ndef apis():\n    return [api]\n</code></pre>\n\n<p>This is <code>apitest/api.py</code>:</p>\n\n<pre><code>import hug\n\n\n@hug.cli()  # cli route doesn't work\n@hug.get('/')  # get route works fine\ndef root():\n    return 'hello'\n</code></pre>\n"}, {"tags": ["python", "pandas", "indexing", "scikit-learn", "cross-validation"], "comments": [{"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1527738546, "post_id": 50612523, "comment_id": 88242564, "body": "Cross_val_score only does split the data and fits the data on train and scores on test with some parallelization. But since you are using n_jobs=1, you can easily duplicate the behaviour by iteration a StratifiedKFold (for classification) or KFold (for regression) and do the training and test yourself."}, {"owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "reply_to_user": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1527791908, "post_id": 50612523, "comment_id": 88271486, "body": "I only did <code>n_jobs = 1</code> because the error message is cleaner.  I have it set up right now with manual <code>cv</code> but the <code>model_selection.cross_val_score</code> is just too good to not use :)"}, {"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1527829489, "post_id": 50612523, "comment_id": 88282650, "body": "In that case, you can use <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.model_selection.PredefinedSplit.html\" rel=\"nofollow noreferrer\"><code>PredefinedSplit()</code></a> as your cv which accepts user defined splits."}, {"owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "reply_to_user": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1527872047, "post_id": 50612523, "comment_id": 88306520, "body": "Will that work if my indices are numeric and my data is pandas?"}, {"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1527902383, "post_id": 50612523, "comment_id": 88316051, "body": "Yes it should. Splitting in itself doesnt change the data type."}], "owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 185, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1528152720, "creation_date": 1527710215, "last_edit_date": 1528152720, "question_id": 50612523, "link": "https://stackoverflow.com/questions/50612523/how-to-use-numeric-indices-in-cross-validation-with-pd-dataframe-in-scikit-learn", "title": "How to use numeric indices in cross-validation with pd.DataFrame in scikit-learn (disable _safe_split)?", "body": "<p>I want to disable the <code>safe_indexing</code> and force the indicies that I've given my model.</p>\n\n<p>I can't simply do <code>X.values</code> and <code>y.values</code> because I have a custom classifier that I've made where the column/attribute labels used during the <code>__init__</code> (crucial for the algorithm).</p>\n\n<p>This is from the following line of code:</p>\n\n<pre><code>model_selection.cross_val_score(model, X=X, y=y, cv=cv, n_jobs=1, scoring=\"accuracy\")\n</code></pre>\n\n<p>where <code>cv</code> is a list of lists with numeric indices</p>\n\n<p><strong><code>X</code> has to be a <code>pd.DataFrame</code> and <code>cv</code> has to be predefined indicies.  How I can make this work?</strong> </p>\n\n<pre><code>---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n&lt;ipython-input-74-e1775ca32abb&gt; in &lt;module&gt;()\n      1 smc.fit(X,y)\n----&gt; 2 smc.cross_validate(X,y,cv=cv, n_jobs=1)\n\n&lt;ipython-input-72-61f814fd075c&gt; in cross_validate(self, X, y, cv, scoring, n_jobs, **args)\n    150                     cv_idx.append((idx_tr.map(lambda x:X.index.get_loc(x)), idx_te.map(lambda x:X.index.get_loc(x))))\n    151                 cv = cv_idx\n--&gt; 152         return model_selection.cross_val_score(self, X=X, y=y, cv=cv, n_jobs=n_jobs, scoring=scoring, **args)\n\n~/anaconda/envs/python3/lib/python3.6/site-packages/sklearn/model_selection/_validation.py in cross_val_score(estimator, X, y, groups, scoring, cv, n_jobs, verbose, fit_params, pre_dispatch)\n    340                                 n_jobs=n_jobs, verbose=verbose,\n    341                                 fit_params=fit_params,\n--&gt; 342                                 pre_dispatch=pre_dispatch)\n    343     return cv_results['test_score']\n    344 \n\n~/anaconda/envs/python3/lib/python3.6/site-packages/sklearn/model_selection/_validation.py in cross_validate(estimator, X, y, groups, scoring, cv, n_jobs, verbose, fit_params, pre_dispatch, return_train_score)\n    204             fit_params, return_train_score=return_train_score,\n    205             return_times=True)\n--&gt; 206         for train, test in cv.split(X, y, groups))\n    207 \n    208     if return_train_score:\n\n~/anaconda/envs/python3/lib/python3.6/site-packages/sklearn/externals/joblib/parallel.py in __call__(self, iterable)\n    777             # was dispatched. In particular this covers the edge\n    778             # case of Parallel used with an exhausted iterator.\n--&gt; 779             while self.dispatch_one_batch(iterator):\n    780                 self._iterating = True\n    781             else:\n\n~/anaconda/envs/python3/lib/python3.6/site-packages/sklearn/externals/joblib/parallel.py in dispatch_one_batch(self, iterator)\n    623                 return False\n    624             else:\n--&gt; 625                 self._dispatch(tasks)\n    626                 return True\n    627 \n\n~/anaconda/envs/python3/lib/python3.6/site-packages/sklearn/externals/joblib/parallel.py in _dispatch(self, batch)\n    586         dispatch_timestamp = time.time()\n    587         cb = BatchCompletionCallBack(dispatch_timestamp, len(batch), self)\n--&gt; 588         job = self._backend.apply_async(batch, callback=cb)\n    589         self._jobs.append(job)\n    590 \n\n~/anaconda/envs/python3/lib/python3.6/site-packages/sklearn/externals/joblib/_parallel_backends.py in apply_async(self, func, callback)\n    109     def apply_async(self, func, callback=None):\n    110         \"\"\"Schedule a func to be run\"\"\"\n--&gt; 111         result = ImmediateResult(func)\n    112         if callback:\n    113             callback(result)\n\n~/anaconda/envs/python3/lib/python3.6/site-packages/sklearn/externals/joblib/_parallel_backends.py in __init__(self, batch)\n    330         # Don't delay the application, to avoid keeping the input\n    331         # arguments in memory\n--&gt; 332         self.results = batch()\n    333 \n    334     def get(self):\n\n~/anaconda/envs/python3/lib/python3.6/site-packages/sklearn/externals/joblib/parallel.py in __call__(self)\n    129 \n    130     def __call__(self):\n--&gt; 131         return [func(*args, **kwargs) for func, args, kwargs in self.items]\n    132 \n    133     def __len__(self):\n\n~/anaconda/envs/python3/lib/python3.6/site-packages/sklearn/externals/joblib/parallel.py in &lt;listcomp&gt;(.0)\n    129 \n    130     def __call__(self):\n--&gt; 131         return [func(*args, **kwargs) for func, args, kwargs in self.items]\n    132 \n    133     def __len__(self):\n\n~/anaconda/envs/python3/lib/python3.6/site-packages/sklearn/model_selection/_validation.py in _fit_and_score(estimator, X, y, scorer, train, test, verbose, parameters, fit_params, return_train_score, return_parameters, return_n_test_samples, return_times, error_score)\n    446     start_time = time.time()\n    447 \n--&gt; 448     X_train, y_train = _safe_split(estimator, X, y, train)\n    449     X_test, y_test = _safe_split(estimator, X, y, test, train)\n    450 \n\n~/anaconda/envs/python3/lib/python3.6/site-packages/sklearn/utils/metaestimators.py in _safe_split(estimator, X, y, indices, train_indices)\n    198             X_subset = X[np.ix_(indices, train_indices)]\n    199     else:\n--&gt; 200         X_subset = safe_indexing(X, indices)\n    201 \n    202     if y is not None:\n\n~/anaconda/envs/python3/lib/python3.6/site-packages/sklearn/utils/__init__.py in safe_indexing(X, indices)\n    144     if hasattr(X, \"iloc\"):\n    145         # Work-around for indexing with read-only indices in pandas\n--&gt; 146         indices = indices if indices.flags.writeable else indices.copy()\n    147         # Pandas Dataframes and Series\n    148         try:\n\nAttributeError: 'list' object has no attribute 'flags'\n</code></pre>\n\n<p>In response to the suggestions in the comments (2018-June-04):\n<a href=\"https://i.stack.imgur.com/RQAL6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RQAL6.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "python-2.7", "tensorflow"], "comments": [{"owner": {"reputation": 3425, "user_id": 7582820, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qIuht.jpg?s=128&g=1", "display_name": "andrew", "link": "https://stackoverflow.com/users/7582820/andrew"}, "edited": false, "score": 0, "creation_date": 1527712053, "post_id": 50612518, "comment_id": 88235696, "body": "Did you try the steps in <a href=\"https://stackoverflow.com/questions/44316292/ssl-sslerror-tlsv1-alert-protocol-version\" title=\"ssl sslerror tlsv1 alert protocol version\">stackoverflow.com/questions/44316292/&hellip;</a> ?"}, {"owner": {"reputation": 3425, "user_id": 7582820, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qIuht.jpg?s=128&g=1", "display_name": "andrew", "link": "https://stackoverflow.com/users/7582820/andrew"}, "edited": false, "score": 0, "creation_date": 1528828671, "post_id": 50612518, "comment_id": 88652507, "body": "Are you still facing the <code>SSLError</code> when trying to upgrade TensorFlow?"}], "answers": [{"tags": [], "owner": {"reputation": 3425, "user_id": 7582820, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qIuht.jpg?s=128&g=1", "display_name": "andrew", "link": "https://stackoverflow.com/users/7582820/andrew"}, "is_accepted": true, "score": 0, "last_activity_date": 1527870529, "creation_date": 1527870529, "answer_id": 50647646, "question_id": 50612518, "link": "https://stackoverflow.com/questions/50612518/error-in-upgrading-tensorflow/50647646#50647646", "title": "Error in upgrading tensorflow", "body": "<p>This is not an issue with TensorFlow but rather an issue with your version of OpenSSL. You can check your current version on OSX with:  </p>\n\n<pre><code>$ python3 -c \"import ssl; print(ssl.OPENSSL_VERSION)\" \n</code></pre>\n\n<p>Then upgrade your version with:</p>\n\n<pre><code>$ brew update\n$ brew install openssl\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7929261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ace055284628d354c91f2b861dec808a?s=128&d=identicon&r=PG", "display_name": "Peyman Ghahremani", "link": "https://stackoverflow.com/users/7929261/peyman-ghahremani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 50647646, "answer_count": 1, "score": 1, "last_activity_date": 1527870529, "creation_date": 1527710204, "last_edit_date": 1527711130, "question_id": 50612518, "link": "https://stackoverflow.com/questions/50612518/error-in-upgrading-tensorflow", "title": "Error in upgrading tensorflow", "body": "<p>I ran into a problem while upgrading the <code>tensorflow</code>. I currently use 0.12.1 version. Here is the message I got.</p>\n\n<pre><code>Exception:\nTraceback (most recent call last):\n   File \"/Users/peymanghahremani/tensorflow/lib/python2.7/site-packages/pip/basecommand.py\", line 215, in main\nstatus = self.run(options, args)\n  File \"/Users/peymanghahremani/tensorflow/lib/python2.7/site-packages/pip/commands/install.py\", line 335, in run\nwb.build(autobuilding=True)\n  File \"/Users/peymanghahremani/tensorflow/lib/python2.7/site-packages/pip/wheel.py\", line 749, in build\nself.requirement_set.prepare_files(self.finder)\n  File \"/Users/peymanghahremani/tensorflow/lib/python2.7/site-packages/pip/req/req_set.py\", line 380, in prepare_files\nignore_dependencies=self.ignore_dependencies))\n  File \"/Users/peymanghahremani/tensorflow/lib/python2.7/site-packages/pip/req/req_set.py\", line 620, in _prepare_file\nsession=self.session, hashes=hashes)\n  File \"/Users/peymanghahremani/tensorflow/lib/python2.7/site-packages/pip/download.py\", line 821, in unpack_url\nhashes=hashes\n  File \"/Users/peymanghahremani/tensorflow/lib/python2.7/site-packages/pip/download.py\", line 659, in unpack_http_url\nhashes)\n  File \"/Users/peymanghahremani/tensorflow/lib/python2.7/site-packages/pip/download.py\", line 853, in _download_http_url\nstream=True,\n  File \"/Users/peymanghahremani/tensorflow/lib/python2.7/site-packages/pip/_vendor/requests/sessions.py\", line 488, in get\nreturn self.request('GET', url, **kwargs)\n  File \"/Users/peymanghahremani/tensorflow/lib/python2.7/site-packages/pip/download.py\", line 386, in request\nreturn super(PipSession, self).request(method, url, *args, **kwargs)\n  File \"/Users/peymanghahremani/tensorflow/lib/python2.7/site-packages/pip/_vendor/requests/sessions.py\", line 475, in request\nresp = self.send(prep, **send_kwargs)\n  File \"/Users/peymanghahremani/tensorflow/lib/python2.7/site-packages/pip/_vendor/requests/sessions.py\", line 596, in send\nr = adapter.send(request, **kwargs)\n  File \"/Users/peymanghahremani/tensorflow/lib/python2.7/site-packages/pip/_vendor/cachecontrol/adapter.py\", line 47, in send\nresp = super(CacheControlAdapter, self).send(request, **kw)\n  File \"/Users/peymanghahremani/tensorflow/lib/python2.7/site-packages/pip/_vendor/requests/adapters.py\", line 497, in send\nraise SSLError(e, request=request)\nSSLError: [SSL: TLSV1_ALERT_PROTOCOL_VERSION] tlsv1 alert protocol version (_ssl.c:590)\n</code></pre>\n"}, {"tags": ["python", "google-api", "google-drive-api", "jupyter"], "comments": [{"owner": {"reputation": 3106, "user_id": 1844376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPxhs.jpg?s=128&g=1", "display_name": "ScottMcC", "link": "https://stackoverflow.com/users/1844376/scottmcc"}, "edited": false, "score": 1, "creation_date": 1527734766, "post_id": 50612508, "comment_id": 88241716, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/41961949/google-oauth-inside-jupyter-notebook\">Google-oauth inside Jupyter Notebook</a>"}], "answers": [{"tags": [], "owner": {"reputation": 140, "user_id": 7241218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db396255bc97279114bfc8196fdf7b10?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Tremer", "link": "https://stackoverflow.com/users/7241218/daniel-tremer"}, "is_accepted": false, "score": 0, "last_activity_date": 1527726169, "creation_date": 1527726169, "answer_id": 50615026, "question_id": 50612508, "link": "https://stackoverflow.com/questions/50612508/error-setting-up-drive-api-with-python-from-jupyter/50615026#50615026", "title": "Error setting up Drive API with Python from Jupyter", "body": "<p>I'm using google colab with and adding a drive are these 3 Cells:</p>\n\n<p>Cell  1:</p>\n\n<pre><code>!apt-get install -y -qq software-properties-common python-software-properties module-init-tools\n!add-apt-repository -y ppa:alessandro-strada/ppa 2&gt;&amp;1 &gt; /dev/null\n!apt-get update -qq 2&gt;&amp;1 &gt; /dev/null\n!apt-get -y install -qq google-drive-ocamlfuse fuse\n\nfrom google.colab import authi\nauth.authenticate_user()\nfrom oauth2client.client import GoogleCredentials\ncreds = GoogleCredentials.get_application_default()\nimport getpass\n\n!google-drive-ocamlfuse -headless -id={creds.client_id} -secret={creds.client_secret} &lt; /dev/null 2&gt;&amp;1 | grep URL\nvcode = getpass.getpass()\n!echo {vcode} | google-drive-ocamlfuse -headless -id={creds.client_id} -secret={creds.client_secret}\n</code></pre>\n\n<p>Cell  2:</p>\n\n<pre><code>!mkdir -p drive\n!google-drive-ocamlfuse drive\n</code></pre>\n\n<p>Cell 3 (output drive folder):</p>\n\n<pre><code>!ls drive\n</code></pre>\n\n<p>To access the drive use:</p>\n\n<pre><code>path = 'drive/somedrivefolder'\n</code></pre>\n"}], "owner": {"reputation": 1400, "user_id": 3861965, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/t09dC.jpg?s=128&g=1", "display_name": "mcansado", "link": "https://stackoverflow.com/users/3861965/mcansado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 547, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1527757680, "creation_date": 1527710151, "last_edit_date": 1527757680, "question_id": 50612508, "link": "https://stackoverflow.com/questions/50612508/error-setting-up-drive-api-with-python-from-jupyter", "title": "Error setting up Drive API with Python from Jupyter", "body": "<p>I'm following the <a href=\"https://developers.google.com/drive/api/v3/quickstart/python\" rel=\"nofollow noreferrer\">Google Quickstart Guide</a> to set-up Python to access the Google Drive API from a Jupyter notebook (with the ultimate goal of adding a csv to a specific Google Drive folder).</p>\n\n<p>After following steps 1) and 2), I'm adding the quickstart code.</p>\n\n<p>quickstart.py</p>\n\n<pre><code>\"\"\"\nShows basic usage of the Drive v3 API.\n\nCreates a Drive v3 API service and prints the names and ids of the last 10 files\nthe user has access to.\n\"\"\"\nfrom __future__ import print_function\nfrom apiclient.discovery import build\nfrom httplib2 import Http\nfrom oauth2client import file, client, tools\n\n# Setup the Drive v3 API\nSCOPES = 'https://www.googleapis.com/auth/drive.metadata.readonly'\nstore = file.Storage('credentials.json')\ncreds = store.get()\nif not creds or creds.invalid:\n    flow = client.flow_from_clientsecrets('client_secret.json', SCOPES)\n    creds = tools.run_flow(flow, store)\nservice = build('drive', 'v3', http=creds.authorize(Http()))\n\n# Call the Drive v3 API\nresults = service.files().list(\n    pageSize=10, fields=\"nextPageToken, files(id, name)\").execute()\nitems = results.get('files', [])\nif not items:\n    print('No files found.')\nelse:\n    print('Files:')\n    for item in items:\n        print('{0} ({1})'.format(item['name'], item['id']))\n</code></pre>\n\n<p>Running that, I'm getting the following error:</p>\n\n<pre><code>usage: ipykernel_launcher.py [--auth_host_name AUTH_HOST_NAME]\n                             [--noauth_local_webserver]\n                             [--auth_host_port [AUTH_HOST_PORT [AUTH_HOST_PORT ...]]]\n                             [--logging_level {DEBUG,INFO,WARNING,ERROR,CRITICAL}]\nipykernel_launcher.py: error: unrecognized arguments: -f /Users/miguel/Library/Jupyter/runtime/kernel-dc5eae05-373c-42a9-a2da-86c096ca8330.json\n</code></pre>\n\n<p>I've googled and found some stuff here (including <a href=\"https://chat.stackoverflow.com/transcript/143133/2017/5/2/0-2\">this</a> chat which seems like a similar issue) but I can't fix the problem. After commenting out parts of the code, it seems like the line throwing the error is </p>\n\n<pre><code>creds = tools.run_flow(flow, store)\n</code></pre>\n\n<p>Any idea how to solve this?</p>\n\n<p><strong>EDIT:</strong> </p>\n\n<p>I managed to find a <a href=\"https://codelabs.developers.google.com/codelabs/gsuite-apis-intro/#6\" rel=\"nofollow noreferrer\">better Google tutorial</a> to follow. Following all the steps there, <strong>I can get the script to work as a standalone python script.</strong> However, it still doesn't work when run from a Jupyter notebook.</p>\n\n<p>The code used is similar to the previous one. </p>\n\n<pre><code>from __future__ import print_function\n\nfrom apiclient import discovery\nfrom httplib2 import Http\nfrom oauth2client import file, client, tools\n\nSCOPES = 'https://www.googleapis.com/auth/drive.readonly.metadata'\nstore = file.Storage('storage.json')\ncreds = store.get()\nif not creds or creds.invalid:\n    flow = client.flow_from_clientsecrets('client_secret.json', SCOPES)\n    creds = tools.run_flow(flow, store)\nDRIVE = discovery.build('drive', 'v3', http=creds.authorize(Http()))\n\nfiles = DRIVE.files().list().execute().get('files', [])\nfor f in files:\n    print(f['name'], f['mimeType'])\n</code></pre>\n\n<p>The line throwing the error is the same:</p>\n\n<pre><code>creds = tools.run_flow(flow, store)\n</code></pre>\n\n<p>And the error returned is the same:</p>\n\n<pre><code>usage: ipykernel_launcher.py [--auth_host_name AUTH_HOST_NAME]\n                             [--noauth_local_webserver]\n                             [--auth_host_port [AUTH_HOST_PORT [AUTH_HOST_PORT ...]]]\n                             [--logging_level {DEBUG,INFO,WARNING,ERROR,CRITICAL}]\nipykernel_launcher.py: error: unrecognized arguments: -f /Users/miguel/Library/Jupyter/runtime/kernel-a0ff6ecb-3947-41be-be03-d2d96776fc8e.json\n</code></pre>\n\n<p>For clarity: the main thing from this edit is that the code works from a standalone script but not when run in a Jupyter notebook. </p>\n"}, {"tags": ["python", "class", "sqlite", "init"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1527710976, "post_id": 50612475, "comment_id": 88235261, "body": "What is that <code>g</code> supposed to be in your <code>get_db</code> and <code>close_db</code> methods? Also, I doubt you really want to call global functions like <code>get_db()</code> and <code>init_db()</code> rather than calling methods like <code>self.get_db()</code> and <code>self.init_db()</code>. I suspect what you really need is to work through a basic tutorial on OO first, and <i>then</i> come back and try to apply it to your design."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 1, "creation_date": 1527711082, "post_id": 50612475, "comment_id": 88235299, "body": "To try to answer your question in simple terms: the point of having a class is that you can construct instances of that class, and you can store state that&#39;s shared between methods of that instance, by assigning values as attributes of that instance. You&#39;re not doing anything remotely like that in your code, so there is no point to your class. But it&#39;s easy to come up with examples where there <i>is</i> a point, and any good tutorial will include such examples, which will get the idea across."}, {"owner": {"reputation": 251, "user_id": 5469157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc8af076c1ff00937c0ef73af1eb667?s=128&d=identicon&r=PG&f=1", "display_name": "Jack ", "link": "https://stackoverflow.com/users/5469157/jack"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1527713644, "post_id": 50612475, "comment_id": 88236282, "body": "You&#39;re correct in your analysis that I haven&#39;t done much OO. Ought I to be calling self.get_db() even when using db.py? <code>g</code> is a global dict in flask I think. Well if you see them as unnecessary then I make no issue in removing them and will continue to just call <code>get_db</code>. Thank you."}], "owner": {"reputation": 251, "user_id": 5469157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc8af076c1ff00937c0ef73af1eb667?s=128&d=identicon&r=PG&f=1", "display_name": "Jack ", "link": "https://stackoverflow.com/users/5469157/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 864, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1527709990, "creation_date": 1527709990, "question_id": 50612475, "link": "https://stackoverflow.com/questions/50612475/how-do-i-use-def-init-self-in-a-class-to-call-my-sqlite3-database", "title": "How do I use def __init__(self): in a class to call my sqlite3 database?", "body": "<p>I'm using Flask and I have a file of python functions: db.py, however, every time I call a function in other python files I have to call <code>get_db()</code> to get the database and I have to import the files for the function.</p>\n\n<p>db.py:</p>\n\n<pre><code>import sqlite3\nimport click\n\nfrom flask import current_app, g\nfrom flask.cli import with_appcontext\n\ndef get_db():\n    if 'db' not in g:\n        g.db = sqlite3.connect(\n            current_app.config['DATABASE'],\n            detect_types=sqlite3.PARSE_DECLTYPES\n        )\n        g.db.row_factory = sqlite3.Row\n    return g.db\n\ndef close_db(e=None):\n    db = g.pop('db', None)\n    if db is not None:\n        db.close()\n\ndef init_db():\n    db = get_db()\n    with current_app.open_resource('schema.sql') as f:\n        db.executescript(f.read().decode('utf8'))\n\n@click.command('init-db')\n@with_appcontext\ndef init_db_command():\n    \"\"\"Clear the existing data and create new tables.\"\"\"\n    init_db()\n    click.echo('Initialized the database.')\n\ndef init_app(app):\n    app.teardown_appcontext(close_db)\n    app.cli.add_command(init_db_command)\n</code></pre>\n\n<p>So in another file, I have to import the file (<code>from myapp.db import get_db</code>) and call <code>db = get_db()</code> to get the database.</p>\n\n<p>routes.py:</p>\n\n<pre><code>from myapp.db import get_db\n\n@app.route('/register', methods=('GET', 'POST'))\ndef register():\n    if request.method == 'POST':\n        username = request.form['username']\n        password = request.form['password']\n        email = request.form['email']\n\n        db = get_db()\n        error = None\n\n       &lt;more code here&gt;\n\n        if db.execute(\n        'SELECT id FROM user WHERE username = ?', (username,)\n    ).fetchone() is not None:\n        error = 'Username {} is already registered.'.format(username)\n\n       &lt;more code here&gt;\n\n        db.execute(\n            'INSERT INTO user (username, password, email, signup_date) VALUES (?, ?, ?, ?)',\n            (username, generate_password_hash(password), email, now_time)\n        )\n        db.commit()\n\n       &lt;more code here&gt;\n</code></pre>\n\n<p>But I wanted to know if it is possible that just by calling <code>db.execute()</code> for example, it would <code>get_db()</code> naturally if I have imported it.</p>\n\n<p>I'm trying to build the class like this in db2.py:</p>\n\n<pre><code>class DatabaseFunctions:\n    import sqlite3\n    import click\n    def __init__(self, db):\n        self.db = db \n        db = qlite3.connect(\n            current_app.config['DATABASE'],\n            detect_types=sqlite3.PARSE_DECLTYPES\n        )\n\n    def get_db(self):\n    if 'db' not in g:\n        g.db = sqlite3.connect(\n            current_app.config['DATABASE'],\n            detect_types=sqlite3.PARSE_DECLTYPES\n        )\n        g.db.row_factory = sqlite3.Row\n    return g.db\n\n    def close_db(self, e=None):\n        db = g.pop('db', None)\n        if db is not None:\n            db.close()\n\n    def init_db(self):\n        db = get_db()\n        with current_app.open_resource('schema.sql') as f:\n            db.executescript(f.read().decode('utf8'))\n\n    @click.command('init-db')\n    @with_appcontext\n    def init_db_command():\n        \"\"\"Clear the existing data and create new tables.\"\"\"\n        init_db()\n        click.echo('Initialized the database.')\n\n    def init_app(self, app):\n        app.teardown_appcontext(close_db)\n        app.cli.add_command(init_db_command)\n</code></pre>\n\n<p>I also want to expand db2.py into a allfunctions.py file and I'm told classes are best practice. However, I struggle with the self and <strong>init</strong> and even with quite a bit of reading, I don't see the point in a class when you can just have a page of functions.</p>\n\n<p>Any help would be appreciated. </p>\n"}, {"tags": ["python", "django", "nginx", "gunicorn"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 9169127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/095f5751dbac145159ec5659639b1b04?s=128&d=identicon&r=PG&f=1", "display_name": "J. Santiago", "link": "https://stackoverflow.com/users/9169127/j-santiago"}, "edited": false, "score": 0, "creation_date": 1527716277, "post_id": 50612728, "comment_id": 88237251, "body": "I&#39;ve added location /static/admin in this way but still doesn&#39;t work"}, {"owner": {"reputation": 21495, "user_id": 62288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01239dcaa443502ce71059f5308bca74?s=128&d=identicon&r=PG", "display_name": "Dave W. Smith", "link": "https://stackoverflow.com/users/62288/dave-w-smith"}, "reply_to_user": {"reputation": 51, "user_id": 9169127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/095f5751dbac145159ec5659639b1b04?s=128&d=identicon&r=PG&f=1", "display_name": "J. Santiago", "link": "https://stackoverflow.com/users/9169127/j-santiago"}, "edited": false, "score": 0, "creation_date": 1527732366, "post_id": 50612728, "comment_id": 88241154, "body": "In your position now, I&#39;d use the browser tools to see what URLs the app is trying to fetch, then I&#39;d match those up against nginx logs."}], "tags": [], "owner": {"reputation": 21495, "user_id": 62288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01239dcaa443502ce71059f5308bca74?s=128&d=identicon&r=PG", "display_name": "Dave W. Smith", "link": "https://stackoverflow.com/users/62288/dave-w-smith"}, "is_accepted": false, "score": 0, "last_activity_date": 1527711293, "creation_date": 1527711293, "answer_id": 50612728, "question_id": 50612452, "link": "https://stackoverflow.com/questions/50612452/missing-files-in-django-admin-dashboard/50612728#50612728", "title": "Missing files in Django admin dashboard", "body": "<p>We had issues getting collectstatic working with admin in an older version of Django, and fixed it in our nginx config by doing something like</p>\n\n<pre><code>location /static {\n    root /path/project;\n}\nlocation /static/admin {\n    root /path/venv/lib/python3.4/site-packages/django/contrib/admin;\n}\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 9169127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/095f5751dbac145159ec5659639b1b04?s=128&d=identicon&r=PG&f=1", "display_name": "J. Santiago", "link": "https://stackoverflow.com/users/9169127/j-santiago"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1527711293, "creation_date": 1527709912, "last_edit_date": 1527710208, "question_id": 50612452, "link": "https://stackoverflow.com/questions/50612452/missing-files-in-django-admin-dashboard", "title": "Missing files in Django admin dashboard", "body": "<p>I'm a newbie in Django and I have this problem.\nWhen I enter to my admin dashboard, CSS and JS files aren't shown. When I follow the URL, it appears</p>\n\n<blockquote>\n  <p>404 Not Found  </p>\n</blockquote>\n\n<p>I'm using Nginx + Gunicorn.</p>\n\n<p>This is my Nginx configuration:</p>\n\n<pre><code>server {\nserver_name MYPROJECT.COM;\n\naccess_log off;\n\nlocation /static {\n    alias /opt/myenv/myenv/MYPROJECT/static/;\n}\n\nlocation / {\n    proxy_pass http://127.0.0.1:8000;\n    proxy_set_header X-Forwarded-Host $server_name;\n    proxy_set_header X-Real-IP $remote_addr;\n    add_header P3P 'CP=\"ALL DSP COR PSAa PSDa OUR NOR ONL UNI COM NAV\"';\n}\n</code></pre>\n\n<p>Also this is settings.py static configuration:</p>\n\n<pre><code>STATIC_URL = '/static/'\nSTATIC_ROOT = os.path.join(BASE_DIR, \"static\")\n</code></pre>\n\n<p>My css admin files are stored in<code>/opt/myenv/myenv/MYPROJECT/static/admin</code>\n, but also in <code>/opt/myenv/myenv/static/admin</code></p>\n\n<p>I've uploaded the files in both directories and run <code>collectstatic</code>\nCan anyone help me?\nThanks, everyone!</p>\n"}, {"tags": ["python", "string"], "comments": [{"owner": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 2, "creation_date": 1527709970, "post_id": 50612447, "comment_id": 88234823, "body": "Implement a FSM."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 1, "creation_date": 1527716263, "post_id": 50612447, "comment_id": 88237244, "body": "@IgnacioVazquez-Abrams a <a href=\"https://en.wikipedia.org/wiki/Flying_Spaghetti_Monster\" rel=\"nofollow noreferrer\">Flying Spaghetti Monster</a>? /s"}], "answers": [{"tags": [], "owner": {"reputation": 547, "user_id": 5624170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5YbHB.jpg?s=128&g=1", "display_name": "mmghu", "link": "https://stackoverflow.com/users/5624170/mmghu"}, "is_accepted": false, "score": 2, "last_activity_date": 1527710409, "creation_date": 1527710409, "answer_id": 50612560, "question_id": 50612447, "link": "https://stackoverflow.com/questions/50612447/how-to-run-a-function-while-ignoring-several-lines-in-python/50612560#50612560", "title": "How to run a function while ignoring several lines in Python?", "body": "<pre><code>between_strings = False\n\nfor line in lines:\n    if line == 'str1':\n        between_strings = True\n    elif line == 'str2':\n        between_strings = False\n        continue\n    if not between_strings:\n        re.sub(line)\n</code></pre>\n\n<p>Here is how I would implement this. It would check each line, and when it finds str1, set between_strings to True. When it is True it would skip lines. Once it finds str2 it will begin reading lines again. Let me know if you have any questions.</p>\n"}, {"tags": [], "owner": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "is_accepted": false, "score": 0, "last_activity_date": 1527716139, "creation_date": 1527716139, "answer_id": 50613671, "question_id": 50612447, "link": "https://stackoverflow.com/questions/50612447/how-to-run-a-function-while-ignoring-several-lines-in-python/50613671#50613671", "title": "How to run a function while ignoring several lines in Python?", "body": "<p>you can use a loop within a loop to skip lines while iterating over a file</p>\n\n<pre><code>with open(infile) as f:\n    for line in f:\n        if line == 'str1':\n            for line in f:\n                if line=='str2': break\n        else:\n            re.sub(line)\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 9393405, "user_type": "registered", "profile_image": "https://graph.facebook.com/1262043243895879/picture?type=large", "display_name": "EvelynZ", "link": "https://stackoverflow.com/users/9393405/evelynz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1527716139, "creation_date": 1527709902, "question_id": 50612447, "link": "https://stackoverflow.com/questions/50612447/how-to-run-a-function-while-ignoring-several-lines-in-python", "title": "How to run a function while ignoring several lines in Python?", "body": "<p>I have a file that looks like this:</p>\n\n<blockquote>\n  <p>a<br>\n  b<br>\n  str1<br>\n  c<br>\n  d<br>\n  str2<br>\n  e<br>\n  f  </p>\n</blockquote>\n\n<p>Now I want to run a re.sub() function that applies to lines in this file except lines between \"str1\" and \"str2\" (i.e. only apply to line \"a\", \"b\", \"e\" and \"f\"). How should I do this? Thanks! </p>\n"}, {"tags": ["python", "python-3.x", "discord.py"], "comments": [{"owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "edited": false, "score": 0, "creation_date": 1527710076, "post_id": 50612394, "comment_id": 88234863, "body": "Are you sure that <code>@asyncio.coroutine</code> is necessary?"}, {"owner": {"reputation": 147, "user_id": 7088673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LM3wX.png?s=128&g=1", "display_name": "TermoZour", "link": "https://stackoverflow.com/users/7088673/termozour"}, "reply_to_user": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "edited": false, "score": 0, "creation_date": 1527711370, "post_id": 50612394, "comment_id": 88235399, "body": "Since the bots examples and the discord.py documentation both use <code>@asyncio.coroutine</code>, I&#39;ll use it too. Thinking the command could be ran on multiple servers at the same time, I think it would be needed because of that. Yes, this here is just an example and me trying to understand the api, but for other commands it would surely be needed"}, {"owner": {"reputation": 23589, "user_id": 6622817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93f66cc4703b66b835cf13dfeee21e7b?s=128&d=identicon&r=PG&f=1", "display_name": "abccd", "link": "https://stackoverflow.com/users/6622817/abccd"}, "edited": false, "score": 0, "creation_date": 1527715912, "post_id": 50612394, "comment_id": 88237128, "body": "&quot;Ignoring exception in command move&quot;, you hadn&#39;t post that in your code."}, {"owner": {"reputation": 23589, "user_id": 6622817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93f66cc4703b66b835cf13dfeee21e7b?s=128&d=identicon&r=PG&f=1", "display_name": "abccd", "link": "https://stackoverflow.com/users/6622817/abccd"}, "edited": false, "score": 0, "creation_date": 1527717576, "post_id": 50612394, "comment_id": 88237691, "body": "Plus, you installed the stable version of discord.py, and you&#39;re reading the rewrite version&#39;s documentation. You need to set pass_context=True when forming the command."}, {"owner": {"reputation": 147, "user_id": 7088673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LM3wX.png?s=128&g=1", "display_name": "TermoZour", "link": "https://stackoverflow.com/users/7088673/termozour"}, "edited": false, "score": 0, "creation_date": 1527740186, "post_id": 50612394, "comment_id": 88242909, "body": "How would I go about installing the rewrite version of <code>Discord.py</code> instead of the stable version ?"}], "answers": [{"tags": [], "owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "is_accepted": true, "score": 1, "last_activity_date": 1527717079, "creation_date": 1527717079, "answer_id": 50613823, "question_id": 50612394, "link": "https://stackoverflow.com/questions/50612394/how-do-i-get-a-server-object-from-a-command-without-arguments-discord-py/50613823#50613823", "title": "How do I get a server object from a command without arguments discord.py", "body": "<p>You need to pass <code>pass_context=True</code> to <code>@bot.command</code></p>\n\n<pre><code>@bot.command(pass_context=True)\n@asyncio.coroutine\ndef info(ctx):\n    server = ctx.message.author.server\n    server_name = server.name\n    server_id = server.id\n    server_owner = server.owner.name\n\n    print(\"server name: {}\"\n          \"server id: {}\"\n          \"server owner: {}\"\n          .format(server_name, server_id, server_owner))\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 7088673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LM3wX.png?s=128&g=1", "display_name": "TermoZour", "link": "https://stackoverflow.com/users/7088673/termozour"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1833, "favorite_count": 0, "accepted_answer_id": 50613823, "answer_count": 1, "score": 1, "last_activity_date": 1527717079, "creation_date": 1527709681, "question_id": 50612394, "link": "https://stackoverflow.com/questions/50612394/how-do-i-get-a-server-object-from-a-command-without-arguments-discord-py", "title": "How do I get a server object from a command without arguments discord.py", "body": "<p>I'm trying to make a bot that will show in the console the server info when I do <code>!info</code> without passing any arguments to it using discord.py on Python. All I've found involves passing arguments.</p>\n\n<p>This is what I've tried so far:</p>\n\n<pre><code>@bot.command()\n@asyncio.coroutine\ndef info(ctx):\n    server = ctx.message.author.server\n    server_name = server.name\n    server_id = server.id\n    server_owner = server.owner.name\n\n    print(\"server name: {}\"\n          \"server id: {}\"\n          \"server owner: {}\"\n          .format(server_name, server_id, server_owner))\n</code></pre>\n\n<p>And when ran, it shows this in the console:</p>\n\n<pre><code>Ignoring exception in command move\nTraceback (most recent call last):\n  File \"D:\\PycharmProjects\\Movey\\venv\\lib\\site-packages\\discord\\ext\\commands\\bot.py\", line 846, in process_commands\n    yield from command.invoke(ctx)\n  File \"D:\\PycharmProjects\\Movey\\venv\\lib\\site-packages\\discord\\ext\\commands\\core.py\", line 367, in invoke\n    yield from self.prepare(ctx)\n  File \"D:\\PycharmProjects\\Movey\\venv\\lib\\site-packages\\discord\\ext\\commands\\core.py\", line 345, in prepare\n    yield from self._parse_arguments(ctx)\n  File \"D:\\PycharmProjects\\Movey\\venv\\lib\\site-packages\\discord\\ext\\commands\\core.py\", line 304, in _parse_arguments\n    transformed = yield from self.transform(ctx, param)\n  File \"D:\\PycharmProjects\\Movey\\venv\\lib\\site-packages\\discord\\ext\\commands\\core.py\", line 212, in transform\n    raise MissingRequiredArgument('{0.name} is a required argument that is missing.'.format(param))\ndiscord.ext.commands.errors.MissingRequiredArgument: ctx is a required argument that is missing.\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 3667, "user_id": 6789321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-B5oSDMyNAyc/AAAAAAAAAAI/AAAAAAAAT6s/i6ZRf_boOu4/photo.jpg?sz=128", "display_name": "accdias", "link": "https://stackoverflow.com/users/6789321/accdias"}, "edited": false, "score": 0, "creation_date": 1527711191, "post_id": 50612386, "comment_id": 88235327, "body": "For <code>nBins = 100</code> how would you group <code>myData[&#39;Gene3&#39;]</code>? Are you assuming <code>len(myData[&#39;key&#39;]) % nBins</code>?"}, {"owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 0, "creation_date": 1527711226, "post_id": 50612386, "comment_id": 88235338, "body": "Requests such as &quot;I&#39;m looking for a library&quot; are explicitly off-topic for this site. If you edit your question so as to accomplish your goal efficiently, and you show some effort of your own, you will probably get good answers."}], "answers": [{"comments": [{"owner": {"reputation": 3667, "user_id": 6789321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-B5oSDMyNAyc/AAAAAAAAAAI/AAAAAAAAT6s/i6ZRf_boOu4/photo.jpg?sz=128", "display_name": "accdias", "link": "https://stackoverflow.com/users/6789321/accdias"}, "edited": false, "score": 0, "creation_date": 1527712426, "post_id": 50612738, "comment_id": 88235824, "body": "Isn&#39;t <code>len(l) + len(l)</code> better as <code>2 * len(l)</code>?"}, {"owner": {"reputation": 3667, "user_id": 6789321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-B5oSDMyNAyc/AAAAAAAAAAI/AAAAAAAAT6s/i6ZRf_boOu4/photo.jpg?sz=128", "display_name": "accdias", "link": "https://stackoverflow.com/users/6789321/accdias"}, "edited": false, "score": 0, "creation_date": 1527712486, "post_id": 50612738, "comment_id": 88235849, "body": "Oh! Forget about it. I didn&#39;t take into consideration the operators precedence."}, {"owner": {"reputation": 45, "user_id": 5905166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a51b9a6b25533a9bede4030587e802f?s=128&d=identicon&r=PG&f=1", "display_name": "Ed Doe", "link": "https://stackoverflow.com/users/5905166/ed-doe"}, "edited": false, "score": 0, "creation_date": 1527713044, "post_id": 50612738, "comment_id": 88236043, "body": "Thank you! You were correct in saying that this will be fast enough for data on my scale. I tested it again on sample data generated via this method, and it still computed the groupings pretty quickly (~12 seconds).  <code>import random;     myData = {     &#39;Gene{}&#39;.format(i) : [random.randint(0,4) for j in range(5000)] for i in      range(20000)     }</code>"}], "tags": [], "owner": {"reputation": 5056, "user_id": 8472976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/808aa1971d8e50ab541e1f54a705afad?s=128&d=identicon&r=PG&f=1", "display_name": "MegaIng", "link": "https://stackoverflow.com/users/8472976/megaing"}, "is_accepted": false, "score": 1, "last_activity_date": 1527711343, "creation_date": 1527711343, "answer_id": 50612738, "question_id": 50612386, "link": "https://stackoverflow.com/questions/50612386/regrouping-a-list-positionally-into-quantiles/50612738#50612738", "title": "Regrouping a list positionally into quantiles", "body": "<p>You don't need a library. Pure python should be fast enough in 90% of the cases:</p>\n\n<pre><code>nBins = 100\n\ndef group(l, size):\n    return [l[i:i + size] for i in range(0, len(l) + len(l) % size, size)]\n\n\nbin_data = {k: group(l, len(l) // nBins ) for k, l in myData.items()}\nprint(bin_data)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 5905166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a51b9a6b25533a9bede4030587e802f?s=128&d=identicon&r=PG&f=1", "display_name": "Ed Doe", "link": "https://stackoverflow.com/users/5905166/ed-doe"}, "edited": false, "score": 0, "creation_date": 1527711976, "post_id": 50612770, "comment_id": 88235660, "body": "Yes, I made an off-by-one error. The lengths are 201, 301, and 428. The idea was to illustrate that each gene has a random number of elements that may not be neatly divisible."}], "tags": [], "owner": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "is_accepted": true, "score": 1, "last_activity_date": 1527711497, "creation_date": 1527711497, "answer_id": 50612770, "question_id": 50612386, "link": "https://stackoverflow.com/questions/50612386/regrouping-a-list-positionally-into-quantiles/50612770#50612770", "title": "Regrouping a list positionally into quantiles", "body": "<p>Are you sure the length of Gene1 isn't 201?</p>\n\n<p>You don't say what you want to happen in the case where the length isn't divisible by the number of bins. My code mixes sublists of length floor(length/nBins) and ceiling(length/nBins) to get the right number of bins.</p>\n\n<pre><code>new_data = {key : [value[\n           int(bin_number*len(value)/nBins):\n           int((bin_number+1)*len(value)/nBins)\n                ]\n            for bin_number in range(nBins)] for key, value in myData.items()}\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 5905166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a51b9a6b25533a9bede4030587e802f?s=128&d=identicon&r=PG&f=1", "display_name": "Ed Doe", "link": "https://stackoverflow.com/users/5905166/ed-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 50612770, "answer_count": 2, "score": 0, "last_activity_date": 1527711996, "creation_date": 1527709645, "last_edit_date": 1527711996, "question_id": 50612386, "link": "https://stackoverflow.com/questions/50612386/regrouping-a-list-positionally-into-quantiles", "title": "Regrouping a list positionally into quantiles", "body": "<p>I have a dict in which each key corresponds to a gene name, and each value corresponds to a list. The length of the list is different for each gene, because each element represents a different nucleotide. The number at each position indicates the \"score\" of the nucleotide.</p>\n\n<p>Because each gene is a different length, I want to be able to directly compare their positional score distributions by splitting each gene up into quantiles (most likely, percentiles: 100 bins).</p>\n\n<p>Here is some simulation data:</p>\n\n<pre><code>myData = {\n'Gene1': [3, 1, 1, 2, 3, 1, 1, 1, 3, 0, 0, 0, 3, 3, 3, 0, 1, 2, 1, 3, 2, 2, 0, 2, 0, 1, 0, 3, 0, 3, 1, 1, 0, 3, 0, 0, 1, 0, 1, 0, 1, 3, 3, 2, 3, 1, 0, 1, 2, 2, 0, 3, 0, 2, 0, 1, 1, 2, 3, 3, 1, 2, 1, 3, 1, 0, 0, 3, 2, 0, 3, 0, 2, 1, 1, 1, 2, 1, 1, 3, 0, 1, 1, 1, 3, 3, 0, 2, 2, 1, 3, 2, 3, 0, 2, 3, 2, 1, 3, 1, 3, 2, 1, 3, 0, 3, 3, 0, 0, 1, 0, 3, 1, 1, 3, 0, 0, 2, 3, 1, 0, 2, 1, 2, 1, 2, 1, 2, 0, 1, 1, 1, 3, 1, 3, 1, 3, 2, 3, 3, 3, 1, 1, 2, 1, 0, 2, 2, 2, 0, 1, 0, 3, 1, 3, 2, 1, 3, 0, 1, 3, 1, 0, 1, 2, 1, 2, 2, 3, 2, 3, 2, 2, 2, 1, 2, 2, 0, 3, 1, 2, 1, 1, 3, 2, 2, 1, 3, 1, 0, 1, 3, 2, 2, 3, 0, 0, 1, 0, 0, 3],\n'Gene2': [3, 0, 0, 0, 3, 3, 1, 3, 3, 1, 0, 0, 1, 0, 1, 1, 3, 2, 2, 2, 0, 1, 3, 2, 1, 3, 1, 1, 2, 3, 0, 2, 0, 2, 1, 3, 3, 3, 1, 2, 3, 2, 3, 1, 3, 0, 1, 1, 1, 1, 3, 2, 0, 3, 0, 1, 1, 2, 3, 0, 2, 1, 3, 3, 0, 3, 2, 1, 1, 2, 0, 0, 1, 3, 3, 2, 2, 3, 1, 2, 1, 1, 0, 0, 1, 0, 3, 2, 3, 0, 2, 0, 2, 0, 2, 3, 0, 3, 0, 3, 2, 2, 0, 2, 3, 0, 2, 2, 3, 0, 3, 1, 2, 3, 0, 1, 0, 2, 3, 1, 3, 1, 2, 3, 1, 1, 0, 1, 3, 0, 2, 3, 3, 3, 3, 0, 1, 2, 2, 2, 3, 0, 3, 1, 0, 2, 3, 1, 0, 1, 1, 0, 3, 3, 1, 2, 1, 2, 3, 2, 3, 1, 2, 0, 2, 3, 1, 2, 3, 2, 1, 2, 2, 0, 0, 0, 0, 2, 0, 2, 3, 0, 2, 0, 0, 2, 0, 3, 3, 0, 1, 2, 3, 1, 3, 3, 1, 2, 1, 2, 1, 3, 2, 0, 2, 3, 0, 0, 0, 1, 1, 0, 1, 2, 0, 1, 2, 1, 3, 3, 0, 2, 2, 1, 0, 1, 1, 1, 0, 0, 2, 1, 2, 0, 1, 2, 1, 1, 3, 0, 1, 0, 1, 2, 1, 3, 0, 2, 3, 1, 2, 0, 0, 3, 2, 0, 3, 2, 1, 2, 3, 1, 0, 1, 0, 0, 1, 2, 3, 3, 2, 2, 1, 2, 2, 3, 3, 3, 3, 0, 0, 2, 2, 2, 2, 3, 2, 3, 2, 0, 3, 1, 0, 2, 3, 0, 1, 2, 2, 0, 2],\n'Gene3': [2, 3, 1, 0, 3, 2, 1, 0, 1, 2, 1, 2, 1, 3, 0, 2, 2, 3, 2, 0, 0, 0, 1, 1, 1, 1, 0, 0, 2, 3, 2, 2, 1, 3, 1, 2, 3, 0, 0, 3, 1, 0, 3, 2, 2, 3, 0, 0, 3, 3, 1, 1, 1, 0, 0, 2, 3, 2, 0, 2, 0, 1, 0, 2, 3, 0, 2, 0, 3, 3, 0, 0, 1, 0, 3, 2, 1, 1, 3, 3, 0, 2, 3, 1, 1, 0, 1, 3, 2, 1, 0, 3, 2, 0, 3, 2, 1, 1, 0, 3, 0, 0, 2, 0, 3, 3, 0, 2, 0, 3, 3, 2, 0, 0, 2, 2, 0, 2, 0, 0, 2, 3, 3, 3, 3, 1, 3, 0, 0, 3, 1, 0, 2, 2, 0, 0, 2, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 1, 3, 0, 0, 3, 0, 2, 2, 0, 0, 3, 0, 1, 3, 1, 1, 0, 2, 2, 3, 3, 0, 2, 0, 0, 2, 3, 1, 2, 1, 1, 2, 2, 0, 0, 3, 2, 2, 2, 1, 2, 0, 3, 2, 2, 2, 2, 1, 0, 3, 2, 2, 1, 0, 0, 2, 2, 0, 3, 2, 0, 2, 2, 1, 1, 1, 2, 1, 2, 0, 1, 0, 3, 2, 0, 2, 3, 3, 0, 2, 2, 0, 1, 1, 3, 0, 0, 1, 2, 3, 1, 3, 2, 3, 3, 2, 0, 0, 0, 0, 0, 2, 1, 0, 0, 1, 1, 2, 1, 3, 1, 3, 1, 1, 0, 3, 0, 1, 1, 1, 1, 1, 0, 2, 1, 2, 1, 2, 0, 2, 0, 0, 2, 2, 2, 3, 3, 0, 0, 3, 2, 1, 2, 1, 0, 3, 2, 3, 1, 1, 0, 1, 3, 2, 0, 3, 1, 3, 1, 2, 0, 0, 2, 3, 2, 2, 0, 3, 0, 2, 2, 2, 3, 3, 2, 1, 3, 3, 0, 2, 2, 2, 1, 1, 2, 1, 3, 2, 3, 2, 1, 3, 1, 0, 0, 2, 0, 1, 1, 3, 3, 0, 1, 2, 3, 1, 2, 3, 1, 1, 1, 2, 0, 2, 0, 1, 0, 3, 1, 0, 3, 3, 1, 3, 1, 1, 2, 2, 0, 2, 0, 1, 0, 3, 1, 1, 1, 3, 3, 0, 0, 1, 1, 2, 3, 0, 2, 0, 1, 1, 3, 3, 1, 1, 0, 0, 2, 0, 1, 2, 2, 2, 3, 1, 1, 1, 0, 3, 0, 0, 0, 1, 0, 1, 3, 1, 2, 2, 1, 2, 2]\n}\n</code></pre>\n\n<p>As you can see, Gene1 has a length of 201, and Gene2 has a length of 301. However, Gene3 has a length of 428. I want to summarize each of these lists so that, for an arbitrary number of bins (nBins), I can partition the list into a list of lists. </p>\n\n<p>For example, for the first two genes, if I chose nBins=100, then Gene1 would look like <code>[[3,1],[1,2],[3,1],[1,1]...]</code> while Gene2 would look like <code>[[3,0,0],[0,3,3],[1,3,3]...]</code>. That is, I want to partition based on the <em>positions</em> and not the values themselves. My dataset is large, so I'm looking for a library that can do this most efficiently.</p>\n"}, {"tags": ["python", "pandas", "dataframe", "matplotlib", "plot"], "comments": [{"owner": {"reputation": 9687, "user_id": 5178905, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1c0748e7186e5a37822dbba51012e5b4?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5178905/joe"}, "edited": false, "score": 0, "creation_date": 1527711112, "post_id": 50612340, "comment_id": 88235307, "body": "what happens if you remove .loc[&#39;2018-02-01&#39;:&#39;2018-02-02&#39;]?"}, {"owner": {"reputation": 1049, "user_id": 2040705, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/cf315dc3d8b2fa3e0e5b01bf9ab82ec0?s=128&d=identicon&r=PG", "display_name": "user40", "link": "https://stackoverflow.com/users/2040705/user40"}, "reply_to_user": {"reputation": 9687, "user_id": 5178905, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1c0748e7186e5a37822dbba51012e5b4?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5178905/joe"}, "edited": false, "score": 0, "creation_date": 1527711254, "post_id": 50612340, "comment_id": 88235355, "body": "@Joe I tried that, it calculates for extremely long time (&gt;30min and I stop the script), because the dataframe is very big, so I have to chose a specific interval."}, {"owner": {"reputation": 9687, "user_id": 5178905, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1c0748e7186e5a37822dbba51012e5b4?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5178905/joe"}, "edited": false, "score": 0, "creation_date": 1527711344, "post_id": 50612340, "comment_id": 88235386, "body": "with few rows, it plots correctly the aggregate without .loc Try as well, if it works, make the selection before the code you posted"}, {"owner": {"reputation": 1049, "user_id": 2040705, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/cf315dc3d8b2fa3e0e5b01bf9ab82ec0?s=128&d=identicon&r=PG", "display_name": "user40", "link": "https://stackoverflow.com/users/2040705/user40"}, "reply_to_user": {"reputation": 9687, "user_id": 5178905, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1c0748e7186e5a37822dbba51012e5b4?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5178905/joe"}, "edited": false, "score": 0, "creation_date": 1527711755, "post_id": 50612340, "comment_id": 88235558, "body": "@Joe I did new_df=df.set_index(&#39;payout_date&#39;).loc[&#39;2018-02-01&#39;:&#39;2018-02&zwnj;&#8203;-02&#39;] and then tried to use the initial code without .loc but I am getting &#39;KeyError: &#39;payout_date&#39;&#39; error, so there is not &#39;payout_date&#39; column in new_df? Why? How do I make the selection properly before the original code? Thanks"}], "answers": [{"tags": [], "owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "is_accepted": true, "score": 2, "last_activity_date": 1527713417, "last_edit_date": 1527713417, "creation_date": 1527711578, "answer_id": 50612785, "question_id": 50612340, "link": "https://stackoverflow.com/questions/50612340/how-to-aggregate-and-plot-data-from-pandas-dataframe/50612785#50612785", "title": "How to aggregate and plot data from pandas dataframe?", "body": "<p><strong><em>Setup</em></strong></p>\n\n<pre><code>df = pd.DataFrame({'payout_date': {0: '2017-02-01T11:00:06',   1: '2017-02-01T11:00:06',   2: '2017-02-02T00:00:00',   3: '2017-02-14T11:00:06',   4: '2017-02-14T11:00:06',   5: '2017-02-15T11:00:06',   6: '2017-02-15T11:00:06',   7: '2017-02-16T11:00:06',   8: '2017-02-16T11:00:06',   9: '2017-02-16T11:00:06'},  'total_value':{0: 177.313,   1: 22.0,   2: 25.0,   3: 47.391999999999996,   4: 16.254,   5: 125.818,   6: 85.0,   7: 42.0,8: 22.0,   9: 19.0}})\n</code></pre>\n\n<p>Use <strong><code>normalize</code></strong> to just group by day:</p>\n\n<pre><code>df.groupby(pd.DatetimeIndex(df.payout_date).normalize()).sum().reset_index()\n\n  payout_date  total_value\n0  2017-02-01      199.313\n1  2017-02-02       48.000\n2  2017-02-14       63.646\n3  2017-02-15      210.818\n4  2017-02-16       83.000\n</code></pre>\n\n<p>Extend the previous command to plot:</p>\n\n<pre><code>df.groupby(\n    pd.DatetimeIndex(df.payout_date)      \\\n    .normalize().strftime('%Y-%m-%d'))    \\\n    .agg(['sum'])                         \\\n    .reset_index()                        \\\n    .plot(x='index', y='total_value', kind='bar')\n\nplt.tight_layout()\nplt.show()\n</code></pre>\n\n<p>Output for my sample data:</p>\n\n<p><a href=\"https://i.stack.imgur.com/JX7gV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JX7gV.png\" alt=\"enter image description here\"></a></p>\n\n<p>If you want to apply this on a subset, you can do something like the following:</p>\n\n<pre><code>tmp = df.loc[(df.payout_date &gt; '2017-02-01') &amp; (df.payout_date &lt; '2017-02-15')]\n\ntmp.groupby(\n    pd.DatetimeIndex(tmp.payout_date)                     \\\n    .normalize().strftime('%Y-%m-%d'))['total_value']     \\\n    .agg(['sum'])\n\n# Result\n                sum\n2017-02-01  199.313\n2017-02-02   25.000\n2017-02-14   63.646\n</code></pre>\n\n<p>Which will only sum your desired range.</p>\n"}, {"comments": [{"owner": {"reputation": 1049, "user_id": 2040705, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/cf315dc3d8b2fa3e0e5b01bf9ab82ec0?s=128&d=identicon&r=PG", "display_name": "user40", "link": "https://stackoverflow.com/users/2040705/user40"}, "edited": false, "score": 1, "creation_date": 1527713195, "post_id": 50612801, "comment_id": 88236084, "body": "I got very strange result. What does &#39;index are selected before&#39; means? How do I select the index? Also, what df.iloc[1:7] stands for? What it&#39;s purpose?"}, {"owner": {"reputation": 9687, "user_id": 5178905, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1c0748e7186e5a37822dbba51012e5b4?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5178905/joe"}, "reply_to_user": {"reputation": 1049, "user_id": 2040705, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/cf315dc3d8b2fa3e0e5b01bf9ab82ec0?s=128&d=identicon&r=PG", "display_name": "user40", "link": "https://stackoverflow.com/users/2040705/user40"}, "edited": false, "score": 0, "creation_date": 1527744030, "post_id": 50612801, "comment_id": 88244000, "body": "@user40 With <code>df = df.iloc[1:7]</code> you select the rows. in this case from the row 1 to 7. If for example you want the first 1000 rows change to <code>df.iloc[0:1000]</code>"}], "tags": [], "owner": {"reputation": 9687, "user_id": 5178905, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1c0748e7186e5a37822dbba51012e5b4?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5178905/joe"}, "is_accepted": false, "score": 0, "last_activity_date": 1527711917, "last_edit_date": 1527711917, "creation_date": 1527711689, "answer_id": 50612801, "question_id": 50612340, "link": "https://stackoverflow.com/questions/50612340/how-to-aggregate-and-plot-data-from-pandas-dataframe/50612801#50612801", "title": "How to aggregate and plot data from pandas dataframe?", "body": "<p>Try in this way:</p>\n\n<pre><code>df = df.iloc[1:7]\n(df.set_index('payout_date')\n                .groupby('payout_date')\n                .agg(['sum'])\n                .reset_index()\n                .plot(x='payout_date', y='total_value',kind=\"bar\"))\nplt.show()\n</code></pre>\n\n<p>Where the index are selected before</p>\n"}], "owner": {"reputation": 1049, "user_id": 2040705, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/cf315dc3d8b2fa3e0e5b01bf9ab82ec0?s=128&d=identicon&r=PG", "display_name": "user40", "link": "https://stackoverflow.com/users/2040705/user40"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1245, "favorite_count": 0, "accepted_answer_id": 50612785, "answer_count": 2, "score": 1, "last_activity_date": 1527713417, "creation_date": 1527709467, "last_edit_date": 1527710089, "question_id": 50612340, "link": "https://stackoverflow.com/questions/50612340/how-to-aggregate-and-plot-data-from-pandas-dataframe", "title": "How to aggregate and plot data from pandas dataframe?", "body": "<p>I have this dataframe </p>\n\n<pre><code>df[['payout_date','total_value']].head(10)\n\n    payout_date         total_value\n0   2017-02-14T11:00:06  177.313\n1   2017-02-14T11:00:06  0.000\n2   2017-02-01T00:00:00  0.000\n3   2017-02-14T11:00:06  47.392\n4   2017-02-14T11:00:06  16.254\n5   2017-02-14T11:00:06  125.818\n6   2017-02-14T11:00:06  0.000\n7   2017-02-14T11:00:06  0.000\n8   2017-02-14T11:00:06  0.000\n9   2017-02-14T11:00:06  0.000\n</code></pre>\n\n<p>I am using this code to plot the aggregated sum of <code>total_value</code> within specific date-range by day (and by month), but it plots a bar for each <code>total_value</code> and doesn't sum-aggregate <code>total_value</code> by day. </p>\n\n<pre><code>(df.set_index('payout_date')\n                    .loc['2018-02-01':'2018-02-02']\n                    .groupby('payout_date')\n                    .agg(['sum'])\n                    .reset_index()\n                    .plot(x='payout_date', y='total_value',kind=\"bar\"))\nplt.show()\n</code></pre>\n\n<p>Data is not aggregated, I get bar for each value from df: </p>\n\n<p><a href=\"https://i.stack.imgur.com/LhpVl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LhpVl.png\" alt=\"enter image description here\"></a></p>\n\n<p>How to aggregate <code>total_value</code> by date and by month? </p>\n\n<p>I tried to use answers from <a href=\"https://stackoverflow.com/questions/50594613/how-to-plot-aggregated-by-date-pandas-dataframe\">this</a> and couple other similar questions but none of them worked for the date format that is used here. </p>\n\n<p>I also tried adding <code>.dt.to_period('M')</code> to the code but I get <code>TypeError: Empty 'DataFrame': no numeric data to plot</code> error. </p>\n"}, {"tags": ["python", "string"], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 9872340, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--N8n7qpiPeU/AAAAAAAAAAI/AAAAAAAABqg/j3RCTtYsWFE/photo.jpg?sz=128", "display_name": "Francesco", "link": "https://stackoverflow.com/users/9872340/francesco"}, "edited": false, "score": 0, "creation_date": 1527710056, "post_id": 50612359, "comment_id": 88234854, "body": "Solved my problem. Thank you very much !"}], "tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": false, "score": 0, "last_activity_date": 1527709570, "creation_date": 1527709570, "answer_id": 50612359, "question_id": 50612328, "link": "https://stackoverflow.com/questions/50612328/snake-game-str-object-is-not-callable/50612359#50612359", "title": "snake game - str object is not callable", "body": "<p>In your snake's <code>__init__</code> method you have defined an attribute, <code>self.changeDirectionTo</code>, which points to a string and which overrides the method with the same name.</p>\n\n<p>You should delete that line.</p>\n"}, {"tags": [], "owner": {"reputation": 4007, "user_id": 1370384, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/4RX8Q.jpg?s=128&g=1", "display_name": "user", "link": "https://stackoverflow.com/users/1370384/user"}, "is_accepted": false, "score": 0, "last_activity_date": 1527709583, "creation_date": 1527709583, "answer_id": 50612362, "question_id": 50612328, "link": "https://stackoverflow.com/questions/50612328/snake-game-str-object-is-not-callable/50612362#50612362", "title": "snake game - str object is not callable", "body": "<p>Get rid of this line from your <code>__init__</code> method:</p>\n\n<pre><code>self.changeDirectionTo = self.direction\n</code></pre>\n\n<p>You've made a function <code>changeDirectionTo</code> into a string...</p>\n"}, {"tags": [], "owner": {"reputation": 23980, "user_id": 1735756, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SloZJ.jpg?s=128&g=1", "display_name": "Haifeng Zhang", "link": "https://stackoverflow.com/users/1735756/haifeng-zhang"}, "is_accepted": false, "score": 0, "last_activity_date": 1527709989, "last_edit_date": 1527709989, "creation_date": 1527709635, "answer_id": 50612382, "question_id": 50612328, "link": "https://stackoverflow.com/questions/50612328/snake-game-str-object-is-not-callable/50612382#50612382", "title": "snake game - str object is not callable", "body": "<p>Remove </p>\n\n<pre><code> self.changeDirectionTo = self.direction\n</code></pre>\n\n<p>You name a method and instance variable with the same name which hides the method</p>\n\n<pre><code>class Hello:\n    def __init__(self):\n        self.hello = 'hello instance variable'\n\n    def hello(self):\n        print('hello')\n\nh = Hello()\nprint(h.hello)  # print out hello instance variable\nprint(h.hello())  # throw the error you got  TypeError: 'str' object is not callable\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 9872340, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--N8n7qpiPeU/AAAAAAAAAAI/AAAAAAAABqg/j3RCTtYsWFE/photo.jpg?sz=128", "display_name": "Francesco", "link": "https://stackoverflow.com/users/9872340/francesco"}, "edited": false, "score": 0, "creation_date": 1527929525, "post_id": 50612507, "comment_id": 88320453, "body": "Thanks to you I get it now :)"}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "reply_to_user": {"reputation": 45, "user_id": 9872340, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--N8n7qpiPeU/AAAAAAAAAAI/AAAAAAAABqg/j3RCTtYsWFE/photo.jpg?sz=128", "display_name": "Francesco", "link": "https://stackoverflow.com/users/9872340/francesco"}, "edited": false, "score": 0, "creation_date": 1527940621, "post_id": 50612507, "comment_id": 88323297, "body": "Glad to hear it! If an answer is useful to you consider upvoting it.  You can also select one answer is the best one by excepting it with a green check on the left"}], "tags": [], "owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "is_accepted": true, "score": 0, "last_activity_date": 1527710149, "creation_date": 1527710149, "answer_id": 50612507, "question_id": 50612328, "link": "https://stackoverflow.com/questions/50612328/snake-game-str-object-is-not-callable/50612507#50612507", "title": "snake game - str object is not callable", "body": "<p>Understanding the error message is key to solving the issue.</p>\n\n<p>When you call a function, you add parentheses along with any parameters:</p>\n\n<pre><code>&gt;&gt;&gt; def func():\n...     print('worked!')\n...\n&gt;&gt;&gt; func()\nworked!\n</code></pre>\n\n<p>But what happens when you add parentheses to something that isn't a function?</p>\n\n<pre><code>&gt;&gt;&gt; func = 1\n&gt;&gt;&gt; func()\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nTypeError: 'int' object is not callable\n\n&gt;&gt;&gt; func = 'abc'\n&gt;&gt;&gt; func()\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nTypeError: 'str' object is not callable\n</code></pre>\n\n<p>So your error indicates that the function you tried to call (<code>changeDirectionTo(3)</code>) isn't a function, but a string.</p>\n\n<p>Since you have a <code>def changeDirectionTo</code> line declaring it as a function, look for other uses of <code>changeDirectionTo</code> that override this definition.</p>\n\n<p>The problem is in <code>def __init__</code>.  These two lines declare a string and then assign it to the <code>changeDirectionTo</code>, overriding the previous function definition.</p>\n\n<pre><code> self.direction = \"RIGHT\"\n self.changeDirectionTo = self.direction\n</code></pre>\n\n<p>Use a different variable name or remove the line to fix the issue.</p>\n"}], "owner": {"reputation": 45, "user_id": 9872340, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--N8n7qpiPeU/AAAAAAAAAAI/AAAAAAAABqg/j3RCTtYsWFE/photo.jpg?sz=128", "display_name": "Francesco", "link": "https://stackoverflow.com/users/9872340/francesco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 50612507, "answer_count": 4, "score": 0, "last_activity_date": 1527710149, "creation_date": 1527709429, "question_id": 50612328, "link": "https://stackoverflow.com/questions/50612328/snake-game-str-object-is-not-callable", "title": "snake game - str object is not callable", "body": "<p>Sorry if the answer is easy, but I'm really stuck on this one...\nI'm trying to make a 'Snake game', but I get an error when I try to call the function to make my snake move.\nThe error states :</p>\n\n<pre><code>    Traceback (most recent call last):\n  File \"C:\\Users\\Fran\\Desktop\\SnakeISN.py\", line 89, in &lt;module&gt;\n    theApp.on_execute()\n  File \"C:\\Users\\Fran\\Desktop\\SnakeISN.py\", line 80, in on_execute\n    snake.changeDirectionTo(3)\nTypeError: 'str' object is not callable\n</code></pre>\n\n<p>whenever I start pressing an arrow key...\nimport pygame\nimport sys\nimport random</p>\n\n<pre><code>class Snake():\n    def __init__(self):\n     self.x=400\n     self.y=590\n     self.direction = \"RIGHT\"\n     self.changeDirectionTo = self.direction\n\n    def changeDirectionTo(self,dir):\n     if dir == 1 and not self.direction == 2:\n         self.direction = \"RIGHT\"\n     if dir == 2 and not self.direction == 1:\n         self.direction = \"LEFT\"\n     if dir == 3 and not self.direction == 4:\n         self.direction = \"UP\"\n     if dir == 4 and not self.direction == 3:\n         self.direction = \"DOWN\"\n\n    def move(self, foodPos):\n     if self.direction == \"RIGHT\":\n         self.x += 100\n     if self.direction == \"LEFT\":\n         self.x -= 100\n     if self.direction == \"UP\":\n         self.y -= 100\n     if self.direction == \"DOWN\":\n         self.y += 100\n\nclass Appli:\n\n    windowX = 800\n    windowY = 600\n\n    def __init__(self):\n        self._running = True\n        self._show_surf = None\n        self._image_surf = None\n        self.snake = Snake() \n\n    def on_init(self):\n        pygame.init()\n        self._show_surf = pygame.display.set_mode((self.windowX,self.windowY), pygame.HWSURFACE)\n\n        pygame.display.set_caption('Snake V2.7')\n        self._running = True\n        self._image_surf = pygame.image.load(\"pygame.png\").convert()\n\n\n    def on_event(self, event):\n        if event.type == QUIT:\n            self._running = False\n\n    def on_loop(self):\n        pass\n\n    def on_render(self):\n        self._display_surf.fill((0,0,0))\n        self._display_surf.blit(self._image_surf,(self.snake.x,self.snake.y))\n        pygame.display.flip()\n\n    def on_cleanup(self):\n        pygame.quit()\n\n    def on_execute(self):\n        snake=Snake()\n        if self.on_init() == False:\n            self._running = False\n\n        while( self._running ):\n            pygame.event.pump()\n            action = pygame.key.get_pressed()\n            if action[pygame.K_RIGHT]:\n                snake.changeDirectionTo(1)\n            if action[pygame.K_LEFT]:\n                snake.changeDirectionTo(2)\n            if action[pygame.K_UP]:\n                snake.changeDirectionTo(3)\n            if action[pygame.K_DOWN]:\n                snake.changeDirectionTo(4)\n            self.on_loop()\n            self.on_render()\n        self.on_cleanup()\n\n\nif __name__ == \"__main__\" :\n    theApp = App()\n    theApp.on_execute()\n</code></pre>\n\n<p>Anyone knows where the problem is? \nThe first time I got this error, I changed all directions \"RIGHT\" , \"LEFT\", \"UP\" , \"DOWN\" to 1,2,3,4 , hoping that it would solve the 'str call' error, but it didn't...</p>\n\n<p>Thanks for help</p>\n"}, {"tags": ["python", "regex", "scala", "apache-spark", "pyspark"], "comments": [{"owner": {"reputation": 36454, "user_id": 5880706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/147556055711bd1fa5a938cef92a22b9?s=128&d=identicon&r=PG&f=1", "display_name": "Ramesh Maharjan", "link": "https://stackoverflow.com/users/5880706/ramesh-maharjan"}, "edited": false, "score": 0, "creation_date": 1527746758, "post_id": 50612296, "comment_id": 88245034, "body": "what was the dataframe format? can we see the output of df.show(5)?"}, {"owner": {"reputation": 23, "user_id": 3409426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/626ed51acbe5a208ffa491314aa2cef2?s=128&d=identicon&r=PG&f=1", "display_name": "user3409426", "link": "https://stackoverflow.com/users/3409426/user3409426"}, "reply_to_user": {"reputation": 36454, "user_id": 5880706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/147556055711bd1fa5a938cef92a22b9?s=128&d=identicon&r=PG&f=1", "display_name": "Ramesh Maharjan", "link": "https://stackoverflow.com/users/5880706/ramesh-maharjan"}, "edited": false, "score": 0, "creation_date": 1527750359, "post_id": 50612296, "comment_id": 88246762, "body": "+--------------------+---+---+---+ |                   a|  b|  c|  d|e +--------------------+---+---+---+ |ACW00011604  17.1...|   |   |   | |ACW00011647  17.1...|   |   |   | |AE000041196  25.3...|   |   |   | |AEM00041194  25.2...|   |   |   |       I am splitting into n columns as in the file. If I do \\\\t, everything is in one column."}, {"owner": {"reputation": 36454, "user_id": 5880706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/147556055711bd1fa5a938cef92a22b9?s=128&d=identicon&r=PG&f=1", "display_name": "Ramesh Maharjan", "link": "https://stackoverflow.com/users/5880706/ramesh-maharjan"}, "edited": false, "score": 0, "creation_date": 1527750569, "post_id": 50612296, "comment_id": 88246868, "body": "please include and format it in the question itself as comments are hard to read with such data"}, {"owner": {"reputation": 23, "user_id": 3409426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/626ed51acbe5a208ffa491314aa2cef2?s=128&d=identicon&r=PG&f=1", "display_name": "user3409426", "link": "https://stackoverflow.com/users/3409426/user3409426"}, "reply_to_user": {"reputation": 36454, "user_id": 5880706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/147556055711bd1fa5a938cef92a22b9?s=128&d=identicon&r=PG&f=1", "display_name": "Ramesh Maharjan", "link": "https://stackoverflow.com/users/5880706/ramesh-maharjan"}, "edited": false, "score": 0, "creation_date": 1527751018, "post_id": 50612296, "comment_id": 88247092, "body": "Did. Its just loading the whole file into a table structure."}, {"owner": {"reputation": 36454, "user_id": 5880706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/147556055711bd1fa5a938cef92a22b9?s=128&d=identicon&r=PG&f=1", "display_name": "Ramesh Maharjan", "link": "https://stackoverflow.com/users/5880706/ramesh-maharjan"}, "edited": false, "score": 0, "creation_date": 1527752939, "post_id": 50612296, "comment_id": 88248175, "body": "can you also post your code for creating the dataframe?"}, {"owner": {"reputation": 23, "user_id": 3409426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/626ed51acbe5a208ffa491314aa2cef2?s=128&d=identicon&r=PG&f=1", "display_name": "user3409426", "link": "https://stackoverflow.com/users/3409426/user3409426"}, "reply_to_user": {"reputation": 36454, "user_id": 5880706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/147556055711bd1fa5a938cef92a22b9?s=128&d=identicon&r=PG&f=1", "display_name": "Ramesh Maharjan", "link": "https://stackoverflow.com/users/5880706/ramesh-maharjan"}, "edited": false, "score": 0, "creation_date": 1527754901, "post_id": 50612296, "comment_id": 88249254, "body": "That&#39;s just taking the RDD[Array[string]] format and calling toDF(). The regex/method to split each line into an array is not working. That code goes like dfRdd=result.map(row=&gt; table(row(0),row(1),row(2)...row(n)); dfRdd.toDF().show();   table--&gt; is a case class."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 3409426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/626ed51acbe5a208ffa491314aa2cef2?s=128&d=identicon&r=PG&f=1", "display_name": "user3409426", "link": "https://stackoverflow.com/users/3409426/user3409426"}, "edited": false, "score": 0, "creation_date": 1527763093, "post_id": 50620402, "comment_id": 88254302, "body": "Thanks!! This Worked!"}], "tags": [], "owner": {"reputation": 2469, "user_id": 1444286, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f9557bb4f3896e474bbb88089330c5d6?s=128&d=identicon&r=PG", "display_name": "Tom Lous", "link": "https://stackoverflow.com/users/1444286/tom-lous"}, "is_accepted": true, "score": 1, "last_activity_date": 1527757141, "creation_date": 1527757141, "answer_id": 50620402, "question_id": 50612296, "link": "https://stackoverflow.com/questions/50612296/how-do-i-parse-data-from-a-file-separated-by-arbitrary-number-of-spaces/50620402#50620402", "title": "How do I parse data from a file separated by arbitrary number of spaces?", "body": "<p>You need to parse the lines yourself.</p>\n\n<p>In Scala I would first create a case class concerning the desired output:</p>\n\n<pre class=\"lang-scala prettyprint-override\"><code>case class Measure(val1: Option[String], val2:Option[Double], val3:Option[Double], val4:Option[Double], val5:Option[String], val6:Option[String], val7:Option[Int])\n</code></pre>\n\n<p>Followed by some custom string parsing, based on predetermined column widths:</p>\n\n<pre class=\"lang-scala prettyprint-override\"><code>spark\n  .read\n  .textFile(\"src/main/resources/fixedcol.txt\")\n    .map(str =&gt; {\n      val positions = List(11, 20, 30, 37, 72, 75, 85)\n      val positionsFromTo = (0 :: positions).sliding(2).map(p =&gt; (p(0),p(1))).toList\n      val subItems = positionsFromTo.map{\n        case (from, to) =&gt; Try(str.substring(from, to).trim).toOption\n      }\n\n      Measure(\n        subItems(0),\n        subItems(1).map(_.toDouble),\n        subItems(2).map(_.toDouble),\n        subItems(3).map(_.toDouble),\n        subItems(4),\n        subItems(5),\n        subItems(6).map(_.toInt)\n      )\n    })(Encoders.product[Measure])\n  .show(false)\n</code></pre>\n\n<p>Resulting in </p>\n\n<pre><code>+-----------+-------+--------+------+-------------------+----+-----+\n|val1       |val2   |val3    |val4  |val5               |val6|val7 |\n+-----------+-------+--------+------+-------------------+----+-----+\n|ACW00011604|17.1167|-61.7833|10.1  |null               |null|null |\n|ACW00011647|17.1333|-61.7833|19.2  |null               |null|null |\n|AE000041196|25.333 |55.517  |34.0  |SHARJAH INTER. AIRP|GSN |41196|\n|AEM00041194|25.255 |55.364  |10.4  |DUBAI INTL         |    |41194|\n|AEM00041217|24.433 |54.651  |26.8  |ABU DHABI INTL     |    |41217|\n|AEM00041218|24.262 |55.609  |264.9 |AL AIN INTL        |    |41218|\n|AF000040930|35.317 |69.017  |3366.0|NORTH-SALANG       |GSN |40930|\n|AFM00040938|34.21  |62.228  |977.2 |HERAT              |    |40938|\n|AFM00040948|34.566 |69.212  |1791.3|KABUL INTL         |    |40948|\n|AFM00040990|31.5   |65.85   |1010.0|KANDAHAR AIRPORT   |    |40990|\n|AG000060390|36.7167|3.25    |24.0  |ALGER-DAR EL BEIDA |GSN |60390|\n|AG000060590|30.5667|2.8667  |397.0 |EL-GOLEA           |GSN |60590|\n|AG000060611|28.05  |9.6331  |561.0 |IN-AMENAS          |GSN |60611|\n|AG000060680|22.8   |5.4331  |1362.0|TAMANRASSET        |GSN |60680|\n|AGE00135039|35.7297|0.65    |50.0  |null               |null|null |\n|AGE00147704|36.97  |7.79    |161.0 |null               |null|null |\n+-----------+-------+--------+------+-------------------+----+-----+\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 3409426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/626ed51acbe5a208ffa491314aa2cef2?s=128&d=identicon&r=PG&f=1", "display_name": "user3409426", "link": "https://stackoverflow.com/users/3409426/user3409426"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 50620402, "answer_count": 1, "score": 1, "last_activity_date": 1527758854, "creation_date": 1527709245, "last_edit_date": 1527755061, "question_id": 50612296, "link": "https://stackoverflow.com/questions/50612296/how-do-i-parse-data-from-a-file-separated-by-arbitrary-number-of-spaces", "title": "How do I parse data from a file separated by arbitrary number of spaces?", "body": "<p>I have a dataset that looks like this:</p>\n\n<p><a href=\"https://www1.ncdc.noaa.gov/pub/data/ghcn/daily/ghcnd-stations.txt\" rel=\"nofollow noreferrer\">https://www1.ncdc.noaa.gov/pub/data/ghcn/daily/ghcnd-stations.txt</a></p>\n\n<p>It is a fixed-width text file.</p>\n\n<p>How do I separate the values in the file to load them into a data frame? </p>\n\n<p>What could be a good regex for the split?</p>\n\n<pre><code>var result=data.map(line=&gt;line.split(\"\\\\t\"))\n</code></pre>\n\n<p>I tried using a \"\\t\" separator but it is not separating the values right. I am not sure what delimiter I have to use. </p>\n\n<p>I am trying to split each line into an array of values like this</p>\n\n<p>arr=[\"ACW00011604\",\"17.1167\",\"-61.7833\",\"10.1\", \"ST JOHNS COOLIDGE FLD\"]. </p>\n\n<p>I am using spark 1.6 and no data bricks. </p>\n\n<p><a href=\"https://i.stack.imgur.com/PLr5J.png\" rel=\"nofollow noreferrer\">Data Frame Format:</a></p>\n\n<pre><code>+--------------------+---+---+---+\n|  a                 | b | c | d |e \n+--------------------+---+---+---+ \n| ACW00011604 17.1...|   |   |   | \n| ACW00011647 17.1...|   |   |   | \n| AE000041196 25.3...|   |   |   | \n| AEM00041194 25.2...|   |   |   |\n</code></pre>\n"}, {"tags": ["python", "image", "image-processing", "crop"], "comments": [{"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1527719413, "post_id": 50612272, "comment_id": 88238191, "body": "I see 9 lines of code, each extracting a slice and saving to a file..."}, {"owner": {"reputation": 554, "user_id": 2366830, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ifTJM.jpg?s=128&g=1", "display_name": "CTOverton", "link": "https://stackoverflow.com/users/2366830/ctoverton"}, "reply_to_user": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1527719464, "post_id": 50612272, "comment_id": 88238207, "body": "@MarkSetchell thanks, I actually figured it out. I\u2019ll post the solution when it\u2019s complete"}, {"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1527719519, "post_id": 50612272, "comment_id": 88238221, "body": "Cool, well,done! :-)"}], "answers": [{"tags": [], "owner": {"reputation": 554, "user_id": 2366830, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ifTJM.jpg?s=128&g=1", "display_name": "CTOverton", "link": "https://stackoverflow.com/users/2366830/ctoverton"}, "is_accepted": true, "score": 0, "last_activity_date": 1528049275, "creation_date": 1528049275, "answer_id": 50669480, "question_id": 50612272, "link": "https://stackoverflow.com/questions/50612272/multi-crop-an-image-in-python-with-custom-parameters/50669480#50669480", "title": "Multi Crop an image in Python with custom parameters", "body": "<pre><code>ExFileName.crop(0,0,0,0)\n</code></pre>\n\n<p>Allows you to crop an image using custom parameters. </p>\n\n<p>i.e <code>(LeftEdgeX, TopEdgeY, RightEdgeX, BottomEdgeY)</code></p>\n\n<p>Using this it's easy to then create a script to set the various bounds for all 9 crops using some lists and a method. </p>\n\n<p>This is the code I used for my project: <a href=\"https://github.com/CTOverton/Custom-Image-Crop-Python\" rel=\"nofollow noreferrer\">https://github.com/CTOverton/Custom-Image-Crop-Python</a></p>\n"}], "owner": {"reputation": 554, "user_id": 2366830, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ifTJM.jpg?s=128&g=1", "display_name": "CTOverton", "link": "https://stackoverflow.com/users/2366830/ctoverton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 305, "favorite_count": 0, "accepted_answer_id": 50669480, "answer_count": 1, "score": 0, "last_activity_date": 1528049275, "creation_date": 1527709127, "question_id": 50612272, "link": "https://stackoverflow.com/questions/50612272/multi-crop-an-image-in-python-with-custom-parameters", "title": "Multi Crop an image in Python with custom parameters", "body": "<p>I\u2019m trying to crop an image into 9 separate images (or tiles) however not 9 equal tiles. </p>\n\n<p>For example, </p>\n\n<p>First row: Height: 20px\nSecond row: Height: 40px\nThird row: Height: 15px</p>\n\n<p>Universal width of tiles: 20px</p>\n\n<p>Then it needs to save all the newly created tiles as separate images (ex: tile 1, 2, 3 etc)</p>\n\n<p>All I\u2019ve found is image split which limits to equal crops. Any ideas?</p>\n"}]